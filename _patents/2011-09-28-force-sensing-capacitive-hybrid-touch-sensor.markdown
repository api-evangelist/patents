---
title: Force sensing capacitive hybrid touch sensor
abstract: A method for detecting a magnitude of force applied to a capacitive sensor array may comprise receiving a plurality of capacitance measurements affected by a contact at a touch-sensing surface, and determining a magnitude of a force applied to the touch-sensing surface at a location of the contact based on the location of the contact and a capacitance measurement of the first plurality of capacitance measurements.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09454268&OS=09454268&RS=09454268
owner: PARADE TECHNOLOGIES, LTD.
number: 09454268
owner_city: Santa Clara
owner_country: US
publication_date: 20110928
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["RELATED APPLICATIONS","TECHNICAL FIELD","BACKGROUND","DETAILED DESCRIPTION"],"p":["This application claims priority to U.S. Provisional Application No. 61\/522,151, filed on Aug. 10, 2011 and is a continuation in part of U.S. patent application Ser. No. 13\/091,132, filed on Apr. 21, 2011, which claims priority to U.S. Provisional Application No. 61\/392,034, filed on Oct. 12, 2010, all of which are hereby incorporated by reference.","This disclosure relates to the field of capacitive sensors and, in particular, to a method of measuring force using a capacitive sensor array.","Computing devices, such as notebook computers, personal data assistants (PDAs), kiosks, and mobile handsets, have user interface devices, which are also known as human interface devices (HID). One user interface device that has become more common is a touch-sensor pad (also commonly referred to as a touchpad). A basic notebook computer touch-sensor pad emulates the function of a personal computer (PC) mouse. A touch-sensor pad is typically embedded into a PC notebook for built-in portability. A touch-sensor pad replicates mouse X\/Y movement by using two defined axes which contain a collection of sensor elements that detect the position of one or more conductive objects, such as a finger. Mouse right\/left button clicks can be replicated by two mechanical buttons, located in the vicinity of the touchpad, or by tapping commands on the touch-sensor pad itself. The touch-sensor pad provides a user interface device for performing such functions as positioning a pointer, or selecting an item on a display. These touch-sensor pads may include multi-dimensional sensor arrays for detecting movement in multiple axes. The sensor array may include a one-dimensional sensor array, detecting movement in one axis. The sensor array may also be two dimensional, detecting movements in two axes.","Another user interface device that has become more common is a touch screen. Touch screens, also known as touchscreens, touch windows, touch panels, or touchscreen panels, are transparent display overlays which are typically either pressure-sensitive (resistive or piezoelectric), electrically-sensitive (capacitive), acoustically-sensitive (surface acoustic wave (SAW)) or photo-sensitive (infra-red). The effect of such overlays allows a display to be used as an input device, removing the keyboard and\/or the mouse as the primary input device for interacting with the display's content. Such displays can be attached to computers or, as terminals, to networks. Touch screens have become familiar in retail settings, on point-of-sale systems, on ATMs, on mobile handsets, on kiosks, on game consoles, and on PDAs where a stylus is sometimes used to manipulate the graphical user interface (GUI) and to enter data. A user can touch a touch screen or a touch-sensor pad to manipulate data. For example, a user can apply a single touch, by using a finger to touch the surface of a touch screen, to select an item from a menu.","The following description sets forth numerous specific details such as examples of specific systems, components, methods, and so forth, in order to provide a good understanding of several embodiments of the present invention. It will be apparent to one skilled in the art, however, that at least some embodiments of the present invention may be practiced without these specific details. In other instances, well-known components or methods are not described in detail or are presented in a simple block diagram format in order to avoid unnecessarily obscuring the present invention. Thus, the specific details set forth are merely exemplary. Particular implementations may vary from these exemplary details and still be contemplated to be within the spirit and scope of the present invention.","One embodiment of a flexible touch-sensing surface comprising a capacitive sensor array may be used to determine a magnitude of force applied by a finger or other object to the touch-sensing surface, based on capacitance measurements of the sensor array. Such a touch-sensing surface may further be used to determine an amount of deflection of the sensor at or near a point where the force is applied.","In one embodiment, a flexible touch-sensing surface may include a capacitive sensor array with a highly flexible overlay made of a material such as Poly(methyl methacrylate), or PMMA. In one embodiment, the capacitive sensor array may respond to changes in capacitance resulting from proximity of a conductive object to the capacitive sensor array, or to pressure applied by a conductive or nonconductive object to the surface of the sensor array.","In one embodiment, the flexible touch-sensing surface implemented using a capacitive sensor array may overlay a display panel, such as a liquid crystal display (LCD) screen to implement a touchscreen. In one embodiment, a conductive or nonconductive object applying pressure to the flexible touch-sensing surface may cause displacement of some of the sensor elements of the capacitive sensor array, which may be moved closer to the display panel, thus increasing the capacitive coupling between the display panel and the displaced sensor elements. This displacement may result in measurable changes in capacitance at any sensor elements of the capacitive sensor array that are at least partially displaced.","A processing device implementing the above method may receive the first and second capacitance measurements at a capacitive sensor input, then detect the presence of pressure applied to the touch-sensing surface based on the comparison between the first and second capacitance measurements. In one embodiment, the processing device may further determine a magnitude of force that is applied at the contact, and may transmit the force information to a host for further processing. In one embodiment, the capacitance measurements may be correlated with a force value stored in a lookup table. In one embodiment, the method may be used to determine a force magnitude for each of a plurality of contacts at the touch-sensing surface where force is simultaneously applied.",{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 1","b":["100","110","100","116","110","150","116","121","116"]},"In one embodiment, the sensor array  includes sensor elements ()-(N) (where N is a positive integer) that are disposed as a two-dimensional matrix (also referred to as an XY matrix). The sensor array  is coupled to pins ()-(N) of the processing device  via one or more analog buses  transporting multiple signals. In this embodiment, each sensor element ()-(N) is represented as a capacitor.","In one embodiment, the capacitance sensor  may include a relaxation oscillator or other means to convert a capacitance into a measured value. The capacitance sensor  may also include a counter or timer to measure the oscillator output. The processing device  may further include software components to convert the count value (e.g., capacitance value) into a sensor element detection decision (also referred to as switch detection decision) or relative magnitude. It should be noted that there are various known methods for measuring capacitance, such as current versus voltage phase shift measurement, resistor-capacitor charge timing, capacitive bridge divider, charge transfer, successive approximation, sigma-delta modulators, charge-accumulation circuits, field effect, mutual capacitance, frequency shift, or other capacitance measurement algorithms. It should be noted however, instead of evaluating the raw counts relative to a threshold, the capacitance sensor  may be evaluating other measurements to determine the user interaction. For example, in the capacitance sensor  having a sigma-delta modulator, the capacitance sensor  is evaluating the ratio of pulse widths of the output, instead of the raw counts being over or under a certain threshold.","In one embodiment, the processing device  further includes processing logic . Operations of the processing logic  may be implemented in firmware; alternatively, it may be implemented in hardware or software. The processing logic  may receive signals from the capacitance sensor , and determine the state of the sensor array , such as whether an object (e.g., a finger) is detected on or in proximity to the sensor array  (e.g., determining the presence of the object), where the object is detected on the sensor array (e.g., determining the location of the object), tracking the motion of the object, or other information related to an object detected at the touch sensor.","In another embodiment, instead of performing the operations of the processing logic  in the processing device , the processing device  may send the raw data or partially-processed data to the host . The host , as illustrated in , may include decision logic  that performs some or all of the operations of the processing logic . Operations of the decision logic  may be implemented in firmware, hardware, software, or a combination thereof. The host  may include a high-level Application Programming Interface (API) in applications  that perform routines on the received data, such as compensating for sensitivity differences, other compensation algorithms, baseline update routines, start-up and\/or initialization routines, interpolation operations, or scaling operations. The operations described with respect to the processing logic  may be implemented in the decision logic , the applications , or in other hardware, software, and\/or firmware external to the processing device . In some other embodiments, the processing device  is the host .","In another embodiment, the processing device  may also include a non-sensing actions block . This block  may be used to process and\/or receive\/transmit data to and from the host . For example, additional components may be implemented to operate with the processing device  along with the sensor array  (e.g., keyboard, keypad, mouse, trackball, LEDs, displays, or other peripheral devices).","The processing device  may reside on a common carrier substrate such as, for example, an integrated circuit (IC) die substrate, or a multi-chip module substrate. Alternatively, the components of the processing device  may be one or more separate integrated circuits and\/or discrete components. In one embodiment, the processing device  may be the Programmable System on a Chip (PSoC\u2122) processing device, developed by Cypress Semiconductor Corporation, San Jose, Calif. Alternatively, the processing device  may be one or more other processing devices known by those of ordinary skill in the art, such as a microprocessor or central processing unit, a controller, special-purpose processor, digital signal processor (DSP), an application specific integrated circuit (ASIC), a field programmable gate array (FPGA), or other programmable device. In an alternative embodiment, for example, the processing device  may be a network processor having multiple processors including a core unit and multiple micro-engines. Additionally, the processing device  may include any combination of general-purpose processing device(s) and special-purpose processing device(s).","In one embodiment, the electronic system  is implemented in a device that includes the touch-sensing surface  as the user interface, such as handheld electronics, portable telephones, cellular telephones, notebook computers, personal computers, personal data assistants (PDAs), kiosks, keyboards, televisions, remote controls, monitors, handheld multi-media devices, handheld video players, gaming devices, control panels of a household or industrial appliances, or other computer peripheral or input devices. Alternatively, the electronic system  may be used in other types of devices. It should be noted that the components of electronic system  may include all the components described above. Alternatively, electronic system  may include only some of the components described above, or include additional components not listed herein.",{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 2","b":["121","101","121","121","101","100","121","225","222","223","225","101","212","213"]},"Capacitance sensor  includes multiplexer control , demultiplexer  and multiplexer , clock generator , signal generator , demodulation circuit , and analog to digital converter (ADC) . ADC  is further coupled with touch coordinate converter . Touch coordinate converter  may be implemented in the processing logic .","The transmit and receive electrodes in the electrode matrix  may be arranged so that each of the transmit electrodes overlap and cross each of the receive electrodes such as to form an array of intersections, while maintaining galvanic isolation from each other. Thus, each transmit electrode may be capacitively coupled with each of the receive electrodes. For example, transmit electrode  is capacitively coupled with receive electrode  at the point where transmit electrode  and receive electrode  overlap.","Clock generator  supplies a clock signal to signal generator , which produces a TX signal  to be supplied to the transmit electrodes of touch sensor . In one embodiment, the signal generator  includes a set of switches that operate according to the clock signal from clock generator . The switches may generate a TX signal  by periodically connecting the output of signal generator  to a first voltage and then to a second voltage, wherein said first and second voltages are different.","The output of signal generator  is connected with demultiplexer , which allows the TX signal  to be applied to any of the M transmit electrodes of touch sensor . In one embodiment, multiplexer control  controls demultiplexer  so that the TX signal  is applied to each transmit electrode  in a controlled sequence. Demultiplexer  may also be used to ground, float, or connect an alternate signal to the other transmit electrodes to which the TX signal  is not currently being applied. In an alternate embodiment the TX signal  may be presented in a true form to a subset of the transmit electrodes  and in complement form to a second subset of the transmit electrodes , wherein there is no overlap in members of the first and second subset of transmit electrodes .","Because of the capacitive coupling between the transmit and receive electrodes, the TX signal  applied to each transmit electrode induces a current within each of the receive electrodes. For instance, when the TX signal  is applied to transmit electrode  through demultiplexer , the TX signal  induces an RX signal  on the receive electrodes in matrix . The RX signal  on each of the receive electrodes can then be measured in sequence by using multiplexer  to connect each of the N receive electrodes to demodulation circuit  in sequence.","The mutual capacitance associated with each intersection between a TX electrode and an RX electrode can be sensed by selecting every available combination of TX electrode and an RX electrode using demultiplexer  and multiplexer . To improve performance, multiplexer  may also be segmented to allow more than one of the receive electrodes in matrix  to be routed to additional demodulation circuits . In an optimized configuration, wherein there is a 1-to-1 correspondence of instances of demodulation circuit  with receive electrodes, multiplexer  may not be present in the system.","When a conductive object, such as a finger, approaches the electrode matrix , the object causes a decrease in the measured mutual capacitance between only some of the electrodes. For example, if a finger is placed near the intersection of transmit electrode  and receive electrode , the presence of the finger will decrease the charge coupled between electrodes  and . Thus, the location of the finger on the touchpad can be determined by identifying the one or more receive electrodes having a decrease in measured mutual capacitance in addition to identifying the transmit electrode to which the TX signal  was applied at the time the decrease in capacitance was measured on the one or more receive electrodes.","By determining the mutual capacitances associated with each intersection of electrodes in the matrix , the presence and locations of one or more conductive objects may be determined. The determination may be sequential, in parallel, or may occur more frequently at commonly used electrodes.","In alternative embodiments, other methods for detecting the presence of a finger or other conductive object may be used where the finger or conductive object causes an increase in measured capacitance at one or more electrodes, which may be arranged in a grid or other pattern. For example, a finger placed near an electrode of a capacitive sensor may introduce an additional capacitance to ground that increases the total capacitance between the electrode and ground. The location of the finger can be determined based on the locations of one or more electrodes at which a change in measured capacitance is detected.","The induced current signal  is integrated by demodulation circuit . The rectified current output by demodulation circuit  can then be filtered and converted to a digital code by ADC .","A series of such digital codes measured from adjacent sensor or intersections may be converted to touch coordinates indicating a position of an input on touch sensor array  by touch coordinate converter . The touch coordinates may then be used to detect gestures or perform other functions by the processing logic .","In one embodiment, the capacitance sensor  can be configured to detect multiple touches. One technique for the detection and location resolution of multiple touches uses a two-axis implementation: one axis to support rows and another axis to support columns. Additional axes, such as a diagonal axis, implemented on the surface using additional layers, can allow resolution of additional touches.","In one embodiment, a system for tracking locations of contacts on a touch-sensing surface may determine a force magnitude for each of the contacts based on the capacitance measurements from the capacitive sensor array. In one embodiment, a capacitive touch-sensing system that is also capable of determining a magnitude of force applied to each of a plurality of contacts at a touch-sensing surface may be constructed from flexible materials, such as PMMA, and may have no shield between the capacitive sensor array and an LCD display panel. In such an embodiment, changes in capacitances of sensor elements may be caused by the displacement of the sensor elements closer to a VCOM plane of the LCD display panel.",{"@attributes":{"id":"p-0045","num":"0044"},"figref":["FIGS. 3A and 3B","FIG. 3A","FIG. 2"],"b":["101","300","301","121"]},"Touch-sensing surface  includes the sensor elements  formed on a substrate  and covered by an overlay . In one embodiment, the substrate  is made from a material such as Polyethylene terephthalate (PET). In one embodiment, the substrate  is flexible and transparent. The layer of sensor elements  may be additionally covered with an overlay , which may be manufactured from a material such as PMMA. In one embodiment, the overlay  is also flexible and transparent. The flexible touch-sensing surface  overlays a display panel , which may be a LCD display, LED display, OLED display, or some other type of display panel.","As illustrated in , pressure may be applied to the touch-sensing surface  by an object such as stylus . The pressure applied by the stylus  displaces the sensor elements  such that sensor elements nearer to the location where the pressure is applied are pushed closer to the display panel.","Touch-sensing surface , as illustrated in , is similar to touch-sensing surface , but includes multiple layers of sensor elements . Touch-sensing surface  overlays a display panel , and includes two layers of sensor elements  formed on a substrate  and covered by an overlay . Stylus  applies pressure to the flexible touch-sensing surface, deforming the surface and moving at least a portion of some sensor elements closer to the display panel .","As illustrated in , the displacement of the sensor elements is exaggerated for clarity. In the following description, the terms \u201cforce\u201d and \u201cpressure\u201d may be used interchangeably to describe a condition that causes displacement of sensor elements or deformation of the touch-sensing surface or sensor array.","Because of the deflection of the sensor elements  and  closer to the LCD, the capacitive coupling between the electrodes and the LCD increases. Thus, even a displacement of the sensor elements by a non-conductive stylus or object can cause a change in the measured capacitances as compared to the baseline capacitance values, which are the capacitance values measured from the sensor elements when the sensor elements are not displaced. In one embodiment, the baseline capacitance tracks changes due to fluctuations in temperature or other factors to minimize the effect of these factors on the measured capacitance.","A subset of the capacitance measurements that are changed by the displacement of the sensor elements can be used to detect and measure the force applied to the capacitive sensor array. The deflection of some of the sensor elements  or  can result in an increase in the signal strengths measured by an ADC such as ADC .",{"@attributes":{"id":"p-0052","num":"0051"},"figref":"FIG. 4A","b":["401","411","420","421","428","411","428","110","411","428"]},"In one embodiment, the capacitance values A (unshaded bars) represent capacitance values measured from the row sensor elements - when a contact  by a conductive object is near or touching the sensor array , but is not exerting force on the sensor array  and is not deforming sensor array . Capacitance values B (shaded bars) represent capacitance values measured from the row sensor elements - when the conductive object additionally exerts a force deforming the sensor array at contact location . Individual capacitance values from sets A and B are referenced according to the sensor elements from which they are measured, i.e., capacitance measurement A or B from row element . The sets A and B can each be referred to as a capacitance profile associated with a particular set of contacts at the touch-sensing surface.","In one embodiment, if a non-conductive object applies force to the sensor array  at a high speed, the first few profiles may have profile ratios that are comparable to those that may be caused by a conductive contact that does not apply force. This may cause difficulty in distinguishing between the conductive and non-conductive contacts. To resolve this problem, a debouncing technique may be implemented so that a number of initial sampled profiles may be discarded. For example, the first one or two profiles sampled after detecting the initial contact may be discarded so that the touching object settles to its normal profile.","In , the set of capacitance values A illustrates that a contact  that does not apply force to the sensor array  and does not displace the sensor elements - results in a sharper drop in magnitude of the capacitance signal farther away from the center of contact . In contrast, the set of capacitance values B resulting from an object applying force to the sensor array  at contact  illustrates a more gradual drop in magnitude of the capacitance signals farther from the center of contact , which is caused by the displacement of the sensor elements near the contact .","Thus, in one embodiment, a contact  from a conductive object not applying force results in a sharper profile. In contrast, the contact  from an object applying force and deforming the sensor array results in a wider, flatter profile. In some cases, even a nonconductive object applying force at contact location  may sufficiently increase the capacitance signals B such that the touch-sensing system may interpret the contact as a touch by a conductive object.","In one embodiment, a processing device such as processing device  that is connected to a capacitive sensor array  may detect deformation caused by pressure on the sensor array  based on a comparison between a first capacitance measurement and a second capacitance measurement from the set of capacitance measurements taken from the row elements (or column elements) of sensor array . In one embodiment, the capacitance measurement with the highest magnitude may be selected as the first capacitance value, while the second capacitance value may be chosen the nth strongest capacitance signal, where n is a predetermined integer. Alternatively, the second capacitance value may be measured from a sensor element that is a predetermined distance from the first capacitance value. For example, a first capacitance value A may be compared with a second value A.","In one embodiment, a profile ratio between the first and second capacitance values may be calculated, and an amount of force applied to the sensor elements or an amount of sensor deformation or displacement of the sensor elements may be inferred based on the profile ratio. For example, a profile ratio below a specific profile ratio threshold may be used to indicate that force is being applied to the sensor array , and may trigger a process to calculate the magnitude of the force applied to the flexible touch-sensing surface. In one embodiment, the calculation may be performed by the processing device .","In one embodiment, the calculation process of the magnitude of the force allows detecting gestures based on how much force is applied to the flexible touch-sensing surface. Since deformation of the sensor array resulting from force applied by a non-conductive object causes a wider profile (smaller drop-off farther from the contact) when compared to a narrow profile (larger drop-off farther from the contact) caused by a conductive object, a shape of the profile may be used to distinguish the cases.","For example, a ratio that characterizes the shape of the profile may be calculated using Equation 1 below:",{"@attributes":{"id":"p-0061","num":"0060"},"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mi":"profile_ratio","mo":"=","mfrac":{"mi":["Cpeak","Cn"]}}},{"mrow":{"mo":["(",")"],"mrow":{"mi":"Equation","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mn":"1"}}}]}}}},"br":{},"b":["416","418","418","416","412","420"],"sup":"th "},{"@attributes":{"id":"p-0062","num":"0061"},"figref":["FIG. 4B","FIG. 4B"],"sub":["1","4","1 ","4 "]},"In one embodiment, the value for n may be chosen such that a capacitance value that is affected by the sensor element displacement, and that is less affected by proximity of a conductive object is chosen as the second capacitance value. The value for n may be determined empirically by comparing profiles caused by conductive contacts and non-conductive contacts that apply force. The value of n may also differ based on the pitch of the sensor elements in sensor array .","One embodiment of a touch-sensing system that is capable of detecting force may correlate values for a fourth strongest signal (P), peak signal (P), and deflection (D) with a force value and a location on the touch-sensing surface. In one embodiment, these values may be stored in a table such as 3D lookup table , illustrated in .","The 3D lookup table  includes 16 sets of (P, P, D) values such as value set  for each layer . Each layer of 3D lookup table  represents an amount of force that may be applied to the touch-sensing surface. For example, when determining the values in the lookup table  empirically, each of the values in the same layer may have been determined by applying the same amount of force to the touch-sensing surface.","In one embodiment, a table such as the 3D lookup table  may be generated by a robot that applies a target force to various locations on the touch-sensing surface using a touching object, while utilizing a force gauge to control and measure the amount of force applied to the surface by the touching object. The Z-position of the touching object at the time the target force is applied or measured can be used to estimate the amount of sensor deflection.","In one embodiment, the 16 (P, P, D) value sets may correspond to intersections in the sensor array. Alternatively, the value sets may only be stored for some intersections of sensor elements, or may be stored for other points distributed across the surface of the sensor array that are not associated with an intersection. In one embodiment, fewer or more than 16 value pairs are stored in each layer. A 3D lookup table may also include fewer or more than 3 layers.","In one embodiment, the peak (P) and fourth strongest (P) capacitance values may be used to correct for shifting of any detected coordinate locations of contacts due to displacement of sensor elements by force applied to the touch-sensing surface. For example, a touch by a conductive object that displaces sensor elements may result in a different set of reported coordinates as compared to a touch in the same location that does not displace the sensor elements.","In one embodiment, in addition to correcting for coordinate shifting effects, the Pvalue of a contact may also be used to determine a magnitude of a force applied to the touch-sensing surface at the contact location. In one embodiment, the Pvalue represents a signal that is affected primarily by the force applied to the contact location or the displacement of the sensor elements, and is less affected by capacitive coupling with the object contacting the touch-sensing surface. In one embodiment, Pmay be replaced by any capacitance signal that is attributable primarily to force applied to the surface or displacement of the sensor elements, rather than capacitive coupling with a finger or other conductive object.","In one embodiment, the value of Pchanges monotonically with the amount of force applied to the touch-sensing surface. Thus, the applied force may be represented as a function of Pfor each of the 16 value pairs (which may correspond to locations on the touch-sensing surface). The lookup table may then be used to determine the force on the sensor based on a measured Pvalue. In one embodiment, determining the magnitude of the applied force based on the Pvalue may occur in real time, during the operation of the touch-sensing system.","In one embodiment, a touch-sensing system implementing a process for detecting force applied to a touch-sensing surface may capture a capacitance profile caused by one or more contacts at the touch-sensing surface, then use the Pand Pvalues stored in a lookup table to correct the capacitance profile and obtain a corrected coordinate location for each of the one or more contacts. For example, the touch-sensing system may determine an appropriate quadratic compensation profile to adjust the measured capacitance profile, then determine a touch location based on the compensated profile. Using a 3D lookup table such as table , as illustrated in , the touch-sensing system may further use linear interpolation to determine Pvalues corresponding to the touch location for each force layer . In one embodiment, the measured Pvalue may lie between two interpolated Pvalues corresponding to two force levels F and F. The touch-sensing system may perform further interpolation between the force layers F and F to more accurately correlate the measured Pwith a force value.",{"@attributes":{"id":"p-0072","num":"0071"},"figref":"FIG. 6","b":["900","600","900","0","0"]},"As illustrated in , the touch location (X, Y) is surrounded by four points: (X, Y), (X, Y), (X, Y), and (X, Y). In one embodiment, a contact at location (X, Y) causes a Psignal that is a weighted average of the Pvalues of the four surrounding points. In one embodiment, the weighting factors may be determined by the distance from the touch location (X, Y) to each of the four surrounding points. Defining the weighting factors in the X and Y directions as \u03b1, and \u03b2, respectively, yields Equations 2 and 3 below:",{"@attributes":{"id":"p-0074","num":"0073"},"maths":{"@attributes":{"id":"MATH-US-00002","num":"00002"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":[{"mtd":[{"mrow":{"mi":"\u03b1","mo":"=","mfrac":{"mrow":[{"mrow":[{"mi":"X","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"0"},{"mi":"X","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"1"}],"mo":"-"},{"mrow":[{"mi":"X","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"2"},{"mi":"X","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"1"}],"mo":"-"}]}}},{"mrow":{"mo":["(",")"],"mrow":{"mi":"Equation","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mn":"2"}}}]},{"mtd":[{"mrow":{"mi":"\u03b2","mo":"=","mfrac":{"mrow":[{"mrow":[{"mi":"Y","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"0"},{"mi":"Y","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"1"}],"mo":"-"},{"mrow":[{"mi":"Y","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"2"},{"mi":"Y","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"1"}],"mo":"-"}]}}},{"mrow":{"mo":["(",")"],"mrow":{"mi":"Equation","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mn":"3"}}}]}]}}},"br":[{},{}],"sub":["4 ","4","4","4","4"],"b":["0","0"],"in-line-formulae":[{},{}],"i":["P","P","+\u03b1P","P","+\u03b1P"],"sup":["1","3","2","4"]},"In one embodiment, the Pvalues P, P, P, and P, associated with the four surrounding points may have different values depending on the force applied to the contact. Thus, if the force being applied to the touch-sensing surface is not equal to any of the force values associated with a force layer , the Pvalue calculated by interpolation between the four surrounding points will have some error. For a more accurate estimate of the measured Pvalue, the touch-sensing system may perform the above interpolation between the four surrounding points for all force layers , and may then find the closest pair of interpolated Pvalues (denoted by Pand P) such that P>P(measured)>P. In one embodiment, each of Pand Pmay be associated with the same X,Y coordinate location as the contact location being measured, and may be associated with adjacent force layers.",{"@attributes":{"id":"p-0076","num":"0075"},"figref":"FIG. 7","sub":["4,1","4,2","4 ","Touch","4,m","Touch ","Touch","Touch "],"sup":["0 ","0 ","0"],"b":["1","2","1","2","2","1","1","2"]},{"@attributes":{"id":"p-0077","num":"0076"},"maths":{"@attributes":{"id":"MATH-US-00003","num":"00003"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mi":"\u03b3","mo":"=","mfrac":{"mrow":[{"msubsup":[{"mi":"P","mrow":{"mn":"4","mo":",","mi":"m"},"mn":"0"},{"mi":"P","mrow":{"mn":["4","1"],"mo":","},"mn":"0"}],"mo":"-"},{"msubsup":[{"mi":"P","mrow":{"mn":["4","2"],"mo":","},"mn":"0"},{"mi":"P","mn":["4.1","0"]}],"mo":"-"}]}}},{"mrow":{"mo":["(",")"],"mrow":{"mi":"Equation","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mn":"5"}}}]}}}},"br":[{},{}],"in-line-formulae":[{},{}],"i":["F","F","+\u03b3F"],"sub":"Touch"},"In one embodiment, Equation 6 is valid for interpolation between two force layers; however, if the estimated Pvalue results from an applied force that is greater than the largest recorded force or less than the smallest recorded force in the force layers, then extrapolation may be used instead. In one embodiment, the extrapolation may be based on assuming a linear relationship between the force value and the Pvalue.","For example, Equation 6 above expresses a linear relationship between the force value and the Pvalue. Equation 6 may be expressed in the form of Equation 7 below:",{"@attributes":{"id":"p-0080","num":"0079"},"maths":{"@attributes":{"id":"MATH-US-00004","num":"00004"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"msub":{"mi":["F","Touch"]},"mo":"=","mrow":{"mrow":{"mfrac":{"mrow":[{"mo":["(",")"],"mrow":{"mrow":[{"mi":"F","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"2"},{"mi":"F","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"1"}],"mo":"-"}},{"msubsup":[{"mi":"P","mrow":{"mn":["4","2"],"mo":","},"mn":"0"},{"mi":"P","mrow":{"mn":["4","1"],"mo":","},"mn":"0"}],"mo":"-"}]},"mo":"\u2062","msub":{"mi":"P","mn":"4"}},"mo":"+","mfrac":{"mrow":[{"mrow":[{"msubsup":{"mi":"P","mrow":{"mn":["4","2"],"mo":","},"mn":"0"},"mo":["\u2062","\u2062","\u2062"],"mi":"F","mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"1"},{"msubsup":{"mi":"P","mrow":{"mn":["4","1"],"mo":","},"mn":"0"},"mo":["\u2062","\u2062","\u2062"],"mi":"F","mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"2"}],"mo":"-"},{"msubsup":[{"mi":"P","mrow":{"mn":["4","2"],"mo":","},"mn":"0"},{"mi":"P","mrow":{"mn":["4","1"],"mo":","},"mn":"0"}],"mo":"-"}]}}}},{"mrow":{"mo":["(",")"],"mrow":{"mi":"Equation","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mn":"7"}}}]}}}}},"Equation 7 expresses a linear relationship between Fand P. In one embodiment, extrapolation may be used to find Fif the estimated value for Pis greater than the Pvalue corresponding to the largest stored force in the table.  illustrates the determination of Fusing extrapolation based on the largest force F, having a corresponding Pvalue of P, and the next force level below F, designated as F and having a corresponding Pvalue of P. Assuming that the linear relationship between the force and Pvalues extends beyond F yields Equation 8 below:",{"@attributes":{"id":"p-0082","num":"0081"},"maths":{"@attributes":{"id":"MATH-US-00005","num":"00005"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"msub":{"mi":["F","Touch"]},"mo":"=","mrow":{"mrow":{"mfrac":{"mrow":[{"mo":["(",")"],"mrow":{"mrow":[{"mi":"F","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"2"},{"mi":"F","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"1"}],"mo":"-"}},{"msubsup":[{"mi":"P","mrow":{"mn":["4","2"],"mo":","},"mn":"0"},{"mi":"P","mrow":{"mn":["4","1"],"mo":","},"mn":"0"}],"mo":"-"}]},"mo":"\u2062","msubsup":{"mi":"P","mrow":{"mn":"4","mo":",","mi":"m"},"mn":"0"}},"mo":"+","mfrac":{"mrow":[{"mrow":[{"msubsup":{"mi":"P","mrow":{"mn":["4","2"],"mo":","},"mn":"0"},"mo":["\u2062","\u2062","\u2062"],"mi":"F","mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"1"},{"msubsup":{"mi":"P","mrow":{"mn":["4","1"],"mo":","},"mn":"0"},"mo":["\u2062","\u2062","\u2062"],"mi":"F","mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"2"}],"mo":"-"},{"msubsup":[{"mi":"P","mrow":{"mn":["4","2"],"mo":","},"mn":"0"},{"mi":"P","mrow":{"mn":["4","1"],"mo":","},"mn":"0"}],"mo":"-"}]}}}},{"mrow":{"mo":["(",")"],"mrow":{"mi":"Equation","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mn":"8"}}}]}}}},"br":{},"sub":["4,m","4 ","Touch "],"sup":"0 ","b":"2"},"In one embodiment, each of multiple contacts at the touch sensing surface may create its own independent capacitance profile, such that a force applied at each of the multiple contacts may be independently determined according to the above methods. Thus, a touch-sensing system implementing these force detection methods may, after determining a force applied at a first contact based on the capacitance measurements, further determine a magnitude of a second force applied simultaneously with the first force at a second contact location based on a second set of capacitance measurements, including a peak capacitance value and a Pvalue. In one embodiment, the touch-sensing system may determine the force applied to the second contact in a similar manner as for the force applied to the first contact.","In one embodiment, the deflection induced capacitance profiles may also be used to report locations of one or more simultaneous contacts at the touch-sensing surface by either conductive or non-conductive objects.","In one embodiment, the above method for determining a force applied to a contact at a touch-sensing surface may be used to determine an amount of displacement, or deflection, of a portion of the touch-sensing surface. For example, an object contacting a touch-sensing surface and applying force to the contact location may cause the part of the touch-sensing surface at which the force is applied to be displaced. In one embodiment, a displacement may be represented as a distance along an axis perpendicular to the touch-sensing surface.","In one embodiment, a displacement value representing the amount of displacement caused by a force applied to a touch-sensing surface may be stored in a 3D lookup table, such as table , as illustrated in . In one embodiment the displacement values may be determined empirically by applying a known force to the touch-sensing surface, then measuring the resulting displacement and storing the displacement value for each of a number of locations. The displacement value can then be determined in a similar manner as the force.",{"@attributes":{"id":"p-0087","num":"0086"},"figref":["FIG. 9","FIG. 1","FIG. 4"],"b":["900","100","900","901","901","430","401","901","900","903"]},"At block , the touch-sensing system determines a location for each of the one or more contacts based on the capacitance measurements received at block . For example, the magnitudes of capacitance values for the row and column sensor elements may be used to calculate a centroid location of a contact. From block , the process  continues at block .","At block , the touch-sensing system selects a capacitance measurement from the plurality of capacitance measurements for each of the contacts at the touch-sensing surface. In one embodiment, the capacitance value may be selected based on a ranking of the capacitance measurements in a capacitance profile. For example, the selected capacitance measurement may be a Pvalue, representing the fourth strongest capacitance signal from among the plurality of capacitance measurements in the profile. In alternative embodiments, the selected capacitance measurement may be selected based on a position relative to a peak capacitance measurement Cpeak. From block , the process  continues at block .","At block , the touch-sensing system may use a lookup table to determine a magnitude for each force applied at the one or more contacts based on the contact location and the selected capacitance measurement. For example, a lookup table such as 3D lookup table  may be used to correlate the location of a contact and a selected capacitance measurement, such as a Pvalue, of the contact with a force value. As previously described, the touch-sensing system may interpolate or extrapolate within a layer, such as a layer , or between layers to obtain a more accurate force value. From block , the process  continues at block .","At block , the touch-sensing system uses a lookup table to determine a displacement caused by each of the forces applied at the one or more contacts based on the contact location and the selected capacitance measurement. For example, a 3D lookup table such as table  may correlate a displacement value with the location of a contact and a selected capacitance measurement, such as a Pvalue. In one embodiment, the displacement values may be stored in the same 3D lookup table as force values of block . In one embodiment, the touch-sensing system may similarly perform interpolation or extrapolation within and between layers to more accurately determine a displacement value. From block , the process  continues at block .","At block , the touch-sensing system may report the force and\/or displacement values associated with each contact to a host device. For example, with reference to , processing logic  of a touch-sensing system may report the location, force, and displacement values to a host . From block , the process  may continue back to block .","Thus, the touch-sensing system may repeat the operations associated with blocks  to  to continuously update and track the locations of contacts at the touch-sensing surface, the forces applied to the touch-sensing surface at the contacts, and the amounts of displacement of the touch-sensing surface at each contact.","Embodiments of the present invention, described herein, include various operations. These operations may be performed by hardware components, software, firmware, or a combination thereof. As used herein, the term \u201ccoupled to\u201d may mean coupled directly or indirectly through one or more intervening components. Any of the signals provided over various buses described herein may be time multiplexed with other signals and provided over one or more common buses. Additionally, the interconnection between circuit components or blocks may be shown as buses or as single signal lines. Each of the buses may alternatively be one or more single signal lines and each of the single signal lines may alternatively be buses.","Certain embodiments may be implemented as a computer program product that may include instructions stored on a computer-readable medium. These instructions may be used to program a general-purpose or special-purpose processor to perform the described operations. A computer-readable medium includes any mechanism for storing or transmitting information in a form (e.g., software, processing application) readable by a machine (e.g., a computer). The computer-readable storage medium may include, but is not limited to, magnetic storage medium (e.g., floppy diskette); optical storage medium (e.g., CD-ROM); magneto-optical storage medium; read-only memory (ROM); random-access memory (RAM); erasable programmable memory (e.g., EPROM and EEPROM); flash memory, or another type of medium suitable for storing electronic instructions.","Additionally, some embodiments may be practiced in distributed computing environments where the computer-readable medium is stored on and\/or executed by more than one computer system. In addition, the information transferred between computer systems may either be pulled or pushed across the transmission medium connecting the computer systems.","Although the operations of the method(s) herein are shown and described in a particular order, the order of the operations of each method may be altered so that certain operations may be performed in an inverse order or so that certain operation may be performed, at least in part, concurrently with other operations. In another embodiment, instructions or sub-operations of distinct operations may be in an intermittent and\/or alternating manner.","In the foregoing specification, the invention has been described with reference to specific exemplary embodiments thereof. It will, however, be evident that various modifications and changes may be made thereto without departing from the broader spirit and scope of the invention as set forth in the appended claims. The specification and drawings are, accordingly, to be regarded in an illustrative sense rather than a restrictive sense."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The present disclosure is illustrated by way of example, and not by way of limitation, in the figures of the accompanying drawings.",{"@attributes":{"id":"p-0007","num":"0006"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0008","num":"0007"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 3A"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 3B"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 4A"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 4B"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 9"}]},"DETDESC":[{},{}]}
