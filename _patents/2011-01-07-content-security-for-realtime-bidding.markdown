---
title: Content security for real-time bidding
abstract: A real-time-bidding process that includes security mechanisms that limits access to various aspects of the bidding process including communications between bidders, the user browser, and the auctioneer, and the content of bids received and utilized by the user browser.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08554683&OS=08554683&RS=08554683
owner: Fox Audience Network, Inc.
number: 08554683
owner_city: Los Angeles
owner_country: US
publication_date: 20110107
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"p":["This patent application is a continuation in part of U.S. patent application Ser. No. 11\/959,385 filed Dec. 18, 2007 now abandoned, which claims priority to U.S. Provisional Application Serial No. 60\/876,026 filed Dec. 19, 2006. This application also claims the benefit of U.S. Provisional Application Serial No. 61\/293,430 filed Jan. 8, 2010. These above-listed patent applications, as well as the information disclosure statement filed on Jul. 2, 2008 in connection with the above-identified '385 patent application, are incorporated herein by this reference.","1. Field of the Invention","This invention relates generally to online advertising, and in particular, to a method, apparatus, and article of manufacture for encrypting\/securing\/data\/content during a real-time advertising auction process.","2. Description of the Related Art","Online advertising has become an integral part of the Internet. Different models exist for advertisers to purchase advertisements displayed to end-users. Further, advertisers are often willing to pay a premium for a targeted advertisement based on a user's profile, demographic, etc. Online auctions that are controlled by an end-user's browser may be utilized to sell a particular advertisement\/impression for a particular user. However, in such an online auction, it is desirable to maintain security of (i.e., limited access to) all of the data exchanged (e.g., user privacy and advertiser data security).","Prior art mechanisms fail to provide a secure environment for such an online auction. These problems may be better understood with a more detailed description of prior art online display advertising and bidding processes.","Online display advertising faces many inefficiencies in supply and demand. On the supply side, large publishers and ad networks sell excess inventory in bulk, yielding an eCPM (effective cost per thousand impressions). As used herein, the term \u201cimpression\u201d refers to a view, ad view, or load of an advertisement. On the demand side, ad networks and exchanges that have gathered unique demographic, behavioral, and interest information on end users are not able to find all the impressions they need to fulfill their budgets. In general, the core of the inefficiency is two-fold\u2014(1) different siloed auctioning systems do not talk to one another on an impression-by-impression basis; and (2) buyers do not have access to their cookies on the end user before taking possession of the impression.","Cookies are small pieces of text stored on a user's computer by a web browser. The information in the cookie is sent from a particular domain to the web browser and each particular cookie is only accessible from the domain that originally sent the information. Consequently, oftentimes, an advertiser has knowledge about particular users (i.e., their preferences, practices, etc.), but when a third-party web-page has code that instructs the browser to request an advertisement, the advertiser does not have access to the end-user's cookies before purchasing the advertisement impression.","A real-time bidding (RTB) mechanism may address the common web based advertising issues by providing the framework for an impression-by-impression first price or a second price auctioning system. Details describing such an RTB mechanism are described in U.S. patent application Ser. No. 11\/959,385 filed on Dec. 18, 2007 which is incorporated by reference herein. RTB allows potential buyers of an impression to look at that individual impression and decide the bid amount using their own systems and data (behavioral, profile, etc.). Bidding is not for a group of impressions but for one specific impression. Further, the bidding occurs as the impression occurs and not in advance of the impression. Accordingly, information useful to bidding on a particular impression is known by the bidder. A browser-side RTB auction takes place inside the end user's browser, soliciting bids from the siloed systems, awarding the win to the highest bidder, and charging that bidder the amount it had bid. Unlike server-to-server or bid application programming interface (API) approaches, in a browser-side RTB mechanism, bidders have access to their own respective cookies on the end user in real time which allows for cross platform frequency cap and budget management, in addition to live behavioral and profile targeting. As a result, browser-side RTB allows buyers (known as bidders) to obtain substantially more impressions of highest value to them, allowing them to deliver larger, more valuable campaigns to their advertisers, while translating all this to higher yields for end publishers.","One problem with the existing RTB mechanism is that of privacy\/security for the both the user and the advertiser. In other words, an advertiser may build an extensive proprietary knowledge base (e.g., behavioral or profile information for a particular user, frequency information such as when and how often different ads are served to a particular user, etc.). Further, the advertiser may develop a proprietary bidding strategy for impressions in an RTB based system. Accordingly, it is desirable to protect data while the data is in the browser. In addition, it is desirable to obfuscate portions of the data as it passes through the browser from all parties (including the browser itself) (i.e., it is desirable to obfuscate communications and bidding details once received). In this regard, an advertiser\/bidder may not want competitors to know\/learn anything about the bid or bid amount.","Further, it is desirable to restrict a phantom website from gathering metrics\/statistics on the bidding process (e.g., by a competitor soliciting bids for selected advertisements). In other words, it is desirable to prevent a browser that is conducting an auction from accessing information regarding the winning bids for an impression or who the winning bidder is for a particular impression. The prior art not only fails to recognize the problems described above but also fails to provide any protection mechanism to solve the problems.","One or more embodiments of the invention overcome the problems of the prior art by establishing a real-time-bidding process that includes security mechanisms that limits access to various aspects of the bidding process including communications between bidders, the user browser, and the auctioneer, and the content of bids received and utilized by the user browser.","The detailed description set forth below in connection with the appended drawings is intended as a description of presently-preferred embodiments of the invention and is not intended to represent the only forms in which the present invention may be constructed and\/or utilized. The description sets forth the functions and the sequence of steps for constructing and operating the invention in connection with the illustrated embodiments. However, it is to be understood that the same or equivalent functions and sequences may be accomplished by different embodiments that are also intended to be encompassed within the spirit and scope of the invention.","Hardware Environment",{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 1","b":["100","102","104","106","102","104","106","104","106","118"]},"A network  such as the Internet connects clients  to server computers . Network  may utilize ethernet, coaxial cable, wireless communications, radio frequency (RF), etc. to connect and provide the communication between clients  and servers . Clients  may execute a client application or web browser  and communicate with server computers  executing web servers . Such a web browser  is typically a program such as MICROSOFT\u2122 INTERNET EXPLORER\u2122 Further, the software executing on clients  may be downloaded from server computer  to client computers  and installed as a plug-in or ACTIVEX\u2122 control of a web browser. For example, an auction\/bidding application may be downloaded from the server  and installed on web browser . In such an application, as described in further detail below, client  is configured to communicate with multiple servers , some of which are advertisers\/bidders bidding on an impression that is to be displayed on web browser .","Accordingly, clients  may utilize ACTIVEX\u2122 components\/component object model (COM) or distributed COM (DCOM) components to provide a user interface on a display of client . The web server  is typically a program such as MICROSOFT'S INTERNET INFORMATION SERVER\u2122.","Web server  may host an Active Server Page (ASP) or Internet Server Application Programming Interface (ISAPI) application , which may be executing scripts. The scripts invoke objects that execute business logic (referred to as business objects). The business objects then manipulate data in database  through a database management system (DBMS) . Alternatively, database  may be part of, or connected directly to client  instead of communicating\/obtaining the information from database  across network . When a developer encapsulates the business functionality into objects, the system may be referred to as a COM system. Accordingly, the scripts executing on web server  (and\/or application ) invoke COM objects that implement the business logic. Further, server  may utilize Microsoft's Transaction Server (MTS) to access required data stored in database  via an interface such as ADO (Active Data Objects), OLE DB (Object Linking and Embedding DataBase), or ODBC (Open DataBase Connectivity).","Generally, these components - all comprise logic and\/or data that is embodied in, or retrievable from device, medium, signal, or carrier, e.g., a data storage device, a data communications device, a remote computer or device coupled to the computer via a network or via another data communications device, etc. Moreover, this logic and\/or data, when read, executed, and\/or interpreted, results in the steps necessary to implement and\/or use the present invention being performed.","Thus, embodiments of the invention may be implemented as a method, apparatus, system, or article of manufacture using standard programming and\/or engineering techniques to produce software, firmware, hardware, or any combination thereof. The term \u201carticle of manufacture\u201d (or alternatively, \u201ccomputer program product\u201d) as used herein is intended to encompass logic and\/or data accessible from any computer-readable device, carrier, or media.","Those skilled in the art will recognize many modifications may be made to this exemplary environment without departing from the scope of the present invention. For example, those skilled in the art will recognize that any combination of the above components, or any number of different components, including different logic, data, different peripherals, and different devices, may be used to implement the present invention, so long as similar functions are performed thereby. For example, rather than utilizing the browser\/web server based implementation of , embodiments of the invention can be implemented using any application that can execute the functionality described herein over an IP (internet protocol) network. In this regard, embodiments of the invention may be utilized to determine advertisements in a game, IPHONE\u2122 application, IPOD\u2122 TOUCH\u2122 application, personal digital assistant (PDA) application, cellular phone device, or any type of application executing over an IP network or other type of network.","User Environment","Embodiments of the invention may be utilized by bidders and sellers using RTB. The number of participants that may participate in the bidding process may be limited by practicality. In this regard, performance may be impacted as more bidders are added due to the need for the browser to issue separate calls to each bidder. Given such limitations, target participants may include companies that introduce exclusive inventory, exclusive data about end users, or exclusive advertiser campaigns, such as:\n\n","However, embodiments of the invention are not limited to the above-identified participants. For example, RTB may be utilized for ad agencies across their clients in a \u201cdemand-side platform\u201d based implementation.",{"@attributes":{"id":"p-0027","num":"0030"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"196pt","align":"left"}}],"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":["Term","Definition"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Auctioneer","The party that initiates the RTB auction by sending the RTB code"]},{"entry":[{},"to the browser. This is usually a publisher, an ad network, or an"]},{"entry":[{},"exchange."]},{"entry":["Bidder","The party that wants to bid on an impression. There will usually"]},{"entry":[{},"be more than one bidder per impression."]},{"entry":["Biding event","A single impression at the auctioneer that is translated to unique"]},{"entry":[{},"bid request calls to each of the chosen bidders for that event,"]},{"entry":[{},"where each of the bidders receives on bid request call each. Also"]},{"entry":[{},"known as an RTB auction."]},{"entry":["First price sealed","One of the most common forms of auctions. Each bidder submits"]},{"entry":["bid auction","a single sealed bid simultaneously with all bidders, so that no"]},{"entry":[{},"bidder knows the bid of any other bidder. The highest bidder"]},{"entry":[{},"pays the price they submitted. RTB is a first price sealed bid"]},{"entry":[{},"auction. This is different from second price auction variations"]},{"entry":[{},"where the winner pays the second highest bid plus an increment"]},{"entry":[{},"(e.g. $0.01 or 5%)."]},{"entry":["JSON","JavaScript Object Notation is a lightweight data-interchange"]},{"entry":[{},"format. Its syntax and spec are found at http:\/www.json.org."]},{"entry":[{},"JSON is humanly readable and interpreted quickly on browsers"]},{"entry":[{},"due to it being already in native JavaScript variable format. The"]},{"entry":[{},"RTB request's response is a JSON object: For example:"]},{"entry":[{},"{\u201cr\u201d:{\u201csb\u201d:36915,\u201cs\u201d:\u201cheyty3rdel\u201d,\u201cad\u201d:\u201chttp:\/\/bid.bidder.com?"]},{"entry":[{},"var2=26463&size=160600&random=633456915\u201d,\u201cmt\u201d:30}}"]},{"entry":["Private key","A symmetric encryption method that uses the same key to encrypt"]},{"entry":["encryption","and decrypt data. It is made up of two parts: an algorithm and a"]},{"entry":[{},"private key. The algorithm is agreed upon by all auctioneers and"]},{"entry":[{},"bidders. However, each pair of auctioneer and bidder shares a"]},{"entry":[{},"unique private key. With mutual agreement, they may change"]},{"entry":[{},"this key at any time."]},{"entry":["Reserve CPM","The CPM price of the creative that will act as the floor for the"]},{"entry":[{},"RTB auction. The auctioneer will only award the bid to a bidder"]},{"entry":[{},"if the bidder's CPM is higher than this reserve price."]},{"entry":["Reserve creative","The winning creative of the first\/internal auction that is either"]},{"entry":[{},"decided upon by the publisher, or by the auctioneer. The"]},{"entry":[{},"auctioneer will then conduct the RTB auction to see if any other"]},{"entry":[{},"bidder can outbid the reserve creative's CPM."]},{"entry":["RTB","Acronym for the Real-Time Bidding system, processes, code,"]},{"entry":[{},"security mechanism and guidelines as disclosed in U.S. patent"]},{"entry":[{},"application Ser. No. 11\/959,385 filed on Dec. 18, 2007."]},{"entry":[{},"RTB refers to both Real-Time Selling and Real-Time Buying."]},{"entry":["Scale","A way to obfuscate actual CPM values from those who check the"]},{"entry":[{},"browser's code after a bidding event or who intercept other"]},{"entry":[{},"events' browser communication. The scale is an integer and is"]},{"entry":[{},"decided upon by the auctioneer. It is shared by all bidders for a"]},{"entry":[{},"single impression, but is different from one impression to the"]},{"entry":[{},"next. For example, if the scaling factor is 24, instead of returning"]},{"entry":[{},"$2.00 CPM, the bidder will return $48.00 CPM."]},{"entry":["Signature","The result of a non-reversible function used to verify that data has"]},{"entry":[{},"not been tampered with. This result could also be called"]},{"entry":[{},"checksum, fingerprint, or hash value."]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}},"br":{}},"The RTB mechanism conceptually works as follows:","1. The auctioneer will have shared, a priori, a different private key with each bidder.","2. The user's browser will make a request for an ad impression from the auctioneer's ad server, using that server's standard ad tag embedded in the web page.","3. The auctioneer will conduct an auction internal to its system, and decide on the best traditional (not including RTB opportunities) creative it has. This creative is called the reserve creative, and it has a reserve CPM set by the auctioneer.","4. The auctioneer will decide who amongst the number of ready bidders will be chosen to bid for this impression. A variety of different mechanisms may be utilized to control the volume of calls to any particular bidder (e.g., to help limit scale issues. For example, impressions can be randomly skipped or a sophisticated selection algorithm may be utilized. An example of one potential volume control implementation includes:\n\n","5. The auctioneer will decide on a scale factor for this impression and send to the browser the RTB JavaScript detailed in Appendix A (which is incorporated by reference herein). This contains a number of elements:","(a) The scaled version of the auctioneer's reserve CPM price. This value is passed unencrypted to the browser and is the auctioneer's estimate of what this impression is worth based on competition available in the form of direct-sold offers (CPM, CPC [cost per click] or CPA [cost per auction\/sale]), and non-RTB ad network partners. It may be noted that a bid may be received in CPC or CPA form that could then be converted into a CPM to include in the auction.","(b) The URL (uniform resource locator) of the ad selected above by the auctioneer. If no bidder wins the auction, this will be the ad displayed to the end user.","(c) For each chosen bidder on this impression, a unique URL that contains the following elements:\n\n","6. The browser then initiates the specific RTB calls to the bidders selected for consideration for this impression, and waits for all responses to be received up to a predefined maximum amount of time.","7. Since the bid request is from the browser to the bidder's ad server, the bidder will be connected to the end user's browser from within the bidder's own domain. This allows the bidder to read all necessary cookies in the same manner as a regular redirected ad impression. Moreover, this allows the bidder to enforce ad eligibility, frequency controls, delivery and geography controls, etc. in the same manner as regular redirected impressions.","8. All bidders respond in the designated JSON format with the following key elements:","(a) The bidder's predicted scaled bid CPM for this impression. This value is unencrypted.","(b) A signature embodying the scaled bid CPM and the timestamp.","(c) The bidder's creative URL to which the impression should be redirected if the bidder wins.","(d) Other optional parameters. For instance, minutes for the auctioneer to wait before sending another bid request for this user to this bidder's URL.","9. Once the browser receives responses from all bidders or the predetermined amount of time expires, the browser's JavaScript code compares the scaled bids received with the scaled reserve CPM, selects the winning ad, and redirects the browser to the appropriate URL.","10. Finally, the user's browser makes a special pixel call back to the auctioneer's ad servers to record the details of the winning ad and update the serving counts accordingly.",{"@attributes":{"id":"p-0046","num":"0055"},"figref":["FIG. 2","FIG. 3","FIG. 2","FIGS. 2 and 3","FIG. 2"],"b":["5","108","104","106","106","108","106","106","106","106","106","106","106","106"]},"The auctioneer B then selects bidders C and decides on a scale (i.e., the scaling factor used to obfuscate the actual CPM values as described above). The auctioneer B returns a RTB JavaScript\u2122 (JS) code to the publisher A with a scaled reserve CPM, a reserve creative Uniform Resource Locator (URL), and for each bidder selected, a URL with (a) an encryption version; (b) an API version; (c) an encrypted scale and timestamp; and (d) optional values (e.g., age, etc.). The RTB code is then transmitted from the publisher A to the user browser . As described above, the encryption information includes the algorithm, key, and string used to encrypt the bidding information that is transmitted amongst the parties.","The code below is the humanly readable format of a minified JavaScript\u2122 code that the auctioneer B will send to the user browser  in accordance with one or more embodiments of the invention:",{"@attributes":{"id":"p-0049","num":"0058"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"< script >"},{"entry":"\/**"},{"entry":"\u2003\u2003An example of an auctioneer's request to a bidder, after"},{"entry":"placeholder expansion:"},{"entry":"http:\/\/bidder1.com\/sz=300\u00d7250\/loc=6239393\/encryption_version=1.1\/rnd"},{"entry":"=78276872\/sft=a8218b8282e92f928d\/pv=2\/dom=http%3A\/\/www.google"},{"entry":".com\/callback=C1RTB.b0Wl2Eh9Pv5Y"},{"entry":"\u2003\u2003An example of a bidder's response with a CPM $2.00 and a scale"},{"entry":"factor of 3:"},{"entry":"\u2003\u2003C1RTB.b0Wl2Eh9Pv5Y={\u201cr\u201d:{\u201csb\u201d:60000,\u201cs\u201d:\u201c6ef801f7621a\u201d,\u201cad"},{"entry":"\u201d:\u201chttp:\/\/bidder1.com\/00004642\/300250\/6239393\/k=NjcwODg3OjI0Njo"},{"entry":"wOjAuMDAwMzEzMjowLjAwMDMxMzI6MC4wMDAzMTMyOjAuM"},{"entry":"DAwMjM2MTU6MTox\u201d},\u201cmt\u201d:0};"},{"entry":"\u2003\u2003An example of no bid:"},{"entry":"\u2003\u2003C1RTB.b0W12Eh9Pv5Y={ };"},{"entry":"**\/"},{"entry":"var C1RTB = {"},{"entry":"\u2003\u2003\/\/ Variables will have dynamically generated values. Final stored"},{"entry":"information may vary"},{"entry":"\u2003\u2003v1ReserveInfo: {\u201cr\u201d:"},{"entry":"{\u201ca\u201d:302230,\u201cc\u201d:249376,\u201csb\u201d:52320,\u201cad\u201d:\u201chttp:\/\/auctioneer.com\/bid\/td\/?"},{"entry":"k=yODEwOTsxNzR8OzE7NDQ7Mzc0MzE2Mjs7MTc0NDs7Ozs=data"},{"entry":"=[DATA]\u201d}},"},{"entry":"\u2003\u2003v4TimeOut:500,"},{"entry":"\u2003\u2003v5InitTime:10,"},{"entry":"\u2003\u2003v6TimeSoFar:10,"},{"entry":"\u2003\u2003v7TimeIncrement:10,"},{"entry":"\u2003\u2003v8Width:300,"},{"entry":"\u2003\u2003v9Height:250,"},{"entry":"\u2003\u2003v12ProtocolVersion:\u201c1\u201d,"},{"entry":"\u2003\u2003v13PubId:19282,"},{"entry":"\u2003\u2003v14PubCatId:1,"},{"entry":"\u2003\u2003v15MaxUrlLength:1024,"},{"entry":"\u2003\u2003time: (new Date( )).getTime( ),"},{"entry":"\u2003\u2003v10BiddersArray: {"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u201cb0Wl2Eh9Pv5Y\u201d:"},{"entry":"\u2003\u2003{\u201cbidurl\u201d:\u201chttp:\/\/bidder1.com\/sz=300\u00d7250\/loc=6239393\/encryption"},{"entry":"_version=[ALGORITHM_VERSION].[KEY_VERSION]\/rnd=[CACHE"},{"entry":"BUSTER]\/sft=[ENCRYPTED_SCALE_TIMESTAMP]\/pv="},{"entry":"[API_VERSION]\/dom=[DOMAIN]\/callback=[CALLBACK]\u201d,"},{"entry":"\u2003\u2003\u201ck\u201d:\u201cNTI2MDI7Mzs2NzQ7MzkzNDI7MDU5MTAuOS44MDI1L"},{"entry":"mZoLnh6Ljg1LjE5MkBAd2hvQEBoZm1tYmV6b3ZAQC0xXzlAQGJ6c2"},{"entry":"xsIUBAeGxuQEBobGZnc2R2aGc7MTIzNDQ2MTc0NTU2OTsxOzI2M"},{"entry":"jE1N3wyMjgxMDk7MTc0fDsxOzQ0OzM3NDMxNjI7Ozs7Ozs=\u201d,"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u201ca\u201d:52602,"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u201cc\u201d:39342,"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u201csft\u201d:\u201ca8218b8282e92f928d\u201d,"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u201cav\u201d:1,"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u201ckv\u201d:1"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003},"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u201cb1Pv2Yt9Ji5U\u201d:"},{"entry":"\u2003\u2003{\u201cbidurl\u201d:\u201chttp:\/\/bidder2.com\/getbid\/Z=300\u00d7250\/s=321686\/encr"},{"entry":"version=[ALGORITHM_VERSION].[KEY_VERSION]\/_salt=[CACHE"},{"entry":"BUSTER]\/pid=[PUBLISHER_ID]\/pubcatid="},{"entry":"[PUBLISHER_CATEGORY_ID]\/r=1\/cookie=[COOKIE]\/flash="},{"entry":"[FLASH]\/avs=[AGE]\/gvs=[GENDER]\/sft="},{"entry":"[ENCRYPTED_SCALE_TIMESTAMP]\/protocolv="},{"entry":"[API_VERSION]\/callback=[CALLBACK]\u201d,"},{"entry":"\u2003\u2003\u201ck\u201d:\u201cNzcyMDM7Mzs2NzQ7NjgxOTQ7MDU5MTAuOS44MDI1L"},{"entry":"mZoLnh6Ljg1LjE5MkBAd2hvQEBoZm1tYmV6b3ZAQC0xXzlAQGJ6c2"},{"entry":"xsIUBAeGxuQEBobGZnc2R2aGc7MTIzNDQ2MTc0NTU2OTsxOzI2Mj"},{"entry":"E1N3wyMjgxMDk7MTc0fDsxOzQ0OzM3NDMxNjI7Ozs7Ozs=\u201d,"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u201ca\u201d:77203,"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u201cc\u201d:68194,"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u201csft\u201d:\u201cba32421b825468d\u201d,"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u201cav\u201d:1,"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u201ckv\u201d:2"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003}"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003},"},{"entry":"\u2003\u2003v11GarbageCan: new Array( ),"},{"entry":"\u2003\u2003\/\/ [DOMAIN] to be populated by the auctioneer, either server side,"},{"entry":"\u2003\u2003\/\/ or at the browser with a JavaScript function. It is URL-encoded"},{"entry":"\u2003\u2003dom: \u201chttp%3A\/\/www.google.com\u201d,"},{"entry":"\u2003\u2003headElement:(document.getElementsByTagName(\u201chead\u201d).length ?"},{"entry":"document.getElementsByTagName(\u201chead\u201d).item(0) :"},{"entry":"document.getElementsByTagName(\u201chtml\u201d).item(0)),"},{"entry":"\u2003\u2003cookieEnabled:function( ) {"},{"entry":"\u2003\u2003\u2002var cookieEnabled=(navigator.cookieEnabled)? 1 : 0;"},{"entry":"\u2003\u2003\u2002if (typeof navigator.cookieEnabled==\u201cundefined\u201d &&"},{"entry":"!cookieEnabled){"},{"entry":"\u2003\u2003\u2003\u2003\u2002document.cookie=\u201ctc\u201d;"},{"entry":"\u2003\u2003\u2003\u2003cookieEnabled=(document.cookie.indexOf(\u201ctc\u201d)!=\u22121)? 1 :"},{"entry":"0;"},{"entry":"\u2003\u2003\u2002}"},{"entry":"\u2003\u2003\u2002return cookieEnabled;"},{"entry":"\u2003\u2003},"},{"entry":"\u2003\u2003flashEnabled: function( ) {"},{"entry":"\u2003\u2003\u2002var flash=new Object( );"},{"entry":"\u2003\u2003\u2002flash.installed=0;"},{"entry":"\u2003\u2003\u2002flash.version=\u20180.0\u2019;"},{"entry":"\u2003\u2003\u2002if (navigator.plugins && navigator.plugins.length) {"},{"entry":"\u2003\u2003\u2002for (x=0; x < navigator.plugins.length; x++) {"},{"entry":"\u2003\u2003\u2003\u2003\u2003if (navigator.plugins[x].name.indexOf(\u2018Shockwave Flash\u2019)"},{"entry":"!= \u22121) {"},{"entry":"flash.version=navigator.plugins[x].description.split(\u2018Shockwave Flash"},{"entry":"\u2019)[1];"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2002flash.installed=1;"},{"entry":"\u2003\u2003\u2003\u2002break;"},{"entry":"\u2003\u2003\u2003\u2003\u2003}"},{"entry":"\u2003\u2003}"},{"entry":"\u2003\u2003\u2002} else if (window.ActiveXObject) {"},{"entry":"\u2003\u2003\u2003\u2002for (x=2; x<10; x++) {"},{"entry":"\u2003\u2003\u2003try {"},{"entry":"\u2003\u2003\u2003\u2003oFlash=eval(\u201cnew"},{"entry":"ActiveXObject(\u2018ShockwaveFlash.ShockwaveFlash.\u201c+x+\u201d\u2019);\u201d);"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2002if (oFlash) {"},{"entry":"\u2003\u2003\u2003\u2003\u2002flash.installed=1;"},{"entry":"\u2003\u2003\u2003\u2003\u2003flash.version=x+\u2018.0\u2019;"},{"entry":"\u2003\u2003\u2003\u2003}"},{"entry":"\u2003\u2003\u2003\u2003\u2002} catch(e) { }"},{"entry":"\u2003\u2003}"},{"entry":"\u2003\u2003\u2002}"},{"entry":"\u2003\u2003\u2002return flash.installed;"},{"entry":"\u2003\u2003},"},{"entry":"\u2003\u2003f1CallServer: function(url) {"},{"entry":"\u2003\u2003\u2003\u2003var script = document.createElement(\u201cscript\u201d);"},{"entry":"\u2003\u2003\u2003\u2003script.setAttribute(\u201ctype\u201d, \u201ctext\/javascript\u201d);"},{"entry":"\u2003\u2003\u2003\u2003script.setAttribute(\u201csrc\u201d, url);"},{"entry":"\u2003\u2003\u2003\u2003this.headElement.appendChild(script);"},{"entry":"\u2003\u2003\u2003\u2003return script;"},{"entry":"\u2003\u2003\u2002},"},{"entry":"\u2003\u2003\u2002f2AllDone: function( ) {"},{"entry":"\u2003\u2003\u2003\u2003var i;"},{"entry":"\u2003\u2003\u2003\u2003for (i in this.v10BiddersArray) {"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003if (this[i] == undefined) return false;"},{"entry":"\u2003\u2003\u2003\u2003}"},{"entry":"\u2003\u2003\u2003\u2003return true;"},{"entry":"\u2003\u2003\u2002},"},{"entry":"\u2003\u2003\u2002\/\/ Go through every bidder, check if they responded, collect the"},{"entry":"responses to report back,"},{"entry":"\u2003\u2003\u2002\/\/ compute the winner, display the winner and reports back"},{"entry":"\u2003\u2003\u2002\/\/ Actual implementation may vary by auctioneer, especially the"},{"entry":"part related to"},{"entry":"\u2003\u2003\u2002\/\/ reporting back of the auction results"},{"entry":"\u2003\u2003\u2002f3PickWinner: function( ) {"},{"entry":"\u2003\u2003\u2003\u2003var i;"},{"entry":"\u2003\u2003\u2003\u2003var winnerid;"},{"entry":"\u2003\u2003\u2003\u2003var winnerad;"},{"entry":"\u2003\u2003\u2003\u2003var winnerk;"},{"entry":"\u2003\u2003\u2003\u2003var data=\u201c\u201d;"},{"entry":"\u2003\u2003\u2003\u2003var ja=this.v10BiddersArray;"},{"entry":"\u2003\u2003\u2003\u2003var rs=this.v1ReserveInfo;"},{"entry":"\u2003\u2003\u2003\u2003var"},{"entry":"jt=\u201chttp:\/\/auctioneer.com\/bid\/jt\/?k=[WINNERK]data=[DATA]\u201d;"},{"entry":"\u2003\u2003\u2003\u2003var winnercpm=rs.r.sb;"},{"entry":"\u2003\u2003\u2003\u2003var maxallowedcpm=200000; \/\/ Should be the result of"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\/\/ 10000 * scaling factor * max ecpm"},{"entry":"allowed"},{"entry":"\u2003\u2003\u2003\u2003\/\/ Go through every eligible bidder, check if they returned,"},{"entry":"\u2003\u2003\u2003\u2003\/\/ determine winner and collect data"},{"entry":"\u2003\u2003\u2003\u2003for ( i in ja) {"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003if (this[i] == undefined || this[i].r == undefined"},{"entry":"|| this[i].r.sb == undefined || this[i].r.ad == undefined) { \/\/ Bidder"},{"entry":"timed out or sent a malformed response"},{"entry":"\u2003\u2003data+=ja[i].a.toString(16)+\u201c|\u201d+ja[i].c.toString(16)+\u201c|\u22121|\u22121|\u2212"},{"entry":"1|\u22121|\u22121.\u201d;"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003continue;"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003}"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\/\/ Limit bids to within 0 and maxallowedcpm"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003if (this[i].r.sb < 0) this[i].r.sb=0;"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003else if (this[i].r.sb > maxallowedcpm)"},{"entry":"this[i].r.sb=maxallowedcpm;"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003if (winnercpm < this[i].r.sb) {"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003winnercpm=this[i].r.sb;"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003winnerid=i;"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003}"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\/\/ Collect bidder information to report back to"},{"entry":"auctioneer"},{"entry":"\u2003\u2003data+=ja[i].a.toString(16)+\u201c|\u201d+ja[i].c.toString(16)+\u201c|\u201d+(parse"},{"entry":"Int(this[i].r.sb)).toString(16)+\u201c|\u201d+(this[i].mt==undefined ? 0 :"},{"entry":"this[i].mt).toString(16)+\u201c|\u201d+this[i].r.s+\u201c|\u201d+ja[i].t+\u201c|\u201d+ja[i].sf+\u201c.\u201d;"},{"entry":"\u2003\u2003\u2003\u2003}"},{"entry":"\u2003\u2003\u2003\u2003if (winnerid != undefined) { \/\/ One of the bidders has won"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003winnerad=this[winnerid].r.ad;"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003winnerk=ja[winnerid].k;"},{"entry":"\u2003\u2003\u2003\u2003} else { \/\/ The reserve has won"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003winnerad=rs.r.ad.replace(\u201c[DATA]\u201d,data);"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003winnerk=\u201c\u201d;"},{"entry":"\u2003\u2003\u2003\u2003}"},{"entry":"\u2003\u2003\u2003\u2003\/\/ Prepare URL to report back the winner to the auctioneer"},{"entry":"\u2003\u2003jt=jt.replace(\u201c[WINNERK]\u201d,winnerk).replace(\u201c[DATA]\u201d,data);"},{"entry":"\u2003\u2003\u2003\u2003\/\/ Garbage collect script tags"},{"entry":"\u2003\u2003\u2003\u2003this.f8GarbageCollect( );"},{"entry":"\u2003\u2003\u2003\u2003\/\/ Display the winner ad (either reserve or bidder ad)"},{"entry":"\u2003\u2003\u2003\u2003this.f4FillIframe(winnerad);"},{"entry":"\u2003\u2003\u2003\u2003\/\/ Track DATA only when winner is a bidder"},{"entry":"\u2003\u2003\u2003\u2003if (winnerk.length > 0) this.f1CallServer(jt);"},{"entry":"\u2003\u2003},"},{"entry":"\u2003\u2003f4FillIframe: function(url) {"},{"entry":"\u2003\u2003\u2003\u2003if (document.getElementById)"},{"entry":"document.getElementById(\u201cc1IframeId\u201d).contentWindow.location.-"},{"entry":"replace(url); else window.frames[\u201cc1IframeId\u201d].location=url;"},{"entry":"\u2003\u2003},"},{"entry":"\u2003\u2003f5Poll: function( ) {"},{"entry":"\u2003\u2003\u2003\u2003if (this.v4TimeOut <= this.v6TimeSoFar ||"},{"entry":"this.f2AllDone( )) {"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003this.f3PickWinner( );"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003return;"},{"entry":"\u2003\u2003\u2003\u2003}"},{"entry":"\u2003\u2003\u2003\u2003this.v6TimeSoFar += this.v7TimeIncrement;"},{"entry":"\u2003\u2003window.setTimeout(\u201cC1RTB.f5Poll( )\u201d,this.v7TimeIncrement);"},{"entry":"\u2003\u2003},"},{"entry":"\u2003\u2003\/\/ Call bidders by URL, dynamically replacing placeholders with"},{"entry":"appropriate variables"},{"entry":"\u2003\u2003f6CallBidders: function( ) {"},{"entry":"\u2003\u2003\u2003\u2003var i;"},{"entry":"\u2003\u2003\u2003\u2003var c=0;"},{"entry":"\u2003\u2003\u2003\u2003var cookieE=this.cookieEnabled( );"},{"entry":"\u2003\u2003\u2003\u2003var flashE=this.flashEnabled( );"},{"entry":"\u2003\u2003\u2003\u2003\/\/ Age [AGE] and gender [GENDER] below, are"},{"entry":"dynamically inserted at server side"},{"entry":"\u2003\u2003\u2003\u2003for (i in this.v10BiddersArray) {"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003var url=this.v10BiddersArray[i].bidurl."},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003replace(\u201c[CALLBACK]\u201d,\u201cC1RTB.\u201d+i)."},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003replace(\u201c[CACHEBUSTER]\u201d,this.time)."},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003replace(\u201c[COOKIE]\u201d,cookieE)."},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003replace(\u201c[FLASH]\u201d,flashE)."},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003replace(\u201c[AGE]\u201d,\u201c50\u201d)."},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003replace(\u201c[GENDER]\u201d,\u201c0\u201d)."},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003replace(\u201c[PUBLISHER_ID]\u201d,this.v13PubId)."},{"entry":"\u2003\u2003replace(\u201c[PUBLISHER_CATEGORY_ID]\u201d,this. v14PubCatId)."},{"entry":"\u2003\u2003replace(\u201c[ALGORITHM_VERSION]\u201d,this.v10BiddersArray[i].av)."},{"entry":"\u2003\u2003replace(\u201c[KEY_VERSION]\u201d,this.v10BiddersArray[i].kv)."},{"entry":"\u2003\u2003replace(\u201c[API_VERSION]\u201d,this.v12ProtocolVersion)."},{"entry":"\u2003\u2003replace(\u201c[ENCRYPTED_SCALE_TIMESTAMP]\u201d,this.v10Bidders"},{"entry":"Array[i].sft);"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2002var encodedDom = encodeURI(this.dom);"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2002var maxlen = this.v15MaxUrlLength \u2212 (url.length\u2212"},{"entry":"\u201c[DOMAIN]\u201d.length);"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2002url = url.replace(\u201c[DOMAIN]\u201d,"},{"entry":"encodedDom.substr(0, maxlen));"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2002var script=this.f1CallServer(url);"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2002this.v11GarbageCan[c++]=script; \/\/ To be"},{"entry":"garbage-collected later"},{"entry":"\u2003\u2003\u2003\u2003}"},{"entry":"\u2003\u2003},"},{"entry":"\u2003\u2003\/\/ Actual iframe ID and name are dynamically generated and"},{"entry":"randomized"},{"entry":"\u2003\u2003f7CreateIframe:function( ) {"},{"entry":"\u2003\u2003\u2003\u2003document.write(\u201c < iframe name=\u2018c1IfameId\u2019"},{"entry":"id=\u2018c1IframeId\u2019 width=\u2018\u201c+this.v8Width+\u201d\u2019"},{"entry":"height=\u2018\u201c+this.v9Height+\u201d\u2019 frameborder=\u20180\u2019 scrolling=\u2018no\u2019"},{"entry":"marginwidth=\u20180\u2019 marginheight=\u20180\u2019 topmargin=\u20180\u2019 leftmargin=\u20180\u2019"},{"entry":"allowtransparency=\u2018true\u2019 > <\/iframe>\u201d);"},{"entry":"\u2003\u2003},"},{"entry":"\u2003\u2003f8GarbageCollect: function( ) {"},{"entry":"\u2003\u2003\u2003\u2003var i;"},{"entry":"\u2003\u2003\u2003\u2003for (i in this.v11GarbageCan) {"},{"entry":"\u2003\u2003this.headElement.removeChild(this.v11GarbageCan[i]);"},{"entry":"\u2003\u2003\u2003\u2003}"},{"entry":"\u2003\u2003}"},{"entry":"}"},{"entry":"C1RTB.f7CreateIframe( );"},{"entry":"C1RTB.f6CallBidders( );"},{"entry":"window.setTimeout(\u201cC1RTB.f5Poll( )\u201d,C1RTB.v5InitTime);"},{"entry":"<\/script>"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"Once the end user browser  receives the RTB code from publisher A, the browser  sends bid requests to each bidder  and starts a timer. The bidders C decrypt the scale and timestamp and verify the recency of the bid request. Bidders C hold an internal auction (or perform their own internal analysis) and determine the bid that will be submitted. A JSON\u2122 object is returned (to the end user browser  via the auctioneer B) with either a no bid\/empty response or (1) a scaled bid CPM; (2) a signature with the scaled bid CPM and a timestamp); (3) a bidder creative URL; and (4) optional values (e.g., a minimum time). As described above, the scaled bid CPM (1) may not be encrypted. Further, the signature that embodies the scaled bid CPM and timestamp may be utilized to confirm the identity of the bidder C. The minimum time provides the ability for the bidder C to specify the minutes for the auctioneer B to wait before sending another bid request for this user to a particular bidder's C URL.","The end user browser  picks the winning bid when all bids have arrived or when the auction times out. For each bidder, the browser  creates a package that includes: (1) the bidder ID; (2) the scaled bid CPM; (3) an encrypted string that contains the scale and the current timestamp; and (4) a signature embodying the scaled bid CPM and a timestamp.","The browser  makes a determination regarding who won the bid (e.g., whether a bidder C or the reserve amount). If no bid has met the reserve amount established, the auctioneer B records the reserve as the winner, records all bidder C packages and sends an ad to the end user browser  via the bidder C. Alternatively, if the bidder C wins the ad, the auctioneer B records all bidder packages, verifies the signature using the scaled bid CPM and timestamp, decrypts the encrypted string that has the scale and current timestamp, and verifies the recency of the bid. In addition, the auctioneer B records the bidder C as the winner with the descaled CPM. The bidder C then transmits the advertisement to the browser  where the winning ad is displayed.","Request Format","The auctioneer B works with each of the bidder C and determine details regarding a GET HTTP (hyper text transfer protocol) request for the URL (the bidding URL, request call, bid call, etc.) that dictates how the auctioneer will request bids from a particular bidder.","The bidding URL contains:\n\n","Table A illustrates mandatory placeholders that may be utilized in accordance with a first request format.",{"@attributes":{"id":"p-0056","num":"0069"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"thead":{"row":[{"entry":"TABLE A"},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}},{"entry":["Placeholder","Type","Description"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["[API_VERSION]","Integer,","This value is 2, and is determined by a"]},{"entry":[{},"unsigned 8","specification and provided by the auctioneer 106B"]},{"entry":[{},"bids","in runtime. It represents the version of the spec"]},{"entry":[{},{},"based on which the auctioneer 106B is"]},{"entry":[{},{},"communicating with the bidder 106C. The API"]},{"entry":[{},{},"covers the auctioneer code that requests a bid from"]},{"entry":[{},{},"the bidder 106C, the bidder code that responds"]},{"entry":[{},{},"with a bid, and the auctioneer code (in the browser"]},{"entry":[{},{},"108) that receives and processes the bid. Both the"]},{"entry":[{},{},"auctioneer 106B and the bidder 106C may be"]},{"entry":[{},{},"configured to handle two simultaneous versions of"]},{"entry":[{},{},"the API to enable them to transition from one API"]},{"entry":[{},{},"version to the next without service interruption. If"]},{"entry":[{},{},"[API_VERSION] is lacking from the bid request,"]},{"entry":[{},{},"then it means that the API version is 1, which has a"]},{"entry":[{},{},"scale factor of 1, and no encryption algorithm and"]},{"entry":[{},{},"no key."]},{"entry":["[CALLBACK]","String","This 10-character value is generated by the"]},{"entry":[{},{},"auctioneer 106B, which the bidder 106C will use in"]},{"entry":[{},{},"its response. As the value of this string will be"]},{"entry":[{},{},"used as a JavaScript\u2009\u2122 variable name within a"]},{"entry":[{},{},"bidding event, this value will be different for each"]},{"entry":[{},{},"bid request, and different for each bidder 106C"]},{"entry":[{},{},"within a single bidding event. Permissible"]},{"entry":[{},{},"characters are 0-9, a-z, and A-Z."]},{"entry":["[CACHEBUSTER]","Integer,","This 10-digit random number generated by the"]},{"entry":[{},"padded","auctioneer 106B is used for browser 108 cache-"]},{"entry":[{},"unsigned","busting. This number is different for each bid"]},{"entry":[{},"32 bits","request."]},{"entry":["[ALGORITHM","Integer,","The ID of the algorithm that the auctioneer 106B"]},{"entry":["VERSION]","unsigned","uses to communicate with the bidder 106C. It is the"]},{"entry":[{},"8 bits","same value for all bidders 106C across all bidding"]},{"entry":[{},{},"events across all Auctioneers 106B. The details of"]},{"entry":[{},{},"the algorithm behind a new version ID are"]},{"entry":[{},{},"determined and agreed upon offline, and"]},{"entry":[{},{},"implemented by all auctioneers 106B and bidders"]},{"entry":[{},{},"106C before being put into production. As changes"]},{"entry":[{},{},"to the algorithm are introduced, auctioneers 106B"]},{"entry":[{},{},"and bidders 106C need to be able to handle two"]},{"entry":[{},{},"simultaneous versions of the algorithm in runtime"]},{"entry":[{},{},"to enable them to transition from one algorithm"]},{"entry":[{},{},"version to the next without service interruption."]},{"entry":["[KEY_VERSION]","Integer,","The ID of the private key that the auctioneer 106B"]},{"entry":[{},"unsigned","and bidder 106C use between them for all"]},{"entry":[{},"8 bits","communications Auctioneers' 106B and bidders'"]},{"entry":[{},{},"106C systems need to be able to work with two"]},{"entry":[{},{},"simultaneous keys at any point in time to enable"]},{"entry":[{},{},"them to transition from one key to the next without"]},{"entry":[{},{},"service interruption."]},{"entry":["[ENCRYPTED","String","The value is the encrypted version of the string that"]},{"entry":["SCALE_TIME",{},"is the concatenation of the scale factor, a pipe, and"]},{"entry":["STAMP]",{},"the current timestamp. The encryption mechanism"]},{"entry":[{},{},"is based on the specification version's algorithm"]},{"entry":[{},{},"and the private key defined a priori between the"]},{"entry":[{},{},"auctioneer 106B and the bidder 106C."]},{"entry":[{},{},"The unencrypted scale is generated and provided by"]},{"entry":[{},{},"the auctioneer 106B and is a random 3-digit"]},{"entry":[{},{},"integer. It is the same for all bidders 106C in a"]},{"entry":[{},{},"bidding event, but is different across bidding"]},{"entry":[{},{},"events."]},{"entry":[{},{},"The unencrypted time stamp is generated and"]},{"entry":[{},{},"provided by the auctioneer 106B and is the time"]},{"entry":[{},{},"expressed in seconds since Jan. 1, 1970 UTC."]},{"entry":[{},{},"It is the same for all bidders 106C in a bidding"]},{"entry":[{},{},"event, but is different across bidding events."]},{"entry":[{},{},"The bidder 106C will decrypt the value of the"]},{"entry":[{},{},"encrypted scale and timestamp combination, then"]},{"entry":[{},{},"use the timestamp to compare against the timestamp"]},{"entry":[{},{},"in its system. If the two timestamps are within"]},{"entry":[{},{},"some time period, then the bidder 106C will"]},{"entry":[{},{},"respond with a JSON object that would contain a"]},{"entry":[{},{},"scaled bid, otherwise it will respond with a no-bid"]},{"entry":[{},{},"JSON response, and record a \u2018Timestamps too far"]},{"entry":[{},{},"out\u2019 error condition."]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}}}},"Table B illustrates optional placeholders used in accordance with a first request format.",{"@attributes":{"id":"p-0058","num":"0071"},"tables":{"@attributes":{"id":"TABLE-US-00004","num":"00004"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"thead":{"row":[{"entry":"TABLE A"},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}},{"entry":["Placeholder","Type","Description"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["[AGE]","Integer,","The 3-digit value represents the age of the end user"]},{"entry":[{},"unsigned","as determined by the auctioneer 106B, or Null of the"]},{"entry":[{},"8 bits","age is unknown to the auctioneer 106B. E.g. 25"]},{"entry":[{},{},"means 25-year old."]},{"entry":["[GENDER]","Integer,","The value identifies the gender of the end user as"]},{"entry":[{},"unsigned","determined by the auctioneer 106B. Value is 0 for"]},{"entry":[{},"8 bits","male, 1 for female, and null for those users whose"]},{"entry":[{},{},"gender the auctioneer 106B does not know."]},{"entry":["[PUBLISHER","Integer,","The value identifies the ID of the publisher 106A"]},{"entry":["ID]","unsigned","from where this impression is emanating. This"]},{"entry":[{},"32 bits","value can be used for learning\/optimization at the"]},{"entry":[{},{},"bidder 106C or for targeting\/blocking."]},{"entry":["[PUBLISHER","Integer,","The value identifies the ID of the category of the"]},{"entry":["CATEGORY_ID]","unsigned","publisher 106A from where this impression is"]},{"entry":[{},"32 bits","emanating. This value can be used for"]},{"entry":[{},{},"learning\/optimization at the bidder 106C or for"]},{"entry":[{},{},"targeting\/blocking."]},{"entry":["[COOKIE]","Boolean","The single-digit value allows the auctioneer 106B to"]},{"entry":[{},{},"indicate to the bidder 106C that the end user"]},{"entry":[{},{},"browser 108 is blocking 3rd party cookies. Value is"]},{"entry":[{},{},"0 if 3rd party cookies are blocked, and 1 if they are"]},{"entry":[{},{},"allowed."]},{"entry":["[FLASH]","Boolean","The single-digit value allows the auctioneer 106B to"]},{"entry":[{},{},"indicate to the bidder 106C whether the end user"]},{"entry":[{},{},"browser 108 supports Flash. Value is 0 if Flash is"]},{"entry":[{},{},"not supported, and 1 if it is."]},{"entry":["[DOMAIN]","String","The referring URL truncated by the auctioneer 106B"]},{"entry":[{},{},"JavaScript\u2009\u2122 code to as many characters as can be"]},{"entry":[{},{},"included such that the total length of the request"]},{"entry":[{},{},"URL does not exceed 1,024 characters. The"]},{"entry":[{},{},"referring URL is where the impression is emanating"]},{"entry":[{},{},"from. This value can be used for learning\/"]},{"entry":[{},{},"optimization at the bidder 106C or for targeting\/"]},{"entry":[{},{},"blocking. This is a mandatory value for the"]},{"entry":[{},{},"auctioneer 106B to pass if the bidder 106C asks to"]},{"entry":[{},{},"receive it. The value passed should be URL-"]},{"entry":[{},{},"encoded: E.g. \u2018http%3A\/\/us.mg2.mail.yahoo.com\/"]},{"entry":[{},{},"dc\/launch%3F.gx%3D1%26.rand\u2019."]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}}}},"The final URLs with placeholders may appear as:",{"@attributes":{"id":"p-0060","num":"0073"},"tables":{"@attributes":{"id":"TABLE-US-00005","num":"00005"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"266pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"\u2003\u2003http:\/\/bid.bidder.com\/getbid?s=1234&z=728x90&enc=[ALGORITHM_VERSION"},{"entry":"\u2003\u2003].[KEY_VERSION] &api=[API_VERSION]&cb=[CALLBACK] &cache"},{"entry":"\u2003\u2003=[CACHEBUSTER]&e_scale_time=[ENCRYPTED_SCALE_TIMESTAMP"},{"entry":"\u2003\u2003]&age=[AGE]&gender=[GENDER]&pub=[PUBLISHER_ID]&pcat=[PUBLISHER"},{"entry":"\u2003\u2003_CATEGORY_ID]&c=[COOKIE]&f=[FLASH]&d=[DOMAIN]"},{"entry":"or:"},{"entry":"\u2003\u2003http:\/\/bid.bidder.com\/getbid\/1234\/728x90\/=[ALGORITHM_VERSION]\/[KEY"},{"entry":"\u2003\u2003_VERSION]\/[CACHEBUSTER]\/[COOKIE][FLASH]\/[CALLBACK]\/[ENCRYPTED"},{"entry":"\u2003\u2003_SCALE_TIMESTAMP]\/[PUBLISHER_CATEGORY_ID].[PUBLISHER"},{"entry":"\u2003\u2003_ID]\/[API_VERSION]\/[DOMAIN]"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"At runtime, the auctioneer B may expand the placeholders with their appropriate values. For example, if the placeholders had these values:\n\n","Then, the fully expanded and populated calls corresponding to the example bidding URLs above would respectively be:",{"@attributes":{"id":"p-0063","num":"0089"},"tables":{"@attributes":{"id":"TABLE-US-00006","num":"00006"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"\u2003\u2003http:\/\/bid.bidder.com\/getbid?s=1234&z=728x90&enc=2.3&api=2&cb=Xh"},{"entry":"\u2003\u2003Ymshu182&cache=1828282828&enc=2.3&e_scale_time=d723hjf38rj2f&age"},{"entry":"\u2003\u2003=28&gender=1"},{"entry":"\u2003\u2003&pub=619&pcat=23&c=1&f=0&d=http%3A\/\/us.mg2.mail.yahoo.com\/dc\/launch"},{"entry":"\u2003\u2003%3F.gx%3D1%26.rand"},{"entry":"or:"},{"entry":"\u2003\u2003http:\/\/bid.bidder.com\/getbid?s=1234&z=728x90\/2\/3\/1828282828\/10\/XhYms"},{"entry":"\u2003\u2003hu182\/d723hjf38rj2f\/23.619\/2\/http%3A\/\/us.mg2.mail.yahoo.com\/dc\/launch%"},{"entry":"\u2003\u20033F.gx%3D1%26.rand"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}},"br":{}},"Once a request has been issued per the above, the bidder C responds. The description herein illustrates an example response format. The bidder C may  respond with a JSON\u2122 object with mime type of text\/html. The names of this object's individual data elements are defined for a specific API version across all auctioneers B and bidders C. Neither the auctioneer B, nor the bidder C can change the naming convention of the response JSON\u2122 object since each JavaScript\u2122 codebase associated with an API version expects a specific set of names in JSON\u2122 for the JavaScript\u2122 to function properly.","The bidder C can send a regular bid, a no-bid, or an error response.","The JSON\u2122 object for a regular bid may contain a number of mandatory elements:","(a) r: A fixed string name whose value is the remaining data elements of the JSON record;","(b) sb: A fixed string name whose value, [SCALED_BID_CPM], is an integer containing the scaled bid in cost per 10,000,000 impressions. For example, for a bid of $0.738279 eCPM, the bid value should be the integer 7383, and with a scale factor of 5 for this impression, the value of sb would be 36915=(scale factor)*trunc(10,000*the real CPM). The reason a cost per 10,000,000 is utilized is to be able to support CPM values lower than $1.00 CPM in an integer format;","s: A fixed string name whose value, [SIGNATURE], is the output of the hash function that has as input the concatenation, using a \u2018|\u2019 (pipe) delimiter, of the text representation of the sb value and the text representation of the decrypted value of the timestamp found in [ENCRYPTED_SCALE_TIMESTAMP] placeholder passed by the auctioneer B to the bidder C on the bid request. If this bidder C wins, this signature makes its way to the auctioneer B who compares it to the hash function that the auctioneer B generates out of the sb and the value of timestamp found in the [ENCRYPTED_SCALE_TIMESTAMP] that's being passed along since the bidding event started. If the two signatures match, then the auctioneer B tags this response as valid, otherwise it records it in the \u2018Signatures not matching\u2019 error condition log;","ad: A fixed string name whose value, [AD], is the URL of the ad to be displayed if the bidder C wins this bidding event.","The JSON\u2122 object could contain an optional element as well:","(e) mt: A fixed string name whose value, [MINIMUM_TIME], is the least amount of time the bidder C wants the auctioneer B not to call the bidder C again for this user for this bidding URL. The amount is in minutes (e.g., 30 means 30 minutes). This mechanism allows the bidder C control over the users it does not want to see. If this value is sent, the auctioneer B needs to enforce it.","The bidder's C JSON\u2122 response for a regular bid may be:",{"@attributes":{"id":"p-0074","num":"0100"},"tables":{"@attributes":{"id":"TABLE-US-00007","num":"00007"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"[CALLBACK]={\u201cr\u201d:{\u201csb\u201d:[SCALED_BID_CPM],"]},{"entry":[{},"\u201ds\u201d:\u201d[SIGNATURE]\u201d,\u201dad\u201d:\u201d[AD]\u201d], \u201cmt\u201d:[MINIMUM_TIME]};"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"In case the bidder C does not want to bid, the response will be:\n\n[CALLBACK]={\u201cmt\u201d:[MINIMUM_TIME]};\n","And in case of errors, the bidder C will send a JSON\u2122 response indicating the error condition:",{"@attributes":{"id":"p-0077","num":"0103"},"tables":{"@attributes":{"id":"TABLE-US-00008","num":"00008"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"[CALLBACK]={\u201ce\u201d:{\u201cvalue\u201d:[VALUE],\u201ddesc\u201d:\u201d[DESCRIPTION]\u201d},"},{"entry":"\u201dmt\u201d:\u201c[MINIMUM_TIME]};"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"At runtime, the bidder C will substitute the placeholders with their appropriate values. For example, if the placeholders had these values:\n\n[SCALED_BID_CPM]=36915\n\n[SIGNATURE]=heyty3rde1\n\n[AD]=http:\/\/bid.bidder.com?var2=26463&size=160600&random=633456915\n\n[MINIMUM_TIME]=30\n\nand if the [CALLBACK] string from the bid request was:\n\n[CALLBACK]=XhYmshu182\n\nThen, the example JSON\u2122 response for a regular bid will be:\n\nWhere:\n",{"@attributes":{"id":"p-0079","num":"0105"},"tables":{"@attributes":{"id":"TABLE-US-00009","num":"00009"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"XhYmshu182={\u201cr\u201d:{\u201csb\u201d:36915,\u201ds\u201d:\u201dheyty3rde1\u201d,\u201dad\u201d:\u201d"},{"entry":"http:\/\/bid.bidder.com ?var2= 26463&size=160600&random=633456915\u201d},"},{"entry":"\u201cmt\u201d:30};"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}},"ul":{"@attributes":{"id":"ul0012","list-style":"none"},"li":{"@attributes":{"id":"ul0012-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0013","list-style":"none"},"li":["XhYmsh182 is the value generated by the auctioneer B for the [CALLBACK] placeholder and already passed on to the bidder C in the bid call. In all cases, the JSON\u2122 object should be set to this [CALLBACK] placeholder value passed to the bidder C above.","{\u201cr\u201d:{\u201csb\u201d:36915, \u201cs\u201d:\u201cheyty3rde1\u201d,\u201chttp:\/\/bid.bidder.com?var2=26463&size=160600&random=633456915\u201d},\u201cmt\u201d:30}: is the actual regular bid JSON\u2122 object."]}}}},"The JSON\u2122 response for a no-bid may be:\n\nXhYmshu182={\u201cmt\u201d:30};\n","The JSON response in case the bidder C is unable to decrypt the auctioneer's B encrypted (scale, timestamp) may be:\n\nXhYmshu182={\u201ce\u201d: {\u201cvalue\u201d: \u201c5\u201d: \u201cdesc\u201d: \u201cDecryption error\u201d} \u201cmt\u201d:30};\n\nwhere:\n\n","Table C illustrates the list of possible error conditions, values, and descriptions:",{"@attributes":{"id":"p-0083","num":"0113"},"tables":{"@attributes":{"id":"TABLE-US-00010","num":"00010"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"84pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"105pt","align":"left"}}],"thead":{"row":[{"entry":"TABLE C"},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}},{"entry":["Value","Code","Description"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["1.","GENERAL_ERROR","Internal bidder 106C error"]},{"entry":["2.","INVALID_API","API is invalid"]},{"entry":["3.","MISSING_ENC","Enc (encryption v.n) parameter"]},{"entry":[{},{},"is missing"]},{"entry":["4.","MISSING_SCALE_TIME","Scaletime parameter is missing"]},{"entry":["5.","EXPIRED_TIMESTAMP","Timestamp expired"]},{"entry":["6.","DECRYPTION_ERROR","Decryption error"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}}}},"The bidder C should not change or use the http return code to indicate any bidding response condition.","For completeness, once the auction closes and the auctioneer B is notified, the latter will decrypt the value of the [ENCRYPTED_SCALE_TIMESTAMP] that it generated at the beginning of the bidding event, parse out the unencrypted timestamp and use it to compare against the current timestamp in its system. If the two timestamps are within some time period, then the auctioneer B will consider this a normal conclusion of auction, otherwise it will record a \u2018Timestamps too far out\u2019 error condition.","Trafficking Setup","At the auctioneer B system, the auctioneer B may choose to restrict bids to specific ad impressions based on various criteria and algorithms of its own choosing, which may be the same as those used in choosing when to server traditional non-RTB ads. For example, RTB campaigns may be set up the same way network sell campaign (tags) are. A campaign can be targeted to the full extent of the auctioneer's B ad server's capabilities, which could include (but may not be limited to):\n\n","However, actual trafficking is negotiated between the auctioneer's B sales team and the bidder's C media buying group. The standard trafficking is Run of Site (ROS)\/Run of Network (RON) with no further information passed from auctioneer B to bidder C other than the mandatory request placeholders.","Security Measures","A number of measures are included to ensure secure communications and 25 minimization of fraudulent activity:","(1) To avoid manipulation of the auction script, all function names, variable names, class names and constants are dynamically generated random strings, for each bidding event.","(2) To avoid malicious spider requests, and using the previously exchanged private key, the auctioneer B passes an encrypted value of the scale and the timestamp on the request call to the bidder C. The bidder C decrypts this value to recover the original timestamp, and verifies the authenticity of the call by checking that this passed timestamp is within an acceptable amount of time from the bidder's C own current timestamp.","(3) To hide returned bid values from human eyes and from tools like browser toolbars, browser add-ons, etc. the bidder C returns the bid CPM as a scaled value. The scale used is a random number generated for each bidding event and passed by the auctioneer B to the bidder C using the encryption key known only to the auctioneer B and this bidder C. Only this bidder C knows how to decrypt the scale, and use it to scale up its bid CPM.","(4) To avoid tampering of the winner bid, the bidder C returns, together with the scaled CPM, a signature which is a hash function embodying the scaled CPM and the value of the original timestamp (the auctioneer's). The auctioneer B generates the same signature out of the same base parameters of scaled CPM and the original timestamp. The auctioneer B verifies the validity of the bidder C. Further, by checking the decrypted timestamp which is passed along in this bidding event to the current timestamp at the auctioneer B system, the auctioneer B is also able to verify the recency of the bid.","Guidelines","Although the above description enables the basic operation of the RTB mechanism, a number of functions may be built around the RTB system in order for both auctioneer B and bidder C to control its process. Table D describes the most important of these functions and is provided as guidance to auctioneers B or bidders C:",{"@attributes":{"id":"p-0094","num":"0133"},"tables":{"@attributes":{"id":"TABLE-US-00011","num":"00011"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"21pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"238pt","align":"left"}}],"thead":{"row":[{"entry":"TABLE D"},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":["#","Guideline Description"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"21pt","align":"char","char":"."}},{"@attributes":{"colname":"2","colwidth":"238pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["1.","The auctioneer 106B should build a method to throttle each bidder's 106C"]},{"entry":[{},"requests using a daily, an hourly, a per-minute, or even a per-second cap in a"]},{"entry":[{},"manner that avoids traffic bursts so as not to overload the bidder's 106C"]},{"entry":[{},"system. Understandably, a uniform distribution might not be possible as most"]},{"entry":[{},"publishers 106A (and even exchanges that aggregate traffic from multiple"]},{"entry":[{},"sites) have unique traffic peaks and troughs over time, and may choose to send"]},{"entry":[{},"more or fewer requests during different periods. However, such a throttling"]},{"entry":[{},"mechanism would limit the maximum requests sent during a specific period of"]},{"entry":[{},"time."]},{"entry":["2.","The auctioneer 106B may cap the maximum number of bidders 106C on a"]},{"entry":[{},"single bidding event. At issue is that each browser 108 could implement the"]},{"entry":[{},"outbound bid request calls differently. Some browsers 108 might parallelize,"]},{"entry":[{},"which is ideal. Yet other browsers 108 might serialize creating potential"]},{"entry":[{},"delays in response. This slowness, which could have negative end user"]},{"entry":[{},"experience implications, potentially created by the auctioneer 106B calling"]},{"entry":[{},"many bidders 106C needs to be balanced against the auctioneer's 106B desire"]},{"entry":[{},"for a higher yield. The method of selecting bidders 106C is up to the"]},{"entry":[{},"auctioneer 106B, but the latter might consider relative revenue per bid request"]},{"entry":[{},"as a proxy for the opportunity cost of not offering a bid opportunity."]},{"entry":["3.","For each impression that will be the basis of a bidding event, the auctioneer"]},{"entry":[{},"106B may call each of the chosen bidders 106C with only a single bid request."]},{"entry":[{},"This streamlines all communications between the two parties, and avoid"]},{"entry":[{},"unnecessary bid calls."]},{"entry":["4.","In addition to receiving the [COOKIE] value above, a bidder 106C could ask"]},{"entry":[{},"an auctioneer 106B to only send it users 108 that accept third party cookies."]},{"entry":[{},"This is given the fact that a bidder 106C will not have any information on"]},{"entry":[{},"such users 108 that would allow it to make competitive bids."]},{"entry":["5.","The bidder 106C may enforce the rule that an impression bought (won)"]},{"entry":[{},"through one RTB auction will not be turned around and sold again in a"]},{"entry":[{},"separate RTB auction. Double or triple RTB auctions will result in lowered"]},{"entry":[{},"end user 108 experiences as each RTB auction creates latency and delays the"]},{"entry":[{},"display of the final creative."]},{"entry":["6.","For the same purposes of not degrading end user 108 experience, auctioneers"]},{"entry":[{},"106B may keep the RTB auctions to 500 ms or less, with this actual value to"]},{"entry":[{},"be determined based on experience at scale."]},{"entry":["7.","With the purpose of maximizing yield, the auctioneer 106B and bidder 106C"]},{"entry":[{},"may agree on the sharing of auctioneer based user information such as end"]},{"entry":[{},"user age, gender and behaviors, and page channels and context. It is up to the"]},{"entry":[{},"sales team of the auctioneer 106B and media buying group of the bidder 106C"]},{"entry":[{},"to come to an agreement, and possibly spell out in the form of a"]},{"entry":[{},"contract\/IO\/PO, as to which of these parameters can be used or stored by the"]},{"entry":[{},"bidder 106C for purposes other than the bidding event."]},{"entry":["8.","By definition, the bidder 106C will have access to the end user's IP Address,"]},{"entry":[{},"and http header information. These contain a number of important pieces of"]},{"entry":[{},"information regarding the geographical whereabouts (country, region,"]},{"entry":[{},"state\/province, city, zip code) of the end user 108. This means that the bidder"]},{"entry":[{},"106C does not need the auctioneer 106B to pass along any IP Address-based"]},{"entry":[{},"geographical data. The other data pieces that the bidder 106C has access to"]},{"entry":[{},"from within the http header are the operating system type\/version, browser"]},{"entry":[{},"type\/version, and the internet connectivity used by the end user 108. The"]},{"entry":[{},"bidder 106C may use these data pieces within its bidding decisioning logic."]},{"entry":["9.","Whereas any price type can be accommodated (e.g., CPM, CPC, CPA, and"]},{"entry":[{},"Revshare) in RTB, the CPM model may be more commonplace, as it"]},{"entry":[{},"decouples the auctioneer 106B from any issues originating from the bidder's"]},{"entry":[{},"106C CPM estimation confidence levels."]},{"entry":["10.","The two parties in an RTB can decide whose numbers they will go off of for"]},{"entry":[{},"reporting and billing. It is expected that the auctioneer's 106B numbers will be"]},{"entry":[{},"utilized. The parties may need to expose to one another, on a daily basis, at"]},{"entry":[{},"least in console reporting, their respective tracked counts of requests and"]},{"entry":[{},"wins, and their respective total payout\/revenue. A standard method for sharing"]},{"entry":[{},"this data may be utilized."]},{"entry":["11.","The current list of single-state variable data pieces being passed in the bid"]},{"entry":[{},"request URL (age, gender, publisher ID, publisher category ID, cookie, flash,"]},{"entry":[{},"domain) may be expanded to include other important variables as: above vs."]},{"entry":[{},"below fold, Editorial or UGC, Brand Safe vs. not, etc. A standard method"]},{"entry":[{},"for sharing this data may be utilized."]},{"entry":["12.","In order to audit and combat fraud attempts:"]},{"entry":[{},"Both the auctioneer 106B and bidder 106C may maintain and continuously"]},{"entry":[{},"check the record of all errors resulting from out of range timestamps."]},{"entry":[{},"The auctioneer 106B may additionally do the same for mismatched"]},{"entry":[{},"signatures."]},{"entry":["13.","If the end user 108 has opted out of behavioral advertising through the use of"]},{"entry":[{},"the Network Advertising Initiative (NAI) site, then the publisher 106A or"]},{"entry":[{},"auctioneer 106B should not pass end user-specific information (age, gender,"]},{"entry":[{},"and later behaviors, interests, etc,) to the bidders 106C on the bid request."]},{"entry":["14.","Domain passing is important in bringing to RTB those advertisers who want to"]},{"entry":[{},"maintain absolute control over where their ads run."]},{"entry":[{},"At a high level, the bidder 106C may implement a white-list (for targeting to)"]},{"entry":[{},"or a black-list (for blocking against) which would make campaigns eligible\/"]},{"entry":[{},"ineligible based on the domain of the request. If a request arrives with no"]},{"entry":[{},"domain, then any campaign on the bidder's 106C side that is expressly"]},{"entry":[{},"checking for the domain would not be eligible."]},{"entry":[{},"If an auctioneer 106B is sending proportionately large numbers of impressions"]},{"entry":[{},"from undesirable domains, the auctioneer 106B can be asked to read the"]},{"entry":[{},"domain of the end impression and not call the bidder 106C for a bid."]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}},"br":{}},"To utilize the RTB system, and understanding and agreement must be adopted between the auctioneer B and the bidder C. The following illustrates an example of general timeline for adopting such an understanding:","(1) Auctioneer B and bidder C review the RTB specification version;","(2) Auctioneer B and bidder C understand their confidence intervals around their own system's eCPM estimation capability;","(3) Auctioneer B develops the auction initiation code, and the bidder C develops the bid response code in their respective ad servers;","(4) Bidder C decides on the final bid request URL within the guidelines described above;","(5) Bidder C performs an internal manual testing of call format and response times;","(6) Auctioneer B performs these same manual tests on the bidder C and a full load testing;","(7) Both parties B\/C launch with agreed upon initial capacity (can be as small as 1 million requests per day);","(8) Both parties B\/C confirm the proper operation of desired functionality;","(9) Both parties B\/C monitor counts, discrepancy, latency, bid levels, and win rates; and","(10) Both parties B\/C ramp up by growing request volume over time, monitoring profit margins and continually scrutinizing all metrics.","With full technical development support, this timeline could be as short as three to four weeks for both auctioneers B and bidders C. Once two parties have conducted an RTB auction (i.e., with different parties), the two parties can easily conduct an auction with each other using the already adopted understanding","Alternative Embodiments","In one or more embodiments, all bids, scaled, encrypted or otherwise, are in United States dollars. Full currency support may also be provided in RTB.","A second price auction may also be provided. In a first price RTB auction implementation, the bidder C pays the amount it had bid if it wins the impression. Depending on demand from bidding members, a second price auction version may also be utilized. In a second price auction, instead of each bidder's C JSON\u2122 response object containing only a single scaled bid, it would contain two. One would be the max this bidder is willing to pay for this impression and the second, a lower value, would be an amount incrementally higher than the second highest CPM that the bidder C has in its own system. The final winner is either the reserve CPM or the bidder C whose max bid was the highest CPM. However, if a bidder C wins, this bidder C would pay an amount only incrementally higher than the second highest max CPM value in the RTB auction.","A publisher A may also block advertisements. In one or more embodiments, there is no automated mechanism for the auctioneer B to let bidders C know that the publisher A owning this impression needs to block certain advertisers, types of advertisers, or characteristics of creatives from bidding, winning and displaying ads on the publisher's A site. Such types of blocking information may be communicated offline, and entered\/trafficked manually into the bidder's C system. Alternatively, an automated mechanism may be utilized that brings RTB to those publishers A who want to maintain control over the types of ads they receive by reducing (through automation) their campaign management costs.","In broad terms, such an automated mechanism adds a new mandatory placeholder to the bid request URL. The value of this placeholder could be a number (e.g., 4.187) that, once appended to a URL predefined by the auctioneer B, would denote both the ID (4) of the end publisher A from where the impression is emanating as well as the sequential ID (187) of the blocking rules that need to be abided by for this impression. This URL defines the location of the XML document that contains all the blocking rules for all impressions coming from this end publisher A through this auctioneer B. Since the blocking rules do not change very often, the bidder C may cache the latest versions of each of these XML documents on a per-auctioneer B and per-publisher A basis. When the bidder C sees a new placeholder that it does not have in cache, it would read this new XML document in real-time, and act accordingly going forward. The bidder C may not bid on the bid request containing a new sequential ID in order not to create latency in the response. In addition, the standardization of major types of advertisers, and creative attributes, may benefit all auctioneers B and bidders C as they use the same industry-wide taxonomy and cut campaign management\/trafficking costs.","The advertiser may also block a particular publisher A based on domain, publisher ID, or publisher category. If blocking is based on domains, the end publisher domain of the impression may be passed to the bidder C. The publisher A ID may also be passed to the bidder C. Further, the list of publisher IDs and their names may be shared. Such sharing may be provided as part of the real-time call as another XML document that the bidder C reads, thereby exposing the publisher IDs to the bidder C for it to block or target.","To block by publisher A category, an ID that indicates the category of the publisher from where this impression comes may be passed to the bidder C. Although this ID can be used for blocking, the major types of content may also be standardized benefiting all auctioneers B and bidders C by sharing the same industry-wide taxonomy, and cutting costs. To allow the bidder C to block\/target properly, the current list of publisher A category IDs and their names may also be shared as yet another pointer to another XML document that the bidder C can read and expose internally to its traffickers.","The reporting of requests, won bid counts, and total dollars spent may be reported through an API, so as to cut down on the cost of labor needed to read these values from one console and enter into the other.","To minimize the possibility of fraud, data values may be encrypted by scaling the bids and encrypting both the bids and the timestamp. Additionally, more of the data values passed on the bid request URL may also be encrypted (e.g., demographic, behavioral and contextual nature data).","A single-state variable is one where the characteristic of the impression for that variable can only be in one state at any given time (e.g., age of end user, above or below the fold for the placement of an ad on the page, etc.). Additional single-state marketing data may also be standardized.","A multi-state variable is one where the impression's characteristic for that variable can be in more than one state at any given time. A number of key pieces of data may be multi-state, such as contextual categories\/channels and end user hypertargets\/behaviors\/intents\/life-stages. For contextual categories\/channels, a particular impression can have a number of contexts at varying degrees of relevance. For example, an impression from a page that foremost discusses financed auto insurance could be tagged by car, insurance, and loans, each at a different probability level. The values passed could be utilized to standardize content pages. End user hypertargets\/behaviors\/intents\/life-stages provide the ability for the end user to be responsible for a specific impression that can be tagged by a number of behaviors at varying confidence\/probability levels. For example, tags may include extreme sport enthusiast, interested in LASIK surgery, and recently engaged, at different confidences. The standardization of end user data points may benefit all auctioneers B and bidders C as they share the same industry-wide taxonomy, and cut costs.","In addition to the foregoing, there are numerous alternative embodiments for equally accomplishing the present invention. For example, any type of computer, such as a mainframe, minicomputer, or personal computer, or computer configuration, such as a timesharing mainframe, local area network, or standalone personal computer, could be used with the present invention. In summary, embodiments of the invention provide for secure real time bidding implemented in a method, apparatus, system, article of manufacture, and\/or computer readable medium.","The foregoing is not intended to be exhaustive or to limit the invention to the precise form disclosed. While the present invention has been described with regards to particular embodiments, it is recognized that additional variations of the present invention may be devised without departing from the inventive concept. It is intended that the scope of the invention be limited not by this detailed description, but rather by the claims appended hereto."],"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DESCRIPTION OF THE PREFERRED EMBODIMENT(S)"],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 3"}]},"DETDESC":[{},{}]}
