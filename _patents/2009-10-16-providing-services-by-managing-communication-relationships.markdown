---
title: Providing services by managing communication relationships
abstract: A service providing server collects call session information that identifies communication established between terminals and service usage IDs that identify the terminals for each terminal. Then, the service providing server identifies call session information pieces indicating the same communication and associates Web services with each other. When the service providing server provides the associated Web services to the terminals, the service providing server identifies service usage IDs that identify the terminals and control provision of the Web services so that each Web service is provided according to history information stored in a history information database in association with service usage IDs.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09325745&OS=09325745&RS=09325745
owner: NIPPON TELEGRAPH AND TELEPHONE CORPORATION
number: 09325745
owner_city: Tokyo
owner_country: JP
publication_date: 20091016
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["FIELD","BACKGROUND","CITATION LIST","SUMMARY","Technical Problem","Solution to Problem","Advantageous Effects of Invention","DESCRIPTION OF EMBODIMENTS","First Embodiment","Outline of Service Providing System According to First Embodiment","Configuration of Service Providing System According to First Embodiment","Processing Procedure of Service Providing System According to First Embodiment","Effects of First Embodiment","Second Embodiment","Outline of Service Providing System According to Second Embodiment","Configuration of Service Providing System According to Second Embodiment","Processing Procedure of Service Providing System According to Second Embodiment","Effects of Second Embodiment","Third Embodiment","Outline of Service Providing System According to Third Embodiment","Configuration of Service Providing System According to Third Embodiment","Processing Procedure of the Service Providing System According to Third Embodiment","Effects of Third Embodiment","Fourth Embodiment","Other Embodiments","INDUSTRIAL APPLICABILITY","REFERENCE SIGNS LIST"],"p":["The present invention relates to a service providing system and a service providing method.","Conventionally, as a service provided to a terminal connected to an Internet Protocol (IP) network, there is a Web service that uses a World Wide Web (WWW) related technique. Among Web services, there are various advanced Web services such as an Instant Messaging (IM) service. For example, a service providing server that provides an IM service provides advanced Web services such as chatting, sharing of image data, by making Web services provided to terminals cooperate with each other between the terminals.","At this time, the terminal that uses the IM service registers itself in the service providing server as a member in advance. The terminal exchanges membership ID with other members and registers the membership IDs in a buddy list in advance. In this way, the service providing server controls the Web services on the basis of the buddy relationship between the members registered in advance and makes the Web services cooperate with each other between the members. For example, Patent Literature 1 discloses a technique in which membership managements are integrated, and thereby, when new service is used, a membership registration is not required. For example, Patent Literature 2 discloses a technique for sharing an application by using an ordinary browser.","Patent Literature","Patent Literature 1: Japanese Unexamined Patent Application Publication No. 2005-228122","Patent Literature 2: Japanese Unexamined Patent Application Publication No. 2003-044429","By the way, in the conventional technique described above, there has been a problem that an advanced Web service has not been able to be flexibly provided. In recent years, there are many terminals that establish an ad hoc (temporary) communication relationship between themselves via a network, and it is desired that an advanced Web service can be provided to the terminals having such a communication relationship. However, in the conventional technique in which membership registration is required in advance, the service providing server cannot provide an advanced Web service to the terminals that establish an ad hoc communication relationship.","Therefore, the present invention is made to solve the problem of the conventional technique described above, and a first object of the present invention is to flexibly provide an advanced Web service by, for example, coping with an ad hoc communication relationship.","A second object of the present invention is to provide a high-value-added Web service associated with various information related to a user as well as to cope with an ad hoc communication relationship.","According to an aspect of an embodiment of the invention, a service providing system for providing a service on a network to a terminal. The service providing system includes a communication information collecting unit for collecting communication information that identifies communication established between terminals for each terminal; an identification information collecting unit for collecting identification information that identifies a terminal or a user of a terminal as information combined with the communication information for each terminal; an associating unit for identifying communication information pieces indicating the same communication from a plurality of communication information pieces collected by the communication information collecting unit and associating services, which are provided to terminals which establish the communication identified by the identified communication information pieces, with each other; and a service providing unit for, when providing the services associated with each other by the associating unit to the terminals, identifying identification information pieces that identify the terminals or users of the terminals from a plurality of identification information pieces collected by the identification information collecting unit, and controlling service provision so that the services are provided in accordance with information stored in a storage unit in association with the identified identification information pieces.","An advanced Web service is flexibly provided by, for example, coping with an ad hoc communication relationship.","An ad hoc communication relationship is handled and a high-value-added Web service associated with various information related to a user is provided.","Hereinafter, embodiments of a service providing system and a service providing method according to the present invention will be described with reference to the attached drawings. In the description below, an outline, a configuration, and a processing procedure of a service providing system according to a first embodiment will be described in this order, and then effects of the first embodiment will be described. Thereafter, the other embodiments will be described.","First, an outline of the service providing system according to the first embodiment will be described with reference to .  is a diagram for explaining the outline of the service providing system according to the first embodiment.","As shown in , the service providing system according to the first embodiment includes a service providing server , a session management server , and terminals . First, a communication is established between the terminals  by Session Initiation Protocol (SIP), and next, the service providing server  provides a Web service to each terminal  by HTTP (Hyper Text Transfer Protocol) communication.","Specifically, first, a communication is established between the terminals  by the SIP, and then a voice call is started between the terminals  (step S).","Next, the session management server  issues a certificate including call session information and service usage ID to each terminal  (step S). Here, the call session information is information for identifying the communication established by SIP between the terminals , and the service usage ID is information identifying the terminal .","Each terminal  transmits the certificate issued from the session management server  and a service use request to the service providing server  (step S).","On the other hand, as shown in , the service providing server  stores service usage ID and history information in association with each other in a history information database. In other words, for the terminal  that has used a Web service, the service providing server  stores history information in association with the service usage ID identifying the terminal . Therefore, when the service providing server  receives the certificate from the terminal , the service providing server  refers to the history information database by using the service usage ID included in the certificate, and searches for the history information (step S).","Then, the service providing server  identifies that the call session information pieces transmitted from each terminal  are call session information pieces indicating the same communication, makes Web services provided to each terminal  cooperate with each other, and controls the service provision so that each service is provided according to the searched history information (step S).","The service providing server  stores history information of the Web services provided to each terminal  into the history information database (step S).","In this way, according to the service providing system of the first embodiment, it is possible to flexibly provide an advanced Web service by, for example, coping with an ad hoc communication relationship.","Specifically, each terminal  does not register in the service providing server  as a member in advance, nor do the terminals  register the buddy relationship in the service providing server  in advance. The relationship between the terminals  is only an ad hoc communication relationship in which the communication is established by SIP. In such a case, the service providing system according to the first embodiment causes the service providing server  to grasp the ad hoc communication relationship if needed and flexibly provide an advanced Web service such as cooperation of Web services by using the call session information that identifies the ad hoc communication relationship.","According to the service providing system of the first embodiment, it is possible to provide a high-value-added Web service associated with various information related to a user.","Specifically, the service providing server  does not register each terminal  as a member in advance, but only grasps the relationship between the terminals  by using the call session information. In this case, the service providing system according to the first embodiment causes the service providing server  to grasp the terminals  by issuing the service usage IDs that identify the terminals  and using the service usage IDs. As a result, the service providing server  can accumulate history information of the terminal  that has used a Web service, and when providing a Web service to the terminal  again, the service providing server  can provide a high-value-added Web service associated with the history information.","Next, a configuration of the service providing system according to the first embodiment will be described with reference to . In the description below, configurations of the terminal , the session management server , and the service providing server  will be described in this order.","[Terminal]","First, the configuration of the terminal  will be described with reference to .  is a block diagram showing the configuration of the terminal. The terminal  is implemented by a general-purpose Personal Computer (PC) or the like that includes units described below. As shown in , the terminal  includes an SIP communication unit , a call session information collection unit , a call session information transmission unit , and a service use unit .","The SIP communication unit  performs communication in the process for establishing communication with another terminal  by the SIP (hereinafter referred to SIP communication) and the communication established by the SIP. Specifically, the SIP communication unit  is connected to the call session information collection unit , and when establishing communication with another terminal  by the SIP, the SIP communication unit  notifies the call session information collection unit  that the communication is established. The SIP communication performed by the terminal  and the communication established by the SIP are performed via the session management server .","The call session information collection unit  collects call session information that uniquely identifies the communication established between the terminal  and another terminal . Specifically, the call session information collection unit  is connected to the SIP communication unit  and the call session information transmission unit . When information indicating that the communication is established is notified from the SIP communication unit , the call session information collection unit  collects the call session information from information included in the SIP communication, and notifies the call session information transmission unit  of the collected call session information.","Here, the call session information will be described. Essentially, the session information is information that uniquely identifies communication in the fifth layer of the Open Systems Interconnection (OSI) model. Specifically, in the service providing system according to the first embodiment, although it is assumed that SIP communication and HTTP communication are performed as communication, the SIP communication and the HTTP communication cannot be distinguished in the fourth layer because both the SIP communication and the HTTP communication are Transmission Control Protocol (TCP) communication. Therefore, by adding the session information to the communication established between the terminals , the communication is identified to be the SIP communication or the HTTP communication. Specifically, the call session information is session information indicating that the communication is the SIP communication.","The session information not only distinguishes the SIP communication and the HTTP communication, but also identifies that the communication established between the terminals  is different from communication established between the other terminals . In other words, the call session information is information identifying the communication established by the SIP between the terminals . For example, the call session information collection unit  collects \u201cCall-ID\u201d, \u201cFrom\u201d, \u201cTo\u201d, \u201ctag\u201d, or an IP address included in the SIP communication or a combination thereof, and also collects other information included in the SIP communication. The call session information may be any information that can uniquely identify the communication established by the SIP.","The call session information transmission unit  transmits the call session information to the session management server . Specifically, the call session information transmission unit  is connected to the call session information collection unit , and when the call session information is notified from the call session information collection unit , the call session information transmission unit  transmits the notified call session information to the session management server . The terminals  in the first embodiment store the Uniform Resource Locator (URL) of the session management server  in a storage unit (not shown in the figures) in advance. Therefore, the call session information transmission unit  refers to the storage unit to obtain the URL of the session management server  and transmits the call session information to the obtained URL.","The service use unit  receives a service provided by the service providing server . Specifically, to receive the service, the service use unit  transmits the certificate issued and transmitted by the session management server  to the service providing server . The service use unit  receives Web session information from the service providing server , provides the received Web session information to a Web browser, and accesses the service providing server .","Here, the Web session information will be described. In a similar manner as the call session information, the Web session information is session information indicating that the communication is the HTTP communication. The Web session information is information that uniquely identifies the HTTP communication established between the terminal  and the service providing server . For example, the Web session information is implemented by a Cookie ID or the like. The Web session information may be any information that can uniquely identify the HTTP communication established between the terminal  and the service providing server .","[Session Management Server]","Next, a configuration of the session management server  will be described with reference to .  is a block diagram showing a configuration of the session management server.  is a diagram for explaining a call session information database.  is a diagram for explaining a service usage information database.  is a diagram for explaining the certificate.  is a diagram for explaining a signature attached to the certificate.","The session management server  is implemented by a general-purpose server or the like that includes units described below. As shown in , the session management server  includes a call session information database , a service usage information database , an SIP communication control unit , a call session information verification unit , and a certificate issuing unit .","The call session information database  stores the call session information. Specifically, the call session information database  is connected to the SIP communication control unit , the call session information verification unit , and the certificate issuing unit , and used for processing by the SIP communication control unit , the call session information verification unit , or the certificate issuing unit .","For example, the call session information database  stores information as shown in . Here, the session management server  according to the first embodiment does not issue a certificate by describing the call session information transmitted from the terminal  into the certificate without change, but encrypts the call session information to issue the certificate. Therefore, as shown in , in addition to the call session information \u201cCall-ID\u201d, \u201cFrom\u201d, and \u201cTo\u201d transmitted from the terminal , the call session information database  stores \u201ccall session information\u201d encrypted in association with the above call session information.","The service usage information database  stores service usage information. Specifically, the service usage information database  is connected to the certificate issuing unit  and used for processing by the certificate issuing unit .","For example, as shown in , the service usage information database  stores \u201cSIP-URI (Uniform Resource Identifier)\u201d, \u201cservice providing server URI\u201d, and \u201cservice usage ID\u201d in association with each other. The session management server  in the first embodiment issues a service usage ID for each combination of a terminal and a service used by the terminal. Therefore, the service usage information database  stores the \u201cservice usage ID\u201d in association with a combination of \u201cSIP-URI\u201d that uniquely identifies the terminal and the \u201cservice providing server URI\u201d that uniquely identifies the service. For example, although \u201c0422591111@idp.com\u201d shown in the third row in  and \u201c0422591111@idp.com\u201d shown in the fourth row are an SIP-URI indicating the same terminal, different service usage IDs \u201cUSER1-web1-SP-id\u201d and \u201cUSER1-web2-SP-id\u201d are issued for each service to be used. The service usage ID may be any information by which the service providing server  identifies the terminal . For example, the service usage ID may be a random number.","The SIP communication control unit  controls the SIP communication performed between the terminals , the communication established by the SIP, communication to disconnect the communication established by the SIP, or the like. The SIP communication control unit  is connected to the call session information database  and the call session information verification unit , stores the call session information transmitted from the terminal  into the call session information database , and notifies the call session information verification unit  that the call session information is stored. For example, the SIP communication control unit  stores the call session information \u201cCall-ID\u201d, \u201cFrom\u201d, \u201cTo\u201d, \u201ctag\u201d, or an IP address transmitted from the terminal , a combination of these, or other information included in the SIP into the call session information database .  is a diagram showing the call session information database  in which, for example, \u201cCall-ID\u201d, \u201cFrom\u201d, and \u201cTo\u201d of the call session information are stored by the SIP communication control unit .","The call session information verification unit  verifies the call session information. Specifically, the call session information verification unit  is connected to the call session information database , the SIP communication control unit , and the certificate issuing unit , and refers to the call session information database  when notified that the call session information is stored from the SIP communication control unit . The call session information verification unit  verifies whether or not the stored call session information is certainly information that uniquely identifies the communication established by the session management server , and notifies the certificate issuing unit  of the verification result.","The certificate issuing unit  issues a service usage ID and issues a certificate including call session information and the service usage ID. Specifically, the certificate issuing unit  is connected to the call session information database , the service usage information database , and the call session information verification unit , and when the verification result is notified from the call session information verification unit , the certificate issuing unit  refers to the call session information database  and stores encrypted call cession information into the call session information database .","When the certificate issuing unit  receives service selection information from the terminal , the certificate issuing unit  issues a service usage ID in association with a combination of the SIP-URI that uniquely identifies the terminal  and the service providing server URI that uniquely identifies the service indicated by the service selection information, and stores the service usage ID into the service usage information database . The certificate issuing unit  issues a certificate including the call session information stored in the call session information database  and the service usage ID stored in the service usage information database , and transmits the certificate to the terminal . At this time, the certificate issuing unit  transmits the certificate along with a redirect instruction for instructing the terminal  to change the access destination to the URL of the service providing server .","For example, as shown in , the certificate issuing unit  issues a certificate of a Security Assertion Markup Language (SAML) format in which a signature of the session management server  is attached to the call session information and the service usage ID. In , the signature, and the like is omitted, and  shows the signature and a public key. Here, the SAML format is a protocol specified in order to exchange authentication information by using data described in Extensible Markup Language (XML), and is a format capable of checking that data is not tampered and verifying a source of issued data and the like by a signature. The certificate issuing unit  issues data in which the call session information, the service usage ID, a certificate issued from a certificate authority which certifies that the public key of the session management server  is authenticated, and a signature obtained by encrypting the call session information and the service usage ID (hash value) by a secret key of the session management server  are described in the SAML format.","Although, in the first embodiment, a method for issuing a certificate of XML format is described as a method for transmitting the call session information and the service usage ID, the present invention is not limited to this. As a method for transmitting the call session information and the service usage ID, it is possible to use, for example, a method by a GET method supported by HTTP (a method for transmitting a URI as a parameter from which the call session information and the service usage ID can be obtained) and a method by a POST method (a method for transmitting the body text of a predetermined format including the call session information and the service usage ID). In these methods, by attaching a signature to a parameter, in the same manner as in the certificate of XML format, it is possible to have a format capable of checking that data is not tampered and verifying a source of issued data and the like by a signature.","[Service Providing Server]","Next, a configuration of the service providing server  will be described with reference to .  is a block diagram showing the configuration of the service providing server.  is a diagram for explaining a session information database.  is a diagram for explaining a store information database.  is a diagram for explaining a history information database.","The service providing server  is implemented by a general-purpose server or the like that includes units described below. As shown in , the service providing server  includes a session information database , a store information database , a history information database , a certificate verification unit , a Web session information issuing unit , and a service providing unit .","The session information database  stores the call session information, the service usage ID, and the Web session information in association with each other. Specifically, the session information database  is connected to the certificate verification unit , the Web session information issuing unit , and the service providing unit , and used for processing by the certificate verification unit , the Web session information issuing unit , and the service providing unit . For example, the session information database  stores information as shown in .","The store information database  stores the store information which is content of the service provided by the service providing server . Specifically, the store information database  is connected to the service providing unit  and used for processing by the service providing unit . For example, the store information database  stores information as shown in .","The history information database  stores service usage history information for each service usage ID. Specifically, the history information database  is connected to the service providing unit  and used for processing by the service providing unit . For example, the history information database  stores information as shown in .","The certificate verification unit  verifies a certificate. Specifically, the certificate verification unit  is connected to the session information database  and the Web session information issuing unit , and when the certificate issued by the session management server  is transmitted from the terminal , the certificate verification unit  verifies the certificate and notifies the Web session information issuing unit  of the verification result.","For example, the certificate verification unit  decrypts the signature by using the public key (verified to be an authenticated public key by a certificate authority) of the session management server  included in the certificate and retrieves a hash value of the call session information and the service usage ID. Also, the certificate verification unit  calculates a hash value from the call session information and the service usage ID themselves. Then the certificate verification unit  verifies that the call session information and the service usage ID are true and correct information by comparing the hash value retrieved from the signature and the calculated hash value. Specifically, as a comparison result, if the hash value retrieved from the signature and the calculated hash value are the same, the following facts can be verified: (a) the call session information and the service usage ID are certainly information issued from the session management server , (b) the call session information and the service usage ID are not tampered, and (c) the session management server  does not deny the fact that the session management server  has transmitted the call session information and the service usage ID. Thus, it is possible to verify that the call session information and the service usage ID are true and correct information.","The Web session information issuing unit  issues the Web session information. Specifically, the Web session information issuing unit  is connected to the session information database  and the certificate verification unit , and when the verification result of the certificate is notified from the certificate verification unit , the Web session information issuing unit  issues Web session information and stores the call session information, the service usage ID, and the Web session information in association with each other into the session information database .","The service providing unit  provide a service. Specifically, the service providing unit  is connected to the session information database , the store information database , and the history information database , and when accessed from the terminal  with the Web session information, the service providing unit  refers to the session information database  by using the Web session and obtains the call session information and the service usage ID. The service providing unit  refers to the history information database  by using the service usage ID, and obtains the history information. The service providing unit  controls service provision so that services are provided to the terminal  in accordance with the history information. The service providing unit  stores history information of the service used by the terminal  in association with the service usage ID into the history information database .","When, among a plurality of the call session information pieces stored in the session information database , predetermined call session information pieces indicate the same established communication, the service providing unit  controls the services provided using the Web session information pieces in association with each other.","For example, as shown in , the service providing unit  determines that, among a plurality of the call session information pieces stored in the session information database , two call session information pieces \u201ce8b03879d0f5629aa8b5ea6a06736cle\u201d indicate the same communication established by the SIP. Then, the service providing unit  controls the service provided by using HTTP communication to which the Web session information \u201c123\u201d stored in association with the call session information \u201ce8b03879d0f5629aa8b5ea6a06736cle\u201d is provided and the service provided by using HTTP communication to which the Web session information \u201c456\u201d stored in association with the same call session information is provided in association with each other.","For example, it is assumed that one terminal  uploads image data to the service providing server  by the HTTP communication to which the Web session information \u201c456\u201d is provided when the other terminal  accesses the service providing server  by the HTTP communication to which the Web session information \u201c123\u201d is provided. In this case, the relationship between the terminals  is assumed to be a relationship in which the same communication is established by the SIP, so that it is determined that the terminals  allow sharing of the image data with each other, and the service providing unit  according to the first embodiment controls the service so that the image data is transmitted to the other terminal .","Here, the service provision by the service providing server  will be considered again. Although the manner in which the service provision by the service providing server  is controlled on the basis of the relationship between the terminals  is the same as in a conventional service providing server, how the service providing server  of the first embodiment grasps the \u201crelationship between the terminals \u201d will be described.","Specifically, the service providing server  according to the first embodiment does not grasp the buddy relationship registered in the storage unit in advance as the \u201crelationship between the terminals \u201d as in the manner of the conventional service providing server, but the service providing unit  grasps the \u201crelationship between the terminals \u201d when the call session information pieces indicate the same communication established by the SIP. In other words, even when a relationship between terminals that communicate with each other is temporary, such as the relationship between the terminals  which establish the same communication by the SIP, the service providing server  can provide a service in association with the temporary communication relationship by associating the HTTP communications performed by the terminals  with each other on the basis of the temporary communication relationship.","As in the manner of the first embodiment, when first communication is the communication in the process for establishing communication by the SIP, it is meaningful that the \u201crelationship between the terminals \u201d is a relationship authenticated by the SIP. In the SIP communication, Digest authentication is usually performed, so that a fact that a communication is established between the terminals  by the SIP indicates that the relationship between the terminals  has been authenticated.","Next, a processing procedure of the service providing system according to the first embodiment will be described with reference to .  is a sequence diagram showing the processing procedure of the service providing system according to the first embodiment.  is a flowchart showing a processing procedure of the certificate issuing unit.  is a flowchart showing a processing procedure of the service providing unit.","As shown in , first, by the control of the SIP communication control unit  of the session management server , the SIP communication from step S to step S is performed between the terminals . As a result, in step S, a communication is established between the terminals  by the SIP.","When the communication is established between the terminals  by the SIP, the call session information collection unit  of the terminals  collects the call session information from information included in the SIP communication (step S), and the call session information transmission unit  transmits the call session information to the session management server  (step S).","Then the call session information verification unit  of the session management server  verifies the call session information (step S), and the certificate issuing unit  transmits a service menu screen to the terminals  (step S).","When a predetermined service of a plurality of services displayed on the menu screen is selected by, for example, being pressed by a user of the terminal , the service use unit  of the terminal  transmits service selection information to the management server  (step S).","Then the certificate issuing unit  of the management server  issues a service usage ID in association with a combination of the SIP-URI that uniquely identifies the terminal  and the service providing server URI that uniquely identifies the service indicated by the service selection information. The certificate issuing unit  issues a certificate that includes the call session information and the service usage ID (step S).","Next, the certificate issuing unit  transmits the issued certificate along with a redirect instruction for instructing the terminal  to change the access destination to the URL of the service providing server  (step S).","On the other hand, the service use unit  of the terminal  is redirected by the redirect instruction transmitted from the session management server , and accesses the service providing server  (step S). At this time, the service use unit  accesses the service providing server  with the certificate issued by the session management server .","Then the certificate verification unit  of the service providing server  verifies the certificate, and the Web session information issuing unit  issues the Web session information (step S) and transmits the issued Web session information to the terminal  (step S).","Subsequently, the certificate verification unit  stores the call session information, the service usage ID, and the Web session information in association with each other into the session information database , and associates the call session information, the service usage ID, and the Web session information with each other (step S).","Thereafter, when the service use unit  of the terminal  accesses the service providing server  with the Web session information, the service providing unit  of the service providing server  provides a service by using the history information stored in the history information database  in association with the service usage ID. The service providing unit  stores history information of the service used by the terminal  in association with the service usage ID into the history information database  (step S).","Although, in the first embodiment, a method is described in which the session management server  transmits the menu screen to the terminal  in step S and the terminal  transmits the service selection information to the session management server  in step S, the present invention is not limited to this. For example, if the session management server  sets a service providing server  to be used for each combination of the terminals  in advance, step S and step S may be omitted and the process may proceed to step S.","[Processing Procedure of Certificate Issuing Unit]","Next, step S shown in  will be described in detail with reference to .","First, the certificate issuing unit  of the session management server  determines whether or not the service selection information is received from the terminal  (step S), and when the service selection information is not received (No in step S), the certificate issuing unit  repeatedly performs the processing for determining whether or not the service selection information is received.","On the other hand, when the service selection information is received (Yes in step S), the certificate issuing unit  refers to the service usage information database  by using the SIP-URI that uniquely identifies the terminal  and the service providing server URI that uniquely identifies the service indicated by the service selection information (step S).","When the certificate issuing unit  cannot detect the service usage ID (No in step S), the certificate issuing unit  newly issues a service usage ID (step S), issues a certificate that includes the call session information and the newly issued service usage ID (step S), and ends the processing.","On the other hand, when the certificate issuing unit  can detect the service usage ID (Yes in step S), the certificate issuing unit  issues a certificate that includes the call session information and the detected service usage ID (step S), and ends the processing.","[Processing Procedure of Service Providing Unit]","Next, step S shown in  will be described in detail with reference to .","First, the service providing unit  of the service providing server  determines whether or not the service use request is received (whether or not the service providing unit  is accessed from the terminal  with the Web session information) (step S), and when the service use request is not received (No in step S), the service providing unit  repeatedly performs the processing for determining whether or not the service use request is received.","On the other hand, when the service use request is received (Yes in step S), the service providing unit  refers to the session information database  by using the Web session information, and obtains the call session information and the service usage ID (step S).","Then the service providing unit  refers to the history information database  by using the service usage ID (step S), and when there is the history information of the service usage ID (Yes in step S), the service providing unit  provides a service to the terminal  by using the history information (step S). For example, the service providing server  refers to the history information and provides information of Japanese food considered to be the favorite of users of the terminals .","On the other hand, when there is not the history information (No in step S), the service providing unit  provides a service without using the history information (step S). In both cases in which a service is provided by using the history information and in which a service is provided without using the history information, the service providing unit  provides the services to be provided to the terminals  in association with each other. When, among a plurality of the call session information pieces stored in the session information database , two call session information pieces indicate the same communication established by the SIP, the service providing unit  controls the services, which are provided using HTTP communications to which the Web session information pieces stored in association with the call cession information pieces are provided, in association with each other.","Then the service providing unit  stores the history information of the service used by the terminal  in association with the service usage ID into the history information database  (step S), and ends the processing.","As described above, in the service providing system according to the first embodiment, the service providing server  collects the call session information that identifies a communication established between the terminals  from each terminal . Also, the service providing server  collects the service usage ID that identifies the terminal  from each terminal  as information of a combination of the service usage ID and the call session information. The service providing server  identifies call session information pieces that indicate the same communication from a plurality of call session information pieces, and associates the services to be provided to the terminals  that establish the communication identified by the identified call session information pieces with each other. In addition, when providing each associated service to each terminal , the service providing server  identifies the service usage IDs that identify the terminals  from a plurality of service usage IDs, and controls the service provision so that each service is provided in accordance with the history information stored in the storage unit in association with the identified service usage IDs.","In this way, according to the service providing system of the first embodiment, it is possible to flexibly provide an advanced Web service by, for example, coping with an ad hoc communication relationship.","Specifically, each terminal  does not register in the service providing server  as a member in advance, nor do the terminals  register the buddy relationship in the service providing server  in advance. The relationship between the terminals  is only an ad hoc communication relationship in which the communication is established by SIP. In such a case, the service providing system according to the first embodiment causes the service providing server  to grasp the ad hoc communication relationship if needed and flexibly provide an advanced Web service such as cooperation of Web services by using the call session information that identifies the ad hoc communication relationship.","According to the service providing system of the first embodiment, it is possible to provide a high-value-added Web service associated with various information related to a user.","Specifically, the service providing server  does not register each terminal  as a member in advance, but only grasps the relationship between the terminals  by using the call session information. In this case, the service providing system according to the first embodiment causes the service providing server  to grasp the terminals  by issuing the service usage IDs that identify the terminals  and using the service usage IDs. As a result, the service providing server  can accumulate history information of the terminal  that has used a Web service, and when providing a Web service to the terminal  again, the service providing server  can provide a high-value-added Web service associated with the history information.","According to the first embodiment, the session management server  uses a pseudonym ID instead of a telephone number as a service usage ID. Therefore, it is possible to prevent a user from being identified in the service providing server .","According to the first embodiment, the service usage ID is issued for each combination of the terminal  and the service. In this case, it is possible to prevent a user identification operation performed by a plurality of Web servers conspiring with each other.","In the above description, as the first embodiment, a case example in which the service providing server  stores the service usage ID and the history information in association with each other and provides a Web service by using the history information has been described. However, the present invention is not limited to this. The present invention can be also applied to a case example in which the service providing server  stores user information related to a user registered in the service providing server  as a member in advance and the service usage ID in association with each other and provides a Web service by using the user information. Hereinafter, the case example to which the present invention is applied will be described as a second embodiment.","First, an outline of the service providing system according to the second embodiment will be described with reference to .  is a diagram for explaining the outline of the service providing system according to the second embodiment.","As shown in , the service providing system according to the second embodiment includes a user information database in which the service providing server  stores user information related to a user registered in the service providing server  as a member in advance and the service usage ID in association with each other. Although the service providing server  associates the Web services provided to the terminals  with each other in the same manner as in the first embodiment, at this time, the service providing server  controls the service provision so that the services are provided in accordance with the user information.","Specifically, in the same manner as in the first embodiment, first, a communication is established between the terminals  by the SIP, and then a voice call is started between the terminals  (step S).","Next, in the same manner as in the first embodiment, the session management server  issues a certificate including the call session information and the service usage ID to each terminal  (step S).","Each terminal  transmits the certificate issued from the session management server  and a service use request to the service providing server  (step S). Although not shown in , the terminals  perform a log-in operation when using a Web service for the first time. For example, each terminal  transmits a user ID and a password to the service providing server . Then, the service providing server  performs authentication on each terminal , and when the authentication is successfully performed, the service providing server  stores the service usage ID in association with the user ID in the user information database.","Therefore, when the service providing server  receives the certificate from the terminal  after the first time, the service providing server  refers to the user information database by using the service usage ID included in the certificate, and searches for the user information (step S).","Then, in the same manner as in the first embodiment, the service providing server  identifies that the call session information pieces transmitted from each terminal  are call session information pieces indicating the same communication and makes Web services provided to each terminal  cooperate with each other, and, different from the first embodiment, the service providing server  controls the service provision so that each service is provided according to the searched user information (step S).","Based on this, according to the service providing system of the second embodiment, it is possible to provide a high-value-added Web service by associating with the user information registered as a member in advance.","For example, as shown in , the service providing server  uses the user information indicating that the address of the user ID \u201cmyuser@web1.sp1.com\u201d is \u201c . . . , Musashino City, Tokyo\u201d and the address of the user ID \u201couruser@web1.sp1.com\u201d is \u201c . . . , Chiyoda Ward, Tokyo\u201d, and thereby can introduce a store located in \u201cShinjuku Ward\u201d which is in the center of the above addresses.","Next, a configuration of the service providing system according to the second embodiment will be described with reference to .  is a block diagram showing the configuration of the service providing server.  is a diagram for explaining the user information database. Hereinafter, only a configuration of the service providing system according to the second embodiment, which is different from that according to the first embodiment, will be described.","As shown in , the service providing server  according to the second embodiment further includes a user information database . Although the service providing server  according to the second embodiment does not include the history information database , the service providing server  may includes the history information database  in the same manner as in the first embodiment. In this case, the service providing unit  not only can provide a Web service by using the user information, but also can provide a Web service by using the user information and the history information.","The user information database  stores user information related to a user registered in the service providing server  as a member in advance and the service usage ID in association with each other. Specifically, the user information database  is connected to the service providing unit  and used for processing by the service providing unit . For example, the user information database  stores information as shown in .","The service providing unit  according to the second embodiment provides a service in the same manner as in the first embodiment, different from the first embodiment, the service providing unit  provides a service in association with the user information. Specifically, the service providing unit  is connected to the session information database , the store information database , and the user information database , and when accessed from the terminal  with the Web session information, the service providing unit  refers to the session information database  by using the Web session information and obtains the call session information and the service ID. The service providing unit  refers to the user information database  by using the service usage ID, and obtains the user information stored in association with the service usage ID. The service providing unit  controls the service provision so that services are provided to the terminal  in accordance with the user information.","Next, a processing procedure of the service providing system according to the second embodiment will be described with reference to .  is a sequence diagram showing the processing procedure of the service providing system according to the second embodiment.  is a flowchart showing a processing procedure of the service providing unit.  is a diagram for explaining a service providing screen.","Steps S to S in the processing procedure shown in  correspond to steps S to S in the processing procedure of the service providing system according to the first embodiment. In the service providing system according to the second embodiment, only the processing in step  is different from the first embodiment.","Specifically, in step S, the service use unit  of the terminal  accesses the service providing server  with the Web session information in the same manner as in the first embodiment. Of course, the service use unit  of the second embodiment performs a log-in operation, in which a user ID and a password are transmitted, when using the service for the first time. The log-in operation is not limited to a method in which a user ID and a password are transmitted, but, for example, a method in which a public key certificate is transmitted may be used.","When a first log-in operation is performed, the service providing unit  of the service providing server  refers to the user information database  by using the user ID and the password transmitted from the terminal , and authenticates the user of the terminal . When the authentication is successfully performed, the service providing server  associates the user ID and the service usage ID with each other by storing the service usage ID in association with the user information of the user information database .","After the first time, the service use unit  of the terminal  need not perform the log-in operation. Specifically, if the service providing unit  of the service providing server  refers to the user information database  by using the service usage ID, the service providing unit  can identify the user information stored in association with the service usage ID. Therefore, the service providing unit  provides a service by using the user information of the user ID.","[Processing Procedure of Service Providing Unit]","Next, step S shown in  will be described in detail with reference to .","First, the service providing unit  of the service providing server  determines whether or not a service use request is received (step S), and when the service use request is not received (No in step S), the service providing unit  repeatedly performs the processing for determining whether or not the service use request is received.","On the other hand, when the service use request is received (Yes in step S), the service providing unit  refers to the session information database  by using the Web session information, and obtains the call session information and the service usage ID (step S).","Then, the service providing unit  refers to the user information database  by using the service usage ID (step S), and when the service usage ID cannot be detected (No in step S), the service providing unit  determines whether or not a user ID and a password are received from the terminal  (step S).","When a user ID and a password are received (Yes in step S), the service providing unit  refers to the user information database  by using the user ID and the password, and performs the authentication (step S).","Then, the service providing unit  determines whether or not the authentication is successfully performed (step S), and when the authentication is successfully performed (Yes in step S), the service providing unit  associates the user ID and the service usage ID with each other by storing the service usage ID obtained in step S in association with the user ID.","Subsequently, the service providing unit  provides a service by using the user information of the user ID (step S), and ends the processing.","By the way, when the service usage ID can be detected in step S (Yes in step S), it is not the first time, so that the service providing unit  identifies the user ID stored in association with the service usage ID, provides a service by using the user information of the user ID (step S), and ends the processing.","When a user ID and a password are not received from the terminal  in step S (No in step S), or when the authentication fails in step S (No in step S), the service providing unit  provides a service without using user information (step S), and ends the processing.","Here, a case example in which a service is provided by using the user information will be described. The service providing unit  of the service providing server  searches the user information database  by using the service usage ID \u201cUSER1-web1-SP-id\u201d transmitted from a certain terminal , and thereby identifies that the user of the terminal  is the user ID \u201cmyuser@web1.sp1.com\u201d registered in the service providing server  as a member in advance.","In the same way, the service providing unit  searches the user information database  by using the service usage ID \u201cUSER3-web1-SP-id\u201d transmitted from a certain terminal , and thereby identifies that the user of the terminal  is the user ID \u201couruser@web1.sp1.com\u201d registered in the service providing server  as a member in advance.","The service providing unit  refers to the session information database  by using the Web session information transmitted from the terminal  and obtains the call session information and the service usage ID, and thereby grasps that the service provided to the user ID \u201cmyuser@web1.sp1.com\u201d and the service provided to the user ID \u201couruser@web1.sp1.com\u201d are associated with each other.","Here, as shown in , it is assumed that the service provided by the service providing unit  is a store search service. The service providing unit  uses the user information indicating that the address of the user ID \u201cmyuser@web1.sp1.com\u201d is \u201c . . . , Musashino City, Tokyo\u201d and the address of the user ID \u201couruser@web1.sp1.com\u201d is \u201c . . . , Chiyoda Ward, Tokyo\u201d, and thereby introduces a store located in \u201cShinjuku Ward\u201d which is in the center of the above addresses.","The service providing unit  displays a name \u201cPatent Taro\u201d of the user ID \u201cmyuser@web1.sp1.com\u201d and a name \u201cPatent Hanako\u201d of the user ID \u201couruser@web1.sp1.com\u201d on a screen on which the service is provided.","As described above, according to the service providing system of the second embodiment, it is possible to provide a high-value-added Web service by associating with the user information registered as a member in advance.","For example, the service providing server  uses the user information indicating that the address of the user ID \u201cmyuser@web1.sp1.com\u201d is \u201c . . . , Musashino City, Tokyo\u201d and the address of the user ID \u201couruser@web1.sp1.com\u201d is \u201c . . . , Chiyoda Ward, Tokyo\u201d, and thereby can introduce a store located in \u201cShinjuku Ward\u201d which is in the center of the above addresses.","According to the second embodiment, a user can use SSO (Single Sign On) by only performing a first log-in operation, and the user can use services as a user of an existing Web service.","So far, as the second embodiment, a case example in which the service providing server  stores the user information and the service usage ID in association with each other and provides a Web service by using the user information has been described. However, the present invention is not limited to this. The present invention can be also applied to a case example in which the session management server  associates the user information and the service usage ID with each other. Hereinafter, the case example to which the present invention is applied will be described as a third embodiment.","First, an outline of the service providing system according to the third embodiment will be described with reference to .  is a diagram for explaining the outline of the service providing system according to the third embodiment.","As shown in , the service providing system according to the third embodiment includes a service usage information database in which the session management server  stores user information related to a user registered in the service providing server  as a member in advance and the service usage ID in association with each other. Although the service providing server  provides a service by using the user information in the same manner as in the second embodiment, it is because the user ID is included in the certificate issued by the session management server .","Specifically, in the same manner as in the second embodiment, first, a communication is established between the terminals  by the SIP, and then a voice call is started between the terminals  (step S).","Next, in the same manner as in the second embodiment, the session management server  issues a certificate to each terminal . However, different from the second embodiment, the session management server  refers to the service usage information database by using the service usage ID, searches for the user ID (step S), and issues a certificate including the call session information and the user ID (step S).","Although not shown in , when a Web service is used for the first time, the session management server  issues a certificate including only the call session information, and each terminal  performs a log-in operation. Then, the service providing server  performs authentication on each terminal , and when the authentication is successfully performed, the service providing server  transmits the user ID to the session management server . At this time, the session management server  stores the service usage ID and the user ID in association with each other into the service usage information database, so that, after the first time, the session management server  can issue a certificate including the call session information and the user ID.","Each terminal  transmits the certificate issued from the session management server  and a service use request to the service providing server  (step S).","On the other hand, when the service providing server  receives the certificate from the terminal  after the first time, the service providing server  refers to the user information database by using the user ID included in the certificate, and searches for the user information (step S).","Then, in the same manner as in the second embodiment, the service providing server  identifies that the call session information pieces transmitted from each terminal  are call session information pieces indicating the same communication, makes Web services provided to each terminal  cooperate with each other, and controls the service provision so that each service is provided according to the searched user information (step S).","Based on this, according to the service providing system of the third embodiment, the service providing server  need not manage the service usage ID, so that a high-value-added Web service can be provided without changing the service providing server .","Next, a configuration of the service providing system according to the third embodiment will be described with reference to .  is a block diagram showing a configuration of the session management server.  is a diagram for explaining the service usage information database.  is a diagram for explaining the certificate.  is a diagram for explaining the session information database.  is a diagram for explaining the user information database. Hereinafter, only a configuration of the service providing system according to the third embodiment, which is different from that according to the first embodiment and the second embodiment, will be described.","As shown in , the session management server  according to the third embodiment further includes a user ID association unit .","The user ID association unit  associates the service usage ID and the user ID with each other. Specifically, when the user ID is transmitted to the user ID association unit  from the service providing server  by being redirected by the terminal , the user ID association unit  stores the service usage ID of the terminal  that has redirected the user ID and the transmitted user ID in association with each other into the service usage information database . For example, as shown in , the user ID association unit  stores the user ID in association with the service usage ID.","In the same manner as in the first embodiment and the second embodiment, the certificate issuing unit  issues a service usage ID and issues a certificate, however, different from the first embodiment and the second embodiment, the certificate issuing unit  issues either a certificate including only the call session information or a certificate including the call session information and the user ID. Specifically, the certificate issuing unit  refers to the service usage information database  and searches for the user ID stored in association with the service usage ID. When the user ID can be detected, the certificate issuing unit  issues a certificate including the call session information and the user ID. On the other hand, when the user ID cannot be detected, the certificate issuing unit  issues a certificate including only the call session information.","For example, as shown in , the certificate issuing unit  issues a certificate including the call session information and the user ID. In , the certificate issuing unit  further adds the service usage ID to the certificate. Even when the service usage ID is included in the certificate, the service providing server  which receives the certificate may not use the service usage ID. Specifically, if there are a plurality of service providing servers , the service providing servers  that manage a user by using the service usage ID and the service providing servers  that do not use the service usage ID may coexist. To cope with such a situation, it is desirable that the service usage ID is included in the certificate and the service providing server  determines whether or not to use the service usage ID.","Different from the first embodiment and the second embodiment, the session information database  of the service providing server  according to the third embodiment stores the call session information, the user ID, and the Web session information in association with each other. For example, the session information database  stores information as shown in .","Different from the second embodiment, the user information database  according to the third embodiment does not store the service usage ID in association with the user information. For example, the user information database  stores information as shown in .","In the same manner as in the second embodiment, the service providing unit  according to the third embodiment provides a service in association with the user information, however, different from the second embodiment, the service providing unit  does not use the service usage ID. Specifically, in the third embodiment, the certificate verification unit  receives a certificate including the call session information and the user ID from the terminal , and the Web session information issuing unit  stores the call session information, the user ID, and the Web session information in association with each other into the session information database .","Therefore, when providing a service, the service providing unit  according to the third embodiment refers to the session information database  by using the Web session information, and obtains the call session information and the user ID. The service providing unit  refers to the user information database  by using the user ID, and obtains the user information stored in association with the user ID. The service providing unit  controls the service provision so that services are provided to the terminal  in accordance with the user information.","Next, a processing procedure of the service providing system according to the third embodiment will be described with reference to .  are sequence diagrams showing the processing procedure of the service providing system according to the third embodiment.  is a flowchart showing a processing procedure of the certificate issuing unit.  shows a processing procedure when the first log-in is performed, and  shows a processing procedure when the second and the following log-ins are performed.","Steps S to S in the processing procedure shown in  correspond to steps S to S in the processing procedure of the service providing system according to the first embodiment. However, in the service providing system according to the third embodiment, the processing of step  is different from the first embodiment. Also, the processing of step S and the following steps is different from the first embodiment.","Steps S to S in the processing procedure shown in  correspond to steps S to S in the processing procedure of the service providing system according to the first embodiment. However, in the service providing system according to the third embodiment, the certificate issued in step S is different from that of the first embodiment. Therefore, in step S and the following steps, information used by each unit is different from that of the first embodiment.","First, step S shown in  will be described in detail with reference to . The certificate issuing unit  of the session management server  determines whether or not the service selection information is received from the terminal  (step S), and when the service selection information is not received (No in step S), the certificate issuing unit  repeatedly performs the processing for determining whether or not the service selection information is received.","On the other hand, when the service selection information is received (Yes in step S), the certificate issuing unit  refers to the service usage information database  by using the SIP-URI that uniquely identifies the terminal  and the service providing server URI that uniquely identifies the service indicated by the service selection information (step S).","When the certificate issuing unit  cannot detect the service usage ID (No in step S), the certificate issuing unit  newly issues a service usage ID (step S), issues a certificate that includes only the call session information (step S), and ends the processing.","On the other hand, when the certificate issuing unit  can detect the service usage ID (Yes in step S), the certificate issuing unit  searches the user ID (step S). When the user ID cannot be detected (No in step S), the certificate issuing unit  issues a certificate that includes only the call session information (step S), and ends the processing.","On the other hand, when the user ID can be detected (Yes in step S), the certificate issuing unit  issues a certificate that includes the call session information and the user ID (step S), and ends the processing.","Return to . Since  is a sequence diagram showing a processing procedure when the first log-in operation is performed, it is assumed that the service usage ID cannot be detected in step S shown in  or the user ID cannot be detected in step S. Therefore, in step S shown in , the certificate issuing unit  issues a certificate that includes only the call session information.","In step S, the service use unit  of the third embodiment performs a log-in operation in which a user ID and a password are transmitted.","When the first log-in operation is performed, the service providing unit  of the service providing server  refers to the user information database  by using the user ID and the password transmitted from the terminal , and authenticates the user of the terminal . When the authentication is successfully performed, different from the second embodiment, the service providing server  transmits the user ID to the session management server  (step S). At this time, the user ID is redirected by the terminal  and transmitted to the session management server .","Then when the user ID is transmitted to the user ID association unit  of the session management server  from the service providing server  by being redirected by the terminal , the user ID association unit  stores the service usage ID of the terminal  that has redirected the user ID and the transmitted user ID in association with each other into the service usage information database  (step S). At this time, the user ID association unit  recognizes that the access in step S and the access in step S are the same communication by some sort of method. For example, the user ID association unit  can recognize that the access in step S and the access in step S are the same communication by using session information provided to the HTTP communication of the terminal  from the session management server . Also, for example, the user ID association unit  can recognize that the access in step S and the access in step S are the same communication if the certificate in step S includes the service usage ID and the service providing server  attaches the service usage ID included in the certificate to the user ID when transmitting the user ID in step S.","On the other hand, the service providing unit  of the service providing server provides a service by using the user information of the user ID (step S).","Since  is a sequence diagram showing a processing procedure when the second and the following log-ins are performed, it is assumed that the service usage ID can be detected in step S shown in  and the user ID can be detected in step S. Therefore, in step S shown in , the certificate issuing unit  issues a certificate that includes the call session information and the user ID.","Then, in step S, the service providing unit  of the service providing server  receives a certificate including the call session information and the user ID from the terminal , and, in step S, the Web session information issuing unit  stores the call session information, the user ID, and the Web session information in association with each other into the session information database .","Therefore, when the service providing unit  provides a service in step S, the service providing unit  refers to the user information database  by using the user ID, obtains the user information stored in association with the user ID, and provides a service to the terminal  by using the user information.","As described above, according to the service providing system of the third embodiment, the service providing server  need not manage the service usage ID, so that a high-value-added Web service can be provided without changing the databases of the service providing server .","In addition, according to the third embodiment, a user can use Single Sign On (SSO) by only performing the first log-in operation, and the user can use services as a user of an existing Web service.","Although the first to the third embodiments of the present invention have been described above, the present invention may be implemented in various different forms other than the embodiments described above.","[Service Usage ID]","In the first to the third embodiments, the method is described in which \u201cUSER1-web1-SP-id\u201d or the like or a random number is used as the service usage ID. However, the present invention is not limited to this. For example, as shown in , information of HTTP-URI format may be used as the service usage ID.","When the information of HTTP-URI format is used as the service usage ID, the service providing server  can access another server by using the HTTP-URI, collect other user information related to the terminal  (or the user of the terminal ), and provide a more high-value-added Web service by using the collected user information.","In the first to the third embodiments, the service usage ID is issued for each combination of a terminal and a service. However, the present invention is not limited to this, and the service usage ID is not necessarily has to be issued for each combination of a terminal and a service if the service usage ID is information by which the service providing server  can identify the terminal.","[Exchange of User Information]","In the first to the third embodiments, a method has been described in which the service providing server  provides a Web service by using the history information accumulated in the service providing server  or the user information registered in advance. However, the present invention is not limited to this, and the user information may be transmitted from the session management server  to the service providing server .","For example, if the session management server  registers address, name, age, place-name, near station, Global Positioning System (GPS) information, post code, and the like in advance as the user information of the terminal , the session management server  may properly include these user information pieces in a certificate to be issued. Then, the service providing server  can obtain the user information in association with the service usage ID included in the certificate, and provide a Web service by using the obtained user information.","The session management server  may ask a user of the terminal  whether or not the user information may be included in the certificate. If the session management server  registers in advance only information of HTTP-URI format as the user information of the terminal , the session management server  may access another server by using the HTTP-URI if allowed by a user, and collect the user information.","On the contrary, the user information may be transmitted from the service providing server  to the session management server . Specifically, if the service providing server  transmits the user information collected in advance to the session management server , for example, when the terminal  accesses other service providing server  via the session management server , the user information received by the session management server  can be used, and a Web service can be provided by using the user information of the other service providing server .","[Selection of Communication Protocol]","Although, in the first to the third embodiments, it is assumed that the first communication is communication established by the SIP and the second communication is HTTP communication, the present invention is not limited to this. Any communication protocol can be used if the session established by the first communication and the session of the second communication are different from each other.","[Call Session Information]","In the first to the third embodiments, it is described that the call session information obtained by the service providing server  has the same value, however, the call session information may not have the same value. The call session information may be a combination of two values or the like if the service providing device can uniquely identify the same communication established by the SIP between the terminals  by the call session information.","[Inquiry]","In the first to the third embodiments, the session management server  issues the call session information and the service usage ID as a certificate, so that the service providing server  confirms that the call session information and the service usage ID are reliable information by verifying the certificate. However, the present invention is not limited to this. For example, it is assumed that session management server  does not issue the call session information and the service usage ID as a certificate but issues the call session information and the service usage ID without change. When the service providing server  receives these information pieces from the terminal , for example, the service providing server  may inquire the session management server  whether the call session information and the service usage ID are reliable information.","[System Configuration or the Like]","In the first to the third embodiments, a method has been described in which the service providing server  provides a service to the terminal  that integrally includes an SIP communication function and an HTTP communication function. However, the present invention is not limited to these embodiments. The present invention can also be applied to a system in which the SIP communication function and the HTTP communication function are respectively included in different terminals (a system which includes an SIP phone including the SIP communication function and an information display terminal including the HTTP communication function) and a system which includes a plurality of SIP phones and a plurality of information display terminals. In both systems mentioned above, a device which performs information transmission between an SIP phone and an information display terminal and identifies an information display terminal to which a service is provided is considered to be additionally required, and for example, a device such as a Home GateWay (HGW) may play the role of the device mentioned above.","For example, each HGW provides browser session information in advance to an information display terminal connected under control of the HGW and stores the browser session information and an SIP phone ID that identifies the SIP phone in association with each other. Under such a configuration, after communication is established between SIP phones by the SIP, each HGW collects the call session information and the SIP phone IDs. Then each HGW detects the browser session information from the SIP phone ID and identifies an information display terminal polling by using the detected browser session information, and thereby identifies an information display terminal used in combination with the SIP phones that have established communication. In this way, each HGW may transmit the call session information to the identification information displayed terminal and redirect to the session management server.","If the SIP phone includes a function corresponding to that of a Web server, the HGW is not necessary. For example, each SIP phone may collect the call session information from the communication established by the SIP, and each information display terminal may poll an SIP phone including a function corresponding to that of a Web server to obtain the call session information from the SIP phone, and then transmit the obtained call session information to the session management server.","A configuration of the transmitting side and a configuration of the receiving side may be different from each other.","In the first to the third embodiments, a case example has been described in which the service providing server  associates the Web services provided to the terminals  with each other. However, the present invention is not limited to this. The present invention can be also applied to a case example in which the service providing server  provides a Web service to the terminal  corresponding to an ad hoc communication relationship between the service providing server  and the terminal .","Specifically, the service providing server  collects the call session information that identifies a communication established between the service providing server  and the terminal  from each terminal . The service providing server  also collects the service usage ID that identifies the terminal  or the user ID that identifies the user of the terminal  from each terminal  as information of a combination with the call session information. The service providing server  identifies the call session information that indicates a communication established between the service providing server  and the terminal  from a plurality of call session information pieces, and, when providing a service to the terminal  that has established the communication identified by the identified call session information, the service providing server  identifies the service usage ID (or user ID) that identify the terminal  or the user of the terminal  from a plurality of service usage IDs (or user IDs). Then, the service providing server  provides a service by using the history information or the user information stored in the storage unit in association with the identified service usage ID (or user ID).","For example, the session management server  issues a certificate to only the terminal , and the terminal  transmits the certificate to the service providing server . Since the service providing server  collects the call session information in the service providing server , the service providing server  verifies the call session information included in the certificate transmitted from the terminal  and the call session information collected in the service providing server . If the verification is successfully performed, the service providing server  issues Web session information and associates the call session information, the service usage ID, and the Web session information with each other. Thereafter, the service providing server  provides a service by using the history information and the user information in the same manner as in the first to the third embodiments.","For example, as shown in , a concierge service in which a recipient recommends a store or goods on the basis of a request of a sender can be implemented. The service providing server  stores the history information of Mr. Patent Taro (information of stores that have been used by Mr. Patent Taro, and the like). When a sender (myuser@web1.sp1.com) makes a call, information of stores that have been used by the sender and recommended information based on the service usage ID of the sender are displayed on a screen of an operator who is the recipient as shown in the right of . The operator can estimate favorites of the user from this information and recommend information suitable to the sender as shown in the left of  by pressing a transmission button.","In the embodiments described above, although a case example in which the session management server  and an SIP server are implemented in the same device has been described, the present invention is not limited to this. The session management server  may be a device different from the SIP server. In this case, the communication between the terminals  is established by an SIP server different from the session management server , and the call session information that identifies the established communication is collected by the session management server .","When the session management server  is a device different from the SIP server, for example, the call session information verification unit  of the session management server  communicates with the SIP server and transmits and receives necessary information, and thereby the verification processing of the call session information verification unit  is implemented. For example, the verification processing is implemented by using \u201cParlay X\u201d which is a standardized Application Programming Interface (API).",{"@attributes":{"id":"p-0218","num":"0217"},"figref":["FIG. 32","FIG. 32","FIG. 12","FIG. 32","FIG. 12","FIG. 12","FIG. 32"],"b":["101","104","110","112","101","104","110","112","131","133","30","113","121"]},"Here, steps S to S shown in  are processing procedure of the verification processing of the call session information verification unit . As shown in step S, the session management server  registers a recipient in an SIP server  in advance. Specifically, the SIP server  transmits notification of step  described below to the session management server  only for users registered in the SIP server  in advance.","For example, when receiving a contract for participating in the service providing system and accepting a user registration, the session management server  registers the URI of the user in the SIP server . In an example which uses \u201cParlay X\u201d, the session management server  transmits \u201cstartCallNotification\u201d with the URI of the recipient as an argument to the SIP server . The \u201cstartCallNotification\u201d is call session information related to the specified URI of the recipient. As the URI, SIP-URI, a telephone number, and the like can be used. Although the registration in step S needs to be performed before the communication is established in step S, the registration need not be performed as processing continued to a series of processing starting from step S. Specifically, for example, even if the registration in step S was performed a year ago, if a corresponding communication is established now for the first time, the notification in step S by the SIP server  is performed.","As described above, regarding a user registered in the SIP server  in step S, when communication whose recipient is the user is established, the SIP server  notifies the session management server  that the communication is established as shown in step S. In an example which uses \u201cParlay X\u201d, the SIP server  transmits \u201cnotifyAnswer\u201d with a URI of a sender, the URI of the recipient, and the call session information of the established communication as arguments to the session management server . The \u201cnotifyAnswer\u201d is a call session information notification when communication is established. Then, when the call session information verification unit  verifies the call session information in step S, the call session information verification unit  verifies whether or not the call session information is the call session information received in step S.","Thereafter, as shown in step S, the session management server  can check a state of the communication established in step S by sending an inquiry to the SIP server  by polling or the like. In an example which uses \u201cParlay X\u201d, the session management server  transmits \u201cgetCallSessionInformation\u201d with the call session information as an argument to the SIP server , and receives a state of the communication as a response to the \u201cgetCallSessionInformation\u201d. The \u201cgetCallSessionInformation\u201d is an acquisition of a session state (during call, end of the call, and the like) related to a call session information identifier. For example, if the communication is disconnected as shown in steps S to S, the SIP server  transmits a state indicating that the communication is disconnected as a response to the inquiry shown in step S.","In this way, when the session management server  receives the state indicating that the communication established by the SIP is disconnected along with the call session information, for example, the session management server  can perform control so that the service provision corresponding to the call session information ends. For example, the session management server  can perform control so that the service being provided in step S in  ends. Also, for example, the session management server  can issue a redirect instruction to change an access destination of the terminal , the service provision to which is controlled to end, to a predetermined URL.","The processing procedure described with reference to  is just an example, and the communication can be implemented by arbitrarily replacing the \u201cParlay X\u201d with another API. For example, in the example described above, in step S, the registration of the recipient is performed in advance, and in step S, the call session information request related to the URI of the recipient is transmitted. However, the processing procedure is not limited to this, and for example, if the API that replaces the \u201cParlay X\u201d has a specification compatible with the call session information request related to URI of not only the recipient but also the sender, the registration in step S may be performed not only for the recipient but also for the sender. Also, for example, if the API that replaces the \u201cParlay X\u201d has a specification in which, when it is detected that the communication is disconnected, the API automatically transmits a state indicating that the communication is disconnected to the session management server , the session management server  need not repeatedly send an inquiry as performed in step S.","The processing procedures (, , and ), specific names, information that includes various data and parameters shown in this description and the drawings can be arbitrarily changed unless otherwise stated.","The constituent elements of the devices shown in the drawings are functionally conceptual, and need not necessarily be physically configured as shown in the drawings. In other words, specific forms of distribution and integration of the devices are not limited to those illustrated in the drawings, and all or part of the devices can be functionally or physically distributed or integrated in arbitrary units according to various loads and the state of use. Moreover, all or an arbitrary part of the processing functions performed in each device can be realized by a CPU and a program analyzed and executed by the CPU, or can be realized as hardware by wired logic.","The service providing method described in the embodiments may be achieved by causing a computer such as a personal computer or a workstation to execute a program prepared in advance. The program can be distributed via a network such as the Internet. The program can be stored in a computer-readable recording medium, such as a hard disk, a flexible disk (FD), a CD-ROM, an MO, and a DVD, and can be executed by being read from the recording medium by the computer.","As described above, the service providing system and the service providing method according to the present invention are effective to provide a service on a network to a terminal, and in particular, suitable to provide a high-value-added Web service associated with various information related to a user as well as to cope with an ad hoc communication relationship.",{"@attributes":{"id":"p-0229","num":"0000"},"ul":{"@attributes":{"id":"ul0001","list-style":"none"},"li":{"@attributes":{"id":"ul0001-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0002","list-style":"none"},"li":[{"@attributes":{"id":"ul0002-0001","num":"0228"},"b":"10"},{"@attributes":{"id":"ul0002-0002","num":"0229"},"b":"11"},{"@attributes":{"id":"ul0002-0003","num":"0230"},"b":"12"},{"@attributes":{"id":"ul0002-0004","num":"0231"},"b":"13"},{"@attributes":{"id":"ul0002-0005","num":"0232"},"b":"14"},{"@attributes":{"id":"ul0002-0006","num":"0233"},"b":"15"},{"@attributes":{"id":"ul0002-0007","num":"0234"},"b":"16"},{"@attributes":{"id":"ul0002-0008","num":"0235"},"b":"17"},{"@attributes":{"id":"ul0002-0009","num":"0236"},"b":"20"},{"@attributes":{"id":"ul0002-0010","num":"0237"},"b":"21"},{"@attributes":{"id":"ul0002-0011","num":"0238"},"b":"22"},{"@attributes":{"id":"ul0002-0012","num":"0239"},"b":"23"},{"@attributes":{"id":"ul0002-0013","num":"0240"},"b":"24"},{"@attributes":{"id":"ul0002-0014","num":"0241"},"b":"25"},{"@attributes":{"id":"ul0002-0015","num":"0242"},"b":"26"},{"@attributes":{"id":"ul0002-0016","num":"0243"},"b":"30"},{"@attributes":{"id":"ul0002-0017","num":"0244"},"b":"31"},{"@attributes":{"id":"ul0002-0018","num":"0245"},"b":"32"},{"@attributes":{"id":"ul0002-0019","num":"0246"},"b":"33"},{"@attributes":{"id":"ul0002-0020","num":"0247"},"b":"34"}]}}}}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF DRAWINGS","p":[{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 16"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 17"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 18"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 19"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 20"},{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 21"},{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIG. 22"},{"@attributes":{"id":"p-0035","num":"0034"},"figref":"FIG. 23"},{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIG. 24"},{"@attributes":{"id":"p-0037","num":"0036"},"figref":"FIG. 25"},{"@attributes":{"id":"p-0038","num":"0037"},"figref":"FIG. 26"},{"@attributes":{"id":"p-0039","num":"0038"},"figref":"FIG. 27"},{"@attributes":{"id":"p-0040","num":"0039"},"figref":"FIG. 28"},{"@attributes":{"id":"p-0041","num":"0040"},"figref":"FIG. 29"},{"@attributes":{"id":"p-0042","num":"0041"},"figref":"FIG. 30"},{"@attributes":{"id":"p-0043","num":"0042"},"figref":"FIG. 31"},{"@attributes":{"id":"p-0044","num":"0043"},"figref":"FIG. 32"}]},"DETDESC":[{},{}]}
