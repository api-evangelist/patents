---
title: Method and system for implementing IS-IS protocol redundancy
abstract: The present invention relates to a method and system for implementing link level protocol redundancy in a router. In particular, the invention relates to providing redundancy of the Intermediate System Intra-domain Routing Information Exchange Protocol (IS-IS) routing protocol. An active processor provides IS-IS operations. In the present invention, a standby processor is coupled to the active processor. During the initial synchronization, all protocol information from the active processor is forwarded to the standby processor. The protocol information can include IS-IS global protocol information, IS-IS configuration information, IS-IS adjacencies information, IS-IS interface information and link state packet information. Thereafter, any updates of protocol information are immediately forwarded to the standby processor in an orderly and controlled manner. Upon failure of the active processor, the router is switched to the standby processor and all IS-IS protocol operations are performed on what used to be the standby processor.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07155632&OS=07155632&RS=07155632
owner: Nokia, Inc.
number: 07155632
owner_city: Irving
owner_country: US
publication_date: 20020627
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION"],"p":["1. Field of the Invention","This invention relates to network communications and more particularly to redundancy of the routing protocol Intermediate System to Intermediate System Intra-domain Routing Information Exchange (\u201cIS-IS\u201d) and apparatus for protecting protocol services of a router and neighbor routers from failure within the router.","2. Related Art","Data packets progress through data networks by being sent from one machine to another towards their destination. Routers or other types of switches are used to route the data packets over one or more links between a data source, such as a customer's computer connected to the data network, and a destination. Routing protocols such as Intermediate System to Intermediate System Intra-domain Routing Information Exchange Protocol (\u201cIS-IS\u201d), Border Gateway Protocols (\u201cBGP\u201d), Routing Information Protocol (\u201cRIP\u201d), and Open Shortest Path First Protocol (\u201cOSPF\u201d) enable each machine to understand which other machine is the \u201cnext hop\u201d that a packet should take towards its destination. Routers use the routing protocols to construct routing tables. Thereafter, when a router receives a data packet and has to make a forwarding decision, the router \u201clooks up\u201d the next hop machine in the routing table. Conventionally, the routers look up the routing table using the destination IP address in the data packet as an index.","IS-IS is a link state protocol which stores information about the state of links and uses that data to select paths. IS-IS is defined by the International Standard Organization as described in ANS1 X353.3\/87-150R, 1987 and RFC-1074, which references are incorporated by references into this application. IS-IS specifies two level hierarchical routing in which Level 1 routing deals with routing within an area and Level 2 routing deals with routing between different areas. Each node maintains a complete topology of the whole network. Route computation is based on a modified version of Dijkstra's Shortest Path First (SPF) algorithm. A process referred to as configuration defines how routers learn about each other.","When conventional IP edge routers lose their primary circuitry and operation falls back to a redundant controller, a five to fifteen minute outage ensues while the router relearns the routing states and packet forwarding tables. In order to enhance the reliability of the router device, it is important to multiplex the above-mentioned route calculation units. The multiplex router device includes a plurality of route calculation units, and always has one route calculation unit placed in the active mode to make it execute an ordinary process while keeping the remaining route calculation units in a standby mode. When the route calculation unit in the active mode runs into trouble, the multiplex router device brings one of the waiting route calculation units into the active mode (this is referred to as a system switchover of route calculation units), and the one other route calculation unit takes over and continues to execute the process that was previously being executed by the route calculation unit in trouble.","It is desirable to provide high network availability by providing improved redundancy which can be implemented as a link level protocol running over IP having a backup link level process in total real time synchronization with an active one in order to enable an expeditious switchover when a failure occurs on the active control card.","The present invention relates to a method and system for implementing link level protocol redundancy in a router. In particular, the invention relates to providing redundancy of the Intermediate System to Intermediate System (IS-IS) Intra-domain Routing Information Exchange Protocol routing protocol. An active processor provides IS-IS operations. In the present invention, a standby processor is coupled to the active processor. During the initial synchronization, all protocol information from the active processor is forwarded to the standby processor. The protocol information can include IS-IS global protocol information, IS-IS configuration information, IS-IS adjacencies information, IS-IS interface information and link state packet information. Thereafter, any updates of protocol information are immediately forwarded to the standby processor in an orderly and controlled manner. Upon failure of the active processor, the Standby controller takes over as the Active controller. All IS-IS protocol operations are performed on the new Active processor. In the present invention, all states of the protocol immediately function as if a failure had not occurred. Neighbor routers will not notice any difference after switch-over, and no additional information is needed from neighbor routers after the switch-over. Accordingly, the router's forwarding capability will remain unaffected.","In the present invention the Standby IS-IS processor stays in a highly synchronized state with the Active IS-IS processor, referred to as a hot-standby state. Accordingly, an expeditious switchover to the Standby processor occurs when the Active processor fails.","The invention will be more fully described by reference to the following drawings.","Reference will now be made in greater detail to a preferred embodiment of the invention, an example of which is illustrated in the accompanying drawings. Wherever possible, the same reference numerals will be used throughout the drawings and the description to refer to the same or like parts.",{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 1","b":["10","11","12","12","13","14"]},"Standby IS-IS control card  is removably coupled to router . In the absence of standby IS-IS control card , active IS-IS control card  operates in a non-redundant mode similar to a conventional IS-IS router. Active IS-IS control card  communicates protocol information  over communication link  to standby IS-IS control card . Preferably, communication link  is a fast and reliable communication channel. For example, communication link  can be a duplex Ethernet. The same redundancy software for IS-IS operations  runs on both active IS-IS control card  and standby IS-IS control card . Redundancy software for IS-IS operations  controls updating of protocol information  between active IS-IS control card  and standby IS-IS control card  and distinguishes between an active mode and a backup mode using system state information, as described in more detail below.","One embodiment of the present invention utilizes IS-IS protocols running on the Nokia ASR2000 router (or, alternatively, the ASR2020). The Nokia ASR2000 and ASR2020 technical manuals are incorporated herein by reference as if fully set out. Active IS-IS control card  and standby IS-IS control card  are processors which are coupled to a line card and ASIC driver of router .","After standby IS-IS control card  is coupled to router , an initial synchronization is performed for transferring provisioning data from running active IS-IS control card  to standby IS-IS control card  using redundancy software for IS-IS operations . After the initial synchronization, an IS-IS process running in the redundancy software for IS-IS operations  operates in an incremental updating mode. Updates can be posted to active IS-IS control card . All updates are forwarded to standby IS-IS control card . Standby IS-IS control card  receives all LSP messages and updates in order to maintain total real time synchronization between active IS-IS control card  and standby IS-IS control card . Accordingly, standby IS-IS control card  mirrors active IS-IS control card  for implementing redundancy. Standby IS-IS control card  has complete information about configuration, global state and non-configuration information, current state of each circuit, current state of adjacency with each neighbor and current LSP database, as described in detail below. In this state, referred to as hot-standby, active IS-IS control card  and standby IS-IS control card  maintain a substantially synchronous state. Thereafter, if a failure of active IS-IS control card  occurs, standby IS-IS control card  will become active and be capable of immediately taking over all operations which were previously performed by active IS-IS control card .",{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 2","b":["19","12","18","20","12","15","18","20","21","22","23","21","21","20","18","21","21","22"],"i":["a ","a ","a ","a","a ","b ","b ","b ","a ","b. "]},"IS-IS task , include shortest path first (SPF) module  for computing the shortest route to all destinations. The computed shortest routes are stored in route table manager (RTM) . RTM  communicates with route distribution manager (RDM) . RDM  distributes routes from RTM  to other routing protocols . Timer  provides timer service to IS-IS tasks , . Timer triggered events of timer  can include, for example, sending of a Hello packet, timing of an adjacency receipt of a Hello packet from a neighbor and timing a lifetime of a LSP. Active IS-IS control card  and standby IS-IS control card  process LSP packets and calculates the shortest path first with SPF module  which decides the shortest path from a router to a destination network by considering cost.","Active IS-IS control card  can send LSPs to the line card for transmission to neighbor routers. Standby IS-IS control card  does not send any LSP packets to the line card for transmission to neighbor routers. Active IS-IS control card  and standby IS-IS control card  send updates to RTM . Timer  runs on IS-IS standby control card  and does not trigger any timeouts unless the standby IS-IS control card  becomes the active card. An active state is associated with active IS-IS control card . A standby state is associated with standby IS-IS control card . A switchover from active IS-IS control card  to standby IS-IS control card  will occur upon failure of active IS-IS control card . When a switchover occurs, standby IS-IS control card  changes its state to active and takes over all IS-IS operations. Standby IS-IS control card  resumes any suppressed IS-IS actions and begins sending LSPs to the line card.","During the initial synchronization, IS-IS task on standby IS-IS control card  contacts IS-IS task on active IS-IS control card  for retrieving task information. IS-IS task on active IS-IS control card  automatically processes link state packet (LSP) information, calculates routes, and stores them in RTM . Active IS-IS control card  marks corresponding internal states and transfers IS-IS global protocol information , IS-IS interface information , IS-IS adjacencies information , link state packet information  and status information  to standby IS-IS control card .",{"@attributes":{"id":"p-0026","num":"0025"},"figref":["FIG. 3","FIG. 4"],"b":["40","12","18","11","12","40","50","30","12","18","30","11","30","12","18","16"]},"In block , IS-IS interface level protocol information  is transferred for each interface from active IS-IS control card  to standby IS-IS control card . IS-IS circuits (as the interfaces are conventionally referred to) map one on one to the logical interface of the system, which in turn map one or more multiple on one to the physical interfaces of the system. For example, IS-IS interface level protocol information  includes information on configuration of circuits and the state of each of the circuits as either enabled or disabled. IS-IS interface level protocol information  can be communicated from active IS-IS control card  to standby control card  through communication link  using the redundancy API.","In block , IS-IS adjacencies information  is transferred from active IS-IS control card  to standby IS-IS control card . IS-IS adjacencies information  includes information about all adjacencies, which have been established by active IS-IS control card  with the neighbors. IS-IS adjacencies information  is sent from active IS-IS control card  for adjacencies which have been established and are in an up state. IS-IS adjacencies information  can be communicated from active IS-IS control card  to standby control card  through communication link  using the redundancy API. For example, IS-IS adjacencies information  about one or more adjacencies can be forwarded in a single message with redundancy API.","In block , link state packet information  is transferred from active IS-IS control card  to standby IS-IS control card . In block , status information is transferred from active IS-IS control card  to standby IS-IS control card , as described below.","Referring to , in block  LSP information  received at active IS-IS control card  are forwarded to standby control card . In IS-IS, LSPs are flooded to the entire area, for Level  IS, or domain, for Level  IS, and are stored in each IS in LSP database.  illustrates a schematic diagram of level  routing and and level  routing . LSP information can be forwarded from active IS-IS control card  to standby IS-IS control card  using a redundancy application programming interface (API).","Thereafter, in block  initial redundancy data is updated upon updating of changes to initial redundancy in active IS-IS control card . Updates of initial redundancy data can include incremental updates of global information, interface information and adjacency information. Updates of adjacency information can include forming of a new adjacency with a neighbor, deleting an established adjacency with a neighbor and refreshing of the expiration timer of an existing adjacency. The adjacency information of a single adjacency is forwarded to standby IS-IS control card .","In block , status information  is communicated from active IS-IS control card  to standby IS-IS control card . Status information can include status on the start of running of the Shortest Path First (SPF) algorithm in module  algorithm in active IS-IS control card , timer information of timer  for running of the SPF algorithm of active IS-IS control card  and ending of running of the SPF algorithm in SPF module  of active IS-IS control card . For example, if standby IS-IS control card  receives information about the start but not about the end of running the SPF algorithm in SPF module  before it is switched over to running as an active card, the routes being established by the SPF algorithm were not applied to RTM . Additional communication of status information can be determined from timer triggered events of timer .","It is to be understood that the above-described embodiments are illustrative of only a few of the many possible specific embodiments which can represent applications of the principles of the invention. Numerous and varied other arrangements can be readily devised in accordance with these principles by those skilled in the art without departing from the spirit and scope of the invention."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 5"}]},"DETDESC":[{},{}]}
