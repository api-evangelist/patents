---
title: Plug and play reconfigurable USB interface for industrial fieldbus network access
abstract: A reconfigurable interface device for providing access to a plurality of fieldbus networks. The interface device includes a reconfigurable circuit which provides access to a selected fieldbus network from among several optional fieldbus networks. According to an embodiment, the reconfigurable circuit includes a plurality of media units, each media unit providing access to one of the several optional fieldbus networks, and a switch unit coupled to each of the plurality of media units, the switch unit activating a media unit corresponding to the selected fieldbus network, and deactivating remaining media units. A reconfigurable control device is provided for controlling and monitoring a plurality of fieldbus networks. The control device includes a host, having a server and non-volatile memory, and a reconfigurable interface device having a reconfigurable circuit. The non-volatile memory stores firmwares for reconfiguring the reconfigurable circuit in accordance with each of the several optional fieldbus networks.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=06839790&OS=06839790&RS=06839790
owner: SMAR Research Corporation
number: 06839790
owner_city: Holbrook
owner_country: US
publication_date: 20020621
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["FIELD OF THE INVENTION","BACKGROUND INFORMATION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION"],"p":["The present invention relates to industrial process control and monitoring systems. More particularly, the present invention relates to a plug and play USB interface that can be reconfigured to provide access to several fieldbus networks that operate using different communication protocols.","Industrial process control systems are widely applied in industrial plants, factories, and other field sites where they are used to coordinate and automate multiple operations such as sensing, monitoring, communication and device actuation. In these control systems, control devices both control and monitor spatially distributed field devices such as sensors, valves, and switches by communicating messages and data with these devices over specialized fieldbus networks using communication protocols particular to each type of fieldbus network. Within a given fieldbus network, the control devices and the field devices are typically configured to communicate with and respond to a single fieldbus protocol corresponding to the particular network.","The control devices may be implemented as microprocessor-based controllers, computers or workstations that control processes by communicating control commands to the fieldbus devices. The control commands may be implemented as software, and can be adapted or modified without affecting any of the hardware of the process control system. For example, a process engineer working from a workstation computer might develop a program routine that causes a control device to request a measurement of a fluid level at a level sensor field device, compare the measured level with a pre-defined threshold level, and then actuate a feed valve based on whether the measured level is above or below the pre-defined threshold. The threshold level may be pre-set or modified by the process engineer through a software application running on the workstation. To accomplish this high level of control and flexibility, it is crucial that software commands at the workstation be correctly adapted for the appropriate fieldbus network and protocol to which the control device and level sensor are coupled.","Currently, there are three predominant fieldbus network platforms: Foundation fieldbus, Profibus and the Hart network. Historically, each of these fieldbus network platforms was developed at slightly different times and designed for somewhat different functionality. Consequently, extensive investment and infrastructure has been allocated to each of the three dominant platforms, with the result that many process control systems and industrial sites include a combination of fieldbus network platforms. While each of the fieldbus networks generally use twisted-pair cables, their respective physical layers are not identical, and their respective transaction mechanisms (e.g., master\/slave, multi-master\/multi-slave) are quite distinct from one another. To integrate control operations at such a site, the control devices need to be able to interface with and communicate over the various pre-installed fieldbus networks at the site using the appropriate protocol.","While there are several single-network interfaces available which allow an operator to connect a control device to a Foundation Fieldbus network or a Profibus network, for example, using a Serial bus or a PCMCIA connection, such interfaces do not offer the ability to adaptively change connectivity between different fieldbus platforms. Accordingly, when an operator wishes to access different fieldbus networks, the interface must be manually switched. Protocol gateways or mapping devices have also been proposed, which translate messages from one protocol or device description language into another. For example, U.S. Pat. No. 5,923,557 to Eidson describes a mapper device that translates instructions from an application program into multiple fieldbus protocols at a fieldbus network interface. However, in the system described, a separate mapper is required for each of the multiple fieldbus networks to which an interface is desired, making this a somewhat cumbersome solution for generalized access to fieldbus networks.","What is therefore needed is a single standard interface that can be used to provide access to the most prevalent existing fieldbus networks from any common workstation, server, personal digital assistant, programmable controller, or similar microprocessor-based control device.","To meet the aforementioned need, the present invention provides a reconfigurable interface device for providing access to a plurality of fieldbus networks that includes a reconfigurable circuit, which is reconfigurable to provide access to a selected fieldbus network from among several optional fieldbus networks.","According to an embodiment of the present invention, the reconfigurable circuit includes a plurality of media units, each media unit providing access to one of the several optional fieldbus networks, and a switch unit coupled to each of the plurality of media units, which activates the media unit corresponding to the selected fieldbus network, and deactivates the remaining, unselected media units.","According to a further embodiment, the reconfigurable circuit includes a Hart media unit, a Profibus media unit and a Foundation fieldbus media unit.","The present invention also provides a plug-and-play reconfigurable interface device for providing an interface between a host control device and a plurality of fieldbus networks that includes a reconfigurable circuit which is reconfigurable to provide access to a selected fieldbus network from among several optional fieldbus networks. The reconfigurable circuit includes a plurality of media units, each of which provide access to one of the several optional fieldbus networks, and a switch unit coupled to each of the plurality of media units for activating a media unit corresponding to the selected fieldbus network and deactivating remaining media units. The reconfigurable circuit also includes a microprocessor switchably coupled to the plurality of media units, which is adapted to receive firmware from the host control device having instructions for reconfiguring the microprocessor to enable communication over the selected fieldbus network.","The present invention also provides a reconfigurable USB interface for providing access to a plurality of fieldbus networks including a reconfigurable circuit that is reconfigurable to provide access to a selected fieldbus network from among several optional fieldbus networks, and a USB port which receives selection and control information over a USB bus and provides the selection and control information to the reconfigurable circuit.","The present invention further provides a reconfigurable control device for controlling and monitoring a plurality of fieldbus networks including a host, having a server and non-volatile memory, and a reconfigurable interface device coupled to the host for providing access to a plurality of fieldbus networks. The interface device includes a reconfigurable circuit for providing access to a fieldbus network selected by the host from among several optional fieldbus networks. The non-volatile memory stores firmwares for reconfiguring the reconfigurable circuit in accordance with each of the several optional fieldbus networks.","The present invention further provides a reconfigurable system for controlling and monitoring a fieldbus network including a client device having a microprocessor that executes application software for selecting a fieldbus network for control and monitoring operations, a host including a server and non-volatile memory, that provides an application program interface to the client device and communicating instructions and data to the client through the application program interface. The system further includes a reconfigurable interface device coupled to the host that provides access to a plurality of fieldbus networks, the interface device being reconfigurable to provide access to the selected fieldbus network from among several optional fieldbus networks.","The present invention further provides a method for enabling communication with field devices on a selected fieldbus network using a reconfigurable interface device. According to an embodiment, a fieldbus network is selected from among several optional fieldbus networks for communication and an interface device is reconfigured to provide access to the selected fieldbus network.","The present invention further provides a computer-readable medium for storing instructions for causing an interface device to fieldbus networks to reconfigure to provide access to a selected fieldbus network and to communicate with field devices on the selected fieldbus network.","The term \u201cclient\u201d as used herein means a computer, workstation, programmable controller or other device having processing capability, which is adapted to execute a process control application (application program) on a Windows\u2122, Unix, PALM, VxWorks or other operating system and to communicate with a host using an application program interface (API). The client may communicate with the host remotely over a distributed network such as the Internet, or by a direct local area network (LAN) connection.","The term \u201chost\u201d as used herein means a computer, workstation, programmable controller or other device having processing capability that includes a server program and downloadable firmware.","The term \u201cserver\u201d as used herein means a program run at a host that is adapted to provide application program interfaces for a client process control application, and further adapted to provide downloaded firmware to an interface device.",{"@attributes":{"id":"P-00024","num":"00024"},"figref":"FIG. 1","b":["1","2","4","5","5","2","10","15","5","10","2","5"],"i":"a, b, c, d"},{"@attributes":{"id":"P-00025","num":"00025"},"figref":["FIG. 2","FIG. 1"],"b":["3","2","2","20","3","21","21","5","3","2","29","20","29","29","2"]},"The USB hub  is connected via a USB bus  to a USB controller  which contains electronic components for communicating and processing USB data frames. According to the depicted embodiment, the USB controller  is included within the interface device . However, as noted above with respect to the USB hub , the USB controller  may be co-located with the hub in a separate module. Within the interface device , the USB controller  transmits and receives USB frames to a local central processing unit (CPU)  over a USB\/CPU bus . Through these connections, according to the depicted embodiment, firmware for reconfiguring the interface device  can be downloaded to the server  at the host , then transmitted from the server to the USB hub , passed on from the USB hub  to the USB controller , which incorporates the firmware information in USB frames, and then transmitted from the USB controller to the CPU  of the interface device. The USB controller  is also coupled to a power unit  through a USB bus connection .","The interface device  is functionally divided into a control unit , that includes the CPU , and a media section . The control unit  includes a local memory unit  and a local timer unit  coupled to the CPU . The memory unit  is used to locally store the firmware that is sent to the CPU for reconfiguration purposes and any other data as required. The timer  can be used to generate local timing signals on an extremely rapid time scale (on the order of microseconds) to enable direct, immediate responses to be communicated from the interface device to field devices in accordance with a selected fieldbus protocol.","The firmware received by the CPU and stored in the memory unit  includes algorithms (engines) for communicating in the appropriate fieldbus protocol, and specifically includes the data link layer of the selected fieldbus network which provides, among other features, for media access to the communication channel (token passing, master\/slave response) and data packet formation. Upon executing the engine for a new fieldbus network, the CPU  transmits a signal along a media selection bus  to a switch unit . According to one embodiment, the switch unit  is a multiplexer which selectively opens a channel to, or activates, one of several media units e.g., , ,  and simultaneously turns off, or deactivates, the remaining media units. It is noted that in addition to, or instead of, a multiplexing circuit, the media section  may include analog and digital switches, programmable logic devices (PLDs), field programmable gate arrays (FPGAs), relays and\/or other electronic elements as known in the art as components of selectively reconfigurable electronic circuitry. The switch unit  connects the CPU  to whichever of the media units , ,  has been selected to a control bus  (which includes both a data and address bus) and also connects the selected media unit to the fieldbus network .","As shown, the media units include a Hart media unit , a Profibus media unit , and a Foundation Fieldbus unit . As discussed above, these three fieldbus platforms are the most predominant fieldbus platforms in current and projected use. However, the present invention is not necessarily limited for use with respect to these three platforms, and other media units can be incorporated to provide for communication with other fieldbus network platforms in accordance with the present invention.","Each media unit , , , provides a particular physical layer appropriate for the particular corresponding fieldbus network protocol. The physical layer in this context denotes both the physical conduit used to transmit signals between the interface device  and the devices  of the fieldbus network , such as RS 232 or RS 485 twisted pair cables, and also the signaling method employed and the various associated voltage and current levels used for signaling in the various media units. In this regard, the Hart media unit  includes circuitry for providing simultaneous analog and digital signaling and frequency shift key modulation for encoding. Notably, the Hart media unit  does not provide power to the field devices over the fieldbus network. The Profibus media unit  provides for two separate all-digital communication modes, Profibus DP and Profibus PA. Profibus DP operates at up to 500 kbits\/s over an RS 485 twisted-pair wire that includes a balanced differential pair. Profibus PA operates on the standard IEC 1158-2 signaling on RS 232 twisted pair (4-20 mA) physical layer which operates at lower data rates but permits intrinsic safety and bus-powered devices.","The Foundation media unit , like Profibus PA, can operate using IEC 1158-2 signaling, but the Foundation media unit also offers a 31.25-kbps H1 bus option, as well as higher speed 1.0 and 2.5-Mbps options. The 31.25-kbps version uses a Manchester encoding scheme (\u00b110 mA dc into 150 ohm load) that can use existing 4-20 mA twisted pair wiring. With an intrinsically safe IS barrier, the 31.25-kbps option supports intrinsic safety. The dc supply voltage ranges from 9 to 32 volts, but may be restricted to the barrier rating. Stubs or spurs are allowed, from 1 meter to 120 meters depending on the number of devices on the bus. Each H1 segment supports as many as 32 field devices with a maximum distance of 1900 m between devices. The 1.0 and 2.5-Mbps options both offer voltage mode signaling. The 1.0-Mbps option also allows current mode signaling. The voltage mode method delivers \u00b160 mA dc into a 75-Ohm equivalent load, while the current mode signaling method modulates the fieldbus signal on top of a 16-kHz ac power signal.","As noted above, the firmware engine associated with a given fieldbus network platform provides the corresponding data link layer for the selected media unit , , . For instance, for communication using the Profibus DP mode of media unit , a Profibus engine defines multi-master and multi-slave communication based on a real-time asynchronous bus principle, while for the Foundation media unit , a Foundation engine may provide for a centralized, deterministic token-passing mechanism using Foundation fieldbus H1 bus arbitration.","Power unit , which derives power from the USB bus connection , provides a voltage source for the CPU  and to the media units , , . Using appropriate switches and relays as known in the art, the power unit supplies power only to the selected media unit, and powers down the unselected or deselected media units. For example, if the interface device  is reconfigured from a Foundation fieldbus platform to a Profibus platform, the power unit  will turn off the power supply to the Foundation media unit  and switch on power to the Profibus media unit . Additionally, the turned off media units can be further electrically isolated from connection to the fieldbus network  by switches or gates. Depending on the signal supplied to the switch unit  from the CPU , the switch unit  can couple the power unit  to the fieldbus network  via controllable switch . This may occur, as explained above, when the Profibus  or Foundation fieldbus  media units and networks are employed, as for these networks, both power and data are transmitted along the fieldbus from central control devices to peripheral field devices.","The following describes an exemplary interface reconfiguration process according to the present invention with reference to FIG. . At an initial stage, a process engineer (user) working at a client workstation may wish to change a parameter used by or stored at a field device that operates on a Profibus network. As shown in , the application program at the client may provide a user-friendly graphical interface  to facilitate reconfiguration including a screen or dialog box , which allows the user to select one of several fieldbus platform buttons , , , . As shown, Foundation Fieldbus is currently selected as shown by the darkened circle. By clicking on the Profibus button  and then clicking the \u2018OK\u2019 button (), the user causes a parameter to be sent from the client to the host using an API called e.g., \u201cConnectToProfibus\u201d () which identifies Profibus as the newly desired fieldbus network platform.","The host server receives the API parameter, then locates firmware associated with the Profibus protocol in its downloadable firmware database (). The appropriate firmware is then downloaded to the interface device via a USB connection (). Using the firmware, the CPU of the interface device executes a Profibus engine () and connects to the Profibus media unit (). Simultaneously, the client application begins communicating with the host server using Profibus functions. At this stage or before, the interface device may be connected to a Profibus network (). The Profibus engine sends out messages on the Profibus network to locate field devices (), and upon detection () of the particular field device, the engine executes the function of changing the parameter used by the field device. The reconfiguration process can be similarly used for monitoring and extracting information from field devices on a specific fieldbus network.","A main advantage of the interface device and reconfiguration process according to the present invention is that a user can reconfigure the device in a plug-and-play manner by simply attaching the interface device to a fieldbus network and executing a command on a user interface screen for initiating reconfiguration of the device. Once the command is entered, an automatic reconfiguration process takes place that requires no further user intervention.","As can be clearly discerned, the present invention also provides several further advantages. The interface device incorporates hardware to accommodate several fieldbus protocols. It is therefore not necessary to exchange cables or interfaces to accommodate the different protocols. Since the USB protocol is included in nearly all computer architectures and operational systems, the interface device can be readily coupled with to most host server systems. Furthermore, use of the USB protocol between the host and interface is advantageous because USB is a plug-and-play protocol having high data transmission rates.","Additionally, all power for the interface device itself can be acquired from the USB bus, so the interface does not need to include batteries and external sources to supply its own power. Consequently, the physical structure of the interface device can be light and portable. Several devices can be plugged in series to the interface to create a fieldbus network over the USB bus.","In the foregoing description, the invention has been described with reference to a number of examples that are not to be considered limiting. Rather, it is to be understood and expected that variations in the principles of the interface device, fieldbus network interface assembly, and reconfiguration methods herein disclosed may be made by one skilled in the art and it is intended that such modifications, changes, and\/or substitutions are to be included within the scope of the present invention as set forth in the appended claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"P-00017","num":"00017"},"figref":"FIG. 1"},{"@attributes":{"id":"P-00018","num":"00018"},"figref":"FIG. 2"},{"@attributes":{"id":"P-00019","num":"00019"},"figref":"FIG. 3"},{"@attributes":{"id":"P-00020","num":"00020"},"figref":"FIG. 4"}]},"DETDESC":[{},{}]}
