---
title: Recording apparatus, recording method and recording medium
abstract: This invention relates to a recording apparatus for recording digital data compressively encoded by use of a predetermined scheme having: receiving means for receiving a transport stream from an external unit connected through a digital bus; extracting means for extracting from the received transport stream a transport stream packet having a predetermined packet identification (PID); acquiring means for acquiring the compressively encoded digital data arranged in the transport stream packet extracted by the extracting means; and recording means for recording the acquired digital data onto a predetermined recording medium.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07031781&OS=07031781&RS=07031781
owner: Sony Corporation
number: 07031781
owner_city: Tokyo
owner_country: JP
publication_date: 20000518
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF PREFERRED EMBODIMENTS"],"p":["The present invention relates generally to a recording apparatus, a recording method, and a recording medium and, more particularly, to a recording apparatus, a recording method, and a recording medium that are suitable for use in recording compressed and encoded audio data provided by downloading services.","Recently, digital satellite broadcasting such as SKY PerfectTV (a trademark) for example is becoming widespread. Compared with conventional analog broadcasting, digital satellite broadcasting can transmit signals of higher quality and provide multichannel service. The digital satellite service like this provides many channels dedicated to sports, movies, music, news and so on. Among these dedicated channels, the music channel is one of most popular channels.","Viewing (including listening to) such a music channel may make viewers want to buy CDs for example of the music they listened on the channel. It is convenient for viewers if they can download the music while viewing it on the music channel. To realize this, the applicant hereof proposed a system, as Japanese Patent Application No. Hei 10-201731 for example, in which music data encoded by use of ATRAC (Adaptive Transform Acoustic Coding) are multiplexed on the main broadcast signals (video signal and audio signal) of the music channel for distribution and viewers who bought (or downloaded) the ATRAC data are billed.","It should be noted that ATRAC is a coding scheme for use in recording audio data onto MD (Mini Disc) (trademark) recording media.","Meanwhile, no specific proposal has been made for an MD recording apparatus for constituting the above-mentioned system, namely an apparatus for recording ATRAC-based audio data onto an MD without decoding.","It is therefore an object of the present invention to provide a recording apparatus, a recording method, and a recording medium that are capable of recording ATRAC-based audio data without decoding the same.","In carrying out the invention and according to one aspect thereof, there is provided a recording apparatus for recording digital data compressively encoded by use of a predetermined scheme comprising: receiving means for receiving a transport stream from an external unit connected through a digital bus; extracting means for extracting from the received transport stream a transport stream packet having a predetermined packet identification (PID); acquiring means for acquiring the compressively encoded digital data arranged in the transport stream packet extracted by the extracting means; and recording means for recording the acquired digital data onto a predetermined recording medium.","In carrying out the invention and according to another aspect thereof, there is provided the recording apparatus further comprising a reproducing means for reproducing the audio data recorded on the predetermined recording medium and compressively encoded by use of the predetermined scheme.","In carrying out the invention and according to still another aspect thereof, there is provided a recording method for a recording apparatus for recording digital data compressively encoded by use of a predetermined scheme, comprising the steps of: receiving a transport stream from an external unit connected through a digital bus; extracting from the received transport stream a transport stream packet having a predetermined packet identification (PID); acquiring the compressively encoded digital data arranged in the transport stream packet extracted by the extracting means; and recording the acquired digital data onto a predetermined recording medium.","In carrying out the invention and according to yet another aspect thereof, there is provided a recording medium storing a computer program for use in a recording method for a recording apparatus for recording digital data compressively encoded by use of a predetermined scheme, the computer program comprising the steps of: receiving a transport stream from an external unit connected through a digital bus; extracting from the received transport stream a transport stream packet having a predetermined packet identification (PID); acquiring the compressively encoded digital data arranged in the transport stream packet extracted by the extracting means; and recording the acquired digital data onto a predetermined recording medium.","According to the above-mentioned recording apparatus, recording method, and recording medium, an inputted partial transport stream is converted into a transport stream and a transport stream packet having a predetermined PID is extracted from the this transport stream. Extracted predetermined information arranged in the transport stream packet is detected. On the basis of the detected predetermined information, the transport stream packet is checked. According to the result of this checking, the extraction of the transport stream packet is controlled. Further, the compressively encoded audio data arranged in the extracted transport stream packet are acquired to be recorded on the predetermined recording medium.","This invention will be described in further detail by way of example with reference to the accompanying drawings.","Now, referring to , there is shown an exemplary configuration of an EMD (Electronic Music Distribution) system practiced as one preferred embodiment of the present invention. In the EMD system, a transmitter  on the broadcasting station side multiplexes mainly a broadcast signal (composed of video signal and audio signals compressed by MPEG-2 (Moving Picture Experts Group 2)) with music data for downloading (MPEG audio data and ATRAC data) associate with a music program for example, scrambles the multiplexed data, executes necessary processing such as error correction on the scrambled data, modulates a resultant MPEG transport stream (hereafter referred to as a TS) by QPSK (Quadrature Phase Shift Keying), and sends the modulated data from an antenna  as a radio wave.","The radio wave transmitted from the antenna  is relayed by a communications satellite . The relayed radio wave is received by an antenna  to be supplied to IRD (Integrated Receiver\/Descrambler) . The IRD  QPSK-demodulates the ratio wave received by the antenna , executes necessary processing such as error correction, and extracts a TS packet of a user-selected channel for descrambling. In addition, the IRD  MPEG-decodes the main broadcast signals arranged in the extracted TS packet to output the obtained video signal to a monitor  and the audio signal to a speaker .","The IRD  also extracts a TS packet in which download music data (ATRAC data) are arranged and supplies the extracted TS packet to an MD deck (or recorder)  through an IEEE 1394 bus . Further, the IRD  MPEG-decodes the music data for downloading (MPEG audio data) and outputs the decoded music data to the speaker  or an MD deck  connected to a audio output terminal.","Then, the IRD  records music data download history onto a built-in IC card  (refer to ) and sends the downloaded history information to the transmitter  through a public telephone network  at regular intervals. It should be noted that the download history information sent to the transmitter  is used as accounting information for a user of the IRD .","The MD deck  records the music data (ATRAC data) supplied from the IRD  through the IEEE 1394 bus  onto an MD or reproduces the music data from it. The MD deck  encodes the music data (audio data obtained by decoding MPEG audio data) supplied from the IRD  and records the encoded music data onto an MD or reproduces the music data from it.",{"@attributes":{"id":"p-0040","num":"0039"},"figref":"FIG. 2","b":["1","21","1","22","22","21","25","26","23"]},"It should be noted that, because the music data for downloading include ATRAC data (to be described later) which are poor in integrity with a TS of MPEG-2, some contrivance (to be described in detail later) is required for multiplexing.","The additional information table PSI includes a PAT (Program Association Table), a PMT (Program Map Table), and a SIT (Selection Information Table). Sequential reference of these tables indicates the packet ID of a TS packet that includes desired data. Details thereof are described in ETS 300468, Digital Video Broadcasting (DVB), Specification for Service Information (SI) in DVB System, for example.","The following describes music data for downloading with reference to . As shown, music data for downloading multiplexed with the main broadcast signal of program A for example are data of music A, music B, and music C associated with the program A. For each piece of music, there are two types of data; MPEG audio data compressed by MPEG-2 and ATRAC data compressed by ATRAC. The MPEG audio data and the ATRAC data are repetitively transmitted during the broadcasting of program A.","A time it takes for transmitting the MPEG audio data once is equal to a time it takes for the MPEG audio data to be reproduced (a playing time). A time it takes for the ATRAC data to be transmitted once is \u00bc of a time it takes for the ATRAC data to be reproduced.","For example, assume that the broadcast time of program A be 1 hour and the play time of music A be 8 minutes. Then, it also takes 8 minutes for transmitting the MPEG audio data (music A.mpg) of music A once. During the broadcasting of program A, the MPEG audio data of music A are transmitted a maximum of 7 (=60\/8) times repetitively. On the other hand, the time it takes for one transmission of the ATRAC data of music A is 2 (=8\/4) minutes. Therefore, during the broadcasting of program A, the ATRAC data of music A are transmitted a maximum of 30 (=60\/2) times repetitively. If the playing time of music B is 9 minutes, the MPEG audio data (B.mpg) of music B are transmitted a maximum of 6 (=60\/9) times repetitively during the broadcasting of program A. On the other hand, a time it takes for one transmission of the ATRAC data of music B is 2.25 (=9\/4) minutes. Therefore, during the broadcasting of program A, the ATRAC data of music B are transmitted a maximum of 26 (=60\/2.25) times repetitively.","Referring to  again, the scrambler  scrambles the TS supplied from the multiplexer  by use of a scramble key (Ks) supplied from the associated-information sender  and outputs the scrambled TS to the subsequent stage. A program control system  generates a predetermined control signal to control the encoder . The program control system  also outputs information such as the program ID and channel ID of a program corresponding to the main broadcast signal compressed and encoded by the encoder  to the associated-information sender . The scramble control system  supplies a contract key (Kw) to the associated-information sender  and, at the same time, generates the individual information EMM including the contract key encrypted by use of a key unique to the IRD  and outputs the generated EMM to the multiplexer .","It should be noted that the individual information EMM includes card ID, contract key number (Kw_no), contract key (Kw), contract channel IDs (service_id) and series_id), contract number ID (event_id), contract type (authorize_type), program purchase upper limit (Over_view), SMS polling date (polling_date), and SMS uplink fee (uplink_fee) of which details will be described later.","The associated information sender  supplies the scramble key to the scrambler . The associated-information sender  also generates program information ECM including the scramble key encrypted by use of the contract key supplied from the scramble control system  and outputs the generated program information ECM to the multiplexer .","It should be noted that the program information ECM includes contract key number (Kw_no), encrypted scramble keys (Ks_Odd and Ks_Even), channel IDs (service_id, series_id, and event_id), number ID (event_id), pay-per-view fee (PPV fee), preview time, preview limit count, current time, and purchase limit time, of which details will be described later.","A viewing information collection processing system  processes viewing history information for example supplied from the IRD  through the public telephone network  and outputs the processed information to the scramble control system  as contract information.","The following describes the preview time and preview limit count included in the program information ECM. Each piece of music data can be previewed in a range specified by the preview time and preview limit count included in the program information ECM. Provided, however, that the preview time set for music data is shorter than the entire playing time of the corresponding piece of music and long enough for allowing the listener to sufficiently preview the music. The preview limit count is set to two or more so as to allow the listener to repetitively compare plural pieces of music data. It should be noted that each of the preview time and the preview limit count can be set to different values for different pieces of music.","The following describes the purchase limit time included in the program information ECM with reference to . As described, the music data for downloading (MPEG audio data and ATRAC data) of each piece of music are repetitively transmitted during broadcasting program. In the example shown in , during broadcasting of program A, the music data for downloading of music A are transmitted 15 times repetitively, the music data for downloading of music B 13 times repetitively, and the music data for downloading of music C 11 times repetitively.","For example, if the listener specifies the purchase of music C to the IRD  at timing to which is during the sixth transmission of music C, the music data to be transmitted at the seventh transmission is downloaded in usual. However, if, for some reason, the downloading of the music data to be transmitted at the seventh transmission fails, downloading is reexecuted on the music data to be downloaded at the eighth transmission. Therefore, the last transmission of music data is for reexecution and the timing at which the listener can specify the downloading of the music data to be transmitted at the time just before the last is set as a purchase limit time by use of an elapsed time from the program start time. To be specific, the purchase limit times for music A, music B, and music C are set to timing t, timing t, and timing trespectively as shown in . Thus, setting purchase limit times prevents the situation from happening in which the music specified for purchase cannot be downloaded.","The following describes processing for multiplexing ATRAC data with a TS of MPEG-2. TS packets in which the TS of MPEG-2 is transmitted have each a fixed length of 188 bytes. On the other hand, sound groups in which ATRAC data are transmitted are each 424 bytes long. Therefore, in terms of integrity, it is not good for ATRAC data to be directly made a TS of MPEG-2.","Therefore, in the present embodiment, ATRAC data of 159 bytes are arranged in 1 TS packet and 1 PES (Packetized Elementary Stream) is constituted by 8 TS packets TSP through TSP as shown in . Consequently, one PES packet contains ATRAC data of 1,272 (=159\u00d78) bytes. Meanwhile, the 1,272-byte ATRAC data are equivalent to 3 sound groups each of which constituting a transmission unit of ATRAC data as shown in , so that 1 PES packet can transmit  sound groups. Thus, transmission of the integral number of sound groups by 1 PES packet improves the integrity between ATRAC data and TS of MPEG-2.","Referring to , there is shown a TS in which ATRAC data are arranged. As shown, 4 bytes from the beginning of the 188-byte TS packet provide a TS packet header, the following 14 bytes provide a PES packet header, the following 2 bytes provide a data header, and the remaining 168 bytes provide a data body.","The TS packet header contains, from beginning to end, 1-byte synchronization byte, TS error indicator for showing a flag indicative of the presence or absence of an error in this TS packet, payload unit start indicator for describing a flag indicative that a new PES packet starts from the payload of this TS packet, and TS priority indicative of the importance of the TS packet. Next come 13-bit stream identification (PID) indicative of the attribute of individual stream of this TS packet, TS scrambling control indicative of presence or absence or type of scramble of the payload of the packet, adaptation field control indicative of presence or absence of adaptation field, and continuity counter indicative of a serial number assigned to packets having same PID.","The TS packet header contains, from beginning to end, a packet start code prefix consisting of fixed 3 bytes, 1-byte stream ID for stream identification, and a 2-byte PES packet length. Next come 2-bit fixed pattern \u201c10\u201d, 2-bit PES scramble control, 1-bit PES priority, 1-bit data alignment indicator, 1-bit copyright, 1-bit original\/copy identification, 2-bit PTS and DTS flag, 1-bit ESCR flag, 1-bit ES rate flag, 1-bit DMS trick mode flag, 1-bit additional copy information flag, 1-bit PES CRC flag, and 1-bit PES extension flag.","Further, the TS packet header contains a 1-byte PES header data length, a 4-bit fixed pattern \u201c11011\u201d, a 3-bit time stamp (PTS through PTS), a 1-bit market bit, a 15-bit time stamp (PTS through PTS), a 1-bit market bit, a 15-bit time stamp (PTS through PTS), and a 1-bit market bit.","The data header contains, from beginning to end, 1-byte data type, 6-bit data transmission type, and 2-bit tag.","It should be noted that the TS packet shown in  is the first of the 8 TS packets constituting the PES packet, the second through eighth packets containing stuffing data as shown in  instead of the PES packet header and data header contained in the first TS packet (refer to ).","The data body in which ATRAC data are arranged contains, from beginning (byte  of the TS packet) to end, 4-bit FDF (Field Dependent Field) field length indicative of the length of FDF, 4-bit audio type , and 4-bit audio type . The audio type  defines an audio type (for example, ATRAC). The audio type  defines a category in data type  (for example, ATRAC or ATRAC). Next come flags corresponding to the copyright and the original\/copy (CGMS (Copy Generation Management System), stereo\/monaural identification, emphasis information, data start indicator, data stop indicator, and 3-bit PES data counter.","The data start indicator is a flag for this TS packet to indicate the start of the music data. The data start indicator of the TS packet at the start of the music data is set to \u201c1\u201d. The data stop indicator is a flag for this TS packet to indicate the TS packet at the end of the music data. This data stop indicator is set to \u201c1\u201d. The PES data counter indicates which of the 8 PES-packet-constituting TS packets this TS packet is.","Further, the data body contains 1-bit copyright mode identification, 1-bit EMI (Encryption Mode Information) mode identification, 1-bit reserve bit, 3-byte present PES number, 2-byte reserve, and 1-byte ATRAC data checksum, followed by ATRAC data.","The present PES number indicates which of the music-constituting PES packet this TS packet is. Therefore, detection of the present PES numbers of sequentially transmitted TS packets and the PES data counter value can determine the continuity of the TS in units of TS packets.","The ATRAC data checksum is arranged on byte  of the TS packet. The following describes the relationship between the ATRAC data checksum and the ATRAC data body of byte  and on with reference to . As shown, let the bits of the ATRAC data checksum be CS[0] through CS[7] and the bits of the ATRAC data body from byte  through byte  be AT[0] [0] through AT[158] [7], then the values of CS[0] through CS[7] are set so that CS[0]^AT[0] [0]^AT[2] [0]^ . . . ^AT[158] [0]=OCS[1]^AT[0] [1]^AT[1][1]^AT[2] [1]^ . . . ^AT [158] [1]=0 CS[7]^AT[0] [7]^AT[1] [7]^AT[2] [7] . . . ^AT[158] [7]=0. Symbol \u201c^\u201d indicates exclusive OR operation.","Thus, the arrangement of the checksum for the ATRAC data body allows the side that received this TS packet to check the ATRAC data body for errors.","Referring to , there is shown an exemplary configuration of the IRD . An front end block  of the IRD  selects a signal corresponding to user's tune-in operation from the broadcast signals received by the antenna , executes processing such as QPSK demodulation and error correction on the selected signal, and outputs a resultant TS (scrambled) to a descrambler .","The descrambler  descrambles the TS inputted from the front end block  by use of an individual key supplied from an IC card  to separates the TS into TS packets which contain the main broadcast signal (MPEG video data and MPEG audio data), MPEG audio data for downloading, ATRAC data for downloading, and MHEG script for GUI. In addition, the descrambler  supplies the TS packet of the MPEG video data of the main broadcast signal to an MPEG video decoder , the TS packet of the MPEG audio data of the main broadcast signal and the TS packet of the MPEG audio data for downloading to an MPEG audio decoder, the TS packet of the ATRAC data for downloading to an IEEE 1394 interface (I\/F) , and the TS packet of the MHEG script for GUI to a controller .","The MPEG video decoder  decodes the MPEG video data supplied from the descrambler  and outputs the resultant video data to a display controller . The display controller  makes the monitor  display the video data supplied from the MPEG video decoder  onto a main program display area  (refer to ) of a GUI screen inputted from the controller  for example.","The MPEG audio decoder  decodes the MPEG audio data of the main broadcast signal or the MPEG audio data for downloading supplied from the descrambler  and outputs the resultant audio data to an audio controller . The audio controller , under the control by the controller , executes processing such as fade-in\/out on the audio data inputted from the MPEG audio decoder  and outputs the processed audio data to the speaker  or the MD deck .","The IEEE 1394 interface  deletes a PMT corresponding to a program other than the program in which music purchase can be made from the PAT of the additional information table PSI multiplexed with the TS packet in which the ATRAC data inputted from the descrambler  are arranged, deletes the PID corresponding to each of main broadcast signal, MPEG audio data for downloading, and audio additional information from the PMT corresponding to that program, adds a SIT indicative of a partial TS, and outputs this partial TS to the MD deck  through the IEEE 1394 bus .","According to the user's tune-in operation or the user's operation made for the GUI screen (refer to ), an input block  outputs the information of the user's operation to the controller . On the basis of the operational information supplied from the input block  or predetermined information supplied from the descrambler , the controller  controls each component of the IRD . For example, the controller  processes the MHEG script for GUI inputted from the descrambler  and outputs the image data to the display controller .","The IC card  stores information such as the individual key for descrambling TS packets. In response to a request from the descrambler , the IC card  supplies the information to the descrambler . The IC card  also stores history information about listening of pay-per-view programs and downloaded music data. A modem  outputs the history information stored in the IC card  to the transmitter  through the public telephone network  at predetermined time intervals.","The following describes the preview processing of the IRD  with reference to the flowchart shown in . This preview processing is executed after executing an operation for displaying the GUI for music purchase during listening of a broadcast program by the user (namely the listener) of the IRD  in which music data can be purchased (namely downloaded) and, according to this operation, the GUI as shown in  is displayed on the monitor .","In step S, the descrambler  extracts program information ECM multiplexed on the TS and outputs the preview time, preview limit count, and purchase limit time of the music data described in the extracted ECM and outputs these pieces of described information to the controller . In step S, the controller  compares the preview count made so far with the preview limit count for each piece of music to check for previewable music. If previewable music is found, the processing goes to step S.","In step S, the controller  displays a music list  on the GUI screen as shown in . It should be noted that, for the music titles included in a music list , there is a distinction in the way of display between those titles which can be previewed and purchased and others which cannot be previewed (the preview limit count has been reached) but can be purchased. For example, a title of the music which can be previewed and purchased is displayed in thick characters while a title of the music which cannot be previewed but can be purchased is displayed in thin characters.","When the user selects one of the titles that can be previewed in the music list  and presses a preview button , then, in step S, the select information of the selected title of the music to be previewed is supplied from the input block to the controller .","In step S, the descrambler , under the control by the controller , outputs the MPEG audio data of the music selected in step S to the MPEG audio data decoder . The MPEG audio data decoder , under the control by the controller , decodes the MPEG audio data supplied from the descrambler  for a length of the preview time described in the program information ECM and outputs the resultant audio data to the audio controller . In step S, the audio controller  executes a fade-in operation on the volume of the audio data at the start portion thereof inputted from the MPEG audio decoder  and a fade-out operation at the end portion of the audio data and outputs the resultant audio data to the speaker .","Instead of executing fade-in and fade-out operations, an audio message indicative of preview may be inserted in the audio data at the start and end thereof. Alternatively, the tone quality of the audio data may be varied by means of a filter for example in a range in which the purpose of preview can be attained.","In step , the controller  increments the preview count of the music selected in step S by one.","Then, back in step S, the processing operations in step S and on are repeated until there is no previewable music. When no previewable music is found, the preview processing ends.","Thus, the preview of music data is not only advantageous for listeners but also effective in promoting the purchase of music data. Limiting the number of times music data can be previewed and executing fade-in and fade-out operations on the audio data to be reproduced can prevent the music data from being duplicated by joining previewed pieces of audio data.","The following describes purchase processing of the IRD  with reference to the flowchart shown in . This purchase processing is executed after the user executes an operation for making the IRD  display the GUI for music purchase during preview of a program in which music data can be purchased and the GUI as shown in  is accordingly displayed on the monitor . It should be noted that the music data to be purchased are MPEG audio data for downloading or ATRAC data. The selection between them may be made by the user by executing a predetermined operation or by the IRD  by detecting its audio output terminal or a recording unit (the MD deck  for example) connected to the IEEE 1394 interface .","In step S, program information ECM is extracted from the TS by the descrambler  and the preview time, preview limit count, and purchase limit time for the music data described in the extracted program information ECM are outputted to the controller . In step S, the controller  compares the present time with the purchase limit time for each piece of music to check for purchasable music. If purchasable music is found, the processing goes to step S.","In step S, the controller  displays the music list  on the GUI screen as shown in . It should be noted that, for the music titles included in a music list , there is a distinction in the way of display between those titles which can be previewed and purchased and others which cannot be previewed (the preview limit count has been reached) but can be purchased. For example, a title of the music which can be previewed and purchased is displayed in thick letters while a title of the music which cannot be previewed but can be purchased is displayed in thin letters.","In step S, the controller  determines whether the user viewing this music list  has selected any of music titles listed on the music list  and pressed a purchase button . Until the purchase button  is found pressed, the processing goes back to step S to repeat the processing operation of step S and on. It should be noted that the display of the music titles that exceeded the purchase limit time is changed during this repetition. When the purchase button  is found pressed, the processing goes to step S.","In step S, the controller  determines whether the purchase of plural pieces of music has been specified by the user in step S. If the purchase of plural pieces of music is found specified, the processing goes to step S. In step S, the controller  determines the sequence of downloading the plural pieces of music to be purchased. The following describes this download sequence determination processing with reference to the flowchart shown in .","In step S, the descrambler , under the control by the controller , extracts from the TS the audio additional information at the current point of time (music play time, play elapsed time, transmission time of MPEG audio data for downloading and transmission elapsed time) corresponding to the plural pieces of music specified for purchase and outputs the extracted information to the controller .","In step S, the controller  references the audio additional information supplied from the descrambler  to optimize the sequence of downloading the plural pieces of music. For example, assume that music A, music B, and music C shown in  be purchased. Of these pieces of music data, the piece of music having the earliest transmission start timing (in this example, music B) at purchase specification time to is downloaded first. At the end of transmission of music B, the piece of music (in this example, music A) having the earlier transmission start timing of the remaining two pieces of music is downloaded next. The remaining piece of music (in this example, music C) is downloaded last. Thus, optimizing the download sequence results in download end time t. On the contrary, if the download sequence is not optimized and music A, music B, and music C are downloaded in this order, the download end time results in t, which is delayed behind tby one piece of music.","It will be apparent that like download sequence optimization is applied to downloading of three or more pieces of music.","In step S, the controller  determines whether there is any music data that cannot be downloaded because of the purchase limit time in the download sequence determined in step S. If such music data are found, the processing goes to step S.","In step S, the controller  displays a message telling that there are music data that cannot be downloaded and their titles on the information display area  of the GUI. The user can know by this display that there are music data that cannot be downloaded and therefore, can reselect music data to be purchased.","It should be noted that, if no music data that cannot be downloaded are found in step S, step S is skipped.","After execution of the download sequence determination processing, the processing goes back to step S shown in . In step S, the descrambler , under the control of the controller , extracts the music data according to the sequence determined in step S and outputs the extracted music data to the following stage. It should be noted that, when downloading MPEG audio data, the downloaded MPEG audio data are decoded by the MPEG audio decoder  and the decoded MPEG audio data are recorded on the MD deck  for example through the audio controller  and the audio output terminal. When downloading ATRAC data, the downloaded ATRAC data are recorded on the MD deck  through the IEEE 1394 interface .","Thus, executing the purchase processing including the download sequence determination processing permits the efficient downloading of more pieces of music data.","It should be noted that, if the controller  detects the level of the received radio wave and the detected level is found below a certain value in step S, it may be determined that there are no purchasable music data.","Also, the sequence in which plural pieces of music data are selected in step S may be stored to skip the download sequence determination processing of step S, downloading the plural pieces of music data according to the stored sequence.","If music data are downloaded in a sequence not desired by the user, the MD decks  and  can reproduce the downloaded music data in any sequence as standard capabilities.","In the present embodiment, there exist two types of music data for downloading at the same time, MPEG audio data and ATRAC data, the MPEG audio data being reproduced at the time of preview. Therefore, when ATRAC data are being downloaded, MPEG audio data can be previewed concurrently. The following describes this concurrent processing with reference to the flowchart shown in .","The concurrent processing is executed at the same time the download processing of step S shown in  is executed. In step S, the controller  determines whether the music data being downloaded are ATRAC data. If the music data being downloaded are found ATRAC data, the processing goes to step S. In step S, the controller  executes the preview processing described before (refer to ). It is assumed, however, that the same music title as the ATRAC data being downloaded and an already downloaded music title cannot be previewed.","If, in step S, the music data being downloaded are found not ATRAC data (that is, the music data being downloaded are MPEG audio data), step S is skipped.","The MPEG audio data of a music title different from the ATRAC data being downloaded may also be purchased in step S.","Execution of this concurrent processing allows the user to preview a music while other than that being downloaded or download the music data of two different titles of the music (the ATRAC data of one music and the MPEG audio data of another music) at the same time.","The following describes an exemplary configuration of the MD deck  connected to the IRD  through the IEEE 1394 bus  with reference to . The MD deck  comprises a controller  for controlling the components of the MD deck , an IEEE 1394 interface  for receiving from the IRD  a partial TS in which ATRAC data are arranged, a recording\/reproducing block  for controlling the recording and reproduction of the ATRAC data on an MD , and an ATRAC encoder\/decoder  for decoding the ATRAC data supplied from the recording\/reproducing block  and outputting the decoded ATRAC data to a DAC  or encoding digital audio data supplied from the DAC  and outputting the encoded data to the recording\/reproducing block , these components being interconnected by a system bus .","The recording\/reproducing block  is connected to a buffer  for temporarily storing the ATRAC data to be recorded on the MD , a magnetic head , an optical pickup , and a spindle motor . In a recording operation, the optical pickup  radiates a laser beam onto the MD  to raise the temperature at the radiation spot to a predetermined level. The magnetic head  records a magnetic signal corresponding to the ATRAC data supplied from the recording\/reproducing block  onto the radiation spot on the MD  temperature at which has been raised to the predetermined level. In a reproducing operation, the optical pickup  radiates a laser beam onto the MD , receives the reflected beam, converts the received beam into an electrical signal, and outputs the resultant ATRAC data to the recording\/reproducing block . The spindle motor , under the control by the recording\/reproducing block , rotates the MD .","The ATRAC encoder\/decoder  is connected to the DAC  which makes conversion between digital and analog signals.","The following describes operations of the MD deck . In a recording operation, on the basis of a PSI packet multiplexed with a partial TS supplied from the IRD , the IEEE 1394 interface  detects a PES packet in the ATRAC data are arranged and extracts only the ATRAC data from the PES packet. The extracted ATRAC data are supplied to the recording\/reproducing block  through the system bus . The recording\/reproducing block  controls the magnetic head , the optical pickup , and the spindle motor  to record the ATRAC data supplied from the IEEE 1394 interface  onto the MD .","In a reproducing operation, the recording\/reproducing block  controls the optical pickup  and the spindle motor  to read the ATRAC data from the MD  and supplies the read ATRAC data to the ATRAC encoder\/decoder . The ATRAC encoder\/decoder  decodes the ATRAC data supplied from the recording\/reproducing block  and outputs the decoded ATRAC data to a speaker for example through the DAC .","Referring to , there is shown a detail exemplary configuration of the IEEE 1394 interface . A controller  controls the processing of a PID detector  according to predetermined information supplied from the controller , a start\/stop bit detector  through an ATRAC data extractor .","The PID detector  converts the partial TSs supplied from the IRD  into an MPEG stream, extracts only a TS packet of which 13-bit PID (refer to ) described in the packet header is equal to a predetermined PID (indicative of the TS packet in which the ATRAC data are arranged) specified by the controller , and outputs the extracted TS packet to the preceding stage including start\/stop bit detector  through ATRAC data extractor .","The start\/stop bit detector  checks the data start indicator (23rd byte of the TS packet shown in ) of each of the TS packets sequentially supplied from the PID detector . If \u201c1\u201d is written in the data start indicator, the information thereof is outputted to the controller . This detection information is supplied to the controller  through the controller  to provide a trigger for starting of recording the ATRAC data onto the MD . The start\/stop bit detector  also checks the data end indicator (the bit adjacent the LSB side of the data start indicator). If \u201c1\u201d is written in the data end indicator, the information thereof is outputted to the controller . This detection information is supplied to the controller  through the controller  to provide a trigger for ending of recording the ATRAC data onto the MD .","A packet counter detector  verifies the continuity of the PES data counter (3 bits adjacent to the LSB side of the data end indicator) and the present PES number (bytes 24th through 26th of the TS packet shown in ) of each TS packet sequentially supplied from the PID detector .","The PES data counter is a cyclic counter taking a value 0 to 7. The present PES number is incremented by 1 every time the PES data counter makes one cycle. Namely, 1 is written to the PES data counter of the first TS packet of the 8 TS packets constituting a PES packet of consecutive normal TS (having no dropped packet). A value incremented by 1 is sequentially written to the PES counter of each of the following TS packets, 7 being written to the PES data counter of the 8th TS packet. The present PES number is common to these 8 TS packets. Values 0 through 7 are written again to the PES data counters of the following 8 TS packets. The present PES number of these 8 TS packets is a value with 1 added to the present PES number of the preceding 8 TS packets. It should be noted that the present PES number of the start TS packet of the ATRAC data with the data start indicator written to 1 is 0.","Therefore, the packet counter detector  reads and stores the PES data count values of the inputted TS packets and the value of the present PES number. If the continuity of the PES data counter values and the present PES number of the TS packets inputted next is found lost, the information thereof is outputted to the controller .","An error detector  detects the TS error indicator at the second byte of each TS packet sequentially supplied from the PID detector  to determine whether  is written to the TS error indicator. It should be noted that 1 is written to the TS error indicator if error correction processing could not fully execute error correction in the front end block  of the IRD . Therefore, if 1 is written to the TS error indicator, it is possible that at least one error is included in that TS packet. If the TS error indicator is found written with 1, the error detector  outputs the information thereof to the controller . At the same time, the error detector  verifies the ATRAC data written on 30th byte and on by use of the ATRAC data checksum at 29th byte of each TS packet. If an error is detected, the error detector  outputs the information thereof to the controller .","A format detector  detects the data type (19th byte of the TS packet shown in ), data transmission type (20th byte of the TS packet shown in ), FDF field length (21st byte of the TS packet shown in ), and audio data types  and  (21st and 22nd bytes of the TS packet shown in ) of each TS packet sequentially supplied from the PID detector . The format detector  then determines whether the values described in the detected information are predetermined values indicative of a packet that contains ATRAC data. If any of the values is found other than predetermined one, the information thereof is outputted to the controller .","A copyright information detector  detects the copyright, original or copy, copyright mode, and EMI mode (22nd and 23rd bytes of the TS packet shown in ) of each TS packet sequentially inputted from the PID detector . The copyright information detector  then determines whether the values written in the detected information are predetermined values indicating that the ATRAC data are copy-enabled. If any of these values is found other than predetermined one, the information thereof is outputted to the controller .","The ATRAC data extractor  extracts the ATRAC data from 30th through 188th bytes of the TS packet supplied from the PID detector  and outputs the extracted ATRAC data to the following stage.","The following describes the ATRAC data extraction processing of the IEEE 1394 interface  with reference to the flowchart of . This ATRAC data extraction processing starts when a partial TS is inputted from the IRD .","In step S, the PID detector  converts the partial TS supplied from the IRD  into an MPEG stream, extracts only the TS packet equal to the PID indicative of the TS packet in which ATRAC data are arranged, and outputs the extracted TS packet to the following stage, the start\/stop bit detector  through the ATRAC data extractor .","In step S, the copyright information detector  detects the copyright, original or copy, copyright mode, and EMI mode of the TS packet supplied from the PID detector . The copyright information detector  then determines whether the values written in the detected information are predetermined values indicating that the ATRAC data are copy-enabled. If these values are found the predetermined values and the ATRAC data are found copy-enabled, the processing goes to step S.","In step S, the start\/stop bit detector  monitors the data start indicator of the TS packet inputted from the PID detector  and waits until \u201c1\u201d is detected in the data start indicator. When \u201c1\u201d is detected, the information thereof is outputted to the controller . According to this detection information, the controller  outputs a predetermined signal to the ATRAC data extractor  and the controller .","In step S, according to the signal supplied from the controller , the ATRAC data extractor  extracts the ATRAC data stored in 30th byte and on of the TS packet inputted from the PID detector  and outputs the extracted ATRAC data to the following stage, the recording\/reproducing block . According to the signal supplied from the controller , the controller  directs each component of the MD deck  for starting the recording of the ATRAC data onto the MD .","In step S, the packet counter detector  detects the PES data counter and present PES number of the TS packet supplied from the PID detector  to check the continuity of the values written in the PES data counter and the present PES number. If the PES data counter value and the present PES number are each found continuous, the processing goes to step S.","In step S, the error detector  detects the TS error indicator of the TS packet inputted from the PID detector  to determine whether \u201c1\u201d is written to the detected TS error indicator. In addition, the error detector  determines whether the ATRAC data written in 30th byte and on have an error by use of the ATRAC data checksum of the TS packet. If \u201c1\u201d is not found in the TS error indicator and the ATRAC data are found having no error, the processing goes to step S.","In step S, the format detector  detects the data type, data transmission type, FDF field length, and audio data types  and  of the TS packet supplied from the PID detector  and determine whether the values written in the detected information are predetermined values indicative of a packet that contains ATRAC data. If the values written in the detected information are found the predetermined values, the processing goes to step S.","In step S, the start\/stop bit detector  monitors the data stop indicator of the TS packet inputted from the PID detector  to determine whether \u201c1\u201d is written to the data stop indicator. If \u201c1\u201d is not found, the processing goes back to step S to repeat the processing operations of step S and on. If \u201c1\u201d is found written to the data stop indicator, the start\/stop bit detector  outputs the information thereof to the controller . According to this detection information, the controller  outputs a predetermined signal to the ATRAC data extractor  and the controller . According to the signal supplied from the controller , the ATRAC data extractor  ends the extraction of the ATRAC data from the TS packet inputted from the PID detector . According to the signal supplied from the controller , the controller  directs each component of the MD deck  for ending the recording of the ATRAC data onto the MD . Thus, the recording of the ATRAC data onto the MD  ends.","If, in step S, the values recorded in the copyright, original or copy, copyright mode, and EMI mode of the TS packet inputted from the PID detector  are not the predetermined values and indicate that the ATRAC data arranged in that TS packet are not copy-enabled, this decision is outputted from the copyright information detector  to the controller , then the processing goes to step S.","If, in step S, the values written to the PES data counter and present PES number of the TS packet inputted from the PID detector  are found not continuous, the information thereof is outputted from the packet counter detector  to the controller , then the processing goes to step S.","If, in step S, \u201c1\u201d is written to the TS error indicator of the TS packet inputted from the PID detector  or if the ATRAC data are found having an error, the information thereof is outputted from the error detector  to the controller , then the processing goes to step S.","If, in step S, the values written to the data type, data transmission type, FDF field length, and audio types  and  of the TS packet inputted from the PID detector  are found not the predetermined values indicating that this packet contains ATRAC data, the processing goes to step S.","In step S, according to the decisions made by the packet counter detector  through the copyright information detector , the controller  makes the PID detector  stop extracting TS packets and outputs the information thereof to the controller . According to this information, the controller  directs each component of the MD deck  for stopping the recording of the ATRAC data onto the MD  and outputs the information thereof to the IRD .","It should be noted that the processing operations of steps S through S may be changed in sequence or may be executed concurrently.","If the error rate of the TS on the transmission path is low (that is, if the quality of the transmission path is high), the error detection by use of checksum in step S may not be executed, only executing the verification of the TS error indicator.","Thus, in the IEEE 1394 interface  of the MD , only the ATRAC data arranged in the TS packet are extracted. In this extraction, the TS packet is monitored for abnormal states (such as data drop and error). If any of the abnormal conditions is detected, the extraction of ATRAC data is stopped, thereby preventing the failure of downloading such as recording abnormal ATRAC data.","In the EMD system of the present embodiment, the present invention is applied to digital satellite broadcasting. It will be apparent that this invention is also applicable to digital cable television and digital terrestrial broadcasting.","It will be also apparent that the present invention is applicable to not only audio data distribution services but also services for distributing computer programs for computers and television game machines.","The following describes recording media with reference to , B, and C for use in installing the computer program for executing the above-mentioned series of processing operations onto the IRD or MD deck and makes the computer program ready for execution by the IRD or the MD deck.","The program for the IRD may be provided for users in a state in which the program is previously installed in a hard disk  or a semiconductor memory  as a recording medium built in an IRD  (equivalent to the IRD  shown in ) as shown in .","The program may be temporarily or permanently stored in a floppy disc , a CD-ROM (Compact Disc Read Only Memory) , an MO (Magneto-Optical) disc , a DVD (Digital Versatile Disc) , a magnetic disc , or a semiconductor memory  for distribution as package software.","In addition, the program may be transferred from a download site  to an IRD  through a communications satellite  on a wireless manner or through a local area network or the Internet in a wired or wireless manner to be stored on a hard disc for example built in the IRD .","The program for the MD deck is handled in the same manner as the program for the IRD and therefore the description of the MD deck program will be skipped.","It should be noted that the term \u201cmedium\u201d used herein includes all of the above-mentioned recording media.","It should also be noted that the step for describing the programs provided in the recording media include not only the processing operations to be executed in the described sequence in a time-dependent manner but also the processing operations to be executed concurrently or individually.","It should be noted that the term \u201csystem\u201d used herein denotes an entire apparatus composed of a plurality of units.","As described and according to a recording apparatus as recited in claim  appended hereto, a recording method as recited in claim  appended hereto, and a program as recited in claim  appended hereto, a transport stream packet having a predetermined PID is extracted from a transport stream. Encoded audio data are obtained from the extracted transport stream packet. Consequently, the audio data encoded by ATRAC scheme can be recorded without decoding the audio data.","While the preferred embodiments of the present invention have been described using specific terms, such description is for illustrative purposes only, and it is to be understood that changes and variations may be made without departing from the spirit or scope of the appended claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["These and other objects of the invention will be seen by reference to the description, taken in connection with the accompanying drawing, in which:",{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":["FIG. 2","FIG. 1"]},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIGS. 5A and 5B"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":["FIG. 10","FIG. 1"]},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 16"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":["FIG. 17","FIG. 1"]},{"@attributes":{"id":"p-0031","num":"0030"},"figref":["FIG. 18","FIG. 17"]},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 19"},{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIGS. 20A","b":["20","20"]}]},"DETDESC":[{},{}]}
