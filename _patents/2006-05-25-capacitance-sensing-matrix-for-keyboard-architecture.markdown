---
title: Capacitance sensing matrix for keyboard architecture
abstract: An apparatus and method for selecting a keyboard key based on a position of a presence of a conductive object on a sensing device and a pre-defined area of the keyboard key. The apparatus may include a sensing device and a processing device. The sensing device may include a plurality of sensor elements to detect a presence of a conductive object on the sensing device. Multiple keyboard keys are assigned to pre-defined areas of the sensing device. The processing device is coupled to the sensing device using capacitance sensing pins, and may be operable to determine a position of the presence of the conductive object, and to select a keyboard key based on the position of the conductive object and the pre-defined areas of the sensing device.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08059015&OS=08059015&RS=08059015
owner: Cypress Semiconductor Corporation
number: 08059015
owner_city: San Jose
owner_country: US
publication_date: 20060525
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["TECHNICAL FIELD","BACKGROUND","DETAILED DESCRIPTION"],"p":["This invention relates to the field of user interface devices and, in particular, to touch-sensing devices.","Computing devices, such as notebook computers, personal data assistants (PDAs), and mobile handsets, have user interface devices, which are also known as human interface device (HID). One such user interface device is a keyboard. Keyboards include a set of input keys for the computing device. The input keys may be standard typewriter keys, such as the alphabetic letters and numbers. The input keys may also include several specialized keys, such as Enter, Control, Alt, Delete, Escape, Cursor keys, and the like.",{"@attributes":{"id":"p-0004","num":"0003"},"figref":"FIG. 1A","b":["100","101","0","101","2","102","0","102","2","101","0","101","2","103","0","103","2","102","0","102","2","104","0","104","2","105","0","105","8"],"sub":["0","2","0","2"]},"One example of the resistance matrix for a PC is a PS\/2 keyboard. The PS\/2 keyboard typically has between 101 and 104 keys that are uniquely positioned in a resistance scan matrix. The scan matrix consists of M rows and N columns, all of which are electrically isolated from each other. On average, the number of rows (M) is no greater than 8, and the number of columns (N) is no greater than 20. Each key sits over two isolated contacts of its corresponding row and column in the scan matrix. When a keyboard key  is pressed, the two contacts  and  are shorted together, and the row and column of the keyboard key  are electrically connected, as illustrated in .","The PS\/2 keyboard may include an embedded controller that performs a variety of tasks, all of which help to cut down on the overall system overhead. The PS\/2 controller may monitor the keys and report to the main computer whenever a keyboard key is pressed or released.  illustrates scan results for no keyboard keys pressed on a conventional resistance scan matrix. The controller writes a scan pattern  out to the column lines consisting of all 1s and one 0 which is shifted through each column. In  no keyboard keys are pressed, resulting in all is in the scan results  being read at the row lines.  illustrates scan results for a keyboard key  pressed on a conventional resistance scan matrix. The controller writes a scan pattern  out to the column lines consisting of all 1s and one 0 which is shifted through each column. The scan results  are then read at the row lines. If a 0 is propagated to a row line, then the key  at the intersection of that column and row has been pressed.","The conventional resistance scan matrix designs described have large pin counts because every row and every column is connected to a pin. The pin count for these conventional resistance matrix keyboards is the sum of the number of rows and the number of columns. For example, the PC keyboard needs at least 21 pins to build a resistance scan matrix. Having a large pin count, may increase the die area of the circuit, or alternatively, or may decrease the robustness of the circuit by decreasing the possibility of additional functionality in the same circuit with limited pins. Also, the resistance scan matrix keyboards cannot be built in very small areas because it is limited by the pull-up resistor and mechanical button for each keyboard key. For example, the mechanical button of each keyboard key may have an area of about 0.5 centimeters (cm)\u00d70.5 cm, the total keyboard area will be at least 25.25 cmfor a keyboard having 101 keyboard keys (e.g., 101\u00d70.5 cm\u00d70.5 cm=25.25 cm).","Another conventional keyboard may include a virtual keyboard. Virtual keyboards are a representation of a keyboard displayed on a touch screen. Tapping the \u201cvirtual keys\u201d with a stylus or finger is the same as pressing a real key on a keyboard. For example, a PDA may supply keyboard functionality by providing a keyboard displayed on the touch screen of the PDA, instead of including the mechanical keyboard keys on the assembly of the PDA. This design, however, may take up too much precious real estate on the display.","Another example of a conventional virtual keyboard is a representation of a keyboard projected onto a flat surface such as a desktop. Using fingers as with a normal keyboard, an optical or electronic beam is used to pick up the tapping of the keyboard keys of the projected image. Such a device enables PDAs and other small handhelds to create a full-size keyboard. One example of this type of virtual keyboards is a virtual laser keyboard (VKB). The VKB works by using both infrared and laser technology to produce an invisible circuit and project a full-size virtual QWERTY keyboard on to any surface. The virtual PC keyboard behaves exactly like a real one: direction technology based on optical recognition enables the user to tap the images of the keys, which feeds into the compatible PDA, Smartphone, laptop or PC. QWERTY refers to a standard English-language typewriter keyboard (sometimes called the Sholes keyboard after its inventor), as opposed to Dvorak, foreign-language layouts (e.g. \u201ckeyboard AZERTY\u201d in French-speaking countries), a space-cadet, or APL keyboards.","Described herein is an apparatus and method for selecting a keyboard key based on a position of a presence of a conductive object on a sensing device and a pre-defined area of the keyboard key. The following description sets forth numerous specific details such as examples of specific systems, components, methods, and so forth, in order to provide a good understanding of several embodiments of the present invention. It will be apparent to one skilled in the art, however, that at least some embodiments of the present invention may be practiced without these specific details. In other instances, well-known components or methods are not described in detail or are presented in simple block diagram format in order to avoid unnecessarily obscuring the present invention. Thus, the specific details set forth are merely exemplary. Particular implementations may vary from these exemplary details and still be contemplated to be within the spirit and scope of the present invention.","Embodiments described herein use a capacitance sensor matrix in a keyboard architecture to lower a pin count between a sensing device, which includes the capacitance sensor matrix, and a processing device. This keyboard architecture may be implemented in a smaller area on a device, than the conventional architectures, such as the conventional scan matrix described above.","As described in more detail below, the sensing device has a capacitance sensor matrix, which includes multiple sensor elements that are configured in rows and columns. The keyboard keys of a keyboard can be assigned a pre-determined area on the sensor matrix. The sensor matrix is used to detect a presence of a conductive object, such as a finger or a stylus. Each keyboard key, being assigned a different pre-determined area on the sensor matrix, will provide a different capacitance variation from the sensor matrix to the processing device, as the conductive object is detected. The capacitance variation can be measured on the multiple capacitance sensing pins that are used to couple the sensing device to the processing device. The capacitance variation measured on the capacitance sensing pins can be used by the processing device to determine the x- and y-coordinate (e.g., X\/Y location) of the detected presence of the conductive object on the sensing device. For example, 48 buttons are assigned into different pre-determined areas of a sensor matrix, having two rows and two columns, as illustrated in  below. The two rows and two columns are coupled to the processing device using four capacitance sensing pins. The capacitance variation measured on the four pins can be used to determine the position of the conductive object.","As described in more detail below multiple keyboard keys can be assigned to pre-determined areas on a single sensor element. The capacitance variation measured on the capacitance sensing pins can be used to distinguish which keyboard key has been pressed. For example, a first keyboard key, keyboard key A, is assigned between 1 and 3 in the x-direction, and between 5 and 7 in the y-direction (e.g., {1<X<3 & 5<Y<7}). A second keyboard key, keyboard key B, is assigned between 5 and 7 in the x-direction and between 5 and 7 in the y-direction (e.g., {5<X<7 & 5<Y<7}). If the A or B keyboard key has been pressed, the X\/Y location should be within the areas of A or B, respectively.","Using the capacitance sensor matrix, the measurements on the capacitance sensor matrix (e.g., capacitance variation) may include additional information than just \u201cconnect\u201d or \u201cdisconnect,\u201d instead of only including \u201cconnect\u201d or \u201cdisconnect\u201d information in a conventional resistance matrix. The additional information is the location of the detected conductive object. The pressed key is outputted after comparing the located X\/Y position of the conductive object and the pre-defined areas of the capacitance sensor matrix.","By assigning the different keys into different areas of the matrix and using the capacitance sensor matrix, the keyboard keys can be assigned to smaller areas than keys of a resistance matrix. This allows a keyboard (e.g., full personal computer (PC) keyboard, having 101 keys or more) to be implemented in smaller areas than the conventional keyboards that use resistance matrices. For example, a full keyboard having 101 keyboard keys, for example, can be implemented on a mobile handset. Instead of sacrificing real estate on a touch-screen display to implement the keyboard functions, the full keyboard can be mounted on the mobile handset as an additional user input device. This allows no sacrifice to the real estate of the touch-screen display, and avoids increased costs of providing the additional keyboard functionality to the device that operates the touch-screen display.","By decreasing the pin count of the keyboard, using the capacitance sensor matrix, the costs to manufacture the device also decrease. For example, the die cost is less than a device that requires more pins to implement the same number of keyboard keys. Similarly, by decreasing the pin count of the keyboard, the processing device may be used to further support other devices, such as additional user input devices (e.g., mouse, touch-sensor pad, touch-sensor sliders, touch-sensor buttons, touch-screen displays, and the like).","For example, in a PC interface, the keyboard and cursor positioning device (e.g., mouse or touch-sensor pad) are the most commonly used user input devices. Because the conventional solution for keyboards require at least 21 general purpose input-output (GPIO) pins, and the cursor positioning requires about 12 GPIO pins, companies design two separate integrated circuits to control both user input devices (e.g., one higher pin count chip for the keyboard, and one lower pin count chip for the cursor positioning device. However, using the capacitance sensor matrix described herein, a keyboard and a cursor positioning device may be controlled or supported by a single chip (e.g., processing device) because the pin count for the keyboard has been reduced using the capacitance sensor matrix and capacitance sensing pins. Having a single chip reduces mask and die costs for the design.",{"@attributes":{"id":"p-0038","num":"0037"},"figref":"FIG. 2","b":["200","210","220","230","240","250","260","270","210","207","207","207","207","210","210","205","204","205","204","202","210","203","202"]},"The processing device  may also include an analog block array (not illustrated). The analog block array is also coupled to the system bus. Analog block array also may be configured to implement a variety of analog circuits (e.g., ADC, analog filters, etc.) using, in one embodiment, configurable UMs. The analog block array may also be coupled to the GPIO .","As illustrated, capacitance sensor  may be integrated into processing device . Capacitance sensor  may include analog I\/O for coupling to an external component, such as touch-sensor pad , touch-sensor slider , touch-sensor buttons , and\/or other devices. Capacitance sensor  and processing device  are described in more detail below.","It should be noted that the embodiments described herein are not limited to touch-sensor pads for notebook implementations, but can be used in other capacitive sensing implementations, for example, the sensing device may be a touch-sensor slider , or a touch-sensor button  (e.g., capacitance sensing button). Similarly, the operations described herein are not limited to notebook cursor operations, but can include other operations, such as lighting control (dimmer), volume control, graphic equalizer control, speed control, or other control operations requiring gradual adjustments. It should also be noted that these embodiments of capacitive sensing implementations may be used in conjunction with non-capacitive sensing elements, including but not limited to pick buttons, sliders (ex. display brightness and contrast), scroll-wheels, multi-media control (ex. volume, track advance, etc) handwriting recognition and numeric keypad operation.","In one embodiment, the electronic system  includes a touch-sensor pad  coupled to the processing device  via bus . Touch-sensor pad  may include a multi-dimension sensor array. The multi-dimension sensor array comprises a plurality of sensor elements, organized as rows and columns. In another embodiment, the electronic system  includes a touch-sensor slider  coupled to the processing device  via bus . Touch-sensor slider  may include a single-dimension sensor array. The single-dimension sensor array comprises a plurality of sensor elements, organized as rows, or alternatively, as columns. In another embodiment, the electronic system  includes a touch-sensor button  coupled to the processing device  via bus . Touch-sensor button  may include a single-dimension or multi-dimension sensor array. The single- or multi-dimension sensor array comprises a plurality of sensor elements. For a touch-sensor button, the plurality of sensor elements may be coupled together to detect a presence of a conductive object over the entire surface of the sensing device. Alternatively, the touch-sensor button  has a single sensor element to detect the presence of the conductive object. In one embodiment, the touch-sensor button  may be a capacitance sensor element. Capacitance sensor elements may be used as non-contact switches. These switches, when protected by an insulating layer, offer resistance to severe environments.","The electronic system  may include any combination of one or more of the touch-sensor pad , touch-sensor slider , and\/or touch-sensor button . In another embodiment, the electronic system  may also include non-capacitance sensor elements  coupled to the processing device  via bus . The non-capacitance sensor elements  may include buttons, light emitting diodes (LEDs), and other user interface devices, such as a mouse, a keyboard, or other functional keys that do not require capacitance sensing. In one embodiment, buses , , , and  may be a single bus. Alternatively, these buses may be configured into any combination of one or more separate buses.","The processing device may also provide value-added functionality such as keyboard control integration, LEDs, battery charger, and general purpose I\/O, as illustrated as non-capacitance sensor elements . Non-capacitance sensor elements  are coupled to the GPIO .","Processing device  may include internal oscillator\/clocks  and communication block . The oscillator\/clocks block  provides clock signals to one or more of the components of processing device . Communication block  may be used to communicate with an external component, such as a host processor , via host interface (I\/F) line . Alternatively, processing block  may also be coupled to embedded controller  to communicate with the external components, such as host . Interfacing to the host  can be through various methods. In one exemplary embodiment, interfacing with the host  may be done using a standard PS\/2 interface to connect to an embedded controller , which in turn sends data to the host  via low pin count (LPC) interface. In some instances, it may be beneficial for the processing device  to do both touch-sensor pad and keyboard control operations, thereby freeing up the embedded controller  for other housekeeping functions. In another exemplary embodiment, interfacing may be done using a universal serial bus (USB) interface directly coupled to the host  via host interface line . Alternatively, the processing device  may communicate to external components, such as the host  using industry standard interfaces, such as USB, PS\/2, inter-integrated circuit (I2C) bus, or system packet interfaces (SPI). The host  and\/or embedded controller  may be coupled to the processing device  with a ribbon or flex cable from an assembly, which houses the sensing device and processing device.","In one embodiment, the processing device  is configured to communicate with the embedded controller  or the host  to send and\/or receive data. The data may be a command or alternatively a signal. In an exemplary embodiment, the electronic system  may operate in both standard-mouse compatible and enhanced modes. The standard-mouse compatible mode utilizes the HID class drivers already built into the Operating System (OS) software of host . These drivers enable the processing device  and sensing device to operate as a standard cursor control user interface device, such as a two-button PS\/2 mouse. The enhanced mode may enable additional features such as scrolling (reporting absolute position) or disabling the sensing device, such as when a mouse is plugged into the notebook. Alternatively, the processing device  may be configured to communicate with the embedded controller  or the host , using non-OS drivers, such as dedicated touch-sensor pad drivers, or other drivers known by those of ordinary skill in the art.","In other words, the processing device  may operate to communicate data (e.g., commands or signals) using hardware, software, and\/or firmware, and the data may be communicated directly to the processing device of the host , such as a host processor, or alternatively, may be communicated to the host  via drivers of the host , such as OS drivers, or other non-OS drivers. It should also be noted that the host  may directly communicate with the processing device  via host interface .","In one embodiment, the data sent to the host  from the processing device  includes click, double-click, movement of the cursor, scroll-up, scroll-down, scroll-left, scroll-right, step Back, and step Forward. Alternatively, other user interface device commands may be communicated to the host  from the processing device . These commands may be based on gestures occurring on the sensing device that are recognized by the processing device, such as tap, push, hop, and zigzag gestures. Alternatively, other commands may be recognized. Similarly, signals may be sent that indicate the recognition of these operations.","In particular, a tap gesture, for example, may be when the finger (e.g., conductive object) is on the sensing device for less than a threshold time. If the time the finger is placed on the touchpad is greater than the threshold time it may be considered to be a movement of the cursor, in the x- or y-axes. Scroll-up, scroll-down, scroll-left, and scroll-right, step back, and step-forward may be detected when the absolute position of the conductive object is within a pre-defined area, and movement of the conductive object is detected.","Processing device  may reside on a common carrier substrate such as, for example, an integrated circuit (IC) die substrate, a multi-chip module substrate, or the like. Alternatively, the components of processing device  may be one or more separate integrated circuits and\/or discrete components. In one exemplary embodiment, processing device  may be a Programmable System on a Chip (PSoC\u2122) processing device, manufactured by Cypress Semiconductor Corporation, San Jose, Calif. Alternatively, processing device  may be one or more other processing devices known by those of ordinary skill in the art, such as a microprocessor or central processing unit, a controller, special-purpose processor, digital signal processor (DSP), an application specific integrated circuit (ASIC), a field programmable gate array (FPGA), or the like. In an alternative embodiment, for example, the processing device may be a network processor having multiple processors including a core unit and multiple microengines. Additionally, the processing device may include any combination of general-purpose processing device(s) and special-purpose processing device(s).","Capacitance sensor  may be integrated into the IC of the processing device , or alternatively, in a separate IC. Alternatively, descriptions of capacitance sensor  may be generated and compiled for incorporation into other integrated circuits. For example, behavioral level code describing capacitance sensor , or portions thereof, may be generated using a hardware descriptive language, such as VHDL or Verilog, and stored to a machine-accessible medium (e.g., CD-ROM, hard disk, floppy disk, etc.). Furthermore, the behavioral level code can be compiled into register transfer level (\u201cRTL\u201d) code, a netlist, or even a circuit layout and stored to a machine-accessible medium. The behavioral level code, the RTL code, the netlist, and the circuit layout all represent various levels of abstraction to describe capacitance sensor .","It should be noted that the components of electronic system  may include all the components described above. Alternatively, electronic system  may include only some of the components described above.","In one embodiment, electronic system  may be used in a notebook computer. Alternatively, the electronic device may be used in other applications, such as a mobile handset, a personal data assistant (PDA), a keyboard, a television, a remote control, a monitor, a handheld multi-media device, a handheld video player, a handheld gaming device, or a control panel.","In one embodiment, capacitance sensor  may be a capacitive switch relaxation oscillator (CSR). The CSR may have an array of capacitive touch switches using a current-programmable relaxation oscillator, an analog multiplexer, digital counting functions, and high-level software routines to compensate for environmental and physical switch variations. The switch array may include combinations of independent switches, sliding switches (e.g., touch-sensor slider), and touch-sensor pads implemented as a pair of orthogonal sliding switches. The CSR may include physical, electrical, and software components. The physical component may include the physical switch itself, typically a pattern constructed on a printed circuit board (PCB) with an insulating cover, a flexible membrane, or a transparent overlay. The electrical component may include an oscillator or other means to convert a changed capacitance into a measured signal. The electrical component may also include a counter or timer to measure the oscillator output. The software component may include detection and compensation software algorithms to convert the count value into a switch detection decision. For example, in the case of slide switches or X-Y touch-sensor pads, a calculation for finding position of the conductive object to greater resolution than the physical pitch of the switches may be used.","It should be noted that there are various known methods for measuring capacitance. Although the embodiments described herein are described using a relaxation oscillator, the present embodiments are not limited to using relaxation oscillators, but may include other methods, such as current versus voltage phase shift measurement, resistor-capacitor charge timing, capacitive bridge divider, charge transfer, or the like.","The current versus voltage phase shift measurement may include driving the capacitance through a fixed-value resistor to yield voltage and current waveforms that are out of phase by a predictable amount. The drive frequency can be adjusted to keep the phase measurement in a readily measured range. The resistor-capacitor charge timing may include charging the capacitor through a fixed resistor and measuring timing on the voltage ramp. Small capacitor values may require very large resistors for reasonable timing. The capacitive bridge divider may include driving the capacitor under test through a fixed reference capacitor. The reference capacitor and the capacitor under test form a voltage divider. The voltage signal is recovered with a synchronous demodulator, which may be done in the processing device . The charge transfer may be conceptually similar to an R-C charging circuit. In this method, Cis the capacitance being sensed. Cis the summing capacitor, into which charge is transferred on successive cycles. At the start of the measurement cycle, the voltage on Cis reset. The voltage on Cincreases exponentially (and only slightly) with each clock cycle. The time for this voltage to reach a specific threshold is measured with a counter. Additional details regarding these alternative embodiments have not been included so as to not obscure the present embodiments, and because these alternative embodiments for measuring capacitance are known by those of ordinary skill in the art.",{"@attributes":{"id":"p-0057","num":"0056"},"figref":["FIG. 3A","FIG. 3C"],"b":["300","301","302","303","301","302","301","303","303","302","301","303","302","301","302","300","351","303","300","300"]},"The conductive object in this case is a finger, alternatively, this technique may be applied to any conductive object, for example, a conductive door switch, position sensor, or conductive pen in a stylus tracking system (e.g., stylus).",{"@attributes":{"id":"p-0059","num":"0058"},"figref":"FIG. 3B","b":["307","210","307","210","306","303","305","303","210","305","303","304","304","305","307"]},{"@attributes":{"id":"p-0060","num":"0059"},"figref":"FIG. 3C","b":["350","351","352","353","354","351","357","351","351","357"],"br":{},"in-line-formulae":[{},{}],"sub":"C"},"The relaxation oscillator begins by charging the capacitor  from a ground potential or zero voltage and continues to pile charge on the capacitor  at a fixed charging current Ic  until the voltage across the capacitor  at node  reaches a reference voltage or threshold voltage, V. At V, the relaxation oscillator allows the accumulated charge at node  to discharge (e.g., the capacitor  to \u201crelax\u201d back to the ground potential) and then the process repeats itself. In particular, the output of comparator  asserts a clock signal F (e.g., F goes high), which enables the reset switch . This resets the voltage on the capacitor at node  to ground and the charge cycle starts again. The relaxation oscillator outputs a relaxation oscillator clock signal (F) having a frequency (f) dependent upon capacitance C of the capacitor  and charging current Ic .","The comparator trip time of the comparator  and reset switch  add a fixed delay. The output of the comparator  is synchronized with a reference system clock to guarantee that the comparator reset time is long enough to completely reset the charging voltage on capacitor . This sets a practical upper limit to the operating frequency. For example, if capacitance C of the capacitor  changes, then fwill change proportionally according to Equation (1). By comparing fof F against the frequency (f) of a known reference system clock signal (REF CLK), the change in capacitance \u0394C can be measured. Accordingly, equations (2) and (3) below describe that a change in frequency between F and REF CLK is proportional to a change in capacitance of the capacitor .\n\n\u0394C\u221d\u0394f, where\u2003\u2003(2)\n\n\u0394.\u2003\u2003(3)\n","In one embodiment, a frequency comparator may be coupled to receive relaxation oscillator clock signal (F) and REF CLK, compare their frequencies fand f, respectively, and output a signal indicative of the difference \u0394f between these frequencies. By monitoring \u0394f one can determine whether the capacitance of the capacitor  has changed.","In one exemplary embodiment, the relaxation oscillator  may be built using a programmable timer (e.g., 555 timer) to implement the comparator  and reset switch . Alternatively, the relaxation oscillator  may be built using other circuiting. Relaxation oscillators are known in by those of ordinary skill in the art, and accordingly, additional details regarding their operation have not been included so as to not obscure the present embodiments.",{"@attributes":{"id":"p-0065","num":"0064"},"figref":["FIG. 4","FIG. 4","FIG. 3B"],"b":["201","410","350","420","410","355","1","355","410","410","350","401","401","1","401","410","355","1","355","410","401","210","231","410","355","1","355","410","401","210","221"]},"Relaxation oscillator  of  includes all the components described with respect to , and a selection circuit . The selection circuit  is coupled to the plurality of sensor elements ()-(N), the reset switch , the current source , and the comparator . Selection circuit  may be used to allow the relaxation oscillator  to measure capacitance on multiple sensor elements (e.g., rows or columns). The selection circuit  may be configured to sequentially select a sensor element of the plurality of sensor elements to provide the charge current and to measure the capacitance of each sensor element. In one exemplary embodiment, the selection circuit  is a multiplexer array of the relaxation oscillator . Alternatively, selection circuit may be other circuitry outside the relaxation oscillator , or even outside the capacitance sensor  to select the sensor element to be measured. Capacitance sensor  may include one relaxation oscillator and digital counter for the plurality of sensor elements of the sensor array. Alternatively, capacitance sensor  may include multiple relaxation oscillators and digital counters to measure capacitance on the plurality of sensor elements of the sensor array. The multiplexer array may also be used to ground the sensor elements that are not being measured. This may be done in conjunction with a dedicated pin in the GP10 port .","In another embodiment, the capacitance sensor  may be configured to simultaneously scan the sensor elements, as opposed to being configured to sequentially scan the sensor elements as described above. For example, the sensing device may include a sensor array having a plurality of rows and columns. The rows may be scanned simultaneously, and the columns may be scanned simultaneously.","In one exemplary embodiment, the voltages on all of the rows of the sensor array are simultaneously moved, while the voltages of the columns are held at a constant voltage, with the complete set of sampled points simultaneously giving a profile of the conductive object in a first dimension. Next, the voltages on all of the rows are held at a constant voltage, while the voltages on all the rows are simultaneously moved, to obtain a complete set of sampled points simultaneously giving a profile of the conductive object in the other dimension.","In another exemplary embodiment, the voltages on all of the rows of the sensor array are simultaneously moved in a positive direction, while the voltages of the columns are moved in a negative direction. Next, the voltages on all of the rows of the sensor array are simultaneously moved in a negative direction, while the voltages of the columns are moved in a positive direction. This technique doubles the effect of any transcapacitance between the two dimensions, or conversely, halves the effect of any parasitic capacitance to the ground. In both methods, the capacitive information from the sensing process provides a profile of the presence of the conductive object to the sensing device in each dimension. Alternatively, other methods for scanning known by those of ordinary skill in the art may be used to scan the sensing device.","Digital counter  is coupled to the output of the relaxation oscillator . Digital counter  receives the relaxation oscillator output signal  (F). Digital counter  is configured to count at least one of a frequency or a period of the relaxation oscillator output received from the relaxation oscillator.","As previously described with respect to the relaxation oscillator , when a finger or conductive object is placed on the switch, the capacitance increases from Cp to Cp+Cf so the relaxation oscillator output signal  (F) decreases. The relaxation oscillator output signal  (F) is fed to the digital counter  for measurement. There are two methods for counting the relaxation oscillator output signal , frequency measurement and period measurement. In one embodiment, the digital counter  may include two multiplexers  and . Multiplexers  and  are configured to select the inputs for the PWM  and the timer  for the two measurement methods, frequency and period measurement methods. Alternatively, other selection circuits may be used to select the inputs for the PWM  and the time . In another embodiment, multiplexers  and  are not included in the digital counter, for example, the digital counter  may be configured in one, or the other, measurement configuration.","In the frequency measurement method, the relaxation oscillator output signal  is counted for a fixed period of time. The counter  is read to obtain the number of counts during the gate time. This method works well at low frequencies where the oscillator reset time is small compared to the oscillator period. A pulse width modulator (PWM)  is clocked for a fixed period by a derivative of the system clock, VC  (which is a divider from system clock , e.g., 24 MHz). Pulse width modulation is a modulation technique that generates variable-length pulses to represent the amplitude of an analog input signal; in this case VC . The output of PWM  enables timer  (e.g., 16-bit). The relaxation oscillator output signal  clocks the timer . The timer  is reset at the start of the sequence, and the count value is read out at the end of the gate period.","In the period measurement method, the relaxation oscillator output signal  gates a counter , which is clocked by the system clock  (e.g., 24 MHz). In order to improve sensitivity and resolution, multiple periods of the oscillator are counted with the PWM . The output of PWM  is used to gate the timer . In this method, the relaxation oscillator output signal  drives the clock input of PWM . As previously described, pulse width modulation is a modulation technique that generates variable-length pulses to represent the amplitude of an analog input signal; in this case the relaxation oscillator output signal . The output of the PWM  enables timer  (e.g., 16-bit), which is clocked at the system clock frequency  (e.g., 24 MHz). When the output of PWM  is asserted (e.g., goes high), the count starts by releasing the capture control. When the terminal count of the PWM  is reached, the capture signal is asserted (e.g., goes high), stopping the count and setting the PWM's interrupt. The timer value is read in this interrupt. The relaxation oscillator  is indexed to the next switch (e.g., capacitor ()) to be measured and the count sequence is started again.","The two counting methods may have equivalent performance in sensitivity and signal-to-noise ratio (SNR). The period measurement method may have a slightly faster data acquisition rate, but this rate is dependent on software loads and the values of the switch capacitances. The frequency measurement method has a fixed-switch data acquisition rate.","The length of the counter  and the detection time required for the switch are determined by sensitivity requirements. Small changes in the capacitance on capacitor  result in small changes in frequency. In order to find these small changes, it may be necessary to count for a considerable time.","At startup (or boot) the switches (e.g., capacitors ()-(N)) are scanned and the count values for each switch with no actuation are stored as a baseline array (Cp). The presence of a finger on the switch is determined by the difference in counts between a stored value for no switch actuation and the acquired value with switch actuation, referred to here as \u0394n. The sensitivity of a single switch is approximately:",{"@attributes":{"id":"p-0077","num":"0076"},"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mfrac":[{"mrow":{"mi":["\u0394","n"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}},"mi":"n"},{"mi":["Cf","Cp"]}],"mo":"="}},{"mrow":{"mo":["(",")"],"mn":"4"}}]}}}}},"The value of \u0394n should be large enough for reasonable resolution and clear indication of switch actuation. This drives switch construction decisions.","Cf should be as large a fraction of Cp as possible. In one exemplary embodiment, the fraction of Cf\/Cp ranges between approximately 0.01 to approximately 2.0. Alternatively, other fractions may be used for Cf\/Cp. Since Cf is determined by finger area and distance from the finger to the switch's conductive traces (through the over-lying insulator), the baseline capacitance Cp should be minimized. The baseline capacitance Cp includes the capacitance of the switch pad plus any parasitics, including routing and chip pin capacitance.","In switch array applications, variations in sensitivity should be minimized. If there are large differences in \u0394n, one switch may actuate at 1.0 cm, while another may not actuate until direct contact. This presents a non-ideal user interface device. There are numerous methods for balancing the sensitivity. These may include precisely matching on-board capacitance with PC trace length modification, adding balance capacitors on each switch's PC board trace, and\/or adapting a calibration factor to each switch to be applied each time the switch is tested.","In one embodiment, the PCB design may be adapted to minimize capacitance, including thicker PCBs where possible. In one exemplary embodiment, a 0.062 inch thick PCB is used. Alternatively, other thicknesses may be used, for example, a 0.015 inch thick PCB.","It should be noted that the count window should be long enough for \u0394n to be a \u201csignificant number.\u201d In one embodiment, the \u201csignificant number\u201d can be as little as 10, or alternatively, as much as several hundred. In one exemplary embodiment, where Cf is 1.0% of Cp (a typical \u201cweak\u201d switch), and where the switch threshold is set at a count value of 20, n is found to be:",{"@attributes":{"id":"p-0083","num":"0082"},"maths":{"@attributes":{"id":"MATH-US-00002","num":"00002"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mi":"n","mo":"=","mrow":{"mrow":{"mi":"\u0394","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mrow":{"mi":"n","mo":"\u00b7","mfrac":{"mi":["Cf","Cp"]}}},"mo":"=","mn":"2000"}}},{"mrow":{"mo":["(",")"],"mn":"5"}}]}}}}},"Adding some margin to yield 2500 counts, and running the frequency measurement method at 1.0 MHz, the detection time for the switch is 2.5 microseconds. In the frequency measurement method, the frequency difference between a switch with and without actuation (i.e., CP+CF vs. CP) is approximately:",{"@attributes":{"id":"p-0085","num":"0084"},"maths":{"@attributes":{"id":"MATH-US-00003","num":"00003"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"mi":["\u0394","n"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}},{"mfrac":[{"mrow":{"msub":[{"mi":["t","count"]},{"mi":["i","c"]}],"mo":"\u00b7"},"msub":{"mi":["V","TH"]}},{"mi":"Cf","msup":{"mi":"Cp","mn":"2"}}],"mo":"\u2062"}],"mo":"="}},{"mrow":{"mo":["(",")"],"mn":"6"}}]}}}}},"This shows that the sensitivity variation between one channel and another is a function of the square of the difference in the two channels' static capacitances. This sensitivity difference can be compensated using routines in the high-level Application Programming Interfaces (APIs).","In the period measurement method, the count difference between a switch with and without actuation (i.e., CP+CF vs. CP) is approximately:",{"@attributes":{"id":"p-0088","num":"0087"},"maths":{"@attributes":{"id":"MATH-US-00004","num":"00004"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"mi":["\u0394","n"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}},{"msub":[{"mi":["N","Periods"]},{"mi":["f","SysClk"]}],"mo":["\u00b7","\u00b7"],"mfrac":{"mrow":{"mi":"Cf","mo":"\u00b7","msub":{"mi":["V","TH"]}},"msub":{"mi":["i","C"]}}}],"mo":"="}},{"mrow":{"mo":["(",")"],"mn":"7"}}]}}}}},"The charge currents are typically lower and the period is longer to increase sensitivity, or the number of periods for which fis counted can be increased. In either method, by matching the static (parasitic) capacitances Cp of the individual switches, the repeatability of detection increases, making all switches work approximately at the same difference. Compensation for this variation can be done in software at runtime. The compensation algorithms for both the frequency method and period method may be included in the high-level APIs.","Some implementations of this circuit use a current source programmed by a fixed-resistor value. If the range of capacitance to be measured changes, external components, (i.e., the resistor) should be adjusted.","Using the multiplexer array , multiple sensor elements may be sequentially scanned to provide current to and measure the capacitance from the capacitors (e.g., sensor elements), as previously described. In other words, while one sensor element is being measured, the remaining sensor elements are grounded using the GPIO port . This drive and multiplex arrangement bypasses the existing GPIO to connect the selected pin to an internal analog multiplexer (mux) bus. The capacitor charging current (e.g., current source ) and reset switch  are connected to the analog mux bus. This may limit the pin-count requirement to simply the number of switches (e.g., capacitors ()-(N)) to be addressed. In one exemplary embodiment, no external resistors or capacitors are required inside or outside the processing device  to enable operation.","The capacitor charging current for the relaxation oscillator  is generated in a register programmable current output DAC (also known as IDAC). Accordingly, the current source  is a current DAC or IDAC. The IDAC output current may be set by an 8-bit value provided by the processing device , such as from the processing core . The 8-bit value may be stored in a register or in memory.","Estimating and measuring PCB capacitances may be difficult; the oscillator-reset time may add to the oscillator period (especially at higher frequencies); and there may be some variation to the magnitude of the IDAC output current with operating frequency. Accordingly, the optimum oscillation frequency and operating current for a particular switch array may be determined to some degree by experimentation.","In many capacitive switch designs the two \u201cplates\u201d (e.g.,  and ) of the sensing capacitor are actually adjacent sensor elements that are electrically isolated (e.g., PCB pads or traces), as indicated in . Typically, one of these plates is grounded. Layouts for touch-sensor slider (e.g., linear slide switches) and touch-sensor pad applications have switches that are immediately adjacent. In this case, all of the switches that are not active are grounded through the GPIO  of the processing device  dedicated to that pin. The actual capacitance between adjacent plates is small (Cp), but the capacitance of the active plate (and its PCB trace back to the processing device ) to ground, when detecting the presence of the conductive object , may be considerably higher (Cp+Cf). The capacitance of two parallel plates is given by the following equation:",{"@attributes":{"id":"p-0095","num":"0094"},"maths":{"@attributes":{"id":"MATH-US-00005","num":"00005"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mi":"C","mo":"=","mrow":{"mrow":[{"msub":[{"mi":"\u025b","mn":"0"},{"mi":["\u025b","R"]}],"mo":["\u00b7","\u00b7"],"mfrac":{"mi":["A","d"]}},{"mrow":{"msub":{"mi":["\u025b","R"]},"mo":["\u00b7","\u00b7"],"mn":"8.85","mfrac":{"mi":["A","d"]}},"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}},{"mtext":"\/"}],"mi":["pF","m"]}],"mo":"="}}},{"mrow":{"mo":["(",")"],"mn":"8"}}]}}}}},"The dimensions of equation (8) are in meters. This is a very simple model of the capacitance. The reality is that there are fringing effects that substantially increase the switch-to-ground (and PCB trace-to-ground) capacitance.","Switch sensitivity (i.e., actuation distance) may be increased by one or more of the following: 1) increasing board thickness to increase the distance between the active switch and any parasitics; 2) minimizing PC trace routing underneath switches; 3) utilizing a grided ground with 50% or less fill if use of a ground plane is absolutely necessary; 4) increasing the spacing between switch pads and any adjacent ground plane; 5) increasing pad area; 6) decreasing thickness of any insulating overlay; or 7) verifying that there is no air-gap between the PC pad surface and the touching finger.","There is some variation of switch sensitivity as a result of environmental factors. A baseline update routine, which compensates for this variation, may be provided in the high-level APIs.","Sliding switches are used for control requiring gradual adjustments. Examples include a lighting control (dimmer), volume control, graphic equalizer, and speed control. These switches are mechanically adjacent to one another. Actuation of one switch results in partial actuation of physically adjacent switches. The actual position in the sliding switch is found by computing the centroid location of the set of switches activated.","In applications for touch-sensor sliders (e.g., sliding switches) and touch-sensor pads it is often necessary to determine finger (or other capacitive object) position to more resolution than the native pitch of the individual switches. The contact area of a finger on a sliding switch or a touch-pad is often larger than any single switch. In one embodiment, in order to calculate the interpolated position using a centroid, the array is first scanned to verify that a given switch location is valid. The requirement is for some number of adjacent switch signals to be above a noise threshold. When the strongest signal is found, this signal and those immediately adjacent are used to compute a centroid:",{"@attributes":{"id":"p-0101","num":"0100"},"maths":{"@attributes":{"id":"MATH-US-00006","num":"00006"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mi":"Centroid","mo":"=","mfrac":{"mrow":[{"mrow":[{"msub":{"mi":"n","mrow":{"mi":"i","mo":"-","mn":"1"}},"mo":"\u00b7","mrow":{"mo":["(",")"],"mrow":{"mi":"i","mo":"-","mn":"1"}}},{"msub":{"mi":["n","i"]},"mo":"\u2062","mi":"i"},{"msub":{"mi":"n","mrow":{"mi":"i","mo":"+","mn":"1"}},"mo":"\u00b7","mrow":{"mo":["(",")"],"mrow":{"mi":"i","mo":"+","mn":"1"}}}],"mo":["+","+"]},{"msub":[{"mi":"n","mrow":{"mi":"i","mo":"-","mn":"1"}},{"mi":"n","mrow":{"mi":"i","mo":"+","mn":"1"}}],"mo":["+","+"],"mrow":{"msub":{"mi":["n","i"]},"mo":"\u2062","mi":"i"}}]}}},{"mrow":{"mo":["(",")"],"mn":"9"}}]}}}}},"The calculated value will almost certainly be fractional. In order to report the centroid to a specific resolution, for example a range of 0 to 100 for 12 switches, the centroid value may be multiplied by a calculated scalar. It may be more efficient to combine the interpolation and scaling operations into a single calculation and report this result directly in the desired scale. This may be handled in the high-level APIs. Alternatively, other methods may be used to interpolate the position of the conductive object.","A physical touchpad assembly is a multi-layered module to detect a conductive object. In one embodiment, the multi-layer stack-up of a touchpad assembly includes a PCB, an adhesive layer, and an overlay. The PCB includes the processing device  and other components, such as the connector to the host , necessary for operations for sensing the capacitance. These components are on the non-sensing side of the PCB. The PCB also includes the sensor array on the opposite side, the sensing side of the PCB. Alternatively, other multi-layer stack-ups may be used in the touchpad assembly.","The PCB may be made of standard materials, such as FR4 or Kapton\u2122 (e.g., flexible PCB). In either case, the processing device  may be attached (e.g., soldered) directly to the sensing PCB (e.g., attached to the non-sensing side of the PCB). The PCB thickness varies depending on multiple variables, including height restrictions and sensitivity requirements. In one embodiment, the PCB thickness is at least approximately 0.3 millimeters (mm). Alternatively, the PCB may have other thicknesses. It should be noted that thicker PCBs may yield better results. The PCB length and width is dependent on individual design requirements for the device on which the sensing device is mounted, such as a notebook or mobile handset.","The adhesive layer is directly on top of the PCB sensing array and is used to affix the overlay to the overall touchpad assembly. Typical material used for connecting the overlay to the PCB is non-conductive adhesive such as 3M 467 or 468. In one exemplary embodiment, the adhesive thickness is approximately 0.05 mm. Alternatively, other thicknesses may be used.","The overlay may be non-conductive material used to protect the PCB circuitry to environmental elements and to insulate the user's finger (e.g., conductive object) from the circuitry. Overlay can be ABS plastic, polycarbonate, glass, or Mylar\u2122. Alternatively, other materials known by those of ordinary skill in the art may be used. In one exemplary embodiment, the overlay has a thickness of approximately 1.0 mm. In another exemplary embodiment, the overlay thickness has a thickness of approximately 2.0 mm. Alternatively, other thicknesses may be used.","The sensor array may be a grid-like pattern of sensor elements (e.g., capacitive elements) used in conjunction with the processing device  to detect a presence of a conductive object, such as finger, to a resolution greater than that which is native. The touch-sensor pad layout pattern maximizes the area covered by conductive material, such as copper, in relation to spaces necessary to define the rows and columns of the sensor array.",{"@attributes":{"id":"p-0108","num":"0107"},"figref":"FIG. 5A","b":["303","500","220","500","500","504","1","504","505","1","505","503","1","503","501","1","501","210","303"]},{"@attributes":{"id":"p-0109","num":"0108"},"figref":"FIG. 5B","b":["303","550","230","550","550","504","1","504","501","1","501","210","303","500","230"]},"Alternating columns in  correspond to x- and y-axis elements. The y-axis sensor elements ()-(K) are illustrated as black diamonds in , and the x-axis sensor elements ()-(L) are illustrated as white diamonds in  and . It should be noted that other shapes may be used for the sensor elements. In another embodiment, the columns and row may include vertical and horizontal bars (e.g., rectangular shaped bars); however, this design may include additional layers in the PCB to allow the vertical and horizontal bars to be positioned on the PCB so that they are not in contact with one another.",{"@attributes":{"id":"p-0111","num":"0110"},"figref":["FIGS. 5C and 5D","FIGS. 5C and 5D"],"b":["505","1","505","2","504","1","504","4","500","501","1","575","501","2","575","504","1","575","577","504","2","504","4","576"]},"As illustrated in , the top conductive layer  includes the sensor elements for both the columns and the rows of the sensor array, as well as the connections between the sensor elements of the columns of the sensor array. The bottom conductive layer  includes the conductive paths that connect the sensor elements of the rows that reside in the top conductive layer . The conductive paths between the sensor elements of the rows use vias  to connect to one another in the bottom conductive layer . Vias  go from the top conductive layer , through the dielectric layer , to the bottom conductive layer . Coating layers  and  are applied to the surfaces opposite to the surfaces that are coupled to the dielectric layer  on both the top and bottom conductive layers  and .","It should be noted that the space between coating layers  and  and dielectric layer , which does not include any conductive material, may be filled with the same material as the coating layers or dielectric layer. Alternatively, it may be filled with other materials.","It should be noted that the present embodiments are not be limited to connecting the sensor elements of the rows using vias to the bottom conductive layer , but may include connecting the sensor elements of the columns using vias to the bottom conductive layer . Furthermore, the present embodiments are not limited two-layer configurations, but may include disposing the sensor elements on multiple layers, such as three- or four-layer configurations.","When pins are not being sensed (only one pin is sensed at a time), they are routed to ground. By surrounding the sensing device (e.g., touch-sensor pad) with a ground plane, the exterior elements have the same fringe capacitance to ground as the interior elements.","In one embodiment, an IC including the processing device  may be directly placed on the non-sensor side of the PCB. This placement does not necessary have to be in the center. The processing device IC is not required to have a specific set of dimensions for a touch-sensor pad, nor a certain number of pins. Alternatively, the IC may be placed somewhere external to the PCB.",{"@attributes":{"id":"p-0117","num":"0116"},"figref":"FIG. 6A","b":["601","603","1","603","3","603","1","603","3","601","603","1","603","3"]},"In one embodiment, the keyboard keys may be assigned to pre-defined areas of the sensing area using a data structure. For example, the data structure may be a key-mapping data structure. The data structure may include positional data of the pre-defined areas of the keyboard keys. The positional data may be the x- and y-coordinate ranges of the pre-defined areas of the keyboard keys. Accordingly, after the location of the conductive object that is present on the sensing device is determined, the position of the conductive object may be compared with the positional data of the pre-defined areas of the data structure to determine which keyboard key has been pressed. After determining which keyboard key has been pressed, the keyboard data that corresponds to the pressed key can be sent to a host or other component that is external to the processing device. In one embodiment, the data structure may be pre-determined and stored in memory of the processing device. The data structure may be a look-up table. Alternatively the data structure may be defined during operation of the processing device. This may be used to calibrate the pre-defined areas of the sensing device.","Sensor element  may be coupled to additional sensor elements in the sensing device, such as to other sensor elements in the same row or column. Furthermore, it should be noted that the embodiments described herein are not limited to being diamond shaped, but may include other shapes, such hexagons, octagons, squares, rectangles, triangles, circles, ovals, or the like.",{"@attributes":{"id":"p-0120","num":"0119"},"figref":"FIG. 6B","b":["210","600","604","0","604","47","600","606","0","606","1","606","2","606","3","606","0","606","1","210","605","0","605","1","606","2","606","3","210","605","2","605","3","604","0","604","47","600","600"]},"As previously described, after the keyboard keys have been assigned a pre-defined area of the sensing device, a presence of a conductive object can be detected on the sensing device. The processing device determines the position of the presence of the conductive object, and selects which keyboard key has been pressed based on the pre-defined areas and the position of the presence of the conductive object. Selecting the keyboard may include comparing the position with the pre-defined areas. Once the keyboard key has been selected, the processing device may output keyboard data that corresponds to the selected key to a component external to the processing device. The component may be a processor, a driver of a processor, or an embedded controller.","In one embodiment, the position of the presence of the conductive object may be determined by measuring a capacitance (e.g., or capacitance variation) of each row (e.g., () and ()) of sensor elements of the capacitance sensor matrix , and determining a first dimension position (e.g., y-coordinate location) based on the measured capacitance of the rows of sensor elements. Similarly, a capacitance of each column (e.g., () and ()) of sensor elements of the capacitance sensor matrix  can be measured to determine a second dimension position (e.g., x-coordinate location) based on the measured capacitance of the columns of sensor elements. The position of the detected presence of the conductive object is determined using the first and second dimension positions.","As described above, the keyboard keys ()-() can be assigned to pre-defined areas using a data structure. After determining the position of the conductive object, the processing device can compare the position with the pre-defined areas of the data structure to select which keyboard key has been pressed.","This embodiment includes 3\u00d73 capacitance sensor matrix. However, it should be noted that other dimensions may be used to detect the presence of the conductive object. Similarly, it should be noted that the embodiments are not limited to 48 buttons, or the configuration of the 48 buttons in a 6\u00d78 matrix, but may include any number of keyboard keys, such as 2 to 107 keyboard keys, and other configurations (such as illustrated in ). It is also contemplated that a keyboard having more than 107 keyboard keys may be implemented using a capacitance sensor matrix, as described herein.",{"@attributes":{"id":"p-0125","num":"0124"},"figref":["FIG. 6C","FIG. 6C"],"b":["210","650","606","0","606","25","600","504","1","504","8","505","1","505","8","501","1","501","8","503","1","503","8","504","1","504","8","210","502","505","1","505","8","210","502","650","650","210","606","0","606","25"]},"As previously described, after the keyboard keys have been assigned a pre-defined area of the sensing device, a presence of a conductive object can be detected on the sensing device. In this embodiment, the conductive object  is detected in the pre-defined area of the keyboard key C (). In particular, the processing device  determines the position of the presence of the conductive object , and selects the keyboard key C (), which has been pressed, based on the pre-defined areas and the position of the presence of the conductive object . Selecting the keyboard may include comparing the position with the pre-defined areas, determining that the keyboard key C () has been pressed. Once the keyboard key C has been selected, the processing device may output keyboard data that corresponds to the keyboard key C to a component external to the processing device. The component may be a processor, a driver of a processor, or an embedded controller.","In this embodiment, similar method as to those described above may be used to determine the position of the presence of the conductive object . Similarly, as described above, the keyboard keys ()-() can be assigned to pre-defined areas using a data structure. After determining the position of the conductive object , the processing device  can compare the position with the pre-defined areas of the data structure to select which keyboard key has been pressed; in this case, keyboard key C ().",{"@attributes":{"id":"p-0128","num":"0127"},"figref":"FIG. 6D","b":["675","678","675","676","677","1","677","3","678","676","676","676"]},"Buttons ()-() are additional buttons for the handheld device. These buttons may be mechanical buttons, or alternatively, may be capacitance sensing buttons. These buttons may be used to provide additional button functionality to the handheld device. In another embodiment, the buttons may be incorporated with the keyboard , or not included at all in the handheld device .","As previously described, by implementing the keyboard in a touch-screen display, the real estate of the screen of display  is reduced. In order to not reduce the screen of display , handheld device  includes a keyboard  in addition to the display . Keyboard  includes a capacitance sensor matrix, as described in the embodiments herein. They keyboard  may have multiple keys, for example, 48, 83, 84, 101, 102, 104, 105, 107, or more keyboard keys (as described in more detail below). They keyboard  may have a layout, such as QWERTY, Dvorak, foreign-language layouts (e.g. \u201ckeyboard AZERTY\u201d in French-speaking countries), a space-cadet, or APL keyboard layouts. Alternatively, other customized layouts may be used.","In one embodiment, the keyboard  may be a PC keyboard. The PC keyboard has evolved over time to include more keys. For example, the PC\/XT keyboard layout has 83 keyboard keys. It includes original left hand side function key (F key) columns with 10 keys F1 through F10. These types of keyboards may not be compatible with later keyboard types. The PC\/AT keyboard layout includes 84 keys, and the 84key is the system request key (e.g., SysRq). The numerical block is clearly separated from the main keyboard, and they PC\/AT layout includes indicator LEDs for Caps\/Scroll\/NumLock. One enhanced keyboard layout includes 101 keyboard keys. This enhanced layout includes additional navigation and control keys, 12 function keys in row along the top of the main keyboard, often grouped as F1-F4, F5-F8, and F9-12. Another enhanced layout includes 102 keyboard keys. This layout is similar to the layout of 101 keys, but includes an additional key to the right of the left Shift key for European layouts. Another enhanced layout is the Windows\u00ae keyboard layout, which includes additional keys for the Windows\u00ae key (which provides a shortcut to open the \u201cStart\u201d menu in Windows\u00ae standard Explorer shell) and menu keys. Correspondingly, the European layouts included 105 keys for the additional key to the right of the left Shift key. An additional enhanced layout includes 107 keyboard keys, which includes the additional keys, such as Wake, Sleep, and Power keys for power management functionality. Alternatively, there are additional enhanced layouts that are called multimedia keyboard layouts, which may offer additional buttons to the 104 or 107 \u201cstandard\u201d keys, often providing volume control, media player buttons, and miscellaneous user-configurable shortcuts, e.g., to email clients, web browsers, document folders, applications, etc. It should be noted that the embodiments described herein are not limited to PC keyboards, and PC keyboard keys, but may include other keyboard keys for other platforms and other systems.","In one embodiment, handheld device  is a mobile handset. Alternatively, handheld device  may be PDA, Smartphone, or laptop. Alternatively, the embodiments described herein may be used in a keyboard, a television, a remote control, a display, a handheld multi-media device (e.g., MP3 player), a handheld video player, a handheld gaming device, a control panel, or the like.","In one embodiment, the keyboard  may include a capacitance sensor matrix, as describe above, and both keyboard keys and cursor positioning may be implemented on the same sensor matrix. Alternatively, the processing device may be coupled to both the sensor matrix of a keyboard, and an additional user input device, such as a cursor positioning device, a touch-sensor pad, touch-sensor slider, touch-sensor button, mouse, touch-screen display, or the like.","In one embodiment, the keyboard  can be implemented within a surface area on a device, such as a handheld device. For example, the keyboard  may be a standard PC keyboard (e.g., including 101 to 107 keyboard keys) and may be implemented within a 3 cm\u00d73 cm surface area. For example, keyboard  may have a height  of 3 cm, and a width  of 3 cm. Alternatively, the keyboard  may have other dimensions within the same surface area. In another embodiment, the keyboard key  may be implemented within a surface are less than 10 cm\u00d710 cm. Alternatively, other surface areas may be used to implement the keyboard keys of keyboard .","In one embodiment, the keyboard  may be a standard PC keyboard (e.g., including 101 to 107 keyboard keys). The sensing device, which includes keyboard , is coupled to processing device  using less than 21 capacitance sensing pins. Alternatively, keyboard  may include 48 keyboard keys, and the processing device  is coupled to the sensing device, which includes the 48 keyboard keys assigned to pre-defined areas of the sensing device, using 4 capacitance sensing pins. In another embodiment, the keyboard  includes 101 keyboard keys and the processing device  is coupled to the sensing device using less than 12 capacitance sensing pins. Alternatively, the keyboard  includes 107 keyboard keys and the processing device  is coupled to the sensing device using less than 21 capacitance sensing pins. In another embodiment, the keyboard  includes 107 keyboard keys and the processing device  is coupled to the sensing device using less than 12 capacitance sensing pins.",{"@attributes":{"id":"p-0136","num":"0135"},"figref":["FIG. 7","FIGS. 3A-3C","FIGS. 3A-3C"],"b":["700","700","701","702","703","4","704","704","4","706"]},"Alternatively, the method may be performed in different orders, such as measuring the rows before the columns, or measuring both rows and columns before making the determination of the x- and y-coordinates.",{"@attributes":{"id":"p-0138","num":"0137"},"figref":"FIG. 8","b":["800","804","800","801","802","803","801","802","801","802","801","801","802","801"]},"Embodiments of the present invention, described herein, include various operations. These operations may be performed by hardware components, software, firmware, or a combination thereof. As used herein, the term \u201ccoupled to\u201d may mean coupled directly or indirectly through one or more intervening components. Any of the signals provided over various buses described herein may be time multiplexed with other signals and provided over one or more common buses. Additionally, the interconnection between circuit components or blocks may be shown as buses or as single signal lines. Each of the buses may alternatively be one or more single signal lines and each of the single signal lines may alternatively be buses.","Certain embodiments may be implemented as a computer program product that may include instructions stored on a machine-readable medium. These instructions may be used to program a general-purpose or special-purpose processor to perform the described operations. A machine-readable medium includes any mechanism for storing or transmitting information in a form (e.g., software, processing application) readable by a machine (e.g., a computer). The machine-readable medium may include, but is not limited to, magnetic storage medium (e.g., floppy diskette); optical storage medium (e.g., CD-ROM); magneto-optical storage medium; read-only memory (ROM); random-access memory (RAM); erasable programmable memory (e.g., EPROM and EEPROM); flash memory; electrical, optical, acoustical, or other form of propagated signal (e.g., carrier waves, infrared signals, digital signals, etc.); or another type of medium suitable for storing electronic instructions.","Additionally, some embodiments may be practiced in distributed computing environments where the machine-readable medium is stored on and\/or executed by more than one computer system. In addition, the information transferred between computer systems may either be pulled or pushed across the communication medium connecting the computer systems.","Although the operations of the method(s) herein are shown and described in a particular order, the order of the operations of each method may be altered so that certain operations may be performed in an inverse order or so that certain operation may be performed, at least in part, concurrently with other operations. In another embodiment, instructions or sub-operations of distinct operations may be in an intermittent and\/or alternating manner.","In the foregoing specification, the invention has been described with reference to specific exemplary embodiments thereof. It will, however, be evident that various modifications and changes may be made thereto without departing from the broader spirit and scope of the invention as set forth in the appended claims. The specification and drawings are, accordingly, to be regarded in an illustrative sense rather than a restrictive sense."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The present invention is illustrated by way of example, and not by way of limitation, in the figures of the accompanying drawings.",{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 1A"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":["FIG. 1B","FIG. 1A"]},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 1C"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 1D"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 3A"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 3B"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 3C"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 5A"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 5B"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 5C"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":["FIG. 5D","FIG. 5C"]},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 6A"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 6B"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 6C"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 6D"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 8"}]},"DETDESC":[{},{}]}
