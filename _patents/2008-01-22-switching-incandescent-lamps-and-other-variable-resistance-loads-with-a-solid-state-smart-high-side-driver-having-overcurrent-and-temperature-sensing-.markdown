---
title: Switching incandescent lamps and other variable resistance loads with a solid state, smart, high side driver having overcurrent and temperature sensing protection circuits
abstract: A circuit and method for controlling a smart, high side driver with current and temperature sensing so that it can turn ON a relatively high current load of incandescent lamps or similar loads within a practical time. The output of the high side driver is sensed. In response to the coexistence of an ON command applied to the control input of the high side driver and the output terminal of the high side driver switching to an OFF state, an OFF command is applied to the control input of the high side driver. That OFF command is maintained for a selected cooling time interval. An ON command is applied to the control input of the high side driver after the selected cooling time interval. The selected cooling time interval is at least long enough to allow the MOS/FET temperature to cool to the thermal reset of its status temperature T, which is the temperature below which the driver operates with its highest current limit Iwhen it is turned back on.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07672106&OS=07672106&RS=07672106
owner: 
number: 07672106
owner_city: 
owner_country: 
publication_date: 20080122
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["CROSS-REFERENCES TO RELATED APPLICATIONS","STATEMENT REGARDING FEDERALLY-SPONSORED RESEARCH AND DEVELOPMENT","REFERENCE TO AN APPENDIX","BACKGROUND OF THE INVENTION","BRIEF SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE INVENTION"],"p":["Not Applicable","Not Applicable","Not Applicable","1. Field of the Invention","This invention relates generally to electronic circuits for the controlled switching of high current loads and more particularly relates to controlling a solid state, smart, high side, high current, driver, that has internal current and temperature sensing, in a manner that it is enabled to switch incandescent lamps ON within a practical time interval.","2. Description of the Related Art","Convenient, energy efficient operation of electrical equipment, appliances and other electrical devices, such as flashers for periodically illuminating signaling or warning lights, often requires a switch for turning the device on and off. This is particularly important when multiple different devices are powered by a vehicle battery in order to minimize drain on the battery by permitting selected operation of only those devices that are currently being used. Some electrical devices are high power devices that draw large currents. For those, it is often desirable to control the switch that switches the high current from a low power electrical command signal. For this purpose, relays or power contactors were traditionally used. However, such devices have mechanical electrical contacts which are subject to corrosion and the possibility of having the contacts welded together and suffer from numerous other failure modes.","When solid state technology appeared, it was first applied to develop solid state switches that could be used for switching low currents associated with low power applications but the available solid state switching devices could not tolerate the higher currents of higher power loads. However, MOS\/FET devices have more recently been developed that can switch currents on the order of a hundred amperes or more. These switching devices have thousands of MOS\/FETs formed in an integrated circuit and connected in parallel so they each carry a small portion of the current and operate together as a high current, composite MOS\/FET.","Additionally, modern integrated circuit technology also permits a variety of other circuits to be formed in the same integrated circuit to provide for operating, controlling and protecting the MOS\/FETs. Because these associated circuits include digital logic and microcontrollers and include sensing circuits that can detect a variety of fault conditions and, in response to sensed conditions programmed into the digital control circuits, turn off the MOS\/FETs in order to protect the integrated circuit module, the modules are called \u201csmart\u201d.","Consequently, the combination of the current switching MOS\/FETs and their associated circuits provides high power switch modules that manufacturers can use to construct high power switches for applications in their field. In addition to the relatively high currents that each integrated circuit module can switch, manufacturers of high power switches can connect multiples of these integrated circuit modules in parallel to increase the maximum current their products can switch by a multiplier equal to the number of parallel modules. The use of these switching devices is increasing because there is no price differential between the older conventional contactors and the newer, smart, MOS\/FET switches. A designer chooses the switches with the lowest drain to source resistance, Ror R, because they give the lowest heat dissipation in the MOS\/FETs.","A particularly useful type of power switching module is a smart, high side, high current driver. High side means that the power switching terminals are connected between the high side of the power source, such as the positive terminal of a battery, and the load being switched. The second terminal of the load is connected to a common power circuit ground. Such drivers also provide a terminal connected to an additional MOS\/FET source which is part of a current mirror circuit that provides a current signal to an external circuit that is proportional to the load current. There are a few manufacturers who supply such modules such as a PROFET\u00ae BTS555 offered by Infineon Technologies. This first generation high current power switch module was designed to control a starting motor on a vehicle.","The next step in the evolution of the high power MOS\/FET high side drivers was current limiting. An additional MOS\/FET source is used for an additional current minor to provide a sensed current signal to the internal control circuitry of the high side driver that is proportional to the load current. Such high side drivers have a digital logic control input that can be controlled by external logic circuitry, such as a microcontroller, which commands the driver to an ON state or an OFF state. The internal control circuits and the high current switching MOS\/FETs can be on one integrated circuit or, more commonly, on multiple integrated circuits that are wired together. The high side driver is permanently grounded and power is permanently applied to it to power its control circuitry. Consequently, the internal control circuit of such high side drivers is able to continuously sense the output load current and modulate the load current by varying the gate voltage including switching OFF the load current by clamping the gate to zero in response to detected fault conditions.","In addition to current sensing and current limiting, the second generation high side drivers also have temperature sensors that have an output connected to their internal control circuit for sensing the temperature of the MOS\/FETs and controlling the load current. Consequently, their control circuits are able to modulate or turn OFF the load current as a function of this temperature and thereby also protect the high side driver from excessive temperatures.","An example of a prior art high side driver is a VND5004-E sold by STMicroelectronics. This driver has a minimum 4 milliohms Rand its circuit is illustrated in . The VND5004-E driver has two current switching circuits for independently controlling two loads, although for some applications the two are advantageously connected in parallel to distribute the current between them and allow twice the maximum current of each. Each switching circuit includes two composite MOS\/FETs  and  and several associated control circuits for operating, controlling and protecting the MOS\/FETs. The control circuits include a logic circuit , such as a microcontroller or other digital logic circuit, programmed with suitable instructions for performing the control processes. The operating, controlling and protecting circuits include circuits for sensing load current and MOS\/FET temperature as well as other circuits but they are not described in detail because they are a part of the prior art and are described in the manufacturer's specifications.","High side drivers of this type also have terminals for connecting the driver to external circuitry. The VND5004-E driver has outputs  and , one for each of its two switching circuits, for connection to separate loads or the same load. It also has control inputs  and  for respectively controlling each of the high current, composite MOS\/FETs  and . The other terminal of a load is connected to the power circuit ground. The power source, such as a 12 or 24 volt vehicle battery, is connected to a battery terminal  and the other power source terminal  is connected to the power circuit ground. The VND5004-E driver has a pair of sensing or diagnostic terminals  and  which are outputs of internal current minor circuits. Each diagnostic terminal provides an output current that is proportional to the load current through its associated composite MOS\/FET  and  respectively. Another current minor circuit for each MOS\/FET is used for sensing the same output load currents but provides its output signal to the internal logic of the high side driver. Each current mirror circuit utilizes a few of the large number of individual MOS\/FETs formed in the integrated circuit of the high side driver. A current minor circuit is well known in the art and, as applied to the drivers, the drains of all the individual MOS\/FETs are connected together and most of the sources of the individual MOS\/FETs are connected to the main output load terminal  or  for switching the high load current. A few of the sources, however, are instead used for the current minor circuits and connected to the sensing terminals  and  or to provide the internal feedback load current signal. As known in the art, a current mirror circuit provides a current that is proportional to the load current through the majority of MOS\/FETs that conduct the load current through the driver.","The operation of the VND5004-E driver provides an example of the operation of the second generation drivers. The internal logic control circuits provide generally the following protective functions. In the event that the internal current sensor detects an overload current that exceeds a selected maximum current limit I, such as 100 amps for example, the internal control logic decreases the voltage applied to the MOS\/FET gates to maintain the current at the maximum limit. Unfortunately, this increases the drain to source resistance Rwhich results in more heat dissipation in the MOS\/FETs. Because the current equals the applied source voltage divided by the sum of the load resistance and the drain-source resistance R, in order to limit the current to a fixed current limit, the less the resistance of the load, the greater must be the drain-source resistance RIDS. Therefore, when the driver is operating at a particular current limit, the less the resistance of the load, the greater the heat dissipation in the MOS\/FETs.","Because the internal control circuit of the driver also senses MOS\/FET temperature, in the event that the sensed temperature exceeds a maximum temperature T, the internal control logic shorts the MOS\/FET gate to ground and thereby opens the MOS\/FETs to a non-conductive, high resistance state. Consequently, if a MOS\/FET gets too hot, the high side driver is shut down by its own associated, internal control circuitry before the driver is damaged.","Additionally, the second generation drivers are programmed to turn the MOS\/FETs back on after their temperature drops to an intermediate temperature TR as a result of heat transfer by conduction from the MOS\/FETs through heat sinks and into the surrounding environment. However, under the described conditions, the MOS\/FETs are turned back on at a reduced maximum current limit ILIML, such as 40 amps, for example. Thereafter, if the MOS\/FET temperature again rises to the maximum temperature TTSD, the MOS\/FETs are again shut down to a non-conductive, high resistance state to stop all current flow. Then, when the temperature again falls below the intermediate temperature TR the MOS\/FETs are again turned on but again at the reduced maximum current limit ILIML. This operation then repeats unless and until the temperature sensors detect that the MOS\/FETs have cooled to a lower temperature TRS. This reduced current limit is imposed by reducing the MOS\/FET gate voltage which, as previously mentioned, results in an increased drain to source resistance RDS and more dissipation of electrical energy as heat in the MOS\/FET. This increased drain to source resistance RDS is greater than the specified minimum drain to source resistance, such as the 0.004 ohms described above, and therefore dissipates more heat in the MOS\/FETs than would an RDS equal to the minimum RDS.","There is an important reason that the high side driver is programmed to limit the current to a lower current limit Ifollowing the detection of an excessive temperature above the shut down temperature T. In order to optimize the usefulness of the driver, it is desirable to have the broadest range of normal operating conditions; i.e. the highest current limit and the highest permissible temperature of operation. However, silicon is brittle and if repeatedly cycled between wide temperature extremes, it will eventually be damaged (e.g. crystal fracture) and become inoperable. The larger the temperature differential over which the device cycles, the shorter the lifetime of the device. In order to maximize the current limitation, the internal control circuit of the driver initially turns the driver ON at its maximum current limit I. The internal control circuit turns it OFF if the temperature reaches the maximum temperature T. However, the driver control circuit thereafter allows it to cool to an intermediate temperature Tbut then limits its load current to a lower current limit Iin order to protect the driver. Consequently, the temperature algorithm used by the internal control circuit has multiple temperature levels so the MOS\/FETs will cycle between two, not so extreme temperatures after its temperature has exceeded its maximum temperature T. So, in summary, in order to get the broadest range of operating characteristics, the device first applies its highest current limit I, such as the 100 amp current limit of the VND5004A-E, which, under most and\/or normal conditions will not be exceeded or cause an overtemperature. However, once the control circuit of the driver turns the driver OFF as a result of an excessive temperature, it then goes to a much lower current limit and turns the driver back ON when the MOS\/FET temperature falls to an intermediate level in order to prevent cycling between excessive temperature extremes so as to reduce the mechanical stress on the silicon device.","If the driver is controlling the current through any fixed impedance load, the above-described operation works fine. If a dead short is applied to the load terminals, the internal control circuit switches the load OFF and also protects driver because there are no excessive currents.","However, there is a problem when a high side driver having this control algorithm is applied to controlling the current through incandescent lamps, such as, for example, the incandescent lamps on a motor vehicle. Some motor vehicles have large numbers of incandescent lamps, particularly emergency vehicles, such as ambulances, emergency medical service vehicles or fire trucks. Not only do they often have a large number of lamps, but they also have high power, high light intensity lamps. Such emergency motor vehicles typically are equipped with many exterior lamps for signaling the presence of the vehicle, interior lamps for lighting their interior work areas and lamps for illuminating areas outside and around the vehicle. One example of a switching module that advantageously uses a smart, high side driver is a flasher for the exterior signal lights of an emergency motor vehicle. Its function is to turn the lights ON and OFF in a periodic manner to increase the visibility of the vehicle and heighten the awareness of its presence and movement by nearby motorists. The problem is that the second generation, smart, high side drivers of the type described are unable to turn on many of the incandescent lamp loads presented by such vehicles within a useful time interval. For example, for some banks of lamps, the incandescent lamps may take on the order of a minute to be turned on by the driver. For some lamps with an even higher power demand, the lamps can never be turned on by the high side driver using the above-described control algorithm.","It is therefore an object and feature of the invention to provide a circuit and a method of operating smart, high side drivers of the type described so that the drivers are able to turn on loads that include incandescent lamps (or other electrical loads that have a similar characteristic) that interact with the high side driver to prevent the driver from turning on the load within an acceptable and practical time interval.","In briefest summary, the invention is a circuit and method for controlling the high side driver by (1) sensing the driver's output state, (2) applying an OFF command to the driver's control input following shut down of the high side driver by its own internal control circuit as a result of the sensed MOS\/FET temperature reaching its shutdown temperature T, (3) holding the driver OFF to force an extended cool down for a selected cooling time interval, and (4) then applying an ON command to the driver's control input. The selected cooling time interval is empirically determined for each high side driver model and is at least sufficient to allow the MOS\/FET temperature to cool to its thermal reset status temperature Twhich is the temperature below which the driver operates with its highest current limit kiwi when it is turned back ON by an ON command at its control input. This avoids the programmed pattern of switching ON\/OFF at the lower current limit I.","The method of the invention is a method for controlling a solid state, smart, high side driver for controlling the application of electrical power from a DC electrical source to a load when the load has a transient characteristic that the load increases in electrical impedance following the application of power to the load. The high side driver has overcurrent and driver temperature sensing and protection circuits, a control input terminal for applying an ON state or an OFF state command to the high side driver and a power output terminal for connection to the electrical load. The method of the invention comprises:","(a) sensing the output terminal of the high side driver for detecting that the high side driver has turned to an OFF state; and","(b) in response to the coexistence of an ON command applied to the control input of the high side driver and the output terminal of the high side driver switching to an OFF state, applying an OFF command to the control input of the high side driver, maintaining the OFF command at the control input of the high side driver for a selected cooling time interval, and applying an ON command to the control input of the high side driver after the selected cooling time interval.","The apparatus of the invention is an electronic switch for controlling the application of electrical power from a DC electrical source to a load, the load having a transient characteristic that the load increases in electrical resistance following the application of power to the load. The electronic switch comprises:","(a) a solid state, smart, high side driver having overcurrent and driver temperature sensing and protection circuits, a control input terminal for applying an ON state command or an OFF state command and a power output terminal for connection to the electrical load, the high side driver including an internal control circuit having stored instructions causing the driver (i) in response to an ON command continuously applied to its control input, to switch to an ON state at a higher current limit Iif the driver's sensed temperature does not exceed a lower, reset status temperature T, (ii) in the absence of an OFF command, to protectively switch to an OFF state if its sensed temperature exceeds a thermal shutdown temperature T, and (iii) in the absence of an OFF command, to switch to an ON state at a lower current limit Iif its temperature falls from the thermal shutdown temperature Tto an intermediate reset temperature T; and","(b) a solid state, digital logic, control circuit externally of the high side driver and having at least one external control input for application of an OFF command or an ON command, an output connected to the control input of the high side driver and an input connected to the power output terminal of the high side driver for sensing the ON and OFF state of the output of the high side driver, the external digital controller having stored instructions causing the external controller, in the absence of an OFF command at the external control input, (i) to apply an OFF command to the input terminal of the high side driver in response to sensing that the high side driver has turned to an OFF state, (ii) to maintain the OFF command at the input terminal of the high side driver for a selected cooling time interval, and (iii) to apply an ON command to the input terminal of the high side driver after the selected time interval.","In describing the preferred embodiment of the invention which is illustrated in the drawings, specific terminology will be resorted to for the sake of clarity. However, it is not intended that the invention be limited to the specific term so selected and it is to be understood that each specific term includes all technical equivalents which operate in a similar manner to accomplish a similar purpose. For example, the word connected or term similar thereto are often used. They are not limited to direct connection, but include connection through other circuit elements where such connection is recognized as being equivalent by those skilled in the art. In addition, many circuits are illustrated which are of a type which perform well known operations on electronic signals. Those skilled in the art will recognize that there are many, and in the future may be additional, alternative circuits which are recognized as equivalent because they provide the same operations on the signals.","I have found that the high side driver is unable to turn on incandescent lamps within a practical time interval, if the lamps have a significant power demand, because of an interaction between a particular electrical characteristic of incandescent lamps, or other loads having the same characteristic, and the above-described control algorithm or programmed process for protecting the high side driver. This characteristic of incandescent lamps is illustrated in . At the instant that electrical power is first applied to an incandescent lamp, its filament is relatively cold and therefore has a relatively low resistance. This low resistance results in a high initial inrush current through the lamp that begins heating the filament. In ordinary operation, as the filament heats up from the current passing through it, the temperature increase causes the electrical resistance of the filament to increase. As the electrical resistance increases, the current decreases. As the lamp makes the transition from its OFF state to its ON steady state, the resistance may increase, for example, by a factor of 10 or 20 and therefore the electrical current may decrease by a factor of 10 or 20.","From that characteristic it is easy to see that a lamp or a connected set of lamps can have a steady state operating current that is lower than the maximum current limit Iof a high side driver MOS\/FET, but have an initial inrush current, in the absence of current limiting, that not only exceeds that current limit I, but also quickly causes the driver to overheat and be shut down by its internal control circuit. For example, a set of lamps that have a normal operating current of 50 amps and are driven by a high side driver with a 100 amp higher current limit I, might have an initial inrush current of 500 or 1000 amps. Although the response of a high side driver of the type described above will be described in more detail below, this extraordinarily high current may typically cause the MOS\/FETs to reach their maximum shut down temperature Twithin, for example, 1 to 5 milliseconds and be shut down by the internal control circuit. At that point the lamps have not been heated significantly, their resistance will not have increased significantly, and therefore, when power is next applied to the lamps, the inrush current would not be much less than the first inrush current, except for current limiting imposed by the driver. When the MOS\/FETs are again turned ON but with the lower current limit Iand higher drain-source resistance R, as described above, the lower current limit results in less heating power being applied to heat the lamps, the MOS\/FETs will soon again reach the maximum shut down temperature Tand the MOS\/FETs will again be shut down. The result is that, when the incandescent lamps are switched by a high side driver of the typed described, the lamps are powered by an initial current pulse at the higher current limit Ifollowed by a series of current pulses at the lower current limit I.","That series of current pulses applied to the incandescent lamps produces one of multiple results. If the initial inrush current is less than the maximum current limit I, the lamps will come on normally and the invention is unnecessary. If the initial inrush current exceeds the maximum current limit IAND enough power is dissipated in the lamp filaments from each current pulse to replace the heat lost by the filaments between the pulses and to additionally heat the filaments further, then the filaments will eventually be heated to a sufficiently high temperature and high resistance that the current becomes low enough that the driver can, eventually, continuously power the lamps. Unfortunately, the length of time required is often too long for practical use. For example a vehicle light flasher that requires a minute to turn the lamps fully on is of no practical value. Furthermore, if the initial inrush current exceeds the maximum current limit IAND enough power is NOT dissipated in the lamp filaments from each current pulse at the lower current limit Ito replace the heat lost by the filaments between the pulses and also heat the filaments further, then the filaments will never be heated to a sufficiently high temperature and resistance that the driver can continuously power the lamps. The lamps are never illuminated.","Incandescent lamps are not the only type of electrical load that exhibits this problematic characteristic that is illustrated in  and therefore would cause the same type of response by the high side driver. A capacitor being charged from a DC source also exhibits this characteristic. Therefore, a load that has a high capacitive reactance can also be advantageously driven by a high side driver that is controlled in accordance with the invention.",{"@attributes":{"id":"p-0043","num":"0042"},"figref":["FIG. 1","FIG. 2","FIG. 2"],"b":["40","42","44","46","46","42","50","40","46","46","47"]},"The high side driver  of the switching module also has an external control circuit  for controlling the driver  in a way that takes advantage of the high current and protective capabilities of the high side driver, but also controls the driver in a way that allows the driver to heat up the lamps to a steady state temperature and full illumination intensity in considerably less time than the driver  alone is able to do. An output of the external control circuit  is connected to the control input C of the driver . The external control circuit  has conventional manual inputs  for human control of the lamps and may also have other inputs  from other circuits. As known to those skilled in the art, these inputs can have a variety of intermediate circuits and devices upstream of the external control circuit .",{"@attributes":{"id":"p-0045","num":"0044"},"figref":["FIG. 3","FIG. 3"],"b":["40","40","40","40","40"],"sub":["LIMH","J ","TSD","R ","RS","1","RS","LIMH","3"]},{"@attributes":{"id":"p-0046","num":"0045"},"figref":"FIG. 3","sub":["2 ","3","LIMH ","R"],"b":["40","42"]},"As also illustrated in  between times tand t, upon application of an ON command to the control input C of the driver  at time t, the driver switches ON and supplies current at the maximum current limit I. When the MOS\/FET temperature Treaches the shut down temperature T, at time t, the driver is shut down and the load current is turned OFF. From times tto t, the MOS\/FET temperature Tdeclines as heat is conducted away. When the MOS\/FET temperature Tfalls to the intermediate temperature Tat t, the driver  switches ON again but this time at its lower current limit T. When the temperature Tagain rises to T, at t, the driver  is again shut off. As long as the control input C of the driver  is commanded ON, the current pulses at the lower current limit Tcontinue to be applied to the load as the temperature Toscillates between temperatures Tand T. So long as the lamp filament does not become sufficiently hot that the current overload is eliminated, the MOS\/FETs remain hot, oscillating between temperatures Tand T, the lamps are not illuminated and the device never returns to its higher current limit I.","As is apparent to those skilled in the art, the energy applied to the lamps for heating the filaments is proportional to the area under the load current pulses. Looking at the current pulses in  between tand t, it can be seen that those current pulses are so short and widely spaced, that the rate of applying the heat energy, i.e. the power, applied to the lamps is relatively low. That is why the lamps come on too slowly or not at all.","In the conventional control of the high side driver, the control input of the high side driver is simply commanded ON or OFF to turn the driver ON or OFF as the load is intended to be ON or OFF. This results in the inability of the high side driver to turn on high power incandescent loads for the reasons explained above. However, because the power source is continuously powering the control circuitry of the driver , its control input can be switched and its internal circuitry will respond regardless of whether the driver  is in an ON state or an OFF state.","The invention uses this opportunity by modulating the control input of the high side driver while the incandescent lamps are being warmed up. The invention forces a cool down time interval whenever the driver is shut down as a result of its temperature rising to T. This cooling time interval is made long enough to avoid the switching and oscillating of the driver between its ON and OFF states at the low current Ias illustrated between times tand tin . The driver's control input C is modulated by initially switching the driver  ON so that is applies the 100 amp pulse. If and whenever the driver is switched OFF by its internal control circuit because the MOS\/FETs have reached temperature T, the external control circuit commands the driver  OFF. The external control maintains that OFF command for a cooling time interval. After expiration of the cooling time interval, the external control circuit then commands the driver back ON. The length of the cooling time interval is at least long enough to permit the driver to cool sufficiently that is turns ON at its higher current limit I. Therefore, the driver applies the next current pulse to the incandescent load at the higher current limit I. That sequence is repeated so that all current pulses applied to the load are at the higher current limit Iuntil finally, the incandescent lamps are heated sufficiently that the load current is reduced sufficiently that the driver does not turn off from overheating. The result is that the MOS\/FETs stays cooler and the lamps are illuminated more quickly.","The apparatus of the invention uses a high side driver of the type described and that is programmed so that, in response to an ON command continuously applied to the driver's control input, the driver switches to an ON state at a higher current limit Iif the driver's sensed temperature does not exceed a lower, reset status temperature T, the driver switches to an OFF state if its sensed temperature exceeds a thermal shutdown temperature T, and the driver switches to an ON state at a lower current limit Iif its temperature falls from the thermal shutdown temperature Tto an intermediate temperature T.","Describing the method in more detail, the invention is a method for controlling a solid state, smart, high side driver for controlling the application of electrical power from a DC electrical source to a load when the load has a transient characteristic that the load increases in electrical impedance following the application of power to the load. The high side driver used with the method has overcurrent and temperature sensing and protection circuits, a control input terminal for applying an ON state or an OFF state command to the high side driver and a power output terminal for connection to the electrical load.","The output terminal of the high side driver is sensed continuously for detecting when the high side driver has turned to an OFF state. The external control circuit of the switching module controls the high side driver and therefore has stored information on the state of the ON or OFF state of the digital command applied to the control input of the high side driver.","In response to the coexistence of an ON command applied to the control input of the high side driver and the output terminal of the high side driver switching to an OFF state, an OFF command is applied to the control input of the high side driver. This OFF command is maintained at the control input of the high side driver for a selected cooling time interval. An ON command is applied to the control input of the high side driver after the selected cooling time interval.","The method more specifically comprises maintaining the OFF command at the control input of the high side driver for a selected cooling time interval that is at least as long as a heat dissipation time required for the sensed temperature of the driver, while in an OFF state, to cool from its thermal shutdown temperature T, to its reset status temperature T.","The length of the cooling time interval is essentially not a function of the load impedance or the load current that flows when the driver is in an ON state. The cooling time interval must be long enough for enough of the heat energy stored in the mass of the MOS\/FET at shutdown temperature T, to be transferred to the ambient environment that the MOS\/FET temperature falls to the thermal reset of status temperature T. The time for sufficient heat transfer may be called the heat dissipation time. The temperature of the MOS\/FETs is a function of (1) the electrical power dissipated as heat in the MOS\/FET resistance Ras a result of load current, and (2) the rate at which that heat is transferred to the ambient environment. However, when the MOS\/FETs are turned OFF, no electrical energy is dissipated in them.","The temperature of the MOS\/FETs is essentially the same TTSD each time the external control circuit turns the driver OFF from overheating. For each particular model of switching module that uses a high side driver, the mass in which the heat energy is stored at this temperature is also the same. Therefore, for each particular model of switching module, the heat energy that must be dissipated to the ambient environment is the same finite quantity of heat energy.","Therefore, the heat dissipation time is a function of the thermal resistance of the heat flow path to the ambient environment and the temperature differential between the MOS\/FET and the ambient environment. The ambient temperature of the environment in which the driver is housed can vary widely between tropical and arctic regions and as a function of other heat generating equipment being located in close proximity and ventilation. The thermal resistance of the flow path is not affected by electrical operation but is a function of the package and heat sink structures. These structures will be different for each driver and for each switching module in which it is used but they do not change once being manufactured. Therefore, each driver and each model of switching module will have its own heat dissipation time which is independent of operating current. Consequently, the heat dissipation time required for the sensed temperature of the MOS\/FETs, while in an OFF state, to cool from the thermal shutdown temperature T, to the reset status temperature Tis, for each particular model, essentially a function of the ambient temperature of the switching module.","This allows the minimum length of the cooling time interval to be determined empirically from experimentation. The experiments are preferably performed at the highest ambient temperature which is expected to be encountered in applications of the model of switching module being tested. Under this experimental condition, a switching module of a particular design is experimentally operated at a plurality of different cooling time intervals. Preferably, a first cooling time on the order of 1 millisecond is stored in the external control circuit and the circuit is operated to determine whether, after the cooling time interval, the driver applies a current pulse at the higher current limit Ior at the lower current limit I. If the driver turns ON at the lower current limit I, then a longer cooling time interval is stored and the procedure is repeated. The procedure is repeated by storing progressively longer selected cooling time intervals until the shortest cooling time interval is found after which the driver is turned on at its higher current limit I. That last cooling time interval is the heat dissipation time and becomes the minimum cooling time interval for the particular switching module.","However, because there is a variation in the characteristics of every solid state device from it nominal characteristics, and because it is good engineering practice to provide a safety factor, it is desirable to provide a cooling time interval that is longer than the heat dissipation time. I have found that the cooling time interval that should be stored in the external control circuit of the switching module is at least three times the experimentally measured heat dissipation time.","I have found that, for practical applications that I have designed, the OFF command at the control input of the high side driver is desirably maintained for a selected cooling time interval that is longer than its ON time and is within the range of 1 millisecond to 20 milliseconds. For some designs and applications the cooling time interval may be more, but, more commonly, the OFF command at the control input of the high side driver should be maintained for a selected cooling time interval that is within the range of 3 milliseconds to 8 milliseconds.",{"@attributes":{"id":"p-0062","num":"0061"},"figref":["FIG. 5","FIG. 3"],"b":["60","60","62","64"],"sub":["4 ","5 ","LIMH","TSD","5 ","c ","9 ","c ","LIMH","LIML","LIMH ","LIML "]},"The fact that more power is coupled into the load can also be appreciated by considering the well known principle that the maximum power is transferred from a source to a load when the source and the load have the same impedance. The incandescent lamps have a very low resistance and therefore a very high inrush current during their critical start up. As previously stated, in order for the MOS\/FETs to limit the current to a fixed current limit, the less the resistance of the load, the greater must be the drain-source resistance R. Therefore, during the start up of an incandescent lamp load that, in the absence of current limiting, would have an inrush current several multiples of the current limit of the MOS\/FETs, any reduction of the drain-source resistance Rwould bring the impedance of the source and the impedance of the load nearer to equality. By controlling the high side driver so that all the current pulses are at the high current limit I, the invention operates the MOS\/FETs at the least possible drain-source resistance R.","Returning to , as the incandescent lamps are heated, their resistance increases and therefore the drain-source resistance Rcan be reduced further to still maintain the current limiting. The reduction in the drain-source resistance means that the current pulses become successively longer because less heat is dissipated in the MOS\/FETs so they can remain conducting longer before they reach the shut down temperature T. Because the successively longer pulses are not only longer but are at the higher current limit I, the heating of the lamps is accelerated. This can intuitively be observed by comparing the area under the load current pulses in  between tand tto the area under the load current pulses in . The area under the current pulses is proportional to the power applied to the incandescent load.",{"@attributes":{"id":"p-0065","num":"0064"},"figref":["FIGS. 6 and 7","FIGS. 6 and 7"],"b":["76","76","70","72","74"]},"The invention has been described in connection with the VND5004 family of high side drivers but another example of its application is to the VND920 family of high side drivers and relays. By \u201cfamily\u201d is meant variations which carry the same identification to designate the basic type of device but typically have additional alphanumeric characters to distinguish the family members from each other. The invention is also applicable to other devices which may have different alphanumeric identifications but have the same or only insubstantially different electrical properties.","Program for a MC908QY2 Microprocessor in External Control Circuit",{"@attributes":{"id":"p-0068","num":"0067"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"245pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"* Ambulance Flasher 4860GCPE using MC908QY2 04\/25\/07 REV A"]},{"entry":[{},"***********************************************"]},{"entry":[{},"* 1 VND5004 with output short and overload detection with modulation and"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"timeout"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"245pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"* 2 Over-temperature pulse width modulation 180 F. = 69 AD bits out of 256"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"bits"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"245pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"* 3 Production started with Lot - no production"]},{"entry":[{},"***********************************************"]},{"entry":[{},"***********************************************"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"119pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"126pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"* Port A Definitions",{}]},{"entry":[{},"* PA0 AD Temperature","PTA0\/AD0\/TCH0\/KBI0"]},{"entry":[{},"* PA1 IN C1 INPUT","PTA1\/AD1\/TCH1\/KBI1"]},{"entry":[{},"* PA2 IN Not Used","PTA2\/IRQ\/KBI2"]},{"entry":[{},"* PA3 IN Not Used","PTA3\/RST\/KBI3"]},{"entry":[{},"* PA4 IN B1 INPUT","PTA4\/AD2\/OSC2\/KBI4"]},{"entry":[{},"* PA5 IN A1 INPUT","PTA5\/AD3\/OSC1\/KBI5"]},{"entry":[{},{}]},{"entry":[{},"* Port B Definitions"]},{"entry":[{},"* PB0 IN Not Used"]},{"entry":[{},"* PB1 OUT Channel A"]},{"entry":[{},"* PB2 OUT Channel B"]},{"entry":[{},"* PB3 OUT Channel C"]},{"entry":[{},"* PB4 IN Not Used"]},{"entry":[{},"* PB5 IN Not Used"]},{"entry":[{},"* PB6 IN Not Used"]},{"entry":[{},"* PB7 IN Secondary Input Sense"]},{"entry":[{},{}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"231pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"ORG $0080"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"TCOUNT","DS 1","; 3.125 MSEC per bit time base- overal period"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"is 800 msec"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"FLAG","DS 1","; Control FLAG - one bit for each output"]},{"entry":[{},"TEMP","DS 2","; Temperature integration register 16 bit"]},{"entry":[{},"OTEMP","DS 1","\u2002; Over Temperature turn off cound bias"]},{"entry":[{},"CycleA","DS 2","; Overload cycle downcounter"]},{"entry":[{},"CycleB","DS 2","; Overload cycle downcounter"]},{"entry":[{},"CycleC","DS 2","; Overload cycle downcounter"]},{"entry":[{},{}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"ORG","$FFBE","; Block protect all FLASH memory"]},{"entry":[{},"DB","$00"]},{"entry":[{},{}]},{"entry":[{},"ORG","$F800","; USER MEMORY F800 - FDFF 1536 BYTES"]},{"entry":[{},{}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"91pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"RESET RSP","; Reset Stack Pointer"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"STA","COPCTL"]},{"entry":[{},{}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"245pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"*Branch to RESTART for any reset other than LVI and POR"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"LDA","SRSR"]},{"entry":[{},"AND","#%10000010"]},{"entry":[{},"BEQ","RESTART"]},{"entry":[{},{}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"245pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"* Preset data registers"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"CLR","PORTB"]},{"entry":[{},"CLR","TCOUNT"]},{"entry":[{},"CLR","OTEMP"]},{"entry":[{},"CLR","TEMP"]},{"entry":[{},"CLR","TEMP+1"]},{"entry":[{},"MOV","#3T,CycleA"]},{"entry":[{},"MOV","#255T,CycleA+1"]},{"entry":[{},"MOV","#3T,CycleB"]},{"entry":[{},"MOV","#255T,CycleB+1"]},{"entry":[{},"MOV","#3T,CycleC"]},{"entry":[{},"MOV","#255T,CycleC+1"]},{"entry":[{},"MOV","#%00001110,FLAG"]},{"entry":[{},"MOV","#%00001110,DDRB"]},{"entry":[{},{}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"245pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"*Set timer interrupt for 3.125 msec"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"91pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"RESTART LDA TSC","; Reading the TCS is required before TIM"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"Overflow FlagBit (TOF) can be cleared"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"MOV","#$50,TSC","; Reset TIM counter and prescaler, Clear TOF"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"if set and"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"; Set TIM Overflow Interrupt Enable Bit (TOIE)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"MOV","#39T,TMODH","; Set TIM Modulo High"]},{"entry":[{},"MOV","#16T,TMODL","; Set TTM Modulo Low"]},{"entry":[{},{}]},{"entry":[{},{}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"245pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"*Start of main program loop - clear all unused registers and enter a wait state"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"for next timer interrupt"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"245pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Start RSP"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"MOV","#$1F,ADSCR","; Put ADC in low power mode"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"133pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"LDA","$FFC0","; Load factory programed oscillator trim"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"calibration"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"147pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"STA","OSCTRIM","; Store calibration in oscillator trim register"]},{"entry":[{},"CLR","KBSCR"]},{"entry":[{},"CLR","KBIER"]},{"entry":[{},"CLR","INTSCR"]},{"entry":[{},"CLR","TSC0"]},{"entry":[{},"CLR","TSC1"]},{"entry":[{},"LDA","#$00"]},{"entry":[{},"STA","BSR"]},{"entry":[{},"STA","BFCR"]},{"entry":[{},"STA","FLCR"]},{"entry":[{},"STA","FLBPR"]},{"entry":[{},"STA","BRKSCR"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"STA","COPCTL","; Cop reset"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"WAIT","; Clear Interrupt Mask and wait for next Timer"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"Interrupt"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"SEI","; Set Interrupt Mask - this disables interrupts"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"including a Timer interrupt"},{"entry":{}}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"245pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"* Update Temperature measurement using the following filter program of"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"adding new reading to the sum of measurements"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"245pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"* and then subtracting their average from the sum."]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"105pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"TEMP0 MOV #$00,ADSCR","; Start AD conversion on PTA0"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"BRCLR","7,ADSCR,*","; Wait for conversion complete"]},{"entry":[{},"MOV","#$00,ADSCR","; Start AD conversion on PTA0"]},{"entry":[{},"BRCLR","7,ADSCR,*","; Wait for conversion complete"]},{"entry":[{},{}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"245pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"* Add the new measurement to the sum of measurements found in bytes TEMP"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"and TEMP+1"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"CLC","; Clear carry"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"LDA","ADR","; Load A with current temperature"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"ADD","TEMP","; Add new value to least significant word"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"TEMP"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"STA","TEMP","; Store sum in least significant word"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"CLRA","; Clear A"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"ADC","TEMP+1","; Add most significant word TEMP+1 and"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"carry bit if any"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"STA","TEMP+1","; Store result in most significant word"]},{"entry":[{},{}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"245pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"* Subtract the (sum of the measurements \/ 256 ) from the two byte sum of"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"measurements"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"CLC","; Clear carry"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"LDA","TEMP","; Load A with the lease significant byte of the"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"sum of measurements"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"SUB","TEMP+1","; Subtract the total of the last 256"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"measurements divided by 256"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"STA","TEMP","; Store result in lease significant byte"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"LDA","TEMP+1","; Load A with most significate byte"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"SBC","#0T","; Subtract carry bit if any"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"STA","TEMP+1","; Store result. TEMP+1 is the average of"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"measurements"},{"entry":{}}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"245pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"* Increment the OTEMP offset register when the measured temperature"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"exceeds the limit value else decrease the register."}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"245pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"* Register limits are 0 and 100."]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"LDA","TCOUNT","; Do this at 31.25 msec"]},{"entry":[{},"CMP","#10T"]},{"entry":[{},"BNE","TEMP4"]},{"entry":[{},{}]},{"entry":[{},"LDA","TEMP+1","; Load A with temperature"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"CMP","#69T","; Compare it to 180F"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"BLO","TEMP2","; If lower branch to decrement OTEMP else"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"increment OTEMP"},{"entry":{}}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"105pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"TEMP 1 LDA OTEMP","; Increment OTEMP if < 100"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"CMP","#100T"]},{"entry":[{},"BHI","TEMP3"]},{"entry":[{},"INC","OTEMP"]},{"entry":[{},"BRA","TEMP4"]},{"entry":[{},{}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"105pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"TEMP2 LDA OTEMP","; Decrement OTEMP if > 0"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"CMP","#0T"]},{"entry":[{},"BEQ","TEMP4"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"245pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"TEMP3 DEC OTEMP"]},{"entry":[{},"TEMP4 NOP"]},{"entry":[{},{}]},{"entry":[{},{}]},{"entry":[{},"* Output Logic"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"105pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"ON1 LDA TCOUNT","; Do this at 0 msec"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"CMP","#0T",{}]},{"entry":[{},"BNE","ON2"]},{"entry":[{},"BCLR","1,PORTB","; Turn Output-A OFF"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"BRCLR","2,FLAG,ON1A","; Bypass if FLAG bit is clear"]},{"entry":[{},"BSET","2,DDRB"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"BSET","2,PORTB","; Turn Output-B ON"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"112pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"133pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"ON1A BRCLR 7,PORTB,ON1B","; Bypass if in Secondary Mode"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"BRCLR","3,FLAG,ON1B","; Bypass if FLAG bit is clear"]},{"entry":[{},"BSET","3,DDRB"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"BSET","3,PORTB","; Turn Output-C ON"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"245pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"ON1B JMP START"]},{"entry":[{},{}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"105pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"ON2 LDA TCOUNT","; Do this at 400 msec"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"CMP","#128T",{}]},{"entry":[{},"BNE","OTOFF"]},{"entry":[{},"BCLR","2,PORTB","; Turn Output-B OFF"]},{"entry":[{},"BCLR","3,PORTB","; Turn Output-C OFF"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"BRCLR","1,FLAG,ON2A","; Bypass if FLAG bit is clear"]},{"entry":[{},"BSET","1,DDRB"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"BSET","1,PORTB","; Turn Output-A ON"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"245pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"ON2A JMP START"]},{"entry":[{},{}]},{"entry":[{},"* Reduce the ON time when the measured temperature exceeds the defined"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"level. The OTEMP register can contain"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"245pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"* a value between 0 and 100. When the measured temperature exceeds the"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"defined value, this register is slowly"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"245pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"* incremented towards 100 thereby reduceing the conduction time of the"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"output intern reduceing the temperature"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"245pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"* else it its decremented toward 0."]},{"entry":[{},{}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"126pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"119pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"OTOFF LDA TCOUNT","; Load current TCOUNT value"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"133pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"AND","#%01111111",";Mask out bit 128"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"ADD","OTEMP","; Add OTEMP offset"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"CMP","#128T","; if result equals 128 then clear PORTB"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"BNE","OTOFF1"]},{"entry":[{},"CLR","PORTB"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"245pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"OTOFF1 NOP"]},{"entry":[{},{}]},{"entry":[{},"* Cycle output device if an overload has caused the output device to trip off."]},{"entry":[{},"* If device trips for the defined nymber of cycles then set its' FLAG bit inturn"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"locking output off."}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"T0","BRCLR","1,DDRB,T1"]},{"entry":[{},{},"BRCLR","1,PORTB,T1"]},{"entry":[{},{},"BRSET","5,PORTA,T1"]},{"entry":[{},{},"BCLR","1,DDRB"]},{"entry":[{},{},"DBNZ","CycleA+1,T2"]},{"entry":[{},{},"DBNZ","CycleA,T2"]},{"entry":[{},{},"BCLR","1,FLAG"]},{"entry":[{},{},"BRA","T2"]},{"entry":[{},"T1","BSET","1,DDRB"]},{"entry":[{},{}]},{"entry":[{},"T2","BRCLR","2,DDRB,T3"]},{"entry":[{},{},"BRCLR","2,PORTB,T3"]},{"entry":[{},{},"BRSET","4,PORTA,T3"]},{"entry":[{},{},"BCLR","2,DDRB"]},{"entry":[{},{},"DBNZ","CycleB+1,T4"]},{"entry":[{},{},"DBNZ","Cycleb,T4"]},{"entry":[{},{},"BCLR","2,FLAG"]},{"entry":[{},{},"BRA","T4"]},{"entry":[{},"T3","BSET","2,DDRB"]},{"entry":[{},{}]},{"entry":[{},"T4","BRCLR","3,DDRB,T5"]},{"entry":[{},{},"BRCLR","3,PORTB,T5"]},{"entry":[{},{},"BRSET","1,PORTA,T5"]},{"entry":[{},{},"BCLR","3,DDRB"]},{"entry":[{},{},"DBNZ","CycleC+1,T6"]},{"entry":[{},{},"DBNZ","CycleC,T6"]},{"entry":[{},{},"BCLR","3,FLAG"]},{"entry":[{},{},"BRA","T6"]},{"entry":[{},"T5","BSET","3,DDRB"]},{"entry":[{},"T6","NOP"]},{"entry":[{},{}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"245pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"* Loop back to Start"]},{"entry":[{},"Loop JMP Start"]},{"entry":[{},{}]},{"entry":[{},"* Return from any spurious or random interrupt"]},{"entry":[{},"DUMMY RTI"]},{"entry":[{},{}]},{"entry":[{},"* Timmer Interrupt Subroutine - 3.125 msec interval - TCOUNT range = 800"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"msec"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"105pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"TIME LDA TSC","; Load TCS - required to allow a TOF reset"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"133pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"MOV","#39T,TMODH","; Set TIM Modulo High"]},{"entry":[{},"MOV","#16T,TMODL","; Set TIM Modulo Low"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"MOV","#$50,TSC","; Clear TOF and set TIM Overflow Interrupt"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"Enable Bit and reset the TTM counter"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"; and TIM prescaler"]},{"entry":[{},{}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"INC","TCOUNT"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"245pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"TIME1 RTI"]},{"entry":[{},{}]},{"entry":[{},"***********************************************"]},{"entry":[{},"* Interrupt Vectors"]},{"entry":[{},"***********************************************"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"ORG","$FFDE"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"dw DUMMY","; ADC Conversion Complete Vector"]},{"entry":[{},"dw DUMMY","; Keyboard Vector"]},{"entry":[{},"dw DUMMY","; (No Vector Assigned $FFE2-$FFE3)"]},{"entry":[{},"dw DUMMY","; (No Vector Assigned $FFE4-$FFE5)"]},{"entry":[{},"dw DUMMY","; (No Vector Assigned $FFE6-$FFE7)"]},{"entry":[{},"dw DUMMY","; (No Vector Assigned $FFE8-$FFE9)"]},{"entry":[{},"dw DUMMY","; (No Vector Assigned $FFEA-$FFEB)"]},{"entry":[{},"dw DUMMY","; (No Vector Assigned $FFEC-$FFED)"]},{"entry":[{},"dw DUMMY","; (No Vector Assigned $FFEE-$FFEF)"]},{"entry":[{},"dw DUMMY","; (No Vector Assigned $FFF0-$FFF1)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"dw TIME","; TIM 1 Overflow Vector"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"dw DUMMY","; TIM 1 Channel 1 Vector"]},{"entry":[{},"dw DUMMY","; TIM 1 Channel 0 Vector"]},{"entry":[{},"dw DUMMY","; (No Vector Assigned $FFF8-$FFF9)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"dw RESET","; IRQ1"]},{"entry":[{},"dw RESET","; SWI Vector"]},{"entry":[{},"dw RESET","; Reset Vector"]},{"entry":[{},{}]},{"entry":[{},{}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"245pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"PORTA EQU $0000 ; Port A Data Reg"]},{"entry":[{},"PORTB EQU $0001 ; Port B Data Reg"]},{"entry":[{},{}]},{"entry":[{},"DDRA EQU $0004 ; Port A Direction Reg"]},{"entry":[{},"DDRB EQU $0005 ; Port B Direction Reg"]},{"entry":[{},{}]},{"entry":[{},"PTAPUE EQU $000B ; Port A Pullup Enable"]},{"entry":[{},"PTBPUE EQU $000C ; Port B Pullup Enable"]},{"entry":[{},{}]},{"entry":[{},"KBSCR EQU $001A ; Keyboard Status Control Reg"]},{"entry":[{},"KBIER EQU $001B ; Keyboard Int Enable Reg"]},{"entry":[{},{}]},{"entry":[{},"INTSCR EQU $001D ; IRQ Status Reg"]},{"entry":[{},{}]},{"entry":[{},"CONFIG2 EQU $001E ; System configuration register"]},{"entry":[{},"CONFIG1 EQU $001F; System configuration register"]},{"entry":[{},{}]},{"entry":[{},"TSC EQU $0020 ; Timer Status and Control Reg"]},{"entry":[{},"TCNTH EQU $0021; TIM Counter Reg High"]},{"entry":[{},"TCNTL EQU $0022 ; TIM Counter Reg Low"]},{"entry":[{},"TMODH EQU $0023 ; TIM Counter Modulo Reg High"]},{"entry":[{},"TMODL EQU $0024 ; TIM Counter Modulo Reg Low"]},{"entry":[{},"TSC0 EQU $0025 ; TIM Ch 0 Status and Control Reg"]},{"entry":[{},"TCH0H EQU $0026 ; TIM Ch 0 Reg High"]},{"entry":[{},"TCH0L EQU $0027 ; TIM Ch 0 Reg Low"]},{"entry":[{},"TSC1 EQU $0028 ; TIM Ch 1 Status and Control Reg"]},{"entry":[{},"TCH1H EQU $0029 ; TIM Ch 1 Reg High"]},{"entry":[{},"TCH1L EQU $002A ; TIM Ch 1 Reg Low"]},{"entry":[{},{}]},{"entry":[{},"OSCSTAT EQU $0036 ; OSCILLATOR STATUS REG"]},{"entry":[{},"OSCTRIM EQU $0038 ; OSCILLATOR TRIM"]},{"entry":[{},{}]},{"entry":[{},"ADSCR EQU $003C ; ADC Status Control Reg"]},{"entry":[{},{}]},{"entry":[{},"ADR EQU $003E ; ADC Data Reg"]},{"entry":[{},"ADICLK EQU $003F ; ADC Clock Reg"]},{"entry":[{},{}]},{"entry":[{},"BSR EQU $FE00 ; Break Status Reg"]},{"entry":[{},"SRSR EQU $FE01 ; SIM Reset Status Reg"]},{"entry":[{},"BRKAR EQU $FE02 ; BREAK AUXILLARY"]},{"entry":[{},"BFCR EQU $FE03 ; Break Flag Control Reg"]},{"entry":[{},{}]},{"entry":[{},"INT1 EQU $FE04 ; INT Status Reg 1"]},{"entry":[{},"INT2 EQU $FE05 ; INT Status Reg 2"]},{"entry":[{},"INT3 EQU $FE06 ; INT Status Reg 3"]},{"entry":[{},{}]},{"entry":[{},"FLCR EQU $FE08 ; Flash Control Reg"]},{"entry":[{},"BRKH EQU $FE09 ; Break Address Reg High"]},{"entry":[{},"BRKL EQU $FE0A ; Break Address Reg Low"]},{"entry":[{},"BRKSCR EQU $FE0B ; Break Status Control Reg"]},{"entry":[{},{}]},{"entry":[{},"LVISR EQU $FE0C ; LVI STATUS REGISTER"]},{"entry":[{},{}]},{"entry":[{},"FLBPR EQU $FFBE ; BLOCK PROTECT REGISTER"]},{"entry":[{},{}]},{"entry":[{},"COPCTL EQU $FFFF ; COP Control Reg"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"This detailed description in connection with the drawings is intended principally as a description of the presently preferred embodiments of the invention, and is not intended to represent the only form in which the present invention may be constructed or utilized. The description sets forth the designs, functions, means, and methods of implementing the invention in connection with the illustrated embodiments. It is to be understood, however, that the same or equivalent functions and features may be accomplished by different embodiments that are also intended to be encompassed within the spirit and scope of the invention and that various modifications may be adopted without departing from the invention or scope of the following claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE SEVERAL VIEWS OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0033","num":"0032"},"figref":["FIG. 3","FIG. 2"]},{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0035","num":"0034"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0037","num":"0036"},"figref":["FIG. 7","FIG. 6"]}]},"DETDESC":[{},{}]}
