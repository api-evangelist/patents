---
title: Accessing a ERP application over the internet using strongly typed declarative language files
abstract: A method of converting ERP data in a database managed by an ERP application and accessed through an ERP API and ERP Message Agent API (MAAPI) to strongly typed data in Java objects includes steps of reading, parsing, creating, and populating. A XML file containing the definition of the Java objects and their attributes or HyperText Markup Language (HTML) statements which specifies presentation format is read. Each of the declarations and HTML statements are parsed to identify definitions of objects and their attributes. The respective objects are created with their attributes. The objects are populated with data from the ERP data.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07444643&OS=07444643&RS=07444643
owner: International Business Machines Corporation
number: 07444643
owner_city: Armonk
owner_country: US
publication_date: 20031121
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENT","Converting Strongly Typed Object Language to Strongly Typed Declarative Language","Sending ERP API Data to Web Clients","CONCLUSION"],"p":["This application is a Division of U.S. application Ser. No. 09\/483,069 filed Jan. 14, 2000, now U.S. Pat. No. 6,854,120.","1. Field of the Invention","This invention relates in general to enterprise resource planning systems performed by computers, and in particular, to a method and apparatus for accessing an enterprise resource planning application over the Internet using Java.","2. Description of Related Art","With the fast growing popularity of the Internet and the World Wide Web (also known as \u201cWWW\u201d or the \u201cWeb\u201d), there is also a fast growing demand for Web access to Enterprise Resource Planning (ERP). However, it is especially difficult to use ERP software with the Web. One of the problems with using ERP software on the Web is the lack of correspondence between the protocols used to communicate in the Web with the protocols used to communicate with ERP software.","For example, the Web operates using the HyperText Transfer Protocol (HTTP), the eXtensible Markup Language (XML), the eXtensible Style Language (XSL) and the HyperText Markup Language (HTML). The use of this protocol and languages result in the communication and display of graphical information that incorporates hyperlinks. Hyperlinks are network addresses that are embedded in a word, phrase, icon or picture that are activated when the user selects a highlighted item displayed in the graphical information.","HTTP is the protocol used by Web clients and Web servers to communicate between themselves using these hyperlinks. HTML is the language used by Web servers to create and connect together documents that contain these hyperlinks. The HTML syntax and commands are specified by the web browsers, and cannot be extended by users.","XML and XSL are anticipated to be the next generation of web languages. XML is the language used by Web servers to create and connect together documents that contain user defined structures. XSL is the language used by web browsers to convert XML documents into HTML for the purposes of display. The validity of an XML document is defined by a Document Type Definition (DTD), which an XML parser uses to ensure that an XML document is valid.","Web servers are extensible via a number of APIs. The Common Gateway Interface (CGI) is a standard interface for executing programs external to the web server. Java is a programming language and environment defined by Sun Microsystems. Java Servlets are a widely available interface for executing Java programs within the web server. Java Server Pages (JSP) is a web page interface for specifying Java commands that are to be executed in the web server. Visual Basic Script (VBScript) is a programming language defined by Microsoft. Active Server Pages (ASP) is a web page interface specified by Microsoft for specifying VBScript commands that are to be executed in the web server.","In contrast, most ERP software provides an application programming interface (API) for accessing ERP functionality from external programs. Each vendor of an external program may have its own implementation of the API, for example, Peoplesoft has an API, called the Message Agent API.","Thus, there is a need in the art for methods of accessing Enterprise Resource Planning software across the Internet network, and especially via the World Wide Web. Further, there is a need for simplified development environments for such systems.","To overcome the limitations in the prior art described above, and to overcome other limitations that will become apparent upon reading and understanding the present specification, the present invention discloses a method and apparatus for executing pre-defined API calls in an ERP system via the Internet. In accordance with the present invention, Web users can request information from ERP software via HTML input forms, which request is then used to create an sequence of ERP API calls for execution by the ERP software. The results output by the ERP software are themselves transformed into HTML or XML\/XSL format for presentation to the Web user. The specification of the ERP interface is done through the specification of ERP data definition.","One aspect of the invention provides a method for executing ERP application requests in a computer-implemented ERP data processing system via a network, comprising the steps of:","(a) transmitting a HyperText Markup Language (HTML) input form to a browser executed by a client computer in the network for display on a monitor attached thereto;","(b) receiving a HyperText Transfer Protocol (HTTP) request from the browser to access the ERP System, wherein the request optionally includes data entered by the user into an HTML input form;","(c) transferring any data entered by the user into the HTML input form and any data stored in the requested HTML page into the ERP application API","(d) transferring control to the ERP application for execution;","(e) receiving output data from the ERP application in response to the transmitted data and request;","(f) merging the output data from the ERP application into a strongly typed Java object;","(g) transforming the strongly typed Java objects into a transmittable format, such as XML or HTML, and","(h) transmitting the HTML or XML object to the browser for display on the monitor attached to the client computer.","Preferably the merging step comprises the step of merging the output data from the ERP application into a strongly typed object form using an ERP Web Gateway, wherein the strongly typed object form comprises strongly typed Java objects.","In another aspect the HTML input form, dynamic ERP Application data access, Java objects definitions and HTML report form are stored in form of XML files; wherein the XML file strongly couples the data in the ERP Application to the Java objects and the XML file which specifies the presentation of the Application data.","Yet another aspect of the invention provides a method of converting ERP data in a database managed by an ERP application and accessed through an ERP API and ERP Message Agent API (MAAPI) to strongly typed data in Java objects comprising the steps of:","(a) reading a XML file containing the definition of the Java objects and their attributes; or HyperText Markup Language (HTML) statements which specifies presentation format;","(b) parsing each of the declarations and HTML statements to identify definitions of objects and their attributes; and","(c) creating the respective objects with their attributes","(d) populating the objects with data from the ERP data.","Preferably in this aspect of the method of the invention the creating and populating of Java objects step comprises the steps of:","(a) opening a connection through the ERP API to the ERP Message Agent API (MAAPI);","(b) setting the Application object identifier, username and password using the MAAPI","(c) setting search key values","(d) instructing the ERP application to process the current object","(e) for every scroll level creating a corresponding object and setting its attributes with data from the ERP Application data; and,","(f) closing the connection to the ERP API.","Yet another aspect of the invention provides a method of presenting strongly typed Java objects using HTML by merging Java objects with XML template files.","The invention also provides a client server ERP information handling system, for accessing by Internet, data managed by an ERP application comprising:","a client computer accessible to a user having a web browser adapted to send information, in an Internet acceptable language, from an ERP database to a user and to send requests destined for the ERP database;","a web server for sending the panels to and receiving the requests from the client computer;","an ERP web gateway in communication with the web server for converting the requests from the web server into language format required by an interface of the ERP application and to convert information received from the interface of the ERP; and,","an ERP application for controlling access to a database containing information requested by a user.","In addition another aspect of the invention provides an article of manufacture for use in a computer system comprising a computer readable medium for storing statements or instructions for use in execution in a computer in accordance with the aspects of the invention described above.","In the following description of the preferred embodiment, reference is made to the accompanying drawings which form a part hereof, and in which is shown by way of illustration a specific embodiment in which the invention may be practiced. It is to be understood that other embodiments may be utilized and structural and functional changes may be made without departing from the scope of the present invention.","Overview","With the fast growing popularity of the Internet and the World Wide Web (also known as \u201cWWW\u201d or the \u201cWeb\u201d), there is also an increasing demand for Web access to enterprise resource planning software. One aspect of the present invention implements a ERP connector that facilitates communication between Web clients, Web servers, and servers executing ERP software such as PeopleSoft's Message Agent API. The ERP Web Connector enables an application developer to build Web applications for a database management system accessed through ERP software by using HTML pages and ERP API.","An end user of these applications sees only the web pages for his\/her requests and the resulting reports. Users fill out the input forms, point and click to navigate the forms, and to access the ERP software. A complete sequence of API calls is dynamically built by the ERP Web Connector with the user inputs and sent to the server executing the ERP software. The API commands are performed by the ERP software, and the resulting output is merged by the ERP Web connector into the HTML forms for presentation to the user or XML documents for consumption by another application.","An application developer, XML based definitions of the ERP API and stores them in the ERP Web connector machine. The developer then executes a command to generate Java code that invokes the API, HTML pages containing Java Server page information, and template files\u2014ie XSL\u2014that format the ERP API results. The developer can modify these generated files to customize the output web page, the API results format, or the combine the Java code together for more complicated functionality. Since the ERP Web gateway uses native Web languages, and not some new or hybrid language, various off-the-shelf tools may be used for creation of Web pages.","Hardware Environment",{"@attributes":{"id":"p-0058","num":"0057"},"figref":"FIG. 1","b":["10","12","14","14","16","16","18","12","14","16","18"]},"A client system  typically executes a Web browser and is coupled to a server computer  executing a Web server. The Web browser is typically a program such as the IBM Web Explorer, or Netscape or the Microsoft Internet Explorer. The Web server  is typically a program such as the IBM HTTP Daemon or other WWW daemon. The client computer  is bi-directionally coupled with the server computer  over a line or via a wireless system. In turn, the server computer  is bi-directionally coupled with a ERP Web Connector (Web Gateway)  over a line or via a wireless system. In addition, the ERP Web Connector  is bi-directionally coupled with one or more ERP application servers  over a line or via a wireless system.","The ERP Web Connector  supports access to a server  executing ERP software. The ERP Web Connector  and ERP server  may be located on the same server as the Web server , or they may be located on separate machines. The servers  executing the ERP software may be geographically distributed and may comprise different vendor systems, such as a PeopleSoft, SAP, BAAN, etc.","Those skilled in the art will recognize many modifications may be made to this configuration without departing from the scope of the present invention. For example, in a two-tier configuration, the server system executing the functions of the ERP Web Connector  may also execute the functions of the Web server  and\/or the ERP server . Alternatively, in a three-tier configuration, the Web server , ERP Web Connector , and ERP server  may all be performed by different servers.","ERP Web Gateway","Referring to , the ERP Web Gateway  is designed to be sufficiently flexible and powerful, yet be available on multiple platforms, such as OS\/2, AIX, MVS, etc. as long as a Java Virtual Machine is available on the platform. Further, the ERP Web Gateway  is designed to work with existing Web and ERP application development tools, with minimal modifications required to such tools.","These goals led also to the development of the code generation and run-time environment of the present invention. The ERP Web Gateway introduces a interface object, the ERP Connector , to map the procedural ERP Application native API. It also incorporates a mechanism that allows input data from an HTML-format input form to be inserted as parameters fro the ERP Application. Another mechanism is incorporated to allow the ERP Application results to be merged into HTML report forms. The runtime engine of the ERP Web Gateway  reads the XML template files to generate the appropriate Java objects with their attributes and report forms. The use of XML instead of a new or hybrid language, allows the full expressive power without artificial limitations. Both object definitions and report forms can be laid out in any fashion as long as the specifications are conformed to the XML syntax.","Interaction Among Components",{"@attributes":{"id":"p-0064","num":"0063"},"figref":"FIG. 2","b":["12","14","12","14","14","12","16","16","14"]},"An HTTP anchor reference would typically be formatted as follows: \u201c<A HREF=http:\/\/{web-server}\/{cgi-name}[?variable-name=variable-value & . . . ]>\u201d.","An HTTP form action would typically be formatted in a similar manner as follows: \u201c<FORM METHOD={method}ACTION=http:\/\/{web-server}\/{cgi-name}[?variable-name=variable-value & . . . ]>\u201d.","In both of the above examples, the following parameters are used:\n\n","At some point in the interaction between the Web browser on client , the Web server , and the ERP Web gateway , a user using the Web browser on client  would request data from a ERP application  a form request (an object request) is sent from the client  to Web Server , which forwards the object request to the ERP WWW gateway  which would retrieve any user inputs from the HTML input, retrieve any parameters specified in the web page, and retrieve data through the ERP Connector , from the ERP application , populate the set of strongly typed objects corresponding to the ERP data. The ERP Web gateway then either: 1) extracts an output template based on the web page parameters, converts the strongly typed objects to XML strongly typed objects, converts the XML objects to HTML using the output template, then transmits the HTML output page to the web server; 2) converts the strongly typed objects to XML strongly typed objects then transmits the XML outputs to the web server; 3) extracts an output template based on the web page parameters, converts the strongly typed objects to HTML using the output template, then transmits the HTML output page to the web server . The Web server  transmits the HTML input form to the Web browser  for display to the user.","Development Environment",{"@attributes":{"id":"p-0069","num":"0072"},"figref":"FIG. 3"},"As mentioned earlier, the runtime environment includes the interaction between clients executing Web browsers and Web servers, ERP Web Gateway, ERP Connector and ERP server. Access to the ERP server via the ERP Web Gateway is controlled by programming stored in strongly typed language files.","The process used in the runtime environment by the invention as shown in  is linked for the purpose of this explanation to the apparatus of the invention depicted in  by the use of Roman Numerals in both figures. Referring to  the web browser on client  issues an object request (I). The object request is sent (II) from the web browser to the web server . A web listener on the web server  receives the object request and examines it (III). The web listener launches a web agent (a servlet) in the ERP Web Gateway  (IV). The web agent invokes servlets to determine user ID, password, panel ID from the data contained in the object request, and an empty instance of the requested object is created (V). The newly created object obtains a connection to the ERP application through the ERP Connector  (VI). In turn the ERP Connector  communicates with the ERP application through the ERP Native Interface (VII).","(VIII) Data is passed in through the ERP Connector to the ERP application. The ERP application loads a panel using the data. (IX) The ERP application uses the panel to process data (a) to check data validity\/relationship etc., and (b) to instruct the database manager to retrieve data base on data from the object request sent from the web browser to the web server. (XI) The database manager returns strongly typed data to the panel in the ERP application. The same data is returned back to the web agent through: (a) (XII) the ERP native API (weakly typed in the form of a string); and (b) (XIII) the ERP Connector API. The same data is returned to the web server (XIV) and then on to the web browser (XV).","According to the present invention, the development of Web applications for accessing relational databases may typically involve the following steps:","1. Create an ERP data definition that maps ERP data to strongly typed objects","2. Execute Code generation that extracts the ERP data definition and generates","a) Strongly typed program files;","b) Template output file;","c) HTML page containing commands to execute program files;","3. Optionally edit the template output file for a different ERP data output format.","4. Optionally edit the HTML page to either change the non ERP data in the web page or to change the sequence of access to the strongly typed objects.","5. Optionally edit the auto-generated or any human generated strongly typed language files.","6. Compile the strongly typed language files.","7. Install the template output file, HTML page and strongly typed language files in the ERP Web gateway.","The key challenge in writing applications for the ERP Web Gateway is to understand HTML, the ERP application, and the output template languages, since these languages are all involved in the ERP Web connector. In its simplest forms, basic knowledge of the ERP application and HTML can be easily acquired. However, these languages can be quite complex and tedious to write in order to utilize their advanced functions.","Fortunately, there are existing HTML editors that can help to greatly reduce the complexity of writing the HTML files. For example, NetObjects Fusion and Microsoft FrontPage provide user friendly environment to develop HTML files.","ERP Data Definitions (Data Access Code Generation)","Overview","Data access code generation to provide ERP Data Definitions is a process whereby a data object can be described using XML, and processed during build time to create the necessary Java classes, which provide access to the data in a database, the access to which is controlled by an ERP application at run-time. The advantages that this process has relative to the manual creation of the code include:\n\n",{"@attributes":{"id":"p-0087","num":"0099"},"figref":"FIG. 4","b":"92"},"A sample data object description XML for the Career object that retrieves data from the ps_acad_car_vw database table follows:","Career.xml\u2014Sample Data Object Description in XML",{"@attributes":{"id":"p-0089","num":"0101"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<?xml version=\u201c1.0\u201d?>"]},{"entry":[{},"<!DOCTYPE DOlist SYSTEM \u201cDataObjectDescription.dtd\u201d>"]},{"entry":[{},"<!-- Career represents an academic career offered by an institution."]},{"entry":[{},"\u2003It corresponds to a row in the ACAD_CAREER table."]},{"entry":[{},"\u2003Career aggregates terms."]},{"entry":[{},"-->"]},{"entry":[{},"<DataObject name=\u201cCareer\u201d package=\u201ccom.ibm.pdc.common\u201d>"]},{"entry":[{},"\u2003<!-- Primary Key Attributes of the Career -->"]},{"entry":[{},"\u2003<property name=\u201cinstitution\u201d key=\u201ctrue\u201d\/>"]},{"entry":[{},"\u2003<property name=\u201ccode\u201d key=\u201ctrue\u201d\/>"]},{"entry":[{},"\u2003<!-- Attributes -->"]},{"entry":[{},"\u2003<property name=\u201cdescription\u201d\/>"]},{"entry":[{},"\u2003<property name=\u201cgradingScheme\u201d\/>"]},{"entry":[{},"\u2003<!-- Mapping of Java attributes to database column names -->"]},{"entry":[{},"\u2003<DatabaseAttributes table=\u201cps_acad_car_vw\u201d>"]},{"entry":[{},"\u2003\u2003<!-- keys -->"]},{"entry":[{},"\u2003\u2003<input property=\u201cinstitution\u201d identifier=\u201cINSTITUTION\u201d\/>"]},{"entry":[{},"\u2003\u2003<input property=\u201ccode\u201d identifier=\u201cACAD_CAREER\u201d\/>"]},{"entry":[{},"\u2003\u2003<!-- data -->"]},{"entry":[{},"\u2003\u2003<output property=\u201cdescription\u201d identifier=\u201cDESCR\u201d\/>"]},{"entry":[{},"\u2003\u2003<output property=\u201cgradingScheme\u201d identifier="]},{"entry":[{},"\u2003\u2003\u201cGRADING_SCHEME\u201d\/>"]},{"entry":[{},"\u2003<\/DatabaseAttributes>"]},{"entry":[{},"\u2003<!-- References -->"]},{"entry":[{},"\u2003<ReferenceAttributes name=\u201cterms\u201d type=\u201cTerm\u201d array=\u201ctrue\u201d>"]},{"entry":[{},"\u2003\u2003<!-- Key specification -->"]},{"entry":[{},"\u2003\u2003<key name=\u201cinstitution\u201d value=\u201cinstitution\u201d\/>"]},{"entry":[{},"\u2003\u2003<key name=\u201ccareerCode\u201d value=\u201ccode\u201d\/>"]},{"entry":[{},"\u2003<\/ReferenceAttributes>"]},{"entry":[{},"<\/DataObject"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"The property elements specify the attributes of the Java class. The key attribute of the property element defines whether the property is a key. If an attribute is a key, the value of the attribute cannot be altered after it the object is created. Key attributes are used to uniquely identify an object; the properties with key=\u201ctrue\u201d together form the primary key.","The DatabaseAttributes element contains the mapping of the Java attributes to the database column names. For each input and output tag within the DatabaseAttributes element, the author specifies the property and the identifier attributes. property contains the Java attribute name and identifier contains the backend identifier (a database column name in this example).","The ReferenceAttributes element describes an association relationship, which is implemented as a Java reference. For example, the ReferenceAttributes element is used to represent a foreign key relationship in a relational database. The elements within a ReferenceAttributes element contain the mapping of the attributes in the current object to the key (primary key or search key) attributes in the referenced object. ReferenceAttributes elements in the data object description are used to express a directed, labeled graph of objects, where each ReferenceAttribute element is a vector in the graph.","Data Object Data Type Definition (DTD) for Data Object Description in XML",{"@attributes":{"id":"p-0093","num":"0105"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"<!--"},{"entry":"* DataObject.dtd is the DTD that all data object description"},{"entry":"files must implement."},{"entry":"* ERP element - Element describing access to ERP panel"},{"entry":"* DatabaseAttributes - Element describing access to database table"},{"entry":"-->"},{"entry":"<!ELEMENT DataObject (property?, ERPAttributes?,DatabaseAttributes?,"},{"entry":"ReferenceAttributes?)*>"},{"entry":"<!ATTLIST DataObject name CDATA #REQUIRED>"},{"entry":"<!ATTLIST DataObject package CDATA #REQUIRED>"},{"entry":"<!ELEMENT property EMPTY>"},{"entry":"<!ATTLIST property name CDATA #REQUIRED>"},{"entry":"<!ATTLIST property type CDATA #IMPLIED>"},{"entry":"<!ATTLIST property key CDATA #IMPLIED>"},{"entry":"<!ELEMENT ERPAttributes (input*,output*, subPanel*)>"},{"entry":"<!ATTLIST ERPAttributes panelName CDATA #REQUIRED>"},{"entry":"<!ELEMENT subPanel (input*, output*)>"},{"entry":"<!ELEMENT DatabaseAttributes (input*,output*)>"},{"entry":"<!ATTLIST DatabaseAttributes table CDATA #REQUIRED>"},{"entry":"<!ELEMENT input EMPTY>"},{"entry":"<!ATTLIST input property CDATA #REQUIRED>"},{"entry":"<!ATTLIST input identifier CDATA #REQUIRED>"},{"entry":"<!ELEMENT output EMPTY>"},{"entry":"<!ATTLIST output property CDATA #REQUIRED>"},{"entry":"<!ATTLIST output identifier CDATA #REQUIRED>"},{"entry":"<!ELEMENT ReferenceAttributes (key*)>"},{"entry":"<!ATTLIST ReferenceAttributes name CDATA #REQUIRED>"},{"entry":"<!ATTLIST ReferenceAttributes type CDATA #REQUIRED>"},{"entry":"<!ATTLIST ReferenceAttributes array CDATA #IMPLIED>"},{"entry":"<!ELEMENT key EMPTY>"},{"entry":"<!ATTLIST key name CDATA #REQUIRED>"},{"entry":"<!ATTLIST key value CDATA #REQUIRED>"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"The above listing contains the DTD for the data object description shown in the Career.xml. In addition to DatabaseAttributes for accessing database attributes, the DTD also allows ERP Attributes for describing the access to ERP panels. ERP Attributes can contain an additional element called subPanel, which is used to retrieve the attributes in a nested panel.","The Career object in the previous example can be retargeted to serialize information to\/from ERP instead of the database by simply modifying the Career.xml data object description file. The DatabaseAttributes element will be replaced with an ERP Attributes element. Once Career.xml has been updated with the ERP Attributes element, rerunning the code generator routine will produce code that uses the ERP API to serialize the object instead of using JDBC to serialize to the database.","Code Generation Templates","The code generation templates in  describe the code that is generated when the code generation routine is invoked. The code generation routine takes the code generation template and the data object description XML as inputs and produces Java source code. The code generation template contains the following:\n\n","The ReferenceAttribute elements can be used to describe a directed, labeled graph. Each data object description XML document is a node and the ReferenceAttribute elements are vectors of the graph. Each generated data object class typically performs lazy initialization. This approach is more efficient than populating the entire graph of objects, but it can result in several backend accesses.","For the object model in , assume that data objects A, B and C need to be retrieved. The number of queries to retrieve data objects A, Band C using lazy initialization is as follows:",{"@attributes":{"id":"p-0099","num":"0114"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"70pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"98pt","align":"center"}}],"thead":{"row":[{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]},{"entry":[{},"Number of queries to","Number of objects"]},{"entry":[{},"retrieve objects","returned"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"70pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"98pt","align":"center"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["A","1","A"]},{"entry":[{},"(find by primary key)"]},{"entry":["B","a","B"]},{"entry":["C","ab","C"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}},"br":[{},{},{}]},"Therefore, the number of queries to retrieve an object hierarchy is proportional to the number of objects when lazy initialization is used.","In situations where there is considerable overhead for each access to the backend and the backend is efficient at performing joins, the overall systems performance can be improved by performing a single query that retrieves all the objects in the sub-graph of interest.","Sample Sub-graph Description in XML",{"@attributes":{"id":"p-0102","num":"0117"},"tables":{"@attributes":{"id":"TABLE-US-00004","num":"00004"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<DataObjectTree name=\u201cCurrentEnrollmentsView\u201d>"]},{"entry":[{},"<rootnode name=\u201cdataObjectA\u201d dataobject=\u201cA\u201d>"]},{"entry":[{},"<reference name=\u201cdataObjectB\u201d dataobject=\u201cB\u201d>"]},{"entry":[{},"<reference name=\u201cdataObjectC\u201d dataobject=\u201cC\u201d\/>"]},{"entry":[{},"\u2003\u2003<\/reference>"]},{"entry":[{},"\u2003<\/rootnode>"]},{"entry":[{},"<\/DataObjectTree>"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"The sub-graph of the data model is described in an XML document, like the one shown above. The example describes a sub-graph for the CurrentEnrollmentsView business function that will retrieve data objects A, B and C using a single query. The example assumes that ReferenceAttribute elements from A to B and from B to C exist in the data object description XML documents for A and B respectively. Notice that data object D is not retrieved as part of this sub-graph.","The DataObjectTree element identifies the business function that this sub-graph or view of the model is for. Each rootnode element identifies a starting point of traversal of the object model. The rootnode elements contain reference elements to indicate that automatic pre-fetching of that reference is required. For example, <reference name=\u201cdataObjectB\u201d dataObject=\u201cB\u201d>, specifies that the reference from data object A to B should be retrieved as part of the single query. reference elements may be nested.","Using a code generation template that handles DataObjectTree documents, Java code can be generated to perform a single, large query that retrieves data objects A, B and C. The template will use the ReferenceAttribute element from A.xml, B.xml and C.xml to generate the correct join attributes for the single query.","The description of the data object in XML makes it possible to perform enhancements such as the use of sub-graphs for backend access optimization.","Using XML to describe data objects has several advantages. The users of the Data Access Code Generator need not learn the proprietary backend APIs, since the proprietary calls are contained only within the code generation template. The users of the code generator are then able to focus on leveraging their knowledge of the backend data model to create data access objects more efficiently. System-wide changes and enhancements can be made as part of a new build by regenerating the data objects using a modified code generation template or data object description. Using XML to describe the data object allows validation against the data object DTD to catch errors early in the development.","Conversion from ERP API to Strongly Typed Objects",{"@attributes":{"id":"p-0108","num":"0123"},"figref":["FIG. 5","FIG. 6"],"b":["0","1"]},"The ERP API exposes the courses, student and term as fields. All the fields are returned in character type through the PS API. The API generalizes all Application data to fields with character values; hence losing the original context of the fields. This is known as weakly typed. It is often desirable to have the courses, student and term fields represented as courses, student and term respectively. In the Java programming language, this would involve the creation of a Java class called a studentCourseList  (see .), that contains a student name , and a list  of course objects. The course objects are instances of the Java class called course. Thus the objects are referred to as studentCourseList and courses, rather than fields, etc. This is known as strongly typed.","The algorithm for converting the weakly typed ERP Application data to strongly typed programming languages objects is:\n\n","For example, if scroll level  and row level  and field  then set studentcourselist objects name attribute to field value\n\n","The ERP Connector insulates applications from the details of the underlying ERP applications. The ERP Connector API (ERP API), through which the ERP Connector is accessed, exposes objects that provide the ERP content and functionality required by the client Java objects. These connector objects will change only if there are significant semantic changes to the ERP system.","The ERP Connector is implemented as two distinct layers: the Application Connector and the Data Connector. The Application Connector implements the logical mapping of object data and behavior onto corresponding ERP application features. The Data Connector implements physical communication with the ERP system. The motivation for the separation of the Data and Application layers is the structure of a ERP system. The Data Connector is tightly coupled to a particular version of the ERP run-time environment and independent of the specific application being run. The Application Connector on the other hand, is tightly coupled to the underlying ERP application.","The ERP Connector provides the single point of access to the ERP application functionality. It does not extend the functionality of the ERP system. The Connector has detailed knowledge of the nature, purpose, and meaning of individual panels and data items, as well as of the business logic that applies to them. The Connector also knows the configuration of the underlying ERP system and how best to access specific items. The current interface is through the ERP API.","The ERP Connector will support multiple concurrent client requests through multi-threading. Clients connect to the Connector and make object requests using Connector API methods. There are no restrictions on the number of connections by a client, nor on the number of requests performed by a single connection. The Connector may limit the number of concurrent clients or requests by queuing new requests. During a connection, clients must specify the ERP identity that will be used to perform the requests. ERP uses this identity to control access to panels and database fields.","ERP Connector API","The ERP Connector API is implemented by the Application Connector. The API provides both connection and application objects. Connection objects provide methods for establishing a connection and requesting specific application objects. Application objects provide specific functionality. Application objects may aggregate other application objects, and may be collections, with the caveat that updates that involve multiple panels may not execute atomically. The full API is not specified at this time because it depends on requirements and restrictions that are to be identified during product development.","Basic application objects consist of attributes that correspond to data values, and methods that correspond to actions that apply to the object. The methods a particular application object provides will vary, but certain ones are likely to be standard. These include the Get(field) method which populates the object attributes from the ERP application for a particular instance as specified by a set of key values passed to Get(field) as parameters. The complementary Set(field) method persists the current attribute values to the ERP backend. Other standard methods include Add( ), Delete( ), and VerifyValues( ). The later method verifies the acceptability of the current attributes against the edit checks and business logic defined for this object in the backend, but does not persist the values. In addition to the standard set, a particular object may have any number of specific methods that correspond to special behavior for that object.","Although the Connector API is described as a local Java object, performance consideration may require that the Connector exists on a remote computer. In this case, the API may be modified for remote invocation through a mechanism such as Java RMI or CORBA.","The Connector API is a synchronous interface with no callbacks or events. This reflects the functionality of the API.","An outline of the ERP Connector API is shown below:",{"@attributes":{"id":"p-0121","num":"0148"},"tables":{"@attributes":{"id":"TABLE-US-00005","num":"00005"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"package com.ibm.studentserver.ERP.connector;"]},{"entry":[{},"static class ERPConnector \/\/ Singleton"]},{"entry":[{},"{"]},{"entry":[{},"\u2003ERPConnection Connect( String operatorID; String password )"]},{"entry":[{},"\u2003\u2003throws ConnectException;"]},{"entry":[{},"}"]},{"entry":[{},"class ERPConnection"]},{"entry":[{},"{"]},{"entry":[{},"\u2003private final String operatorID;"]},{"entry":[{},"\u2003private final String password;"]},{"entry":[{},"\u2003void Disconnect( );"]},{"entry":[{},"\u2003\/\/ other methods"]},{"entry":[{},"}"]},{"entry":[{},"\/\/ Application classes"]},{"entry":[{},"class CourseDescription"]},{"entry":[{},"{"]},{"entry":[{},"\u2003\/\/ Attributes"]},{"entry":[{},"\u2003String courseId;"]},{"entry":[{},"\u2003String name;"]},{"entry":[{},"\u2003String description;"]},{"entry":[{},"\u2003\/\/ Methods"]},{"entry":[{},"\u2003static CourseDescription Get( String courseId ) throws ... { };"]},{"entry":[{},"\u2003void Set( )throws { };"]},{"entry":[{},"\u2003void Add( String courseId )throws ... { };"]},{"entry":[{},"\u2003void Delete( )throws ... { };"]},{"entry":[{},"\u2003..."]},{"entry":[{},"}"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"ERP Data Connector API","The Data Connector interface is based on the concept of a message definition, which is a named specification of a ERP panel and the mapping of data fields to panel fields. The Data Connector provides a Connection object that establishes an authenticated connection with the ERP system. Through a Connection object, the client obtains Message objects that provide methods for manipulating the panel contents. An outline of the Connector follows:",{"@attributes":{"id":"p-0124","num":"0151"},"tables":{"@attributes":{"id":"TABLE-US-00006","num":"00006"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Package com.ibm.studentserver.ERP.MAConnector;"]},{"entry":[{},"static class MAConnector \/\/ Singleton"]},{"entry":[{},"{"]},{"entry":[{},"\u2003MAConnection connect( String operatorID; String password )"]},{"entry":[{},"\u2003\u2003throws ConnectException;"]},{"entry":[{},"}"]},{"entry":[{},"class MAConnection"]},{"entry":[{},"{"]},{"entry":[{},"\u2003private final String operatorID;"]},{"entry":[{},"\u2003private final String password;"]},{"entry":[{},"\u2003disconnect( ) { };"]},{"entry":[{},"\u2003Message startMessage( String name ) { };"]},{"entry":[{},"}"]},{"entry":[{},"class Message"]},{"entry":[{},"{"]},{"entry":[{},"\u2003processMessage( ) { };"]},{"entry":[{},"\u2003\/\/ Meta information"]},{"entry":[{},"\u2003getFieldCount( ) { };"]},{"entry":[{},"\u2003getFieldList( ) { };"]},{"entry":[{},"\u2003\/\/ Input"]},{"entry":[{},"\u2003s=SetField( String name, String value ) { };"]},{"entry":[{},"\u2003\/\/ Output"]},{"entry":[{},"\u2003findFirstField( ) { };"]},{"entry":[{},"\u2003\/\/ Others"]},{"entry":[{},"}"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"ERP Message Agent Background:","The ERP Message Agent is the designated method by which external applications can get information in and out of an ERP application. The Message Agent API enables external programs to operate ERP panels programmatically. The program can read and set the values of all panel controls including multi-level scrollbars, as well as \u201cpress\u201d buttons on the panels. The panel is not aware that a program is operating on it; thus, it performs all regular actions: checking security, executing PeopleCode attached to record fields, workflow actions.","The Message Agent API consists of about fifty C language functions and several supporting libraries that can be invoked using the Java Native Interface (JNI). Before a panel can be used by the message agent, a named \u201cmessage definition\u201d must be created using appropriate tools available for the ERP. The message definition specifies the panel name, action mode, search record definition, and panel field-mapping through which the program gets at the panel data. The API provides functions to:\n\n","The strongly typed object language is converted to a strongly typed declarative language by looping over the contents of the strongly typed object and creating a declarative object for each object value.","Using the previous example of the studentCourseList, a sample XML output is:",{"@attributes":{"id":"p-0130","num":"0162"},"tables":{"@attributes":{"id":"TABLE-US-00007","num":"00007"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"<StudentCourseList>"},{"entry":"\u2003<StudentName>John Smith<\/StudentName>"},{"entry":"\u2003<CourseList>"},{"entry":"\u2003\u2003<Course><Name>Math<\/Name><Number>100<\/Number><\/Course>"},{"entry":"\u2003\u2003<Course><Name>English<\/Name><Number>101"},{"entry":"\u2003\u2003<\/Number><\/Course>"},{"entry":"\u2003<\/CourseList>"},{"entry":"<\/StudentCourseList>"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"To take advantage of the emerging XML tools, it is necessary to describe the ERP data in XML. Describing ERP data in XML provides an industry standard interface for accessing ERP functions without requiring modification to the ERP database.","The XML data file for ERP Message Agent results is created by converting the Message Agent C output into XML text data. The first step is to call the C API for each Message Agent row result, and store the values into a structure. Then the structure results are converted to a well-formed XML stream.","A sample of this is a ERP Course List panel. It produces a tabular column of courses, consisting of course name, and other course information.","The Message Agent C API is called to retrieve the course rows from the panel and store them into a structure. A sample of the structures in Java is:",{"@attributes":{"id":"p-0135","num":"0167"},"tables":{"@attributes":{"id":"TABLE-US-00008","num":"00008"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"public class Course"]},{"entry":[{},"{"]},{"entry":[{},"\u2003\u2003private String name;"]},{"entry":[{},"\u2003private String number;"]},{"entry":[{},"\u2003\u2003public String getName( )"]},{"entry":[{},"\u2003\u2003{"]},{"entry":[{},"\u2003\u2003\u2003return name;"]},{"entry":[{},"\u2003\u2003}"]},{"entry":[{},"\u2003\u2003public void setName(String theName)"]},{"entry":[{},"\u2003\u2003{"]},{"entry":[{},"\u2003\u2003\u2003name = theName;"]},{"entry":[{},"\u2003\u2003}"]},{"entry":[{},"\u2003\u2003public String getNumber( )"]},{"entry":[{},"\u2003\u2003{"]},{"entry":[{},"\u2003\u2003\u2003return number;"]},{"entry":[{},"\u2003\u2003}"]},{"entry":[{},"\u2003\u2003public void setNumber(String aNumber)"]},{"entry":[{},"\u2003\u2003{"]},{"entry":[{},"\u2003\u2003\u2003number = aNumber;"]},{"entry":[{},"\u2003\u2003}"]},{"entry":[{},"}"]},{"entry":[{},"\/\/ StudentCourseList is a Java object representing ERP panel"]},{"entry":[{},"public class StudentCourseList"]},{"entry":[{},"{"]},{"entry":[{},"\u2003\u2003\/\/ courseList is a collection of courses"]},{"entry":[{},"\u2003\u2003private java.Collections.List courseList;"]},{"entry":[{},"\u2003\u2003private String studentName;"]},{"entry":[{},"\u2003\u2003public String getStudentName( )"]},{"entry":[{},"\u2003\u2003{"]},{"entry":[{},"\u2003\u2003\u2003return studentName;"]},{"entry":[{},"\u2003\u2003}"]},{"entry":[{},"\u2003\u2003public void setStudentName(String aStudentName)"]},{"entry":[{},"\u2003\u2003{"]},{"entry":[{},"\u2003\u2003\u2003studentName = aStudentName;"]},{"entry":[{},"\u2003\u2003}"]},{"entry":[{},"\u2003\u2003public java.Collections.List getCourseList ( )"]},{"entry":[{},"\u2003\u2003{"]},{"entry":[{},"\u2003\u2003\u2003return courseList( );"]},{"entry":[{},"\u2003\u2003}"]},{"entry":[{},"\u2003\u2003\/\/ build a course list of course object"]},{"entry":[{},"\u2003\u2003......."]},{"entry":[{},"\u2003\u2003......."]},{"entry":[{},"}"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"The Java objects are serialized into XML using a serialization routine. No matter the specific mechanism, the approach is that each item in the list is serialized as an XML fragment. Each XML fragment contains an XML element corresponding to the properties of the object, which are the elements (i.e. text field, radio button field, Y\/N field etc.) on the ERP Panel.","The output of the serialization is a list of Courses, for example:",{"@attributes":{"id":"p-0138","num":"0170"},"tables":{"@attributes":{"id":"TABLE-US-00009","num":"00009"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<StudentCourseList>"]},{"entry":[{},"\u2003<StudentName>StudentName<\/StudentName>"]},{"entry":[{},"\u2003<Course>"]},{"entry":[{},"\u2003\u2003<Name>Course#1<\/Name>"]},{"entry":[{},"\u2003\u2003<Number>Number#1<\/Number>"]},{"entry":[{},"\u2003<\/Course>"]},{"entry":[{},"\u2003<Course>...<\/Course>"]},{"entry":[{},"<\/StudentCourseList>"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"The XML returned from two or more panel objects can be merged to create a unified view of the data in ERP. For example, as supplied by ERP, information about the meeting time and name of the instructor of a course are provided on different panels. The XML streams from the two panels can be merged to present all the information about a course on a single web page.",{"@attributes":{"id":"p-0140","num":"0172"},"figref":"FIG. 8","ul":{"@attributes":{"id":"ul0010","list-style":"none"},"li":["1. Browser issues HTTP request.","2. Web server receives HTTP request.","3. Web server determines that ERP Web Gateway instance needed.","4. Web server creates ERP Web Gateway instance.","5. ERP Web Gateway receives parameters from HTTP request and HTML page containing reference to ERP Web Gateway.","6. ERP Web Gateway creates strongly typed objects using the Java class corresponding to requested ERP application object data.","7. ERP Web Gateway obtains data from the ERP Application through the ERP Connector.","8. ERP Web Gateway determines requested output format from parameters.","9. ERP Web Gateway formats strongly typed object to:\n    \n    "]}},"This concludes the description of the preferred embodiment of the invention. The following describes some alternative embodiments for accomplishing the present invention. For example, any type of computer, such as a mainframe, minicomputer, or personal computer, could be used with the present invention. In addition, any software program adhering (either partially or entirely) to the HTTP protocol or the HTML or ERP Application that exposes a set of external API could benefit from the present invention.","In summary, the present invention discloses a method and apparatus for accessing and updating ERP Application data via the World Wide Web of the Internet. In accordance with the present invention, Web users can request information from ERP Applications via HTML input forms, which request is then used to interact with the ERP Application. The results output by the ERP Application are themselves transformed into HTML format for presentation to the Web user.","The foregoing description of the preferred embodiment of the invention has been presented for the purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise form disclosed. Many modifications and variations are possible in light of the above teaching. It is intended that the scope of the invention be limited not by this detailed description, but rather by the claims appended hereto."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Referring now to the drawings in which like reference numbers represent corresponding parts throughout:",{"@attributes":{"id":"p-0045","num":"0044"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0046","num":"0045"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0047","num":"0046"},"figref":["FIGS. 3A & 3B","FIG. 3"]},{"@attributes":{"id":"p-0048","num":"0047"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0049","num":"0048"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0050","num":"0049"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0051","num":"0050"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0052","num":"0051"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0053","num":"0052"},"figref":"FIG. 9"}]},"DETDESC":[{},{}]}
