---
title: Method to allow storage cache acceleration when the slow tier is on independent controller
abstract: The present invention is directed to a method for providing storage acceleration in a data storage system. In the data storage system described herein, multiple independent controllers may be utilized, such that a first storage controller may be connected to a first storage tier (ex.—a fast tier) which includes a solid-state drive, while a second storage controller may be connected to a second storage tier (ex.—a slower tier) which includes a hard disk drive. The accelerator functionality may be split between the host of the system and the first storage controller of the system (ex.—some of the accelerator functionality may be offloaded to the first storage controller) for promoting improved storage acceleration performance within the system.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09182912&OS=09182912&RS=09182912
owner: Avago Technologies General IP (Singapore) Pte. Ltd.
number: 09182912
owner_city: Singapore
owner_country: SG
publication_date: 20110803
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE INVENTION"],"p":["The present invention relates to the field of data management via data storage systems (ex.\u2014external, internal\/Direct-Attached Storage (DAS), Redundant Array of Inexpensive Disks (RAID), software, enclosures, Network-Attached Storage (NAS) and Storage Area Network (SAN) systems and networks) and particularly to a method to allow storage cache acceleration when the slow tier is on independent controller.","Currently available solutions for promoting storage acceleration between a fast storage tier and a slow storage tier of a data storage system may not provide a desirable level of performance.","Therefore, it may be desirable to provide a storage acceleration solution which addresses the shortcomings of currently available solutions.","Accordingly, an embodiment of the present disclosure is directed to a method for providing storage acceleration in a data storage system via a first storage controller of the data storage system, said method including: opening an Application Programming Interface (API) via the first storage controller, the first storage controller being connected to a first storage tier, the first storage tier including a solid-state drive (SSD); receiving a query at the first storage controller, the query being provided to the first storage controller via a host mapper of the system, the query being generated based on a input\/output (I\/O) command issued by a host of the system, the query requesting read data; when the requested read data is at least one of: located in a cache of the first storage controller, or located on the SSD connected to the first storage controller, retrieving the requested read data and providing the requested read data to the host mapper in response to the query; when the requested read data is not at least one of: located in the cache of the first controller, or located on the SSD connected to the first controller, providing a message to the host mapper indicating a cache miss in response to the query; and when the requested read data is not at least one of: located in the cache of the first controller, or located on the SSD connected to the first controller, and when the requested read data is obtained by the host mapper from a second controller, the second controller being connected to a second storage tier, the second storage tier being a slower storage tier than the first storage tier, the second storage tier including a hard disk drive (HDD), receiving a copy of the requested read data at the first controller.","A further embodiment of the present disclosure is directed to a non-transitory, computer-readable medium having computer-executable instructions for performing a method for providing storage acceleration in a data storage system, said method including: generating a query via a host mapper of the system, the query being based on an input\/output (I\/O) command issued by a host of the system, the I\/O command being a read command, the query including a request for read data; opening an Application Programming Interface (API) via a first storage controller of the system, the first storage controller being connected to a first storage tier, the first storage tier including a solid-state drive (SSD); providing the query to the first controller via the host mapper, the host mapper being connected to a host of the system; receiving the query via the first controller; when the requested read data is at least one of: located in a cache of the first controller, or located on a SSD connected to the first controller, retrieving the requested read data and providing the requested read data to the host mapper in response to the query; when the requested read data is provided by the first controller, receiving the requested read data via the host mapper and directing the requested read data to the host; when the requested read data is not at least one of: located in the cache of the first controller, or located on the SSD connected to the first controller, providing a message to the host mapper indicating a cache miss in response to the query; receiving the cache miss message via the host mapper; in response to receiving the cache miss message from the first controller, providing a request from the host mapper to a second controller for obtaining the requested read data, the second controller being connected to at least one hard disk drive (HDD); when the requested read data is at least one of: located in a cache of the second controller, or located on a hard disk drive (HDD) connected to the second controller, receiving the requested read data from the second controller via the host mapper and directing the requested read data to the host; when the cache miss message indicates to provide a copy of the requested read data obtained from the second controller to the first controller, providing the copy of the requested read data to the first controller via the host mapper; and receiving the copy of the requested read data via the first controller.","It is to be understood that both the foregoing general description and the following detailed description are exemplary and explanatory only and are not necessarily restrictive of the invention as claimed. The accompanying drawings, which are incorporated in and constitute a part of the specification, illustrate embodiments of the invention and together with the general description, serve to explain the principles of the invention.","Reference will now be made in detail to the presently preferred embodiments of the invention, examples of which are illustrated in the accompanying drawings.","Promoting storage acceleration between fast and slow storage tiers of a data storage system is a current area of innovative focus. A number of solutions are currently available for promoting storage acceleration between fast and slow storage tiers of a data storage system. A first currently-implemented solution involves having a single controller manage (ex.\u2014promoted storage acceleration between) both the fast storage tier and the slow storage tier of the data storage system. For instance, with this first currently-implemented solution, a software program for promoting (ex.\u2014providing, facilitating) storage acceleration between the fast and slow storage tiers may execute upon and entirely within the controller. The advantages of this first currently-implemented solution are that it is very efficient and involves low system usage (ex.\u2014low taxation upon resources of the system). However, a disadvantage of this first currently-implemented solution would be that the class of solutions which may be able to connect to a single controller may be limited.","A second currently-implemented solution involves having a host system manage (ex.\u2014promote storage acceleration between) both the fast storage tier and the slow storage tier of the data storage system. For instance, with this second currently-implemented solution, a software program for promoting (ex.\u2014providing, facilitating) storage acceleration between the fast and slow storage tiers may execute upon and entirely within the host system (ex.\u2014host) and may manage as many different controllers of the data storage system as is necessary. An advantage of this second currently-implemented solution is that it is more flexible than the first currently-implemented solution. However, some disadvantages of this second currently-implemented solution would be that it involves higher system usage (ex.\u2014higher taxation upon the resources of the data storage system) and results in a larger number of latencies compared to the first currently-implemented solution. A further disadvantage is that, since the software program which promotes storage acceleration (ex.\u2014provides storage acceleration functionality) is executing entirely within the host, the code of the software program may be difficult to protect from GNU General Public Licenses (GPL) and other open source licenses.","Therefore, it may be desirable to provide a storage acceleration solution which addresses the above-referenced shortcomings of currently available solutions.","Referring to , a data storage system in accordance with an exemplary embodiment of the present disclosure is shown. In exemplary embodiments, the data storage system  may include a host computer system (ex.\u2014a host system; a host; a network host) . The host computer system  may include a processing unit  and a memory , the memory  being connected to the processing unit . In further embodiments, the system  may include one or more controllers (ex.\u2014storage controller(s); disk array controller(s); Redundant Array of Independent Disks (RAID) controller(s); Communication Streaming Architecture (CSA) controllers; adapters). For instance, in the embodiment shown in , the data storage system  includes a first controller  and a second controller . In still further embodiments, the first controller  and the second controller  may be communicatively coupled with the host .","In exemplary embodiments of the present disclosure, the first controller  may include a memory (ex.\u2014controller cache; cache memory) . The first controller  may further include a processing unit , the processing unit  being connected to the cache memory . In further embodiments, the first controller  may be connected to (ex.\u2014communicatively coupled with) a first storage subsystem (ex.\u2014a first storage tier; a fast tier) . For instance, the first storage tier  may include one or more solid-state disk drives (ex.\u2014solid-state drives (SSDs)) .","In embodiments of the present disclosure, the second controller  may include a memory (ex.\u2014controller cache; cache memory) . The second controller  may further include a processing unit , the processing unit  being connected to the cache memory . In further embodiments, the second controller  may be connected to (ex.\u2014communicatively coupled with) a second storage subsystem (ex.\u2014a second storage tier; a slow tier) . For instance, the second storage tier  may include one or more hard disk drives (HDDs) .","In exemplary embodiments, the system  may include a cache engine . The cache engine  may be configured for executing on the processing unit  of the first controller . In still further embodiments, the system  may include a host mapper . The host mapper  may be configured for executing on the processing unit (ex.\u2014processor)  of the host . In an embodiment of the present disclosure, the host mapper  may be a thin driver layer. The cache engine  and host mapper  may function cooperatively for promoting storage acceleration for the system . The steps by which the cache engine  and host mapper  may promote storage acceleration for the system  are discussed below.",{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 2","b":["200","202","200","204","126","102","200","206","104","102","104"]},"In exemplary embodiments of the present disclosure, the method  may further include the step of receiving the query from the host mapper . For instance, the query, which is received by the first controller  and provided from the host mapper , may include a message inquiring as to whether at least one of the cache  of the first controller  or the SSD  connected to first controller  includes data which was requested in the I\/O (ex.\u2014requested read data). In embodiments of the present disclosure, the query may be received by a cache engine  of the first controller . In further embodiments, the method  may include the step of, when the requested read data is at least one of: located in the cache of the first controller, or located on the SSD connected to the first controller, retrieving the requested read data and providing the requested read data to the host mapper in response to the query . For instance, when the requested read data is located in the cache  of the first controller  and\/or is located on the SSD  connected to the first controller , the first controller  may (ex.\u2014via its cache engine ) retrieve the requested read data from the cache  and\/or the SSD  and may provide it to the host mapper  in response to the query. In further embodiments, the method  may include the step of, when the requested read data is provided by the first controller, receiving the requested read data via the host mapper and directing the requested read data to the host .","In an embodiment of the present disclosure, the method  may further include the step of: when the requested read data is not at least one of: located in the cache of the first controller, or located on the SSD connected to the first controller, providing a message to the host mapper indicating a cache miss in response to the query . For example, when the requested read data is not located in the cache  of the first controller  and is not located on the SSD  connected to the first controller , the first controller  (ex.\u2014via its cache engine ) may provide a message to the host mapper  indicating that a cache miss has occurred (ex.\u2014cache miss message), the message being provided in response to the query. In further embodiments, the message indicating that a cache miss has occurred may also include an indication that the read data should be requested from a second storage controller (ex.\u2014a slow tier controller) . In still further embodiments, the message indicating that a cache miss has occurred may also include an indication that a copy of the requested read data obtained via the second controller  is to be provided to the first controller .","In exemplary embodiments of the present disclosure, the method  may further include the step of receiving the cache miss message via the host mapper . The method  may further include the step of, in response to receiving the cache miss message from the first controller, providing a request from the host mapper to a second controller for obtaining the requested read data, the second controller being connected to at least one hard disk drive (HDD) . For example, the host mapper  may provide a request to the second controller (ex.\u2014the slow tier controller)  for obtaining the requested read data. In further embodiments, the method  may further include the step of, when the requested read data is at least one of: located in a cache of the second controller, or located on a hard disk drive (HDD) connected to the second controller, receiving the requested read data from the second controller via the host mapper and directing the requested read data to the host . In still further embodiments, the method  may further include the step of, when the cache miss message indicates to provide a copy of the requested read data obtained from the second controller to the first controller, providing the copy of the requested read data to the first controller via the host mapper . In further embodiments, the method  may further include the step of receiving the copy of the requested read data via the first controller . For instance, the copy of the requested read data may be received via the cache engine  of the first controller .","When implementing the method for providing storage acceleration in a data storage system, as described above, the use of the cache engine  on the controller  and the use of the host mapper  on the host  allows for the accelerator functionality to be split across two devices (ex.\u2014the host  and the controller ). Thus, the cache engine  on the controller  may function as an offload accelerator, and may allow sensitive information to be protected within the controller . Further, with the method for providing storage acceleration in a data storage system, as described above, reduced latency may be promoted compared to currently available solutions.","It is to be noted that the foregoing described embodiments according to the present invention may be conveniently implemented using conventional general purpose digital computers programmed according to the teachings of the present specification, as will be apparent to those skilled in the computer art. Appropriate software coding may readily be prepared by skilled programmers based on the teachings of the present disclosure, as will be apparent to those skilled in the software art.","It is to be understood that the present invention may be conveniently implemented in forms of a firmware package and\/or a software package. Such a firmware package and\/or software package may be a computer program product which employs a computer-readable storage medium including stored computer code which is used to program a computer to perform the disclosed function and process of the present invention. The computer-readable medium\/computer-readable storage medium may include, but is not limited to, any type of conventional floppy disk, optical disk, CD-ROM, magnetic disk, hard disk drive, magneto-optical disk, ROM, RAM, EPROM, EEPROM, magnetic or optical card, or any other suitable media for storing electronic instructions.","It is understood that the specific order or hierarchy of steps in the foregoing disclosed methods are examples of exemplary approaches. Based upon design preferences, it is understood that the specific order or hierarchy of steps in the method can be rearranged while remaining within the scope of the present invention. The accompanying method claims present elements of the various steps in a sample order, and are not meant to be limited to the specific order or hierarchy presented.","It is believed that the present invention and many of its attendant advantages will be understood by the foregoing description. It is also believed that it will be apparent that various changes may be made in the form, construction and arrangement of the components thereof without departing from the scope and spirit of the invention or without sacrificing all of its material advantages. The form herein before described being merely an explanatory embodiment thereof, it is the intention of the following claims to encompass and include such changes."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The numerous advantages of the present invention may be better understood by those skilled in the art by reference to the accompanying figure(s) in which:",{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":["FIG. 2","FIG. 1"]}]},"DETDESC":[{},{}]}
