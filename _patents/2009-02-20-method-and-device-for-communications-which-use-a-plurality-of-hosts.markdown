---
title: Method and device for communications which use a plurality of hosts
abstract: A communication device that communicates as a device with a plurality of hosts by using a communication interface that is designed to be used for a point-to-multipoint network on which a single host is connected to a plurality of devices, includes a control unit that controls to cause a disconnecting unit to disconnect the communication device from a destination host that is among the hosts capable of establishing a communication path with the communication device and is connected to the communication device using host identification information and device control information stored in a storage unit, and cause a connecting unit to connect the communication device to a next destination host from among the hosts to switch the hosts sequentially.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08605307&OS=08605307&RS=08605307
owner: Ricoh Company, Limited
number: 08605307
owner_city: Tokyo
owner_country: JP
publication_date: 20090220
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS"],"p":["The present application claims priority to and incorporates by reference the entire contents of Japanese priority document 2008-057679 filed in Japan on Mar. 7, 2008.","1. Field of the Invention","The present invention relates to a technology for communications between communication devices via a communication interface.","2. Description of the Related Art","Most personal computers (PCs) include a general-purpose communication interface (I\/F). By the presence of the general-purpose communication I\/F, a user can connect various external devices to the PC, and use the PC on the network. A point-to-multipoint is a topology in which a single PC as a host is connected to a plurality of devices. A typical device is, for example, a printer. Some printers give strict priorities to buses in consideration of data transfer capability of the buses, thereby transferring data efficiently, which is disclosed in, for example, Japanese Patent Application Laid-open No. 2005-333676. In most cases, a single printer is shared by a plurality of PCs.","However, in the point-to-multipoint connection that is designed for connecting a single host to a plurality of devices, it is difficult to connect the plural PCs as the hosts to the single printer as the device. Therefore, in the point-to-multipoint connection that is designed for connecting a single host to a plurality of devices, there is necessity of improving usability in connection.","It is an object of the present invention to at least partially solve the problems in the conventional technology.","According to an aspect of the present invention, there is provided a communication device that communicates as a device with a plurality of hosts by using a communication interface that is designed to be used for a point-to-multipoint network on which a single host is connected to a plurality of devices, the communication device includes a storage unit that stores therein a host identification information that is received, in establishing connections with the hosts, from the hosts for identifying each of the hosts, and a device control information that is used for uniquely identifying the communication device; a connecting unit that connects the communication device to a destination host from among the hosts capable of establishing a communication path with the communication device by establishing the communication path to the destination host using the host identification information and the device control information; a disconnecting unit that disconnects the communication device from the destination host; and a control unit that controls to cause the disconnecting unit to disconnect the communication device from the destination host and cause the connecting unit to connect the communication device to a next destination host from among the hosts to switch the hosts sequentially.","According to another aspect of the present invention, there is provided a communication method that is configured to be executed in a communication device that communicates as a device with a plurality of hosts by using a communication interface that is designed to be used for a point-to-multipoint network on which a single host is connected to a plurality of devices, the communication method including storing a host identification information that is received, in establishing connections with the hosts, from the hosts for identifying each of the hosts, and a device control information that is used for uniquely identifying the communication device; connecting the communication device to a destination host from among the hosts capable of establishing a communication path with the communication device by establishing the communication path to the destination host using the host identification information and the device control information; disconnecting the communication device from the destination host; and controlling to disconnect the communication device from the destination host at the disconnecting and to connect the communication device to a next destination host from among the hosts at the connecting to switch the hosts sequentially.","The above and other objects, features, advantages and technical and industrial significance of this invention will be better understood by reading the following detailed description of presently preferred embodiments of the invention, when considered in connection with the accompanying drawings.","Exemplary embodiments of the present invention are described in detail below with reference to the accompanying drawings.",{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 1","b":["10","10","60","80","81","82","60","61","62","63","66","67","68","69","70","71","72","73","75","76","77"]},"The operation panel  is connected to the ASIC . The FCU  and the engine unit  are connected to the ASIC  via a PCI bus . In the controller , the ASIC  is connected to the MEM-C  and the HDD . The ASIC  is connected to the CPU  via a chipset for the CPU , i.e., the NB . Because the CPU  and the ASIC  are connected to each other via the NB , the controller  can operate even if an interface of the CPU  is undisclosed.","The NB  is a bridge that connects the CPU , the MEM-P , the ASIC , the NIC , the memory card I\/F , the USB , the IEEE1394 I\/F , the IEEE802.11b I\/F , the wireless USB , the USB host , and the serial bus  to each other. The NIC , the memory card I\/F , the USB , the IEEE1394 I\/F , the IEEE802.11b I\/F , the wireless USB , the USB host , and the serial bus  are connected to the NB  via a PCI bus .","The CPU  controls the image forming apparatus  and implements various functions by reading various software programs from the MEM-P , the MEM-C , and the HDD  via the NB , and running the acquired software programs.","The MEM-P  stores therein drawing data, etc. The MEM-C  is used as a buffer that stores therein copy images and codes. The ASIC  is an integrated circuit specific to image processing, and includes a hardware component for the image processing. The HDD  is an auxiliary storage device that stores therein various data such as image data, document data, software programs, and font-data forms.","The NIC  is an interface that connects the image forming apparatus  to a network. The memory card I\/F  controls communications between the image forming apparatus  and a memory card  that is detachably attached to the image forming apparatus . The USB , the IEEE1394 I\/F , the IEEE802.11b I\/F , the wireless USB , and the serial bus  are interfaces supported by different standards. For example, the wireless USB  is supported by wireless-USB standards. The wireless-USB standards are extended from USB standards to apply USBs to wireless communications. The USB host  controls communications between the image forming apparatus  and a USB memory  that is detachably attached to the image forming apparatus .","The operation panel  receives various instructions from a user, and displays a notice for the operator. The engine unit  includes a plotter , a scanner , and an engine control board  (not shown in ) as units that process images. The plotter  can be, for example, a black-and-white plotter, a color plotter with a single drum, and a color plotter with four drums. The scanner  scans an original on a scanning position, and reads an image from the original. The engine control board  controls the engine unit  under control of the CPU . The FCU  controls facsimile communications, and includes a memory (not shown). The memory of the FCU  is used to temporarily store therein facsimile data that has been received while the power of the image forming apparatus  is OFF.",{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 2","b":["10","10","31","32","33","34","35","10","42","44","45","46","47","48","10","41","49","62","67","68","61"]},"The printer application  is a software program for a printer that is supported by a page-description language (PDL) such as PostScript (PS) or a printer control language (PCL). The copy application  is a software program for copying. The facsimile application  is a software program for a facsimile. The scanner application  is a software program for a scanner. The Web application  is a software program for a network.","The OS  can be, for example, LPUX (registered trademark). The OS  executes various applications as processes in parallel. The engine I\/F  controls the engine unit  via the engine control board . The engine control board  is included in the engine unit .","The SCS  is in charge of various processes such as management of the software programs, control and screen display of the operation panel , display of light-emitting diodes (LEDs), management of the hardware sources, and control of software interrupts. The ECS  is in charge of, under control of the engine control board , processes of controlling the engine unit , more particularly, the plotter  and the scanner .","The MCS  is in charge of memory control such as acquisition and release of memory for the images, usage of the HDD , and compression and decompression of the image data. The OCS  is in charge of a process of controlling the operation panel . The FCS  is in charge of various facsimile processes of providing application programming interfaces (APIs) such as for sending\/receiving of facsimile data to\/from software layers of the system controllers via a public switched telephone network (PSTN) or an integrated services digital network (ISDN), writing\/reading of facsimile data to\/from the backup memory, scanning of facsimile data, receiving and printing of facsimile data, and combining of facsimile communications with other data communications.","The NCS  is in charge of a process of providing services that can be shared to software programs requiring a network input\/output (I\/O). In other words, the NCS  is used to sort data that is received via the network under a certain protocol to a proper software unit, or operate between the software unit and the network so that data is sent from the software unit to the network. For example, the NCS  controls data communications between devices that are connected to each other via a network by using a hyper text transfer protocol daemon (httpd) under a hyper text transfer protocol (HTTP).","In this manner, the CPU  runs various services such as the SCS, the ECS , the MCS , the OCS , the FCS , and the NCS  on the OS  as various processes, and also runs various applications such as the printer application , the copy application , the facsimile application , the scanner application , and the Web application  appropriately, thereby implementing various functions.","Salient features of the present embodiment implemented by the NCS  and the OS  are described with reference to . The salient features are, in short, functions of a communication unit  and a connection control unit . Under control of the connection control unit , the communication unit  establishes a connection with any one of a plurality of hosts A, B, . . . , N as a destination host and cuts off the connection by using a communication I\/F that is designed for the point-to-multipoint network on which a single host is connected to a plurality of devices, thereby switching the destination hosts. The hosts A, B, . . . , N can be, for example, PCs, mobile terminals, and digital cameras. Assume in the present embodiment that a wireless USB is used as the communication I\/F.","The connection control unit  causes the communication unit  to connect\/disconnect the image forming apparatus  to\/from the hosts. More particularly, the connection control unit  creates, by referring to connection setting information and an unacceptable host list, a possible destination list including hosts having possibility to be connected. The connection control unit  selects a host to be connected (hereinafter, \u201cnext destination host\u201d) from among the hosts in the possible destination list. The connection control unit  then sends to the communication unit  a request to cut off the connection with the host that is currently being connected (hereinafter, \u201ccurrent destination host\u201d) and establish a new connection with the next destination host, by sending along with a host ID of the next destination host and device control information of the image forming apparatus . The host ID is information for identifying each host. The image forming apparatus  receives the host ID from the destination host through association to establish a communication path between the image forming apparatus  and the destination host. The host ID is equivalent to a connection context (CC) in the present embodiment. The device control information is an identifier for uniquely identifying the image forming apparatus  as the device. The device control information is equivalent to a connection device ID (CDID) in the embodiment. The image forming apparatus  stores the host IDs that were received through the previous associations and the device control information in a memory such as the MEM-P . If it is necessary to establish a connection with the host again, the image forming apparatus  establishes the connection path to the host by using the host ID and the device control information stored in the memory.","The connection setting information is connection rules. The connection rules are used for establishing\/cutting-off the connections with the hosts. More particularly, the connection rules include information indicative of whether the destination hosts are to be switched periodically, interval at which the destination hosts are to be switched periodically, and information for identifying, if the next destination host is specified, the specified host (e.g., host name), which is set in advance and can be appropriately changed in accordance with instructions input by a user via the operation panel  as a user interface. The connection setting information is stored in, for example, the MEM-P , and can be changed as appropriate via the user interface.","The unacceptable host list includes hosts that are not allowed to be connected to the image forming apparatus  (hereinafter, \u201cunacceptable hosts\u201d). The unacceptable host list is created based on various instructions received from the user via the operation panel . The possible destination list including the hosts having possibility to be connected is created by referring to the unacceptable host list. The unacceptable host list and the possible destination list are stored, for example, in a form of parameters of programs.",{"@attributes":{"id":"p-0036","num":"0035"},"figref":["FIGS. 4 to 7","FIG. 4","FIG. 5","FIG. 6","FIG. 7"],"b":["80","10","10"]},"Upon receiving any of the instructions via any of the user I\/F screens shown in , the connection control unit  changes the connection setting information or the unacceptable host list as appropriate based on the received instruction, and updates the possible destination list in response to the changing of the connection setting information or the unacceptable host list.","The communication process performed by the image forming apparatus  according to the present embodiment is described with reference to . The connection control unit  acquires the connection rules by reading the connection setting information, and acquires the unacceptable host list (Step S). The connection control unit  creates the possible destination list by selecting hosts that are not in the acquired unacceptable host list among hosts capable of establishing a communication path with the image forming apparatus  based on the connection rules and the unacceptable host list (Step S). The hosts in the possible destination list are arranged in order based on a certain or predetermined manner. The connection control unit  selects the next destination host from among the hosts in the possible destination list based on the connection rules, and sends the host ID of the next destination host and the device control information of the image forming apparatus  to the communication unit  to request the communication unit  to establish the connection with the next destination host. Upon receiving the request, the communication unit  establishes the communication path to the next destination host that is selected by the connection control unit  by using the received host ID and the device control information, thereby connecting the image forming apparatus  to the next destination host (Step S).","After that, the connection control unit  selects a host different from the host with which the connection is established at the last time (hereinafter, \u201clatest destination host\u201d) from among the hosts in the possible destination list as the next destination host. More particularly, the connection control unit  selects a host that is arranged in the possible destination list next to the latest destination host as the next destination host. The connection control unit  sends the host ID of the next destination host and the device control information of the image forming apparatus  to the communication unit  to request the communication unit  to establish the connection with the next destination host.","Assume, for example, that it is determined on the connection rules that the destination hosts are to be switched periodically at the interval of 60 milliseconds (ms). The connection control unit  selects the host that is arranged in the possible destination list next to the latest destination host as the next destination host at every 60 ms.","Upon receiving the request, the communication unit  cuts off the connection with the current destination host, and establishes the connection path to the next destination host that is selected by the connection control unit  by using the received host ID and the received device control information, thereby connecting the image forming apparatus  to the next destination host (Step S). As a result, the destination hosts are switched.","The connection control unit  repeats the process in Step S based on the connection rules, thereby switching the destination hosts repeatedly. The connection control unit  sequentially selects the next destination host from among the hosts in the possible destination list.","When the connection with the current destination host is cut off because of, for example, moving of the current destination host to outside a coverage area, the connection control unit  selects the host that is arranged in the possible destination list next to the latest destination host as the next destination host immediately even before an end of the interval. The communication unit  then tries to establish the connection with the next destination host.","Upon receiving any of the instructions via any of the user I\/F screens shown in  (Yes at Step S), the connection control unit  changes the connection setting information or the unacceptable host list as appropriate based on the received instruction, and updates the possible destination list in response to the changing of the connection setting information or the unacceptable host list (Step S). Thereafter, the process control returns to Step S.","If, for example, the connection control unit  receives the instruction for switching the destination hosts via the user I\/F screen shown in , the connection control unit  selects a host that is different from the latest destination host as the next destination host at Step S.","If the connection control unit  receives the instruction for specifying the next destination host from among the hosts in the possible destination list via the user I\/F screen shown in , the connection control unit  selects the specified host as the next destination host, and sends the request to establish the connection with the next destination host to the communication unit  at Step S.","If the connection control unit  receives the instruction for specifying the interval via the user I\/F screen shown in , the connection control unit  changes the interval that is determined on the connection rules to the specified value. After the changing is completed, the connection control unit  selects a host in the possible destination list that is different from the latest destination host as the next destination host and sends the request to establish the connection with the next destination host to the communication unit  at Step S at every changed interval.","If the connection control unit  receives the instruction for adding\/deleting a specific host to\/from the unacceptable host list via the user I\/F screen shown in , the connection control unit  adds\/deletes the specific host to\/from the unacceptable host list. The connection control unit  then updates the possible destination list based on the updated unacceptable host list. After that, the connection control unit  selects the next destination host from the updated possible destination list based on the connection rules, and sends the request to establish the connection with the next destination host to the communication unit  at Step S.","In this manner, even by using the communication I\/F that is designed to be used for the point-to-multipoint network on which a single host is connected to a plurality of devices, it is possible to share the image forming apparatus  as a single device by the plural hosts in the easy manner by switching the destination hosts.","Moreover, if the mode in which the destination hosts are to be switched periodically is selected, the destination hosts are switched automatically without receiving the instruction from the user. The user can specify the interval in consideration of the usage environment of the user in settings for this mode. This makes it possible to set efficient switching conditions.","Furthermore, the connection control unit  creates the possible destination list once instead of determining the hosts having possibility to be connected each time the destination hosts are switched. This reduces the processing load.","Moreover, because the user can issue the explicit instruction for switching the destination hosts, it is possible to switch the destination hosts at proper timing.","Furthermore, because the user can specify the desired host from the possible destination list as the next destination host, it is possible to connect to the destination host in an efficient manner.","Moreover, the user can decide the hosts having possibility to be selected for connection by specifying the unacceptable host. This improves efficiency and security in the data transfer.","The various software programs executed by the image forming apparatus  can be stored in a computer connected to the image forming apparatus  via a network such as the Internet, and downloaded to the image forming apparatus  via the network. The various software programs can be stored in a form of a file that is installable and executable on a computer, in a recording medium readable by the computer, such as a compact disk-read only memory (CD-ROM), a flexible disk (FD), a compact disk-recordable (CD-R), and a digital versatile disk (DVD).","Although the image forming apparatus  is used as the communication device in the above embodiments, it is allowable to use any communication devices such as a copier, a printer, and a facsimile instead of the image forming apparatus  as the device.","The communication unit  can be configured to receive the request to cut off the connection from the host, and cut off the connection in response to the received request at Step S. With this configuration, it is unnecessary to wait the instruction from the user for switching the destination hosts, because the destination hosts are switched in response to the request from the host.","The interval at which the destination hosts are switched periodically can be extended based on communication usage information. The communication usage information indicates communication relation between the image forming apparatus  and each of the hosts. Examples of the communication usage information include communication frequency, communication time, and communication interval. With this configuration, the efficiency in use of the communication device can be improved.","The host that is arranged in the possible destination list next to the latest destination host is selected as the next destination host in the above embodiment. However, the next destination host can be selected in any manner, for example, randomly so that the latest destination host is not selected as the next destination host.","The image forming apparatus  can be configured to include a measuring unit that measures a distance between the image forming apparatus  and the hosts capable of establishing the communication path with the image forming apparatus , and select a host having a shorter distance from the image forming apparatus  as the destination host in the possible destination list. With this configuration, the connection control unit  selects the hosts sequentially in an ascending order of the measured distance. Therefore, the image forming apparatus  tries to establish the connection with the host that is likely to have a higher connection demand.","The image forming apparatus  can be configured to receive an instruction for specifying the order of the hosts in the possible destination list from the user. With this configuration, because the user can set the order of the hosts based on the connection priority, it is possible to switch the destination hosts efficiently.","The wireless USB is used as the communication I\/F that is designed to be used for the point-to-multipoint network on which a single host is connected to a plurality of devices. However, any general-purpose communication I\/F for wire communications or wireless communications can be used.","According to an aspect of the present invention, it is possible to easily establish a network on which a plurality of hosts is connected to a single device by using a communication I\/F that is designed to be used for a point-to-multipoint network on which a single host is connected to a plurality of devices.","Although the invention has been described with respect to specific embodiments for a complete and clear disclosure, the appended claims are not to be thus limited but are to be construed as embodying all modifications and alternative constructions that may occur to one skilled in the art that fairly fall within the basic teaching herein set forth."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":["FIG. 3","FIG. 2"]},{"@attributes":{"id":"p-0015","num":"0014"},"figref":["FIGS. 4 to 7","FIG. 1"]},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 8"}]},"DETDESC":[{},{}]}
