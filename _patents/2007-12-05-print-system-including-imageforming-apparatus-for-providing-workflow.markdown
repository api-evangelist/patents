---
title: Print system including image-forming apparatus for providing workflow
abstract: An image-forming apparatus is capable of communicating with a server apparatus for performing a workflow. The image-forming apparatus includes a receiving unit configured to receive definition information of a flow defined in a workflow from the server apparatus and a control unit configured to control display of a screen of the image-forming apparatus based on the flow definition information received by the receiving unit. The image-forming apparatus further includes a notification unit configured to notify the server apparatus of a completion of the flow by the image-forming apparatus.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08441665&OS=08441665&RS=08441665
owner: Canon Kabushiki Kaisha
number: 08441665
owner_city: Tokyo
owner_country: JP
publication_date: 20071205
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DESCRIPTION OF THE PREFERRED EMBODIMENTS"],"p":["1. Field of the Invention","The present invention relates to a print system including an image-forming apparatus (e.g., multi-function product).","2. Description of the Related Art","In recent years, various kinds of workflow systems have been proposed and put into practical use for the purpose of automating business processing, clarifying business processing procedures, and facilitating storing\/monitoring\/browsing of business processing results. In some of these systems, a workflow system is constructed in an application server, and a user performs business processing in the workflow system via a client using a PC.","On the other hand, an application execution environment typified by a Java (registered trademark) environment may be implemented in MFPs (Multi-Function Products). If a program that operates in such an environment is developed, it is possible to generate an application using functions provided by an MFP. For example, it is possible to generate an application utilizing functions such as scanning, printing, and sending\/receiving of faxes, which are functions provided by the MFP. Furthermore, it is also possible to generate an application with which system coordination is performed by communicating with a server via a network.","According to Japanese Patent Laid-Open No. 2006-053891, a system has been proposed in which processing can be progressed using the operation unit of an MFP in accordance with a workflow system for managing operation steps of an operator in a centralized copy room and a print center. In this proposal, one job (copy job, scan job, print job, bookbinding job, etc.) of an MFP is linked with a corresponding step of a workflow. This is a feature in a POD (Print On Demand) workflow and is suitable for a workflow system to perform progress management of operations performed by the MFP one by one.","However, in the above-described example of the related art, one step of the workflow is linked with one job of the MFP. For this reason, only the processing screen of a certain job can be shown on the operation unit screen of the MFP. Furthermore, since the example of the related art has little power of expression, it is not possible to provide, to a user, an operation screen that gives guidance regarding a complex operation flow involving a plurality of steps. As a result, the following problems arise.","A first problem is that operation using a plurality of functions of an MFP, which is an image-forming apparatus, may not be realized in cooperation with a workflow system provided by a server apparatus. For example, there may be a case in which, in one step, a subflow is started, a user prints a document, and the print result is faxed by the user.","A second problem is that the display screen transition of the MFP may not be set in cooperation with a workflow system provided by a server apparatus. For example, a case is assumed in which, in one step, a user starts a subflow in order to perform a scan process. A certain user may demand a screen transition, such as a scan instruction screen, a preview screen, and a transmission completion screen. On the other hand, another user may demand a screen transition, such as a scan instruction screen and a transmission completion screen. Regeneration of an application of the MFP for each demand of the user can take time and effort, and lead to increased cost, which is undesirable.","An embodiment of the present invention is directed to an image-forming apparatus capable of communicating with a server apparatus for performing a specific workflow. The image-forming apparatus includes: a receiving unit configured to receive definition information of a flow defined in a workflow from the server apparatus; a control unit configured to control display of a screen of the image-forming apparatus based on the definition information of the flow received by the receiving unit; and a notification unit configured to notify the server apparatus of a completion of the flow by the image-forming apparatus.","Other features and advantages of the present invention will be apparent from the following description taken in conjunction with the accompanying drawings, in which like reference characters designate the same or similar parts throughout thereof.","Embodiments of the present invention will be described below in detail with reference to the attached drawings.",{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 1"},"In , reference numeral  denotes a multi-function product (hereinafter abbreviated as an \u201cMFP\u201d). Reference numeral  denotes a network that mediates communication among devices. Reference numeral  denotes a server computer used as an application server or the like. Reference numeral  denotes a personal computer (hereinafter abbreviated as a PC) used as a client or the like. Reference numeral  denotes a gateway device used when connection with an intranet\/the Internet or the like is to be made. The segment of the network in which each device described herein is located is not particularly limited. As long as communication among devices is possible even in any arrangement topology, the present system can be implemented.",{"@attributes":{"id":"p-0033","num":"0032"},"figref":["FIG. 2","FIG. 1"],"b":["100","200","201","201","202","202","100","100","203","204","205","206","207"]},"A controller unit  centrally controls the fixing unit, the paper discharging unit, the finishing unit, and the scanner unit. The controller unit  also controls the reception of a network interface . A NET  is a network communication path that corresponds to the network  in . In a memory unit , various kinds of programs including an application are stored, and a program is read and executed by the controller unit . Furthermore, flow definition information containing screen transition information can also be stored in the memory unit . In an embodiment, the memory unit  is formed as a memory map shown in  (to be described later).",{"@attributes":{"id":"p-0035","num":"0034"},"figref":["FIG. 3","FIG. 1"],"b":["102","103","102","103","300","301","302","303","304","305","306"]},"The application server  stores screen transition information, which is an example of flow definition information, in the HDD . Information stored in the HDD is transmitted as necessary to the MFP  via the network interface unit by using the CPU . The CPU  executes a program. A Web server , the application server , a database , and a file system  are stored in the HDD , and these are read or executed by the CPU. Of course, these may be stored in separate computers (not shown) and may be centrally controlled.",{"@attributes":{"id":"p-0037","num":"0036"},"figref":"FIG. 4","b":["100","401","402","401","402","403","404","403","401","404","403","405","401"]},"Reference numeral  denotes a framework for an application executed in the virtual machine . Reference numeral  denotes an application programming interface (hereinafter abbreviated as an \u201cAPI\u201d) provided by the framework . Reference numerals , , and  each denote an application executed in the framework . Services that are commonly necessary, function modules that are often used, a library group that is necessary to control each function of an MFP by accessing the controller unit , and the like are provided in advance in the framework . As a result, by using the API , it is possible to efficiently develop and execute an application . An application A has, for example, a browser function or controls a communication function with a server. The application A also interprets and displays the information of  and controls the screen transition of . Furthermore, the application A detects various instructions (facsimile transmission, printing, and transmission of a file to the server) input from the user interface of the application A. Then, by using the API and the framework, the application A calls the controller unit. As a result, an API corresponding to facsimile transmission, printing, or transmission of a file to the server is called, and the OS is controlled as necessary. In response, the MFP  performs facsimile transmission, printing, or transmission of a file to the server.",{"@attributes":{"id":"p-0039","num":"0038"},"figref":"FIG. 5","b":["407","202","500","501","502","503","504","505","506","507","508","509","510","405","506","508","509","507","600","506","510","510","600"]},{"@attributes":{"id":"p-0040","num":"0039"},"figref":"FIG. 6","b":["601","603","601","602","2","601","604"]},{"@attributes":{"id":"p-0041","num":"0040"},"figref":["FIG. 7","FIG. 1","FIG. 7"],"b":["703","704","102","102","102","703","704","102","705","706","103","102","101","701","702","100","102","101","705"]},{"@attributes":{"id":"p-0042","num":"0041"},"figref":"FIG. 8","b":["601","801","601","801","103","102"]},{"@attributes":{"id":"p-0043","num":"0042"},"figref":"FIGS. 9 and 10","b":["102","103","1","2"]},"When a flow  is started in response to a detection of an instruction, the flow begins from \u201cdraft\u201d. It is assumed that the draft process is completed by performing a predetermined input operation by a supervisor using the client PC . Then, the workflow proceeds to a step of request. There is also a case in which a portion or the whole of step  of \u201crequest\u201d corresponding to step  of a certain flow definition  is desired to be processed using the MFP . It is possible for the supervisor to define the screen transition definition of the application in the MFP as a subflow definition . The subflow definition is an example of definition information. The subflow definition  includes screen transition specification information denoted as , ,  and the like. On the other hand, when step  of \u201corder\u201d corresponding to step  of a flow definition  is processed using the MFP , the screen transition definition of the application in the MFP is defined as a subflow definition . The subflow definition  contains screen transition specification information , , , and the like. In the subflow definition , the scan functions of the MFP can be used, and in the subflow definition , the print functions and the facsimile functions of the MFP can be used. Combinations of screen transition can also be defined. That is, in one step of a certain flow definition, the use function of the application in the MFP and the screen transition can be easily changed.",{"@attributes":{"id":"p-0045","num":"0044"},"figref":"FIGS. 11 and 12","b":["1101","1102","1103","1101","1111","1112","1113","1114","1115","1201","1202","1203","1211","1212","1213","1214"]},"Definition information, such as the flow definitions  and , is stored in the table . Definition information, such as steps  and , is stored in the table . Definition information, such as the subflow definitions  and , are stored in the table . Screen transition specification information in the subflow is stored in the table . These pieces of definition information are managed by the workflow management module , and are loaded when the workflow is performed and used.",{"@attributes":{"id":"p-0047","num":"0046"},"figref":["FIG. 13","FIG. 15"],"b":["903","407","100","1301","1302","1311","1312","1322","1333","1501","1511","1521"]},"On the first scan start screen, it is shown that a color mode , a resolution , and a file format  can be specified. These correspond to , , and  in , respectively, and will be described in detail later.",{"@attributes":{"id":"p-0049","num":"0048"},"figref":"FIGS. 14","b":["15","16","903","1003"]},"The MFP  accesses the application server  in order to receive work item list information. For example, when the user inputs a user ID and a password from the operation unit of the MFP , these are transmitted to the application server . The application server  searches the database system  by using a user name as a key. As a result, a list of work items corresponding to the user is obtained and is transmitted to the MFP . Then, the operation unit of the MFP displays a screen denoted as . Reference numeral  denotes a screen for displaying information on a list of work items awaiting processing, which can be processed by the user using the MFP. Reference numeral  denotes a control panel for displaying a list of work items waiting to be processed. Reference numerals  and  each denote a work item waiting to be processed.","A work item at the time of execution, which corresponds to step  of the flow definition , is assumed to be the work item . A work item at the time of execution, which corresponds to step  of the flow definition , is assumed to be the work item .","When a control button  is pressed, the processing of the work item  is started and the screen transitions to a scan instruction screen . That is, the execution screen of the screen transition specification information  is denoted by . The screen transition specification information  corresponds to a \u201csub_process\u201d element  of the subflow definition XML . The \u201csub_process\u201d element  includes a \u201cscreen\u201d element , a \u201cguidance\u201d element , an \u201coption_settings\u201d element , a \u201cforward\u201d element , and a \u201cbackward\u201d element . The \u201cscreen\u201d element  specifies the screen . The \u201cguidance\u201d element  specifies a guidance message . The \u201coption_settings\u201d element  specifies a display specification of an option setting control panel . The \u201cforward\u201d element  specifies calling of a scan function specified by the \u201cfunction\u201d element when the control button  is pressed, and has a transition destination screen in the \u201ctarget\u201d element. That is, after the control button  is pressed, the scan function is called, and the screen transitions to the screen  corresponding to the \u201csub_process\u201d element  in which the \u201cid\u201d attribute has a value of \u201c002\u201d. Furthermore, when the scan function is to be called, a set value selected by the option setting control  is used. The \u201cbackward\u201d element  has a transition destination screen when the control button  is pressed in the \u201ctarget\u201d element. That is, after the control button  is pressed, the screen transitions to the screen  corresponding to the \u201chome\u201d.","Hereinafter, in a similar manner, the screen transition specification information  becomes the screen  at the time of execution in such a manner as to correspond to the \u201csub_process\u201d element , and controls the transition destination when the control button  or  is pressed. The screen transition specification information  becomes the screen  at the time of execution in such a manner as to correspond to the \u201csub_process\u201d element , and controls the transition destination when the control button  is pressed.","The screens at the time of execution, which correspond to the screen transition specification information , , and  of the subflow definition , are screens , , and , respectively. As described above, by only changing the subflow definition, it is possible to change the screen transition of an application in the MFP and functions to be used in one step.",{"@attributes":{"id":"p-0055","num":"0054"},"figref":["FIG. 17","FIG. 2","FIG. 6"],"b":["100","202","1701","100","102","1702","102","1703","604","603"]},"The application server  sends back information on the list of work items to the MFP  (S). On the basis of the received list information, the MFP  displays, in a list, work items  and  for the logged-in user on the screen  of  (S). In the MFP , pressing of the control buttons  and  of  is waited for. In the MFP , when the pressing of a button is detected, a process is performed for selecting a work item (S). Then, the MFP  transmits a request for obtaining a subflow definition corresponding to the selected work item to the application server  (S). The application server  searches the tables , , , and  of  for the subflow definition information corresponding to the selected work item (S).","For example, when the selected work item is a work item in a \u201crequest\u201d step in the \u201ctransportation fee request flow\u201d, a search is performed in the following procedure. In the table , a flow definition ID  in the \u201ctransportation fee request flow\u201d is \u201c1\u201d. In the \u201crequest\u201d step, a step ID is \u201c2\u201d. This is recognized when the control button  is pressed by using a prestored workflow definition. When a search for a record in which the flow definition is \u201c1\u201d and the step ID is \u201c2\u201d is performed in the table , the fact that a subflow ID  is \u201c1\u201d is found.","When a record in which the subflow ID is true, that is, \u201c1\u201d is found in the table , it is found that the subflow definition name  is \u201cscan transmission\u201d. Furthermore, when a record in which the subflow ID is \u201c1\u201d is searched for in the table , three records in which the substep ID  is \u201c1\u201d, \u201c2\u201d, or \u201c3\u201d are found. The subflow definition information obtained from the tables , , , and  is formed as the subflow definition XML  of  and is sent back to the MFP  (S). The MFP  receives the subflow definition XML , parses it, and obtains necessary control information (S). The control information of the subflow definition  represents the subflow definition  of , and control information necessary for the screen transition of , , and . On the basis of the obtained control information, the MFP  allows the screen to transition to application screens , , and  of , which correspond to the screens of , , and , respectively (S and S). On the application screen  of , when the execution of the subflow is completed, the MFP  transmits the notification of the subflow completion to the application server  (S). When the application server  receives the notification of the subflow completion, the application server  performs a process for completing the processed work item (S). As a result, since a certain step is completed as a result of processing using the MFP , the workflow proceeds to the next step. That is, when the application server receives the subflow completion report from the MFP , the application server performs the following processing. That is, the flow definition information of  is referred to, and the state transitions to the step of \u201capprove\u201d next to the step of \u201crequest\u201d. The state transition is managed by a workflow engine. When the state transitions to the approval step, the owner of the work item is changed to a user such as a manager. If the button  is pressed, the screen  changes to the screen .","Similarly, the processing of  can also be performed.","When step , i.e., \u201corder\u201d, is started, a workflow to be operated is started using the MFP .","With reference to , it is detected in step  that a subflow is started. Then, preparations are made for transmitting a subflow screen in which three screen transitions of  are defined from the application server to the MFP . Then, when the application server detects that a work item corresponding to the subflow has been selected, screen transition information in which the prepared screen transition is defined is transmitted to the MFP . An example of the flow definition information is screen transition information. In the MFP , a screen  is displayed. Then, the screen transition information is referred to, and business form data to be previewed is identified. For example, business form data is received by the MFP  from the database of the application server, and is displayed on a panel  of . The user indicates and selects panels  and , and performs print setting, such as a color mode (full color, red\/black, three colors, monochrome), and both-sided\/one-sided, and the like. This has been defined in the screen transition information, and information received from the application server is used. At this point, when the pressing of the button of a print button  is detected, printing\/output is performed using the MFP  by using the above-described print setting. Then, the screen automatically transitions to a screen . A guidance  showing a technique of facsimile transmission that is described in the screen transition information in advance is displayed. Destination information  is displayed together with the guidance information. The user may autograph or affix a seal on the output printing paper, or fill in a predetermined form. If necessary, here, the presence or absence of a receipt and a voucher attached separately is described. Then, the filled-in printing paper and the necessary voucher are placed in the reading holder of the MFP . This destination information  is confirmed, and a facsimile transmission button  is pressed. If a button  is pressed, the screen  goes back to the screen . Then, the printing paper placed by the user is read and a facsimile is transmitted to the destination written in the destination information  contained in the screen transition information. If there are originals of vouchers and receipts, they may be sent by mail to a predetermined section offline separately together with the printing paper transmitted by facsimile. When the facsimile transmission is completed, it is defined in the screen transition information that the screen automatically transitions from the screen  to the screen . When a button  or  is pressed to return to a list, the MFP  requests the application server to transmit a work item list screen. The MFP  displays the received or already received list screen.","In accordance with an embodiment, the MFP , which is an image-forming apparatus that communicates with the application server , which is an example of a server apparatus that performs a specific workflow, has been disclosed. The image-forming apparatus may be an MFP, a facsimile apparatus or a printer. The MFP  has the network interface  for receiving the flow definition information defined in a specific workflow step from the server apparatus. The controller unit  controls the display of the screen of the operation unit  of the image-forming apparatus in accordance with the received flow definition information.","The controller unit  notifies the server apparatus of the completion of the flow in the MFP .","The controller unit  controls the display of the screen transition in accordance with the flow definition information.","UI may be displayed and presented on the UI unit  of the MFP  such that the flow definition information can be edited.","The controller unit  displays a control screen that is displayed as a user interface of an application that can be executed in the MFP  in accordance with the flow definition information.","The controller unit  displays a screen based on the definition information of the subflow in the MFP , and notifies the application server  of the completion of the subflow corresponding to the definition information when a specific input occurs via the screen.","By using a facsimile, a printer, electronic mail, and the file transfer function of the MFP , processing defined by the definition information of the specific subflow is performed.","The flow definition information contains information for displaying a screen for printing data and a screen for performing facsimile transmission in response to the completion of printing on the basis of an instruction given via the screen. Furthermore, the notification unit may notify the completion in response to the completion of facsimile transmission ().","The flow definition information contains information for displaying a screen for instructing print setting, a print preview screen of data that is set via the screen, and a screen of an instruction part for transmitting a previewed image to the server apparatus ().","While the present invention has been described with reference to exemplary embodiments, it is to be understood that the invention is not limited to the disclosed exemplary embodiments. The scope of the following claims is to be accorded the broadest interpretation so as to encompass all modifications, equivalent structures and functions.","This application claims the benefit of Japanese Application No. 2006-344280 filed Dec. 21, 2006, which is hereby incorporated by reference herein in its entirety."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":["FIG. 2","FIG. 1"],"b":"100"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":["FIG. 3","FIG. 1"],"b":["102","103"]},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 4","b":"100"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 5","b":["407","202"]},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 14","b":"100"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 15","b":"100"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 16","b":"100"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 17"}]},"DETDESC":[{},{}]}
