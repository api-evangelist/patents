---
title: Image forming apparatus, method for controlling the same, and storage medium
abstract: An image forming apparatus to communicate with a service provision system via a firewall may include an identification unit, a determination unit, and a communication unit. The identification unit identifies, out of services provided by the service provision system, a service which provides a substitute function corresponding to a function of the image forming apparatus limited by a failure. The determination unit determines, out of a plurality of communication methods to be used for communication with the service provision system via the firewall, a communication method to be used to perform data communication with the service identified by the identification unit. The communication unit performs data communication with the service identified by the identification unit by using the communication method determined by the determination unit.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09083671&OS=09083671&RS=09083671
owner: Canon Kabushiki Kaisha
number: 09083671
owner_city: Tokyo
owner_country: JP
publication_date: 20110722
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DESCRIPTION OF THE EMBODIMENTS"],"p":["1. Field of the Invention","The present invention relates to an image forming apparatus, a method for controlling the image forming apparatus, and a storage medium.","2. Description of the Related Art","There are some conventional techniques related to an image forming apparatus with which a certain function is limited.","Japanese Patent Application Laid-Open No. 2009-44476 discusses a technique for determining, if a certain function of an image forming apparatus fails, functions related to the failure and disabling the functions to perform degenerate operation. Thus, other functions not related to the failure can be consecutively used by a user.","There is an invention that enables an image forming apparatus with which a certain function is limited, to use other image forming apparatuses. Japanese Patent Application Laid-Open No. 2005-47264 discusses a technique for enabling an image forming apparatus having a certain limited function to use functions of other image forming apparatuses. Thus, even if a user uses the image forming apparatus having a limited function, the user can obtain a desired result.","In recent years, a model called cloud computing has been attractive. Cloud computing is mainly characterized in that data conversion or data processing is performed in a distributed way by using a number of computing resources in order to simultaneously handle requests from a number of clients. Further, implementing various web services in a cloud computing environment achieving cloud computing enables providing diverse services to apparatuses that access the cloud computing environment.","An image forming apparatus to communicate with a service provision system via a firewall includes: an identification unit configured to identify, out of services provided by the service provision system, a service which provides a substitute function corresponding to a function of the image forming apparatus limited by a failure; a determination unit configured to determine, out of a plurality of communication methods to be used for communication with the service provision system via the firewall, a communication method to be used to perform data communication with the service identified by the identification unit; and a communication unit configured to perform data communication with the service identified by the identification unit by using the communication method determined by the determination unit.","Further features and aspects of the present invention will become apparent from the following detailed description of exemplary embodiments with reference to the attached drawings.","Various exemplary embodiments, features, and aspects of the invention will be described in detail below with reference to the drawings.","Generally, a cloud computing environment exists on the Internet, and a client and the cloud computing environment communicate with each other via a firewall. In this case, since the firewall exists between the client and the cloud computing environment, the cloud computing environment (service provision side), serving as a source, cannot transmit data to the client (service reception side). The firewall has a function of blocking communication packets from the cloud computing environment as an outside environment.","Therefore, to receive data from the cloud computing environment, the client, serving as a source, needs to request the cloud computing environment to transmit data. In response to the data transmission request, the cloud computing environment transfers data to the client to achieve data communication between the client and the cloud computing environment via the firewall.","Conventionally, there has been no assumption, if a certain function of an image forming apparatus fails and a degenerate operation is obliged to be performed, that the cloud computing environment having the failed function is used.","In such a case, it is desirable for the client to use the cloud computing environment for the failed function to receive sufficient services. It is also desirable for the client to use the cloud computing environment by using a suitable communication method.","Embodiments are directed towards providing a substitute operation system on the assumption of such substitute operation, and more particularly to providing a substitute operation system in consideration of a method of communication between an image forming apparatus having a failed function and the cloud computing environment.","A first exemplary embodiment will be described below based on a system which receives from a service provision apparatus a service which provides a function equivalent to a function limited (disabled for example) by a failure occurring in an image forming apparatus.",{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 1","b":["100","100","101","102","110","100","103","110","104","105","101","102","103"]},"The server  according to the present exemplary embodiment is equivalent to the service provision system, and the printer  is equivalent to the image forming apparatus. In the present exemplary embodiment, since the server  operates on the assumption of a cloud computing environment, the server  employs a distribution and parallel processing model (for example, Hadoop) enabling scale-out of resources subjected to processing. Although one server  is illustrated in , the substitute operation system  may include a plurality of servers . In this case, for example, a plurality of server computers may be used on a virtualized basis to form one server .","Each of the client PC , the printer , and the server  holds an IP address to perform communication with other apparatuses. Similar to a print server function (Line Printer Deamon (LPD): Request for Comment (RFC) 1179) and the server , the client PC , in response to various requests, provides the printer  with services of server functions such as web, file, Simple Network Management Protocol (SNMP), web services (WS-) Eventing, etc.","The server  provides the printer  with a service in response to a request from the printer  (source of request). Services provided by the server  include server functions such as web services, storage services, image processing services, mail services, and so on. The server  may communicate with another server in response to a request from the printer  (source of request).","If the printer  fails, the printer  connects with the server  via the Internet  as required, and the server  performs suitable processing to normally process a printing request and a printer information acquisition request. Details will be described below.",{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 2","b":["101","103","200","1","4","3","11","1","1","2","10","6"]},"Further, based on a command input by a pointing device (not illustrated) on the display unit , the CPU  opens various registered windows and performs various pieces of data processing. When using a client application or a server service, a user can open a window related to a relevant setting operation and make setting.","The RAM  serves as a main memory and a work area for the CPU . The ROM  includes a font ROM (not illustrated), a program ROM (not illustrated), and a data ROM (not illustrated). The font ROM and the external memory  store font data used when performing the above-mentioned document processing. The program ROM and the external memory  store an operating system (OS) which is a control program of the CPU . The data ROM and the external memory  store various types of data used when performing the above-mentioned document processing. A program stored in the external memory  is loaded into the RAM  at the time of execution.","A keyboard controller (KBC)  controls input information from a keyboard  and the pointing device (not illustrated). The CRTC  controls display on the display unit . A disk controller (DKC)  controls access to the external memory . A network controller (NWC)  is connected to a network  via a bidirectional interface . The keyboard  is provided with various keys. The display unit  displays graphics, images, text, tables, etc. The external memory  includes a hard disk (HD) or a floppy disk (FD). The external memory  stores a boot program, various applications, font data, user files, edited files, etc.","Further, the printer  includes a scanner unit  for scanning a document, a feeder  for scanning a plurality of document sheets in response to a single instruction from the user (those of which are illustrated in ), and a print engine (not illustrated) for printing a scanned document. Each of these units can exchange data with each component via the system bus .",{"@attributes":{"id":"p-0037","num":"0036"},"figref":["FIG. 3","FIG. 1"],"b":["102","102"]},"The feeder  (automatic document feeder) automatically feeds document sheets when scanning a document at the scanner unit . The scanner unit  scans a paper document and converts scanned information into electronic form. A user interface (UI) unit  receives an operation input from the user, and suitably displays relevant information. A sheet feeding unit  feeds a print sheet to a fixing unit  at the time of printing. The fixing unit  fixes toner onto the print sheet conveyed from the sheet feeding unit  to perform printing. A discharge unit  discharges the print sheet that has undergone the fixing process by the fixing unit . A finishing apparatus  applies post-print processing such as stapling and punching to print sheets discharged from the discharge unit , according to order information. A discharge tray  holds a finished print product.",{"@attributes":{"id":"p-0039","num":"0038"},"figref":"FIG. 4","b":"100"},"First of all, the client PC  will be described below. An application  is software which operates on the client PC . The application  may be a word processor, spreadsheet, etc., each of which is stored in the ROM  or the external memory . The CPU  loads the application  into the RAM  and then executes it as required. A printer driver  generates print data applicable to the printer  in response to a print instruction from the application .","An OS  provides application software with an interface (hardware in abstract form) to enable the application software to perform data communication with each piece of hardware. Thus, application software can use, in the same way, hardware components of the client PC  coming from different manufacturers.","The printer  will be described below. Each function of the printer  is implemented when the CPU  loads a relevant program from the ROM  or a hard disk drive (HDD)  into the RAM  and then executes it. Each function of the printer  is also implemented by a dedicated application-specific integrated circuit (ASIC).","An engine control unit  issues an instruction to a printer engine to control the print sheet conveyance and the fixing unit . An image processing unit  applies rasterization (drawing processing) to print data to generate image data, and achieves image processing functions including color processing. A compression\/decompression control unit  achieves a function of applying compression\/decompression processing to the rasterized data.","A main controller  controls the engine control unit , the image processing unit , the compression\/decompression control unit , etc. and monitors their statuses. A transmitting and receiving unit  issues a print instruction from the printer driver  on the client PC , and performs communication for information acquisition. If the printer  detects an error and the server  performs substitute processing, the transmitting and receiving unit  receives an instruction from the main controller  and data from a service that performs substitute processing.","The server  will be described below. Each function of the server  is implemented when the CPU  loads a relevant program from the ROM  or the HDD  into the RAM  and then executes it. The transmitting and receiving unit  performs data communication with the transmitting and receiving unit  by using a network interface (I\/F) card (NWC) . A web server  is a web service server which performs data communication with the transmitting and receiving unit  by using the Hyper Text Transfer Protocol (HTTP) protocol, Representational State Transfer (REST) protocol, or Simple Object Access Protocol (SOAP) protocol. The web server  receives a request from the printer  and transfers it to a control unit . The web server  also transfers response information from the control unit  to the transmitting and receiving unit .","The control unit  performs control for invoking each processing unit (in the server ) providing a service in response to a request from the printer . The control unit , the web server , and the transmitting and receiving unit  can process requests from printers (not illustrated) other than the printer  as one instance. To accommodate a number of printers , the server  is provided with a network load balancer (not illustrated) for holding a number of TCP sessions for a prolonged period of time.","A communication path control unit  maintains and controls a communication path necessary for the printer  to receive a service provided by the server , in response to an instruction from the printer . The printer  instructs the communication path control unit  to control the communication path (communication circuit) according to communication path statuses and communication limitations for the LAN , the firewall , and the Internet , and to the load status of the server . The printer  determines a communication path required for web services provided by the server  and configures the communication path via a communication path determination unit  and a communication path editing unit .","A failure information processing unit  communicates with a failure information communication unit  illustrated in  to locate an erroneous portion in the printer  and determine a service that the server  can provide the printer  with. A method for determination and details on configuration will be described in detail below. The communication path determination unit , the communication path editing unit , and the failure information communication unit  will be described in detail below. The failure information processing unit  communicates with the failure information communication unit  via the transmitting and receiving unit , and analyzes information about the error function of the printer .","A login authentication unit  processes a login request from the user of the printer  and from the client PC  using the printer . The login authentication unit  receives login request information via the control unit  and generates an authentication result. The login authentication unit  transfers to a charging management unit  access information as data subjected to charging.","The charging management unit  calculates a final bill on a pay-as-you-go basis based on the access information received from the login authentication unit . In the embodiments, the charging system is not limited to a certain charging system but is suitably determined.","A maintenance parts generation unit  generates maintenance parts for generating firmware and software packages for fixing a failed portion in the printer  based on information about the service provided by the server . Such maintenance parts are generated based on a database (machine-to-machine difference data, user-setting information, user data, model-specific firmware, optional unit information, etc.) for a service provided to the printer . The maintenance parts include firmware required by the printer  and relevant procedure documents. The maintenance parts generation unit  also performs license management and encryption processing for firmware and software.","The machine-to-machine difference data is model-specific data for the printer . The model-specific data includes calibration data and registration data such as dynamic and static data specific for the printer , including image formation, drawing, and color processing data.","The user-setting information includes information set in the printer  by the user. The information includes data set by the user or management by using the operation panel of the printer , the UI unit , an external management tool, or via the web services of the printer  or the web server.","The user data includes box data stored in the HDD , for example, at the time of reservation printing of the printer , and overlay form data used for form printing. The user data further includes temporary files for image processing generated at the time of printing, and temporary files used in other processing.","The model-specific firmware refers to firmware data for each model of the printer . Specifically, the model-specific firmware includes programs for the main controller  and the printer controller , and programs for application-specific hardware such as the engine control unit , the image processing unit , and the compression\/decompression control unit . There is a plurality of firmware versions of the printer  by the date of shipment.","The optional unit information refers to data of optional units connected to the printer  and relevant firmware data. These pieces of data are managed by the server  as required.","A data synchronization service unit  communicates with a data synchronization unit  described below, installs in the printer  maintenance parts generated by the maintenance parts generation unit , and then performs synchronization processing for data generated by the service provided to the printer .","When a maintenance part is shipped to a user of the printer  by mail, it takes time until the maintenance part is installed. Therefore, various types of data at the time of maintenance part generation deviate from information about the service that is kept being provided by the server . Specifically, various types of data include machine-to-machine difference data, user-setting information, user data, model-specific firmware, and optional unit information. These pieces of data are highly likely to require synchronization.","Charging information of the charging management unit , user information of the login authentication unit , and user authority information are also highly likely to require synchronization. Firmware and software under license management need to be limited in simultaneous execution, for example, limited to one license. Therefore, it is necessary to perform synchronization processing for transferring to the printer  the license of web services provided by the server .","The data synchronization service unit  performs data synchronization from the server  to the printer . Even when the printer  is normally operating, the data synchronization service unit  performs data synchronization, periodically or when data changes, from the data synchronization unit  of the printer  to the data synchronization service unit  of the server . Thus, data to be lost at the time of a failure can be minimized.","By storing data of the printer  over a plurality of generations by the data synchronization service unit  of the server , a failure occurring at the time of firmware version upgrading of the printer  can be resolved by downgrading the firmware.","If the engine control unit , the image processing unit , or the compression\/decompression control unit  in the printer  fails, an engine control service unit , an image processing service unit , or a compression\/decompression control service unit  performs substitute processing for the former unit.","The engine control service unit  is a service which provides functions equivalent to the engine control unit . More specifically, the engine control service unit  issues an instruction to the printer engine in the image forming apparatus to control the print sheet conveyance and the fixing unit .","The image processing service unit  is a service which provides functions equivalent to the image processing unit . More specifically, the image processing service unit  performs rasterization processing based on a drawing instruction to generate a raster image. The image processing service unit  further performs various pieces of color processing and other processing based on engine-specific information.","The compression\/decompression control service unit  is a service which provides functions equivalent to the compression\/decompression control unit . More specifically, the compression\/decompression control service unit  applies compression\/decompression processing to drawing data. When performing image processing such as color conversion processing for drawing data, it is necessary to apply decompression processing to drawing data, load the drawing data into the RAM , and perform image processing.","If the image processing unit  fails, simply causing the image processing service unit  to perform substitute processing is questionable. This is because data transmission takes time if a broadband network such as a LAN is not ensured or if there exists a network limitation such as the firewall .","Even in a network environment where a broadband network such as the LAN  is ensured, the same problem will arise in a high-speed image forming apparatus, i.e., an image forming apparatus capable of printing a large number of sheets per unit time. Since color print data and print data containing a number of drawing objects have a large data size, data communication between the image processing service unit  and the compression\/decompression control units  is time-consuming. As a result, very high load is applied to the CPU  of the communication band and the printer , degrading the efficiency.","In the first exemplary embodiment, the server  (a service provision system) is on the premise of a cloud computing environment so that communication cost rises in communication with the server . Since the communication cost increases with increasing transmission capacity, transmitting image data without compression is not advantageous for the user.","Therefore, when using the image processing service unit , the printer  searches for a service which provides functions equivalent to the compression\/decompression control unit  even when the compression\/decompression control unit  is not disabled. Causing the image processing service unit  and the compression\/decompression control service unit  to perform substitute processing enables reducing the load on the communication band and the CPU , thus efficiently maintaining the performance of print output.","When the server  is based on a cloud computing environment, the CPU  of the server  generally has a larger amount of resources than the CPU  of the printer  does. From this viewpoint, it may be sometimes better to use a service of the server  although the printer  is normally operating.","In this way, if a certain function of the printer  fails, taking failure information and communication path information into consideration enables performing most suitable error processing by the server .","A storage control unit  has a function of storing data on behalf of the HDD  of the printer . The storage control unit  according to the present exemplary embodiment stores machine-to-machine difference data, user-setting information, user data, model-specific firmware, and optional unit information. This completes descriptions of functions of the substitute operation system .",{"@attributes":{"id":"p-0073","num":"0072"},"figref":"FIG. 5","b":["102","601","102","601","11","102"]},"The failure information communication unit  communicates with the failure information processing unit  via the transmitting and receiving unit  to notify it of an erroneous portion of the printer  based on the failure information. The failure information communication unit  further notifies the failure information processing unit  of the use of a service that the server  can provide the printer  with.","A function searching unit  searches for a service of the server  usable by the printer , based on the failure information. Specifically, the function searching unit  searches for a service which provides a function equivalent to a disabled function, on a multicast basis.","A functional processing determination unit  determines whether the server  can perform on the printer  substitute processing for a certain function.","The communication path determination unit  determines a communication method to be used by the printer  to receive a service from the server . A method for determining a communication method will be described below. The communication path determination unit  can acquire from the server  a communication band, band limitations, communication delay time, whether bidirectional communication is performed, bidirectional communication method, event transmission method, event transmission delay time, usable protocol, usable port number, etc. The communication path determination unit  can further acquire setting information set by an administrator of the server . The setting information will be described in detail below.","The communication path editing unit  establishes a communication path between the printer  and the server , to be used by the printer  to receive a service from the server , based on a result of the determination by the communication path determination unit .","The communication path editing unit  according to the present exemplary embodiment establishes a communication path by using either of the following two communication methods. One method is a push method with which the service provision system (the server ) holds a session with the image forming apparatus, maintains the state where the session is held, and returns a response via the session currently held when the service provision system responds. The other method is a pull method with which the image forming apparatus repetitively requests the service provision system for response and, when the image forming apparatus receives a response returned from the service provision system in response to the request, stops the repetitive requests. The communication method to be used by the printer  to communicate with the server  depends on a result of the determination by the communication path determination unit .","The characteristics of the two communication methods will be described below. Either of the two communication methods enables data transmitted from the server  to overpass the firewall  and be received by the printer .","The push method retains an established state of a session between the printer  and the server  until the server  returns a response to the printer . Therefore, the push method achieves communication with immediacy because a session is established at the time the server  returns a response. As a result, the printer  can acquire a response from the server  at an earlier timing. However, the push method constantly retains an established state of a session and therefore provides higher communication cost than the pull method.","In contrast, the pull method does not constantly retain an established state of a session between the printer  and the server . The printer  requests the server  to respond at predetermined intervals. Therefore, if the server  cannot respond, the printer  once terminates the session. Further, a fixed time period is required until the printer  accesses the server  next time. Therefore, the pull method cannot achieve communication with immediacy but provides lower communication cost than the push method.","Depending on the situation of the communication path, only the pull method can be employed. Such situation includes, for example, a case where a request from the printer  cannot overpass the firewall  because of a timeout setting for the firewall , and a case where the number of sessions from the printer  exceeds the maximum number of connections of the firewall . Information used when determining these factors includes not only setting information of the firewall  but also information sent from the server . In these cases, the push method cannot be employed.","Comet is a typical communication method employing the push method. Polling is a typical communication method employing the pull method.","A failure recovery status communication unit  notifies the server  of the fact that maintenance parts generated by the maintenance parts generation unit  have been installed in the printer  and a failure has been restored. Upon reception of this notification, the server  performs data synchronization with the printer . An external information processing apparatus control unit  controls the server  providing a service usable by the printer . The data synchronization unit  performs data synchronization after maintenance parts generated by the maintenance parts generation unit  have been installed in the printer . An offload processing control unit  controls processing by the printer  to cause the server  to perform substitute processing. A network control unit  performs control for communication with external devices.","The engine control unit , the image processing unit , and the compression\/decompression control unit  have the function explained in .","As mentioned above, the present exemplary embodiment aims at causing the service provision system to perform substitute processing if these functions and other various functions are disabled. Therefore, the printer  causes the engine control service unit , the image processing service unit , and the compression\/decompression control service unit  to perform substitute processing for the engine control unit , the image processing unit , and the compression\/decompression control unit , respectively.","The above-mentioned services provided by the server  require immediacy in communication since these are to be used when a printing is requested from a user. It is natural that the user wants to acquire a requested print product as quickly as possible. Therefore, a service with which the user wants to quickly obtain a result, such as a printing request, is handled as a service requiring immediacy.","In contrast, in a case where a function of storing in the HDD  of the printer  image data of a document scanned by the printer  (a box function) is disabled, immediacy is not assumed to be required when receiving a data storage service of the server . Unlike a printing request, it is not likely that the user wants to immediately acquire data to be stored in the HDD .","The printer  preferably applies various pieces of processing to data corresponding to a plurality of document sheets scanned by the feeder , and establishes a session with the server  at the time communication is required. Therefore, a service not requiring immediate use of data is handled as a service not requiring immediacy. Data stored by the server  is stored by the storage control unit . This completes descriptions of functions of the printer .",{"@attributes":{"id":"p-0091","num":"0090"},"figref":"FIG. 6","b":["102","103","701","101","102","502","501","102","503"]},"In step S, the main controller  processes the print job received by the network control unit . The offload processing control unit  according to the present exemplary embodiment acquires, at this timing, information about a disabled function detected by the state detection unit  and identifies the disabled function.","The present exemplary embodiment will be described below based on a case where a failure occurs in the image processing unit . When the offload processing control unit  determines that continuation of print processing is not possible because of an error in the image processing unit , the offload processing control unit  instructs the functional processing determination unit  to select substitute processing. Error detection timing is not limited to printing. It should be emphasized that an error may be detected in advance, for example, through an event. The state detection unit  stores information about the detected error in the HDD  of the printer .","In step S, the functional processing determination unit  instructs the function searching unit  to search for, in the server , a service capable of performing processing equivalent to the image processing unit  and the compression\/decompression control unit . The reason why the printer  causes not only the image processing service unit  but also the compression\/decompression control service unit  to perform substitute processing is as mentioned above. When the function searching unit  finds a target service in the server , it notifies the functional processing determination unit  of the service capable of performing processing equivalent to the image processing unit , i.e., the image processing service unit .","When searching for a service on the Internet, the function searching unit  does not need to directly communicate with the server  but may search for an endpoint or uniform resource identifier (URI) of the server  from a directory server.","Upon reception from the function searching unit  the fact that a service capable of performing substitute processing was not found, the functional processing determination unit  returns the fact to the offload processing control unit . The offload processing control unit  generates a dialog which enables the user to understand the fact that a service was not found, and instructs the UI unit  to display the dialog. Alternatively, the offload processing control unit  transmits the dialog to the client PC  to display it on its display.","In step S, when the firewall  exists on the communication path between the printer  and the server , the firewall  authenticates the printer  which is a source of packet. Authentication information for the printer  is preset to the firewall . In addition to authentication information presetting, the firewall  can also communicate with an active directory server (not illustrated) to perform authentication.","The firewall  stores the authenticated IP address and port number, and permits communication from the same address. The firewall  permits communication also for a reply packet in the same session as a permitted packet. However, in communication from an outside environment via the firewall  performed without via a session established in response to a request from the printer , the firewall  discards the packet since it is not recognized as a reply packet.","In step S, the functional processing determination unit  performs service connection authentication with the image processing service unit  and the compression\/decompression control service unit . A user who uses the compression\/decompression control service unit  performs service connection authentication with the server  via the client PC  or the printer . In the present exemplary embodiment, a communication method is determined in step S. This determination method will be described in detail below. The communication path editing unit  establishes a communication path necessary to communicate with a service which provides a function equivalent to the identified disabled function. After the establishment of the communication path, the failure information communication unit  transmits failure information  to the server .","In step S, the failure information processing unit  analyzes the failure information  and, based on a result of the analysis, the image processing service unit  and the compression\/decompression control service unit  generate a new instance (a virtual printer instance).","In step S, the data synchronization service unit  performs data synchronization between the firmware of the virtual printer instance, option information, user data, and device-specific information via the printer  and the established communication path. After the establishment of the communication path, the printer  transmits confirmation information for synchronization between these pieces of data to the server , and then the data synchronization service unit  executes step S.","In step S, the server  notifies the printer  of the fact that a virtual printer instance has been generated and virtual printer processing is enabled.","In step S, the main controller  transmits to the server  data necessary to process the print job received in step S.","In step S, the image processing service unit  and the compression\/decompression control service unit  apply image processing to the print job data transmitted in step S.","In step S, the server  returns a result of the image processing to the printer .","In step S, the engine control unit  prints the received result of the image processing.","In step S, the printer  displays a result of the print processing on the client PC . Processing in which the printer  detects an error, the printer  receives a service from the server , and the user acquires a desired result has been described above.","The method for determining a communication method by the communication path determination unit  will be described in detail below. Information about whether a service instructed to perform substitute processing requires immediacy in communication is managed in a table stored in the HDD  of the printer .",{"@attributes":{"id":"p-0109","num":"0108"},"figref":"FIG. 7","b":["606","401","606","102","402","403"]},"In step S, the communication path determination unit  determines whether immediacy is feasible with the communication path status. When immediacy is not feasible with the communication path status, the communication path determination unit  determines to adopt the pull method. On the other hand, when immediacy is feasible with the communication path status, the communication path determination unit  determines to adopt the push method. This means that, even if the target service requires immediacy, the pull method may be adopted depending on the communication path status.","In step S, the communication path determination unit  determines whether immediacy is feasible with the communication path status. When immediacy is not feasible with the communication path status, the communication path determination unit  determines to adopt the pull method. On the other hand, when immediacy is feasible with the communication path status, the processing proceeds to step S.","In step S, upon reception of information about whether communication cost is considered more important than immediacy from the server , the communication path determination unit  determines whether communication cost is considered more important than immediacy. This information is equivalent to an instruction that the target service requires immediacy or not. The information about whether communication cost is considered more important than immediacy is stored in the HDD of the server , and set by the administrator of the server .","When immediacy is more important than communication cost, the push method is adopted. On the contrary, when communication cost is considered more important than immediacy, the pull method is adopted. Thus, even if the target service does not require immediacy, the push method may be adopted depending on the communication path status and the information set in the server  by the administrator.","Based on the communication method determined by the communication path determination unit , the communication path editing unit  establishes a communication path with the communication path control unit , enabling data communication between the server  and the printer . The communication path determination unit  determines a communication method based on whether the target service requires immediacy and on the communication path status, both.","According to the present exemplary embodiment, if a certain function of an image forming apparatus is disabled because of a failure, the image forming apparatus can properly communicate with a cloud computing environment having a service which provides a function equivalent to the failed function.","Specifically, when the target service requires immediacy in communication and immediacy is feasible with the communication path status, data communication is performed by a communication method employing the push method. When service requires immediacy in communication and immediacy is not feasible with the communication path status, priority is given to the communication path status and data communication is performed by a communication method employing the pull method. Further, when the service does not require immediacy in communication and immediacy is feasible with the communication path status, for example, a communication method is adopted according to a setting of an administrator of the cloud computing environment and data communication is performed by the adopted communication method.","When communication cost is considered more important than immediacy, the administrator can adopt a communication method employing the pull method. On the other hand, when immediacy is considered more important than communication cost, the administrator can adopt a communication method employing the push method.","In a second exemplary embodiment, a method for notifying of the change of a processing method will be described below. When the printer  detects a failure and causes the server  to perform substitute processing, the user selects whether substitute processing is to be performed. Descriptions of the elements similar to those in the first exemplary embodiment will not be repeated here.","In step S, the functional processing determination unit  inquires of the user whether internal processing method is to be changed to an outside service because of a system failure occurrence. Thus, the user can select a processing method. An exemplary notification to the user is illustrated in .",{"@attributes":{"id":"p-0120","num":"0119"},"figref":"FIG. 8","b":["11","102","11","103","103","103"]},"The printer  notifies a service center and an IT administrator managing the printer  of an error and of the user's selection. The printer  issues such a notification to enable quickly maintaining a device.","Although the present invention has specifically been described in detail, the present invention is not limited thereto. Examples will be described below.","Although the IPv4 protocol is assumed in each exemplary embodiment, the embodiments are also applicable to other protocols including the IPv6 protocol. Further, embodiments are applicable even if connection between the client PC  and the printer  or between the printer  and the server  is established by a network other than LAN and the Internet, or other communication methods such as wireless LAN (such as IEEE802.11).","Each exemplary embodiment has specifically been described centering on engine control, image processing, and compression\/decompression processing. However, embodiments are also applicable to other processing, for example, color management processing, font processing, LPD server processing, SNMP processing, web services on devices (WSD) processing, encryption\/decryption processing, discharge unit control processing, sheet feeding unit control processing, web server processing, web service processing, search processing, storage management processing, log processing, etc.","Further, in each exemplary embodiment, the function searching unit  performs multicast search. However, the function searching unit  may perform any other search methods, for example, proactive search such as broadcast search and reactive search such as DNS and directory service. Further, combining the plurality of search methods may enable obtaining more number of search results.","In each exemplary embodiment, the function searching unit  is implemented by the printer . However, the function searching unit  may also be implemented by the server . In this case, the printer  transmits information about a failed function to the server , and the server  searches for therein a relevant service based on the transmitted information.","In each exemplary embodiment, either of the push and pull methods is selected as a communication method. However, in the embodiments, a communication method may be determined not only from these two communication methods but also from other ones. For example, Websocket is a communication method not included in the above-mentioned two communication methods. Further, the communication method may be changed during communication between the printer  and the server  on the assumption, for example, that the communication path status may change during communication therebetween.","Aspects can also be realized by a computer of a system or apparatus (or devices such as a CPU or MPU) that reads out and executes a program recorded on a memory device to perform the functions of the above-described embodiment(s), and by a method, the steps of which are performed by a computer of a system or apparatus by, for example, reading out and executing a program recorded on a memory device to perform the functions of the above-described embodiment(s). For this purpose, the program is provided to the computer for example via a network or from a recording medium of various types serving as the memory device (e.g., computer-readable medium). In an example, a computer-readable medium may store a program that causes an image forming apparatus to perform a method described herein. In another example, a central processing unit (CPU) may be configured to control at least one unit utilized in a method or apparatus described herein.","While the present invention has been described with reference to exemplary embodiments, it is to be understood that the invention is not limited to the disclosed exemplary embodiments. The scope of the following claims is to be accorded the broadest interpretation so as to encompass all modifications, equivalent structures, and functions.","This application claims priority from Japanese Patent Application No. 2010-174837 filed Aug. 3, 2010, which is hereby incorporated by reference herein in its entirety."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The accompanying drawings, which are incorporated in and constitute a part of the specification, illustrate exemplary embodiments, features, and aspects of the invention and, together with the description, serve to explain the principles of the invention.",{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 8"}]},"DETDESC":[{},{}]}
