---
title: Method of managing interference during delay recovery on a train system
abstract: The present invention provides methods for preventing low train voltages and managing interference, thereby improving the efficiency, reliability, and passenger comfort associated with commuter trains. An algorithm implementing neural network technology is used to predict low voltages before they occur. Once voltages are predicted, then multiple trains can be controlled to prevent low voltage events. Further, algorithms for managing inference are presented in the present invention. Different types of interference problems are addressed in the present invention such as “Interference During Acceleration”, “Interference Near Station Stops”, and “Interference During Delay Recovery.” Managing such interference avoids unnecessary brake/acceleration cycles during acceleration, immediately before station stops, and after substantial delays. Algorithms are demonstrated to avoid oscillatory brake/acceleration cycles due to interference and to smooth the trajectories of closely following trains. This is achieved by maintaining sufficient following distances to avoid unnecessary braking/accelerating. These methods generate smooth train trajectories, making for a more comfortable ride, and improve train motor reliability by avoiding unnecessary mode-changes between propulsion and braking. These algorithms can also have a favorable impact on traction power system requirements and energy consumption.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=06980894&OS=06980894&RS=06980894
owner: San Francisco Bay Area Rapid Transit
number: 06980894
owner_city: Oakland
owner_country: US
publication_date: 20031219
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["REFERENCE TO RELATED APPLICATIONS","STATEMENT OF GOVERNMENT INTEREST","FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS"],"p":["This is a divisional application of U.S. Ser. No. 09\/975,121, filed Oct. 9, 2001, now U.S. Pat. No. 6,681,161, which is a divisional application of U.S. Ser. No. 09\/291,814, now U.S. Pat. No. 6,332,107, filed Apr. 14, 1999.","The invention was made with Government support under contract no. DE-AC04-94AL85000 awarded by the U.S. Department of Energy. The Government has certain rights in the invention.","The present invention relates to the field of commuter-rail trains, and in particular to methods for improving the efficiency, reliability, and passenger comfort associated with commuter trains. Such improvements are achieved by providing methods for preventing low train voltages and managing interference.","Commuter-rail train systems have been in existence for decades in various metropolitan and rural areas throughout the world. Generally, commuter trains are used to transport people from one location to another. As cities and towns become increasingly populous, more people rely on commuter trains as their primary means of transportation. Thus, commuter train efficiency, reliability, and passenger comfort are important issues for those operating and using the trains.","Although commuter trains are a popular method of commuting, improvements in this field are needed. For example, the possibility of delays among the trains is high. When such delays occur, commuter trains can be an unpredictable and unreliable means of commuting. Furthermore, conserving energy and infrastructure costs associated with commuter trains are ongoing considerations for those operating and managing the trains. In addition, improvements in passenger comfort are needed to attract more people to use commuter trains.","As is well known, many commuter rail systems use computers to automatically control their trains, rather than having drivers control the trains manually. These automatic train control systems use circuitry that is directly connected to the rails to locate and communicate with the trains. These circuits divide the track length into \u201cfixed blocks,\u201d which can be between a hundred and a thousand feet long. Although these \u201cfixed-block\u201d systems can determine whether a train is present in a given block, they cannot determine where within the block the train is located. Such limitation leads to uncertainty in the location of the trains and requires trains to be separated by large distances for safety reasons. In addition, fixed-block systems typically limit the number of selectable train speeds because of limited communication bandwidth. Thus, trains sometimes must travel slower than the civil speed limit because of the limited number of speed commands. Furthermore, the station stops are affected by this limitation as trains slow down in a \u201cstair-step\u201d braking profile, which is characterized by periodic discrete drops in speed.","The limitations associated with fixed-block systems have prompted those in this field to develop a more efficient and reliable control system. Thus, \u201cmoving-block\u201d control systems are being developed to provide a more precise method of locating trains, selecting speeds, and the like. These systems also allow trains to run more closely together, while decreasing the time required for a train to traverse a route. In addition, more sophisticated train control techniques can be used with the moving-block system.","These moving-block systems will enable methods for avoiding low voltages at trains and managing interference to improve the efficiency, reliability, and passenger comfort associated with commuter trains. A more detailed discussion regarding low voltages at trains and managing interference is addressed hereinafter.","Under normal conditions and in a majority of cases, the existing power infrastructure of the train system can sufficiently manage the trains during operation. However, in certain situations when there are power shortages resulting from, for example, multiple trains accelerating at a given time, the existing power infrastructure may be inadequate. For example, when several trains are close together and demand power simultaneously, the voltages at the trains can drop sharply. This results because there is only a limited amount of available power. Insufficient power may be due to track geometry and\/or an outage at a traction power substation. When train voltage drops occur, train motor performance begins to degrade, and, for certain types of trains, the motors will eventually shut down to avoid damage from excessive current flow. Furthermore, even with those motors that do not shut down, it is inefficient to allow severe voltage drops because low voltages typically result in large power losses to heat in the rails.","When low voltages at trains occur, a conventional response is to add more power infrastructure until the system is sufficiently robust to handle any situation. Moreover, because the train system must continue to operate during outages, additional power capacity can be installed at substations so that the voltages will be maintained at some desired level during such outages. Rather than installing additional power in existing systems, enhanced control systems can instead be designed to regulate the power.","In the past, simple control strategies have been contemplated and\/or employed to avoid low voltages at the trains. For example, one control strategy is to reduce train acceleration rates and top speeds to some arbitrary values. However, this technique has been shown to be ineffective for preventing low train voltages.","Another strategy to avoid low voltages is to use on-board control logic. The on-board controller could reduce power demand as the voltage drops, with power approaching zero as the voltage approaches the desired minimum. Further, the on-board controller could react quickly to a low voltage condition by reducing the power demand of a train in response to the train's measured voltage.","Alternatively, a wayside control approach, where train commands are generated by a computer in a fixed wayside location and then communicated to the trains, allows for more flexibility than the on-board approach. The wayside controller can take into account the train schedule and prioritize the allocation of power among the trains. For example, if two trains traveling in opposite directions are both accelerating, and there is only sufficient power available for one of them, then the on-board control solution would be to cut the power demand of each train in half. However, if one train is on time, and the other is behind schedule, then it may be desirable to allocate most of the power to the high priority train and allow the other to coast. A wayside-controlled algorithm allows such decisions to be made on a case-by-case basis.","An algorithm that prevents the voltage at each train from dropping below some minimum value by limiting power consumption can save energy infrastructure costs, in addition to reducing energy consumption. One objective of the present invention is to apply a control strategy that will allow rush hour traffic to continue operating on the system during a substation power outage with the minimum required power infrastructure. This can be achieved by slowing down trains as needed to keep the system operating smoothly with the available power. The payoff can be substantial because such a control strategy may be sufficient to delay the need for traction power system upgrades, which typically cost tens of millions of dollars.","In order for a wayside controller to maintain the voltage of all trains above some threshold, it must predict train voltages based upon the trajectories of all nearby trains. It may then allocate the available power in such a way as to maintain the voltage at all trains, while minimizing the impact on the schedule. Power consumption can rise quickly enough to take the voltage from a comfortable range to well below the desired minimum in a matter of seconds. Thus, it is insufficient to measure or calculate train voltages and react accordingly, but rather, potential low voltage problems must be recognized before they materialize. The present invention provides a method for recognizing and preventing such voltage problems before they materialize.","Managing interference is also very important to improve commuter train efficiency, reliability, and comfort. \u201cInterference\u201d occurs when a following train travels closely to a lead train such that the following train is forced to brake to maintain a safe following distance. Like cars on a densely packed highway, trains can accelerate and brake repeatedly in response to each other's movements, wasting energy, abusing the motors, and causing an uncomfortable ride for the passengers. Moving-block control systems will allow trains to run close to the minimum safe following distance, so any slight change to a train's trajectory or station dwell time may lead to interference. Removing unnecessary acceleration cycles with enhanced controls will have beneficial impacts on system reliability and energy costs.","As is well known, fixed-block control systems can also exhibit interference behavior. However, the severity of such behavior is moderated by the infrequent changes in train speed commands. In fixed block systems, trains are only given new speed commands when they or the train they are following cross from one fixed block into another. Moving-block control systems, on the other hand, will be capable of changing train speed commands at least once every second, and therefore could exhibit much more severe interference events.","Thus, in the present invention, different types of interference problems are addressed: \u201cInterference During Acceleration\u201d; \u201cInterference Near Station Stops\u201d; and \u201cInterference During Delay Recovery.\u201d Managing interference under these conditions can improve passenger comfort, system efficiency and reliability without significantly increasing trip time. The present invention provides methods for dealing with different interference conditions.","These are some of the objectives of the present invention:\n\n","These and other objectives of the present invention are obtained by providing methods for avoiding low train voltages and managing interference. An algorithm implementing neural network technology is used to predict low voltages before they occur. The objective of using this type of algorithm is to control multiple trains in an area to prevent low voltage events. This method reduces traction power infrastructure requirements, which are largely driven by the need to prevent low voltages.","Methods for improving train trajectories during crowded, or \u201cinterfered\u201d conditions are also provided in the present invention. These include methods for avoiding unnecessary brake\/acceleration cycles during acceleration, immediately before station stops, and after substantial delays. Algorithms are demonstrated to avoid oscillatory brake\/acceleration cycles due to interference and to smooth the trajectories of closely following trains. This is achieved by maintaining sufficient following distances to avoid unnecessary braking\/accelerating. These methods generate smooth train trajectories, making for a more comfortable ride, and improve train motor reliability by avoiding unnecessary mode-changes between propulsion and braking. These algorithms can also have a favorable impact on traction power system requirements and energy consumption.","The preferred embodiments of the present invention will now be described with reference to , () and (). The present invention is directed to methods for providing smoother train trajectories and reduced energy consumption and power infrastructure requirements by providing train control algorithms for low voltage avoidance and interference management. One skilled in the art will appreciate that various substitutions and modifications can be made to the examples described herein while remaining within the spirit and scope of the present invention.","Avoiding Low Train Voltage","One aspect of the present invention is to provide a method that prevents train voltages from falling below a minimum threshold in any situation. The minimum threshold voltage varies from one train system to another. The present method prevents low voltages at the trains by regulating power usage among the trains.","The present invention employs neural network technology to predict train voltages. Data from simulator runs are used to train a neural network to predict train voltages based on power demand patterns. Once the neural network predicts approximate train voltages, an algorithm according to the present invention calculates reduced acceleration commands so that the train voltages do not drop excessively.","In general, a neural network is a network of electronic neurons that is designed to take a pattern of data and generalize from it. For example, if the data are daily temperatures in Los Angeles over two or more years, a neural network should be capable of forming an output (e.g., data, graph, chart) describing the way temperature rises in the summer and falls in the winter. In essence, a neural network works by a sophisticated form of trial and error, or, stated differently, varies the strengths of the connections between neurons until the input yields the correct output. Thus, a neural network improves (learns) its performance on a particular task by trial and error, and furthermore, can be treated as a \u201cblack box.\u201d The neural network according to the present invention will be described in more detail below.",{"@attributes":{"id":"p-0036","num":"0040"},"figref":"FIG. 1","b":["2","2"],"sub":"n"},"Next, in step , the neural network is used to predict the train voltage Vfor all trains that are consuming power, or in propulsion. The voltage of a train is calculated based on its location and the predicted power consumption of all nearby trains. Once all train voltages Vare predicted, the present method determines if any train voltage Vis below a minimum desired voltage V, e.g. 800V, in step . If all train voltages Vare greater than V, then the answer is \u201cno\u201d and the algorithm is completed. In this case, all acceleration commands are unadjusted.","However, if any of the predicted train voltages Vis less than V, then the answer is \u201cyes\u201d and some\/all of the acceleration commands are reduced. For example, assuming that there are three trains with the predicted train voltages Vof 750V, 850V, and 950V and the minimum desired voltage Vis 800V, the answer in step  would be \u201cyes\u201d because one train voltage V(750V) is less than V(800V).","In step , assuming that one or more predicted train voltages Vis below the minimum desired voltage V, each train's voltage Vis compared to a low voltage V, e.g. 900V, to determine whether each Vis less than V. For those trains whose Vis less than V, the corresponding acceleration commands are reduced. In the example provided above, the trains corresponding to 750V and 850V will have their acceleration commands reduced. In general, several trains must consume power simultaneously to cause the voltage at any train to drop below V, but not all of these trains may have voltages quite this low. Thus, the present invention provides early detection and prevention of train voltages below Vby reducing the acceleration commands of all trains with predicted voltages less than V, which is greater than V. Although the example provided herein assumes that Vand Vare 800V and 900V, respectively, the present invention can be implemented with voltage levels having different values and range.","In more detail, the acceleration command of a train whose voltage Vis less than Vis reduced by a factor related to the severity of the voltage sag and the power consumption of the train. For example, the train's acceleration command may be multiplied by the factor\n\n,\u2003\u2003(1)\n\nwhere V=V\u2212Vin volts, and P is the predicted power consumption of the train in megawatts. From multiplier (1), the farther below Vthat a train's voltage Vdrops, the more its acceleration command is reduced by this multiplier. The power factor P is included in multiplier (1), because a train's voltage can potentially drop due to power consumption by other nearby trains. A train with low voltage and low power consumption is in some sense an innocent bystander, experiencing a low voltage but not causing it. The acceleration commands to trains with both low voltages and high power consumption are preferentially reduced, because these are the trains primarily contributing to the low voltage condition. A factor relating to the train schedule can be included as well in the multiplier (1), so that trains that are close to being on schedule are preferentially slowed down in deference to those that are delayed. The power factor, the delay factor, and the specific exponential function described above are not critical to the operation of the algorithm. The important requirement is that train acceleration and\/or power demand is reduced for trains with low voltages.\n","Once step  is completed, this process is repeated again from step  until all trains' calculated voltages Vare above V. The acceleration command to each low voltage train is reduced once, and then the worst-case power demands are recalculated with the reduced acceleration commands. Train voltages are again predicted by the neural network, and this process (steps \u2013) is repeated until there are no trains with predicted voltages below the minimum voltage. In general, the algorithm of the present invention does not have a large impact on train trajectories unless an abnormal control situation occurs.","The neural network of the present invention will now be described in greater detail with reference to . As one skilled in the art can appreciate, applying neural networks to predict train voltages is a complex process due to the large number of possible train configurations and the variations in power substation configurations. The neural network of the present invention is trained to predict train voltages in a region of track a few miles long with a fully functioning traction power system. A separate neural network should be trained for each power system configuration. For example, if an outage at a particular substation is of concern, then a neural network should be trained to predict train voltages during an outage at that substation, and this network should be used by the logic described above during such an outage.","A neural network generally requires input\/output information for training. In the present invention, the initial set of training data consists of the location, power consumption, and voltage of trains generated by a train control and traction power simulator. Data is created representing both nominal and off-nominal train behaviors, such as interference and backups. Various numbers of trains are made to interfere in various areas of the track in an effort to simulate the entire spectrum of train control situations. At the same time, an effort is made to limit the total number of training data points, because minimizing the size of the training data set reduces the training time, allowing faster performance evaluation.","In the tested version of this concept, a data set of about 14000 input and output data points was used for the neural net training. Each time the back-propagation algorithm processed a complete set of the input\/output data, a root-mean-square (RMS) error was calculated between actual train volts and neural net predicted train volts. As long as the general trend of the RMS error was downward, the training was improving. Conversely, a trend upward of the RMS error indicated the weights were becoming unstable and training needed to be terminated. When there was no change in the RMS error, this meant the network was finished or stuck.",{"@attributes":{"id":"p-0045","num":"0049"},"figref":["FIG. 2","FIG. 3","FIG. 2"]},"Two neural network inputs correspond to each of these five zones, one for the power consumption on the track\/line that the train is on, and one for the power on the opposing track\/line. The \u201copposing track\u201d is the parallel track on which trains travel in the opposite direction with respect to the train of interest. The same neural network is used to predict the voltage of trains on either track, because the two tracks are symmetric with respect to the power infrastructure. Thus, there is no distinction between trains on one track versus the other for voltage prediction. The only noteworthy distinction is whether the power demand in the area is on the same track as the train whose voltage is being calculated, or on the opposite track. This is because the high voltage third rails for the two tracks are tied together in few locations, so voltages on the two tracks can be substantially different.","A block diagram of the feed-forward neural network is shown in . It shows the 11 inputs going into a layer of 30 neurons, a hidden layer of 10 neurons, and an output of layer of 1 neuron. The input layer requires a 12 by 30 weight array. There are 11 inputs to each neuron, one for each data input, and the extra input is for a bias weight input. Bias weight inputs are standard practice in neural networks and are used to compensate for any offsets in the data. The second layer or hidden layer uses a 31 by 10 weight array. Again, these include 30 inputs for each neuron from the previous layer's output and one bias weight for each neuron. The output layer has an 11 by 1 weight vector at its input, including 10 weights from the previous node and one bias weight. Basically, the neural network architecture and the 3 weight matrices are sufficient for implementing the network.","Although the neural network described herein includes the input layer containing 30 neurons, the hidden layer containing 10 neurons, and the output layer containing 1 neuron, other neural network architectures containing any number of neurons may be used in accordance with the present invention, so long as it is capable of predicting train voltages. Further, different number of inputs and weight arrays may be used in accordance with the present invention.","Train voltages can be measured on the system real-time, and this data can be used to train and refine the neural net to improve its accuracy, and thus to increase the effectiveness of the algorithm. The neural net in training could be periodically validated and then substituted for the previous version in the control algorithm.","The algorithm of the present invention can be active continuously. During nominal train control situations, the impact on train behavior will be minimal. During conditions of low train voltages, the algorithm prevents low voltages at trains.","Managing Interference","Interference During Acceleration","To maintain a safe following distance, trains are constrained to leave enough space in front of them to stop under the worst possible stopping scenario such as when there are communication failures and\/or brake failures. The largest stopping distance for a train from a given location and speed is known as the Worst Case Stopping Distance (WCSD).","When two trains are close together and accelerate, the stopping distance of the following train increases because of its increased momentum, and oscillations in acceleration can result. If the following train accelerates at the same rate as the lead train, its stopping distance quickly overtakes the lead train, and it must stop accelerating. Once its following distance increases, the following train can resume accelerating. As can be appreciated, this cycle can be repeated until the trains reach the commanded speed.","To prevent this cycle from occurring, an enhanced control algorithm can be used to continuously adjust the acceleration rate of the following train. This algorithm prevents unnecessary mode changes (e.g., from accelerating to braking), thereby reducing wear-and-tear on the motors. It also improves system reliability, reduces the likelihood of low voltages, saves energy, and produces a more comfortable ride.","The algorithm according to the present invention can also be used to prevent unnecessary braking due to hills. The train's WCSD will increase if the average grade in front of the train becomes more down-sloped because it takes more distance to stop traveling downhill. If the following train is traveling as close as possible to the lead train, then the following train will need to brake as it approaches a downhill track section to leave adequate distance for the longer WCSD. The present invention causes the train to maintain a sufficient following distance at all times so that unnecessary braking is reduced\/eliminated.","The algorithm according to the present invention can also be implemented in a situation where the lead train is traveling below the speed limit, and the following train repeatedly catches up, brakes, falls behind, and then accelerates back toward the speed limit. The present algorithm can prevent such a situation from occurring by controlling the speed of the following train.","The enhanced control algorithm causes each train to maintain sufficient following distance to prevent braking due to interference. The WCSD is first calculated as a function of location and speed. The \u201cMaximum WCSD\u201d (MaxWCSD) is then calculated as a function of location and speed. This function is the maximum WCSD at each speed between each location and the next station location. If the following distance of a train (the space between the lead train and the following train) is maintained at all times above this maximum stopping distance for its location and speed, then braking due to interference will not occur. To maintain this separation, when a train is accelerating close behind another accelerating train, its acceleration rate is calculated such that its following distance increases to match the increase in its MaxWCSD. If a train is following another train that is not accelerating but is traveling slowly, then the rear train slows down to comparable speeds with the lead train when it is following at its maximum stopping distance.","For a more comprehensive understanding,  illustrates an example of a plot of the WCSD and the MaxWCSD as functions of location and speed. The solid lines represent the MaxWCSD and the dashed lines represent the WCSD. The sample train station locations as illustrated in  are the 24Street, 16Street, Civic Center, Powell, Montgomery, Embarcadero, and Oakland West station on the Bay Area Rapid Transit (BART) M-Line.","Before detailing the algorithm for managing interference due to acceleration, it is worth noting the importance of accounting for time delays in the calculation of reduced acceleration commands. If there is a time delay DT between when the reduced acceleration command is calculated and when it goes into effect, and acceleration commands are generated without taking this delay into account, then the rear train will accelerate too fast and cyclical interference will still occur. Thus, it is important to predict the locations and speeds of the trains at a time DT in the future, and to use these rather than the current values to calculate the correct reduced acceleration rate.",{"@attributes":{"id":"p-0061","num":"0065"},"figref":"FIG. 5","b":["100","102","104","106"],"sub":"min "},"In step , Xis compared to X. If XS is greater than X, then the algorithm is completed. If, however, Xis less than X, the separation is insufficient, and the speed and acceleration commands for the following train must be reduced. In step , the speed command of the following train is first reduced to the interfered speed command, which is typically less than the nominal speed command If the speed command of the following train is greater than that of the lead train, and the following train is at a lower speed than the lead train, then the following train's speed command is reduced to equal the lead train's speed command.","Next, to calculate the desired reduced acceleration command in step , it is assumed that the train separation is initially sufficient. The derivative of the train separation [d(X)] with respect to time is set to be equal to the derivative of the MaxWCSD [d(MaxWCSD)] with respect to time. Thus, the desired reduced acceleration command is calculated so that the distance separating the two trains will increase as fast as the MaxWCSD increases. The resulting acceleration command is given by: \n\n\nwhere Vis the speed of the lead train, Ais the acceleration of the lead train, dt is the time increment between successive commands, V is the speed of the rear train, dSD\/dx is the partial derivative of the MaxWCSD with respect to the location of the rear train, and dSD\/dv is the partial derivative of the MaxWCSD with respect to the speed of the rear train. The MaxWCSD and the derivatives of this function with respect to location and speed are calculated based on the reduced speed command. All locations and speeds are those projected forward by time DT.\n","Next, in step , a small linear feedback term is added to the calculated reduced acceleration rate to compensate for the difference, if any, between the actual and the desired optimal following distance. For example, the following equation may be added to the acceleration command:\n\n(X\u2212Max WCSD\u2212FollowBuffer)\/DistDiv,\u2003\u2003(3)\n\nwhere Xis the projected separation between the trains after DT, MaxWCSD is evaluated at the projected train location and the reduced speed command of the following train after DT, Followbuffer is an additional buffer distance (e.g. 200 feet), and DistDiv (e.g. 400 feet) controls the strength of the feedback. If the train separation is more than desired, then the calculated acceleration command is increased by this term. If the separation is too small, the command is likewise decreased. This term (3) compensates for any accumulated small errors in the acceleration command calculation and causes the following distance to tend toward the desired distance.\n","Finally, in step , the acceleration command is modified to compensate for any systematic acceleration errors. For example, an on-board controller that only uses an accelerometer to determine the train acceleration is always in error due to the grade\/slope. When traveling uphill, such trains accelerate slower than the acceleration command. Likewise, trains accelerate quicker traveling downhill. To compensate the acceleration command for hills, the acceleration due to the grade should be added on after the desired acceleration rate has been calculated and the feedback term (3) has been added. From the gravitational constant, acceleration due to grade is simply 32 ft\/sec*grade. The average grade under the train at the time when the command goes into effect should be used rather than the average grade over the stopping distance. For example, for a train on a 2% uphill, 32 ft\/sec*0.02=0.44 mph\/sec should be added to the desired acceleration rate. Whether this grade compensation equation should be added to the calculated acceleration rate will depend on whether this accelerometer error is present.","A constraint placed on the present algorithm is that it should prevent a train from unnecessary braking, as indicated in step . If the calculated reduced acceleration rate becomes negative, indicating a need to decelerate, then the algorithm suggests a zero acceleration command, which corresponds to a coasting command. Likewise, a speed command less than the train speed should not be suggested. If necessary, the baseline control logic, which enforces safety constraints, will eventually command braking to slow the following train. This does occur, for example, if a train catches up to a slower train and must brake.","Interference Near Station Stops","In addition to the interference due to changes in stopping distance as described above, preventable acceleration cycles can also result when trains are close together in a region with closely spaced station stops. If a train is stopped in a station and another train approaches, the second train will begin to brake early to stop short of the station. Thus, the rear train goes through a brake-accelerate-brake sequence. Nominal train control systems will command a train to switch into propulsion, even if it will begin its station stop braking profile a moment later.","As with the interference during acceleration algorithm, the benefits of an algorithm to manage interference near station stops are smoother service, improved passenger comfort, reduced wear and tear on the motors, and reduced energy costs. In other words, the passengers are not being thrown back and forth as the train changes modes, the motors aren't changing modes as frequently, and energy is not being wasted by propulsion\/braking cycles. There is little cost to overall trip-time in this case because interference will slow down the rear train with or without the algorithm running.","When a train is stopped at a station, the following train will generally brake before it reaches the station. Once the lead train leaves the station, the following train may stop braking and begin accelerating. In accordance with the present invention, the following train should accelerate if it is necessary to reach the station or if it will increase trip time excessively to continue braking. Otherwise, the following train should continue braking at the minimum rate (0.4 mph\/s on certain systems) until it reaches the station. Other commuter train systems may have a minimum brake rate that is greater or less than 0.4 mph\/s.",{"@attributes":{"id":"p-0071","num":"0075"},"figref":"FIG. 6","b":["200","202","202"],"br":[{},{}],"in-line-formulae":[{},{}],"sub":["station","train","train","station","train","train "],"sup":"2"},"If the train can reach the station using the minimum brake rate in step , the next step  determines whether the increase in trip time is acceptable. The increase in trip time is estimated by comparing a trajectory of braking at, for example, 0.4 mph\/s followed by a station stop at 2.2 mph\/s, as compared to acceleration at 3 mph\/s followed by braking at 2.2 mph\/s. The resulting increase in trip time is given by\n\n2.8333*V\u22121.67*((1.833*V)\u2212X+X)\u22121.0365*(0.2444*V+X\u2212X)\u2212.\n","If this is less than some preset time, for example, 15 seconds, then the minimum brake rate command is sent to the train in step . Other acceleration rates and preset times may be substituted for ones used above in the present invention.","Interference During Delay Recovery","A long delay can lead to a backup, an extreme form of interference in which a line of trains sit one behind the other outside of a station. Under nominal control, the line moves forward one train length at a time as the trains pull into the station one after the other. In addition, trains approaching the delay continue on at full speed and then stop behind the delay. This situation leads to spikes in power demand, as the trains repeatedly accelerate and then brake, like a line of cars at a stop sign. In addition to the frustrating ride and the waste of energy, low voltages may result if sufficient power is not locally available for multiple accelerating trains. Although the low-voltage-avoiding algorithm can address this last problem, it is possible to use an algorithm to smoothly and efficiently recover from a backup, while avoiding simultaneous accelerations that can cause low voltages.","An algorithm has been developed that will handle such delays more smoothly than the conventional system. This algorithm prevents unnecessary motor mode changes, and can prevent extreme voltage sags if a delay occurs in an area with limited power availability. The algorithm also makes delay recovery a less noticeable event for the passengers.","A train typically stops outside of a station under abnormal circumstances, either because it has stopped behind a delayed train in the station or for some other reason. In either case, when a train stops outside of the station, the present algorithm recognizes that a delay has occurred and calculates reduced speed commands for any approaching trains to prevent them from stopping. If the delay continues for a prolonged period, some trains will be forced to stop in a backup behind the delayed train. When the delayed train finally begins to move, the algorithm staggers the starts of any stopped trains so as to avoid simultaneous acceleration which can lead to power spikes and voltages sags. In addition, any trains still approaching the area are controlled so as to avoid stopping. If additional delays occur to subsequent trains in the station, then the algorithm reduces the speeds of all approaching trains accordingly so that they will not be forced to stop. This capability is critical, since dwell times are unlikely to be exactly as scheduled for any number of reasons. As long as additional delays are on the order of the station dwell time or less, this approach is sufficient. However, a substantial delay to the second train can cause a backup to recur at the station. In this case, the algorithm will again keep track of stopped trains and slow down approaching trains as though this were a new event.","Under enhanced control, each train accelerates twice\u2014once to come up to a calculated speed, and once to quickly pull into the station. Another version of the algorithm did not accelerate trains into the station, but rather maintained the approaching speed all the way to the station stop. The disadvantage of this approach is that the trip time of the train is increased because of its leisurely arrival at the station, and the headway (time) between trains departing the station is correspondingly increased. The present algorithm generates smooth train trajectories and optimizes the headway through the station. In order to match the trip time and headway capability of the baseline control, each train accelerates into the station as soon as the station is clear.",{"@attributes":{"id":"p-0079","num":"0083"},"figref":["FIG. 7","FIG. 6","FIG. 6"]},"In step , the first step is to determine whether there is a train stopped in between stations. If there are no trains stopped in between stations, then generally there is no interference from delay recovery and there is no need to proceed with the algorithm. If, however, there is a train stopped in between stations, then the algorithm is activated and the stopped train is designated the \u201clead\u201d train. In step , the arrival time Tof the lead train at the next station is estimated assuming that it begins to move immediately. In step , based on T, the desired arrival times at the station of each following train, train, are calculated. The reduced speed commands are then sent to each approaching train.","The present method attempts to have trains arrive at the next station spaced by Te.g. 80 seconds. In order to accomplish this, while the delayed train causing the backup is still stationary, it is assumed that it will dispatch immediately. (The cause of the delay is assumed to be unknown, and therefore the train may dispatch at any time.) Based on this assumption, and assuming a constant acceleration, constant speed, and constant brake rate trajectory from its current location to the station, the approximate station arrival time of the lead train, T, is calculated. All trains approaching the backup are then commanded with reduced speed commands that would cause them to arrive at the station at intervals of Tafter the lead train's estimated arrival time. These speed commands are calculated assuming a constant speed until a predetermined distance short of the station and a predetermined number of seconds short of the desired arrival time. This buffer distance and time approximately accounts for the last phase of the trajectory, when the train accelerates into the station and then stops. These numbers, e.g. 850 feet and 40 seconds, are derived empirically.","The steps  and  are repeated until the lead train finally begins to move in . Up to this time, the speed commands of the approaching trains gradually decrease as they get closer to the stopped train. If the delay continues for a long time, some trains will eventually be forced to stop behind the lead train. Once the lead train begins moving, the stopped trains are dispatched at intervals of T. This time is chosen to be on the order of the time for a stopped train to accelerate up to speed, e.g. 25 seconds. If each train in a line of stopped trains waits for this long to begin accelerating after the train in front of it begins to move, then power consumption will be nearly limited to a single accelerating train at a time, thus avoiding peak power or low voltage problems.","After the lead train moves, in step , reduced speed commands are calculated for each stopped train assuming they will be dispatched every T. These commands are calculated in a similar manner as the approaching train speed command calculation described above, but in this case each train is assumed to accelerate up to speed and then travel at a constant speed until it is near the station. If any train approaching the backup is forced to stop while the backup is clearing, then a reduced speed command will be calculated for that train in the same way.","Until the time when the lead train is expected to depart from the station, the speed commands of all approaching trains and dispatched stopped trains are held constant. Each command time step after the expected station departure time, if the lead train is still in the station, then the target arrival times of all following trains are increased to match in step . In addition, the speed commands of all moving trains are decreased by subtracting the term \n\n\nwhere Vis the train speed, Tis the delay time since the expected station dispatch time (or the last time the speed was adjusted), and Dis the distance from the train to the station.\n","In step , stopped trains are dispatched and reduced speed commands are implemented as calculated in the previous steps. In step  when the lead train departs the station, the next train behind it becomes the new \u201clead\u201d train. This train then accelerates to the station stop. Steps  through  continue to operate until all of the trains that are interfered (close enough to the backup to have been slowed down by it) have been dispatched from the station, or until the backup is found to recur. In step , if all interfered trains have not yet moved through the station, the algorithm continues to operate. In step , if a train that had been restarted has stopped again between stations, then the backup has recurred and the entire process begins again starting from step . However, if a backup has not recurred, then steps  through  continue to be repeated.","For clarification, examples of trains under nominal versus enhanced control is shown in ) and (), which shows a delay in a station followed by close to nominal station dwell times. ) shows an example of delay recovery with nominal control and ) shows an example with enhanced control. Both graphs show the full lengths of each train as a shaded region along the location axis. The trajectory is flat when a train is topped, and slopped when it is in motion. Thus, comparing both graphs, the trains exhibit smoother trajectories, with fewer stops and starts, using the enhanced control.","In the previous descriptions, specific examples are set forth to provide a thorough understanding of the present invention. However, as one having ordinary skill in the art would recognize, the present invention can be practiced without resorting to the details specifically set forth.","Although various preferred embodiments of the present invention have been disclosed for illustrative purposes, those skilled in the art will appreciate that various modifications, additions and\/or substitutions are possible without departing from the scope and spirit of the present invention as disclosed in the claims."],"GOVINT":[{},{}],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["These and other objectives and advantages of the present invention will become apparent and more readily appreciated from the following detailed description of the presently preferred exemplary embodiment of the invention taken in conjunction with the accompanying drawings, of which:",{"@attributes":{"id":"p-0024","num":"0028"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0025","num":"0029"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0026","num":"0030"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0027","num":"0031"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0028","num":"0032"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0029","num":"0033"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0030","num":"0034"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0031","num":"0035"},"figref":["FIGS. 8(","FIG. 8(","FIG. 7)","FIG. 8("],"i":["a","b","a","b"],"b":"8"}]},"DETDESC":[{},{}]}
