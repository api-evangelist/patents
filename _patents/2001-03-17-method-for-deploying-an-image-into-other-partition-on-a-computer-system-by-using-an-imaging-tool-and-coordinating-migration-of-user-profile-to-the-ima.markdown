---
title: Method for deploying an image into other partition on a computer system by using an imaging tool and coordinating migration of user profile to the imaged computer system
abstract: The invention provides tools and techniques for migration of user profiles in place on a computer. In one method, a first step provides a migration content storage partition to hold migration content such as user settings. This partition is provided by using a partition manipulation tool to obtain sufficient space on the computer. A second step saves migration content into the provided partition. A third step deploys an image into another partition on the computer, overwriting that partition. A fourth step then uses the migration tool to restore migration content from the migration content storage partition into the newly imaged partition, thereby customizing the new image with at least some of the former image's user settings. The migration content storage partition may then be deleted, or it may be retained and made available to the user as additional storage.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=06920555&OS=06920555&RS=06920555
owner: Powerquest Corporation
number: 06920555
owner_city: Orem
owner_country: US
publication_date: 20010317
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["RELATED APPLICATIONS","COPYRIGHT NOTICE","FIELD OF THE INVENTION","TECHNICAL BACKGROUND OF THE INVENTION","BRIEF SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS","ADDITIONAL EXAMPLES AND DETAILS","Bootable CD Example","SUMMARY"],"p":["This application claims priority to, and incorporates by reference, provisional application Ser. No. 60\/274,593 filed Mar. 10, 2001.","A portion of the disclosure of this patent document contains material which is subject to copyright protection. The copyright owner has no objection to the facsimile reproduction by anyone of the patent document or the patent disclosure, as it appears in the Patent and Trademark Office patent file or records, but otherwise reserves all copyright rights whatsoever. The copyright owner does not hereby waive any of its rights to have this patent document maintained in secrecy, including without limitation its rights pursuant to 37 C.F.R. \u00a7 1.14. In particular and without limitation, copyright is claimed in the batch files shown herein.","The present invention relates to the migration of user customizations when changes are made in a computer's configuration, and relates more particularly to tools and techniques which coordinate the migration of user profiles with disk imaging to facilitate continued use of the profiles after operations such as an operating system upgrade, an operating system replacement, or a rollback to an earlier system image.","Users of individual computers often customize the more-or-less generic computer provided to them by a vendor. For instance, users may set various operating system and application program preferences, add new peripheral devices and corresponding drivers, load new application programs, create documents with application programs, select background bitmaps, and so on. Administrators who are responsible for multiple computers in a business, agency, institution, or other entity often make similar changes in order to customize those computers for particular users or groups of users.","Tools exist for migrating such user profile information to new machines, by copying them from the old machine to the new machine. These migration tools may also be used to copy user profile information over a network to a remote storage location when a network client is replaced or upgraded. After a new machine is installed, or a new image is installed on an existing machine to upgrade the client, the user profile information can be copied back over the network to the client and applied there to customize the client.","However, not every computer that needs a new image customized by old user profile information is attached to a network. Moreover, even if a network is available, substantial space may be required on network servers to simultaneously hold the user profiles of attached clients when all of those clients need to be modified by a new image that is then to be customized by their respective old user profile information. Of course, less space is needed if the clients are modified one-by-one, but much more time is then required than if multiple clients could be modified more or less concurrently.","Accordingly, there is a need for improved tools and techniques to coordinate the imaging of one or more computers with the migration of user profile information to the imaged computer(s). Such tools and techniques are described and claimed herein.","The invention provides tools and techniques for coordinating imaging operations with user profile migration on a computer system. Some methods of the invention include four major steps discussed below; preparatory and\/or supporting operations like those discussed and illustrated in the Detailed Description may also be performed as needed. In addition to its methods, the invention provides systems and configured computer-readable storage media that correspond generally to those methods.","A first step provides a migration content storage partition in the computer system; this partition will hold migration content such as user settings that are being migrated from an old operating system to an upgraded or new operating system on the computer. This partition is provided using a partition manipulation tool to manipulate one or more partitions of the computer system, by shrinking them to create more free space for the migration content storage partition, for instance. Partitions may also be moved, in order to consolidate scattered free space so it can be placed in the migration content storage partition. A partition large enough to hold the migration content can then be created using the consolidated free space, or an existing partition can be enlarged into the free space so it will be large enough to hold the migration content. One variation of the method deletes files from the computer system to make additional free space to hold migration content. An extended partition is used for migration content storage in some embodiments; in others, a logical or primary partition is used.","A second major step saves migration content (i.e., user profile information such as user settings and\/or user data) into the provided migration content storage partition. This is accomplished using a migration tool, such as the IBM System Migration Assistant software.","A third major step deploys an image into a partition of the computer system, overwriting that partition's copy of user profile information that was first saved to the migration partition. The migration content storage partition is not overwritten during this imaging step, since that would destroy the migration content. Imaging is accomplished using an imaging tool, such as the PowerQuest Drive Image\u00ae Pro software. In some cases, rebooting the computer causes execution of a command that invokes the imaging tool.","A fourth major step then uses the migration tool to restore migration content from the migration content storage partition into the newly imaged partition, thereby customizing the new image with at least some of the former image's user settings. The migration content storage partition may then be deleted, or it may be retained and made available to the user as additional storage. The imaged partition may be resized, before or after the user profile information is restored; enlarging the imaged partition is especially desirable if more space for the imaged partition is available or if space for it can be made available by shrinking or deleting the migration content storage partition after the migration content stored there has been applied to the imaged partition.","The inventive migration code (which invokes the partition manipulation tool, invokes the migration tool, and invokes the imaging tool) may be implemented using batch files on Windows systems or other systems, or other scripts. It may also be partially or entirely implemented in EXE or other native executable code. Migration code may reside in various computer readable media even in a single given embodiment of the invention. Suitable locations for migration code include, for instance, files on a bootable CD, files in the new image on the computer's disk, and\/or command files for network management tools. Some methods of the invention pass control from one part of the migration code to the next part by rebooting the computer, so that automatically executed batch files\u2014which are run after a reboot\u2014will invoke the next tool. In some cases, code that runs automatically when a CD is inserted can also be used, so that control is passed to migration code on the CD after the CD is inserted.","The boot image which receives control as the result of rebooting may be read from the CD, or read from a small partition on the computer's hard disk which is created for that purpose. The boot image may also be downloaded from a network server using PXE or similar technology. The boot image may also be read from a user file using the tools and techniques described in the commonly owned copending application by inventors Paul Madden et al. filed Feb. 17, 2001; one embodiment of these tools is in PowerQuest \u201cvirtual floppy\u201d software (VIRTUAL FLOPPY is a mark of PowerQuest Corporation).","In short, the invention provides tools and techniques for coordinating image deployment with user profile migration by using partition manipulation tools and scripts or other software commands. The invention permits one to maintain user customization while deploying a new operating system, an operating system upgrade, or a rollback image that rolls the receiving partition back to an earlier state, for example. Other aspects and advantages of the present invention will become more fully apparent through the following description.","In describing embodiments of invention, the meaning of several important terms is clarified, so the claims must be read with careful attention to these clarifications. Specific examples are given to illustrate aspects of the invention, but those of skill in the relevant art(s) will understand that other examples may also fall within the meaning of the terms used, and hence within the scope of one or more claims. Important terms may be defined, either explicitly or implicitly, here in the Detailed Description and\/or elsewhere in the application file. In particular, an \u201cembodiment\u201d of the invention may be, without limitation, a system, an article of manufacture, a method, and\/or a computer memory, CD, disk, or other digital or analog medium that is configured according to the invention.","Systems Generally",{"@attributes":{"id":"p-0025","num":"0024"},"figref":["FIG. 1","FIG. 6"],"b":["100","100","100","100","110","100","100","114"]},"The computer system  includes random access memory  and may include other forms of memory  such as ROM or PROM memory. The memory  is in operable communication with the processor , and the I\/O devices likewise communicate with the processor  and\/or the memory .","The computer system  is capable of using floppy drives, tape drives, optical drives or other means to read a storage medium. A suitable storage medium includes a magnetic, optical, or other computer-readable storage media having a specific physical substrate configuration. Suitable storage devices include floppy disks, hard disks, tape, CD-ROMs, DVDs, PROMs, RAM and other computer system storage devices. The substrate configuration represents data and instructions which cause the computer system  to operate in a specific and predefined manner as described herein. Thus, a given medium tangibly embodies a program, functions, and\/or instructions that are executable by the computer system  to perform one or more steps for coordinating partition manipulations, imaging, and user profile migration substantially as described herein.","The computer system  includes a partitionable nonvolatile storage medium  such as one or more magnetic or optical disks. The storage  may be internal, external, or a combination thereof. The partitionable storage  is divided, or divisible, into partitions by use of commercially available software such as the PartitionMagic\u00ae program (mark of PowerQuest Corporation), or the FDISK and FORMAT programs provided by operating system vendors such as Microsoft Corporation. Partition creation, partition and cluster resizing, file system optimization, and other partition manipulations are described in the following U.S. patents assigned to PowerQuest Corporation, which are incorporated herein by reference: U.S. Pat. Nos. 5,675,769; 5,706,472; 5,930,831; 6,088,778; 6,108,759; 6,178,487; 6,185,575; 6,185,666.","Within one or more partitions, the computer system  often includes an operating system , such as one of the Microsoft Corporation Windows operating systems and\/or one of the operating systems in the UNIX family of operating systems. The computer system may be equipped with a boot management program that permits a user to select between two or more operating systems  that are installed on the computer system . Boot management is discussed in U.S. Pat. No. 6,178,503 assigned to PowerQuest Corporation and incorporated herein by reference. PowerQuest Corporation also provides BootMagic\u00ae boot management software with its PartitionMagic\u00ae program (marks of PowerQuest Corporation).","The computer system  can be customized by a user profile stored on the partitionable medium . Examples of user profiles may be found in documentation for migration tools. However, to the extent of any conflict, the implied and express definitions in this application take precedence over any definitions (of user profiles or other terms) provided elsewhere. In particular and without limitation, a \u201cuser profile\u201d must include user settings , and may also include user data .","User settings  stored on the partitionable medium  customize the operating system  according to the particular hardware and\/or software within the computer system , and\/or according to the particular preferences of a given user. Various tools have been made available for capturing the user settings  of a given computer system , including without limitation Microsoft Windows registry-related files and software, Novell ZENWorks software, Microsoft IntelliMirror software, Miramar Systems Desktop DNA software, and IBM System Migration Assistant (SMA) software (marks of their respective owners).","User data  is often also stored on the partitionable medium  and it may often be copied or otherwise captured by the same migration tools (e.g., SMA software) that capture user settings . As used herein, \u201cuser data\u201d is not necessarily limited to data created directly by a user, such as a particular spreadsheet or word processor document, but may also include user applications, such as spreadsheet and word processor programs. The act of capturing a user profile includes capturing user settings , and optionally includes capturing user data , so that it can be reproduced later.","The computer system  may be connectable to one or more networks through network I\/O hardware and\/or software . By way of example, suitable computer networks include local networks, wide area networks, and\/or the Internet. \u201cInternet\u201d as used herein includes variations such as a private Internet, a secure Internet, a value-added network, a virtual private network, or an intranet. A network may include one or more LANs, wide-area networks, Internet servers and clients, intranet servers and clients, or a combination thereof. Such computer networks may form part of a telecommunications network and\/or interface with a telecommunications network. The network's transmission media may include twisted pair, optical fiber cables, coaxial cable, telephone lines, satellites, radio waves, microwave relays, modulated AC power lines, and other data transmission \u201cwires\u201d known to those of skill in the art, as well as routers, bridges, caching appliances, and the like. Note that the term \u201cwire\u201d as used herein includes wired and\/or wireless communications. Methods such as TDMA, CDMA, FDMA, and other encoding and\/or multiplexing methods may be used, as well as GSM, PDC, Wireless Application Protocol, and other technologies and protocols. Signals according to the invention may be embodied in volatile and\/or nonvolatile network transmission media.","The computer system  and other network components may be configured to operate according to network management approaches such as the Intel Wired for Management institutive, with software and hardware that operate according to the Preboot Execution Environment (PXE) specification, which makes it possible to configure or reconfigure the computer system  from a remote machine by dynamically downloading a boot image over a network to the computer system  even if the partitionable storage medium  initially contains no system or user data. The network may also be configured with IBM LanClient Control Manager (LCCM) software, which is an automated remote software distribution tool.","Although particular components are shown in the Figures and\/or discussed herein, those of skill in the art will appreciate that the present invention also works with a variety of other networks and computers, as well as a variety of batch files, scripts, imaging tools, migration tools, and partition manipulation tools.","Methods",{"@attributes":{"id":"p-0036","num":"0035"},"figref":["FIGS. 2-5","FIG. 3","FIGS. 4 and 5"],"b":["2","100","4","4","4","5","5","5","100"]},"Some of the depicted method steps may be performed in preparation for the inventive steps, and thus do not necessarily belong to the claimed method unless they are expressly claimed and\/or deemed necessary by those of skill in the art. For instance, claims may refer to the use of a partition manipulation tool without expressly requiring that a license to the tool be obtained, since that requirement is understood in the art. The method steps may also be performed in a different order than that shown, or in an overlapping manner, except to the extent that one step requires the result of another step. Steps may also be repeated, named differently, and\/or grouped differently in different embodiments.","In this context,  shows a method for coordinating user profile migration and storage medium imaging operations in a manner that utilizes partition manipulations to facilitate in-place migration of at least one or more specified user settings ; user data  may also be migrated.","During a choosing step , a systems administrator and\/or a particular user of the computer system  chooses the user settings  that are to be migrated in place. This choice may be aided by documentation which is provided with the migration tool (e.g., SMA software) to be used. Depending on the current content of the storage medium , the content of an image that will be loaded onto the medium  as described hereafter, and\/or the desires of the user and\/or administrator, the choosing step  may specify user data  to capture in addition to specifying user settings .","During a size estimating step , the estimated storage size needed to hold the migration content is calculated by the migration tool, input by the administrator, or otherwise obtained. The \u201cmigration content\u201d includes the user settings  to be captured by the migration tool, any user data  to be captured by the migration tool, and any administrative overhead, such as space needed to hold the migration tool itself and optional extra space to reduce the risk that more space than the estimated amount will actually be required to hold the migration information.","If the amount of available space on the computer system's storage  is smaller than the estimated space required to hold the migration content, then a free space enlarging step  may be performed. The available space includes space within the medium 's partition(s) which is not yet allocated to files or to file system structures, as well as space on the medium \u2032 disk(s) which lies outside currently defined partitions but could be placed in a resized or newly created partition. The amount of available free space may be increased  by automatically deleting temporary files, by having the user delete other files, and\/or by compressing existing files, for instance. File deletion may be preceded by archiving or otherwise copying the file to another storage location before deleting it from the computer system .","During a partition manipulating step , storage space for the migration content is provided by operations that enlarge an existing partition (other than the one to be imaged), or create one that is large enough. Partition manipulations may be performed  by the PartitionMagic\u00ae program, for instance, under the control of a script or batch file and\/or or under the direct control of the user or administrator. Depending on the embodiment used and the current configuration of the storage medium , suitable partition manipulations to create and consolidate free space may include optimizing a partition to recover space as discussed in U.S. Pat. No. 6,185,575; resizing clusters to recover space as discussed in patents such as U.S. Pat. No. 5,675,769, U.S. Pat. No. 5,706,472, and U.S. Pat. No. 6,108,759; shrinking partitions as discussed in the '769, '472, and other patents identified above; moving partitions to close gaps between them, as discussed in the '769, '472, and other patents identified above; and creating a new formatted partition or extending an existing partition to place the consolidated free space thus obtained within the scope of a file system so the space can be used to hold captured migration content in one or more files.","Although the partition provided by step  will often be expressly defined as a partition in the system's partition table, it may also be an \u201cimplicit partition\u201d, namely, space in the medium  which lies outside all expressly defined partitions and which has a beginning and end implicitly defined by one or more express partitions and\/or disk edges. Expressly defined migration content partitions are preferred over implicit migration content partitions. Use of an implicit partition puts the migration content at significantly greater risk than an express partition, since processes running on the system will generally treat the implicit partition as free space even though it contains migration content. Also, if the migration content storage partition is to be made available to the user as additional storage space after the imaging and profile restoration steps described here, then the migration content storage partition will need to be expressly defined in the system's partition table anyway. Moreover, most or all commercially available migration tools will not recognize implicit partitions as destinations for migration content; the tools require a file in an expressly defined and formatted partition as a target.","Once sufficient space is available, the migration content is captured by SMA software or another migration tool and is saved  in the migration content storage partition provided by step . This proceeds generally in accordance with a normal use of the migration tool in other contexts.","Once the migration content is safely saved in the space provided for it on the computer system , a new image is loaded  into the storage medium. The imaging  may be done to deploy a new operating system on the computer , to upgrade an operating system  that is already installed on the computer , to roll back the state of the computer  to an earlier point in time for disaster recovery or testing purposes, or for other reasons. The imaging step  presumably overwrites at least some of the saved migration content in the partition it was saved  from, thereby providing the motivation for saving that migration content. Imaging  may be performed with software such as the Drive Image\u00ae or Drive Image\u00ae Pro software from PowerQuest Corporation (marks of PowerQuest Corporation) or other imaging software. Imaging may be performed using methods that include, without limitation, those described in U.S. Pat. No. 6,108,697 assigned to PowerQuest Corporation, and incorporated herein by this reference.","At this intermediate point in the inventive methods, the computer system  is configured in pertinent part as illustrated in  newly imaged partition  in the computer's partitionable storage  includes the newly deployed operating system, the operating system upgrade, the rollback image, or the other image resulting from the image deployment step . The content  of the newly imaged partition  lacks at least some of the user profile information that was saved  before imaging. That missing user profile content, possibly with other user profile content, resides in the computer system  inside a migration content storage partition . The migration partition  was provided by step .","With further attention now to , during a user profile restoring step  the migration content is read back from its temporary storage location and applied to the newly image partition(s), thereby providing the user with a computer system  that is configured not only with the new image but also with the personal preferences, specific drivers, and other user profile information that makes the computer system  easier to use and\/or more effective from the user's point of view. The step  proceeds generally in accordance with uses of the migration tool in other contexts, such as those in which partition manipulation  is not used to temporarily provide space on the system  for the migration content. Different executable programs may be used to save  and to restore  the user profile, provided those executable programs operate according to a shared specification; for instance, the IBM SMA tool includes a \u201csrcbat\u201d executable and a \u201ctarbat\u201d executable for saving and restoring profiles, respectively. For convenience, the user profile save and restore programs are referred to collectively as the \u201cmigration tool\u201d.","Finally, any necessary clean-up and finishing operations are performed . These are discussed in greater detail in connection with the succeeding Figures. They may generally include removing software such as the migration tool if it is no longer needed, removing partition manipulation software if it is no longer needed on the system , and either retuning the migration content's temporary storage space to the other partitions or making it available for use by the user in a new partition from which the migration content has been deleted.","Methods Using Computer Reboots",{"@attributes":{"id":"p-0049","num":"0048"},"figref":"FIG. 3","b":["2","300","200"]},"A step  invokes \u201cin place migration\u201d code such as a script or batch file, which then automates many or all of the remaining steps of the illustrated method. Particular invocation means and batch files are discussed in connection with .","To help provide 206 storage for migration content, the \u201cin place migration\u201d code checks the storage medium  to determine whether a partition is already present there which can be used (perhaps after being enlarged) to hold the migration content. As indicated expressly in , the code may first calculate  the amount of storage needed and then check for a partition of that size (or a partition expandable to that size). Alternately, the code may first check for a partition, calculate the storage needed, and then check to see if the partition can be expanded. Steps of inventive methods may be omitted, performed in different orders than those shown, regrouped, repeated, and\/or renamed, even when that is not expressly indicated in a Figure.","Once files have been deleted and\/or compressed as needed (and as permitted) , and once existing partitions have been shrunk and\/or moved as necessary  to obtain and consolidate in one location the necessary amount of space for migration content storage, the migration storage partition is created  or expanded to include that space. Note that the file deletions performed during step  (if that step is taken) may include deleting files in the partition that will be imaged, if those files are being replaced by files in the new image or are not needed after imaging. Likewise, partition manipulations performed during step  may include shrinking the partition that will receive the new image.","If a new partition was created  to hold the migration content, that partition is formatted as required by the migration tool. If an existing partition was enlarged to cover the migration content storage space, that partition's file system is enlarged accordingly.","If the migration tool runs more effectively from the computer system  than remotely, it can be installed  on the computer system  in the migration storage partition. Installation  of the migration tool involves typical file copy, registry update, and similar operations, generally in accordance with use of the migration tool in contexts other than use according to the present invention.","Methods illustrated by  take advantage of tools such as run-once registry keys, batch files that are automatically executed on booting, and similar mechanisms, to pass control from one piece of \u201cin place migration\u201d code to the next. Specific examples are discussed in connection with ; rebooting steps are shown generally as steps ,  in FIG. . Rebooting step  may include an automatic reboot or the reboot may be initiated by the user in response to a prompt from the \u201cin place migration\u201d code; when the system  reboots , an imaging script or batch file runs  to invoke Drive Image\u00ae Pro software or another imaging tool. Rebooting step  may likewise include an automatic reboot or a user-initiated reboot; when the system  reboots , a profile restoring script or batch file runs to invoke SMA software or another migration tool to restore  the saved user profile back into the newly imaged partition(s).","Steps - further illustrate the cleanup step . As indicated expressly in the Figure, one or more of these steps may be performed in a given instance of step , and the steps may be performed in various orders. During an uninstalling step , tools such as the migration tool, partition manipulation tool, imaging tool, and\/or \u201cin place migration\u201d scripts or batch files may be deleted from the computer . This may be done to provide additional free space, to prevent inadvertent damage from their improper use, and\/or to comply with license restrictions, for instance. During a migration storage partition deleting step , the migration storage partition is deleted. During an imaged partition resizing step , the newly imaged partition is enlarged to include some or all of the free space that was obtained by the partition manipulations during step .","Methods Using a Bootable CD",{"@attributes":{"id":"p-0057","num":"0056"},"figref":"FIGS. 4A through 4D"},"During a step  shown in , an administrator determines which user settings  and user data  will be preserved by the migration. The administrator accordingly modifies  a SETTINGS.INI file which specifies the user profile to the SMA migration tool. Other migration tools may also be used in a similar manner. Steps  and  are thus instances of step , which is itself and instance of step .","Various technical components are copied to a bootable \u201cin place migration\u201d CD during a step . This CD has also been referred to by PowerQuest in presentations made to IBM as a \u201cclean start\u201d CD. In one embodiment, the technical components on the CD included PowerQuest PartitionMagic\u00ae Pro software (for partition resizing), PowerQuest \u201cvirtual floppy\u201d software (for a booting environment), PowerQuest Drive Image\u00ae Pro software (for partition\/disk imaging), and IBM SMA software (as the migration tool).","During a step , the computer  user receives the \u201cin place migration\u201d CD, and places it in the computer , which is assumed in this embodiment to be running or runnable under a Microsoft Windows operating system. During a step , the AUTORUN.INI file on the CD runs automatically; on computers  which do not have CD autorun capability enabled, the user manually runs a first batch file. In one embodiment, the AUTORUN.INI file (or the corresponding manually invoked batch file) contains the following commands:","[autorun]",{"@attributes":{"id":"p-0061","num":"0000"},"ul":{"@attributes":{"id":"ul0001","list-style":"none"},"li":"open=clnstart.bat"}},"As a result, the migration code determines  whether an extended partition exists on the computer's partitionable storage medium . In this embodiment, an extended partition is preferably used as the migration storage partition; in other embodiments, other partition types may be used. If an extended partition is not found, then the migration code estimates ,  the size of the extended partition based on the amount of user profile information to be saved  and restored . As shown in , if enough free space exists , then partition manipulations are performed , including creation of an extended partition. If enough free space is not yet available, then files are deleted ,  to obtain the necessary space to allow creation  of the extended partition which will hold the user profile captured by the migration tool.","Returning to , if the test  determines that an extended partition already exists, then the migration code checks  to see whether enough free space exists in that extended partition to hold the captured user profile. If not, then files are deleted ,  to obtain the necessary space. Note that although tests  and  are illustrated as occurring in that order, in another embodiment a test for total free space on the medium  could precede a test for the existence of an extended partition, with corresponding changes that will be apparent to one of skill.","Moving now to , the system  reboots to the bootable \u201cin place migration\u201d CD. Some embodiments use PowerQuest PQBoot software, while others use PowerQuest Virtual FLOPPY\u2122 Installer software (VFInst9X, VFInstNT, etc.); either permits an automatic reboot. The SMA migration tool (or another migration tool) is then invoked by the \u201cin place migration\u201d code, causing user profile data to be captured and saved in the extended partition during a step , which is an instance of step . The system reboots  once again to the bootable \u201cin place migration\u201d CD; this is preferably an automatic reboot. This boots the system  under a DOS operating system and invokes  Drive Image\u00ae Pro software or another imaging tool to load the new image onto the system's primary partition. A prompt from the \u201cin place migration\u201d code also asks  the user to eject the bootable CD from the computer 's CD drive before an upcoming reboot.","The system  then reboots ; since the CD was ejected, the system  boots from the newly deployed operating system , that is, the operating system that was loaded into the system's primary partition by the imaging  operation. In that image, a \u201crun once\u201d Windows registry key setting (or similar mechanism in other operating systems) invokes  a batch file named RESTORE.BAT; other batch file names, or scripts, can be used in other embodiments. As a result, the migration tool restores ,  the captured user profile from the extended partition and applies it to the newly imaged primary partition.","The remainder of , and all of , illustrate an instance of the clean-up and finish step . A test is made  to determine whether the user and\/or administrator have indicated that the system  should contain an extended partition once the imaging is done and the user profile is restored. This may be accomplished using an .INI or script file, for instance, to select this feature (and possibly other features). If the test  indicates that no extended partition is desired, then a PartitionMagic\u00ae script or similar mechanism is used  to delete the extended partition, and optionally to resize the primary partition so that it contains at least some of the space formerly occupied by the extended partition.","If the test  indicates that the extended partition should be kept, then a different test is performed  (as shown in ) to determine whether the extended partition should itself receive an image. If so, a flag is set . The flag may be an entry in a configuration file (.INI or script) or an embodiment may check for the existence of a certain file to determine what should be done. The bootable CD is booted to DOS again, the imaging tool is used to image the extended partition, and the user is prompted to reboot after ejecting the CD. If the extended partition is to be kept but not imaged, then it is simply left available  to the user as additional formatted storage space in the medium .","Methods Using a Network Boot Image",{"@attributes":{"id":"p-0068","num":"0067"},"figref":"FIGS. 5A through 5D","b":"100"},"In particular, step  places the technical components of the \u201cin place migration\u201d code in a location accessible through the network I\/O , rather than placing  them on a bootable CD. A network server drive may be used, or a Storage Area Network, for example. The \u201cin place migration\u201d code is invoked  by the IBM LCCM product, or by another familiar network management tool, rather than being invoked  by the CD AUTORUN.INI file, for instance.","The bootable CD methods shown in  to D may run the migration tool off the CD, or they may install it in the computer 's extended partition and run it from there. As shown in , the network boot methods preferably install  the migration tool in the computer 's extended partition and run it from there. This is preferred, as one cannot always guarantee network connectivity due to possible client\/driver configuration changes after deploying the new image.","As indicated by step , the migration tool may capture user profile information not only from the primary partition but also from the extended partition, when it existed prior to step  of FIG. A. If the extended partition is imaged during step , the captured user profile information for it can be saved outside it and then restored to it. The captured user profile information for the extended partition could be saved to a network, or to the primary partition, for example.","As indicated by step , the \u201cin place migration\u201d code can verify  that the capture files produced by the migration tool actually exist in the extended partition before rebooting. This is preferably done to ensure that the capture completed successfully before overwriting with a new image. If the capture failed but the image is deployed anyway, the user's data\/settings are gone.","During step , the system  reboots using a network boot image, such as an image downloaded to the system  over the network using PXE components. The PXE boot image boots  DOS on the system  and loads a new image to the system's primary partition using an imaging tool.","Moving to , if the system  is meant to have an extended partition after the primary partition is imaged and has its user profile restored, and if an image is available over the network for that extended partition, then the system is rebooted from PXE, and a new image is written  to the extended partition.","In one embodiment, the capture  is accomplished using a batch file named CAPTURE.BAT, which contains the following commands:\n\n","In this CAPTURE.BAT file, the migration tool invoked is a version of the IBM SMA program; the \u201csrcbat\u201d command invokes SMA code to capture  user profile information using SMA commands specified in the file DELL7500.TXT and to save  the output to the directory D:\\DELLTEST. In other embodiments, other file names could be used for the user profile specification, and other partitions and directories could be used to receive the captured migration content.","The pqboot32 command line in this CAPTURE.BAT file causes the computer  to reboot  to a partition labeled PQP. The PQP partition is a small partition at the beginning of the partitionable storage medium . The PQP partition plays a role similar to that played by a bootable CD as discussed in connection with  to D; in place of the PQP partition, the invention could use a bootable CD, \u201cvirtual floppy\u201d mechanism, or other means for running an imaging tool.","In this embodiment, an AUTOEXEC.BAT file in the PQP partition runs after the computer  is booted from the PQP partition. The AUTOEXEC.BAT file invokes  the imaging tool (e.g., by calling the PowerQuest Drive Image\u00ae program through a \u201cpqdi\u201d command), and reboots to the new image (e.g., by calling PowerQuest boot management software through a \u201cpqboot\u201d command). The newly deployed operating system runs Microsoft SYSPREP tool to create a new security ID (SID). SIDs are part of a copy authentication process which discourages unauthorized copying of Microsoft operating systems. In one embodiment, a SYSPREP.INF file in the deployed primary partition contains the following content; note in particular the \u201crun once\u201d registry entry which will cause invocation of the SMA migration tool to restore  the user profile after imaging :",{"@attributes":{"id":"p-0079","num":"0094"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},";SetupMgrTag"]},{"entry":[{},"[Unattended]"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"OemSkipEula=Yes"]},{"entry":[{},"InstallFilesPath=C:\\sysprep\\i386"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"[OEM_Ads]"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Background=swirl.bmp"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"[GuiUnattended]"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"AdminPassword=*"]},{"entry":[{},"AutoLogon=Yes"]},{"entry":[{},"AutoLogonCount=1"]},{"entry":[{},"OEMSkipRegional=1"]},{"entry":[{},"TimeZone=20"]},{"entry":[{},"OemSkipWelcome=1"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"[UserData]"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"FullName=\u201cChuck Peters\u201d"]},{"entry":[{},"OrgName=PowerQuest"]},{"entry":[{},"ComputerName=dell2"]},{"entry":[{},"ProductID=P3CVH-P2WH3-VCQ6Y-XJDGG-6V93B"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"[SetupMgr]"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"DistFolder=C:\\sysprep\\i386"]},{"entry":[{},"DistShare=win2000dist"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"[GuiRunOnce]"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Command0=D:\\DELLTEST\\SMA\\RESTORE.BAT"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"[Identification]"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"JoinWorkgroup=WORKGROUP"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"[Networking]"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"InstallDefaultComponents=Yes"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"In one embodiment, the AUTOEXEC.BAT file in the PQP partition contains the content shown below. Those of skill will appreciate that other batch files, scripts, or the like may be used in other embodiments to perform the desired imaging  and to pass control of the processor  to or toward other migration code to restore  the user profiles once imaging  is finished.\n\n","In one embodiment, the SCRIPT.TXT file includes:\n\n","The new image has a \u201crun once\u201d flag set in its Microsoft Windows registry, which invokes a RESTORE.BAT batch file. In one embodiment, the RESTORE.BAT batch file contains the following:\n\n","In one embodiment, the computer  has a CONFIG.SYS file containing the following content, but it will be appreciated that the invention can also be used on computers  with many other configurations:","[menu]",{"@attributes":{"id":"p-0084","num":"0000"},"ul":{"@attributes":{"id":"ul0008","list-style":"none"},"li":["menuitem=CURRENT, Restore Current System Configuration.","menuitem=WIN2K, Restore Windows 2000 Workstation Image.","menuitem=NETWARE, Restore Netware 5 Server Configuration.","menuitem=NT4SRVR, Restore Windows NT 4 Server Configuration.","menuitem=WIN2KSRVR, Restore Windows 2000 Server","Configuration.","menuitem=PQPDOS, Boot DOS in PowerQuest Partition Only.","menudefault=WIN2K,15","menucolor=7,0\n\n[CURRENT]\n","DEVICE=C:\\DOS\\HIMEM.SYS","DEVICE=C:\\DOS\\OAKCDROM.SYS \/D:CD01\n\n[WIN2K]\n","DEVICE=C:\\DOS\\HIMEM.SYS","DEVICE=C:\\DOS\\OAKCDROM.SYS \/D:CD01\n\n[WIN2K]\n","DEVICE=C:\\DOS\\HIMEM.SYS","DEVICE=C:\\DOS\\OAKCDROM.SYS \/D:CD01\n\n[NETWARE]\n","DEVICE=C:\\DOS\\HIMEM.SYS","DEVICE=C:\\DOS\\OAKCDROM.SYS \/D:CD01\n\n[NT4SRVR]\n","DEVICE=C:\\DOS\\HIMEM.SYS","DEVICE=C:\\DOS\\OAKCDROM.SYS \/D:CD01\n\n[WIN2KSRVR]\n","DEVICE=C:\\DOS\\HIMEM.SYS","DEVICE=C:\\DOS\\OAKCDROM.SYS \/D:CD01\n\n[PQPDOS]\n","DEVICE=C:\\DOS\\HIMEM.SYS","DEVICE=C:\\DOS\\OAKCDROM.SYS \/D:CD01\n\n[COMMON]\n"]}},"In one embodiment, a bootable CD according to the invention contains an image to be placed  in the partition  being imaged, plus the following files as technical components:","CLNSTART.BAT",{"@attributes":{"id":"p-0086","num":"0000"},"ul":{"@attributes":{"id":"ul0009","list-style":"none"},"li":["Batch file in c:windows\/desktop\/temp which launches the in-place migration process; includes content such as:","rem Clean Start Migration Process Initiation","rem","rem This process starts the SMA Detection to determine","rem disk space required for migration output and then","rem passes the required size to PartitionMagic to create","rem the Extended Partition.","rem","rem For purposes of this demo, detection is not required","rem and we will jump straight to partition creation.","rem","rem This section pushes down the Virtual Floppy which will","rem boot the DOS environment for partition creation and imaging.","rem Check for Extended Partition","rem if exist D:\\NUL goto migrate","@echo off",":Detect","rem Insert Detection Process here",":Create_Storage","rem Virtual Floppy launched to create Extended Partition","cls","echo.","echo.","echo Starting Virtual Floppy . . .","echo.","copy D:\\pqmagic\\vf*.* c:\\","copy D:\\pqmagic\\*.vfd c:\\","copy D:\\pqmagic\\restrmbr.* c:\\","c:","cd\\","vfinst9x","goto end",":Migrate","rem Copy SMA Files to D:\\clnstart","d:","cd\\","md clnstart","cd clnstart","copy g:\\sma\\*.*","rem Launch SMA to Migrate Personality to Extended Partition","cls","echo.","echo.","echo Capturing PC personality using IBM SMA","echo.","srcbat \/c source.txt \/o d:\\clnstart","echo.","echo Personality capture complete.","echo.","echo Booting to Virtual Floppy . . .",":end\n\nAUTORUN.INF\n","Runs the clnstart.bat automatically when the CD is inserted:\n\n[autorun]\n","open=clnstart.bat\n\nDirectory of C:\\WINDOWS\\Desktop\\temp\\DIPro4\n\nMOUSE.COM\n","Mouse driver\n\nMOUSE.INI\n","Mouse driver config file\n\nPQDI.EXE\n","Drive Image\u00ae Pro main executable\n\nPQDI.OVL\n","Drive Image\u00ae Pro overlay file\n\nPQDI.PQG\n","Drive Image\u00ae Pro associate file\n\nPQDI.RTC\n","Drive Image\u00ae Pro encrypted file\n\nPQVF.VFD\n","Virtual Floppy\u2122 binary\n\nRESTORE.TXT\n","Script file for system restore, in c:\/windows\/desktop\/temp\/dipro4, e.g.:","SELECT DRIVE 1","SELECT PARTITION FIRST","DELETE","SELECT FREESPACE FIRST","SELECT IMAGE ALL","RESTORE\n\nDirectory of C:\\WINDOWS\\Desktop\\temp\\DIPro4\\Floppy\n\nARCCD.SYS\n","CD-Rom driver\n\nAUTOEXEC.BAT\n","Autoexec.bat batch file, e.g.:","@echo off","path=.;a:\\tools;a.:\\;g:\\;g:\\tools","mscdex \/d:arccd01 \/l:g","rem This batch process deletes the primary partition and","rem restores the image file from CD which contains the new OS.",":restore","rem Restore Drive Image Pro Image","@echo off","cls","g:","cd\\dipro4","echo.","echo.","echo Deploying New Operating System Image","pqdi \/cmd=restore.txt \/img=g:\\image\\win2k.pqi \/ipe \/ifc\n\nCONFIG.SYS\n","Config.sys, e.g.:","LASTDRIVE=Z","DEVICE=A:\\HIMEM.SYS","DEVICE=A:\\arccd.SYS\n\nHIMEM.SYS\n","Himem driver\n\nMSCDEX.EXE\n","Microsoft CD-Rom extensions file\n\nDirectory of C:\\WINDOWS\\Desktop\\temp\\PQMagic\n\nMOUSE.COM\n","Mouse driver\n\nMOUSE.INI\n","Mouse driver config file\n\nPMHELP.DAT\n","PartitionMagic\u00ae help file\n\nPQBOOT.EXE\n","PQBoot executable to activate and boot partitions\n\nPQDATA.002\n","Temp file\n\nPQMAGIC.EXE\n","PartitionMagic\u00ae main executable\n\nPQMAGIC.OVL\n","PartitionMagic\u00ae overlay file\n\nPQMAGIC.PIF\n",".PIF file for running PartitionMagic\u00ae from a DOS Window\n\nPQMAGIC.PQG\n","PartitionMagic\u00ae associate file\n\nPQPB.RTC\n","PartitionMagic\u00ae configuration file\n\nPQTMP.FIL\n","Temp file\n\nPQVF.VFD\n","Virtual FLOPPY\u2122 binary for PartitionMagic\u00ae program\n\nPQVXD.VXD\n","Virtual Floppy\u2122 associate file\n\nPQDEBUG.TXT\n","Debug file\n\nRESCUE.TXT\n","Rescue disks help info\n\nRESIZE.TXT\n","Resize partitions script, e.g.:","Select Disk 1","Select Partition 1","Check","Resize Smaller 50","Select Unallocated Largest","Create \/FS=Extended","Select Unallocated Largest","Create \/FS=FAT \/Label=\u201cCLNSTART\u201d\n\nRESTRMBR.EXE\n","Restore MBR executable for Virtual Floppy\u2122 software\n\nSCRLOG.TXT\n","Log file\n\nTEST.LOG\n","Log file\n\nVFINST9X.EXE\n","Virtual Floppy\u2122 software installation program for Windows operating systems\n\nVFLOPPY.SYS\n","Virtual Floppy\u2122 software SYS driver\n\nVFLPPYLD.SYS\n","Virtual Floppy\u2122 software loader\n\nVSSVER.SCC\n","Virtual Floppy\u2122 software file\n\nDirectory of C:\\WINDOWS\\Desktop\\temp\\PQMagic\\Floppy\n\nARCCD.SYS\n","CD-Rom driver\n\nAUTOEXEC BAT 543 11-08-00 12:14a autoexec.bat\n","Autoexec.bat, e.g.:","@echo off","path=.;a:\\tools;a:\\;G:\\;g:\\tools","MSCDEX \/D:arccd01 \/L:G","rem This batch process creates the extended partition","rem which will hold the SMA output files for the","rem Clean Start Process and then copies Clean Start files","rem for System Migration.",":create","rem Create Extended Partition","@echo off","cls","echo.","echo.","echo Creating Temporary Storage Area","G:","cd\\pqmagic","pqmagic \/cmd=resize.txt \/nrb","rem Copy Files to Extended Partition","CD\\TOOLS","PQFILE \/F copysma.TXT","restrmbr","g:\\pqmagic\\pqboot \/p:1\n\nCOMMAND.COM\n","Command.com\n\nCONFIG.SYS\n","Config.sys; e.g.:","LASTDRIVE=Z","Device=a:\\himem.sys","DEVICE=A:\\arccd.SYS\n\nHIMEM.SYS\n","Himem driver\n\nMIGRATE.BAT\n","Batch file to migrate system settings to temporary partition, e.g.:",":Migrate","rem Launch SMA to Migrate Personality to Extended Partition","D:","CD\\clnstart","cls","echo.","echo.","echo Capturing PC personality using IBM SMA","echo.","srcbat \/c source.txt \/o d:\\clnstart","echo.","echo Personality capture complete.","echo.","echo Booting to Virtual Floppy . . .","copy E:\\dipro4\\*.vfd c:\\","c:","cd\\","vinst9x\n\nMSCDEX.EXE\n","Microsoft CD extensions\n\nNW24XCD.SYS\n","CD-Rom driver\n\nRESTRMBR.EXE\n","Restore MBR executable for Virtual Floppy\u2122 software\n\nDirectory of C:\\WINDOWS\\Desktop\\temp\\SMA\n\nRESTORE.BAT\n","Batch file to restore migrated data\/settings, e.g.:",":Restore","rem SMA Migration Start","cls.","echo Restoring PC personality using IBM SMA","echo.","tarbat \/f d:\\clnstart\\output.sma \/c restore.txt","echo.","echo Personality restore complete.\n\nRESTORE.TXT\n","Restore configuration file for SMA software\n\nRESTRMBR.EXE\n","Restore MBR executable for Virtual Floppy\u2122 software\n\nSOURCE.EXE\n","IBM SMA Source (capture) executable for saving system data\/settings\n\nSOURCE.TXT\n","IBM SMA Source (capture) config file for saving system data\/settings\n\nSRCBAT.EXE\n","IBM SMA Source (capture) executable for scripted operation\n\nSRCCOMMANDS.TXT\n","Configuration file for source process\n\nTARBAT.EXE\n","IBM SMA Target (restore) executable for scripted restores of system data\/settings\n\nTARCOMMANDS.TXT\n","IBM SMA Target (restore) executable for restoring system data\/settings\n\nTARGET.EXE\n","IBM SMA Target (restore) executable for restoring system data\/settings\n\nUNINST.ISU\n","Uninstall file\n\nUSERPRIV.DLL\n","User privileges file\n\nZLIB.DLL\n","ZLib compression file\n\nDirectory of C:\\WINDOWS\\Desktop\\temp\\Tools\n\nCOPYSMA.TXT\n","PQFile script file to copy SMA files to the new partition, e.g.:","\/MKDIR 2:\\CLNSTART","\/COPY g:\\SMA\\*.* 2:\\CLNSTART\\*.* PQIO","\/COPY A:\\MIGRATE.BAT","0:\\WINDOWS\\STARTM\u02dc1\\PROGRAMS\\STARTUP\\MIGRATE.BAT PQIO\n\nPQFILE.EXE\n","PQFile executable for DOS functions on non-DOS partitions\n\nPQFILE9X.EXE\n","PQFile executable for DOS functions on non-DOS partitions (Windows Version)\n\nPQVXD.VXD\n","Virtual Floppy\u2122 software VXD\n\nRESTRMBR.EXE\n","Restore MBR executable for Virtual Floppy\u2122 software\n\nSCRIPT.TXT\n","Script file sample for PQFile, e.g.:","\/MKDIR 2:\\CLNSTART PQIO","\/COPY g:\\SMA\\*.* 2:\\CLNSTART\\*.* PQIO","\/COPY A:\\MIGRATE.BAT","0:\\WINDOWS\\STARTM\u02dc1\\PROGRAMS\\STARTUP\\MIGRATE.BAT PQIO\n\nSHOW.TXT\n","PQFile \/Show output to identify partitions, e.g.:"]}},{"@attributes":{"id":"p-0087","num":"0426"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"************************************************************"},{"entry":"******"},{"entry":"PQFILE v1.07 - Generic File Access Program"},{"entry":"Copyright (c) 1999-2000 PowerQuest Corporation. All rights reserved."},{"entry":"************************************************************"},{"entry":"******"},{"entry":"================================= Disk 1"},{"entry":"=================================="}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"6"},"colspec":[{"@attributes":{"colname":"1","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"35pt","align":"center"}},{"@attributes":{"colname":"5","colwidth":"35pt","align":"center"}},{"@attributes":{"colname":"6","colwidth":"35pt","align":"center"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Volume",{},{},{},{},{}]},{"entry":["ID","Type","Status","Size MB","Used MB","Free MB"]},{"entry":{"@attributes":{"namest":"1","nameend":"6","align":"center","rowsep":"1"}}}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"6"},"colspec":[{"@attributes":{"colname":"1","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"35pt","align":"char","char":"."}},{"@attributes":{"colname":"5","colwidth":"35pt","align":"char","char":"."}},{"@attributes":{"colname":"6","colwidth":"35pt","align":"char","char":"."}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["*:","FAT","Primary","51.6","15.5","36.2"]},{"entry":"0"},{"entry":["C:","FAT-32","Primary,","6961.10","3754.5","3207.5"]},{"entry":["1",{},"Bootable"]},{"entry":["*:","Extended","Primary","17187.2","13030.7","4156.5"]},{"entry":"2"},{"entry":["D:DATA","FAT-32","Logical","13030.6","9268.2","3762.5"]},{"entry":"3"},{"entry":["*:","Free Space","Logical","4156.5","0.0","4156.5"]},{"entry":"4"},{"entry":{"@attributes":{"namest":"1","nameend":"6","align":"center","rowsep":"1"}}}]}}]}},"br":{},"ul":{"@attributes":{"id":"ul0010","list-style":"none"},"li":"VFile executable for updating the Virtual Floppy\u2122 binary"}},"Of course, other embodiments of the invention can be configured differently than the bootable CD example described above.","The present invention provides tools and techniques to facilitate migration of user profiles to a newly imaged partition on a computer . Partition manipulations are used to find space on the computer  to temporarily hold the user profile so it is not destroyed by the imaging. Because the invention performs the profile migration to the new image \u201cin place\u201d on the computer , space on a network server is not needed to hold client profiles. The in place migration can also be initiated remotely using IBM's LCCM or a similar tool, and migrations can proceed in parallel on multiple clients  without requiring synchronization between the clients. Moreover, the in place migration permits user profile migration on a computer  that has no current network connection, without requiring supplemental temporary storage such as a tape drive.","Although particular embodiments of the present invention are expressly illustrated and described individually herein, it will be appreciated that discussion of one type of embodiment also extends to other embodiment types. All claims as filed are part of the specification and thus help describe the invention, and repeated claim language may be inserted outside the claims as needed. Although Microsoft Windows operating systems are discussed as examples, other operating systems may also be used according to the invention. Likewise, the invention is useful with a variety of file systems, not merely the file systems that are typically used with Microsoft Windows operating systems.","As used herein, terms such as \u201ca\u201d and \u201cthe\u201d and designations such as \u201cfile\u201d, \u201cpartition\u201d, and \u201cimage\u201d are inclusive of one or more of the indicated element. In particular, in the claims a reference to an element generally means at least one such element is required.","The invention may be embodied in other specific forms without departing from its essential characteristics. The described embodiments are to be considered in all respects only as illustrative and not restrictive. Headings are for convenience only. The scope of the invention is, therefore, indicated by the appended claims rather than by the foregoing description. All changes which come within the meaning and range of equivalency of the claims are to be embraced within their scope."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["To illustrate the manner in which the advantages and features of the invention are obtained, a more particular description of the invention will be given with reference to the attached drawings. These drawings only illustrate selected aspects of the invention and thus do not limit the invention's scope. In the drawings:",{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 3","b":"2"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIGS. 4A through 4D"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIGS. 5A through 5D"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 6"}]},"DETDESC":[{},{}]}
