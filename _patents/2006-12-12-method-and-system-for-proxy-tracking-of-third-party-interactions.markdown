---
title: Method and system for proxy tracking of third party interactions
abstract: A computer-implemented method and system is operable to: receive a tracking event from a client, recognize tracking specific parameters in the tracking event, generate a tracking entry corresponding to the tracking event, use a tracking service API to send the tracking entry to a second server, and redirect the client to an intended target corresponding to the tracking event.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08612569&OS=08612569&RS=08612569
owner: eBay Inc.
number: 08612569
owner_city: San Jose
owner_country: US
publication_date: 20061212
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED PATENT APPLICATION","BACKGROUND","DETAILED DESCRIPTION"],"p":["This patent application claims the benefit of the filing date of U.S. Provisional Patent Application Ser. No. 60\/749,732, filed Dec. 12, 2005, and entitled, \u201cMETHOD AND SYSTEM FOR PROXY TRACKING OF THIRD PARTY INTERACTIONS\u201d.","1. Technical Field","This disclosure relates to methods and systems supporting online consumer interactions by a user in a networked system.","2. Related Art","Conventional network-based marketplaces (e.g. consumer websites) provide users with functionality to browse a collection of items (e.g. goods or services) at a website and to make purchases using a variety of means. In some cases, users merely search for items using a natural search entry. In other cases, users click on links provided in paid advertising. Usually, affiliates and\/or a publication system provide some added value that enables users to quickly access a merchant site associated with a searched item or an advertisement. In most cases, links are provided so users can click through to a merchant site. It is necessary to keep a record of these user clicks so that the affiliates and\/or advertisers can be properly credited for the user click throughs. However, conventional systems for tracking these click events are flawed. The widespread use of anti-spyware blocking software can prevent accurate tracking of the use of the site. Natural search tracking issues can cause inaccurate payouts for affiliates. Conventional systems cause numerous connections and redirects to external third party sites from clients. The lengthy redirect chain increases the likelihood of a single outage blocking off a portion of desired traffic. These and other problems have made the conventional tracking systems inefficient.","In the following description, for purposes of explanation, numerous specific details are set forth in order to provide a thorough understanding of an embodiment of the present invention. It may be evident, however, to one skilled in the art that the various embodiments of the present invention may be practiced without these specific details.","Overview","An example embodiment describes a tracking method and system to allow affiliates and partners to point their links directly to the publication system (e.g., a database marketplace such as www.ebay.com or other publication system, such as http:\/\/base.google.com\/base\/default or www.yahoo.com) so that the publication system receives the link popularity value of those links.","One affiliate entry path goes through numerous redirects as shown in the conventional affiliate link entry system illustrated in .","Problems with conventional tracking solutions include:\n\n","An example embodiment described herein moves the calls made to affiliate tracking partners of the publication system (e.g., advertising servers, such as Mediaplex) behind the publication system servers. In this manner, the publication system's tracking and ad-serving technologies are moved off of the client tier. The publication system's servers proxy any tracking requests to the third-party via an asynchronous backchannel. The publication system's server will proxy any ad serving requests to the third party via a synchronous call. To keep the impact of the interface as low as possible, the requests may appear to come directly from HTTP clients (i.e. browsers) as much as possible. This means that enough context from the original requests may be collected so that the HTTP request made to an advertising server (e.g. Mediaplex) appears to be from the original client.","This example embodiment may provide the following benefits:\n\n",{"@attributes":{"id":"p-0032","num":"0044"},"figref":"FIG. 2","b":"250","ul":{"@attributes":{"id":"ul0005","list-style":"none"},"li":{"@attributes":{"id":"ul0005-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0006","list-style":"none"},"li":["Optinized Tracking URL\u2014A tracking URL may lead a user to the publication system site. This type of URL can be used for search and view of items. It is the same as the underlying URL with additional parameters added. An example would be as follows:\n        \n        ","Tracking partner\u2014This is a generic term for a third party tracking service. Affiliate tracking services are offered by, for example, advertising servers, such as Mediaplex.","Universal Tracking URL\u2014A tracking URL may lead a user to the publication system site. This type of URL can be used for any publication system URL on the site. An important aspect of the Universal Tracking URL is that instead of adding Rover (e.g. tracking) parameters to an existing URL (like the optimized tracking URL described above), a Universal Tracking URL uses a target URL parameter (mpre=in the example below). The advantage is that the target page can be static HTML or some other system that does not have to be modified to interpret the Rover parameters. An example is shown below.\n        \n        ","Regular expressions\u2014Regular expressions may describe a set of strings based on common characteristics shared by each string in the set. For details of the expression syntax used in various embodiments, see:\n        \n        ","ROI\u2014Return On Investment, a generic term used to refer to revenue generating events like BidConfirm and RegistrationConfirm. When these events are correlated with an affiliate referral, the affiliate is paid money from the publication system.","PIM cookielet\u2014A session cookielet is used to communicate to natural search detection that a request should not be sent to track a natural search hit because it went through paid internet marketing (PIM, such as affiliate, paid-search, etc. . . . )"]}}}},"Example functionality of the features of one embodiment can be broken down into the following areas. Each area is described below in its own section.\n\n","In an example embodiment, this pool  may serve as the focal point for all the publication system to tracking partner communications. The interface for this pool is described below. Clients of this service may be other publication system commands. This pool is, in an example embodiment, not referenced externally.","The WebService  may have two operations in an example embodiment.\n\n","The trackImpression operation is used to track impressions or ROI events. It is invoked as part of the natural search and ROI event scenario. It has one input, a TrackingRequest, which is defined in the Web Service Definition Language (WSDL) in the following way.",{"@attributes":{"id":"p-0037","num":"0069"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"<complexType name=\u201cTrackingRequest\u201d>"},{"entry":"\u2002<sequence>"},{"entry":"\u2003<element name=\u201ctrackingDataSegment\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003<element name=\u201clanguagePreference\u201d nillable=\u201ctrue\u201d"},{"entry":"\u2003type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003<element name=\u201ctrackingPartner\u201d type=\u201cxsd:int\u201d\/>"},{"entry":"\u2003<element name=\u201csessionGUID\u201d nillable=\u201ctrue\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003<element name=\u201cclickId\u201d nillable=\u201ctrue\u201d type=\u201cxsd:int\u201d\/>"},{"entry":"\u2003<element name=\u201ctpCookies\u201d nillable=\u201ctrue\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003<element name=\u201cclientGUID\u201d nillable=\u201ctrue\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003<element name=\u201cuid\u201d nillable=\u201ctrue\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003<element name=\u201cchannel\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003<element name=\u201csiteId\u201d type=\u201cxsd:int\u201d\/>"},{"entry":"\u2003<element name=\u201ctransactionType\u201d nillable=\u201ctrue\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003<element name=\u201creferrer\u201d nillable=\u201ctrue\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003<element name=\u201crequestUri\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003<element name=\u201cremoteIpAddr\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003<element name=\u201cclientReqHost\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003<element name=\u201cuserAgent\u201d nillable=\u201ctrue\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003<element name=\u201crequestId\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003<any processContents=\u201clax\u201d minOccurs=\u201c0\u201d"},{"entry":"\u2003maxOccurs=\u201cunbounded\u201d\/>"},{"entry":"\u2002<\/sequence>"},{"entry":"<\/complexType>"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"The output from the trackImpression operation is a TrackingResponse, as detailed below.",{"@attributes":{"id":"p-0039","num":"0071"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<complexType name=\u201cTrackingResponse\u201d>"]},{"entry":[{},"\u2002<sequence>"]},{"entry":[{},"\u2003<element name=\u201cstatus\u201d type=\u201cxsd:int\u201d\/>"]},{"entry":[{},"\u2003<element name=\u201ctpCookies\u201d nillable=\u201ctrue\u201d type=\u201cxsd:string\u201d\/>"]},{"entry":[{},"\u2003<element name=\u201cerrorMsg\u201d nillable=\u201ctrue\u201d type=\u201cxsd:string\u201d\/>"]},{"entry":[{},"\u2003<any processContents=\u201clax\u201d minOccurs=\u201c0\u201d"]},{"entry":[{},"\u2003maxOccurs=\u201cunbounded\u201d\/>"]},{"entry":[{},"\u2002<\/sequence>"]},{"entry":[{},"<\/complexType>"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"The trackImpression operation, in an example embodiment, uses the input from the TrackingRequest to send a request to a tracking partner; the result of which is used to build the TrackingResponse.","The specific data elements are listed below. However, the below descriptions are not intended as limiting definitions of the respective terms, and the terms may be construed more broadly than the below provided descriptions.\n\n","Channel is not passed on ROI events.\n\n","The trackEntry operation may, in one example embodiment, be used to track entry to the publication system site. It is invoked as part of the affiliate and paid-search scenarios. It has one input, an EntryTrackingRequest, and one output, an EntryTrackingResponse. These two objects extend the corresponding objects from the impression tracking operations. The inputs and outputs are detailed below using WSDL.",{"@attributes":{"id":"p-0044","num":"0104"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"<complexType name=\u201cEntryTrackingRequest\u201d>"},{"entry":"\u2002<complexContent>"},{"entry":"\u2003<extension base=\u201cimpl:TrackingRequest\u201d>"},{"entry":"\u2003\u2002<sequence>"},{"entry":"\u2003\u2003<element name=\u201ctargetLocation\u201d nillable=\u201ctrue\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003\u2003<any processContents=\u201clax\u201d minOccurs=\u201c0\u201d"},{"entry":"\u2003\u2003maxOccurs=\u201cunbounded\u201d\/>"},{"entry":"\u2003\u2002<\/sequence>"},{"entry":"\u2003<\/extension>"},{"entry":"\u2002<\/complexContent>"},{"entry":"<\/complexType>"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}},"br":{}},{"@attributes":{"id":"p-0045","num":"0105"},"tables":{"@attributes":{"id":"TABLE-US-00004","num":"00004"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"<complexType name=\u201cEntryTrackingResponse\u201d>"},{"entry":"\u2002<complexContent>"},{"entry":"\u2003<extension base=\u201cimpl:TrackingResponse\u201d>"},{"entry":"\u2003\u2002<sequence>"},{"entry":"\u2003\u2003<element name=\u201cdestination\u201d nillable=\u201ctrue\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003\u2003<any processContents=\u201clax\u201d minOccurs=\u201c0\u201d"},{"entry":"\u2003\u2003maxOccurs=\u201cunbounded\u201d\/>"},{"entry":"\u2003\u2002<\/sequence>"},{"entry":"\u2003<\/extension>"},{"entry":"\u2002<\/complexContent>"},{"entry":"<\/complexType>"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"The additional fields in the objects defined above have the following meanings in an example embodiment.\n\n","The interface between the publication system and a specific tracking partner, according to an example embodiment, is described below. Whether or not an external call to a specific tracking partner is made may be controlled by a feature contingency as detailed below.",{"@attributes":{"id":"p-0048","num":"0110"},"tables":{"@attributes":{"id":"TABLE-US-00005","num":"00005"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"\u2003<The publication systemEntity id=\u201cRover-A tracking"},{"entry":"partnerExternalCalls\u201d value=\u201c1037\u201d\/>"},{"entry":"\u2003<The publication systemFeatureContingency id=\u201cRover-A tracking"},{"entry":"partnerExternalCalls\u201d deprecated=\u201cfalse\u201d comment=\u201c\u201d"},{"entry":"\u2003\u2003>Make external calls to a tracking partner from the Rover service"},{"entry":"pool<\/The publication systemFeatureContingency>"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"Further, a sampling percentage stored in the PUBLICATION SYSTEM_SITE_PARAMETER table (detailed below) may also be used to allow us to \u201cdial-up\u201d the traffic.",{"@attributes":{"id":"p-0050","num":"0112"},"tables":{"@attributes":{"id":"TABLE-US-00006","num":"00006"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"THE PUBLICATION SYSTEM_SITE_PARAMETER"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"63pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["SITE_ID","PARAM_TYPE","PARAM_NAME","PARAM_VALUE"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}},{"entry":["<site-id>","RoverTracking","A tracking","<int-0-100>"]},{"entry":[{},{},"partnerExtCallRate"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]}}]}},"br":{},"ul":{"@attributes":{"id":"ul0022","list-style":"none"},"li":{"@attributes":{"id":"ul0022-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0023","list-style":"none"},"li":["<site-id> is the site id, for example 0=THE_PUBLICATION_SYSTEM_US.\n\nand\n","<int-0-100> is the sampling rate to apply to requests to determine if ROI events should be generated for a tracking partner. The GUID used as input is the one passed in the service request.\n\nTracking Service\n"]}}}},"In an example embodiment, the publication system internal Tracking Service provider may serve as the primary interface (or proxy) between the publication system and it's tracking partners. The internal communication between this service and other the publication system components may be based on the well-known XML-based communication SOAP protocol. To ensure the high availability of this functionality within the publication system, this Tracking Service may be set up as a publication system internal Web Service pool as described above, fronted by a load balancer. The web service pool is herein referred to as the Rover Web Service pool. In an alternative embodiment, the communication between the publication system and a partner Tracking Service may happen in the form of an HTTP request.","Architecture Overview","An architectural overview of an example embodiment is shown in . The example embodiment as shown in  depicts the Tracking Service architecture , according to an example embodiment. At the top of the stack, the publication system Tracking Service layer  provides an abstraction between the client (e.g. Search, ViewItem, etc. . . . )  and the Rover Web Service component . Beneath the abstraction, the Web Service Client  and the Web Service Presentation  components provide yet another layer of abstraction for sending and receiving SOAP-based requests from the client  and the Rover Web Service component  respectively. In the example embodiment shown in , the Rover Web Service component  uses a conventional SOAP interface. In other embodiments, a Representational State Transfer (REST) style interface can be used if the SOAP overhead becomes too expensive.","Service API Overview","The tracking service, in one example embodiment, presents a Java API (application programming interface) to be used for sending data to the tracking partner. The API is designed to handle requests from any one or more of multiple application servers, as well as the Rover Web Service pool based on the deliverable configuration. The API consists of a TrackingServiceManager class, which serves as the primary entry point to access the service, TrackingServiceConfig class, and a series of helper classes. A UML (unified modeling language) diagram illustrated in  presents an overview of the Java API in an example embodiment.","Tracking Service Manager","The TrackingServiceManager, in one example embodiment, serves as the main entry for accessing the publication system Tracking Service. Based on the deliverable configuration and the requested the publication system tracking partner, the manager returns the appropriate tracking service instance. If the call is originated from the Rover Web Service pool, the manager returns an instance of the requested tracking service (e.g. a tracking partnerInvocation), which is capable of sending and receiving data to and from the requested partner via HTTP. On the other hand, if the call is from one of the application servers, an instance of the publication systemTrackingService may be returned instead.","Aside from its primary task, the TrackingServiceManager, in one embodiment, is also responsible for:\n\n","A TrackingServiceManager initialization sequence diagram of an example embodiment is illustrated in .","A Tracking partner connection parameter (param) detection sequence diagram of an example embodiment is illustrated in .","Tracking Service Configuration","Each tracking service, in an example embodiment, can be statically and dynamically configured through a configuration category bean. Beans are well-known forms of reusable software components. At server start up time, the bean is initialized with properties that are specified in a configuration file, TrackingService.xml, associated with the deliverable. In this file, it is possible to have the configuration of one or more internal and\/or external tracking services. Rover Web Service deliverable\u2014one or more publication system partner configurations can be specified in this deliverable. An example is illustrated below.",{"@attributes":{"id":"p-0059","num":"0127"},"tables":{"@attributes":{"id":"TABLE-US-00007","num":"00007"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<?xml version=\u201c1.0\u201d encoding=\u201cUTF-8\u201d?>"]},{"entry":[{},"<tracking-service-config"]},{"entry":[{},"xmlns:xsi=\u201chttp:\/\/www.w3.org\/2001\/XMLSchema-instance\u201d>"]},{"entry":[{},"\u2003<partner-tracking-service name=\u201cMPLX\u201d>"]},{"entry":[{},"\u2003\u2003\u2003\u2002<!-- the publication system partner host name \u2192"]},{"entry":[{},"\u2003\u2003<host>adfarm.a tracking partner.com<\/host>"]},{"entry":[{},"\u2003\u2003\u2003\u2002<!-- the publication system partner port \u2192"]},{"entry":[{},"\u2003\u2003<port>80<\/port>"]},{"entry":[{},"\u2003\u2003\u2003\u2002<!-- the publication system partner specific cookie"]},{"entry":[{},"names \u2192"]},{"entry":[{},"\u2003\u2003<expected-cookies>"]},{"entry":[{},"\u2003\u2003\u2003<cookie>svid<\/cookie>"]},{"entry":[{},"\u2003\u2003\u2003<cookie>mojo1<\/cookie>"]},{"entry":[{},"\u2003\u2003<\/expected-cookies>"]},{"entry":[{},"\u2003\u2003\u2003\u2002<!-- properties for the http connection to our the"]},{"entry":[{},"publication system partner \u2192"]},{"entry":[{},"\u2003\u2003<connection-timeout>10<\/connection-timeout>"]},{"entry":[{},"\u2003\u2003<keep-alive-timeout>10<\/keep-alive-timeout>"]},{"entry":[{},"\u2003\u2003<num-retries>2<\/num-retries>"]},{"entry":[{},"\u2003\u2003<max-active-threads>1<\/max-active-threads>"]},{"entry":[{},"\u2003\u2003<max-available-threads>2<\/max-available-threads>"]},{"entry":[{},"\u2003\u2003<allowable-timeout-threshold>10<\/allowable-timeout-"]},{"entry":[{},"threshold>"]},{"entry":[{},"\u2003\u2003<consecutive-failure-threshold>30<\/consecutive-failure-"]},{"entry":[{},"threshold>"]},{"entry":[{},"\u2003<\/partner-tracking-service>"]},{"entry":[{},"<\/tracking-service-config>"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}},"br":{}},"Given a TrackingRequest as detailed above, a specialized PartnerTrackingUrlBuilder may be made available through the TrackingServiceManager to construct a partner URL. Based on the initial TrackingServiceManager.getService( ) call and the tracking service configuration, a publication system partner URL builder is created and made available for the client to construct a partner tracking URL from the given request.","Tracking Response Handler","A tracking response helper class, TrackingResponseHandler, appropriately adds partner cookies into or from the tracking response.","Tracking Commands","ROI Tracking","This command is used to track an event. It may send a request to the tracking partner and return a 1-pixel .gif. If it is required to display the containing page referring URL, then the <img> tag that invokes this command must be wrapped in JavaScript that passes the referring URL as a parameter. Because the command may need to be placed on https or http pages, it is always sent https.","In an example embodiment, the syntax (core) is represented as follows.","https:\/\/rover.the publication system.com\/roverroi\/[tracking-provider-id]\/[tracking-data-segment]? tranType=[transaction-type]&siteId=[site-id]&[parameter1]=[value1]&[parameter2]=[value2]&.","Where [tracking-provider-id] may be 1 for a specific tracking partner and [tracking-data-segment] may be the rotation id, for example 711-518-1801-6. The [transaction-type] is the same string passed on existing tags. For example, BIN-FP for a fixed price BIN. The [site-id] is the numeric site id for the tag, for example 0 (the publication system US) or 100 (US Autos).","As an example, this tracking command (also referred to herein as a rover command) is represented as follows.","https:\/\/rover.the publication system.com\/roverroi\/1\/711-518-1801-6? TranType=BIN-FP&BIN-FP-11233=1siteId=0&mpuid=2577082;4735966129","This tracking command may cause the following to be sent to a pay tracking partner via the invocation as described above.","http:\/\/adfarm.a tracking partner.com\/ad\/bk\/711-518-1801-6?BIN-FP=1& BIN-FP-11233=1& mpuid=2577082;4735966129","Entry Tracking","This command, in an example embodiment, implements the universal tracking URL as described herein. It causes entry to the publication system site after first recording a referral for the affiliate with a trading partner.","The general form for this command, in an example embodiment, may be represented as follows.","http:\/\/rover.the publication system.com\/rover\/[tracking-provider-id]\/[tracking-data-segment]\/[channel]?PID=[affiliate-id] & . . . &loc=[target-location]","Where [tracking-provider-id] is 1 for a specific tracking partner and [tracking-data-segment] is the rotation id, for example 711-1751-2978-71. The [channel] indicates the IM channel for this link and is defined as follows.","1\u2014affiliate entry","2\u2014paid search","3\u2014natural search (not used in this context, but reserved anyway)","4\u2014portal","The [affiliate-id] indicates the affiliate or partner responsible for the link. Finally, [target-location] is the target location for the link.","As an example, this command can be represented as follows.","http:\/\/rover.the publication system.com\/rover\/1\/711-1751-2978-71\/1?PID=123456&loc=http %3A%2F%2Fcgi.the publication system.com%2F Sub-Zero-Stainless-All-Fridge-All-Freezer-2-Built-In-NR_W0QQitemZ7541240878","This command may be sent to a tracking partner as represented below.","http:\/\/adfarm.a tracking partner.com\/ad\/ck\/711-1751-2978-71?mpre=&PID=123456& loc http %3A%2F%2Fcgi.the publication system.com%2F Sub-Zero-Stainless-All-Fridge-All-Freezer-2-Built-In-NR_W0QQitemZ7541240878","Search Front-End Integration","The search front end is updated to recognize the tracking command specific parameters, use the Tracking Service API to send the tracking entry and then redirect to the intended entry target. The tracking service APIs provide a way to do this at the callBizTier( ) level as shown in the example below.",{"@attributes":{"id":"p-0078","num":"0146"},"tables":{"@attributes":{"id":"TABLE-US-00008","num":"00008"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"\/**"},{"entry":"\u2009* Show an example of calling the tracking interface."},{"entry":"\u2009* @param context contains information about the request"},{"entry":"\u2009* @return a WebCommandResponse object"},{"entry":"\u2009* @throws BizTierCallFailedException"},{"entry":"\u2009*\/"},{"entry":"protected WebCommandResponse callBizTier(WebContext context)"},{"entry":"throws BizTierCallFailedException {"},{"entry":"\u2009WebCommandResponse response = new WebCommandResponse( );"},{"entry":"\u2009\/\/ Is this an optimized URL?"},{"entry":"\u2009if"},{"entry":"(context.getRequestParameterMap( ).-"},{"entry":"containsKey(TrackingRequestBuilder.ROVER_PARM)) {"},{"entry":"\u2003\/\/ Construct an entry tracking request"},{"entry":"\u2003The publication systemEntryTrackingRequest req ="},{"entry":"TrackingRequestBuilder.buildEntryTrackingRequest(context);"},{"entry":"\u2003\/\/ Get the service interface"},{"entry":"\u2003The publication systemTrackingService srvc ="},{"entry":"TrackingServiceManager.getService(req.getTrackingPartner( ));"},{"entry":"\u2003\/\/ invoke the service"},{"entry":"\u2003The publication systemEntryTrackingResponse resp ="},{"entry":"\u2003srvc.trackEntry(req);"},{"entry":"\u2003\/\/ process the response"},{"entry":"\u2003TrackingResponseHandler.handleResponse(resp, context);"},{"entry":"\u2003\/\/ redirect to the indicated target"},{"entry":"\u2003final String location = resp.getDestination( );"},{"entry":"\u2003\/\/ Set redirect info so that request is redirected"},{"entry":"\u2003RedirectInfo redirInfo = new RedirectInfo("},{"entry":"\u2003\u2002new RedirectURLBuilder( ) {"},{"entry":"\u2003\u2003public String buildUrl(UrlService urlService,"},{"entry":"\u2003\u2003\u2003VacIdentity redirectToVAC, int redirectPageType) {"},{"entry":"\u2003\u2003\u2002return location;"},{"entry":"\u2003\u2003}"},{"entry":"\u2003\u2002});"},{"entry":"\u2003redirInfo.setRedirectPerm(true); \/\/ indicate that a 301 redirect should be"},{"entry":"done"},{"entry":"\u2003response.setRedirectInfo(redirInfo);"},{"entry":"\u2003response.setData(location);"},{"entry":"\u2002} else {"},{"entry":"\u2003\/\/ normal command processing"},{"entry":"\u2002}"},{"entry":"\u2002return response;"},{"entry":"}"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}},"br":{}},{"@attributes":{"id":"p-0079","num":"0147"},"tables":{"@attributes":{"id":"TABLE-US-00009","num":"00009"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"98pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"84pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"91pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Search: Advanced Search","Search: Global Trade Hub","Search: Store Listing"]},{"entry":["Search: All Category","Search: In-Store Search","Search: Store Name"]},{"entry":["Search: Completed Search","Search: Listings","Search: Stores with matching"]},{"entry":[{},{},"item"]},{"entry":["Search: Cross Store Search","Search: Live Auction","Search: Title & Description"]},{"entry":[{},{},"Search"]},{"entry":["Search: Dynamic Category Page","Search: Sellers Other Items","Search: Title Search"]},{"entry":["Search: Dynamic Landing Page","Search: Similar Search","Search: Want It Now"]},{"entry":[{},"Search: Store Hub","Search: Avalon"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}}}},"In addition to these search pages, the Product Detail Pages and the Product Based Search (single domain) pages may also support the optimized URL.","ViewItem Front-End Integration","The view item front end is updated to recognize the tracking command specific parameters, use the Tracking Service API to send the tracking entry and then redirect to the intended entry target. The logic is similar to what is described above for Search front-end integration.","ROI Integration","All the existing external ROI placements for a tracking partner need an additional placement to call the tracking command. This may be accomplished by defining Rover (the web service pool) as an additional provider and adding additional tracking tags as needed. The list of tracking tags for which this may be performed is shown below.","To facilitate the testing and validation of the links to Rover (the web service pool), the ROI tag validation process may be enhanced to allow an alternate host name in the tag for staging versus production. This may allow the new tags to be validating using a tracking command running in staging as opposed to the production pool.","The generation of Rover-A tracking partner ROI tags may be controlled by a feature contingency. An example is shown below.",{"@attributes":{"id":"p-0085","num":"0153"},"tables":{"@attributes":{"id":"TABLE-US-00010","num":"00010"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\u2003<The publication systemEntity id=\u201cRover-MediaplexROILinks\u201d"]},{"entry":[{},"value=\u201c1036\u201d\/>"]},{"entry":[{},"\u2003<The publication systemFeatureContingency id=\u201cRover-"]},{"entry":[{},"MediaplexROILinks\u201d deprecated=\u201cfalse\u201d comment=\u201c\u201d"]},{"entry":[{},"\u2003\u2003>Generate Rover links to call ROI events serviced by"]},{"entry":[{},"Mediaplex<\/The publication systemFeatureContingency>"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"Further, a sampling percentage stored in the PUBLICATION SYSTEM_SITE_PARAMETER table is also used to allow us to \u201cdial-up\u201d the traffic.",{"@attributes":{"id":"p-0087","num":"0155"},"tables":{"@attributes":{"id":"TABLE-US-00011","num":"00011"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"THE PUBLICATION SYSTEM_SITE_PARAMETER"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"63pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["SITE_ID","PARAM_TYPE","PARAM_NAME","PARAM_VALUE"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}},{"entry":["<site-id>","RoverTracking","ROISamplingRate","<int-0-100>"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]}}]}},"br":{},"ul":{"@attributes":{"id":"ul0026","list-style":"none"},"li":{"@attributes":{"id":"ul0026-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0027","list-style":"none"},"li":["<site-id> is the site id, for example 0=THE_PUBLICATION_SYSTEM_US.\n\nand\n","<int-0-100> is the sampling rate to apply to requests to determine if ROI events should be generated for a tracking partner.\n\nNatural Search Detection\n\npim Cookielet\n"]}}}},"With the streamlining of the affiliate and paid search entry paths to the site, the ability to distinguish natural search entries to the site may be compromised. Checking the referrer against a list of search engines is no longer sufficient. To that end, in an example embodiment, a new cookielet is being dropped during the paid internet marketing paths (affiliates, paid-search, . . . ) that identifies the request as one that should not be flagged as a result of a natural search result referral, regardless of the actual referrer.","JavaScript","JavaScript in the footer for a Natural Search entry is changed to detect the pim cookielet. If the pim cookielet is set, then it is cleared. If not set, then a call to the natural search entry command is added, adding the containing page's referrer URL as a parameter as long as the page is not a homepage. An example of this logic follows.",{"@attributes":{"id":"p-0090","num":"0160"},"tables":{"@attributes":{"id":"TABLE-US-00012","num":"00012"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"if (command or homepage) {"]},{"entry":[{},"\u2003... do nothing, Natural Search (NS) detection handled on server"]},{"entry":[{},"} else {"]},{"entry":[{},"\u2003if (cookielet set) {"]},{"entry":[{},"\u2003\u2003clear it"]},{"entry":[{},"\u2003} else {"]},{"entry":[{},"\u2003\u2003gen call to roverns command"]},{"entry":[{},"\u2003}"]},{"entry":[{},"}"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}},"br":{}},"This command may check the referrer of the containing page against a list of known search engine patterns. If a match is found, then the Tracking Service API is invoked to track the natural search entry.","The list of search engine URL patterns is the same list used by search processor traffic source detection. Search processor has implemented a process that allows this list to be updated independently of a train roll.","The command is wrapped in JavaScript to add the referrer as described above and is similar to the Impression tracking command described earlier. In an example embodiment, the syntax (core) is as follows.","https:\/\/rover.the publication system.com\/roverns\/[tracking-provider-id]\/[tracking-data-segment]?mpvl=[referrer URL]","Where [tracking-provider-id] is 1 for a specific tracking partner and [tracking-data-segment] is the rotation id, for example 711-13271-9788-0. The [referrerURL] is the URL of the referrer of the page containing the natural search tracking link.","An example of this natural search entry tracking command follows.","https:\/\/rover.the publication system.com\/roverns\/1\/711-13271-9788-0? & mpvl=http%3A\/\/www.google.com\/search . . . .","This natural search entry tracking command may cause the following command to be sent to a specific tracking partner via invocation of the TrackImpression operation described above.","http:\/\/adfarm.a tracking partner.com\/ad\/lt\/711-13271-9788-0?","mpt=1127524981627&","mpcl=http%3A\/\/collectibles.listings.the publication system.com . . . &","mpvl=http%3A\/\/www.google.com\/search . . . .","The mpcl parameter is supplied as the referrer of the natural search entry tracking command. The cachebuster, mpt=, parameter is computed by the natural search entry tracking command.","Natural Search Detection in Commands","In every command, Rover may integrate back-end Natural Search entry detection. To accomplish this, the WebDispatcher.dispatch( ) method may be enhanced to check for a natural search entry and if detected, may invoke the Rover Web Service to track the link. An example embodiment of this is shown in . The logic may parallel what is done in JavaScript for the similar check. An example in one embodiment is provided below.",{"@attributes":{"id":"p-0101","num":"0171"},"tables":{"@attributes":{"id":"TABLE-US-00013","num":"00013"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"If (pim cookielet set) {"]},{"entry":[{},"\u2003Clear cookielet"]},{"entry":[{},"} else {"]},{"entry":[{},"\u2003if (referrer is from a SearchEngine) {"]},{"entry":[{},"\u2003\u2003send link to a tracking partner via webservice"]},{"entry":[{},"\u2003}"]},{"entry":[{},"}"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"The Search processor has implemented a process that allows this list to be updated independently of a train roll.","The generation of a call to a tracking partner via the web service is controlled by a feature contingency. An example is provided below.",{"@attributes":{"id":"p-0104","num":"0174"},"tables":{"@attributes":{"id":"TABLE-US-00014","num":"00014"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"\u2003<The publication systemEntity id=\u201cRoverLinksFromNaturalSearch\u201d"},{"entry":"value=\u201c1035\u201d\/>"},{"entry":"\u2003<The publication systemFeatureContingency"},{"entry":"id=\u201cRoverLinksFromNaturalSearch\u201d deprecated=\u201cfalse\u201d comment=\u201c\u201d"},{"entry":"\u2003\u2003>Generate Rover links for detected Natural Search entries to the"},{"entry":"site<\/The publication systemFeatureContingency>"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"Further, a sampling percentage stored in the PUBLICATION SYSTEM_SITE_PARAMETER table is also used to allow us to \u201cdial-up\u201d the traffic.",{"@attributes":{"id":"p-0106","num":"0176"},"tables":{"@attributes":{"id":"TABLE-US-00015","num":"00015"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"THE PUBLICATION SYSTEM_SITE_PARAMETER"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"63pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["SITE_ID","PARAM_TYPE","PARAM_NAME","PARAM_VALUE"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}},{"entry":["<site-id>","RoverTracking","NSSamplingRate","<int-0-100>"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]}}]}},"br":{},"ul":{"@attributes":{"id":"ul0028","list-style":"none"},"li":{"@attributes":{"id":"ul0028-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0029","list-style":"none"},"li":["<site-id> is the site id, for example 0=THE_PUBLICATION_SYSTEM_US.\n\nand\n","<int-0-100> is the sampling rate to apply to requests to determine if a natural search link through Rover to a tracking partner should be generated.\n\nLink Generation Tools\n\nProduct Kit\n"]}}}},"The code called by the JavaScript may generate the Rover-format links based on a Feature Contingency and sampling percentage. The feature contingency is defined as in an example provided below.",{"@attributes":{"id":"p-0108","num":"0180"},"tables":{"@attributes":{"id":"TABLE-US-00016","num":"00016"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<The publication systemEntity id=\u201cRoverLinksFromProductKit\u201d"]},{"entry":[{},"value=\u201c976\u201d\/>"]},{"entry":[{},"<The publication systemFeatureContingency"]},{"entry":[{},"id=\u201cRoverLinksFromProductKit\u201d deprecated=\u201cfalse\u201d comment=\u201c\u201d"]},{"entry":[{},"\u2003>Generate Rover style links for Product Kits<\/The publication"]},{"entry":[{},"systemFeatureContingency>"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"Further, a sampling percentage is stored in the PUBLICATION SYSTEM_SITE_PARAMETER table.",{"@attributes":{"id":"p-0110","num":"0182"},"tables":{"@attributes":{"id":"TABLE-US-00017","num":"00017"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"THE PUBLICATION SYSTEM_SITE_PARAMETER"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"63pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["SITE_ID","PARAM_TYPE","PARAM_NAME","PARAM_VALUE"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}},{"entry":["<site-id>","RoverTracking","PkSamplingRate","<int-0-100>"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]}}]}},"br":{},"ul":{"@attributes":{"id":"ul0030","list-style":"none"},"li":{"@attributes":{"id":"ul0030-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0031","list-style":"none"},"li":["<site-id> is the site id, for example 0=THE_PUBLICATION_SYSTEM_US.\n\nand\n","<int-0-100> is the sampling rate to apply to requests to determine if a given request should use Rover style links. This is an integer from 0 to 100."]}}}},"The sampling is based on a hash of the Search processor GUID. The decision to include a request or not can be computed this way. An example is provided below.",{"@attributes":{"id":"p-0112","num":"0186"},"tables":{"@attributes":{"id":"TABLE-US-00018","num":"00018"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"import com.the publication"},{"entry":"system.kernel.presentation.sojourner.SojournerContext;"},{"entry":"import com.the publication"},{"entry":"system.kernel.presentation.sojourner.SojournerContextManager;"},{"entry":"..."},{"entry":"public static boolean isInSample(int pct) {"},{"entry":"\u2003\u2003SojournerContext sojCtx = SojournerContextManager.getInstance( );"},{"entry":"\u2003\u2003String guid = sojCtx.getGuid( ); \/\/method available as of e429"},{"entry":"\u2003\u2003if (guid == null) {"},{"entry":"\u2003\u2003\u2003\/\/ don't include requests that don't have a guid assigned by this"},{"entry":"\u2003\u2003point"},{"entry":"\u2003\u2003\u2003return false;"},{"entry":"\u2003\u2003}"},{"entry":"\u2003\u2003\/\/ Get a hash value for the guid"},{"entry":"\u2003\u2003int guidHash = guid.hashCode( );"},{"entry":"\u2003\u2003int rem;"},{"entry":"\u2003\u2003if (guidHash < 0) {"},{"entry":"\u2003\u2003\u2003\/\/ the hash value can be negative, we want rem to be positive"},{"entry":"\u2003\u2003\u2003rem = guidHash % \u2212100;"},{"entry":"\u2003\u2003} else {"},{"entry":"\u2003\u2003\u2003rem = guidHash % 100;"},{"entry":"\u2003\u2003}"},{"entry":"\u2003\u2003\/\/ rem is now an int from 0 to 99, we're in the sample"},{"entry":"\u2003\u2003\/\/ if rem is less than pct"},{"entry":"\u2003\u2003return rem < pct;"},{"entry":"}"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}},"br":{}},"The code called by the JavaScript may generate the Rover-format links based on a Feature Contingency and sampling percentage. The feature contingency is defined as in the following example.",{"@attributes":{"id":"p-0114","num":"0188"},"tables":{"@attributes":{"id":"TABLE-US-00019","num":"00019"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<The publication systemEntity id=\u201cRoverLinksFromEditorKit\u201d"]},{"entry":[{},"value=\u201c977\u201d\/>"]},{"entry":[{},"<The publication systemFeatureContingency"]},{"entry":[{},"id=\u201cRoverLinksFromEditorKit\u201d deprecated=\u201cfalse\u201d comment=\u201c\u201d"]},{"entry":[{},"\u2003>Generate Rover style links for Editor Kits<\/The publication"]},{"entry":[{},"systemFeatureContingency>"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"Further, a sampling percentage is stored in the PUBLICATION SYSTEM_SITE_PARAMETER table.",{"@attributes":{"id":"p-0116","num":"0190"},"tables":{"@attributes":{"id":"TABLE-US-00020","num":"00020"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"THE PUBLICATION SYSTEM_SITE_PARAMETER"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"63pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["SITE_ID","PARAM_TYPE","PARAM_NAME","PARAM_VALUE"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}},{"entry":["<site-id>","RoverTracking","EkSamplingRate","<int-0-100>"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]}}]}},"br":{},"ul":{"@attributes":{"id":"ul0032","list-style":"none"},"li":{"@attributes":{"id":"ul0032-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0033","list-style":"none"},"li":["<site-id> is the site id, for example 0=THE_PUBLICATION_SYSTEM_US.\n\nand\n","int-0-100> is the sampling rate to apply to requests to determine if a given request should use Rover style links. This is an integer from 0 to 100.\n\nKeyword Linking Tool\n"]}}}},"The Keyword linking tools returns a list of URLs and may generate Rover-style links based on a Feature Contingency and sampling percentage. The feature contingency is defined as in the following example.",{"@attributes":{"id":"p-0118","num":"0194"},"tables":{"@attributes":{"id":"TABLE-US-00021","num":"00021"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<The publication systemEntity"]},{"entry":[{},"id=\u201cRoverLinksFromKeywordLinkingTool\u201d value=\u201c978\u201d\/>"]},{"entry":[{},"<The publication systemFeatureContingency"]},{"entry":[{},"id=\u201cRoverLinksFromKeywordLinkingTool\u201d deprecated=\u201cfalse\u201d"]},{"entry":[{},"\u2003comment=\u201c\u201d >Generate Rover style links for Keyword Linking"]},{"entry":[{},"Tool<\/The publication systemFeatureContingency>"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"Further, a sampling percentage is stored in the PUBLICATION SYSTEM_SITE_PARAMETER table.",{"@attributes":{"id":"p-0120","num":"0196"},"tables":{"@attributes":{"id":"TABLE-US-00022","num":"00022"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"THE PUBLICATION SYSTEM_SITE_PARAMETER"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"63pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["SITE_ID","PARAM_TYPE","PARAM_NAME","PARAM_VALUE"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}},{"entry":["<site-id>","RoverTracking","KwlSamplingRate","<int-0-100>"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]}}]}},"br":{},"ul":{"@attributes":{"id":"ul0034","list-style":"none"},"li":{"@attributes":{"id":"ul0034-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0035","list-style":"none"},"li":"<site-id> is the site id, for example 0=THE_PUBLICATION_SYSTEM_US.\n\nand\n"}}}},"<int-0-100> is the sampling rate to apply to requests to determine if a given request should use Rover style links. This is an integer from 0 to 100.","The decision to include a request in the sample or not is computed the same way as for the Product Kit described above.","Reporting","The reporting and alerting for Rover relies on OLAP, in one embodiment. An accumulator i may focus on the inputs and outputs from the web service tier as shown in .","Outer CAL Transaction","The outer CAL transaction may include request information, especially the following data items.\n\n",{"@attributes":{"id":"p-0125","num":"0207"},"tables":{"@attributes":{"id":"TABLE-US-00023","num":"00023"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"IM-Driven Traffic by Site-Channel-Pool"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"5"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"56pt","align":"center"}},{"@attributes":{"colname":"4","colwidth":"35pt","align":"center"}},{"@attributes":{"colname":"5","colwidth":"49pt","align":"center"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Site_ID","Channel","Request Host","Referrals","Errors"]},{"entry":{"@attributes":{"namest":"1","nameend":"5","align":"center","rowsep":"1"}}}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{}},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}]}},"ul":{"@attributes":{"id":"ul0038","list-style":"none"},"li":{"@attributes":{"id":"ul0038-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0039","list-style":"none"},"li":["Data may be updated every 10 minutes","Users may be able to filter the report by Site, Channel, or Request Host","Users may be able to view the report, regardless of the filters that are applied, over a configurable period of time by specifying the Start Day and Time and the End Day and Time\n\nAlerting\n"]}}}},"An alert and\/or email may be sent to an operational or administrative center if any of the following events occur.","The Average Duration time exceeds a predetermined level. This level may be configurable.","The number of Timeouts per call to MPLX exceeds a predetermined percentage. This level may be configurable.","The number of errors returned from MPLX per call to MPLX exceeds a predetermined percentage. The percentage that triggers an alert may be configurable.","All emails that are triggered must specify the time period(s) when the alerting events occurred.","An alert and\/or email may be sent to an operational or administrative center if the number of Errors per Referral exceeds a predetermined percentage.\n\n","The inner CAL transaction may be used to track statistics on the calls to the external partner. These may include the following data items.\n\n","This data is sufficient to produce reports in the following form.",{"@attributes":{"id":"p-0134","num":"0225"},"tables":{"@attributes":{"id":"TABLE-US-00024","num":"00024"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Referral Calls to MPLX by Site-Channel"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"6"},"colspec":[{"@attributes":{"colname":"1","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"35pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"4","colwidth":"49pt","align":"center"}},{"@attributes":{"colname":"5","colwidth":"35pt","align":"center"}},{"@attributes":{"colname":"6","colwidth":"42pt","align":"center"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Site_ID","Channel","Sent","Ave_Duration","Timeouts","Ret_Errors"]},{"entry":{"@attributes":{"namest":"1","nameend":"6","align":"center","rowsep":"1"}}}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{}},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}]}},"ul":{"@attributes":{"id":"ul0044","list-style":"none"},"li":{"@attributes":{"id":"ul0044-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0045","list-style":"none"},"li":["Data may be updated every 10 minutes","Users may be able to filter the report by Site_ID or Channel","Users may be able to view the report, regardless of the filters that are applied, over a configurable period of time by specifying the Start Day and Time and the End Day and Time"]}}}},{"@attributes":{"id":"p-0135","num":"0229"},"tables":{"@attributes":{"id":"TABLE-US-00025","num":"00025"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Referral Calls to MPLX by Site-Channel"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"6"},"colspec":[{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"5","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"6","colwidth":"42pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Site_ID","Trans_Type","Sent","Ave_Duration","Timeouts","Ret_Errors"]},{"entry":{"@attributes":{"namest":"1","nameend":"6","align":"center","rowsep":"1"}}}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{}},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}]}},"ul":{"@attributes":{"id":"ul0046","list-style":"none"},"li":{"@attributes":{"id":"ul0046-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0047","list-style":"none"},"li":["Data may be updated every 10 minutes","Users may be able to filter the report by Site_ID or Trans_Type","Users may be able to view the report, regardless of the filters that are applied, over a configurable period of time by specifying the Start Day and Time and the End Day and Time.\n\nWeb Service WSDL\n"]}}}},"The Rover Web Service, in an example embodiment, may be defined with the following WSDL.",{"@attributes":{"id":"p-0137","num":"0234"},"tables":{"@attributes":{"id":"TABLE-US-00026","num":"00026"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"273pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"<?xml version=\u201c1.0\u201d encoding=\u201cUTF-8\u201d?>"},{"entry":"<wsdl:definitions targetNamespace=\u201curn:TrackingService:1.0\u201d"},{"entry":"xmlns=\u201chttp:\/\/schemas.xmlsoap.org\/wsdl\/\u201d"},{"entry":"xmlns:apachesoap=\u201chttp:\/\/xml.apache.org\/xml-soap\u201d"},{"entry":"xmlns:impl=\u201curn:TrackingService:1.0\u201d xmlns:intf=\u201curn:TrackingService:1.0\u201d"},{"entry":"xmlns:soapenc=\u201chttp:\/\/schemas.xmlsoap.org\/soap\/encoding\/\u201d"},{"entry":"xmlns:wsdl=\u201chttp:\/\/schemas.xmlsoap.org\/wsdl\/\u201d"},{"entry":"xmlns:wsdlsoap=\u201chttp:\/\/schemas.xmlsoap.org\/wsdl\/soap\/\u201d"},{"entry":"xmlns:xsd=\u201chttp:\/\/www.w3.org\/2001\/XMLSchema\u201d>"},{"entry":"\u2003<wsdl:types>"},{"entry":"\u2003\u2003<schema targetNamespace=\u201curn:TrackingService:1.0\u201d"},{"entry":"xmlns=\u201chttp:\/\/www.w3.org\/2001\/XMLSchema\u201d>"},{"entry":"\u2003\u2003\u2003<import namespace=\u201chttp:\/\/schemas.xmlsoap.org\/soap\/encoding\/\u201d\/>"},{"entry":"\u2003\u2003\u2003<complexType name=\u201cTrackingRequest\u201d>"},{"entry":"\u2003\u2003\u2003\u2003<sequence>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<element name=\u201ctrackingDataSegment\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<element name=\u201clanguagePreference\u201d nillable=\u201ctrue\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<element name=\u201ctrackingPartner\u201d type=\u201cxsd:int\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<element name=\u201csessionGUID\u201d nillable=\u201ctrue\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<element name=\u201cclickId\u201d nillable=\u201ctrue\u201d type=\u201cxsd:int\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<element name=\u201ctpCookies\u201d nillable=\u201ctrue\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<element name=\u201cclientGUID\u201d nillable=\u201ctrue\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<element name=\u201cuid\u201d nillable=\u201ctrue\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<element name=\u201cchannel\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<element name=\u201csiteId\u201d type=\u201cxsd:int\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<element name=\u201ctransactionType\u201d nillable=\u201ctrue\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<element name=\u201creferrer\u201d nillable=\u201ctrue\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<element name=\u201crequestUri\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<element name=\u201cremoteIpAddr\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<element name=\u201cuserAgent\u201d nillable=\u201ctrue\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<element name=\u201crequestId\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<any processContents=\u201clax\u201d minOccurs=\u201c0\u201d maxOccurs=\u201cunbounded\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003<\/sequence>"},{"entry":"\u2003\u2003\u2003<\/complexType>"},{"entry":"\u2003\u2003\u2003<complexType name=\u201cEntryTrackingRequest\u201d>"},{"entry":"\u2003\u2003\u2003\u2003<complexContent>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<extension base=\u201cimpl:TrackingRequest\u201d>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003<sequence>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003<element name=\u201ctargetLocation\u201d nillable=\u201ctrue\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003<any processContents=\u201clax\u201d minOccurs=\u201c0\u201d maxOccurs=\u201cunbounded\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003<\/sequence>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<\/extension>"},{"entry":"\u2003\u2003\u2003\u2003<\/complexContent>"},{"entry":"\u2003\u2003\u2003<\/complexType>"},{"entry":"\u2003\u2003\u2003<complexType name=\u201cTrackingResponse\u201d>"},{"entry":"\u2003\u2003\u2003\u2003<sequence>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<element name=\u201cstatus\u201d type=\u201cxsd:int\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<element name=\u201ctpCookies\u201d nillable=\u201ctrue\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<element name=\u201cerrorMsg\u201d nillable=\u201ctrue\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<any processContents=\u201clax\u201d minOccurs=\u201c0\u201d maxOccurs=\u201cunbounded\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003<\/sequence>"},{"entry":"\u2003\u2003\u2003<\/complexType>"},{"entry":"\u2003\u2003\u2003<complexType name=\u201cEntryTrackingResponse\u201d>"},{"entry":"\u2003\u2003\u2003\u2003<complexContent>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<extension base=\u201cimpl:TrackingResponse\u201d>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003<sequence>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003<element name=\u201cdestination\u201d nillable=\u201ctrue\u201d type=\u201cxsd:string\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003<any processContents=\u201clax\u201d minOccurs=\u201c0\u201d maxOccurs=\u201cunbounded\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003<\/sequence>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<\/extension>"},{"entry":"\u2003\u2003\u2003\u2003<\/complexContent>"},{"entry":"\u2003\u2003\u2003<\/complexType>"},{"entry":"\u2003\u2003<\/schema>"},{"entry":"\u2003<\/wsdl:types>"},{"entry":"\u2003\u2003\u2003<wsdl:message name=\u201ctrackEntryResponse\u201d>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<wsdl:part name=\u201ctrackEntryReturn\u201d type=\u201cintf:EntryTrackingResponse\u201d\/>"},{"entry":"\u2003\u2003\u2003<\/wsdl:message>"},{"entry":"\u2003\u2003\u2003<wsdl:message name=\u201ctrackImpressionRequest\u201d>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<wsdl:part name=\u201cin0\u201d type=\u201cintf:TrackingRequest\u201d\/>"},{"entry":"\u2003\u2003\u2003<\/wsdl:message>"},{"entry":"\u2003\u2003\u2003<wsdl:message name=\u201ctrackImpressionResponse\u201d>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<wsdl:part name=\u201ctrackImpressionReturn\u201d type=\u201cintf:TrackingResponse\u201d\/>"},{"entry":"\u2003\u2003\u2003<\/wsdl:message>"},{"entry":"\u2003\u2003\u2003<wsdl:message name=\u201ctrackEntryRequest\u201d>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<wsdl:part name=\u201cin0\u201d type=\u201cintf:EntryTrackingRequest\u201d\/>"},{"entry":"\u2003\u2003\u2003<\/wsdl:message>"},{"entry":"\u2003\u2003\u2003<wsdl:portType name=\u201cTrackingService\u201d>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<wsdl:operation name=\u201ctrackEntry\u201d parameterOrder=\u201cin0\u201d>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003<wsdl:input message=\u201cintf:trackEntryRequest\u201d name=\u201ctrackEntryRequest\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003<wsdl:output message=\u201cintf:trackEntryResponse\u201d"},{"entry":"name=\u201ctrackEntryResponse\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<\/wsdl:operation>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<wsdl:operation name=\u201ctrackImpression\u201d parameterOrder=\u201cin0\u201d>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003<wsdl:input message=\u201cintf:trackImpressionRequest\u201d"},{"entry":"name=\u201ctrackImpressionRequest\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003<wsdl:output message=\u201cintf:trackImpressionResponse\u201d"},{"entry":"\u2003name=\u201ctrackImpressionResponse\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<\/wsdl:operation>"},{"entry":"\u2003\u2003\u2003<\/wsdl:portType>"},{"entry":"\u2003\u2003\u2003<wsdl:binding name=\u201cTrackingSoapBinding\u201d type=\u201cintf:TrackingService\u201d>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<wsdlsoap:binding style=\u201crpc\u201d"},{"entry":"transport=\u201chttp:\/\/schemas.xmlsoap.org\/soap\/http\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<wsdl:operation name=\u201ctrackEntry\u201d>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003<wsdlsoap:operation soapAction=\u201c\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003<wsdl:input name=\u201ctrackEntryRequest\u201d>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003<wsdlsoap:body"},{"entry":"encodingStyle=\u201chttp:\/\/schemas.xmlsoap.org\/soap\/encoding\/\u201d"},{"entry":"namespace=\u201curn:TrackingService:1.0\u201d use=\u201cencoded\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003<\/wsdl:input>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003<wsdl:output name=\u201ctrackEntryResponse\u201d>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003<wsdlsoap:body"},{"entry":"encodingStyle=\u201chttp:\/\/schemas.xmlsoap.org\/soap\/encoding\/\u201d"},{"entry":"namespace=\u201curn:TrackingService:1.0\u201d use=\u201cencoded\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003<\/wsdl:output>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<\/wsdl:operation>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<wsdl:operation name=\u201ctrackImpression\u201d>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003<wsdlsoap:operation soapAction=\u201c\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003<wsdl:input name=\u201ctrackImpressionRequest\u201d>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003<wsdlsoap:body"},{"entry":"encodingStyle=\u201chttp:\/\/schemas.xmlsoap.org\/soap\/encoding\/\u201d"},{"entry":"namespace=\u201curn:TrackingService:1.0\u201d use=\u201cencoded\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003<\/wsdl:input>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003<wsdl:output name=\u201ctrackImpressionResponse\u201d>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003<wsdlsoap:body"},{"entry":"encodingStyle=\u201chttp:\/\/schemas.xmlsoap.org\/soap\/encoding\/\u201d"},{"entry":"namespace=\u201curn:TrackingService:1.0\u201d use=\u201cencoded\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003<\/wsdl:output>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<\/wsdl:operation>"},{"entry":"\u2003\u2003\u2003<\/wsdl:binding>"},{"entry":"\u2003\u2003\u2003<wsdl:service name=\u201cTrackingServiceService\u201d>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<wsdl:port binding=\u201cintf:TrackingSoapBinding\u201d name=\u201cTracking\u201d>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003<wsdlsoap:address location=\u201chttp:\/\/localhost:8080\/ws\/websvc\/Tracking\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<\/wsdl:port>"},{"entry":"\u2003\u2003\u2003<\/wsdl:service>"},{"entry":"<\/wsdl:definitions>"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}},"br":{}},"The natural search patterns are stored as regular expressions. Examples are provided below.","\u201c^http:\/\/a9\\.com\/.*\u201d","\u201c^http:\/\/altavista\\.advalvas\\.be\/av2\/.*\u201d","\u201c^http:\/\/arianna\\.libero\\.it\/.*\u201d","\u201c^http:\/\/at\\.altavista\\.com\/.*\u201d","\u201c^http:\/\/au\\.altavista\\.com\/.*\u201d","\u201c^http:\/\/www\\.yisou\\.com\/search.*\u201d","\u201c^http:\/\/www\\.zoek\\.nl\/.*\u201d","\u201c^http:\/\/www\\.zoeken\\.nl\/.*\u201d","\u201c^http:\/\/www2\\.yatv\\.com\/.*\u201d","\u201c^http:\/\/yellow\\.advalvas\\.be\/av2\/scripts\/YellowSearch\\.dll.*\u201d","ROI Tags","Below is an example list of tracking partner external ROI tags that may be replicated as roverroi commands.","- - -","Mediaplex US tags","- - -","Mediaplex External","(1,1,0,1,\u2018https:\/\/$$($$F10,$$F10,adfarm.mediaplex.com\/ad\/bk\/)$$($$F8,$$F8,711-518-1801-0)?Reg=1&mpuid=$$($$D1,$1,);0\u2019, sysdate, sysdate);","(2,1,0,2,\u2018https:\/\/$$($$F10,$$F10,adfarm.mediaplex.com\/ad\/bk\/)$$($$F8,$$F8,711-518-1801-0)?Conf=1 &mpuid=$$($$D1,$1,);0\u2019, sysdate, sysdate);","(3,1,0,3,\u2018https:\/\/$$($$F10,$$F10,adfarm.mediaplex.com\/ad\/bk\/)$$($$F8,$$F8,711-518-1801-0)?Bid=1$$($$D3,&Bid-$3=1,)&mpuid=$$($$D1,$1,);$$($$D2,$2)\u2019, sysdate, sysdate);","(4,1,0,4,\u2018https:\/\/$$($$F10,$$F10,adfarm.mediaplex.com\/ad\/bk\/)$$($$F8,$$F8,711-518-1801-0)?Sell=1$$($$D3,&Sell-$3=1,)&mpuid=$$($$D1,$1,);$$($$D2,)\u2019, sysdate, sysdate);","(5,1,0,5,\u2018https:\/\/$$($$F10,$$F10,adfarm.mediaplex.com\/ad\/bk\/)$$($$F8,$$F8,711-518-1801-8)?BIN-ABIN=1$$($$D3,&BIN-ABIN-$3=1,)&mpuid=$$($$D1,$1,);$$($$D2,$2,)\u2019, sysdate, sysdate);","(6,1,0,6,\u2018https:\/\/$$($$F10,$$F10,adfarm.mediaplex.com\/ad\/bk\/)$$($$F8,$$F8,711-518-1801-6)?BIN-FP=1$$($$D3,&BIN-FP-$3=1,)&mpuid=$$($$D1,$1,);$$($$D2,$2,)\u2019, sysdate, sysdate);","(7,1,0,7,\u2018https:\/\/$$($$F10,$$F10,adfarm.mediaplex.com\/ad\/bk\/)$$($$F8,$$F8,711-518-1801-10)?BIN-Store=1$$($$D3,&BIN-Store-$3=1,)&mpuid=$$($$D1,$1,);$$($$D2,$2,)\u2019, sysdate, sysdate);","(8,1,0,8,\u2018https:\/\/$$($$F10,$$F10,adfarm.mediaplex.com\/ad\/bk\/)$$($$F8,$$F8,711-518-1801-6)?Sell-BIN=1$$($$D3,&Sell-BIN-$3=1,)&mpuid=$$($$D1,$1,);$$($$D2,$2,)\u2019, sysdate, sysdate);","(9,1,0,9,\u2018https:\/\/$$($$F10,$$F10,adfarm.mediaplex.com\/ad\/bk\/)$$($$F8,$$F8,711-518-1801-4)?Store-Build-Conf=1&mpuid=$$($$D1,$1,);0\u2019, sysdate, sysdate).","Advertising Server Interface","In an example embodiment, all the calls to an advertising server, such as Mediaplex, are made from a publication system server. The general configuration is depicted in .","As shown in , requests from publication system clients  are processed by various publication system commands . To make tracking requests to an advertising server , such as Mediaplex, these commands invoke an internal Web Service . The internal Web Service  takes as input all the necessary information to simulate the invocation as if it came directly from the client . This information includes the following from the original client request.\n\n","The publication system's Web Service  may make simulate a request from the client browser  for the calls to an advertising server , such as Mediaplex, by using existing HTTP headers and parameters to convey information. The requests may use HTTP 1.0 protocol. Specifically, chunked encoded responses are not expected. All parameters values are URL-encoded as necessary and standard parameter syntax is used, i.e. name=value pairs separated by & (ampersand).","There are two main types of calls supported in an example embodiment, entry tracking and ROI tracking; each is explained in more detail below.","General Request Headers Sent","Each HTTP request to an advertising server , such as Mediaplex, may include the following headers, as appropriate.","X-Rover-Version","This header is added to clearly identify the request as being a publication system Rover request rather than one from an end-user's browser. The value may be a version number of the following example form.\n\n<major-release>.<minor-release>[.<maintenance-level>]\n\nThe maintenance-level is optional. Initially the value may be 1.0\n","Example:","X-Rover-Version: 1.0","Accept-Language","The Accept-Language header passed from the client's browser to the publication system may be propagated to an advertising server , such as Mediaplex, through the use of the same header.","Example:","Accept-Language: en-us","Host","The host name of the targeted an advertising server , such as Mediaplex, server may be supplied as a Host: header value.","Example:","Host: adfarm.mediaplex.com","Referrer","The referrer passed to the publication system, if any, may be propagated to Mediaplex as the Referrer header. If no referrer is passed to the publication system, then none may be passed to Mediaplex.","Example:","Referrer: http:\/\/offer.ebay.com\/ws\/eBayISAPI.dll","User-Agent","The user agent string passed to the publication system, if any, may be propagated to Mediaplex as the User-Agent header. If no user agent string is passed to the publication system, then none may be passed to Mediaplex.","Example:","User-Agent: Mozilla\/4.0 (compatible; . . . )","Connection","To conserve the time required to establish TCP\/IP socket connections to the Mediaplex servers, connections may be pooled and the request may employ keep-alive to manage their life cycle. By default, the Rover Web Server may discard socket connections after 10 seconds or 50 uses whichever comes first. Although, these values can be overridden by the server as described below.","Example:","Connection: Keep-Alive","Cookie","Requests that Rover sends to Mediaplex may have at most two cookies.","Example:","Cookie: svid=nnnnnnnn; mojo1= . . .","X-Forwarded-For","Since Rover is essentially proxying the request for Mediaplex, the publication system may adopt the convention of sending an X-Forwarded-For: header with the remote IP address of the client. The X-Forwarded-For: header is a non-standard, widely used header that was introduced by the Squid proxy (see [4]). If the incoming request to the publication system already has an X-Forwarded-For: header, Rover may add the client remote IP address to the end as part of a comma-separated list. If there is no X-Forwarded-For header on the incoming request, then Rover may include one on the request that just has the remote IP address of the incoming request.","Example:","X-Forwarded-For: 128.138.243.150, unknown, 192.52.106.30","X-Forwarded-Host","Since Rover is essentially proxying the request for Mediaplex, the publication system may adopt the convention of sending an X-Forwarded-Host: header with the host name of the server in the original client request. This may come with the Host: header passed by the client. If there is no Host: header on the incoming request, then Rover may use a publication system domain as the value for the X-Forwarded-Host: header.","Example:","X-Forwarded-Host: rover.ebay.com","X-Mediaplex-Redirect-Type","Mediaplex can implement a redirect in a number of ways. A proxy server like Rover may wish to receive the indication in a specific way to allow further processing. To support flexibility on both sides of the interface, Mediaplex may recognize a new request header called X-Mediaplex-Redirect-Type. This header can take three possible values:","Permanent",{"@attributes":{"id":"p-0183","num":"0000"},"ul":{"@attributes":{"id":"ul0050","list-style":"none"},"li":{"@attributes":{"id":"ul0050-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0051","list-style":"none"},"li":["The redirect may be indicated by a  response code and the target passed in a Location: header.\n\nTemporary\n","The redirect may be indicated by a  response code and the target passed in a Location: header.\n\nCT-Wrap\n","The redirect may be done via HTML (either as a meta-refresh element or in JavaScript or both) that is returned with a status code of 200.\n\nGeneral Response Headers Processed\n"]}}}},"In addition to the general status requests, the following response headers may be processed.","Keep-Alive","The Rover Web Service client may process the Keep-Alive response header to adjust the lifespan of connected sockets to Mediaplex. As noted above, Rover may attempt to keep the connection on a socket to Mediaplex open for a limited time span and number of requests to amortize the overhead of establishing the connection. By default this may be for 10 seconds or 50 requests, whichever comes first. However, the Mediaplex server can modify this behavior by sending a Keep-Alive header.","As described herein, the Keep-Alive header can pass back parameters to adjust the lifespan of a connection. The parameters that Rover may honor are shown below in an example embodiment.",{"@attributes":{"id":"p-0187","num":"0291"},"tables":{"@attributes":{"id":"TABLE-US-00027","num":"00027"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"154pt","align":"left"}}],"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":["Parameter Name","Description"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["timeout","Max number of seconds to hold the connection open"]},{"entry":["max","The maximum number of HTTP requests to send"]},{"entry":[{},"over the connection"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"Rover may use the more restrictive value for both parameters between its internal default and the values returned in a response.","Example:","Keep-Alive: timeout=10, max=50","Location","In the event of status  (moved temporarily) or  (moved permanently) responses from entry tracking requests, the Location header may be used to send the redirect back to the original client.","Example:","Location: http:\/\/music.listings.ebay.com\/","Set-Cookie","Responses from Mediaplex may send values for the svid and mojo1 cookies. Set-Cookie headers for these cookies, and only these named cookies, may be interpreted to obtain values for these cookies. The values may be stored on behalf of Mediaplex for the external client that initiated the request. If cookies are used to accomplish this, they may be in the publication system-controlled domains. The value for these cookies may be provided when a subsequent request is made as described above.","In general, the \u201cother attributes\u201d of the Set-Cookie header (besides name and value) are ignored. The exception is that an expires=attribute with a date in the past may cause the cookie to be deleted from its publication system-managed storage. The values stored for these cookies may have strict length limits",{"@attributes":{"id":"p-0196","num":"0300"},"tables":{"@attributes":{"id":"TABLE-US-00028","num":"00028"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"147pt","align":"center"}}],"thead":{"row":[{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]},{"entry":[{},"Cookie","Value Length Limit"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"147pt","align":"char","char":"."}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"svid","20"]},{"entry":[{},"mojo1","100"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}]}}},"Examples:","Set-Cookie: svid=22835128718; . . . other attributes","Set-Cookie: mojo1=xxxxxxxxx; . . . other attributes","Entry Tracking","These types of calls can be for affiliate entry, paid-search entry or natural search entry.","Affiliate Entry","In most cases, a call to an affiliate payment server (e.g. Commission Junction or CJ) is used to properly credit an affiliate for a transaction. This type of call replaces the current affiliate payment server\/advertising server (e.g. CJ\/Mediaplex) redirect chain. That is, where the current scheme begins with a call to:","http:\/\/www.anrdoezrs.net\/click- . . . ?loc= . . . .","and then to","http:\/\/www.apmebf.com\/ . . . .","and then to","http:\/\/www.qksrv.net\/ . . . .","and then to","http:\/\/adfarm.mediaplex.com\/ad\/ck\/ . . . .","The publication system Rover Web Service may make just one call to: http:\/\/adfarm.mediaplex.com\/ad\/ck\/ . . . . with the expectation that the advertising server (e.g. Mediaplex) may internally make a call to an affiliate payment server (e.g. CJ) as necessary. That call may have the following form:","Host: adfarm.mediaplex.com","Port: 80","URI: \/ad\/ck\/rotation-id\n\n","Parms:","AID CJ campaign id\n\n","PID CJ partner id\n\n","mpre target location\n\n","http:\/\/adfarm.mediaplex.com\/ad\/ck\/711-1751-2978-71?\n\n","Status code: 200\n\n","Status code:  or \n\n","Other status codes:\n\n","Note that the response of this command may be different than the existing \/ad\/ck\/ commands; because, it may not be desirable to redirect to the existing RedirectEnter publication system command.","Paid-Search Entry","This type of entry is from clicking on ad placements that lead to the publication system. These types of entries have a form shown in the following example.","Host: adfarm.mediaplex.com","Port: 80","URI: \/ad\/ck\/rotation-id\n\n","Parms:","mpt cache busting string\n\n","http:\/\/adfarm.mediaplex.com\/ad\/ck\/711-30798-1039-12?\n\n","Status code: 200\n\n","Status code:  or \n\n","Other status codes:\n\n","Natural search entry can be detected on any page served by the publication system. JavaScript running on the page accomplishes this. For this use case, the context diagram looks slightly different as shown in .","In this case, the referrer passed may be the URL of the search engine page and not the URL of the page running the detecting JavaScript. This type of entry has the form shown in the following example.","Host: adfarm.mediaplex.com","Port: 80","URI: \/ad\/lt\/rotation-id\n\n","Parameters:","mpt cache busting string\n\n","mpcl landing page\n\n","mpvl search page URL\n\n","http:\/\/adfarm.mediaplex.com\/ad\/lt\/711-13271-9788-0?\n\n","Status code: 200\n\n","Other status codes:\n\n","ROI calls to the advertising server (e.g. Mediaplex) have widely varying parameters for different transaction types. The calls, however, look like the example shown below.","Host: adfarm.mediaplex.com","Port: 80","URI: \/ad\/bk\/rotation-id\n\n","Parameters:","Vary by transaction type.","Example: (Line Breaks for Readability)","http:\/\/adfarm.mediaplex.com\/ad\/bk\/711-518-1801-6?\n\n","Status code: 200\n\n","Other status codes:\n\n","Unlike Natural Search entries, the referring URL from the client is not passed through to the advertising server (e.g. Mediaplex) for ROI events. Also, although the existing ROI events are sent as https:\/\/ requests, the ROI tags sent from Rover would be using the HTTP protocol.",{"@attributes":{"id":"p-0251","num":"0388"},"figref":["FIGS. 11-16","FIG. 11","FIG. 12","FIG. 13","FIG. 14","FIG. 15","FIG. 16"]},{"@attributes":{"id":"p-0252","num":"0389"},"figref":"FIG. 17"},{"@attributes":{"id":"p-0253","num":"0390"},"figref":"FIG. 18","b":"200"},"In alternative embodiments, the machine operates as a standalone device or may be connected (e.g., networked) to other machines. In a networked deployment, the machine may operate in the capacity of a server or a client machine in server-client network environment, or as a peer machine in a peer-to-peer (or distributed) network environment. The machine may be a personal computer (PC), a tablet PC, a set-top box (STB), a Personal Digital Assistant (PDA), a cellular telephone, a web appliance, a network router, switch or bridge, or any machine capable of executing a set of instructions (sequential or otherwise) that specify actions to be taken by that machine. Further, while only a single machine is illustrated, the term \u201cmachine\u201d shall also be taken to include any collection of machines that individually or jointly execute a set (or multiple sets) of instructions to perform any one or more of the methodologies discussed herein.","The example computer system  includes a processor  (e.g., a central processing unit (CPU), a graphics processing unit (GPU) or both), a main memory  and a static memory , which communicate with each other via a bus . The computer system  may further include a video display unit  (e.g., a liquid crystal display (LCD) or a cathode ray tube (CRT)). The computer system  also includes an alphanumeric input device  (e.g., a keyboard), a user interface (UI) navigation device  (e.g., a mouse), a disk drive unit , a signal generation device  (e.g., a speaker) and a network interface device .","The disk drive unit  includes a machine-readable medium  on which is stored one or more sets of instructions and data structures (e.g., software ) embodying or utilized by any one or more of the methodologies or functions described herein. The software  may also reside, completely or at least partially, within the main memory  and\/or within the processor  during execution thereof by the computer system , the main memory  and the processor  also constituting machine-readable media.","The software  may further be transmitted or received over a network  via the network interface device  utilizing any one of a number of well-known transfer protocols (e.g., HTTP).","While the machine-readable medium  is shown in an example embodiment to be a single medium, the term \u201cmachine-readable medium\u201d may be taken to include a single medium or multiple media (e.g., a centralized or distributed database, and\/or associated caches and servers) that store the one or more sets of instructions. The term \u201cmachine-readable medium\u201d shall also be taken to include any medium that is capable of storing, encoding or carrying a set of instructions for execution by the machine and that cause the machine to perform any one or more of the methodologies of the present invention, or that is capable of storing, encoding or carrying data structures utilized by or associated with such a set of instructions. The term \u201cmachine-readable medium\u201d shall accordingly be taken to include, but not be limited to, solid-state memories, optical and magnetic media, and carrier wave signals.","Although an embodiment of the present invention has been described with reference to specific example embodiments, it will be evident that various modifications and changes may be made to these embodiments without departing from the broader spirit and scope of the invention. Accordingly, the specification and drawings are to be regarded in an illustrative rather than a restrictive sense."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Embodiments illustrated by way of example and not limitation in the figures of the accompanying drawings, in which:",{"@attributes":{"id":"p-0008","num":"0007"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 2"},"An architectural overview of an example embodiment is shown in .","A UML (unified modeling language) diagram illustrated in  presents an overview of the Java API in an example embodiment.","A TrackingServiceManager initialization sequence diagram of an example embodiment is illustrated in .","A Tracking partner connection parameter (param) detection sequence diagram of an example embodiment is illustrated in .",{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 10"},"A conventional system for affiliate link entry is shown in .",{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 12"},"A conventional system for paid search entry is shown in .",{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 16"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 17"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 18"}]},"DETDESC":[{},{}]}
