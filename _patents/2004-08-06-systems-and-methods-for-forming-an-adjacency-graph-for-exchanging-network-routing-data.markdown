---
title: Systems and methods for forming an adjacency graph for exchanging network routing data
abstract: A system for exchanging routing information over a communications network constructs a connectivity graph that indicates connectivity between a first node and a first set of nodes in the network. The system constructs an adjacency graph that indicates a second set of nodes with which the first node will exchange routing data, where the adjacency graph is distinct from the connectivity graph. The system exchanges routing data between the first node and each node of the second set of nodes based on the adjacency graph.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07881229&OS=07881229&RS=07881229
owner: Raytheon BBN Technologies Corp.
number: 07881229
owner_city: Cambridge
owner_country: US
publication_date: 20040806
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS REFERENCE TO RELATED APPLICATIONS","RELATED APPLICATION","GOVERNMENT CONTRACT","FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION","Exemplary Network","Exemplary Connectivity Graph","Exemplary Adjacency Graph","Exemplary Router Configuration","Exemplary Adjacency Selection Process","Exemplary Standard Area Router Connectivity Graph Acquisition Process","Exemplary Distance-Based Clustering Adjacency Graph Construction Process","Exemplary Cluster Head Election Process","Exemplary Numeric Ordering Rule Adjacency Formation Process","Exemplary Mobile Leaf Router Adjacency Formation Process","Exemplary Mobile Leaf Router Connectivity Graph Acquisition Process","Exemplary Mobile Leaf Router Affiliation Process","CONCLUSION"],"p":["The instant application claims priority from provisional application No. 60\/493,660, filed Aug. 8, 2003; and provisional application No. 60\/550,316, filed Mar. 8, 2004; the disclosures of which are incorporated herein by reference in their entireties.","The present application is related to U.S. patent application Ser. No. 09\/546,052, entitled \u201cRadio Network Routing Apparatus,\u201d and filed Apr. 10, 2000, the disclosure of which is incorporated herein by reference in its entirety.","The present application is further related to U.S. patent application Ser. No. 10\/752,988, entitled \u201cSystems and Methods for Constructing a Virtual Model of a Multi-Hop, Multi-Access Network,\u201d and filed Jan. 7, 2004, the disclosure of which is incorporated herein by reference in its entirety.","The present application is also related to U.S. patent application Ser. No. 10\/797,030, entitled \u201cSystems and Methods for Synchronizing Multiple Copies of a Database Using Database Digests,\u201d and filed Mar. 11, 2004, the disclosure of which is incorporated herein by reference in its entirety.","The U.S. Government has a paid-up license in this invention and the right in limited circumstances to require the patent owner to license others on reasonable terms as provided for by the terms of Contract No. DAAB-07-02-C-C403 awarded by the United States Army.","Implementations consistent with the principles of the invention relate generally to digital communications networks and, more particularly, to systems and methods for selecting a set of adjacencies to be used for exchanging routing data in digital communications networks.","Existing wired communications networks, such as, for example, the Internet, use various algorithms for disseminating routing data necessary for routing packets from a source node to a destination node. Each node of the network that handles packets needs sufficient knowledge of the network topology such that it can choose the right output interface through which to forward received packets. Link state routing algorithms, such as the Open Shortest Path First (OSPF) algorithm, permit the construction of a network topology such that any given node in the network may make packet-forwarding decisions. OSPF is defined by Internet RFC 2328, STD 54, and related documents, published by the Internet Society. OSPF is also defined by Internet RFC 2740, and related documents, also published by the Internet Society.","OSPF has conventionally been implemented in wired point-to-point or multi-access (Ethernet like) networks. It may also be highly desirable to implement OSPF over a multi-hop, multi-access packet radio network with its own private, internal routing system (such as a MANET, or \u201cMobile Ad-hoc NETwork\u201d), so as to permit seamless integration of such a network into an OSPF environment, and to achieve strict compatibility between that packet radio network and standard COTS (Commercial Off-The-Shelf) routers outside that network. This can be achieved either by implementing OSPF at a higher layer over the multi-hop, multi-access packet radio network on top of that network's private, internal routing system, or by implementing both routing systems in parallel at the same network layer. In such a scheme, OSPF would be responsible for routing between the packet radio network and external hosts or networks, while the packet radio network's internal routing system would handle routing of packets within the packet radio network. Similar schemes are commonly used to implement OSPF over, for example, an X.25 packet switched network or an ATM packet network, and are well-known to practitioners of the art.","However, a number of difficulties may arise if OSPF is implemented over a multi-hop, multi-access packet radio network with its own private, internal routing system. Although the private, internal routing system of such a network may enable it to appear to OSPF much like a wired network, the properties and characteristics of such radio networks are nevertheless very different from those of wired point-to-point or multi-access networks. Like an Ethernet, such radio networks link together a large number of routers; and also like an Ethernet, such networks typically provide a suite of unicast, multicast, and netwide broadcast services. However, unlike an Ethernet, such networks possess internal structure of their own. On one hand, both unicast and multicast packets containing routing data may need to be relayed across the network by multiple lower-layer hops in accordance with the network's private routing scheme, and replicated many times in the process. On the other hand, there exist possibilities for spatial reuse in a multi-hop radio network that do not exist on an Ethernet. Consequently, the standard OSPF mechanisms for distribution of routing data may not be appropriate.","Even worse, the structure of the radio network may fluctuate and, hence, the cost of transporting routing information may be constantly changing due to radio mobility, interference, fading, and other causes. Furthermore, the capacity and reliability of such networks is typically much lower than for an Ethernet, and delays much longer; capacity is limited by the available radio bandwidth, reliability is reduced by increased risks of collisions, interface, noise, and fading, and by the possibility of transient routing inconsistencies at the lower layer; and delay is increased by the multi-hop relaying at the intranet layer.","Furthermore, the need to replicate packets within such a network for either unicast or multicast forwarding may introduce or exacerbate problems involved in scaling to networks with large numbers of nodes, especially large numbers of OSPF routers. This is especially unfortunate, as certain applications may require thousands of OSPF routers on such a network.","In particular, the adoption of the standard OSPF multi-access network \u201cdesignated router\u201d model for distribution of routing information over a multi-hop routing network is inappropriate. While the distribution of routing information from the \u201cdesignated router\u201d to other routers on the network via multicast can be made reasonably efficient, each routing advertisement must still be acknowledged back to the designated router by unicast. This, in turn, would result in an implosion of routing acknowledgements in the vicinity of the designated router that preclude scaling to large networks by exploiting spatial reuse.","Likewise, the adoption of the alternative standard OSPF point-to-multipoint network model for distribution of routing information over a multi-hop routing network is equally inappropriate. The links employed by a point-to-multipoint model to represent the radio network are likely to be several radio hops in length, and so their use to distribute routing information would often require packet replication and\/or result in transmitting duplicate information over a single radio link. Furthermore, the network of links needed by a point-to-multipoint model to represent the radio network may be much more dense than required for distribution of routing information. Finally, this network of links may be constantly changing in response to the need for accurate representation of the radio network, and so may not be sufficiently stable for effective use in distributing routing information.","On the other hand, it is highly desirable to retain the basic OSPF model of reliable flooding, especially when large quantities of external, rarely-changing routing data must be carried across the radio network.","Therefore, there exists a need for systems and methods that can resolve some of the inherent problems that exist with distributing OSPF routing information across a multi-hop, multi-access packet radio network, while maintaining full compatibility with standard OSPF over other networks and preserving the basic OSPF model of reliable flooding.","In accordance with one aspect consistent with the principles of the invention, a method of exchanging routing data is provided. The method may include constructing a connectivity graph that indicates connectivity between a first node and a first set of nodes in a network. The method may further include constructing an adjacency graph that indicates a second set of nodes with which the first node will exchange routing data, where the adjacency graph may be distinct from the connectivity graph. The method may also include exchanging routing data between the first node and each node of the second set of nodes based on the adjacency graph.","In accordance with another aspect consistent with the principles of the invention, a method of selecting nodes from a group of nodes for exchanging routing data is provided. The method may include acquiring a connectivity graph that indicates connectivity between a first node and a first set of nodes in a network and selecting a second set of nodes from the first set of nodes, where the second set of nodes is a subset of the first set of nodes. The method may further include exchanging routing data between the first node and each node of the selected second set of nodes.","In accordance with yet another aspect consistent with the principles of the invention, a method of selecting adjacent nodes for the exchange of routing data is provided. The method may include acquiring a connectivity graph that indicates connectivity between a first node and a group of other nodes, where node identifying ordinal numbers are associated with each of the first node and the group of other nodes. The method may further include searching the connectivity graph to locate a second node within a distance of Cfrom the first node that belongs to the same Open Shortest Path First (OSPF) area and that has at least one of a highest or lowest ordinal number within that search distance. The method may also include exchanging routing data with the second node if the second node exists and is located within the distance of C.","In accordance with yet a further aspect consistent with the principles of the invention, a method of selecting adjacent nodes for the exchange of routing data in a network is provided. The method may include acquiring a connectivity graph that indicates connectivity between multiple routers and electing one or more nodes from the connectivity graph as a head of a cluster of a set of routers of the multiple routers. The method may further include forming, for every router of the connectivity graph that is not a cluster head, an adjacency with a next hop router along a shortest path to a closest cluster head and selecting one or more routers as adjacency connectors between each of the clusters of routers.","In accordance with another aspect consistent with the principles of the invention, a method of selecting adjacent nodes for the exchange of routing data is provided. The method may include acquiring a connectivity graph that indicates connectivity between multiple nodes. The method may further include determining an area-specific connectivity graph by eliminating from the connectivity graph all nodes that are inactive, external, or do not belong to the current Open Shortest Path First (OSPF) area. The method may also include determining a shortest-path spanning tree of the connectivity graph, where the shortest-path spanning tree comprises a set of nodes of the multiple nodes. The method may additionally include exchanging routing data between each of the nodes of the set of nodes of the shortest-path spanning tree.","The following detailed description of the invention refers to the accompanying drawings. The same reference numbers in different drawings may identify the same or similar elements. Also, the following detailed description does not limit the invention. Instead, the scope of the invention is defined by the appended claims and their equivalents.","Systems and methods, consistent with the present invention, modify the basic OSPF adjacency graph construction algorithm to optimize it for use over a multi-hop, multi-access packet radio network, while maintaining compatibility with standard OSPF over other networks and preserving the basic OSPF model for reliable flooding of routing information.",{"@attributes":{"id":"p-0041","num":"0040"},"figref":"FIG. 1","b":["100","100","105","110","1","110","115","1","115","105","110","100"]},"Sub-network  may include multiple routers - through -M and - through -N for routing data through sub-network . Routers - through -M and - through -N may be interconnected via various links. Mobile leaf routers - through -M may route data between sub-network  and mobile leaf sub-networks - and -M, respectively. Routers - through -M and - through -N may be stationary, semi-stationary, or mobile network nodes. Mobile leaf networks - through -M may include networks, such as, for example, local area networks, that are mobile, i.e., whose connectivity to sub-network  may change over time.","Network  may be divided into multiple OSPF areas, thus, introducing an element of hierarchical routing. For example, sub-network  of  may be assigned to a single standard area, and mobile leaf networks - through -M may each be assigned to different mobile leaf areas. In some implementations, sub-network  may itself be split among multiple standard OSPF areas (where a standard area is an OSPF area as defined in RFC 2328).","Typically, it may not be necessary for every router to be part of a standard OSPF area. Those routers that interconnect sub-network  with external networks in such a way that sub-network  may be intended to serve as an alternative transit network to those external networks, or the external network(s) may be intended to serve as an alternative transit network to sub-network , may need to be configured into a OSPF standard area.","Those routers that need not be part of a standard OSPF area may often be configured as \u201cmobile leaf\u201d routers instead. Mobile leaf routers, together with the networks  behind them, constitute \u201cmobile leaf\u201d areas. Mobile leaf areas may optimize the commonly occurring situation in which a router serves as a single gateway to a set of wired networks. Each mobile leaf area may include this router, known as a \u201cmobile leaf router,\u201d together with a set of networks behind it. The mobile leaf router may form an access point between the mobile leaf networks behind it, and sub-network . Mobile leaf areas may be mobile, that is, the area including the mobile leaf router and the networks behind it may move around as a whole. As an area moves, its mobile leaf router may dynamically affiliate with one or another standard area router that becomes its border router. Thus, unlike standard OSPF areas whose border routers are manually configured, the border router for a mobile leaf area may be selected dynamically and may change as the mobile leaf router changes its location. These dynamically selected area border routers may be referred to hereinafter as \u201cparent\u201d routers.","A standard area may serve a different role in routing data as compared to mobile leaf areas. A standard area may need to be connected, but mobile leaf areas may not need to be. If a standard area partitions, it may, for example, not be healed by routes through mobile leaf areas. However, if a mobile leaf area with two or more mobile leaf routers partitions, it can be healed by routes through a standard area.","It will be appreciated that the number of routers and mobile leaf networks illustrated in  is provided for explanatory purposes only. A typical network may include more or fewer routers and mobile leaf networks than are illustrated in . Additionally, the various links between the routers of network  are shown by way of example only. More, fewer, or entirely different links may connect the various routers of network . There may be one or more other networks filling the role of sub-network  in network . In addition, network  may contain other sub-networks (not shown) outside of sub-network .",{"@attributes":{"id":"p-0048","num":"0047"},"figref":"FIG. 2","b":["200","105","115","120","200","200","115","120","105","200","115","120","105","105"],"sub":["1","2","3"]},{"@attributes":{"id":"p-0049","num":"0048"},"figref":"FIG. 3","b":["300","300","115","120","200","200","200","300","200"]},"To reduce flooding overhead, the average local degree at each vertex of adjacency graph  should be limited, where the average local degree is the average of the adjacency-graph degree of the vertex at which it is computed and of every other vertex to which that vertex is directly linked in the connectivity graph. Adjacency graph , thus, may approximate a sub-graph of minimal degree of connectivity graph . Each router in sub-network  may have several one-hop neighboring routers, but each router need not form an adjacency with each of the neighboring routers. Instead, each router may only form adjacencies with a selected subset of its neighbors, as long as the graph that results from the cooperative action of the routers in sub-network  is connected. After forming adjacencies with selected neighboring routers, each router  or  may exchange routing information with these adjacent neighbors using a flooding protocol.",{"@attributes":{"id":"p-0051","num":"0050"},"figref":"FIG. 4","b":["115","120","115","120","105","105"]},"As illustrated, router \/ may include multiple input interfaces - through -R, a switch fabric , and multiple output interfaces ---S. Each input interface  of router \/ may further include routing tables and forwarding tables (not shown). Through the routing tables, each input interface  may consolidate routing information learned from the routing protocols of the network. From this routing information, the routing protocol process may determine the active route to network destinations, and install these routes in the forwarding tables. Each input interface  may consult a respective forwarding table when determining a next destination for incoming packets. This consultation may involve a two-step process. For instance, certain input interface  may first consult a forwarding table constructed by OSPF to determine the desired exit point from network , and then a second forwarding table constructed by the private internal routing protocol of network  to determine the actual next destination.","In response to consulting a respective forwarding table, each input interface  may either set up switch fabric  to deliver a packet to its appropriate output interface , or attach information to the packet (e.g., output interface number) to allow switch fabric  to deliver the packet to the appropriate output interface . Each output interface  may queue packets received from switch fabric  and transmit the packets on to a \u201cnext hop.\u201d",{"@attributes":{"id":"p-0054","num":"0053"},"figref":["FIG. 5","FIG. 2"],"b":["120","105","505","200","105","120","105","120","120","120","105"]},"Each standard area router  may then construct an area-specific connectivity graph [act ]. The area-specific connectivity graph may be constructed from the overall connectivity graph for sub-network  by eliminating routers that do not belong to the same area and compensating for that by adding additional links and\/or adjusting costs of existing links. A router may determine which other routers belong to its area, based upon the IP address of the other router's interface onto sub-network , as each area may be assigned a distinct address range. Mobile leaf routers may be identified in the same way, and may not belong to any standard area. In one exemplary vertex elimination technique, routers that lie external to the area to which the current router belongs may be eliminated from the connectivity graph. First, the set of vertices adjacent to the vertex to be eliminated may be eliminated and all edges leading to it can be deleted from the graph. New edges may then be inserted connecting all vertices to which the deleted vertex had previously been adjacent, and assigning costs equal to the sum of the costs along the two edges which a new edge replaces. This process may be repeated until all such vertices have been eliminated.","An adjacency graph may then be constructed [act ].  illustrates an exemplary adjacency graph  consistent with one implementation of the invention. The constructed adjacency graph may include a set of neighboring nodes with which router  may attempt to form adjacencies and exchange routing advertisements. A separate adjacency graph may be constructed for each standard area in network . The adjacency graph may be distinct from the connectivity graph and may also be distinct from the advertised model of the network employed for routing purposes, described in co-pending U.S. patent application Ser. No. 10\/752,988, entitled \u201cSystems and Methods for Constructing a Virtual Model of a Multi-Hop, Multi-Access Network.\u201d","A number of exemplary techniques may be used for constructing an adjacency graph. In one implementation, for example, the adjacency graph may be identical to the area-specific connectivity graph, e.g., every edge in the area-specific connectivity graph becomes an adjacency. The area-specific connectivity graph may be built from the connectivity graph by eliminating routers that do not belong to the standard area in question using a vertex elimination technique as described in paragraph [0054]. This generalizes the adjacency selection method described in co-pending U.S. patent application Ser. No. 09\/546,052, entitled \u201cRadio Network Routing Apparatus,\u201d to the case where the network is split among multiple OSPF areas.","In another implementation, a spanning tree of the area-specific connectivity graph may be employed as the adjacency graph. For example, a shortest-path spanning tree may be rooted at a selected router. The root may be selected as the lowest numbered, or highest numbered, router in the area-specific connectivity graph. Each other router may then establish an adjacency to the next router on its shortest path through the area-specific connectivity graph to the selected root.","In a further exemplary implementation, a technique that uses a shortest-path forest with an expanding ring search may be employed to construct the adjacency graph. This exemplary technique is further described below with respect to . This exemplary technique creates a spanning forest, with each tree in the forest comprising a shortest-path tree. Each of the shortest-path trees can then be linked together to form a tree rooted at the lowest or highest numbered router in sub-network .","In yet another exemplary implementation, a hierarchical distance-based clustering technique may be employed to construct the adjacency graph. This exemplary technique is further described below with respect to . This exemplary technique imposes a hierarchical clustered structure on the connectivity graph to construct the adjacency graph.","In yet another exemplary implementation, a simple ordering rule may be employed to construct the adjacency graph. For instance, each router may select any one lower-numbered neighbor in the area-specific connectivity graph with which to form an adjacency. This suffices to ensure that the adjacency graph will form a tree of the area-specific connectivity graph rooted at the lowest-numbered router in network . Alternatively, it may select any one higher-numbered neighbor, producing a tree rooted at the highest-numbered router. Alternatively again, it may select any one lower-numbered neighbor and any one higher-numbered neighbor, thus forming two overlapping trees rooted respectively at the lowest-numbered and highest-numbered router. For maximum efficiency, the router should initially select the closest lower (higher) numbered neighbor as the neighbor with which to form the adjacency. If distances change, it may either retain the original adjacency, or reapply the above rule to select a different lower (higher) numbered neighbor as the neighbor with which to form the adjacency. This exemplary technique is further described below with respect to .","Subsequent to construction of the adjacency graph, adjacencies may then be established with the selected set of neighboring routers [act ]. Establishment of adjacencies may include the synchronization of routing databases between router  and each of the selected set of neighboring routers. Synchronization of routing databases may be performed using the standard OSPF mechanisms described in RFC 2328=STD 54. Alternatively, synchronization of routing databases may include the \u201cdatabase digest\u201d technique described in co-pending U.S. patent application Ser. No. 10\/797,030, entitled \u201cSystems and Methods for Synchronizing Multiple Copies of a Database Using Database Digests.\u201d Other routing database synchronization techniques, however, may alternatively be employed. Routing advertisements may be exchanged via the established adjacencies [act ]. The routing advertisements may include routing information that can be used by each of the receiving routers for routing data to appropriate destinations.","A determination may be made whether one or more specified events have occurred [act ]. The specified events may include, for example, changes to the connectivity graph that may occur when simulated HELLO messages are monitored. If one or more specified events have occurred, the exemplary process may return to act  to re-fresh the connectivity graph and\/or the adjacency graph. For example, if changes to the connectivity graph are noted, then router  may re-initiate acts -. If one or more of the specified events have not occurred, then it may be determined whether a periodic re-fresh is needed [act ]. For example, acts - may be re-initiated on a periodic basis (i.e., a periodic \u201crefresh\u201d). If it is not time for a periodic re-fresh, the exemplary process may return to act . If it is time for a periodic re-fresh, then the exemplary process may return to act .",{"@attributes":{"id":"p-0064","num":"0063"},"figref":["FIG. 6","FIG. 6","FIG. 5"],"b":["120","105","505"]},"The exemplary process may begin with the receipt of simulated HELLO messages [act ]. Simulated HELLO messages may be generated by a private routing protocol internal to sub-network  and may include, for example, data specifying the type of node represented by the simulated HELLO, the lower layer address of the node's interface onto sub-network , and a cost of the remote node from router . A private routing protocol may generate a simulated HELLO message representing each router  in sub-network  every HELLOINTERVAL seconds, where HELLOINTERVAL is a parameter that specifies an exact periodic interval for sending the HELLO messages. HELLOINTERVAL need not be the same for every router and may change dynamically. Alternatively, the private routing protocol may generate a simulated HELLO message representing a router  in sub-network  in response to some event, such as receipt of a routing update through the private routing protocol.","A lower layer address contained in each received simulated HELLO message may be translated into a corresponding Internet Protocol (IP) address [act ]. This translation may be performed by a mechanism, such as, for example, Ethernet address resolution protocol (ARP). The OSPF Router ID corresponding to each such address in the current area may then be determined [act ]. The OSPF Router ID associated with each router  in sub-network  that may be included in the connectivity graph may be determined from OSPF link-state advertisement packets, database description packets, link-state request packets, or other OSPF protocol packets received at a respective router . EXEMPLARY STANDARD AREA ROUTER AREA-SPECIFIC CONNECTIVITY GRAPH CONSTRUCTION PROCESS",{"@attributes":{"id":"p-0067","num":"0066"},"figref":["FIG. 7","FIG. 7","FIG. 5"],"b":["120","510"]},"The exemplary process may begin with the identification of the routers that belong to router 's local area(s) by their IP addresses [act ]. Each area may correspond to a distinct address range, which may be defined by a static configuration table. A standard area router may look up the IP address of another router's interface on sub-network  to determine the area to which it is assigned. Likewise, all mobile leaf routers may be assigned to a distinct address range. A given router may also belong to two or more areas. In such a case, it may have two or more IP addresses assigned to its interface onto sub-network , one in each area.","Routers not belonging to the local area(s) may be eliminated from the connectivity graph to construct an area-specific connectivity graph [act ]. In particular, inactive, area-external nodes, and mobile leaf routers do not belong to any OSPF area and so may be eliminated from the connectivity graph. Routers identified by a flag in their simulated HELLO messages as being not active may be eliminated from the connectivity graph. Additionally, routers belonging to a different area, and mobile leaf routers, may be eliminated from the connectivity graph (i.e., a network graph that includes vertices at each router and edges between each vertex). Routers may be eliminated from the connectivity graph by first considering a set of all the vertices adjacent to the vertex to be eliminated (i.e., the vertex corresponding to the router to be eliminated). The vertex to be eliminated and all edges leading to it may be deleted from the graph. Then, new edges may be inserted connecting all vertices to which the deleted vertex had previously been adjacent, and assigned costs equal to the sum of the costs along the two edges that it replaces. This process may be repeated until all such vertices have been eliminated. EXEMPLARY SHORTEST-PATH FOREST, WITH EXPANDING RING SEARCH, ADJACENCY GRAPH CONSTRUCTION PROCESS",{"@attributes":{"id":"p-0070","num":"0069"},"figref":["FIG. 8","FIG. 8","FIG. 5","FIG. 8"],"b":["120","105","515","105"]},"The exemplary process may begin with the location of a lowest numbered router within a search distance of C that belongs to the same OSPF area as router  [act ].  illustrates an area-specific connectivity graph , with the router identification (ID) numbers, associated with each router  or , identified. A determination may then be made whether the lowest numbered router within the search distance C is located [act ]. Initially, for example, C may be equal to a value C. If a lowest numbered router within the search distance of C is not located, then the search distance C may be increased [act ], and the exemplary process may return to act . C, with a value equal to C, for example, may be increased to a value C. Acts - may be iteratively repeated until a lowest numbered router within the search distance C is located, or until the search distance C encompasses the entire connectivity graph.  illustrates an adjacency graph , corresponding to the connectivity graph of , after completion of an initial search distance C(i.e., completion of a first \u201cring\u201d). As shown in , each router has formed an adjacency with the lowest-numbered router with a distance of C(e.g., one hop in this example). Adjacency graph , at this stage, includes a disconnected spanning forest, with shortest-path trees rooted at router ID numbers , , ,  and .","If a lower-numbered router with distance C cannot be found, then router  may include the root of one of the trees of a spanning forest. If the lowest numbered router within the search distance C is located, then an adjacency may be formed with the located router [act ]. The adjacency formed with the located router may span a link that is more than one hop in length.  illustrates an adjacency graph , corresponding to the connectivity graph of , after completion of a search through the entire connectivity graph. In , those routers that could not find a lower-numbered router in their vicinity have expanded their search distance to two hops, and formed an adjacency with the lowest-numbered router within that distance. As shown in , the only router that could not find a lower-numbered router within two hops is router ID . Router ID  continues to expand its search distance until the distance encompasses the entire connectivity graph. At that point, router ID  can find no lower-numbered router than itself, and the process terminates at router ID , with router ID  as a root of the spanning tree.","The exemplary process above results in a tree rooted at the lowest-numbered router in sub-network  and including every node in sub-network . In other implementations, the spanning tree may be rooted at the highest-numbered router. Alternatively, any well-defined ordering of the routers (e.g., an ordering obtained by permuting the bits in the router IDs) may be used. Furthermore, two or more orderings could be employed in parallel to create an adjacency graph that was better connected.",{"@attributes":{"id":"p-0074","num":"0073"},"figref":["FIG. 10","FIG. 10","FIG. 5","FIG. 10"],"b":["120","105","515"]},"The exemplary process may begin with the election of one or more routers from the area-specific connectivity graph as a \u201ccluster head\u201d [act ]. Each \u201ccluster head\u201d may serve as a root, or \u201chead,\u201d for a cluster of other routers in sub-network . A number of techniques may be used for electing one or more routers as a cluster head, including the exemplary process described below with respect to .  illustrates an exemplary connectivity graph  in which routers - and - have been elected as cluster heads (CHs)  and , respectively.","Every router that is not a cluster head may then form an adjacency with a \u201cnext hop\u201d router along the shortest path to the closest cluster head [act ]. One or more routers may then be selected as adjacency connectors between clusters [act ]. In one implementation, the cluster heads themselves may be selected as the adjacency connectors. In another implementation, each router builds a list of cluster heads in its vicinity. For each pair of clusters, it builds a list of intermediate routers (including itself) between its cluster head, and each of the other cluster heads. Each router may then compute the path length through each of the cluster heads. The direct path, linking the two cluster heads directly, may be included if it exists. Each router then orders the list by distance. If the router itself is one of the intermediate routers, then it establishes a second adjacency between itself and the first hop towards the second cluster head.",{"@attributes":{"id":"p-0077","num":"0076"},"figref":["FIG. 14B","FIG. 14A","FIG. 14B"],"b":"1415"},{"@attributes":{"id":"p-0078","num":"0077"},"figref":["FIGS. 11-13","FIG. 10","FIGS. 11-13","FIG. 10"],"b":["120","1005"]},"The exemplary process may begin with a determination whether router  is eligible to become a cluster head (CH) [act ]. Routers may be assigned a priority for election as a cluster head. For example, two special priority values may be reserved: never (=0) and always (=255). A router assigned a priority of never may never be eligible for election as a cluster head. A router assigned a priority of always may always elect itself as a cluster head. Priority values between never and always indicate that the router may be chosen as a cluster head, with the priority indicated. If router  is not eligible to become a cluster head, then the exemplary process may continue at act  below. If router  is eligible to become a cluster head, then router  may determine if any other CHs are located within a distance of spacing-max of router  and have a higher priority [act ]. Router  can determine what other routers are cluster heads, and their priority, from beacons that those cluster heads broadcast or multicast using facilities provided by the internal routing protocol private to network ; and it can determine its distance from those cluster heads from the connectivity graph. spacing-max may include a value indicating a maximum distance CHs should be apart. For example, spacing-max may equal 3 hops in some implementations. If other CHs are located within a distance of spacing-max of router  and have a higher priority, the exemplary process may continue at act  below. If no other CHs are located within a distance of spacing-max of router , or don't have a higher priority, then a determination may be made whether conditions in acts  and  have persisted for a random time period [act ]. If not, the exemplary process may continue at act  below. If so, then router  may be elected as a cluster head [act ]. While it is a cluster head, router  may periodically broadcast beacons identifying itself as such to all other routers in network , using broadcast or multicast mechanisms provided by the private routing protocol internal to network . These beacons identify it as a cluster head, and specify its priority. Alternatively, if the private routing protocol provides a reliable broadcast or multicast mechanism, then router  may send only a single non-repeated beacon identifying itself as a cluster head and specifying its priority.","Once it has been elected as a cluster head, router  may determine whether another CH, with higher priority, is located within a distance of spacing-min of router  [act , ]. spacing-min may include a value indicating a minimum distance CHs should be apart. For example, spacing-min may equal 2 hops in some implementations. Router  can determine what other routers in its vicinity in sub-network  have declared themselves to be cluster heads from the beacons broadcast, or multicast, by each cluster head to its neighbors through mechanisms provided by the internal routing protocol private to sub-network , and router  can determine what routers in its vicinity have declared themselves to be cluster heads, by monitoring these beacons. If another CH, with higher priority, is not located within a distance of spacing-min of router , router  may determine whether another CH is located within a distance of spacing-min with a same priority and a higher network address [act ]. If not, the exemplary process may return to act . If router  determines that either another CH is located within a distance of spacing-min of router  and has a higher priority, or another CH is located within a distance of spacing-min of router  with a same priority and a higher address, then router  may determine whether resigning as a cluster head will force another router to elect itself as a cluster head [act ]. If not, router  may resign as a cluster head [act ] and the exemplary process may continue at act . If router  determines that resigning as a cluster head will force another router to elect itself as a cluster head, then router  may not resign as a cluster head and the exemplary process may return to act .","If any of the three conditions of acts ,  or  above were not met, then router  may affiliate with a closest cluster head router [act , ]. Router  may determine which routers are cluster heads from the beacons that they have broadcast to other routers in network . Router  may determine the closest cluster head router from information contained in the connectivity graph constructed by simulated HELLOs from the private, internal routing protocol of network . This distance information may be modified, for example, by other configured information so as to establish a preference for affiliation with particular routers. Router  may affiliate with a cluster head router by forming an adjacency with the \u201cnext hop\u201d router along the shortest path to the cluster head. It may then use that adjacency for the exchange of routing information.","While it is affiliated with a cluster head, router  may intermittently check to see if it should reaffiliate with a different cluster head, or promote itself to the status of cluster head. It may do so either periodically, or in response to some event, such as a change in the topology of network  as reported via simulated HELLO messages and represented by a change in the connectivity graph. To do so, router  may determine whether it is eligible to become a cluster head [act ]. If so, router  may determine whether any other CHs are within a distance of spacing-max of router  with a higher priority [act ]. If not, then router  may determine whether the conditions of acts  and  have persisted for a random time period [act ]. If the conditions have persisted for the random time period, then router  should promote itself to cluster head and the exemplary process may continue at act . If not, the exemplary process may continue at act .","Returning to act , if router  determines that other CHs are within a distance of spacing-max of router  with a higher priority, router  may check to see if it should reaffiliate with one of these other CHs. To prevent bouncing back and forth among different CHs, router  should not reaffiliate simply because it is now closer to some other CH, but rather should apply a hysteresis check. To do so, router  may monitor distances between itself and every other cluster head router in its vicinity, as reflected by the connectivity graph [act ], over time. For example, let cbe router 's cost to the icluster head router, and c be the cost to router 's current cluster head router (both c and cmay change with time). The time-integral of the advantage (C) of switching to a different cluster head router may be computed by the following relation, where the limits of integration (not shown) include an appropriate time interval (e.g., tto t):\n\n=\u222bmax((()\u2212())\u2003\u2003Eqn. (1)\n\nRouter  may then re-affiliate with another cluster head based on the monitored distances [act ]. For example, if Cexceeds a configurable threshold value, then router  may re-affiliate with the corresponding cluster head, which is now closest. These costs cmay be adjusted, for example, by configurable values, so as to create a preference for router  to affiliate with particular cluster head routers.\n",{"@attributes":{"id":"p-0084","num":"0083"},"figref":["FIG. 15","FIG. 15","FIG. 5","FIG. 15"],"b":["120","105","515"]},"The exemplary process may begin with the assignment of an ordinal number to router  [act ]. Each router  in sub-network  may also be assigned an ordinal number to establish an ordered relationship among the routers. This ordinal number may be a router identification number, an address of the router, or any other convenient value, as long as it is unique for each router and leads to an ordering of the routers in sub-network . A neighbor of router , with a lower ordinal number and within the same OSPF area, may be selected [act ]. Selection of a neighbor with a lower ordinal number may ensure creation of a tree rooted at the lowest numbered router in network . In one implementation, the closest lower-numbered router may be chosen for maximum efficiency in the distribution of routing information. Router  may then establish an adjacency with this neighbor [act ]. Establishment of an adjacency with the neighbor may include the synchronization of routing databases between router  and the neighbor. Synchronization of routing databases may be performed using the standard OSPF mechanisms described in RFC 2328=STD 54. Alternatively, synchronization of routing databases may include the \u201cdatabase digest\u201d technique described in co-pending U.S. patent application Ser. No. 10\/797,030, entitled \u201cSystems and Methods for Synchronizing Multiple Copies of a Database Using Database Digests.\u201d Other routing database synchronization techniques, however, may alternatively be employed.","After establishing an adjacency with its lower-numbered neighbor, router  may monitor the distance to each of its neighbors as specified in the connectivity graph [act ]. If router  determines that some other lower-numbered neighbor has become closer, it may select the closer lower-numbered neighbor as the neighbor with which to form an adjacency [act ]. It need not form this adjacency with the now closer lower-numbered neighbor immediately, as the adjacency graph is guaranteed to be connected regardless of the lower-numbered neighbor chosen; but it should switch eventually, in order to maximize efficiency. For this reason, it should determine if hysteresis conditions are satisfied to further determine when to switch to the closer lower-numbered neighbor [act ]. For instance, a hysteresis test similar to that of Eqn. 1 above may be applied. When router  decides to switch, it may teardown the adjacency that is no longer needed [act ] and form a new adjacency with the now closer lower-numbered neighbor [act ].","As will be appreciated, the same technique could be applied using the higher-numbered neighbor instead. Indeed, the same technique could be applied using both the lower-numbered and higher-numbered neighbor, so that every router (except the highest and lowest numbered) would always form at least two adjacencies: one with a higher-numbered neighbor, and one with a lower-numbered neighbor.",{"@attributes":{"id":"p-0088","num":"0087"},"figref":"FIG. 16","b":["115","100"]},"The exemplary process may begin with the acquisition of a connectivity graph by the mobile leaf router  [act ]. The connectivity graph may be constructed from simulated HELLO messages that are received from an internal routing protocol private to network . These simulated HELLO messages may inform the mobile leaf router  as to the set of other routers in network , their distance from router , and their set of one-hop neighbors and distance to each. From these simulated HELLO messages, router  can determine its own set of one-hop neighbors, and whether or not it has bi-directional connectivity to each such neighbor. From the simulated HELLO messages, router  may construct a graph representing the connectivity with at least a set of other routers in network .","Router  may then affiliate with a standard area router (i.e., the \u201cparent\u201d router) to form an adjacency [act ]. Initially, mobile leaf router  may affiliate with a closest standard area router. As mobile leaf router  moves around, it may re-affiliate as needed to maintain a reasonably short path length between itself and its parent router. Mobile leaf router  may affiliate with any standard area router, regardless of whether or not it is an OSPF \u201cdesignated router.\u201d The parent router may serve as a border router between the standard area and the area whose sole member in sub-network  is the mobile leaf router .","Mobile leaf router  may exchange routing advertisements with the standard area router (i.e., the \u201cparent\u201d router) [act ]. The routing information exchanged on the adjacency may include: a) a link-state advertisement generated by the parent router announcing its interface onto sub-network ; b) a summary route advertisement or external route advertisement generated by the parent router advertising a default route to networks external to sub-network ; c) a link-state advertisement generated by mobile leaf router  advertising its interfaces, including its interface onto sub-network ; and d) link-state advertisements for router(s) behind mobile leaf router  in the mobile leaf area. The \u201cparent\u201d router may convert the latter two into a summary route advertisement or external router advertisement describing the mobile leaf area which can then be advertised into the standard area.","A determination may be made whether one or more specified events have occurred [act ]. Router  may, for example, monitor simulated HELLO messages looking for changes to the connectivity graph. If one or more specified events have occurred, then the exemplary process may return to act  to re-fresh the connectivity graph . For example, if changes to the connectivity graph are noted, then mobile leaf router  may re-initiate acts -. If one or more of the specified events have not occurred, then a determination may be whether it is time for a periodic re-fresh [act ]. For example, acts - may be re-initiated on a periodic basis (i.e., a periodic \u201cre-fresh\u201d). If it is not time for the periodic re-fresh, then the exemplary process may return to act . If it is time for a periodic re-fresh, then the exemplary process may return to act .",{"@attributes":{"id":"p-0093","num":"0092"},"figref":["FIG. 17","FIG. 17","FIG. 16"],"b":["115","100","1605"]},"The exemplary process may begin with the receipt of simulated HELLO messages [act ]. Simulated HELLO messages may be generated by a private routing protocol internal to sub-network  and may include, for example, data specifying the type of node represented by the simulated HELLO message, the lower layer address of the node's interface onto sub-network  and a cost of the remote node from router . A private routing protocol may generate a simulated HELLO message representing each router  in sub-network  every HELLOINTERVAL seconds, where HELLOINTERVAL is a parameter that specifies an exact periodic interval for sending the HELLO messages.","HELLOINTERVAL need not be the same for every router and may change dynamically. Alternatively, the private routing protocol may generate a simulated HELLO message representing a router  in sub-network  in response to some event, such as receipt of a routing update through the private routing protocol.","A lower layer address contained in each received simulated HELLO message may be translated into a corresponding Internet Protocol (IP) address [act ]. This translation may be performed by a mechanism, such as, for example, Ethernet ARP. OSPF Router IDs may be determined [act ]. An OSPF Router ID, associated with each router \/ in sub-network , may be determined from OSPF link-state advertisement packets, database description packets, link-state request packets, or other OSPF protocol packets received from a respective router \/.","Inactive and other mobile leaf routers may be eliminated from the connectivity graph [act ]. Routers identified by a flag in their simulated HELLO messages as being not active may be eliminated from the connectivity graph. Additionally, other mobile leaf routers may be eliminated from the connectivity graph. These may be identified, for example, by their IP addresses. Routers may be eliminated from the connectivity graph by first considering a set of all the vertices adjacent to the vertex to be eliminated. The vertex to be eliminated and all edges leading to it may be deleted from the graph. Then, new edges may be inserted connecting all vertices to which the deleted vertex had previously been adjacent, and assigned costs equal to the sum of the costs along the two edges that it replaces. This process may be repeated until all such vertices have been eliminated.",{"@attributes":{"id":"p-0098","num":"0097"},"figref":["FIG. 18","FIG. 18","FIG. 16"],"b":["115","120","100","1610"]},"The exemplary process may begin with mobile leaf router  affiliating with a closest standard area router  [act ]. Mobile leaf router  may determine the standard area router  with which to affiliate from information contained in the connectivity graph constructed from the simulated HELLO messages received from the private, internal routing protocol of sub-network . The distances determined from the connectivity graph may be modified, for example, by configured values so as to establish a preference for affiliation with certain routers. Mobile leaf router  may then continue to monitor distances between itself and every standard area router  in mobile leaf router's vicinity, as reflected by the connectivity graph, to determine whether or not it should reaffiliate with a different parent router [act ]. To avoid bouncing between one parent router and another, it should not reaffiliate just because some other potential parent router has become closer, but instead apply, for example, a hysteresis check. For example, let cbe router 's cost to the ineighboring router, and c be the cost to router 's current affiliated router (both c and cmay change with time). The time-integral of the advantage (Cadvaniage) of affiliating with a different router may be computed by Eqn. (1) above. Mobile leaf router  may then re-affiliate with another standard area router based on the monitored distances [act ]. For example, if Cexceeds a configurable threshold value, then mobile leaf router  may re-affiliate with a corresponding router, which is now closest.","The foregoing description of preferred embodiments of the present invention provides illustration and description, but is not intended to be exhaustive or to limit the invention to the precise form disclosed. Modifications and variations are possible in light of the above teachings or may be acquired from practice of the invention. For example, while this invention is described herein in terms of its applicability to a packet radio network, it will be appreciated, that the actual physical means of communication employed by that network may vary. It may include wired, radio, sonar, optical, microwave, and other physical means of communication. Likewise, while the invention is described in terms of integrating a packet radio network into an overall OSPF routing environment, the actual routing protocol into which the packet radio network is to be integrated may vary. It may include variants and future derivatives of OSPF, other link-state routing protocols, hybrids, and variants thereof, which may form components of the IPv4 protocol suite, the IPv6 protocol suite, the OSI protocol suite, other networking suites, or may stand independently.","While series of acts have been described with regard to , - and -, the order of the acts may be modified in other implementations consistent with the principles of the invention. Also, non-dependent acts may be performed in parallel. No element, act, or instruction used in the description of the present application should be construed as critical or essential to the invention unless explicitly described as such. Also, as used herein, the article \u201ca\u201d is intended to include one or more items. Where only one item is intended, the term \u201cone\u201d or similar language is used. The phrase \u201cbased on\u201d is intended to mean \u201cbased, at least in part, on\u201d unless explicitly stated otherwise.","As one skilled in the art will appreciate, the exemplary processes of , - and - can be implemented in logic, such as, for example, combinational logic, within each router  or  of network . Furthermore, the exemplary processes of , - and - can be implemented in software and stored on a computer-readable memory, such as Random Access Memory (RAM) or Read Only Memory (ROM), associated with each router  or  of network . Additionally, the exemplary processes of , - and - may be implemented in any combination of software or hardware.","The scope of the invention is defined by the following claims and their equivalents."],"GOVINT":[{},{}],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The accompanying drawings, which are incorporated in and constitute a part of this specification, illustrate exemplary embodiments of the invention and, together with the description, explain the invention. In the drawings,",{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":["FIG. 2","FIG. 1"]},{"@attributes":{"id":"p-0025","num":"0024"},"figref":["FIG. 3","FIG. 2"]},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":["FIG. 5","FIG. 1"]},{"@attributes":{"id":"p-0028","num":"0027"},"figref":["FIG. 6","FIG. 1"]},{"@attributes":{"id":"p-0029","num":"0028"},"figref":["FIG. 7","FIG. 1"]},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":["FIGS. 9A-9C","FIG. 8"]},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0033","num":"0032"},"figref":["FIGS. 11-13","FIG. 10"],"b":"1005"},{"@attributes":{"id":"p-0034","num":"0033"},"figref":["FIGS. 14A and 14B","FIG. 10"]},{"@attributes":{"id":"p-0035","num":"0034"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0036","num":"0035"},"figref":["FIG. 16","FIG. 1"],"b":"105"},{"@attributes":{"id":"p-0037","num":"0036"},"figref":["FIG. 17","FIG. 16"],"b":"1605"},{"@attributes":{"id":"p-0038","num":"0037"},"figref":["FIG. 18","FIG. 16"],"b":"1610"}]},"DETDESC":[{},{}]}
