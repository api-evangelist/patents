---
title: Apparatus and method for supporting analog fax calls in a tandem configuration
abstract: Apparatus and methods for supporting analog fax calls between two wireless subscriber stations in a tandem configuration are presented herein. To support the tandem configuration, full duplex communication may be established between the two base stations. Full duplex communication may be realized by incorporating an echo canceler in the base station, or by utilizing both BFSK channels of the V.21 fax system for communication. The tandem configuration may also be supported by advanced flag synchronization, wherein a second base station will immediately start sending preamble flags to a first base station after a message is transmitted from the first base station to the second base station. The first base station may then synchronize its receiver for immediate receipt of the return message from the second base station.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07072079&OS=07072079&RS=07072079
owner: 
number: 07072079
owner_city: 
owner_country: 
publication_date: 20040806
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CLAIM OF PRIORITY UNDER 35 U.S.C. \u00a7120","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS"],"p":["This application is a continuation of application Ser. No. 09\/900,250, filed Jul. 6, 2001 now U.S. Pat. No. 6,819,454, entitled \u201cApparatus and Method for Supporting Analog Fax Calls in a Tandem Configuration\u201d which is a continuation of application Ser. No. 09\/629,121, filed Jul. 31, 2000, now U.S. Pat. No. 6,281,988, entitled \u201cApparatus and Method for Supporting Analog Fax Calls in a Tandem Configuration,\u201d which is a continuation of application Ser. No. 08\/956,178, now U.S. Pat. No. 6,115,142, filed Oct. 22, 1997, entitled \u201cApparatus and Method for Supporting Analog Fax Calls in a Tandem Configuration.\u201d","I. Field of the Invention","The present invention relates to data communications. More particularly, the present invention relates to an apparatus and method for supporting analog fax calls between two wireless subscriber stations in a tandem configuration.","II. Description of the Related Art","In a fax communication system, two fax machines generally communicate with each other through a standard public switched telephone network (PSTN) channel. A digital communication system or satellite link may be incorporated within the fax system to extend the range of coverage, allow mobility for the communicating devices, and increase interconnectivity between different communicating devices. An exemplary digital communication system which can be used in conjunction with a fax communication system is a terrestrial wireless system or a satellite communication system.","In wireless mobile and wireless local loop networks, a tandem configuration is established when calls from one wireless subscriber to another wireless subscriber are routed through the PSTN. A fax machine may be connected to each of the wireless subscribers. In this configuration, the base station is generally unaware that it is communicating with another base station across the PSTN.","The tandem configuration may be necessary for several reasons. First the base station communicating with one subscriber may not be aware that the other subscriber is also a wireless subscriber. Thus, the second base station is necessary for providing a link to the other subscriber. Also, two base stations may be necessary because the two wireless subscribers may not be located in the same coverage area of any one base station. Further, for billing purposes, the call should pass through the PSTN, which contains the billing center.","Although necessary for connecting two wireless subscribers, tandem configurations cause degradation in performance. For voice calls, voice quality is degraded due to the multiple encoding and decoding which occurs as the speech signal is passed from the subscriber unit to the base station to the receiving base station and the receiving subscriber unit. For fax calls, the processing between the two base stations degrades performance by adding errors and delays.","When two fax machines communicate directly through a standard PSTN channel, channel quality and delay characteristics are well known and manageable. However, in a tandem configuration, processing delays result from the large amount of digital signal processing and from transmission delays. Further delays are incurred as the base stations combine or multiplex signals from many communicating devices into a common transmission signal. The resultant overall delay can be both intolerably long and unpredictable.","The source of the delay and the problems associated with the delay will be better appreciated through an understanding of the processing associated with a fax call. For a standard Group 3 fax communication system, the timing and synchronization between fax machines conform to behavior as specified in \u201cITU-T Recommendation T.30: Procedures for Document Facsimile Transmission in the General Switched Telephone Network,\u201d hereinafter referred to as the T.30 fax protocol, and incorporated by reference herein. The T.30 fax protocol uses a number of modulation techniques for transmission of forward message data. In particular, parameter negotiation and handshaking between fax machines is accomplished using the modulation technique specified in \u201cCCITT Recommendation V.21: 300 bps Duplex Modem Standard for use in the General Switched Telephone Network (GSTN)\u201d hereinafter referred to as V.21, and also incorporated by reference herein. The handshaking establishes the proper mode of communications between the fax machines.","For a T.30 fax system, V.21 messages are sent between a calling fax machine and a called fax machine in establishing a call. A calling fax machine initiates a call by dialing the called fax machine and sending a calling tone (CNG). The called fax machine detects the incoming call and sends a called station identification tone (CED) back to the calling fax machine. The called fax machine then sends its digital identification signal (DIS) to the calling fax machine to inform the calling fax machine of its capabilities. Upon detection of the DIS signal, the calling fax machine sends a digital command signal (DCS) to inform the called fax machine of the capabilities the calling fax machine plans to use.","Other messages in addition to the above described initiation signals also take place between the fax machines during a call. For example, training signals, information messages, and termination messages are also part of a typical fax call.","According to T.30, whenever a fax sends a V.21 message, it must first send a preamble having a one second duration. The preamble consists of a series of V.21 flags. The preamble is used to inform the receiver that a message is to be sent, and allows the receiver to synchronize correctly so that the actual message may be properly received.","Although necessary for synchronization, the preamble delays the message for at least one second. A tandem configuration further contributes to the delay. Both the preamble and the message must be transmitted over the PSTN link, and the additional processing delay associated with the transmission may result in an unacceptably long delay. Furthermore, the additional delay may result in a prematurely dropped call.","The delay due to the tandem configuration may also cause a message collision to occur. A message collision occurs when a message and a response are being transmitted at the same time. The T.30 fax protocol specifies the sequence and format of the messages, such as the CNG, CED, DIS, and DCS messages, that are transmitted. To accommodate unfavorable channel conditions, the T.30 protocol requires that certain unanswered messages from a source fax machine be repeated. A source fax machine may refer to either the calling or the called fax machine. After a source fax machine sends a message to the destination fax machine, the source fax machine expects a response from the destination fax machine within a specified period of time. If no response is received after the specified period of time, the source fax machine retransmits the message. The retransmissions continue until a response from the destination fax machine is received or an excessive number of attempts have been made.","According to the T.30 fax protocol, the repetition interval for a fax machine operating in automatic mode is 3.0 sec \u25a1 0.45 sec. This means that a fax machine conforming to the T.30 fax protocol should not retransmit a message within 2.55 sec of the prior message. Thus, no collision will occur if such a fax machine receives a response within the shortest repetition interval of 2.55 sec.","However, long transmission delays in the communication channel can cause message collisions. In one scenario, the source fax machine sends a message to the receiving fax machine, and because of transmission delays, the destination fax machine may not respond right away. The transmission delay may be due to the extra time needed for the base station to communicate with the fax machine over-the-air. Since the source fax machine does not receive the response in time, it retransmits the message. The source fax machine will retransmit the message approximately every three seconds. In the meantime, the destination fax machine may respond. If the response from the destination fax machine arrives at the same time the source fax machine is retransmitting the message, a message collision results and the response will not be received by the source fax machine. The message collision may ultimately result in the fax machines dropping the call.","The lengthy delays and the potential for message collisions in a tandem configuration need to be addressed for fax machines to function reliably in a network involving more than just the PSTN. These problems and deficiencies are solved by the present invention in the manner described below.","The present invention is an apparatus and method for supporting analog fax calls between wireless subscriber stations in a tandem configuration. A tandem configuration arises when each wireless subscriber communicates with a base station, thus requiring processing via two base stations. In a tandem configuration, delays are incurred due to the over-the-air processing and the transmission of signals between the two base stations over the PSTN. The present invention determines the existence of a tandem configuration, and establishes a more efficient communication protocol between the two base stations upon detection of a tandem configuration.","In accordance with the present invention, a message generator in a first base station generates a message to identify itself as a base station. A non-standard facilities (NSF) message, normally used for advertising facilities specific to a fax manufacturer, may be used for this purpose. The message is transmitted, and if received by a second base station, will serve as an indication to the second base station that a tandem configuration exists. The second base station may then transmit a return message, which, when received by the first base station, will inform the first base station that a tandem configuration exists. The return message may be a non-standard facilities setup (NSS) message.","Upon detection of a tandem configuration, a faster communication protocol may be established to reduce the delays. In one embodiment, the two base stations may set up a full duplex communication channel. Generally, fax machines operate in the half duplex mode, where a fax machine is either receiving or transmitting messages, but not both. Setting up full duplex communication between two base stations would reduce the delays in the tandem configuration. Full duplex communication may be achieved by incorporating echo cancelers into the base station modems. The base stations may be set up to listen to incoming messages while also transmitting. Full duplex communication may also be achieved by utilizing alternate channels for transmission in opposite directions. Although the V.21 protocol provides for two channels, standard T.30 V.21 messages are sent only on channel . Full duplex communication may be achieved by allowing one base station to transmit on one channel, and allowing the second base station to transmit on the second channel.","In another embodiment, delays may be reduced by providing for advanced flag synchronization. Under the T.30 protocol, a preamble of one second is sent before each message. The preamble comprises a series of V.21 flags. According to current procedures, after a message is transmitted from a first base station to a second base station, the second base station relays the message to the fax machine, and waits for the fax machine to respond. When the fax machine responds with a reply message (preceded by a preamble), the second base station in turn transmits the reply message (preceded by a preamble) to the first base station.","The present invention recognizes that tandem delays may be reduced by having the second base station start transmitting the preamble immediately after receiving a message, rather than having the second base station wait for the response from the fax machine. Thus, if the second base station recognizes the received message and determines that a response is expected, it immediately starts transmitting V.21 flags to the first base station. Although a reply message from the fax machine is not yet available, a flag generator within the second base station generates the flags which are transmitted by the second base station. The reply message from the fax machine is relayed by the second base station when the message is available. This way, the first base station may begin synchronizing its V.21 receiver much earlier, reducing the delay. Furthermore, the first base station will not repeat transmission of its message, as required by T.30. Under T.30, a message is repeatedly transmitted until a response is received. By not repeating the message, the first base station eliminates the possibility of a collision.","A typical fax communication system is illustrated in . In this fax communication system, fax machine A  communicates with fax machine B  through public switched telephone network (PSTN) . The communication channels connecting fax machine A  and fax machine B  with PSTN  are generally standard RJ-11 interfaces. The characteristics and delays of the RJ-11 interfaces and PSTN  are well defined and accounted for in the T.30 fax protocol.","A wireless communication system may be incorporated into a fax communication system. An exemplary fax system which makes use of wireless communications is illustrated in . In , fax machine A  communicates with wireless subscriber unit A , typically through an RJ-11 interface. Wireless subscriber unit A  may be a mobile telephone or some other wireless subscriber equipment such as a Fixed Wireless Terminal (FWT). Wireless subscriber units, including mobile telephones and FWTs are often referred to as Wireless Access Subscriber Units (WASU). Wireless subscriber unit A  communicates with base station A  through an over-the-air communication channel. The over-the-air channel may be a terrestrial wireless link or a satellite link. In a wireless system, signals may be modulated in accordance with formats such as Code Division Multiple Access (CDMA), Time Division Multiple Access (TDMA), or Frequency Division Multiple Access (FDMA). In the exemplary embodiment, a CDMA modulation format is used as described in U.S. Pat. No. 4,901,307, entitled \u201cSPREAD SPECTRUM MULTIPLE ACCESS COMMUNICATION SYSTEM USING SATELLITE OR TERRESTRIAL REPEATERS,\u201d which is assigned to the assignee of the present invention and incorporated by reference herein.","Base station A  is the cell site for the cell in which wireless subscriber unit A  is located. For purposes of the present invention, base station A  receives the over-the-air signal from wireless subscriber unit A , processes and remodulates the signal, and sends the data to PSTN . Base station A  also relays messages from PSTN  to wireless subscriber unit A . A standard T1\/E1 line or any other similar transmission medium connects base station A  and PSTN .","In turn, PSTN  communicates with base station B  via a transmission medium such as a T1\/E1 line. Base station B  is the cell site for the cell in which wireless subscriber unit B  is located. Base station B  and wireless subscriber unit B  communicate via an over-the-air communication channel such as a terrestrial wireless link or a satellite link. Wireless subscriber unit B  and fax machine B  are linked, typically by an RJ-11 interface.","Due to the processing between wireless subscriber unit A  and base station A ; base station A  and base station B  through the PSTN ; and wireless subscriber unit B  and base station B , degradation in performance is experienced through the introduction of errors and delays. The present invention is concerned with reducing these delays.","The configuration shown in  is known as a tandem configuration. In a tandem configuration, over-the-air processing and transmission delays result in performance degradation. Furthermore, fax communication protocols between base stations connected through the PSTN can introduce more delays. The present invention detects the existence of a tandem call, then uses this information to set up a faster communication protocol between the base stations.","In a preferred embodiment, the base stations detect a tandem configuration using the processing elements shown in . The base stations detect the tandem configuration using in-band signaling. In-band signaling refers to transmission of data and messages that are directly related to the fax call, as opposed to out-of-band signaling which relates to transmission of data and messages that are not directly related to the fax call. Referring to , message processors and determine the existence of the tandem configuration by evaluating the in-band signaling.","As discussed above, certain messages are sent between the calling and called fax machines during a fax call set up. The calling fax machine sends a CNG message to the called fax machine, which responds with a CED message. The called fax machine also sends a DIS message to the calling fax machine to identify its capabilities. In addition to the DIS, the called fax machine may send a non-standard facilities (NSF) message to the calling fax machine before sending the DIS. The NSF is a T.30 message used by fax machines to advertise non-standard facilities specific to a manufacturer. If the calling fax machine recognizes the NSF, it may respond with a non-standard facilities setup (NSS) message. If the calling fax machine does not recognize the NSF, a DCS message will be sent. The NSF and NSS messages are generally used to identify and communicate non-standard information between two fax machines of the same manufacturer to facilitate processing. When it is known that the fax machines are of the same manufacturer, special features of the fax machines may be activated.","Instead of utilizing the NSF and NSS messages to identify non-standard facilities, the present invention recognizes that these messages may be utilized by the base stations to determine the existence of a tandem configuration. Referring to  with reference to , the detection of tandem configuration will be explained with fax machine A  being the calling fax machine, base station A  being the calling base station, fax machine B  being the called fax machine, and base station B  being the called base station.","Fax machine A  initiates a call by sending a CNG message to fax machine B . Fax machine B  responds by sending a CED message to fax machine A . The messages are sent via wireless subscriber units  and , base stations  and , and PSTN . Fax machine B  then sends a DIS message, and may also send an optional NSF message. Generally, the optional NSF message is sent before the DIS message. The messages are transmitted over-the-air by wireless subscriber unit B  and received by base station B . Base station B  transmits a special NSF message to base station A  via PSTN  followed by the DIS message. After base station A  receives the special NSF message, it will recognize that it is speaking to a base station, and that a tandem condition exists. Base station A  may then inform base station B  of the tandem condition by sending a special NSS message instead of a DCS.","If a tandem configuration does not exist, the called base station will still send a special NSF through the PSTN. However, on the other side of the PSTN will be a standard fax machine, not a calling base station. In this case, the standard fax machine will not recognize the special NSF from the base station, and will not respond with a special NSS. Instead, the standard fax machine will use the capabilities advertised in the standard DIS message to select parameters for the call.","In a preferred embodiment, base stations  and  process the special NSF and special NSS messages using message processors and shown in . At base station B , transceiver receives a DIS message that has been sent by fax machine B . Transceiver may or may not receive an NSF message from fax machine B  in addition. In either case, upon recognizing that a DIS message has been received, controller causes message generator to generate a special NSF message. Controller then causes transceiver to transmit both the special NSF message generated by message generator and the DIS message. The special NSF and DIS messages are transmitted to base station A  via PSTN .","At base station A , transceiver receives the special NSF and DIS messages. Upon recognizing the special NSF message, controller is informed that a tandem configuration exists, and will enable a faster communication protocol between the base stations. Controller causes transceiver to transmit the DIS message to fax machine A . Fax machine A  will then respond with a DCS message and this will be sent through wireless subscriber unit A  to transceiver . Controller then directs message generator to use the information in the DCS message to generate an appropriate special NSS message. Controller also directs transceiver to transmit the special NSS message to base station B  via PSTN .","At base station B , transceiver receives the special NSS message, and upon recognizing the special NSS message, controller is informed of the tandem configuration and enables a faster communication protocol between the base stations. Controller also directs message generator to extract the appropriate DCS information from the special NSS message and generate a corresponding DCS message. Controller will then direct transceiver to send the DCS message to fax machine B  through wireless subscriber unit . The operation of flag generators and will be explained later.","It should be understood that the various processing blocks of the message processors and shown in  may be configured in a digital signal processor (DSP) or an application specific integrated circuit (ASIC). The description of the functionality of the present invention would enable one of ordinary skill to implement the present invention in a DSP or an ASIC without undue experimentation.","In the embodiment just described, the special NSF and special NSS messages are not used to identify non-standard facilities. Thus, the non-standard facilities functionality may be disabled when the messages are used to identify the existence of a tandem configuration. Alternatively, these messages may be configured to support both the detection of a tandem condition and the identification of non-standard facilities.","In one embodiment, the use of the special NSF and NSS messages for supporting both functions is described by still referring to  with reference to . If fax machine B  transmits an NSF message in addition to a DIS message to base station B , base station B  will generate a special NSF message. Controller will cause message generator to generate the special NSF message, which includes the original NSF message from fax machine B  encapsulated in the body of the special NSF message. The special NSF message will be sent by base station B  to base station A . When base station A  receives the special NSF message, controller will be able to identify the tandem condition, and in addition, will recognize the manufacturer code and other manufacturer specific parameters within the encapsulated message. Message generator of base station A  then extracts the encapsulated NSF information in the special message, and transceiver transmits the extracted message to fax machine A  as an NSF message. Note that the extracted message is the original NSF message that was sent by fax machine B .","If fax machine A  recognizes the NSF message, it may respond with an NSS message which is relayed to base station A  through wireless subscriber unit A . Message generator of base station A  will encapsulate the NSS message in a special NSS message, and the special NSS message will be sent to base station B . Upon receipt of the special NSS message, controller of base station B  will recognize that a tandem condition exists. Additionally, message generator of base station B  will extract the encapsulated NSS message, and transceiver will relay this message to fax machine B  through wireless subscriber unit B . Wireless subscriber unit B  receives the NSS message and will recognize the manufacturer specific parameters within the message, thus making use of the non-standard facilities. Note that the extracted NSS message is the original NSS message sent by fax machine A .","In another embodiment, the functions of detecting a tandem condition and identifying non-standard facilities are both supported by sending a new message in addition to an original NSF or NSS message. Thus, after transceiver of wireless subscriber unit B  receives an NSF message transmitted by fax machine B , message generator of base station B  will generate a special NSF message which consists of a new NSF message followed by the original NSF message. The special NSF message is then sent to base station A . The new NSF message of the special NSF message will serve as an indication to base station A  that a tandem condition exists. The original NSF message, but not the new NSF message, will then transmitted to fax machine A .","If fax machine A  recognizes the special NSF message, it may respond with an NSS message, which is relayed to base station A . Message generator of base station A  then generates a special NSS message which consists of a new NSS message followed by the original NSS message. The special NSS message is transmitted to base station B . Upon receipt of the new NSS message within the special message, controller of base station B  will recognize that a tandem condition exists. Further, the original NSS message will be transmitted to fax machine B , and fax machine B  will recognize the manufacturer specific parameters within the original NSS message. In this fashion, the non-standard facilities functionality is preserved while the special NSF and special NSS messages are also used to identify the existence of a tandem condition.","Referring now to  with reference to , a flow diagram is shown illustrating the messages which are utilized for determining the presence of a tandem configuration. The messages are transmitted between fax machine A  (the calling fax machine), wireless subscriber unit A , base station A , base station B , wireless subscriber unit B , and fax machine B  (the called fax machine). A CNG message is sent from fax machine A  to fax machine B  via wireless subscriber unit A , base station A , base station B , and wireless subscriber unit B . In reply, a CED message is sent from fax machine B  to fax machine A  via wireless subscriber unit B , base station B , base station A , and wireless subscriber unit A .","Fax machine B  also sends a DIS message, and may or may not send an NSF message. The optional NSF message is denoted by the label \u201c(NSF)\u201d in . The optional NSF message and the DIS message are received at base station B . The DIS message is transmitted to base station A . In addition, a special NSF message is transmitted to base station A  whether or not an NSF message is received at base station B . The special NSF message may incorporate the original NSF message transmitted from fax machine B . The special NSF message indicates to base station A  that a tandem condition exists.","After receiving the special NSF and the DIS messages at base station A , the original NSF message is extracted if one had been incorporated into the special NSF message. The extracted NSF message and the DIS message are then sent to fax machine A  via wireless subscriber unit A . If an original NSF message had not been incorporated into the special NSF message, only the DIS message will be transmitted to fax machine A  via wireless subscriber unit A .","In response to the DIS message, fax machine A  will transmit a DCS or an NSS message, as denoted by the label \u201cNSS\/DCS\u201d in . If a DCS message, but not an NSS message, is sent from fax machine A  to base station A , base station A  incorporates this DCS information into a special NSS message and transmits the special message to base station B . The special NSS message indicates to base station B  that a tandem condition exists. When base station B  receives the special NSS message, it extracts the incorporated DCS information and sends the corresponding DCS message to fax machine B .","If an NSS message is sent from fax machine A , base station A  will also transmit a special NSS message to base station B . The special NSS message may incorporate the original NSS information. The special NSS message indicates to base station B  that a tandem condition exists. When base station B  receives the special NSS message, it extracts the original NSS information, and sends the extracted NSS message to fax machine B .","Although the detection of a tandem condition has been described to make use of the NSF and NSS messages, one skilled in the art will recognize that other messages with similar characteristics may also be used for detecting the tandem condition. Other embodiments may use special tones to indicate a tandem condition. For instance, base station B  may send a special tone that does not interfere with the standard V.21 signals. Base station A  will use a special detector that operates in parallel with the standard V.21 demodulator to detect this special tone and thus identify the tandem condition.","Once a tandem call is detected, two base stations may establish a more efficient communication protocol. For example, the base stations may communicate more efficiently by setting up a full duplex link. Generally, fax machines operate in the half duplex mode, wherein messages may be either transmitted or received, but not both, at any particular instant. Thus, fax machines must wait their turns before sending messages between each other. Although this is a simple protocol, it is relatively slow since it often involves waiting for a clear channel. By setting up full duplex communication, messages may be exchanged between the base stations without waiting, and the delay due to the tandem configuration may be reduced.","In one embodiment, full duplex communication may be achieved using echo cancelers in the base stations. This is similar to how full duplex data modems work. The use of echo cancelers to implement full duplex communication is illustrated in . In , the echo cancellation system is illustrated to be an included element of base station A . It should be understood that base station B  comprises a similar echo cancellation system.","Referring to  with reference to , a message from wireless subscriber unit A  is received at transceiver , and sent to message controller . Message controller relays the message to V.21 modulator , which modulates the message in accordance with the V.21 standard for transmission through PSTN  to base station B . The modulated message is also provided to echo canceler . Because PSTN  is an imperfect channel, a signal transmitted from V.21 modulator is passed through echo path , and an echo of the signal may be transmitted back into base station A . If a signal is also being transmitted from base station B , the echo will be summed with the signal from base station B  at summer , producing a combined signal. The combined signal is received at base station A . It should be understood that echo path and summer are not included elements of the communication system, but are artifacts of the system and are illustrated for reference purposes only.","The combined signal, received at base station A , is provided to echo canceler and summer . Echo canceler subtracts echoes of the V.21 signal from the combined signal. Using adaptive filtering techniques, echo canceler generates an estimate of the echo, and provides the estimate to summer . At summer , the echo estimate is subtracted from the received signal to provide an echo canceled signal. An exemplary form of echo canceler is disclosed in U.S. Pat. No. 5,307,405, entitled \u201cNETWORK ECHO CANCELLER\u201d, which is assigned to the assignee of the present invention and incorporated by reference herein.","The echo canceled signal is provided to V.21 demodulator . V.21 demodulator demodulates the echo canceled signal into data bits, and the demodulated signal is provided to message controller . Message controller provides the signal to transceiver , which transmits the signal to wireless subscriber unit A .","By incorporating echo canceler in base station A , V.21 modulator may send signals while V.21 demodulator receives signals. Without echo canceler , full duplex communication is not possible because echoes from signals transmitted from V.21 modulator will corrupt signals received by V.21 demodulator . By incorporating echo canceler , echoes of signals transmitted from V.21 modulator are canceled, allowing V.21 demodulator to listen to the signals from base station B  without the distortion from echoes. The echo canceler in base station B  operates in a similar manner. Hence, both base station A  and base station B  are able to send messages to each other simultaneously without message collisions, reducing message delays.","In another embodiment, full duplex communication is realized by making use of alternate channels for transmission in opposite directions. The V.21 fax protocol has provided for two binary frequency shift keying (BFSK) channels, channels  and . For each channel, the transmitter uses one frequency to signal a binary \u20180\u2019 and another frequency to signal a binary \u20181\u2019. Although two channels are provided for, standard T.30 V.21 messages are sent on channel , leaving channel  unused. The two channels can be used simultaneously as long as the receivers are properly tuned to the correct frequencies.","In an exemplary scenario, both base stations (base station A  and base station B  of ) start communications on the conventional V.21 channel, channel . When the called base station receives the NSS, it will recognize that a tandem configuration exists. Furthermore, it will interpret the NSS message as an indication that the calling base station is capable of receiving on channel . Henceforth, the called base station will send out messages on channel  and listen for incoming messages on channel . The calling base station will do the opposite.  illustrates the scenario wherein the calling base station (base station A ) and the called base station (base station B ) communicate using both channel  and channel . Since the messages sent on the different channels will not interfere with each other, the base stations are able to send messages without waiting, thus reducing the delay in the tandem configuration.","After establishing the existence of a tandem configuration, two base stations may also reduce delays by advanced flag synchronization. As previously discussed, the T.30 protocol requires that a one second preamble is sent before an actual message is sent. The preamble consists of a series of V.21 flags. A V.21 flag is a byte whose value is 0\u00d77E. Upon receipt of the flags, the receiving fax is informed that a message is to follow, and synchronizes accordingly so that the message may be properly received.","The problem with the preamble is that it delays the message. The actual message data comes at least a second later. Further delays arise due to the over-the-air processing and transmission in a tandem configuration. In addition, a collision may occur. If the transmitting base station does not receive a response from the receiving base station within 3.0 seconds, the transmitting base station will resend the message every 3.0 seconds. In the meantime, the receiving base station may respond. Since fax machines operate in a half duplex mode, a message collision may occur.","The present invention serves to reduce the delay due to the tandem configuration and also to reduce the possibility of collision due to the delay. Referring back to  with reference to , the base stations may perform advanced flag synchronization to solve the problems of delay and collision. Assume that the existence of a tandem configuration has already been established. Further, assume that fax machine A  is sending a message to fax machine B . The message is transmitted from fax machine A  to base station A , which then sends the message to base station B . The, message is transmitted via PSTN . After the message is received at base station B , if controller recognizes the message and determines that base station A  is expecting a response, controller causes flag generator to immediately start generating V.21 flags. Controller also causes transceiver to immediately start sending these V.21 flags to base station A . Base station B  does not yet have an actual response from fax machine B , but starts sending the flags anyway.","Sending the flags immediately after receipt of the message serves two purposes. First, base station A  is informed that base station B  has received the last message correctly, and therefore base station A  should not repeat the message as required by T.30, thus avoiding a potential collision condition. Second, base station A  may start synchronizing its V.21 receiver as soon as the flags are received, greatly reducing the delay. Base station A  should also not time-out on excessive V.21 flags as is required in the standard T.30 fax protocol. Now, when base station B  has received a response from fax machine B , base station B  can send the message to base station A  without incurring the one second flag delay. Base station B  may send the response right away since it is aware that base station A  will be expecting the response, and that base station A  has already synchronized its receiver.","Referring now to , a flow diagram is shown illustrating some of the processing steps undertaken by base station B  after receipt of a message. The steps illustrated in  are performed by the processing elements of base station B  as described above with reference to .","It should be understood that flag generator of base station A  performs the same function as flag generator of base station B . Thus, upon receipt by transceiver of a message, if controller recognizes the message and determines that base station B  is expecting a response, controller causes flag generator to immediately start generating V.21 flags. Controller also causes transceiver to immediately start sending these V.21 flags to base station B . By sending the flags right away, the present invention reduces the delays and the possibility of collisions due to a tandem configuration.","The previous description of the preferred embodiments is provided to enable any person skilled in the art to make or use the present invention. The various modifications to these embodiments will be readily apparent to those skilled in the art, and the generic principles defined herein may be applied to other embodiments without the use of the inventive faculty. Thus, the present invention is not intended to be limited to the embodiments shown herein but is to be accorded the widest scope consistent with the principles and novel features disclosed herein."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The features, objects, and advantages of the present invention will become more apparent from the detailed description set forth below when taken in conjunction with the drawings in which like reference characters identify correspondingly throughout and wherein:",{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 7"}]},"DETDESC":[{},{}]}
