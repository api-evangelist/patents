---
title: Monitoring and correction of geometric distortion in projected displays
abstract: A technique, and associated system and computer executable program code on a computer readable storage medium, for automatically correcting distortion of a front-projected display under observation by at least one camera. The technique may be employed in a myriad of front-projected display environments, e.g., single or multiple projectors and cameras are used. The technique includes: observing a first image, projected from at least one projector, comprising at least one target distribution of light intensities; for each conglomeration of white pixels of a difference image, compute a bounding box comprising a corresponding conglomeration of pixels in a framebuffer information of the camera, compute a bounding box comprising a corresponding conglomeration of pixels in a framebuffer information of the projector, compute an initial homography matrix, H, mapping pixels of the projector's bounding box to those of the camera's bounding box, optimize the initial homography matrix, compute a central location, (C, C), of the camera's bounding box using the initial homography matrix; and using a plurality of correspondence values comprising the correspondence, compute a corrective transform to aid in the automatic correcting of the display.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07119833&OS=07119833&RS=07119833
owner: University of Kentucky Research Foundation
number: 07119833
owner_city: Lexington
owner_country: US
publication_date: 20031203
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"p":["The applicants hereof filed pending U.S. patent application Ser. No. 10\/315,377 entitled Dynamic Shadow Removal from Front Projection Displays on Dec. 9, 2002; subject matter of application Ser. No. 10\/315,377 and that of the instant application, as well as the pending provisional application to which this application claims benefit, was all commonly-owned by the assignee hereof at the time of invention.","This application claims the benefit of pending U.S. provisional patent application No. 60\/430,575 filed Dec. 3, 2002 for the applicants on behalf of the assignee hereof. The invention disclosed herein was made with United States government support awarded by the following agency: National Science Foundation, under contract number NSF-4-62699. Accordingly, the U.S. Government has certain rights in this invention.","In general, the present invention relates to light projector systems used for information display on a surface. Most, if not all, light projector systems are subject to display distortion, whether caused by perturbations of an electronic and\/or mechanical nature (e.g., vibrations common to most viewing environments, such as ventilation system operation, doors closing, and so on), resulting in display mis-calibration. Here, the continuous monitoring of an active display is done to acquire a model of the display surface while the display is in use. Light-projectors are being explored and used for more-demanding tasks in connection with augmented-reality applications, interactive displays, and groups of projectors employed to collectively render high-resolution immersive environments. The placement of projectors is often constrained by the amount of display distortion that can be tolerated. In order to avoid image distortion, a projector must either be placed so that the optic axis is perpendicular to the display surface plane or the display distortion must be corrected. Tilting a projector in the vertical plane induces a distortion commonly referred to as keystoning. Arbitrary placement of a projector yields an image that is governed by a more general projective distortion. Off-axis placement of light projectors induces significant planar parallax on the display surface. Although commodity solutions exist for removing this distortion, they involve iterative, menu-driven user interaction or physical alignment of the projector, and in either case interrupt the use of the display. User interaction is infeasible in a number of scenarios including mechanically aligned multi-projector displays that are subject to mechanical drift and perturbations; in those cases, projector(s) must be manually reconfigured, often.","More-particularly, the instant invention is directed to a technique and system for continuous rectification of arbitrary off-axis distortions that does not require user monitoring\/interaction by incorporating at least one camera into the display system to function in a novel process to continuously monitor the state of calibration. Of interest, here, is to correct distortions due to the relative positioning of the projector with respect to the display surface. The (one or more) camera(s) automatically detects when the projector's orientation has changed, without requiring explicit fiducial or targets in the world coordinate system. The method runs in concert with interactive display applications and has minimal impact on frame-rate. An initial rectifying transform is recovered automatically by projecting target \u2018points\u2019, or fiducials\/targets of a selected intensity\/brightness distribution, and observing them within a camera. The display is then warped and passively monitored for calibration error and motion of the projector. The technique distinguishes between distortions due to miscalibration and intentional\/desired projector framebuffer changes. A consistency\/correlation\/similarity score is calculated (and optimized) by, first, generating a predicted view based on the current framebuffer contents and correlating this prediction with the camera's captured, or observed, image. This may be accomplished by normalizing a correlation function, whereby an overall consistency measure is derived through randomly sampling points within a small mask of selected size of the predicted view and correlating them with corresponding points over a neighborhood in the observed\/captured image. Poor correlation scores indicate that the projector has moved and re-calibration and geometric correction is required. Calibration consistency measures are sufficiently robust to distinguish small motion of the projector from continuously changing imagery.","As one will readily appreciate in connection with the instant technical disclosure, there are many fundamental distinguishing features of the instant invention from conventional methods. On occasion, the following manuscript authored by the applicants included herewith and labeled ATTACHMENT A (Steele and Jaynes, 2002) is referenced herein: Robert M. {Matt} Steele, and Jaynes, Christopher O., \u201c,\u201d pgs. 1\u20138, Central European Conference on Computer Graphics and Computer Vision, 4\u20138 Feb. 2002; Steele and Jaynes, 2002 is incorporated by reference herein to the extent it provides technical background information, by illustrating the rigorous mathematical and engineering analyses performed by applicants of their unique technique and system.","It is a primary object of this invention to provide a technique, and associated system and computer executable program code on a computer readable storage medium, for automatically correcting distortion of a front-projected display under observation by. at least one camera. The technique of the invention may be employed in a myriad of front-projected display environments, whether single or multiple projectors and cameras are used, and associated features of the system and program code will be accordingly adapted. Shown here by way of example for simplicity, is a projector-camera pair employed according to the invention. As shown and supported, the method includes: observing a first image, projected from at least one projector, comprising at least one target distribution of light intensities; for each conglomeration of white pixels of a difference image, compute a bounding box comprising a corresponding conglomeration of pixels in a framebuffer information of the camera, compute a bounding box comprising a corresponding conglomeration of pixels in a framebuffer information of the projector, compute an initial homography matrix, H, mapping pixels of the projector's bounding box to those of the camera's bounding box, optimize the initial homography matrix, compute a central location, (C, C), of the camera's bounding box using the initial homography matrix; and using a plurality of correspondence values comprising the correspondence, compute a corrective transform to aid in the automatic correcting of the display.","As one will appreciate, there are numerous further patentably distinguishing features of the technique, system and program code of the invention including monitoring of the front-projected display by periodically observing a current image, and so on.","As can and will be appreciated, certain of the many unique features, as well as the further-unique combinations thereof, supported and contemplated hereby within the spirit and scope of this disclosure, may provide a variety of advantages. The advantages of the new features and combinations disclosed hereby will be appreciated, by perusing the instant technical discussion, including drawings, claims, and abstract, in light of drawbacks to traditional devices identified throughout, or as may be uncovered. The unique technique provides design options and versatility to accommodate a wide variety of applications:","(a) Ease of operability\u2014The invention provides an ability to automatically correct distortion\/keystoning experienced by front-projected displays and make associated adjustments without operator intervention, allowing the party presenting the display full opportunity to focus on the presentation material, or in the case of fully-automated presentation\/entertainment, fewer (if any) display distractions will need maintenance operator intervention.","(b) Flexibility of design and use\u2014The technique of the invention can be tailored for use to detect and address a wide variety of distortion\/keystoning experienced by front-projected displays that may affect a display in a wide variety of display environments.","(c) Manufacturability\u2014The unique technique and system of the invention can be tailored to current, as well as those under development or yet-to-be-developed, single and multi-projector-camera projection systems providing a cost-effective means by which systems can be upgraded, or sold initially as a complete package.","In connection with discussing the features in , occasional reference will be made back-and-forth to other of the figures, especially,  which detail core, as well as further unique and distinguishing features of technique of the invention \u2014and further providing a pictorial demonstration of the flexibility of design of applicant's invention. As one can appreciate, the configuration of the simplified projector-camera pair system  in  is suitable for a wide variety of display environments.",{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 1","b":"10","sub":["1","1\u2032","1 ","1 "]},{"@attributes":{"id":"p-0020","num":"0019"},"figref":["FIG. 2","FIG. 1"],"b":["1","2","3","1","2"]},"Calibration of each device within the system engaged in producing the display is critical to detection and a resulting corrective adjustment. Initially, changes due to unexpected radiometric artifacts on the display surface are detected. Predicted imagery is constructed for a specific camera position and color transfer function and compared to captured images. Predicted images ,  () are constructed using the identified position of the camera with respect to each projector as well as a unique color (transfer function) calibration phase applied in a straightforward manner. The features of system  depicted in  are herein referenced in connection with a multi-projector system of the invention, such as that in . Given a camera ( and ) and projector pair, geometric calibration comprises the transformation from pixels in the camera plane (shown within box defined at  and box defined at ) to their corresponding positions in the projectors' frame buffers (depicted within dashed box  are three framebuffers identified as \u2013). Once the homography between each projector and the camera has been recovered, a composition homography can be constructed to relate projector pixels to one another. Each projector projects a grid pattern that is parallel the axes of its own framebuffer. Given the known calibration, a coherent grid can be drawn by all projectors in the respective reference frame of a single projector. Thus, any image (coherent) can be rendered.","While a planar assumption is not a requirement, however, it is used by way of example in the analysis done, here. Presume that the camera devices observe a plane. Preferably, the subpixel location of each matchpoint center in the camera frame may be estimated by fitting a 2D Gaussian function governed by two parameters {mean and variance}, with the distortion parameters being eight independent values of distorting homography. Initially, a bounding box is fit\/constructed around a detectable \u2018blob\u2019 of pixels in the projector framebuffer whose center and size provides the initial estimate of the unknown homography matrix. For this bounding box, let's say that its top is at p+sigma, it's bottom is at p\u2212sigma, its left edge is at p\u2212sigma, and it's right edge is at p+sigma. Note that the projector bounding box has four corners, as does a bounding box calculated for the blob mapped to the camera. One can then list four correspondences, matchpoints, consisting of: [(upper-left corner of projector's bounding box), (upper-left corner of camera's bounding box)]; [(upper-right corner of projector's bounding box), (upper-right corner of camera's bounding box)]; and so on. These four correspondences can be used to compute a homography matrix, call it H for temporary reference, here. Next, take what the projector projected, and warp it through H to build a predicted view of what the camera should have seen. All ten parameters are then optimized so as to minimize the sum of the squared distances between the observed blob pixels and the distorted Gaussian predicted by unknown parameters. This technique has provided very good subpixel estimates, with simulated data, accurate to within \u02dc0.25 pixels. The resulting subpixel camera coordinates is then stored with its matching projector pixel p.",{"@attributes":{"id":"p-0023","num":"0022"},"figref":["FIG. 3","FIG. 3","FIG. 1"],"b":["48","47"],"sub":"cp"},"The depiction of the invention in flow-diagram format in  illustrates three main operations of the automatic calibration technique according to the invention identified as follows: Precomputation\/measurement  (a pre-calibration that preferably takes place once a camera is fixed in relation to the projector by suitable means, at \u2018the factory\u2019); Calibration  performed with the camera-projector apparatus on-site, turned on and ready for operation in connection with a static and\/or video\/motion display presentation (and in the case of an on-going presentation\u2014according to the outer loop \u2014a \u201cre-calibration\u201d would be performed to correct display that has been perturbed (including lighting changes, shift in projector position, perhaps occlusions in front of the display, and so on); and Verify Calibration  where a preferably random sample of the framebuffer is taken to continuously monitor display for a perturbation requiring a re-calibration (this lower loop  might be referred to as \u201cdisplay-sense\u201d loop illustrating the component of the invention that provides on-going monitoring until a display presentation is ended).","To begin, a summary of certain features of a basic-core technique for computing matchpoints, follows:\n\n","In connection with step 3. outlined above, note that a \u201cpoint\u201d target is projected at some preselected location of the projector's framebuffer. Preferably according to the invention, the target\/fiducial takes the form of a projected white, filled-in circle, or Guassian distribution of light intensities, comprising a white center that fades into darker shades of gray the further one moves from the white center, until the surrounding region is solid black (resulting in a blurred, filled-in circle)\u2014the intensity (brightness, or whiteness) of this fiducial being governed by the following expression:\n\n\u2212((x\u2212p)+(y\u2212p))\/sigma\n\n(x, y)=\n\nThis expression defines circularly symmetric two-dimensional Gaussians\u2014or, blurred circles\u2014of a preselected size, where \u201csigma\u201d, the variance, is a value set such that the blurred circular targets are of the selected size (by way of example only, sigma can be set between \u02dc5 and 15 pixels).\n","Referring to step 8., an alternative to that outlined above, includes the following: While a rectangle (bounding box) can be computed around the identified conglomeration (blob) of white pixels, the center of which, (C, C) is used as an estimate of where the camera saw the \u201cpoint\u201d projected, such a bounding box can also be constructed for the largest conglomeration (blob) of white pixels in the projector framebuffer. For this bounding box, let's say that its top is at p+sigma, it's bottom is at p\u2212sigma, its left edge is at p\u2212sigma, and it's right edge is at p+sigma. Note that the projector bounding box has four corners, as does the bounding box drawn\/calculated for the blob in the camera. One can then list four correspondences, consisting of: [(upper-left corner of projector's bounding box), (upper-left corner of camera's bounding box)]; [(upper-right corner of projector's bounding box), (upper-right corner of camera's bounding box)]; and so on. These four correspondences can be used to compute a homography matrix, call it H[NOTE: The goal is to compute a homography, while His a rough estimate of it, as used here, His simply an intermediate step to help compute a matchpoint, later on]. Next, for example, one can evaluate a normalized cross correlation\u2014an image \u201csimilarity\/correlation score\u201d that is well-known in image processing and computer vision\u2014on those pixels that fall inside the bounding box computed for the camera. This similarity score, as a function of His maximized: Hhas 8 parameters (here, one can take advantage of the radial symmetry of the Gaussian pattern selected to reduce Hto 7 parameters, to speed up computation); using an iterative multidimensional optimization technique such as MINPACK's lmdif( ) searcher or Numerical Recipes in C API (\u201capplication programming interface\u201d)\u2014both of which are currently distributed, find the Hthat maximizes the similarity score. From this H(using the H output by the search technique), take (C, C)=H(p, p). One can then output the [(p, p), (C, C)], which is the correspondence sought (step 9 above). Applicants have found that, using simulated data with simulated noise, errors produced are consistently below 0.1 pixel, which compares very favorably to the errors using known techniques.",{"@attributes":{"id":"p-0028","num":"0036"},"figref":["FIG. 4","FIGS. 1\u20133","FIG. 3","FIG. 4"],"b":["50","50"],"sub":["temp","x","y"]},"One may further: observe an updated image resulting from projecting the updated projector framebuffer information; using a second homography, C, construct a predicted image of the updated image; and in the event the updated predicted image is not substantially similar to the updated image, compute a new corrective transform. To computing a new corrective transform, one can: (1) observing a current image; (2) for each conglomeration of white pixels of a current difference image, compute a current bounding box comprising a corresponding conglomeration of pixels in a current framebuffer information of the camera, compute a current bounding box comprising a corresponding conglomeration of pixels in a current framebuffer information of the projector, compute a current homography matrix mapping pixels of the projector's current bounding box to those of the camera's current bounding box, optimize the current homography matrix, compute a current central location, (C, C,), of the camera's current bounding box using the current homography matrix; and (3) using a plurality of current correspondence values comprising the current correspondence, compute the new corrective transform. Using the new corrective transform and the set of intrinsic parameters of the camera and the projector, one can compute a current corrective warp; and using the current corrective warp, one ca compute a current updated projector framebuffer information.","The step to optimize the initial homography matrix may include evaluating a normalized similarity score on pixels within the camera's bounding box; and the step of computing a corrective transform may include applying a least squares fit technique. The monitoring the front-projected display can include: periodically observing a current image; and computing a current corrective transform.","A system for automatically correcting distortion of a front-projected display region under observation by a camera, according to the invention can have the following features: the display comprising a projected image from at least one projector, the projected image comprising a first image having at least one target distribution of light intensities, and thereafter, an updated image resulting from projecting a correctively-warped projector framebuffer information; and at least one processor adapted for, for each conglomeration of white pixels of a difference image, (a) computing a bounding box comprising a corresponding conglomeration of pixels in a framebuffer information of the camera, (b) computing a bounding box comprising a corresponding conglomeration of pixels in a framebuffer information of the projector, (c) computing an initial homography matrix, H, mapping pixels of the projector's bounding box to those of the camera's bounding box, (d) optimizing the initial homography matrix, (e) computing a central location, (C, C), of the camera's bounding box using the initial homography matrix, and (e) using a plurality of correspondence values comprising the correspondence, computing a corrective transform and, therefrom, computing a corrective warp for the automatic correcting of the display.","A computer executable program code on a computer readable storage medium for automatically correcting distortion of a front-projected display under observation by a camera, may include the following features: a first program sub-code for observing a first image, projected from at least one projector, comprising at least one target distribution of light intensities; a second program sub-code for: for each conglomeration of white pixels of a difference image, computing a bounding box comprising a corresponding conglomeration of pixels in a framebuffer information of the camera, computing a bounding box comprising a corresponding conglomeration of pixels in a framebuffer information of the projector, computing an initial homography matrix, H, mapping pixels of the projector's bounding box to those of the camera's bounding box, optimizing the initial homography matrix, computing a central location, (C, C), of the camera's bounding box using the initial homography matrix; and a third program sub-code for, using a plurality of correspondence values comprising the correspondence, computing a corrective transform to aid in the automatic correcting of the display. Additionally, a fourth program sub-code can be added for: using the corrective transform and a set of intrinsic parameters of the camera and the projector, computing a corrective warp; and, using the corrective warp, computing an updated projector framebuffer information. And a fifth program sub-code may be added for: observing an updated image resulting from projecting the updated projector framebuffer information; using a second homography, C, constructing a predicted image of the updated image; and in the event the updated predicted image is not substantially similar to the updated image, computing a new corrective transform.","The technique of the invention requires little to, preferably, no user interaction to detect and correct geometric distortion and performs continuous monitoring of the corrected image without interrupting the display. In the event that a projector is moved, the system automatically recalibrates and removes the resulting display distortion. A camera monitors the display by accurately predicting the appearance of the framebuffer from the camera's known position and comparing it to captured images Prior to display use, the intrinsic parameters of the projector and camera are recovered ( ). In addition, the relative rotation between the projector and camera is recovered and fixed throughout the process. This assumption is reasonable because the camera can be rigidly attached to the projector that it is monitoring. Once initial calibration is complete, the system computes a projector to camera transform (a homography for the display geometry discussed here) that is then monitored and updated as necessary. This homography is computed by projecting (box ) known projector a pattern of \u2018points\u2019, or fiducials of a selected shape governed by a known function, and observing their corresponding camera pixels. Additionally a color transfer function is preferably computed which provides a mapping from framebuffer pixel color values to image sensor color values. Both the homography and the color transfer functions govern the predicted appearance of the projector framebuffer as seen from the camera. Predicted images can then be constructed while the display is in use for monitoring and correction of the display. A consistency measure is applied to captured and predicted camera images to determine when calibration is no longer correct.","Given the fixed rotation () between the projector and camera as well as the homography between the two, H, a correcting transform for the display can be computed (as further discussed, below). Subsequent display of the framebuffer is pre-warped according to this transform. As mentioned,  schematically depicts a projector-camera system , having for example, projector P(while only one is shown, additional projectors may be employed, P, P, . . . etc., to contribute to the display region of surface S) and camera C(similarly, while only one is shown, additional cameras may be employed) according to the invention. Although the general monitoring and correction approach is applicable to arbitrary surfaces, for simplicity of discussion and computation herein, a planar surface is presumed. Once calibrated and initially rectified, the system can operate in a \u2018closed-loop\u2019 mode to passively monitor, on an ongoing basis\u2014for example, by performing a comparison at randomly spaced, or regular, intervals ( at \u2013)\u2014the projected images with minimal impact on frame-rate. Projector movement is automatically detected by and large real-time, using a consistency measure, permitting the system to automatically recalibrate selected parameters required to derive a new correcting transform.","Turning again to , the projection function defined by the intrinsic and extrinsic parameters of a projection device, along with the display surface geometry, define a function P that maps the framebuffer f into points on the display surface, P(f) (the image of f under P). This function is effectively a warp that is related to the position of the projector with respect to the display surface, the display surface shape, and intrinsic properties of the projector. This mapping creates keystoning or projective distortions that must be removed in order to produce an image in the world that correctly reflects the contents of the framebuffer. Distortions induced by P can be removed through a transform T that \u2018pre-warps\u2019 in a corrective manner, the framebuffer f into \u00ce prior to projection. Subsequently projected images, P(\u00ce), then, are geometrically correct. Tis determined by observing projected points on the display surface from the camera Cand deriving a set of correspondences (box , ).","Once Thas been computed and the projector framebuffer has been transformed accordingly, it may be desirable to verify that the projected and warped image, P(T(f)), or P(\u00ce), continues to satisfy the original geometric constraints. For example, a user may manually move a projector or calibration may degrade over time due to mechanical drift. If verification is performed, preferably it does not require modification to the framebuffer as the display may be in continuous use. With the projected display actively changing, it is insufficient to simply compute a difference between successive camera images. Therefore, pixels in the framebuffer are correlated to those in the camera through a mapping, C. The relationship C allows the system to predict what it ought to be observing by relating pixels in the current framebuffer, at time t, to their expected locations in a captured image, c.  depicts this situation for the case in which the display surface is planar. Given an initial T and C, a display iteration involves building the contents of a framebuffer, f, (traditional rendering), applying the correcting warp, T(f), to compute a new framebuffer \u00ce, projecting the resulting buffer, P(\u00ce), capturing an image of the display, c, and ultimately comparing c to C(\u00ce).","A calibration consistency measure, S=C(\u00ce)\u00d7c, compares captured images to predicted images based on the current calibration estimate. If S falls below a threshold (for example, 0.9), we assume that the current estimate of T is wrong and the image is no longer being correctly \u2018unwarped\u2019. T is then recomputed by the system automatically and all corresponding warps (P and C) are updated and the system begins re-monitoring the newly corrected display. In addition to the geometric warp C, a transfer function that models the color and intensity change between the devices is estimated. This transfer function, of the form represented in Eqn. 0\u2014and as expressed in Eqn. 10\u2014is applied to points in C(f) to more accurately predict the expected view of the framebuffer from the camera's location.","For example, the transfer function, f(x), Eqn. 0, computes the expected value of channel c in the camera image for a projected value of x. The following expression labeled Eqn. 0 is of the form set forth hereafter and numbered Eqn. 10 for modeling color transfer curves.",{"@attributes":{"id":"p-0039","num":"0047"},"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"msub":{"mi":["f","c"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"x"}},{"mfrac":{"mi":"a","mrow":{"mn":"1","mo":"+","msup":{"mi":"\u2147","mrow":{"mo":"-","mrow":{"mi":"\u03b1","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["x","b"],"mo":"-"}}}}}}},"mo":"+","mi":"k"}],"mo":"="}},{"mrow":{"mo":["(",")"],"mn":"0"}}]}}}},"br":{},"sub":["r","r","g","b"]},"While the technique of the invention is applicable for arbitrary display surface shape(s), the example detailed further below, once again for simplicity, focuses on a planar display surface. For this configuration, C, P and any T required, is each a homography. With these constraints, T can be computed from the intrinsics and relative orientation\/angle of the camera and the projector, along with an extra constraint involving the vector that defines an \u2018upward\u2019 orientation for the image on the wall. T can be written as the homography from the \u2018world\u2019 to the framebuffer, H. Likewise, C, the mapping from framebuffer to the camera's image plane can be written as H. Let Xbe a transform, that maps points in the j frame to points i. Then the following govern the transformations from world to the projector frame and projector to camera frame.\n\n\u2003\u2003(1)\n\n\u2003\u2003(2)\n","Because the camera is fixed to the projector, Ris manually determined in advance through suitable traditional calibration technique(s). Presuming that homographies operate on points in normalized image coordinates, these mappings are determined up to a scale factor by the three-dimensional configuration of the display, as follows:",{"@attributes":{"id":"p-0042","num":"0050"},"maths":{"@attributes":{"id":"MATH-US-00002","num":"00002"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":[{"mtd":[{"mrow":{"msub":{"mi":"H","mrow":{"mi":["p","w"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},"mo":"\u221d","mrow":{"msub":{"mi":"R","mrow":{"mi":["p","w"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},"mo":"+","mfrac":{"mrow":{"msub":{"mi":"t","mrow":{"mi":["p","w"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},"mo":"\u2062","msubsup":{"mi":["n","w","T"]}},"mi":"d"}}}},{"mrow":{"mo":["(",")"],"mn":"3"}}]},{"mtd":[{"mrow":{"msub":{"mi":"H","mrow":{"mi":["c","p"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},"mo":"\u221d","mrow":{"msub":{"mi":"R","mrow":{"mi":["c","p"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},"mo":"+","mfrac":{"mrow":{"msub":{"mi":"t","mrow":{"mi":["c","p"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},"mo":"\u2062","msubsup":{"mi":["n","p","T"]}},"mi":"d"}}}},{"mrow":{"mo":["(",")"],"mn":"4"}}]}]}}},"br":{},"sub":["w ","p "]},{"@attributes":{"id":"p-0043","num":"0051"},"maths":{"@attributes":{"id":"MATH-US-00003","num":"00003"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"msub":{"mi":"H","mrow":{"mi":["p","w"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},"mo":"\u221d","mrow":{"msub":{"mi":"R","mrow":{"mi":["p","w"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},"mo":"+","mrow":{"mo":["[","]"],"mtable":{"mtr":[{"mtd":[{"mn":"0"},{"mn":"0"},{"msub":{"mi":"t","msub":{"mi":["pw","x"]}}}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"msub":{"mi":"t","msub":{"mi":["pw","y"]}}}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"msub":{"mi":"t","msub":{"mi":["wp","z"]}}}]}]}}}}},{"mrow":{"mo":["(",")"],"mn":"5"}}]}}}}},"The display plane's surface normal in projector coordinates, n, defines a rotation which aligns the projector's z-axis with the surface normal of the display plane. This rotation defines a family of homographies that correctly \u2018pre-warps\u2019 the framebuffer. The final pre-warp, T, can then be selected from among these homographies. Eqn. 4 determines n. His estimated from four matchpoints between f and c. Since the rotation between the camera and projector, R, is known (calibrated and fixed during an initial phase), a constant of proportionality for Eqn. 4 can be computed:",{"@attributes":{"id":"p-0045","num":"0053"},"maths":{"@attributes":{"id":"MATH-US-00004","num":"00004"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":{"mrow":{"mi":"\u03bb","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"msub":{"mi":["H","cp"]}},"mo":"-","msub":{"mi":["R","cp"]}},"mo":"=","mfrac":{"mrow":{"msub":{"mi":["t","cp"]},"mo":"\u2062","msubsup":{"mi":["n","p","T"]}},"mi":"d"}}},{"mrow":{"mo":["(",")"],"mn":"6"}}]}}}}},"Since the right hand side of Eqn. 6 is an outer product of two vectors, it has a rank of 1, and yields the following family of equations for \u03bb, corresponding to the non-zero rows and columns of the right hand side:",{"@attributes":{"id":"p-0047","num":"0055"},"maths":{"@attributes":{"id":"MATH-US-00005","num":"00005"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mfrac":[{"mrow":[{"mrow":{"mi":"\u03bb","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"msub":{"mi":"H","msub":{"mi":["cp","ij"]}}},"mo":"-","msub":{"mi":"R","msub":{"mi":["cp","ij"]}}},{"mrow":{"mi":"\u03bb","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"msub":{"mi":"H","msub":{"mi":["cp","il"]}}},"mo":"-","msub":{"mi":"R","msub":{"mi":["cp","il"]}}}]},{"mrow":[{"mrow":{"mi":"\u03bb","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"msub":{"mi":"H","msub":{"mi":["cp","kj"]}}},"mo":"-","msub":{"mi":"R","msub":{"mi":["cp","kj"]}}},{"mrow":{"mi":"\u03bb","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"msub":{"mi":"H","msub":{"mi":["cp","kl"]}}},"mo":"-","msub":{"mi":"R","msub":{"mi":["cp","kl"]}}}]}],"mo":"="}},{"mrow":{"mo":["(",")"],"mn":"7"}}]}}}},"br":{},"sub":["p ","cp ","p","p",{"sub2":"x"},"p",{"sub2":"y"},"p",{"sub2":"="}],"sup":"T "},{"@attributes":{"id":"p-0048","num":"0056"},"maths":{"@attributes":{"id":"MATH-US-00006","num":"00006"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":[{"mtd":[{"mrow":{"mfrac":[{"msub":[{"mi":"n","msub":{"mi":["p","x"]}},{"mi":"n","msub":{"mi":["p","y"]}}]},{"mrow":[{"mrow":{"mi":"\u03bb","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"msub":{"mi":"H","msub":{"mi":["cp","i1"]}}},"mo":"-","msub":{"mi":"R","msub":{"mi":["cp","i1"]}}},{"mrow":{"mi":"\u03bb","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"msub":{"mi":"H","msub":{"mi":["cp","i2"]}}},"mo":"-","msub":{"mi":"R","msub":{"mi":["cp","i2"]}}}]}],"mo":"="}},{"mrow":{"mo":["(",")"],"mn":"8"}}]},{"mtd":[{"mrow":{"mfrac":[{"msub":[{"mi":"n","msub":{"mi":["p","x"]}},{"mi":"n","msub":{"mi":["p","z"]}}]},{"mrow":[{"mrow":{"mi":"\u03bb","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"msub":{"mi":"H","msub":{"mi":["cp","i1"]}}},"mo":"-","msub":{"mi":"R","msub":{"mi":["cp","i1"]}}},{"mrow":{"mi":"\u03bb","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"msub":{"mi":"H","msub":{"mi":["cp","i3"]}}},"mo":"-","msub":{"mi":"R","msub":{"mi":["cp","i3"]}}}]}],"mo":"="}},{"mrow":{"mo":["(",")"],"mn":"9"}}]}]}}},"br":{},"sub":["p ","pw","p "]},"Column 1 of Ris defined to be the component of the projector's x-axis that is perpendicular to n. Thus, the warped and projected image P(\u00ce), will align with the component of the projector's x-axis that is parallel to the display plane. Finally, T is constructed from Rand a translation and scale. Translation and scale are chosen so that pixels are mapped into valid framebuffer coordinates while simultaneously maximizing the number of projector pixels used. The corners of the framebuffer are warped using the inverse of T to produce a quadrilateral that is a representation of the frustum of the projector intersected with the display plane (T inverse simulates this process). The biggest box bounded by this quadrilateral that is square with the x- and y-axes of the framebuffer and preserves f's aspect ratio, is computed. The vertices of this box are then associated to the corners of the framebuffer f to construct a new homography. One goal of this approach is to recreate the largest rectified image that can be fit into the quadrilateral induced by the display distortion.","Given a correctly \u2018pre-warped\u2019 and projected image, as mentioned above, continuous monitoring is performed to detect changes in the display due to calibration error that arises from projector motion, changes in display surface orientation, or both. The display monitoring runs in conjunction with the display technique. An image of the camera's view of the display is captured\/observed; corresponding pre-warped framebuffer contents, \u00ce, is stored. C is used (in the case of a planar surface, C is the homography H) to construct a predicted image, C(\u00ce), that can be compared to the corresponding captured image c.","C encodes the geometric mapping between observed pixels in the camera and rendered pixels in the framebuffer but does not account for radiometric effects. Although the predicted image should be a function of many factors including material properties of the display surface, currently, only the color\/intensity bias between the devices is calibrated by the system. For simplicity, the color of a point in c is modeled as a function only of the color of its corresponding point in C(\u00ce). Furthermore, it is assumed that the three colors channels do not interact, giving three color functions that are mutually independent. Color transfer curves, for each color component are modeled by:",{"@attributes":{"id":"p-0052","num":"0060"},"maths":{"@attributes":{"id":"MATH-US-00007","num":"00007"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"mi":"\u03b3","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":"I","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["i","j"],"mo":","}}}}},{"mfrac":{"mi":"A","mrow":{"mn":"1","mo":"+","msup":{"mi":"\u2147","mrow":{"mi":"a","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mrow":{"mi":"I","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["i","j"],"mo":","}}},"mo":"+","mi":"b"}}}}}},"mo":"+","mi":"k"}],"mo":"="}},{"mrow":{"mo":["(",")"],"mn":"10"}}]}}}},"br":{}},"The similarity measure that detects when Tis no longer valid is a correlation function that operates on pairs of corresponding values in the predicted and color corrected image, \u03b3(C(\u00ce)), and the captured image, c. The three color channels of each pixel are correlated separately and summed to compute an overall correlation score. Although the standard normalized cross correlation is capable of correctly matching images features with sufficient structure, it may yield undesirably high values in featureless image regions.","Here, so that the correlation technique performs well for somewhat arbitrary images and does not require explicit search of \u00ce for good features to match, the correlation function may be normalized, as follows:",{"@attributes":{"id":"p-0055","num":"0063"},"maths":{"@attributes":{"id":"MATH-US-00008","num":"00008"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"msup":{"mi":["ncc","\u2032"]},"mo":"=","mfrac":{"mrow":[{"mn":"2","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}},"mrow":{"munder":{"mo":"\u2211","mi":"i"},"mo":"\u2062","mrow":{"msub":[{"mi":["x","i"]},{"mi":["y","i"]}],"mo":"\u2062"}}},{"mrow":[{"munder":{"mo":"\u2211","mi":"i"},"mo":"\u2062","msubsup":{"mi":["x","i"],"mn":"2"}},{"munder":{"mo":"\u2211","mi":"i"},"mo":"\u2062","msubsup":{"mi":["y","i"],"mn":"2"}}],"mo":"+"}]}}},{"mrow":{"mo":["(",")"],"mn":"11"}}]}}}},"br":{}},{"@attributes":{"id":"p-0056","num":"0064"},"maths":{"@attributes":{"id":"MATH-US-00009","num":"00009"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mi":"S","mo":"=","mrow":{"munder":{"mo":"\u2211","mi":"k"},"mo":"\u2062","mfrac":{"mrow":{"msup":{"mi":["ncc","\u2032"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"X"}},"mi":"k"}}}},{"mrow":{"mo":["(",")"],"mn":"12"}}]}}}},"br":{}},"Geometric error is not the only factor that influences the correlation values. Given the same geometric error, images with high contrast and high frequency components tend to have lower correlation scores than images without these features. In addition to the current contents of the framebuffer, ambient lighting contributes to these effects. For example, high levels of background light may reduce the overall contrast of the projected imagery. These factors degrade the robustness of the consistency measure; a search for a maximum correlation score over the M\u00d7M neighborhood may alleviate these effects.","By way of example only, a single projector and camera system of the invention, see  for reference, have been employed as follows: The initial relative position of the camera with respect to the projector was computed and remained fixed throughout. Once initially calibrated, the projector-camera pair is placed at an arbitrary position with respect to a planar display surface and the monitoring system initiated. A stand-alone application that allows users to load an openGL program is run in the foreground on a personal computer. Every two seconds the framebuffer is sampled and a consistency measure, using fifty randomly selected 3\u00d73 templates, was computed according to Eqn. 12 on the color corrected values. If this exceeds a predefined threshold (e.g., 0.90), the system automatically re-initiates the calibration phase and new warping functions and the color transfer curves are recomputed.","While certain representative embodiments and details have been shown merely for the purpose of illustrating the technique of display calibration of projection displays, and an associated system, those skilled in the art will readily appreciate that various modifications, whether specifically or expressly identified herein, may be made to any of the representative embodiments without departing from the novel teachings or scope of this technical disclosure. Accordingly, all such modifications are contemplated and intended to be included within the scope of the claims. Although the commonly employed preamble phrase \u201ccomprising the steps of\u201d may be used herein in a method Claim, applicants do not intend to invoke 35 U.S.C. \u00a7112 \u00b66. Furthermore, in any claim that is filed herewith or hereafter, any means-plus-function clauses used, or later found to be present, are intended to cover at least all structure(s) described herein as performing the recited function and not only structural equivalents but also equivalent structures."],"GOVINT":[{},{}],"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF EMBODIMENTS DEPICTED IN DRAWINGS"],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["For purposes of illustrating the innovative nature plus the flexibility of design and versatility of the preferred system and technique disclosed hereby, the invention will be better appreciated by reviewing the accompanying drawings (in which like numerals, if included, designate like parts). One can appreciate the many features that distinguish the instant invention from known attempted techniques. The drawings have been included to communicate the features of the innovative platform structure and associated technique of the invention by way of example, only, and are in no way intended to unduly limit the disclosure hereof.",{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 1","b":"10","sub":["1","1\u2032","1 ","1 "]},{"@attributes":{"id":"p-0015","num":"0014"},"figref":["FIG. 2","FIG. 1"],"b":["1","2","3","1","2"]},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":["FIG. 4","FIGS. 1\u20133"],"b":"50"}]},"DETDESC":[{},{}]}
