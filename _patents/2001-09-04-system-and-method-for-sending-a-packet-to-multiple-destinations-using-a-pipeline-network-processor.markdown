---
title: System and method for sending a packet to multiple destinations using a pipeline network processor
abstract: In a pipeline network processor, a multicast echo feature ensures that a copy of a packet is sent to all downstream ports associated with an upstream port that delivers the packet. The pipeline network processor maintains a table of header information that is stripped away upon reception in order to forward the packet to each appropriate downstream port. The pipeline network processor performs direct lookups to identify downstream ports associated with the upstream port over which the packet is received. A direct lookup is also performed to obtain the necessary header with which to forward the packet. A copy of the packet with the correct header is then sent to each identified downstream port.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07110404&OS=07110404&RS=07110404
owner: Cisco Technology, Inc.
number: 07110404
owner_city: San Jose
owner_country: US
publication_date: 20010904
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["TECHNICAL FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE INVENTION"],"p":["The present invention relates in general to information packet processing and more particularly to a system and method for sending a packet to multiple destinations using a pipeline network processor.","Pipeline network processors are designed to forward Internet Protocol (IP) packets at an extremely high data rate in excess of two million packets per second. Pipeline network processors typically have a limited number of instruction cycles and memory to perform the applicable task. Implementing features or functions that do not fit the traditional packet forwarding model is a challenging endeavor and may have a negative impact on normal packet forwarding functions such as packet filtering and quality of service processing.","With respect to cable modem routers, one of the required and commonly used features is Multicast Echo. This feature enables cable media to behave like a standard shared media, as in Ethernet, in a local area network environment for Internet Protocol multicast traffic. Cable is a unidirectional media wherein packets are sent from customer premises equipment through a cable modem to an upstream port of a cable modem termination system. Packets are also sent from a downstream port of the cable modem termination system through the cable modem to the customer premises equipment. From a cable standpoint, the configured combination of one or more upstream ports and one or more downstream ports is known as a Media Access Control (MAC) Domain which is a cable media equivalent of a local area network segment.","In a local area network environment, a device is able to receive all multicast packets sent by other devices on the same segment. However in a cable environment, only half of the multicast processing has been completed when a multicast packet is received at an upstream port. The other customer premises equipment connected to the downstream port of the MAC Domain did not receive the multicast packet. Though other devices on the downstream port may be known to be present, normal multicast processing does not add the input interface to the list of output interfaces for multicast traffic and thus no relationship information among ports. This is intentionally done and required by the multicast protocol to avoid multicast traffic loops. The Multicast Echo feature overrides normal multicast processing and permits multicast packets to be forwarded to downstream ports of the MAC Domain.","When a high speed, high end cable modem termination system is developed using a pipeline network processor to forward packets between a large number, several hundred, of cable interfaces and a large number of trunk interfaces, implementing the Multicast Echo feature for the cable interfaces becomes extremely difficult. The cable line cards strip off the Data Over Cable (DOCSIS) header before passing the packet to the pipeline network processor. The pipeline network processor needs to add the original DOCSIS header to the multicast packet in order to forward the packet to one or more downstream ports. There needs to be support for tens of thousands of multicast groups, different service flows, and many MAC Domains. The amount of memory necessary to hold such large data structures and the processing cycles required to search them would preclude the use of a pipeline network processor in terms of cost and performance. A single multicast flow, which is less than 1% of the total traffic, could severely impact the processing of the other 99% of the traffic. Therefore, it is desirable to implement a Multicast Echo feature using a pipeline network processor despite its limited resources.","From the foregoing, it may be appreciated by those skilled in the art that a need has arisen for a Multicast Echo feature for cable interfaces in a pipeline network processor that does not require large amounts of memory or severely impacts packet forwarding performance. In accordance with the present invention, a system and method for sending a packet to multiple destinations using a pipeline network processor are provided which substantially eliminate or greatly reduce disadvantages and problems associated with conventional multicast packet processing.","According to an embodiment of the present invention, there is provided a method of sending a packet in a pipeline network processor to multiple destinations that includes receiving an information packet at an upstream port and determining whether the information packet has multiple destinations. If multiple destinations are involved, a group of downstream ports associated with the upstream port is identified for routing of the information packet. Forwarding information of a downstream port in the group of downstream ports is placed into the information packet. A copy of the information packet is forwarded to the downstream port and the next downstream port of the group is processed.","The present invention provides various technical advantages over conventional multicast packet processing. For example, one technical advantage is to provide multicast echo using the limited resources of a pipeline network processor without additional memory or unnecessary processing cycles. Another technical advantage is to provide minimal impact to normal packet forwarding features. Yet another technical advantage is to provide a multicast echo feature for similar and dissimilar inbound and outbound media. Other technical advantages may be readily ascertainable by those skilled in the art from the following figures, description, and claims.",{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 1","b":["10","10","12","14","16","18","14","20","12","22","16","24"]},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 2","b":["24","24","30","32","34","34","20","30","32","32","30","32","30","32","34","20","32"]},"Forwarding processor  includes eight processing columns . Each processing column  has 128 instruction cycles to perform packet processing before control is passed to the next processing column . If a processing column  does not complete its processing of a packet within the 128 instruction cycle, the packet is fed back to the processing column  for subsequent processing. Each processing column  includes a memory  to store tables used in the processing of a packet. Each memory  may be partitioned into a slow access memory and a fast access memory with varying amount of memory space.","Each processing column  performs a distinct processing function within forwarding processor . Column 0 performs initial identification and classification of a packet received from interface units . Column 1 performs a route lookup in order to properly forward the packet. Column 2 performs access control list processing to determine if the packet is allowed to be received and allowed to be forwarded. Column 3 performs input quality of service processing on the packet. Column 4 performs output quality of service processing on the packet and IP fragmentation if the packet length exceeds a desired output size. Column 5 performs MAC address rewriting. Column 6 performs output queuing of the packet. Column 7 performs output forwarding of the packet. For normal forwarding, a packet is identified and classified in Column 0 and a route for the packet is identified in Column 1. Input access control list processing is performed in Column 2 followed by input quality of service processing in Column 3. The packet returns to Column 2 for output access control list processing and is passed by Column 3 to Column 4 for output quality of service processing. Column 5 performs the MAC address rewrite and Column 6 places the packet in an output queue. Column 7 then forwards the packet towards its destination.","Forwarding processor  has a capability to perform a multicast echo feature. Whenever the multicast echo feature is enabled, Column 0 will send the inbound upstream multicast packet received at an upstream port from a line card  to a new echo path through Columns 1\u20137. This new echo path will forward, or echo, the received multicast packet to appropriate downstream ports associated with the upstream port and return the multicast packet to a normal multicast path in Column 1 on feedback. Ethernet MAC headers and Internet Protocol headers of the multicast packet are not altered during this process.",{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 3","b":["40","42","32","44","46","48","50","52","54","56","32","44"]},"Process flow will proceed to step  upon either an indication that multicast echo is permitted or if this is not the first downstream port of the downstream port group being processed. The downstream network header is filled into the multicast packet and the multicast packet is forwarded to the downstream port at step . According to step , process flow will either proceed to the normal multicast processing path within forwarding processor  at step  upon processing the last downstream port of the downstream port group or return to step  to process the next downstream port of the downstream port group.","The multicast echo feature is driven by five main data structures in forwarding processor . These data structures are shown in  and include a feature data table , a multicast echo hash table , a downstream port group table , a group information table , and a downstream network header table . These tables are created and updated by route processor  and determine the processing to be performed for the multicast echo feature. Feature data table  is in memory  of Column 0 and is indexed by an upstream port identifier. A flag indicates whether multicast echo is enabled for the upstream port. If enabled, feature data table  provides an index into downstream port group table . Downstream port group table  is in memory  of Column 2 and includes a group identifier, a bus channel indicator, a downstream port identifier, and a sequence number for each downstream port associated with the upstream port from which the multicast packet was received. Multicast echo hash table  is in memory  of Column 5 and is indexed by a cyclical redundancy check hash of the multicast address. Multicast echo hash table  provides an index into group information table . Group information table  has a list of entries including a multicast address, network header, and nest information group index used to obtain header information for packet transport from downstream network header table . Downstream network header table  is in memory  of Column 5 and contains a list of the unique downstream network header values for multicast echo processing.","The multicast echo feature may be implemented in forwarding processor  using detection processing, outbound lookup processing, outbound access control list processing, outbound forwarding processing and feedback\/termination processing routines. The following tables show the operation of each routine for the multicast echo feature on a per processing column basis.","TABLE 1 shows the detection processing routine performed by forwarding processor  for the multicast echo feature. Detection processing is performed in Columns 0 and 1 and is initiated whenever a multicast packet is received.",{"@attributes":{"id":"p-0025","num":"0024"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"182pt","align":"left"}}],"thead":{"row":[{"entry":"TABLE 1"},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":["Column","Detection Processing"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["0","Receive Multicast Packet from Cable Interface"]},{"entry":[{},"If (Multicast-Echo Feature is ON for VCCI_IN)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Save mce_ds_header_index in mac_rewrite_index"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"field in Packet"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Save the offset to the DS Port Group Table"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"entry in input_if_ip_addr in Packet"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"PDONE (MC_ECHO)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Else"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"PDONE (MULTICAST)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["1","MC_ECHO Path"]},{"entry":[{},"Pass Packet"]},{"entry":[{},"PDONE (MC_ECHO)"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},"When column 0 receives a multicast packet, it will test for the multicast echo enable flag for the inbound upstream port in feature data table . If not enabled, Column 0 will forward the multicast packet to Column 1 along the normal multicast path. If multicast echo is enabled, Column 0 will copy the value of the downstream header index to a MAC rewrite index in the packet and store the offset to the downstream port group table entry into an input address field of the packet. Column 0 will then forward the multicast packet to Column 1 along a multicast echo path. Column 1 then passes the packet to Column 2 for outbound lookup processing.","TABLE 2 shows the outbound lookup processing routine performed by forwarding processor  for the multicast echo feature. Outbound lookup processing is performed in Column 2 and is initially triggered by the detection processing and subsequently by outbound access control list processing and\/or outbound forwarding processing.",{"@attributes":{"id":"p-0028","num":"0027"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"182pt","align":"left"}}],"thead":{"row":[{"entry":"TABLE 2"},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":["Column","Outbound Lookup Processing"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["2","MC_ECHO Path"]},{"entry":[{},"Lookup the DS Port Entry"]},{"entry":[{},"If (Feedback Stack is EMPTY)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Lookup number of DS Ports in the DS Echo Group"]},{"entry":[{},"Build\/Add Feedback Stack Entry"]},{"entry":[{},"Set the Feedback Type to SIMPLE"]},{"entry":[{},"Set the Packet Reference Count"]},{"entry":[{},"Turn MC_ECHO_RUN Bit to ON"]},{"entry":[{},"Set next_path to OUTPUT_ACL"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Else"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Retrieve the Feedback Stack Entry"]},{"entry":[{},"Set next_path to MC_ECHO"]},{"entry":[{},"If (Feedback-Status equals OUTPUT_ACL_DENY)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Turn MC_ECHO_RUN Bit to OFF"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Else"]},{"entry":[{},"If (Feedback-Status equals"]},{"entry":[{},"?NETWORK_HEADER_FOUND)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Set the Feedback Type to RESTORE"]},{"entry":[{},"Decrement the DS Port Index and save it in"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"91pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"126pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"the Feedback Stack Entry"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Else"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Set the Feedback Type to SIMPLE"]},{"entry":[{},"Set next_path to MC_ECHO"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"If (MC_ECHO_RUN is ON) and (first pass or ENTRY-"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"FORWARDED"]},{"entry":[{},"Decrement the DS Port Index and save it in the"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Feedback Stack Entry"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Fill-in the forwarding parameters"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Else"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Reset the Packet Reference Count"]},{"entry":[{},"Clear vcci_in and mac_rewrite_index"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"PDONE (next_path)"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"Column 2 will look up the forwarding parameters from the downstream port group table and place these parameters into the packet for later use by Columns 5\u20137 to forward the packet. Column 2 will then determine whether the feedback stack is empty. If the feedback stack is empty, Column 2 will perform initial feedback processing for the multicast echo feature. Column 2 will retrieve the number of downstream ports in the downstream port group table from the first entry in the downstream port group. A feedback entry is built and added to the feedback stack. The feedback stack entry is used to save the index of the next downstream port to process. a feedback type flag is set to SIMPLE to preserve forwarding parameters on the feedback pass to output access control list processing. On the first pass, the packet cannot be forwarded and restored on feedback. The first pass processing forces the packet through output access control list processing. A reference count for the packet is set to the number of downstream ports plus one to provide for feedback of the packet for the final pass to return the packet to the normal multicast processing path. A multicast run flag is set for the packet and the packet is forwarded for output access control list processing.","If the feedback stack is not empty, Column 2 will perform post feedback processing for the multicast echo feature. The feedback entry from the stack containing internal processing flags and the index of the next downstream port to process. The packet is then placed on the multicast echo path. Column 2 will then determine whether an output access control list denial has occurred. If so, the multicast run flag is cleared. After the multicast run flag is cleared or if there is no denial, a determination is made as to whether a downstream network header is found. If not found, the feedback type is set to SIMPLE and the packet is forwarded to outbound forwarding processing for further downstream network header lookup. If a downstream network header is found, the feedback type is set to RESTORE to preserve the original packet for subsequent forwarding along the multicast echo path or the normal multicast path. Column 2 will then decrement the downstream port index and save the new index to the feedback stack entry. If at this time the multicast run flag is set, Column 2 will fill the packet with the forwarding parameters from the downstream port group table for the current entry, decrement the downstream port index, and save the new index to the feedback stack entry. If the multicast run flag is cleared, the vcci_out and MAC rewrite index values are cleared and the packet reference count is reset. The packet is then forwarded on the next path.","TABLE 3 shows the outbound access control list processing performed by forwarding processor  for the multicast echo feature. Outbound access control list processing begins in Column 3 and is initiated by outbound lookup processing during the initial feedback processing of Column 2.",{"@attributes":{"id":"p-0032","num":"0031"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"182pt","align":"left"}}],"thead":{"row":[{"entry":"TABLE 3"},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":["Column","Outbound ACL Processing"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["3-4","OUTPUT_ACL Path"]},{"entry":[{},"Pass Packet"]},{"entry":[{},"PDONE (OUTPUT_ACL)"]},{"entry":["5","OUTPUT_ACL Path"]},{"entry":[{},"If (MC_ECHO_RUN bit is on)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Perform Downstream Network Header lookup"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"PDONE (OUTPUT_ACL)"]},{"entry":["6-0","OUTPUT_ACL Path"]},{"entry":[{},"Pass Packet"]},{"entry":[{},"PDONE (OUTPUT_ACL)"]},{"entry":["1","OUTPUT_ACL Path"]},{"entry":[{},"If (MC_ECHO_RUN Bit is ON)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"If (Feedback-Status equals BUFFER_ALLOC_FAIL)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Pop Feedback Stack"]},{"entry":[{},"PDONE (BYPASS)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Else"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"PDONE (OUTPUT_ACL)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Else"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"PDONE (OUTPUT_ACL)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["2","OUTPUT_ACL Path"]},{"entry":[{},"Process Output ACL"]},{"entry":[{},"If (Permit)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"If (MC_ECHO_RUN Bit is ON)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"PDONE (MC_ECHO)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Else"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"PDONE (OUTPUT_QOS)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"If (Deny or Error)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"PDONE (DROP)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["3","DROP Path"]},{"entry":[{},"Pass Packet"]},{"entry":[{},"PDONE (DROP)"]},{"entry":["4","DROP PATH"]},{"entry":[{},"If (MULTICAST Packet)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"IF (MC_ECHO_RUN Bit is ON)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Set ACL-State in the Feedback Stack Entry to"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"ACL_DROP"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"PDONE (MC_ECHO)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Else"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"PDONE (MULTICAST)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Else"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"PDONE (DROP)"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"In outbound access control list processing, the packet is passed through Columns 3\u20134 to Column 5 where an attempt is made to find the downstream network header based on the multicast address in the packet. The multicast address is hashed with the result being an index to multicast echo hash table . The index of the first multicast echo group information entry is retrieved from multicast echo hash table  and is used in group information table . The multicast address in group information table  is compared to the multicast address in the packet. If the addresses match and there are no more entries in the table, the downstream network header index is stored in the packet and NETWORK_HEADER_FOUND is set. If there is no match and there are more entries, the next entry is retrieved and compared. The packet is then passed to Column 6, fed back to Column 0 from Column 7, and forwarded to Column 1. Column 7 will move the original packet from internal packet memory to external random access memory. Column 1 determines whether multicast echo processing is underway by checking the multicast run flag. If the multicast run flag is not set, the packet is forwarded to Column 2 along the output access control list processing path If the multicast echo feature is being processed, a determination is made as to whether a buffer allocation failure has occurred. a buffer allocation failure may occur on the first feedback pass and indicate that the original packet did not move from internal packet memory to external random access memory. If a buffer allocation failure occurred, Column 1 will forward the packet on a bypass path to Column 2 for fatal error processing.","If there is no buffer allocation failure, Column 1 forwards the packet to column 2 for output access control list processing. Column 2 determines whether or not configured access control lists will allow the packet to be forwarded to the downstream port. If access is permitted, Column 2 will forward the packet on the multicast echo path to Column 3 if the multicast run flag is set. Otherwise the packet is forwarded to Column 3 on the output quality of service path for appropriate forwarding processing. If access is denied, Column 2 forwards the packet to Column 4 through Column 3 along a drop path. Column 4 will forward a unicast packet on the drop path for drop forwarding. If multicast echo processing is underway, an access control list state in the feedback stack entry is set to DROP and the packet is forwarded on the multicast echo path. If the multicast run flag is not set, the packet is forwarded on the normal multicast path.","TABLE 4 shows outbound forwarding processing performed by forwarding processor  for the multicast echo feature. Outbound forwarding processing begins in Column 3 and is initiated by either outbound lookup processing or outbound access control list processing in Column 2.",{"@attributes":{"id":"p-0036","num":"0035"},"tables":{"@attributes":{"id":"TABLE-US-00004","num":"00004"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"175pt","align":"left"}}],"thead":{"row":[{"entry":"TABLE 4"},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":["Column","Outbound Forwarding Processing"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["3-4","MC_ECHO Path"]},{"entry":[{},"Path Packet"]},{"entry":[{},"PDONE (MC_ECHO)"]},{"entry":["5","MC_ECHO Path"]},{"entry":[{},"If (MC_ECHO_RUN is ON)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"If (NETWORK_HEADER_FOUND is set)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"147pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Rewrite Network Header"]},{"entry":[{},"PDONE (BUFFER_MGMT)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Else"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"147pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Perform Downstream Network Header Lookup"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Else"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"PDONE (MC_ECHO)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["6","BUFFER_MGMT Path"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Common Forwarding Processing"]},{"entry":[{},"PDONE (ENQUEUE)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"MC_ECHO Path"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Pass Packet"]},{"entry":[{},"PDONE (MC_ECHO)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["7","ENQUEUE Path"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Copy of Packet Sent to DS Port"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"MC_ECHO Path and ENQUEUE Path"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Packet Feedback to Column 0 on MC_ECHO Path"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"The packet is passed to Column 5 through Columns 3 and 4 on the multicast echo path. Column 5 determines whether outbound forwarding is to be performed. Column 5 checks feedback flags to determine whether the packet passed output access control list processing. If not, the packet is to be dropped and forwarded accordingly through Columns 6 and 7 for appropriate feedback processing. Also, the packet will be forwarded on the multicast echo path through Columns 6 and 7 for appropriate feedback processing if the multicast run flag is not set, indicating that the packet is making a termination pass.","If outbound forwarding is to be performed, Column 5 determines whether a downstream network header has been found. If so, Column 5 will rewrite the downstream network header value and forward the packet to Column 6 on a buffer management path. Column 6 will perform normal buffer management processing and pass the packet to Column 7 on an enqueue path. Column 7 forwards the packet to the identified downstream port and feeds the packet back to Column 0 on the multicast echo path for processing of the next downstream port. If a downstream network header has not been found, Column 5 will perform a downstream network header lookup based on the multicast address of the packet and then forward the packet on the multicast echo path.","TABLE 5 shows the feedback\/termination processing routine performed by forwarding processor  for the multicast echo feature. Feedback\/termination processing is performed in Column 0 and is initially triggered upon feedback of a packet.",{"@attributes":{"id":"p-0040","num":"0039"},"tables":{"@attributes":{"id":"TABLE-US-00005","num":"00005"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"168pt","align":"left"}}],"thead":{"row":[{"entry":[{},"TABLE 5"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]},{"entry":[{},"Column","Feedback Processing"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"0","MC_ECHO Path"]},{"entry":[{},{},"If (MC_ECHO_RUN is ON)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Calculate the offset to the next DS Port"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"entry and save it in input_ip_if_addr"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"PDONE (MC_ECHO)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Else"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Feedback Cleanup"]},{"entry":[{},"Restore Packet for Normal Multicast Processing"]},{"entry":[{},"PDONE (MULTICAST)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"1","MFIB Path"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Normal Multicast Processing"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"MC_ECHO Path"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Pass Packet"]},{"entry":[{},"PDONE (MC_ECHO)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"OUTPUT_ACL Path"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"SEE Outbound ACL Processing"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"Upon receiving a packet on the multicast echo path, Column 0 determines whether the multicast echo feature is enabled. If so, Column 0 calculates the offset for the next downstream port group table entry into the input address field of the packet. The packet is then forwarded to Column 1 on the multicast echo path to initiate outbound lookup processing. If the multicast run flag is not set, Column 0 performs feedback cleanup by removing the feedback stack entry from the feedback stack. The value in the input address field of the packet is reset for normal multicast processing. The packet is then forwarded to Column 1 on the normal multicast path for normal multicast processing.","As discussed above, when a multicast packet is received from an upstream port, forwarding processor  performs a direct lookup in the downstream port group table to determine the downstream ports associated with the upstream port. Forwarding processor  also performs a direct lookup into the MAC Domain according to a service flow of the upstream port to determine the downstream multicast DOCSIS header information associated with the packet. Forwarding processor then sends a copy of the packet to each appropriate downstream port in the group with a correct DOCSIS header. Forwarding processor  builds a downstream multicast DOCSIS header table including default and known\/learned DOCSIS header information associated with multicast packets. A MAC Domain table is also built to associate service flows from upstream ports to either the default or known\/learned DOCSIS header information. The relationship between a service flow from an upstream port and to a downstream multicast DOCSIS header is a many to one relationship. Other fields in the table are used for inbound MAC header classification in order to determine the format of a received packet. The downstream port group table includes a list of the downstream ports for each MAC Domain. The relationship between an upstream port and a downstream port group is also a many to one relationship.","The multicast echo feature within forwarding processor  uses single pass processing and permits any combination of upstream ports, upstream flows, and multicast groups. Upstream information is used to find appropriate downstream information. Similar and dissimilar inbound and outbound media may be accommodated. No restructuring of the pipeline network processing capability of forwarding processor  is needed, no additional memory is required, and normal multicast packet forwarding is not affected. In a cable modem environment, the multicast echo feature enables the cable media to behave like a standard shared media in a local area network environment.","Thus, it is apparent that there has been provided, in accordance with the present invention, a system and method for sending a packet to multiple destinations using a pipeline network processor that satisfies the advantages set forth above. Although the present invention has been described in detail, it should be understood that various changes, substitutions, and alterations may be made herein. For example, though discussed in relation to a cable modem environment, the present invention may equally apply in other packet distribution environments that use a pipeline network processor. Other examples may be readily ascertainable by those skilled in the art and may be made herein without departing from the spirit and scope of the present invention as defined by the following claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["For a more complete understanding of the present invention and the advantages thereof, reference is now made to the following description taken in conjunction with the accompanying drawings, wherein like reference numerals represent like parts, in which:",{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIGS. 4A\u2013B"}]},"DETDESC":[{},{}]}
