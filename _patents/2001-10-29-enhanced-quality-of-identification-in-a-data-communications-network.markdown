---
title: Enhanced quality of identification in a data communications network
abstract: A method for enhanced quality of identification in a data communications network includes obtaining a user identifier that includes an identification server ID and an identification randomized ID. The identification server ID identifies an identification server peer group. The identification server peer group includes at least one server that maintains a mapping between an identification randomized ID and a user authentication peer group capable of authenticating a user associated with a particular randomized ID, and a mapping between the identification randomized ID and user information. The method also includes requesting authorization of the user by presenting the user identifier to a corresponding identification server peer group. Each server in the identification server peer group is configured to search for one or more matching entries including the randomized ID.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07085840&OS=07085840&RS=07085840
owner: Sun Microsystems, Inc.
number: 07085840
owner_city: Santa Clara
owner_country: US
publication_date: 20011029
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","BRIEF DESCRIPTION OF THE INVENTION","DETAILED DESCRIPTION OF A PREFERRED EMBODIMENT"],"p":["This application is related to the following:","U.S. patent application Ser. No. 10\/243,858, filed Sep. 13, 2002, in the names of inventors Jon Bostrom, Aaron Cooley, and Eduard K. de Jong, entitled \u201cProvisioning for Digital Content Access Control\u201d, commonly assigned herewith;","U.S. patent application Ser. No. 10\/243,287, filed Sep. 13, 2002, in the names of inventors Jon Bostrom, Aaron Cooley, and Eduard K. de Jong, entitled \u201cProvisioning for Digital Content Access Control\u201d, commonly assigned herewith;","U.S. patent application Ser. No. 10\/243,474, filed Sep. 13, 2002, in the names of inventors Jon Bostrom, Aaron Cooley, and Eduard K. de Jong, entitled \u201cRepository for Digital Content Access Control\u201d, commonly assigned herewith;","U.S. patent application Ser. No. 10\/243,218, filed Sep. 13, 2002, in the names of inventors Jon Bostrom, Aaron Cooley, and Eduard K. de Jong, entitled \u201cSynchronizing for Digital Content Access Control\u201d, commonly assigned herewith;","U.S. patent application Ser. No. 10\/243,355, filed Sep. 13, 2002, in the names of inventors Jon Bostrom, Aaron Cooley, and Eduard K. de Jong, entitled \u201cAccessing for Digital Content Access Control\u201d, commonly assigned herewith;","U.S. patent application Ser. No. 10\/687,415, filed Oct. 15, 2003, in the name of inventor Eduard K. de long, entitled \u201cRights Locker For Digital Content Access Control\u201d, commonly assigned herewith;","U.S. patent application Ser. No. 10\/687,217, filed Oct. 15, 2003, in the name of inventor Eduard K. de Jong, entitled \u201cAccessing In A Rights Locker System For Digital Content Access Control\u201d, commonly assigned herewith;","U.S. patent application Ser. No. 10\/687,459, filed Oct. 15, 2003, in the name of inventor Eduard K. de long, entitled \u201cEmbedded Content Requests In A Rights Locker System For Digital Content Access Control\u201d, commonly assigned herewith;","U.S. patent application Ser. No. 10\/687,488, filed Oct. 15, 2003, in the name of inventor Eduard K. de long, entitled \u201cRights Maintenance In A Rights Locker System For Digital Content Access Control\u201d, commonly assigned herewith;","U.S. patent application Ser. No. 10\/669,160, filed Sep. 22, 2003, in the name of inventor Eduard K. de long, entitled \u201cControlled Delivery Of Digital Content In A System For Digital Content Access Control\u201d, commonly assigned herewith;","U.S. patent application Ser. No. 10\/668,867, filed Sep. 22, 2003, in the name of inventor Eduard K. de long, entitled \u201cAccessing For Controlled Delivery Of Digital Content In A System For Digital Content Access Control\u201d, commonly assigned herewith;","U.S. patent application Ser. No. 10\/040,270, filed Oct. 29, 2001, in the name of inventor Eduard K. de long, entitled \u201cEnhanced Privacy Protection in Identification in a Data Communications Network\u201d, commonly assigned herewith;","U.S. patent application Ser. No. 10\/014,893, filed Oct. 29, 2001, in the names of inventors Eduard K. de long, Albert Y. Leung, and Moshe Levy, entitled \u201cIdentification And Privacy In The World Wide Web\u201d, commonly assigned herewith;","U.S. patent application Ser. No. 10\/014,934, filed Oct. 29, 2001, in the names of inventors Eduard K. de long, Albert Y. Leung, and Moshe Levy, entitled \u201cPortability and Privacy with Data Communications Network Browsing\u201d, commonly assigned herewith;","U.S. patent application Ser. No. 10\/033,373, filed Oct. 29, 2001, in the names of inventors Eduard K. de long, Albert Y. Leung, and Moshe Levy, entitled \u201cManaging Identification in a Data Communications Network\u201d, commonly assigned herewith; and","U.S. patent application Ser. No. 10\/040,293, filed Oct. 29, 2001, in the names of inventors Eduard K. de long, Albert Y. Leung, and Moshe Levy, entitled \u201cPrivacy and Identification in a Data Communications Network\u201d, commonly assigned herewith.","The present invention relates to the field of computer science. More particularly, the present invention relates to a system and method for managing identification in the World Wide Web.","The advent of the World Wide Web (WWW) has made much more information available for use by anyone with a computer having an Internet connection. Unfortunately, current methods make it relatively easy to identify a particular user with specific data about the user, thus raising privacy concerns.","One problem with identification and privacy on the Web concerns how Web browsers obtain user data. Typically, Web browsers obtain user data from one or more cookies stored on a local hard disk. The cookies may contain sensitive user information.  is a flow diagram that illustrates a typical method for obtaining user information from a cookie. At , a Web browser accesses a Web site that uses a cookie. At , a determination is made regarding whether a cookie is present on the user computer's local disk. If a cookie is not present, at  the browser generates a cookie with the Web server Universal Resource Locator (URL) and Web server-provided user data. If a cookie is present, at  the browser uses the cookie on the user computer's local disk.",{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 1B","b":"120"},"Unfortunately, the privacy afforded by this approach is low because it is relatively easy to determine the identity of the user associated with the user data merely by examining the cookie contents.","Another problem with identification and privacy on the Web concerns user authentication. User authentication on the Web is typically accomplished using a username and password.  is a flow diagram that illustrates a typical method for performing user authentication using a username and a password. At , a user visits a service provider Web site. At , the service provider Web site authenticates the user based on a static username and password. This form of user authentication typically includes filling out a form for data that is deemed relevant for the services being rendered on the Web. At , a determination is made regarding whether the user authentication was successful. If the user authentication was unsuccessful, service is refused at . If the user authentication was successful, service is provided at . The privacy protection and security afforded by this approach are low.","Furthermore, the accuracy and appropriateness of the data gathered on the forms is not guaranteed. For example, if the service provider form completed by the user prompts for a drivers license number, the service provider typically does not determine whether the number entered by the user is appropriate for the service request (e.g. entering a fishing license number when prompted for a drivers license is inappropriate). And the service provider typically does not determine whether the entered drivers license actually belongs to the person who entered the number.",{"@attributes":{"id":"p-0026","num":"0025"},"figref":["FIG. 3","FIG. 3"],"b":["300","305","310","315","325","330"]},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 4","b":["400","425","435","460","435","460","435","460"]},"Maintaining separate user authentication schemes for each Web site means that users must remember their username and password for each site. Oftentimes, an individual will use the same username and password for each Web site. Thus, once the users' username and password for one web site are known, the same username and password can be used to access information for the same user at another Web site. Moreover, individuals often base their username and password on personal information such as social security number or birthday. This makes passwords vulnerable to attack by hackers.",{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 5","b":["540","505","545","505","520","524","520","520","525","565","545","530","530","535","530","525","560","530","520","565","505"]},"At , the user authentication token is returned to the user . The service provider  uses the user authentication token as a cookie or session identifier in subsequent communications (, ) between the user and the service provider. These communications may include requests  for user data stored in user database . Such requests  are received by user data retriever . Data retriever  retrieves the user data from user database  and returns the user data at .","Unfortunately, the service provider using this mechanism is a single point of control. A user has no control over where and when user data is obtained and where and when the service provider uses the user data. All user data is in the open once the user has identified himself.",{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 6","b":["305","600","625","600","625","635","660","635","660","630","665"]},"As shown in , a user may visit multiple member Web sites once logged in via global authenticator . Thus, global customer database  must include information for a user that is relevant to all sites visited. For example, if a user visits a financial Web site and a medical plan Web site, global customer database  will include medical information as well as financial information. Moreover, global authenticator  may be configured to monitor or track an individual's Web activity such as the Web sites visited. Commingling potentially inappropriate data and the ability to monitor Web activity raise privacy concerns.","An additional problem with the using the World Wide Web is the lack of ways to create a trail of what a service provider accepts as valid user authentication. A user either logs in using a username and password that any person or program could have entered and is granted access to multiple services indefinitely, or the user enters the wrong username and password and gets nothing.","Accordingly, what is needed is a solution that protects privacy in a system where information about a user is required to deliver services. A further need exists for such a solution that enables service providers to exchange information about a person without revealing inappropriate or unnecessary information. A further need exists for such a solution that manages user transactions on an open network such as the Internet while maintaining privacy. A further need exists for such a solution that manages trust in user data and creates a trail of assessments of the trust and the process of how the assessments were made. A further need exists for such a solution that protects user data stored in cookies.","A method for managing identification in a data communications network includes receiving a user-controlled secure storage device and enrolling the user with an authority network site. The enrolling includes providing information requested by the authority network site. The method also includes receiving user data in response to the enrolling, storing the user data in the user-controlled secure storage device, enabling the user-controlled secure storage device to release the user data and using the user data at a service provider network site to obtain a service.","According to another aspect, a method for enhanced privacy protection in identification in a data communications network includes enrolling for a service on the data communications network, receiving a randomized identifier (ID) in response to the enrolling, storing the randomized ID and using the randomized ID to obtain services on the data communications network. An apparatus for obtaining a service on a data communications network includes an enrollment authority configured to accept an enrollment request. The enrollment authority is further configured to return enrollment results in response to the enrollment request. The enrollment results include user data and the enrollment results may be used obtaining a service from a service provider.","According to another aspect, a method for enhanced quality of identification in a data communications network includes obtaining a user identifier that includes an identification server ID and an identification randomized ID. The identification server ID identifies an identification server peer group. The identification server peer group includes at least one server that maintains a mapping between an identification randomized ID and a user authentication peer group capable of authenticating a user associated with a particular randomized ID, and a mapping between the identification randomized ID and user information. The method also includes requesting authorization of the user by presenting the user identifier to a corresponding identification server peer group. Each server in the identification server peer group is configured to search for one or more matching entries including the randomized ID.","According to another aspect, a method for controlling user access to distributed resources on a data communications network includes receiving a resource request. The request includes a rights key credential that includes at least one key to provide access to a resource on the data communications network. The rights key credential also includes a resource identifier that includes a resource server peer group ID and a randomized ID. The resource server peer group ID identifies a resource server peer group. The resource server peer group includes at least one server that maintains a mapping between a randomized ID and the at least one key. The method also includes providing access to the resource using the at least one key.","According to another aspect, a method for browsing a data communications network includes requesting user data from a user-controlled secure device if a network site that requires the user data is accessed. The request is performed prior to requesting the user data from another device. The method also includes sending the user data to a network server associated with the network site if the user data is received from the user-controlled secure device. According to another aspect, a method for servicing data communications network information units includes receiving user data associated with a network site, using the user data if the user data includes static user data and reconstructing the user data before using the user data if the user data includes dynamic user data.","According to another aspect, an apparatus for browsing a data communications network includes a network browser configured to request user data from a user-controlled secure device if a network site that requires the user data is accessed. The request occurs prior to requesting the user data from another device. The network browser is further configured to send the user data to a network server associated with the network site if the user data is received from the user-controlled secure device.","According to another aspect, an apparatus for browsing a data communications network includes a smart card configured to receive a request for user data. The smart card is further configured to return the user data if the user data is found and if returning user data for the request is enabled and if the user data includes static user data. The smart card is further configured to reconfigure the user data if the user data is found and if returning user data for the request is enabled and if the user data includes dynamic user data.","According to another aspect, an apparatus for servicing data communications network information units includes a network server configured to receive user data associated with a network site. The network server is further configured to use the user data if the user data includes static user data. The network server is further configured to reconstruct the user data before using the user data if the user data includes dynamic user data.","According to another aspect, a method for obtaining a service on a data communications network, the method includes enrolling with an authority and using the enrollment results to obtain a service from a service provider. The enrolling creates enrollment results that include user data. The service provider is capable of communicating with the authority to verify the enrollment results.","According to another aspect, an apparatus for obtaining a service on a data communications network includes an enrollment authority configured to accept an enrollment request. The enrollment authority is further configured to return enrollment results in response to the enrollment request. The enrollment results include user data, for use in obtaining a service from a service provider. According to another aspect, an apparatus for obtaining a service on a data communications network, the apparatus includes a service provider configured to accept a service request and enrollment results obtained from an enrollment authority. The service provider is capable of communicating with the authority to verify the enrollment results and the service provider is configured to provide the service based upon the enrollment results and a response from the enrollment authority.","According to another aspect, a method for protecting privacy on a data communications network includes receiving a user identifier and specific user data associated with the user identifier. The specific user data includes data about a network user. The method also includes creating generalized user data based on the specific user data and associating the generalized user data with the user identifier. The method also includes returning the user identifier and the generalized user data. According to another aspect, a method for protecting privacy on a data communications network, the method includes storing user logon information for at least one service provider server on a user-controlled secure device. The at least one service provider server includes at least one network server that is capable of providing a service to a user. The method also includes logging on to the device, providing access to the at least one service provider server.","Embodiments of the present invention are described herein in the context of a method and apparatus for identification and privacy in the World Wide Web. Those of ordinary skill in the art will realize that the following detailed description of the present invention is illustrative only and is not intended to be in any way limiting. Other embodiments of the present invention will readily suggest themselves to such skilled persons having the benefit of this disclosure. Reference will now be made in detail to implementations of the present invention as illustrated in the accompanying drawings. The same reference indicators will be used throughout the drawings and the following detailed description to refer to the same or like parts.","In the interest of clarity, not all of the routine features of the implementations described herein are shown and described. It will, of course, be appreciated that in the development of any such actual implementation, numerous implementation-specific decisions must be made in order to achieve the developer's specific goals, such as compliance with application- and business-related constraints, and that these specific goals will vary from one implementation to another and from one developer to another. Moreover, it will be appreciated that such a development effort might be complex and time-consuming, but would nevertheless be a routine undertaking of engineering for those of ordinary skill in the art having the benefit of this disclosure.","In the context of the present invention, the term \u201cnetwork\u201d includes local area networks, wide area networks, the Internet, cable television systems, telephone systems, wireless telecommunications systems, fiber optic networks, ATM networks, frame relay networks, satellite communications systems, and the like. Such networks are well known in the art and consequently are not further described here.","Embodiments of the present invention are described with reference to the World Wide Web. Any data communications network may be configured like the World Wide Web.","In accordance with one embodiment of the present invention, the components, processes and\/or data structures may be implemented using C or C++ programs running on high performance computers (such as an Enterprise 2000\u2122 server running Sun Solaris\u2122 as its operating system. The Enterprise 2000\u2122 server and Sun Solaris\u2122 operating system are products available from Sun Microsystems, Inc. of Mountain View, Calif.). Different implementations may be used and may include other types of operating systems, computing platforms, computer programs, firmware, computer languages and\/or general-purpose machines. In addition, those of ordinary skill in the art will recognize that devices of a less general purpose nature, such as hardwired devices, field programmable gate arrays (FPGAs), application specific integrated circuits (ASICs), or the like, may also be used without departing from the scope and spirit of the inventive concepts disclosed herein.","Turning now to , a block diagram that illustrates conducting secure transactions on the World Wide Web using user data authenticated by an authority in accordance with one embodiment of the present invention is presented. Three entities are represented: a customer or user , an authority  and a service provider . User  represents an entity that requests and receives a service from a service provider. Service provider  represents an entity that provides a service. Authority  represents an entity that authenticates credentials or other user data to assert an indication of a quality metric or level of truthfulness, accuracy and completeness of the credential or other user data.","The issuer of a credential performs data authentication of the credential. A credential is a certificate presented to a service provider as an indication of what the presenter is entitled, along with a service request.","According to embodiments of the present invention, a user first enrolls with an authority and receives an authenticated credential in return. The user then presents the credential and a service request to a service provider. Accepting a credential is not unconditional. The service provider examines the request and the credential and either denies service or grants the service. In more detail, at  a user  communicates with an authority  to issue a credential request. The request may include associated parameters and data. The associated parameters and data may relate to, by way of example, the identity of a user authentication server  capable of performing at least part of the user authentication required for issuance of the requested credential. The request may also include supporting credentials. The authority  authenticates the credential or credentials to assert an indication of a quality metric or indication of truthfulness, accuracy and completeness of the credential or credentials. The authority  may cooperate with a secondary authority  in performing user authentication. At , the authority returns an authenticated credential to the user .","Using a credential to obtain a service begins with a service request. As indicated by reference numeral , the user  communicates with a service provider  to issue a service request. The request may include credentials and associated credential parameters and data. The service provider  assesses the credential request and supporting information. The service provider  may cooperate with an authority  to perform dynamic credential authentication (, ). The authority  may also cooperate with a secondary authority  in performing user authentication. At , the service provider provides the requested service.","Turning now to , a flow diagram that illustrates a method for conducting secure transactions on the World Wide Web using user data authenticated by an authority in accordance with one embodiment of the present invention is presented. At  a credential is generated. The credential is created by presenting a credential request and supporting data to an authority. The supporting data may include credentials created earlier by the same authority, or by another authority. The credentials may be non-digital as well. For example, a driver's license or birth certificate may be used. Depending upon the type of authentication required, the credentials may be all digital, all non-digital or a combination of digital and non-digital credentials.","According to one embodiment of the present invention, a credential may be created with limitations placed on its use. For example, the credential may be created for one-time use, for use a limited number of times or for use at a specific location.","According to another embodiment of the present invention, the credential may be stored on a Web server, smart card, personal digital assistant (PDA), cell phone or the like.","Referring again to , at  a determination is made regarding whether it is time to use the credential. An example of a time to use the credential is when the credential is needed to obtain a service. Once it is time to use the credential, at  the credential or a reference to the credential is presented to a service provider, which can then render a service. The service may be specified directly or indirectly by information contained in the credential. The service provider may accept the credential data after performing a cryptographical data authentication. At , a determination is made regarding whether the credential is still valid. This process of using a credential to obtain a service continues until the credential is no longer valid.",{"@attributes":{"id":"p-0124","num":"0123"},"figref":["FIGS. 9A and 9B","FIG. 9A"],"b":["900","910","915","920","925","930","935","940","910","910"]},"Credential cryptogram  is used to authenticate credential items , ,  and . Preferably, credential cryptogram  is also used to authenticate credential authority peer group ID . This data authentication may use a key and an algorithm as specified by the credential authority or authorities. The keys and the data authentication algorithm may be specified as a credential parameter .","According to one embodiment of the present invention, the entire credential cryptogram (, ) is used as the credential ID. According to other embodiments of the present invention, a subset of the cryptogram is used as the credential ID.","Credential authority peer group ID  identifies the entity that provided data authentication for the credential . The entity that provided data authentication may comprise a single server. Alternatively, the entity that provided data authentication may comprise multiple credential authority servers, one of which maintains credential data corresponding to the credential ID. Credential authority servers comprising a particular credential authority peer group cooperate to locate credential data corresponding to the credential ID.","Credential parameters  refer to named parameter data. Credential parameters may include, by way of example, data authentication mechanisms or user authentication mechanisms. Credential parameters may also specify the identity of a user authentication server capable of performing at least part of the user authentication required for issuance of the requested credential. The credential parameters  may also specify a credential data format and mechanisms used to seal or unseal credential data. The credential parameters  may also include a quality of service (QoS) identifier. The QoS identifier indicates the verification performed by issuer of the credential during user enrollment. The verification may include user authentication. The verification may also include assessing the quality of any supporting credentials. The verification may also include assessing the truthfulness, accuracy and completeness of the credential data.","Credential data  comprise data associated with the credential. Sealed credential data  comprise encrypted credential data. Nested credentials  comprise one or more additional credentials. Note that only credential cryptogram  must be authenticated to perform secure nesting.","The combination of the credential ID , the credential cryptogram  and the credential authority peer group ID  may be used to represent the entire credential . The rest of the credential (reference numerals , ,  and ) may be stored separately. For example, the credential ID , credential cryptogram  and credential authority peer group ID  may be stored in a secure device such as a smart card, while the rest of the credential (reference numerals , ,  and ) is stored on a Web server.",{"@attributes":{"id":"p-0131","num":"0130"},"figref":["FIG. 9B","FIG. 9A","FIG. 9A","FIG. 9B"],"b":["910","945"]},"Credential data elements \u2013 may be stored together. Alternatively, some credential elements \u2013 may be used to represent a full credential and other credential elements \u2013 may be stored separately.","Turning now to , a block diagram that illustrates a credential that uses a cryptogram as an identifier in accordance with one embodiment of the present invention is presented.  is similar to  except that credential cryptogram  in  is also used as an identifier.","Turning now to , a flow diagram that illustrates a method for generating a credential in accordance with one embodiment of the present invention is presented.  provides more detail for reference numeral  of . At , a credential authority receives a credential request including one or more supporting credentials. The supporting credentials may include credentials created previously by the credential authority. The supporting credentials may also include credentials created previously by another credential authority. At , the credentials are processed. At , a determination is made regarding whether the credentials were processed successfully. If the credentials were not processed successfully, a failure is registered at  and a failure policy is applied at . The failure policy specifies actions to be performed when a failure is detected. An exemplary failure policy performs a user notification function when the error is detected.","Still referring to , if the credentials were processed successfully, a new credential is created at  and at  the credential is returned to the user that requested it. According to one embodiment of the present invention, the entire credential is returned to the user. According to another embodiment of the present invention, unique identifying information of the credential is returned and the rest of the credential is stored separately. For example, an embodiment using the credential format of  would return the credential ID , the credential cryptogram  and the credential authority peer group ID . An embodiment using the credential format of  would return the credential cryptogram  and the credential authority peer group ID .","Turning now to , a flow diagram that illustrates a method for processing a credential in accordance with one embodiment of the present invention is presented.  provides more detail for reference numeral  of . At , cryptographic data authentication of the credential is performed. Using the credential format of  as an example, credential cryptogram  is used to authenticate credential fields , ,  and . Alternatively, a particular data authentication mechanism may also authenticate the credential peer group ID . Using the credential format of  as an example, credential cryptogram  is used to authenticate credential fields , ,  and . Again, a particular data authentication mechanism may also authenticate the credential authority peer group ID . At , a determination is made regarding whether the credential cryptogram authenticates the credential data. If the credential cryptogram does not authenticate the credential data, the process ends with a failure indication at .","Referring again to , at  successful cryptographic data authentication is followed by the application of credential evaluation policies to (1) obtain the credential data if it is stored separately, (2) decrypt encrypted credential data and (3) determine credential data validity. At  the credential data is assessed to ensure that the credential data is proper in terms of the type of credential data presented, the content of the credential data and the required quality of service (QoS). At  user authentication is performed to ensure the credentials are associated with the user who is actually making the credential request. If the result of reference numerals , ,  or  is a failure, the process ends with a failure indication at . Otherwise, the process ends successfully at .","Turning now to , a flow diagram that illustrates a method for applying credential evaluation policies in accordance with one embodiment of the present invention is presented.  provides more detail for reference numeral  of . As discussed above, the unique identifying information of a credential may be stored separately from the rest of the credential data. Thus, at  a determination is made regarding whether credential data is included in the credential. If credential data is not included in the credential, the credential data is obtained at . If credential data is included in the credential, a determination is made at  regarding whether all embedded credentials that are needed are included in the credential. If not all such credentials are included, the needed credentials are obtained at . If all needed credentials are included, a determination is made at  regarding whether any data in the credential must be unsealed. The credential data to be unsealed may include nested credential data. If data must be unsealed, it is unsealed at . If no data needs to be unsealed, at  a determination is made regarding whether the credential data is valid. If the data is invalid, the process ends with a failure indication at . If the data is valid, the process ends successfully at .","Turning now to , a flow diagram that illustrates a method for assessing credential data in accordance with one embodiment of the present invention is presented.  provides more detail for reference numeral  of . At , a determination is made regarding whether the type of credential data presented is sufficient for the request made. In other words, the credential is evaluated for completeness. For example, if the credential authority requires a driver's license for a particular credential request, a determination is made regarding whether the credential data includes a driver's license. If the credential data does not include a driver's license, the credential data is insufficient for the request. If the credential data is insufficient, the request is rejected. Alternatively, the user could be prompted for the required credential data.","Still referring to , at  a determination is made regarding whether the credential data presented matches the request. The content of the credential data is evaluated. For example, suppose the credential-granting policy for a particular credential requires a valid driver's license. In this case, whether the credential request includes a driver's license is determined at , whereas whether the driver's license is expired is determined at . If this determination ends unsuccessfully, a failure indication is returned at . The process illustrated by  is used to assess credentials both by an authority during the enrollment process, and by a service provider in the process of providing a service. An authority creates a credential and therefore must assign values to credential data such as the QoS indicator. A service provider provides a service and does not need to create a credential (unless the service provider is actually an authority that provides credentials as a service). Thus, at  a determination is made regarding whether a credential needs to be created. If a credential needs to be created, at  the quality of service (QoS) of the credential being created is determined.","As part of validating credential data, an authority or service provider may require a certain level of user authentication. User authentication determines whether the credentials are associated with or belong to the user that is actually making the request, as opposed to someone else masquerading as the real user. User authentication may include, by way of example, asking for additional biometrics such as a fingerprint or retinal scan or the like. User authentication may also include a password challenge delivered to a cell phone known to belong to the user.","The QoS is a way of transferring information about how a credential was created to other entities that use or access the credential. The QoS is a reference to a policy statement established by an authority or group of authorities. For example, the QoS parameter of the credential may indicate the authority checked the user's drivers license or birth certificate. A different QoS might indicate the authority checked the user's drivers license, birth certificate and social security card.","A credential may include a QoS indicator that indicates the level of user authentication performed by the entity that authenticated the credential. A service provider may determine that the QoS indicated in a credential is insufficient to grant a service request. If so, the service provider may require additional user authentication. The Credential may also contain information regarding a user authentication server that is capable of performing additional user authentication.","According to another embodiment of the present invention, a logon credential includes a nested credential that asserts a particular process for user authentication. In other words, a logon credential includes a nested credential that includes a QoS for user authentication. The logon credential has its own QoS parameter embedded as part of its credential parameter. The logon credential also has a predetermined lifetime. For example, the QoS parameter of the logon credential could require a particular form of additional user authentication (such as a fingerprint or other biometrics) at predetermined intervals or events.","According to one embodiment of the present invention, a first credential is used to make a new credential having a more limited scope. For example, a first credential that grants access to view a web page or information unit may be used to create a second credential that provides access to a second Web page directly referenced by the first Web page for only 10 minutes. The same first credential might be used to create a third credential that provides access to any other Web pages referenced directly from the current Web page. More examples of using one or more credentials to create another credential are presented below with reference to .","Turning now to , a flow diagram that illustrates a method for performing user authentication in accordance with one embodiment of the present invention is presented.  provides more detail for reference numeral  of . At , a determination is made regarding whether user authentication is required. This determination is based upon the user-provided user authentication credential and the required QoS. If the user-provided user authentication credential provides a QoS that is less than the required QoS, additional user authentication is required. If user authentication is required, at  a determination is made regarding whether user-provided or nested credentials are sufficient to satisfy the required QoS if creating a credential, or as required by a service provider. If these credentials are insufficient, user authentication is performed at .","Turning now to , a flow diagram that illustrates a method for using a credential to obtain services in accordance with one embodiment of the present invention is presented.  provides more detail for reference numeral  of , including actions performed by a user and a server. At , a user visits a Web site. At , a service request and one or more credentials associated with the user are presented to the service provider server. At , the server receives the service request and credentials. At , the service provider processes the credentials as described above with respect to . At , the server determines whether the credentials were processed successfully. If the credentials were processed unsuccessfully, the requested service is denied at  and a service denial  is sent to the user that requested the service. If the credentials were processed successfully, the service is provided at . At , the user determines whether the service request was successful. If the service request was unsuccessful, a failure indication is made at  and the process ends at . If the service request was successful, the service is used at .",{"@attributes":{"id":"p-0148","num":"0147"},"figref":["FIGS. 16\u201333","FIGS. 17\u201323","FIGS. 24\u201330A","FIGS. 9A and 9B","FIGS. 30B\u201333"]},"Turning now to , a block diagram that illustrates assigning multiple identities to an individual in accordance with one embodiment of the present invention is presented. As shown in , an individual  may have multiple identities for different purposes. An individual  may be a customer of a payment authority such as a credit card (, ), a golfer , a member of the military  and a medical patient . An individual may also be a student , an investor , an employee , a university alumnus  and an automobile driver . Each of identities \u2013 is tied to relevant data. For example, relevant data for golfer identity  may include the golfer's handicap . Relevant data for medical patient identity  may include a patient's medical history . However, the golfer identity  does not need to know any medical history information  and the medical patient identity  does not need to know about golf handicaps .","Still referring to , some or all of the relevant data for an identity may be the same as relevant data for another identity. For example, some relevant data (such as degree program) for student identity  may be the same as relevant data for alumnus identity .","Turning now to , a block diagram that illustrates assigning multiple sets of user data for identities in accordance with one embodiment of the present invention is presented. As shown in , the user data \u2013 is stored in secure user data storage . Secure user data storage  is controlled by a user (user-controlled). The user data \u2013 may include encrypted data and\/or authenticated data. Secure user data storage  may comprise a portable device such as a cell phone, PDA or smart card or the like. Secure user data storage  may also comprise a file on a Web server or other computer.","According to one embodiment of the present invention, a portion of the user data is bit-mapped. The user data may be bit-mapped based upon, by way of example, based on membership in a group or category. For example, a portion of a user's data may be bit-mapped according to categories of books that the user is interested in.","Turning now to , a block diagram that illustrates conducting transactions between multiple parties on an open network while maintaining privacy in accordance with one embodiment of the present invention is presented.  illustrates buying a product from a vendor Web site. Secure user data storage  stores multiple sets of user data for identities as illustrated previously with respect to reference numeral  of . Secure user data storage  may reside on a desktop computer, a smart card, a PDA or the like. At , a user enrolls with payment agent  () at the payment agent's Web site. User data specific to the enrollment of that user is stored in secure user data storage . Payment agent  () determines whether user authentication is required. If user authentication is required, payment agent  () also determines the required level of user authentication. In addition, payment agent  () determines whether user data specific to the enrollment of the user must be encrypted.","According to embodiments of the present invention, user enrollment data includes user authentication information used for subsequent visits to a service provider Web site. In other words, the service provider-specific user or a reference to the user data is presented to the service provider Web site whenever the user data set is used to visit the same service provider Web site. The user authentication requirements of a particular service provider Web site will determine whether additional user authentication is required. For example, the stored user authentication data may suffice for a repeat visit to an Internet-based email site, but signing into a military Web site may require additional user authentication measures such as biometrics each time the site is visited, regardless of the stored user authentication data.","Still referring to , at , the same user data set is used to enroll with shipping agent . Thus, the shipping agent Web site  performs any required data authentication and\/or encryption of the user data and returns the user data to secure user data storage . At this point, secure user data storage  includes a user data set that has been used to enroll with two Web sites (, ). At , the user data set is used to shop for items at the Web site of Vendor A (). Once items are selected for purchase, Vendor A  sends the user data to payment agent  () for payment authorization. Payment agent  () decrypts user data if required user data is encrypted. Payment agent  () uses the user data in conjunction with vendor-provided transaction details to determine whether the purchase is authorized. At , payment agent  () sends an authorization indication to Vendor A . Next, Vendor A  creates a fulfillment record that includes order information and the shipping information from the secure user data storage . At , Vendor A  sends the fulfillment record to Fulfillment Company  and the Fulfillment Company  fulfills the order using shipping information from the fulfillment record originating from the user data. At , the fulfillment company  transfers the purchased goods to the shipping agent . At , the shipping agent delivers the goods to the address in the shipping information from secure data storage  ().","Many other devices or subsystems (not shown) may be connected in a similar manner. Also, it is not necessary for all of the devices shown in  to be present to practice the present invention, as discussed below. Furthermore, the devices and subsystems may be interconnected in different ways from that shown in . Code to implement the present invention may be operably disposed in a system memory or stored on storage media such as a fixed disk, floppy disk or CD-ROM.","According to one embodiment of the present invention, a Web site maintains a profile for the user. One exemplary use of a profile is to track the activity of a user at a particular Web site. The profile maintains information regarding the nature of the user activities with Vendor A . For example, the profile may maintain information regarding the frequency of visits, the items previously purchased, the items examined but not purchased, the preferred shipping method and the preferred payment method, allowing Vendor A  to provide intelligent services tailored to the buying pattern of a particular user data set.","The same process described above with regard to user data sets in secure user data storage  () applies to user data sets in secure user data storage  () as well.","Turning now to , a flow diagram that illustrates a method for conducting transactions between multiple parties on an open network while maintaining privacy in accordance with one embodiment of the present invention is presented. At , a user receives a user-controlled storage device, or a key to control access to such a device on the Web. At , a determination is made regarding whether it is time to enroll with a service provider. When it is time to enroll with a service provider, at  user data resulting from the enrollment process is stored on a user-controlled secure storage device. Some user data may be encrypted. Additionally, some user data may be cryptographically authenticated. At , a determination is made by the user regarding whether it is time to use the user data stored on the user-controlled secure storage device. When it is time to use the user data, at  the user data stored on the user-controlled secure storage device is used to obtain one or more services. At , a determination is made regarding whether the user data is still valid. If the user data is still valid, execution continues at . If the user data is no longer valid, it is discarded at .","According to one embodiment of the present invention, user data required to obtain a new service is obtained by dynamically combining the request for new service with at least one user data set obtained from a previous enrollment. For example, a user that shops at a first book vendor Web site may exhibit one or more preferences for books belonging to certain categories, based both on the books purchased at the Web site and on the books examined but not purchased. The first book vendor may save this information in a profile. The user may want to use all or part of this information when the user shops at a second book vendor Web site. Accordingly, a service request made by the user for service at the second book vendor Web site is automatically combined with the profile information used when shopping at the first book vendor Web site, thus creating a new profile for use by the user when shopping at the second book vendor Web site.","Turning now to , a flow diagram that illustrates a method for using user data stored on a user-controlled device to obtain services in accordance with one embodiment of the present invention is presented.  provides more detail for reference numeral  of . At , a user visits a Web site. At , a service request and associated user data are presented to the service provider server. At , the server receives the service request and associated user data. At , the service provider processes the user data to determine whether the user data provided is sufficient to grant the request. At , the server determines whether the user data was processed successfully. If the user data was processed unsuccessfully, the requested service is denied at  and a service denial  is sent to the user that requested the service. If the user data was processed successfully, the service is provided at . At , the user determines whether the service request was successful. If the service request was unsuccessful, a failure indication is made at  and the process ends at . If the service request was successful, the service is used at .",{"@attributes":{"id":"p-0162","num":"0161"},"figref":["FIGS. 21 and 22","FIG. 20","FIG. 21","FIG. 22"],"b":"2060"},"Turning now to , a flow diagram that illustrates a method for providing a service in accordance with one embodiment of the present invention is presented.  provides more detail for reference numeral  of . At , user data is received. At , one or more Web pages at a Web site are customized based on the user data stored on a user-controlled device.","Turning now to , a flow diagram that illustrates a method for providing a service in accordance with user data in accordance with one embodiment of the present invention is presented.  provides more detail for reference numeral  of . At  a vendor performs payment authorization using payment data from a user-controlled secure device. At  the vendor creates a fulfillment record that includes order information and the shipping information from the user-controlled secure device. At , the vendor sends a fulfillment record to a fulfillment company. At , the fulfillment company fulfills the order using shipping information from the fulfillment record originating from the user data. At , the fulfillment company transfers the purchased goods to the shipping agent. At , the shipping agent delivers the goods to the address in the shipping information from the user-controlled secure device.","Turning now to , a flow diagram that illustrates a method for performing payment authorization using payment data from a secure device in accordance with one embodiment of the present invention is presented.  provides more detail for reference numeral  of . At , the vendor sends a payment request to a payment-clearing agent using the payment data originating from the secure device, including transaction details such as the amount to be charged in the request. At , the payment-clearing agent receives the payment request and the amount to be charged. At , the payment-clearing agent sends a response. For example, the payment clearing agent may send a transaction ID and the amount charged. Depending upon the contents of the response, all or part of the response may comprise a cryptographically encrypted message.",{"@attributes":{"id":"p-0166","num":"0165"},"figref":["FIGS. 24\u201330A","FIGS. 9A and 9B"]},"Turning now to , a block diagram that illustrates assigning multiple credentials for identities in accordance with one embodiment of the present invention is presented.  is similar to , except that service credentials \u2013 are stored in the secure device . In other words, the service credentials \u2013 of  are based upon and contain, directly or indirectly, the user data \u2013 of .","Turning now to , a block diagram that illustrates conducting transactions between multiple parties using service credentials on an open network while maintaining privacy in accordance with one embodiment of the present invention is presented.  illustrates buying a product from a vendor Web site. Secure service credential storage  stores multiple sets of service credential for identities as illustrated previously with respect to reference numeral  of . Secure service credential storage  may reside on a desktop computer, a smart card, a PDA or the like. At , a user enrolls with payment agent  () at the payment agent's Web site. A service credential specific to the enrollment of that user is stored in secure service credential storage . Payment agent  () determines whether user authentication is required. If user authentication is required, payment agent  () also determines the required level of user authentication. In addition, payment agent  () determines whether user data included in the service credential specific to the enrollment of the user must be encrypted.","According to embodiments of the present invention, user data includes user authentication information used for subsequent visits to a service provider Web site. In other words, the authority-specific authentication data or a reference to the data is presented to the service provider Web site whenever the service credential is used to visit the same service provider Web site. The user authentication requirements of a particular service provider Web site will determine whether additional user authentication is required. For example, the stored user authentication data may suffice for a repeat visit to an Internet-based email site, but signing into a military Web site may require additional user authentication measures such as biometrics each time the site is visited, regardless of the stored user authentication data.","Still referring to , at , the user  enrolls with shipping agent , providing specific data such as a shipping address. Data provided at  when enrolling with shipping agent  may differ in whole or in part from data provided when enrolling with payment agent  at . Thus, the shipping agent Web site  performs any required data authentication and\/or encryption of the service credential and returns the service credential to secure service credential storage . At this point, secure service credential storage  includes a service credential set that has been created by enrolling with two Web sites (, ) functioning as authorities. At , the service credential set is used to obtain service such as shopping at the Web site of Vendor A (). Once items are selected for purchase, Vendor A  sends the service credential obtained from the secure service credential storage to payment agent  () for payment authorization. Payment agent  () decrypts any data contained in a service credential if any required data is encrypted. Payment agent () uses data contained in the service credential in conjunction with vendor-provided transaction details to determine whether the purchase is authorized. At , payment agent  () sends an authorization indication to Vendor A . Next, Vendor A  creates a fulfillment message that includes order information and the shipping information obtained from the secure service credential storage . According to one embodiment of the present invention, the fulfillment message comprises a fulfillment credential. At , Vendor A  sends the fulfillment message to Fulfillment Company  and the Fulfillment Company  fulfills the order using shipping information from the fulfillment message. At , the Fulfillment Company  transfers the purchased goods to the shipping agent . At , the shipping agent delivers the goods to the address in the shipping information originating from secure data storage  ().","Turning now to , a flow diagram that illustrates a method for conducting transactions between multiple parties using service credentials on an open network while maintaining privacy in accordance with one embodiment of the present invention is presented. At , a service credential is generated. At , a determination is made regarding whether it is time to use the credential. When it is time to use the service credential, at  the service credential is used to obtain services. At , a determination is made regarding whether the service credential is still valid. If the service credential is still valid, at  a determination is made regarding whether the service credential must be updated. If the service credential must be updated, it is updated at . Execution continues at  when the service credential is still valid. If the service credential is no longer valid, it is discarded at .","Turning now to , a block diagram that illustrates using nested credentials in accordance with one embodiment of the present invention is presented.  illustrates using the credential format of  for the example discussed with reference to . In this example, a user on 01-JAN-2002 initiates a Web experience. Login credential  allows the user access to the Web. Logon credential  includes two credential parameters . The \u201cType\u201d parameter indicates the credential is a \u201cLogon\u201d credential, and credential data is a user profile. The \u201cQoS\u201d parameter indicates a (username, password) combination has been used to authenticate a user. The \u201cexpiry\u201d parameter also indicates the credential expires on 01-JAN-2002. The credential data  includes a bit-mapped customer profile and there is no sealed credential data . Logon credential  also includes nested credentials . Reference numeral  illustrates an expanded view of nested credentials .","The nested credentials (, ) include a payment credential  and a shipping agent credential . The payment credential parameters  indicate the credential is a credit card payment credential. The credential data  includes the purchase class for which the holder of the credential is approved. Examples of a purchase class include, by way of example, a hotel payment or a book payment for a specific maximum value. The sealed credential data  includes the card holder details such as the account number and the actual credit limit.","The shipping agent credential parameters  indicate the credential is a \u201cshipping\u201d credential. The credential data  includes the customer's nearest shipping agent location and the type of service. The sealed credential data  includes the shipping agent account number and the shipping address.","Turning now to , a flow diagram that illustrates a method for conducting transactions between multiple parties using service credentials on an open network while maintaining privacy in accordance with one embodiment of the present invention is presented. At , a secure service credential storage device is received. At , a determination is made regarding whether it is time to enroll with an authority. When it is time to enroll, at  a service credential is generated based on user information provided in the enrollment request. At , the credential cryptogram and credential authority peer group ID are stored. They may be stored in a user-controlled personal device. Examples of user-controlled personal devices include, by way of example, a smart card, a cell phone, a personal digital assistant (PDA) or the like. Alternatively, they may be stored in a Web locker and the digital key to the locker may be stored in a secure device. At , a determination is made regarding whether it is time to use the service credential. When it is time to use the service credential, at  the service credential is used to obtain services. At , a determination is made regarding whether the service credential is still valid. If the service credential is still valid, at  a determination is made regarding whether the service credential must be updated. If the service credential must be updated, it is updated at . Execution continues at  when the credential is still valid. If the credential is no longer valid, it is discarded at .","Turning now to , a flow diagram that illustrates a method for using a service credential stored on a user-controlled device to obtain services in accordance with one embodiment of the present invention is presented.  provides more detail for reference numeral  of .  is similar to  except that  illustrates using a service credential whereas  illustrates using user data.","Turning now to , a flow diagram that illustrates a method for providing a service in accordance with one embodiment of the present invention is presented.  provides more detail for reference numeral  of . At , a vendor performs payment authorization using a nested payment credential extracted from a customer service credential specific to what is being bought. At , the vendor creates a fulfillment message that includes order information and the shipping credential extracted from the customer service credential. According to one embodiment of the present invention, the fulfillment message comprises a fulfillment credential. At  the vendor sends the fulfillment message to the fulfillment company. At , the fulfillment company fulfills the order using the nested shipping credential extracted from the fulfillment message. At , the fulfillment company transfers the purchased goods to the shipping agent. At , the shipping agent delivers the goods to the address encrypted in the sealed part of the credential.","The use of the credential format in the above example is not intended to be limiting in any way. Those of ordinary skill in the art will recognize that other data formats may be used.","According to one embodiment of the present invention, rather than using a fulfillment company to fulfill the order, after the fulfillment message is created (reference numeral  of ), the fulfillment message is stored on a secure service credential storage device. According to one embodiment of the present invention, the fulfillment message is stored on a portable device such as a PDA, cell phone or smart card. According to another embodiment of the present invention, a digital key to a Web locker that contains the fulfillment credential is stored on the device. The user then brings the secure service credential storage device to the vendor's store and presents the service credential to the vendor in person. The vendor processes the credential and performs any required user authentication. Once the user is properly authenticated, the vendor presents the purchased item to the customer.","Turning now to , a flow diagram that illustrates a method for performing a payment authorization using nested payment credentials extracted from a service credential in accordance with one embodiment of the present invention is presented.  provides more detail for reference numeral  of . At , the vendor sends a payment request to the payment-clearing agent using the nested payment credential from the service credential, including in the request transaction details such as the amount to be charged. At , the payment-clearing agent decrypts the sealed part of the nested credential. At , the payment-clearing agent sends a response. For example, the clearing agent may send a response that includes a transaction identifier and the amount charged. Depending upon the contents of the response, all or part of the response may comprise a cryptographically encrypted message.",{"@attributes":{"id":"p-0181","num":"0180"},"figref":"FIGS. 30B\u201333"},"Resource-constrained devices are generally considered to be those that are relatively restricted in memory and\/or computing power or speed, as compared to typical desktop computers and the like. Although the particular implementation discussed below is described in reference to a smart card, the invention can be used with other resource-constrained devices including, but not limited to, cellular telephones, boundary scan devices, field programmable devices, personal digital assistants (PDAs) and pagers, as well as other miniature or small footprint devices. The invention can also be used on non-resource constrained devices.","For the purpose of this disclosure, the term \u201cprocessor\u201d may be used to refer to a physical computer or a virtual machine.","Turning now to  a block diagram that illustrates assigning multiple sets of user data for identities in accordance with one embodiment of the present invention is presented.  is similar to , except a smart card  is used for secure data storage (reference numeral  of ).","Turning now to , a block diagram that conducting transactions between multiple parties using a smart card on an open network while maintaining privacy in accordance with one embodiment of the present invention is presented.  is similar to , except a smart card (, ) is used for secure user data storage (reference numerals  and  of ).","Turning now to , a block diagram that illustrates development of an applet as may be used to provide a secure user access control function for a resource-constrained device such as a smart card is presented. Development of an applet for a resource-constrained device such as a smart card  begins in a manner similar to development of a Java\u2122 program. In other words, a developer writes one or more Java\u2122 classes and compiles the source code with a Java\u2122 compiler to produce one or more class files . The applet can be run, tested and debugged, for example, on a workstation using simulation tools to emulate the environment on the card . When the applet is ready to be downloaded to the card , the class files  are converted to a converted applet (CAP) file  by a converter . The converter  can be a Java\u2122 application being executed by a desktop computer. The converter  can accept as its input one or more export files  in addition to the class files  to be converted. An export file  contains naming or linking information for the contents of other packages that are imported by the classes being converted.","In general, the CAP file  includes all the classes and interfaces defined in a single Java\u2122 package and is represented by a stream of 8-bit bytes. All 16 bit and 32-bit quantities are constructed by reading in two or four consecutive 8-bit bytes, respectively. Among other things, the CAP file  includes a constant pool component (or \u201cconstant pool\u201d)  which is packaged separately from a methods component . The constant pool  can include various types of constants including method and field references which are resolved either when the program is linked or downloaded to the smart card  or at the time of execution by the smart card. The methods component  specifies the application instructions to be downloaded to the smart card  and subsequently executed by the smart card.","After conversion, the CAP file  can be stored on a computer-readable medium  such as a hard drive, a floppy disk, an optical storage medium, a flash device or some other suitable medium. Or the computer-readable medium can be in the form of a carrier wave, e.g., a network data transmission, or a radio frequency (RF) data link.","The CAP file  then can be copied or transferred to a terminal  such as a desktop computer with a peripheral card reader . The card reader  allows information to be written to and retrieved from the smart card . The card reader  includes a card port (not shown) into which the smart card  can be inserted. Once inserted, contacts from a connector press against the surface connection area on the smart card  to provide power and to permit communications with the smart card, although, in other implementations, contactless communications can be used. The terminal  also includes an installation tool  that loads the CAP file  for transmission to the card .","The smart card  has an input\/output (I\/O) port  that can include a set of contacts through which programs, data and other communications are provided. The card  also includes an installation tool  for receiving the contents of the CAP file  and preparing the applet for execution on the card . The installation tool  can be implemented, for example, as a Java\u2122 program and can be executed on the card . The card  also has memory, including volatile memory such as RAM . The card  also has ROM  and non-volatile memory, such as EEPROM . The applet prepared by the controller  can be stored in the EEPROM .","In one particular implementation, the applet is executed by a virtual machine  running on a microprocessor . The virtual machine , which can be referred to as the Java Card\u2122 virtual machine, need not load or manipulate the CAP file . Rather, the Java Card\u2122 virtual machine  executes the applet code previously stored as part of the CAP file . The division of functionality between the Java Card\u2122 virtual machine  and the installation tool  allows both the virtual machine and the installation tool to be kept relatively small.","In general, implementations and applets written for a resource-constrained platform such as the smart card  follow the standard rules for Java\u2122 platform packages. The Java\u2122 virtual machine and the Java\u2122 programming language are described in T, Lindholm et al., The Java\u2122 Virtual Machine Specification (1997), and K. Arnold et al., The Java\u2122 Programming Language Second Edition, (1998). Application programming interface (API) classes for the smart card platform can be written as Java\u2122 source files which include package designations, where a package includes a number of compilation units and has a unique name. Package mechanisms are used to identify and control access to classes, fields and methods. The Java Card\u2122 API allows applications written for one Java Card\u2122-enabled platform to run on any other Java Card\u2122-enabled platform. Additionally, the Java Card\u2122 API is compatible with formal international standards such as ISO 7816, and industry-specific standards such as Europay\/MasterCard\/Visa (EMV).","Although a virtual machine  running on a microprocessor  has been described as one implementation for executing the bytecodes on the smart card , in alternative implementations, an application-specific integrated circuit (ASIC) or a combination of a hardware and firmware can be used instead.","Referring to , controller  uses an installation tool  for receiving the contents of the CAP file  and preparing the applet to be executed by a processor . The installation tool  can be implemented, for example, as a Java\u2122 program that has been suitably converted to execute on the smart card . In the description below, it is assumed that the controller  comprises a virtual machine program  running on a microprocessor . The virtual machine  need not load or manipulate the CAP file . Rather, the virtual machine  executes the applet code in the Cap file . The division of functionality between the virtual machine  and the installation tool  allows both the virtual machine and the installation tool to be kept relatively small. In alternative implementations, the controller  can be hardwired, for example, as an application-specific integrated circuit (ASIC) or it can be implemented as a combination of a hardware and firmware.","As shown in , a computer  is equipped with a card reader  for receiving the card  of . The computer  may be connected to a data communications network  that communicates with a plurality of other computing devices, such as a server . It is possible to load data and software onto a smart card over the data communications network  using card equipped devices. Downloads of this nature can include applets or other programs to be loaded onto a smart card as well as profile data, digital cash and other information used in accordance with a variety of electronic commerce and other applications. The instructions and data used to control processing elements of the card reader and of the smart card may be stored in volatile or non-volatile memory or may be received directly over a communications link e.g., as a carrier wave containing the instructions and\/or data. Further, for example, the network  can be a LAN or a WAN such as the Internet or other network.","According to embodiments of the present invention, multiple user data formats may be used to store user data in the same secure user data storage device. As shown in , secure user data storage device TBD uses five user data formats: service credential (, , , ), cookie (, ), data format A (), text file (, ) and data format B (). Those of ordinary skill in the art will recognize that other formats are possible.",{"@attributes":{"id":"p-0197","num":"0196"},"figref":"FIG. 33B"},"Privacy-Protecting Logon Mechanisms",{"@attributes":{"id":"p-0198","num":"0197"},"figref":"FIGS. 34\u201341"},"For the purposes of this disclosure, the term \u201cRandomized ID\u201d refers to a pseudo-random identifier.","Turning now to , a block diagram that illustrates an identifier in accordance with one embodiment of the present invention is presented. Identifier  includes an identification server ID  and a randomized ID . The identification server ID  identifies a collection of one or more federated identity servers, including one identity server containing additional information associated with the randomized ID . According to embodiments of the present invention, the identification randomized ID  is computed over data that is associated with the ID and that is stored in one of the federated identification servers. According to one embodiment of the present invention, the computation comprises using a cryptographic algorithm, in which case the ID  comprises a cryptogram of the stored data as described previously with respect to reference numeral  of  and reference numeral  of .","Turning now to , a block diagram that illustrates using federated identification servers and federated user authentication servers using a randomized user identifier to gain access to a service while maintaining privacy in accordance with one embodiment of the present invention is presented.  illustrates two mechanisms by which a user  uses a personal device (, , ) connected to a client host  to gain access to one or more service provider servers . Both mechanisms use the randomized ID of  to identify a user, thus protecting user privacy. The first mechanism employs a portal  in communication with the client host . The portal performs identification and user authentication functions to enable connecting to a service provider  via a personal device such as a smart card , PDA  or cell phone . The second mechanism allows access to services either directly from a personal device (, , ) or from a personal device (, , ) via a client host .","Client host  comprises a terminal or kiosk capable of receiving user input and presenting user information. Client host  provides a user interface to the Web. Client host  may be configured with a card reader to accept a smart card.","Service portal  includes a user interface such as a Web page tailored for starting the Web experience. The service portal  is the place where a user obtains a logon credential. The logon credential may include a timestamp and an indication of the QoS of the user authentication performed. Service providers may require additional user authentication.","Service provider servers  represent all Web servers accessible on the Web, which are referenced through the service portal . Service provider servers  comprise all the services accessible on the Web that do not have their own portal but require that the user be logged on. For the purposes of this disclosure, being \u201clogged on\u201d refers to the requirement for a particular server to process user-specific information such as a user profile in conjunction with rendering a service. For example, service provider servers  may include credential authorities, shipping agents, payment agents, order fulfillment companies and the like. Therefore, service provider servers  may be accessed by the user via the service portal . One or more of the service provider servers  may also be accessed directly using a credential that references a service provider server, either directly or via a nested credential.","Federated identity servers  assert the truthfulness, accuracy and completeness of data to be stored according to the quality statements associated with the data. A QoS may be a reference to a policy statement that indicates the level of verification performed.","Federated user authentication servers  perform user authentication services in a peer group fashion, such as in the Gnutella the peer-to-peer search protocol and JXTA\u2122.","The PDA  and cell phone  may communicate with client host  using protocols including Bluetooth\u2122, IEEE 802.15 and Infrared Data Association (IrDA) Data standards including Fast Infrared (FIR) and Serial Infrared. Those of ordinary skill in the art will recognize that other protocols may be used as well.","The PDA  and cell phone  devices may be equipped with a card reader to accept an external smart card. If equipped with an external card reader and a communications link to a client host  a PDA  or cell phone  may be used as a card reader . Alternatively, the PDA  and cell phone  may be used without an external smart card. Additionally, cell phone  may communicate directly with service provider servers .","According to one embodiment of the present invention, client host  maintains a list of preferred service portals. A connection via a service portal on the preferred list is attempted before connecting via another service portal.","Direct Access to Service Provider Servers","As mentioned previously, service provider servers require that a user be logged on. According to one embodiment of the present invention, the portal acts as an authority or single sign on service server in that it performs user authentication and creates an authenticated logon message. According to one embodiment of the present invention, the logon message comprises a credential as described with reference to . The logon credential is then returned to the user for subsequent use as a single-sign-on token. The user may store the single-sign-on token on a personal device such as a smart card, cell phone or PDA. The logon credential or single-sign-on token enables the user to directly access the service provider server. When needed for access to a server, the user activates access control on the PDA, smart card or cell phone and sends the single-sign-on token to the service provider server. The service provider server may require additional user authentication, depending upon the type of service requested.","Turning now to , a flow diagram that illustrates a method for using federated identification servers and federated user authentication servers using a randomized user identifier to gain access to a service while maintaining privacy in accordance with one embodiment of the present invention is presented. At , a randomized user identifier is obtained. At , a determination is made regarding whether it is time to use the credential. When it is time to use the credential, at  the randomized ID is presented to a service portal. At , a service portal sends a user authentication request to the identity server federation that contains the randomized identifier. At , all servers in the identity server peer group search for a match with the randomized identifier. At , a determination is made regarding whether a match was found. If there is no match, an indication is made at . If there is a match, at  matching entries from the identity server federation are presented to a user authentication server federation to determine a single valid user data entry. Depending upon the amount of user authentication required and the capabilities of each user authentication server, multiple user authentication servers may cooperate in providing the required user authentication.","According to one embodiment of the present invention, the federated identity peer group is comprised of sub-groups and each sub-group is assigned a priority value. A randomized ID is searched for according to sub-group priority. The sub-group having the highest priority searches for a randomized ID first. If the randomized ID is not found, the sub-group having the next-highest priority value performs the search.","Turning now to , a flow diagram that illustrates a method for using federated identification servers and federated user authentication servers using a randomized user identifier to gain access to a service while maintaining privacy in accordance with one embodiment of the present invention is presented. At , a user enrolls for a service. At , a randomized ID is received in response to the enrolling. According to one embodiment of the present invention, a printed randomized ID is received. According to another embodiment of the present invention, a barcode representing the randomized ID is received. At , the randomized ID is stored. At , a determination is made regarding whether it is time to use the ID. When it is time to use the ID, at  the randomized ID is used to obtain services.","A policy between the randomized ID creator and the randomized ID user determines whether a randomized ID is valid. According to one embodiment of the present invention, the randomized ID is valid for a predetermined amount of time. According to another embodiment of the present invention, the randomized ID is valid for a predetermined number of uses. In other words, the ID may be used for a predetermined number of times before it becomes invalid. Those of ordinary skill in the art will recognize that other ID validity mechanisms are possible.","Referring again to , at  a determination is made regarding whether the ID is still valid. If the ID is still valid, the ID is used beginning at . If the ID is in the form of a barcode, it is used by scanning the barcode. If the ID is stored in a personal device such as a cell phone, PDA or smart card, the number is communicated from the personal device to the service provider Web server. If the ID is no longer valid, a new ID is received at  and it is used to obtain a service beginning at .","Turning now to , a block diagram that illustrates enrolling with an identity server in accordance with one embodiment of the present invention is presented. At , user  communicates a user identity credential request to federated identity servers , using either the client host  directly, or by using the client host  via a personal device such as a smart card , PDA  or cell phone . The user includes in the user identity credential request  data to be stored. The request may also include a preferred user authentication mechanism and a quality of service (QoS) indicator. Federated identity servers  verify the truthfulness, accuracy and completeness of the data to be stored according to the QoS indicator. The verification may include data authentication as described above. The verification may also include user authentication.","Once the federated identifier servers  have verified the data, the federated identity servers  enroll the user in one of the federated user authentication services that may be requested to perform one or more specific user authentication procedures to authenticate the user in a future logon request. At , the federated identity servers  return a user identity credential to the user  via client host .","Before user  uses service portal  to obtain services on the Web, the user  must be authenticated. This is accomplished by using the user identity credential and authenticated data in it. This may result in a service credential. User  issues a service request, including a server group ID and the user identity credential. The service portal  passes the identity credential to the federated identity server group indicated by the server group ID to authenticate the user. The federated identity servers  may delegate some or all user authentication tasks to federated user authentication servers .","According to one embodiment of the present invention, user authentication includes issuing a challenge to a user's personal device (, , ) directly from a federated user authentication server . According to one embodiment of the present invention, user authentication includes issuing a challenge from a federated user authentication server  to a user's personal device (, , ) via a client host .","According to one embodiment of the present invention, a response to a challenge is communicated directly to the federated user authentication server  that issued the challenge. According to another embodiment of the present invention, a response to a challenge is communicated via a client host  to the federated user authentication server  that issued the challenge. According to one embodiment of the present invention, the response to the challenge is cryptographically processed by a cell phone, smart card, PDA.","Once the user is authenticated, service portal  returns a logon credential to the client  via client host . The user may use the logon credential to obtain services from service providers that are accessible via the service portal .","Turning now to , a block diagram that illustrates possible credential types in accordance with one embodiment of the present invention is presented. Reference numeral  represents creating a user identity credential. A user identity credential comprises a randomized ID and the ID of an identification authority.","A user identity credential indicates a user has enrolled for single-sign-on services provided by a federation of user identity servers. Creating a user identity credential was described above with respect to .","Once a user identity credential is obtained, a user may then perform a logon process to create a logon credential . A logon credential  may be stored as \u201cSession ID cookie\u201d on a client host. A logon credential  includes an indication of when the logon credential will expire, and the client host IP address or any other unique identifier, thus fixing a particular client host to a logon credential and the user represented by the credential. A logon credential is thus limited in time and place. Creating a logon credential was described above with respect to .","A logon credential indicates a user is logged in through a particular client host at a particular place. This enables secure delivery of proprietary or paid for information, or other content that must be delivered to the correct device. A logon credential may be stored on a client host because it is only valid when a user is working on that client host.","A new dynamic user identity credential  may be obtained in the process of obtaining the logon credential . It may be updated with additional user data and credentials  in a reenrollment process. Alternatively, the logon credential  may be used to create a service credential.","A service credential is a one-time token for a session with a specific server that may be obtained by applying a logon credential when accessing a service, while a logon credential may be used for multiple simultaneous sessions for multiple service providers. A service provider creates a service credential for its own use. A service credential may be applied to obtain further specific services, either for immediate use or fulfillment, or for postponed use or fulfillment. If the service credential is applied for immediate use of a service, a fulfillment credential  may be dynamically created to satisfy the requested use. Reference numeral  represents the consumption or use of the fulfillment credential, after which time the fulfillment credential can no longer be used and can be discarded.","If the service credential is applied to a service for later use, a rights key credential  may be created. The entire rights key credential may be stored on a secure client host or personal device. Alternatively, the rights key credential may be stored in a locker  and a locker access credential is created  and then stored  on a secure host or personal access device. In other words, the first method stores the entire rights key credential on a secure device, while the second method stores or locks the entire rights key on a resource server somewhere on the Web, and stores a key to the rights key on a secure device. A Locker access credential is a special rights key credential, where the resources protected by the rights key are other credentials.","An exemplary use of a locker mechanism is as follows: A user shops a vendor Web site and purchases the rights to listen to a selection of music tracks for a year. A set of rights key credentials is used to store the rights purchased by the user and the rights keys are used later to access the resource(s) directly.","According to another embodiment of the present invention, any of the logon credential, service credential and fulfillment credential are cookies.","The process described with respect to  is not intended to be limiting in any way. Those of ordinary skill in the art will recognize that other credentials may be created for other purposes. Furthermore, credentials may be created using a sequence other than that shown in .","Turning now to , a block diagram that illustrates using a randomized identifier for access to distributed resources while maintaining privacy in accordance with one embodiment of the present invention is presented. As shown in , user data is distributed among multiple places. Access to resources owned by a user is protected by one or more credentials. A credential includes a randomized ID, revealing nothing about the identity of the recipient. This search and match operation completely hides the identity of entity accessing the data, thus preventing leaking information about the identity of the user opening or gaining access to the resource. Furthermore, having data distributed over several peer groups ensures privacy because no single entity can actually use the information each of these groups stores.","According to embodiments of the present invention, a user authentication server federation performs user authentication on matching entries from an identity server federation. The user authentication server federation performs a sufficient level of user authentication to support the required QoS. The user authentication may receive a credential supporting a first QoS, perform additional user authentication and then return a credential supporting a higher level QoS.","Turning now to , a flow diagram that illustrates a method for presenting a matching entry or entries from an identity server federation to a user authentication server federation to determine a single valid user data entry in accordance with one embodiment of the present invention is presented.  provides more detail for reference numeral  of . At , for each user authentication server, a user record for the user that has been found by the identification server is retrieved. At , a determination is made regarding whether the required QoS for user authentication can be met by the current user authentication server. If the current user authentication server cannot meet the required QoS, at  a request is made for one or more other cooperating user authentication servers to perform additional user authentication. If the current user authentication server can meet the required QoS, at  the client is engaged with using a challenge-response protocol or other protocol to obtain the required QoS. In this context, the term \u201cQoS\u2019 is an indication of how much effort has been made by the user authentication servers working together to establish that the user is actually present at a terminal and intent on proceeding with the service request such as, by way of example, a purchase transaction. At , the user authentication credential is returned.","According to one embodiment of the present invention, user authentication includes determining a cell phone number for a user and issuing a user authentication challenge to the user via the cell phone. The user authentication challenge may be, by way of example, a password challenge.","According to another embodiment of the present invention, user authentication includes the use of biometrics such as a retinal scan or fingerprint.","According to another embodiment of the present invention, user authentication includes asking a smart card to engage in a cryptographic protocol to confirm that the user has entered a PIN number for the card.","According to another embodiment of the present invention, the user authentication includes asking a smart card to engage in a protocol to authenticate a user using biometrics stored on the card.","According to another embodiment of the present invention, an encrypted PIN pad is used to enter a PIN number for the card.","According to another embodiment of the present invention, user authentication includes a combination of password\/PIN and biometrics.","According to another embodiment of the present invention, the user authentication server federation includes at least one user authentication server that is specialized to perform a single type of user authentication. Having separate user authentication servers that perform different functions enhances privacy because the data about an individual is spread among multiple servers.",{"@attributes":{"id":"p-0242","num":"0241"},"figref":"FIGS. 42A\u201346C"},"Turning now to , a block diagram that illustrates data stored in a resource server in accordance with one embodiment of the present invention is presented. As shown in , a resource server stores resources  and associated rights key credential identifiers. A resource may be, by way of example, access to a Web page or audio track. Each rights key credential includes one or more cryptographic keys that allow access to the associated resource. Thus, the identifiers  are identifiers of credentials that give access to a resource.","When a user wants to use a resource, the user presents a rights key credential and a request for a resource to a resource server. The resource server finds a resource matching the rights key credential. Rights keys in the credential are used to open or gain access to the resource.","According to one embodiment of the present invention, the entire rights key credential is stored on a secure device. According to another embodiment of the present invention, the credential ID is stored in a secure device and the rest of the rights key credential is stored separately.","One example of a use of this embodiment is where the resource is requested by a third party (such as a merchant accessing user data) that is not the owner but has permission of the owner to access the resource. In this case, it is possible that when the resource owner enrolls, the resource owner may authorize the third party to access the owner's credential and copy it into the third party's credential mechanism, thus providing the third party with indirect access to the resource protected by the credential. A second rights key ID may be associated with the resource referring to the rights key credential held by the owning user.","Turning now to , a block diagram that illustrates data stored in a resource server in accordance with one embodiment of the present invention is presented.  is similar to , except that  includes references to one or more cryptographic protection mechanism  that are available for use to provide a cryptographic protection when delivering the resource content to the user.","Turning now to , a block diagram that illustrates obtaining a resource from a resource server in response to a resource request including a set of rights keys in accordance with one embodiment of the present invention is presented.","Turning now to , a block diagram that illustrates obtaining a resource from a resource server in response to a resource request including a set of rights keys and a reference to a delivery protection mechanism and optionally a target device in accordance with one embodiment of the present invention is presented. According to this embodiment, resources are delivered to the client host or the optionally provided target device under protection of the referenced cryptographic mechanism.","Turning now to , a block diagram that illustrates a rights key credential in accordance with one embodiment of the present invention is presented. The credential data field  and the sealed credential data field  include cryptographic key data. Public keys may be stored in the credential data field , while secret keys are stored in the sealed credential data field . Nested credentials  may refer to credentials that relate to a resource delivery mechanism. For example, a user with a credential that entitles the user to play an MP3 file may indicate a connection should be made directly with a client device such as an MP3 player via an infrared connection to a client host. This increases user control over the use of remotely-stored resources.","Turning now to , a flow diagram that illustrates a method for obtaining access to a resource in accordance with one embodiment of the present invention is presented. At , a resource server is sent a resource request that includes a rights key credential. At , the resource server matches the key with an identifier in a set of identifiers associated with a resource. At , a determination is made regarding whether a new ID must be created. If a new ID must be created, it is created at . If in this case, the ID is returned to the user. At , the resource found at  is returned.","Turning now to , a flow diagram that illustrates a method for obtaining access to a resource requiring multiple keys in accordance with one embodiment of the present invention is presented. Multiple keys may be used, by way of example, when the owner of a resource and the entity requesting the resource are different entities. At , a resource server is sent a resource request that includes a first rights key credential and a second rights key credential. At , the resource server matches both keys with identifiers in a set of identifiers associated with a resource. At , a determination is made regarding whether a new ID must be created. None, one or both of the IDs may need to be created. If a new ID must be created, it is created at . At , the resource found at  is returned.",{"@attributes":{"id":"p-0253","num":"0252"},"figref":["FIG. 46A","FIG. 46A"],"b":["4600","4620","4625","4630"]},{"@attributes":{"id":"p-0254","num":"0253"},"figref":"FIG. 46B"},{"@attributes":{"id":"p-0255","num":"0254"},"figref":"FIG. 46C"},{"@attributes":{"id":"p-0256","num":"0255"},"figref":"FIGS. 46D","b":["47","48"]},"For the purposes of the present disclosure, the term \u201cAggregation\u201d refers to transforming specific user data into less specific and thus more approximate user data and the term \u201cAggregation authority\u201d refers to an authority that performs this function. Aggregation includes obtaining information about a user that is not exact. For example, a service provider might store the number of times any Web page with a certain attribute was accessed, instead of storing the Web page URL or the Web page itself.","An aggregation authority may be classified in terms of the aggregation policies the authority applies. An external aggregation authority applies publicly accepted aggregation policies. A peer aggregation authority applies aggregation policies shared with another peer aggregation authority. An internal aggregation authority applies its own private aggregation policies. A peer group authority may restrict access to its policies to its peers.","Aggregation itself may be static or dynamic. The term \u201cstatic aggregation\u201d refers to performing aggregation based only upon user-provided information. An aggregation authority receives user-provided information, applies an aggregation policy to the user-provided data and returns approximated user data to the user.","The term \u201cdynamic aggregation\u201d refers to performing aggregation based upon both user-provided information and local information gathered about the user during an interaction with a service. In dynamic aggregation, a service provider receives user data from a user. The service provider also stores and gathers its own information about the user. The service provider presents both types of user data to an authority. The aggregation authority applies an aggregation policy to the combined data to obtain new approximated user data and returns the new approximated user data to the service provider.","Turning now to , a block diagram that illustrates dynamic aggregation of user data in accordance with one embodiment of the present invention is presented.  includes a user , a first vendor Web site , a second vendor Web site  and an authority . The user , shops at first vendor Web site  and second vendor Web site . The vendors (, ) communicate with the authority . To obtain approximated user data based on more specific user data such as user activity at the vendor Web site. The approximated user data becomes part of the user data that the user retains for use when visiting other Web sites. According to one embodiment of the present invention, the user data is stored in secure user data storage.","In more detail, at  a user  presents a user profile to a first book vendor . The first book vendor  collects information about the type of books viewed or purchased using the first book vendor's Web site. By way of example, the book vendor  may note the user purchased a number of science fiction novels and a number of gardening books. At , the book vendor presents this collected user data and the user profile obtained from the user  to an authority . The authority applies an aggregation policy to the user profile and the collected user data to obtain approximated user data. By way of example, one possible aggregation policy may be to rate a user interest in book categories, using a commonly accepted set of categories. If the user data indicate the user  is interested in neither science fiction nor gardening, and if the collected user data indicates the user  recently purchased ten books in each category from book vendor , the user data is modified to include a rating of the user's interest in these two categories.","Still referring to , at  the user  may subsequently shop at a second book vendor Web site. The user  presents a user profile including the approximated user data created when the user visited the first vendor  Web site. The second book vendor  may use the approximated user information to tailor the user's experience while shopping at the second Vendor Web site. The second book vendor  may also collect information about the type of books viewed or purchased using the second book vendor's Web site, present this information to the authority  and receive updated approximated user data, using a process similar to that which was discussed with respect to the first vendor .","Turning now to , a flow diagram that illustrates a method for dynamic aggregation of user data in accordance with one embodiment of the present invention is presented. At , a service provider receives a service request and associated user data. At , user profile information is collected. At , the user data and user profile information or a reference to the information is presented to an authority. At , the service provider receives approximated user information from the authority. At , the approximated user information is returned to the user.","Turning now to , a flow diagram that illustrates a method for static aggregation of user data in accordance with one embodiment of the present invention is presented. At , user data is received. At , an aggregation policy is applied to the user data to obtain approximated user data. At , the approximated user data is returned to the user.","According to one embodiment of the present invention, aggregated user data is stored in a credential. According to another embodiment of the present invention, a profile includes one or more credentials that in turn include aggregated user data. A profile is thus a form of aggregation of information about a user. According to another embodiment of the present invention, part of the data in the profile is bit-mapped.","Aggregation is privacy-protecting because the information stored is not exact. Therefore, it reveals nothing about a user as an individual. Any user could be described using approximated user information without revealing the user's identity. Furthermore, the mechanism for compiling the information may be hidden.","Turning now to , a block diagram that illustrates using a smart card to securely store and reconfigure cookies in accordance with one embodiment of the present invention is presented. As shown in , a computer  is equipped with a card reader  for receiving a smart card . The computer  may be connected to a network  that communicates with a plurality of other computing devices, such as a Web server . Web server  includes cookie-processing logic , reconfigured cookies  and at least one secret  shared with applet  on smart card . Smart card  also includes cookie-processing logic  and storage for at least one cookie .","In operation, Web Server  issues a cookie request that is received by computer . If the requested cookie is on the smart card  and if the cookie comprises a dynamic cookie, cookie-processing logic  uses the shared secret  to reconfigure the cookie bit pattern and the reconfigured cookie is sent to Web server  via computer . Cookie-processing logic  on Web server  receives the reconfigured cookie and determines whether the cookie needs to be reconstructed. If the cookie needs to be reconstructed, cookie-processing logic  reconstructs the cookie using shared secret . Because cookies are reconfigured before being sent, a packet sniffer  or similar device cannot match cookie data with a particular user.","According to one embodiment of the present invention, a cookie is associated with a timestamp. If the timestamp indicates the cookie is stale, the cookie is not processed.","According to another embodiment of the present invention, all cookies on a card are static, thus obviating the need for shared secrets (, ).","According to another embodiment of the present invention, a cookie management credential specifies the type of cookie management to be performed.","Turning now to , a block diagram that illustrates using a smart card to securely store and reconfigure cookies in accordance with one embodiment of the present invention is presented.  is similar to , except that the secret  resides only on Web server  and is not shared with smart card . Additionally, cookie update logic (, ) is used to periodically update cookies on the smart card .","Turning now to , a flow diagram that illustrates a method for browsing the World Wide Web (WWW) in accordance with one embodiment of the present invention is presented. At , the card is placed in a card reader. At , a browser accesses a Web site. At , a determination is made regarding whether a cookie is needed. If a cookie is needed, the browser requests a cookie from the card at . At , the card receives the cookie request and determines whether the card has a cookie matching the request. If the card has a cookie matching the request, at  a determination is made regarding whether the user has enabled the card to return cookies for the request such as entering a PIN. If the card has enabled cookies for the request, at  a determination is made regarding whether the cookie is dynamic. If the cookie is dynamic, the cookie bit pattern is reconfigured at  and the reconfigured cookie is returned at . If the cookie is static, the cookie is returned without reconfiguring it at . If the card does not have a cookie matching the request or if the user has not enabled cookies for the request, an indication that no cookie will be returned is returned at .","At , the browser makes a determination regarding whether a cookie was returned from the card. If no cookie was returned from the card, a cookie is obtained from off the card, such as a local hard drive, and the cookie is sent to the server at .","If a cookie was returned from the card, the cookie from the card is sent to the server at . At , the server determines whether a cookie was returned from the browser. If no cookie was returned from the browser, the process terminates at . If a cookie was returned from the browser, at  a determination is made regarding whether the cookie needs to be reconstructed. If the cookie needs to be reconstructed, it is reconstructed at  and used at . If the cookie does not need to be reconstructed. In either case, it is used at .","Embodiments of the present invention have a number of advantages. Service providers can exchange information about a person without revealing inappropriate or unnecessary information, thus business transactions may be conducted over an open network such as the Internet while maintaining privacy.","While embodiments and applications of this invention have been shown and described, it would be apparent to those skilled in the art having the benefit of this disclosure that many more modifications than mentioned above are possible without departing from the inventive concepts herein. The invention, therefore, is not to be restricted except in the spirit of the appended claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The accompanying drawings, which are incorporated into and constitute a part of this specification, illustrate one or more embodiments of the present invention and, together with the detailed description, serve to explain the principles and implementations of the invention.","In the drawings:",{"@attributes":{"id":"p-0049","num":"0048"},"figref":"FIG. 1A"},{"@attributes":{"id":"p-0050","num":"0049"},"figref":"FIG. 1B"},{"@attributes":{"id":"p-0051","num":"0050"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0052","num":"0051"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0053","num":"0052"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0054","num":"0053"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0055","num":"0054"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0056","num":"0055"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0057","num":"0056"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0058","num":"0057"},"figref":"FIG. 9A"},{"@attributes":{"id":"p-0059","num":"0058"},"figref":"FIG. 9B"},{"@attributes":{"id":"p-0060","num":"0059"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0061","num":"0060"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0062","num":"0061"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0063","num":"0062"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0064","num":"0063"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0065","num":"0064"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0066","num":"0065"},"figref":"FIG. 16"},{"@attributes":{"id":"p-0067","num":"0066"},"figref":"FIG. 17"},{"@attributes":{"id":"p-0068","num":"0067"},"figref":"FIG. 18"},{"@attributes":{"id":"p-0069","num":"0068"},"figref":"FIG. 19"},{"@attributes":{"id":"p-0070","num":"0069"},"figref":"FIG. 20"},{"@attributes":{"id":"p-0071","num":"0070"},"figref":"FIG. 21"},{"@attributes":{"id":"p-0072","num":"0071"},"figref":"FIG. 22"},{"@attributes":{"id":"p-0073","num":"0072"},"figref":"FIG. 23"},{"@attributes":{"id":"p-0074","num":"0073"},"figref":"FIG. 24"},{"@attributes":{"id":"p-0075","num":"0074"},"figref":"FIG. 25"},{"@attributes":{"id":"p-0076","num":"0075"},"figref":"FIG. 26"},{"@attributes":{"id":"p-0077","num":"0076"},"figref":"FIG. 27"},{"@attributes":{"id":"p-0078","num":"0077"},"figref":"FIG. 28A"},{"@attributes":{"id":"p-0079","num":"0078"},"figref":"FIG. 28B"},{"@attributes":{"id":"p-0080","num":"0079"},"figref":"FIG. 29"},{"@attributes":{"id":"p-0081","num":"0080"},"figref":"FIG. 30A"},{"@attributes":{"id":"p-0082","num":"0081"},"figref":"FIG. 30B"},{"@attributes":{"id":"p-0083","num":"0082"},"figref":"FIG. 31"},{"@attributes":{"id":"p-0084","num":"0083"},"figref":"FIG. 32"},{"@attributes":{"id":"p-0085","num":"0084"},"figref":"FIG. 33A"},{"@attributes":{"id":"p-0086","num":"0085"},"figref":"FIG. 33B"},{"@attributes":{"id":"p-0087","num":"0086"},"figref":"FIG. 34"},{"@attributes":{"id":"p-0088","num":"0087"},"figref":"FIG. 35"},{"@attributes":{"id":"p-0089","num":"0088"},"figref":"FIG. 36"},{"@attributes":{"id":"p-0090","num":"0089"},"figref":"FIG. 37"},{"@attributes":{"id":"p-0091","num":"0090"},"figref":"FIG. 38"},{"@attributes":{"id":"p-0092","num":"0091"},"figref":"FIG. 39"},{"@attributes":{"id":"p-0093","num":"0092"},"figref":"FIG. 40"},{"@attributes":{"id":"p-0094","num":"0093"},"figref":"FIG. 41"},{"@attributes":{"id":"p-0095","num":"0094"},"figref":"FIG. 42A"},{"@attributes":{"id":"p-0096","num":"0095"},"figref":"FIG. 42B"},{"@attributes":{"id":"p-0097","num":"0096"},"figref":"FIG. 43A"},{"@attributes":{"id":"p-0098","num":"0097"},"figref":"FIG. 43B"},{"@attributes":{"id":"p-0099","num":"0098"},"figref":"FIG. 43C"},{"@attributes":{"id":"p-0100","num":"0099"},"figref":"FIG. 44"},{"@attributes":{"id":"p-0101","num":"0100"},"figref":"FIG. 45"},{"@attributes":{"id":"p-0102","num":"0101"},"figref":"FIG. 46A"},{"@attributes":{"id":"p-0103","num":"0102"},"figref":"FIG. 46B"},{"@attributes":{"id":"p-0104","num":"0103"},"figref":"FIG. 46C"},{"@attributes":{"id":"p-0105","num":"0104"},"figref":"FIG. 46D"},{"@attributes":{"id":"p-0106","num":"0105"},"figref":"FIG. 47"},{"@attributes":{"id":"p-0107","num":"0106"},"figref":"FIG. 48"},{"@attributes":{"id":"p-0108","num":"0107"},"figref":"FIG. 49"},{"@attributes":{"id":"p-0109","num":"0108"},"figref":"FIG. 50"},{"@attributes":{"id":"p-0110","num":"0109"},"figref":"FIG. 51"}]},"DETDESC":[{},{}]}
