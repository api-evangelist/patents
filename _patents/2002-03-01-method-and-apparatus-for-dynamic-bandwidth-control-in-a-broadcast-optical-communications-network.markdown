---
title: Method and apparatus for dynamic bandwidth control in a broadcast optical communications network
abstract: A method and apparatus provide a network element and associated control system in a broadcast optical communications network, including an optical switch (switch fabric), to cross-connect selected wavelengths input to the switch to pre-determined output ports, under the control of a control (supervisory) channel for efficient upstream and downstream delivery of optical communications services. The network element includes an optical switch controller to monitor the communications traffic input to and output from the optical switch ports in order to dynamically change output port connections for the input wavelengths as controlled by the control channel.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07155126&OS=07155126&RS=07155126
owner: Uhuru Networks
number: 07155126
owner_city: Somerset
owner_country: US
publication_date: 20020301
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["TECHNICAL FIELD","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION"],"p":["The present invention relates generally to optical communications networks and services. It particularly relates to a method and apparatus for providing dynamic bandwidth management and alternate network connectivity for a broadcast optical communications network.","Broadcast optical communications networks (e.g., Cable TV networks) commonly use a passive optical network (PON) configuration (scheme) to deliver communications services to users using all or mostly passive components (e.g., splitters, etc.). As shown in , the PON commonly uses a combination of fiber nodes (FN), hybrid fiber-coax paths, and cascaded fiber splitting arranged in a tree-branch network to deliver all broadcast channels (wavelengths) to all subscribers to optical communications services.","In , the PON  features an optical fiber communications path  coming from a headend (HE)  and interconnecting with a fiber node  as may be common in broadcast optical communications networks such as a cable TV communications network. Upon output from the FN , the incoming optical path  may be converted into a hybrid fiber-coax (HFC) communications path  for delivering communications services to users. The PON  uses a tree-branch configuration as incoming communications path , FN , and output HFC path  form the trunk of a tree, and communications links (taps) ,  form branch connections to deliver communications services to users , . One or more fiber nodes, such as FN , may connect to HFC path  via branch link , to split the communications path  into a plurality of communication paths , ,  for delivery of services to users. Furthermore, fiber node  may be placed in cascaded connection with FN  to further split communications path  into a plurality of different communications paths , ,  for better delivery of communications services to users.","By definition, a broadcast optical communications network delivers all channels (e.g., RF\u2014radio frequency wavelengths) to all users (subscribers) all the time regardless of particular user selections (choices). For example, cable television (TV) typically may broadcast approximately 70 RF channels (e.g., channels B, C, D, etc.) that are carried by a single optical communications signal (e.g., 1530 nm optical wavelength) to all users (subscribers). Thus, for an exemplary scenario, a group of cable TV users that never watch channel D may continue to receive channel D due to the broadcast nature of the cable TV network. Therefore, channel (wavelength) D is a total waste of downstream bandwidth for this group of users. In another scenario, a cable TV service provider (who is limited by a finite bandwidth) may have to choose between offering channel A or channel B (as a new service) to the entire subscriber base when perhaps no more than 50% of the subscriber base watches that channel. Again, channel A or B will be a complete waste of bandwidth for perhaps 50% of the subscriber base.","Therefore, due to the disadvantages of current broadcast optical communications network, there is a need to provide a network solution that allows for dynamic bandwidth control (management) of the broadcast optical network to reduce wasted bandwidth.","The method and apparatus of the present invention overcome the previously mentioned problems by providing a network element, including an optical switch (switch fabric), and associated control system for a broadcast optical communications network, including an optical switch (switch fabric), to cross-connect selected wavelengths input to the switch to pre-determined output ports, under the control of a control (supervisory) channel, for efficient upstream and downstream delivery of optical communications services. Embodiments of the present invention include an optical switch controller to monitor the communications traffic input to and output from the optical switch ports in order to dynamically change output port connections for the input wavelengths as controlled by the control channel. Further features of the present invention include inserting additional wavelengths into the optical switch for targeted communications services, and providing connectivity to alternate (third-party) communications network via the optical network architecture.",{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 2","b":["200","200","200"]},"In a network element portion for communicating downstream to users, network element  may include at least one optional optical amplifier , optical demultiplexer , optical splitters , optical switch (cross-connect) , optical combiners , auxiliary input optical splitters , and auxiliary output optical combiners . Network element  may further include optional optical circulators (isolators)  to help separate downstream and upstream communications traffic flowing through the network element.","In a network element portion for communicating upstream to other parts of the optical communications network, network element  may include optical demultiplexers , optical switch (cross-connect) , at least one optical combiner , auxiliary input optical splitters , and auxiliary output optical splitters .","Network element  may optionally include a test (loopback) port  for testing a wavelength before cross-connecting the wavelength to the output combiners. Although optical switches ,  are shown as separate elements in , downstream or upstream input signals (wavelengths) into optical switches ,  may be cross-connected to either upstream or downstream output ports (combiners). Furthermore, optical switches ,  may be combined into one element (device) to provide upstream and downstream switching (cross-connect) functionality.","As shown in , a programmable switch controller , including a central processor  and interconnected monitoring (test) port , may be co-located with (or positioned separately from) network element  to receive and input an upstream and downstream control (supervisory) channel, operating on an upstream and downstream control wavelength (e.g., 1510 nm, 1520 nm), to switches ,  using lines , , , , to control switching of input wavelengths, from demultiplexers , , to output ports within switches , . The monitoring port , interconnected to switch , may be used to monitor the operation of switch  by providing diagnostics and other information to the controller  via central processor . In accordance with embodiments of the present invention, optical switches ,  may be built using MEMs (micro-electromechanical systems), LCDs (liquid crystal display systems), moveable collimators, or other suitable low-loss equipment allowing a 1 input-to-1 output switching characteristic for the optical cross-connects.","During operation for the downstream portion of network element , an incoming optical communications signal from upstream\/downstream path , carrying a plurality of wavelengths (e.g., RF wavelengths \u03bb1, \u03bb2, \u03bb5, \u03bb6, etc.), may be pre-amplified by amplifier  upon entering the network element . The pre-amplification will help to overcome losses the signal will encounter passing through the rest of the network element . The optical communications signal may be input from a CO (central office)\/headend, fiber node, another network element, or other optical network device. Advantageously, in an exemplary scenario, a portion of the wavelengths (e.g., \u03bb1, \u03bb2, etc.) may represent broadcast wavelengths (\u03bb) that carry communications services (e.g., basic broadcast cable stations\u2014ABC, CBS, NBC, etc.) broadcast to all or a primary portion of the subscribers to the optical communications network. The other wavelengths (e.g., \u03bb5, \u03bb6, etc.) may represent target wavelengths (\u03bb) that carry targeted communications services (e.g., premium cable stations\u2014HBO, golf channel, AMC channel, etc.) provided to a pre-determined portion of subscribers to the optical communications network.","After pre-amplification, the demultiplexer  separates (divides) the received optical communications signal into the plurality of wavelengths. As shown in , for this example, the optical communications signal is separated into at least four wavelengths (for carrying user traffic) and each wavelength is separately input to the optical splitters . Additionally, after demultiplexing, a downstream control wavelength, separate from the user traffic wavelengths carried by the incoming optical communications signal, is input to the switch controller  using line  from the demultiplexer .","Advantageously, in accordance with embodiments of the present invention, the control channel carries switching data to select which output ports that input wavelengths to the switch , from demultiplexer , are connected during a switching interval (T). As shown in , the switch controller , including central processor , may receive the control channel (wavelength) from line  output from demultiplexer . The control channel may carry diagnostic and control information to the central processor  that is processed and used for operation of the optical switches ,  , amplifier , and other portions of the network element . Once processing by the switch controller  is completed, the control channel is input, via line , to the optical switch  to control downstream switching (cross-connecting) including setup of downstream communications traffic paths.","At each splitter , the input wavelength is split into a plurality of signals input to the optical switch . The downstream control channel is input to the optical switch  using line  to initiate switching of the input wavelengths to output ports for a pre-determined time (T) selected by the control channel. During this time T, the optical switch  cross-connects (switches) each input signal from the splitters  to pre-determined output ports within the switch  to generate (produce) output signals, including control channel signal output , that are fed into the combiners . Cross-connecting refers to the process of the switch  selectively connecting the input wavelength to a particular output port.","The combined output signal from each combiner  may be fed into an optical circulator (isolator)  to produce output signals, traveling along optical fiber paths, that continue on the downstream path to another network element, users, or other portions of the communications network. The optical circulators are used to isolate the downstream output signals from the upstream input signals, traveling along the same optical fiber paths, coming from further downstream in the network or from users which prevents interference from occurring. In an alternative embodiment, separate optical fibers may be used for the downstream and upstream communications signals to prevent interference, and thus enable the same control wavelength (e.g., 1510 nm) to be used for the upstream and downstream control channel, and eliminate the need for the optical circulators.","Due to the control channel being input to optical switch  from controller , there is a unique correspondence between the number of outputs from each splitter , input to optical switch , and the number of input signals fed into each combiner . The presence of the control channel generates an additional input signal such that there is one more input signal (control channel signal input ) into each combiner  than output signals from each splitter  that are fed into switch . Therefore, for n 1:a splitters on the input side of the switch , there are n a+1:1 combiners on the output side of the switch , the additional input signal, to each output combiner , to support the control channel.","As shown for the exemplary network element  of , the optical switch  is a 16\u00d720 optical switch where four 1:4 splitters  generate 16 input signals into the switch , and switch  cross-connects the input signals, and the control channel input signal, to output ports to generate 20 output signals fed into the four 5:1 combiners . It is noted that the 16\u00d720 switch shown is solely exemplary, and any other n\u00d7m (# of inputs\u00d7# of outputs) switch type may be used that outputs a control channel signal into the combiner(s) for the upstream or downstream path.","As shown in , network element  may include one or more auxiliary input splitters (ports) ,  and auxiliary output combiners (ports) ,  for downstream and upstream optical communications. These ports, ,  and , , may be used to input one or more additional optical communications signals into the downstream and upstream optical communications path. These additional optical signals may include, but is not limited to, optical communications signals from alternate (non-native or third-party) communications networks and additional wavelength(s) input to the downstream and upstream communications path as determined by the control channel received by the switch controller . The alternative communications network may include, but is not limited to, wireless and wired communications networks where, as described herein, the additional optical communications signal may be carried between a base station and a mobile telephone switching office of the wireless communications network.","As shown in , auxiliary input splitters ,  may split incoming (downstream, upstream) additional wavelengths into a plurality of signals input to the optical switch , . The optical switch ,  cross-connects (switches) each input signal from the auxiliary splitters ,  to pre-determined output ports within the switch ,  to generate (produce) output signals that feed into the auxiliary combiners , . The combined output signal from each combiner ,  may be fed into other network elements, via other auxiliary input splitters (ports) and other auxiliary output combiners (ports), in cascaded downstream and upstream path connection, to users, or to other portions of the optical communications network.","As shown in , during operation for the upstream portion of network element , incoming optical communications signals, output from the optical circulators , are separately input to a plurality of demultiplexers . Each demultiplexer  separates (divides) the received optical communications signal into a plurality of wavelengths (e.g., RF wavelengths \u03bb1, \u03bb2, \u03bb5, \u03bb6), including an upstream control channel wavelength separate from user traffic wavelengths, carried by each input optical communications signal.","As shown in , the switch controller , including central processor , may receive the control channel (wavelength) from lines  output from demultiplexers . The control channel may carry diagnostic and control information to the central processor  that is processed and used for operation of the optical switch  and other portions of the network element . Once processing by the switch controller  is completed, the control channel is input, via line , to the optical switch  to control downstream switching (cross-connecting) including setup of upstream communications traffic paths.","After demultiplexing, the plurality of input wavelengths are separately input to the optical switch  from each demultiplexer . The upstream control channel is input to the optical switch  using line  to initiate switching of the input wavelengths to output ports for a pre-determined time (T) selected by the control channel. During this time T, the optical switch  cross-connects (switches) each input signal from the demultiplexers  to pre-determined output ports within the switch  to generate (produce) output signals that feed into the combiner . Additionally, the switch  connects the control channel, input from line , to an output port feeding into combiner . The combined output signal from the combiner , including the control channel, may be fed into the upstream\/downstream path  using line . From path , the upstream communications signal may be fed to a CO\/Headend, a network element, or other device in the optical communications network.","Again, due to the control channel being input to optical switch  from controller , there is a unique correspondence between the number of outputs from each demultiplexer , input to optical switch , and the number of input signals fed into the combiner . The presence of the control channel generates an additional input signal such that there is one more input signal into the combiner  than total output signals fed into switch  from the plurality of demultiplexers . Therefore, for every n 1:a demultiplexer on the input side of the switch  generating n\u00d7a input signals into switch , there is an [(n*a)+1]:1 combiner on the output side of the switch  being fed [(n\u00d7a)+1] input signals, the additional input signal to support the control channel.","In an alternative embodiment of the network element , as shown in , the control channel (wavelength) may bypass the optical switch (switch fabric) completely. In the downstream path, after the control channel is separated out by the demultiplexer  and processed by the switch controller  using line , the control channel is fed back into the downstream path as an input to each combiner  using lines . The central processor  may directly initiate the switching of input wavelengths to output ports in the switch  for this embodiment.","Similarly, for the upstream path, after the control channel is separated out by the demultiplexers  and processed by the switch controller  using lines , the control channel is fed back into the upstream path as an input to the combiner  using line . The central processor  may directly initiate the switching of input wavelengths to output ports in the switch  for this embodiment.","As shown in , additional wavelengths may be inserted into the downstream or upstream communications paths using at least two tunable optical transponder units ,  interconnected to the network element . In an exemplary scenario for the downstream path, a \u03bb1 signal input to switch  may be output to one of the auxiliary combiner outputs . From the combiner , the \u03bb1 signal is fed into tunable optical transponder  using line . The optical transponder , including a tunable laser, receives the \u03bb1 signal and converts the \u03bb1 signal into an alternate wavelength (e.g., \u03bb1\u2032) that is looped back into the optical switch  using one of the auxiliary input splitters . When input to the optical switch  from splitter , the additional wavelength, \u03bb1\u2032 may be cross-connected to any output port and fed into any output combiner ,  as selected by the downstream control wavelength.","Similarly, in an exemplary scenario for the upstream path, a \u03bb2 signal input to switch  may be output to one of the auxiliary combiner outputs . From the combiner , the \u03bb5 signal is fed into tunable optical transponder  using line . The optical transponder , including a tunable laser, receives the \u03bb2 signal and converts the \u03bb2 signal into an alternate wavelength (e.g., \u03bb5\u2032) that is looped back into the optical switch  using one of the auxiliary input splitters . When input to the optical switch  from splitter , the additional wavelength, \u03bb5\u2032, may be cross-connected to any output port and fed into any output combiner ,  as selected by the control wavelength. The insertion of the additional wavelength into the upstream and\/or downstream path (\u03bb1\u2032, \u03bb5\u2032) helps to provide particular communications services as requested by users, including business and residential users. Furthermore, as described herein in the software section, the transponders ,  may send a communications signal back to the controller  to verify that addition of the alternate wavelength(s) has been completed, and the new wavelength configuration for the network may be communicated back to a network management software system. Furthermore, the control channel may be input to auxiliary input ports (splitters) ,  by inserting a demultiplexer before the auxiliary input ports.",{"@attributes":{"id":"p-0046","num":"0045"},"figref":["FIG. 5","FIG. 5"],"b":["500","500","505","510","515","520","525","530","535","509","500","502","504"]},"From base station , an optical communications signal (e.g., carrying a mobile user traffic signal) may be fed (forwarded) into network element  using line  input to an auxiliary input port (splitter) (not shown) on network  for upstream communications. Advantageously, the optical communications signal input into network element  may originate as an optical signal or may originate as an electrical signal that is converted into an optical signal using an electrical-to-optical converter (not shown) co-located with or located separately from the base station .","At network element , the optical communications signal may be cross-connected along with other upstream traffic wavelengths, by the network element optical switch (not shown) as controlled by an upstream control channel, from the upstream auxiliary input splitter to an output combiner (e.g., upstream auxiliary output combiner or regular output combiner). From the output combiner of network element , the optical communications signal may be fed, using line , into an input splitter (e.g., upstream auxiliary input splitter) or input demultiplexer of network element , and then cross-connected over to an output combiner (e.g., downstream auxiliary output combiner) as determined by a control channel. The optical communications signal may be then fed into network element  using line  input to a downstream auxiliary input port (splitter) or input splitter of network element .","At network element , the forwarding process may be repeated as the optical communications signal may be cross-connected, by the network element optical switch as controlled by a downstream control channel, from the downstream auxiliary input splitter to an output combiner (e.g., downstream auxiliary output combiner). From the output combiner of network element , the optical communications signal may be fed, using line , into an input splitter (e.g., downstream auxiliary input splitter) or input demultiplexer of network element , and then cross-connected over to an output combiner (e.g., downstream auxiliary output combiner) as determined by the downstream control channel.","From the output combiner of network element , the optical communications signal may be fed, using line , into the MTSO  for further processing (e.g., optical-to-electrical conversion) to complete the wireless communication from the base station . Using the same network elements , , , , in a reverse path and process (using the corresponding downstream and upstream input and output ports not used for the base station-to-MTSO path), the MTSO  may send an optical communications signal to the base station . Advantageously, lines , , , , and  may be optical fiber links to help provide the optical communications path between base station  and MTSO .","In accordance with embodiments of the present invention, a programmable software control\/management system is provided to enable dynamic bandwidth management at the optical layer for the optical communications network, such as network  of , comprising a plurality of network elements. The software control system operates to dynamically configure the optical network, including network elements, at the optical layer to provide broadcast communications services (\u03bb) and targeted communications services (\u03bb) to particular subscribers (users). Dynamic configuring at the optical layer enables the network elements to be used for PON and other FTTH (Fiber-to-the-Home) network applications.",{"@attributes":{"id":"p-0052","num":"0051"},"figref":["FIG. 6","FIG. 6"],"b":["600","608","610","612","614","616","618","620","610","612","614","618","620","600","602","604","606","604","606","610","612","614","616","618","620","608","610","612","614","616","618","620","622","624","626","628","630","632"]},{"@attributes":{"id":"p-0053","num":"0052"},"figref":["FIG. 7","FIG. 3"],"b":["700","700","702","704","706","708","712","700","210","220","702","700","714","716","718","720","722","724","726","728","702","724","718","700","604","606","602","700","728"]},"The commands\/messages received from the EMS, NMS (e.g., external sources) assist the SSM  in controlling the active network element components including switches, transponders, demultiplexers, amplifiers, combiners, splitters, monitoring ports, and circulators. Furthermore, the SSM  may perform other functions including, but not limited to, 1) sending periodic status messages to the EMS, 2) alert and event generation, and 3) statistics collection. For proper routing of messages\/commands to and from each SSM, the associated network element may include a unique IP (internet protocol) address and message routing may occur over the control channel.",{"@attributes":{"id":"p-0055","num":"0054"},"figref":"FIG. 8","b":["600","602","604","622","624","626","806","802","804","806","604","806","626","614","614","604","806","626","614"]},"Advantageously, the execution of a direct command by the SSM  may comprise a two-step process where the first step is actual execution of the received direct command  (e.g., disable transponder), and the second step is providing a response message (feedback) , over the control channel, for the execution of the command to the EMS  (e.g., failed, completed).","As shown in , broadcast commands  are common commands sent to each SSM , ,  from the EMS . An exemplary broadcast command may be a supervisory poll sent to each SSM to check status. A chained command  is a command from the EMS sent to a first SSM (e.g., SSM  of network element ), executed at the current SSM, and then forwarded to a succeeding SSM in the downstream path. The process is continued until the downstream path of SSMs (network elements) has been completed.","Additionally, the SSM may generate requests and messages for other software components (e.g., EMS, NMS, other SSMs) based on state information. Messages and state information, in the form of events\/alerts , may be sent periodically from the SSM ,  to the EMS  and\/or NMS , over the control channel, to show alarms and conditions. Statistics and counters, in the form of messages , may be sent periodically from the SSM  to the EMS  to gather information such as information that is collected and collated at the EMS  for export to billing systems. The SSM , ,  may generate requests\/messages, in the form of messages  or events\/alerts , in at least two directions. The SSMs , ,  may send requests in the upstream direction to the EMS\/NMS , , for example, to request change in state information such as bandwidth on demand for local insertion of additional wavelength(s). Also, the SSMs , ,  may send requests in the downstream direction to other SSMs (network elements, not shown), for example, to request state and availability information including debugging codes and frames to assist in downstream optical communications.","In reference to , the EMS ,  may operate as a separate software program that interfaces with the SSMs , , , , ,  to control features of the network elements , , , , , . The EMSs ,  may be built on the same platform as NMS , and may provide a graphical user interface (GUI) allowing a user to configure and cross-connect across the plurality of network elements , , , , ,  within the optical communications network. The EMS ,  may receive the user request and translate the user request into at least one command that is sent to the SSMs in the network, and also verify that the correct command has been executed by an SSM and that network state information received from the element (from a response or event\/alert message) is accurate. Furthermore, the EMS ,  may perform other functions including, but not limited to, 1) managing the communications traffic that enter a network element, 2) monitoring the traffic on input and output ports for a network element, 3) reporting alerts and diagnostic information received from an SSM to the NMS , and 4) collecting and collating statistics information generated by the SSM at a network element.","In reference to , the EMS performs traffic management by setting up cross-connects at a network element in one of broadcast , multicast  (chained command), or unicast  mode, as selected by user input from the GUI, by sending commands over the control channel that are subsequently executed by the SSM at the network element. In an exemplary scenario, in reference to , EMS  may send a broadcast command to network elements , ,  (via SSMs , , ) to cross-connect an incoming wavelength (e.g., \u03bb2), carried by the incoming optical communications signal, from an input port to the optical switch to three of the output combiner ports .","The EMS may perform traffic monitoring by periodically receiving traffic monitoring information, in addition to alert\/event messages , from the SSM. Alternatively, the EMS may send a query to the SSM to respond with traffic information regarding particular ports (e.g., in response to a trigger) of the network element as selected by the EMS. For example, EMS  may send a query to SSM  to respond with traffic information (event\/alert message ) regarding one of the output combiners  when traffic outgoing from the combiner exceeds a pre-determined threshold trigger.","Incoming traffic to a network element may include a plurality of traffic types including pre-provisioned and on-demand traffic. Pre-provisioned traffic may include incoming traffic flow that has been pre-determinedly mapped by the EMS from an input port to one or more output ports on the network element. On-demand traffic may include incoming traffic that has not been pre-determinedly mapped for cross-connect, or traffic that is set aside as \u201cdeactivated\u201d. The occurrence of on-demand traffic may trigger an event\/alert message  sent from the SSM to the EMS that prompts the EMS to send back cross-connect information, over the control channel, in response. Alternatively, the EMS may escalate (forward) the event\/alert message  to the NMS that prompts the NMS to control the cross-connect of the \u201cdelayed\u201d on-demand traffic based on having network-wide information on the state of the network.","Additionally, based on the messages received from the SSMs, the EMS stores information regarding online, offline, and faulty ports within the network, including those ports currently processing communications traffic. Furthermore, the EMS performs statistics collection by collecting and collating the statistical information received from the SSM (from an ,  response or event\/alert message), and forward this statistics information to the NMS. An individual EMS may control and configure a plurality of network elements.","In reference to , NMS  manages each EMS ,  and operates as the primary controller (network manager) in the system  for controlling an optical communications network. The primary function of NMS  is to establish and manage sessions (control activity\/management sessions) for the system . Exemplary sessions include, but are not limited to, 1) providing more bandwidth to a particular network segment, 2) setting up, tearing down, or resizing a portion of the network during a given time period, 3) supporting a new optical path through a particular portion of the network. To provide more bandwidth, in an exemplary scenario, NMS  may send a command message  to EMS  instructing EMS  to send a broadcast command  to SSMs , , . The broadcast command  may instruct SSMs , ,  to insert an additional wavelength (e.g., \u03bb5\u2032) into the optical downstream path using the individual transponder for each respective network element , , .","During the establishment and operation of a control management session by the NMS , it is useful that all SSMs in that network portion may communicate with each other. Advantageously, in accordance with embodiments of the present invention, a virtual private network (VPN) may be used to interconnect all SSMs , ,  under the control of an individual EMS  during the a control management session established by the NMS . The VPN allows each SSM , ,  to have access to all operation information about each associated network element , , , the information including information about the ports and transponders for each network element , , . The VPN may operate using an advantageous communications protocol including, but not limited to, IP, ATM, OSPF (open shortest path first), MPLS (multi-protocol label switching), or any combination thereof.","The NMS  may query EMS ,  and\/or SSMs , , , , ,  for network state information (past and present) to assist in the setup of new services and for billing purposes. Advantageously, the NMS  may interconnect to other administrative systems such as Provisioning and Billing using an appropriate software architecture including, but not limited to, CORBA, JAVA, IIOP, and other useful software architectures.","Using the query responses from EMS ,  and SSMs , , , , , , the NMS  operates as a network state machine (NSM) to maintain the complete state (using a Network State Table (NST)) of the optical communications network. The network state information is used as a baseline source of information to provide enhanced services in the network. Relating to functioning as a NSM, NMS  provides a plurality of services including, but not limited to, 1) providing real-time or near real-time information about the state of the network, 2) polling SSMs to respond with state information, and assembling response messages and information to update the network state information, and 3) save network state information snapshots to provide historical and trend information, and 4) interface and support other feature modules.","To generate a baseline database for the NSM and to maintain the NST, NMS  performs a plurality of functions including, but not limited to, auto-discovery, auto-layout, link-state updates, state machine updates, and customization capabilities. These functions may be performed under the direction of the NMS using individual software feature modules (applications) for each function accessible via an API (application programming interface) and interconnected to a working terminal. Auto-discovery, advantageously the first step in achieving \u201cstate-awareness\u201d, is performed by an individual SSM to discover all other SSMs (and associated network elements) in the network, and is performed by all EMSs and NMSs to discover all network elements in the network. The primary objective is for the NMS to gather all detailed network-awareness information based on the discovery and polling information collected by the EMS. Auto-discovery enables the NMS to build a baseline NSM that allows for a cross-connect matrix (matrix of cross-connects set up at individual network elements) to be periodically updated. Furthermore, the NSM may be accessed by other feature modules such as auto-layout (for providing a network map display), and other feature modules.",{"@attributes":{"id":"p-0069","num":"0068"},"figref":"FIG. 14","b":["1402","1405","1410","1415","1420"]},"Thereafter, steps ,  and  are repeated until a response has been received from every active, listening SSM in the network. Once every SSM has responded, the decision analysis at step  produces a negative response (no), and then at step  the source SSM completes the building (updating) of its own ANT. At step , the source and responding SSMs send their cross-connect information (information relating to the network element switch including ANT information), for that network portion, to the NMS to initiate building of the NSM and NST. If the ANT is empty from the source node (SSM), then the NMS recognizes the source SSM as the first node in the network. At step , the process terminates (ends).","The NMS reorganizes the received messages and builds a hierarchical model of interconnection and adjacency nodes to provide a baseline for the succeeding process of auto-layout. Furthermore, the NMS may poll the source and responding SSMs to get more required information including, but not limited to, information on the input wavelengths, output cross-connect wavelengths, insertion wavelengths, and return paths. This additional information assists the NMS to build a global cross-connect matrix (included within the NSM) that is maintained by periodic status updates.","The existence of a late insertion wavelength at a particular SSM may trigger an auto-reconfigure message to be sent to the NMS indicating that a change has occurred in the cross-connect matrix (reconfiguration). This auto-reconfigure message may be followed by a more detailed message describing the insertion wavelength and routing update from the SSM. Alternatively, the NMS may query the SSM to validate the information about the auto-reconfigure messages.","For auto-layout, the NSM may be laid out (as a visual map) on the working terminal using the information collected by the NMS (during auto-discovery) and using a user interface module (UIM) as described herein. This layout may represent a logical topographical overview of the network including all interconnected devices in the downstream and upstream communications paths. The auto-layout may initially only summarily display the discovered information on the terminal, and then the position of the objects can be changed around to show or depict actual physical layouts (as mapped to the associated logical layout).",{"@attributes":{"id":"p-0074","num":"0073"},"figref":"FIG. 16","b":["1602","1604","1606"]},"At step , the NMS waits to see if the user (operator) makes any changes to the network logical layout. Advantageously, the user may make changes to the network layout by mapping the logical layout to the physical (geographical) layout of the optical communications network. At the terminal, network elements may be queried to show details on the cross-connected traffic and element identification. Changes may be made using the customization capabilities as described herein.","At step , a decision analysis is performed to determine whether any user changes have been made to the network layout. If yes, then at step  the network layout is refreshed on the terminal (showing the changes made by the user) and the modified layout is saved by the NMS as an external MapInformation file on the working terminal. Thereafter, steps , , and  are repeated (with further updates to the MapInformation file) as long as the user continues to make changes to the network logical layout.","Once changes are completed by the user, the decision analysis at step  produces a negative response (no), and at step  the NMS completes the update of the network logical layout (map) and refreshes the network layout on the terminal. At step , the user optionally adds node information for each object (e.g., link, network element, etc.) on the network map.","Thereafter, at step , a decision analysis performed to determine whether the user wants to \u201clock\u201d the changes to the network layout. If no, then the process terminates at step . If yes, then at step  the user may prompted to enter a password to validate the locking procedure. Thereafter, at step  the modified network layout is locked and saved as an external MapInformation file to the terminal and to the NMS. Locking of the layout allows for the exact same layout to be used every time the layout is accessed by the system or user. At the time of locking, the position and layout attributes of each of the screen objects (e.g., links, network elements, etc.) are saved along with the layout where the layout access may be protected by a user password to prevent unauthorized access to the layout.","Thereafter, at the next viewing of the network layout, the NMS first checks to see if a MapInformation file currently exists. If yes, then the layout is displayed using the information within the file. If no, then the auto-layout module is invoked automatically and the process of  is performed.",{"@attributes":{"id":"p-0080","num":"0079"},"figref":"FIG. 15","b":["1505","1510"]},"NMS , functioning as a NSM, may have customization capabilities (implemented as software feature modules to assist the auto-layout feature) including, but not limited to, physical geographical map correlation, layout layering, and skin\/template management. Physical geographical map correlation allows the user to correlate the network layout (map) to the actual physical network by providing information regarding geographic maps, cable routing paths, splitter junctions, and other detailed physical information on the network. For example, an actual physical map showing the geographic terrain of the network may be superimposed on the network logical map with fine granularity (exactness). This exact or precise mapping may be performed by importing multiple maps of the exact routing and layout of the network (using the UIM module) allowing the existing, physical network to be dropped over the logical layout to show actual geographic areas. Thereafter, the user may make changes to the logical layout (e.g., output wavelength port may be changed in response to physical distance that must be covered).","Layout layering allows the user to take images, comprising the backgrounds for the network map, and divide the images into multiple layers to show different attributes (e.g., number of wavelengths, number of nodes, etc.) of the network that may be brought out to exemplify the network properties and granularity of operation. The multiple layers may be setup by the user where each of the objects (e.g., network elements, links, etc.) may be assigned a particular layer, or automatically setup in pre-determined default layers by the NMS (via the UIM). For example, a snapshot of the NSM may be taken after auto-discovery, and then periodic updates to the NSM may be automatically reflected in the layout layering. Furthermore, the visual map of the working terminal may be modified to show or hide certain layers on a single view.","Advantageously, skin\/template management may be used in combination with layout layering. The look and feel of the layout windows may be defined as the \u201cskin\u201d of the network layout and different skins may be setup as templates for the layout layering where each skin may be enabled\/disabled upon user selection.","One of the plurality of features supported by NMS , in conjunction with the plurality of network elements , , , , , , is the provision of targeted communications services to users (e.g., end users) using bandwidth control. In accordance with embodiments of the present invention, as shown in , NMS  may include an exemplary service enabling system (SES)  to provide the targeted communications services. SES  operates to provide a plurality of services. These services may include, but are not limited to, 1) providing a plurality of PON networks over the same physical link, 2) provide channelized wavelength switching based on a target community of users, and setting up one or more wavelengths to carry service offerings that are targeted to that community, 3) providing a software layout map to compare to a physical layout of target communities for different features, 4) providing, in fine granularity, the layout and effect on the communications network and bandwidth management for enabling targeted services.","SES  uses the state awareness of the network, provided by the NMS  operating as a network state machine as described herein, to provide targeted services. SES  includes a plurality of interconnected, programmable service enablement-related modules and components. These components include a user interface module (UIM)  (may be interconnected to a working terminal\u2014not shown), a plurality of service feature modules  (target services enabler\u2014SFM-TS), , , service enablement module , service abstraction layer (SAL) , and system control module .","UIM  provides for the initiation, display, configuration, status information, and advanced capabilities of service enablement as operated by a user (e.g., network service provider). SEM  receives, using the EMSs ,  and\/or SSMs , , , , , , summary information on the state of the network from the NSM and uses that as baseline information for the target service enablement. Also, SEM  displays the current state map of the network using the UIM , and monitors the input and output links from the SSMs (and associated network element) for adjustment.","SEM  may be customized and provides an open interface to all service feature modules , , , and includes an internal generic programming interface that allows for specific feature sets to be developed rapidly without the need to rewrite all levels of the command structure.","During the operation of service enablement, the service feature modules (SFM) , , , receive input data from the UIM  and process the input data in accordance with network state information received (via the EMSs and SSMs in the network) and determine a topological impact on the network (e.g., insert an additional wavelength into a particular network portion). This determination is translated into commands (e.g., commands , , ) that are sent by the SEM  (via the SCM ) to different areas of the network, include those affected (targeted) portions of the network (e.g., EMSs, SSMs, and associated network elements for that network portion). Then, the SEM  signals the SCM  to check for the availability and capability of supporting those selected services to the targeted network elements. A control path is established (by SCM ) to the targeted SSMs, and commands (e.g., unicast , broadcast ) are sent to the targeted (affected) SSMs to activate the targeted service (e.g., additional wavelength insertion).","Upon configuring the targeted service enablement, the SCM  sends an update to the SEM  to confirm service activation, and the SEM  signals the user, via UIM , of service activation. Additionally, SFMs , , , update the NST with service activation information using the SAL  where the SAL  forms the internal repository of service activation information before passing through the information to the NST.","The different modules of SES  provide a plurality of functions. The Targeted Services Enabler (SFM ) allows a network service provider to customize the content of the network by intelligently managing the routing and destination for delivery of services. The content and bundling of these services may be catered to a particular customer group that has been profiled and determined using demographic information. This ability to customize allows the service provider to delivered targeted services to a pre-determined audience (users) enabling greater service penetration to customers, efficient management of network bandwidth (reduces wasted bandwidth for broadcast services), and increased revenue for these targeted services.","Targeting and activating services (service enablement) for a particular group of users, via the SES  and SFM , follows a pre-determined process.  illustrates the flow process diagram to activate targeted communications services in accordance with embodiments of the present invention. At step , targeted services information gathering is initiated. From demographic and other (e.g., user surveys, etc) information, a target community of users is selected for activation of the targeted services. At step , to assist in determining the geographic topology for the optical network and correlating the geographic topology with the reach and control span of the network element positions in the network, the UIM  provides a display of the network map. The network map, via the UIM , may be customized to the optical network to overlay the logical reach of the optical network with the actual (geographical) layout reach of the network and the actual community of users that have access. The network map may then, via the UIM , display the positions of the network elements on the network, where this positional information is derived from the NSM, to assist the user in defining the target area for the customized services.","At step , the target area is determined, via UIM , and an input wavelength (e.g., \u03bb6\u2032) is selected to carry the targeted services to the selected community of users. At step , a target network element (and associated SSM) is selected that acts as the primary network element to start the path of targeted services to the selected community, and determines a continuing path of network elements (that are accessed and configured) to deliver the targeted services to the selected user community. Alternatively, a user, via UIM , may manually plot a continuing path of network elements to route the selected wavelength to the target area(s) (e.g., via multi-casting).","To initiate delivery and activation of targeted services, at step , the NMS sends commands (e.g., unicast command ) to the primary network element including port and destination information for the input wavelength carrying the targeted services. At step , the associated SSM (at the primary network element) cross-connects the input wavelength to at least one pre-determined output port based on the target area for the selected services. After cross-connecting, the SSM updates a local network state table for the downstream portion. This cross-connection process is continued down the path of network elements until the targeted community of users is reached.","In the upstream path, at step , a return control wavelength, carrying information from the downstream network elements in the targeted services path, is cross-connected along a reverse path to the primary network element. At step , at the primary network element (and associated SSM), a local cross-connect table (CCT) and reverse-connect table (RCT) is updated. At step , this update information is sent to the EMS and NMS as network state information and an operation success update for the targeted services activation and delivery. At step , the NMS receives this network state update and updates the NST. At step , UIM  refreshes the network state map to the user. At step , UIM  provides a confirmation message to the user. At step , SFM  updates local global tables for confirmation of service activation. At step , the process terminates (ends).","Advantageously, the targeted services enablement, as shown in the flow process diagram of , allows a selected input wavelength (carrying the targeted services) to be sent down the network path along with other current services for delivery to users which reduces wasted bandwidth.","A primary function for the SSMs (and associated network elements) is bandwidth management at the optical layer (level of optical wavelengths) without having to decode the content (data payload) carried by the wavelengths. The SSMs switch and route the input wavelengths along a pre-determined path to reach a particular destination. Other functions provided by the SSMs include, but are not limited to, 1) switching wavelengths or aggregates using broadcast, multicast, and cross-connect techniques, 2) automatically select and establish a path for local bandwidth insertion through auxiliary ports of the network elements, 3) automatic wavelength routing and optical switching based on a pre-determined configuration, and 4) maintain a local network state machine to interface and support additional service feature modules (SFM).","The SSM performs automatic wavelength switching on a pre-determined basis to ensure that downstream and upstream traffic are in (perfect) synchronization, and then verification information is sent to the NMS to update the state of the network. The SSM performs wavelength switching on different paths in the form of either broadcast, multicast, or cross-connect.","As illustrated in , network element  includes a primary input port (demultiplexer ) and at least four output ports (output combiners ). Demultiplexer  may identify at least 4 unique input wavelengths or four aggregates of the input wavelength depending upon a pre-determined sensitivity, and the output combiners  may receive a varied combination of the input wavelength. \u201cBroadcast\u201d switching refers to an input wavelength being selectively switched to all output combiners (ports) . \u201cMulticast\u201d switching refers to an input wavelength being selectively switched to only a particular number of output combiners . Additionally, input wavelengths to the input auxiliary ports  may be similarly broadcast, multicast, or cross-connected to any outgoing port in addition to the wavelengths input from the demultiplexer . Also, a control (supervisory) wavelength may input to demultiplexer  and cross-connected to the at least four downstream output combiners .","Broadcast and multicast switching allows the network element to produce optical networks that form tree structures with fanout and bandwidth management. Auxiliary ports , , ,  allow cross-connections and interconnections of parallel trees of the network to form a mesh structure for the optical network.","For upstream communications, there is a parallel stream of upstream traffic that may be switched in the reverse manner (to the downstream traffic) to ensure that return traffic travels back to the original sender along the same (or similar path) of the downstream traffic. Using the SSM, tracking of downstream and upstream traffic occurs to ensure synchronization with each other. The tracking information is fed back to a local and network state machine (at the NMS) for close coordination of downstream\/upstream traffic. For an exemplary scenario, in reference to , using a downstream path for an input wavelength including network elements , , , , the upstream path would follow a reverse path of network elements , , ,  to report current state information for the delivery of the input wavelength.","Performance of wavelength switching by the network elements (and associated SSMs) is under the direction of the control (supervisory) channel.  illustrates a block diagram of the exemplary service enabling system (SES)  with control channel module attachments (used by the NMS ) in accordance with an embodiment of the present invention. SES  includes a plurality of interconnected, programmable wavelength switching, automatic routing, control channel related modules and components. These components include a user interface module (UIM) , a plurality of service feature modules (SFM)  (wavelength switching module, SFM-WS),  (automatic routing module, SFM-AR), , service enablement module (SEM) , service abstraction layer (SAL) , system control module , supervisory (control) interface module (SIM)  that interconnects to network element components including supervisory (control) termination interfaces , ,. SFMs ,,, SEM , and SAL  perform similar functions to those described herein with reference to  for activation of wavelength switching and automatic routing features. The control termination interfaces , ,  correspond to the primary input port (demultiplexer) and auxiliary input ports to a network element such as input and auxiliary input ports , ,  for network element .","During operation, input ports , ,  accept incoming wavelengths or aggregates of wavelengths for network element . The SSM (switch controller ) for network element  identifies each of the individual wavelengths to a user via the UIM , and then accepts commands (e.g., , ,  commands) to switch the input wavelengths as required as received over the control (supervisory) channel.","In the optical communications network, every network element (and associated SSM) will receive the control channel (wavelength) in addition to the traffic-bearing channels as the control channel is sent to the primary input ports (demultiplexer) and optionally to the auxiliary input ports. The receiving of the control channel by the SSM enables command execution from the NMS, EMS, and other SSMs (e.g., mesh-connected), for example, NMS , EMS , , and SSMs , , , , ,  of .","During transmission, the control channels (wavelengths) are isolated and terminated on the STIs , ,  that are controlled by the SIM . The STIs are hardware\/software units to terminate the control channel and extract the payload (content) that contains the commands for the SSMs (incoming commands), and to insert a payload and originate an outgoing command to the EMS and NMS. For incoming commands to the NMS from the SSMs, SIM  extracts the payload from a plurality of SSMs, validates the source SSM for each one, and forwards the message on to the SCM .","For outgoing commands to the SSMs, SCM  uses SIM  for addressing and packaging of the commands, and for the selection of appropriate ports to send the outgoing commands, via STIs , , , to the SSMs. SCM  also uses SIM  as asynchronous module to which all control (supervisory) channel and port processing may be transferred (handed off).","During operation, using the SES , downstream wavelengths may be switched from the input port (demultiplexer) of the network element to any of the output ports (combiners) based on the commands sent to the network element (and associated SSM) over the control channel by the NMS. SIM  accepts the commands from the NMS, verifies the target address of the payload, strips the payload headers and trailers, and sends the commands as a message (e.g., , ,  message) to SFM  for wavelength switching (WS). SCM  and SEM  perform administrative functions regarding the command transmission by SIM  that include, but are limited to, audit trails, command logging, session validation, and state updates to the NST.","Similarly, for the upstream path using SES , upstream wavelengths may be switched from the output port of the network element to any of the input ports (using a bidirectional optical fiber) based on the original commands sent to the network element (SSM) from the NMS. Advantageously, the upstream path determination and switching setup of a return wavelength is performed at the same time that the downstream path is setup. This simultaneous upstream\/downstream setup allows a single command from the NMS to generate two command messages at the SFM-WS , one command to setup the downstream switching path, and a second command to setup the upstream switching path.","Under the direction of the NMS and SFM-WS , the downstream and upstream paths are setup in rapid succession where a status message is sent back from SFM-WS  to the NMS for updating the NSM. The status message records the downstream paths and upstream paths in a downstream path record and upstream path record, respectively, that are sent to the NMS. The NMS uses these records as a successful confirmation of the wavelength switch command that was sent down earlier to the network elements (SSMs) and updates the NSM with the information.","As shown in the flow process diagram of , performance of wavelength switching may include use of a test port. At step , a plurality of incoming, downstream wavelengths, including a control wavelength, are input to a network element via the primary input port (demultiplexer) and\/or auxiliary input port (combiner). Additionally, at the same time or a short time period later, a plurality of upstream wavelengths are input to the network element. At step , after receiving identification of the wavelength via UIM , the NMS sends a command to SFM-WS  to switch the particular wavelengths from the input port to selected output ports.","At step , SFM-WS  may optionally test the incoming wavelengths by sending a command to the network element to cross-connect briefly at least one input wavelength to the test port (such as test port  for network element ). The testing of the input wavelength may include generation of traffic information on the input port. SFM-WS  then sends a confirmation message to the NMS before actual switching is initiated.","At step , SFM-WS  (under the direction of the NMS) sets up a downstream path to cross-connect the input downstream wavelength(s) to at least one pre-determined output port. Simultaneously or within a short time period, at step , SFM-WS  sets up an upstream path to cross-connect the upstream wavelength(s) from an input port (demultiplexer, splitter) to at least one pre-determined output port (combiner). Thereafter, at step , SFM-WS  sends an update (downstream and upstream path records) to the NMS for updating the NSM. Finally, at step , the NMS sends a command to the network element, over the control channel, with actual port\/destination information for the downstream and upstream wavelengths to activate actual switching of the downstream and upstream wavelengths. At step , the process terminates. Alternatively, where the incoming wavelengths (downstream, upstream) are input from the auxiliary input ports and originated by other network elements, (local) command direction may be performed by the originating network element to initiate wavelength switching for the incoming wavelengths to the succeeding network element.","Advantageously, the functions of wavelength switching and insertion of additional wavelengths may be used to provide customized services to users. In an exemplary scenario, in reference to , input wavelengths \u03bb1, \u03bb2, \u03bb5, \u03bb6, may be scheduled, using UIM , to be delivered to business users during a daily time period (e.g., 8 am\u20136 pm). At 6 pm, a portion of these wavelengths (e.g., \u03bb1, \u03bb2, \u03bb5) may be scheduled to be switched over to alternate output ports to reach targeted residential users for a regular evening time period (e.g., 6 pm\u20138 am). Also, at 6 pm, an additional wavelength insertion may be scheduled to insert an additional wavelength, switched to the evening output ports, (e.g., \u03bb6\u2032) into the communications services targeted for the select group of residential users. Advantageously, \u03bb6\u2032 may operate on the same wavelength as \u03bb6 (e.g., both at 1333 nm) to provide bandwidth efficiency (sharing), but carries particular content targeted to the selected residential users. Using the embodiments described herein, any number of triggers may be used to deliver targeted communications to shared users (e.g., business, residential).","Advantageously, in a mesh design of network elements in an optical communications network, automatic wavelength routing may be performed as illustrated in the flow process diagram of . The process provides for a particular routing path when (locally) inserting a third-party (non-native) wavelength at one point in the network and then routing the third-party wavelength to another point in the network, such as for the exemplary network configuration illustrated in .","At step , the third-party wavelength (e.g., from a wireless base station) is physically interconnected (provided access) to the input port (auxiliary port) for a network element. At step , the automatic wavelength routing feature is triggered by specifying the endpoints for the third-party wavelength routing path. The automatic wavelength routing feature may be triggered using a plurality of methods including, but not limited to, field operator input and NMS operator input. A field operator may use a craft terminal, inter connected to the network element (including switch controller) via craft interface , to input a predefined (basic) command that includes the local insertion address for the input port of the source network element (interconnected to the third-party wavelength source) and the destination address (of the output port) for the remote network element to which the third-party wavelength is routed, for physical interconnection to an external device (e.g., to a MTSO). Alternatively, the two endpoints (source input port address, destination output port address) for the third-party wavelength may be selected by a NMS operator using the user interface module (UIM) .","At step , SFM-AR  receives the addresses for the two endpoints via a command from the field or NMS operator. At step , SFM-AR  initiates path selection for the third-party wavelength using network state information maintained by the NSM. SFM-AR  may use a plurality of programmable algorithms to explore each tree and branch structure of the network element mesh configuration while avoiding routing loops and redundant paths. At step , SFM-AR  collates the potential path selection information, and at step , UIM  provides a network map with the path selection alternatives for the third-party wavelength. At step , SFM-AR  selects an optimal path from one of the algorithm results as shown on the network map.","Thereafter, at step , the control system enters a wavelength switching mode where the NMS sends a command to the current source network element, over the control channel, with actual output port\/destination information for the third-party wavelength to setup switching of the input third-party wavelength from the auxiliary input port to a selected output port. At step , the SSM (at the associated current source network element) sets up switching (cross-connection) of the third-party wavelength to the pre-determined output port.","At step , a decision analysis is performed to determine whether the endpoint (actual output port address for remote network element) has been reached for the third-party wavelength. If no, then the NMS selects the next (succeeding) network element for configuration (setup), and steps ,  are repeated for each succeeding network element until network path completion has been reached for setting up the third-party wavelength routing.","If yes, at step  the NMS verifies path completion by routing the third-party wavelength along the selected network path. Once verified, at step  the UIM  updates the network state map (NST) to the user or to the field operator if a craft terminal routing was used. At step , UIM  provides a confirmation message to the user of path completion and third-party wavelength routing. At step , SFM-AR  updates local global tables for confirmation of service (automatic wavelength routing) activation. At step , the process terminates.","Other functions provided by control system  include, but are not limited to, 1) providing accounting information and statistics to be fed into billing systems for accurate billing of services provided (activated) for users via the network elements (SSMs), and 2) identifying and recording detailed session information for session-based billing.","Using NMS , a billing system for the optical communications network may be developed using a plurality of methods including, but not limited to, 1) direct billing on a fixed time basis, 2) billing based on traffic usage on the ports of the network elements, 3) billing based on quantity of wavelengths switched upstream, downstream, and cross-connected in the network. A particular billing method may be selected, and the SSM (for each network element) will generate periodically summarized accounting and billing information.","In accordance with embodiments of the present invention, traffic-based billing may be used by the control system . As described herein, the SSM modules collect information regarding communication traffic upon cross-connecting occurring where cross-connection may be generated by control channel direction from the NMS, automatic wavelength routing, late insertion of additional wavelengths, or other methods. For control channel direction of cross-connection, the source node, intermediate points, and destination node of the complete routing path are known (defined) by the control system which makes billing parameters such as connection links, number of hops traversed, and other billing parameter easily provided to the billing system for the network.","For other cross-connection methods such as automatic routing and late insertion of additional wavelengths, the routing path follows a point-to-point cross-connect scheme where these billing parameters may be derived by the control system. For multi-hop broadcast or multicast routing paths, the billing parameters may be derived by taking each traversed link as a single segment and appending them into a mesh of connections.","Session-based billing (dynamic billing), using session identification, may be a further alternative form of billing. A session may be defined as the time (from start to end) for switching a wavelength from one end of the network to another. The end-to-end accounting information may be gathered from the NSM and used to represent a \u201csession\u201d. A session, as defined, may include all the current and past states of network elements available from the NMS in the form of network state snapshots. Session representation may be used advantageously for billing non-native traffic routing across the network as the time, ports used, and wavelengths switched, cross-connected, and routed along the non-native wavelength path may be recorded and read from the NSM to determine the \u201csession\u201d. Advantageously, a single parameter or a combination of these parameters may be used to arrive at a unique billing characteristic that is synonymous with the type of traffic, billing systems or the type of service that is delivered using the network.","For example, targeted services feature enablement provides a specific value-added revenue generating service that is targeted to a particular group of users. Specific session utilization information may be collected along the path (e.g., number of hops, ports, session time, etc.) of the particular service route chosen for this targeted service enablement. For a targeted services session that uses a single point-to-point cross-connect, the session information that is generated for each leg or segment may be collated in a linear fashion. For a targeted services session that is directed to a group of users, the session may be multicast and the information collation may be more difficult and complex. For all sessions, inputs from the NSM may be used to generated an appropriate method of aggregating the collated information.","Furthermore, accounting information may be generated in the network elements and sent periodically sent to the NMS system for collation and archival. This accounting data may be stored on the network element itself using, for example, a non-volatile medium so that key information is not lost during a power outage. Also, advantageously, the internal clocks for all network elements may be synchronized (using the input traffic stream header and payload data) with each other to ensure accurate billing and accounting.","Although the invention is primarily described herein using particular embodiments, it will be appreciated by those skilled in the art that modifications and changes may be made without departing from the spirit and scope of the present invention. As such, the method disclosed herein is not limited to what has been particularly shown and described herein, but rather the scope of the present invention is defined only by the appended claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0008","num":"0007"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 16"}]},"DETDESC":[{},{}]}
