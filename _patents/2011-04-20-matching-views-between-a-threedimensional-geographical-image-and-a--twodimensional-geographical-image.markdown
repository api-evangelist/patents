---
title: Matching views between a three-dimensional geographical image and a  two-dimensional geographical image
abstract: An apparatus determines a matching viewpoint for a geographical area displayed in three-dimensional geographical image and a corresponding two-dimensional geographical image. The apparatus may include a memory operative to store a two-dimensional geographical image and a three-dimensional geographical image. The memory may further store a transformation extension operative to interact with a host application to determine two-dimensional geographical image parameters for generating the two-dimensional geographical image from three-dimensional geographical image parameters for generating the three-dimensional geographical image. The apparatus may further include a processor operative to receive a geographical identifier for a geographical location, transmit the geographical identifier to receive two-dimensional geographical image instructions for displaying the three-dimensional geographical image, display the three-dimensional geographical image, and invoke the transformation extension to determine the two-dimensional geographical image parameters from the displayed three-dimensional geographical image. After invoking the transformation extension, the processor may then display the two-dimensional geographical image.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08937617&OS=08937617&RS=08937617
owner: Google Inc.
number: 08937617
owner_city: Mountain View
owner_country: US
publication_date: 20110420
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","BACKGROUND","BRIEF SUMMARY","DETAILED DESCRIPTION"],"p":["This application is related to co-pending U.S. patent application Ser. No. 13\/090,669, entitled \u201cMATCHING VIEWS BETWEEN A TWO-DIMENSIONAL GEOGRAPHICAL IMAGE AND A THREE-DIMENSIONAL GEOGRAPHICAL IMAGE,\u201d the entire disclosure of which is incorporated herein by reference.","A user may use a computer to find a geographical location on a map. In general, a geographical location may be a city, a geographical feature (e.g., a mountain, a river, etc.), a business, a residence, or any other type of geographical location. The computer may include both offline and online software for the user to find the geographical location. As one example of online software, a user may use an Internet browser (\u201ca web browser,\u201d \u201ca browser,\u201d etc.), such as Google Chrome, to visit a Uniform Resource Geographical location (\u201cURL\u201d) of an online service, such as a two-dimensional geographical map provider like Google Maps (located at the URL of \u201cmaps.google.com\u201d), to find the geographical location.","The online service may accept a query via the Internet browser for the geographical location. The query may include a geographical identifier, such as a specific postal address (e.g., \u201c1600 Amphitheatre Way, Mountain View, Calif.\u201d), a generic search term (e.g., \u201ccomputers\u201d), a proper name (e.g., \u201cGoogle\u201d), or any other type of query for a geographical location. In response, the online service may transmit objects to the Internet browser to display the geographical location on a two-dimensional geographical map in a viewport of the Internet browser. The objects may include a graphical representation of the geographical location, images for displaying the two-dimensional geographical map in which the geographical location is located, instructions for displaying the graphical representation overlaid on the images, vector instructions for drawing the two-dimensional geographical map, or any other objects used in displaying the two-dimensional geographical map.","In general, the two-dimensional geographical map provided by the online service is a top-down perspective of a geographical area and lacks a three-dimensional perspective. The two-dimensional geographical map may illustrate streets, buildings, parks, rivers, lakes, and other two-dimensional geographical features in the geographical area, and these features may be displayed in an outline representation. However, without three-dimensional information, such as depth, the user may be unaware of the whether the displayed geographical area is hilly, flat, or mountainous; has tall or short buildings; or, has other such terrain.","As the two-dimensional geographical map may lack a three-dimensional perspective, the user may rely on another online service to provide a three-dimensional geographical map of the area in which the geographical location is located. However, visiting the URL of the separate online service may require the user to open a new Internet browser window or a new Internet browser tab to display the three-dimensional geographical map. As the two-dimensional geographical map may be interactive, the user may have established a view of the geographical location in the original Internet browser window or tab that the user wishes to maintain. Hence, when the user visits the online service providing the three-dimensional geographical map, the user may be required to go through a series of steps to recreate the view the user previously set up through interacting with the two-dimensional geographical map. This process may be frustrating, time-consuming, and may detract from the overall experience of interacting with the two-dimensional and three-dimensional geographical maps.","An apparatus for determining a matching viewpoint for a geographical area displayed in a three-dimensional geographical image for a corresponding two-dimensional geographical image is provided. In one embodiment, the apparatus includes a memory operative to store a first two-dimensional geographical image corresponding to a geographical area, first three-dimensional geographical image corresponding to the geographical area, and a transformation extension. The transformation extension may be operative to interact with a host application to determine at least one two-dimensional geographical image parameter value for displaying the two-dimensional geographical image based on at least one three-dimensional geographical image parameter value for displaying the three-dimensional geographical image","The apparatus may further include a processor, in communication with the memory, operative to display the three-dimensional geographical image, invoke the transformation extension to determine the at least one two-dimensional geographical image parameter value based on the displayed three-dimensional geographical image, transmit the at least one two-dimensional geographical image parameter value to receive two-dimensional geographical image instructions for displaying the two-dimensional geographical image, and display the two-dimensional geographical image.","In another embodiment of the apparatus, the three-dimensional geographical image is displayable within a viewport of the host application and the transformation extension is further operative to display the two-dimensional geographical image in the viewport of the host application instead of the three-dimensional geographical image.","In a further embodiment of the apparatus, the two-dimensional geographical image instructions include instructions to display the two-dimensional geographical image as a plurality of vector graphics.","In yet another embodiment of the apparatus, the host application is a web browser.","In yet a further embodiment of the apparatus, the at least one two-dimensional geographical image parameter value includes a zoom level at which the two-dimensional geographical image is displayed.","In another embodiment of the apparatus, the at least one three-dimensional geographical image parameter value includes an altitude at which the three-dimensional geographical image is displayed.","In a further embodiment of the apparatus, the at least one three-dimensional geographical image parameter value includes a tilt parameter value, and the processor is further operative to compare the tilt parameter value with a tilt parameter threshold value, and when the tilt parameter value exceeds the tilt parameter threshold value, determine the at least one two-dimensional geographical image parameter value based on the tilt parameter threshold value.","In yet another embodiment of the apparatus, the transformation extension is further operative to distinguish between a normalized view of the geographical area shown in the three-dimensional geographical image and a non-normalized view of the geographical area shown in the three-dimensional geographical image.","In yet a further embodiment of the apparatus, the at least one three-dimensional geographical image parameter value includes a heading parameter value and a tilt parameter value and the transformation extension is operative to identify the view of the geographical area as a non-normalized view when at least one of the heading parameter value or the tilt parameter value exceeds a predetermined threshold.","In another embodiment of the apparatus, the transformation extension is further operative to determine a plurality of zoom levels at which the two-dimensional geographical image is displayable, determine a plurality of altitudes corresponding to the plurality of zoom levels, and select one of the zoom levels from the plurality of zoom levels as the at least one two-dimensional geographical image parameter value based on a comparison of the plurality of altitudes with the at least one three-dimensional geographical image parameter value.","In a further embodiment of the apparatus, the processor is further operative to determine a tilt parameter value and a heading parameter value based on a prior interaction with the displayed first three-dimensional geographical image, display a second three-dimensional geographical image with the determined tilt parameter value and heading parameter, store the tilt parameter value and heading parameter value when a request is received to display the two-dimensional geographical image corresponding to the second three-dimensional geographical image, and apply the stored tilt parameter value and heading parameter value to a third three-dimensional geographical image when a request is received to display the third three-dimensional geographical corresponding to the two-dimensional geographical image.","A method for determining a matching viewpoint for a geographical area displayed in a three-dimensional geographical image for a corresponding two-dimensional geographical image is also provided. In one embodiment, the method includes establishing a transformation extension operative to interact with a host application to determine at least one two-dimensional geographical image parameter value for displaying a first two-dimensional geographical image of a geographical area, the at least one two-dimensional geographical image parameter value being based on at least one three-dimensional geographical image parameter value for displaying a first three-dimensional geographical image of the geographical area. The method may also include displaying, with a display device in communication with the memory, the three-dimensional geographical image and invoking, with a processor in communication with the memory, the transformation extension to determine the at least one two-dimensional geographical image parameter value based on the displayed three-dimensional geographical image.","Moreover, the method may include transmitting the at least one two-dimensional geographical image parameter value to receive two-dimensional geographical image instructions for displaying the two-dimensional geographical image and displaying the two-dimensional geographical image.","In another embodiment of the method, the three-dimensional geographical image is displayable within a viewport of the host application and the transformation extension is further operative to display the two-dimensional geographical image in the viewport of the host application instead of the three-dimensional geographical image.","In a further embodiment of the method, the two-dimensional geographical image instructions include instructions to display the first two-dimensional geographical image as a plurality of vector graphics.","In yet another embodiment of the method, the host application is a web browser.","In yet a further embodiment of the method, the at least one two-dimensional geographical image parameter value includes a zoom level at which the first two-dimensional geographical image is displayed.","In another embodiment of the method, the at least one three-dimensional geographical image parameter value includes an altitude at which the first three-dimensional geographical image is displayed.","In a further embodiment of the method, the at least one three-dimensional geographical image parameter value includes a tilt parameter value, and the method further comprises comparing the tilt parameter value with a tilt parameter threshold value, and when the tilt parameter value exceeds the tilt parameter threshold value, determining the at least one two-dimensional geographical image parameter value based on the tilt parameter threshold value.","In yet another embodiment of the method, the method further includes distinguishing between a normalized view of the geographical area displayable in the first three-dimensional geographical image and a non-normalized view of the geographical area displayable in the first three-dimensional geographical image.","In yet a further embodiment of the method, the at least one three-dimensional geographical image parameter value comprises a heading parameter value and a tilt parameter value, and the method further includes identifying the view of the geographical area as a non-normalized view when at least one of the heading parameter value or the tilt parameter value exceeds a predetermined threshold.","In another embodiment of the method, the method further includes determining a plurality of zoom levels at which the first two-dimensional geographical image is displayable, determining a plurality of altitudes, each altitude of the plurality of altitudes corresponding to a zoom level of the plurality of zoom levels, and selecting one of the zoom levels from the plurality of zoom levels as the least one two-dimensional geographical image parameter value based on a comparison of at least one of the altitudes of the plurality of altitudes with the at least one three-dimensional geographical image parameter value.","In a further embodiment of the method, the method further includes determining a tilt parameter value and a heading parameter value based on a prior interaction with the displayed first three-dimensional geographical image, displaying a second three-dimensional geographical image with the determined tilt parameter value and heading parameter, storing the tilt parameter value and heading parameter value when a request is received to display the two-dimensional geographical image corresponding to the second three-dimensional geographical image, and applying the stored tilt parameter value and heading parameter value to a third three-dimensional geographical image when a request is received to display the third three-dimensional geographical corresponding to the two-dimensional geographical image.","Another apparatus for determining a matching viewpoint for a geographical area displayed in a three-dimensional geographical image for a corresponding two-dimensional geographical image is also provided. In one embodiment, the apparatus includes a memory operative to store a transformation extension operative to interact with a host application to determine at least one two-dimensional geographical image parameter value from at least one three-dimensional geographical image parameter value. In addition, the least one two-dimensional geographical image parameter value may be determined from comparing a first difference between the at least one three-dimensional geographical image parameter value and at least a second three-dimensional geographical image parameter value with a second difference between the at least one three-dimensional geographical image parameter value and at least a third three-dimensional geographical image parameter value.","Furthermore, the apparatus may include a processor, in communication with the memory, operative to receive a request to display a two-dimensional geographical image, invoke the transformation extension based on the received request to determine the at least one two-dimensional geographical image parameter value, and display the two-dimensional geographical image based on the determined at least one two-dimensional geographical image parameter value.","In another embodiment of the apparatus, the three-dimensional geographical image is displayable within a viewport of the host application and the transformation extension is further operative to display the two-dimensional geographical image in the viewport of the host application instead of the three-dimensional geographical image.",{"@attributes":{"id":"p-0043","num":"0042"},"figref":"FIG. 1","b":["102","102","104","106","108","110","112"]},"The client devices - may comprise many different types of client devices, such as a desktop computer, a laptop computer, a smartphone, a table computer, or any other such client device. A user may communicate with the two-dimensional geographical image server  and\/or the three-dimensional geographical image server  via an application running or residing on the client device -. One example of an application that a user may use is an Internet browser, such as Google Chrome, Mozilla Firefox, or any other such Internet browser, regardless of whether the Internet browser was designed for desktop or mobile computing.","The two-dimensional geographical image server  may provide two-dimensional geographical images of geographical areas to one or more of the client devices -. The two-dimensional geographical image server  may be an online service provider that hosts an interactive website at an URL, where the user may provide a query to the interactive website to display a geographic location on a two-dimensional geographical map of a geographical area. One example of an online service provider that provides two-dimensional geographical images of geographical areas is Google Maps, which is accessible via the URL \u201cmaps.google.com.\u201d","In one embodiment, the two-dimensional geographical image server  may provide two-dimensional geographical instructions to the client devices - for displaying the two-dimensional geographical image of the geographical area. The instructions may include one or more two-dimensional images of the geographical area, and the two-dimensional geographical instructions may inform the application residing on the client device how to piece the two=dimensional images together to form a two-dimensional geographical image of the geographical area. Depending on the level of granularity (i.e., the \u201czoom level\u201d) at which the user desires to view the geographical area, it is possible that the two-dimensional geographical image server  transmits a single bitmap, such as in the case where the user wishes to view the geographical area at a high (or highest) zoom level. In an alternative embodiment, the two-dimensional geographical instructions may comprise instructions for displaying the two-dimensional geographical image of the geographical area as a plurality of vector graphics. Moreover, the two-dimensional geographical instructions may include combinations of images, instructions for displaying the images, and instructions for displaying the two-dimensional geographical image as a plurality of vector graphics.","The instructions may further include graphical representations or graphical identifiers, such as markers, for one or more geographical locations, and the instructions may instruct the application on the client device where to display the graphical representations or graphical identifiers on the two-dimensional geographical image. In one embodiment, the instructions may instruct the application to overlay the graphical representations or graphical identifiers on the two-dimensional graphical image.","The three-dimensional geographical image server  may provide three-dimensional geographical images of geographical areas to one or more of the client devices -. The three-dimensional geographical image server  may be an online service provider that hosts an interactive website at a URL, where the user may provide a query to the interactive website to display a geographic location on a three-dimensional map of a geographical area. One example of an online service provider that provides three-dimensional geographical images of geographical areas is Google Earth, which is accessible via the URL \u201cearth.google.com.\u201d","In contrast to the two-dimensional geographical images, the three-dimensional geographical images may have a height\/depth component. That is, objects appearing in the three-dimensional geographical images may appear taller or shorter relative to one another. For example, when a building appears in a two-dimensional geographical image hosted by the two-dimensional geographical image server , the building may have length and width, but the user viewing the building may have no concept of how tall or short the building appears relative to other buildings. However, when the same building appears in a three-dimensional geographical image hosted by the three-dimensional geographical server , the building may be displayed with a height\/depth component, such that the building appears taller or shorter relative to other buildings. In this manner, the three-dimensional geographical images may further contain graphical representations of mountains, hills, valleys, trees, and other geographical features that appear tall, short, wide, thin, etc. Thus, when the client devices - display a geographical area using one or more three-dimensional geographical images, the user may gain an understanding of the size of one geographical feature (e.g., a mountain) relative to another geographical feature (e.g., a tree).","In one embodiment, the three-dimensional geographical image server  may provide three-dimensional geographical instructions to the client devices - for displaying the three-dimensional geographical image of the geographical area. The instructions may include one or more three-dimensional images of the geographical area. In addition, the three-dimensional geographical instructions may include three-dimensional modeling information for various objects appearing in the three-dimensional images. The three-dimensional geographical instructions may inform the application residing on the client device how to draw objects using the three-dimensional modeling information to construct a three-dimensional geographical image of the geographical area.","Depending on the level of granularity (i.e., the \u201czoom level\u201d) at which the user desires to view the geographical area, it is possible that the three-dimensional geographical image server  transmits one or more images, such as in the case where the user wishes to view the geographical area at a high (or highest) zoom level.","The three-dimensional geographical instructions may further include graphical representations or graphical identifiers, such as markers, for a geographical location, and the three-dimensional geographical instructions may instruct the application on the client device where to display the graphical representations or graphical identifiers on the three-dimensional geographical image. In one embodiment, the instructions may instruct the application to overlay the graphical representations or graphical identifiers on the three-dimensional graphical image.",{"@attributes":{"id":"p-0053","num":"0052"},"figref":"FIG. 2","b":["108","104","108","108","202","204","202","202","206","208","210","212","206","208","108","108","206","208"]},"The host application  may be any application operative to communicate with the two-dimensional geographical image server  and the three-dimensional geographical image server  when executed by the processor . As mentioned previously, the host application  may be an Internet browser. However, the host application  may be other types of applications, such as a navigation application, a gaming application, a reference application, or any other such application now known or later developed.","In one embodiment, the host application  is operative to receive a query from the user of the client device  for a geographical location. As mentioned above, the query for the geographical location may include a geographical identifier. The geographical identifier may be a postal address, a generic description, a proper name, or any other type of geographical identifier or combinations thereof. In one embodiment, the host application  may communicate the query to the two-dimensional geographical image server . In another embodiment, the host application  may communicate the query to a geocoding server (not shown) operative to identify one or more latitude and\/or longitude coordinates from the geographical identifier in the query.","In response to the query, the host application may receive one or more two-dimensional geographical instructions  for displaying a two-dimensional geographical area of a geographical map having one or more geographical locations that satisfy the initial query. In some instances, a default or fallback two-dimensional geographical image may be displayed should the two-dimensional geographical image server  be unable to find one or more geographical locations that satisfy the initial query.",{"@attributes":{"id":"p-0057","num":"0056"},"figref":["FIG. 3","FIG. 3","FIG. 3"],"b":["402","404","402","206","304","304"]},"The viewport  may display various graphical controls - for interacting with the two-dimensional geographical image . The graphical controls - may include a navigation control  and a zoom level control . As a user interacts with the graphical controls -, the user may change the geographical area displayed in the viewport . For example, manipulating the navigation control  may cause the appearance of \u201cpanning\u201d in the geographical area. When the user pans the two-dimensional geographical image east, west, north, south, or any other direction (e.g., north-west, south-west, etc.) using the navigation control , the host application may request additional two-dimensional geographical images and\/or two-dimensional geographical image instructions from the two-dimensional geographical image server . As the host application  receives the two-dimensional geographical images and\/or two-dimensional geographical image instructions, the host application  may display the two-dimensional geographical images in the viewport . Hence, as a user manipulates the navigation control , the user may change the geographical area displayed in viewport , and the change in the two-dimensional geographical images may appear seamless to the user.","The host application  may also request changes in the level of detail of the two-dimensional geographical image . Using the zoom level control , a user may request increases or decreases in the zoom level of the two-dimensional geographical image, which may affect the level of detail displayed in the viewport . For example, as the user increases the level of detail, such as by moving a slider on the zoom level control  upwards, the host application  may request additional two-dimensional geographical images and\/or two-dimensional geographical image instructions from the two-dimensional geographical image server  that correspond to the increased zoom level.","Similarly, as the user decreases the level of detail, such as by moving the slider on the zoom level control  downwards, the host application  may request additional two-dimensional geographical images and\/or two-dimensional geographical image instructions from the two-dimensional geographical image server  that correspond to the decreased zoom level. In one embodiment, increasing the amount of detail displayed in the two-dimensional geographical image  (i.e., increasing the zoom level) may decrease the amount of geographical area displayed in the viewport , and decreasing the amount of detail displayed in the two-dimensional geographical image  (i.e., decreasing the zoom level) may increase the amount of geographical area displayed in the viewport .","As the user interacts with the graphical controls -, the user may change one or more two-dimensional geographical parameters  stored in the memory . The two-dimensional geographical parameters  may include one or more parameters that facilitate the display of the two-dimensional geographical image .","In one embodiment, the two-dimensional geographical image parameters  may include a viewport height parameter, a viewport width parameter, a latitude parameter, a longitude parameter, a zoom level parameter, and a projection parameter. The viewport height parameter may describe the height of the viewport in pixels, the viewport width parameter may describe the width of the viewport in pixels, the latitude parameter may indicate the latitude of a pixel displayed in the two-dimensional geographical image , the longitude parameter may indicate the longitude of a pixel displayed in the two-dimensional geographical image , and the zoom level parameter may indicate the zoom level of the two-dimensional geographical image  displayed in the viewport . The projection parameter may indicate the projection (e.g., Mercator, Mollweide, Roussilhe, Equirectangular, Gnomonic, etc.) of the two-dimensional geographical image. In one embodiment, the latitude parameter and the longitude parameter may correspond to the latitude and longitude of the center pixel of the two-dimensional geographical image .","In one embodiment, the user may change the latitude parameter and the longitude parameter by manipulating the navigation control . Panning the two-dimensional geographical image  north or south may affect the latitude parameter and panning the two-dimensional geographical image  east or west may affect the longitude parameter. When the user manipulates the navigation control , the host application  may transmit the affected latitude parameter and\/or longitude parameter to the two-dimensional geographical image server  to inform the two-dimensional geographical image server  the geographical area to be displayed in the viewport .","In addition, the user may change the zoom level parameter by manipulating the zoom level control . When the user manipulates the zoom level control , the host application  may transmit the affected zoom level parameter to the two-dimensional geographical image server  to inform the two-dimensional geographical image server  the geographical area to be displayed in the viewport .","The viewport  may further include a transformation extension activation control . Selecting, such as by \u201cclicking,\u201d the transformation extension activation control  may activate the transformation extension . The transformation extension  is operative to determine a three-dimensional view corresponding to the two-dimensional view shown in the two-dimensional viewport . Where the host application  is an Internet browser, the transformation extension  may include functionalities that extend the operations of the Internet browser. For example, the transformation extension  may be a \u201cplug-in\u201d that operates in cooperation with the Internet browser.","Instead of having to visit a different URL in a different Internet browser window or different Internet browser tab to view a three-dimensional geographical image of the view displayed in the viewport , the user may select the transformation extension activation control . When selected, the processor  may invoke the transformation extension  to determine one or more three-dimensional geographical image geographical parameters  for generating a three-dimensional geographical image from the two-dimensional geographical image parameters  for the corresponding two-dimensional geographical image .","In general, when a three-dimensional geographical image is shown to a viewer, the viewer views the three-dimensional geographical image from the viewpoint of a virtual camera. The virtual camera may have attributes similar to a physical camera in that the virtual camera may be rotatable about one or more axes, known as yaw, pitch, and roll. Moreover, the virtual camera may have an altitude attribute that indicates the height of the virtual camera relative to one of the objects the virtual camera is viewing. (e.g., an altitude relative to sea level, a terrain object, a building object, etc.). In one embodiment, the object may be a three-dimensional model of the geographical area shown in the two-dimensional geographical image . The transformation extension  may determine the attributes of the virtual camera so as to present a view (i.e., the three-dimensional geographical image) of the three-dimensional model of the geographical area that best matches the two-dimensional geographical image . The transformation extension  may further determine other attributes, such as viewport attributes (e.g., height, width, aspect ratio, etc.) that present the three-dimensional geographical image of the geographical area. The three-dimensional geographical image parameters  may include one or more of the attributes described above.","In one embodiment, the transformation extension  determines a matching view as a viewpoint located directly above the same, or approximately the same, latitude and longitude coordinates as the center pixel of the two-dimensional geographical image . Moreover, the virtual camera for the matching viewpoint may be oriented downwards, having little to no pitch, and oriented northwards, that is, having a heading of 0\u00b0. Hence, determining a matching viewpoint in three-dimensions may be reduced to determining the altitude parameter of the virtual camera that best matches the zoom level parameter for the corresponding two-dimensional geographical image .","The transformation extension  may determine the altitude parameter at which the virtual camera may be placed in order to see the exact same, or nearly approximate, latitude span (i.e., the number of latitude degrees) as displayed in the two-dimensional geographical image . To determine the latitude span displayed in the two-dimensional geographical image , the transformation extension  may communicate with the host application  to determine the latitude angle for the center pixel of the two-dimensional geographical image . Based on the latitude angle of the center pixel, the transformation extension  may determine the height of the center pixel and the height of the viewport of the virtual camera.",{"@attributes":{"id":"p-0070","num":"0069"},"figref":"FIG. 4","b":["402","208","304","208","208","206"]},{"@attributes":{"id":"p-0071","num":"0070"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 1"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Variable Description"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"C ","A point representing the center of the "]},{"entry":[{},{},"Earth. "]},{"entry":[{},"C'","A point representing the center of the "]},{"entry":[{},{},"projection of the virtual camera. "]},{"entry":[{},"Angle \u03b1","Half of the latitude angle visible in "]},{"entry":[{},{},"the two-dimensional geographical image. "]},{"entry":[{},"Angle \u03b1","The latitude angle corresponding to the "]},{"entry":[{},{},"center pixel of the two-dimensional "]},{"entry":[{},{},"geographical image. "]},{"entry":[{},"VFOV","The vertical field of view (in degrees) "]},{"entry":[{},{},"of the virtual camera for displaying the "]},{"entry":[{},{},"three-dimensional geographical image. "]},{"entry":[{},"HFOV ","The horizontal field of view (in "]},{"entry":[{},{},"degrees) of the virtual camera for "]},{"entry":[{},{},"displaying the three-dimensional "]},{"entry":[{},{},"geographical image. "]},{"entry":[{},"aspectRatio","The aspect ratio of the viewport showing "]},{"entry":[{},{},"the two-dimensional geographical image "]},{"entry":[{},{},"and\/or the three-dimensional "]},{"entry":[{},{},"geographical image. "]},{"entry":[{},"w ","The width of the viewport (in pixels) "]},{"entry":[{},{},"showing the two-dimensional geographical "]},{"entry":[{},{},"image and\/or the three-dimensional "]},{"entry":[{},{},"geographical image. "]},{"entry":[{},"h ","The height of the viewport (in pixels) "]},{"entry":[{},{},"showing the two-dimensional geographical "]},{"entry":[{},{},"image and\/or the three-dimensional "]},{"entry":[{},{},"geographical image. "]},{"entry":[{},"Line PP","The height of the center pixel (in "]},{"entry":[{},{},"meters) displayed in the two-dimensional "]},{"entry":[{},{},"geographical image. "]},{"entry":[{},"Line PP","Half of the height of the viewport (in "]},{"entry":[{},{},"meters) displaying the two-dimensional "]},{"entry":[{},{},"geographical image."]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}]}}},"Referencing , the equations below illustrate how the transformation extension  may determine the altitude of the virtual camera (line C\u2032T):",{"@attributes":{"id":"p-0073","num":"0072"},"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":[{"mtd":[{"mrow":{"mrow":[{"mi":"tan","mo":"\u2061","mrow":{"mo":["(",")"],"mfrac":{"mi":"VFOV","mn":"2"}}},{"mrow":{"mi":"tan","mo":"\u2061","mrow":{"mo":["(",")"],"mfrac":{"mi":"HFOV","mn":"2"}}},"mo":"*","mi":"aspectRatio"}],"mo":"="}},{"mrow":{"mo":["(",")"],"msub":{"mi":"eq","mn":"1"}}}]},{"mtd":[{"mrow":{"msub":{"mi":["PP","n"]},"mo":"=","mrow":{"msub":{"mi":"PP","mn":"0"},"mo":"*","mfrac":{"mi":"w","mn":"2"}}}},{"mrow":{"mo":["(",")"],"msub":{"mi":"eq","mn":"2"}}}]},{"mtd":[{"mrow":{"msub":{"mi":"PP","mn":"0"},"mo":"=","mrow":{"mi":"CP","mo":"*","mrow":{"mi":"tan","mo":"\u2061","mrow":{"mo":["(",")"],"msub":{"mi":"\u03b1","mn":"0"}}}}}},{"mrow":{"mo":["(",")"],"msub":{"mi":"eq","mn":"3"}}}]},{"mtd":[{"mrow":{"msup":{"mi":"R","mn":"2"},"mo":"=","mrow":{"msup":{"mi":"CP","mn":"2"},"mo":"+","msubsup":{"mi":["PP","n"],"mn":"2"}}}},{"mrow":{"mo":["(",")"],"msub":{"mi":"eq","mn":"4"}}}]},{"mtd":[{"mrow":{"msup":{"mi":"R","mn":"2"},"mo":"=","mrow":{"msup":{"mi":"CP","mn":"2"},"mo":"*","mrow":{"mo":["(",")"],"mrow":{"mn":"1","mo":"+","mrow":{"msup":{"mrow":{"mi":"tan","mo":"\u2061","mrow":{"mo":["(",")"],"msub":{"mi":"\u03b1","mn":"0"}}},"mn":"2"},"mo":"*","mfrac":{"msup":{"mi":"h","mn":"2"},"mn":"2"}}}}}}},{"mrow":{"mo":["(",")"],"msub":{"mi":"eq","mn":"5"}}}]},{"mtd":[{"mrow":{"mi":"CP","mo":"=","mfrac":{"mi":"R","msqrt":{"mrow":{"mn":"1","mo":"+","mrow":{"msup":{"mrow":{"mi":"tan","mo":"\u2061","mrow":{"mo":["(",")"],"msub":{"mi":"\u03b1","mn":"0"}}},"mn":"2"},"mo":"*","mfrac":{"msup":{"mi":"h","mn":"2"},"mn":"2"}}}}}}},{"mrow":{"mo":["(",")"],"msub":{"mi":"eq","mn":"6"}}}]},{"mtd":[{"mrow":{"msup":{"mi":"R","mn":"2"},"mo":"=","mrow":{"msup":{"mi":"CP","mn":"2"},"mo":"+","msubsup":{"mi":["PP","n"],"mn":"2"}}}},{"mrow":{"mo":["(",")"],"msub":{"mi":"eq","mn":"7"}}}]},{"mtd":[{"mrow":{"msub":{"mi":"PP","mn":"2"},"mo":"=","msqrt":{"mrow":{"mo":["(",")"],"mrow":{"msup":[{"mi":"R","mn":"2"},{"mi":"CP","mn":"2"}],"mo":"-"}}}}},{"mrow":{"mo":["(",")"],"msub":{"mi":"eq","mn":"8"}}}]},{"mtd":[{"mrow":{"mrow":[{"msup":{"mi":["C","\u2032"]},"mo":"\u2062","mi":"T"},{"mrow":[{"mrow":{"msup":{"mi":["C","\u2032"]},"mo":"\u2062","mi":"P"},"mo":"-","mi":"PT"},{"mrow":[{"msup":{"mi":["C","\u2032"]},"mo":"\u2062","mi":"P"},{"mo":["(",")"],"mrow":{"mi":["R","CP"],"mo":"-"}}],"mo":"-"}],"mo":"="}],"mo":"="}},{"mrow":{"mo":["(",")"],"msub":{"mi":"eq","mn":"9"}}}]},{"mtd":[{"mrow":{"mrow":[{"msup":{"mi":["C","\u2032"]},"mo":"\u2062","mi":"T"},{"mfrac":{"msub":{"mi":["PP","n"]},"mrow":{"mrow":{"mi":"tan","mo":"\u2061","mrow":{"mo":["(",")"],"mfrac":{"mi":"HFOV","mn":"2"}}},"mo":"*","mi":"aspectRatio"}},"mo":["-","+"],"mi":["R","CP"]}],"mo":"="}},{"mrow":{"mo":["(",")"],"msub":{"mi":"eq","mn":"10"}}}]},{"mtd":[{"mrow":{"mrow":[{"msup":{"mi":["C","\u2032"]},"mo":"\u2062","mi":"T"},{"mfrac":{"mi":"R","mrow":{"mrow":{"mi":"tan","mo":"\u2061","mrow":{"mo":["(",")"],"mfrac":{"mi":"HFOV","mn":"2"}}},"mo":"*","mi":"aspectRatio"}},"mo":"*","mrow":{"mo":["[","\u2062","]"],"mstyle":{"mspace":{"@attributes":{"width":"0.em","height":"0.ex"}}},"mrow":{"mfrac":{"msub":{"mi":["PP","n"]},"mi":"R"},"mo":"+","mrow":{"mrow":[{"mo":["(",")"],"mrow":{"mfrac":{"mi":["CP","R"]},"mo":"-","mn":"1"}},{"mi":"tan","mo":"\u2061","mrow":{"mo":["(",")"],"mfrac":{"mi":"HFOV","mn":"2"}}}],"mo":["*","*"],"mi":"aspectRatio"}}}}],"mo":"="}},{"mrow":{"mo":["(",")"],"msub":{"mi":"eq","mn":"11"}}}]}]}}}},"Equation 11 (i.e., \u201ceq\u201d) shows the various parameters (described in Table 1 above) that the transformation extension  may leverage in order to determine the altitude (line C\u2032T) of the virtual camera for displaying a three-dimensional geographical image having the same, or approximately same, view as the two-dimensional geographical image .","When invoked, the transformation extension  may determine the altitude of the virtual camera as described above, and then may communicate one or more parameters to the three-dimensional geographical image server  for displaying a corresponding view of the geographical area from  in a three-dimensional geographical image. For example, the transformation extension  may communicate the latitude and longitude of the center pixel of the two-dimensional geographical image , in addition to the determined altitude of the virtual camera, to the three-dimensional geographical image server . The latitude and longitude parameters may inform the three-dimensional geographical image server  which geographical area the transformation extension  is to display, and the altitude of the virtual camera may inform the three-dimensional geographical image server  the level of detail the transformation extension  is to display. When the three-dimensional geographical image server  communicates the corresponding three-dimensional geographical image instructions, which may include images, graphical textures, object model parameters, etc. for the corresponding geographical area to the transformation extension , the transformation extension may display corresponding three-dimensional geographical images in a viewport (the same or different viewport) of the host application.","It should be understood that, in some instances, the client device  may store the two-dimensional geographical images and\/or three-dimensional geographical images, including the relevant instructions for the display thereof, and that the transformation extension  may retrieve these images and instructions from the memory of the client device . Other arrangements or distributions of the two-dimensional and three-dimensional geographical images and\/or instructions are also possible.","In determining the altitude of the virtual camera, the transformation extension  may determine a scaling factor to apply to the viewport that displays the three-dimensional geographical image. The transformation extension  may apply the scaling factor because, when the virtual camera is determined to be at a high altitude, two-dimensional projections of the geographical area, such as a Mercator projection, stretch the resulting image of the geographical area non-uniformly. Hence, a pixel close to the Earth's equator may have a corresponding pixel latitude span smaller than a pixel close to the Earth's North Pole. Thus, a pixel close to the Earth's equator may have a corresponding angle value (i.e. \u03b1) that is too small, which results in a virtual camera altitude that is too low.","In one embodiment, the transformation extension  may address this issue by providing a \u201cfalse\u201d viewport of the three-dimensional geographical image that has a decreased height parameter when the transformation extension  determines that the virtual camera is to be placed at high altitudes. The virtual camera may then be placed farther (i.e., having higher altitude) from the geographical area to cover the same latitude angle span. The transformation extension  may determine a scaling factor for the viewport of the three-dimensional geographical image based on the zoom level shown in the two-dimensional geographical image . Moreover, the scaling factor may vary depending on the zoom level shown in the two-dimensional geographical image . For example, the transformation extension  may apply a scaling factor of 0.5 to the viewport when the transformation extension  determines that the zoom level for the two-dimensional geographical image  is below a predetermined zoom level, such as a zoom level of two. The transformation extension may further determine the scaling factor when the zoom level for the two-dimensional geographical image  exceeds a predetermined zoom level. One example of determining the scaling factor is shown below in equation 12:",{"@attributes":{"id":"p-0079","num":"0078"},"maths":{"@attributes":{"id":"MATH-US-00002","num":"00002"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mi":"scalingFactor","mo":"=","mrow":{"mi":"max","mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mn":"0.5","mo":",","mrow":{"mi":"acros","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mfrac":{"mi":"currAngle","mrow":{"mi":["level","Angle"],"mo":["\u2062","\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"2"}},"mo":"*","mn":"60"}}}}}}}},{"mrow":{"mo":["(",")"],"msub":{"mi":"eq","mn":"12"}}}]}}}}},"where:\n\n","The operand of 60 in equation 12 may be derived from the fact that, when currAngle is equal to level2Angle, arcos(60) is equal to 0.5. In this manner, the transformation extension  displays a relatively uniform three-dimensional geographical image when the zoom level of the two-dimensional geographical image exceeds the predetermined zoom level of a zoom level of two.","The transformation extension  may further adjust the viewport for displaying the three-dimensional geographical image when the latitude angle span displayed in the two-dimensional geographical image  exceeds a predetermined latitude angle span threshold. The latitude angle span threshold may be equal to, or approximately equal to, the latitude angle span visible by the virtual camera for displaying the corresponding three-dimensional geographical image. In one embodiment, the transformation extension  may be configured with the predetermined latitude angle span threshold but, in another embodiment, the transformation extension  may query the three-dimensional geographical image server  for the predetermined latitude angle span threshold. Combinations of the foregoing are also possible.","The transformation extension  may adjust the viewport for displaying the three-dimensional geographical image when the latitude angle displayed in the two-dimensional geographical image  exceeds the predetermined latitude angle span threshold because the resulting latitude angle for the viewport of the three-dimensional geographical image will be incorrect. For example, the resulting latitude angle may be higher than what is displayable in the viewport for the three-dimensional geographical image. In one embodiment, the transformation extension  may address this issue by limiting the visible latitude angle for the viewport of the three-dimensional geographical image to the predetermined latitude angle span threshold. Then, the transformation extension  may adjust the height of the viewport and the aspect ratio of the viewport accordingly. The height of the viewport and the aspect ratio of the viewport may be determined by one or more of the equations provided above, such as equation 1.",{"@attributes":{"id":"p-0084","num":"0085"},"figref":["FIG. 5","FIG. 3"],"b":["502","504","504","310","504","208","502","206","502","302","304","504","504","304","504","304"]},"The three-dimensional geographical image  may show various streets, highways, buildings, parks, trails, and other various geographical features previously shown in the two-dimensional geographical image . As previously discussed, one or more objects in the three-dimensional geographical image , such as buildings, mountains, trees, etc., may be displayed as three-dimensional models such that the objects have the appearance of height, width, and depth. Moreover, the objects and images shown in the three-dimensional geographical image  may have photorealistic textures such that the area displayed in the three-dimensional geographical image  appears realistic.","The viewport  may display various graphical controls - for interacting with the three-dimensional geographical image . The graphical controls - may include a heading control , a panning control , and an altitude control . As a user interacts with the graphical controls -, the user may change the geographical area displayed in the viewport  and\/or the placement or orientation of the virtual camera. For example, manipulating the panning control  may cause the appearance of \u201cpanning\u201d in the geographical area.","Because the geographical area is displayed as the three-dimensional geographical image , manipulation of the panning control  may further cause alterations in the placement of the virtual camera. Hence, while the geographical area appears to be moving from the perspective of the viewer, it may be that the virtual camera is, in fact, moving.","When the user manipulates the panning control  to pan the three-dimensional geographical image  east, west, north, south, or any other direction (e.g., north-west, south-west, etc.), the transformation extension  may request additional three-dimensional geographical images and\/or three-dimensional geographical image instructions from the three-dimensional geographical image server . As the transformation extension  receives the additional three-dimensional geographical images and\/or three-dimensional geographical image instructions, the transformation extension  may display the three-dimensional geographical images in the viewport . Hence, as a user manipulates the panning control , the user may change the geographical area displayed in viewport , and the change in the three-dimensional geographical images may appear seamless to the user.","The user may further alter the tilt (i.e. pitch) and heading (i.e. yaw) of the virtual camera using the heading control . Manipulating (e.g., by clicking with a mouse, selecting with a finger, typing with a keyboard, etc.) the \u201cup\u201d arrow on the heading control  may tilt the virtual camera upwards and manipulating the \u201cdown\u201d arrow may tilt the virtual camera downwards. Similarly, manipulating the \u201cleft\u201d arrow on the heading control  may rotate the virtual camera leftwards and manipulating the \u201cright\u201d arrow on the heading control  may rotate the virtual camera rightwards. Manipulating any one of the arrows may tilt or rotate the virtual camera by a predetermined amount, such as by one degree. Tilting or rotating the virtual camera may display additional three-dimensional geographical images in the viewport . Moreover, depending on the three-dimensional geographical images previously stored by the client device , such as by caching, tilting and\/or rotating the virtual camera may cause the transformation extension  to request additional three-dimensional geographical image instructions and\/or three-dimensional geographical images from the three-dimensional geographical image server .","A user may further request changes in the level of detail of the three-dimensional geographical image . Using the altitude control , a user may request increases or decreases in the altitude of the virtual camera, which, in turn, may affect the level of detail displayed in the viewport . In one embodiment, the altitude control  shown in  is inversely related to the altitude of the virtual camera and represents increases or decreases in the level of detail in the three-dimensional geographical image . Hence, moving a slider on the altitude control  upwards may decrease the altitude of the virtual camera, but may increase the level of detail displayed in the three-dimensional geographical image . Similarly, moving the slider on the altitude control  downwards may increase the altitude of the virtual camera, but may decrease the level of detail displayed in the three-dimensional geographical image . In alternative embodiments, the altitude control  may be proportionally related to the altitude of the virtual camera. As the user increases or decreases the altitude of the virtual camera, the transformation extension  may request additional three-dimensional geographical images and\/or three-dimensional geographical image instructions from the three-dimensional geographical image server  that correspond to the increased or decreased level of detail.","In one embodiment, increasing the amount of detail displayed in the three-dimensional geographical image  (i.e., decreasing the altitude of the virtual camera) may decrease the amount of geographical area displayed in the viewport , and decreasing the amount of detail displayed in the three-dimensional geographical image  (i.e., increasing the altitude of the virtual camera) may increase the amount of geographical area displayed in the viewport .","As the user interacts with the graphical controls -, the user may change one or more three-dimensional geographical parameters  stored in the memory . The three-dimensional geographical parameters  may include a viewport height parameter, a viewport width parameter, a latitude parameter, a longitude parameter, a tilt parameter, a heading parameter, a roll parameter, a field of view parameter, an altitude parameter, and a projection parameter.","The viewport height parameter may describe the height of the viewport in pixels, the viewport width parameter may describe the width of the viewport in pixels, the latitude parameter may indicate the latitude of a pixel displayed in the three-dimensional geographical image , the longitude parameter may indicate the longitude of a pixel displayed in the three-dimensional geographical image , the tilt parameter may indicate the tilt of the virtual camera, the heading parameter may indicate the heading of the virtual camera, the roll parameter may indicate the roll of the virtual camera, the field of view parameter may indicate the field of view visible by the virtual camera, and the altitude parameter may indicate the altitude of the virtual camera. The projection parameter may indicate the type of projection of the three-dimensional geographical image, such as a perspective projection.","In one embodiment, the latitude parameter and the longitude parameter may correspond to the latitude and longitude of the center pixel of the three-dimensional geographical image .","One or more of the three-dimensional geographical image parameters  may be affected by manipulation of the graphical controls -. For example, manipulating the panning control  may affect the latitude and longitude parameters. Similarly, manipulating the heading control  may affect the tilt parameter and\/or the heading parameter. In addition, manipulating the altitude control  may affect the altitude parameter. As discussed below, as a user manipulates one or more of these controls -, the transformation extension  may store the changed parameters in the memory  such that when a user switches between a three-dimensional view to a two-dimensional view, and then switches back to the three-dimensional view, the transformation extension  may apply the previously changed parameters to the three-dimensional geographical image  to restore the most recent three-dimensional view of the geographical area.","The viewport  may further include a transformation extension activation control . Selecting, such as by \u201cclicking\u201d with a mouse or tapping with a finger, the transformation extension activation control  may also activate the transformation extension . When a three-dimensional geographical image  is displayed in the viewport  and the transformation extension  is invoked, the transformation extension  may then determine a corresponding view of the geographical area for a two-dimensional geographic image.","In one embodiment, the transformation extension  may determine a corresponding view for a two-dimensional geographical image by determining a corresponding zoom level for the altitude of the virtual camera used to display the three-dimensional geographical image  of the geographical area. Initially, the transformation extension  may establish the center of the two-dimensional geographical image as having the same, or approximately the same, center as the three-dimensional geographical image . In this case, the transformation extension  may use the latitude parameter and longitude parameter for a center pixel in the three-dimensional geographical image  as the latitude parameter and longitude parameter for the center of the corresponding two-dimensional geographical image.","The transformation extension  may then determine the zoom level for displaying the two-dimensional geographical image that corresponds to the altitude of the virtual camera for displaying the corresponding three-dimensional geographical image . First, the transformation extension  may determine the highest supported zoom level (i.e., the zoom level showing the most amount of detail) for displaying the two-dimensional geographical image and then determine the altitude of the virtual camera corresponding to that highest zoom level (denoted by A), such as by invoking equation 11 above. The transformation extension  may determine the highest zoom level of the two-dimensional geographical image in any number of ways, such as by querying the host application , querying the two-dimensional geographical image server , retrieving one or more two-dimensional geographical image parameters  stored in the memory , or any combinations thereof.","The transformation extension  may then decrement the zoom level and then determine the altitude of the virtual camera corresponding to the decremented zoom level (denoted by A). Of course, the transformation extension  may query one or more entities, such as the host application  and\/or the two-dimensional geographical image server  to determine the next highest zoom level.","The transformation extension  may continue in this fashion, decrementing the currently used zoom level and determining the altitude of the virtual camera corresponding to the decremented zoom level, and then terminate when a predetermined condition is met, such as that the current altitude of the virtual camera displaying the three-dimensional geographical image  is between the altitude of the virtual camera for the current zoom level (i.e., the zoom level that was just decremented) and the altitude of the virtual camera for the previous zoom level (i.e., the zoom level prior to the decremented zoom level). The transformation extension  may then select the zoom level that has a corresponding altitude (Aor A) that is closest to the altitude of the virtual camera displaying the three-dimensional geographical image . Below is exemplary pseudo-code for the transformation extension  in determining the zoom level for the corresponding two-dimensional geographical image based on the altitude of the virtual camera for the displayed three-dimensional geographical image .",{"@attributes":{"id":"p-0101","num":"0102"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"Begin pseudo-code: "},{"entry":"\u2003A= current altitude of virtual camera; "},{"entry":"\u2003Z= Highest zoom level for displaying "},{"entry":"corresponding two-dimensional geographical image; "},{"entry":"\u2003A= corresponding altitude of Z; "},{"entry":"\u2003For each zoom level Z for displaying the "},{"entry":"corresponding two-dimensional geographical image: "},{"entry":"\u2003\u2003Z= Z\u2212 1; "},{"entry":"\u2003\u2003A= corresponding altitude of Z; "},{"entry":"\u2003\u2003If (A< A< A) then "},{"entry":"\u2003\u2003\u2003If (abs (A\u2212 A) < abs (A\u2212 A) ), Then "},{"entry":"\u2003\u2003\u2003\u2003Determined zoom level = Z; "},{"entry":"\u2003\u2003\u2003Else "},{"entry":"\u2003\u2003\u2003\u2003Determined zoom level = Z; "},{"entry":"\u2003\u2003\u2003Stop; "},{"entry":"\u2003\u2003Endif"},{"entry":"\u2003\u2003Else "},{"entry":"\u2003\u2003\u2003Z= Z; "},{"entry":"\u2003\u2003\u2003A= A"},{"entry":"\u2003\u2003EndElse "},{"entry":"\u2003EndFor "},{"entry":"End pseudo-code"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"Based on the pseudo-code above, the transformation extension  may iterate through the various zoom levels used to display the two-dimensional geographical image until the transformation extension  determines a zoom level that most approximates the altitude of the virtual camera used to display the corresponding three-dimensional geographical image . In one embodiment, the pseudo-code above is applicable when a normalized view is displayed in the viewport . In general, the transformation extension  may consider a normalized view to be a view where one or more parameters, such as the tilt parameter, heading parameter, and roll parameter have values of or about 0\u00b0. However, as discussed below, the transformation extension  may also determine the zoom level for the corresponding two-dimensional geographical image using the pseudo-code above when the heading parameter and\/or the tilt parameter have values other than 0\u00b0.","By proceeding as described previously with reference to  to receive two-dimensional geographical image instructions  from the two-dimensional geographical image server , the transformation extension  and\/or the host application  may display a view of the geographical area in the two-dimensional geographical image  that approximates the view of the geographical area previously shown in the three-dimensional geographical image . The resulting two-dimensional geographical image  may be displayed as overlaid on the three-dimensional geographical image , instead of (or in place of) the three-dimensional geographical image , or a combination thereof.","In displaying the two-dimensional geographical image  from the corresponding three-dimensional geographical image , the transformation extension  may account for variances in one or more of the three-dimensional geographical image parameters . As discussed above, there may be instances where the view of the three-dimensional geographical image  is not a normalized view (i.e., the parameter values for the heading parameter and\/or tilt parameter are values other than 0\u00b0). For example, it is possible through manipulation of the heading control , that the user and\/or host application  change the heading parameter value and\/or the tilt parameter value.","In one embodiment, the transformation extension  may distinguish between two scenarios in determining the corresponding view of the two-dimensional geographical image : 1) where the value of the tilt parameter has not exceeded a tilt parameter threshold value; and 2) where the value of the tilt parameter has exceeded the tilt parameter threshold value. Although the tilt parameter threshold value may be any value, one exemplary value may be 65\u00b0.","Where the tilt parameter value does not exceed the tilt parameter threshold value, but has a value other than 0\u00b0, the transformation extension  may determine the zoom level for the non-normalized view as the zoom level of the normalized view that is looking at the same, or approximately same, latitude and longitude coordinates of the non-normalized view. In other words, the transformation extension  may operate so as to present a two-dimensional geographical image of the non-normalized view using parameter values (altitude, latitude, longitude, etc.) from the normalized view of the same, or approximately same, geographical area.","In this first scenario, the transformation extension  may determine the altitude of the virtual camera for the normalized view (i.e., heading parameter is 0\u00b0 and tilt parameter is 0\u00b0) as the distance from the center of the virtual camera for the non-normalized view to the Earth point (or model being rendered point) corresponding to the center pixel of the non-normalized view of the three-dimensional geographical image. Based on this determined altitude, the transformation extension  may then determine the zoom level for the corresponding two-dimensional geographical image  as if the view of the three-dimensional geographical image was a normalized view. That is, the transformation extension may determine the zoom level for the corresponding two-dimensional geographical image  according to the pseudo-code previously presented above.","In the second scenario, the value of the tilt parameter value may exceed the tilt parameter threshold value, which may be established as 65\u00b0 or any other value. Under this scenario, the assumption is that the viewer of the three-dimensional geographical image  is viewing a point of interest close or near to the virtual camera. When the tilt parameter value exceeds the tilt parameter threshold value, the transformation extension  may change the current tilt parameter value to another value, such as the tilt parameter threshold value. The transformation extension  may then determine the latitude and longitude parameter values for the center pixel of the resulting three-dimensional geographical image; that is, the three-dimensional geographical image  that results from the change in the tilt parameter value. Thereafter, the transformation extension  may then determine the corresponding view for the two-dimensional geographical image  as discussed above with reference to the aforementioned pseudo-code.","Accordingly, regardless of the whether the view of the geographical area shown in the three-dimensional geographical image  is normalized or non-normalized, the transformation extension  is operative to determine a corresponding view in the two-dimensional geographical image .","In addition to determining view for the three-dimensional geographical image  or the two-dimensional geographical image , the transformation extension  may be operative to maintain a view across multiple changes between the three-dimensional geographical image  and the two-dimensional geographical image . One issue that the transformation extension  may address is consistency: the presumption is that when a user and\/or the host application  establishes a certain perspective for the three-dimensional geographical image  (e.g., altering one or more of the values for the three-dimensional geographical image parameters ), the user and\/or the host application  prefers to have the same perspective in the three-dimensional geographical image  should the user and\/or the host application  switch to the two-dimensional geographical image  and then back to the three-dimensional geographical .","In this regard, the transformation extension  may store one or more of the three-dimensional geographical image parameter values  in the memory  to be applied to a future three-dimensional geographical image in the event the user and\/or the host application  switches from the view shown in the three-dimensional geographical image to the two-dimensional geographical image and then back again. Examples of the three-dimensional geographical image parameter values  that the transformation extension  may store include the heading parameter value, the tilt parameter value, any other three-dimensional geographical image parameter values  or combinations thereof. By storing the altered or changed three-dimensional geographical image parameter values , the transformation extension  reduces the time in which it takes for the user and\/or the host application  to re-establish a previously configured perspective.","To further enhance the user experience, the transformation extension  may determine one or more transitional images for display when switching from the two-dimensional geographical image  to the three-dimensional geographical  or vice versa. The display of the transitional images helps to demonstrate to the user the context in which the resulting three-dimensional geographical image (or the resulting two-dimensional geographical image) fits within the originally displayed two-dimensional geographical image (or the originally displayed three-dimensional geographical image).",{"@attributes":{"id":"p-0113","num":"0114"},"figref":["FIG. 6","FIG. 6"],"b":["602","604","612","604","612","604","606","610","612","606","610","606","610"]},"The transformation extension  and\/or the host application  may be preconfigured or configurable to display a defined number of transitional images -. For example, the transformation extension  and\/or the host application  may be preconfigured or configurable to display five, ten, or any other number of transitional images -. In one embodiment, the transformation extension  and\/or the host application  may determine or display the transitional images - based on changes to the values of one or more of the three-dimensional or two-dimensional geographical image parameters. For example, the transformation extension  and\/or the host application  may be preconfigured with information that the initial transitional image  has a heading parameter value of 0\u00b0 and a tilt parameter value of 0\u00b0. Of course, the heading parameter value and\/or the tilt parameter value for the initial transitional image may have values other than 0\u00b0.","The transformation extension  and\/or the host application  may then be further preconfigured with information that one or more the heading parameter value of the resulting three-dimensional geographical image  is 35\u00b0. For example, the value of 35\u00b0 may be a default heading parameter value used to display three-dimensional geographical images. In this example, the transformation extension  and\/or the host application  may determine the intermediate values of the heading parameters for each of the transitional three-dimensional geographic images - such that the sequence of images  are displayed relatively smoothly.","It should be understood that the transformation extension  and\/or the host application  may not request three-dimensional image instructions for displaying each of the transitional images -. For example, the transformation extension  may request three-dimensional image instructions for displaying the geographical area shown in the two-dimensional geographical image . As discussed previously, the requested three-dimensional geographical image instruction may include the textures, images, objects, and other graphical components used to display the three-dimensional geographical image. The transformation extension  may then instruct the virtual camera to rotate from the initial heading parameter value, which may be 0\u00b0, to the resulting (or terminating) heading parameter value, which may be 35\u00b0. In this manner, the transition from the two-dimensional geographical image  to the corresponding three-dimensional geographical  may appear to fluid to the user and prevent unnecessarily disorienting the user.","In addition, the transformation extension  and\/or the host application  may display the transitional images - as the view of the geographical area changes from the three-dimensional geographical image  to the two-dimensional geographical image . In this scenario, the three-dimensional geographical image  may be considered the initial three-dimensional geographical image and the normalized three-dimensional image  (i.e., a three-dimensional geographical image having a heading parameter value of 0\u00b0 and\/or a tilt parameter value of 0\u00b0) may be considered the resulting (or terminating) three-dimensional geographical image. Hence, the transition may appear fluid to the user regardless of whether the initial starting image is the two-dimensional geographical image  or the three-dimensional geographical image .",{"@attributes":{"id":"p-0118","num":"0119"},"figref":["FIG. 7","FIG. 7","FIG. 7","FIG. 3"],"b":["702","706","704","206","206","706","704","706","304"]},"As the viewport  for displaying the three-dimensional geographical image may be incorporated into the host application , which may be a function of the transformation extension , a user may not have to switch host applications or terminate the host application displaying the two-dimensional geographical image in order to view the corresponding three-dimensional geographical image. In other words, the transformation extension  may unify, or bridge the gap, between viewing a geographical area in two-dimensions and viewing the same geographical area in three-dimensions.",{"@attributes":{"id":"p-0120","num":"0121"},"figref":["FIGS. 8A-8C","FIG. 2"],"b":["802","206","804","206","108","206","104","806","206","112"]},"The host application  may then receive two-dimensional geographical image instructions from the two-dimensional geographical image server  for displaying a two-dimensional geographical image of a geographical area corresponding to the geographical identifier (Block ). In one embodiment, the host application  may store the two-dimensional geographical image instructions in the memory  of the client device . In another embodiment, the host application  may include the two-dimensional geographical image instructions and may be operative to display the two-dimensional geographical image without transmitting a request to the two-dimensional geographical image server . Thereafter, the host application  may display the two-dimensional geographical image, such as in a viewport within a graphical user interface of the host application  (Block ).","The host application may then receive a request to display a view of the geographical area displayed in the two-dimensional geographical image in a corresponding three-dimensional geographical image. For example, and as discussed previously, a user may select the transformation extension activation control  to request a display of the three-dimensional geographical image. Selecting the transformation extension activation control  may then cause the host application  to invoke the transformation extension  (Block ).","Referring next to , the transformation extension  may determine one or more values of three-dimensional geographical image parameters  based on the values of one or more two-dimensional geographical image parameters  used to display the two-dimensional geographical image (Block ). For example, the transformation extension  may determine an altitude parameter value for a virtual camera, a latitude parameter value, a longitude parameter value, or other such three-dimensional geographical image parameter values based on the values of two-dimensional geographical image parameters including, but not limited to, a longitude parameter, a latitude parameter, a viewport height parameter, a viewport width parameter, or other such two-dimensional geographical image parameter values. The transformation extension  may then transmit the determined or more three-dimensional geographical image parameter values to the three-dimensional geographical image server  (Block ).","In response, the transformation extension  may receive one or more three-dimensional geographical image instructions (Block ). In one embodiment, the host application  may store the three-dimensional geographical image instructions in the memory  of the client device . In another embodiment, the host application  and\/or the transformation extension  may include the three-dimensional geographical image instructions and may be operative to display the three-dimensional geographical image without transmitting a request to the three-dimensional geographical image server .","As discussed previously, the three-dimensional geographical image instructions may include images, textures, vector graphics, object model parameters, or any other image characteristics for displaying the three-dimensional geographical image. In one embodiment, prior to the display of the three-dimensional geographical image, the transformation extension  may compare the latitude angle span displayed in the two-dimensional geographical image with a previously defined latitude angle span threshold (Block ). As discussed previously the latitude angle span threshold may be based on the amount of geographical area viewable by the virtual camera for displaying the three-dimensional geographical image.","When the latitude angle span visible in the two-dimensional geographical image exceeds the latitude angle span threshold, the transformation extension  may adjust one or more three-dimensional geographical image parameters used to display the three-dimensional geographical image (Block ). Examples of the three-dimensional geographical image parameters that the transformation extension  may adjust include a viewport height parameter and a viewport width parameter used for displaying the viewport that displays the three-dimensional geographical image parameter. The transformation extension  may further adjust the latitude angle span displayable in the viewport for displaying the three-dimensional geographical image by adjusting the height of the virtual camera proportionally.","Referring next to  and in one embodiment, where the latitude angle span displayed in the two-dimensional geographical image does not exceed the latitude angle span threshold, the transformation extension  may then determine whether the zoom level parameter value is less than a predetermined zoom level threshold (Block ). As discussed previously, the transformation extension  may apply a predetermined scaling factor when the zoom level parameter value is less than the predetermined zoom level threshold (Block ) or the transformation extension  may determine and apply a scaling factor when the zoom level parameter value exceeds the predetermined zoom level threshold (Block  and Block ). The transformation extension  may then display the corresponding three-dimensional geographical image shown from the determined altitude within a viewport having appropriate height and width dimensions (Block ).",{"@attributes":{"id":"p-0128","num":"0129"},"figref":"FIGS. 9A-9B","b":["902","208","206","904","206","208","512","906"]},"When invoked, the transformation extension  may then determine the highest zoom level for displaying a corresponding two-dimensional graphical image of the currently displayed three-dimensional geographical image (Block ). As previously discussed, the transformation extension  may perform this determination by querying the host application , the two-dimensional geographical image server or a combination thereof. The transformation extension  may then determine the altitude of a virtual camera (A) for this highest zoom level (Block ). As previously discussed, the transformation extension  may perform this determination according to one or more equations above, such as by equation 11. Thereafter, the transformation extension  may decrement the zoom level to obtain a decremented zoom level, and then determine the altitude of a virtual camera (A) for this decremented zoom level (Block ).","Referring next to , Blocks - illustrate the logic flow of the pseudo-code previously discussed above. The transformation extension  may first compare the current altitude of the virtual camera (A) displaying the three-dimensional geographical image with the determined altitude of the virtual camera corresponding to the determined highest zoom level (A) and the determined altitude of the virtual camera at the decremented zoom level (A). If a predetermined condition is not satisfied, such as A<A<A, or any other predetermined condition, the transformation extension  may establish Aas A(Block ), decrement the zoom level again, and then re-determine the altitude of the virtual camera for the decremented zoom level (Block ).","The transformation extension  may then re-compare the altitudes A, A, and Aaccording to the predetermined condition. The transformation extension  may thus continue in this manner until the predetermined condition is satisfied.","When the predetermined condition is satisfied (i.e., when A<A<A), the transformation extension  may then determine which of the two zoom levels most accurately reflect the current altitude of the virtual camera (Block ). In one embodiment, the transformation extension  may determine a first absolute value of the difference between the current altitude of the virtual camera (A) and the altitude of the virtual camera at the prior (or non-decremented) zoom level (A), and a second absolute value of the difference between the altitude of the virtual camera at the current (or decremented) zoom level (A) and the current altitude of the virtual camera (A). Thereafter, where the first absolute value is smaller than the second absolute value, the transformation extension  may select the zoom level corresponding to the altitude of the virtual camera at the prior (or non-decremented) zoom level (A), and where the second absolute value is smaller than the first absolute value, the transformation extension  may select the zoom level corresponding to the altitude of the virtual camera at the current (or decremented) zoom level (A). In this manner, the transformation extension  may determine a zoom level for displaying the two-dimensional geographical location that best approximates the current altitude of the virtual camera displaying the three-dimensional geographical image. This determined zoom level may then be stored in the memory  as one of the two-dimensional geographical image parameters .","The transformation extension  and\/or the host application  may then transmit values of the one or more two-dimensional geographical image parameters  to the two-dimensional geographical image server  (Block ). As previously discussed, the two-dimensional geographical image parameters  may include a geographical identifier, the zoom level approximating the altitude of the virtual camera, a latitude parameter of a center pixel in the three-dimensional geographical image, a longitude parameter of the center in the three-dimensional geographical image, other such parameters, or combinations thereof.","In response, the transformation extension  and\/or the host application may receive two-dimensional geographical image instructions from the two-dimensional geographical image server  for displaying a corresponding two-dimensional geographical image of the geographical area displayed in the three-dimensional geographical area (Block ). In one embodiment, the host application  may store the two-dimensional geographical image instructions in the memory  of the client device . In another embodiment, the host application  may include the two-dimensional geographical image instructions and may be operative to display the two-dimensional geographical image without transmitting a request to the two-dimensional geographical image server . Thereafter, the host application  may display the two-dimensional geographical image, such as in a viewport within a graphical user interface of the host application  (Block ).","In this manner, the transformation extension  facilitates a seamless transition between the display of a two-dimensional geographical image of a geographical area and the display of a three-dimensional geographical image corresponding to the geographical area. By incorporating the transformation extension  into the host application , the user experience is enhanced as a user need not switch between various applications in order to see different perspectives of the same geographical area. Moreover, the transformation extension  is operative to preserve a user's interactions with a three-dimensional geographical image such that when the user switches between from the three-dimensional geographical image to the two-dimensional geographical image and back again, the user need not go through the process of establishing the previously obtained perspective of the three-dimensional geographical image. Hence, the transformation extension  saves both time and effort on behalf of the user in viewing a geographical area in two different types of geographical images.","The host application  and\/or the transformation extension  described above may be implemented in a single system or partitioned across multiple systems. In addition, the memory  may be distributed across many different types of computer-readable media. The memory  may include random access memory (\u201cRAM\u201d), read-only memory (\u201cROM\u201d), hard disks, floppy disks, CD-ROMs, flash memory or other types of computer memory.","The host application , the transformation extension , the geographical image parameters , and the image instructions  may be implemented in a combination of software and hardware. For example, the host application , the transformation extension , the geographical image parameters , and\/or the image instructions  may be implemented in a computer programming language, such as C# or Java, or any other computer programming language now known or later developed. The host application , the transformation extension , the geographical image parameters , and\/or the image instructions  may also be implemented in a computer scripting language, such as JavaScript, PHP, ASP, or any other computer scripting language now known or later developed. Furthermore, the host application , the transformation extension , the geographical image parameters , and\/or the image instructions  may be implemented using a combination of computer programming languages and computer scripting languages.","In addition, the client device  may be implemented with additional, different, or fewer components. As one example, the processor  and any other logic or component may be implemented with a microprocessor, a microcontroller, a DSP, an application specific integrated circuit (ASIC), discrete analog or digital circuitry, or a combination of other types of circuits or logic. The host application , the transformation extension , the geographical image parameters , and\/or the image instructions  may be distributed among multiple components, such as among multiple processors and memories, optionally including multiple distributed processing systems.","Logic, such as programs, may be combined or split among multiple programs, distributed across several memories and processors, and may be implemented in or as a function library, such as a dynamic link library (DLL) or other shared library. The DLL, for example, may store code that implements functionality for a specific module as noted above. As another example, the DLL may itself provide all or some of the functionality of the system.","The geographical image parameters  and\/or the image instructions  may be stored as a collection of data. For instance, although geographical image parameters  and\/or the image instructions  are not limited by any particular data structure, the geographical image parameters  and\/or the image instructions  may be stored in computer registers, as relational databases, flat files, or any other type of database now known or later developed.","The network  may be implemented as any combination of networks. As examples, the network  may be a Wide Area Network (\u201cWAN\u201d), such as the Internet; a Local Area Network (\u201cLAN\u201d); a Personal Area Network (\u201cPAN\u201d), or a combination of WANs, LANs, and PANs. Moreover, the network  may involve the use of one or more wired protocols, such as the Simple Object Access Protocol (\u201cSOAP\u201d); wireless protocols, such as 802.11a\/b\/g\/n, Bluetooth, or WiMAX; transport protocols, such as TCP or UDP; an Internet layer protocol, such as IP; application-level protocols, such as HTTP, a combination of any of the aforementioned protocols, or any other type of network protocol now known or later developed.","Although aspects of the disclosure herein have been described with reference to particular embodiments, it is to be understood that these embodiments are merely illustrative of the principles and applications of the present disclosure. It is therefore to be understood that numerous modifications may be made to the illustrative embodiments and that other arrangements may be devised without departing from the spirit and scope of the disclosure as defined by the appended claims. Furthermore, while certain operations and functions are shown in a specific order, they may be performed in a different order unless it is expressly stated otherwise."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0035","num":"0034"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0037","num":"0036"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0038","num":"0037"},"figref":["FIG. 5","FIG. 3"]},{"@attributes":{"id":"p-0039","num":"0038"},"figref":["FIG. 6","FIG. 3","FIG. 5"]},{"@attributes":{"id":"p-0040","num":"0039"},"figref":["FIG. 7","FIG. 5"]},{"@attributes":{"id":"p-0041","num":"0040"},"figref":"FIGS. 8A-8C"},{"@attributes":{"id":"p-0042","num":"0041"},"figref":"FIGS. 9A-9B"}]},"DETDESC":[{},{}]}
