---
title: Method and apparatus for application migration validation
abstract: Example embodiments of the present invention provide a method, apparatus and computer-program product for application migration validation. In short, example embodiments of the present invention provide a tool to be run by an administrator prior to migration to determine a pre-migration policy. The administrator then performs the migration. After the migration is complete, the administrator runs to tool again to determine a post-migration policy. The tool then validates the post-migration policy. For example, the tool may compare the pre-migration policy and the post-migration police to determine whether there are differences between the pre-migration policy and the post-migration policy. Alternatively, the tool may compare the post-migration policy against a changed policy, different from the pre-migration policy, deliberately implemented by the administrator. The tool may alert on differences between the pre-migration policy and the desired post-migration policy (i.e., a properly migrated pre-migration policy or a new policy different than the pre-migration policy).
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08762662&OS=08762662&RS=08762662
owner: EMC Corporation
number: 08762662
owner_city: Hopkinton
owner_country: US
publication_date: 20110624
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"p":["A portion of the disclosure of this patent document may contain command formats and other computer language listings, all of which are subject to copyright protection. The copyright owner has no objection to the facsimile reproduction by anyone of the patent document or the patent disclosure, as it appears in the Patent and Trademark Office patent file or records, but otherwise reserves all copyright rights whatsoever.","This application generally relates to data storage, and more particularly to techniques used in connection with an implemented data protection policy.","Data migration is the process of transferring data between storage types, formats, or computer systems. Data migration is typically required when organizations or individuals change computer systems or upgrade to new systems, or when systems merge, such as when the organizations that use them undergo a merger or takeover.","To achieve an effective data migration procedure, data on the old (i.e., source) system is mapped to the new (i.e., target) system providing a design for data extraction and data loading. The design relates old data formats to the new system's formats and requirements. Programmatic data migration may involve many phases but it minimally includes data extraction where data is read from the old system and data loading where data is written to the new system.","After loading into the new system, results are subjected to data verification to determine whether data was accurately translated, is complete, and supports processes in the new system. During verification, there may be a need for a parallel run of both systems to identify areas of disparity and forestall erroneous data loss.","Example embodiments of the present invention provide a method, apparatus and computer-program product for migration validation comprising. The method includes retrieving a pre-migration policy and retrieving a post-migration policy. The post-migration policy is then validated according to the pre-migration policy.","The migration process is one of the most complicated processes of storage administration and is susceptible to high degrees of administrator error. For example, an administrator may not perform a full migration (i.e., may forget to migrate some data) or may not provision target devices as source devices were provisioned or, alternatively, as required by new organizational requirements (i.e., may not provision the target devices according to a policy in effect at the source devices or a new policy required by the organization t which the data belongs).","Data protection may be provided by a data protection process that makes a copy of an original set of data at the target devices. The copy of data may be used upon the occurrence of an event causing data failure such as may occur, for example, when the original copy of data is destroyed, corrupted, or otherwise unavailable. Different strategies may be used to provide data protection for different types of failures that can occur. A data protection policy (DPP) may be designed to meet data protection criteria or objectives determined in a variety of different ways. Such criteria may be specified in a service level agreement (SLA), by management or administrators, and the like. Once designed, the DPP may then be implemented.","It is certainly an important task to copy the information from source devices to target devices accurately, and data verification provides an important function in the migration process by determining whether that data was accurately translated and loaded at the target devices. However, it is also important to protect that data at the target devices at appropriate service levels as required by data protection policies of the organization to which the data belongs, such as those implemented at the source devices or a new required policy.","For an application installed on a source storage device (e.g., a storage array), such as those by EMC Corporation of Hopkinton, Mass., that an administrator needs to migrate to a target storage device, it would be beneficial to the administrator to ensure that two important factors will be considered during the migration process: (1) data protection policies; and (2) performance.","It is important that a data protection policy in effect at the source devices (i.e., pre-migration policy) is also in effect at the target devices (i.e., post-migration policy) or, alternatively, that a new data protection policy required by the organization in effect at the target devices (i.e., post-migration policy) properly replaces the policy at the source devices. Therefore, the data protection policy will not change as a result of the migration process, unless it is a deliberate change required by the organization which is explicitly made known during the migration process.","For example, if there is a synchronous replication service available at the source devices, when migrating to the target devices, example embodiments of the present invention provide validation of the policy in effect at the target devices after the migration to determine whether the synchronous replication service is available at the target devices. However, if an administrator was instructed during the migration process that the replication service should be asynchronous following the migration, example embodiments of the present invention will determine whether the asynchronous service is available.","Further, it is important for application performance to be maintained after migration. For example, if an application had a specific performance attribute at the source devices (e.g., it runs on Symmetrix storage platform by EMC Corporation of Hopkinton, Mass. or has certain performance capabilities), it would be beneficial for an administrator to be assured that the target devices support the same, if not better, performance post migration as the source devices prior to migration.","Accordingly, example embodiments of the present invention address this need by providing a method, apparatus and computer-program product for application migration validation. In short, example embodiments of the present invention provide a tool to be run by an administrator prior to migration to determine a pre-migration policy. The administrator then performs the migration. After the migration is complete, the administrator runs to tool again to determine a post-migration policy. The tool then validates the post-migration policy. For example, the tool may compare the pre-migration policy and the post-migration police to determine whether there are differences between the pre-migration policy and the post-migration policy. Alternatively, the tool may compare the post-migration policy against a changed policy, different from the pre-migration policy, deliberately implemented by the administrator. In both scenarios, the tool may alert on differences between the pre-migration policy and the desired post-migration policy (i.e., a properly migrated pre-migration policy or a new policy different than the pre-migration policy).",{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIGS. 1-4","b":["100","150","190","100","150","100","150","0","1","100","150"]},"The description below of the block diagrams of  includes a description of the flow diagrams of , with the flow elements of  presented in parentheses. Therefore, the description below of  is intended to be read in conjunction with the study of the flow diagrams of  illustrating migration validation according to example embodiments of the present invention. Common to  is the illustration of the replication service at time t including a replication of a first primary disk (i.e., primary 1)  to two replicas (i.e., replica 1-1 and replica 1-2) -, - and a replication of a second primary disk (i.e., primary 2)  to three replicas (i.e., replica 2-1, replica 2-2 and replica 2-3) -, -, -.","As illustrated in , prior to the migration of the replication service from the first storage array  to the second storage array , the migration validator  may begin the migration validation process (), () and retrieve a pre-migration policy from the first storage array  (). For example, the migration validator  may retrieve from the array  device allocation information (), including device information and metrics such as performance tiers required by the replication service (i.e., the application), disk type and performance attributes. The device allocation information also may be retrieved from a data protection policy or from data protection rules.","The migration validator  also may retrieve replication information (). Replication information may include policies, such as disaster recovery, operational recovery and logical corruption recovery policies; and policy attributes, such as recovery policy objective (RPO), recovery time objective (RTO), number of copies and location. Replication information also may include protection rules regarding a list of replications (i.e., replica 1-1 and replica 1-2 of primary 1) including the number of copies, the type of replication (i.e., Symmetrix Remote Data Facility (SRDF) or RecoveryPoint, both by EMC Corporation of Hopkinton, Mass.), the mode of replication (i.e., synchronous, asynchronous, continuous data protection (CDP), point in time (PIT)), source engine type and target engine type (i.e., Symmetrix or VNX, both by EMC Corporation of Hopkinton, Mass.), location, RPO and RTO. The replication information may be retrieved from the first storage array , a replication system (i.e., service), a replication product (not shown) and a user (e.g., an administrator) of the migration validator  or of the replication service as a policy or as a set of replication jobs.","In , having retrieved the pre-migration device allocation information and retrieved the pre-migration replication information, the migration validator  then may build the pre-migration replication policy in effect at the first storage array  according to the device allocation information and the replication information (). Methods for building policies are described in U.S. Pat. No. 7,840,595, entitled \u201cTECHNIQUES FOR DETERMINING AN IMPLEMENTED DATA PROTECTION POLICY,\u201d to Blitzer et al. and assigned to EMC Corporation of Hopkinton, Mass.","An administrator then may perform the migration. As will become clear below, the administrator may implement the same data protection policy at the target as was in place at the source, or may adjust the required policy to reflect a new policy should it be different. The migration validator  may determine whether the migration is complete (), such as by determining whether the migration validator  has received a notification from the administrator that the migration is complete. If the migration is not yet complete (), the migration validator waits. However, if the migration is complete (), the migration validator  continues.",{"@attributes":{"id":"p-0027","num":"0026"},"figref":["FIG. 1","FIG. 1"],"b":["100","150","1","160","160","1","160","2","170","170","1","170","2","170","3","150","1","100","0"]},"The migration validator  then may retrieve a post-migration policy from the second storage array  (). For example, the migration validator  may retrieve from the array  device allocation information and performance information (), as described above with respect to the retrieval of the pre-migration policy. The migration validator  also may retrieve replication information (), as described above with respect to the retrieval of the pre-migration policy.","Having retrieved the post-migration device allocation information and performance information and retrieved the post-migration replication information, the migration validator  then may build the post-migration replication policy in effect at the second storage array  according to the device allocation information and the replication information ().","The migration validator  now may validate the post-migration policy according to the pre-migration policy (). To validate the post-migration policy according to the pre-migration policy, the migration validator  may determine whether the post-migration policy conforms to a desired state (). The desired post-migration state of  is a post-migration policy that is identical to the pre-migration policy. As described above, the replication service at the second storage array  at time t is identical to the replication service at the first storage array  at time t. Thus, the post-migration policy conforms with the pre-migration policy (). Therefore, the migration of  is validated by the migration validator  (). Additionally, the migration validator  may check that performance attributes have not changed (e.g., disk type and performance tier).",{"@attributes":{"id":"p-0031","num":"0030"},"figref":["FIG. 2","FIG. 2"],"b":["100","150","1","160","160","1","160","2","170","170","1","170","2","170","3","150","1"]},"The migration validator  then may retrieve a post-migration policy from the second storage array  (). For example, the migration validator  may retrieve from the array  device allocation information and performance information (), as described above with respect to the retrieval of the pre-migration policy. The migration validator  also may retrieve replication information (), as described above with respect to the retrieval of the pre-migration policy.","Having retrieved the post-migration device allocation information and performance information and retrieved the post-migration replication information, the migration validator  then may build the post-migration replication policy in effect at the second storage array  according to the device allocation information and the replication information ().","The migration validator  now may validate the post-migration policy according to the pre-migration policy (). To validate the post-migration policy according to the pre-migration policy, the migration validator  may determine whether the post-migration policy conforms to a desired state (). The desired post-migration state of  is a post-migration policy that is identical to the pre-migration policy. As described above, replica 2-3 - is missing from the replication service at the second storage array  at time t. Thus, the replication service at the second storage array  at time t is noncompliant with the replication service at the first storage array  at time t (). The noncompliance may be a result of administrator error or device failure. Therefore, the migration of  is determined to be noncompliant by the migration validator  which may alert on the nonconformity (). Additionally, the migration validator  may check that performance attributes have not changed (e.g., disk type and performance tier).",{"@attributes":{"id":"p-0035","num":"0034"},"figref":["FIG. 3","FIG. 3"],"b":["100","0","110","3","110","110","3","190","150"]},"Accordingly, the migration validator  determines whether the administrator has implemented a new policy at the second storage array  (). If the administrator has implemented a new policy at the second storage array  (), the migration validator  may retrieve the new policy from the administrator. For example, the migration validator  may retrieve the new policy from the administrator via a command line interface (CLI), application programming interface (API) or a graphical user interface (GUI).","After the migration of the replication service from the first storage array  to the second storage array  in , at time t the replication service includes a replication of a first primary disk (i.e., primary 1)  to three replicas (i.e., replica 1-1, replica 1-2 and replica 1-3) -, -, - and a replication of a second primary disk (i.e., primary 2)  to three replicas (i.e., replica 2-1, replica 2-2 and replica 2-3) -, -, -. Thus, the replication service at the second storage array  at time t is differs from the replication service at the first storage array  at time t. However, the replication service at the second storage array  at time t was provisioned according to the new policy desired by the administrator.","The migration validator  then may retrieve a post-migration policy from the second storage array  (). For example, the migration validator  may retrieve from the array  device allocation information and performance information (), as described above with respect to the retrieval of the pre-migration policy. The migration validator  also may retrieve replication information (), as described above with respect to the retrieval of the pre-migration policy.","Having retrieved the post-migration device allocation information and performance information and retrieved the post-migration replication information, the migration validator  then may build the post-migration replication policy in effect at the second storage array  according to the device allocation information and the replication information ().","The migration validator  now may validate the post-migration policy according to the new policy desired by the administrator (). To validate the post-migration policy according to the new policy desired by the administrator, the migration validator  may determine whether the post-migration policy conforms to a desired state (). The desired post-migration state of  is a post-migration policy that conforms to the post-migration policy desired by the administrator. As described above, the replication service at the second storage array  at time t was provisioned according to the post-migration policy desired by the administrator. Thus, the post-migration policy conforms with the new policy (). Therefore, the migration of  is validated by the migration validator  (). Additionally, the migration validator  may check that performance attributes have not changed (e.g., disk type and performance tier).",{"@attributes":{"id":"p-0041","num":"0040"},"figref":["FIG. 4","FIG. 4"],"b":["100","0","110","3","110","110","3","190","150"]},"Accordingly, the migration validator  determines whether the administrator has implemented a new policy at the second storage array  (). If the administrator has implemented a new policy at the second storage array  (), the migration validator  may retrieve the new policy from the administrator. For example, the migration validator  may retrieve the new policy from the administrator via a command line interface (CLI), application programming interface (API) or a graphical user interface (GUI).","After the migration of the replication service from the first storage array  to the second storage array  in , at time t the replication service includes a replication of a first primary disk (i.e., primary 1)  to two replicas (i.e., replica 1-1 and replica 1-2) -, - and a replication of a second primary disk (i.e., primary 2)  to three replicas (i.e., replica 2-1, replica 2-2 and replica 2-3) -, -, -. Thus, the replication service at the second storage array  at time t is identical to the replication service at the first storage array  at time t. However, the replication service at the second storage array  at time t was not provisioned according to the new policy desired by the administrator.","The migration validator  then may retrieve a post-migration policy from the second storage array  (). For example, the migration validator  may retrieve from the array  device allocation information and performance information (), as described above with respect to the retrieval of the pre-migration policy. The migration validator  also may retrieve replication information (), as described above with respect to the retrieval of the pre-migration policy.","Having retrieved the post-migration device allocation information and performance information and retrieved the post-migration replication information, the migration validator  then may build the post-migration replication policy in effect at the second storage array  according to the device allocation information and the replication information ().","The migration validator  now may validate the post-migration policy according to the new policy desired by the administrator (). To validate the post-migration policy according to the new policy desired by the administrator, the migration validator  may determine whether the post-migration policy conforms to a desired state (). The desired post-migration state of  is a post-migration policy that is identical to the new policy desired by the administrator. As described above, the replication service at the second storage array  at time t is identical to the replication service at the first storage array  at time t. Thus, the post-migration policy does not conform with the new policy desired by the administrator (). The noncompliance may be a result of administrator error or device failure. Therefore, the migration of  is determined to be noncompliant by the migration validator  which may alert on the nonconformity (). Additionally, the migration validator  may check that performance attributes have not changed (e.g., disk type and performance tier).",{"@attributes":{"id":"p-0047","num":"0046"},"figref":"FIG. 7","b":["700","700","790","780","760","781","782"]},"The methods and apparatus of this invention may take the form, at least partially, of program code (i.e., instructions) embodied in tangible non-transitory media, such as floppy diskettes, CD-ROMs, hard drives, random access or read only-memory, or any other machine-readable storage medium. When the program code is loaded into and executed by a machine, such as the computer of , the machine becomes an apparatus for practicing the invention. When implemented on one or more general-purpose processors, the program code combines with such a processor to provide a unique apparatus that operates analogously to specific logic circuits. As such a general purpose digital machine can be transformed into a special purpose digital machine.",{"@attributes":{"id":"p-0049","num":"0048"},"figref":"FIG. 8","b":["855","860","800"]},"The logic for carrying out the method may be embodied as part of the aforementioned system, which is useful for carrying out a method described with reference to embodiments shown in, for example, . For purposes of illustrating the present invention, the invention is described as embodied in a specific configuration and using special logical arrangements, but one skilled in the art will appreciate that the device is not limited to the specific configuration but rather only by the claims included with this specification.","Although the foregoing invention has been described in some detail for purposes of clarity of understanding, it will be apparent that certain changes and modifications may be practiced within the scope of the appended claims. Accordingly, the present implementations are to be considered as illustrative and not restrictive, and the invention is not to be limited to the details given herein, but may be modified within the scope and equivalents of the appended claims.","In reading the above description, persons skilled in the art will realize that there are many apparent variations that can be applied to the methods and systems described. In the foregoing specification, the invention has been described with reference to specific exemplary embodiments thereof. It will, however, be evident that various modifications and changes may be made to the specific exemplary embodiments without departing from the broader spirit and scope of the invention as set forth in the appended claims. Accordingly, the specification and drawings are to be regarded in an illustrative rather than a restrictive sense."],"heading":["TECHNICAL FIELD","BACKGROUND","SUMMARY","DETAILED DESCRIPTION"],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The above and further advantages of the present invention may be better under stood by referring to the following description taken into conjunction with the accompanying drawings in which:",{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIGS. 1-4"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIGS. 5-6"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 8"}]},"DETDESC":[{},{}]}
