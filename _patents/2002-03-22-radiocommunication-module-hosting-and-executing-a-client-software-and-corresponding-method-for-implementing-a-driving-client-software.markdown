---
title: Radiocommunication module hosting and executing a client software, and corresponding method for implementing a driving client software
abstract: The invention concerns a radiocommunication module, of the type hosting and executing a main software providing in particular radiocommunication functions. The main software comprises means for executing drive controls, sent to the main software and belonging to a predetermined set of drive controls. The invention is characterised in that the radiocommunication module further hosts and executes at least a client software, called onboard client software. The onboard client software and the main software comprise means enabling the onboard client software acts at least as one of the following: a driver client software, sending drive controls to the main software, and receiving from the main software responses, resulting from the execution of some of the drive controls; a supervising client software, managing the execution if the drive controls sent by a driver client software, called external client software, hosted and executed by a third party equipment co-operating with the radiocommunication module.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07454198&OS=07454198&RS=07454198
owner: Wavecom
number: 07454198
owner_city: Issy-Les-Moulineaux
owner_country: FR
publication_date: 20020322
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATION","FIELD OF INVENTION","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS","APPENDIX 1","Detailed Presentation of Some Source Functions on Which the Client Embedded Application is Based"],"p":["This Application is a Section 371 National Stage Application of International Application No. PCT\/FR02\/01024, filed Mar. 22, 2002 and published as WO 02\/078375 on Oct. 3, 2002, not in English.","The domain of this invention is radiocommunication systems, and particularly but not exclusively the GSM (Global System for Mobile Communications) standard, DCS 1800 (Digital Cellular System 1800 MHz), PCS 1900 (Personal Communication system), GPRS (General Packet Radio Service) or UMTS (Universal Mobile Telecommunication System).","More precisely, the invention relates to a radiocommunication module. Remember that the radiocommunication module is an essential element of a radiotelephone. It hosts and executes a main software (commonly called \u201cradiocommunication software\u201d or \u201cGSM software\u201d) that in particular performs wireless communication functions (radiocommunication) and controls various other hardware elements (screen, keyboard, loudspeaker, etc.) of the radiotelephone.","Normally (first application), the radiocommunication module is included in a terminal (or ME for \u201cMobile Equipment\u201d) that cooperates with a SIM (Subscriber Identity Module) card.","Other applications are now envisaged for the above mentioned radiocommunication module.","In particular, it has been proposed to integrate the radiocommunication module in devices other than radiocommunication terminals but that still require a wireless communication function (second application). For example, telemetry devices (for reading meters), alarm devices or bank card readers.","It has also been proposed to supply the radiocommunication module in independent form (third application); it is then qualified as a modem. This type of modem does not contain any hardware man-machine interface element (screen, keyboard, loudspeaker, etc.). It is designed to cooperate with a terminal equipment (supporting a client software), that does have hardware man-machine interface elements. In particular, but not exclusively, the terminal equipment may be a microcomputer. In general, the terminal equipment hosts and executes a client driver software that controls the radiocommunication module, using a set of driver commands in the AT format. The AT (for ATtention command) commands enable the Terminal Equipment (TE) to request the radiocommunication terminal to which it is connected to perform some predetermined actions. To achieve this, the main software (hosted on the radiocommunication module) comprises means of executing AT commands sent to it by the client driver software (hosted on the terminal equipment).","For further information about AT commands, refer firstly to the ETSI \u201cGSM 07.05\u201d and \u201cGSM 07.07\u201d standards, and secondly to the ITU-T recommendation V25ter which are inserted herein by reference.","In general, a radiocommunication module can be driven by a terminal equipment using AT commands not only within the framework of the above mentioned third application (radiocommunication module forming a modem), but also within the context of the first and second applications mentioned above (radiocommunication module included in a radiocommunication terminal or other system).","In other words, regardless of what application is envisaged, the radiocommunication module may be driven by a terminal equipment with which it cooperates (usually through a serial link). In this case, a client driver software (comprising a \u201cclient external application\u201d), hosted and executed by the terminal equipment, sends AT commands to a main software, hosted and executed by the radiocommunication module, so that the radiocommunication module can execute them.","As shown in , operation of the existing technique used for terminal equipment to drive a radiocommunication module may be summarized as follows:\n\n","Each of these steps is shown in  by a circle in which the number of the step concerned is entered. The same convention is adopted in the following figures related to this invention (and that are described in detail in the remainder of the description).","The existing technique for driving a radiocommunication module by terminal equipment has several disadvantages.","Firstly, it requires two sets of resources (processor and memory). The radiocommunication module comprises a processor and a memory (first set of resources) and the terminal equipment also has a processor and a memory (second set of resources). Therefore, the existing technique mentioned above is expensive in terms of equipment and energy consumption.","Another disadvantage of the above mentioned existing technique is that the radiocommunication module is entirely driven by the terminal equipment. The client driver software hosted on and executed by the terminal equipment is the \u201cmaster\u201d, while the main software hosted and executed by the radiocommunication module, is the \u201cslave\u201d.","The purpose of the invention is particularly to overcome these disadvantages with the state of the art.","More specifically, one purpose of this invention is to provide a technique for driving a radiocommunication type module using a client driver software, that is simple and inexpensive (in terms of hardware and energy consumption).","Another purpose of the invention is to provide such a driver technique enabling the radiocommunication module to supervise (and act upon) the driving procedure, when driving is carried out by a terminal equipment. In other words, it is desired that the radiocommunication module does not only act as a slave.","These various objectives and others which will appear later are achieved using a radiocommunication module, of the type hosting and executing a main software performing radiocommunication functions, the said main software comprising means of executing driver commands, sent to the main software by at least a client driver software, and belonging to a predetermined set of driver commands. According to the invention, the radiocommunication module also hosts and executes at least one client software, called the client embedded software. Furthermore, the client embedded software and the main software comprise means of enabling the client embedded software to perform at least one of the following two roles:\n\n","Thus, if the client embedded software acts as a client driver software, the radiocommunication module will operate independently and inexpensively. In this case, the radiocommunication module does not need to cooperate with any terminal equipment, and the main software and the client driver software use the same resources (same processor and same memory).","This invention also provides a means of not limiting the radiocommunication module to acting as a slave towards the terminal equipment that executes the client driver software, in the case in which the client embedded software acts as client supervision software. The client supervision software executed by the radiocommunication module manages driver actions requested by the client driver software executed by the terminal equipment. Note that in this case, the client embedded software is additional to the state of the art configuration mentioned above. However, this additional software is inexpensive since it uses the same resources (processor and memory) as a main software also hosted on the radiocommunication module.","Advantageously, the following features are provided to enable the client embedded software to act as client supervision software:\n\n","In this way, the client embedded software can:\n\n","Advantageously, to enable the client embedded software to act as client supervision software:\n\n","In this way, the client embedded software can:\n\n","Preferably, the said main software comprises one main application particularly based on a set of execution functions, each enabling the execution of at least one of the said driver commands. The client embedded software includes a client application, particularly based on a set of source functions, each enabling sending or receiving driver commands or responses to driver commands, to or from the main application. The main software and\/or the said client embedded software comprise an application interface used to interface the said source functions with the said execution functions.","The result is to limit development costs, due to the fact that the interface application (also called the application interface library in the following) can be used with different client applications, or even with different main software, once it has been developed.","In one preferred embodiment of the invention, the said set of driver commands is a set of standard AT commands.","This enables fast development of the client embedded software, since AT commands are well known and are already used for the development of client external software (hosted on the terminal equipment). This also facilitates development of a client software strongly based on an existing client external software.","The invention also relates to a process for implementation of a client software for the control of a radio communication module, the said radiocommunication module being of the type that hosts and executes a main software particularly performing radiocommunication functions, the said main software comprising means of executing driver commands sent to the main software by the said client driver software and belonging to a predetermined set of driver commands. According to the invention, the said radiocommunication module hosts and also executes at least one client software, called the client embedded software. The client embedded software and the main software dialogue with each other such that the client embedded software performs at least one of the following two roles:\n\n","Therefore, the invention relates to a radiocommunication module hosting and executing a main software and at least one client embedded software, using the same set of resources (processor and memory).","Conventionally, in particular the main software (for example a \u201cGSM software\u201d) performs radiocommunication functions and comprises means of executing driver commands (sent to it by a client driver software).","The client embedded software (concept specific to this invention), can act as:\n\n","In the remainder of this description, it is assumed that the driver commands are AT commands. However, it is clear that this invention is not restricted to this type of driver command.","In the particular embodiment shown in , the main software  comprises a main application based particularly on a set of execution functions, each enabling the execution of at least one AT command.","Furthermore, the client embedded software  comprises:\n\n","The client embedded software  and the client main software  communicate with each other by using API layers, references  and  respectively. Note that the term API (Application Programming Interface) denotes an interface. It is a description of communication rules corresponding to a particular functional assembly.","In the client embedded software , the API layer (embedded)  comprises:\n\n","In the main application in the main software , the API layer (exported) comprises:\n\n","The main application forms the kernel of the main software , and the client application , and the interface application form the kernel  of the client embedded software .","The interface application is a software entity that enables a dialogue between two independent software entities (or binary entities namely the client application and the main application . For example, they are in the form of a library (already compiled).","The client embedded software and the main software each use a distinct part of the same RAM. The client defines the size of the memory stack necessary for correct execution of the client embedded software. An attempt by one of the two software programs to access part of the RAM reserved for the other software will stop operation.","We will now describe a first embodiment of the invention in which the client embedded software acts as a client driver software, with reference to .","Elements conventionally included in a radiocommunication module and described above with reference to  (prior art) have the same numeric references. Thus, the radiocommunication module  hosts and executes a main software  in particular comprising means  of executing AT commands.","Furthermore, according to the first embodiment of the invention and as presented above with reference to , the radiocommunication module  hosts and also executes a client embedded software  that acts as a client driver software, and in particular comprises a client embedded application , and an interface application ","Operation of this first embodiment of the invention may be summarized as follows:\n\n","We will now present a second embodiment of the invention with relation to , in which the client embedded software acts as the client supervision software.","In this second embodiment, the radiocommunication module is not independent (unlike in the first embodiment), but is controlled by a terminal equipment with which it cooperates. Therefore the configuration is the same as in prior art described above with relation to  (the same elements are marked with the same numeric references). In other words, a client external application (client driver software)  sends AT commands to a main software , so that they can be executed by the main software .","According to the second embodiment of the invention, the radiocommunication module  also hosts and executes a client embedded software  acting as client supervision software and in particular comprising a client embedded application  and an interface application . The client embedded software supervises execution (or lack of execution) of AT commands using execution means  included in the main software , transparently to the client external application .","The client embedded software  (supervision software) may decide to use the following in particular, within the radiocommunication module:\n\n","It will be noted that the first variant of each of the two mechanisms mentioned above (for AT commands and for AT responses respectively) means that the client embedded software  may decide to be completely passive at some times. Therefore, they correspond to conventional operation of the radiocommunication module, as described above with relation to , and are not described again.","We will now describe the second variant of the AT command preparsing and processing mechanism, which enables the client embedded software  to filter AT commands originating from the client external application , with reference to .","Operation of this second variant of the AT command preparsing and processing mechanism can be summarized in two phases done in sequence, namely:\n\n","The preliminary phase to select the second AT command preparsing policy comprises the following steps:\n\n","For simplification reasons, it is assumed in the rest of this description (and as shown in ), that the function(s) for making the registration to the AT command preparsing service are included in the means  of executing AT commands, within the main software .","Also for simplification reasons, it is assumed in the rest of the description (and as shown in ) that the command preparsing means (discussed below) are included within the AT command execution means , within the main software .","The AT command processing phase includes the following steps:\n\n","For example, this processing consists of resending the AT command to execution means  (using the mechanism corresponding to the first embodiment of the invention, described above in relation to ). It may also consist of the arbitrary supply of a response by the client embedded software  itself, without the AT command being executed. In this case, the client embedded software , for example, takes account of at least one item of information about the AT command concerned (command type, nature of the parameter(s), etc.). In general, it is understood that the client embedded software  \u201cfilters\u201d the AT command, regardless of the processing done.","We will now describe the third variant of the AT command preparsing and processing mechanism that enables the client embedded software  to spy on AT commands from the client external application , in relation with .","Operation of this third variant of the AT command preparsing and processing mechanism can also be summarized as two successive phases, namely:\n\n","Operation of this third variant is only very slightly different from operation of the second variant, essentially in that:\n\n","We will now describe the second variant of the AT response preparsing and processing mechanism that the client embedded software  uses to filter AT responses sent to the client external application , with reference to .","Operation of this second variant of the AT response preparsing and processing mechanism can be summarized in two phases done in sequence, namely:\n\n","The preliminary phase to select the second AT response preparsing policy comprises the following steps:\n\n","For simplification reasons only, in the remainder of the description (as shown in ), it is assumed that the function for making a registration to the AT response preparsing service, within the main software , is included within the AT command execution means .","Also for simplification reasons only, it is assumed in the remainder of the description (and as shown in ) that the response preparsing means (discussed below) are included in the AT command execution means , within the main software .","The AT response processing phase comprises the following steps:\n\n","We will now describe the third variant of the AT response preparsing and processing mechanism that the client embedded software  uses to spy on AT responses sent to the client external application , with reference to .","Operation of this third variant of the AT response preparsing and processing mechanism can also be summarized as two successive phases, namely:\n\n","The main differences between the operation of this third variant and operation of the second variant are that:\n\n","Appendix 1 contains a detailed presentation of some of the source functions on which the client embedded application is based.","For example, Appendix 2 contains an example application of an embedded application written in the C language, the objective of which is to send an ATI3 command three seconds after each initialisation and to write objects in Flash memory.","Optionally, for the purposes of this invention, it is also possible to use at least one of the following additional AT commands in addition to standard AT commands:\n\n","A1) \u201cwm_apmAppliParser\u201d","Function for processing a message from the main software. The message forming parameter of the processing function in particular contains an AT command or a response to an AT command.","Exact name:",{"@attributes":{"id":"p-0084","num":"0000"},"ul":{"@attributes":{"id":"ul0050","list-style":"none"},"li":["bool wm_apmAppliParser(wm_apmMsg_t*Message);\n\nParameters:\n","Message\n\nThe message structure is different for each type of received message:\n"]}},{"@attributes":{"id":"p-0085","num":"0160"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Typedef struct"]},{"entry":[{},"{"]},{"entry":[{},"\u2003\u2003S16 MsgTyp;"]},{"entry":[{},"\u2003\u2003\/* \u201cMsgTyp\u201d is a received message type to determine"]},{"entry":[{},"\u2003\u2003the associated structure of the message body *\/"]},{"entry":[{},"\u2003\u2003wm_apmBody_t\u2003\u2003Body;\u2003\u2003\/*\u2003\u2003\u201cBody\u201d is a specific"]},{"entry":[{},"\u2003\u2003message body *\/"]},{"entry":[{},"} wm_apmMsg_t;"]},{"entry":[{},"Values of \u201cMsgTyp\u201d:"]},{"entry":[{},"WM_AT_SEND_RSP"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}},"br":{},"ul":{"@attributes":{"id":"ul0051","list-style":"none"},"li":["WM_AT_UNSOLICITED\n\nThe message contains an unsolicited AT command\n","WM_AT_CMD_PRE_PARSER\n\nThe message contains an AT command sent by a client external software through the main software.\n","WM_AT_RSP_PRE_PARSER\n\nThe message contains an AT response resulting from the main software executing an AT command originating from an external application.\n","WM_OS_TIMER\n\nThe message is sent on expiration of a timeout\n\nThe structure of the body is:\n"]}},{"@attributes":{"id":"p-0086","num":"0165"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"typedef union"},{"entry":"{"},{"entry":"\u2003\u2003\/* The following includes all specific structures"},{"entry":"\u2003\u2003associated with \u201cMsgTyp\u201d *\/ message types"},{"entry":"\u2003\u2003\/* WM_AT_SEND_RSP *\/"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"63pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["\u2003\u2003wm_atResponse_t","ATResponse;"]},{"entry":"\u2003\u2003\/* WM_AT_UNSOLICITED\u2003\u2003*\/"},{"entry":["\u2003\u2003wm_atUnsolicited_t","ATUnsolicited;"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"\u2003\u2003\/* WM_AT_CMD_PRE_PARSER\u2003\u2003*\/"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"63pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["\u2003\u2003wm_atCmdPreParser_t","ATCmdPreParser;"]},{"entry":"\u2003\u2003;\/* WM_AT_RSP_PRE_PARSER\u2003\u2003\u2003*\/"},{"entry":["\u2003\u2003wm_atRspPreParser_t","ATRspPreParser"]},{"entry":"\u2003\u2003\/* WM_OS_TIMER\u2003\u2003*\/"},{"entry":"\u2003\u2003wm_osTimer_t\u2003\u2003OSTimer;"},{"entry":"} wm_apmBody_t;"},{"entry":"Substructures of the body are as follows:"},{"entry":"Body for WM_AT_SEND_RSP:"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"119pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"98pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["\u2003\u2003typedef struct {",{}]},{"entry":["\u2003\u2003\u2003\u2003wm_atSendRspType_e","Type;"]},{"entry":["\u2003\u2003\u2003\u2003u16","StrLength; \/* Length of"]},{"entry":[{},"strData *\/"]},{"entry":["\u2003\u2003\u2003\u2003char","StrData[1]; \/* AT response"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"\u2003\u2003\u2003\u2003*\/"},{"entry":"\u2003\u2003} wm_atResponse_t;"},{"entry":"\u2003\u2003typedef enum {"},{"entry":"\u2003\u2003\u2003\u2003WM_AT_SEND_RSP_TO_EMBEDDED,"},{"entry":"\u2003\u2003\u2003\u2003WM_AT_SEND_RSP_TO_EXTERNAL,"},{"entry":"\u2003\u2003\u2003\u2003WM_AT_SEND_RSP_BROADCAST"},{"entry":"\u2003\u2003} wm_atSendRspType_e;"},{"entry":"\u2003\u2003(see details of the \u201cwm_atSendCommand\u201d function for"},{"entry":"\u2003\u2003the description of \u201cwm_atSendRspType_e description"},{"entry":"\u2003\u2003\u201d),"},{"entry":"Body for WM_AT_UNSOLICITED:"},{"entry":"\u2003\u2003typedef struct {"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"119pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"98pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["\u2003\u2003\u2003\u2003wm_atUnsolicited_e","Type;"]},{"entry":["\u2003\u2003\u2003\u2003u16","StrLength;"]},{"entry":["\u2003\u2003\u2003\u2003char","StrData[1];"]},{"entry":"\u2003\u2003} wm_atUnsolicited_t;"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"\u2003\u2003typedef enum {"},{"entry":"\u2003\u2003\u2003\u2003WM_AT_UNSOLICITED TO_EXTERNAL,"},{"entry":"\u2003\u2003\u2003\u2003WM_AT_UNSOLICITED_TO_EMBEDDED,"},{"entry":"\u2003\u2003\u2003\u2003WM_AT_UNSOLICITED_BROADCAST"},{"entry":"\u2003\u2003} wm_atUnsolicited_e;"},{"entry":"\u2003\u2003(see details of the \u201cwm_atUnsolicitedSubscription\u201d"},{"entry":"\u2003\u2003function for the description of \u201cwm_atUnsolicited_e"},{"entry":"\u2003\u2003\u201d)."},{"entry":"Body for WM_AT_CMD_PRE_PARSER:"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"119pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"98pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["\u2003\u2003typedef struct {",{}]},{"entry":["\u2003\u2003\u2003\u2003wm_atCmdPreSubscribe_e","Type;"]},{"entry":["\u2003\u2003\u2003\u2003u16","StrLength;"]},{"entry":["\u2003\u2003\u2003\u2003char","StrData[1]"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"\u2003\u2003} wm_atCmdPreParser_t;"},{"entry":"\u2003\u2003typedef enum {"},{"entry":"\u2003\u2003\u2003\u2003WM_AT_CMD_PRE_WAVECOM_TREATMENT, \/*"},{"entry":"\u2003\u2003\u2003\u2003Default value"},{"entry":"\u2003\u2003\u2003\u2003*\/"},{"entry":"\u2003\u2003\u2003\u2003WM_AT_CMD_PRE_EMBEDDED_TREATMENT,"},{"entry":"\u2003\u2003\u2003\u2003WM_AT_CMD_PRE_BROADCAST"},{"entry":"\u2003\u2003} wm_atCmdPreSubscribe_e;"},{"entry":"\u2003\u2003\u2003\u2003(see details of the \u201cwm_atRspPreParserSubscribe\u201d"},{"entry":"\u2003\u2003\u2003\u2003function for the description of"},{"entry":"\u2003\u2003\u2003\u2003\u201cwm_atCmdPreSubscribe_e\u201d)."},{"entry":"Body for WM_AT _RSP_PRE_PARSER:"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"119pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"98pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["\u2003\u2003typedef struct {",{}]},{"entry":["\u2003\u2003\u2003\u2003wm_atRspPreSubscribe_e","Type;"]},{"entry":["\u2003\u2003\u2003\u2003u16","StrLength;"]},{"entry":["\u2003\u2003\u2003\u2003char","StrData[1];"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"\u2003\u2003} wm_atRspPreParser_t;"},{"entry":"\u2003\u2003typedef enum {"},{"entry":"\u2003\u2003\u2003\u2003WM_AT_RSP_PRE_WAVECOM_TREATMENT \/*"},{"entry":"\u2003\u2003\u2003\u2003Default value"},{"entry":"\u2003\u2003\u2003\u2003*\/"},{"entry":"\u2003\u2003\u2003\u2003WM_AT_RSP_PRE_EMBEDDED_TREATMENT,"},{"entry":"\u2003\u2003\u2003\u2003WM_AT_RSP_PRE_BROADCAST"},{"entry":"\u2003\u2003} wm_atRspPreSubscribe_e;"},{"entry":"\u2003\u2003(see details of the \u201cwm_atRspPreParserSubscribe\u201d"},{"entry":"\u2003\u2003function for the description of"},{"entry":"\u2003\u2003\u201cwm_atRspPreSubscribe_e\u201d)."},{"entry":"Body for WM_OS_TIMER:"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"119pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"98pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["\u2003\u2003typedef struct {",{}]},{"entry":["\u2003\u2003\u2003\u2003u8","Ident; \/* Timeout identifier"]},{"entry":"\u2003\u2003\u2003\u2003*\/"},{"entry":"\u2003\u2003} wm_osTimer_t;"},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}},"br":[{},{},{},{},{},{}],"ul":{"@attributes":{"id":"ul0052","list-style":"none"},"li":["Void wm_atSendCommand (u16 AtStringSize\n    \n    ","AtString\n\nThis parameter may be any type of string of AT command using ASCII characters. Several strings may be sent at the same time.\n","AtStringSize\n\nSize of the previous parameter: AtString.\n","ResponseType\n\nResponse type\n"]}},{"@attributes":{"id":"p-0087","num":"0172"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"Typedef enum\u2003\u2003{"},{"entry":"\u2003\u2003WM_AT_SEND_RSP_TO_EMBEDDED,\u2003\u2003\/* Default value *\/"},{"entry":"\u2003\u2003WM_AT_SEND_RSP_TO_EXTERNAL,"},{"entry":"\u2003\u2003WM_AT_SEND_RSP_BROADCAST"},{"entry":"} wm_atSendRspType_e;"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}},"ul":{"@attributes":{"id":"ul0054","list-style":"none"},"li":[{"@attributes":{"id":"ul0054-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0055","list-style":"none"},"li":["WM_AT_SEND_RSP_TO_EMBEDDED","All responses are redirected to the client embedded application. This is the default mode.","WM_AT_SEND_RSP_TO_EXTERNAL","All responses are redirected to the client external application (PC).","WM_AT_SEND_RSP_BROADCAST","All responses are redirected (broadcast) to the client embedded application and the client external application (PC).\n\nA3) \u201cwm_AtUnsolicitedSubscription\u201d\n\nRegistration function with the main software to a service for reception of unsolicited AT commands, in which one parameter indicates the destination software (namely the client embedded software and\/or the client external software), to which each of the unsolicited AT commands must be broadcast.\n\nExact name:\n"]}},"Void wm_atUnsolicitedSubscription(wm_atUnsolicited_e Unsolicited);\n\nParameters:\n","Unsolicited\n\nThis parameter describes actions carried out when an unsolicited AT command arrives.\n"]}},{"@attributes":{"id":"p-0088","num":"0181"},"tables":{"@attributes":{"id":"TABLE-US-00004","num":"00004"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"Typedef enum"},{"entry":"\u2003\u2003WM_AT_UNSOLICITED_TO_EXTERNAL,\u2003\u2003\/* Default value"},{"entry":"\u2003\u2003*\/"},{"entry":"\u2003\u2003WM_AT_UNSOLICITED_TO_EMBEDDED,"},{"entry":"\u2003\u2003WM_AT_UNSOLICITED_BROADCAST,"},{"entry":"} wm_atUnsolicited_e;"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}},"ul":{"@attributes":{"id":"ul0056","list-style":"none"},"li":[{"@attributes":{"id":"ul0056-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0057","list-style":"none"},"li":["WM_AT_UNSOLICITED_TO_EXTERNAL","All unsolicited commands will be broadcast to the client external application (PC) (default mode).","WM_AT_UNSOLICITED_TO_EMBEDDED","All unsolicited commands will be broadcast to the client embedded application.","WM_AT_UNSOLICITED_BROADCAST","All unsolicited commands will be broadcast to the client external application (PC) and the client embedded application.\n\nA4) \u201cwm_atCmdPreParserSubscribe\u201d\n\nRegistration function with the main software to an AT command preparsing service, in which a parameter indicates the destination application(s) (namely the main software and\/or the client embedded software) to which each AT command originating from an external application must be directed.\n\nExact name:\n"]}},"Void wm_atCmdPreParserSubscribe (wm_atCmdPreSubscribe_e SubscribeType);\n\nParameters\n","SubscribeType\n\nThis parameter describes the action carried out when an AT command arrives\n"]}},{"@attributes":{"id":"p-0089","num":"0190"},"tables":{"@attributes":{"id":"TABLE-US-00005","num":"00005"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"Typedef enum"},{"entry":"\u2003WM_AT_CMD_PRE_WAVECOM_TREATMENT,\u2003\/* Default"},{"entry":"\u2003value"},{"entry":"\u2003*\/"},{"entry":"\u2003WM_AT_CMD_PRE_EMBEDDED_TREATMENT,"},{"entry":"\u2003WM_AT_CMD_PRE_BROADCAST,"},{"entry":"} wm_atCmdPreSubscribe_e;"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}},"ul":{"@attributes":{"id":"ul0058","list-style":"none"},"li":[{"@attributes":{"id":"ul0058-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0059","list-style":"none"},"li":["WM_AT_CMD_PRE_WAVECOM_TREATMENT","The client embedded application does not want to filter (or spy) commands sent by the client external application (default mode).","WM_AT_CMD_PRE_EMBEDDED_TREATMENT","The client embedded application wants to filter commands sent by the client external application.","WM_AT_CMD_PRE_BROADCAST","The client embedded application wants to spy on commands sent by the client external application.\n\nA5) \u201cwm_atRspPreParserSubscribe\u201d\n\nRegistration function with the main software to an AT response preparsing service, in which a parameter indicates the destination software (namely the client external software and\/or the client embedded software) to which each AT command originating from an external application must be directed.\n\nExact name:\n"]}},"Void wm_atRspPreParserSubscribe (wm_atRspPreSubscribe_e SubscribeType);\n\nParameters\n","SubscribeType\n\nThis parameter describes the action carried out when an AT command arrives\n"]}},{"@attributes":{"id":"p-0090","num":"0199"},"tables":{"@attributes":{"id":"TABLE-US-00006","num":"00006"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"Typedef enum"},{"entry":"\u2003WM_AT_RSP_PRE_WAVECOM_TREATMENT,\u2003\/* Default"},{"entry":"\u2003value"},{"entry":"\u2003*\/"},{"entry":"\u2003WM_AT_RSP_PRE_EMBEDDED_TREATMENT,"},{"entry":"\u2003WM_AT_RSP_PRE_BROADCAST,"},{"entry":"} wm_atRspPreSubscribe_e;"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}},"ul":{"@attributes":{"id":"ul0060","list-style":"none"},"li":[{"@attributes":{"id":"ul0060-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0061","list-style":"none"},"li":["WM_AT_RSP_PRE_WAVECOM_TREATMENT","The client embedded application does not want to filter (or spy) responses sent to the client external application (default mode).","WM_AT_RSP_PRE_EMBEDDED_TREATMENT","The client embedded application wants to filter responses sent to the client external application.","WM_AT_RSP_PRE_BROADCAST","The client embedded application wants to spy on responses sent to the client external application.\n\nA6) \u201cwm_atSendRspExternalApp\u201d\n\nFunction to send at least one response to the client external software, through the main software. This function can only be used if a prior registration has been made to the response preparsing service, in particular including redirection of a copy of responses to the client embedded software.\n\nExact name:\n"]}},"Void wm_atSendRspExternalApp (u16 AtStringSize,\n    \n    ","AtString\n\nMay be any type of AT response string, in ASCII characters.\n","AtStringSize\n\nSize of the previous parameter: AtString\n\nA7) \u201cDataFlowService\u201d\n\nFunction to send and\/or receive data by the client embedded software, through the main software, after a data communication has been set up.\n\nA8) \u201cwm_osStartTimer\u201d\n\nFunction to start a timeout, a parameter of the said starting function indicating which timeout is to be started.\n\nA9) \u201cwm_osStopTimer\u201d\n\nFunction to stop a timeout, a parameter of the said stop function indicating which timeout is to be stopped.\n"]}},{"@attributes":{"id":"p-0091","num":"0210"},"tables":{"@attributes":{"id":"TABLE-US-00007","num":"00007"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"280pt","align":"center"}},"thead":{"row":[{"entry":"APPENDIX 2"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"EXAMPLE CLIENT EMBEDDED APPLICATION"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"266pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["\/**************************************************************************","*\/"]},{"entry":["\/* File : Appli.c","*\/"]},{"entry":["\/*-------------------------------------------------------------------------","*\/"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"224pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"14pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["\/* Object :","Customer application","*\/"]},{"entry":["\/*","This program waits 3 seconds, send a ATI3 command to","*\/"]},{"entry":["\/*","software version. It starts a cyclic timer of 3 seconds","*\/"]},{"entry":["\/*","and writes an object in Fash with a value 0.","*\/"]},{"entry":["\/*","Every 3 seconds, it reads object value, display it,","*\/"]},{"entry":["\/*","increments and rewrites it in Flash.","*\/"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"266pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["\/*","*\/"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"224pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"14pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["\/* contents :","Customer main procedures","*\/"]},{"entry":["\/*",{},"*\/"]},{"entry":["\/* Change :",{},"*\/"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"266pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["\/*-------------------------------------------------------------------------","*\/"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"196pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"14pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["\/* Date","Author","Modification","*\/"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"266pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["\/*-------------------------------------------------------------------------","*\/"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"196pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"14pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["\/* 26\/12\/00","FCA","Creation","*\/"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"266pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["\/**************************************************************************","*\/"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"280pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"#include \u201cwm_types.h\u201d"},{"entry":"#include \u201cwm_apm.h\u201d"},{"entry":"#include \u201cutils.h\u201d"},{"entry":"#define TIMER_INIT\u2003\u200301"},{"entry":"#define TIMER_CYCLIC 02"},{"entry":"#define OBJECT_ID\u2003\u20030x1"},{"entry":"char wm_apmCustomStack[1024];"},{"entry":"const u16 wm_apmCustomStackSize = sizeof(wm_apmCustomStack);"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"266pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["\/**************************************************************************","*\/"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"224pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"14pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["\/* Function :","wm_apmAppliInit","*\/"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"266pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["\/*-------------------------------------------------------------------------","*\/"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"224pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"14pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["\/* Objet :","Customer application initialisation","*\/"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"266pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["\/*","*\/"]},{"entry":["\/* Return :","*\/"]},{"entry":["\/*","*\/"]},{"entry":["\/*-------------------------------------------------------------------------","*\/"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"6"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"5","colwidth":"154pt","align":"left"}},{"@attributes":{"colname":"6","colwidth":"14pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["\/* Variable Name","IN","OUT","GLB","Utilisation","*\/"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"266pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["\/*-------------------------------------------------------------------------","*\/"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"6"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"5","colwidth":"154pt","align":"left"}},{"@attributes":{"colname":"6","colwidth":"14pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["\/* InitType",{},{},{},"Application start mode reason","*\/"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"266pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["\/**************************************************************************","*\/"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"280pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"void wm_apmAppliInit (wm_apmInitType_e InitType)"},{"entry":"{"},{"entry":"\u2003\u2003\/\/ Trace : Level 10"},{"entry":"\u2003\u2003wm_osDebugtrace(10, \u201cInit : Start timer\u201d );"},{"entry":"\u2003\u2003\/\/ Start a timer for 3 seconds"},{"entry":"\u2003\u2003wm_osStartTimer (TIMER_INIT,FALSE, 30);"},{"entry":"}"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"266pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["\/**************************************************************************","*\/"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"224pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"14pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["\/* Function :","wm_apmAppliParser","*\/"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"266pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["\/*-------------------------------------------------------------------------","*\/"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"224pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"14pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["\/* Objet :","Customer task body","*\/"]},{"entry":["\/*",{},"*\/"]},{"entry":["\/* Return :",{},"*\/"]},{"entry":["\/*",{},"*\/"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"266pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["\/*-------------------------------------------------------------------------","*\/"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"6"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"5","colwidth":"154pt","align":"left"}},{"@attributes":{"colname":"6","colwidth":"14pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["\/* Variable Name","IN","OUT","GLB","Utilisation","*\/"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"266pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["\/*-------------------------------------------------------------------------","*\/"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"7"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"5","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"6","colwidth":"154pt","align":"left"}},{"@attributes":{"colname":"7","colwidth":"14pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["\/* pMessage",{},{},{},{},"Message sent by real time kernel","*\/"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"266pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["\/**************************************************************************","*\/"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"280pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"bool wm_apmAppliParser (wm_apmMsg_t * pMessage)"},{"entry":"{"},{"entry":"\u2003\u2003char strCommand [] = \u201cATI3\\r\u201d; \/\/ don't forget \u2018\\r\u2019 at the end"},{"entry":"\u2003\u2003u16 u16DataLen;"},{"entry":"\u2003\u2003bool bRat;"},{"entry":"\u2003\u2003char strTraceMsg[50];"},{"entry":"\u2003\u2003char strData;"},{"entry":"\u2003\u2003switch (pMessage->MsgTyp)"},{"entry":"\u2003\u2003{"},{"entry":"\u2003\u2003\u2003\u2003case WM_OS_TIMER :"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003switch (pMessage->Body.OSTimer:Ident)"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003{"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003case TIMER_INIT: \/\/ Timer armed in wm_apmAppliInit"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003wm_osDebugTrace(10, \u2018TIMER_INIT\u2019 );"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\/\/ Result will be visible in the AT terminal window"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003wm_atSendCommand(wm_strlan(strCommand)+1,"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003WM_AT_SEND_RSP_TO_EXTERNAL, strCommand);"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\/\/ Write object for the first time"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003strData = 0x30;"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003bRat = wm_osWriteFlashData(OBJECT_ID, sizeof(char),"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003&strData );"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003if (bRat)"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003wm_osStartTimer (TIMER_CYCLIC,TRUE, 30);"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003else"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003wm_osDebugTrace(10, \u201cwm_osWriteFlashData failed\u201d );"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003break:"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003case TIMER_CYCLIC:"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003wm_osDebugTrace(10, \u201cTIMER_CYCLIC\u201d );"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\/\/ Read object, increment value, rewrite object"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003u16DataLen = wm_osGetLenFlashData(OBJECT_ID);"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003u16DataLen = wm_osReadFlashData(OBJECT_ID, u16DataLen,"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003&strData ):"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003if (u16DataLen)"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003{"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\/\/ Print object after read"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003wm_strcpy(strTraceMsg, \u201cValue :\u201d);"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003strTraceMsg(wm_strlen(strTraceMsg)) = strData;"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003strTraceMsg(wm_strlen(strTraceMsg)+1 = \u2018\\0\u2019;"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003wm_osDebugTrace(10, strTraceMsg );"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\/\/increment it"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003strData--;"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003if (strData == 0x3A) strData = 0x30;"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003bRat = wm_osWriteFlashData(OBJECT_ID, sizeof(char),"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003&strData );"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003if (!bRet)"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003wm_osDebugTrace(10, \u201cwm_osWriteFlashData failed\u201d );"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003}"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003else"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003wm_osDebugTrace(10, \u201cRead 0 byte\u201d );"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003break;"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003default;"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003break;"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003}"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003default;"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003break;"},{"entry":"\u2003\u2003}"},{"entry":"\u2003\u2003return TRUE;"},{"entry":"}"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}]}}}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Other characteristics and advantages of the invention will become clear after reading the following description of a preferred embodiment of the invention given as a non-limitative example, and the attached drawings, in which:",{"@attributes":{"id":"p-0033","num":"0052"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0034","num":"0053"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0035","num":"0054"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0036","num":"0055"},"figref":"FIGS. 4 to 7"},{"@attributes":{"id":"p-0037","num":"0056"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0038","num":"0057"},"figref":["FIG. 5","FIG. 4"]},{"@attributes":{"id":"p-0039","num":"0058"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0040","num":"0059"},"figref":["FIG. 7","FIG. 6"]}]},"DETDESC":[{},{}]}
