---
title: Generating optimized resource consumption periods for multiple users on combined basis
abstract: A method and system for managing cloud consumption including accessing a set of aggregate usage history data for a set of users each operating a set of machines consuming a set of resources in a host cloud, generating a set of variable consumption periods over which the consumption of the set of resources will be tracked for the set of users on a combined basis, identifying a set of subscription margins for a resource in the set of resources based on a comparison of the consumption of the resource to a resource subscription limit for the set of users on a combined basis over the set of variable consumption periods, generating a set of marginal consumption values for the set of users for a resource for the set of variable consumption periods in the host cloud, and generating a management action based on the marginal consumption value.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08832219&OS=08832219&RS=08832219
owner: Red Hat, Inc.
number: 08832219
owner_city: Raleigh
owner_country: US
publication_date: 20110301
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["FIELD","BACKGROUND","DESCRIPTION"],"p":["The invention relates generally to systems and methods for generating optimized resource consumption periods for multiple users on a combined basis, and more particularly, to platforms and techniques for analyzing collective usage patterns for a set of users deployed across one or more clouds, and configured to generate dynamically managed or updated consumption or subscription periods to capture, bill, and administer cloud resource consumption over intervals that can dynamically vary and become smaller or larger, depending on the rates of change of resource consumption or other factors for the users on a collective basis.","The advent of cloud-based computing architectures has opened new possibilities for the rapid and scalable deployment of virtual Web stores, media outlets, social networking sites, and many other on-line sites or services. In general, a cloud-based architecture deploys a set of hosted resources such as processors, operating systems, software and other components that can be combined together to form virtual machines. A user or customer can request the instantiation of a virtual machine or set of machines from those resources from a central server or cloud management system to perform intended tasks, services, or applications. For example, a user may wish to set up and instantiate a virtual server from the cloud to create a storefront to market products or services on a temporary basis, for instance, to sell tickets to or merchandise for an upcoming sports or musical performance. The user can subscribe to the set of resources needed to build and run the set of instantiated virtual machines on a comparatively short-term basis, such as hours or days, for their intended application.","Typically, when a user utilizes a cloud, the user must track the software applications executed in the cloud and\/or processes instantiated in the cloud. For example, the user must track the cloud processes to ensure that the correct cloud processes have been instantiated, that the cloud processes are functioning properly and\/or efficiently, that the cloud is providing sufficient resources to the cloud processes, and so forth. Due in part to the user's requirements and overall usage of the cloud, the user may have many applications and\/or processes instantiated in a cloud at any given instant, and the user's deployment of virtual machines, software, and other resources can change dynamically over time. In cases, the user may also utilize multiple independent host clouds to support the user's cloud deployment. That user may further instantiate and use multiple applications or other software or services inside or across multiple of those cloud boundaries, and those resources may be used or consumed by multiple or differing end-user groups in those different cloud networks.","In terms of the administrative capture of a user's resource consumption that may be spread across several independent host clouds, existing platforms today provide no mechanism by which a resource provider and\/or other operator or administrator can track the resource consumption by the user across all currently utilized host clouds, in an organized or centralized fashion. That is, the user may have instantiated a certain number of instances or copies of an operating system or application in one host cloud, while at the same time running or executing another number of instances of the same operating system or application in another, independent host cloud or clouds. In instances, the set of host clouds may operate independently and with no operating agreement between them. Usage data for the user may therefore not be shared or be visible between those host clouds. In addition, the set of host clouds can also change over time during the course of a week, month, and\/or other period, making coordination of subscription details including usage history difficult or impossible.","In cases where the user may subscribe to operating system, application, and\/or other software or hardware resources based on subscription levels or limits, it may accordingly be difficult or impossible to keep a running tally of the user's resource consumption on an aggregate basis, across all operative host clouds. If the user, for instance, has a subscription limit of 300 instances of an executing application with a per-cloud limit of 100 instances, and reaches 100 instances in one host cloud at the same time that 90 instances of that application is operating in a second host cloud and 120 are operating in a third cloud, the application provider, individual host clouds, and\/or other entities may not be able to timely or accurately determine that the user has reached their instance limit in one cloud, and exceeded their instance threshold in a second cloud. This can occur, for example, because individual host clouds may not have visibility on the resource consumption and\/or subscription limits or parameters that may apply in other clouds.","Moreover, those entities and their associated billing infrastructure may not be equipped to identify not just over-consumption of resources within certain subscription or usage periods, but also under-consumption of those resources. The individual host clouds and other entities may therefore not be able to accurately apply the user's subscription limits and\/or other parameters, such as supplemental billing for over-limit resource consumption, on an aggregate basis. Among other things, this may prevent any individual host cloud, or application provider or other resource provider, from identifying the potential under-consumption of one or more subscribed resources in diverse host clouds that could, in theory, be captured and aggregated to permit the user to receive a credit, offset, and\/or other adjustment to their overall subscription costs, on an aggregate basis.","Further, in terms of subscription management and associated tracking of resource consumption, in known cloud management systems and related billing infrastructure, the subscription period or other time interval that is used to track the user's consumption of processor, memory, operating system, or other resources may be fixed or predetermined. That interval may be set, for example, to a one-hour, one-day, and\/or other period or interval over which the user's consumption of cloud resources is accumulated. When a conventional cloud management system employs such fixed or relatively coarse-grained set of intervals, however, the resource usage that is captured may not be fully accurate or timely. When the cloud management system or associated logic takes a snapshot of operating system instances, for instance, on a once-per-hour basis, if a particular user exhibits bursty or other transient consumption patterns, such as consumption of operating system instances that exceeds subscription limits for only a few minutes at a time, the tracking infrastructure may not be able to detect or resolve those peaks. In cases, the user's subscription levels might call out for additional subscription fees, limit adjustments, and\/or other factors that should be applied to large or transient excursions in resource consumption. Those factors may not be accounted for when the cloud management system or associated administrative infrastructure is incapable of detecting such consumption events within a relevant consumption period.","In addition, in cases it may be useful for the cloud user, cloud provider or other administrator or user to detect and monitor the instantaneous resource consumption of a set of machines or networks, for instance, to detect irregular or anomalous conditions or events that occur on a real-time or near real-time basis, for example to initiate workload rollovers or to perform other management actions.","In further aspects, corporations or other entities can operate cloud installations involving comparatively large-scale numbers of users, such as thousands, fens of thousands, or other numbers of users. In those and other scenarios, the set of users may be organized or broken down into a collection of multiple groups or sub-groups, for example to incorporate different engineering teams, management teams, software teams, finance teams, and\/or other collections, lists, or partitions of users. In aspects, different groups of users in the overall collection of users may use or share entitlements to the same, overlapping, or partially overlapping set or sets of cloud resources, such as application instances, virtual machines, operating system instances, services such as bandwidth services levels, security services or levels, or other service levels, and\/or other cloud-based resources. In conventional cloud platforms, different groups of the collective set of users may or may not be aware of each others' subscription levels or service commitments, and may be administered or managed by different systems administrators or other users, for instance in different locations or possibly different countries. In those and other scenarios, the subscription or consumption periods over which the overall set of entitlements are being tracked and managed may not be visible or be able to be configured from any one access point. Situations may arise therefore where a corporation or other aggregate entity may have its resource consumption metered over time frames or intervals which are too large to detect or identify short-term spikes in consumption on a collective basis, or too small to average out short-range fluctuations in consumption to generate a representative rate of consumption.","It may be desirable to provide systems and methods for generating optimized resource consumption periods for multiple users on a combined basis, in which sets of consumption data and related tracking information can be collected from groups of users, and analyzed to determine modified or optimized resource consumption periods and\/or other tracking parameters for the users, on a collective basis.","Embodiments described herein can be implemented in or supported by a cloud network architecture. As used herein, a \u201ccloud\u201d can comprise a collection of hardware, software, services, and\/or resources that can be invoked to instantiate a virtual machine, process, or other resource for a limited or defined duration. As shown for example in , the collection of resources supporting a cloud  can at a hardware level comprise a set of resource servers  configured to deliver computing components needed to instantiate a virtual machine, process, service, or other resource. For example, one group of resource servers in set of resource servers  can host and serve an operating system, and\/or components, utilities, or interfaces related to that operating system, to deliver to a virtual target, and instantiate that machine with an image of that operating system. Another group of servers in set of resource servers  can accept requests to host computing cycles or processor time, memory allocations, communications ports or links, and\/or other resources to supply a defined level of processing power or throughput for a virtual machine. A further group of resource servers in set of resource servers  can host and serve applications or other software to load on an instantiation of a virtual machine, such as an email client, a browser application, a messaging application, or other applications, software, or services. Other types of resource servers can be used to support one or more clouds .","In embodiments, the entire set of resource servers  and\/or other hardware or software resources used to support one or more clouds , along with the set of instantiated virtual machines, can be managed by a cloud management system . The cloud management system  can comprise a dedicated or centralized server and\/or other software, hardware, services, and network tools that communicate via network , such as the Internet or other public or private network, with all servers in set of resource servers  to manage the cloud  and its operation. To instantiate a new or updated set of virtual machines, a user can transmit an instantiation request to the cloud management system  for the particular type of virtual machine they wish to invoke for their intended application. A user can for instance make a request to instantiate a set of virtual machines configured for email, messaging or other applications from the cloud . The virtual machines can be instantiated as virtual client machines, virtual appliance machines consisting of special-purpose or dedicated-task machines as understood in the art, and\/or as other virtual machines or entities. The request to invoke and instantiate the desired complement of virtual machines can be received and processed by the cloud management system , which identifies the type of virtual machine, process, or other resource being requested in that platform's associated cloud. The cloud management system  can then identify the collection of hardware, software, service, and\/or other resources necessary to instantiate that complement of virtual machines or other resources. In embodiments, the set of instantiated virtual machines or other resources can, for example, and as noted, comprise virtual transaction servers used to support Web storefronts, Web pages, and\/or other transaction sites.","In embodiments, the user's instantiation request can specify a variety of parameters defining the operation of the set of virtual machines to be invoked. The instantiation request, for example, can specify a defined period of time for which the instantiated collection of machines, services, or processes is needed. The period of time can be, for example, an hour, a day, a month, or other interval of time. In embodiments, the user's instantiation request can specify the instantiation of a set of virtual machines or processes on a task basis, rather than for a predetermined amount or interval of time. For instance, a user could request a set of virtual provisioning servers and other resources until a target software update is completed on a population of corporate or other machines. The user's instantiation request can in further regards specify other parameters that define the configuration and operation of the set of virtual machines or other instantiated resources. For example, the request can specify a specific minimum or maximum amount of processing power or input\/output (I\/O) throughput that the user wishes to be available to each instance of the virtual machine or other resource. In embodiments, the requesting user can for instance specify a service level agreement (SLA) acceptable for their desired set of applications or services. Other parameters and settings can be used to instantiate and operate a set of virtual machines, software, and other resources in the host clouds. One skilled in the art will realize that the user's request can likewise include combinations of the foregoing exemplary parameters, and others. It may be noted that \u201cuser\u201d herein can include a network-level user or subscriber to cloud-based networks, such as a corporation, government entity, educational institution, and\/or other entity, including individual users and groups of users.","When the request to instantiate a set of virtual machines or other resources has been received and the necessary resources to build those machines or resources have been identified, the cloud management system  can communicate with one or more set of resource servers  to locate resources to supply the required components. Generally, the cloud management system  can select servers from the diverse set of resource servers  to assemble the various components needed to build the requested set of virtual machines, services, or other resources. It may be noted that in some embodiments, permanent storage, such as optical storage or hard disk arrays, may or may not be included or located within the set of resource servers  available to the cloud management system , since the set of instantiated virtual machines or other resources may be intended to operate on a purely transient or temporary basis. In embodiments, other hardware, software or other resources not strictly located or hosted in one or more clouds  can be accessed and leveraged as needed. For example, other software or services that are provided outside of one or more clouds  acting as hosts, and are instead hosted by third parties outside the boundaries of those clouds, can be invoked by in-cloud virtual machines or users. For further example, other non-cloud hardware and\/or storage services can be utilized as an extension to the one or more clouds  acting as hosts or native clouds, for instance, on an on-demand, subscribed, or event-triggered basis.","With the resource requirements identified for building a network of virtual machines, the cloud management system  can extract and build the set of virtual machines or other resources on a dynamic, on-demand basis. For example, one set of resource servers  may respond to an instantiation request for a given quantity of processor cycles with an offer to deliver that computational power immediately and guaranteed for the next hour or day. A further set of resource servers  can offer to immediately supply communication bandwidth, for example on a guaranteed minimum or best-efforts basis, for instance over a defined window of time. In other embodiments, the set of virtual machines or other resources can be built on a batch basis, or at a particular future time. For example, a set of resource servers  may respond to a request for instantiation of virtual machines at a programmed time with an offer to deliver the specified quantity of processor cycles within a specific amount of time, such as the next 12 hours. Other timing and resource configurations are possible.","After interrogating and receiving resource commitments from the set of resource servers , the cloud management system  can select a group of servers in the set of resource servers  that match or best match the instantiation request for each component needed to build the user's requested virtual machine, service, or other resource. The cloud management system  for the one or more clouds  acting as the destination for the virtual machines can then coordinate the integration of the identified group of servers from the set of resource servers , to build and launch the requested set of virtual machines or other resources. The cloud management system  can track the identified group of servers selected from the set of resource servers , or other distributed resources that are dynamically or temporarily combined, to produce and manage the requested virtual machine population, services, or other cloud-based resources.","In embodiments, the cloud management system  can generate a resource aggregation table or other record that identifies the various selected sets of resource servers in set of resource servers  that will be used to supply the components of the set of instantiated virtual machines, services, or processes. The selected sets of resource servers can be identified by unique identifiers such as, for instance, Internet protocol (IP) addresses or other addresses. In aspects, different sets of servers in set of resource servers  can be selected to deliver different resources to different users and\/or for different applications. The cloud management system  can register the finalized group of servers in the set resource servers  contributing to or otherwise supporting the set of instantiated machines, services, or processes.","The cloud management system  can then set up and launch the initiation process to instantiate the virtual machines, processes, services, and\/or other resources to be hosted and delivered from the one or more clouds . The cloud management system  can for instance transmit an instantiation command or instruction to the registered group of servers in the set of resource servers . The cloud management system  can receive a confirmation message back from each registered server in set of resource servers  indicating a status or state regarding the provisioning of their respective resources. Various registered resource servers may confirm, for example, the availability of a dedicated amount of processor cycles, amounts of electronic memory, communications bandwidth, services, and\/or applications or other software prepared to be served and delivered.","As shown for example in , after coordination of the sources and configuration of resources including the hardware layer, selected software, and\/or other resources, the cloud management system  can then instantiate a set of virtual machines , and\/or other appliances, services, processes, and\/or entities, based on the resources supplied by servers within set of resource servers  registered to support the one or more clouds  in a multiple-cloud network . According to aspects, cloud management system  can access or interact with a virtualization module, platform, or service to instantiate and operate set of virtual machines , such as the kernel-based virtualization platform or manager (Red Hat Enterprise Virtualization, RHEV\u2122) available from Red Hat, Inc. of Raleigh, N.C., or others. In embodiments, the cloud management system  can instantiate a given number, for example, 10, 500, 1000, 20,000, or other numbers or instances of virtual machines to populate one or more clouds  and be made available to users of that cloud or clouds. In aspects, users may access the one or more clouds  via the Internet, or other public or private networks. Each virtual machine can be assigned an instantiated machine ID that can be stored in the resource aggregation table, or other record or image of the instantiated virtual machine population. Additionally, the cloud management system  can store data related to the duration of the existence or operation of each operating virtual machine, as well as the collection of resources utilized by the overall set of instantiated virtual machines .","In embodiments, the cloud management system  can further store, track and manage each user's identity and associated set of rights or entitlements to software, hardware, and other resources. Each user that operates a virtual machine or service in the set of virtual machines in the cloud can have specific rights and resources assigned and made available to them, with associated access rights and security provisions. The cloud management system  can track and configure specific actions that each user can perform, such as the ability to provision a set of virtual machines with software applications or other resources, configure a set of virtual machines to desired specifications, submit jobs to the set of virtual machines or other host, manage other users of the set of instantiated virtual machines  or other resources, and\/or other privileges, entitlements, or actions. The cloud management system  associated with the virtual machine(s) of each user can further generate records of the usage of instantiated virtual machines to permit tracking, billing, and auditing of the resources and services consumed by the user or set of users. In aspects of the present teachings, the tracking of usage activity for one or more user (including network level user and\/or end-user) can be abstracted from any one cloud to which that user is registered, and made available from an external or independent usage tracking service capable of tracking software and other usage across an arbitrary collection of clouds, as described herein. In embodiments, the cloud management system  of an associated cloud can for example meter the usage and\/or duration of the set of instantiated virtual machines , to generate subscription and\/or billing records for a user that has launched those machines. In aspects, tracking records can in addition or instead be generated by an internal service operating within a given cloud. Other subscription, billing, entitlement and\/or value arrangements are possible.","The cloud management system  can configure each virtual machine in set of instantiated virtual machines  to be made available to users via one or more networks , such as the Internet or other public or private networks. Those users can for instance access set of instantiated virtual machines via a browser interface, via an application server such as a Java\u2122 server, via an application programming interface (API), and\/or other interface or mechanism. Each instantiated virtual machine in set of instantiated virtual machines  can likewise communicate with its associated cloud management system  and the registered servers in set of resource servers  via a standard Web application programming interface (API), or via other calls, protocols, and\/or interfaces. The set of instantiated virtual machines  can likewise communicate with each other, as well as other sites, servers, locations, and resources available via the Internet or other public or private networks, whether within a given cloud in one or more clouds , or between those or other clouds.","It may be noted that while a browser interface or other front-end can be used to view and operate the set of instantiated virtual machines  from a client or terminal, the processing, memory, communications, storage, and other hardware as well as software resources required to be combined to build the virtual machines or other resources are all hosted remotely in the one or more clouds . In embodiments, the set of virtual machines  or other services, machines, or resources may not depend in any degree on or require the user's own on-premise hardware or other resources. In embodiments, a user can therefore request and instantiate a set of virtual machines or other resources on a purely off-premise basis, for instance to build and launch a virtual storefront, messaging site, and\/or any other application. Likewise, one or more clouds  can also be formed in whole or part from resources hosted or maintained by the users of those clouds, themselves.","Because the cloud management system  in one regard specifies, builds, operates and manages the set of instantiated virtual machines  on a logical or virtual level, the user can request and receive different sets of virtual machines and other resources on a real-time or near real-time basis, without a need to specify, install, or configure any particular hardware. The user's set of instantiated virtual machines , processes, services, and\/or other resources can in one regard therefore be scaled up or down immediately or virtually immediately on an on-demand basis, if desired. In embodiments, the set of resource servers  that are accessed by the cloud management system  to support the set of instantiated virtual machines  or processes can change or be substituted, over time. The type and operating characteristics of the set of instantiated virtual machines  can nevertheless remain constant or virtually constant, since instances are assembled from a collection of abstracted resources that can be selected and maintained from diverse sources based on uniform specifications. Conversely, the users of the set of instantiated virtual machines  can also change or update the resource or operational specifications of those machines at any time. The cloud management system  and\/or other logic can then adapt the allocated resources for that population of virtual machines or other entities, on a dynamic basis.","In terms of network management of the set of instantiate virtual machines  that have been successfully configured and instantiated, the one or more cloud management systems  associated with those machines can perform various network management tasks including security, maintenance, and metering for billing or subscription purposes. The cloud management system  of one or more clouds  can, for example, install, initiate, suspend, or terminate instances of applications or appliances on individual machines. The cloud management system  can similarly monitor one or more operating virtual machines to detect any virus or other rogue process on individual machines, and for instance terminate an application identified as infected, or a virtual machine detected to have entered a fault state. The cloud management system  can likewise manage the set of instantiated virtual machines  or other resources on a network-wide or other collective basis, for instance, to push the delivery a software upgrade to all active virtual machines or subsets of machines. Other network management processes can be carried out by cloud management system  and\/or other associated logic.","In embodiments, more than one set of virtual machines can be instantiated in a given cloud at the same time, at overlapping times, and\/or at successive times or intervals. The cloud management system  can, in such implementations, build, launch and manage multiple sets of virtual machines as part of the set of instantiated virtual machines  based on the same or different underlying set of resource servers , with populations of different virtual machines such as may be requested by the same or different users. The cloud management system  can institute and enforce security protocols in one or more clouds  hosting one or more sets of virtual machines. Each of the individual sets or subsets of virtual machines in the set of instantiated virtual machines  can be hosted in a respective partition or sub-cloud of the resources of the main cloud . The cloud management system  of one or more clouds  can for example deploy services specific to isolated or defined sub-clouds, or isolate individual workloads\/processes within the cloud to a specific sub-cloud or other sub-domain or partition of the one or more clouds  acting as host. The subdivision of one or more clouds  into distinct transient sub-clouds, sub-components, or other subsets which have assured security and isolation features can assist in establishing a multiple user or multi-tenant cloud arrangement. In a multiple-user scenario, each of the multiple users can use the cloud platform as a common utility while retaining the assurance that their information is secure from other users of the same one or more clouds . In further embodiments, sub-clouds can nevertheless be configured to share resources, if desired.","In embodiments, and as also shown in , the set of instantiated virtual machines  generated in a first cloud in one or more clouds  can also interact with a set of instantiated virtual machines, services, and\/or processes generated in a second, third or further cloud in one or more clouds , comprising a multiple-cloud network . The cloud management system  of a first cloud of one or more clouds  can interface with the cloud management system  of a second, third, or further cloud of one or more clouds  to coordinate those domains and operate the clouds and\/or virtual machines, services, and\/or processes on a combined basis. The cloud management system  of a given cloud on one or more clouds  can in aspects track and manage individual virtual machines or other resources instantiated in that cloud, as well as the set of instantiated virtual machines or other resources in other clouds.","In the foregoing and other embodiments, the user making an instantiation request or otherwise accessing or utilizing the cloud network can be a person, customer, subscriber, administrator, corporation, organization, government, and\/or other entity. In embodiments, the user can be or include another virtual machine, application, service and\/or process. In further embodiments, multiple users or entities can share the use of a set of virtual machines or other resources.","Aspects of the present teachings relate to platforms and techniques in which a central or distributed entitlement or subscription engine can communicate with each host cloud in a set of host clouds, track marginal consumption rates or values in those clouds, and aggregate and reconcile subscription charges taking the marginal consumption values above or below subscribed limits into account.",{"@attributes":{"id":"p-0038","num":"0037"},"figref":"FIG. 3","b":["144","190","142","190"]},"According to aspects, systems and methods for generating optimized resource consumption periods for multiple users on a combined basis according to the present teachings can permit the aggregation of consumption periods, consumption limits, subscription terms, and\/or other network management details on a collective basis for or other networks hosting a potentially large-scale set of users , which users could be spread out over a possibly widespread set of geographic areas. n aspects, the set of host clouds  hosting the set of users  can include a set of diverse and\/or otherwise unrelated cloud-based networks to which the set of users  can subscribe for various resources under various subscription terms, limits, criteria, service level agreements, and\/or other conditions, which can be recorded or reflected in a set of subscription parameters . The set of subscription parameters  can for instance be stored in the cloud store  hosted or accessed by a cloud management system , and\/or in other storage resources or locations.","In embodiments as shown, an administrator and\/or other user can operate a client , for instance a client located in or communicating with the user premise  to access the set of subscription parameters  and other information related to the consumption of resources in the set of host clouds  by the set of users . In aspects, the consumption of resources in the set of host clouds  and generation of related billing events and other subscription-related activities can be tracked and managed by an entitlement engine , which can be hosted in the cloud management system  and\/or in other locations, resources, or services. According to aspects, the entitlement engine  can communicate with a one or more resource providers , such as the vendors of software such as operating systems, applications, utilities, and\/or other programs, services, and\/or related resources. The one or more resource providers  can maintain part or all of the terms, conditions, limits, criteria, stipulations, and\/or other parameters of the subscription of the set of users  to one or more resources hosted or provisioned in the set of host clouds , and for instance reflected in the set of subscription parameters .","In embodiments, the relationship between the user premise  and the set of host clouds  can be configured to operate on a rollover or failover basis, for instance, to provide instances of virtual machines when the installed hardware and associated resources of the user premise  is insufficient to support immediate processing, throughput, and\/or other demands. In exemplary situations, the set of users  can for instance maintain or have an entitlement to 1000 instances or other limits or thresholds of an operating system operating or executing at the same time, when aggregated over all users in the set of users  and\/or the set of host clouds . When the executing workload, potentially including user premise , demands more instances than that resource limit, the cloud management system  and\/or other logic services can be configured to instantiate additional virtual machines in one or more of the set of host clouds  to satisfy those short-term demands for the set of users  on a collective basis.","In that scenario, and\/or in other scenarios where the set of users  operate virtual machines, virtual appliances, and\/or other entities in the set of host clouds  on an other than overflow or backup basis, each host cloud in the set of host clouds  can capture and store a set of local usage data . The set of local usage data  can record the consumption or use of resources in a local host cloud in the set of host clouds , such as the number of instances of software including operating systems and applications, processor resources, memory resources, communications resources, storage resources, and\/or other elements or resources. The set of local usage data  can include usage data for one, some, and\/or all of the set of users  operating virtual machines or otherwise consuming resources in each particular host cloud. The entitlement engine  can periodically receive the set of local usage data  and\/or updates to that information from one or more host clouds in the set of host clouds . The receipt of the set of local usage data  or any portion of the set of local usage data  can be performed in aspects on a pull or demand basis, where the entitlement engine  and\/or other logic can issue commands or instructions to one or more host clouds in the set of host clouds , and receive that data back from the interrogated cloud or clouds. In aspects, the set of local usage data  can be transmitted to the entitlement engine  on a push basis, for instance, on a predetermined, event-triggered, and\/or other basis initiated by one or more of the host clouds in set of host clouds , themselves. Other channels, schedules, and techniques for the collection of the set of local usage data  from any one or more of the set of host clouds  can be used.","After receipt of the set of local usage data , any portion or component of the set of local usage data , and\/or updates to the same, the entitlement engine  can collect and aggregate the set of local usage data  from the various host clouds and organize that data in a set of aggregate usage history data . The set of aggregate usage history data  can reflect recent and\/or accumulated usage consumption by the set of users  user in all of the set of host clouds , over comparatively short-term periods or intervals such as minutes, one or more hours, one day, a number of days, a week, and\/or other periods. In aspects, the entitlement engine  can collect the set of local usage data  regardless of whether each of those clouds is configured to communicate with each other or not. In aspects, the set of aggregate usage history data  can present to the entitlement engine  and\/or other logic the combined resource consumption by the set of users  across the user premise  and\/or all operating virtual machines or entities, on an hour-by-hour and\/or other relatively short-term basis.","According to aspects, the entitlement engine  can thereby identify comparatively short-term resource consumption by the virtual machines or other entities, sites or nodes operated by the set of users , and capture and track that consumption compared to the short-term limits or caps that may be contained in the set of subscription parameters  for that user. The entitlement engine  can therefore generate or determine a short-term consumption margin for each resource which the set of users  consume and\/or subscribe to in each cloud in the set of host clouds , indicating whether over the course of an hour or other period the consumption rates or values are over the subscription limit for a given resource, under the subscription limit, or at or nearly at the subscription limit for that resource. Both the over and under-consumption margins for each resource can be captured and calculated, from which the entitlement engine  can generate a set of short-term user-aggregated margins  representing the collective short-term consumption of that resource across the diverse host clouds in set of host clouds , resulting in an offset or aggregate consumption value. Deviations from short-term consumption caps, limits, service level agreements (SLAs), and\/or other criteria can therefore be combined, averaged, aggregated, and\/or otherwise \u201csmoothed out\u201d to more accurately and\/or timely reflect the consumption patterns of the set of users , as a whole on an aggregate basis. In aspects, the resource provider , the cloud operators or providers of the set of host clouds , and\/or other entities can thereby charge, bill, or otherwise adjust the subscription costs or other factors encoded in the billing record  sent to the set of users , for instance via an administrator or other users, so that their subscription obligations more closely track the actual consumption behavior demonstrated by the set of users . In aspects, the set of short-term user-aggregated margins  can for instance be used to establish short-term marginal subscription costs based on short-term deviations from any subscription consumption limits, which costs can then be combined over different time periods to further average or aggregate the deviations in resource consumption. In aspects, the detection of bursts and relaxations in resource consumption over relatively short-term periods can thereby allow both positive and negative offsets or margins in subscription costs, creating a more accurate assignment of subscription rates.","After detecting the set of short-term user-aggregated margins  for each resource of interest, the entitlement engine  can generate a billing record  reflecting that event, for purposes of notification to the user and collection of billing amounts or other responses. In aspects, the entitlement engine  can transmit or forward the billing record  to the resource provider , such as a software vendor, to produce and transmit to the user under agreed billing arrangements. In aspects, the entitlement engine  can transmit or forward the billing record  to one or more host clouds in set of host clouds , including those in which an over-limit resource usage or other event took place, to potentially transmit to the set of users  and\/or other recipient for similar purposes. In aspects, the resource provider  and one or more cloud operators or cloud providers of the set of host clouds  can maintain agreements or arrangements for the capture and forwarding of the billing record , and the collection of any billing amounts or credits paid by the user. In aspects, the resource provider  and the host cloud providers or operators can establish arrangements to share or distribute any overage payments or other payments or credits received from users between themselves. According to aspects, the monitoring and billing capture of short or long-term over-limit resource consumption can therefore be conducted, on a marginal offset or other basis, even in instances where each host cloud in set of host clouds  is not aware of subscription limits contained in the set of subscription parameters , and\/or the local usage data  of one or more of the set of host clouds  is not visible to other host clouds and\/or all groups or sub-groups of users within the set of users , and\/or to other participants in the cloud-based network.","In terms of data capture of the usage, subscription, billing and related information used to detect and record marginal resource consumption and\/or other events,  illustrates an aggregate usage history record  that can be used to store the set of aggregate usage history data  that can store and encode various data, attributes, criteria, and\/or other information used to track and manage the differential or marginal resource consumption in the set of host clouds  and\/or other host sites by the set of users . In aspects, the aggregate usage history record  can be encoded as a relational or other database, table, tree, file, object, and\/or other data store or data structure. In aspects as shown, the set of aggregate usage history data  encoded and stored in the aggregate usage history record  can include tables, entries, values, attributes, and\/or other information including set of short-term consumption data  reflecting the usage of one or more resources in the set of host clouds  by each user in the set of users  over one or more short-term consumption periods . In aspects, the one or more short-term consumption periods  can be or include a variety of periods or intervals, such as one-hour intervals (as shown), but can also be or include other periods or intervals, such as 1, 5, 10, 15, and\/or 30 minutes, 2 hours, 8 hours, 12 hours, one day or 24 hours, 3 days, one week, and\/or other time intervals or periods. In aspects, the one or more short-term consumption periods  can reflect a period or interval (or periods or intervals) that is\/are shorter than the period called for in the set of subscription parameters  as the basic or defined interval in terms of resource consumption limits or levels, service level agreements (SLAs), and\/or other subscription criteria or settings. In aspects, the short-term subscription period  can be defined to be equal to the period(s) or interval(s) defined by the set of subscription parameters . In aspects, the value, length, or short-term nature of the one or more short-term consumption periods  can be configured as dynamic, flexible, or configurable units, rather than defined as a strict number of minutes, hours, days, and\/or weeks or other units. In aspects, the short-term subscription period  can be set or configured by a user, such as the cloud provider(s) or cloud operator(s) of the set of host clouds , by the one or more resource providers , by the set of users  whose set of aggregate usage history data  is being track and administered, and\/or by other users or entities. In aspects, a record can be kept in the aggregate usage history record  recording, for each cloud in the set of host clouds  in which the set of users  subscribes and\/or uses or consumes resources, the short-term consumption data  indicating an amount, rate, or other metric of resource consumption over each of the one or more short-term consumption periods .","In aspects as shown, the aggregate usage history record  can likewise include, for each cloud in the set of host clouds  and each resource consumed or used in that cloud, the short-term consumption limit  for that user based on the set of subscription parameters  and\/or other information for each user in the set of users . In aspects, the entitlement engine  and\/or other logic can generate and store a short-term subscription margin  reflecting the deviation in terms of under-consumption or over-consumption of each resource for which each user in the set of users  has a short-term subscription limit . The short-term subscription margin  can thereby reflect, on a comparatively short-term basis, such as every 15 or 30 minutes, hour, 8 hour, one-day or other period, the marginal amount by which the consumption of a subscribed resource by the set of users  is fluctuating and possibly deviating from the short-term consumption limit . In aspects, the entitlement engine  and\/or other logic can similarly collect and sum or aggregate the short-term subscription margin  over each host cloud in the set of host clouds  in which the set of users  is using or consuming the subject resource to generate a set of short-term user-aggregated margins , representing the comparatively short-term or immediate net consumption of the resource over the set of users . In aspects, the set of short-term user-aggregated margins  can also be aggregated over two or more clouds of the set of host clouds . The set of short-term user-aggregated margins  can be calculated and stored for each hour and\/or other period represented by the one or more short-term consumption periods , for instance over the course of one hour, day, one week, one month, and\/or other period or interval.","In aspects as shown, the entitlement engine  and\/or other logic can further calculate and store an aggregate consumption total  over a defined period, such as a one-day or other period, summing or aggregating the set of short-term user-aggregated margins  for a resource for one user over that period. In aspects, the aggregate consumption total  can thereby encode the combined, net, averaged, and\/or otherwise aggregated effect of the various under and over-limit consumption events by the set of users  in the set of host clouds  over 12 hours, 24 hours, and\/or other predetermined interval. The entitlement engine  and\/or other logic can, in addition, also calculate and store a set of offset subscription costs  reflecting the costs, surcharges, credits, and\/or other adjustments for each hour and\/or other period in the one or more short-term consumption periods  for a particular resource across the set of users . A resource provider, cloud operator, and\/or other entity may be entitled, for instance, to an overage subscription fee or charge at a rate of $0.50 per instance for operating system (OS) instances over the short-term consumption limit  based on that usage, and\/or other adjustments or factors. In aspects, the set of offset subscription costs  can be computed at a fixed rate, and\/or at a dynamically adjusted rate, for instance based on time of time, total resource consumption, and\/or other parameters. The entitlement engine  and\/or other service or logic can also generate an aggregate offset subscription cost  which combines or sums the set of offset subscription costs  for each of the one or more short-term consumption periods  for a predetermined period, such as one day, one week, one month, and\/or other period or interval, across the set of users . The aggregate offset subscription cost , and other consumption variables and cost factors, can in aspects thereby more accurately correspond to the overall rate or absolute amount of resource consumption in the set of host clouds  by the set of users . In embodiments, the entitlement engine  and\/or other logic can in addition combine, sum, and\/or otherwise aggregate or net the aggregate offset subscription cost  for multiple individual resources whose consumption data in turn has been aggregated across multiple host clouds in the corresponding aggregate offset subscription cost , to generate a total offset subscription cost . In aspects, the total offset subscription cost  can encapsulate the net marginal resource usage by the set of users  against all short-term consumption limits  with associated costs or credits across all host clouds in the set of host clouds , all subscribed resources, and\/or all daily or other operative time periods constructed from the one or more short-term consumption periods .","According to aspects of the present teachings, and as for example shown in , the entitlement engine  and\/or other logic or service can operate to generate, manipulate and use sets of time periods such as short-term consumption periods  that can be fixed, predetermined, and\/or comprised of equal intervals, but can also generate and operate on a set of combined variable consumption periods . In embodiments as shown, the set of combined variable consumption periods  can be or include a variety of periods or intervals which do not include or are not based on fixed time intervals or lengths, but whose intervals or lengths can be made to be a function of or otherwise depend upon activity taking place in the consumption of resources of the set of host clouds  by the set of users , including short-term consumption data , short-term consumption margin , and\/or other variables or data.","More particularly, the set of combined variable consumption periods  can be or include time periods or intervals, that are dynamically scaled or adjusted depending on the rates of change and\/or other characteristics, of the consumption patterns displayed in the short-term consumption data  and\/or other information associated with the short-term or other consumption pattern or profile of the set of users . In aspects, the entitlement engine  can dynamically adjust the set of combined variable consumption periods  to, generally speaking, provide finer granularity in the time periods or intervals used to track consumption data, when the consumption data indicate that the patterns or trends in consumption by the set of users  are varying or trending in a more aggressive or fast-moving fashion. In such instances, the entitlement engine  and\/or other logic or service can create time periods or intervals in the set of combined variable consumption periods  of a relatively short duration, such as one-minute intervals, 30-second intervals, and\/or other time periods, durations, or intervals. By generating time periods or intervals having a relatively fine granularity, the entitlement engine  can expose high-frequency of quickly varying trends in the short-term consumption data  and\/or related information or parameters. Thus, for instance, the entitlement engine  can detect that the consumption of processor throughput and total memory allocation by the set of users  is peaking at 10% over the short-term consumption limit  for those resources, but only over 1 or 2 minutes intervals, which may or may not repeat themselves at longer time scales. In cases, the set of subscription parameters  and\/or other terms of service may require an overage fee for the consumption of those resources over limit, and\/or might require that the collective workload of the set of users  be temporarily rolled over to a backup host cloud or other backup service or support. If the entitlement engine  and\/or other logic or service is operating on a short-term consumption periods  which are 15 or 30 minutes in length, those or other resource consumption events may remain masked from the entitlement engine  and\/or other logic or service. Subscription costs, fees, overages, restrictions, offsets, and\/or other factors or effects may therefore remain unaccounted for, in cases where the short-term consumption periods  are not adapted, scaled, or varied in view of the short-term or instantaneous rates or patterns of resource consumption. According to aspects, the entitlement engine  can track an instantaneous consumption value  of the rate of consumption of any one or more resource by the set of users , and\/or the aggregate consumption value such as the set of short-term user-aggregated margins , to more accurately, fairly, and\/or timely reflect the resource consumption rate by the set of users . In aspects, the instantaneous consumption value  can be monitored by the entitlement engine  and\/or other logic or service to perform various management or supervisory functions, such as to issue an immediate command to restrict consumption of a selected resource or resources when the instantaneous consumption value  exceeds a predetermined burst threshold. Other actions can be taken based on the instantaneous consumption value , such as to generate a graphical, email, and\/or other alert to be delivered to an administrator or other user that can be acted upon to temporarily reduce the number of virtual machines and\/or other entities operated in the set of host clouds  by the set of users . Other management actions can be taken, as likewise described herein.",{"@attributes":{"id":"p-0051","num":"0050"},"figref":"FIG. 6","b":["104","116","140","144","154","142","106","104","130","132","136","136","130","138","128","102","142","130","134","106","130","104","140","146","148","144","154","142","104","154","104"]},{"@attributes":{"id":"p-0052","num":"0051"},"figref":"FIG. 7","b":["702","704","148","190","140","706","146","190","140","708","140","148","166","190","142","166","160","160","160","140","142","160"]},"In , the entitlement engine  and\/or other logic can sum the short-term subscription margin  across all users in the set of users  and\/or all host clouds for each period of the one or more short-term consumption periods  to generate the short-term user-aggregated subscription margin  for that respective period. For instance, in exemplary records as shown in , the number of operating system (OS) instances instantiated and\/or run by the set of users  in a given hour across the set of host clouds  can be totaled, so that instances of consumption offset instances of over-limit consumption, resulting in a net short-term cloud-aggregated subscription margin  for the one or more short-term consumption periods  across all users in set of users  for one or more all host clouds. In cases, the set of short-term user-aggregated margins  may reflect a net over-consumption (positive) value for that hour or other period (as illustratively shown), or can reflect an under-consumption (negative) value for that same period. A zero margin (at-limit) value can also be reflected.","In , the entitlement engine  and\/or other logic can generate the set of marginal consumption totals  reflecting the total combined short-term subscription margin  for each resource being tracked over a 24-hour, or other interval or period. For example, and as shown for instance in , the under-limit (e.g. recorded as a negative value) and over-limit (e.g. recorded as a positive value) margins or increments of consumption under or over the short-term consumption limit  for each one or more short-term consumption periods  can be summed or combined to determine the set of short-term user-aggregated margins  for each respective resource over a 24-hour period, again for one or more host clouds. In aspects, other periods or intervals other than a 24-hour period can be used to sum the values reflected in the set of short-term user-aggregated margins . The values reflected in the set of short-term user-aggregated margins  can thereby reflect the netting out of the under-consumption and over-consumption values for a given resource in two or more dimensions, namely over multiple users and\/or two or more host clouds, and over multiple instances of the one or more short-term consumption periods , averaging out consumption fluctuations by the set of users  in relation to the set of short-term consumption limits .","In , the entitlement engine  and\/or other logic can generate the set of offset subscription costs  for each of the one or more short-term consumption periods  corresponding to the set of short-term user-aggregated margins  for each subscribed resource. For instance, if the record for a given one or more short-term consumption periods  reflects the over-consumption of 20 operating system instances, the assigned overage cost of that usage may be, for instance, $0.50 times 20 instances, or $10.00 for that hour or other period. In , the entitlement engine  and\/or other logic can generate the aggregate offset subscription cost  for one 24-hour or other period, representing the combination of the set of offset subscription costs  over a multiple number of the one or more short-term consumption periods , such as the combination of 24 one-hour periods, or other intervals, periods, or multiples. In , the entitlement engine  and\/or other logic can generate the billing record  based on the aggregate offset subscription cost  for each resource being tracked and\/or metered for the set of users , and\/or based on other costs, adjustments, offsets, and\/or factors. In , the entitlement engine  and\/or other logic, entities, or resources, such as the operator of the set of host clouds , can transmit the billing record  to an administrator for the set of users  and\/or other user or other recipient. In , as understood by persons skilled in the art, processing can repeat, return to a prior processing point, jump to a further processing point, or end.",{"@attributes":{"id":"p-0056","num":"0055"},"figref":"FIG. 8","b":["190","190","142","802","804","148","190","140","190","806","146","140","190","808","148","140","160","810","140","140","190","160","190","192","190","190","142","146","190","190","190","190","140","192","160","160","192","160","192"]},"In , the entitlement engine  and\/or other logic or service can generate the set of short-term user-aggregated subscription margins  across one or more host cloud(s) in the set of host clouds  for the set of users  collectively for one or more resources over the one or more short-term consumption periods . In , the entitlement engine  and\/or other logic or service can access and\/or initialize the set of combined variable consumption periods  representing or encoding the co-extensive, overlapping, and\/or otherwise related or aggregated short-term consumption periods being used by some or all of the set of users , on a collective basis. In , the entitlement engine  and\/or other logic or service can determine the rate of change, derivative, and\/or other characteristics of the set of short-term user-aggregated subscription margins  for the set of users  on a combined basis, based on existing or initial values for the one or more short-term consumption periods . In , the entitlement engine  and\/or other logic or service can generate decreased and\/or otherwise smaller intervals for the one or more short-term consumption periods  for those periods in which the relative rate of change of the set of short-term user-aggregated subscription margins is increasing. In aspects, the introduction of reduced or shorter intervals or periods can permit the entitlement engine  and\/or other logic or service to identify changes or excursions in resource consumption that would be masked by the user of longer intervals or periods, over which spikes or other changes in resource consumption can subside. In , the entitlement engine  and\/or other logic or service can generate increased and\/or otherwise larger intervals for the one or more short-term consumption periods  for those periods in which the relative rate of change of the set of short-term user-aggregated subscription margins is decreasing. In aspects, the introduction of increased or longer intervals or periods can permit the entitlement engine  and\/or other logic or service to relax the resolution of the one or more short-term consumption periods  over time periods in which the pattern of resource consumption, is not demonstrating a high or rapid degree of change. In aspects, the user of larger or greater intervals in the one or more short-term consumption periods  can permit a reduced sampling and reporting rate, from the set of host clouds  and\/or other entities or resources.","In , the entitlement engine  and\/or other logic or service can generate one or more adjustments to the one or more short-term consumption periods , and\/or other management actions or commands, based on the relative rate of changes of the set of short-term user-aggregated subscription margins  and\/or other factors. For instance, the entitlement engine  and\/or other logic or service can increase, decrease, and\/or otherwise adjust the one or more short-term consumption periods  for one or more users, for example, to synchronize, align, equate, and\/or otherwise associate the intervals being used by users demonstrating common consumption patterns, such as common peak periods of others. In , the entitlement engine  and\/or other logic or service can generate, meter, otherwise track the instantaneous consumption rate  of one or more resources of the set of users , on a combined basis. In , the entitlement engine  and\/or other logic or service can generate an alert and\/or other command or action based on the instantaneous consumption rate  for one or more resources consumed by the set of users  on a combined basis, as appropriate. For instance an alert can be generated when the combined consumption rate approaches or reaches collective subscription limits. In , the entitlement engine  and\/or other logic or service can update, reset, and\/or otherwise configure or store one or more intervals or periods in one or more short-term consumption periods , the user Ids in the set of users , and\/or other periods, intervals, and\/or other parameters. In , as understood by persons skilled in the art, processing can repeat, return to a prior processing point, jump to a further processing point, or end.","The foregoing description is illustrative, and variations in configuration and implementation may occur to persons skilled in the art. For example, while embodiments have been described in which the cloud management system  for a particular cloud resides in a single server or platform, in embodiments the cloud management system  and associated logic can be distributed among multiple servers, services, or systems. Similarly, while embodiments have been described in which one group of servers within a set of resource servers  can provide one component to build a requested set of virtual machines, in embodiments, one group of resource servers can deliver multiple components to populate the requested set of instantiated virtual machines , and\/or other machines, entities, services, or resources. For further example, while embodiments have been described in which a user connects to or accesses the entitlement engine  via one client , in embodiments, multiple clients, portals, services, and\/or other access points to the entitlement engine  can be used. Likewise, while embodiments have been described in which one entitlement engine  operates to manage the resource consumption, billing, and\/or other activities of one or more users in a set of host clouds , in embodiments, multiple deployment engines and\/or other logic or services can perform the same or similar logic to manage deployment options. Other resources described as singular or integrated can in embodiments be plural or distributed, and resources described as multiple or distributed can in embodiments be combined. The scope of the invention is accordingly intended to be limited only by the following claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"DESCRIPTION OF DRAWINGS","p":[{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 8"}]},"DETDESC":[{},{}]}
