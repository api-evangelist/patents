---
title: Systems and methods for embedding data by dimensional compression and expansion
abstract: The systems and methods of this invention watermark an original data file using dimensional compression and expansion. The original data file extends along a given dimension and has portions that extend along that given dimension. The information is embedded into the data file by selectively dimensionally compressing or expanding a size of each of some or all of the portions along the given dimension, which can be space or time. The portions of the data file are selectively dimensionally expanded or compressed according to a given encoding scheme. This encoding scheme can use the kind of modification, the relationships between the type of modification between adjacent portions, or the duration or degree of compression or expansion to store a portion of the embedded information. The portions of the embedded information can be individual bits of binary or trinary information, or can be a portion of analog information.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=06999598&OS=06999598&RS=06999598
owner: Fuji Xerox Co., Ltd.
number: 06999598
owner_city: Tokyo
owner_country: JP
publication_date: 20020325
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"p":["This non-provisional application claims benefit of U.S. Provisional Application No. 60\/277,942 filed Mar. 23, 2001.","1. Field of Invention","This invention generally relates to systems and methods for hiding information in audio and image files.","2. Description of Related Art","With the advent of digitizing images, digital image distribution and digital video availability, \u201chiding\u201d information in digital images for purposes such as digital rights management and copyright protection has become a substantial issue for image publishers and authors. The process of imbedding information in a digital image is known as \u201cwatermarking\u201d. Such watermarks must be secure, robust to intentional corruption and to data compression processing, not unreasonably complex to embed and extract, and compatible and interoperable with conventional image processing systems. The watermark is generally invisible to a viewer. However, in some applications, it is desirable to produce a visible watermark that can be removed by an authorized image decoder and that can not be removed by an unauthorized decoder.","Although watermarks are used in most cases with respect to digital images, watermarking techniques can also be applied to audio files. Like conventional image watermarking techniques, conventional audio watermarking techniques can be classified into data-domain methods and frequency-domain methods. Data-domain methods work by modifying the actual audio data, such as modulating the least significant bit of a PCM representation or hiding data in compressed-domain representations. Frequency-domain methods work by modifying the spectral content of a signal, for example, by removing a particular frequency component, or by adding information disguised in low-amplitude noise.","Data-domain watermarking techniques include compressed domain watermarking, bit dithering, amplitude modulation and echo hiding. In compressed-domain watermarking, only the compressed representation of the data is watermarked, and is thus not persistent. When the data is uncompressed, the watermark is not available. In least-significant-bit (LSB) modulation information is encoded by modulating the least significant bits of the time-domain or data-compressed representation. While this potentially has a large data rate, it is not robust to data compression or analog transmission and reproduction, and introduces noise into the signal.","In amplitude modulation, signal peaks are modified to fall within predetermined amplitude bands. This technique introduces modulation distortion, and is not robust to amplitude compression, which is widely used in analog and digital telephony, broadcasting, sound reinforcement, and noise reduction. In echo hiding, discrete copies of the original signal are mixed in with the original signal. The echo time is short enough and the copy amplitude is low enough to be inaudible, yet the echo can be detected via autocorrelation. This method introduces spectral distortion because of phase cancellation at frequencies whose periods are multiples of the echo delay. Also, this technique may not be robust under data compression, as imperceptible echoes are likely to be discarded by perceptual coding.","Frequency-domain watermarking techniques include phase coding, frequency band modification, and spread spectrum techniques. Phase coding relies on the human auditory system's relative insensitivity to phase. The signal is windowed, as in a spectrogram, and the magnitude and phase of each window is computed. An artificial absolute phase signal, which encodes the watermark, is introduced into the first window. The phase information for subsequent frames is iteratively computed from the phase differences from each frame and the absolute phase. The resulting phases are combined with the original magnitudes to construct the watermarked signal. This method introduces phase dispersion into the signal, and is probably not robust under data compression.","In frequency band modification, information is encoded by removing or enhancing particular spectral bands, removing a narrow spectral band using a notch filter, or encoded into frequency band differences. This method introduces spectral distortion, may not be robust to perceptual encoding, and does not work unless the altered frequency components are well-represented in the source audio.","In spread spectrum techniques, a signal carrying the watermark information is modulated into wideband noise by multiplication with a pseudorandom sequence. Because the modulation function is known, or can be regenerated, the watermark signal can be demodulated. This technique adds noise to the watermarked signal, and the low amplitude of the spread spectrum signal means it may be likely to be discarded under perceptual coding. In addition, the sampling frequency is commonly used as the modulation carrier frequency to avoid having to synchronize the receiver. In this case, re-sampling or analog transmission is likely to destroy the synchronization, and hence the watermark.","Many schemes, particularly modulation and frequency domain approaches, are not robust to audio data compression. This is especially problematic, as the frequency modifications must be perceptually inaudible in the watermarked audio data. Otherwise, the watermark is not good. However, such conventional frequency modulations are precisely the information that is lost or altered when perceptual data compression schemes such as MP3 are used.","There has also been considerable work in watermarking images. Most approaches are quite similar to those described above. For example, spread spectrum techniques can be used for images as well as audio. One relevant conventional approach for watermarking text modulates white space between words and sentences. This method needs to detect word boundaries, and is not applicable to common images other than scanned text. The Glyph technology developed at Xerox PARC encodes information into digital hardcopy using tiny marks that can be modulated to encode information in addition to gray shades. U.S. Pat. No. 5,946,103 to Curry discloses a method that uses glyphs to digitally watermark a printed document. However, glyph technology typically generates images with noticeable structures. This makes this method suitable only for specific applications. The \u201cPatchwork\u201d watermarking system alters the intensity of random pairs of points in the image. A method called texture block coding encodes information by copying areas of random texture. These areas can be found by autocorrelation.","As outlined above, conventional information embedding, or watermarking, techniques are either not robust in view of modern data compression and transmission methods, are limited in their use to specific types of data, and\/or are unable to embed information sufficiently densely and\/or robustly while remaining imperceptable.","This invention provides systems and methods that hide information in a data file.","This invention provides systems and methods that embed information in a data file by selectively dimensionally expanding and dimensionally compressing portions of the data file.","This invention further provides systems and methods that selectively dimensionally expand and dimensionally compress the portions of the data file along a selected dimension of the data.","This invention additionally provides systems and methods that embed information in time-varying data by selectively time-expanding and time-compressing portions of the time-varying data along a time dimension of the data","This invention additionally provides systems and methods that embed information in spatially-varying data by selectively spatially-expanding and spatially-compressing portions of the spatially-varying data along at least one spatial dimension.","This invention separately provides systems and methods for comparing the modified data file containing embedded information with an original copy of the data file to extract the embedded data.","This invention separately provides systems and methods that indicate the location and duration of dimensional compression and dimensional expansion of the dimensionally compressed and dimensionally expanded portions of the modified data file containing the embedded information.","This invention separately provides systems and methods that allow the embedded information to be extracted from the modified data file containing the embedded information without reference to an original copy of the data file.","This invention additionally provides systems and methods for modifying a data file to have a tempo corresponding to a predetermined function prior to modifying the modified data file to embed the information by selectively dimensionally compressing and dimensionally expanding portions of the modified data file.","This invention further provides systems and methods for extracting embedded information from a data file containing embedded information by determining differences between a predicted tempo and an actual tempo in the data file.","In various exemplary embodiments according to this invention, information is embedded into an original data file. The original data file extends along a given dimension and can be divided, or is naturally separated, into portions that extend along that given dimension. The information is embedded into the data file by selectively dimensionally compressing or dimensionally expanding a size of each of some or all of the portions along the given dimension. In various exemplary embodiments, the given dimension is space or time.","In various exemplary embodiments, the portions of the data file are selectively dimensionally expanded or dimensionally compressed according to a given encoding scheme. This encoding scheme can use the kind of modification, either dimensional compression or dimensional expansion, to store a portion of the embedded information. Alternatively, this encoding scheme can use the relationships between the type of modification, either dimensional compression or dimensional expansion, between adjacent portions to store a portion of the embedded information. In various other exemplary embodiments, the duration or degree of dimensional compression or dimensional expansion is used to store a portion of the embedded information. The portions of the embedded information can be individual bits of binary information or trinary or other multi-valued discrete information, or can be a portion of analog information.","In various exemplary embodiments, the embedded information is extracted from the modified data file by comparing the modified data file, either directly or indirectly, with a copy of the original, unmodified data file. Based on the direct or indirect comparison, a map representing the pattern of dimensionally compressed and dimensionally expanded portions can be determined. Based on the determined map and the particular encoding scheme used, the pattern of dimensionally compressed and dimensionally expanded portions can be converted back into the embedded analog or digital information.","In various exemplary embodiments, before the information is embedded, the data file is first modified so that a tempo of the portions of the data file along the given dimension corresponds to a given function. The portions of the modified data file are then further modified, by selectively dimensionally compressing or dimensionally expanding some of the portions, to embed the information. The embedded information can then be extracted by analyzing the modified data file to predict the expected tempo based on the given function. The difference between the expected tempo and the actual tempo for a particular portion defines the type and degree of modification of that portion used to embed the information. Thus, that difference defines the pattern of dimensionally compressed and dimensionally expanded portions, which can then be converted back into the embedded analog or digital information based on the encoding scheme.","In various exemplary embodiments of the systems and methods according to this invention, for most audio files, the embedded data or watermark would be virtually undetectable, because of the human sensory system's insensitivity to extremely low frequency modulations. At the same time, the embedded data carrying modulations are exceptionally robust to transmission and data compression.","These and other features and advantages of this invention are described in or apparent from the following detailed description of the apparatus\/systems and methods according to this invention.","The various exemplary embodiments of the systems and methods according to this invention employ a watermarking technique that selectively dimensionally compress or dimensionally expand, by an imperceivable amount, portions of a data file extending along a given dimension to embed data into that data file. In various exemplary embodiments, the underlying time-base of an audio signal or a spatial offset of an image is dimensionally compressed or dimensionally expanded by an imperceivable amount.","The systems and methods according to this invention are directed to embedded and extracting watermarks and other digital data from watermarked audio files and\/or watermarked images using \u201ctime-based, or, analogously, \u201cspatially-based\u201d, embedding and extracting techniques. It should be appreciated that, as discussed herein, these time-based techniques and these spatially-based techniques according to this invention are alternative ways of expressing the same central conception, i.e., that data, such as watermark, can be digitally encoded into audio files and into images by manipulating the \u201ctime\u201d or \u201cspatial\u201d relationship between elements of the audio files and\/or the images. Accordingly, as will become clearer below, these time-based techniques and the spatially-based techniques according to this invention are merely different aspects of the same general conception.",{"@attributes":{"id":"p-0051","num":"0050"},"figref":["FIG. 1","FIG. 1","FIG. 1"],"b":["10","11","15","12","13","20","20","21","25","21","25","11","15","10"]},"As shown in , the extent of the portion  along the dimension x has been dimensionally compressed relative to the extent of the corresponding portion  of the data set . In contrast, the extent of the portion  along the dimension x has been dimensionally expanded relative to the extent of the corresponding portion  of the first data set . Finally, the extents of the remaining portions ,  and  along the dimension x remain unchanged relative to the extents of the corresponding portions ,  and , respectively. Accordingly, if the data set  defines a reference data set, the data set  defines a watermarked data set that contains some embedded information. The information is embedded according to the relative relationship between the original extents along the dimension x of the portions \u2013 relative to the extents along the dimension x of the corresponding portions \u2013.","While recorded audio information exist in a timeless state, that recorded audio data defines a time-varying electrical signal representing time-varying pressure waves in a fluid medium. As a result, the information stored in audio data file is best represented by displaying the audio data along a time dimension. Accordingly, for audio data, the dimension x shown in  can correspond to a time dimension. Thus, to embed data into the audio data file in the manner shown in , portions of the original audio data file are time-compressed or time-expanded to create the watermarked audio file. Of course, it should be appreciated that audio data can be represented along other dimensions. Where appropriate, the systems and methods according to the invention are equally usable with such dimensions and representations.","In contrast, still image data has no time dimension, in the same way that audio data has no spatial dimension. Rather, still image data defines a spatially-varying set of information. Similarly, video data has both time and spatial dimensions. Accordingly, for still image data, the dimension x shown in  defines one of the 1, 2 or 3 spatial dimensions in which the image data can extend. For video data, the dimension x can be one of two or more spatial dimensions or the time dimension. Thus, for still or video image data, portions of the original data set, corresponding to the data set , can be spatially-compressed and spatially-expanded to create the watermarked data set corresponding to the data set  shown in .","Of course, it should be appreciated that the dimension x can be any dimension in which an information-carrying-signal will vary to convey a first level information, such that portions of that information that extend in that dimension can be selectively dimensionally compressed and dimensionally expanded to contain a second level of information.","As outlined above,  illustrates how a data set extending in an arbitrary dimension x, such as the data set , can be modified to embed additional information by selectively dimensionally expanding and dimensionally compressing portions of the data set  to create the watermarked data set . However, without some way to readily extract that embedded information, the technique illustrated in  is essentially useless. Accordingly,  illustrate one exemplary embodiment of a technique for extracting the embedded information from the watermarked data set. In particular,  illustrates how to extract the embedded data by comparing the watermarked data set  to the reference, or original, data set . In particular, the plot shown in  is defined as a \u201ctempo map\u201d. The tempo map shown in  illustrates the relative positioning of each portion of the reference data set  relative to the corresponding positions of the watermarked data set  along the dimension x.","As shown in , for the reference portions ,  and  and the corresponding portions ,  and  of the watermarked data set, the position along the dimension x of each element of these portions has the same relative change in position. Thus, the slope of the line plotting the relative positions of these portions along the dimension x is \u201c1\u201d. This is true even for the corresponding portions  and . Thus, even though the portions  and  are offset relative to each other, as shown in , they have the same relative change in position along the dimension x from the beginning edge of the portions  and  to the ending edge of the portions  and . However, because the absolute positions of the portions  and  are offset relative to each other along the dimension x, the portions of the tempo map for these portions  and , while having a slope of 1, is offset from a line having a slope of 1 and passing through the origin.","As a result, when the reference data set  is plotted along the X-axis, and the watermarked data set  is plotted along the Y-axis, for portions of the watermarked data set  which are dimensionally compressed relative to the reference data set , such as the portion , the corresponding portions of the tempo map have a slope less than 1. The particular slope of any such portion of the tempo map will depend upon the degree of dimensional compression. Likewise, for portions of the watermarked data set  that are dimensionally expanded relative to the watermark data set, such as the portion , the corresponding portions of the tempo map have a slope greater than 1. Again, the exact slope for any such corresponding portion of the tempo map will depend upon the degree of dimensional expansion.","Of course, it should be appreciated that binary, and even analog, information can be extracted from the watermark data set based on the shape of the tempo map and any known encoding scheme. For example, a simple coding scheme can define any portion having a slope less than 1 as a \u201c0\u201d, while defining any portion having a slope greater than 1 as a \u201c1\u201d. Alternatively, another scheme could define any portion having a slope less than 1 as a \u201c\u22121\u201d, any portion having a slope greater than 1 as a \u201c+1\u201d, and any portion having a slope equal to 1 as a \u201c0\u201d. In contrast, yet another scheme could define a changing slope from 1 to either less than 1 or greater than 1 as a \u201c0\u201d or a \u201c1\u201d, respectively, while ignoring changes in slope from other than 1 to 1.","It should additionally be appreciated that binary data can be encoded not only in the change in slope, but also in the duration of the modified portion. Furthermore, it should be appreciated that analog data could be embedded based on the degree of dimensional compression or dimensional expansion. As a result, the slope could represent an analog value, rather than a binary, trinary or other multi-valued discrete value. It should be appreciated that many different patterns of dimensional compression and dimensional expansion are available to encode information. Thus, the start and end locations of the altered regions, as well as the degree of dimensional compression and dimensional expansion, can be use to embed information into the watermarked data set relative to the reference data set.","It should be appreciated that, in various exemplary embodiments, for a particular watermarked data set, the total amount of dimensional compression and the total amount of dimensional expansion in the watermarked data file is the same, so that the size of watermarked data set is the same size as the size of the reference data set. While this is not strictly necessary, this is advantageous in that it makes it more difficult to discern that a particular data set has been watermarked and that different copies of the same data set may have different watermarks, and makes it more difficult to identified the particular watermark carried by any particular watermarked data set.","The inventors have experimentally determine that satisfactory results can be obtain with dimensional compression\/expansion ratios on the order of 1 to 2%. It should be appreciated that the dimensional compression\/expansion ratios can be increase beyond this level. However, increasing the dimensional compression\/expansion ratio could possibly introduce detectable artifacts into the watermarked data set. That is, one advantage of using relatively low dimensional compression\/expansion ratios is that the resulting compression and\/or expansion of various one of the portions of the watermark data set cannot be perceive by the human sensory system.","In various exemplary embodiments, an encoding rate on the order of 8 bps (bits per second) is feasible in modifying audio data files. In general, the encoding rate is limited only by how objectionable the modification along the particular dimension x becomes. For many application, such as speech, dimensional compression\/expansion ratios up to 5 to 10% may be useable, leading to a corresponding increase in the encoding rate.","In various exemplary embodiments, the tempo map shown in  is created by locating the instantaneous best alignment between the reference data set  and the watermarked data set . In various exemplary embodiments, this instantaneous best alignment is located using dynamic programming. In particular, in various exemplary embodiments, a distance between one portion of the reference data set and one portion of the watermark data set is defined using any number of different metrics depending on the particular types of signals and particular dimension on which the data set extends. This distance is used in a conventional dynamic programming technique to find the best alignment between the watermarked data set  and the reference data set . This best fit serves as an estimate of the x-dimension-base modification of the reference data set used to obtain the watermarked data set.","In general, as outlined above, any deviations from linear distances are due to dimensional expansion and\/or compression of that portion of the watermarked data set . The deviations can be detected and used in creating the tempo map shown in . In general, when the difference from the linear map is plotted as shown in , dimensionally compressed regions would show up as having slopes between 0 and 1, while expanded regions will show up as areas having slopes greater than 1. As outlined above, regions of \u201cnormal\u201d tempo will have a slope of 1, but maybe offset from the line having a slope of 1 and extending through the origin. This offset arises due to the cumulative offset along the x dimension of the previous dimensionally compressed regions and\/or the previous dimensionally expanded regions. It should also be appreciated that, in , the dimensional compression and dimensional expansion ratios are shown much greater than would normally be used in practice. However, a realistic dimensional compression factor, being so close to unity, would be difficult to see at this scale.","In various exemplary embodiments, when audio data is used, spectrograms of the reference audio data set and the watermark audio data set are produced. In various exemplary embodiment, the spectrograms are produced using conventional techniques. It should be appreciated that spectrograms are used, rather than straight waveform comparisons, because the spectral content of audio data is, to a first order approximation, invariant under data compression and analog transmission. In contrast, the time-domain waveforms of the audio data may differ markedly after data compression and\/or analog transformation. In various experiments performed by the inventors, the Euclidean distance of the mid-frequency components was used as the metric to measure the difference between spectrogram windows used to analyze the audio data.","It should be appreciated that, for the watermarking, or, more generally, the data-embedding, technique described above to work, the data values of the data to be watermarked must vary to a distinct or significant degree along the dimension x. Otherwise, it becomes impossible to generate the tempo map shown in  by identifying those portions of the watermark data that have been compressed or expanded relative to the reference data. For example, for audio data, the audio data must have significant spectral change for the tempo map shown in  to be generatable. Thus, audio without significant spectral change, such as silence or a test tone, cannot be used as a reference data set.","In particular, because this type of audio data does not have significant spectral change, the dimensionally compression and dimensionally expansion of various portions of the audio data will not significantly alter the data. As a result, the location where the watermarked data has been dimensionally compressed or dimensionally expanded relative to the reference data cannot be identified. However, it should be appreciated that this is not a major requirement for most data sets over most domains, as any data set of interest will generally have significant variability along the dimension x of interest. For example, most audio data of interest, such as music, speech, soundtrack audio and the like, will have sufficient spectral change so that the alignment between the reference data and the watermarked data can be identified.","It should be appreciated that the data set can be analyze to determine if there is sufficient variability in a particular portion of the data set to determine if the data modification would be detectable. For example, a simple measure of the frame-to-frame spectral differences in an audio data set would give a estimate of the watermark detectability for that audio data set. Based on the analysis, regions of low spectral difference in an audio data set can be ignored in the watermarking process. Similarly, regions of low variability in an arbitrary data set along the dimension x of interest can be ignore in the same way. Because the dynamic programming watermark recovery or extraction is based on linear matching, these regions will not disrupt the process of extracting the watermark data.",{"@attributes":{"id":"p-0070","num":"0069"},"figref":["FIGS. 1 and 2","FIGS. 1 and 2"]},"In particular, with respect to audio data, the systems and methods of this invention have several significant advantages over previous approaches. One significant advantage is that, for most audio data, the alterations to the audio data, created when dimensionally compressing and dimensionally expanding the audio data along the time dimension, are generally virtually undetectable. This is primarily to due to the insensitivity of the human auditory system to extremely low frequency modulations.","At the same time, the time compressions and expansions used to embed the watermark data, or other data, into the audio data are extremely robust to transmission and data compression. This occurs because current digital audio technology has a time precision on the order of several micro-second per hour. Most audio data, such as speech or music, produced by a human has sufficient natural variation that the artificial tempo changes introduced by the data embedding or watermarking systems and methods according to this invention are generally not easily detectable.","Moreover, unintended tempo changes, such as those inherent in analog recording and reproduction equipment, generally will not interfere with the embedded data. For example, a straight tempo change, caused, for example, by an inaccurate playback speed, generally will not effect the embedded data. Furthermore, analog recording imperfections, such as wow and flutter, occur on a time scale that is significantly shorter than the tempo changes used to embed the embedded data according to this invention. Accordingly, these analog recording imperfections will generally average out, leaving the embedded data unaffected.","It should be appreciated, however, that it may be possible for a listener to discern the artificial tempo changes induced by these data embedding systems and methods for strictly rhythmic music produced by a computer sequencer or other mechanical device. In this case, fine analysis of the beat-to-beat spacing might reveal the tempo modifications. However, such tempo modifications will generally still remain imperceptible to the average listener.","It should be also be appreciated that the embedded data may be partially obscured or degraded by intentionally changing the time scale of the audio regions. The watermark may also be possibly obscured or degraded by superimposing another tempo-base watermark over a previously embedded tempo-base watermark. However, this would not remove the previous watermark, unless, of course, the second tempo-base watermark happens to be the exact inverse of the first tempo-based watermark. That, of course, requires access to the original unmodified audio data set.","When the data embedded into the audio data is a digital signature, this such an alteration would invalidate both the watermark and the digital signature. Thus, this alteration will be easily detectable. It should be appreciated that few, if any, other watermarking schemes are robust under the application of multiple watermarks.","It should be appreciated that this same time-based expansion and time-based compression watermarking, or more generally, data-embedding, technique can also be used with other types of time-varying data, such as analog and digital video data. For video data, like audio data, the data would be embedded into the video signal by selectively time-compressing and time-expanding portions of the video data.","Similarly, these techniques can be applied to still, i.e., time-invariant, image data. In this case, rather than using time-based compression and expansion, in such still images, the data is embedded by using spatially-based compression and expansion. That is, areas of the image are selectively spatially-compressed and spatially-expanded by an amount that is generally imperceptible to the human visual system. For example, well-known digital resampling techniques can stretch or compress selected portions of an image by small amounts. Alternatively, mechanical or optical techniques can be used to selectively expand or compress selected regions of the image. Such mechanical or optical techniques include varying the speed of a drum or platen scanner, varying the paper or print head speed in a printer, or varying the speed of a cylindrical object lens in a photocopier with respect to a drum.","It should further be appreciated that, unlike time-varying data, spatially-varying data often varies in two, or even three, dimensions. As such, it is possible to selectively compress and expand the image data along two or three axes.","As indicated above, the systems and methods according to this invention are particularly useful for embedding data into audio data. Time scale modification (TSM) techniques for scaling of the pitch of an audio signal are well known and in common use. These techniques can be used equally well to change the length of an audio recording without introducing objectionable pitch modifications that would otherwise be introduced by simply changing the rate. Pitch scaling is often applied when playing back an audio recording at a higher rate. This is often done to audition an audio recording in less time. It should be appreciated that simple interpolation or resealing should not be used with this systems and methods of this if the dimensional compression and expansion is to be imperceivable. That is, for even small ratios, such simple interpolation causes obvious pitch changes.","A common TSM time-scaling technique is based on the short-time Fourier transform. However, other methods, such as the phase vocorder method, the time domain harmonic scaling method, and the pitch-synchronous overlap add (PSOLA) method, are also widely used. It should be appreciated that any known or later-developed time-scaling method, including those outlined above, can be used to compress and expand portions of an audio data set to embed data in, or watermark, that audio data set. It should be appreciated that, in general, the most useful methods are those that can compress or expand by ratios that are very close to 1 while also introducing few audible artifacts.",{"@attributes":{"id":"p-0082","num":"0081"},"figref":["FIG. 3","FIG. 3"],"b":["100","110","120","130","140"]},"In step S, portions of the original data input in step S are selectively dimensionally compressed and dimensionally expanded based on the tempo map f(q) to generate watermarked data in which the data to be embedded input in step S has been embedded. Next, in step S, the watermarked data is output. Then, in step S, operation of the method ends.","It should be appreciated that, in step S, the watermarked data can be output in a variety of ways. For example, if the watermarked data is audio data, the watermarked data can be stored onto a digital audio tape or a standard analog cassette tape. Alternatively, the audio file can be digitized, if it is not already in digital form, and stored on a compact disk, a CD-ROM, a DVD, or any other volatile or nonvolatile digital memory device. Additionally, the watermarked data file can be data compressed using any known or later developed data compression technique appropriate for audio data files and stored on one of the previously discussed memory devices. It should also be appreciated that, whether data compressed or not, the watermarked audio data can be transmitted to a remotely located computer or storage device for storage and\/or playback over any known or later playback device or distributed network, such as the Internet, a local area network, a wide area network, a storage area network, an intranet, an extranet, a public switched telephone network and\/or a cable television network.",{"@attributes":{"id":"p-0085","num":"0084"},"figref":["FIG. 4","FIG. 4"],"b":["200","210","220","230","240"]},"In step S, the alignment data from the watermarked data file is aligned with the alignment data from the original data file. Next, in step S, based on the determined alignments between the alignment data for the watermarked data and the alignment data for the original data, a tempo map is generated. Then, in step S, the tempo map is converted or decoded to obtain the embedded data that was embedded in the watermarked data. Operation then continues to step S.","In step S, the embedded data is output to one or more data sinks. Then, in step S, operation of the method ends.","It should be appreciated that step S may not be needed, depending on the particular type of data in which the embedded data has been embedded. For example, image data that has been spatially compressed and\/or spatially expanded can be aligned directly in step S to generate the tempo map in step S. Thus, in this case, step S would be omitted and step S would align the watermarked data directly with the original data rather than aligning the alignment data generated from each of the watermarked data and the original data.","In contrast, as outlined above for audio data, step S would be performed to generate the spectrogram data as the alignment data. Then, in step S, the spectrogram data would be aligned to generate the tempo map in step S.","It should also be appreciated that, in step S, the embedded data extracted from the watermarked data can be output by displaying or printing it. The embedded data can also be output by storing the extracted data or transmitting the extracted data over a distributed network, such as those as discussed above with respect to , to transmit the extracted data to a separate site for display, storage or further transmission.",{"@attributes":{"id":"p-0091","num":"0090"},"figref":["FIG. 5","FIG. 5","FIG. 5"],"b":["100","100","110","120","130","140","150","160","170","172","110","300","310","110","400","410"]},"Each of the links ,  and  can be implemented using any known or later developed device or system for connecting the one or more user input devices , the data source  and the data sink , respectively, to the watermark embedding system , including a direct cable connection, a connection over a wide area network, a local area network or a storage area network, a connection over an intranet, a connection over the Internet, or a connection over any other distributed processing network or system. In general, each of the links ,  and  can be any known or later developed connection system or structure usable to connect the one or more user input devices , the data source  and the data sink , respectively, to the watermark embedding system .","The input\/output interface  inputs data from the data source  and\/or the one or more user input devices  and outputs data to the data sink . The input output interface  also outputs data to one or more of the controller , the memory  and\/or the tempo map generating circuit or routine  and receives data from one or more of the controller , the memory  and\/or the watermarked data generating circuit or routine .","The memory  includes one or more of an original data portion , an embedded data portion , a tempo map portion , and a watermarked data portion . The original data portion  stores the original data into which the embedded data stored in the embedded data portion  will be embedded to form the watermarked data. The embedded data portion  stores the embedded data to be embedded into the original data. The tempo map portion  stores the tempo map generated by the tempo map generating circuit or routine . The watermarked data portion  stores the watermarked data generated by the watermarked data generating circuit or routine . The memory can also store one or more control routines used by the controller  to operate the watermark embedding system .","The memory  can be implemented using any appropriate combination of alterable, volatile or non-volatile memory or non-alterable, or fixed, memory. The alterable memory, whether volatile or non-volatile, can be implemented using any one or more of static or dynamic RAM, a floppy disk and disk drive, a writable or re-rewriteable optical disk and disk drive, a hard drive, flash memory or the like. Similarly, the non-alterable or fixed memory can be implemented using any one or more of ROM, PROM, EPROM, EEPROM, an optical ROM disk, such as a CD-ROM or DVD-ROM disk, and disk drive or the like.","It should be understood that each of the circuits or routines shown in  can be implemented as portions of a suitably programmed general purpose computer. Alternatively, each of the circuits or routines shown in  can be implemented as physically distinct hardware circuits within an ASIC, or using a FPGA, a PDL, a PLA or a PAL, a digital signal processor, or using discrete logic elements or discrete circuit elements. The particular form each of the circuits or routines shown in  will take is a design choice and will be obvious and predicable to those skilled in the art.","In operation, the data source  outputs one or both of a set of original data and\/or a set of embedded data over the link  to the input output interface . Similarly, the user input device  can be used to input one or more of the set of original data and\/or the embedded data, if desired, over the link  to the input output interface . Depending on which data is input, the input output interface  will store the received set of original data in the original data portion  and\/or the embedded data in the embedded data portion . However, it should be appreciated that either or both of these sets of data could have been previously input into the watermark embedding system  at some earlier time.","Then, the tempo map generating circuit or routine , under control of the controller , inputs the embedded data from the embedded data portion  and generates a tempo map that can be used to dimensionally compress and\/or dimensionally expand portions of the original data to embed the embedded data into the original data. It should be appreciated that the tempo map generating circuit or routine  can use any known or later-developed encoding scheme, including, but not limited to, those disclosed in this application, to convert the data to be embedded into a tempo map that is usable to modify the original data into the watermarked data. The tempo map generating circuit or routine  then outputs the generated tempo map, under control of the controller , either to the tempo map portion  of the memory  or directly to the watermarked data generating circuit or routine .","The watermarked data generating circuit or routine , under control of the controller , inputs the tempo map, from either the tempo map portion  or directly from the tempo map generating circuit or routine . The watermarked data generating circuit or routine , under control of the controller , also inputs the original data stored in the original data portion . The watermarked data generating circuit or routine  then modifies the original data, by selectively dimensionally compressing and\/or dimensionally expanding the original data along a defined dimension based on the tempo map, to embed the embedded data into the original data to form the watermarked data. The watermarked data generating circuit or routine  then outputs the watermarked data and, under control of the controller , either stores it in the watermarked data portion  or provides it directly to the input\/output interface .","After the watermarked data is generated by the watermarked data generating circuit or routine , the watermarked data can be stored indefinitely in the watermarked data portion  of the memory . At such time as the watermarked data is needed outside of the watermarked embedding system , the input\/output interface , under control of the controller , either inputs the watermarked data directly from the watermarked data generating circuit or routine  or the watermarked data portion  and outputs the watermarked data over the link  to the data sink .",{"@attributes":{"id":"p-0101","num":"0100"},"figref":["FIG. 6","FIG. 6"],"b":["200","200","210","220","230","240","250","260","270","280"]},"As shown in , the input\/output interface  is connected to the data source  over a link , the data sink  over a link  and one or more user input devices  over one or more links . As discussed above, each of the data source  and the data sink  can take any of the forms outlined above with respect .","Each of the links ,  and  can be implemented using any known or later developed device or system for connecting the one or more user input devices , the data source  and the data sink , respectively, to the watermark extracting system , including a direct cable connection, a connection over a wide area network, a local area network or a storage area network, a connection over an intranet, a connection over the Internet, or a connection over any other distributed processing network or system, any of which could include one or more wireless portions. In general, each of the links ,  and  can be any known or later developed connection system or structure usable to connect the one or more user input devices , the data source  and the data sink , respectively, to the watermark extracting system .","The memory  includes a watermarked data portion , an original data portion , an analysis data portion , a tempo map portion  and an embedded data portion . The memory  can also store one or more control programs or routines usable by the controller  to control the watermark extracting system . The watermarked data portion  stores watermarked data containing embedded data. The original data portion  stores a copy of the original data used to generate the watermarked data stored in the watermarked data portion . The analysis data portion , if needed, stores the analysis data generated by the analysis data generating circuit or routine . The tempo map portion  stores the tempo map generated by the tempo map generating circuit or routine . The embedded data  stores the embedded data decoded by the embedded data decoding circuit or routine  from the tempo map stored in the tempo map portion .","The memory  can be implemented using any appropriate combination of alterable, volatile or non-volatile memory or non-alterable, or fixed, memory. The alterable memory, whether volatile or non-volatile, can be implemented using any one or more of static or dynamic RAM, a floppy disk and disk drive, a writable or re-rewriteable optical disk and disk drive, a hard drive, flash memory or the like. Similarly, the non-alterable or fixed memory can be implemented using any one or more of ROM, PROM, EPROM, EEPROM, an optical ROM disk, such as a CD-ROM or DVD-ROM disk, and disk drive or the like.","It should be understood that each of the circuits or routines shown in  can be implemented as portions of a suitably programmed general purpose computer. Alternatively, each of the circuits or routines shown in  can be implemented as physically distinct hardware circuits within an ASIC, or using a FPGA, a PDL, a PLA or a PAL, a digital signal processor or using discrete logic elements or discrete circuit elements. The particular form each of the circuits or routines shown in  will take is a design choice and will be obvious and predicable to those skilled in the art.","The data source  is usable to output the watermarked data to be stored in the watermarked data portion  and\/or the original data to be stored in the original data portion  to the watermark extracting system . Likewise, the one or more user input devices  are usable to input either or both of the watermarked data and the original data to the watermark extracting system . The data sink  is usable to input the embedded data, extracted by the watermark extracting system , from the input\/output interface . In operation, if the watermark extracting system  does not already include both the watermarked data and the original data, the watermark extracting system  obtains the missing data or data sets from one or both of the data source  and\/or the one or more user input devices . If that data is received from the data source  and\/or the one or more user input devices , that data is input through the input output interface  and stored in the appropriate one of the watermarked data portion  and the original data portion .","Next, under control of the controller , each of the watermarked data stored in the watermarked data portion  and the original data stored in the original data portion  is output to the analysis data generating circuit or routine . The analysis data generating circuit or routine  generates a set of analysis data for each of the watermarked data and the original data. The analysis data generating circuit or routine  then, under control of the controller , either stores the analysis data into the analysis data portion  or provides it directly to the aligning circuit or routine .","The aligning circuit or routine  inputs, under control of the controller , the analysis data for each of the watermarked data and the original data from either the analysis data generating circuit or routine  or the memory . The aligning circuit or routine  determines a best alignment between the watermarked data and the original data and outputs this alignment information to the tempo map generating circuit or routine  under control of the controller . The tempo map generating circuit or routine  based on the alignment information provided by the aligning circuit or routine , generates a tempo map that indicates which portions of the watermarked data were compressed or expanded relative to the corresponding original data. The tempo map generating circuit or routine , under control of the controller , either stores the tempo map into the tempo map portion  or provides it directly to the embedded data decoding circuit or routine .","The embedded data decoding circuit or routine  inputs, under control of the controller , the tempo map from either the tempo map portion  or directly from the tempo map generating circuit or routine . The embedded data decoding circuit or routine  decodes the tempo map based on the original encoding scheme used to generate the tempo map from the embedded data to obtain the embedded data from the tempo map. The embedded data encoding circuit or routine  then, under control of the controller , provides the decoded embedded data directly to the input\/output interface  for transmission to the data sink  or stores it in the embedded data portion .","As outlined above with respect to steps S and S of , if, for a particular type of data, such as image data, it is not necessary to generate the analysis data, the analysis data generating circuit or routine  and the corresponding analysis data portion  of the memory  can each be omitted. In this case, the aligning circuit or routine  would operate directly on the watermarked data and the original data to generate the alignment information used by the tempo map generating circuit or routine  to generate the tempo map. In contrast, when the watermarked data is audio data, the analysis data generating circuit or routine  generates spectrograms for each of the watermarked data and the original data. Then, the aligning circuit or routine  aligns the spectrograms to generate the alignment information used by the tempo map generating circuit or routine .","As outlined above, the data is embedded in an audio data file by compressing and\/or expanding certain time intervals of the audio data file by a small factor. As outlined above, this small factor is on the order of 1%. It should be appreciated that, in various exemplary embodiments, to minimize audio artifacts, the modified intervals are arranged to overlap the unmodified intervals. In this case, the overlap areas are cross-faded or otherwise interpolated to provide a smooth transition between the compressed or expanded intervals and the unmodified intervals. As outlined above, the length, location, and\/or degree of compression and\/or expansion of the modified intervals encodes the data into the audio data file. In particular, the method outlined above in  and the watermark embedding system outlined above with respect to  produce a watermarked audio signal x(t) as: \n\n\nwhere:\n","xis the kblock or portion of the original time-varying audio signal;","T, is the tempo map value for the kblock or portion of the original time-varying audio signal;","fis a time-scale modification function usable to time-compress or time-expand the kblock or portion based on T; and","C is the concatenation operation.","As outlined above, this tempo map Tencodes the watermark. The tempo map Tis recovered by comparing the watermarked audio signal x(t) with the original, unaltered, time-varying audio signal x(t).","In practice, care may be required to avoid introducing audible discontinuities at the block boundaries. This may be achieved by using a time scale modification algorithm that leaves data at or near the block boundaries unchanged, or by overlapping segments slightly and averaging data within the over-lapping region during the construction of the watermarked signal.","As outlined above with respect to audio data, in various exemplary embodiments, the tempo map Tis recovered by finding the best time-warping function that takes the original time-varying audio signal x(t) to the watermarked audio signal x(t). Subtracting the linear component yields the watermark information, that is, the tempo map T. It should be appreciated that, in this formulation of the tempo map T, time is plotted along the x axis, while the value of the tempo map Tfor any value of time is plotted on the y axis. This is shown, for example, in . In this case, the tempo map Thas a positive slope in the compressed regions, a negative slope in the expanded regions, and has a slope of 0 in the unmodified regions. However, as outlined above with respect to , the unmodified regions may be offset from the neutral value by preceding compressions or expansions.","In contrast, as shown in , it is also possible to plot the tempo map such that the tempo map Tvaries with slopes greater than or less than 1 and varies around the line having slope of 1 and passing through the origin.","As outlined above, to recover the tempo map T, and thus the embedded data, the watermarked audio data file is compared, either directly or indirectly, with the original time-varying audio data file x(t). In various exemplary embodiments, both the watermarked audio signal x(t) and the original time-varying audio signal x(t) are processed using the short-time Fourier transform. However, it should be appreciated that other parameterizations could include those based on linear prediction or psychoacoustic considerations. It should be appreciated that, in the following examples, a standard frequency analysis is used.","In the following examples, windows, or frames, are 128 samples wide. For audio data signals sampled at 22.05 kHz, this results in a frame width of 5.8 ms and a frame rate of 172 frames per second. However, it should be appreciated that variable window widths and variable window overlaps can also be used.","Each analysis frame is windowed with a 256-point Hamming window. A fast Fourier transform is then used to estimate the spectral components in the window. The logarithm of the magnitude of the of the result is used as an estimate of the power spectrum of the windowed frame. The resulting vector of spectral components characterizes the spectral content of the corresponding window.","This standard audio processing technique is called the spectrogram. The sequence of spectral vectors represents the frequency content of the signal over time. It should be appreciated that some frequency components may be optionally discarded if those frequency components are not useful for determining the similarity and thus the alignment. For example, extremely low or extremely high bands, which often do not have substantial power, may be optionally discarded.","It should be appreciated that, in general, audio data is reference-less. That is, audio data often lacks any directly-discernable internal references which could be used to directly align the watermarked audio signal x(t) with the original time-varying audio signal x(t). In audio data, absolute waveform values are often altered during lossy data compression and\/or during analog transmission. Thus, it is difficult, if not impossible, to align these signals directly. Additionally, to directly align audio data, a high sampling rate, such as, for example, 40K samples\/second, should be used, due to the high rate of change of audio signals.","Accordingly, in various exemplary embodiments, to find the best time-warping function that converts the original time-varying audio signal x(t) into the watermarked audio signal x(t), spectrograms for both the original time-varying audio signal x(t) and for the watermarked audio signal x(t) are determined and compared. Spectrograms are generally unaffected by lossy data compression and analog tranmission. Additionally, only a relatively low number of spectral coefficients per second, such as, for example, a few hundred spectral coefficients per second, need to be compared to align the spectrograms. If the spectrograms do not align, which would be expected before the original time-varying audio signal x(t) is warped, the original time-varying audio signal x(t) is controllably warped until the spectrograms align.","It should be appreciated that, in various exemplary embodiments, the original time-varying audio signal x(t) is warped using dynamic programming. It should be appreciated that dynamic programming is well documented, such as, for example, in J. Kruskal et al., \u201cAn anthology of Algorithms and Concepts for Sequence Comparison,\u201d in , eds. D. Sankoff et al., CSLI Publications, 1999 and U.S. Pat. No. 4,384,273, each incorporated herein by reference in its entirety. The details of dynamic programming will not be discussed herein. However, it should be appreciated that it can be demonstrated that dynamic programming will find an optimal alignment path in quadratic time.","It should be appreciated that the dynamic programming technique is especially well-suited to recovering the tempo map Tand is easily usable in the various exemplary embodiments of the systems and methods according to this invention. For example, the dynamic programming technique gracefully handles situations when the original time-varying audio signal x(t) and the watermarked audio signal x(t) do not start and end at exactly the same time. Thus, for example, if the watermarked audio signal x(t) were extracted from a continuous broadcast, it would not be necessary to exactly specify the start and end points of the continuous broadcast to be extracted as the watermarked audio signal x(t). Similarly, the dynamic programming technique gracefully handles situations where the frame spectra do not match exactly. In particular, the dynamic programming technique will successfully identify the tempo map Tas long as the frame spectra are more similar to each other than they are to their neighbors. As a result, when using dynamic programming techniques, the systems and methods of this invention are robust to reasonable spectral distortion.","It should also be appreciated that, as outlined above, the expected displacements between the compressed or expanded portions of the watermarked audio signal x(t) and the corresponding portions of the original time-varying audio signal x(t) are generally quite small. As a result, as shown in , the best time-warping function does not significantly deviate from the diagonal. In this case, the dynamic programming technique can be made to operate in effectively linear time by determining only those time-warping functions that lie very near the diagonal. Similarly, an overall time modification, such as that caused by sampling rate conversion or incorrect analog reproduction speeds, will be gracefully handled by the dynamic programming technique. In this case, the tempo map Tcan be recovered by subtracting the diagonal of the rectangle formed by the cross product of the two signals, rather than the square.","That is, when comparing two signals of the same length, the cross-product is a square. That is, one signal on one axis of the square and the other is plotted on the other, as in . If each signal is the same length, the result will be square. If one signal is longer than the other, the result is a rectangle. The \u201clinear match\u201d, with no tempo deviation will be along the diagonal of that rectangle, such as, for example, the diagonal dotted line in .","It should be appreciated that the overall data rate of the tempo function f(t) is a tradeoff between the detectability of the tempo map Tand the degradation of the watermarked audio signal x(t). This can be explained by considering the minimum length for a compression or expansion interval to be a block. For further ease of explanation, the length of all blocks can be set to the same value. In various exemplary embodiments, each block can be compressed or expanded by a factor of 1\u00b1\u03b5. If \u03b5 is sufficiently small, the compression and expansion can be discretized to an integral multiple of \u03b5. That is, each block can be compressed or expanded by a factor of 1\u00b1n\u03b5, where n is a small integer. It should also be appreciated that blocks can be left uncompressed, that is, n=0.","To reduce audible artifacts, it is advisable, though it is not strictly necessary, that the magnitude of n be limited to less than some small value n. For the same reason, the change in the value of n should be small between adjacent blocks. To preserve the time length of the file, it is also advisable, in various exemplary embodiments, that n sum to 0 across all blocks in the signal. However, this is not strictly necessary. It should be appreciated that n will sum to 0 when the total amount of compression exactly equals the total amount of expansion. It should also be appreciated that n is allowed to take negative values. Thus, every block b will have an associated code value nsuch that:\n\n\u2212\n","For a watermarked audio signal x(t) having B blocks, the embedded data thus comprises the sequence n, n, . . . , n. It should be appreciated that this sequence can be obtained from the recovered tempo map Tby quantizing the derivative of the tempo map T.","The inventors have determined that data can be reasonably embedded into an audio data signal by using a block length of about 0.5 s, a value of \u03b5 of approximately 0.01(1%), and a value for N of 2. Using these values, each second of the audio data signal can encode roughly 2log2(2N+1) bits. This is slightly more than 8 bits per second. It should be appreciated that this is not an exceptionally large data rate. However, given that a typical popular song is at least approximately 180 seconds long, at a data rate of 8 bits per second, it is possible to encode approximately 180 bytes into that typical popular song. In particular, 180 bytes is generally more than enough data to encode the song title, the artist, the publisher, and an ID number into the audio data of that typical popular song. Moreover, when used as a single watermark, 180 bytes of embedded data would yield more than 10individual identification values. This would generally be more than enough possible values for any conceivable combination of source identifiers, device identifiers and time stamps, for example.",{"@attributes":{"id":"p-0135","num":"0134"},"figref":["FIG. 7","FIG. 7","FIG. 7"],"sub":["1 ","2","w","1 ","2"]},"In particular, these two tempo maps fand fwere each applied to the same 10-second excerpt of a popular song. The dimensional compression and expansion ratios used to modify this audio signal were 2% over a 1-second region. Accordingly, a total displacement of 20 ms, or 3.44 frames, was obtained. In particular, using the first tempo map f, blocks of the first copy of the audio signal appearing at 1 and 8 seconds were dimensionally expanded, while blocks appearing at 3 and 6 seconds were dimensionally compressed. In contrast, based on the second tempo map f, blocks of the second copy of the audio signal appearing at 2 and 7 seconds were dimensionally compressed, while blocks appearing at 5 and 6 seconds were dimensionally expanded.","It should be appreciated that, in , the tempo maps fand fshow the deviation from linear time in spectrogram frames. It should be appreciated that in the tempo maps fand fshown in , the dimensional compression and dimensional expansion regions are easily detectable, as are the plateaus of time offsets, where blocks of normal tempo that are offset from the corresponding original blocks appear. These plateaus were caused by the various dimensional compression and expansion blocks.","In particular, the time difference between the watermarked audio signal x(t) and the original time-varying signal x(t) was determined to within \u00b11 frame. This suggests that an additional level and\/or expansion could be used to effectively double the information capacity embedded into this audio signal. Similar tempo maps were applied to audio signals from other audio domains, such as soundtrack, speech and orchestral music, with similarly good results.","After generating the watermarked audio signals using the tempo maps fand f, the watermarked audio signals were data compressed and then data decompressed using 64 kB MP3 encoding and decoding. The tempo maps fand f, and thus the embedded data, easily survived this lossy encoding and decoding. When these watermarked audio signals were played for a number of test subjects in informal listening tests, the listeners were generally unable to detect the time-based compressions and expansions of the audio signal.",{"@attributes":{"id":"p-0140","num":"0139"},"figref":"FIG. 8"},"In general, each block of the pair was dimensionally expanded or dimensionally compressed by the same percentage as the other block was dimensionally compressed or dimensionally expanded, respectively. Thus, the overall length of each pair of two 2-second blocks remained nominally at 4 seconds.","It should be appreciated that there are more efficient coding schemes which could be used. In particular, a coding scheme that uses a region of no time-scale modification could be used to encode an additional state, generating a trinary coding scheme.","Using the extremely simple coding scheme outlined above, the watermarked audio signal could be generated in real-time from the time-varying original audio signal by concatenating the dimensionally compressed and expanded regions of the original time-varying audio signal. In this case, a dimensionally compressed version of the original time-varying signal and a dimensionally expanded version of the original time-varying signal were each generated using a dimensional compression or expansion ratio of 2.5%. Each version was evenly divided into 10 equal blocks, each 2 seconds long. The watermarked audio signal was created by the simple method of concatenating the dimensionally compressed and dimensionally expanded blocks. The blocks were selected based on the particular 4-bit data to be embedded into that particular copy of the original time-varying audio signal. The blocks at the beginning and end of the watermarked audio signal were not compressed. Thus, only the middle 16 seconds of the watermarked audio signal were altered.","Because the possible sequences of dimensional compression and dimensional expansion are known, i.e., dimensional expansion followed by dimensional compression for a 0, or dimensional compression followed by dimensional expansion for a \u201c1\u201d, it is relative straightforward to estimate what the tempo map should be that corresponds to each of the sixteen 4-bit values that could be embedded into the watermarked audio data. For example, given a region of dimensional compression followed by a region of dimensional expansion, the tempo map will speed up then slow again to zero offset, corresponding to a binary \u201c1\u201d. In contrast, given a region of dimensional expansion followed by a region of dimensional compression, the tempo map will slow down then speed up again to zero offset, indicating a binary \u201c0\u201d. Thus, the tempo maps will have peaks for binary 1's, while the tempo maps will have troughs for the binary 0's.","Accordingly, as shown in , a template, such as the template fshown in , can be constructed having linear ramps corresponding to the expected tempo changes. In particular, the template tempo map fshown in  corresponds to the 4-bit binary value \u201c0010\u201d.  also shows the recovered tempo map f\u2032, recovered according to the systems and methods outlined above, from a watermarked audio data file embedded with the binary string \u201c0010\u201d. As shown in , the recovered tempo map f\u2032 very closely approximate the template tempo map ffor this binary string. By comparing each of the templates to the recovered tempo map, it is possible to statistically determine which template a given tempo map corresponds to with fairly high accuracy.","It is then a simple matter of generating similarity scores between each of the templates for each of the possible sequences with the actual tempo map recovered from the dimensionally compressed and expanded data file. For example, a cosine of an angle between a recovered tempo map and a template is a useful metric. Thus, for each of i different templates, a cosine value can be determined between that template and the recovered template map. That is:\n\n()=()\/||\u2003\u2003(2)\n\nwhere:\n","{right arrow over (m)} is a vector defining the recovered tempo map;","{right arrow over (t)}is a vector defining the itemplate; and","Dis the cosine of the angle between {right arrow over (m)} and {right arrow over (t)}.","This metric is particularly useful because it can generate usable similarity scores regardless of the actual vector magnitudes.","In the experiment outlined above, when using this metric, the template which was a priori know to match the recovered tempo map showed a much higher similarity score than any of the other 15 templates. Sixteen different recovered tempo maps, each corresponding to one of the 16 templates were compared to each of the 16 possible templates, yielding 256 (16) different tempo map-to-template comparisons. The minimum cosine distance Dfor a comparison between a recovered tempo map and the-corresponding template was 0.910 In contrast, the maximum cosine distance Dfor a comparison between a recovered tempo map and a non-corresponding template was 0.618. Thus, the similarity scores clearly and correctly identified the corresponding templates.","The score differences were proportional to the Hamming distance between the recovered tempo maps and the templates. To increase the score distance, a subset of the templates having larger Hamming distances could be used. For example, the eight four-bit codes with odd parity, that is, an odd number of 1's, could be used. This guarantees a Hamming distance of at least two. In this case, the maximum cosine distance Dfor a comparison between a recovered tempo map and a non-corresponding template was reduced to 0.238.","It should also be appreciated that thresholding, as well as template matching, can be used to covert a recovered tempo map into a string of binary, trinary or other multi-valued function values. For example, the trinary values shown in  show the trinary values that are obtained when using thresholds set to +1 frame and \u22121 frame.","As outlined above, the systems and methods according to this invention are applicable to data that has a component that varies along a dimension other than time. For example, as outlined above, the systems and methods according to this invention can be applied to data types having spatially-varying data, such as video images, still images and the like. For example, when applied to spatially-varying data, such as video images and still images, by selectively spatially-compressing and spatially-expanding selected portions of the spatially-varying data, the watermarking systems and methods according to this invention are robust under lossy compression and analog reproduction.","When the spatially-varying data is image data, the watermarked encoding can easily be implemented optically as well as digitally, even directly in the mechanism of a printer or photocopier. For example, the watermarked encoding can be introduced into the image data by altering the speed of the scanner or print head, such as by systematically slowing or speeding up the print on the scanner to result in spatially compressed or expanded regions of the scanned or printed image. It should be appreciated that implementing the watermark encoding directly into a printer would be especially valuable in high security applications. That is, a photocopier or printer could encode the time, date, location, device identification, user identification and\/or the like invisibly into every copy made or printed. Thus, if an illicit copy is found, the embedded watermark information will help identify when, where, and\/or who created that illicit copy.","When applying the systems and methods according to this invention to spatially-varying data, such as image data, areas of the spatially-varying data are dimensionally compressed or dimensionally expanded by an imperceptible amount. Well-known digital resampling techniques can stretch or compress image regions by a small amount. Alternatively, mechanical or optical methods can be used, as outlined above, to stretch or dimensionally compress image regions by a small amount. As outlined above, if the image extends in more than one dimension, two or more axes of warping are available.","It should also be appreciated that it is possible to differentially warp \u201cstripes\u201d across a 2-dimensional image or other set of spatially-varying data. However, it should be appreciated that this may lead to more noticeable artifacts, as straight lines that do not lie parallel to the warp access will no longer be perfectly straight. In particular, for small sets of images, this will lead to visible distortions, particularly for images that have regular lines or grids that run diagonally.","As outlined above for audio data, the image data can be analyzed to find the regions or mode of watermarking that will result in the least perceptible alterations. For example, Fourier analysis of the image can find the angle with the lowest magnitude of the spatial frequencies in that direction. Using this direction as the warping access will minimize perceptible artifacts. Thus, for example, for an image having a plurality of parallel lines, Fourier analysis can easily find direction of the lines. Warping the image parallel to that direction would result in less perceptible artifacts.","In general, in view of the small degree of warping, watermarking image data according to the systems and methods of this invention will generally not result in perceptible changes for the vast majority of images. In particular, scanned text is especially immune. This occurs because the natural variation due to kerning and line-filling tends to mask the warped regions particularly well. For example,  shows an original image, an image containing embedded data created according to the systems and methods of this invention, and the tempo map used to convert the original image data into the watermarked image data. In particular, without first identifying the watermarked data, it is generally impossible to tell the two examples apart, even when they are closely adjacent.","In particular, in , the text portion  is the original image data, while the text portion  is the watermarked image data. The tempo map  shown in  is recovered using dynamic programming, as outlined above with respect to the audio data. However, unlike time-varying audio data, for which direct comparison can be problematic for the reasons discussed above, the image portions  and  shown in  can be compared directly. This occurs because the image data contains internal reference points, such as top and bottom edges and side edges, that are generally not affected by lossy data compression and analog transmission, and that can be identified at relatively low sampling rates. Thus, the image portions  and  can be directly compared to align the image portions  and .","Columns of pixels perpendicular to the warp axis can be compared by Euclidean or other distance metrics, just as spectral vectors can be compared for audio data. It should be appreciated that the warp direction need not lie parallel to any of the image axes. However, placing the warp direction parallel to one of the image axes tends to simplify recovering the tempo map.","In particular,  shows the tempo map fobtained by comparing the original image data portion  with the watermarked image data portion  on a pixel by pixel basis. As shown in , the spatial dimension, in this case pixels, is plotted along the x axis, while the offset, again in pixels, is plotted along the y axis. As shown in , the offset is 0 between 0 pixels and approximately 300 pixels. Then, between 300 and 400 pixels, the offset drops from 0 to approximately \u22123 pixels. The offset then remains constant from about 400 pixels to about 600 pixels, at which time the offset rises from approximately \u22123 pixels to 0 pixels between 600 and 800 pixels.","It should be appreciated that the information encoded by this tempo map will depend on the particular encoding scheme used to create this tempo map. However, it should be appreciated that any of the above-outlined encoding schemes discussed previously can be used to create the tempo map f, or any other tempo map used to spatially compress and expand portions of the original image data to generate the watermarked image data.",{"@attributes":{"id":"p-0164","num":"0163"},"figref":"FIGS. 11\u201316"},"One disadvantage of the various exemplary embodiments of the first exemplary embodiment of the systems and methods according to this invention, as well as in the many conventional watermarking techniques, is that the original data is needed to recover the embedded data. It should be appreciated that this is perfectly acceptable for many applications, such as for example, digital rights management, where the owner of the data set would have access to the original data set. However, there are many applications where it would be desirable to be able to extract the embedded data without requiring any reference to the original, unaltered, data set.","For example, time-varying data can be watermarked, and the embedded data extracted, without requiring reference to the original data set if the actual tempo of the time-varying data can be inferred or predicted. For example, methods exist that allow the tempo or the speaking rate of audio data to be analyzed and determined. One such technique is disclosed in J. Foote et al., \u201cThe Beat Spectrum: A New Approach to Rhythm Analysis\u201d, in (ICME) 2001, HTTP:\/\/www.fxpal.com\/people\/foote\/papers\/icme2001.htm. Accordingly, it is a generally a simple matter to analyze the time-varying data set to predict the signal rate or tempo at some short time in the future. This information can be used to embed and extract a data set from a time-varying data set using the systems and methods according to this invention without requiring reference to the original data signal.","Thus, in various exemplary embodiments of the second exemplary embodiment of the systems and methods according to this invention, the original data set is analyzed and the tempo of the original data set along the dimension x of interest is altered to match the predicted tempo. If a first-order prediction algorithm is used, the rate-adjusted signal will have a constant tempo. If a higher-order prediction algorithm is used, the rate-adjusted signal will have exactly the tempo prescribed by this higher order prediction. The rate-adjusted signal is then further modified by selectively dimensionally compressing and dimensionally expanding portions of the rate-adjusted signal that extend along the dimension x of interest using the various exemplary embodiments of the systems and methods outlined above with respect to .","To recover the embedded data, only the rate differences between the predicted rate, based on the particular first or higher-order prediction algorithm and the actual rate of the watermarked data set, needs to be identified. This is because the only rate differences that should appear are those occurring due to the selected dimensional expansion and dimensional compression that encodes the embedded data into the watermarked data set. It should be appreciated that the prediction algorithm does not need to be particularly accurate, as long as the prediction algorithm is consistent. However, of course, the more accurate the prediction algorithm is, the better the rate-adjusted signal will match the original signal.",{"@attributes":{"id":"p-0169","num":"0168"},"figref":["FIG. 11","FIG. 11"],"b":["300","310","320","330","320","340"]},"In step S, the tempo of each portion of the original data is altered so that the tempo of each portion matches the predicted tempo for that portion determined in step S. Next, in step S, a set of data to be embedded into the original data, i.e., the watermark data, is input. Then, in step S, a tempo map f(q) is generated based on the data to be embedded. Operation then continues to step S.","In step S, portions of the original data input in step S are selectively dimensionally compressed and dimensionally expanded based on the tempo map f(q) to generate watermarked data in which the data to be embedded input in step S has been embedded. Next, in step S, the watermarked data is output. Then, in step S, operation of the method ends.","It should be appreciated that, in step S, the watermarked data can be output in a variety of ways. For example, if the watermarked data is audio data, the watermarked data can be stored onto a digital audio tape or a standard analog cassette tape, broadcast as an AM, FM or satellite radio broadcast, or streamed over a distributed network a via streaming MP3 or Real Audio format. Alternatively, the audio file can be digitized, if it is not already in digital form, and stored on a compact disk, a CD-ROM, a DVD, or any other volatile or nonvolatile digital memory device. Additionally, the watermarked data file can be data compressed using any known or later developed data compression technique appropriate for audio data files and stored on one of the previously discussed memory devices. It should also be appreciated that, whether data compressed or not, the watermarked audio data can be transmitted to a remotely located computer or storage device for storage and\/or playback over any known or later playback device or distributed network, such as the Internet, a local area network, a wide area network, a storage area network, an intranet, an extranet, a public switched telephone network and\/or a cable television network.",{"@attributes":{"id":"p-0173","num":"0172"},"figref":["FIG. 12","FIG. 12"],"b":["400","410","420","430","420","440"]},"In step S, for each portion of the watermarked data, a difference between the predicted tempo for that portion and the actual tempo for that portion is determined. Next, in step S, based on the determined differences between the predicted tempos for each portion of the watermarked data and the actual tempos for each portion of the watermarked data, a tempo map is generated. Then, in step S, the tempo map is converted or decoded to obtain the embedded data that was embedded in the watermarked data. Operation then continues to step S.","In step S, the embedded data is output to one or more data sinks. Then, in step S, operation of the method ends.","It should be appreciated that, in step S, the embedded data extracted from the watermarked data can be output by displaying or printing it. The embedded data can also be output by storing the extracted data, or by transmitting the extracted data over a transmission system, such as those as discussed above with respect to , to transmit the extracted data to a separate site for display storage or further transmission.",{"@attributes":{"id":"p-0177","num":"0176"},"figref":["FIG. 13","FIG. 13","FIG. 13"],"b":["500","500","510","520","530","540","550","560","570","580","590","592","300","310","510","400","410"]},"Each of the links ,  and  can be implemented using any known or later developed device or system for connecting the one or more user input devices , the data source  and the data sink , respectively, to the watermark embedding system , including a direct cable connection, a connection over a wide area network or a local area network, a connection over an intranet, a connection over the Internet, or a connection over any other distributed processing network or system, any of which could include one or more wireless portions. In general, each of the links ,  and  can be any known or later developed connection system or structure usable to connect the one or more user input devices , the data source  and the data sink , respectively, to the watermark embedding system .","The input\/output interface  inputs data from the data source  and\/or the one or more user input devices  and outputs data to the data sink . The input output interface  also outputs data to one or more of the controller , the memory  and\/or the tempo prediction circuit or routine  and receives data from one or more of the controller , the memory  and\/or the watermarked data generating circuit or routine .","The memory  includes one or more of an original data portion , an embedded data portion , a tempo prediction data portion , an adjusted original data portion , a tempo map portion , and a watermarked data portion . The original data portion  stores the original data into which the embedded data stored in the embedded data portion  will be embedded to form the watermarked data. The embedded data portion  stores the embedded data to be embedded into the original data. The predicted tempo data portion  stores the predicted tempo for each portion of the original data. The adjusted original data portion  stores the tempo-modified original data that has tempos that match the predicted tempos for the portions of the original data. The tempo map portion  stores the tempo map generated by the tempo map generating circuit or routine . The watermarked data portion  stores the watermarked data generated by the watermarked data generating circuit or routine . The memory can also store one or more control routines used by the controller  to operate the watermark embedding system .","The memory  can be implemented using any appropriate combination of alterable, volatile or non-volatile memory or non-alterable, or fixed, memory. The alterable memory, whether volatile or non-volatile, can be implemented using any one or more of static or dynamic RAM, a floppy disk and disk drive, a writable or re-rewriteable optical disk and disk drive, a hard drive, flash memory or the like. Similarly, the non-alterable or fixed memory can be implemented using any one or more of ROM, PROM, EPROM, EEPROM, an optical ROM disk, such as a CD-ROM or DVD-ROM disk, and disk drive or the like.","It should be understood that each of the circuits or routines shown in  can be implemented as portions of a suitably programmed general purpose computer. Alternatively, each of the circuits or routines shown in  can be implemented as physically distinct hardware circuits within an ASIC, or using a FPGA, a PDL, a PLA or a PAL, a digital signal processor or using discrete logic elements or discrete circuit elements. The particular form each of the circuits or routines shown in  will take is a design choice and will be obvious and predicable to those skilled in the art.","In operation, the data source  outputs one or both of a set of original data and\/or a set of embedded data over the link  to the input output interface . Similarly, the user input device  can be used to input one or more of the set of original data and\/or the embedded data, if desired, over the link  to the input output interface . Depending on which data is input, the input output interface  will store the received set of original data in the original data portion  and\/or the embedded data in the embedded data portion . However, it should be appreciated that either or both of these sets of data could have been previously input into the watermark embedding system  at some earlier time.","The tempo predicting circuit or routine , under control of the controller , inputs the original data either from the input\/output interface  or the original data portion . The tempo predicting circuit or routine  determines, for each portion of the original data, the predicted or expected tempo of that portion. The tempo predicting circuit or routine  outputs, under control of the controller , the predicted tempo for each portion of the original data either to the predicted tempo data portion  or directly to the tempo adjusting circuit or routine .","Then, the tempo map generating circuit or routine  under control of the controller , inputs the embedded data from the embedded data portion  and generates a tempo map that can be used to dimensionally compress and\/or dimensionally expand portions of the tempo-adjusted original data to embed the embedded data into the tempo-adjusted original data. It should be appreciated that the tempo map generating circuit or routine  can use any known or later-developed encoding scheme, including, but not limited to, those disclosed in this application, to convert the data to be embedded into a tempo map that is usable to modify the original data into the watermarked data. The tempo map generating circuit or routine  then outputs the generated tempo map, under control of the controller , either to the tempo map portion  of the memory or directly to the watermarked data generating circuit or routine .","The watermarked data generating circuit or routine , under control of the controller , inputs the tempo map, from either the tempo map portion  or directly from the tempo map generating circuit or routine . The watermarked data generating circuit or routine , under control of the controller , also inputs the tempo-adjusted original data stored in the adjusted original data portion . The watermarked data generating circuit or routine  then modifies the tempo-adjusted original data by selectively dimensionally compressing and\/or dimensionally expanding the tempo-adjusted original data along a defined dimension based on the tempo map to embed the embedded data into the tempo-adjusted original data to form the watermarked data. The watermarked data generating circuit or routine  then outputs the watermarked data and, under control of the controller , either stores it in the watermarked data portion  or provides it directly to the input\/output interface .","After the watermarked data is generated by the watermarked data generating circuit or routine , the watermarked data can be stored indefinitely in the watermarked data portion  of the memory . At such time as the watermarked data is needed outside of the watermarked embedding system , the input\/output interface , under control of the controller , either inputs the watermarked data directly from the watermarked data generating circuit or routine  or the watermarked data portion  and outputs the watermarked data over the link  to the data sink .",{"@attributes":{"id":"p-0188","num":"0187"},"figref":["FIG. 14","FIG. 14"],"b":["600","600","610","620","630","640","650","660","670"]},"As shown in , the input\/output interface  is connected to the data source  over the link , the data sink  over the link  and one or more user input devices  over one or more links . As discussed above, each of the data source  and the data sink  can take any of the forms outlined above with respect .","Each of the links ,  and  can be implemented using any known or later developed device or system for connecting the one or more user input devices , the data source  and the data sink , respectively, to the watermark extracting system , including a direct cable connection, a connection over a wide area network or a local area network, a connection over an intranet, a connection over the Internet, or a connection over any other distributed processing network or system, any of which could include one or more wireless portions. In general, each of the links ,  and  can be any known or later developed connection system or structure usable to connect the one or more user input devices , the data source  and the data sink , respectively, to the watermark extracting system .","The memory  includes a watermarked data portion , a predicted tempo data portion , a tempo map portion  and an embedded data portion . The memory  can also store one or more control programs or routines usable by the controller  to control the watermark extracting system . The watermarked data portion  stores watermarked data containing embedded data. The predicted tempo data portion  stores the predicted tempo determined by the tempo predicting circuit or routine . The tempo map portion  stores the tempo map generated by the tempo map generating circuit or routine . The embedded data  stores the embedded data decoded by the embedded data decoding circuit or routine  from the tempo map stored in the tempo map portion .","The memory  can be implemented using any appropriate combination of alterable, volatile or non-volatile memory or non-alterable, or fixed, memory. The alterable memory, whether volatile or non-volatile, can be implemented using any one or more of static or dynamic RAM, a floppy disk and disk drive, a writeable or re-rewriteable optical disk and disk drive, a hard drive, flash memory or the like. Similarly, the non-alterable or fixed memory can be implemented using any one or more of ROM, PROM, EPROM, EEPROM, an optical ROM disk, such as a CD-ROM or DVD-ROM disk, and disk drive or the like.","It should be understood that each of the circuits or routines shown in  can be implemented as portions of a suitably programmed general purpose computer. Alternatively, each of the circuits or routines shown in  can be implemented as physically distinct hardware circuits within an ASIC, or using a FPGA, a PDL, a PLA or a PAL, a digital signal processor or using discrete logic elements or discrete circuit elements. The particular form each of the circuits or routines shown in  will take is a design choice and will be obvious and predicable to those skilled in the art.","The data source  is usable to output the watermarked data to be stored in the watermarked data portion  to the watermark extracting system . Likewise, the one or more user input devices  are usable to input the watermarked data. The data sink  is usable to input the embedded data, extracted by the watermark extracting system , from the input output interface . In operation, if the watermark extracting system  does not already include the watermarked data, the watermark extracting system  obtains the missing data from one of the data source  or the one or more user input devices . If that data is received from the data source  or the one or more user input devices , that data is input through the input output interface  and stored in the watermarked data portion .","Next, under control of the controller , the watermarked data stored in the watermarked data portion  is output to the tempo predicting circuit or routine . The tempo predicting circuit or routine  predicts the tempo for each portion of the watermarked data. The tempo predicting circuit or routine  then, under control of the controller , either stores the predicted tempo data into the predicted tempo data portion  or provides it directly to the tempo map generating circuit or routine .","The tempo map generating circuit or routine , based on the predicted tempo, generates a tempo map that indicates which portions of the watermarked data were dimensionally compressed or dimensionally expanded relative to the predicted or expected tempo for that portion of watermarked data. The tempo map generating circuit or routine , under control of the controller , either stores the tempo map into the tempo map portion  or provides it directly to the embedded data decoding circuit or routine .","The embedded data decoding circuit or routine  inputs, under control of the controller , the tempo map from either the tempo map portion  or directly from the tempo map generating circuit or routine . The embedded data decoding circuit or routine  decodes the tempo map based on the original encoding scheme used to generate the tempo map from the embedded data to obtain the embedded data from the tempo map. The embedded data encoding circuit or routine then, under control of the controller , provides the decoded embedded data directly to the input output interface  for transmission to the data sink  or stores it in the embedded data portion .",{"@attributes":{"id":"p-0198","num":"0197"},"figref":["FIG. 15","FIG. 15","FIG. 15"],"b":["700","700","710","712","720","710","714","750","716","740","720","722","730"]},"The rate predictor  analyzes the delayed original data signal and outputs a predicted rate over the signal line or link  to the comparator . The comparator  compares the actual tempo of the original data signal received over the signal line or link  to the predicted tempo of the data signal recovered from the rate predictor . Based on a degree of difference determined by the comparator  based on the comparison, the comparator  outputs an adjusting signal on the signal line  to the adjustor .","The adjustor  first adjusts the original data signal received on the signal line  so that the actual tempo of the original data signal matches the predicted tempo of the original signal, based on the adjustment signal received on the signal line or link . The adjustor  then further adjusts the tempo of the tempo-adjusted original data signal based on a predetermined tempo map to embed the desired data into the rate-adjusted original data set to generate the self-clocking watermarked data set. The adjustor  then outputs the self-clocking watermarked data set over the signal line or link  to the data sink .",{"@attributes":{"id":"p-0201","num":"0200"},"figref":["FIG. 16","FIG. 16"],"b":["800","800","810","812","820","810","814","840","820","822","830","830","840","832"]},"The comparator  compares, for each portion of the watermarked data set, the actual tempo of the self-clocking watermarked data signal received over the signal line or link  with the predicted tempo received from the rate predictor  over the signal line . Based on the comparisons, the comparator  generates a tempo map corresponding to the difference between the predicted and actual tempos of the self-clocking watermarked data signal for each portion of the watermarked data set. The comparator  then applies the predetermined encoding scheme to convert the tempo map into the string of extracted and decoded embedded data. The comparator  then outputs the extracted and decoded embedded data over the signal line or link  to the data sink .","In the various exemplary embodiments outlines above, the watermark embedding systems  and , and the watermark extracting systems  and , can each be implemented using a programmed general purpose computer. However, the watermark embedding systems  and , and the watermark extracting systems  and , can each be implemented using a special purpose computer, a programmed microprocessor or microcontroller and peripheral integrated circuit elements, and ASIC or other integrated circuit, a digital signal processor, a hardware electronic or logic circuit, such as a discrete element circuit, a programmable logic device, such as PLD, PLA, FPGA or PAL, or the like. In general, any device, capable of implementing a finite state machine that is in turn capable of implementing one or more of the flowcharts shown in , ,  and , can be used to implement one or more of the watermark embedding systems  and  and the watermark extracting systems  and , respectively.","Each of the circuits and element of the various exemplary embodiments of the watermark embedding systems  and  and the watermark extracting systems  and  outlined above can be implemented as portions of a suitable programmed general purpose computer. Alternatively, each of the circuits and elements of the various exemplary embodiments of the watermark emphasis system  outlined above can be implemented as physically distinct hardware circuits within an ASIC, or using FPGA, a PDL, a PLA or a PAL, or using discrete logic elements or discrete circuit elements. The particular form each of the circuits and elements of the various exemplary embodiments of the watermark embedding systems  and  and the watermark extracting systems  and , can each outlined above will take is a design choice and will be obvious and predicable to those skilled in the art.","Moreover, the various exemplary embodiments of the watermark embedding systems  and  and the watermark extracting systems  and  outlined above and\/or each of the various circuits and elements discussed above can each be implemented as software routines, managers or objects executing on a programmed general purposed computer, a special purpose computer, a microprocessor or the like. In this case, the various exemplary embodiments of the watermark embedding systems  and  and the watermark extracting systems  and  and\/or each of the various circuits and elements discussed above can each be implemented as one or more routines embedded in the communication network, as a resource residing on a server, as a resource of a printer driver, or the like. The various exemplary embodiments of the watermark embedding systems  and  and the watermark extracting systems  and , and the various circuits and routines discussed above can also be implemented by physically incorporating one or more of the watermark embedding systems  and  and the watermark extracting systems  and  into a software and\/or hardware system, such as the hardware and software system of a web server or a client device.","While this invention has been described in conjunction with the exemplary embodiments outlined above, it is evident that many alternatives, modifications and variations will be apparent to those skilled in the art. Accordingly, the exemplary embodiments of the invention, as set forth above, are intended to be illustrative, not limiting. Various changes may be made without departing from the spirit and scope of the invention."],"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF EXEMPLARY EMBODIMENTS"],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Various exemplary embodiments of this invention will be described in detail, with reference to the following figures, wherein:",{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0035","num":"0034"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0037","num":"0036"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0038","num":"0037"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0039","num":"0038"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0040","num":"0039"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0041","num":"0040"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0042","num":"0041"},"figref":["FIG. 10","FIG. 4"]},{"@attributes":{"id":"p-0043","num":"0042"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0044","num":"0043"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0045","num":"0044"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0046","num":"0045"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0047","num":"0046"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0048","num":"0047"},"figref":"FIG. 16"}]},"DETDESC":[{},{}]}
