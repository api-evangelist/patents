---
title: Techniques for monitoring guest domains configured with alternate I/O domains
abstract: Techniques for monitoring guest domains configured with alternate I/O domains are disclosed. In one particular exemplary embodiment, the techniques may be realized as a method for monitoring guest domains configured with alternate Input/Output (I/O) domains comprising, installing cluster services in a control domain, installing cluster services in one or more alternate I/O domains, configuring, using at least one computer processor, an alternate service group to monitor services from multiple I/O domains, and configuring a logical domain service group, wherein the logical domain service group manages a guest domain which receives I/O services from either the control domain or the at least one alternate I/O domain which are monitored via the alternate I/O service group.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09143410&OS=09143410&RS=09143410
owner: Symantec Corporation
number: 09143410
owner_city: Mountain View
owner_country: US
publication_date: 20111221
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["FIELD OF THE DISCLOSURE","BACKGROUND OF THE DISCLOSURE","SUMMARY OF THE DISCLOSURE","DETAILED DESCRIPTION OF EXEMPLARY EMBODIMENTS"],"p":["The present disclosure relates generally to Input\/Output (I\/O) services monitoring and, more particularly, to techniques for monitoring guest domains configured with alternate I\/O domains.","Server virtualization and partitioning services may provide logical domains (LDoms). Each domain may be a full virtual machine with a reconfigurable set of hardware resources. Operating systems running inside of logical domains may be stopped, started, and rebooted independently. High availability clustering services may also be available for server virtualization products, which may provide failover ability for applications allowing applications to migrate systems or nodes in the event of a problem with a first system or node.","Server virtualization products may provide alternate I\/O domains to provide I\/O redundancy. However, high availability clustering services monitor I\/O services only from a primary I\/O domain and are not able to identify the state of the storage or network services provided through an alternate (secondary) I\/O domain. The lack of monitoring may lead to unnecessary downtime for applications with alternate I\/O domain configured. Additionally, high availability clustering may unnecessarily attempt to migrate the virtual machines from node or system due to a lack of awareness of an alternate I\/O domain.","In view of the foregoing, it may be understood that there may be significant problems and shortcomings associated with current techniques for monitoring virtual machines (guest domains) configured with alternate I\/O domains.","Techniques for monitoring guest domains configured with alternate I\/O domains are disclosed. In one particular exemplary embodiment, the techniques may be realized as a method for monitoring guest domains configured with alternate Input\/Output (I\/O) domains comprising, installing cluster services in a control domain, installing cluster services in one or more alternate I\/O domains, configuring, using at least one computer processor, an alternate service group to monitor services from multiple I\/O domains, and configuring a logical domain service group, wherein the logical domain service group manages a guest domain which receives I\/O services from either the control domain or the at least one alternate I\/O domain which are monitored via the alternate I\/O service group.","In accordance with other aspects of this particular exemplary embodiment, configuring storage service groups may comprise configuring a first storage service group in the control domain and the alternate I\/O domain on first system and configuring a second storage service group in the control domain and the alternate I\/O domain on second system.","In accordance with further aspects of this particular exemplary embodiment, configuring network service groups may comprise configuring a first network service group in the control domain and the alternate I\/O domain on first system and a second network service group in the control domain and the alternate I\/O domain on second system.","In accordance with additional aspects of this particular exemplary embodiment, the storage service groups may be configured as parallel type service groups in the event storage services are simultaneously accessible to all nodes in a cluster.","In accordance with additional aspects of this particular exemplary embodiment, the parallel types service groups may support at least one of: shared LUNs, shared Disks, and a Cluster Volume Manager (CVM) volume.","In accordance with additional aspects of this particular exemplary embodiment, the storage service groups may be configured as fail over type service groups in the event storage services are accessible to a single system in a cluster.","In accordance with additional aspects of this particular exemplary embodiment, the fail over type service groups may support a ZFS pool.","In accordance with additional aspects of this particular exemplary embodiment, the storage service groups may contain at least one of: a disk, a zpool, a mount, and a CVMVolDg resource.","In accordance with additional aspects of this particular exemplary embodiment, the network service group may contain at least one of: a NIC and a MultiNICB resource.","In accordance with additional aspects of this particular exemplary embodiment, the logical domain service group may fail over from a first system to a second system in the event that any I\/O services from all I\/O domains on the first system fail.","In accordance with additional aspects of this particular exemplary embodiment, the logical domain service group may fail over from a first system to a second system in the event that the control domain on the first system fails.","In accordance with additional aspects of this particular exemplary embodiment, the techniques may be realized as at least one non-transitory processor readable storage medium for storing a computer program of instructions configured to be readable by at least one processor for instructing the at least one processor to execute a computer process for performing the method.","In another particular exemplary embodiment, the techniques may be realized as an article of manufacture for monitoring guest domain configured with alternate I\/O domains. The article of manufacture may comprise at least one non-transitory processor readable storage medium and instructions stored on the at least one medium. The instructions may be configured to be readable from the at least one medium by at least one processor and thereby cause the at least one processor to operate so as to install cluster services in a control domain, install cluster services in one or more alternate I\/O domains, configure an alternate I\/O service group to monitor services from multiple I\/O domains, and configure a logical domain service group, wherein the logical domain service group manages a guest domain which receives I\/O services from either the control domain or the at least one alternate I\/O domain which are managed via the alternate I\/O service group.","In another particular exemplary embodiment, the techniques may be realized as a system for monitoring alternate I\/O domains comprising one or more processors communicatively coupled to a network, wherein the one or more processors are configured to install cluster services in a control domain, install cluster services in one or more alternate I\/O domains, configure an alternate I\/O service group to monitor services from multiple I\/O domains, and configure a logical domain service group, wherein the logical domain service group manages a guest domain and receives I\/O services from either the control domain or the at least one alternate I\/O domain which are managed via the alternate I\/O service group.","In accordance with additional aspects of this particular exemplary embodiment, configuring storage service groups may comprise configuring a first storage service group in the control domain and the alternate I\/O domains on first system and configuring a second storage service group in the control domain the alternate I\/O domains on second system.","In accordance with additional aspects of this particular exemplary embodiment, configuring network service groups may comprise configuring a first network service group in the control domain and the alternate I\/O domains on first system and configuring a second network service group in the control domains and the alternate I\/O domains on the second system.","In accordance with additional aspects of this particular exemplary embodiment, the storage service groups may be configured as parallel type service groups in the event storage services are simultaneously accessible to all systems in a cluster.","In accordance with additional aspects of this particular exemplary embodiment, the parallel types service groups may support at least one of: shared LUNs, shared Disks, and a Cluster Volume Manager (CVM) volume.","In accordance with additional aspects of this particular exemplary embodiment, the storage service groups are configured as fail over type service groups in the event storage services are accessible to a single system at a time in a cluster.","In accordance with additional aspects of this particular exemplary embodiment, the fail over type service groups service groups may support a ZFS Volume.","The present disclosure will now be described in more detail with reference to exemplary embodiments thereof as shown in the accompanying drawings. While the present disclosure is described below with reference to exemplary embodiments, it should be understood that the present disclosure is not limited thereto. Those of ordinary skill in the art having access to the teachings herein will recognize additional implementations, modifications, and embodiments, as well as other fields of use, which are within the scope of the present disclosure as described herein, and with respect to which the present disclosure may be of significant utility.",{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 1"},"Virtualization technology may be highly dependent on a host system hosting the virtual hosts. Providing high availability to critical components like storage and network services to virtual guests may be important in virtual environments as these services may be single point of failures (SPOF). To protect these services, virtualization software providers may offer an alternate I\/O domain technology for a virtualization platform (e.g., on UltraSPRAC\u2122 servers for Oracle VM Server for SPARC\u2122). With an alternate I\/O domain, an administrator may provide storage and network services in highly available manner from more than one domain to virtual guests.","Virtualization technology may allow the creation of multiple virtual systems on a single physical system. Each virtual system may be called a logical domain (LDom) and may run its own copy of an operating system. Certain embodiments of virtualization technology may use different roles such as, for example, control domains, service domains, Input\/Output (I\/O) domains, root domains, and guest domains.","A control domain may contain a logical domain manager. The logical domain manager may allow creation and management of other logical domains, and allocation of virtual resources to other domains. According to some embodiments, there may be one control domain per server or node. A control domain may be named as a primary domain. Referring to , Control Domain  of Server  is an exemplary control domain.","A service domain may provide virtual device services to other domains, such as, for example, a virtual switch, a virtual console concentrator, and a virtual disk server. According to some embodiments, any domain may be configured as a service domain. Referring to , VSW A and B and Vsw-private A and B are exemplary virtual switches.","An I\/O domain may have direct access to a physical I\/O device, such as, for example, a network card in a PCI EXPRESS (PCIe) controller. An I\/O domain may own (e.g., control) a PCIe root complex, or it may own a PCIe slot or on-board PCIe device by using the direct I\/O (DIO) feature. For example, Control Domain  of  may own Network Interface Card (NIC) A and Alternate I\/O Domain  may own NIC B.","A root domain may have a PCIe root complex assigned to it. A root domain may own or control the PCIe fabric and may provide one or more fabric-related services, such as fabric error handling. A root domain may also be an I\/O domain, since it may own and have direct access to physical I\/O devices.","A guest domain may be a non-I\/O domain that consumes virtual device services that are provided by one or more service domains. According to some embodiments, a guest domain may not have any physical I\/O devices, and may have only virtual I\/O devices, such as virtual disks and virtual network interfaces. Referring again to , Guest Domain  may be an exemplary guest domain.","An I\/O domain may have direct ownership and direct access to physical I\/O devices. An I\/O domain may be created by assigning a PCI EXPRESS (PCIe) bus or a PCIe endpoint device to a domain. An I\/O domain can own a PCIe root complex, or it can own a PCIe slot or on-board PCIe device by using the direct I\/O (DIO) feature. Because of direct access to physical I\/O devices, an I\/O domain may avoid the performance overhead that is associated with virtual I\/O. As a result, the I\/O performance on an I\/O domain may more closely match the I\/O performance on a bare-metal system. An I\/O domain may host virtual I\/O services to be used by other guest domains.","An I\/O domain other than primary domain may be referred to as alternate I\/O domain. Multiple I\/O domains may ensure that guest domains, or nodes within a cluster, continue to operate if services from one of the I\/O domain fails.","The maximum number of I\/O domains creatable on the server may depend on the number of PCIe buses that are available on the server. You may also create an I\/O domain by assigning a PCIe endpoint (or direct I\/O-assignable) device to a domain.","Storage  as shown in  may be local, remote, or a combination thereof to server . Storage  may utilize a redundant array of inexpensive disks (RAID), striped disks, hot spare disks, tape, disk, or other computer accessible storage. In one or more embodiments Storage  may be a storage area network (SAN), an internet small computer systems interface (iSCSI) SAN, a Fibre Channel SAN, a common Internet File System (CIFS), network attached storage (NAS), or a network file system (NFS).","As discussed in greater detail with reference to  below, clustering services such as high availability clustering services (e.g., Veritas Cluster Server\u2122 (VCS)) have not supported guest domains configured with multiple I\/O domains. With an alternate I\/O domain configuration, I\/O services for a logical domain guest can be provided either from control domain or alternate I\/O domain. Whenever there is a disruption to the I\/O services from primary domain the guest domain can continue to run using the I\/O services from an alternate I\/O domain. Clustering services should continue monitoring a guest domain after a transition of I\/O services from a control domain to an alternate I\/O domain occurs without failing over the guest domain to a second node or system.","According to at least one embodiment, an exemplary agent called AlternateIO may be developed to provide consolidated status information on storage and network availability to a guest domain. An exemplary type definition of the AlternateIO agent may be:","type AlternateIO (",{"@attributes":{"id":"p-0047","num":"0000"},"ul":{"@attributes":{"id":"ul0001","list-style":"none"},"li":{"@attributes":{"id":"ul0001-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0002","list-style":"none"},"li":["static str ArgList[ ]={StorageSG, NetworkSG}","str StorageSG{ }","str NetworkSG{ }",")\n\nAccording to this exemplary solution, clustering services may be installed in a control domain and in one or more other I\/O domains. Storage and network services may be monitored from a control domain and one or more alternate I\/O domains. Storage resources and network resources may be configured in separate service groups to have granular visibility. The SystemList of these service groups may be control domain and it's alternate I\/O domains on the physical system. Configuring an AlternateIO agent between control domains to have a list of service groups for storage and network services as its attribute values may allow monitoring I\/O services to guest domain from control domain and one or more alternate I\/O domains by an Alternate I\/O agent.\n"]}}}},"According to some embodiments, if the states of the storage and network service groups are ONLINE on any one of control domain or alternate I\/O domains, the state of AlternateIO resource may be ONLINE. The state of AlternateIO resource may be OFFLINE if any of the storage or network service groups is OFFLINE on all the control and other I\/O domains. According to some embodiments, a SystemList of a Service group containing an AlternateIO resource may contain control domains only. A StorageSG attribute of an AlternateIO resource may be a key-value pair with service groups that cater to the storage requirements of the guest domain managed by VCS as keys and may provide an option to set values to turn these service groups online or offline. The NetworkSG attribute of AlternateIO resource may be a key-value pair with service groups that cater to the network requirements of the guest domain managed by VCS as keys and may provide an option to set values to turn these service groups online or offline. The online entry point of AlternateIO agent may bring those service groups online on all the systems in the SystemList of the storage or network service groups if values for these service groups are set to 1. Similarly offline entry point of AlternateIO agent may bring the storage and network service groups offline on all the systems in their SystemList if value for these service groups are set to 1.","According to some embodiments, clustering service software may be installed in a control domain as well as in one or more alternate I\/O domains. Clustering service software may also be installed in one or more guest domains.","An exemplary embodiment of a clustering configuration supporting guest domains configured with alternate I\/O domains is described in reference to  below.",{"@attributes":{"id":"p-0051","num":"0053"},"figref":"FIG. 2","b":["200","200","200","212","210","214","217","218","220","222","224","226","228","230","232","233","234","237","238","235","290","235","239","240","242","246","212","228","247","212","230","248","212","250","252"]},"Bus  allows data communication between central processor  and system memory , which may include read-only memory (ROM) or flash memory (neither shown), and random access memory (RAM) (not shown), as previously noted. The RAM is may be the main memory into which the operating system and application programs may be loaded. The ROM or flash memory can contain, among other code, the Basic Input-Output system (BIOS) which controls basic hardware operation such as the interaction with peripheral components. Applications resident with computer system  may be stored on and accessed via a computer readable medium, such as a hard disk drive (e.g., fixed disk ), an optical drive (e.g., optical drive ), a floppy disk unit , or other storage medium. For example, alternate I\/O domain monitoring module  may be resident in system memory .","Storage interface , as with the other storage interfaces of computer system , can connect to a standard computer readable medium for storage and\/or retrieval of information, such as a fixed disk drive . Fixed disk drive  may be a part of computer system  or may be separate and accessed through other interface systems. Modem  may provide a direct connection to a remote server via a telephone link or to the Internet via an internet service provider (ISP). Network interface  may provide a direct connection to a remote server via a direct network link to the Internet via a POP (point of presence). Network interface  may provide such connection using wireless techniques, including digital cellular telephone connection, Cellular Digital Packet Data (CDPD) connection, digital satellite data connection or the like.","Many other devices or subsystems (not shown) may be connected in a similar manner (e.g., document scanners, digital cameras and so on). Conversely, all of the devices shown in  need not be present to practice the present disclosure. The devices and subsystems can be interconnected in different ways from that shown in . Code to implement the present disclosure may be stored in computer-readable storage media such as one or more of system memory , fixed disk , optical disk , or floppy disk . Code to implement the present disclosure may also be received via one or more interfaces and stored in memory. The operating system provided on computer system  may be MS-DOS\u00ae, MS-WINDOWS\u00ae, OS\/2\u00ae, OS X\u00ae, UNIX\u00ae, Linux\u00ae, or another known operating system.","Power manager  may monitor a power level of battery . Power manager  may provide one or more APIs (Application Programming Interfaces) to allow determination of a power level, of a time window remaining prior to shutdown of computer system , a power consumption rate, an indicator of whether computer system is on mains (e.g., AC Power) or battery power, and other power related information. According to some embodiments, APIs of power manager  may be accessible remotely (e.g., accessible to a remote backup management module via a network connection). According to some embodiments, battery  may be an Uninterruptable Power Supply (UPS) located either local to or remote from computer system . In such embodiments, power manager  may provide information about a power level of an UPS.","Referring to , there is shown a block diagram depicting a clustering architecture for monitoring guest domains configured with alternate I\/O domains in accordance with an embodiment of the present disclosure.","As illustrated in , exemplary clustering embodiment  may contain nodes  and  and each may be implemented on separate platforms or systems. Node  may include multiple domains including guest domain , primary I\/O domain A, and alternate I\/O domain .","Primary I\/O domain A may contain a logical domain service group such as LDom SG . Primary I\/O domain A may also contain Alternate I\/O service group , storage service group  and network service group . Primary I\/O domain A may contain virtual switches VSW A, VSW B, and virtual disk service VDS A.","Alternate I\/O domain  may contain network service group  and storage service group . Alternate I\/O domain A may contain virtual switches VSW C, VSW D, and virtual disk service VDS B.","Virtual switches of domains may be connected by Network Interface Cards (NICs) to a network or to a cluster interconnect such as, for example, a Low Latency Transport (LLT) interconnect. Virtual Disk Services of domains may be connected to a storage connection.","Node  may include multiple domains including guest domain , primary I\/O domain B, and alternate I\/O domain . Primary I\/O domain B may contain a logical domain service group such as LDom SG . Primary I\/O domain B may also contain Alternate I\/O service group , storage service group  and network service group . Primary I\/O domain B may contain virtual switches VSW E, VSW F, and virtual disk service VDS C.","Alternate I\/O domain  may contain network service group  and storage service group . Alternate I\/O domain  may contain virtual switches VSW G, VSW H, and virtual disk service VDS D.","Storage  may be local, remote, or a combination thereof to nodes  and . Storage  may utilize a redundant array of inexpensive disks (RAID), striped disks, hot spare disks, tape, disk, or other computer accessible storage. In one or more embodiments, storage  may be a storage area network (SAN), an internet small computer systems interface (iSCSI) SAN, a Fibre Channel SAN, a common Internet File System (CIFS), network attached storage (NAS), or a network file system (NFS).","As described below, embodiments monitor the availability of storage and network I\/O services for a virtual machine when virtual I\/O services are made available through both the control and alternate (secondary) I\/O domains. Embodiments may ensure that the applications in a guest domain run seamlessly even if there is a storage or network I\/O service loss from one of the I\/O domains.","Some embodiments may use Oracle VM Server for SPARC features such as \u2018mpgroup\u2019 to monitor storage I\/O services from multiple I\/O domains. If the storage connectivity is provided from both primary domain and alternate I\/O domain, then appropriate \u201cmpgroup\u201d may be set for virtual disk service (vds). Virtual disk multi-pathing may allow a user to configure a virtual disk on a guest domain to access its back-end storage by more than one storage path. The storage paths may lead through different service domains that provide access to the same back-end storage, such as a disk Logical Unit Number (LUN). This feature may allow a virtual disk in a guest domain to remain accessible even if one of the service domains goes down.","According to some embodiments, a new agent AlternateIO, may monitor storage and network I\/O services from both a control domain and one or more alternate I\/O domains to provide a consolidated status of storage and network I\/O services. An AlternateIO agent may check for the availability of at least one I\/O path either from control domain or from one or more alternate I\/O domains.","According to some embodiments, to facilitate AlternateIO agent access to the status of the I\/O services, clustering software may be installed in control domain and in one or more I\/O domains and the storage and network I\/O services may be configured in a parallel service group between the control domain and one or more alternate I\/O domains. The storage and network I\/O services may be configured in separate service groups if granular control is desired. The storage service group may contain clustering resources to monitor underlying storage devices such as LUN, ZFS pool, or Cluster Volume Manager (CVM) volume, and other storage resources.","The network service group may contain clustering resources to monitor the underlying network devices such as NIC, and other network resources.","AlternateIO agent resource may be configured in a separate service group. An AlternateIO service group may be configured as a fail over or parallel service group, which may be based on the type of underlying storage devices. The attributes of AlternateIO, storage and network resources may be localized based on a configuration. The LDom resource may be configured as a fail over resource between control domains in a separate service group and may will have a group dependency (online local hard) with service group of AlternateIO resource.","To configure clustering software (e.g., Veritas Cluster Server) to manage a guest domain having I\/O services exported from multiple I\/O domains, the clustering software may be installed on a control domain as well as one or more alternate I\/O domains. Considering an example based on , where clustering software manages a guest domain (e.g., guest domain ) using LDom agent (e.g., LDOM SG ) as failover resource between two physical systems (e.g., Nodes  and ) and the guest domain has I\/O services exported from control or primary I\/O domain A and alternate I\/O domain . In this scenario, clustering software may be configured as a four node cluster consisting of primary I\/O domain A (the control domain) and alternate I\/O domain  on first physical node (node ) and primary I\/O domain B and alternate I\/O domain  on the second physical node (node ).","Virtual disk multipathing may be configured in the control domains. If a back end storage device exported to a guest domain as virtual disk is having paths available through primary domain and alternate I\/O domain, virtual disk multipathing may be enabled. Enabling this feature may ensure that disks in the guest domain remain accessible even if services from one I\/O domain goes down or even one service domain goes down. In other words, when the guest domain accesses the virtual disk, the virtual disk driver goes through one of the service domains to access the back-end storage. If the virtual disk driver cannot connect to one service domain, the virtual disk attempts to reach the back-end storage through a other service domain. To enable virtual disk multipathing, the virtual disk back end may be exported from each service domain and the virtual disk may be added to the same multipathing group (mpgroup). The mpgroup may be identified by a name and may be configured when you export the virtual disk back end. According to an exemplary embodiment, virtual disk multipathing may be configured by:","exporting the virtual disk back end from the primary service domain;","# ldm add-vdsdev mpgroup=data backend-path1 volume@primary-vds0","where backend-path1 may be the path to the virtual disk back end from the primary domain;","exporting the same virtual disk back end from the alternate service domain;","#ldm add-vdsdev mpgroup=data backend-path2 volume@alternate-vds0","where backend-path2 may be the path to the virtual disk back end from the alternate domain.","Export the virtual disk to the guest domain; and","# ldm add-vdisk disk-name volume@primary-vds0 ldg Configuration of clustering agents for storage and network services may be exported to guest domain.","Exemplary back end storage device that can be exported to guest domain may include: a LUN, Disk, CVM volume, a flat file on a file system, zpool. The storage resources exported to the guest logical domain can be managed by storage agents like Disk, Zpool, DiskGroup, Volume, Mount, CVMVolDG, etc. The resources may be localized to give different attribute values specific to nodes. The storage resources may be configured in a parallel service group between a control domain and an alternate I\/O domain in a physical node. A parallel service group may be configured when a storage resource can be online on a control domain as well as on an alternate I\/O domain. Such service groups may be configured on each physical node and may have a control domain and an alternate I\/O domain in their SystemList. Disk reservation may be used when configuring a DiskGroup shared between multiple physical nodes that can be simultaneously imported on multiple nodes.","Network resources may be exported to a guest logical domain and managed with agents such as, for example, NIC or MultiNICB. The resources may be localized to provide different attribute values specific to nodes. Network resources may be configured in a parallel service group between control domain and alternate I\/O domain in a physical node when a network resource can be online on a control domain as well as alternate I\/O domain. Such service groups may be configured on each physical node and may have a control domain and an alternate I\/O domain in their SystemList.","An AlternateIO resource may be configured on a separate service group as a fail over service group. The SystemList of a service group may be containing only the control domains. The StorageSG attribute of the AlternateIO resource may be storage service groups configured to manage storage resources exported to guest domain. A StorageSG attribute may be localized to give storage service group names specific to physical nodes. A NetworkSG attribute of the AlternateIO resource may be network service groups configured to manage network resources exported to a guest domain. A NetworkSG attribute may be localized to provide network service group names specific to physical nodes.","A guest domain may be managed by a LDom resource and may be configured in a separate service group as a fail over service group with SystemList containing only the control domains on the nodes. An LDom service group may have service group dependency (online local hard) with an AlternateIO service group.",{"@attributes":{"id":"p-0083","num":"0085"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Failover scenarios"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"49pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"On control","On alternate I\/O",{}]},{"entry":["Scenario","domain","domain","VCS behavior"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}},{"entry":["State of each","Online","Online","No fail over"]},{"entry":["storage","Offline\/Fault","Online","No fail over"]},{"entry":["service group","Online","Offline\/Fault","No fail over"]},{"entry":["configured in","Offline\/Fault","Offline\/Fault","Fail over"]},{"entry":["the StorageSG",{},{},{}]},{"entry":["attribute of",{},{},{}]},{"entry":["Alternate IO",{},{},{}]},{"entry":["resource",{},{},{}]},{"entry":["State of each","Online","Online","No fail over"]},{"entry":["of the network","Offline\/Fault","Online","No fail over"]},{"entry":["service group","Online","Offline\/Fault","No fail over"]},{"entry":["configured on","Offline\/Fault","Offline\/Fault","Fail over"]},{"entry":["NetworkSG",{},{},{}]},{"entry":["attribute of",{},{},{}]},{"entry":["AlternateIO",{},{},{}]},{"entry":["resource",{},{},{}]},{"entry":["Node state","Up","up","No fail over"]},{"entry":[{},"Up","down","No fail over"]},{"entry":[{},"down","up","Fail over"]},{"entry":[{},"down","down","Fail over"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]}}]}}},"AlternateIO agent may monitor storage and network service groups when a guest domain is managed by clustering services with multiple I\/O domains configured to provide storage and network I\/O services redundancy to guest domains. AlternateIO agent may provide consolidated status of storage and network connectivity from multiple I\/O domains.","The state of AlternateIO resource may indirectly depend upon the state of storage and\/or network resources that are part of the service groups it is monitoring.","Exemplary Agent functions may include:","Online: May online the storage and network service groups if value of the key value pair type attribute StorageSG is set to 1 else do nothing.","Offline: May offline the storage and network service groups if value of the key value pair type attribute StorageSG is set to 1 else do nothing.","Monitor: May monitor the state of storage and network service groups. The resource may show online if each storage service group and each network service group is online on one of the primary or alternate I\/O domains or both. The resource may show offline if any of the storage service groups or any of the network service groups is not online on both the primary and alternate I\/O domains.","An exemplary resource type definition for an AlternateIO agent is provided below:","type AlternateIO (",{"@attributes":{"id":"p-0089","num":"0000"},"ul":{"@attributes":{"id":"ul0003","list-style":"none"},"li":{"@attributes":{"id":"ul0003-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0004","list-style":"none"},"li":["static str ArgList[ ]={StorageSG, NetworkSG}","str StorageSG{ }","str NetworkSG{ }\n\n)\n\nSample Configurations\n\nA main.cf example that shows the AlternateIO resource configuration is given below:\n"]}}}},{"@attributes":{"id":"p-0090","num":"0094"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"182pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},{},"include \u2033types.cf \u2033"]},{"entry":[{},{},"cluster altio-cluster ("]},{"entry":[{},{},"UserNames = { admin = XXXXXXXXXXX }"]},{"entry":[{},{},"Administrators = { admin }"]},{"entry":[{},{},"HacliUserLevel = COMMANDROOT"]},{"entry":[{},{},"\u2003)"]},{"entry":[{},{},"system primary1 ("]},{"entry":[{},{},"\u2003)"]},{"entry":[{},{},"system alternate1 ("]},{"entry":[{},{},"\u2003)"]},{"entry":[{},{},"system primary2 ("]},{"entry":[{},{},"\u2003)"]},{"entry":[{},{},"system alternate2 ("]},{"entry":[{},{},"\u2003)"]},{"entry":[{},{},"group aiosg ("]},{"entry":[{},{},"\u2003SystemList = { primary1 = 0, primary2 = 1 }"]},{"entry":[{},{},"\u2003AutoStartList = { primary1 }"]},{"entry":[{},{},"\u2003TriggerPath = \u2033bin\/AlternateIO\u2033"]},{"entry":[{},{},"\u2003TriggersEnabled @primary1 = { PREONLINE }"]},{"entry":[{},{},"\u2003TriggersEnabled @primary2 = { PREONLINE }"]},{"entry":[{},{},"\u2003)"]},{"entry":[{},{},"\u2003AlternateIO altiores ("]},{"entry":[{},{},"\u2003\u2003StorageSG @primary1 = { primary1-strsg = 1 }"]},{"entry":[{},{},"\u2003\u2003StorageSG @primary2 = { primary2-strsg = 1 }"]},{"entry":[{},{},"\u2003\u2003NetworkSG @primary1 = { primary1-nwsg = 0 }"]},{"entry":[{},{},"\u2003\u2003NetworkSG @primary2 = { primary2-nwsg = 0 }"]},{"entry":[{},{},"\u2003)"]},{"entry":[{},{},"\u2003\/\/ resource dependency tree"]},{"entry":[{},{},"\u2003\/\/"]},{"entry":[{},{},"\u2003\/\/ group aiosg"]},{"entry":[{},{},"\u2003\/\/ {"]},{"entry":[{},{},"\u2003\/\/ AlternateIO altiores"]},{"entry":[{},{},"\u2003\/\/ }"]},{"entry":[{},{},"group ldomsg ("]},{"entry":[{},{},"\u2003SystemList = { primary1 = 0, primary2 = 1 }"]},{"entry":[{},{},"\u2003AutoStartList = { primary1 }"]},{"entry":[{},{},"\u2003)"]},{"entry":[{},{},"\u2003LDom ldmguest ("]},{"entry":[{},{},"\u2003\u2003LDomName = ldg1"]},{"entry":[{},{},"\u2003)"]},{"entry":[{},{},"\u2003requires group aiosg online local hard"]},{"entry":[{},{},"\u2003\/\/ resource dependency tree"]},{"entry":[{},{},"\u2003\/\/"]},{"entry":[{},{},"\u2003\/\/ group ldomsg"]},{"entry":[{},{},"\u2003\/\/ {"]},{"entry":[{},{},"\u2003\/\/ LDom ldg1"]},{"entry":[{},{},"\u2003\/\/ }"]},{"entry":[{},{},"group primary1-strsg ("]},{"entry":[{},{},"\u2003SystemList = { primary1 = 0, alternate1 = 1 }"]},{"entry":[{},{},"\u2003AutoStart = 0"]},{"entry":[{},{},"\u2003Parallel = 1"]},{"entry":[{},{},"\u2003TriggerPath = \u2033bin\/AlternateIO\/StorageSG\u2033"]},{"entry":[{},{},"\u2003TriggersEnabled @primary1 = { PREONLINE }"]},{"entry":[{},{},"\u2003TriggersEnabled @alternate1 = { PREONLINE }"]},{"entry":[{},{},"\u2003AutoStartList = { primary1, alternate1 }"]},{"entry":[{},{},"\u2003)"]},{"entry":[{},{},"\u2003Zpool zpres1 ("]},{"entry":[{},{},"\u2003\u2003PoolName @primary1= zfsprim"]},{"entry":[{},{},"\u2003\u2003PoolName @alternate1 = zfsmirr"]},{"entry":[{},{},"\u2003\u2003ForceOpt = 0"]},{"entry":[{},{},"\u2003)"]},{"entry":[{},{},"\u2003\/\/ resource dependency tree"]},{"entry":[{},{},"\u2003\/\/"]},{"entry":[{},{},"\u2003\/\/ group primary1-strsg"]},{"entry":[{},{},"\u2003\/\/ {"]},{"entry":[{},{},"\u2003\/\/ Zpool zpres1"]},{"entry":[{},{},"\u2003\/\/ }"]},{"entry":[{},{},"group primary1-nwsg ("]},{"entry":[{},{},"\u2003SystemList = { primary1 = 0, alternate1 = 1 }"]},{"entry":[{},{},"\u2003Parallel = 1"]},{"entry":[{},{},"\u2003)"]},{"entry":[{},{},"\u2003Phantom ph1 ("]},{"entry":[{},{},"\u2003)"]},{"entry":[{},{},"\u2003NIC nicres1 ("]},{"entry":[{},{},"\u2003\u2003Device @primary1 = nxge3"]},{"entry":[{},{},"\u2003\u2003Device @alternate1 = nxge4"]},{"entry":[{},{},"\u2003)"]},{"entry":[{},{},"\u2003\/\/ resource dependency tree"]},{"entry":[{},{},"\u2003\/\/"]},{"entry":[{},{},"\u2003\/\/ group primary1-nwsg"]},{"entry":[{},{},"\u2003\/\/ {"]},{"entry":[{},{},"\u2003\/\/ Phantom ph1"]},{"entry":[{},{},"\u2003\/\/ Proxy nicres1"]},{"entry":[{},{},"\u2003\/\/ }"]},{"entry":[{},{},"group primary2-strsg ("]},{"entry":[{},{},"\u2003SystemList = { primary2 = 0, alternate2 = 1 }"]},{"entry":[{},{},"\u2003Parallel = 1"]},{"entry":[{},{},"\u2003TriggerPath = \u2033bin\/AlternateIO\/StorageSG\u2033"]},{"entry":[{},{},"\u2003TriggersEnabled @primary2 = { PREONLINE }"]},{"entry":[{},{},"\u2003TriggersEnabled @alternate2 = { PREONLINE }"]},{"entry":[{},{},"\u2003)"]},{"entry":[{},{},"\u2003Zpool zpres2 ("]},{"entry":[{},{},"\u2003\u2003PoolName @ primary2 = zfsprim"]},{"entry":[{},{},"\u2003\u2003PoolName @ alternate2 = zfsmirr"]},{"entry":[{},{},"\u2003\u2003ForceOpt = 0"]},{"entry":[{},{},"\u2003)"]},{"entry":[{},{},"\u2003\/\/ resource dependency tree"]},{"entry":[{},{},"\u2003\/\/"]},{"entry":[{},{},"\u2003\/\/ group primary2-strsg"]},{"entry":[{},{},"\u2003\/\/ {"]},{"entry":[{},{},"\u2003\/\/ Zpool zpres2"]},{"entry":[{},{},"\u2003\/\/ }"]},{"entry":[{},{},"group primary2-nwsg ("]},{"entry":[{},{},"\u2003SystemList = { primary2 = 0, alternate2 = 1 }"]},{"entry":[{},{},"\u2003Parallel = 1"]},{"entry":[{},{},"\u2003)"]},{"entry":[{},{},"\u2003Phantom ph2 ("]},{"entry":[{},{},"\u2003)"]},{"entry":[{},{},"\u2003NIC nicres2 ("]},{"entry":[{},{},"\u2003\u2003Device @primary2 = nxge3"]},{"entry":[{},{},"\u2003\u2003Device @alternate2 = nxge4"]},{"entry":[{},{},"\u2003)"]},{"entry":[{},{},"\u2003\/\/ resource dependency tree"]},{"entry":[{},{},"\u2003\/\/"]},{"entry":[{},{},"\u2003\/\/ group primary2-nwsg"]},{"entry":[{},{},"\u2003\/\/ {"]},{"entry":[{},{},"\u2003\/\/ Phantom ph2"]},{"entry":[{},{},"\u2003\/\/ Proxy nicres2"]},{"entry":[{},{},"\u2003\/\/ }"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}}}},"Referring to , there is shown an alternate I\/O domain monitoring module  in accordance with an embodiment of the present disclosure. As illustrated, the alternate I\/O domain monitoring module  may contain one or more components including alternate I\/O service group module , storage service group module , network service group module , and error logging and reporting module .","The description below describes network elements, computers, and\/or components of a system and method for monitoring guest domain configured with alternate I\/O domains that may include one or more modules. As used herein, the term \u201cmodule\u201d may be understood to refer to computing software, firmware, hardware, and\/or various combinations thereof. Modules, however, are not to be interpreted as software which is not implemented on hardware, firmware, or recorded on a processor readable recordable storage medium (i.e., modules are not software per se). It is noted that the modules are exemplary. The modules may be combined, integrated, separated, and\/or duplicated to support various applications. Also, a function described herein as being performed at a particular module may be performed at one or more other modules and\/or by one or more other devices instead of or in addition to the function performed at the particular module. Further, the modules may be implemented across multiple devices and\/or other components local or remote to one another. Additionally, the modules may be moved from one device and added to another device, and\/or may be included in both devices.","Alternate I\/O service group module  may monitor storage and network I\/O services from both a control domain and one or more alternate I\/O domains to provide a consolidated status of storage and network I\/O services. Alternate I\/O service group module  may check for the availability of at least one I\/O path either from control domain or from one or more alternate I\/O domains. Alternate I\/O service group module  may monitor storage and network service groups when a guest domain is managed by clustering services with multiple I\/O domains configured to provide storage and network I\/O services redundancy to guest domains. Alternate I\/O service group module  may provide consolidated status of storage and network connectivity from multiple I\/O domains.","Storage service group module  may monitor the status of storage services to a logical domain and may provide status information to Alternate I\/O service group module .","Network service group module  may monitor the status of network services to a logical domain and may provide status information to Alternate I\/O service group module .","Error logging and reporting module  may produce logs, reports, or other information associated with monitoring guest domains configured with alternate I\/O domains.","Referring to , there is depicted a method  for monitoring guest domains configured with alternate I\/O domains in accordance with an embodiment of the present disclosure. At block , the method  may begin.","At block , cluster services may be installed in a control domain.","At block , cluster services may be installed in each additional I\/O domain (e.g., one or more alternate I\/O domains).","At block , storage services may be configured. For example, back end storage device may be exported to guest logical domain (e.g., exported backend storage may include: a LUN, Disk, a flat file on a file system, zpool or CVM volume). The storage resources exported to the guest logical domain can be managed by storage agents such as, for example, Disk, Zpool, Mount, CVMVolDG etc.","At block , storage service groups may be configured. Storage service groups may be configured for each physical node. Having a storage service group configured for each node may prevent failover to a second node if a first node has an online I\/O domain with storage services.","At block , network service groups may be configured. Network service groups may be configured for each physical node. Having a network service group configured for each node may prevent failover to a second node if a first node has an online I\/O domain with network services.","At block , a service group such as, for example, an alternate I\/O service group may be configured to monitor I\/O services from multiple I\/O domains. A consolidated status of the multiple I\/O domains may be provided to a logical domain service group.","At block , a logical domain service group may be configured. The logical domain service group may use a status from an alternate I\/O service group to monitor available I\/O services and to determine whether a failover is necessary.","At block , the method  may end.","At this point it should be noted that monitoring guest domain configured with alternate I\/O domains in accordance with the present disclosure as described above typically involves the processing of input data and the generation of output data to some extent. This input data processing and output data generation may be implemented in hardware or software. For example, specific electronic components may be employed in an alternate I\/O domain monitoring module or similar or related circuitry for implementing the functions associated with monitoring guest domains configured with alternate I\/O domains in accordance with the present disclosure as described above. Alternatively, one or more processors operating in accordance with instructions may implement the functions associated with monitoring guest domains configured with alternate I\/O domains in accordance with the present disclosure as described above. If such is the case, it is within the scope of the present disclosure that such instructions may be stored on one or more processor readable storage media (e.g., a magnetic disk or other storage medium), or transmitted to one or more processors via one or more signals embodied in one or more carrier waves.","The present disclosure is not to be limited in scope by the specific embodiments described herein. Indeed, other various embodiments of and modifications to the present disclosure, in addition to those described herein, will be apparent to those of ordinary skill in the art from the foregoing description and accompanying drawings. Thus, such other embodiments and modifications are intended to fall within the scope of the present disclosure. Further, although the present disclosure has been described herein in the context of a particular implementation in a particular environment for a particular purpose, those of ordinary skill in the art will recognize that its usefulness is not limited thereto and that the present disclosure may be beneficially implemented in any number of environments for any number of purposes. Accordingly, the claims set forth below should be construed in view of the full breadth and spirit of the present disclosure as described herein."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["In order to facilitate a fuller understanding of the present disclosure, reference is now made to the accompanying drawings, in which like elements are referenced with like numerals. These drawings should not be construed as limiting the present disclosure, but are intended to be exemplary only.",{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 5"}]},"DETDESC":[{},{}]}
