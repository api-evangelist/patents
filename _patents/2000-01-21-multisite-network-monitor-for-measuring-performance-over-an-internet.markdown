---
title: Multi-site network monitor for measuring performance over an internet
abstract: An apparatus and method of measuring the performance of a computer network by determining transit times of packets between two selected sites connected by the computer network and the public switched telephone network and deriving from those transit times a measure of the performance of the computer network. Software establishes a network connection and a circuit switched connection between the two selected sites. A pair of messages is sent, at the same or nearly the same time, over the network connection and the circuit-switched connection and the transit time for a one way trip over the network connection is derived from the trips over the network and circuit-switched connections. This furnishes a measurement from which performance statistics of the computer network can be derived.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=06976069&OS=06976069&RS=06976069
owner: 
number: 06976069
owner_city: 
owner_country: 
publication_date: 20000121
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","BRIED DESCRIPTION OF INVENTION","BRIEF SUMMARY OF THE INVENTION"],"p":["This application claims priority to U.S. Provisional Application entitled \u201cA Multi-Site Network Monitor For Measuring Performance Over An Internet\u201d, filed on Apr. 30, 1999, Ser. No. 60\/131,737.","1. Field of the Invention","The present invention relates generally to field of performance monitoring and measurement and specifically to performance measurement of a computer network.","2. Description of the Related Art","Currently Internet Service Providers (ISPs) are encouraging customers to put mission-critical data on sites connected to the Internet. However, these providers are not supplying tools to the users to monitor performance parameters relating to the quality of service in retrieving that data over the Internet. Monitoring performance on the Internet helps to ensure that the Internet service providers live up their agreements to regarding the quality of service.","One reason that performance monitoring tools are not being provided is that some ISPs believe that such tools would be a security risk to the network because the tools would need to use secure network management protocols to carry out the monitoring task.","What is needed is a system for monitoring network performance that does not create a security risk on the network, yet still provides a way of determining whether ISPs are living up to a promised level of service.","A method in accordance with an embodiment of the present invention is a method of measuring the performance of a computer network. The method includes establishing a public switched telephone network (PSTN) connection between a first computer system and a second computer system and establishing a network connection between the first computer system and a second computer system, where the network connection includes the computer network. The method further includes transmitting a first digital message from the first computer system to the second computer system over the PSTN connection, at the same or nearly the same time as transmitting the first digital message, transmitting a second digital message from the first computer system to the second computer system over the network connection, and receiving a third digital message from the second site over one of the network connection and PSTN connection, in response to the second digital message, where the third digital message contains timing information regarding the receipt of the first and second digital messages at the second computer system. From the third message a one-way transit time between the first and second computer systems as an indication of the performance of the computer network is derived.","A method in accordance with another embodiment of the present invention includes establishing a public switched telephone network (PSTN) connection between the first and second computer systems, and establishing a network connection between a first and second computer systems, where the network connection includes the computer network. The method further includes a transmitting a first packet of information from the first computer system to the second computer system over the PSTN connection, transmitting a second packet of information, at the same or nearly the same time as transmitting the first packet, from the first computer to the second computer system over the network connection, and receiving a third packet of information over one of the computer network and the PSTN from the second computer system, in response to the second system receiving the second packet of information, where the third packet contains timing information regarding the receipt of the first and second packets at the second computer system; and. From the third packet a one-way transit time between the first and second computer systems as an indication of the performance of the computer network is derived.","A method in accordance with yet another embodiment of the present invention includes establishing a network and a PSTN connection between a main computer system and one or more other computer systems connected to the network and the PSTN and transmitting a pair of messages at the same or nearly the same time to each of the other computer systems, where one of the pair travels over the PSTN and the other of the pair travels over the computer network. The method further includes receiving responses form each of the other computer systems to the transmitted messages, where each of the responses contains timing information regarding the receipt of the pair of messages at each of the other computer systems, and determining a one way transit time as an indication of the performance of the computer network from the responses.","A method in accordance with yet another embodiment of the present invention includes establishing a network connection between a first computer system and a second computer system, where each system is connected to the computer network and establishing a high-speed connection between the first and second computer systems, where the high-speed connection is separate from the network connection. The method further includes transmitting a pair of messages at the same or nearly the same time from the first to the second computer system, one of the pair traveling over the high-speed connection and the other of the pair traveling over the network connection, receiving a response message from the second computer system to the message sent over the network connection, where the response contains timing information regarding the receipt of the pair of messagese at the second computer system, and determining a one way transit time as an indication of the performance of the computer network from the response.","A system in accordance with an embodiment of the present invention includes a system for measuring performance of a computer network. The system includes a first program operating on a first computer system connected through the computer network to a second computer system and connected through the public switched telephone network (PSTN) to the second computer system and a second program operating on the second computer system. The first program is operative to transmit, at the same or nearly the same time, a first digital message over the PSTN to the second computer system, and a second digital message over the computer network to the second computer system. The second program is operative to send a third digital message over one of the computer network and the PSTn to the first computer system in response to the second digital message, where the third message contains timing information regarding the receipt of the first and second packets at the second computer system. The first program operates to derive from the third packet a one-way transit time between the first and second computer systems as an indication of the performance of the computer network.","A system in accordance with another embodiment of the present invention includes a first program operating on a first computer system connected through the computer network to a second and a third computer system and connected through the public switched telephone network (PSTN) to the second computer and third computer systems and a second program operating on the second and third computer systems. The first program is operative to transmit, at the same or nearly the same time, a first digital message over the PSTN and a second digital message over the computer network to the second computer system, and operative to transmit, at the same or nearly the same time, a third digital message over the PSTN and a fourth digital message over the computer network to the third computer system. The second program is operative to transmit fifth and sixth digital messages over one of the computer network and the PSTN to the first computer system in response to the second and fourth digital messages, respectively, where the fifth message contains timing information regarding the receipt of the first and second messages at the second computer system and the sixth message contains information regarding the receipt of the third and fourth messages at the third computer system. The first program operates to derive from the fifth message a one-way transit time between the first and second computer systems as and sixth message a one-way transit time between the first and third computer systems as an indication of the performance of the computer network.","Site A determines the approximate transit time of the second message by obtaining the difference in time between t3 and t2. The actual transit time of the second message is the difference between t3 and t1. As mentioned above, because t2\u2212t1 is small, t3\u2212t2 is a good approximation to the actual transit time.","Site A obtains the difference in time between t3 and t2 by either receiving that difference as computed by Site B and transmitted by Site B in the third message or by receiving both the t2 and t3 times as separate times in the third message from Site B. In the first case, Site A obtains the difference directly from the third message and in the second case Site A computes the difference from the time information in the third message.","Regardless of how Site A obtains the approximation to the transit time of the second message, this approximation functions as an indication of the performance of the computer network with respect to the path from Site A to Site B.","In some embodiments, Site A also determines the actual round trip time through the computer network, based on the time at which the first (and second) messages were sent and the time at which the third message was received. This time is t5\u2212t1.","From the actual round trip time, Site A determines the transit time of the third message from Site B to Site A. The actual transit time of the third message is t5\u2212t4. An approximation of this transit time is (t5\u2212t1)\u2212(t3\u2212t2). This approximation differs from the actual transit time for two reasons. The first is the small transit time t2\u2212t1 and the second is a small amount of processing time between t4 and t3 on Site B. This processing time can be minimized but the t2\u2212t1 transit time still remains. However, compared to the actual transit time of the third message, the transit time t2\u2212t1 is small and can be neglected in practice.","The result of these determinations is a measure of the performance of the computer network (e.g., the Internet) between the routers connecting the two Sites. The transit time of the second digital message gives a measure of the performance of the computer network in the direction from Site A to Site B and the transit time of the third digital message gives a measure of performance of the computer network in the direction from Site B to Site A.","Although, as stated, specific processors, operating systems, and software supporting the invention are not required, an implementation based on Microsoft Windows NT\/98 with a JAVA control program managing the system is preferred because of the potential complexity of the system. This preferred implementation allows the designer to take advantage of the built-in network support in JAVA (such as sockets, URLs, etc.) and of the availability of a JAVA ISDN API for the ISDN*tek hardware. The software architecture is shown in FIG. .","The software architecture shown in  connects site A  to another arbitrary site N . All of the software shown to the left of the PSTN  executes on a computer system located at site A . The ISDN hardware of  is represented by the ISDN dashed line  connecting to the PSTN via two B-channels  and .","The software driver that directly controls the hardware is WinISDN , which has a WinISDN API . WinISDN  supports an international open standard Application Programming Interface developed by ISDN*tek (San Gregorio), NetManage, Inc. (Cupertino, Calif.), and PSI (Performance Systems Inc., (Hearndon, Va.), and used by over twenty ISDN companies world wide.","The NDIS-to-WinISDN module translates Microsoft's NDIS (Network Driver Interface Specification)  to WinISDN , to allow the Microsoft \u201cDIALUP NETWORKing\u201d software  to dial and connect to the Internet . The JAVAISDN.DLL  is provided by ISDN*tek to allow JAVA language application programs to control ISDN hardware via the JAVA ISDN API . The JAVA Networking API  allows JAVA applications to manage the network interface via NDIS and Microsoft DIALUP NETWORKing.","The Internet Connection Subsystem  manages connections ,  and  between site A  and site N  across the Internet . The ISDN Direct Connection Subsystem  manages the direct ISDN connection  between site A  and site N . The Internet connection and the Direct connection are represented by the respective links , ,  and ,  and it is the comparison of these links and link traversal times that forms the basis of the performance measurements. An overall Monitor program  manages both Internet Connection Subsystem  and the ISDN Direct Connection Subsystem  and also manages optional JDBC (Java DataBase Connectivity)  to an SQL2 database .","It should be noted that similar software runs on the computer at site N, where \u201cN\u201d is any of the nodes of interest in the corporate (or other private) network. As described above, in the symmetrical implementation, all sites execute the same software. In the preferred centralized implementation, the software at the main site offers the network administrator a powerful control panel, while the remote sites execute a more automated program with little or no operator interface required.","In all implementations, the typical site N opens a JAVA \u201cServer Socket\u201d and listens at a specific port. The server implements the accept ( ) method which blocks until a connection is received. A typical JAVA program that implements such a server is given below (omitting exception handling details):",{"@attributes":{"id":"p-0028","num":"0027"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"pubiic class SLAM_server"},{"entry":"{"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"pubiic static void main (string args[ ])"]},{"entry":[{},"{"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"ServerSocket SLAM_server;"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"SLAM_server = new ServerSocket (SLAM_port) ;\/\/=site"]},{"entry":[{},"specific"]},{"entry":[{},"while (true)"]},{"entry":[{},"{"]},{"entry":[{},"Socket Site_N;"]},{"entry":[{},"Site_N = SLAM_server.accept( ) ; \/\/ wait for connection"]},{"entry":[{},"process_SLAM_server(site_N); \/\/ process the connection"]},{"entry":[{},"Site_N.close( ) ;"]},{"entry":[{},"}"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"}"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"}"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}]}}},"When an incoming packet requests a connection on port \u2018Site_N\u2019, the software accepts the connection and processes it. Since the port is assumed SLAM specific, the process_SLAM_server( ) method must communicate with the JAVA ISDN.DLL  to manage the ISDN connection . Typically, the JAVA ISDN software has been listening for an ISDN connection (possibly qualified by calltype, caller_ID, etc.) and generates in incoming call or Connect event when the call is accepted. At this point, both the Internet link and the ISDN link are established, active and can be used to measure performance.","Because a SLAM_server serves a SLAM_client, a SLAM_client needs to connect to a SLAM_server and create input and output streams to establish communications with the SLAM_server. These input and output streams become network traffic across the Internet. Below is a JAVA program for a representative SLAM_client object.",{"@attributes":{"id":"p-0031","num":"0030"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"input java.io.* \/\/use the entire library"},{"entry":"input java.net.* \/\/use the entire library"},{"entry":"public class SLLAM_client"},{"entry":"{"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Socket SLAM;"]},{"entry":[{},"DataInputStream in;"]},{"entry":[{},"DataOutputStream out;"]},{"entry":[{},"public SLAM_client( String SLAM_server, int SLAM_port)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"throws IO exception;"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"{"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\/\/create a socket connected to the SLAM_server;"]},{"entry":[{},"SLAM = new socket (SLAM_server, SLAM_port)"]},{"entry":[{},"\/\/streams attached to SLAM server socket:"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"in = newDataInputStream( SLAM.getInputstream( )  ) ;"]},{"entry":[{},"out = new DataOutputStream( SLAM.getOutputStream( )  ) ;"]},{"entry":[{},"}"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"}"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}]}}},"When the SLAM_client, Site A, connects to the SLAM_server, Site N, at the SLAM_port, the Monitor has established an Internet connection between Site A and Site N. Although the SLAM_client class is shown with a TCP-based (Transport Control Protocol) stream I\/O, the use of UDP (User Datagram Protocol) for monitoring purposes may be preferred for some statistical measurement purposes.","Although the present invention has been described in considerable detail with reference to certain preferred versions thereof, other versions are possible. Therefore, the spirit and scope of the appended claims should not be limited to the description of the preferred versions contained herein."],"BRFSUM":[{},{}],"DETDESC":[{},{}]}
