---
title: Mobile terminal device having route guiding function and route guiding method utilizing mobile terminal device
abstract: A mobile terminal device having a route guiding function of guiding a route by obtaining map information from a server system via a radio communication network includes: a position detecting unit which detects a current position of the mobile terminal device; a bearing detecting unit which detects a first bearing to which the mobile terminal device is directed; a target bearing calculating unit which calculates a second bearing from a current position to the destination; a displaying unit which displays a map based on the acquired map information on a section containing the destination and the current position, displays icon images at a position of the destination and the current position respectively, and displays an icon image indicating the first bearing; and a target capturing unit which produces a sound effect in response to a difference between the first and second bearings.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07471955&OS=07471955&RS=07471955
owner: Yamaha Corporation
number: 07471955
owner_city: Hamamatsu-shi
owner_country: JP
publication_date: 20040219
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF PREFERRED EMBODIMENTS"],"p":["The present invention relates to a mobile terminal device having a route guiding function and a route guiding method utilizing the mobile terminal device.","Up to now, the mobile phone with a map navigation function, to which a GPS function of sensing a current position and a bearing compass function using a geomagnetic bearing sensor are provided, etc., and have been manufactured as a product.","For example, the navigation system utilizing the mobile terminal device such as the mobile phone is disclosed in JP H10-197277-A. According to this reference, the user's terminal acquires positional information of the present location by using the GPS. The user's terminal then sets positional information of the destination by using a function of the service server. Next, the device searches a guide route via the service server, while the service server, while the service server offers sequentially positional information of transit points in the middle of the guide route to the destination every time the user arrives at each transit point until the user comes up to the destination. The user's terminal derives a guiding direction indicating the direction of the halfway targets required until the user arrives at the destination. The user's detects the direction in which the LCD of the terminal is directed from the positional information received from the service server. The terminal obtains a relative guiding direction indicating the direction of the destination with respect to the direction of the LCD, and informs the user of the relative guiding direction with an arrow or a sound. The configuration set forth in JP H10-197277-A is able to guide the direction to the destination without map information that needs a large information contents.","Incidentally, since normally the top portion of the displayed map points the North bearing, the user must appreciate previously that the upper side of the displayed map is directed to the North bearing to find the user's destination. As the case may be, the user must find where the land mark indicated on the map is actually located. Further, the user must appreciate at which place the user's own current position is located on the map and in which direction the position of the destination on the map is placed relatively from the user's own current bearing (the current direction of the mobile terminal device). For the above reasons, in order to arrive at the position of the destination from the user's own current position, it took the user a lot of time to decide which way the user should start walking along.","Further, in the map navigation function, in case such a mode is taken that the map information is downloaded from the server, first a wide area map must be downloaded in the prior art. Second, the area of the map must be reduced several times by using the zoom-in function to get a map range containing the destination and the user's own current position. Otherwise, map information with different map scales must be downloaded several times, and thus it is very troublesome to execute such function.","In the technology set forth in JP H10-197277-A, the system is downsized according to the above configuration, nevertheless the user acquires the positional information of the next destination via the communication with the service server every arrival of the halfway destination on the guide route until the user reaches to the final destination without the map. Therefore, the user must communicate with the service server until the user reaches to the final destination. As a result, in case of a communication trouble, the guidance to indicate the next destination is not properly issued, so that in some cases the user may fail to reach the final destination. Further, in case the proper guide route is not derived and thus the guiding direction is given in disregard of the presence of the actually existing building, etc., it may happen that the user cannot know in which way he or she should actually go, e.g., the situation that the user cannot go in that direction because of the building, etc. located in the guiding direction.","The present invention has been made in view of the above circumstances, and it is an object of the present invention to provide a mobile terminal device having a route guiding function of permitting the user to simply know a direction of a target based on user's current position and direction, and a route guiding method utilizing the mobile terminal device.","In order to solve the aforesaid object, the invention is characterized by having the following arrangement.\n\n","a position detecting unit which detects a current position of the mobile terminal device;","a bearing detecting unit which detects a first bearing to which the mobile terminal device is directed;","a map information acquiring unit which transmits predetermined specific information to identify a destination and positional information of the current position to the server system, and acquires map information on a section containing the destination and the current position from the server system;","a target bearing calculating unit which calculates a second bearing from a current position to the destination based on the positional information and the specific information;","a displaying unit which displays a map based on the acquired map information, displays predetermined icon images at a position of the destination and the current position respectively, and displays an icon image indicating the first bearing; and","a target capturing unit which produces a sound effect in response to a difference between the first and second bearings.\n\n","a position detecting unit which detects a current position of the mobile terminal device;","a bearing detecting unit which detects a first bearing to which the mobile terminal device is directed;","a map information acquiring unit which transmits predetermined specific information to identify a destination and positional information on the current position to the server system, and acquires map information of a section containing the destination and the current position from the server system;","a target bearing calculating unit which calculates a second bearing from the current position to the destination based on the positional information and the specific information;","a displaying unit which displays a map based on the acquired map information, displays a predetermined icon image at the current position, and displays an icon image indicating the first bearing and an icon image indicating the second bearing; and","a target capturing unit which produces a sound effect in response to a difference between the first and second bearings.\n\n","causing the server system to execute the steps of,\n\n","causing the mobile terminal device to execute the steps of,\n\n","causing the server system to execute the steps of,\n\n","causing the mobile terminal device to execute the steps of\n\n","the program causes the server system to execute the steps of,\n\n","the program causes the mobile terminal device to execute the steps of,\n\n","the program causes the server system to execute the steps of,\n\n","the program causes the mobile terminal device to execute the steps of\n\n","producing a sound effect in response to a difference between the first and second bearings.","An embodiment of the present invention will be explained with reference to the drawings hereinafter.",{"@attributes":{"id":"p-0042","num":"0081"},"figref":"FIG. 1","b":"2"},"As shown in , a mobile phone  in the present embodiment is connected to a server  in a GPS base station via a radio communication network. A position DB (database)  and a map DB  are connected to the server . Specific information used to identify the location as the destination (here, the shop, the institution, etc. are selected as the object) and its latitude\/longitude as positional information of the location are correlated mutually and registered in the position DB . Sets of map image data and positional information (latitudes\/longitudes) of predetermined positions (e.g., the upper end\/the lower end and the right end\/the left end, etc. of the map) on the map image as the information to identify the position on the map are registered in plural areas in the map DB . In reply to the request transmitted from the mobile phone , this server  delivers positional information of the destination and map information consisting of map image data containing the destination and the current position and positional information of predetermined positions into the mobile phone  (details will be described later).","In this case, a configurative example of the data registered in the position database  is shown in . The destination name, the group name (characters used to classify a category of business\/a business condition of the destination, for example, S represents the shop, R represents the restaurant when first letters of the names representing the category of business\/the business condition are employed), the phone number and URL (Uniform Resource Locator) are contained in the specific information that are registered in the position database  (where, names of the destinations are registered in the item column in ). Here, the reason why the group names are employed is given as follows. That is, for example, often the numerals are used in the phone number registration of the mobile phone to classify the destinations into groups, but the user cannot see what contents are registered in the group numbers because the numerals are not associated with contents of the groups. Therefore, the destinations are classified into groups by the names being associated with the contents of the groups in such a manner that SHOP is represented by S, RESTAURANT is represented by R, and so on, which makes the management easy.","As described above, the above specific information and corresponding latitude\/longitude are registered in the position database . Therefore, since the user can designate the destination by using the phone number or the URL (normally the user can know them via the medium such as the advertisement, and so forth) of the destination, the pointing of the latitude\/ longitude is not required of the user to designate the destination.","In this case, in case the specific information transmitted from the mobile phone  to identify the destination are the positional information, the position database  may be omitted.","Next, a configuration of the above mobile phone  will be explained with reference to  hereunder.","As shown in , the mobile phone  includes a mobile phone function block , a GPS module , a sound source module , a geomagnetic bearing sensor , a controller , a ROM , and a RAM . The mobile phone function block  includes a communication module used to communicate with the radio communication network as the mobile phone, a key board as an inputting unit, and an LCD display panel as a displaying unit. The GPS module  acquires position measuring data obtained from the GPS (Global Positioning System) satellite or the GPS base station. The sound source module  receives supply of melody data offered under predetermined conditions (containing the case of call incoming of the phone) and reproduces this melody data (in the case of call incoming of the phone, reproduces a ringing tone), and is constructed by an FM sound source, or the like. The geomagnetic bearing sensor  outputs a detected signal in response to the direction along which the sensor is directed (i.e., the concerned mobile phone  is directed).","In this case, the above GPS module  has a function of measuring the current position of the mobile phone  based on the D-GPS position measuring system (differential D-GPS position measuring system). The GPS base station is used as the fixed station of the D-GPS position measuring system. The position measuring data acquired by the GPS module  is transmitted to the GPS base station. The precise position measuring calculation is carried out in this GPS base station, and then the resultant positional information (the latitude\/the longitude) of the present address is returned to the mobile phone . When doing this, a position measuring calculation in the mobile phone  is omitted, so that not only the following load of the controller  can be reduced but also improvement of a position measuring precision and a reduction of a position measuring time can be achieved. In this case, in order to accept the D-GPS position measuring service, the GPS base station as the fixed station must be located within almost several tens Km from the mobile phone. In contrast, since the position measuring on the mobile phone  side can get a sufficient precision at present without employing the D-GPS position measuring system, position measurement by this D-GPS position measuring system is not always needed. In this case, such an advantage can be obtained that there is no need to transmit the position measuring data from the mobile phone  to the GPS base station.","The controller  controls respective portions of the mobile phone  based on a control program (details associated with the present invention will be described later). In this case, when the latitude\/longitude of the current position are measured by the mobile phone , this controller  calculates such latitude\/longitude based on the position measuring data given from the GPS module . An angle of the bearing to which the mobile phone  is directed (azimuth angle: an angle to a reference bearing (e.g., North bearing)) is calculated by the controller  based on the detecting signal supplied from the geomagnetic bearing sensor . These calculations can be carried out in the same manner as the calculation of the position measurement of the current position or the direction executed by the navigation system or the electronic compass utilizing the GPS in the prior art.","The above control program, current position icon data indicating the current position on the map and target position icon data indicating the position of the destination, current bearing icon data indicating the direction of the mobile phone  (having a display mode by an arrow), melody data to produce various melodies played under predetermined conditions, the address of the server , and so on are stored in the ROM  shown in . The phone number or URL of the destination input by the user, the derived positional information of the current position and the azimuth angle in which the mobile phone  is directed, the target bearing described later, and so on are stored in the RAM .","Next, an operation of a route guiding system utilizing the mobile phone  constructed in this manner will be explained with reference to operational flowcharts in  hereunder.","In this case, the operational flowcharts explained in the following are an example, and the present invention is not restricted to following flow of the processes.","At first, the user inputs the phone number or URL as the specific information on the destination (here, SHOP A) by using the mobile phone , and transmits a request for the positional information containing this information (positional information request) to the GPS base station (step S). The server  receives the positional information request sent from the mobile phone . The server  searches the positional information corresponding to a search key in the position database  while using the received phone number, URL, or the like as the search key, and then sends back the positional information obtained by the search to the mobile phone .","The mobile phone  receives the positional information of the destination from the GPS base station, and then stores the positional information in RAM  (step S). In the example shown in , the derived positional information (latitude: 38.57, longitude: 135.54) of the destination are stored in the latitude and longitude columns ({circle around (3)} and {circle around (4)}) in the row of the item SHOP A.","Then, the mobile phone  measures the current position (step S). Here, the mobile phone  gets the position measuring data acquired by the GPS module , and then sends a request for the position measurement containing the position measuring data (position measuring request) to the GPS base station. The GPS base station, when received this position measuring request, calculates the latitude\/the longitude based on the received position measuring data, and then sends back the data (positional information of the present address) to the mobile phone .","The mobile phone  receives the positional information on the present position from the GPS base station, and stores this positional information in the RAM  (step S). In the example shown in , the derived positional information (latitude: 37.45, longitude: 135.01) of the present address are stored in the latitude and longitude columns ({circle around (1)} and {circle around (2)}) in the row of the item ME.","Then, an azimuth angle in which the mobile phone  is directed is measured by the geomagnetic bearing sensor  (step S). Here, the controller  calculates the azimuth angle based on the detecting signal of the geomagnetic bearing sensor . The calculated present azimuth angle \u03b8 ms is stored in the RAM . In the example shown in , the derived present azimuth angle (present bearing: 60 deg) is stored in the azimuth angle column ({circle around (5)}) in the row of the item ME.","Then, the mobile phone  requests the GPS base station to send the map information containing the position of the destination (target position) and the position of the present address (current position) (step S). At this time, a map information acquiring request is sent from the mobile phone  to the server . The server , when received this map information acquiring request, searches the map database  based on the latitude\/the longitude of the target position and the current position to get the map information containing the target position and the current position, and then sends back this map information to the mobile phone .","Now, a method of selecting the map information containing the map image data in a predetermined area including the target position and the current position by the server  will be explained with reference to  hereunder.","Like an example shown in , when the target position is positioned on the Northeast side of the current position, a latitude line A derived by adding 20 minutes to latitude data of the target position and a longitude line D derived by adding 20 minutes to longitude data of the target position are obtained. A latitude line B derived by subtracting 20 minutes from latitude data of the current position and a longitude line C derived by subtracting 20 minutes from longitude data of the current position are obtained. In this manner, the addition\/the subtraction applied to select the map image data in a predetermined area are executed appropriately in response to a positional relationship between the target position and the current position such that a range surrounded by lines corresponding to the above lines A, B, C, D contains the target position and the current position. In the neighboring area of Japan, 20 minutes of the latitude\/the longitude corresponds to a distance of about 500 m on the map, and the range surrounded by the lines A, B, C, D corresponds to the map area that contains a circumference 500 m of the range, on a diagonal line of which the target position and the current position are positioned. The map image data containing the range surrounded by the lines A, B, C, D are searched from the map database , and map information of the area containing this range are obtained.","In this case, as described above, numerical values applied to select the map area by adding\/subtracting the latitude\/the longitude (20 minutes in the above example) may be set arbitrarily in compliance with the scale and the area of the map, and the necessary map area may be downloaded. Accordingly, it is possible to get immediately the optimum map area containing the target position and the current position of the user. Therefore, such troublesomeness in the prior art can be improved that first the wide area map must be downloaded and then the area of the map must be reduced several times by using the zoom-in function to get the map range containing the target position and the user's own current position, or the map with different scales must be downloaded several times.","The mobile phone  downloads the map information that is selected by searching the map database  via the server  as above (step S).","Then, as shown in , the mobile phone  displays a target position icon (a symbol a in ) and a current position icon (a symbol b in ) on the LCD panel to overlap with positions on the map corresponding to latitudes\/longitudes of the target position derived in above steps and the current position respectively, and displays a current bearing icon (a symbol c in ) to overlap with the current position icon (step S).","Next, calculation of the target bearing is started. In forgoing steps S, S and step S, the latitude\/longitude of the target position, the latitude\/longitude of the current position, and the current azimuth angle were derived, and thus these data are used. In the example shown in , the target position (latitude 2, longitude 2)=(38.57, 135.54) and the current position of the user by the GPS position measurement (latitude 1, longitude 1)=(37.45, 135.01) are derived.","First, a difference a (={circle around (4)}\u2212{circle around (2)}) between the target longitude (longitude {circle around (4)} of the destination SHOP A) and the present longitude (longitude {circle around (2)} of the current position (ME)) and a difference b (={circle around (3)}\u2212{circle around (1)}) between the target latitude (latitude {circle around (3)} of the destination SHOP A) and the present latitude (latitude {circle around (1)} of the current position (ME)) are calculated (step S). In the example shown in , a=the latitude 2\u2212the latitude 1=38.57\u221237.45=1.12 and b=the longitude 2\u2212the longitude 1=135.54\u2212135.01=0.53 are calculated.","Then, a target bearing \u03b8=arctan(b\/a) and a relative bearing \u0394\u03b8=(90 deg\u2212\u03b8 ms)\u2212\u03b8 are calculated by using a, b calculated in step S (step S). Here, the target bearing \u03b8 is a bearing directed from the current position to the target position (where an azimuth angle from the East bearing), the current bearing \u03b8 ms is a current azimuth angle of the mobile phone  as described above (where an azimuth angle from the North bearing), and the relative bearing \u0394\u03b8 is a difference between the current bearing and the target bearing. In this case, a range in which a magnitude of \u0394\u03b8 is 1 deg or less may be set arbitrarily.","Then, in the decision in step S, if the relative bearing \u0394\u03b8 calculated previously is a predetermined positive value (where this value is assumed as \u201c1\u201d) or less, the process goes to step S wherein a melody  flag is set to \u201c1\u201d. In this case, this melody  flag is a flag indicating that melody data of a melody  should be reproduced and an initial value is set to \u201c0\u201d.","Then, in step S, because the melody  flag is set to \u201c1\u201d, the controller  supplies the melody data of the melody  to the sound source module  to reproduce the melody . Then, the process goes to step S.","In contrast, in the decision in step S, if the relative bearing \u0394\u03b8 calculated previously is \u201c0\u201d, the process goes to step S wherein a melody  flag and a blink flag are set to \u201c1\u201d respectively. In this case, this melody  flag is a flag indicating that melody data of a melody  should be reproduced, and this blink flag is a flag indicating that the target position icon should be highlight-blinked. These initial values are set to \u201c0\u201d respectively.","Then, in step S, because the melody  flag is set to \u201c1\u201d and the blink flag is set to \u201c1\u201d, the controller  supplies the melody data of the melody  to the sound source module  to reproduce the melody , and the controller  controls to highlight-blink the target position icon displayed on the LCD display panel . Then, the process goes to step S.","On the other hand, in the decision in step S, if the relative bearing \u0394\u03b8 calculated previously is larger than the predetermined positive value (where this value is \u201c1\u201d), the process goes to step S. In this stage in step S, if the user changes the user's own position or direction, i.e., changes the position or direction of the mobile phone , processes in step S et seq. are further executed. In this case, in step S, movement and change of the direction of the user may be detected by the GPS module  or the geomagnetic bearing sensor , otherwise the processes in step S et seq. may be carried out irrespective of change of the position or the direction after a predetermined time has lapsed.","With the above, the embodiment of the present invention is explained in detail with reference to the drawings. But particular configuration is not limited to this embodiment, and configurations in the scope that does not depart from the gist of the present invention may be contained. For example, in the above embodiment, the map and the icon are displayed in such a manner that the overall map of the map being downloaded from the server  is displayed, then the target position icon and the current position icon are displayed on the map to overlap with the positions corresponding to the latitudes\/longitudes of the target position and the current position on the map respectively, and the current bearing icon is displayed to overlap with the current position icon. However, as shown in , a part of the map containing the current position (in an area encircled by a dotted line in ) may be displayed on the LCD panel , a current position icon (a symbol b in ) may be displayed on the map to overlap with the position corresponding to the latitude\/longitude of the current position, a current bearing icon (a symbol c in ) and a target bearing icon (a symbol d in ) indicating the target position may be displayed to overlap with the current position icon, and the displayed area of the map may be shifted\/updated following to the movement of the user. In this case, when the target position enters into the displayed area according to the movement of the user, the target position icon is displayed on the map to overlap with the corresponding position. When doing this, the map can be displayed in appropriate size on the mobile terminal device such as the mobile phone having a small display screen, etc. even if the area of the downloaded map is wide.","As described in detail above, according to the present invention, the direction along which the user should go to the pointed destination is instructed by the image display and the sound effect, based on the current position and the direction of the user who utilizes the mobile terminal device of the present invention. Therefore, the user can catch easily the proceeding direction even when such user does not know how to read the map, and can start immediately to walk to the destination.","According to the invention, the map information acquired from the server system contains the destination and the present address. Therefore, when the user is going to proceed from the user's bearing to the destination, the downloading of the map information is required only once and the downloading of the map information is never required plural times."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0031","num":"0070"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0032","num":"0071"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0033","num":"0072"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0034","num":"0073"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0035","num":"0074"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0036","num":"0075"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0037","num":"0076"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0038","num":"0077"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0039","num":"0078"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0040","num":"0079"},"figref":"FIG. 10"}]},"DETDESC":[{},{}]}
