---
title: Subscriber migration system
abstract: The present invention is a system that uses a migration server to access voicemail of a source system through a front-end switch via a telephony interface, obtain voice messages stored on the source system and store them on a destination system via a data interface. A host processor initiates a migration based on a mailbox migration status stored in a host database and controls the switch to provide a path from the migration server to the source system. The host processor also controls call flow and initiates pass code (PIN) digit capture of a subscriber's pass code by the switch for mailboxes to be migrated. Call flow control includes determining to which system to route an arriving call based on migration status and determining whether to output a message-waiting indicator for newly stored messages. A migration server controls call tree navigation aspects of call flow during migration. Automated speech recognition is used to help capture the voice message as opposed to the voice message envelope and to capture message attribute information as well as the subscriber's greeting and voice announcement, and to assist in voicemail menu navigation.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07085554&OS=07085554&RS=07085554
owner: Common Voices LLC
number: 07085554
owner_city: Boston
owner_country: US
publication_date: 20030124
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS"],"p":["1. Field of the Invention","The present invention is directed to a system for migrating audio recordings, such as voice messages, greetings, name announcements, etc. as well as attribute information, from a source system to a destination system and, more particularly, to a system that does not require knowledge of the source system application programming interface (API) and which uses automated speech recognition (ASR) to help capture the audio recordings and to help navigate the source system.","2. Description of the Related Art","There are many different voicemail systems deployed in telecom networks\u2014from many different suppliers. Some voicemail suppliers support subscriber migration\u2014or the ability to migrate settings, greetings, announcements, messages, and other attributes\u2014from one platform to another. However, typically the platforms have to be from the same manufacturer, and often have to be from the same product family and software release.","There have been numerous attempts to migrate subscribers from diverse manufacturers, but these have always required that the original manufacturer provide an application programming interface (API) into their platform so the subscribers could be moved. Naturally, few (if any) manufacturers have made this a priority for their system, because it increases the likelihood that they will lose a customer to a competitor.","There are now a sufficient number of voice mailboxes deployed for there to be a sizeable market for offering a subscriber migration system and service. This market opportunity, and advances in technology, have created a need to migrate voicemail subscribers from legacy or previous generation platforms to new platforms being deployed that offer greater features and functionality. Furthermore, because of the resistance noted above, a need exists for an approach to subscriber migration that does not require that the original manufacturer provide an API for determining the subscriber features and message content from the old system.","Suppliers of next generation messaging technologies have traditionally had a significant hurdle to deploy in established networks\u2014the installed base. The most common strategy is to propose a \u201ccap and grow\u201d methodology to new deployments. Basically, the proposal is to install the new messaging technology alongside the original technology, but to provision all new subscribers on the new technology, and allow the subscribers to \u201cchurn off\u201d the old technology. While this strategy is simple to implement, it is not practical from a carrier's point of view. It requires that the carrier have duplicate facilities from each end office to both the old and the new systems to provide service to all the subscribers. The duplicate facilities significantly increase the cost of the deployment of new messaging technology\u2014to the point where it is no longer cost effective. What is needed is a subscriber migration service that removes this barrier. In addition, a service is needed that will allow the carrier to only move the facilities to the subscriber migration system, which will switch the call to either the original system or the new system based on whether or not the particular subscriber has been migrated from the original system or not. One approach for moving the subscribers off of the legacy platform is to provision new accounts for those subscribers on a new platform while still allowing them access to their messages from the old system for a limited time period. To listen to those messages, a subscriber could be transferred to the old system upon request, or the new system could use a back channel to retrieve the messages from the legacy platform. This approach requires the aforementioned duplicate facilities, plus educating the customers of the change and expiring their messages to remove the legacy platform at a later time. What is needed is a system that does not have such requirements.","The carriers may also want to migrate subscribers from one voicemail system to another because of load requirements. For example, a mail system may originally serve several different geographical areas and one area may grow faster than another. In such a situation, to reduce costs, the carrier may want to position a new voicemail system specifically for the high growth area. What is needed is a system that will allow migration in this situation.","It is an aspect of the present invention to provide a system that seamlessly migrates voice messages from one voicemail system to another.","It is also an aspect of the present invention to provide for migration without knowledge of the API of a source system","It is another aspect of the present invention to provide a switching system in the migration system to avoid facility duplication.","It is another aspect of the present invention to route calls to the appropriate system during migration.","It is another aspect of the present invention to merge message waiting indication (MWI) streams from the source and destination systems.","The above aspects can be attained by a system that uses a migration server to access voicemail of a source system through a front-end switch, obtain voice messages stored on the source system and store them on a destination system. A host processor controls call routing and migration initiation aspects of call flow and initiates pass code or personal identification number (PIN) digit capture of subscriber's pass code by the switch for mailboxes to be migrated. A migration server controls call tree navigation aspects of call flow during migration. Automated speech recognition is used to help capture the voice message and to assist in voicemail menu navigation.","These together with other aspects and advantages which will be subsequently apparent, reside in the details of construction and operation as more fully hereinafter described and claimed, reference being had to the accompanying drawings forming a part hereof, wherein like numerals refer to like parts throughout.","The present invention is directed to a system that allows seamless migration of voicemail subscribers from a legacy voicemail system to a new system. As depicted in , a typical voicemail system includes a voicemail platform  coupled to a public switched telephone network , although the platform could be a part of a private network and coupled to a private switching system, such as a private business exchange (PBX). The platform  typically sends and receives voice signals over a voice data communication connection , such as a T data line, having a multi-line hunt group (MLHG). The multi-line group allows the platform  to interact with multiple callers simultaneously whether they are subscribers retrieving messages left by callers or callers leaving messages for subscribers. The platform also communicates over a simplified message desk interface (SMDI) signaling connection  to receive automatic number identification (ANI) data identifying the caller and to send message waiting indicator (MWI) data to the public switched telephone network (PSTN) .","The present invention provides a seamless migration for a source voicemail system  to a destination voicemail system  using three components: a subscriber migration switch (FES) , a subscriber migration host computer (HC)  and a subscriber migration server (SMS) , as depicted in . A typical migration starts with the sending of a migration request identifying a subscriber from the host  to the server . The server  seizes a line to the switch  and the host  controls the switch  to provide a voice connection between the server  and the source . The server  accesses the subscriber's mailbox on the source  through the switch  and records the messages stored in the mailbox along with message attribute information, such as the time of the message, etc. Once the recording is complete, the recorded messages, etc. are sent by the server  to the destination system  over a local area network (LAN) connecting the components. The server  then informs the host  and a migration database  listing subscribers to be migrated, being migrated and that have been migrated is updated. The migration discussed briefly above will be described in more detail later herein.","During a migration, messages are stored in the migration server and transferred as audio files or information while the attribute information determined from \u201clistening\u201d to the audio with ASR is transferred as digital data files or information.","What follows first is a description of each component. While each of the components is described in the singular for illustrative purposes, there can be multiple instances of any of the components depending on the size of the migration to be performed.","For signaling, the subscriber migration service is described using T\/SMDI\u2014which is the standard for North America residential voicemail service. However, the methods that are described are applicable to any signaling interface (signaling system \u2014SS7, Primary Rate Interface\u2014PRI, voice over IP\u2014VoIP, etc.)\u2014or even combinations of signaling interfaces. For example, the source system  may only support T\/SMDI\u2014but the destination system may be SS7 based.","The source system  is the original voicemail system that contains the subscriber information (greetings, name announcement, PIN, messages, etc.). Subscribers are migrated from the source system  to the destination system . The source system \u2014prior to migration\u2014has direct connections to the PSTN via T\/SMDI.","The destination system  is the new voicemail system that has been installed. During subscriber migration, it has an internet protocol (IP) connection to the other components of the subscriber migration service (except the source system ). Furthermore, subscriber migration may require that the destination system  be pre-provisioned with the subscriber mailbox numbers, class of service, and other features that can be determined from the provisioning interface of the source system . The destination system  has the ability to receive subscriber greetings, messages, message attributes, name announcement, PIN, etc. via the IP interface.","The subscriber migration switch  is the \u201cfront-end\u201d switch that interconnects (via T) the PSTN  with the source system  and the destination system . It also has one or more T connections from the subscriber migration server . It also has a LAN connection to the host computer . The switch  is preferably a switch manufactured by Lucent Technologies, such as the preferred EXS series Programmable Switch.","The subscriber migration host computer (HC) is the host computer that controls the front-end switch . It may control multiple switches, depending on capacity needs. The host computer  maintains the subscriber migration database . The host computer  issues requests to the subscriber migration server  to migrate individual subscribers and\/or messages from the source system  to the destination system . The host computer  also preferably maintains the SMDI connections to the PSTN , the source system , and the destination system . The host computer  acts as an SMDI router in deciding which SMDI call arrival packets from the PSTN are directed to which system based on the status of the mailboxes in the migration database . The host computer  also uses the migration database  to determine which SMDI message-waiting packets from the systems are forwarded on to the PSTN . The host  is preferably a server class computer although a desktop class computer can be used. The host  can optionally have a display for displaying a status of the migration operations.","The subscriber migration server (SMS) is preferably a personal or server computer class machine preferably configured with NMS T voice cards available from NMS Communications of Massachusetts, Microsoft Windows 2000 available from Microsoft Corporation of Washington, and Nuance 8.0 Speech Recognition software available from Nuance Communications of California. The subscriber migration server  accepts requests via hypertext transmission protocol (HTTP) and possibly other protocols from the host computer  to migrate individual subscriber information and\/or messages from the source system  to the destination system . The subscriber migration server  has one or more T connections to the front-end switch  so it can be connected via the telephony talk path to the source system . The subscriber migration server  has IP connectivity to the destination system , so that it can submit the information for each subscriber that it has retrieved from the source system . The server  can optionally have a display for displaying a status of the migration operations.","Prior to a discussion of call flow and migration within the present invention, there are a few areas of operational processing that need to be described to support the more detailed description of seamless subscriber migration described in later herein. Each area is explained in detail below.","The present invention uses conventional automated speech recognition (ASR) for reliable message detection. Speaker independent ASR is preferred although speaker dependent could be used. While it is possible to use dual tone multi-frequency (DTMF) signaling to navigate the call tree of a voicemail platform (indeed, every currently deployed platform requires it), it is not practical, just with DTMF, to detect when the source system  begins message playback or when a message has completed playing. Source systems  typically play the message envelope (urgent\/new\/saved, date\/time of arrival, and message number) immediately prior to playing the message body. Furthermore, most source systems  also play a \u201cmessage menu\u201d immediately after playing the message body. Subscriber migration in the present invention preferably uses conventional ASR \u201chot word\u201d feature to determine when the message menu has begun playback, and uses the hot word feature in trimming the appropriate amount of recorded speech from the end of the message. For example, the message may end with the phrase, \u201cTo repeat this message, press one.\u201d The hot word that the system would look for is this word sequence. The location of this phrase within the audio recording is used for trimming. The detection of this phrase in a word stream by the automated speech recognition engine allows the end of the new message to be designated in the stream immediately before this hot word phrase. When searching for the beginning of the message, the recorded message is used after the end of the message has already been found. This allows the message envelope to be read by conventional ASR repeatedly so that a complex message can be recognized correctly. For example, a message envelope may say \u201cFirst new message, received today at one PM.\u201d In this case, the recognizer is best configured to recognize a five second message. The envelope can be longer; as in the example, \u201cTwenty second saved message, received Tuesday, August tenth at seven thirty AM.\u201d For this longer example, the recognizer is best configured to recognize a nine second message. Several recognition attempts can be made with the same recording to find the best recognition result. The best result is used to determine the value of the message attributes (urgent\/new\/saved, date\/time of arrival, and message number) and how much of the beginning of the message should be trimmed. The message attributes are stored as data elements in the destination system  after the server  determines them.","This application of ASR technology can also be used to determine and migrate other voice application features, such as reminders, family mailboxes, group lists, etc.","The present invention uses the front-end switch  during the migration process to reduce the cost of the deployment of a new system. It is important for carriers to minimize the cost of migration. By using the switch, the carrier need not duplicate the number of facilities (T\/SMDI) from each end office to the destination system . The front-end switch  allows the carrier to install the subscriber migration hardware of the present invention (, ,  and ) during the maintenance window, and as fast as desired, for example slowly over a period of days, weeks, or months, migrate the subscribers from the source system  to the destination system . After the migration is complete, the facilities can be removed from the front-end switch  and terminated directly onto the destination system .","The present invention allows migration of the subscribers from the source  to the destination  over a period of time and during that period the present invention merges the outgoing MWI streams. Since both the source  and destination  will need to manage MWI for their respective pieces of the subscriber pool during the migration, it is important to merge the MWI data streams from both systems and present one stream to the PSTN . Furthermore, the source system  may issue MWI on\/off for subscribers that have already been moved to the destination system , and it is important to block the MWI, as the source system  is no longer the authority for those subscribers. MWI-off for a migrated subscriber from the source system  can occur based on a system function being executed in the legacy system when the subscriber mailbox is deleted, or when all the messages expire. MWI-on for a migrated subscriber can occur if the system supports mailbox-to-mailbox addressing (and the sending mailbox is still on the source system ). In this case, an MWI-on command from the source system  is used to trigger an immediate message migration from the source  to the destination \u2014so the migrated subscriber doesn't lose messages that may have been left on the source system  after migration has occurred.","The present invention uses a digit collector in the front-end switch  to capture the subscriber's PIN or pass code. One of the puzzles of subscriber migration is how to determine the subscriber's PIN\u2014since many source systems encrypt the PIN in their respective database. Fortunately, the front-end switch  has the ability to assign a DTMF digit collector on the talk path from the caller, and this can be used to \u201csniff\u201d or record the PIN from the resulting DTMF digit stream. Some systems (most notably wireless systems) have a feature known as \u201cpass code skip\u201d, which does not require the subscriber to enter a PIN if they are calling from their \u201chome phone\u201d. In this case, the PIN cannot be captured\u2014however the migration can still occur (by presenting the call from the subscriber migration server  as one that is coming from the subscriber's \u201chome telephone\u201d). In such a situation the destination system , because the new system will not have the subscribers PIN stored therein, may have to prompt the caller (presumably when the caller uses something other than their home telephone for retrieval) for other identifying information and lead the caller through the process of choosing a new PIN.","After a migration is completed for all of the subscribers that can be migrated automatically, and after some predetermined period of time (presumably up to 30 days), there may still be subscribers on the source system  that have not called in to retrieve messages. For these subscribers, the carrier should reset their PIN on the source system  to a known value\u2014and populate the subscriber migration database accordingly. The migration of these subscribers can then be rapidly effected using the reset PIN. For these subscribers, a similar procedure to the \u201cpass code skip\u201d PIN recovery is required the first time they call the destination system .","It is possible for a subscriber that has been migrated to call to retrieve a message from a neighbor's phone that has yet to be migrated. In this scenario, the call is switched or routed to the source system  (because of the ANI for the neighbor's phone). However, it is important that the subscriber's attempt to log in to their old mailbox fail\u2014because they will be very confused about the state of their mailbox and messages. To guard against this possibility and to ensure login failure on the source system  when a subscriber has been migrated, the subscriber migration service modifies the subscriber's PIN in the source system  preferably as the last step during the migration. The PIN is preferably modified in an algorithmic manner so that it can be undone in case the subscriber migration procedure is aborted and the source system  needs to be restored. The front-end switch  can switch the call from the source system  to the destination system  after it detects that the caller has input the mailbox number of a subscriber that has already been migrated to the destination system, thus allowing subscribers to retrieve their messages in this situation.","The present invention also manages the load on the source system  caused by the migration process. Because all of the T lines for the source system  are routed through the front-end switch  and the host computer  controls the switch , the host computer  has complete knowledge of how much call load the source system  is experiencing. The host computer  uses this knowledge to determine how many subscriber migration server calls to permit on the source system . Typically at least one-half of the ports on the source system can be used for migration. A system administrator typically configures the host computer as to which hours are the \u201cleast busy\u201d hours for the source system , and for how many simultaneous calls to permit for the subscriber migration process. Furthermore, the host computer  examines the call load that the source system  is experiencing from the PSTN  through the switch  and the load caused by current migration operations, and forces the subscriber migration process to wait if the call load exceeds configured thresholds by not making additional requests for migration.","Because the present invention obtains the voice messages through the voice interface of the source system , the migration process needs to be able to navigate the menu structure of the source system . A call tree menu structure , such as depicted in  including the digits needed to navigate the system, can be obtained from the carrier that owns the source system  or it can be determined by an individual navigating the menu. This structure  can be used by those of skill in the art to create a program that will navigate the menu in a desired order as discussed later herein to allow the messages stored in the SS  to be played, etc.","Prior to performing a subscriber migration, the various servers need to be installed and provisioned. The destination system  must be installed and fully functioning. It needs to be provisioned with the mailbox numbers for all of the subscribers that will be migrated from the source system . The provisioning can be a pre-provisioning so that class of service and other information can be considered or the mailboxes can be provisioned at the time of the migration. To maintain a seamless migration, the mailbox numbers in the destination  need to be provisioned with the same feature set (at a minimum) available to the subscriber on the source system , including the same amount (or more) of mailbox storage as well as maximum permitted length of messages.","Preferably, after the destination system  is known to be working, the front-end switch  and the subscriber migration host computer  are installed. Typically, the equipment is co-located with the source  and destination  systems\u2014but remote IP and telephony connectivity are possible, if needed.","Preferably during a maintenance window for the source system, all of the PSTN lines (T and SMDI) are moved to the front-end switch  and host , with corresponding lines coming from the front-end switch  and host computer  to the source system . At this point, all calls placed to the MLHG of the source system  will be routed through the front-end switch  before terminating on the source system  for service. All features of the source  should be verified at this point to insure that the system is functioning prior to the beginning of subscriber migration.","Before migration starts, test mailboxes should be provisioned on the source system  and known to be working. There should be a mailbox for each class of service (COS) available on the source system . The test mailboxes, after they are provisioned, are registered in the database  for the subscriber migration host computer . Additionally, the subscriber migration server  should verify its telephony connectivity to the source system , as well as IP connectivity to the destination  and other components. Test calls should then be made into each of the test mailboxes. The administrator should verify that the test calls have completed properly, and that the migration server  is or has been able to migrate the test mailboxes from the source system  to the destination system . Once the test migration is complete and is known to be working properly, the administrator may then add all of the desired mailboxes that need to be migrated to the host computer database . The migration can be in any order. However, a migration order, such as an order determined by the number of messages stored in each mailbox, can be used where the number of messages stored in each mailbox can be determined by the number of MWIs sent by the source system.","Once all of the set-up operations have been completed, the migration process can start. The first operation involves collecting the pass codes or PINs of the subscribers. As depicted in , upon receipt of a request for service (RFS) from the PSTN  on the front-end switch (FES) , the host computer (HC)  awaits the corresponding SMDI packet coming over the SMDI link(s) which together constitute a compete call arrival . Once the RFS and SMDI have both been received, the HC  examines  the SMDI packet for the subscriber number (SN), and looks up the number in the subscriber migration database (DB) . If the SN is not in the database, the HC  routes  the call to the source system (SS) . If the SN is in the database , the HC  determines  whether the subscriber's mailbox is on the SS  or destination system (DS) , and routes the call appropriately  or . If the subscriber is currently in the process of being migrated , the HC  directs the FES  to play  a \u201cmailbox currently unavailable\u201d prompt and releases  the call. If the subscriber has not been migrated, the HC  instructs  the FES  to attach a DTMF digit collector on the talk path from the caller and routes  the call to the source . The PIN is collected even if it has already been collected to cover a situation where the PIN has been changed since the initial collection of the PIN. The HC  receives the collected digits from the switch  and then examines  the resulting DTMF digit sequence to determine if a subscriber is logging in, and determines the subscriber's numeric PIN. Once the HC  determines the PIN, it associates  this information with the SN in the DB  for later use. The HC  also updates the database  to indicate that the subscriber is logged-in. Once the PIN is captured the mailbox can be migrated.","Upon receipt  of an SMDI\/MWI packet from the SS , as depicted in , the HC  determines  if the mailbox is being migrated. If not, the HC  determines  if the SN has already been migrated to the DS . If the subscriber number (SN) is still on the SS , then the MWI is permitted to go  out to the PSTN . If the SN is on the DS , then the HC  determines  if it is an MWI-on or MWI-off command. If it is MWI-off, then the HC discards  the packet. If it is an MWI-on, then the HC  updates  the information for the SN in the DB , and requests  the subscriber migration server (SMS)  to retrieve the message from the SS  and migrate it to the DS  as soon as possible.","The system allows a caller to leave a message for a subscriber for which the mailbox is being migrated. If an SMDI MWI-on packet comes from the source system (SS)  during the time when a subscriber is being migrated  to the DS  indicating that a message has been saved during migration, then the HC  puts  the MWI packet in a \u201chold off\u201d queue, waiting for the result of the migration operation for this particular subscriber. If the subscriber is successfully migrated , then the HC  treats the MWI-on packet as if it arrived after migration had completed and processes the packet as stated above. If the subscriber migration for this subscriber has an error, or is aborted, then the HC  sends  the queued MWI-on packet from the SS  to the PSTN .","When the configured \u201cleast busy\u201d hour range begins , as depicted in , the HC  examines the database (DB)  for SN's (mailboxes) that have corresponding captured PINs, but have yet to be migrated to the DS  and selects  one or more mailboxes to migrate. The HC  checks  to see if the subscriber is currently logged into the SS  (by examining the DB ), and if so skips the subscriber and marks  the subscriber for a future migration after an appropriate waiting period has elapsed. Otherwise, the HC  issues  a request to the SMS  to migrate a particular subscriber. The request contains all of the pertinent information for the SN (PIN, feature set, etc.) that is known. The SMS  accepts the request and begins processing it. While the migration server (SMS)  is processing the request, the host computer (HC)  may send additional requests until either the SMS  has met its limit on the number of simultaneous calls, or the SS  has met its limit on the amount of load that is permitted for subscriber migration calls. The HC  also instructs  the switch  to watch for a line seizure from the server  and switch  the call to an available port on the source system .","If the source system becomes overloaded such as the number of additional calls exceed a predefined limit, the host computer  can cause one or more migrations in progress to be aborted. In such as situation the HC  preferably would abort migrations that were started most recently. In addition, it is possible for a race condition to occur by selecting the mailbox, testing whether the subscriber is logged in and later marking the mailbox as \u201ccurrently unavailable.\u201d As an alternative, the mailbox could be marked as \u201ccurrently unavailable\u201d when it is selected, then a test performed to determine whether the subscriber is logged in and proceed from there (if the subscriber was logged in, then restore the flag to indicate the mailbox is still available in the source system ).","When the SMS  begins the migration, the HC  updates the SN in the DB  to mark the SN as \u201ccurrently unavailable\u201d. This is to prevent the subscriber from attempting to retrieve messages while the migration for the account is occurring. After the migration of the subscriber is complete, the SMS  modifies the PIN for the SN on the SS , and updates the HC  with the new PIN information for the source system . This is done to prevent the subscriber from being able to log into the source  after the mailbox has already been migrated (which can happen under certain race conditions if the subscriber uses a neighbor's phone).","As each SMS migration call completes, the host  sends another request to the SMS  for another migration, if a) there are still additional migrations to perform, b) if it is still during the \u201cleast busy\u201d hour range window, and c) if the SS  has sufficient capacity to accept the call load from the migration server .","Upon receipt of an RFS from either the SS  or the destination system (DS)  (which can happen if the SS  or DS  wants to place an outgoing call, for features like pager notification), the HC  instructs the FES  to route the call to the corresponding line for the PSTN .","Upon receipt of an RFS from the SMS , the HC  directs the FES  to connect the channel to one of the available incoming channels for the SS . This is the start of the migration for a particular subscriber or message.","In the migration call flow, as depicted in , upon receipt  of a migration request (MREQ) from the HC , the SMS  outseizes  on a line, thus signaling the FES  and HC  to connect the channel to an available incoming channel for the SS . Also, the SMS  requests the HC  to send the corresponding SMDI call arrival packet, including the ANI, to the SS  based on the SN for the subscriber that is being migrated. It is also possible for the SMS  to use in-band signaling to indicate the identification of the incoming call as from a subscriber.","The SMS  then listens on the talk path from the SS . The SMS , over the talk path to the source , outputs \u2014via DTMF\u2014the PIN for the subscriber that it received in the MREQ. The SMS  also activates the \u201cmain menu\u201d grammar detector, as well as the \u201cinvalid pass code\u201d grammar detector of the ASR, and waits for recognition results. If the \u201cinvalid pass code\u201d prompt is recognized , then the SMS  notifies  the HC  that the PIN is incorrect, and the HC  clears the PIN for the SN in the DB . The server  then terminates the call. The HC  will reattempt this subscriber number (SN) once the subscriber logs in again via the SS  and the PIN is again collected. If neither prompt is recognized , then the SMS  returns  a failure indication to the HC , which will note the failure, requests  scheduling of a retry and reattempt of the migration for this subscriber after an appropriate waiting period has elapsed and disconnects .","Assuming the SMS  recognizes the \u201cmain menu\u201d prompt (see ), the server  then out pulses  the DTMF key for listening to messages. In the example of  the key output is the number \u201c2\u201d. The SMS  also activates the grammar for the \u201cend of message\u201d prompt. The SMS  also begins  digitally recording the audio that is coming back from the SS  and storing it in a data file that corresponds to the current message number.","After receiving the \u201cend of message\u201d recognition from the ASR process, the SMS  stops the recording audio process, and trims  the end of the message file so the \u201cend of message\u201d prompt is removed. The trimming is typically just before the \u201cend of message\u201d prompt however, it is also possible to trim the message at the end of the utterance coming just before the prompt. The SMS  also performs  the speech recognition operation on the recording. If the grammar detector does not detect  the \u201cend of all messages\u201d prompt, the SMS  activates  the grammar for message attribute detection (urgent\/new\/saved) as well as for  the date and time detection, and provides the recognizer with the recorded message file as the source of the audio allowing the recognizer to go back through the recorded message looking for attributes and the end of the envelope. Note that the system of the present invention may have to navigate the prompt tree to obtain message attribute audio for systems that do not play such information with the message. Upon receipt of the recognition results for urgent\/new\/saved and date & time, the SMS  associates this information with the corresponding data file for the message, and trims  the message envelope information from the beginning of the message audio file. The trimming of the recording leader involves finding the last utterance of the envelope and discarding the part of the recording that includes the envelope. The server  then outputs  the DTMF for the next message. Note that the attribute information can be determined for the messages while the next message is being recorded or even after all the messages of the mailbox have been recorded.","The SMS  continues through all of the messages in this manner, until the \u201cmain menu\u201d or \u201cend of all messages\u201d grammar is recognized again\u2014thus signaling the end of the message queue.","The SMS  follows a similar process for recording  the greeting(s) for the subscriber (by navigating via DTMF to the \u201cgreeting review\u201d menu)\u2014and similarly for recording  the name announcement for the subscriber. Finally, the SMS  modifies  the PIN for the subscriber on the SS  via the corresponding menu over the telephony user interface and disconnects .","At the completion of this process, the SMS  submits all of the information (messages, attributes, greeting(s), name announcement, PIN, etc.) to the destination system (DS)  that corresponds to this subscriber number (SN). Preferably the information is submitted via a protocol, such as HTTP, in a format, such as the XML (extensible Mark-up Language) which includes DTD (Document Type Definition) and XSL (extensible Style Language), allowing data submission independent of the new system's API. An example of an information transfer is discussed below. Upon positive acknowledgement from the DS  that the SN has been updated, the SMS  updates the DB  on the HC  for this particular SN that the migration is complete.","In the present invention, the XML API preferably includes an HTTP POST that includes multipurpose internet mail extensions (MIME) encoded form data. The first MIME part in the post is an XML snippet that identifies the mailbox and the audio being migrated (greeting, name and any number of message audio IDs). The audio data corresponding to each of these follows in other MIME parts in the post.","In the example below there is a greeting and name announcement in addition to two messages. Therefore, the post would include 5 MIME parts: the XML snippet will be the first part, followed by the audio data in 4 MIME parts. The audio data is identified by the ID specified in the XML snippet.","In the case of family mailboxes, there would be multiple sets of data like the one above. One set for the primary mailbox and other sets for each of the sub mailboxes. For the non-primary mailbox sets (i.e., the sub mailboxes), the subscriber ID would include the sub mailbox identifier, for example \u201c6178643011s1\u201d for the first sub mailbox.","Note that an <append> tag will be present for the subscriber if these messages are to be appended to the current mailbox. This tag is directly related to the special case discussed above where an MWI-on message arrives from the source system for a subscriber that has already been migrated. In that case the migration server  would be requested to \u201cget\u201d the new message. In the HTTP post generated from this request, the <append> tag would be present in the XML snippet (it is shown in the example below).","XML SNIPPET",{"@attributes":{"id":"p-0071","num":"0070"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<?xml version=\u201c1.0\u201d ?>"]},{"entry":[{},"<subscriber id=\u201c6178643011\u201d>"]},{"entry":[{},"\u2003<pin>1234<\/pin>"]},{"entry":[{},"\u2003<greeting audio-id=\u201cgreeting-id\u201d\/>"]},{"entry":[{},"\u2003<name audio-id=\u201cname-id\u201d\/>"]},{"entry":[{},"\u2003<append\/>"]},{"entry":[{},"\u2003<mailbox>"]},{"entry":[{},"\u2003\u2003<message audio-id=\u201caudio-1-id\u201d>"]},{"entry":[{},"\u2003\u2003\u2003<envelope>"]},{"entry":[{},"\u2003\u2003\u2003\u2003<sender>9783694112<\/sender>"]},{"entry":[{},"\u2003\u2003\u2003\u2003<urgent>0<\/urgent>"]},{"entry":[{},"\u2003\u2003\u2003\u2003<new>0<\/new>"]},{"entry":[{},"\u2003\u2003\u2003\u2003<private>0<\/private>"]},{"entry":[{},"\u2003\u2003\u2003\u2003<return-receipt>0<\/return-receipt>"]},{"entry":[{},"\u2003\u2003\u2003\u2003<arrived>2002-08-05 18:25<\/arrived>"]},{"entry":[{},"\u2003\u2003\u2003\u2003<expiry>2002-04-28 07:36<\/expiry>"]},{"entry":[{},"\u2003\u2003\u2003<\/envelope>"]},{"entry":[{},"\u2003\u2003<\/message>"]},{"entry":[{},"\u2003\u2003<message audio-id=\u201caudio-2-id\u201d>"]},{"entry":[{},"\u2003\u2003\u2003<envelope>"]},{"entry":[{},"\u2003\u2003\u2003\u2003<sender>9788359704<\/sender>"]},{"entry":[{},"\u2003\u2003\u2003\u2003<urgent>1<\/urgent>"]},{"entry":[{},"\u2003\u2003\u2003\u2003<new>1<\/new>"]},{"entry":[{},"\u2003\u2003\u2003\u2003<private>1<\/private>"]},{"entry":[{},"\u2003\u2003\u2003\u2003<return-receipt>1<\/return-receipt>"]},{"entry":[{},"\u2003\u2003\u2003\u2003<arrived>2001-10-01 13:20<\/arrived>"]},{"entry":[{},"\u2003\u2003\u2003\u2003<expiry>2001-12-31 01:25<\/expiry>"]},{"entry":[{},"\u2003\u2003\u2003<\/envelope>"]},{"entry":[{},"\u2003\u2003<\/message>"]},{"entry":[{},"\u2003<\/mailbox>"]},{"entry":[{},"<\/subscriber>"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"During the migration operation, it is possible to have the server  or the host computer  produce a migration status display, as depicted in , that can be displayed on the displays of these computers or sent via an IP communication to a computer of an administrator for display thereon. This display shows the status of: the connection to the source, the log-in, the search for messages, the recording of the messages, the message attribute collection, the type of message, the time\/date of the message, the end of the messages, the retrieving of the greeting, retrieving of the name announcement, and delivery of the mailbox contents to the destination system.","The present invention stores information about the mailbox and the migration status in the storage of the server  and the host . This subscriber information includes: subscriber number or mailbox identifier, PIN, migration status, attributes of the messages, messages, subscriber greeting, subscriber name announcement, dialed number information service (DNIS) of the source voicemail application, the time of the last successful migration, the source system ID, the destination system ID, the number of family mailboxes, the family mailbox PINs, logged-in flag, source system class of service (COS), destination system class of service (COS), language of the account on the source system, and next scheduled migration date and time. This information can be stored in a data structure, such as a list data structure. For example, as depicted in , the DB  could include a list  of subscriber records  where each record includes fields for SN , PIN , status (migrated, not-migrated, in-progress) , error status , etc. (with the fields for the other information noted above being not shown for brevity). A similar list data structure can be used to contain information related to migrated messages and includes records having fields for subscriber ID (or SN), message number, message sender, message state (new, save, urgent), date and time of message and message duration (approximate). The data need not be stored in list structures but could be in other types of structures, such as an array.","Because the present invention includes the switching system, a seamless migration is possible where the user need not be presented with a special prompt during or after migration.","Once the migration is \u201ccompleted\u201d (where some mailboxes cannot be migrated because of a special configuration\/feature) and before the present invention is removed from the network, the source system needs to have the mailboxes purged from it to avoid the production of erroneous MWI-off messages for a subscriber that is no longer on the system.","The present invention could also assign a digit collector to calls to the destination system for mailboxes that have been migrated for situations where the subscriber calls from a neighbor's house and the neighbor has been migrated but the subscriber has not been migrated. The digit collection could be used to reroute the call to the source system, to collect the subscriber's PIN or to play a message that the system is temporarily out of service.","Typically, the system does not release the connection to the source for a particular mailbox and set the migration status as successful or change the PIN until the destination acknowledges receipt of the migration information. Of course, if a time-out occurs while waiting for the acknowledgement, the migration is designated as failed and a retry is scheduled.","The system also keeps a failure count and a failure code\/description to inform the system administrator about failures. The failure information can also indicate the source port on which the failure occurred.","The system needs to know information about any special configuration for the mailbox, such as whether it is a family mailbox with multiple PINs. There are several ways in which to determine the number of sub-mailboxes: the data can be retrieved through an administrative interface or if the main mailbox PIN is known, the migration can use ASR to determine the number sub-mailboxes. The system navigates such special mailboxes during a call flow in substantially the same way as for a non-family mailbox using a family call tree but must wait for all of the PINs of the sub-mailboxes to be collected before migration can be started.","The present invention can obtain the mailbox information from the source system and send the mailbox information to the destination system via any public interface including a data interface, a voice interface and or a web interface.","The call tree used to navigate the source system could be discovered by an automatic process using ASR and DTMF to navigate the menu.","It is possible to migrate mailboxes in a system with a limited number of subscribers who can be migrated in a maintenance interval without using the switching system. Such a migration involves attaching digit collectors to the existing telephony interface of the source system to capture the pass codes of the subscribers. Once the pass codes are captured, the facilities would be switched to the migration server and the migration would be performed in the maintenance window after which the facilities would be switched to the destination system.","It is also possible to accelerate the migration by using the capabilities of some source systems to skip prompts. However, this may require sacrificing the collection of message attribute information.","The system of the present invention can also use speaker differentiation detection where the system detects the difference in the voice of the prompts and the messages to determine the beginning and ending of a message in an audio stream and to detect prompts. The system of present invention can use known maximum message lengths to assist in navigation. The system of present invention can also use ASR that can distinguish between languages when migrating from a multilingual system. The system of present invention can further use a network sniffer to detect the pass code should the source system transmit the pass code over a data network. The pass code can also be obtained via a report from the source system or via a web access sniffer operation when access to a mailbox over the Internet is allowed.","The present invention has been described with respect to storing a message in the destination system via a data transfer to the destination system through an IP interface, such as a LAN connection. It is possible to store a message in the destination system by accessing the destination system through the voice interface using a predetermined pass code and the subscriber number, save the message into the destination system by playing the recorded message through the voice interface as a new message and change the pass code or PIN to that of the subscriber. In this situation the envelope information, such as the date and time the message was saved will be inaccurate unless the destination system supports a mechanism allowing setting of envelope information through the voice interface.","The present invention has been described with respect to migration of voice messages. However, the present invention can be used to migrate other advanced features, such as \u201creminder\u201d, \u201cwake-up\u201d, special delivery, paging, etc. For example, for a paging message or a special delivery message the system of the present invention can record the message and move it to the destination system where it would be deposited in the appropriate queue triggering special processing in the destination system and then navigate the menu to deactivate that feature on the source system.","The present invention has been described with respect to voicemail. However, the present invention can be used to migrate an automated attendant application from one system to another.","The present invention has been described with respect to the tasks for a mailbox being performed sequentially. However, it is possible for tasks to be performed in parallel. For example, a mailbox greeting could be retrieved separately over one port while a message is being retrieved over another port if the source system allows multiple simultaneous login sessions. Most systems do not allow multiple simultaneous login sessions.","The present invention has been described with respect to migrating a mailbox in a single session. However, it is possible to migrate a mailbox over multiple sessions, if the date and duration of messages is retained so that a migration could continue from where it left off.","The present invention has also been described with respect to denying access to a mailbox by the mailbox subscriber during migration. However, access could be provided by having the host abort the migration to allow the subscriber to log in.","The present invention has been described as using a host and a migration server for migration. However, it is possible to have a single machine (server) do the functions of the host and the migration server. Additionally, as switching systems improve in capability, a switch may become available that could handle the tasks of the host, the server and the switch described herein.","The present invention has been described with the ASR operations being performed before the messages are packaged and transferred to the destination system. The ASR operations can be performed in real-time while the messages are being transferred to the destination system.","The PIN has been described as being a digital representation of the DTMF entered by the subscriber. The PIN can be stored as an audio file. The PIN can also be encrypted. The information transferred to the destination system can to the also be encrypted (using hypertext transmission protocol, secure\u2014HTTPS for example).","The present invention has been described with the system switching an incoming call to the source or destination respective to whether the subscriber has been migrated using a migration flag kept by the host. It is possible to allow the caller to login on the source system, obtain the account number of the caller and switch the call to the destination system if the account is one that has been migrated.","The system also includes permanent or removable storage, such as magnetic and optical discs, RAM, ROM, etc. on which the process and data structures of the present invention can be stored and distributed. The processes can also be distributed via, for example, downloading over a network such as the Internet.","The many features and advantages of the invention are apparent from the detailed specification and, thus, it is intended by the appended claims to cover all such features and advantages of the invention that fall within the true spirit and scope of the invention. Further, since numerous modifications and changes will readily occur to those skilled in the art, it is not desired to limit the invention to the exact construction and operation illustrated and described, and accordingly all suitable modifications and equivalents may be resorted to, falling within the scope of the invention."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIGS. 7A and 7B"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 9"}]},"DETDESC":[{},{}]}
