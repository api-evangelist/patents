---
title: Video capture through hardware
abstract: Activating a screen capture tool in a display adapter to capture information on a display. An operating system sends a command to the display adapter to initiate the capture of information from the graphical user interface of a display. The display adapter captures the information on the graphical user interface of the display. The information may be stored by the display adapter to a storage device that may be connected to the display adapter. The display is monitored for additional changes. Any changes that occur to the information on areas of the display may be captured and stored to the storage device. The operating system may enable the display adapter to retrieve the information stored in the storage device and/or play back the information retrieved to the display.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09472167&OS=09472167&RS=09472167
owner: International Business Machines Corporation
number: 09472167
owner_city: Armonk
owner_country: US
publication_date: 20090417
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND","SUMMARY","DETAILED DESCRIPTION"],"p":["1. Field","The present disclosure relates generally to image processing and more specifically to video stream capture through a display adapter.","2. Description of the Related Art","Screen capture tools may be used to capture video images displayed on a graphical user interface of a display. However, the operating system is not always aware of all the video information that may be displayed on a graphical user interface. There may be applications which bypass the operating system and directly communicate to the display adapter that is generating images on the graphical user interface. For example, an application may be configured to play back or display the contents of a digital video disc (DVD) or a movie file by sending the information directly to a display adapter rather than communicating through the operating system. Since the operating system is bypassed, the operating system cannot be aware of the information being sent by the application directly to the display adapter to the graphical user interface.","Therefore, screen capture tools that may query the operating system regarding information being generated to the graphical user interface by the display adapter would not receive information about any display that is being generated by the display adapter if the information is not being controlled by the operating system. Information captured from a graphical user interface by a screen capture tool that queries the operating system will not include any information that bypasses the operating system. The operating system may not have knowledge of any information or data sent directly through the display adapter to the graphical user interface.","When the information captured by the screen capture tool is played back to a display, information may be missing because the screen capture tool was not notified by the operating system that the information existed. The missing information may be displayed as areas of white space. Many existing systems with screen capture tools that operate in conjunction with an operating system cannot control the loss of information. Further, many systems do not recognize that information may be missing until the information captured by a screen capture tool is played back to a display.","One or more illustrative embodiments for improving the capture of information from a display are disclosed. In one illustrative embodiment, a display adapter activates a screen capture tool that may reside in the display adapter. The screen capture tool in the display adapter may be configured by the operating system to capture information from a graphical user interface at a specific frame rate. The data or information captured from the graphical user interface may be stored in a frame buffer in the display adapter before being stored by the display adapter to a storage medium. The display adapter may retrieve information from the storage medium for playback to a graphical user interface and\/or for transmission to the operating system.","In another illustrative embodiment, a system that captures information from a display is disclosed. The information may be video images or of some other type. The system comprises a display adapter that is configured to capture information from a display wherein the display includes a graphical user interface. The system also includes an operating system configured to control the operations of the display adapter; a screen capture tool communicatively coupled to the display adapter that enables the storage of information captured by the display adapter; and a storage device connected to the display adapter that stores information captured by the display adapter.","In another illustrative embodiment, an apparatus in a system environment captures information from a display. The information may be video data or of some other type. The apparatus comprises a microprocessor; an operating system, wherein the operating system is communicatively coupled to the microprocessor. The screen capture tool executed by the microprocessor to capture video information from the display, wherein the operating system is communicatively coupled to the screen capture tool; and a storage device, communicatively coupled to the screen capture tool, that stores the video information captured from the display through an operation of the screen capture tool.","In another illustrative embodiment, there is disclosed a method of capturing information on a display. The information may be images, video images, or video information. The method comprises actions of capturing, with a screen capture tool of a display adapter, information on a graphical user interface of the display to form captured information; storing the captured information to a storage device of the display adapter; monitoring the display for additional changes; capturing, to the storage device of the display adapter, an area of the graphical user interface that changes on the display; determining whether a command to terminate capturing the information has been received; and responsive to a determination that the command has been received, terminating capturing of the information.","In another illustrative embodiment, there is disclosed a method of retrieval from a display adapter. The method comprises initiating, through an operating system of a data processing system, a retrieval of information from a storage device; transferring the information retrieved from the storage device through a display adapter to a display for playback of the information; determining whether the transfer of information is complete; and responsive to the transfer of information being complete, notifying the operating system of a completion of the retrieval.","In another illustrative embodiment, there is disclosed a computer program product for capturing information from a display, the computer program product comprising a computer readable medium tangibly embodying computer executable instructions thereon. The computer executable instructions comprising instructions for capturing, with a screen capture tool of a display adapter, information on a graphical user interface of the display to form captured information; storing the captured information to a storage device of the display adapter; monitoring the display for additional changes; capturing, to the storage device of the display adapter, an area of the graphical user interface that changes on the display; determining whether a command to terminate capturing the information has been received; and responsive to a determination that the command has been received, terminating capturing of the information.","The illustrative embodiments of the disclosed processes and systems may provide for capturing information displayed on a graphical user interface without any loss of information. Additionally, the illustrative embodiments may provide for the efficient capture of content on a graphical user interface by executing software of the screen capture tool within a display adapter.","Although an illustrative implementation of one or more embodiments are provided below, the disclosed systems and\/or methods may be implemented using any number of techniques. This disclosure should in no way be limited to the illustrative implementations, drawings, and techniques illustrated below, including the exemplary designs and implementations illustrated and described herein, but may be modified within the scope of the appended claims along with their full scope of equivalents.","As will be appreciated by one skilled in the art, the present disclosure may be embodied as a system, method or computer program product. Accordingly, the present disclosure may take the form of an entirely hardware embodiment, an entirely software embodiment (including firmware, resident software, micro-code, etc.) or an embodiment combining software and hardware aspects that may all generally be referred to herein as a \u201ccircuit,\u201d \u201cmodule,\u201d or \u201csystem.\u201d Furthermore, the present disclosure may take the form of a computer program product tangibly embodied in any medium of expression with computer usable program code embodied in the medium.","Computer program code for carrying out operations of the present disclosure may be written in any combination of one or more programming languages, including an object oriented programming language such as Java\u2122, Smalltalk, C++, or the like and conventional procedural programming languages, such as the \u201cC\u201d programming language or similar programming languages. Java\u2122 and all Java\u2122-based trademarks and logos are trademarks of Sun Microsystems, Inc., in the United States, other countries, or both. The program code may execute entirely on the user's computer, partly on the user's computer, as a stand-alone software package, partly on the user's computer and partly on a remote computer or entirely on the remote computer or server. In the latter scenario, the remote computer may be connected to the user's computer through any type of network, including a local area network (LAN) or a wide area network (WAN), or the connection may be made to an external computer (for example, through the Internet using an Internet Service Provider).","The present disclosure is described below with reference to flowchart illustrations and\/or block diagrams of methods, apparatus, systems, and computer program products according to embodiments of the disclosure. It will be understood that each block of the flowchart illustrations and\/or block diagrams, and combinations of blocks in the flowchart illustrations and\/or block diagrams, can be implemented by computer program instructions.","These computer program instructions may be provided to a processor of a general purpose computer, special purpose computer, or other programmable data processing apparatus to produce a machine, such that the instructions, which execute via the processor of the computer or other programmable data processing apparatus, create means for implementing the functions\/acts specified in the flowchart and\/or block diagram block or blocks. These computer program instructions may also be stored in a computer-readable medium that can direct a computer or other programmable data processing apparatus to function in a particular manner, such that the instructions stored in the computer-readable medium produce an article of manufacture including instruction means which implement the function\/act specified in the flowchart and\/or block diagram block or blocks.","The computer program instructions may also be loaded onto a computer or other programmable data processing apparatus to cause a series of operational steps to be performed on the computer or other programmable apparatus to produce a computer implemented process such that the instructions which execute on the computer or other programmable apparatus provide processes for implementing the functions\/acts specified in the flowchart and\/or block diagram block or blocks.","Screen capture is the recording of information that is displayed on an output device. The output device may be a display, and the display may output a graphical user interface. As used herein, a \u201cdisplay\u201d is a device, such as a monitor, that displays data, image or video information. The information captured is stored as one or more still images or video. The captured information is stored, edited, and\/or played back at a later time. Screen capture may be used for creating demonstrations of software or for making educational videos showing how software works. In an illustrative embodiment, \u201ccapturing\u201d means copying and\/or recording a data stream.","The embodiments of this disclosure execute a screen capture tool residing on the display adapter. The screen capture tool may be activated to capture information that is displayed on the graphical user interface. The information may be captured to a storage device for later retrieval during playback of the information.","With reference to , a block diagram of data processing system  depicted in accordance with an illustrative embodiment. In this illustrative example, data processing system  includes communications fabric , which provides communications between processor unit , memory , persistent storage , communications unit , input\/output (I\/O) unit , display adapter . Data processing system  is communicatively coupled to display  through display adapter . As used herein, \u201ccommunicatively coupled\u201d means capable of transmitting and\/or receiving data and\/or commands.","Processor unit  serves to execute instructions for software that are loaded into memory . Processor unit  may be a set of one or more processors or may be a multi-processor core, depending on the particular implementation. Further, processor unit  may be implemented using one or more heterogeneous processor systems in which a main processor is present with secondary processors on a single chip. As another illustrative example, processor unit  may be a symmetric multi-processor system containing multiple processors of the same type.","Memory  and persistent storage  are examples of storage devices . A storage device is any piece of hardware that is capable of storing information, such as, for example without limitation, data, program code in functional form, and\/or other suitable information either on a temporary basis and\/or a permanent basis. Memory , in these examples, may be, for example, a random access memory or any other suitable volatile or non-volatile storage device. Persistent storage  takes various forms depending on the particular implementation. For example, persistent storage  contains one or more components or devices. For example, persistent storage  is a hard drive, a flash memory, a rewritable optical disc, a rewritable magnetic tape, or some combination of the above. The media used by persistent storage  also may be removable. For example, a removable hard drive may be used for persistent storage .","Communications unit , in these examples, provides for communications with other data processing systems or devices. In these examples, communications unit  is a network interface card. Communications unit  provides communications through the use of either or both physical and wireless communications links.","Input\/output unit  allows for input and output of data with other devices that are connected to data processing system . For example, input\/output unit  provides a connection for user input through a keyboard, a mouse, and\/or some other suitable input device. Further, input\/output unit  sends output to a printer. Display  provides a mechanism to display information to a user on a screen. Display adapter  provides an image generation mechanism that generates images or receives images from an external source for output to display . Display adapter  includes internal storage such as a non-volatile memory or volatile memory, depending on the specific application in which the display adapter  is used. In embodiments of this disclosure display adapter  also includes a screen capture tool which may be executed to capture content from the display .","Instructions for the operating system, applications and\/or programs may be located in storage devices , which are in communication with processor unit  through communications fabric . In these illustrative examples the instruction are in a functional form on persistent storage . These instructions may be loaded into memory  for execution by processor unit . The processes of the different embodiments may be performed by processor unit  using computer implemented instructions, which may be located in a memory, such as memory .","These instructions are referred to as program code, computer usable program code, or computer readable program code that may be read and executed by a processor in processor unit . The program code in the different embodiments may be embodied on different physical or tangible computer readable media, such as memory  or persistent storage .","Program code  is located in a functional form on computer readable media  that is selectively removable and is loaded onto or transferred to data processing system  for execution by processor unit . Program code  and computer readable media  form computer program product  in these examples. In one example, computer readable media  is in a tangible form, such as, for example, an optical or magnetic disc that is inserted or placed into a drive or other device that is part of persistent storage  for transfer onto a storage device, such as a hard drive that is part of persistent storage . In a tangible form, computer readable media  also takes the form of a persistent storage, such as a hard drive, a thumb drive, or a flash memory that is connected to data processing system . The tangible form of computer readable media  is also referred to as computer recordable storage media. In some instances, computer readable media  is not removable.","Alternatively, program code  may be transferred to data processing system  from computer readable media  through a communications link to communications unit  and\/or through a connection to input\/output unit . The communications link and\/or the connection may be physical or wireless in the illustrative examples. The computer readable media also may take the form of non-tangible media, such as communication links or wireless transmissions containing the program code.","In some illustrative embodiments, program code  is downloaded over a network to persistent storage  from another device or data processing system for use within data processing system . For instance, program code stored in a computer readable storage medium in a server data processing system may be downloaded over a network from the server to data processing system . The data processing system providing program code  may be a server computer, a client computer, or some other device capable of storing and transmitting program code .","The different components illustrated for data processing system  are not meant to provide architectural limitations to the manner in which different embodiments are implemented. The different illustrative embodiments may be implemented in a data processing system including components in addition to, or in place of, those illustrated for data processing system . Other components shown in  can be varied from the illustrative examples shown. The different embodiments may be implemented using any hardware device or system capable of executing program code. As one example, the data processing system may include organic components integrated with inorganic components and\/or may be comprised entirely of organic components excluding a human being. For example, a storage device may be comprised of an organic semiconductor.","As another example, a storage device in data processing system  is any hardware apparatus that stores data. Memory , persistent storage  and computer readable media  are examples of storage devices in a tangible form.","In another example, a bus system is used to implement communications fabric  and may be comprised of one or more buses, such as a system bus or an input\/output bus. Of course, the bus system may be implemented using any suitable type of architecture that provides for a transfer of data between different components or devices attached to the bus system. Additionally, a communications unit may include one or more devices used to transmit and receive data, such as a modem or a network adapter. Further, a memory may be, for example, memory  or a cache such as found in an interface and memory controller hub that are present in communications fabric .",{"@attributes":{"id":"p-0045","num":"0044"},"figref":["FIG. 2","FIG. 1"],"b":["200","200","200","118","200","200","200","210","200","200","200","220","220","200","240","230","250","230","200","260","270","260","250","270","200","260","250","200","210","250","200","260","200","220","250","220","260","240","260","250"]},{"@attributes":{"id":"p-0046","num":"0045"},"figref":"FIGS. 3A, 3B, and 3C"},{"@attributes":{"id":"p-0047","num":"0046"},"figref":["FIG. 3A","FIG. 1","FIG. 1","FIG. 1","FIG. 1","FIG. 2","FIG. 2"],"b":["304","300","302","314","304","300","100","304","118","312","114","314","116","302","304","304","306","306","250","312","310","300","304","302","300","306","304","230","200","306","310","312","310","310","310","310","310","312","304","308","302","314","314"]},"Display adapter  controls the storage of information from the screen of graphical user interface  to storage device . Operating system  sends a control signal to screen capture tool  to stop a capture of information from graphical user interface . Operating system  sends a command to playback information stored in storage device . In an embodiment, the information from storage device  is directly retrieved to display adapter  and displayed on a screen of graphical user interface . In another embodiment, information from storage device  is retrieved by the operating system  and sent to display adapter  for display on a screen of graphical user interface .",{"@attributes":{"id":"p-0049","num":"0048"},"figref":["FIG. 3B","FIG. 1","FIG. 1","FIG. 2"],"b":["304","328","324","324","320","326","328","320","100","304","118","332","114","1","326","250","322","330","326","324","322","326","330","332","326","328","324"]},{"@attributes":{"id":"p-0050","num":"0049"},"figref":["FIG. 3C","FIG. 1","FIG. 1","FIG. 1","FIG. 2"],"b":["304","334","338","346","348","334","100","304","118","344","114","348","336","340","338","342","344","340","250","342","338","346","348","336","340","348","342"]},"Information stored in a storage device may implement various compression strategies. The information may consist of frames of image data. In an illustrative embodiment, the screen capture tool chooses a compression strategy each time information is captured based on one or more flags in the configuration register of the display adapter.","In another illustrative embodiment, the second flag is referred to as a \u201cNO_CHANGE\u201d flag. While the \u201cNO_CHANGE\u201d flag is set, only indicators that the image data has not changed, are stored. The \u201cNO_CHANGE\u201d flag remains set until there is a change to the captured image data. Once there is a change to the captured image data, the \u201cNO_CHANGE\u201d flag is cleared. The \u201cNO_CHANGE\u201d flag is set after each frame is stored.","In another illustrative embodiment, a change to the captured image data results from a change to the graphical user interface. When the \u201cNO_CHANGE\u201d flag is not set, the display adapter compresses information stored, for example, by determining and storing only the smallest rectangle on the display screen that contains picture elements or pixels that were changed.","For example, when a frame is stored, four values are stored and set to a special value, such as 65535 or \u22121. The four values represent the size of the smallest rectangle encompassing pixel changes. The four values are a set of row and column values. For example, the four values may be the following: 10 for the start row, 20 for the end row, 5 for the start column, and 15 for the end column. When a pixel is changed and the coordinates of the pixel are outside of the rectangle represented by the four values, some of the four values are changed so that the rectangle now encompasses the changed pixel. Table 1, illustrated below, is instructive of the disclosed example.",{"@attributes":{"id":"p-0055","num":"0054"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"98pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"105pt","align":"left"}}],"thead":{"row":[{"entry":[{},"TABLE 1"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]},{"entry":[{},"Event","Minimum rectangle"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Capture start","(\u22121, \u22121) to (\u22121, \u22121)"]},{"entry":[{},"Change pixel (10, 15)","(10, 15) to (10, 15)"]},{"entry":[{},"Change pixel (20, 5)","(10, 5) to (20, 15)"]},{"entry":[{},"Change pixel (15, 7)","No change since that already"]},{"entry":[{},{},"within the rectangle."]},{"entry":[{},"Change pixel (15, 99)","(10, 5) to (20, 99)"]},{"entry":[{},"Store frame (10, 5) to (20, 99)","(\u22121, \u22121) to (\u22121, \u22121)"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}}}},"It must be noted that the disclosed compression strategy represents only one preferred embodiment and the discussed strategies should not be construed as architectural limitations. Other strategies may be evident to one skilled in the art. Compression strategies may be chosen on a frame-by-frame basis to minimize storage or maximize speed.",{"@attributes":{"id":"p-0057","num":"0056"},"figref":"FIG. 4","b":["400","402","404","406","408","410","412","412","418","412","414","416","418","410","418"]},{"@attributes":{"id":"p-0058","num":"0057"},"figref":"FIG. 5","b":["500","510","520","530","540","540","550","560"]},{"@attributes":{"id":"p-0059","num":"0058"},"figref":"FIG. 6","b":["600","610","620","630","640","630","640","650"]},"One or more illustrative embodiments may provide the ability to capture all information being displayed on the computer screen by ensuring it's captured at the level where all information is available. Also, one or more illustrative embodiments may capture the information in an efficient manner by offloading the capture work from the operating system to specialized hardware and software. Also, one or more illustrative embodiments may minimize unnecessary communication between the operating system and the capture device.","The flowchart and block diagrams in the figures illustrate the architecture, functionality, and operation of possible implementations of systems, methods and computer program products according to various embodiments of the present disclosure. In this regard, each block in the flowchart or block diagrams may represent a module, segment, or portion of code, which comprises one or more executable instructions for implementing a specified logical function. It should also be noted that, in some alternative implementations, the functions noted in the block may occur out of the order noted in the figures. For example, two blocks shown in succession may, in fact, be executed substantially concurrently, or the blocks may sometimes be executed in the reverse order, depending upon the functionality involved. It will also be noted that each block of the block diagrams and\/or flowchart illustration, and combinations of blocks in the block diagrams and\/or flowchart illustration, can be implemented by special purpose hardware-based systems that perform the specified functions or acts, or combinations of special purpose hardware and computer instructions.","The corresponding structures, materials, acts, and equivalents of all means or step plus function elements in the claims below are intended to include any structure, material, or act for performing the function in combination with other claimed elements as specifically claimed. The description of the present disclosure has been presented for purposes of illustration and description, but is not intended to be exhaustive or limited to the embodiments disclosed herein. Many modifications and variations will be apparent to those of ordinary skill in the art without departing from the scope and spirit of the disclosure.","The embodiments of the disclosure can take the form of an entirely hardware embodiment, an entirely software embodiment or an embodiment containing both hardware and software elements. In a preferred embodiment, the disclosure may be implemented in software, which includes but is not limited to firmware, resident software, microcode, and other software media that may be recognized by one skilled in the art.","It is important to note that while the present disclosure has been described in the context of a fully functioning data processing system, those of ordinary skill in the art will appreciate that the processes of the present disclosure are capable of being distributed in the form of a computer readable medium of instructions and a variety of forms and that the present disclosure applies equally regardless of the particular type of signal bearing media actually used to carry out the distribution. Examples of computer readable media include recordable-type media, such as a floppy disc, a hard disc drive, a RAM, CD-ROMs, DVD-ROMs, and transmission-type media, such as digital and analog communications links, wired or wireless communications links using transmission forms, such as, for example, radio frequency and light wave transmissions. The computer readable media may take the form of coded formats that are decoded for actual use in a particular data processing system.","A data processing system suitable for storing and\/or executing program code will include at least one processor coupled directly or indirectly to memory elements through a system bus. The memory elements can include local memory employed during actual execution of the program code, bulk storage, and cache memories which provide temporary storage of at least some program code in order to reduce the number of times code must be retrieved from bulk storage during execution.","Input\/output or I\/O devices (including but not limited to keyboards, displays, pointing devices, etc.) can be coupled to the system either directly or through intervening I\/O controllers.","Network adapters may also be coupled to the system to enable the data processing system to become coupled to other data processing systems or remote printers or storage devices through intervening private or public networks. Modems, cable modem and Ethernet cards are just a few of the currently available types of network adapters.","The disclosure has been presented for purposes of illustration and description, and is not intended to be exhaustive or limited to the embodiments disclosed. Many modifications and variations will be apparent to those of ordinary skill in the art. The embodiments were chosen and described in order to best explain the basic principles and practical applications, and to enable others of ordinary skill in the art to understand the various embodiments with various modifications as are suited to the particular use contemplated."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE SEVERAL VIEWS OF THE DRAWINGS","p":["For a more complete understanding of this disclosure, reference is now made to the following brief description, taken in conjunction with the accompanying drawings and detailed description, wherein like reference numerals represent like parts.",{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 3A"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 3B"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 3C"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 6"}]},"DETDESC":[{},{}]}
