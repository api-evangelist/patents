---
title: Coded image system and method thereof
abstract: A coded image system enables a user to recover an object scene from an encoded image. The coded the image system comprises: a physical object scene; an encoding logic creating an encoded image, the encoding logic including a programmable aperture mask spaced a distance away from the physical object scene to encode the encoded image via a doubly-Toeplitz matrix, the doubly-Toeplitz matrix including two one-dimensional vectors; and a decoding logic operatively coupled to the programmable aperture mask to decode the encoded image recovering a visual representation of the object scene from the encoded image.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09445115&OS=09445115&RS=09445115
owner: BAE Systems Information and Electronic Systems Integration Inc.
number: 09445115
owner_city: Nashua
owner_country: US
publication_date: 20141119
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATION","STATEMENT OF GOVERNMENT INTEREST","BACKGROUND OF THE INVENTION","SUMMARY OF INVENTION","DETAILED DESCRIPTION","Beyond MURAs: Invertible Masks","Doubly-Toeplitz Masks","Solution Via Regularized Normal Equations","Noise Covariance Matrices","Normalization of Reconstructed Images","Iterative Improvement","Landweber Iteration","Stopping Criteria for Iterations","Modified Landweber Iteration","Simulation of Decoding, Normalization, and Iterative Improvement","Exemplary Algorithm Summary","Solution Via Regularized Singular Value Decomposition (SVD)","Toeplitz Processing and Temporal Fluttering","Diffraction Simulations: Effects on Doubly-Toeplitz Masks","Diffraction Model Verification","Other Effects Modeled","Mask Selection","Laboratory Characterizations of SLM and Image-Plane","Image-Plane Defects, \u201cDead\u201d Pixels, and Other Camera Artifacts","Bad Pixel Correction and Image-Healing Algorithms","Random-Noise Mitigation","Brief Summary of Effects of Assessed","Parameter Optimization","Encoding and Decoding Real Data","Comparison to Equivalent Pinhole Apertures","Pinhole Mask Versus Coded Aperture Conclusions","Image Stacking"],"p":["This application claims priority from U.S. Provisional Application Ser. No. 61\/906,958, filed Nov. 21, 2013, the disclosure of which is incorporated herein by reference.","This invention was made with US Government assistance under Contract No. N00014-10-C-0193 awarded by the Office of Naval Research (ONR). The US Government has certain rights in this invention.","1. Field of the Invention","The present invention relates generally to devices, methods, and systems of coded images. More particularly, an aspect of the present invention relates to lensless imaging and to spatially coded imaging.","2. Brief Description of Prior Developments","Fixed (non-programmable) coded-aperture technology and programmable masks realized with Spatial Light Modulators were heretofore known in the art. The SLM elements are controlled so that the modulated transmission forms an aperture mask, encoding the image with a programmable function. The goal of decoding is to use knowledge of the aperture mask programmed with the programmable function to recover the object scene from the encoded image.","Information-theoretic analyses had identified two such classes of programmable masks used in association with recovering an object scene from an encoded image. The two classes are Uniformly Redundant Arrays (URAs) and Modified URAs (MURAs). Each may be used during the decoding process, however each has some drawbacks. A need therefore exists for an improved method for spatial decoding.","In accordance with one aspect of the present invention, an embodiment may provide a coded image system recovering an object scene from an encoded image, the image system comprising: (a) a physical object scene; (b) an encoding logic creating an encoded image, the encoding logic including a programmable aperture mask spaced a distance away from the physical object scene to encode the encoded image via a doubly-Toeplitz matrix, the doubly-Toeplitz matrix including two one-dimensional vectors; and (c) a decoding logic to decode the encoded image recovering a visual representation of the object scene from the encoded image.","In accordance with another aspect of the present invention, one embodiment may provide: a method comprising the steps of: encoding an image through an aperture mask programmed with a doubly-Toeplitz matrix coupled to a camera to create an encoded image; decoding the encoded image to recover a visual representation of an object scene; and displaying the recovered object scene in a monitor, wherein the recovered object scene is larger than the encoded image. The step of decoding may be accomplished within a computational time period to decode in less than one second for images that are one hundred megapixels in size. The step of decoding may also include the steps of: filtering the doubly-Toeplitz encoded image to remove pixel-to-pixel response variations caused by one or more of the following: dark noise, fixed-pattern noise, and bad pixels; regularizing the decoding of the doubly-Toeplitz encoded image via a Tikhonov or similar regularization method; and reconstructing the object scene as a decoded image larger than the encoded image. The step of decoding may also include the step of iterating the encoded image to reduce numerical round-off errors in inversions of the doubly-Toeplitz matrix in the aperture mask.","In accordance with another aspect of an embodiment of the present invention a doubly-Toeplitz mask is an example of an optical system in which the operation of the optics create an image that can be modeled separately in the two axes of an imager, so that the two-dimensional OTF (optical transfer function) can be treated as a sequential (x-axis then y-axis, or y-axis then x-axis) application of two one-dimensional OTFs. Separable optics have the advantage of having blur functions that can be processed very quickly to improve the quality of the images. The mathematical methods outlined herein are applicable to any system having separable OTFs, and would improve the quality of images recovered from such systems.","Similar numbers refer to similar parts throughout the drawings.","As depicted in , a coded image system of the present invention is depicted generally at . The image system  comprises a physical object scene , an encoding logic , and a decoding logic . The encoding logic  includes a programmable aperture mask  electronically coupled with a camera or imager  spaced a distance away from the physical object scene . Mask  receives light waves partially therethrough, as will be discussed in greater detail below. The encoding logic  creates an encoded image  via a doubly-Toeplitz matrix programmed on mask , the doubly-Toeplitz matrix produced by two one-dimensional vectors as will be described further below. The decoding logic  is configured to decode the encoded image recovering a visual representation  of the object scene from the encoded image. The decoding logic includes a filtering logic , a regularization logic , a reconstruction logic , a normalization logic , and a iteration logic . Once decoding logic  has recovered the encoded image the visual representation  may be displayed in a monitor  or alternatively print media. The physical object scene is  is non-uniform, including various angles, shapes, lighting, hues, and colors. The order of the processing steps can be varied, and steps may be combined.","\u201cLogic\u201d, as used herein, includes but is not limited to hardware, firmware, software and\/or combinations of each to perform a function(s) or an action(s), and\/or to cause a function or action from another logic, method, and\/or system. For example, based on a desired application or needs, logic may include a software controlled microprocessor, discrete logic like a processor (e.g., microprocessor), an application specific integrated circuit (ASIC), a programmed logic device, a memory device containing instructions, an electric device having a memory, or the like. Logic may include one or more gates, combinations of gates, or other circuit components. Logic may also be fully embodied as software. Where multiple logics are described, it may be possible to incorporate the multiple logics into one physical logic. Similarly, where a single logic is described, it may be possible to distribute that single logic between multiple physical logics.","The doubly-Toeplitz matrix may be realized in a medium selected from a group comprising a programmable aperture mask , a non-programmable aperture mask, a liquid crystal spatial light modulator, an eyelid array, and a self-supporting printed member, however other mediums are entirely possible. The doubly-Toeplitz matrix permits radiation through openings defined by the matrix and blocks radiation through non-openings defined by the matrix, wherein the radiation is selected from the group comprising visible light, x-rays, gamma rays, UV light, and infrared light. The use of a doubly-Toeplitz matrix in the encoding logic, causes the problem of partial mask encoding to be more tractable, thus enabling efficient algorithmic methods for inverting the system transfer function.","Additionally, the use of the doubly-Toeplitz matrix in the encoding logic is more accurate than previously known spatial light encoding functions. The doubly-Toeplitz matrix encoding allows for the inversion of the encoding function. When on a programmable mask, the doubly-Toeplitz matrix are separable and produce fewer zero eigenvalues than decodings with non-separable masks. Thus, there are fewer random decoding artifacts introduced, yielding more accurate reconstruction of the scene being imaged. Thus, some images that could not be decoded with prior art, are now accurately decodable.","By way of some further background, fixed (non-programmable) coded-aperture technology and programmable aperture masks electronically coupled to cameras and realized with Spatial Light Modulators (SLM) were heretofore known in the art. The SLM elements are controlled to modulate a transmission so that the modulated transmission forms an aperture mask, encoding an image I with a programmed function M, so that:\n\n, or, in terms of matrix elements:\u2003\u2003(1)\n",{"@attributes":{"id":"p-0043","num":"0042"},"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":[{"mtd":[{"mrow":{"mo":["(",")"],"mn":"1"}},{"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}]},{"mtd":[{"mrow":{"msub":{"mi":"I","mrow":{"mi":["i","j"],"mo":","}},"mo":"=","mrow":{"munder":{"mo":"\u2211","mrow":{"mi":["k","l"],"mo":","}},"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mrow":{"msub":{"mi":"M","mrow":{"mi":["k","l"],"mo":","}},"mo":"\u2062","mrow":{"msub":{"mi":"O","mrow":{"mrow":[{"mi":["k","i"],"mo":"+"},{"mi":["l","j"],"mo":"+"}],"mo":","}},"mo":"."}}}}},{"mrow":{"mo":["(",")"],"mn":"2"}}]}]}}}},"The goal of decoding is to use knowledge of the aperture mask function M to recover the object scene O from the encoded image I.","The mathematical state of the art prior to this application was to select binary codes which could be inverted via forward correlation with slightly-modified versions of themselves. Specifically, mask codes or the programmable function M were selected for which the masks were simply a collection of binary (0% or 100% transparent) elements. Exemplary binary masks  programming function M are depicted in . An inverse matrix G (inverse of function M), such that\n\n\u2003\u2003(3)\n\nwas easily derivable from M itself. For example, for Uniformly Redundant Array masks:\n",{"@attributes":{"id":"p-0046","num":"0045"},"maths":{"@attributes":{"id":"MATH-US-00002","num":"00002"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"msub":{"mi":"G","mrow":{"mi":["i","j"],"mo":","}},"mo":"=","mrow":{"mo":"{","mrow":{"mtable":{"mtr":[{"mtd":[{"mrow":{"mrow":{"mo":"+","mn":"1"},"mo":","}},{"mrow":{"msub":{"mi":"M","mrow":{"mi":["i","j"],"mo":","}},"mo":"=","mn":"1"}}]},{"mtd":[{"mrow":{"mrow":{"mo":"-","mn":"1"},"mo":","}},{"mrow":{"msub":{"mi":"M","mrow":{"mi":["i","j"],"mo":","}},"mo":"=","mn":"0"}}]}]},"mo":"."}}}},{"mrow":{"mo":["(",")"],"mn":"4"}}]}}}}},"Information-theoretic analyses had identified that the Uniformly Redundant Arrays (URAs) and Modified URAs (MURAs) satisfied Equation (3) under periodic boundary conditions.","In addition to ease of decoding, an advantage of inverse G matrices which satisfy Equation (3) is that an image of a point source viewed through the mask programmed with function M is simply a scaled version of the decoding mask G, already properly registered to the image I. This removes registration as a source of decoding errors.",{"@attributes":{"id":"p-0049","num":"0048"},"figref":"FIG. 2"},"The most straightforward approach for regularized inversion is to invert Equation (1) by Fourier transform. Investigations with SLMs revealed noisy low-contrast recovered images, and efforts to diagnose the causes were complicated by effects such as diffraction, polarization, and non-uniform SLM-element throughput. To separate those effects, non-programmable masks were lithographically patterned on glass. The lithographic masks had the same dimensions and element sizes as the MURA patterns programmed for the SLMs, so that only they should provide the best possible quality MURAs for encoding.","Imaging with non-programmable lithographic masks eliminated confounding effects, until the research traced performance limitations to the effects of incomplete encoding of extended scenes on a finite focal plane. This effect, called Partial-Mask Encoding, was intractable with straightforward Fourier decoding\u2014the incomplete capture of the mask shadow on the image plane caused too much loss of information.","Via numerical simulations, it was determined that the presence of noise made regularized decoding even more difficult, with the noise effects being amplified by the partial-mask decoding process.","To solve the problem with partial-mask encoding, the inventors implemented regularized decoding by introducing a real, positive function ck. In terms of Fourier Transforms, the decoding became:",{"@attributes":{"id":"p-0054","num":"0053"},"maths":{"@attributes":{"id":"MATH-US-00003","num":"00003"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":{"mrow":{"msub":{"mi":["O","Recovered"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"k"}},"mo":["\u2248","\u2248"],"mfrac":[{"mrow":[{"mrow":[{"mi":"I","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"k"}},{"mi":"M","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"k"}}],"mo":"\u2062"},{"msup":{"mrow":{"mo":["\uf603","\uf604"],"mrow":{"mi":"M","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"k"}}},"mn":"2"},"mo":"+","mrow":{"msup":{"mi":"c","mn":"2"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"k"}}}]},{"mrow":[{"mrow":[{"mi":"I","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"k"}},{"mi":"M","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"k"}}],"mo":"\u2062"},{"msup":{"mrow":{"mo":["\uf603","\uf604"],"mrow":{"mi":"M","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"k"}}},"mn":"2"},"mo":"+","mrow":{"mo":["(",")"],"mrow":{"mn":"1","mo":"\/","mrow":{"msup":{"mi":"SNR","mn":"2"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"k"}}}}}]}]},"mo":","}},{"mrow":{"mo":["(",")"],"mn":"5"}}]}}}},"br":{}},"However with regularization, it is still difficult to decode extended scenes which are typical of non-laboratory imaging. While it was possible to decode images of objects set against a uniform black background, decoded images of extended scenes usually were unrecognizable. The inventors traced this to the use of Fourier decoding, which has the limitations of implicitly assuming cyclic or periodic behavior of the object O. This is not a serious drawback for compact objects against an extended uniform background, as is the case with astronomical imaging (for which coded-apertures were originally invented). However, Fourier decoding has severely limited performance for very-extended scenes having significant partial-mask encoding.","To relax the assumption of cyclic boundaries, the inventors returned to imaging theory and re-cast the decoding problem in the most general terms. The correlation of a programmable mask filter function M with an object scene O to yield an image I in Equation (1) can also be expressed as a simple matrix multiplication:",{"@attributes":{"id":"p-0057","num":"0056"},"maths":{"@attributes":{"id":"MATH-US-00004","num":"00004"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"mrow":[{"mi":"I","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"1"},{"mrow":{"msup":{"mi":["M","\u2033"]},"mo":"\u00b7","mi":"O"},"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"1"}],"mo":"="},{"mrow":[{"mi":["so","that","I"],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"msub":{"mn":"1","mi":"i"}},{"munder":{"mo":"\u2211","mi":"k"},"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mrow":{"msubsup":{"mi":["M","\u2033"],"mrow":{"mi":["i","k"],"mo":","}},"mo":["\u2062","\u2062","\u2062"],"mi":"O","mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mrow":{"msub":{"mn":"1","mi":"k"},"mo":"."}}}],"mo":"="}],"mo":","}},{"mrow":{"mo":["(",")"],"mn":"6"}}]}}}},"br":[{},{},{}],"in-line-formulae":[{},{}],"i":["I","=I","O","=O"],"sub":["C",{"sub2":"I"},"*i+j","i,j","C",{"sub2":"O"},"*i+j","i,j","I ","O ","O","F","O","O","O","O "]},{"@attributes":{"id":"p-0058","num":"0057"},"maths":{"@attributes":{"id":"MATH-US-00005","num":"00005"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msubsup":{"mi":["M","\u2033"],"mrow":{"mi":"I","mo":",","mrow":{"mrow":{"msub":{"mi":["C","o"]},"mo":"*","mi":"i"},"mo":"+","mi":"j"}}},"mo":"=","mrow":{"mo":"{","mrow":{"mtable":{"mtr":[{"mtd":[{"msub":{"mi":"M","mrow":{"mi":["i","j"],"mo":","}}},{"mrow":{"mrow":[{"mi":["for","j"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}},{"mi":["the","first","columns"],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}],"msub":{"mi":"C","mrow":{"mi":"F","mo":"\u2062","mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}}}}],"mo":"\u2208"}}]},{"mtd":[{"mn":"0"},{"mrow":{"mrow":[{"mi":["for","j"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}},{"mi":["later","columns"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}}],"mo":"\u2208"}}]}]},"mo":"."}}}}},"br":{}},{"@attributes":{"id":"p-0059","num":"0058"},"maths":{"@attributes":{"id":"MATH-US-00006","num":"00006"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"mo":["[","]"],"mtable":{"mtr":[{"mtd":[{"msub":{"mi":"I","mn":"00"}},{"msub":{"mi":"I","mn":"01"}}]},{"mtd":[{"msub":{"mi":"I","mn":"10"}},{"msub":{"mi":"I","mn":"11"}}]}]}},{"mrow":[{"mo":["[","]"],"mtable":{"mtr":[{"mtd":[{"msub":{"mi":"f","mn":"00"}},{"msub":{"mi":"f","mn":"01"}},{"msub":{"mi":"f","mn":"02"}}]},{"mtd":[{"msub":{"mi":"f","mn":"10"}},{"msub":{"mi":"f","mn":"11"}},{"msub":{"mi":"f","mn":"12"}}]},{"mtd":[{"msub":{"mi":"f","mn":"20"}},{"msub":{"mi":"f","mn":"21"}},{"msub":{"mi":"f","mn":"22"}}]}]}},{"mo":["[","]"],"mtable":{"mtr":[{"mtd":[{"msub":{"mi":"O","mn":"00"}},{"msub":{"mi":"O","mn":"01"}},{"msub":{"mi":"O","mn":"02"}},{"msub":{"mi":"O","mn":"03"}}]},{"mtd":[{"msub":{"mi":"O","mn":"10"}},{"msub":{"mi":"O","mn":"11"}},{"msub":{"mi":"O","mn":"12"}},{"msub":{"mi":"O","mn":"13"}}]},{"mtd":[{"msub":{"mi":"O","mn":"20"}},{"msub":{"mi":"O","mn":"21"}},{"msub":{"mi":"O","mn":"22"}},{"msub":{"mi":"O","mn":"23"}}]},{"mtd":[{"msub":{"mi":"O","mn":"30"}},{"msub":{"mi":"O","mn":"31"}},{"msub":{"mi":"O","mn":"32"}},{"msub":{"mi":"O","mn":"33"}}]}]}}],"mo":"\u2297"}],"mo":"="}},{"mrow":{"mo":["(",")"],"mn":"8"}}]}}}}},"Expressed as a matrix multiplication, this correlation is given by Equation (9):",{"@attributes":{"id":"p-0061","num":"0060"},"maths":{"@attributes":{"id":"MATH-US-00007","num":"00007"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":[{"mtd":[{"mrow":{"mrow":{"mrow":[{"mo":["[","]"],"mtable":{"mtr":[{"mtd":{"msub":{"mi":"I","mn":"00"}}},{"mtd":{"msub":{"mi":"I","mn":"01"}}},{"mtd":{"msub":{"mi":"I","mn":"10"}}},{"mtd":{"msub":{"mi":"I","mn":"11"}}}]}},{"msup":{"mi":["M","\u2033"]},"mo":"\u00b7","mrow":{"mo":["[","]"],"mtable":{"mtr":[{"mtd":{"msub":{"mi":"O","mn":"00"}}},{"mtd":{"msub":{"mi":"O","mn":"01"}}},{"mtd":{"msub":{"mi":"O","mn":"02"}}},{"mtd":{"msub":{"mi":"O","mn":"03"}}},{"mtd":{"msub":{"mi":"O","mn":"10"}}},{"mtd":{"msub":{"mi":"O","mn":"11"}}},{"mtd":{"msub":{"mi":"O","mn":"12"}}},{"mtd":{"msub":{"mi":"O","mn":"13"}}},{"mtd":{"msub":{"mi":"O","mn":"20"}}},{"mtd":{"msub":{"mi":"O","mn":"21"}}},{"mtd":{"msub":{"mi":"O","mn":"22"}}},{"mtd":{"msub":{"mi":"O","mn":"23"}}},{"mtd":{"msub":{"mi":"O","mn":"30"}}},{"mtd":{"msub":{"mi":"O","mn":"31"}}},{"mtd":{"msub":{"mi":"O","mn":"32"}}},{"mtd":{"msub":{"mi":"O","mn":"33"}}}]}}}],"mo":"="},"mo":",","mi":"with"}},{"mrow":{"mo":["(",")"],"mn":"9"}}]},{"mtd":[{"mrow":{"msup":{"mi":["M","\u2033"]},"mo":"=","mrow":{"mo":["[","]"],"mtable":{"mtr":[{"mtd":[{"msub":{"mi":"f","mn":"00"}},{"msub":{"mi":"f","mn":"01"}},{"msub":{"mi":"f","mn":"02"}},{"mn":"0"},{"msub":{"mi":"f","mn":"10"}},{"msub":{"mi":"f","mn":"11"}},{"msub":{"mi":"f","mn":"12"}},{"mn":"0"},{"msub":{"mi":"f","mn":"20"}},{"msub":{"mi":"f","mn":"21"}},{"msub":{"mi":"f","mn":"22"}},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"msub":{"mi":"f","mn":"00"}},{"msub":{"mi":"f","mn":"01"}},{"msub":{"mi":"f","mn":"02"}},{"mn":"0"},{"msub":{"mi":"f","mn":"10"}},{"msub":{"mi":"f","mn":"11"}},{"msub":{"mi":"f","mn":"12"}},{"mn":"0"},{"msub":{"mi":"f","mn":"20"}},{"msub":{"mi":"f","mn":"21"}},{"msub":{"mi":"f","mn":"22"}},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"msub":{"mi":"f","mn":"00"}},{"msub":{"mi":"f","mn":"01"}},{"msub":{"mi":"f","mn":"02"}},{"mn":"0"},{"msub":{"mi":"f","mn":"10"}},{"msub":{"mi":"f","mn":"11"}},{"msub":{"mi":"f","mn":"12"}},{"mn":"0"},{"msub":{"mi":"f","mn":"20"}},{"msub":{"mi":"f","mn":"21"}},{"msub":{"mi":"f","mn":"22"}},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"msub":{"mi":"f","mn":"00"}},{"msub":{"mi":"f","mn":"01"}},{"msub":{"mi":"f","mn":"02"}},{"mn":"0"},{"msub":{"mi":"f","mn":"10"}},{"msub":{"mi":"f","mn":"11"}},{"msub":{"mi":"f","mn":"12"}},{"mn":"0"},{"msub":{"mi":"f","mn":"20"}},{"msub":{"mi":"f","mn":"21"}},{"msub":{"mi":"f","mn":"22"}}]}]}}}},{"mrow":{"mo":["(",")"],"mn":"10"}}]}]}}}},"The size of the matrix M\u2033 grows as the sizes of the image and the filter mask grow. If the image has dimensions rcand the filter has dimensions rc, then the sampled object is of size rc, with r=(r+r\u22121) and c=(c+C\u22121). This yields for the matrix M\u2033 dimensions of (r*c) rows and (r*c) columns.","The forward correlation can be done exactly using Equation (6), which is an improvement on Fourier-transform methods. However, the inverse problem (estimating O from the measurements I) is extremely difficult. This is an ill-posed inversion, inasmuch as there may be many more elements in O than in I. To a degree, this is true of all imagers\u2014real focal planes can collect only a finite number of discrete pixels, and solving ill-posed imaging problems is an active area of research. The general case to estimate O from I, is commonly inverted by solving the regularized normal equations:\n\n1=(1)1,\u2003\u2003(11)\n\nwhere 1is the identity matrix with each dimension measuring R\u00d7C. Solving Equation (11) requires inverting the square matrix (M\u2033M\u2033+\u03b11) having dimensions each measuring r\u00d7c=(r+r\u22121). The operations count for solving Equation (11) is on the order of:\n\n\u221d().\u2003\u2003(12)\n","For images of a size on the order of one megapixel, this yields 10operations, requiring on the order of 10seconds\u224812 days on a teraflops processor. Thus, computations on full-sized images using generalized masks are unlikely to be practical. Further, the matrix M\u2033 is so large that accumulation of round-off errors will likely swamp the inversion, even if it could be accomplished in a manageable time.","The inventors investigated a strategy, which the inventors called the megamatrix approach, to make the generalized problem tractable. This megamatrix approach models object space at a lower resolution, such that the inversion problem is well-posed, and is capable of producing very good results in light of partial mask encoding. However, due to the number of computations involved and the accumulation of round-off errors as discussed above, the inventors have concluded that the approach would be limited to images areas measuring only a few hundred pixels.","In parallel with the megamatrix approach investigation of Equation (11), aspects of the present invention sought alternate strategies\u2014seeking improved masks which would have both a large open area (to maximize light-gathering) and mitigate the ill-posed partial-mask problem. Even in cases in which the image resolution is extremely dense, so that sampling is not a limiter of reconstruction accuracy, the finite extent of real focal planes causes the correlation of the mask and object,",{"@attributes":{"id":"p-0067","num":"0066"},"maths":{"@attributes":{"id":"MATH-US-00008","num":"00008"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":{"mrow":[{"mi":"I","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["i","j"],"mo":","}}},{"munder":{"mo":"\u2211","mi":"k"},"mo":"\u2062","mrow":{"munder":{"mo":"\u2211","mi":"l"},"mo":"\u2062","mrow":{"mrow":[{"mi":"O","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["k","l"],"mo":","}}},{"mi":"M","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mrow":[{"mi":["i","k"],"mo":"+"},{"mi":["j","l"],"mo":"+"}],"mo":","}}}],"mo":"\u2062"}}}],"mo":"\u2248"},"mo":","}},{"mrow":{"mo":["(",")"],"mn":"13"}}]}}}},"br":{}},"It is possible to specify finite-sized masks that greatly reduce the degree to which the imaging is ill-posed, and render the inversion of Equation (13) tractable. With respect to encoding logic , if the programmable aperture mask  programmed with function M can be expressed as an outer product of two one-dimensional vectors A and B, with lengths Nand Nrespectively, then M is an N\u00d7N-dimensional matrix of the form:\n\n()=()(),\u2003\u2003(14)\n\nand the convolution Equation (13) can be written simply as a matrix product:\n\n\u2003\u2003(15)\n\nwherein a noise term N has been added.\n","The matrices Mand Mhave Toeplitz forms, in which each row is a copy of the previous row, with the elements shifted by one pixel on each successive",{"@attributes":{"id":"p-0070","num":"0069"},"maths":{"@attributes":{"id":"MATH-US-00009","num":"00009"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":[{"mtd":[{"mrow":{"mrow":{"mrow":[{"mi":"row","mo":["\u2062","\u2062","\u2062"],"mstyle":[{"mtext":":"},{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}],"msub":{"mi":["M","A"]}},{"mo":["[","]"],"mtable":{"mtr":[{"mtd":[{"msub":{"mi":"A","mn":"1"}},{"msub":{"mi":"A","mn":"2"}},{"mi":"\u2026"},{"msub":{"mi":"A","msub":{"mi":["N","A"]}}},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mi":"\u2026"},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"msub":{"mi":"A","mn":"1"}},{"msub":{"mi":"A","mn":"2"}},{"mi":"\u2026"},{"msub":{"mi":"A","msub":{"mi":["N","A"]}}},{"mn":"0"},{"mn":"0"},{"mi":"\u2026"},{"mn":"0"}]},{"mtd":[{"mi":"\u22ee"},{"mi":"\u22f1"},{"mi":"\u22f1"},{"mi":"\u22f1"},{"mi":"\u22f1"},{"mi":"\u22f1"},{"mi":"\u22f1"},{"mi":"\u22f1"},{"mi":"\u22ee"}]},{"mtd":[{"mn":"0"},{"mi":"\u2026"},{"msub":{"mi":"A","mn":"1"}},{"msub":{"mi":"A","mn":"2"}},{"mi":"\u2026"},{"msub":{"mi":"A","msub":{"mi":["N","A"]}}},{"mi":"\u22f1"},{"mi":"\u22f1"},{"mi":"\u22ee"}]},{"mtd":[{"mi":"\u22ee"},{"mi":"\u2026"},{"mi":"\u22f1"},{"mi":"\u22f1"},{"mi":"\u22f1"},{"mi":"\u22f1"},{"mi":"\u22f1"},{"mi":"\u22f1"},{"mi":"\u22ee"}]},{"mtd":[{"mn":"0"},{"mi":"\u2026"},{"mn":"0"},{"mn":"0"},{"msub":{"mi":"A","mn":"1"}},{"msub":{"mi":"A","mn":"2"}},{"mi":"\u2026"},{"msub":{"mi":"A","msub":{"mi":["N","A"]}}},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"mi":"\u2026"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"msub":{"mi":"A","mn":"1"}},{"mi":"\u2026"},{"msub":{"mi":"A","mrow":{"msub":{"mi":["N","A"]},"mo":"-","mn":"1"}}},{"msub":{"mi":"A","msub":{"mi":["N","A"]}}}]}]}}],"mo":"="},"mo":["\u2062","\u2062","\u2062"],"mstyle":[{"mtext":{}},{"mspace":{"@attributes":{"width":"1.1em","height":"1.1ex"}}}],"mi":"and"}},{"mrow":{"mo":["(",")"],"mn":"16"}}]},{"mtd":[{"mrow":{"mstyle":{"mspace":{"@attributes":{"width":"1.1em","height":"1.1ex"}}},"mo":"\u2062","mrow":{"msub":{"mi":["M","B"]},"mo":"=","mrow":{"mrow":{"mo":["[","]"],"mtable":{"mtr":[{"mtd":[{"msub":{"mi":"B","mn":"1"}},{"msub":{"mi":"B","mn":"2"}},{"mi":"\u2026"},{"msub":{"mi":"B","msub":{"mi":["N","B"]}}},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mi":"\u2026"},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"msub":{"mi":"B","mn":"1"}},{"msub":{"mi":"B","mn":"2"}},{"mi":"\u2026"},{"msub":{"mi":"B","msub":{"mi":["N","B"]}}},{"mn":"0"},{"mn":"0"},{"mi":"\u2026"},{"mn":"0"}]},{"mtd":[{"mi":"\u22ee"},{"mi":"\u22f1"},{"mi":"\u22f1"},{"mi":"\u22f1"},{"mi":"\u22f1"},{"mi":"\u22f1"},{"mi":"\u22f1"},{"mi":"\u22f1"},{"mi":"\u22ee"}]},{"mtd":[{"mn":"0"},{"mi":"\u2026"},{"msub":{"mi":"B","mn":"1"}},{"msub":{"mi":"B","mn":"2"}},{"mi":"\u2026"},{"msub":{"mi":"B","msub":{"mi":["N","B"]}}},{"mi":"\u22f1"},{"mi":"\u22f1"},{"mi":"\u22ee"}]},{"mtd":[{"mi":"\u22ee"},{"mi":"\u2026"},{"mi":"\u22f1"},{"mi":"\u22f1"},{"mi":"\u22f1"},{"mi":"\u22f1"},{"mi":"\u22f1"},{"mi":"\u22f1"},{"mi":"\u22ee"}]},{"mtd":[{"mn":"0"},{"mi":"\u2026"},{"mn":"0"},{"mn":"0"},{"msub":{"mi":"B","mn":"1"}},{"msub":{"mi":"B","mn":"2"}},{"mi":"\u2026"},{"msub":{"mi":"B","msub":{"mi":["N","B"]}}},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"mi":"\u2026"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"msub":{"mi":"B","mn":"1"}},{"mi":"\u2026"},{"msub":{"mi":"B","mrow":{"msub":{"mi":["N","B"]},"mo":"-","mn":"1"}}},{"msub":{"mi":"B","msub":{"mi":["N","B"]}}}]}]}},"mo":"."}}}},{"mrow":{"mo":["(",")"],"mn":"17"}}]}]}}}},{"@attributes":{"id":"p-0071","num":"0070"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":"TABLE 1"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Relationship of dimensions of the collected image, the encoding filter"},{"entry":"mask and the object area contributing to the image."}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"105pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"63pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Matrix","rows","columns"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}},{"entry":["Coded-aperture Mask Filter M","r","c"]},{"entry":["Image on Focal Plane I","r","c"]},{"entry":["Object area O","r= (r+ r\u2212 1)","c= (c+ c\u2212 1)"]},{"entry":["Left Toeplitz mask M","r","r"]},{"entry":["Right Toeplitz mask M","c","c"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}}},"The difficulty of inversion using Equation (15) is vastly less than for solving Equation (11). The matrices Mand Mare not square (except in the trivial case of a single-pinhole mask), so that this is still an ill-posed problem. However, their sizes are much smaller than M\u2033 in (11). If the image I has Rrows and Ccolumns, then Mhas Rrows and (R+N\u22121) columns, and Mhas Crows and (C+N\u22121) columns. The size of the object O is then Rby C, where R=(R+N\u22121) and C=(C+N\u22121). The matrix inversions thus require an operations count on the order of\n\n\u221d[()+()].\u2003\u2003(18)\n","For images of a size on the order of one megapixel, this yields on the order of 2\u00d710operations, requiring just milliseconds on a teraflops processor. Thus, unlike arbitrarily general masks, doubly-Toeplitz masks can be inverted in a usefully short time.","Those skilled in the art will recognize that Mand Meach have the form of a Toeplitz matrix\u2014a matrix in which the elements of each row are identical to the elements in the first row, except for a shift in their column-wise positions, so that each diagonal descending from left to right is constant. The term \u201cdoubly\u201d refers to twice the normal extent or two times or in two ways, with reference to the two matrices Mand Mthat are each in Toeplitz form. In accordance with one aspect of the present invention and in keeping with this inversion time period, the coded image system of the present invention includes a computational time period to decode the encoded image, wherein the computational time period is consistent with speeds faster than 10 million pixels per second per Gigaflops of processing power. The computational time period is less than one second for images that are one hundred megapixels in size when a 10 Gigaflops (1 Gigaflops=1,000,000,000 floating-point operations per second) processor is employed. And further, the computational time period is less than ten milliseconds for images that are one megapixel in size when a 10 Gigaflops processor is employed.","In general, convolutions or correlations (such as image formation) can be expressed as multiplications of the object field with Toeplitz, circulant-Toeplitz, or near-Toeplitz matrices. However, the generalized problem using arbitrary masks may involve such large matrices (on the order of image size\u00d7the object size=trillions of elements, for the images the inventors are investigating) that it is in practice intractable. By requiring the masks to have the form specified in Equation (14), the present invention can render the convolution as a pair of much smaller Toeplitz problems.","It will be appreciated that compared to MURAs or generalized masks, the use of doubly-Toeplitz aperture masks reduces the computational burden by orders of magnitude.","With reference to decoding logic , in real imaging systems, there will always be noise arising from effects such as photon counting or read noise, so that the actual inverse problem includes a noise term N, as shown in Equation (15). In addition, there may still be an ill-posed nature of the problem, embodied in the non-square matrices Mand M. Both the noise and the ill-posedness require a regularization method via regularization logic . Begin by multiplying Equation (15) by the transposes of the mask matrices, obtaining the normal equation:\n\n=()().\u2003\u2003(19)\n","The matrix products (MM) and (MM) are square and symmetric, but are not invertible because their determinants are zero, due to degenerate zero eigenvalues. The degree of degeneracy increases with the size of the filter masks\u2014there are (r\u2212r) zero eigenvalues for M, and (c\u2212c) zero eigenvalues for M. (Compare this case to solving Equation (11) with \u03b1=0; which is orders of magnitude more degenerate, having (rc\u2212rc) zero eigenvalues.)","To relieve the degeneracies, introduce two regularization parameters \u03b1and \u03b1, so that:\n\n\u2248(+\u03b11)(+\u03b11),\u2003\u2003(20)\n\nwhere 1is an identity matrix with dimensions R, and 1is an identity matrix with dimensions C. Equation (20) now multiplies O by invertible matrices, so that an estimate of O can be derived from the image:\n\n=(+\u03b11)(+\u03b11).\u2003\u2003(21)\n","Equation (21) has a form superficially very similar to the noise-regularization employed with the Fourier-transform method of Equation (5). However, it is now also apparent that the regularization parameters are required even if there is no noise, since the matrix inverses would not exist otherwise. This is regularization logic  includes a special case of the Tikhonov regularization method used in image de-blurring\u2014the parameters \u03b1and \u03b1play the dual roles of regularizing the inversion and controlling the effects of noise.","An example of the effectiveness of the Tikhonov-Toeplitz encoding and decoding aspect of the present invention  is shown in  and . This is a complex simulated scene with features spanning its edges, yielding severe partial-mask encodings. The encoded images in this case were not reconstructable at all via Fourier methods, even when no noise was present.","Reconstruction logic  via Equation (21) successfully reconstructed not only the central portion of the scene (the part with dimensions equal to the image size), but also extended the reconstruction to the entire range sampled by the encoding mask. With noise added to the imagery, the regularization constants had to be increased (from 1E-10 to 1E+02) to suppress the noise. Increasing the Tikhonov parameters cause blurring of fine image features, but still yielded recognizable decodings.","The doubly-Toeplitz encodings enable reconstruction logic  to digitally reconstruction of scenes larger than the encoded images. This is due to having complete knowledge of the encoding function, and the fact that there are constrained the degrees of freedom to one dimension instead of two, compressing the unknowns by orders of magnitude.","Successful reconstruction via logic  requires that: (1) the imagers  have enough dynamic range, that the edges can be \u201cunfolded\u201d from the center without significant loss of information, (2) knowing the encoding functions (either by measurement or by modeling), and (3) constructing Toeplitz masks without zeroes in their spatial-frequency spectra.","A more-generalized regularization is also possible, deriving non-diagonal regularization matrices based on noise covariances, instead of the diagonal matrices 1and 1in Equation (21), after elimination of the non-noise sources of error and interference. However, some scene-dependent non-noise errors such as stray light may present the majority of the errors.","With continued reference to  and , an image is depicted in panel (a) and the aperture mask  programmed with doubly-Toeplitz function M is depicted in panel (b). The reconstructed images in panels (c), (d) in  and panels (e), (f) in  show patterns or \u201cartifacts\u201d at their edges within a distance of one mask width (or height) of the border. The artifacts in encoded images of uniform (all white) scenes, lead the inventors to hypothesize that one can normalize such artifacts out of the reconstructed images.","With reference to decoding logic , the normalization can be accomplished normalizing logic  by encoding and decoding a uniform all-white object W to create an estimate Wthat includes the errors in image recovery due to the regularized decoding:\n\n+\u03b11]()()[+\u03b11],\u2003\u2003(22)\n\nthen dividing the estimated object Oby Welement-by-element to obtain a normalized object estimate O:\n\n()=()\/()\u2003\u2003(23)\n\nThe normalization can also be expressed as multiplication by two normalization matrices Dand D:\n\n.\u2003\u2003(24)\n\nThis is because the all-white matrix W can be expressed as an outer product of two one-dimensional vectors of constant value, which in turn allows the normalization estimate to be decomposed into an outer product of two 1-dimensional matrices:\n\n()=()().\u2003\u2003(25)\n\nThe normalization matrices Dand Deach have identical columns, given by:\n",{"@attributes":{"id":"p-0088","num":"0087"},"maths":{"@attributes":{"id":"MATH-US-00010","num":"00010"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"mrow":[{"msub":{"mi":["D","A"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["i","j"],"mo":","}}},{"mrow":[{"mn":"1","mo":"\/","mrow":{"msub":{"mi":["W","A"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"i"}}},{"mn":"1","mo":"\/","mrow":{"mo":["{","}"],"mrow":{"munderover":{"mo":"\u2211","mrow":{"mi":"k","mo":"=","mn":"1"},"msub":{"mi":["R","O"]}},"mo":"\u2062","mrow":{"mrow":[{"mo":["[","]"],"mrow":{"msup":{"mrow":[{"mo":["[","]"],"mrow":{"mrow":[{"msubsup":{"mi":["M","A","T"]},"mo":"\u2062","msub":{"mi":["M","A"]}},{"msubsup":{"mi":["\u03b1","A"],"mn":"2"},"mo":"\u2062","msub":{"mn":"1","mrow":{"msub":[{"mi":["R","O"]},{"mi":["R","O"]}],"mo":"\u00d7"}}}],"mo":"+"}},{"mo":"-","mn":"1"}]},"mo":"\u2062","mrow":{"mo":["(",")"],"mrow":{"msubsup":{"mi":["M","A","T"]},"mo":"\u2062","msub":{"mi":["M","A"]}}}}},{"mo":["(",")"],"mrow":{"mi":["i","k"],"mo":","}}],"mo":"\u2062"}}}}],"mo":"="}],"mo":"="},{"mrow":[{"msub":{"mi":["D","B"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["i","j"],"mo":","}}},{"mrow":[{"mn":"1","mo":"\/","mrow":{"msub":{"mi":["W","B"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"i"}}},{"mn":"1","mo":"\/","mrow":{"mrow":{"mo":["{","}"],"mrow":{"munderover":{"mo":"\u2211","mrow":{"mi":"k","mo":"=","mn":"1"},"msub":{"mi":["C","O"]}},"mo":"\u2062","mrow":{"mrow":[{"mo":["[","]"],"mrow":{"msup":{"mrow":[{"mo":["[","]"],"mrow":{"mrow":[{"msubsup":{"mi":["M","B","T"]},"mo":"\u2062","msub":{"mi":["M","B"]}},{"msubsup":{"mi":["\u03b1","B"],"mn":"2"},"mo":"\u2062","msub":{"mn":"1","mrow":{"msub":[{"mi":["C","O"]},{"mi":["C","O"]}],"mo":"\u00d7"}}}],"mo":"+"}},{"mo":"-","mn":"1"}]},"mo":"\u2062","mrow":{"mo":["(",")"],"mrow":{"msubsup":{"mi":["M","B","T"]},"mo":"\u2062","msub":{"mi":["M","B"]}}}}},{"mo":["(",")"],"mrow":{"mi":["i","k"],"mo":","}}],"mo":"\u2062"}}},"mo":"."}}],"mo":"="}],"mo":"="}],"mo":["\u2062","\u2062"],"mstyle":{"mtext":{}}}},{"mrow":{"mo":["(",")"],"mn":"26"}}]}}}},"br":[{},{},{}],"in-line-formulae":[{},{}],"i":["O","D","M","M","IM","M"],"sub":["Norm","A","A","A","A","A","B","B","B","B","B"],"sup":["T","2","\u22121","T","T","2","T","\u22121D","T"]},"With continued reference to decoding logic , the results from normalizing logic  can be further improved with iteration logic  by iterating on the solutions derived from Equation (21) or (27). Re-writing Equation (21) in terms of deviations of the estimated object from the true object gives:\n\n1\u2212\u03b11\u2212\u03b1]}\u2003\u2003(28)\n\nWhere the noise-perturbed object estimate is:\n\n\u2212()(),\u2003\u2003(29)\n\nwhere;\n\n=(+\u03b1), and\n\n=(+\u03b1).\u2003\u2003(30)\n\nEquation (28) suggests pursuing a strategy of successively substituting estimates of O into the right-hand side, iterating:\n\n\u2212[\u2212\u03b1[1\u2212\u03b1]}, with\u2003\u2003(31)\n\n.\u2003\u2003(32)\n\nFor well-posed problems, this is essentially the strategy of iterative improvement to reduce numerical round-off errors in inversions. However, for ill-posed problems, Equation (31) will eventually diverge because (MM) and (MM) are not invertible. To see this consider the one-dimensional case: Y=MX and the iterative solution:\n\n\u2212[1\u2212\u03b1+\u03b1, with\u2003\u2003(33)\n\n=[1\u2212\u03b1\u2003\u2003(34)\n\nAfter N iterations, the solution is:\n",{"@attributes":{"id":"p-0090","num":"0089"},"maths":{"@attributes":{"id":"MATH-US-00011","num":"00011"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":{"msub":{"mi":["X","N"]},"mo":"=","mrow":{"mrow":[{"mrow":{"mo":["[","]"],"mrow":{"munderover":{"mo":"\u2211","mrow":[{"mi":"k","mo":"=","mn":"0"},{"mi":"N","mo":"-","mn":"1"}]},"mo":"\u2062","msup":{"mrow":{"mo":["(",")"],"mrow":{"msubsup":{"mi":["\u03b1","A"],"mn":"2"},"mo":"\u2062","msub":{"mi":["S","A"]}}},"mi":"k"}}},"mo":"\u2062","msubsup":{"mi":["X","Est","\u03b4"]}},{"msup":{"mrow":{"mo":["(",")"],"mrow":{"msubsup":{"mi":["\u03b1","A"],"mn":"2"},"mo":"\u2062","msub":{"mi":["S","A"]}}},"mi":"N"},"mo":"\u2062","msub":{"mi":"X","mn":"0"}}],"mo":"+"}},"mo":","}},{"mrow":{"mo":["(",")"],"mn":"35"}}]}}}},"br":{}},{"@attributes":{"id":"p-0091","num":"0090"},"maths":{"@attributes":{"id":"MATH-US-00012","num":"00012"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mtable":{"mtr":[{"mtd":{"mrow":{"msub":{"mi":["X","N"]},"mo":["\u2062","\u2062","\u2062"],"munder":{"mo":"=","mrow":{"mi":["N","\u221e"],"mo":"->"}},"mi":{},"mrow":{"mo":["{","}"],"mrow":{"mrow":[{"msup":{"mrow":[{"mo":["(",")"],"mrow":{"mn":"1","mo":"-","mrow":{"msubsup":{"mi":["\u03b1","A"],"mn":"2"},"mo":"\u2062","msub":{"mi":["S","A"]}}}},{"mo":"-","mn":"1"}]},"mo":"\u2062","msubsup":{"mi":["X","Est","\u03b4"]}},{"msup":{"mrow":[{"mo":["(",")"],"mrow":{"msubsup":{"mi":["\u03b1","A"],"mn":"2"},"mo":"\u2062","msub":{"mi":["S","A"]}}},{"mi":["N","\u221e"],"mo":"->"}]},"mo":"\u2062","msub":{"mi":"X","mn":"0"}}],"mo":"+"}}}}},{"mtd":{"mrow":{"mo":["=","\u2062"],"mi":{},"mrow":{"mo":["{","}"],"mrow":{"mrow":[{"mrow":{"mo":["[","]"],"mrow":{"mn":"1","mo":"+","msup":{"mrow":[{"msubsup":{"mi":["\u03b1","A"],"mn":"2"},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"msubsup":{"mi":["M","A","T"]},"mo":"\u2062","msub":{"mi":["M","A"]}}}},{"mo":"-","mn":"1"}]}}},"mo":"\u2062","msubsup":{"mi":["X","Est","\u03b4"]}},{"msup":{"mrow":[{"mo":["[","]"],"msup":{"mrow":[{"msubsup":{"mi":["\u03b1","A"],"mn":"2"},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mrow":{"msubsup":{"mi":["M","A","T"]},"mo":"\u2062","msub":{"mi":["M","A"]}},"mo":"+","msubsup":{"mi":["\u03b1","A"],"mn":"2"}}}},{"mo":"-","mn":"1"}]}},{"mi":["N","\u221e"],"mo":"->"}]},"mo":"\u2062","msub":{"mi":"X","mn":"0"}}],"mo":"+"}}}}}]}},{"mrow":{"mo":["(",")"],"mn":"36"}}]}}}}},"For ill-posed problems, the determinant of (MM)=0, so that Equation (36) diverges, even in the absence of noise. Thus, the iterations of Equation (31) must be stopped at some finite number via a stopping logic. As the iterations proceed, we can expect the results to initially improve, and then begin to degrade as noise increasingly contaminates the solution. Improving the likelihood of successful iteration depends on:\n\n","Note that convergence to a finite (though not necessarily correct) solution can be guaranteed if we use a convergence factor 0<\u03b3<1 and modify Equation (31) to read:",{"@attributes":{"id":"p-0094","num":"0096"},"maths":{"@attributes":{"id":"MATH-US-00013","num":"00013"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":[{"mtd":[{"mtable":{"mtr":[{"mtd":{"mrow":{"msub":{"mi":"O","mrow":{"mo":["(",")"],"mrow":{"mi":"n","mo":"+","mn":"1"}}},"mo":["=","\u2062"],"mi":{},"mrow":{"mrow":[{"msup":{"mi":"\u03b3","mn":"2"},"mo":"\u2062","msubsup":{"mi":["O","Est","\u03b4"]}},{"mo":["{","}"],"mrow":{"msub":{"mi":"O","mrow":{"mo":["(",")"],"mi":"n"}},"mo":"-","mrow":{"mrow":[{"msup":{"mi":"\u03b3","mn":"2"},"mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mn":"1","mo":"-","mrow":{"msubsup":{"mi":["\u03b1","A"],"mn":"2"},"mo":"\u2062","msub":{"mi":["S","A"]}}}}},{"msub":{"mi":"O","mrow":{"mo":["(",")"],"mi":"n"}},"mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mn":"1","mo":"-","mrow":{"msubsup":{"mi":["\u03b1","B"],"mn":"2"},"mo":"\u2062","msub":{"mi":["S","B"]}}}}}],"mo":"\u2062"}}}],"mo":"+"}}}},{"mtd":{"mrow":{"mo":["=","\u2062"],"mi":{},"mrow":{"mrow":[{"msup":[{"mi":"\u03b3","mn":"2"},{"mi":["I","\u03b4"]}],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062"],"msub":[{"mi":["S","A"]},{"mi":["M","B"]},{"mi":["S","B"]}],"msubsup":{"mi":["M","A","T"]}},{"mo":["{","}"],"mrow":{"msub":{"mi":"O","mrow":{"mo":["(",")"],"mi":"n"}},"mo":"-","mrow":{"mrow":[{"msup":{"mi":"\u03b3","mn":"2"},"mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mn":"1","mo":"-","mrow":{"msubsup":{"mi":["\u03b1","A"],"mn":"2"},"mo":"\u2062","msub":{"mi":["S","A"]}}}}},{"msub":{"mi":"O","mrow":{"mo":["(",")"],"mi":"n"}},"mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mn":"1","mo":"-","mrow":{"msubsup":{"mi":["\u03b1","B"],"mn":"2"},"mo":"\u2062","msub":{"mi":["S","B"]}}}}}],"mo":"\u2062"}}}],"mo":"+"}}}},{"mtd":{"mrow":{"mrow":{"mo":["=","\u2062"],"mi":{},"mrow":{"msub":{"mi":"O","mrow":{"mo":["(",")"],"mi":"n"}},"mo":"+","mrow":{"msup":{"mi":"\u03b3","mn":"2"},"mo":"\u2062","mrow":{"mo":["{","}"],"mrow":{"mrow":[{"msub":[{"mi":["S","A"]},{"mi":["M","B"]},{"mi":["S","B"]}],"mo":["\u2062","\u2062","\u2062","\u2062"],"msubsup":{"mi":["M","A","T"]},"msup":{"mi":["I","\u03b4"]}},{"mrow":[{"mo":["[","]"],"mrow":{"mn":"1","mo":"-","msubsup":{"mi":["\u03b1","A"],"mn":"2"}}},{"msub":{"mi":"O","mrow":{"mo":["(",")"],"mi":"n"}},"mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mn":"1","mo":"-","mrow":{"msubsup":{"mi":["\u03b1","B","S"]},"mo":"\u2062","msub":{"mi":["S","B"]}}}}}],"mo":"\u2062"}],"mo":"-"}}}}},"mo":","}}}]}},{"mrow":{"mo":["(",")"],"mn":"37"}}]},{"mtd":[{"mrow":{"mstyle":{"mspace":{"@attributes":{"width":"1.1em","height":"1.1ex"}}},"mo":"\u2062","mrow":{"mrow":[{"mi":"with","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"msub":{"mi":"O","mrow":{"mo":["(",")"],"mn":"0"}}},{"msub":{"mi":["O","Est"]},"mo":"."}],"mo":"="}}},{"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}]}]}}},"br":{}},{"@attributes":{"id":"p-0095","num":"0097"},"maths":{"@attributes":{"id":"MATH-US-00014","num":"00014"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":{"msub":{"mi":["X","N"]},"mo":["\u2062","\u2062"],"munder":{"mo":"=","mrow":{"mi":["N","\u221e"],"mo":"->"}},"mrow":{"mo":["{","}"],"mtable":{"mtr":[{"mtd":{"mrow":{"mrow":{"msup":{"mrow":[{"mrow":[{"mo":["(",")"],"mrow":{"mrow":{"msubsup":{"mi":["M","A","T"]},"mo":"\u2062","msub":{"mi":["M","A"]}},"mo":"+","msubsup":{"mi":["\u03b1","A"],"mn":"2"}}},{"mo":["[","]"],"mrow":{"mrow":[{"msubsup":{"mi":["M","A","T"]},"mo":"\u2062","msub":{"mi":["M","A"]}},{"mrow":{"mo":["(",")"],"mrow":{"mn":"1","mo":"-","mi":"\u03b3"}},"mo":"\u2062","msubsup":{"mi":["\u03b1","A"],"mn":"2"}}],"mo":"+"}}],"mo":"\u2061"},{"mo":"-","mn":"1"}]},"mo":"\u2062","msubsup":{"mi":["X","Est","\u03b4"]}},"mo":"+"}}},{"mtd":{"mrow":{"msup":{"mrow":[{"mo":["[","]"],"mrow":{"msup":{"mi":"\u03b3","mn":"2"},"mo":"\u2062","mrow":{"msubsup":{"mi":["\u03b1","A"],"mn":"2"},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mrow":{"msubsup":{"mi":["M","A","T"]},"mo":"\u2062","msub":{"mi":["M","A"]}},"mo":"+","msubsup":{"mi":["\u03b1","A"],"mn":"2"}}}}}},{"mi":["N","\u221e"],"mo":"->"}]},"mo":"\u2062","msub":{"mi":"X","mn":"0"}}}}]}}},"mo":","}},{"mrow":{"mo":["(",")"],"mn":"38"}}]}}}},"br":{}},"The regularization performed by regularization logic  is further facilitated by using the normalized object estimate as the starting point. Re-expressing Equation (27) as:\n\n,\u2003\u2003(39)\n\nThe iterative solution becomes:\n\n, with\u2003\u2003(40)\n\n, and with the convergence factor included, we have:\u2003\u2003(41)\n\n+\u03b3.\u2003\u2003(42)\n\nThe matrices Dand Denforce normalization as the iterations proceed.\n","Equation (42) closely resembles the method of Landweber iteration, which iterates via iteration logic  using regularization constants \u03b5and \u03b5, so that:\n\n(\u03b4)[](\u03b5),\u2003\u2003(43)\n","Where Pand Pare positive-definite symmetric matrices specified to control the convergence. (In classic Landweber iteration, P=P=1, the identity matrix.)","Comparison of Equation (42) to Equation (43) shows that they are equivalent if we make the identifications:\n\n\u03b5and \u03b5.\u2003\u2003(44)\n\nThus, Landweber iteration logic  with in-process mask normalization proceeds as follows:\n\n1) Set the starting estimate according to Equation (27)\n\nwith\u2003\u2003(45)\n\nand ,\u2003\u2003(46)\n\n2) Then iterate using:\n\n+\u03b5.\u2003\u2003(47)\n","Both Landweber iteration logic  and Tikhonov regularization logic  seek to solve the ill-posed inverse problem. If the Tikhonov-regularized inversion is performed first, Landweber iteration provides an independently-controlled method for removal of Tikhonov decoding artifacts. The price is that some noise may be re-introduced as the iterations attempt to minimize [I\u2212MOM], since 1 includes noise contributions that Were not encoded by the aperture mask.","Equation (47) will converge, as long as 0<\u03b4L<2. However, the convergent solution is not guaranteed to be correct\u2014the results may be noise-dominated unless we stop the iterations of iteration logic  at a suitable point via stopping logic. Two general kinds of stopping criteria are possible: a priori criteria, and a posteriori criteria.","A Priori Criteria","If the noise can be characterized separately from the image, then that information can be used to set a priori stopping criteria. Let the residuals after n iterations be donated by\n\n, with norm\u2003\u2003(48)\n",{"@attributes":{"id":"p-0103","num":"0105"},"maths":{"@attributes":{"id":"MATH-US-00015","num":"00015"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"msup":{"mrow":{"mo":["\uf605","\uf606"],"msub":{"mi":"r","mrow":{"mo":["(",")"],"mi":"n"}}},"mn":"2"},"mo":"=","mrow":{"munder":{"mo":"\u2211","mrow":{"mi":["i","j"],"mo":","}},"mo":"\u2062","mrow":{"msup":{"mrow":{"mo":["(",")"],"mrow":{"msub":{"mi":"R","mrow":{"mo":["(",")"],"mi":"n"}},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["i","j"],"mo":","}}}},"mn":"2"},"mo":"."}}}},{"mrow":{"mo":["(",")"],"mn":"49"}}]}}}},"br":{}},{"@attributes":{"id":"p-0104","num":"0106"},"maths":{"@attributes":{"id":"MATH-US-00016","num":"00016"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"msup":{"mi":"\u03b4","mn":"2"},"mo":"=","mrow":{"munder":{"mo":"\u2211","mrow":{"mi":["i","j"],"mo":","}},"mo":"\u2062","mrow":{"mrow":{"mo":["(",")"],"mrow":{"msup":{"mi":"\u03c3","mn":"2"},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["i","j"],"mo":","}}}},"mo":"."}}}},{"mrow":{"mo":["(",")"],"mn":"50"}}]}}}},"br":[{},{}],"in-line-formulae":[{},{}],"i":"r","sub":"(n)","sup":["2","2"]},"This priori stopping criterion is the discrepancy principle originally proposed by Morozov. To apply this criterion, we need an estimate of the random noise in the system. Since we can select coded-aperture masks  programmed with M such that the focal planes oversample the mask resolution, one possible choice is to perform local filtering (low-pass or median) on the collected image to obtain a noise-smoothed image I, then compute\n\n\u03c3()=[()](),\u2003\u2003(52)\n\nprojecting the image noise into the space of the object. This may be effective when the random noise is dominated by pixel-to-pixel variations in the imager electronics (read noise, dark noise, digitizer noise, etc.).\n\nA Posteriori Criteria\n","The discrepancy principle can be effective when the noise is known and well-characterized. However, there may be additional random noise sources that cannot be determined in advance by characterizing the image-plane array. To address cases in which the noise is not well-known in advance, a posteriori criteria can be implemented with only information from processing a given image. A basic a posteriori procedure is to examine the sequence of residuals from Equation (49), and stop the iterations when they begin to increase:\n\nif \u2225\u2225\u2225, accept .\u2003\u2003(53)\n\nWe also tested an alternate stopping criterion limiting the maximum value of the residuals:\n",{"@attributes":{"id":"p-0107","num":"0109"},"maths":{"@attributes":{"id":"MATH-US-00017","num":"00017"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"mrow":{"mi":"If","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"msup":{"mrow":{"munder":{"mi":"Max","mrow":{"mi":["i","j"],"mo":","}},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"msub":{"mi":"R","mrow":{"mo":["(",")"],"mrow":{"mi":"n","mo":"+","mn":"1"}}},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["i","j"],"mo":","}}}}},"mn":"2"}},"mo":">","msup":{"mrow":{"munder":{"mi":"Max","mrow":{"mi":["i","j"],"mo":","}},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"msub":{"mi":"R","mrow":{"mo":["(",")"],"mi":"n"}},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["i","j"],"mo":","}}}}},"mn":"2"}},{"mi":"accept","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mrow":{"msub":{"mi":"O","mrow":{"mo":["(",")"],"mi":"n"}},"mo":"."}}],"mo":","}},{"mrow":{"mo":["(",")"],"mn":"54"}}]}}}}},"In practice, there was little difference in the results between using Equation (53) and Equation (54), as such they both are in accordance with an aspect of the present invention.","Convergence can be sped up and made more robust by applying the modified Landweber formalism:\n\n+\u03b5+\u03b1(),\u2003\u2003(55)\n\nwith\n\n\u03b1=1\/(4+).\u2003\u2003(56).\n","The better the initial estimate O, the faster the convergence. In non-limiting model-based evaluations of the present invention, using Equation (55) with Equation (27) as the initial estimate finishes in 1\/10 of the iterations required when using Equation (47). All of the Landweber iteration results presented herein are based on Equation (55), with stopping criterion Equation (53).","To illustrate the various steps, a simulated photograph is depicted in panel (a) in . The results of decoding with Equation (21), together with the normalized version from Equation (39) and the final iterated improvement from Equation (55) with stopping criterion Equation (53) are shown in , panel (b) for an ideal noiseless case, with intermediate steps from raw imagery through Landweber iteration illustrated in .",{"@attributes":{"id":"p-0112","num":"0114"},"figref":["FIG. 5","FIG. 4","FIG. 5","FIG. 5","FIG. 5","FIG. 5","FIG. 5"],"b":["108","108"]},"One exemplary non-limiting, method comprises the steps of:\n\n","Stated more broadly, an exemplary method of the present invention comprises the steps of: encoding an image through an aperture mask programmed with a doubly-Toeplitz matrix coupled to a camera to create an encoded image; decoding the encoded image to recover a visual representation of an object scene; displaying the recovered object scene in a monitor, wherein the recovered object scene is larger than the encoded image.","The following sections detail work and discoveries leading up to applying these aforementioned method steps to real imagery.","Equation (15) can also be solved by singular value decomposition, which may be better behaved (with judicious choices of low-eigenvalue cut-offs) than solution via the normal equations. Most of the decodings so far have been performed via the normal equations, using the steps outlined in section 5.5. However, since the Singular Value Decomposition (SVD) method has potential to provide superior performance, it is outlined in this section, to show a roadmap for an alternate method of decoding, normalizing, and iterating to recover images.","SVD decomposes the matrices Mand Minto three matrices each such that:\n\n=(\u03a3), and =(\u03a3), so that:\u2003\u2003(57)\n\n=(\u03a3)(\u03a3).\u2003\u2003(58)\n","The matrices UA and UB are composed of orthonomial basis vectors spanning the image space, the vectors VA (also referred to as Vector A) and VB (also referred to as Vector B) are composed of orthonormal vectors spanning the object space, and the vectors A and B are diagonal matrices of eigenvalues. While Equation (58) appears invertible, it actually must also be regularized when the problem is ill-posed and noisy. In this case, Tikhonov regularization can be accomplished by computing diagonal matrices Zand Zsuch that:\n\n()=\u03b4\/(\u03c3()+\u03b1) and\u2003\u2003(59)\n\n()=\u03b4\/(\u03c3()+\u03b1),\u2003\u2003(60)\n\nwhere \u03c3and \u03c3are the diagonals of \u03a3and \u03a3. The estimated object is then given by:\n\n, and\u2003\u2003(61)\n\nthe normalized version of the SVD solution is:\n\n,\n\nwhere the elements of the normalization matrices corresponding to Equation (26) are:\n",{"@attributes":{"id":"p-0119","num":"0127"},"maths":{"@attributes":{"id":"MATH-US-00018","num":"00018"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"mrow":[{"msub":{"mi":["D","A"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["i","j"],"mo":","}}},{"mrow":[{"mn":"1","mo":"\/","mrow":{"msub":{"mi":["W","A"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"i"}}},{"mn":"1","mo":"\/","mrow":{"mo":["{","}"],"mrow":{"munderover":{"mo":"\u2211","mrow":{"mi":"k","mo":"=","mn":"1"},"msub":{"mi":["R","O"]}},"mo":"\u2062","mrow":{"mrow":[{"mo":["(",")"],"mrow":{"msub":[{"mi":["V","A"]},{"mi":["Z","A"]},{"mi":["\u03a3","A"]}],"mo":["\u2062","\u2062","\u2062"],"msubsup":{"mi":["V","A","T"]}}},{"mo":["(",")"],"mrow":{"mi":["i","k"],"mo":","}}],"mo":"\u2062"}}}}],"mo":"="}],"mo":"="},{"mi":"and","mo":["\u2062","\u2062"],"mstyle":{"mtext":{}},"mrow":{"mrow":[{"msub":{"mi":["D","B"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["i","j"],"mo":","}}},{"mrow":[{"mn":"1","mo":"\/","mrow":{"msub":{"mi":["W","B"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"i"}}},{"mn":"1","mo":"\/","mrow":{"mrow":{"mo":["{","}"],"mrow":{"munderover":{"mo":"\u2211","mrow":{"mi":"k","mo":"=","mn":"1"},"msub":{"mi":["C","O"]}},"mo":"\u2062","mrow":{"mrow":[{"mo":["(",")"],"mrow":{"msub":[{"mi":["V","B"]},{"mi":["Z","B"]},{"mi":["\u03a3","B"]}],"mo":["\u2062","\u2062","\u2062"],"msubsup":{"mi":["V","B","T"]}}},{"mo":["(",")"],"mrow":{"mi":["i","k"],"mo":","}}],"mo":"\u2062"}}},"mo":"."}}],"mo":"="}],"mo":"="}}],"mo":","}},{"mrow":{"mo":["(",")"],"mn":"62"}}]}}}},"br":[{},{},{}],"in-line-formulae":[{},{}],"i":["O","=O","D","V","Z","U","[I","\u2212M","O","M","]U","Z","V","D","O","\u2212O"],"sub":["(n+1)","(n)","L","A","A","A","A","A","(n)","B","B","B","B","B","n","(n)","(0)"],"sup":["2","T","\u03b4","T","T","T"]},"If an imager is moving with a velocity vector aligned with one of the imaging axes, the machinery of Toeplitz decoding can be applied directly, with little modification. In the more general case of an arbitrary direction of motion, the image will need to be rotated into a synthetic coordinate system aligned with the motion direction prior to decoding.","Having identified an approach to reduce the impact of partial-mask encodings, aspects of the present invention set out to refine simulation codes to better model the system performance, in order to: verify that the doubly-Toeplitz property was preserved in diffracted masks, verify the requirements for laboratory-collected masks to be valid, quickly evaluate candidate aperture masks, and provide a means of synthesizing decoding matrices when collected masks are not available.","To this end, aspects of the present invention added diffraction to the simulation code. This is particularly straightforward for a collection of identical rectangular apertures placed at points on a rectangular-grid SLM.","Let Iand Idenote intensity fields at the object and image planes, respectively, and let Edenote the complex optical field at the object plane. The diffracted intensity in a pixel at location (i,j) on the image plane is:",{"@attributes":{"id":"p-0124","num":"0132"},"maths":{"@attributes":{"id":"MATH-US-00019","num":"00019"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"msub":{"mi":["I","P"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["i","j"],"mo":","}}},{"mrow":[{"munder":{"mo":"\u2211","mrow":{"mi":["k","l"],"mo":","}},"mo":"\u2062","mrow":{"msup":[{"mrow":{"mo":["\uf603","\uf604"],"mrow":{"msub":{"mi":["Q","X"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["i","k"],"mo":"+"}}}},"mn":"2"},{"mrow":{"mo":["\uf603","\uf604"],"mrow":{"msub":{"mi":["Q","Y"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["l","j"],"mo":"+"}}}},"mn":"2"}],"mo":["\u2062","\u2062"],"mrow":{"msub":{"mi":"I","mn":"0"},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["k","l"],"mo":","}}}}},{"munder":{"mo":"\u2211","mrow":{"mi":["k","l"],"mo":","}},"mo":"\u2062","mrow":{"munder":{"mo":"\u2211","mrow":{"msup":{"mi":["l","\u2032"]},"mo":"\u2260","mi":"l"}},"mo":"\u2062","mrow":{"mrow":[{"msub":{"mi":["Q","X"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["i","k"],"mo":"+"}}},{"msubsup":{"mi":["Q","Y","T"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["l","j"],"mo":"+"}}},{"mo":["\u2329","\u232a"],"mrow":{"mrow":[{"msub":{"mi":"E","mn":"0"},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["k","l"],"mo":","}}},{"msubsup":{"mi":"E","mn":"0","mo":"*"},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":"k","mo":",","msup":{"mi":["l","\u2032"]}}}}],"mo":"\u2062"}},{"msubsup":{"mi":["Q","X"],"mo":"*"},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["i","k"],"mo":"+"}}},{"msubsup":{"mi":["Q","Y"],"mrow":{"mi":"T","mo":"*"}},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"msup":{"mi":["l","\u2032"]},"mo":"+","mi":"j"}}}],"mo":["\u2062","\u2062","\u2062","\u2062"]}}},{"munder":{"mo":"\u2211","mrow":{"mi":["k","l"],"mo":","}},"mo":"\u2062","mrow":{"munder":{"mo":"\u2211","mrow":{"msup":{"mi":["k","\u2032"]},"mo":"\u2260","mi":"k"}},"mo":"\u2062","mrow":{"mrow":[{"msub":{"mi":["Q","X"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["i","k"],"mo":"+"}}},{"msubsup":{"mi":["Q","Y","T"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["l","j"],"mo":"+"}}},{"mo":["\u2329","\u232a"],"mrow":{"mrow":[{"msub":{"mi":"E","mn":"0"},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["k","l"],"mo":","}}},{"msubsup":{"mi":"E","mn":"0","mo":"*"},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"msup":{"mi":["k","\u2032"]},"mo":",","mi":"l"}}}],"mo":"\u2062"}},{"msubsup":{"mi":["Q","X"],"mo":"*"},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":"i","mo":"+","msup":{"mi":["k","\u2032"]}}}},{"msubsup":{"mi":["Q","Y"],"mrow":{"mi":"T","mo":"*"}},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["l","j"],"mo":"+"}}}],"mo":["\u2062","\u2062","\u2062","\u2062"]}}},{"munder":{"mo":"\u2211","mrow":{"mi":["k","l"],"mo":","}},"mo":"\u2062","mrow":{"munder":{"mo":"\u2211","mrow":{"mrow":[{"msup":{"mi":["k","\u2032"]},"mo":"\u2260","mi":"k"},{"msup":{"mi":["l","\u2032"]},"mo":"\u2260","mi":"l"}],"mo":","}},"mo":"\u2062","mrow":{"mrow":[{"msub":{"mi":["Q","X"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["i","k"],"mo":"+"}}},{"msubsup":{"mi":["Q","Y","T"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["l","j"],"mo":"+"}}},{"mo":["\u2329","\u232a"],"mrow":{"mrow":[{"msub":{"mi":"E","mn":"0"},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["k","l"],"mo":","}}},{"msubsup":{"mi":"E","mn":"0","mo":"*"},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"msup":[{"mi":["k","\u2032"]},{"mi":["l","\u2032"]}],"mo":","}}}],"mo":"\u2062"}},{"msubsup":{"mi":["Q","X"],"mo":"*"},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":"i","mo":"+","msup":{"mi":["k","\u2032"]}}}},{"msubsup":{"mi":["Q","Y"],"mrow":{"mi":"T","mo":"*"}},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"msup":{"mi":["l","\u2032"]},"mo":"+","mi":"j"}}}],"mo":["\u2062","\u2062","\u2062","\u2062"]}}}],"mo":["+","+","+"]}],"mo":"\u2248"}},{"mrow":{"mo":["(",")"],"mn":"64"}}]}}}},"br":{},"sub":["0 ","0 "]},{"@attributes":{"id":"p-0125","num":"0133"},"maths":{"@attributes":{"id":"MATH-US-00020","num":"00020"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":[{"mtd":[{"mrow":{"mstyle":{"mspace":{"@attributes":{"width":"1.1em","height":"1.1ex"}}},"mo":"\u2062","mrow":{"mrow":{"mrow":[{"msub":{"mi":["I","P"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["i","j"],"mo":","}}},{"munder":{"mo":"\u2211","mrow":{"mi":["k","l"],"mo":","}},"mo":"\u2062","mrow":{"msup":[{"mrow":{"mo":["\uf603","\uf604"],"mrow":{"msub":{"mi":["Q","X"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["i","k"],"mo":"+"}}}},"mn":"2"},{"mrow":{"mo":["\uf603","\uf604"],"mrow":{"msubsup":{"mi":["Q","Y","T"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["l","j"],"mo":"+"}}}},"mn":"2"}],"mo":["\u2062","\u2062"],"mrow":{"msub":{"mi":["I","O"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["k","l"],"mo":","}}}}}],"mo":"\u2248"},"mo":",","mi":"where"}}},{"mrow":{"mo":["(",")"],"mn":"64"}}]},{"mtd":[{"mrow":{"mrow":{"mrow":[{"msub":{"mi":["Q","X"]},"mo":"\u2061","mrow":{"mo":["(",")"],"msub":{"mi":["k","x"]}}},{"munder":{"mo":"\u2211","msub":{"mi":["j","X"]}},"mo":"\u2062","mrow":{"mrow":[{"mi":"A","mo":"\u2061","mrow":{"mo":["(",")"],"msub":{"mi":["j","X"]}}},{"mo":["{","}"],"mrow":{"mi":"\u2148","mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mfrac":{"mrow":{"mn":"2","mo":"\u2062","mi":"\u03c0"},"mi":"\u03bb"},"msub":{"mi":["j","X"]},"mrow":{"msub":{"mi":["p","X"]},"mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mrow":[{"msub":{"mi":["k","x"]},"mo":"\u2062","mfrac":{"mrow":{"mi":"\u0394","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"msub":{"mi":["x","P"]}},"msub":{"mi":["f","P"]}}},{"mfrac":{"mrow":{"msub":[{"mi":["j","X"]},{"mi":["p","X"]}],"mo":"\u2062"},"mn":"2"},"mo":"\u2062","mrow":{"mo":["(",")"],"mrow":{"mfrac":[{"mn":"1","mi":"R"},{"mn":"1","msub":{"mi":["f","P"]}}],"mo":"+"}}}],"mo":"-"}}}}},{"mi":"c","mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mfrac":{"mi":["\u03c0","\u03bb"]},"mo":"\u2062","mrow":{"msub":{"mi":["a","X"]},"mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mrow":[{"msub":{"mi":["k","x"]},"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mfrac":{"mrow":{"mi":"\u0394","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"msub":{"mi":["x","P"]}},"msub":{"mi":["f","P"]}}},{"msub":{"mi":["j","X"]},"mo":"\u2062","mrow":{"msub":{"mi":["p","X"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mfrac":[{"mn":"1","mi":"R"},{"mn":"1","msub":{"mi":["f","P"]}}],"mo":"+"}}}}],"mo":"-"}}}}}}],"mo":["\u2062","\u2062","\u00d7","\u2062","\u2062"],"mi":["exp","sin"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}}],"mo":"="},"mo":",","mi":"and"}},{"mrow":{"mo":["(",")"],"mn":"65"}}]},{"mtd":[{"mrow":{"mrow":[{"msub":{"mi":["Q","Y"]},"mo":"\u2061","mrow":{"mo":["(",")"],"msub":{"mi":["k","y"]}}},{"munder":{"mo":"\u2211","msub":{"mi":["j","Y"]}},"mo":"\u2062","mrow":{"mrow":[{"mi":"B","mo":"\u2061","mrow":{"mo":["(",")"],"msub":{"mi":["j","Y"]}}},{"mo":["{","}"],"mrow":{"mi":"\u2148","mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mfrac":{"mrow":{"mn":"2","mo":"\u2062","mi":"\u03c0"},"mi":"\u03bb"},"msub":{"mi":["j","Y"]},"mrow":{"msub":{"mi":["p","Y"]},"mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mrow":[{"msub":{"mi":["k","y"]},"mo":"\u2062","mfrac":{"mrow":{"mi":"\u0394","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"msub":{"mi":["y","P"]}},"msub":{"mi":["f","P"]}}},{"mfrac":{"mrow":{"msub":[{"mi":["j","Y"]},{"mi":["p","Y"]}],"mo":"\u2062"},"mn":"2"},"mo":"\u2062","mrow":{"mo":["(",")"],"mrow":{"mfrac":[{"mn":"1","mi":"R"},{"mn":"1","msub":{"mi":["f","P"]}}],"mo":"+"}}}],"mo":"-"}}}}},{"mrow":{"mi":"c","mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mfrac":{"mi":["\u03c0","\u03bb"]},"mo":"\u2062","msub":{"mi":["a","Y"]}}}},"mo":"."}],"mo":["\u2062","\u2062","\u00d7","\u2062","\u2062"],"mi":["exp","sin"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}}],"mo":"="}},{"mrow":{"mo":["(",")"],"mn":"66"}}]}]}}},"br":[{},{},{},{},{},{},{}],"sub":["X","Y","X","Y","X","Y","P","P","P"],"b":"108"},"Those skilled in the art will see by inspecting Equation (65) that the image encoding described by Equation (65) is decomposable into A and B vectors which can be used to synthesize decoding masks. It will thus be appreciated that doubly-Toeplitz aperture masks remain doubly-Toeplitz when diffracted. Further, if the surface reflecting the light is microscopically rough, the illumination can be coherent or laser-like, and Equation (65) would still hold true.","To verify that aspects of the present invention are correctly simulating the diffraction, a series of experiments were conducted. The experiments included a collected image a synthetic image of a point source through a single large square aperture. The experiments also included a collected image and a synthetic image through a similarly-sized aperture created with SLM. Agreement between lab data and the diffraction model is high. Within the precision with which one can measure the experimental parameters, the agreement between model and data is excellent. Thus, aspects of the present invention include a simulation tool which one can use to evaluate candidate aperture masks in silico. The agreement between model and data also gives us confidence that we can use lab-collected masks as decoding filters.","Diffracted masks were also modeled, and compared to \u201ccollected masks\u201d\u2014images of a point-source viewed through the spatial-coding masks. It was verified that the collected masks decompose into outer products of diffracted 1-dimensional functions, in accord with Equation (64). A diffracted 1-dimensional mask is compared to the un-diffracted version in . This figure also illustrates a drawback to using MURA masks: diffraction alters the actual mask pattern and makes it non-binary, destroying the self-inversion in Equation (3).","In addition to diffraction, the simulation model includes random noise and non-diffraction blur, as well as light leakage through the \u201coff\u201d pixels of the SLM. This light leakage required the diffraction simulator, and has a significant impact on the image contrast, since even a small leakage of power implies a much larger optical-field leakage, since the power is proportional to the square of the field. For example, a 1% power leakage implies an optical field variation of 10%.","Random noise is generated primarily by photon-counting (shot noise), thermal dark noise, and pixel read\/reset noise. Aspects of the present invention are currently treating this as Gaussian-distributed with an empirically-determined standard deviation \u03c3. For the light levels at which our system is currently being tested, \u03c3is approximately 0.23% of the mean signal level.","Non-diffraction blur can arise from inhomogeneities in the liquid-crystal material of the SLM pixels, and from portions of the pixel circuitry which are not 100% opaque. We currently model these scattering sources with a Gaussian point-spread function with width \u03c3. In our present to date, the blur seems to subtend only a few focal-plane pixels.","Both \u03c3and \u03c3can be estimated by fitting the model to laboratory-collected data, and further refined (if needed) via parameter optimization algorithms.","In simulated imagery, doubly-Toeplitz mask selection is a key determinant of the quality of images recovered from coded-aperture cameras. In general, the larger the mask, the more degenerate the ill-posed inversion and the greater the decoding artifacts. On the other hand, the smaller the mask, the lower the light-gathering ability and the longer an exposure time is required. Thus, the masks chosen need to balance light gathering with decoding quality. Criteria we have considered include:","1) Making the open area as large as possible to gather light. For example, to achieve a 50% open area, each vector A and B need to have at least 70.7% throughput.","2) Minimizing the loss of information within the Nyquist frequency of the image plane array","3) Minimizing aliasing of spatial frequencies above the Nyquist frequency","4) Minimizing spatial-frequency-dependent phase shifts that can cause \u201cghost\u201d images in reconstruction.","5) Maximize effective dynamic range of reconstructed images","6) Robustness versus diffraction and scattering blur.","While the foregoing criteria are highly recommended, they do not appear to be sufficient to either uniquely specify aperture masks or insure high-quality decodings. Currently, mask selection involves searching through a list of random candidate masks, then applying thresholds on the Fourier transforms to select those which might have desirable image-formation properties, followed by testing with simulated encoding and decoding to quantify mask quality. The search space is enormous. For example, a 100-element mask vector has 2^100 possible binary combinations, the vast majority of which will not be useful.","There are additional strategies for optimizing masks. So far, some preferred non-limited exemplary masks identified are shown in . FIG. depicts a plurality of doubly-Toeplitz coded-aperture masks, and the dimensions are given in terms of SLM elements on a 36-micron pitch, such that, the \u201c01\u201d mask of panel (a) is an outer product of two identical 1-dimensional vectors, and the other masks are simply scaled up from the \u201c01\u201d mask, the \u201c02\u201d mask of panel (b) measures 62\u00d736 microns=2.2 mm on each side, the \u201c04\u201d mask of panel (c) measures 124\u00d736 microns=4.5 mm on each side, and the \u201c08\u201d masks of panel (d) measures 248\u00d736 microns=8.9 mm on each side. The 32-element 1-dimensional mask was adapted from the temporal processing results of Agrawal et al. A few other masks that meet the 70%\u2014throughput criterion are compared in terms of their fast Fourier transform algorithm (FFTs) and their encoding\/decoding performance in  and .",{"@attributes":{"id":"p-0136","num":"0144"},"figref":["FIG. 8A","FIG. 8B","FIG. 8A","FIG. 8B","FIG. 8A"]},"From these and other test cases there may be more optimization to be done in mask selection as only a tiny fraction of the possible masks have been investigated. There appears to be a tradeoff between noise mitigation and spatial frequency preservation having multiple small-scale features seems to add decoding ghosts. There also is a trade-off for large features\u2014the larger the largest mask feature, the more the effective dynamic range is compressed for low-spatial-frequency features. The masks may have to be optimized for the bit-depth of the image plane, and for the degree of dynamic range extension that can be derived by oversampling the encoded image.","To improve mask selection, aspects of the present invention have developed an automated image-quality scoring program which can be used with the coded-aperture simulator to quantify the performance of masks and algorithms. The next step is to develop a mask-candidate-selection algorithm that can efficiently narrow the search space of all possible masks, so that only the most likely candidates are fed into the automated assessment algorithm. The final assessments of masks will be done via imaging real scenes and using human-in-the loop scoring.","In the course of developing the diffraction model for coded-aperture imaging, there should be a better knowledge of and control over the spectral and angular dependencies of the SLM devices. In particular, Equation (65) requires knowledge of the spectral throughputs and responsivities.","As depicted in , a lab experiment was created to gain deeper understanding on how the SLM  polarizer responses were affecting imaging and decoding for lensless imager with mask  () from a halogen lamp  measured by spectrometer . The setup is shown , with results presented in  and .",{"@attributes":{"id":"p-0141","num":"0149"},"figref":["FIG. 10","FIG. 9"],"b":"140"},"Angular measurements  show that as angle moves away from normal, the light leakage through the black pixels increase, and the throughput of the white pixels decrease. The contrast ratio of black\/white throughputs is referred to as the contrast ratio and is plotted in . Contrast ratio is associated with angle measurement  of 0\u00b0. Contrast ratio is associated with angle measurement  of 10\u00b0. Contrast ratio is associated with angle measurement  of 20\u00b0. Contrast ratio is associated with angle measurement  of 30\u00b0. Contrast ration is associated with angle measurement  of 40\u00b0.","In , over the operating region, there are significant variations in the ratio of \u201coff\u201d to \u201con\u201d pixels. This means that the apparent mask contrast varies for directions away from normal incidence. This contributes to the light leakage which can reduce image contrast.","A negative impact on coded-aperture reconstruction quality accrued from defects on the image plane, including dead pixels and debris or schmutz covering pixels. Isolated single-point defects are straightforward to model, so we developed and tested image-healing algorithms that effectively countered them, as detailed below.","Even with defect-healing algorithms, aspects of the present invention note that the decoding performance real SLM data was not as good as the modeled performance, especially for larger masks. One aspect of the present invention eliminated focal plane noise, diffraction, and other effects via modeling and experiment. The major discrepancies were traced to un-modeled internal reflections inside the camera, probably due to reflections from the micro-lens array projected on the inside of the inner surface of the camera window.","An example of an image showing numerous reflections is shown in . Panel (a) in  depicts image flat acquired by looking into an integrating sphere through the SLM, with the \u201cAg08\u201d mask pattern commanded. This mask  subtends about 248 SLM elements, or about 1200 focal-plane pixels. Panel (b) the flat band-passed to remove the low-spatial-frequency components of the flat. Many small apparent defects in the flat are visible. The inset identified in panel (c) shows an expanded view of a portion of the band-passed flat, showing several images of the aperture (circled). These reflections appear at the same locations in both the flats acquired by looking into an integrating sphere and in the images of extended scenes, though with scene-dependent amplitudes, requiring additional image-processing steps.","Because the reflections were not encoded by the mask, they cannot be decoded, and attempting to decode them yields image artifacts which resemble those produced by defects on the image plane.","To deal with the reflections in the data collected, one aspect of the present invention has modified focal-plane-defect-healing algorithms to knock out the reflections. This requires acquiring camera \u201cflat\u2019 images with the spatial light modulator in place and commanded to provide an aperture of the dimensions of the mask to be used. Acquiring the flat in that manner allows the locations of the stray reflections to be mapped and stored for use in the defect-healing algorithms. Mitigating the stray-light artifacts in this way is a short-term fix, since it possesses the drawback of removing larger areas as the mask grows, which introduces a new set of errors and artifacts.","Stray-light artifacts also appear in the collected-mask images. These are images of a point source collected with the coded-aperture mask in place. Normally, the point-source images would provide decoding masks which automatically include scattering and diffraction. Unfortunately, the stray-light contaminated collected masks also required image healing, and provided inferior performance to modeled masks. Thus, we used simulations to create model masks in which we included diffraction, multiple-scattering blur and light leakage.","The modeled masks were used to decode all of the real imagery shown in this report. The permanent fix will be introducing camera hardware modifications to reduce or eliminate the stray-light reflections.","One issue faced when decoding real data is that of degraded data, such as produced by bad pixels, defects in the optics, etc. In a classical imaging system, these will manifest as dark or bright pixels, or small, sometimes blurry, dark spots in the focused imaged. In decoded images, the information content of a single bad pixel or a dark spot on the image will be redistributed through the decoded image, resulting in mask-shaped artifacts in the final image. In order to avoid these, we first conduct a \u201crepair\u201d of the collected raw image.","One aspect of the present invention implemented a two-step repair process. First, identify bad pixels as part of a radiometric calibration. Then, collect and average a series of 100 image frames using the same exposure times as for actual imaging, but with the aperture fully occluded, to collect a \u201cdark\u201d file that indicates dark current biases. This is followed by averaging 100 frames collected viewing into an integrating sphere to collect a \u201cflat\u201d file, which indicates non-uniformity of response across the focal plane. The choice of 100 frames for the statistical averaging is desired by not required. In general, longer series yield more-precise characterizations of defects, while shorter series minimize the effects of time-dependent drifts in response. An system designer skilled in the art would select the optimal number of frames for a particular application. These flat and the dark files are used to identify bad pixels\u2014those having responses significantly different from their neighbors at a given incident light level. These include \u201chot\u201d (abnormally bright), \u201csaturated\u201d (stuck at maximum digital count, even in the absence of incident light), \u201ccold\u201d (abnormally dark), or \u201cdead\u201d (not responding at all to incident light.) Hot and saturated pixels are identified from dark images\u2014images collected with the aperture occluded\u2014by identifying all pixels having a light-free output value greater than some threshold value. Here, use a threshold of twice the local neighbor median for that pixel, using a 5\u00d75 pixel neighborhood centered on each pixel. Cold and dead pixels, as well as potential additional hot pixels, are identified from \u201cflat\u201d imagery; any pixel for which the value is outside an acceptable range from the local neighborhood median value is flagged as bad. A map of bad pixels is generated to include all pixels flagged above.","The bad-pixel map is generated once from calibration data, then applied to each collected raw image to mitigate image defects. Most defects are single-pixel defects; values for these pixels are replaced with the mean values from the four adjacent neighbors. The size and shape of the neighborhood used for healing single-pixel defects is flexible. Four neighbors may be expanded to six, eight, ten or more. For any contiguous cluster of bad pixels, values are linearly interpolated across the bad pixel region using the nearest adjacent good pixel values for that image. Values are interpolated across the shorter dimension of the bad cluster first, this repeated as necessary until the defective cluster is filled in with interpolated replacement values. This simple approach relies on the assumption that the correct raw image (encoded) content is generally smoothly varying, and defects are typically singleton pixels. Yet still, other healing algorithms are entirely possible, the aforementioned algorithm is offered by way of example.","Another aspect of the present invention have found that, in addition to bad pixels on the imaging focal plane, other image defects (e.g. due to dirt or internal reflections cause similar decoding artifacts). These defects tend to involve small, contiguous clusters of pixels, but have lower contrast than bad pixel defects. These are mitigated by making a second \u201cbad pixel\u201d map after the initial repair, but using much lower tolerances for the deviation from local neighborhood medians values and a larger neighborhood. As before, the defects are mapped, and repaired using linear interpolation across the shortest dimension of the defect.","Because random pixel-to-pixel variations caused by dark noise, fixed-pattern noise, and bad pixels are not encoded by the mask, they must be removed via filtering logic  before decoding is performed. Median filtering the raw image, followed by bad-pixel removal, reduced the noise effects. However, the effectiveness of median filtering was limited by the stray light contamination. Until the stray-light problem is solved, the inventors accomplish further mitigation of random noise by averaging multiple frames of imagery.",{"@attributes":{"id":"p-0156","num":"0164"},"figref":["FIG. 13","FIG. 13"]},"Via modeling, simulation and experimentation, aspects of the present invention assessed the various sources of errors in coded-aperture imaging, as outlined in Table 2. The effect often cited (by other researchers) as an impediment\u2014diffraction\u2014proved to be a minor problem when doubly-Toeplitz masks are used for the coded apertures. The effects of diffraction are primarily to (a) increase the ill-posed degeneracy by requiring larger decoding matrices in Equation (27), and (b) complicate mask selection by invalidating the assumption that the masks are binary. The major effects turned out to be due to device characteristics: defects and non-uniformity of the image plane array, and light leakage through the \u201coff\u201d elements of the SLM, and the consequent reflections of that light inside the camera, especially from the micro-lenses covering each image-array pixel.",{"@attributes":{"id":"p-0158","num":"0166"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"287pt","align":"center"}},"thead":{"row":{"entry":"TABLE 2"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Summary of Effects of Modeled Error Sources"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"42pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"105pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Name","Impact","Manifestation","Mitigation"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}},{"entry":["Diffraction","Minor","Adds blur","Increase size of decoding mask"]},{"entry":[{},{},{},"to capture diffraction patterns"]},{"entry":["SLM-element","Minor","Adds blur","Add blur term to decoding mask"]},{"entry":["throughput &",{},{},{}]},{"entry":["scattering variations",{},{},{}]},{"entry":["Image-Plane","Moderate","Reduced contrast in","Median filter the raw image"]},{"entry":["Random Noise",{},"decoded images","before decoding"]},{"entry":["Spectral throughput","Moderate","Increased leakage","1. Add a band-pass filter to the"]},{"entry":["of SLM",{},"through \u201coff\u201d pixels","optics"]},{"entry":[{},{},"outside nominal band","2. Compute diffracted mask over"]},{"entry":[{},{},{},"multiple wavelengths in band"]},{"entry":["Angular","Moderate","Decoded scenes","Post-decoding image flattening."]},{"entry":["Dependence",{},"how an intensity roll-","This is"]},{"entry":["of SLM Throughput",{},"off with angle","impeded by the presence of stray"]},{"entry":[{},{},{},"light inside the camera."]},{"entry":["Toeplitz Mask","Moderate","Adds image \u201cghosts\u201d","1. Use the smallest mask"]},{"entry":["Selection",{},"and artifacts at edges","consistent with the lighting"]},{"entry":[{},{},"of decoded images.","conditions."]},{"entry":[{},{},{},"2. Average multiple images with"]},{"entry":[{},{},{},"different mask orientations"]},{"entry":[{},{},{},"3. Develop improved mask-"]},{"entry":[{},{},{},"search methods to identify"]},{"entry":[{},{},{},"optimal masks."]},{"entry":["Image-Plane","Major","\u201ccheckerboard\u201d","1. Flatten the image to reduce"]},{"entry":["Defects",{},"artifacts in decoded","pixel-to-pixel response variations."]},{"entry":["(bad pixels, hot",{},"image","2. Filter out & \u201cheal\u201d bad pixels in"]},{"entry":["pixels, cold pixels)",{},{},"raw image before decoding"]},{"entry":["In-band Light","Major","Low contrast","1. Short-term: Normalize with"]},{"entry":["Leakage Stray Light",{},"decodings with mask-","\u201cSLM flats\u201d and apply aggressive"]},{"entry":["and Reflections",{},"imprint artifacts","defect-healing algorithms."]},{"entry":["Inside Camera",{},{},"2. Long-term: implement"]},{"entry":[{},{},{},"hardware mods to reduce stray"]},{"entry":[{},{},{},"light and reduce residual"]},{"entry":[{},{},{},"throughput of \u201coff\u201d SLM elements."]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]}}]}}},"In the regularized doubly-Toeplitz inversions described above, certain parameters must be estimated properly to obtain the highest-quality scene reconstruction via optimization logic which may be a part of the reconstruction logic . For example, the Tikhonov regularization constant \u03b1 helps reduce noise in the reconstruction, but setting this value too high causes undue blurring of the reconstructed scene. While a value for a can be chosen using visual assessment of decoded image quality, the selection process can be automated using a numerical minimization routine.","To find the optimum \u03b1, first select a starting value \u03b1, and provide this to the minimization routine along with the decoding function, the original scene (which serves as the \u201cideal\u201d reconstruction) and the synthetically-encoded image. The routine decodes the scene using the initial regularization value \u03b1, and then finds the pixel-wise correlation coefficient r between the recovered scene intensities and the ideal scene intensities. Using correlation (as opposed to a simple sum of squares) makes this invariant to any intensity scale or offset differences that might be introduced by the particular decoding process. This general methodology can also be applied to refine other parameters, such as blur due to scattering.","This parameter optimization is also generalizable to the temporal and fused 2D spatial-temporal coded aperture imaging. Temporal coded-aperture imaging is also an ill-posed problem amenable via Tikhonov-regularized inversion of a spatial transform of the temporal transfer function. The temporal regularization constant \u03b1for this inversion will be distinct from the spatial values, and can be separately optimized to optimize decodings. As with the spatial decodings, the optimal value of \u03b1will depend on the noise and on the temporal code. Unlike the spatial problem, it will also depend on the speed acceleration of the imager, making an automated approach for parameter optimization even more valuable.","Finally, it is likely that an optimal solution of the full problem will require and additional step to refine the Tikhonov parameters. For example, it is conceivable that the spatial regularization which works best for static cases may not be the same as the spatial regularization for the joint spatial-temporal decoding.","These real data images were simulated with the large \u201c08\u201d mask identified in panel (d) of .","The development, simulation, and in-laboratory testing refined the methods of coding and decoding improved the camera performance and made it possible to image extended outdoor scenes in natural light. These images were used to further refine and de-bug the processing.","In accordance with one aspect of the present invention , one exemplary experimental setup is shown in . The camera  was on the 12th floor of the First Hawaiian building in Honolulu, Hi., approximately 45 meters above the ground, and looking west towards the city skyline. The camera  includes programmable SLM aperture mask  operatively coupled thereto including a doubly-Toeplitz matrix programmed thereon. The SLM aperture mask  programmed with the doubly-Toeplitz matrix is controlled by a SLM pattern command computer . In addition to the programmable SLM mask , the camera  had a green-bandpass filter to reject wavelengths that are not adequately blocked by the \u201coff\u201d pixels of the SLM, as illustrated in . Wherein, for normal incidence, black pixels \u201cleak\u201d light at about 1.4% of white pixels over the range 500 nm-650 nm. In the deep blue (<475 nm) or deep red (>750 nm) ranges, the on\/off contrast is lower. It is recommended that a filter is used that limits the incoming light to 450 nm<\u03bb<650 nm. The decoding logic  is shown self-contained within a computer in accordance with the definition of \u201clogic\u201d as defined above.","The mathematical methods outlined in previous sections were realized in computer code (i.e. decoding logic ), with the non-limiting steps outlined in . For example a method  may include the step of encoding an image through an aperture mask programmed with a doubly-Toeplitz matrix, shown at . Then, there is correcting the encoded image through flattening and darkness reduction, shown at . Then there is, removing bad pixels, shown at . Next there is, filtering the encoded image to denoise the encoded image, shown at . Then there is, decoding the encoded image, shown at . And then, normalizing the decoded image, shown at . The de-noising step can be either single-frame de-noising, or de-noising by adding multiple raw images before decoding. Since the stray-light interference limits currently limits the effectiveness of single-frame de-noising,  used a 20-frame average, with the raw images averaged together before application of flat, dark, and defect corrections.","With primary reference to , inasmuch as coded-aperture imaging is based on the principle of collecting overlapping images from many pinholes, it is fair to ask how coded-aperture images compare to pinhole-camera images. To insure that the apertures had the same light-gathering capability, aspects of the present invention used pinholes with the same un-obstructed area as the coded-aperture mask. For example, the small \u201c02\u201d coded-aperture masks spanned 62 SLM elements in each direction, with 43 \u201con\u201d elements. Thus, the inventors compared a 43\u00d743 pinhole camera (a square mask with all elements turned on in a 43\u00d743 area) to the 02 coded aperture. The raw unprocessed images for each are of similar (blurry and unrecognizable) quality, as shown in . In , both images in panel (a) and panel (b), doubly-Toeplitz processing was applied using synthetic masks which included diffraction and light leakage. The images were also normalized, then Landweber-iterated until convergence. Compared to the pinhole-camera image (panel (a) in ), the coded aperture image provides superior resolution (panel (b) in ).","The same image processing was applied to both images, using model-generated diffracted masks and following the method steps shown in . The results of the processing () show recovery of recognizable imagery, with the coded-aperture showing superior detail and quality.","To test the dependence on aperture size, aspects of the present invention also collected data using a large coded-aperture, the \u201c08\u201d version, spanning 248\u00d7248 SLM elements. In this case, the pinhole with equal collecting area spanned 172\u00d7172 elements. The raw data are shown in , and the decoded images are shown in . The difference in recovered image quality between pinhole images (panel (a) in ) and coded apertures (panel (b) in ) is greater at the larger aperture sizes.","The coded-aperture processing developed of the present invention can be leveraged to greatly improve the images output from pinhole cameras. In particular, it is possible to mitigate diffraction and geometric blur to recover images from raw data that would be otherwise unrecognizable.","Even with advanced processing applied to pinhole images, coded-apertures still provide superior image quality. The performance difference between pinhole cameras and coded-aperture imagers can be traced to two primary causes:","(1) The spatial-frequency content of the image is less compromised by a coded-aperture containing elements of several sizes than by a single large uniform aperture. The coded aperture better preserves high spatial frequencies.","(2) At low spatial frequencies, the dynamic range of the recovered images falls as the size of the largest contiguous area in the aperture grows. For example, the small mask spanning 62 SLM elements has a largest opening of 26 elements, while the equivalent-area rectangular mask has a single opening of 43 elements. This leads to a factor of 43\/26=1.65\u00d7advantage in dynamic range for the coded aperture.","Thus, for a given light-gathering area, a coded aperture mask provides better image resolution than a rectangular \u201cpinhole\u201d aperture. Also, as the overall aperture size increases, coded-aperture imagers maintain resolution and image quality better than do pinhole cameras.","Theoretical investigations showed that the regularization artifacts noted in  differ from mask to mask, while the real objects in the scene are coherent. Thus, improved reconstruction could use multiple images collected with rotated versions of the encoding mask. The idea is that artifacts that have a directional dependency (related to the orientation of the mask), or that are specific to a particular mask, could be reduced by using multiple mask orientations or multiple masks. If the masks remain centered at the same pixel, and the camera is stationary, then the resulting decoded images will align to sub-pixel accuracy.","Aspects of the present invention have conducted an initial test of this approach using four, ninety-degree rotations of the same basic mask. The four images were decoded separately, and stacked to provide an improved image result. (Alternatively, a completely different doubly-Toeplitz mask could be applied to each image.) Future image-combining algorithms could use a slightly more sophisticated, approach, discarding outlier values. When the camera or mask moves between subsequent frames, a simple similarity transform (translation plus rotation) would be capable of achieving the necessary sub-pixel registration accuracy needed for stacking, given that the time between frames is small enough to prevent major perspective changes.","Results from simply averaging the four resulting decoded images are compared with single-mask imagery in , and compared to the \u201ctruth\u201d image in .  shows final results of processing real imagery with multi-mask (four 90-degree rotations of the \u201c02\u201d mask) in panel (a) versus using a single mask in panel (b), showing reduction of magnitude of some decoding \u201cghost\u201d artifacts.",{"@attributes":{"id":"p-0178","num":"0186"},"figref":["FIG. 22","FIG. 21"]},"In accordance with one exemplary aspect of the present invention, coded image system  may permit computed imaging to be completely done without the need for a traditional camera lenses.","In a non-limiting conclusion, and briefly by the way of non-limiting example, those skilled in the art will appreciate that aspects of the present invention, amongst other things, have:\n\n","For example, doubly-Toeplitz coded apertures may be realized, with programmable or fixed non-programmable masks fabricated from a variety of materials, and applied for radiation of any wavelength, from gamma rays to radio waves. Therefore, the present invention should not be limited to any single embodiment, but rather construed in breadth and scope in accordance with the recitation of the appended claims. Additionally, the term \u201cprogrammable\u201d also includes a sequence of selectable fixed-pattern apertures, each of the doubly-Toeplitz type.","Additionally, in accordance with another aspect of an embodiment of the present invention a doubly-Toeplitz mask  is an example of an optical system in which the operation of the optics create an image that can be modeled separately in the two axes of an imager, so that the two-dimensional OTF (optical transfer function) can be treated as a sequential (x-axis then y-axis, or y-axis then x-axis) application of two one-dimensional OTFs. Separable optics have the advantage of having blur functions that can be processed very quickly to improve the quality of the images. The mathematical methods outlined herein are applicable to any system having separable OTFs, and would improve the quality of images recovered from such systems.","In the foregoing description, certain terms have been used for brevity, clearness, and understanding. No unnecessary limitations are to be implied therefrom beyond the requirement of the prior art because such terms are used for descriptive purposes and are intended to be broadly construed.","Moreover, the description and illustration of the preferred embodiment of the invention are an example and the invention is not limited to the exact details shown or described."],"GOVINT":[{},{}],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["A sample embodiment of the invention is set forth in the following description, is shown in the drawings and is particularly and distinctly pointed out and set forth in the appended claims. The accompanying drawings, which are fully incorporated herein and constitute a part of the specification, illustrate various examples, methods, and other example embodiments of various aspects of the invention. It will be appreciated that the illustrated element boundaries (e.g., boxes, groups of boxes, or other shapes) in the figures represent one example of the boundaries. One of ordinary skill in the art will appreciate that in some examples one element may be designed as multiple elements or that multiple elements may be designed as one element. In some examples, an element shown as an internal component of another element may be implemented as an external component and vice versa. Furthermore, elements may not be drawn to scale. The present invention is further described with reference to the accompanying drawings wherein:",{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 3A"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":["FIG. 3B","FIG. 3A"]},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":["FIG. 5","FIG. 4"]},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 8A"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":["FIG. 8B","FIG. 8A"]},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":["FIG. 14","FIG. 15"]},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 16"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 17"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":["FIG. 18","FIG. 17","FIG. 17","FIG. 17"]},{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 19"},{"@attributes":{"id":"p-0034","num":"0033"},"figref":["FIG. 20","FIG. 19","FIG. 19","FIG. 19"]},{"@attributes":{"id":"p-0035","num":"0034"},"figref":"FIG. 21"},{"@attributes":{"id":"p-0036","num":"0035"},"figref":["FIG. 22","FIG. 21"]}]},"DETDESC":[{},{}]}
