---
title: RF detector with crest factor measurement
abstract: An RF detector configured to provide two outputs, one being a function of the true RMS power level of an RF input signal, and the other being a function of the instantaneous/peak power of the RF input signal, normalized to the average power level. The RF detector includes a variable gain detection subsystem including a single detector or detector array that provides a representation of the power level of the RF input signal. The detector or detector array is common to both the RMS power detection channel and the instantaneous/peak power detection channel of the RF detector. A method of RF detection includes providing representations of the RF input signal at different gain levels, selecting one or more of the representations, and averaging the selected signals. The gain levels of the selected representations is adjusted to provide information about the average power level of the RF input signal.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07944196&OS=07944196&RS=07944196
owner: Hittite Microwave Corporation
number: 07944196
owner_city: Chelmsford
owner_country: US
publication_date: 20091222
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS REFERENCE TO RELATED APPLICATIONS","BACKGROUND","SUMMARY OF INVENTION","DETAILED DESCRIPTION"],"p":["This application is a continuation of, and claims priority under 35 U.S.C. \u00a7120 to, U.S. application Ser. No. 12\/152,634, now U.S. Pat No. 7,659,707, entitled \u201cRF DETECTOR WITH CREST FACTOR MEASUREMENT,\u201d filed May 14, 2008, which claims priority under 35 U.S.C. \u00a7119(e) to U.S. Provisional application No. 60\/930,120 filed May 14, 2007 and entitled \u201cRF DETECTOR,\u201d each of which is herein incorporated by reference in its entirety.","1. Field of Invention","The present invention relates generally to RF detectors and, more particularly, to RF detectors capable of providing an indication of both the average power and the instantaneous or peak power levels of an RF signal.","2. Discussion of Related Art","There are many applications in which it is desirable to measure the peak and\/or average power level of a radio frequency (RF) signal. For example, power measurement and control of the RF signals in both the transmitting and receiving chains of modern wireless communications systems, such as cellular telephone networks, may be essential. To efficiently use the available bandwidth, the transmitted signals in these systems may be modulated using complex modulation standards such as CDMA, WCDMA or WiMax. These complex modulated signals have a time varying crest factor, which is defined as the peak to average power ratio of the signal, resulting in intolerable errors if conventional power detectors using diode detection or successive amplification are used to measure signal power.","Conventional techniques to characterize modulated signals depend on the parallel processing of the input signal to compute the average power and the instantaneous or peak power. For example, referring to , a single RF input signal at terminal  is processed by an envelope detector or peak detector  to generate the instantaneous power\/peak power output, a, and is also processed by an average power detector  to generate the average power output, b.  illustrates a variation of this method in which the RF input signal is initially processed using a power envelope detector  and is then processed using an averaging circuit  to generate the average power output, b, and using the buffer\/peak detector  to generate the instantaneous\/peak power output, a.","In some cases, it is desirable to measure the crest factor of the RF signal and\/or to obtain information about the signal wave shape. Calculation of the crest factor requires both average power information and peak power information. Referring again to , a conventional technique uses a divider  to calculate the crest factor after parallel processing of the RF input signal to determine the peak power, a, and the average power, b, as discussed, for example, in U.S. Pat. No. 5,220,276. The divider  calculates the ratio of the peak detector  output (a) to the average power output, b, resulting in an output signal (b\/a) on terminal  that is a representation of the input signal crest factor. When an envelope detector is used instead of a peak detector, the divider provides an instantaneous power output signal that is normalized to average power; i.e., the ratio of instantaneous power to average power.","A disadvantage of RF detectors using the parallel processing technique is that an RF coupler (not shown) is required at the input  to drive both the average power detection channel and the envelope power or peak power detection channel. In addition, because different detectors ( and ) are used in the two different detection channels, there may exist part-to-part, process, and temperature variations between the two channels, which can degrade the accuracy of the measurements, particularly of the crest factor measurement. Matching circuitry may be required to compensate for such differences between the two channels, adding complexity and cost to the system. Another disadvantage is that the divider  may be required to handle nonlinear calculations depending on the output characteristics of the average power detection channel and the envelope power or peak power detection channel. In addition, because any inaccuracy in the divider would compromise the crest factor measurement, an accurate, possibly complex and expensive, divider may be required.","There are a variety of commercially available average power detectors that may be used in the systems illustrated in . One example of an average power detector is an RMS-DC converter. RMS-DC converters are used to convert the RMS (square-root of the mean (average) of the square) value of an input AC (time-varying) signal into a DC (or quasi-DC) current or voltage. RMS-DC converters are capable of measuring the RMS power of an RF signal independent of the signal wave shape or crest factor. Wide-dynamic range average power detectors using feedback control loop techniques are commercially available.","For example, referring to , there is illustrated a block diagram of an RMS-DC converter  that incorporates a squaring RF detector  with a variable scale factor and a feedback control loop. The RMS-DC converter receives an RF input, Vin, at terminal  and provides a signal at terminal  which is representative of the average power of the input signal. The squaring RF detector  is responsive to a scaling factor control signal, Vscale, received at a control port  and provides an output voltage, Vout, at an output port , the output voltage being a representation of the square of the RF input signal scaled by a monotonic function of the control signal. Thus, the output of the squaring RF detector  is given by:\n\n|\u00d7\u0192()\u2003\u2003(1)\n","The second element of the average power detection feedback loop is an integrator  having an input port  coupled to the output port  of the squaring RF detector , a reference port  that receives a reference signal , and an output port  coupled to the control port  of the squaring RF detector . The output port  of the integrator  is also coupled to the terminal  of the RMS-DC converter . The integrator  is configured to integrate the difference between the output, Vout, of the squaring RF detector  and the reference signal  to adjust the scaling factor of the squaring RF detector until the average output signal of the squaring RF detector is equal to the reference signal, thus resulting in a feedback control loop. This feedback loop forces the squaring RF detector  to operate at a controlled output operating point. For example, a drop in the RF input signal power received at terminal  results in negative integration in the integrator , forcing the squaring RF detector  to provide amplification to the input signal to keep the average squaring RF detector output, Vout, at a constant point. Because of this interaction in the feedback control loop, the scaling factor control signal, Vscale, of the squaring RF detector  will vary as a function of the average of the RF input signal, Vin, providing a representation of this RF input signal average power. Some examples of such, or similar, RMS-DC converters are disclosed in U.S. Pat. Nos. 6,348,829, 6,429,720 and 6,437,630.","Single-detector average power or peak power detecting schemes, such as those illustrated in , suffer from a reduced dynamic range, for example, on the order of about 35 dB in high-frequency integrated circuit detector designs. Average power detector using a feedback control loop technique, such as that illustrated in  and discussed above can achieve much larger dynamic range depending on the scaling function implementation in the feedback control loop. For example, average power detectors with more than 75 dB dynamic range are commercially available. However, in a system such as that illustrated in , where both peak\/envelope and average power are measured, the normalized instantaneous power output or peak power output would be limited by the lesser performance (dynamic range) of the envelope power or peak power detecting scheme. In addition, single-detector envelope power or peak power detecting scheme are generally also highly dependent on the input RF frequency, which may not be desirable in many applications.","Aspects and embodiments of the present invention are directed to a wide-dynamic range RF detector that accepts a modulated or unmodulated RF input signal and provides an output which varies as a quasi-linear function of the logarithm of the RMS value of the RF input signal voltage. That is, the RF detector provides an output that varies linearly (or nearly so) with the RMS voltage measured in dB of the RF input signal. The RF detector is also capable of providing a second output representative of the instantaneous or peak power level, of the RF input signal, normalized to the average power of the signal. Embodiments of the RF detector use a single detector array for both average (e.g., RMS) power detection and instantaneous\/peak power detection, thereby eliminating some of the part-to-part, process and\/or temperature variability issues which may exist with conventional systems, as discussed above. In addition, embodiments of the RF detector implement a feedback control loop to increase the input dynamic range and normalize the measured instantaneous\/peak power to the average power, thereby removing the need for an accurate divider. Thus, as discussed further below, the RF detector circuit according to aspects and embodiments of the invention may be used to provide accurate indications of the average power level, normalized instantaneous power level, and peak-to-average power ratio (crest factor) of an RF signal over a wide range of input power levels and modulation complexity.","According to one embodiment, a power detector comprises an input configured to receive an input signal, a variable gain detection subsystem coupled to the input and that detects the input signal and provides a detector output signal, an integrator coupled to the variable gain detection subsystem and configured to receive the detector output signal and a reference signal and to provide an integrator output signal which is representative of an average power level of the input signal, and an instantaneous power processing device coupled to the detector subsystem and configured to receive the detector output signal and to provide at an output of the power detector an instantaneous power output signal which is representative of the instantaneous power level of the input signal normalized to the average power level of the input signal, wherein the variable gain detection subsystem is configured to receive the integrator output signal and to adjust the detector output signal to a level approximately that of the reference signal.","In one example of the power detector, the variable gain detection subsystem comprises at least one squaring detector. The variable gain detection subsystem may further include a variable gain amplifier coupled between the input and the at least one squaring detector, wherein the variable gain amplifier is configured to receive the integrator output signal and to provide an amplified output signal, wherein the variable gain amplifier is configured so that the gain of the variable gain amplifier is controlled by the integrator output signal, and wherein the squaring detector is configured to receive the amplified output signal. In another example, the variable gain detection subsystem includes a gain stage configured to provide a plurality of gain tap signals from the input signal, a plurality of detectors configured to receive the plurality of gain tap signals and to provide a corresponding plurality of detector tap signals, and means for selecting at least one of the plurality of detector tap signals responsive to a control signal and providing the at least one selected detector tap signal as the detector output signal, wherein the control signal is a function of the integrator output signal.","In another example, the variable gain detection subsystem comprises a first series of gain stages coupled in series and configured to provide a first plurality of gain tap signals, a second series of gain stages coupled in series and configured to provide a second plurality of gain tap signals, and a plurality of multipliers coupled to the first and second series of gain stages, wherein each multiplier is configured to multiply a respective one of the first plurality of gain tap signals with a respective one of the second plurality of gain tap signals to provide a plurality of squared signals. In another example, the variable gain detection subsystem includes a gain stage configured to provide a plurality of gain tap signals from the input signal, a plurality of detectors configured to receive a the plurality of gain tap signals and to provide a corresponding plurality of detector tap signals, and an interpolator coupled between the plurality of detectors and the integrator and between plurality of detectors and the instantaneous power processing device, wherein the interpolator is configured to receive the plurality of detector tap signals, to select at least one detector tap signal, and to provide an interpolator output signal that is a function of the at least one selected detector tap signal, and wherein the detector output signal received by the integrator and the instantaneous power processing device comprises the interpolator output signal. The interpolator may be configured to select the detector tap signals from at least those detectors operating in their square-law region. The interpolator output signal may be a function of a weighted sum of the selected detector tap signals. In another example, the gain stage comprises a plurality of amplifiers coupled in series and configured to amplify the input signal to provide a plurality of amplified signals; and wherein the plurality of gain tap signals comprises the plurality of amplified signals. The gain stage may also include a plurality of attenuators configured to attenuate the input signal to provide a plurality of attenuated signals, and the plurality of gain tap signals may comprise the plurality of amplified signals and the plurality of attenuated signals. The interpolator may comprise a plurality of interpolator stages, each interpolator stage configured to receive a respective one of the plurality of detector tap signals, an individual fixed bias reference signal and a common control signal, wherein the common control signal is derived from the integrator output signal. In one example, each interpolator stage comprises a controllable current amplifier, and wherein a gain of the controllable current amplifier is a function of the individual fixed bias reference signal and the common control signal.","In one example of the power detector, the instantaneous power processing device includes a low-pass filter that filters the detector output signal. The low pass filter may have a time constant which is smaller than an output time constant of the integrator. In another example, the instantaneous power processing device includes an amplifier to amplify the detector output signal. In a further example, the instantaneous power processing device comprises a peak detector, and the peak detector output signal is representative of the peak power level of the input signal normalized to the average power level of the input signal. The instantaneous power processing device may also comprise a comparator configured to receive the detector output signal and the reference signal and to generate an error signal based on a subtraction between the detector output signal and the reference signal, and an output block configured to receive the error signal and to provide the instantaneous power output signal. In one example, the output block comprises an output buffer, which may be implemented a transistor follower. In another example, the output block comprises a peak detector that provides a peak detector output signal, wherein the peak detector output signal is representative of the peak power level of the input signal normalized to the average power level of the input signal. The peak detector may be implemented using a transistor follower coupled to a capacitor, wherein the capacitor stores a voltage representative of a peak signal level at an output of the peak detector.","Another example of the power detector comprises an at least partial replica instantaneous power processing device configured to provide a DC reference bias output signal, and a summer configured to receive the DC reference bias signal and the instantaneous power output signal and to subtract the DC reference bias signal from the instantaneous power output signal to generate a DC offset-adjusted instantaneous power output signal, wherein a signal provided at the output of the power detector comprises the adjusted instantaneous power output signal which is representative of the instantaneous power level of the input signal normalized to the average power level of the input signal. In another example, the instantaneous power processing device comprises a peak detector, and the signal provided at the output of the power detector comprises an adjusted peak detector output signal which is representative of the peak power level of the input signal normalized to the average power level of the input signal.","Another aspect is directed to a method of power detection comprising receiving an input signal, detecting a power level of the input signal to provide a detected signal, comparing the detected signal with a reference signal to provide an error signal, integrating the error signal to provide an integrator output signal which is representative of an average power level of the input signal, providing an instantaneous power output signal responsive to the detected signal, the instantaneous power output signal being representative of the instantaneous power level of the input signal normalized to the average power level of the input signal, and adjusting the detected signal to a level approximately that of the reference signal. In one example, detecting the level of the input signal comprises squaring the input signal. The method may further comprise amplifying the input signal with a variable gain amplifier to provide an amplified signal, and adjusting a gain of the variable gain amplifier responsive to the integrator output signal, wherein detecting a level the input signal includes detecting a level of the amplified signal. In one example, providing the instantaneous power output signal includes detecting a peak of the detected signal and providing a peak power output signal normalized to the average power level of the input signal. In another example, providing the instantaneous power output signal includes comparing the detected signal with a second reference signal to provide a second error signal, filtering and buffering the second error signal to provide the instantaneous power output signal.","According to another aspect, a method of power detection comprises providing a plurality of representations of an input signal at different gain levels, detecting the plurality of representations of the input signal to provide a corresponding plurality of detected signals, selecting at least one of the detected signals to provide at least one selected signal, averaging the at least one selected signal to provide an averaged signal, providing an integrator output signal representative of an average power level of the input signal based on the averaged signal, and providing an instantaneous power output signal representative of an instantaneous power level of the input signal normalized to the average power level of the input signal based on the at least one selected signal. In one example, providing a plurality of representations of the input signal further includes attenuating the input signal to provide a plurality of attenuated signals; and wherein the plurality of representations of the input signal further includes the plurality of attenuated signals. In another example, selecting at least one of the detected signals includes interpolating between the plurality of detected signals to provide at least two selected signals, weighting the at least two selected signals to provide at least two weighted signals, and summing the at least two weighted signals to provide an interpolator output signal. In another example, selecting at least one of the detected signals includes selecting those detector signals from detectors operating in their square law region. In one example, detecting the plurality of representations of the input signal includes squaring the plurality of representations of the input signal, and providing the corresponding plurality of detected signals includes providing a corresponding plurality of squared signals. In another example, providing the instantaneous power output signal may include detecting a peak of the detected signal and providing a peak power output signal normalized to the average power level of the input signal.","According to another aspect, a method of power detection comprises generating a series of gain tap signals from an input signal, squaring and weighting each of the gain tap signals, thereby generating a series of weighted output signals, summing the weighted output signals, thereby generating a summed output signal, providing an integrator output signal representative of an average power level of the input signal based on the summed output signal, and providing, responsive to the summed output signal, an instantaneous power output signal representative of an instantaneous power level of the input signal normalized to the average power level of the input signal.","Still other aspects, embodiments, and advantages of these exemplary aspects and embodiments, are discussed in detail below. Moreover, it is to be understood that both the foregoing information and the following detailed description are merely illustrative examples of various aspects and embodiments, and are intended to provide an overview or framework for understanding the nature and character of the claimed aspects and embodiments. The accompanying drawings are included to provide illustration and a further understanding of the various aspects and embodiments, and are incorporated in and constitute a part of this specification. The drawings, together with the remainder of the specification, serve to explain principles and operations of the described and claimed aspects and embodiments.","There is a wide range of applications in which providing an accurate measurement or representation of both the true RMS (root-mean-square) power and an indication of the instantaneous or peak power of an RF signal may be advantageous. For example, in communications systems signal power level measurements may be used to provide a received signal strength indication (RSSI) and\/or a transmitter signal strength indication (TSSI). These signal power measurements may also be used for RF power amplifier efficiency control, receiver automatic gain control, and\/or transmitter power control. As discussed above, some systems involve complex modulated signals (e.g., CDMA, WCDMA or WiMAX wireless communication systems). These systems may benefit from accurate average power information that is independent of the modulation scheme. In some communication systems, instantaneous or peak power level information, in combination with RMS average power level information may be critical to avoid saturating components in the signal processing chain. Some adaptive power amplifier biasing techniques may also require, or benefit from, crest factor knowledge to accurately set the power amplifier operating conditions for efficient power versus linearity tradeoffs.","Accordingly, aspects and embodiments are directed to a wide-dynamic range RF detector that is capable of providing an indication of the instantaneous or peak power level, normalized to the average power level, of an RF input signal in addition to the true RMS power level. As discussed above, feedback loop control may be used for wide-dynamic range average power detection. The RF detector may provide an accurate indication of the average real power of an RF input signal, independent of the signal shape or crest factor, and thus independent of the modulation scheme applied to the RF input signal. In addition, the RF detector may provide normalized instantaneous power detection that mirrors the input RF modulation envelope, as discussed further below.","It is to be appreciated that embodiments of the methods and apparatuses discussed herein are not limited in application to the details of construction and the arrangement of devices set forth in the following description or illustrated in the accompanying drawings. The methods and apparatuses are capable of implementation in other embodiments and of being practiced or of being carried out in various ways. Examples of specific implementations are provided herein for illustrative purposes only and are not intended to be limiting. In particular, acts, elements and features discussed in connection with any one or more embodiments are not intended to be excluded from a similar role in any other embodiments. Also, the phraseology and terminology used herein is for the purpose of description and should not be regarded as limiting. The use herein of \u201cincluding,\u201d \u201ccomprising,\u201d \u201chaving,\u201d \u201ccontaining,\u201d \u201cinvolving,\u201d and variations thereof is meant to encompass the items listed thereafter and equivalents thereof as well as additional items.","Referring to , there is illustrated a block diagram of one example of an RF detector according to aspects of the invention. The RF detector receives an RF input signal at an RF input terminal . This input signal is processed by a variable gain detection subsystem  that provides a power detector output signal on line . The scaling factor between the level of the detector output signal on line  and the RF input power level is controlled by a scaling factor control signal supplied on line , as discussed further below. It is to be appreciated that the variable gain detection subsystem  may be implemented in a variety of ways, at least some of which are discussed in more detail below. For example, In one embodiment, the variable gain detection subsystem may include a squaring RF detector cell (or array of such cells) along with circuitry to adjust the scaling factor of the detector cell(s), as shown in . In another embodiment, the variable gain detector subsystem  may include a variable gain amplifier  preceding the squaring RF detector cell(s) , as shown in . In another embodiment, the variable gain detection subsystem may provide a plurality of representations of the power level of the RF input signal at different gain levels and these representations may be processed by a detection block and scaled (either during or subsequent to the detection) and summed to provide the detector output signal on line , as discussed further below.","According to one embodiment, the detector output signal on line  may be provided to an average power detection path which provides an output  representative of the true mean-square or root-mean-square (RMS) level of the RF input signal applied at the RF input terminal . A slave copy of the detector output signal on line  is provided to an instantaneous or peak power detection path which provides an output  representative of the instantaneous or peak power level of the RF input signal, as also discussed further below. The output  is referred to herein as the RMS output , and the signal provided thereat is referred to as the RMS output signal. However, it is to be appreciated that the signal provided at output  may be a representation of the mean-square level of the RF input rather than the RMS level. Similarly, the output  is referred to herein as the instantaneous power output , and the signal provided thereat is referred to as the instantaneous power signal. However, it is to be appreciated that in some examples the signal provided at the output  may be representative of the peak (rather than instantaneous) power level of the RF input signal, as discussed further below. The instantaneous power output  is normalized to the mean power of the RF signal. In one embodiment, the instantaneous power output  follows any amplitude modulation of the RF input signal in such a way that the signal swing on the instantaneous power output varies with the instantaneous power of the modulated RF input signal, as discussed further below.","Still referring to , the average power detection path includes an integrator  that averages the detector output signal received on line , thus providing at the RMS output  a signal that is representative of the average power of the RF input signal applied at the RF input terminal . In one embodiment, the average power detection path includes a comparator  that compares the signal received from the variable gain detection subsystem  (on line ) to a fixed reference signal, Iref, provided by a reference generator  (see ). The comparator may be implemented in a variety of ways, as known to those skilled in the at, including, but not limited to, a subtractor that generates an error signal by subtracting the received detector output signal from the reference signal, or vice versa. The integrator  may be responsive to the error signal provided on line  from the comparator . The integrator may be implemented as an analog circuit, in which case its output will vary in continuous fashion, or as a digital accumulator, in which case its output would vary in discrete steps as a stream of binary data and either or both the RMS output  and line  on which the scaling control signal is supplied may represent digital busses. It is also to be appreciated that although the comparator  is illustrated in  as a separate component from the integrator , the comparator  may be integrated with the integrator  into a single component block and the integrator  may be responsive to both the detector output signal (on line ) and the reference signal, Iref. The RMS output signal may be provided on line  to a control input of the variable gain detection subsystem  to adjust the scaling factor of the variable gain detection subsystem, as discussed further below. Thus, the integrator  (including the comparator ) forms a feedback control loop with the variable gain detection subsystem  to adjust the scaling factor of the variable gain detection subsystem until the average detector output signal on line  is approximately equal to the reference signal, Iref, as discussed further below. The scaling factor control of the variable gain detection subsystem  is a monotonic function of the signal provided on line , such as a linear function, a squaring function, or an exponential function. This function may be implemented in continuous (analog) fashion or in discrete steps in which case, as discussed above, line  may represent a digital control bus","As illustrated in , the instantaneous power detection path includes an instantaneous power processing block  and an output block . As discussed above, in one embodiment, a slave copy of the detector output signal on line  from the variable gain detection subsystem  is fed to the instantaneous power processing block , the output of which provided, via the output block , at the instantaneous power output . Because of the feedback control loop discussed above, the average value of the detector output signal on line  is equivalent to the reference signal, Iref, resulting in the detector output signal representing the instantaneous power of the input RF signal normalized to average power of the RF input signal. The slave copy of this signal can be buffered, scaled and filtered (in any order) by the instantaneous power processing block  and output block  to generate the instantaneous power output normalized to average power.","Still referring to , the instantaneous power processing block  may be configured to scale and\/or filter and\/or level-shift the detector output signal. In one example, the instantaneous power processing block is configured to low-pass filter the detector output signal received on line . Filtering may be useful to remove RF frequency ripple that may exist at the output of the variable gain detection subsystem  on line  while preserving the RF input signal modulation envelope. The instantaneous power processing block may be further responsive to a second reference signal, Iref, provided by the reference generator  (see ), and may be configured to compare the detector output signal received on line  to the reference signal Iref using a comparator . Operation of the comparator  may be considered a level-shifting operation on the detector output signal. The output block  is responsive to the output of the instantaneous power processing block . In one example, the output block  includes an output buffer, wherein the output of the instantaneous power processing block  is buffered with the output buffer to generate the output  that is representative of the instantaneous power level of the RF input signal normalized to average RF input signal power, as discussed further below. In another example, the output block  includes a peak detector that may be used to generate a representation of the peak RF input signal power normalized to average RF input signal power (also defined as the crest factor of the RF input signal), as also discussed further below.","As noted above, buffering, scaling and\/or filtering of the detector output signal may be accomplished in any order. For example, as illustrated in , the detector output signal from line  may be filtered, and optionally amplified or gain-scaled, by block  of the instantaneous power processing block , and then compared with the reference signal, Iref, in comparator  before being buffered by output block . In addition, it is to be appreciated that the value of the reference signal, Iref, applied to the comparator  may be the same as or different to the value of the reference signal, Iref, used in the average power detection channel. Furthermore, in some examples, Iref may be fed to the instantaneous power processing block  (as well as to the first integrator ) rather than generating a separate second signal, Iref.","Referring again to , as discussed above, the output block  may include a peak detector that may be used to generate the peak power output normalized to the average power, and thus to provide a measurement of the crest factor of the RF input signal. Similar to instantaneous power detection configuration, filtering maybe useful to remove the RF frequency ripple existing at the output of the variable gain detection subsystem , while preserving the input modulation envelope and improving crest factor accuracy. As discussed above, conventional systems that provide a crest factor measurement, and thus require both an average power measurement and a peak power measurement, implement parallel processing of the RF input signal and may therefore suffer disadvantages such as part-to-part variations, temperature variations, and different dynamic range capability over the two detection channels, as well as the need for an accurate divider to calculate the crest factor. An RF detector such as that illustrated in  (or variations thereof) may overcome challenges associated with convention RF detectors by dominantly using the components in a wide-dynamic range average power detector having a feedback control loop with minimal additional complexity. The addition of the instantaneous\/peak power output  may be implemented using only a slave copy of the detector output signal (which is used in the average power detection channel); optionally including some gain\/filtering components, and a buffer and\/or peak detector, as discussed above. Furthermore, the slave copy of the detector output signal may only operate up to the input signal modulation bandwidth frequency, for example, about 40 MHz, instead of the input RF frequency, which may simplify the components required for the instantaneous power processing block  and\/or output block .","As discussed above, the RF detector may be implemented using various embodiments of the variable gain detection subsystem block . For example, referring to , in one embodiment, the RF input signal at input terminal  may be fed to a variable gain amplifier . The feedback signal on line  from the output of the integrator  may be used to control the gain of the variable gain amplifier. By sweeping through the gain range of the variable gain amplifier  by adjusting the feedback signal on line , representations of the RF input signal may be obtained at sequentially varying levels of gain. The output of the variable gain amplifier  may drive a squaring detector  which provides the detector output signal on line . As discussed above, because of the feedback control loop, the average value of the detector output signal on line  is driven to approximately match the reference signal, Iref, and therefore, the system may reach a steady state when the RMS output signal (which is fed back on line ) selects a gain level of the variable gain amplifier  that results in the detector output signal on line  being approximately equal to the reference signal, Iref. It is to be appreciated that of course gain or level-shifting may be provided on line  (not shown) such that the detector output signal is driven to a level that is different from the reference signal, Iref, by a factor of the gain or level-shifting applied on line .","As also illustrated in , in another embodiment, the RF detector may include additional squaring detectors  which may be used to generate the reference signals, Iref and Iref. In this manner, process and\/or temperature variations of the squaring detector  may be cancelled in the comparison (or subtraction) operations of the comparators  and .","In another embodiment, the variable gain detection subsystem  includes a squaring detector  having a variable squaring gain that is controlled by a bias control circuit , as illustrated in . The RF input signal at input terminal  is fed to the squaring detector  which provides the detector output signal on line , as discussed above. The squaring detector  may include one or more square law detector cells. In this embodiment, the scale control feedback signal on line  drives the bias control circuit  which varies the squaring gain of the squaring detector  by adjusting the bias current through the square-law detector cell(s) included in the squaring detector . The detector output signal on line  is used to drive the scale control feedback loop in the same way as discussed above with reference to . In one example, the bias control circuit  may also adjust the Iref and Iref bias currents through the additional reference squaring detectors  shown in .","The RF detector may be used to implement various different methods of RF detection. A flow diagram of one example of a method of RF detection is illustrated in . Aspects and embodiments of the method of RF detection are discussed below with continuing reference to .","In one embodiment, a first step  includes providing representations of an RF input signal at different gain levels. As discussed above, an RF signal input to the RF detector at the RF input terminal  may be processed by the variable gain detection subsystem  which may generate multiple representations of the RF input signal at different gain levels.","According to one embodiment, the variable gain detection subsystem  of the RF detector includes a gain stage  which includes a chain of amplifiers  which amplify the RF input signal, and a chain of attenuators  which attenuate the RF input signal, as illustrated in . It is to be appreciated that the invention is not limited to the inclusion of both amplifiers and attenuators, nor to inclusion of an equal number of amplifiers and attenuators. Rather, embodiments of the RF detector may comprise any number of, and any combination of, amplifiers and\/or attenuators. By applying the input RF signal at input terminal  to the chains of amplifiers  and attenuators , a plurality of taps of the input RF signal can be generated that are separated from one another by specific amounts of gain. These taps are referred to herein as \u201cgain taps\u201d of the RF input signal. It is to be appreciated that the term \u201cgain\u201d as used herein refers to both positive gain, for example, as provided by an amplifier, and \u201cnegative gain\u201d as provided, for example, by an attenuator. Thus, referring back to , step  may include amplifying the RF input signal to provide gain taps at different amplified levels (step ), and attenuating the RF input signal to provide gain taps at different attenuated levels (step ).","Referring again to , according to one embodiment, the variable gain detection subsystem  also comprises a detector array  that includes a plurality of detectors . In one example, a detector  is provided for each amplifier in the chain of amplifiers  and for each attenuator in the chain of attenuators  to detect a signal level at the output thereof. The outputs from the detectors  may be fed to an interpolator  which is configured to select the outputs of those one or more detectors operating in, or closest to, an optimum square law region, as discussed further below. The interpolator  provides the detector output current, Iout, on line  which is a function of the combined outputs from the selected detectors . The position of the selected outputs in the chain of amplifiers  and\/or chain of attenuators  in the gain and detector subsystem  may provide information that is representative of the average power level of the RF input, as discussed further below. The interpolator may also include a control input  which receives the feedback signal on line  from the RMS output , as discussed further below.","Referring to , there is illustrated a block diagram of one example of the variable gain detection subsystem . As discussed above, the variable gain detection subsystem  includes a gain stage  which may include a chain of amplifiers  and a chain of attenuators . In the illustrated example, the chain of attenuators  is implemented as a chain of resistors. However, it is to be appreciated that the invention is not so limited and other attenuator elements may be used, as known to those skilled in the art. In one example, each amplifier in the chain of amplifiers  may have the same gain, for example, X dB. Similarly, each attenuator in the chain of attenuators  may provide the same level of attenuation, for example, also X dB of attenuation (or \u2212X dB of gain). In this example, the RF input signal is fed serially through each amplifier and attenuator, as illustrated in . Assuming that there are N amplifiers in the chain of amplifiers , each having a gain of X dB, and M attenuators in the chain of attenuators , each having a gain of \u2212X dB, then including a neutral point, there are (M+N+1) gain taps sequentially separated by X dB. Alternatively, the amplifiers and\/or attenuators may have different gains and, depending on the gain values and the manner in which the RF input signal to applied to each amplifier and\/or attenuator, a number of gain taps may be generated that are sequentially separated by the same or different amounts of gain.","For example, referring to , there is illustrated another example of an RF detector in which the gain stage  comprises a plurality of amplifiers each having a gain that is a multiple of X dB (e.g., aX, bX, cX, . . . nX). The gain coefficients (a, b, c . . . n) may be integer or non-integer coefficients. As discussed above, the gain stage  may comprise any combination of amplifiers and\/or attenuators, and therefore the example illustrated in  is not intended to be limiting and the gain stage  may additionally (or alternatively) include a number of attenuators each having a gain that is a multiple of \u2212X dB. As illustrated in , in this example, the RF input signal is applied to each amplifier in parallel, rather than in series (as in the example illustrated in ). Thus, if there are N amplifiers and if the gain coefficients (a, b, c . . . n) are sequential integers (e.g., 1, 2, 3, etc.), then the gain stage  will generate N gain taps sequentially separated by X dB.","In one embodiment, each of the gain elements (amplifiers and\/or attenuators) in the gain stage  is implemented differentially. However, it is to be appreciated that the invention is not so limited and single-ended implementation is also possible. Referring again to , in the illustrated example, each gain tap is buffered (using buffers ) before driving the detector array . Tap separation may be stabilized over temperature and supply and process variations using appropriate biasing techniques. It is to be appreciated that although the buffers  are illustrated in  as being included with the chain of amplifiers  and chain of attenuators , the invention is not so limited and the buffers  may instead be considered as existing subsequent to the gain stage .","As illustrated in , a next step  may include detecting each of the gain taps produced by the gain stage . According to one embodiment, each buffered gain tap from the chain of amplifiers  and chain of attenuators  drives a detector  which provides a (differential or single-ended) output current. Thus, the detector array  produces (M+N+1) current outputs which are fed to the interpolator . Similarly, in the example illustrated in , the detector array  produces N current outputs which are fed to the interpolator . It is to be appreciated that although various inputs and outputs of the RF detector and its components may be described herein as currents or voltages, the invention is not so limited and any of these inputs and\/or outputs may be easily converted from a voltage to a current, or vice versa, using techniques known to those skilled in the art. In one example, the detectors  are squaring detectors, and the output current signal from each detector may ideally vary as the square of the input voltage (i.e., the input gain tap). Thus, the step  of detecting the gain taps may include squaring the gain taps. The outputs  from the detector array  may be filtered by filters  prior to being fed to the interpolator , as illustrated in . In one example, the filters  may be low-pass filters and used to reduce RF frequency ripple on the signals.","As will be recognized by those skilled in the art, the detectors  may be implemented in various different ways, and may have fixed or variable scale factors, as discussed further below. In one embodiment, each detector  may be implemented as a common-emitter triplet cell, which may be chosen to have a high transistor ratio for extending the input voltage range over which a square-law output current may be obtained in practice. Similarly, the variable gain detection subsystem  may be implemented in various different ways, as also discussed further below.","Referring again to , the method may include, after the detecting step , a step  of selecting one or more of the detected (optionally squared) representations of the RF input signal. All the detectors  are driven by the gain taps corresponding to different signal levels, as discussed above, but only a small number of the detectors may be operating within their optimum square-law region. Large signals at the input of a detector  may drive the detector into its limiting region rather than the square-law region. Input signals that are too small may be masked by voltage offsets and noise that may be present in practical embodiments. Therefore, as discussed above, in one embodiment, the interpolator  is configured to select the output currents from those detectors  that are operating in their optimum square-law region. Selection may be performed using a series of fixed reference voltages and a single control voltage, V, which is derived from the output of the integrator  and provided to the interpolator  at the control input , as discussed further below. Smooth, well-controlled interpolation of the outputs from adjacent detectors  as a function of the control voltage, V, may be desirable for accurate logarithmic RMS signal level indication.","Referring to , there is illustrated a block diagram of an example of the RF detector, showing an example of the interpolator  in more detail. As discussed above, the interpolator  receives the (optionally filtered) outputs  from the detector array  of the variable gain detection subsystem  and is configured to select one or more of those outputs to be summed and output on line  to the integrator  and instantaneous power processing block . According to one embodiment, the interpolator  comprises a series of interpolator stages , one stage for each detector output. Thus, if the detector array  provides (M+N+1) outputs , the interpolator  may comprise (M+N+1) interpolator stages . In one example, each interpolator stage  has three inputs and receives the output of a detector (at input ), the control voltage, Vcont, (at control input ), and a fixed bias reference voltage (at bias input ), as discussed further below. Also as discussed further below, the control voltage, Vcont, may be derived from the scaled or unsealed output of the integrator . The interpolator  may include (or be coupled to) a bias generator  which generates the series of fixed bias reference voltages applied to the interpolator stages , as also discussed further below. The outputs from all the interpolator stages  may be combined to provide the interpolator output current, Iout, (also referred to as the detector output signal) on line .","According to one embodiment, the interpolator stages  are implemented as controllable current amplifiers with the current outputs connected together, as illustrated in . Each interpolator stage  may receive the current from one of the detector outputs at the input . A specific amount of this received current may be transferred to the output line  (as Iout), and the control input  (which receives the control voltage, Vcont) and bias input  of the interpolator stage  may be used to set the current gain of the interpolator stage. As illustrated in , in one example, all the control inputs  of the interpolator stages  are connected in common to the control voltage input terminal  of the interpolator . In one embodiment, when the control voltage, Vcont, is close to the bias reference voltage, Vref, for a given interpolator stage , the current gain for that stage may be maximum, and the gain may drop sharply when Vcont is either smaller or larger than Vref. Thus, the current gain of each interpolator stage weights the current from the respective detector . In one example, each interpolator stage  is configured to provide an output only when the control voltage is within a predetermined level of the bias reference voltage of that stage. For better accuracy of the overall logarithmic RMS power level indication (provided at the RMS output ), the gain of each interpolator stage  as a function of the control voltage, Vcont, may be chosen not to be symmetrical around Vref.","As discussed above, the outputs from all the interpolator stages  are summed to provide the detector output signal, Iout. Each individual interpolator stage  has a current gain determined by the difference between the control voltage, Vcont, and the fixed bias reference voltage for the individual, Vrefi. Thus, those detector output currents  that are applied to interpolator stages  with relatively high current gains are selected by the interpolator . The currents from the selected detectors  are weighted by the current gain of the respective interpolator stages  and thus, the interpolator output current, Iout, may be considered a weighted sum of the outputs from selected detectors .","Referring again to , in one example, the bias inputs  of the interpolator stages  are driven by buffered fixed reference voltages that are generated by the bias reference generator . Buffering may be provided by buffers  connected between the bias reference generator  and each bias input , as illustrated in . These fixed reference voltages may be separated from each other by an amount \u0394V, with the lowest reference voltage having a value Vofs. Thus, there may be (M+N+1) reference voltages, Vrefi, starting from Vofs and increasing sequentially by \u0394V up to Vofs +(M+N)*\u0394V. Of course, it is to be appreciated that the sequence of reference voltages, Vrefi, may be reversed, such that the first reference voltage, Vref, corresponds to the highest voltage (Vofs+(M+N)*\u0394V) and values of the reference voltages decrease sequentially by the amount \u0394V, such that Vref(M+N+1) is the lowest voltage, equal to Vofs. In this example, the lowest RF input signal requiring the largest gain may be represented by the lowest voltage at the RMS output . The absolute accuracies of these reference voltages, Vrefi, may directly affect the accuracy of the signals provided at the RMS output  and instantaneous power output . If the reference voltage separation \u0394V is selected with care, when the control voltage, Vcont, is swept, the output of the interpolator  (i.e., the combined current, Iout, from all the interpolator stages  which is provided on line ) may vary smoothly between K times the minimum detector tap current and K times the maximum detector tap current, where K is the scaling amount of the interpolator.","According to one embodiment, the interpolator  may comprise a second type of interpolator stage that is different from other stages  that may receive a current from the detector  that is driven by the highest gain tap of the gain stage . In one embodiment, as shown in , when the control voltage, Vcont, is close to the fixed bias reference voltage, Vref, for this interpolator stage , the current gain of the interpolator stage may be close to the maximum and the gain may drop sharply when Vcont is larger than Vref while the gain will approach its maximum value when Vcont is smaller than Vref. In another embodiment, when the control voltage, Vcont, is close to the fixed bias reference voltage, Vref, for this interpolator stage , the current gain of the interpolator stage may be close to the maximum and the gain may drop sharply when Vcont is smaller than Vref while the gain will approach its maximum value when Vcont is larger than Vref. In this manner, the output of the interpolator  (which is provided on line ) changes monotonically from minimum to maximum as a function of the Vcont level rather than tending towards a minimum value at both the highest and lowest levels of Vcont.","According to another embodiment, the detector array  and interpolator  may be designed to be temperature stable when used together in an embodiment of the RF detector. Temperature stability may be achieved using precise biasing circuits with specific temperature characteristics, as known to those skilled in the art.","Referring again to , in another \u201cthermometer\u201d interpolator embodiment of the variable gain detection subsystem , currents from detectors  driven by gain\/attenuator chain taps with signal levels above the optimum square-law region of the detector are suppressed, but the currents from those detectors  operating in their optimum square-law region are summed with the small, offset-driven currents from those detectors  connected to tap points with signals below optimum. These offset-induced currents may diminish the accuracy of this interpolation scheme, but this embodiment may allow the instantaneous power output  to provide logarithmic peak amplitude measurement of short RF power level spikes well beyond the square-law dynamic range of the individual detectors . This may be a useful feature in some fault- or interference-monitoring applications. In one embodiment of the \u201cthermometer\u201d interpolator, the interpolator stages  in  may be replaced by stage type . The current gain of all these interpolator stages would then be high when the control voltage is below the fixed bias reference voltage for a given stage, i, (that is, for Vcont<Vrefi) and drop sharply as the control voltage goes above the bias reference voltage (i.e., for Vcont>Vrefi).","Referring again to , the control voltage, Vcont, applied to the interpolator stages  may be derived from the scaled or unsealed output of the integrator , which in turn receives, on line , the output from the interpolator . Thus, the RF detector may comprise a feedback loop that includes the interpolator  and the integrator . In one embodiment, the integrator  comprises the comparator  that detects a difference between the detector output current, Iout, supplied on line  and the reference current, Iref, provided by the reference generator . In one example, the comparator  is a current comparator. However, as discussed above, it is to be appreciated that any signal referred to herein as a current may be easily replaced with a corresponding voltage and therefore, the comparator may receive an output voltage from the interpolator  and a reference voltage and may be a voltage comparator.","Still referring to , the comparator  may generate an error current, Ierror, based on the difference between Iout and Iref. This error current may be used to charge or discharge the integration capacitance, depending on the direction of the error.","The integration capacitance may include one or more capacitors , . Additional capacitance may be added to the integrator  if higher integration time constants are desired or needed to get a constant RMS power level indication as a function of the modulation bandwidth of the RF input signal. The integrator  averages the signals from the detectors  selected by the interpolator  and provided to the integrator  on line  (step  in ). An output amplifier  may be used for buffering, gain-scaling and\/or DC-offset adjustment of the signal that is provided at the RMS output . In one example, the output amplifier  may provide suitable current buffering and output voltage swing capability to drive an external load that may be connected to the RMS power output . In one example, a loop amplifier  is used to provide further scaling and\/or buffering of the integrator output as may be needed or desired to drive the control input  of the interpolator . Furthermore, it is to be appreciated that either amplifier  and\/or amplifier  may be implemented as a cascade of two or more amplifiers, as would be recognized by those skilled in the art. Thus, a feedback control loop is formed involving the interpolator , the integrator  and the amplifiers (gain\/scale buffers)  and .","According to one embodiment, the integrator  has a large gain (although not an infinite gain, due to circuit non-idealities that would exist in practical embodiments). This large gain in the feedback loop forces the detector output current, Iout, to be the same (or nearly the same) as the integrator reference current, Iref, as discussed above. When an RF signal is applied to the input  (see ) of the RF detector, or when the RMS level of the applied RF input signal changes, the integrator  adjusts the control voltage, Vcont, applied to the interpolator  and receives the corresponding weighted sum of the currents from all the detectors  selected by the interpolator. The feedback loop may reach a steady state condition when the control voltage, Vcont, drives the interpolator  to select those detectors  with a weighted average output approximately equal to the reference current, Iref.","In one example, the interpolator  selects the outputs of the detectors  which are operating at (or close to) the optimum squaring point, that is, those detectors  which provide an accurate representation of the square of the RF input signal voltage. As discussed above, this representation of the square of the RF input signal voltage may be obtained regardless of the wave shape of the RF input signal. In one example, when this result is achieved by selecting a correct scaling (provided by a combination of the interpolator  and the amplifiers , ) and reference current, Iref, value, the majority of the interpolator output current, Iout, may be supplied by one or two detectors . Thus, by selecting from all the detectors  provided in the RF detector only those detectors  operating in their square-law region for a given RF input signal power level, a measurement of the mean-square power level of the RF input signal may be obtained over a range of RF input signal power levels that may far exceed the square-law (dynamic) range of any single detector . The interpolator  may thus select the detector(s) whose output provide the broadest peak to average signal power range for accurate square law operation over a wide range of RF input power levels.","According to one embodiment, when the output of the integrator  stabilizes to its steady-state condition, the value of the control voltage, Vcont, determines which detector outputs  are selected by the interpolator . Thus, by the design of the RF detector, the mean-square value of the gain taps to these detectors  is known. In one example, an X dB change in the signal level of the RF input signal, X dB also being the gain\/attenuation tap ratio (as discussed above), forces the interpolator-integrator feedback loop to select a consecutive interpolator stage . Since this may correspond to a shift of \u0394V at the control input  of the interpolator  (as discussed above), the control voltage, Vcont, may change linearly for logarithmic change in the mean-square voltage level of the RF input signal. The root operation to obtain the RMS output signal from the mean-square signal level may be implemented through gain-scaling, for example, by the amplifier . The logarithm of the root of the mean-square value of the RF input signal is equal to half the logarithm of the mean-square value of the RF input signal. Thus, at the RMS output , the RF detector may provide an accurate representation of the RMS power level of the RF input signal over a wide dynamic range (step ). An additional summing and amplifier circuit (not shown in ) may optionally be connected to output  to act as a buffer preventing an external load from disturbing the integrator-interpolator feedback loop. The summing circuit allows an external power level control signal to be subtracted from the signal at output , thereby allowing the RF power detector to operate as a controller in a power leveling loop.","In one embodiment, the accuracy of the RF detector may depend on the stability of amplifier\/attenuator gain in the variable gain detection subsystem (), and on the absolute value of the fixed reference voltages at the bias inputs  of the interpolator stages . With knowledge of how much gain is available from the gain stage , the exact logarithmic RMS value of the RF input signal may be absolutely provided by the control voltage, Vcont, with appropriate offset compensation and\/or gain scaling from the amplifier .","Referring to , there is illustrated another example of an RF detector including the RMS output  and the instantaneous power output . As discussed above, the gain stage  may be implemented in a variety of ways and  illustrates another variation in which the gain stage  comprises a plurality of serially connected amplifiers . However, it is to be appreciated that any of the illustrated variations (or any of numerous other variations) of the gain block  may be used in any embodiment of the RF detector.","Accurate RMS power calculation for signals with complex modulation schemes, such as discussed above, may require a long integration time to include the time-varying envelope in the measurement. Therefore, the integration time constant associated with the integrator  may be chosen to be relatively long. By contrast, a low-pass filtering time constant for the instantaneous power processing block  (in the instantaneous power detection channel) may be chosen so as to suppress fact AC current fluctuations that may be induced by the RF carrier signal while also being sufficiently short so as to follow slower current variations that may be driven by amplitude changes in the carrier modulation envelope. In one example, the instantaneous power processing block  provides an output current, and this output current may be easily transformed into a voltage using a simple resistor network, as known to those skilled in the art. This transformed voltage output of the instantaneous power processing block  may provide an indication of the instantaneous amplitude modulation on the RF input signal. Furthermore, as discussed above, since it is being generated by the gain tap point(s) selected by the RMS power detection loop, the voltage amplitude will be scaled by the RMS power of the RF carrier. Accordingly, the voltage signal from the instantaneous power processing block  may provide a direct indication of the instantaneous to average power ratio of the RF input signal modulation over a wide range of average RF power levels. Furthermore, in one embodiment, the instantaneous power level indication, provided from the instantaneous power processing block  at the instantaneous power output  (step ), will be accurate for large modulation crest factors because the instantaneous power processing block  is being driven by detectors  operating in their optimum square-law region. In another embodiment, with the \u201cthermometer\u201d interpolation scheme discussed above, the instantaneous power level indication range may be extended to provide a logarithmic-peak power indication for modulation crest factors many orders of magnitude larger than the square-law dynamic range of the individual detectors .","Referring to , there is illustrated one example of an implementation of the instantaneous power processing block  and output block , illustrated collectively as block . As discussed above, the instantaneous power processing block  receives a copy of the detector output signal from line  on its input line . In one example, the instantaneous power processing block  includes, or is coupled to, the comparator  (see ) which receives the detector output signal on line  and compares it to a reference current, Iref, (e.g., by subtracting the reference current from the detector output signal or vice versa) to generate an error signal that is input on line  to drive the stage of the instantaneous power processing block  illustrated in . Therefore, it is to be appreciated that the signal supplied on line  may be the detector output signal from line  (optionally scaled or level-shifted) or the error current generated by comparator . As discussed above, in one example, the reference current, Iref, may be equal to the reference current, Iref, that is subtracted from the detector output signal by comparator  in the average power detection channel. In this example, the input current on line  of the instantaneous power processing block  will be nearly zero when the RF input signal at input terminal  is not amplitude modulated.","According to one embodiment, the instantaneous power processing block  performs a current-to-voltage conversion on the input signal on line  in the network comprising resistors  and  and the transistors , and . In one example, these transistors , and are BJT transistors, as illustrated in FIG. , but it is to be appreciated that they may be alternatively implemented as FET transistors. The resulting voltage on line  is supplied to the output block . As discussed above, in one embodiment, the signal provided at the instantaneous power output  is a representation of the instantaneous power of the input RF signal normalized to the mean power of the input RF signal. In this embodiment, the output block  comprises a transistor  in a follower configuration to buffer the voltage received on line . The transistor  is properly biased using the resistor  which may be internal, external or partially external (for example, if multiple physical resistors are used to implement the representative resistor ) to the output block . In the illustrated embodiment in , the configuration of transistors , and and the resistors  and  cancels the temperature variation of the base-emitter voltage of the follower transistor  resulting in a temperature stable (or nearly temperature stable) instantaneous power output signal at the instantaneous power output .","Referring to , there is illustrated a plot of one example of a signal provided at the instantaneous power output  of an embodiment of the RF detector. In the example shown in , the RF input signal applied at terminal  was a 4-tone signal with a crest factor of 9.04 dB as illustrated in . As discussed above, and as can be seen in , in this example, the voltage provided at the instantaneous power output follows the amplitude modulation shape of the RF input signal, normalized to the average power level of the RF input signal.","In one embodiment, a replica  of the block  may be used as a reference to compensate for temperature, process and supply variations, as illustrated in . In the illustrated example, the replica block  does not receive any input signal and thus provides an output voltage that is equivalent to the output voltage of the block  when there is no input current received on line . Accordingly, the signal provided from the replica block  on the output line  will be a DC level that varies with temperature, supply and process variations. Because the replica block  is a copy of the block , temperature, process and supply variation related errors in the instantaneous power output signal on line  may be cancelled by the subtraction of the reference output signal on line  using summer . As discussed above, in one example where Iref is approximately equal to Iref, the difference of the instantaneous power output signal on line  and instantaneous power reference signal on line  may be nearly zero if the input RF signal does not have any amplitude modulation. Accordingly, the difference signal provided at output  may provide a representation of the instantaneous power of the input RF signal normalized to the mean power of the input RF signal with the average of this difference signal being near zero. In another embodiment, if Iref is also applied to port  of replica block , the difference of the instantaneous power output signal on line  and reference signal on line  will correspond to a fixed value representative of the reference level for the average power normalization. Accordingly, the difference signal provided at output  may provide a representation of the instantaneous power of the input RF signal normalized to the mean power of the input RF signal with the average of this difference signal being at the reference level for the average power normalization.","As discussed above, in another embodiment, the signal provided at the instantaneous power output  may be representative of the peak power level of the RF input signal, normalized to the average power of the RF input signal. Accordingly, the output block  may include a peak detector that can be used to generate the peak power output normalized to the average power, also defined as the crest factor of the RF input signal. Referring to , there is illustrated another example of the instantaneous power processing block  and output block  in which the output block  includes a peak detector. As discussed above with reference to , this block  performs a current-to-voltage conversion on the signal received on line  using the network comprising resistors  and  and transistors , and .  illustrates these transistors as BJTs, but it is to be appreciated that they may be alternatively implemented as FET transistors. In one example, the transistor , with its base receiving the resulting voltage on line , is used in a follower configuration with a large biasing resistor  and a capacitor  connected to the emitter of the transistor . The biasing resistor  in this case is much larger than the corresponding resistor  in  buffer stage configuration, so the quiescent current through transistor  is much smaller. As a result, this transistor charges-up capacitor  during peaks in the input RF signal power, but it turns off (acts as a rectifier) as the RF power drops below the peak value. Thus voltage corresponding to the peak RF power level is maintained on capacitor  with a time constant related to the product of the values of resistor  and capacitor . Both resistor  and capacitor  may be internal or external, or any combination thereof, to the output block . In the configuration illustrated in , the block  provides at the instantaneous power output  a peak power output signal that is a representation of the peak power of the input RF signal normalized to the mean power of the input RF signal. The ratio of the peak power to mean power is defined as the crest factor.","Thus, in one embodiment, a signal representative of the crest factor of the RF input signal may be provided at the instantaneous power output . In this embodiment, the normalization (or \u201cdivision\u201d) of the peak power by the average power occurs without the need for an accurate divider, as is needed in the conventional system discussed above with reference to , which may greatly simplify the circuit and\/or improve the accuracy of the crest factor measurement. Furthermore, in one embodiment, because the same detector array in the variable gain detection subsystem  is used for both the RMS power measurement and instantaneous power measurement, part-to-part and temperature variation issues between the RMS power detection channel and the instantaneous power detection channel, which can be problematic in conventional systems, as discussed above, are eliminated. The use of the same detector array also provides similar dynamic range performance for both the average power detection function and the instantaneous power detection function. In addition, the RF detector circuitry may be simplified compared to conventional systems by the sharing of components, such as the detector array, among the two detection channels.","Referring again to , it is to be appreciated that the block  and replica block  may be implemented as illustrated in . Thus, in similar fashion to the instantaneous power configuration discussed previously, the difference of the peak power output signal on line  and peak power reference output signal on line  may provide at output line  a representation of the peak power of the input RF signal normalized to the mean power of the input RF signal, with temperature, process and supply variation related errors in the peak power output signal on line  cancelled by the subtraction of the peak power reference output signal on line .","As discussed above, it will be recognized by those skilled in the art that the RF detector, and its various components, may be implemented in a variety of ways, not limited to the above-discussed examples. For example, the detector array  may be modified to include a series of reference detectors (optionally, reference squarers) , as illustrated in . The array of reference detectors  may receive various bias points  from the gain stage . The outputs, Iref, from the reference detectors  may be fed to summers , which receive detected signals from the detectors . The reference signals, Iref, may be subtracted from the detector  output signals in the summers  to cancel process and temperature variations. The output signals from the summers  may be fed as signals  to the interpolator , as discussed above. In one example, one reference detector  may be provided for each detector . Alternatively, two or more detectors  may share the same reference detector , resulting in fewer numbers of reference detectors being used.","Referring to , according to another embodiment, the interpolator  may be replaced with a coefficient generator  which generates scaling coefficients responsive to the average power output (i.e., the feedback signal) on line . In this example, the detector array  may include squaring RF detectors  which have a variable gain factor. Thus, each detector  may output the square of the received input signal, adjusted or weighted by the gain factor of the detector. The scaling coefficients from the coefficient generator  may be used to set the gain factors of the detectors  in the detector array . The outputs from the detector array  may be summed in summer  to generate the detector output signal on line  that is provided to the integrator  (for the average power detection channel) and the instantaneous power processing block . The coefficients may be configured so as to \u201cselect\u201d (for example, by gain-scaling) one or more of the detector  outputs, similar to the technique discussed above with reference to the interpolator. For example, the gain coefficients may be configured so as to select the outputs from those detectors  operating within their optimum square-law region.","According to another embodiment, the variable gain detection subsystem  may include dual chains of amplifiers\/attenuators , , as illustrated in . The gain taps from each pair of amplifiers\/attenuators (i.e., pairs formed from one amplifier\/attenuator from each chain , ) may be multiplied together in multipliers  which have a variable scale factor and summed in the summer  to provide the signal on line . Thus, if the two gain taps forming each pair are similar, a squaring operation may be achieved by the multiplication. Accordingly, the multipliers  may be used in this embodiment instead of squaring detectors with the multipliers receiving coefficients generated in the coefficient generator . The scaling coefficients from the coefficient generator  may be used to set the scaling factors of the multipliers .","In summary, several variations, aspects and embodiments of an RF detector have been discussed. The RF detector may provide two outputs, one being a function of the true RMS power level of an RF input signal, and the other being a function of the instantaneous\/peak power of the RF input signal, normalized to the average power level. These outputs may be stable with variations in temperature and supply voltage. The RF detector may thus optionally also provide a measurement of the crest factor of the RF input signal, which may be useful in a variety of applications. The RF detector may provide accurate measurements of the RF input signal power even in the presence of complex modulation schemes. In one embodiment, by using multiple detectors, and selecting those detectors operating in their square-law region, the dynamic range of the RF detector may be greatly extended up to a maximum level that is dependent on the number of detection stages. Furthermore, because the same variable gain detection subsystem can be used for both the average power measurement and instantaneous\/peak power measurement, the same (or very similar) dynamic range may be achieved for both measurements. In one example, the RF detector provides an input dynamic range of about 70 dB and may provide accurate RMS power measurement over an input frequency range of about 100 MHz to 3.9 GHz and over various modulation standards, including CDMA, TDMA and GSM. The RF detector may provide a linear-in-dB output, which is one embodiment is scaled by 37 millivolts per dB. The RF detector may be implemented using SiGeCMOS IC process technology and may be provided as an integrated circuit in a leadless SMT package. The following table provides some example specifications for one example of an embodiment of the RF detector, measured at room temperature:",{"@attributes":{"id":"p-0097","num":"0096"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"140pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"42pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"35pt","align":"left"}}],"thead":{"row":[{"entry":"TABLE 1"},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}},{"entry":[{},"Measured",{}]},{"entry":["Parameter","Data","Units"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Input Frequency Range","0.1 to 3.9","GHz"]},{"entry":["Input Dynamic Range (to 1 dB measurement",{},{}]},{"entry":["error, @",{},{}]},{"entry":["\u2002100 MHz","71","dB"]},{"entry":["\u2002900 MHz","70","dB"]},{"entry":["1900 MHz","70","dB"]},{"entry":["2700 MHz","66","dB"]},{"entry":["3500 MHZ","52","dB"]},{"entry":["RSSI Slope (@ 1900 MHz)","37.4","mV\/dB"]},{"entry":["RSSI Intercept Input Level (@ 1900 MHz)","\u221268","dBm"]},{"entry":["Output Error with Temperature","+\u22121","dB"]},{"entry":["Output Deviation for 256 QAM Modulation","0.1","dB"]},{"entry":["Instantaneous Power Output Temp. Sensitivity","312","ppm\/\u00b0 C."]},{"entry":["Instantaneous Power Output Modulation BW","40","MHz"]},{"entry":["(3 dB) *",{},{}]},{"entry":["Min. Input Return Loss (50 Ohm) **","10","dB"]},{"entry":["Bias Voltage (Vcc) - nominal","5","V"]},{"entry":["Min\/Max range","4.5-55\u2009","V"]},{"entry":["Current (Icc)","67-84","mA"]},{"entry":["Operating Temperature Range","\u221240 to +85","\u00b0 C."]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}},{"entry":"* At 900 MHz, \u221220 dBm RF Power, 4-tone input signal, 3 dB reduction in measured swing."},{"entry":"** Measured with balun up to 2.4 GHz. Input Return Loss is limited by Balun."}]}}}}},"Having thus described several aspects of at least one embodiment, it is to be appreciated various alterations, modifications, and improvements will readily occur to those skilled in the art. Such alterations, modifications, and improvements are intended to be part of this disclosure and are intended to be within the scope of the invention. Accordingly, the foregoing description and drawings are by way of example only, and the scope of the invention should be determined from proper construction of the appended claims, and their equivalents."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Various aspects of at least one embodiment are discussed below with reference to the accompanying figures. In the figures, which are not intended to be drawn to scale, each identical or nearly identical component that is illustrated in various figures is represented by a like numeral. For purposes of clarity, not every component may be labeled in every drawing. The figures are provided for the purposes of illustration and explanation and are not intended as a definition of the limits of the invention. In the figures:",{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 1A"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 1B"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0035","num":"0034"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIGS. 11A"},{"@attributes":{"id":"p-0037","num":"0036"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0038","num":"0037"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0039","num":"0038"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0040","num":"0039"},"figref":"FIG. 15A"},{"@attributes":{"id":"p-0041","num":"0040"},"figref":["FIG. 15B","FIG. 15A"]},{"@attributes":{"id":"p-0042","num":"0041"},"figref":"FIG. 16"},{"@attributes":{"id":"p-0043","num":"0042"},"figref":"FIG. 17"},{"@attributes":{"id":"p-0044","num":"0043"},"figref":"FIG. 18"},{"@attributes":{"id":"p-0045","num":"0044"},"figref":"FIG. 19"},{"@attributes":{"id":"p-0046","num":"0045"},"figref":"FIG. 20"}]},"DETDESC":[{},{}]}
