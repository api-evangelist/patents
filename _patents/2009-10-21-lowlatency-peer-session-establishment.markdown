---
title: Low-latency peer session establishment
abstract: A source device and a target device may endeavor to form a secure communication session whereby encrypted messages may be transmitted over an untrusted network, such as the internet. However, the exchange of many messages in the establishment of the communication session may involve considerable latency and computational resources, particularly in scenarios featuring many communication sessions (e.g., peer-to-peer communication sessions.) Techniques for initiating a communication session may be devised that enables the initiation of a communication session with only two exchanged messages, or even with a single message transmitted from the source device to the target device. Some embodiments of these techniques may also permit the inclusion of advantageous security features, such as authentication via public certificate to detect man-in-the-middle attacks and the inclusion of nonces to detect replay attacks, without increasing the number of messages involved in the initiation of the communication session.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08458776&OS=08458776&RS=08458776
owner: Microsoft Corporation
number: 08458776
owner_city: Redmond
owner_country: US
publication_date: 20091021
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND","SUMMARY","DETAILED DESCRIPTION"],"p":["In many computing scenarios, two or more devices that are mutually accessible (e.g., over a wired or wireless network) may endeavor to establish a communication session that is encrypted to deter eavesdropping or the leak of sensitive information, and\/or authenticated such that each device may verify that received messages were generated by the other device. For example, an asymmetric cryptographic key exchange algorithm, such as the RSA algorithm, may be implemented to permit two devices to exchange public keys for a session, which may be used in conjunction with the corresponding (and retained as secret) private keys in order to enable encrypted and authenticated communication during a communications session.","When two devices endeavor to establish such a communication session, a handshake protocol may be used to identify supported protocols and to exchange keys. For example, the Transport Layer Security (TLS) protocol may be implemented by each device to initiate the handshake; to disclose and choose encryption algorithms, compression algorithms, public keys, and authentication certificates; and to signal a commencement of communication using the negotiated algorithms. Once the details of the communication session are determined, the devices may establish the secure connection and may initiate communication over the encrypted channel.","This Summary is provided to introduce a selection of concepts in a simplified form that are further described below in the Detailed Description. This Summary is not intended to identify key factors or essential features of the claimed subject matter, nor is it intended to be used to limit the scope of the claimed subject matter.","Many handshake processes, including the Transport Layer Security (TLS) protocol, permit extensive robustness in the negotiation of the logistics of the communication session. However, this robustness may impose various costs, such as implementation complexity and the ensuing potential for security flaws. Also, the devices may have to exchange several messages to complete the negotiation, where each message may involve a round trip over the network connecting the devices. This exchange of information may be slow or prone to failure, especially over low-bandwidth, high-latency, and\/or unreliable connections (e.g., low-reception cellular networks that may involve dropped messages.)","An alternative technique involves the exchanging of a comparatively small number of messages in order to establish the communication session. One such set of techniques, disclosed herein, involves the delivery of a single set of information (e.g., a single message) from the source device to the target device representing a session invite, where the message specifies one or more candidate addresses of the source device and a session key generated by the source device. The client device may receive the session invite, and, if choosing to permit the establishment of a communication session (and verifying the details of the session invite, e.g., authenticating the device and\/or user as having initiated the communication session), may reply with its own session key, as well as one or more candidate addresses of the target device. The source device and the target device each use the source session key and the target session key to establish a session key that both devices may use for the session. Having exchanged a sufficient set of information to enable a secured communication session, the source device may initiate the communication session, and the target device may reply in kind. Thus, the secure communication session may be established with a reduced (and perhaps minimum) number of exchanged messages between the device, thereby reducing latency and the possibility of a failure to establish the communication session. Other security features may be implemented and included in this scheme. For example, it may be feasible to obscure the actual addresses of the source device and the target device until the secure communication session is established; e.g., different (such as anonymized) addresses may be used during the handshake process, during which the devices may securely transmit other (non-anonymized) addresses of each address to be used during the communication session.","To the accomplishment of the foregoing and related ends, the following description and annexed drawings set forth certain illustrative aspects and implementations. These are indicative of but a few of the various ways in which one or more aspects may be employed. Other aspects, advantages, and novel features of the disclosure will become apparent from the following detailed description when considered in conjunction with the annexed drawings.","The claimed subject matter is now described with reference to the drawings, wherein like reference numerals are used to refer to like elements throughout. In the following description, for purposes of explanation, numerous specific details are set forth in order to provide a thorough understanding of the claimed subject matter. It may be evident, however, that the claimed subject matter may be practiced without these specific details. In other instances, structures and devices are shown in block diagram form in order to facilitate describing the claimed subject matter.","Many scenarios in the field of computing involve an establishment of a communication session among peer devices, such as two computers connected via the internet or two wireless communications devices connected via a wireless local network. In these scenarios, the devices may endeavor to establish a communications session via a secure channel, such that communication between the devices is encrypted. Moreover, the devices may endeavor to encrypt the data in a manner that avoids a mutually shared password, which may be difficult to exchange securely before the secure communication session is established. Thus, the devices might be capable of communicating over the physical network by sending unencrypted messages, but may wish to devise an \u201coverlay\u201d network, whereby encrypted messages may be sent and received over the physical network, but the message may be automatically encrypted and decrypted by each device, thereby presenting to the applications executing on each device a virtual network between the devices that is secure from eavesdropping.",{"@attributes":{"id":"p-0021","num":"0020"},"figref":["FIGS. 1-2","FIG. 1"],"b":["12","14","10","12","14","16","12","16","20","18","14","16","22","24","12","18","14","20","14","22","12","24"]},{"@attributes":{"id":"p-0022","num":"0021"},"figref":["FIG. 2","FIG. 1"],"b":["30","12","14","10","12","18","14","20","14","22","12","24","30","12","14","32","34","12","14","32","12","14","32"]},"In this exemplary scenario , the source device  first encrypts the message  with the target public key  to produce an encrypted message . The source device  also signs the encrypted message  with the source private key  to produce an encrypted and signed message . This encrypted and signed message  may be transmitted to the target device  over the communication session . Even if a third party may eavesdrop on the communication session  and may read the encrypted and signed message , the intercepted message  cannot be decrypted, as the third party does not have access to the target private key . By contrast, when the target device  receives the encrypted and signed message , the target device  uses the target private key  to produce a decrypted message . Additionally, the target device  may use the source public key  to verify the author of the decrypted message  (i.e., to verify that the decrypted message  was generated by a device having access to the source private key , such as the source device ) and\/or to verify that the contents of the decrypted message  have not been altered by a third party who may be eavesdropping on the communication session . As a result of this exemplary scenario , the target device  receives a decrypted, verified message  that has been transmitted over an untrusted channel (such as the internet) with a verifiably low probability of interception and\/or tampering by a third party.","The techniques illustrated in the exemplary scenarios of  may be used to exchange encrypted messages over a secure communication session, but the manner of exchanging the public key information in order to establish the communication session may involve additional considerations. As a first example, it may be desirable for one device to authenticate the other device, so that a third party may not simply impersonate the other device at the beginning of the key exchange. For example, a third party might intercept a request to establish the communication session  from a source device , and may engage in key exchange with the source device  while impersonating the target device . Moreover, in a \u201cman-in-the-middle attack,\u201d the third party might also impersonate the source device  and request to establish a second communication session  with the target device . If successful in initiating both communication sessions , the third party might pass all messages  received from one communication session  into the other communication session , thereby presenting the appearance of a secure communication channel  between the source device  and target device , but having full access to the messages  exchanged therethrough. In order to reduce this likelihood, the source device  may endeavor to authenticate the target device , e.g., by testing the identity of the target device  against a public certificate received from a trusted source and identifying the target device , which a third party may not be able to fulfill.","As a second example, a third party who cannot decrypt the messages may still interfere with the source device  and\/or the target device  through a \u201creplay attack,\u201d where the third party captures one or more encrypted and signed messages  transmitted to the communication session  and later retransmits them to the receiving device. The receiving device might fail to recognize the replayed message as a duplicate of a previously received message, and might act upon it. For example, if the source device  sends to the target device  a request to establish a communication session  that authenticates the source device , a third party might capture the message and retransmit it to the target device  from a different address. Even if the third party cannot decrypt the contents of the request, the retransmission of the request (including the encrypted credentials of the source device ) from the separate address might be successfully accepted by the target address , thereby prompting the target device  to establish a communication session  with the third party impersonating the source device . In order to reduce the threat of such security risks, the source device  and\/or the target device  may include in various messages a \u201cnonce,\u201d comprising a one-time identifier (often generated at random) that is used to render a distinguishing characteristic to a message , communication session , etc., such that a receiving device may identify retransmitted messages.","Due to these and other considerations, a particular manner of establishing communication sessions  between a source device  and a target device  may be devised involving not just the exchange of key information, but also related information. In many scenarios, this manner of establishing a communication session , sometimes referred to as a \u201chandshake,\u201d may involve an exchange of considerable information in a well-structured and interactive manner.",{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 3","b":["50","12","14","12","18","20","14","22","24","12","52","14","12","14","52","12","14","52","22","12","52","12","52","18","52","52","12","12","52","12","14","52","52","32"]},"In this comparatively simplified handshake interaction, the source device  and the target device  exchange a considerable amount of information. This interaction may involve the exchange of nine messages , each having a specific format utilized by the sending device and inducing a particular behavior in the receiving device. The complexity of the handshake interaction might raise the probability of complications arising (e.g., unexpected or undesirable results if messages  are exchanged in an incorrect order, a failed delivery of a message , and opportunities for abuse by third parties.) Moreover, each message  involves a transmission delay over a network, giving rise to a significant amount of latency that may delay the establishment of the communication channel  between the source device  and the target device . While some techniques might be used to reduce the number of messages  exchanged (e.g., grouping sets of related messages  in the exemplary scenario  of  might reduce the number of exchanged messages to four), additional features of the communications channel (e.g., the negotiation of a particular TLS version and of a particular encryption algorithm ) might further increase the number of messages  exchanged to complete the handshake. The generation, transmission, reception, decoding, and processing of such messages also imposes a computational burden on the source device  and the target device , and in scenarios where the number of connections may be large (e.g., peer-to-peer data transfer among a large set of peer devices, where a device may establish and maintain hundreds of connections on a dynamic basis), the delays and computational burdens of establishing the connections may scale out of an acceptable range.","Accordingly, it may be desirable to reduce the complexity of the handshake interaction in order to permit an establishment of the communication session  with desirably low latency and computational costs, while also enabling some of the features discussed herein (e.g., protection against man-in-the-middle attacks or replay attacks.) One technique for reducing latency involves reducing the number of messages  exchanged in the establishment of the communication session . For example, the handshake interaction might be devised to permit each device to deliver to the other device a single set of information defining its portion of the secure communication session , thereby permitting the communication session  to commence with a single exchange of messages .",{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 4","b":["60","12","14","32","12","14","88","60","12","66","14","72","66","62","64","12","72","68","70","14","52","32","12","72","68","14","66","62","12","78","14","80","52","80","72","14","80","70"]},"When the source device  receives (e.g., from a user) a request to initiate a communications session  with the target device , the source device  might initiate a handshake in the following manner. First, the source device  might generate a source session key , which is to be used to encrypt and decrypt messages  only for this communication session  with this target device . The source device  may prepare a session invite , comprising the source session key  and the source address , and may encrypt the message with the target certificate public key  within the target public certificate . The session invite  may then be transmitted to the target device  as a request to initiate the communication session .","When the target device receives the session invite , the target device may decrypt the session invite  using the target certificate private key , and may determine whether or not to accept the invitation to initiate the communication session . If the target device  accepts the invitation, the target device  may then generate a target session key . Using the source session key  and the target session key , the target device  might generate a session key  that may be used to encrypt the eventual communication session . For example, the session key  may comprise a symmetric key, such as a Rijndael key that is used both to encrypt and decrypt messages. The symmetric key may comprise, e.g., a simple concatenation of the source session key  and the target session key . After generating the target session key , the target device  may prepare a session acceptance , comprising the target session key  and the target address , which may be encoded with the source public certificate . The target device  may then transmit the session acceptance  to the source device . Upon receiving the session acceptance , the source device  may also generate a session key  using the source session key  and the target session key . The source device  may then initiate the communication session with the target address , encrypted with the session key , and may exchange messages over the communication session  as in the exemplary scenario  of . In this manner, the source device  and the target device  may exchange the relevant information for initiating the communication session  with only two messages , thereby reducing the latency and computational burdens of the handshake. Additionally, the use of the target public certificate  may facilitate the authentication to the source device  of the identity of the target device , while not involving an exchange of additional messages  in the handshake. Moreover, in a refinement of these techniques (not illustrated in ), the latency of establishing the communication session  might be further reduced if the target device  initiates the communication session with the source device  upon receiving the session invite . In this embodiment, the session acceptance  may be sent within the established communication channel, thereby reducing the handshake to the exchange of a single message  and reducing the latency and computational burden of the handshake.",{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 5","b":["90","32","12","88","78","62","64","12","66","62","32","14","72","80","90","12","90","92","94","88","96","98","14","82","78","74","82","72","68","72","100","12","84","80","76","102","84","66","104","86","74","76","106","32","14","80","84","32","86","14","82","84","90","32","14","52","108"]},{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIG. 6","b":["110","32","14","88","72","80","12","66","110","14","110","112","114","88","116","12","82","78","74","118","82","72","120","76","74","76","122","86","124","12","84","80","76","84","66","12","32","124","32","12","76","32","86","12","82","84","110","32","12","52","126"]},"Still another embodiment involves a computer-readable medium comprising processor-executable instructions configured to apply the techniques presented herein. An exemplary computer-readable medium that may be devised in these ways is illustrated in , wherein the implementation  comprises a computer-readable medium  (e.g., a CD-R, DVD-R, or a platter of a hard disk drive), on which is encoded computer-readable data . This computer-readable data  in turn comprises a set of computer instructions  configured to operate according to the principles set forth herein. In one such embodiment, the processor-executable instructions  may be configured to perform a method of establishing a communication session with a target device, such as the exemplary method  of . In another such embodiment, the processor-executable instructions  may be configured to perform a method of establishing a communication session with a source device, such as the exemplary method  of . Many such computer-readable media may be devised by those of ordinary skill in the art that are configured to operate in accordance with the techniques presented herein.","The techniques discussed herein may be devised with variations in many aspects, and some variations may present additional advantages and\/or reduce disadvantages with respect to other variations of these and other techniques. Moreover, some variations may be implemented in combination, and some combinations may feature additional advantages and\/or reduced disadvantages through synergistic cooperation. The variations may be incorporated in various embodiments (e.g., the exemplary method  of  and the exemplary method  of ) to confer individual and\/or synergistic advantages upon such embodiments.","A first aspect that may vary among embodiments of these techniques relates to the scenarios wherein these techniques presented herein may be utilized. As a first example, the techniques may be utilized to establish secure communication sessions in an efficient (and low-latency) manner among computers connected via a wired network, such as the internet or a local area network (LAN) or a wireless network, such as a cellular network. The techniques may also be utilized to establish secure communication sessions in an efficient (and low-latency) manner among devices connected via a wired or wireless device network, such as a Universal Serial Bus (USB) hub or a personal area network (PAN) such as Bluetooth. The devices may also be operated by the same user or by different users. As a second example, the techniques may be utilized to establish many types of communication sessions, including a server\/client arrangement where the source device  operating as a client that endeavors to contact the target device  operating as a server, and a peer-to-peer arrangement where the source device  and target device  operate as peers in a distributed data sharing scheme. Further embodiments of these techniques may connect more than two devices; e.g., a multicast communication session among a source device  and a set of target devices  (each using the same shared key pair, or each having an individual key pair, etc.) may be established using some variations of the techniques discussed herein. As a third example, many types of encryption algorithms may be used to generate the asymmetric cryptographic key pair, to encrypt and decrypt messages  using the key pairs.","A particular scenario wherein these techniques may be utilized involves an exchange of messages among devices represented in a deployable computing environment. Recent attempts have been made to develop techniques for providing access to a computing environment among an array of devices in a consistent, deployable, and extensible manner. These techniques also seek to provide a common set of applications among the cooperating devices, and a centralized service for managing the procuring, installing, using, and uninstalling of applications among such devices. The application set is not necessarily identical among various devices; e.g., a workstation may contain high-performance applications (e.g., photo editing software and graphically intensive games) that may not run well on a cellphone device, and the cellphone device may include portability applications (e.g., a GPS-based mapping software) that is not relevant to a non-portable workstation. However, many applications and data objects related thereto may be shared among such devices (e.g., a calendar application configured to manage a user calendar object), and the computing environment may be adapted to enable the distribution and synchronization of the application and data objects among such devices. It may therefore be appreciated that a computer system may be advantageously represented in a manner that enables the deployment of the computing environment among a set of devices.","In one such technique, the computing environment\u2014including a set of applications, the application resources, and data objects used thereby\u2014is represented in a manner that may be delivered to devices for rendering according to the capabilities of the device. The objects include the data objects of the computer system, such as the user files and data created by the user, as well as representations of the myriad devices comprising the computing environment of the user. A computing environment represented in this manner may be delivered to any device and rendered in a manner suitable for the capabilities of the device. For instance, a workstation may render the information as a robust and general-purpose computing environment, while a public workstation may render a different computing environment experience through a web browser (e.g., as a virtual machine that may be discarded at the end of the user's session), and a cellphone may provide a leaner interface with quicker access to cellphone-related information (e.g., contacts, calendar, and navigation data.) Moreover, updates to the information set (e.g., preference changes and updates to data files contained therein) may be applied to the canonical source of the information set, and thereby propagated to all other devices to which the information set is delivered.",{"@attributes":{"id":"p-0040","num":"0039"},"figref":"FIG. 8","b":["140","142","144","142","144","146","150","154","142","144","32"]},"A second aspect that may vary among embodiments of these techniques relates to the manner of obtaining the target public certificate  of the target device , which the source device  may use to encrypt the session invite . In one implementation, the target public certificate  may be obtained from a certificate server that may be configured to store various public certificates, including the target public certificate . For example, a large organization may implement a certificate server that contains public certificates of various known devices used by the organization, such as computers accessible over a local area network (LAN). In one such embodiment, a computing environment host  wherein such devices are represented may be configured to store the target public certificate  within the object hierarchy , which may be readily accessible to the source device . A source device  operating on the network may endeavor to establish a communication session with a particular target device  by first querying the certificate server for the public certificate of the target device , and then using the provided public certificate to encrypt the session invite . This technique thereby authenticates the target device  if a corresponding response is received, since other devices are unable to decrypt the session invite  without access to a target certificate private key  corresponding to the provided target public certificate . However, a certificate server might represent a security weak point, since, if compromised by a third party, the authentication of a large number of devices may be forged by the third party; additionally, the certificate server may itself have to be authenticated. As an alternative technique, target public certificates  of various devices may be provided to the source device  by any suitable channel, e.g., email, file transfer, or physical storage medium. Regardless of how the source device  achieves access to the target public certificate , the techniques discussed herein may be utilized accordingly. Conversely, in some embodiments, if the target device  is configured to establish communication sessions  only with known source devices , the target device  may refer to a source public certificate (which might also be provided by a certificate server ) to authenticate the source device  during the handshake.","An additional refinement of these techniques relates to the caching of public certificates. For example, a source device  may comprise a certificate cache, wherein target public certificates  obtained during an initiation of a communication session  (e.g., from a certificate server) may be stored, and may later utilized to reauthenticate the target device  while initiating a subsequent communication session with the same target device . This caching may further improve the efficiency of these techniques by reducing redundant retrievals of the target public certificate  of a particular device . The cache may also be maintained to promote security, e.g., by establishing a validity period for respective target public certificates , and evicting expired target public certificates  from the certificate cache.",{"@attributes":{"id":"p-0043","num":"0042"},"figref":"FIG. 9","b":["160","160","162","72","14","12","162","166","14","162","72","12","164","72","14","12","72","14","164","12","14","166","166","12","168","14","72","162","12","72","164","14","168","168","72"]},"A third aspect that may vary among embodiments of these techniques relates to the manner of developing the session key  used to encrypt the communication session  established between the source device  and the target device  after the handshake. As a first example, the session key  might comprise a symmetric key, which might be randomly generated and utilized according to a symmetric encryption algorithm (e.g., the Rijndael algorithm), whereby the same key is used to encrypt and to decrypt messages. A symmetric key might be desirable for securing the communication session , because the computational burdens of using such a key may be considerably lower than using an asymmetric key. The session key  might then be generated, e.g., by generating a source session key  comprising a first randomly generated key (such as a randomly selected integer or string), generating a target session key  comprising a second randomly generated key, and generating a symmetric random session key using the first randomly generated key and the second randomly generated key (e.g., by concatenating the randomly generated keys.)","As a second example, a set of session keys might be generated. Because symmetric keys might be easier to break than asymmetric keys, it might be desirable to rotate through a set of keys during the communication session  (e.g., where the source device  and the target device  are configured to switch periodically to a next key in a session key set.) For example, the session key  may be generated as a session key set comprising at least two session keys, each of which is different from the other session keys, but nevertheless generated (in different ways) using the source session key and the target session key. Upon initiation, the communication session  may initially be encrypted a first session key, and the devices may be configured in some manner (e.g., periodically) to select a second session key from the session key set and to encrypt the communication session  using the second session key. Those of ordinary skill in the art may devise many ways of generating and using the session key while implementing the techniques discussed herein.","A fourth aspect that may vary among embodiments of these techniques relates to the manner of initiating the communication session. As a first example, the source device  may initiate the communication session  with the target device  after receiving the session acceptance . As a second example, the target device  may instead initiate the communication session  with the source device  after sending the session acceptance . As a third example, the target device  might initiate the communication session  even before sending the session acceptance , and may instead send the session acceptance  after establishing the communication session . This technique might effectively permit the devices to establish the communication session after sending only a single message; e.g., the source device  might send the session invite  to the target device , and might then be configured to await the initiation of the communication session  by the target device , with the session acceptance  to follow within the communication session . Those of ordinary skill in the art may devise many ways of initiating the communication session between the devices while implementing the techniques discussed herein.","A fifth aspect that may vary among embodiments of these techniques relates to scenarios involving the establishment of communication sessions  among devices operated by different users. Where devices are operated by the same user, comparatively few identity-based security concerns may be involved; but where the source device  is operated by a source user and the target device  is operated by a target user, one or both users may wish to authenticate the identities of the other users before initiating the communication session . For example, the target user may have configured the target device  to share data only with a particular set of source users  of source devices , and may therefore configure the target device  to refuse to establish communication sessions  with unknown or known but unauthenticated users. In one such embodiment, the session invite  provided by the source device  may include a source user authenticator, such as a password or cryptographic signature, which may authenticate the identity of the source user of the source device . The target device  may therefore be configured to verify the source user using the source user authenticator, and to initiate the communication session  with the source device  after authenticating the source user. Conversely, the session acceptance  provided by the target device  may include a target user authenticator, which may authenticate the identity of the target user of the target device ; and the source device  may be configured to verify the target user using the target user authenticator, and to initiate the communication session  with the target device  after authenticating the target user. Those of ordinary skill in the art may devise many techniques for authenticating users while implementing the techniques discussed herein.","A sixth aspect that may vary among embodiments of these techniques relates to scenarios where one or both of the source device  and the target device  are accessible at multiple addresses. In a first such scenario, a source device  and a target device  may be concurrently capable of accessing each other across multiple networks, such as a personal area network (PAN) such as a Bluetooth network, a local area network (LAN) such as an 802.11 (WiFi) network, and a wide area network (WAN) such as the internet. The physical network may also comprise other types of networks, such as super-peer networks where a node may operate as a server, a client, and\/or one or more peers with respect to other peers. In a second scenario, the target device  may be accessible at a range of addresses, and it may be preferable for the source device  to contact the target device  using a particular address as compared with other addresses (e.g., an HTTP channel accessed through port  instead of an FTP channel accessed through port .) In these and other scenarios, the source device  may disclose to the target device  (e.g., as part of the session invite ) a set of source candidate addresses where the source device may be accessible, and while establishing the communication session , the target device  may select a source address  from among the source candidate addresses, and may initiate the communication session  with the selected source address . Conversely or additionally, the target device  may disclose to the source device  (e.g., as part of the session acceptance ) a set of target candidate addresses where the target device may be accessible, and while establishing the communication session , the source device  may select a target address  from among the source candidate addresses, and may initiate the communication session  with the selected source address .","In a second variation of this sixth aspect, it may be desirable for one or both devices to use a first address during the handshake process, and a second (different) address during the communication session. For example, if one or both devices engage in the handshake using addresses that are associated with the devices, an eavesdropper of the handshake process might be able to use these addresses to identify the locations of the devices, to identify the transaction between the devices, and\/or to interfere with the communication session, such as with a denial-of-service attack. Instead, one or both devices might endeavor to use one address (e.g., an anonymized address) to engage in the handshake process, and to use another address (e.g., a non-anonymized address) to engage in the communication session once authenticated and securely established. For example, the session acceptance  might comprise a candidate target address that is different from the target address  of the target device  to which the source device  sends the session invite , and the source device  might initiate the communication session  with the target device  at the candidate target address. Conversely, the session invite  might comprise a candidate source address that is different from the source address  of the source device  from which the session invite  is sent, and the source device  might initiate the communication session  with the target device  from the candidate source address. In one such scenario, an anonymizing server may permit devices to claim an ephemeral address in order to handshake with another device. It may be appreciated that this anonymization might be feasible without diminishing the authentication by each device of the identity of the other device or user thereof; e.g., even though a device might use an anonymized address, it might nevertheless be authenticated through a public certificate. Those of ordinary skill in the art may devise many ways of disclosing, selecting among, and utilizing a plurality of addresses whereby the source device  and\/or target device  may be accessible while implementing the techniques discussed herein.","A seventh aspect that may vary among embodiments of these techniques relates to the use of one or more nonces to improve the security of the communication channel . A nonce is a distinctive identifier generated by the source device  and\/or the target device  and included in messages  to distinctively identify the message , the communication session , etc. The use of a nonce may make \u201creplay attacks\u201d more difficult, where a third party may capture an encrypted message generated by a sender and may retransmit the encrypted message to the receiver in order to compromise the security of the communication session  or alter the behavior of the receiving device. As a first example, the source device  may be configured to generate a source nonce (e.g., a random or sequential number or string), which it may include in the session invite , that distinctively identifies the session invite . Upon receiving the session invite , the target device  may be configured to verify the source nonce (e.g., by confirming that it has not previously received a session invite  having the same source nonce.) Upon verifying the source nonce, the target device  may transmit the session acceptance  to the source device , and may record the source nonce in a set of previously received source nonces. Additionally, the target device  may include the source nonce in the session acceptance , which may further authenticate the identity of the target device  as responding to the session invite  (e.g., a third party may endeavor to impersonate the target device  by replaying a previously received session acceptance , but a mismatching source nonce in the session acceptance  may alert the source device  of the impersonation.) Alternatively or additionally, the target device  may generate a target nonce that may be included in the session acceptance , and upon receiving the session acceptance , the source device  may verify the target nonce before initiating the communication session  with the target device .",{"@attributes":{"id":"p-0051","num":"0050"},"figref":"FIG. 10","b":["170","12","14","32","172","12","32","14","82","72","82","172","14","82","82","172","172","14","12","84","66","172","12","172","84","172","82","32"]},"The inclusion of the source nonce  in this exemplary scenario  of  may improve the security of the communication session  in at least two ways. First, a third party  may intercept the session invite , and may subsequently attempt to initiate a separate communication session  with the target device  by retransmitting the session invite  to the target device , thereby impersonating the source device . The target device  may identify the source nonce  included in the retransmitted session invite  as having been previously received in the first transmission of the session invite  by the source device , and may therefore deny the initiation of a communication session  with the third party . Second, the third party  may capture a session acceptance  transmitted from the target device  to the source device  during an initiation of a first communication session. During a subsequent attempt by the source device  to establish a second communication session with the target device , the third party  may then attempt to impersonate the target device  by retransmitting the session acceptance , but the source nonce  in the second session invite  will fail to match the source nonce  returned by the third party  in the retransmitted session acceptance , thereby alerting the source device  to the impersonation. Those of ordinary skill in the art may devise many uses for nonces generated by the source device  and\/or the target device  while implementing the techniques discussed herein.","Although the subject matter has been described in language specific to structural features and\/or methodological acts, it is to be understood that the subject matter defined in the appended claims is not necessarily limited to the specific features or acts described above. Rather, the specific features and acts described above are disclosed as example forms of implementing the claims.","As used in this application, the terms \u201ccomponent,\u201d \u201cmodule,\u201d \u201csystem\u201d, \u201cinterface\u201d, and the like are generally intended to refer to a computer-related entity, either hardware, a combination of hardware and software, software, or software in execution. For example, a component may be, but is not limited to being, a process running on a processor, a processor, an object, an executable, a thread of execution, a program, and\/or a computer. By way of illustration, both an application running on a controller and the controller can be a component. One or more components may reside within a process and\/or thread of execution and a component may be localized on one computer and\/or distributed between two or more computers.","Furthermore, the claimed subject matter may be implemented as a method, apparatus, or article of manufacture using standard programming and\/or engineering techniques to produce software, firmware, hardware, or any combination thereof to control a computer to implement the disclosed subject matter. The term \u201carticle of manufacture\u201d as used herein is intended to encompass a computer program accessible from any computer-readable device, carrier, or media. Of course, those skilled in the art will recognize many modifications may be made to this configuration without departing from the scope or spirit of the claimed subject matter.",{"@attributes":{"id":"p-0056","num":"0055"},"figref":["FIG. 11","FIG. 11"]},"Although not required, embodiments are described in the general context of \u201ccomputer readable instructions\u201d being executed by one or more computing devices. Computer readable instructions may be distributed via computer readable media (discussed below). Computer readable instructions may be implemented as program modules, such as functions, objects, Application Programming Interfaces (APIs), data structures, and the like, that perform particular tasks or implement particular abstract data types. Typically, the functionality of the computer readable instructions may be combined or distributed as desired in various environments.",{"@attributes":{"id":"p-0058","num":"0057"},"figref":["FIG. 11","FIG. 11"],"b":["180","182","182","186","188","188","184"]},"In other embodiments, device  may include additional features and\/or functionality. For example, device  may also include additional storage (e.g., removable and\/or non-removable) including, but not limited to, magnetic storage, optical storage, and the like. Such additional storage is illustrated in  by storage . In one embodiment, computer readable instructions to implement one or more embodiments provided herein may be in storage . Storage  may also store other computer readable instructions to implement an operating system, an application program, and the like. Computer readable instructions may be loaded in memory  for execution by processing unit , for example.","The term \u201ccomputer readable media\u201d as used herein includes computer storage media. Computer storage media includes volatile and nonvolatile, removable and non-removable media implemented in any method or technology for storage of information such as computer readable instructions or other data. Memory  and storage  are examples of computer storage media. Computer storage media includes, but is not limited to, RAM, ROM, EEPROM, flash memory or other memory technology, CD-ROM, Digital Versatile Disks (DVDs) or other optical storage, magnetic cassettes, magnetic tape, magnetic disk storage or other magnetic storage devices, or any other medium which can be used to store the desired information and which can be accessed by device . Any such computer storage media may be part of device .","Device  may also include communication connection(s)  that allows device  to communicate with other devices. Communication connection(s)  may include, but is not limited to, a modem, a Network Interface Card (NIC), an integrated network interface, a radio frequency transmitter\/receiver, an infrared port, a USB connection, or other interfaces for connecting computing device  to other computing devices. Communication connection(s)  may include a wired connection or a wireless connection. Communication connection(s)  may transmit and\/or receive communication media.","The term \u201ccomputer readable media\u201d may include communication media. Communication media typically embodies computer readable instructions or other data in a \u201cmodulated data signal\u201d such as a carrier wave or other transport mechanism and includes any information delivery media. The term \u201cmodulated data signal\u201d may include a signal that has one or more of its characteristics set or changed in such a manner as to encode information in the signal.","Device  may include input device(s)  such as keyboard, mouse, pen, voice input device, touch input device, infrared cameras, video input devices, and\/or any other input device. Output device(s)  such as one or more displays, speakers, printers, and\/or any other output device may also be included in device . Input device(s)  and output device(s)  may be connected to device  via a wired connection, wireless connection, or any combination thereof. In one embodiment, an input device or an output device from another computing device may be used as input device(s)  or output device(s)  for computing device .","Components of computing device  may be connected by various interconnects, such as a bus. Such interconnects may include a Peripheral Component Interconnect (PCI), such as PCI Express, a Universal Serial Bus (USB), firewire (IEEE 1394), an optical bus structure, and the like. In another embodiment, components of computing device  may be interconnected by a network. For example, memory  may be comprised of multiple physical memory units located in different physical locations interconnected by a network.","Those skilled in the art will realize that storage devices utilized to store computer readable instructions may be distributed across a network. For example, a computing device  accessible via network  may store computer readable instructions to implement one or more embodiments provided herein. Computing device  may access computing device  and download a part or all of the computer readable instructions for execution. Alternatively, computing device  may download pieces of the computer readable instructions, as needed, or some instructions may be executed at computing device  and some at computing device .","Various operations of embodiments are provided herein. In one embodiment, one or more of the operations described may constitute computer readable instructions stored on one or more computer readable media, which if executed by a computing device, will cause the computing device to perform the operations described. The order in which some or all of the operations are described should not be construed as to imply that these operations are necessarily order dependent. Alternative ordering will be appreciated by one skilled in the art having the benefit of this description. Further, it will be understood that not all operations are necessarily present in each embodiment provided herein.","Moreover, the word \u201cexemplary\u201d is used herein to mean serving as an example, instance, or illustration. Any aspect or design described herein as \u201cexemplary\u201d is not necessarily to be construed as advantageous over other aspects or designs. Rather, use of the word exemplary is intended to present concepts in a concrete fashion. As used in this application, the term \u201cor\u201d is intended to mean an inclusive \u201cor\u201d rather than an exclusive \u201cor\u201d. That is, unless specified otherwise, or clear from context, \u201cX employs A or B\u201d is intended to mean any of the natural inclusive permutations. That is, if X employs A; X employs B; or X employs both A and B, then \u201cX employs A or B\u201d is satisfied under any of the foregoing instances. In addition, the articles \u201ca\u201d and \u201can\u201d as used in this application and the appended claims may generally be construed to mean \u201cone or more\u201d unless specified otherwise or clear from context to be directed to a singular form.","Also, although the disclosure has been shown and described with respect to one or more implementations, equivalent alterations and modifications will occur to others skilled in the art based upon a reading and understanding of this specification and the annexed drawings. The disclosure includes all such modifications and alterations and is limited only by the scope of the following claims. In particular regard to the various functions performed by the above described components (e.g., elements, resources, etc.), the terms used to describe such components are intended to correspond, unless otherwise indicated, to any component which performs the specified function of the described component (e.g., that is functionally equivalent), even though not structurally equivalent to the disclosed structure which performs the function in the herein illustrated exemplary implementations of the disclosure. In addition, while a particular feature of the disclosure may have been disclosed with respect to only one of several implementations, such feature may be combined with one or more other features of the other implementations as may be desired and advantageous for any given or particular application. Furthermore, to the extent that the terms \u201cincludes\u201d, \u201chaving\u201d, \u201chas\u201d, \u201cwith\u201d, or variants thereof are used in either the detailed description or the claims, such terms are intended to be inclusive in a manner similar to the term \u201ccomprising.\u201d"],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0008","num":"0007"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 11"}]},"DETDESC":[{},{}]}
