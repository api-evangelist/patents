---
title: Automatic integration reset offset subtraction circuit
abstract: Techniques for precise removal of offset charge associated with the reset switch of an integration circuit are disclosed. Offset cancellation circuitry includes a single reset offset subtraction circuit and a replica integrator, which is configured identically to the integrators to be offset cancelled. An offset charge is generated by the circuitry and capacitively coupled to the target integrators. This generated offset charge causes voltage at the input node of each target integrator to substantially match the desired starting voltage level of the targeted integration process. Minimal additional space and circuitry is needed. All of the undesired offset charge is cancelled, without canceling any of the desired input current.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07026853&OS=07026853&RS=07026853
owner: BAE Systems Information and Electronic Systems Integration INC
number: 07026853
owner_city: Nashua
owner_country: US
publication_date: 20040615
---

{"@attributes":{"id":"description"},"GOVINT":[{},{}],"heading":["STATEMENT OF GOVERNMENT INTEREST","FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE INVENTION"],"p":["Portions of the present invention may have been made in conjunction with Government funding under contract number DSWA01-98-C-0186, and there may be certain rights to the Government.","The invention relates to integration circuitry, and more particularly, to an automatic integration reset offset subtraction circuit.",{"@attributes":{"id":"p-0004","num":"0003"},"figref":"FIG. 1","b":["105","105"],"sub":"int"},"In such applications, each cell of the FPA generates a detector current when a scene is imaged. Each detector current generated by the FPA is applied to the input of a corresponding integrator circuit included in the FPA read-out circuit. In operation, the integrator is reset by closing the reset switch, which initializes the integration process to a known starting voltage. The reset switch is then opened to begin integration. Any current (e.g., I) then flowing into the input current node is integrated onto the integration capacitor.","When the reset switch is opened, some leakage or \u201coffset\u201d charge from the reset switch is injected into the inverting input of the op-amp  and effectively combines with the input current, I. This charge manifests as an offset from the integrator's starting level, and is therefore referred to herein as an \u201coffset charge\u201d or \u201creset offset\u201d or \u201creset offset charge\u201d or \u201cintegrator offset\u201d or simply \u201coffset\u201d. This offset can consume a large fraction of the voltage range of the integrator, especially if the integration capacitor is small.","Various conventional techniques are available that address integrator offset cancellation. However, such techniques generally require the addition of substantial circuitry and complexity, particularly for designs involving multiple integrator circuits, where each circuit must be modified with the substantial offset cancellation circuitry. Such additional circuitry adds cost and requires additional space, which may not be acceptable for space-limited applications. Moreover, the precise cancellation of the reset offset charge is not trivial. On one hand, the offset cancellation must be done so that only offset charge is cancelled, and not the desired input current. On the other hand, all of the offset charge must be removed, as any residual offset will still adversely impact the voltage range of the integrator.","What is needed, therefore, are techniques for removing offset charge associated with the reset switch.","One embodiment of the present invention provides a system for canceling offset charge of one or more target integrators, each target integrator having an optimum starting voltage level for integration and an input node where offset charge manifests. The system includes a replica integrator circuit that is configured substantially the same as the one or more target integrators. A sample and hold circuit is adapted to sample and hold output from the replica integrator circuit, wherein the output represents offset charge to be cancelled. An error detector circuit is adapted to receive the output from the sample and hold circuit, and to compare the output to the starting voltage level, and to generate an error output based on the comparison. An offset clock generator circuit is adapted to receive the error output from the error detector circuit, and to generate an offset clock signal that will cause voltage at the input node of each target integrator to substantially match the starting voltage level.","In one such embodiment, the offset clock signal is capacitively coupled to the input node of each of the one or more target integrators and the replica integrator circuit. In another such embodiment, each of the one or more target integrators and the replica integrator include an integration capacitor for integrating charge at the input node, and an offset capacitor for capacitively coupling the offset clock signal to the input node, wherein the integration capacitor and the offset capacitor are substantially equal. In another such embodiment, each of the one or more target integrators and the replica integrator has an inverting input and a non-inverting input, and the input node where offset charge manifests is coupled to the inverting input.","The offset clock generator circuit may further include a filter adapted to suppress noise and limit feedback frequency response for stability. The system may further include a controller that is adapted to provide at least one of reset control signals, enable signals, and timing signals to ensure that integration performed by the replica integrator and the one or more target integrators is not adversely impacted by the system. The one or more target integrators may be included, for example, in a read-out circuit for an imaging array (such as an infrared focal plane array).","Another embodiment of the present invention provides a system for canceling offset charge of one or more target integrators. The system includes one or more target integrators each having a pre-defined starting voltage level for integration, and an input node where offset charge manifests. A replica integrator circuit is configured substantially the same as the one or more target integrators, wherein output of the replica integrator circuit represents an amount of offset charge to be cancelled for each of the one or more target integrators. An offset subtraction circuit is adapted to compare the output from the replica integrator circuit to the starting voltage level, and to generate an offset clock signal that will cause voltage at the input node of each target integrator to substantially match the starting voltage level.","In one such embodiment, the offset clock signal is capacitively coupled to the input node of each of the one or more target integrators and the replica integrator circuit. In another such embodiment, each of the one or more target integrators and the replica integrator include an integration capacitor for integrating charge at the input node, and an offset capacitor for capacitively coupling the offset clock signal to the input node, wherein the integration capacitor and the offset capacitor are substantially equal. In another such embodiment, each of the one or more target integrators and the replica integrator has an inverting input and a non-inverting input, and the input node where offset charge manifests is coupled to the inverting input.","The offset subtraction circuit may further be adapted with a filter to suppress noise and limit feedback frequency response for stability. The system may further include a controller that is adapted to provide at least one of reset control signals, enable signals, and timing signals to ensure that integration performed by the replica integrator and the one or more target integrators is not adversely impacted by the system. The one or more target integrators may be included, for example, in a read-out circuit for an imaging array or any other circuit that employs integration circuitry.","Another embodiment of the present invention provides a system for canceling offset charge of one or more target circuits (e.g., integrators, simple amplifiers, integrators operatively coupled to an imaging array), each target circuit having an input node where offset charge manifests. The system includes a replica circuit that is configured substantially the same as the one or more target circuits, wherein output of the replica circuit represents an amount of offset charge to be cancelled for each of the one or more target circuits. An offset subtraction circuit is adapted to generate a cancellation charge that is equal in magnitude and opposite in polarity to the amount of offset charge to be cancelled.","In one such embodiment, the cancellation charge is capacitively coupled to the input node of each of the one or more target circuits and the replica circuit. In another such embodiment, each of the one or more target circuits and the replica circuit has an inverting input and a non-inverting input, and the input node where offset charge manifests is coupled to the inverting input. The offset subtraction circuit may further include a filter that is adapted to suppress noise and limit feedback frequency response for stability. The system may further include one or more control circuits adapted to provide at least one of reset control signals, enable signals, and timing signals to ensure that function (e.g., integration, amplification, imaging) of the replica circuit and the one or more target circuits is not adversely impacted by the system. The one or more target circuits may be included, for example, in a read-out circuit for an imaging array.","The features and advantages described herein are not all-inclusive and, in particular, many additional features and advantages will be apparent to one of ordinary skill in the art in view of the drawings, specification, and claims. Moreover, it should be noted that the language used in the specification has been principally selected for readability and instructional purposes, and not to limit the scope of the inventive subject matter.","Embodiments of the present invention enable precise removal of offset charge associated with the reset switch of an integration circuit. The disclosed circuitry includes a reset offset subtraction circuit, which includes a \u201creplica integrator\u201d that is configured identically to the one or more integrators to be offset cancelled. The circuitry effectively operates in-band and controls post-reset integrator output voltage level through capacitive coupling of an offset charge. Minimal additional space and circuitry is needed. All of the offset charge is cancelled, without canceling any of the desired input current.","Reset Offset Subtraction Circuit",{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 2"},"In this example application, each of the target integrators (1 through N), and the replica integrator of the reset offset subtraction circuit, include an operational amplifier , which is configured with an offset capacitor (C), an integration capacitor (C), and a reset switch (Reset). The reset offset subtraction circuit also includes a sample and hold module , an error detector , an offset clock generator , and a controller . Note that the replica integrator is identically configured to each of the one or more target integrators included in the bank, including the offset capacitor (C), integration capacitor (C), op-amp , and the reset switch. Further note that the term \u201cidentical\u201d is intended to include suitable equivalents also.","The only circuitry that is added to the existing target integrator circuit design is the offset capacitor (C), with the other circuitry being part of the original design. This assumes of course, that a comparable capacitor is not already included in the original design. In one embodiment, the offset capacitor Cis substantially identical to the integration capacitor C. An offset clock signal generated by the reset offset subtraction circuit is provided to the offset capacitor of the replica integrator and to each of the offset capacitors of each target integrator, which operates to cancel the undesired offset. A bias signal (V) is also applied to both the replica integrator and to each target integrator as shown. Note that the bias signal Vcould be, for example, ground or any DC voltage, depending on the particular circuit design and component selection. Further note that no integration current (I) is applied to the replica integrator.","In the embodiment shown, the controller  is configured to provide the reset control signal to open and close the reset switches of each integrator (targets and replica) pursuant to an established integration scheme. The controller  is also configured to provide an enable S\/H signal that enables operation of the sample and hold module , and an enable offset adjust signal that enables operation of the error detector . The controller  also provides an offset timing signal to the offset clock generator . Note that the reset control, enable signals, and offset timing signal can be synchronized, such that the active integration process (performed by the replica and target integrators) is not adversely impacted by the offset cancellation process. The relationship and timing of the control, enable, and offset timing signals is discussed in more detail with reference to . Various timing and synchronization schemes will be apparent in light of this disclosure.","Note that the controller  is shown as part of the reset offset subtraction circuit in the embodiment shown in . In alternative embodiments, the functions of the controller  can be provided by other circuitry external to the reset offset subtraction circuit. The functions may be performed, for example, by a single external controller module. Alternatively, the controller functions can be provided by individual circuits, where the reset control signal is provided by one circuit, the enable S\/H signal is provided by another circuit, the enable offset adjust signal is provided by another circuit, and offset timing signal is provided by another circuit. In any case, the S\/H module , the error detector , and the offset clock generator  operate in conjunction with the replica integrator (including the offset capacitor C) to cancel offset of one or more target integrators.","In operation, the integration process is initialized by closing the reset switch (e.g., based on the reset control signal output by the controller ), which sets the input node (at each of the op-amp  inverting inputs) to the integration starting voltage level. Note that the reset switch of the replica integrator and the reset switch of the one or more target integrators are closed at the same time for this initialization. The reset switches are then simultaneously opened (based on the reset control signal output by the controller ) to begin integration, where any current then flowing into the inverting input of each target integrator is integrated onto the corresponding integration capacitor C. Each reset switch can be implemented, for example, by a field effect transistor or other suitable switching mechanism.","As previously explained, when the reset switch is in its open state, some charge is injected into the corresponding inverting input by the switch. This charge manifests as an offset from the integrator's starting voltage level. Recall that this offset can consume a large fraction of the integration range, particularly if the integration capacitor is small. An offset capacitor Cis therefore provided for each target integrator, to facilitate subtraction of this offset from the input node. Further recall that each target integrator and the replica integrator is configured with an identical offset capacitor C, which can be equivalent to the integration capacitor C. The offset clock line is connected to the other side of the offset capacitor C.","During integration reset, the offset clock that is generated by the offset clock generator  is set to an \u201coffset off level.\u201d After the reset is complete, the offset clock is set to its \u201coffset on level.\u201d  shows these levels of the offset clock signal, as well as other pertinent enable and control signals. This injection of the offset clock signal into the offset capacitor Ceffectively operates to remove the offset charge from the input node. The aim is to remove only the charge injected by the reset switch. Thus, the replica integrator is used to ensure that the correct amount of charge is removed. As previously explained, the replica integrator is an identical copy of the target integrator, except that it has nothing connected to its input; thus, it does not integrate anything other than the offset charge.","The output of the replica integrator is sampled by the sample and hold module , to remove any reset transients from the output. The error detector  receives the sampled signal and compares it to a reference voltage (V), which is the optimum starting voltage level for the integrator. The error detector  can be implemented, for example, using a conventional comparator technology (e.g., discrete comparator device or op-amp based comparator. The error detector  generates an error output which is applied to the offset clock generator circuit .","The offset clock generator circuit  is configured to increase or decrease the voltage level of the offset clock output, so that the voltage at the inverting input of each target integrator matches the reference level V. In the embodiment shown in , the polarities of the circuits are arranged so that there is negative feedback around the entire loop. A filter may be included in the clock generation circuit to suppress noise and limit the feedback frequency response for stability.",{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIG. 3","b":["210","215","220"]},"V, which is derived for Vand V, is provided by FETs M and M. The sample and hold  essentially includes field effect transistors (FETs) M, M, and M, and storage capacitors C and C. The error detector  and an offset bias generation function of the offset clock generator  are combined into one feedback amplifier circuit which includes FETs M, M, M, M, M, M, M, M, M, M, M, M, M, M, and filter capacitors C and C. Also included in the offset clock generator  of this example is a clock driver, which includes an impedance buffer, filter capacitors C and C, and FETs M, M and M. FETs M, M, M, and M each act as current sources, with M setting the bias voltage for each current source based on an external reference current (which is designated Iin ).","As can be seen, the error detector  and the offset clock generator  are combined in one feedback loop that also includes noise filtering. Numerous implementation details and alternative configurations will be apparent in light of this disclosure, and the present invention is not intended to be limited to any one particular embodiment. Implementation details such as component selection, FET geometries, power supply voltages, and the use of differential signals will vary from one application to the next.","In this particular embodiment, the sample and hold (S\/H) enable signal and the enable offset adjust signal are provided as differential signals, which can be achieved with a number of conventional techniques. For example, inverters can be used to generate complement signals of the original signals. Each pair of the complementary signals (S\/H Enableand S\/H Enable, and Enable Offset Adjustand Enable Offset Adjust) can then be provided to level shifters to provide the desired voltage levels, as necessary. Such level shifting may be used, for instance, if transferring the control, timing, and enable signals from the digital domain to the analog domain. Only the analog domain is shown here, but various other analog and\/or digital implementations will be apparent in light of this disclosure.","The offset timing signal is also provided as a differential signal, and enables the transmission gate (FETs M and M) and pull-up (FET M) of the clock generation circuit. In particular, the complementary offset timing signals (Offset Timing Signaland Offset Timing Signal) are provided to the respective gates of FETs M and M. The Offset Timing Signalis also provided to the gate of M. Thus, when the transmission gate formed by M and M is on, the pull-up M is off, and vice-versa. Note that additional logic could be added here to provide a high impedance state, where both the transmission gate and the pull-up are off.","Control and Timing",{"@attributes":{"id":"p-0040","num":"0039"},"figref":["FIG. 4","FIGS. 2 and 3","FIG. 4"],"sub":"out ","b":["210","215","215"]},"During integration reset (when the reset control is low), the offset clock that is generated by the offset clock generator  is set to an \u201coffset off level.\u201d After the reset is complete and goes high, the offset clock is set to its \u201coffset on level.\u201d This removes the undesired reset offset charge (which is substantially the same as the generated offset off level, but with opposite polarity) from the input node of the replica integrator, as well as each target integrator. The undesired offset can be seen in the replica integrator output Vjust after the reset control goes to its off position (which is high in this case), where a dip in voltage occurs at about 0.01235 seconds. This output Vis captured by the sample and hold , for post-reset processing to adjust the integrator output voltage level through capacitive coupling of the offset clock charge. The process can be repeated for each integration\/reset cycle.","Note that the offset timing signal (which is shown in , and clocks the output of the offset clock generator ) essentially has its edges aligned with the offset clock signal (shown in ) that is generated by the offset clock generator . The offset timing signal, however, will have its low and high voltage levels set accordingly (e.g., low at 0.0 VDC and high at 5.0 VDC).","The foregoing description of the embodiments of the invention has been presented for the purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise form disclosed. Many modifications and variations are possible in light of this disclosure. For example, the offset subtraction circuit described herein could also be used to cancel or otherwise remove offsets other than integrator reset charge for array applications, as long as the offsets are relatively uniform across the array.","One type of offset that could be a desirable candidate for cancellation is due to the reset level of a simple amplifier design (such as those included in an array readout circuit). Simple amplifiers have a number of virtues (e.g., low power, small area, low noise), but may not reset to the optimum level for dynamic range. In particular, a single input amplifier naturally resets about one threshold away from the power supply. By adjusting the reference bias of the amplifier, the reset level could be moved closer to the power supply, thereby increasing the dynamic range. In such an embodiment of the present invention, the replica circuit would be a copy of the simple amplifier. Just as described herein, the cancellation charge can be capacitively coupled to the amplifier's reference bias input node of the one or more target amplifiers and the replica amplifier circuit.","Another type of offset that could be removed from imaging arrays is due to the detector current, which may have components that are always present and contain no useful scene signal (generally referred to as dark current). If the output sampling occurs later in the integration and the replica integrator had a detector on it (e.g., one pixel output operatively coupled to the inverting input, so as to provide a \u201creplica background signal\u201d), then some detector dark current or other background photocurrent could also be subtracted. Numerous other applications will be apparent in light of this disclosure, where a replica circuit (e.g., integrator, amplifier, or any other circuit that has a node where offset signal accumulates) is used in conjunction with a cancellation charge generator circuit (e.g., sample and hold , error detector , offset clock generator , and controller ). The cancellation charge generated based on performance of the replica circuit can then be applied to the accumulating node of each of the one or more target circuits, so as to eliminate the offsets (or other such undesired signal) to improve circuit performance.","It is intended that the scope of the invention be limited not by this detailed description, but rather by the claims appended hereto."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":["FIG. 4","FIGS. 2 and 3"]}]},"DETDESC":[{},{}]}
