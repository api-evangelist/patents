---
title: Image acquisition system
abstract: An image acquisition system for machine vision systems decouples image acquisition from the transmission of the image to a host processor by using a programmable imager controller to selectively disable and enable the transmission of data to the host and by using a system of buffers to temporarily store image data pending allocation of memory. This enables the image acquisition system to acquire images asynchronously and to change the exposure parameters on a frame-by-frame basis without the latency associated with the allocation of memory for storage of the acquired image. The system architecture of the invention further permits interruption and resumption of image acquisition with minimal likelihood of missing data. Data throughput is further enhanced by transmitting to the host only that data corresponding to the region of interest within the image and discarding the data from outside of the region of interest at the camera stage.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07587261&OS=07587261&RS=07587261
owner: Metrovideo, Inc.
number: 07587261
owner_city: Wellesley
owner_country: US
publication_date: 20030131
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["RELATED APPLICATIONS","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DESCRIPTION OF ILLUSTRATED EMBODIMENTS"],"p":["This application is a continuation application of application Ser. No. 09\/932,275 filed on Aug. 16, 2001, now abandoned, which in turn is a continuation application of Ser. No. 08\/884,589 filed on Jun. 27, 1997, now U.S. Pat. No. 6,282,462, which claims priority to provisional application 60\/038,690, filed on Feb. 7, 1997, Expired, and provisional 60\/020,885, filed on Jun. 28, 1996, Expired. The contents of all of the aforementioned application(s) are hereby incorporated by reference.","The present invention relates to image acquisition systems, and more particularly to image acquisition systems suitable for machine vision systems that capture and process optical images.","Conventional image acquisition systems have been used for decades to acquire and process optical images. The conventional systems typically employ one or more video cameras that acquire an image and frame grabber boards that store and\/or process the image. These systems are relatively easy to connect since the components of the system are well characterized, readily understood, and result in predictable performance.","Today's modem manufacturing and industrial installations are becoming increasingly automated to increase quality and reduce costs to better compete in the global market. Consequently, these installations typically employ machine vision systems which are used to monitor production processes, position selected components, and to perform other important manufacturing tasks. There is, however, a mismatch between the requirements of modern machine vision systems and the design goals of existing imaging technology typically used with machine vision systems.","Conventional image acquisition systems are designed to provide either a continuous flow of images or a predictable flow of images at a fixed rate determined by human awareness and response times, and at the lowest possible cost. With a new frame being transmitted every 1\/60 second, missing lines and\/or frames in such a system are tolerable because they are generally unnoticed by a human viewer. The fixed rate of image capture and delivery in conventional image acquisition systems is just fast enough to seem infinitely fast or seamless to human perception. Because errors that occur during image acquisition and transfer, such as dropped lines and frames, are only presented to a viewer for 1\/60th of a second, and because the human eye acts as a time integrator, these intermittent errors are rarely perceptible to a human observer.","On the other hand, machine vision systems often make decisions based on a single still image. Because of this, machine vision systems require considerably higher resolution, contrast, and tolerance for data integrity than conventional image acquisition systems. For example, if the machine vision system is looking for normal process variations in manufactured parts, any imaging errors can result in the inappropriate rejection of a part. This leads to unnecessary part waste and an increase in the total costs of production.","Errors in an image acquisition system include imaging errors and processing errors. Processing errors, such as dropped lines and frames, arise from errors that occur as image data travels from the camera to the host computing system. Imaging errors arise in the camera itself or in the environment outside the camera. The former we refer to as sensor errors and the latter we refer to as scene errors.","Sensor errors typically arise from differences between photosensitive elements, (e.g., photosites in a charge-coupled device) that form part of the image acquisition system. As a result of these differences, a pair of photosensitive elements may respond differently to the same level of illumination. These differences arise from normal process variations in the manufacture of the photosensitive elements or from temperature differences between otherwise identical photosensitive elements.","Scene errors are those errors that arise from incorrectly illuminating a scene. Since ambient lighting conditions cannot be controlled to the same level of precision as that resolvable by a modem machine vision system, subtle variations in lighting levels or colors, due, for example, to aging of light sources, can degrade the performance of the machine vision system.","Unlike conventional image acquisition systems which obtain images either continuously or at regular intervals, machine vision systems can require images at unpredictable times. For example, in an automated inspection line, the objects to be inspected may not be spaced apart regularly enough on the conveyor belt to permit periodic image acquisition. Consequently, a machine vision system does not have the luxury of knowing, in advance, when an image is to be received.","A machine vision system should also be ready to acquire an image almost immediately upon request. For example, in the automated inspection line described above, if an object to be inspected is about to enter the camera's field of view, it is preferable that an image be acquired rapidly, before the object leaves the camera's field of view.","Because machine vision systems often have to obtain multiple images in rapid succession, a need exists to rapidly transmit image data to a processor of a host system. Prior art machine vision systems generally interrupt the host processor to obtain a starting memory address in which to place an image or portion thereof before the actual image acquisition and transfer can begin. In such systems, referred to as \u201csoftware scatter\/gather\u201d systems, the host processor plays a significant role in image acquisition and transfer. This reliance on a scarce resource such as the host processor results in latency periods during which image acquisition and transfer cannot occur because the host processor is busy performing other tasks. These latency periods of uncertain duration make it difficult, if not impossible, for a machine vision system to repeatedly acquire an image on demand. When the latency period becomes excessively long, collisions can occur in the data path as data from subsequent images arrives faster than data from previous images can be processed. This results in lost or erroneous data.","In other machine vision systems, referred to as \u201chardware scatter\/gather\u201d systems, data transfer is performed by a direct memory address technique (DMA). Although these systems do not require the assistance of the host processor to access memory, they typically require that a memory segment be dedicated to their use. The disadvantage of this method is that the dedicated memory becomes unavailable for use by other processing tasks, even when it is not being used for image transfer.","In systems of this type, data collisions, as described above, can be ameliorated by dividing the dedicated memory into two blocks. This enables the system to place an incoming image into the first memory block while processing the image in the second memory block. Once the system finishes processing the system in the second block, it can begin processing the image in the first block, thereby freeing the second block to receive another incoming image. A disadvantage of this system type is that, when used in conjunction with a multithreaded computing environment, the complexity of programming this task becomes rapidly unmanageable.","It is also desirable for modem machine vision systems to autonomously determine whether or not an image should be acquired. For example, in an inspection line, the objects to be inspected may not be spaced at regular intervals. This raises the problem of how to acquire an image only when an object to be inspected is in the camera's field of view or in a particular region within the camera's field of view.","Prior art systems attempt to solve this problem by triggering the camera with an external sensor located outside of the machine vision system. These sensors, however, are typically difficult to interface reliably with the machine vision system. Moreover, latency associated with the machine vision system can make it difficult to reliably position the object to be inspected in the correct region of the camera's field of view.","Further important constraints imposed by conventional image acquisition systems include the relatively fixed field of view, relatively fixed frequency of image capture, fixed and relatively low rate of image transfer to host computer memory (or relatively expensive transfer of image), and lack of data integrity, arising, for example, from gray scale errors due to several causes including pixel jitter and skew, or from lost data such as dropped lines and frames.","Additionally, current machine vision systems are relatively expensive to install and operate. Another drawback of these systems is that they are unable to change the form of the acquired image data in real time, in other words, between each acquired frame or shot.","Modem machine vision systems have been developed to address some of these drawbacks. One example devised to ameliorate some of these drawbacks includes the use of expensive custom application-specific circuitry to provide high fidelity and low error image acquisition. These custom systems are typically very expensive to acquire and very difficult to integrate with existing machine vision systems.","There thus exists a need in the art for an image acquisition system suitable for use with modem machine vision systems that is flexible and provides for high fidelity asynchronous image acquisition and transfer.","The image acquisition system of the present invention eliminates these and other sources of image acquisition errors by integrating most of the image acquisition components into one dedicated machine architecture. This dedicated architecture can be utilized to perform preliminary image processing operations in real-time such as correcting each acquired image for both hardware errors and scene errors, recalibrating the sensor array in real time to correct for errors due to differences between pixels or errors in scene illumination, or otherwise spatially filtering the image in real-time, all without burdening the host processor.","A system according to the invention includes an image acquisition stage for acquiring at least a region of interest from an image in response to a trigger signal. The trigger signal can incorporate exposure information for the image acquisition stage and instructions for specifying the region of interest. This information can be changed on a frame-by-frame basis, in real time and on the fly.","The system then transfers either all or part of the data representing the image to the host processor by way of a sequence of temporary buffers. These buffers enable the system to decouple the process of image acquisition from image transfer, thereby enabling the system to acquire images without having to wait for the host processor to allocate memory for storage of the system. The sequence of temporary buffers also enables a system according to the invention to interrupt the process of transmission either between images or in the middle of the image and to resume transmission with little likelihood of data loss.","The data throughput for a system according to the invention is controlled by means of a programmable imager controller which can drive the transfer of data from a CCD array or other solid state imaging device to the host processor at variable rates in response to the state of the buffers and in response to instructions from the host processor. This programmable imager controller further increases system throughput by transmitting to the host processor only data from within the region of interest and discarding data from outside the region of interest. Since data can be discarded more quickly that it can be transmitted, this increase in throughput can be substantial when the region of interest is much smaller than the overall image.","The system of the invention can also control selected system parameters during the acquisition of one or more images. These parameters include the time and duration of exposure, the particular region of interest within the field of view, the particular mode of operation of the system, and other parameters that define the framework for image acquisition and which would be obvious in light of this disclosure to one of ordinary skill in optical and electrical engineering. A significant advantage of the present invention is that these parameters can be changed in real time, between shots or frames, without sacrificing bandwidth. This feature allows the system to dynamically respond to requests during the image acquisition process.","The system also enables images to be acquired asynchronously and virtually on demand without the need to wait for the availability of system memory to store the image. The system achieves this by separating the acquisition of an image by the camera, a task of short and relatively predictable duration, from the task of transmitting the image from the camera to the host processor, a task having an unpredictable and potentially long duration. Consequently, the image capturing stage can be performed independently of the image transfer stage. When necessary, the acquired image can be stored temporarily in memory, such as in a data FIFO register, while the system waits for a memory address to place the image into. Because of this separation between image acquisition and image transfer, the system of the invention can acquire an image without the need to await a memory address in which to place the image. The system is thus not hampered by the latency associated with conventional image acquisition systems. Additionally, the system can thus process requests for an image without requiring the destination address in advance.","When the data FIFO register approaches its capacity, it can assert an interrupt to halt image acquisition as described below. This is achieved by interposing a feedback loop between a camera and the image acquisition board. This feedback loop enables the acquisition board to temporarily and immediately halt image acquisition and transfer whenever there is too much data traffic to permit the reliable transmission of data. According to one practice of the invention, data already acquired by the camera is temporarily stored in the camera throughout the duration of the interruption. By incorporating this function into the dedicated architecture, the present invention relieves the host processor from burdensome data management tasks. This provides for an increase in image fidelity (data integrity) with a corresponding decrease in the occurrence of errors when acquiring images as well as an increase in overall image throughput.","An additional feature of the present invention is that interruption of image acquisition and transfer, as described above, can occur either at the end of a frame, at the end of a line within an image, or at the end of any preselected section of an image. The flexibility achieved by permitting the transfer of image data in units smaller than the entire image enables the system to take advantage of small gaps in data traffic that it would otherwise be unable to use, as well as enables the system to rapidly acquire and transfer image data.","Another feature of the invention is that the system acquires data significantly faster than prior art systems, including hybrid conventional systems employing conventional imaging and machine vision systems. According to one practice of the invention, images can be acquired and transferred to the system's image signal processor up to 30 times faster than conventional systems, while providing for flexible, high speed control and transfer of the image data.","Unlike prior art systems in which a portion of memory is dedicated to hold the image to be processed, the system of the present invention exploits modern operating systems' ability to perform dynamic memory allocation. This permits the system to allocate only as much memory as is necessary to process an image and to allocate that memory only when it is necessary to do so and on an image-by-image basis. Once the image processing task has been completed, memory allocated to that task can be released for use in other processing tasks.","According to one aspect, the system acquires images asynchronously and independently of the host processor.","This is facilitated by the separation of image acquisition and transfer, thereby permitting acquisition to occur before memory to store the image is made available. The system is also configured to place a time-stamp on the acquired image. According to one practice, controller hardware of the host device monitors the system for a camera trigger signal, which triggers the camera. This avoids the latency associated with having the host processor monitor and time stamp the image.","The present invention also provides a structure for autonomously deciding, based on an image in the camera's field of view, whether or not to acquire an image. The system of the invention accomplishes this by designating a trigger region within the camera's field of view and processing the image from the trigger region to determine if the image in a region of interest within the camera's view should be acquired. The system processes the portion of the image within the designated trigger region independently of the host processor and at relatively high sample rates.","The foregoing control of the image acquisition process is thus controlled on an image-by-image basis in a dedicated architecture that is smaller and significantly less costly than systems heretofore known, thus dramatically reducing the overall cost of the image acquisition system. Additional features of the invention which aid in the reduction of cost include the simplification of the data paths.","The image acquisition system of the present invention includes an image acquisition element, such as a camera, for acquiring an image and a programmable control element which selectively and programmably initiates the performance of a number of selected functions by the image acquisition element. These functions can include the initiation and termination of image acquisition, the selection of a particular region of interest within the acquired image, calibration or filtering of the outputs of the photosensitive elements that form part of the image acquisition system, definition of a trigger region, or the purging of charge from the photosensitive elements. The image acquisition by the camera can also be interrupted, in real-time, such that at least a portion of the image is temporarily stored in the camera. This interruption sequence allows the image acquisition system of the invention to process any previously transferred image data in highly reliable manner.","The system can be mounted on an acquisition board that functions as an interface between the camera and a conventional host computing system. The acquisition board manages the transfer of image data between the camera and the host computing system, where the image data is ultimately processed.",{"@attributes":{"id":"p-0049","num":"0048"},"figref":"FIG. 1","b":["10","10","12","12","14","16","14","12","12"]},"Those of ordinary skill will recognize that a single acquisition board  can be used to operate a number of cameras . Conversely, a separate acquisition board  can also be used for each camera  of the acquisition.","The illustrated cameras  each include a programmable imager controller stage  which is coupled to an image capturing element . The acquisition board  preferably generates control signals which are transferred to the programmable imager controller  along communication path . The output of the camera element  is transferred to the acquisition board along data output path  for storage and\/or processing by the host system .",{"@attributes":{"id":"p-0052","num":"0051"},"figref":"FIG. 2","b":["16","14","12","12","100","106","110","116","120","124","128","132","138","142","146","12"]},"The bus  preferably interfaces and communicates with the acquisition board  and provides structure that allows for the flow of image data between the camera  and the host computing system . The term \u201cbus\u201d is intended to include any suitable data signal transmission path, and is preferably a high bandwidth data transmission channel, such as a PCI bus. The display controller  preferably communicates with both the bus  and the memory bus  to allow the controller  to display the acquired image data on the display monitor A, such as a VGA monitor, and to access stored instructions. The illustrated co-processor  is preferably coupled to both the bus  and the memory bus  and serves to direct the acquired image data. The use of this  controller, i.e. \u201cbridge chips\u201d reduces the need to interrupt the host processor  to process the image data, and thus decreases the overall processing time and increases the processing rate of the image acquisition system .","The image acquisition system  can operate, according to one practice, in response to externally applied triggers or in response to signals generated internally by selected software code stored in the memory  of the central system . Specifically, selected imaging modes of operation can be rapidly chosen by initiating a request to the system . The term \u201crapidly\u201d is intended to mean initiating the request in less than or equal to about 32 ms, and, preferably in less than or equal to about 1 ms. For example, a request can be made by the camera interface executable program, referred to as cam. exe , or by selected client software (for example an image analysis or machine vision application program), referred to herein as client.exe . The executable file  thus uses the image acquisition system  as a source of image data.","The terminology used herein is appropriate for systems installed in computers employing Microsoft's Windows 3.11 and DOS v. 6.x operating systems. When used with other operating systems, for example Windows NT or VME systems, similar terminology will apply. The structure of the software code designated by cam. exe, client. exe, and the dynamic link libraries can be easily constructed by the ordinarily skilled computer and electrical engineer by reference to the description of the operation of the image acquisition system  of this specification.","According to one practice, when the host computer loads or boots the executable program cam. exe , a selected environment is established in the host computer that the camera system employs to service requests from either a user, through the computer's keyboard and mouse, or from an autonomous executable code block, such as the machine vision program client. exe . At a minimum, the program incorporating an interrupt code (interrupt service routine) is loaded into the memory  of the host computing system . The role of the interrupt code is to rapidly notify either cam. exe  or client.exe  that an image buffer has been filled with the data it requested and is ready for viewing and\/or processing by the requester. If the program cam. exe  needs to respond directly to user requests, it calls selected dynamic link libraries (DLL's). These DLLs, such as cam. dll, are typically used to store instantaneously accessible lists of functions and resources or to allocate virtual and physical memory for image buffers located in the host computing system . Alternatively, when the program client. exe  issues requests for an image directly, it allocates sufficient buffer space in memory by making direct calls to cam.dll .","Camera Setup","In all modes of operation, either cam. exe  or client.exe  establishes the operating framework for the image acquisition system  by providing selected camera setup information, including the particular mode of camera operation, the particular region of interest, and proper exposure times, and by providing host memory setup requirements, including image buffers to receive, hold and process the image data for one or more cameras . These programs can thus be used to generate the camera instructions stored in the camera setup store  and reserved physical addresses for image data in the destination address store , as discussed further below.","As used herein the term \u201cregion of interest\u201d is intended to include a region or portion of an acquired image that is smaller in one or more spatial or axial dimensions than the entire image acquired by the image acquiring device or system. The region of interest is preferably selectable. Additionally, those of ordinary skill will recognize that the programs can establish multiple and different regions of interest which are loaded into the camera setup store  and the destination address store , as described in further detail below. These multiple regions of interest allow the system to dynamically acquire an image and process different selected portions of the entire acquired image. Additionally, these multiple regions of interest allow the system to trigger acquisition of an image from one region of interest based on the content found in another region of interest.","According to one preferred practice, the region of interest can be specified by providing the line and pixel number of the upper left corner of a rectangular region in the image and similar information for the lower right hand corner of the region. The filled image buffers established by the host operating system can be areas of contiguous virtual memory that are reserved and mapped to physical regiments in selected and variable block sizes, e.g., 512 byte to 4K byte blocks, and that have a defined initial physical memory address, denoted as memory locations -. Those of ordinary skill will appreciate that image buffers contiguous in virtual memory space may be realized by non-contiguous locations in physical memory space. It is anticipated by the teachings of the present invention that only within each physical block are physical addresses contiguous. This facilitates the asynchronous mixing of data into one DMA channel from multiple sources during multiple camera acquisitions.","All of the foregoing information is communicated to the camera , to the acquisition board  and to the host computing system  in the form of a call, in a language specified for and compatible with the image acquisition system, to a selected code module, for example, cam.dll . The selected code module responds by making API or similar calls to the operating system of the host computing system  to allocate one or more regions of contiguous virtual memory, typically in sizes ranging between 1-300K byte and larger. Each such region of contiguous virtual memory is divided into subsets, typically 14K byte blocks, that can be a size convenient for the operating system. The operating system is then queried for the physical address of the first byte in each of these subsets. The foregoing physical addresses are communicated, via API (application programming interface) or similar calls, to the camera destination address store . In a DOS\/Windows\/PCI environment, each subset is itself contiguous in physical memory. The program cam.dll  transfers this information into on-board memory, which directly controls the cameras and which can reside in, among other locations, an input-output bus  (typically a PCI bus). The beginning addresses of the image buffer physical memory block for each image buffer are then stored in a selected memory location, designated as the camera destination address store . Meanwhile, the exposure times, camera modes, and regions of interest are also loaded into the camera setup store .","Image data is transferred to the foregoing memory allocated for image buffers via direct memory address (DMA) transfers that typically do not require processing by the host processor . Hence, the host processor  need only be interrupted upon completion of an image transfer. Those of ordinary skill in computer and electrical engineering will appreciate the type of code that can be employed to perform the foregoing and following actions.","At the same time that it is transferred to host physical memory, image data can also be directed, via DMA transfer, to a display controller . A look up table (LUT)  converts pixel data in real time into a form appropriate for the host computing system  and its display controller .","Initiating Image Acquisition","With further reference to , the acquisition board  includes an external trigger interface  having a plurality of external trigger inputs  to accept signals generated by a variety of external sources, including the host system . Upon receiving an appropriate signal through the trigger input , the external trigger interface  generates trigger output signal  instructing the camera loader  which camera or array of cameras to use.","The illustrated camera loader  has multiple inputs, e.g., supports n inputs, and generates one or more camera trigger signals  that drive one or more cameras  designated by the particular input signal. The camera trigger signal  preferably includes selected camera setup information, including but not limited to the startline and endline of the region of interest (ROI), exposure time of the image to be acquired, and mode of operation. The particular mode of operation of the illustrated system  designates the operational sequence and parameters of the camera . Representative modes of operation are described in greater detail below. This camera setup information is typically communicated between the host processor  and acquisition board  by the PCI bus . The camera loader  further communicates with selected memory blocks, illustrated as camera setup storage block  and proximate register storage block , the functions of which are described in further detail below.","The host processor  initializes the image acquisition system  by storing selected setup information. This set up information includes mode of camera operation, regions of interest within the image, and exposure times. The host processor  further provides additional setup requirements for the camera . These include image buffers that a particular client uses to receive, hold and process image data. The host processor can select a particular region of interest within the image captured by a camera  by specifying the line and pixel number of the upper left corner of the rectangular region of interest, and by specifying similar information concerning the lower right-hand corner of the region of interest. The host computing system thus defines, according to simple calls, the region of interest for a selected frame. This selected region of interest can remain constant or can be changed either after each frame or after a selected number of frames.","Image Acquisition","Referring again to , the camera trigger signal  generated by the camera loader  for a particular camera  is loaded into the programmable imager controller  of that camera . The camera trigger signal  can be transmitted to the camera at any time and without the need to have a destination address already allocated for the image to be acquired. If the image is acquired before a destination address can be made available, the image data can simply wait at one or more locations on the data path, such as in a data FIFO , until a destination address becomes available, as described below.","According to the illustrated embodiment, the camera trigger signal  for a selected camera  is generated by the camera loader  in response to the instructions stored in the camera setup store  for that camera and in response to the output signal  of the proximity register store . Specifically, the camera loader  accesses the instructions stored in the camera setup store  for the selected camera  and shifts the appropriate bits to the camera. The camera trigger signal  is preferably a signal that includes: w bits designating the exposure time, x bits designating the first line of the region of interest, y bits designating the number of lines in the region of interest, and z bits designating the camera mode for this shot. The numbers w, x, y and z depend on the CCD array circuit  of the camera .","The camera trigger signal  can be different for each image acquisition. As a result, it is possible to change the contents of the camera setup store  at each frame. This enables the machine vision system to change exposure time, region of interest, or camera mode between frames. Because image acquisition can proceed independently of image transfer, a change in the contents of the camera setup store  has no appreciable impact on system performance.","The processes of image acquisition and memory allocation for the image can be performed in parallel with and substantially independently of each other. This enables the system's memory manager to generate destination addresses as system requirements dictate. Among the advantages of this feature are that it enables the system: to acquire an image almost immediately after a request for an image is issued and without the often unpredictable latency associated with waiting for a destination address; to queue several image acquisition requests; and to perform time-consuming image processing tasks, for example writing it to a disk, independently of image acquisition and transfer. Hence, image acquisition can be initiated without regard to the allocation of a destination address, which is eventually stored in memory .","In one instance, the programmable imager controller  preferably includes a programmable logic device such as a field programmable logic array circuit (FPLA) and a voltage converter for transforming selected signals into a form compatible with the remaining camera components. Those of ordinary skill in electrical engineering and circuit design will understand that the FPLA is an ASIC chip that can be designed to operate in a manner in accordance with the teachings of the present invention.","The illustrated programmable imager controller  is programmable in that the receipt of a different camera trigger signal  at any selected time, e.g., after each frame exposure or after any selected number of frame exposures, initiates a different image capturing scheme. For example, the camera  can be instructed, via the programmable imager controller , to transmit a different region of interest after each frame. This provides for a relatively simple method of dynamically controlling the region of interest and exposure without requiring the use of complex image capturing and processing circuitry. Furthermore, this programming is performed relatively rapidly. For example, in less than about 12 \u03bcs and preferably less than about 1 \u03bcs, the programmable imager controller  can generate a new set of instructions to the CCD array circuit .","According to a preferred practice, the arrival of the last bit in the programmable imager controller  arms the camera . Subsequently, the camera loader  generates a camera trigger signal  that is transferred to the image capturing portion of the camera , which includes a CCD array circuit , an image processor , and an oscillator  local to the camera. The illustrated camera oscillator  preferably transmits a camera timing signal B to the programmable imager controller  and to the acquisition board . This camera timing signal B synchronizes the acquisition board  with the camera  and with the host computing system . Those of ordinary skill in computer and electrical engineering will recognize that the camera trigger signals can be loaded in other ways.","Once the programmable imager controller  receives the camera trigger signal , the CCD array circuit  initiates the exposure process according to the teachings of the present invention. This exposure process preferably lasts for a selected exposure period, as defined by the selected exposure bits which comprise part of the camera trigger signal  generated by the camera loader .","The system  runs kernel level software which is responsive to the presence of the camera trigger signal  or a trigger signal on the external trigger inputs . Upon the occurrence of either of these signals, the kernel level software requests the system time from the host processor . This request is set to have priority sufficiently high to ensure negligible latency in the response of the host processor . The system time is then made available for associating with the image data acquired in response to the trigger signal.","Transmitting the Acquired Image Out of a CCD Array","The programmable imager controller  receives a camera trigger signal  representative of selected image capturing parameters. This signal is received by the CCD array circuit . The receipt of this trigger signal initiates a sequence of signals for the control of a solid state imager such as a CCD array. The mechanism used by the CCD array to deliver an image does not affect the operation of the invention. The illustrated CCD array circuit  in the preferred embodiment is an interline transfer CCD which includes a CCD sensor array having a number of photosites corresponding to a selected number of pixel locations and a progressive scan chip that provides for the shifting of acquired optical data into a vertical array of registers. For example, if the camera is designed for 640\u00d7480 resolution, then there exists a photosite array of 640 columns and 480 rows of photosites, i.e. a photosite behind each pixel. Those of ordinary skill will appreciate that the CCD array functions as an integrator of light over time, and need not be described in further detail herein.","Referring to , in an interline transfer CCD, each photosite  accumulates charge corresponding to that portion of the image to which it is exposed. At the expiration of the exposure time and in response to the imager controller , each photosite  transfers its stored charge to a shadow register in a vertical array of registers  associated with the column of photosites. This transfer occurs simultaneously for all photosites in the array. Although  shows only two columns of photosites and two vertical arrays of registers, those of ordinary skill will appreciate that for a 640\u00d7480 resolution there can exist 640 vertical registers.","Referring to , in a frame transfer CCD, each photosite accumulates charge corresponding to that portion of the image to which it is exposed. At the expiration of the exposure time and in response to the imaging controller , each photosite transfers its stored charge to an adjacent photosite . The photosite at the edge of the CCD array transfers its charge to the topmost register in the vertical array of registers . This procedure is repeated until the contents of the topmost photosite in a column of photosites  has been shifted into the topmost register in the vertical array of registers .","It is apparent that the net result in both the frame transfer CCD of  and the interline transfer CCD of  is identical, namely a vertical array of registers  in which each register contains a charge corresponding to the charge held by a corresponding photosite.","The CCD array circuit  can further include a horizontal array of registers  having as many registers as there are vertical arrays of registers. Hence, for 640\u00d7480 resolution as in the example above, the horizontal array of registers  would include 640 registers. The registers comprising the horizontal array of registers preferably communicate with the illustrated substrate surface . Although only one horizontal array of registers is illustrated in the drawing, those of ordinary skill will appreciate that a number of horizontal arrays of registers can be used.","With further reference to , once the image has been acquired by the camera and the charge associated with that image has been transferred to the vertical arrays of registers, the programmable imager controller  begins shifting the image data stored within the vertical arrays of registers  into the vertical array of registers . For a 640\u00d7480 image, the horizontal array of registers be horizontally shifted 640 times before the image transfer is completed.","In a conventional machine vision system acquiring an m\u00d7n image, at the end of each of the m shifts, the system  cannot decide whether the current line of registers corresponds to a line of the image within the region of interest. As a result, all the contents of all the registers are transmitted to the acquisition board for further processing, regardless of whether or not the contents of the registers correspond to a line above or below the region of interest. Typically, it takes 50 to 100 times longer to discard the contents of the n registers than it does to shift a row from the n vertical arrays of registers into the n registers in the horizontal array of registers. As a result, in conventional systems, the rate at which an image can be transferred is limited by the rate at which the horizontal array of registers can be operated. Because of this, conventional systems fail to exploit the speed with which multiple lines of an image can be shifted into the horizontal array of registers.","In the system  of the present invention, at the end of each of the m shifts, the system can decide whether the contents of the n registers correspond to a line of the image within the region of interest. If they do, the contents of the n registers are transmitted to the acquisition board for further processing just as they were in the conventional system. However, if the contents of the n registers do not correspond to a line of the image within the region of interest, the n registers are quickly overwritten by the next row of n registers from the n vertical arrays of registers. Any excess charge either simply \u201cspills\u201d into the substrate  with which, as set forth above, the registers are in communication or is removed in one shift through the horizontal register. As a result, the horizontal array of registers only has to perform the slow process of transferring data to the acquisition board when a line from the region of interest has actually been loaded into it. In this way, the present invention is able to exploit the speed with which charge from the contents of the vertical array of registers can be transferred to the horizontal array of registers.","The vertical array of registers  is shifted until the line of information located immediately before the first line of the region of interest, as defined by the control bits generated by the camera loader , is placed in the horizontal register . The next line is then shifted vertically down, and then clocked horizontally out of the horizontal register, to remove all charge therefrom.","The camera trigger signal  also includes the ending line of the region of interest. Thus, the image data associated with each line of the region of interest is clocked into the horizontal register  and then read out. This information is then transmitted to the image processor , as denoted by CCD array output signal  and as illustrated in . The image processor  conditions the CCD array output signal  prior to transfer to the acquisition board . The image processor  is well characterized and known in the art and need not be described further herein.","The remaining image data, if any, associated with the portion of the image outside the region of interest is then shifted out of the horizontal and vertical arrays of registers , , and discarded. This is done by rapidly shifting the data from the array of vertical registers  into the array of horizontal registers .","In addition to the method of fast vertical shifting through lines outside the region of interest, further acceleration is achieved by trading vertical resolution for speed within the region of interest. The mode word z above includes the number of adjacent lines to be combined before each reading of the horizontal register during transfer of data within the region of interest. By this method two or more vertically adjacent pixels are added together in the horizontal register and read out as one data value.","Operation of the Programmable Imager Controller",{"@attributes":{"id":"p-0087","num":"0086"},"figref":"FIGS. 4 and 5","b":["20","16","44","20","79","58","58","20","1","2","3","1","2","1","2","60","60","152","156","160","152","152","152","160","156","152","160"]},"The output signals V-V cause the vertical driver  to drive or control the vertical shifting of the vertical array of registers . The signal SD initiates the purging of charge from the sensor array, as described in further detail below. The output signals H and H drive the horizontal array of registers  during operation.","The operation and use of the illustrated image processor , CCD power regulator , vertical driver , and CCD sensor array would be obvious to the ordinary skilled artisan in the field of electrical engineering.","With reference to , the programmable imager controller  of the present invention can be characterized by an illustrated state machine  connected to a number of serially connected registers -, which load the camera trigger signals  generated by the camera loader . The programmable imager controller  also includes a shift-in finished counter , and a shot-finished counter , a vertical control generator , a horizontal control generator , and a CCD image processor signal generator .",{"@attributes":{"id":"p-0091","num":"0090"},"figref":["FIG. 7","FIG. 5"],"b":["20","20","188","190","176","20","176","44","166","181","180","194","196","172","198","172","172","200","166","181","202","204","166","181","206"]},"According to step  the shot-finished counter clock  receives a vertical shift signal. According to step , the state machine  generates logical highs along paths C and D.","In accordance with step , the ROI (region of interest) line counter  is vertically shifted until this counter is zero, as illustrated by steps  and . At this time, the state machine  sets the vertical clock's speed to a logical low along path D. This is received by the vertical control generator  (step ). The ROI last line counter  is likewise vertically shifted until the counter reaches zero, in accordance with steps  and . The state machine  then generates a logical high along path D. The illustrated system then checks to see if the shot-finished counter  is equal to zero. If so, the system produces logical lows along paths C and D, as illustrated by steps  and . The programmable imager controller  then reloads the shot-finished counter, in accordance with step . Those of ordinary skill will recognize that the block diagram schematic depiction of the programmable imager controller  in conjunction with the flow chart diagram illustrating the operation thereof effectuate the vertical and horizontal clocking of the registers of the CCD sensor array, as well as effectuate the purging of charge from the photosites of the CCD array.",{"@attributes":{"id":"p-0094","num":"0093"},"figref":"FIG. 6"},"During image acquisition, the signals SIEN and XFREN cooperate to enable image exposure. SIEN drops to logical 0 to arm the camera for exposure. Note that SIEN does not trigger the exposure. Exposure begins when XFREN transitions from a logical 0 to a logical 1 and ends when XFREN returns to its idle state at logical 0. Upon termination of exposure, SIEN reverts back to a logical 1, thereby disarming the camera.","During image transmission, VCKEN transitions to a logical 1 to arm the transmission of data from the camera to the acquisition board. For lines of image data forming part of the region of interest, the transmission alternates between a fast shift step during which image data is vertically shifted one line at a time from the vertical array of registers to the horizontal array of registers and a readout step during which the line of image data is shifted out of the horizontal array. VCKEN remains at a logical 1 throughout both of these steps.","Switching between the fast shift step and the slower readout step is controlled by the signals VCKSP and HCKEN. During the fast shift step, VCKSP is set to logical 1. VCKSP drops to logical 0 to arm the readout step. Note that VCKSP does not actually initiate the readout step. Readout begins when HCKEN drops to a logical 0 and ends when HCKEN returns to a logical 1.","Allocation of Memory for Storage of Acquired Image","As set forth above, the process of allocating memory for storage of an acquired image can occur independently of and concurrent with image acquisition. This memory allocation method, which will be referred to as \u201chardware scatter\/gather,\u201d makes use of a modern operating system's ability to perform dynamic memory allocation.","In hardware scatter\/gather systems, the system's memory manager, upon request of a software application, will allocate memory for image storage. Once the memory is no longer needed for image storage, the memory manager can return the allocated memory to a common memory pool for use in subsequent computing tasks. In this way, the system can allocate a different memory address to each frame and can allocate only the amount of memory necessary at any instant. Since memory allocation can proceed concurrently with image acquisition, throughput of the system is improved and acquisition of an image can be triggered with a minimum of latency.","Dynamic memory allocation algorithms are available in many modern operating systems. The use of such dynamic memory allocation is thus well within the capability of one having ordinary skill in the art of computer engineering.","Pixel Sensitivity Correction","With reference to , A, and B, according to an optional feature of the invention, the image processor output signal  is transferred to a pixel sensitivity correction module  which multiplies the output corresponding to each photosite  by a predetermined pixel sensitivity factor. This pixel sensitivity factor can compensate for the differing response characteristics of each photosite  or for errors caused by the inability to precisely control the scene illumination. Additionally, the multiplication of the output corresponding to each photosite  by its corresponding pixel sensitivity factor can result in spatial filtering of the acquired image. In this way, the pixel sensitivity correction module  can perform a preliminary image processing step in real time without interrupting the host processor . Since the preliminary image processing step performed by the pixel sensitivity correction module  would otherwise have to be performed by the host processor , the presence of the pixel sensitivity correction module  saves overall processing time and increases the throughput of the system.","Referring to , the pixel sensitivity correction module  comprises memory that stores a pixel sensitivity factor storage table , which includes the pixel sensitivity factors and a multiplier . Additionally, the pixel sensitivity correction module  can include a counter  which rolls over at the number of pixels in the region of interest.","In the illustrated embodiment, the pixel sensitivity correction module  is connected to the analog side of the A\/D converter . However, the pixel sensitivity correction module  can also be connected to the digital side of the A\/D converter , as shown in .","The output of the pixel sensitivity correction module is connected to the analog input of an analog-to-digital (A\/D) converter  which converts the analog output signal of the camera to a digital signal. The construction of such converters is well known in the art of electrical engineering and suitable converters are commercially available. In one practice of the invention, the A\/D converter  can be a component of the camera . In such a case, the pixel sensitivity correction module would be connected to the digital side of the AID converter  as shown in .","In operation, the pixel sensitivity correction module  accepts data from either the image processor  as shown in  or the digital side of the A\/D converter  as shown in . In either case, the pixel sensitivity correction module uses its counter  to determine which entry from the pixel sensitivity factor storage table  corresponds to the pixel currently at the input to the pixel sensitivity correction module . The corresponding entry from this storage table is then made available to the multiplier  which multiplies it by the value of the pixel currently at the input to the pixel sensitivity correction module . The product is then transmitted from the multiplier  to the analog input of the A\/D converter  as shown in  and in  or to the data FIFO  as shown in . In most embodiments, an adder precedes the multiplier . This adder modifies the pixel value by a unique offset correction stored in parallel with the sensitivity correction factors.","Data Transmission From the Data FIFO to the Host Computing System","Each camera  in the illustrated system  has associated with it a data FIFO  in which image data accumulates as it arrives from the camera . This data FIFO  is periodically emptied by transmitting the accumulated data stored within it to the memory location allocated for that camera , the starting physical address and extent of which are stored in the destination address store . The data FIFO  is generally emptied when the amount of accumulated data reaches some data FIFO threshold. The data FIFO  can be emptied of accumulated data at times independent of the times at which data arrives at the data FIFO. For this reason, the data FIFO makes possible the asynchronous transfer of data between the camera  and the host computing system . As used herein, the term \u201cdata FIFO\u201d is intended to include contiguous and non-contiguous memory and registers, including FIFO and other memory types. The memory or register can form part of the memory of the host device, or can be implemented in SRAM, DRAM, FLASH, or remote drives, or on other memory associated with a dedicated electrical circuit used in conjunction with the camera  and the host computing system  of the invention.","This occurs when the acquisition board  performs a DMA (direct memory address) transfer of the data to the address locations defined in the camera destination address store . The camera destination store  is preferably pre-loaded with an appropriate address definitions by the host processor  of the host computing system . The choice of this data FIFO threshold is important for the efficient and economical functioning of the system. If the data FIFO threshold is chosen too high, it becomes necessary to use data FIFO's having sufficient capacity to store the data. Such high capacity data FIFO's can be prohibitively expensive. If, on the other hand, the data FIFO threshold is too low, the system  will have to frequently access each FIFO, retrieving only a small amount of data therefrom. This is an inefficient use of system resources.","In the illustrated embodiment, the image acquisition performed by the camera  can be conveniently interrupted between the end of one line of the image and the beginning of the next line. Thus, a convenient data FIFO threshold is a single line of the image. However, the invention is not restricted to the use of a single line of the image as the data FIFO threshold.","The transmission of image data from the data FIFO  to the host memory  proceeds until the last line of data corresponding to the selected region of interest has been transmitted. The accumulated data retrieved from the data FIFO  is transferred to the PCI bus  through the bus interface  and then transferred through the  manger to host memory, significantly reducing the number of times the host processor  is interrupted, thus increasing the processing speed and efficiency of the overall system . The co-processor  also communicates with the memory bus . Prior systems utilize the host processor  to perform each data transfer thereby requiring that the processor be interrupted for each data transfer. The present invention overcomes this drawback by using DMA to move relatively large blocks of image data, thereby significantly reducing the number of host processor interrupts. According to a preferred practice, the  manager  is interrupted during acquisition of the region of interest. The software stored in the host computing system, e.g., cam. dll, calculates the number of pixels received from the region of interest and transmits the trigger threshold parameters to the proximity evaluator . The parameters transmitted to the proximity evaluator  preferably define a summary statistic for a portion of the region of interest whose values are monitored to determine when the object whose image is to be captured is present in the camera's field of view. The pixel value contained within proximity evaluator  is then compared with a preselected value stored in the proximity register store . When this value is reached, the proximity evaluator  generates a proximity evaluator output signal A that is transferred to the camera loader . In response, the camera loader generates another set of instructions which are transferred to the programmable imager controller .","Interruption of Data Transfer","A significant advantage of the image acquisition system  of the invention is that it compensates for the unpredictable delays in transferring image data from the camera  through the acquisition board  to the memory  of the host computer. This is accomplished by the real-time interruption, for a selected period of time, of data transmission by each camera, before data path overflow occurs. Any data already acquired by the camera  but not yet transmitted to the acquisition board  is stored in the camera's own storage facility, e.g., in the vertical array of registers , for the duration of the interruption period. This provides for a cost-effective method of storing the untransferred portion of an image.","Data transmission from the camera  can be interrupted as frequently as necessary. Moreover, interruption can occur not only between frames but at the conclusion of transmission of any preselected subset of the frame. For example, according to one practice, interruption can occur between the end of one line and the beginning of the next line. This is advantageous since data traffic on the host computing system  is an unpredictable function of all the activity in the system, much of which is often unrelated to the transfer of image data. Systems lacking a reliable method of managing data traffic can fail to provide the high fidelity data transmission required by machine vision and other image processing systems. For example, prior systems are known to randomly drop lines or even large portions of a frame of image data. In machine vision applications, this loss of image data can result in improper functioning of the system.","With further reference to , while the acquisition board  is performing this DMA data transfer, additional image data continues to be read into the data FIFO . This data is bundled together and transferred to the next address location unless other traffic on the host computer's I\/O bus  delays this transfer. In the event that bus traffic prevents the transfer long enough for more than an arbitrarily large fraction of the data FIFO to be filled, a data FIFO status bit  is asserted and transmitted to the camera . If the data FIFO status bit  is received by the programnable imager controller , the programmable imager controller  interrupts data transfer by interrupting the next vertical shifting of data into the vertical array of registers  and, optionally, by interrupting the read-out of image data from the horizontal array of registers . This interruption is advantageous since it ensures that no amount of acquired optical data is lost, e.g., a dropped line or frame, due to data traffic in the host computing system. The data FIFO status bit  provides for a feedback loop between the acquisition board  and the programmable imager controller  for sensing data overflow. In response to this interruption, the camera  retains the data within the CCD vertical registers  for as long as necessary for the host computing system  to resume accepting DMA transfers. This feedback process results in a highly reliable and cost effective image acquisition system in which the acquisition hardware itself is used to temporarily store the acquired image data. Furthermore, through this interruption feature and its associated feedback loop, the invention maintains the integrity of the acquired data and nearly eliminates the loss or corruption of data due to unpredictable latency periods in performing DMA transfers.","A transfer-complete interrupt is communicated via the host to the client executable when the programmable imager controller  signals that all pixels from the region of interest have left the camera head , and the value of FIFO status indicates that the Data FIFO is empty. This interrupt is preferably generated after the last byte of image data has been flushed through the system.","Purging the CCD Array","After the transfer gate of the CCD array is restored to its normal status, the programmable imager controller  sends a continuing set of pulses to the CCD array circuit  to purge the photosites of any accumulating charge until the next exposure. This ensures that unwanted optical data is neither stored nor processed by the acquisition system . This purging process preferably continues in parallel with other operations until the next exposure command is generated by the camera loader  the camera is operating in pipelined exposure mode.","Referring to , to purge the CCD array, the programmable imager controller  transmits the signal SD to the vertical driver . This causes the vertical driver  to rapidly shift the contents of the vertical array of shift registers  into the horizontal array of shift registers . This rate at which data is shifted from the vertical array of shift registers  into the horizontal array of shift registers  is typically much faster than the rate at which the horizontal array of shift registers can be shifted horizontally. However, since purging occurs only when the data in the vertical array of shift registers is of not interest, the corruption of data in the horizontal array of registers is unimportant.","Transmission From the VGA FIFO to the Video Display","The digital data signal  of the A\/D converter  is also transferred to a display FIFO . The display FIFO  stores the image data for subsequent processing and display on a display monitor (not shown). The digital data signal  from by the A\/D converter  is converted to a signal suitable for the display monitor by the lookup table (LUT) . The destination address for the data stored in the display FIFO  is stored in the display destination address store . The address store holds the storage address of the memory location to which the acquired data is to be transferred. As used herein, the term \u201cdisplay FIFO\u201d is intended to include any appropriate memory location that can store data in selected byte sizes.","Another advantage of the present invention is that it does not use phased lock loops. Phase locked loops are prone to timing errors which can result in pixel jitter and skew. Consequently, the image acquisition system of the present invention reduces pixel jitter substantially to zero. Moreover, the absence of phase locked loops simplifies the data path and reduces system cost.","Modes of Operation","The image acquisition system of the present invention has several modes of operation. According to a triggering mode, the image acquisition system can be externally triggered. This can occur when a trigger from machinery external to both the camera  and the host computing system  sends a signal (typically a signal having an edge) to an external trigger interface  having n inputs, one for each of the cameras connected to the system. The arrival of the pulse edge on one of the external trigger inputs  triggers the camera loader  to generate and to transfer a camera trigger signal  to the camera  designated by the particular external trigger input . The camera trigger signal  is then transferred to the programmable imager controller  for the selected camera .","At the expiration of the preselected exposure time, the programmable imager controller  initiates a charge transfer from the photosites  of the CCD array circuit  to its vertical array of registers . The image data representative of the region of interest is then clocked out of the vertical array of registers  and into the horizontal array of registers . Image data from outside the region of interest is clocked out of the vertical registers and into the horizontal array of registers  at speeds significantly greater than the speed at which data can be clocked out of the horizontal register. This selectively fast \u201cdumping\u201d of unwanted image data allows the system  to access and to obtain relatively quickly the image data corresponding to the region of interest. The acquired image data that results from overwriting the data in the horizontal array of registers is ignored.","After the transfer gate of the programmable imager controller  is restored to its normal status, the imager controller transfers a set of pulses to the CCD array circuit  that causes the CCD to continuously extract charge building up in the photosites of the array. This process preferably continues in parallel with other operations until the exposure for the next image begins.","For the number of lines in the region of interest, the programmable imager controller  drives the CCD array circuit  at a rate that provides uncorrupted image data to the computing host system . The image data is conditioned in the camera  by the image processor  after which it is transferred to the acquisition board . The acquisition board  can include a pixel sensitivity correction module  for multiplying each pixel of the image by a predetermined pixel sensitivity factor and collects the resulting image data in the data FIFO  until the amount of accumulated data reaches a threshold. The acquisition board , in conjunction with the host computing system , then performs a DMA transfer (a data burst) of the accumulated data to the address defined in the camera destination store . These addresses preferably correspond to the first physical block of memory of the currently specified image buffer. Data continues to be read into the data FIFO  even during the DMA transfer.","When the data in the data FIFO  again accumulates past the threshold, another DMA transfer is made to the next starting address, unless bus loading by other data traffic on the host computer's I\/O bus delays this transfer. In the event that bus traffic prevents the transfer of data long enough for more than half of the data FIFO to be filled, the data FIFO status bit is asserted. When this occurs, the data FIFO's associated camera suspends data acquisition and transmission and holds any already acquired data within the vertical array of registers  of the CCD until the host computer can resume accepting DMA transfers. This process proceeds until the last line of the region of interest is transmitted to the memory of the host computing system .","When the last line of the region of interest is read or shifted out of the horizontal register, the programmable imager controller  generates a \u201cfast shift\u201d signal which instructs the CCD array  to dump all remaining data associated with the originally acquired image. This data purge is accomplished in the manner described above. At this point preferably all of the vertical array of shift registers  are free of charge. All of the photosites  are also preferably empty since the timing generator  pulses the CCD array  such that the array removes any charge from the photosites . In this way, the camera  is ready to receive another image acquisition command.","Once all DMA transfers of image data are completed, the host computing system  responds to the controller's  activation of one of the interrupt lines on the host's I\/O bus to trigger the processing of the interrupt code, i.e. cam. V\u00d7D , that was loaded by the cam.exe program  at boot time. The interrupt code  makes a call-back to memory maintained by cam.dll  that stores the handle of the process that client.exe (or cam.exe) has most recently designated to receive notice that a particular image buffer has been filled with new data.","According to another mode of operation referred to as \u201cimmediate mode,\u201d, the image acquisition system of the invention can be used to accommodate both image analysis and machine vision applications. In this mode of operation, data resulting from processing an earlier image dictates the next action to be taken.","Accordingly, in this mode, the acquisition board  waits for a command from the host to be written before initiating an image acquisition and processing cycle similar to that described above. Either client.exe  or cam.exe  makes a call to cam.dll  to have the command transmitted. The arrival of this command causes the camera loader  to transmit the camera trigger signal  containing information from the camera setup store  to the particular camera designated by that byte. The remaining steps of image acquisition and transfer proceed as described above.","According to still another mode of operation, images can be taken at fixed time intervals from a selected camera. These time intervals to selected and can be any value greater than or equal to the minimum time compatible with the selected exposure time and the time required to transfer the region of interest. This mode of operation is identical to that described immediately above with the exception that the trigger for initiating image acquisition by the selected camera is an associated timer forming part of the camera loader .","In this mode, either cam.exe  or client.exe  makes a call to cam.dll  that sends a command to the host computing system  and\/or the acquisition board . This command includes a particular target camera and a data word used to set the associated timer in the camera loader . Every time the timer for the selected camera times out, the camera loader  sends a camera trigger signal  to begin acquisition by the selected camera.","In response, an image is returned from the selected camera  and transferred to host memory , each time that the timer associated with that camera times out.","According to yet another mode of operation, the image acquisition system provides for continuous image acquisition at a rate constrained only by the size of the region of interest and the exposure time. This mode begins with a request by cam.exe  or client.exe  that particular camera setup information be sent from the camera setup store  to a particular camera  via the host interface of the acquisition board . The camera setup information causes the camera  to initiate an exposure and readout of image data, as set forth above in relation to the description associated with . The camera's response in this mode differs in that after exposure is complete, the programmable imager controller  does not immediately pulse the CCD array  to clear the photosites of charge.","According to one preferred practice, if cam.dll  calculates that an exposure time longer than the readout time for the region of interest, then the camera setup information contained in the camera trigger signal  causes the programmable imager controller  to begin the next exposure immediately after the transfer of the image data. The foregoing purging of charge from the photosites does not occur since the next exposure taken by the camera  continues while the vertical array of registers  containing the image data from the previous exposure is read into the horizontal array of registers . The acquisition of additional frames continues beyond the end of the readout of the previously acquired data, until the appropriate exposure time is reached. At this time, the timing generator  commands a \u201cframe transfer,\u201d and begins both another exposure and another readout. The process repeats until new camera setup information is transmitted to the camera  from the camera setup store .","If, on the other hand, cam.dll  calculates a readout time for the region of interest longer than the exposure time, then the camera setup information contained in the camera trigger signal  causes the programmable imager controller  to begin purging charge from the photosites after a frame transfer and to continue to purge charge for a time interval as long as the excess of the readout-time over exposure-time. When the image transfer is completed, the programmable imager controller  initiates another \u201cframe transfer,\u201d resumes charge purging, and begins another readout. This process continues until new camera setup information is transmitted from the camera setup store  to the camera .","In the event that FIFO status signal  is asserted for long enough to substantially affect the exposure during a cycle, the programmable imager controller  terminates the readout of image data for that cycle. Readout resumes at the beginning of the region of interest for the data then in the photosite region.","According to still another mode of operation, the system  can recognize when a subject of interest is within a triggering region  in the camera's field of view as shown in . Upon recognizing that a subject of interest has entered the triggering region , the system autonomously triggers the capture of a region of interest , also shown in , within the cameras field of view and transmits the image data corresponding to that region of interest to the system's memory and\/or to the system's display. The size and location of the triggering region  is independent of the size and location of the region of interest . This mode greatly facilitates automated image processing by allowing the user or client software to adaptively control, based on the presence of an object in the field of view, when image acquisition will occur.","This mode of operation is similar to the immediately preceding mode. Generally, the camera trigger signal  will include one or more thresholds which will be used by the acquisition board to determine whether an image of the region of interest should be acquired. These thresholds are previously calculated by cam.dll  and loaded into the camera setup store . In addition, the camera trigger signal  can contain information necessary to define a triggering region in a manner similar to that used and already described for defining the region of interest.","In this mode, the trigger region is repeatedly captured and transmitted to the acquisition board  according to the procedure identified above for transmitting image data to the acquisition board. However, rather than being routed, as in the other modes, to the data FIFO , image data from the triggering region is sent to the proximity evaluator  which accumulates the values of the pixels arriving from the triggering region. Upon completion of the transfer of the trigger region for a given frame, the summary statistics of the pixels from the trigger region, now stored in the proximity evaluator , is used to determine whether the image from the region of interest should be captured. If the system determines that the accumulated value is such that the image from the region of interest should be captured, then that image is routed to the data FIFO  as described earlier. If, on the other hand, the system determines that the accumulated value is such that no image from the region of interest should be captured, then another trigger region is captured, accumulated and compared.","Whether or not to acquire an image from the region of interest  based on the image in the trigger region  can depend on the sum of the values of the pixels in the trigger region or on the deviation of the values of the pixels in the trigger region.","In one implementation of this mode, whether or not an image from the region of interest is captured can depend on whether the accumulated value of the pixels in the trigger region is above or below a threshold. In a second implementation of this mode, there can be n thresholds and the capture of an image from the region of interest can be conditioned on which of the n+1 intervals defined by the n thresholds the accumulated value of the pixels from the trigger region falls into. In a third implementation of this mode, the capture of an image from the region of interest can be conditioned on whether or not the deviation of the summary statistics of the pixels from the trigger region from some norm falls above or below a programmed deviation threshold. Further implementations of this mode can be obtained by various boolean combinations of the above conditions.","The acquisition of an image from a region of interest can also be conditioned on the satisfaction of a-temporal condition. For example, the system can be made to acquire an image from the region of interest only when the time interval between the proposed acquisition and the last acquisition is in excess of some temporal threshold. A temporal condition such as this can be combined with the conditions on accumulated pixel values and deviations as outlined above. Absent such a feature, an extended and homogenous object slowly traversing the camera's field of view could result in multiple exposures of the same object.","In yet another mode of operation, an image from one camera operating in the mode immediately above can trigger image acquisition and transfer by another camera connected to the system.","In yet another mode of operation, the camera loader generates outputs, synchronized to each camera, to trigger eternal illumination systems such as flash units.","It will thus be seen that the invention efficiently attains the objects set forth above, among those made apparent from the preceding description. Since certain changes may be made in the above constructions without departing from the scope of the invention, it is intended that all matter contained in the above description or shown in the accompanying, drawings be interpreted as illustrative and not in a limiting sense.","It is also to be understood that the following claims are to cover all generic and specific features of the invention described herein, and all statements of the scope of the invention which, as a matter of language, might be said to fall therebetween."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The foregoing and other objects, features and advantages of the invention will be apparent from the following description and the accompanying drawings in which like reference characters refer to the same parts throughout the different views.",{"@attributes":{"id":"p-0039","num":"0038"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0040","num":"0039"},"figref":["FIG. 2","FIG. 1"]},{"@attributes":{"id":"p-0041","num":"0040"},"figref":["FIG. 3A-3B","FIG. 1"]},{"@attributes":{"id":"p-0042","num":"0041"},"figref":["FIG. 4","FIG. 1"]},{"@attributes":{"id":"p-0043","num":"0042"},"figref":["FIG. 5","FIG. 2"]},{"@attributes":{"id":"p-0044","num":"0043"},"figref":["FIG. 6","FIG. 5"]},{"@attributes":{"id":"p-0045","num":"0044"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0046","num":"0045"},"figref":"FIG. 8A"},{"@attributes":{"id":"p-0047","num":"0046"},"figref":["FIG. 8B","FIG. 1"]},{"@attributes":{"id":"p-0048","num":"0047"},"figref":"FIG. 9"}]},"DETDESC":[{},{}]}
