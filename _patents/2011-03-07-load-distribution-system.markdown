---
title: Load distribution system
abstract: A load distribution system for allocating a job to one of a plurality of arithmetic devices includes a temperature data acquirer, a candidate selector, and a job allocator. The temperature data acquirer acquires temperature data indicating temperature of each of the plurality of arithmetic devices. The candidate selector selects at least one of the plurality of arithmetic devices as a candidate for a device to which the job is to be allocated. The job allocator allocates the job to the selected candidate.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09152472&OS=09152472&RS=09152472
owner: FUJITSU LIMITED
number: 09152472
owner_city: Kawasaki
owner_country: JP
publication_date: 20110307
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATION","FIELD","BACKGROUND","SUMMARY","DESCRIPTION OF EMBODIMENTS"],"p":["This application is based upon and claims the benefit of priority of the prior Japanese Patent Application No. 2010-060389, filed on Mar. 17, 2010, the entire contents of which are incorporated herein by reference.","The embodiments discussed herein are related to a load distribution.","In a client-server system including a plurality of servers, a request which is given from a client to a server which is an arithmetic device for processing a job is allocated to one of the plurality of servers by a load balancer that functions as load distribution means. That is, a job which has been designated by a user of the client is allocated to one of the servers. Job allocation is performed in accordance with a previously set load distribution algorithm. The load distribution algorithms includes a round robin algorithm in which a server to which a job is to be allocated is selected in order, an algorithm in which a server which has the smallest number of in-process connections is selected, and an algorithm in which a server which responds first is selected.","In various systems including the client-server system, a reduction of power consumption is now being promoted. In order to attain power saving, for example, such a technique is proposed that only when load is lower than a threshold value in a computer system including a plurality of central processing units (CPUs), a CPU which is low in throughput but is low in power consumption is selected to be used. In addition, such a technique is also proposed that a task is scheduled to two processors of different power efficiencies so as to minimize the power consumption.","According to an aspect of the present invention, provided is a load distribution system for allocating a job to one of a plurality of arithmetic devices. The load distribution system includes a temperature data acquirer, a candidate selector, and a job allocator. The temperature data acquirer acquires temperature data indicating temperature of each of the plurality of arithmetic devices. The candidate selector selects at least one of the plurality of arithmetic devices as a candidate for a device to which the job is to be allocated. The job allocator allocates the job to the selected candidate.","The object and advantages of the invention will be realized and attained by means of the elements and combinations particularly pointed out in the claims. It is to be understood that both the foregoing general discussion and the following detailed discussion are exemplary and explanatory and are not restrictive of the invention, as claimed.","Power consumption of an arithmetic device processing a job allocated to the arithmetic device changes depending on the temperature of the arithmetic device at that point of time. In general, the power consumption increases as the temperature increases from normal temperature. However, in existing systems, jobs are allocated to arithmetic devices without taking the temperature of the arithmetic device into consideration. Thus, it may sometimes occur that a job is allocated to one arithmetic device in a high power consuming state regardless of presence of another arithmetic device in a low power consuming state and hence surplus power is consumed accordingly. In addition, it may also sometimes occur that a job is allocated to an arithmetic device the temperature of which may excessively increase in execution of the job allocated thereto.","In a load distribution system, it may be preferable to realize load distribution reflecting the temperature-dependent operation property of each of the plurality of arithmetic devices included in the system.","According to the embodiments, such load distribution may be realized that reflects the temperature-dependent operation property of each of the plurality of arithmetic devices included in the load distribution system.",{"@attributes":{"id":"p-0025","num":"0024"},"figref":["FIG. 1","FIG. 1"],"b":["2","3","4","5","6","7","7","7","3","4","5","6","2","8","2","11","3","4","5","6","3","4","5","6"]},"The functions of the load balancer  including the temperature data acquirer  may be implemented by an information processing device (a computer) by executing software.  illustrates an exemplary configuration of the computer. As illustrated in , the computer that functions as the load balancer  may include a CPU  for executing the software such as operating system (OS) and application programs, a main memory  for temporarily storing data, an auxiliary storage such as a hard disk drive (HDD)  for storing data, a drive unit  for reading data from and\/or writing data to a removable disk , an input unit  for accepting user input, a display unit  for displaying data, and a communication interface  for establishing a connection to a network. These components are connected to each other via a bus . The software may be stored in the removable disk  when delivered, installed onto the HDD  from the removable disk , and loaded into the main memory  from the HDD  when executed by the CPU . The software may be delivered over the network.","In the following, embodiments ,  and  which are configured to be favorably adaptable to a load distribution system which is supposed to be applied to a client-server system as illustrated in  will be discussed. In the drawings referred to in the discussion of the embodiments ,  and , two of four servers illustrated in  will be illustrated as representatives.","[First Embodiment]",{"@attributes":{"id":"p-0029","num":"0028"},"figref":["FIG. 2","FIG. 2"],"b":["10","2","10","11","12","13","10"]},"The temperature data acquirer  receives from the job allocator  a notification of receiving a job and inquires of a temperature measurer  included in each of the plurality of servers  and  about temperature thereof. In the above mentioned situation, servers to which inquiries are actually made include not only the above mentioned two servers  and  illustrated in  but all the servers other than servers exempted for reason of maintenance and other reasons. Upon receiving responses from the plurality of servers  and  and acquiring temperature data of each of the servers  and , the temperature data acquirer  hands over the acquired temperature data to the candidate selector  together with identification information of each server from which the temperature data has been acquired.","The temperature that the temperature data acquirer inquires of each temperature measurer  is a temperature relating to reduction of power consumption in execution of a job. In the case that the server  or  executes a job allocated thereto, a CPU which is included in each of the servers  and  as a substantial arithmetic device consumes the power. The power consumption of the CPU changes depending on the temperature of the CPU.  illustrates an exemplary temperature-dependent property of power consumption. Specifically, as illustrated in , the power consumption [Wh] per unit such as a command or unit time increases with increase of the temperature within a normal operating temperature range. Thus, the temperature measurer  in each of the servers  and  measures the present temperature of the CPU included in each of the servers  and  and notifies the temperature data acquirer  of temperature data of the measured temperature as a response to the inquiry from the temperature data acquirer  of the load balancer .","The functions of the temperature measurer  of each of the servers  and  may be implemented by the CPU thereof, for example, by executing software. In general, a CPU assembled into a presently available computer may have a temperature sensor built-in and the computer including the CPU of the above mentioned type usually controls the temperature in accordance with an OS. Therefore, the servers  and  equipped with the temperature measurers  may be realized by installing a program for acquiring the latest data of the measured temperature from the OS function into an existing computer without changing a hardware configuration.","The candidate selector  selects at least one of the plurality of servers  and  as a candidate for a device to which the job is to be allocated in accordance with the temperature data acquired by the temperature data acquirer . From the viewpoint of power saving, it may be favorable to allocate the job to a server achieving lower power consumption. Here, it is supposed that the temperature-dependent properties of power consumption of all the servers are substantially the same as one another. For example, if all the servers are of the same type, in many cases, the properties thereof will be almost the same as one another. As illustrated in , the power consumption exhibits such a temperature-dependent property that it monotonously increases with increase of the temperature. Thus, it may be said that the lower the present temperature is, the lower the power consumption is. Therefore, the candidate selector  selects, as the candidates, servers corresponding to one or more pieces of temperature data selected from among pieces of temperature data of the servers  and  acquired by the temperature data acquirer  in order in which the data having a lower value is selected earlier than others. The number of candidates is smaller than the total number of servers included in the system and is set in accordance with an algorithm applied to the job allocator .","In the case that the number of candidates is set to \u201c1\u201d, the candidate selector  selects the server having the lowest present temperature as the candidate. In the case that the number of candidates is set to \u201c1\u201d, the job is unconditionally allocated to the candidate that the candidate selector  has selected. In the above mentioned case, the candidate selector  functions as means for substantially determining the server to which the job is allocated.","The job allocator  allocates the job to the candidate that the candidate selector  has selected. Upon receiving a request from a client, the job allocator  notifies the temperature data acquirer  of reception of the request and waits until the candidate is selected by the candidate selector . In the case that the number of candidates notified from the candidate selector  is \u201c1\u201d, the job allocator  allocates the job to the candidate. In the case that the candidate selector  notifies the job allocator  of a plurality of candidates, the job allocator  allocates the job to one of the plurality of candidates in accordance with a previously determined algorithm. For example, such an algorithm may be applicable that jobs are not continuously allocated to the same server so as to uniformly distribute the load. In addition, such an algorithm may be also applicable that in the case that the load on the first candidate exceeds a fixed value, the job is allocated to the second candidate.",{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIG. 4","b":["10","10","2","11","10","12","10","13","10","13","10","2","12","13","10","12"]},"The first embodiment may be altered such that the load distribution system  determines whether a value of temperature data acquired from each server is lower than a threshold value and selects servers having the temperature lower than the threshold value as candidates for job allocation. In the above mentioned altered embodiment, the largest number of selected candidates comes up to the total number of servers included in the system. According to the altered embodiment, such a situation may not occur that a job is allocated to a server achieving power consumption higher than a fixed value corresponding to the threshold value of the temperature, so that the power consumption may be reduced in comparison with a case in which job allocation is performed without taking the temperature into consideration.","In addition, the first embodiment may be also altered so as to stabilize job execution in place of attaining power saving such that the load distribution system  determines whether the temperature of each server is within a previously set appropriate range and selects a server having the temperature within the appropriate range as a candidate for job allocation.","[Second Embodiment]",{"@attributes":{"id":"p-0040","num":"0039"},"figref":"FIG. 5"},"As illustrated in , a load distribution system is provided in a load balancer according to the present embodiment by installing software. The load distribution system includes the temperature data acquirer , a candidate selector , the job allocator , a property data storage  and a property data acquirer . The functions of the temperature data acquirer  and the job allocator  are the same as those in the first embodiment. The functions of the candidate selector , the property data storage  and the property data acquirer  are as follows.","The candidate selector selects at least one of the plurality of servers and as a candidate for a device to which the job is to be allocated in accordance with temperature data acquired from the temperature measurer  included in each of the plurality of servers and by the temperature data acquirer . In the selection of the candidate, the candidate selector referrers to a property table stored in advance in the property data storage  as operation property data of the servers included in the system.  illustrates an exemplary data structure of the property table. As illustrated in , the property table stores power consumption data of each of the servers in correspondence with each temperature at a measuring interval.","In order to allocate the job to a server achieving lower power consumption, which would be favorable from the viewpoint of power saving, the candidate selector acquires the power consumption data of the respective servers and corresponding to the present temperatures thereof from the property table. Then, the candidate selector selects, as candidates for job allocation, servers corresponding to one or more pieces of power consumption data selected from among the acquired pieces of power consumption data in order in which power consumption data having a smaller value is selected earlier than others. The number of candidates is smaller than the total number of servers included in the system and is set in accordance with an algorithm applied to the job allocator .","In the case that the number of candidates is set to \u201c1\u201d, the candidate selector selects the server achieving the lowest power consumption corresponding to the present temperature. Here, it is to be noted that it is not the case that the server having the lowest present temperature always achieves the lowest power consumption.  illustrates an exemplary magnitude relation among power consumption of a plurality of servers. As illustrated in , in the present embodiment, it is supposed that temperature-dependent properties of power consumption of the plurality of servers differ from one another. The temperature-dependent properties may differ from one another in the case that different types of servers or different types of CPUs are used. In addition, in some cases, the temperature-dependent properties may differ from one another even in the case that CPUs of the same type are used. The reason for the above may lie in the fact that a variation among the CPUs, which would occur in manufacturing, cooling power, environmental temperature and other factors influence the temperature-dependent properties of the servers. In the example illustrated in , although the fourth server has the lowest temperature, the third server achieves the lowest power consumption. In the case that the number of candidates is set to \u201c1\u201d, the job is unconditionally allocated to the candidate that the candidate selector has selected so as to allocate the job to the third server in the example illustrated in . Thus, in the above mentioned case, the candidate selector functions as means for substantially determining the server to which the job is allocated.","Referring back to , the property data acquirer  collects operation property data of respective servers from property data storages  included in the plurality of servers and at a predetermined time before the load distribution is started such as, for example, when the power source of the load balancer is turned on. The property data acquirer  stores respective pieces of operation property data in the property data storage  together with identification information of the servers from which the respective pieces of operation property data have been acquired, in the form of the above mentioned property table in which the power consumption data is corresponded to the temperature for each server.",{"@attributes":{"id":"p-0046","num":"0045"},"figref":"FIG. 8","b":["10","10","14","10","10","2","11","10","14","12","10","13","10"],"i":["b ","b ","b ","b ","b ","b ","b "]},"The second embodiment may be altered such that the load distribution system determines whether the power consumption corresponding to the temperature of each server is lower than a threshold value and selects a server achieving power consumption lower than the threshold value as candidates for job allocation. In the above mentioned altered embodiment, the largest number of selected candidates comes up to the total number of servers included in the system. According to the altered embodiment, such a situation may not occur that a job is allocated to a server achieving power consumption higher than the threshold value, so that the power consumption may be reduced in comparison with a case in which job allocation is performed without taking the power consumption into consideration.","In addition, in the case that the number and the type of servers included in the system are not frequently changed, the second embodiment may be favorably altered such that the property data storage  of the load distribution system stores the operation property data of the servers and in advance. According to the above mentioned altered embodiment, the property data acquirer  of the load distribution system and the property data storages  included in the respective servers and may be omitted.","According to the second embodiment, the load distribution system is allowed to allocate the job to the server achieving the lowest power consumption with reference to the operation properties of the respective servers and hence power saving of the server system may be more favorably promoted regardless of a difference in operation property between the servers and ","[Third Embodiment]",{"@attributes":{"id":"p-0051","num":"0050"},"figref":"FIG. 9"},"As illustrated in , a load distribution system is provided in a load balancer according to the present embodiment by installing software. The load distribution system includes the temperature data acquirer , a candidate selector , the job allocator , a property data storage and a property data updater . The functions of the temperature data acquirer  and the job allocator  are the same as those in the first embodiment. The functions of the candidate selector and the property data storage are the same as those of the candidate selector and the property data storage  in the second embodiment. The functions of the property data updater  are as follows.","The property data updater  collects operation property data of the plurality of servers and from the property data storages  included therein at an appropriate time. The property data updater  updates the property table in which the power consumption data is corresponded to the temperature for each server, by storing the respective collected pieces of operation property data in the property data storage together with identification information of the servers from which the respective pieces of operation property data have been acquired, in the form of the property table.","Pieces of operation property data to be collected by the property data updater  are generated in the servers and by measuring the temperatures and the electric energy of the servers and . As elements for generation of the operation property data, each of the servers and includes a temperature measurer , an electric energy measurer  and a property data acquirer . The property data acquirer  acquires measured values of the temperature and the electric energy respectively from the temperature measurer  and the electric energy measurer  and stores the measured values of the electric energy as power consumption data in the property data storage , associated with each of a plurality of pieces of temperature data indicating, for example, temperatures at an interval of one degree centigrade.",{"@attributes":{"id":"p-0055","num":"0054"},"figref":["FIG. 10","FIG. 10"],"b":["27","27","272","274","276","272","272","274","276","28","28"]},{"@attributes":{"id":"p-0056","num":"0055"},"figref":"FIG. 11","b":["10","3","4","3","4","23","9","10","14","10","10","2","11","10","14","12","10","13","10"],"i":["c ","c ","c ","c ","c ","c ","c ","c ","c ","c ","c ","c ","c "]},{"@attributes":{"id":"p-0057","num":"0056"},"figref":"FIG. 12","b":["3","4","3","4","28","21","0","31","27","32","28","33","28","21","34","28","0","35","35","28","38","28","38"],"i":["c ","c","c ","c"]},"The check is performed in order to abort the measurement when the temperature has entered the saturated state. When the command execution number N is smaller than or equal to the given number (\u201cNo\u201d in operation #), the property data acquirer  returns the process to operation # to make the CPU execute the command.","When the temperature change of one or more degrees centigrade has occurred owing to execution of the command (\u201cYes\u201d in operation #), the property data acquirer  acquires the electric energy data from the electric energy measurer  (operation #). Then, the property data acquirer  divides the acquired electric energy data by the presently counted command execution number N to calculate the electric energy per command and records the calculated data of electric energy per command associated with the start temperature T (operation #). Then, the property data acquirer  acquires the power consumption per command that substantially corresponds to each of a plurality of temperatures at an interval of one degree centigrade by repeating operations # to #.","When the command execution number N is larger than the given number (\u201cYes\u201d in operation #), the property data acquirer  regards that the temperature is now in the saturated state, acquires the electric energy data from the electric energy measurer  (operation #). The property data acquirer  calculates and records the electric energy per command (operation #). Then, the property data acquirer  terminates the process.",{"@attributes":{"id":"p-0061","num":"0060"},"figref":"FIG. 13","b":["3","4"],"i":["c ","c"]},"In each of the servers and , the property data acquirer  stores the start temperature T (operation #), notifies the electric energy measurer  of start of measurement (operation #), and starts time keeping and records a start time (operation #B). The property data acquirer  makes the CPU execute a predetermined command (operation #B). The property data acquirer  again acquires the temperature data from the temperature measurer  to store the acquired temperature data as the latest temperature T (operation #). The property data acquirer  checks to see whether the latest temperature T is higher than the start temperature T by one or more degrees centigrade (operation #). When a temperature change of one or more degrees centigrade is not found (\u201cNo\u201d in operation #), the property data acquirer  advances the process to operation #B. The property data acquirer  checks to see whether a time elapsed after the time keeping has been started is longer than a given time (for example, one minute). The check is performed in order to abort the measurement when the temperature has entered the saturated state. When the given time does not yet elapse (\u201cNo\u201d in operation #B), the property data acquirer  returns the process to operation #B to make the CPU execute the command.","When the temperature change of one or more degrees centigrade has occurred owing to execution of the command (\u201cYes\u201d in operation #), the property data acquirer  records the present time (operation #B) and acquires the electric energy data from the electric energy measurer  (operation #). Then, the property data acquirer  divides the acquired electric energy data by an elapsed time \u201ct\u201d which has elapsed up to that time to calculate the electric energy per unit time and records the calculated data of the electric energy per unit time associated with the start temperature T (operation #B). Then, the property data acquirer  acquires the power consumption per unit time which substantially corresponds to each of a plurality of temperatures at an interval of one degree centigrade by repeating operations # to #.","When the given time has elapsed (\u201cYes\u201d in operation #B), the property data acquirer  regards that the temperature is now in the saturated state, acquires the electric energy data from the electric energy measurer  (operation #). The property data acquirer  calculates and records the electric energy per unit time (operation #B). Then, the property data acquirer  terminates the process.","The third embodiment may be altered such that as in the case in the altered embodiment of the second embodiment, the load distribution system determines whether the power consumption corresponding to the temperature of each server is lower than a threshold value and selects a server achieving power consumption lower than the threshold value as candidates for job allocation. In the above mentioned altered embodiment, the largest number of selected candidates comes up to the total number of servers included in the system. According to the above mentioned altered embodiment, such a situation may not occur that a job is allocated to a server achieving power consumption higher than the threshold value, so that the power consumption may be reduced in comparison with a case in which job allocation is performed without taking the power consumption into consideration.","According to the third embodiment, even when the operation properties of the servers and are changed with time or with change of the environment, the load distribution system is allowed to allocate the job to the server achieving the lowest power consumption with reference to the changed operation properties.","All examples and conditional language recited herein are intended for pedagogical purposes to aid the reader in understanding the invention and the concepts contributed by the inventor to furthering the art, and are to be construed as being without limitation to such specifically recited examples and conditions, nor does the organization of such examples in the specification relate to a showing of the superiority and inferiority of the invention. Although the embodiments of the present invention have been discussed in detail, it should be understood that the various changes, substitutions, and alterations could be made hereto without departing from the spirit and scope of the invention."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF DRAWINGS","p":[{"@attributes":{"id":"p-0008","num":"0007"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 14"}]},"DETDESC":[{},{}]}
