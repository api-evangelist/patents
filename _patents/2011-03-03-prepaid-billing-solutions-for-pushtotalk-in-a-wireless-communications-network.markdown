---
title: Prepaid billing solutions for push-to-talk in a wireless communications network
abstract: Advanced group services for use in a mobile phone network include a prepaid billing solution. In the mobile phone network, a real-time exchange interfaces to at least one mobile switching center to provide the advanced group services therein. Both the real-time exchange and the mobile phones that use the advanced group services communicate with each other using call setup and in-band signaling within the mobile phone network, wherein the real-time exchange switches the voice frames for the advanced group services between the mobile phones across bearer paths and through at least one mobile switching center in the mobile phone network. A real-time billing mechanism is provided for a prepaid subscriber of the advanced group services. The real-time billing mechanism may use a prefix-based billing solution or a charging number based billing solution.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08369829&OS=08369829&RS=08369829
owner: Kodiak Networks, Inc.
number: 08369829
owner_city: San Ramon
owner_country: US
publication_date: 20110303
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS REFERENCE TO RELATED APPLICATIONS","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE INVENTION"],"p":["This application claims the benefit under 35 U.S.C. Section 119(e) of the following co-pending and commonly-assigned patent application:","U.S. Provisional Application Ser. No. 61\/310,245, filed on Mar. 3, 2010, by Narasimha Raju Nagubhai, Ravi Shankar Kumar, Krishnakant M. Patel and Ravi Ayyasamy, entitled \u201cPREPAID BILLING SOLUTIONS AND OTHER ENHANCEMENTS FOR PUSH-TO-TALK,\u201d","which application is incorporated by reference herein.","This application is related to the following commonly-assigned patent applications:","U.S. Utility application Ser. No. 10\/515,556, filed Nov. 23, 2004, by Gorachand Kundu, Ravi Ayyasamy and Krishnakant Patel, entitled \u201cDISPATCH SERVICE ARCHITECTURE FRAMEWORK,\u201d now U.S. Pat. No. 7,787,896, issued Aug. 31, 2010, which application claims the benefit under 35 U.S.C. Section 365 of P.C.T. International Application Serial Number PCT\/US03\/16386, which application claims the benefit under 35 U.S.C. Section 119(e) of U.S. Provisional Application Ser. Nos. 60\/382,981, 60\/383,179 and 60\/407,168;","U.S. Utility application Ser. No. 10\/564,903, filed Jan. 17, 2006, by F. Craig Farrill, Bruce D. Lawler and Krishnakant M. Patel, entitled \u201cPREMIUM VOICE SERVICES FOR WIRELESS COMMUNICATIONS SYSTEMS,\u201d which application claims the benefit under 35 U.S.C. Section 365 of P.C.T. International Application Serial Number PCT\/US04\/23038, which application claims the benefit under 35 U.S.C. Section 119(e) of U.S. Provisional Application Ser. Nos. 60\/488,638, 60\/492,650 and 60\/576,094 and which application is a continuation-in-part and claims the benefit under 35 U.S.C. Sections 119, 120 and\/or 365 of P.C.T. International Application Serial Number PCT\/US03\/16386;","U.S. Utility application Ser. No. 11\/126,587, filed May 11, 2005, by Ravi Ayyasamy and Krishnakant M. Patel, entitled \u201cARCHITECTURE, CLIENT SPECIFICATION AND APPLICATION PROGRAMMING INTERFACE (API) FOR SUPPORTING ADVANCED VOICE SERVICES (AVS) INCLUDING PUSH TO TALK ON WIRELESS HANDSETS AND NETWORKS,\u201d now U.S. Pat. No. 7,738,892, issued Jun. 15, 2010, which application claims the benefit under 35 U.S.C. Section 119(e) of U.S. Provisional Application Ser. Nos. 60\/569,953 and 60\/579,309, and which application is a continuation-in-part and claims the benefit under 35 U.S.C. Sections 119, 120 and\/or 365 of U.S. Utility application Ser. No. 10\/515,556 and P.C.T. International Application Serial Number PCT\/US04\/23038;","U.S. Utility application Ser. No. 11\/129,268, filed May 13, 2005, by Krishnakant M. Patel, Gorachand Kundu, Ravi Ayyasamy and Basem Ardah, entitled \u201cROAMING GATEWAY FOR SUPPORT OF ADVANCED VOICE SERVICES WHILE ROAMING IN WIRELESS COMMUNICATIONS SYSTEMS,\u201d now U.S. Pat. No. 7,403,775, issued Jul. 22, 2008, which application claims the benefit under 35 U.S.C. Section 119(e) of U.S. Provisional Application Ser. No. 60\/571,075, and which application is a continuation-in-part and claims the benefit under 35 U.S.C. Sections 119, 120 and\/or 365 of U.S. Utility application Ser. No. 10\/515,556 and P.C.T. International Application Serial Number PCT\/US04\/23038;","U.S. Utility application Ser. No. 11\/134,883, filed May 23, 2005, by Krishnakant Patel, Vyankatesh V. Shanbhag, Ravi Ayyasamy, Stephen R. Horton and Shan-Jen Chiou, entitled \u201cADVANCED VOICE SERVICES ARCHITECTURE FRAMEWORK,\u201d now U.S. Pat. No. 7,764,950, issued Jul. 27, 2010, which application claims the benefit under 35 U.S.C. Section 119(e) of U.S. Provisional Application Ser. Nos. 60\/573,059 and 60\/576,092, and which application is a continuation-in-part and claims the benefit under 35 U.S.C. Sections 119, 120 and\/or 365 of U.S. Utility application Ser. No. 10\/515,556, P.C.T. International Application Serial Number PCT\/US04\/23038, U.S. Utility application Ser. No. 11\/126,587, and U.S. Utility application Ser. No. 11\/129,268;","U.S. Utility application Ser. No. 11\/136,233, filed May 24, 2005, by Krishnakant M. Patel, Vyankatesh Vasant Shanbhag, and Anand Narayanan, entitled \u201cSUBSCRIBER IDENTITY MODULE (SIM) ENABLING ADVANCED VOICE SERVICES (AVS) INCLUDING PUSH-TO-TALK, PUSH-TO-CONFERENCE AND PUSH-TO-MESSAGE ON WIRELESS HANDSETS AND NETWORKS,\u201d now U.S. Pat. No. 7,738,896, issued Jun. 15, 2010, which application claims the benefit under 35 U.S.C. Section 119(e) of U.S. Provisional Application Ser. No. 60\/573,780, and which application is a continuation-in-part and claims the benefit under 35 U.S.C. Sections 119, 120 and\/or 365 of U.S. Utility application Ser. No. 10\/515,556, P.C.T. International Application Serial Number PCT\/US04\/23038, U.S. Utility application Ser. No. 11\/126,587, and U.S. Utility application Ser. No. 11\/134,883;","U.S. Utility application Ser. No. 11\/158,527, filed Jun. 22, 2005, by F. Craig Farrill, entitled \u201cPRESS-TO-CONNECT FOR WIRELESS COMMUNICATIONS SYSTEMS,\u201d now U.S. Pat. No. 7,529,557, issued May 5, 2009, which application claims the benefit under 35 U.S.C. Section 119(e) of U.S. Provisional Application Ser. No. 60\/581,954, and which application is a continuation-in-part and claims the benefit under 35 U.S.C. Sections 119, 120 and\/or 365 of U.S. Utility application Ser. No. 10\/515,556 and P.C.T. International Application Serial Number PCT\/US04\/23038;","U.S. Utility application Ser. No. 11\/183,516, filed Jul. 18, 2005, by Deepankar Biswaas, entitled \u201cVIRTUAL PUSH TO TALK (PTT) AND PUSH TO SHARE (PTS) FOR WIRELESS COMMUNICATIONS SYSTEMS,\u201d which application claims the benefit under 35 U.S.C. Section 119(e) of U.S. Provisional Application Ser. No. 60\/588,464;","U.S. Utility application Ser. No. 11\/356,775, filed Feb. 17, 2006, by Krishnakant M. Patel, Bruce D. Lawler, Giridhar K. Boray, and Brahmananda R. Vempati, entitled \u201cENHANCED FEATURES IN AN ADVANCED VOICE SERVICES (AVS) FRAMEWORK FOR WIRELESS COMMUNICATIONS SYSTEMS,\u201d now U.S. Pat. No. 7,813,722, issued Oct. 12, 2010, which application claims the benefit under 35 U.S.C. Section 119(e) of U.S. Provisional Application Ser. No. 60\/654,271;","P.C.T. International Application Serial Number PCT\/US2006\/011628, filed Mar. 30, 2006, by Krishnakant M. Patel, Gorachand Kundu, Sameer Dharangaonkar, Giridhar K. Boray, and Deepankar Biswas, entitled \u201cTECHNIQUE FOR IMPLEMENTING ADVANCED VOICE SERVICES USING AN UNSTRUCTURED SUPPLEMENTARY SERVICE DATA (USSD) INTERFACE,\u201d which application claims the benefit under 35 U.S.C. Section 119(e) of U.S. Provisional Application Ser. No. 60\/666,424;","U.S. Utility application Ser. No. 11\/462,332, filed Aug. 3, 2006, by Deepankar Biswas, Krishnakant M. Patel, Giridhar K. Boray, and Gorachand Kundu, entitled \u201cARCHITECTURE AND IMPLEMENTATION OF CLOSED USER GROUP AND LIMITING MOBILITY IN WIRELESS NETWORKS,\u201d now U.S. Pat. No. 7,689,238, issued Mar. 30, 2010, which application claims the benefit under 35 U.S.C. Section 119(e) of U.S. Provisional Application Ser. No. 60\/705,115;","U.S. Utility application Ser. No. 11\/463,186, filed Aug. 8, 2006, by Ravi Ayyasamy and Krishnakant M. Patel, entitled \u201cADVANCED VOICE SERVICES CLIENT FOR BREW PLATFORM,\u201d now U.S. Pat. No. 8,036,692, issued Oct. 11, 2011, which application claims the benefit under 35 U.S.C. Section 119(e) of U.S. Provisional Application Ser. No. 60\/706,265;","U.S. Utility application Ser. No. 11\/567,098, filed Dec. 5, 2006, by Ravi Ayyasamy, Bruce D. Lawler, Krishnakant M. Patel, Vyankatesh V. Shanbhag, Brahmananda R. Vempati, and Ravi Shankar Kumar, entitled \u201cINSTANT MESSAGING INTERWORKING IN AN ADVANCED VOICE SERVICES (AVS) FRAMEWORK FOR WIRELESS COMMUNICATIONS SYSTEMS,\u201d which application claims the benefit under 35 U.S.C. Section 119(e) of U.S. Provisional Application Ser. No. 60\/742,250;","U.S. Utility application Ser. No. 11\/740,805, filed Apr. 26, 2007, by Krishnakant M. Patel, Giridhar K. Boray, Ravi Ayyasamy, and Gorachand Kundu, entitled \u201cADVANCED FEATURES ON A REAL-TIME EXCHANGE SYSTEM,\u201d now U.S. Pat. No. 7,853,279, issued Dec. 14, 2010, which application claims the benefit under 35 U.S.C. Section 119(e) of U.S. Provisional Application Ser. No. 60\/795,090;","U.S. Utility application Ser. No. 11\/891,127, filed Aug. 9, 2007, by Krishnakant M. Patel, Deepankar Biswas, Sameer P. Dharangaonkar and Terakanambi Nanjanayaka Raja, entitled \u201cEMERGENCY GROUP CALLING ACROSS MULTIPLE WIRELESS NETWORKS,\u201d which application claims the benefit under 35 U.S.C. Section 119(e) of U.S. Provisional Application Ser. No. 60\/836,521;","U.S. Utility application Ser. No. 12\/259,102, filed on Oct. 27, 2008, by Krishnakant M. Patel, Gorachand Kundu, and Ravi Ayyasamy, entitled \u201cCONNECTED PORTFOLIO SERVICES FOR A WIRELESS COMMUNICATIONS NETWORK,\u201d which application claims the benefit under 35 U.S.C. Section 119(e) of U.S. Provisional Application Ser. Nos. 60\/982,650 and 61\/023,042;","U.S. Utility application Ser. No. 12\/359,861, filed on Jan. 26, 2009, by Bruce D. Lawler, Krishnakant M. Patel, Ravi Ayyasamy, Harisha Mahabaleshwara Negalaguli, Binu Kaiparambil, Shiva Cheedella, Brahmananda R. Vempati, Ravi Shankar Kumar, and Avrind Shanbhag, entitled \u201cCONVERGED MOBILE-WEB COMMUNICATIONS SOLUTION,\u201d which application claims the benefit under 35 U.S.C. Section 119(e) of U.S. Provisional Application Ser. No. 61\/023,332;","U.S. Utility application Ser. No. 12\/582,601, filed Oct. 20, 2009, by Krishnakant M. Patel, Ravi Ayyasamy, Gorachand Kundu, Basem A. Ardah, Anand Narayanan, Brahmananda R. Vempati, and Pratap Chandana, entitled \u201cHYBRID PUSH-TO-TALK FOR MOBILE PHONE NETWORKS,\u201d which application claims the benefit under 35 U.S.C. Section 119(e) of U.S. Provisional Application Ser. No. 61\/106,689;","U.S. Utility application Ser. No. 12\/781,566, filed on May 17, 2010, by Bruce D. Lawler, Krishnakant M. Patel, Ravi Ayyasamy, Harisha Mahabaleshwara Negalaguli, Binu Kaiparambil, Shiva K. K. Cheedella, Brahmananda R. Vempati, and Ravi Shankar Kumar, entitled \u201cCONVERGED MOBILE-WEB COMMUNICATIONS SOLUTION,\u201d which application is a continuation-in-part and claims the benefit under 35 U.S.C. Sections 119, 120 and\/or 365 of U.S. Utility application Ser. No. 12\/582,601;","U.S. Utility application Ser. No. 12\/750,175, filed on Mar. 30, 2010, by Bruce D. Lawler, Krishnakant M. Patel, Ravi Ayyasamy, Harisha Mahabaleshwara Negalaguli, Basem A. Ardah, Gorachund Kundu, Ramu Kandula, Brahmananda R. Vempati, Ravi Shankar Kumar, Chetal M. Patel, and Shiva K. K. Cheedella, entitled \u201cENHANCED GROUP CALLING FEATURES FOR CONNECTED PORTFOLIO SERVICES IN A WIRELESS COMMUNICATIONS NETWORK,\u201d which application claims the benefit under 35 U.S.C. Section 119(e) of U.S. Provisional Application Ser. Nos. 61\/164,754 and 61\/172,129;","U.S. Utility application Ser. No. 12\/961,419, filed Dec. 6, 2010, by Ravi Ayyasamy, Bruce D. Lawler, Brahmananda R. Vempati, Gorachand Kundu and Krishnakant M. Patel, entitled \u201cCOMMUNITY GROUP CLIENT AND COMMUNITY AUTO DISCOVERY SOLUTIONS IN A WIRELESS COMMUNICATIONS NETWORK,\u201d which application claims the benefit under 35 U.S.C. Section 119(e) of U.S. Provisional Application Ser. No. 61\/266,896;","all of which applications are incorporated by reference herein.","1. Field of the Invention","This invention relates in general to wireless communications systems, and more specifically, to prepaid billing solutions for push-to-talk in wireless communications networks.","2. Description of Related Art","Advanced Voice Services (AVS), also known as Advanced Group Services (AGS), such as two-way half-duplex voice calls within a group, also known as Push-to-Talk (PTT) or Press-to-Talk (P2T), as well as other AGS functions, such as Push-to-Conference (P2C) or Instant Conferencing, Push-to-Message (P2M), etc., are described in the co-pending and commonly-assigned patent applications cross-referenced above and incorporated by reference herein. These AGS functions have enormous revenue earnings potential for wireless communications systems, such as mobile phone networks.","Currently, there are three major approaches employed in providing PTT or other AGS in wireless communications systems. One approach requires the installation of a dedicated private network, parallel to the wireless communications system, to support the group-based voice services. NEXTEL uses such a system, based on a solution developed by MOTOROLA known as IDEN. However, a dedicated private network is costly to install and maintain and is employed by a few public wireless carriers. Also, the IDEN system is non-standard, and hence cannot be used in standard wireless communications networks, such as those based on GSM (Global System for Mobile Communications) and CDMA (Code Division Multiple Access).","Another approach is based on Voice over IP (VoIP) technologies. While this approach promises compliance with newer and emerging standards, such as GPRS (General Packet Radio Service), UMTS (Universal Mobile Telecommunications System), etc., it does not provide a solution for carriers employing wireless communications systems based on existing standards, such as GSM, CDMA, etc. However, even for the newer standards, solutions based on VoIP have serious drawbacks, including slower call setup, significant overhead, increased susceptibility to packet losses, low bit rate voice coders, and significant modifications to the mobile handset.","Still another approach is the innovative approach described in the co-pending and commonly-assigned patent applications cross-referenced above and incorporated by reference herein. In this approach, advanced voice services are provided by a real-time exchange (RTX), also known as a dispatch gateway (DG), that interfaces to the wireless communications system to provide the advanced voice services therein, wherein both the real-time exchange and mobiles that use the advanced voice services communicate with each other using call setup and in-band signaling within the wireless communications system.","However, notwithstanding the innovations described in the co-pending and commonly-assigned patent applications cross-referenced above, there is a need in the art for improvements to these advanced voice services, as well as additional advanced voice services, that comply with existing and emerging wireless standards and provide superior user experiences. The present invention aims to satisfy this need by providing improved group-based communications services for wireless communications systems.","To overcome the limitations in the prior art described above, and to overcome other limitations that will become apparent upon reading and understanding the present specification, the present invention discloses prepaid billing solutions for advanced voice services in a mobile phone network. A mobile phone network is used for making calls between mobile phones, wherein the calls are initiated by call setup and in-band signaling within the mobile phone network and voice frames for the calls are switched between the mobile phones by at least one mobile switching center across bearer paths in the mobile phone network. A real-time exchange interfaces to at least one mobile switching center in the mobile phone network to provide the advanced group services therein. Both the real-time exchange and the mobile phones that use the advanced group services communicate with each other using the call setup and in-band signaling within the mobile phone network, and the real-time exchange switches the voice frames for the advanced group services between the mobile phones across the bearer paths and through at least one mobile switching center in the mobile phone network. A real-time billing mechanism is provided for a prepaid subscriber of the advanced group services. The real-time billing mechanism may use a prefix-based billing solution for the advanced group services used by the prepaid subscriber, such that the prefix is placed on numbers for one or more terminating legs of the call, so that the prepaid subscriber is billed for the terminating legs. The real-time billing mechanism may also use a charging number based billing solution for the advanced group services used by the prepaid subscriber.","In the following description of the preferred embodiment, reference is made to the accompanying drawings which form a part hereof, and in which is shown by way of illustration the specific embodiment in which the invention may be practiced. It is to be understood that other embodiments may be utilized as structural changes may be made without departing from the scope of the present invention.","1 Overview","The present invention discloses a Prepaid Billing Solution for PTT and other AGS that enables a real-time billing mechanism for a prepaid subscriber in a wireless communications network, as well as a suite of applications, both within the network and within the mobile handsets used in the network, that provide this solution. The innovative features of this solution are described below.","2 System Description","2.1 Overview","The following illustration explains the network reference architecture used to provide a Prepaid Billing Solution for PTT and other AGS. The PTT and other AGS are provided without any changes to the existing network infrastructure, but merely the addition of a service control point (SCP), known as a Real-Time Exchange (RTX), connected to the network and a client application embedded in the handset (although a clientless version is provided as well).","2.2 Network Architecture",{"@attributes":{"id":"p-0048","num":"0047"},"figref":"FIG. 1"},"Within the network , an RTX , also known as a Dispatch Gateway (DG), communicates with a MSC (Mobile Switching Center) , which my be a Gateway MSC (GMSC) , and PSTN (Public Switched Telephone Network)  using SS7-ISUP\/WIN\/CAMEL (Signaling System 7-Integrated Services Digital Network User Part\/Wireless Intelligent Network\/Customized Applications for Mobile Enhanced Logic) messages at a signaling plane . A bearer path  implements a TDM (Time Division Multiplexing) interface carrying PCM (Pulse Code Modulation) or TFO (Tandem Free Operation) voice frames. Support for TFO in this path  is negotiated between a BSC (Base Station Controller)  and the RTX  for each originating and terminating leg of an AGS call. The use of TFO ensures high voice quality (as voice vocoder conversion is avoided) between mobile-to-mobile calls.","When a subscriber originates an AGS call, the MSC  routes the call to the RTX . The MSC  also requests the BSC  via  to establish a radio traffic path  with a mobile station (MS)  (also known as a handset or mobile unit) via the BTS (Base Transceiver Station)  (as it does for a normal cellular call). At this time, the BSC  tries to negotiate TFO (if it is supported) on a TDM link with the far end (in this case, the RTX ).","At the same time (after the MSC  terminates the group call request to the RTX ), the RTX  identifies the terminating group users and their numbers, which may comprise an MSISDN (Mobile Station-Integrated Services Digital Network) number, an IMSI (International Mobile Subscriber Identity) number, or an MDN (Mobile Directory Number).","The RTX  sends an ISUP call origination request for each terminating MS . It may send requests directly to the MSC , PSTN  or IP network  via a PDSN (Public Data Switched Network) , Router , and\/or Internet\/Intranet , depending on the routing table configuration for terminating numbers. Once the bearer path  is established, the RTX  begins a negotiation with the far end (in this case, the terminating BSC ) for each terminating leg to an MS .","Once bearer paths  are established for originating and terminating legs for an AGS call, the RTX  switches (or duplicates) voice or data from the originating MS  to all terminating MS's .","The RTX  may also use an IP network  or the Internet\/Intranet . The IP network  or the Internet\/Intranet  can be used in a toll bypass mode where two RTXs  can exchange voice traffic bypassing the PSTN . However, each RTX  is responsible for terminating traffic to its closest MSC . In this case, the IP network  or the Internet\/Intranet  is used as a backbone transport of voice traffic between two RTXs .","The IP network  or the Internet\/Intranet  can also be used for a registration and presence application. Since the MSC  will not direct a registration request from a MS  to the RTX  (because it would require changes in the MSC ), the latter does not have any information of the registered MS . To circumvent this issue, a registration and presence application runs over an IP stack in the MS . After the MS  registers for a data interface (i.e., obtaining an IP address) with the PDSN  (or Serving GSM Service Nodes (SGSN) in the case of GSM networks), the registration and presence application in the MS  registers with the RTX  using its IP address. The RTX  also uses this IP interface to update the presence information of other group members to an MS .","An alternative embodiment may use the SMS (Short Message Service) transport to carry presence messages over a data channel. The RTX  interacts with the MS  using predefined presence application related messages that are transported as SMS messages. The same messages can be transported via the PDSN  interface, if group users have data service.","During roaming, a Home Location Register (HLR)  and Visitor Location Register (VLR)  can be accessed via the MSC  and a MAP link . The HLR  and VLR  are used to track the mobile handsets  within home or foreign networks, while the RTX  is used to track the presence of members of a group within the home or foreign networks and updates the mobile handsets  for those members with the network availability of other members of the group.","A Short Message Service Center (SMSC)  is accessible via the IP network  (or other element) for the storage of text messages (SMS messages). When an SMS message is sent to an MS , the message is first stored in the SMSC  until the recipient MS  is available (e.g., a store-and-forward option).","2.3 Real Time Exchange",{"@attributes":{"id":"p-0060","num":"0059"},"figref":"FIG. 2","b":"102"},"The architecture includes a Call Processing system , Presence Server , Real-Time Event Processing system , one or more Media Managers , and an SMPP (Short Message Peer-to-Peer) Transport , as well as modules for various SS7 protocols, such as MTP-1 (Message Transfer Part Level 1) , MTP-2 (Message Transfer Part Level 2) , MTP-3 (Message Transfer Part Level 3) , ISUP (Integrated Services Digital Network User Part) , SCCP (Signaling Connection Control Part) , and TCAP (Transactions Capabilities Application Part)  protocols.","The Call Processing system , Presence Server , Media Managers , SMPP Transport , and other modules communicate across an IP network . The Real-Time Event Processing system  communicates directly with the Call Processing system , Presence Server , and the modules for various SS7 protocols. The modules for various SS7 protocols communicate with other entities via a SS7 Signaling Link . The SMPP Transport  communicates with a SMSC (Short Message Service Center) gateway using the SMPP protocol . The Media Managers  communicate among themselves using the H.110 protocol  (or some other protocol, such TCP\/IP).","The operation of these various components are described in more detail below, as well as in the co-pending and commonly-assigned patent applications cross-referenced above and incorporated by reference herein.","The originating MS  signals the RTX  via the wireless network , e.g., by transmitting one or more configured DTMF (Dual Tone Multi Frequency) digits to the RTX . The Media Manager systems  receive the DTMF digits and pass the DTMF digits to the Call Processing system . The Call Processing (CP) system  determines whether the originating MS  has subscribed to the AGS service before originating the AGS call. Upon confirmation, the Call Processing system  initiates a new AGS call. The Call Processing system  interacts with the Presence Server  and Real-Time Event Processing system  to cause the wireless network  to perform call setup with the terminating MS's  for the AGS call, and thereafter to manage the AGS call.","During the AGS call, the Call Processing system  interacts with the Media Manager systems  to maintain the H.110 channels  and assign any additional H.110 channels  required for the AGS call, which may span across multiple Media Manager systems . During the AGS call, the Media Manager systems  of the RTX  are used to mix audio streams between the originating MS  and the terminating MS , and then deliver these mixed audio streams to the originating MS  and the terminating MS . The H.110 channels  are used for passing mixed and unmixed audio streams voice between the Media Manager systems  as required.","2.4 Mobile Station Components",{"@attributes":{"id":"p-0067","num":"0066"},"figref":"FIG. 3","b":["120","120"]},"Preferably, the software architecture used in the MS  provides an application programming interface (API)  that supports the logic and data required within the MS  for providing cellular service, including the functions necessary for the making an AGS call generally, and for providing the Prepaid Billing Services specifically.","The high-level functional components of the MS  include an encoder\/decoder , processing logic  and user interface . A client application  is provided on the SIM  that supports AGS functionality for the MS . In addition, the SIM  stores a database , which includes an address book, AGS contacts and\/or group information.","At power-on, the MS  loads the client application  necessary to support the AGS services. This functionality provided includes the \u201clook and feel\u201d of the menu displays on the MS , as well as user interaction with the menu displays.","During operation, the encoder\/decoder  decodes and encodes messages, and populates specific data structures in the MS . The encoder\/decoder  checks the validity of the incoming messages by verifying mandatory parameters for each of the incoming messages. A message will not be processed further if the encoder\/decoder  fails to decode the message.","The processing logic  handles all the AGS related functionalities. The processing logic  implementation is device-specific and vendor-specific, and it interacts with the other components, including the encoder\/decoder , user interface , client application  and database .","The processing logic  provides an auto-answer mechanism for AGS calls. Specifically, when a call is received, the processing logic  automatically answers the call. The processing logic  makes use of call notification for incoming call detection and, based on various parameters received within the call notification, determines whether the call is an AGS call. If the call is an AGS call, then the processing logic  uses \u201cAT\u201d commands to answer the AGS call and turn on the speaker of the MS . (All of this takes place within a certain time period.) On the other hand, if the call is not an AGS call, then normal call processing is performed by the MS .","The processing logic  also provides \u201cfloor control\u201d using DTMF tone control. In PTT calls, which are half-duplex, a determination of who may talk is based on who has the \u201cfloor.\u201d Using the processing logic  provided in the MS , appropriate DTMF tones are sent to the RTX  in accordance with specific key sequences (i.e., pressing and\/or releasing a PTT key) that indicate whether the \u201cfloor\u201d has been requested and\/or released by the user.","In addition, the processing logic  provides SMS destination control based on the type of subscriber. At the time of subscriber data provisioning, if it is determined that the MS  will use AGS based logic, then appropriate logic is invoked in the RTX  to send presence messages over SMS to the MS . Similarly, the MS  is configured at the time of provisioning to receive\/accept such SMS and respond to the RTX  appropriately.","Finally, the processing logic  also enables subscribers to track the presence of fellow members of the group in the network  on their MS , and provides a mechanism and API to carry-out contacts and group management operations on the MS , such as add member, delete member, etc.","Since most of the presence information is stored in the database , the database  is tightly integrated with the processing logic . The database  stores groups, contacts, presence and availability related information. The database  information essentially contains group and member information along with presence information associated with each group and member. Apart from group and member information, the database  also stores subscriber information, such as privileges, presence information, etc. The other components of the MS  may interact with the database  to retrieve\/update the group, members and presence information for various operations. The database  also has pointers to the native address book on the MS , to provide seamless \u201calias\u201d naming for contacts used with cellular calls, as well as AGS services.","The user interface  provides a mechanism for the user to view and manage groups, group members, contacts, presence and availability. The user interface  also makes it possible to invoke the AGS services from the group\/contact list screens, as described in more detail below.","2.5 Advanced Group Services","The RTX  and MS  work together to provide the functionality of the Advanced Group Services for the wireless communications network . The specifics of this functionality are described in more detail in the following sections.","2.6 Acronyms and Messaging","In the following sections, a number of call flows are described and illustrated. These call flows use a number of different acronyms, including the following:","IAM: Initial Address Message,","ACM: Address Complete Message,","ANM: Answer Message,","REL: Release Message,","RCL: Release Complete Message,","SMS: Short Message Service,","MO_SM: Mobile originating Short Message,","FSM: Forward Short Message,","Data_SM: Data Short Message received by SMSC,","Deliver_SM: Deliver Short Message from SMSC,","MO_SM: Mobile originating Short Message,","IN: Intelligent Network,","IDP or InitialDP: Initial Detection Point,","Continue: Continue the call processing,","Connect: Connect to the new terminating number provided in the message,","IDP_SM: Initial Detection Point for SMS,","MDN: Mobile Directory Number, and","SCA: Service Centre Address in SMS network.","The voice call related messages include: Setup, Originating, Terminating, IAM, Alerting, ACM, Connect, ANM, Disconnect, REL, release, Disconnect Ack, and RCL release complete.","The SMS related message include: MO-SM, FSM (a.k.a. Fwd_SM), Data_SM, Deliver_SM, and MT_SM.","The IN messages include: IDP, Connect, Continue, release, and IDP_SM.","In general, the parameters in the voice call originating and terminating messages are calling party number (e.g. A) and called party number (e.g. B). The B party in the originating message could be a number dedicated to the RTX  or the MS . On the other hand, the A party in the terminating message could be a number dedicated to the RTX  or the MS .","The following sections describe the steps for the call flow as well as each message in the call flow.","3 Prepaid Billing Solution for Mobile Conference and PTT Services","The Prepaid Billing Solution service enables a real-time billing mechanism for a prepaid subscriber. The Prepaid Billing Solution is applicable to both mobile conferences and PTT services.","The primary benefits of the Prepaid Billing Solution are:\n\n","3.1 Mobile Conference Call Flow Description","This service works with a client application in the handset  and the RTX .\n\n","3.2 PTT Call Flow Description","This service works with a client in the handset  and the RTX .\n\n","3.3 Prefix Based Billing Solution for Mobile Conference","The following call flow describes Option 1, namely the prefix-based billing solution for a mobile conference, which is applicable to prepaid subscribers. Specifically, in this example, Subscriber A is prepaid subscriber and Subscriber A initiates a conference call to B, C, and D.","1. Subscriber A selects B, C and D and initiates the conference call. The client application on Subscriber A's handset  establishes a call to the number of the RTX .","2. The originating MSC  routes the call towards the RTX . Before routing it to the RTX , the MSC  identifies Subscriber A as a prepaid subscriber by putting a prefix [111] on the number of the RTX .","3. The client on the handset  forms an SMS with the numbers for B, C and D, and sends the SMS to the RTX  via the GMSC .","4. The RTX  reads the SMS and initiates the terminating legs towards B, C and D. The RTX  identifies Subscriber A as a prepaid subscriber based on the prefix [111] of the number received in the incoming IAM. If Subscriber A is prepaid, then the RTX  puts the same prefix [111] on the called party numbers in all IAMB sent to the GMSC  for all terminating legs. For example, if Subscriber A is prepaid, then the terminating legs are dialed out as: A to 111+B, A to 111+C and A to 111+D.","5. Based on the prefix [111], the GMSC  identifies Subscriber A as a prepaid subscriber, removes the prefix [111] from the number, and initiates a session with a prepaid server handling Subscriber A. The GMSC  repeats this for all the terminating legs and, as a result, Subscriber A is billed for all of the terminating legs simultaneously.","3.4 Charging Number Based Billing for Mobile Conference","The following call flow describes Option 2, namely the charging number based billing solution for a mobile conference, which is applicable to (real-time) billing subscribers. Specifically, in this example, Subscriber A is a prepaid subscriber and Subscriber A initiates a conference call to B, C, and D.","1. Subscriber A selects B, C and D and initiates the conference call. The client on the handset  of Subscriber A establishes a call to the number for the RTX .","2. The originating MSC  routes the call towards the RTX . Before routing the call to the RTX , the MSC  identifies Subscriber A as a billing subscriber and puts a prefix [111] to the number of the RTX .","3. The client on the handset  forms an SMS with the numbers for B, C and D, and sends the SMS to the RTX  via the GMSC .","4. The RTX  receives the SMS, and initiates the terminating legs towards B, C and D. The RTX  identifies Subscriber A as a billing subscriber based on the prefix [111] of the number received in the incoming IAM. While dialing the terminating legs, the RTX  enters the \u201cCharging Number\u201d in the IAM as the number of Subscriber A:\n\n","5. The GMSC  analyzes the charging number field in the IAM and, since the Charging Number [A] is a billing subscriber, the GMSC  initiates an \u201cIN-Session\u201d with the billing server for Subscriber A. The GMSC  repeats this for all the legs and, as a result, Subscriber A is billed for all of the terminating legs simultaneously.","3.5 Charging Number Based Billing for PTT","The following call flow describes Option 2, namely the charging number based billing solution for a PTT, which is applicable to (real-time) billing subscribers. Specifically, in this example, Subscriber A is a prepaid subscriber and Subscriber A initiates a PTT call to B, C, and D.","1. Subscriber A selects B, C and D, and initiates the PTT call. The client on the handset  for Subscriber A establishes a call to: RD+CallType+GroupIndex. [RD=4-digits, Call Type=2-digits, GroupIndex=2-digits].","2. In the originating call setup, the following steps are performed:\n\n","3. This call reaches the serving MSC  and the serving MSC  does a \u201cB-Party\u201d analysis and routes the call to the RTX .","4. The RTX  receives the dial digits in the received IAM, and initiates the terminating legs towards B, C and D. While dialing the terminating legs, the RTX  determines whether Subscriber A is a billing subscriber and fills the \u201cCharging Number\u201d in the IAM:\n\n","5. The GMSC  analyzes the charging number field in the IAM and, since the Charging Number [A] is a billing subscriber, the GMSC  initiates an \u201cIN-Session\u201d with the billing server for Subscriber A. The GMSC  repeats this for all the terminating legs and, as a result, Subscriber A is billed for all the terminating legs simultaneously.","4 Conclusion","The foregoing description of the preferred embodiment of the invention has been presented for the purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise form disclosed. Many modifications and variations are possible in light of the above teaching. It is intended that the scope of the invention be limited not with this detailed description, but rather by the claims appended hereto."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Referring now to the drawings in which like reference numbers represent corresponding parts throughout:",{"@attributes":{"id":"p-0038","num":"0037"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0039","num":"0038"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0040","num":"0039"},"figref":"FIG. 3"}]},"DETDESC":[{},{}]}
