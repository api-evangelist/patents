---
title: Policy driven distributed data resiliency
abstract: A data resiliency layer provides manageable data resiliency policy options for email related applications. Through one or more APIs such applications are enabled to query whether a data resiliency policy is satisfied for a given mailbox or database at a given point in time. Email related applications may consume this information to modify their behavior such as to wait, repeat, or fail the actions at hand to the point where data committal is guaranteed to a degree specified by the data resiliency policy.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08332369&OS=08332369&RS=08332369
owner: Microsoft Corporation
number: 08332369
owner_city: Redmond
owner_country: US
publication_date: 20091215
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND","SUMMARY","DETAILED DESCRIPTION"],"p":["Electronic mail (email) use has become an integral part of people's daily lives. Many forms of communication, personal or business, have been replaced by email exchanges. Emails not only contain textual exchanges, but many modern email systems enable integration of multi-modal communications with emails. Thus, increasing amounts of textual, audio, video, and other forms of communication data is stored in individual mailboxes and central data storage facilities as part of the vast email exchange networks.","In addition to local replication, email related data is also replicated commonly in different locations. With hard disk sizes reaching to Terabytes, traditional raid solutions are rendered impractical. Moreover, geographical, political, and technical disturbances requiring geo-replication of data, email data is frequently replicated asynchronously to multiple physical locations in order to ensure data resiliency under various failure conditions. With the asynchronous nature of such data resiliency solutions comes the challenge as to how an application that pushes new data into email repository can ensure the new content has been committed to sufficient copies to guarantee data resiliency within the existing deployment.","Organizations and service providers typically have data resiliency policies (e.g. how frequently, in how many locations, and which portions of the data is to be replicated). Data replication solutions (e.g. log shipping, hardware based replication solutions, etc.) commonly work independently from applications that put new content into mailbox (e.g. archival services, legal search tools, import\/export-mailbox tools, etc.), and these two are unaware of each other.","This summary is provided to introduce a selection of concepts in a simplified form that are further described below in the Detailed Description. This summary is not intended to exclusively identify key features or essential features of the claimed subject matter, nor is it intended as an aid in determining the scope of the claimed subject matter.","Embodiments are directed to providing a data resiliency layer to making available manageable data resiliency policy options for email related applications. Through one or more Application Programming Interfaces (APIs) such applications are enabled to query whether a data resiliency policy is satisfied for a given mailbox or database at a given point in time. Email related applications may consume this information to modify their behavior such as to wait, repeat, or fail the actions at hand to the point where data committal is guaranteed to a degree specified by the data resiliency policy.","These and other features and advantages will be apparent from a reading of the following detailed description and a review of the associated drawings. It is to be understood that both the foregoing general description and the following detailed description are explanatory and do not restrict aspects as claimed.","As briefly described above, a data resiliency layer may be implemented through one or more APIs such that email related applications are enabled to query whether a data resiliency policy is satisfied for a given mailbox or database at a given point in time. In the following detailed description, references are made to the accompanying drawings that form a part hereof, and in which are shown by way of illustrations specific embodiments or examples. These aspects may be combined, other aspects may be utilized, and structural changes may be made without departing from the spirit or scope of the present disclosure. The following detailed description is therefore not to be taken in a limiting sense, and the scope of the present invention is defined by the appended claims and their equivalents.","While the embodiments will be described in the general context of program modules that execute in conjunction with an application program that runs on an operating system on a personal computer, those skilled in the art will recognize that aspects may also be implemented in combination with other program modules.","Generally, program modules include routines, programs, components, data structures, and other types of structures that perform particular tasks or implement particular abstract data types. Moreover, those skilled in the art will appreciate that embodiments may be practiced with other computer system configurations, including hand-held devices, multiprocessor systems, microprocessor-based or programmable consumer electronics, minicomputers, mainframe computers, and comparable computing devices. Embodiments may also be practiced in distributed computing environments where tasks are performed by remote processing devices that are linked through a communications network. In a distributed computing environment, program modules may be located in both local and remote memory storage devices.","Embodiments may be implemented as a computer-implemented process (method), a computing system, or as an article of manufacture, such as a computer program product or computer readable media. The computer program product may be a computer storage medium readable by a computer system and encoding a computer program that comprises instructions for causing a computer or computing system to perform example process(es). The computer-readable storage medium can for example be implemented via computer-readable memory device including: one or more of a volatile computer memory, a non-volatile memory, a hard drive, a flash drive, a floppy disk, or a compact disk, and comparable media.","Throughout this specification, the term \u201cplatform\u201d may be a combination of software and hardware components for managing email systems and data replication for email systems. Examples of platforms include, but are not limited to, a hosted service executed over a plurality of servers, an application executed on a single server, and comparable systems. The term \u201cserver\u201d generally refers to a computing device executing one or more software programs typically in a networked environment. However, a server may also be implemented as a virtual server (software programs) executed on one or more computing devices viewed as a server on the network. More detail on these technologies and example operations is provided below.","Referring to , conceptual diagram  illustrating interactions between an email related application, mailbox, and data resiliency layer according to embodiments for implementing data resiliency policy, is illustrated.","As discussed above, large amounts of data is replicated in modern email systems in various virtual and physical locations, sometimes in different countries or continents. Due to the size of data to be replicated and system resource considerations (bandwidth, memory, processing capacity, etc.), replication is typically performed asynchronously. In many systems, the data replication solution(s) and the application(s) providing the data to be replicated are independent from each other. It is not uncommon for the data to be provided to a mailbox from an application external to the email system, processed by a mail service\/application, and replicated by yet another application working in conjunction with the mail service\/application.","Thus, the application providing the data may not know whether a data resiliency policy is being satisfied and continue to provide the data wasting system resources. In a system according to embodiments, data resiliency layer  acts as an intermediary between the independent data resiliency solution (data resiliency policy ) and the application  providing the data to be replicated. Email data resiliency policies may include options like no resiliency, one more copy, multiple copies, one copy at a different geographical location, one copy with lag, etc. These policies may be defined within the capabilities of the data resiliency layer  and natively managed by the administrators responsible for data resiliency.","Application  may check with data resiliency layer  prior to and\/or following the delivery of the data to mailbox  and receive a confirmation that the data resiliency policy  has been satisfied or not. If the policy is satisfied, application  may continue its operations (e.g. continue providing more data). Otherwise, application  may provide a failure notice to the user, wait until the policy is satisfied, or perform other actions.","Data resiliency layer  may provide one or more APIs to enable application  to query data resiliency layer  regarding the data resiliency policy satisfaction. According to some embodiments, same set of APIs may also be used to throttle multiple applications in order to reduce the load on the data resiliency layer .",{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 2"},"In an example system, such as the one shown in diagram , user  may communicate with a mail service over network(s) , which may include the Internet. To ensure security, firewall  may be employed between the network(s)  and mail service , which includes the servers executing various applications associated with the mail service.","Mail service forest  may include directory servers , which enable administrators to assign policies, deploy software, and apply critical updates to an organization. Directory servers  may store information and settings in a central database. Directory servers  may manage networks of computing devices varying from a small installation with a few computers, users and printers to tens of thousands of users, many different domains and large server farms spanning many geographical locations. A data resiliency policy managed by directory servers  may be implemented by an external or internal data replication solution such as log shipping, hardware based solutions, and comparable ones.","Mail service forest  may also include mailbox servers  managing the mailboxes, public folders, and data replication solutions. Mailbox servers  may employ local or remote data storage to store mailbox and other data. Another group of servers that may be included in mail service forest  is client access\/hub servers . Client access\/hub servers  may manage email related applications, protocols, and mail services for user , as well as route communications. Data replication solutions may be managed by mailbox servers .","In addition to managing various protocols for the mail service, client access\/hub servers  may also execute or coordinate execution of external applications. Such applications may include archiving services, search tools, import\/export tools, and similar ones. On top of data provided to mailbox(es) by the email related applications, data to be replicated may include any data moved between mailboxes, mailboxes and public folders, and so on. Data resiliency policy defines which portion (or all) of the data is to be replicated, how frequently it is to be replicated, to where (destination) the data is to be replicated, and similar parameters. Data resiliency policy may also specify these parameters based on data type. For example, some data may be replicated at certain frequency to select locations, while other data may be replicated at different frequency and possibly to other locations. Mailbox servers  ensure the policy is complied with.","In a system according to embodiments, a data resiliency layer implemented in one of the mailbox servers may interact with the data replication solution determining the current status of data resiliency policy in response to a query from an application providing data. The data resiliency layer may then provide that information to the querying application.","The example system of  is for illustration purposes, and does not constitute a limitation on embodiments. A system implementing policy driven distributed data resiliency may be implemented in any system with fewer or additional physical and software components. Moreover, the applications and services discussed above may be executed by other servers, in other configurations, using the principles described herein.",{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 3"},"In diagram , user  communicating over network(s)  and through firewall  is routed by the client access\/hub services  of mail service forest . Mailbox services  manage mailboxes , public folders , and data replication solution . Mailbox services  may also manage local storage () of email data. Client access\/hub services  manage protocols  and email related applications  in addition to mail services . Examples of applications  may include search applications, import\/export applications, archive applications, and comparable ones. Applications  may generate or import data associated with user 's mailbox(es), some or all of which may have to replicated according to data resiliency policy . Directory services  manage user configurations , service configurations , and data replication policy . An example of directory services  is Active Directory\u00ae service of Microsoft Corp. of Redmond, Wash.","Mailbox services  may also manage enforcement of data resiliency policy  by implementing a data replication solution  or coordinating with an external data replication solution. Applications  may be agnostic and not care about the data resiliency policy at all. Alternatively, applications  may care about the data resiliency policy at different levels. For example, one application may be interested in knowing whether or not the policy is satisfied, while another application may ask for more detailed information regarding the enforcement of the data resiliency policy.","In an example scenario, a data import application may provide imported data to mailbox service , and need to know whether the date was successfully written and replicated according to the data resiliency policy before deleting the data at the source. In this example scenario and similar ones, a data resiliency layer executed by the mailbox services  (or by another service) may act as an information clearing house providing applications  manageable options for data resiliency policy . Depending on the information needed by each application, administrator\/user\/otherwise manageable options may be set and the data replication solution queried for the status of the data resiliency policy implementation each time an application requests information. By providing the policy satisfaction information to the application, the data resiliency layer enables the application to take actions such as repeating a data write, waiting before another data write, issuing a failure notification, and similar ones.","Since some of the applications  may not be able to communicate directly with the data replication solution, standardized APIs may be employed by the data resiliency layer. This way, the applications to do not need to be configured to communicate with the data resiliency layer or the data replication solution. It simply needs to utilize one or more of the available APIs to query the data resiliency layer.","While the example system in  has been described with specific components such as routing services, public folders, etc., embodiments are not limited to systems according to this example configuration. An email system employing data resiliency through data resiliency layer may be implemented in other systems and configurations employing fewer or additional components. Furthermore, embodiments are not limited to email systems. Indeed, any networked system implementing data replication based on a data resiliency policy may implement a data resiliency layer for interacting with data providing applications using the principled discussed herein.",{"@attributes":{"id":"p-0037","num":"0036"},"figref":"FIG. 4","b":["418","413","412","411","410","420","430"]},"As discussed above, modern email systems include many aspects and components such as mailbox\/public folder services, data replication, and related applications data push data into the system. Servers  may execute these different aspects centrally or in a distributed fashion and interact through one or more of the network(s) , , and .","A service or an application executed on client devices ,  or server  may attempt to push data into the mailbox of a user as part of an email related operation. A data resiliency layer as discussed above may act as intermediary between the service or application and a data replication solution associated with the mailbox (e.g. executed on server ), determine whether a data resiliency policy for the mailbox is satisfied, and notify the service or application such that the service or application can adjust its operations accordingly. Replicated data may be stored in one or more locations such as data stores .","Network(s) , , and  may comprise any topology of servers, clients, Internet service providers, and communication media. A system according to embodiments may have a static or dynamic topology. Network(s) , , and  may include secure networks such as an enterprise network, an unsecure network such as a wireless open network, or the Internet. Network(s) , , and  may also coordinate communication over other networks such as Public Switched Telephone Network (PSTN) or cellular networks. Furthermore, network(s) , , and  may include short range wireless networks such as Bluetooth or similar ones. Network(s) , , and  provide communication between the nodes described herein. By way of example, and not limitation, network(s) , , and  may include wireless media such as acoustic, RF, infrared and other wireless media.","Many other configurations of computing devices, applications, data sources, and data distribution systems may be employed to implement an email system with policy driven distributed data resiliency. Furthermore, the networked environments discussed in  are for illustration purposes only. Embodiments are not limited to the example applications, modules, or processes.",{"@attributes":{"id":"p-0042","num":"0041"},"figref":["FIG. 5","FIG. 5"],"b":["500","500","502","504","500","504","504","505","504","506","522","524"]},"Mail service  may perform various email related operations including receiving data from related applications such as those discussed before. In order to provide such applications information about whether or not data resiliency policies associated with the mailbox and\/or specific forms of data are satisfied, data resiliency layer  may be implemented in conjunction with mail service  (e.g. as one or more APIs) as discussed above. This basic configuration is illustrated in  by those components within dashed line .","Computing device  may have additional features or functionality. For example, the computing device  may also include additional data storage devices (removable and\/or non-removable) such as, for example, magnetic disks, optical disks, or tape. Such additional storage is illustrated in  by removable storage  and non-removable storage . Computer readable storage media may include volatile and nonvolatile, removable and non-removable media implemented in any method or technology for storage of information, such as computer readable instructions, data structures, program modules, or other data. System memory , removable storage  and non-removable storage  are all examples of computer readable storage media. Computer readable storage media includes, but is not limited to, RAM, ROM, EEPROM, flash memory or other memory technology, CD-ROM, digital versatile disks (DVD) or other optical storage, magnetic tape, magnetic disk storage or other magnetic storage devices, or any other medium which can be used to store the desired information and which can be accessed by computing device . Any such computer readable storage media may be part of computing device . Computing device  may also have input device(s)  such as keyboard, mouse, pen, voice input device, touch input device, and comparable input devices. Output device(s)  such as a display, speakers, printer, and other types of output devices may also be included. These devices are well known in the art and need not be discussed at length here.","Computing device  may also contain communication connections  that allow the device to communicate with other devices , such as over a wired or wireless network in a distributed computing environment, a satellite link, a cellular link, a short range network, and comparable mechanisms. Other devices  may include computer device(s) that execute communication applications, other directory or policy servers, and comparable devices. Communication connection(s)  is one example of communication media. Communication media can include therein computer readable instructions, data structures, program modules, or other data in a modulated data signal, such as a carrier wave or other transport mechanism, and includes any information delivery media. The term \u201cmodulated data signal\u201d means a signal that has one or more of its characteristics set or changed in such a manner as to encode information in the signal. By way of example, and not limitation, communication media includes wired media such as a wired network or direct-wired connection, and wireless media such as acoustic, RF, infrared and other wireless media.","Example embodiments also include methods. These methods can be implemented in any number of ways, including the structures described in this document. One such way is by machine operations, of devices of the type described in this document.","Another optional way is for one or more of the individual operations of the methods to be performed in conjunction with one or more human operators performing some. These human operators need not be collocated with each other, but each can be only with a machine that performs a portion of the program.",{"@attributes":{"id":"p-0048","num":"0047"},"figref":"FIG. 6","b":["600","600"]},"Process  begins with operation , where a query is received from an application pushing data to the mailbox. The flow of operations shown in process  may be executed multiple times by the application, for example, during a pre-check, during data push, at the completion of a data push, and similar stages. The data resiliency layer, in response, checks the data resiliency policy against the current replication status at operation . This may be done by communicating with a data replication solution, which may or may not be an integral part of the email system.","At decision operation , a determination is made whether the data resiliency policy is satisfied. If the policy is not yet satisfied, the application may be notified as shown in operation  and\/or further checks against the current policy performed. When the data resiliency policy is not satisfied, the application can choose to wait, to retry, or fail the current replication job. This, the application may transition into a wait mode, repeat the data write, or cancel its operations and provide a failure report depending on the response. According to some embodiments the application may be enabled to define one or more parameters associated with the implementation and querying of the DRP.","If the policy is determined to be satisfied at decision operation , a confirmation may be sent to the querying application at operation  such that the application can proceed to its next steps (e.g. checking the requirements when accepting jobs, checking the status before every batch of data being moved into a mailbox, etc.).","The operations included in process  are for illustration purposes. An email service with policy driven distributed data resiliency capability may be implemented by similar processes with fewer or additional steps, as well as in different order of operations using the principles described herein.","The above specification, examples and data provide a complete description of the manufacture and use of the composition of the embodiments. Although the subject matter has been described in language specific to structural features and\/or methodological acts, it is to be understood that the subject matter defined in the appended claims is not necessarily limited to the specific features or acts described above. Rather, the specific features and acts described above are disclosed as example forms of implementing the claims and embodiments."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0008","num":"0007"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 6"}]},"DETDESC":[{},{}]}
