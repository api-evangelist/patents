---
title: Universal system and method for representing and predicting human behavior
abstract: A system and method is disclosed for profiling subjects and objects based on subjects' responses to various objects for purposes of determining and presenting the objects most likely to generate the most positive response from each visitor. Object ratings, such as aesthetic response, preference, interest, or relevancy, are explicitly submitted by subjects or derived implicitly from visitor interactions with the objects. Objects include movies, books, songs, commercial products, news articles, advertisements or any other type of content or physical item. A profiling engine processes the ratings information and generates compact profiles of each subject and object based on the similarities and differences in affinities between the group of subjects and the group of objects. A recommendation engine then generates recommendations to a subject based on similarity between the subject and object profiles. The recommendation engine can also match subjects to other subjects and objects to other objects. The recommendation engine can also predict affinity across object catalogs and across time. Additionally, the object profiles can be clustered to create behavioral object categories. The system has application in personalization, behavioral targeting, Internet retailing and interactive radio, to name but a few applications.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08566256&OS=08566256&RS=08566256
owner: Certona Corporation
number: 08566256
owner_city: San Diego
owner_country: US
publication_date: 20090331
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE DRAWINGS"],"p":["The present invention relates to electronically marketing goods, services, content, and other entities through the automated analysis of human behavior. Particularly, the present invention relates to the representation of subject and object characteristics for purposes of efficient generation of recommendations; cross marketing between product, service, and content categories; and self-categorization of products by aesthetic similarity. The system has application in personalization, behavioral targeting, Internet retailing and interactive radio, to name but a few applications.","The consumer faces a profound number of possible choices when selecting most kinds of products, be it movies, music, books, travel, art, dining, employers, and so on, to the extent that the consumer must choose from well-publicized possibilities, such as through advertising, or rely on recommendations of others. In the first case the set of choices is severely limited to those that can be promoted to a broad audience. In the second case the consumer must weigh the similarity of his or her own tastes to the person making the recommendation, whether it be an acquaintance or media. In addition, the number of possibilities and the cost of acquisition, both in terms of time and money, of assessing possibilities, make it infeasible to sample a large number of possibilities to determine which are of interest to the consumer.","Recommendation systems rely on trying to best match a person's individual preferences to the characteristics of the available items. In general what is known about the subjects and objects is the set of affinities between subjects and objects, where the affinity {A} between subject i and object j is determined by explicit feedback from the subject or inferred from the subject's interaction (or non-interaction) with the object. The consistency of the affinity scale from subject to subject and object to object derives from the consistency of the goal of the subjects in the given environment, for example to make a purchase in a commerce environment or to read articles in a content environment.","The primary goal of the recommendation system is to predict for a given subject those objects for which the subject will have the greatest affinity. In general the subject characteristics can be represented by a vector S=(S, S, . . . , S) and the object characteristics can be represented by a vector B=(B, B, . . . , B), whereby the predicted affinity of the subject to the object is a function P=f(S, B). Various recommendation systems then differ in their representation of subject and object characteristics S and B and the similarity function f.","One method that has been used, commonly referred to as collaborative filtering, is to represent the subject as the set of object ratings that the subject has provided; i.e., S={R, R, . . . , R}, where Ris the subject's rating of object i. In most scenarios where recommendations are of use, the number of available items (e.g., such as catalog size) is going to be much larger than the number of items that have been rated by the subject, and so the set S is sparse. To generate a recommendation of a particular object to a particular subject, the subject's profile is compared to the profiles of other subjects that have rated the object. Given the similarities and dissimilarities of objects that have been rated in common, an estimate of the subject's response is generated. In a recommendation system, the system would generate estimates for a variety of objects rated by similar people and return as recommendations the objects with the highest predicted ratings.","Effectively, this type of system is a \u201cmentored\u201d system, whereby each subject is matched to a set of other subjects with similar tastes that have rated objects that the subject has not rated. This approach has several drawbacks, which include: recommendations can only be made where the subject's small set of mentors have provided coverage; the method is dependent on a class of users that have provided a large number of ratings (i.e., mentors), or else the system database must be searched to provide mentors appropriate to each requested object; the method is limited in capacity to make recommendations across various categories (cross marketing); the method does not make full use of all data for each subject (that is, the method is restricted to the subset of mentors); the representation of the subject, which is the set of ratings for each rated object, is not compact and increases linearly with the number of rated objects; subject representations are not portable to other recommendation systems; requires lengthy questionnaires to introduce a new subject into the system; and faces combinatorial challenges to find the best mentor for a given user and is therefore not scalable to large user populations.","Additional desired characteristics of a recommendation system that cannot be addressed by the mentor method include inverse modeling of subject representations back to physical attributes, such as demographics or psychographics, and identification and representation of object similarities.","Another approach is shopping basket analysis, which makes suggestions based on objects that have been purchased by other subjects at the same time as an object that has been selected by the targeted subject. However, this approach relies on transactional dependency and does not allow prediction of preference for objects that are not purchased together. In particular this method cannot associate subject\/object affinities across catalog or across time as catalog items are replaced by similar items. Shopping basket analysis is also not specific to individual subjects, but rather to aggregate transaction histories across all subjects. By contrast, the present invention automatically normalizes all product profiles across product categories and can combine information across single vendor transaction histories.","Other approaches classify objects according to expert defined categories or attributes, whereby each object is rated by each attribute and then recommendations are made by matching the expressed interests of the subject to the attributes of the objects. Expert systems have the drawback that they are not self-adapting; that is, they require expert classification or coding. This means that such systems are specific to a single product domain. Also, because they are not data driven, they are not able to process large, diverse, and constantly changing transaction histories.","Predictive modeling techniques use demographics to model subjects. Not only are demographics an indirect substitute for aesthetic opinions and therefore inherently inaccurate, this is invasive of the subject's privacy and only specific to groups of subjects and not to individual subjects.","In accordance with the present invention, a method and system is presented for collecting subjects' affinities to objects, extracting subject and object profiles, and generating recommendations to subjects of objects that were rated by other subjects. This invention is sometimes referred to in this patent by its commercial trademarked name, Resonance\u00ae.","An object of the invention is to provide a means of recommending objects to subjects based on either explicit or behaviorally inferred ratings of other subjects of those objects and of commonly rated objects.","Another object of the invention is to compactly and uniformly represent subject and object profiles so that the affinity, or preference, of the subject to the object can be quickly and efficiently predicted, and so that the number of features in the profiles of the subjects and objects is not directly dependent on the number of subjects or objects in the system.","Another object of the invention is to create a representation of objects that is universal across all types of objects, so that all types of objects can be compared to one another and the subject's interaction with one set of objects can be extrapolated to other types of objects, and that the representation is derived solely from the collective interaction of subjects with the set of objects (catalog) and does not require detailed object information or expert knowledge of object characteristics.","Another object of the invention is to enable the use of all subject-object interactions, and not just, for example, purchase behavior, to form profiles of subject and objects for faster profiling and greater accuracy and responsiveness to temporal changes in site merchandising or customer behavior.","Another object of the invention is to create object profiles as well as subject profiles, so that objects can be readily indexed by aesthetic or other categories and so that objects can be readily associated across product categories by aesthetic similarity.","Another object of the invention is to create subject and object profiles that can be used to relate the derived aesthetic attributes to other objective measures of subjects, such as personality type or demographics, and objects, such as color or shape.","Another object of the invention is to collect ratings information from multiple applications while protecting the anonymity of the subject across different applications and minimizing the need to normalize object information (metadata) across catalogs.","Another object of the invention is to combine the recommendations of the system with explicit human merchandising objectives either through \u201chard\u201d rules that filter results by specified criteria or \u201csoft\u201d rules that bias the results towards a defined business goal.","Another object of the invention is to provide recommendations to groups of subjects based on the best match to their collective profiles.","Another object of the invention is to enhance product and content marketing by characterizing the attributes of object profiles.","Another object of the invention is to identify appropriate subjects for the marketing of a particular object.","The present invention is a system and method for predicting subject responses to objects based on other subjects' responses to that and other objects. The process of matching subject and object profiles produces a predicted response score that can be used to rank recommended content. The scores can be used as is or combined with other business logic to render the final recommendation rank. The invention can be applied to a broad range of applications, including the retailing of single consumption items, such as non-recurring purchases or content views, where the previous purchase or view of an object cannot be used to predict additional purchases or views of the same object. The invention can also be used to predict subject responses to recurring purchases and to recommend new consumables.","The invention considers the interaction of subjects and objects. The subject is an active entity that initiates transactions. The subject consumes or experiences objects and provides feedback on the level of satisfaction with the object. The subject could be a single person or a corporate entity, such as a business. The object is a passive target of interaction by the subject. This could be a physical object, such as a consumer good, for example cars, MP3 player, or ice cream; media, such as music, movies, books, art, or plays; or even a person, as in the case of a job search or a matchmaking service. In the case of active entities, it is possible for the subject and object to reverse roles depending on the situation.","The invention provides a novel solution to the problem of how to identify objects, for example products, that will appeal to a particular subject, for example a person, where the large number of possible objects, including less desirable objects that are descriptively similar but aesthetically different or where some objects may appeal highly to a limited population of subjects while being undesirable to the broader population, makes it difficult for the subject to notice the objects that the subject wants simply by browsing the entire set of objects. This provides a breakthrough for target marketing and retail applications because it allows the consumer, solely by behavior, to \u201cself-market\u201d or \u201cpull\u201d those products which are of interest, rather than requiring that retailers \u201cpush\u201d potentially unwanted products through advertising or other inefficient means.","The invention also addresses the issue of consumer privacy because it does not profile the consumer using personal demographics information, which consumers find both invasive and tedious to enter. Thus Resonance improves retailers' ability to target customers, while simultaneously making it easier for consumers to participate.","The invention works by forming profiles of subjects, for example consumers, and objects, such as goods or media, based on aesthetic evaluations of objects by subjects. The invention does not require a priori information about either subjects, such as demographics or psychographics, or objects, such as classifications or genres. Rather, it automatically generates representations of subjects and objects solely from the subjects' interaction with the objects. Because it creates its own abstract representation of subjects, it allows retailers to transparently target the subject without compromising subject privacy through the collection and modeling of sensitive personal information. The profiles can also be extended across catalogs, product or content domains, or across websites or stores.","Note that the identification of subjects and objects is not a physical one and may change depending on the application. For example, in a consumer movie recommendation application, the person requesting recommendations is the subject and the movie is the object. In a dating service application, a person would be considered a subject when searching for matches and an object when being searched by others. Similarly, in the case of employer\/employee matching, companies and persons would alternate between the roles of subject and object. Note that in cases where an entity can assume different roles, a different profile would be created for each role.","Because the profiles are symmetric (both subjects and objects are profiled to the same representation), subjects can be matched to other subjects or objects, and objects can be matched to other objects or subjects. For example subject-subject matching could be used on a social networking site to connect people of like interests or on an online store to order product reviews according to the similarity of the reviewer to the reader. Similarly, object-object matching can be used to match keywords to products or content, advertisements to news articles, or promotional banners to referring affiliate sites.","Subjects and objects are represented as a set of derived abstract attributes, or feature vectors. In addition to driving the matching process, the distributions of the dimensions can be used to predict which items will evoke strong reactions (negative and positive) from a typical group of subjects and which items will evoke a more even response across those subjects.","The invention also relates to the field of neural networks and optimization. Generally, neural networks take an input vector through a transfer function to produce an output. Neural network training methods are classified into supervised and unsupervised models. In supervised models the training method adapts the weights of the transfer function to minimize some function of the outputs, such as the mean squared error between the outputs produced by the transformation of the inputs and the expected outputs, which are known for a certain set of inputs commonly known as the training set. Once the weights have been trained, the network can be used to predict outputs for operational inputs. In unsupervised networks the data is clustered in some way that makes it useful for subsequent processing; however, the desired result, namely the closest matching template, is not known during training.","The proposed method is supervised insofar as the desired outputs are known as part of a training set; however, similar to unsupervised methods, the method is also self-organizing insofar as the inputs are not known; i.e., the method derives the input values using a known transfer function and known outputs.","Because of the large number of weights or adapted parameters of the system, which scales as the number of subjects and objects, a key aspect of the method is that the weights for each subject or object are decoupled from other subjects and objects when updated separately. This allows individual subjects and objects to be trained by different processing units, which allows the method to scale up to large numbers of subjects and objects, which may ultimately total millions or tens of millions or more.","A key improvement of the invention over collaborative filters is that it creates not just profiles of the subjects, but profiles of the objects as well. This provides several advantages, including rapid and scalable prediction of subject to object affinities; straightforward cross marketing across product categories; and sorting of objects by aesthetic categories for purposes of browsing and selecting items for consumption or association, such as selecting musical recordings to go with a movie production.",{"@attributes":{"id":"p-0059","num":"0058"},"figref":"FIG. 1"},"The end-user interface can be implemented using a variety of devices, including a personal computer, an in-store kiosk, a personal digital assistant (PDA), a mobile phone, a set top box, or an ordinary phone with voice capability.",{"@attributes":{"id":"p-0061","num":"0060"},"figref":"FIG. 2"},"The recommendation server stores the received ratings in an affinities database. Each entry of the affinities database consists of three values (subject_id, object_id, affinity), where the subject_id is a unique identifier of the person or other agent that generated the affinity, the object_id is a unique identifier of the entity that is being rated, and the affinity is a value indicating the affinity of the subject to the object. The rating can be any integer or continuous value that allows objects to be ranked by preference. Affinities can be entered explicitly or implicitly. Explicit affinities are those that result from a specific response of the subject, such as when the subject rates objects according to a predetermined rating scale. This can be as simple as a \u201cYes\/No\u201d, \u201cGood\/Bad\u201d, or \u201cSatisfied\/Dissatisfied\u201d, or a more graduated scale, such as \u201c1 to 10\u201d or \u201cLove, Like, OK, Dislike, Hate\u201d. Implicit affinities are those that are derived from the behavior of the user, such as online browsing or other interactions with the application's catalog of items. Affinities can also be inferred from the subject's interaction with an object for both recurring and non-recurring transactions. For example, in applications where the purchase or experience of the object is normally repeated by the subject, such as the purchase of consumer products, for example soap, ice cream, cereal, or wine, the subject's affinity can be inferred from the frequency of purchase by the subject; i.e., a single purchase would imply dissatisfaction, whereas frequent purchase, relative to the typical rate of consumption for that product across the entire subject population, would imply high satisfaction. As in the case of non-recurring transactions, the absence of an affinity would not be interpreted as an indication of subject preference either way. Similarly, for television shows, watching nearly every episode of a series would indicate high satisfaction, whereas occasional watching, particularly incomplete viewing, would indicate low satisfaction. For music playback, such as a radio, individual songs would be rated according to the amount of time that the subject listened to the song relative to the total opportunity that the subject had to listen.","The end-user interface verifies the identity of the subject based on some type of user ID generated by the application, such as a user name and password, biometric, browser cookie, mobile phone ID or other identification. In order to allow a subject to be known to the recommendation system through different applications, the system provides a user\/subject lookup table that can map the user's different application identities to the common subject ID. Similarly, the application may present multiple variations of the same product, for example a hardbound vs. paperback version of the same book, or multiple sizes of the same shirt, which are mapped to the common object through the item\/object lookup table.",{"@attributes":{"id":"p-0064","num":"0063"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0065","num":"0064"},"figref":"FIG. 4"},"The data collector converts the raw behavior data, such as clickstreams, into affinities, which are then processed into user (subject) and content (object) profiles. When a request is made to the recommendation engine for targeted content, the recommendation engine combines the subject and object profiles with the catalog metadata to find the optimal content subject to any business rules, or other restrictions, put on the results.","The details of the processing to generate recommendations for a single user are shown in . The recommendation engine compares the subject profile vector, S, to every object vector, B, in the category set requested in the recommendation request. In the preferred embodiment the match score between subject i and object j is calculated using the dot product P=S\u00b7B. The resulting set of scores is ranked from highest to lowest value, and the top values are returned to the application as the recommended objects for the user. Alternative match scoring methods include using Euclidean distance instead of the dot product, whereby the objects are ranked by closest distance first. Other alternative embodiments include requesting the match scores in other orders, such as lowest values first (e.g., \u201cBottom Ten\u201d) or alphabetic above a minimum score threshold, according to the needs of the application.","Further description of the subject and object representation for profiling subjects and objects and generating recommendations follows.","A subject is represented by a subject affinity vector S=(S, S, . . . , S), where N is the number of dimensions of the vector.","An object is represented by an object affinity vector B=(B, B, . . . , B), where N is the number of dimensions of the vector.","The number of dimensions of the subject and object vectors must be the same. The number of dimensions needed to represent a particular set of subjects and objects is not known a priori and is derived automatically by the system according to a method to be described further below.","The affinity, A, of a subject to an object is a single numeric value. This value is captured via feedback from the user, either directly from a user rating or indirectly through user interaction with the object environment. As presented to the subject in the application user interface, typical affinity ranges are 1 to 10, 1 to 5 stars, or like\/dislike. Internally, the affinities are scaled between 0 and 1, with 0 being least affinity and 1 being highest affinity. In an alternative implementation affinities can be scaled from \u22121 to +1. Note that an affinity can also be given a weight, w, which is used to determine how much consideration to give that affinity in deriving the associated subject and object profiles.","The predicted affinity, P, of a subject to an object is modeled by the dot product between their vectors:",{"@attributes":{"id":"p-0074","num":"0073"},"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mi":"P","mo":"=","mrow":{"mrow":[{"mi":["S","B"],"mo":"\u00b7"},{"munderover":{"mo":"\u2211","mrow":{"mi":"i","mo":"=","mn":"1"},"mi":"N"},"mo":"\u2062","mrow":{"msub":{"mi":["S","i"]},"mo":"\u00d7","mrow":{"msub":{"mi":["B","i"]},"mo":"."}}}],"mo":"="}}}}},"In the preferred embodiment the system predicts affinities by calculating them \u201con-the-fly\u201d when requested by the recommendation application server. It is also possible to calculate the affinities as the vectors are updated; however, this results in considerable additional storage as well as significant database traffic to continually resave predicted affinities when vectors are updated. The dynamic method is typically faster because it minimizes database traffic and supports parallel distributed processing, which allows the system to be scaled to a large number of subjects and objects.",{"@attributes":{"id":"p-0076","num":"0075"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0077","num":"0076"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0078","num":"0077"},"maths":{"@attributes":{"id":"MATH-US-00002","num":"00002"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":{"msub":{"mi":["f","AE"]},"mo":"\u2261","msup":{"mrow":[{"mo":["[","]"],"mrow":{"mfrac":{"mn":"1","mi":"G"},"mo":"\u2062","mrow":{"munderover":{"mo":"\u2211","mrow":{"mi":"i","mo":"=","mn":"1"},"mi":"Nsubjects"},"mo":"\u2062","mrow":{"munderover":{"mo":"\u2211","mrow":{"mi":"j","mo":"=","mn":"1"},"mi":"Nobjects"},"mo":"\u2062","msup":{"mrow":{"mo":["(",")"],"mrow":{"msub":{"mi":["A","ij"]},"mo":"-","mrow":{"msub":{"mi":["w","ij"]},"mo":"\u2062","mrow":{"msub":[{"mi":["S","i"]},{"mi":["B","j"]}],"mo":"\u00b7"}}}},"mn":"2"}}}}},{"mn":["1","2"],"mo":"\/"}]}},"mo":","}}},"br":[{},{}],"sub":["ij ","ij ","subjects","objects"],"in-line-formulae":[{},{}],"i":["G=N","\u00d7N","\u00d7N. "]},"As shown in the figure, determination of the optimal number of dimensions, N, for the subject and object vectors is an iterative process. At each iteration the subject and object vectors are calculated using the method described below. Part of the data, called the test set, is not included in the modeling, or training, process. The test set provides an independent measurement of the predictive capability of the number of dimensions for that iteration. If the test set error is reduced for that iteration relative to the previous iteration, then the next number of dimensions (N\u2192N+1) is trained and the testing process is repeated. Regardless of the change in the training set error, which will almost always decline with an increased number of model parameters, or vector dimensions, if the test error for the iteration is higher than the previous, then the training process is terminated, and the subject and object vectors for the previous, best iteration are saved for active, or live, system use. Note that at a given iteration, all subjects are eliminated that have rated fewer than N objects, and all objects are eliminated that have fewer than N ratings, where N is the number of vector dimensions at that iteration.","In practice Awill only exist for certain subjects and objects and will likely be sparse. That is, it is not necessary for every subject to rate every object, but it is necessary that each subject rate at least as many objects as needed to meet the above training requirement for a specified number of profile dimensions. Further, the subject and\/or object sets might be restricted for other specific retraining purposes, such as following the insertion or modification of an affinity. In this case we define A({S}, {B}) as the set of affinities for which subject i is a member of {S} and object j is a member of {B}. Affinity weights range from 0 to 1. The weight, w, is determined by the circumstances by which the affinity is measured. If the affinity comes from an explicit rating by the subject, then the measurement is fully weighted (w=1), whereas, if the affinity was inferred by the subject not selecting a specific option from a list of options, then the measurement is lower weighted. Weighting assignments for different actions vary depending upon the application.","There are several methods for calculating the subject and object vectors. In one method the subject vectors are updated incrementally from step t to step t+1 via gradient descent:",{"@attributes":{"id":"p-0082","num":"0081"},"maths":{"@attributes":{"id":"MATH-US-00003","num":"00003"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"msub":{"mi":["S","i"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":"t","mo":"+","mn":"1"}}},{"mrow":[{"msub":{"mi":["S","i"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},{"mi":"\u03b1","mo":"\u2062","mfrac":{"mrow":[{"mo":"\u2202","msub":{"mi":["f","AE"]}},{"mo":"\u2202","mrow":{"msub":{"mi":["S","i"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}}}]}}],"mo":"-"}],"mo":"="}}},"br":{}},{"@attributes":{"id":"p-0083","num":"0082"},"maths":{"@attributes":{"id":"MATH-US-00004","num":"00004"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"msub":{"mi":["S","i"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":"t","mo":"+","mn":"1"}}},{"mrow":[{"msub":{"mi":["S","i"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},{"mfrac":{"mn":"1","mi":"G"},"mo":"\u2062","mrow":{"munderover":{"mo":"\u2211","mrow":{"mi":"i","mo":"=","mn":"1"},"mi":"Nsubjects"},"mo":"\u2062","mrow":{"munderover":{"mo":"\u2211","mrow":{"mi":"j","mo":"=","mn":"1"},"mi":"Nobjects"},"mo":"\u2062","mrow":{"mrow":[{"msub":{"mi":["B","j"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},{"mrow":{"mo":["(",")"],"mrow":{"msub":{"mi":["A","ij"]},"mo":"-","mrow":{"msub":{"mi":["w","ij"]},"mo":"\u2062","mrow":{"mrow":[{"msub":{"mi":["S","i"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},{"msub":{"mi":["B","j"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}}],"mo":"\u00b7"}}}},"mo":"."}],"mo":"\u2062"}}}}],"mo":"+"}],"mo":"="}}}},"Similarly, the object vectors are updated according to",{"@attributes":{"id":"p-0085","num":"0084"},"maths":{"@attributes":{"id":"MATH-US-00005","num":"00005"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"msub":{"mi":["B","j"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":"t","mo":"+","mn":"1"}}},{"mrow":[{"msub":{"mi":["B","j"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},{"mi":"\u03b1","mo":"\u2062","mfrac":{"mrow":[{"mo":"\u2202","msub":{"mi":["f","AE"]}},{"mo":"\u2202","mrow":{"msub":{"mi":["B","j"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}}}]}}],"mo":"-"}],"mo":"="}}},"br":{}},{"@attributes":{"id":"p-0086","num":"0085"},"maths":{"@attributes":{"id":"MATH-US-00006","num":"00006"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"msub":{"mi":["B","j"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":"t","mo":"+","mn":"1"}}},{"mrow":[{"msub":{"mi":["B","j"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},{"mfrac":{"mn":"1","mi":"G"},"mo":"\u2062","mrow":{"munderover":{"mo":"\u2211","mrow":{"mi":"i","mo":"=","mn":"1"},"mi":"Nsubjects"},"mo":"\u2062","mrow":{"munderover":{"mo":"\u2211","mrow":{"mi":"j","mo":"=","mn":"1"},"mi":"Nobjects"},"mo":"\u2062","mrow":{"mrow":[{"msub":{"mi":["S","i"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},{"mrow":{"mo":["(",")"],"mrow":{"msub":{"mi":["A","ij"]},"mo":"-","mrow":{"msub":{"mi":["w","ij"]},"mo":"\u2062","mrow":{"mrow":[{"msub":{"mi":["S","i"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},{"msub":{"mi":["B","j"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}}],"mo":"\u00b7"}}}},"mo":"."}],"mo":"\u2062"}}}}],"mo":"+"}],"mo":"="}}}},"At the update step t, all subject and object vectors are updated according to the above equations. The cost function is then re-evaluated with the t+1 vectors to determine whether it has reached the minimum within suitable criteria. In one embodiment the criteria are as follows:","If the update step decreases the cost function, then the learning rate, \u03b1, is increased by 10 percent up to a maximum of \u03b1=2. If the update step overshoots the minimum so that the cost function actually increases, then the learning rate is decreased by 50 percent (a factor of two) and the update step is repeated. The update process is considered completed when the cost function is less than 10 to the power of \u22126 or when the learning rate is less than 10 to the power of \u221212. The learning process is aborted if the cost function increases to greater than 100. The actual numerical values used in these processes are configurable and are adjusted to make the learning process as efficient as possible without introducing numerical instability.","If the termination criteria are met, then the update process is stopped. If the termination criteria are not met, then the update process is repeated until the acceptance criteria are met. Once the training is completed, the subject and object vectors are saved their respective profile databases.","In general the affinities will be used directly in the above profiling process; however, there are some circumstances where there may be variability in ratings or other information provided by subjects, including variations in time browsing pages on a website. In these cases performance of the system can be improved by normalizing the affinities for each individual. There are different possible normalization schemes, but the most commonly used is so-called Z scaling, whereby the affinity value is replaced by the mean-subtracted value divided by the variance of the subject's affinities:\n\n=(\u2212average())\/variance()\n","In the preferred embodiment the affinities range from 0 to 1 and the profile vectors (subjects and objects) are unconstrained. In this case it is possible for the predicted affinity to exceed the maximum affinity value of 1; however, the predicted affinities can still be scaled and ranked. Alternatively, it is also possible to limit the magnitude of the vectors either so that no attribute dimension can contribute more than a certain amount or to limit statistical noise. For example, when applying this \u201cbox\u201d constraint, any dimension that exceeds 1 would be reduced to 1. Alternatively, the entire vector may be scaled to a fixed length (e.g., unit length) to emphasize the discovery of object or subject similarities without regard to popularity or intensity of the items.","There are several subject and object vector update modes, described below, which define different sets of subject and object vectors onto which to apply the above training method.","The most general case and the one that is applied to initialize the profiles is a complete re-training of all subject and object affinity vectors. This is done when adding a large volume of external data, changing\/testing the number of vector dimensions, or as a quality assurance process to compare the incremental training with the (presumed optimal) complete training process.","The training process is as follows:\n\n","Upon completion of the training, the subject and object vectors are updated in their respective databases. Note that the above method bootstraps the subject and object vectors simultaneously, without requiring that the subject vectors be known in order to profile objects and vice versa. Once the bootstrapping process is completed, subsequent updates can be done on a single vector basis against the existing trained conjugate (subject or object) vectors. For example, a background process would run continuously to re-train an operational affinity database. Unlike the non-incremental general affinity update, this method only changes one subject or object vector at a time. Since this process is less complete than the general training method described above, the error function, or match of predicted and actual affinities, is periodically monitored and if it rises above an acceptability threshold, the system performs a complete bootstrap training.","The training process is as follows:\n\n",{"@attributes":{"id":"p-0097","num":"0105"},"figref":"FIG. 8","sub":"AE "},"Unlike other modeling approaches, which determine the model parameters from a set of known input\/output relationships, the present invention derives both the inputs and the model parameters from a set of known outputs and a specified transfer function (e.g., dot product between subject vector and object vector). In this sense the subject and object vectors have roles both as input vectors and as model parameters. More specifically, when the subject vector is calculated, the object vectors are treated as inputs to a linear regression model and the subject vector is the set of linear coefficients. However, when the object vector is calculated, the roles are reversed, and the subject vectors are the inputs and the object vector is the set of model coefficients. Although each individual fit can be seen as a linear model involving a small number of parameters, the aggregate process of simultaneously building both subject and object vectors is a nonlinear model with a very large number of parameters.","A key advantage of this approach is that it automatically derives the attributes that describe the subjects and objects, as opposed to requiring an detailed analysis of the domain of the application and expert definition of a set of attributes that may only apply to that domain. For this reason the invention is self-adaptive and self-optimizing to any application, without regard to types of objects, behavior of subjects, language, or culture. A second advantage is that this method automatically determines the optimal number of dimensions to describe the subjects and objects, resulting in maximum predictive effectiveness with the most compact and computationally efficient form. A third advantage is that, unlike models where the inputs are fixed, because the model inputs in this method are self-derived, it is possible to calculate the dimensions sequentially instead of simultaneously. Not only is this more computationally efficient, but because each successive dimension is trained against the residuals of the affinities, the dimensions are naturally ranked and orthogonal, effectively reproducing a principal components factorization of the affinity data. This makes it possible to initiate a profile of an object or particularly a subject prior to obtaining a number of samples equal to or more than the number of dimensions in the model. Instead, the underdetermined subject or object vector can be calculated up to the dimension equal to the number of samples and the subsequent dimensions can be set to zero.",{"@attributes":{"id":"p-0100","num":"0108"},"figref":"FIG. 9"},"The training process is as follows:\n\n",{"@attributes":{"id":"p-0102","num":"0114"},"figref":"FIG. 10"},"The training process is as follows:\n\n","An embodiment of the invention in a recommendation application is described next. Objects that can be processed with the invention include, but are not limited to, consumer products, music, books, theatre, art, employer\/employee matching, and travel.  shows an embodiment of a movie selection application, which works as follows: A new user creates an account and logs into the movie guide application. This could be a website accessible from either a PC or a mobile phone, or it could be an in-store kiosk or other interface. Because preferences have not yet been given by the new user and the system can only build the user's profile by modeling the user's profile against other users, the application defaults to the \u201cCommunity\u201d list, which presents the movies that the subject has not viewed rank-ordered by the system prediction of greatest user response. As soon as the user rates enough movies (i.e., greater than or equal to the number of dimensions of the profile vector), then the system generates the user's profile and offers customized recommendations to the user. Once a user has been profiled, then the user subsequently enters the site at the recommendation list. This maximizes convenience to the user while driving the user to provide ratings of items that the user has viewed based on previous recommendations.","Users can also browse and rate movies that have not been rated by other users. Similar to the new user, a new movie will be profiled and recommended to users when enough ratings have been entered by profiled users; that is, when the number of ratings is greater than or equal to the number of dimension of the profile vector.","The system could also be used in an employer-employee matching application, such as a job posting website. The website would allow companies (employers) to post jobs, which would then be browsed and responded to by potential employees. At the same time job candidates (employees) would be able to post their resumes, which could then be searched and responded to by potential employers. In this case the roles would depend on the user of the application. When the employee is using the application, then the employee would be the subject and the employer would be the object. When the employer is using the application, then the employer would be the subject and the employee would be the object. Thus, both employers and employees would be profiled as both subjects and objects. Note that there is no requirement for a person's subject and object profiles to match, since their roles are much different. Similarly, when the system is applied to a dating service, a member will be profiled and matched as a subject when searching for potential dates and profiled and matched as an object when targeted by potential dates.","In many applications, such as entertainment, food, or travel, the object will be consumed by multiple subjects. In this case it is desirable to determine the best recommendations for a group of people as opposed to a single individual.  shows the detailed data flows and operation of the system to generate recommendations for a group of users. This embodiment is also referred to in this patent by the trademarked name, Circle of Friends\u2122. To start the process, the system first checks the set of subjects to see whether all have profiles. If not, then the system discards the unprofiled subjects or else notifies the user requesting group recorminendations to select a different set of friends. Once the recommendation set has been validated, then the system retrieves the subject vectors for all subjects in the group and matches them against all of the object vectors of consideration. The subjects' matching scores are then combined, and the top ranking objects across the entire group are returned to the application for display or other use. The system combines the list of recommendations for the users in the group according to",{"@attributes":{"id":"p-0108","num":"0124"},"maths":{"@attributes":{"id":"MATH-US-00007","num":"00007"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":{"msub":{"mi":["P","group"]},"mo":"=","msup":{"mrow":[{"mo":["(",")"],"mrow":{"munderover":{"mo":"\u220f","mrow":{"mi":"i","mo":"=","mn":"1"},"msub":{"mi":["M","Group"]}},"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"msub":{"mi":["P","i"]}}},{"mn":"1","mo":"\/","msub":{"mi":["M","Group"]}}]}},"mo":","}}},"br":{},"sub":["group ","i ","group "],"sup":"th "},{"@attributes":{"id":"p-0109","num":"0125"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0110","num":"0126"},"figref":["FIG. 14","FIG. 11"]},{"@attributes":{"id":"p-0111","num":"0127"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0112","num":"0128"},"figref":"FIG. 16"},{"@attributes":{"id":"p-0113","num":"0129"},"figref":["FIG. 17","FIG. 2","FIG. 2"]},{"@attributes":{"id":"p-0114","num":"0130"},"figref":["FIG. 18","FIG. 2","FIG. 2"]},{"@attributes":{"id":"p-0115","num":"0131"},"figref":["FIG. 19","FIG. 2","FIG. 2"]},{"@attributes":{"id":"p-0116","num":"0132"},"figref":"FIG. 20"},{"@attributes":{"id":"p-0117","num":"0133"},"figref":"FIG. 21"},"More specifically, based on interaction with the player, the user's affinity to a song is modified as shown in the table below. Affinities range from 0 to 1.",{"@attributes":{"id":"p-0119","num":"0135"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"63pt","align":"left"}}],"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}},{"entry":["Current Song","Current","Affinity Update",{}]},{"entry":["Termination","Rated?","(g = % listened)","Explanation"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["<any>","Y","User rating","user rating overrides"]},{"entry":[{},{},{},"all other actions"]},{"entry":["skip before 7 seconds","N","None","not interested"]},{"entry":["skip after 7 seconds","N","g","heard enough"]},{"entry":["change channel","N","g","not interested or"]},{"entry":[{},{},{},"heard enough"]},{"entry":["song completed","N","1.0 (g = 100%)"]},{"entry":["volume up\/volume","N","ignore"]},{"entry":"down"},{"entry":["Replay","N","additive g"]},{"entry":[{},{},"(up to 100%)"]},{"entry":["Pause","N","Boost","indicates additional"]},{"entry":[{},{},{},"interest"]},{"entry":["Close","N","None","not interested"]},{"entry":["preferences","N","None","not interested"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]}}}}},"Inference of similarity relies on comparing the amount to which the user listens to a song relative to the extent expected from the predicted affinity. That is, consecutive songs are similar to the extent that they're both listened to as expected.",{"@attributes":{"id":"p-0121","num":"0137"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"5"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"5","colwidth":"49pt","align":"left"}}],"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"5","align":"center","rowsep":"1"}}},{"entry":[{},{},{},"Similarity",{}]},{"entry":["Previous",{},{},"Update"]},{"entry":["Song","Current Song","Current","f = min((listened\/"]},{"entry":["Termination","Termination","Rated?","expected), 1)","Explanation"]},{"entry":{"@attributes":{"namest":"1","nameend":"5","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["skip before 7","skip before 7","N\/A","3 \u00b7 f1 \u00b7 f2 \u2212",{}]},{"entry":["seconds","seconds",{},"f1 \u2212 f2"]},{"entry":["skip after 7","skip after 7"]},{"entry":["seconds","seconds"]},{"entry":["song","song"]},{"entry":["completed","completed"]},{"entry":["Start",{},{},"none","reset, nothing"]},{"entry":[{},{},{},{},"to compare to"]},{"entry":["preferences",{},{},"none","reset, nothing"]},{"entry":[{},{},{},{},"to compare to"]},{"entry":["change",{},{},"none","reset, nothing"]},{"entry":["channel",{},{},{},"to compare to"]},{"entry":[{},"close",{},"none","Abort"]},{"entry":[{},"preferences",{},"none","abort"]},{"entry":[{},"change",{},"none","abort"]},{"entry":[{},"channel"]},{"entry":{"@attributes":{"namest":"1","nameend":"5","align":"center","rowsep":"1"}}}]}}}}},"The expected listening fraction is the user rating if the user has rated the song (implicitly or explicitly), including the case of the rating having just occurred; the predicted affinity if there is a predicted affinity; and the amount listened to if the song is novel (f=1). An exception is that if the song is skipped before 7 seconds, then f=0, regardless of expectation.","The inference of similarity can be improved by selection of the reference song, f1. The use of adjacent songs, independent of the amount listened, suffers from two significant drawbacks during the bootstrapping process: First, the relative rarity of two similar songs falling consecutively means that more interactions are negative; i.e., if the user is selecting for a specific mood, then most of the songs will be skipped, resulting in most feedback being of mild dissimilarity. Second, as the user skips two consecutive songs that the user might of otherwise have considered similar in a different mood, the system would consider these orthogonal, although opposite. To better capture the mood, a better approach is to establish a \u201cmood reference\u201d. This is a song that the user has listened to a reasonable amount, either as a percentage of the song listened or a percentage of the expected amount. Given that a song is played in the proper mood when it is fully listened to, then use of the actual percentage is desirable, although the threshold to accept a song as a reference should not be too high (e.g., 50%). This results in the following method:\n\n","According to the settings of the above parameters, the playlist is generated as:\n\n","The playlist is created from above ordered set, inserting novel song every T songs (if novel songs available). If insertion of a song violates repeat interval R, then do not include the song. Stop at L or at the last song if P did not return enough songs (due to too high of an acceptance threshold).","The user's channel affinity is predicted as:",{"@attributes":{"id":"p-0126","num":"0000"},"ul":{"@attributes":{"id":"ul0012","list-style":"none"},"li":["SELECT max(\u2225C-O\u2225), ave(G) FROM TOP L songs","WHEREG>=A","ORDER BY \u2225C-O\u2225"]}},{"@attributes":{"id":"p-0127","num":"0165"},"figref":"FIG. 22"},{"@attributes":{"id":"p-0128","num":"0166"},"figref":"FIG. 23","ul":{"@attributes":{"id":"ul0013","list-style":"none"},"li":{"@attributes":{"id":"ul0013-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0014","list-style":"none"},"li":["Get all subject and object vectors {V} common to both affinity spaces and create lookup tables. If there are no common vectors between the spaces, then use the principal axis vectors of the distributions of the subject and object vectors.","Calculate the rotation between spaces that minimizes the differences between the common vectors. The measure of difference will be the same measure that is used to determine matches of subjects and objects within a single space. This is usually the dot product, but alternatively could be Euclidean distance or some other vector distance metric.","Rotate all of the vectors in one space by above rotation. Note that this is a multi-dimensional rotation.","Measure success by the sum of the errors between the common vectors in each space."]}}}},"The above application embodiments are for example only. The invention does not restrict the design and implementation of the application in any way, as long as the interface to the recommendation engine matches the protocols defined by the interface guidelines. A key aspect of the invention is that, unlike other methods, it does not in fact require knowledge of the application and does not need to parse the application's content, other than to align the application's subjects and objects with the internal catalog in the case that the application holder desires to aggregate data with other applications.","The foregoing description of a preferred embodiment has been presented by way of example only, and should not be read in a limiting sense. The scope of the present invention is defined only by the following claims.","In the claims reference characters used to designate claim steps are provided for convenience of description only, and are not intended to imply a particular order for performing the steps."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0037","num":"0036"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0038","num":"0037"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0039","num":"0038"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0040","num":"0039"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0041","num":"0040"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0042","num":"0041"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0043","num":"0042"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0044","num":"0043"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0045","num":"0044"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0046","num":"0045"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0047","num":"0046"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0048","num":"0047"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0049","num":"0048"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0050","num":"0049"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0051","num":"0050"},"figref":"FIG. 16"},{"@attributes":{"id":"p-0052","num":"0051"},"figref":"FIG. 17"},{"@attributes":{"id":"p-0053","num":"0052"},"figref":"FIG. 18"},{"@attributes":{"id":"p-0054","num":"0053"},"figref":"FIG. 19"},{"@attributes":{"id":"p-0055","num":"0054"},"figref":"FIG. 20"},{"@attributes":{"id":"p-0056","num":"0055"},"figref":"FIG. 21"},{"@attributes":{"id":"p-0057","num":"0056"},"figref":"FIG. 22"},{"@attributes":{"id":"p-0058","num":"0057"},"figref":"FIG. 23"}]},"DETDESC":[{},{}]}
