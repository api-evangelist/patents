---
title: Method and apparatus for facilitating the operation of an on-site energy storage system to co-optimize battery dispatch
abstract: Various embodiments are provided for facilitating the operation and control of a fleet of on-site energy assets and optimizing energy dispatch across the fleet, thereby facilitating the use of the on-site energy assets instead of grid-supplied electric consumption. An example system may comprise a central platform and a plurality of on-site gateway devices configured to perform on-site asset control. An example method may comprise receiving a service availability call, performing fleet-level optimization, generating a set of site-level schedules, and causing, as a function of the site-level schedules, real-time on-site asset control. Other embodiments provide for determining a location of each grid-connected energy consumer at which to reduce grid-supplied energy consumption, determining an amount of a reduction of grid-supplied energy consumption, and transmitting a signal to each corresponding gateway device located at the determined location, the signal comprising data indicative of instructions for performing on-site energy dispatch.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09645596&OS=09645596&RS=09645596
owner: Advanced Microgrid Solutions, Inc.
number: 09645596
owner_city: San Francisco
owner_country: US
publication_date: 20161123
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["TECHNOLOGICAL FIELD","BACKGROUND","BRIEF SUMMARY","DETAILED DESCRIPTION","Overview","System Architecture","Site Level Infrastructure","Apparatus","Pre-Sales Analysis of Sites","General Operation","Site-Level Constraints","Multi-Site Portfolio Operation Model","Processes","Single-Site Operation Model where a Customer has No on-Site Generation Allowed to Export","Single-Site Operation Model where a Customer does have on-Site Generation Allowed to Export","Multi-Site Portfolio Operation Model","Skid-Mounted Energy Asset System"],"p":["Embodiments of the present invention relate generally to facilitating the operation and control of a fleet of on site (e.g., customer-sited) energy assets that may include energy storage systems, renewable fuel or diesel generators, gas turbines, or the like, and in particular to methods, apparatus, and computer program products for optimizing energy dispatch across this fleet to provide an energy provider (e.g., a utility, a system operator, or a retail energy provider) with firm capacity, for example, for purposes of resource adequacy, other services or market products at specific market nodes and to reduce the electric costs for end customers with these controllable assets located on-premises.","Conventional systems require electric transmission and distribution system operators and utilities to build infrastructure to support peak demand, the costs of which are passed on to the customer, for example, via tariffs including demand response programs, market-based pricing, and other time-based pricing. While incentives may be offered to reduce demand during peak times, customers are often not in a position to do so through conventional load reduction and load shifting measures and as such, have instead attempted to employ the use of, for example, on-site energy storage systems (e.g., batteries) or other energy assets. However, the customer then bears the cost of having the on-site energy storage system installed, maintained, and operated and, furthermore, bears the risk that the cost savings do not justify the expenditures. Moreover, the utilities generally have no control over the deployment and operation of the on-site energy storage systems deployed in the field and cannot rely on these resources like other traditional generators as firm capacity products, for purposes such as resource adequacy.","In this regard, areas for improving known and existing systems have been identified. Through applied effort, ingenuity, and innovation, solutions to improve such systems have been realized and are described in connection with embodiments of the present invention.","A method, apparatus and computer program product are therefore provided according to an example embodiment of the present invention for operating an on-site energy asset such as an on-site energy storage system to co-optimize asset or energy dispatch, thus providing an energy provider (e.g., a utility, a system operator, or a retail energy provider) with firm electric capacity at specific locations and providing tariff cost benefits for an end customer (e.g., reducing their monthly electric bill). Such a system is well suited for multiple applications, including back-up\/emergency power, behind-the-meter grid support, peak shaving to reduce demand charges and time of day electrical cost, and as the basis for a micro-grid.","In some embodiments, a system may be provided, the system comprising a platform apparatus, and an on-site gateway apparatus, the platform apparatus comprising at least one processor and at least one memory including computer program code, the at least one memory and the computer program code configured to, with the processor, cause the apparatus to calculate site load curves indicating predicted site load of a customer at each of a plurality of periods of a day as a function of one or more of historical meter and billing data, in consideration of other existing on-site generation resources, and market or weather data, for each of one or more customers with on-site energy assets within a given portfolio aggregation, perform portfolio-level optimization as a function of the site load curves and a tariff library, the portfolio-level optimization configured to segment the site load curves in accordance with tariff periods and other site-level restrictions, and for each segment, calculate and output a power consumption maximum threshold, generate a set of site-level schedules, as a function of the portfolio-level optimization and one or more site restrictions, the set of site-level schedules configured to be provided to a gateway apparatus for facilitating the use of on-site controllable assets instead of grid-supplied electric consumption, and the gateway apparatus comprising at least one processor and at least one memory including computer program code, the at least one memory and the computer program code configured to, with the processor, cause the apparatus to receive the site-level schedule from the platform device and store that site-level schedule locally, at a start time of a given segment, provide instructions to facilitate real-time or near real-time on-site asset control.","In some embodiments, the on-site energy assets comprise energy storage resources and the site-level restrictions comprise instructions on battery charging and discharging. In some embodiments, the computer program code configured to facilitate the on-site asset control, further comprises computer program code configured to, with the processor, cause the apparatus to during a segment in which a customer's tariff or rate is less than a pre-defined threshold and site-level restrictions permit charging, cause the predicted site load to be satisfied via grid-supplied electric consumption and allowing charging of the battery to the extent that the predicted site load does not meet the scheduled maximum threshold. In some embodiments, the computer program code configured to facilitate the on-site asset control, further comprises computer program code configured to, with the processor, cause the apparatus to during a segment in which a customer's tariff or rate is less than a pre-defined threshold and site-level restrictions do not permit charging, cause the predicted site load to be satisfied via grid-supplied electric consumption and dis-allowing charging of the battery. In some embodiments, the computer program code configured to facilitate the on-site asset control, further comprises computer program code configured to, with the processor, cause the apparatus to during a segment a customer's tariff or rate is greater than a pre-defined threshold and the site-level restrictions do not permit charging, cause the predicted site load to be satisfied via grid-supplied electric consumption up to a scheduled maximum threshold and causing any remaining portion of the predicted site load to be satisfied via electricity generation of the on-site energy asset and preventing charging of the battery.","In some embodiments, the computer program code configured to facilitate the on-site asset control, further comprises computer program code configured to, with the processor, cause the apparatus to prevent net export to the grid caused by electricity generation of the energy asset, should that site restriction exist from utility, interconnection, or other regulations and requirements.","In some embodiments, the energy storage resources comprise battery systems. In some embodiments, the computer program code configured to facilitate the on-site asset control, further comprises computer program code configured to, with the processor, cause the apparatus to prevent net export to the grid caused by user of the on-site energy assets, should that site restriction exist from utility, interconnection, or other regulations and requirements. In some embodiments, the on-site energy assets comprise one or more of renewable or non-renewable fuel generators or turbines.","In some embodiments, a method may be provided, the method comprising calculating site load curves indicating predicted site load of a customer at each of a plurality of periods of a day as a function of one or more of historical meter and billing data, in consideration of other existing on-site generation resources, and market or weather data, for each of one or more customers with on-site energy assets within a given portfolio aggregation, performing portfolio-level optimization as a function of the site load curves and a tariff library, the portfolio-level optimization configured to segment the site load curves in accordance with tariff periods and other site-level restrictions, and for each segment, calculate and output a power consumption maximum threshold, generating a set of site-level schedules, as a function of the portfolio-level optimization and one or more site restrictions, the set of site-level schedules configured to be provided to a gateway apparatus for facilitating the use of on-site controllable assets instead of grid-supplied electric consumption, and transmitting the site-level schedule to a gateway device, and causing, at a start time of a given segment, real-time or near real-time on-site asset control.","In some embodiments, the on-site energy assets comprise energy storage resources and the site-level restrictions comprise instructions on battery charging and discharging. In some embodiments, the on-site asset control, further comprises during a segment in which a customer's tariff or rate is less than a pre-defined threshold and site-level restrictions permit charging, causing the predicted site load to be satisfied via grid-supplied electric consumption and allowing charging of the battery to the extent that the predicted site load does not meet the scheduled maximum threshold. In some embodiments, the on-site asset control, further comprises during a segment in which a customer's tariff or rate is less than a pre-defined threshold and site-level restrictions do not permit charging, causing the predicted site load to be satisfied via grid-supplied electric consumption and dis-allowing charging of the battery. In some embodiments, the on-site asset control, further comprises during a segment in which a customer's tariff or rate is greater than a pre-defined threshold and the site-level restrictions do not permit charging, causing the predicted site load to be satisfied via grid-supplied electric consumption up to a scheduled maximum threshold and causing any remaining portion of the predicted site load to be satisfied via electricity generation of the on-site energy asset and preventing charging of the battery. In some embodiments, the on-site asset control, further comprises preventing net export to the grid caused by electricity generation of the energy asset, should that site restriction exist from utility, interconnection, or other regulations and requirements.","In some embodiments, the energy storage resources comprise battery systems. In some embodiments the method may further comprise preventing net export to the grid caused by user of the on-site energy assets, should that site restriction exist from utility, interconnection, or other regulations and requirements. In some embodiments, the on-site energy assets comprise one or more of renewable or non-renewable fuel generators or turbines.","In some embodiments, a computer program product may be provided comprising at least one non-transitory computer-readable storage medium having computer-executable program code instructions stored therein, the computer-executable program code instructions comprising program code instructions for calculating site load curves indicating predicted site load of a customer at each of a plurality of periods of a day as a function of one or more of historical meter and billing data, in consideration of other existing on-site generation resources, and market or weather data, for each of one or more customers with on-site energy assets within a given portfolio aggregation, performing portfolio-level optimization as a function of the site load curves and a tariff library, the portfolio-level optimization configured to segment the site load curves in accordance with tariff periods and other site-level restrictions, and for each segment, calculate and output a power consumption maximum threshold, generating a set of site-level schedules, as a function of the portfolio-level optimization and one or more site restrictions, the set of site-level schedules configured to be provided to a gateway apparatus for facilitating the use of on-site controllable assets instead of grid-supplied electric consumption, transmitting the site-level schedule to a gateway device, and causing, at a start time of a given segment, real-time or near real-time on-site asset control.","In some embodiments, the on-site energy assets comprise energy storage resources and the site-level restrictions comprise instructions on battery charging and discharging. In some embodiments, the computer program code configured to facilitate the on-site asset control, further comprise program code instructions for during a segment in which a customer's tariff or rate is less than a pre-defined threshold and site-level restrictions permit charging, causing the predicted site load to be satisfied via grid-supplied electric consumption and allowing charging of the battery to the extent that the predicted site load does not meet the scheduled maximum threshold. In some embodiments, the computer program code configured to facilitate the on-site asset control, further comprise program code instructions for during a segment in which a customer's tariff or rate is less than a pre-defined threshold and site-level restrictions do not permit charging, causing the predicted site load to be satisfied via grid-supplied electric consumption and dis-allowing charging of the battery. In some embodiments, the computer program code configured to facilitate the on-site asset control, further comprise program code instructions for during a segment a customer's tariff or rate is greater than a pre-defined threshold and the site-level restrictions do not permit charging, causing the predicted site load to be satisfied via grid-supplied electric consumption up to a scheduled maximum threshold and causing any remaining portion of the predicted site load to be satisfied via electricity generation of the on-site energy asset and preventing charging of the battery. In some embodiments, the computer program code configured to facilitate the on-site asset control, further comprise program code instructions for preventing net export to the grid caused by electricity generation of the energy asset, should that site restriction exist from utility, interconnection, or other regulations and requirements. In some embodiments, the energy storage resources comprise battery systems.","In some embodiments, the computer program code configured to facilitate the on-site asset control, further comprise program code instructions for preventing net export to the grid caused by user of the on-site energy assets, should that site restriction exist from utility, interconnection, or other regulations and requirements. In some embodiments, the on-site energy assets comprise one or more of renewable or non-renewable fuel generators or turbines.","In some embodiments, a system may be provided, the system configured to perform fleet-level management for reducing grid-supplied energy consumption with a firm capacity reduction, the system comprising a platform apparatus and a plurality of gateway apparatus, the plurality of gateway apparatus comprising at least a first gateway apparatus located at a first location, the first location being on-site of a grid-connected energy consumer and the second gateway apparatus located at a second location, the second location being on a different site of the grid-connected energy consumer or a different grid-connected energy consumer, each of the plurality of gateway apparatus configured to control an on-site energy asset, comprising at least an energy asset device, to control use of on-site energy instead of grid-supplied energy consumption, the platform apparatus comprising at least one processor and at least one memory including computer program code, the at least one memory and the computer program code configured to, with the processor, cause the apparatus to receive or access input data, determine, as a function of the input data, a location of each grid-connected energy consumers at which to reduce grid-supplied energy consumption, determine an amount of a reduction of grid-supplied energy consumption, and further allocate a total reduction across the systems of each grid-connected energy consumer, transmit a signal to each corresponding gateway device located at the determined location, the signal comprising data indicative of instructions for performing on-site energy dispatch.","In some embodiments, the instructions are configured to override a previously supplied site-level schedule and increase on-site asset usage. In some embodiments, the at least one memory and the computer program code are further configured to, with the processor, cause the apparatus to receive a utility request, the utility request comprising at least a geographic area or set of substations and time period at which to reduce grid-supplied energy consumption, and perform fleet-level optimization to determine which one or more of the plurality of gateway apparatus to instruct to perform on-site energy dispatch and at what times, thus reducing grid-supplied energy consumption in consideration of net export restrictions where applicable, and providing one or more site-level schedules to each of a plurality of affected gateway apparatuses for facilitating control of on-site energy asset usage and grid-supplied electric consumption. In some embodiments, fleet-level optimization comprises maximizing a sum of a total bill savings across all accounts and utility revenue minus amortized development cost. In some embodiments, fleet-level optimization is a function of a bill savings amount of each of the grid-connected energy consumers. In some embodiments, fleet-level optimization is a function of utility revenue, the utility revenue being a function of an amount of on-site energy dispatched. In some embodiments, fleet-level optimization is a function of a development cost, the development cost being a function of one or more of on-site energy storage system cost, installation cost, maintenance cost, and operational cost.","In some embodiments, a method may be provided for performing fleet-level management for reducing grid-supplied energy consumption with a firm capacity reduction, the method comprising receiving or accessing input data from a plurality of gateway apparatus, the plurality of gateway apparatus comprising at least a first gateway apparatus located at a first location, the first location being on-site of a grid-connected energy consumer and the second gateway apparatus located at a second location, the second location being on a different site of the grid-connected energy consumer or a different grid-connected energy consumer, each of the plurality of gateway apparatus configured to control an on-site energy asset, comprising at least an energy asset device, to control use of on-site energy instead of grid-supplied energy consumption, determining, as a function of the input data, a location of each grid-connected energy consumers at which to reduce grid-supplied energy consumption, determining an amount of a reduction of grid-supplied energy consumption, and further allocate a total reduction across the systems of each grid-connected energy consumer, transmitting a signal to each corresponding gateway device located at the determined location, the signal comprising data indicative of instructions for performing on-site energy dispatch.","In some embodiments, the instructions are configured to override a previously supplied site-level schedule and increase on-site asset usage. In some embodiments the method further comprise receiving a utility request, the utility request comprising at least a geographic area or set of substations and time period at which to reduce grid-supplied energy consumption, and performing fleet-level optimization to determine which one or more of the plurality of gateway apparatus to instruct to perform on-site energy dispatch and at what times, thus reducing grid-supplied energy consumption in consideration of net export restrictions where applicable, and providing one or more site-level schedules to each of a plurality of affected gateway apparatuses for facilitating control of on-site energy asset usage and grid-supplied electric consumption.","In some embodiments, fleet-level optimization comprises maximizing a sum of a total bill savings across all accounts and utility revenue minus amortized development cost. In some embodiments, fleet-level optimization is a function of a bill savings amount of each of the grid-connected energy consumers. In some embodiments, fleet-level optimization is a function of utility revenue, the utility revenue being a function of an amount of on-site energy dispatched. In some embodiments, fleet-level optimization is a function of a development cost, the development cost being a function of one or more of on-site energy storage system cost, installation cost, maintenance cost, and operational cost.","In some embodiments, a computer program product may be provided for performing fleet-level management for reducing grid-supplied energy consumption with a firm capacity reduction, the computer program product comprising at least one non-transitory computer-readable storage medium having computer-executable program code instructions stored therein, the computer-executable program code instructions comprising program code instructions for receiving or accessing input data from a plurality of gateway apparatus, the plurality of gateway apparatus comprising at least a first gateway apparatus located at a first location, the first location being on-site of a grid-connected energy consumer and the second gateway apparatus located at a second location, the second location being on a different site of the grid-connected energy consumer or a different grid-connected energy consumer, each of the plurality of gateway apparatus configured to control an on-site energy asset, comprising at least an energy asset device, to control use of on-site energy instead of grid-supplied energy consumption, determining, as a function of the input data, a location of each grid-connected energy consumers at which to reduce grid-supplied energy consumption, determining an amount of a reduction of grid-supplied energy consumption, and further allocate a total reduction across the systems of each grid-connected energy consumer, transmitting a signal to each corresponding gateway device located at the determined location, the signal comprising data indicative of instructions for performing on-site energy dispatch.","In some embodiments, the instructions are configured to override a previously supplied site-level schedule and increase on-site asset usage. In some embodiments, the computer-executable program code instructions further comprise program code instructions for receiving a utility request, the utility request comprising at least a geographic area or set of substations and time period at which to reduce grid-supplied energy consumption, and performing fleet-level optimization to determine which one or more of the plurality of gateway apparatus to instruct to perform on-site energy dispatch and at what times, thus reducing grid-supplied energy consumption in consideration of net export restrictions where applicable, and providing one or more site-level schedules to each of a plurality of affected gateway apparatuses for facilitating control of on-site energy asset usage and grid-supplied electric consumption.","In some embodiments, fleet-level optimization comprises maximizing a sum of a total bill savings across all accounts and utility revenue minus amortized development cost. In some embodiments, fleet-level optimization is a function of a bill savings amount of each of the grid-connected energy consumers. In some embodiments, fleet-level optimization is a function of utility revenue, the utility revenue being a function of an amount of on-site energy dispatched. In some embodiments, fleet-level optimization is a function of a development cost, the development cost being a function of one or more of on-site energy storage system cost, installation cost, maintenance cost, and operational cost.","Some example embodiments will now be described more fully hereinafter with reference to the accompanying drawings, in which some, but not all embodiments are shown. Indeed, the example embodiments may take many different forms and should not be construed as limited to the embodiments set forth herein; rather, these embodiments are provided so that this disclosure will satisfy applicable legal requirements. Like reference numerals refer to like elements throughout. The terms \u201cdata,\u201d \u201ccontent,\u201d \u201cinformation,\u201d and similar terms may be used interchangeably, according to some example embodiments, to refer to data capable of being transmitted, received, operated on, and\/or stored. Moreover, the term \u201cexemplary\u201d, as may be used herein, is not provided to convey any qualitative assessment, but instead merely to convey an illustration of an example. Thus, use of any such terms should not be taken to limit the spirit and scope of embodiments of the present invention.","The term energy assets or controllable assets, as used herein may refer to one or more energy storage systems (i.e. the lithium-ion battery systems) or any other energy sources such as diesel generators, gas turbines, etc. The term firm capacity as used herein may refer to the amount of energy available for production or transmission that may be guaranteed to be available at a given time. The term energy provider as used herein may refer to a utility, a system operator, a retail energy provider, or the like.","Embodiments of the present invention generally related to a system to co-optimize battery dispatch across a fleet of behind-the-meter energy storage units (1) to provide an energy provider with firm capacity at specific market nodes and (2) to minimize electric costs for the end customer (e.g., lower their monthly electric bill). The system may be configured to provide behind-the-meter operations at a host site (i.e. on site or customer-sited), communicate with the energy provider, and utilize controllable assets such as, for example, third-party provided energy storage systems (e.g., site controller\/inverter\/batteries). The system may be configured to provide pre-sales analytical services and\/or operational service, each utilizing the same software infrastructure, which is described below, as well as individually configured models that perform the fleet-wide co-optimization calculations.","The platform may be configured to coordinate aggregated local capacity dispatch for an energy supply and distribution system, as well as provide behind-the-meter operations at one or more host customer sites, for example, utilizing controllable assets such as third party provided energy storage system hardware at the host customer sites. The operational platform may be configured to implement demand charge reduction and more general tariff optimization for the host customer sites as well as aggregated local capacity dispatch for the energy supply and distribution system.","The operational platform may be configured for communication with the energy provider to receive event signals and send telemetry data, communication with the distributed controllable assets (e.g., energy storage systems), optimization of energy dispatch in response to event signals received from the energy provider, and optimization of energy dispatch to reduce energy costs for the customer, one aspect of which is Demand Charge Reduction (DCR).",{"@attributes":{"id":"p-0042","num":"0041"},"figref":["FIG. 1","FIG. 2"],"b":["100","200","300","400","400","500","500"]},"The operational platform  may be configured to communicate with each of a plurality of gateway devices A-N, each located at a host customer site in conjunction with an energy storage system A-N, the energy provider , third-party resources that may provide useful\/necessary data (i.e., third-party repositories ), and various types of users. The operational platform  may be configured to utilize, for example, historical meter and billing data, a tariff library, and market\/weather data to perform site-level and portfolio-level forecasting and optimization and generate site-level schedules that are then provided to the on-site gateway devices. Telemetry data may be received from the on-site gateway devices, aggregated, and transmitted to the utility.  shows the platform device in more detail.","The gateway device is located at a customer site. The gateway device may be configured to receive the site-level schedule data from the operation platform  and implement an energy dispatch plan according to the schedule data by instructing the local controller A to implement real-time or near real-time energy dispatch.","The controllable asset system A, which may be embodied as an energy storage system, may comprise, for example, a local controller, an inverter, a DC combiner panel, and a battery. The local controller may be configured to receive, in real-time or near real-time, instructions regarding battery dispatch and instruct the inverter to reduce or increase battery charge or discharge accordingly. In other embodiments, the controllable asset may be diesel generator or the like, the controllable asset system A may comprise, for example, the diesel generator instead of the battery.",{"@attributes":{"id":"p-0046","num":"0045"},"figref":"FIG. 2","b":["212","216","218","222","220","226","228","224"]},"The portfolio co-optimization model  may be configured to optimize (1) utility, system operator, or market-based dispatch and (2) customer bill savings, for example, to maximize or otherwise increase revenue. This Co-Optimization model can be modified to operate in each of a plurality of modes of operation in different contexts: (1) Portfolio Optimization in operational context which may be configured to generate optimal dispatch instructions for multiple battery units, based on scenario analysis of a coming time period (e.g., the coming hour), in consideration of whether or not an energy system is likely to require dispatch of energy in a firm load drop response. (2) Portfolio Optimization in a deterministic pre-sales analysis context which may be configured to analyze a set of multiple customer sites, and their respective load profiles and site restrictions to determine if project economics will enable any controllable asset, such as for example, a battery system, to be located at a given customer site, and further, the optimal battery system size for each site, or (3) Run in operations or in pre-sales with a \u201cportfolio\u201d of one single site, to provide pre-sales analysis of an individual customer load profile or in operations, generate schedule for that individual site alone. In some embodiments, this model may be configured to perform co-optimization across a plurality of sites, much like the Portfolio Optimization section described below. In some embodiments, this model may run on a periodic (e.g., daily, hourly, or the like) basis, and may send DCR schedules to the controllable asset systems each time it runs; and it may also receive external signals for fleet-wide dispatch of firm capacity, and allocate that dispatch signal optimally across a fleet of controllable asset systems, in light of other DCR activities at those sites, and available load to drop at each site if electricity export to the grid is disallowed, in order to meet the aggregated dispatch request while considering site-level restrictions.","The operational platform  may be cloud-based (e.g., hosted on a cloud-based virtual server). The operational platform  may facilitate communications as demonstrated in the diagram below. To communicate with the distributed fleet, the operational platform  may utilize REST API methods or distributed queuing system (e.g. publish\/subscribe method) which the gateway devices may invoke at regular intervals (e.g., 1 minute), secured by mutual authentication mode transport layer security (e.g., TLS).",{"@attributes":{"id":"p-0049","num":"0048"},"figref":"FIG. 3"},"Regardless of the type of device that embodies any of gateway devices A-Nv or platform device , any of gateway devices A-N or platform device  may include or be associated with an apparatus  as shown in . In this regard, the apparatus may include or otherwise be in communication with a processor , a memory device , a communication interface  and a user interface . As such, in some embodiments, although devices or elements are shown as being in communication with each other, hereinafter such devices or elements should be considered to be capable of being embodied within the same device or element and thus, devices or elements shown in communication should be understood to alternatively be portions of the same device or element.","In some embodiments, the processor  (and\/or co-processors or any other processing circuitry assisting or otherwise associated with the processor) may be in communication with the memory device  via a bus for passing information among components of the apparatus. The memory device may include, for example, one or more volatile and\/or non-volatile memories. In other words, for example, the memory device may be an electronic storage device (e.g., a computer readable storage medium) comprising gates configured to store data (e.g., bits) that may be retrievable by a machine (e.g., a computing device like the processor). The memory device may be configured to store information, data, content, applications, instructions, or the like for enabling the apparatus  to carry out various functions in accordance with an example embodiment of the present invention. For example, the memory device could be configured to buffer input data for processing by the processor. Additionally or alternatively, the memory device could be configured to store instructions for execution by the processor.","As noted above, the apparatus  may be embodied by any of gateway devices A-Nv or platform device  configured to employ an example embodiment of the present invention. However, in some embodiments, the apparatus may be embodied as a chip or chip set. In other words, the apparatus may comprise one or more physical packages (e.g., chips) including materials, components and\/or wires on a structural assembly (e.g., a baseboard). The structural assembly may provide physical strength, conservation of size, and\/or limitation of electrical interaction for component circuitry included thereon. The apparatus may therefore, in some cases, be configured to implement an embodiment of the present invention on a single chip or as a single \u201csystem on a chip.\u201d As such, in some cases, a chip or chipset may constitute means for performing one or more operations for providing the functionalities described herein.","The processor  may be embodied in a number of different ways. For example, the processor may be embodied as one or more of various hardware processing means such as a coprocessor, a microprocessor, a controller, a digital signal processor (DSP), a processing element with or without an accompanying DSP, or various other processing circuitry including integrated circuits such as, for example, an ASIC (application specific integrated circuit), an FPGA (field programmable gate array), a microcontroller unit (MCU), a hardware accelerator, a special-purpose computer chip, or the like. As such, in some embodiments, the processor may include one or more processing cores configured to perform independently. A multi-core processor may enable multiprocessing within a single physical package. Additionally or alternatively, the processor may include one or more processors configured in tandem via the bus to enable independent execution of instructions, pipelining and\/or multithreading.","In an example embodiment, the processor  may be configured to execute instructions stored in the memory device  or otherwise accessible to the processor. Alternatively or additionally, the processor may be configured to execute hard coded functionality. As such, whether configured by hardware or software methods, or by a combination thereof, the processor may represent an entity (e.g., physically embodied in circuitry) capable of performing operations according to an embodiment of the present invention while configured accordingly. Thus, for example, when the processor is embodied as an ASIC, FPGA or the like, the processor may be specifically configured hardware for conducting the operations described herein. Alternatively, as another example, when the processor is embodied as an executor of software instructions, the instructions may specifically configure the processor to perform the algorithms and\/or operations described herein when the instructions are executed. However, in some cases, the processor may be a processor of a specific device configured to employ an embodiment of the present invention by further configuration of the processor by instructions for performing the algorithms and\/or operations described herein. The processor may include, among other things, a clock, an arithmetic logic unit (ALU) and logic gates configured to support operation of the processor. In one embodiment, the processor may also include user interface circuitry configured to control at least some functions of one or more elements of the user interface .","Meanwhile, the communication interface  may be any means such as a device or circuitry embodied in either hardware or a combination of hardware and software that is configured to receive and\/or transmit data between the any of user devices , gateway devices A-N, platform device , third-party repositories , or utility . In this regard, the communication interface  may include, for example, an antenna (or multiple antennas) and supporting hardware and\/or software for enabling communications wirelessly. Additionally or alternatively, the communication interface may include the circuitry for interacting with the antenna(s) to cause transmission of signals via the antenna(s) or to handle receipt of signals received via the antenna(s). For example, the communications interface may be configured to communicate wirelessly, such as via Wi-Fi, Bluetooth or other wireless communications techniques. In some instances, the communication interface may alternatively or also support wired communication. As such, for example, the communication interface may include a communication modem and\/or other hardware\/software for supporting communication via cable, digital subscriber line (DSL), universal serial bus (USB) or other mechanisms. For example, the communication interface may be configured to communicate via wired communication with other components of the computing device.","The user interface  may be in communication with the processor , such as the user interface circuitry, to receive an indication of a user input and\/or to provide an audible, visual, mechanical, or other output to a user. As such, the user interface may include, for example, a keyboard, a mouse, a joystick, a display, a touch screen display, a microphone, a speaker, and\/or other input\/output mechanisms. In some embodiments, a display may refer to display on a screen, on a wall, on glasses (e.g., near-eye-display), in the air, etc. The user interface may also be in communication with the memory  and\/or the communication interface , such as via a bus.","The system may be configured to apply a portfolio optimization model for determining the battery configuration at a plurality of sites based on the site-level electrical use profiles, contract terms, and applicable tariffs for each site under consideration. That is, a particular site will have a particular electrical use profile (from which a load curve may be predicted), a particular contract under which the customer is engaged with one or more energy provider(s), and particular tariff rates, or other cost structures provided by the energy provider(s). The system may be configured to determine the battery configuration (e.g., size and\/or type) and the available cost-savings and revenues. This process may also be used to inform utility contract proposals.","In a pre-sales context, the portfolio optimization model may be configured to run with a \u201cportfolio\u201d of one single site, to determine the optimal system size for a given site, in consideration of the individual site-level electrical use profile, contract terms, and applicable tariff(s) for that site.","The operational platform predicts, for example, on a monthly basis, a site-level load curve and generates a schedule identifying a site-level load-plan, the site-level load plan indicating energy dispatch instructions optimizing use of the battery to maximize capacity or other product delivery to the energy provider and minimize customer energy costs based on relevant customer tariffs (e.g. time-of-use demand charges and energy rates). Each site-level optimized schedule may be generated in accordance with the predicted load curve, the particular utility-provider contract, and the applicable tariff data of the site. A site-level schedule is provided to a gateway device, and the gateway device provides real-time or near real-time instructions to the third-party provided local controller, which controls the inverter and DC combiner panel.","In each context that the system is being used (e.g. pre-sales analysis or operations), the system may be configured to optimally operate each site in accordance with multiple site constraints, such as a no-charge period (i.e., charging of the battery is prohibited during a particular window) and a non-export rule (i.e., battery power cannot be exported).","Where a customer has no on-site generation, the system may be configured to reduce battery use measured by, for example, a meter at the inverter as a site meter approaches 0 kW. As such, battery power is never exported. Where the customer does have on-site generation, the system provides meters at site-level, at renewable energy generation level, and at the inverter (B), such that S=L\u2212G\u2212B (i.e., the site load (S) is equal to the total load of the site (L) minus the generated renewable power (G) minus the battery power (B), where load (L) is a calculated value. The system may control battery use such that battery power is never exported if such is a constraint. This is done by ensuring B<L (i.e., the supplied power from the battery is always less than the total Load of the site). Note that power from the on-site generation may be exported and, as such, when S is negative and L is zero, B is zero.  shows this embodiment.","The system may be configured such that each of the cloud-based platform and the on-site gateway device are configured to receive signals from the energy provider requesting energy dispatch. When dispatched by the energy provider through the cloud-based platform, the platform may determine through optimization how to dispatch the controllable assets within the portfolio of available sites or customer contracts (which may comprise a plurality of sites). The system may determine a \u201cbest fit\u201d when determining a load amount and a site selection for instructing a discrete dispatch event, such that one or more on-site gateway devices will receive instructions to override the site-level schedule and increase battery usage, thereby further reducing grid-supplied electric consumption and reducing total distribution load of the energy provider. Further, these dispatch signals for each on-site energy storage unit will take into account the tariff considerations and site restrictions, such that energy storage control will update scheduled thresholds and charging parameters, in light of the expected battery energy capacity after the dispatch event. When dispatched by the energy provider through the gateway device, logic on the device ensures that dispatch instructions are compatible with (and secondary to) platform-based dispatch instructions.","The system may be configured to perform portfolio optimization, which comprises identifying the best sites to earn the highest performance score possible for each dispatch signal from the utility with the battery and load resources that the system has available in its portfolio.","It should be noted that the optimization model is generic in nature and may be able to handle multi-site portfolio optimization, while accommodating any combination of assets and market products (e.g. wholesale markets), as well as utility programs. Thus the approach is able to provide \u2018stacked services\u2019 to the distribution and transmission grids, resulting in multiple and concurrent revenue streams. By co-optimizing a portfolio of flexible loads, storage and distributed generation assets to provide such grid services, the AMS approach provides an economically sustainable business model, that will facilitate the integration of renewable generation and storage assets, resulting in greenhouse gases emissions, improved power quality and resiliency.","In an example embodiment of the present invention, a system, apparatus or computer program product may be provided to implement or execute a method, process, or algorithm for generating and subsequently providing a site-level schedule to a gateway apparatus for facilitating control of on-site energy asset usage and grid-supplied electric consumption.","In exemplary embodiments, the system, comprising the operational platform and the gateway device, may be configured to utilize, for example, historical meter and billing data, a tariff library, and market\/weather data to perform site-level and, in some embodiments, portfolio-level optimization and subsequently generate site-level schedules. The site-level schedules may then be provided to the gateway devices for dictating on-site battery usage vs. grid-supplied electric consumption. The gateway device may be configured to receive the site-level schedule data from the operational platform and implement a load-shaving plan according to the schedule data by instructing the local controller to implement real-time or near real-time battery dispatch.  is a flowchart showing an exemplary method of operating an example apparatus in accordance with an embodiment of the present invention.","As shown in block  of , an apparatus, such as apparatus  embodied by the operational platform  and\/or apparatus , may be configured to determine or otherwise calculate a site load curve. The apparatus embodied by operational platform  and\/or apparatus  may therefore include means, such as the processor , the communication interface  or the like, for calculating a site load curve, for example, for each of one or more customers with energy assets within a given portfolio aggregation (e.g. market node or other aggregation). The site load curve may be indicative of a predicted site load of, for example, a host customer, at each of a plurality of periods of a day. In some embodiments, the site load curve may be determined as a function of and\/or in consideration of other existing on-site generation resources (e.g. solar, wind, fuel cell, combustion generators). The determination or calculation of the site load curve may be made as a function of one or more of historical meter data, historical billing data, and\/or market\/weather data. In some embodiments, a pre-defined confidence interval may dictate DCR thresholds. Additionally or alternatively, calculations related to the probability of event may result in re-calculating optimal DCR thresholds.","As shown in block  of , an apparatus, such as apparatus  embodied by the operational platform  and\/or apparatus , may be configured to perform portfolio-level optimization. The apparatus embodied by operational platform  and\/or apparatus  may therefore include means, such as the processor , the communication interface  or the like, for performing portfolio-level optimization. The performance of the portfolio-level optimization may be made as a function of the site load curve and time-of-use type data (e.g., a tariff library). In some embodiments, the portfolio-level optimization may be made as a function of the site load curves and a tariff library, the portfolio-level optimization configured to segment the site load curves in accordance with tariff periods and other site-level restrictions on battery charging and discharging, and for each segment, calculate and output a power consumption maximum threshold. In particular, the portfolio-level optimization process may comprise segmenting the site load curve in accordance with tariff periods, and for each segment, calculating and outputting the power consumption maximum threshold. For example,  shows a graph illustrating the segmentation of the site load curve and the associated DCR threshold voltages.","As shown in block  of , an apparatus, such as apparatus  embodied by the operational platform  and\/or apparatus , may be configured to generate a set of site-level schedules. The apparatus embodied by operational platform  and\/or apparatus  may therefore include means, such as the processor , the communication interface  or the like, for generating a set of site-level schedules, as a function of the portfolio-level optimization and site restrictions described above, with the set of site-level schedules configured to be provided to a gateway apparatus for facilitating the use of on-site energy asset usage instead of grid-supplied electric consumption.","Once generated, the site-level schedule may be configured to be provided to a gateway apparatus.  illustrates an exemplary site-level schedule that may be generated in accordance with an example embodiment of the present invention.","As shown in block  of , an apparatus, such as apparatus  embodied by the operational platform  and\/or apparatus , may be configured to provide the site-level schedule. The apparatus embodied by operational platform  and\/or apparatus  may therefore include means, such as the processor , the communication interface  or the like, for providing the site-level schedule to a gateway apparatus for facilitating control of on-site energy asset usage and grid-supplied electric consumption.","In an example embodiment of the present invention, a system, apparatus or computer program product may be provided to implement or execute a method, process, or algorithm for facilitating control of on-site energy asset usage and grid-supplied electric consumption.","In an exemplary embodiment, the system, comprising the operational platform and the gateway device, may be configured to utilize the site-level schedule data and implement a load-shaving plan according to the site-level schedule data by instructing the local controller to implement real-time or near real-time battery dispatch.  is a flowchart showing an exemplary method of operating an example apparatus in accordance with an embodiment of the present invention.","As shown in block  of , an apparatus, such as apparatus  embodied by the gateway apparatus A-N  and\/or apparatus , may be configured to poll the operation platform for, receive, or otherwise access the site-level schedule. The apparatus embodied by the gateway apparatus A-N  and\/or apparatus  may therefore include means, such as the processor , the communication interface  or the like, for polling for, receiving, or accessing the site-level schedule.","As shown in block  of , an apparatus, such as apparatus  embodied by the gateway apparatus A-N  and\/or apparatus , may be configured to provide instructions facilitating real-time or near real-time on-site energy asset control. The apparatus embodied by the gateway apparatus A-N  and\/or apparatus  may therefore include means, such as the processor , the communication interface  or the like, for providing instructions facilitating real-time or near real-time on-site energy asset control. Exemplary instructions are provided below, which show various values for each of a plurality of categories. For example, the gateway apparatus may write to the battery registers for the upcoming event, a function and\/or command status or mode, Max Power Target, Min Power Target, State of Charge Target, Max Charge Power and Max Discharge Power.\n\n","The model is configured to consider any combination of arbitrary costs and maximize revenues across them. For example, during a segment in which a customer's tariff or rate reflects lowest costs, is below a pre-defined threshold or the like (e.g. in an off-peak period) and site-level restrictions permit charging, as shown in block  of , an apparatus, such as apparatus  embodied by the gateway apparatus A-N  and\/or apparatus , may be configured to cause the predicted site load to be satisfied via grid-supplied electric consumption and allow charging of the on-site energy storage system (e.g., a battery) to the extent that the predicted site load does not meet or surpass the threshold. The apparatus embodied by the gateway apparatus A-N  and\/or apparatus  may therefore include means, such as the processor , the communication interface  or the like, for causing the predicted site load to be satisfied via grid-supplied electric consumption and allowing charging of the battery to the extent that the predicted site load does not meet the threshold.","During a segment a customer's electric consumption is less than a pre-defined threshold and the site-level restrictions do not permit charging, as shown in block  of , an apparatus, such as apparatus  embodied by the gateway apparatus A-N  and\/or apparatus , may be configured to cause the predicted site load to be satisfied via grid-supplied electric consumption and dis-allow the charging of the on-site energy storage system. The apparatus embodied by the gateway apparatus A-N  and\/or apparatus  may therefore include means, such as the processor , the communication interface  or the like, for causing the predicted site load to be satisfied via grid-supplied electric consumption and dis-allowing the charging of the on-site energy storage system.","During a segment a customer's electric consumption is greater than a pre-defined threshold and the site-level restrictions do not permit charging, as shown in block  of , an apparatus, such as apparatus  embodied by the gateway apparatus A-N  and\/or apparatus , may be configured to cause the predicted site load to be satisfied via grid-supplied electric consumption up to an associated DCR threshold and cause any remaining portion of the predicted site load to be satisfied via the on-site energy assets and dis-allow charging of the battery. The apparatus embodied by the gateway apparatus A-N  and\/or apparatus  may therefore include means, such as the processor , the communication interface  or the like, for causing the predicted site load to be satisfied via grid-supplied electric consumption up to an associated DCR threshold and causing any remaining portion of the predicted site load to be satisfied via the on-site energy assets and dis-allowing charging of the battery.","During a segment in which a rate is within a pre-defined range (e.g., above a first threshold and, for example, below a second threshold, i.e., mid-peak) and site-level restrictions permit charging (e.g., a \u201cno-charge\u201d rule is not in effect), as shown in block  of , an apparatus, such as apparatus  embodied by the gateway apparatus A-N  and\/or apparatus , may be configured to cause the predicted site load to be satisfied via grid-supplied electric consumption up to the associated DCR threshold and allow charging of the on-site energy storage system to the extent that the predicted site load does not meet the threshold. The apparatus embodied by the gateway apparatus A-N  and\/or apparatus  may therefore include means, such as the processor , the communication interface  or the like, for causing the predicted site load to be satisfied via grid-supplied electric consumption up to the associated DCR threshold and allowing charging of the on-site energy storage system to the extent that the predicted site load does not meet the threshold.","During a segment in which a rate is within a pre-defined range (e.g., above a first threshold and, for example, below a second threshold, i.e., mid-peak) and site-level restrictions do not permit charging (e.g., a \u201cno-charge\u201d rule is in effect), as shown in block  of , an apparatus, such as apparatus  embodied by the gateway apparatus A-N  and\/or apparatus , may be configured to cause the predicted site load to be satisfied via grid-supplied electric consumption up to the associated DCR threshold, cause any remaining portion of the predicted site load to be satisfied via the on-site energy assets, and dis-allow charging of the on-site energy storage system. The apparatus embodied by the gateway apparatus A-N  and\/or apparatus  may therefore include means, such as the processor , the communication interface  or the like, for causing the predicted site load to be satisfied via grid-supplied electric consumption up to the associated DCR threshold, causing any remaining portion of the predicted site load to be satisfied via the on-site energy assets, and dis-allowing charging of the on-site energy storage system.","A single-site operation model where the AMS system is configured to optimally operate each site in accordance with restraints that include a no-charge period (i.e., charging of the battery is prohibited during a particular window) and non-export rule (i.e., power from energy assets cannot be exported). Where a customer has no on-site generation, the system is configured to reduce energy asset electricity measured by, for example, a meter on the energy asset as a site meter approaches 0 kW. As such, electricity from the energy asset is never exported.","A single-site operation model where the AMS system is configured to optimally operate each site in accordance with restraints that include a no-charge period (i.e., charging of the battery is prohibited during a particular window) and non-export rule (i.e., electricity generation from energy assets, including battery power, cannot be exported). Where the customer does have on-site generation, the system provides that no energy asset power is exported by (2) providing meters at site-level, renewable energy generation level, and at the inverter and represented by S=L\u2212G\u2212B, instructing reduction of battery use such that battery power is never exported. B<L always. Note that power from the on-site generation may be exported and as such, when S is negative and L is zero, B is zero.","In an example embodiment of the present invention, a system, apparatus or computer program product may be provided to implement or execute a method, process, or algorithm for facilitating multi-site portfolio optimization by controlling each of a plurality of on-site energy assets and grid-supplied electric consumption.","In an exemplary embodiment, the system comprising the operational platform and a plurality of gateway devices, each located at a different site, may be configured to utilize, for example, historical meter and billing data, a tariff library, and market\/weather data to perform site-level and, in some embodiments perform fleet-level optimization, for example, by determining which one or more of the plurality of gateway apparatus to instruct to perform on-site energy dispatch and at what times, thus reducing grid-supplied energy consumption.",{"@attributes":{"id":"p-0085","num":"0093"},"figref":"FIG. 9"},"As shown in block  of , an apparatus, such as apparatus  embodied by the operational platform  and\/or apparatus , may be configured to receive and\/or access input data. Input data is described in great detail below. Once the input data is received, as shown in block  of , an apparatus, such as apparatus  embodied by the operational platform  and\/or apparatus , may be configured to determine, as a function of the input data, a location of at least one of the grid-connected energy consumers at which to reduce grid-supplied energy consumption.","In addition to determining which location at which to reduce grid-supplied energy consumption, the amount of the reduction may be determined. As such, as shown in block  of , an apparatus, such as apparatus  embodied by the operational platform  and\/or apparatus , may be configured to determine an amount of a reduction of grid-supplied energy consumption and, in some embodiments, further allocate the total reduction across the systems of each grid-connected energy consumer. Subsequent to determining where and by how much to reduce grid-supplied energy consumption, instructions may be generated and sent. As shown in block  of , an apparatus, such as apparatus  embodied by the operational platform  and\/or apparatus , may be configured to transmit a signal to a corresponding gateway device located at the determined location, the signal comprising data indicative of instructions for performing on-site energy dispatch. In some embodiments, the instructions may be configured to override a previously supplied site-level schedule and, for example, increase battery usage.","In another exemplary embodiment, the system, comprising the operational platform and a plurality of gateway devices, each located at a different site, may be configured to utilize specific parameters to dynamically modify site-level schedules to perform portfolio optimization.","The dynamic modification of each of one or more site-level schedules may be made in accordance with particular parameters (e.g., adhering to an agreed-upon base-line cost and\/or energy savings level while providing new instructions for controlling on-site energy asset usage and grid-supplied electric consumption. In some embodiments, the system may again utilize, for example, historical meter and billing data, a tariff library, and market\/weather data to perform portfolio-level optimization and, in some embodiments, subsequently generate site-level schedules. As described above, the site-level schedules may be provided to the gateway devices for instructing on-site energy asset usage vs. grid-supplied electric consumption. The gateway device may be configured to receive the site-level schedule data from the operational platform and implement a load-shaving plan according to the schedule data by instructing, for example, the local controller to implement real-time or near real-time battery dispatch.  is a flowchart showing an exemplary method of operating an example apparatus in accordance with an embodiment of the present invention.","As shown in block  of , an apparatus, such as apparatus  embodied by the operational platform  and\/or apparatus , may be configured to receive and\/or access input data. In some embodiments, input data may comprise one or more of the following:",{"@attributes":{"id":"p-0091","num":"0099"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"126pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"accounts","set of all service accounts in the portfolio"]},{"entry":[{},"intervals","set of all time intervals for the month"]},{"entry":[{},"no_charge_intervals","subset of intervals where battery "]},{"entry":[{},{},"cannot charge"]},{"entry":[{},"peak_intervals","subset of intervals where peak DCR "]},{"entry":[{},{},"is in effect"]},{"entry":[{},"mid_peak_intervals","subset of intervals where mid peak "]},{"entry":[{},{},"DCR is in effect"]},{"entry":[{},"unit_capacity_kwh","(ex: 400)"]},{"entry":[{},"max_unit_","maximum rate at which a unit can "]},{"entry":[{},"charge_rate","charge (ex: 200)"]},{"entry":[{},"max_unit_","maximum rate at which a unit can "]},{"entry":[{},"discharge_rate","discharge (ex: 200)"]},{"entry":[{},"charging_efficiency","(ex: 0.9)"]},{"entry":[{},"discharging_efficiency","(ex: 0.95)"]},{"entry":[{},"interval_length_hrs","0.25"]},{"entry":[{},"project_life","Number of years to amortize"]},{"entry":[{},{},"install\/system costs"]},{"entry":[{},"APR","Interest rate for amortizing"]},{"entry":[{},{},"install\/system costs"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}}}},"In some embodiments, input data may comprise utility dispatch data. For example, utility dispatch data may include:",{"@attributes":{"id":"p-0093","num":"0101"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"119pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"annual_utility_","utility rate for calculating revenue "]},{"entry":[{},"rate_kw","from utility"]},{"entry":[{},"utility_dispatch_","number of hours in each utility "]},{"entry":[{},"length_hrs","dispatch (ex: 4)"]},{"entry":[{},"fixed_utility_","utility commitment (kW)"]},{"entry":[{},"commitment",{}]},{"entry":[{},"utility_dispatches","set of indices for utility dispatches "]},{"entry":[{},{},"(ex: 1, 2, . . . , 20)"]},{"entry":[{},"utility_intervals","Subset of intervals for d \u03b5 utility_"]},{"entry":[{},{},"dispatches, hour h \u03b5 {1, . . . , "]},{"entry":[{},{},"utility_dispatch_length_hrs}"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}}}},"In some embodiments, input data may comprise host customer demand charge management (DCM) data. For example, host customer DCM data may include:",{"@attributes":{"id":"p-0095","num":"0103"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"133pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"dcm_rate_kw","Demand charge for maximum demand"]},{"entry":[{},"peak_dcm_rate_kw","Demand charge for max demand in "]},{"entry":[{},{},"peak intervals"]},{"entry":[{},"mid_peak_dcm_","Demand charge for max demand in "]},{"entry":[{},"rate_kw","mid-peak intervals"]},{"entry":[{},"peak_cpp_dcm_","Peak demand charge discount per kW above "]},{"entry":[{},"discount_kw","the capacity reservation level (CRL) (\u22670)"]},{"entry":[{},"mid_peak_cpp_","Mid-peak demand charge discount "]},{"entry":[{},"dcm_discount_kw","per kW above the CRL (\u22670)."]},{"entry":[{},{},"(0 if not take-or-pay CRL, or "]},{"entry":[{},{},"not summer month)"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}}}},"In some embodiments, input data may comprise energy cost data. For example, energy cost data may include:",{"@attributes":{"id":"p-0097","num":"0105"},"tables":{"@attributes":{"id":"TABLE-US-00004","num":"00004"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"84pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"133pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["cpp_intervals","Subset of intervals where critical peak "]},{"entry":[{},"pricing (CPP) is in effect"]},{"entry":["energy_price_kwh","Energy price per kWh at interval i"]},{"entry":["cpp_kwh_rate","CPP energy price"]},{"entry":["highest_possible_crl","A value larger than any real CRL"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"In some embodiments, input data may comprise bill savings data. For example, bill savings data may include:",{"@attributes":{"id":"p-0099","num":"0107"},"tables":{"@attributes":{"id":"TABLE-US-00005","num":"00005"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"147pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["bill_savings_lb","The minimum % savings from the original "]},{"entry":[{},"bill which must be achieved, or cost will be"]},{"entry":[{},"incurred to make up the balance."]},{"entry":["bill_savings_ub","The maximum % savings from the original bill "]},{"entry":[{},"for which to aim. (Higher is allowed, but the "]},{"entry":[{},"model will not seek savings above this bound)"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"In some embodiments, input data may comprise account specific data. For example, account specific data may include:",{"@attributes":{"id":"p-0101","num":"0109"},"tables":{"@attributes":{"id":"TABLE-US-00006","num":"00006"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"105pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"168pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["native_demand_kw","demand for account a \u03b5 accounts at each time i \u03b5 intervals"]},{"entry":["fixed_battery_units","Number of battery units for account a \u03b5 accounts"]},{"entry":["init_percentfull","(ex: 0.25)"]},{"entry":["native_capacity_reservation_level","CRL in effect before battery for account a \u03b5 accounts"]},{"entry":["post_battery_fixed_capacity_","CRL in effect after battery for account a \u03b5 accounts"]},{"entry":"reservation_level"},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"In some embodiments, input data may comprise native generation charges data. For example, native generation charges data may include:",{"@attributes":{"id":"p-0103","num":"0111"},"tables":{"@attributes":{"id":"TABLE-US-00007","num":"00007"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"133pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"native_generation_","The pre-optimization generation demand "]},{"entry":[{},"dcm_cost","charge for account a \u03b5 accounts"]},{"entry":[{},"native_generation_","The pre-optimization generation energy "]},{"entry":[{},"energy_cost","cost for account a \u03b5 accounts"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}}}},"In some embodiments, input data may comprise Native delivery charges data. For example, Native delivery charges data may include:",{"@attributes":{"id":"p-0105","num":"0113"},"tables":{"@attributes":{"id":"TABLE-US-00008","num":"00008"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"126pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"native_delivery_","The pre-optimization delivery demand "]},{"entry":[{},"dcm_cost","charge for account a \u03b5 accounts"]},{"entry":[{},"native_delivery_","The pre-optimization delivery energy "]},{"entry":[{},"energy_cost","cost for account a \u03b5 accounts"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}}}},"In some embodiments, input data may comprise already observed maximum demand data. For example, already observed maximum demand data may include:",{"@attributes":{"id":"p-0107","num":"0115"},"tables":{"@attributes":{"id":"TABLE-US-00009","num":"00009"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"91pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"126pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["observed_max_demand","The observed max demand so far this "]},{"entry":[{},"month (0 if day 1) for a \u03b5 accounts"]},{"entry":["observed_max_","The observed max peak demand this "]},{"entry":["peak_demand","month (0 if day 1) for a \u03b5 accounts"]},{"entry":["observed_max_mid_","The observed max mid-peak demand this "]},{"entry":["peak_demand","month (0 if day 1) for a \u03b5 accounts"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"In some embodiments, input data may comprise direct access (DA) customer data or pricing data contracted by a customer with energy retailers in deregulated markets. For example, DA customer data may include:",{"@attributes":{"id":"p-0109","num":"0117"},"tables":{"@attributes":{"id":"TABLE-US-00010","num":"00010"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"84pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"133pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["long_term_","The long term contract $\/kWh for interval "]},{"entry":["contract_price_kwh","i \u03b5 intervals, a \u03b5 accounts"]},{"entry":["long_term_","The long term contract kW for interval i \u03b5 "]},{"entry":["contract_kw","intervals, a \u03b5 accounts"]},{"entry":["long_term_","The cost of the long term contract (for bill "]},{"entry":["contract_cost","savings calculation) , a \u03b5 accounts"]},{"entry":["imbalance_price_","The imbalance market $\/kWh for interval "]},{"entry":["per_kwh","i \u03b5 intervals"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"In some embodiments, input data may comprise generator or battery cost data. In some embodiments, installation costs, maintenance costs, and operational costs may also be considered. For example, battery cost data may include:",{"@attributes":{"id":"p-0111","num":"0119"},"tables":{"@attributes":{"id":"TABLE-US-00011","num":"00011"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"98pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"119pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["install_cost_per_kwh","System installation costs for npv "]},{"entry":[{},"calculation for a \u2208 accounts "]},{"entry":["cycle_tiers","Set of cycles\/year tiers for initial and "]},{"entry":[{},"maintenance costs, for a \u2208 accounts"]},{"entry":[{},"(ex: {50, 100, 150, 200, 365})"]},{"entry":["initial_battery_cost_per_kwh","Initial capacity cost per installed kWh "]},{"entry":[{},"if in tier c \u2208 cycle_tiers, a \u2208 accounts"]},{"entry":["battery_maint_cost_per_kwh","Capacity maintenance cost\/installed "]},{"entry":[{},"kWh if in tier c \u2208 cycle_tiers, a \u2208 "]},{"entry":[{},"accounts"]},{"entry":["incentive_per_w","incentive\/subsidy for W not commited "]},{"entry":[{},"to utility dispatch (ex $1\/W)"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"In some embodiments, input data may comprise data regarding existing assets. For example, data regarding existing assets may include:",{"@attributes":{"id":"p-0113","num":"0121"},"tables":{"@attributes":{"id":"TABLE-US-00012","num":"00012"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"154pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["existing_solar","Existing solar kW in interval i, for i \u2208 intervals, "]},{"entry":[{},"a \u2208 accounts"]},{"entry":["existing_wind","Existing wind kW in interval i, for i \u2208 intervals, "]},{"entry":[{},"a \u2208 accounts"]},{"entry":["existing_fuelcell","Existing fuelcell kW in interval i, for i \u2208 intervals, "]},{"entry":[{},"a \u2208 accounts"]},{"entry":["existing_engine","Existing engine kW in interval i, for i \u2208 intervals, "]},{"entry":[{},"a \u2208 accounts"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"In some embodiments, input data may comprise solar data to simulate hypothetical solar installations. For example, solar data may include:",{"@attributes":{"id":"p-0115","num":"0123"},"tables":{"@attributes":{"id":"TABLE-US-00013","num":"00013"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"91pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"126pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["solar_gen_per_kw","The generation for 1 kW in interval i, "]},{"entry":[{},"for i \u2208 intervals, a \u2208 accounts"]},{"entry":["solar_system_cost_per_kw","Solar system costs, for a \u2208 accounts"]},{"entry":["solar_install_cost_per_kw","Solar installation costs, for a \u2208 accounts"]},{"entry":["solar_cost_per_kwh","Solar cost per kwh, for a \u2208 accounts"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"In some embodiments, input data may comprise computed data. For example, computed data may include:\n\nmax_possible_cycles=max(\u03b5cycle_tiers)\n\nnative_bill=native_generation__cost+native_generation_energy_cost+native_delivery__cost+native_delivery_energy_cost\n\nnative_peak_max_demand=the maximum native demand in peak intervals,\u2200\u03b5accounts\n\nnative_mid_peak_max_demand=the maximum native demand in mid-peak intervals,\u2200\u03b5accounts\n","As shown in block  of , an apparatus, such as apparatus  embodied by the operational platform  and\/or apparatus , may be configured to calculate variable data.","In some embodiments, variable data may comprise may include:",{"@attributes":{"id":"p-0119","num":"0127"},"tables":{"@attributes":{"id":"TABLE-US-00014","num":"00014"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"84pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"105pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"28pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["realized_demand","\u2200 i \u2208 intervals, a \u2208 accounts","\u22670 kW"]},{"entry":["battery_end_state","\u2200 i \u2208 intervals, a \u2208 accounts","\u22670 kW"]},{"entry":["battery_out","\u2200 i \u2208 intervals, a \u2208 accounts","\u22670 kW"]},{"entry":["battery_in","\u2200 i \u2208 intervals, a \u2208 accounts","\u22670 kW"]},{"entry":["solar","\u2200 i \u2208 intervals, a \u2208 accounts","\u22670 kW"]},{"entry":["dump","\u2200 i \u2208 intervals, a \u2208 accounts","\u22670 kW"]},{"entry":["solar_nameplate_kw","\u2200 a \u2208 accounts","\u22670 kW"]},{"entry":["capacity_reservation_level","\u2200 a \u2208 accounts","\u22670 kW"]},{"entry":["in_cycle_tier","\u2200 c \u2208 cycle_tiers, a \u2208 accounts","{0,1}"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}}}},"In some embodiments, variable data may comprise utility dispatch variables. For example, utility dispatch variables may include one or more of the following:",{"@attributes":{"id":"p-0121","num":"0129"},"tables":{"@attributes":{"id":"TABLE-US-00015","num":"00015"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"91pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"126pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["utility_credit_kw","\u2200 d \u2208 utility_dispatches, h \u2208 "]},{"entry":[{},"{1, . . . , utility_dispatch_length_hrs},"]},{"entry":[{},"i \u2208 utility_intervals\u2267 0"]},{"entry":["utility_hourly_avg_kw","\u2200 d \u2208 utility_dispatches, h \u2208 "]},{"entry":[{},"{1, . . . , utility_dispatch_length_hrs} \u2267 0"]},{"entry":["utility_reported_kw","\u2200 d \u2208 utility_dispatches \u2267 0"]},{"entry":["utility_pct_met","{0,1}"]},{"entry":["utility_pct_r","{0,1}"]},{"entry":["utility_pct _q","{0,1}"]},{"entry":["utility_pct_p","{0,1}"]},{"entry":["y","{0,1}"]},{"entry":["y_r","{0,1}"]},{"entry":["y_q","{0,1}"]},{"entry":["y_p","{0,1}"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"In some embodiments, variable data may comprise energy cost variables. For example, energy cost variables may include:",{"@attributes":{"id":"p-0123","num":"0131"},"tables":{"@attributes":{"id":"TABLE-US-00016","num":"00016"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"133pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"133pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"21pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["above_crl_cpp_realized_demand","\u2200 j \u2208 cpp_intervals, a \u2208 accounts\u2003\u2003\u2002\u2267 0","kW"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"133pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"84pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["max_above_crl_peak_realized_demand","\u2200 a \u2208 accounts \u2267 0","kW"]},{"entry":["max_above_crl_mid_peak_realized_demand","\u2200 a \u2208 accounts \u2267 0","kW"]},{"entry":["is_peak_max_above_crl","\u2200 a \u2208 accounts {0,1}","1 if max above > 0"]},{"entry":["is_mid_peak_max_above_crl","\u2200 a \u2208 accounts {0,1}","1 if max above > 0"]},{"entry":["max_peak_realized_demand","\u2200 a \u2208 accounts \u2267 0","kW"]},{"entry":["max_mid_peak_realized_demand","\u2200 a \u2208 accounts \u2267 0","kW"]},{"entry":["max_realized_demand","\u2200 a \u2208 accounts \u2267 0","kW"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"105pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"98pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"84pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["bill_savings","\u2200 a \u2208 accounts \u2003\u2003\u2003\u2003\u2267 0","$"]},{"entry":["bill_savings_deficit","\u2200 a \u2208 accounts \u2003\u2003\u2003\u2003\u2267 0","$"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}}},"In some embodiments, variable data may comprise subsidy variables. For example, subsidy variables may include:",{"@attributes":{"id":"p-0125","num":"0133"},"tables":{"@attributes":{"id":"TABLE-US-00017","num":"00017"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"112pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"91pt","align":"center"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["subsidy","\u22670","$"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}}}},"As shown in block  of , an apparatus, such as apparatus  embodied by the operational platform  and\/or apparatus , may be configured to perform portfolio optimization by applying models and, in some embodiments, adhering to specific constraints.","An exemplary model is shown below. While the model shown below may be a monthly model, one of ordinary skill would appreciate, the models may be utilized for any time period (e.g., yearly, daily, or the like).","That is, the model may be configured to maximize:\n\n12*(total_bill_savings+utility_revenue\u2212solar_energy_cost)\u2212amortized_development_cost\n","Where:",{"@attributes":{"id":"p-0130","num":"0138"},"tables":{"@attributes":{"id":"TABLE-US-00018","num":"00018"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"301pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"total_bill_savings = \u03a3(bill_savings\u2212 bill_savings_deficit)"},{"entry":"utility_revenue = ((1.05 * y) + utility_pct_r + (0.5 * utility_pct_q) + utility_ pct_p \u2212 (0.6 * y_p)) )"},{"entry":"\u2003\u2003\u2003\u2003\u2003* (annual_utility_rate_kw \/12) * fixed_utility_commitment)"},{"entry":"solar_energy_cost = \u03a3\u03a3 (solar* interval_length_hrs * solar_cost_per_kwh)"},{"entry":"Amortized cost: A = P*[(r(1+r){circumflex over (\u2009)}n)\/(1+r){circumflex over (\u2009)}n \u2212 1)]"},{"entry":"amortized_development_cost = net_development_cost * (APR * (1+ APR){circumflex over (\u2009)}project_life)\/((1+"},{"entry":"APR){circumflex over (\u2009)}project_life \u2212 1)"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"105pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["net_development_cost","= battery_development_cost \u2212 subsidy + solar_development_cost"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"301pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"battery_development_cost = \u03a3\u2002battery_development_cost"},{"entry":"battery_development_cost="},{"entry":"\u2003\u2003\u2003(fixed_battery_units* unit_capacity_kwh) * (install_cost_per_kwh+"},{"entry":"\u2003\u2003\u2003battery_install_maint_cost)"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"231pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"\u2200 a \u2208 accounts"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"301pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"battery_install_maint_cost="},{"entry":"\u2003\u2003\u2003\u03a3 _tiers ((initial_battery_cost_per_kwh + battery_maint_cost_per_kwh) *"},{"entry":"\u2003\u2003\u2003in_cycle_tier)"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"231pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"\u2200 a \u2208 accounts"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"301pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"solar_development_cost ="},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u03a3(solar_nameplate_kw*(solar_system_cost_per_kw"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"133pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"+ solar_install_cost_per_kw))"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},"In some embodiments, the models described above may be subject to particular constraints. For example, the models may be subject to bill savings constraints.","For example, the model may set a lower bound on the bill savings. If the bound is not met by actual savings, the deficit variable will take the value of the shortfall.\n\nbill_savings\u2267native_bill*bill_savings_+bill_savings_deficit\n","In some embodiments, the model may be configured to cap the bill savings at the upper bound and the actual savings, so it will equal the minimum:\n\nbill_savings\u2266native_bill*bill_savings_\n\nbill_savings\u2266generation__savings+delivery__savings+generation_energy_cost_savings+delivery_energy_cost_savings\n","Where, for example, only include applicable sections for accounts, as described below.","Generation DCM Savings:",{"@attributes":{"id":"p-0136","num":"0144"},"tables":{"@attributes":{"id":"TABLE-US-00019","num":"00019"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"266pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"generation_dcm_savings="},{"entry":"\u2003native_generation_dcm_cost\u2212 (realized_base_generation_dcm_cost\u2212"},{"entry":"\u2003\u2003\u2003realized_peak_generation_dcm_cost\u2212 realized_mid_peak_generation_dcm_cost"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"63pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\u2200 a \u2208 accounts"]},{"entry":["realized_base_generation_dcm_cost=",{}]},{"entry":["\u2003\u2003max_realized_demand* generation_dcm_rate_kw","\u2200 a \u2208 accounts"]},{"entry":["realized_mid_peak_generation_dcm_cost=",{}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"266pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"\u2003\u2003\u2003\u2003max_mid_peak_realized_demand* generation_monthly_mid_peak_dcm_rate_kw"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"63pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\u2200 a \u2208 accounts"]},{"entry":["realized_peak_generation_dcm_cost=",{}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"266pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"\u2003\u2003\u2003\u2003max_peak_realized_demand* generation_peak_dcm_rate_kw"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"63pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\u2200 a \u2208 accounts"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},"Delivery DCM Savings:",{"@attributes":{"id":"p-0138","num":"0146"},"tables":{"@attributes":{"id":"TABLE-US-00020","num":"00020"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"287pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"delivery_dcm_savings="},{"entry":"\u2003\u2003native_delivery_dcm_cost\u2212 realized_base_delivery_dcm_cost"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2212 realized_peak_delivery_dcm_cost\u2212 realized_mid_peak_delivery_dcm_cost"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003+ realized_cpp_dcm_peak_discount+ realized_cpp_dcm_mid_peak_discount"},{"entry":"realized_base_delivery_dcm_cost="}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"238pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["\u2003\u2003\u2003\u2003\u2003max_realized_demand* delivery_dcm_rate_kw","\u2200 a \u2208 accounts"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"287pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"realized_peak_delivery_dcm_cost="},{"entry":"\u2003\u2003\u2003\u2003\u2003max_peak_realized_demand* delivery_peak_dcm_rate_kw"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"238pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"\u2200 a \u2208 accounts"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"287pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"realized_mid_peak_delivery_dcm_cost="},{"entry":"\u2003\u2003\u2003\u2003\u2003max_mid_peak_realized_demand* delivery_monthly_mid_peak_dcm_rate_kw"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"238pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"\u2200 a \u2208 accounts"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"287pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"realized_cpp_dcm_peak_discount="}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"238pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["\u2003\u2003\u2003\u2003\u2003max_above_crl_peak_realized_demand* peak_cpp_dcm_discount_kw",{}]},{"entry":[{},"\u2200 a \u2208 accounts"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"287pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"realized_cpp_dcm_mid_peak_discount="},{"entry":"\u2003\u2003\u2003\u2003\u2003max_above_crl_mid_peak_realized_demand* mid_peak_cpp_dcm_discount_kw"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"238pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\u2200 a \u2208 accounts"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},"Generation: Energy Savings:",{"@attributes":{"id":"p-0140","num":"0148"},"tables":{"@attributes":{"id":"TABLE-US-00021","num":"00021"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"generation_energy_cost_savings="},{"entry":"\u2003\u2003native_generation_energy_cost\u2212 long_term_contract_cost\u2212 imbalance_cost"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"56pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"\u2200 a \u2208 accounts"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"imbalance_cost="},{"entry":"\u2003\u2003\u03a3 (realized_demand\u2212 long_term_contract_kw)"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"133pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"126pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["\u2003\u2003\u2003\u2003* imbalance_price_per_kwh","*interval_length_hrs"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"56pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\u2200 a \u2208 accounts"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},"Delivery: Energy Savings",{"@attributes":{"id":"p-0142","num":"0150"},"tables":{"@attributes":{"id":"TABLE-US-00022","num":"00022"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"259pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"7pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"delivery_energy_cost_savings=",{}]},{"entry":[{},"native_delivery_energy_cost-energy_cost-energy_cost_adjust\u2200 a \u03b5 accounts",{}]},{"entry":[{},"\u2003energy _cost= \u03a3realized_demand* interval_length_hrs * energy_",{}]},{"entry":[{},"price_kwh",{}]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2200 a \u03b5 accounts",{}]},{"entry":[{},"energy_cost_adjust=",{}]},{"entry":[{},"\u2003\u03a3_intervals (above_crl_cpp_realized_demand* interval_length_hrs",{}]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003* (cpp_kwh_rate-energy_price_kwh))",{}]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2200 a \u03b5 accounts"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}}}},"In some embodiments, the system may be configured to identify monthly maximum realized demand overall, in peak, and in mid-peak:",{"@attributes":{"id":"p-0144","num":"0152"},"tables":{"@attributes":{"id":"TABLE-US-00023","num":"00023"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"119pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["max_realized_demand\u2267 realized_demand","\u2200 i \u2208 intervals, a \u2208 accounts"]},{"entry":["max_peak_realized_demand\u2267 realized_demand","\u2200 i \u2208 peak_intervals, a \u2208 accounts"]},{"entry":["max_mid_peak_realized_demand\u2267 realized_demand","\u2200 i \u2208 mid_peak_intervals, a \u2208 accounts"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"In some embodiments, the system may be configured to set the lower bounds to the observed values:",{"@attributes":{"id":"p-0146","num":"0154"},"tables":{"@attributes":{"id":"TABLE-US-00024","num":"00024"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"126pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"91pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["max_realized_demand\u2267 ","\u2200 i \u2208 intervals, "]},{"entry":["observed_max_demand","a \u2208 accounts"]},{"entry":["max_peak_realized_demand\u2267 ","\u2200 i \u2208 peak_intervals,"]},{"entry":["observed_max_peak_demand","a \u2208 accounts"]},{"entry":["max_mid_peak_realized_demand\u2267 ","\u2200 i \u2208 mid_peak_intervals,"]},{"entry":["observed_max_mid_peak_demand","a \u2208 accounts"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"In some embodiments, the system may be configured to, for example, for take-or-pay months, set alternate lower bound for maximums to the CRL:",{"@attributes":{"id":"p-0148","num":"0156"},"tables":{"@attributes":{"id":"TABLE-US-00025","num":"00025"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"28pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["max_realized_demand\u2267 capacity_reservation_level","\u2200 a \u2208 "]},{"entry":[{},"accounts"]},{"entry":["max_peak_realized_demand\u2267 capacity_reservation_level","\u2200 a \u2208 "]},{"entry":[{},"accounts"]},{"entry":["max_mid_peak_realized_demand\u2267 capacity_reservation_level","\u2200 a \u2208 "]},{"entry":[{},"accounts"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"In some embodiments, the system may be configured to perform above CRL calculations.","For example, if the realized demand is above the CRL in a cpp interval, \u201cabove_crl_cpp_realized_demand\u201d will equal the portion that is above it. Otherwise, it will equal 0.",{"@attributes":{"id":"p-0151","num":"0159"},"tables":{"@attributes":{"id":"TABLE-US-00026","num":"00026"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"147pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"70pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["above_crl_cpp_realized_demand\u2267 ","\u2200 j \u2208 cpp_intervals,"]},{"entry":["realized_demand\u2212 capacity_reservation_level","\u2200 a \u2208 accounts"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"In some embodiments, the system may be configured to perform peak calculation.",{"@attributes":{"id":"p-0153","num":"0161"},"tables":{"@attributes":{"id":"TABLE-US-00027","num":"00027"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"35pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["max_above_crl_peak_realized_demand\u2267 ","\u2200 a \u2208 "]},{"entry":["max_peak_realized_demand\u2212 capacity_reservation_level","accounts"]},{"entry":["max_above_crl_peak_realized_demand\u2266 ","\u2200 a \u2208 "]},{"entry":["max_peak_realized_demand\u2212 capacity_reservation_level+ ","accounts"]},{"entry":["highest_possible_crl * (1 - is_peak_max_above_crl)",{}]},{"entry":["max_above_crl_peak_realized_demand\u2266","\u2200 a \u2208 "]},{"entry":["native_peak_max_demand* ","accounts"]},{"entry":"is_peak_max_above_crl"},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"In some embodiments, the system may be configured to perform mid-peak calculations.",{"@attributes":{"id":"p-0155","num":"0163"},"tables":{"@attributes":{"id":"TABLE-US-00028","num":"00028"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"245pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"7pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"max_above_crl_mid_peak_realized_demand\u2267 max_mid_peak_realized_demand",{}]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2212 capacity_reservation_level\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2200 a \u03b5 accounts",{}]},{"entry":[{},"max_above_crl_mid_peak_realized_demand\u2266",{}]},{"entry":[{},"\u2003\u2003\u2003max_mid_peak_realized_demand\u2212 capacity_reservation_level",{}]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003\u2003+ highest_possible_crl * (1 - is_mid_peak_max_above_crl)",{}]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2200 a \u03b5 accounts",{}]},{"entry":[{},"max_above_crl_mid_peak_realized_demand\u2266",{}]},{"entry":[{},"\u2003\u2003native_mid_peak_max_demand* is_mid_peak_max_above_crl\u2200 a \u03b5 accounts"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}}}},"In some embodiments, the models described above may be subject to particular constraints. For example, the models may be subject to utility constraints.","In some embodiments, the system may be configured to capture the kW that can be counted for utility credit.\n\nutility_credit_\u2266\u03a3fixed_battery_units*max_unit_discharge_rate \u2200\u03b5utility_dispatches,1, . . . ,utility_dispatch_length_hrs},\u03b5utility_intervals\n\nutility_credit_\u2266\u03a3native_demand_\u2212realized_demand\u03b5utility_dispatches,1, . . . ,utility_dispatch_length_hrs},\u03b5utility_intervals\n","In some embodiments, the system may be configured to identify the utility credit for this hour, without allowing any fluctuation.\n\nutility_hourly_avg_=utility_credit_\n\n\u2200\u03b5scenarios,\u03b5utility_dispatches1, . . . ,utility_dispatch_length_hrs},\u03b5utility_intervals\n","In some embodiments, the system may be configured to identify the minimum hour for each dispatch.\n\nutility_reported_\u2266utility_hourly_avg_\u03b5utility_dispatches,1, . . . ,utility_dispatch_length_hrs}\n","In some embodiments, the system may be configured to compute the utility percent met and determine utility payment or penalty due:\n\nutility__met=\u03a3utility_reported_\/(fixed_utility_commitment*|utility_dispatches|)\n","Exactly one of these indicator variables must be on:\n\n=1\n","Turn off the indicators above the percentage met. The objective function will ensure that the highest possible one turns on.\n\nutility__met\u22671.05*\n\nutility__met\u22670.75*()\n\nutility__met\u22670.60*()\n","Force the utility_pct variables to zero if their indicator is not on, otherwise the objective will drive them up.\n\nutility_\u22661.05*\n\nutility_\u22660.75*\n\nutility_\u22660.60*\n","Cap these monthly utility_pct variables at the actual monthly utility % met.\n\nutility_\u2266utility__met\n\nutility_\u2266utility__met\n\nutility_\u2266utility__met\n","In some embodiments, the system may be configured to perform a battery cost calculation.","In some embodiments, subsidy cannot exceed the non-utility contracted kWs multiplied by the subsidy per kW.\n\nsubsidy\u2266(\u03a3(fixed_battery_units)*max_unit_discharge_rate\u2212fixed_utility_commitment)*subsidy_per_1000\n","In some embodiments, the system may be configured to ensure the system is in exactly one tier to comply with system warranties.",{"@attributes":{"id":"p-0168","num":"0176"},"tables":{"@attributes":{"id":"TABLE-US-00029","num":"00029"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"126pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"70pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\u03a3c \u03b5 cycle_tiersin_cycle_tier= 1","\u2200 a \u03b5 accounts"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}}}},"In some embodiments, the system may be configured to identify which tier we are in. The left hand side is the actual number of cycles. One of the tier identifiers must turn on if the number of cycles exceeds the tier. This also ensures that the maximum allowable cycles is not exceeded according to energy asset warranty terms.",{"@attributes":{"id":"p-0170","num":"0178"},"tables":{"@attributes":{"id":"TABLE-US-00030","num":"00030"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"\u03a3 battery_in\/(fixed_battery_units* unit_capacity_kwh) *"},{"entry":"12 \u2266 c + (max_possible_cycles \u2212 c)"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"119pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"98pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["\u2003* \u03a3_tiersa |c\u2032   in_cycle_tier","\u2200 a \u03b5 cycle_tiers, a \u03b5 accounts"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},"In some embodiments, the models described above may be subject to particular constraints. For example, the models may be subject to miscellaneous constraints.","In some embodiments, the system may be configured to capture the realized demand.\n\nrealized_demand=native_demand_\u2212battery_out\u2212solar\u2212existing_solar\u2212existing_wind\u2212existing_fuelcell\u2212existing_engine+battery_in+dump\u03b5intervals,\u03b5accounts\n","In some embodiments, the system may be configured to link solar nameplate and curve to interval variables.",{"@attributes":{"id":"p-0174","num":"0182"},"tables":{"@attributes":{"id":"TABLE-US-00031","num":"00031"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"56pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["solar= solar_nameplate_kw* solar_gen_per_kw","\u2200 i \u2208 intervals, "]},{"entry":[{},"a \u2208 accounts"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"In some embodiments, the system may be configured to prevent charging during no-charge intervals, except from allowable assets listed in the right hand side.",{"@attributes":{"id":"p-0176","num":"0184"},"tables":{"@attributes":{"id":"TABLE-US-00032","num":"00032"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"133pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"84pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["battery_in\u2266 solar+ existing_solar+ ","\u2200 i \u2208 no_charge_intervals, "]},{"entry":["existing_wind+ existing_fuelcell+","a \u2208 accounts"]},{"entry":"existing_engine"},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"In some embodiments, the system may be configured to prevent battery from charging (discharging) faster than maximum charge (discharge) rate.",{"@attributes":{"id":"p-0178","num":"0186"},"tables":{"@attributes":{"id":"TABLE-US-00033","num":"00033"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"126pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"91pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["battery_in\u2266 fixed_battery_units* ","\u2200 i \u2208 intervals, a \u2208 accounts"]},{"entry":["max_unit_charge_rate",{}]},{"entry":["battery_out\u2266 fixed_battery_units* ","\u2200 i \u2208 intervals, a \u2208 accounts"]},{"entry":"max_unit_discharge_rate"},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"In some embodiments, the system may be configured to prevent export onto the grid.\n\nbattery_out\u2266native_demand_\u03b5intervals,\u03b5accounts\n","In some embodiments, the system may be configured to prevent battery state from exceeding battery capacity.\n\nbattery_end_state\u2266fixed_battery_units*unit_capacity_kwh\u2200\u03b5intervals,\u03b5accounts\n","In some embodiments, the system may be configured to define relationship between battery output and battery end_states.",{"@attributes":{"id":"p-0182","num":"0190"},"tables":{"@attributes":{"id":"TABLE-US-00034","num":"00034"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"140pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"63pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"battery_end_state= fixed_battery_units* ","\u2200 a \u2208 accounts"]},{"entry":[{},"unit_capacity_kwh * init_percent_full+",{}]},{"entry":[{},"interval_length_hrs * ((battery_in* ",{}]},{"entry":[{},"charging_efficiency) \u2212 (battery_out\/",{}]},{"entry":[{},"discharging_efficiency))",{}]},{"entry":[{},"battery_end_state= battery_end_state+ ","\u2200 i \u2208 {1, 2, . . . , "]},{"entry":[{},"interval_length_hrs * ((battery_in*","|intervals| - 1},"]},{"entry":[{},"charging_efficiency) \u2212 (battery_out\/","a \u2208 accounts"]},{"entry":[{},"discharging_efficiency))"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}}}},"In some embodiments, the system may be configured to set final battery state equal to initial battery state.",{"@attributes":{"id":"p-0184","num":"0192"},"tables":{"@attributes":{"id":"TABLE-US-00035","num":"00035"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"56pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["battery_end_state = fixed_battery_units*","\u2200 a \u2208 accounts"]},{"entry":"unit_capacity_kwh * init_percent_full"},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"In some embodiments, the system may be configured to, optionally, hold battery_units or CRL constant.",{"@attributes":{"id":"p-0186","num":"0194"},"tables":{"@attributes":{"id":"TABLE-US-00036","num":"00036"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"63pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["capacity_reservation_level=","\u2200 a \u2208 accounts"]},{"entry":"post_battery_fixed_capacity_reservation_level"},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"In some embodiments, the system may be configured to run Model, for example, monthly, for each potential utility commitment and number of battery units per account.","As shown in block  of , an apparatus, such as apparatus  embodied by the operational platform  and\/or apparatus , may be configured to provide the site-level schedules to each of the plurality of affected gateway apparatuses for facilitating control of on-site energy asset usage and grid-supplied electric consumption.",{"@attributes":{"id":"p-0189","num":"0197"},"figref":"FIG. 11"},"The system may then receive a dispatch signal from the utility system. For example, through private tunnel on public internet, to connect to the utility system, the operational platform may receive a signal for event dispatch. In some embodiments, under contract, events may be dispatched as described above, for example, up to the maximum amount of capacity required for each respective contract. In other embodiments, the event signals may include wholesale market geographical region, load aggregation point, or zone, composed of certain transmission substations, etc., Contract ID, MW, Start Time, and Duration. Upon reception of a dispatch signal, the system may then have, for example, a pre-defined amount of time (e.g., 20 minutes) from the point of utility signal to achieve full battery response.","Subsequent to reception of the dispatch signal, the system may then re-run the portfolio optimization process described above. The system may then be configured to write to battery schedules. That is, results from the event processing may cause the system to update the schedule information for the relevant units to be dispatched.","At each site, the system may cause a gateway read, for example, every 0.5-5 minutes. In particular, each gateway apparatus in the field may be caused to poll the cloud platform to pull, or otherwise receive updated battery schedules over a RESTful API, or other secure transfer mechanisms including publish\/subscribe methods. These gateways may be connected to the internet through a 4G\/LTE cellular modem in the gateway apparatus. The gateway apparatus may store the full schedule locally, with updated dispatch instructions for the event period. At the start time of a given schedule period or event, the gateway apparatus may write to the energy asset controller for the upcoming event.",{"@attributes":{"id":"p-0193","num":"0201"},"figref":["FIGS. 5, 6, 9, and 10","FIGS. 5, 6, 9, and 10","FIGS. 5, 6, 9, and 10","FIGS. 5, 6, 9, and 10"],"b":["406","404"]},"Accordingly, blocks of the flowchart support combinations of means for performing the specified functions and combinations of operations for performing the specified functions. It will also be understood that one or more blocks of the flowcharts, and combinations of blocks in the flowcharts, can be implemented by special purpose hardware-based computer systems which perform the specified functions, or combinations of special purpose hardware and computer instructions.","In some embodiments, certain ones of the operations herein may be modified or further amplified as described below. Moreover, in some embodiments additional optional operations may also be included as shown by the blocks having a dashed outline in . It should be appreciated that each of the modifications, optional additions or amplifications below may be included with the operations above either alone or in combination with any others among the features described herein.","In an embodiment of the present invention, the energy asset system described above may skid-mounted, for example, at a customer site, which allows for rapid installation, and when needed, the ability to relocate equipment.  illustrates a diagram of a skid-mounted energy asset system that may be provided in accordance with some embodiments of the present invention. In particular, embodiments of the present invention may provide a skidded energy asset system (e.g., energy storage systems, diesel generators, gas turbines, or the like) comprising power electronics and communications. The skidded energy asset system may include communications equipment, as described above, that allow for remote monitoring and dispatching, open architecture where all components are packaged to withstand the elements.","Many modifications and other embodiments of the inventions set forth herein will come to mind to one skilled in the art to which these inventions pertain having the benefit of the teachings presented in the foregoing descriptions and the associated drawings. Therefore, it is to be understood that the inventions are not to be limited to the specific embodiments disclosed and that modifications and other embodiments are intended to be included within the scope of the appended claims.","Moreover, although the foregoing descriptions and the associated drawings describe example embodiments in the context of certain example combinations of elements and\/or functions, it should be appreciated that different combinations of elements and\/or functions may be provided by alternative embodiments without departing from the scope of the appended claims. In this regard, for example, different combinations of elements and\/or functions than those explicitly described above are also contemplated as may be set forth in some of the appended claims. Although specific terms are employed herein, they are used in a generic and descriptive sense only and not for purposes of limitation."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Having thus described embodiments of the invention in general terms, reference will now be made to the accompanying drawings, which are not necessarily drawn to scale, and wherein:",{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0035","num":"0034"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIG. 12"}]},"DETDESC":[{},{}]}
