---
title: Architecture for transporting PBX signaling codes via SIP
abstract: An integrated PBX and SIP telephony communications network supporting transmission of private signaling codes over SIP. A telephone emits a private signaling code for accessing a particular PBX function. An enhanced IP translator coupled to the telephone encapsulates the private signaling code within a SIP invite, request, response, information, notification message, and/or instant message. The SIP message with the encapsulated private signaling codes is transmitted over a communications network to a PBX. The PBX is also coupled to an enhanced IP translator that receives the SIP message and decapsulates the embedded private signaling codes. The codes are transmitted to the PBX for rendering a function for the telephone. A SIP user agent aware of the private signaling codes may also access functions provided by the PBX by encapsulating/decapsulating private signaling codes into/from SIP messages.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07002912&OS=07002912&RS=07002912
owner: Alcatel
number: 07002912
owner_city: Paris
owner_country: FR
publication_date: 20020212
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATION(S)","FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION"],"p":["This application claims the benefit of U.S. provisional application Nos. 60\/317,673 and 60\/317,744, both filed on Sep. 6, 2001, the contents of both of which are incorporated herein by reference. This application also contains subject matter that is related to the subject matter disclosed in U.S. application Ser. No. 09\/966,155, filed on Sep. 28, 2001, the content of which is also incorporated herein by reference.","This invention relates generally to internet telephony, and more particularly, to transporting private telephony signaling codes using an application layer control protocol.","In a conventional private branch exchange (PBX) network, the intelligence of the system generally resides within the PBX, while the phone is a simple terminal. The PBX allows the phone to make and receive simple telephone calls, and also provides numerous additional services such as, for example, dial-by-name, voice mail, speed dial, call transfer, display of caller information, and the like. Such PBX functionality is generally achieved by the exchange of digital, vendor-specific, private signaling codes between the phone and the PBX.","The underlying transport mechanism for the private signaling code exchange may be a direct point-to-point digital connection, or via an internet protocol (IP) based networked connection. In an IP based networked connection, the telephone is generally an IP telephone or a digital telephone with an IP translator, either of which is capable of IP telephony communication.",{"@attributes":{"id":"p-0006","num":"0005"},"figref":"FIG. 1","b":["10","12","14","10","12","14","10","12","10","12","16","20","16","10","14","10","14","16"]},"A recipient translator  receives the IP packets, decapsulates the private signaling codes, and forwards these codes to the PBX  for invoking a particular PBX function for the telephone . The RTP voice packets are also decompressed, converted to standard digital voice, and sent to the PBX.","Some PBX systems similarly accomplish the overall function of converting between packetized and digital data using IP translators which are internal to the PBX and telephone devices, instead of the external translators ,  as shown in .","A major deficiency with the network illustrated in  is that the private signaling codes transmitted in traditional IP packets by the IP translators ,  are generally vendor-specific and unidentifiable by other third-party devices. Powerful third-party SIP services such as intelligent call redirection, one-number forwarding, integration with presence and instant messaging functions, and other such services are incompatible with the private signaling code IP packets.","Another deficiency with existing networks is that other IP phones that adhere to standardized application-layer control protocols, such as H.323 and session initiation protocol (SIP), do not utilize private signaling codes for communicating with a specific PBX. Further, although H.323\/SIP phones can communicate with some PBXs, the PBX services provided are generally simple, such as, for example, making or receiving a call. The H.323 and SIP phones are generally not exposed to the full suite of PBX services accessible only via private signaling codes.","Accordingly, it is desirable to have a telephone system that may take advantage of the full integrated suite of services provided by both the PBX system and the SIP network. Such an integrated system allows the PBX system to take advantage of existing and emerging third-party SIP services. It also allows SIP hardware-based IP phones and software-based user agents, to take full advantage of the PBX services.","The present invention is directed to a system and method for transporting private signaling codes via an application layer control protocol such as, for example, a SIP protocol. According to one embodiment, the invention is directed to a telephony communications network that includes a telephony unit, a translator coupled to the telephony unit, and a communications interface coupled to the translator. The telephony unit generates telephony signaling codes. The translator encapsulates the telephony signaling codes in an application layer control protocol message. The communications interface transmits the message with the telephony signaling codes over a communications network.","In another embodiment, the invention is directed to a telephony communications network that includes a telephony unit and a translator coupled to the telephony unit where the translator includes a signaling interface, a processor coupled to the signaling interface, and a network interface coupled to the processor. The signaling interface receives telephony signaling codes. The processor encapsulates the telephony signaling code in an application layer control protocol message. The communications interface transmits the message with the telephony signaling code over a communications network.","In a further embodiment, the invention is directed to a method for communication over a telephony network. The method includes generating telephony signaling codes, encapsulating the telephony signaling codes in an application layer control protocol message, and transmitting the message with the telephony signaling code over a communications network.","It should be appreciated, therefore, that the present invention allows conventional digital telephone sets and SIP user agents to enjoy both the full set of PBX functionality provided by existing SIP servers and SIP services provided by existing SIP servers.",{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 2","b":["22","24","26","24","34","22","36","34","22","32"]},"The telephone  and PBX  are each preferably coupled to one or more enhanced IP translators ,  translating between private signaling codes\/commands typically sent at a TCP\/IP Layer  transport level and Layer  application messages created according to a standardized session protocol transmitted between the PBX  and telephone . The private signaling codes\/commands may take the form of vendor-specific PBX codes conventional in the art.","The Layer  application messages may take the form of SIP messages created according to the SIP protocol set forth in Internet Engineering Task Force Request for Comment 2543 entitled \u201cSIP: Session Initiation Protocol,\u201d March 1999 (hereinafter referred to as RFC 2543), the content of which is incorporated herein by reference. A person skilled in the art should recognize, however, that any other TCP\/IP application layer (Layer ) control protocol known in the art may be used instead of SIP, such as, for example, H.323, MGCP, or the like. The described embodiments are therefore not limited to the use of SIP messages.","The enhanced IP translators ,  may be similar to the IP translators ,  illustrated in , but are preferably enhanced with the capability of encapsulating\/decapsulating private signaling codes in SIP messages. The enhanced IP translators ,  may be hardware or software devices external to the telephone  and\/or PBX , or may be incorporated internally as part of the telephone and\/or PBX. For example, enhanced IP translator  may be a plug-in device that may be removably attached to a conventional digital telephone.","The telephone  may be similar to the telephone  illustrated in . For example, the telephone  may be an Alcatel Advanced Reflexes\u2122 4035 terminal available from Alcatel Corporation. The telephone  may also be any other digital telephone conventional in the art capable of communicating with a PBX via private signaling codes.","The PBX  may be similar to the PBX  illustrated in . For example, the PBX  may be an OmniPCX 4400 available from Alcatel Corporation. The PBX  may also be any other PBX conventional in the art that provides a full host of PBX services for the telephone  in response to private signaling codes received from the telephone. Such services include, but are not limited to dial-by-name, voice mail, speed dial, call hold, call transfer, call conference, multi-line access, call-detail records, and the like.","The SIP server  may be a proxy or redirect server as described in RFC 2543, or an application server or back-to-back-user-agent for providing third-party services. The SIP user agent  is preferably a PC, telephone, or any other device that includes a SIP stack. For example, the SIP user agent  may be a PC-based Windows XP Messenger application provided by Microsoft Corporation. The SIP user agent  may either be aware or unaware of the private signaling codes exchanged between the PBX  and telephone . If the SIP user agent  is unaware of the private signaling codes, the user agent may transmit and receive simple calls through the PBX , but may derive no additional PBX services available via exchange of private signaling codes. If the SIP user agent  is made aware of the private signaling codes, it may make use of the full set functions provided by the PBX , by suitably reading and writing private signaling data within SIP message bodies, as similarly done by the enhanced IP translators , .","In general terms, private signaling codes transmitted from the PBX  or telephone  are encapsulated by the enhanced IP translators ,  in SIP messages and transmitted over the IP network  either directly or via the SIP server . Voice is transported via conventional RTP packets.","The SIP messages used to transport private signaling codes include, but are not limited to, INVITE, NOTIFY, INFO, OK, BYE, and other types of SIP messages conventional in the art which are described in further detail in RFC 2543 as well as in Internet Engineering Task Force Request for Comment 2976 entitled \u201cThe SIP INFO Method,\u201d October 2000, and in Internet Engineering Task Force Internet Draft entitled \u201cSIP Extensions for Presence,\u201d September 2001, the contents of which are incorporated herein by reference.","The encapsulation of private signaling codes within SIP messages allow the telephone  access to the full host of functionalities provided by the PBX , while also taking advantage of the various SIP services  provided via the SIP server .",{"@attributes":{"id":"p-0039","num":"0038"},"figref":["FIG. 3","FIG. 2","FIG. 3"],"b":["32","24","30","34","22","22","28","28","36","24","24","30","34"],"i":["a","a ","a","a","a","b ","a","b","a","a ","a ","a ","a. "]},"According to one embodiment of the invention, the SIP server invokes the forking service for contacting one or more devices which have registered for the called extension \u201c1234.\u201d The callee may have registered telephone (an office phone), telephone (a laboratory phone), and SIP user agent (a PC) as all being associated with extension \u201c1234\u201d.","The SIP server transmits a SIP INVITE message with the ring command body to the devices registered for the called extension based on the mechanism indicated by the forking service . The forking service may indicate, for example, that the INVITE message is to be transmitted concurrently to all registered devices. In this instance, the ring command in the transmitted INVITE messages causes all registered devices to ring concurrently until one of the devices answers the call.","The forking service may alternatively indicate that the INVITE message is to be transmitted to the registered devices in a particular order. For example, the INVITE message may be first sent to telephone and upon no answer, to telephone . If telephone also fails to answer the call, the INVITE message may be transmitted to the SIP user agent . Upon no answer by SIP user agent , the forking service may indicate that the call is to be forwarded to a voice mail system, which might be either internal to the PBX or resident on the SIP network as another SIP service.","The forking service may further indicate particular hours at which an incoming call is to be transmitted to a particular device. For example, telephone may receive incoming INVITE messages between 8 am\u20136 pm, telephone between 6 pm\u201310 pm, and SIP user agent between 10 pm\u20138 am.","Upon receipt of an INVITE message by the enhanced IP translators , , the embedded private ring command is extracted and transmitted to the appropriate telephone , , causing the telephone to ring. The embedded private ring command transmitted to the SIP user agent is either ignored or interpreted by the agent depending on whether the agent is aware or unaware of the private signaling codes. In either case, receipt of the SIP INVITE message triggers an incoming call indication on the device associated with the SIP user agent , and thereby alerts the callee.",{"@attributes":{"id":"p-0045","num":"0044"},"figref":"FIG. 4","b":["28","30","40","42","44","46","44","48"]},"In one embodiment, the signaling and voice interface  receives private signaling codes and voice signals from the telephone  or PBX  over a communications port . The voice signals are preferably transmitted to the DSP  for converting the signals into compressed voice data packets, such as, for example, RTP packets.","The private signaling codes are preferably transmitted to the central processor  for processing. The SIP stack  within the processor is invoked for encapsulating the received private signaling codes within a SIP message. The signaling codes may be encapsulated, for instance, in the body of a SIP invite message, request message, response message, informational message, instant message, or the like. According to one embodiment of the invention, the processor embeds the actual opcode data received from the telephone  or PBX  into the SIP message. According to another embodiment of the invention, the processor converts the opcode to an extensible markup language (XML) form or a text-based mnemonic form, and embeds the converted data into the SIP message body. The SIP message is then transmitted via the network interface  to a communications port  for delivery over the IP network .","The network interface  may further receive a SIP message with encapsulated private signaling codes for decoding by the processor . In this regard, the signaling protocol stack  receives the SIP message and examines the body of the message for header data indicating that private signaling codes are embedded therein. Upon identifying such header data, the processor retrieves the embedded private signaling codes and forwards them to the private signaling and voice interface  for transmitting to the telephone  or PBX . If the SIP message body includes mnemonic form data instead of opcode data, the processor interprets\/converts the mnemonic form data to opcode data before transmitting the opcode data to the telephone or PBX.",{"@attributes":{"id":"p-0049","num":"0048"},"figref":"FIG. 5","b":["54","54","55","56","57","55","57"]},"The API  is preferably operative between the SIP user agent software  and SIP stack . The API  may be similar to the enhanced IP translator ,  of . According to one embodiment of the invention, the API  is a plug-in device configured to read and write private signaling data within SIP message bodies. The plug-in device may be an external hardware device removably coupled to a SIP user agent device. The plug-in device may also be an internal software device downloaded to the SIP user agent. The inclusion of the API  in a conventional SIP user agent that is unaware of private signaling codes, and is therefore capable of only enjoying basic PBX functionality, allows the conversion to a SIP user agent that is aware of private signaling codes for accessing a full set of functionality provided by the PBX.",{"@attributes":{"id":"p-0051","num":"0050"},"figref":"FIGS. 6A\u20136B","b":["60","62","60","64","66"]},"The SIP body  may include standard SIP body information such as, for example, a session description  that adheres to a session description protocol (SDP) set forth in Network Working Group Request for Comments 2327 entitled \u201cSDP: Session Description Protocol,\u201d April 1998 (hereinafter referred to as RFC 2327), the content of which is incorporated herein by reference. The session description  preferably includes a media address  used to receive media information.","According to the embodiment illustrated in , the SIP body  further includes private signaling codes in the form of opcodes . The private signaling codes may be preceded by header data  indicating that the SIP body data to follow is embedded opcodes, along with an optional vendor identification identifier and a version number of the vendor-specific opcode set.","In the embodiment illustrated in , the embedded private signaling codes are text-based mnemonic data  preceded by header data  that may indicate a version of the mnemonic set for proper conversion to opcode data by a receiving enhanced IP translator ,  or SIP user agent aware of private signaling codes.",{"@attributes":{"id":"p-0055","num":"0054"},"figref":"FIG. 7A","b":["22","80","22","22","28","22","28","28","28"]},"In step , the telephone translator  transmits the SIP INVITE message to the enhanced IP translator  for the PBX  (hereinafter referred to as the PBX translator ). According to one embodiment of the invention, the PBX translator  verifies whether the caller is an authorized caller by examining the authentication information in the body of the INVITE message. Alternatively, the PBX translator  does not necessarily require authentication for initiating a call through the translator.","If the caller is authenticated or no authentication is necessary, the PBX translator  retrieves the embedded private offhook command from the INVITE message and forwards it to the PBX  in step . The PBX determines, based on the received signaling command, that a media exchange is to be initiated and accordingly, transmits a private signaling command, which unmutes the telephone's microphone and headset, to the PBX translator  in step . The PBX may further transmit private signaling commands for displaying information associated with the call to the telephone display.","The PBX translator creates an OK message in response to the INVITE message received in step , and embeds the private signaling commands received from the PBX in the body of the OK message. The PBX translator  further includes its media address in the session description as the address for receiving future SIP media. In step , the PBX translator  transmits the OK message to the telephone translator  with encapsulated private signaling data within the message.","The telephone translator  receives the OK message and retrieves\/un-encapsulates the embedded private signaling commands from the body of the message. The retrieved commands are forwarded to the telephone  in step . After receiving the OK response from the PBX translator , the telephone translator  transitions into a media call and displays any information transmitted by the PBX. The telephone translator  further responds with an ACK message in step .","Although the SIP server  is not utilized in the embodiment illustrated in , a person skilled in the art should recognize that an analogous sequence of events occurs when the SIP messages transit one or more standard SIP servers, such as SIP server . The SIP servers may add additional third-party functionality such as opening a firewall, initiating start of billing signal for an IP service provider network, and the like. The exchange of private signaling codes preferably occurs in a manner that is transparent to the SIP servers given that they simply forward the standard SIP messages without examining message body content and add specific services according to their specific functions.",{"@attributes":{"id":"p-0061","num":"0060"},"figref":"FIG. 7B","b":["36","36","22","24"]},"In step , the SIP user agent  initiates a call by transmitting an INVITE message. The INVITE message preferably encapsulates the private signaling codes such as, for example, a private offhook code, issued by the SIP user agent software application through suitable use of the API . The INVITE message further includes the SIP user agent's media address in the session description as the address for receiving future SIP media.","The PBX translator  receives the INVITE message and retrieves the embedded private offhook command in the INVITE message. The private offhook command is forwarded to the PBX  in step . The PBX determines, based on the received command, that a media exchange is to be initiated and accordingly, transmits a private signaling command, which unmutes the microphone and headset, to the PBX translator  in step . The PBX may further transmit private signaling commands for displaying information associated with the call.","The PBX translator  creates an OK message in response to the INVITE message received in step , and embeds the private signaling commands received from the PBX in the body of the OK message. The PBX translator  further includes its media address in the session description as the address for receiving future SIP media. In step , the PBX translator  transmits the OK message to the SIP user agent  with an encapsulated private signaling data within the message.","The SIP user agent  receives the OK message and retrieves\/un-encapsulates the embedded private signaling commands from the body of the message. The SIP user agent proceeds to display any private signaling information transmitted by the PBX. The SIP user agent  further responds with an ACK message in step .","During the course of the call, the SIP user agent  may emit other private signaling codes for accessing particular PBX functions. Such private signaling codes are preferably encapsulated within SIP INFO messages and transmitted to the PBX translator  in step . The PBX translator retrieves and transmits the codes to the PBX  in step , and responds to the SIP user agent with an OK message in step .","The PBX  may also issue private signaling codes to the PBX translator  in step . Such private signaling codes are preferably encapsulated in a SIP INFO message and transmitted to the SIP user agent  in step . The SIP user agent  responds to the INFO message with an OK message in step .",{"@attributes":{"id":"p-0068","num":"0067"},"figref":"FIG. 8","b":["24","22","36","34"]},"In step , a call for the called extension arrives at the PBX . In step , the PBX  initiates a private ring command to the called extension with other private signaling information such as, for example, a caller ID, display information, ring type, LED flashing indications, and the like. In this regard, the PBX translator  creates a SIP INVITE message that includes the private ring command and other private signaling information in the body of the message. The PBX translator  further includes its address in the session description as the media address for receiving future SIP messages from the callee.","In step , the PBX translator  transmits the SIP INVITE message to the SIP server . The SIP server  invokes the SIP services  to search for registered devices for the called extension, and concludes that both the telephone  and SIP user agent  are registered. In steps  and , the SIP server  proceeds to forward the INVITE message with the embedded private signaling codes to both the telephone translator  and SIP user agent .","Upon arrival of the SIP INVITE message at the telephone translator , the translator extracts the private ring command and other private signaling codes from the SIP message body and forwards them to the telephone in step , causing the telephone to ring with the appropriate type of ring, display the correct display information such as the caller ID or caller's name, and\/or flash the appropriate LEDs as indicated by the extracted private signaling codes.","The SIP INVITE message transmitted to the SIP user agent  also causes the associated device to indicate an incoming call and alerts the user. If the SIP user agent  has been made aware of the private signaling codes, the SIP user agent extracts the embedded private signaling codes to perform the functions and\/or displays indicated by the codes. If the SIP user agent  is unaware of the private signaling codes, the agent simply disregards the codes embedded in the SIP message and thereby functions as a conventional SIP user agent.","In step , the callee responds to the incoming call by causing the telephone  to go offhook. The offhook operation causes the telephone  to emit a private signaling offhook code. The telephone  may also emit other private signaling codes such as, for example, codes indicating whether the offhook command was transmitted by lifting the handset or by depressing a speakerphone key. In step , the telephone translator  receives the private signaling codes emitted by the telephone  and embeds them in a SIP OK message. The telephone translator  further includes its address in the session description as the media address for receiving future SIP messages from the caller.","In step , the telephone translator  transmits the OK message to the SIP server  for forwarding to the PBX translator  in step . The PBX translator  retrieves the private signaling data from the OK message and transmits the data to the PBX  in step . From the received data, the PBX  determines that the call has been answered and may further determine how the call was answered, that is, via handset offhook or speakerphone.","Because the call was answered by the telephone  and not by the SIP user agent , the SIP server  cancels the call to the SIP user agent  by transmitting a CANCEL SIP message in step . Furthermore, the PBX translator  issues an ACK message in step  which is forwarded to the telephone translator  in step  in response to the OK message. Voice conversation then ensues in step  between the caller through the PBX  and the telephone .",{"@attributes":{"id":"p-0076","num":"0075"},"figref":"FIG. 9","b":["24","22","22","130","22","28","30","132","30","24","134","30","136","138","24","30","140","28","34"]},"The telephone translator  extracts the private signaling codes and forwards these to the telephone  in step . In step , the telephone translator  responds back to the PBX translator  with a SIP OK message.","A person skilled in the art should recognize that other SIP messages besides INVITE, INFO, and OK messages may be used to transport private signaling codes. Preferably, the PBX and telephone translators ,  encapsulate pending private signaling commands in a SIP request message to be transmitted next in a SIP signaling sequence. For example, if the telephone translator  were to transmit a SIP BYE message in response to a user hanging-up the telephone , the telephone translator encapsulates a private onhook command in the BYE message. If no SIP messages are pending to the transmitted, private signaling commands may be transmitted in SIP INFO messages, SIP NOTIFY messages, SIP instant messages, or the like.","As discussed above with reference to , multiple devices associated with a particular extension may receive INVITE messages for an incoming call. Any of these devices may go offhook and generate an appropriate private signaling message to the PBX  in response to the incoming INVITE message. The PBX translator  is preferably aware of all devices associated with a particular extension and is configured to transmit private signaling codes during a call to all associated devices and not only to the device exchanging media. This becomes desirable, for instance, if a new voice mail message arrives during a call. The new voice mail message indication is not only transmitted to the device currently engaged in the call, but also to all associated devices, allowing a user to be alerted of the new voice mail message via display of a message waiting indicator on all of the devices associated with the extension.",{"@attributes":{"id":"p-0080","num":"0079"},"figref":"FIG. 10","b":["24","28","28"],"i":["a ","b "]},"In step , the PBX translator  receives a SIP SUBSCRIBE message from a previously unsubscribed telephone translator . In step , the PBX translator  responds with an OK message and subscribes telephone translator by adding it to its list of subscribed clients for the given extension. Once subscribed, the PBX translator  monitors, on its own accord or in response to conventional heartbeat signals provided by the PBX, the viability of telephone translator and its associated telephone. In this regard, the PBX translator  transmits, in step , a NOTIFY message at a predetermined time. Telephone translator responds with an OK message in step  if it is online and all associated functionality is operating normally. If telephone translator fails to respond with an OK message after the receipt of a single or multiple NOTIFY messages, the PBX translator  proceeds to de-subscribe the telephone translator, preventing future private signaling codes to be transmitted to the telephone translator until successful re-subscription. Upon re-subscription, the PBX translator  transmits updated notifications that the re-subscribed translator may have missed while disabled. This information is preferably made available via conventional state refresh commands from the PBX .","Upon issuance of a private signaling command by the PBX  in step , the PBX translator  embeds the command in a SIP message for transmitting to telephone translator. Preferably the command is embedded in a NOTIFY message and transmitted in step  if telephone translator is not currently involved in a call with the PBX . Alternatively, if telephone translator is involved in the call, the command may be embedded within INFO, OK, and\/or INVITE messages. Telephone translator responds to the NOTIFY message with an OK message in step , indicating receipt of the NOTIFY message.","In step , the PBX translator  receives a new SUBSCRIBE message from previously unsubscribed enhanced IP translator , to which the PBX translator responds with an OK message in step . The PBX translator then proceeds to add telephone translator to the list of subscribed clients. Issuance of future private signaling commands by the PBX  in step  causes the PBX translator  to transmit the commands to both telephone translators and . For out-of-call notifications, the PBX translator  transmits the commands in NOTIFY messages in steps , , to which the telephone translators , respond with OK messages in steps , .",{"@attributes":{"id":"p-0084","num":"0083"},"figref":"FIG. 11","b":["30","28","28","210","214","30","28","28","28","28","212","216"],"i":["a","b ","a ","b ","a","b "]},"An incoming call for a called extension arrives at the PBX  and in step , the PBX  initiates a private ring command to the called extension along with any other private signaling information. The PBX translator  creates a SIP INVITE message in response and includes the private ring command and any other private signaling information in the body of the message. The PBX translator  further includes its address in the session description as the media address for receiving future SIP messages from the callee.","In step , the PBX translator  transmits the SIP INVITE message to the SIP server . The SIP server  invokes the SIP services  to search for the registered devices for the called extension, and concludes that telephone translators and have been registered. In steps  and , the SIP server  forwards the INVITE message with the embedded private signaling codes to both telephone translators and ","Upon arrival of the SIP INVITE message, each translator , extracts the private ring command and other private signaling codes from the SIP message body and forwards them to their respective telephones , , causing the telephones to ring and perform any other functions indicated by the embedded private signaling codes.","In the illustrated embodiment, telephone translator fails to answer the incoming call and as a result, the SIP server  transmits a CANCEL message in step  canceling the INVITE message. Telephone translator receives the CANCEL message and issues a private command to terminate the ringing of the associated telephone in step .","The INVITE message to telephone translator causes the user to go offhook and the telephone translator then emits a private offhook command and any other private signaling commands in step . Telephone translator embeds the private offhook command and any other private signaling commands from the telephone in an OK message transmitted to the SIP server  in step .","The SIP server  forwards the OK message in step  to the PBX translator . The PBX translator  retrieves the offhook command and any other embedded private commands from the body of the OK message and forwards it to the PBX  in step . The PBX translator  responds to the OK message with an ACK message which is transmitted to the SIP server  in step  and in turn forwarded to telephone translator in step .","During the course of the call between the PBX  and telephone , private signaling commands are emitted by the PBX and forwarded to the PBX translator  in step . For example, the PBX  may issue commands for displaying an elapsed call time. The PBX translator  receives the private signaling commands and determines the subscribed devices associated with the called extension. In this regard, the PBX translator searches its current subscription list for determining that both telephone translator and are subscribed clients. The PBX translator  further determines that the current call is engaged with telephone translator . Accordingly, the PBX translator  transmits the received private signaling commands in a SIP INFO message for telephone translator in step , and in a SIP NOTIFY message for telephone translator in step . Upon receipt of the SIP messages, each translator retrieves the embedded private signaling commands and forwards these to their respective telephones , . The telephone translators , further respond to the SIP messages with OK messages in steps  and .","Although this invention has been described in certain specific embodiments, those skilled in the art will have no difficulty devising variations which in no way depart from the scope and spirit of the present invention. It is therefore to be understood that this invention may be practiced otherwise than is specifically described. Thus, the present embodiments of the invention should be considered in all respects as illustrative and not restrictive, the scope of the invention to be indicated by the appended claims and their equivalents rather than the foregoing description."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["These and other features, aspects and advantages of the present invention will be more fully understood when considered with respect to the following detailed description, appended claims, and accompanying drawings where:",{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":["FIG. 3","FIG. 2"]},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIGS. 6A\u20136B"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 7A"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 7B"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 11"}]},"DETDESC":[{},{}]}
