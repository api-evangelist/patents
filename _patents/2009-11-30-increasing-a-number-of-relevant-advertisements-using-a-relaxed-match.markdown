---
title: Increasing a number of relevant advertisements using a relaxed match
abstract: The number of ads potentially relevant to search query information may be increased by relaxing the notion of search query keyword matching. This may be done, for example, by expanding a set of ad request keywords to include both query keywords (or derivatives of a root thereof) and related keywords. The related keywords may be words with a relatively high co-occurrence with a query keyword in a group of previous search queries (e.g., search queries in a session). The scores of ads with keyword targeting criteria that matched words related to words in a search query, but not the words from the search query, may be discounted. That is, the scores of ads served pursuant to a relaxed notion of matching may be discounted relative to the scores of ads served pursuant to a stricter notion of matching. This may be done by using a score modification parameter, such as an ad performance multiplier (for cases in which an ad score is a function of ad performance information). The score modification parameter may be updated to reflect observed performance data, such as performance data associated with {word-to-related word} mappings.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08135619&OS=08135619&RS=08135619
owner: Google, Inc.
number: 08135619
owner_city: Mountain View
owner_country: US
publication_date: 20091130
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["\u00a70. RELATED APPLICATIONS","\u00a71. BACKGROUND OF THE INVENTION","\u00a72. SUMMARY OF THE INVENTION","\u00a74. DETAILED DESCRIPTION"],"p":["This application is a continuation of U.S. patent application Ser. No. 10\/674,888 (referred to as \u201cthe '888 application\u201d and incorporated herein by reference), titled \u201cINCREASING A NUMBER OF RELEVANT ADVERTISEMENTS USING A RELAXED MATCH,\u201d filed on Sep. 30, 2003 now U.S. Pat. No. 7,647,242 and listing Jeremy BEM as the inventor.","\u00a71.1 Field of the Invention","The present invention concerns finding items, such as advertisements (\u201cads\u201d), relevant to a request, such as a search query. In particular, the present invention concerns helping to determine, score, and\/or render an expanded set of relevant ads.","\u00a71.2 Related Art","Advertising using traditional media, such as television, radio, newspapers and magazines, is well known. Unfortunately, even when armed with demographic studies and entirely reasonable assumptions about the typical audience of various media outlets, advertisers recognize that much of their ad budget is simply wasted. Moreover, it is very difficult to identify and eliminate such waste.","Recently, advertising over more interactive media has become popular. For example, as the number of people using the Internet has exploded, advertisers have come to appreciate media and services offered over the Internet as a potentially powerful way to advertise.","Advertisers have developed several strategies in an attempt to maximize the value of such advertising. In one strategy, advertisers use popular presences or means for providing interactive media or services (referred to as \u201cWebsites\u201d in the specification without loss of generality) as conduits to reach a large audience. Using this first approach, an advertiser may place ads on the home page of the New York Times Website, or the USA Today Website, for example. In another strategy, an advertiser may attempt to target its ads to narrower niche audiences, thereby increasing the likelihood of a positive response by the audience. For example, an agency promoting tourism in the Costa Rican rainforest might place ads on the ecotourism-travel subdirectory of the Yahoo Website. An advertiser will normally determine such targeting manually.","Normally, when a member of the advertising audience (referred to as a \u201cviewer\u201d or \u201cuser\u201d in the Specification without loss of generality) selects an ad by clicking on it, embedded hypertext links typically direct the viewer to the advertiser's Website. This process, wherein the viewer selects an ad, is commonly referred to as a \u201cclick-through\u201d (\u201cClick-through\u201d is intended to cover any user selection). The ratio of the number of click-throughs to the number of impressions of the ad (i.e., the number of times an ad is displayed or otherwise rendered) is commonly referred to as the \u201cclick-through rate\u201d or \u201cCTR\u201d of the ad.","A \u201cconversion\u201d is said to occur when a user consummates a transaction related to a previously served ad. What constitutes a conversion may vary from case to case and can be determined in a variety of ways. For example, it may be the case that a conversion occurs when a user clicks on an ad, is referred to the advertiser's Web page, and consummates a purchase there before leaving that Web page. Alternatively, a conversion may be defined as a user being shown an ad, and making a purchase on the advertiser's Web page within a predetermined time (e.g., seven days). In yet another alternative, a conversion may be defined by an advertiser to be any measurable\/observable user action such as, for example, downloading a white paper, navigating to at least a given depth of a Website, viewing at least a certain number of Web pages, spending at least a predetermined amount of time on a Website or Web page, etc. Often, if user actions don't indicate a consummated purchase, they may indicate a sales lead, although user actions constituting a conversion are not limited to this. Indeed, many other definitions of what constitutes a conversion are possible. The ratio of the number of conversions to the number of impressions of the ad (i.e., the number of times an ad is displayed or otherwise rendered) is commonly referred to as the conversion rate. If a conversion is defined to be able to occur within a predetermined time since the serving of an ad, one possible definition of the conversion rate might only consider ads that have been served more than the predetermined time in the past.","The hosts of Websites on which the ads are presented (referred to as \u201cWebsite hosts\u201d or \u201cad consumers\u201d) have the challenge of maximizing ad revenue without impairing their users' experience. Some Website hosts have chosen to place advertising revenues over the interests of users. One such Website is \u201cOverture.com,\u201d which hosts a so-called \u201csearch engine\u201d service returning advertisements masquerading as \u201csearch results\u201d in response to user queries. The Overture.com Website permits advertisers to pay to position an ad for their Website (or a target Website) higher up on the list of purported search results. If such schemes where the advertiser only pays if a user clicks on the ad (i.e., cost-per-click) are implemented, the advertiser lacks incentive to target their ads effectively, since a poorly targeted ad will not be clicked and therefore will not require payment. Consequently, high cost-per-click ads show up near or at the top, but do not necessarily translate into real revenue for the ad publisher because viewers don't click on them. Furthermore, ads that viewers would click on are further down the list, or not on the list at all, and so relevancy of ads is compromised.","Search engines, such as Google for example, have enabled advertisers to target their ads so that they will be rendered in conjunction with a search results page responsive to a query that is relevant, presumably, to the ad. Although search result pages afford advertisers a great opportunity to target their ads to a more receptive audience, search result pages are merely a fraction of page views of the World Wide Web. To increase advertising opportunities, some online advertising systems may use ad relevance information and document content relevance information (e.g., concepts or topics, feature vectors, etc.) to \u201cmatch\u201d ads to (and\/or to score ads with respect to) a document including content, such as a Web page for example. The foregoing ad serving systems can be thought of as keyword-targeted systems (where ads are targeted using terms found in a search query) and content-targeted systems (where ads are targeted using content of a document).","The Google ad system allows advertisers to target their ads in a one or more ways so that the ads will likely be relevant, and therefore useful, when served. For example, currently, advertisers may target ads using one of three keyword matching methods: exact; phrase; and broad. With exact matching, the query must be identical to keyword targeting criteria (i.e., one or more words or phrases used to make a targeting judgment (e.g., to determine whether an ad is relevant or not)). With phrase matching, the query must contain the targeting criteria words in the order specified by the phrase. Finally, with broad matching, the query must contain any one of one or more of the targeting criteria keywords, in any order.","All three of these keyword matching methods use keyword targeting criteria. Keyword targeting criteria are normally provided by the advertiser as an explicitly entered list or lists. For example, an advertiser may enter a list of all words which might appear in a relevant search query. Although this approach permits the serving of highly relevant ads, and therefore ads which should perform well, it does have some limits. For example, advertisers might not be able to appreciate, or even foresee, search queries or search terms entered by a user who would be receptive to their ads. Therefore, it would be useful to provide more sophisticated ways of identifying ads that are relevant to a search query, even if the search query doesn't contain the exact words targeted by the advertiser. Therefore it might often be useful to relax the notion of relevant ads.","The present invention allows the number of ads potentially relevant to search query information to be increased. The present invention may do so by relaxing the notion of search query keyword matching. This may be done, for example, by expanding a set of ad request keywords to include both query keywords (or derivatives of a root thereof) and related keywords. In one embodiment of the invention, the related keywords are words with a relatively high co-occurrence with a query keyword in a group of previous search queries (e.g., search queries in a session).","In one embodiment of the invention, if the related keyword appears in the ad creative, it may be emphasized (e.g., depicted with bold typeface text).","The present invention may also discount the scores of ads with keyword targeting criteria that matched words related to words in a search query, but not the words from the search query. That is, the present invention may discount the scores of ads served pursuant to a relaxed notion of matching relative to the scores of ads served pursuant to a stricter notion of matching. In one embodiment of the present invention, this is done by using a score modification parameter, such as an ad performance multiplier (for cases in which an ad score is a function of ad performance information). The score modification parameter may be updated to reflect observed performance data, such as performance data associated with {word-to-related word} mappings.","The present invention may involve novel methods, apparatus, message formats, and\/or data structures for determining, scoring, and\/or rendering an expanded set of relevant ads in an ad system. The following description is presented to enable one skilled in the art to make and use the invention, and is provided in the context of particular applications and their requirements. Various modifications to the disclosed embodiments will be apparent to those skilled in the art, and the general principles set forth below may be applied to other embodiments and applications. Thus, the present invention is not intended to be limited to the embodiments shown and the inventor regards his invention as any patentable subject matter described.","In the following, environments in which, or with which, the present invention may operate are described in \u00a74.1. Then, exemplary embodiments of the present invention are described in \u00a74.2. Thereafter, a specific example illustrating the usefulness of one embodiment of the present invention is provided in \u00a74.3. Finally, some conclusions regarding the present invention are set forth in \u00a74.4.","\u00a74.1 Environments in which, or with which, the Present Invention May Operate","\u00a74.1.1 Exemplary Advertising Environment",{"@attributes":{"id":"p-0038","num":"0037"},"figref":"FIG. 1","b":["120","110","120","130","120","130","120"]},"The ad server  may be similar to the one described in FIG. 2 of U.S. patent application Ser. No. 10\/375,900 (incorporated herein by reference), entitled \u201cSERVING ADVERTISEMENTS BASED ON CONTENT,\u201d filed on Feb. 26, 2003 and listing Darrell Anderson, Paul Bucheit, Alex Carobus, Claire Cui, Jeffrey A. Dean, Georges R. Harik, Deepak Jindal, and Narayanan Shivakumar as inventors. An advertising program may include information concerning accounts, campaigns, creatives, targeting, etc. The term \u201caccount\u201d relates to information for a given advertiser (e.g., a unique e-mail address, a password, billing information, etc.). A \u201ccampaign\u201d or \u201cad campaign\u201d refers to one or more groups of one or more advertisements, and may include a start date, an end date, budget information, geo-targeting information, syndication information, etc. For example, Honda may have one advertising campaign for its automotive line, and a separate advertising campaign for its motorcycle line. The campaign for its automotive line may have one or more ad groups, each containing one or more ads. Each ad group may include targeting information (e.g., a set of keywords, a set of one or more topics, geolocation information, user profile information, etc.), and price information (e.g., maximum cost (cost per click-though, cost per conversion, etc.)). Alternatively, or in addition, each ad group may include an average cost (e.g., average cost per click-through, average cost per conversion, etc.). Therefore, a single maximum cost and\/or a single average cost may be associated with one or more keywords, and\/or topics. As stated, each ad group may have one or more ads or \u201ccreatives\u201d (That is, ad content that is ultimately rendered to an end user). Each ad may also include a link to a URL (e.g., a landing Web page, such as the home page of an advertiser, or a Web page associated with a particular product or server). Naturally, the ad information may include more or less information, and may be organized in a number of different ways.",{"@attributes":{"id":"p-0040","num":"0039"},"figref":"FIG. 2","b":["200","250","220","250","210","250","240","250","210","250","220","230","240"]},"As discussed in U.S. patent application Ser. No. 10\/375,900 (introduced above), ads may be targeted to documents served by content servers. Thus, one example of an ad consumer  is a general content server  that receives requests for documents (e.g., articles, discussion threads, music, video, graphics, search results, Web page listings, etc.), and retrieves the requested document in response to, or otherwise services, the request. The content server may submit a request for ads to the ad server \/. Such an ad request may include a number of ads desired. The ad request may also include document request information. This information may include the document itself (e.g., page), a category or topic corresponding to the content of the document or the document request (e.g., arts, business, computers, arts-movies, arts-music, etc.), part or all of the document request, content age, content type (e.g., text, graphics, video, audio, mixed media, etc.), geo-location information, document information, etc.","The content server  may combine the requested document with one or more of the advertisements provided by the ad server \/. This combined information including the document content and advertisement(s) is then forwarded towards the end user device  that requested the document, for presentation to the user. Finally, the content server  may transmit information about the ads and how, when, and\/or where the ads are to be rendered (e.g., position, click-through or not, impression time, impression date, size, conversion or not, etc.) back to the ad server \/. Alternatively, or in addition, such information may be provided back to the ad server \/ by some other means.","Another example of an ad consumer  is the search engine . A search engine  may receive queries for search results. In response, the search engine may retrieve relevant search results (e.g., from an index of Web pages). An exemplary search engine is described in the article S. Brin and L. Page, \u201cThe Anatomy of a Large-Scale Hypertextual Search Engine,\u201d , Brisbane, Australia and in U.S. Pat. No. 6,285,999 (both incorporated herein by reference). Such search results may include, for example, lists of Web page titles, snippets of text extracted from those Web pages, and hypertext links to those Web pages, and may be grouped into a predetermined number of (e.g., ten) search results.","The search engine  may submit a request for ads to the ad server \/. The request may include a number of ads desired. This number may depend on the search results, the amount of screen or page space occupied by the search results, the size and shape of the ads, etc. In one embodiment, the number of desired ads will be from one to ten, and preferably from three to five. The request for ads may also include the query (as entered or parsed), information based on the query (such as geolocation information, whether the query came from an affiliate and an identifier of such an affiliate, and\/or as described below, information related to, and\/or derived from, the search query), and\/or information associated with, or based on, the search results. Such information may include, for example, identifiers related to the search results (e.g., document identifiers or \u201cdocIDs\u201d), scores related to the search results (e.g., information retrieval (\u201cIR\u201d) scores such as dot products of feature vectors corresponding to a query and a document, Page Rank scores, and\/or combinations of IR scores and Page Rank scores), snippets of text extracted from identified documents (e.g., Web pages), full text of identified documents, topics of identified documents, feature vectors of identified documents, etc.","The search engine  may combine the search results with one or more of the advertisements provided by the ad server \/. This combined information including the search results and advertisement(s) is then forwarded towards the user that submitted the search, for presentation to the user. Preferably, the search results are maintained as distinct from the ads, so as not to confuse the user between paid advertisements and presumably neutral search results.","Finally, the search engine  may transmit information about the ad and when, where, and\/or how the ad was to be rendered (e.g., position, click-through or not, impression time, impression date, size, conversion or not, etc.) back to the ad server \/. As described below, such information may include information for determining on what basis the ad way determined relevant (e.g., strict or relaxed match, or exact, phrase, or broad match, etc.) Alternatively, or in addition, such information may be provided back to the ad server \/ by some other means.","Finally, the e-mail server  may be thought of, generally, as a content server in which a document served is simply an e-mail. Further, e-mail applications (such as Microsoft Outlook for example) may be used to send and\/or receive e-mail. Therefore, an e-mail server  or application may be thought of as an ad consumer . Thus, e-mails may be thought of as documents, and targeted ads may be served in association with such documents. For example, one or more ads may be served in, under over, or otherwise in association with an e-mail.","Although the foregoing examples described servers as (i) requesting ads, and (ii) combining them with content, one or both of these operations may be performed by a client device (such as an end user computer for example).","\u00a74.1.2 Definitions","Online ads, such as those used in the exemplary systems described above with reference to , or any other system, may have various intrinsic features. Such features may be specified by an application and\/or an advertiser. These features are referred to as \u201cad features\u201d below. For example, in the case of a text ad, ad features may include a title line, ad text, and an embedded link. In the case of an image ad, ad features may include images, executable code, and an embedded link. Depending on the type of online ad, ad features may include one or more of the following: text, a link, an audio file, a video file, an image file, executable code, embedded information, etc.","When an online ad is served, one or more parameters may be used to describe how, when, and\/or where the ad was served. These parameters are referred to as \u201cserving parameters\u201d below. Serving parameters may include, for example, one or more of the following: features of (including information on) a page on which the ad was served, a search query or search results associated with the serving of the ad, a user characteristic (e.g., their geolocation, the language used by the user, the type of browser used, previous page views, previous behavior), a host or affiliate site (e.g., America Online, Google, Yahoo) that initiated the request, an absolute position of the ad on the page on which it was served, a position (spatial or temporal) of the ad relative to other ads served, an absolute size of the ad, a size of the ad relative to other ads, a color of the ad, a number of other ads served, types of other ads served, time of day served, time of week served, time of year served, on what basis the ad was determined relevant, etc. Naturally, there are other serving parameters that may be used in the context of the invention.","Although serving parameters may be extrinsic to ad features, they may be associated with an ad as serving conditions or constraints. When used as serving conditions or constraints, such serving parameters are referred to simply as \u201cserving constraints\u201d (or \u201ctargeting criteria\u201d). For example, in some systems, an advertiser may be able to target the serving of its ad by specifying that it is only to be served on weekdays, no lower than a certain position, only to users in a certain geolocation, etc. As another example, in some systems, an advertiser may specify that its ad is to be served only if a page or search query includes certain keywords or phrases (referred to generally as \u201ckeyword targeting criteria\u201d). As yet another example, in some systems, an advertiser may specify that its ad is to be served only if a document being served includes certain topics or concepts, or falls under a particular cluster or clusters, or some other classification or classifications.","\u201cAd information\u201d may include any combination of ad features, ad serving constraints, information derivable from ad features or ad serving constraints (referred to as \u201cad derived information\u201d), and\/or information related to the ad (referred to as \u201cad related information\u201d), as well as an extension of such information (e.g., information derived from ad related information).","A \u201cdocument\u201d is to be broadly interpreted to include any machine-readable and machine-storable work product. A document may be a file, a combination of files, one or more files with embedded links to other files, etc. The files may be of any type, such as text, audio, image, video, etc. Parts of a document to be rendered to, or perceived by, an end user can be thought of as \u201ccontent\u201d of the document. A document may include \u201cstructured data\u201d containing both content (words, pictures, etc.) and some indication of the meaning of that content (for example, e-mail fields and associated data, HTML tags and associated data, etc.) Ad spots in the document may be defined by embedded information or instructions. In the context of the Internet, a common document is a Web page. Web pages often include content and may include embedded information (such as meta information, hyperlinks, etc.) and\/or embedded instructions (such as Javascript, etc.). In many cases, a document has a unique, addressable, storage location and can therefore be uniquely identified by this addressable location. A universal resource locator (URL) is a unique address used to access information on the Internet.","\u201cDocument information\u201d may include any information included in the document, information derivable from information included in the document (referred to as \u201cdocument derived information\u201d), and\/or information related to the document (referred to as \u201cdocument related information\u201d), as well as an extensions of such information (e.g., information derived from related information). An example of document derived information is a classification based on textual content of a document. Examples of document related information include document information from other documents with links to the instant document, as well as document information from other documents to which the instant document links.","Content from a document may be rendered on a \u201ccontent rendering application or device\u201d. Examples of content rendering applications include an Internet browser (e.g., Explorer or Netscape), a media player (e.g., an MP3 player, a Realnetworks streaming audio file player, etc.), a viewer (e.g., an Abobe Acrobat pdf reader), etc.","\u201cUser information\u201d may include user behavior information and\/or user profile information. It may also include a user's geolocation, or an estimation of the user's geolocation.","\u201cE-mail information\u201d may include any information included in an e-mail (also referred to as \u201cinternal e-mail information\u201d), information derivable from information included in the e-mail and\/or information related to the e-mail, as well as extensions of such information (e.g., information derived from related information). An example of information derived from e-mail information is information extracted or otherwise derived from search results returned in response to a search query composed of terms extracted from an e-mail subject line. Examples of information related to e-mail information include e-mail information about one or more other e-mails sent by the same sender of a given e-mail, or user information about an e-mail recipient. Information derived from or related to e-mail information may be referred to as \u201cexternal e-mail information.\u201d","Various exemplary embodiments of the present invention are now described in \u00a74.2.","\u00a74.2 Exemplary Embodiments","The present invention may be used to relax the notion of a match between search query information and targeting information, such as keyword targeting criteria. The present invention may do so using various techniques, described below. As will be appreciated by those skilled in the art, at least some of these techniques may be used alone, or in combination.","The present invention may also be used to adjust a score of an ad depending upon the type of match used to find that the ad was relevant to search query information. For example, the score of an ad determined to be relevant on the basis of a more relaxed notion of match may be decreased and\/or the score of an ad determined to be relevant on the basis of a stricter notion of match may be increased.","The present invention may adjust the score of such ads using various techniques, described below. As will be appreciated by those skilled in the art, at least some of these techniques may be used alone, or in combination. The ad score may be adjusted using a score adjustment parameter. The score adjustment parameter may be associated with a {word-to-related word} mapping. The present invention may also be used to revise the score adjustment parameter, for example by using past performance information of ads served using the {word-to-related word} mapping. The present invention may update the adjustment parameter using various techniques, described below. As will be appreciated by those skilled in the art, at least some of these techniques may be used alone, or in combination.",{"@attributes":{"id":"p-0064","num":"0063"},"figref":"FIG. 3","b":["310","340","330","320","340","320","320","340","320","340","320"]},"Ad scoring operations  may be used to generate a set  of ads and associated scores using the first set  of ads and ad information . The scoring operation  may consider various ad information such as one or more of price information (e.g., maximum price per impression, maximum price per selection, maximum price per conversion, etc.), performance information (e.g., click-through rate, conversion rate, etc.), advertiser quality information, etc. In one embodiment, the ad score is a reflection of revenue expected if the ad is served.","Consistent with the present invention, the ad selection operations  may use a relaxed notion of relevancy, particularly in the context of ads targeted to keywords extracted from a search query. For example, as shown in the bubble diagram of , query term expansion operations  may use word\/phrase relationship information  to generate updated request information  from request information . Exemplary data structures for storing word\/phrase relationship information  are described in \u00a74.2.1 below with reference to . Exemplary methods for performing query term expansion operations are described in \u00a74.2.2 below with reference to .","Although not necessary, scoring operations  may also consider ad relevance information. For example, as shown in the bubble diagram of  (which does not show query expansion operations and ad selection operations), scoring operations  may consider score adjustment parameters . Score adjustment parameters may be maintained for {word-to-related word} associations (across all ads or some groupings of ads) . For example, in the context of a keyword targeted ad serving system, the ad scoring operations  may consider whether keyword targeting information associated with the ad exactly matched a phrase of the search query, a word of the search query, a word derived from a word of the search query, a word related to a word of the search query (and perhaps some measure of relatedness), a word related to a word derived from a word of the search query (and perhaps some measure of relatedness), etc. Finally, score adjustment parameter update operations  may be used to update the score adjustment parameters  using user behavior feedback. Exemplary methods that may be used to perform the ad scoring operations  are described in \u00a74.2.2 below with reference to .","Although not shown in , score adjustment may be effected by adjusting a parameter (e.g., price information, performance information, etc.) of an ad which is used in ad scoring operations \/.","Referring to the bubble diagram of  (which does not show query expansion operations and ad selection operations), ad scoring operations  may determine scored relevant ads  as did those operations  of . However, in this case, ad score adjustment operations  may be provided to adjust the ad scores after scoring, using the score adjustment parameters . Exemplary methods that may be used to perform the ad scoring adjustment operations  are described in \u00a74.2.2 below with reference to .","Although not shown, in one embodiment of the invention, if the word related to a word in the original search query that matched a targeting keyword appears in the ad creative, it may be emphasized (e.g., depicted with bold typeface text). This may be done, for example, using techniques described in U.S. patent application Ser. No. 10\/261,294 (incorporated herein by reference), titled \u201cACCENTUATING TERMS OR FEATURES OF INTEREST IN AN ADVERTISEMENT,\u201d filed on Sep. 30, 2002 and listing Nina Marie Kim as the inventor. Similarly, if a targeting keyword exactly matches a word from the original search query, any instances of that targeting keyword in the ad creative may be emphasized. The types of emphasis may be the same or different.","The present invention need not provide, and\/or use all of the operations and information described with reference to . The present invention need not perform the operations in the order shown. Finally, the present invention may combine, or separate functionality described with respect to the various operations. For example, the ad selection and scoring operations  and  of  may be combined into a single operation.","\u00a74.2.1 Exemplary Data Structures",{"@attributes":{"id":"p-0073","num":"0072"},"figref":"FIG. 7","b":["426","426","710","720","730","720","720","730"]},"In one embodiment of the present invention, there are almost seven million words in a lexicon. Word identifiers  start at 0 and are ordered by decreasing frequency. The lexicon may also include common n-grams (also referred to as \u201cwords\u201d in the specification without loss of generality), represented as hyphenated compounds. Lexicon methods (not described in detail here) may be used to transform text into a sequence of lexicon ids, and intelligently finding the most probable compounds to use. For words that aren't included in the lexicon, a representation (e.g., a negated 31-bit fingerprint of the actual text) may be provided. This will allow advertisers to use keywords that aren't in the lexicon.","The information \u2032 may be a sorted map which, for each word in the lexicon, contains compressed information about which other words are \u201crelated\u201d to it. In one embodiment of the present invention, the definition of relatedness is that the two words tend to co-occur in consecutive queries from the same session (e.g., based on query logs from a given period, such as a recent six month period). As will be described below, this (somewhat synonym-like) notion of relatedness may be used to assign initial weights for query term expansion (also referred to as \u201cquery rewriting\u201d). As will also be described below, performance (e.g., click-through) data may be used to improve the weights (e.g., in offline-post-processing).","As shown in , ad targeting criteria information  may include phrase and exact keyword targeting information  and broad keyword targeting criteria information . The phrases and exact keyword targeting criteria information  may include a number of entries . Each of the entries  may include a targeting criteria identifier (e.g., a word identifier)  and one or more associated ad identifiers (or ad group identifiers) . Similarly, the broad keyword targeting criteria information  may include a number of entries . Each of the entries  may include a targeting criteria identifier (e.g., a word identifier)  and one or more associated ad identifiers (or ad group identifiers) . In this way, if a one or more terms of a search query match various targeting criteria, it may be assumed that certain ads (or ad groups) are relevant to the search query. In one embodiment of the present invention, phrases and exact keyword targeting criteria information are indexed by their ordered fingerprint, and broad targets are indexed by their rarest word (actually the biggest lexicon identifier). Such an embodiment permits all subset matches for a given search query to be found easily. If targeting criteria identifiers are associated with ad groups, ad groups  can be mapped to one or more ads , as illustrated by entries  of data structure  of .","Referring back to , information  about one or more ads may be generated or otherwise output by ad selection operations . Referring to , this information may be represented by data structure . The data structure may include a number of entries , one for each ad. An entry  may include an ad identifier , information about the ad , a match type (e.g., exact, phrase, broad, and relaxed-broad; or normal and relaxed) . If the match type  is relaxed-broad in the one example, or relaxed in the other, the entry  may also include a score adjustment parameter . Generally, the score adjustment parameter  may be used to discount the score of ads that matched the search query only under a relaxed notion of relevance relative to those ads that matched the search query under a stricter notion of relevance.","\u00a74.2.2 Exemplary Methods",{"@attributes":{"id":"p-0079","num":"0078"},"figref":"FIG. 11","b":["422","422","1110","1120","1150","1130","1140","422","1160"]},"Referring back to block , related words and\/or phrases can be determined using a mapping such as that  described above with reference to . Recall, for example, that this mapping (and weights) may have been generated using search query session word co-occurrence information. Referring back to block , the weight information (or some score adjustment parameter) may be provided with an ad request. The query information expansion method \u2032 may apply some threshold (absolute and\/or relative) or other test to limit the extent of query term expansion.",{"@attributes":{"id":"p-0081","num":"0080"},"figref":["FIG. 12","FIG. 10"],"b":["550","550","1210","1000","1220","1230","550","1250","1240","550","1250"]},"Recall from  that rather than applying a score adjustment parameter at the time of scoring, it can be applied after an initial score has been determined.  is a flow diagram of an exemplary method \u2032 for performing an ad score modification operation  in a manner consistent with the present invention. An ad score and a score adjustment parameter may be accepted . Then, the ad score may be adjusted (e.g., discounted) using, at least, the score adjustment parameter (Block ) before the method  is left (Node ). Naturally, for an ad that was served pursuant to a match other than a relaxed match, its score need not be adjusted (e.g., discounted).","In the exemplary methods of , score adjustment parameters may maintained for one or more of {word-to-related word} mappings (across all ads or some groupings of ads).","Recall that an ad score may be determined or adjusted using a score adjustment parameter. For example, if an ad is served pursuant to a relaxed notion of a match (rather than a stricter match such as an exact match), its score can be discounted relative to an ad served pursuant to the stricter match. For example, the score (or a \u201cscore component\u201d used in the determination of a score) can be discounted by multiplying it by a score adjustment parameter having a value of less than one. Initially, the score adjustment parameter may be based on a {word-to-related word} search query session co-occurrence probability. However, over time it may be possible to gather information about how well ads served pursuant to a relaxed notion of match (e.g., relaxed by expanding the search query information to included related words) perform.  is a flow diagram of an exemplary method \u2032\/\u2032 for performing an ad score adjustment parameter update operation in a manner consistent with the present invention. Performance information (e.g., with respect to an ad, with respect to a {word-to-related word} mapping, with respect to a particular ad served pursuant to a match with a particular word related to a particular search query word, etc.) is accepted. (Block ) For the accepted performance information, it may be determined whether or not the ad was served pursuant to a relaxed notion of match. (Decision block ) If not (e.g., if the ad was served pursuant to a more strict match), the ad information (e.g., performance parameters) are updated as they normally are (Block ) before the method \u2032\/\u2032 is left (Node ). Referring back to decision block , if, on the other hand, the ad was served pursuant to a relaxed notion of match, the score adjustment parameter may be updated using the accepted performance information. (Block ) The ad information (e.g., performance parameters) may also be updated (Block ) before the method \u2032\/\u2032 is left (Node ).","In one embodiment of the present invention, the score adjustment parameter may be a multiplier (referred to as a \u201crewrite multiplier\u201d since the search query is effectively rewritten), and the performance information may be click-through data. In this case, a predicted click-through may be the product of a naively predicted click-through and a rewrite multiplier. Therefore, the method \u2032\/\u2032 may be used to update rewrite multipliers in view of observed click-through data. For example, consider a rewrite (source word->related target word). Ad serving logs may be examined to find impressions of ads that were targeted pursuant to this rewrite (i.e., ads with targeting criteria that matched the \u201crelated target word\u201d but not the \u201csource word\u201d). It would be useful to predict what would happen if the rewrite incurred no penalty at all. That is, how many clicks could be expected from such impressions? To this end, for each impression, a rewrite_clickthrough( ), which is just the clickthrough( ) without the rewrite_multiplier, may be logged. The estimate predicted_clicks (e.g., naively predicted clicks) may be the sum, over all the impressions, of their rewrite_clickthrough( )s. This is how many clicks could be expected from these impressions if there were no penalty associated with the rewrite. The predicted_clicks could be compared to observed_clicks (i.e., the number of clicks we actually observed among these impressions). Finally, the multiplier may be adjusted as follows:",{"@attributes":{"id":"p-0086","num":"0085"},"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mi":"new_multiplier","mo":"=","mfrac":{"mrow":[{"mrow":{"mi":["N","initial_multiplier"],"mo":"\u00b7"},"mo":["\u2062","+"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mi":"observed_clicks"},{"mi":"N","mo":"+","mrow":{"mi":["naively_predicted","_clicks"],"mo":"\u2062"}}]}}}}},"The \u201cinitial_multiplier\u201d may be a best guess for the multiplier, such as a guess made before any empirical click data becomes available. This initial guess may be determined using how often (or a probability that) words co-occurred in query logs. The \u201cobserved_clicks\u201d may be the total number of clicks observed for ads targeted using the given rewrite. The \u201cnaively_predicted_clicks\u201d may be the total number of clicks expected among ads targeted using this rewrite, if it were naively assumed that the rewrite had no adverse effect on click probability. Naively_predicted_clicks may be determined by summing the naive click probabilities for each ad.","In one embodiment of the present invention, N is five (5) or approximately five (5). If N is relatively large, the predicted_clicks are weighted heavily and the trend towards empirical data will be slower. Conversely, if N is relatively small, the predicted-clicks have very little weight, and the trend towards the empirical data will be faster. This updating scheme treats the initial multiplier as if it was calculated on the basis of N predicted clicks. As observed data becomes available, the new_multiplier is moved smoothly to the empirical data, depending on how much data is available. Accordingly, as the number of observed_clicks and impressions get large, this formula causes the new_multiplier to converge to:",{"@attributes":{"id":"p-0089","num":"0088"},"maths":{"@attributes":{"id":"MATH-US-00002","num":"00002"},"math":{"@attributes":{"overflow":"scroll"},"mfrac":{"mi":"observed_clicks","mrow":{"mi":["naively_predicted","_clicks"],"mo":"\u2062"}}}},"br":{}},"It will take longer to learn \u201ccorrect\u201d rewrite multipliers for uncommon words since it will take longer to gather empirical data.","Naturally, these methods can be applied to score adjustment parameters other than multipliers and performance information other than clicks.","\u00a74.2.3 Exemplary Apparatus",{"@attributes":{"id":"p-0093","num":"0092"},"figref":"FIG. 15","b":["1500","1500","1510","1530","1520","1540","1532","1534","1530"]},"The one or more processors  may execute machine-executable instructions (e.g., C or C++ running on the Solaris operating system available from Sun Microsystems Inc. of Palo Alto, Calif. or the Linux operating system widely available from a number of vendors such as Red Hat, Inc. of Durham, N.C.) to effect one or more aspects of the present invention. At least a portion of the machine executable instructions may be stored (temporarily or more permanently) on the one or more storage devices  and\/or may be received from an external source via one or more input interface units .","In one embodiment, the machine  may be one or more conventional personal computers. In this case, the processing units  may be one or more microprocessors. The bus  may include a system bus. The storage devices  may include system memory, such as read only memory (ROM) and\/or random access memory (RAM). The storage devices  may also include a hard disk drive for reading from and writing to a hard disk, a magnetic disk drive for reading from or writing to a (e.g., removable) magnetic disk, and an optical disk drive for reading from or writing to a removable (magneto-) optical disk such as a compact disk or other (magneto-) optical media.","A user may enter commands and information into the personal computer through input devices , such as a keyboard and pointing device (e.g., a mouse) for example. Other input devices such as a microphone, a joystick, a game pad, a satellite dish, a scanner, or the like, may also (or alternatively) be included. These and other input devices are often connected to the processing unit(s)  through an appropriate interface  coupled to the system bus . The output devices  may include a monitor or other type of display device, which may also be connected to the system bus  via an appropriate interface. In addition to (or instead of) the monitor, the personal computer may include other (peripheral) output devices (not shown), such as speakers and printers for example.","\u00a74.2.4 Alternatives and Extensions","Although many of the foregoing examples discounted the scores of ads served pursuant to a relaxed notion of matching, other ways of accomplishing the same relative affect on scores (e.g., enhancing the scores or ads served pursuant to a more strict match of a word or phrase in the original search query) may be used. Generally, ads served pursuant to a relaxed notion of matching may be considered less relevant than those served pursuant to a strict notion of matching. Their scores may be adjusted accordingly. Note, however, that if ads served pursuant to a relaxed notion of relevance (e.g., using a word related to a search query word) perform better than those served pursuant to a strict notion of relevance, the scores of such ads may be enhanced relative to ads served pursuant to a strict match.","Although the score modification parameter was described as a rewrite multiplier being associated with a {word-to-related word} mapping, alternatively, or in addition, score modification parameters may be associated with the or more of ads served pursuant to strict matching (across all words or some groupings of words), ads served pursuant to relaxed matching (across all words or some groupings of words), etc.","Although described above with reference to keyword-targeted ads, the teachings of the present invention can be applied to content-targeted ads. In such an application, concepts and\/or topics can be expanded to related concepts and\/or topics (similar to the way words are expended to related words). The scores of content-targeted ads served pursuant to a relaxed notion of concept match may be adjusted similarly.","Although described with reference to ads and scoring ads, the present invention may also be used in the context of general information retrieval\u2014finding documents that relate to a search query. Thus, the present invention may be used to find (and perhaps score) relevant documents. However, the present invention is especially effective for small documents, such as ads, where exact matches for the words in a search query are less likely.","The present invention may provide an advertiser with the option of turning off relaxed ad serving. In this way, if a particular advertiser is unhappy with the results of relaxed ad serving, they may specify that only phrase matching, exact matching, and\/or some other broad matching be used instead.","In one embodiment of the invention, ad quality weighting and revenue weighting may be tuned. For example, if the present invention is used by an ad serving system that is used by different search engines or different content owners, each may be provided with the opportunity to emphasize quality and\/or revenue. Quality may be increased by increasing a threshold performance parameter (e.g., filtering ads using a minimum clickthrough rate). However, since less ad serving may result in less revenue, another option is to permit a threshold performance parameter (e.g., clickthrough rate) to be adjusted (e.g., increased) for ads served pursuant to the relaxed matching scheme of the present invention independent of performance thresholding applied to ads served pursuant to other notions of matching (e.g., phrase, exact, etc.).","The present invention may be used in a system employing (a) exact matching (where the query must be identical the keyword targeting criterion), (b) phrase matching (where the query must contain the targeting criterion words in the order specified by the phrase) and\/or (c) broad matching (where the query must contain the any one of one or more of the targeting criterion keywords, in any order). For example, the relaxed notion of matching used by the present invention may be used instead or, or in addition to, broad matching.","The present invention may be used in concert with other techniques, such as \u201ccompounding\u201d for example. With compounding, common n-grams (Steve-Jobs, bok-choy, etc.) in search queries and\/or targeting criteria may be treated as entities separate from their constituent words. In this way, a query for \u201csteve jobs\u201d would not return ads related to jobs in the context of employment.","\u00a74.3 Example of Operations","The following example illustrates the utility of an exemplary embodiment of the present invention. In this example, the Iditarod is a dog-sledding race which takes place annually in Alaska. A user submitting a search query containing the word \u201cIditarod\u201d may be traveling to Alaska. Consequently, the user may be interested in flights, hotels, and restaurants in Alaska. Ads which broadly target the keyword targeting criterion \u201cAlaska\u201d would be good candidates to serve for rendering to the user, even through their search query did not include the word \u201cAlaska\u201d. It is realistic to assume that many Alaska-related advertisers might lack the foresight to explicitly include \u201cIditarod\u201d among their keyword targeting criteria. Consequently, there may be many lost opportunities to serve relevant ads.",{"@attributes":{"id":"p-0108","num":"0107"},"figref":"FIG. 16","b":["1620","1632","1610","1634","1630","1640","1640","1630"]},"Now the ad request , including the expanded query information, goes to one or more ad selection operations  (which may be distributed and which may use shared ad information). One embodiment of the ad selection operations  may be used to find all keyword targeting criteria (in ad information ) that \u201cmatch\u201d the expanded query information in the ad request . Comparing expanded request information  and ad information , ad selection operations  determine at least two relevant ads . Ad A for \u201cAlaska Airlines\u201d  is served because it is targeted to the word \u201cAlaska\u201d found in the expanded ad request information . Since \u201cAlaska\u201d was not found in the initial search query information , the ad information  indicates that it was served pursuant to a relaxed match, and includes a \u201crewrite multiplier\u201d of 0.7. Ad B for \u201cHi-Tech Dog Sleds\u201d  is served because it is targeted to the word \u201cIditarod\u201d found in the expanded ad request information . Since \u201cIditarod\u201d was found in the initial search query information , it  does not include a \u201crewrite multiplier\u201d. Both ads include performance information (i.e., click through rates in this case) and price information (i.e., max price per click in this case).","Ad scoring operations  generate scores  for each of the ads. In this case, the score is the product of the click through rate, the maximum price per click, and the \u201crewrite multiplier\u201d (if any). Here the score 1692 of ad A is 0.035 (=0.05*1.00*0.7), while the score of ad B is 0.040 (=0.04\u00d71.00). Thus, ad B has a higher score than ad A. Note that if the initial search query was \u201cAlaska Iditarod,\u201d ad A would score 0.05 (=0.05*1.00) which would be higher than ad B's score (still 0.040)","\u00a74.4 Conclusions","As can be appreciated from the foregoing, by relaxing the notion of a match with ad targeting keyword criteria, the present invention may be used to increase the number of relevant ads served. It may discount scores of ads served pursuant to more relaxed notions of matching relative to ads served pursuant to more strict notions of matching."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"\u00a73. BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":["FIG. 4","FIG. 3"]},{"@attributes":{"id":"p-0022","num":"0021"},"figref":["FIG. 5","FIG. 4"]},{"@attributes":{"id":"p-0023","num":"0022"},"figref":["FIG. 6","FIG. 3"],"b":"4"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":["FIG. 7","FIG. 4"]},{"@attributes":{"id":"p-0025","num":"0024"},"figref":["FIG. 8","FIG. 3"]},{"@attributes":{"id":"p-0026","num":"0025"},"figref":["FIG. 9","FIG. 3"]},{"@attributes":{"id":"p-0027","num":"0026"},"figref":["FIG. 10","FIGS. 4"],"b":["5","6"]},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 16"}]},"DETDESC":[{},{}]}
