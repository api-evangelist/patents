---
title: Method, system, program, and data structures for testing a network system including input/output devices
abstract: Provided is a method, system, program, and data structures for maintaining a database of objects. At least one structured document is received representing an instance of an object including attributes and attribute values defined for a class. Content of the structured document representing the object is added into a database, wherein the database is capable of storing multiple structured documents representing multiple objects. In another implementation, an instance of at least one object including attributes and attribute values defined for a class is generated. For each generated object, a structured document is generated representing the object and including a representation of the attributes and attribute values in the object. Each structured document is transferred to a database program to maintain.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=06904544&OS=06904544&RS=06904544
owner: Sun Microsystems, Inc.
number: 06904544
owner_city: Santa Clara
owner_country: US
publication_date: 20010130
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE DESCRIBED IMPLEMENTATIONS","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS"],"p":["1. Field of the Invention","The present invention relates to a method, system, program, and data structures for testing a network system including input\/output (I\/O) devices.","2. Description of the Related Art","A storage area network (SAN) comprises a network linking one or more servers to one or more storage systems. Each storage system could comprise a Redundant Array of Independent Disks (RAID) array, tape backup, tape library, CD-ROM library, or JBOD (Just a Bunch of Disks) components. Storage area networks (SAN) typically use the Fibre Channel Arbitrated Loop (FC-AL) protocol, which uses optical fibers to connect devices and provide high bandwidth communication between the devices. In Fibre Channel terms the switch connecting the devices is called a \u201cfabric\u201d. The link is the two unidirectional fibers, which may comprise an optical wire, transmitting to opposite directions with their associated transmitter and receiver. Each fibre is attached to a transmitter of a port at one end and a receiver of another port at the other end. When a fabric is present in the configuration, the fibre may attach to a node port (N_Port) and to a port of the Fabric (F_Port).","Because a Fibre Channel storage area network (SAN) is an amalgamation of numerous hosts, workstations, and storage devices, troubleshooting for errors can often be a somewhat complex process. Currently, in the prior art, a technician will perform a series of tests from a host system in the SAN and test various channels and connections to the storage devices to detect problems and then try to locate the specific source of a problem. Technicians generally rely on their own knowledge, experience and expertise when diagnosing the SAN system for errors. Such knowledge is not a shared resource, but rather an individual point of view and an accumulation of guess work and personal experience. As a result, it is unlikely that different storage experts troubleshoot a storage system in the same manner, thereby leading to possible incorrect or inconsistent diagnosis as well as an increase in the Mean Time To Diagnose (MTTD). Moreover, as the number of SAN systems proliferate, it may become more and more difficult for system administrators to locate available diagnosticians.","Certain \u201ccookbook\u201d approaches to testing a Fibre Channel network have been proposed, such as the \u201cFibre Channel FC-AL-2 Parametric Test Suite Rev. 7.0\u201d, published by the Fibre Channel Consortium, document no. ANSI X3.272-199X (January 2000), which publication is incorporated herein by reference in its entirety. Such documents describe specific tests that may be performed to troubleshoot a Fibre Channel network. However, again the order in which the tests are selected and performed is still a matter of choice for the diagnostician performing the troubleshooting operations.","Notwithstanding current efforts at troubleshooting network components, such as a SAN, the current art lacks tools that provide an integrated and consistent approach toward diagnostic testing of a SAN and its components.","Provided is a computer implemented method, system, and program for a diagnostic tool to automatically diagnose a system. A determination is made of a path in the storage system to test. The path includes path components including at least a host adaptor, a link, a device interface, and a device. A first test is performed to determine if there is a failure in the path. At least one of the path components is added to a suspect list capable of being a cause of the failure. The suspect list is implemented in a computer readable data structure. At least one isolation test is performed on at least one of the path components added to the suspect list. The tested path component is removed from the suspect list if the isolation test confirms that the tested path component cannot be a source of the failure. The suspect list is returned to a user to provide information on the path components capable of being the cause of the failure.","Further implementations concern a computer readable medium including data structures used to perform diagnostic testing of a system. A rule object includes code defining a flow of operations to perform diagnostic testing of a path in the system. The path includes path components including at least a host adaptor, a link, a device interface, and a device. The rule object calls test descriptors associated with a testing operation to perform. A test descriptor object includes test descriptors. Each test descriptor specifies one or more program modules to perform the testing operation associated with the test descriptor. A module object includes program modules providing code to perform testing operations. A call to one test descriptor executes the program modules specified by the test descriptor to perform diagnostic testing operations according to the operation flow specified in the rule object.","In the following description, reference is made to the accompanying drawings which form a part hereof and which illustrate several embodiments of the present invention. It is understood that other embodiments may be utilized and structural and operational changes may be made without departing from the scope of the present invention.",{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 1","b":["2","4","2","4","6","8","6","8","10","2","4","8","12","2","4","6","8","14","14","16","16","18","18","20","20","22","22","24","24","12","14","16","18","20","22","24","6","8","3"],"i":["a, b, c, d, e, f ","a","b","a","b","a","b","a","b","a","b","a-l. ","a-l ","a, b, c, d, e, f; ","a, b, ","a, b, ","a, b, ","a, b, ","a, b, ","a-l "]},"A path, as that term is used herein, refers to all the components providing a connection from a host to a storage device. For instance, a path may comprise host adaptor fiber initiator port device port fiber device interface and the storage devices or disks being accessed. The path may also comprise a direct connection, such as the case with the path from host adaptor through fiber to interface ",{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 2","b":["100","2","4","6","8","10","12","100","102","104","104","106","106","108","110","102","102","112","104","112","112"],"i":"b, f. "},"The state machine  would begin performing the testing routine outlined in the rule base  in response to user input commands invoking the expert diagnostic tool  entered through a host system ,  interface, such as a command line or graphical user interface (GUI). The rule base  implements a testing routine an expert would perform including determinations an expert diagnostician would make based on the outcome of certain of the tests.  illustrate the logic flow of the code included in the rule base , which calls the test descriptions , where each test description would specify one or more of the test modules  to execute to carry out the test specified by the test description.",{"@attributes":{"id":"p-0020","num":"0019"},"figref":["FIGS. 3-13","FIGS. 3-13"],"b":["104","1","110"],"ul":{"@attributes":{"id":"ul0001","list-style":"none"},"li":{"@attributes":{"id":"ul0001-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0002","list-style":"none"},"li":["STRESS TEST: specifies various testing algorithms to determine if the path between the host bus adaptor (HBA) and storage device ,  is working properly.","IS DISK: determines a type of the storage device , , e.g., a Sun StorEdge A5200 disk array or T array, etc.** The disk type may specify whether the disk is addressed directly, such as the case with a JBOD, or logically addressed through a volume manager. There may be different IS_DISK test descriptors that are checked for each disk type that may be included in the SAN.","IS SWITCHED: Determines whether a switch is located between the hosts ,  and storage device , , e.g., fabric , or whether there is a direct connection, e.g., fiber ","DPORT TEST: Specifies one or more diagnostic tests to determine whether the connection between the device ports and storage device  interface is functioning properly.","REM DPORT FIBER: Instructs the administrator through a user interface to remove the fiber connection to the device port i.e., disconnect or unplug the fiber from the port.","INS DPORT LB: Instructs the administrator to install the loopback fiber on the GBIC at the device port to allow reading and writing through the loopback path of the port. During loopback diagnostics, data sent through the loopback path is compared with the originally sent data to determine if the data has changed during transmission through the loopback. The diagnostic tests may also perform statistical analysis of the data to detect any anomalies.","REM DPORT LB: Instructs the administrator to remove loopback fiber to allow the device port to communicate over the fiber ","REP DPORT FIBER: Instructs the administrator to replace the fiber between the device port and the storage device  to isolate the fiber.","REST DPORT FIBER: Instructs the administrator to reinstall the fiber that was previously replaced to isolate test the device port fiber ","REP DEV: Instructs the administrator to remove current storage device FRUs, e.g., the GBIC , and replace with new device FRUs to perform isolation testing on the storage device components. For instance, the device FRUs may comprise the GBICs or if the storage device  is a Sun StorEdge T array, the FRU may comprise a media interface adaptor (MIA).","REST DEV: Instructs the administrator to reinstall the device interface FRUs, e.g., the GBIC , previously removed in response to the REP_DEV descriptor.","IS DISK AVAILABLE: Determines whether a disk is online and available. There may be different IS_DISK_AVAILABLE descriptors for each different type of device determined by the IS_DISK descriptor.","DISK ISOLATION: Provides algorithms to perform series of test to determine if disks in the storage device ,  are functioning properly.","REP DPORT GBIC: Instructs the administrator to replace the device port GBIC to isolate the fiber device port.","IPORT TEST: Specifies one or more diagnostic tests to run to determine whether the path between one initiator port and one host adaptor is functioning properly.","IS HBA: determines a type of the host adaptor e.g., a Fibre Channel arbitrated loop adaptor, e.g., the StorEdge PCI FC-100 adaptor, the S-bus FC100 HA adaptor, etc. There may be multiple IS_HBA test descriptors that are checked for the different types of host adaptors included in the SAN.","LBF TEST: Specifies one or more diagnostic tests to perform a loopback frame test on an adaptor or interface to determine whether the data transmitted is not erroneously altered during transmission through the data path component.","REM IPORT FIBER: Instructs the administrator through a user interface to disconnect the fiber connection to the initiator port i.e., unplug the fiber from the port.","REP IPORT FIBER: Instructs the administrator to replace the fiber between the host ,  and the fabric .","REST IPORT FIBER: Instructs the administrator to reinstall the fiber that was previously replaced to isolate test the initiator port fiber ","REM HBA FIBER: Instructs the administrator through a user interface to disconnect the fiber connection at the host adaptor i.e., unplug the fiber from the host adaptor port.","HBA TEST: Specifies one or more diagnostic tests to run to determine whether the host adaptor is functioning properly. There may be separate HBA_TESTs for different host adaptor types, determined using the IS_HBA descriptor.","INS HBA LB: Instructs the administrator to insert the loopback fiber at the host adaptor to allow for loopback testing of a GBIC of the host adaptor. Thus, after the fiber is removed from the host adaptor the loopback fiber that provides a loopback path is inserted at the host adaptor to allow for loopback testing.","HBA GBIC TEST: Specifies one or more loopback diagnostic tests to perform to determine whether the host adaptor GBIC is functioning properly.","REST HBA FIBER: Instructs the administrator to reinstall the fiber that was previously removed from the host adaptor.","REP HBA GBIC: Instructs the administrator to replace the host adaptor GBIC to isolate the host adaptor GBIC."]}}}},"The diagnostic routine begins at block  in FIG. . The state machine  calls (at block ) the STRESS_TEST test descriptor to test the integrity of the path from the host bus adaptor (HBA) to an interface in the storage device , . The administrator may specify a path from the host to one of the storage devices, including the host adaptors and device interfaces on the path. If the STRESS_TEST fails, then the state machine  calls the IS_DISK descriptor to determine the target disk type. The determined disk type is added (at block ) to the suspect list , e.g., indicating a disk or LUN as the suspect. The state machine  then calls the IS_SWITCHED test descriptor if (at block ) the loop or connection between the host ,  and storage device ,  includes a switch, e.g., fabric . If there is a switch, then the DPORT_TEST test descriptor is called (at block ) to test the loop between the device port (DPORT) and the storage device interface ","If (at block ) the device port connection is not operating properly according to the DPORT_TEST, then all the components on the connection between the fabric  and storage device  are added (at block ) to the suspect list as possible sources of the failure, including any field replaceable units (FRUs) for the device port and interface which may include GBICs the switch , and the fiber The IS_DISK descriptor is called (at block ) to determine the target disk type on the connection being checked, so that any field replaceable units (FRUs) within the storage device  may be added (at block ) to the suspect list , e.g., the GBIC The state machine  then calls (at block ) the REM_DPORT_FIBER to disable the connection, i.e., disconnect, from the device port to the fiber and then calls INS_DPORT_LB to enable the loopback feature on the device port If (at block ) the administrator (referred to as \u201cadmin\u201d in the figures) acknowledges that the manual operations requested at block  were not performed, then the diagnosis ends (at block ) and the suspect list  is returned with all the components added, which at block  includes all the suspect components between the device port and storage device . If the administrator indicates through a user interface that the requested manual operation was performed, then control proceeds to block . Note that whenever the state machine  requests the administrator to perform a manual operation, the diagnostic test would end, as at block , if the administrator indicates that the requested manual operation was not performed. The manual operations involve the administrator replacing parts or disconnecting components to allow isolation testing of specific components. The diagnostic expert program continues if the administrator indicates that the requested manual operation was performed.","At block , the state machine  calls the DPORT_TEST descriptor to isolate the device port now that it is not connected on the fiber To communicate with the fabric , the hosts ,  and fabric  would include an Ethernet or other network adaptor to allow for out-of-band communication outside of the fiber connection. In this way, the hosts ,  can communicate with the fabric  when the fiber are unplugged. Out-of-band communication is used whenever the hosts ,  need to communicate with a SAN component where the fiber link has been disconnected. If(at block ) the device port passed, then control proceeds (at block ) to block  in  to proceed to test components downstream of the device port as the isolated device port was confirmed as operational. With respect to , at block , the state machine  removes (at block ) the switch and the device port GBIC from the suspect list . The REM_DPORT_LB descriptor is called (at block ) to instruct the administrator to remove the loopback connection and REP_DPORT_FIBER is called to instruct the administrator to replace the fiber wire with a new fiber to allow isolation testing of the device port fiber The state machine  calls (at block ) the DPORT_TEST descriptor to test whether replacing the fiber corrected the problem. If (at block ) the test succeeded, then the state machine  calls (at block ) the IS_DISK test descriptor to determine the disk type, and remove the disk and any disk FRUs, e.g., the disk GBICs from the suspect list . Control proceeds to block  to prompt the administrator to retry the test from the start at block  in  to test the SAN with the new fiber ","If (at block ) the test with the new fiber did not succeed, then the state machine  removes (at block ) the device port fiber from the suspect list . The REST_DPORT_FIBER descriptor is called (at block ) to instruct the administrator to reinstall the previously removed fiber link because the replaced fiber was not one cause of the failure. IS_DISK is called (at block ) to determine the disk type. The state machine  then calls (at block ) the REP_DEV descriptor to instruct the administrator to replace FRUs, e.g., GBIC, MIA, etc., in the storage device interface The DPORT_TEST descriptor is called (at block ) to isolate test the device interface. If (at block ) the test succeeds, then the state machine  calls (at block ) the IS_DISK descriptor to determine the disk type to remove the disk FRUs from the suspect list . Control then proceeds to block  to prompt the administrator to retry the test with the new disk components. If the test did not succeed, i.e., the disk interface FRUs were not the source of the problem, then control proceeds (at block ) to block  in  to isolate the storage device .","With respect to , to isolate the storage device, such as the disks in the storage device, the state machine  calls (at block ) the IS_DISK descriptor to determine the disk type, and remove the disk interface FRUs, e.g., GBIC from the suspect list . The REST_DEV descriptor is called (at block ) to instruct the administrator to reinstall the previously removed device interface FRUs, as these were not the source of the failure. The state machine  then calls (at block ) IS_DISK to determine the disk type, and then calls IS_DISK_AVAILABLE to determine whether the determined disk type is installed and online. If (at block ) the disk is not available, then the state machine adds (at block ) information to the suspect list  indicating that the disk is not available, e.g., not installed nor online. The diagnosis then ends (at block ) and reports the possible failing components on the suspect list , which from block  includes the disk. If the disk is available, then the state machine  calls (at block ) the DISK_ISOLATION descriptor to run a series of isolation tests on the disk. If (at block ) the disk passes the tests, then the disk type is removed (at block ) from the suspect list  and the routine ends. Otherwise, if the disk does not pass the tests, then the test routine ends with the disk of the test storage device  on the suspect list . Note that because the isolation of the disks was performed after a newly added device interface FRUs was added, if at block  the disk passes the test, then the entire SAN is tested and operational with the new device FRUs. If the diagnostic test is performed from the beginning with the new component, then the suspect list  includes the replaced component to remind the administrator that a suspect component was removed.","With reference to , if (at block ), the isolated device port did not pass the tests, then control proceeds (at block ) to block  in  to further isolate components at the device port. With respect to , the state machine  calls (at block ) the REP_DPORT_GBIC descriptor to instruct the administrator to replace the device port GBIC and calls INS_DPORT_LB to instruct the administrator to install the loopback connection for loopback testing of the device port GBIC The descriptor DPORT_TEST is called (at block ) to perform the diagnostic test on the device port with the new GBIC. If (at block ) the test succeeds, then the replaced device port GBIC can be assumed to have been one source of the failure, and the state machine  calls (at block ) IS_DISK to determine the disk type and remove from the suspect list  the FRUs for the determined disk type, e.g., GBIC the disk type, the fiber link, and the switch. The descriptor REST_DPORT_FIBER is called (at block ) to instruct the administrator to replace the loopback connection with the previously removed fiber link, which was not the source of the error. The state machine  then prompts (at block ) the administrator to retry the diagnostic test with the new device port GBIC If (at block ) the test with the new device port GBIC did not pass, then the replaced device port GBIC could not have been the sole source of the error. In such case, the state machine  calls the IS_DISK descriptor (at block ) to determine the disk type, and removes the determined disk type, FRUs for the determined disk type, the fiber link, and the device port GBIC from the suspect list . The REST_DPORT_FIBER descriptor is called (at block ) to instruct the administrator to replace the previously removed fiber link At this point, the test ends (at block ) with the switch, i.e., fabric , remaining on the suspect list .","If (at block ) the switched path from the device port to the storage device  did pass the DPORT_TEST, then control proceeds (at block ) to block  in  to test the path from the initiator port in the fabric  to the host bus adaptor (HBA) With respect to , the state machine  calls (at block ) the IPORT_TEST descriptor to determine whether the path between one host adaptor and the initiator port in the fabric  is functioning properly. If (at block ) the path passes the tests, then the IS_HBA descriptor is called (at block ) to determine the host adaptor type.","If (at block ) the determined host adaptor type is one that does not support loopback frame testing, then the state machine  proceeds (at block ) to block  in  to isolate the storage device  because the initiator port passed the test. Otherwise, if loopback frame testing is supported, the LBF_TEST descriptor is called (at block ) to run a loopback frame test at the host adaptor If (at block ) the loopback test passed, then the host adaptor proceeds (at block ) to block  in  to isolate the storage device . If the test of the path from the host ,  to the fabric  failed at blocks  or , then the state machine  calls (at block ) IS_DISK to determine the disk type and removes the determined disk type from the suspect list because the fault likely lies in the path between the host adaptor and the initiator port Accordingly, also added (at block ) to the suspect list  are the FRUs for the initiator port, e.g., the GBICs the fiber the host adaptors any host adaptor FRUs, e.g., GBICs and the switch .","To begin fault isolation of the path between the host ,  and the fabric , the state machine  calls (at block ) the REM_IPORT_FIBER to instruct the administrator to remove the link and install the loopback connection for loopback testing at the initiator port The IPORT_TEST descriptor is called (at block ). If (at block ) the test passes, then the error must be in the fiber or the host adaptor and the state machine  removes (at block ) the initiator port any initiator port FRUs, e.g., the GBICs the fabric  or switch. The state machine  then calls (at block ) the REP_IPORT_FIBER descriptor to instruct the administrator to replace the fiber connecting the host ,  to the fabric . The IPORT_TEST descriptor is then called (at block ) to test the new fiber. If (at block ) the test passed, then the IS_HBA descriptor is called (at block ) to determine the host adaptor type. Control proceeds (at block ) to block  in  to perform additional testing of the host adaptor if (at block ) loopback frame testing is enabled in the host adaptor type. If so, then the LBF_TEST is called (at block ) to run a loopback frame test at the host adaptor . If the loopback frame test passes or the loopback connection is not installed at the host adaptor b, then the error is assumed to be in the fiber In such case, the state machine  calls (at block ) IS_HBA to determine the host adaptor type and remove the host adaptor and any host adaptor FRUs from the suspect list. The user is then prompted (at block ) to retry the diagnostic test with the new fiber between the host ,  and the fabric .","If the loopback frame test did not pass at block  or the IPORT_TEST at block  on the new fiber did not pass, then the error is not in the fiber because replacing the fiber did not eliminate the failure. In such case, the state machine  calls (at block ) REST_IPORT_FIBER to prompt the administrator to replace the fiber with the previously removed fiber and removes (at block ) the initiator port fiber from the suspect list . The state machine  then calls (at block ) the REM_HBA_FIBER descriptor to remove the connection of the host bus adaptor to the fiber to isolate test the host adaptor The IS_HBA descriptor is called (at block ) to determine the host adaptor type, which is then used to determine the appropriate HBA_TEST descriptor to call to test the host adaptor which is called (at block ) to test the host adaptor If (at block ) the host adaptor fails the test, then the host adaptor is the cause of the failure. In such case, the host adaptor FRUs, e.g., the host adaptor GBICs are removed (at block ) from the suspect list . The test then ends (at block ) with the host adaptor remaining on the suspect list . Otherwise, if the host adaptor passed the test, then the host adaptor is not the cause of the failure and control transfers to block  to remove the host adaptor from the suspect list . If (at block ) the host adaptor type includes a replaceable GBIC, then the state machine  calls (at block ) the INS_HBA_LB descriptor to instruct the administrator to install the loopback connection to allow loopback testing.","The state machine  then calls (at block ) the HBA_GBIC_TEST descriptor to test the host adaptor GBIC If (at block ) the test passes, then all components have passed the test. In such case, the REST_HBA_FIBER descriptor is called (at block ) to reconnect the host adaptor to the fiber and the remaining components, e.g., the host adaptor GBIC, are removed (at block ) from the suspect list . At this point, the administrator would be prompted to retry the test as the error may be of an intermittent nature and not detected during the previous diagnostic test.","If (at block ) the host adaptor GBIC did not pass the test, then control proceeds (at block ) to block  in  to replace and retest the host adaptor GBIC with a new component. With respect to , at block , the state machine  calls the REP_HBA_GBIC descriptor to instruct the administrator to replace the host adaptor GBIC with a new unit and calls INS_HBA_LB to install the loopback for loopback testing of the new GBIC. The state machine  then calls (at block ) the TEST_HBA_LOOP to loopback test the new host adaptor GBIC. If (at block ) the test passes, then the host adaptor GBIC can be assumed to be one source of the failure. In such case, the state machine  calls (at block ) the REST_HBA_FIBER descriptor to instruct the administrator to reconnect the fiber to the host adaptor The administrator is further prompted (at block ) to retest the SAN with the new host adaptor GBIC to determine if any additional components are the source of the error. If (at block ) the test of the new host adaptor GBIC did not pass, then all the components have been tested, and the error may be intermittent. In such case, the REST_HBA_FIBER is called (at block ) to prompt the administrator to reconnect the fiber to the host adaptor and the administrator is prompted (at block ) to retry the diagnostic test again. If (at block ) the host adaptor does not have a GBIC, then control proceeds (at block ) to block  in  to prompt the user to retry the test at block .","If (at block ) the new fiber did not pass the fiber isolation test, then control proceeds (at block ) to block  in  to reinstall the previously removed fiber and continue testing as the fiber is not the sole source of the failure.","If (at block ) the isolated initiator port does not pass the IPORT_TEST, then control proceeds (at block ) to block  in  to further test the initiator port to pinpoint the source of the failure. With respect to , at block , the state machine  calls the REM_IPORT_LB, REP_IPORT_GBIC, and INS_IPORT_LB, which are similar to REM_DPORT_LB, REP_DPORT_GBIC, and INS_DPORT_LB except performed with respect to the initiator port as opposed to the device port These test descriptors are called to instruct the administrator to replace the initiator port GBIC to allow for isolation of the initiator port FRUs. The IPORT_TEST descriptor is then called (at block ) to test the new initiator port GBIC. If (at block ) the new GBIC passes the test, then the initiator port GBIC may be assumed to be one source of failure. In such case, the state machine  removes the initiator port fiber, fabric , e.g., switch, and any host adaptor FRUs, e.g., GBIC from the suspect list . The state machine then calls descriptors (at block ) to reconnect the initiator port to the fiber and prompt (at block ) the administrator to retry the test with the new GBIC. If the new initiator port GBIC did not pass the test, then the initiator port fiber initiator GBIC and any host adaptor FRUs are removed from the suspect list . At block , the state machine  calls descriptors to instruct the administrator to reinstall the previously removed GBIC. At block , the test ends with the fabric , i.e., switch, on the suspect list .","If (at block ) the loop is not switched, i.e., a direct connection for the host ,  and the storage device  as shown on paths using fibers then a series of diagnostic tests are performed, as described with respect to  to isolate the host adaptor fiber or storage device interface components in a manner similar to that described above, except there are no fabric  components to test, such as the initiator and device ports and their GBIC.",{"@attributes":{"id":"p-0036","num":"0061"},"figref":["FIG. 13","FIG. 13"],"b":"204"},"The above described logic of  provides isolation testing of different groups of the components of the path from a host to a storage device, which may include a fabric . The path components tested together and in isolation include the host adaptor, any host adaptor FRUs, the fiber, any fabric ports and FRUs, and the storage device interface and any interface FRUs. The above described testing technique provides consistent testing of the SAN system to allow for consistent and dependable system diagnosis.","To initiate the diagnostic routine at block  in , the administrator would specify a path, i.e., a host adaptor and storage device interface through a user interface. The diagnostic test may be invoked from one of the hosts , , or some other device in the system. When invoking the diagnostic test, the administrator may specify one or more of the following arguments to control the extent and operation of the diagnostic test:\n\n","Once the expert diagnostic tool  is invoked with the above arguments, the state machine  records a start record with a timestamp into the activity log and processes the rule base completely for each specified disk. When the state machine encounters the end of the rule base, it records the state of the tested storage path as COMPLETED or FAILED. If FAILED, the activity log records the name of the log(s) that contain failed test data, such as the suspect list . These error log files contain important information that should accompany the failed component(s) back to the repair station, such as the suspect list  that indicates components that may be the source of the failure.","What follows are some alternative implementations for the preferred embodiments.","The described implementations may be implemented as a method, apparatus or article of manufacture using standard programming and\/or engineering techniques to produce software, firmware, hardware, or any combination thereof. The term \u201carticle of manufacture\u201d as used herein refers to code or logic implemented in hardware logic (e.g., an integrated circuit chip, Field Programmable Gate Array (FPGA), Application Specific Integrated Circuit (ASIC), etc.) or a computer readable medium (e.g., magnetic storage medium (e.g., hard disk drives, floppy disks, tape, etc.), optical storage (CD-ROMs, optical disks, etc.), volatile and non-volatile memory devices (e.g., EEPROMs, ROMs, PROMs, RAMs, DRAMs, SRAMs, firmware, programmable logic, etc.). Code in the computer readable medium is accessed and executed by a processor. The code in which preferred embodiments are implemented may further be accessible through a transmission media or from a file server over a network. In such cases, the article of manufacture in which the code is implemented may comprise a transmission media, such as a network transmission line, wireless transmission media, signals propagating through space, radio waves, infrared signals, etc. Of course, those skilled in the art will recognize that many modifications may be made to this configuration without departing from the scope of the present invention, and that the article of manufacture may comprise any information bearing medium known in the art.","In the discussed implementations, the flow of the diagnostic test logic is provided in a rule base object which references descriptors that specify one or more program modules to execute to implement the diagnostic testing. In additional embodiments, different program architectures may be used for the expert diagnostic tool to associate descriptors or program objects with different functions called according to the diagnostic test operations.","The diagnostic program may communicate requests for manual operations, e.g., disconnecting, removing and\/or replacing components, through a displayable user interface, voice commands, printed requests or any other output technique known in the art for communicating information from a computer system to a person.","The described implementations referenced storage systems including GBICs, fabrics, and other SAN related components. In alternative embodiments, the storage system may comprise more or different types of replaceable units than those mentioned in the described implementations. Further, the diagnostic system may utilize different tests for different component types that are tested with the described diagnostic tool.","In the described implementations, the storage devices tested comprised hard disk drive storage units. Additionally, the tested storage devices may comprise tape systems, optical disk systems or any other storage system known in the art. Still further, the diagnostic tool may apply to storage networks using protocols other than the Fibre Channel protocol.","In the described implementations the system tested comprised a storage system. In alternative implementations, the system may include input\/output (I\/O) devices other than storage devices including an adaptor or interface for network communication, such that the described testing techniques can be applied to any network of I\/O devices, not just storage systems.","In the described embodiments, the expert diagnostic software tool is executed from a host system. Additionally, the expert diagnostic tool may be executed from one of the storage devices or from another system.","In the described implementations, the tested system included only one switch between a host and storage device. In additional implementations, there may be multiple switches between the host and target storage device. In such case, each switch and component thereof on the path from the host and target storage device would have to be tested and diagnosed.","The foregoing description of various implementation of the invention has been presented for the purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise form disclosed. Many modifications and variations are possible in light of the above teaching. It is intended that the scope of the invention be limited not by this detailed description, but rather by the claims appended hereto. The above specification, examples and data provide a complete description of the manufacture and use of the composition of the invention. Since many embodiments of the invention can be made without departing from the spirit and scope of the invention, the invention resides in the claims hereinafter appended."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Referring now to the drawings in which like reference numbers represent corresponding parts throughout:",{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIGS. 3-13"}]},"DETDESC":[{},{}]}
