---
title: Information processing system and power-save control method for use in the system
abstract: A technique for determining task allocation for reducing power consumption of an entire system is disclosed. This system includes physical computers, a cooling apparatus for cooling the physical computers, and a power-saving control server for controlling the physical computers and cooling apparatus. The power-saving control server includes a virtual server layout generator which sets up a plurality of sets of task allocations with respect to the physical computers, a server power calculator for calculating power consumption of the physical computers in each task allocation, a physical computer profile used to estimate a heat release amount of the physical computers in each task allocation, a cooling power calculator which computes power consumption of the cooling apparatus, and a virtual server relocator which determines a task allocation with a total of calculated values of the server/cooling power calculators being minimized to be the optimum task allocation for the physical computers.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08200995&OS=08200995&RS=08200995
owner: Hitachi, Ltd.
number: 08200995
owner_city: Tokyo
owner_country: JP
publication_date: 20090219
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["INCORPORATION BY REFERENCE","TECHNICAL FIELD","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DESCRIPTION OF THE EMBODIMENT"],"p":["The present application claims priority from Japanese application JP2008-171761 filed on Jun. 30, 2008, the content of which is hereby incorporated by reference into this application.","The present invention relates generally to an information processing system which is configured from a plurality of network-linked computers and network devices, and more particularly to a technique for reducing electrical power consumption in this system.","The quest for higher processor performance and the advent of high-density information technology (IT) equipment, such as blade servers, have posed a critical problem as to increases in power consumption of IT systems. As a solution to this problem, the development of power consumption reduction technologies is advanced, such as low power consumption processors and high efficiency cooling methods. Unfortunately, per-apparatus power-saving techniques have limits. Thus, in order to obtain more significant power-saving effects, a need is felt to make efforts for achieving an adequate approach on the system level.","Especially, in view of the fact that servers consume a certain amount of electric power due to the flow of a leakage current therein even when these are set to zero (0) in working rate thereof, a system condition with the use of a great number of servers of low working rates is inferior in efficiency in terms of the electric power. Thus, it is expected to achieve power-saved system operation\/management which uses a minimal number of servers at the highest possible operation rate while forcing the power supply of an unused server(s) to turn off. In contrast, a virtualized server is movable or transferable to another physical server; so, when a certain kind of business task decreases in load, virtual servers which are being executed by a low operation-rate server are gathered together for concentrative aggregation in such a way as to reduce the number of presently operating physical servers, thereby making it possible to save power to be consumed by an entire system. As such virtual servers become widely used in practical applications, the above-stated power-saved system operation\/management is becoming reality.","However, when an attempt is made to operate only a few number of servers in a heavily-loaded state while letting the others be shut down, the surrounding area of each such active server becomes a heat accumulation space of high temperatures-say, hot spot. When an entire cooling output is increased in order to cool down spatially scattered hot spots, electric power needed for this cooling operation can excessively increase beyond an acceptable level. In this respect, a method for determining a to-be-activated server by taking into consideration a heat distribution is disclosed in US2003\/0177406A1. A method of optimizing a server configuration by taking account of the cooling ability or \u201ccoolability\u201d of a built-in cooling apparatus of a server is disclosed in JP-A-2004-126968.","In near future, it is likely that a cooling apparatus capable of performing per-area or \u201clocal\u201d temperature control will become more important, rather than standard techniques for uniformly cooling an entire machine room by use of a large-scale massive cooling apparatus. Examples of it are a directional cooling machine and a per-rack cooling device attachable to the back face of a rack, which have already been commercially available in the market.","While the cooling apparatus is currently designed in most cases to cool or refrigerate a predetermined range of room space by determining its output based on a detection result of a stationary temperature sensor, it is considered that the sensor connected to cooling apparatus and the air-blowing direction will become modifiable in such a way as to intensively cool down one-side position-offset servers (groups) by a plurality of cooling machines. For instance, in the case of a facility which performs cooling operations using cold air or \u201cwind\u201d from a space under the floor, it is believed that open\/close drive of the floor's grating plates (hole-formed tiles) is controlled to change the underfloor air-blowing portions to thereby cool the offset servers in a focused way.","With this type of cooling apparatus, in cases where loads are locally gathered for concentration to one or some of the servers (groups), it is possible to aggregate the coolability also.","Note however that in practical implementation, it is never permissible that such the power save-aimed load aggregation work results in an undesired increase in power consumption. It is also unacceptable that the lack of the ability to cool the offset servers (groups) leads to generation of thermal runaway. For this reason, an appropriate action should be taken to pre-estimate, prior to execution of the aggregation of servers and coolability, whether there is the coolability high enough to cool such aggregated part when gathering loads together to a given server (group) and also preestimate whether the power consumption of an entire system including IT equipment and cooling machines is reducible or not.","In order to realize such the estimation, it is needed to determine a cooling machine capable of cooling down a group of aggregated servers and then investigate its coolability and electrical power required for cool-down in the case of the concentrative aggregation.","Unfortunately, the presently available cooling facility is merely controlled based on a temperature to be detected by a sensor connected thereto and thus fails to manage the relationship with a target server to be managed, i.e., management object server. This makes it impossible to estimate whether the coolability is sufficient or not and how much electric power is needed for the intended cooling operation.","It is therefore an object of this invention to provide an information processing system capable of determining a task allocation for reduction of electric power consumption of the entire system as the task layout with respect to a plurality of servers under management, each of which gives access to a storage device during cool-down or refrigeration by a cooling apparatus associated therewith.","To attain the foregoing object, this invention provides an information processing system having a power-saving controller. This controller operates, upon determination of the task allocation with respect to the plurality of managed servers each giving access to the storage device while being cooled by cooling machines, to detect workload of the plurality of managed servers and control the cooling apparatus and servers in accordance with this detection result. One principal feature lies in that the power-saving controller controls the individual one of the cooling machines in a way pursuant to the workload of the servers to thereby control a cooling distribution thereof and, at the same time, controls the task allocation with respect to the servers.","According to this invention, it is possible to provide the information processing system capable of determining a task allocation for reduction of power consumption of the entire system as the task allocation with respect to the managed servers.","Other objects, features and advantages of the invention will become apparent from the following description of the embodiments of the invention taken in conjunction with the accompanying drawings.","One preferred form of this invention will be described with reference to the accompanying drawings below.  is a diagram showing an overall system configuration in accordance with one embodiment of the invention. This embodiment is an information processing system or a storage subsystem, which is arranged to include a power-saving control server , one or more physical computers , one or more than one external storage device , a cooling apparatus  which cools down a computer room with these information technology (IT) equipments being installed therein, and a cooling apparatus control function module  which controls the cooling apparatus . The power-save control server  is interconnected with the physical computers  and cooling apparatus  by way of a management network . The physical computers  are linked to the external storage devices  by a fiber or \u201cfibre\u201d channel network .","An explanation will first be given of the power-saving control server . This power-save control server  functions as a physical computer power-save controller with the physical computers  and external storage device  plus cooler control function  being as a managed object system, for providing access to the external storage device  under the cooling of the cooling apparatus , for sending and receiving information to and from a plurality of physical computers  to detect workload of these physical computers , and for individually controlling the cooling apparatus  via the cooler control function  in a way pursuant to the workload of the plurality of physical computers  to thereby control the cooling\/refrigeration distribution thereof while at the same time controlling task allocation of the plurality of physical computers .","In this event, there is a case where the plurality of physical computers  are arranged as management object servers including a plurality of physical servers which give access to the external storage device  for processing information and a plurality of virtualized servers which are allocated to any one of the physical servers in accordance with the workload of the physical servers for executing a business task or tasks relating to the information. If this is the case, the power-save control server  performs several functional operations, including but not limited to, establishing a plurality of sets of task allocation patterns\u2014say, task layouts\u2014with respect to the management object servers from both the processing abilities of management object servers and the contents of a task to be processed on the management object servers, calculating an amount of electrical power to be consumed by the management object servers in each task layout based on electric power characteristics with respect to the processabilities of management object servers, calculating a heat generation amount of the management object servers in each task layout based on heat release characteristics with respect to the processabilities of management object servers, setting up the coolability of cooling apparatus  that cools the management object servers based on the heat release amount of the management object servers in each task layout, calculating power consumption of the cooling apparatus  based on power consumption characteristics with respect to the coolability of the cooling apparatus , and determining as a legitimate task layout for the management object servers a task layout of the plurality of task layouts which becomes minimum in a total of the consumed power of the management object server and the consumed power of the cooling apparatus .","More specifically, the power-save control server  is a software program which operates on the plurality of physical computers  and is generally made up of an operational information\/power monitoring unit  which accepts input of physical server configuration information  and virtual server configuration information  indicating the configuration of a management object system and collects operational information and power consumption information of the physical computers  and virtual computers , a virtual server layout generation unit  which generates a layout of virtual servers for reduction of a total sum of power consumption values of the computers , a server power calculation unit  which reads a physical computer profile  to obtain server-consumed electrical power of a certain virtual server layout, a cooling power calculation unit  which accepts input of a cooling apparatus profile  and server\/cooling map  to obtain electric power consumption needed for cool-down of a given virtual server layout, a virtual server relocation unit  which moves or transfers a virtual server based on the virtual server layout that was determined by the virtual server layout generator unit , a power supply control unit  which shuts shown the power supply of a physical computer  to which is not assigned any presently operating virtual servers, and a cooling control unit  which instructs control of the cooling apparatus .","Next, an explanation will be given of the management object system.","A virtual computer management software program  which realizes virtual computer-operating environments and one or more virtual computers  are operating on a physical computer . On each virtual computer, there are operating an operating system (OS)  and a measurement agent  which collects operational information of this virtual computer and also a business task\/service server , such as a Web server. The virtual computer management software  has a function of performing adjustment of division and\/or assignment to enable two or more OSs to use computer resources of the physical computer . By this virtual computer manager software, it is possible to achieve generation or \u201ccreation\u201d of a new virtual computer and also definition and setup of virtual hardware owned by such virtual computer.","The measurement agent  is a software program which operates on a physical computer  to collect operational information of such apparatus on which the program per se is operating, such as CPU usage rate, memory use rate, network interface use rate, etc., and then records the collected information as a measurement counter. The operational information\/power monitor unit  of the power-save control server  transmits to the measurement agent  an operational information collection request by means of a simple network management protocol (SNMP). The measurement agent  receives this operational information collection request and then sends to the operational information\/power monitor  a measurement counter value which is designated by an object identification (ID) code in the request. Upon receipt of this measurement counter value, the power-save control server  records it as the operational information, thereby enabling execution of unified management of multiple items of operational information of a plurality of management objects.",{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIG. 2","b":"110"},"A physical computer  with the power-save control server  of this embodiment being rendered operative is arranged to have a central processing unit (CPU) , magnetic disk device , such as a hard disk drive (HDD) or else, a main memory , bus , network interface , and disk interface .","The magnetic disk drive  of the physical computer  on which the power-save control server  is rendered operative is arranged to store an operational information track record , virtual server configuration information , physical server configuration information , physical computer profile , cooling apparatus profile  and server\/cooler map . Stored in the main memory  are software programs of power-save control server . These programs are stored in the magnetic disk drive  at the beginning and then transferred to the memory  when the need arises and, thereafter, executed by CPU .",{"@attributes":{"id":"p-0039","num":"0038"},"figref":"FIG. 3","b":"200"},"The physical computer  that makes up the management object system of this embodiment is arranged to have a CPU , magnetic disk device  such as HDD, main memory , bus , network interface , disk interface , and baseband management controller (BMC)  which performs status monitoring and power supply control.","The main memory  of the physical computer  constituting the management object system stores a virtual computer management program, virtual computer's OS, measurement agent program, and task service program. These programs are initially stored in the magnetic disk drive  and transferred to the memory  when the need arises and, thereafter, executed by CPU .","It should be noted here that these programs may be replaced by those which are read out of hand-carriable recording media and then stored in the magnetic disk drive  or, alternatively, stored therein after having downloaded from another computer or a recording device via a network connected to each device involved.","Also note that although each processing of the power-save control server  is executed in such a way that each program is executed by CPU, this is also realizable by hardware architecture using respective processing-execution modules, such as a measurement agent determination unit, measurement unit and others, which are integrated together on a substrate of ultralarge-scale integration (ULSI) circuitry by way of example.",{"@attributes":{"id":"p-0044","num":"0043"},"figref":["FIG. 4A","FIG. 4B"],"b":"400"},"As shown in , the computer room  contains therein four racks to , server groups mounted on these racks respectively, and cooling facilities and for cooling these server groups. Respective server racks -and cooling machines -are rigidly placed on a floor . The floor  has a plurality of air blow-out holes or ports -, which are formed therein. As better shown in , an electric motor  is fixed to the floor's rear surface side at a position corresponding to each of the air blowout ports -. This motor has a rotation shaft , which is coupled to an open\/close plate  for opening and closing its corresponding one of the air blowout ports - in response to rotation drive of the motor . The server groups are connected to a management-use network  used for management of hardware devices and software programs and an office-use network  usable by an application program(s).","In the rack , blade servers  and  are placed. Other blade servers (not depicted) are settled in the rack . Placed in the rack are two or more one-unit (1 U) servers No.  to No.  (not shown). Put in the rack are 1 U servers # to # (not shown).","The cooling machines and are rigidly attached to side walls of the computer room  as constituent elements of the cooling apparatus  for retaining a temperature of computer room  at a constant level. These cooling machines -are each arranged to send cold air to a space under the floor  and then force such cold wind to blow off from the air blowout ports (perforated tile plates) -, thereby removing the heat generated by each server.","During the computer room air conditioning, control is provided to open an adequate one(s) of the air blowout ports - while causing the others to close. For example, when task allocation is set up only for those servers that are housed in the racks and while letting the servers placed in the remaining racks -be out of the task allocation, control is executed as the control for the cooling apparatus  in such a way as to close one of the air blowout ports -\u2014here, port \u2014and open the other air blowout ports - and - by means of rotation drive of the motor .","Alternatively, when the task allocation is set to only those servers housed in the racks -while letting the servers put in the other racks and be out of the task allocation, control is performed as the control for cooling apparatus  to close ports  and  of the air blowout ports - and open the other air blowout ports - due to rotation drive of the motor .","Although in this embodiment each of the cooling machines is a computer room air conditioner (CRAC) of the standard type, this cooling machine may alternatively be a liquid-cooling apparatus which removes the heat exhausted from each server by causing a cooled liquid refrigerant to flow in a pipe for circulation through each rack. This liquid-cooling apparatus is typically associated with a valve which is at a location on the near side of a pipe extending to reach each rack, which valve is driven to open and close to thereby perform cooling output adjustment in a similar way to the air blowout ports stated above.","Additionally, the individual cooling machine may also be an outside air cooling apparatus which intakes cold ambient air and sends a cold wind by an underfloor air supply scheme which is similar to that of the above-stated CRAC apparatus, thereby to remove the heat generated by each server.",{"@attributes":{"id":"p-0052","num":"0051"},"figref":"FIG. 5","b":"122"},"The physical server configuration information  consists essentially of one or more records, each having a physical computer ID  registered to a physical computer , chassis number , constituent element identifier (item)  and constituent element value , for indicating processing ability of the physical computer . In the physical computer ID , physical computer ID codes are stored\u2014for example, the ID of a physical computer  to which is mapped a business task \u201cA\u201d is stored as a physical server , and the ID of a physical computer  to which is mapped a business task B is stored as a physical server . The chassis number  is to identify a chassis which houses blade servers in a case where the servers of interest are blade servers. If there is a server of the non-modular type, such as 1 U server or the like, \u201c\u2212\u201d is entered to its corresponding cell in the table as shown in .","The physical server configuration information  is determinable at the time of system construction to be done by a designer of the management object system and is managed either by paper documents or by software programs in many cases. The physical configuration information may be prepared based on such the configuration information being managed in this way or, alternatively, may be prepared from dynamically collected information.",{"@attributes":{"id":"p-0055","num":"0054"},"figref":"FIG. 6","b":"123"},"The virtual server configuration information  consists mainly of virtual computer allocation information  and virtual computer definition information . The virtual computer allocation information  is the one that represents the one-to-one correspondence between a physical computer  and a virtual computer  which works thereon and is made up of one or more records, each having a physical computer ID  that is an identifier of physical computer , type of a virtual computer management software program  that operates on the physical computer , one or more virtual computer IDs , and an IP address  of each virtual computer.","The virtual computer definition information  is the one that represents a resource assignment amount of a physical computer  with respect to virtual computer  and consists of at least one record having a virtual computer ID , type  of a task to be executed by the virtual computer, assignment ratio of a virtual CPU of the virtual computer , memory capacity usable by this virtual computer , band of disk interface (I\/F), and band of network I\/F.","It is noted that the creation of a virtual computer  and resource assignment to virtual computer  are achievable either by a system administrator's operation of an interface of the virtual computer management software  or by issuance of an application programming interface (API) of this virtual computer manager software from a program. Accordingly, these items of the virtual server configuration information  are preparable by referring to the information held by the virtual computer manager software.",{"@attributes":{"id":"p-0059","num":"0058"},"figref":"FIGS. 7A and 7B","b":["710","720","710","200","711","712","713","714","716","717","718","200"]},"The electric power information  is the one that indicates a power consumption situation of physical computer . As shown in , this information consists essentially of one or more records, each having fields of a measurement date , measurement day-of-the-week , measurement time , physical computer's power consumption  and chassis's power consumption . Note here that when the physical computer  that is a management object is a blade server, consumed power amounts of a plurality of physical servers and its associated chassis are managed together by a single table. Alternatively, in case the physical computer  is not the blade server, only one physical computer's power amount is managed.",{"@attributes":{"id":"p-0061","num":"0060"},"figref":"FIG. 8","b":"124"},"The physical computer profile  is divided into two parts: a server profile  and chassis profile . The server profile  is made up of one or more records each having, as fields, a physical computer working rate , heat generation amount , and power consumption . Each record represents a heat release amount and consumed power with respect to the working rate of a physical computer . Here, the physical computer working rate  is an operating rate of CPU.","The chassis profile  is structured from one or more records, each having fields of a physical computer working rate , heat release amount  and power consumption . The physical computer operational rate  in the chassis profile  is an operation ratio relative to a total sum of processing abilities of a plurality of physical computers  which are contained in the chassis of interest. Each profile record indicates a heat release amount and consumed power with respect to this operation ratio.","The physical computer profile  is different per model type of physical computer  and is collectable from a track record in the past. This profile may also be acquired with application of a load. It is also considered that a vendor of the physical computers  provides this profile.",{"@attributes":{"id":"p-0065","num":"0064"},"figref":"FIG. 9","b":"126"},"The server\/cooler map  is structured from one or more records each having fields of a rack identifier , an identifier  of cooling apparatus , and rack output distribution . Each record represents a rack, a cooling apparatus  that cools each rack, and a ratio of partial coolability of such cooling apparatus to its overall coolability, wherein the former is assigned to each rack.",{"@attributes":{"id":"p-0067","num":"0066"},"figref":"FIG. 10","b":"125"},"The cooler profile  is constituted from one or more records each having fields of a cooler output , cooling amount , and power consumption . Each record indicates a heat release amount and power consumption with respect to an output of the cooling apparatus  in a five-level divided manner. The cooler profile  is the information that is owned by the vendor as the processing performance and necessary electric power of the cooling apparatus \u2014in near future, this kind of information is believed to be provided to users also.","Additionally, in the case of an outside air cooling architecture, the coolability with the same power consumption is variable with a change in outside air temperature. Accordingly, more than two cooler profiles  are supposed to exist in units of outside air temperature ranges.","The above-stated items of information shown in  are described by the system administrator in a definition file, which is then input to the power-save control server . Note however that these information items may alternatively be input thereto from an appropriate graphical user interface (GUI) without having to use such definition file or, still alternatively, may be acquired from another server via a network.","A flow of electric power-saving control procedure will be described below.",{"@attributes":{"id":"p-0072","num":"0071"},"figref":"FIG. 11"},"Firstly, the operational information\/power monitor  of the power-save control server  reads the physical server configuration information  and virtual server configuration information  (at step S), recognizes physical computers  and virtual computers  which are the management objects, monitors operational information and power consumption of these physical and virtual computers (at step S), and then prepares a list of those of the physical computers  which exhibit load variations (at S). Whether load variation is present or absent is determinable by judging whether the state that the resource usage rate of a physical computer  is less than or equal to ten percent (\u226610%) is continued for more than ten minutes. If no such load variation occurs, the monitoring is being carried on.","The operational information\/power monitor  refers to a task\/service schedule and operational information  which is the past track record of the resource usage amount of the task of a virtual computer  that is operating on a physical computer  included in the above-stated list and judges whether a low load state of such physical computer  will be continued from now for a prespecified length of time period. Then, it conducts a search to determine whether there is a physical computer  which has an extra space large enough to enable transfer or \u201cmigration\u201d of the virtual computer  on the physical computer  that has been judged so that its low load state will continue in the future. In case there is such physical computer  that has its vacancy large enough to become a transfer destination with respect to every virtual computer  operating on certain physical computer , the virtual server layout generator  prepares a relocation (task allocation) proposal of a case where any given virtual server working on the physical computer  included in the above-stated list is relocated to the above-stated physical server having the vacancy (at step S of ). In case there are more than two virtual computers  on a physical computer , these virtual servers may be transferred to the same physical computer  or, alternatively, may be moved to separate ones.","Next, the virtual server layout generator  obtains a power consumption value of the relocation proposal prepared and then compares it to a present power consumption value to thereby select a virtual server allocation with minimal power consumption (at step S).","When the power consumption of the relocation proposal is less in value than the present power consumption, the virtual server relocator  permits the virtual computer  to move in accordance with the relocation proposal (at step S). In this event the power supply controller  turns off the power supply of the physical computer  that has now become unused or \u201cvacant\u201d (step S). Further, when the cooling power calculator  judges that it is necessary to change the settings of the cooling apparatus , the cooling controller  issues a request for output change and sends it to the cooling apparatus control function  of the management object (at step S).","Finally, the procedure returns to the step S which causes the power-save control server  to perform the monitoring of the operational information and electric power.",{"@attributes":{"id":"p-0078","num":"0077"},"figref":"FIG. 12"},"The virtual server layout generator  generates a layout pattern of virtual computer  onto physical computer  and then compares power consumption of one or more than one relocation proposal to that of the original virtual computer layout.","First, the virtual server layout generator  obtains a relocation proposal of virtual computer  with respect to physical computer  based on a resource amount needed by each virtual computer  and resource amount owned by each physical computer  (at step S).","The resource amount needed by virtual computer  is set to a maximal value of the resource usage amount of the task to be processed by this virtual computer. The maximum value and average value of the task's resource usage amount are obtainable from the track record  of the operational information.","A practically implemented relocation proposal preparation method is arranged to estimate a resource usage rate of a case where a virtual computer  operating on a physical computer  that is less in resource usage is moved to another physical computer  and select as a transfer destination a physical computer  which becomes the highest in usage rate while simultaneously ensuring that the physical computer  of transfer destination is still kept sufficient in its resource amount even after execution of the transfer. In case more than two virtual computers  are present on the transfer-destination physical computer , when there is found a transfer destination capable of permitting the transfer of all of these virtual computers , a layout of such moved virtual computers  is determined as the relocation proposal. At this time, the virtual server layout generator  refers to the virtual computer definition information  and acquires the kind of a business task or service to be executed by the virtual server and then excludes from target objects of the relocation those tasks which should not be transferred in any way. This is done because data packets being communicated between an external program and virtual server can often be lost at the time of transfer from a physical server that presently executes a virtual server toward another physical server. This packet loss does not cause any serious problems in many tasks because the use of a protocol with resend functionality, such as transmission control protocol (TCP) or else, guarantees that once-lost packets are sendable again for replenishment. However, in some kinds of tasks which are required to offer very high response performances, the performance required is hardly satisfiable with mere use of such resend functionality in some cases. In view of this fact, these \u201cspecial\u201d kinds of tasks are excluded from the objects to be transferred in the way stated supra. These tasks are determinable in advance; so, suppose that there is a list of these non-transferable tasks.","Another possible example of the relocation proposal obtaining method is to compute a layout with the minimum power consumption by combination optimization techniques without using the above-stated approach based on a present layout of virtual computers . Note however that in this case, the resulting layout can become larger in difference from a present virtual server layout, which leads to an unwanted increase in number of virtual server transfer sessions.","Next, an attempt is made to compute power consumption of the physical computer  of the relocation proposal. To do this, the virtual server layout generator  refers to the operational information track record  and obtains an average value of resource usage rates (amounts) of tasks to be processed by respective virtual computers  to thereby estimate the resource usage rate (amount) of each physical computer  by taking into consideration possible overhead of virtualization (at step S).","The virtualization overhead is different depending upon a virtualization mechanism used; so, the virtual server layout generator  refers to the virtual computer layout information  and acquires the type of a presently operating virtualizer mechanism in the physical computer  which is a task allocation object; simultaneously, it refers to an overhead value of this virtualizer mechanism to thereby estimate the resource usage rate (amount) of the physical computer . Suppose that the overhead value per virtualizer mechanism is held within the virtual server layout generator .","Then, the server power calculator  acquires based on the model type of physical computer  the physical computer profile  of such model type and obtains power consumption of the physical computer  with respect to the estimated resource usage rate (amount) of physical computer  (at step S). In case the referring of physical server configuration information  reveals that the physical computer  of interest is a blade server, what is obtained here is not power consumption of the physical computer  per se but power consumption of an entirety of the chassis.","There is also available a simplified means for estimating the power consumption of the physical computer  without having to use the physical computer profile , an example of which is to subtract from a present power consumption value a standby power value of physical computer  having its power supply which is deactivatable by the relocation to thereby obtain the power consumption of physical computer  after execution of the relocation.","Next, electric power needed for the cooling operation is calculated.","To do this, the virtual server layout generator  acquires based on the model type of the physical computer  the physical computer profile  of this model type and then obtains a heat generation amount with respect to the estimated CPU usage rate of physical computer  (at step S). Then, it refers to the server\/cooler map  and determines the cooling apparatus  that is expected to perform the cooling of the rack under management; simultaneously, it obtains based on the cooler profile  of this cooling apparatus  an output and power consumption of the cooling apparatus  necessary for the cooling of the heat generation amount of those physical computers included in the rack to be managed (at step S). Note here that in the case of the outside air cooling, the cooling power calculator  acquires an outside air temperature by means of a temperature sensor that is put at a position outside the room and selects for later reference use the cooler profile  which is pursuant to a present outside air temperature.","Additionally, the cooling power calculator  refers to the server\/cooler map  and modifies or \u201cupdates\u201d the distribution of coolability when it is judged that the heat release amount of physical computer  after aggregation of virtual computers  exceeds the coolability in a present coolability distribution.","For example, in a case where the aggregation of all the virtual computers  to the physical computers  in the racks and results in heat release amounts of the physical computers  in racks and going beyond the coolability so that coolabilities of physical computers  in racks and become unnecessary, the presently established coolability distribution is modified in such a way as to assign the coolabilities of all cooling machines to the racks and . In case the coolability required is insufficient even after having modified the coolability distribution, a notice indicative of the lack of coolability is sent.","Although the physical computer profile  in this embodiment is exclusively related only to the CPU that is a major heat-generating component, the heat generation profile may alternatively be the information pursuant to usage rates of other components as well as the CPU.","Lastly, the virtual server layout generator  obtains power consumption of one or more physical computers  and also a total sum of power consumption values of the cooling machines  necessary for the cooling thereof (at step S).","As has been stated above, it becomes possible to select optimal virtual server locating (task allocation) which lessens or minimizes power consumption of the entire system by arranging the power-save control server  to include the virtual server layout generator  which sets up a plurality of sets of task layouts (virtual computer locating) with respect to physical computer , the server power calculator  which calculates power consumption of physical computer  in each task allocation, the physical computer profile  for estimation of a heat generation amount of physical computer  in each task allocation, the cooling power calculator  which calculates power consumption of cooling apparatus , and the virtual server relocator  which determines a task layout with a total of calculated values of the server power calculator  and cooling power calculator  becoming the minimum and determines it to be an optimal or \u201clegitimate\u201d task layout for the physical computer .","It should be further understood by those skilled in the art that although the foregoing description has been made on embodiments of the invention, the invention is not limited thereto and various changes and modifications may be made without departing from the spirit of the invention and the scope of the appended claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":["FIG. 4A","FIG. 4B"]},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIGS. 7A and 7B"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 12"}]},"DETDESC":[{},{}]}
