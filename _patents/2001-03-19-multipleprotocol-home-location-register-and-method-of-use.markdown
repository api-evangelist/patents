---
title: Multiple-protocol home location register and method of use
abstract: A multiple-protocol home location register (MP HLR) comprises a processor, that generates network messages according to two or more network protocols and processes network requests and other messages to obtain information requested by two or more networks that support the two or more network protocols. One embodiment of the MP HLR () utilizes protocol gateways () that interpret network requests and generate, utilizing a common control procedures for multiple network protocols, queries to a database that provides a common source of data for supported networks. Another embodiment of an MP HLR () utilizes a mediation device () that generates and/or translates network messages according to multiple different network protocols and utilizes multiple HLRs () or home agents, each supporting a different network protocol.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=06950876&OS=06950876&RS=06950876
owner: Lucent Technologies Inc.
number: 06950876
owner_city: Murray Hill
owner_country: US
publication_date: 20010319
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["RELATED APPLICATIONS","FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","SUMMARY","DESCRIPTION OF A PREFERRED EMBODIMENT"],"p":["This application is related to commonly assigned application Ser. No. 09\/813,016 titled \u201cMultiple-Protocol Home Location Register and Method of Use\u201d by Thomas F. LaPorta et al., and filed on the same date as the present application.","This invention relates to communication systems, including but not limited to home location register operation in communication systems.","Various types of cellular communication systems are known to provide radio telephone service to a large number of mobile subscribers using a relatively small number of frequencies. Such service is provided by dividing a service area into a number of cells and reusing the frequencies in non-adjacent cells. This cellular principle has permitted a large growth in the amount of wireless telecommunications that may be carried over the allocated radio spectrum thus providing significant expansion in the number of wireless communication subscribers. Various different cellular protocols include analog, time division multiple access (TDMA), code division multiple access (CDMA), Global System for Mobile Communications (GSM).","Similarly, various types of wireline systems and protocols provide different wireline services to a large number of users who typically utilize personal computers and other types of computing devices to access these services. Different wireline protocols and services include mobile or voice over IP (internet protocol), Authentication, Authorization, and Accounting (AAA), Session Initiation Protocol (SIP), and H.323 protocol that provides packet-based multimedia communication systems.","In many wireless communication systems, Home Location Registers (HLRs) and Visitor Location Registers (VLRs) are used to handle mobility management. HLRs and VLRs potentially may reside anywhere in the network. An HLR contains profile information for each of its mobile subscribers and the address of the current VLRs for each mobile. Each Mobile Switching Center (MSC) has a VLR that tracks mobiles currently receiving service in the serving MSC's coverage area. Whenever a mobile enters an area served by a new VLR and registers there, the latter informs the mobile's HLR of the change in the mobile's location. In addition, the VLR downloads the service profile of the roaming mobile as well as other information necessary for call termination at the mobile. During call delivery, the location and profile information in the HLR is utilized to route incoming calls to the mobile.","Mobile data communication systems utilize network servers called home agents and foreign agents to provide analogous functions to HLRs and VLRs, respectively. Wireline communication systems utilize functions such as authentication, service provisioning, user profile management, user location management, and service invocation.","As communication systems evolve and provide increased services, mobile users require more services, including roaming between and access to each different system. Issues regarding mobility management between these systems need to be resolved.","Accordingly, there is a need for a method and apparatus to provide mobility management for users between multiple systems utilizing different protocols.","A multiple-protocol home location register comprises a receiver for receiving, from a requesting network of at least two networks, a network request according to one of at least two network protocols. A processor, within the home location register, is arranged and constructed to generate network messages according to the at least two network protocols and to process the network request to obtain information requested by the network request. A transmitter, operably coupled to the processor, relays the requested information to at least one of the requesting network and a destination network.","The following describes an apparatus for and method of providing mobility management for users between multiple systems utilizing different protocols through use of a multiple-protocol home location register (MP HLR). The MP HLR comprises a processor, that is preferably distributed among various elements of the MP HLR although it may be a single processor, is arranged and constructed to generate network messages according to two or more network protocols and to process network requests and other messages to obtain information requested by two or more networks that support the two or more network protocols. Two different embodiments of an MP HLR are described herein. One embodiment utilizes protocol gateways that interpret network requests and generate, utilizing a common control procedures for multiple network protocols, queries to a database that provides a common source of data for all networks. A second embodiment utilizes a mediation device that generates and\/or translates network messages according to multiple different network protocols and is coupled to multiple HLRs, each supporting a different one of the multiple network protocols.","A method of the present invention comprises the steps of receiving, by a multiple-protocol home location register, a network request from a requesting network of at least two requesting networks, wherein the network request is composed according to one of at least two network protocols. The network request is processed to obtain information requested by the network request. At least one network message is generated according to at least one of the at least two network protocols and sent to at least one network supporting the at least one of the at least two network protocols. The requested information is relayed to at least one of the requesting network and a destination network.","A multiple-protocol home location register (HLR) comprises a first HLR arranged and constructed to provide a first network protocol and a second HLR arranged and constructed to provide a second network protocol. A mediation device is operably coupled to the first HLR and the second HLR and is arranged and constructed to generate network messages according to the first network protocol and the second network protocol, such that the multiple-protocol HLR provides HLR capability for a plurality of communication devices utilizing any of the first network protocol and the second network protocol.","A system utilizing a multiple-protocol home location register comprises a first infrastructure device arranged and constructed to generate at least one query according to a first network protocol and a second infrastructure device arranged and constructed to function according to a second network protocol. The multiple-protocol home location register, operably coupled to the first infrastructure device and the second infrastructure device, wherein the multiple-protocol home location register is arranged and constructed to function according to the first network protocol and the second protocol, such that a call request according to the first network protocol and related to the at least one query is completed according to the second network protocol. At least one query is generated in response to a communication device request to communicate with a serving network. A profile for the communication device is sent to the serving network and the profile is formatted according to the serving network's protocol.","A method comprises the steps of generating, by a first infrastructure device, a query according to a first network protocol and sending the first network protocol query to a multiple-protocol home location register functioning according to the first network protocol and a second network protocol. The multiple-protocol home location register processes the first network protocol query, thereby generating a second network protocol message. The second network protocol message is sent to a second infrastructure device functioning according to the second network protocol.","A block diagram of illustrating multiple communication networks interfaced to a multiple-protocol home location register (MP HLR) is shown in FIG. . At the center of the system is an MP HLR  that is capable of supporting multiple different communication protocols. These protocols may be of many varied types, including wireless and\/or wireline; voice, data, and\/or multimedia; and circuit and\/or packet based. The MP HLR  performs mobility\/user location management, user authentication\/security control, and user profile management functions for various different network protocols. The various components of the MP HLR  may be geographically distributed.","One of the different types of protocols that interfaces with the MP HLR  is Global System for Mobile Communications (GSM), as part of a GSM system  shown interfaced to the MP HLR . A mobile subscriber unit or mobile station (MS)  communicates with a base station system (BSS)  comprised of a plurality of base stations distributed throughout a plurality of coverage areas, each serviced by one of a plurality of Visited Mobile Switching Centers (VMSCs) . The BSS  is operably coupled to the VMSCs , a Gateway Mobile Switching Center (GMSC) , and a Serving GPRS Service Node (SGSN) , all of which operate according to the GSM protocol. The VMSCs  are coupled to a GSM Service Control Point (SCP) , a GSM Message Center (MC) , also known as an Short Message Service Center (SMSC), and a GSM Voice Message System (VMS) . The GSM MC  and VMS  are operably coupled, and may be co-located. The VMSCs , GMSC , SGSN , SCP , and MC  each connect to the MP HLR . Similarly, networks utilizing other types of wireless protocols may also be connected to the HLR.","An ANSI communication system  and its interfaces to the MP HLR  are also shown in FIG. . ANSI-41 is utilized as the communication standard for infrastructure messages, and ANSI-136 is utilized as the communication standard for the air interface. An MS  communications with an ANSI base site system  comprised of a plurality of base stations distributed throughout a plurality of coverage areas, each serviced by one of a plurality of ANSI Visited Mobile Switching Centers (VMSCs) . The BSS  is operably coupled to ANSI VMSCs , an ANSI GMSC, which is known as an originating MSC, , and an ANSI SGSN . The ANSI VMSCs  are coupled to an ANSI Service Control Point (SCP) , an ANSI MC (message center) , and an ANSI VMS . The GMSC , SGSN , VMSCs , SCP , MC , and VMS  each connect to the MP HLR . The GSM MC  and ANSI MC  are operably coupled.","The PSTN (public switch telephone network)  provides telephone service between wireline (conventional) phones  and wireless devices. The GSM GMSC , GSM MC , GSM VMS , ANSI GMSC , ANSI MC , and ANSI VMS  are coupled to the PSTN  to enable wireline and wireless interconnections.","Wireline communication networks may also be coupled to the MP HLR . The MP HLR  provides home agent and foreign agent functionality for wireline networks. Such systems may be coupled through servers such as a AAA server , which provides authentication and related services utilizing the current de facto standard RADIUS, a Voice over IP (Internet Protocol) server  utilizing, for example, the Session Initiation Protocol (SIP) that provides an SIP registrar and proxy server, and an H.323 protocol server . Each of these servers , , and  interface to a data network , including wide area and\/or local area networks that interconnect the computing devices  and  to the servers , , and . These computing devices may be personal computers (PCs), telemetry gathering devices, and wireless devices that connect to the computer, such as voice over IP or other types of devices that interconnect through wireline systems. An application server  is shown connected to the MP HLR . The application server  accesses user data in the MP HLR  for use with third party applications, such as provisioning, mobility service, and geo-location based applications.","Although examples of two wireless systems and three wireline networks are shown in , the present invention is applicable to other wireless and wireline systems. Other applicable systems include, for example, Code Division Multiple Access (CDMA), High Data Rate (HDR) for CDMA data, Universal Mobile Telecommunications System (UMTS), and General Packet Radio Service (GPRS). Additional coupling between devices is possible, although not shown for the sake of simplicity.","User or subscriber devices  or  may be wireline and\/or wireless based, may be fixed or mobile, may be voice, data and\/or multimedia, and may be packet or circuit switched, including voice over IP. Such devices include, for example, pagers, cellular phones, telephones, and personal computers, and are often known generally as mobile subscribers, mobile units, and computing devices. All such devices are referred to collectively or individually herein as communication devices.","Infrastructure devices provide switching, packet relay, internet protocol, gateway, and\/or interworking functions for their associated networks for both wireless and wireline networks. Examples of infrastructure devices include packet gateways, internet protocol gateways, GGSNs (Gateway GPRS Service Nodes), and MSCs, such as gateway MSCs, originating MSCs, and terminating MSCs.","A block diagram of a first embodiment of a multiple-protocol HLR is shown in FIG. . The MP HLR  provides a service provider with unified user provisioning and service profile management interface, which is shared across protocols. The first embodiment of the MP HLR  includes common data types, a common source of data, and common control procedures that are centralized and projected in different formats to different network types to support user mobility across the different network types. Using this provisioning interface, a service provider may, for example, manage the profiles of different network types for a single user.","A database component  comprises user locations , integrated user profiles , and security information  as well as access procedures used by a database manager  to access the data via one or more connections to the database component . In the preferred embodiment, the database component  comprises at least one relational database. Optionally, the database  may include information other than user locations, profiles, and security information, which data may not belong to any particular protocol or network, such as user data relating to other applications. Each data element includes information to sustain all network protocols that the MP HLR supports. Unified management of user location information  facilitates call delivery between different types of networks. Unified management of security information  facilitates authentication between different types of networks.","The integrated user profile database  of the MP HLR  keeps the profile of users who have access capabilities to one or more network types. A service provider may uniformly manage the profiles of different network types for a single user through the MP HLR . The integrated user profile database  also includes common user data, e.g., user name, user identification, and directory number for a user, and common service information, e.g., call forwarding directory numbers, that are shared. The integrated user profile  in the MP HLR  further plays a broader role as a central repository of user and service data. Currently, various data is scattered between somewhat separate components of the network, such as the HLR, SCP, and AAA. The MP HLR  promotes the simplification and consolidation of these complex interconnected components into a single repository of subscriber and service data, upon which feed multiple services and applications.","The database manager  uses common procedures and exchanges common control commands and operations with one or more protocol gateways (PG), performs interworking functions across multiple different protocols, and manages, accesses, and updates data stored in the database . The database manager  provides services as a user location database  manager, an integrated user profile database  manager, and a security database  manager. The user location database  manager keeps track of the location of a user who may be at cellular terminals and\/or at IP terminals. The information is used for delivery of voice call, data session, and a short message to a user. The security database  manager manages user authentication control for wireless as well as IP systems. The user profile database  manager manages integrated user profile database and exposes the MP HLR database management interface to other functionalities of the database manager . In the preferred embodiment, the database manager  comprises a plurality of core servers that access the database  through one or more connections.","The database manager  and database  may be considered a single database entity. When a PG queries the database, the PG sends the queries to the database manager  to obtain the relevant information from the database. The database manager  may be a database application such as Database Views that provides, for example, SQL (Structured Query Language) or LDAP (Lightweight Directory Access Protocol) queries to the database element .","The database manager  interfaces with a number of protocol gateways. Each protocol gateway (PG) receives messages, including requests and queries, from a particular network. The PG may relay the message if no further processing is required, interpret and\/or translate the message, and\/or generate one or more queries that are sent to the database  via the database manager . All PGs utilize the same set of common procedures and commands when querying the database manager . The PGs uses common procedures to convert network messages into common commands or operations, such as the examples shown in TABLE 1 below. In other words, the same set of common messages is utilized between each PG and the database manager , regardless of the protocol supported by the PG. For example, the MP HLR  utilizes a Register Terminal message when an ANSI network sends a Registration Notification, when a GSM network sends an Update Location, and when an SIP network sends a Register (Location Lookup) message. In another example, the MP HLR  utilizes a Request Location message when an ANSI network sends a Location Request, when a GSM network sends a Send Routing Information message, and when an SIP network sends an Invite message.","In the preferred embodiment, each protocol gateway supports a single network and the protocol that network utilizes, and translates or interprets messages from that protocol to one of the common messages, such as commands or operations. Examples of PGs shown in  include a GSM PG  supporting a GSM network , an ANSI-41 PG  supporting an ANSI-41 network , a AAA PG  supporting a AAA (RADIUS) server , an SIP PG  supporting a SIP server , and an H.323 PG supporting an H.323 server . The various wireless networks and wire line servers that are shown are examples only, as additional networks, both wire line and wireless, voice, data (packet or circuit based), and\/or multimedia, and so forth, may be additionally included in the MP HLR.","The MP HLR  may also include one or more application gateways (AGs), such as the one  shown in FIG. . The AGs provide an interface through which information in the MP HLR  is accessed and notification of events, such as a mobile unit powering on or arrival of a mobile at a certain location, may be received. The AGs utilize the same common procedures, commands, and operations to access the database that the PGs utilize, including interpreting messages and requests from the application server  and generating queries to the database manager  and relaying the database  responses to the application server .","The AGs  include one or more APIs (Application Programming Interfaces) that interface to one or more application servers . The AGs may support management APIs and programming APIs for the MP HLR . Typically, AGs provide services through a non-standard interface. A provisioning AG provides service providers with an interface to provision user profiles through web-based interfaces as well as CORBA (Common Object Request Broker Architecture) based programming interface to the provider's provisioning center. Other types of interfaces such as LDAP may be sought when needed by introduction of another type of AG. The interface may also be used by an end-user to update the user's database entries though a web browser, e.g., supplementary service activation, call forwarding number update, and prepaid service updates, in which case the AG acts as a web server. A mobility service AG provides third party software vendors with programming API for mobility services. The API may be used to develop location-based service systems for users with cellular and\/or internet access capabilities. The AG is an independent logical entity and employs the MP HLR  common operation interface to communicate with the database manager  and integrated user profile database.","A flowchart showing operation of a protocol gateway in an MP HLR is shown in FIG. . At step , a network message such as the examples shown in TABLE 1 below, as sourced by a network, is received. In the preferred embodiment, the protocol for the requesting network is terminated at the receiving step  by the PG. At step , the network message is interpreted by the PG. The message is interpreted according to rules associated with the network protocol under which the PG operates. These rules and the network protocol may comply with a communication standard, such as, for example, ANSI-41, GSM, SIP, H.323, AAA, and Mobile IP (M-IP), that supports the network protocol. At step , a common procedure is followed, and as appropriate a common command or operation is generated. In the preferred embodiment, the PG generates a common procedure or command, such as one shown in TABLE 1, based on the interpretation of the network message at step , and sends the common command or operation to the database manager . At step , one or more database queries are generated based on the network message and relayed to the database . In the preferred embodiment, the database manager  generates one or more queries based on the common procedure or command (which is based on the network message), and sends the queries to the database . At step , a response to the one or more queries is received from the database . In the preferred embodiment, the database manager  obtains the information from the database  by queries particular to the database  structures. At step , the database manager  utilizes a common procedure to generate a response based on the response received from the database . At step , the PG generates a response based on the response from the database manager  and sends that response to the requesting network that received the network message.","An example of a call flow that utilizes multiple protocol gateways in an MP HLR is shown in FIG. . The numbers in circles represent the call flow, in chronological order, for call delivery through an MP HLR . Although the example in  shows a GSM originating call that terminates in ANSI-41, calls may be delivered through any combination of originating and terminating networks. Generally, the call flow is described as follows. A message is received from a first network via a first protocol gateway. The message was generated, for example, because a call has been received for a mobile unit presently located in a second network. The message is processed according to a procedure common to the first protocol gateway and a second protocol gateway. At least one database query is generated based on the processed message. The at least one database query is relayed to a database comprising data common to a first network associated with the first protocol gateway and a second network associated with the second protocol gateway. A response to the at least one database query is received, and a request to the second protocol gateway is generated. In the preferred embodiment, the response identifies a location for a mobile unit, both physical and logical, and this information identifies the second protocol gateway. A reply to the request to the second protocol gateway is received, which reply may include, for example, routing information within the second network. A message based on the reply is generated and relayed to the first protocol gateway. The information in the message, particularly routing information, is utilized to route a call to a mobile unit located in a coverage area of the second network.","More specifically, the call flow of  is described as follows. A (1) call, such as an IAM (Initial Address Message) or SIP invite, is delivered to the call processing entity governing the called party number. If the called party number is an SIP URL, the call is delivered to an SIP proxy. If the called party number is a GSM or ANSI-41 wireless phone number, the call is delivered to a GSM GMSC or an ANSI-41 home MSC, respectively. An appropriate (2) location query message, such as a Location Request for ANSI, a Send Routing Information for GSM (as shown), or an SIP location lookup, is sent to the corresponding PG  from the originating network. The PG  translates the location query message into a (3) request location message that is relayed to the database manager . The database manager  processes the request into a (4A) database query that is relayed to the database , which determines the requested information and relays that (4B) requested information back to the database manager .","The database manager  looks up the user's location database to determine the current location of the user. The database manager  sends a (5) request route information message through the PG  that manages the network where the user is currently located or roaming, i.e., the terminating network. That PG  contacts an entity within the terminating network to (6) obtain routing information for that user. For example, a Route Request is sent to an ANSI MSC (as shown in the example in ) or a Provide Roaming Number (PRN) message is sent to a GSM MSC. A (7) routing return message, such as a route request with a TLDN (Temporary Location Directory Number) from an ANSI-41 MSC (as shown in FIG. ), a PRN ACK with an MSRN (Mobile Subscriber Roaming Number) from GSM MSC, or routing information used to reach a signaling and media gateway complex that has SIP user agent functionality for a call from an SIP network via the PSTN, is returned to the terminating PG . The PG  processes the routing return message into a (8) requested route information response that is relayed to the database manager . The database manager  processes the requested route information response into a (9) request location response, including the relevant information from the routing return message, and sends the request location response to the PG  for originating call processing entity. The PG  converts the request location response to an appropriate (10) network response, such as a location request for ANSI, an SRI ACK for GSM (as shown in FIG. ), or an SIP location lookup response for SIP. The originating network relays the (11) call (IAM or SIP invite) to a device in the terminating network that delivers the (12) call to the appropriate end user.","A block diagram of the second embodiment of a multiple-protocol HLR is shown in FIG. . This embodiment of the MP HLR  includes an HLR for each type of wireless communication system and a server for each type of wireline network supported by the MP HLR . In the particular example shown, a GSM HLR  and an ANSI-41 HLR  are shown. Each of the HLRs  and  are interfaced to a mediation device 405. The mediation device (MD)  provides a number of functions, including generating network messages, translating network messages, and emulating GMSCs, VMSCs, and MCs. As part of the translation function, various tables including translation information are included in the MP HLR . An example of such a translation table is shown in TABLE 1, which translates messages between GSM and ANSI-41\/ANSI-136. The MD may also convert messages. For example, the MD  may convert a Provide Roaming Number message to a Location Request message or a Routing Request message to a Send Routing Information message. When looking at conversion external to the MP HLR , the MP HLR  converts a Location Request message to a Provide Roaming Number message, and also converts a Send Routing Information message to a Routing Request message. The MP HLR  works with serving networks, i.e., networks where communication devices are currently registered, to update registration information, generate queries in response to requests, and route calls to users where they are located and in a manner that users access their communication devices, such as formatting profiles and messages according to the serving or terminating network's protocol. The MP HLR  routes a call according to the protocol of the infrastructure device to which the call is directed.","In this embodiment, a provisioning gateway  preferably distributes user data for each of the devices within the MP HLR . The provisioning gateway  is interconnected to a database (not shown) that is part of or external to the MP HLR , or distributed among one or more of the MP HLR  components. Only two HLRs are shown part of the MP HLR in  for the sake of simplicity. If additional HLRs or home agents were to be added to the MP HLR, each such device would be interfaced to the mediation device  and the provisioning gateway . The database includes user information such as user profile, locations, and security information, such as the data stored in the database  as described above. Other stored data includes protocol types and addresses for communication devices, serving networks, and infrastructure devices such as gateway MSCs, terminating MSCs, visited MSCs, packet gateways, and internet protocol gateways. This data may be distributed as needed among the elements that require the information or may be stored for access as needed at various devices, such as the provisioning gateway  or the mediation device.","Various types of information flow and timing diagrams for the MP HLR  are shown in FIG.  through FIG. . These call flows may be utilized with the MP HLR of  or , although the flows of FIG.  through  are tailored to call flows within the MP HLR  of  in order to show the interactions between the various HLRs  and  and the mediation device , which interactions may not take place in the MP HLR  of FIG. .","A flowchart and timing diagram showing GSM registration in native mode is shown in FIG. . The native mode of a communication device is typically the same as the protocol type of the service center, message center, VMS, or GMSC associated with the communication device. In single-mode HLRs, the native mode is often the same as the protocol type of the HLR or home agent associated with the communication device. Foreign modes are modes that are not the native mode. A location update request is relayed from a mobile station to a GSM VMSC. The update location, including MSC number, VLR number, and MSC ID is relayed to the GSM HLR  of the MP HLR . The GSM HLR stores the MSC number and VLR number and sends an insert subscriber data message to the GSM GMSC, which sends an ACK to the GSM HLR .","The GSM HLR  determines whether the mobile subscriber is a dual mode subscriber. When the mobile is not a dual mode subscriber, normal GSM processing is provided. When the mobile is a dual-mode mobile, the previous and new VMSC type of GSM is stored at the GSM HLR. An update location primitive (internal message) including an MSC type equal to GSM is sent to the mediation device, which converts the update location message to a registration notification message with an MSC type of GSM and relays that message to the ANSI HLR . The ANSI HLR stores the new VMSC type and the previous VMSC type and sends an ACK with no profile to the mediation device. A profile need not be sent because the mediation device has access to the profile information, thereby saving time and bandwidth by not sending the profile between the devices of the MP HLR . This ACK is relayed to the GSM HLR .","Upon receipt of the ACK, the GSM HLR  determines if the previous VMSC type is of the HLR's type, i.e., GSM. If the previous VMSC type is GSM, a Cancel Location message is sent from the GSM HLR  to the previous GSM MSC, which deletes its VLR for the mobile . Optionally, if the previous VMSC type is ANSI and the native mode of the MS is not ANSI, the process is completed, but if the previous type is ANSI and the native mode is also ANSI, a cancel location request is sent from the GSM HLR  to the mediation device , which converts the cancel location to a registration cancellation that is sent to the previous ANSI MSC, which deletes its VLR for the mobile . The ANSI HLR also determines if a previous VMSC type is ANSI. If the previous VMSC type is not ANSI, the process is done, otherwise an ANSI registration cancellation is sent from the ANSI HLR  to the previous ANSI MSC, and the process is complete.","A flowchart and timing diagram showing ANSI registration in native mode is shown in  registration request with an Electronic Serial Number (ESN) and Mobile Identification Number (MIN) is sent to an ANSI-136 GMSC, which sends an authentication request to the ANSI HLR  of the MP HLR . An ACK is sent back to the ANSI GMSC, which sends a registration notification including the ESN, MIN, and MSC ID to the ANSI HLR . The ANSI HLR stores the new MSC ID and sends an ACK with a profile to the GMSC. The ANSI HLR  determines whether the mobile is dual mode. When the mobile is not dual mode, normal ANSI processing for the registration takes place, otherwise the ANSI HLR  stores a new VMSC type equal to ANSI plus the previous MSC type. The ANSI HLR sends a registration notification with an MSC type of ANSI to the mediation device , which converts the registration notification to an update location message with an MSC type of ANSI to the GSM HLR for processing. The GSM HLR  stores the new VMSC type and the previous MSC type and sends an ACK without a profile ACK to the mediation device, which relays the ACK to the ANSI HLR . The GSM HLR determines whether the previous VMSC type is of its type, i.e., GSM. If the previous VMSC type is not GSM, the process is complete, but if the previous VMSC type is GSM, a cancel location message is sent to the previous GSM MSC from the GSM HLR . The ANSI HLR determines if the previous VMSC type is ANSI, and if so, sends a registration cancellation message to the previous ANSI MSC. Optionally, when the previous VMSC type is GSM and if mobile is in its native mode, there is no further processing, but if the mobile's native mode is GSM, the ANSI HLR  sends a registration cancellation to the mediation device , which converts the registration cancellation to a cancel location request that is sent to the previous GSM MSC, and the process ends.","A flowchart and timing diagram showing call delivery originated in GSM and terminated in ANSI is shown in FIG. . An IAM including a called party number (PN) is sent to a GSM GMSC, which sends routing information to the GSM HLR  of the MP HLR . The GSM HLR  determines the VMSC type for the called party. When the type is GSM, normal GSM termination is provided. When the type is not GSM, the GSM HLR relays a provide roaming number messages with the GMSC address and type to the mediation device . The mediation device  stores the GMSC address and type, converts the provide roaming number message to a location request with the GMSC ID equal to the mediation device (MD), and sends the message to the ANSI HLR .","The ANSI HLR sends a route request message to the ANSI VMSC with an MSC ID of MD indicating the mediation device . The ANSI VMSC sends an ACK including a TLDN or busy ACK to the ANSI HLR , which relays an ACK with a TLDN, absent, or busy to the mediation device . A PRN ACK with an MSRN, absent, or busy is relayed to the GSM HLR, which generates a SRI ACK including the MSRN or FTN and the IAM with the MSRN is relayed from the GSM GMSC to the ANSI VMSC processing to the mobile station. In this example, a late call forwarding invocation by the MS prevents the call from being completed from the ANSI VMSC. In one embodiment, a redirection request including a redirection reason is relayed from the ANSI VMSC to the mediation device, which queries the GSM HLR for the FTN (Forward To Number). A resume call handling message including the FTN and forwarding reason is sent to the GSM GMSC, which sends an ACK to the mediation device, which sends an ACK to the ANSI VMSC, and the IAM with the FTN is sent to the FTN VMSC. This method is advantageous because, by granting the mediation device  access to the FTN, processing for call forwarded communications takes place at the originating GMSC, which saves trunking resources. Alternatively, the redirection reason may be relayed to the mediation device , which rejects the redirection request, causing a TRANUM (Transfer Number) request with a busy to be sent to the ANSI HLR. The ANSI HLR sends an ACK to the ANSI VMSC with the FFN, and the ANSI VMSC relays the IAM message with the FTN to the FTN VMSC. This method is advantageous because processing for call forwarded communications takes place between the MP HLR , and in particular the mediation device , and the terminating mobile switching center without having to involve the originating MSC, which may not have the ability to process a Resume Call Handling (RCH).","A flowchart and timing diagram showing call delivery originated in ANSI and terminated in GSM is shown in FIG. . An IAM is relayed to an ANSI GMSC, which sends a location request to the ANSI HLR . The ANSI HLR  determines whether the VMSC type is ANSI or GSM. When the type is ANSI, normal ANSI termination is provided. When the type is GSM, a route request including the GMSC address and type is relayed to the mediation device . The mediation device  stores the GMSC address (which is useful for optimal routing for late call forwarding) and the GMSC type (which is useful for Intelligent Networking (IN) interaction), and sends an SRI to the GSM HLR . The GSM HLR  issues a PRN including a GMSC address equal to the MD and sends it to the GSM VMSC, which relays an ACK with the MSRN to the GSM HLR , which relays the ACK with MSRN to the mediation device . The mediation device converts the ACK with an MSRN to an ACK with a TLDN that is relayed to the ANSI HLR  and to the ANSI GMSC, which relays the IAM with the TLDN to the terminating GSM VMSC. In this example, a late call forwarding invocation by the MS prevents the call from being completed from the ANSI VMSC. The GSM VMSC sends an RCH (Resume Call Handling) including an FTN and forwarding reason to the mediation device  that converts the RCH to a redirection request including a redirection reason that is relayed to the ANSI GMSC, which requests a forward-to number from the ANSI HLR by sending a TRANUM request, and receives the FTN in the response, acknowledges the redirection request to the Mediation Device, and sends the IAM to the FTN VMSC. The MD acknowledges the RCH, and the process ends. This method is advantageous because, by granting the mediation device  access to the FTN, processing for call forwarded communications takes place between the MP HLR , and in particular the mediation device , and the originating gateway mobile switching center without having to involve an extra trunk between the originating MSC and the terminating MSC.","A block diagram with a signal flow for a GSM terminated call with terminating prepaid triggers, as known in the art, is shown in  first mobile MS elects to communicate with a second mobile MS that is a prepaid mobile user. In this example, the GSM GMSC  exchanges information with the GSM HLR , which communicates with the GSM SCP  to verify service for the particular user. Once the service is verified by the SCP , the HLR  proceeds with call handling through the GSM MSC\/VLR, where the call is terminated with the second mobile .","A block diagram with a signal flow for a GSM foreign mode terminated call utilizing an MP HLR is shown in FIG. . For prepaid users, ANSI systems communicate with an SCP at the terminating MSC, whereas GSM systems communicate with an SCP at the (originating) GMSC. In the example shown, the first mobile  originates a call to a second mobile that utilizes prepaid service. The called party number (CD PN) is relayed to the ANSI GMSC , and a location request is relayed to the MP HLR . Because the MP HLR  knows the GMSC is ANSI, the VMSC is GSM, and the native mode of the mobile  is ANSI, the MP HLR  directs the call through the ANSI GMSC  to one of either the coupled terminating GSM VMSC\/GMSC ,  or a GMSC of the same protocol type as the VMSC, where normal GSM prepaid termination for the call takes place between the VMSC\/GMSC \/, the MP HLR , and GSM SCP . Directing the call to the GMSC coupled with the VMSC has the advantage of saving trunking resources. When the mediation device directs a call to a destination GMSC, the mediation device is able to send a called party number that may be different than the original called party number. The receiving GMSC must, however, recognize the called party number (which may include one of either a prefix followed by the original called party number or a different number). Directing the call to the GMSC of the same protocol type as the VMSC has the advantage that this GMSC may be in the same network as the ANSI GMSC  and is thus able to recognize one of either a prefix followed by the original called party number or a different number. Similarly (see , , and ), when the mediation device  directs a Short Message to an SMSC\/MC, the mediation device is able to both recognize and generate a called party number that may be different than the original called party number. The SMSC\/MC and VMS must, however, recognize the called party number (which may include one of either a prefix followed by the original called party number or a different number).","A block diagram with a signal flow for an ANSI foreign mode terminated call utilizing an MP HLR is shown in FIG. . In this situation, the first mobile  originates a call, utilizing prepaid service, to a second mobile . An IAM is received at an ANSI MSC , which sends the IAM message to a GSM GMSC  that queries the database . The call is set up between the GSM GMSC , MP HLR , and GSM SCP (that determines payment authorization), and the GMSC  relays the IAM with the MSRN to the ANSI MSC that terminates the call with the second mobile .","A block diagram with a signal flow for mobile originated prepaid calls is shown in FIG. . In the event that there is no combined SCP, the mobile is able to have multiple SCPs (one per each protocol) and communication between the SCPs is optional. In these cases, mobile originating prepaid service is utilized. For mobile terminated prepaid calls, the MP HLR  relays the call to the appropriate GMSC or ANSI terminating MSC which communicates with the appropriate SCP, as shown in . In these cases, mobile terminating prepaid service is utilized.","A block diagram with a signal flow for mobile terminated prepaid call with GSM termination is shown in  for one of either native or foreign mode. In this example, operations with the MP HLR are shown for the case when the MP HLR  of  is utilized. When the terminating mobile operates in foreign mode compared to the originating MSC, the process (a) through (d) goes through the ANSI originating MSC  through the ANSI HLR  in the MP HLR , which routes the call ACK through the originating MSC  and to the GSM GMSC  for completion of processing via signal flow (1) through (11). When the mobile operates in its native GSM mode, the process originates (1) at the GSM GMSC . The call proceeds through set-up between the GSM GMSC  and the GSM HLR , which authorizes service through the GSM SCP , and the call is terminated by the GSM MSC  to the second mobile .","A block diagram of the signal flow for mobile terminated prepaid call with an ANSI termination is shown in  for one of either native or foreign mode. When the terminating mobile operates in foreign mode compared to the originating MSC, the call process (a) through (d) goes through the GSM GMSC  through the GSM HLR  and back through the GSM GMSC  to the ANSI originating MSC  for completion of processing via signal flow (1) through (9). When the mobile operates in its native mode, the process begins (1) at the ANSI originating MSC . The ANSI originating MSC  sends a location request to the ANSI HLR , which sends a route request to the terminating ANSI MSC and the call flow proceeds as a normal ANSI originated and terminated call for a prepaid user.","A block diagram with a signal flow for a mobile originated SMS is shown in  mobile originates SMS at its native MSC, which operates with the native protocol MC (Message Center), also known as a Service Center (SC) or an SMSC (Short Messaging Service Center), and terminates the service with a terminating MC  or  for that particular protocol. If the message terminates in a different protocol, a medication device acting as an IIF (Interworking and Interoperability Function) is used to convert the message to the other protocol, which converted message is relayed to the terminating message center  or .","A block diagram with a signal flow for a mobile terminated SMS using an MP HLR is shown in FIG.  and FIG. . In the example of , an ANSI native mode SMS message, is terminated in GSM foreign mode. The message is relayed to the ANSI HLR, which provides the mediation device  as MSC ID to the ANSI message center (MC) , which works with the mediation device  to generate an FSM (Forward Short Message) that is sent to the GSM MC . The GSM GMSC\/MC works with the GSM HLR  to relay the message to the GSM MSC , which sends the message to the target mobile . In the example of , a GSM native mode SMS message is terminated in ANSI foreign mode. The message is relayed to the GSM HLR, which provides the mediation device  as MSC ID to the GSM MC, which works with the mediation device  to generate an SMDPP (Short Message Direct Point to Point) that is sent to the ANSI MC. The ANSI MC works with the ANSI HLR to relay the message to the ANSI MSC, which sends the message to the target mobile .","A block diagram with a signal flow for an ANSI VMS (Voice Message System) Message Waiting Notification procedure. The MP HLR  generates a GSM mobile terminated SMS utilizing an MP HLR, in particular a mediation device, for an ANSI native mode terminating in GSM native mode is shown in FIG. . The ANSI VMS  sends an MWN (Message Waiting Notification) to an ANSI HLR, which communicates with the mediation device  to send an FSM to the GSM MC , that operates with the GSM HLR to relay the message to the appropriate GSM MSC  or GSM SGSN  for termination with the appropriate mobile  or . In the situations shown in FIG.  and , the MP HLR  knows the terminating MSC type, and is thus able to immediately direct the call to the appropriate message centers, thereby avoiding excess translation of messages through the MD . The GSM MC and\/or ANSI MC functionality may be co-located within the MP HLR .","A block diagram with a signal flow for mobile originated and terminated SMS is shown in FIG. . An SMS message from an MS  to the GSM MSC  is routed to the GSM MC , regardless of the native mode of the Called Party. The GSM MC  routes the SMS message to the appropriate MC for termination, which is an ANSI MC  in this case. The ANSI MC  relays an FSM to the MD , which converts or translates the message to the desired protocol, e.g., from GSM to ANSI, and returns the MD address with the converted message. The ANSI MC  sends an SRI (with the MD address) to the ANSI HLR , which relays the message to the MD , which effectuates, for example via SMDPP or GHOST (GSM HOsted SMS Teleservice), termination from the ANSI MSC  to the end mobile . Utilizing the MP HLR  in this manner maximizes SMS conversion to one conversion for any call, no matter what the native protocol, originating protocol, or terminating protocol is.","With the MP HLR solution, the called party may have two MCs, one GSM and one ANSI. The VMSC routes the originating SMS message to the MC of its same protocol type, regardless of the subscriber's native mode. Whenever possible the originating MC routes to the called party's MC of the same protocol type. When the called party is not a dual mode subscriber, the call is routed to a mediation device  for protocol conversion to its native mode. Likewise, if the dual mode called party is operating in foreign mode, the foreign mode MC sends the SMS message to an MD for protocol conversion to the terminating MSC.","An MP HLR  is more efficient than an Interoperability Interworking Function (IIF) for a number of reasons. No mapping is required for profile information and less external network signaling is required for cross-technology registration because messages may be sent directly to the MP HLR . Call termination is more optimal because the originating MSC may query an HLR of the terminating technology through the mediation device, without having to route the call to the home network. Optimal routing, particularly for late call forwarding, reduces international trunking in MP HLR  applications. SMS conversions are maximized at one, regardless of the originating or terminating user's protocol with the MP HLR . Although ANSI systems communicate with an SCP at the terminating MSC, and GSM systems communicate with an SCP at the (originating) GMSC, the MP HLR  provides for termination triggers for ANSI subscribers operating in GSM foreign mode.","The present invention provides a single HLR that supports multiple protocols of various types, including wireless and\/or wireline and voice, data, and\/or multimedia. The MP HLR replaces HLRs, home agents, and foreign agents for a number of network protocols. The MP HLR performs mobility\/user location management, user authentication\/security control, and user profile management functions for various different network protocols. These functions are required in traditional cellular networks, 3generation wireless voice and data networks, and the internet, and have been previously deployed over separate functional entities. The MP HLR  embodies these functions of different entities in one entity by supporting multiple standard protocol interfaces. With multiple-protocol support, the MP HLR  promotes seamless evolution from today's first generation and second generation wireless networks based on a single HLR supporting a single network protocol to next generation wireless networks based on an HLR\/IP server complex to future all-IP based wireless networks. The MP HLR  is advantageous in environments where users subscribe to more than one wireless and\/or wireline service and enables seamless roaming of a multi-mode phone between different networks, e.g., between GSM and TDMA. A unified HLR provides cost reduction benefits to the service provider, such as savings gained from synchronizing and updating one HLR instead of many HLRs.","Additionally, the MP HLR  knows one of either the Gateway MSC or originating MSC type as well as the visiting MSC type. This knowledge allows the MP HLR  to direct the call to a Gateway MSC of the same type as the visiting MSC. Additionally, because the MP HLR  knows the true MSC on which the subscriber is registered, the MP HLR  may perform normal protocol procedures, e.g., call barring, call forwarding interactions with outgoing call barring, normal HLR restoration procedures, and regional zone subscription. The MP HLR  is able to offer a wider variety of services to multi-mode subscribers than just those that may be interworked. The subscriber is able to obtain true services according to whatever protocol the subscriber is currently registered.","The present invention may be embodied in other specific forms without departing from its spirit or essential characteristics. The described embodiments are to be considered in all respects only as illustrative and not restrictive. The scope of the invention is, therefore, indicated by the appended claims rather than by the foregoing description. All changes that come within the meaning and range of equivalency of the claims are to be embraced within their scope.",{"@attributes":{"id":"p-0078","num":"0077"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"84pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"84pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"49pt","align":"left"}}],"thead":{"row":[{"entry":"TABLE 1"},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}},{"entry":["MP HLR COMMON",{},{}]},{"entry":["OPERATION","ANSI-41\/ANSI-136","GSM"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Register Terminal","Registration Notification","Update"]},{"entry":[{},{},"Location"]},{"entry":["Deregister Terminal","MS Inactive","Purge MS"]},{"entry":["Request Location","SMS Request","Send Routing"]},{"entry":[{},{},"Info for"]},{"entry":[{},{},"GPRS\/SM"]},{"entry":["Request Location","Location Request","Send Routing"]},{"entry":[{},{},"Info."]},{"entry":["Perform DB Operation","Feature Request","Register SS"]},{"entry":[{},{},"Erase SS"]},{"entry":[{},{},"Active SS"]},{"entry":[{},{},"Deactive SS"]},{"entry":[{},{},"Interrogate SS"]},{"entry":[{},{},"Register"]},{"entry":[{},{},"Password"]},{"entry":["Cancel Terminal Regis.","Registration Cancellation","Cancel"]},{"entry":[{},{},"Location"]},{"entry":["Retrieve Profile","Qualification Directive","Insert Sub-"]},{"entry":[{},{},"scriber Data"]},{"entry":["Insert Profile","Qualification Directive","Delete Sub-"]},{"entry":[{},{},"scriber Data"]},{"entry":["Request Route Info.","Route Request","Provide Roam-"]},{"entry":[{},{},"ing Number"]},{"entry":["Notify Events","OAM","OAM"]},{"entry":["Report Terminal Status","(Registration Notification)","Ready for SM"]},{"entry":[{},{},"Report SM"]},{"entry":[{},{},"Delivery Status"]},{"entry":[{},{},"Failure Report"]},{"entry":["Notify Terminal Status","SMS Notification","Note MS"]},{"entry":["Change",{},"GPRS Present"]},{"entry":[{},{},"Alert Service"]},{"entry":[{},{},"Center"]},{"entry":["Obtain Authorization Info.","Authorization Request","Send Authen-"]},{"entry":[{},"Authorization Directive","tication"]},{"entry":[{},{},"Information"]},{"entry":["Verify Authorization Info.","Authorization Request"]},{"entry":["Challenge","BS Challenge"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}}}},"TABLE 2 comprises a list of acronyms utilized in the above description.",{"@attributes":{"id":"p-0080","num":"0079"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"182pt","align":"left"}}],"thead":{"row":[{"entry":"TABLE 2"},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["AAA","Authentication, Authorization, and Accounting"]},{"entry":["ACK","Acknowledgment"]},{"entry":["AG","Application Gateway"]},{"entry":["API","Application Programming Interface"]},{"entry":["ATI","Any Time Interrogation"]},{"entry":["BOIC","Barring of Outgoing International Calls"]},{"entry":["BSS","Base Station System"]},{"entry":["CAMEL","Customized Application for Mobile Network Enhanced Logic"]},{"entry":["CDMA","Code Division Multiple Access"]},{"entry":["CF","Call Forwarding"]},{"entry":["CFB","Call Forward Busy"]},{"entry":["CFNRG","Call Forwarding on Mobile Subscriber Not Reachable"]},{"entry":["CONT","Continue"]},{"entry":["EDGE","Enhanced Data Rates for GPRS Evolution"]},{"entry":["FTN","Forward to Number"]},{"entry":["GGSN","Gateway GPRS Service Node"]},{"entry":["GMSC","Gateway Mobile Switching Center"]},{"entry":["GPRS","General Packet (Data) Radio Service"]},{"entry":["GSM","Group Special Mobile\/Global System for Mobile"]},{"entry":[{},"Communications"]},{"entry":["HDR","High Data Rate"]},{"entry":["HLR","Home Location Register"]},{"entry":["IAM","Initial Address Message"]},{"entry":["IN","Intelligent Networking"]},{"entry":["InitDP","Initial Detection Point"]},{"entry":["IP","Internet Protocol"]},{"entry":["LOC\/ST","Location\/State"]},{"entry":["MC","Message Center"]},{"entry":["MD","Mediation Device"]},{"entry":["M-IP","Mobile IP"]},{"entry":["MP HLR","Multiple-Protocol Home Location Register"]},{"entry":["MS","Mobile Station"]},{"entry":["MSC","Mobile Switching Center"]},{"entry":["MSRN","Mobile Subscribing Roaming Number"]},{"entry":"OAM"},{"entry":["PG","Protocol Gateway"]},{"entry":["PN","Party Number"]},{"entry":["PRN","Provide Roaming Number"]},{"entry":["PSI","Provide Subscriber Information"]},{"entry":["PSTN","Public Switch Telephone Network"]},{"entry":["RCH","Resume Call Handling"]},{"entry":["SC","Service Center"]},{"entry":["SCP","Service Control Point"]},{"entry":["SGSN","Serving GPRS Service Node"]},{"entry":["SIP","Session Initiation Protocol"]},{"entry":["SMSC","Short Message Service Center"]},{"entry":["SPA","Service Package Application"]},{"entry":["SRI","Send Routing Information"]},{"entry":["SS7","Standard Signaling System 7"]},{"entry":["TDMA","Time Division Multiple Access"]},{"entry":["TLDN","Temporary Location Directory Number"]},{"entry":["UMTS","Universal Mobile Telecommunications System"]},{"entry":["VLR","Visitor Location Register"]},{"entry":["VMS","Voice Message System"]},{"entry":["VMSC","Visited Mobile Switching Center"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}}],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 12"},"FIG.  and  each show a block diagram with a signal flow for a mobile terminated prepaid call utilizing a MP HLR in accordance with the invention.",{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":["FIG. 16","FIG. 17","FIG. 18"]},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 19"}]},"DETDESC":[{},{}]}
