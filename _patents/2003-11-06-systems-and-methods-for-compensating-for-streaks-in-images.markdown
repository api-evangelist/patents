---
title: Systems and methods for compensating for streaks in images
abstract: Defects in an image forming system may give rise to visible streaks, or one-dimensional defects in an image that run parallel to the process direction. One known method for compensating for streaks introduces a separate tone reproduction curve for each pixel column in the process direction. A compensation pattern according to this invention has a plurality of halftone regions that are lead by, trained by, and separated by rows of fiducial marks. The fiducial marks allow the printer pixel grid and a scanning pixel grid to be correlated. The gray level in each pixel column of each gray level portion is measured and analyzed to produce a local tone reproduction curve for each pixel column and associated line width. The local tone reproduction curves are then used to compensate for the streak defect when printing.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07095531&OS=07095531&RS=07095531
owner: Xerox Corporation
number: 07095531
owner_city: Stamford
owner_country: US
publication_date: 20031106
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF EXEMPLARY EMBODIMENTS"],"p":["1. Field of Invention","This invention relates to systems and methods for reducing print defects in images.","2. Description of Related Art","Defects in the subsystems of a xerographic, electrophotographic or similar image forming system, such as a laser printer, digital copier or the like, may give rise to visible streaks in a printed image. Streaks are primarily one-dimensional defects in an image that run parallel to the process direction. Typical defects might arise from a non-uniform LED imager, contamination of the high voltage elements in a charger, scratches in the photoreceptor surface, etc. In a uniform patch of gray, streaks and bands may appear as a variation in the gray level. In general, \u201cgray\u201d refers to the intensity value of any single color separation layer, whether the toner is black, cyan, magenta, yellow or some other color.","One method of reducing such streaks is to design and manufacture the critical parameters of the marking engine subsystems to tight specifications. Often though, such precision manufacturing will prove to be cost prohibitive.","A tone reproduction curve (TRC) may be measured by printing patches of different bitmap area coverage. In some digital image processing applications, the reflectivity of a patch of gray is measured with a toner area coverage sensor. The manner of operation of the toner area coverage sensor is described in U.S. Pat. No. 4,553,033, which is incorporated herein by reference in its entirety. Toner area coverage sensors are typically designed with an illumination beam much larger than the halftone screen dimension. This large beam does not provide the resolution for the toner area coverage sensor to be useful as a sensor for the narrow streaks that may occur for poorly performing subsystems.","U.S. Pat. No. 6,760,056 by Klassen et al, incorporated herein by reference in its entirety, discloses one exemplary embodiment of a method for compensating for streaks by introducing a separate tone reproduction curve for each pixel column in the process direction. A compensation pattern is printed and then scanned to first measure the ideal tone reproduction curve and then detect and measure streaks. The tone reproduction curves for the pixel columns associated with the streak are then modified to compensate for the streak.","In implementing the methods and systems of the 573 patent application, the inventors of this invention discovered additional problems that needed to be solved before the streaks could be acceptably compensated for. For example, for very narrow streaks, any misalignment greater than half a pixel between a scanner pixel grid used to measure the compensation pattern and the pixel grid of the image forming device that printed the compensation pattern prevents proper compensation of the streak. Additionally, properly adjusting of the tone reproduction curve requires a greater gray level resolution in halftone intensity than is often available. Furthermore, noise in the scanning and printing process makes is difficult to adequately calibrate the streak defects in a single compensation process.","This invention provides systems and methods that compensate for the pixel misalignment.","This invention separately provides a compensation pattern and associated compensation analysis systems and methods that use a plurality of halftone regions separated by sets of alignment or fiducial marks.","This invention separately provides a compensation pattern and associated compensation analysis systems and methods that use a plurality of single halftone value halftone regions.","This invention separately provides systems and methods for generating a plurality of local tone reproduction curves based on a plurality of distinct halftone regions.","This invention separately provides systems and methods that determine a relationship between an ideal or desired tone reproduction curve and an actual tone reproduction curve for at least some pixel locations across the process direction.","This invention separately provides systems and methods that compensate for the departure of the actual tone reproduction curve from an ideal tone reproduction curve for at least some pixel locations across the process direction.","This invention separately provides systems and methods that provide tone reproduction curve compensation at a resolution greater than the halftone gray level resolution by dithering between available halftone levels.","This invention separately provides systems and methods that reduce the effects of scanner noise on the compensation process.","This invention separately provides systems and methods that iteratively measure the actual tone reproduction curve and the magnitude of the streak defects, while incrementally applying compensation to the tone reproduction curves of at least some pixel locations across the process direction.","This invention separately provides a compensation pattern that has fiducial marks before and after each halftone test region.","In various exemplary embodiments, the systems and methods according to this invention, a compensation pattern, that has a plurality of halftone regions separated by sets of alignment or fiducial marks, is printed by the printing system and then scanned on a flatbed scanner. The fiducial marks provide alignment between the printer pixel grid and the scanner pixel grid. Each pixel column in each halftone region is identified using the fiducial marks. The gray level in each pixel column of each halftone region is measured. Then, the measured gray levels are aligned and interpolated to produce a local tone reproduction curve for each pixel column. The local tone reproduction curves are then used to compensate for the streak defect when printing.","In various exemplary embodiments, the systems and methods according to this invention reduce noise effects encountered during measurement by repeatedly measuring the compensation required and averaging out the noise. This is done by incrementally applying a fraction of the necessary compensation determined by the local tone reproduction curves, then reprinting and scanning the compensation pattern. The process is iterated until the additional compensation required is negligible.","In various exemplary embodiments, the systems and methods according to this invention interpolate the required printed compensation between available gray level resolutions of the printer. The actual printed halftones in a pixel column are alternated between higher and lower gray levels available given the printer resolution. The resulting average printed gray level of the pixel column is the gray level required to compensate acceptably for the streak defect.","In various exemplary embodiments, the systems and methods according to this invention apply the compensation for color printers to each individual color separation layer individually.","These and other features and advantages of this invention are described in, or are apparent from, the following detailed description of various exemplary embodiments of the systems and methods according to this invention.","The compensation technique described herein can be applied to both color and monochrome image forming devices. For monochrome image forming devices, the technique is as described below. Color monochrome image forming devices operate by overlaying different color separation layers. Each color separation layer is individually compensated for using the techniques described herein. As used herein, the term \u201cgray\u201d indicates the amount of coverage of material between zero and 100% density on the printed surface, although in general this material may be colored.","An input gray level is typically an integer between 0 and 255 that is sent to the marking engine from a computer, an input scanner or other image data source. An actual gray level is the response of a sensor measuring the gray level of the printed image. The actual gray level can be a function of distance in the cross-process direction. The desired gray level is defined as the response of the sensor to what the marking engine was designed to print. The desired gray level is independent of position for a uniform gray strip, and, for example, can be the average of all the actual gray levels. The desired gray level can also be a target value that the marking engine is designed to print.","The desired gray level, as a function of the input gray level, defines an intended tone reproduction curve. The actual gray level as a function of the input gray level defines a local tone reproduction curve. A local reproduction curve exists for each pixel location in the printed image in the cross-process direction. Thus, for example, a 600-spi printer that is 11 inches wide would have one desired tone reproduction curve and 6600 (600\u00d711) local tone reproduction curves, one for each of the 6600 different pixel locations.",{"@attributes":{"id":"p-0039","num":"0038"},"figref":["FIG. 1","FIG. 1","FIG. 1"],"b":["110","120"]},"In various exemplary embodiments, the systems and methods according to this invention compensate for streaks or improper toner density regions that run the length of the process direction and have a constant lighter or darker intensity than adjacent regions of the same intended intensity.",{"@attributes":{"id":"p-0041","num":"0040"},"figref":"FIG. 2","b":["210","220"]},"That is,  shows a typical plot of the actual gray level for one local tone reproduction curve . If the printer response at this pixel were accurate, the plot of the actual gray level would match the plot of the ideal or intended tone reproduction curve  at all positions. Deviations of this local tone reproduction curve  from the ideal or intended tone reproduction curve  quantify the degree of streaking at all gray levels. Based on the ideal tone reproduction curve , if an image portion having a gray level output of 40 is desired, under ideal conditions, to obtain the desired gray level output, a xerographic or electrographic image forming system would need to print that image portion at a gray level of 117. Based on the actual tone reproduction curve , if the image portion having a gray level output of 40 is desired, to obtain the desired gray level output at this pixel location, the xerographic or electrographic image forming system would need to print that image portion at a gray level of 97. That is, the image data defining that image portion should be changed to instruct the xerographic or electrographic image forming system to print that image portion at a gray level of 97 at that pixel location. In practice, some parameterization of the two tone reproduction curves  and  shown in  are stored in memory and are used to modify the gray level defined by the image data for any gray level for this pixel location to achieve the desired gray level in the printed image portion.","In various exemplary embodiments, to compensate for the streak defects, the input gray level is changed using different local tone reproduction curves, where one local tone reproduction curve exists for each pixel in the cross-process direction, so that the actual gray level matches the desired gray level at every pixel location. This requires the ability to accurately determine the actual gray level at every pixel location in the cross-process direction. Spatial non-uniformities in a sensor may cause a discrepancy between the pixel location where the sensor measuring system or image forming system thinks the image is being measured at and the pixel location where the measurement is actually occurring. If this error occurs, then the compensation will be applied to the wrong pixel location. As a result, narrow streaks, such as the one illustrated in , will not be properly compensated for.","In the example shown in , to achieve a constant luminosity of 40, the input gray level value for the pixel column experiencing the streak defect must be raised to a value  from the value  determined using the ideal tone reproduction curve. In the methods and systems of the 573 patent, the input gray level is adjusted for each pixel by multiplying the input gray level for that pixel by a compensation parameter that is selected depending on the pixel location and the input level. The ideal tone reproduction curve is then applied to the compensated input image or gray level value to convert from the input gray level value to the printer dependant gray level value.",{"@attributes":{"id":"p-0045","num":"0044"},"figref":["FIG. 3","FIG. 4","FIG. 3","FIG. 4"],"b":["321","311","318","321","311","315","317","318","316"]},{"@attributes":{"id":"p-0046","num":"0045"},"figref":["FIG. 3","FIG. 3"],"b":["331","316","331","341","316","316","331"]},"When the compensated input gray level curve  is sampled at the printer pixel column positions, the appropriately aligned compensated halftone density curve  also shows the different density in, or intensity values for, the pixel column . When the halftone density curve  is used in the printing process, the output density curve  has the desired constant density for all of the pixel columns \u2013.",{"@attributes":{"id":"p-0048","num":"0047"},"figref":["FIG. 4","FIG. 4"],"b":["332","332","315","316","342","332","342","315","316","332","316","321"]},"When the input gray level curve  is sampled at the printer pixel column positions \u2013, using linear interpolation between the discrete pixels, the misaligned compensated halftone density curve  indicates that a density of half the density needed to appropriately compensate for the streak defect, and that the compensation needs to be applied to both of the pixel columns  and . When the resulting halftone density curve  is used in the printing process, the output density curve  for the pixel column  is over, or unnecessarily, compensated and is under compensated for the pixel column . While the original streaking shown in the actual printed toner density values  has been modified, detectable streaking may still be seen in the output density values .",{"@attributes":{"id":"p-0050","num":"0049"},"figref":["FIG. 5","FIG. 5"],"b":["412","418","420","430","431","432","433","412","418","412","418","412","418","412","418"]},"The number of halftone strips \u2013 desired in a compensation pattern should be large enough to finely sample the tone reproduction curve. Four halftone strips \u2013 are shown in . However, it should be appreciated that any number of halftone strips can be used. For example, in one exemplary embodiment, 32 strips were used to successfully implement the streak defect compensation process according to this invention. The halftone strips \u2013 extend sufficiently along the process direction  to allow for a sufficiently accurate estimate of the gray level in each pixel column and to average out any noise that occurs when forming and\/or scanning the halftone strips \u2013. It should be appreciated that any design trading streak defect compensation performance against the cost of compensation pattern size and\/or the cost of analyzing the scanned compensation pattern, by using differing numbers and lengths of halftone strips \u2013, is within the scope of this invention.","When each pixel column in a given halftone strip \u2013 is averaged over its length in the process direction , the periodicity of the halftone in the cross-process direction will appear in the cross section of the pixel columns. The amplitude of this cross-process halftone repeat is reduced if the length of the halftone strips \u2013 in the process direction is also an integer multiple of the halftone periodicity in the process direction.","The edge locator lines  are used to identify the lateral boundaries or sides of each compensation strip \u2013. Alternatively, the lateral boundaries of the compensation strips can be found with reference to the fiducial marks . The fiducial marks  are used to align the scanning coordinates of the pixel columns to the coordinates of the pixel columns in the printed image, i.e., associate a scanner pixel location along the cross-process direction with the corresponding cross-process-direction image-forming device pixel location. If the fiducial marks  are single-pixel lines, the centroids of those single-pixel lines will give the location of those image forming device pixels in scanning coordinates. If the fiducial marks  are two-pixel lines, the centroids of those lines will give the location of the midpoints between those image forming device pixels in the scanning coordinates. If the fiducial marks  are 3 or more pixels wide, the centroid of the fiducial mark  will give the digital center of the group of pixels composing that fiducial mark .","In the exemplary embodiment shown in , a first set of fiducial marks is provided before the first compensation strip , one intermediate set of fiducial marks is provided between each pair of adjacent compensation strips \u2013, \u2013, and \u2013, and a last set of fiducial marks is provided after the last compensation strip . However, it should be appreciated that fewer (or even more) sets of fiducial marks can be provided. For example, in various exemplary embodiments, the first and\/or last sets of fiducial marks can be omitted. Similarly, in various other exemplary embodiments, one or more of the intermediate sets of fiducial marks can be omitted. In general, so long as there are sufficient sets of fiducial marks to be able to accurately align the scanning coordinates of the pixel columns to the coordinates of the pixel columns in the printed image and to be able to accurately determine the image value of a given compensation strip for a given scanner pixel location along the cross-process direction, any number of the sets of fiducial marks may be omitted.","In various exemplary embodiments, the centroids of the fiducial marks  are found by finding, for each fiducial mark , a scan pixel with a minimum reflectance about that fiducial mark . In various exemplary embodiments, for each of the fiducial marks , a quadratic fit using the corresponding located scan pixel and two neighboring scan pixels to that scan pixel can be performed. The minimums of each of these quadratic fits are determined to be the centroids of the particular fiducial mark .","If the fiducial marks  are single-pixel lines, the centroids of those single-pixel lines will give the location of those image forming device pixels in scanning coordinates. If the fiducial marks  are two-pixel lines, the centroids of those lines will give the location of the midpoints between those image forming device pixels in the scanning coordinates. Either way, this information provides the conversion between the scanner coordinates and the printer coordinates for the associated scanner pixels and printer pixels, i.e., between the cross-process-direction scanner pixel columns and the cross-process-direction image-forming device pixel locations.","In various exemplary embodiments, the fiducial marks  are placed as closely as possible to the halftone strips \u2013 to maximize alignment accuracy. In various exemplary embodiments, the fiducial marks  are also placed before and after each halftone strip \u2013. Skew in the printing process, motion quality errors, rotation of the printed image on the scanner, and\/or other errors may give a slightly different mapping for each set of fiducial marks . If two different maps are obtained for the fiducial marks  above and below a halftone strip, linear interpolation is used to determine the gray level of each scanner pixel column. The results of this image analysis is a table of Nby N, where Nis the number of different gray level portions or strips of the compensation pattern and Nis the number of scanner pixel locations or columns along the cross-process direction.",{"@attributes":{"id":"p-0058","num":"0057"},"figref":"FIG. 6","sub":["ijk","0jk"]},"As shown in , operation of the method begins in step S, and continues to step S, where the compensation parameters \u0394Gare initialized. It should be noted that the initialized compensation parameters \u0394Ghave no effect on the digital gray image. In other words, the digital gray input values are the same as the digital gray output values. Then, in step S, a compensation test pattern is generated. In general, a compensation test pattern consistent with the description provided above with respect to  is used. Next, in step S, the digital test pattern for the iiteration is halftoned and printed. Operation then continues to step S.","In step S, the printed test pattern is scanned and the local tone reproduction curve is measured. Next, in step S, a determination is made whether sufficient uniformity in the gray level strips of the printed compensation test pattern has been achieved. If not, operation continues to step S. Otherwise, once sufficient uniformity has been achieved, operation jumps to step S. It should be appreciated that, in this exemplary embodiment, the gray level strips become more uniform as the compensation procedure proceeds. In various exemplary embodiments, the uniformity of the gray level strips is defined by one or more metrics. In these exemplary embodiments, based on the values of the metrics, the uniformity of the gray level strips is determined to be sufficient or not. Of course, any desired technique can be used to determine whether the uniformity of the gray level stripe is sufficient.","In step S, the compensation parameters \u0394G are partially updated. The amounts used to update the compensation parameters \u0394Gfor each pixel column j are determined by comparing the local tone reproduction curves for the pixel columns j to the mean tone reproduction curve. The local tone reproduction curves for the pixel columns is the set of points relating the scanner response Rfor the pixel column j to the gray level input k for the pixel column j. Each point in the mean tone reproduction curve is the scanner response averaged over all the pixel columns j for the corresponding gray level k. In some exemplary embodiments, not all gray levels k are printed in the test pattern. In these exemplary embodiments, an interpolation scheme can be used to infer what the printer response would be for a particular gray level that was not actually printed.","If the actual gray level value for a given gray level k in the pixel column j is lighter or darker than the mean value across the entire strip for that given gray level k, then the compensation parameter \u0394G needs to be modified. The local slope of the mean tone reproduction curve is used to estimate how much the digital gray level must be changed, i.e., how much \u0394Dthe value of \u0394Gshould be modified by, to bring the local gray level k for the jpixel column closer to the mean gray level for that given gray level k.","Because of measurement noise, there may be errors in estimating the modification to the value of \u0394G. Therefore, in various exemplary embodiments, to make the technique less sensitive to measurement noise, the compensation parameter \u0394Gis updated by only a fraction f of the full estimated modification \u0394Dneeded to achieve uniformity across each of the halftone or gray level stripe. Specifically, for a next iteration (i+1) of steps S\u2013S, the updated compensation parameters \u0394Gare:\n\n\u0394,\n\nwhere:\n","\u0394Gis the set of compensation parameters for the (i+1)iteration of steps S\u2013S;","\u0394Gis the current set of compensation parameters;","\u0394Dis the current difference between the mean gray level value for each gray level or halftone strip k and the actual gray level value for the jpixel column for the kgray level or halftone strip; and","f is a value between 0.0 and 1.0; i.e., 0.0<f \u22661.0.","It should be appreciated that, in various exemplary embodiments, the current difference \u0394Dcan be used as the metric for determining if there is sufficient uniformity. In these exemplary embodiments, the values for the \u0394Dparameters are initially set to \u221e, so that two iterations are always required. Then, after the first iteration of step S, the \u0394Dparameters are set to actual values. A uniformity metric is obtained from the profile of the \u0394Dparameters. This metric could be as simple as requiring all \u0394Dparameters to be less than some threshold. Alternatively, a more complicated function of the profile that takes into account the human visual response system could be used. If, in step S, the uniformity metric meets the uniformity criterion, sufficient uniformity has been obtained, and operation jumps to step S.","In step S, the compensation parameters \u0394Gare transformed into a table, or are parameterized as a function, so that the compensation values \u0394Gcan be applied in real time when printing grayscale data using the printer. Then, in step S, operation of the method ends.","It should be appreciated that, in general, f can be less than 1.0. In these situations, a number of iterations may be necessary to obtain sufficiently uniform printed compensation test patterns. In various other exemplary embodiments, f can be set to 1.0. This effectively limits the number of iterations to one, since the full compensation parameter values are applied to the next printed compensation test pattern, which should result in sufficient uniformity. It should further be appreciated that, in various exemplary embodiments, steps S and S can be omitted. This also effectively sets f to 1.0. In this iteration, after the compensation parameters \u0394Gare generated in step S and steps S and S are performed once, operation jumps directly from step S to step S. Accordingly, only a single iteration of steps S\u2013S is performed.",{"@attributes":{"id":"p-0071","num":"0070"},"figref":["FIG. 7","FIG. 7"],"b":["500","510","520"]},"It should be appreciated that the captured image obtained by scanning the printed compensation test pattern may not be perfectly oriented to the scanning axes due to rotation of the paper on the scanner platen and\/or rotation of the printed image on the paper. Accordingly, in step S, any rotation of the image relative to the scanning axes is determined using features of the printed compensation test pattern and\/or features of the fiducial marks printed elsewhere on the printed compensation test pattern for this purpose. Any rotation of the image is dealt with by appropriate image processing techniques. Alternatively, the image can be processed based on the measured rotation to identify the features within the image. Operation then continues to step S.","As shown in , the printed compensation test pattern includes some number of sets of fiducial marks and what should be uniform halftone strips. In step S, the physical position of a first or next row of fiducial marks is selected as a current fiducial row. This can be performed using any of a number of conventional techniques. One particular robust technique is to scan, line by line, through the captured image to identify those scan lines that give a strong signal at the period of the spacing between the fiducials. From the location of the fiducial row, the position of any adjacent halftone strips can also be identified. Alternatively, the positions of the adjacent halftone strips can be identified using the edge location marks. Operation then continues to step S.","In step S, the centroid of each fiducial mark in the current row of fiducial marks is determined. In various exemplary embodiments, the centroid is determined by taking a cross-section through the fiducial marks of the current row of fiducial marks, averaging over the length of those fiducial marks. Then, in step S, a profile of the halftone strip that follows the current row of fiducial marks, i.e., the current halftone strip or gray level strip, as a function of position in scanner pixel units along the cross-process direction is generated. Next, in step S, the profile of the current halftone strip or gray level strip is transformed from being defined based on the scanner pixel units to being defined based on digital image pixel units. This transform is performed based on the relationship between the measured centroid positions and the digital image centroid position of the fiducial marks of the current row of fiducial marks. Operation then continues to step S.","In step S, the high frequency structure in the profile of the current halftone strip, or gray level strip, due to the halftone screen is removed. The halftone frequency structure can be removed using any of a variety of known techniques. One technique is to use distributed aperture filtering. In this technique, over short segments of the image, the change in gray level as a function of pixel at the halftone period is calculated and subtracted from the profile. Next, in step S, a determination is made whether all of the halftone or gray level strips have been analyzed. If all of the halftone or gray level strips have been analyzed, operation continues to step S. Otherwise, if not all the halftone or gray level strips have been analyzed, operation returns to step S.","In step S, because a set of N\u00d7Ngray levels have been obtained, where Nis the number of pixel columns in the printed compensation test pattern and Nis the number of strips in the printed compensation test pattern, these gray level values are ordered by column to obtain a set of Nlocal tone reproduction curves, where the local tone reproduction curve has been sampled at Npoints. It should be appreciated that the methods and systems of the 573 patent, or of any other appropriate local tone reproduction curve generating technique, can be used to generate the local tone reproduction curve for each cross-process-direction image-forming device pixel location based on the average gray levels of the halftone strips for cross-process-direction scanner image pixel column and the determined relationship between the cross-process-direction image-forming device pixel locations and the cross-process-direction scanner image pixel columns. Operation then continues to step S, where operation returns to step S.","As outlined above with respect to , some pairs of adjacent compensation strips may not have intervening intermediate sets of fiducial marks. Likewise, the first or last sets of fiducial marks may be omitted. In some such exemplary embodiments, one or more sets of fiducial marks may be associated with two or more compensation strips. In such exemplary embodiments, after a first or next set of fiducial marks is selected in step S, before steps S\u2013S are performed, if the selected set of fiducial marks has two or more compensation strips associated with that selected set of fiducial marks, one of those associated compensation strips is selected as the current compensation strip. Steps S\u2013S are then performed for that current compensation strip. Then, before step S is performed, each other compensation strip associated with the selected set of fiducial marks is selected in turn and steps S\u2013S repeated for that compensation strip.",{"@attributes":{"id":"p-0078","num":"0077"},"figref":["FIG. 8","FIG. 10"],"b":["620","650","660"]},"The actual printed toner density curve  generated from a constant gray level value of 106 is shown in  as a function of the pixel column \u2013. The pixel columns \u2013 show printed densities higher and lower than the input value of 106, indicating streak defects. The compensated input gray level curve  shows the gray level input values needed to generate a constant printed toner density of 106 and is also a function of the pixel column \u2013.","In the image forming system used in the example shown in , the halftone design only supports gray levels of 103, 106 and 109 near the input gray levels of the compensated input gray level curve . When the compensated input gray level curve  is sampled for the halftone process, as shown in the compensated halftone density curve , the compensated input digital gray level curve  is rounded to the levels of 106 and 109. When the compensated halftone density curve  is printed, the compensations do not match the streak defects and residual streak defects are seen in the compensated printed toner density curve .","One exemplary embodiment of a method to compensate for the effects of the limited halftone resolution on the streak defect compensation described above is to dither the halftone value in a pixel column between the two available resolution values nearest to the desired value in the compensated input digital gray level curve . For example, in the dithered halftone density curve , the 66% resolution value  (shown with a gray dot in column ) indicates that the resolution value of 106 is used for two out of every three pixels. Similarly, the 33% resolution value  (shown with a white dot in column ) indicates that the resolution value of 103 is used for the other one out of every three pixels. As a result, the average input intensity value for the pixel column  is 105. When the method shown in  is used, the average printed toner intensity column  is 106, reducing the visible effect of the remaining streak defect due to the halftone resolution.",{"@attributes":{"id":"p-0082","num":"0081"},"figref":["FIG. 9","FIG. 9"],"b":["1000","1100","1200","1300"],"sub":["jk ","jk ","jk "]},"In step S, a determination is made whether dithering is desired to obtain the desired gray level resolution to compensate for the streak defect. It should be appreciated that this determination is based on the number of independent gray levels for the halftone being printed and the image quality requirements of the printer. If dithering is desired, operation proceeds to step S . Otherwise, operation jumps directly to step S. In step S, for each pixel column, the location of the requested gray level between the higher printable gray level and the lower printable gray level is determined. Next, in step S, for each pixel column, the compensated image intensity value is modified to either the higher or lower printable gray level at a probability proportional to the difference between the requested gray level and the higher and lower printable gray levels. Operation then continues to step S.","In step S, the selected scanline is halftoned and the halftone data is stored. Then, in step S, a determination is made whether all scanlines for all color separation layers have been selected. If not, operation returns to step S, where a next scanline of the current color separation layer or a first scanline of a next color separation layer is selected. Otherwise, operation continues to step S, where the stored halftone data is printed. Operation then continues to step S, where operation of the method ends. It should be appreciated that, in some exemplary embodiments, in step S, the halftone data is not stored, but is immediately output to the printer for printing while the next scanline is being analyzed.",{"@attributes":{"id":"p-0085","num":"0084"},"figref":["FIG. 10","FIG. 5","FIG. 10"],"b":["540","550","560","510","520","530","510","520","530","540","550","560"]},{"@attributes":{"id":"p-0086","num":"0085"},"figref":["FIG. 11","FIG. 11"],"b":["700","700","710","720","730","740","750","760","770"]},"As shown in , one or more user input device(s) , a image data source , an image forming device , and a scanner  are connected to the streak defect compensation system  by links , ,  and  respectively.","In general, the image data source  shown in  can be any known or later-developed device that is capable of providing image data to the streak defect compensation system . In general, the image forming device  shown in , can be any known or later-developed device that is capable of printing image data and is susceptible to streak defects that can be compensated for using the streak defect compensation system . In general, the scanner shown in  can be any known or later-developed device that is capable of imaging hardcopy material to produce image data from that hardcopy material that can then be input into the streak defect compensation system .","The image data source , the image forming device , and\/or the scanner  can be integrated with the streak print defect correction system , such as in a general-purpose digital copier. In addition, the streak defect compensation system  may be integrated with devices providing additional functions in addition to the image data source , the image forming device , and\/or the scanner , in a larger system that performs all functions, such as a multi-function printer\/scanner\/copier\/fax.","Each of the respective one or more user input device(s)  may be one or any combination of multiple input devices, such as a keyboard, a mouse, a joy stick, a trackball, a touch pad, a touch screen, a pen-based system, a microphone and associated voice recognition software, or any other known or later-developed device for inputting data and\/or user commands to the streak print defect correction system . It should be understood that the one or more user input device(s) , of  do not need to be the same type of device.","Each of the links , ,  and  connecting the user input device(s) , the image data source , and the image forming device  to the streak print defect correction system  can be a direct cable connection, a modem, a local area network, a wide area network, and intranet, the Internet, any other distributed processing network, or any other known or later developed connection device. It should be appreciated that either of these links , ,  and  may include wired or wireless portions. In general, each of the links , ,  and  can be implemented using any known or later-developed connection system or structure usable to connect the respective devices to the streak print defect correction system . It should be understood that the links , ,  and  do not need to be of the same type.","As shown in , the memory  can be implemented using any appropriate combination of alterable, volatile, or non-volatile memory or non-alterable, or fixed memory. The alterable memory, whether volatile or non-volatile, can be implemented using any one or more of static or dynamic RAM, a floppy disk and disk drive, a writable or rewritable optical disk and disk drive, a hard drive, flash memory or the like. Similarly, the non-alterable or fixed memory can be implemented using any one or more of ROM, PROM, EPROM, EEPROM, and gaps an optical ROM disk, such as a CD-ROM or DVD-ROM disk and disk drive or the like.","Each of the various embodiments of the streak defect compensation system  can be implemented as software executing on a programmed general purpose computer, a special purpose computer, a microprocessor or the like. It should also be understood that each of the circuits, routines, applications, objects or managers shown in  can be implemented as portions of a suitably programmed general-purpose computer. Alternatively, each of the circuits, routines, applications, objects or managers shown in  can be implemented as physically distinct hardware circuits within an ASIC, using a digital signal processor (DSP), using a FPGA, a PLD, a PLA and\/or a PAL, or using discrete logic elements or discrete circuit elements. The particular form of the circuits, routines, applications, objects or managers shown in  will take is a design choice and will be obvious and predictable to those skilled in the art. It should be appreciated that the circuits, routines, applications, objects or managers shown in  do not need to be of the same design.","When operating the streak defect compensation system , a compensation request can be input from one of the user input device(s)  over the link  or from the image forming device  over the link  shown in . The input\/output interface  inputs the compensation or update compensation parameters request, and under the control of the controller , forwards it to the compensation pattern generating circuit, routine or application .","The compensation pattern generating circuit, routine or application  then retrieves the compensation pattern image from the compensation pattern image portion  of the memory  under control of the controller . The compensation pattern generating circuit, routine or application  then outputs the compensation pattern image, under the control of the controller , to the image forming device  through the input\/output interface  and over the link . In various exemplary embodiments that iteratively modify the printed compensation test pattern, the compensation pattern generating circuit, routine or application  may apply the compensation parameters \u0394Gdetermined in a previous iteration to the compensation test pattern before outputting the compensation test pattern to the image forming device .","The scanned image of the printed compensation pattern is then input from the scanner  over the link . The input\/output interface  inputs the scanned image of the printed compensation pattern, and, under the control of the controller , forwards the scanned image data to the compensation parameter generating circuit, routine or application . The compensation parameter generating circuit, routine or application  then determines the compensation parameters to be used in the streak correction process, in the form of local tone reproduction curves, and\/or in the form of gray level offset look-up tables, as described above. The compensation parameter generating circuit, routine or application  then, under the control of the controller , stores the compensation parameters in the compensation parameters portion  of the memory . It should be appreciated that, in various exemplary embodiments that iteratively determine the compensation parameters \u0394G, the compensation parameter generating circuit, routine or application  also determines if sufficient uniformity in the halftone strips has been obtained. If not, the compensation parameter generating circuit, routine or application  causes, under control of the controller, the compensation pattern generating circuit, routine or application  to generate and print another compensation test pattern.","When operating the streak defect compensation system , a print input image request can be input from one of the user input device(s)  over the link  or from the image forming device  over the link . The input\/output interface  inputs the print input image request, and under the control of the controller , forwards it to the image data compensation circuit, routine or application .","The image data compensation circuit, routine or application  then either retrieves the compensation parameters from the compensation parameters portion  of the memory  or receives compensation parameters directly from the compensation parameter generating circuit, routine or application  under control of the controller . The image data compensation circuit, routine or application  then, under control of the controller , either retrieves the input image data from the input image data portion  of the memory , and\/or receives the input image data directly from the image data source  over the link .","The image data compensation circuit, routine or application  then modifies the image data to compensate for the streak defects as described above. Under the control of the controller , the compensated image data is then stored in the compensated image portion  of the memory  or is output directly to the image forming device  over the link .","While this invention has been described in conjunction with the exemplary embodiments outlined above, various alternatives, modifications, variations, improvements, and\/or substantial equivalents, whether known or that are or may be presently unforeseen, may become apparent to those having at least ordinary skill in the art. Accordingly, the exemplary embodiments of the invention, as set forth above, are intended to be illustrative, not limiting. Various changes may be made without departing from the spirit and scope of the invention. Therefore, the claims as filed and as they may be amended are intended to embrace all known or later-developed alternatives, modifications, variations, improvements, and\/or substantial equivalents."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Various exemplary embodiments of this invention will be described in detail, with reference to the following figures, wherein:",{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIGS. 3 and 4"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":["FIG. 7","FIG. 5"]},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0034","num":"0033"},"figref":["FIG. 10","FIG. 5"]},{"@attributes":{"id":"p-0035","num":"0034"},"figref":"FIG. 11"}]},"DETDESC":[{},{}]}
