---
title: Timestamp-based token revocation
abstract: A token used when a first device authenticates itself to a third device may be associated with a token issue timestamp. Upon receipt of an indication that all previously issued tokens are to be revoked, a second device may store a revocation timestamp. Upon receiving, from the second device, a request for establishing conditions for a file transfer, from the first device, and an indication of a token issue timestamp associated with the request, the second device may compare the token issue timestamp to the revocation timestamp. Responsive to determining, based on the comparing, that the token issue timestamp precedes the revocation timestamp, the second device may deny the request.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08955084&OS=08955084&RS=08955084
owner: BlackBerry Limited
number: 08955084
owner_city: Waterloo
owner_country: CA
publication_date: 20111110
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["FIELD","BACKGROUND","DETAILED DESCRIPTION"],"p":["The present application relates generally to authentication of rights using tokens and, more specifically, to timestamp-based token revocation.","As more and more devices become network connected, there remain few ways to manage interaction between devices, such as a transfer of a file from one device to another, in a simple and secure manner.","To assist in securing a first device and a second device, tokens may be employed. That is, the first device, when attempting to interact with the second device, may contact, and authenticate itself to, a third device by providing an earlier-obtained token.","The first device may be allowed to store the earlier-obtained token for future use in requesting permission to interact with the second device. However, in the event that the first device is lost or stolen, the user of the second device may no longer consider receipt of requests from the first device to be related to secure transactions.","The token used when the first device authenticates itself to the third device may be associated with a token issue timestamp. Upon receipt of an indication that all previously issued tokens are to be revoked, the second device may store a revocation timestamp. Upon receiving a request for establishing conditions for interaction and an indication of a token issue timestamp with the request, the second device may compare the token issue timestamp to the revocation timestamp. Responsive to determining, based on the comparing, that the token issue timestamp precedes the revocation timestamp, the second device may deny the request.","According to an aspect of the present disclosure, there is provided, at a target device, a method of handling a request to interact with the target device. The method includes receiving the request and, in conjunction with the receiving, receiving a token issue timestamp and comparing the token issue timestamp to a revocation timestamp. The method further includes, in response to determining that the token issue timestamp precedes a revocation timestamp, denying the request. In other aspects of the present application, a processor is provided for carrying out this method and a computer readable medium is provided for adapting a processor to carry out this method.","Other aspects and features of the present disclosure will become apparent to those of ordinary skill in the art upon review of the following description of specific implementations of the disclosure in conjunction with the accompanying figures.",{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 1","b":["100","100","102","102","104","102","106","106","104","102","108","110","108","110","112"]},"The server  may, for example, comprise a Mobile Service Delivery Platform (MSDP) server. The MSDP may comprise a generic platform designed to host mobile applications.",{"@attributes":{"id":"p-0019","num":"0018"},"figref":["FIG. 2","FIG. 1","FIG. 2"],"b":["106","106","224","226","226","224","228","224","226","228","226","106","224"]},"The housing may be elongated vertically, or may take on other sizes and shapes (including clamshell housing structures). In the case in which the keyboard  includes keys that are associated with at least one alphabetic character and at least one numeric character, the keyboard  may include a mode selection key, or other hardware or software, for switching between alphabetic entry and numeric entry.","In addition to the microprocessor , other parts of the network-connected device  are shown schematically in . These may include a communications subsystem , a short-range communications subsystem , the keyboard  and the display . The network-connected device  may further include other input\/output devices, such as a set of auxiliary I\/O devices , a serial port , a speaker  and a microphone . The network-connected device  may further include memory devices including a flash memory  and a Random Access Memory (RAM)  and various other device subsystems . The network-connected device  may comprise a two-way radio frequency (RF) communication device having voice and data communication capabilities. In addition, the network-connected device  may have the capability to communicate with other computer systems via the Internet.","Operating system software executed by the microprocessor  may be stored in a computer readable medium, such as the flash memory , but may be stored in other types of memory devices, such as a read only memory (ROM) or similar storage element. In addition, system software, specific device applications, or parts thereof, may be temporarily loaded into a volatile store, such as the RAM . Communication signals received by the mobile device may also be stored to the RAM .","The microprocessor , in addition to its operating system functions, enables execution of software applications on the network-connected device . A predetermined set of software applications that control basic device operations, such as a voice communications module A and a data communications module B, may be installed on the network-connected device  during manufacture. A token management module C may also be installed on the network-connected device  during manufacture, to implement aspects of the present disclosure. As well, additional software modules, illustrated as an other software module N, which may comprise, for instance, a personal information manager (PIM) application, may be installed during manufacture. The PIM application may be capable of organizing and managing data items, such as e-mail messages, calendar events, voice mail messages, appointments and task items. The PIM application may also be capable of sending and receiving data items via a wireless carrier network  represented by a radio tower. The data items managed by the PIM application may be seamlessly integrated, synchronized and updated via the wireless carrier network  with the device user's corresponding data items stored or associated with a host computer system.","Communication functions, including data and, optionally, voice communications, are performed through the communication subsystem  and, possibly, through the short-range communications subsystem . The communication subsystem  includes a receiver , a transmitter  and one or more antennas, illustrated as a receive antenna  and a transmit antenna . In addition, the communication subsystem  also includes a processing module, such as a digital signal processor (DSP) , and local oscillators (LOs) . The specific design and implementation of the communication subsystem  is dependent upon the communication network in which the network-connected device  is intended to operate. For example, the communication subsystem  of the network-connected device  may be designed to operate with the Mobitex\u2122, DataTAC\u2122 or General Packet Radio Service (GPRS) mobile data communication networks and may optionally be designed to operate with any of a variety of voice communication networks, such as Advanced Mobile Phone Service (AMPS), Time Division Multiple Access (TDMA), Code Division Multiple Access (CDMA), Personal Communications Service (PCS), Global System for Mobile Communications (GSM), Enhanced Data rates for GSM Evolution (EDGE), Universal Mobile Telecommunications System (UMTS), Wideband Code Division Multiple Access (W-CDMA), High Speed Packet Access (HSPA), Long Term Evolution (LTE), etc. Other types of data and voice networks, both separate and integrated, may also be utilized with the network-connected device .","Network access requirements vary depending upon the type of communication system. Typically, an identifier is associated with each mobile device that uniquely identifies the mobile device or subscriber to which the mobile device has been assigned. The identifier is unique within a specific network or network technology. For example, in Mobitex\u2122 networks, mobile devices are registered on the network using a Mobitex Access Number (MAN) associated with each device and in DataTAC\u2122 networks, mobile devices are registered on the network using a Logical Link Identifier (LLI) associated with each device. In GPRS networks, however, network access is associated with a subscriber or user of a device. A GPRS device therefore uses a subscriber identity module, commonly referred to as a Subscriber Identity Module (SIM), in order to operate on a GPRS network. Despite identifying a subscriber by SIM, mobile devices within GSM\/GPRS networks are uniquely identified using an International Mobile Equipment Identity (IMEI) number.","When network registration or activation procedures have been completed, the network-connected device  may send and receive communication signals over the wireless carrier network . Signals received from the wireless carrier network  by the receive antenna  are routed to the receiver , which provides for signal amplification, frequency down conversion, filtering, channel selection, etc., and may also provide analog to digital conversion. Analog-to-digital conversion of the received signal allows the DSP  to perform more complex communication functions, such as demodulation and decoding. In a similar manner, signals to be transmitted to the wireless carrier network  are processed (e.g., modulated and encoded) by the DSP  and are then provided to the transmitter  for digital to analog conversion, frequency up conversion, filtering, amplification and transmission to the wireless carrier network  (or networks) via the transmit antenna .","In addition to processing communication signals, the DSP  provides for control of the receiver  and the transmitter . For example, gains applied to communication signals in the receiver  and the transmitter  may be adaptively controlled through automatic gain control algorithms implemented in the DSP .","In a data communication mode, a received signal, such as a text message or web page download, is processed by the communication subsystem  and is input to the microprocessor . The received signal is then further processed by the microprocessor  for output to the display , or alternatively to some auxiliary I\/O devices . A device user may also compose data items, such as e-mail messages, using the keyboard  and\/or some other auxiliary I\/O device , such as a touchpad, a rocker switch, a thumb-wheel, a trackball, a touchscreen, or some other type of input device. The composed data items may then be transmitted over the wireless carrier network  via the communication subsystem .","In an optional voice communication mode, overall operation of the device is substantially similar to the data communication mode, except that received signals are output to the speaker , and signals for transmission are generated by a microphone . Alternative voice or audio I\/O subsystems, such as a voice message recording subsystem, may also be implemented on the network-connected device . In addition, the display  may also be utilized in voice communication mode, for example, to display the identity of a calling party, the duration of a voice call, or other voice call related information.","The short-range communications subsystem  enables communication between the network-connected device  and other proximate systems or devices, which need not necessarily be similar devices. For example, the short-range communications subsystem may include an infrared device and associated circuits and components, or a Bluetooth\u2122 communication module to provide for communication with similarly-enabled systems and devices, or a near field communication module, etc.","In overview, there may be a situation in which a file at the PC  is to be transferred to the network-connected device . Providing access to the network-connected device , for the purposes of file transfer and others, may be part of the web service offered by the MSDP server . Indeed, the network-connected device  may be associated with the enterprise .","The file may comprise a block of arbitrary information, or resource for storing information, which is available to a computer program and is usually based on some kind of durable storage. A file is durable in the sense that the file remains available for programs to use after the current program has finished. Files may be defined by their format. Example file formats include those for storing digital images, word processing documents, presentation documents, spreadsheets, printer-specific output, non-printer-specific output, hypertext documents, digital music, digital video, etc. text avoid provisioning pki infrastructure\u2014executable\u2014","Interaction between the components of the system  of  is illustrated in  in relation to obtaining a token. It may be considered that it is an application  executed by a processor (not shown) of the PC  that is to transfer a file to the network-connected device . The application  may be pre-arranged to contact the MSDP server  to obtain a token for use when transferring a file to the network-connected device .","The application  may signal (step ) a browser , also executed by the processor of the PC , with an indication of a uniform resource locator (or \u201cURL\u201d, also known as a web address) for the MSDP server . More particularly, the URL may relate to a redirector  within the MSDP server . Accordingly, the browser  may signal (step ) a request for a token for use in a file transfer. Responsively, the redirector  may signal (step ) the browser  with a URL for the authentication server . The browser  may then signal (step ) the request for a token to the authentication server . The authentication server  may serve (step ), to the browser , a page prompting for an authentication username and associated password. Upon receiving the username and associated password, the browser  may provide (step ) the username and associated password to the authentication server .","Upon authenticating the username and associated password received from the browser , the authentication server  may generate an authentication server token and transmit (step ) the authentication server token to the browser . There may be safeguards in place such that the authentication server token is not allowed to be maintained at the PC . Accordingly, the PC  may use the recently received authentication server token to obtain a token that is allowed to be maintained at the PC . To that end, the browser  signals (step ) the redirector  with the authentication server token. The redirector  signals (step ) a token generator  within the MSDP server  to generate a token specific to the file transfer web service provided by the MSDP server  (hereinafter a \u201cMSDP file transfer token\u201d). The redirector  includes the authentication server token when signaling (step ) the token generator .","The token generator  signals (step ) the authentication server  with the authentication server token to confirm that the authentication server token is valid. Upon receiving (step ) an assurance that the authentication server token is valid, the token generator  generates a MSDP file transfer token and serves (step ) the MSDP file transfer token to the redirector . The redirector  serves (step ) the MSDP file transfer token to the browser . The browser  passes (step ) the MSDP file transfer token to the application .","The MSDP file transfer token may contain information such as: Username; Issued Timestamp; and Expiry Time. The MSDP file transfer token may be signed and encrypted (using a set of cryptographic keys installed on the MSDP server ). Besides the encrypted MSDP file transfer token, which is opaque to the PC application , the MSDP server  may also return the username in the clear, so that the PC application  can use the username in request later, or in informational display, etc.","Two main kinds of communication between the PC , the MSDP server  and the network-connected device  have been considered: transaction-based; and session-based.",{"@attributes":{"id":"p-0039","num":"0038"},"figref":"FIG. 4","b":["106","406","408","410"]},"Initially, the web service client application  registers (step ) with the subscribe\/notify application  so that the web service client application  may receive notification of new requests related to the file transfer web service.","Some time later, the PC application  transmits (step ) a request to the MSDP server . The request may, for example, include information such as the username of the user of both the PC  and the network-connected device . The request may, for example, also include information such as an indication that the request is related to a file transfer, the MSDP file transfer token and an indication that the file transfer is to use the related web service.","When the PC application  transmits (step ) the request to the MSDP server , the PC application  may, for example, invoke a \u201cRESTful\u201d interface on the MSDP server . The communication between the PC application  and the MSDP server  may, for example, be accomplished over Hypertext Transfer Protocol Secure (HTTPS), to discover and communicate with the peer application to the PC application  running on the network-connected device . The peer application to the PC application  running on the network-connected device  is the file transfer application .","Representational state transfer (REST) is a style of software architecture for distributed hypermedia systems such as the World Wide Web. Conforming to the REST constraints is referred to as being \u201cRESTful\u201d.","The MSDP server  may authenticate the received request, to verify the identity of the requestor. The MSDP server , may accomplish this authenticating by verifying that the received the MSDP file transfer token is the same as the MSDP file transfer token that the MSDP server has previously issued (step , ) to the PC .","The MSDP server  may then identify the network-connected device  as a target device based on the username provided in the request (received in step ). Upon identifying the network-connected device  as the target device, the MSDP server  may transmit (step ) the request, with an indication of the issue timestamp for the MSDP file transfer token, to the network-connected device . If the network-connected device  is not found, or is not \u201cin coverage\u201d at this point, the MSDP server  may return an error response (not shown) back to the PC application  and an error message may be presented to the user of the PC .","The transmission (step ) of the request to the network-connected device  may be accomplished using Transport Layer Security (TLS). TLS, like its predecessor, Secure Sockets Layer (SSL), is a cryptographic protocol that provides communication security over the Internet. TLS and SSL encrypt segments of network connections above the Transport Layer, using asymmetric cryptography for key exchange, symmetric encryption for privacy, and a keyed message authentication code for message reliability.","At the network-connected device , the request is received by the subscribe\/notify application , for example, using a Session Initiation Protocol (SIP) signaling protocol. The subscribe\/notify application  then notifies (step ) the web service client application  that a request has been received. Recall that, in step , the web service client application  registered to receive notification of events of the type exemplified by the receipt of the file transfer request.","Responsive to receiving notification of the request, the web service client application  signals (step ) the file transfer application  to generate a URL for the requested file transfer. The web service client application  generates a URL for the requested file transfer along with a temporary embedded token and transmits (step ) the URL and temporary embedded token to the web service client application . Responsive to receiving the URL and temporary embedded token, the web service client application  transmits (step ) the URL and temporary embedded token to the subscribe\/notify application .","The subscribe\/notify application  transmits (step ) the URL and temporary embedded token to the MSDP server  and the MSDP server  transmits (step ) the URL and temporary embedded token to the PC application .","The PC application  on the PC  may then transfer (step ) the file directly to the network-connected device  using the URL and temporary embedded token received in step . More particularly, the PC application  may employ a HTTPS \u201cpost\u201d request method for the transfer (step ). The file may be received by the file transfer application  at the network-connected device . The file transfer application  may then signal (step ) the PC application  to indicate that the file has been successfully received. The file transfer application  may also signal (step ) the web service client application  that the file has been successfully completed.",{"@attributes":{"id":"p-0051","num":"0050"},"figref":"FIG. 5"},"Initially, the web service client application  registers (step ) with the subscribe\/notify application  so that the web service client application  may received notification of new requests related to the file transfer web service.","Some time later, the PC application  transmits (step ) a request to the MSDP server . The PC application  and the network-connected device  may exchange messages (step ) to authenticate the user of the PC . During the exchange, the network-connected device  may determine a username to associate with the request.","The MSDP server  may then identify the network-connected device  as the target device based on the username received in the exchange of step . Upon identifying the network-connected device  as the target device, the MSDP server  may transmit (step ) an INVITE message, with an indication of the issue timestamp for the MSDP file transfer token, to the network-connected device . If the network-connected device  is not found, or is not \u201cin coverage\u201d at this point, the MSDP server  may return an error response (not shown) back to the PC application  and an error message may be presented to the user of the PC .","At the network-connected device , the INVITE message is received by the subscribe\/notify application . The subscribe\/notify application  then notifies (step ) the web service client application  of the received INVITE message with the indication of the issue timestamp for the MSDP file transfer token. In step , the web service client application  registered to receive notification of events of the type exemplified by the received INVITE message.","Responsive to receiving notification of the INVITE message, the web service client application  prompts the user to allow the file transfer and signals (step ) the subscribe\/notify application  to indicate that the user is being prompted.","The subscribe\/notify application  passes (step ) the indication of the prompting to the MSDP server . Responsive to the indication of the prompting, the MSDP server  creates a session and signals (step ) an indication of a session identification, for the created session, to the PC application .","The PC application  reacts to the indication of a session identification by transmitting (step ), to the MSDP server , a request using the HTTP GET method and identifying the session. The PC Application  then waits to receive a URL from the MSDP server .","Responsive to the prompt, presented to the user by the web service client application , the user may indicate acceptance of the file transfer. Responsive to receiving acceptance of the file transfer, the web service client application  signals (step ) the file transfer application  to generate a URL for the requested file transfer. The web service client application  generates a URL for the requested file transfer and transmits (step ) the URL to the web service client application . Responsive to receiving the URL, the web service client application  transmits (step ) the URL to the subscribe\/notify application  along with an indication that the file transfer has been accepted.","The subscribe\/notify application  transmits (step ) the URL to the MSDP server  and the MSDP server , responsive to the request received in step , transmits (step ) the URL to the PC application . The MSDP server  may also transmit (step ) and acknowledgement of receipt of the URL to the subscribe\/notify application .","The PC application  on the PC  may then transfer (step ) the file directly to the network-connected device  using the URL received in step . More particularly, the PC application  may employ a HTTPS \u201cpost\u201d request method for the transfer (step ). The file may be received by the file transfer application  at the network-connected device . The file transfer application  may then signal (step ) the PC application  to indicate that the file has been successfully received. The file transfer application  may also signal (step ) the web service client application  that the file has been successfully completed. The web service client application  may notify (step ) the subscribe\/notify application  that the file transfer has terminated.","Responsive to receiving notification (step ) that the file transfer has terminated, the subscribe\/notify application  may transmit (step ) a \u201cBYE\u201d signal and may transmit (step ) a \u201c200OK\u201d signal to the MSDP server . These signals act to notify the MSDP server  that the \u201csession\u201d (or the file transfer in this case) has finished (successfully or not), thereby allowing the MSDP server  to formally terminate the session initiated by the INVITE message (step ) both for statistical and resource cleanup purposes.","The user may wish to revoke a MSDP file transfer token that was issued and stored on the PC  for file transfer purposes as described hereinbefore. Such revocation may be desired in a case wherein the user has lost the PC  or a case wherein the user is transferring ownership of the PC .",{"@attributes":{"id":"p-0064","num":"0063"},"figref":["FIG. 6","FIG. 2"],"b":["410","106","602","228","106","410","604"]},{"@attributes":{"id":"p-0065","num":"0064"},"figref":["FIG. 7","FIG. 4","FIG. 5"],"b":["228","106","702","416","228","106","702","518"]},"Responsive to receipt of the request, which may be considered to encompass the INVITE message, the microprocessor  may determine (step ) whether a revocation timestamp exists. Responsive to determining (step ) that a revocation timestamp exists, the microprocessor  may compare the issue timestamp to the revocation timestamp to determine (step ) whether the issue timestamp temporally precedes the revocation timestamp. Upon determining (step ) that the issue timestamp temporally precedes the revocation timestamp, the microprocessor  may deny the request.","In particular, to deny the request, the microprocessor  may transmit, to the MSDP server , an indication that the issue timestamp temporally precedes the revocation timestamp. Responsive to receiving such an indication, the MSDP server  may forward the indication to the PC application . The PC application  may be arranged to respond to receipt of such an indication by deleting the stored MSDP file transfer token.","Responsive to determining (step ) that a revocation timestamp does not exist, the microprocessor  may simply allow the request to proceed as outlined hereinbefore. Similarly, responsive to determining (step ) that the issue timestamp temporally follows the revocation timestamp, the microprocessor  may simply allow the request to proceed as outlined hereinbefore.","In an example embodiment of aspects of the present application, the network-connected device  may comprise a tablet computer to which the user of the PC  wishes to send a representation of a file, thereby allowing review of the file while the user is away from the PC . The PC application  may be installed on the PC  in a manner that establishes a new printing option within the operating system for the PC . In the present example, the printing option may be called a \u201cprint-to-tablet\u201d option.","With a first file open and the \u201cprint-to-tablet\u201d option selected, responsive to receiving a print command, the processor (not shown) of the PC  may execute the PC application  to convert the first file to a second file, wherein the second file is, for example, in the Adobe\u00ae portable document format (PDF), or some other format readily displayed on the network-connected device . The processor of the PC  may then execute the PC application  to arrange transfer of the second file to the network-connected device  as described hereinbefore. Upon completion of the file transfer, the second file is stored and viewable on the network-connected device . The virtual printing of the second file to the network-connected device  saves paper, costs, and time by avoiding printing the second file onto paper.","It may be considered that printing a document to the network-connected device  is better than sending an email message with a file attachment. First of all, there is a labor savings in that printing to the network-connected device  is apparently a one-step process, whereas sending an email message with a file attachment potentially involves saving the document to a different file format, initiating email message sending, addressing the email message, selecting the attachment and sending the email message.","It may also be considered that printing a document to the network-connected device  is better than storing a file at a universally available, operator-specific, network-connected storage device, e.g., a so-called cloud server. For example, printing a document to the network-connected device  may be considered to establish greater privacy than the privacy available when storing a file at a cloud server. Additionally, the operator of a cloud server may, occasionally, take the cloud server off-line for maintenance or may, in an extreme case, cease operations.","Beyond the \u201cprint-to-tablet\u201d option described hereinbefore, aspects of the present application may be applied to requests to arrange receipt, at a target device, of more than just documents. Indeed, alternative requests may relate to arranging receipt, at the target device, of a video stream, an audio stream or a text stream. Further alternative requests for interaction with the target device may relate to two-way traffic, such as video conferencing or instant messaging. Even further alternative requests for interaction with the target device may relate to requests to receive media from the target device. The media may include audio, video and\/or text.","The applications of aspects of the present disclosure have, to this point, been discussed in the context of peer-to-peer interaction between devices. However, further aspects of the present disclosure may be applied to devices having a client-server relationship.","The token-based management of interaction between devices disclosed in the present application is distinct from a digital certificate-based scheme in a traditional private key infrastructure. Conveniently, the present application does not involve maintenance of certificate revocation lists in the manner of traditional private key infrastructure. Accordingly, the burden, on the infrastructure, to distribute, store and maintain up-to-date such lists is obviated by aspects of the present application.","The above-described implementations of the present application are intended to be examples only. Alterations, modifications and variations may be effected to the particular implementations by those skilled in the art without departing from the scope of the application, which is defined by the claims appended hereto."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Reference will now be made, by way of example, to the accompanying drawings which show example implementations; and in which:",{"@attributes":{"id":"p-0005","num":"0004"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0006","num":"0005"},"figref":["FIG. 2","FIG. 1"]},{"@attributes":{"id":"p-0007","num":"0006"},"figref":["FIG. 3","FIG. 1"]},{"@attributes":{"id":"p-0008","num":"0007"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 7"}]},"DETDESC":[{},{}]}
