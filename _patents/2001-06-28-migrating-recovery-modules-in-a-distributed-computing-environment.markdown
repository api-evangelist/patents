---
title: Migrating recovery modules in a distributed computing environment
abstract: Systems and methods for implementing recovery processes on failed nodes in a distributed computing environment are described. In accordance with this scheme, one or more migratory recovery modules are launched into the network. The recovery modules migrate from node to node, determine the status of each node, and initiate recovery processes on failed nodes. In this way, scalable recovery processes may be implemented in distributed systems, even with incomplete network topology and membership information. In addition, the complexity and cost associated with manual status monitoring and recovery operations may be avoided.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07743126&OS=07743126&RS=07743126
owner: Hewlett-Packard Development Company, L.P.
number: 07743126
owner_city: Houston
owner_country: US
publication_date: 20010628
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["TECHNICAL FIELD","BACKGROUND","SUMMARY","DETAILED DESCRIPTION"],"p":["This invention relates to systems and methods for managing nodes and implementing recovery processes in a distributed computing environment.","In modern computer systems, computers may communicate with each other and with other computing equipment over various types of data networks. Routable data networks are configured to route data packets (or frames) from a source network node to one or more destination network nodes. As used herein, the term \u201croutable protocol\u201d refers to a communications protocol that contains a network address as well as a device address, allowing data to be routed from one network to another. Examples of routable protocols are SNA, OSI, TCP\/IP, XNS, IPX, AppleTalk, and DECnet. A \u201croutable network\u201d is a network in which communications are conducted in accordance with a routable protocol. One example of a routable network is the Internet, in which data packets are routed in accordance with the Internet Protocol (IP). In a routable data network, when a network routing device (or router) receives a data packet, the device examines the data packet in order to determine how the data packet should be forwarded. Similar forwarding decisions are made as necessary at one or more intermediate routing devices until the data packet reaches a desired destination node.","Network routers typically maintain routing tables that specify network node addresses for routing data packets from a source network node to a destination network node. When a data packet arrives at a router, an address contained within the packet is used to retrieve an entry from the routing table that indicates the next hop (or next node) along a desired route to the destination node. The router then forwards the data packet to the indicated next hop node. The process is repeated at successive router nodes until the packet arrives at the desired destination node. A data packet may take any available path to the destination network node. In accordance with IP, data packets are routed based upon a destination address contained in the data packet. The data packet may contain the address of the source of the data packet, but usually does not contain the address of the devices in the path from the source to the destination. These addresses typically are determined by each routing device in the path based upon the destination address and the available paths listed in the routing tables.","Distributed computer systems typically include a number of recovery functions that increase the reliability of process execution. For example, various checkpointing and restoration (or rollback) techniques have been developed for recovering from hardware and software failures. In accordance with these techniques, the information that is needed to re-execute a process in a given state is stored at a number of checkpoints during the operation of the process. If the execution of the process is interrupted (e.g., the process has failed or is hung), the state of the interrupted process is rolled back to the checkpoint state immediately preceding the interruption, and the process is re-executed from that checkpoint state.","Various heartbeat fault detection schemes also have been developed. In relatively small network environment in which the topology and membership information is known, such heartbeat-based fault detection schemes typically involve heartbeat monitors that are installed at each node of the distributed system to probe the health of each associated node. In general, heartbeat monitors require constant monitoring of all nodes of the system. A heartbeat monitor may probe the health of an associated node process by, for example, detecting if the node process has failed, monitoring the node log file for any indication of process failure, exchanging messages with the node process, or making calls to the node system manager to determine if the system is operating properly. If a heartbeat monitor detects that a particular node process has failed, it may attempt to restart the process or notify a network management system (or console) of the failure, or both.","Still other network recovery schemes have been proposed.","The invention features a novel scheme (systems and methods) for implementing recovery processes on failed nodes in a distributed computing environment. In accordance with this inventive scheme, one or more migratory recovery modules are launched into the network. The recovery modules migrate from node to node, determine the status of each node, and initiate recovery processes on failed nodes. In this way, the invention allows scalable recovery processes to be implemented in distributed systems, even with incomplete network topology and membership information. By periodically monitoring each of the network nodes\u2014as opposed to continuously monitoring each node\u2014the invention easily may be scaled to large networks. In addition, the invention avoids the complexity and cost associated with manual status monitoring and recovery operations.","In one aspect of the invention a recovery module is configured to migrate from one network node to another, determine a status of a network node, and initiate a recovery process on a failed network node.","Embodiments in accordance with this aspect of the invention may include one or more of the following features.","The recovery module may comprise a routing component for determining a next hop address from an origin network node to a destination network node. The routing component may be configured to determine the next hop address based upon a routing table that is stored at the origin network node.","The recovery module may be configured to determine the status of a network node by sending an inter-process communication to a node process. The recovery module may be configured to determine the status of a network node in accordance with a heartbeat messaging protocol. The recovery module also may be programmed to use standard operating facilities (e.g., the Unix \u201cps\u201d command) to determine the status of a network node process.","The recovery module may be configured to initiate a recovery process on a failed network node in accordance with a restart protocol. The recovery module may be configured to initiate a restart of a failed node process by transmitting a request to a process execution service operating on the failed network node.","The recovery module preferably is configured to transmit a node status message to a network management module operating at a network management network node. The node status message may comprise information that is obtained from a log file generated at the failed network node.","A network management module may be configured to launch a plurality of recovery modules into the network.","The invention also features a method and a computer program for managing a plurality of distributed nodes of a network.","Other features and advantages of the invention will become apparent from the following description, including the drawings and the claims.","In the following description, like reference numbers are used to identify like elements. Furthermore, the drawings are intended to illustrate major features of exemplary embodiments in a diagrammatic manner. The drawings are not intended to depict every feature of actual embodiments nor relative dimensions of the depicted elements, and are not drawn to scale.","Referring to , in one embodiment, a distributed computing system  includes a plurality of distributed nodes, including a network management node  and two device nodes , , that are interconnected by a network . Communications over distributed computing system  are conducted in accordance with a routable communications protocol (e.g., TCP\/IP, SNA, OSI, XNS, IPX, AppleTalk, and DECnet). Network  may be implemented as a local area network (LAN), a wide area network (WAN), or other routable network (e.g., the Internet). As explained in detail below, network management node  is configured to implement recovery processes on failed nodes by launching one or more migratory recovery modules  into distributed computing system . Network management node  also is configured to monitor the number of failures reported by recovery modules . As the number of reported failures increases, network management node  may launch more recovery modules  into distributed computing system . Not all network nodes are monitored continuously below the level of monitoring increases as the probability of failure increases. The recovery modules  migrate from node to node, determine the status of each node, and initiate recovery processes on failed nodes. In accordance with this approach, scalable recovery processes may be implemented in distributed computing system , even with incomplete network topology and membership information. In addition, the complexity and cost associated with manual status and recovery operations may be avoided.","Referring to , in one embodiment, network management node  may be implemented as a computer (or server) that include a processor , a random access memory (RAM) , a permanent storage system , a user interface , a network interface , and a system bus  that couples the various components of network management node . Processor  may include one or more processors, each of which may be in the form of any one of various commercially available processors. Permanent storage system  may be implemented as a hard drive, a floppy drive, a CD ROM drive, or a combination of one or more of such storage drives. These storage drives may connect to system bus  through respective interfaces and may contain respective computer-readable media disks that provide non-volatile or persistent storage for data, data structures and computer-executable instructions. Permanent storage system  may contain a read only memory (ROM) that stores a basic input\/output system (BIOS) containing start-up routines for network management node . System bus  may be a memory bus, a peripheral bus or a local bus, and may be compatible with any of a variety of bus protocols, including PCI, VESA, Microchannel, ISA, and EISA. Other computer-readable storage devices (e.g., magnetic tape drives, flash memory devices, and digital video disks) also may be used with network management node . A user may interact (e.g., enter commands or data) with network management node  through user interface , which may include a keyboard and a mouse. Other input devices (e.g., a microphone, joystick, or touch pad) also may be provided. User interface  also may include a monitor for displaying information to the user. Network management node  also may include peripheral output devices, such as speakers and a printer (not shown).","A number of program modules may be stored in permanent storage system  and in RAM , including an operating system  (e.g., the Windows NT Server operating system available from Microsoft Corporation of Redmond, Wash. U.S.A.), one or more application programs , and program data . Operating system  includes an executive that provides the base operating system services (e.g., memory management, process and thread management, security, input\/output, and interprocess communication) for creating a run-time execution environment on network management node  and, in some embodiments, on device nodes , . A configuration database (or registry) contains the following information: parameters needed to boot and configure the system; system-wide software settings that control the operation of operating system ; a security database; and per-user profile settings. A native operating system (OS) application programming interface (API) exposes the base operating system services of the executive to user applications and to one or more service modules (or simply \u201cservices\u201d). As used herein, the term \u201cservice\u201d (or \u201cservice module\u201d) refers to a component of an operating system that provides a set of one or more functions. The service modules are user-mode processes that may be configured to start automatically at system boot time without requiring an interactive logon; they also may be controlled dynamically during run-time. The service modules call certain base operating system services (or functions) to interact with a service controller; such functions may include registering a successful startup, responding to status requests, and pausing or shutting down the service. The service controller starts, manages and directs operations within the service modules. The service modules, on the other hand, create the environment in which one or more processes may operate and control the start-up, maintenance and termination of such processes. Typically, the run-time execution environment is installed on network management node , and one or more client programs operating on device nodes ,  may access the functionality provided by the service modules over their respective network connections. Before a service module may operate in the run-time execution environment, it must be installed on network management node . A service module typically is installed by storing the service module in a data storage area that is accessible by network management node  (e.g., on a disk of permanent storage system ), and registering the attributes of the service module in the configuration database. Further details about the Windows NT operating system may be obtained from \u201cInside Windows NT,\u201d Second Edition, David A. Solomon, Microsoft Press (1998), which is incorporated herein by reference.","As shown in , a JAVA virtual machine (JVM) , which provides a platform for executing an operating environment  for the migratory recovery modules , also may be stored in permanent storage system  and in RAM . In the 32-bit Windows environment, for an application (or another DLL) to call the system service functions of the Win  API, the application must conform to a standard C-based interface. Accordingly, most service components operating in a 32-bit Windows environment are written in the C or C++ programming languages. In order to invoke the functionality of service components written in other programming languages, each component must provide its own customized operating environment in which the component may operate. For example, programs written in the JAVA programming language must operate in an environment provided by JVM . The JVM is an abstract native computing machine that runs within an operating system to interpret and execute JAVA applications. Further details about JVM  may be obtained from \u201cThe Java\u2122 Virtual machine Specification,\u201d Tim Lindholm and Frank Yellin, Addison Wesley (1997), which is incorporated herein by reference.","Recovery modules  are software components that are capable of migrating from one network node to another and executing on each network node. In one embodiment, recovery modules  are implemented as JAVA objects that are instantiated by recovery module operating environment . Each node in distributed computing system  may include a recovery module operating environment  that executes on a JVM and provides recovery modules  access to certain status monitoring, recovery resources and native operating system resources that are available at each network node. Recovery modules  may access node resources indirectly through services (e.g., JAVA classes that may be instantiated as objects containing methods for accessing node resources) or they may access node resources directly.","Referring to , in one embodiment, a network management module operating at network management node  may monitor the status and implement recovery processes on one or more nodes of distributed computing system , as follows. The network management module launches one or more recovery modules  into distributed computing system  (step ). The network management module transmits the recovery modules  to one or more target network nodes by transmitting the code and data for each recovery module  in the form of a JAVA class file. Typically, the number and identity of the target network nodes are identified statistically so that the reliability of the system is statistically monitored at a specified confidence level. The target node addresses may be obtained from a routing table that is stored at network management node . The number of recovery modules  that are launched into distributed computing system  may be determined statistically based upon a desired service level (or policy). The network management module monitors transmissions that are received from the recovery modules  that were launched into distributed computing system  (step ). Communications between the network management module and the recovery modules  may be in accordance with a simple network management protocol (SNMP). If the number of reporting recovery modules  is sufficient to satisfy the desired service level (step ), the network management module continues to monitor recovery module transmissions until a network node failure is reported (step ); otherwise, the network management module launches additional recovery modules  into distributed computing system  to satisfy the desired service level (step ). If a network node failure is reported (step ), the network management module determines whether a global network recovery process should be implemented (step ). Typically, local recovery procedures initiated by recovery modules  are sufficient to correct for node failures and a global recovery process is not required. If a global network recovery process is not required (step ), the network management module continues monitoring recovery module transmissions (step ). If a global network recovery process is required (step ), the network management module initiates a global recovery process (step ). The global recovery process may be a conventional checkpointing and rollback recovery process.","Referring to , in one embodiment, upon receipt of a recovery module  (step ), a recovery module operating environment  executing at a receiving network node loads the recovery module  (step ). The recovery module operating environment  may use JAVA methods to load the recovery module  based upon the received recovery module JAVA class file. JAVA methods also may be used to instantiate a recovery module object based upon the received recovery module data. If the recovery module is authorized to operate at the receiving network node (step ), the recovery module operating environment  starts the recovery module object (step ); otherwise, the recovery module operating environment  unloads the received recovery module  (step ).","As shown in , in one embodiment, during execution on a network node, a migratory recovery module  may monitor the status and initiate recovery processes (if necessary), as follows. Initially, recovery module  monitors the health of the network node (step ). Recovery module  may probe the health of an associated node process by accessing one or more node monitoring resources of the network node in accordance with a conventional heartbeat messaging protocol. Recovery module  may detect if the node process has failed, monitor the node log file for any indication of process failure, exchange heartbeat messages with the node process, or make calls to the node system manager to determine if the system is operating properly. If recovery module  determines that one or more node processes have failed (step ), recovery module  may initiate a recovery process in accordance with a conventional restart protocol (step ). For example, recovery module  may attempt to restart the failed process by transmitting a request to a process execution service operating on the failed network node. The status of the node, including information relating to any failed node processes (e.g., any logged checkpointing information or other information dumps), is reported to the network management module (step ). The node status report may be transmitted in accordance with SNMP. Recovery module  then may request to be transmitted to the next destination network node (step ). Recovery module  may make the transmission request by invoking a recovery module migration method. The migration method may call a corresponding migration method of recovery module operating environment that halts operation of the recovery module  and transmits the recovery module code and data to a specified destination node. Recovery module  may include a routing method that may be invoked to identify the destination node address based upon a routing table stored at the network node. The destination node may be selected randomly or in accordance with a prescribed routing policy.","Although systems and methods have been described herein in connection with a particular distributed computing environment, these systems and methods are not limited to any particular hardware or software configuration, but rather they may be implemented in any computing or processing environment, including in digital electronic circuitry or in computer hardware, firmware or software. In general, the component systems of the network nodes may be implemented, in part, in a computer process product tangibly embodied in a machine-readable storage device for execution by a computer processor. In some embodiments, these systems preferably are implemented in a high level procedural or object oriented processing language; however, the algorithms may be implemented in assembly or machine language, if desired. In any case, the processing language may be a compiled or interpreted language. The methods described herein may be performed by a computer processor executing instructions organized, for example, into process modules to carry out these methods by operating on input data and generating output. Suitable processors include, for example, both general and special purpose microprocessors. Generally, a processor receives instructions and data from a read only memory and\/or a random access memory. Storage devices suitable for tangibly embodying computer process instructions include all forms of non-volatile memory, including, for example, semiconductor memory devices, such as EPROM, EEPROM, and flash memory devices; magnetic disks such as internal hard disks and removable disks; magneto-optical disks; and CD-ROM. Any of the foregoing technologies may be supplemented by or incorporated in specially-designed ASICs (application-specific integrated circuits).","Other embodiments are within the scope of the claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"DESCRIPTION OF DRAWINGS","p":[{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":["FIG. 2","FIG. 1"]},{"@attributes":{"id":"p-0020","num":"0019"},"figref":["FIG. 3","FIG. 1"]},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 5"}]},"DETDESC":[{},{}]}
