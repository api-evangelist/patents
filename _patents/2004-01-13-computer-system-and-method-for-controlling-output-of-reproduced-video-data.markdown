---
title: Computer system and method for controlling output of reproduced video data
abstract: A computer system with a monitor display, comprises a decoder unit configured to decode video data containing digital watermark information to derive decoded data, and configured to determine, based on information included in the video data, whether or not first certification for certifying that the video data is legitimately reproduced data succeeds, and a graphics controller which determines, using the digital watermark information, whether or not second certification for certifying that the video data is to be protected from being copied succeeds, the graphics controller converting the decoded data into a protected decoded data from being copied and outputting the protected decoded data to the monitor display if the first certification and the second certification succeed, and the graphics controller inhibiting the decoded data from being output to the monitor display if the first certification fails and the second certification succeeds.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07302573&OS=07302573&RS=07302573
owner: Kabushiki Kaisha Toshiba
number: 07302573
owner_city: Tokyo
owner_country: JP
publication_date: 20040113
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","BACKGROUND OF THE INVENTION","BRIEF SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE INVENTION","FIRST EMBODIMENT","SECOND EMBODIMENT","THIRD EMBODIMENT","FOURTH EMBODIMENT","FIFTH EMBODIMENT","SIXTH EMBODIMENT","SEVENTH EMBODIMENT","EIGHTH EMBODIMENT"],"p":["This application is based upon and claims the benefit of priority from the prior Japanese Patent Applications No. 2003-006182, filed Jan. 14, 2003; and No. 2003-165680, filed Jun. 10, 2003, the entire contents of both of which are incorporated herein by reference.","1. Field of the Invention","The present invention relates to a computer system having a function for reproducing and outputting video data recorded on a medium, such as a DVD, using a monitor display. More particularly, it relates to a computer system capable of preventing, for example, copyright video programs from being illegally copied, and a method, employed in the computer system, for controlling the output of reproduced video data.","2. Description of the Related Art","In accordance with recent development of computer and multimedia techniques, so-called multimedia compatible personal computers have been widely put to practical use. Personal computers of this type have a function for reproducing video data (moving picture data) recorded on a medium such as a digital versatile disc (DVD), as well as text data and graphics data.","Video data recorded on a DVD is encoded based on the moving picture experts group (MPEG) phase 2 standard. To reproduce such MPEG-2 video data on a personal computer, an encoded stream of the video data is first read from a DVD drive into the main storage of the personal computer, and then transferred to an MPEG-2 decoder that is realized by software or hardware, under the control of a video reproduction application program. The MPEG-2 decoder performs decoding (decompress) of the coded stream.","The decoded data is once written into a video memory and then displayed on a monitor display, as in the case of standard graphics data provided by an operating system (OS) or an application program. In personal computers equipped with a GUI system, there is a case where a window (overlay surface) is assigned for each application program, and a case where video data is directly written to a video frame memory for display.","In response to strong requests from copyright owners who provide, for example, video software, a number of schemes for preventing illegal copying of video software have been proposed. For example, the Macrovision system developed by the US Macrovision company is the most popular copy protection technique employed in, for example, home VTRs (mainly, for VHS titles). However, no copy protection techniques have yet been established for protecting the video output to the monitor display of a personal computer from copying.","Jpn. Pat. Appln. KOKAI Publication No. 2001-16538, for example, has proposed a structure in which a copy protect function is imparted to a graphics controller, and an interface for executing the Macrovision function is provided in a graphics driver. This publication has also proposed a method in which the Macrovision function is activated for video data whose copying is to be prevented (i.e., where the data contains copy protection information) when the video data is decoded, thereby outputting, to a TV monitor, video data whose copying is to be prevented. This method, however, realizes copy protection for a TV monitor, but does not realize copy protection for a computer display.","In existing video applications, such as DVDs and digital broadcasting, copy protection information is represented by a flag belonging to the MPEG-2 stream. In the field of computers, programs for illegally altering the flag exist. To cope with this, a scheme for superimposing, on video data, copy protection information as digital watermark information is now being developed.","Since conventional personal computers do not have a function for protecting the output to the monitor display from being copied, video data recorded on a DVD and output to the monitor display of a computer is not protected from being copied, regardless of whether the video data contains copy protection information. Copy protection information contained in video data may be illegally copied by software. Further, in conventional personal computers, no consideration is made for the case where a plurality of video reproduction applications have different copy control information items.","It is an object of the invention to provide a computer system having a function for protecting the output to the computer monitor display from being copied if the output contains copy protection information, and also to provide a method for controlling the output of reproduced video data, employed in the computer system for realizing the function.","According to a first aspect of the invention, there is provided a computer system with a monitor display, comprising:","a decoder unit configured to decode video data containing digital watermark information to derive decoded data, and configured to determine, based on information included in the video data, whether or not first certification for certifying that the video data is legitimately reproduced data succeeds; and","a graphics controller which determines, using the digital watermark information, whether or not second certification for certifying that the video data is to be protected from being copied succeeds,\n\n","According to a second aspect of the invention, there is provided a method of controlling output of reproduced video data, comprising: decoding video data containing digital watermark information to derive decoded data; determining, based on information included in the video data, whether or not first certification for certifying that the video data has been reproduced by a legitimate route succeeds; forming a video display area in a video memory at a position corresponding to the video data, the video display area storing the decoded data; determining, using the digital watermark information, whether or not second certification for certifying that the video data is to be protected from being copied succeeds, if the video display area is formed; converting the decoded data into a protected decoded data from being copied and writing the protected decoded data in the video display area if the first certification and the second certification succeed, and inhibiting the decoded data from being written in the video display area if the first certification fails and the second certification succeeds; and outputting, to a monitor display for reproduction, the protected decoded data stored in the video display area in the video memory.","According to a third aspect of the invention, there is provided a method of controlling output of reproduced video data to a monitor display, comprising: decoding video data containing digital watermark information to derive decoded data; determining, based on information included in the video data, whether or not first certification for certifying that the video data has been reproduced by a legitimate route succeeds; dividing a screen of the monitor display into a plurality of areas; determining, for each of the areas using the digital watermark information, whether or not second certification for certifying that the video data is to be protected from being copied succeeds; and converting the decoded data into a protected decoded data from being copied and outputting the protected decoded data to the monitor display if the first certification and the second certification succeed, and inhibiting the decoded data from being output to the monitor display if the first certification fails and the second certification succeeds.","According to a fourth aspect of the invention, there is provided a method of controlling output of reproduced video data to a monitor display, comprising: decoding video data containing digital watermark information to derive decoded data; determining, based on information included in the video data, whether or not first certification for certifying that the video data has been reproduced by a legitimate route succeeds; recognizing a plurality of windows on a screen of the monitor display; determining, for each of recognized windows using the digital watermark information, whether or not second certification for certifying that the video data is to be protected from being copied succeeds; and converting the decoded data into a protected decoded data from being copied and outputting the protected decoded data to the monitor display if the first certification and the second certification succeed, and inhibiting the decoded data from being output to the monitor display if the first certification fails and the second certification succeeds.","According to a fifth aspect of the invention, there is provided a method of controlling output of reproduced video data to a monitor display, comprising: decoding video data containing digital watermark information to derive decoded data; determining, based on information included in the video data, whether or not first certification for certifying that the video data has been reproduced by a legitimate route succeeds; hooking an imaging instruction API (Application Programming Interface) to be transferred from an operating system to a graphics driver, the hooked imaging instruction API corresponding to the video data; determining whether or not second certification for certifying that the video data is to be protected from being copied succeeds, using the digital watermark information; and converting the decoded data into a protected decoded data from being copied and outputting the protected decoded data to the monitor display if the first certification and the second certification succeed, and inhibiting the decoded data from being output to the monitor display if the first certification fails and the second certification succeeds.","According to a sixth aspect of the invention, there is provided a computer system with a monitor display, comprising:","a decoder unit configured to decode video data to derive decoded data and configured to determine, based on information included in the video data, whether or not first certification for certifying that the video data is legitimately reproduced data succeeds; and","a graphics controller which determines whether or not the video data contains digital watermark information if the first certification succeeds,","the graphics controller determining, using the digital watermark information, whether or not second certification for certifying that the video data is to be protected from being copied succeeds,","the graphics controller outputting decoded data to the monitor display in success of the first certification and failure of the second certification, and","the graphics controller limiting a manner of displaying the decoded data on the monitor display in one of failure of the first certification and success of the second certification.","According to a seventh aspect of the invention, there is provided a method of controlling output of reproduced video data to a monitor display, comprising: decoding video data to derive decoded data; determining, based on information included in the video data, whether or not first certification for certifying that the video data has been reproduced by a legitimate route succeeds; limiting a manner of displaying the decoded data on the monitor display if the first certification fails; determining whether or not the video data contains digital watermark information, if the first certification succeeds; forming a video display area on a video memory at a position corresponding to the video data, the video display area storing the decoded data; writing the decoded data in the video display area if the video data fails to contain the digital watermark information; determining, using the digital watermark information, whether or not second certification for certifying that the video data is to be protected from being copied succeeds, if the video data contains the digital watermark information; writing the decoded data in the video display area if the second certification fails; limiting a manner of writing the decoded data in the video display area if the second certification succeeds; and outputting, to the monitor display for reproduction, the decoded data stored in the video display area.","According to an eighth aspect of the invention, there is provided a method of controlling output of reproduced video data to a monitor display, comprising: decoding video data to derive decoded data; determining, based on information included in the video data, whether or not first certification for certifying that the video data has been reproduced by a legitimate route succeeds; limiting a manner of displaying the decoded data on the monitor display if the first certification fails; dividing a screen of the monitor display into a plurality of areas if the first certification succeeds; determining, for each of the areas, whether or not the video data contains digital watermark information; outputting the decoded data to the monitor display if the video data fails to contain the digital watermark information; determining, for each of the areas using the digital watermark information, whether or not second certification for certifying that the video data is to be protected from being copied succeeds, if the video data contains the digital watermark information; outputting the decoded data to the monitor display for reproduction if the second certification fails; and limiting a manner of displaying the decoded data on the monitor display if the second certification succeeds.","According to a ninth aspect of the invention, there is provided a method of controlling output of reproduced video data to a monitor display, comprising: decoding video data to derive decoded data; determining, based on information included in the video data, whether or not first certification for certifying that the video data has been reproduced by a legitimate route succeeds; limiting a manner of displaying the decoded data on the monitor display if the first certification fails; recognizing a plurality of windows on a screen of the monitor display if the first certification succeeds; determining, for each of the recognized windows, whether or not the video data contains digital watermark information; outputting the decoded data to the monitor display if the video data fails to contain the digital watermark information; determining, for each of the recognized windows using the digital watermark information, whether or not second certification for certifying that the video data is to be protected from being copied succeeds, if the video data contains the digital watermark information; outputting the decoded data to the monitor display for reproduction if the second certification fails; and limiting a manner of displaying the decoded data on the monitor display if the second certification succeeds.","According to a tenth aspect of the invention, there is provided a method of controlling output of reproduced video data to a monitor display, comprising: decoding video data to derive decoded data; determining, based on information included in the video data, whether or not first certification for certifying that the video data has been reproduced by a legitimate route succeeds; limiting a manner of displaying the decoded data on the monitor display if the first certification fails; hooking an imaging instruction API (Application Programming Interface) transferred from an operating system to a graphics driver, if the first certification succeeds; determining whether or not the video data contains digital watermark information; outputting the decoded data to the monitor display if the video data fails to contain the digital watermark information; determining, using the digital watermark information, whether or not second certification for certifying that the video data corresponding to the hooked imaging instruction API is to be protected from being copied succeeds, if the video data contains the digital watermark information; outputting the decoded data to the monitor display for reproduction if the second certification fails; and limiting a manner of displaying the decoded data on the monitor display if the second certification succeeds.",{"@attributes":{"id":"p-0058","num":"0059"},"figref":"FIG. 1","b":["11","10","12","13","14","12","15","14"]},"The video data  is data compressed on the basis of, for example, the MPEG-2 standard, and is reproduced as an encoded stream from a DVD by a DVD drive under the control of a video reproduction application program. The video data  contains copy protection information that constitutes digital watermark information. The reproduced video data  is decoded by the decoder . The decoder  is, for example, an MPEG-2 decoder, which is realized only by hardware, or using software such as video reproduction application program. In this embodiment, the decoder  also has a certification function for certifying whether or not the input video data  has been reproduced through a legitimate reproduction route (this certification will hereinafter be referred to as\u201cdecoder certification\u201d).","The decoded data output from the decoder  is transferred to the video memory  via the operating system and graphics driver . The data transferred to the video memory  is written to a video data display area generated in the video memory  (this area is generally called an overlay surface or video frame buffer, but will be referred to as the\u201coverlay surface\u201d in the description below).","The graphics controller  reads the data to be displayed and written to the overlay surface of the video memory , and displays it on the monitor display . The data written to the overlay surface is displayed on, for example, a video data reproduction window assigned by a window manager to the video data reproduction program, if the computer system of the embodiment is equipped with a window system in which a window is assigned to each application program.","In the embodiment, the graphics controller  has a copy protection function A and certification function B. When an overlay surface is generated in the video memory , the graphics controller  performs certification (which is hereinafter referred to as\u201ccopy protection certification\u201d) as to whether or not the video data  is copy-prevented data, i.e., whether or not the video data  contains digital watermark information. If the copy protection certification has succeeded, i.e., if it is determined that the video data  is copy-prevented data, the graphics controller  requests the decoder  of the above-mentioned decoder certification.","If the decoder certification has succeeded, the graphics controller  determines that the video data  has been reproduced through a legitimate reproduction route. The controller  then performs copy protection processing on the data decoded by the decoder  and supplied via the graphics driver , writes the resultant data to the overlay surface of the video memory , and outputs it to the monitor display . On the other hand, if the decoder certification has failed, the graphics controller  determines that the video data  is reproduced by an illegitimate reproduction route, writes no data to the overlay surface, and inhibits the output of the decoded data to the monitor display .","When the computer assigns a window to each application program for video data reproduction, the process of synthesizing an image using the overlay surface is included in the reproduction procedure. When an overlay surface is generated in the video memory , the graphics controller  performs copy protection certification and refers to the result of decoder certification made by the decode . After that, the controller  performs copy protection processing on the video data that contains copy protection information, and then outputs the resultant data to the monitor display . Thus, copy protection can be performed effectively.","The operation of the graphics controller  will now be described roughly.","After the video data  is decoded by the decoder , it is subjected to image synthesis. The to-be-displayed image data thus obtained is transferred to the video memory  and written to an overlay surface therein under the control of the graphics driver . The image data written to the overlay surface is overlaid on the graphics data written in the video memory , under the control of the graphics controller .  shows this state.","As seen from , the video memory  is divided into three areas\u2014a primary surface , secondary surface  and overlay surface . The graphics controller  automatically switches the primary surface  and secondary surface  from one to the other to display graphics data.","The primary surface  and secondary surface  are used alternately. Specifically, while graphics data is read from the primary surface  and output to the monitor display , new graphics data is written to the secondary surface . As a result, data, which is now being written, is prevented from being displayed, thereby smoothing, for example, the movement of a window.","Video data written to the overlay surface  is displayed in the form of an overlay window (video reproduction window)  on a present reproduction screen . The graphics controller  computes the size of the overlay window , and combines the video data in the overlay surface  with the video data in the primary or secondary surface  or  so that the size of the to-be-displayed video data is adjusted to that of the overlay window . As a result, video data can be written to the overlay surface  regardless of the timing of display and the size of the overlay window.","The above-described copy protection certification by the graphics controller  and the reference by the controller  to the result of decoder certification must be made before particular image processing, such as attachment of an image to a sphere image. In other words, copy protection certification and reference to the result of decoder certification must be made concerning the data obtained before any image processing is performed thereon.","Referring to the flowchart of , a description will be given of the procedure of controlling the output of reproduced video data, employed in the embodiment, i.e., the procedure of decoding video data  and outputting the decoded data to the monitor display .","Firstly, video data  reproduced by, for example, a DVD drive (not shown) is input and decoded by the decoder  (steps S and S). Subsequently, a video display area for storing the decoded data, for example, overlay surface, is generated in the video memory  (step S). Copy protection certification as to whether or not the video data  is copy-prevented data, i.e., whether or not the video data  contains digital watermark information, is performed (step S). If the video data  contains no digital watermark information, the decoded data is written to the video data display area (step S). If, on the other hand, the video data  contains digital watermark information, the graphics controller  refers to the result of certification made by the decoder  concerning this data (step S).","If the decoder certification concerning the video data has succeeded, i.e., if the video data is certified to have been reproduced by a legitimate reproduction route, copy protection certification as to whether or not the video data  should be protected from being copied is performed using the digital watermark information (step S). For example, at the step S, it is determined from the digital watermark information whether or not the video data  has been copied so far less than a predetermined number of times. If the copy protection certification has failed (i.e., it is determined that the video data  has been copied so far less than the predetermined number of times), the decoded data is written to the video data display area (step S). On the other hand, if the copy protection certification has succeeded, the manner of writing the decoded data to the video data display area is limited (step S). Lastly, the decoded data stored in the video data display area of the video memory  is output to the monitor display  for reproduction (step S).","On the other hand, the video data whose decoder certification has failed, i.e., the video data reproduced by an illegitimate reproduction route, is prevented from being written to the overlay surface of the video memory  and output to the monitor display .",{"@attributes":{"id":"p-0075","num":"0076"},"figref":["FIG. 4","FIG. 4","FIG. 1"],"b":["14","14","14","14","15","15","14","10","10"]},"If the video data  is copy-prevented data, the graphics controller  refers to the result of certification made by the decoder  concerning this data. Concerning the video data whose certification has succeeded, i.e., the video data certified to have been reproduced by a legitimate reproduction route, the graphics controller  performs copy protection processing on the data decoded by the decoder  and outputs the resultant data to the monitor display . In contrast, concerning the video data whose decoder certification has failed, i.e., the video data reproduced by an illegitimate reproduction route, the controller  inhibits the output of this data to the monitor display .","In a personal computer with the window system, if a window (overlay surface) is assigned to each application program, the process of synthesizing an image using the overlay surface is performed. Therefore, the same copy protection method as employed in the first embodiment can be utilized.","On the other hand, if video data is directly written into the video frame memory for display, the graphics controller  performs copy protection certification and refers to the result of decoder certification, concerning the decoded data in the display video frame memory that corresponds to the output to the monitor display . As a result, the decoded data corresponding to copy-prevented video data is subjected to copy protection processing, and then output to the monitor display . Thus, the video data is effectively protected from being copied.","In the embodiment, the reproduction screen may be divided, for example, in the following manners:","(1-1) The reproduction screen is divided into a predetermined number of equal-size columns and a predetermined number of equal-size rows. (1-2) The reproduction screen is divided such that the central area is larger than the peripheral areas.","In the above computer system, as shown in, for example, , it is possible to simultaneously reproduce DVD  data in a window on a reproduction screen , DVD  data in another window on the screen , spreadsheet data in a further window on the screen , and DVD  data directly on the screen . In this case, assume that the reproduction screen is divided into three equal columns and two equal rows, as in the reproduction screen  shown in , and it is necessary to protect DVD  data and DVD  data from being copied. If copy protection certification is performed as to whether or not the data in each of areas  to  is copy-prevented data, i.e., whether or not each area contains digital watermark information, copy protection information is detected from the areas , ,  and , since these areas contain the DVD  or  data.","Further, in the case of a reproduction screen  in , only the hatched area , which contains the largest number of copy protection information items, is protected from being copied. In the case of a reproduction screen  in , the black areas  and , signal values detected in which are higher than a predetermined threshold value set for the copy protection information, are protected from being copied.","The dividing manner of the reproduction screen of the monitor display  is not limited to that employed in the above reproduction screens  to , in which the screen is divided into equal-size rows and equal-size columns. Alternatively, the reproduction screen may be divided like a reproduction screen  in , in which the central area is larger than the peripheral areas. Further, the reproduction screen may be divided into triangular areas like a reproduction screen  in , or circular areas. The reproduction screen may also be divided into triangular or rectangular areas like a reproduction screen .","Referring then to the flowchart of , the procedure of controlling the output of reproduced video data will be described.","Firstly, video data  reproduced by, for example, a DVD drive (not shown) is input and decoded (steps S and S). Subsequently, the decoded data is written into the video memory  (step S). At this time, a video display area, such as the overlay surface, may be generated as in the first embodiment.","Thereafter, the reproduction screen of the monitor display  is divided into a plurality of areas (step S), and performs copy protection certification for each area as to whether or not video data  is copy-prevented data, i.e., whether or not it contains digital watermark information (step S). If the video data  contains no digital watermark information, the decoded data is written to the video data display area (step S). If, on the other hand, the video data  contains digital watermark information, the graphics controller  refers to the result of certification made by the decoder  concerning the video data  (step S).","Concerning the video data whose certification has succeeded, i.e., the video data certified to have been reproduced by a legitimate reproduction route, copy protection certification as to whether or not the video data  should be protected from being copied is performed using the digital watermark information (step S). For example, at the step S, it is determined from the digital watermark information whether or not the video data  has been copied so far less than a predetermined number of times. If the copy protection certification has failed (i.e., it is determined that the video data  has been copied so far less than the predetermined number of times), the decoded data is written to the video data display area (step S). On the other hand, if the copy protection certification has succeeded, the manner of writing the decoded data to the video data display area is limited (step S). Lastly, the decoded data stored in the video data display area of the video memory  is output to the monitor display  for reproduction (step S).","On the other hand, the video data whose decoder certification has failed, i.e., the video data reproduced by an illegitimate reproduction route, is prevented from being written into the video memory  and output to the monitor display .",{"@attributes":{"id":"p-0089","num":"0090"},"figref":["FIG. 8","FIG. 8","FIG. 1"],"b":["14","14","14","14","15","15","10"]},"If it is determined that the video data  contains digital watermark information, the graphics controller  refers to the result of certification made by the decoder  concerning this data. Concerning the video data whose certification has succeeded, i.e., the video data certified to have been reproduced by a legitimate reproduction route, the graphics controller  performs copy protection processing on decoded data and outputs the resultant data to the monitor display .","In contrast, concerning the video data whose certification has failed, i.e., the video data reproduced by an illegitimate reproduction route, the controller  inhibits the output of this data to the monitor display .","If video data is directly written into the display video frame memory, the graphics controller  performs copy protection certification and refers to the result of decoder certification, concerning the decoded data in the display video frame memory that corresponds to the output to the monitor display . As a result, the decoded data corresponding to video data that is copy-prevented data is subjected to copy protection processing, and then output to the monitor display . Thus, the video data is effectively protected from being copied.","The following methods, for example, may be used as the window recognition method in the embodiment:","(2-1) Method using edge detection","(2-2) Method using the frequency of access to the memory","(2-3) Method using a pixel value distribution","Firstly, a method for recognizing a window based on edge detection using primary differential will be described. In the boundary of areas, the pixels have significantly different brightness values. Therefore, if differential is performed concerning changes in pixel value, edge detection can be performed. If standard difference computation is executed, noise components contained in video data may also be involved in the computation process. To avoid this, some filters having a function for reducing the level of noise and removing noise itself have been proposed. An example using a Sobel filter will now be described.","As is shown in , the Sobel filter multiplies, by respective predetermined coefficients, the values of nine pixels that include a target pixel and its peripheral eighth pixels, and sums up the multiplication results. In the example of , this process is performed, using a coefficient matrix  in the horizontal direction and a coefficient matrix  in the vertical direction. If the horizontal and vertical sums obtained in the process are represented by Gh and Gv, respectively, the value of the target pixel is given by (Gh+Gv). From this, a window edge for recognizing a window is detected.","A method for recognizing a window based on the frequency of access will be described. Assume, for example, that as shown in , the computer system simultaneously reproduces DVD  data, DVD  data and spreadsheet data in respective windows on a reproduction screen , and DVD  data directly on the screen  (i.e., the screen  exhibits the same state as the screen  in ). In this case, the video memory  defines therein memory areas corresponding to the DVD , DVD  and DVD . During reproduction of a DVD, the frequency of access to the memory area corresponding to the DVD is considered very high. In other words, it is strongly possible that the memory area now accessed at a high frequency corresponds to the window that displays DVD data that is now being reproduced.","Further, assume that pixel value distributions  and  have been acquired in the horizontal line H and vertical line V of the reproduction screen  of , respectively. In this case, the position of a window can be determined from change points Ha and Hb in the pixel value distribution  and change points Va and Vb in the pixel value distribution . Thus, the window is recognized.","Referring to the flowchart of , a description will be given of the procedure of controlling the output of reproduced video data, employed in the embodiment.","Firstly, video data  reproduced by, for example, a DVD drive (not shown) is input and decoded (steps S and S). The decoded data is written into the video memory  (step S), After that, window recognition is performed on the reproduction screen of the monitor display  (step S), and copy protection certification as to whether the video data  is copy-prevented data, i.e., whether or not the data contains digital watermark information, is performed (step S). If it is determined at the step S that the video data  contains digital watermark information, the graphics controller  refers to the result of certification made by the decoder  concerning this data (step S).","Concerning the video data whose certification has succeeded, i.e., the video data certified to have been reproduced by a legitimate reproduction route, copy protection certification as to whether or not the video data  should be protected from being copied is performed using the digital watermark information (step S). For example, at the step S, it is determined from the digital watermark information whether or not the video data  has been copied so far less than a predetermined number of times. If the copy protection certification has failed (i.e., it is determined that the video data  has been copied so far less than the predetermined number of times), the decoded data is written to the video data display area (step S). On the other hand, if the copy protection certification has succeeded, the manner of writing the decoded data to the video data display area is limited (step S). Lastly, the decoded data stored in the video data display area of the video memory  is output to the monitor display  for reproduction (step S).","On the other hand, concerning the video data whose decoder certification has failed, i.e., the video data reproduced by an illegitimate reproduction route, the graphics controller  does not write the data decoded by the decoder  into the video memory , thereby preventing the data from being output to the monitor display .",{"@attributes":{"id":"p-0105","num":"0106"},"figref":"FIG. 12","b":["16","17"]},"In the fourth embodiment, when the OS  executes an imaging instruction API (Application Programming Interface), the API hook unit  hooks an imaging instruction API call. The graphics controller  performs copy protection certification as to whether or not video data , which is to be output using the hooked API call, contains digital watermark information.","If the video data  is copy-prevented data, the graphics controller  refers to the result of certification made by the decoder  concerning this data. Concerning the video data certified to have been reproduced by a legitimate reproduction route, the graphics controller  performs copy protection processing on the data decoded by the decoder , and outputs the resultant data to the monitor display .","On the other hand, concerning the video data reproduced by an illegitimate reproduction route, the graphics controller  prevents the decoded data from being output to the monitor display .","A detailed description will be given of the operations related to the imaging instruction API call.","When the OS  executes an imaging instruction API, the API hook unit  hooks an imaging instruction API call, transfers control to the copy protection function A of the graphics controller , and generates an API call after copy protection information is detected. More specifically, when an application has issued an imaging instruction, a certain imaging routine is called and an interruption occurs, therefore a pointer in a jump table corresponding to the interruption is fetched.","The type of interruption can be determined by reading the contents of the memory indicated by the pointer. If it is determined that the interruption relates to an imaging routine, the graphics controller  performs copy protection certification as to whether or not video data  is copy-prevented data, i.e., whether or not the data contains digital watermark information.","If the video data  is copy-prevented data, the graphics controller  refers to the result of certification made by the decoder  concerning this data. If it is determined from the decoder certification that the video data  has been reproduced by a legitimate reproduction route, the graphics controller  causes an API call to be generated, then performs copy protection processing on the decoded data and outputs the resultant data to the monitor display .","On the other hand, if it is determined that the video data has been reproduced by an illegitimate reproduction route, the graphics controller  prevents the generation of an API call to thereby prevent the decoded data from being output to the monitor display .","The copy protection method employed in the first to third embodiments expects no supports from the OS , while the copy protection method employed in the fourth embodiment expects supports from the OS . When video data is reproduced, an imaging instruction API for flushing the screen and an imaging instruction API for window operation, etc. are utilized. When such an imaging instruction API is transferred to the graphics driver , the graphics controller  performs copy protection certification and refers to the result of decoder certification, thereby performing copy protection processing on the copy-prevented data and outputting the resultant data to the monitor display . Thus, copy protection can be performed effectively.","Referring now to the flowchart of , a description will be given of the procedure of controlling the output of reproduced video data, employed in the embodiment.","Firstly, video data  reproduced by, for example, a DVD drive (not shown) is input and decoded by the decoder  (steps S and S). Subsequently, the decoded data is written into the video memory  (step S).","After that, the OS  hooks an imaging instruction API to be transferred to the graphics driver  (step S), thereby performing copy protection certification as to whether or not the video data  is copy-prevented data, i.e., whether or not the video data  contains digital watermark information (step S). If the video data  contains no digital watermark information, the decoded data is written to the video data display area (step S). If, on the other hand, the video data  contains digital watermark information, the graphics controller  refers to the result of certification made by the decoder  concerning this data (step S).","If the certification of the video data has succeeded, the graphics controller  determines that the video data has been reproduced by a legitimate reproduction route, copy protection certification as to whether or not the video data  should be protected from being copied is performed using the digital watermark information (step S). For example, at the step S, it is determined from the digital watermark information whether or not the video data  has been copied so far less than a predetermined number of times. If the copy protection certification has failed (i.e., it is determined that the video data  has been copied so far less than the predetermined number of times), the decoded data is written to the video data display area (step S). On the other hand, if the copy protection certification has succeeded, the manner of writing the decoded data to the video data display area is limited (step S). Lastly, the decoded data stored in the video data display area of the video memory  is output to the monitor display  for reproduction (step S).","On the other hand, the video data whose decoder certification has failed, i.e., the video data reproduced by an illegitimate reproduction route, is prevented from being written into the video memory  and output to the monitor display .","(Copy Protection)","The following methods, for example, may be used as the copy protection method in the first to fourth embodiments:","(3-1) The level of the brightness or color difference component of the target portion is changed.","(3-2) The target portion is hatched by a noise line, such as a red line.","(3-3) The target portion is hatched by thin noise lines.","(3-4) The target portion is solidly shaded with a single color.","(3-5) The target portion is covered with a mosaic pattern.","(3-6) The brightness or color difference component of the target portion is reversed.","Assume, for example, that in the example of  where DVD  data, DVD  data and spreadsheet data are reproduced in respective windows displayed on the reproduction screen  of the monitor display , and DVD  data is reproduced directly on the screen , the reproduction screen is divided, by the area-dividing method employed in the second embodiment, into two rows and three columns like the reproduction screen  in .","In , the reproduction screen  is an example where data in the area  should be protected from being copied, and is copy-prevented by hatching. Similarly, the reproduction screen  is an example where data in the areas  and  should be protected from being copied, and is copy-prevented by solidly shading them.","Where a plurality of copy protection manners are employed on a single reproduction screen (for example, in , DVD  data should not be copied, DVD  data may be copied a predetermined number of times or less, and DVD  data may be copied), the following methods, for example, may be used:","(4-1) Method for protecting data in areas in accordance with respective conditions for the areas;","(4-2) Method for performing copy protection based on the data to be protected in the most reliable manner;","(4-3) Method for protecting the entire monitor display;","(4-4) Method for protecting only a data-reproducing area with high priority; and","(4-5) Method for protecting Macrovision and CGMS-A data in accordance with the data to be protected in the most reliable manner","Assume, for example, that in the example of  where DVD  data, DVD  data and spreadsheet data are reproduced in respective windows displayed on the reproduction screen  of the monitor display , and DVD  data is reproduced directly on the screen , the reproduction screen is divided, by the area-dividing method employed in the second embodiment, into two rows and three columns like the reproduction screen  in .","In , the reproduction screen  is an example where data in the area  should be protected from being copied, and is copy-prevented by hatching. In this case, data in each area is protected in accordance with the condition for each area. Similarly, the reproduction screen  is an example where data in the areas  and  should be protected from being copied. In this case, it is requested that data in the area  be copy-prevented by hatching, and data in the area  be copy-prevented based on the Macrovision and CGMS-A schemes. Therefore, data in the areas  and  is copy-prevented in the most limited display manner (i.e., by solid black shading).","(Copy Protection Certification and Decoder Certification)","Assume here that copy protection information has been illegally altered using software. In each of the above-described embodiments, two-stage certification, i.e., copy protection certification by the graphics controller  and decoder certification by the decoder , is performed. In this structure, even if an error occurs in copy protection certification because of illegal alteration of copy protection information, illegal copying is prevented by decoder certification by the decoder .","Assume, for example, that video data  to  recorded on a rewritable disk, such as a DVD-RAM, is reproduced and output to the monitor display  as shown in . Further, assume that the decoder  performs certification of disks from which the video data is reproduced, and only a disk of number  is a legitimate one. In other words, assume that the decoder  determines that only the video data reproduced from the disk of number  is the one reproduced through a legitimate reproduction route.","The process shown in  comprises the step of inputting the video data  to  reproduced from the disks, a copy protection certification step S by the graphics controller , and a disk certification step S by the decoder . Specifically, disk certification is performed in the following manner. For example, the decoder  reads a serial number recorded on a disk, inquires at a certification system via the Internet whether or not the read serial number is a legitimate one, and certifies that the disk is legitimate if the certification system certifies so.","When video data  is input, copy protection certification as to whether or not the data is copy-limited data is performed using digital watermark information detected from the data (step S). The copy protection information contained in copy-limited video data includes data for managing the number of copy-permitted occasions (including zero). From the certification, the video data  is detected to be copy-limited data (in this case, the number of copy-permitted occasions is not zero). Subsequently, the decoder  performs disk certification (step S). In this case, since the number of the disk from which the video data  is reproduced is \u201c5\u201d, the decoder  determines that disk certification has succeeded, whereby the data decoded by the decoder  is directly output to and reproduced on the monitor display .","Further, when video data  is input, copy protection certification as to whether or not the data is copy-prevented data is performed at the step S using digital watermark information detected from the data. From the certification, the video data  is detected to be copy-prevented data (in this case, the number of copy-permitted occasions is zero). Subsequently, the decoder  performs disk certification (step S). In this case, since the number of the disk from which the video data  is reproduced is \u201c5\u201d, the decoder  determines that disk certification has succeeded. Therefore, the data decoded by the decoder  is subjected to copy protection (at the time, the data is covered with a mosaic pattern), and then output to and reproduced on the monitor display .","When video data  is input, copy protection certification as to whether or not the data is copy-limited data is performed using digital watermark information detected from the data (step S). From the certification, the video data  is detected to be copy-limited data (in this case, the number of copy-permitted occasions is not zero). Subsequently, the decoder  performs disk certification (step S). In this case, since the number of the disk from which the video data  is reproduced is \u201c4\u201d, the decoder  determines that disk certification has failed, whereby the data decoded by the decoder  is not output to the monitor display , i.e., is not reproduced. It can be assumed that the video data  is illegally altered from \u201ccopy prevention\u201d to \u201ccopy permission\u201d by certain software.","When video data  is input, copy protection certification as to whether or not the data is copy-prevented data is performed at the step S using digital watermark information detected from the data. From the certification, the video data  is detected to be copy-prevented data (in this case, the number of copy-permitted occasions is zero). Subsequently, the decoder  performs disk certification (step S). In this case, since the number of the disk from which the video data  is reproduced is \u201c4\u201d, the decoder  determines that disk certification has failed. Therefore, the data decoded by the decoder  is not output to the monitor display , i.e., is not reproduced.","Fifth to eighth embodiments obtained by modifying the first to fourth embodiments will now be described. In the fifth to eighth embodiments, the points that differ from the first to fourth embodiments will be mainly explained.",{"@attributes":{"id":"p-0145","num":"0146"},"figref":["FIG. 15","FIG. 1"],"b":["14","14","14","14"]},"In the fifth embodiment, the graphics controller  detects whether or not video data  contains digital watermark information. If the data does not contain digital watermark information, the controller  outputs decoded data to the monitor display . If, on the other hand, the data contains digital watermark information, the controller  performs, when an overlay surface is generated in the video memory , copy protection certification as to whether or not video data  should be protected from being copied, using the digital watermark information detected from the video data .","If the graphics controller  determines from the copy protection certification that the video data  should be protected from being copied, it refers to the result of certification made by the decoder . If the decoder certification has succeeded and the copy protection certification has failed, the graphics controller  writes the data decoded by the decoder  to the overlay surface of the video memory , and outputs it to the monitor display . On the other hand, if the decoder certification has failed, the graphics controller  prevents the decoded data from being written to the overlay surface, thereby preventing the output of the decoded data to the monitor display .","When the computer reproduces video data with a window assigned to each application program, it performs the process of synthesizing an image using an overlay surface. In this case, the graphics controller  performs copy protection certification and refers to the result of decoder certification. If the copy protection certification concerning video data has succeeded or the decoder certification concerning video data has failed, the controller  limits the manner of displaying the video data on the monitor display  (this will be also referred to as \u201cdisplay limitation\u201d). Thus, copy protection can be made effectively. Since the operation of the graphics controller  is substantially the same as that of the corresponding controller in the first embodiment, no detailed description is given thereof.","Referring to the flowchart of , a description will be given of the procedure of controlling the output of reproduced video data, according to the embodiment, i.e., the process of decoding video data  and outputting the decoded data to the monitor display .","Firstly, video data  reproduced by, for example, a DVD drive (not shown) is input and decoded by the decoder  (steps S and S). Subsequently, the decoder  performs decoder certification as to whether or not the video data  has been reproduced by a legitimate reproduction route (step S). If the decoder certification has failed, i.e., if the video data  has been reproduced by an illegitimate reproduction route, the manner of displaying the decoded data on the monitor display  is limited (step S).","If the decoder certification has failed, i.e., if the video data  has been reproduced by a legitimate reproduction route, a video data display area for storing the decoded data, such as an overlay surface, is generated in the video memory , thereby detecting whether or not the video data  contains digital watermark information (steps S and S).","If the video data  contains no digital watermark information, the decoded data is written to the video data display area (step S). If, on the other hand, the video data  contains digital watermark information, copy protection certification as to whether or not the video data  should be protected from being copied is performed using the digital watermark information (step S). For example, at the step S, it is determined from the digital watermark information whether or not the video data  has been copied so far less than a predetermined number of times. If the copy protection certification has failed (i.e., it is determined that the video data  has been copied so far less than the predetermined number of times), the decoded data is written to the video data display area (step S). On the other hand, if the copy protection certification has succeeded, the manner of writing the decoded data to the video data display area is limited (step S). Lastly, the decoded data stored in the video data display area of the video memory  is output to the monitor display  for reproduction (step S).","If, on the reproduction screen of the monitor display , the display of video data whose decoder certification has succeeded and copy protection certification has failed is superimposed upon that of video data whose decoder certification has failed or copy protection certification has succeeded, the manner of writing data to the overlay surface is limited. Thus, the manner of displaying decoded data on the monitor display  is limited. A description will be given of specific methods for limiting the manner of displaying data on the monitor display , with reference to the reproduction screens ,  and  shown in , B and C.","In the reproduction screen  of , assume that decoder certification has failed or copy protection certification concerning DVD  data has succeeded, and decoder certification has succeeded and copy protection certification concerning DVD  data has failed (i.e., the DVD  data has been reproduced by a legitimate route). In this case, it is necessary to limit the display manner of the DVD  data. Therefore, the area for the DVD  data in the overlay surface (except for the area for the DVD  data) is masked as indicated by hatching in .","In contrast, in the reproduction screen  of , assume that decoder certification concerning DVD  data has failed or copy protection certification concerning DVD  data has succeeded, and decoder certification concerning DVD  data has succeeded and copy protection certification concerning DVD  data has failed (i.e., the DVD  data has been reproduced by a legitimate route). In this case, it is necessary to limit the display manner of the DVD  data. Therefore, only the area for the DVD  data in the overlay surface is masked as indicated by hatching in .","Further, in reproduction screen  of , assume that decoder certification concerning DVD  data has failed or copy protection certification concerning DVD  data has succeeded, and decoder certification concerning DVD  data has succeeded and copy protection certification concerning DVD  data has failed (i.e., the DVD  data has been reproduced by a legitimate route). In this case, to limit the display manner of the DVD  data, the area for the DVD  data (including the area for the DVD  data) is masked as indicated by hatching in .","The method for limiting the manner of displaying data on the area in which the area for data whose decoder certification concerning DVD  data has failed or copy protection certification concerning DVD  data has succeeded is superimposed upon the area for data whose decoder certification concerning DVD  data has succeeded and copy protection certification concerning DVD  data has failed may differ from that for limiting the manner of displaying data on the area in which no such superimposition exists.","The limitation or inhibition of the writing of decoded data may be realized by changing a value on the overlay surface. For example, in the reproduction screen  of , to limit the display manner of the DVD  data whose decoder certification has failed and copy protection certification has succeeded the area of the overlay surface corresponding to the DVD  data may be masked as indicated by hatching in .","When the display area for video data whose decoder certification has succeeded and copy protection certification has failed is changed on the reproduction screen of the monitor display , the changed display area can be subjected to copy protection if the contents of change is reported to the graphics controller . The display area change is, for example, a change in position or size, clipping, etc.","Specifically, when writing video data  into the video memory  in the system of , the graphics controller  holds, in the display area data holding unit G, information as to the video data writing position in the video memory . When the display area for decoded data has been changed on the monitor display , the contents of the display area data holding unit G is updated, and the graphics controller  performs copy protection based on the updated display area information.","Although in the embodiment, a description has been given of copy protection certification performed in the overlay surface, copy protection certification may be performed in other display areas as stated below.","(5-1) Copy protection certification in overlay surface","(5-2) Copy protection certification in primary surface","(5-3) Copy protection certification in overlay surface and that in primary surface","(5-4) Copy protection certification in overlay surface and that in primary surface, and copy protection certification in a video display area formed of overlay surface and primary surface",{"@attributes":{"id":"p-0166","num":"0167"},"figref":"FIG. 18","b":["15","101","102","103","101","102"]},{"@attributes":{"id":"p-0167","num":"0168"},"figref":["FIG. 19","FIG. 19","FIG. 1"],"b":["14","14","14","14","14","14","15","15","14","10","10"]},"In a personal computer with the window system, if a window (overlay surface) is assigned to each application program, the process of synthesizing an image using the overlay surface is performed. Therefore, the same copy protection method as employed in the first embodiment can be utilized.","On the other hand, if video data is directly written into the video frame memory for display, copy protection certification and decoder certification are performed on the decoded data in the display video frame memory that corresponds to the output to the monitor display . The decoded data corresponding to video data whose decoder certification has failed or copy protection certification has succeeded is output to the monitor display  with the manner of display limited. Thus, the decoded data is effectively protected from being copied.","In the sixth embodiment, the reproduction screen may be divided in the following manners, as in the second embodiment:","(1-1) The reproduction screen is divided into a predetermined number of equal-size columns and a predetermined number of equal-size rows.","(1-2) The reproduction screen is divided such that the central area is larger than the peripheral areas.","In addition to the above, (1-3) the division method and area may be changed with lapse of time.","In the sixth embodiment, it is possible, like the second embodiment, to simultaneously reproduce DVD  data, DVD  data and spreadsheet data in respective windows on the screen , and DVD  data directly on the screen , as shown in .","In this case, a reproduction screen  is divided into three equal columns and two equal rows as shown in , and assume that DVD  data has been reproduced by an illegitimate route, copy protection certification concerning DVD  and DVD  data has succeeded, and copy protection certification concerning DVD  data has failed. Firstly, it is determined whether or not data in each area  to  contains digital watermark information. As a result, it is determined that data in the areas  and  contains digital watermark information. After that, copy protection certification is performed on the data in the areas  and , and it is determined that only the certification in the area  has succeeded, therefore the display manner of the data in the area  is limited. The reproduction screen  of  is the case where the display manner of data is limited in the area  as indicated by hatching. Further, the reproduction screen  is the case where it is determined that the DVD  data has been produced by an illegitimate route, and the display manner of data is limited in the areas  and  by solid shading. In the sixth embodiment, the reproduction screen of the monitor display  can be divided by various manners as in the second embodiment.","Referring to the flowchart of , the procedure of controlling the output of reproduced video data employed in the sixth embodiment will be described. This procedure is similar to that of the fifth embodiment except that in the former, the overlay surface-generating step S in  is replaced with an area-dividing step S.","Specifically, video data  is input and decoded, and decoder certification is performed on the video data  (step S to S). If the decoder certification result indicates that the video data  has been reproduced by an illegitimate route, the manner of displaying the decoded data on the monitor display  is limited (step S). If the decoder certification result indicates that the video data  has been reproduced by a legitimate route, the reproduction screen of the monitor display  is divided into a plurality of areas (step S). At this time, a video display area, such as an overlay surface, may be generated as in the fifth embodiment.","Each of the following steps S to S is executed for each area obtained by division at the step S. Specifically, it is determined whether or not video data  contains digital watermark information. If the video data  contains no digital watermark information, decoded data is written into the video memory , while if the video data  contains digital watermark information, it is subjected to copy protection certification using the digital watermark information. If copy protection certification has failed, the decoded data is written into the video memory , while if copy protection certification has succeeded, the manner of writing the decoded data into the video memory  is limited. The decoded data written into the video memory  is output to the monitor display .","When the display manner of the decoded data is limited, this limitation may be performed on the data in the area of the reproduction screen of the monitor display  other than the operation areas for the computer system. For example, in reproduction screens  to  shown in , a task bar and system menu as operation areas are displayed on the lower portion of the screen. These operation areas can be used even after copy protection is performed. On the other hand, if the operation areas, such as the task bar, system menu, etc., are protected, the computer system cannot be operated. In light of this, the operation areas are not subjected to copy protection processing so that they can be always used.","When the display manner of decoded data is limited, this limitation may be performed on the data in the area of the screen of the monitor display  other than the peripheral frame on the screen. For example,  shows a reproduction screen  similar to the reproduction screen  of , and a reproduction screen  obtained after display limitation is performed. In the reproduction screen  after the display limitation, a certain pattern of display limitation is performed inside the frame, while the system menu on the frame is displayed. Thus, it is considered that system operation areas, such as the system menu, are located on the peripheral frame of the screen. Therefore, even if the positions of the system operation areas are unknown, when copy protection processing is performed on the area except for the area corresponding to the peripheral frame as shown in the screen  of , and display limitation is performed on the area other than the operation areas, the operation areas can be always displayed.","In the sixth embodiment, the manners shown in, for example, , B, C and D may be employed as those for changing the division areas with lapse of time. Firstly, as shown in , it is determined whether or not the whole screen of the monitor display  contains digital watermark information. If no digital watermark information is detected, the screen is divided into four areas as shown in , and it is determined whether or not each area contains digital watermark information. If no digital watermark information is detected in each area, the screen is divided into six areas as shown in , thereby determining whether or not each area contains digital watermark information. These operations are repeated until each area thus obtained has a size smaller than a predetermined one.","In the examples shown in , B, C and D, DVD  video data that contains digital watermark information is reproduced. Digital watermark information is not found in each area of the examples of , B and C, but found in the area of the example of  indicated by hatching. Therefore, based on this digital watermark information, display limitation indicated by hatching is performed on the screen of the monitor display .",{"@attributes":{"id":"p-0183","num":"0184"},"figref":["FIG. 24","FIG. 24","FIG. 15"],"b":["14","14","14","14","14","14","15","15","14","10","10"]},"If video data is directly written into the display video frame memory, decoder certification and copy protection certification are performed on the decoded data in the display video frame memory that corresponds to the output to the monitor display . If decoder certification has failed or copy protection certification has succeeded, the decoded data is output to the monitor display , with the manner of display limited. As a result, effective copy protection can be made.","Referring to the flowchart of , a description will be given of the procedure of controlling the output of reproduced video data, employed in the seventh embodiment. The procedure of the seventh embodiment is similar to that of the fifth embodiment except that in the former, the overlay surface-generating step S in  is replaced with a window recognition step S.","Firstly, video data  is input, decoded and subjected to decoder certification (steps S to S). If the result of decoder certification indicates that the video data  has been reproduced by an illegitimate route, the manner of displaying the decoded data on the monitor display  is limited (step S). If the decoder certification result indicates that the video data  has been reproduced by a legitimate route, the reproduction screen of the monitor display  is divided into a plurality of areas (step S). At this time, a video display area, such as an overlay surface, may be generated as in the fifth embodiment.","Each of the following steps S to S is executed for each area obtained by division at the step S. Specifically, it is determined whether or not video data  contains digital watermark information. If the video data  contains no digital watermark information, decoded data is written into the video memory , while if the video data  contains digital watermark information, it is subjected to copy protection certification using the digital watermark information. If copy protection certification has failed, the decoded data is written into the video memory , while if copy protection certification has succeeded, the manner of writing the decoded data into the video memory  is limited. The decoded data written into the video memory  is output to the monitor display .",{"@attributes":{"id":"p-0188","num":"0189"},"figref":["FIG. 26","FIG. 26","FIG. 15"],"b":["16","17","16","17"]},"The copy protection method employed in the fifth to seventh embodiments expects no supports from the OS , while the copy protection method employed in the eighth embodiment expects supports from the OS . When video data is reproduced, an imaging instruction API for flushing the screen and an imaging instruction API for window operation, etc. are utilized. When such an imaging instruction API is transferred to the graphics driver , the graphics controller  performs copy protection certification, and refers to the result of decoder certification. If decoder certification has failed or copy protection certification has succeeded, the video data is output to the monitor display  with the manner of display limited. Thus, copy protection can be performed effectively.","On the other hand, when the OS  is an open source, even if copy protection processing is performed on video data using a function (e.g., API function) of the OS, the video data may well be used illegally by analyzing the source. In light of this, an application for, for example, the decoder  may use an imaging instruction API that directly accesses the video memory , thereby directly connecting this application to the graphics controller  to enable the controller  to perform direct certification.","Referring to the flowchart of , the procedure of controlling the output of reproduced video data employed in the eighth embodiment will be described. This procedure is similar to that of the fifth embodiment except that in the former, the overlay surface-generating step S in  is replaced with an API hook step S. Specifically, video data  is input and decoded by the decoder , and decoder certification is performed as to whether or not the video data  has been reproduced by a legitimate route (step S to S). If the decoder certification has succeeded, the OS  hooks the imaging instruction API transferred to the graphics driver  (step S). At this time, a video display area, such as an overlay surface, may be generated, as in the fifth embodiment.","After that, it is determined whether or not the video data  corresponding to the hooked imaging instruction API contains digital watermark information (step S). If the video data  contains no digital watermark information, the decoded data is written into the video memory , whereas if the data  contains digital watermark information, copy protection certification is performed on the video data  using the digital watermark information (step S). If the copy protection certification on the video data  has failed, the decoded data is written into the video memory , while if the copy protection certification on the video data  has succeeded, the manner of writing the decoded data into the video memory  is limited (step S). Lastly, the decoded data stored in the video memory  is output to the monitor display  for reproduction (step S).","The following manners, for example, may be employed for display limitation in the fifth to eighth embodiments:","(6-1) The brightness or color difference component in a target portion is changed;","(6-2) A noise line, such as a red line, is attached in a target portion;","(6-3) A plurality of thin noise lines are attached in a target portion;","(6-4) A target portion is solidly shaded in a single color;","(6-5) A target portion is covered with a mosaic pattern;","(6-6) The brightness or color difference component in a target portion is reversed; and","(6-7) Output to a target portion is inhibited.","Assume, for example, that DVD  data, DVD  data and spreadsheet data are reproduced in respective windows on the reproduction screen of the monitor display , and DVD  data is directly reproduced on the screen, as is shown in . Further, assume that the reproduction screen is divided into three equal columns and two equal rows as shown in , using area-dividing method employed in the sixth embodiment.","The reproduction screen  of  is an example where it is necessary to perform display limitation on the data in area , and display limitation is performed by hatching. Further, the reproduction screen  of  is an example where it is necessary to perform display limitation on the data in areas  and , and display limitation is performed by solid black shading.","The following methods, for example, may be used for realizing different types of display limitation for a plurality of simultaneously reproduced video data items:","(1) Method for limiting the manner of displaying data items in respective areas in accordance with the states of the data items;","(2) Method for limiting the display manner based on the data whose display manner is to be limited in the most reliable manner;","(3) Method for limiting the display manner of the entire monitor display;","(4) Method for limiting the display manner of a data-reproducing area with high priority; and","(5) Method for limiting the display manner of Macrovision and CGMS-A data in accordance with the data whose display manner is to be limited in the most reliable manner","Assume, for example, that in the example of  where DVD  data, DVD  data and spreadsheet data are reproduced in respective windows displayed on the reproduction screen  of the monitor display , and DVD  data is reproduced directly on the screen , the reproduction screen is divided, by the area-dividing method employed in the sixth embodiment, into two rows and three columns like the reproduction screen  in . In , the reproduction screen  is an example where data in the area  should be protected from being copied, and is copy-prevented by hatching. In this case, data in each area is protected in accordance with the condition for each area. Similarly, the reproduction screen  is an example where data in the areas  and  should be protected from being copied. In this case, it is requested that data in the area  be copy-prevented by hatching, and data in the area  be copy-prevented based on Macrovision and CGMS-A. Therefore, data in the areas  and  is display-limited in the most reliable manner (i.e., by solid black shading). Further, like display limitation for simultaneous reproduction of a plurality of video data items, it is not always necessary to use the same type of display limitation between the case where the decoder  determines that data has been reproduced by an illegitimate route, and the case where copy protection certification performed by the graphics controller  has failed.","In each of the above-described embodiments, two-stage certification is performed\u2014copy protection certification by the graphics controller , and certification performed by the decoder  as to whether data has been reproduced by a legitimate route. As a result, illegal copying can be effectively prevented.","Macrovision, color-stripe, CGMS-A, DTCP and CPRM schemes are used as copy protection schemes for images, while CSS and CPRM scheme are used as copy protection schemes for DVD files.","In the above-described embodiments, video data reproduced from a DVD is used as input video data . However, the recording medium for recording video data is not limited to DVDs, but may be magnetic disks such as flexible or hard disks, optical disks other than DVDs, such as CD-ROMs, or semiconductor memories. Further, the input video data  may be the data that can be transmitted through a communication medium, such as a network. However, when the monitor display is connected to a network to display an image transmitted via the network, if the image contains digital watermark information, the display of the image on the monitor display may be inhibited. Alternatively, the display manner may be limited. This is because the existing IP communication system cannot protect image information from being copied.","Furthermore, the copy protection method of the invention can be utilized even when the monitor display is used, rotated. In this case, the rotation of the monitor display is monitored.","Additional advantages and modifications will readily occur to those skilled in the art. Therefore, the invention in its broader aspects is not limited to the specific details and representative embodiments shown and described herein. Accordingly, various modifications may be made without departing from the spirit or scope of the general inventive concept as defined by the appended claims and their equivalents."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE SEVERAL VIEWS OF THE DRAWING","p":[{"@attributes":{"id":"p-0031","num":"0032"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0032","num":"0033"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0033","num":"0034"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0034","num":"0035"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0035","num":"0036"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0036","num":"0037"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0037","num":"0038"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0038","num":"0039"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0039","num":"0040"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0040","num":"0041"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0041","num":"0042"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0042","num":"0043"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0043","num":"0044"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0044","num":"0045"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0045","num":"0046"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0046","num":"0047"},"figref":"FIG. 16"},{"@attributes":{"id":"p-0047","num":"0048"},"figref":"FIGS. 17A","b":["17","17"]},{"@attributes":{"id":"p-0048","num":"0049"},"figref":"FIG. 18"},{"@attributes":{"id":"p-0049","num":"0050"},"figref":"FIG. 19"},{"@attributes":{"id":"p-0050","num":"0051"},"figref":"FIG. 20"},{"@attributes":{"id":"p-0051","num":"0052"},"figref":"FIG. 21"},{"@attributes":{"id":"p-0052","num":"0053"},"figref":"FIG. 22"},{"@attributes":{"id":"p-0053","num":"0054"},"figref":"FIGS. 23A","b":["23","23","23"]},{"@attributes":{"id":"p-0054","num":"0055"},"figref":"FIG. 24"},{"@attributes":{"id":"p-0055","num":"0056"},"figref":"FIG. 25"},{"@attributes":{"id":"p-0056","num":"0057"},"figref":"FIG. 26"},{"@attributes":{"id":"p-0057","num":"0058"},"figref":"FIG. 27"}]},"DETDESC":[{},{}]}
