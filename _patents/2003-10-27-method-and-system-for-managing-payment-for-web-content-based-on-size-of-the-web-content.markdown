---
title: Method and system for managing payment for web content based on size of the web content
abstract: A method and system for providing advanced notice of cost to access web content, where the cost is computed based on the size of the web content. During transmission of web content over a communication path between a content server and a client station, an intermediation system may add into the web content, in conjunction with a hyperlink to referenced web content, an indication of size-based cost to access the referenced web content. Further, during transmission of a request for web content over a communication path from a client station to a content server, and/or during transmission of the web content over a communication path from a content server to a client station, the intermediation system may engage in interstitial communication with a user of the client station to obtain the user's agreement to pay the size-based cost.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08234373&OS=08234373&RS=08234373
owner: Sprint Spectrum L.P.
number: 08234373
owner_city: Overland Park
owner_country: US
publication_date: 20031027
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND","SUMMARY","DETAILED DESCRIPTION OF EXEMPLARY EMBODIMENT","1. Exemplary Base Network Architecture","2. Overview of Exemplary Intermediation System","3. Managing Payment for Web Content","4. Conclusion"],"p":["1. Field of the Invention","The present invention relates to network communications and more particularly to mechanisms for managing and controlling the delivery of web content (e.g., web pages, objects, files, applications, etc.)","2. Description of Related Art","In recent years, the Internet and the world wide web have become ubiquitous. The sheer volume of information and services available at any time via the Internet is astounding. As such, users often turn to the Internet to communicate with others, to receive current news reports, to shop, to be entertained, and for assorted other reasons.","As its name implies, the Internet is a network of computer networks. The world wide web is, in turn, an application that runs on the Internet, powered by web servers and web browsers. A web server stores or has access to \u201cweb pages\u201d made up of various objects (e.g., text, graphics, audio, video or other media and logic) and can send the pages to web browsers that access the server via hypertext transfer protocol (HTTP) or another agreed protocol.","A web page is usually defined by a set of markup language, such as hypertext markup language (HTML), wireless markup language (WML), handheld device markup language (HTML), extensible hypertext markup language (XHTML) or compact HTML (cHTML) for instance. The markup language typically specifies text to be displayed and includes tags that direct the browser to carry out various functions. For instance, a tag can direct the browser to display text in a particular manner. Or a tag can direct the browser to request and load other objects, such as images or sound files, to be presented as part of the web page. Or as another example, a tag can direct the browser to display a hyperlink that points to another web page or object (or generally referencing any other web content).","(Note that markup language could take other forms as well. As one other example, for instance, a markup language such as voice extensible markup language (VXML) could include voice-tags that direct a browser to play out speech messages to a user. In that event, the client station might be a voice command platform with which a user communicates via a telephone link. Still other examples are also possible.)","A user operating a web browser on a client station can direct the web browser to navigate to a particular web page or to load other web content. To do so, the user may select or enter into the browser a universal resource identifier (URI), typically a universal resource locator (URL), which points to a host web server, usually by a domain name, and identifies the requested content, usually by a path and filename. In response, the browser will then generate and send to the web server an HTTP \u201cGET\u201d request message, which indicates the URI. When the server receives the GET request, if the requested content is available, the server will then respond by sending to the browser an HTTP \u201c200 OK\u201d response message that includes the requested content. And when the browser receives the HTTP response, the browser will then present the content to the user.","As is well known, Internet communications occur through a defined set of protocol layers, including an application layer, a transport layer, a network layer and a physical layer. Applications, such as a web browser and a web server, communicate with each other according to an application layer protocol, such as HTTP. And those communications are then arranged as data packets, which are passed between the applications according to a transport layer protocol such as TCP and between network nodes according to the network layer IP protocol. Each packet typically bears a TCP\/IP header, which indicates source and destination IP addresses as well as source and destination TCP ports associated with the respective applications.","In order for a web client to engage in HTTP communication with a web server, the client and server will first establish a TCP \u201csocket\u201d or \u201cconnection\u201d between each other. The client then sends an HTTP GET request in the TCP socket, typically through one or more routers, switches and\/or proxies, to the IP address of the server. And the server responds by sending a 200 OK response in the TCP socket to the LP address of the client.","Alternatively, the web client may open up a first TCP socket with a designated proxy server, an the proxy may open up a second TCP socket with the web server. The web client may then send an HTTP GET request in the first TCP socket to the proxy, and the proxy may then send the HTTP GET request in the second TCP socket to the IP address of the web server. In turn, the web server may send a 200 OK response in the second TCP socket to the proxy, and the proxy may then send the 200 OK response in the first TCP socket to the IP address of the web client.","An exemplary embodiment of the present invention provides a mechanism for giving a user advanced notice of cost to access web content, based at least in part on the size of the web content.","In one respect, for instance, the exemplary embodiment may take the form of a method that involves, during transmission of web content within a communication path between a content server and a client station, adding into the web content, in conjunction with a hyperlink to referenced web content, an indication of cost to access the referenced content, where the cost is a function of the size of the web content. That way, the indication will be presented to a user when the web content is presented to the user, thereby giving the user an advanced notice of the cost to access to the referenced web content.","In another respect, the exemplary embodiment may take the form of a method that involves, during transmission of a request for web content between a client station and a content server, (i) receiving the request, (ii) determining a cost of the web content based on the size of the web content, and (iii) engaging in interstitial communication with the client station to receive user approval to pay the determined cost (i.e., user approval to pay, or agreement to pay, or agreement to be billed, or the like). Given user approval, the method may then involve sending the request along the way to the destination content server.","Alternatively, the exemplary method may involve, during transmission of requested web content from a content server to a client station, (i) receiving the web content, (ii) determining a cost of the web content based on a size of the web content, and (iii) engaging in interstitial communication with the client station to receive user approval to pay the determined cost. Given user approval, the method may then involve sending the web content along the way to the client station.","In yet another respect, the exemplary embodiment may take the form of an intermediation system located within a web communication path between a client station and a content server (such as within an access channel). The intermediation system may include a network interface for receiving and sending communications on the web communication path, and the network interface may receive a communication that carries web content including a hyperlink that points to referenced web content. The intermediation system may then further include cost-embellishment logic for (i) determining a cost to access the referenced web content based on a size of the referenced web content and (ii) inserting into the web content an indication of determined cost and thereby establishing cost-embellished web content. In turn, the network interface may send the cost-embellished web content along the web communication path for ultimate receipt and presentation of the cost-embellished web content by a browser running on the client station.","In still another respect, the exemplary embodiment may take the form of an intermediation system located within a web communication path between a client station and a content server. The intermediation system may include a network interface for receiving and sending communications on the web communication path, and the network interface may receive a communication that carries a request from the client station for web content. The intermediation system may then further include (i) cost-calculation logic for determining a cost to access the referenced web content based on the size of the web content and (ii) interstitial communication logic for communicating with the client station so as to receive user approval to pay the determined cost. Given user-approval, the network interface may then send the request for web content along to the content server.","Alternatively or additionally, the exemplary embodiment may take the form of an intermediation system located within a web communication path between a client station and a content server. The intermediation system may include a network interface for receiving and sending communications on the web communication path, and the network interface may receive a communication that carries web content being delivered from the content server to the client station. The intermediation system may then further include (i) cost-calculation logic for determining a cost of the web content based on the size of the web content and (ii) interstitial communication logic for communicating with the client station so as to receive user approval to pay the determined cost. Given user-approval, the network interface may then send the web content along to the client station.","These as well as other aspects and advantages will become apparent to those of ordinary skill in the art by reading the following detailed description, with reference where appropriate to the accompanying drawings.","As a general matter, an exemplary embodiment of the present invention provides an intermediation system for network communications, and more particularly for web communications. The intermediation system preferably sits within a web communication path between a client station and a content server, so that it can detect and act on web communications that pass between the client and the server.","The web communication path between the client station and the content server can take various forms. Generally speaking, it is the path along which a request for web content passes from the client station to the content server and along which a response to the request passes from the content server to the client station. (Alternatively, separate web communication paths could exist for the request and response.)","The web communication path can be an HTTP communication path, and the web communications could be HTTP messages. However, the path and communications could take other forms as well, complying with any desired protocol. For purposes of example only, this description will refer to HTTP communication paths and HTTP communications.","In practice, a request for web content could be carried by a single HTTP request message that is sent from the client station to the content server. Or the request for web content could be carried in multiple HTTP request messages, such as one that is sent from the client station to an intermediate point (e.g. proxy, portal, etc.) and another that is then sent from the intermediate point to the content server, for instance. Similarly, the requested web content could then be carried in an HTTP response message that is sent from the content server to the client station. Or the content could be carried in multiple HTTP response messages, such as one that is sent from the content server to an intermediate point and another that is then sent from the intermediate point to the client station, for instance. Additional steps could exist as well.","Referring to the drawings,  depicts an exemplary HTTP communication path between a client station  and a content server . It should be understood, however, that this and other arrangements described herein are set forth for purposes of example only. As such, those skilled in the art will appreciate that other arrangements and other elements (e.g., machines, interfaces, functions, orders of functions, etc.) can be used instead, and some elements may be omitted altogether. Further, as in most telecommunications applications, those skilled in the art will appreciate that many of the elements described herein are functional entities that may be implemented as discrete or distributed components or in conjunction with other components, and in any suitable combination and location.","Still further, various functions described herein as being performed by one or more entities may be carried out by hardware, firmware and\/or software logic. For instance, various functions may be carried out by a processor executing a set of machine language instructions stored in memory. Provided with the present disclosure, those skilled in the art can readily prepare appropriate computer instructions to perform such functions.","As shown in , client station  and content server  are linked together by a packet-switched network (or generally \u201cdata network\u201d) . More particularly, client station  communicates on an access channel , which provides the client station with connectivity to the packet-switched network . (I.e., the client station is communicatively linked via the access channel to the packet-switched network.) And content server  sits on the packet-switched network  or is otherwise accessible via the packet-switched network. (I.e., the content server is communicatively linked with the packet-switched network.) Thus, HTTP communications between client station  and content server  pass over a communication path that includes access channel  and packet-switched network . (Note that the access channel itself can comprise one or more links, whether circuit-switched and\/or packet-switched.)","In this general arrangement, a browser running on client station  may generate an HTTP GET request, seeking web content from content server . The client station may then open a TCP socket with content server  and send the GET request through access channel  and packet-switched network  to the IP address of content server . Upon receipt of the request, the content server  may then generate an HTTP 200 OK response that carries markup language defining the requested content. And the content server may send the 200 OK response through packet-switched network  and access channel  to the IP address of the client station . Ultimately upon receipt of the response, the client station  may then present the content to a user .","Referring next to , a variation on the arrangement of  is shown. In , a proxy server  is added within the HTTP communication path between the client station  and the content server . In the figure, the proxy sever  is located within the access channel  between the client station  and the packet-switched network . However, the proxy server  could instead reside elsewhere in the HTTP communication path, such as elsewhere on packet-switched network  for instance. Further, multiple proxy servers could be provided.","In the arrangement of , a request for web content still passes along the HTTP communication path from the client station  to the content server . However, in this arrangement, separate TCP sockets may exist between the client station  and proxy server  on one hand and the proxy server  and content server  on the other hand. Thus, the communication path carries a request for web content in an HTTP GET request from the client station  to the proxy server  and then in another HTTP GET request from the proxy server  to the content server . And the communication path carries the requested web content in an HTTP 200 OK response from the content server  to the proxy server  and then in another HTTP 200 OK response from the proxy server to the client station.","Alternatively, proxy server  may be a transparent proxy, which does not itself establish TCP sockets with the two endpoints but instead just forwards HTTP messages to their destinations. Thus, for instance, if the client station  opens a TCP socket with the content server , the client station  may send an HTTP GET request to the content server , via the proxy server . And the content server  may send an HTTP 200 OK response to the client station , via the proxy server .","Referring next to , another variation on the arrangement of  is shown. In , a web portal  has been added within the HTTP communication path between the client station  and the content server . Like proxy server  in , this portal  is shown in the access channel  between the client station  and the packet-switched network . But the portal  could reside elsewhere in the HTTP communication path.","As is well known, a web portal is effectively a web server itself, although it may get its web content from one or more content servers, typically aggregating or visually integrating the content together in respective frames or other \u201cportlets\u201d (e.g., as components of a single web page). For this reason,  illustrates multiple content servers , ,  on packet-switched network .","In the arrangement of , a request for web content again still passes along the HTTP communication path between the client station  and content server . However, in usual practice, the request passes as an HTTP GET request from the client station to an IP address of the web portal , rather than to an IP address of the content server . Upon receipt of the request, the portal  may then establish a TCP socket respectively with each of the content servers , ,  (or at least with one of them) and send to each content server an HTTP GET request seeking web content for a particular portlet. Each of the content severs , ,  may then send a 200 OK response message to the portal , providing a respective subset of web content. And the portal  may then aggregate the subsets of web content together to form a single set of web content. The portal may then send a 200 OK response to the client station , providing the aggregated web content, i.e., the content from each of the underlying content servers , , .","Alternatively, it is possible that portal  may have already received and cached (stored) certain web content that the portal will use in various portlets. In that event (assuming the content has not expired), the portal  would not need to request the content from a content server in response to a GET request from the client station . But the effect is as though the portal does so, since the portal provides the client station with web content from a content server, in response to a GET request from the client station.","With the inclusion of a portal, an HTTP communication path may still be said to extend between the client station  and the content server , since a request for web content (by or on behalf of the client station ) is sent to the content server , and web content is then transmitted from the content server  for ultimate receipt and presentation by the client station , albeit through the portal.","It should be understood that the arrangements shown in  are representative of many possible communication systems, including many possible HTTP communication paths between a client station and a content server. In this regard, for instance, two of the variables in the system are the client station  and the access channel , each of which can take a variety of forms.","As one example, for instance, the client station  could be a landline personal computer or other landline device, and the access channel  could include a local area network. And as another example, the client station could be a wireless terminal such as a 3G mobile station, and the access channel could then comprise a radio access network. (Note that the term \u201cmobile station\u201d generally refers to a wireless terminal. Notwithstanding the term \u201cmobile,\u201d it is possible that a \u201cmobile station\u201d could be either a fixed wireless terminal or a mobile wireless terminal.)  depict some more specific arrangements to help further illustrate these possible HTTP communication paths.","Referring to , an example wireless communication system is shown. In this example, the client station is a 3G mobile station , which communicates over an air interface  with a radio access network . (The radio access network  is shown to include a base station , which controls air interface communications with the mobile station, and a packet data serving node (PDSN) , which provides packet-switched network connectivity. But the radio access network could take other forms instead.) Radio access network  is then coupled via a gateway  to a packet-switched network . And a content server  sits on the packet-switched network.","In this arrangement, the access channel  between the client station  and the packet-switched network  includes the air interface , the radio access network , and the gateway . In this regard, the air interface might carry wireless communications in compliance with any radio communication protocol, such as CDMA, TDMA, GSM\/GPRS, EDGE, UMTS, 802.11 (e.g., 802.11a\/b), or Bluetooth, for instance. This description will consider CDMA by way of example.","According to existing 3G CDMA protocols, the mobile station  and PDSN  can establish a point-to-point protocol (PPP) data link, over which packet data can pass between the mobile station  and the packet-switched network . Further, the mobile station may have an assigned IP address and may communicate through a mobile-IP home agent (not shown), to facilitate mobility.","An exemplary 3G mobile station may be a handheld device such as a cellular or PCS telephone or personal digital assistant (e.g., Palm or Pocket-PC type device) for instance. As such, the mobile station will likely have a relatively small display screen. Additionally, because the display screen will likely be too small to display full size HTML pages, the mobile station will likely be equipped with a \u201cmicrobrowser,\u201d which is a web browser tailored to present web content on a smaller handset display. An exemplary microbrowser is the Openwave\u2122 Mobile Browser available from Openwave Systems Inc., which can be arranged to provide mobile information access through compliance with the industry standard Wireless Application Protocol (WAP) as well as various markup languages such as HDML, WML, XHTML, and cHTML.","If the mobile station  is a handheld device running a microbrowser, gateway  might function as a WAP gateway, to transcode web content being sent from content server  to mobile station , so as to put the web content and HTTP signaling into a form suitable for reference by the microbrowser (if not already). Alternatively, gateway  could function merely as a proxy, particularly where web content being sent to the mobile station is already in a form suitable for interpretation and presentation by the microbrowser.","Additionally, gateway  can function to inject into an HTTP request from mobile station  a user ID that can be used by downstream entities (such as content server , for instance) to provide user-specific functionality. In this regard, gateway  could maintain or otherwise have access to information that correlates user ID to session ID, so that the gateway can determine what user ID to insert for an HTTP communication from a given mobile station  (user ).","Alternatively, the mobile station  could be a more full scale computing platform, such as a desktop or notebook personal computer, equipped with a wireless communication interface to facilitate communication over air interface  and through radio access network . (For instance, the personal computer could be linked (wirelessly or through a pin-out port or other connection) to a 3G handheld device, or the personal computer could include a plug-in card (e.g., PCI card or PCMCIA such as the AirCard\u00ae available from Sierra Wireless, Inc.) that provides for wireless communication.) In that event, the mobile station might have a more full scale web browser such as Microsoft Internet Explorer\u00ae or Netscape Navigator\u00ae for instance, which can conventionally receive and interpret HTML web content.","In the arrangement shown in , an HTTP communication path exists between mobile station  and content server . Thus, mobile station  may send an HTTP request (or equivalent request) for web content to content server , and content server  may respond by sending the requested web content to the mobile station . Mobile station  may then present the content to a user .","In an alternative arrangement, note that gateway  could sit on a core packet network (not shown) that resides between the radio access network  and the packet network . The core packet network could be a private IP network operated by the wireless carrier. And packet network  may then be a public packet network such as the Internet. (Alternatively, the networks could take other forms.) Further, it is also possible that content server  might reside on the core packet network rather than on the public packet network .","Referring next to , a variation on the arrangement of  is now shown. Similar to , this figure introduces a web portal in the access channel between the client station (mobile station ) and the packet-switched network. Additionally, this figure shows several content servers , ,  on the packet-switched network . Thus, similarly, an HTTP communication path still exists between the mobile station  and content server . However, the mobile station may send a request for web content to the portal , instead of to a content server. And the portal may then aggregate content from the one or more content servers , , , and provide the aggregated content to the mobile station in an HTTP response.","In this arrangement, the web portal  functions as described above, to aggregate web content in various portlet containers of a single web page. In this regard, if the mobile station  is a handheld device with a small display screen, it is possible that only one (or part of one) portlet will appear on the display screen of the mobile station at a time. (According to the HDML markup protocol, for instance, the portlets might be provided as separate \u201ccards\u201d (akin to pages), and a group of cards could be sent to the mobile station as a deck. Other arrangements are also possible.) In that case, a user of the mobile station may have to navigate from portlet to portlet. Alternatively, the user may be able to view the entire portal page at once, possibly by scrolling horizontally and vertically through the page.","Referring next to , another example communication system is shown, in this case a landline communication system. By way of example, the client station in the landline communication system is shown to be a personal computer (PC) , which communicates over a landline link  with a gateway  to a packet-switched network . A content server  then sits on the packet-switched network .","In this arrangement, the landline link  and gateway could take various forms. For example, link  could be a local area network (LAN), and gateway  could be a LAN server that is coupled to a backbone of packet-switched network . And as another example, link  could be a dial-up connection over the public switched telephone network (PSTN), and gateway  could be a network access server (NAS) that provides connectivity with the packet-switched network . Suitable network access servers are the Total Control network access server, available from UTStarcom Incorporated, of Alameda, Calif., and the Shasta Broadband Service Node, available from Nortel Networks, of Ontario, Canada. Such servers could be implemented to function as internet service provider (ISP) modem banks in a manner well known in the art.","As in the arrangements described above, an HTTP communication path can exist in this arrangement between the client station  and the content server . The HTTP communication path in this arrangement includes the landline link , the gateway  and the packet-switched network . Thus, a web browser running on personal computer  could generate and send to content server  an HTTP request seeking designated web content, and content server  could return an HTTP response providing the requested content. The web browser on personal computer  could then present the content to a user .","Although not illustrated, many variations on this landline arrangement are possible as well. For instance, just as in the general arrangement depicted in  and in the wireless arrangement depicted in , a web portal could sit within the HTTP communication path between the client station (personal computer ) and one or more content servers. And the user  of the personal computer  could then navigate to the portal web page so as to load web content aggregated from multiple content servers.","More generally, it should be understood that many variations on the arrangements shown in  are possible, and an HTTP communication path can take various forms. Requests for web content can pass over a variety of different paths between a client station and a content server. And the requested web content can then pass over a variety of different paths between the content server to the client station.","a. Placement of Intermediation System within HTTP Communication Path","As noted above, an exemplary intermediation system will sit within the HTTP communication path between a client station and content server. In this regard, the intermediation system will preferably include trigger logic, which detects HTTP communications, and enforcement logic, which acts on or in response to HTTP communications. In the exemplary embodiment, the intermediation system will be considered to sit within the HTTP communication path, as long as at least its trigger logic sits within the HTTP communication path. Some or all of the enforcement logic could then also lie within the HTTP communication path or could lie elsewhere and can be invoked as appropriate to carry out various intermediation functions.","Referring now to , a variation of  is shown, to help illustrate the arrangement of an exemplary intermediation system. In , as in , a client station  communicates with a content server  over a packet-switched network , so that an HTTP communication path exists between the client station  and the content server .","As further shown, an intermediation platform  has then been inserted within that HTTP communication path. In particular, the intermediation platform  has been inserted within the access channel  between the client station  and the packet-switched network . As a result, HTTP communications (e.g., requests for web content, and responses providing web content) will necessarily pass through the intermediation platform  on their way between the client station  and the content server . With this arrangement, the owner or operator of the access channel  can advantageously intermediate in HTTP communications to and from users of the access channel.","Alternatively, however, the intermediation platform could reside elsewhere in the HTTP communication path. If not in the access channel , a mechanism will preferably be provided to direct HTTP communications through the intermediation platform. For instance, the client station could be set to direct all HTTP requests to the intermediation platform as a proxy server.","In accordance with the exemplary embodiment, the intermediation platform  embodies intermediation trigger logic, so as to detect HTTP communications flowing between the client station  and the content server . In addition, the intermediation platform  may also include some or all of the intermediation enforcement logic. However, in the exemplary embodiment, the intermediation platform  preferably includes only a small set of enforcement logic, and the bulk of the enforcement logic is instead located at one or more central servers.","In the arrangement of , the one or more central servers are shown as \u201cinterstitial\u201d servers , labeled as such because the servers can be employed in the middle of an intermediation process, i.e., during an HTTP communication. By way of example, the interstitial servers  are shown linked with intermediation platform  by at least a packet-switched network . Packet-switched network  may or may not be the same network as packet-switched network . Thus, it is possible that interstitial servers  might sit on the same network where content server  sits. In the exemplary embodiment, however, packet-switched network  is preferably a private or core packet-switched network operated by the carrier that supplies client station  with access to packet-switched network , i.e., the owner or operator of access channel .","Generally speaking, the interstitial servers  may carry out various intermediation enforcement functions, possibly through interaction with user  of client station . By way of example, an interstitial server might function to collect user payment for requested web content. And as another example, an interstitial server might function to obtain user approval for release of confidential user information, such as user location or user passwords for instance. Other examples are possible as well.","The arrangement shown in  is generally representative of how an intermediation system can be inserted within an HTTP communication path between a client station and a content server. Referring next to , some more specific arrangements are shown, in this case to illustrate one or many ways that the intermediation system could be implemented within a wireless communication system such as those shown in  for instance. Similar arrangements could also be established in other systems, whether landline or wireless.",{"@attributes":{"id":"p-0082","num":"0081"},"figref":["FIG. 8","FIG. 4","FIG. 8","FIG. 4"],"b":["30","32","34","44","42","40","34","42"]},"In , the intermediation platform  has then been inserted between the gateway  and the packet-switched network , so that the intermediation platform  sits within the HTTP communication path between the mobile station  and the content server . (Note that gateway  may also have a more direct connection  to the packet-switched network .) Additionally, the intermediation platform  is then shown linked with a core packet network , which may be owned and operated by the wireless carrier. And interstitial servers  are shown as nodes on the core packet network .","As one of many example variations from this arrangement, note that gateway  and intermediation platform  could themselves sit on core packet network . In that arrangement, the radio access network (and particularly PDSN ) could be arranged to route outgoing traffic to gateway , and gateway  could in turn be arranged to route the traffic to the intermediation platform . The intermediation platform can then be arranged to route the traffic along its way, and\/or to invoke or carry out an intermediation function. Similarly, incoming traffic can flow from the packet-switched network  to the intermediation platform , to the gateway  and to the radio access network, for transmission to the mobile station . Thus, with this variation, the intermediation platform would still sit within the HTTP communication path between the mobile station  and the content server .","Further, note that some of the functions of intermediation platform  and gateway  could be combined together on a common platform or could be allocated to the platform  and gateway  in various ways. For instance, the intermediation platform could perform some functions that would otherwise be performed by the gateway. And the gateway could perform some functions that would otherwise be performed by the intermediation platform.","(Still further, note that under normal circumstances, gateway  might cache premium web content to facilitate quicker delivery of the content to client stations such as mobile station . In the exemplary embodiment, the gateway would be arranged to not do so, unless the gateway functions as the intermediation platform. (Otherwise, HTTP requests for such content would normally not pass to the intermediation platform). For instance, when the intermediation platform  passes web content via gateway  to the client station, the intermediation platform could instruct the gateway to not cache the content.)",{"@attributes":{"id":"p-0087","num":"0086"},"figref":["FIG. 9","FIG. 5","FIG. 9","FIG. 5","FIG. 9"],"b":["46","40","42","44","60","46","42","60","30","44","30","46","46","44","60","46","44","44","60","44","46","30"]},"Additionally, the intermediation platform  is then shown linked with a core packet network , which may be owned and operated by the wireless carrier. And interstitial servers  then sit as nodes on the core packet network .","As with , one of many possible variations in the arrangement of  is that the gateway  and portal  could instead sit on core packet network . Additionally, the intermediation platform  could also sit on core packet network . And HTTP communications could flow through the core packet network and, particularly, through the intermediation platform , on their way between the mobile station  and the content servers , , .","It should be understood that numerous other arrangements and variations are possible as well. For example, referring to , the intermediation platform  could instead be inserted in front of the portal  (to the left of the portal in the figure). And as another example, the intermediation platform  could be integrated as part of the gateway  or as part of the portal . And as still another example, the intermediation platform  could be inserted elsewhere within the HTTP communication path between the client station and content server, such as elsewhere on one or more packet-switched networks between the endpoints, for instance. (For instance, the intermediation platform could reside in an access channel to the content server, so as to maintain control over HTTP communications with that content server.) Further, multiple intermediation platforms  could be provided in a single HTTP communication path. For instance, one intermediation platform  could be provided for intermediating HTTP requests, and a separate intermediation platform  could be provided for intermediating HTTP responses. Still other variations are possible as well.","b. Exemplary Intermediation Platform","Referring now to , a functional block diagram of an exemplary intermediation platform  is shown. The figure depicts the intermediation platform  in the context of the arrangement shown in  and uses the same reference numerals as used in that figure. Thus, the platform  sits in the HTTP communication path between a client station  and a content server , and the platform further has access to an interstitial server .","As illustrated in , the exemplary intermediation platform  includes a network interface , a processor , and data storage , all of which may be linked together by a system bus, a hub, a network, or some other mechanism . Generally speaking, the network interface  receives and sends IP packets that carry HTTP communications. And the processor  executes logic stored in data storage  in order to facilitate intermediation in response to those HTTP communications.","In the exemplary embodiment, data storage  preferably includes a set program logic  (e.g., machine language instructions), which the processor  can execute in order carry out various functions described herein. As shown in , the program logic  may include (i) detection or \u201csniffing\u201d logic , (ii) base trigger logic  and (iii) handler logic modules , each of which could be loaded onto the platform or modified as desired, in order to provide a desired set of functionality.","The sniffing logic  is executable by the processor  to detect and extract HTTP messages (or, more generally, web communications) received by network interface . Thus, as IP packets enter network interface , the processor may apply sniffing logic  to determine whether the packets carry an HTTP message (as indicated by the port number (e.g., port ) set forth in the packet headers, for instance). If so, the processor temporarily pauses transmission of the IP packet(s) that carry the HTTP message (i.e., temporarily pauses the HTTP communication), and the processor extracts the HTTP message and passes it in a function call to the base trigger logic .","The base trigger logic , in turn, is executable by the processor  to determine whether intermediation action should be taken in response to the HTTP message and, if so, to call one or more of the handler logic modules . The handler logic modules  are then executable by the processor to perform various intermediation functions, such as calling out to an interstitial server  and\/or modifying HTTP messages.","In addition, data storage  preferably includes a set of local reference data , which the processor  can reference when executing logic , so as to facilitate various intermediation functions. In the exemplary embodiment, the reference data  may include tables of data (or other forms of data) that indicate what, if any, action(s) to take in response to particular HTTP messages. For example, the reference data  may correlate particular HTTP messages (by URI pattern, for instance) with one or more of the handler logic modules .","Base trigger logic  may thus refer to the reference data  in order to determine whether to call a particular handler module in response to a given HTTP message, or whether to simply allow the HTTP message to pass along its way without intermediation. In this regard, the reference data  may include (i) request trigger data , which specifies which, if any, handler module(s) to call in response to various HTTP request messages, and (ii) response trigger data , which specifies which, if any, handler module(s) to call in response to various HTTP response messages.","According to the exemplary embodiment, the request trigger data  can include (i) a whitelist table, (ii) a URI-pattern table and (iii) one or more exception tables (possibly keyed to action type, username or other variable). Alternatively, the request trigger data  could take some other form.","An exemplary whitelist table will list the domains of web hosts as to which intermediation might be performed. If intermediation platform  is programmed to intermediate HTTP requests that are directed to a given domain (such as \u201csprintpcs.com,\u201d for instance), the whitelist will preferably list that domain as one of those eligible for intermediation. Whereas, if the platform is not programmed to intermediate HTTP requests from another given domain, the whitelist will preferably not list that other domain.","In this regard, in order to determine the domain name to which a given HTTP request is destined, the intermediation platform could analyze the packet(s) that carry the request. For instance, the platform could read the domain name from the URI set out in the packet payload. Alternatively, the platform could read the IP address to which the packet(s) are destined and could then perform a reverse domain name lookup (e.g., by querying a domain name server (DNS)), to determine the corresponding domain name.","An exemplary URI-pattern table, in turn, will list request-URIs or request-URI patterns (e.g., with wildcards, as a regular expression for instance) as to which intermediation should be performed. Further, the URI-pattern table will specify one or more actions that platform  should take in response to an HTTP request directed to that URI. By way of example, for each URI as to which the platform is to perform intermediation, the URI-pattern table may include a record that specifies one or more of the handler logic modules  that should be invoked. (Where multiple actions are specified, there could be a defined order of carrying out the actions. Further, there could be coalescence between multiple actions, such as asking a user for a password just once even if each of multiple actions would normally require prompting for the password.) For instance, each record of the exemplary URI-pattern table may include a URI-pattern field, which specifies a URI-pattern, and an Action field, which lists the name(s) of the handler logic module(s) to run.","An exception table may then provide for exceptions to intermediation. By way of example, if the intermediation function is to ensure user payment for web content before the web content is sent to client station , an exception table might specify that a particular user has already paid for the content, so that no intermediation is required for that user. Other examples are also possible. And note also that some or all of these reference tables could be maintained elsewhere and queried as appropriate by the intermediation platform .","Thus, in exemplary operation, the processor  will consider an HTTP request, to determine whether intermediation should be performed in response to the request. If the target domain referenced in an HTTP request message is listed in the whitelist table, the request-URI matches an entry in the URI-pattern table, and no exception precludes intermediation, then the processor may call one or more handler logic modules  designated by the URI-pattern table. Otherwise, the processor may simply send the HTTP request, via network interface , along its way to the content server .","In this regard, as noted above with reference to , a gateway between the client station and the intermediation platform could be arranged to carry out some functions that would otherwise be carried out by the intermediation platform. Whitelisting is an example of one such function. In particular, upon receipt of an HTTP request from a client station, the gateway could consult a whitelist table so as to determine initially whether the HTTP request should be intermediated. If so, the gateway could send the HTTP request to the intermediation platform. And if not, the gateway could send the HTTP request more directly to the packet network  for transmission to the content server, bypassing the intermediation platform.","Further, as also noted above, the gateway could function to insert a user ID into an HTTP request. In the exemplary embodiment, if the gateway sends an HTTP request to the intermediation platform, the gateway could send a plaintext version of the user ID to the platform. The platform could then encrypt the user ID before sending the request along to the content server. Alternatively, if the gateway sends an HTTP request more directly to the packet network , the gateway itself could encrypt the user ID before sending the request along its way.","Similarly, according to the exemplary embodiment, the response trigger data  may include a whitelist table and a URI-pattern table, so as to trigger intermediation when an HTTP response message comes from a specific domain and, more particularly, from a specific URI. As a general matter, the whitelist table and URI-pattern table on the response side could function in the same manner as those described above for HTTP requests (and could be integrated with those tables, such as by having columns respectively for request processing and response processing).","Thus, if the intermediation system is set to perform intermediation on HTTP responses from a given domain, then the whitelist table may list that domain. And if the intermediation system is set to perform intermediation in response to HTTP responses from a given URI (or URI pattern), then the URI-pattern table may list that URI (or URI pattern) and may point to one or more of the handler logic modules  that should be invoked in order to carry out the intermediation.","Note that the domain and URI may be indicated as header parameters in the HTTP response, or the intermediation platform  may have a record (expressly or implicitly) of those parameters if the platform  opened its own TCP socket with the content server. Still alternatively, a content server that is arranged to facilitate intermediation could include domain and URI indications (expressly, or as representative codes) in any predefined position in an HTTP response, so as to provide the information to the intermediation platform ; the intermediation platform  may then be programmed to detect those indications so as to identify message origin.","Additionally, or alternatively, the response trigger data  in an exemplary embodiment could include a markup-pattern table. As presently contemplated, the markup-pattern table can be akin to the URI-pattern table. However, rather than (or in addition to) triggering response intermediation based on URI-pattern, the markup-pattern table can trigger intermediation based on particular elements of markup language within the web content that the content server  has provided in the HTTP response message. Examples of such markup language elements include specific tags, specific tag\/value pairs, and combinations of these or other elements, whether or not the elements are set forth in comments or as language intended to be interpreted by the browser on the client station . (Further, as with URI-patterns as described above, a markup-pattern could be specified as a regular expression, with wildcards for instance.)","Thus, each record of an exemplary markup-pattern table might include (i) a markup-pattern field, which specifies one or more elements of markup language, and (ii) an Action field, which points to one or more handler logic modules  to call when that markup-pattern appears in an HTTP response. Further, the Action field, or one or more other fields could specify additional parameters to use in carrying out intermediation. And still further, each record of the exemplary markup-pattern table could also be keyed to a particular domain and\/or particular URI (or URI pattern), so as to restrict markup-based intermediation to HTTP responses from that particular domain and\/or that particular URI.","Note that variations on the foregoing triggering mechanisms, and other triggering mechanisms altogether, are also possible on both the request side and the response side. For example, logic  could be arranged to trigger intermediation based on other fields in an HTTP request or response message, or based on external factors, such as time\/date, or current network conditions. And as another example, logic  could be arranged to trigger intermediation for all HTTP messages if desired. Other examples are possible as well.","Further, it should be understood that intermediation platform  can take other forms as well. For instance, network interface  itself could comprise a processor that sniffs packets and identifies HTTP messages. As such, the network interface could be a programmable level-7 content switch or a programmable HTTP proxy. The network interface could then also be programmed to apply the base trigger logic and even the handler logic. Or the network interface could be tied to an application server and\/or database server that carries out those other functions. Thus, for instance, when the network interface detects an HTTP message, it could pass the message to the application and\/or database server for further processing. Other variations are also possible.","c. Interstitial Communication","With the benefit of the exemplary embodiment, an intermediation system may perform a variety of useful intermediation functions when it detects an HTTP message passing between a client station  and content server . According to the exemplary embodiment, one of those functions could be engaging in \u201cinterstitial communication\u201d with the client station (and, more specifically, with the user ). In particular, the intermediation system may pause the HTTP communication between the client station  and content server  and instead, itself (or through some agent), communicate with the client station .","The intermediation system can carry out interstitial communication in various ways, applying a suitable set of interstitial communication logic. Preferably, but only by way of example, the intermediation system could itself engage in HTTP communication with the client station . This process will work particularly well, because the browser on client station  is waiting for an HTTP response to an HTTP request that it has sent to the content server (or to a portal or proxy that gets content from the content server).","Within the intermediation system, the intermediation platform  may itself engage in interstitial communication with the client station . (For instance, a handler logic module , when invoked, may send an interstitial HTTP response to the client station ). However, according to the exemplary embodiment, the bulk of the interstitial communication function will instead be offloaded to interstitial server(s) .","This interstitial communication can occur in many different ways. As one example, for instance, after the platform  receives an HTTP request originally from client station  and determines that intermediation action should be taken, a handler logic module  may open a TCP socket with the interstitial server  and send an HTTP request to interstitial server , providing the interstitial server with the user's original HTTP request, and invoking a designated logic module or object on interstitial server  to process the user's HTTP request.","Interstitial server  may then responsively analyze the user's HTTP request and, by reference to user profile data and\/or other reference data, may generate or select an appropriate \u201cinterstitial screen\u201d to send to the client station . In this regard, as used herein, the term \u201cinterstitial screen\u201d refers to web content that is to be provided interstitially to client station .","In the exemplary embodiment, the interstitial server  may include in the interstitial screen a hyperlink (e.g., button or text link, generally an HREF) that points to the interstitial server  (hereafter an \u201cinterstitial hyperlink\u201d). That way, when the browser on client station  presents the interstitial screen to the user , the user can respond to the interstitial server  by clicking on the hyperlink. Further, the interstitial server  may advantageously set forth the user's original HTTP request as a query parameter (or in some other manner) in the interstitial hyperlink, in order to preserve the user's original HTTP request.","The interstitial server  may then send the interstitial screen in a 200 OK response to the handler logic module  on the intermediation platform . And, upon receipt of that response, the handler logic module  may extract the interstitial screen (i.e., the markup language carried in the 200 OK response) from the response and insert it into a new 200 OK message to the client station . The handler logic module  may then send the new 200 OK message, via network interface , to the client station .","Upon receipt of the 200 OK response, a web browser on client station  may then display the interstitial screen to user . In turn, the user may click on the interstitial hyperlink to reply to the interstitial server. As a result, the web browser will send a new GET request to the interstitial server. Alternatively, if the user and\/or client station provides data in response interstitial screen (such as by filling in form fields in the screen), the web browser might instead send an HTTP \u201cPOST\u201d request to the interstitial server. In any event, the new HTTP request that the web browser sends to the interstitial server will preferably carry as a query parameter the user's original HTTP request, as noted above.","As the new HTTP request is passing between the client station  and the interstitial sever , the intermediation platform  will detect the request. Noting the URI of the interstitial server, a handler logic module  on the intermediation platform  may then open a new TCP socket with the interstitial server  and send an HTTP request through that socket to the interstitial server , providing the interstitial server with the client's new HTTP request. And again, the interstitial server  may then respond to the client station  in the same manner.","This back and forth communication between the interstitial server  and the client station  can continue as long as necessary, preferably preserving the user's original HTTP request the whole time. (Alternatively, the intermediation platform  or interstitial server  could maintain a record of the user's original HTTP request and could tie that record together with the interstitial communication. For instance, the interstitial server  could correlate the request and interstitial communication with a unique communication (or interstitial conversation) identifier or key.)","Once the interstitial server  has completed its interstitial communication with the client station , the interstitial server  may signal to the intermediation platform  to send the user's original HTTP request along its way to content server . To do this, in the exemplary embodiment, the interstitial server  may return a 200 OK response to the handler logic module , providing the user's original HTTP request as the return data. When the handler logic module  receives that 200 OK response, the handler logic module  may detect the HTTP request as the return data and may responsively send the HTTP request, via network interface , to the content server . (Note that the intermediation system could also modify the user's original HTTP request in some manner before sending it along its way to the content server .)","Alternatively, the interstitial server could itself pass the original request along to content server . Upon receipt of a response from content server , the interstitial server could then pass that response along to the client station.","It should be understood that the communication mechanism between the intermediation platform  and the interstitial server  could take forms other than that described above. For instance, the platform and server could communicate by remote method invocation (RMI) or remote procedure call (RPC). Or, as noted above, the platform and server could be integrated on a common server, so that remote communication does not take place.","Further, a mechanism like that described above could be used as well to carry out interstitial communication triggered by an HTTP response rather than by an HTTP request. For instance, when the intermediation system receives an HTTP response, the intermediation could signal to the interstitial server , and the interstitial server could generate and return an interstitial screen, which the intermediation system could then send to the client station. The interstitial screen can prompt a user to respond and could direct any response to the interstitial server . In the manner described above, communication could thus pass back and forth between the interstitial server and the client station.","Upon conclusion of communication between the interstitial server and the client station, the interstitial server could then signal to the intermediation system, to cause the intermediation system to send the original HTTP response along to the client station (or to not send the response, if appropriate).","d. Embellishing Web Content","Another useful function that the intermediation system could perform is to embellish web content that is being sent from a content server to a client station. In particular, when the intermediation system receives an HTTP response from the content server, the intermediation system can add one or more explanatory objects into the web content before sending the HTTP response along its way to the client station. When the client station receives the HTTP response, the web browser will then display, or otherwise present, the explanatory object(s) along with the underlying web content provided by the content server.","The intermediation system can add an explanatory object into the web content by modifying the markup language to include the explanatory object or by modifying the markup language to include a reference to the explanatory object. A reference to the explanatory object could point to the object on a server remote from the client station. In that case, the browser would separately load the object from the server and present the object together with the underlying web content. Or the reference could point to the object stored locally on the client station. In that case, the browser could load the object from storage on the client station and present it with the underlying web content (or contemporaneously in another browser window).","(Note that the \u201cexplanatory object\u201d is an object that the client station will present to a user as part of the underlying web content. This is to be distinguished from some other sort of object (e.g., a comment that a browser would generally disregard) that the client station will not present to a user as part of the underlying web content. For this reason, the term \u201cexplanatory presentation object\u201d can be used interchangeably with the term \u201cexplanatory object.\u201d)","The explanatory object can be embodied in various forms. By way of example, and without limitation, the explanatory object could be embodied in (i) display text, which the browser would display as text in the web page, (ii) a graphic, which the browser would display graphically in the web page, or (iii) a sound, video and\/or other media clip, which the browser might play out to the user while presenting the web page. Further, the object could be presented in a frame of a browser window (e.g., in a footer or margin) rather than within the web page being displayed in the window. Still further, the object could be hidden in the web page until the user takes an action, such as rolling a mouse over the object or over some other object that triggers the explanatory object to be presented (e.g., as a pop-up display or media presentation), or until another event occurs. The explanatory object could take other forms as well.","The intermediation system can strategically place the explanatory object into the web content so that the explanatory object will be presented in conjunction with a particular aspect of the underlying web content, thereby giving the user an explanation about that aspect of the web content. By way of example, and without limitation, if the explanatory object is a visual object (e.g., text or graphic) the system could insert the object just before, after, above or below the aspect to be explained, or otherwise nearby or logically associated with the aspect to be explained. Alternatively, the system can cause the explanatory object to be presented at some other position or in some other manner.","Through use of this technique, the intermediation system can advantageously explain to the user what will happen when the user clicks on (or otherwise invokes) a given hyperlink in the web page. For example, the explanatory object can advise the user where the user will be taken when the use clicks on the link, or how much the user will be charged or asked to pay for the referenced content when the user clicks on the link. In this regard, the explanatory object can advise the user that the user will be taken to an interstitial web site when the user clicks on the link (i.e., that the link will cause the browser to load an interstitial screen). For that purpose, the explanatory object might be a predefined graphic indicative of the intermediation system.","To facilitate embellishment of web content, the exemplary intermediation system described above could include an embellishment handler module (also referred to as \u201cembellishment logic\u201d), among handler logic modules . The embellishment handler module could be executable by the processor  to modify markup language in an HTTP response, so as to add into the markup language a designated explanatory object (and perhaps to otherwise modify the markup language, if desired).","In turn, the URI-pattern table and\/or the markup-pattern table in the reference trigger data  could point to that embellishment handler module and could specify a particular explanatory object to be inserted when the HTTP response originates from a particular URI and\/or contains a particular markup-pattern. The particular explanatory object could be a predefined object, or it could be dynamically generated.","For instance, with respect to a given hyperlink within the HTTP response, the reference trigger data could define as the explanatory object a predefined cost to access the content. Alternatively, the reference trigger data could define the explanatory object by reference to a function that dynamically establishes the explanatory object based on context (such as time of day, or size of the referenced content, for instance.)","Further, on the response side, just as on the request side, the intermediation system could reference a whitelist table, which indicates generally whether the HTTP response is to be embellished or otherwise intermediated. If the system determines that some intermediation action is to be taken, then the system could proceed to consider the URI-pattern table and\/or markup-pattern table to determine whether to execute the embellishment handler module.","For many years, much of the content available on the World Wide Web was free for any authorized web user to access. The owners and operators of content servers (hereafter \u201ccontent providers\u201d) relied in large part on advertising revenues, selling ad space such as \u201cbanner ads\u201d on their web pages. In recent years, however, operation costs have pushed more and more content providers to begin charging for access to their web content.","In order for a content provider to charge users for access to its web content, the content provider generally employs a mechanism to collect payment from users, or to track prepaid use-licenses where users have paid in advance for a certain timeframe or quantity of access. This process can be burdensome and costly for many content providers.","The exemplary embodiment provides a mechanism to facilitate management of user payment, or at least management of user payment for content provided by a content provider. (Note that the intermediation system could be owned and operated by the content provider as well (in which case, the billing is done both by and on behalf of the content provider.)) Namely, an exemplary intermediation system such as that described above could be used to advise a user how much the user will pay or be asked to pay when the user seeks to access to given web content. Further the intermediation system could be used to collect payment from a user, or to receive the user's agreement to pay or to be billed.","In accordance with the exemplary embodiment, the intermediation system will compute a cost to access given web content based at least in part on the size of the web content, such as the number of bits, bytes, characters or other units of data that make up the web content. For instance, the intermediation system could determine the size of the web content and then multiply the size by a charging rate, which could vary based on user, time\/day, content provider or other factors. The intermediation system will then advise the user of the size-based access-cost.","a. Pre-Nonrepudiation","When an intermediation system provider (\u201cintermediary\u201d) such as a carrier bills a user for content (or services) delivered by a content provider, the intermediary should be able to prove that the user agreed to pay for the content. If an intermediary cannot prove that the user agreed to pay for the content, then the user might repudiate the charge. Therefore, the process of proving that a user agreed to pay for a charge may be referred to as \u201cnon-repudiation.\u201d","With the exemplary embodiment, an intermediation system can advantageously be used to perform non-repudiation before a user even requests web content. To do so, the intermediation system can embellish a web page that contains a link to the web content, by adding, in connection with the link, an indication of the price that a user will be expected to pay for the web content if the user selects the link. Thus, before the user even requests the web content, the user will have notice of how much the web content will cost.","This process can be referred to as \u201cpre-nonrepudiation,\u201d since it is a mechanism that helps to secure a user's agreement to pay for content before, or at the time, the user clicks on a hyperlink. At a minimum, it functions to support an argument that a user who clicks on the link knew how much the content would cost. By performing this function in an intermediation system, the intermediary can thus better prove that users incurred various costs, and the intermediary can thus better recoup costs from the content provider.","To carry out this function in accordance with the exemplary embodiment, the intermediation system can be arranged to (i) detect a hyperlink in web content being delivered to a client station, (ii) determine a size of the web content referenced by the hyperlink, (iii) compute a size-based cost for accessing the referenced web content and (iv) embellish the web content being delivered to the client station, so as to indicate the size-based cost for accessing the referenced web content.","The process of detecting a hyperlink in web content and then embellishing the web content to indicate cost to access the referenced content can be carried out in the manner described above. For instance, the markup-pattern table of the intermediation system could include a record for each hyperlink at issue, and the Action field of each record could recite a function call to the embellishment handler routine to cause a cost-indication to be added in connection with the hyperlink.","Further, one of the handler logic modules  could be a cost-computation handler routine that functions to (i) receive a size of web content, (ii) multiply the size by a designated charging rate, and (iii) return a value indicating the size-based cost to access the web content.","The cost-computation handler routine could take into consideration other factors in addition to size as well. For instance, the routine could apply different charging rates depending on various factors, such as user service level or time of day. By way of example, the intermediation system might maintain or have access to user profile data that indicates user service levels, as well as charging-rate data that indicates charging rates per service levels. Given a user-ID in the web communication (typically carried in an HTTP request), the system may then query the profile store to determine the service level of the requesting user. And the system may then select and apply a charging rate that corresponds to that service level.","Upon detecting a given hyperlink, the intermediation system could determine the size of the referenced web content in various ways. By way of example, for each hyperlink in the markup-pattern table, the markup-pattern table could list a size of the content that is referenced by the hyperlink, and so the intermediation system could simply read the size from there. In this regard, the system could periodically update the size indications in the markup-pattern table by (i) caching the referenced content and measuring file sizes or (ii) querying the respective content providers for size per hyperlinked content. Thus, the size of content referenced by a given hyperlink could be a last-known size.","As another example, the size of referenced content could be indicated (e.g., by the content provider) within specially marked comments or other language within the HTTP response. For instance, the HTTP response that the content provider sends could indicate the size of referenced web content by an attribute tag set forth in conjunction with the hyperlink itself, such as:\n\n","When the intermediation system calls the embellishment handler routine, the intermediation system could pass a size-based access-cost as the explanatory object to be added into the web content in conjunction with the hyperlink. For instance, the intermediation system could call the embellishment handler routine and pass, as an argument, a size-based cost that the cost-computation routine has computed.","To illustrate more specifically, consider a scenario where the content provider is a news magazine company, and, through content server , the magazine company offers electronic copies of articles that have appeared in past issues. Thus, content server  may host an article-listing web page that lists available articles and that links each listing to an HTML copy of the respective article. Assume further, that the magazine company has contracted with the intermediation-system provider to bill users on behalf of the magazine company, for access to those articles. (Alternatively, the magazine company might own, operate or otherwise control the intermediation system itself.)","In this scenario, the intermediation system might include, in its reference trigger data , a listing of hyperlinks that could appear in the magazine company's web page and, for each hyperlink, an indication that a size-based cost should be added in conjunction with the hyperlink. For instance, the markup-pattern table might include a number of records, each keyed to the URI of the article-listing web page, and each then specifying the \u201cHREF\u201d markup language that would define one of the article hyperlinks set forth on that page, as well as a size of the referenced file (e.g., a last-known size). In the action field of each record, the table could then recite a function call to the embellishment handler routine and, within that function call, could recite a function call to a cost-computation routine.","In operation, when the intermediation platform  receives an HTTP response from the content server , processor  may search the markup-pattern table for all records keyed to the URI of the article-listing web page. As a result, the processor  may establish a list of hyperlinks in the web page, and their corresponding sizes. As indicated by the records, the processor  may then call the cost-computation routine and embellishment handler routine, so as to facilitate insertion of a size-based cost adjacent to each hyperlink in the page.","Thus, when the intermediation platform sends the HTTP response along its way to the client station , the web content may advantageously include next to each listed article an indication of how much the article costs, where the cost is computed based at least in part on the size of the article. Conveniently, this can be done without requiring the content server  (or, more generally, the content provider) to be aware of pricing (such as the charging rate applied by the intermediation system) or to otherwise manage pricing at all.",{"@attributes":{"id":"p-0160","num":"0160"},"figref":"FIGS. 11-15"},{"@attributes":{"id":"p-0161","num":"0161"},"figref":["FIG. 11","FIG. 12"],"b":"14"},"In accordance with the exemplary embodiment, the response trigger data  in intermediation platform  may be provisioned so as to include listings for each of these hyperlinks and to indicate the respective sizes of each referenced article. As noted above, the sizes could be updated periodically by querying the content server or in some other way.","Thus, by way of example,  displays four records that might appear in the table. Each record in this example recites the opening <A HREF> tag\/value as the markup pattern, specifies the size of the referenced content in bytes, and recites as the associated action a function call to ADDCOST(COSTCOMP(size)). The function COSTCOMP( ) could be the cost-computation handler routine. And the function ADDCOST( ) could be an embellishment handler routine that is executable by processor  to add the indicated cost into the web page in conjunction with the referenced hyperlink.","In operation, when the intermediation platform  receives an HTTP response that carries the news magazine's web page, processor  may reference the markup-pattern table and determine that the four hyperlinks are listed in the web page. For each hyperlink, the processor  may then execute the COSTCOMP( ) function to compute a size-based cost to access the referenced article and the ADDCOTS( ) function to embellish the hyperlink with the computed size-based cost.",{"@attributes":{"id":"p-0165","num":"0165"},"figref":["FIGS. 14 and 15","FIG. 14","FIG. 15"]},"In the exemplary embodiment, the intermediation platform  may also include an exception table on the response side, to avoid performing pre-nonrepudiation for users who have already paid for content (or who are otherwise licensed to receive the content). In particular, reference data  could include a digital rights management (DRM) table that indicates, per user, rights that the user has already paid to receive. For instance, the DRM table could indicate that a given user, having a given username, is credited with one month worth of articles from www.newsmagazine.com. In that case, if platform  receives the above HTTP response and the response is destined for that user (as indicated by username field in the HTTP response (or in the associated HTTP request), for instance), then processor  may decline to add the price per article into the web page. For other users, however, the processor  may insert the cost.","b. Interstitial Billing (Charge-Advice)","According to another aspect of the exemplary embodiment, when a user clicks on a hyperlink or the client station otherwise requests web content, the intermediation system can engage in an interstitial \u201ccharge-advice\u201d session with the user, in order to collect the user's payment or agreement to pay for the requested web content.","The intermediation system can carry this out on either the request side or the response side. On the request side, for instance, the system can receive a web request being sent from the client station to the content server and can responsively engage in a charge-advice session to collect the user's payment or agreement to pay before passing the web request along to the content server. And on the response side, the system can receive requested web content being sent from the content server to the client station and can responsively engage in a charge-advice session to collect the user's payment or agreement to pay before passing the web content along to the client station.","Preferably, the amount that the intermediation system asks the user to pay or agree to pay during the interstitial charge-advice session will be a size-based cost. Thus, the intermediation system could employ a cost-computation handler routine as described above to compute a cost for the web content, and the system may engage in interstitial communication with the user in an effort to receive the user's payment of, or agreement to pay, the size-based cost.","i. Interstitial-Billing on the Request Side","In the exemplary embodiment, the URI-pattern table will include listings for URIs as to which users are expected to pay for access. Each record in the URI table may specify a last-known size of the web content at the URI, and each record may point to an INTERSTITIAL-BILLING( ) function defined by the handler logic modules. As with the ADDCOST( ) function call described above, the INTERSTITIAL-BILLING( ) function call could include as an argument a call to the COMPCOST( ) function, so as to pass to the INTERSTITIAL-BILLING( ) routine a size-based cost for the referenced content. The INTERESTITIAL-BILLING( ) routine would then invoke an interstitial charge-advice session with the user so as to collect the user's payment of, or agreement to pay (i.e., to pay or to be billed for), the size-based cost.",{"@attributes":{"id":"p-0173","num":"0173"},"figref":"FIG. 16"},"Note that this data in the URI-pattern table could alternatively be combined with the markup-pattern table entries described above. For instance, reference data  could include a table that lists URIs and specifies for each URI that (i) when a web request seeks content at the URI, the system should call the INTERSTITIAL-BILLING(COMPCOST(size)) function and (ii) when a web response includes a hyperlink to the URI, the system should call the ADDCOST(COMPCOST(size)) function.  shows such a combination table by way of example. Note that each record in the exemplary table can have both a request-side action and a response-side action, or a given record might have only a request-side action or only a response-side action.","Further, the DRM table could function as an exception table on the request side. In particular, if a user already has rights to receive particular content, then it might be inappropriate to collect payment from the user for that content.","Thus, in exemplary operation, assume that a user causes a web browser at client station  to send an HTTP request for content at \u201cwww.newsmagazine.com\/article0001.htm\u201d, which resides at content server . When the intermediation platform  receives the request, processor  may refer to the URI-pattern table to determine whether intermediation action should be taken.","Processor  may thereby determine that it should call the INTERSTITIAL-BILLING(COMPCOST(size)) function, passing a size value of 14, and may do so accordingly. In particular, processor  may first execute the COMPCOST(size) function to compute a size-based cost for the user to access the referenced article, and processor  may then execute the INTERSTITIAL-BILLING( ) function, passing that size-based cost as the amount that the system should ask the user to pay or agree to pay.","Executing the INTERSTITIAL-BILLING( ) function, processor  may signal out to interstitial server , such as by sending an HTTP request carrying the user's original GET request, as described above, and carrying the computed size-based cost. In turn, interstitial server  may send an interstitial charge advice screen to client station , requesting the user's payment or agreement to pay or be billed. The user may pay, for instance, by entering credit card information into the charge advice screen and clicking a link back to the interstitial server , in which case the web browser would then send an HTTP request to the interstitial server, providing the user's credit card information. The interstitial server  may then validate the credit card information, record the charge in a billing system, and then signal to the intermediation platform  to send the user's original GET request along to the content server . The interstitial platform may then do so, completing execution of the INTERSTITIAL-BILLING( ) function.","It should be understood that the interstitial billing function can take many other forms as well. For example, rather than signaling out to an interstitial server , the intermediation platform itself could communicate with the user to collect payment or to collect an agreement to pay. As another example, rather than or in addition to collecting payment, the intermediation system could collect from the user the user's agreement to be billed by the intermediary on behalf of the content server. Still other examples are possible as well.","ii. Interstitial-Billing on the Response Side","To trigger interstitial-billing on the response side, response trigger data  could associate a given URI with the INTERSTITIAL-BILLING(COMPCOST(size)) function call. For instance, the URI-pattern table could operate on the response side just as well as it does on the request side.","Thus, when the system receives an HTTP response providing content from that URI, the system could pause transmission of the response and may engage in interstitial communication with the user so as to collect the user's payment or an agreement to pay. After collecting the user's payment or agreement to pay, the system may then send the HTTP response along to the client station, for presentation of the requested content to the user.","As on the request side, the intermediation system could have data that indicates a last known size of the web content at issue. Alternatively, since the content is being passed through the intermediation system on its way from the content server to the client station, the intermediation system could simply look to the content to determine its size. The system could then pass that actual file size to the cost-computation routine, to facilitate computation of a size-based cost to access the web content.","An exemplary embodiment of the present invention has been described above. Those skilled in the art will understand, however, that changes and modifications may be made to this embodiment without departing from the true scope and spirit of the present invention, which is defined by the claims.","For instance, although the foregoing description focuses on HTTP signaling, many of the aspects described can be extended to apply with other signaling, such as FTP, SIP, RTP, or the like. Other exemplary variations are possible as well."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["An exemplary embodiment of the present invention is described herein with reference to the drawings, in which:",{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0033","num":"0032"},"figref":["FIG. 12","FIG. 11"]},{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0035","num":"0034"},"figref":["FIG. 14","FIG. 12"]},{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0037","num":"0036"},"figref":"FIG. 16"},{"@attributes":{"id":"p-0038","num":"0037"},"figref":"FIG. 17"}]},"DETDESC":[{},{}]}
