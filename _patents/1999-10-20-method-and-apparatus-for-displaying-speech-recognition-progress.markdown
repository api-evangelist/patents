---
title: Method and apparatus for displaying speech recognition progress
abstract: A graphical user interface provides a graphical volume meter indicating the volume of the user's speech and a speech recognition meter showing the progress of a speech recognizer. The graphical volume meter and recognition meter are both located near each other on the display such that the user can focus on both meters at the same time. One aspect of the present invention is that a speech recognition meter is placed on the display near the insertion point where the user intends their speech to take effect. Thus, the user does not have to divert their view from the insertion point in order to check the progress of the speech recognizer.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07292986&OS=07292986&RS=07292986
owner: Microsoft Corporation
number: 07292986
owner_city: Redmond
owner_country: US
publication_date: 19991020
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF ILLUSTRATIVE EMBODIMENTS"],"p":["The present invention relates to speech recognition. In particular, the present invention relates to graphical interfaces used in conjunction with speech recognition.","Speech recognition is currently being used in computer systems to translate spoken words into computer commands or alternatively to translate spoken words into text to appear in such things as computer generated documents, computer calendars, or e-mail messages.","Since speech recognition systems attempt to process any speech they \u201chear\u201d, most systems include a mechanism to activate and deactivate the recognizer so that unwanted speech is not processed. To help the user, many prior art systems include a graphical interface that indicates whether the recognizer was active or not. Other systems provide volume meters that indicate the volume of the speech signal received by the speech recognizer. To avoid obstructing the working area, these graphical interfaces appear in the corner of the active window or in a menu bar. In addition, if there are multiple meters on the display, they are separated from each other so that they can be easily read.","As a result of the positioning of the graphical interfaces, the user's attention is diverted from the insertion point where they expect their speech input to take effect. In addition, the user must look in separate areas if multiple status indicators are shown. Thus, under the prior art, the user's attention is divided from their primary task when they check on the status of the speech recognizer.","A graphical user interface provides a graphical volume meter indicating the volume of the user's speech and a speech recognition meter showing the progress of a speech recognizer. The graphical volume meter and recognition meter are both located near each other on the display such that the user can focus on both meters at the same time.","One aspect of the present invention is that a speech recognition meter is placed on the display near the insertion point where the user intends their speech to take effect. Thus, the user does not have to divert their view from the insertion point in order to check the progress of the speech recognizer.",{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 1"},"With reference to , an exemplary system for implementing the invention includes a general-purpose computing device in the form of a conventional personal computer , including a processing unit (CPU) , a system memory , and a system bus  that couples various system components including the system memory  to the processing unit . The system bus  may be any of several types of bus structures including a memory bus or memory controller, a peripheral bus, and a local bus using any of a variety of bus architectures. The system memory  includes read only memory (ROM)  and random access memory (RAM) . A basic input\/output (BIOS) , containing the basic routine that helps to transfer information between elements within the personal computer , such as during start-up, is stored in ROM . The personal computer  further includes a hard disk drive  for reading from and writing to a hard disk (not shown), a magnetic disk drive  for reading from or writing to removable magnetic disk , and an optical disk drive  for reading from or writing to a removable optical disk  such as a CD ROM or other optical media. The hard disk drive , magnetic disk drive , and optical disk drive  are connected to the system bus  by a hard disk drive interface , magnetic disk drive interface , and an optical drive interface , respectively. The drives and the associated computer-readable media provide nonvolatile storage of computer readable instructions, data structures, program modules and other data for the personal computer .","Although the exemplary environment described herein employs the hard disk, the removable magnetic disk  and the removable optical disk , it should be appreciated by those skilled in the art that other types of computer readable media which can store data that is accessible by a computer, such as magnetic cassettes, flash memory cards, digital video disks, Bernoulli cartridges, random access memories (RAMs) read only memory (ROM), and the like, may also be used in the exemplary operating environment.","A number of program modules may be stored on the hard disk, magnetic disk , optical disk , ROM  or RAM , including an operating system , one or more application programs , other program modules , and program data . A user may enter commands and information into the personal computer  through local input devices such as a keyboard , pointing device  and a microphone . Other input devices (not shown) may include a joystick, game pad, satellite dish, scanner, or the like. These and other input devices are often connected to the processing unit  through a serial port interface  that is coupled to the system bus , but may be connected by other interfaces, such as a sound card, a parallel port, a game port or a universal serial bus (USB). A monitor  or other type of display device is also connected to the system bus  via an interface, such as a video adapter . In addition to the monitor , personal computers may typically include other peripheral output devices, such as a speaker  and printers (not shown).","The personal computer  may operate in a networked environment using logic connections to one or more remote computers, such as a remote computer . The remote computer  may be another personal computer, a hand-held device, a server, a router, a network PC, a peer device or other network node, and typically includes many or all of the elements described above relative to the personal computer , although only a memory storage device  has been illustrated in . The logic connections depicted in  include a local area network (LAN)  and a wide area network (WAN) . Such networking environments are commonplace in offices, enterprise-wide computer network Intranets, and the Internet.","When used in a LAN networking environment, the personal computer  is connected to the local area network  through a network interface or adapter . When used in a WAN networking environment, the personal computer  typically includes a modem  or other means for establishing communications over the wide area network , such as the Internet. The modem , which may be internal or external, is connected to the system bus  via the serial port interface . In a network environment, program modules depicted relative to the personal computer , or portions thereof, may be stored in the remote memory storage devices. It will be appreciated that the network connections shown are exemplary and other means of establishing a communications link between the computers may be used. For example, a wireless communication link, such as the link provided by LAN RF or IR, or WAN cellular technologies, may be established between one or more portions of the network.","It should be understood that the present invention could be used in other computing devices besides computer , discussed above.  is a block diagram of a mobile device , which is another exemplary computing environment. Mobile device  includes a microprocessor , memory , input\/output (I\/O) components , a communication interface  for communicating with, for example, computer . In one embodiment, the afore-mentioned components are coupled for communication with one another over a suitable bus .","Memory  is implemented as non-volatile electronic memory such as random access memory (RAM) with a battery back-up module (not shown) such that information stored in memory  is not lost when the general power to mobile device  is shut down. A portion of memory  is preferably allocated as addressable memory for program execution, while another portion of memory  is preferably used for storage, such as to simulate storage on a disk drive.","Memory  includes an operating system , application programs  as well as an object store . During operation, operating system  is preferably executed by processor  from memory . Operating system , in one preferred embodiment, is a \u201cWINDOWS CE\u201d brand operating system commercially available from Microsoft Corporation. Operating system  is preferably designed for mobile devices, and implements database features that can be utilized by applications  through a set of exposed application programming interfaces and methods. The objects in object store  are maintained by applications  and operating system , at least partially in response to calls to the exposed application programming interfaces and methods.","Communication interface  represents numerous devices and technologies that allow mobile device  to send and receive information. The devices are similar to those discussed above with respect to computer  and include wired and wireless modems, satellite receivers and broadcast tuners to name a few. Mobile device  can also be directly connected to computer  to exchange data therewith. In such cases, communication interface  can be an infrared transceiver or a serial or parallel communication connection, all of which are capable of transmitting streaming information.",{"@attributes":{"id":"p-0030","num":"0029"},"figref":["FIG. 3","FIG. 3"],"b":["68","68","68","83","85","86","85","86","86","85","86"]},"One aspect of the present invention is a system that displays a speech input meter near the current insertion point on the display. The displayed meter has several embodiments including a microphone status indicator, a volume meter, and a recognition progress indicator. A second aspect of the invention is a system that displays a volume meter in combination with a recognition progress meter so that the user can view both meters without significantly changing their focus point on the display.",{"@attributes":{"id":"p-0032","num":"0031"},"figref":["FIGS. 4A through 4J","FIG. 4A"],"b":["200","200","200"]},"Window  includes a set of labels such as subject label  and location label  that describe the contents of a set of text boxes such as subject box  and location box . Window  also includes a command label denoted as \u201cDO\u201d label  and a command box . The user can cause text to appear in any of the text boxes or command box  by placing the cursor in the desired box and pressing keys on a keyboard. Alternatively, the user may enter text in the boxes by selecting virtual keys from a virtual keyboard displayed on the screen.","Users may also enter text into the text boxes or command box by giving focus to the appropriate box, activating a speech recognition application stored on the computer system, and speaking into a microphone. It is this type of text entry that is of particular interest to the present invention.","In , the user has given focus to command box . In one embodiment, this is performed placing a stylus on command box . However, a keyboard, mouse, trackball or any other suitable pointing device may be used to select command box . In some embodiments, a cursor  indicates an insertion point where input text will appear on the display.","In , the user has activated the speech recognition microphone so that the speech recognition system is prepared to accept input. In one embodiment, the speech recognition system is activated by holding a stylus in one position within command box  for longer than 200 msec. In other embodiments, the speech recognition system is activated by pressing a button on the mouse, trackball, keyboard, or the computer itself. Based on the activation of the speech recognition system, the present invention highlights the command box. In one embodiment, this highlighting appears as larger lines  and  at the top and bottom of command box . This change in the appearance of command box  indicates to the user that the speech recognition system is in a listening mode.","With the speech recognition system active, the user begins to speak into the microphone. As the user speaks, the present invention generates the display shown in , which includes a volume meter  showing the relative volume of the user's speech over time. Note that volume meter  is placed within command box , which previously contained the stylus, cursor, or insertion point for window . Under many embodiments of the present invention, the volume meter occupies the entire field box if there is no text present in the field box. Under some embodiments, this general rule is not followed when the empty field box is so large or so small that the volume meter will look odd if it is sized to match the box. In such cases, a separate meter box is generated as described below. In any case, the volume meter is placed at or very near the insertion point of the active window under most embodiments of the present invention.","In the embodiment of , volume meter  includes a set of tokens  and an empty space . As the user speaks, more tokens are added to the right of the existing tokens until the tokens nearly fill command box . This expansion can be seen by comparing the set of tokens  of  to the set of tokens  of .","Under one embodiment of the present invention, each token consists of a lower colored portion and an upper white portion. The combined height of the colored portion and the white portion is constant while the individual heights of the colored portion and the white portion vary. Under one embodiment, the colored portion is positively related to the volume of the user's speech and the white portion is negatively related to the volume such that the colored portion is taller and the white portion is shorter when the speech signal is louder.","In some embodiments, the colored portions have different colors at different heights. In one particular embodiment, the colored portions are green up to one height, yellow up to a second height, and, if high enough, red on top. Thus, colored portions associated with low volumes are only green, colored portions associated with intermediate volumes are green and yellow, and colored portions associated with high volumes are green, yellow and red.",{"@attributes":{"id":"p-0041","num":"0040"},"figref":["FIG. 4D","FIG. 1"],"b":["226","228","230","232","233","46"]},"If the user continues to speak after the tokens of the volume meter near the right side of command box , one embodiment of the invention shifts the existing tokens to the left before adding a new token to the right. This causes the furthest left token to disappear from the display. One such shift is shown in  where tokens  of  have been shifted left and a new token  has been added to form tokens .","To prevent the speech recognition system from processing further speech, the user deactivates the microphone. For embodiments where the microphone was activated by placing a stylus in a command box, the microphone is deactivated by lifting the stylus. In embodiments where the microphone is activated by pressing a keyboard or mouse button, the microphone is deactivated by releasing the button. In alternative embodiments, the speech recognition system is automatically deactivated when it does not receive any speech signal for one second.","When the user deactivates the microphone, most embodiments of the present invention remove the command box highlighting. For example, in the embodiments where large lines had been put in place to indicate an active microphone, these large lines are removed. This results in smaller command box lines such as lines  and  of , which indicate to the user that the microphone is no longer active.","Once the microphone is inactive, or in some embodiments, while the microphone is still active, the speech recognizer begins to process the stored speech signal. In many embodiments, the speech recognizer divides the incoming speech into frames and attempts to identify a phoneme for each frame. Typically, the earliest received frames are identified first. When the recognizer identifies a phoneme for a frame, it passes the frame's number to a display application of the present invention together with the total number of frames the recognizer is processing. If the microphone is inactive, the display application then calculates the percentage of frames that have been decoded. By multiplying this percentage by the width of the command box, the display application determines the width for a progress bar. In many embodiments, this progress bar is shown by changing the color of portions of some of the volume tokens.","For example,  shows a progress bar  that replaces the white portions of tokens . Note that the colored portions of tokens  continue to be displayed in the command box. This allows the user to view both the volume meter and the recognizer progress bar at the same time.","As the recognizer decodes more frames, the recognizer progress bar moves to the right in the command box. Thus, in  progress bar  extends further to the right then it did in . When all of the frames are decoded, as shown in , progress bar  extends to the last token in the volume meter.","In the embodiment of , the input speech signal is a command for the computer system. As such, the system can either execute the command directly or display the command in command box  as shown in .","In other embodiments, a recognition progress indicator is provided without showing a volume meter. An example of a series of displays generated by such an embodiment is shown in . In , the user has given focus to a command box . In , the user has activated the microphone for the speech recognition system. In response, the command box has been highlighted by placing larger lines  and  at the top and bottom of command box . This change in the appearance of command box  indicates to the user that the speech recognition system is in a listening mode.","In , the user has finished speaking and has deactivated the microphone. In response, the highlighting on the command box has been removed by removing larger lines  and  and restoring the command box to its original appearance. Note that while the user was speaking, the embodiment of  did not display a volume meter.","When the user deactivates the microphone, or in some embodiments while the microphone is active, the speech recognizer begins processing the speech signal. To show the progress of the recognizer, a progress bar  is displayed in command box  after the user deactivates the microphone. Progress bar  starts from the left side of command box  and expands to the right as the recognizer decodes frames of the speech signal. In one embodiment, the width of progress bar  is set equal to the width of command box  multiplied by the percentage of speech frames decoded by the recognizer.","In other embodiments of the invention, the progress meter and the volume meter are displayed in a data field rather than a command box.  show selected screens generated by such embodiments. In , the user has placed insertion point  in an empty data field , which is part of an appointment form. In , the user has activated the microphone causing the field to be highlighted such that lines  and  appear around data field . With the microphone active, the user's speech is collected by the speech recognizer. As it receives the speech signal, the recognizer generates a set of volume values, which are used to generate a volume meter  shown in . The volume meter of  is similar to the meter of  described above.","When the user deactivates the microphone, the highlighting on the data field is removed by removing lines  and  from the edges of data field  as shown in . A recognizer progress bar  is then displayed so that the bar expands from the left as the recognizer decodes frames of the speech signal. Progress bar  is similar to progress bar  of . When all of the speech frames have been decoded, volume meter  and progress bar  are replaced with displayed text , which represents the text decoded from the speech signal. The displayed text is then used by the application as the user's input for data field . For example, display text  represents the user's input for the \u201csubject\u201d of their appointment.","Embodiments of the present invention also provide a volume meter and progress meter for speech designed to replace highlighted text on a display.  show selected displays produced by such embodiments. In , a data field  contains displayed text . In , the user has highlighted a word  in displayed text  by, for example, \u201cclicking\u201d on the word or \u201cdragging\u201d the cursor over the word.","In , the user has activated the microphone causing a meter box  to appear below highlighted word . As the user speaks, meter box  is filled with a volume meter  similar to volume meter  of . When the user finishes speaking and deactivates the microphone, a black recognizer progress bar  is displayed in meter box  by selectively changing the color of the white areas of volume meter . Progress bar  expands to the right in proportion to the percentage of frames that the recognizer has decoded.  shows one screen image during this progression. When all of the frames have been decoded, meter box  is removed from the display and the highlighted word is replaced by a decoded word(s)  from the speech recognizer.","Embodiments of the present invention also provide a volume meter and progress indicator for speech that is to be inserted in the middle of text.  show selected images from a display produced by one such embodiment. In , the user has placed an insertion point  between two characters in a field .","In , the user has activated the microphone and begun speaking. In response, a meter box  is displayed below insertion point . In one embodiment, the height of meter box  is chosen to match the font size of the characters to the left of the insertion point. As the user speaks, a volume meter  appears in meter box . When the user finishes speaking, a progress bar  appears in meter box  as shown in . Volume meter  and progress bar  are similar to volume meter  and progress bar  described above. Progress bar  expands to the right over time to show the progress of the speech recognizer. When the speech recognizer has decoded all of the frames of the speech signal, meter box  is removed and text , which was decoded from the speech signal, is inserted at insertion point . In some embodiments, the insertion point is then moved to the end of inserted text . Note that any text after insertion point  \u201creflows\u201d to accommodate text . A description of such text reflow is described further below.","In other embodiments of the invention in which speech is to be inserted within existing text, the meter box is placed within the text instead of below the text.  show selected images of a display generated by one such embodiment. In , the user has placed an insertion point  between two displayed text characters. In , the user has activated the microphone and begun to speak. In response, a volume meter  has been inserted at insertion point .","When volume meter box  is inserted into the display, the text beyond insertion point  \u201creflows\u201d to accommodate the volume meter. In other words, the text on the same line as volume meter  initially scrolls right. During this scrolling, if a word on the right end of the line exceeds the right margin, the word is removed from the line and placed on the far-left of the next line. To accommodate the insertion of this word on the next line, the words of the next line are also scrolled to the right. This continues until the last line of the current paragraph is reached. When scrolling causes a word to exceed the right margin of the last line of a paragraph, a new line is added below the last line and the word is moved to the left side of the new line.","In one embodiment, volume meter  is assigned a fixed width. In other embodiments, the width of volume meter  continues to increase as long as the microphone is active and the user continues to speak. In such embodiments, when the volume meter reaches the right side of the display, the meter is continued on the next line of text. An example of such an embodiment is shown in  where the user has spoken long enough that volume meter  extends over two lines. The maximum height of the bars in volume meter  is generally fixed and can be selected as desired. For instance, in one embodiment, the maximum height is the line height of the font of the character to the left of the volume meter.","In , a progress bar  is added to volume meter  to indicate the progress of the speech recognizer in decoding the speech signal. In some embodiments where volume meter  extends over more than one line, progress bar  expands to the edge of the volume meter on the current line then continues to expand on the next line of the volume meter. When the recognizer has decoded the entire speech signal, volume meter  and progress bar  are removed from the display and text  decoded from the speech signal is inserted at insertion point  as shown in .","Although the volume meters and progress indicators described above are all shown as rectangular boxes, other shapes are possible under other embodiments of the invention. For example, the volume meter and the progress indicator can be shown along the radius of a circle or can be shown by changing the size or color of a displayed object on the screen. In addition, although the volume meter and progress indicator are shown above as expanding from left to right, they can alternatively expand from top to bottom, bottom to top, right to left, or diagonally. Furthermore, although the progress indicator has been shown as replacing the white areas of the volume meter, in other embodiments of the invention, the progress indicator is fully separated from the volume meter. Any colors mentioned above for the volume meter or the progress indicator are merely illustrative and other colors may be substituted within the scope of the invention.",{"@attributes":{"id":"p-0063","num":"0062"},"figref":["FIG. 10","FIG. 10"],"b":["400","400","400","402","404","402","400","404"]},"Device driver  converts the input signals it receives into one or more pointing device messages, which are routed to an operating system message hook procedure . The operating system maintains a list of applications that are to receive pointing device messages when they are generated. Based on that list, message hook procedure  routes the pointing device messages to meter display application .","Based on the received device messages, meter display application  is able to determine that the user wants to activate the speech recognition system. In one embodiment, this determination is made by measuring the length of time the user maintains a stylus in contact with one area of a touch screen.","When meter display application  determines that the user wants to activate the speech recognition system, it communicates this information to a speech recognizer application . In one embodiment, this communication is performed using an Application Programming Interface (API). Speech recognizer application  includes a number of sub-modules (not shown for clarity) that together are capable of decoding a speech signal into text. A number of such speech recognizers are available such as Microsoft Continuous Speech Recognition Engine from Microsoft Corporation of Redmond, Wash.","Before it can begin to decode the speech signal, speech recognizer  must activate a microphone . In the embodiment of , this is done indirectly through an audio object , which is an abstraction of a number of different possible audio inputs. For example, audio object  can act as an interface to an audio file, a telephone line, or in this case, a microphone. By presenting a single abstraction to speech recognizer , audio object  simplifies the design of speech recognizer  and creates a portable object that can be used in other contexts.","Audio object  communicates with a sound driver , which interacts with a sound card . Sound card  is typically a hardware device inside a personal computer that includes one or more external ports. Under one embodiment of the present invention, sound card  is connected to microphone . In response to a call from audio object , sound driver  causes sound card  to open a communication path to microphone .","With microphone  active, audio signals such as speech are converted into electrical signals by microphone  and are passed to sound card . Sound card  includes an analog-to-digital converter that converts the analog electrical signals into a series of digital values. These digital values are then passed to sound driver , which collects the digital signals to form microphone messages.","In embodiments that utilize an operating system such as Windows 95\u00ae, Windows 98\u00ae, or Windows NT\u00ae from Microsoft Corporation of Redmond Wash., the microphone messages are routed to a message hook procedure , which forms part of the operating system. Message hook procedure  maintains a list of applications that want to receive microphone messages when they are generated. In such embodiments, audio object  registers with message hook procedure  so that it receives microphone messages from sound driver .","Upon receiving a microphone message from message hook procedure , audio object  collects the microphone data contained in the message in a temporary buffer. Audio object  then provides speech recognizer  with a pointer to the temporary buffer so that speech recognizer  can access the speech values.","Using the pointer, speech recognizer  accesses the speech values in order to generate a set of volume values that are passed to meter display application . In one embodiment, sound card  generates 16 kilobytes of speech data per second. Each byte of data represents the magnitude or volume of the speech signal during a respective fraction of a second. Although the volume of the user's speech is represented directly by the sound card's data, most embodiments of the invention do not base the volume meter directly on this data. Instead, an average volume is determined from the sound card data. In particular, for many embodiments of the invention, speech recognizer  generates an average volume value from the samples created from a tenth of a second of speech.","The average volume values generated by speech recognizer  are used to produce the volume meters described above. One process for converting the values into the displayed meter is shown in the flow diagram of .","The process of  begins at step  where meter display application  waits for the next volume value. At step , speech recognizer  sends a volume value to display application . In one embodiment, this is performed using a callback procedure. At step , display application  determines if this is the first volume value since the microphone was activated. If this is the first value, the process continues at step  where display application  determines the meter box size and position.","As shown above, the meter box can have many different sizes and positions. In particular, the meter box can replace an entire field box, be positioned within a larger field box, be positioned below an insertion point or be positioned at an insertion point. Typically, the height of the meter box is chosen to match the font of the text near the box. The width of the box is chosen by balancing a desire to make the meter easy to see with a desire to limit the amount of previously displayed data that is obscured by the meter.","Once the size and position of the meter box has been determined, the process continues at step  where display application  sets the length of a ring buffer based on the size of the meter box. The ring buffer is designed to hold enough values to fill a desired portion of the meter box with volume tokens. Thus, the size of the ring buffer is determined by multiplying the width of the meter box by a proportion constant that indicates the amount of the meter box to be filled and dividing the result by the width of each volume token to be inserted in the meter box. For example, if the meter box is 100 pixels wide, each volume token is three pixels wide and only ninety percent of the meter box is to be used, the ring buffer should be large enough to hold thirty values (100 times 0.9 divided by 3).","Once the buffer length is set, or if this is not the first value at step , the process continues at step  where the value is transformed. This transformation is used by some embodiments of the present invention to provide a more descriptive image of the volume. In particular, the transformation reduces the scale between the largest volume and the smallest volume so that the displayed meter is not comprised of only full volume values and zero volume values. In one embodiment, the transform involves taking the logarithm of the volume value. In another embodiment, the transform involves taking the square root of the volume value.","Once the transform has been determined for the value, the transformed valued is stored in the ring buffer at step . If the ring buffer already contains values, these values are shifted within the ring buffer before the new value is added. If the ring buffer is full, the oldest value is removed by this shifting.","Once the value has been added to the ring buffer, the process continues at step  where display application  prepares to create the first volume token for the meter box. As part of this preparation, display application  sets a base point so that it is equal to the bottom-left corner of the meter box. This base point represents the location for the first volume token in the meter box. With the base point set, display application  then retrieves the first value from the ring buffer at step .","At step , display application  determines the ratio of the retrieved value to a maximum allowed value. At step , display application  uses this ratio to determine the size and location of the subordinate blocks that form the volume token. This determination is used to \u201cdraw\u201d the subordinate blocks on the display by storing the block's coordinates, which are later accessed by a display driver to create an image on a display.","The size and location of the subordinate blocks is determined sequentially by first determining the height of a base rectangle. In many embodiments, this base rectangle has a green color on the display. The height of the base rectangle is equal to the height of the meter box times the lesser of a maximum height ratio for the base rectangle and the volume ratio of the retrieved value. The maximum ratio sets a limit for the height of the base rectangle. If the volume ratio is less than the maximum height ratio of the base rectangle, the height of the base rectangle is set equal to the height of the meter box times the volume ratio. In addition, since the volume value is not large enough to require a full base rectangle, a white rectangle is drawn from the top of the base rectangle to the top of the meter box. Thus, the volume token for a small volume value only has two subordinate blocks.","If the volume ratio is greater than the maximum height ratio of the base rectangle, the volume ratio is compared to a maximum height ratio of an intermediate block. If the volume ratio is less than the maximum height ratio of the intermediate block, the maximum height ratio of the base rectangle is subtracted from the volume ratio to determine an excess ratio. The excess ratio is then multiplied by the total box height to determine the height of the intermediate rectangle. This rectangle is then drawn on top of the base rectangle and is typically colored yellow. A white rectangle is then drawn from the top of the intermediate rectangle to the top of the meter box.","If the volume ratio is greater than the maximum height ratio of the intermediate rectangle, the height of the intermediate rectangle is equal to the height of the meter box times the difference between the maximum height ratio of the intermediate rectangle and the maximum height ratio of the base rectangle. The intermediate rectangle is then drawn on top of the base rectangle. The volume ratio is then compared to the maximum height ratio of a top rectangle. If the volume ratio is greater than the maximum height ratio of the top rectangle, the height of the top rectangle is equal to the height of the meter box times the difference between the maximum height ratio of the top rectangle and the maximum height ratio of the intermediate rectangle.","If the volume ratio less than the maximum height ratio for the top rectangle, the height of the top rectangle is equal to the height of the meter box times the difference between the volume ratio and the maximum height ratio of the intermediate rectangle.","Once the height of the top rectangle has been determined, the top rectangle is drawn above the intermediate rectangle and a white rectangle is drawn above the top rectangle. Typically, the top rectangle is colored red.","With the coordinates of each rectangle in the current volume token stored, the process continues at step , where the base point is incremented by one volume token width to the right. This variable sets the bottom-left-most coordinates of the base rectangle for the next volume token.","At step , display application  determines if this was the last value in the ring buffer. If this was not the last value, display application  accesses the next value in the ring buffer at step  and repeats steps , , , , and . If this was the last value in the ring buffer, display application  indicates to display driver  that the display of the volume meter should be updated at step . Display driver  then displays the volume meter based on the data stored by display application . After step , display application  returns to step  to await a new volume value from speech recognizer .","In one embodiment, speech recognizer  begins to decode the speech data when the microphone is deactivated. The microphone can be deactivated by the user by using pointing device  or by audio object  if the audio object detects a long enough pause in the user's speech. For some embodiments where pointing device  is a stylus, the user deactivates the microphone by lifting the stylus from the touch screen. As with activating the microphone, the deactivation message from the pointing device is passed through device driver , message hook procedures , display application , speech recognizer , audio object , and sound driver  before it arrives at sound card .","Speech recognizer  typically decodes the speech data by converting \u201cframes\u201d of the speech data into sub-word units such as phonemes or triphones. In most cases, a frame consists of 10 milliseconds worth of speech data, which is converted into the frequency domain before being compared to a set of acoustic and language models. These models provide a probability that a particular sub-word unit was uttered given the speech data. In some cases, a detector trellis is used which identifies a most likely sequence of sub-words given the speech data and the probabilities from the models. In such a detector trellis, unlikely sequences or paths are removed from consideration. As this pruning is performed, all but one sub-word is removed from consideration for at least one past frame. This sub-word is then identified as the decoded sub-word for the frame.","As shown above, the present invention provides a progress meter to allow the user to monitor the progress of the speech recognizer.  provides a flow diagram of a method for generating this meter under one embodiment of the present invention.","In a first step  of , display application  waits for a progress message from speech recognizer . At step , speech recognizer  decodes a sub-word unit for a frame and invokes a callback procedure to send a message to display application . In the message, speech recognizer  indicates the total number of frames to be decoded and the frame number of the last frame that was decoded.","When display application  receives the frame message from speech recognizer , it determines the maximum span size, or width, for the progress meter at step . In some embodiments, the maximum width is the width of the meter box. In other embodiments the maximum width is the width of the volume meter displayed in the meter box.","At step , display application  determines the percentage of frames that have been decoded by dividing the total number of speech frames by the frame number of the last decoded frame. At step , display application  multiplies this percentage by the maximum span of the progress meter to determine the length of the progress meter to be displayed.","At step , display application  divides the width calculated in step  by the width of an individual volume token in the volume meter to determine the number of white rectangles that must be changed to black. At step , display application  changes the color of the white rectangles identified in step . The progress meter is then displayed again by display driver  and display . The process then returns to step , where display application  waits for the next progress message.","Although the progress meter described above is implemented by changing the color of the white rectangles of the volume tokens, other implementations are within the scope of the invention. In particular, the progress meter can be implemented by changing the color of any of the colored rectangles of the volume tokens or by changing the color of a portion of the screen that is separate from the volume tokens.","Although the present invention has been described with reference to particular embodiments, workers skilled in the art will recognize that changes may be made in form and detail without departing from the spirit and scope of the invention."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0008","num":"0007"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIGS. 4A through 4J"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIGS. 5A through 5D"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIGS. 6A through 6F"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIGS. 7A through 7E"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIGS. 8A through 8D"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIGS. 9A through 9E"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 12"}]},"DETDESC":[{},{}]}
