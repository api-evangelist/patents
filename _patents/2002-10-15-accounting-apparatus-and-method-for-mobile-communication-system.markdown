---
title: Accounting apparatus and method for mobile communication system
abstract: An accounting apparatus and method for a mobile communication system, where a packet service accounting method for a mobile communication terminal includes the steps of checking whether there is an error in a received PPP frame; if there is an erroneous PPP frame in the received PPP frame, generating a PPP control frame containing a size information of the erroneous PPP frame; transmitting the PPP control frame to a base station; and if an authorization response for the PPP control frame is received from the base station, updating a size of total received data, and displaying the updated data size on a display.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=06986077&OS=06986077&RS=06986077
owner: Samsung Electronics Co., Ltd.
number: 06986077
owner_city: 
owner_country: KR
publication_date: 20021015
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["PRIORITY","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS"],"p":["This application claims priority to an application entitled \u201cACCOUNTING APPARATUS AND METHOD FOR MOBILE COMMUNICATION SYSTEM\u201d, filed in the Korean Industrial Property Office on Oct. 15, 2001 and assigned Serial No. 2001-63509, the contents of which are hereby incorporated by reference.","1. Field of the Invention","The present invention relates to an accounting apparatus and method for a mobile communication system, and more particularly to an apparatus and method for generating an invoice for data having no error in a mobile communication system.","2. Description of the Related Art","Generally, a CDMA (Code Division Multiple Access) mobile communication system has been developed from typical voice-centered mobile communication standards to the next generation mobile communication standards to make it possible to transmit not only voice signals but also high-speed radio data. This next generation mobile communication standard called IMT-2000 (International Mobile Telecommunication-2000) is now being developed to bring a new age of a high-speed radio data service. Presently, a CDMA2000-1x (IS-95C) system supports a radio data communication service at a data transmission speed of 144 kbps corresponding to a speed double that of an IS-95B system. In the future, assuming that a CDMA2000-3x system is developed, a user may receive a communication service at a maximum speed of 384 kbps. There are various kinds of the communication services, that is, a VOD (Video On Demand) service, a music video service, a TV broadcasting service, etc. A user may receive service data over a packet network instead of a circuit network. In this case, the user may have to pay a charge for a total of quantity communication data (i.e., the number of packets) not total communication use time. Therefore, service providers have to provide the user with an accurate explanation of the charges by accurately indicating on their bill the quantity of communication data.","Presently, SK telecom Co., Ltd. and Korea Telecom Freetel Co., Ltd., which are representative service providers in the Republic of Korea, adopt a monthly fixed rate in their accounting system, and charge their subscribers a fee in excess of the monthly fixed rate based on a predetermined time zone such as a common time zone, a discount time zone, and a midnight time zone, as shown in the following TABLE 1.",{"@attributes":{"id":"p-0008","num":"0007"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"119pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"105pt","align":"center"}}],"thead":{"row":[{"entry":"TABLE 1"},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}},{"entry":[{},"Monthly",{},{}]},{"entry":[{},"Fixed",{},"Over Free Communication Time"]},{"entry":["Classification","Rate","Free Communication Time","(Won per 10 seconds)"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"6"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"119pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"5","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"6","colwidth":"35pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Data","\u2014","\u2014","Common","Discount","Midnight"]},{"entry":["Standard",{},{},"Time","Time","Time"]},{"entry":[{},{},{},"Zone","Zone","Zone"]},{"entry":["Data 60","2700","60 minutes","17 won","12 won","8 won"]},{"entry":[{},"won","(20 minutes\/10 minutes\/30 minutes)"]},{"entry":["Data 120","4500","120 minutes","17 won","12 won","8 won"]},{"entry":[{},"won","(50 minutes\/20 minutes\/50 minutes)"]},{"entry":["Data 240","8500","240 minutes","17 won","12 won","8 won"]},{"entry":[{},"won","(100 minutes\/40 minutes\/100 minutes)"]},{"entry":{"@attributes":{"namest":"1","nameend":"6","align":"center","rowsep":"1"}}}]}}]}}},"As shown in the above TABLE 1, SK telecom Co., Ltd. and Korea Telecom Freetel Co., Ltd. charge their subscribers (i.e., users) a usage fee on the basis of the communication time irrespective of the used data quantity. As seen from the table, they have a scale of charges dependent only on the time zones such as common, discount, and midnight time zones. However, in recent times, they have announced a new accounting plan by which a usage fee for the next generation mobile communication system (e.g., 2G or CDMA2000-1x) is dependent on the quantity of data for various types of Internet content used, as shown in the following TABLE 2.",{"@attributes":{"id":"p-0010","num":"0009"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"133pt","align":"center"}}],"thead":{"row":[{"entry":[{},"TABLE 2"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]},{"entry":[{},"Contents Type","Rate Base (1 packet = 512 bytes)"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"E-mail (Text)","6.5 won\/packet"]},{"entry":[{},"Character Download","6.5 won\/packet"]},{"entry":[{},"Norahbang (Karaoke)","2.5 won\/packet"]},{"entry":[{},"MP3","2.5 won\/packet"]},{"entry":[{},"Download Game","2.5 won\/packet"]},{"entry":[{},"VOD","2.5 won\/packet"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}}}},"As shown in the above TABLE 2, subscribers are unchanged usage fees based on the quantity of the received data for each of Internet Contents. For example, the usage fee of 6.5 won per packet is applicable to the E-mail service, and another usage fee of 2.5 won per packet is applicable to the VOD service.","However, the above-mentioned accounting methods have a disadvantage in that data loss caused by a poor channel condition very frequently occurs while using a network such as the Internet. Accordingly, the user has to pay his or her usage fee even when poor data is received or data is lost from Internet Contents over the network such as the Internet.","Typically, in the case where a packet service is transmitted to a mobile communication terminal, data loss occurs in a PPP (Point-to-Point Protocol) layer, and further, more serious data loss occurs while the mobile communication terminal is moving. In this case, after the lost data is discarded, a data re-transmission procedure is performed in a TCP (Transmission Control Protocol) layer. However, according to the conventional accounting method, the service providers have undesirably charged their users for the lost data. In other words, the conventional accounting method has a disadvantage in that too much money is unfairly charged to the users when a large amount of data loss occurs due to a poor channel condition.","In the case where the user receives undesired data instead of his or her desired data over the network, the user must pay a usage fee for the undesired data to a corresponding service provider although there is no data loss in a data transmission procedure. In more detail, in the case where unnecessary data instead of necessary data to be received from a TCP\/UDP (Transmission Control Protocol\/User Datagram Protocol) service port number is transmitted to a user's terminal while the user uses an application program, it is desirable that a usage fee for the unnecessary data is not charged to the user. But, actually, the user must pay the service provider usage fee for the unnecessary data. Also, in case of an UDP, where unnecessary data is successively received from a server because a user's terminal is not released from the server after completing a user's application program, the user must again pay an excessive fee for the unnecessary data.","Therefore, the present invention has been made in view of the above problems, and it is an object of the present invention to provide an accounting apparatus and method for generating a clear user invoice in a packet service of a mobile communication system.","It is another object of the present invention to provide an accounting apparatus and method for performing accurate accounting action in a packet service of a mobile communication system.","It is yet another object of the present invention to provide an accounting apparatus and method for excluding from a user fee an excessive fee caused by erroneous data in a packet service of a mobile communication system.","In accordance with one aspect of the present invention, the above and other objects can be accomplished by providing a packet service accounting apparatus for a mobile communication terminal, comprising: a PPP (Point-to-Point Protocol) layer for checking whether there is an error in a received PPP frame, and generating a PPP control frame containing size information of an erroneous PPP frame when there is an erroneous PPP frame in the received PPP frame; and a physical layer for loading the PPP control frame on a physical channel frame, and transmitting it to a base station.","In accordance with another aspect of the present invention, there is provided a packet service accounting method for a mobile communication terminal, comprising the steps of a) checking whether there is an error in a received PPP frame; b) if there is an erroneous PPP frame in the received PPP frame, generating a PPP control frame containing size information of the erroneous PPP frame; c) transmitting the PPP control frame to a base station; and d) if an authorization response for the PPP control frame is received from the base station, updating a size of total received data, and displaying the updated data size on a display.","Now, preferred embodiments of the present invention will be described in detail with reference to the annexed drawings. In the drawings, the same or similar elements are denoted by the same reference numerals even though they are depicted in different drawings. In the following description, a detailed description of known functions and configurations incorporated herein will be omitted as it may cloud the subject matter of the present invention .","The present invention is provided to charge a user an accurate usage fee in a packet service of a mobile communication system where channel conditions are abruptly variable. For this purpose, a mobile communication terminal measures a quantity of received data having no error and a quantity of accurate received data, and displays them. In this case, the mobile communication terminal informs a base station of a quantity of erroneous received data and a quantity of unnecessary received data, and thus enables the base station to exclude the quantities of erroneous and unnecessary received data from a total account. As a result, the user may recognize accurately a quantity of received data, and may pay his or her usage fee for a quantity of actually serviced data.",{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 1"},"As shown in , a protocol layer includes a physical layer  and an RLP (Radio Link Protocol) layer  that are used for radio access; a PPP layer , an IP (Internet Protocol) layer  and a TCP\/UDP layer  that are used for a radio packet service; and an application (API: Application Programming Interface)  for supporting an E-mail service and a VOD (Video On Demand) service, etc. A procedure for allowing a mobile communication terminal to receive packet data will hereinafter be described with reference to .","Referring to , the physical layer  decodes a physical layer frame received wirelessly and checks a CRC (Cyclic Redundancy Check) of the decoded physical layer frame. If there is no error in the CRC, the physical layer  transmits a payload of the frame to an upper RLP layer . Herein, the physical layer is implemented with hardware (e.g., a channel encoder, etc.) corresponding to a physical channel such as a supplemental channel. The RLP layer  generates PPP frames using RLP frames received from the physical layer , and transmits them to the PPP layer .","The PPP layer  is a data link layer between two points, a MS (Mobile Station) and PDSN (Packet Data Serving Node), and is used for an IP addressing and Registration\/authentication. According to the present invention, the PPP layer  detects a quantity of data to be excluded from a total account, and sends a message to a base station informing it of the quantity of data to be excluded. For example, in the case where a PPP layer  detects erroneous data (i.e., erroneous frame) by checking the CRCs of the PPP frames received from the RLP layer , it generates a PPP control frame containing information of a size of the erroneous frame and transmits it to the base station. For another example, in the case where upper protocol layers inform the PPP layer  of unnecessary data reception, the PPP layer  generates a PPP control frame containing information of a size of the unnecessary data, and then transmits it to a base station.","The IP layer  functioning as a data transmission path is a network layer. According to the present invention, the IP layer  investigates data received from the PPP layer .","Upon receiving the investigation result, in the case where the received data is an UDP data and a port number is a predetermined value (e.g., 434), the IP layer  transmits the received data to a TCP\/UDP layer . In the case where the port number is not the predetermined value, the IP layer  informs the PPP layer  of unnecessary data reception. At this time, the IP layer  also informs the PPP layer  of a size of the unnecessary data.","The TCP\/UDP layer  having an error recovery function is a transport layer for reliable data transmission. According to the present invention, in the case where the TCP\/JDP layer  is not released from a server after an upper application  has been completed and thereby receives unnecessary data from the server, it informs the PPP layer  of the unnecessary data reception. At this time, the TCP\/UDP layer  also informs the PPP layer  of the size of the unnecessary data. The application  corresponds to a driving part for receiving a VOD service, music video service, or TV broadcasting service.","A starting point of a packet data is on the PPP layer . The PPP layer  has a part for detecting errors of the received frame data. If the part receives the erroneous frame data, then it sends a message of a size of the erroneous frame data to a base station. Also, if the part detects that the PPP layer receives unnecessary data, then it sends a message of a size of the unnecessary data.","Operations of the present invention will hereinafter be described with reference to the accompanying drawings.",{"@attributes":{"id":"p-0037","num":"0036"},"figref":"FIG. 4"},"With reference to , it is determined at step  that a PPP layer  receives a frame from an RLP layer . In the case where the PPP layer  receives the frame from the RLP layer  at step , it calculates a CRC about the received frame and compares the CRC with a predetermined CRC included in the frame at step . In the case where the PPP layer  does not receive the frame from the RLP layer  at step , a procedure goes to step  to perform a corresponding function. Then, upon receiving the CRC comparison result from step , the PPP layer  determines at step  whether there is an error in the frame. If there is an error in the frame (i.e., erroneous frame), then the PPP layer  goes to step  to generate a control frame containing the information of the erroneous data size (i.e., the size of the erroneous frame). Herein, for example, a PPP frame is used as the control frame. A configuration of the PPP frame is shown in . There are many fields in the PPP frame, and each field is defined as follows, as shown in .","A field \u201c7E\u201d having 1 byte indicates a start and termination points of frame. A field \u201cAddress\u201d having 1 byte indicates a device address between peers. A field \u201cControl\u201d having 1 byte performs a frame flow control between peers. A field \u201cFF\u201d having 1 byte indicates \u201cAddress\u201d and \u201c03\u201d indicates \u201cControl\u201d. A field \u201cCRC\u201d having 2 bytes is adapted to detect an error of frame. A field \u201cProtocol\u201d having 2 bytes determines a type of frame, e.g., a PPP control data or a real IP data frame, etc. If the field \u201cProtocol\u201d is 0x0021, it means an IP packet. A field \u201cData\u201d having 1 1500 bytes contains data contents used for a protocol.","In order to inform a base station of the size of the erroneous data, data contents recorded in the field \u201cData\u201d of  are classified into an \u201cIdentifier\u201d, a \u201cRequest\/Response\u201d, a \u201cLength\u201d, a \u201cType\u201d, an \u201cErroneous data quantity\u201d, and a \u201cReal received data quantity\u201d, as shown in . A configuration of the \u201cData\u201d field of the PPP frame of  is as follows.","The field \u201cRequest\/Response\u201d having 1 byte allows a terminal to send a message \u201c1\u201d to a base station as an error request signal, and then allows the base station to send a message \u201c2\u201d to the terminal as a request response signal. In this case, the base station uses an identifier received from the terminal.","The field \u201cIdentifier\u201d having 1 byte indicates the number of transmitted data. Whenever the error occurs, the field \u201cIdentifier\u201d increases a request value one by one. Here, the range of the request value is from 1 to 255, and thus the request value circulates from 1 to 255.","The field \u201cLength\u201d having 2 bytes calculates the number of bytes between the field \u201cRequest\/Response\u201d to the field \u201cReal received data quantity\u201d. In , the \u201cdata\u201d field is 13 bytes because 1 byte (Request\/Response)+1 byte (Identifier)+2 bytes (Length)+1 byte (Type)+4 bytes (Erroneous data quantity)+4 bytes (Real received data quantity)=13 bytes.","The field \u201cType\u201d having 1 byte indicates that a PPP frame content is a measurement value corresponding to the quantity of data received at a terminal.","The field \u201cErroneous data quantity\u201d having 4 bytes indicates a size of the erroneous frame. The field \u201cReal data quantity\u201d having 4 bytes indicates a size of data having no error.","As described above, since a configuration of a frame adapted to inform a base station of a size of the erroneous data is equal to that of a PPP control data frame, it can be readily applicable to the PPP control data frame. As compared to the PPP control data frame, the frame of  newly defines the field \u201cType\u201d in such a way that the base station recognizes the erroneous data quantity and the real received data quantity. Presently, the field \u201cType\u201d is commonly determined within the range of 0x01 0x0f, values outside the range of 0x01 0x0f are not used. Therefore, the present invention defines the field \u201cType\u201d used for informing the size of erroneous data as a \u201c0x06\u201d. In the case where a base station does not respond to a PPP frame containing the size information of the transmitted erroneous data, a terminal retransmits the PPP frame, for example, every one second. Likewise, even when unnecessary data is received at the terminal, the terminal transmits a PPP control frame to a base station. However, provided that the base station has no function to process the PPP control frame, it responds to a terminal's request with a rejection response \u201c3\u201d being a basic PPP operation.","Returning again to , the PPP layer  transmits at step  the control frame (i.e., a PPP control frame containing the size information of erroneous data) generated to a base station. The PPP frame is mapping-processed with an RLP frame in an RLP layer . The RLP frame is loaded on a physical channel frame in the physical layer  and is then transmitted to the base station. Thereafter, the PPP layer  determines at step  whether the base station responds to the PPP control frame. In the case where the base station responds to the PPP control frame at step , the PPP layer  goes to step . In the case where the base station does not respond to the PPP control frame at step , the PPP layer  returns to step  to wait for a response of the base station. In the case where the PPP layer  does not receive the base station's response within a predetermined answerable time, it retransmits the PPP control frame generated at step , for example, every one second.","In the case where the PPP layer  receives the base station's response to the PPP control frame, it updates a quantity of received data and then displays it on a display of a terminal at step . Basically, the terminal continuously displays its own received data quantity on its own display while receiving a packet service. In this case, the terminal includes erroneous data in total received data under the condition that there is no authorization of the base station. However, in the case where the terminal transmits a request signal for excluding a quantity of the erroneous data from total data used for a user fee to the base station and then receives a response to the request signal from the base station, it subtracts the quantity of erroneous data from the total data and displays the result signal on its own display. As a result, the user can readily recognize the accurate quantity of data actually received at his or her terminal, and a system excludes an excessive fee caused by the erroneous data from a user fee in such a way that more accurate accounting is performed in a packet service.","The aforementioned preferred embodiment related to a PPP frame in error informs a base station of the erroneous PPP frame in such a way that excessive fees caused by the erroneous PPP frame are subtracted from a total user fee. For another preferred embodiment, the present invention describes a method for excluding an excessive fee caused by unnecessary data from a total user fee. For example, the unnecessary data may be data other than data of a port number of a TCP\/UDP layer 's service, or undesired data received after the elapsing of a user's application in a UDP service.",{"@attributes":{"id":"p-0050","num":"0049"},"figref":"FIG. 5"},"With reference to , it is determined at step  whether a PPP layer  receives unnecessary data or not. For example, in case of a terminal driving a mobile IP application only, an IP layer  investigates data received from the PPP layer . Upon receiving the investigation result, the IP layer  transmits the received data to an upper protocol layer when the received data is a UDP data and a port number is . But, unless the received data is the UDP data and the port number of , the IP layer  considers the received data as unnecessary data and informs the PPP layer  of unnecessary data reception. For another example, in the case where the TCP\/UDP layer  is not released from a server after an upper application  (e.g., a VOD service) has been completed and thereby receives data from the server, it considers the data as unnecessary data and informs the PPP layer  of it. In the case where the PPP layer  receives unnecessary data at step , a procedure goes to step . In the case where the PPP layer  does not receive unnecessary data at step , a procedure goes to step  to perform a corresponding function.","If the PPP layer  receives the unnecessary data at step , then the PPP layer  goes to step  to generate a control frame (i.e., a PPP control frame) containing the information of the unnecessary data size (i.e., the frame's size). Herein, the control frame is a PPP frame based on . Meanwhile, the PPP layer  transmits to a base station at step  the control frame (i.e., a PPP control frame containing the size information of unnecessary data) generated. The PPP frame is mapping-processed with an RLP frame in an RLP layer , and the RLP frame is loaded on a physical channel frame in the physical layer  and then transmitted to the base station.","Thereafter, the PPP layer  determines at step  whether the base station responds to the control frame. In the case where the base station responds to the control frame at step , the PPP layer  goes to step . In the case where the base station does not respond to the control frame at step , the PPP layer  returns to step  to wait for a response of the base station. In the case where the PPP layer  does not receive the base station's response within a predetermined answerable time, it retransmits the control frame generated at step , for example, every one second. In the case where the PPP layer  receives the base station's response to the control frame at step , it updates a quantity of received data and then displays it on a display of a terminal at step  As a result, the base station can perform more accurate accounting with the accurate quantity of data received at the terminal.","As apparent from the above description, a user can readily recognize the quantity of accurate data actually received at his or her terminal while using a packet service. Further, a terminal informs a base station of the quantity of erroneous data and the quantity of unnecessary data in such a way that a system performs more accurate accounting action about the user's terminal. In conclusion, the present invention generates a clear user invoice in a packet service of a mobile communication system, and the user pays a usage fee for only the quantity of data actually received at his or her terminal.","Although the preferred embodiments of the present invention have been disclosed for illustrative purposes, those skilled in the art will appreciate that various modifications, additions and substitutions are possible, without departing from the scope and spirit of the invention as disclosed in the accompanying claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The above and other objects, features and other advantages of the present invention will be more clearly understood from the following detailed description taken in conjunction with the accompanying drawings, in which:",{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":["FIG. 3","FIG. 3"]},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 5"}]},"DETDESC":[{},{}]}
