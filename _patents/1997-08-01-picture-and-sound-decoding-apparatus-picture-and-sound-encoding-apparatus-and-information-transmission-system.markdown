---
title: Picture and sound decoding apparatus picture and sound encoding apparatus and information transmission system
abstract: In order to control the coding quantity depending on the processing situation at the terminal when decoding or synthesizing plural pictures or sounds simultaneously, the decoding apparatus of the invention comprises a reception control unit  for receiving the information, a separation unit  for analyzing and separating the received information, a priority decision unit  for determining the priority of processing of the pictures separated in the separation unit , a picture expanding unit  for expanding the pictures according to the determined priority, s picture synthesizing unit  for synthesizing the pictures on the basis of the expanded pictures, a synthesis result accumulating unit  for accumulating the synthesized pictures, a reproduction time control unit  for controlling the time for starting reproduction, and an output unit  for delivering the result of synthesis according to the information of the reproduction time control unit 
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07006575&OS=07006575&RS=07006575
owner: Matsushita Electric Industrial Co., Ltd.
number: 07006575
owner_city: Osaka
owner_country: JP
publication_date: 19970801
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"p":["This application is a U.S. National Phase Application of PCT International Application PCT\/JP97\/02696.","The present invention relates to picture and sound decoding apparatus, picture and sound coding apparatus, and information transmission system for decoding, coding and synthesizing plural pictures and sounds simultaneously.","Hitherto there was a video communication system with a feel of presence by satisfying the sensation of the existence of a person in front of oneself, by extracting, for example, a human figure from the image of the space scene of one's own side, and superposing and displaying this image, and a human image sent from the opposite side, and a virtual space image preliminarily stored for displaying commonly with the opposite side (Japanese Patent Publication No. 4-24914, Hypermedia system personal communication system; Fukuda, K., Tahara, T., Miyoshi, T.: \u201cHypermedia Personal Computer Communication System: Fujitsu Habitat,\u201d FUJITSU Sci. Tech. J., 26, 3, pp. 196\u2013206, October 1990; Nakamura: \u201cDistributed cooperative job support by virtual reality sensation through network,\u201d Audio-Visual Compound Information Processing Research Group, Information Processing Society of Japan, 1993). In the prior art, in particular, in order to synthesize the images, methods about increasing the speed and reducing the memory capacity have been invented (for example, Japanese Patent Publication No. 5-46592, Image synthesizing apparatus; Japanese Laid-open Patent No. 6-105226, Image synthesizing apparatus).","In the prior art, however, image synthesizing systems for synthesizing two-dimensional still pictures and three-dimensional CG data have been proposed, but nothing has been mentioned about a method of realizing a system for synthesizing and displaying by decoding (expanding) plural motion pictures or sounds simultaneously. In particular, in the terminal device for simultaneously decoding, synthesizing and displaying plural pictures and sounds, nothing has been mentioned about the reproducing method of picture and sound not leading to breakdown due to shortage of terminal capacity or fluctuation of processing capacity. In addition, nothing has been discussed about the method of decoding, synthesizing and displaying plural pictures depending on the accounting situation.","More specifically, nothing has been considered about:","(1) method of controlling plural pictures, sound information, information describing the relation of plural pictures and sounds, and information of processing result; and","(2) method about determining method of priority of decoding, synthesizing and displaying of plural pictures and sounds when the terminal processing state is overloaded, and also reproducing and accounting.","Further, in the environments of decoding, synthesizing and displaying plural pictures and sounds simultaneously, nothing has been considered about the method of controlling the quantity of coding by varying the method of compression of image depending on the state at the receiving terminal side or the priority of decoding, synthesizing, and displaying at the receiving terminal.","Considering these problems of the prior art, it is an object of the present invention to present a picture and sound decoding apparatus, a picture and sound coding apparatus, and an information transmission system capable of controlling the quantity of coding depending on the processing situation at the terminal when decoding or synthesizing plural pictures and sounds simultaneously, and capable of controlling decoding, synthesizing and displaying of plural pictures and sounds depending on the accounting situation.","The invention is not limited to synthesis of two-dimensional images alone. It may include an expression format combining two-dimensional image and three-dimensional image, and an image synthesizing method for synthesizing an image by combining plural adjacent images such as panoramic images.","The communication format of the invention is not limited to the wired two-way CATV or B-ISDN alone. For example, it may include radio wave transmission (for example, VHF band, UHF band) or satellite broadcasting for picture and sound from the center side terminal to the household side terminal, and analog telephone circuit or N-ISDN for information transmission from the household side terminal to the center side terminal (picture, sound and data are not always required to be multiplexed). It may further include the communication format making use of wireless means, such as IrDA, PHS (personal handy phone), and radio LAN.","Applicable terminals include portable terminals such as portable information terminals, and desk-top terminals such as set-top box and personal computer.","One aspect of the present invention is a picture decoding and coding apparatus comprising a picture coding apparatus including picture coding means for coding picture information, and transmission control means for transmitting or recording the coded various information, and a picture decoding apparatus including reception control means for receiving the coded various information, picture decoding means for decoding received various information, picture synthesizing means for synthesizing one or more decoded pictures, and output means for delivering the synthesized picture.","Another aspect of the present invention is a sound decoding and coding apparatus comprising a sound coding apparatus including sound coding means for coding sound information, and transmission control means for transmitting or recording the coded various information, and a sound decoding apparatus including reception control means for receiving the coded various information, sound decoding means for decoding received various information, sound synthesizing means for synthesizing one or more decoded sounds, and output means for delivering the synthesized sound.","Still another aspect of the present invention is a realtime picture coding apparatus comprising one or more picture input means for feeding pictures, picture input control means for controlling the control state of the picture input means, other terminal control request control means for controlling the reception state of a reception terminal, coding process decision means for determining the coding method of pictures depending on at least the controlled reception state of the reception terminal or the control state of said picture input means, picture coding means for coding said input picture according to the result of decision by the coding process decision means, and output means for delivering the coded picture.","A further aspect of the present invention is an information transmission system, being an information transmission system using at least one of the picture decoding and coding apparatus and the sound decoding and coding apparatus as the reception terminal, and at least one of the picture decoding and coding apparatus the sound decoding and coding apparatus and the real time picture coding apparatus as the transmission terminal, and connecting these terminals through a communication route, wherein one of the presence or absence of coding of pictures or sounds, priority of coding, coding method, picture size to be coded, value of quantization step, number of frames, and priority of processing when the reception terminal is overloaded is determined at the transmission terminal, by transmitting at least one of the load of the reception terminal, the information about the priority of coded information to be processed as being determined in the priority decision means at the reception terminal, and the frame skip situation at the reception terminal, to the transmission terminal.",{"@attributes":{"id":"p-0034","num":"0000"},"ul":{"@attributes":{"id":"ul0001","list-style":"none"},"li":[{"@attributes":{"id":"ul0001-0001","num":"0033"},"b":"11"},{"@attributes":{"id":"ul0001-0002","num":"0034"},"b":"12"},{"@attributes":{"id":"ul0001-0003","num":"0035"},"b":"13"},{"@attributes":{"id":"ul0001-0004","num":"0036"},"b":"14"},{"@attributes":{"id":"ul0001-0005","num":"0037"},"b":"17"},{"@attributes":{"id":"ul0001-0006","num":"0038"},"b":"18"},{"@attributes":{"id":"ul0001-0007","num":"0039"},"b":"19"},{"@attributes":{"id":"ul0001-0008","num":"0040"},"b":"20"},{"@attributes":{"id":"ul0001-0009","num":"0041"},"b":"21"},{"@attributes":{"id":"ul0001-0010","num":"0042"},"b":"31"},{"@attributes":{"id":"ul0001-0011","num":"0043"},"b":"36"},{"@attributes":{"id":"ul0001-0012","num":"0044"},"b":"37"},{"@attributes":{"id":"ul0001-0013","num":"0045"},"b":"39"},{"@attributes":{"id":"ul0001-0014","num":"0046"},"b":"42"},{"@attributes":{"id":"ul0001-0015","num":"0047"},"b":"1204"},{"@attributes":{"id":"ul0001-0016","num":"0048"},"b":"1205"},{"@attributes":{"id":"ul0001-0017","num":"0049"},"b":"1208"},{"@attributes":{"id":"ul0001-0018","num":"0050"},"b":"1401"},{"@attributes":{"id":"ul0001-0019","num":"0051"},"b":"1402"},{"@attributes":{"id":"ul0001-0020","num":"0052"},"b":"1404"},{"@attributes":{"id":"ul0001-0021","num":"0053"},"b":"1407"}]}},"The invention is described below by referring to drawings showing its preferred embodiments. The term \u201cpicture\u201d used in the invention includes both still picture and motion picture. The applicable pictures may be a mixture of two-dimensional picture such as computer graphics (CG) and three-dimensional picture as composed from a wire-frame model. In such a case, the relation between pictures corresponds to the wire-frame model. The script language for describing may include JAVA, VRML, etc, which language is incorporated herein by reference.",{"@attributes":{"id":"p-0036","num":"0055"},"figref":["FIG. 1","FIG. 2","FIG. 1","FIG. 2"]},"This apparatus shown in  or  is composed of a coding apparatus and a decoding apparatus, and the coding apparatus in  comprises a priority providing unit  for determining the priority of processing of coded picture at the time of overloading, and corresponding between the coded image and the priority, a picture coding unit  for coding the picture, a transmission control unit  for transmitting or recording coded information provided with priority, and a reception control unit  for receiving coded information. The coding apparatus in  further comprises a sound coding unit  for coding the sound.","On the other hand, in the decoding apparatus, a reception control unit  for receiving information and a transmission control unit  for transmitting information are means for transmitting information in coaxial cable, CATV, LAN, modem, etc. Connection formats of terminal include two-way sending and receiving format of video information between terminals such as TV telephone and TV conference system, and broadcasting type (one-way) picture broadcasting format by satellite broadcasting, CATV or Internet. In the invention, such connection formats of terminals are taken into consideration.","A separation unit  is means for analyzing and separating the coded (compressed) reception signal (in the case of compression apparatus, it is a reverse operation, and hence it corresponds to a multiplexing unit). For example, in MPEG1, MPEG2, and H. 320 terminal (regulation of TV telephone and conference apparatus using N-ISDN), the H. 221 is the regulation for multiplexing and separating the video\/audio\/data, and in the H. 324 terminal (regulation of TV telephone and conference apparatus using analog telephone circuit), the H. 223 is the corresponding regulation MPEG 1 and MPEG 2 Standards and the International Telecommunications Union (ITU-T) H.-series standards are all incorporated herein by reference. The invention may be realized either by the constitution conforming to the regulation or by the constitution not conforming to the regulation. Or, as done in the H. 323 or Internet, the picture and sound may be transmitted independently by different streams.","A priority decision unit  determines the priority of decoding (hereinafter referred to as \u201cexpanding\u201d) the information obtained from the separation unit  (for example, picture, sound, control information) when the terminal is overloaded in the following method, and expanding the picture or expanding the sound (in the method of determining the priority of processing, it may be preliminarily decided in the reception terminal device, or the information about the priority determined in the following method may be added to the recording media or transmission packet at the transmission side terminal (coding apparatus), and transmitted and added as recording format; as the method of expressing the priority, the priority may be expressed by non-numerical method such as large, medium and small, or by numerical method such as 1, 2, 3).","Using the identifier for handling data in the stream unit composed of plural picture or sound frames, by processing transmission and reception of data between the transmission side and reception side, control of buffer at the reception side, and scheduling of transmission of data at transmission side may be realized. That is, by noticing the identifier of the stream sent from the transmission side as required, the receiving situation at the reception side may be investigated, or the identifier of the stream not requiring may be noticed to the reception terminal, or the required stream may be demanded from the reception side.","The priority providing means for determining the priority of processing of coded information at the time of overloading by the standard mentioned above, and corresponding between the coded information and the determined priority may be provided in the picture coding apparatus or sound coding apparatus, and according to the priority of various receiving information at the time of overloading, the picture frame or sound of the priority to be processed may be determined by the priority decision means for determining the method of processing, so that coding or synthesizing process may be done. As for the picture frame, it is necessary to insert periodically the frame undergoing intraframe coding (I frame) so that the frame can be skipped.","The unit for providing the priority may be each unit of picture or sound (comparison of priority between frames), or the stream unit composed of plural frames (comparison of priority between streams).","The method of taking note of the feature of image includes the methods on the basis of the image compression format (for example, between H. 263 and run length, the priority is given to the run length), picture size (for example, between CIF and QCIF, the priority is given to the QCIF), contrast (for example, the priority is given to the higher contrast), picture synthesizing ratio (for example, the priority is given to the higher synthesizing ratio), quantization step (for example, the priority is given to the smaller quantization step), difference between inter-frame coding and intra-frame coding (for example, the priority is given to the intra-frame coding), display position (for example, the priority is given to the middle display position; or in the case of three-dimensional picture, the priority is low when the picture is set at inner side, and the priority is set high when displayed at the front side), frame number (the priority is high in first frame and final frame, or the priority is heightened for the frame of scene change, etc.), the number of frames (for example, the priority is higher in the picture smaller in the number of frames to be reproduced; the frame number corresponds to temporary reference (TR) in the case of H. 263, and it may be judged according to the change of TR value), the voiced section and silent section, the display time (PTS), and decoding time (DTS).","In addition, the same priority is given to the P frame and B frame by inter-frame coding. In the intra-frame coded pictures, by assigning priority in plural stages, the skipping frequency can be controlled.","Examples taking note of difference in media include the method of expanding the sound by priority over expanding of picture. As a result, the sound can be reproduced without interruption.","Furthermore, on the basis of the reproduction permit information controlled at the reception side terminal, the information to be expanded (picture, sound) may be determined, or the information to be expanded may be selected on the basis of the reproduction permit information sent from the transmission side as control information. The reproduction permit information specifically includes the accounting information (for example, if not paid duly, processing of expanding, synthesizing or display is not done; the accounting information can be controlled at the reception terminal side, or the accounting information may be controlled at the transmission side), the service content information (for example, in the case of an adult broadcast program, unless reproduction is permitted at the terminal side, processing of expanding, synthesizing or display is not done; the reproduction permit may be controlled at the reception side terminal or at the transmission side terminal), the password (for example, a specific program is not expanded, synthesized or displayed unless the password is entered; the password may be controlled at the reception side terminal or at the transmission side terminal), the user code (for example, unless the user is permitted, processing of expanding, synthesizing or display is not done; the user code may be controlled at the reception side terminal or at the transmission side terminal), and the nation code (for example, the picture and sound to be expanded, synthesized and displayed, and the reproduction method are changed depending on the nation; the nation code may be controlled at the transmission side or at the reception side; scrambling is realized by changing the reproduction method by the nation code).","The reproduction method by limiting the permission of reproduction of picture and sound by the accounting information, service content information, password, or user code includes the method of deviating the position or pixel intentionally when synthesizing and displaying the picture, changing the magnification or contraction of picture or sampling of picture (for example, by low pass), inverting the pixels, changing the contrast, changing the color pallets, and skipping the frames. In these picture reproducing methods (expanding, synthesizing and display pictures), each frame may be restricted. Or, in the unit of GOB (group of block) which is an independent processing unit smaller than one frame, as defined by H. 263 which is one of picture compression techniques, the picture expanding, synthesizing and display method may be restricted, so that more flexible control is realized as compared with the conventional technique of disturbing the entire picture. That is, by processing in the GOB unit, only a part of the picture can be scrambled, and the interactive software such as the software using the image synthesis can be evaluated.","Similarly, sound reproducing methods include the methods of changing the sound level, changing the sound direction, changing the sound frequency, changing the sound sampling, and inserting different picture or sound (in any method, it is divided into the method of processing preliminarily at the transmission side, and the method of processing at the reception side).","The reproducing method of picture and sound includes a method of canceling the synchronism of picture and sound. The priority of picture and sound to be expanded, or the presence or absence may be determined by the information indicating the rank of synthesizing and displaying (the display sequence is preliminarily determined at the reception side terminal, for example, the priority is given to the CIF or still picture, or the display sequence is added preliminarily to the transmission information at the transmission side as the information about priority), the information indicating the rank of expanding (the expanding sequence is preliminarily determined at the reception side terminal, for example, the priority is given to the QCIF or intra-frame coded picture data, or the speech sound is expanded by priority over BGM; similarly, the display sequence is added to the transmission information at the transmission side), the user's instruction (for example, the picture or sound information to be expanded, synthesized or displayed is selected by the user's instruction, or the picture or sound information to be expanded, synthesized or displayed is determined on the basis the information selected according to the request), the terminal processing capacity (for example, by measuring the occupation time of CPU processing in a specific period at the present or in the past, expanding, synthesizing or displaying of the picture or sound supposed to take time is restricted; as the estimating method of processing time, the time required for local decoding when compressing, or the time required for compression is controlled in relation to the compressed picture information, so that the presence or absence of expanding, synthesizing or displaying, or the priority can be determined), the reproduction time (for example, expanding, synthesizing or displaying of the picture or sound information passing the reproduction time is stopped), or the decoding time.","In addition, as the method for preventing specific picture or sound from being expanded or displayed by priority, on the basis of the information relating to the execution rate for processing of expanding, synthesizing or displaying of picture or sound, the sequence or presence or absence of the picture to be expanded, synthesized or displayed can be determined. For example, once out of ten times of expanding, it is set at the reception terminal side that the picture of CIF size is expanded, or by specifying the execution rate of expanding, synthesizing or displaying the picture or sound at the transmission side, the picture information or sound information can be transmitted according to this. The execution rate is specifically defined by the insertion interval of I frame (intra-frame coded frame). As a result, expanding, synthesizing or displaying of specific picture or sound object only is prevented.","Such information about the priority for controlling expanding, synthesizing or displaying may be added not only at the transmission side apparatus, but may be also added and controlled at a relaying apparatus. Moreover, by transmitting the information about the priority determined in the priority decision unit  of the decoding apparatus at the reception terminal, to the transmission destination through the transmission control unit , the picture or sound can be transmitted depending on the situation of determination in the priority decision unit  (by sending the ID of the picture object that is hardly selected to the transmission side, wasteful transmission is prevented). Incidentally, the information showing the priority of processing when the reception terminal is overloaded may be determined at the reception terminal apparatus, or may be transmitted as transmission format, or the transport stream of MPEG2 may be expanded as the format for recording in the recording media such as CD-ROM or hard disk, or the transmission and recording format without consideration of standardization may be also employed. Or, using different streams in individual media (picture, sound, information describing the relation of picture and sound), data may be transmitted and recorded without multiplexing.","The picture expanding unit  as picture decoding means is means for expanding the picture (hereinafter coding means in the case of the coding apparatus), and the picture formats handled in the picture expanding unit  include MPEG1, MPEG2, H. 261, H. 263, and others. The picture may be expanded in the unit of one frame, or it may be processed in the unit of GOB specified in H. 263. When processing in the unit of one frame, in the case of inter-frame coding, the expanded state of the previous frame must be stored in the picture expanding unit . When the picture is expanded in the GOB unit, the sequence relation of expanding the pictures does not matter. Therefore, when expanding in the GOB unit, plural picture expanding units  are not required in the receiving apparatus, and plural pictures can be expanded by one picture expanding unit . To the contrary, the results of expanding must be accumulated.","The sound expanding unit  as the sound decoding means in  is the means for expanding the sound, and the sound format handled in the sound expanding unit  includes G. 721 and G. 723. The method for processing includes the software processing by DSP or general-purpose CPU, and processing by special-purpose hardware.","When realizing by the software, expanding process of picture and sound is individually controlled in the unit of one process or thread, and when there are simultaneously plural pictures or sounds to be expanded, they are processed by dividing the time by the number of processes or threads in the range to be processed.","The picture expanding control unit  is means for controlling the expanded state of picture. The sound expanding control unit  is means for controlling the expanded state of sound. For example, when realizing these control units by the software, the compressed information obtained from the separation unit  is transferred to the picture expanding unit  and sound expanding unit  in the predetermined sequence (for example, executing first in the sound expanding unit  and then executing in the picture expanding unit ), and the expanded state is controlled. When all expanding is over, the expanded information is transferred to the picture synthesizing unit  or sound synthesizing unit . In the software, by using shared memory and semaphore, the transferred information is limited, or end of expanding process is known (detail is described later).","A time information control unit  is means for controlling the information about the time. For example, when realizing the system by a personal computer, the time information can be realized by utilizing the timer of the personal computer.","The picture synthesizing unit  synthesizes a picture on the basis of the expanded image data. When synthesizing plural pictures, the pictures are synthesized on the basis of the synthesis ratio (\u03b1 value) of each picture. For example, when synthesizing two pictures, if the synthesis ratio of the foreground picture is \u03b1, the RGB value of the background picture is mixed at a rate of 1\u2212\u03b1, and the foreground picture, at \u03b1. Incidentally, the picture to be expanded is controlled in the processing in the unit of one frame, and therefore when synthesizing plural pictures by using the display time, the system configuration and mounting can be simplified. Until discarding of the expanding result is instructed from the transmission side in the picture synthesizing unit  or sound synthesizing unit , by holding, controlling and utilizing the expanding result, it is not necessary to send the information of same pattern repeatedly from the transmission side.","On the basis of the information describing the relation of mutual pictures or mutual sounds, when combining the picture or sound, by presenting that the pictures or sounds that cannot be synthesized are present as necessary decoded pictures or sounds are not ready, the user can know the state of synthesis. Accordingly, the user instructs to select the necessary picture quality or select the picture desired to be synthesized beforehand, so that necessary information can be synthesized without dropout. Incidentally, the method of accumulating and controlling the decoded picture and sound data in the buffer includes the methods of erasing from the older data in the sequence of arrival, and erasing by observing the script describing the relation of mutual pictures or mutual sounds, and also observing the state of use of the decoded picture or sound data on the whole.","The sound expanding control unit  controls the expanding state of at least one sound expanding unit  for expanding the sound.","The sound synthesizing unit  is means for synthesizing the sound on the basis of the expanded information, and a synthesized result accumulating unit  is means for accumulating the picture synthesized by the picture synthesizing unit  and the sound synthesized by the sound synthesizing unit .","A reproduction time control unit  is means for reproducing the synthesized picture or sound at the time for starting reproduction.","An output unit  is means for issuing the synthesized result (for example, display and printer), and an input unit  is means for entering information (for example, keyboard, mouse, camera, video). A terminal control unit  is means for controlling these units.",{"@attributes":{"id":"p-0064","num":"0083"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0065","num":"0084"},"figref":["FIG. 3(","FIG. 3"],"i":["a","a"]},{"@attributes":{"id":"p-0066","num":"0085"},"figref":["FIG. 3(","FIG. 3("],"i":["b","a"]},"As the method for describing mutual pictures or mutual sounds, it may be considered to be applicable by descriptive language such as JAVA and VRML, but the specification of descriptive language of the script may not be determined automatically. Accordingly, by adding an identifier for identifying the descriptive method of the information describing the relation between pictures or between sounds (for example, information in terms of position or time, such as display period), it is applicable to plural methods of description. To add the identifier for identifying the information descriptive method, for example, in MPEG2, it is provided in the program map table for controlling the stream of MPEG2-TS, or in the stream describing the script. The priority of processing in overload is added together with the information describing the corresponding relation of picture and sound (control information). In the MPEG2, in order to control by the program map table for relating the video stream and audio stream of MPEG2-TS (transport stream), the structural information and stream for relating between picture and sound may be defined and controlled, so that it can be transmitted independently of the data also in the MPEG2.",{"@attributes":{"id":"p-0068","num":"0087"},"figref":["FIG. 4","FIG. 1","FIG. 2","FIG. 4"]},"A DEMUX thread  reads the information (picture, sound, control information) multiplexed from the network or disk, and separates into a monitor table (detail given below) describing the corresponding relation of sounds, pictures, and sound and picture and the information about reproduction time. The DEMUX thread  corresponds to the separation unit . The information separated by the DEMUX thread  is sent out into a sound ring buffer , a picture ring buffer , and a monitor ring buffer . In the case of sound information, the information sent out into the ring buffer  is expanded in a sound decoding thread  (corresponding to the sound expanding unit ). In the case of picture information, the information sent out to the ring buffer  is expanded in a decoding process .","The monitor table is sent out to the ring buffer , and is utilized in a monitor thread  for determining the sequence for expanding the picture (corresponding to the control terminal unit , picture expanding control unit , and sound expanding control unit  above). The same monitor table is utilized in a picture synthesizing thread  for synthesizing a picture. The monitor table utilized in the monitor thread  reads out the next table from the ring buffer  when expanding of all sound and pictures is over. The picture information expanded in the decoding process  (corresponding to the picture expanding unit ) is sent out to a picture single buffer . When the transmitted pictures are all ready, the picture is synthesized by using the ratio of the image synthesis controlled in the monitor table, by a picture synthesis thread  (corresponding to the picture synthesizing unit ). The result of synthesis is accumulated in a synthesis buffer  (corresponding to the synthesis result accumulation unit ), thereby waiting in display wait state until reaching the display time in a display monitor thread  (corresponding to the reproduction time control unit ).",{"@attributes":{"id":"p-0071","num":"0090"},"figref":["FIG. 5","FIG. 4","FIG. 5"],"b":"31"},"The composition of monitor table is composed of picture display time, number of pictures to be displayed (synthesized) in one frame, ID of each picture, frame number, priority for expanding or displaying, identifier showing the frame type (I picture, P picture, B picture), display horizontal position, display vertical position, and each information of layer showing the ratio of synthesis (E). Incidentally, the synthesis ratio of picture and synthesis ratio of sound may be changed by correspondence. For example, when two pictures correspond to two sounds respectively, if the picture synthesis ratio is \u03b1:1\u2212\u03b1, the corresponding sound synthesis ratio may be also \u03b1:1\u2212\u03b1. Not limited to the relation between pictures, the relation between sounds may be also described (for example, direction, kind such as BGM or speech sound).",{"@attributes":{"id":"p-0073","num":"0092"},"figref":"FIG. 6","b":["5","1","5","2","5","3","5","4","5","5"]},{"@attributes":{"id":"p-0074","num":"0093"},"figref":"FIG. 7","b":["6","1","6","2","6","3","6","4","6","5","6","6","6","7","6","8"]},{"@attributes":{"id":"p-0075","num":"0094"},"figref":"FIG. 8","b":["7","1","7","2","7","3","7","4","7","5","7","6","7","7"]},"When expanding different types of picture objects by using the same process (or the same thread, or processor in the case of hardware), by controlling in correspondence between the frame number of the picture expanded in the past and the image before being expanded in the decoding process, it is not necessary to generate and utilize multiple processes simultaneously (at least, only the information relating to the immediately preceding frame is enough; if there are different types of frame pictures such as I, P, B, the control sequence and output sequence are different, and therefore such control in the decoding process is needed).",{"@attributes":{"id":"p-0077","num":"0096"},"figref":"FIG. 9","b":["8","1","8","2","8","3","8","4","8","5"]},{"@attributes":{"id":"p-0078","num":"0097"},"figref":"FIG. 10","b":["9","1","9","2","9","3"]},"Referring now to , the user interface of the picture synthesizing apparatus of the invention is described below.","In the example in , the foreground picture is combined with the background picture, and the building located at a remote position is synthesized as a translucent image at the synthesizing ratio of 0.5. As shown in , the picture to be used is not required to be two-dimensional picture. The helicopter and balloon shown in the foreground as three-dimensional image are synthesized with the background in two-dimensional image. The helicopter and balloon in the foreground are not always required to be three-dimensional images. The picture may be expressed as two-dimensional image when located at a remote position (which may be defined in the size displayed in two dimensions on the screen; for example, if smaller than the size of 20 dots\u00d720 dots, the object may be defined to be located at a remote position), and as three-dimensional image when located at a near position. The picture to be mapped in the wire-frame model of three-dimensional image is not limited to still picture, but may be also a motion picture. Concerning the picture quality, by setting the picture quality high in the central portion and lower in peripheral parts, the necessary information demanded by the user can be selectively transmitted by priority (by changing the picture quality depending on the picture synthesizing position in this way, it is expected to enhance the response). Besides, in the case of three-dimensional picture, the priority may be set low in the picture displayed remotely and the priority may be set high in the image displayed closely. The control of picture quality can be realized by changing the quantization step.",{"@attributes":{"id":"p-0081","num":"0100"},"figref":"FIG. 12"},"On the other hand, when realizing picture compression and expansion by the hardware, the number of pictures to be compressed and expanded at the terminal is fixed. However, when realizing the picture compression and expansion by the software, the number of pictures to be compressed and expanded at the terminal can be dynamically varied. When compressing or expanding the picture in the multitask environments by the software, effects are large by the picture size, the quantization parameter for compressing the picture, and the object picture (whether intra-frame coding or inter-frame coding, content of the taken picture), and others, and the picture size to be processed (compressed, expanded) at the terminal and the number of pictures to be processed simultaneously vary with the time. Accordingly, at the transmission side terminal, unless sequentially determining the picture compression method (method of picture compression, presence or absence of picture compression, quantization step, priority of compression, picture size to be compressed, etc.) depending on the reception situation of reception side terminal (for example, capacity of reception buffer, priority of reproduction of picture, response time of reception confirmation), and determination of priority when the reception terminal is overloaded, it may exceed the capacity of the reception side, finally leading to breakdown.","For example, as shown in ), if the capacity of the reception buffer of the reception side terminal exceeds 80%, the nearly overflow state of the reception buffer is noticed to the transmission side, and the measure is executed by properly selecting and combining the method of picture compression (for example, changing from MPEG1 to run length, transmission quantity of compressed picture is decreased), the method of limiting the transmission quantity by presence or absence of compressed picture (compressing the picture, and stopping transmission temporarily), change of priority of compression (if there are plural processes to be compressed, the priority for compressing is lowered, and the transmission quantity of picture to be compressed is decreased), change of picture size (changing the compression size from CIF to smaller QCIF, the transmission quantity of compressed picture is decreased), or change of quantization step (decreasing the transmission quantity of compressed picture by changing the picture quality), the method of adjusting the number of frames (decreasing the number of frames to be processed), and the method of determining the priority when the reception terminal is overloaded. As a result, overflow of the reception buffer at the reception side terminal is avoided.","Similarly, when the capacity of the reception buffer at the reception side is under 20%, the nearly underflow state of the reception buffer at the reception side terminal is noticed to the transmission side, and in the reverse manner of the above, at the transmission side terminal, the method of picture compression, presence or absence of picture compression, priority of picture compression, picture size, quantization step, and number of frames are properly selected and combined, and executed. By thus executing the method of increasing the transmission quantity, the underflow of the reception buffer at the reception side terminal can be avoided.","Aside from monitoring of the state of the reception buffer, if the reproduction capacity at the reception side terminal is limited and there are plural pictures to be reproduced, it is necessary to determine definitely the pictures to be reproduced by priority by the user at the reception side terminal, or determine automatically all pictures to be reproduced by priority at the terminal side (the pictures to be reproduced by priority must be registered by the user preliminarily in the reception terminal as the rule; for example, the priority may be given to the picture of smaller size, or the reproduction interval is low in the pictures displayed in the background). It may be easily realized by noticing the load of the reception side terminal (for example, the occupation time of CPU necessary for reproduction) to the transmission side terminal.","When the reproduction load of the reception side terminal exceeds 80% of the processing capacity of the terminal, it is noticed to the transmission side that the reception side terminal is overloaded, and receiving this notice, at the transmission side, in order to lower the lower to be processed at the reception side terminal in the same manner as above, the processing capacity at the reception side terminal is alleviated by properly selecting, combining and executing the method of picture compression (for example, changing from MPEG1 to run length, processing amount is decreased), the method by presence or absence of compressed picture (compressing the picture, and stopping transmission temporarily), change of priority of compression (the priority for compressing is lowered for the picture lower in importance, and picture of higher importance is compressed and sent out by priority), change of picture size (changing the compression size from CIF to smaller QCIF, the reproduction side load is decreased), or change of quantization step (decreasing the transmission quantity of compressed picture by changing the picture quality), the method of adjusting the number of frames, and the method of processing according to the priority in overloaded processing.","To the contrary, when the load is under 20% of the processing capacity of the reception side terminal, it is known there is an allowance in the processing capacity at the reception side terminal, and in the reverse manner of the above, at the transmission side terminal, the method of picture compression, presence or absence of picture compression, priority of picture compression, picture size, quantization step, and number of frames are properly selected and combined, and executed, so that the picture of high quality and short frame intervals is sent out to the reception side terminal. As a result, picture transmission making the use of the capacity of the reception side terminal is realized.","Finally, the processing situation of the reception side terminal is known from the response time of confirmation of reception from the picture synthesizing apparatus at the reception side. For example, when video data is sent out from the transmission side terminal to the reception side terminal, the reception side terminal replies the reception of video data or completion of decoding process, synthesizing or display process to the transmission side terminal, and supposing this response time to be, for example, within 1 second as an ordinary value, if the load increases at the reception side terminal, the response time is extended to, say, 5 seconds (the ordinary value may be once measured when connecting the terminals, or may be measured periodically during communication, or it may be instructed by the user; the response time may be measured periodically, or the measuring interval may be varied in relation to the terminal load or the previous result of response time). By the change of this response time, the above method of picture compression, presence or absence of picture compression, priority of picture compression, picture size, and quantization step may be properly selected, combined and executed, so that the load at the reception terminal may be decreased, thereby shortening the response time (see case  in ). The same processing may be done by receiving the reproduction time or decoding time at the reception terminal.","As the method in consideration of the terminal state of the reception side, the methods of measuring the capacity of reception buffer at the reception side terminal, load of reception side terminal, and response time of reception side terminal mentioned above may not be employed alone, but may be properly selected and combined (the same method can be applied to the sound). Moreover, by transmitting the information about the picture and sound processed on the basis of the priority information at the reception side terminal (in the presence of plural picture streams or sound streams, the information showing which stream is the picture or sound stream actually processed at the reception side terminal, or how many seconds is the duration of the reproduced image stream) to the transmission destination through communication route, the video data transmission from the transmission side to the reception side terminal is prevented from exceeding the processing capacity at the reception terminal (see case  in ; by knowing the actually processed video data, the information quantity such as quantization parameter and picture size at the transmission side can be known; in this example, the processing is fed back in the unit of frame, but in the case of H. 263, as mentioned above, it may be the picture unit handled independently such as GOB). The same method is applied to the sound.",{"@attributes":{"id":"p-0090","num":"0109"},"figref":["FIG. 13","FIG. 13","FIG. 13"],"b":["1207","1207","1201","1202","1207","1203","1204","1205","1206","1207","1208"]},"The method of picture compression may include both standardized methods such as JPEG, MPEG1\/2, H. 261, H. 263, and non-standardized methods such as wavelet and fractal. The picture input means  may be camera, or recording device such as video or optical disk.","As the method of using this picture compression apparatus, in the case the picture input means  is a camera, when the camera at the transmission side terminal is operated by the reception side terminal, or the camera is operated at the transmission side, the picture quality changes substantially, and the transmission coding quantity fluctuates. For example, when the camera contrast is raised, the picture is easier to see, but the transmission coding quantity increases. Accordingly, to decrease the coding quantity while the contrast is enhanced as mentioned above, the coding quantity can be suppressed by properly selecting, combining and executing the method of picture compression, presence or absence of picture compression, priority of picture compression, picture size, quantization step, and the number of steps.","Herein, the camera operation includes the came moving direction (pan, tilt, zoom), contrast, focus, and camera position (for example, the camera is directed downward when taking a drawing, and horizontal when taking a human figure). As the method of changing the method of picture compression, when the camera is directed downward, it is judged that document image is being taken, and the picture is transmitted in run length, and when the camera is in horizontal direction, it is judged that the human face is taken, the picture is taken and transmitted by H. 261. As a result, transmission of unnecessary information can be reduced.","When plural cameras are used and pictures obtained from plural cameras are transmitted, if the communication capacity is limited, the picture quality and number of frames of the image from the camera being noticed by the user may be increased, while the picture quality and number of frames of the image from other cameras may be decreased. By operating the picture quality and number of frames of the image obtained from the camera being noticed, the quantity of information increases, and it is necessary to adjust the quantity of generated information by limiting the picture obtained from other cameras accordingly. As the method of adjusting the quantity of generated information, the picture size, the quantization step, or the number of frames may be adjusted. An example of creating a panoramic picture by using plural cameras is described later in .",{"@attributes":{"id":"p-0095","num":"0114"},"figref":["FIG. 14","FIG. 14"],"b":"1204"},{"@attributes":{"id":"p-0096","num":"0115"},"figref":["FIG. 15","FIG. 15"],"b":["1407","1408","1408","1408"]},"The picture compression apparatus shown in  comprises an input unit  having plural (N) cameras, a priority decision control unit  for providing the pictures obtained in the input unit  with the priority, an operation history control unit  for controlling the operation history of the cameras instructed and manipulated by the user (in order to notice in particular), a picture quality control unit  for controlling the picture quality of the image, a picture synthesis unit  for synthesizing the pictures obtained from the cameras according to the priority (not synthesizing pictures of low priority), an output unit  for delivering the result of synthesis, and a compression control unit  for controlling these parts. The output unit  is connected to the reception terminal  through communication route.","The output destination of the output unit  may be either recording device or communication route. Synthesis of pictures may not be always done at the transmission side terminal. The pictures provided with the priority may be sent to the reception side terminal through the communication route, and synthesized at the reception terminal side. When the plural obtained pictures are synthesized at the transmission side terminal and reproduced at the reception side terminal, the obtained pictures are synthesized at the transmission side in the sequence of priority necessary (for display) at the reception terminal, and the synthesized picture is transmitted to the reception terminal device through the transmission route.","As the method of assigning the priority, the higher priority or higher picture quality (for example, greater number of frames or higher resolution) may be assigned in the sequence of the picture obtained by the camera instructed by the user, or the picture obtained from the camera most often instructed in the past (the picture of high priority may not be always set at high picture quality). As a result, the picture of the higher degree of notice by the user is displayed at high picture quality by priority. Depending on the priority assigned to the picture, the picture transmission from the transmission side terminal may be controlled, or by controlling the expanding or displaying of the picture at the reception side terminal, the response of the terminal at the user can be assured.","Besides, sequentially from the picture higher in priority, higher in picture quality, or greater in the number of frames, the priority and picture quality are lowered in steps with respect to the adjacent joined picture (the priority may be controlled at the transmission side terminal, or reception side terminal). The method of determining the priority may not be always based on the operation history of cameras. As mentioned above, the priority may be determined on the basis of the local decoding time required for compression, or the execution rate for specifying the number of times of execution of processing may be defined in the peripheral pictures, sequentially from the picture higher in priority, higher in picture quality, or greater in the number of frames. As for the sound, by providing the plural cameras with microphones individually, and controlling the presence or absence of compression of sound, only the sound corresponding to the picture in the direction noticed by the user can be synthesized.","Further, as mentioned above, by referring to the response time between the transmission side terminal and reception side terminal, the quantization step or number of frames may be determined. By transmitting the information about the picture processed on the basis of the priority information when the reception side terminal is overloaded to the transmission destination through the communication route, the picture data transmission from the transmission side to the reception side terminal is prevented from exceeding the processing capacity of the reception terminal. Also by transmitting the frame skip state at the reception terminal to the transmission side, the data quantity can be adjusted depending on the state.","Moreover, by transmitting the picture by the transmission method accompanied by retransmission, and transmitting the sound by the transmission method not accompanied by retransmission, it is constituted so that the reception side terminal transmits any information out of the retransmission count of picture, error rate of received sound, and information about discarding rate, to the transmission side terminal. Thus, as the transmission side terminal, by determining any one of the picture compression method, the quantization step, number of frames, size of picture to be compressed, and presence or absence of picture compression, it is possible to control to minimize delay of sound transmission without disturbing the picture. For example, in the communication using the TCP\/IP, the picture transmission is realized by the TCP, and the sound transmission by UDP (the picture and sound may be transmitted physically in the same transmission route or not). The communication method is not limited to the TCP\/IP alone. In this method, when transmitting plural pictures or sounds simultaneously, the discarding rate or error rate may be defined in each sound, and plural picture compression methods or transmission methods may be controlled.","Lastly, in the case of picture transmission at low bit rate by using analog telephone circuit or large fluctuation of picture data, usually, a large block noise occurs in the picture. In such a case, it is hard to maintain the picture quality by the compression process alone. Accordingly, by using a filter which passes only low frequency signal (for example, low pass filter by picture processing, or physical polarizing filter) in the monitor at the picture output side, although the picture seems less sharp, the picture free from noise or objectionable pattern is obtained.","As clear from the description herein, when decoding or synthesizing plural pictures or sounds simultaneously, it is advantageous that the processing quantity can be controlled on the basis of the priority depending on the load situation at the terminal.","The invention is also beneficial that plural pictures or sounds can be synthesized depending on the accounting situation."],"heading":["TECHNICAL FIELD","BACKGROUND ART","DISCLOSURE OF THE INVENTION","REFERENCE NUMERALS","MODE FOR CARRYING OUT THE INVENTION","INDUSTRIAL APPLICABILITY"],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 16"}]},"DETDESC":[{},{}]}
