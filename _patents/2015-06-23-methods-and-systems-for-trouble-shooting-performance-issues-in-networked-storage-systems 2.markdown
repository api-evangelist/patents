---
title: Methods and systems for trouble shooting performance issues in networked storage systems
abstract: Methods and systems for managing resources in a storage system are provided. The methods include tracking performance of a plurality of resources used for reading and writing information at storage devices in a networked storage system, each resource represented by a logical object in a hierarchical structure and performance data associated with each logical object is maintained by a processor executing a management application out of a memory device; identifying a root object associated with a resource having a performance issue as indicated by a threshold violation for the resource; selecting a related object associated with a resource similar to the resource of the root object by the management application for comparing performance data of the root object with the related object; and using the comparison to verify that the root object is a root cause of the performance issue.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09542115&OS=09542115&RS=09542115
owner: NETAPP, INC.
number: 09542115
owner_city: Sunnyvale
owner_country: US
publication_date: 20150623
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["COPYRIGHT NOTICE","TECHNICAL FIELD","BACKGROUND","SUMMARY","DETAILED DESCRIPTION"],"p":["A portion of the disclosure herein contains material to which a claim for copyrights is made. The copyright owner, the assignee of this patent application, does not have any objection to the facsimile reproduction of any patent document as it appears in the USPTO patent files or records, but reserves all other copyrights.","The present disclosure relates to trouble shooting performance issues in a networked storage system.","Various forms of storage systems are used today. These forms include direct attached storage (DAS) network attached storage (NAS) systems, storage area networks (SANs), and others. Network storage systems are commonly used for a variety of purposes, such as providing multiple clients with access to shared data, backing up data and others.","A storage system typically includes at least a computing system executing a storage operating system for storing and retrieving data on behalf of one or more client computing systems (may just be referred to as \u201cclient\u201d or \u201cclients\u201d). The storage operating system stores and manages shared data containers in a set of mass storage devices.","Quality of Service (QOS) is a metric used in a storage environment to provide certain throughput for processing input\/output (I\/O) requests, a response time goal within, which I\/O requests are processed and a number of I\/O requests processed within a given time (for example, in a second (IOPS). Throughput means an amount of data transferred within a given time in response to the I\/O requests, for example, in megabytes per second (Mb\/s).","To process an I\/O request to read and\/or write data, various resources are used within a storage system, for example, network resources, processors, storage devices and others. The different resources perform various functions in processing the I\/O requests.","As storage systems continue to expand in size, complexity and operating speeds, it is desirable to efficiently monitor resource usage, identify performance issues, determine the root cause of the performance issues and provide appropriate remediation options. Continuous efforts are being made to better manage networked storage environments.","In one aspect, a machine implemented method is provided. The method includes tracking performance of a plurality of resources used for reading and writing information at storage devices in a networked storage system, each resource represented by a logical object in a hierarchical structure and performance data associated with each logical object is maintained by a processor executing a management application out of a memory device; identifying a root object associated with a resource having a performance issue as indicated by a threshold violation for the resource; selecting a related object associated with a resource similar to the resource of the root object by the management application for comparing performance data of the root object with the related object; and using the comparison to verify that the root object is a root cause of the performance issue.","In another aspect, a non-transitory, machine readable storage medium having stored thereon instructions for performing a method, comprising machine executable code which when executed by at least one machine, causes the machine to: track performance of a plurality of resources used for reading and writing information at storage devices in a networked storage system, each resource represented by a logical object in a hierarchical structure and performance data associated with each logical object is maintained by a processor executing a management application out of a memory device; identify a root object associated with a resource having a performance issue as indicated by a threshold violation for the resource; select a related object associated with a resource similar to the resource of the root object by the management application for comparing performance data of the root object with the related object; and use the comparison to verify that the root object is a root cause of the performance issue.","In yet another aspect, a system having a memory with machine readable medium comprising machine executable code having stored thereon instructions is provided. A processor module coupled to the memory executes the machine executable code to: track performance of a plurality of resources used for reading and writing information at storage devices in a networked storage system, each resource represented by a logical object in a hierarchical structure and performance data associated with each logical object is maintained by a processor executing a management application out of a memory device; identify a root object associated with a resource having a performance issue as indicated by a threshold violation for the resource; select a related object associated with a resource similar to the resource of the root object by the management application for comparing performance data of the root object with the related object; and use the comparison to verify that the root object is a root cause of the performance issue.","This brief summary has been provided so that the nature of this disclosure may be understood quickly. A more complete understanding of the disclosure can be obtained by reference to the following detailed description of the various thereof in connection with the attached drawings.","As a preliminary note, the terms \u201ccomponent\u201d, \u201cmodule\u201d, \u201csystem,\u201d and the like as used herein are intended to refer to a computer-related entity, either software-executing general purpose processor, hardware, firmware and a combination thereof. For example, a component may be, but is not limited to being, a process running on a hardware processor, a hardware based processor, an object, an executable, a thread of execution, a program, and\/or a computer.","By way of illustration, both an application running on a server and the server can be a component. One or more components may reside within a process and\/or thread of execution, and a component may be localized on one computer and\/or distributed between two or more computers. Also, these components can execute from various computer readable media having various data structures stored thereon. The components may communicate via local and\/or remote processes such as in accordance with a signal having one or more data packets (e.g., data from one component interacting with another component in a local system, distributed system, and\/or across a network such as the Internet with other systems via the signal).","Computer executable components can be stored, for example, at non-transitory, computer readable media including, but not limited to, an ASIC (application specific integrated circuit), CD (compact disc), DVD (digital video disk), ROM (read only memory), floppy disk, hard disk, EEPROM (electrically erasable programmable read only memory), memory stick or any other storage device, in accordance with the claimed subject matter.","In one aspect, a performance manager module is provided that interfaces with a storage operating system to collect quality of service (QOS) data (or performance data) for various resources. QOS provides a certain throughput (i.e. amount of data that is transferred within a given time interval (for example, megabytes per seconds (MBS)), latency and\/or a number of input\/output operations that can be processed within a time interval, for example, in a second (referred to as IOPS). Latency means a delay in completing the processing of an I\/O request and may be measured using different metrics for example, a response time in processing I\/O requests.","As mentioned above, storage systems use various resources to process I\/O requests for writing and reading data to and from storage devices. The storage system maintains various counters and data measurement objects (QOS data) for providing QOS to clients. The QOS data may include throughput data, a number of IOPS in a measurement period, and an average response time within the measurement period, a service time per visit to a resource, a wait time per visit to the resource and a number of visits at the resource used for processing I\/O requests.","The performance manager uses historical QOS data obtained from the storage system to predict an expected range (or threshold value) for future QOS data. Future actual QOS data may be compared with the expected range to detect abnormal behavior. The abnormal behavior may be declared as an incident.","In one aspect of the present disclosure, methods and systems for managing resources in a storage system are provided. The methods include tracking performance of a plurality of resources used for reading and writing information at storage devices in a networked storage system, each resource represented by a logical object in a hierarchical structure and performance data associated with each logical object is maintained by a processor executing a management application (or performance manager) out of a memory device; identifying a root object associated with a resource having a performance issue as indicated by a threshold violation for the resource; selecting a related object associated with a resource similar to the resource of the root object via a graphical user interface (GUI) presented by the management application for comparing performance data of the root object with the related object; and using the comparison to verify that the root object is a root cause of the performance issue.","System :",{"@attributes":{"id":"p-0039","num":"0038"},"figref":"FIG. 1","b":["100","100","121","107","108","121"]},"The performance manager  obtains the QOS data and stores it at a local data structure . In one aspect, performance manager  analyzes the QOS data for detecting performance issues (that may be referred to as incidents) and identifying resources and storage volumes affected by performance issues. Details regarding the various operations performed by the performance manager  are provided below.","In one aspect, storage system  has access to a set of mass storage devices A-N (may be referred to as storage devices  or simply as storage device ) within at least one storage subsystem . The storage devices  may include writable storage device media such as magnetic disks, video tape, optical, DVD, magnetic tape, non-volatile memory devices for example, solid state drives (SSDs) including self-encrypting drives, flash memory devices and any other similar media adapted to store information. The storage devices  may be organized as one or more groups of Redundant Array of Independent (or Inexpensive) Disks (RAID). The aspects disclosed are not limited to any particular storage device type or storage device configuration.","In one aspect, the storage system  provides a set of logical storage volumes (may be interchangeably referred to as volume or storage volume) for providing physical storage space to clients A-N (or virtual machines (VMs) A-N). A storage volume is a logical storage object and typically includes a file system in a NAS environment or a logical unit number (LUN) in a SAN environment. The various aspects described herein are not limited to any specific format in which physical storage is presented as logical storage (volume, LUNs and others)","Each storage volume may be configured to store data files (or data containers or data objects), scripts, word processing documents, executable programs, and any other type of structured or unstructured data. From the perspective of one of the client systems, each storage volume can appear to be a single drive. However, each storage volume can represent storage space in at one storage device, an aggregate of some or all of the storage space in multiple storage devices, a RAID group, or any other suitable set of storage space.","A storage volume is identified by a unique identifier (Volume-ID) and is allocated certain storage space during a configuration process. When the storage volume is created, a QOS policy may be associated with the storage volume such that requests associated with the storage volume can be managed appropriately. The QOS policy may be a part of a QOS policy group (referred to as \u201cPolicy_Group\u201d) that is used to manage QOS for several different storage volumes as a single unit. The QOS policy information may be stored at a QOS data structure  maintained by a QOS module . QOS at the storage system level may be implemented by the QOS module . QOS module  maintains various QOS data types that are monitored and analyzed by the performance manager , as described below in detail.","The storage operating system  organizes physical storage space at storage devices  as one or more \u201caggregate\u201d, where each aggregate is a logical grouping of physical storage identified by a unique identifier and a location. The aggregate includes a certain amount of storage space that can be expanded. Within each aggregate, one or more storage volumes are created whose size can be varied. A qtree, sub-volume unit may also be created within the storage volumes. For QOS management, each aggregate and the storage devices within the aggregates are considered as resources that are used by storage volumes.","The storage system  may be used to store and manage information at storage devices  based on an I\/O request. The request may be based on file-based access protocols, for example, the Common Internet File System (CIFS) protocol or Network File System (NFS) protocol, over the Transmission Control Protocol\/Internet Protocol (TCP\/IP). Alternatively, the request may use block-based access protocols, for example, the Small Computer Systems Interface (SCSI) protocol encapsulated over TCP (iSCSI) and SCSI encapsulated over Fibre Channel (FCP).","In a typical mode of operation, a client (or a VM) transmits one or more I\/O request, such as a CFS or NFS read or write request, over a connection system  to the storage system . Storage operating system  receives the request, issues one or more I\/O commands to storage devices  to read or write the data on behalf of the client system, and issues a CIFS or NFS response containing the requested data over the network  to the respective client system.","System  may also include a virtual machine environment where a physical resource is time-shared among a plurality of independently operating processor executable VMs. Each VM may function as a self-contained platform, running its own operating system (OS) and computer executable, application software. The computer executable instructions running in a VM may be collectively referred to herein as \u201cguest software.\u201d In addition, resources available within the VM may be referred to herein as \u201cguest resources.\u201d","The guest software expects to operate as if it were running on a dedicated computer rather than in a VM. That is, the guest software expects to control various events and have access to hardware resources on a physical computing system (may also be referred to as a host platform or host system) which maybe referred to herein as \u201chost hardware resources\u201d. The host hardware resource may include one or more processors, resources resident on the processors (e.g., control registers, caches and others), memory (instructions residing in memory, e.g., descriptor tables), and other resources (e.g., input\/output devices, host attached storage, network attached storage or other like storage) that reside in a physical machine or are coupled to the host system.","In one aspect, system  may include a plurality of computing systems A-N (may also be referred to individually as host platform\/system  or simply as server ) communicably coupled to the storage system  executing via the connection system  such as a local area network (LAN), wide area network (WAN), the Internet or any other interconnect type. As described herein, the term \u201ccommunicably coupled\u201d may refer to a direct connection, a network connection, a wireless connection or other connections to enable communication between devices.","Host system A includes a processor executable virtual machine environment having a plurality of VMs A-N that may be presented to client computing devices\/systems A-N. VMs A-N execute a plurality of guest OS A-N (may also be referred to as guest OS ) that share hardware resources . As described above, hardware resources  may include processors, memory, I\/O devices, storage or any other hardware resource.","In one aspect, host system  interfaces with a virtual machine monitor (VMM) , for example, a processor executed Hyper-V layer provided by Microsoft Corporation of Redmond, Wash., a hypervisor layer provided by VMWare Inc., or any other type. VMM  presents and manages the plurality of guest OS A-N executed by the host system . The VMM  may include or interface with a virtualization layer (VIL)  that provides one or more virtualized hardware resource to each OS A-N.","In one aspect, VMM  is executed by host system  with VMs A-N. In another aspect, VMM  may be executed by an independent stand-alone computing system, often referred to as a hypervisor server or VMM server and VMs A-N are presented at one or more computing systems.","It is noteworthy that different vendors provide different virtualization environments, for example, VMware Corporation, Microsoft Corporation and others. The generic virtualization environment described above with respect to  may be customized to implement the aspects of the present disclosure. Furthermore, VMM  (or VIL ) may execute other modules, for example, a storage driver, network interface and others, the details of which are not germane to the aspects described herein and hence have not been described in detail.","System  may also include a management console  that executes a processor executable management application  for managing and configuring various elements of system . Application  may be used to manage and configure VMs and clients as well as configure resources that are used by VMs\/clients, according to one aspect. It is noteworthy that although a single management console  is shown in , system  may include other management consoles performing certain functions, for example, managing storage systems, managing network connections and other functions described below.","In one aspect, application  may be used to present storage space that is managed by storage system  to clients' A-N (or VMs). The clients may be grouped into different service levels, where a client with a higher service level may be provided with more storage space than a client with a lower service level. A client at a higher level may also be provided with a certain QOS vis-\u00e0-vis a client at a lower level.","Although storage system  is shown as a stand-alone system, i.e. a non-cluster based system, in another aspect, storage system  may have a distributed architecture; for example, a cluster based system of . Before describing the various aspects of the performance manager , the following provides a description of a cluster based storage system.","Clustered Storage System:",{"@attributes":{"id":"p-0059","num":"0058"},"figref":["FIG. 2A","FIG. 1"],"b":["200","200","204","1","204","116","116","202","121","118","206","204","1","204","202"]},"The clustered storage system  includes a plurality of nodes .-., a cluster switching fabric , and a plurality of mass storage devices .-. (may be referred to as  and similar to storage device ).","Each of the plurality of nodes .-. is configured to include a network module (maybe referred to as N-module), a storage module (maybe referred to as D-module), and a management module (maybe referred to as M-Module), each of which can be implemented as a processor executable module. Specifically, node . includes a network module ., a storage module ., and a management module ., node . includes a network module ., a storage module ., and a management module ., and node . includes a network module ., a storage module ., and a management module ..","The network modules .-. include functionality that enable the respective nodes .-. to connect to one or more of the client systems .-.N over the computer network , while the storage modules .-. connect to one or more of the storage devices .-.. Accordingly, each of the plurality of nodes .-. in the clustered storage server arrangement provides the functionality of a storage server.","The management modules .-. provide management functions for the clustered storage system . The management modules .-. collect storage information regarding storage devices .","Each node may execute or interface with a QOS module, shown as .-. that is similar to the QOS module . The QOS module  may be executed for each node or a single QOS module may be used for the entire cluster. The aspects disclosed herein are not limited to the number of instances of QOS module  that may be used in a cluster. Details regarding QOS module  are provided below.","A switched virtualization layer including a plurality of virtual interfaces (VIFs)  is provided to interface between the respective network modules .-. and the client systems .-.N, allowing storage .-. associated with the nodes .-. to be presented to the client systems .-.N as a single shared storage pool.","The clustered storage system  can be organized into any suitable number of virtual servers (also referred to as \u201cvservers\u201d or storage virtual machines (SVM)), in which each SVM represents a single storage system namespace with separate network access. Each SVM has a client domain and a security domain that are separate from the client and security domains of other SVMs. Moreover, each SVM is associated with one or more VIFs and can span one or more physical nodes, each of which can hold one or more VIFs and storage associated with one or more SVMs. Client systems can access the data on a SVM from any node of the clustered system, through the VIFs associated with that SVM. It is noteworthy that the aspects described herein are not limited to the use of SVMs.","Each of the nodes .-. is defined as a computing system to provide application services to one or more of the client systems .-.N. The nodes .-. are interconnected by the switching fabric , which, for example, may be embodied as a Gigabit Ethernet switch or any other type of switching\/connecting device.","Although  depicts an equal number (i.e., ) of the network modules .-., the storage modules .-., and the management modules .-., any other suitable number of network modules, storage modules, and management modules may be provided. There may also be different numbers of network modules, storage modules, and\/or management modules within the clustered storage system . For example, in alternative aspects, the clustered storage system  may include a plurality of network modules and a plurality of storage modules interconnected in a configuration that does not reflect a one-to-one correspondence between the network modules and storage modules.","Each client system .-.N may request the services of one of the respective nodes ., ., ., and that node may return the results of the services requested by the client system by exchanging packets over the computer network , which may be wire-based, optical fiber, wireless, or any other suitable combination thereof.","Performance manager  interfaces with the various nodes and obtains QOS data for QOS data structure . Details regarding the various modules of performance manager are now described with respect to .","Performance Manager :",{"@attributes":{"id":"p-0072","num":"0071"},"figref":["FIG. 2B","FIG. 2F"],"b":["200","121","211","121","202","121"]},"Performance manager  collects a certain minimal amount of data (for example, QOS data for 3 hours or 30 data samples) of workload activity. After collecting the minimal QOS data, performance manager  generates an expected range (or threshold values) for future QOS data.","The expected range is a range of measured performance activity (or QOS data) of a workload over a period of time. For example, a given twenty-four hour period may be split into multiple time intervals. The expected range may be generated for each time interval. The expected range sets a baseline for what may be perceived to be typical activity for the workload. The upper boundary of the expected range establishes a dynamic performance threshold that changes over time. For example, during 9.00 AM and 5.00 PM most employees of a business check their email between 9.00 AM-10.30 AM. The increased demand on email servers means an increase in the workload activity at the storage managed by the storage operating system. The demand on the storage may decrease during lunch time. The performance manager  tracks this activity to determine the expected range or expected QOS data behavior for future activity.","Performance manager  uses the expected range to represent and monitor I\/O response time and operations for a storage volume in a cluster. The performance manager  tracks QOS data and in some cases identifies abnormal activity as incidents. An incident indicates that workload performance is outside a desirable level due to resource contention from other workloads i.e. workloads with higher usage of cluster resources may be causing the response time to increase. Incidents are considered as events that indicate I\/O performance issues at a storage volume caused by resource contention.","Performance manager  compares historical QOS data with current QOS data to identify a victim workload whose performance may have decreased. Victim workloads may be identified based on response time deviation from an expected response time, as described below. After identifying the victim, the performance manager  identifies the resource that may be in contention as well as the workloads (or volumes) that may be overusing the resources (i.e. bully workloads).","Workloads are ranked to determine which bullies have the highest change in usage of the resource and which victims are most impacted. Based on the identification of victim and bully workloads, a remediation plan may be recommended to correct the problems associated with the incident.","Referring now to , System A shows two clusters A and B, both similar to cluster  described above. Each cluster includes the QOS module  for implementing QOS policies that are established for different clients\/applications.","Cluster  A may be accessible to clients . and ., while cluster  B is accessible to clients .\/.. Both clusters have access to storage subsystems  and storage devices .\/.N.","Clusters A and B communicate with a collection module . The collection module  may be a standalone computing device or integrated with performance manager . The aspects described herein are not limited to any particular configuration of collection module  and performance manager .","Collection module  includes one or more acquisition modules  for collecting QOS data from the clusters. The data is pre-processed by the pre-processing module  and stored as pre-processed QOS data  at a storage device (not shown). Pre-processing module  formats the collected QOS data for the performance manager . Pre-processed QOS data  is provided to a collection module interface  of the performance manager . QOS data received from collection module  is stored as QOS data structure  by performance manager  at a storage device (not shown).","Performance manager  includes a plurality of modules, for example, a forecasting module , a detection module  and an incident analysis module  that use the QOS data  for detecting incidents and reporting the incidents to a client system  via a GUI . Performance manager  also recommends a corrective action plan to client .","Client  may access the analysis results and recommendations using GUI . Details regarding the GUI module  are provided below. Before describing the various processes involving performance manager  and its components, the following describes using the performance manager  in a cloud based computing environment.","Cloud Computing Environment:",{"@attributes":{"id":"p-0085","num":"0084"},"figref":"FIG. 2C","b":["224","224","108","202","240","240","240"]},"Storage system A and storage system B may be deployed by a cloud manager  and\/or a cloud administrator configured to provision the host systems, storage associated with one or more client devices (e.g., client  , client  ) and\/or services requested by the one or more client devices. As an example, storage system A may be configured to be associated with SVM  A and SVM  . Storage system B may be configured to be associated with SVM  B, SVM  D and SVM  E.","In one or more aspects, cloud manager  may enable one or more client devices to self-provision computing resources thereof. As an example, cloud manager  may manage cloud portion(s) (e.g., cloud  , cloud  ) associated with client   and client  . Client   and\/or client   may log into a console associated with cloud manager  to access cloud   and\/or cloud   (and the VMs A-E therein) through a public network  (e.g., Internet). The client devices and\/or VMs associated therewith provided in cloud computing environment  may be analogous to the clients of \/A.","In order to address storage requirements\/requests associated with client   and client  , cloud manager  may be configured to appropriately provision SVM  A, SVM  B, SVM  , SVM  D and SVM  E and allocate to client   and client  . The aforementioned SVMs may be virtualized entities utilized by client   and client   to meet storage requirements thereof. Multi-tenancy may allow for a storage system to have multiple SVMs associated therewith. A portion of the cloud (e.g., cloud  ) including SVM  A, SVM  B and VMs (e.g. VM A, VM B) associated therewith may be associated with client   and a portion of the cloud (e.g., cloud  ) including SVM  C, SVM  D and SVM  E and VMs (e.g., VM C, VM D, VM E) associated therewith may be associated with client  . In one or more aspects, VMs may reside on storage exposed by SVM(s).","The aforementioned cloud portions may be logical subsets of the cloud and may include VMs implemented with operating systems (e.g., Linux, Microsoft\u00ae's Windows\u00ae). \u201cCloud\u201d as used herein may refer to the large pool of configurable computing resources (e.g., virtualized computing resources) that may be subjected to a pay-per-use model, in which client(s) may enter into service agreement(s) with service provider(s). The portion of the \u201ccloud,\u201d therefore, may refer to the pool of resources associated with a particular client. It is noteworthy that client   and\/or client   may be entities (e.g., corporations, departments and others), and that there may be a number of computing devices associated with each of client   and\/or client  .","Cloud   and\/or cloud   may span across several geographic regions. In one or more aspects, the aforementioned cloud portions may span multiple countries under differing jurisdictional guidelines. For example, a jurisdictional guideline may deem that a SVM needs to be launched on hardware (e.g., storage system) located in the same jurisdiction as the corresponding client(s).","In one or more aspects, administrators of cloud computing environment  may possess the authority to launch one or more SVMs on any of storage system A and storage system B, irrespective of the location(s) thereof. Further, in one or more aspects, the aforementioned one or more SVMs may be associated with one or more versions of storage operating system . For example, an administrator may modify the version of the storage operating system and\/or configuration settings on storage system A and\/or storage system B.","In one aspect, cloud computing environment  includes the performance manager  and the collection module  that have been described above. The various processes executed by the performance manager  and the collection module  are described below.","Before describing the various processes executed by the performance manager , the following describes how QOS requests are handled at the cluster level with respect to .","QOS Overview:","As shown in , the network module  of a cluster includes a network interface A for receiving requests from clients. Network module  executes a NFS module C for handling NFS requests, a CIFS module D for handling CIFS requests, a SCSI module for handling iSCSI requests and an others module F for handling \u201cother\u201d requests. A node interface G is used to communicate with QOS module , storage module  and\/or another network module . QOS management interface B is used to provide QOS data from the cluster to collection module  for pre-processing data.","QOS module  includes a QOS controller A, a QOS request classifier B and QOS policy data structure (or Policy_Group) . The QOS policy data structure  stores policy level details for implementing QOS for clients and storage volumes. The policy determines what latency and throughput rate is permitted for a client as well as for specific storage volumes. The policy determines how I\/O requests are processed for different volumes and clients.","The storage module  executes a file system A (a part of storage operating system  described below) and includes a storage layer B to interface with storage device . NVRAM C of the storage module  may be used as cache for responding to I\/O requests.","A request arrives at network module  from a client or from an internal process directly to file system A. Internal process in this context may include a de-duplication module, a replication engine module or any other entity that needs to perform a read and\/or write operation at the storage device . The request is sent to the QOS request classifier B to associate the request with a particular workload. The classifier B evaluates a request's attributes and looks for matches within QOS policy data structure . The request is assigned to a particular workload, when there is a match. If there is no match, then a default workload may be assigned.","Once the request is classified for a workload, then the request processing can be controlled. QOS controller A determines if a rate limit (i.e. a throughput rate) for the request has been reached. If yes, then the request is queued for later processing. If not, then the request is sent to file system A for further processing with a completion deadline. The completion deadline is tagged with a message for the request.","File system A determines how queued requests should be processed based on completion deadlines. The last stage of QOS control for processing the request occurs at the physical storage device level. This could be based on latency with respect to storage device  or for NVRAM C that may be used for any logged operation.","Performance Model:",{"@attributes":{"id":"p-0102","num":"0101"},"figref":"FIG. 2E","b":["121","233"]},"Various resources are used to process I\/O requests. As an example, there are may be two types of resources, a service center and a delay center resource. The service center is a resource category that can be represented by a queue with a wait time and a service time (for example, a processor that processes a request out of a queue). The delay center may be a logical representation for a control point where a request stalls waiting for a certain event to occur and hence the delay center represents the delay in request processing. The delay center may be represented by a queue that does not include service time and instead only represents wait time. The distinction between the two resource types is that for a service center, the QOS data includes a number of visits, wait time per visit and service time per visit for incident detection and analysis. For the delay center, only the number of visits and the wait time per visit at the delay center are used, as described below in detail.","Performance manager  uses different flow types for incident detection and analysis. A flow type is a logical view for modeling request processing from a particular viewpoint. The flow types include two categories, latency and utilization. A latency flow type is used for analyzing how long operations take at the service and delay centers. The latency flow type is used to identify a victim workload whose latency has increased beyond a certain level. A typical latency flow may involve writing data to a storage device based on a client request and there is latency involved in writing the data at the storage device. The utilization flow type is used to understand resource consumption of workloads and may be used to identify resource contention and a bully workload as described below in detail.","Referring now to , delay center network  is a resource queue that is used to track wait time due to external networks. Storage operating system  often makes calls to external entities to wait on something before a request can proceed. Delay center  tracks this wait time.","Network module CPU  is another resource queue where I\/O requests wait for protocol processing by a network module processor. A separate queue for each node may be maintained.","NV_RAM transfer delay center  is used to track latency due bandwidth\/capacity of non-volatile memory used by cluster nodes to store write data before, the data is written to storage devices .","A storage aggregate (or aggregate)  is a resource that may include more than one storage device for reading and writing information. Disk-I\/O  queue may be used to track utilization of storage devices . A storage module CPU  represents a processor that is used to read and write data. The storage module CPU  is a service center and a queue is used to track the wait time for any writes to storage devices by a storage module processor.","Nodes within a cluster communicate with each other. These may cause delays in processing I\/O requests. The cluster interconnect delay center  is used to track the wait time for transfers using the cluster interconnect system. As an example, a single queue maybe used to track delays due to cluster interconnects.","There may also be delay centers due to certain internal processes of storage operating system  and various queues may be used to track those delays. For example, a queue may be used to track the wait for I\/O requests that may be blocked for file system reasons. Another queue (Delay_Center_Susp_CP) may be used to represent the wait time for Consistency Point (CP) related to the file system A. During a CP, write requests are written in bulk at storage devices and this will typically cause other write requests to be blocked so that certain buffers are cleared.","Without limiting the various aspects of the present disclosure, Table I below provides an example of the various service and delay centers that may be used by performance manager  to track workload performance using different resources. Some of these resources are shown in . Table I also identifies the resource type (i.e. utilization and\/or latency type).",{"@attributes":{"id":"p-0112","num":"0111"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"98pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"133pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"42pt","align":"left"}}],"thead":{"row":[{"entry":"TABLE I"},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}},{"entry":["Resource Name","Resource Description","Type"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["CPU_N_Module (234, FIG. 2E)","This resource identifies a queue where I\/O","Utilization,"]},{"entry":[{},"requests wait for file protocol processing","Latency"]},{"entry":[{},"at a network module (N-Module) 214. As an",{}]},{"entry":[{},"example, there may be one queue for each",{}]},{"entry":[{},"node.",{}]},{"entry":["CPU_D_Module (245, FIG. 2E)","This resource identifies a queue where I\/O","Utilization,"]},{"entry":[{},"requests wait for scheduling for being","Latency"]},{"entry":[{},"written to a storage device by the storage",{}]},{"entry":[{},"module (D-Module) 216. As an example,",{}]},{"entry":[{},"there may be one queue for each node.",{}]},{"entry":["DISK_HDD_<Aggr_name> ","This resource represents non-solid state","Utilization"]},{"entry":["(241, FIG. 2E)","physical storage devices in an aggregate,",{}]},{"entry":[{},"for example, hard drives, tapes and",{}]},{"entry":[{},"others. This provides an average view",{}]},{"entry":[{},"across all storage devices within an",{}]},{"entry":[{},"aggregate. As an example, there may be",{}]},{"entry":[{},"one queue for each aggregate to track this",{}]},{"entry":[{},"resource.",{}]},{"entry":["DISK_SSD_<aggr_name> ","This resource is similar to 241, and","Utilization"]},{"entry":["(Similar to 241, FIG. 2E)","represents physical solid state storage",{}]},{"entry":[{},"devices (SSDs) in an aggregate. This",{}]},{"entry":[{},"provides an average view across all",{}]},{"entry":[{},"storage devices within the aggregate. As",{}]},{"entry":[{},"an example, there may be one queue for",{}]},{"entry":[{},"each aggregate to track this resource.",{}]},{"entry":["DELAY_CENTER_WAFL_","This is a queue to represent the wait time","Latency"]},{"entry":["SUSP_DISKIO","for blocked disk I\/O related file system",{}]},{"entry":[{},"suspensions.",{}]},{"entry":["DELAY_CENTER_WAFL_","This is a queue to represent wait time for","Latency"]},{"entry":["SUSP_CP","Consistency Point (CP) related suspensions",{}]},{"entry":[{},"by the file system. A CP causes write",{}]},{"entry":[{},"requests to a block so that buffers can be",{}]},{"entry":[{},"cleared.",{}]},{"entry":["DELAY_CENTER_","This is a queue that represents an","Latency"]},{"entry":["NETWORK (235, FIG. 2E)","external network wait time. At times,",{}]},{"entry":[{},"storage operating system 107 calls out an",{}]},{"entry":[{},"external entry to wait on a task outside",{}]},{"entry":[{},"of the storage operating system to",{}]},{"entry":[{},"complete before the request can continue",{}]},{"entry":[{},"and this queue is used to track that wait",{}]},{"entry":[{},"time. There may be one delay center for",{}]},{"entry":[{},"an entire cluster.",{}]},{"entry":["DELAY_CENTER_","This queue is used to represents the wait","Latency"]},{"entry":["CLUSTER_INTER-","time for transfers over a cluster",{}]},{"entry":["CONNECT (247, ","interconnect. As an example, there may be",{}]},{"entry":["FIG. 2E)","one queue per cluster.",{}]},{"entry":["NV_RAM Transfer Delay ","This queue is used to represent write","Latency"]},{"entry":["Center (273, FIG. 2E)","throughput at each node in a high-",{}]},{"entry":[{},"availability and metro-cluster",{}]},{"entry":[{},"configuration for disaster recovery."]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}}}},"Workload Model:",{"@attributes":{"id":"p-0114","num":"0113"},"figref":"FIG. 2F","b":["121","251","251","253","253","255","257"]},"A request may have a plurality of attributes, for example, a source, a path, a destination and I\/O properties. The source identifies the source from where a request originates, for example, an internal process, a host or client address, a user application and others.","The path defines the entry path into the storage system. For example, a path may be a logical interface (LIF) or a protocol, such as NFS, CIFS, iSCSI and Fibre Channel protocol.","A destination is the target of a request, for example, storage volumes, LUNs, data containers and others.","I\/O properties include operation type (i.e. read\/write\/other), request size and any other property.","In one aspect, streams may be grouped together based on client needs. For example, if a group of clients make up a department on two different subnets, then two different streams with the \u201csource\u201d restrictions can be defined and grouped within the same workload. Furthermore, requests that fall into a workload are tracked together by performance  for efficiency. Any requests that don't match a user or system defined workload may be assigned to a default workload.","In one aspect, workload streams may be defined based on the I\/O attributes. The attributes may be defined by clients. Based on the stream definition, performance manager  tracks workloads, as described below.","Referring back to , a workload uses one or more resources for processing I\/O requests shown as A-N as part of a resource object . The resources include service centers and delay centers that have been described above with respect to  and Table I. For each resource, a queue is maintained for tracking different statistics (or QOS data) . For example, a response time , and a number of visits , a service time (for service centers)  and a wait time  are tracked. The term QOS data as used throughout this specification includes one or more of , ,  and  according to one aspect.","Without limiting the various aspects of the present disclosure, Table II below provides an example of a non-exhaustive listing of the various objects that are used by the performance manager  for incident detection and analysis, where each object may have multiple instances:",{"@attributes":{"id":"p-0123","num":"0122"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"105pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"70pt","align":"left"}}],"thead":{"row":[{"entry":"TABLE II"},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}},{"entry":["Object","Instance","Purpose","Description"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Workload","<workload_name>","Represents an external workload","Throughput, Average"]},{"entry":[{},{},"applied to a volume. The object","response time"]},{"entry":[{},{},"may be used to measure workload",{}]},{"entry":[{},{},"performance against service",{}]},{"entry":[{},{},"levels.",{}]},{"entry":["Resource","<resource_name>","Provide hierarchical utilization","Utilization"]},{"entry":[{},{},"of resources and may be a",{}]},{"entry":[{},{},"service or delay center.",{}]},{"entry":["Resource_detail","<resource_name>.","Breakdowns resource usage by","Utilization"]},{"entry":[{},"<workload_name>","workload from a resource",{}]},{"entry":[{},{},"perspective.",{}]},{"entry":["Workload_detail","<workload_name>.","Breakdowns workload response","Number of visits,"]},{"entry":[{},"<service_center_name>","time by resource.","service time per"]},{"entry":[{},{},{},"visit and wait time"]},{"entry":[{},{},{},"per visit"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]}}}}},"Performance manager  also uses a plurality of counter objects for incident detection and analysis. Without limiting the adaptive aspects, an example of the various counter objects are shown and described in Table III below:",{"@attributes":{"id":"p-0125","num":"0124"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"84pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"189pt","align":"left"}}],"thead":{"row":[{"entry":"TABLE III"},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":["Workload Object Counters","Description"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["OPS","A number of workload operations that are completed"]},{"entry":[{},"during a measurement interval, for example, a second."]},{"entry":["Read_ops","A number of workload read operations that are completed"]},{"entry":[{},"during the measurement interval."]},{"entry":["Write_ops","A number of workload write operations that are completed"]},{"entry":[{},"during the measurement interval."]},{"entry":["Total_data","Total data read and written per second by a workload."]},{"entry":["Read_data","The data read per second by a workload."]},{"entry":["Write_data","The data written per second by a workload."]},{"entry":["Latency","The average response time for I\/O requests that were initiated"]},{"entry":[{},"by a workload."]},{"entry":["Read_latency","The average response time for read requests that were"]},{"entry":[{},"initiated by a workload."]},{"entry":["Write_latency","The average response time for write requests that were"]},{"entry":[{},"initiated by a workload."]},{"entry":["Latency_hist","A histogram of response times for requests that were"]},{"entry":[{},"initiated by a workload."]},{"entry":["Read_latency_hist","A histogram of response times for read requests that were"]},{"entry":[{},"initiated by a workload."]},{"entry":["Write_latency_hist","A histogram of response times for write requests that were"]},{"entry":[{},"initiated by a workload."]},{"entry":["WID","A workload ID."]},{"entry":["Classified","Requests that were classified as part of a workload."]},{"entry":["Read_IO_type","The percentage of reads served from various components (for"]},{"entry":[{},"example, buffer cache, ext_cache or disk)."]},{"entry":["Concurrency","Average number of concurrent requests for a workload."]},{"entry":["Interarrival_time_","Sum of the squares of the Inter-arrival time for requests of a"]},{"entry":["sum_squares","workload."]},{"entry":["Policy_group_name","The name of a policy-group of a workload."]},{"entry":["Policy_group_uuid","The UUID (unique indetifier) of the policy-group of a"]},{"entry":[{},"workload."]},{"entry":["Data_object_type","The data object type on which a workload is defined, for"]},{"entry":[{},"example, one of SVM, volume, LUN, file or node."]},{"entry":["Data_object_name","The name of the lowest-level data object, which is part of an"]},{"entry":[{},"instance name as discussed above. When data_object_type"]},{"entry":[{},"is a file, this will be the name of the file relative to its volume."]},{"entry":["Data_object_uuid","The UUID (Unique Universal ID) of a SVM, volume or LUN on"]},{"entry":[{},"which this data object is defined."]},{"entry":["Data_object_","The file handle of the file on which this data object is"]},{"entry":["file_handle","defined; or empty if data_object_type is not a file."]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"Without limiting the various aspects of the present disclosure, Table IV below provides an example of the details associated with the object counters that are monitored by the performance manager  for detecting incidents, according to one aspect:",{"@attributes":{"id":"p-0127","num":"0126"},"tables":{"@attributes":{"id":"TABLE-US-00004","num":"00004"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"161pt","align":"left"}}],"thead":{"row":[{"entry":"TABLE IV"},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":["Workload Detail",{}]},{"entry":["Object Counter","Description"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Visits","A number of visits to a physical resource per second;"]},{"entry":[{},"this value is grouped by a service center."]},{"entry":["Service_Time","A workload's average service time per visit to the"]},{"entry":[{},"service center."]},{"entry":["Wait_Time","A workload's average wait time per visit to the"]},{"entry":[{},"service center."]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"When a workload is responding slowly, a user may want to analyze the workload to determine the root cause of any issues and then perform corrective action to solve the issues. Performance manager  using QOS data collected from the different clusters and using the workload performance model detects such issues as incidents and then provides remedial actions.","Performance manager  uses collected QOS data to predict dynamic threshold values for workloads. Using the dynamic threshold values and statically defined threshold values, detection module  detects one or more incidents. The incident analysis module  then determines which resource may be in contention for a victim workload and identifies any bully workloads that may have caused the incident.","Object Layout:",{"@attributes":{"id":"p-0131","num":"0130"},"figref":["FIG. 3A","FIGS. 3B and 3C"],"b":["332","332","121","334","334","336","336","338","338"]},"Object Hierarchy:",{"@attributes":{"id":"p-0133","num":"0132"},"figref":["FIG. 3B","FIG. 2A"],"b":["300","200","300","300","302","302","306","304","318","324","326","302"]},"The QOS network object  is used to monitor network resources, for example, network switches and associated bandwidth used by a clustered storage system.","The cluster node object  stores information regarding a node, for example, a node identifier and other information. Each cluster node object  is associated with a pluralities of child objects, for example, a cache object , a QOS object for a storage module , a QOS object for a network module, a CPU object  and an aggregate object . The cache object  is used to track utilization of a cache (for example, NVRAM C, ). The QOS storage module  tracks the QOS of a storage module defined by a QOS policy data structure  described above in detail with respect to . The QOS network module object  tracks the QOS for a network module. The CPU object  is used to track CPU performance and utilization of a node.","The aggregate object  tracks the utilization of a storage aggregate that is managed by a cluster node. The aggregate object may have various child objects, for example, a flash pool object  that tracks usage of a plurality of flash based storage devices (shown as \u201cflash pool\u201d). The flash pool object  may have a SSD disk object  that tracks the actual usage of specific SSD based storage devices. The RAID group  is used to track the usage of storage devices configured as RAID devices. The RAID object  includes a storage device object  (shown as a HDD (hard disk drive) that tracks the actual utilization of the storage devices.","Each cluster is provided a portset having a plurality of ports that may be used to access cluster resources. A port includes logic and circuitry for processing information that is used for communication between different resources of the storage system. The portset object  tracks the various members of the portset using a port object  and a LIF object . The LIF object  includes a logical interface, for example, an IP address, while the port object  includes a port identifier for a port, for example, a world-wide port number (WWPN). It is noteworthy that the port object  is also a child object of node  that may use a port for network communication with clients.","A cluster may present one or more SVMs to client systems. The SVMs are tracked by the SVM object , which is a child object of cluster . Each cluster is also associated with a policy group that is tracked by a policy group object . The policy group  is associated with SVM object  as well as storage volumes and LUNs. The storage volume is tracked by a volume object  and the LUN is tracked by a LUN object . The volume object  includes an identifier identifying a volume, size of the volume, clients associated with the volume, volume type (i.e. flexible or fixed size) and other information. The LUN object  includes information that identifies the LUN (LUNID), size of the LUN, LUN type (red, write or read and write) and other information.",{"@attributes":{"id":"p-0139","num":"0138"},"figref":"FIG. 3C","b":["302","306","316","320","324","328","330","322","326"]},"As an example, a cluster does not have any physical or logical parent since it is the first object in the hierarchy. Physical nodes are physical children of the cluster object, while SVMs are logical children.",{"@attributes":{"id":"p-0141","num":"0140"},"figref":"FIG. 3C"},"Node object  has physical peers i.e. other nodes and physical children include aggregates on the same nodes as well as ports\/network interface cards. The workloads for a node include the sum of network module and storage module utilization. Node  may also have another peer node configured as a HA partner.","Aggregate object  has a node as a physical parent and another aggregate as a physical peer. The volumes on the aggregate are logical children. The aggregate utilization is tracked by a counter maintained by the performance manger  based on data collected from the storage system.","Port object  has a node as a physical parent, while other ports in a same portset and on the same node are physical peers. The LIFs for the ports are logical children.","SVM  have other SVMs as logical peers and a cluster is a physical parent. Volumes and LIFs are logical children.","The relationships for volume , LUN  and LIF  objects are self-explanatory.","In one aspect, a GUI based tool is provided for evaluating resource performance and utilization. The GUI based tool (shown as \u201cperformance explorer\u201d below) provides a grid where a user is able to view a root object that may be a root cause of a performance issue. The user is also able to select a category of objects and objects within the category for comparison with the root object to validate the performance issues associated with the root object before taking any remedial action.","It is noteworthy that although the examples shown herein are with respect to the GUI based tool, but the functionality as captured by the various process flows may be implemented using one or more hardware processor executable application programming interface (APIs).","Process Flow:",{"@attributes":{"id":"p-0150","num":"0149"},"figref":["FIG. 4A","FIG. 3B"],"b":["400","402","121","102"]},"The performance manager  monitors the performance of various resources using the plurality of counters. Different metrics, for example, latency, IOPS, throughput, utilization and others are monitored. The performance manager  compares the resource performance with threshold values that are associated with individual resource. The monitoring may highlight resources that may be affected by performance issues (i.e. undesirable latency, utilization and others). If a threshold value is reached and the violation continues for a certain duration, an incident or an event is generated for the user.","In block B, a root object representing the resource is identified. The object may be identified based on when the performance of the resource has reached a threshold value. The threshold value may be based on latency and\/or utilization of the resource by one or more workloads.","In block B, first a category of other objects is identified and then one or more of the other objects are selected for comparison with the root object. The other object (also referred to as candidate object) selection is based on the type of performance issue as well as the type of root object. The category of objects (or object type) is based on relevance to the root object type and the relationships that the objects have, described above with respect to .","As an example, the category of objects may be based on a child-parent relationship (for example, if an aggregate is having performance issues then a volume that is a child object may be selected for comparison); objects may of the same type as the root object (may be referred to as \u201csibling objects\u201d or \u201cpeer\u201d objects; for example, peer volumes within a same aggregate may be peer volumes that are selected); and objects of the same root object type but on a different high availability cluster node (may be referred to as a \u201cnode peer\u201d object and may be selected for comparison). Other remotely related but possibly relevant objects may be selected as well. These may include QOS workloads that use the object, LIFs, policy objects, and others.","In block B, the performance manager  compares the performance of the other object with the root object to determine if the root object is the root cause of the performance issue highlighted in block B. The comparison is based on evaluating the performance of the other object and comparing that performance with the performance of root object. The comparison may be to determine when there were no issues with either objects; determine if there has been a configuration change over time that may have causes the root object to behave differently; and if a similar issue had been determined in the past with the root object and\/or the other object.","The comparison provides the user with a baseline to verify if the root object is the root cause of the performance issue. If the root object is the root cause and depending on the type of performance issue, a remediation option is provided in block B.",{"@attributes":{"id":"p-0157","num":"0156"},"figref":"FIG. 4B","b":["412","414","121"]},"In block B, a performance explorer GUI  is presented on a display device of a computer. An example of the performance explorer GUI  is shown in  as tab . In one aspect, the performance explorer GUI is presented after an event is detected; from a dashboard of the performance manager  GUI; by doing a search for a resource object; from a URL that is mailed to a user with an incident report or from any other entry point.","In block B, a grid is presented in the performance explorer GUI  with at least one object that is related to the root object. As described above, the related object is based on the root object type and the performance issue that may be highlighted. For example, in , the grid  shows various objects under the column labelled volume. The time range for data comparison is shown as 72 hours under tab . Tab  snows that volumes of a particular SVM are being listed in the grid region. In one aspect, grid values change, when the time period (shown as time range , ) is changed. This displays average behavior over a different duration for identifying candidate objects that may have similar symptoms or may be the root cause of a problem.","In block B, an object is selected for comparison. For example, the first entry for volume labelled as \u201csvm1_imror\u201d may be selected. Tab  may be used to select the object. As an example, the object is added to a shopping cart . In one aspect, a plurality of objects maybe placed in the shopping cart . The performance explorer GUI  enables hiding some of the objects without removing them. This enables the user to hide possible candidate objects but not discard them if the user is uncertain and wants to use them at a later time.","The shopping cart  shows a comparing segment . The comparing segment shows a SVM labelled as svm2. By using tabs , volumes svm1 and svn2 may be selected for comparison. One of the volumes may be the root object, while the other volume may be the related object. A time-series performance chart is then displayed in the chart display segment . The chart display segment shows the numbers of charts that are selected at any given time (). The events are shown in segment . The latency graphs for the volume are shown as  and the IOPS are provided in segment .","Based on the comparison, the user can verify if the root object is the root cause of the performance issue. Thereafter, a remediation plan is presented to the user in block B. The remediation may be based on the performance issue that is highlighted by the performance explorer. For example, the remediation may be to move a workload from one resource to another; change a policy setting or a threshold value; put a limit on a workload; upgrade equipment or any other action.","In one aspect, an intuitive GUI is provided for root cause investigation and analysis. The performance manager  provides a tool for the user to take action only after the root cause of the performance issue has been verified.",{"@attributes":{"id":"p-0164","num":"0163"},"figref":["FIG. 6A","FIG. 6B-6G"],"b":"600"},"The process begins on block B, when the various resources within a cluster or more than one cluster are operational. The different resources are managed as logical objects and performance data associated with the counters are obtained by the performance manager  and stored at one or more data structures, as described above.","In block , the various resources are monitored. In block B, an event or an incident associated with a cluster is identified. An event or incident may be highlighted if a threshold value for a resource has been reached.","In one aspect, as an example, a storage administrator is provided with a high level view of different clusters that the administrator may be managing. This is shown as segments  and  at the screen shot of . Segments \/ show latency indicator for the SVMs, volumes and LUNs. The number of IOPS for the various cluster nodes and SVMs, the throughput rate for the nodes and the SVMs, the disk utilization for the cluster aggregates and the node utilization.","Since each cluster is an independent entity, the administrator is also provided with an overview of each cluster, as shown in . The top portion of the screenshot of , labelled as  includes all the active events of cluster. Segment , as an example, shows that there are 25 active events. A graph illustrates five different cluster parameters, latency, IOPS, throughput, node utilization and disk utilization. Individual charts for IOPs and throughput are shown in segment .","Below segment  is segment  that is viewed by selecting the overview option . Segment  shows a listing of various managed objects, for example, nodes, SVMs, aggregates, volumes, LUNs, LIFs and ports that have been described above with respect to various figures, includes \/C. The cluster level summary is further shown in segments  and . Segment  shows the CPU utilization for the top 10 node objects and segment  shows the IOPS for top ten SVMs. The \u201ctop 10\u201d list is generated to highlight objects that are likely to have performance issues.","Referring back to , in block B, an object (may be referred to as \u201croot object\u201d) associated with an incident\/event is identified. As an example, a user may identify the object by using the top ten listing of the screen shot of . In another aspect, the user may select an object from screen shot  of  that provides an object inventory view of various objects that are being monitored by the performance manager , at any given time. The object inventory lists the name of the objects, the metrics that are being monitored (for example, latency, IOPS, throughout, utilization and others), any associated objects based on the relationships of \/C; and any threshold policy that is associated with the objects. In one aspect, the administrator may assign programmable threshold values to the objects, using the screenshot of .",{"@attributes":{"id":"p-0171","num":"0170"},"figref":["FIG. 6E","FIG. 6E"],"b":"630"},"In block B, the performance explorer GUI is initiated, so that another resource object can be identified for comparison with the object identified in block B. An example of the performance explorer is shown in , which is similar to  that has been described above. The performance explorer is provided to confirm or deny that a resource object is the root cause of a performance issue. The performance explorer may also be used to determine if another resource object may be the root cause of the performance issue. The performance explorer grid may be used to select another object for comparison. The other object is selected based on its relationship with the root object. The various object relationships have been described above in detail.","In block B, the performance of the other object is compared with the performance of the root object. The comparison is based on using performance data for a time period. The comparison may be initiated using the \u201cView and Compare\u201d option  from the screen shot of . An example of the time-series comparison is shown in , where the latency of the two objects is shown over time. This enables the user to verify in block B, if the root object or another object is the root cause of a performance issue. If the root object or another object is the root cause, then an appropriate remediation plan can be presented to the user for fixing the performance issue.","Storage System Node:",{"@attributes":{"id":"p-0175","num":"0174"},"figref":"FIG. 7","b":["208","1","702","702","704","710","712","716","717","708","208","1","121"]},"Processors A-B may be, or may include, one or more programmable general-purpose or special-purpose microprocessors, digital signal processors (DSPs), programmable controllers, application specific integrated circuits (ASICs), programmable logic devices (PLDs), or the like, or a combination of such hardware devices. The local storage  comprises one or more storage devices utilized by the node to locally store configuration information for example, in a configuration data structure . The configuration information may include information regarding storage volumes and the QOS associated with each storage volume.","The cluster access adapter  comprises a plurality of ports adapted to couple node . to other nodes of cluster . In the illustrative aspect, Ethernet may be used as the clustering protocol and interconnect media, although it will be apparent to those skilled in the art that other types of protocols and interconnects may be utilized within the cluster architecture described herein. In alternate aspects where the network modules and storage modules are implemented on separate storage systems or computers, the cluster access adapter  is utilized by the network\/storage module for communicating with other network\/storage-modules in the cluster .","Each node . is illustratively embodied as a dual processor storage system executing a storage operating system  (similar to , ) that preferably implements a high-level module, such as a file system, to logically organize the information as a hierarchical structure of named directories and files at storage .. However, it will be apparent to those of ordinary skill in the art that the node . may alternatively comprise a single or more than two processor systems. Illustratively, one processor A executes the functions of the network module on the node, while the other processor B executes the functions of the storage module.","The memory  illustratively comprises storage locations that are addressable by the processors and adapters for storing programmable instructions and data structures. The processor and adapters may, in turn, comprise processing elements and\/or logic circuitry configured to execute the programmable instructions and manipulate the data structures. It will be apparent to those skilled in the art that other processing and memory means, including various computer readable media, may be used for storing and executing program instructions pertaining to the disclosure described herein.","The storage operating system  portions of which is typically resident in memory and executed by the processing elements, functionally organizes the node . by, inter alia, invoking storage operation in support of the storage service implemented by the node.","The network adapter  comprises a plurality of ports adapted to couple the node . to one or more clients .\/.N over point-to-point links, wide area networks, virtual private networks implemented over a public network (Internet) or a shared local area network. The network adapter  thus may comprise the mechanical, electrical and signaling circuitry needed to connect the node to the network. Each client .\/.N may communicate with the node over network  () by exchanging discrete frames or packets of data according to pre-defined protocols, such as TCP\/IP.","The storage adapter  cooperates with the storage operating system  executing on the node . to access information requested by the clients. The information may be stored on any type of attached array of writable storage device media such as video tape, optical, DVD, magnetic tape, bubble memory, electronic random access memory, micro-electro mechanical and any other similar media adapted to store information, including data and parity information. However, as illustratively described herein, the information is preferably stored at storage device .. The storage adapter  comprises a plurality of ports having input\/output (I\/O) interface circuitry that couples to the storage devices over an I\/O interconnect arrangement, such as a conventional high-performance, Fibre Channel link topology.","Operating System:",{"@attributes":{"id":"p-0184","num":"0183"},"figref":["FIG. 8","FIG. 1"],"b":["706","107","208","1","706","109","121"]},"In one example, storage operating system  may include several modules, or \u201clayers\u201d executed by one or both of network module  and storage module . These layers include a file system manager  that keeps track of a directory structure (hierarchy) of the data stored in storage devices and manages read\/write operation, i.e. executes read\/write operation on storage in response to client .\/.N requests.","Storage operating system  may also include a protocol layer  and an associated network access layer , to allow node . to communicate over a network with other systems, such as clients .\/.N. Protocol layer  may implement one or more of various higher-level network protocols, such as NFS, CIFS, Hypertext Transfer Protocol (HTTP), TCP\/IP and others.","Network access layer  may include one or more drivers, which implement one or more lower-level protocols to communicate over the network, such as Ethernet. Interactions between clients' and mass storage devices .-. (or ) are illustrated schematically as a path, which illustrates the flow of data through storage operating system .","The storage operating system  may also include a storage access layer  and an associated storage driver layer  to allow storage module  to communicate with a storage device. The storage access layer  may implement a higher-level storage protocol, such as RAID (redundant array of inexpensive disks), while the storage driver layer  may implement a lower-level storage device access protocol, such as Fibre Channel or SCSI. The storage driver layer  may maintain various data structures (not shown) for storing information regarding storage volume, aggregate and various storage devices.","As used herein, the term \u201cstorage operating system\u201d generally refers to the computer-executable code operable on a computer to perform a storage function that manages data access and may, in the case of a node ., implement data access semantics of a general purpose operating system. The storage operating system can also be implemented as a microkernel, an application program operating over a general-purpose operating system, such as UNIX\u00ae or Windows XP\u00ae, or as a general-purpose operating system with configurable functionality, which is configured for storage applications as described herein.","In addition, it will be understood to those skilled in the art that the disclosure described herein may apply to any tyke of special-purpose (e.g., file server, filer or storage serving appliance) or general-purpose computer, including a standalone computer or portion thereof, embodied as or including a storage system. Moreover, the teachings of this disclosure can be adapted to a variety of storage system architectures including, but not limited to, a network-attached storage environment, a storage area network and a storage device directly-attached to a client or host computer. The term \u201cstorage system\u201d should therefore be taken broadly to include such arrangements in addition to any subsystems configured to perform a storage function and associated with other equipment or systems. It should be noted that while this description is written in terms of a write any where file system, the teachings of the present disclosure may be utilized with any suitable file system, including a write in place file system.","Processing System:",{"@attributes":{"id":"p-0192","num":"0191"},"figref":["FIG. 9","FIG. 9"],"b":["900","900","121","102","118","116","204","108"]},"The processing system  includes one or more processor(s)  and memory , coupled to a bus system . The bus system  shown in  is an abstraction that represents any one or more separate physical buses and\/or point-to-point connections, connected by appropriate bridges, adapters and\/or controllers. The bus system , therefore, may include, for example, a system bus, a Peripheral Component Interconnect (PCI) bus, a HyperTransport or industry standard architecture (ISA) bus, a small computer system interface (SCSI) bus, a universal serial bus (USB), or an Institute of Electrical and Electronics Engineers (IEEE) standard 1394 bus (sometimes referred to as \u201cFirewire\u201d).","The processor(s)  are the central processing units (CPUs) of the processing system  and, thus, control its overall operation. In certain aspects, the processors  accomplish this by executing software stored in memory . A processor  may be, or may include, one or more programmable general-purpose or special-purpose microprocessors, digital signal processors (DSPs), programmable controllers, application specific integrated circuits (ASICs), programmable logic devices (PLDs), or the like, or a combination of such devices.","Memory  represents any form of random access memory (RAM), read-only memory (ROM), flash memory, or the like, or a combination of such devices. Memory  includes the main memory of the processing system . Instructions  implement the process steps described above may reside in and executed by processors  from memory . For example, instructions  may be used to implement the forecasting module , detection module  and incident analysis module , according to one aspect.","Also connected to the processors  through the bus system  are one or more internal mass storage devices , and a network adapter . Internal mass storage devices  may be, or may include any conventional medium for storing large volumes of data in a non-volatile manner, such as one or more magnetic or optical based disks. The network adapter  provides the processing system  with the ability to communicate with remote devices (e.g., storage servers) over a network and may be, for example, an Ethernet adapter, a Fibre Channel adapter, or the like.","The processing system  also includes one or more input\/output (I\/O) devices  coupled to the bus system . The I\/O devices  may include, for example, a display device, a keyboard, a mouse, etc.","Thus, methods and apparatus for collecting, monitoring and trouble shooting performance issues have been described. Note that references throughout this specification to \u201cone aspect\u201d or \u201can aspect\u201d mean that a particular feature, structure or characteristic described in connection with the aspect is included in at least one aspect of the present disclosure. Therefore, it is emphasized and should be appreciated that two or more references to \u201can aspect\u201d or \u201cone aspect\u201d or \u201can alternative aspect\u201d in various portions of this specification are not necessarily all referring to the same aspect. Furthermore, the particular features, structures or characteristics being referred to may be combined as suitable in one or more aspects of the disclosure, as will be recognized by those of ordinary skill in the art.","While the present disclosure is described above with respect to what is currently considered its preferred aspects, it is to be understood that the disclosure is not limited to that described above. To the contrary, the disclosure is intended to cover various modifications and equivalent arrangements within the spirit and scope of the appended claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The various features of the present disclosure will now be described with reference to the drawings of the various aspects. In the drawings, the same components may have the same reference numerals. The illustrated aspects are intended to illustrate, but not to limit the present disclosure. The drawings include the following Figures:",{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 2A"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 2B"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 2C"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 2D"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 2E"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 2F"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 3A"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 3B"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 3C"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIGS. 4A and 4B"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 6A"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIGS. 6B-6G"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 9"}]},"DETDESC":[{},{}]}
