---
title: Method and system for ingesting content schedule data from an external source
abstract: A content ingestion system and method of operating the same includes a client module receiving a schedule data signal from an external service provider to a content ingestion module. The system also includes a first queue receiving the schedule data signal from the client module. The system further includes a switch module forming a plurality of objects from the schedule data signal and a second queue receiving the plurality of objects from the first switch module. A persistence module is also included in the system that reads the objects from the second queue and storing the objects in a database.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08612598&OS=08612598&RS=08612598
owner: The DIRECTV Group, Inc.
number: 08612598
owner_city: El Segundo
owner_country: US
publication_date: 20110218
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["TECHNICAL FIELD","BACKGROUND","SUMMARY","DETAILED DESCRIPTION"],"p":["The present disclosure relates generally to communication systems for communicating data to a user device, and more particularly, to a method and system for receiving data from an external source and communicating data to a user device.","The statements in this section merely provide background information related to the present disclosure and may not constitute prior art.","Communication systems such as pay or subscription communication systems include a primary service provider and a user receiver device such as a set top box or integrated receiver decoder. The user device is typically provided with authorization to communicate with the primary service provider and receive services therefrom. One example of such a system is a satellite television system such as DIRECTV\u00ae. Conditional access is provided at the user device in the faun of a card that allows the user device to receive and process signals from the primary service provider.","Providing secure access to data is important for a primary service provider. At certain time such as an Olympic event, networks may share coverage with other networks or service providers. Providing access to the content to customers of another service provider is desirable. Accessibility for the content is also important. An example of a type of data that may be provided includes program guide data and other types of data such as metadata associated with the guide data. Security is important for the content and to prevent others from accessing the content is important.","The present disclosure provides a system and method for ingesting schedule data for content from an external source.","In one aspect of the invention, a method includes communicating schedule data signal from an external service provider to a content ingestion module, communicating the schedule data signal to a first queue, forming a plurality of objects from the schedule data signal, communicating the plurality of object to a second queue, reading the objects from the second queue and storing the objects in a database.","In another aspect of the invention, a content ingestion system includes a client module receiving a schedule data signal from an external service provider to a content ingestion module. The system also includes a first queue receiving the schedule data signal from the client module. the system further includes a switch module forming a plurality of objects from the schedule data signal and a second queue receiving the plurality of objects from the first switch module. A persistence module is also included in the system that reads the objects from the second queue and storing the objects in a database.","Further areas of applicability will become apparent from the description provided herein. It should be understood that the description and specific examples are intended for purposes of illustration only and are not intended to limit the scope of the present disclosure.","The following description is merely exemplary in nature and is not intended to limit the present disclosure, application, or uses. For purposes of clarity, the same reference numbers will be used in the drawings to identify similar elements. As used herein, the term module refers to an Application Specific Integrated Circuit (ASIC), an electronic circuit, a processor (shared, dedicated, or group) and memory that execute one or more software or firmware programs, a combinational logic circuit, and\/or other suitable components that provide the described functionality. As used herein, the phrase at least one of A, B, and C should be construed to mean a logical (A or B or C), using a non-exclusive logical or. It should be understood that steps within a method may be executed in different order without altering the principles of the present disclosure.","While the following disclosure is made with respect to example DIRECTV\u00ae broadcast services and systems, it should be understood that many other delivery systems are readily applicable to disclosed systems and methods. Such systems include wireless terrestrial distribution systems, wired or cable distribution systems, cable television distribution systems, Ultra High Frequency (UHF)\/Very High Frequency (VHF) radio frequency systems or other terrestrial broadcast systems (e.g., Multi-channel Multi-point Distribution System (MMDS), Local Multi-point Distribution System (LMDS), etc.), Internet-based distribution systems, cellular distribution systems, power-line broadcast systems, any point-to-point and\/or multicast Internet Protocol (IP) delivery network, and fiber optic networks. Further, the different functions collectively allocated among a service provider and integrated receiver\/decoders (IRDs) as described below can be reallocated as desired without departing from the intended scope of the present patent.","Further, while the following disclosure is made with respect to the delivery of content (e.g., television (TV), movies, games, music videos, etc.), it should be understood that the systems and methods disclosed herein could also be used for delivery of any media content type, for example, audio, music, data files, web pages, games, etc. Additionally, throughout this disclosure reference is made to data, information, programs, movies, assets, video data, etc., however, it will be readily apparent to persons of ordinary skill in the art that these terms are substantially equivalent in reference to the example systems and\/or methods disclosed herein. As used herein, the term title or program will be used to refer to, for example, a media content type such as a movie itself and not the name of the movie.","The word, service, is used to convey hardware, software or a combination thereof. The service may be implemented in a computer file server or web server. Servers may be standalone or combined to have various functions. The servers may be physically located in one location or multiple locations. More than one actual server device may perform a particular function. When more than one server is used, they may be distributed geographically. Servers have an associated memory in which data is stored. Servers provide different functions to prevent overloading and maintain service speed. The servers may have \u201ccontainers\u201d therein that provide the unique environment. The containers may be used interchangeably with web server herein. The containers execute the process in the web server.","The following system is designed to ingest schedule data from an external service provider. The schedule data may include various data associated or relevant to the content that is or will be provided from the external service provider. Examples include but are not limited to identifiers which are numeric or alphanumeric identifiers for the content, network, channel and third-party identifier. Other data may include but are not limited to the title, a description, start time, end time, publish date, end publish date, category, maturity rating, actor and series.","Referring now to , a satellite television broadcast system  is illustrated. The satellite television broadcast system  is illustrated by way of example. However, the present disclosure is not so limited hereto as mentioned above. The television broadcast system  includes a satellite  that receives content or programming from a primary service provider . More specifically, the primary service provider  includes a content system  that generates uplink signals  corresponding to content through an uplink antenna . The content system  may have content stored therein or pass content therethrough as in live television broadcasting. Thus, the content system  may provide both stored content and live content to user devices. The content may be communicated through a terrestrial or extraterrestrial source. The primary service provider  may provide the final link to a user device  that is associated with the primary service provider (e.g. a subscriber).","The uplink signals  may be content signals or television signals and more specifically digital content or television signals. The uplink antenna  communicates the uplink signals  to the satellite  which in turn generates downlink signals . The downlink signals  are communicated to a receiving antenna  at the user device . Although only one user device  is illustrated, several user devices may be provided in the system . The uplink signals  and downlink signals  may be referred to as communication signals. Communication signals are wireless communication signals and may include various types of entertainment content, traffic, weather, hazardous material warnings, advertising material, and the like. As mentioned above, this system may be suitable for wired systems such as cable televisions and terrestrial wireless systems.","The user device  may include a satellite television receiver, set top box or a digital video recorder. The satellite television receiver may also be referred to as an integrated receiver decoder. Of course, other types of user devices  may be used such as a cable television set top box. Other types of user devices  may include a mobile device such as a lap top computer, cellular phone, personal digital assistant, a portable media player or an automotive-based television receiving device. Thus, the user device  may be a fixed user device in the case of a satellite television set top box or a mobile user device. Both fixed and mobile devices may be used in a system.","The primary service provider  may also include an account\/billing web service  and an authentication server . The authentication server  may include an encrypted token (eToken) web service A and a setup web service B. The eToken web service A may be used to generate and validate eTokens. The generation and validation process will be further described below. The setup web service B may be used to setup or establish information so that an eToken may be generated. The set-up process will be described further below.","The primary service provider  may also include a conditional access management system . The conditional access management system  may be used to grant conditional access to various programming as well as provide recording commands to the user device  as will be described below.","The primary service provider  may also include a data web service . The data web service  may include a programming guide web service A, a customer care web service B and a remote booking web service C.","The program guide web service A may be used to generate program guide data and information regarding various programming that is available. The program guide web service A, as will be described below, may generate custom programming guide information based upon the subscription to which a user is subscribed. The program guide web service A may also provide generic or non-customized content when specific user attributes are not known. When user attributes such as location and subscription information are known, only the content available to the particular subscriber may be included in the program guide. Additional content may be provided for advertising purposes. Thus, channel data for particular channels may be provided in the program guide. Content available from an external service provider ( described below) may also be included in the program guide data. This will be described below.","The program guide web service A may generate program guide data for both linear and non-linear content. Linear content are television shows broadcasted at a particular time and a particular channel. Network television programming is an example. Non-linear content is programming that is not tied to a particular time such as on-demand content that can be requested at the user's discretion.","The customer care web service B may be used to generate and provide users with various types of help mechanisms to resolve technical issues.","The remote booking web service C may be used to generate remote booking commands or recording instructions as will be described below. The remote booking commands or recording instructions may be transmitted through the uplink antenna  to the satellite  and downlinked through the downlink signal  to an antenna  on the user device . A remote booking command may then initiate the user device  to store content broadcast by the satellite  thereon.","A guide search web service D may be used to provide searching capabilities to customers of the partner service provider. The searching may take place using stored data within the DIRECTV\u00ae listing service . The searching as described below may be for linear content, non-linear content or a combination of linear and non-linear content. Both types of content could be made available to customers of the primary service provider to search. Customers of the partner service provider and not of the primary service provider may also be provided with access to linear content and potentially non-linear. This may allow potential primary service provider customers to see the wide variety of choices provided by the primary service provider. Non-customers of the provider system may be referred to as a generic user. Generic users may thus be provided with search results from national channels and local channels, if location information is provided.","The primary service provider  may also include an authorization server . The authorization server  may provide authorizations to users and prevent users from having too many simultaneous streams. The authorization server may also be used to prevent access to content that a user has not subscribed to.","The user device  is in communication with the primary service provider  through a network . The network  may be a secured network or use a secure protocol. The network  may include a broadband network through which the user device  communicates with the primary service provider . The network  may be a wired network such as a public-switched telephone network (PSTN) or a broadband Internet network. The network may be wireless such as a cellular or wireless Internet system. The broadband network may communicate wired, wirelessly or a combination of both. For example, the user device  may include a wireless antenna  for communicating with an antenna  of a router  which, in turn, is in communication with the network .","The network  may also be an intranet. The components of both the primary and partner service provider may be located separately or in the same building.","The user device  may be associated with a display  for displaying content and programming, as well as displaying various types of user commands, or the like. The display  may be a television or display integrated into the device. The display  may include speakers for an audio display. The display  may be used for displaying primary content from a primary service provider and secondary content from a secondary service provider.","The user device  may include a user interface , such as a keyboard, remote control, or the like, for selecting and entering various types of information by the user. The user device  may also include a conditional access module  that allows the user to access the programming provided from the content system . The conditional access module  may be referred to as an access card. The conditional access module  may include various activation codes without which the user device is not activated. The conditional access module  may include a conditional access module identifier such as a number or a code.","The user device  may also include a network interface  for interfacing with the network . For example, the network interface  may communicate wirelessly through the antenna  or through a direct connection such as an Ethernet connection. The network interface  may be but is not limited to a wireless broadband interface, a broadband interface, a modem-type interface or a public-switched telephone network interface.","The user device  may also include a storage device . The storage device  may store various content received from the primary service provider therein. The content may be received through the satellite  or through the network  through the network interface . The storage device  may be a hard disk drive or memory chip-based device. The storage device  may be referred to as a digital video recorder.","The primary service provider  may be in communication with an external service provider . The external service provider  may include an external data sever  and an external content server . The external data server  may provide the program guide web service with program guide data, a product data, graphics data and data about specific actions, celebrities, producers, and the like. Metadata may also be provided by the external service provider . The metadata may include various descriptions, network or channel affiliations and the like. One example of an external data that may be provided is the Tribune Media Service\u00ae (TMS) identifier. TMS is a commercial service that provides various product content data such as metadata (titles, identifiers, descriptions) and schedules to service providers. Other data providers may be used. The external service provider  may provide unique identifiers for each piece of content. The data provided by the external service provider  may include movie data, graphics types, TV show data, celebrity data, TV show cards, and other data. Data may also be provided for upcoming movies, shows and other events. The external data provider  may include a file transfer protocol server  for transferring files in a desired format.","The content server  may provide content to the primary service provider . The content may be various types of content including promotional content which is relatively short in nature and full-length movies. Other types of content may be provided such as television programming, sports clips and highlights and commercial material. The content server  may be in communication with the primary service provider  through the network . The content server  may also be in communication with the user device  through the network . In one embodiment of the disclosure, the primary service provider may provide data with respect to content that is available to the user device . After the user device  is authorized, the external service provider may also provide the content directly to the user device . The primary service provider  may also provide the content from the content server  as a pass-through to the user device  from the external service provider.","The system  may also include a user network device  that includes a display . The display  may be separate or integrated into the user network device . The user network device  may be a web browsing device such as a portable computer, a personal digital assistant, a portable video player, an automotive-based user device, or the like. For certain aspects of the disclosure, the set top box or user device  may be considered a user network device since browsing and obtain content and schedules may be performed therefrom. The user network device  may receive various data from the servers within the primary service provider . The display  may be used for displaying various program guide information, along with other information provided by the partner service provider. The other information may include financial information, weather information, voicemail information, or other types of information. The primary service provider  may provide the content to be displayed on a website in various manners together with or in addition to the program guide information or other information.","The primary service provider  may also include a television listing server (DLS) database . The television listing server database  may include data corresponding to various listings for various program times and schedules. The television listing server database  may be in communication with the external data provider .","A content ingestion system  may also be provided within the primary service provider . The content ingestion system  is used to ingest the partner schedule into the primary service provider data system. The data is used to authorize users of the primary service provider to access the content as well as provide access to the underlying data. The ingestion process will be described below.","The primary service provider  may also include an entitlement system . The entitlement system  may be used to determine the entitlement of the user device . That is, the user device  may be entitled to or subscribed to various contents and various channels. Authorization from the content available from the external service provider may be limited to content that has been subscribed to. The entitlement system  will be further described below.","Referring now to , the content ingestion system  may include a content ingestion system (CIS) client , a CIS core , a CIS client queue , a token control management (TCM) system  and a database .","The CIS client  may be a simple web service end point. The CIS client  accepts schedule data in a predetermined format such as XML format and may determine a status on the processing of schedule data. The CIS client  receives schedule data and may also validate the identity of the service provider using digital signals provided from the external service provider . The token control management system  may keep track of the various tokens such as electronic tokens or eTokens that are authorized for various external service providers. After validating the token, the schedule data may be communicated to the CIS client queue . When the CIS client  rejects the schedule data from the external service provider , a simple object access protocol (SOAP) signal is generated to indicate a client fault.","The CIS client  may also provide another web service as to the status of the data ingestion.","The CIS core  may save and update data in the database . Detailed operation of the CIS client  and the CIS core  is provided below.","Referring now to , the CIS client  may be implemented using an Apache Tomcat open source Java servlet and Java server page technology. Of course, other types of Java implementations, as well as other non-Java implementations, may be used. The CIS client  may include a digital signatures module  that is used to verify the digital signatures from the external service provider . A Java arch for XML binding (JAXB) application programming interface (API)  may also be included within the CIS client .","A naming\/remoting library module  may also be within the CIS client . A Java messaging service application interface  may also be included within the CIS client . A Java application interface for XML web service (JAX-WS) may also be included within the CIS client . A Java or Java enterprise (JEE) module  may also be included within the CIS client .","Referring now to , a general method for operating the content ingestion system is set forth. In step , the system is securely accessed by an external service provider. That is, the external service provider may be authorized as well as the content of the communication authorized or verified before the content ingestion system will save the content therein.","In step , once the communication between the content ingestion system and the external service provider is secure, the data may be ingested into the system. In step , the data may be processed. As will be described below, the data may be processed into sub-portions or objects of the original data. This has the advantage of reducing processing time if there is an error in ingesting an object. The system only has to restart the processing of the object rather than the entire file.","In step , access may be granted to the process data from user devices. In step , once access is granted to the process data, the process data may be communicated to a user device in step .","Once access is granted to the process data, the user device may have access to the content in step .","Referring now to , a block diagram of the general flow of the method of operating the content ingestion system (CIS) is set forth. In step , the content ingestion system ingests schedule data from the external service provider. In step , an ingestion status signal may be communicated from the primary service provider  to the external service provider  illustrated in . In step , the ingestion signal may be communicated to the external service provider. In step , the ingestion data is communicated to the client queue.","In step , the CIS core  illustrated in  breaks the XML data into a plurality of objects. In step , the objects are communicated to a core queue. In step , the objects are retrieved from the queue. In step , delta files and check sums may be generated from the objects formed in step . In step , the objects are stored within a schedule table database such as the CIS database  illustrated in .","Referring now to , a detailed method for ingesting schedule data is set forth. In step , schedule data, such as schedule data in an XML format, is received by the CIS client from the external service provider  illustrated in . The XML schedule data received in step  may also include a digital signature. A partner public certificate may be stored within the client  that corresponds to the private key used to sign the message. If the digital signature is verified in step , step  validates the partner account. A partner account number may also be communicated in step . Step  checks the partner account to determine if there is an existing account for the partner that is active and specific.","In step , the received schedule data is compared to a specific scheme to determine if it is valid. If the XML data is valid, step  is determined if there is an ingestion request. If there is no ingestion request in step , step  determines if the request is an ingestion status query. If the query is an ingestion status query, the status is obtained in step . After step , if there is no status, step  sends a SOAP signal as a server fault in step . After step , step  is performed which ends the process.","Referring back to step , if the request is an ingestion request, step  is performed. In step , the XML is communicated into a queue. After step , step  is performed which determines if there are any system errors. Step  is performed also after  if the status is obtained. If there are system errors in step , step  sends a SOAP server fault message as described above.","In step , if no system errors are found, a SOAP response is generated in step .","In step , if the digital signature is not verified, or in step  if the type partner is not valid, or in step  if the XML is not valid, or in step  if the ingestion status is not valid, step  sends a SOAP client fault message indicating that there is a fault with the message from the external service provider.","Referring now to , a sequence diagram for the system is illustrated. The CIS client may include various modules including a web service container module , an XML validation handler module , a security handler module , a site identifier validation handler module , a web service end point implementation module , and a JMS messaging utilities module .","The web service container module  receives the message from the external service provider  illustrated in . The XML validation handler  is used to validate the incoming message against various schema. The security handler  implements a SOAP handler interface. An XML digital signature API may be used to verify the digital signal of the incoming SOAP message. Signature verification may be performed on incoming messages only.","The site identifier validation handler module  may validate the site partner. The web service end point implementation module may be implemented using a provider API so that raw XML data may be used rather than a marshaled Java object.","A queue manager  may provide the method for sending the messages to the queue. Connection pooling may be used for efficient handling of the queue connections.","In step , a SOAP request may be generated at the external service provider and communicated to the CIS client . The web service container  intercepts the SOAP request and identifies various handlers that may be used to validate the signal. A handler message  may be communicated to the XML validation handler module . A true or false signal may be returned to the web service container module  as signal . A second handler message  may be communicated to the security handler . The security handler  may verify the digital signature of the service provider by comparing the digital signature to a stored digital signature. A return signal  is generated from the security handler module .","A handler message signal  may also be communicated to the site ID validation handler . In step , a return message may be provided to indicate whether or not the site identifier is valid. A true or false signal may be generated as the return signal . In step , after each of the handlers verifies various portions of the incoming SOAP request , an ingestion request may be communicated to the web service end point implementation . The web service end point implementation may communicate a message to a queue using JMS messaging utilities . If errors occur in communicating the message to the queues, a return void signal  may be communicated. A success or fault signal may be communicated as a return SOAP signal from the web service end point implementation module  to the web service container module . The web service container module  may communicate a SOAP request corresponding to the return SOAP success or fault signal  using a SOAP response signal .","The CIS status may also be generated in the CIS system. The CIS client  may provide another web service the status of the ingestion process. The operation may be on the same port as scheduling the ingestion data. The CIS client may have the similar module described above in , but also include a CIS core fa\u00e7ade .","A SOAP request  may be communicated from an external source such as the external service provider. The SOAP request may also process handler messages and return messages from the validation handler. A security handler may also receive a handler message  and a return message  in a similar manner to signals  and  above. The site ID validation handler  may also receive a handler message  and a return message  in a similar manner to signals  and . An ingestion request  may also be communicated to the web service end point implementation module . The ingestion request  may correspond to a status signal. The end point implementation module may thus generate a status request signal  and communicate it to the CIS core fa\u00e7ade . A return signal  may return a list as to the status of the results. The status may be communicated to the end point implementation  which generates a return SOAP signal  to the web service container. The web service container may communicate a web response  to the external device requesting the status.","Referring now to , the CIS core system  is illustrated in further detail. The CIS core system  is in communication with the CIS client  of  through the CIS client queue . XML or other format contents and requests (such as a status request) are read from the client queue and provided to the CIS core system . The CIS core system may include a CIS switch module  and a CIS persistence module . The CIS switch module is in communication with a CIS core queue . The CIS core queue receives messages from the CIS switch module which posts the messages to the CIS core queue. The CIS core queue  provides messages from the core queue to the CIS persistence module  when read by the persistence module .","The CIS switch  may include a message listener  that is in communication with the CIS client queue . The message listener  may also be in communication with a JMS messaging utility  that is in communication with the CIS core queue . A core processing utility module  may be in communication with the message listener . The message listener module  may also be in communication with a dead letter queue (DLQ) .","The CIS persistence module  may include a message listener module , which is in communication with a JMS messaging utility module . The message listener module  may also be in communication with a core processing utility module  and a business fa\u00e7ade . The business fa\u00e7ade  is in communication with the CIS database . The business fa\u00e7ade reads, saves and updates information in the CIS database .","Generally, the CIS switch  breaks the XML messages into small batches of objects and the CIS persistence module  stores the batch of objects into the database . The CIS persistence module  also creates CIS delta files that correspond to the change in the scheduling data received from the external service provider.","The dead letter queues  and  in each of the switch and persistence modules  and , respectively will have messages delivered from the queue until it is processed successfully. If the message is corrupted, resources may be wasted or an infinite loop may be generated. The dead letter queue is utilized once a retry count is reached. The message is pushed into the dead letter queue so an infinite loop cannot happen after a predetermined retry count.","The CIS core queue  does not know how large the XML file is. When the XML file is sequentially processed and inserted into the database, the whole data will be rolled back if an error occurs. To avoid this situation, the CIS switch module  breaks the data file in the XML format into a batch of objects. Once a batch size is reached, the CIS switch module places the batch into the core queue so that thereafter, it is inserted into the CIS database.","Referring now to , a method for operating the CIS core system is set forth. In step , a message is received at the client queue. In step , if any listeners are not available, then step  is again repeated. In step , if listeners are available, step  is performed. In step , a retry counter is incremented. In step  the retry count and a configured value are compared. When the retry count is more than a configured value, the message is pushed to the dead letter queue . The system then ends in .","Referring back to step , when the retry count is greater than a configured value, then the message is delivered to the CIS core queue  of  in step .","After step , step  determines whether errors have occurred while processing the message. If errors have not occurred while processing, step  ends the process.","In step , if errors are present during processing, step  rolls back the message so that it is placed within the persistence core queue  in step . The process then starts again in step . By placing the data back in the queue another attempt at processing the data may be performed.","Referring now to , a method of operating the core system is set forth. In step , messages are received at the CIS client queue . The CIS switch module  illustrated in  breaks the messages into a batch of objects in step . When there are no validation errors as determined in step , step  adds the object to the batch. In step  when the batch is not the configured size, step  is again executed. In step  when the batch is the configured size, the batch is pushed to the CIS core queue  in step . After step , step  determines if there are any exceptions. If there are no exceptions, step  ends the processing of the XML system. The process is then ended in step .","Referring back to step , after step  if there are any exceptions in step , the system rolls back the transaction. In step  by rolling back the process the current message will go back to the CIS client queue  illustrated in . The process will end in step  after step .","Referring back to step  and , if there are no exceptions and no validation errors, step  adds the message to the batch. When the batch size is equal to the configured size in step , the batch message is pushed onto the CIS core queue  in step . After step , it is determined whether there are any exceptions and step  is again repeated if there are exceptions and step  is repeated if there are no exceptions.","Referring now to , a sequence diagram of the process is set forth using the client queue  and core queue  together with the CIS core system .","The operation of the CIS switch module  is illustrated in further detail. The on message signal  will participate in the transaction. The transaction is a single transaction that is used to read XML from the CIS client queue . The message listener  generates a process message signal  which is communicated to the core process utility. The core process utility  then sends the message to the message utilities using a send message signal. The message listener may be a message-driven bean from the EJB standard. The core process utilities  may be a regular Java Object which utilizes a JAXB API to convert the XML objects into Java objects and process it as described above. The message utility  includes methods to send the batch message to the CIS core queue . A JMS API may be used to obtain the connection to the queue. Connection pooling may be used for efficient handling of the queue connections. Connection pooling may be implemented using JBoss JMS connection pooling. After the send message command  is communicated from the core process utilities  to the message utility , the message or the object may be sent to the core queue . If an error occurs at sending the message to the core queue , a return void signal  is returned to the core process utility indicative of the error. If there is an error at the core process utilities , a return void signal may also be returned in using the return signal . The message may be rolled back in step  if the error or if the message was not communicated to the core queue . A rollback or success message  may be communicated back to the container  when success or a rollback is desired.","Referring now to , the operation of the CIS persistence module  is set forth. The persistence module  is responsible for pushing the schedule and error data into the database  illustrated in . In general, the CIS persistence module  reads the batch objects from the CIS core queue and processes the batch objects and stores them within the database  of .","In step , the batch objects are read from the CIS core queue  illustrated in . Steps  and  determine whether the message is a batch of error objects or a batch of schedule objects. If the message is not a batch of error objects or a batch of schedule objects, step  discards the data and the system ends in step .","Referring back to step , if the message is a batch of error objects, the error objects are processed and inserted into an error table in step . After step , it is determined whether there are any exceptions. If there are any exceptions, step  rolls back the transaction and step  is again performed which ends the process. In step , if there are no exceptions the data is committed into the error table.","Referring back to step , if the message is a batch of schedule objects, step  processes the schedule objects and inserts the schedules into a schedule table. The schedule data is inserted or updated if the schedule already exists into corresponding tables. A delta file is generated in step  that corresponds to the change in the schedule table. Step  sends a CIS notification. The notification contains a list of content identifiers that were just inserted or updated. After step , steps - are performed as above. If any exceptions are present, step  rolls back the transaction. If no exceptions exist, then the data is committed into the schedule data.","Referring now to , a method for performing step  is set forth. If the content identifier does not exist, the schedule data is inserted into the record in step . The system then ends in step .","Referring back to step , if the content does already exist, step  is performed. In step , if the network affiliate is the same, the record is updated in step . In step , if the network affiliate is not the same, the record is rejected in step . After steps  and , step  ends the process.","Because the CIS core queue is persistence in nature, the message is redelivered for processing at step .","Referring now to , a method of operating the CIS persistence module  is illustrated. The CIS persistence module  includes the message listener , the business fa\u00e7ade , and the CIS JMS utilities  as illustrated in . The CIS persistence module  also includes a CIS content data access object  and a content error data access object . The message listener  is or may be a message-driven bean as described above. However, the message listener of the persistence module  is the subscriber to the CIS core queue . The on message method will participate in a single transaction and when errors occur the transaction will be rolled back. The business fa\u00e7ade  may include a database controller. The database controller may be a stateless session bean that is used to encapsulate the business methods needed by the application clients and exposed through its remote interface. The data access logic may also be hidden from clients.","The data access object holds the logic to access the database. It may hold a one-to-one relation with the database schema. That is, if there are N tables in the scheme, there will be N data access objects. The implementation details may be hidden from the interface. The transactions may be JTA transactions with container-managed transactions. The database connections may be obtained using a data source configuration.","With respect to the operation, an on listener message  is communicated to the message listener module . The message listener module generates an insert CIS content batch signal  and communicates it to the business fa\u00e7ade . The business fa\u00e7ade forward the insert CIS content batch signal  to a CIS content data access object. If an error occurs, a void signal  is returned to the business fa\u00e7ade  which in turn communicates the return or void signal  to the message listener . The object may then be inserted into the schedule table. Signal  is an insert CIS content error batch signal. The error batch signal is used for communicating error objects to the system. The error batch signal  is communicated to the business fa\u00e7ade . The business fa\u00e7ade communicates the error batch signal  to the error data access object. The error data access object receives the signal rather than the content data access object. If an error occurs in the content error batch, a return void signal  is communicated to the business fa\u00e7ade  and to the message listener .","The message listener  may also generate a send CIS notification signal  to the JMS utility . If an error occurs in this process, a return void signal  may be communicated from the JMS utility to the message listener . A success or rollback signal  may be generated at the message listener  in response to the send CIS notification signal  or the return or void signal .","Referring now to , a data model is illustrated for the schedule data that may be provided by the system. The content data box  may include various types of content data but is not limited to a content identifier, a provider content identifier, a site identifier, a network affiliate identifier, a provider creation date, a title, a description, a subcategory, a category, a start publishing date, an end publishing date, a rating, an authorization, a content URL, a creation date, a last update date, and a key. The content block  may have variable size data fields or fixed data fields. A content station block illustrates various content station variables including a content station ID, a station identifier, a TMS identifier, a content identifier, a content station key and the like.","A content category box  may include the content catalog identifier, additional catalog information, a content identifier and a key. The content categories  may be included within or communicated to the content block . An external data program source may be used to provide external data program data  which may include an external data program identifier, a program, a program identifier or a content identifier. One suitable source for external data content is a Tribune Media Services content block. In addition, the external program source  may obtain a Tribune Media Services key.","A content advisory block  may also generate content advisory data. The content advisory data may include a content advisory identifier, a mature advisory, a content identifier and a content identifier key. Various content errors may be identified by a content error block . The content error block may include a content error identifier, a provider content identifier, a site identifier, a network affiliate identifier, an error field identifier, an error value identifier, an error description identifier, and a provider creation date. Content errors may also be provided by the content error block.","The different types of data in  may be formatted into various sizes including variable sized fields. Timestamps may be used where appropriate. Some fields may be numerical or alphanumerical.","Referring now to , the CIS core system  and, more specifically, the CIS persistence module  may be used for communicating data to the entitlement system  illustrated in . The files generated in the persistence module may be automatically communicated to the entitlement system . The CIS persistence module  may include additional modules other than that illustrated in . The CIS full file and CIS delta file, as well as checksum files may be stored within the database  of  and communicated to the entitlement system . The CIS persistence module  may create a full file on every server restart and every day at a predetermined time. The sequence diagram of  illustrates the process for creating a full file.","The CIS persistence module  may include a server startup\/quartz scheduler module  that is responsible for invoking the full file write job on server startup. The module  may be implemented using a JBoss Mbean startup implementation. A quartz scheduler is responsible for invoking the job at a specific time according to a predetermined configuration. A full file write job module  may be a Java object that implements the job interface of the quartz scheduler. The execute method provides the functionality to create the full file when executed at the specific time as configured.","A core fa\u00e7ade  uses container-managed transactions to provide the business functions required by the various clients.","A core processing utility  is used to support the core processing of the CIS system.","The file utilities module  is used to help the CIS core to create and manipulate files.","An event signal  is received at the module . The module  then executes or generates an execute signal  which is communicated to the full file write job . If an error occurs, a return void signal  may be communicated back to the module . The module  may also generate an all active content signal  which is communicated to the core fa\u00e7ade . A hash set signal  that includes the CIS content may be received back from the core fa\u00e7ade to the module .","The module  may also create an entitlement cache object signal . The entitlement cache object signal  may be communicated to the core processing utility . A content collection object  may be communicated under the control of the core processing utility  back to the module .","The module  may also generate a content collection XML string signal  for retrieving the content collection string based on control of the core processing utility. A string signal  may communicate the string back to the module .","The module  may also generate a create CIS file string or signal  which is communicated to the file utility module . The file utility module  may generate a return void signal  if errors occur.","Referring now to , the CIS core system  notifies the entitlement cache that updated or new records have been inserted as part of partner content ingestion. In step , a message is read from the queue. In step , the provider content identifiers are extracted from the message.","In step , the content objects for the providers are obtained. In step , the CIS content objects are converted to entitlement cache objects. The entitlement cache objects may be JAXB objects.","The objects may be converted to XML using JAXB in step . The XML may be converted to strings in step . In step , the XML string is written to a file. It should be noted that XML is an example of a suitable format for the signals. Other formats may be used.","Referring now to , a sequence diagram for the process in  is set forth.","The CIS persistence module  includes the core fa\u00e7ade , the core processing utilities  and the CIS file utilities  as described in . The CIS core system  may also include a CIS notifications listener module .","In step , an on message signal is received at the notifications listener module . The on message signal  initiates a content for content identifier signal from the notifications listener module . The content for content identifier signal  is communicated to the core fa\u00e7ade module . The CIS content may be returned in a hash set signal  to the notifications listener module .","A map to entitlement cache object signal  may be communicated to the core processing utilities module . The content collection signal  may be communicated from the core processing utilities module  to the notifications module .","The notifications listener module  may also generate a content collection XML string . An XML string signal  containing an XML string may be communicated from the core processing utility module  to the notifications listener module .","A create CIS file signal  may be communicated from the notifications listener module  to the file utilities module . If an error occurs, a return void signal  may be communicated from the file utilities module to the notifications listener module.","Referring now to , the entitlement system  has a file share system that is periodically updated with different contents from the external service provider, the primary service provider and other data sources. The entitlement system pools the files periodically and stores them therein. The data files received include schedule data for the content. The files received may be full files, delta files or checksum files whose generation was described above.","The entitlement system  is in communication with an IdP authorization server . The authorization server  is used to authorize various user devices to access various content. The authorization server  may compare the content that the user device has requested access to and an authorized rights list associated with the user. The authorized rights list may include channels or networks that the user device has access to through subscription level.","The entitlement system  may be in communication with the DLS module , the PGWS module A and the content file module . The entitlement system  may also be in communication with the CIS module . The schedule data may be obtained from one or more of these sources.","The entitlement system includes a file publisher  that gathers the various data from the different source systems. The data may be converted to a format such as XML and communicates the XML file to a net application file share storage module  that stores the files therein. This process may be performed periodically. When new files arrive at the net application file share storage, a file processor  pools the files and pushes the content to the entitlement cache . The entitlement cache  provides data to various systems including the authorization server .","It should be noted that the XML files provided in the file share storage may include check sums for verification of the integrity of the file. Prefixes in the XML file may identify the type of file including a delta file, a full up-to-date file and a restart file. The generation of these types of files was described above.","Referring now to , a method for operating the entitlement system is set forth. In step , content details, including but not limited to various content identifiers, network identifiers, category identifiers or other identifiers set forth in , are obtained by the system. In step , an XML is formed with various prefixes that identify the file type. In step , the XML files are communicated to the file share storage. In step , content is pushed from the file share storage to the entitlement cache. This may be performed periodically.","In step , authorization from the entitlement cache is retrieved at the authorization server based on the content identifier, network identifier, or other content details. In step , the user or a user device is authorized based upon the data from the entitlement cache and on an authorization parameter at the authorization server  illustrated in . The authorization server  may compare an authorized rights list to data from the entitlement cache. In response to comparing the authorized rights list to the data for the content requested, authorization or a denial of authorization may be performed.","Referring now to , a method for authorization based upon multiple content program IDs is set forth. In step , it is determined whether a program identifier validation needs to be performed. If a validation for the partner is to be performed, step  uses the program guide web service to authorize based upon a station only. In step , the system ends.","Referring back to step , if the program is not to be validated for a partner, step  is performed. In step , if a content identifier does not exist in the request, step  sends an error response and the system ends in step .","Referring back to step , if a content identifier does exist in the request, step  is performed. In step , the external program source such as TMS program identifier for the content identifier is obtained from the entitlement cache. After step , step  uses the program guide web service to authorize based upon the station and the TMS program ID or list of program IDs. Step  is also performed after step  if a TMS program identifier exists in the request. After step , step  ends the process.","Those skilled in the art can now appreciate from the foregoing description that the broad teachings of the disclosure can be implemented in a variety of forms. Therefore, while this disclosure includes particular examples, the true scope of the disclosure should not be so limited since other modifications will become apparent to the skilled practitioner upon a study of the drawings, the specification and the following claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"DRAWINGS","p":["The drawings described herein are for illustration purposes only and are not intended to limit the scope of the present disclosure in any way.",{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":["FIG. 3","FIG. 3"]},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 16"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 17"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 18"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 19"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 20"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 21"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 22"}]},"DETDESC":[{},{}]}
