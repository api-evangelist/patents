---
title: Communication system and method providing a mode selection procedure
abstract: The invention relates to a method and a communication system comprising at least one first network element connectable to a second network element. At least one of the first and second network elements use one of two or more selectable modes for communicating with another network element. One or both of the network elements, or a third network element, which is connectable with the first and second network elements, performs a mode selection procedure for selecting the same mode for bidirectional communication between the network elements. The modes preferably are different codec types, channel-coding schemes, or radio interface protocol types. The first and/or second network elements may be portable terminal equipments and the third network element preferably is a support node or a means providing a support function such as a CSCF. The mode selection ensures use of one and the same mode, such as a codec, in uplink and downlink directions enabling IP telephony in UMTS using SIP protocol.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07688745&OS=07688745&RS=07688745
owner: Nokia Siemens Networks Oy
number: 07688745
owner_city: Espoo
owner_country: FI
publication_date: 20000814
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF PREFERRED EMBODIMENTS OF THE INVENTION"],"p":["1. Field of the Invention","The present invention relates to a communication system for performing a mode selection by selecting or negotiating the mode to be used, a method to be performed in such a communication system, and to a network element capable of mode selection.","2. Description of the Prior Art","Communication networks transfer information such as user voice traffic or the like, on a packet-switched and\/or circuit-switched basis using modes which may be commanded by the system or negotiated between the involved network elements such as end user equipments. As an example, in planned evolution of networks such as UMTS (Universal Mobile Telecommunication System) systems, additional functions and services can be incorporated. For instance, novel multimedia services, such as multimedia messaging services MMS, are supported within the system which services are IP (Internet Protocol)-based services. Packet-based (e.g. IP-based) service sessions such as multimedia service sessions may be controlled by a specific protocol. As an example, the Session Initiation Protocol (SIP) represents a protocol which may be used for example for call and connection establishment as well as for transport of endpoint capability information. Such capability information may for example relate to voice and multimedia codecs supported by the end terminals.","The functionality and services of such multimedia service systems are mapped onto the existing network system functions, for example of UMTS type. As an example, the system services may be mapped to the PDP contexts and radio signalling, as well as to existing packet-switched core network elements and interfaces, for example of a UMTS type. Hence, there is a problem of multimedia (e.g. IP multimedia) and network layer (e.g. GPRS layer) interactions and mapping.","As an example, in case of VoIP calls (voice over IP-based connection, that is Internet telephony), the radio access network such as GERAN (\u201cGSM\/Edge Radio Access Network\u201d) and UTRAN (UMTS Terrestrial Radio Access Network), may be informed of the type of application for deciding of the header adaptation method to be used for example a particular PDP context. As an example, two different header adaptation schemes available for selection can for example be \u201cheader compression\u201d and \u201cheader stripping\/removal\u201d. The header stripping\/removal mode may be used for speech-only traffic where for example optimized speech transport is required for instance for integrated lower-end terminal devices. A header compression mode may be utilized for example for more general IP multimedia traffic including voice application operation on an external device such as a laptop computer connected to a UMTS phone.","When an inappropriate mode such as inappropriate protocol mode, header adaptation mode or radio access bearer mode are selected, problems in incorrect message transmission may occur.","A communication system, and\/or a method to be performed in a communication system in accordance with the invention, comprises at least one first network element connectable to a second network element via one or more packet-based networks. At least one of the first and second network elements provide two or more selectable modes for communicating with another network element. A mode selection procedure is performed (for example by one or both of the network elements, or by a third network element connected to the first and second network elements), for selecting the same mode for bidirectional communication between the network elements. The selectable modes preferably are different codec types, or may be conversion modes of other type, or radio interface protocol types or channel-coding schemes etc.","The first and\/or second network elements may be portable terminal equipments. The third network element preferably is a support node or support function.","In a preferred embodiment, a protocol mainly used for other purposes but also capable of providing a messaging service, preferably an IP-based multimedia messaging service, is used for sending information on supported or selected modes to and from the network elements. The protocol may be the Session Initiation Protocol (SIP). SIP is a multimedia session establishment & control protocol, that is a control protocol for realtime multimedia.","Preferably, the network or networks connecting the first and second network elements is\/are UMTS-based network.","In one embodiment, the first network element may send information on one or more modes supported by the first network element to the third network element which performs the selection procedure and sends information on only one or more than one but not all supported modes to the second network element which sends an acknowledgment message to the third network element confirming the support of the selected, or one of the selected modes, the third network element sending a message to the first network element informing the latter on the selected mode. This is one difference between a preferred embodiment of the invention and the usual SIP operation. Usually there is no negotiation between the used codecs etc. but both elements include information on their own capabilities in the SIP messages. Here, a selection and a specific usage of the information fields etc. is proposed.","In another embodiment, the first network element may send information on one or more modes supported by the first network element to the third network element which requests the second network element to send information on the supported modes, the second network element returning a list of supported modes to the third network element whereupon the third network element performs the selection procedure and sends messages to the first and second network elements informing these network elements on the selected mode.","In a further embodiment, there are the following steps: a) the first network element performs the selection procedure when initiating a connection to the second network element, and sends information on one mode supported by the first network element to the second network element; b) The second network element, when supporting the mode, returns an acknowledgement message, or, when not supporting the mode, returns a message indicating another mode supported by the second network element, to the first network element; c) The first network element selects this mode for further communication when supporting it, or, d) when the first network element does not support the mode indicated by the second network element repeats the steps a) to d) selecting another mode.","In a further embodiment, the first network element, when initiating a connection to the second network element, sends information on all modes supported by the first network element to the second network element. The second network element performs the selection procedure and returns a message indicating the selected mode to the first network element, the first and second network elements selecting the indicated mode for further communication.","The first network element and\/or second network element and\/or third network element preferably send information on the selected mode to a radio network control means. The information on the selected protocol mode may for example be sent as part of a negotiation procedure related to packet data convergence protocol, or in an Activate PDP Context message. The information on the selected mode preferably contains an additional flag indicating the application type. It is possible to send only the application type and no other information.","The information on the selected mode preferably contains additional information on the header processing such as header compression or header stripping\/removal.","Generally, in accordance with the present invention, a selection procedure is provided for performing a mode selection, preferably when establishing a connection between two network elements. This mode selection such as protocol selection ensures that the bi-directional communication between the network elements is performed in a defined manner such as use of the same mode in uplink and downlink direction.","As an example, such a mode selection is able to ensure that for example the radio access bearers in an UMTS network use and support the same codec type (for example AMR (Adaptive Multi-Rate), GSM FR (Full Rate), GSM EFR (Enhanced Full Rate), etc.) at the same time, and use the same, i.e. only one, codec type in uplink and downlink directions. In some cases such as AMR, there might otherwise be provided different codec modes in the uplink and downlink directions. The codec information may be used to select the appropriate radio interface protocol modes including an appropriate channel coding scheme for voice traffic.","The use of the same codec in both directions guarantees that the channel coding for the corresponding radio bearer of a PDP (Packet Data Protocol) context is appropriately and correctly selected so as to be the same in both directions. As at least one PDP context is necessary for carrying the voice traffic, an appropriate radio bearer is selected so that UMTS IP telephony can be performed (VoIP) without problems.","An advantage of the invention is the possibility to enable for example SIP operation on top of an UMTS radio access network architecture and bearers. Apart from the fact that the new information on selected mode and application type provided to the radio access network is already a sort of change of the existing network architecture, no other changes of existing radio access networks such as UTRAN or GERAN for any actual or future definition such as 3GPP Release 2000 are necessary for solving the above mentioned problems. The invention therefore provides a solution for IP telephony on UMTS.","The solution according to the invention can be implemented as a proprietary mechanism or function, or can be a standardized mechanism or function.","In accordance with a further aspect of the invention, a network element is provided, preferably to be used in a method or communication system as described above, the network element performing a selection procedure for selecting one of several modes supported by this or another network element. The modes may be different conversion modes, in particular coding\/decoding modes.","Further aspects, advantages and details of the invention are be described by referring to the attached drawings which disclose preferred embodiments of the invention.","Before describing some embodiments of the invention in more detail, several general aspects and features of the invention will be discussed. In connection set-up, some protocols such as the call establishment procedures of SIP (Session Initiation Protocol) allow negotiation and usage of several codecs from end-to-end, that is between the call originating element and the call terminating element. Further, such protocols may also allow the use of different codecs in uplink and downlink directions. Due to the selection procedure performed in accordance with a preferred aspect of the invention, IP telephony applications in networks such as UMTS of third generation type can be used on top of the UMTS radio access networks (RANs) without interfering with the functionality of the system and with minimum changes of the system. Hence, correct functioning can be ensured also in such cases.","When using for instance SIP, the caller may send a set of supported codecs to the callee or to a third network element. The callee may also send a set of supported codecs to the caller or to the third network element. After the call-setup, when sending VoIP packets, the invention may be used to guarantee that the caller uses one of the codecs supported by the callee and the callee uses one of the codecs supported by the caller, and that these used codecs are the same for the callee and the caller. Otherwise, when not performing a mode selection procedure for selecting e.g. only one and the same codec for the bidirectional communication, the sender might dynamically select a codec from the set of codecs supported by the recipient when sending data to the latter so that different codecs might eventually be used. Furthermore, the used codec might be different in different directions.","In accordance with preferred implementations of the invention, several alternatives are disclosed. According to one aspect, a terminal equipment (network element), e.g. a UMTS phone, or the network, e.g. the UMTS network, functions so as to ensure that always only one codec type is used in each direction, and further that this codec type is the same in both directions. This may be achieved in one or both terminal equipments such as UMTS terminals by mandating support for specific codec(s) in all cases and\/or by defining that only one codec can be announced to the other endpoint as supported codec.","Furthermore, the behaviour of the callee is defined in such a manner that the call terminating equipment selects, if possible, the same codec as the one announced by the call originating equipment. When failure of the call terminating equipment occurs in selecting the same codec as the one announced by the call originating equipment, the call terminating equipment preferably selects a codec which is mandatory in systems of the third generation (3G systems), and announces this codec to the call originating equipment. The call originating equipment supports the announced codec as it is a mandatory one, and assumes at this point that the call terminating equipment uses the same codec also in sending data, and will therefore adjust its behaviour accordingly.","In accordance with another alternative embodiment of the invention, a further solution is provided. In the network such as the UMTS network, a control means (third network element) decides on the codec to be used and handles the selection procedure and the necessary messages to be sent to the call originating and terminating equipments. This control means may for example be the CSCF (Call State Control Function) of the network and\/or may e.g. be the proxy CSCF in the visited network such as PLMN (Public Land Mobile Network) in the case of a roaming subscriber, and\/or the home CSCF in the home network for example PLMN of the subscriber.","The control means can render the decision on the codec to be used by both the call originating and terminating equipments. In the preferred implementation, the codecs supported by the call originating equipment are included in a specific message such as the Invite message of SIP. After receiving the Invite message, the control means such as CSCF can select one of the codecs, for example perform the mode selection procedure, and can modify the Invite message so as to include only the selected codec before forwarding the Invite message to the call terminating equipment. The call terminating equipment is adapted to acknowledge receipt the Invite message by sending an acknowledgement message such as 200 OK message of SIP, only if it supports the single codec indicated in the Invite message as selected by the control means. It is possible to send an acknowledgement message also in the negative case, for example, giving negative acknowledge or including the supported codecs by the call terminating equipment.)","The selection procedure performed in the control means such as CSCF may be based for example on the operator preferences. As an example, when the operator prefers to use AMR, the selection procedure selects AMR from a set including FR, HR and AMR. Another example is a case when a transcoder pool is used. In such a case, the operator may optimize the usage of the transcoders. In the latter case, the decision and selection is preferably made in a control means of the visited network, that is in a visited network element such as for example in the proxy CSCF.","Furthermore, location information of the user may be taken into account when deciding on the codec to be used. For example, if the base station subsystems (BSSs) in different parts of the network\/country are for example based on different product releases and for this or other reasons prefer different codecs, or for reasons of transcoder pool optimization, the codec selection procedure may take account of such parameters.","A further alternative approach implemented in another embodiment of the invention is the selection of the codec by a control network element such as CSCF after having received information on all codecs supported by the call originating equipment (for example in an Invite message) and on all codecs supported by the call terminating equipment (for example in the 200 OK message of SIP). After having received both the messages, the control means knows both codec sets supported by the call originating equipment as well as by the call terminating equipment. The control means then performs the mode selection step by selecting one codec supported by both call originating and terminating equipments either by arbitrarily or by reference to a priority list ranking the codecs according to the priority assigned by e.g. the network operator or service provider.","After selecting the codec to be used by both call originating and terminating equipments, the selected codec is sent to the call originating equipment in a further message such as a 200 OK message of SIP generated by modifying the 200 OK message received from the call terminating equipment, and to the call terminating equipment in another message such as a ACK message of SIP.","When the codec to be used has been selected, at least one network element, in particular a control element such as the radio network controllers or base station subsystems controlling the radio access to the call originating and\/or call terminating equipment, have to be informed on the selected codec. This informing of the network control elements can be performed in several alternative ways which are listed below in the preferred order.\n\n","When an application type indication (for example application type flag) is included, the information on the application type is transmitted from the call originating or terminating equipment (for example Mobile Station MS) or from the call control means (for example CSCF) because these entities are, in an UMTS network, the only entities having enough information about the services and applications running on top of the PDP contexts. The header compression is preferably set as the default operation if the application type is not known or indicated in the message. The header stripping\/removal is preferably used for optimized speech transmission when only voice traffic is carried in the PDP context.","The necessary application information is preferably received through internal application programming interfaces (APIs) of the call originating and\/or terminating equipments (the internal APIs being arranged between the applications\/services), the SIP layer and the UMTS\/GPRS layers. Header stripping\/removal is preferably used only with an integrated UMTS SIP terminal. It may also be provided from a laptop computer to a UMTS phone in a case where the terminal equipment (TE) and the call originating and\/or terminating equipments are separate devices. The application type indication, such as a flag, may for example have the following explicit values: \u201cheader compression\u201d, or \u201cheader stripping\/removal\u201d, or \u201capplication type\u201d (for example value: voice) which indicates that stripping\/removal is to be used.","In the following, details of a first embodiment is described with reference tio .  shows a terminal network element  which is termed \u201cUE (User Equipment) Caller\u201d and requests the establishment of a connection to another network element . The network element  thus represents a call terminating equipment and is termed \u201cUE Callee\u201d. The network comprises a further network element  which is a connection control element and is implemented as, or provides, a call state control function (CSCF). When the network element , such as a MS (Mobile Station), desires to establish a connection to the terminal network element , it sends, in this embodiment, a message to the CSCF  informing the latter on the desire to establish a connection to the terminal equipment element  which message contains information on all codecs supported by the network element , that is the call originating equipment. This message may be an Invite message of the connection protocol, preferably SIP. This Invite message contains a list of codecs supported by network element .","The CSCF element  performs a mode selection procedure which, in this embodiment, is a codec selection procedure  selecting one of the codecs supported by equipment . This codec selection  may be based on preference or priority parameters contained in CSCF , or may be dependent from the type of application desired by equipment  such as pure data transmission, pure voice over IP transmission, and the like.","After performing the codec selection procedure , the CSCF  further transmits the Invite message to the user equipment  with the message now only including the codec selected by the codec selection procedure . The user equipment , which may likewise be a mobile station or a stationary equipment, performs an internal check whether it supports the codec indicated in the received Invite message. If yes, the user equipment  returns an acknowledgement message to the CSCF  (preferably a 200 OK message in SIP) which message repeats the selected codec for confirmation of its support by user equipment . The CSCF  transmits this acknowledgement message to the user equipment  (200 OK (selected codec)) in SIP.","When receiving this message, the user equipment  uses only this indicated codec for uplink and downlink links. In a similar manner, user equipment  uses only the selected codec for uplink and downlink traffic, that is for radio access between user equipment  and the radio access controlling means such as RCP (Radio Network Controller). The radio network controllers handling the radio access to the user equipments  and  is likewise informed on the selected codec using one of the above-mentioned methods as an example, and adapts their operation mode accordingly.","When the user equipment  should not support the selected codec indicated in the Invite message received from CSCF , it preferably sends a message to CSCF  informing the latter on lack of support of the selected codec. Thereupon, the CSCF  repeats the codec selection procedure  but now selects another codec different from the first selected codec, and sends this newly selected codec in a message such as an Invite message to user equipment . When this codec is supported by user equipment , it returns the 200 OK message, otherwise the above steps are repeated until a codec is selected which is supported by the user equipment .",{"@attributes":{"id":"p-0048","num":"0050"},"figref":"FIG. 2","b":["4","2","2","1","3","3","3","3"]},"This list may contain all codecs supported by user equipment , or may indicate only those codecs which are also supported by the user equipment . In the latter case, the user equipment  receives, in the Invite message from CSCF , a list of the codecs supported by the user equipment , and performs a comparison of codecs supported by user equipment  and codecs supported by user equipment , selecting only those codecs which are supported by both user equipments  and . In the former case in which the list returned by the user equipment  includes all supported codecs, the Invite message sent from CSCF  to the user equipment  may not contain any indication of codecs supported by user equipment .","The CSCF  selects, by the codec selection procedure , one of the codecs supported by both user equipments  and , and then sends messages to both user equipments  and  informing them on the selected codec for use thereof during the subsequent connection. The message addressed to user equipment  may be a message 200 OK of SIP indicating the selected codec. The user equipment  may return an acknowledgement message to the CSCF  acknowledging the receipt of the 200 OK message and eventually repeating the selected codec. The CSCF  may forward the acknowledgement message received from user equipment  to user equipment  after adding (if not already included) an information indicating the selected codec.","The embodiment of  contributes to a very quick selection of a codec supported by both user equipments.","All explanations, features and advantages stated above with regard to the first embodiment are also applicable with regard to this second embodiment (unless being in contradiction to the above explanations), and also for the subsequently discussed embodiments 3 and 4.","The embodiment shown in  is different from the above discussed first and second embodiment in that the codec selection procedure  is performed by and in the user equipment . After having performed the codec selection depending on the intended application (voice transmission, non-real-time traffic or the like, or depending on other parameters, the user equipment  sends a message, such as an Invite message, to the user equipment  via the CSCF , indicating the selected codec. The user equipment , when supporting the selected codec, returns, via CSCF , an acknowledgement message which may be a 200 OK message indicating the selected supported codec.","In case user equipment  does not support the selected codec, the repetition of the codec selection procedure , including the transmission of the related messaging, is repeated, as already stated above with regard to the first embodiment (with the exception that the code selection procedure  is repeated in the user equipment  and not in the CSCF . All other explanations given above with regard to the first and second embodiments likewise apply to this third embodiment.",{"@attributes":{"id":"p-0055","num":"0057"},"figref":"FIG. 4","b":["4","3","1","2","3","1","1","3","4","1","3","4","3","1","2","1","2","1","3"]},"As shown in  (the procedure shown in  is preferably common to all the earlier embodiments of the invention), a radio access controller such as RNC , in charge of radio access control to user equipment , is informed by user equipment  on the selected codec, and preferably also of the application type by sending an application type flag indicating for example \u201cheader compression\u201d or \u201cheader stripping\/removal\u201d. This information can be sent when performing the PDCP negotiation  but may also be sent in a separate message. In a similar manner, the user equipment  informs its radio access control element such as RNC  in charge of radio access control to user equipment  by sending a message  to RNC . This message indicates the selected codec and may also contain, if known, an application type flag.","This informing of the radio access control elements  and  in charge of the radio access to and from the user equipments  and , respectively, is likewise applicable to all above described first to third embodiments in identical manner.","Although preferred embodiments have been described above, the present invention is not limited thereto and covers also all modifications, amendments, additions and deletions of features within the abilities of a skilled man. As an example, the mode selection procedure has been described with reference to the codec selection but may also consist in a conversion modes selection of other type, a protocol selection procedure or the like."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 4"}]},"DETDESC":[{},{}]}
