---
title: System and method for digital video management
abstract: A digital video management system which provides live digital video signals from a number of cameras to a number of client terminals, via a computer communications network, in real time. The system stores live video signals in response to a video recording trigger which may be either a schedule, an event, or an operator action. The invention is particularly suitable for use in integrated security and process control environments.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07859571&OS=07859571&RS=07859571
owner: Honeywell Limited
number: 07859571
owner_city: New South Wales
owner_country: AU
publication_date: 20000814
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATION","FIELD OF INVENTION","BACKGROUND","SUMMARY OF INVENTION","DETAILED DESCRIPTION"],"p":["This is a Section 35 U.S.C. 371 application from PCT Serial No. PCT\/AU00\/00967, filed Aug. 14, 2000.","The present invention relates to digital video management systems, and, in particular relates to a digital video management system which provides live digital video signals from a number of cameras to a number of client terminals, via a computer communications network, in real time.","The invention has been developed primarily for use with digital cameras in integrated security and process control environments, and will be described hereinafter with reference to these applications. However, it will be appreciated that the invention is not limited to use in those fields.","The provision of streamed video data from a transmission point to viewing or monitoring computers is dominated by internet broadcasting systems. Examples of this technology include NetShow\u2122 by the Microsoft Corporation and RealVideo\u2122 by RealNetwork. Due to the relatively limited bandwidth presently available to most users of the internet, these broadcast systems rely strongly on the use of high level compression algorithms. Some systems rely on compression standards such as those defined by the various Motion Picture Experts Group (\u201cMPEG\u201d) standards. In other cases, proprietary standards have been developed that better suit the compression requirements of live, or at least streamed, video.","Other fields in which streaming video, generally, has been of interest are those of industrial control and automation, and security and access control. A typical example is a casino, in which intensive surveillance can use over 1,500 cameras monitored by a team of, say, 6 operators. Currently, these highly visually intensive applications utilise analog, full bandwidth video and, as required, audio. Any recording that takes place is implemented on analog or digital video recorders, the tapes or other recording media then being archived for a predetermined length of time to ensure that they are available if required. Unfortunately, archiving of video-taped data in this way is unappealing because it requires an entire dedicated analog recording and replay system for multiple channels of video. Moreover, location and replay of a particular time or event associated with one or more cameras can be inconvenient due to the need to retrieve specific tapes and to fast forward and rewind the tapes manually to locate a particular entry points.","In addition traditional CCTV systems rely on large, expensive matrix switchers connected via expensive video cabling to bring CCTV monitoring to operators. Integration with security systems is reserved for the top end of the market. These systems have been largely inflexible because installing and commissioning a new camera or operator monitor is expensive, time consuming, and can involve significant construction works.","A significant constraint of the traditional CCTV system is the method of recording video to VCR tapes. These devices allow read and write operations, but not at the same time. So if a user wishes to view a recently recorded event they must halt any current recording and rewind the tape before being able to view the incident. The only traditional CCTV solution to this problem was a complex method of switching recording to standby VCRs that resulted in recordings being spread across several tapes.","Typical analogue systems are centred around a matrix switcher which provides camera switching and control for the system as shown in . There are inherent disadvantages with this architecture as follows:","Firstly, star cabling configuration using application specific coaxial cabling. This is inherently inflexible and costly in that if an additional camera or monitor is required, a dedicated cable needs to be installed that connects back to the matrix switcher.","Secondly, significant hardware real estate is required for such matrix switcher equipment.","Thirdly, such architectures provide limited recording capability which is restricted by the length of VHS tape. By way of example, a typical recording configuration would be to connect  cameras to a multiplexer, which in turn is connected to a video recorder that records in time lapse mode for 24 hours.","The 16-input multiplexer is capable of real time (25 fps in PAL format) recording overall. With 16 cameras being recorded simultaneously, each camera is recorded at approximately 1.5 fps, when recorded on a VCR tape in non time-lapse mode. Using a four hour VCR tape in 24 hour time lapse mode, this frame rate decreases by a factor of 4\u2014recording is now at a rate of one frame every four seconds.","Fourthly, cameras cannot be individually configured with different recording frame rates.","Fifthly, the only way to improve the frame rate is to reduce the number of cameras or the duration of recording. This of course means either adding further VCRs (with a consequent increase in multiplexers, cost and control room real estate) or increasing the frequency of tape changes (which creates more labour for those responsible and an increase in storage space required.","Sixthly, recording and playback of a tape cannot be done simultaneously. To view a tape that is being recorded, the tape has to be stopped, rewound and played.","Finally, due to the mechanical components of a VCR, maintenance requirements are high.","A feature of streamed internet-based video is that the compression algorithms used to minimise bandwidth introduce a delay. The delay can be fixed or variable, depending upon the implementation, and can extend to many seconds in duration. Moreover, internet streaming video transmission standards usually emphasise coherency of sound at the expense of video coherence, since humans are more susceptible to information loss through interrupted speech than the loss of a few frames from full motion video. For example, both NetShow and RealVideo are tuned to give priority to the audio stream over the video stream. This is ideal for content such as news broadcasts, where maintaining an unbroken audio stream is of greater relative importance to human comprehension than the quality of the associated video stream. However, in the security and process control field, movement can be considerably more important than sound. For example, a criminal may take less than a second to break a window. If several frames have been dropped to cope with relatively low available bandwidth, then the crime can be missed. This makes NetShow, and RealVideo and similar products designed for internet video streaming unsuitable to the security and process control markets.","Another issue is that internet broadcasting of live events does not need to be absolutely live. In particular, the audience will not be aware if an event has been delayed by a few seconds. Both NetShow and RealVideo take advantage of this fact to delay broadcast so that the respective systems can determine whether a video stream to be transmitted can further be compressed. For this reason, both products introduce a delay in the order of several seconds.","By contrast, in a process control environment, video is often used to confirm operator control. For example, an operator in a control room can use visual feedback from a video camera to enable him to remotely control pouring of steel. It will be appreciated that any delay between the event occurring and the corresponding video reaching the operator controlling the event can be dangerous.","Similar principles apply to security. A prison guard remotely opening a door needs to know immediately if an escapee is hiding behind the door. Delays of several seconds in this situation are unacceptable.","It is an object of the invention to overcome or at least substantially ameliorate one or more of the disadvantages of the prior art.","In addition, the present invention has a number of non-limiting advantages, as follows:","Firstly, it provides tight integration with Honeywell's Enterprise Buildings Integrator (EBI) software to provide significant ease-of-use. The ability to view live and recorded video from the same operator stations as used for the security management, including new and future stations is a significant advantage. The ability to use any event in the system as a trigger for video recording provides you with the ultimate in flexibility and the association of video to system alarms makes it relatively simple for the user to investigate incidents.","Secondly, it is flexible. Because the present invention transmits compressed video signals via the network it easy to move existing cameras and install new cameras. New CCTV monitors only require a PC with suitable software and a network connection.","Thirdly, it is cost-effective. By utilising industry standard TCP\/IP networking, the present invention can share network structures with other corporate groups thus significantly reducing the ongoing cost of CCTV system support. This also means that the cost of adding or relocating cameras is greatly reduced since access to a network connection is generally far easier than having to install dedicated cabling back to a matrix switcher. Further, the present invention works with standard, open, PC and network components and so allows customers to choose their desired components. And since pan\/tilt\/zoom (PTZ) control can be performed from EBI, no costly matrix switcher is required.","Fourthly, the system is open. The present invention uses non-proprietary hardware to create an open surveillance system. This openness means that a user's initial investment is protected and that the system can be cost effectively expanded at a later date to easily handle additional cameras, incorporate new technology, or to handle changes in building use or configuration.","Fifthly, it is scalable. Because of it's revolutionary architecture, the present invention is capable of supporting both small and large installations of CCTV cameras.","Sixthly, it provides significant user security. The present invention contains operator security features previously only available in high-end security systems like Honeywell Enterprise Buildings Integrator (EBI). Security managers can therefore ensure that individual users are controlled in what they can see and what they can do.","Seventhly, the system enables intelligent recording. The combination of event activated, user activated and scheduled recording means that the user only needs to record the video they want. This not only optimises the use of their storage resources, it means that they don't need to spend endless hours searching for recorded incidents.","Eighthly, it includes an advanced search capability. The present invention's search capabilities use the latest database technologies to ensure the user can quickly find and view any incident.","Ninthly, the system provides advanced archiving so the user never loses the important data. Data is written to DAT tape or other storage media for long-term storage. Users can specify how long each individual section of video will be retained.","Tenthly, it provides smooth playback. The format of recorded video on traditional CCTV systems does not have a time base. This means that the playback speed of incidents tends to vary based on how busy the recording machine is. The recorded video will show a person walking across a field of view at a constant rate as slowing down and then hurrying. By using time indexing when storing video, the present invention is able to replay incidents as they occurred\u2014not in fast or slow motion.","According to a first aspect of the present invention, there is disclosed a digital video management system including:","a video server;","a plurality of cameras; and","at least one client computer terminal, all linked via a computer communications network, wherein said video server receives video signals from said cameras, and provides said video signals to said client, via said network.","Preferably, said server provides one or more of:\n\n","to said client in real time.","Preferably, one of said cameras is a recording camera providing live video signals to said video server via said network and wherein whilst said video server is receiving those live video signals from said recording camera it simultaneously provides to any client:\n\n","According to a second aspect of the present invention, there is disclosed a method of managing digital video using a digital video management system including:","a video server;","a plurality of cameras; and","at least one client computer terminal, all linked via a computer communications network, wherein said method includes the steps of:\n\n","According to a third aspect of the present invention, there is disclosed a system for low-latency remote video monitoring of one or more areas or processes of interest, the system including:","a plurality of cameras positioned respectively at or adjacent the areas or processes of interest, each of the cameras outputting a video signal;","interface means connecting the cameras to a computer communications network, for placing the respective video signals onto the computer communications network;","a first computer server connected to a computer communications network, for accepting the video signals from the interface means; and","at least one computer terminal connected to the computer communications network for selectively monitoring one or more of the video signals via the first computer server.","According to a fourth aspect of the invention there is provided a digital video management system including:","a plurality of cameras for providing respective first video signals to a computer communications network;","a video server for linking to the network, receiving the first video signals and being responsive to a predetermined schedule for storing on storage media associated with the server at least some of the first video signals, wherein the server selectively","accesses the stored signals and\/or the first video signals to provide second video signals;","at least one client computer terminal for linking to the network for providing the predetermined schedule and for receiving the second signals.","Preferably, the predetermined schedule includes a plurality of time based trigger points and the server stores the first images starting at a first predetermined period prior to each point and a second predetermined period after each point. More preferably, the predetermined schedule includes a plurality of event based trigger points and the server stores the first images starting at a first predetermined period prior to each point and a second predetermined period after each point. Even more preferably, the system includes a sensor for providing a third signal to the network, wherein one of the event based trigger points comprises the third signal falling within a predetermined range.","Preferably also, the predetermined schedule includes a plurality of time based trigger points and the server stores the first images starting at a first predetermined period prior to each point and a second predetermined period after each point. More preferably, the first and the second predetermined periods are configurable based upon one or more of: on a per camera basis; on a per area basis; on an event type basis.","In a preferred form, the duration of the first and the second predetermined periods are configurable.","Preferably, the system includes a plurality of client terminals and a controller for controlling the second signals that are provided to respective terminals. More preferably, the terminals provide over the network respective camera control commands to the video server and the video server processes those commands and generates control signals that are sent to the relevant camera via the network. More preferably, the processing of the commands by the video server includes a determination of whether or not the terminal sending the respective command has access rights to the relevant camera.","According to a fifth aspect of the invention there is provided a digital video management system including:","a plurality of cameras for providing respective first video signals to a computer communications network;","a video server for linking to the network, receiving the first video signals and storing on storage media associated with the server at least some of the first video signals, wherein the server is responsive to a plurality of client account records for accessing the first signals and\/or the stored signals to selectively produce a plurality of second video signals; and","a plurality of client computer terminals corresponding to each client access record, the terminals being linked to the network for requesting and receiving respective second signals.","Preferably, at least some of the client account records are changeable via the respective client computer terminal. More preferably, the client account records include data indicative of the one or more first signals and\/or stored signals that the server is responsive to when producing the respective second signals.","Preferably also, the client account records include data indicative of one or more predetermined triggers. More preferably, the trigger is one or more of: a predetermined time; a predetermined interval; and an event. Even more preferably, the event is predicated by a transducer that provides an event signal to the video server via the network.","Other aspects and features of the invention will become apparent from reading the following detailed description of preferred embodiments in conjunction with the attached drawings.","Referring to the drawings, and the embodiments shown in  in particular, a system for low-latency remote video monitoring in one or more areas or processes of interest includes a plurality of cameras . Each of the cameras  is positioned respectively at or adjacent an area or process of interest (not shown).","Interface means in the form of respective camera streamers  connect the cameras  to a computer communications network in the form of a TCP\/IP network . In the preferred embodiment, the TCP\/IP network takes the form of an ethernet connection, although any suitable local area network (\u201cLAN\u201d), wide area network (\u201cWAN\u201d) or remote communications network such as the Internet can be utilised.","A first computer server, hereinafter referred to as video server , is connected to the TCP\/IP network  by a means of a suitable interface. The interface can take the form of a network interface card (now shown) installed within the video server  to enable data to placed onto and removed from the TCP\/IP network  by the video server .","Also provided is a computer terminal in the form of a client computer , that is also connected to the TCP\/IP network  for communication therewith. As with the video server , a suitable interface means is provided to enable the client computer  to place data on, and remove data from, the TCP\/IP network .","In the preferred embodiment, both the video server  and the client computer  take the form of IBM-Compatible personal computers (\u201cPCs\u201d). In that case, it is preferred that the video server  use the Microsoft NT operating system, whilst the client computer  can use Windows NT, Windows 9X or Windows 2000, for example. It will be appreciated that other operating platforms, such as a Sparc-stations or Macintosh computers, and different operating systems, such as Unix or the Macintosh OS can be used, depending upon the application or existing network arrangement.","The cameras  can be based on any suitable television format or resolution, including black and white, NTSC colour, PAL colour or S-CAM colour. Typically, the output from each camera will take the form of an analog output from the cameras, supplied directly to their respective camera streamers . However, cameras with compressed or uncompressed digital outputs can also be used.","Each camera streamer  receives the analog signal from its respective camera  and converts it to a predetermined digital format, which is then packetised into a suitable TCP\/IP format. The packetised data is then placed onto the TCP\/IP network .","In one embodiment, the packetised data streamed onto the TCP\/IP network  is in a compressed format. The compression can take place in a number of ways. For example, the camera  itself can digitise and pre-compress the video stream, thereby to avoiding the need for the corresponding camera streamer  to digitise or compress the video. Alternatively, the camera streamer  can itself perform compression of the digitised video. The compression can be of any suitable form, including any of the MPEG standards. However, a standard that is configured specifically to smooth streaming of video data standard, is more desirable. Examples of suitable compression schemes and standards will suggest themselves to those skilled in the relevant art.","Referring to , there is shown an architecture of both the video server  and the client computer . The video server  includes software modules including a camera manager , a software video player, both operating on a Windows NT server platform. In the embodiment shown, the video server  also includes storage means in the form of a hard disk drive  for storing the streamed video taken from the TCP\/IP network . It will be appreciated that the hard disk drive  can either be on the same physical computer as the other software components, or can be placed on a different physical computer connected by the same TCP\/IP network .","It will be appreciated that suitable software video players will suggest themselves to those skilled in the art.","The client computer  includes an operating system in the form of Windows 2000, an internet browser in the form of Internet Explorer V5 , and a video player in the form of a software video player  for interfacing with Internet Explorer V5 . It will be appreciated that many of the other features discussed in relation to the preferred embodiments are implemented in other software modules, the implementation of which will be readily appreciated by those skilled in the art.","During normal usage, each of the cameras  is powered up, and directed at an area or process of interest. For example, one or more of the cameras  can be concerned with security, and might therefore be pointed at an entrance to a building or within a foyer. Alternatively, cameras  can be positioned to view critical points in production processes to allow the operation thereof to be monitored.",{"@attributes":{"id":"p-0127","num":"0132"},"figref":"FIG. 6","b":["26","10","26","22","20","10","2","26","12","12","10","22","8"]},{"@attributes":{"id":"p-0128","num":"0133"},"figref":["FIG. 6","FIG. 8"],"b":["10","2","24"]},"In the preferred embodiment, other information regarding the video stream is sent to the software video player  and HMI client by the camera manager . For example, details such as the camera status (eg. whether the streaming video selected is currently being recorded), the operator currently in control of the camera and the expected duration for which the present operator will remain in control.","At an arbitrary time, usually in response to an incident shown in the streaming video, the operator can request that the currently displayed video be recorded. This is achieved by pressing the record button  on the front end of the HMI client . In response to pressing the record button , the software video player  sends a request to record video to the camera manager , as shown in . The camera manager  in turn causes the video stream from the active camera to be recorded onto the hard disk drive . In the preferred embodiment, information regarding the record request, such as the camera name, the name of the user requesting the recording and the time of recording are also written to the video server database. Once recording of the video is no longer required, the user can press the stop button  on the front end of the HMI client . Preferably, at this stage, further information such as the duration of the recorded video, is also written to the hard disk drive .","In a particularly preferred embodiment of the invention, and as shown in , one or more controllers  are connected to the network for communication with the system . The controller can take the form of, for example, an interface for one or more sensors, such as PIR detectors, smoke sensors, card readers or any other security or condition detecting transducer. The controller takes the output from the respective transducers and converts them into a suitable TCP\/IP protocol to be placed on the TCP\/IP network .","In the usual implementation of the invention, a security or process control server  is provided. Examples of suitable servers are the Plantscape and EBI servers, both developed and licensed by the applicant. It will be appreciated, however, that the security or process control server may need to be modified from its standard form to interface correctly with the video server. As shown in the embodiment of , the security or process control server  can share a physical computer with the video server . However, as shown in other embodiments such as those of , the security or process control server  is desirably run on separate computer hardware.","The security or process control server  is configurable by an operator to monitor the controller , and any other controllers of interest. In the event of an alarm or the detection of any other event preselected by the operator of the security or process control server , an event handler  instructs the camera manager  on the video server  to commence recording. In the preferred form, the camera manager  has access to data setting on the association between one or more cameras  and the event or alarm indicated by the event handler . In this case, the camera manager  selects the appropriate camera or cameras  and causes the video streams they provide to the network to be recorded to the hard disk drive .","In each of the recording cases, it is desirable that the option be provided to set a video buffer of some predetermined length. For example, by setting, say, a ten second video buffer, recording of a particular video stream in response to either operator command or an event notification from the event handler  results in the recording of ten seconds worth of video prior to the recording being requested. This to enables an operator reviewing the recorded video to ascertain conditions or events prior to that causing the recording to be effected. Moreover, since the event will usually have happened immediately before recording commences, the buffer enables the event itself to be recorded for later review.","Another way in which recording can take place is by means of scheduled recordings, as best shown in the block diagram of . An operator can schedule a record request through a schedule manager  accessible via the front end of the HMI client . The schedule manager  is responsible for recording the request in an appropriate form, and then requesting that the camera manager  commence recording at an appropriate time.","The schedule manager  is a process running on the video server. It polls the video server database periodically (every minute in the preferred embodiment) and caches a list of record requests for that minute. Since, in the preferred form, schedule recordings are accurate to within one minute, this list will simply contain the names of cameras  that require video capture. The recordal requests for these cameras  are sent to the camera manager , which writes the appropriate video streams onto hard disk drive . Relevant details about the recorded video will also be written onto the database by the camera manager , as discussed above.",{"@attributes":{"id":"p-0137","num":"0142"},"figref":"FIG. 14","b":["38","38"]},"administration and scheduled recording requests;","scheduling archiving of video files; and","scheduling deletion of video files from archives.","The schedule manager  queries the server database each minute for recording requests that occur in the current minute (or in previous minutes where they are not marked as underway or complete). The schedule manager  informs the camera manager  to start recording for each recording request due in that minute. In the preferred form, the schedule manager  also provides the camera manager  with a camera identification code, a required frame rate and a recording duration.","Each hour, the schedule manager  queries the database for any video files where the archived date has passed and where a \u201cDoArchive\u201d flag is set. The \u201cDoArchive\u201d flag ensures that video clips that are of immediate or on-going interest are archived, to ensure that they are available in the future. The schedule manager  then instructs an archive manager module  to archive each file in its list. The status of the file is then updated to \u201cArchiving in Progress\u201d until the archiving operation is complete.","Also each hour, the schedule manager  queries the database for any video files whose delete date has passed and for which a \u201cDoDelete\u201d flag is set. Again, the \u201cDoDelete\u201d flag ensures that only those files that are intended to be deleted are in fact removed from the database. The schedule manager  then requests that the archive manager  delete each of those files for which deletion is scheduled in the current hour.",{"@attributes":{"id":"p-0144","num":"0149"},"figref":"FIG. 16","b":["40","38","12","38","40","12"]},"In response to archiving request, the archive manager  queries the video server database for the duration of the video data in which the archiving request is interested. If necessary, the video segment will be stripped from the physical video file on disk and copied to a separate file for archiving.","This may occur if, for example, a physical video file contains two or more overlapping video events that have different archiving requirements. A file may contain a period of scheduled recording that is due to be archived, whilst an event that needs to remain accessible on-line occurs in the middle of the recording. In this case, the physical video file is split into two, with the video on either side of the event being stripped from the on-line file and copied to a separate file for archiving. The video server database is then updated with the new file locations for each video clip affected. The archive manager  then instructs Windows NT 5 Removable Storage Manager to mount an appropriate media. The Window NT 5 removable storage manager is well know to those skilled in the art, and so is not discussed in detail.","An alternative embodiment of the system shown in  is shown in . In the  embodiment, features in common with those of the  embodiment are indicated with like numerals. The  embodiment differs from the  embodiment in a number of ways. The first of these is that the video server  is hosted on a separate computer from the other process control or security server . The system is implemented like this for a number of reasons, but is particularly concerned with enabling the video server  to service a greater number of cameras. Another major difference is the provision of a network bridge  linking a first segment  and a second segment  of the TCP\/IP network . The cameras  and the video server  communicate directly with the second segment , whilst the client computers , the process or security server , and various transducers  communicate with the first segment . It will be appreciated by those skilled in the art of network design that this arrangement limits the network traffic generated by the various video signals from the cameras  to the second segment . The only video signal data that will reach the first segment  is that which is supplied from or directed by the video server to one or more client computers , in response to requests from those client computers  or alert conditions.","Another, still more complicated embodiment is shown in , in which there is shown an implementation having integrated facility management (security, etc) and process control. In this case, the video aspects of the system are integrated with process control, security and image processing. Again, network bridges  are used to link first, second and third segments (designated ,  and , respectively) of the TCP\/IP network . The various client machines  are able to access the facility management server , the process control server  and the various video servers , depending upon the access rights granted to their respective operators.","The use of multiple video servers  allows for a correspondingly larger number of cameras. Larger networks and installations requiring more cameras can be implemented simply by scaling the number of video servers and network segments. Naturally, there will be some restrictions on the ultimate size of the network and the number of servers and cameras. These restrictions will be appreciated by those skilled in the art.","In the  embodiment, image processing is implemented on a separate image processing computer  connected to the TCP\/IP network . The types of processing undertaken are selected on the basis of the requirements of the system as a whole. For example, video related to perimeter management can be processed for image recognition purposes. Preferably, the image recognition data is recorded with the video details on the video database.","The image recognition data can also be supplied to the security or process control servers and used as inputs to their software routines or at least recorded as part of security logs. If, for example, a camera is used to inspect visitors approaching a reception area, the image processing computer  can be used to attempt to recognise each visitor. The resultant data can be used in many ways. It can be forwarded to the security server to ascertain whether the person has security access, or if there is a pending security issue related to that person. A comparison can be made with other security access data, such as entry codes and the use of security cards and transducers, to ensure consistency between the person's appearance and their identity as evidenced by other security devices and procedures.","Image recognition can also be used to process video from specific process control environments. The processed video can be, for example, colour or contrast filtered, sharpened or blurred, in any combination, and the output used as an input to the security server. In this way, process conditions and alarm notifications can be raised based on the processed video. The conditions and notifications can also be based on combinations of existing feedback data used in security management and process control.","In the preferred form, the output of the image processing computer  is in the same format as that of other camera streamers .","The following paragraphs provide a further description of a number of the more significant features of the preferred embodiment of the present invention.","Live video can be viewed at full motion and with insignificant compression delay from any EBI client.","Camera PTZ control is available from any EBI client using either a standard Windows pointing device such as a mouse or touch screen, or with a commercial joystick for greater user feedback.","Video recording can be activated by one or more of:\n\n","Tight integration with EBI allows alarms and events from those systems to activate video recording on the present invention. Video associated with the alarms and events can include video recorded prior to the alarm or event so that a user can see to what caused the incident as well as the aftermath. The alarm and event management capabilities of EBI bring a previously unavailable power of alarm and event condition determination to CCTV video recording.","Time indexed video storage ensures smooth playback and accurate retrieval.","Archiving to both single tape units and sophisticated robotic multiple tape units ensure that only important video is marked for long term storage, and that it is subsequently never lost.","User security assists users to perform their jobs efficiently and within their areas of expertise and authorisation.","Quad views allow a user to look at up to four cameras at once. The individual cameras within the quad view can be cycled to other cameras so that there are no limits on the number of cameras that can be viewed.","Multiple Monitor Support allows a user to view and control multiple video monitors from a single keyboard\/mouse\/joystick. With this feature you can create an advanced security control room, to run your surveillance operations.","EBI custom schematics allow live video to be inserted in custom schematics on EBI systems using the Honeywell Display Builder.","The network-based architecture of the present invention brings multiple benefits. It allows the system to leverage existing network investments, making the present invention both cost-effective and flexible. Processing power is moved to the camera and the client thus allowing the Video Server to support more cameras at a previously unavailable video quality.",{"@attributes":{"id":"p-0166","num":"0174"},"figref":"FIG. 22"},{"@attributes":{"id":"p-0167","num":"0175"},"figref":"FIG. 23"},{"@attributes":{"id":"p-0168","num":"0176"},"figref":"FIG. 24"},"The following paragraphs provide a further detailed description of the system design of the preferred embodiment of the present invention. Throughout the following description the preferred embodiment of the present invention is referred to as the \u201cAvalon\u201d system.","In this description, the following acronyms have the following meanings:",{"@attributes":{"id":"p-0171","num":"0179"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"168pt","align":"left"}}],"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":["ACRONYM","MEANING"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["ASP","Microsoft Active Server Page"]},{"entry":["HMI","Human Machine Interface"]},{"entry":["HSC","Honeywell Software Centre"]},{"entry":["IE","Microsoft Internet Explorer"]},{"entry":["IIS","Microsoft Internet Information Server"]},{"entry":["NT","Windows NT Operating System"]},{"entry":["ODBC","ODBC. Open Database Connectivity. An open"]},{"entry":[{},"standard for database communications"]},{"entry":["RDS","Remote Data Service"]},{"entry":["MTS","Microsoft Transaction Server"]},{"entry":["ADO","ActiveX Data Objects"]},{"entry":["fps","Frames per second"]},{"entry":["ABO","Avalon Business Objects"]},{"entry":["COM","Component Object Model"]},{"entry":["DCOM","Distributed Component Object Model"]},{"entry":["RSM","Removable Storage Manager"]},{"entry":["ONV","Opennet View"]},{"entry":["PTZ","Pan-Tilt-Zoom"]},{"entry":["SQL","Structured Query Language"]},{"entry":["SCAN 3000","Supervisory Control and Networking System"]},{"entry":[{},"developed by HSC"]},{"entry":["XSM","Excel Security Manager system developed by HSC"]},{"entry":["XFi","Excel Facility Integrator system developed by HSC."]},{"entry":["IPS","Integrated Personal Station. Suite of GUI applications"]},{"entry":[{},"developed by HSC for use with SCAN 3000\/XSM\/XFi."]},{"entry":["RTU","Remote Terminal Unit. Device abstraction used in"]},{"entry":[{},"SCAN 3000\/XSM\/XFi as a container for points."]},{"entry":["API","Application Programming Interface"]},{"entry":["PAD File","Point Address Definition file. Used to store lists of point"]},{"entry":[{},"addresses for points which have been built using the"]},{"entry":[{},"point build utility."]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},{"@attributes":{"id":"p-0172","num":"0180"},"figref":"FIG. 25","ul":{"@attributes":{"id":"ul0009","list-style":"none"},"li":{"@attributes":{"id":"ul0009-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0010","list-style":"none"},"li":["(a) Serving up the web pages to the Avalon web site;","(b) Video Schedules; and","(c) Hosting the Business Object in MTS."]}}}},"The Web Server plays another role as the Primary Camera Manager. All connections to Cameras are via the Primary Camera Manager that resides on the Web Server. The effect of this is\n\n",{"@attributes":{"id":"p-0174","num":"0187"},"figref":"FIG. 25","i":"b "},"Information regarding the video stream is propagated by the camera manager. This includes details such as the camera status (e.g. whether video is currently being recorded), the operator currently in control of the camera and for how long the operator will remain in control.","All Camera status events are passed via the Camera Status object.","Recording Video. There are three methods of recording video:\n\n","User Activated Recording. Referring to the block diagram illustrating User Activated Recording shown in , it can be seen that pressing the \u201cRecord\u201d button on the active video player (within the HMI) will send a request to record video to the camera manager. The camera writes the video stream to the Data Storage Device. Information regarding the record request such as the Camera Name, User Name of the user who requested the recording and the Recording Time will also be written to the Data Server. After video is recorded, further information about the recorded video such as the duration of recorded video is also written to the Data Server.","Event Activated Recording. Referring to the block diagram illustrating Event Activated Recording of  it can be seen that when a PlantScape or EBI point that requires video capture goes into alarm, the host server will invoke an event handler process. In one embodiment this is an application process activated via the normal LRN method.","The event handler process will send a record request to the Camera Manager. The camera will write the video stream to the Data Storage Device. Information such as \u201cPoint ID\u201d and \u201cHost Name\u201d will also be sent to the Camera Manager. This information is recorded along with other details of the recorded video to the Data Server.","Scheduled Recording. Referring to the block diagram illustrating Scheduled Recording of , it can be seen that a user can schedule a record request via the HMI. These record requests are entered into the database. It is the Schedule Manager that is responsible for notifying the Camera Manager that a recording is to take place.","The Schedule Manager is a process running on the Web Server. It polls the database every minute and caches a list of record requests for that minute. Since scheduled recordings are accurate to the minute, this list will contain the names of cameras that require video capture. The record requests for these cameras are sent to the Camera Manager and the Camera Manager writes the appropriate video streams to the Data Storage Device. Relevant details about the recorded video are also written to the database by the Camera Manager.","Viewing Recorded Video. Referring to the block diagram illustrating the Viewing of Recorded Video in , it can be seen that the viewing of recorded video is essentially the same process as viewing live video except that the Camera Manager obtains the video stream from Disk Storage Device instead of the camera source. The Video Player requests video by sending details such as \u201cCamera Name\u201d, \u201cClip Date\/Time\u201d to the Camera Manager. The Camera Manager then reads the clip from the Disk Storage Device and streams the video stream to the requesting client via a point-to-point TCP\/IP connection.","Video Recordings can be access from the Recordings tab for a Camera or via the Searching. Both these pages contain a Grid Control that displays all the relevant recordings. The Grid control is populated by Business Objects and RDS.","Changing Camera Settings. Referring to the block diagram illustrating the Changing of Camera Settings of  it can be seen that modifications to data in the camera settings page or the recording presets page will commit the new changes immediately. Prior to updating the information, the business objects will check the viability of the new changes. If there is a conflict in the new changes, the business objects will report an error to the client and no changes are committed. If the new settings do not produce any conflicts, the business objects will write the new changes to the video server database. The Camera Manager is notified of the change.","Security Integration. Each component in the system requires correct launch and access permissions to other components in the system for it to work correctly and to deny permission to clients which do not have authority to use the system. To do this, the system components are tightly integrated with NT, MTS and SQL security.","All HMI clients which require access to the Avalon system must be in the \u201cDVS Users\u201d NT group. The business objects only provide launch and access permissions to these users. In practice, the \u201cDVS Users\u201d group will contain users in the domain.","The business objects will in turn run as \u201cDVS Manager\u201d which is an NT user who has access to the database. The SQL Server database will use integrated security and only allow access to the database to users in the group \u201cDVS Database.\u201d \u201cDVS Manager\u201d is one of these users.","Camera Manager and Schedule manager both require access to the database and therefore run as \u201cDVS Manager.\u201d The EBI components run as \u201cmngr\u201d and also require access to the Avalon database. Hence \u201cmngr\u201d is in the \u201cDVS Database\u201d NT Group.","When business objects are instantiated from client script on a web page using the RDS.Dataspace object, their credentials are passed to the web server and then to the business objects. Hence, from the business objects point of view, the identity of the person who accessed it is the user logged on to the client machine.","This is the same for server scripts only if NT Challenge\/Response authentication is used. If we allow anonymous access, the web server will act as IUSR_machinename. If IUSR_machinename is not in the \u201cDVS Users\u201d NT group the operation will fail.","To provide security at the business objects level, the \u201cDVS Users\u201d MTS role is created. This role will only contain the \u201cDVS Users\u201d NT Group.","In a similar way, SQL will have a \u201cDVS Users\u201d role which will only contain the \u201cDVS Database\u201d NT Group.","The following paragraphs describe the functions performed by each design component (block) identified in the preceding paragraphs.","Client. The client consists of the following components:\n\n","Human Machine Interface (HMI). The Human Machine Interface (HMI) is preferably implemented as a series of web pages. Its main function is to provide a graphical user interface to the core aspects of the Avalon project. It is through the HMI that users can:\n\n","The web pages that form the HMI also serve as a container for ActiveX controls such as the tree view control and active video player.","The underlying components in a web based application is the web server (Internet Information Server) and the client browser (Internet Explorer). This structure is shown in the HMI System Block diagram of . As seen in that figure, the layout of the HMI may be broken down into four sections: a navigation section, a header details section, a tab section and a main frame. This is depicted in the block diagram of . As illustrated, the navigation section provides the user with the ability to navigate to different functional areas of Avalon. It consists of a main menu broken down into submenus depending on the functionality.","The navigation frame also houses the active tree view control used to navigate through the existing cameras. The tree view control displays a list of available cameras that the user may select to view. This tree control also indicates whether a to camera is in one of three states:\n\n","The preferred menu and submenu options available in the navigation frame are detailed in the table of .","Header Details. The header details section provides details about the page the user is currently viewing. These details could also include details about a camera, a camera group or camera tour if these were selected.","Main Frame. The main frame comprises of web pages that provide the interface to the functionality of Avalon. These pages change depending on the selection made by the user in the navigation frame.","The main frame preferably includes web pages that provide functionality to:\n\n","Live Video. The live video page contains a single video player with functionality to allow a user to:\n\n","To disable a camera, the HMI contacts business objects which in turn ask the camera manager to disable a camera. When a camera is disabled, there is no streaming of live video and any associated recordings at that time will cease. When the user re-enables a camera, it is up to the HMI to initiate a request to the database manager to reconnect to the camera.","Camera Settings. When a user modifies the camera settings for a camera and clicks on \u201cupdate,\u201d the effects of the changes occur substantially immediately. If the change in camera settings require resetting the camera streamer, such as the case of changing the video quality, it is the responsibility of the business objects to inform the camera manager of the changes and the camera manager will reconnect as required. Any current recordings is lost. Scheduled recordings will continue once the camera manager has reconnected the streamer.","Camera Groups. There is a display configured with four Active Video players. Each of these Video Players is configured to display live video for a particular camera. Each video player can also be configured to cycle camera connections.","The HMI provides the Active Video Player with the cycling timing and camera information.","Schedule Recordings. The schedule recording display provides functionality for a user to schedule a recording for a particular camera.","Schedule recordings may be marked as recurring. In one embodiment, if a user selects 9 am to 10 am on Monday and selects the daily option for 5 days, then a schedule is placed from Monday to Friday for 9 am to 10 am. If the user selects weekly for 5 weeks, then a schedule is placed on Mondays  am to 10 am for the next 5 weeks.","If a user decides to delete a schedule that was created as recurring, then he has the option to delete all related schedules or just the individual one.","Internationalisation. All text that appears on the Avalon web pages is preferably retrieved from the video server database. This includes all field labels, text within combo boxes and any other \u201cfloating\u201d text that may be required on the web pages. Each piece of text will have a specific ID on the web page which is used to locate the place in which a text string is to be inserted.","For example, an ASP page may contain a field with an ID called lblCameraName. Server side scripts will call the business objects to obtain the corresponding text for this field which could be \u201cCameraA\u201d. This piece of text may be in any language that is supported by the SQL database. It is up to server side scripts to fill the HTML elements with the obtained piece of text. In effect, all ASP pages is a skeleton of HTML elements. Server side scripts will construct the web page through calls to the database manager.","Video Player Control. The Video Player is an ActiveX control responsible for\n\n","The architecture of the Video Player is detailed in the block diagram of . There it can be seen that the Video Player control is a composite control that is composed of the following controls\n\n",{"@attributes":{"id":"p-0216","num":"0268"},"figref":"FIG. 44"},"Control and Information Panes. The Active Video player is a combination of a Video Viewing Window and two control and information panes. The control and information panes are\n\n","Video Player\u2014Live. The Active Video Player is able to display live video by enabling the Live Video Pane. The following is displayed:\n\n",{"@attributes":{"id":"p-0219","num":"0281"},"figref":"FIG. 30"},"Video Player\u2014Playback. The Active Video Player is able to display video clips by enabling the Live Video Pane. The following is displayed:\n\n","The Playback pane contains:\n\n","When the Play button is pressed, Online Video is streamed for the current date\/time location for the configured time frame. Video playback will continue until:\n\n",{"@attributes":{"id":"p-0223","num":"0292"},"figref":"FIG. 31"},"Video Player Events. The Video player is required to notify it's container when specified events occur. This is done by generating Windows Events.","Camera Cycling. The Video Player is able to display a configured number of live cameras one after the other. The length of time each camera is displayed is called the cycle time. There is one cycle time per camera cycle list.","If a camera to be displayed is disabled, the camera is displayed for 1 second. A frame is displayed indicating that the camera is currently disabled. The next camera in the cycle list will then be displayed.","Video Window Control. The Video Window Control performs the following:\n\n","Rendering Engine. A rendering engine displays the video file in the Video Player Control. The Camera Streamers often supply the video stream in proprietary file formats (known as a CODEC). A different rendering engine is preferably used for each supported CODEC.","Event Viewer Control. This control displays the following information:\n\n","This control provides the following control ability:\n\n","The Event Viewer control is only visible when the Active Video Player is configured to display stored video for a single camera.  is a screen dump of a client display screen showing the preferred Event Viewer Control.","Only clips whose recording events are contained within the searched time frame are able to be played. If a pre-record portion of the clip is prior to the start of the frame, or the recording continues past the end of the frame, these sections will not be able to be accessed.","Joystick Client. The joystick client forms part of the camera control subsystem. The joystick client software will physically reside on the HMI client PC. It is responsible for interfacing to the joystick and sending the joystick commands to the Camera Manager on the Avalon server. If appropriate, the camera manager will forward the request to the camera control subsystem. This is shown in the block diagram of .","PlantScape\/EBI Server.","Event Activation. The event activation subsystem will upon an event:\n\n","The Event Activation task is an EBI\/PlantScape application task and hence will reside on the EBI\/PlantScape server machine. The interaction of the Event Activation task with it's surrounding subsystem is shown in the block diagram of .","The activation mechanism in one embodiment of the present invention is via the use of algorithms. In EBI, Algo71 is used to request the Event Activation task when an access point changes states and Algo92 is used when a status point changes state. In Plantscape, Algo71 will request the Event Activation task when a status point changes state. There is no corresponding algo for access points in Plantscape.","When the point changes state, the appropriate algo will call the Event Activation task passing parameters that are configured when the point was point built. Because it is not possible to configure different task request parameters for different states of the points. The same camera record action will occur irrespective of the state of the point.","The Event Activation task will then instruct the camera manager to record the camera video, and optionally cause a station (or all stations in an area) to switch to the camera view. The event description for the event that initiated the event activation is also passed to the camera manager. This will allow the camera manager to raise an audit message in Avalon. The Event Activation task will also place an event in the event file in Plantscape\/EBI.","Security System Functionality. The security system is responsible for providing security information that resides in the EBI or Plantscape server database. Information that it provides include:\n\n","From this information, the Avalon components can decide whether a user can have access to certain functionality provided by Avalon.","Cameras are assigned areas. When a user logs in, information about the access privileges of that user decides how the active tree control is constructed. Any camera not within the user's list of areas will not be displayed.","The control level of a user determines whether or not a user has PTZ capability enabled for certain cameras.","The security level of an operator governs the actions that a user can carry out. These include whether or not a user can:\n\n","A more concise description of the permissions available for a given security level is shown in the table of .","Configuration Page. A display page is built to configure the URL of the Avalon Video Server. This value is stored in a Plantscape\/EBI user file. This value is used in the configuration of pages that contain navigation buttons to navigate to the Avalon displays.","Video Server.","Video File Structure. Each video clip is stored as a sequence of 1 or more segments. A segment contains a sequence of images (frames), and inter-frame timing information. The format of each frame is dependent on the source of the video stream. For example, if a clip was recorded from an Axis streamer, each frame is in JPEG format. A segment also contains indexing information that allows the location of a particular frame to be rapidly located. For example, playback may be required from 10 seconds into the segment. Indexing provides the file offset for the first frame of the playback.","The index information and the video content of a segment are stored in 2 separate files. This is so that during recording of a segment, information can be written to the 2 files simultaneously. Playback of a segment may begin while the 2 files are still being written.","A segment can be referenced by one or more clips. This reduces the amount of physical storage required for a number of clips that overlap in time.  is a block diagram which shows an example of the many-to-many relationship between clips and segments. This relationship is described in a number of tables in the Avalon database.","Camera Manager. The Camera Manager is responsible for the following functionality of the Video Server:\n\n","Camera Streamer Connections. The Camera Manager manages the connections to the Camera Streamers. This involves both connection and disconnection requests. The Camera manager is able to simultaneously stream multiple video streams.","The Camera Manager makes a connection to the Camera Streamer device at system startup or when the camera in enabled. If there are no configured pre-record times, the connection frame rate is at 1 fps. If there are pre-record times greater than 1 fps, then these is used.","Enable\/Disable Cameras. A camera is able to be enabled\/disabled via the HMI. When a camera is enabled, the camera manager will:\n\n","Recordings initiated by a user or a Plantscape\/EBI event will not be restarted when a camera is enabled.","When a camera is disabled, all operations being performed on the camera are cancelled immediately. This includes any form of recording and streaming.","Live Video Streaming. The Camera Manager Streams Live Video upon the first connection request by a client. Streaming is achieved via Multicasting. The Camera Manager receives frames from the Camera Streamer and then re-broadcasts the frames. This broadcasting will stop when no clients are viewing the Camera.","Stored Video Streaming. The Camera Manager receives requests from Clients to play stored video. If the video to be played is not online, then a request is made to the Archive Manager to load the video from archive.","Stored Video is not multicasted. Multiple clients are able to view and control the same piece of video simultaneously without affecting each other.","Video Recording. Live Video Recording can be initiated by the following:\n\n","Video is recorded to files to be stored on the Video Server.","The camera manager will add a record in the Video Clips table.","Camera Control Reservation. The Camera manager is responsible for coordinating control of the PTZ functionality.","Camera State Object. The Camera State is a COM Automation object implemented in a DLL. This object is used by the HMI and Video Player to retrieve state information about cameras. The HMI and Video Player should not retrieve this state information directly from the Camera Manager.","The Camera Manager sends multicast datagrams whenever an event occurs, such as the change in state of a camera. The Camera State object listens for these datagrams, and raises a COM event describing the camera event.","Multicast datagrams are not reliable. That is, there is no guarantee that datagrams will arrive at their destination, and there is no guarantee that datagrams will arrive at the destination in the same order that they were sent. Therefore, the Camera State object and Camera Manager implement a simple protocol to allow for lost and out-of-order datagrams. This protocol is described in the Camera Manager Software Design.","Camera Control. The camera control subsystem provides a means of controlling PTZ (Pan\/Tilt\/Zoom) capable cameras through the Avalon HMI or a joystick. Communications to the camera is via a camera streamer. The interaction of the camera control with the surrounding subsystems is shown in the block diagram of .","The Avalon HMI client and the Joystick client issue camera control commands to the Camera Manager. The Camera Manager is responsible for handling priority and reservation requests. The Camera Manager may choose to deny camera control functionality to a client, for example if the camera is currently being controlled by another user on another client machine. If permission is granted, the request is forwarded to the Camera Control subsystem. Camera control will then issue the necessary commands to the camera streamer to control the camera head.","Configuration information for the camera control subsystem is stored in the Avalon database and provided to the camera control by the Camera Manager when it is created and initialised.","The table of  details the superset of camera operations. However, the actual supported functionality is dependent on the camera type.","PTZ commands can be either step or continuous. Step PTZ commands will PTZ the camera a fixed increment while continuous PTZ commands start the camera PTZing, no stop command is sent. It is up to camera control to decide which type of PTZ movement it will execute.","The Continuous PTZ function is used by the joystick for PTZ movement. It either does continuous PTZ or returns an error if continuous PTZ is not supported.","Video Server Database. The video server database is preferably implemented on the MS SQL Server 7 relational database manager. All database access is via the Avalon business objects which use ADO to access the database.","All text data in the database is stored as a datatype that supports 32 bit Unicode characters. This will allow the HMI to store internationalized strings in the database.","Referring to  there is shown is a functional block diagram illustrating the Schedule Manager. The Schedule Manager runs as a Windows NT Service and is responsible for all scheduled operations in Avalon.","The schedule manager has two main functions:\n\n","Scheduled Recording Requests. On start up of the Service, the Schedule Manager queries the database to determine the record schedules that are currently active (i.e. should be currently recording). A record request is sent to the Avalon Camera Manager for each of these schedules, and each of the associated cameras is instructed to begin recording immediately.","The Camera Manager is responsible for recalculating the record duration depending on the actual start up time relative to the scheduled start time of the recording.","The Schedule Manager will then periodically run at the boundary of every minute and start record schedules that are due to start since the last time it ran. The Schedule Manager will inform the Avalon Camera Manager to start recording for each recording request due. The Schedule Manager provides the camera manager with the Schedule ID.","Scheduled Deletion. At the boundary of every minute the Schedule Manager queries the database for any video clips whose DeleteDateTime has passed. A request is made to the Camera Manager to delete any such clip.","Other. If the recording and deletion operations take greater than 50 seconds (i.e. the poll period) to run, then the Schedule Manager will query the database for any missed schedules and run these immediately. This event however, is unlikely to occur.","Archive Manager. Archiving of video is preferably performed using the Windows2000 Remote Storage subsystem. This subsystem allows the operating system to move files from disk to tape on a least recently used basis. The file still appears as a normal file in the file system and is accessible using normal file access methods. The operating system will automatically restore the file to disk when it is accessed. Since this may take some time, the camera manager will check the status of a file before opening it and will warn the user if a file is currently on tape. If a file is on tape and that tape is not present in the system, the camera manager will generate a request for the user to load the correct tape.","Logging. There are two mechanisms in Avalon for logging of events and actions:\n\n","The Audit Log provides a means for other subsystems to log user or system events to a common storage. Typically these are run time operational events. The engineering log is used for engineering, diagnostic and debugging type information.","Audit log messages are structured in format, this allows them to be sent to the event file in EBI\/PlantScape. While Engineering log messages are unstructured text strings.","The maximum size of the audit and engineering log is configurable in the database. When a log message is added that would cause the log to exceed it's maximum size, the oldest message is discarded.","Audit Log. The audit log subsystem provides a means for other subsystems to log user or system events to a common storage. Some of these events may be forwarded onto the PlantScape or EBI for inclusion in their event file.","Avalon subsystems such as the camera manager and camera control send audit messages to the Audit log subsystem. These audit messages are then inserted into a log table in the Avalon database. Configuration information in the Avalon database will determine whether this information is also forwarded to EBI\/Plantscape for inclusion in its event file. The block diagram for the Audit Log subsystem is shown in .","In alternative embodiments, the audit log provides the framework for implementing audit trailing.","Engineering Log. The engineering log is functionally similar to the audit log but is used for engineering, diagnostic and debugging type information. Engineering messages is free format messages ie unstructured text strings. The log can be written locally or remotely via DCOM. This allows a client machine to log locally or to send its log messages to a central Avalon log file. The block diagram for the Engineering Log subsystem is shown in .","Avalon Business Objects. The Avalon Business Objects (ABO) are responsible for the management of data access by the user through the HMI and other Avalon components. It contains application specific logic related to the data services required by Avalon. These data services may be broken down into the following functional areas:\n\n","Wherever possible the business objects will use stored procedures to perform its tasks. However, there are cases where straight SQL queries are performed in the business objects. Since a major portion of the business objects functionality involves the use of disconnected recordsets, updating of these recordsets are performed by calling the UpdateBatch method on the ADOR recordsets. This method cannot be called on recordsets retrieved by stored procedures.","HMI Specific. This is mainly concerned with the retrieval of information required to display the Avalon web pages. This includes retrieving field labels and text, combo-box text fields and text used to construct the Active Treeview Control, header text and menu items from the database. All text which appear in a web page is obtained through the business objects.","Camera Specific. This includes data services required to retrieve and update the camera settings for a particular camera. It also includes the functionality to delete a camera from the database and any associated fields. This may involve a cascade delete. Likewise, the addition of a new camera into the database will form part of the camera specific data services.","Other functionality required include retrieving and updating any record settings associated with a camera and checking that the settings are viable. This includes all user activated record settings, event activated record settings and scheduled record settings. Notifications of the changes to the camera manager will also be part of the business object's services.","The business objects may also request that a camera be disabled or enabled.","Recorded Video. This includes any data access functionality required to access recorded video in a database. This also covers the searching of recorded video in the database based on the search fields a user entered in the HMI.","The submission of deletion dates into the database of which the schedule manager is to respond to when the time arrives will also be done by the business objects.","Camera Group. This includes the database access functionality associated with camera groups. This includes any data access required when creating new camera groups, editing camera groups or deleting camera groups.","Point Control. The point control component controls a Plantscape\/EBI point to a controlled state using the Network API. This component resides on the Video Server. The server name is obtained from the Video Server Database.  is a block diagram illustrating Point Control.","For each block, identify which functions described in the specification is performed by the block, and the proposed or preferred methods of implementation.","Interface Description. The following paragraphs describe each of the interface types used to connect design components (blocks) discussed in the preceding paragraphs.","HMI.","HMI Interface to Business Objects from Server-side Scripts. The HMI obtains all HMI related data from the video server database via the business objects. When a user navigates to a certain web page, the server side scripts instantiate a business object and obtain relevant information to build the web page. This includes obtaining all field labels, text within combo boxes and any other text that may appear on the web page. Server side scripts construct the web page based on the information stored in the database.","The component interaction in this case is depicted in .","HMI Interface to Business Objects from Client-side Scripts.  shows the component interaction for the case where client side scripts creates the Avalon business objects. In this case, HTML elements are bound to a datasource specified by the RDS.DataControl object. The instantiation of the business objects is done by the RDS.Dataspace object. This object uses HTTP to communicate (pass recordsets) to the business objects. Access to the Video Server Database will still be via ADO.","HMI Interface to the Active Video Player. The HMI is a container for ActiveX controls and this is how it is able to display video from the camera streamer. It is the Active Video Player which request connection to the camera streamer via the camera manager and displays the video that was broadcast onto the LAN. The HMI is able to capture events from the Active Video Player and client side scripts will respond to them accordingly. This interaction is shown in .","The HMI does the following:\n\n","Video Player Control. The Active Video player provides the following interfaces:\n\n","Video View Window Control.","Camera Control. The camera control is preferably implemented as a C++ classes.","To create a camera control object, the Camera Manager will firstly create a CheadConfig and a CstreamerConfig object using configuration values from the Avalon database. These objects contain configuration information for a camera head and camera streamer respectively. Camera Manager then calls to CCameraBuilder::NewCamera( ) passing the CheadConfig and CstreamerConfig object. A CameraHead object is returned by NewCamera. This object is used by camera manager to control the camera.","Event Activation. As the event activation mechanism uses algo92 and algo71, the parameter block that is passed to the Event Activation task is used.","In order to switch the station view, the camera no. and station no.\/area are sent to the display system. The station no.\/area identifies the station(s) to switch and the camera no identifies the camera to view. The URL of the Avalon Server is obtained from the Avalon User File.","In order to record video, the camera no., pre-record time and post record time are sent to the camera manager. For audit logging purposes, the point number, point state and event description are also sent.","Camera Manager. The Camera Manager is preferably implemented by 3 COM objects. They are:\n\n","The rationale behind implementing the Camera Manager as 3 objects is to allow for a system architecture with multiple Video Servers. A single Video Server may be configured to manage a subset of all the cameras. In this architecture, to create a new Camera object instance, a referral object is used to locate the correct Video Server, and to create the new instance on that server. The GetCamera( ) method in the CameraManager object fulfils this role. The location of the Camera object instance is transparent to the clients of the CameraManager and Camera objects.","Schedule Manager. The Schedule Manager does not receive requests or messages from any other Avalon subsystem. Task timing is handled internal to the schedule manager using Windows NT system calls.","Logging.","Audit Log. The audit log process provides all other subsystems in Avalon with a way of writing an audit log message to a common storage. This log message may be forwarded to EBI\/Plantscape for inclusion in their event file depending on Avalon configuration details. This is implemented as a function that can be called by other subsystems.","Engineering Log. The engineering log process provides all other subsystems in Avalon with a way of writing a log message to a common storage. The engineering log process is similar to the audit log process. This is implemented as a COM object.","The Engineering Log object HWDVSLog exposes one interface EngLog. This interface exposes three methods\u2014LogMessag, LogCErr and LogNTErr.","Avalon Business Objects. The business objects preferably have interfaces that allow client browsers and other Avalon components to access its functionality. They preferably also have interfaces to the SQL video server database.","Client stations (web browsers) can access the business objects either by server side scripts on Active Server Pages (ASP) or by HTTP from client side scripts. Data access is achieved through ADO. Other Avalon components requiring database access will obtain a COM interface to the business objects. In this case, the transport method is DCOM.","The business objects are implemented as an ActiveX DLL. It is composed of COM objects that reside in the ActiveX DLL which is in turn registered in the Microsoft Transaction Server. The reason for including these objects in MTS is that MTS provides a robust environment for multi-user support. MTS provides an infrastructure that efficiently manages system resources such as threads, processes and connections. It also manages object instantiation, execution and deletion.","In , the interaction of the business objects with the video server database, other Avalon components and the HMI are shown. This diagram depicts the case whereby the business objects are instantiated by server side scripts in ASP web pages. The business objects access the Video Server Database via the ActiveX Data Objects (ADO). Other Avalon components may also call methods on the business objects by obtaining a COM interface to it.",{"@attributes":{"id":"p-0327","num":"0440"},"figref":"FIG. 35"},"Security System Interface. The security system is implemented as a COM object residing in the EBI\/Plantscape server machine. Client machines communicate with it via DCOM as shown in .","Before a web page is loaded, the security settings of the user that logged into the Plantscape\/EBI machine are firstly investigated. The station number is sent to the video server when the web page is processed. Server side scripts create business objects on the server machine which in turn checks the security settings. This is done by querying a local copy of the area assignment information stored in the Avalon database. This information is updated each time a user logs into a client machine by a call to the security object in the OnOperatorChange script on the client machine.","The tables which the Security system accesses on the Plantscape\/EBI server are:\n\n","Each of the elements of the present invention are preferably implemented using the following Platforms and software:","Video Server:\n\n","Client: The client is preferably a workstation with the following software installed:\n\n","PlantScape Server. The PlantScape Server is based on PlantScape Release 300.","EBI Server. The EBI Server is based on EBI Release Bronte.","The following paragraphs provide a further detailed description of the preferred embodiment of the present invention.","Video Integration Functionality. The following paragraphs describe the video integration functions which the invention performs.","The video integration functionality is preferably implemented through a HMI running on a client PC. The Client PC is connected to both the video server and a PlantScape\/EBI server.","The video integration functionality can be divided into:\n\n","The list of cameras and functions available to a user is dependent on the security privileges assigned to that user by the PlantScape\/EBI system. All users must first connect to either a PlantScape or EBI server before being allowed access to the to video integration HMI.","The HMI preferably operates within the standard Honeywell Station Release 320 environment. To support the video HMI the station preferably:\n\n","Live Video. The live output from cameras can be viewed through a series of displays. These support:\n\n","Users can select a camera from a tree control listing the cameras available to the user.",{"@attributes":{"id":"p-0344","num":"0476"},"figref":"FIG. 6","ul":{"@attributes":{"id":"ul0081","list-style":"none"},"li":{"@attributes":{"id":"ul0081-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0082","list-style":"none"},"li":["(a) Navigation panel linking to other Avalon functionality;","(b) Title bar showing the camera name and description;","(c) Tabs for live output, settings, recording and schedule details;","(d) A video object displaying live camera output;","(e) A list of preset positions (if the camera type supports this functionality). Selecting one of these positions will cause the camera to automatically carry out the necessary PTZ motions to show the position;","(f) The ability to define preset positions. The preset position has a 20-character description;","(g) Details of any other user currently in control of the camera (and how much longer they will have control). Users of higher security levels are able to take control of the camera at any time (if relevant this is also indicated);","(h) Current recording details are shown. If the camera is being recorded this is indicated along with the reason for recording, and the time remaining for the current recording to complete;","(i) A \u201cRecent Recordings\u201d tab takes the user to a search page listing the last 24 hours of video recorded on this camera; and","(j) \u201cDisable\u201d checkbox. This will stop all video output from the camera as well as any video recording. This checkbox can be toggled to enable\/disable the camera stream."]}}}},"This display allows the user to:\n\n","Camera settings.  is a screen dump of a sample client display screen showing the live video settings of the preferred embodiment. From this display users can change important settings for an individual camera. The details are grouped into several sections:\n\n","Preferably, only users with the highest level of security (MNGR) are permitted to modify camera connection details or delete cameras.","Camera Details:",{"@attributes":{"id":"p-0349","num":"0500"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"161pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Name","A unique name for the camera up to 16 alphanumeric"]},{"entry":[{},"(a to z, A to Z, and 0 to 9) characters in length. The"]},{"entry":[{},"name should contain at least one alpha character."]},{"entry":[{},"Spaces, tabs and commas are not valid characters. "]},{"entry":[{},"Note: a camera is not a PlantScape\/EBI point. Sixteen"]},{"entry":[{},"character point names match the capability of"]},{"entry":[{},"PlantScape EBI."]},{"entry":["Location","Used by the camera list panel portion of this and other"]},{"entry":[{},"displays to group cameras by location."]},{"entry":["Description","A 255 alphanumeric character description."]},{"entry":["Camera",{}]},{"entry":["Connection:",{}]},{"entry":["Camera","Specify the type of Camera Streamer used to connect"]},{"entry":["Streamer Type","the camera to the network. The following camera"]},{"entry":[{},"streamer types are supported:"]},{"entry":[{},"OpennetView"]},{"entry":[{},"Axis 2400"]},{"entry":[{},"Axis 2401"]},{"entry":[{},"Prism LAN Camera (stretch goal)"]},{"entry":["Camera Type","The type of camera connected to the camera streamer."]},{"entry":[{},"At least the following camera types are supported:"]},{"entry":[{},"Pelco Spectra-dome (PTZ capable)"]},{"entry":[{},"Canon VC-C3 (PTZ capable)"]},{"entry":[{},"Fixed (no PTZ capability)"]},{"entry":["Resolution","Determines the resolution at which the camera output"]},{"entry":[{},"is viewed and stored. The available options are:"]},{"entry":[{},"640 by 480 pixels"]},{"entry":[{},"320 by 240 pixels"]},{"entry":[{},"160 by 120 pixels"]},{"entry":[{},"Some camera streamer types do not support all of the"]},{"entry":[{},"listed resolutions. The video server can only support"]},{"entry":[{},"those resolutions offered by the camera streamer."]},{"entry":["Video Quality","Determines the frame rate of video displayed on the"]},{"entry":[{},"Live page. The supported rates (in frames per second)"]},{"entry":[{},"are:"]},{"entry":[{},"30"]},{"entry":[{},"25"]},{"entry":[{},"20"]},{"entry":[{},"15"]},{"entry":[{},"10"]},{"entry":[{},"7"]},{"entry":[{},"5"]},{"entry":[{},"3"]},{"entry":[{},"2"]},{"entry":[{},"1"]},{"entry":[{},"\u00bd"]},{"entry":[{},"\u2153"]},{"entry":[{},"\u00bc"]},{"entry":[{},"\u2155"]},{"entry":["Host or","Each Camera Streamer has an IP address. The Video"]},{"entry":["IP Address","Server uses the IP address to connect to the Camera"]},{"entry":[{},"Streamer. Changing this value does not change the"]},{"entry":[{},"value in the Camera Streamer (note: The camera"]},{"entry":[{},"streamer IP must be set using the manufacturer"]},{"entry":[{},"instructions). The address can either be"]},{"entry":[{},"entered as the raw IP address or as a host name"]},{"entry":[{},"(associated with an IP address through standard"]},{"entry":[{},"Windows functionality)"]},{"entry":["Camera","Enter the required position of the video input on the"]},{"entry":["Number","Camera Streamer if the Camera Streamer supports"]},{"entry":[{},"multiple camera connections."]},{"entry":[{},"For example the Axis 2400 has 4 camera positions"]},{"entry":["Security:",{}]},{"entry":["Area","PlantScape\/EBI area. Used by PlantScape\/EBI to"]},{"entry":[{},"determine operator security privileges."]},{"entry":[{},"Allows the system to be configured to only allow"]},{"entry":[{},"users to view specified-cameras."]},{"entry":[{},"Refer to PlantScape\/EBI documentation for details."]},{"entry":["Control Level","PlantScape\/EBI control level. Used by PlantScape\/"]},{"entry":[{},"EBI to determine operator security privileges."]},{"entry":[{},"Determines if a user is allowed to operate the PTZ"]},{"entry":[{},"controls for a camera. Also used to allow higher"]},{"entry":[{},"level users to take control of cameras."]},{"entry":[{},"Refer to PlantScape\/EBI documentation for details."]},{"entry":["Control","Once a particular user has controlled the camera no "]},{"entry":["Reservation","other user can control the camera until this reservation"]},{"entry":["Period","period has expired. If this user controls the camera"]},{"entry":[{},"again within the period, the reservation period is reset."]},{"entry":[{},"Users with higher security permissions can take"]},{"entry":[{},"control of the camera at any time."]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"Delete:","The \u201cDelete\u201d icon allows a user with MNGR level security to delete the camera from the Video Server. Deleting a camera will delete the record relating to the camera from the database. The name of the camera will no longer appear in the list of cameras. All camera settings is deleted.","The user is asked if they also wish to delete video clips captured for the camera. The default action is to not delete the video clips. If the video clips are not deleted they will stay on the video server and archives unless they are later individually deleted. The camera name will also continue to appear in the list of cameras used for searching the video clip database.","If the user chooses to delete video clips captured for the deleted camera, all video clips related to the is deleted. The camera name is removed from the list of cameras used for searching the video clip database.","Recording. The Camera Recording Details screen, shown in  is used to configure the following recording requirements for the camera:\n\n",{"@attributes":{"id":"p-0355","num":"0508"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"168pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["User","This section defines parameters particular to user-"]},{"entry":["Activated","initiated video recording. The user can initiate video"]},{"entry":[{},"recording by viewing live video and selecting the"]},{"entry":[{},"\u201cRecord\u201d icon."]},{"entry":["Pre-Record","The amount of pre-recorded video that is associated"]},{"entry":["For","with a user request for recorded video. This will"]},{"entry":[{},"allow the Video Server to capture video prior to the"]},{"entry":[{},"user request, as well as after the request."]},{"entry":["Frame Rate","Video quality required for user activated recording"]},{"entry":["Record For","User activated recordings will terminate after this"]},{"entry":[{},"period. The user can choose to extend the individual"]},{"entry":[{},"recording at any time by pressing the \u201crecord\u201d button"]},{"entry":[{},"during a recording. This will cause the timeout counter"]},{"entry":[{},"(indicating how long till the end of the recording) to"]},{"entry":[{},"be reset to the timeout period."]},{"entry":["Retention","The period that user activated recording is retained"]},{"entry":["Period","by the video server before being deleted."]},{"entry":[{},"The retention period of individual clips can be"]},{"entry":[{},"changed from the \u201cSearch Results\u201d page."]},{"entry":["Event","This section defines parameters particular to alarm\/"]},{"entry":["Activated","event triggered video recording. The following settings"]},{"entry":[{},"are specified for the four priorities of events\/alarms:"]},{"entry":[{},"(a) Event (journal priority);"]},{"entry":[{},"(b) Low priority alarms;"]},{"entry":[{},"(c) High priority alarms; and"]},{"entry":[{},"(d) Urgent priority alarms."]},{"entry":[{},"Note that these following parameters define the maximum"]},{"entry":[{},"possible recording parameters for an alarm\/event. For"]},{"entry":[{},"example a camera may allow pre-recording for events but"]},{"entry":[{},"an individual event on the PlantScape\/EBI point event may"]},{"entry":[{},"only require a snapshot."]},{"entry":["Pre-Record","The maximum amount of pre-recorded video that can be"]},{"entry":["For","associated with an alarm\/event. This will allow PlantScape\/"]},{"entry":[{},"EBI events to capture associated video prior to the event, as"]},{"entry":[{},"well as after the event. This is the maximum amount of pre-"]},{"entry":[{},"alarm recording available to all priorities Individual alarms"]},{"entry":[{},"may be configured to use lesser amounts (or snapshots) of"]},{"entry":[{},"video."]},{"entry":["Frame Rate","Video quality required. All priorities will use the same "]},{"entry":[{},"quality settin (unless the individual event requests a"]},{"entry":[{},"snapshot)."]},{"entry":["Retention","How long the recording is retained"]},{"entry":["period","by the video server before being deleted. "]},{"entry":[{},"Possible selections are:"]},{"entry":[{},"(a) 1 day;"]},{"entry":[{},"(b) 2 days;"]},{"entry":[{},"(c) 3 days;"]},{"entry":[{},"(d) 1 week;"]},{"entry":[{},"(e) 2 weeks;"]},{"entry":[{},"(f) 1 month;"]},{"entry":[{},"(g) 3 months;"]},{"entry":[{},"(h) 6 months;"]},{"entry":[{},"(i) 1 year; or"]},{"entry":[{},"(j) forever."]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"Schedules.  is a screen dump of a sample client display screen showing the Recording Schedule Configuration of the preferred embodiment. This page is used to configure scheduled recordings for the camera.",{"@attributes":{"id":"p-0357","num":"0510"},"tables":{"@attributes":{"id":"TABLE-US-00004","num":"00004"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"161pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Scheduled","A calendar and time control is shown. The user can"]},{"entry":["Recording","select a time period for a specific day. This will"]},{"entry":[{},"activate a recording on that particular day. The"]},{"entry":[{},"user is prompted to type in details of the request"]},{"entry":[{},"as well as the recording quality. The user can also"]},{"entry":[{},"specify if this is a recurring schedule. Start and stop"]},{"entry":[{},"times can be defined to the minute boundary"]},{"entry":[{},"(e.g. 12:48)."]},{"entry":[{},"For each scheduled recording the user can select:"]},{"entry":[{},"(a) Start;"]},{"entry":[{},"(b) Stop;"]},{"entry":[{},"(c) Frame rate;"]},{"entry":[{},"(d) Retention period;"]},{"entry":[{},"(e) Recurrence; and\/or"]},{"entry":[{},"(f) Description (255 characters)."]},{"entry":[{},"Zoom in and out buttons can be used to alter the"]},{"entry":[{},"displayed time control resolution."]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"Add a new camera.  is a screen dump of a sample client display screen showing the Add a New Camera screen of the preferred embodiment. Using this display, users can add new cameras to the Avalon Video Server. The functionality of fields on this display is listed in the camera setting section.","Recorded Video. Camera output can be recorded for the following reasons:\n\n","Event activated recording is a process that allows a segment of video or a snapshot to be associated with a PlantScape\/EBI alarm or event.","User activated recording occurs when a user viewing the \u201cLive Video\u201d page chooses to record the currently viewed camera output by selecting the \u201cRecord\u201d button.","Scheduled recording allows video to be recorded between start and stop times on defined days.","Recorded video is stored on the Video Server. The Avalon HMI is able to query the Video Server to locate relevant recorded video and to then replay that video.","Search. The display shown in  allows a simple search of all video recorded on the Video Server. The user selects the time indicator which shows a calendar and time line. The user selects the required search period.","Once the time criterion is entered the \u201csearch\u201d is selected. Video recorded during the selected period is returned by the search.","The user can search on combinations of cameras by clicking on the \u201cAdvanced Search\u201d icon as disclosed below.","Advanced Search.  is a screen dump of a sample client display screen showing the Advanced Search Of Recorded Video screen of the preferred embodiment. This display allows for an advanced search of recorded video. The search is based on time and recording.","The user can select from the list of cameras on the video server. It also includes any cameras that have been deleted from the video server but still have video stored on the video server or on archived media. If a camera has been deleted and all video associated with the camera has been deleted, the camera name will not appear in this list.","The time criterion is selected from a calendar and time line control. Days containing recorded video are shown in bold on the calendar control. Cameras can be added and removed from the search list.","The user can choose to filter the search based on the following criteria:\n\n","Wildcards are accepted for the Point ID, description, area, level and value.","Selecting the \u201cSearch\u201d button will start the search. The results are shown in following section.","Search Results.  is a screen dump of a sample client display screen showing the Search Results screen of the preferred embodiment. This page shows the results of the basic and advanced searches. If the user has accessed this page from the \u201cRecent Recordings\u201d button on the Live Video page then the results will list recordings on a single camera in the last 24 hours (FIG. ...-).","The user is able to select columns within the list of selected events to sort the output.","The following features appear on this page:",{"@attributes":{"id":"p-0376","num":"0538"},"tables":{"@attributes":{"id":"TABLE-US-00005","num":"00005"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"168pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Video Player","Shows the recorded video segment."]},{"entry":["Clip Details","Lists all events relevant to the selected time window."]},{"entry":[{},"As the slide bar moves along the time line a cursor"]},{"entry":[{},"will highlight any current alarms and events."]},{"entry":[{"img":{"@attributes":{"id":"CUSTOM-CHARACTER-00001","he":"2.46mm","wi":"1.78mm","file":"US07859571-20101228-P00001.TIF","alt":"custom character","img-content":"character","img-format":"tif"}}},"Will cause the video clip referenced in the Selected"]},{"entry":[{},"Video Clip box to play from the current slide bar"]},{"entry":[{},"position."]},{"entry":[{"img":{"@attributes":{"id":"CUSTOM-CHARACTER-00002","he":"2.46mm","wi":"1.78mm","file":"US07859571-20101228-P00002.TIF","alt":"custom character","img-content":"character","img-format":"tif"}}},"Will terminate playing and move the slide bar position"]},{"entry":[{},"to the start of the video clip."]},{"entry":[{"img":{"@attributes":{"id":"CUSTOM-CHARACTER-00003","he":"2.46mm","wi":"1.78mm","file":"US07859571-20101228-P00003.TIF","alt":"custom character","img-content":"character","img-format":"tif"}}},"Will halt playing of the current video clip. Subsequently"]},{"entry":[{},"selecting the Play button will commence playing from"]},{"entry":[{},"the current position."]},{"entry":[{"img":{"@attributes":{"id":"CUSTOM-CHARACTER-00004","he":"2.46mm","wi":"1.78mm","file":"US07859571-20101228-P00004.TIF","alt":"custom character","img-content":"character","img-format":"tif"}}},"Can be used once the stop or pause buttons have been"]},{"entry":["Forward","selected. Will cause the displayed video to be advanced"]},{"entry":[{},"one frame."]},{"entry":[{"img":{"@attributes":{"id":"CUSTOM-CHARACTER-00005","he":"2.46mm","wi":"1.78mm","file":"US07859571-20101228-P00005.TIF","alt":"custom character","img-content":"character","img-format":"tif"}}},"Can be used once the stop or pause buttons have been"]},{"entry":["Backward","selected. Will cause the displayed video to move back"]},{"entry":[{},"one frame."]},{"entry":[{"img":{"@attributes":{"id":"CUSTOM-CHARACTER-00006","he":"2.46mm","wi":"1.78mm","file":"US07859571-20101228-P00006.TIF","alt":"custom character","img-content":"character","img-format":"tif"}}},"Play the video at an accelerated rate (in general five"]},{"entry":["Forward","times the normal speed, while only displaying every"]},{"entry":[{},"fifth frame) in the backward direction."]},{"entry":[{"img":{"@attributes":{"id":"CUSTOM-CHARACTER-00007","he":"2.46mm","wi":"1.78mm","file":"US07859571-20101228-P00007.TIF","alt":"custom character","img-content":"character","img-format":"tif"}}},"Play the video at an accelerated rate (in general five"]},{"entry":["Backward","times the normal speed, while only displaying every"]},{"entry":[{},"fifth frame) in the forward direction."]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"The following fields appear in the event detail box:"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Date\/Time","Date and time of the event. This is the time at which"]},{"entry":[{},"the event was recorded on the PlantScape\/EBI server."]},{"entry":["Duration","The total time from pre-alarm to post-alarm during"]},{"entry":[{},"which video was recorded for this event. Snapshots is"]},{"entry":[{},"listed as 0 seconds."]},{"entry":["Alarm\/Event","Alarm or Event and the priority."]},{"entry":["Point ID","The name of the PlantScape\/EBI point that triggered"]},{"entry":[{},"the event capture"]},{"entry":["Description","The alarm line description from PlantScape\/EBI."]},{"entry":["Value","The value associated with the alarm\/event (e.g. FAIL)"]},{"entry":["Deletion Date","The date this video clip is automatically deleted from"]},{"entry":[{},"the system."]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"The following button also appears on the screen:"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Delete","This icon allows a MNGR level user to delete the video"]},{"entry":[{},"clip from the Video Server database."]},{"entry":[{},"Deletion means that all references to the video clip are"]},{"entry":[{},"removed and subsequent searches will not find reference"]},{"entry":[{},"to the clip."]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":"Note:"},{"entry":"The page contains a note section. This will show the notes for the selected event. The user can edit the notes to add additional comments. The notes for scheduled recording will also be shown and can also be edited."}]}}]}}},"Alarm\/Event Based Video Recording and Monitor Switching. PlantScape\/EBI events and alarms can trigger video recording and automatically switch camera output to specified monitors. This version of Avalon will rely on host based activation using the existing algorithm structure.","The following PlantScape\/EBI point types can generate alarms and events that can trigger video capture in the Video Server and switch monitors:\n\n","Event Triggered Recording\u2014Algorithm Version. This version uses the queued task request algorithms. These can be activated from any state of a PlantScape\/EBI point and are described in detail in the PlantScape\/EBI documentation. The following information can be entered for each point with the algorithm attached:\n\n","The algorithm enters an event in the Event Summary indicating that video is being captured on the video server.","Quad Camera View. A camera group consists of up to four related cameras viewed on a single display.  shows the display screen of  showing multiple frame captures from multiple cameras;","The quad camera view is divided into four quadrants. For each quadrant the view can have a camera or be blank. Within each quadrant the view can be configured to cycle between a number of cameras.","Configuring a Camera Group.  is a screen dump of a sample client display screen showing the Camera Group Settings screen of the preferred embodiment.","Quad View Name. A unique name for the quad camera view up to 16 alphanumeric (a to z, A to Z, and 0 to 9) characters in length. The name should contain at least one alpha character. Spaces, tabs and commas are not valid characters.","Camera List. A list of all the cameras on the system (based on the user's security details). The user selects a camera name and then adds it to one of the quadrants. If more than one camera is placed in a quadrant then the display will cycle between the cameras in the list at the configured \u201cCycle Time\u201d.","Decompressing and playing video requires substantial CPU processing resources. For this reason the ability to support multiple video streams on a single page has been limited, in this preferred embodiment, to a maximum of four cameras.","User Audit Trail. It is a requirement of high security sites that all user actions on the Avalon HMI be recorded in a log file as well as the PlantScape\/EBI event file. User actions include:\n\n","The log of user actions shall be available in text format on the video server. The log file preferably uses the same method as the PlantScape log file (i.e. loga and logb files).","Viewing Cameras from PlantScape\/EBI Custom Schematics. Displays on PlantScape\/EBI clients are built using Display Builder. The Display Builder SafeBrowse object can be used to place web pages in displays.","Every time changes to the camera settings are made, the video server will create a web page containing the live output of the camera. The SafeBrowse object can access this web page. A page shall also be available to support PTZ controls via a mouse on the custom display.","Performance. The following paragraphs describe the performance levels achieved by the present invention.","The following figures present a guide to the expected disk space and bandwidth usage for a single camera connected to an Avalon server. These can be extrapolated linearly for multiple cameras.","The practical capacity of an Avalon server appear to be approximately:\n\n","The present invention, at least in its preferred forms, provides a novel mechanism for using a computer communications network, such as a LAN or WAN, to stream video signals between cameras and computer clients requiring that video. In the preferred form, the use of event triggering to push a video stream to an interested client computer provides a flexible, powerful tool for security and process control applications, especially when used in an integrated security and process control network environment. For these reasons, the invention provides a commercially significant improvement over prior art systems."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF DRAWINGS","p":["Preferred embodiments of the invention will now be described, by way of example only, with reference to the accompanying drawings, in which:",{"@attributes":{"id":"p-0067","num":"0072"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0068","num":"0073"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0069","num":"0074"},"figref":["FIG. 3","FIG. 2"]},{"@attributes":{"id":"p-0070","num":"0075"},"figref":["FIG. 4","FIGS. 2 and 3","FIG. 4"]},{"@attributes":{"id":"p-0071","num":"0076"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0072","num":"0077"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0073","num":"0078"},"figref":["FIG. 7","FIG. 6"]},{"@attributes":{"id":"p-0074","num":"0079"},"figref":["FIG. 8","FIGS. 2 to 4"]},{"@attributes":{"id":"p-0075","num":"0080"},"figref":["FIG. 9","FIG. 8"]},{"@attributes":{"id":"p-0076","num":"0081"},"figref":["FIG. 10","FIGS. 8 and 9"]},{"@attributes":{"id":"p-0077","num":"0082"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0078","num":"0083"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0079","num":"0084"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0080","num":"0085"},"figref":["FIG. 14","FIG. 13"]},{"@attributes":{"id":"p-0081","num":"0086"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0082","num":"0087"},"figref":"FIG. 16"},{"@attributes":{"id":"p-0083","num":"0088"},"figref":"FIG. 17"},{"@attributes":{"id":"p-0084","num":"0089"},"figref":"FIG. 18"},{"@attributes":{"id":"p-0085","num":"0090"},"figref":"FIG. 19"},{"@attributes":{"id":"p-0086","num":"0091"},"figref":"FIG. 20"},{"@attributes":{"id":"p-0087","num":"0092"},"figref":"FIG. 21"},{"@attributes":{"id":"p-0088","num":"0093"},"figref":"FIG. 22"},{"@attributes":{"id":"p-0089","num":"0094"},"figref":"FIG. 23"},{"@attributes":{"id":"p-0090","num":"0095"},"figref":"FIG. 24"},{"@attributes":{"id":"p-0091","num":"0096"},"figref":"FIG. 25"},{"@attributes":{"id":"p-0092","num":"0097"},"figref":"FIG. 26"},{"@attributes":{"id":"p-0093","num":"0098"},"figref":"FIG. 27"},{"@attributes":{"id":"p-0094","num":"0099"},"figref":"FIG. 28"},{"@attributes":{"id":"p-0095","num":"0100"},"figref":"FIG. 29"},{"@attributes":{"id":"p-0096","num":"0101"},"figref":"FIG. 30"},{"@attributes":{"id":"p-0097","num":"0102"},"figref":"FIG. 31"},{"@attributes":{"id":"p-0098","num":"0103"},"figref":"FIG. 32"},{"@attributes":{"id":"p-0099","num":"0104"},"figref":"FIG. 33"},{"@attributes":{"id":"p-0100","num":"0105"},"figref":"FIG. 34"},{"@attributes":{"id":"p-0101","num":"0106"},"figref":"FIG. 35"},{"@attributes":{"id":"p-0102","num":"0107"},"figref":"FIG. 36"},{"@attributes":{"id":"p-0103","num":"0108"},"figref":"FIG. 37"},{"@attributes":{"id":"p-0104","num":"0109"},"figref":"FIG. 38"},{"@attributes":{"id":"p-0105","num":"0110"},"figref":"FIG. 39"},{"@attributes":{"id":"p-0106","num":"0111"},"figref":"FIG. 40"},{"@attributes":{"id":"p-0107","num":"0112"},"figref":"FIG. 41"},{"@attributes":{"id":"p-0108","num":"0113"},"figref":"FIG. 42"},{"@attributes":{"id":"p-0109","num":"0114"},"figref":"FIG. 43"},{"@attributes":{"id":"p-0110","num":"0115"},"figref":"FIG. 44"},{"@attributes":{"id":"p-0111","num":"0116"},"figref":"FIG. 45"},{"@attributes":{"id":"p-0112","num":"0117"},"figref":"FIG. 46"},{"@attributes":{"id":"p-0113","num":"0118"},"figref":"FIG. 47"},{"@attributes":{"id":"p-0114","num":"0119"},"figref":"FIG. 48"}]},"DETDESC":[{},{}]}
