---
title: Method and device for generating electronic sounds and portable apparatus utilizing such device and method
abstract: An electronic sound generation device is adapted to start arithmetic processing with a start signal. When the arithmetic processing is not completed in a period between two sampling signals of a constant period, a start signal for starting next arithmetic processing signal for the next period is output after the completion of the on-going arithmetic processing. The electronic sound generation device is also adapted to hold resultant data of arithmetic processing, which is output in synchronism with the sampling signal. An address for designating waveform data in a waveform memory is calculated upon the address arithmetic parameters received from a digital signal processor (DSP) having a sum-of-products arithmetic circuit. Using fractional parts of the addresses, the data read out from the waveform memory are interpolated, and supplied to the DSP.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=06972362&OS=06972362&RS=06972362
owner: Rohm Co., Ltd.
number: 06972362
owner_city: Kyoto
owner_country: JP
publication_date: 20030107
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENT"],"p":["This invention relates to a method and a device (referred to as electronic sound generation method and device) for generating electronic sounds for performing music using waveform data stored in a memory device, and to a portable apparatus (e.g. cellular phones, synthesizers, PDAs, and the like) utilizing such method and device.","Conventional methods of generating electronic sounds using waveform data stored in a memory device include a method in which all of the necessary arithmetic processing is performed by built-in hardware components, and a method in which arithmetic is performed by software using a digital signal processing unit such as a digital signal processor (DSP). In recent years, in order to provide capability of simultaneously generating an increased number of tones and to provide varied acoustic effects, contents and order of arithmetic processing have become complex. However, it is difficult to configure hardware to execute all the arithmetic processing in view of limitations in time and freedom in the design and modification of hardware.","On the other hand, a program can be developed to deal with complex arithmetic processing using a digital signal processing unit, so that software methods have been used more often.",{"@attributes":{"id":"p-0005","num":"0004"},"figref":["FIG. 1","FIG. 2"]},"As shown in , a digital signal processor (DSP)  has a digital signal processing circuit , a sampling signal generation circuit , and an output circuit  for outputting the result of arithmetic processing (the output circuit will be referred to as arithmetic result output circuit). The digital signal processing circuit  receives, from a waveform memory  such as a ROM, predetermined musical sound waveform data stored therein, along with various control commands including sound parameters for simulating different kinds of musical instruments and for designating musical scales from a system control section  composed of a host CPU.","The digital signal processing circuit  starts arithmetic processing of the waveform data and sound parameters in synchronism with a sampling signal i of a constant period T received from the sampling signal generation circuit . The digital signal processing circuit  carries out prescribed arithmetic processing to obtain the resultant data (or sound data) to be supplied to the arithmetic result output circuit .","The sampling signal i is periodically output with the constant period T (resulting in periods of time T\u2013T in ). The prescribed arithmetic processing is carried out. In the respective periods T. This period T is, for example, 22.7 \u03bcs (=1\/44.1 kHz) in the case of compact disk (CD). Upon receipt of a sampling signal i, the digital signal processing circuit  starts the processing, and feeds the resultant data v of the arithmetic processing to the arithmetic result output circuit  at the end (time t\u2032\u2013t\u2032) of that processing. The resultant data is temporarily held in the arithmetic result output circuit , and outputted from the arithmetic result output circuit  as sound data vi in synchronism with a next sampling signal i. A signal iii shown in  represents a signal indicating that the arithmetic processing is in progress when the level of the signal is high.","The amount of operations that can be done within a sampling period T depends on the length of the period T and the operating frequency of the LSI in which the sound generation device is formed. Referring to , an arithmetic processing is initiated by a sampling signal i received at time t. The arithmetic processing is normally completed at time t\u2032 say, within the period T. In the example shown in , a further arithmetic processing is started by another sampling signal i at time t. It is seen in  that this processing is not completed within a period of T and continued until it is completed at time t\u2032 in the next period T. In this case, the resultant data of the arithmetic processing will be outputted in synchronism with the sampling signal i given at time t. It is noted that the sound data already output at time t is again output at time t.","Afterwards, the arithmetic processing that should have been done in the period T would be processed in the period T. The same is true in the subsequent periods T and after. That is, arithmetic processing that was not done in the preceding periods, if any, will be done in the subsequent periods. In this way, if arithmetic processing was not completed in a predetermined period, it is continued in the subsequent period, delaying the arithmetic processing that should have been done in that subsequent period. Thus, the delay of the arithmetic processing would be accumulated every time the processing is not completed in each period.","Hence, in order to prevent a large delay of an entire musical piece due to accumulative delays in the arithmetic processing, a maximum amount of arithmetic processing was not allowed to exceed the sampling period T.","One way to circumvent this problem is to lower the sampling frequency to have a longer sampling period T or to increase the amount of operations in the arithmetic processing per unit time.","However, in order to generate enriched timbres, it is necessary to have a high sampling frequency, so that it is not preferred to lengthen the sampling period T. Also, increasing the amount of arithmetic processing per unit time is not desirable since it requires a higher operational frequency of the LSI used, which disadvantageously results in increased power consumption by the LSI and an increased substrate area for the LSI. Thus, this approach is difficult to apply particularly to a portable device.","A conventional DSP has, as its main component, a sum-of-products arithmetic circuit for processing waveform data using its arithmetic resources. Moreover, the DSP is generally adapted to calculate addresses (by address arithmetic) of the internal working memory and an external memory storing waveform data.","The sum-of-products arithmetic circuit of such a DSP is designed to execute signal processing (such as convolution operation of IIR filtering and FIR filtering) at a high speed. Therefore, if the DSP is used for the special operations other than the intended signal processing, for example processing of modulo operations and address generation that involves memory address jumps, the operational efficiency of the DSP will become much lowered.","Therefore, it has been proposed in recent sound signal processing DSPs to provide a circuit arrangement in which address generation can be done without imposing a heavy load on the sum-of-products arithmetic circuit. (See for example, Japanese Patent Application Early Publication No. 2001-242878, which will be referred to as prior art.)","However, the prior art performs address arithmetic processing of an external memory in the DSP, and utilizes waveform data stored in the external memory as it is. Thus, the prior art DSP has a drawback in that it must have a huge external memory for storing all necessary waveform data for use in generating various timbres encountered in the performance of music. Further, the prior art DSP has another drawback that it cannot provide waveform data other than those stored in the external memory.","In addition, it is difficult for the prior art DSP to generate richer timbres in energy-effective devices, especially portable devices, because in these devices a high operational frequency for fast arithmetic processing is not usable to suppress their power consumption.","It is therefore an object of the invention to provide an electronic sound generation device for use in performing music using waveform data stored in a memory device, in which a sound having rich timbre can be generated without extending a sampling period or raising the operating frequency of the device.","It is another object of the invention to provide such an electronic sound generation device as mentioned above particularly suitable for use with a portable device.","It is still another object of the invention to provide an electronic sound generation device for use in the performance of music using waveform data stored in a memory device, in which a process of calculating a memory address of stored waveform data is carried out by an address arithmetic unit provided separately from a digital signal processing unit in order to improve the throughput of the digital signal processing unit.","It is a further object of the invention to provide means for generating various kinds of musical signals using a relatively small memory.","It is a still further object of the invention to provide means for generating sounds having rich timbres.","In accordance with one aspect of the invention, an electronic sound generation method comprises steps of:","starting predetermined arithmetic processing of waveform data based on sound parameters upon receipt of a start signal for starting arithmetic processing (referred to as start arithmetic signal);","outputting resultant data of said arithmetic processing upon completion of said arithmetic processing; and","when said predetermined arithmetic processing is completed within a constant period of a sampling signal, issuing a start signal for starting next arithmetic processing in synchronism with the immediately subsequent sampling signal, but when said predetermined arithmetic processing is not completed within said period, issuing a start signal for starting next arithmetic processing when said predetermined arithmetic processing is completed.","In accordance with another aspect of the invention, a sound generation device comprises:","a waveform memory for storing waveform data;","a digital signal processing circuit for starting, upon receipt of a start arithmetic signal, predetermined arithmetic processing based on sound parameters and waveform data supplied from said waveform memory, outputting a signal (referred to as in-operation signal) indicating that said digital signal processing circuit is in operation during said arithmetic processing, and outputting resultant data of said arithmetic processing when said arithmetic processing is completed;","a sampling signal generation circuit for periodically outputting a sampling signal with a constant period;","a synchronized ON\/OFF circuit receiving said periodic sampling signal and said in-operation signal, said ON\/OFF circuit adapted to supply said digital signal processing circuit with a start signal for starting next arithmetic processing in synchronism with said sampling signal when said predetermined arithmetic processing has been completed at the time said sampling signal is received but otherwise supply said start signal after said predetermined arithmetic processing is completed; and","an arithmetic result output circuit for holding said resultant data of arithmetic processing supplied from said digital signal processing circuit and for outputting said resultant data as a sound data in synchronism with said sampling signal.","In accordance with the invention, it is possible to generate richer timbres than those of prior art by executing an excessive arithmetic processing extending over a given sampling period in a subsequent sampling period having less amount of arithmetic processing, thereby resulting in only negligible delay for the entire musical piece.","In accordance with another aspect of the invention, an electronic sound generation device comprises:","a digital signal processing device including a sum-of-products arithmetic circuit;","a waveform memory;","a waveform memory address arithmetic circuit for calculating, upon receipt of address arithmetic parameters from said digital signal processing device, the address to be designated in said waveform memory; and","a waveform data interpolation circuit for interpolating data read from said waveform memory and supplying interpolated data to said digital signal processing device.","An electronic sound generation device of the invention enables generation of various timbres using data other than the waveform data stored in a waveform memory means by means of a general-purpose DSP. To do this, the invention reads out from the waveform memory waveform data addressed by integral parts (upper bits) of the resultant data of the arithmetic and interpolates the waveform data based on the fractions below decimal point (lower bits) of the resultant data.","The invention will now be described in detail by way of example with reference to the accompanying drawings.","Referring to , there is shown a first embodiment of an electronic sound generation device of the invention.  is a timing diagram of the device.","The electronic sound generation device shown in  comprises, as its measure components, a system control section , a waveform memory , and a digital signal processor (DSP) that includes a digital signal processing circuit , a synchronized ON\/OFF circuit , a sampling signal generation circuit , and an arithmetic result output circuit . These components are controlled by a controller (not shown) such as a CPU.","The system control section , comprising a host CPU, is adapted to feed various commands that contain various sound parameters representing various types of musical instruments, musical scales, and the like to the digital signal processing circuit .","The waveform memory , typically a ROM, stores PCM sound data (hereinafter also referred to as waveform data) that have been supplied via an input\/output means (not shown). The waveform data for different musical instruments are allocated at different locations of the waveform memory  addressable in association with corresponding musical instruments.","The digital signal processing circuit  performs predetermined arithmetic operations or processing based on the sound parameters and waveform data input thereto. The arithmetic processing of the digital signal processing circuit  is started by a start arithmetic signal ii received from the synchronized ON\/OFF circuit  and carries out a bundle of arithmetic operations to output sound data. With the completion of the arithmetic processing of the bundle of operations, the digital signal processing circuit  issues an end arithmetic signal iv to the synchronized ON\/OFF circuit , and supplies resultant data v of the arithmetic processing to the arithmetic result output circuit . It will be understood that the digital signal processing circuit  may output a signal iii indicating that the arithmetic operation is in process together with, or in place of, the end arithmetic signal iv.","The sampling signal generation circuit  periodically outputs a sampling signal i with a predetermined period (e.g. 22.7 microseconds) to the synchronized ON\/OFF circuit  and arithmetic result output circuit . The sampling period is set in such a way that the average time of arithmetic processing executed in the digital signal processing circuit  will not exceed the sampling period, although the maximum processing time of the arithmetic processing can exceed the sampling period. That is, the sampling period is set to satisfy the following condition:\n\n","The synchronized ON\/OFF circuit  is configured to output a start arithmetic signal ii either in synchronism with the input sampling signal i received or after the reception of an end arithmetic signal iv received after the sampling signal i. The timing of issuing the start arithmetic signals ii depends on whether the arithmetic processing of a bundle of operations is completed within a given sampling period or not.","The arithmetic result output circuit  is provided with registers for holding the resultant data v of the arithmetic processing which is asynchronously supplied from the digital signal processing circuit . The registered data v may be synchronously retrieved therefrom by a synchronized sampling signal i and be output as sound data vi. The register is adapted to hold the data even after the data is read out therefrom, until the data is overwritten by new data received.","Referring now to , operations of the electronic sound generation device of  will be described.","The sampling signal i is periodically generated with a predetermined period of T. There are shown seven periods T\u2013T in . In the first period T starting at time t at which a sampling signal i is input, the synchronized ON\/OFF circuit  generates a start arithmetic signal ii in synchronism with the sampling signal i and feeds it to the digital signal processing circuit . Upon receipt of the start arithmetic signal ii, the digital signal processing circuit  promptly starts arithmetic processing based on the sound parameters and waveform data, and ends the arithmetic processing a predetermined time t\u2032 later. It is noted that the digital signal processing circuit  may be configured to provide the synchronized ON\/OFF circuit  with a signal iii indicating that arithmetic processing is currently in the progress.","At time t\u2032 when the arithmetic processing is finished, an end arithmetic signal iv is supplied to the synchronized ON\/OFF circuit , and the resultant data v of the arithmetic processing is entered to the arithmetic result output circuit  and held therein. The resultant data v held in the arithmetic result output circuit  is synchronized with the next sampling signal i, and output at time t from the output circuit  as the sound data. In this manner, normal arithmetic processing is finished within a given period T.","Next, since the arithmetic processing was finished in the preceding period T, start arithmetic signal ii is output at time t at the time of issuing the sampling signal i, and the next arithmetic processing is started for the period T.","It is shown in  that the amount of arithmetic operations is too much to be processed in the period T, and that it is not completed within the period T. It is done at time t\u2032 in the subsequent period T.","In this instant, when the sampling signal i is output at time t for the period T, new resultant data v of the arithmetic processing has not been obtained yet. As a consequence, the arithmetic result output circuit  outputs the preceding data stored in the register in place of the new data v. This prevents a hiatus from occurring in the sound data.","When the arithmetic processing is done at time t\u2032, an end arithmetic signal iv is output immediately. When both the end arithmetic signal iv and the sampling signal i are available at time (t), the start arithmetic signal ii is generated to start the next arithmetic processing for the period T. At the same time, the resultant data v of the arithmetic processing is output to the arithmetic result output circuit  to overwrite the data in the register. The arithmetic data for the period T is output at time t, delayed by 1 period T.","Although the arithmetic processing for the period T could be completed in one time interval equal to T, it is finished at time t\u2032 in the period T, since its start was delayed for some time in the period T. As the arithmetic processing for the period T is finished at time t\u2032, the start arithmetic signal ii is issued to start the arithmetic processing for the period T. At the same time, the resultant data v of the arithmetic processing is output to the arithmetic result output circuit , overwriting the data held in the register. The resultant data of the arithmetic processing for the period T is output at t, delaying for 1 period T.","It is seen in  that the arithmetic processing for the period T is significantly short, but it is still extending in the next period T. As a consequence, when the processing for the period T is finished at time t\u2032, the start arithmetic signal ii is output to start the next arithmetic processing in the period T. At the same time, the resultant data v of the arithmetic processing is output to the arithmetic result output circuit  to overwrite the data in the register.","In the period T, the arithmetic processing that started in the period T is finished at time t\u2032 and so is the arithmetic processing for the period T before the end of the period T.","In this case, the end arithmetic signal iv is output to the synchronized ON\/OFF circuit  at time t\u2032. That is, the second end arithmetic signal iv is also input to the synchronized ON\/OFF circuit  in the same period T. The fact that two end arithmetic signals iv were input in the same period T means that the arithmetic processing extending into subsequent periods has been completed in this period, making up the delay.","Accordingly, the two end arithmetic signals iv received in the same period T are ignored, thereby generating no start arithmetic signal (as shown by a broken line).","On the other hand, in response to completion of the arithmetic processing at time t\u2032, resultant data v of the arithmetic processing is issued at time t\u2032. As a consequence, the resultant data of the arithmetic processing output at time t\u2032 is overwritten by the resultant data of the arithmetic processing output at time t\u2032. Hence, the resultant data output at time t\u2032 will not be output at all as sound data. The resultant data output at time t\u2032 is output as the sound data for the period T.","For the periods T\u2013T, the arithmetic processing for the respective periods is completed in the respective periods, so that the procedure in each of the periods is the same as that for the period T.","In the first embodiment of the invention as described above, given a sampling period T, the maximum time needed to complete a bundle of arithmetic operations performed in the digital signal processing circuit  can exceed the sampling period T, as observed in the period T. In an event that the arithmetic processing runs into the next period, resulting in delays in the subsequent periods, the arithmetic processing may be absorbed in the subsequent periods. In order to absorb such extended or delayed arithmetic processing, the processing is set up so that the mean arithmetic processing time fits in the sampling period. That is, the mean time is set such that","Maximum processing time>Sampling period>Mean time.","In general, in electronic sound generation devices, including the inventive one, the amount of arithmetic operations is large only in the initial stage of processing a sequence of sound data for generating a specific sound involving processing of sound parameters. The frequency of occurrence of such heavy processing is extremely small, probably once in a few thousands-10 thousands. Thus, by allowing a portion of arithmetic processing that exceeds in time a given sampling period to be done in a subsequent period having less arithmetic operations, a rich sound can be generated without causing a delay for the entire piece.","If in the method of the invention arithmetic processing exceeds in time the sampling period T, one sound data is used twice, while another sound data will not be used. However, in the present invention, the sampling period T is set such that it is shorter than the maximum arithmetic processing time for processing a bundle of arithmetic operations but longer than the average arithmetic processing time, so that a delay in any period can be eventually absorbed in the subsequent periods, thereby creating no delay for the piece as a whole.","By setting the sampling period to cover mean arithmetic processing time, instead of conventionally setting the sampling period to cover the maximum arithmetic processing time, it is possible in the present invention to substantially increase the number of executable arithmetic operations, thereby enabling generation of a rich sound. It will be appreciated that the sampling frequency can be raised to improve the quality of the sound in accordance with the invention.","It will be also appreciated that the inventive method can be applied to a device that operates at a low operating frequency, thereby allowing an LSI embodying the invention to operate at a reduced power and have a reduced substrate area. Therefore, the invention is suitable for a miniaturized low-powered portable device.","It will be understood that the system control section , waveform memory , digital signal processing circuit , synchronized ON\/OFF circuit , sampling signal generation circuit , and arithmetic result output circuit  can be formed as separate LSIs or built in the same LSI in an arbitrary combination.","Referring to , a second embodiment of the invention will now be described below.",{"@attributes":{"id":"p-0081","num":"0081"},"figref":"FIG. 5","b":["10","20","30","40","50","60"]},"The system control section  controls the components so as to enable the electronic sound generator as a whole to generate and output a desired analog audio signal. Specifically, the system control section  sends various control commands that contain sound parameters associated with musical instruments, musical scale, and the like, to the DSP  so that the DSP  can adequately perform predetermined arithmetic processing.","The waveform memory  stores a PCM sound source data (referred to as waveform data) fed beforehand via an input\/output means (not shown). The waveform memory can be a read only memory (ROM). The waveform data in the waveform memory  are composed of different kinds of data for individual musical instruments allocated at respective n-bit memory addresses.","The DSP  performs predetermined processing including arithmetic processing of a PCM sound signal read out from the waveform memory  to generate a digital signal of electronic sound under the control of the system control section , and outputs the resultant signal to the D\/A converter .","The DSP  has a control section , a program memory , a working memory addressing control means , a working memory , a waveform memory addressing control means , a sum-of-products arithmetic circuit , and an output interface .","The program memory  is provided for storing the procedure that is to be performed in the DSP , from which stored control programs are sequentially retrieved upon receipt of a respective control command from the control section . The control section  controls each component of the DSP  so that the DSP  as a whole performs desired processing. Specifically, based on a control command received from the system control section , a processing program for executing the command is sequentially read out from the program memory . Address arithmetic parameters PA for controlling addressing to access the waveform memory  for data needed are written to the waveform memory addressing control means  as needed. In order to execute desired processing, a sum-of-products command is issued to the sum-of-products arithmetic circuit .","The address arithmetic parameters PA held in the waveform memory addressing control means  consist of a starting address OFST that indicates the starting point of sound data, an ending address STOP that indicates the end of the sound data, a starting repetitive address REST that indicates the starting point of sound data to be repeated, and a unit address increment PHINC that indicates a unit of address increment. It is noted that the unit address increment PHINC can be any integer and may contain a fractional address below decimal point with respect to a given starting address. Of course, it can be 1, as is usually the case. The parameters PA are determined by the DSP , taking account of a relationship of the waveform data needed for the arithmetic performed in the DSP  to the waveform data stored in the waveform memory .","The waveform memory addressing arithmetic circuit  receives address arithmetic parameters PA including a starting address OFST, an ending address STOP, a starting repetitive address REST, and unit address increment PHINC from the waveform memory addressing control means  of the DSP . Operations of the waveform memory addressing arithmetic circuit  will be described with reference to  illustrating operations of the waveform memory address arithmetic circuit and a flowchart of , and  showing the result of arithmetic processing.","Shown in  are address arithmetic operations involving repetitive loops for the beginning of a tone. Referring to , there is shown a procedure that starts with step  in which a starting address OFST is supplied as the current address PHASE. In the next step , unit address increment PHINC is added to the current address PHASE to obtain the next current address PHASE.","In step , the current address PHASE is compared with the ending address STOP to see if PHASE<STOP or not. If it is, then the procedure returns to step  to add unit address increment PHINC to the current address PHASE.","If PHASE>STOP in step , the procedure proceeds to step , where ending address STOP is subtracted from the current address PHASE, and the starting repetitive address REST is added to obtain a new current address PHASE. The new current address PHASE turns out to be substantially the same address as the starting repetitive address REST. Address addition is repeated with reference to the new current address PHASE. It is noted that the new current address PHASE is set to be substantially the same as the starting repetitive address REST, because the unit address increment PHINC is not necessarily equal to 1 but rather some integer other than 1 or a fractional number in the invention.","In this manner, the current address PHASE is output every time an arithmetic processing is performed in the waveform memory addressing arithmetic circuit  in step . The resultant current address PHASE consists of upper n bits (including MSB) and lower k bits (including LSB), as illustrated in . In other words, the current address PHASE has an m-bit address, where m=n+k. A reason for allowing the current address to include the k lower bits is to permit the current address to have a fractional address increment as unit address increment PHINC.","While the upper n bits of the m bits are supplied as the address of the waveform memory , the lower k bits are supplied to the waveform data interpolation processing circuit .","The waveform data addressed by the address supplied from the waveform memory addressing arithmetic circuit  is read out from the waveform memory , and is supplied to the waveform data interpolation processing circuit . In this case, subsequent waveform data and\/or the preceding waveform data may be read out together with the waveform data addressed by the address as needed in the method of interpolation carried out by the waveform data interpolation processing circuit , depending on the internal structure of the waveform data interpolation processing circuit .","In the waveform data interpolation processing circuit , a suitable waveform data associated with the current address PHASE represented by the m bits (m=n+k) is obtained by a linear interpolation of the waveform data addressed by the upper n bits and the waveform data addressed by the next address based on the value of the lower k bits, i.e. the value of the address below decimal point. It should be understood that the interpolation is not limited to be linear. Alternatively, any other known technique, for example weighted filtering of multiple waveform data, can be uses as well.","The D\/A converter  converts the digital signal of electronic sound supplied from the DSP  into an analog signal, which can be output from a speaker.","Next, operations of the electronic sound generator will be described. The waveform memory  stores waveform data for individual musical instruments in respective n-bit memory addresses. The allocation of the data is managed by the DSP .","The system control section  sends a predetermined control command to the DSP  in order to have the DSP  provide desired musical signal. In the DSP , the cotrol section  sets up address arithmetic parameters PA such as starting address OFST, ending address STOP, starting repetitive address REST, unit address increment PHINC for the waveform memory  in the parameter register of the waveform memory addressing control means , in accordance with the control command.","When the system control section  instructs the DSP  to start generating a sound, the control section  reads out a processing program from the program memory  in accord with the command and begins desired processing.","Specifically, address arithmetic is performed in the waveform memory addressing arithmetic circuit  based on the address arithmetic parameters PA set. The upper n bits of the current address PHASE obtained is fed to the waveform memory  as the upper bit address to read out the waveform data and the subsequent (and\/or preceding) waveform data for the address, which waveforms are supplied to the waveform data interpolation processing circuit . On the other hand the lower k bits of the current address PHASE obtained are supplied to the waveform data interpolation processing circuit  as the lower bit address below decimal point.","In the waveform data interpolation processing circuit , a desired tone waveform data is generated by interpolating the two or more of the waveform data read out from the waveform memory in accordance with the upper bit addresses, using the lower bit addresses of the corresponding upper bit addresses, i.e. data below decimal point. The interpolated waveform data is supplied to the sum-of-products arithmetic circuit .","Referring to , an example of interpolated waveform data will be described below. ) shows a sequence of waveform data (each marked by x) stored in the waveform memory  in the order of increasing address with the unit incremental address PHINC being 1.0. This is a waveform obtained by plotting the waveform data stored in the waveform memory  and output from the waveform data interpolation processing circuit  without interpolation.",{"@attributes":{"id":"p-0103","num":"0103"},"figref":["FIG. 9(","FIG. 9("],"i":["b","b"],"b":["40","50","40","50"]},"In this way, the interpolation is executed for two or more of the waveform data read out from the waveform memory  based on the upper n-bit addresses using the lower k-bit address of the current address PHASE as data for an interpolation below decimal point. The new sequence of waveform data output from the waveform data interpolation processing circuit , different from the sequence of waveform data stored in the waveform memory , are supplied to the DSP .","In the example shown in ), the unit address increment is 1.1. Alternatively, it can be 0.7 or 1.5, or any other number having a fraction below decimal point. By selecting an appropriate unit address increment PHINC, the waveform data stored in the waveform memory  can be used as a source for obtaining various waveforms by means of the waveform memory addressing arithmetic circuit  and the waveform data interpolation processing circuit .","The waveform data obtained by interpolating by the waveform data interpolation processing circuit  and the waveform data read out from the waveform memory  are sequentially input to the sum-of-products arithmetic circuit , where the waveform is further reshaped through pitch processing, filtering, reverberation processing, and volume processing.","Data other than those needed to perform such further processing and temporary data associated with them are written to and read from the addresses of the working memory  that are managed by the working memory addressing control means .","Final version of the digital signal of electronic sound is generated in the sum-of-products arithmetic circuit  and output therefrom to the D\/A converter  via the output interface . The D\/A converter  converts the digital sound signal into an analog signal to be output from the electronic sound generation device. The output may be then used to reproduce the sound.","Thus, the second electronic sound generation device of the invention is provided with the waveform memory addressing arithmetic circuit  and the waveform data interpolation processing circuit  in addition to the DSP . Therefore, special processing means such as an address generation circuit or an address arithmetic circuit for the waveform memory  are not necessary for the DSP  any longer. Thus, using a general purpose DSP, it is possible to generate various kinds of sounds using other than the data stored in the waveform memory.","It is noted that in this embodiment the address arithmetic parameters PA additionally include, along with starting address and ending address, unit address increment PHINC that can assume any magnitude as needed. It will be recalled that this unit address increment enables interpolation of waveform data below decimal point (lower bits) of the integral waveform data (upper bits) read out from the waveform memory, thereby enabling generation of a rich tone.","It will be understood that the DSP can be specialized for use in sum-of-products arithmetic directly related to timbre processing and that it can facilitate generation of rich sound. Because it is operable at a low operating frequency, power consumption thereof may be effectively reduced, especially in portable devices.","It will be understood that not only the system control section  and DSP  but also the waveform memory addressing arithmetic circuit , waveform memory , waveform data interpolation processing circuit  and D\/A converter  can be either formed as independent LSIs or integrated in an LSI in combination.","As a third embodiment, in place of the waveform memory  of the first embodiment (), a combination of the waveform memory addressing arithmetic circuit , waveform memory , and waveform data interpolation processing circuit  of the second embodiment () can be used."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0041","num":"0040"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0042","num":"0041"},"figref":["FIG. 2","FIG. 1"]},{"@attributes":{"id":"p-0043","num":"0042"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0044","num":"0043"},"figref":["FIG. 4","FIG. 3"]},{"@attributes":{"id":"p-0045","num":"0044"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0046","num":"0045"},"figref":["FIG. 6","FIG. 5"]},{"@attributes":{"id":"p-0047","num":"0046"},"figref":["FIG. 7","FIG. 6"]},{"@attributes":{"id":"p-0048","num":"0047"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0049","num":"0048"},"figref":"FIG. 9"}]},"DETDESC":[{},{}]}
