---
title: Method and apparatus for composing multimedia documents
abstract: A document sharing system includes producing an updatable collection of multimedia documents. A collection overview sheet provides a facile medium for handling and distributing large collections of documents. The system includes techniques for subsequent access to the collection, including printing all or portions of the collection.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07703002&OS=07703002&RS=07703002
owner: Ricoh Company, Ltd.
number: 07703002
owner_city: Tokyo
owner_country: JP
publication_date: 20030331
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["CROSS-REFERENCES TO RELATED APPLICATIONS","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DESCRIPTION OF THE SPECIFIC EMBODIMENTS"],"p":["This application is related to the following commonly owned and co-pending U.S. patent applications which are hereby incorporated by reference for all purposes:\n\n","The present invention relates generally to document management and more specifically to access and dissemination of collections of multimedia documents.","Despite the ideal of a paperless environment that the popularization of computers had promised, paper continues to dominate the office landscape. Ironically, the computer itself has been a major contributing source of paper proliferation. The computer simplifies the task of document composition, and thus has enabled even greater numbers of publishers. The computer promotes individual expression through the use of graphics tools, image capture devices, image enhancement tools, and so on, in addition to traditional text editing. Oftentimes, documents must be shared among colleagues, thus generating even more paper.","Despite advances in technology, suitable personal output devices as a practical substitute for paper remain to be developed. Personal data assistants (PDAs such as Palm Pilot\u00ae by 3Comm, Inc., and similar hand held devices) typically do not have the storage capacity, the processing capacity, the display capacity, or the connectivity to effectively present documents to the user in a convenient and useful manner. Unlike paper, devices such as PDAs are not universal. While many document formats exist for representing information, not all devices have all the software needed to read all documents. Worse yet, PDA documents typically use formats that are not readily available on a desktop or laptop PC. Usually, documents have to be converted between formats. Paper remains the simplest way in many situations for storing information (e.g., record keeping), distributing information, and controlling access to information.","Paper has been an integral component of civilization for thousands of years. Its replacement is not likely to occur soon, if ever, despite the ubiquity of computer-based technology. Electronic information almost invariably is reduced, at least in part, to paper. Perhaps then, the role of the computer is not to achieve a paperless society. Instead, the role of the computer may be as a tool to move effortlessly between paper and electronic representations and maintain connections between the paper and the electronic media with which it was created. Generally, there is a need to use computers to more effectively share information and to provide access to that information. In addition, the information should not be limited to any particular mode of expression, allowing for all forms of communication media.","Various aspects of the present invention facilitate sharing of multimedia documents amongst users. In accordance with aspects of the invention, documents can be organized into one or more collections. Information can be added to the collection, thus creating different versions of collections. A collection coversheet representative of the collection can be printed on a suitable medium, such as paper for example. This coversheet can provide access to the collection. In this way, documents in the collection can be shared by distributing copies of the coversheet to recipients.","According to other aspects of the invention, a collection coversheet can be used to browse a collection and to direct actions on elements in the collection. Annotative information can be used to facilitate navigation of the collection. Annotative information can be use to specify actions to be performed on elements in the collection.","Collections of paper documents are used for many purposes. Many people keep folders of documents on their desks or in their file system which are related to a particular task or to a particular person. A law firm keeps a \u201cdocket\u201d of papers for a specific case or client. A medical office keeps at least one file of papers for each patient who uses that office. It is important to keep those papers together to facilitate work tasks related to those papers. For instance, in a medical office, if a doctor wishes to review a patient's medical history, she can flip through that patient's folder and look at what tests have been performed or what illnesses the patient has suffered in the past.","The terms \u201cpaper\u201d, \u201cpaper medium\u201d, or \u201csheet\u201d as used in this application are intended to refer to any tangible medium on which information can be formed whether by a printing process, written, drawn, imprinted, embossed, etc. For purposes of this invention, the term \u201cprinting\u201d is intended to encompass all manner of forming images on an image-bearing medium whether by optical, mechanical, thermal, or electrical methods, or combinations thereof.","Information is increasingly being captured and kept in electronic form as well. For instance, even though a picture taken with a digital camera can be printed, it originated electronically and could be stored electronically as well. Digital files are easier to copy and move around than paper in many cases. Both paper and electronic media have distinct advantages.","Until now, paper has had to forgo the advantages of electronic media. With the advent of programmable MFPs or multi-function peripherals, it is much easier to convert paper into electronic form. It is now possible to set up an MFP to acquire pages of a document and convert them into electronic form and store those documents in collections.","Collections in this specification have a specific meaning. A \u201ccollection\u201d can include one or more groups of electronic documents or media which might include digital images, audio recordings, scanned images from pages of a document, files like a Microsoft Word documents or Microsoft Excel spreadsheets. Collections can also contain pointers to other collections. Collections can include user-provided markings, annotations, and such. Collections can also include metadata representing related information such as date of creation, modification date, access permissions, and so on.","A collection is stored on a collection server and has a specific address or identifier, similar to a URL or uniform resource locater, which identifier is unique and provides a pointer to the collection. A collection has a coversheet which displays a representation of the contents of the collection with an overview image showing thumbnails which represent all of the documents in the collection. More details about collections will be described in another part of this specification.","The system exemplar shown in  is a pictorial representation of an illustrative embodiment showing the various components that are part of the present invention. A corresponding block diagram is given in , showing various functional components. Multiple data capture device examples are shown to illustrate the data capture functionality of the present invention. In a particular embodiment, a multifunction peripheral (MFP)  is provided for scanning documents  and  and to serve as a source of electronic information. Additional capture devices are provided, including but not limited to microphones , digital cameras , video cameras , memory cards and other removable media  as well as additional devices connected to the network that may not be near or in the same room with the MFP . The MFP  is connected through a network  to a collection server  which allows the MFP to create, store, and modify collections of media that will be described in more detail later in this specification.","Each MFP  has a control panel  which provides methods of controlling the MFP  through various means including but not limited to keypads , buttons and touchscreen displays . The control panel  also provides feedback to the user through the display  and indicator lights . The feedback might indicate the current state of the MFP or might indicate the task being completed by the MFP.","Also shown in  are documents  and a special document  called a collection coversheet. A collection coversheet  can be used with the MFP to carry out the methods of the present invention.","The MFP  includes the capability of scanning single or multiple pages in sequence and storing those internally or performing imaging operations on those pages. The MFP  also has the ability to print images either from its internal storage  or from memory  or from other capture devices. Other captures devices, including but not limited to a microphone , a digital camera , a video camera  or other devices can be provided to record media such as audio or activity such as a meeting, surveillance activity, and so on.",{"@attributes":{"id":"p-0059","num":"0066"},"figref":["FIG. 3","FIG. 3"],"b":["100","100","302","308","316","318","100","304","306","318","316","302","322","320","200","314","326","328","310","312","324"]},"The MFP can access other forms of media through electronic data input peripherals which may include magnetic media readers for magnetic media such as floppy disks, magnetic tape, fixed hard disks, removable hard disks, memory cards, and so on. Peripherals may also include optical media readers for optical storage media such as CDs, DVDs, magneto-optical disks, and the like. Information obtained from these peripherals can be incorporated or otherwise associated with scanned-in documents to enhance the document content.","The processor  controls the operation of the MFP components shown in . The control panel  can be used to instruct the processor  to use the components of the MFP  to make copies, scan documents or print faxes. MFPs are available from many companies, including Ricoh Company Ltd in Tokyo, Japan which makes a programmable MFP called the Aficio  which contains many of the components shown in . Any suitably equipped MFP could be used in practicing this invention.","The memory  of the MFP contains modules which allow the operation of the MFP as well as the practice of the present invention.",{"@attributes":{"id":"p-0063","num":"0070"},"figref":"FIG. 4","b":["318","400","322","302","104","404","304","408","402","406","424","422","426","430"]},"In addition to the typical MFP functions, the following modules are necessary for the operation of this invention. A collection management module  must be available which tells the processor how to communicate with the collection server and how to create and modify collections.","A thumbnail creation module  can create thumbnail representations of media, including a smaller version of an image, a single-frame from a video or even a waveform from a stored audio signal. These thumbnails are used at least by the overview generation module  which is used to create an overview of a collection. The overview is described in detail later and the overview generation module puts together the thumbnails representing the documents and media into a single image that can be displayed or printed and used for accessing the documents and media.","The machine readable code generation module  provides the MFP with the ability to create machine-readable codes like barcodes which represent specific collections. The machine-readable code locator\/reader module can be used to find and decode machine-readable codes on collection coversheets in order to determine which coversheet was scanned by the scanning mechanism . Preferably, machine-readable codes are barcodes, though there are many ways of creating machine-readable indicia. Barcodes are robust and take up little space and are easily decoded using standard hardware and software. On company that sells software for locating and decoding a variety of barcodes is Axtel Applied Technology of Vista California USA. Decoding machine-readable codes is well known in the industry.","The control panel is controlled by the processor  using information from the user interface module  and the display generation module  which are part of the control panel module .","The use and operation of each of the hardware components and modules will be clarified during the description of the operation of the invention.",{"@attributes":{"id":"p-0069","num":"0076"},"figref":["FIG. 5A","FIG. 5B"],"b":["500","102"]},"A collection coversheet  is a paper which represents a collection and is made up of a header , a string of text printed in a machine-readable format , a collection overview image , optionally, an area in which notes may be written , and optionally a human-readable version  of the text encoded in the machine-readable code .","The header  contains printed information about the collection, including the author of the collection, a list of zero, one or more people who will be notified if the collection is modified, time and date information about when the collection was last modified or when this coversheet was printed out, and an optional collection topic or subject.","The machine-readable code  contains an encoded version of a unique pointer to the collection on the collection server. This same pointer when presented in human-readable form  might be similar to a uniform resource locator or URL used in the world wide web and is called a collection identifier, distributed resource identifier, or DRI. The preferred implementation of the collection server uses these \u201cdistributed resource identifiers\u201d or DRIs as unique collection pointers. DRIs are globally unique, difficult to guess, and can provide access to collections from anywhere on the internet. The pointer data stored in the barcode or written in human-readable form is the DRI. The barcode is just a machine-readable version of that DRI.","Within this specification the terms \u201ccollection identifier\u201d, \u201cdistributed resource identifier\u201d, and \u201cDRI\u201d will be used interchangeably and should be understood to mean the same thing\u2014a unique identifier that points to a collection of media and documents stored on a collection server. In some cases, multiple identifiers point to the exact same collection in order to provide different ways of accessing that collection, but never will one identifier point to multiple collections. Also, the identifier might be written in human-readable form or machine-readable form. Both printed forms represent the same identifier and point to the same collection even though they look unlike each other.","The bar code representation  of a DRI allows for automated access to the collection without requiring the user to manually enter the location. It can be appreciated of course that any machine-readable indicium can be used instead of a bar code system, including optical character recognition (OCR) of the human-readable  DRI.","A bar code  and a corresponding human-readable DRI (distributed resource identifier)  are elements of the coversheet which indicate the location of the collection. In a particular embodiment of the invention, a 2-D bar code format is used. The DRI used for a collection points to a directory which contains the collection of documents as well as information used to build the collection overview and some additional metadata. DRIs can also point directly to an individual file the same way that a URL can point to either a directory or a file.","Since a collection typically comprises a multitude of documents, the DRI is often a directory reference rather than a reference to a particular file. For example, in an OS (operating system) such as Unix, the DRI can be a directory reference such as \/usr\/collection. Alternatively, the DRI can refer to a file which in turn leads to an identification of the constituent elements of a collection. In still another alternative, the DRI can be a reference to a database that stores the collection. It can be appreciated that still other alternatives for storing collections of information may be suitable.","In accordance with an aspect of the invention, the text of the DRI  may be made up of a string of characters which includes a random text component. This randomly (and thus, unguessable) generated text serves to prevent access to a collection because it is virtually impossible to guess. Identifying a collection with an identifier that has no correlation to the content of the collection may present a strong impediment to hacking attempts; the hacker simply has no idea where the collection may be located, or that the collection even exists.","The example DRI \u201c\/root\/usr\/collection\u201d assumes a single-machine architecture. In a more generalized configuration of two or more machines, the DRI can include a machine name component. For example, a more accessible format such as the URL (universal resource locator) format for identifying world wide web (WWW) pages might be suitable. In accordance with this particular embodiment of the invention, the DRI constitutes the path portion of the URL. Purely by convention, the path portion uses the following naming format according to a particular embodiment of this aspect of the present invention:\n\n. . . \/-DDS-\/ORIGIN\/ . . . ,\n\nwhere\n\n","Thus, for example, suppose a collection is identified by the following URL:\n\n","In this particular embodiment, both the host machine (\u201cmachine1\u201d) and the origin machine (\u201cmachine2\u201d) use the following directory structure and URL naming structure. The host machine has a directory called \u201c-msg-\u201d contained in its respective \u201croot\u201d directory for storing collections. The \u201c-msg-\u201d directory has a sub-directory called \u201cmachine2.com\u201d which contains all the collections originating on \u201cmachine2.com.\u201d Generally, a sub-directory is provided for each machine that can be an originator of a collection.","A DRI represents a collection by providing a unique, secure pointer to a directory or to a file within that directory on a collection server. A person or machine given the DRI will have enough information to access the collection in order to add to or modify the collection.","It is possible to modify a collection by adding new documents, creating annotations in the collection overview, changing the position of thumbnails in the overview or removing existing documents. Every time a collection is modified, the terminal pathname in the collection can be incremented so that the original collection with the original DRI is unchanged and the new collection is in a new directory. This allows a DRI to always point at the same unmodified collection and at the same time, newer versions of the collection are easy to find. In fact, most modern file systems and operating systems allow symbolic links or \u201caliases\u201d to exist between files so that a single data file can appear to be located in two separate directories. Using such links, different versions of a collection can be built without duplicating any data files because a file that appears in the \/1\/ and the \/2\/ version can be linked rather than duplicated.","When a collection server modifies a collection, it is possible to create a new directory like \/2\/ and then create symbolic links in \/2\/ that point at files in \/1\/ without duplicating any files. New files added to this new version of the collection would reside directly in \/2\/ and files which were in \/1\/ and are not in \/2\/ remain without links. The annotations, overview and metadata in \/2\/ would be modified appropriately. This is well understood in the art.","In the preferred embodiment of the invention, scalable vector graphics files or SVG files are used to represent the collection overview and annotations . SVG files are a standard way of creating a visual representation on the World Wide Web and there are many viewers and tools for creating SVG. A collection preferably includes a specially named SVG file which can be used to construct an overview image  for the coversheet  or any display.","The SVG file includes information for displaying the thumbnails of individual documents and media stored in the collection. It also keeps track of annotations or sketch marks that are not part of any individual document. For instance, in a collection overview, the creator of the collection might want to indicate an association between two media files or documents by drawing a circle enclosing both files or drawing a line between them. The circle or line is only stored in the collection overview in the SVG file and is not part of either document. Annotations can include circles, sketch marks, transparent highlighting, text labels, or anything supported by the SVG graphics format.","Metadata about the individual files in the collection and their relationship to other files in the collection is stored preferably in an XML (extensible markup language) file. This information typically includes image width and height, links between images and their thumbnails and links between a document and an image representing that document. The exact format is unimportant as long as the collection server understands how to read and write the format.","Additional information related to the collection as a whole can also be stored in the metadata file. This information might include the time at which the message was created, the subject of the message, the name of the author of the collection, and contact information such as email addresses, fax numbers, etc. belonging to those who should be notified when a collection is altered.",{"@attributes":{"id":"p-0088","num":"0098"},"figref":"FIG. 6","b":["120","100"]},"Collections can be merged. Collections can be forwarded to additional email addresses. Also, actions can be taken on individual media in a collection using notes or actions written on the coversheet. Each of  show more detail for the method and process of this invention.","A new empty collection can be created in the following manner. No existing DRI or collection will be needed for the new empty collection, so in  at block , the \u201cNo\u201d branch is taken. At , no additional documents are needed and then at the following block , no digital objects are created and the process moves to block  in .","At block , the user chooses the \u201cCreate Empty Collection\u201d selector to initiate the creation of a new empty collection. The system then moves to block  in  and determines whether or not media is required for this process. Since an empty collection requires no media, the rest of block  is skipped entirely.","The decision in block  could be driven by the absence of media rather than a decision based on the chosen task. Notice that the difference between creating a new empty collection and creating a new non-empty collection is simply that in the first case, no documents are put in the automatic document feeder of the MFP  and no electronic media is made available to the MFP  in block . In other words, the system could use a single button labeled \u201cCreate New Collection\u201d to initiate both tasks and complete the task in different ways based on whether or not any documents or media were available to the MFP . Decision  would then be relabeled \u201cMedia available?\u201d","Block  in  shows the next decision point. When creating an empty collection, no media is available so blocks , , , ,  and  are skipped.","Turning now to , blocks , , , , , , and  are all decisions made by either the user or made by the MFP . The user can select options preferably through the control panel  of the MFP . For example, the dialog box  shown in  and the virtual keyboard  input shown in  could be used for entering collection subjects  or email addresses  while performing the steps indicated inside the preferences and options block .  shows an example of a dialog box  that could be used for requesting some information from the user of the MFP .  shows a screen shot of a virtual keyboard  displayed on the touchscreen of a Ricoh Aficio  MFP  which is available for capturing information from the user of the MFP . This type of interaction is well understood and known in the art.","While creating a new collection, either a printout must be generated or the information about the new collection, including at least the DRI must be emailed or faxed to someone. Otherwise, the DRI will be lost to all but the collection server and will not be available for adding documents because no one will have or be able to guess the DRI.","At step , if the user indicates that a printout of the coversheet should occur, then the MFP  at step  stores an indicator that a printout of the coversheet should be performed. The indicator can be stored in memory or another appropriate place using means well understood in the art. If the user does not request a coversheet printout, the user and MFP move to the next step, block .","It should be understood that although the options presented in blocks , , , , , , and  are shown in the figure in a particular order, they need not be presented only in that order. It may make sense to present them in a different order or to present some or all of the options at once to the user of the MFP . The user could then decide in what order to address the options or which ones to leave as they are. Typically a set of options like those shown in block  are presented all at once in the form of a dialog box similar to the dialog  shown in . At any time, the user can choose to type in a subject in the subject box , type in an email address in the email box , or select annotate, modify, or print by checking the appropriate checkbox . When the user has finished selecting options, she can press a button , either the \u201cOK\u201d button to record the options or the \u201cCancel\u201d button to cancel the selected options.","For creating a new, empty collection, the options shown in blocks , , , and  should be presented in some form to the user. If any of those options are selected, then the corresponding steps , , ,  should be taken. In the case of a new collection, one of printing out the coversheet or faxing or emailing the collection identifier\/DRI should be done. If the user indicates not to print at  and provides no contact information at , the MFP  should either print the coversheet anyway or let the user know that an email address is required. Without one of these options being activated, it is not necessary to complete the rest of the task because the collection will not be available to anyone.","When a user is adding to an existing collection, it is not necessary to have an email address or print, because that user already has a collection coversheet with the collection ID on it and the collection may also be associated with a set of one or more email addresses.","Step  is ignored and skipped when creating a new collection because there is no layout to modify. However, it is possible to annotate a new empty collection by adding sketch marks or annotations which are stored in the SVG file as noted previously. If the user chooses to annotate a new empty collection at , then the MFP stores an indicator so that at the appropriate time later in the process the user is given the option of adding annotations.","Step  is not skipped because it is possible to establish all of or a portion of a new empty collection as \u201cadd-only\u201d. A new \u201cadd-only\u201d collection would be analogous to an anonymous ftp site which allows uploads but not directory listings. Such an ftp site is frequently used to allow many people to add documents to a directory where only a few people have permission to view the documents in that directory.","Step  is skipped when creating a new empty collection because it is impossible to browse an empty collection.","There are many other options that will be clear to those skilled in the art which the user can select in block  that are not explicitly shown. It will be understood that it is impossible to enumerate all of the options available to the user and so a representative subset was chosen. It is understood that an option not shown might still be presented by the MFP  and selected by the user and this interaction will be considered within the scope of this invention.","In , at step , since this is a new collection, the \u201cYes\u201d branch is taken. The MFP  contacts the collection server  through the network  to request a new collection identifier or DRI. It should be understood that it is possible for the MFP to request identifiers in advance so that if the collection server is busy or temporarily offline, the MFP  can still create new collections. Preferably, the collection server is available during the operation of this invention.","After block , when creating a new empty collection, no other tasks from  will be performed. None of blocks , , , , , , , or  apply to empty collections and those blocks are skipped.","Now, in , the user is given the option of modifying the collection. Only block , , and  apply in this case. If the user has requested an opportunity to add annotations to this new empty collection, the MFP  can present a canvas and drawing tools like those found in any drawing program. In the preferred embodiment, a pen tool and a text tool would be provided to the user to allow her to sketch or draw on the empty canvas or add text notes or labels. Interfaces for drawing or adding text to a blank canvas are well known. When the user indicates that the annotation step is complete, the MFP  can convert the sketch marks and text into valid SVG elements and store those in the SVG file representing the new empty collection.","In the present invention, it is possible to create \u201cadd-only\u201d or \u201cread-only\u201d collections. An \u201cadd-only\u201d collection allows the user to add documents or media to the collection but does not allow the user to access any of the documents in the collection. For each \u201cadd-only\u201d collection, there must be a corresponding \u201cread-write\u201d or full permission collection which points to the exact same collection of documents but is not restrictive in its access. The primary difference between the two collections with different access restrictions is the pointer with which the collection is accessed.","Suppose a regional sales manager wanted all of her salespeople to submit sales figures electronically using the present invention. She could create a collection which has a text note containing instructions for adding sales data to the collection. She could then create a \u201cadd-only\u201d version of that collection. Using the \u201cadd-only\u201d version of the collection, all the sales people could use the same collection coversheet to add pages of sales information to a collection without being able to access the sales information from other salespeople. The regional sales manager would retain the full permission collection coversheet so that she could access all of the information from the reporting salespeople.","By creating a \u201cread-only\u201d or locked collection, it is possible to give many people access to a collection of documents or media while preventing them from modifying it in any way. A \u201cread-only\u201d collection might have an underlying full-permission collection.","At block  the user would probably not want to create a read-only collection because there is nothing to read when creating an empty collection. However, it is possible to create an empty \u201cadd-only\u201d collection and if the user has selected that option in step  while indicating options and preferences, an add-only collection is created.","It is also possible to create a collection which has one or more read-only or add-only regions which are a subset of the complete overview. At block , the overview of the collection is displayed preferably on the MFPs control panel display  and the user is provided with a set of tools which can be used to draw the boundaries of restricted permission regions. These tools could be like the selection tools found in Adobe Corporations Photoshop. Such selection tools and techniques are well known.","For each selected area, a permission could be established including \u201cfull-permission\u201d or \u201cread-write\u201d which is the default, \u201cread-only\u201d, or \u201cadd-only\u201d. Additional different permissions could be assigned as well and are considered to fall within the scope of this invention. Such permission regions could be noted in some metadata file within the collection, including either the main metadata file or a special metadata file which is specific to the permissions.","At block , the \u201cNo\u201d path is taken because the collection is only browsed during the \u201cPrint Collection\u201d or \u201cBrowse Collection Contents\u201d task.","At block , all annotations are sent to the collection server. In other words, the SVG file is created and stored in the collection server at the directory pointed to by the collection identifier or DRI. Also, metadata files are uploaded if necessary.","In , if the coversheet  is to be printed  then at block  the MFP  composes a coversheet . A header block  is created including at least the date and time of the creation of the new collection. The DRI or identifier obtained from the collection server is added to the coversheet at the bottom in human-readable form  and then encoded in a industry standard two dimensional PDF417 type barcode  in the preferred embodiment and added to the upper right-hand corner of the coversheet. The SVG representing the overview  is converted to image form and added to the appropriate place in the coversheet. Additional information might also be added as deemed appropriate. The composition of the coversheet described here is one preferred possibility but anyone skilled in the art will recognize that there are many ways to lay out or compose a coversheet which are within the scope of this invention.","Once the coversheet  is composed it is printed using the printer  of the MFP . The \u201cNo\u201d branch of the decision at block  is taken since this collection is empty and there is nothing to print out other than the coversheet. If an email address was supplied in block , the \u201cYes\u201d branch of decision  is taken and a notification is now sent at block  to the email recipients specified and the task is complete . The user can pick up the printed coversheet from the printer if a coversheet was requested and the recipients of the email notification can check their email for the notification.","In the preferred embodiment, the collection server  is responsible for sending the email notification once the collection has been uploaded and put in place. The specific contents of the email is not important as long as a DRI is provided to the recipient so that the recipient can access the collection. Note that the collection server must be running some type of server like a web server that provides access to the collection once it is uploaded. This is well known and understood in the computing field so no additional explanation is required.","Block  shown in  and in detail in  shows more than 10 tasks that can be performed using the present invention. One task, that of creating a new empty collection has been described. The other additional tasks follow essentially the same path through the flow diagram of  but take different actions in each of the detailed flow diagrams depending on the task. Where necessary, some of the additional tasks will be explained in detail, but many of the operations are easily understood by those skilled in the art and will not be explained exhaustively.","The task of adding to an existing collection requires a collection to exist. To add to that collection at the MFP , the user must have a coversheet  from the existing collection. As mentioned, each collection identifier represents a single collection but collections can change over time. Each time a collection changes, the last path element in the DRI is modified. Those who have access to a single collection are thereby easily given access to all versions of that collection. For this invention, the version name or final pathname of \/0\/has a special significance and means the \u201clatest\u201d or \u201cmost recently created\u201d version.","Preferably, pathname \/1\/ indicates the first version of the collection, \/2\/ represents the second version, etc. When a new collection is uploaded to the collection server, a new directory using the next integer is created. The next collection after \/2\/ would preferably be called \/3\/. In order to maintain unique version numbers, it is essential that only one device, i.e., the collection server, create the version number of final pathname. The version number cannot be created by the MFP because multiple MFPs might generate a number at the same time and choose the same name. Instead, the MFPs create a collection and upload it to a temporary directory on the collection server and when everything is uploaded, the collection server moves it into place and assigns the final pathname.  shows collection  which is a new version of collection  and  which is a new version of  also. It is easy to imagine two separate MFPs creating new versions of the \/1\/ collection  simultaneously. If they could each choose a version number, they might both choose \/2\/. Instead, the MFPs preferably indicate to the collection server the collection on which the new version of the collections are based and the collection server assigns the new version numbers and prevents naming collisions.","When a document is added to a collection, it might be convenient to add it to the latest version of the collection regardless of which version of the DRI is on the coversheet. In the preferred embodiment, the \/0\/ pathname is chosen to signify the latest or most recent version of a collection. \/0\/ always indicates that any operation take place on the most recent version or latest version available. For instance, if someone creates a new collection it will be labeled \/1\/. After five modifications, the DRI of the latest version ends in \/6\/ in the preferred embodiment. The original creator of the collection might not have a collection coversheet with the DRI of the latest version on it.","Using a coversheet which is labeled \/0\/ for any of the operations enumerated in block  indicates to the MFP that the latest version should be used for the operation. For instance, when a printout of a collection is requested, the MFP would normally print out the version specified in the DRI. If the DRI has a \/0\/ at the end, this would tell the MFP to print the most recent version of the collection that it can access on the collection server. Of course, it's possible to ask the MFP  to print out the most recent version even with a coversheet with a DRI that doesn't end in \/0\/. If the MFP  gives the option to the user to print either the version on the coversheet or the latest version, the user can indicate her preference using the control panel  on the MFP . In each instance of an operation made possible by this invention, it is clear that the MFP could ask the user whether to use the given or latest version of the collection for the operation.","When creating a new collection, many of the steps taken by the user and the MFP are the same as when creating a new empty collection. The first difference is highlighted in the flow chart of . An existing DRI is not needed for this task and so no media or coversheets are required and from block  the \u201cNo\u201d path is followed to block .","If the user has additional paper documents  at decision point , they can be placed on the automatic document feeder  at step . If the user has images or other documents in a memory card or some other media , the media  can be placed in the appropriate reader   or  during step . If there are no existing documents or media to add to the new collection, block  can be bypassed.","At block , if the user wishes to create some electronic media at the time of the creation of the new collection, step  is where the user records audio, video, still images, or other electronic media using any of the microphone  digital camera , video camera , or other media capturing device. If no new media is required, block  can be bypassed.","At block  in , the user indicates that a new collection should be created. Block  in  directs the flow along the \u201cYes\u201d path since media is required for a new non-empty collection. Steps , , , and  are taken to retrieve any media paced on or in the MFP  by the user or recorded by the user. Those skilled in the art will understand that it is possible to find media by checking sensors, activating scanners, or searching file systems on connected memory cards. If the MFP  recorded audio or images using any of the recording devices , , or , it would have kept a pointer to that new media, perhaps in memory  or on an internal storage device  and the MFP  would select the newly created media as well.","If in block  no media was found because the user had not placed any media in a scanner or reader and had not recorded any new media, the MFP , through the control panel , could ask the user if she would like to create a new empty collection. If the response was affirmative, the remainder of the path through the flow charts in  would be the same as creating a new empty collection which has already be described. In fact, it will be clear that it is not necessary for the user to differentiate between creating an empty collection and creating a new non-empty collection because the decisions on which path to take through the task flow charts are the same for both tasks except for a few key places. In those places, when there is media available, one path is taken and when there is not media available another path is taken. The user could just press a button labeled \u201cNew Collection\u201d and if no media was available a new empty collection could be created and if there was media, a new collection with media could be created instead.","At block , the \u201cYes\u201d path is chosen because there is media available when creating a non-empty collection. In block , the MFP  searches through images\u2014the scanned documents  and captured images from a digital cameras ,  or memory card  to find machine readable indicia containing DRIs . Techniques for locating barcodes in images is known in the art and available from a variety of sources.","In addition to searching for barcodes, the MFP  can search for \u201caction requests\u201d or written instructions to perform some action on a particular document in the collection. In the case of creating a new collection, no action requests are handled and so it is not necessary to look for them in block . Action requests will be described in detail when discussing the \u201cPerform noted actions\u201d task from block .","In block , each DRI is associated with the page of the document or image in which it was found. Since a new collection is being created, a DRI is not needed. However, the MFP  can recognize that a page containing a DRI represents a collection. Putting a page with a DRI into any collection, new or existing, could be understood as a request to add that collection to the new collection. In other words, the page containing the DRI represents a request to add the collection pointed to by that DRI to the new collection. The overview image of that collection will be retrieved and added as a thumbnail to the new collection and the subject of that collection will be used as the title for the thumbnail.","At block , the \u201cNo\u201d branch is taken because no action requests will be fulfilled in the creation of a new collection.","As in the creation of a new empty collection, it is desirable to query the user for preferences and options. If the user would like to email the DRI of the new collection to someone, she can indicate which email address or addresses should be notified in block . Only block  and  are different in this task than the new empty collection task described earlier. With an empty collection, there is no layout to modify. However, with a new non-empty collection the user might want to move around the thumbnails that represent the documents that are being added to the collection. Block  represents the inquiry of the user about her preference and block  indicates that the MFP  will store the preference for later recall at the appropriate time. While it is possible to browse a new collection after it has been created, block  and  are primarily related to the \u201cBrowse Collection\u201d task and will be explained in more detail when that task is described. Blocks  and  are applicable to new non-empty collections.","Moving now to block  in block , , the \u201cYes\u201d path is taken to block  because this is a new collection. One or more new identification numbers are requested and received from the collection server . Typically, only a single collection identifier is needed for a new collection. However, if the user desires to add some restrictions to the collection, more than a single collection ID might be needed. When creating an \u201cadd-only\u201d collection where documents can be added but not retrieved, two collection identifiers are needed. Both collection identifiers will point to the same collection. One identifier will allow the user only to add documents or media to the collection and not allow the user to access the documents in the collection. The other identifier will allow full read-write access to the collection. If only a single collection ID had been acquired, there would be no way to access the contents of the collection, only add to it. Permission-based collection ID's will be discussed in detail later in the specification.","In block , each document or page which was found to contain a DRI in machine-readable form is replaced with an image representing the collection pointed to by that DRI.","Blocks  and  are concerned with action requests and are not applicable to the current task of creating a new non-empty collection. Block  applies only to tasks concerning restricted collections and is also skipped. At , a thumbnail is created for each page or document or other media. The thumbnail is preferably a smaller version of the page that is similar in appearance but smaller in storage size and in number of pixels. With recorded audio, a thumbnail is just a representation of the audio and could be a waveform or even an standard computer icon representing the audio. In the preferred embodiment, the audio could be displayed as a rectangle containing a waveform whose shape is based on the audio content and whose length corresponds to the duration of the audio recording. A video thumbnail could be a single frame or a small number of representative frames from the video composited into a single small image. Those who are skilled in the art will understand that there are many various ways of creating thumbnails to represent media. In block , each collection coversheet was replaced with a collection overview image which is now reduced to form a thumbnail.","All of the media and documents for the new collection are now added to the collection at block  which means that they are uploaded to the collection server  and placed in the directory pointed to by the DRI of the new collection. There are many well known protocols for uploading files to a server, including ftp, scp, http PUT. Preferably, the HTTP PUT protocol is used which allows the MFP  to specify the location and contents of each media file as it is being uploaded.","At block , the thumbnails representing the new media items are arranged in the collection overview. The thumbnails are placed in an appropriate manner within the overview, expanding the overview size if necessary. The SVG file representing the overview is written and uploaded to the collection server  and all of the thumbnails are uploaded also at block .","The arrangement and placement of the thumbnails in the overview is shown in a flow chart in  and shown in a pictorial representation in . One preferred method for placing thumbnails is to find a place in the overview image where the thumbnail can be positioned where it will not overlap any other thumbnail. An exhaustive search\u2014moving the thumbnail to different positions within the overview and looking for overlaps with other thumbnails\u2014is too slow. Another approach and the preferred method is to reduce the problem to that of placing a single point. This can be done by reducing the size of the overview by the width and height of the thumbnail to be placed and enlarging the existing thumbnails by the same dimensions. The origin of the new thumbnail can be placed anywhere within the remaining space in the overview without overlapping existing thumbnails. This is known as a \u201cconfiguration space\u201d approach because instead of finding a new thumbnail location in the original two dimensional space of the overview, a new \u201cavailable-space\u201d region is calculated in which the origin of the thumbnail is placed instead of the entire thumbnail. Configuration space techniques for interference checking are well known in the field of robotics and path planning.","At block , the size of the thumbnail to be added to the overview is determined. Thumbnail sizes are usually measured in pixels. Often thumbnails are chosen to be some standard size\u2014chosen so that they neither the width nor height is larger than a certain maximum size\u2014perhaps 150 pixels for standard display resolutions or two inches for printed thumbnails. Since some images might have a very large or very small aspect ratio, it might be more appropriate to limit the thumbnail to a maximum area\u2014square pixels or square inches\u2014rather than a maximum width and height.","For instance, an image that is 1000\u00d720 pixels (width\u00d7height) would be 150\u00d73 if made into a thumbnail based on a 150\u00d7150 pixel maximum size. A thumbnail that is only 3 pixels in height is not very useful.","A thumbnail that is 150 pixels by 150 pixels would have an area of 22,500 total square pixels. If, alternatively, each image was scaled so that it contained at most 22,500 pixels, then the same 1000\u00d720 image, already having only 20,000 pixels, would not be reduced in size and the original image would be used as the thumbnail. An image having 500\u00d780 pixels would have 40,000 pixels and would be reduced to 325\u00d760 pixels totaling 22,500 pixels and maintaining the original aspect ratio.","Scaling an image so that it contains no more than some total number of pixels instead of restricting the width and height to be less than some maximum improves the overall appearance of the thumbnails and is the preferred method of selecting a thumbnail size. However, any method for choosing thumbnail sizes can be used for the present invention.","In block , a \u201cbounding box\u201d is determined for all the thumbnails and annotations in the current overview of the collection. Picture  shows the calculated bounding box  completely covering all of the thumbnails in the overview. The calculation of a bounding box is well known in the art.","At block , the available area of the overview for thumbnail placement is reduced by the width and height of the thumbnail to be added. Picture  shows this reduction by the area . At block , the bounding box of the existing thumbnails is enlarged by the width and height of the chosen thumbnail. In this example, shown also in picture , the new bounding box extends above and to the right of the overview and the extension beyond the boundaries of the overview are ignored. The new bounding box  is shown in picture .","At , the available open space is calculated and then at  a point is chosen which will be the origin or upper-left corner position of the thumbnail. The preferred point is shown in picture  at point . Picture  shows the final overview with the thumbnail placed at .","In block , a single bounding box for all the thumbnails previously placed on the overview was calculated and the origin of the new thumbnail was placed outside of that bounding box. It is also possible and understood by extension that instead of calculating just a single bounding box, an individual bounding box for each thumbnail may be calculated and extended so that the new thumbnail can be placed in any available position in the overview. This is well understood by those experienced with path planning algorithms and would be analogous to allowing a machine to travel between obstacles instead of requiring the robot to go around all the obstacles.","Adding a second new thumbnail now to the overview shown in  could be accomplished using the steps shown in . However, instead of adding one bounding box to cover all the thumbnails, simply adding a single box representative of the newly added thumbnail is the preferred approach. This box is calculated to be the size of the newly added thumbnail and then is extended up and to the left by the width and height of the thumbnail to be added, just like the first bounding box. The advantage of adding a new additional bounding box instead of redoing all the steps shown in  is that the next thumbnails can be added alongside the one that was just added. If a new overall bounding box was created instead, there would be a tendency for all new thumbnails to be placed below the one just added leaving a large amount of open space in the message.","Note that if there is no available space in the overview after calculating the bounding box and reducing the size of the overview, it is possible to extend the overview downwards to accommodate new thumbnails.","Back to block  shown in , all new thumbnails are uploaded to the collection server as well as the new overview description file and metadata file.","Now, in , since this is not a read-only collection, the \u201cNo\u201d path from block  is taken to block . If the user has requested that she be able to modify the overview, at  the overview could be displayed on the MFPs control panel display  and the user could move or resize thumbnails of the newly added documents. The user could also remove objects from the collection if so desired.","If requested, the \u201cYes\u201d path would be followed from block  and the user could add annotations at step  on the same overview display . Modifying the overview and adding annotations could be accomplished using an object-based drawing tool like those available in Microsoft's PowerPoint software or Adobe Illustrator or similar tools. These tools and techniques are well understood by those skilled in the art. The new annotations would be converted to the appropriate SVG elements and stored in the collection overview file.","At block , if the user has indicated a preference at block  to add permission regions, the overview could be displayed and selection tools could be presented to the user which allows the selection of regions of a variety of shapes on the overview. \u201cRead-write\u201d, \u201cread-only\u201d, or \u201cadd-only\u201d permissions could be applied to each drawn or selected shape on the overview. Documents beneath a \u201cread-only\u201d selection region would be fixed and unchangeable in future interactions with the collection. Documents covered by an \u201cadd-only\u201d region would not be seen in the \u201crestricted\u201d coversheet printed at block  and could not be accessed using restricted collection identifiers or DRIs.","At block , all modified information is sent to the collection server,including the metadata files, SVG overview file, and any changes in the collection.  At , if requested, the \u201cYes\u201d path is taken and a coversheet is printed. This coversheet  preferably includes the elements shown in  as described for new empty collections with the exception that the overview area  is not empty but shows the thumbnails of the media and documents including any annotations and modifications made by the user. If the user has requested a collection with at least one add-only region, then two coversheets should be printed. One printed coversheet is a normal collection coversheet with no permission restrictions. In other words, the DRI encoded in the barcode on the coversheet is associated with the full-permission collection containing all of the media and documents. Using the full-permission coversheet, it is possible to access all of the documents stored in the collection including documents added in the future. It is important to have available a coversheet without restrictions. If only the restricted coversheet was available for an \u201cadd-only\u201d collection, then documents could be added but never retrieved.","The other printed coversheet will be the one for the restricted collection. The collection identifier or DRI printed on the restricted coversheet will point to a restricted collection and can be used only in the manner allowed in the restrictions. For instance, the add-only coversheet of a collection would only allow the user to add documents and not to see documents that have been added.","The \u201cNo\u201d path from block  is taken since the user has not selected the \u201cPrint collection\u201d task. If email addresses have been specified in block , then the collection identifiers and optionally an overview image are emailed to the people who are supposed to be notified. In the case of restricted collections, there might be two sets of email addresses\u2014those who are to receive the restricted collection identifier and those who are to receive the full-permission identifier. All email recipients are notified appropriately at block .","Although it is not shown in , it is possible to notify by fax as well as email. Many other methods of notifying recipients of an available collection will be known to those skilled in the art and recognized as falling within the scope of this invention. For instance, if a fax number were supplied by the user of the invention and a faxed notification were requested, the MFP  could fax the appropriate coversheet to the number specified.","Suppose that the user of the present invention would like to add one or more documents or media to an existing collection. This task corresponds to the \u201cAdd to Existing Collection\u201d task shown in block .","As in the \u201cCreate New Collection\u201d task, the user brings media to the MFP  or creates it using media recording devices ,  , , and  or the like connected to the MFP  or to the network . Creating or collecting documents and media was explained in conjunction with the \u201cCreate New Collection Task\u201d. The main difference between creating a collection and adding to a collection is that the MFP needs to know to which collection to add new media.","The advantage of having a machine-readable collection identifier on a coversheet is that the MFP or any device which can locate and decode machine-readable codes can determine which collection is represented by the coversheet. The \u201cYes\u201d path is followed from block  for the \u201cAdd to Collection\u201d task. The user can indicate which collection the new media will be added to by typing in a collection identifier or DRI but this can be a difficult task because DRIs tend to be long random strings of characters. DRI's can be located and decoded from a scanned image or read using handheld barcode scanners if they are encoded in barcode format. Handheld scanners which read many different types of one and two dimensional barcodes are available from many companies like Hewlett-Packard Company of Palo Alto, Calif., USA. They can be also be read in text form using optical character recognition technology or decoded from a magnetic strip if properly encoded. If a coversheet of the collection is available, the coversheet should be placed on the MFP where it can be scanned, either in the automatic document feeder  or directly on the glass platen . Alternatively, the barcode can be scanned using a handheld scanner . If the barcode has been captured in a digital image, perhaps using the digital camera , the camera  can be directly connected to the MFP  or the memory card  from the camera can be plugged into the card reader . There are many other methods for presenting the MFP  with a machine-readable DRI and those methods and techniques are not enumerated here because they are understood by those skilled in the art.","The present invention conveniently prints out a machine-readable DRI as part of the coversheet of the collection. In the preferred embodiment the DRI is contained in a PDF format two-dimensional barcode on the coversheet and the coversheet is placed on the automatic document feeder  of the MFP . Additional documents or pages to be added to the collection are placed behind the coversheet. The additional pages can be any document pages or they can be coversheets of other messages.","Of course additional media can be captured or provided in some other way to the MFP  when the coversheet is placed in the automatic document feeder.  At block  or specifically block , the user can indicate a desire to \u201cAdd to Existing Collection\u201d. Since at block , media is required for the process, any documents placed in the automatic document feeder (ADF)  are processed and scanned and the images from those documents are stored in the storage  of the MFP  for more processing. Any documents on the platen  are also scanned and media from the memory cards  and other devices is retrieved at block  and . These media and documents will be added to the designated collection.","The \u201cYes\u201d path from block  is followed because there is media available. Each of the documents and media is searched for a machine-readable DRI. When a barcoded DRI is scanned using a handheld scanner, the DRI can be stored in the memory  of the MFP  so that it can be accessed when it is time to determine which collection to add the new media to. If the ADF  or platen  has been used to scan in a coversheet or if the DRI is contained in an image from the digital camera, the DRI will have to be read from the scanned or captured image in this step . Either source of a DRI is acceptable and typically, if there is no DRI held in memory  due to hand scanning of a coversheet, the first scanned sheet or first image will contain the DRI. Those skilled in the art will recognize that there are many ways of providing the DRI to the MFP  an exhaustive list need not be provided.","At block , while adding to an existing collection, no action requests are expected and therefore none will be located or decoded for this task. Since none were decoded, the \u201cNo\u201d path is taken from .","In block , all of the typical options and preferences are available to the user and this block is handled as explained previously.","In block  at block , this is not a new collection and so the \u201cNo\u201d path is followed to block . As mentioned previously, if the DRI was not scanned in by hand, the \u201cexisting collection\u201d DRI is taken from either the first scanned image or the first digital image. If a DRI is not found, the user can be asked if she wants to create a new collection. If a DRI is found in more than one place, either the user can be asked which to use as the existing collection, or one location can be given a higher priority and used first.","If the DRI found in step  turns out to be a read-only collection, no documents can be added. In that case, some indication or error message should be displayed on the control panel  of the MFP  to indicate that a collection cannot be modified and the task is complete.","If it is not read-only, then step  is taken. All of the image media including images which are scans of document pages is searched for machine-readable codes in step","Typically, when adding a page or document to a collection, the image of that page is added to the collection storage area and a thumbnail is added to the overview. If that page happens to contain a machine-readable DRI then based on the users preference, instead of adding the page to the collection, the collection that the DRI represents can be added to the collection. In step , for each page or image containing a DRI, the \u201cpage add\u201d request is converted into a \u201ccollection add\u201d request with the appropriate DRI representing the collection.","Block  represents the results of an action request and will not be discussed here because the block is passed over for the \u201cAdd to Existing Collection\u201d task.","Block  indicates that annotations found on the coversheet should be added to the existing collection. In other words, if it is discovered by the MFP  that the collection overview has been modified, the marks made on the collection overview should be added to the collection overview when the new media is added.","Locating marks on a collection overview can be done in many different ways. One way will be described in detail. Suppose that a collection coversheet is printed out on a black and white or grayscale printer. Marks can be made on the overview part of that coversheet using a red pen. Those marks can easily be separated from the original image using colored filters. For instance, most digital cameras use arrays of red green and blue filters over their image sensing elements. If all of the pixels which contain some red are separated into a separate image, that image can be used as an overlay where non-red pixels are transparent and red pixels are painted on top of the original overview.","Since the overview is defined programmatically in the SVG file, it is also possible to construct an expected overview image for a collection and the expected image can be compared to the scanned or photographed image to look for differences. First, all the pixels of the actual image should be adjusted equally to match the overall contrast and brightness of the captured image. Then, all significantly different pixels could be extracted\u2014for instance, pixels that originally appeared white but are now black could be separated and considered a new annotation.","Regardless of how the annotations are found, they can be converted into a semi-transparent overlay on top of the original overview or converted into lines and other shapes and inserted as annotations into the SVG file.","Block  does not apply to the present task and so block  is entered.","At block , thumbnails are created for all of the new images, documents, pages, and media. For those pages which represent other collections, thumbnails are made for the collections instead of the page. At , all collected media is uploaded to the collection server.","Step  was skipped because a new collection identifier was not needed. However, it is important that the existing collection be changed in a way that makes the current state or version of the collection available at a later time. The new media should not be placed in the same storage area as the existing collection. Someone else might modify the same collection and try to access information or media that is no longer there.","As described in the section about DRI's, collections can have multiple versions. In other words, the first version of a collection might end with the \/1\/ pathname. The second version might end with the \/2\/ pathname, etc. When a collection is modified, the collection retains most of the same DRI, but has a different final pathname to indicate that it is a different version of the collection. This allows older versions of the collection to be available even as the collection is modified.","Typically, new media and thumbnails in a collection are uploaded to a staging area on the collection server. The staging area is associated with the collection identifier but doesn't have a permanent final pathname. As soon as all of the information has been uploaded and is complete, the collection server moves the collection into a final directory or storage area with a permanent final pathname. The permanent final pathname is usually the next integer after the most recently uploaded collection.","At block  and as shown in , all of the thumbnails representing the new media are added to the collection overview.  show an example of a coversheet before and after a new document is added. , the before picture , contains seven thumbnails representing a combination of scanned pages and digital images. , the after picture , includes a thumbnail  representing a collection that has been added to the collection. The thumbnail  is a small version of the overview of the added collection.","At block , all of the thumbnails, metadata, the overview SVG file, and new annotations (which are described in the overview SVG file) are uploaded to the staging area in the collection server.","Since this is not a read-only collection, the \u201cNo\u201d path is taken from block  and modifications are allowed to the collection. All of the automatic modifications were made in block  and now the user is allowed to make modifications. Depending on the user preferences, at block  the user may be allowed to move or resize thumbnails or remove documents or media from the collection. Block  represents changes to both the overview and the collection itself. Documents can be removed from the collection in . At , annotations may be added or erased from the collection overview. This block  only represents changes made to annotations or things that appear in the overview SVG file.","If the user has indicated a desire to modify permissions of this collection, block  is where those modifications are made and possible modifications have been described when detailing other tasks so they will not be repeated here.","At , all changes and modifications are finally uploaded to the collection server  and at this point, the server has everything required to move the collection out of the staging area and into the final directory upon assigning a version number.","Note that if the user created a restrictive permission region in the modified collection, it will be necessary to get from the collection server a second identifier that represents the restricted collection.","Permissions are preferably handled and differentiated using collection identifiers. In other words, the collection server  should know that a single collection can be accessed using different pointers or identifiers and the identifiers indicate which permissions are allowed. This is analogous to Unix file system permissions and symbolic links. Each data file in a Unix file system has at least one pointer to the file stored in a directory. Links can be created which exist in other directories or perhaps in the same directory but with a different name. These links point to the exact same data on the disk as the original file, but have different metadata. That metadata includes the filename and full pathname, as well as file permissions. Unix files can be given restricted access which limits or allows certain individuals to read or write the file. A file can be set up so that it can be read, written, or deleted by anyone. The same file, through a link, can be given a more restrictive set of permissions, perhaps only letting one or a few people read the file and letting no one delete it. Even though the same data is pointed to by the two different pointers, what can be done with that data depends on the restrictions specified on the pointers, not on the data.","A collection server  can keep a mapping of collection identifiers to collection directories and keep track of which identifiers have read and write permission. When an MFP  makes modification requests to a collection server, if the identifier used to make the request is restricted in a way that doesn't permit that type of modification, the collection server can respond negatively.","Two possible options for maintaining permission information are shown in . As shown in , the permissions metadata can be kept in the directory containing the documents in the collection. This requires no duplication of data and only a single directory for each version of a collection.  shows an equally useful alternative where the directories are distinct but one uses links between the data files to avoid duplication of data. In the case of , the permissions information is kept only in the directory where there are permission restrictions.","Since collections can be stored in hierarchies, there are times when a \u201cread-only\u201d collection contains another collection which might not be \u201cread-only\u201d. The preferred way of handling hierarchy inside of a \u201cread-only\u201d collection is to provide a link to a \u201cread-only\u201d version of the contained collection. In other words, any collection A marked as read-only can only provide links to other read-only collections. If the collection B is added to the read-only collection A but does not have a read-only version, a new read-only collection C could be created for the collection B and the identifier for new collection C could be shared or stored in the original read-only collection A.","At , if a coversheet is to be printed, it is printed at block  as before described. In some cases, multiple coversheets might be printed so that a full permission coversheet is available as well as a restricted permission coversheet.","The \u201cNo\u201d path is taken from block  because this is not a printing task. At , if the existing collection had contact information already associated with it and those were not removed by the user or if a list of recipients was given by the user at , those recipients are notified by the appropriate method, including but not limited to email or fax.","Turning to the task entitled \u201cModify Existing Collection\u201d. \u201cModify Existing Collection\u201d is essentially the same as \u201cAdd to Existing Collection\u201d where what is added is nothing. The differences between the two tasks are described here briefly. The \u201cNo\u201d paths are followed from blocks  and  since no additional media is needed or expected. \u201cModify Existing Collection\u201d is selected at block . However, if \u201cAdd to Existing Collection\u201d was selected but the only media made available to the MFP  was the coversheet of the collection to be modified, it would fall back to \u201cModify Existing Collection\u201d allowing a new version without new media to be modified and annotated and then forward optionally to a different group of recipients. Also, if \u201cModify Existing Collection\u201d were selected and some actions were requested on the collection coversheet, those actions could be performed as if \u201cPerform Noted Actions\u201d were selected instead. In block , a new version of the collection will be created, but no thumbnails are created, and no new media or documents will be uploaded to the collection server . All other blocks are essentially the same as with \u201cAdd to Existing Collection\u201d.","The \u201cPerform Noted Actions\u201d task is driven by annotations on a coversheet. Multiple coversheets can be marked up and all actions performed in sequence if all the coversheets are put into the ADF  at once.","\u201cPerform Noted Actions\u201d is based on marks made on the collection overview on a coversheet. , B, and C show various marks that might be made on the overview part of a collection coversheet.  shows a coversheet  with an F! mark and a number drawn at  near a circled document. At , a note \u201cKeep me informed\u201d has been written on the overview. Neither of these marks are part of the original coversheet.","Marks on a coversheet can be extracted in a variety of ways at block . If a special pen color such as red is used, that color could be detected in a color scan or image of the coversheet and all instances of that color in an image would be considered part of the marks made by the user. An alternative would be to compare the overview with an image based on the overview SVG file as previously described. Differences would be considered marks.","The types of marks that are interesting for the present invention are action marks which include, for instance, \u201cF!\u201d, \u201cE!\u201d, \u201cP!\u201d, or \u201cG!\u201d. These marks stand for \u201cfax\u201d, \u201cemail\u201d, \u201cprint\u201d, and \u201cgroup\u201d and represent actions that can be taken on one or more documents or media in a collection. It will be recognized that this is not an exhaustive list of possibilities but a representative list of things that might be done with documents or media.","Once the marks are extracted from the overview, they could be analyzed to find action requests and circled documents at . Optical Character Recognition software or OCR software could be used to locate and decode characters written in the marks. OmniPage Office from ScanSoft, Inc, of Peabody, Mass., USA sells software for finding characters in images.","Circled regions could be identified using a variety of known techniques. Many companies, such as Arbor Image Corporation in Ann Arbor, Mich., USA and Arc En Ciel Ltd based in London, England have raster to vector conversion tools. These tools can recognize circles in raster images. Such tools could be used to find circled documents.","Circled documents will need to have an action command near them. Some commands require additional information like a fax number or email address. If action commands are ambiguous, feedback can be provided to the user and the user can disambiguate the action request either using the MFP control panel .","Marks that are neither characters or circles could be recognized as annotations at  to add to the overview at .",{"@attributes":{"id":"p-0200","num":"0210"},"figref":["FIGS. 15A","FIG. 15A"],"b":["15","15","1500","102","1508"]},{"@attributes":{"id":"p-0201","num":"0211"},"figref":"FIG. 15B","b":["1502","1504"]},{"@attributes":{"id":"p-0202","num":"0212"},"figref":"FIG. 15C","b":"1506"},"Many such action requests could be imagined and driven by standard OCR and raster-to-vector conversion software.","The \u201cPrint Collection\u201d task is different than most of the other tasks because no new collection or version is made. Multiple collections can be printed at once by providing the MFP  with multiple coversheets either in digital images or in the ADF . For each DRI found in an image or scan, the MFP  contacts the collection server  and retrieves documents and media.","Starting in block , the user provides the MFP with one or more DRIs of collections to be printed using the methods previously described for other tasks. At , \u201cPrint Collection\u201d is chosen. At , if a DRI has not been provided through the handheld scanner, some media must be provided through the ADF , on the platen  or through some other device , , or . As in other tasks, the machine-readable code must be located and decoded in . Some print actions might be driven by action requests as discussed in the \u201cPerform Noted Actions\u201d section. Those action requests are discovered in block  and associated with the appropriate document in . At , if the current chosen task might have action requests that need to be discovered, for instance \u201cModify Existing Collection\u201d, the \u201cYes\u201d path is taken and the marks are extracted , analyzed , and retained  for later operation on the collection.","During the \u201cPrint Collection\u201d task, a more limited set of user options and preferences might be displayed on the MFP control panel display  than those displayed for other tasks. After the execution of step , moving through step  along the \u201cNo\u201d path to , the DRI associated with the coversheet is used to access the collection to be printed on the collection server . At , the \u201cYes\u201d path is taken since this is a print request.","In block , some modification of the message might be allowed as in other tasks, but if this is strictly a printing task, block  can be bypassed with no modifications and no upload of a new collection version.","At block , no coversheet is need for a print request and the \u201cNo\u201d path is taken to block . Since printing has been requested specifically the \u201cYes\u201d path is taken to block  and each of the individual documents is printed as requested.","If in the user preferences block  at step  the user has requested an opportunity to browse the collection, then at block , the \u201cYes\u201d path is taken to block  and the user can browse the collection using the control panel  on the MFP . Browsing a collection of documents is similar to browsing on the World Wide Web. If a media document is shown in a collection and can be printed, then the user could be permitted to select the document and choose print. There are many examples of browsing styles using either direct manipulation with a mouse or using the cursor and tab keys to move between selectable objects like documents. Those skilled in the art will have seen many different approaches to browsing and selecting and the user interface is not described here but has the following properties: providing access to all documents and media objects in the collection, providing the opportunity to replace the current collection overview shown in the display with the selected object, including but not limited to a collection contained in the current collection, providing a way of executing commands like \u2018print\u2019, \u2018view\u2019, \u2018delete\u2019, or other commands as appropriate, and providing a way of moving back up the collection hierarchy after descending into other collections.",{"@attributes":{"id":"p-0210","num":"0220"},"figref":["FIGS. 17A","FIG. 17A","FIG. 17B"],"b":["17","17","120","106","1700","1702","1700","100","120","1704","1706","100","120","1706"]},"If some of the collection has been printed at ,there is no need to print at  and the \u201cNo\u201d path is taken as well as the \u201cNo\u201d path for  since there is no need for notification when printing.","Another task to consider is the task titled \u201cMerge Collections\u201d in block . A user might have multiple coversheets representing documents and media in more than one collection. If the user desires to combine the documents and media contained in all of the collections into a single collection, she might choose the \u201cMerge Collections\u201d task. , B, C, and  show a special case of merging of different versions of a collection but the technique is applicable to merging any group of collections.","The most trivial way to \u201cmerge\u201d collections of course is to create a new collection which contains all of the other collections in a hierarchical message where each of the \u201cmerged\u201d collections is represented as a thumbnail in the new collection overview and is accessible from the new collection. However, sometimes the user would want the documents and media merged into a single collection with no hierarchy.","The task when merging is to place all of the documents and media into a single collection on the collection server. At the same time, an overview should be created which contains all of the thumbnails of the media.","Particularly in the special case of merging versions of a collection, some media might be redundant in that it is contained in both versions of the collection and only some media is only contained in one. For instance, in , the overviews of five different versions of a collection are shown , , , , and . Versions 2  and 3  were both based on version 1  and therefore have some common documents. Version 4  is based on version 3 . Version 5  will represents the new merged version is based on version 4  because version 4 of the collection contains more unique documents or perhaps was created most recently of all the versions.","The user could take the coversheet for any existing version of the collection and place it in the ADF  and select \u201cMerge Collections\u201d. Since there is only one coversheet, the MFP  could try to merge the terminal versions of the collection indicated and could begin by verifying that the user wanted to merge the various versions of the collection into a single collection. If the user indicated in the affirmative, then the MFP  could gather information about all the versions of this collection , , , and  represented by the DRI on the coversheet and begin to merge the versions. In all cases, only the terminal versions of the collection need to be merged. Another way to say it is that if the version hierarchy forms a graph where version 1  is the root of the tree, the only leaves of the graph are version 4  and version 3 . By looking at the hierarchy of the collection, only version 4  and version 3  have not been used to create on of the other versions of the message.",{"@attributes":{"id":"p-0217","num":"0227"},"figref":["FIGS. 20A","FIGS. 20A and 20B"],"b":["20","20","2016","2018","2008","2010","2012","2020","2022"]},"First the common documents and media are placed as close to their original position as possible. Second, the unique documents and media from one of the collections is placed in the new collection or new version. In the case of creating a new merged version, it ios preferable to do the first two steps by creating a new version of the message from one of the leaves and in this example, version 4  is chosen because it contains more documents than version 3 . Then, taking the unique documents from version 3 , each document is copied to the collection server  and the thumbnails are added to the collection overview as shown in . Alternatively, the remaining documents could be added to the new version in their current configuration below the bounding box of the common documents.  shows the end result of the version merge where all media and documents are now contained in a single version of the collection, version 5, whose overview  is shown in  and . At the users discretion or request, the annotations from both collections or both versions of the collection are also transferred. Annotations which have endpoints on documents or cross documents will be kept with the documents and other annotations will be placed where appropriate. At the user's request in block , the new collection could be presented for modification in block  and annotations could be redrawn or deleted and the document and media thumbnails could be moved or resized, even deleted if so desired. Finally, in block , the newly merged collection coversheet could be printed. If there were email addresses or contact information associated with the collection, the contact information could be merged in a similar manner so that everyone listed as a recipient of notification in both collections would be added to the new collection.","As noted above, new versions of collections can be created from any existing version of a collection. Version 3  and version 4  are from the same collection but contain different media and were created from different versions of the collection. Sometimes, in order to reduce branching of collection versions, the user might want to always add information to the most recent version of a collection instead of adding it to the version. The version which ends in \/0\/ is a special version which means \u201cthe latest\u201d version. Whenever the user uses the \/0\/ DRI in an operation at the MFP , the MFP tries to base the operation on the latest version of the collection in the collection server.","One task available to users of the present invention is to print out the \/0\/ version of the coversheet given any other version. For this task, the user presents any version of a coversheet to the MFP  in any of the aforementioned ways, indicates to the MFP at block  on the control panel  that the \/0\/ coversheet should be printed. The MFP  talks to the collection server  to retrieve the latest version of the collection. When the coversheet  is printed, the machine-readable  and human-readable  DRIs both end in \/0\/ and whenever that coversheet is used to modify a collection, the modifications are made to the most recently uploaded collection.","It should be noted that although this specification specifically refers to a single collection server, there are many ways to distribute information so that collections are kept in multiple places and made accessible from multiple places. It is well understood in the art how to distribute files so that they are available locally even if they were created somewhere distant. Also, there is nothing that prevents the existence of multiple collection servers, particularly when using the DRIs described as part of the present invention which have as part of their name the machine on which the collection was originally created.","There are times when part of all of a collection should be restricted to be either read-only or add-only. The two remaining tasks shown in block  are \u201cMake Read-only Coversheet\u201d and \u201cMake Add-only Coversheet\u201d. Elements of both of those tasks have already been described in conjunction with the descriptions of blocks , , and  during the \u201cAdd to Existing Collection\u201d and \u201cModify Existing Collection\u201d task descriptions. One possible modification to an existing collection is just to restrict the operations that can be done on the collection.","If the user would like to create a collection that cannot be modified, she could take the coversheet of an existing collection and select the \u201cMake Read-only Collection\u201d task in block . The MFP  would present the collection overview in block  after following the flow of the invention appropriately through  as has been described for other related tasks. At , the user would be permitted to draw or sketch regions and assign permissions to those regions in order to restrict the operations on each of the documents and media in the collection.","Suppose the user wanted to create some instructions which she did not want modified but then still wanted other users to be able to add documents and annotations to the collection. As shown in , the user can sketch a region  which protects the part of the overview she would like to remain static, leaving the remaining overview region available for adding notes, annotations and other media.","If a second user brings the coversheet with the read-only region to the MFP  to add some documents, those documents will be added only to the region which is not protected as shown in . Documents  and  have been added in  and were placed outside the read-only region defined by the first user.","A second example is shown in  where there are 3 regions defined. Regions  and  on coversheet  are both read-only. Only region  has both read and write permissions. After using the coversheet  to add some documents to the collection, the coversheet looks like it does in  where documents  and  have been added. Another person might have a coversheet where  has full pennission but  and  are restricted as read-only. That person can only add and modify things in region . This provides a shared space where each coversheet represents an area which can be modified and at the same time providing access to information added to other regions.","An \u201cAdd-only\u201d coversheet can be made using the same technique as the read-only coversheet only the restriction is that people can add documents to the add-only region but not see what has been added.","The present invention has been described in connection with a specific implementation of a typical embodiment thereof. It will be understood by those skilled in the relevant art that many changes can be made without departing from the true spirit and scope of the present invention. Therefore, it is intended by the appended claims to cover all such changes and modifications which come within the true spirit and scope of this invention."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["An understanding of the present invention is provided by the following figures along with the discussion that follows, where:",{"@attributes":{"id":"p-0010","num":"0017"},"figref":"FIG. 1A"},{"@attributes":{"id":"p-0011","num":"0018"},"figref":["FIG. 1B","FIG. 1A"]},{"@attributes":{"id":"p-0012","num":"0019"},"figref":"FIG. 1C"},{"@attributes":{"id":"p-0013","num":"0020"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0014","num":"0021"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0015","num":"0022"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0016","num":"0023"},"figref":"FIG. 5A"},{"@attributes":{"id":"p-0017","num":"0024"},"figref":"FIG. 5B"},{"@attributes":{"id":"p-0018","num":"0025"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0019","num":"0026"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0020","num":"0027"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0021","num":"0028"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0022","num":"0029"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0023","num":"0030"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0024","num":"0031"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0025","num":"0032"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0026","num":"0033"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0027","num":"0034"},"figref":"FIG. 15A"},{"@attributes":{"id":"p-0028","num":"0035"},"figref":"FIG. 15B"},{"@attributes":{"id":"p-0029","num":"0036"},"figref":"FIG. 15C"},{"@attributes":{"id":"p-0030","num":"0037"},"figref":"FIG. 16A"},{"@attributes":{"id":"p-0031","num":"0038"},"figref":"FIG. 16B"},{"@attributes":{"id":"p-0032","num":"0039"},"figref":"FIG. 17A"},{"@attributes":{"id":"p-0033","num":"0040"},"figref":["FIG. 17B","FIG. 17A"]},{"@attributes":{"id":"p-0034","num":"0041"},"figref":"FIG. 17C"},{"@attributes":{"id":"p-0035","num":"0042"},"figref":"FIG. 18"},{"@attributes":{"id":"p-0036","num":"0043"},"figref":["FIG. 19","FIG. 18"]},{"@attributes":{"id":"p-0037","num":"0044"},"figref":"FIG. 20A"},{"@attributes":{"id":"p-0038","num":"0045"},"figref":"FIG. 20B"},{"@attributes":{"id":"p-0039","num":"0046"},"figref":"FIG. 20C"},{"@attributes":{"id":"p-0040","num":"0047"},"figref":"FIG. 21"},{"@attributes":{"id":"p-0041","num":"0048"},"figref":"FIG. 22A"},{"@attributes":{"id":"p-0042","num":"0049"},"figref":"FIG. 22B"},{"@attributes":{"id":"p-0043","num":"0050"},"figref":"FIG. 23A"},{"@attributes":{"id":"p-0044","num":"0051"},"figref":["FIG. 23B","FIG. 23A"]},{"@attributes":{"id":"p-0045","num":"0052"},"figref":"FIG. 24A"},{"@attributes":{"id":"p-0046","num":"0053"},"figref":"FIG. 24B"},{"@attributes":{"id":"p-0047","num":"0054"},"figref":"FIG. 25A"},{"@attributes":{"id":"p-0048","num":"0055"},"figref":"FIG. 25B"}]},"DETDESC":[{},{}]}
