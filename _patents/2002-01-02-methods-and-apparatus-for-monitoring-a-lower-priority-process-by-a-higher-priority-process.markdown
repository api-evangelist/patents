---
title: Methods and apparatus for monitoring a lower priority process by a higher priority process
abstract: The monitoring of a worker process by an executive process. A worker process periodically sends a signal to an executive process, such as via a call to a heartbeat interface, which receives the signal and determines whether the worker process is improperly functioning. If the worker process is improperly functioning, the executive process terminates the worker process. The executive process may also examine the worker process for diagnostic purposes before terminating, or returning control to, the worker process.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07051331&OS=07051331&RS=07051331
owner: International Business Machines Corporation
number: 07051331
owner_city: Armonk
owner_country: US
publication_date: 20020102
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DESCRIPTION OF THE PREFERRED EMBODIMENT","Overview","Technical Background","Executive Process Monitoring of Worker Process","Advantages over the Prior Art","Alternative Embodiments"],"p":["1. Technical Field","This invention relates generally to worker processes that may be improperly or maliciously functioning, and more particularly to monitoring such worker processes by an executive process.","2. Description of the Prior Art","Modern computer systems typically have firmware, or other non-volatile memory. Firmware is generally a category of memory chips that hold their content without electrical power and include read-only memory (ROM), programmable ROM (PROM), erasable and programmable ROM (EPROM) and electrically erasable and programmable ROM (EEPROM) technologies. Firmware becomes \u201chard software\u201d when holding program code. For example, in some computer systems, the firmware may include the basic input\/output system (BIOS) of a system. The BIOS is a set of routines in a computer, which is stored on a chip and provides an interface between the operating system and the hardware. The BIOS supports all peripheral technologies and internal services, such as the real-time clock.","Within firmware and other computer operating environments, there generally exists a limited-functionality operating mode for performing hardware diagnostic testing, which is also known as performing diagnostics. Hardware diagnostic environments customarily are single-threaded environments without interrupt support, which means that the running process has complete control within the environment. Other processes cannot interrupt this process, and therefore it is difficult to monitor the running process. A limited solution is provided by a hardware counter that is commonly used by firmware programmers. The hardware counter is periodically incremented by the running process, so it can be determined that the running process is making progress in its diagnostic tests.","However, this approach still has disadvantages. While a process is running, it cannot be monitored except for its periodic incrementing of the hardware counter. The hardware counter serves only as a simplistic on or off flag indicating whether the process is functioning correctly. If the process functions improperly, either maliciously or because it has malfunctioned, only this fact is known. Examination of the process can be impossible, because if the operating environment locks up because of the improper functioning of the process, it usually must be turned off and back on, or otherwise reset, which results in erasing the remnants of the process in memory, such that it cannot be examined. For these described reasons, as well as other reasons, there is a need for the present invention.","The invention relates to the monitoring of a worker process by an executive process. In a method of the invention, a worker process sends a signal to an executive process, which receives the signal and determines whether the worker process is improperly functioning. If the worker process is improperly functioning, the executive process terminates the worker process.","An article of manufacture of the invention includes a computer-readable medium and means in the medium. The means is for receiving a call to a heartbeat interface from a process such that processor control is received from the process. The means is also for terminating the process in response to determining that the process is improperly functioning, and for returning the processor control back to the process in response to determining that the process is properly functioning.","A system of the invention includes an executive process and a worker process. The executive process has a heartbeat interface. The worker process periodically calls the heartbeat interface so that the executive process is able to determine whether the worker process is improperly functioning. Other features and advantages of the invention will become apparent from the following detailed description of the presently preferred embodiment of the invention, taken in conjunction with the accompanying drawings.",{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 1","b":["100","100"]},"The method  is performed by an executive process and a worker process, and can be performed within a firmware operating environment or another type of operating environment. An executive process is a process that has higher priority than a worker process, and thus a worker process is a process that has lower priority than an executive process. The operating environment may be a single-threaded environment that does not support interrupts, such that a process must willingly transfer processor control to another process. The worker process may be a diagnostic test process for the firmware, or another type of process.","Periodically, therefore, the worker process sends a signal to the executive process (). The sending of this signal may be the calling of a heartbeat application programming interface (API) of the executive process by the worker process. More generally, the heartbeat API is a heartbeat interface of the executive process. By sending this signal to the executive process, the worker process transfers processor control to the executive process. The executive process thus receives the signal from the worker process (), and has processor control, such that it can execute within the operating environment.","The executive process determines whether the worker process is improperly functioning (). The worker process may be properly functioning, or it may be improperly functioning in a number of different manners. For example, the worker process may simply be malfunctioning, such that it is not consciously functioning as it should. As another example, the worker process may be maliciously functioning, such that it is consciously not functioning as it should.","In response to determining that the worker process is improperly functioning (), the executive process terminates the worker process (). Before or after terminating the worker process, the executive process may also perform diagnostic functionality aimed at assisting programmers to understand why the worker process was not properly functioning. For instance, the executive process may record a copy of the worker process in a storage, so that the worker process may be later examined.","If the worker process is functioning properly (), the executive process ultimately returns processor control back to the worker process (), such that the worker process again periodically sends a signal to the executive process in the future. The executive process may also increment a hardware heartbeat counter for the worker process. The executive process may also perform other functionality.",{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 2","b":["200","200","200","202","220","210","212","216","202","216","220","210","200","212","202"]},"The architecture  also includes a legacy OS loader , a legacy basic input\/output system (BIOS) , an Extensible Firmware Interface (EFI) OS loader , EFI boot services , and EFI runtime services . The Extensible Firmware Interface (EFI) is that which has been promulgated by Intel Corp., of Santa Clara, Calif. The legacy OS loader  is present for the architecture  to be compatible with older computer systems that still include such a loader  for loading the OS . Similarly, the legacy BIOS  is present for the architecture  to be compatible with older computer systems that still include such BIOS . The EFI boot services  are the services that the EFI provides for booting the computer of which the architecture  is a part, whereas the EFI runtime services  are the services that the EFI provides after the OS software  has been loaded.",{"@attributes":{"id":"p-0024","num":"0023"},"figref":["FIG. 3","FIG. 2","FIG. 2","FIG. 2"],"b":["300","300","302","304","302","302","202","304","206","306","304","306","306","214","218","212","210"]},"The EFI  allows for the creation of programs and driver programs. The former are resident in memory only while they execute, whereas the latter remain resident in memory until removed. More specifically, there are two types of driver programs: boot services drivers and runtime services drivers. The boot services drivers cease to exist when a call is made to an exit boot services API of the EFI, which is typically made by the OS loader, such as the OS loader  of . Runtime services drivers remain resident while the OS is running.",{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 4","b":["402","404","306","306","402","404","306","404","406","402","408","402","404","402","412","404","410","406","402","404","412","404","406","412"]},"Because the operating environment may be a single-threaded, interrupt-free environment, as has been described, the executive process  in such instances receives processor control from the worker process  only when the latter calls the API . That is, the executive process  may not be able to interrupt running of the worker process . However, at least while the worker process  is sufficiently functioning properly to call the API  of the executive process , the executive process  is able to monitor the functioning of the worker process . The executive process  may determine, for instance, that the worker process  is about to malfunction, such that it can be said that the worker processor  is not properly functioning. The executive process  may then terminate the worker process , and perform diagnostic measures relative to the worker process  as appropriate. If the worker process  is functioning, however, the executive process  returns process control back to the worker process .",{"@attributes":{"id":"p-0028","num":"0027"},"figref":["FIG. 5","FIG. 1","FIG. 4"],"b":["500","500","502","504","506","508","510","512","514"]},"If the worker process is properly functioning (), then the worker process is not removed, and processor control reverts back to the worker process from the executive process. If the worker process is not finished with the diagnostic tests or other functionality (), then it continues running (). If the worker process is finished (), however, then processor control again reverts back to the executive process. As indicated as the junction , the executive process either processes more commands in , or is finished, and exits the method  (). If, however, the worker process is not properly functioning (), then the worker process is removed or terminated by the executive process (), and preferably the executive process diagnoses the reason why the worker process improperly functioned (). As indicated as the junction , the executive process then either processes more commands in , or is finished, and exits the method  ().","Embodiments of the invention allow for advantages over the prior art. Unlike the hardware counter-incrementation approach of the prior art, which does not provide for any diagnosis as to why a process is malfunctioning, the heartbeat API approach of the invention provides for such diagnosis. An executive process, when periodically called by a worker process, is able to assess whether the worker process is functioning properly. If the worker process is not functioning properly, the executive process can undertake a diagnosis as to why the worker process is not properly functioning, instead of just resetting the system, as may be the only option available within the prior art.","It will be appreciated that, although specific embodiments of the invention have been described herein for purposes of illustration, various modifications may be made without departing from the spirit and scope of the invention. For example, embodiments of the invention have been substantially described in relation to a firmware diagnostic-mode operating environment that is single-threaded and does not support interrupts. However, the invention may also be implemented in conjunction with other types of operating environments, including other types of firmware operating environments. Accordingly, the scope of protection of this invention is limited only by the following claims and their equivalents."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":["FIG. 3","FIG. 2"]},{"@attributes":{"id":"p-0014","num":"0013"},"figref":["FIG. 4","FIG. 4","FIG. 1"]},{"@attributes":{"id":"p-0015","num":"0014"},"figref":["FIG. 5","FIG. 5","FIGS. 1 and 4"]}]},"DETDESC":[{},{}]}
