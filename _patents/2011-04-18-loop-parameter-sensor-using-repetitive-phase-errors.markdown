---
title: Loop parameter sensor using repetitive phase errors
abstract: A method and system are disclosed for measuring a specified parameter in a phase-locked loop frequency synthesizer (PLL). In one embodiment, the method comprises introducing multiple phase errors in the PLL, measuring a specified aspect of the introduced phase errors, and determining a value for the specified parameter using the measured aspects of the introduced phase errors. In one embodiment, the phase errors are introduced repetitively in the PLL, and these phase errors produce a modified phase difference between the reference signal and the feedback signal in the PPL. In one embodiment, crossover times, when this modified phase difference crosses over a preset value, are determined, and these crossover times are used to determine the value for the specified parameter. In an embodiment, the parameter is calculated as a mathematical function of the crossover times. The parameter may be, for example, the bandwidth of the PLL.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09157950&OS=09157950&RS=09157950
owner: International Business Machines Corporation
number: 09157950
owner_city: Armonk
owner_country: US
publication_date: 20110418
---

{"@attributes":{"id":"description"},"GOVINT":[{},{}],"heading":["STATEMENT OF GOVERNMENT INTEREST","BACKGROUND OF THE INVENTION","Field of the Invention","BRIEF SUMMARY","DETAILED DESCRIPTION"],"p":["This invention was made with Government support under Contract No.: FA8650-090-C-7924 Defense Advanced Research Projects Agency (DARPA). The Government has certain rights in this invention.","This invention generally relates to phase-locked loop frequency synthesizers, and more specifically, to measuring parameters of phase-locked loop frequency synthesizers.","Phase-locked loop frequency synthesizers, generally referred to as phase-locked loops or PLLs, are devices that generates an output signal with a frequency that is a function of a reference input signal. PLLs are used in many systems such as data processing systems, communication systems, and audio and video processing systems. When a PLL is implemented in a system, the frequency of the output signal of the PLL may change many times. For example, the frequency of this output signal may change at the start-up of the system, or when the system changes from one channel to another.","The PLL may include certain components connected in a feedback loop. For example, the PLL may include a voltage controlled oscillator (VCO), a phase frequency detector (PFD) and a loop filter. The PLL may additionally include a feedback frequency divider in applications where the VCO frequency is designed to be a multiple of the reference frequency.","The PFD may control the frequency of the output signal of the VCO. The PFD in the PLL receives the output signal in the feedback loop and compares the frequency of the output signal to the frequency of the reference signal. Based on the comparison of the frequency of the output signal to the frequency of the reference signal, the PFD generates a control signal that is provided to a low-pass filter and then to the VCO in order to control the frequency of the output signal of the VCO.","The absolute values of the components that are part of a PLL often depend upon temperature and supply voltage. Furthermore, these values can also vary due to manufacturing tolerances. For example, the time constants and settling behavior of a PLL are dependent on physical elements such as resistors and capacitors that may have a significant variation over process, temperature and supply voltage. In addition, in variable output frequency synthesizers, the natural frequency, loop bandwidth, and damping factor are dependent on the feedback divider modulus as well as the frequency of operation.","Consequently, in many systems it is desirable to measure PLL parameters in order to ensure that they are within specifications, for e.g., peaking is lower than a desired value, or bandwidth is set to a desired value. Also, it is desirable that this measurement be performed without unduly affecting the operation of the phase-locked loop. If the loop has to be opened for this measurement, the voltage-controlled oscillator is in open-loop mode and therefore its frequency\/phase are no longer controlled by the reference signal. Most systems incorporating a PLL cannot operate with the VCO unlocked. Therefore, the entire system does not function during the PLL measurement cycle and must wait for the loop to be closed and attain lock in order to resume functioning, which is clearly undesirable.","Embodiments of the invention provide a method and system for measuring a specified parameter in a phase-locked loop frequency synthesizer (PLL). In one embodiment, the method comprises introducing multiple phase errors in the PLL, measuring a specified aspect of the introduced phase errors, and determining a value for the specified parameter using said measured aspects of the introduced phase errors.","In one embodiment, said phase errors are introduced repetitively in the PLL. For example, the phase errors may be introduced in the PLL at regular periods, or the phase errors may be introduced aperiodically at known time intervals.","In an embodiment, the multiple phase errors are introduced in the PLL to produce a modified phase difference between the reference signal and the feedback signal in the PPL.","In one embodiment, the crossover times, when said modified phase difference crosses over a zero phase difference value, are determined, and these crossover times are used to determine the value for the specified parameter. In an embodiment, said parameter is calculated as a mathematical function of said crossover times.","In an embodiment, over a given time period, one of the phase errors is introduced in the PLL a specified waiting time after each of the crossover time in said given period of time.","In one embodiment, the multiple phase errors include phases having opposite polarities to overcome offsets in measurement of the phase difference between the reference and feedback signals.",{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 1","b":["100","110","112","114","116","110","114","110","110","114","110","112","112","110","114","114","114","114"]},"Dynamic analysis of a control system is usually performed using the transfer function, which is a mathematical representation of the relationship between the input signal and output signal of the system. Two notable characteristics specifying a PLL's dynamic behavior, for example, are the \u22123 dB cutoff frequency and the damping factor of the loop.","In general terms, the cutoff frequency of a circuit (for example a filter) is the frequency either above which or below which the power output of the filter is reduced to half of the passband power, that is, the half-power point. This is equivalent to an amplitude reduction to 70.7% of the passband, and happens to be close to \u22123 decibels. Thus, the cutoff frequency is frequently referred to as the \u22123 dB point.","For example, the response of the PLL to small phase errors at the input, is given in the frequency domain by the PLL phase transfer function, based on the linearized phase model shown in . In , the responses of the phase detector and the loop filter are represented at  and  respectively. The response of the VCO is represented at , and the response of the divider  is represented at . The equation for the transfer function of the loop shown in  is given by,",{"@attributes":{"id":"p-0029","num":"0028"},"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mfrac":[{"mrow":[{"msub":{"mi":["\u03b8","out"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}},{"msub":{"mi":"\u03b8","mrow":{"mi":["i","n"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}}]},{"mrow":[{"msub":[{"mi":["K","PD"]},{"mi":["K","VCO"]}],"mo":["\u2062","\u2062"],"mrow":{"mi":"H","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}}},{"mi":"s","mo":"+","mfrac":{"mrow":{"msub":[{"mi":["K","PD"]},{"mi":["K","VCO"]}],"mo":["\u2062","\u2062"],"mrow":{"mi":"H","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}}},"mi":"N"}}]}],"mo":"="}},{"mrow":{"mo":["(",")"],"mn":"1"}}]}}}}},"It may be noted that the model in  and equation (1) are small signal models for the PLL and are valid for small phase errors. Some loop components such as K, can be non-linear and therefore measurements that introduce large phase errors and then measure settling time do not provide the same results as measurements that introduce small phase errors.",{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 3","sub":"vco"},"As mentioned above, the absolute values of the components that are part of loop often depend upon temperature and supply voltage. Furthermore, these values can also vary due to manufacturing tolerances. As a result, the phase transfer function, which depends upon the absolute values of these parameters, also exhibits significant variation.  shows the VCO gain, K, as a function of control voltage across the variable capacitors that provide frequency tuning.  shows the variation in PLL phase transfer response due to this VCO variation.","Due to these variations in the phase transfer function, it is desirable in many systems to measure PLL phase transfer function in order to ensure that it is within specifications, for e.g., peaking is lower than desired value, or bandwidth is set to desired value. Furthermore, it is desirable that this measurement be performed without unduly affecting the operation of the phase-locked loop. If the loop has to be opened for this measurement, the voltage-controlled oscillator is in open-loop mode and therefore its frequency\/phase are no longer controlled by the reference signal. Most systems incorporating a PLL cannot operate with the VCO unlocked. Therefore, the entire system does not function during the PLL measurement cycle and must wait for the loop to be closed and attain lock in order to resume functioning, which is clearly undesirable.","Embodiments of the invention achieve a PLL measurement that is accurate and ensures that the PLL does not need to be unlocked for the loop parameter measurement. Generally, this is done by introducing phase error repetitively in the PLL and measuring successive crossover times\u2014that is, the times at which the difference between the reference and feedback clocks is zero. These phase errors are repetitively introduced before the PLL has recovered completely from previously introduced errors, and the crossover times are thus a function of the loop parameters and the times at which the phase errors are introduced. The loop parameters, such as w3 dB and damping ratio, can be calculated from successive crossover times, by using a mathematic model that translates the successive crossover times to specific loop parameters. For example, a training set of known loop parameters is used to build a polynomial function that uses the crossover times as input and provides w3 dB as the output.",{"@attributes":{"id":"p-0035","num":"0034"},"figref":["FIGS. 6 and 7","FIG. 6","FIG. 7","FIG. 6"],"b":"150"},{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIG. 7","b":"160"},"In this embodiment, since the phase errors are repetitively introduced before the PLL has recovered completely from previous errors, the crossover times tcare a function of the loop parameters and the times at which the phase errors are introduced. The phase errors can be introduced periodically as shown in  or as shown at  in , the errors can be introduced a fixed time after each zero crossing.","Offsets in the phase error measurement itself can cause errors in the measured crossover times. As shown at  in , the real crossover time, tc, might not be measured accurately due to this measurement offset error. However, the impact of this offset can be reduced by using phase errors of both polarities. As shown in , tc can be calculated as a function of tcp and tcn, where tcp and tcn are the measured crossover time for positive and negative phase errors in the presence of a measurement offset error.","The phase error can be introduced in the PLL in a variety of ways. For instance, in an embodiment, this phase error can be introduced by changing the delay of the reference signal. Also, with reference to , the phase error can be introduced in the PLL by changing the divide ratio. As represented in , this may be done by a programmable divide . For instance, in one embodiment, a multiplexer , under the control of changeDiv signal, may be used to select one of two, or more, divide ratios. Changing the divide ratio to a higher value and to a lower value results in phase errors with opposite polarities, which, as discussed above, can be used to correct for measurement offset.",{"@attributes":{"id":"p-0040","num":"0039"},"figref":["FIG. 10","FIG. 10"],"b":["202","204","190","204","206"]},"This calculation of the loop parameter or parameters may be done by any suitable device in any suitable way. For example, the calculation may be performed by on-chip circuitry\u2014that is, by circuitry on the same processing chip as the LLP . Alternatively, the calculation may be performed by a separate computer, microprocessor or arithmetic logic unit.","As represented at , the calculated loop parameter or parameters may be used to determine loop component values\u2014for example, values for the phase detector , the loop filter , or the VCO \u2014to achieve the desired loop parameters. These values for the PLL components may be transmitted to the loop components themselves, and the PLL components may be adjusted or modified to operate with these values. Any suitable on-chip or off-chip procedure may be used at  to determine the loop component values needed to achieve the desired loop parameters.","While it is apparent that the invention herein disclosed is well calculated to achieve the features discussed above, it will be appreciated that numerous modifications and embodiments may be devised by those skilled in the art, and it is intended that the appended claims cover all such modifications and embodiments as fall within the true spirit and scope of the present invention."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE SEVERAL VIEWS OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":["FIG. 2","FIG. 1"]},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 4","sub":"vco"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":["FIG. 5","FIG. 4"]},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 10"}]},"DETDESC":[{},{}]}
