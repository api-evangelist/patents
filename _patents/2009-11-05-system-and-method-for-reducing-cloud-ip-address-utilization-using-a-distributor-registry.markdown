---
title: System and method for reducing cloud IP address utilization using a distributor registry
abstract: System and method for providing cloud computing services are described. In one embodiment, the system comprises a cloud computing environment comprising resources for supporting cloud workloads, each cloud workload having associated therewith an internal cloud address; and a routing system disposed between external workloads of an external computing environment and the cloud workloads, the routing system for directing traffic from an external cloud address to the internal cloud addresses of the cloud workloads. The routing system comprises a virtual router configured to function as a network address translator (“NAT”); a distributor connected between the virtual router and the cloud workloads; and a distributor registry accessible by the distributor for maintaining information comprising at least one of port mappings, cloud address mappings, and cloud workload configuration information.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09122533&OS=09122533&RS=09122533
owner: NOVELL, INC.
number: 09122533
owner_city: Provo
owner_country: US
publication_date: 20091105
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","BACKGROUND","SUMMARY","DETAILED DESCRIPTION"],"p":["This application claims the benefit under Title 35, United States Code \u00a7119(e) of U.S. Provisional Patent Application No. 61\/160,030 filed on Mar. 13, 2009, the disclosure of which is incorporated herein by reference in its entirety. This application is related to the following commonly-assigned, co-pending applications, each of which is also incorporated herein by reference in its entirety:","1. U.S. patent application Ser. No. 12\/612,807, issued as U.S. Pat. No. 8,065,395;","2. U.S. patent application Ser. No. 12\/612,818;","3. U.S. patent application Ser. No. 12\/612,834, issued as U.S. Pat. No. 8,364,842;","4. U.S. patent application Ser. No. 12\/612,841, issued as U.S. Pat. No. 8,286,232;","5. U.S. patent application Ser. No. 12\/612,882;","6. U.S. patent application Ser. No. 12\/612,895;","7. U.S. patent application Ser. No. 12\/612,903;","8. U.S. patent application Ser. No. 12\/612,925, issued as U.S. Pat. No. 8,516,293;","9. U.S. patent application Ser. No. 12\/613,077, issued as U.S. Pat. No. 8,429,716;","10. U.S. patent application Ser. No. 12\/613,098; and","11. U.S. patent application Ser. No. 12\/197,833","Cloud computing is a type of computing in which dynamically scalable and typically virtualized resources are provided as services via the Internet. As a result, users need not, and typically do not, possess knowledge of, expertise in, or control over the technology and\/or infrastructure implemented in the cloud. Cloud computing generally incorporates infrastructure as a service (\u201cIaaS\u201d), platform as a service (\u201cPaaS\u201d), and\/or software as a service (\u201cSaaS\u201d). In a typical embodiment, cloud computing services provide common applications online, which applications are accessed using a web browser and the software and data for which are stored on servers comprising the cloud.","Cloud computing customers typically do not own or possess the physical infrastructure that hosts their software platform; rather, the infrastructure is leased in some manner from a third-party provider. Cloud computing customers can avoid capital expenditures by paying a provider for only what they use on a utility, or resources consumed, basis or a subscription, or time-based, basis, for example. Sharing computing power and\/or storage capacity among multiple lessees has many advantages, including improved utilization rates and an increase in overall computer usage.","With the advent of cloud computing and cloud storage, a challenge exists with respect to IP address usage and the sharing of cryptographic keys between a known and trusted location and the computing cloud.","One embodiment is a system for providing cloud computing services. The system comprises a cloud computing environment comprising resources for supporting cloud workloads, each cloud workload having associated therewith an internal cloud address; and a routing system disposed between external workloads of an external computing environment and the cloud workloads, the routing system for directing traffic from an external cloud address to the internal cloud addresses of the cloud workloads. The routing system comprises a virtual router configured to function as a network address translator (\u201cNAT\u201d); a distributor connected between the virtual router and the cloud workloads; and a distributor registry accessible by the distributor for maintaining information comprising at least one of port mappings, cloud address mappings, and cloud workload configuration information.","To better illustrate the advantages and features of the embodiments, a particular description of several embodiments will be provided with reference to the attached drawings. These drawings, and other embodiments described herein, only illustrate selected aspects of the embodiments and are not intended to limit the scope thereof. Further, despite reference to specific features illustrated in the example embodiments, it will nevertheless be understood that these features are not essential to all embodiments and no limitation of the scope thereof is thereby intended. Any alterations and further modifications in the described embodiments, and any further applications of the principles of the embodiments as described herein are contemplated as would normally occur to one skilled in the art. Furthermore, some items are shown in a simplified form, and inherently include components that are well known in the art. Further still, some items are illustrated as being in direct connection for the sake of simplicity and clarity. Despite the apparent direct connection, it is understood that such illustration does not preclude the existence of intermediate components not otherwise illustrated.","The embodiments described herein provide a mechanism for providing reduced cloud IP address utilization. To this end, one or more embodiments described herein provide a method and mechanism to enable the use of a single IP address to address many instances within a cloud infrastructure. Additionally, one or more such embodiments provide a method and mechanism to provide the keys necessary to secure traffic and storage in the cloud.",{"@attributes":{"id":"p-0022","num":"0021"},"figref":["FIG. 1","FIG. 1"],"b":["100","102","104","106","108","100","110","108","100","108","102","104","106","110","111"]},"Enterprises using the cloud are represented by virtualization processes and storage shown as workloads . These processes are typically started by an enterprise via a cloud portal or API utilized by administrative personnel or processes running at the enterprise or in the cloud. A typical cloud services provider may be using standard ITIL practices and may utilize a configuration management database (\u201cCMDB\u201d) , which affects the entire cloud infrastructure and which describes the practice and policies used for instantiating virtualized workloads and storage.",{"@attributes":{"id":"p-0024","num":"0023"},"figref":["FIG. 2","FIG. 2","FIG. 2"],"b":["200","202","202","204","202","202","206","206","202","202","206"]},"In the embodiment illustrated in , a secure bridge  provides a secure connection between applications A-C and a virtual router , which secure connection can be created based upon keys that were previously traded between the provider of the cloud  (\u201cthe cloud services provider\u201d) and the enterprise as is known in the art. The virtual router  lies within the infrastructure and under the control of the cloud services provider (IaaS) and as such, the public and\/or private keys that the IaaS holds are secured by the IaaS infrastructure, data center security, physical security, and others.","As a result, because the secure bridge  and virtual router  possess mutually shared keys or mutually shared parts of key pairs, a secured connection can be created between the applications A-C and the virtual router  via the secure bridge  as described in detail in U.S. patent application Ser. No. 12\/612,841, issued as U.S. Pat. No. 8,286,232, which has been incorporated by reference in its entirety. In the embodiment shown in , each application A-C has access to the keys mentioned hereinabove in connection with the secure bridge  such that endpoint security from the applications A-C to an external address , shown in  as \u201c174.65.x.x\u201d, via the router  can exist without the need of the secure bridge .","As previously noted, the virtual router  lies within the infrastructure of the cloud services provider and acts as a Network Address Translator (\u201cNAT\u201d) to workloads within a specific domain. In a representative embodiment, the IP address is a private addresses, such as a 10-net, so that only the single external address  is necessary to access the cloud processes, as will be described. In such a case, as shown in , a distributor  forwards traffic from the external address  to internal addresses  (e.g., \u201c10.1.1.x\u201d) so that only one external address needs to be associated with the processes within the cloud . In one embodiment, the foregoing may be accomplished by matching port ranges to specific workloads, represented by workloads A-D, so that if auto load balancing of each of the workloads is required, the port ranges can enable a distinction to be made between the workloads operating within the cloud  via a given 10-net.","In one embodiment, the distributor  maintains all port mappings in a distributor registry  so that requests from applications A-C can be sent to the appropriate one of the workloads A-D. Information may be split between the distributor registry  and the secure bridge  and further information, such as tokens from a Representational State Transfer (\u201cREST\u201d) call can be maintained with the port mapping such that better information can be provided during the mapping process.","In the embodiment shown in , the internal addresses  may be partitioned such that the \u201cx\u201d therein represents some kind of subnet IP address grouping (e.g., 10.1.1.10-20). Accordingly, instead of using a port, IP addresses may be used within the address space. In this embodiment, the distributor  may map a single external address to within the 10-net address space so that it is multiplexed into various types of workloads and or storage. In the illustrated embodiment, storage is also protected this way by allowing one of the workloads, such as the workload D, to hold keys and to process traffic for storage in the cloud . As a result, the storage can be encrypted and decrypted on-the-fly as needed by either an internal-to-the-cloud or external-to-the-cloud process.","Once the secure connection between the applications A-C and the distributor  is established based on attestation by the virtual router  to the fact that the distributor has not changed and therefore may be trusted in its process model, cryptographic keys may be transmitted from the applications across to the distributor so that a process can receive keys, as represented in  by a dashed line . This process ensures that storage or other content and traffic can be protected via keys received external to the cloud . This is significant because it allows for the keys to be stored in a location other than the cloud , thereby providing a layer of protection generally not afforded in a public location such as a cloud computing environment.","It will be recognized that, as illustrated in , an additional distributor  may be provided. In such cases, the distributor registry  enables distribution address spaces to be properly managed. Each of the workloads A-D communicates to with the distributor  via an address, such as, for example, a 10-net address , that is communicated to the workloads when they are started up so that any new processes that are initiated due to load balancing issues, load expansion issues, load contraction issues and the like can communicate their local address  to the distributor . It should be noted that what is communicated to the workloads may be the address of the distributor  or a token, such as a DNS name, that may be used by the workload to lookup the address of the distributor . In any event, it will be noted that the communicated address is one that is not hard-wired in the system; it is either provided as described or discovered via token dereferencing in a manner well known in the art. As a result, through implementation of some predetermined policy, the communicated local address and its associated port range  can be logged in to the distributor registry  so that the addresses can be correctly maintained according to address, port, and workload type.","The distributor  also provides configuration information to the workloads A-D so that configuration information can be normalized and provided to new workloads that are being brought up as a result of load expansion or contraction. Additionally, the configuration described hereinabove is provided external to the cloud  via the same mechanism as was discussed with key distribution. This mechanism provides for a simpler method of keeping the workloads A-D up to date and the startup or boot configuration normalized.","One embodiment is implemented using one or more embodiments described in U.S. patent application Ser. No. 12\/197,833 (hereinafter the \u2033\u2032833 application), incorporated by reference hereinabove to find, analyze, and qualify clouds, such as the cloud , so that the required infrastructure for allowing the deployment of everything within the cloud  will function correctly. The embodiment described in the '833 application also keeps track of reputation of all clouds so that the best price, performance, stability, etc., can be selected for a deployment within the cloud.","In an alternative embodiment, the distributor  can reside external to the cloud  or in a different cloud. In this case, the virtual router  must attest to the validity of the workloads A-D so that it is attested that no changes have been made. In the illustrated embodiment, each of the workloads A-D has a secure connection through the virtual router  to the applications A-C so that the annexation is still valid. It will be recognized, however, that this embodiment requires more traffic over the network.","In one embodiment, additional virtual routers, such as a virtual router , may be added. In this embodiment, an L switch or some other load-balancing mechanism (not shown) may be provided in a known manner to distribute traffic between the external addresses connected to the virtual routers , . In another embodiment, the information from the distributor registry  is available to the workloads A-D such that the information provided by the distributor registry provides the workloads with information necessary to perform clustering, remedial clustering, and\/or other types of cooperative computing and storage management.","In one embodiment, the secure bridge  may be replaced by a secure connection implemented using a pair of cryptographic keys held by both the trusted environment\/enterprise  and the cloud .","It will be recognized that various ones of the elements and\/or modules described herein may be implemented using one or more general purpose computers or portions thereof executing software applications designed to perform the functions described or using one or more special purpose computers or portions thereof configured to perform the functions described. The software applications may comprise computer-executable instructions stored on computer-readable media. Additionally, repositories described herein may be implemented using databases or other appropriate storage media.","While the preceding description shows and describes one or more embodiments, it will be understood by those skilled in the art that various changes in form and detail may be made therein without departing from the spirit and scope of the present disclosure. For example, various steps of the described methods may be executed in a different order or executed sequentially, combined, further divided, replaced with alternate steps, or removed entirely. In addition, various functions illustrated in the methods or described elsewhere in the disclosure may be combined to provide additional and\/or alternate functions. Therefore, the claims should be interpreted in a broad manner, consistent with the present disclosure."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 2"}]},"DETDESC":[{},{}]}
