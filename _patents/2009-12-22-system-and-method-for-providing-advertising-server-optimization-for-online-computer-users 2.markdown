---
title: System and method for providing advertising server optimization for online computer users
abstract: A system and method for providing advertising server optimization for online computer users is disclosed. A particular embodiment includes obtaining an advertisement; defining a set of features of the advertisement; generating a predicted click through rate (CTR) corresponding to the advertisement based in part on the set of features; ranking the advertisement based on the generated click through rate; and serving the advertisement based on the ranking.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09547865&OS=09547865&RS=09547865
owner: eBay Inc.
number: 09547865
owner_city: San Jose
owner_country: US
publication_date: 20091222
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["RELATED APPLICATION","TECHNICAL FIELD","BACKGROUND","DETAILED DESCRIPTION"],"p":["This application claims the priority benefits of U.S. Provisional Application No. 61\/164,849; filed Mar. 30, 2009, which is incorporated in its entirety herein by reference.","This application relates to a method and system for use with an electronic commerce system, according to one embodiment, and more specifically, for providing advertising server optimization for online computer users.","Conventional advertising (ad) servers distribute a large number of ads for display on a variety of host sites. Typically, a particular ad is matched to a user at the host site based on a search performed or a purchase made by the user. Keywords entered by the user or related to the search or purchase can be used to find related ads for display to the user. However, it is not clear in conventional systems how effective these ads really are in promoting action by the user in response to the ad. Further, these systems typically serve large number of ads to large numbers of users. As such, network resources can be strained and unable to accommodate additional users.","Thus, a system and method for providing advertising server optimization for online computer users is needed.","In the following description, for purposes of explanation, numerous specific details are set forth in order to provide a thorough understanding of the various embodiments. It can be evident, however, to one of ordinary skill in the art that the various embodiments may be practiced without these specific details.","In one embodiment, a system and method for providing advertising server optimization for online computer users is disclosed. In various example embodiments, an Ad Optimizer is coupled to an Ad Server. The Ad Optimizer provides a ranking of displayable ads based on the number of bids on an ad and the ad's click through rate (CTR). The Ad Optimizer can also monitor an advertiser's budget relative to the advertiser's ad costs.","Features for each ad are defined and used in the ranking calculation. A feature is a calculated value (generally 0 or 1) that can be factored into a model to determine the predicted CTR (pCTR) for an ad unit. An ad unit is an instance of an ad. An optimization model is provided as a linear formula that applies coefficients to feature values to determine the predicted CTR for an ad unit. During real-time, ad requests can be made to the Ad Server and ads can be ranked by the Ad Optimizer and served according to the ranking.","A particular embodiment can use an application programming interface (API) Web application that can make use of host site search and other API's to provide search results to users in a simpler format. Search results and can be customized according to user profile information associated with one or more particular consumers and information related to particular products, listings, or advertisements. The user profile information can be generated and processed based on user\/consumer responses to queries prompted by the system.","In a particular example embodiment, a central ad repository (denoted an ad server) can gather and store advertisement (ad) postings (e.g., listings) from various sites. The gathered ads can be processed for posting to a pre-configured set of destination sites that may be other local sites, regional sites, or global sites. Then the processed ads are pushed to the destination sites.",{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 1","b":["100","100","100"]},"Returning to , a data exchange platform, in an example form of a network-based provider (or host system\/site) , provides server-side functionality, via a network  (e.g., the Internet) to one or more clients. The one or more clients may include users that may utilize the network system  and more specifically, the network-based provider , to exchange data over the network . These transactions may include transmitting, receiving (communicating) and processing data to and from the multitude of users. The data may include, but is not limited to, user preference information, user profile information, listing search queries, shopping or listing context information and\/or identifiers, context data, notations (e.g., personal and public shopping notes), context filter data, shared electronic shopping carts, product and service reviews, product, service, manufacture, and vendor recommendations and identifiers, product and service listings associated with buyers and sellers, auction bids, feedback, etc. In one embodiment, the user profile information can be associated with one or more contexts generated by a user or other users and maintained on the network-based provider . Data associated with a user profile, such as any of the data described above, may be publicly shared as determined by the originator of the data.","Turning specifically to the network-based marketplace , an application program interface (API) server  and a web server  are coupled to, and provide programmatic and web interfaces respectively to, one or more application servers . The application servers  host one or more networking application(s)  and marketplace application(s) . The application servers  are, in turn, shown to be coupled to one or more databases servers  that facilitate access to one or more databases .","In one embodiment, the web server  may send and receive data pertaining to a user profile or item listing via a toolbar installed on a browser application. The toolbar may allow for a user or a third party to, inter alia, create a new user profile (a profile creator), selectively add a uniform resource locator (URL) associated with the created user profile, and create notations regarding research and general matters associated with the user profile. In other embodiments, the web server may serve a page or the API server  in conjunction with the client application  may provide the same or similar functionality as that described with reference to the toolbar. It may be noted that using a toolbar within an application such as a browser or stand alone application is well known in the art.","The marketplace application(s)  may provide a number of marketplace functions and services (e.g., item listings, searching, advertisement, payment, etc.) to users that access the network-based marketplace . The networking application(s)  likewise may provide a number of consumer services, merchant services, or social networking services and functions to users. The networking application(s)  may allow a user to generate one or more contexts related to shopping or advertisement (ad) generation, which may include listings (e.g., for products and services) couched as a broad category associated with a consumer, a class of consumers, and\/or an item (e.g., a product or service or a listing for a product or service) or class of items. Additionally, listings can be couched as associated with a specific consumer or a specific item. For example, listings in the form of a category could be, \u201cdigital cameras\u201d or \u201cplumbers.\u201d Similarly, a context can include a user profile associated with a category of users or a specific user. For example, a user profile in the form of a category could be, \u201cwomen over 40 years old\u201d or \u201cpurchasers of digital cameras.\u201d An example of a user profile in a more specific form may be, \u201ca user profile for John A. Smith of Akron, Ohio\u201d or \u201cpurchasers of Canon digital cameras.\u201d The level of specificity may vary and is selectable by the user profile creator or administrator of the advertising optimization engine of a particular embodiment. For example, the user profile can be as specific as a particular person or the associated listing associated with a make, model, additional specific attributes or features of a specific item or service offered for sale or lease.","In one embodiment, the networking application(s)  and marketplace application(s)  may provide a client (e.g., web client ) with an interface that includes input fields for personality or item\/listing attributes most commonly selected by other users as the most important or most determinative attributes related to the products\/services which a user\/consumer is seeking or selling. For example, a multitude of users may have indicated they thought the most important personality attributes for the user profile include information related to: 1) consumer\/user need, 2) general consumer\/user personality, 3) consumer\/user shopping attitude, and 4) consumer\/user budget. A multitude of other users may have indicated they thought the most important item attributes for a digital camera purchaser user profile include: 1) digital camera brand, 2) pixel count, 3) zoom, and 4) size. These user profile attributes may be independently developed or discovered by the network-based marketplace  by processing the attribute data received from the multitude of users or may be based on the user profile creator ranking the attributes or a combination thereof.","The networking application(s)  may allow the user profile creator or advertising optimization engine user to distribute the one or more user profiles to one or more groups defined by the user profile creator or advertising optimization engine user (e.g., \u201cmy family,\u201d \u201cmy friends,\u201d etc.) or to groups at various levels in a predefined category (e.g., \u201cphotography group,\u201d \u201cdigital camera group,\u201d or \u201cCanon digital camera group,\u201d etc.).","While the networking application(s)  and the marketplace application(s)  are shown in  to form part of the network-based marketplace , it can be appreciated that, in alternative embodiments, the networking application(s)  may form part of a social networking service that is separate and distinct from the network-based marketplace .",{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 1","b":["138","140","112","124","138","112","112"]},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 2","b":["130","132","112","112","112","130","132"]},"To this end, the network and marketplace application(s)  and , respectively, are shown to include one or more application(s) which support the network-based marketplace , and more specifically the generation and maintenance of one or more user profiles provided by users of the network-based marketplace  or advertising optimization engine users. These applications can include support for activities associated with the user profiles and listing information, including storing and retrieving user notes, web sites (URLs), links associated with related tags, research and notes from other users and community members, related community groups, vendors, providing localized geographic data for user profiles (e.g., regional consumer purchasing patterns), etc. Additionally, the various applications may support social networking functions, including building and maintaining the community groups created by a user, which may be helpful in providing various types of data (e.g., reviews, notes, local services, consumer information, etc.) pertaining to the user profiles and listing information.","Store application(s)  may allow sellers to group their listings (e.g., goods and\/or services) within a \u201cvirtual\u201d store, which may be branded and otherwise personalized by and for the sellers. Such a virtual store may also offer promotions, incentives and features that are specific and personalized to a relevant seller and consumer. In one embodiment, based on the user profiles provided by the user profile creator, the virtual store may be provided to the user profile creator or advertising optimization engine user where the virtual store may carry or sell an item or service related to a user's need based on the user profile.","Reputation application(s)  may allow parties that transact utilizing the network-based marketplace  to establish, build, and maintain reputations, which may be made available and published to potential trading partners. Consider that where, for example, the network-based marketplace  supports person-to-person trading, users may have no history or other reference information whereby the trustworthiness and\/or credibility of potential trading partners may be assessed. The reputation application(s)  may allow a user, for example through feedback provided by other transaction partners, to establish a reputation within the network-based marketplace  over time. Other potential trading partners may then reference such a reputation for the purposes of assessing credibility, trustworthiness, or the like. A user creating a user profile and seeking reviews, research (e.g., notes, etc.), and recommendations associated with the profile may filter the result data from the search or context submission based on reputation data. For example, the user profile creator may only want profile data such as reviews and research notes pertaining to the user profile from other users with a greater than 3 out of 5 star reputation rating.","In one embodiment, the network-based marketplace  includes review and recommendation application(s) . The social networking application(s)  may work in conjunction with the review and recommendation application(s)  to provide a user interface to facilitate the entry of reviews of the user profile data received from other users. A review may be a text entry of the community group member's opinion, a standard review form including check boxes indicating a level satisfaction, or a combination of both, etc. Recommendations may include a specific type of demographic, item, a specific brand or service for a type of item, a specific retailer for the item, etc.","Navigation of the network-based marketplace  may be facilitated by one or more navigation and context application(s) . For example, a context application may, inter alia, enable key word searches of item listings associated with a context defined by a user profile of a particular consumer. The context can include an association between the user profile data in the user profile and item feature sets related to items in the item listings. The item listings can include listings from a group including products or services or both. The item feature set data and data defining the association between the user profile data in the user profile and item feature sets may be retrieved from the network-based marketplace  (e.g., databases ) or from various other remote sources, such as other network sites, other users (e.g., experts or peers), etc. In one embodiment, a toolbar installed on a browser application may be used for functions including interactive and navigation functions to create a new user profile, selectively add a uniform resource locator (URL) associated with the created user profile, and create notations regarding research and general matters associated with the user profile. These functions may be user accessible by many methods known in the art, including a web form interface (HTML or embedded Java) or a stand alone application interface. For example, a navigation application may include a browser that allows users via an associated user interface to browse a user's user profile, various item listings, item feature sets, contexts, catalogues, inventories, social networks, and review data structures within the network-based marketplace . In one embodiment, the user interface includes selectable elements in the form of tabs to separate out various categories of user profile data that when selected generate a list associated with the category. For example, a tab for \u201cMy Notes,\u201d a tab for \u201cEveryone's Notes,\u201d a tab for \u201cBuy,\u201d and a tab for \u201cSell\u201d. Various other navigation applications (e.g., an external search engine) may be provided to supplement the search and browsing applications.","In one embodiment, using filtering application(s) , the user or advertising optimization engine user may customize result data associated with a user profile or listing search results. The filtering application(s)  may generate the result data according to one or more rules provided by the network-based marketplace  and the user receiving the filtered result data. For example, as discussed above with reference to the reputation application(s) , the user may only want the user profile to match on item listings pertaining to item reviews from other users with a greater than 3 out of 5 star reputation rating. In another example, the user may only want user profile data to match on item listings pertaining to item listings with a particular feature set or attribute set. For example, the user may only want result data for digital cameras with equal or greater than 5 megapixels. Additionally, the filtering rules may be combinable or modifiable to broaden or narrow the scope of the result data. The filtering application(s)  may also be used to implement rules for granting or allowing access to the user profile data.","Messaging application(s)  may be used for the generation and delivery of messages to users of the network-based marketplace . For example, the user may like a particular review or research from another user and may wish to contact the user for additional information. In one embodiment, the messaging application(s)  may be used in conjunction with the social networking application(s)  to provide promotional and\/or marketing (e.g., targeted advertisements associated with the user profile) to the user or a related user from vendors and community members that may have offerings related to the user profile.","Item list application(s)  may be used in the network-based marketplace  by the user to create an item list based on selecting one or more items and services to purchase (or sell, auction, lease, or donate), which may be at least partially based on result data associated with the user's shopping experience. The item list application(s)  may be accessed via a user interface that allows the user to create and use the item list. Additionally, the user may selectively share this list within a community or to all users to gain or solicit additional data such as vendor recommendations for each purchase or vendor reviews for vendors that may be present in the list.","In one embodiment, electronic shopping cart application(s)  are used to create a shared electronic shopping cart used by a user to add and store items from a shopping list generated by the user (e.g., by making selections from a \u201cBuy\u201d tab). The electronic shopping cart application(s)  may facilitate the transactions for each item on the list by automatically finding the items in the electronic shopping cart across at least one or all of a set of vendors, a comparison shopping site, an auction site, other user's ads, etc. In one embodiment, a multitude of transactions may appear as one transaction based on the selection of \u201cBulk Purchase.\u201d In various embodiments, the selection criteria for which vendor or vendors to purchase from may include, but is not limited to, criteria such as lowest cost, fastest shipping time, preferred or highest rated vendors or sellers, or any combination thereof.","It can be appreciated that one or more of the various example networking and marketplace application(s) ,  may be combined into a single application including one or more modules. Further, in some embodiments, one or more applications may be omitted and additional applications may also be included.",{"@attributes":{"id":"p-0041","num":"0040"},"figref":["FIG. 3","FIG. 1"],"b":["300","136","130","132","302","112","112"]},"The context data table  maintains a record of the one or more user profiles and\/or listings created by or related to a user. As discussed above, this may include user profile identifiers and\/or listing identifiers that may include words and\/or phrases from the general to the specific for a consumer class, specific consumer, product\/service class, or a specific product\/service. Context data in context data table  can also include associations between the user profile data in the personalized consumer profiles and item feature sets related to items in the item listings. The item listings can be listings for products or services or both. The personalized consumer profiles, item feature set data, and data defining the association between the user profile data in the personalized consumer profiles and item feature set data may be stored into or retrieved from the context data table  of database(s) . In one embodiment, each word in a phrase may be a tag linked to another user profile and its associated data. For example \u201cCanon\u201d may be a selectable element within the user interface as a tag that results in the selector receiving more general data regarding Canon products. Similarly, \u201ccamera\u201d may be selected to receive more general data regarding cameras, in this case both digital and film cameras.","The tables  may also include an item list table  which maintains listing or item records for goods and\/or services that were created using the item list application(s) . In various embodiments, the item list may be created and shared with a community group or to all users in part to solicit feedback regarding listed or potential vendors.","Each listing or item record within the item list table  may furthermore be linked to one or more electronic shopping cart records within a electronic shopping cart table  and to one or more user records within the user table  and\/or a vendor table , so as to associate a seller or vendor and one or more actual or potential buyers from the community group with each item record.","A transaction table  may contain a record for each transaction pertaining to items or listings for which records exist within the item list table . For example, the transaction table  may contain a purchase or sales transaction of an item of the item list by a consumer.","In one example embodiment, a feedback table  may be utilized by one or more of the reputation application(s)  to construct and maintain reputation information associated with users (e.g., members of the community group, sellers, etc.).","Group(s) of users found in a community group table  may be selected by a user to be members of a community group having access to user profile data and an item listing associated with the electronic shopping cart.","A filter table  may be used to sort and filter data associated with a user profile. The sorted or filtered data are then stored in the result data table  and linked to the user profile creator via a user profile identifier. Various types of filters and associated rules were discussed above with reference to the filtering application(s)  in .",{"@attributes":{"id":"p-0049","num":"0048"},"figref":"FIG. 4","b":["400","402","404","402","726"]},"In general, system  of an example embodiment, can rank a set of ads based on a highest expected revenue value for each ad. The expected revenue value for an ad is based on the cost per click (CPC) for the ad and the click through rate (CTR) for the ad. The advertisers who submit ads to the ad server  typically bid for an ad by specifying how much they are caning to pay for a user click of the ad (i.e., Max CPC). Thus, the advertisers provide the CPC value for the ad. The ad optimizer  optimizes the yield for each ad by computing the predicted CTR (pCTR) for the ad. The ad with the highest expected revenue value or predicted yield (pYield) is typically ranked to be shown in the first (best) position. In one embodiment, an Offline process can be used to calculate the pCTR for existing ad units, as the CTR for existing ads can be retrieved from historical data. In another embodiment, real-time ad scoring can be performed on new and existing ads. New ads can be assigned a default score as historical CTR data is not yet known.",{"@attributes":{"id":"p-0051","num":"0050"},"figref":"FIG. 5","b":"404"},{"@attributes":{"id":"p-0052","num":"0051"},"figref":"FIG. 6","b":["404","100","112"]},"In the particular embodiment, the advertising optimization engine  may include a number of features, applications, services, tools, or modules, such as those described in more detail below.","Optimization Data","The optimization platform  can use multiple sources of data as inputs with some retrieved from offline sources (data warehouse, advertiser data, etc.) and some from real-time sources (Real-time module \u2014RTM real-time context). In order to support this, an optimization data framework is provided to support multiple sources of data.","Variables","In a particular embodiment, a variable is a data element that can be plugged into a feature, which in turn can be plugged into an optimization model. The optimization data framework can be designed to support the following variable types.",{"@attributes":{"id":"p-0056","num":"0055"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"77pt","align":"left"}}],"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}},{"entry":["Variable Type","Description","Examples","Definition"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Publisher real-time","Data elements that","Search query,","Offline: N\/A"]},{"entry":["context variables","are passed from","category,","Real-time: Publisher"]},{"entry":[{},"RTM to the Ad","time of day","and URL request"]},{"entry":[{},"Server during a",{},"parameter (i.e. \u201cuq\u201d for"]},{"entry":[{},"real-time ad call.",{},"RTM user query)."]},{"entry":["Ad variables","Data elements that","Creative","Offline: Defined as"]},{"entry":[{},"are part of the ad","Headline,","lookup in Oracle"]},{"entry":[{},"unit.","Creative Line 1,","campaign tables."]},{"entry":[{},{},"Display","Real-time: Defined as"]},{"entry":[{},{},"URL, Image,","lookup on Creative or"]},{"entry":[{},{},"Keyword","Ad Unit tables."]},{"entry":["Data warehouse","Data elements that","CTR, bids,","Offline: Lookup by ID"]},{"entry":["variables","are pulled from the","advertiser","in DW tables. This can"]},{"entry":[{},"DW.","score","require the creation of a"]},{"entry":[{},{},{},"set of normalized DW"]},{"entry":[{},{},{},"tables that can store"]},{"entry":[{},{},{},"calculated variable"]},{"entry":[{},{},{},"values at the"]},{"entry":[{},{},{},"appropriate level"]},{"entry":[{},{},{},"(advertiser, creative, ad"]},{"entry":[{},{},{},"unit). Can be defined"]},{"entry":[{},{},{},"by the DW table name"]},{"entry":[{},{},{},"and column name."]},{"entry":[{},{},{},"Real-time: Defined as"]},{"entry":[{},{},{},"lookup on existing"]},{"entry":[{},{},{},"Advertiser, Creative or"]},{"entry":[{},{},{},"Ad Unit tables."]},{"entry":["Oracle variables","Data elements that","Advertiser"]},{"entry":[{},"are pulled from the","name, user"]},{"entry":[{},"Oracle advertiser","targeting"]},{"entry":[{},"tables","criteria"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]}}}}},"For each variable, we can define how often the value for the variable should be refreshed for each ad unit. The applicable values are as follows for a particular embodiment.","On creation (only once)\n\n","Variables can be defined as one of the following:\n\n","Additionally, for each variable a default value can be assigned (optional). If the variable value for a particular ad unit is null or is not available, then the default value can be used. If no default value is assigned and the variable value is not available, then the variable value can be considered to be null.","Features","A feature is a calculated value (generally 0 or 1) that can be factored into a model to determine the predicted CTR (pCTR) for an ad unit. Features are expressed as a logical function of variable values and can require lookups to tables that can be available in the Ad Server . In one embodiment, there can be approximately 100 defined features but the framework can scale to support more than 100,000 features. In a particular embodiment, the following feature types can be supported:",{"@attributes":{"id":"p-0062","num":"0065"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"112pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"98pt","align":"left"}}],"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}},{"entry":[{},{},"Example"]},{"entry":[{},{},"(Description of function -"]},{"entry":[{},{},"actual features can be defined"]},{"entry":[{},{},"in code. Variables are"]},{"entry":["Feature Type","Description","displayed in brackets.)"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Tokenized","Tokenized features are used to","Number of times the entire"]},{"entry":["Features","measure the relationship between","[search string] appears in the"]},{"entry":[{},"the user search query and the ad","[headline of the creative]"]},{"entry":[{},"text."]},{"entry":["TF-IDF","Term Frequency-Inverse Document","Average TF-IDF score for all"]},{"entry":["Features","Frequency is used to determine","[search string] tokens across"]},{"entry":[{},"how important a token (word) is to","[creative text]."]},{"entry":[{},"an ad. Term Frequency refers to the","Note: In this case, [creative"]},{"entry":[{},"number of times a token appears in","text] is actually 3 variables"]},{"entry":[{},"an ad. Inverse Document","concatenated (headline + line"]},{"entry":[{},"Frequency refers to the total","1 + line 2)."]},{"entry":[{},"number of ads divided by the","Also, IDF value is calculated"]},{"entry":[{},"number of those ads that contain","by querying IDF lookup table."]},{"entry":[{},"the token. Terms that occur","If no value exists for the"]},{"entry":[{},"frequently in a single ad and","token, a default value is used"]},{"entry":[{},"infrequently among all ads have","(as specified within a"]},{"entry":[{},"higher scores. Common terms that","conditional clause)."]},{"entry":[{},"appear frequently in ads and\/or"]},{"entry":[{},"infrequently in an ad can score"]},{"entry":[{},"lower."]},{"entry":[{},"To support TF-IDF features, a"]},{"entry":[{},"token lookup table can be"]},{"entry":[{},"maintained in the Ad Server that"]},{"entry":[{},"contains the IDF score for each"]},{"entry":[{},"token."]},{"entry":["Meta Features","Meta variables contain contextual","[Advertiser] is Nike"]},{"entry":[{},"data such as KW category,","[Keyword category] is Shoes"]},{"entry":[{},"temporal or advertiser information.","[Day of week] is Sunday"]},{"entry":[{},{},"Note: \u201cDay of week\u201d is"]},{"entry":[{},{},"actually a function applied on"]},{"entry":[{},{},"top of the variable \u201ccurrent"]},{"entry":[{},{},"datetime\u201d to strip of the day of"]},{"entry":[{},{},"week)."]},{"entry":["Lexical","Lexical features are custom rules","\u201cFree shipping\u201d in [creative"]},{"entry":["Features","involving specific tokens that have","text]"]},{"entry":[{},"been shown to impact an ad's click-","Note: In this case, [creative"]},{"entry":[{},"through rate.","text] is actually 3 variables"]},{"entry":[{},{},"concatenated (headline + line"]},{"entry":[{},{},"1 + line 2)."]},{"entry":["Interaction","Interaction features are new","Feature123 \u00d7 Feature456"]},{"entry":["Features","features that are a combination of","Note: This could translate to"]},{"entry":[{},"two or more of the previously","\u201cAdvertiser is Nike AND"]},{"entry":[{},"generated features.","category is shoes\u201d"]},{"entry":["Lookup","These features can contain a","Lookup adv_+[advertiser"]},{"entry":["Features","function to do a lookup on a","name]"]},{"entry":[{},"generic string lookup table using"]},{"entry":[{},"some string variable. The lookup"]},{"entry":[{},"function can return the numeric"]},{"entry":[{},"value associated with that string."]},{"entry":[{},"The purpose of lookup features is to"]},{"entry":[{},"efficiently handle large sets of"]},{"entry":[{},"related features that can be reduced"]},{"entry":[{},"down to one feature with a lookup."]},{"entry":[{},"For example, you may have a"]},{"entry":[{},"multiplier (coefficient) associated"]},{"entry":[{},"with 10,000 different advertisers"]},{"entry":[{},"(so if the advertiser name for the ad"]},{"entry":[{},"unit is equal to one of the"]},{"entry":[{},"advertisers, then you apply the"]},{"entry":[{},"coefficient\/multiplier associated"]},{"entry":[{},"with that advertiser). This could be"]},{"entry":[{},"accomplished without lookup"]},{"entry":[{},"features by using 10,000 different"]},{"entry":[{},"meta features (which is very"]},{"entry":[{},"inefficient). However, we can"]},{"entry":[{},"reduce this down to one feature by"]},{"entry":[{},"storing the 10,000 advertiser names"]},{"entry":[{},"in a lookup along with their"]},{"entry":[{},"associated multiplier. Instead of"]},{"entry":[{},"processing 10,000 features we are"]},{"entry":[{},"now doing an indexed lookup for"]},{"entry":[{},"one feature."]},{"entry":[{},"Lookup features should always"]},{"entry":[{},"have a coefficient of 1."]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}}}},"While the feature type list above can be used to determine the list of variables and real-time lookup tables and functions that can be supported in this particular embodiment, we don't have to explicitly define features by type. In other words, we are not limited to creating features that fall into one of the types above; but, rather we can be limited by the variables, lookup tables and functions that can be supported. For example, while the feature \u201cAdvertiser average click-through rate is above 1%\u201d doesn't fall into one of the categories above, we could still create a feature for this; because, the data warehouse (DW) variable, \u201cadvertiser average click-through rate\u201d could be defined within our framework. Rather, features can be explicitly defined as one of the following:\n\n","An optimization model, in a particular embodiment, is a linear formula that applies coefficients to feature values to determine the predicted CTR for an ad unit. Model coefficients can be defined per-model (as opposed to per ad unit) and can be refreshed on a periodic basis by a refresh tool. A model can be defined as a series of coefficients for every feature in the inventory. For example:",{"@attributes":{"id":"p-0065","num":"0071"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"126pt","align":"center"}}],"thead":{"row":[{"entry":[{},"MODEL 123"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]},{"entry":[{},"Feature Name","Coefficient"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"126pt","align":"char","char":"."}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"f_image","0.342"]},{"entry":[{},"f_kw1_l1","0.002"]},{"entry":[{},"f_kw1_l2","0"]},{"entry":[{},". . .",". . ."]},{"entry":[{},"f_add_url","0.232"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}]}}},"Note that a feature that shouldn't be factored into a model (like f_kw1_12 above) can have a zero coefficient. In the example above, the pCTR using Model 123 for a particular ad unit would be calculated as:\n\npCTR=0.342\u00d7f_image+0.002\u00d7f_kw11+. . . +0.232\u00d7f_add_url\n","In a particular embodiment, the framework  can be designed to support multiple models. The methodology to determine which model to utilize at real-time can be determined in the next phase.","DW Variable Calculation (can be Performed as an Offline Process)","Based on the refresh rate defined for each variable, a batch job can periodically run to calculate the value for the predefined list of DW variables for every active ad unit. This data can be stored within the normalized DW variable tables for consumption by the Feeder job (Ad Feeder).","IDF Token Value Calculation","A DW table can be created to store the Inverse Document Frequency (IDF) score for a large set of tokens. The IDF score for each token can be calculated as follows:\n\nIDF Score=Total# of creatives\/# of creatives that contain the token\n","The IDF lookup table can be loaded into the Ad Server  so that it can be accessed during real-time scoring. A batch job can periodically refresh the IDF values for tokens that have an IDF value that exceeds some pre-defined configurable limit. In addition, the batch job can locate and score new tokens as they appear in ads.","Offline Feature Calculation","The values for the \u201centirely offline\u201d features can be calculated offline on a periodic basis. Before the data is loaded by the Ad Feeder into Ad Search, the values can be aggregated together using the model coefficient values for the applicable variables. For example, if a model contains two real-time variables, two composite variables and two offline variables and the model is set up as follows:\n\nAd Score=0.011+0.022+0.221+0.322+0.111+0.212\n","Then the offline score can be calculated as follows:\n\nOffline score=0.111+0.212\n","Only the offline score (calculated at the ad unit-level) can be loaded into Ad Search. For the example above, during real-time ad serving the score for the ad would be calculated as follows:\n\nAd Score=0.011+0.022+0.221+0.322+[Offline Score]\n\nOffline Quality Score Calculation\n","In a particular embodiment, a quality score can be calculated for a particular ad unit, as described above, and a quality score can be calculated for a particular advertiser (e.g., the source of the ad). The advertiser quality score can be based on a variety of factors including, advertiser revenue volume, seniority, business history, contractual arrangements, 3rparty ratings, and the like. A quality score for each advertiser can be generated and stored in an offline process. The calculated offline quality score can be uploaded for each ad unit (e.g., unique creative, keyword, and match type combination) and each advertiser. Given that the quality of the advertiser and the quality of the ad unit itself can be good predictors of ad unit performance, the advertiser quality score and the ad unit quality score can be combined with the calculation of the predicted click thru rate (pCTR) to calculate the expected yield for a particular ad unit. In a particular embodiment, the yield can be calculated as follows:\n\nYield=(pCTR)\u00d7(Advertiser Quality Score)\u00d7(Ad Unit Quality Score)\u00d7(Max CPC)\n\nwhere pCTR is the predicted click thru rate and Max CPC is the maximum cost per click for the ad unit. In this manner, lower cost offline processes can be used to improve the performance, accuracy, and effectiveness of the real time ad serving processes. For example, the cost of serving of a particular ad in real time can be readily avoided if the offline calculated quality score for the advertiser and\/or the offline calculated quality score for the ad itself does not meet or exceed a minimum quality score threshold. Thus, the highest quality advertisers and the highest quality ads can be served in real time thereby increasing overall yield of a particular ad service process.\n\nMia Modeling\n","An MIA modeling tool (SAS) can process the ad unit performance data and Ad Server logs offline and can periodically output new coefficient values for the optimization models.","Feeder","In a particular embodiment, the Ad Feeder can pull in all of the data required for Ad Scoring and the ad optimization model.",{"@attributes":{"id":"p-0077","num":"0083"},"tables":{"@attributes":{"id":"TABLE-US-00004","num":"00004"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"91pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"91pt","align":"left"}}],"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}},{"entry":["Data","Description","Data Structure"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Offline","Calculated variable values for","Stored at appropriate level in"]},{"entry":["variable","composite and real-time","data structure (account,"]},{"entry":["values","features.","campaign, ad group, creative"]},{"entry":[{},{},"or keyword)"]},{"entry":["Offline","Calculated offline score at","Stored in lookup at the ad-unit"]},{"entry":["score","the ad-unit level.","level."]},{"entry":["String","String\/multiplier lookup","Stored in string lookup table"]},{"entry":["lookup","values for Lookup Features.","in the Ad Search."]},{"entry":"table"},{"entry":["Model","Model-level coefficient","Stored in model coefficient"]},{"entry":["coefficient","values for composite and","lookup table in Ad Search"]},{"entry":["values","real-time features"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}}},"br":{}},"During real-time, ad requests can be made to the Ad Server  and ads can be ranked and served according to the steps described herein.  illustrates a set of stages in an example process used in an embodiment to score and rank an ad.","Parameter Normalization","The Ad Server  can perform the following operations to determine what data to pass to Ad Search:\n\n","Ad Lookup can retrieve the ad units that satisfy the following:\n\n","In a particular embodiment, one of a set of available scoring models can be used for Ad Scoring during this step.","Feature Calculation","For all of the eligible ad units, the Ad Optimizer  can determine which features need to be calculated by finding all features for the selected model that have a non-zero coefficient value. Next, the Ad Optimizer  can calculate the real-time and composite feature values for all of the eligible ad units as necessary. This process can involve the following operations:","Lookups on the various variable tables to pull the relevant variable values.\n\n","A numeric value can be calculated for all applicable features for every eligible ad unit.","Scoring and Ranking","The feature values calculated above can be plugged into the appropriate linear model to calculate the pCTR (score) for each eligible ad unit. The coefficient for each feature for the selected model can be pulled from the model coefficient lookup table and the pCTR can be calculated for each ad unit as follows:\n\npCTR=\n","After determining the pCTR for each eligible ad unit, the ads can be ranked in descending (or ascending) order by yield. The yield for each ad unit can be calculated as follows:\n\nYield=pCTR\u00d7MaxCPC\n","This preliminary ranking order can be captured for logging purposes.","Budget Check","For the top ranked ad units, a call can be made to the Budget Server to determine, (1) if the ad campaign corresponding to each ad unit has enough available budget and (2) if the account for each ad unit has enough available budget (both limits must be met). If there is not enough available budget for a particular ad unit, it can be removed from the ranking and cannot be served.","Advertiser Dedupe","In a particular embodiment, no more than one ad per advertiser should be served per RTM call. In order to meet this requirement, during this step a check can be made to verify that no more than one ad per advertiser is in the top n ranked ads, where n is the number of ads requested by the RTM times the page number of the search results (if available). If there are multiple ads for a particular advertiser, only the top ranked ad can be retained.","Actual CPC calculation","After the rules detailed above have been applied, the final ad ranking can be calculated. The Ad Server  can serve the ads ranked from n to m where:\n\n","Note: if the page of search results is not applicable, it should be assumed to be 1. For each of the ad units in the range above, the Actual CPC (the amount charged if the ad is clicked) can be calculated as follows:\n\n","The floor value is a configurable value that defines the lowest amount than an advertiser should be charged for a click. This value should be defined per currency.","Logging","For each ad that is served, the following data should be captured in a log (per impression, per ad unit):\n\n",{"@attributes":{"id":"p-0094","num":"0138"},"figref":"FIG. 8","b":["610","615","620","625","630","635"]},{"@attributes":{"id":"p-0095","num":"0139"},"figref":"FIG. 9","b":"700"},"The example computer system  includes a processor  (e.g., a central processing unit (CPU), a graphics processing unit (GPU), or both), a main memory  and a static memory , which communicate with each other via a bus . The computer system  may further include a video display unit  (e.g., a liquid crystal display (LCD) or a cathode ray tube (CRT)). The computer system  also includes an input device  (e.g., a keyboard), a cursor control device  (e.g., a mouse), a disk drive unit , a signal generation device  (e.g., a speaker) and a network interface device .","The disk drive unit  includes a machine-readable medium  on which is stored one or more sets of instructions (e.g., software ) embodying any one or more of the methodologies or functions described herein. The instructions  may also reside, completely or at least partially, within the main memory , the static memory , and\/or within the processor  during execution thereof by the computer system . The main memory  and the processor  also may constitute machine-readable media. The instructions  may further be transmitted or received over a network  via the network interface device . While the machine-readable medium  is shown in an example embodiment to be a single medium, the term \u201cmachine-readable medium\u201d should be taken to include a single medium or multiple media (e.g., a centralized or distributed database, and\/or associated caches and servers) that store the one or more sets of instructions. The term \u201cmachine-readable medium\u201d can also be taken to include any medium that is capable of storing, encoding or carrying a set of instructions for execution by the machine and that cause the machine to perform any one or more of the methodologies of the various embodiments, or that is capable of storing, encoding or carrying data structures utilized by or associated with such a set of instructions. The term \u201cmachine-readable medium\u201d can accordingly be taken to include, but not be limited to, solid-state memories, optical media, and magnetic media.","The Abstract of the Disclosure is provided to comply with 37 C.F.R. \u00a71.72(b), requiring an abstract that can allow the reader to quickly ascertain the nature of the technical disclosure. It is submitted with the understanding that it can not be used to interpret or limit the scope or meaning of the claims. In addition, in the foregoing Detailed Description, it can be seen that various features are grouped together in a single embodiment for the purpose of streamlining the disclosure. This method of disclosure is not to be interpreted as reflecting an intention that the claimed embodiments require more features than are expressly recited in each claim. Rather, as the following claims reflect, inventive subject matter lies in less than all features of a single disclosed embodiment. Thus the following claims are hereby incorporated into the Detailed Description, with each claim standing on its own as a separate embodiment."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The various embodiments is illustrated by way of example, and not by way of limitation, in the figures of the accompanying drawings in which:",{"@attributes":{"id":"p-0007","num":"0006"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0008","num":"0007"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 9"}]},"DETDESC":[{},{}]}
