---
title: Windows portable devices interface for Bluetooth low energy devices
abstract: A method and system are provided in which a Windows Portable Devices (WPD) driver installed and executed on a central device enables one or more applications on that device to interface with a peripheral device, such as a Bluetooth low energy (BLE) device. The peripheral device may utilize a Generic Attribute Profile (GATT) to interface with the WPD driver. Through the WPD driver, the central device may access, transmit, receive, and/or modify information associated with the peripheral device and/or control the peripheral device. The information associated with the peripheral device may include services, characteristics, and/or descriptors. A WPD device and objects that logically or virtually represents the peripheral device may be generated to map attributes of the WPD device to services and/or characteristics associated with the peripheral device. More than one WPD device may be available when multiple peripheral devices are represented in the central device.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08620379&OS=08620379&RS=08620379
owner: Broadcom Corporation
number: 08620379
owner_city: Irvine
owner_country: US
publication_date: 20110630
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS\/INCORPORATION BY REFERENCE","FIELD OF THE INVENTION","BACKGROUND OF THE DISCLOSURE","BRIEF SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE INVENTION"],"p":["This patent application makes reference to, claims priority to, and claims benefit from U.S. Provisional Patent Application No. 61\/419,911, filed Dec. 6, 2010, which is hereby incorporated herein by reference in its entirety.","Certain embodiments of the invention relate to Bluetooth device communication. More specifically, certain embodiments of the invention relate to windows portable devices (WPD) interface for Bluetooth low energy (BLE) devices.","Bluetooth low energy (BLE) is an enhancement to the Bluetooth standard that was introduced in Bluetooth version 4.0. Devices using Bluetooth low energy wireless technology may consume a fraction of the power of other Bluetooth-enabled products. In some instances, a Bluetooth low energy device may be able to operate more than a year on a coin-cell battery without recharging. The deployment of these types of devices over a wide range of situations may result in a need for such devices to interface with Windows-based machines.","Further limitations and disadvantages of conventional and traditional approaches will become apparent to one of skill in the art, through comparison of such systems with the present invention as set forth in the remainder of the present application with reference to the drawings.","A system and\/or method for windows portable devices interface for Bluetooth low energy devices, as set forth more completely in the claims.","Various advantages, aspects and novel features of the present invention, as well as details of an illustrated embodiment thereof, will be more fully understood from the following description and drawings.","Certain embodiments of the invention can be found in a method and system for a Windows Portable Devices interface for Bluetooth low energy devices. In accordance with various embodiments of the invention, a Windows Portable Devices (WPD) driver installed and executed on a central device may enable one or more applications on the central device to interface with a peripheral device, such as a Bluetooth low energy (BLE) device, for example. The central device may be a Windows-based machine, for example. The peripheral device may be communicatively coupled to the central device and may utilize a Generic Attribute Profile (GATT) to interface with the WPD driver. Through the WPD driver, the central device may access, transmit, receive, and\/or modify information associated with the peripheral device. Moreover, also through the WPD driver, the central device may control the operation and\/or functionality of the peripheral device. The information associated with the peripheral device may include services and characteristics. Each characteristic may have one or more values and\/or descriptors. A WPD device that logically or virtually represents the peripheral device may be generated by the WPD driver. The WPD device may comprise one or more WPD objects. WPD object properties may be mapped into services and\/or characteristics associated with the peripheral device. The characteristics associated with the peripheral device may comprise one or more values and\/or one or more descriptors. In some instances, more than one WPD device may be available when multiple peripheral devices are represented in the central device.",{"@attributes":{"id":"p-0014","num":"0013"},"figref":["FIG. 1","FIG. 1"],"b":["100","120","130","140","100","100","100"]},"The devices , , and  may comprise suitable logic, circuitry, code, and\/or interfaces that may be operable to support the use of Bluetooth low energy for Bluetooth communication. In this regard, the devices , , and  may be referred to as BLE devices or BLE-enabled devices, for example. The device  may be operable to communicate with the devices , , and  through Bluetooth connections , , and , respectively.","The Windows Portable Devices supported by the device  may refer to a type of object-based architecture or platform that may be utilized in a Windows-based machine (i.e., central device) to allow access to one or more external devices (i.e., peripheral devices). The external or peripheral devices may comprise, but need not be limited to, key fobs, portable medical devices, media players, digital still and\/or video cameras, mobile phones, or other like devices that may be communicatively coupled to the Windows-based machine. The devices , , and  shown in  may correspond to external or peripheral devices while the device  may correspond to the central device. The object-based architecture provided by Windows Portable Devices may comprise one or more Application Programming Interfaces (APIs) that enable the interaction between an application running or executing on the Windows-based machine and one or more of the external devices.","One or more applications running or executing on the device  may utilize Windows Portable Devices to perform various operations in connection with an external device. For example, Windows Portable Devices may enable an application to connect to the external device, search and\/or retrieve information from the external device, list or enumerate the external devices that are attached or connected, determine the capabilities of the external device, send and\/or generate information to be stored in the external device, modify information in the external device, control the external device, and\/or detect the presence or absence of the external device.","Also shown in  are WPD devices , , and  that respectively correspond to logical or virtual representations of the devices , , and  in the device . The WPD devices , , and  may be utilized by applications executing on the device  to perform operations in connection with the devices , , and , respectively. The WPD devices , , and  may be generated to be compatible with the object-based architecture supported by Windows Portable Devices. Each of the WPD devices , , and  may comprise one or more objects, which may be referred to as WPD objects. These objects may have properties, events, or the like. An example of an object is a storage object.","The Bluetooth low energy operation supported by the devices , , and  may refer to a specification that is included in Bluetooth 4.0. Bluetooth low energy introduces new protocols to simplify the development and the implementation of low energy profiles. The new protocols may include an Attribute Protocol (ATT) and a Generic Attribute Profile (GATT), for example.","In operation, the device  may communicate with the device  by using Bluetooth low energy protocols associated with the Bluetooth connection . An application executing on the device  may be able to interact with the device  through an interface implemented using the Windows Portable Devices object-based architecture supported by the device . Such interface may comprise a driver that allows the Bluetooth low energy protocols to communicate with the object-based architecture of Windows Portable Devices. In this regard, the driver may be utilized to generate the WPD device  to enable the interaction between the device  and the device .","Similarly, the devices  and  may communicate with the device  by using Bluetooth low energy protocols associated with the Bluetooth connections  and , respectively. One or more applications executing on the device  may be able to interact with the devices  and  through interfaces implemented using the Windows Portable Devices object-based architecture supported by the device . Those interfaces may comprise a driver that allows the Bluetooth low energy protocols to communicate with the object-based architecture of Windows Portable Devices. In this regard, the drivers may be utilized to generate the WPD devices  and  to enable the interaction between the device  and the devices  and , respectively.",{"@attributes":{"id":"p-0022","num":"0021"},"figref":["FIGS. 2A and 2B","FIG. 2A","FIG. 1"],"b":["100","250","250","120","130","140"]},"The Windows-based machine  may comprise a memory module , a processor module , and a communication module . The memory module  may comprise suitable logic, circuitry, code, and\/or interfaces that may be operable to store data and\/or code associated with the execution of one or more applications. The memory module  may be operable to store data and\/or code utilized to support the processes associated with Windows Portable Devices. The memory module  may comprise a single memory device or multiple memory devices. A memory device may be an integrated circuit that comprises a Dynamic Random Access Memory (DRAM), a Synchronous DRAM (SDRAM), Double Data Rate SDRAM (DDR SDRAM or DDR2 SDRAM), or FLASH memory, for example.","The processor module  may comprise suitable logic, circuitry, code, and\/or interfaces that may be operable to run or execute a Windows-based operating system (OS) and one or more applications. The processor module  may be operable to support the processes associated with Windows Portable Devices. The processor module  may comprise a single processing device or multiple processing devices. A processing device may be an integrated circuit that comprises a central processing unit (CPU) or host processor, a baseband processor, a graphics processor, or some other type of dedicated processor, for example. The processor module  may also be operable to handle data and\/or control signals associated with the transmission and\/or reception operations of the communication module .","The communication module  may comprise suitable logic, circuitry, code, and\/or interfaces that may be operable to communicate with one or more external devices. The communication module  may support wireless and\/or wired communication with external devices. With respect to wireless communication operations, the communication module  may comprise one or more radios (not shown) that are operable to transmit and\/or receive radio frequency (RF) signals. For example, the communication module  may comprise a Bluetooth radio that may be operable to support Bluetooth low energy protocols and enable communication with the Bluetooth low energy device . The communication module  may also support other types of radios such as radios used for communication in Wireless Local Area Networks (WLANs), Personal Area Networks (PANs), or cellular networks, for example.","The Bluetooth low energy device  may comprise a memory module , a processor module , and a communication module . The memory module  may comprise suitable logic, circuitry, code, and\/or interfaces that may be operable to store data and\/or code associated with the operations of the Bluetooth low energy device . The memory module  may be operable to store data and\/or code utilized to support the processes associated with Bluetooth low energy, for example. Like the memory module  described above, the memory module  may comprise a single memory device or multiple memory devices.","The processor module  may comprise suitable logic, circuitry, code, and\/or interfaces that may be operable to run or execute an operating system and one or more applications. The processor module  may be operable to support the processes associated with Bluetooth low energy, for example. Like the processor module  described above, the processor module  may comprise a single processing device or multiple processing devices. The processor module  may comprise a baseband processor for handling Bluetooth baseband operations.","The communication module  may comprise suitable logic, circuitry, code, and\/or interfaces that may be operable to communicate with one or more additional devices. The additional devices may be Bluetooth-enabled devices or may be devices that utilize a different wireless communication technology, such as WLAN, for example. In this regard, the communication module  may comprise one or more radios (not shown) that are operable to transmit and\/or receive RF signals. For example, the communication module  may comprise a Bluetooth radio that may be operable to support Bluetooth low energy protocols and enable communication with the Windows-based machine .","The Bluetooth low energy device  may be operable to support various Bluetooth-related protocols, profiles, and\/or processes. The Bluetooth protocol stack may be implemented by a Bluetooth controller stack that is operable to handle the timing critical radio interface and a Bluetooth host stack that is operable to handle high level data. The Bluetooth controller stack may be implemented utilizing the communication module , which may comprise the Bluetooth radio, and the processor module , which may comprise a processing device such as a microprocessor, for example. The Bluetooth host stack may be implemented as part of the OS running on the processor module  or as an instantiation of a package on top of the OS. In some instances, the Bluetooth controller stack and the Bluetooth host stack may run or execute on the same processing device in the processor module .","In operation, the Bluetooth low energy device  may communicate with the Windows-based machine  by using Bluetooth low energy protocols in a Bluetooth connection . An application executing on the processor module  of the Windows-based machine  may be able to interact with the Bluetooth low energy device  through an interface implemented using the Windows Portable Devices object-based architecture supported by the Windows-based machine . Such interface may comprise a driver that allows the Bluetooth low energy protocols to communicate with the object-based architecture of Windows Portable Devices. In this regard, the driver may be utilized to generate a WPD device  as shown in  to enable the interaction between the Windows-based machine  and the Bluetooth low energy device . The WPD device  is a logical or virtual representation of the Bluetooth low energy device  supported by the Windows Portable Devices object-based architecture in the Windows-based machine .",{"@attributes":{"id":"p-0031","num":"0030"},"figref":["FIG. 3","FIG. 3"],"b":["100","250","100","300","320","100","320","300","310","310","320","330","330"]},"The driver  may be utilized to generate or instantiate a WPD device associated with the Bluetooth low energy device . The WPD device may then be utilized by the application  to interact with the Bluetooth low energy device . The WPD device may correspond to a logical or virtual representation of the Bluetooth low energy device  that may include attributes associated with the Bluetooth low energy device . The WPD device may comprise one or more objects to represent the various attributes of the Bluetooth low energy device , for example.","Also shown in  is a Bluetooth host stack , which may run or execute on the Windows-based machine . The Bluetooth host stack  may comprise various protocols and profiles, including but not limited to a GATT , an ATT , a low energy Security Manager Protocol (SMP) , and a Logical Link Control And Adaptation Protocol (L2CAP) . The ATT  may be operable as a wire protocol while the GATT  may be operable as a protocol that describes how ATT is used in the composition of services. For example, the GATT  may be operable to define how ATT attributes are grouped together into services and to describe the characteristics associated with the services. Thus, the GATT  and the ATT  may utilize characteristics to describe the state of a device and services to describe how those characteristics are related to each other and how they are used. The SMP  may be operable for pairing and transport specific key distribution. The L2CAP  may be operable to multiplex data between higher layer protocols, segment and reassemble packages, manage multicast data transmission. In some instances, the SMP  may be bound to the L2CAP .","With respect to the Windows-based machine , there are shown a Bluetooth controller  and a Bluetooth radio . The Bluetooth controller  may comprise suitable logic, circuitry, code, and\/or interfaces that are operable to control the Bluetooth radio interface. The Bluetooth controller  may be part of the processor module  and\/or of the communication module  shown in . The Bluetooth controller  may be utilized to implement a Bluetooth controller stack, for example. The Bluetooth radio  may comprise suitable logic, circuitry, code, and\/or interface that may be operable to wirelessly communicate with a Bluetooth radio on another device.","With respect to the Bluetooth low energy device , there are shown an application  and a Bluetooth host stack . The Bluetooth host stack  may comprise various protocols and profiles, including but not limited to a GATT , an ATT , an SMP , and an L2CAP . The protocols shown in connection with the Bluetooth host stack  may be substantially similar to those shown in connection with the Bluetooth host stack . Also with respect to the Bluetooth low energy device , there are shown a Bluetooth controller  and a Bluetooth radio , which are substantially similar to the Bluetooth controller  and the Bluetooth radio , respectively.","In operation, the application  may communicate with the driver  through the API  by opening device handles and sending input\/output (I\/O) control codes. Although not shown, the API  and the driver  may utilize serializers to pack and unpack commands and\/or parameters in buffers. The driver  may be utilized to generate a WPD device used by the application  to interact with the Bluetooth low energy device . The driver  may communicate with the Bluetooth host stack  based on the low energy protocols GATT  and ATT . The services and\/or characteristics associated with the Bluetooth low energy device  may be communicated to the driver , which in turn may map the information into the appropriate object attributes as defined by the Windows Portable Devices. The characteristics associated with the Bluetooth low energy device  may comprise one or more values and\/or one or more descriptors, for example.","The application  in the Bluetooth low energy device  may be associated with certain functionality provided by the device. The application  may be utilized to obtain information from the Bluetooth low energy device , such as information related to an operation, feature, or capability of the Bluetooth low energy device . Such information may be communicated from the Bluetooth low energy device  to the Windows-based machine  through the Bluetooth connection  by having the information pass from the Bluetooth host stack  to the Bluetooth host stack . When the information is received by the WDF host process  from the Bluetooth host stack , the information may be mapped into the attributes of a WPD device representing the Bluetooth low energy device  by the WPD driver . Accordingly, the application  may access the information associated with the Bluetooth low energy device  from the WPD device.","Similarly, controls or commands provided by the application  may make their way to the Bluetooth low energy device  through the WPD device that is available in the Windows-based machine . For example, the application  may communicate a registration to a particular descriptor of a characteristic associated with the Bluetooth low energy device  to notify the application  when that characteristic has changed. Once the registration has been made on the descriptor, if the characteristics associated with that descriptor changes, a notification may be provided to the application  from the Bluetooth low energy device .","Another example of the operation described in connection to  is when the Bluetooth low energy device  is a proximity fob that has a battery service and a battery level characteristic. In this example, the driver  may expose a method by which the application  can read the battery level of the Bluetooth low energy device . For example, the application , through the driver , may read the value of the battery level from attributes in a WPD device representing the Bluetooth low energy device . The attribute information may have been obtained from information produced by the application  in the Bluetooth low energy device . Thus, when the application  asks the driver  to read the battery level, the driver  may use ATT and GATT protocols to talk to the proximity fob, determine the current value of the battery level, and provide the information as an attribute in the WPD device. The application  may then access the information from the WPD device. This information may be useful to determine the remaining battery life of the Bluetooth low energy device  and a corresponding action to take.","In yet another example of the operation described in connection to , the Bluetooth low energy device  may be a thermometer that has a temperature service and a temperature value characteristic. In this example, the driver  may expose a method by which the application  can read the temperature value of the Bluetooth low energy device  from a WPD device representing the Bluetooth low energy device . Thus, when the application  asks the driver  to read the current temperature level, the driver  may use ATT and GATT protocols to talk to the thermometer, determine the current value of the temperature level, and provide the information as an attribute in the WPD device. The application  may then access the information from the WPD device.","Other examples include using the application  and the driver  to write a value to an alert characteristic of a key fob to cause the key fob to beep, and using the application  and the driver  to read a weight value characteristic from a weight scale to display the value of the weight.","While the examples described above typically relate to Bluetooth low energy devices, the invention need not be so limited. Other devices may also be utilized such as devices that enable the use of GATT or other like protocol or profile to interface with devices that utilize Windows Portable Devices. These devices may be referred to as GATT-enabled devices and may include Bluetooth low energy devices, for example.","Moreover, while the examples described above with respect to  relate to a single Bluetooth low energy device  and a single application  in the Windows-based machine , the invention need not be so limited. For example, multiple peripheral devices may result in multiple WPD devices in the Windows-based machine . One or more applications in the Windows-based machine  may be utilized to access one or more of the WPD devices.",{"@attributes":{"id":"p-0044","num":"0043"},"figref":["FIG. 4","FIG. 4"],"b":["400","410","100","120","130","140","250","420","430","440"]},{"@attributes":{"id":"p-0045","num":"0044"},"figref":["FIG. 5","FIG. 5"],"b":["500","510","100"]},"At step , one or more applications in the Windows-based machine, such as the application  described above, for example, may access information and\/or operations of the GATT-enabled devices through the WPD devices and the WPD drivers. For example, an application may be utilized to manage the battery level in more than one Bluetooth low energy device. Such application may access attribute information from the various WPD devices that represent the Bluetooth low energy devices in order to determine the current battery level in each of those devices.","In accordance with an embodiment of the invention, a central device, such as the Windows-based machine , for example, may execute a WPD driver to enable one or more applications on the central device to interface with a peripheral device. The peripheral device may be one of the devices , , and , and the Bluetooth low energy device , for example. The WPD driver may be substantially the same or similar to the driver  described above with respect to . Moreover, the peripheral device may be communicatively coupled to the central device and may utilize GATT to interface with the WPD driver. Once the WPD driver is being executed, information associated with the peripheral device may be accessed through the WPD driver. The accessed information may comprise one or more services and\/or one or more characteristics associated with the peripheral device. The characteristics may comprise one or more values and\/or one or more descriptors, for example.","A WPD device that represents the peripheral device may be generated in the central device. The WPD device may comprise one or more objects that may be referred to as WPD objects. The central device may map, through the WPD driver, the properties (e.g., attributes) of the WPD objects to one or more services and\/or one or more characteristics associated with the peripheral device. With such mapping, the application may access the WPD device to interact with the peripheral device.","The central device may be operable to control, through the WPD driver, one or more functions of the peripheral device. The central device may be operable to enumerate one or more services and\/or one or more characteristics associated with the peripheral device. The central device may be operable to transmit, through the WPD driver, a registration to the peripheral device to notify the central device when one or more characteristics associated with the peripheral device have changed. The central device may also be operable to receive, through the WPD driver, an indication from the peripheral device that one or more characteristics associated with the peripheral device have changed. The central device may be operable to modify, through the WPD driver, one or more characteristics associated with the peripheral device. Communication between the central device and the peripheral device may occur through a Bluetooth host stack in the central device and a Bluetooth host stack in the peripheral device, both of which utilize ATT and GATT.","Another embodiment of the invention may provide a non-transitory machine and\/or computer readable storage and\/or medium, having stored thereon, a machine code and\/or a computer program having at least one code section executable by a machine and\/or a computer, thereby causing the machine and\/or computer to perform the steps as described herein for a WPD interface for Bluetooth low energy devices.","Accordingly, the present invention may be realized in hardware, software, or a combination of hardware and software. The present invention may be realized in a centralized fashion in at least one computer system or in a distributed fashion where different elements may be spread across several interconnected computer systems. Any kind of computer system or other apparatus adapted for carrying out the methods described herein is suited. A typical combination of hardware and software may be a general-purpose computer system with a computer program that, when being loaded and executed, controls the computer system such that it carries out the methods described herein.","The present invention may also be embedded in a computer program product, which comprises all the features enabling the implementation of the methods described herein, and which when loaded in a computer system is able to carry out these methods. Computer program in the present context means any expression, in any language, code or notation, of a set of instructions intended to cause a system having an information processing capability to perform a particular function either directly or after either or both of the following: a) conversion to another language, code or notation; b) reproduction in a different material form.","While the present invention has been described with reference to certain embodiments, it will be understood by those skilled in the art that various changes may be made and equivalents may be substituted without departing from the scope of the present invention. In addition, many modifications may be made to adapt a particular situation or material to the teachings of the present invention without departing from its scope. Therefore, it is intended that the present invention not be limited to the particular embodiment disclosed, but that the present invention will include all embodiments falling within the scope of the appended claims."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF SEVERAL VIEWS OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0008","num":"0007"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIGS. 2A and 2B"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 5"}]},"DETDESC":[{},{}]}
