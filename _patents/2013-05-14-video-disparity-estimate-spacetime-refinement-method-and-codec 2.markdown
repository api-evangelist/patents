---
title: Video disparity estimate space-time refinement method and codec
abstract: A method for disparity estimation of stereo video data receives a sequence of frames of stereo video data. Image-based disparity estimation is initially conducted on a frame-by-frame basis to produce initial disparity estimates. A plurality of initial disparity estimates is grouped into a space-time volume. Disparity error is reduced in the space-time volume to refine the initial disparity estimates.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09659372&OS=09659372&RS=09659372
owner: The Regents of the University of California
number: 09659372
owner_city: Oakland
owner_country: US
publication_date: 20130514
---

{"@attributes":{"id":"description"},"GOVINT":[{},{}],"heading":["STATEMENT OF GOVERNMENT INTEREST","FIELD","BACKGROUND","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS"],"p":["This invention was made with government support under grant no. CCF-1065305 awarded by the National Science Foundation. The government has certain rights in the invention.","A field of the invention is video encoding and decoding. Example applications of the invention include the encoding, storage, transmission, decoding and stereo video data, including 3D video processing.","Disparity estimation is a necessary component in stereo video processing and 3D video processing. Video disparity is used for 3D video processing. In a two-camera imaging system, disparity is defined as the vector difference between the imaged object points in each image relative to the focal point. It is this disparity that allows for depth estimation of objects in the scene via triangulation of the point in each image. In rectified stereo, where both camera images are in the same plane, only horizontal disparity exists. In this case, multiview geometry shows that disparity is inversely proportional to actual depth in the scene.","Estimating disparity has been extensively studied for images. The existing image-based methods are ill-suited to video disparity estimation on a frame-by-frame basis because temporal consistency is not guaranteed. Using these methods for video disparity estimation often leads to poor spatial and temporal consistency. Temporal consistency is the smoothness of the disparity in time. If a video disparity is temporally consistent, then an observer will see flickering artifacts. Temporally inconsistent disparity degrades the performance of view synthesis and 3D video coding.","Existing disparity estimation methods are also tuned for specific datasets such as Middlebury stereo database. See, D. Scharstein and R. Szeliski, \u201cA Taxonomy and Evaluation of Dense Two-Frame Stereo Correspondence Algorithms\u201d International Journal of Computer Vision, vol 47, pp. 7-42 (April 2002). Such methods tend to perform poorly when applied to real video sequences. Many common real video sequences have lighting conditions, color distributions and object shapes that can be very different from the images on Middlebury stereo database. For methods that require training, applying such methods to real videos is almost impossible and at least is highly impractical from a perspective of speed of execution and complexity of computation.","Existing image-based disparity estimation techniques may be categorized into one of two groups: local or global methods. Local methods treat each pixel (or an aggregated region of pixels) in the reference image independently and seek to infer the optimal horizontal displacement to match it with the corresponding pixel\/region. Global methods incorporate assumptions about depth discontinuities and estimate disparity values by minimizing an energy function over all pixels using techniques such as Graph Cuts or Hierarchical Belief Propagation. Y. Boykov et al, \u201cFast Approximate Energy Minimization via Graph Cuts,\u201d IEEE Transactions on Pattern Analysis and Machine Intelligence, vol. 23, no. 11, pp. 1222-1239 (February 2004); V. Kolmogorov and R. Zabih, \u201cComputing Visual Correspondence with Occlusions via Graph Cuts,\u201d International Conference on Computer Vision Proceedings, pp. 508-515 (2001). Local methods tend to be very fast but global methods tend to be more accurate. Most implementations of global methods tend to be unacceptably slow. See, D. Scharstein and R. Szeliski, \u201cA Taxonomy and Evaluation of Dense Two-Frame Stereo Correspondence Algorithms,\u201d International Journal of Computer Vision, vol. 47, pp. 7-42 (April 2002).","Attempts to solve stereo-matching problems for video have had limited success. Difficulties encountered have included the computational bottleneck of dealing with multidimensional data, lack of any real datasets with ground-truth, and the unclear relationship between optimal spatial and temporal processing for correspondence matching. Most have attempted to extend existing image-methods to video and have produced computational burdens that are impractical for most applications.","One attempt to extend the Hierarchical Belief Propagation method to video extends the matching cost representation to video by a 3-dimensional Markov Random Field (MRF). O. Williams, M. Isard, and J. MacCormick, \u201cEstimating Disparity and Occlusions in Stereo Video Sequences,\u201d in Computer Vision and Pattern Recognition Proceedings (2005). Reported algorithmic run times were as high as 947.5 seconds for a single 320\u00d7240 frame on a powerful computer, which is highly impractical.","Other approaches have used motion flow fields to attempt to enforce temporal coherence. One motion flow field technique makes use of a motion vector field. F. Huguet and F. Devernay, \u201cA Variational Method for Scene Flow Estimation from Stereo Sequences,\u201d in International Conference on Computer Vision Proceedings pp. 1-7 (2007). Another makes use of See, M. Bleyer and M. Gelautz, \u201cTemporally Consistent Disparity Maps from Uncalibrated Stereo Videos,\u201d in Proceedings of the 6International Symposium on Image and Signal Processing (2009).","One computationally practical method is a graphics processing unit (GPU) implementation of Hierarchical Belief Propagation that relies upon locally adaptive support weights. See, C. Richardt et al, \u201cRealtime Spatiotemporal Stereo Matching Using the Dual-Cross-Bilateral Grid,\u201d in European Conference on Computer Vision Proceedings (2010); K. J. Yoon and I. S. Kweon, \u201cLocally Adaptive Support-Weight Approach for Visual Correspondence Search,\u201d in Computer Vision and Pattern Recognition Proceedings (2005). This method integrates temporal coherence in a similar way to Williams et al. (O. Williams, M. Isard, and J. MacCormick, \u201cEstimating Disparity and Occlusions in Stereo Video Sequences,\u201d in Computer Vision and Pattern Recognition Proceedings (2005)) and also provides a synthetic dataset with ground-truth disparity maps. Other methods that are practical require specific hardware or place data constraints. See, J. Zhu et al, \u201cFusion of Time-of-Flight Depth and Stereo for High Accuracy Depth Maps,\u201d in Computer Vision and Pattern Recognition Proceedings (2008) pp. 1-8; G. Zhang, J. Jia, T. T. Wong, and H. Bao, \u201cConsistent Depth Maps Recovery from a Video Sequence,\u201d PAMI, vol. 31, no. 6, pp. 974-988 (2009).","An embodiment of the invention is a method for disparity estimation of stereo video data receives a sequence of frames of stereo video data. Image-based disparity estimation is initially conducted on a frame-by-frame basis to produce initial disparity estimates. A plurality of initial disparity estimates is grouped into a space-time volume. Disparity error is reduced in the space-time volume to refine the initial disparity estimates.","An embodiment of the invention is a method that can provide disparity estimation in real time. Left and right stereo views are received from a stereo sensor system or other stereo video source. The method conducts an initial image-based disparity estimation followed by a refinement to reduce error in the initial disparity estimation in a space-time volume. The spatio-temporal refinement of the invention can be used with any existing image disparity estimation technique. The method can be implemented as a post-processing step to refine noisy estimates or can be extended to videos. Testing shows superior speed, accuracy, and consistency compared to state-of-the-art algorithms. Testing shows resilience to high levels of noise.","Preferred methods of the invention leverage the strength of current state-of-the-art image-based techniques, but also explicitly enforce consistency of estimates in both space and time by treating the video as a space-time volume corrupted by noise. Methods of the invention have the capability of refining arbitrary image-based disparity estimation techniques and, at the same time, extending the utility of such techniques to the video domain.","A preferred embodiment codec of the invention can be implemented with standard graphics processors. A preferred method has be tested and demonstrated to be fast. The total variation minimization problem is non-differentiable, and so existing methods such as interior point methods are slow. Preferred methods of the invention apply a Douglas-Rachford splitting method to split the non-differentiable and differentiable parts of the minimization problem. Efficient techniques are applied to handle the non-differentiable and differentiable parts individually. Typical run time of the method on a 300\u00d7400 gray-scaled video is 2 seconds per frame on MATLAB\/Windows, using an Intel Qual Core 2.8 GHz, 4GB DDR3 RAM PC. Software and system optimization will readily improve this time. Porting the method to C++ and GPU is expected to provide a 10 times speed improvement compared to the MATLAB version. Speed can be improved also by providing some pre-processing to correct light balance and rectify stereo video input date.","Advantageously, methods of the invention can be used as a refinement, or a post-processing method, Therefore, under the present framework, ANY existing image-based disparity estimation algorithm can be used to generate initial disparity estimates. The present algorithm is tested to be able to reduce the error for all 99 top-ranking image-based disparity estimation algorithms in Middlebury. In addition, the present algorithm does not require significant parameter tuning from video to video. Even by using the default settings, the algorithm is able to generate reasonable results for a wide range of videos.","Preferred methods of the invention provide video disparity estimation that addresses many 3D related video processing problems. Preferred methods can provide multiview synthesis, which requires accurate disparity maps for high quality multiview synthesis.","Preferred methods of the invention can also provide 3D object detection. Identifying that an object in a scene is located in a particular depth layer with method of the invention permits disparity to be accurately estimated so that objects in the video can be extracted easily, including identifying partially occluded objects more accurately.","Preferred methods also improved accuracy and efficiency in existing multiview coding (MVC) methods that encode the two stereo videos independently. Methods of the invention provide an accurate disparity map that permits encoding of only one view, e.g., the left view, the disparity and the residue. On the decoder side, a view synthesis algorithm can then be used to reconstruct the right view. This clearly permits bit rate to be reduced significantly using this approach because coding a disparity requires a much lower bit rate than an image.","Preferred methods can for that reason and for additional reasons can also improved 3D video transmission. Wireless transmission process, packets will be lost due to distortion in the channel. Methods of the invention can be used to impair corrupted disparity in the receiver end, because a corrupted disparity is less spatio-temporally consistent.","Preferred methods of the invention can also be used to detect salient objects. Accurate disparity measurement can identify salient objects that are typically in the foreground. With accurate disparity estimates, locating salient objects is easier. Also, preferred methods can correct video blur, which consists of both motion blur and out-of-focus blur. With accurate disparity estimates, it is possible to infer the depth layer and handle out-of-focus blur more efficiently.","Preferred embodiments of the invention will now be discussed with respect to the drawings. The drawings may include schematic representations, which will be understood by artisans in view of the general knowledge in the art and the description that follows. Features may be exaggerated in the drawings for emphasis, and features may not be to scale.","A preferred method of the invention will be discussed with respect to . The method can be implemented, for example, via computer code stored on a non-transient medium. It can be implemented in hardware or firmware, and as a codec, in various video capture and processing devices. Example devices include augmented reality systems, human computer interaction devices, and gaming or entertaining devices such as Microsoft Kinect. In the method of FIG. a stereo video (left sequence  and right sequence ) is input to an image-based disparity estimation algorithm . Subsequent steps in the method are independent of the image-based disparity estimation , so the image-based disparity estimation can be any existing or yet to be developed image based disparity estimation method. The only requirement is that the image-based disparity estimation generates an initial disparity on a frame-by-frame basis.","In a preferred embodiment, a Hierarchical Belief Propagation (HBP) method is used for image-based disparity estimation . This rivals local methods in computational time while being more accurate. Let P be the set of pixels in an image and \u00a3 be a finite set of labels. The labels correspond to quantities that we want to estimate at each pixel (i.e., the disparity). A labeling \u0192 assigns a label \u0192\u03b5\u00a3 to each pixel p \u03b5P. As with traditional global methods, an energy function is designated for each pixel. The energy function indicates how well that label fits:",{"@attributes":{"id":"p-0026","num":"0025"},"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"mi":"E","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"f"}},{"mrow":[{"munder":{"mo":"\u2211","mrow":{"mi":["p","P"],"mo":"\u2208"}},"mo":"\u2062","mrow":{"msub":{"mi":["D","p"]},"mo":"\u2061","mrow":{"mo":["(",")"],"msub":{"mi":["f","p"]}}}},{"munder":{"mo":"\u2211","mrow":{"mrow":{"mo":["(",")"],"mrow":{"mi":["p","q"],"mo":","}},"mo":"\u2208","mi":"N"}},"mo":"\u2062","mrow":{"mi":"V","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"msub":[{"mi":["f","p"]},{"mi":["f","q"]}],"mo":"-"}}}}],"mo":"+"}],"mo":"="}},{"mrow":{"mo":["(",")"],"mn":"1"}}]}}}}},"D(\u0192) is the data cost and (\u0192\u2212\u0192) is generally known in the art as the smoothness cost, however a more accurate characterization would be the discontinuity cost. Intuitively, the data cost captures how well the labeling fits the node (how well the disparity estimate matches the stereo information). The discontinuity cost enforces the assumption that labels should vary slowly almost everywhere except for drastic changes along object boundaries. Neighboring pixels in neighborhood N are penalized according to how large the difference is between their labels.","In a preferred embodiment of the invention, the data cost is computed over a large window for each pixel using Yoon and Kweon's locally adaptive support weights, so that only points with a high probability of belonging to the same object contribute significantly to the cost calculation. Yoon et al, \u201cLocally Adaptive Support-Weight Approach for Visual Correspondence Search,\u201d in Computer Vision and Pattern Recognition (2005). The window, typically in the range of 8\u00d78 to 64\u00d764 is set to balance computational demands and capture appropriate information around a pixel being evaluated. The larger the window used, the more information captured from the pixels surrounding the central pixel being evaluated. At some point, however, increasing the window size does not add more power of discernment to the problem. For the discontinuity cost, a preferred method of the invention uses known truncated weighted linear:\n\n(\u0192\u2212\u0192)=min(\u03b1|\u0192\u2212\u0192|,\u03b2)\u2003\u2003(2)\n\n","To this point, disparity maps have been computed individually in a frame-by-frame basis. Disparity error is then reduced in a space-time volume . In the preferred embodiment, a space-time minimization  is applied to refine the image-based disparity estimation. This minimization  is based upon the recognition by the present inventors that disparity maps should generally be a piecewise smooth function in time, except for discontinuities at object borders (in which case the value will drastically change). This is valid for actual video because objects do not simply disappear from one frame to the next. However, this smoothness assumption is normally violated in most initial disparity maps that characterize video, as there are inevitable estimation errors.","In the space-time minimization , the initial disparity estimates are grouped to form a three-dimensional data, creating a space-time volume. The space-time volume includes a sequence of frames. The number of frames depends on the capacity of the computer memory available. More frames are generally better for the refinement. As an example, with 4GB RAM and frames sized at 300\u00d7400 pixels, 20 frames can be used. The space-time volume consists of three coordinates: (x,y) in space, and t in time. The problem can be defined as the minimization of two terms:",{"@attributes":{"id":"p-0031","num":"0031"},"maths":{"@attributes":{"id":"MATH-US-00002","num":"00002"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"munderover":{"mi":["min","f"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}},"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mi":"\u03bc"},{"mi":["f","g"],"mo":"-"},{"mo":"+","mrow":{"mo":["||","\u2062"],"mi":"Df","msub":{"mo":"||","mn":"2"}}}],"mo":["||","\u2062","\u2062"],"msub":{"mo":"||","mn":"1"}}},{"mrow":{"mo":["(",")"],"mn":"3"}}]}}}}},"The term \u2225f\u2212g\u2225is a measurement of the residue between the optimization variable f and the input data g. The measurement can be accomplished using the vector one-norm, which is the absolute sum of the entries of a vector. The optimization variable refers to the quantity being changed in solving (3), which is f.","Since g is typically noisy, minimizing the residue \u2225f\u2212g\u2225is equivalent to finding a best fitting data f that preserve as much information in g as possible, while at the same time eliminate outliers in g. The second term \u2225Df\u2225is the total variation regularization. It is used to regularize the solution f so that f is spatially and temporally smooth, while edges are preserved. Unlike conventional total variation, the total variation presented in the present method is implemented for a space-time volume. Specifically, the operator D consists of three forward-difference operators D, D, and D. With scaling parameters (\u03b2, \u03b2, \u03b2), the total variation norm of f is",{"@attributes":{"id":"p-0034","num":"0034"},"maths":{"@attributes":{"id":"MATH-US-00003","num":"00003"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"mo":["||","\u2062"],"mi":"f","msub":{"mo":"||","mi":"TV"}},{"mrow":[{"mo":["||","\u2062","\u2062","||","\u2062"],"mi":["Df","Df"],"msub":[{"mo":"||","mn":"2"},{"mo":"||","mn":"2"}],"mstyle":{"mtext":{}}},{"munder":{"mo":"\u2211","mi":"i"},"mo":"\u2062","mrow":{"msqrt":{"mrow":{"msubsup":[{"mi":["\u03b2","x"],"mn":"2"},{"mo":"|","mi":"i","mn":"2"},{"mo":"|","mi":"i","mn":"2"},{"mo":"|","mi":"i","mn":"2"}],"mo":["|","\u2062","\u2062","|","\u2062","\u2062","|","\u2062"],"mrow":[{"msub":{"mi":["D","x"]},"mo":"\u2062","mi":"f"},{"mo":"+","msubsup":{"mi":["\u03b2","y"],"mn":"2"}},{"msub":{"mi":["D","y"]},"mo":"\u2062","mi":"f"},{"mo":"+","msubsup":{"mi":["\u03b2","t"],"mn":"2"}},{"msub":{"mi":["D","y"]},"mo":"\u2062","mi":"f"}]}},"mo":"."}}],"mo":["\u2062","\u2062"],"mover":{"mo":"=","mi":"def"}}],"mo":"="}}},"br":{},"sub":["x","y","t","x","y","t","2 "]},{"@attributes":{"id":"p-0035","num":"0035"},"maths":{"@attributes":{"id":"MATH-US-00004","num":"00004"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"mrow":[{"munder":{"mi":"minimize","mrow":{"mi":["f","u","r"],"mo":[",",","]}},"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mi":"\u03bc"},{"mo":"+","mrow":{"mo":["||","\u2062","\u2062","\u2062"],"mi":"u","msub":{"mo":"||","mn":"1"},"mstyle":{"mtext":{}},"mrow":{"mi":["subject","to","r"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}]}}}],"mo":["||","\u2062","\u2062"],"mi":"r","msub":{"mo":"||","mn":"1"}},{"mrow":[{"mi":"f","mo":"-","mrow":{"mi":["g","and","u"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}]}},{"mi":"Df","mo":"."}],"mo":"="}],"mo":"="}}}},"This constrained minimization problem can be solved determining the saddle point of the augmented Lagrangian function, defined as",{"@attributes":{"id":"p-0037","num":"0037"},"maths":{"@attributes":{"id":"MATH-US-00005","num":"00005"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"mi":"L","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["f","u","r","y","z"],"mo":[",",",",",",","]}}},{"mi":["\u03bc","r"],"mo":["||","\u2062","\u2062"],"msub":{"mo":"||","mn":"1"},"mrow":{"mo":"+","mrow":{"mo":["||","\u2062","\u2062","||","\u2062","\u2062","||","\u2062"],"mi":"\u03bc","msub":{"mo":"||","mn":"1"},"mrow":[{"mrow":{"mo":"-","mrow":{"msup":{"mi":["z","T"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["r","f","g"],"mo":["-","+"]}}}},"mo":"+","mfrac":{"msub":{"mi":["\u03c1","o"]},"mn":"2"}},{"mi":["r","f","g"],"mo":["-","+"]},{"mrow":{"mo":"-","mrow":{"msup":{"mi":["y","T"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["u","Df"],"mo":"-"}}}},"mo":"+","mfrac":{"msub":{"mi":["\u03c1","r"]},"mn":"2"}},{"mi":["u","Df"],"mo":"-"}],"msubsup":[{"mo":"||","mn":["2","2"]},{"mo":"||","mn":["2","2"]}]}}}],"mo":"="}}}},"The augmented Lagrangian consists of five parts. The first part \u03bc\u2225r\u2225+\u2225u\u2225is the objective; the second part \u2212z(r\u2212\u0192+g) is the Lagrange multiplier for the equality constraint r=f\u2212g; the third part",{"@attributes":{"id":"p-0039","num":"0039"},"maths":{"@attributes":{"id":"MATH-US-00006","num":"00006"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mfrac":{"msub":{"mi":["\u03c1","o"]},"mn":"2"},"mo":["||","\u2062"],"mrow":{"mi":["r","f","g"],"mo":["-","+"]},"msubsup":{"mo":"||","mn":["2","2"]}}}},"br":{},"sub":"o ","sup":"T "},{"@attributes":{"id":"p-0040","num":"0040"},"maths":{"@attributes":{"id":"MATH-US-00007","num":"00007"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mfrac":{"msub":{"mi":["\u03c1","r"]},"mn":"2"},"mo":["||","\u2062"],"mrow":{"mi":["u","Df"],"mo":"-"},"msubsup":{"mo":"||","mn":["2","2"]}}}},"br":{},"sub":"r "},"The saddle point of the augmented Lagrangian function can be determined by solving a sequence of subproblems iteratively. Given the initial values \u0192=g, u=D\u0192, y=0, r=\u0192\u2212g, z=0, the iterative method solves",{"@attributes":{"id":"p-0042","num":"0042"},"maths":[{"@attributes":{"id":"MATH-US-00008","num":"00008"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msup":{"mi":"f","mrow":{"mo":["(",")"],"mrow":{"mi":"k","mo":"+","mn":"1"}}},"mo":"=","mrow":{"msup":{"mi":"F","mrow":{"mo":"-","mn":"1"}},"mo":"\u2062","mrow":{"mo":["{","}"],"mfrac":{"mrow":[{"mi":"F","mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mrow":[{"msub":{"mi":["\u03c1","o"]},"mo":"\u2062","mi":"g"},{"msub":{"mi":["\u03c1","o"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"msup":[{"mi":"r","mrow":{"mo":["(",")"],"mi":"k"}},{"mi":"z","mrow":{"mo":["(",")"],"mi":"k"}}],"mo":"-"}}},{"msup":{"mi":["D","T"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mrow":{"msub":{"mi":["\u03c1","r"]},"mo":"\u2062","msup":{"mi":"u","mrow":{"mo":["(",")"],"mi":"k"}}},"mo":"-","msup":{"mi":"y","mrow":{"mo":["(",")"],"mi":"k"}}}}}],"mo":["+","+"]}}},{"msub":{"mi":["\u03c1","o"]},"mo":"+","mrow":{"msub":{"mi":["\u03c1","r"]},"mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mo":["|","\u2062","\u2062"],"mrow":[{"mi":"F","mo":"\u2061","mrow":{"mo":["[","]"],"msub":{"mi":["D","x"]}}},{"mo":"+","mrow":{"mo":["|","\u2062","\u2062"],"mrow":[{"mi":"F","mo":"\u2061","mrow":{"mo":["[","]"],"msub":{"mi":["D","y"]}}},{"mo":"+","mrow":{"mo":["|","\u2062"],"mrow":{"mi":"F","mo":"\u2061","mrow":{"mo":["[","]"],"msub":{"mi":["D","t"]}}},"msup":{"mo":"|","mn":"2"}}}],"msup":{"mo":"|","mn":"2"}}}],"msup":{"mo":"|","mn":"2"}}}}}]}}}}}},{"@attributes":{"id":"MATH-US-00008-2","num":"00008.2"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msup":{"mi":"v","mrow":{"mo":["(",")"],"mrow":{"mi":"k","mo":"+","mn":"1"}}},"mo":"=","mrow":{"mrow":{"mi":"\u03b2","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"msup":{"mi":"Df","mrow":{"mo":["(",")"],"mrow":{"mi":"k","mo":"+","mn":"1"}}}},"mo":"+","mfrac":{"msup":{"mi":"y","mrow":{"mo":["(",")"],"mi":"k"}},"msub":{"mi":["\u03c1","r"]}}}}}},{"@attributes":{"id":"MATH-US-00008-3","num":"00008.3"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msup":{"mi":"u","mrow":{"mo":["(",")"],"mrow":{"mi":"k","mo":"+","mn":"1"}}},"mo":"=","mrow":{"mi":"max","mo":["\u2062","\u2062"],"mrow":[{"mo":["{","}"],"mrow":{"mrow":{"mo":["|","|"],"msup":{"mi":"v","mrow":{"mo":["(",")"],"mrow":{"mi":"k","mo":"+","mn":"1"}}},"mrow":{"mo":"-","mfrac":{"mn":"1","msub":{"mi":["\u03c1","r"]}}}},"mo":",","mn":"0"}},{"mi":"sign","mo":"\u2061","mrow":{"mo":["(",")"],"msup":{"mi":"v","mrow":{"mo":["(",")"],"mrow":{"mi":"k","mo":"+","mn":"1"}}}}}]}}}},{"@attributes":{"id":"MATH-US-00008-4","num":"00008.4"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msup":{"mi":"r","mrow":{"mo":["(",")"],"mrow":{"mi":"k","mo":"+","mn":"1"}}},"mo":"=","mrow":{"mi":"max","mo":["\u2062","\u2062"],"mrow":[{"mo":["{","}"],"mrow":{"mrow":{"mo":["|","|"],"mrow":[{"msup":{"mi":"f","mrow":{"mo":["(",")"],"mrow":{"mi":"k","mo":"+","mn":"1"}}},"mo":["-","+"],"mi":"g","mfrac":{"msup":{"mi":"z","mrow":{"mo":["(",")"],"mi":"k"}},"msub":{"mi":["\u03c1","o"]}}},{"mo":"-","mfrac":{"mi":"\u03bc","msub":{"mi":"\u03c1","mn":"0"}}}]},"mo":",","mn":"0"}},{"mi":"sign","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"msup":{"mi":"f","mrow":{"mo":["(",")"],"mrow":{"mi":"k","mo":"+","mn":"1"}}},"mo":["-","+"],"mi":"g","mfrac":{"msup":{"mi":"z","mrow":{"mo":["(",")"],"mi":"k"}},"msub":{"mi":["\u03c1","o"]}}}}}]}}}},{"@attributes":{"id":"MATH-US-00008-5","num":"00008.5"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msup":{"mi":"y","mrow":{"mo":["(",")"],"mrow":{"mi":"k","mo":"+","mn":"1"}}},"mo":"=","mrow":{"msup":{"mi":"y","mrow":{"mo":["(",")"],"mi":"k"}},"mo":"-","mrow":{"msub":{"mi":["\u03c1","r"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"msup":[{"mi":"u","mrow":{"mo":["(",")"],"mrow":{"mi":"k","mo":"+","mn":"1"}}},{"mi":"Df","mrow":{"mo":["(",")"],"mrow":{"mi":"k","mo":"+","mn":"1"}}}],"mo":"-"}}}}}}},{"@attributes":{"id":"MATH-US-00008-6","num":"00008.6"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msup":{"mi":"z","mrow":{"mo":["(",")"],"mrow":{"mi":"k","mo":"+","mn":"1"}}},"mo":"=","mrow":{"msup":{"mi":"z","mrow":{"mo":["(",")"],"mi":"k"}},"mo":"-","mrow":{"msub":{"mi":["\u03c1","o"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"msup":[{"mi":"r","mrow":{"mo":["(",")"],"mrow":{"mi":"k","mo":"+","mn":"1"}}},{"mi":"f","mrow":{"mo":["(",")"],"mrow":{"mi":"k","mo":"+","mn":"1"}}}],"mo":["-","+"],"mi":"g"}}}}}}}]},"The complexity of the present method is in the order of nlogn, where n is the number of variables in the space-time volume. This number is the number of operations required for a three-dimensional Fourier Transform for calculating \u0192. Other operations in the present algorithm are inexpensive, compared to the Fourier Transform For example, in calculating u, only the elementwise maximum operator and the sign operator are needed.","A specific solution to Eq. (3) can be considered as follows, with the particular image-based disparity map initial step described above. Devine f as the unknown disparity map (vectorized version of \u0192(x,y,t)), and g is the disparity map from the image-based disparity method. D=|\u03b2D, \u03b2D,\u03b2D|represents the forward difference operators along the horizontal, vertical and temporal directions. The parameters (\u03b2, \u03b2, \u03b2) control relative emphasis being put on the spatial and temporal terms. Generally, if the video has a lot of temporal noise then \u03b2should be larger than \u03b2and \u03b2. On the other hand, if the video has little temporal noise, then \u03b2should be small because excessive amount of \u03b2would oversmooth the resultant video. Inadequate \u03b2would not denoise the video. As starting point that can be adjusted, \u03b2and \u03b2are typically fixed as 1, and for heavily noised video, \u03b2=10 is an appropriate defauly stting.","An l-norm is chosen for the objective function, \u0192\u2212g because the target solution \u0192 is ideally piecewise smooth. The regulization term \u2225Df\u2225is the total variation-norm on \u0192 (\u2225f\u2225_TV). Eq. (3) can then be solved as described above with the intermediate variables r=\u0192\u2212g and =D\u0192, continuing to transform the unconstrained problem into an equivalent constrained minimization problem. Then an augmented Lagrangian method is used to handle the constraints, and an alternating direction method (ADM) can be used to solve the sub-problems iteratively. Details for this technique can be found in S. H. Chan, et al., \u201cAn Augmented Lagrangian Method for Total Variation Video Restoration,\u201d in IEEE International Conference on Acoustics, Speech, and Signal Processing, (May 2011).","Artisans will appreciate that the invention provides disparity maps as a space-time volume, instead of individual frames. This enables methods of the invention to simultaneously handle both spatial and temporal consistency, by tuning the parameters (\u03b2,\u03b2, \u03b2). Also, unlike most existing methods that try to enhance temporal consistency by heuristic means, the present method is guaranteed to find the global minimum of Eq. (3) because it is convex, Methods of the invention have also been demonstrated to operate quickly. Typical run time for a 300\u00d7400 resolution sequence is approximately 2 seconds per frame on MATLAB\/Windows, which implies the real-time processing capability with a compiled language.","Qualitative results on video sequences showed that a preferred method of the invention with the IMP image-based pre-processing reduced spatial noise and temporal inconsistencies. The method was also tested on synthetic video sequences, and qualitative measurements shows good performance compared to state of the art techniques. The method is HBP-TV in the table below:",{"@attributes":{"id":"p-0048","num":"0048"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":"TABLE 1"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Comparison of methods with noise ~N (0.20). Average percent of "},{"entry":"bad pixels (threshold of 1) for all frames."}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"6"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"42pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"4","colwidth":"42pt","align":"center"}},{"@attributes":{"colname":"5","colwidth":"35pt","align":"center"}},{"@attributes":{"colname":"6","colwidth":"28pt","align":"center"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Technique","Book","Street","Tanks","Template","Tunnel"]},{"entry":{"@attributes":{"namest":"1","nameend":"6","align":"center","rowsep":"1"}}}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"6"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"42pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"28pt","align":"char","char":"."}},{"@attributes":{"colname":"4","colwidth":"42pt","align":"char","char":"."}},{"@attributes":{"colname":"5","colwidth":"35pt","align":"char","char":"."}},{"@attributes":{"colname":"6","colwidth":"28pt","align":"char","char":"."}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["HBP-TV","26.97","17.69","26.50","18.01","29.50"]},{"entry":["TDCB","38.95","24.17","29.34","29.89","33.01"]},{"entry":["DCB","47.24","30.91","33.56","37.59","24.04"]},{"entry":["DCB2","53.92","38.02","45.67","40.97","31.19"]},{"entry":{"@attributes":{"namest":"1","nameend":"6","align":"center","rowsep":"1"}}}]}}]}}},"The present method is compared to different methods in Richardt et al., on the same synthetic video sequences used in C. Richardt et al, \u201cRealtime Spatiotemporal Stereo Matching Using the Dual-Cross-Bilateral Grid,\u201d in European Conference on. Computer Vision Proceedings (2010). Improved results were also shown over a wide range of noise levels, with the present method in most all instances producing better results.","The method of the invention was also tested with different initial image-based disparity methods. The post-processing of the invention improves performance as indicated in Table 2 (where the pre-processing of C. Richardt et al were used):",{"@attributes":{"id":"p-0051","num":"0051"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":"TABLE 2"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Versatility of TV for the various disparity methods. Average "},{"entry":"percent of bad pixels (threshold of 1) for all frames."}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"6"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"42pt","align":"center"}},{"@attributes":{"colname":"4","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"5","colwidth":"42pt","align":"center"}},{"@attributes":{"colname":"6","colwidth":"28pt","align":"center"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Technique","Book","Street","Tanks","Temple","Tunnel"]},{"entry":{"@attributes":{"namest":"1","nameend":"6","align":"center","rowsep":"1"}}}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"6"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"28pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"42pt","align":"char","char":"."}},{"@attributes":{"colname":"4","colwidth":"28pt","align":"char","char":"."}},{"@attributes":{"colname":"5","colwidth":"42pt","align":"char","char":"."}},{"@attributes":{"colname":"6","colwidth":"28pt","align":"char","char":"."}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["TDCB-TV","27.10","17.45","23.25","21.94","32.21"]},{"entry":["TDCB","38.95","24.17","29.34","29.89","33.01"]},{"entry":["DCB-TV","35.31","22.45","23.00","27.38","22.41"]},{"entry":["DCB","47.24","30.91","33.56","37.59","24.04"]},{"entry":["DCB2-TV","48.66","31.91","41.28","32.14","30.43"]},{"entry":["DCB2","53.92","38.02","45.67","40.97","31.19"]},{"entry":{"@attributes":{"namest":"1","nameend":"6","align":"center","rowsep":"1"}}}]}}]}}},"While specific embodiments of the present invention have been shown and described, it should be understood that other modifications, substitutions and alternatives are apparent to one of ordinary skill in the art. Such modifications, substitutions and alternatives can be made without departing from the spirit and scope of the invention, which should be determined from the appended claims.","Various features of the invention are set forth in the appended claims."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWING","p":{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 1"}},"DETDESC":[{},{}]}
