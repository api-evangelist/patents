---
title: Router and a virtual trusted runtime BIOS
abstract: An implementation may include a virtual trusted runtime BIOS managed by the virtual machine monitor. A replacement portion of the virtual trusted runtime BIOS may be included. A router can replace an address to a resource of the virtual trusted runtime BIOS with the address to the resource of the replacement portion of the virtual trusted runtime BIOS.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09542197&OS=09542197&RS=09542197
owner: Hewlett-Packard Development Company, L.P.
number: 09542197
owner_city: Houston
owner_country: US
publication_date: 20111019
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATION","BACKGROUND","DETAILED DESCRIPTION"],"p":["This application is a national stage application under 35 U.S.C \u00a7371 of PCT\/US2011\/056932, filed Oct. 19, 2011, which is a continuation of PCT\/US2011\/054045, filed Sep. 29, 2011, and which is a continuation of PCT\/US2011\/049677, filed Aug. 30, 2011.","An electronic device, such as a computer or other type of device, can include a Basic Input\/Output System (BIOS) that is responsible for starting up the electronic device. During startup, the BIOS initializes and configures components of the electronic device, and loads an operating system in the electronic device. In addition, the BIOS can also provide other services, such as a power management service, a thermal management service, a BIOS update service, and so forth.","A Basic Input\/Output System (BIOS) is usually the first code executed by an electronic device when the electronic device starts. Examples of the electronic device include a computer (e.g. desktop computer, notebook computer, tablet computer, server computer, etc.), a handheld device (e.g. personal digital assistant, smart phone, etc.), an electronic appliance, a gaming console, or any other type of electronic device. The BIOS initializes and configures various hardware components of the electronic device, and loads and starts an operating system (OS) of the electronic device. Code for the BIOS is usually stored on a non-volatile memory, such as a flash memory device or other type of programmable read-only memory (ROM).","Although various example BIOS functions are listed above, it is noted that other or alternative BIOS functions can be used in other implementations.","In accordance with some implementations, for more robust system behavior, functions of the BIOS can be provided in a virtual trusted runtime BIOS of the electronic device which may be in the privileged domain, where the privileged domain is a domain of the electronic device that has certain predefined privilege(s) not available to other entities in the electronic device. A \u201cprivileged domain\u201d may refer to a domain that has predefined privilege(s) that allows an entity in the domain to perform functions in the electronic device that other entities (e.g. OS, application programs, etc.) are not allowed to perform. Also, a privileged domain also has a security mechanism to protect the privileged domain from unauthorized access or attack.","Communication with the virtual trusted runtime BIOS may be by a web based protocol. A physical BIOS cannot be replaced in real time because an operating system would not be able to continue operating without a BIOS while it was replaced. A virtual trusted runtime BIOS can be replaced at least in part by appropriately authorized replacement of a portion of the virtual runtime BIOS, and redirecting communications via the web based protocol to the replacement portion of the virtual trusted runtime BIOS.","Examples of a privileged domain include any or some combination of the following: domain , which is often the first domain started by a virtual machine monitor (also referred to as a hypervisor) to perform management tasks; a portion of the virtual machine monitor (or hypervisor); a guest virtual machine that has predefined settings to provide the guest virtual machine with enhanced privileges and\/or security; or another type of domain in the electronic device with a predefined special privilege and\/or security mechanism. The secure privileged domain can include the virtual trusted runtime BIOS which can include a virtual high-privilege mode for handling system management instructions securely without having to have a component on a peer level with the virtual machine monitor such as an system management mode transfer monitor to separate and secure a virtual high-privilege mode from the other domains.","A \u201cvirtual machine\u201d (also referred to as a \u201cvirtual appliance\u201d or \u201cvirtual partition\u201d) refers to some partition or segment of a physical machine (the electronic device) that is provided to virtualize or emulate a physical machine. From the prospective of a user or application, a virtual machine looks like a physical machine. A virtual machine includes an operating system (referred to as a guest operating system) and at least one application program.","A virtual machine monitor (VMM), also referred to as a hypervisor, manages the sharing, by the virtual machines, of the physical resources, including the hardware components, of the electronic device. The VMM virtualizes the physical resources. Each virtual machine has an associated virtualized physical resources managed by the VMM. The VMM processes requests for physical resources.","In one implementation, a computing system includes hardware and a virtual machine monitor. The virtual machine monitor can managed a virtual trusted runtime BIOS. The computing system can include a replacement portion of the virtual trusted runtime BIOS. A router can replace an address to a resource of the virtual trusted runtime BIOS with the address to the resource of the replacement portion of the virtual trusted runtime BIOS.","In another implementation, a method of replacing a portion of a virtual trusted runtime BIOS in a computing system includes a virtual trusted runtime BIOS that is managed by the virtual machine monitor and a replacement portion of the virtual trusted runtime BIOS managed by the virtual machine monitor. A router can replace a first address to a resource of the virtual trusted runtime BIOS with a second address to the resource of the replacement portion of the virtual trusted runtime BIOS.","With reference to the figures.  is a block diagram of a computing system according to an example implementation of replacing a portion of a virtual trusted runtime BIOS. A computing system  can include a processor . The processor  is part of the hardware  of the computing system . The processor  can be a general purpose processor or an application specific processor. As examples, the hardware  can also include: I\/O devices, volatile memory, secondary storage, flash memory, a network interface controller, a graphics adapter, and so forth. The system can include a virtual machine monitor  to manage the physical resources of the hardware components and virtualize the physical resources. The computing system includes a virtual basic input output system (vBIOS)  attached to a guest domain . The guest domain  is a virtual machine which may execute an operating system such as Microsoft Windows, Linux, Unix, or another operating system.","In some examples, the privileged domain  is domain , which is an administrative domain started by the VMM  upon system startup, and which has enhanced privileges and security mechanisms. Examples of tasks performed by domain  include creating and configuring guest domains. Each of domain  and guest domains is considered a corresponding virtual machine. The privileged domain  can be separate from the VMM . In alternative implementations, the privileged domain  can be part of the VMM . In such alternative implementations, the virtual trusted runtime BIOS function  is part of the VMM . The privileged domain  can be a trusted domain as it is generated or managed by the trusted VMM .","The provision of the BIOS function  in the privileged domain  implements a \u201cBIOS in a cloud,\u201d also referred to as \u201cvirtual trusted runtime BIOS \u201d or BIOS.v. The \u201ccloud\u201d can refer to the privileged domain  (or some other trusted domain). The cloud can be located either in the computing system  or external of the computing system . For example, the cloud containing a virtual trusted runtime BIOS  function can be accessible by the computing system  over a network. The network may be for example a local, wide or worldwide network.","In some implementations, the web-based interface provided by a web-based network communication function is part of a service requestor-service provider model that allows the requestor (e.g. a domain) to request a service (e.g. BIOS service) from a provider (e.g. server computer) over a network. As examples, the web-based interface can be a web services interface. A web service refers to a mechanism designed to support interoperable machine-to-machine which may be virtual machine to virtual machine interaction over a network. The web services interface can be according to a format described by a Web Services Description Language (WSDL), as defined by the World Wide Web Consortium (W3C). Alternatively, the web services interface can be according to a Simple Object Access Protocol (SOAP) (also defined by the W3C), which is a protocol for exchanging structured information in the implementation of web services over networks.","As yet another alternative, the web-based interface can be according to a Representational State Transfer (REST) architecture, which includes clients and servers, where clients can submit requests to servers, and servers can provide responses to clients. Requests and responses are built around the transfer of representations of resources. A resource can be any coherent and meaningful concept that may be addressed. A representation of a resource is typically a document that captures the current or intended state of a resource. In the REST architecture, a request submitted by a client (e.g. the electronic device) can be a Hypertext Transfer Protocol (HTTP) Get request, in some examples. The server (e.g. server computer) can provide an HTTP response to the HTTP Get request.","In the web-based interface, a resource (e.g. the internal BIOS function or external BIOS function) can be accessed by issuing a BIOS access request that contains an address of the requested resource. The address can be a web address, such as a Uniform Resource Locator (URL), an Internet Protocol (IP) address, Simple Mail Transfer Protocol (SMTP) such as an email address or some other address that can uniquely identify the requested resource.","To update a virtual trusted runtime BIOS  a replacement portion of the virtual trusted runtime BIOS  is generated. The replacement portion of the virtual trusted runtime BIOS  may be at a different address than the virtual trusted runtime BIOS . For example the virtual trusted runtime BIOS may have a requested resource at a first URL, IP address, or SMTP address and the replacement portion of the virtual trusted runtime BIOS may have the replacement requested resource at a second URL, IP address or SMTP address. The replacement portion of the virtual trusted runtime BIOS  may be located at in the domain of the virtual trusted runtime BIOS  such as the privileged domain  or a different location including another domain and a location remote from the computing system.","A router  can replace an address to a resource of the virtual trusted runtime BIOS with the address to the resource of the replacement portion of the virtual trusted runtime BIOS. The router  may be a physical component such as processor , may be a virtual component, may be a part of the VMM or may be another component.","The replacement portion of the virtual trusted runtime BIOS may be received from an external source such as a computing system manufacturer. The replacement portion of the virtual trusted runtime BIOS may be a setting, for example a fan control setting or algorithm to control the temperature of the system. Updating the virtual trusted runtime BIOS in real time settings may prevent rebooting a computing system to update the BIOS or any portion of the BIOS. For example if the fan control setting were updated using the virtual trusted runtime BIOS and a replacement portion of the virtual trusted runtime BIOS. The replacement portion of the virtual trusted runtime BIOS may include a replacement requested resource such as the fan control settings. To access the replacement requested resource a system may use the URL, IP address or SMTP address of the replacement portion of the virtual trusted runtime BIOS including the replacement requested resource.","To redirect a request for a resource, a component such as a VMM, may replace the URL, IP address or SMTP address of a communication. For example the VMM may include a table of addresses of the virtual trusted runtime BIOS and a corresponding address of the replacement portion of a virtual trusted runtime BIOS. If a request for a resource is send to an address of the virtual trusted runtime BIOS a component, such as the VMM, may redirect the request to an address of the virtual trusted runtime BIOS to an address of the replacement portion of the virtual trusted runtime BIOS.","In an alternative implementation a component may notify a domain that may request a resource, such as a guest domain, of a new address for a resource if a replacement portion of a virtual trusted runtime BIOS includes the replacement resource. Notifying the domain of the change of the address of a resource can redirect the request for the resource.","In response to the virtual trusted runtime BIOS access request containing the address that is received at the web-based interface, the web-based network communication function can direct the request to an appropriate one of the internal and external virtual trusted runtime BIOS functions. In some cases, the web-based network communication function can direct the request to both the internal and external virtual trusted runtime BIOS functions.",{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 2","b":["200","210","210","205","200","245","250","255","250","200","225","225","250","225","210","215","200","235","230","230"]},"In some examples, the privileged domain  is domain , an administrative domain started by the VMM  upon system startup, which has enhanced privileges and security mechanisms. Examples of tasks performed by domain  include creating and configuring guest domains. Each of domain  and guest domains is considered a corresponding virtual machine. The privileged domain  can be separate from the VMM . In alternative implementations, the privileged domain  can be part of the VMM . In such alternative implementations, the virtual trusted runtime BIOS  is part of the VMM .","In some implementations, BIOS in a cloud is based on the following VMM-based architecture: the physical BIOS knows and trusts the main runtime entity (VMM ) that the physical BIOS is booting, and the BIOS-trusted VMM has the ability to trap and turn off all I\/O requests (to access BIOS functionality) other than those coming from the privileged domain. In some implementations, a BIOS verification mechanism can be provided to authenticate the origin of the VMM that is to be booted by the computing system. Such verification mechanisms allow an administrator or other user to specify that only an authorized VMM can be booted in the computing system. The verification mechanism assures that the VMM image that is in the computing system has not been modified maliciously, and that the VMM can be trusted. The physical BIOS can visually verify the VMM image, and ensure that the VMM is booted with a known set of controlled operational settings that have previously been specified.","After verifying that an authorized VMM has been booted, the physical BIOS can then defer or omit execution of various security measures that the physical BIOS would normally perform to prevent corruption by unauthorized or malicious code. For example, the physical BIOS can choose to not lock BIOS flash registers and\/or portions of flash memory.","In implementations in which the virtual trusted runtime BIOS  is provided internally in a computing system . From the perspective of a guest virtual machine or other entity of the computing system that wants to access BIOS services, the cloud including the BIOS services can be located anywhere, including in a location that is external of the computing system.","In one implementation with a virtual trusted runtime BIOS, no other domain than privileged domain or another trusted domain will be able to communicate with BIOS. This can be because all communication from a guest domain to the BIOS are trapped and routed to the privileged domain portion for the appropriate filter to receive and process. The virtual high-privilege mode in the privilege domain can then process the request and can make direct or indirect calls to the flash or the BIOS. This call from the privileged domain to the BIOS which will then be allowed by the hypervisor to go through since Hypervisor can detect a call originating from the privileged domain rather than a guest domain.","To update a virtual trusted runtime BIOS  a replacement portion of the virtual trusted runtime BIOS  is generated. The replacement portion of the virtual trusted runtime BIOS  may be at a different address than the virtual trusted runtime BIOS . For example the virtual trusted runtime BIOS may have a requested resource at a first URL, IP address, or SMTP address and the replacement portion of the virtual trusted runtime BIOS may have the replacement requested resource at a second URL, IP address or SMTP address. The replacement portion of the virtual trusted runtime BIOS  may be located at in the domain of the virtual trusted runtime BIOS  such as the privileged domain  or a different location including another domain and a location remote from the computing system.","A router  can replace an address to a resource of the virtual trusted runtime BIOS with the address to the resource of the replacement portion of the virtual trusted runtime BIOS. The router  may be a physical component such as processor , may be a virtual component, may be a part of the VMM or may be another component.","The replacement portion of the virtual trusted runtime BIOS may be received from an external source such as a computing system manufacturer. The replacement portion of the virtual trusted runtime BIOS may be a setting, for example a fan control setting or algorithm to control the temperature of the system. Updating the virtual trusted runtime BIOS in real time settings may prevent rebooting a computing system to update the BIOS or any portion of the BIOS. For example if the fan control setting were updated using the virtual trusted runtime BIOS and a replacement portion of the virtual trusted runtime BIOS. The replacement portion of the virtual trusted runtime BIOS may include a replacement requested resource such as the fan control settings. To access the replacement requested resource a system may use the URL, IP address or SMTP address of the replacement portion of the virtual trusted runtime BIOS including the replacement requested resource.","To redirect a request for a resource, a component such as a VMM, may replace the URL, IP address or SMTP address of a communication. For example the VMM may include a table of addresses of the virtual trusted runtime BIOS and a corresponding address of the replacement portion of a virtual trusted runtime BIOS. If a request for a resource is send to an address of the virtual trusted runtime BIOS a component, such as the VMM, may redirect the request to an address of the virtual trusted runtime BIOS to an address of the replacement portion of the virtual trusted runtime BIOS.","In an alternative implementation a component may notify a domain that may request a resource, such as a guest domain, of a new address for a resource if a replacement portion of a virtual trusted runtime BIOS includes the replacement resource. Notifying the domain of the change of the address of a resource can redirect the request for the resource.","In response to the virtual trusted runtime BIOS access request containing the address that is received at the web-based interface, the web-based network communication function can direct the request to an appropriate one of the internal and external virtual trusted runtime BIOS functions. In some cases, the web-based network communication function can direct the request to both the internal and external virtual trusted runtime BIOS functions.","The replacement of a portion of the virtual trusted runtime BIOS should be secure to prevent the system from becoming vulnerable to attack due to the replacement of the portion of the virtual trusted runtime BIOS. An authorization module  which is shown in the VMM  but may be located in a domain or a virtual appliance for example may authorize the replacement of the virtual trusted runtime BIOS. The authorization module may authorize the generation of the replacement portion of the virtual trusted runtime BIOS  at which time the router can route a request to an address of the replacement portion of the virtual trusted runtime BIOS. The authorization module  may authorize the router to replace the address of a resource of the virtual trusted runtime BIOS with the replacement portion of the virtual trusted runtime BIOS. The authorization module may read a digital signature, digital certificate, or another component of the replacement portion of the virtual trusted runtime BIOS. The VMM  is a trusted component and the authorization module may rely on the trust component of the VMM  to authorize the routing of a request to the address of the replacement portion of the virtual trusted runtime BIOS.","The communication  can be routed to a first address of a resource of the virtual trusted runtime BIOS  or a second address of a replacement portion of the virtual trusted runtime BIOS . Although only one replacement portion is shown it may represent multiple replacement portions of the virtual trusted runtime BIOS. For example there may be a second replacement portion of the virtual trusted runtime BIOS. A second replacement portion may include a resource that was replaced by the replacement portion or may replace a resource of the virtual trusted runtime BIOS. A replacement portion of the virtual trusted runtime BIOS may also include multiple resources that are being replaced by the replacement portion.","In one implementation the BIOS  and the EFI  can include resources that are accessible by web based protocols using an address of the resource. For example the virtual trusted runtime BIOS  or the replacement portion of the virtual trusted runtime BIOS  may be able to control a portion of the hardware  of the system. To control the hardware a communication may be made to the BIOS  or EFI  by the virtual trusted runtime BIOS  or the replacement portion of the virtual trusted runtime BIOS .","In one implementation the hardware may include a transceiver . The transceiver can connected the computing system  to a network or to another computing system. Connecting the computing system  to a network with other computing system or directly to another computing system can allow the virtual trusted runtime BIOS  or a replacement portion of the virtual trusted runtime BIOS to reside in a location remote from the computing system. In one example, the virtual trusted runtime BIOS  resides in the computing system  at a first address and the replacement portion of the virtual trusted runtime BIOS resides at a second address remote from the computing system. If the guest domain  for example sends a request for a resource to the virtual trusted runtime BIOS then the router  would use the first address however if the replacement portion includes a replacement of the requested resource the address would be that of the resource at the replacement portion of the virtual trusted runtime BIOS which would be routed to the transceiver  which would get routed to the replacement portion of the virtual trusted runtime BIOS based on the second address regardless of where it is located.",{"@attributes":{"id":"p-0047","num":"0046"},"figref":"FIG. 3","b":["100","305","125","115"]},"The method can manage a replacement portion of the virtual trusted runtime BIOS at . The management of the replacement portion of the virtual trusted runtime BIOS may be by the VMM. The VMM may generate the replacement portion of the virtual trusted runtime BIOS, or may receive the replacement portion of the virtual trusted runtime BIOS from an external source, such as a manufacturer of the computing system. The management of the replacement portion on the virtual trusted runtime BIOS may include putting the replacement portion on the virtual trusted runtime BIOS in the domain hosting the virtual trusted runtime BIOS or in another domain which may include a domain remote from the computing system.","A router  can replace a first address to a resource of the virtual trusted runtime BIOS with a second address to the resource of the replacement portion of the virtual trusted runtime BIOS at . The router may be for example a physical controller such as a processor , a virtual component such as a VMM or another component.",{"@attributes":{"id":"p-0050","num":"0049"},"figref":"FIG. 4","b":["100","405","125","115"]},"The replacement portion of the virtual trusted runtime BIOS may be authorized at . The authorization of the replacement portion of the virtual trusted runtime BIOS may be by an authorization module or may be by the VMM in the same way that the virtual trusted runtime BIOS is trusted. The authorization may review a digital signature, digital certificate or another type of secure authorization.","The method can manage a replacement portion of the virtual trusted runtime BIOS at . The management of the replacement portion of the virtual trusted runtime BIOS may be by the VMM. The VMM may generate the replacement portion of the virtual trusted runtime BIOS, or may receive the replacement portion of the virtual trusted runtime BIOS from an external source, such as a manufacturer of the computing system. The management of the replacement portion on the virtual trusted runtime BIOS may include putting the replacement portion on the virtual trusted runtime BIOS in the domain hosting the virtual trusted runtime BIOS or in another domain which may include a domain remote from the computing system.","Replacement of the first address to a resource of the virtual trusted runtime BIOS with a second address to the resource of the replacement portion of the virtual trusted runtime BIOS by the router may be authorized at . The authorization of the replacement of the first address with the second address may be by an authorization module or may be by the VMM in the same way that the virtual trusted runtime BIOS is trusted. The authorization may review a digital signature, digital certificate or another type of secure authorization.","A router can replace a first address to a resource of the virtual trusted runtime BIOS with a second address to the resource of the replacement portion of the virtual trusted runtime BIOS at . The router may be for example a physical controller such as a processor , a virtual component such as a VMM or another component.","A second replacement portion of the virtual trusted runtime BIOS may be managed by the VMM. Communications may be routed to a second replacement portion of the virtual trusted runtime BIOS at .","In one implementation, either or both of the virtual trusted runtime BIOS and the replacement portion of the virtual trusted runtime BIOS may be located remotely and communicated with at . The communication may be by directing the communication to an address of a requested resource. The address of the communication may be an address used in a web communication protocol to route the communication to the address.","The requested resource may be provided by both virtual trusted runtime BIOS and the replacement portion of the virtual trusted runtime BIOS. To determine whether to replace the address of the communication the time that the virtual trusted runtime BIOS and the replacement portion of the virtual trusted runtime BIOS are established may be considered at . For example if the time that the replacement portion of the virtual trusted runtime BIOS is established is chronologically after the time that the virtual trusted runtime BIOS is established then the address of the more recent resource of the replacement portion of the virtual trusted runtime BIOS may be used to route the communication to the requested resource.",{"@attributes":{"id":"p-0058","num":"0057"},"figref":"FIG. 5","b":["500","515","516","510","520","530","535","540","545","515","516","505"]},"Various modules, such as those depicted in other figures, can be implemented as machine-readable instructions that can be executed on one or multiple processors. A processor can include a microprocessor, microcontroller, processor module or subsystem, programmable integrated circuit, programmable gate array, or another control or computing device.","The machine-readable instructions can be stored in machine-readable or computer-readable storage media, which can be implemented as one or multiple computer-readable or machine-readable storage media. The storage media can include different forms of memory including semiconductor memory devices such as dynamic or static random access memories (DRAMs or SRAMs), erasable and programmable read-only memories (EPROMs), electrically erasable and programmable read-only memories (EEPROMs) and flash memories; magnetic disks such as fixed, floppy and removable disks; other magnetic media including tape; optical media such as compact disks (CDs) or digital video disks (DVDs); or other types of storage devices. Note that the instructions discussed above can be provided on one computer-readable or machine-readable storage medium, or alternatively, can be provided on multiple computer-readable or machine-readable storage media distributed in a large system having possibly plural nodes. Such computer-readable or machine-readable storage medium or media is (are) considered to be part of an article (or article of manufacture). An article or article of manufacture can refer to any manufactured single component or multiple components. The storage medium or media can be located either in the machine running the machine-readable instructions, or located at a remote site from which machine-readable instructions can be downloaded over a network for execution.","In the foregoing description, numerous details are set forth to provide an understanding of the subject disclosed herein. However, implementations may be practiced without some or all of these details. Other implementations may include modifications and variations from the details discussed above. It is intended that the appended claims cover such modifications and variations."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Some embodiments are described with respect to the following figures:",{"@attributes":{"id":"p-0005","num":"0004"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0006","num":"0005"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0007","num":"0006"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0008","num":"0007"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 5"}]},"DETDESC":[{},{}]}
