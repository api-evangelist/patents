---
title: Creating optimized gradient mesh of a vector-based image from a raster-based image
abstract: A method for creating an optimized gradient mesh of a vector-based image from a raster-based image. In one implementation, a set of boundaries for an object on a raster-based image may be received. An initial gradient mesh of the object may be created. A residual energy between the object on the raster-based image and a rendered initial gradient mesh may be minimized to generate an optimized gradient mesh.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08773423&OS=08773423&RS=08773423
owner: Microsoft Corporation
number: 08773423
owner_city: Redmond
owner_country: US
publication_date: 20070507
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND","SUMMARY","DETAILED DESCRIPTION"],"p":["Typically, images may be saved on a computer as raster-based representations or vector-based representations. Raster-based images, or bitmaps, may be defined as a data file or structure representing a generally rectangular grid of pixels, or points of color. Vector-based images may represent an image through the use of geometric objects such as points, lines, curves and polygons, which may be based upon mathematical equations. In some applications, a vector-based image may be advantageous. For example, vector-based images may be scaled indefinitely without degradation; but raster images lose clarity when scaled because they are based on pixels. Depending upon how they are created, vector-based images may be scalable, editable, easily stylized and easily animated. However, vector-based images may be very time consuming for an artist to create. Also, it may be difficult to create photo realistic vector-based images.","Currently vector-based images are typically drawn manually on the computer. Most computer vector-based drawing systems may provide various methods to draw geometric objects such as points, lines, curves and polygons. Color changes may be applied linearly or along the paths of the curves or within the fill regions of polygons. However, drawing complex, multi-colored images may be extremely difficult. The more complex the vector-based images are, the more difficult they would be to edit.","A gradient mesh, which is a drawing tool, may be used to create a multi-colored mesh on which colors may flow in different directions and transition smoothly. In general, gradient mesh images may have a simpler structure and, therefore, may be easier to edit than other vector-based images. However, as with other forms of vector-based images, gradient mesh images may be difficult and time consuming to create. A few techniques exist to semi-automatically convert a raster-based image to a vector-based image. However, each of these techniques results in a vector-based image that is difficult to edit.","Described herein are implementations of various techniques for creating an optimized gradient mesh of a vector-based image from a raster-based image. In one implementation, a raster-based image may be received. User selected boundaries for an object on the raster-based image may then be received. An initial gradient mesh of the object may be created. The initial gradient mesh may then be rendered. By minimizing a residual energy between the object on the raster-based image and the rendered initial gradient mesh, an optimized gradient mesh may be generated. The optimized gradient mesh may then be rendered. The residual energy between the object on the raster-based image and the rendered initial gradient mesh may be minimized by first calculating the residual energy and then applying a Levenberg-Marquardt (LM) algorithm to minimize the residual energy.","In one implementation, the initial gradient mesh may be created by evenly distributing one or more control points over the object such that an n\u00d7m mesh of rectangular patches is created to cover an area defined by the boundaries of the object.","In another implementation, the initial gradient mesh may be created by receiving user selected control points on the object and adding horizontal and vertical gradient mesh lines passing through the received control points to cover an area defined by the boundaries of the object.","The above referenced summary section is provided to introduce a selection of concepts in a simplified form that are further described below in the detailed description section. The summary is not intended to identify key features or essential features of the claimed subject matter, nor is it intended to be used to limit the scope of the claimed subject matter. Furthermore, the claimed subject matter is not limited to implementations that solve any or all disadvantages noted in any part of this disclosure.","In general, one or more implementations described herein are directed to various techniques for creating an optimized gradient mesh of a vector-based image from a raster-based image. In one implementation, a user may select an object from a raster-based image. An initial gradient mesh may then be automatically or semi-automatically created. An optimized gradient mesh representation of a vector-based image may then be generated by minimizing the difference between the raster-based image and the rendered initial gradient mesh. The optimized gradient mesh may then be saved and rendered. One or more implementations of various techniques for creating an optimized gradient mesh representation of a vector-based image are described in more detail with reference to  in the following paragraphs.","As used herein, a gradient mesh may be defined as a drawing tool used to create a vector-based image. A gradient mesh may be a grid of control points in which each control point is assigned a color such that colors may flow in different directions and transition smoothly. A gradient mesh may be a topologically rectangular patch made up of multiple Ferguson patches. A Ferguson patch may be defined as a rectangular patch defined by four control points.",{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 1A","b":["110","120"],"sup":["0","1","2 ","3","T","T","f","T"],"sub":["u ","v","p","p","p"],"br":[{},{},{}],"in-line-formulae":[{},{},{},{}],"i":["m","u,v","F","u","Q","F","v","UCQ","C","V","f","u,v","UCQ","C","V"]},{"@attributes":{"id":"p-0016","num":"0015"},"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"mi":"Q","mo":"=","mrow":{"mo":["[","]"],"mtable":{"mtr":[{"mtd":[{"msup":{"mi":"m","mn":"0"}},{"msup":{"mi":"m","mn":"2"}},{"msubsup":{"mi":["m","v"],"mn":"0"}},{"msubsup":{"mi":["m","v"],"mn":"2"}}]},{"mtd":[{"msup":{"mi":"m","mn":"1"}},{"msup":{"mi":"m","mn":"3"}},{"msubsup":{"mi":["m","v"],"mn":"1"}},{"msubsup":{"mi":["m","v"],"mn":"3"}}]},{"mtd":[{"msubsup":{"mi":["m","u"],"mn":"0"}},{"msubsup":{"mi":["m","u"],"mn":"2"}},{"msubsup":{"mi":["m","uv"],"mn":"0"}},{"msubsup":{"mi":["m","uv"],"mn":"2"}}]},{"mtd":[{"msubsup":{"mi":["m","u"],"mn":"1"}},{"msubsup":{"mi":["m","u"],"mn":"3"}},{"msubsup":{"mi":["m","uv"],"mn":"1"}},{"msubsup":{"mi":["m","uv"],"mn":"3"}}]}]}}},{"mi":"C","mo":"=","mrow":{"mo":["[","]"],"mtable":{"mtr":[{"mtd":[{"mn":"1"},{"mn":"0"},{"mn":"0"},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"mn":"1"},{"mn":"0"}]},{"mtd":[{"mrow":{"mo":"-","mn":"3"}},{"mn":"3"},{"mrow":{"mo":"-","mn":"2"}},{"mrow":{"mo":"-","mn":"1"}}]},{"mtd":[{"mrow":{"mo":"-","mn":"2"}},{"mn":"2"},{"mn":"1"},{"mn":"1"}]}]}}},{"mi":"U","mo":"=","mrow":{"mo":["[","]"],"mtable":{"mtr":{"mtd":[{"mn":"1"},{"mi":"u"},{"msup":{"mi":"u","mn":"2"}},{"msup":{"mi":"u","mn":"3"}}]}}}},{"mi":"V","mo":"=","mrow":{"mrow":{"mo":["[","]"],"mtable":{"mtr":{"mtd":[{"mn":"1"},{"mi":"v"},{"msup":{"mi":"v","mn":"2"}},{"msup":{"mi":"v","mn":"3"}}]}}},"mo":"."}}],"mo":[",","\u2062",",","\u2062",",","\u2062"],"mstyle":[{"mtext":{}},{"mtext":{}},{"mtext":{}}]}}},"br":{},"sub":["u ","v ","uv ","p ","p"],"sup":"f "},"A gradient mesh may be made up of multiple Ferguson patches such that a gradient mesh may be defined as M={Q,Q}, where P equals the number of patches in the gradient mesh. For each control point in the gradient mesh, three types of variables may be interactively edited: position, partial derivatives and Red, Green, Blue (RGB) color. The 2D position of control point q may be defined as {x, y}. The partial derivatives may be specified by direction handles and may be represented as {m,m,\u03b1m,\u03b1m}. The RGB color may be defined as c={c(r),c(g),c(b)}. The control point variables are contained in the Qand Qmatrices. As the control points in the gradient mesh are moved or edited, the position, partial derivatives and RGB color may be changed. An image may be created using a gradient mesh by defining the position, partial derivatives and RGB color of various control points.  illustrates a gradient mesh  made up of four Ferguson patches defined by nine control points . As illustrated in , within a gradient mesh, Ferguson patches may share control points . Various gradient mesh techniques will be described in more detail with reference to  in the following paragraphs.","Implementations of various techniques described herein may be operational with numerous general purpose or special purpose computing system environments or configurations. Examples of well known computing systems, environments, and\/or configurations that may be suitable for use with the various techniques described herein include, but are not limited to, personal computers, server computers, hand-held or laptop devices, multiprocessor systems, microprocessor-based systems, set top boxes, programmable consumer electronics, network PCs, minicomputers, mainframe computers, distributed computing environments that include any of the above systems or devices, and the like.","The various techniques described herein may be implemented in the general context of computer-executable instructions, such as program modules, being executed by a computer. Generally, program modules include routines, programs, objects, components, data structures, etc. that perform particular tasks or implement particular abstract data types. The various techniques described herein may also be implemented in distributed computing environments where tasks are performed by remote processing devices that are linked through a communications network, e.g., by hardwired links, wireless links, or combinations thereof. In a distributed computing environment, program modules may be located in both local and remote computer storage media including memory storage devices.",{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 2","b":["200","200"]},"The computing system  may include a central processing unit (CPU) , a system memory  and a system bus  that couples various system components including the system memory  to the CPU . Although only one CPU is illustrated in , it should be understood that in some implementations the computing system  may include more than one CPU. The system bus  may be any of several types of bus structures, including a memory bus or memory controller, a peripheral bus, and a local bus using any of a variety of bus architectures. By way of example, and not limitation, such architectures include Industry Standard Architecture (ISA) bus, Micro Channel Architecture (MCA) bus, Enhanced ISA (EISA) bus, Video Electronics Standards Association (VESA) local bus, and Peripheral Component Interconnect (PCI) bus also known as Mezzanine bus. The system memory  may include a read only memory (ROM)  and a random access memory (RAM) . A basic input\/output system (BIOS) , containing the basic routines that help transfer information between elements within the computing system , such as during start-up, may be stored in the ROM .","The computing system  may further include a hard disk drive  for reading from and writing to a hard disk, a magnetic disk drive  for reading from and writing to a removable magnetic disk , and an optical disk drive  for reading from and writing to a removable optical disk , such as a CD ROM or other optical media. The hard disk drive , the magnetic disk drive , and the optical disk drive  may be connected to the system bus  by a hard disk drive interface , a magnetic disk drive interface , and an optical drive interface , respectively. The drives and their associated computer-readable media may provide nonvolatile storage of computer-readable instructions, data structures, program modules and other data for the computing system .","Although the computing system  is described herein as having a hard disk, a removable magnetic disk  and a removable optical disk , it should be appreciated by those skilled in the art that the computing system  may also include other types of computer-readable media that may be accessed by a computer. For example, such computer-readable media may include computer storage media and communication media. Computer storage media may include volatile and non-volatile, and removable and non-removable media implemented in any method or technology for storage of information, such as computer-readable instructions, data structures, program modules or other data. Computer storage media may further include RAM, ROM, erasable programmable read-only memory (EPROM), electrically erasable programmable read-only memory (EEPROM), flash memory or other solid state memory technology, CD-ROM, digital versatile disks (DVD), or other optical storage, magnetic cassettes, magnetic tape, magnetic disk storage or other magnetic storage devices, or any other medium which can be used to store the desired information and which can be accessed by the computing system . Communication media may embody computer readable instructions, data structures, program modules or other data in a modulated data signal, such as a carrier wave or other transport mechanism and may include any information delivery media. The term \u201cmodulated data signal\u201d may mean a signal that has one or more of its characteristics set or changed in such a manner as to encode information in the signal. By way of example, and not limitation, communication media may include wired media such as a wired network or direct-wired connection, and wireless media such as acoustic, RF, infrared and other wireless media. Combinations of any of the above may also be included within the scope of computer readable media.","A number of program modules may be stored on the hard disk, magnetic disk , optical disk , ROM  or RAM , including an operating system , one or more application programs , an optimized gradient mesh module , program data  and a database system . The operating system  may be any suitable operating system that may control the operation of a networked personal or server computer, such as Windows\u00ae XP, Mac OS\u00ae X, Unix-variants (e.g., Linux\u00ae and BSD\u00ae), and the like. The optimized gradient mesh module  will be described in more detail with reference to  in the paragraphs below.","A user may enter commands and information into the computing system  through input devices such as a keyboard  and pointing device . Other input devices may include a microphone, joystick, game pad, satellite dish, scanner, or the like. These and other input devices may be connected to the CPU  through a serial port interface  coupled to system bus , but may be connected by other interfaces, such as a parallel port, game port or a universal serial bus (USB). A monitor  or other type of display device may also be connected to system bus  via an interface, such as a video adapter . In addition to the monitor , the computing system  may further include other peripheral output devices, such as speakers and printers.","Further, the computing system  may operate in a networked environment using logical connections to one or more remote computers, such as a remote computer . The remote computer  may be another personal computer, a server, a router, a network PC, a peer device or other common network node. Although the remote computer  is illustrated as having only a memory storage device , the remote computer  may include many or all of the elements described above relative to the computing system . The logical connections may be any connection that is commonplace in offices, enterprise-wide computer networks, intranets, and the Internet, such as local area network (LAN)  and a wide area network (WAN) .","When using a LAN networking environment, the computing system  may be connected to the local network  through a network interface or adapter . When used in a WAN networking environment, the computing system  may include a modem , wireless router or other means for establishing communication over a wide area network , such as the Internet. The modem , which may be internal or external, may be connected to the system bus  via the serial port interface . In a networked environment, program modules depicted relative to the computing system , or portions thereof, may be stored in a remote memory storage device . It will be appreciated that the network connections shown are exemplary and other means of establishing a communications link between the computers may be used.","It should be understood that the various techniques described herein may be implemented in connection with hardware, software or a combination of both. Thus, various techniques, or certain aspects or portions thereof, may take the form of program code (i.e., instructions) embodied in tangible media, such as floppy diskettes, CD-ROMs, hard drives, or any other machine-readable storage medium wherein, when the program code is loaded into and executed by a machine, such as a computer, the machine becomes an apparatus for practicing the various techniques. In the case of program code execution on programmable computers, the computing device may include a processor, a storage medium readable by the processor (including volatile and non-volatile memory and\/or storage elements), at least one input device, and at least one output device. One or more programs that may implement or utilize the various techniques described herein may use an application programming interface (API), reusable controls, and the like. Such programs may be implemented in a high level procedural or object oriented programming language to communicate with a computer system. However, the program(s) may be implemented in assembly or machine language, if desired. In any case, the language may be a compiled or interpreted language, and combined with hardware implementations.",{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 3","b":["300","300"]},"At step , the optimized gradient mesh module  may receive a raster-based image.  illustrates an example of a raster-based image  that may be received.","At step , the optimized gradient mesh module  may receive user selected object boundaries. Depending on the complexity of the raster-based image, the image may be converted as one object or separated into two or more objects that may be converted separately. If the image is converted as two or more objects, the boundaries of the selected objects may overlap each other such that when the objects are reassembled the overlapping gradient meshes may hide color discontinuities.","Each object boundary may consist of four segments approximating a rectangle. As described in the above paragraphs, a gradient mesh may be made up of one or more Ferguson patches which may be defined by four control points, resulting in four mesh line segments. In one implementation, a user may draw the four segments to delineate an object boundary using a standard spline editing tool. Each segment may be converted to one or more cubic B splines. A spline may be defined as a cubic curve between a pair of control points. Splines may be connected at control points. To make sure that curves join together smoothly, the first and second derivative at the end of one curve must equal the first and second derivative at the start of the next curve. B-splines are a category of splines in which modifying one control point only affects the part of the curve near that control point. In other implementations, a user may use an interactive image cutout tool to extract the boundary of an object. The user may then manually split the selected boundary into four segments that may be converted to cubic B splines.  illustrates a selected object boundary . Note that the boundary is separated into four segments ,,  and .","After step , an optional step may be performed in which occluded regions in an object may be smoothed. For example, when converting a human face from a raster-based image to a vector-based image, the eyes may be converted as separate objects from the face. Therefore, before the face is converted to a vector-based image, the eyes may be smoothed out such that the vector-based eye images may be overlaid on smooth areas of the vector-based face image.","At step , an initial gradient mesh may be automatically or semi-automatically created. The optimized gradient mesh module  may automatically create an initial gradient mesh by evenly distributing control points over the object selected in step  such that an n\u00d7m mesh of rectangular patches is created. In other implementations, the initial gradient mesh may be created semi-automatically. The optimized gradient mesh module  may receive user selected control points. The optimized gradient mesh module  may then add the horizontal and vertical gradient mesh lines passing through the user selected control points following the object boundary  curvature. It should be noted that the user may need to select only one control point defining each horizontal line and vertical line and other control points may be automatically added by the optimized gradient mesh module  where gradient mesh lines cross.  illustrates an initial gradient mesh  that was created semi-automatically. The initial gradient mesh  is not evenly distributed, rather user selected control points  (indicated by black dots) were received by the optimized gradient mesh module . The optimized gradient mesh module  then added horizontal and vertical gradient mesh lines to pass through each user selected control point  (black dots). Because the user may have select only one control point defining each horizontal and vertical line, other control points  (indicated by white dots) may be automatically added by the optimized gradient mesh module  where gradient mesh lines cross. Note that only a few of the user selected control point  (black dots) and automatically added control points  (white dots) are indicated in .","At step , the initial gradient mesh  may be rendered. The initial gradient mesh  may be defined as M={Q,Q}where P equals the number of patches in the initial gradient mesh . Equations 1 and 2 may be used to render the initial gradient mesh .  illustrates a rendered initial gradient mesh .","At step , an optimized gradient mesh may be generated by minimizing the difference between the rendered initial gradient mesh  of the selected object and the corresponding objection portion on the received raster-based image . In one implementation, the difference between rendered initial gradient mesh  and the corresponding objection portion on the received raster-based image  may be determined by minimizing the residual energy in the following energy equation.",{"@attributes":{"id":"p-0037","num":"0036"},"maths":{"@attributes":{"id":"MATH-US-00002","num":"00002"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"mi":"E","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"M"}},{"munderover":{"mo":"\u2211","mrow":{"mi":"p","mo":"=","mn":"1"},"mi":"P"},"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mrow":{"munder":{"mo":"\u2211","mrow":{"mi":["u","v"],"mo":","}},"mo":"\u2062","msup":{"mrow":{"mo":["\uf605","\uf606"],"mrow":{"mrow":[{"msub":{"mi":["I","p"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":"m","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["u","v"],"mo":","}}}}},{"msub":{"mi":["f","p"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["u","v"],"mo":","}}}],"mo":"-"}},"mn":"2"}}}],"mo":"="}},{"mrow":{"mi":"Equation","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mn":"3"}}]}}}},"br":{},"sub":["p ","k","k","p","optimized"],"b":["410","440","410","410","440","410"],"sup":"2"},"In one implementation, the Levenberg-Marquardt (LM) algorithm may be used to minimize the residual energy in Equation 3 by solving the NLLS problem. The LM algorithm may require the computation of a Jacobian, or derivative information, represented as",{"@attributes":{"id":"p-0039","num":"0038"},"maths":{"@attributes":{"id":"MATH-US-00003","num":"00003"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"mrow":{"mo":["(",")"],"msub":{"mi":["J","k"]}},"mo":"\u2062","mi":"i"},{"mfrac":{"mrow":[{"mo":"\u2202","mrow":{"msub":{"mi":["f","k"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"z"}}},{"mo":"\u2202","msub":{"mi":["z","i"]}}]},"mo":"."}],"mo":"="}}},"br":{},"sub":["k ","k ","p ","optimized"],"b":"410"},"In one or more implementations, the LM algorithm may include a boundary constraint such that during optimization control points along the boundaries only move along the boundary edges. For example as described in step , the boundary may be divided into four segments that may be described by one or more cubic B-splines. A control point q on a boundary spline S in the u direction may have a reduced number of unknown variables. The unknown variables may be {t,m,c,c}, where t is the parametric coordinate of the control point q on the boundary spline S. The scale \u03b1may be one and the variables mand \u03b1may be a function of t. If two adjacent control points of the control point q are q\u22121 and q+1, then the enforced boundary constraints may be",{"@attributes":{"id":"p-0041","num":"0040"},"maths":{"@attributes":{"id":"MATH-US-00004","num":"00004"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"msub":{"mi":["m","u"]},"mo":"=","mrow":{"mrow":{"mfrac":{"mrow":[{"mo":"\u2202","mi":"S"},{"mo":"\u2202","mi":"t"}]},"mo":["\u2062","\u2062","\u2062","\u2062","\u2062"],"mrow":{"mo":["(",")"],"mrow":{"msub":[{"mi":"t","mrow":{"mi":"q","mo":"+","mn":"1"}},{"mi":["t","q"]}],"mo":"-"}},"mstyle":[{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}],"mi":"and","msub":{"mi":["\u03b1","u"]}},"mo":"=","mfrac":{"mrow":[{"mo":["(",")"],"mrow":{"msub":[{"mi":["t","q"]},{"mi":"t","mrow":{"mi":"q","mo":"-","mn":"1"}}],"mo":"-"}},{"mo":["(",")"],"mrow":{"msub":[{"mi":"t","mrow":{"mi":"q","mo":"+","mn":"1"}},{"mi":["t","q"]}],"mo":"-"}}]}}},{"mi":"where","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mfrac":{"mrow":[{"mo":"\u2202","mi":"S"},{"mo":"\u2202","mi":"t"}]}}],"mo":","}}},"br":{}},"In other implementations, a smoothness constraint may be added to Equation 3 to yield an energy equation used to minimize the residual energy between the received raster-based image  and the rendered initial gradient mesh  with a smoothness term. The following equation results.",{"@attributes":{"id":"p-0043","num":"0042"},"maths":{"@attributes":{"id":"MATH-US-00005","num":"00005"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"msup":{"mi":["E","\u2032"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"M"}},{"mrow":[{"mi":"E","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"M"}},{"mi":"\u03bb","mo":"\u2062","mrow":{"munderover":{"mo":"\u2211","mrow":{"mi":"p","mo":"=","mn":"1"},"mi":"P"},"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mrow":{"munder":{"mo":"\u2211","mrow":{"mi":["s","t"],"mo":","}},"mo":"\u2062","mrow":{"mo":["[","]"],"mrow":{"msup":[{"mrow":{"mo":["\uf605","\uf606"],"mrow":{"mrow":[{"mi":"m","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mrow":{"mi":"s","mo":"-","mrow":{"mi":["\u0394","s"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},"mo":",","mi":"t"}}},{"mn":"2","mo":"\u2062","mrow":{"mi":"m","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["s","t"],"mo":","}}}},{"mi":"m","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mrow":{"mi":"s","mo":"+","mrow":{"mi":["\u0394","s"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},"mo":",","mi":"t"}}}],"mo":["-","+"]}},"mn":"2"},{"mrow":{"mo":["\uf605","\uf606"],"mrow":{"mrow":[{"mi":"m","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":"s","mo":",","mrow":{"mi":"t","mo":"-","mrow":{"mi":["\u0394","t"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}}}}},{"mn":"2","mo":"\u2062","mrow":{"mi":"m","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["s","t"],"mo":","}}}},{"mi":"m","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":"s","mo":",","mrow":{"mi":"t","mo":"+","mrow":{"mi":["\u0394","t"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}}}}}],"mo":["-","+"]}},"mn":"2"}],"mo":"+"}}}}}],"mo":"+"}],"mo":"="}},{"mrow":{"mi":"Equation","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mn":"4"}}]}}}},"br":{},"figref":"FIG. 4E","b":["450","450"]},"In other implementations, Equation 4 may be further modified to allow for user guided optimization. A user may specify a few vector lines in the raster-based image at step  or step . The user specified vector lines may be configured to control the optimization of the gradient mesh. Vector fields may be computed in a narrow band along the user specified vector lines. If vector fields Vand Von the u and v directions are computed, the optimized energy equation may be modified by adding a new energy term as follows.",{"@attributes":{"id":"p-0045","num":"0044"},"maths":{"@attributes":{"id":"MATH-US-00006","num":"00006"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"msup":{"mi":["E","\u2033"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"M"}},{"mrow":[{"msup":{"mi":["E","\u2032"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"M"}},{"mi":"\u03b2","mo":"\u2062","mrow":{"munderover":{"mo":"\u2211","mrow":{"mi":"p","mo":"=","mn":"1"},"mi":"P"},"mo":"\u2062","mrow":{"munder":{"mo":"\u2211","mrow":{"mi":["u","v"],"mo":","}},"mo":"\u2062","mrow":{"mo":["[","]"],"mrow":{"mrow":[{"mrow":{"msub":{"mi":["w","u"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":"m","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["u","v"],"mo":","}}}}},"mo":"\u2062","msup":{"mrow":{"mo":["\u2329","\u232a"],"mrow":{"mfrac":{"mrow":[{"mo":"\u2202","mrow":{"mi":"m","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["u","v"],"mo":","}}}},{"mo":"\u2202","mi":"u"}]},"mo":",","mrow":{"mo":"\u22a5","mrow":{"msub":{"mi":["V","u"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":"m","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["u","v"],"mo":","}}}}}}}},"mn":"2"}},{"mrow":{"msub":{"mi":["w","v"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":"m","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["u","v"],"mo":","}}}}},"mo":"\u2062","msup":{"mrow":{"mo":["\u2329","\u232a"],"mrow":{"mfrac":{"mrow":[{"mo":"\u2202","mrow":{"mi":"m","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["u","v"],"mo":","}}}},{"mo":"\u2202","mi":"v"}]},"mo":",","mrow":{"mo":"\u22a5","mrow":{"msub":{"mi":["V","v"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":"m","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["u","v"],"mo":","}}}}}}}},"mn":"2"}}],"mo":"+"}}}}}],"mo":"+"}],"mo":"="}},{"mrow":{"mi":"Equation","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mn":"5"}}]}}}},"br":{},"img":[{"@attributes":{"id":"CUSTOM-CHARACTER-00001","he":"3.13mm","wi":"1.02mm","file":"US08773423-20140708-P00001.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00002","he":"3.13mm","wi":"1.02mm","file":"US08773423-20140708-P00002.TIF","alt":"custom character","img-content":"character","img-format":"tif"}}]},{"@attributes":{"id":"p-0046","num":"0045"},"maths":{"@attributes":{"id":"MATH-US-00007","num":"00007"},"math":{"@attributes":{"overflow":"scroll"},"mfrac":{"mrow":[{"mo":"\u2202","mrow":{"mi":"m","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["u","v"],"mo":","}}}},{"mo":"\u2202","mi":"u"}]}}},"br":{}},{"@attributes":{"id":"p-0047","num":"0046"},"maths":{"@attributes":{"id":"MATH-US-00008","num":"00008"},"math":{"@attributes":{"overflow":"scroll"},"mfrac":{"mrow":[{"mo":"\u2202","mrow":{"mi":"m","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["u","v"],"mo":","}}}},{"mo":"\u2202","mi":"v"}]}}},"br":{},"sub":["u ","u ","v ","v ","u","v","u","v","v","u","v ","u "],"sup":["2","2"]},"At step , the optimized gradient mesh module  may save the optimized gradient mesh  to memory and render the optimized gradient mesh  for display. Equations 1 and 2 may be used to render the optimized gradient mesh , M={Q,Q}. It should be noted that a standard rendering algorithm may be used which includes standard anti-aliasing. Additionally, a Bayesian matting algorithm may be used along the optimized gradient mesh edges to insure proper color sampling along the edges.  illustrates a rendered optimized gradient mesh .","At step , the optimized gradient mesh module  may receive a request to return to step  such that another object of the raster-based image  may be selected. Alternatively, the optimized gradient mesh module  may receive a notification that the process is complete.","It should be noted that various optimized gradient meshes of various objects may be then be used to reconstruct images, edit objects, create new images and the like. In one implementation, the optimized gradient meshes may be combined to reconstruct the raster-based image. Further, various optimized gradient meshes from different raster-based images may be combined to create new images.","Although the subject matter has been described in language specific to structural features and\/or methodological acts, it is to be understood that the subject matter defined in the appended claims is not necessarily limited to the specific features or acts described above. Rather, the specific features and acts described above are disclosed as example forms of implementing the claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 1A-B"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 4A-F"}]},"DETDESC":[{},{}]}
