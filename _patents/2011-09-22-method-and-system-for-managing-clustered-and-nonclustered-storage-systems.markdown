---
title: Method and system for managing clustered and non-clustered storage systems
abstract: Method and system for managing a storage environment having a cluster based storage system and a non-cluster based storage system is provided. A management application collects information regarding components of both the cluster based storage system and the non-cluster based storage system. A layout having a plurality of data structures is generated and maintained by the management application. The data structures include information regarding the components and their relationships with each other, if any. The layout is used for responding to user requests and presenting an integrated view of the storage environment on a display device with selectable options for selecting the cluster based storage system components and the non-cluster based storage system components.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08271556&OS=08271556&RS=08271556
owner: Netapp, Inc.
number: 08271556
owner_city: Sunnyvale
owner_country: US
publication_date: 20110922
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATION","COPYRIGHT NOTICE","TECHNICAL FIELD","RELATED ART","SUMMARY","DETAILED DESCRIPTION","Definitions"],"p":["The present application is a continuation of U.S. patent application Ser. No. 12\/561,592, filed Sep. 17, 2009 now U.S. Pat. No. 8,051,113, the disclosure of which is hereby incorporated by reference as if set forth in full herein.","A portion of the disclosure of this patent document contains material which is subject to copyright protection. The copyright owner has no objection to the facsimile reproduction by anyone of the patent document or the patent disclosure, as it appears in the Patent and Trademark Office patent file or records, but otherwise reserves all copyright rights whatsoever.","The present disclosure relates to storage systems.","Various forms of storage systems are used today. These forms include network attached storage (NAS) systems, storage area networks (SANs), and others. Network storage systems are commonly used for a variety of purposes, such as providing multiple users with access to shared data, backing up data (e.g., by data mirroring) and others.","A network storage system typically includes at least one computing system (may also be referred to as a \u201cserver\u201d), which is a processing system configured to store and retrieve data on behalf of one or more client processing systems (\u201cclients\u201d). In the context of NAS, a storage server operates on behalf of one or more clients to store and manage shared files in a set of mass storage devices, such as magnetic or optical disks or tapes.","In a SAN context, the storage server provides clients with block-level access to stored data. Some storage systems may be capable of providing clients with both file-level access and block-level access.","Storage environments continue to evolve and grow. A storage environment today may include different types of storage systems, for example, a cluster based storage system (may also be referred to as cluster system or cluster based system) and a non-cluster based storage system (may also be referred to as non-cluster system or non-cluster based system). A cluster based system may have a distributed architecture; while a non-cluster based storage system may have a traditional monolithic architecture where a storage server has access to a dedicated storage subsystem.","Managing storage environments with different storage system types can be challenging and complex because different storage system types have different attributes, features and capabilities. Continuous efforts are being made to integrate storage environment management having different storage system types.","In one embodiment, a method and system for managing a storage environment having a cluster based storage system and a non-cluster based storage system is provided. A management application collects information regarding components of both the cluster based storage system and the non-cluster based storage system. A layout having a plurality of data structures is generated and maintained by the management application. The data structures include information regarding the components and their relationships with each other, if any. The layout is used for responding to user requests and presenting an integrated view of the storage environment on a display device with selectable options for selecting the cluster based storage system components and the non-cluster based storage system components.","In another embodiment, a machine implemented method for a storage environment having a cluster based storage system and a non-cluster based storage system is provided. Information regarding a plurality of components of both the cluster based storage system and the non-cluster based storage system is collected. A layout having a plurality of data structures for storing information regarding the plurality of components of both the cluster based storage system and the non-cluster based storage system is generated. A client request for information regarding a component of the storage environment is received and a data structure from the layout and associated with the component of the storage environment is retrieved. Thereafter, information regarding the component is presented to the user.","In yet another embodiment, a machine readable storage medium storing executable instructions, which when executed by a machine, causes the machine to manage a storage environment having a cluster based storage system and a non-cluster based storage system is provided. The method includes: (a) collecting information regarding a plurality of components of both the cluster based storage system and the non-cluster based storage system; (b) generating a layout having a plurality of data structures for storing information regarding the plurality of components of both the cluster based storage system and the non-cluster based storage system; (c) receiving a client request requesting information regarding a component of the storage environment; (d) retrieving a data structure associated with the component of the storage environment; and (e) presenting information regarding the component to the user.","In another embodiment, a computer program product is provided. The product includes a computer usable storage medium having computer readable instructions embodied therein for managing a storage environment having a cluster based storage system and a non-cluster based storage system. The medium includes (a) instructions for collecting information regarding a plurality of components of both the cluster based storage system and the non-cluster based storage system; (b) instructions for generating a layout having a plurality of data structures for storing information regarding the plurality of components of both the cluster based storage system and the non-cluster based storage system; (c) instructions for receiving a client request requesting information regarding a component of the storage environment; (d) instructions for retrieving a data structure associated with the component of the storage environment; and (e) instructions for presenting information regarding the component to the user.","In yet another embodiment, a machine implemented method for managing a storage environment having a cluster based storage system and a non-cluster based storage system is provided. The method generates a layout having a plurality of data structures. The plurality of data structures are used for storing information regarding a plurality of components of the cluster based storage system and the non-cluster based storage system. The layout is used for presenting an integrated view of the storage environment on a display device with selectable options for selecting the cluster based storage system components and the non-cluster based storage system components.","The embodiments disclosed herein provide useful tools to a user for efficiently managing a storage environment. A user is able to view various components of both the cluster based and non-cluster based storage systems. Because a user is able to get an integrated view and can drill down to both logical and physical component levels, the user can troubleshoot disruptions and problems in a storage environment.","This brief summary has been provided so that the nature of this disclosure may be understood quickly. A more complete understanding of the disclosure can be obtained by reference to the following detailed description of the various embodiments thereof in connection with the attached drawings.","The following definitions are provided as they are typically (but not exclusively) used in the computing\/storage environment, implementing the various adaptive embodiments described herein.","\u201cAggregate\u201d is a logical aggregation of physical storage, i.e., a logical container for a pool of storage, combining one or more physical mass storage devices (e.g., disks) or parts thereof into a single logical storage object, which includes or provides storage for one or more other logical data sets at a higher level of abstraction (e.g., volumes).","\u201cCIFS\u201d means the Common Internet File System Protocol, an access protocol that client systems use to request file access services from storage systems over a network.","\u201cData Container\u201d or \u201cDataset\u201d means a block, a file, a logical unit of data or any other information.","\u201cFC\u201d means Fibre Channel, a high-speed network technology primarily used for storage networking. Fibre Channel Protocol (FCP) is a transport protocol (similar to Transmission Control Protocol (TCP) used in Internet Protocol (\u201cIP\u201d) networks) which predominantly transports SCSI commands over Fibre Channel networks.","\u201cGlobal Namespace\u201d refers to a virtual hierarchical collection of unique volume names or identifiers and directory paths to the volumes, in which the volumes are stored on multiple server nodes within a clustered storage server system. In the context of the present disclosure, the global namespace of a clustered storage server system can be extended to include not only the identifiers of volumes stored on the multiple nodes of the clustered system, but also the identifiers of volumes stored on one or more storage systems that are remote from and do not constitute a part of the clustered system.","\u201ciSCSI\u201d means the Internet Small Computer System Interface, an IP based storage networking standard for linking data storage facilities. The standard allows carrying SCSI commands over IP networks. iSCSI may be used to transmit data over local area networks (LANs), wide area networks (WANs), or the Internet and can enable location-independent data storage and retrieval.","\u201cNamespace\u201d refers to a virtual hierarchical collection of unique volume names or identifiers and directory paths to the volumes, in which each volume represents a virtualized container storing a portion of the namespace descending from a single root directory. For example, each volume associated with a namespace can be configured to store one or more data files, scripts, word processing documents, executable programs, etc. In a typical storage system, the names or identifiers of the volumes stored on a storage server can be linked into a namespace for that storage server.","\u201cNFS\u201d means Network File System, a protocol that allows a user to access storage over a network.","\u201cResource Pool\u201d means a collection of one or more storage systems and one or more aggregates, and its configuration is typically determined by a network storage administrator.","\u201cVolume\u201d is a logical data set which is an abstraction of physical storage, combining one or more physical mass storage devices (e.g., disks) or parts thereof into a single logical storage object, and which is managed as a single administrative unit, such as a single file system. A volume is typically defined from a larger group of available storage, such as an aggregate.","As used in this disclosure, the terms \u201ccomponent\u201d \u201cmodule\u201d, \u201csystem,\u201d and the like are intended to refer to a computer-related entity, either software-executing general purpose processor, hardware, firmware and a combination thereof. For example, a component may be, but is not limited to being, a process running on a processor, a processor, an object, an executable, a thread of execution, a program, and\/or a computer.","By way of illustration, both an application running on a server and the server can be a component. One or more components may reside within a process and\/or thread of execution, and a component may be localized on one computer and\/or distributed between two or more computers. Also, these components can execute from various computer readable media having various data structures stored thereon. The components may communicate via local and\/or remote processes such as in accordance with a signal having one or more data packets (e.g., data from one component interacting with another component in a local system, distributed system, and\/or across a network such as the Internet with other systems via the signal).","Computer executable components can be stored, example, on computer readable media including, but not limited to, an ASIC (application specific integrated circuit), CD (compact disc), DVD (digital video disk), ROM (read only memory), floppy disk, hard disk, EEPROM (electrically erasable programmable read only memory), memory stick or any other storage device, in accordance with the claimed subject matter.","Storage Environment :",{"@attributes":{"id":"p-0045","num":"0044"},"figref":"FIG. 1A","b":["100","120","200","104","1","104","2","108","108","114","114","114","120","106","104","1","104","108","114","120","104","1","104","2","108","114","106"],"i":"n"},"Clients .-. may be general purpose computers having a plurality of components. These components may include a central processing unit (CPU), main memory, I\/O devices, and storage devices (for example, flash memory, hard drives and others). The main memory may be coupled to the CPU via a system bus or a local memory bus. The main memory may be used to provide the CPU access to data and\/or program information that is stored in main memory at execution time. Typically, the main memory is composed random access memory (RAM) circuits. A computer system with the CPU and main memory is often referred to as a host system.","Details regarding cluster  and associated storage  are provided below in detail.","Storage system  may include a storage subsystem  having multiple mass storage devices (e.g., disks) -(may also be referred to as ). The mass storage devices in storage subsystem  may be, for example, conventional magnetic disks, optical disks such as CD-ROM or DVD based storage, magneto-optical (MO) storage, or any other type of non-volatile storage devices suitable for storing data.","Processors executing instructions in storage system , cluster  and client systems .-. communicate according to well-known protocols, such as the NFS protocol or the CIFS protocol, to make data stored on the disk  (or storage  for cluster system ) appear to users and\/or application programs as though the data were stored locally on the client systems .-.. The storage system  and\/or cluster  can present or export data stored on disks  (or  for cluster system ) as a volume, or one or more qtree sub-volume units, to each of the client systems .-.. Each volume is configured to store data files, scripts, word processing documents, executable programs, and the like.","From the perspective of one of the client systems .-., each volume can appear to be a single disk drive. However, each volume can represent the storage space in one disk, an aggregate of some or all of the storage space in multiple disks, a RAID group, or any other suitable set of storage space.","Specifically, each volume can include a number individually addressable files. For example, in a network attached storage (NAS) configuration, the files of a volume are addressable over the computer network  for file-based access. In addition, an aggregate is a fixed-sized volume built on top of a number of RAID groups containing one or more virtual volumes or FlexVol\u00ae flexible volumes.","In a typical mode of operation, one of the client systems .-. transmits one or more input\/output commands, such as an NFS or CIFS request, over the computer network  to the storage system  (and\/or cluster system ), which receives the request, issues one or more I\/O commands to disk  to read or write the data on behalf of the client system .-., and issues an NFS or CIFS response containing the requested data over the network  to the respective client system.","The management console  may store and execute a storage management application . The management console  may be, for example, a conventional PC, workstation, or the like. The storage management application  may be a module with executable instructions, typically used by a storage network administrator to manage a pool of storage devices (may also be referred to as a \u201cresource pool\u201d). This application enables the administrator to perform various operations, such as monitoring and allocating storage space in the storage pool, creating and deleting volumes, directories and others.","Communication between the storage management application , storage system  and cluster system  may be accomplished using any of the various conventional communication protocols and\/or application programming interfaces (APIs), the details of which are not germane to the technique being introduced here. This communication can be done through the network  or it can be via a direct link (not shown) between the management console  and one or more of the storage systems.","Managing a storage environment with cluster system  and non-cluster based system  can be challenging for a storage administrator because the systems may use different versions of the operating systems and may have different attributes and capabilities. One option is to manage different components (i.e.,  and ) using different applications. For example, one application version may be used to manage cluster system  and a second and different version may be used to manage storage system . This may be commercially undesirable because clients will have to maintain two different versions\/types of management applications. Furthermore, this option does not provide a complete integrated view of the entire storage environment that a storage administrator may want in order to troubleshoot and improve overall storage environment usage.","The various embodiments disclosed herein provide an integrated solution for managing both cluster and non-cluster type of storage systems.","Storage Management Application :","The techniques being introduced here can be implemented in the storage management application .  shows an illustrative block diagram of storage management application , according to certain embodiments that implement the processes described below. In the illustrated embodiment, the storage management application  includes a graphical user interface (GUI) module  to generate a GUI (e.g., for use by a storage administrator); an Operations Manager  for managing both storage system  and cluster system , according to one embodiment; one or more other management modules  to perform various other storage management related functions; and a communication module .","Operations Manager  performs various management related functions for both storage system  and cluster system , described below in more detail. The communication module  implements one or more conventional communication protocols and\/or APIs to enable the storage management application  to communicate with the storage system  and cluster system .","The storage management application  may also maintain policies , a list  of all volumes in a storage pool as well as a table  of all free space (on a per-disk basis) in a storage pool.","In one embodiment, Operations Manager  communicates with cluster based system  and non-cluster based system  to obtain information regarding various physical and logical components of storage environment . The communication occurs via communication module . Operations Manager  collects and regularly updates information regarding storage space, volumes, flexible volumes, striped volumes, member volumes, member aggregates, striped aggregates, physical port information, and logical interface information for data ports, management ports and cluster ports, as described below. In one embodiment, Operations Manager  manages the collected information by generating a layout  (, described below), which allows management application  to present storage environment information in a plurality of views.","Clustered System:","Before describing the various adaptive embodiments of the present disclosure, the following describes the functionality of a cluster system as used in an integrated storage environment , similar to the storage environment  described above. Management console  executing management application  manages the storage environment , according to one embodiment.",{"@attributes":{"id":"p-0064","num":"0063"},"figref":"FIG. 2","b":["200","204","1","204","2","104","1","104","2","202","114","108","120","206","106","204","1","204","2","108","202"]},"As shown in , the clustered storage server system  includes a plurality of nodes .-., cluster switching fabric , and a plurality of mass storage devices such as disks .-. (may also be referred to as disks  (similar to storage )). Clustered storage systems like the clustered storage system  are available from NetApp, Inc.","Each of the plurality of nodes .-. may be configured to include an N-module, a D-module, and an M-host, each of which can be implemented as a separate software module. Specifically, node . includes an N-module ., a D-module ., and an M-host .; node . includes an N-module ., a D-module ., and an M-host .; and node . includes an N-module ., a D-module ., and an M-host ..","The N-modules .-. include functionality that enables the respective nodes .-. to connect to one or more of the client systems .-. over the computer network , while the D-modules .-. connect to one or more of the disks .-..","The M-hosts .-. provide management functions for the clustered storage server system . Accordingly, each of the plurality of server nodes .-. in the clustered storage server arrangement provides the functionality of a storage server.","A switched virtualization layer including a plurality of virtual interfaces (VIFs) (may also be referred to a logical interfaces (LIFs))  is provided below the interface between the respective N-modules .-. and the client systems .-., allowing the disks .-. associated with the nodes .-. to be presented to the client systems .-. as a single shared storage pool. For example, the switched virtualization layer may implement a virtual interface architecture.  depicts only the VIPs  at the interfaces to the N-modules ., . for clarity of illustration.","It is noted that the clustered storage server system  can be organized into any suitable number of virtual servers (also referred to as \u201cvservers\u201d), in which each vserver represents a single storage system namespace with separate network access. Each vserver has a user domain and a security domain that are separate from the user and security domains of other vservers. Moreover, each vserver is associated with one or more VIFs and can span one or more physical nodes, each of which can hold one or more VIFs and storage associated with one or more vservers. Client systems can access the data on a vserver from any node of the clustered system, but only through the VIFs associated with that vserver.","Each of the nodes .-. is defined as a computer adapted to provide application services to one or more of the client systems .-.. In this context, a vserver is an instance of an application service provided to a client system. The nodes .-. are interconnected by the switching fabric , which, for example, may be embodied as a Gigabit Ethernet switch. Although  depicts an equal number (i.e., 3) of the N-modules .-., the D-modules .-., and the M-Hosts .-., any other suitable number of N-modules, D-modules, and M-Hosts may be provided. There may also be different numbers of N-modules, D-modules, and\/or M-Hosts within the clustered storage server system . For example, in alternative embodiments, the clustered storage server system  may include a plurality of N-modules and a plurality of D-modules interconnected in a configuration that does not reflect a one-to-one correspondence between the N-modules and D-modules.","The clustered storage server system  can include the NETAPP\u00ae DATA ONTAP\u00ae storage operating system, available from NetApp, Inc., that implements the WAFL\u00ae storage system, or any other suitable storage operating system.","The client systems .-. of  may be implemented as general-purpose computers configured to interact with the respective nodes .-. in accordance with a client\/server model of information delivery. In the presently disclosed embodiment, the interaction between the client systems .-. and the nodes .-. enable the provision of network data storage services.","Specifically, each client system ., . may request the services of one of the respective nodes ., ., ., and that node may return the results of the services requested by the client system by exchanging packets over the computer network , which may be wire-based, optical fiber, wireless, or any other suitable combination thereof. The client systems .-. may issue packets according to file-based access protocols, such as the NFS protocol or the CIFS protocol, when accessing information in the form of files and directories.","In a typical mode of operation, one of the client systems .-. transmits an NFS or CIFS request for data to one of the nodes .-. within the clustered storage server system , and the VIE  associated with the respective node receives the client request. It is noted that each VIF  within the clustered system  is a network endpoint having an associated IP address, and that each VIF can migrate from N-module to N-module. The client request typically includes a file handle for a data file stored in a specified volume on one or more of the disks .-..","Specifically, each volume comprises a storage system subtree that includes an index node file (an inode file) having a root inode, and a set of directories and files contained under the root inode. Each inode is a data structure allocated for a respective data file to store metadata that describes the data file. For example, an inode can contain data and pointers for use in facilitating access to blocks of data within the data file, and each root inode can contain pointers to a number of modes. In addition, an aggregate is a fixed-sized volume built on top of a number of RAID groups containing one or more virtual volumes or FlexVol\u00ae flexible volumes.",{"@attributes":{"id":"p-0077","num":"0076"},"figref":["FIG. 3A","FIG. 2","FIG. 3A"],"b":["302","304","306","212","1","212","3","202","302","304","306","302","1","2","304","3","306","4","5","202","208","1","208","3","204","1","204","2","208","1","208","3"]},{"@attributes":{"id":"p-0078","num":"0077"},"figref":"FIG. 3B","b":["312","1","2","3","4","5","312","1","5","312","1","5","312","202","3","216","2","4","216","3","216","1","216","3","216","1","216","3"]},"As shown in , the global namespace  includes the volume RT (i.e., the root volume), which has three junctions linking the volume RT to the volumes vol, vol, vol. The global namespace  further includes the volume vol, which has two junctions linking the volume vol to the volumes vol, vol.","Integrated Architecture :",{"@attributes":{"id":"p-0081","num":"0080"},"figref":"FIG. 4A","b":["400","118","200","100","400","124","200","124","400","200","118"]},"In one embodiment, using layout , management application  is able to provide a comprehensive and integrated view of the entire storage environment  with both cluster based and non-cluster based storage systems. For example, a storage administrator may be able to view all the volumes in a storage environment using a single module, for example, management application . Management application  is also able to present just a physical view (for example, as shown in ), a logical view (for example, as shown in ) and a storage view (for example, as shown in ) of the storage environment as described below.","For presenting the different views of different system types, Operations Manager  categorizes components used by storage system  and cluster system  as data structures\/objects. Operations Manager  recognizes components that may be commonly used by both the storage system  and cluster system  (referred to as shared components or \u201cexisting components\u201d). The shared components may include disks, RAID groups, aggregates, volumes and qtrees. These may be presented to the storage administrator, as they typically would have been presented for only storage system .","Operations Manager  also recognizes components that may only be used in one of the systems, i.e. either the storage system  or cluster system  (may be referred to as non-shared or \u201cnew\u201d components). The components that may be different (i.e. not used by a typical monolithic storage system ) are a cluster, virtual server and a global namespace.","Operations Manager  manages the relationships between the shared components and non-shared components to provide the various views to a storage administrator. As described below, because of layout , a user is provided with an option to view the entire storage environment with both types of storage systems,  and , only storage system  and only cluster system .","Referring back to , Operations Manager  generates the plurality of data structures (or objects) to represent the various components of storage environment . Operations Manager  maintains a hierarchical structure for storing information regarding both the cluster based and non-cluster based storage systems. For example, Operations Manager  maintains a top-level data structure labeled as appliance  for representing and storing information regarding a typical monolithic storage system . A second and separate data structure, labeled as cluster , may be used to represent and store information regarding cluster based system .","Both appliance  and cluster  are associated to a data structure labeled node  that may be used to provide a global view of storage environment . Node  maintains relationships between various physical and logical components of storage environment  as described below in detail.","Layout  includes a data structure labeled as disk  that may be used to represent physical storage space in a non-cluster based system (for example, ). The information regarding the physical storage may be obtained by Operation Manager  by polling, sending information requests to the non-cluster based system  or by any other means.","The data structure  may be associated with a data structure labeled as aggregate  that is used to store information regarding aggregates within storage environment . Aggregate  is associated with a plurality of other data structures, for example, a data structure labeled as flexible volume , and a data structure labeled as member aggregate . In this example, flexible volume  may be used to store information regarding flexible volumes used by a non-cluster based storage system. Member aggregates  may be used to store information regarding one or more member aggregates of a cluster based system.","If a user wants to obtain details regarding flexible volumes in a non-cluster based system represented by , then Operations Manager  simply has to toggle from data structure  to node  and retrieve aggregate information from data structure  for the non-cluster based storage system. From aggregate , the flexible volume information may be obtained from data structure . If a user request is to view a member aggregate within a cluster based system then Operations Manager  toggles from data structure  to node  to obtain information from member aggregate .","Operations Manager  collects volume information from both the cluster based and non-cluster based storage systems. The information is stored in a data structure labeled as member volume . Operations Manager  also maintains information regarding striped volumes in a data structure labeled striped volume .","A member volume may be associated with a flexible volume as shown by the connection between  and . A member volume may also be associated with a member aggregate, shown by the connection between  and . A member volume may be associated with a striped volume, as shown by the connection between  and .","Operations Manager  maintains information regarding all the member aggregates within . The member aggregates may be a part of a striped aggregate whose information is stored in data structure . The striped aggregate may be a part of a cluster, as shown by the relationship between  and .","If a user wants information on all the member volumes of a storage environment , then Operations Manager  is able to obtain that information from data structure . If the user seeks striped aggregate information and member aggregate information for a particular cluster system, then that can be obtained from data structures  and , respectively.","A cluster based system may include various virtual servers. Information regarding the virtual servers may be stored as data structure . This information is again populated by Operations Manager  by communicating with the cluster based storage system.","Virtual servers may include flexible volumes, as shown by the connection between  and  and striped volumes, shown by the connection between  and . The virtual server data structure  may also be associated directly with data structure . This allows a user to view all virtual servers that are a part of a particular cluster.","Operations Manager  also maintains information regarding all the physical ports that are used in a storage environment. This is shown as data structure  that includes information regarding all the individual ports. The individual port information is stored in a data structure labeled port . Port  is connected to port aggregate  and also directly to node .","If a user wants to know details regarding a particular port, then management application  is able to present that information because Operations Manager  is able to toggle from  to node  and then to port aggregate  or directly to port .","The physical ports of a storage environment may be actual device ports that may be associated with various logical components. The logical components may be grouped together within a data structure  that includes information regarding various logical components shown as data logical interface (Data LIF) , cluster logical interface (Cluster LIF)  and management logical interface (Mgmt LIF) . Data LIF  may be a data structure that may be used to store an Internet Protocol address (IP address) used by a client to access a cluster to read and write data. Cluster LIF  may be used to store information regarding a cluster node that is used communicate with other cluster nodes. Mgmt LIF  may be used to store information regarding a management node that is used by a management console to communicate with a cluster.","Logical interface  is associated with physical port  that is associated with port aggregate  and node , as discussed above. Because of the relationships between the logical and physical components, one can toggle between a logical view and a physical view and vice-versa. For example, management application  is able to provide details regarding a physical port and the associated logical components because of the relationship between , ,  to logical interface  and the relationship between logical interface  and port .","Since Operations Manager  maintains the various relationships between various components of a monolithic system represented by  and a cluster based system , a plurality of views are efficiently provided to a user. The description below provides some examples of how both physical and logical components may be viewed from a user's perspective.",{"@attributes":{"id":"p-0102","num":"0101"},"figref":["FIG. 4B","FIG. 4A","FIG. 2"],"b":["440","403","202","404","403","453","455","453","454","442","444","403","446","455","448","403","450","451","453","455","459"]},"Node  may also include a data port , a management port  and a cluster port . The functionality of ports ,  and  is similar to ports ,  and , respectively.","The physical view  allows a user to view the various ports and their properties. The physical view is generated based on the layout , described above with respect to . A storage administrator using computing system  is able to troubleshoot and view any problems ports within a storage environment.",{"@attributes":{"id":"p-0105","num":"0104"},"figref":["FIG. 4C","FIG. 4B"],"b":["462","403","462","403","466","470","466","470","468","472","468","472","453","455"]},"The logical view  also shows the Data LIF  used by clients  and  to access virtual servers  and . The Data LIF may be IP addresses that are used by the clients to access the virtual servers via the data network . The user is able to toggle between physical view  and logical view  because of layout  and the various relationships shown in  that are created and maintained by Operations Manager .",{"@attributes":{"id":"p-0107","num":"0106"},"figref":"FIG. 4D","b":["474","403","476","478","453","455","474","400"]},"Process Flow:",{"@attributes":{"id":"p-0109","num":"0108"},"figref":["FIG. 4E","FIG. 4A","FIG. 1A"],"b":["480","400","200","479","124","120"]},"In block S, a layout having a plurality of data structures for storing the collected information is generated. The layout may be similar to layout  that is described above in detail with respect to .","Once the layout is generated, the process for using layout  begins in block S, when an authorized storage administrator using management application  (i.e. Operations Manager ) logs in. The login procedure ensures that only authorized individual\/entities are allowed to access information regarding storage environment .","After administrator login, in block S, in response to a client request, management application  presents a \u201ccomplete\u201d (or \u201cglobal\u201d) view of storage environment . The term complete here means both clustered and non-clustered systems.","In response to the client request, management application  retrieves the data structures of layout  to present the integrated view. The view is made possible because of layout  that uses node  for both appliance  and cluster , described above in detail. The integrated view may be presented by executing programmable instructions out of memory and then displaying the results on a display device (not shown).","An example of an integrated view is shown in window  of  that is displayed on a display device for a storage administrator. In window , each storage system is referred to as a \u201cstorage controller\u201d.","For managing storage environment , window  includes various selectable options including icons, drop down menu options or others. Window  may provide options  and  from where one can obtain a global view of the storage environment . After selecting option  and , a user, for example, a storage administrator may obtain a global view of storage environment  that includes all the storage systems in the storage environment . One can select option  to obtain a status on various group components of storage environment , while option  allows one to see details of a member of a group. Details regarding the various systems are available within the same user interface, as described below.","Window  provides a list of all storage systems in column . Column  shows the \u201ctype\u201d of storage system and the status of each storage system is shown in column . The status column  indicates whether a storage system is fully operational, if there are any errors, or if it is offline (i.e. non-operational). Column  identifies if a storage system (or a node) is a part of a cluster (for example, ). If there is no indication in column  of a cluster, then the storage system is assumed to be a non-cluster storage system (for example, ). Column  shows a model number of each storage system and column  shows a serial number for each storage system.","The view in window  is made possible because of layout  that is described above with respect to .","From window , a user may request information for a non-cluster based system, for example, , or a cluster based system . This is shown as blocks  and S in .","In block S, the user selects the non-cluster system (). Management application  using layout  (for example, ,  and others) retrieves information regarding non-cluster system . The information is displayed in window  shown in . Window  provides information regarding the selected system. For example, in segment  of window , the user can see the status, Model number, serial number, the primary IP address, the operating system, protocols used by the selected system, the network interface, whether remote management is available and a location. Segment  also shows overall usage of one or more CPUs used by the selected storage system.","Segment  in window  provides an event history involving the selected storage system. Segment  provides information regarding the storage space that is available for the selected system. For example, segment  shows how many data disks, parity disks, spare disks and total number of disks are available. Segment  also shows the number of aggregates, Volumes, qtree and LUNs that are being used by the selected storage system.","Referring back to , in block S, a user may select a volume associated with the selected storage system. For example, a user may select a volume from segment  of window . Management application  retrieves volume information using layout  (for example, , ,  and others) and displays the attributes for the selected volume.",{"@attributes":{"id":"p-0122","num":"0121"},"figref":"FIG. 5C","b":["524","494","526"]},"Segment  shows an event history for the volume. Segment  shows more information about the volume, for example, storage capacity (Qtrees and LUNS), any related storage and also identifies groups if the selected volume is used by a group. This information allows the Operations Manger  to collect group based information that is described below in detail.","After the user is presented with a comprehensive view in block S, the user may request information regarding a cluster system node in block S. Management application  retrieves information for the cluster system node by using layout  (for example, data structure ,  and others). Based on user request\/selection, cluster node details are shown in window  of . Window  is based on the user selecting cluster based storage system  from .","Window  includes information about the selected system. For example, segment  of window  shows the status, Model Number, Serial number, primary address, operating system, cluster name and a number of network interface (i.e. number of available network interface, for example, data, management, storage and cluster interface). CPU usage for the selected cluster node may also be shown within segment .","Segment  shows storage capacity, i.e. aggregates and volumes and an event history for the node. Segment  may also show if the selected node is a part any group.","From window , a user may select the cluster shown in segment . The cluster details are then displayed in window  of . Window  may include different segments displaying different type of information for the selected cluster. For example, segment  shows the status, serial number, primary IP address, the number of nodes (or controllers) in the cluster, the number of virtual servers, number of actual ports and the number of logical interfaces (see ). The volume capacity for the selected cluster is shown in segment .","Segment  shows the cluster hierarchy which may include the identity of the nodes, the number of logical interfaces for the cluster itself, drill down details of the virtual servers that are configured in the cluster and information regarding stripped aggregates for the cluster.","The event history is shown in segment  and storage capacity is shown in segment . Segment  provides group information for the cluster. The indication \u201cNone\u201d means that the cluster is not a part of any defined group. Segment  is a monitoring window showing cluster usage and CPU usage.","From segment , the user may select a virtual server, as shown in block S of . Management application  retrieves details for the selected virtual server by using layout  (for example, data structure ). This displays details regarding the selected virtual server in a window  of . Window  includes segment  that provides top level details for the virtual server, for example, status, cluster, primary IP address, NIS domain, the root volume and number of logical interfaces.","The namespace for the selected virtual system is shown in segment . Segment  shows the total volume capacity used as compared to the total available volume capacity for the virtual server.","Segment  provides event history for the virtual server, total storage capacity, associated groups, if any. Monitoring information for the virtual server is also provided in segment .","In block S, a user may select and view volume details associated with the selected virtual server as shown in window  of . Management application  retrieves details regarding the selected volume from layout  (for example, , ,  and ). Window  shows volume details in segment . For example, segment  includes status information, identity of the node managing the volume, a junction path, and identity of an aggregate, type of volume, RAID configuration, capacity used and volume size.","Segment  provides a graphical illustration of the volume capacity used versus the total available capacity. Segment  and  includes more details about the selected volume. For example, segment  provides the space breakout for the volume, the number of Snapshots taken for the volume, as well as any related storage. Segment  also provides event history involving the selected volume and information regarding any associated groups.","As shown with respect to  and A-G, one can get a complete view of the storage environ, drill down and see details for a node in a cluster system, view virtual server namespace details, toggle between logical and physical components and view details regarding a monolithic storage systems as well. This assists a storage administrator to efficiently manage a storage environment with different storage system types.","Group Usage:","Layout  described above with respect to  allows Operations Manager  to collect information regarding various volumes in a storage environment. For monitoring storage system usage, a storage administrator may create specific groups based on project teams, divisions, locations, business units and others. The storage administrator may then assign certain volumes to these different groups. In one embodiment, Operations Manager  is able to collect volume usage information and is able to allocate cost (may also be referred to as \u201ccharge backs\u201d) among these different groups.  shows a process flow diagram for reporting charge back among different groups. The charge backs are for both clustered and non-clustered storage systems. The process begins in block S.","In block S, the user is provided with a comprehensive chargeback view in window  of . One can reach window  by selecting option  from the \u201cGlobal\u201d option  (). Window  includes a chargeback icon  that shows the total charge for using a storage system within a certain period. Window  also shows average usage and the rate of usage for example per gigabytes.","In block S, a user may want to see a detailed report for different volumes. The detailed report is shown in window  of . Window  includes various columns including column  that lists all the volumes; column  that lists the storage systems\/nodes associated with the volumes and column  shows the average usage of the volumes. Column  shows the annual rate of usage, while monthly usage is shown in column . The usage is for defined periods that may be set by a storage administrator.","Storage System Node:",{"@attributes":{"id":"p-0141","num":"0140"},"figref":["FIG. 6A","FIG. 2"],"b":["208","1","602","602","604","610","612","616","613","608","613","614"]},"The cluster access adapter  comprises a plurality of ports adapted to couple node . to other nodes of cluster . In the illustrative embodiment, Ethernet may be used as the clustering protocol and interconnect media, although it will be apparent to those skilled in the art that other types of protocols and interconnects may be utilized within the cluster architecture described herein. In alternate embodiments where the N-modules and D-modules are implemented on separate storage systems or computers, the cluster access adapter  is utilized by the N\/D-module for communicating with other N\/D-modules in the cluster .","Each node . is illustratively embodied as a dual processor storage system executing a storage operating system  that preferably implements a high-level module, such as a file system, to logically organize the information as a hierarchical structure of named directories, files and special types of files called virtual disks (hereinafter generally \u201cblocks\u201d) on disks .. However, it will be apparent to those of ordinary skill in the art that the node . may alternatively comprise a single or more than two processor systems. Illustratively, one processor A executes the functions of the N-module . on the node, while the other processor B executes the functions of the D-module ..","The memory  illustratively comprises storage locations that are addressable by the processors and adapters for storing programmable instructions and data structures. The processor and adapters may, in turn, comprise processing elements and\/or logic circuitry configured to execute the programmable instructions and manipulate the data structures. It will be apparent to those skilled in the art that other processing and memory means, including various computer readable media, may be used for storing and executing program instructions pertaining to the invention described herein.","The storage operating system , portions of which is typically resident in memory and executed by the processing elements, functionally organizes the node . by, inter alia, invoking storage operations in support the storage service implemented by the node. An example of operating system  is the DATA ONTAP\u00ae (Registered trademark of NetApp, Inc.) operating system available from NetApp, Inc. that implements a Write Anywhere File Layout (WAFL\u00ae (Registered trademark of NetApp, Inc.)) file system. However, it is expressly contemplated that any appropriate storage operating system may be enhanced for use in accordance with the inventive principles described herein. As such, where the term \u201cONTAP\u201d is employed, it should be taken broadly to refer to any storage operating system that is otherwise adaptable to the teachings of this invention.","The network adapter  comprises a plurality of ports adapted to couple the node . to one or more clients .\/. over point-to-point links, wide area networks, virtual private networks implemented over a public network (Internet) or a shared local area network. The network adapter  thus may comprise the mechanical, electrical and signaling circuitry needed to connect the node to the network. Illustratively, the computer network  may be embodied as an Ethernet network or a Fibre Channel (FC) network. Each client .\/. may communicate with the node over network  by exchanging discrete frames or packets of data according to pre-defined protocols, such as TCP\/IP.","The storage adapter  cooperates with the storage operating system  executing on the node . to access information requested by the clients. The information may be stored on any type of attached array of writable storage device media such as video tape, optical, DVD, magnetic tape, bubble memory, electronic random access memory, micro-electro mechanical and any other similar media adapted to store information, including data and parity information. However, as illustratively described herein, the information is preferably stored on disks .. The storage adapter  comprises a plurality of ports having input\/output (I\/O) interface circuitry that couples to the disks over an I\/O interconnect arrangement, such as a conventional high-performance, FC link topology.","Storage of information on each array . is preferably implemented as one or more storage \u201cvolumes\u201d that comprise a collection of physical storage disks . cooperating to define an overall logical arrangement of volume block number (vbn) space on the volume(s). Each logical volume is generally, although not necessarily, associated with its own file system. The disks within a logical volume\/file system are typically organized as one or more groups, wherein each group may be operated as a Redundant Array of Independent (or Inexpensive) Disks (RAID). Most RAID implementations, such as a RAID-4 level implementation, enhance the reliability\/integrity of data storage through the redundant writing of data \u201cstripes\u201d across a given number of physical disks in the RAID group, and the appropriate storing of parity information with respect to the striped data. An illustrative example RAID implementation is a RAID-4 level implementation, although it should be understood that other types and levels of RAID implementations may be used in accordance with the inventive principles described herein.","Operating System:",{"@attributes":{"id":"p-0150","num":"0149"},"figref":"FIG. 6B","b":["606","208","1","606","214","1","216","1","620","204","1","204","2"]},"Operating system  may also include a protocol layer  and an associated network access layer , to allow node . to communicate over a network with other systems, such as clients .\/.. Protocol layer  may implement one or more of various higher-level network protocols, such as NFS, CIFS, Hypertext Transfer Protocol (HTTP), TCP\/IP and others, as described below.","Network access layer  may include one or more drivers, which implement one or more lower-level protocols to communicate over the network, such as Ethernet. Interactions between clients .\/. and mass storage devices . (e.g. disks, etc.) are illustrated schematically as a path, which illustrates the flow of data through operating system .","The operating system  may also include a storage access layer  and an associated storage driver layer  to allow D-module . to communicate with a storage device. The storage access layer  may implement a higher-level disk storage protocol, such as RAID (redundant array of inexpensive disks), while the storage driver layer  may implement a lower-level storage device access protocol, such as FC or SCSI. In one embodiment, the storage access layer  may implement the RAID protocol, such as RAID-4 or RAID-DP\u2122 (RAID double parity for data protection provided by NetApp Inc. the assignee of the present disclosure).","As used herein, the term \u201cstorage operating system\u201d generally refers to the computer-executable code operable on a computer to perform a storage function that manages data access and may, in the case of a node ., implement data access semantics of a general purpose operating system. The storage operating system can also be implemented as a microkernel, an application program operating over a general-purpose operating system, such as UNIX\u00ae or Windows XP\u00ae, or as a general-purpose operating system with configurable functionality, which is configured for storage applications as described herein.","In addition, it will be understood to those skilled in the art that the invention described herein may apply to any type of special-purpose (e.g., file server, filer or storage serving appliance) or general-purpose computer, including a standalone computer or portion thereof, embodied as or including a storage system. Moreover, the teachings of this disclosure can be adapted to a variety of storage system architectures including, but not limited to, a network-attached storage environment, a storage area network and a disk assembly directly-attached to a client or host computer. The term \u201cstorage system\u201d should therefore be taken broadly to include such arrangements in addition to any subsystems configured to perform a storage function and associated with other equipment or systems. It should be noted that while this description is written in terms of a write any where file system, the teachings of the present invention may be utilized with any suitable file system, including a write in place file system.","Processing System:",{"@attributes":{"id":"p-0157","num":"0156"},"figref":["FIG. 7","FIG. 7"],"b":["700","118"]},"The processing system  includes one or more processors  and memory , coupled to a bus system . The bus system  shown in  is an abstraction that represents any one or more separate physical buses and\/or point-to-point connections, connected by appropriate bridges, adapters and\/or controllers. The bus system , therefore, may include, for example, a system bus, a Peripheral Component Interconnect (PCI) bus, a HyperTransport or industry standard architecture (ISA) bus, a small computer system interface (SCSI) bus, a universal serial bus (USB), or an Institute of Electrical and Electronics Engineers (IEEE) standard 1394 bus (sometimes referred to as \u201cFirewire\u201d).","The processors  are the central processing units (CPUs) of the processing system  and, thus, control its overall operation. In certain embodiments, the processors  accomplish this by executing executable instructions  stored in memory . A processor  may be, or may include, one or more programmable general-purpose or special-purpose microprocessors, digital signal processors (DSPs), programmable controllers, application specific integrated circuits (ASICs), programmable logic devices (PLDs), or the like, or a combination of such devices.","Memory  represents any form of random access memory (RAM), read-only memory (ROM), flash memory, or the like, or a combination of such devices. Memory  includes the main memory of the processing system . Instructions  may be used to implement the techniques introduced above (e.g., the storage management application  in ) may reside in and executed (by processors ) from memory .","Also connected to the processors  through the bus system  are one or more internal mass storage devices , and a network adapter . Internal mass storage devices  may be or may include any conventional medium for storing large volumes of data in a non-volatile manner, such as one or more magnetic or optical based disks. The network adapter  provides the processing system  with the ability to communicate with remote devices (e.g., storage servers ) over a network and may be, for example, an Ethernet adapter, a Fibre Channel adapter, or the like. The processing system  also includes one or more input\/output (I\/O) devices  coupled to the bus system . The I\/O devices  may include, for example, a display device, a keyboard, a mouse, etc.","Thus, a method and apparatus for managing clustered and non-clustered storage systems have been described. Note that references throughout this specification to \u201cone embodiment\u201d or \u201can embodiment\u201d means that a particular feature, structure or characteristic described in connection with the embodiment is included in at least one embodiment of the present invention. Therefore, it is emphasized and should be appreciated that two or more references to \u201can embodiment\u201d or \u201cone embodiment\u201d or \u201can alternative embodiment\u201d in various portions of this specification are not necessarily all referring to the same embodiment. Furthermore, the particular features, structures or characteristics being referred to may be combined as suitable in one or more embodiments of the invention, as will be recognized by those of ordinary skill in the art.","While the present disclosure is described above with respect to what is currently considered its preferred embodiments, it is to be understood that the disclosure is not limited to that described above. To the contrary, the disclosure is intended to cover various modifications and equivalent arrangements within the spirit and scope of the appended claims."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The foregoing features and other features will now be described with reference to the drawings of the various embodiments. In the drawings, the same components have the same reference numerals. The illustrated embodiments are intended to illustrate, but not to limit the present disclosure. The drawings include the following Figures:",{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 1A"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":["FIG. 1B","FIG. 1A"]},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 3A"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 3B"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 4A"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIGS. 4B-4D"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIGS. 4E and 4F"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":["FIGS. 5A-5I","FIG. 4A"]},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 6A"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 6B"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 7"}]},"DETDESC":[{},{}]}
