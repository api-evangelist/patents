---
title: Method and apparatus for selectively retrieving information from a source computer using a terrestrial or satellite interface
abstract: A requesting terminal includes an interface that allows a user to select whether data downloaded from a network (such as the Internet) is transmitted to the requesting terminal via a high-speed link, such as a satellite link, or a lower speed link, such as a terrestrial link. Preferably, the terrestrial link (which may comprise a conventional dial-up Internet connection) is a two-way link, wherein the requesting terminal transmits data requests to the network via the terrestrial link. The data requests generated by the requesting terminal are modified to designate whether the requested data should be downloaded from the network via the terrestrial link or the satellite link. The terrestrial link may also be automatically selected for certain applications.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=06931512&OS=06931512&RS=06931512
owner: Hughes Electronics Corporation
number: 06931512
owner_city: El Segundo
owner_country: US
publication_date: 20011113
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["RELATED APPLICATIONS","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS"],"p":["This application is a continuation-in-part of U.S. application Ser. No. 08\/257,670, filed Jun. 8, 1994, now abandoned, entitled \u201cMethod and Apparatus for Requesting and Retrieving Information From a Source Computer Using Terrestrial and Satellite Interfaces.\u201d","This application relates to a computer network and, more specifically, to a method and apparatus for allowing both high-speed and regular-speed access to a computer network.","The Internet is an example of a TCP\/IP network. The Internet has over 10 million users. Conventionally, access to the Internet is achieved using a slow, inexpensive method, such as a terrestrial dial-up modem using a protocol such as SLIP (Serial Line IP), PPP, or by using a fast, more expensive method, such as a switched 56 Kbps, frame relay, ISDN (Integrated Services Digital Network), or T1.","Users generally want to receive (download) large amounts of data from networks such as the Internet. Thus, it is desirable to have a one-way link that is used only for downloading information from the network. A typical user will receive much more data from the network than he sends. Thus, it is desirable that the one-way link be able to carry large amounts of data very quickly. What is needed is a high bandwidth one-way link that is used only for downloading information, while using a slower one-way link to send data into the network.","Currently, not all users have access to high speed links to networks. Because it will take a long time to connect all users to networks such as the Internet via physical high-speed lines, such as fiber optics lines, it is desirable to implement some type of high-speed line that uses the existing infrastructure.","Certain types of fast network links have long propagation delays. For example, a link may be transmitting information at 10 Mbps, but it may take hundreds of milliseconds for a given piece of information to travel between a source and a destination on the network. In addition, for even fast low-density links, a slow speed return-link may increase the round trip propagation time, and thus limit throughput. The TCP\/IP protocol, as commonly implemented, is not designed to operate over fast links with long propagation delays. Thus, it is desirable to take the propagation delay into account when sending information over such a link.","A first embodiment of the present invention overcomes the problems and disadvantages of the prior art by allowing a user to download data using a fast one-way satellite link, while using a conventional low-speed Internet connection for data being sent into the network.","A second embodiment of the present invention allows a user to specify for certain applications that data be downloaded from the Internet via a terrestrial link, rather than the satellite link.","According to one aspect of the present invention, a system for retrieving data from a source computer coupled to a network comprises a low-speed path linking a requesting terminal with the network, a high-speed path linking the requesting terminal with the network, and means for selecting either the low-speed path or the high-speed path for transmission of data from the source computer to the requesting terminal. In a preferred embodiment, the low-speed path is a terrestrial link, wherein the terrestrial link is a two-way link between the requesting terminal and the network comprising a serial port in the requesting terminal in communication with a SLIP provider connected to the network. The high-speed path is a satellite link, wherein the satellite link is a one-way link comprising a gateway connected to the network wherein data retrieved from the source computer is provided to the gateway via the network and transmitted to the requesting terminal via the satellite link. The requesting terminal generates a data request packet that is sent to the source computer via the terrestrial link. The selection means comprises a driver in the requesting terminal that modifies the request packet to specify either the low-speed path or the high-speed path. The selection means may also include a user interface in the requesting terminal that allows a user to specify that certain applications use the low-speed path.","According to another aspect of the present invention, a system for retrieving data from a source computer coupled to a network comprises a requesting terminal for requesting data to be retrieved from the source computer. The requesting terminal includes a terrestrial interface coupled to the network, and a satellite interface capable of receiving data transmitted via satellite link, wherein the satellite link includes a gateway coupled to the network. The requesting terminal further includes means for designating that the requested data be transmitted from the source computer to the requesting terminal through either the terrestrial interface or the satellite interface.","According to yet another aspect of the present invention, a method of retrieving data from a source computer coupled to a network comprises the steps of generating, at a requesting terminal, a request packet for transmission of data from the source computer, designating, at the requesting terminal, a transmission path selected from either a low-speed path (such as a terrestrial link) or a high-speed path (such as a satellite link) for transmission of the requested data from the source computer to the requesting terminal, providing the designated data request to the source computer, wherein the source computer generates a data reply, and receiving the data reply from the source computer via the designated transmission path.","Objects and advantages of the invention will be set forth in part in the description which follows and in part will be obvious from the description or may be learned by practice of the invention. The objects and advantages of the invention will be realized and attained by means of the elements and combinations particularly pointed out in the appended claims.","Reference will now be made in detail to the preferred embodiments of the invention, examples of which are illustrated in the accompanying drawings. Wherever possible, the same reference numbers will be used throughout the drawings to refer to the same or like parts.","I. Satellite Link","According to a first embodiment of the present invention, all information downloaded from the Internet is received via a high speed satellite link, as described in detail below.","a. General Overview","A preferred embodiment of the present invention uses satellite technology to implement a high-speed one-way link between a user's computer and a TCP\/IP network, such as the Internet or a private TCP\/IP network. This high-speed link is used to download data from the network. The user's computer also has a conventional TCP\/IP link for sending data to the network. The invention can use various forms of high-speed, one-way links, such as satellites and cable television lines. The invention can use various forms of low-speed networks, such as TCP\/IP networks, dialup telephones, ISDN D-channel, CPDP, and low-speed satellite paths.","The described embodiment of the present invention uses satellites to provide a high-speed one-way link. Satellites can cover large geographical areas and are insensitive to the distance between a transmitter and a receiver. In addition, satellites are very efficient at point-to-point and broadcast applications, and are resilient and resistant to man-made disasters. Two-way satellites are expensive to use, however, because of the costs involved in purchasing and installing the satellite earth station hardware. In the past, these costs have placed satellite communications outside the reach of the consumer.","The present invention allows a personal computer to receive downloaded information from the network via a satellite at a very practical cost. In the present invention, the cost of satellite communications is reduced because a one-way satellite link is used. Receive-only earth station equipment is cheaper to manufacture because it requires less electronics than send\/receive antennae.","As is well-know in the art, communication over the Internet and similar TCP\/IP networks is achieved through a group (suite) of protocols called Transmission Control Protocol\/Internet Protocol (TCP\/IP). The TCP\/IP protocol is described in the book \u201cInternetworking With TCP\/IP, VOL I\u201d by Douglas Comer, published by Prentice-Hall, Inc., of Englewood Cliffs, N.J., 1991, which is incorporated by reference.","b. Hybrid TCP\/IP Access",{"@attributes":{"id":"p-0041","num":"0040"},"figref":["FIG. 1","FIG. 1"],"b":["110","130","140","150","160","110","190","130","192","170","175","180","160","110","170","175","180","130","140","150","128","128","1"]},"Each of hybrid terminal , SLIP provider , application server , hybrid gateway  and satellite gateway  preferably includes a processor (not shown) that executes instructions stored in a memory (not also shown). Other parts of the invention may also include processors that are not discussed herein, such as I\/O processors, etc. Preferably, hybrid terminal , hybrid gateway , and satellite gateway  are implemented as personal computers including an 80386\/80486 or Pentium based personal computer operating at at least 33 MHz, but these elements can be implemented using any data processing system capable of performing the functions described herein. Alternatively, the functionality of both hybrid gateway  and satellite gateway  could be performed in a single gateway unit (not shown) without departing from the spirit or scope of the present invention. In the described embodiment, SLIP provider  is a conventional SLIP provider and application server  is any application server that can connect to the Internet  via TCP\/IP.","As shown in , hybrid terminal  preferably also includes application software , driver software , a serial port  for connecting hybrid terminal  to modem , and satellite interface hardware  for connecting hybrid terminal  to satellite receiver .",{"@attributes":{"id":"p-0044","num":"0043"},"figref":"FIG. 2","b":["112","114","122","120","112","212","210","114","212","210","114","210","114"]},"As shown in , application software  preferably also includes well-know Internet utilities, such as FTP, and well-known user interfaces, such as Mosaic and Gopher (shown). Application software  can also include other utilities, e.g., News and Archie (not shown).","The following paragraphs describe how a request from hybrid terminal  is carried through the Internet  to application server  and how a response of application server  is carried back to the user at hybrid terminal  via the satellite link. (As used herein, the term \u201csatellite link\u201d refers to any portion of the path between application server , the Internet , satellite gateway , satellite transmitter , satellite , satellite receiver  and hybrid terminal ). The operation of each subsystem will be described below in detail in separate sections.","In the present invention, hybrid terminal  is given two IP addresses. One IP packet address corresponds to SLIP provider  and is assigned by a SLIP service provider. The other IP address corresponds to satellite interface  and is assigned by a hybrid service provider. IP addresses are assigned by the SLIP and satellite network managers and loaded into hybrid terminal  as part of an installation configuration of the hybrid terminal's hardware and software. These two IP interface addresses correspond to completely different physical networks. SLIP provider  does not \u201cknow\u201d anything about the satellite interface IP address or even whether the user is using the satellite service. If a host somewhere in the Internet is trying to deliver a packet to the satellite IP address by using the Internet routing scheme of routers, gateways, and ARPs (Address Resolution Protocol), the only way that the packet can reach the satellite interface IP is to traverse the satellite by being routed through satellite gateway .","The following example assumes that a user at hybrid terminal  desires to send a request to a remote machine, such as application server  that is running FTP (File Transfer Protocol) server software. The FTP software running on application server  receives file transfer requests and responds to them in an appropriate fashion.",{"@attributes":{"id":"p-0049","num":"0048"},"figref":["FIG. 3","FIG. 1. A"],"b":["140","110"],"ul":{"@attributes":{"id":"ul0001","list-style":"none"},"li":["1) Within hybrid terminal , FTP client software  generates a request and passes it to TCP\/IP software . TCP\/IP software  places the request in a TCP packet (see FIG. ). Next, the TCP packet is placed in an IP packet, having a format shown in FIG. . TCP\/IP software  places the IP packet in an Ethernet packet, as shown in , and passes the Ethernet packet to driver . This packet has a source IP address corresponding to satellite interface  and a destination IP address of application server . Ethernet is a packet switching protocol standardized by Xerox Corporation, Intel Corporation, and Digital Equipment Corporation, which is described in \u201cThe Ethernet\u201d A Local Area Network Data Link Layer and Physical Layer Specification,\u201d September 1980, which is available from any of these three companies, and which is incorporated by reference.","2) In driver , the Ethernet header and checksum are stripped off the packet and the IP packet is encapsulated, or \u201ctunneled,\u201d inside of another IP packet, and sent over serial port  to SLIP provider .  shows a format of a tunneled packet.  shows an example of a tunnelled packet. The encapsulation adds a new IP header  in front of the original packet  with a source address corresponding to SLIP provider  and a destination address corresponding to hybrid gateway .","3) SLIP provider  receives the IP packet, analyzes the tunneling header and, thinking it is destined for hybrid gateway , uses standard Internet routing to send the packet to hybrid gateway .","4) When hybrid gateway  receives the packet, it strips off the tunneling header, revealing the true header with application server  as the destination. The packet is then sent back out into the Internet .","5) Internet routing takes the packet to application server , which replies with the requested file and addresses the reply to the request's source IP address, i.e., the IP address of the hybrid terminal's satellite interface .","6) In order to find the hybrid terminal's satellite interface , the Internet routing protocol will send the packet to the subnet containing a router\/gateway connected to hybrid gateway . When a router on the same physical network as satellite gateway  and hybrid gateway  sends out an ARP for the IP address of satellite interface  (to find a physical address of satellite interface ), hybrid gateway  responds and says \u201csend it to me.\u201d Thus, application server  and the rest of the Internet  think that packets sent to hybrid gateway  will reach the hybrid terminal's satellite interface.","7) Once hybrid gateway  receives a reply packet from application server , it sends it to satellite gateway . In the described embodiment, hybrid gateway  encapsulates the packet in a special packet format that is used over the satellite link and uses the satellite interface IP address to uniquely identify the satellite packet's destination. Then hybrid gateway  sends the packet over the Ethernet to satellite gateway .","8) Satellite gateway  broadcasts over the satellite link any packets it receives from hybrid gateway .","9) Driver  in hybrid terminal  that services satellite interface  scans all packets broadcast over satellite transmitter  looking for its satellite interface IP address in the header. Once it identifies one, it captures it, strips off the satellite header revealing the reply IP packet, and sends it to driver ."]}},"Thus, IP packets sent into Internet  are carried by the SLIP connection, while IP packets from the Internet  are carried by the satellite link. The following paragraphs describe the operation of each subsystem in more detail.","1. The Hybrid Terminal","Hybrid terminal  is the terminal with which the user interacts. Thus, hybrid terminal  preferably includes a user interface device (not shown) such as a mouse, keyboard, etc. As shown in , hybrid terminal  includes one or more application programs  (including TCP\/IP software ), and driver software , which communicates with SLIP provider  through a serial port  and modem , using a serial driver portion , and which communicates with satellite receiver  through a satellite interface , using a driver portion .","To TCP\/IP software , driver  appears to be an Ethernet card, although driver  is actually connected to satellite receiver  (via satellite interface ) and to SLIP provider  (via serial line  and modem , respectively). Thus, TCP\/IP software  believes that it is communicating with a single physical network, when it is, in reality, communicating with two physical networks (the SLIP dial up network and a satellite network).",{"@attributes":{"id":"p-0054","num":"0062"},"figref":["FIG. 6","FIG. 6"],"b":["114","110","1","114","210","130","122","190","140","180","120","220","114","210"]},"The following paragraphs discuss two basic functions performed by driver  (tunneling and ARP handling) and discuss various implementation details for the preferred embodiment.","A. \u201cTunnelling\u201d","As discussed above, hybrid terminal  has two IP addresses associated with it: one for SLIP provider  and one for the satellite interface . Packets containing requests are sent from hybrid terminal  to application server  via the Internet , while packets containing a reply are sent back via the satellite link. Tunneling is the method by which application server  is \u201cfooled\u201d into sending a reply to a different IP address (satellite interface ) than that of the sender (serial port ).","A packet received by driver  from the TCP\/IP software  has a source address of satellite gateway  and a destination address of application server . As shown in step  of , driver  removes the Ethernet header and checksum and encapsulates the IP header into an IP tunnelling header having a source address of SLIP provider  and a destination address of hybrid gateway  (see FIG. ). As described above, at hybrid gateway , the tunnelling header is removed and the packet is sent back into the Internet  to be sent to application server .","When forming a tunneling header, driver  copies all the values from the old header into the new one with the following exceptions. The source and destination addresses of the tunneling header change, as described above. In addition, a total packet length field  is changed to contain the contents of length field  plus the length of the tunneling header. Lastly, the driver  recalculates checksum  of the tunneling header because some of the fields have changed.","B. ARP Handling","ARP (Address Resolution Protocol) is used by TCP\/IP to dynamically bind a physical address, such as an Ethernet address, to an IP address. When TCP\/IP finds an IP address for which it does not know a physical address, TCP\/IP broadcasts an ARP packet to all nodes, expecting a response that tells TCP\/IP what physical address corresponds to the IP address.","During initialization, driver  declares to TCP\/IP software  that driver  is an Ethernet card to ensure that the packets that TCP\/IP package sends are Ethernet packets and that the TCP\/IP package will be prepared to receive packets at a high-rate of speed. As shown in step  of FIG. , when driver  detects that TCP\/IP has sent an ARP packet, driver  creates a physical address and sends a reply packet to TCP\/IP software . The contents of the physical address are irrelevant, because driver  strips off the Ethernet header on packets from TCP\/IP before the packets are sent to SLIP provider .","C. Other Functions","As shown in step  of , packets received by driver  from satellite receiver  (via satellite driver ) are passed to TCP\/IP software . The following paragraphs discuss implementation details for the described embodiment.","In a preferred embodiment, TCP\/IP software  (e.g., Frontier's SuperTCP) sends an ACK (acknowledge) for every packet it receives, even though this action is not required by the TCP\/IP protocol. In this situation, many packets compete for the slow link to SLIP provider . In TCP\/IP, the ACK scheme is cumulative. This means that when a transmitter receives an ACK stating that the receiver has received a packet with sequence number N, then the receiver has received all packets with sequenced numbers up to N as well, and there is no reason why every packet needs to be ACK'ed.",{"@attributes":{"id":"p-0066","num":"0074"},"figref":["FIG. 8","FIG. 11","FIG. 11","FIG. 8"],"b":["114","110","1102","1104","1106","810","114","210","130","820","114","830","114"]},"Serial port  provides a physical connection to modem  and, through it, to the terrestrial network via a SLIP protocol as described below in connection with SLIP provider . Serial data is sent and received through an RS-232 port connector by a UART (Universal Asynchronous Receiver Transmitter), such as a U8250, which has a one byte buffer and is manufactured by National Semiconductor, or a U16550, which has a 16 byte buffer and is also manufactured by National Semiconductor.","The invention preferably operates under the DOS operating system and Windows, but also can operate under other operating systems.","Satellite driver software  receives packets from satellite , and passes them to driver  using a DOS call. Thus, the two physical links are combined within driver  and the existence of two physical links is transparent to TCP\/IP software . Satellite driver  scans all packets transmitted over the satellite channel for a packet with a header corresponding to the IP address of the satellite interface , performs some error detection and correction on the packet, buffers the received packet, and passes the packet to driver  using a DOS call, e.g., IOCTL-output-cmd( ). Driver  copies data from satellite driver  as quickly as possible and passes it to TCP\/IP software .","As discussed above, TCP\/IP software  is fooled into thinking that it is connected to an Ethernet network that can send and receive at 10 Mbps. This concept is helpful on the receive side because data from the satellite is being received at a high rate. On the transmit side, however, modem  is not capable of sending at such a high rate. In addition, TCP\/IP software  sends Ethernet packets to driver , i.e., an IP packet is encapsulated into an Ethernet packet. Because SLIP provider  expects IP packets, driver  must strip the Ethernet header before the packet is sent to SLIP provider .","As described above in connection with , driver  also includes a transmit and receive queue. As data is received from TCP\/IP software  and received from the satellite driver , it is buffered within the queue. When the queue is full, e.g., when TCP\/IP is sending packets faster than modem  can send them, driver  drops the packets and returns an error so that TCP\/IP software  will decrease its rate of transmission.","In a first preferred embodiment, a SLIP connection is initiated with an automatic logon procedure. In another preferred embodiment, driver  executes instructions to allow a user to perform a SLIP logon manually.","Because TCP\/IP software  preferably is configured to talk to the Ethernet and it is desirable to receive the largest packet size possible, driver  configures TCP\/IP so that the MTU (Maximum Transmission Unit) of the network is as large as possible, e.g., 1500 bytes. Some SLIP providers  have a smaller MTU, e.g., 512 bytes. To handle the disparity in size, driver  segments large packets received from TCP\/IP software  into segments the size of the SLIP MTU. Once a packet is segmented, it is reassembled in hybrid gateway . Only the tunnelling header is copied as the header of the segments.","2. The SLIP Provider","SLIP provider  performs the function of connecting hybrid terminal  to the Internet . As described above, other protocols, such as PPP (point to point protocol), could also be used to perform the connecting function. SLIP server  receives SLIP encoded IP packets from modem , uncodes them, and forwards them to hybrid gateway  via the Internet .","In its most basic form, SLIP provider  delimits IP packets by inserting a control character such as hex OxCO-SLIP between them. To insure that a data byte is not mistaken for the control character, all outgoing data is scanned for instances of the control character, which is replaced by a two character string. The SLIP protocol is described in detail in J. Romkey, \u201cA Nonstandard for Transmission of IP Datagrams over Serial Lines: SLIP,\u201d RFC 1055, June 1988, pp. 1-6, which is incorporated by reference.","3. The Application Server","Application server  is a computer system running any combination of known application programs available on the Internet  using the TCP\/IP protocol suite. For example, application server  may transfer files to requesting users via FTP. In this regard, application server  may be thought of as a host computer. Although hybrid terminal  actually has two IP addresses (a serial port address and an address for the satellite interface), the software executing on application server  thinks that it is receiving requests over the satellite network and sending responses over the satellite network. Hybrid terminal  is completely transparent to application server .","4. The Hybrid Gateway","Although only one hybrid terminal  is shown in , the invention can include a plurality of hybrid terminals . Preferably, all packets sent from all hybrid terminals  pass through hybrid gateway  to get untunnelled. Thus, hybrid gateway  is a potential system bottleneck. Because of this potential bottleneck, the functions of hybrid gateway  are as simple as possible and are performed as quickly as possible. Hybrid gateway  also has good Internet connectivity to minimize the accumulated delay caused by packets waiting to be processed by hybrid gateway .","A. Untunnelling",{"@attributes":{"id":"p-0082","num":"0090"},"figref":"FIG. 9","b":["150","1","910","150","5","150","128"]},"As described above, packets are sometimes broken into segments when they are sent in order to accommodate a small MTU of SLIP provider . Packets may also be segmented as they pass through other elements of the Internet  having small MTUs. For fragmented packets, only the tunnelled header is copied into the header of each segment. Hybrid gateway  stores fragmented packets in a memory (not shown) and reassembles them in order before untunnelling the original packet and passing it to the Internet . Preferably, a \u201ctime to live\u201d value is assigned to each packet when it is sent by driver  and if all segments do not arrive before a time to live timer expires, the packet is discarded.","B. ARP Responding","Preferably, satellite gateway  is on a same physical network as hybrid gateway . As shown in step  of , when a router on the same physical network as satellite gateway  and hybrid gateway  sends out an ARP for the IP address of satellite gateway  (to find a physical address of satellite gateway ), hybrid gateway  responds and says \u201csend it to me.\u201d Hybrid gateway  needs to intercept packets intended for satellite gateway  because it needs to encapsulate packets for satellite gateway  as follows.","C. Satellite Packetizing","The following paragraphs describe how packets travel from application server  through hybrid gateway  and to satellite gateway . The following explanation is given by way of example and is not intended to limit the scope of the present invention. As shown in step  of , hybrid gateway  encapsulates replies from application server  into a satellite packet format.  is a diagram showing a format of a satellite packet sent to satellite gateway  of  satellite packet includes the data  of an original IP packet and two headers ,  added by hybrid gateway .","Satellite gateway  expects IP packets to be encapsulated first in a special satellite packet and then within an LLC-1 IEEE 802.2 link level control, type  packet. Satellite header  identifies the downlink and contains a sequence number and the packet length. An LLC-1 header  preferably is used to send the packet to satellite gateway , in an Ethernet LAN. Hybrid gateway  prepares packets for satellite gateway  by appending headers  and  to the front of an IP packet .","The receiver in hybrid terminal  does not receive the LLC-1 header . Hybrid terminal  identifies packets intended for it by checking a least significant byte in the satellite IP address. Thus, a six byte satellite destination address is determined by reversing an order of bytes of the satellite IP address for hybrid terminal  and then padding the rest of the address with zeroes.","5. The Satellite Gateway","Satellite gateway  can include any combination of hardware and software that connects satellite transmitter  to hybrid gateway . Satellite transmitter  and satellite receiver  can be any combination of hardware and software that allows data to be transmitted by satellite transmitter  and received by satellite receiver , and to be input to hybrid terminal . For example, satellite gateway  preferably is a personal computer with a high-speed Ethernet connection to hybrid terminal . When satellite gateway  receives a packet from hybrid gateway , it sends it over the satellite link.","Satellite communication may be effected by, for example, the Personal Earth Station designed and manufactured by Hughes Network Systems, Inc. In a preferred embodiment, a one-way version of the Personal Earth Station is used. Another embodiment uses a satellite communication system manufactured by Comstream. Yet another embodiment uses a system that allows hybrid terminal  to be connected directly to satellite receiver  via Hughes Network Systems' DirecPC product. The DirecPC satellite interface card is described in \u201cDirecPC, Phase A Data Sheet,\u201d dated Jun. 7, 1993, which is incorporated by reference and by the inclusion of its contents which read as follows:\n\n","At the downlink, satellite receiver  includes a 0.6 meter receive-only antenna receiving HDLC encapsulated LAN packets. Satellite interface  includes rate \u2154 Viterbi\/Reed-Soloman concatenated forward error correction.","Although only one hybrid terminal  and one application server  are shown in , the invention can include a plurality of hybrid terminals  and\/or a plurality of application servers . Preferably, all packets sent from all application servers  to a hybrid interface  pass through a satellite gateway . Thus, satellite gateway  is a potential system bottleneck. Because of this potential bottleneck, the functions of satellite gateway  are as simple as possible and are performed as quickly as possible.","c. Protocol Spoofing","TCP\/IP protocol specifies that only a predetermined number of packets can be outstanding during transmission, i.e., that only a limited number of packets can be sent before an ACK (acknowledgment) is received. The high bandwidth and long delays incurred in sending packets to an orbiting satellite and back means that at any given time, a large number of packets may be \u201cin the pipe\u201d between transmitter and receiver.","When using conventional TCP\/IP protocol, application server  sends a predetermined number of packets in accordance with a predetermined window size, and then waits to receive ACKs over the modem link before sending additional packets. The purpose of windowing is to limit a number of packets that must be re-sent if no ACK is received and to provide flow control, e.g., to prevent sending packets faster than they can be received. The packets that have not been ACK'ed are stored in a memory so that they can be re-sent if no ACK is received.","In a preferred embodiment of the present invention, hybrid gateway  \u201cspoofs\u201d application server  to improve the throughput over the satellite link. Specifically, hybrid gateway  sends an ACK to application server , even though a corresponding packet may not have been received by hybrid terminal  via the satellite at the time.",{"@attributes":{"id":"p-0099","num":"0158"},"figref":["FIG. 12","FIG. 12","FIG. 12"],"b":["140","150","110","140","1","150","150","140","150","1","110","110","1","150","150","110"]},"FIGS. () through () are flowcharts of steps performed by hybrid gateway  of  during protocol spoofing. In step  of FIG. (), hybrid gateway  receives a packet from application server  indicating that a new connection is being formed between application server  and hybrid terminal . In step , hybrid gateway  sets up a queue or similar data structure in memory to save un-ACK'ed packets for the new connection. FIG. () shows corresponding steps performed by hybrid gateway  when the connection is closed. Hybrid gateway  receives a packet indicating the closure in step  and deletes the queue and saved values for the connection in step .","In step  of FIG. (), hybrid gateway  fails to receive an ACK for a packet number X from hybrid terminal  before an end of a predetermined timeout period. Hybrid gateway  maintains a timer for each un-ACK'ed packet. At the end of the predetermined period, hybrid gateway  retransmits a packet corresponding to the expired timer. In step , hybrid gateway  resends packet number X, which it previously saved in the memory queue for this connection (see FIG. () below).","In step  of FIG. (), hybrid gateway  receives a packet from application server . In step , hybrid gateway  sends the received packet to satellite gateway , where it is transmitted over the satellite link, and saves the packet in case it needs to be retransmitted (see FIG. ()). Hybrid gateway  then creates an ACK packet to send to application server  in step . The created ACK packet incorporates a format shown in FIG. . Hybrid gateway  creates an ACK number for field . The ACK number is determined as follows:","Hybrid gateway  saves the following information for each connection:\n\n","When hybrid gateway  inserts the ACK number in the packet, it also calculates the packet's checksum .","In step  of FIG. (), hybrid gateway  receives an ACK packet over the modem link from hybrid terminal . In step , hybrid gateway  removes from the queue the packet for which the ACK was received. Because an ACK was received, the packet does not need to be re-sent. In the TCP\/IP protocol, a packet containing an ACK may or may not contain data. Hybrid gateway  edits the received packet to replace the packet's ACK number  with a \u201cspoofed\u201d ACK number in step . The spoofed ACK number is determined in the same way as the ACK number in step  of FIG. (). When hybrid gateway  substitutes the spoofed ACK number  in the packet, it also recalculates the packet's checksum  in step .","In step , hybrid gateway  forwards the received ACK packet to application server . Application server  may simply disregard the packet if it contains an ACK and no data. In another embodiment, hybrid gateway  simply discards a packet received from hybrid terminal  that contains an ACK, but no data.","If the connection goes down, either explicitly or after a predetermined period of time, hybrid gateway  deletes the saved packets for the connection.","d. Summary","In summary, the present invention allows a personal computer to send messages into the Internet using a conventional dial-up link and to download data from the Internet using a high-speed one-way satellite link. In a preferred embodiment, the invention uses a conventional SLIP provider to connect to the Internet and uses a commercial software TCP\/IP package that has a standard driver interface. A spoofing protocol compensates for the long propagation delays inherent to satellite communication.","II. Selective Satellite or Terrestrial Link","According to a second embodiment of the present invention, information downloaded from the Internet may be selectively received via a high-speed link, or a lower speed link, such as a terrestrial link, as described in detail below. In a preferred embodiment, the high-speed link is a satellite link. It is understood, however, that other high speed links, such as cable television lines or the like, may be used. Similarly, the terrestrial link may be any low-speed network, such as a TCP\/IP network, dial-up telephone, ISDN D-channel, or CPDP.","a. General Overview","As set forth above, the use of the satellite link to download information from the Internet has many advantages, such as high bandwidth capability. There may be some applications, however, when a user may prefer to use a terrestrial link, rather than a satellite link, to download information from the Internet. For example, because of the distance of the satellite from earth, the response time using a satellite link may be approximately 600 ms, as opposed to approximately 300 ms for a terrestrial link. Thus, in applications which are sensitive to response time, such as Telnet or domain name look-ups, a terrestrial link may be preferred.","Also, a user of the satellite link is generally charged based on the amount of time the satellite link is used. Thus, in order to control costs of the satellite link service, a user may prefer to use a terrestrial link for applications, such as Progressive Networks and Real Audio, where the high bandwidth and speed of the satellite link is not important but the amount of total traffic (measured in megabytes) is great.","Further, many Internet dial-up service providers offer value-added services (such as Usenet news or customer service evaluations) that are only accessible by their subscribers. Many of these providers verify that a user is a subscriber by checking the source IP address of the user's request. Because the satellite link effectively changes the source IP address of the request, the provider will not recognize the request and, consequently, the user may not be able to access the value-added services. Thus, a user may prefer to use a terrestrial link (which does not effect the source IP address) in order to access certain value-added services.","Therefore, the second embodiment of the present invention allows a user to selectively bypass the above-described satellite link and use a terrestrial link to retrieve information from the Internet.","b. Selecting the Terrestrial Link","In a preferred embodiment, the hybrid terminal  includes a graphical user interface (GUI) which allows a user to select a list of applications that will use the terrestrial link, rather than the satellite link, for retrieving information from the Internet . An example of a user interface  is shown in FIG. . The interface  allows a user to select which applications will use the terrestrial link (referred to hereafter as \u201cterrestrial applications\u201d). For example, applications such as Telnet, Finger and Ping, which require fast response time but low bandwidth, may be selected to use the terrestrial link. The hybrid terminal  may also be configured such that these applications (and\/or other applications) are routed through the terrestrial link by default.","Each application is assigned a specific TCP\/UDP (transmission control protocol\/user datagram protocol) port number (designated by reference number  in FIG. ). For example, web browsing applications are assigned to port no. , telnet applications are assigned to port no. , etc. A user may select terrestrial applications by specifying the TCP\/UDP port number (or another type of protocol identification number, if applicable) for the application. A user may change the list of selected terrestrial applications at any time.","Preferably, the graphical user interface of the hybrid terminal  also allows the user to designate one or more IP address ranges, when such address ranges can only be accessed terrestrially. For example, the designated address range could correspond to the addresses of the ISP value-added services. The hybrid terminal  would route any data packet with a destination address falling within a designated address range over the terrestrial link.","Preferably, even if an application was not prespecified by a user as a terrestrial application, a user may specify \u201con-the-fly\u201d that all applications should be routed over the terrestrial link. This may be implemented, for example, by incorporating a pull-down menu in the user interface which allows a user to specify all applications as terrestrial. Once specified, all information retrieved from the Internet would be received over the terrestrial link until the user specifies that only the pre-selected applications should use the terrestrial link. A user may also be able to specify \u201con-the-fly\u201d that a single application be routed over the terrestrial link.","Further, the hybrid terminal  could be modified to automatically select the terrestrial link if, for example, the satellite link malfunctions. The satellite receiver  is able to detect a loss of receive signal that may be caused, for example, by rain attenuation, antenna misalignment, system failures, etc. Upon detecting a failure in the satellite link, the hybrid terminal could automatically switch to the terrestrial link. Similarly, if the hybrid gateway  detects that the satellite link is congested or overloaded, it could route a portion of the data over the terrestrial link in order to relieve the congestion. Selected data packets received by the hybrid gateway for transmission over the satellite link could be modified and returned to the Internet for re-routing over the terrestrial link.","The selective satellite or terrestrial link also serves as a trouble shooting tool in the system. Thus, problems with the terrestrial link (such as with the dial-up ISP) can be isolated from the satellite service equipment. The satellite link may serve as a back-up if the terrestrial link fails, and vice versa.","c. The Terrestrial Link","Referring to the hardware diagram of , the subsystems for the second embodiment of the invention remain unchanged, except that the software in driver  in the hybrid terminal  is modified to allow for selective use of the satellite link or the terrestrial link to retrieve information from the Internet . (The modified driver will be referred to as driver A). The terrestrial link comprises the path from application server  to the Internet  to the serial port  in the hybrid terminal  via the SLIP provider  and the modem . The SLIP provider  may alternatively be a PPP (point to point protocol) provider.",{"@attributes":{"id":"p-0125","num":"0190"},"figref":"FIG. 15","b":["128","110","140","110","114","110","150","128","150","128","140"]},"The satellite reply path for sending a reply from the application server  to the hybrid terminal  via the satellite link is shown by the solid arrows labeled \u201cB\u201d in FIG. . As explained in detail above, the application server  is \u201cfooled\u201d into sending reply packets to the hybrid terminal  through the hybrid gateway  and the satellite link, rather than returning the reply packets to the sender (i.e. SLIP provider ).","The terrestrial request path for sending a request from the hybrid terminal  to the application server , wherein the response is to be returned via the terrestrial link, is shown by the dashed arrows labeled \u201cC\u201d in FIG. . Like the satellite request path \u201cA\u201d, the hybrid terminal  sends a data request packet to the SLIP provider . Unlike the satellite request packet, however, the driver A does not tunnel the request packet to the hybrid gateway . Instead, in the terrestrial request path \u201cC\u201d, the request is routed directly from the SLIP provider  to the application server  via the Internet .","The terrestrial reply path from the application server  to the hybrid terminal  via the terrestrial link is shown by the dashed arrows labeled \u201cD\u201d in FIG. . The terrestrial reply path \u201cD\u201d is the reverse of the terrestrial request path \u201cC\u201d. Thus, the application server  sends the reply packets directly to the SLIP provider  via the Internet . The SLIP provider  then transmits the reply packets to the hybrid terminal .","d. Packet Handling for the Terrestrial Link","The following paragraphs describe how the request and reply packets are manipulated for transmitting packets via the terrestrial link.  is a simplified block diagram illustrating the relationship between the TCP\/IP software  (included in application software ), the software in the modified satellite\/terrestrial driver A, the serial port , and the satellite interface  in the hybrid terminal .","As described in detail above, the TCP\/IP software  generates a request packet and provides the request packet to the driver A.  is a simplified diagram of an original request packet sent from the TCP\/IP software  to the driver A. Referring also to , the point \u201cA\u201d represents the original request packet shown in FIG. A. As explained in detail above, the original request packet generated by the TCP\/IP software  has a destination address (DA) of the application server  and a source address (SA) of the satellite interface . The original request packet also includes an IP header checksum (the sum of the numbers making up the source and destination addresses) and a TCP\/UDP checksum (the sum of the numbers making up the entire packet). The checksums are used to determine whether the packets have been accurately transmitted, without corruption of the addresses or data. The original request packet also includes the request data.","Also, as explained in detail above, if the request is to be returned via the satellite link (i.e. the user has not designated the application generating the request as a terrestrial application), the driver A \u201ctunnels\u201d the packet inside another packet and sends the tunneled packet over the serial port  to the SLIP provider . The tunneled packet, which is shown in FIG. B and represented by point \u201cB\u201d on , includes a new destination address corresponding to the hybrid gateway  and a new source address corresponding to the SLIP provider . The tunneled packet also includes a new IP header checksum corresponding to the new destination and source addresses. The remainder of the tunneled packet comprises the original request packet provided to the driver A from the TCP\/IP software .","Alternatively, if the user has selected the application generating the request as a terrestrial application, the driver A does not \u201ctunnel\u201d the packet. Instead, as shown in FIG. C and represented by point \u201cC\u201d on , the driver A changes the source address of the original request packet from the satellite interface to the SLIP provider. The destination address (corresponding to the application server) and the request data remain the same as in the original packet. The IP header checksum and TCP\/UDP checksum are also modified consistent with the change of the source address.","The terrestrial request packet of  is routed via the terrestrial request path (path \u201cC\u201d in FIG. ). The SLIP provider  receives the packet from the serial port  and sends the packet to the destination address (i.e. the application server ) via standard Internet routing. The application server , in turn, responds to the request by sending a terrestrial reply packet, as shown in FIG. D. The application server  addresses the reply packet to the source address of the request (i.e. the SLIP provider ). Thus, the terrestrial reply packet from the application server  has a destination address corresponding to the SLIP provider  and a source address corresponding to the application server . The terrestrial reply packet also contains an appropriate IP header and TCP\/UDP checksum and the reply data.","The terrestrial reply packet is sent from the application server  via standard Internet routing to the SLIP provider . The SLIP provider  then sends the reply packet to the serial port  in the hybrid terminal . The terrestrial reply packet provided to the serial port  is represented by point \u201cD\u201d on FIG. .","The driver A receives the terrestrial reply packet from the serial port  and modifies the reply packet by changing the destination address from the SLIP provider to the satellite interface, as shown in FIG. E. The driver A changes the destination address to the satellite interface because, as described in detail above, the TCP\/IP software  is configured with an IP address corresponding to thee satellite interface. Thus, the TCP\/IP software will not recognize the terrestrial reply packet unless the reply packet includes the proper IP address of the satellite interface for the TCP\/IP software. The driver A also changes the IP header checksum and the TCP\/UDP checksum consistent with the new destination address. The modified terrestrial reply packet is represented by point \u201cE\u201d on FIG. .","e. Automatic Selection of the Terrestrial Link","As described above, the hybrid gateway  may automatically route applications over the terrestrial link if, for example, the satellite link becomes congested. The hydrid gateway  may also automatically select the terrestrial link if a \u201cstreaming\u201d application is used. A streaming application is a continuously running application (such as audio, video, slide shows, etc.) as opposed to applications which run in segments or bursts (such as web browsing). Streaming applications generally occupy an inordinate share of the satellite link, which may become prohibitively expensive for the user. Therefore, the hybrid gateway  may be configured to automatically detect packets which are part of a streaming application and route them over the terrestrial link.","The hybrid gateway  may detect a streaming application for routing over the terrestrial link by examining the header on the data packet. Generally, UDP (user datagram protocol) packets are part of a streaming application. Thus, the hybrid gateway  could assume that all UDP packets are streaming applications and route them over the terrestrial link.","Alternatively, the hybrid gateway  could detect streaming applications by monitoring the traffic characteristics of TCP connections. Generally, streaming applications run for an extended period of time at a bit rate consistent with a conventional dial-up connection (i.e., under 30 Kbit\/sec). Also, any connection which has carried more than, for example, 12 Megabytes may be assumed to be a streaming application. Thus, the hybrid gateway  could automatically route packets with these traffic characteristics over the terrestrial link.","As described in section (e) above, the hybrid gateway  could automatically route selected packets over the terrestrial link by changing the destination address of the packet to the SLIP provider and recalculating the IP header and TCP\/UDP checksums accordingly. Thus, the hybrid gateway modifies the packet into a terrestrial reply packet as shown in FIG. D. This reply packet is then sent via standard Internet routing to the SLIP provider . The SLIP provider , in turn, sends the packet to the driver A in the hybrid terminal  via the serial port . The driver A receives the reply packet and changes the destination address to the satellite interface and recalculates the checksums, as described above in connection with FIG. E.","f. Summary","The second embodiment of the invention allows a user to specify that certain applications will retrieve data from the Internet over the terrestrial link, rather than over the satellite link. Generally, a user may prefer to use the terrestrial link for applications (such as Telnet) that require faster response time. The user may also select the terrestrial link to control costs associated with the satellite link or to access certain value-added services. The hybrid gateway may also automatically select certain applications such as streaming applications, to be routed over the terrestrial link. Data is routed over the terrestrial link by modifying the IP addresses of data packets in the hybrid terminal.","Other embodiments of the invention will be apparent to those skilled in the art from consideration of the specification and practice of the invention disclosed herein. It is intended that the specification and examples be considered as exemplary only, with the true scope of the invention being indicated by the following claims:"],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The accompanying drawings, which are incorporated in and constitute a part of this specification, illustrate several embodiments of the invention and, together with the description, serve to explain the principles of the invention.",{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":["FIG. 2","FIG. 1"]},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":["FIG. 6","FIG. 1"]},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":["FIG. 8","FIG. 1"]},{"@attributes":{"id":"p-0023","num":"0022"},"figref":["FIG. 9","FIG. 1"]},{"@attributes":{"id":"p-0024","num":"0023"},"figref":["FIG. 10","FIG. 1"]},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 12"},"FIGS. () through () are flowcharts of steps performed by the hybrid gateway of ;",{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 16"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIGS. 16A-16E","b":"16"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIGS. 17 and 18"}]},"DETDESC":[{},{}]}
