---
title: Adaptive transport TCP/IP phone management
abstract: A wireless communication device, comprising one or more intra-device modules, an internet protocol (IP) router for providing inter-device connectivity between a host and the intra-device modules, and one or more transport mechanisms, for coupling the IP router to the host. One or more intra-device modules are accessed via a standard internetwork protocol as if the intra-device modules were local servers.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=06847819&OS=06847819&RS=06847819
owner: Qualcomm Incorporated
number: 06847819
owner_city: San Diego
owner_country: US
publication_date: 20000131
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS","Conclusion"],"p":["1. Field of the Invention","The present invention relates generally to the field of mobile communications. More particularly, the present invention relates to a mechanism that allows a phone or other wireless device to offer services as if it were an Internet device.","2. Related Art","Currently, all popular desktop, portable computer, and personal digital assistant (PDA) operating systems restrict access to one serial port for a single owner application or process. This is done because the nature of data transmitted over a serial link makes multi-process access unpredictable. Use of the serial port for data communications precludes use of the serial port for simultaneous access to other information and vice versa.","Similar problems arise with communication devices that integrate multiple functions, such as cellular telephones that integrate personal digital assistants (PDAs). Such devices implement a single pipe between the phone related circuitry and the PDA related circuitry. With such devices, there is an inability to display phone status information, such as signal and battery strength, during data calls. When the single pipe between the phone related circuitry and the PDA related circuitry is being used by a PDA's TCP\/IP stack, the pipe is prevented from being used to query status information.","Vendors, such as QUALCOMM, Inc., have developed mechanisms to overcome the problem of single access to the pipe, but these mechanisms are proprietary, and thus only available to that specific vendor. The specifications are not made publicly available.","What is needed is a method and apparatus for enabling simultaneous access to module and data services operating within electronic devices (that is, intra-device module and data services) under operating systems with existing PPP drivers. What is further needed is a method and apparatus for providing access to module and data services by multiple applications simultaneously. What is also needed is a method and apparatus for providing simultaneous access to module and data services that fosters communication between devices with diverse hardware architectures and accommodates multiple computer operating systems.","The present invention satisfies the above mentioned needs by providing a mechanism that allows a phone or other wireless device to offer services as if it were an Internet device using an open standards mechanism, such as TCP\/IP. The present invention is a wireless communication device that comprises one or more intra-device modules, an IP router for providing inter-device connectivity between a host and the intra-device modules, and one or more transport mechanisms, for coupling the IP router to the host. One or more intra-device modules are accessed via a standard internetwork protocol as if the intra-device modules were local servers.","An advantage of the present invention is its ability to provide wireless communications. The present invention also enables many devices having serial ports to operate as if they were wireless devices. The present invention also provides simultaneous access to module and data services by virtualizing the transport mechanisms used to access the wireless device. In other words, the software for accessing the transport mechanisms uses the same application programming interface (API) regardless of the transport mechanism utilized.","Further features and advantages of the invention, as well as the structure and operation of various embodiments of the invention, are described in detail below with reference to the accompanying drawings.","While the present invention is described herein with reference to illustrative embodiments for particular applications, it should be understood that the invention is not limited thereto. Those skilled in the art with access to the teachings provided herein will recognize additional modifications, applications, and embodiments within the scope thereof and additional fields in which the present invention would be of significant utility.","Conventional mechanisms allow external devices to gain access to module services via an asynchronous high level data link control (HDLC) mechanism accessed using a direct RS-232 link.  represents an exemplary mechanism  for providing RS-232 access to module services on a cellular telephone from a computer. Mechanism  is comprised of a cellular telephone , a computer , and an RS-232 data cable . Computer  is a portable computer, such as a laptop computer. Alternatively, computer  can also be a desktop computer. RS-232 cable  provides a direct physical connection between cellular telephone  and computer .","Cellular telephone  comprises, inter alia, a diagnostic manager  and a serial port . Diagnostic manager  is an exemplary module service that monitors and detects faults before they become serious. Diagnostic manager  gathers information as to what the air interface is picking up from cellular telephone  and enables an application or user interface on cellular telephone  to view the information. Serial port  is an input\/output port that receives and transmits data, respectively, one bit at a time.","Computer  comprises, inter alia, a serial interface device driver (serial.vxd) , an application programming interface (API) , and an application . Serial interface device driver  alters the parallel arrangement of data within computer  to the serial form used in transmitting data to cellular telephone  and vice versa.","Communication between cellular telephone  and application  is provided via serial interface device driver . Application  is typically a proprietary software program that communicates with cellular telephone  and diagnostic manager . Application  communicates with device driver  using file input\/output (I\/O) mechanisms, such as WIN 32. Cellular telephone  is placed into a diagnostic mode by transmitting a special AT command string. Application  employs an asynchronous HDLC framing mechanism to transmit requests to and obtain responses from cellular telephone . HDLC is an ITU-TSS link layer protocol standard for point-to-point and multi-point communications. HDLC specifies where a data packet begins and ends, and is well known to those skilled in the relevant art(s).","Mechanism  provides one RS-232 link (link ) for both data communications and diagnostic manager  transactions. The use of RS-232 link  for data communications precludes use of link  for simultaneous diagnostic manager  transactions and vice versa.",{"@attributes":{"id":"P-00032","num":"00032"},"figref":"FIG. 2","b":["200","102","110","108","110","202","112","110","204","204","204","110","208","210"]},"Link  cannot be used when serial link  is in use by dialup networking facility (PPP ). The dialup networking facility provided on MS-Windows 95 and NT systems grabs serial port  for the duration of the connection to remote PPP server  to prevent port contention while the network data link is established.","The present invention is a mechanism that allows a wireless device, such as phone , to access various modules of the wireless device as a virtual Internet service. The present invention decouples the requirement for a direct serial link. The present invention also decouples the device from the user interface and from the mechanisms normally used to gain access to any of the modules that are on the wireless device in a manner that is consistent with the way any internet host works. This is accomplished by using an established open standard protocol mechanism, such as transmission control protocol\/internet protocol (TCP\/IP). Although the present invention is described as employing the TCP open standards routing protocol, the present invention is not limited to the TCP routing protocol. One skilled in the relevant art(s) would know that other established open standard routing protocols, such as User Datagram Protocol (UDP), could be used without departing from the scope and spirit of the invention.",{"@attributes":{"id":"P-00035","num":"00035"},"figref":"FIG. 3","b":["300","302","304","306","304","302","306","304","302","300","304","308","302","306","304","308","306"]},"Typically, TCP\/IP networks allow devices on that network to communicate amongst each other. Each device is assigned an address that is universally recognized throughout the network. Information sent over the network is comprised of data packets that include the addresses of its source and destination devices. When sending information across the network, the data is broken into small packets or fragments using a process known as fragmentation. Each fragment is sent independently of one another through a series of switches. Once all of the fragments arrive at the receiving end, they are reassembled into their original format.","With the present invention, intra-device modules of a wireless device are accessed as virtual internet services over a TCP\/IP network. An IP router, such as IP router , is implemented in a wireless device, such as wireless device . Each intra-device module  on wireless device  is given a port assignment that is unique to wireless device . IP router  performs three major tasks. IP router , upon receipt of data fragments from a host , determines whether wireless device  is the destination address of the received fragments. If the data fragments' destination address is wireless device 's IP address, then IP router  reassembles the data fragments into their original unified form, once all of the corresponding fragments are received. If the fragments' destination address is not wireless device 's IP address, then IP router  will route the fragments to the appropriate host on the network via one of transport mechanism(s) . IP router  also routes the reassembled data to the appropriate intra-device module  using the designated port assignment.",{"@attributes":{"id":"P-00038","num":"00038"},"figref":"FIG. 4","b":["304","304","402","404","406","402","404","300","406","406","406","302","304","300"]},"If the destination address of the IP data packets are not equal to the IP address of wireless device , PPP layer  encapsulates the IP data packets into PPP frames. IP router  then routes the PPP frames onto the network via one or more transport mechanism(s) .",{"@attributes":{"id":"P-00040","num":"00040"},"figref":"FIG. 5","b":["300","304","502","504"]},"In step , incoming data packets are received by wireless device  via one or more transport modules or mechanisms . IP router  receives the incoming data fragments as PPP frames and un-encapsulates the PPP frames into IP data packets using point to point protocol (PPP) layer . Control then passes to step .","In step , internet protocol (IP) layer  examines the destination internet protocol (IP) address of the data packet. Control then passes to decision step .","In decision step , it is determined whether the destination address for the IP data packet is equal to the IP address of wireless device . If the destination address of the data packet is not equal to the IP address of wireless device , the delivery path associated with the destination address is determined, after which control then passes to step . In step , PPP layer  encapsulates the IP data packets into PPP frames. IP router  then routes the PPP frames onto the network via the appropriate transport mechanism  according to the determined delivery path.","Returning to decision step , if the destination address of the data packet is equal to the IP address of wireless device , control then passes to step . In step , TCP layer  determines which intra-device module  is being addressed by the IP data packet. The port assignment, included in the IP address, determines the specific intra-device module  within wireless device  to be addressed. TCP layer  examines the port address of the data packet and determines which intra-device module  is to receive the data. TCP layer , following the guidelines set forth in RFC (Request for Comment) , determines which data is corrupt and needs to be discarded, which data needs to be buffered until other IP data packets are received, and which data is available for current delivery to intra-device modules . RFC 793 is well known to those skilled in the relevant art(s). Control then passes to step .","In step , TCP layer  routes data available for current delivery to the designated intra-device module  via IP router . Control then passes to step . In step , the process ends.",{"@attributes":{"id":"P-00046","num":"00046"},"figref":"FIG. 6","b":["600","302","104","602","604","606","304","306","608","610","614","618","104","602","604","606","304","304","608","610","614","618","602","104","604","606","600","608","610","614","618","600","600","608","610","614","618"]},"Intra-device modules  may include an over the air service provision , diagnostic manager , a vocoder , and a call manager .","Over the air service provisioning  is a module that provides the ability to program a phone wirelessly. Over the air service provisioning  enables a service center to program the features of the phone that a user has purchased. Such features may include the MIN (Mobile Identification Number) or phone number for that specific wireless phone, the local service provider, roaming lists, etc. Over the air service provisioning  eliminates the need for the user to go to a service center with the phone where the phone is plugged into a box at the service center and programmed at the service center using a hard cable connection. Over the air service provisioning  enables the phone to bring up the service data so that the service provider can program the phone over the air to a specific set of features.","Vocoder  is a module that compresses voice speech by extracting parameters based on a model of human speech generation. Vocoder  includes an encoder and a decoder. The encoder analyses the incoming speech and extracts the relevant parameters. The decoder synthesizes the speech using the parameters that it receives from the encoder via a transmission channel.","Typically vocoders comprise DSPs (Digital Signal Processors) that are wired directly to a speaker and\/or a microphone. An application program interface (API) in an embedded device simply sends commands to the vocoder to program it into different modes. These embedded devices do not provide APIs between the vocoder and the user interface. As such, there is no real ability to distribute vocoder data among devices. When the voice from the vocoder goes directly to a speaker and\/or microphone, a processor does not have the opportunity to look at the audio data for speech recognition purposes.","The present invention provides a generic interface for vocoder  to enable a data feed for extracting data from vocoder . Such data is allowed to be fed to hosts or modules requesting vocoder  audio data. Instead of vocoder data just going to a speaker or a microphone, it can now go to other devices or modules on the Internet that can look at the audio data. Thus, a host requesting data from vocoder  can perform speech or voice recognition analysis using spectrum analyzers, neural networks, and\/or other analytical tools.","Call manager  is a module that manages incoming and outgoing telephone calls to and from handset .","Although the intra-device modules  of handset  include over the air service provisioning , diagnostic manager , vocoder , and call manager , the invention is not limited to these intra-device modules. One skilled in the art would know that other services or features found in handset  or features later incorporated in handset  may be incorporated as intra-device modules in handset .","Transport modules or mechanisms  in handset  may include a wireless modem , a serial communications device , an infrared data association (IRDA) , and\/or a local radio frequency device . Transport modules  provide access into handset . Handset  can be accessed using any one of transport modules  or all transport modules  simultaneously. Transport modules  can also be used to provide services. For example, wireless modem  can be used to provide Internet services.","Modems send digital data signals over a telephone network wherein the telephone network is usually an analog system. Wireless modem  of transport module  is a modulator\/demodulator. Wireless modem  converts digital signals to analog signals and vice versa. Wireless modem  modulates the digital signals (that is, ones and zeros) into tones which are carried by the wireless phone network. At the other end, the demodulator portion of the receiving wireless modem converts the tones back into digital signals (that is, ones and zeros). A first antenna  is connected to wireless modem  for receiving and transmitting the electrical signals.","Serial communication device  is a module that uses the RS 232 serial communication standard to receive and send data to and from handset . Serial port  is an input\/output port that transmits data one bit at a time. Serial communication devices and serial ports are well known to person skilled in the relevant art(s).","IRDA  is a module for transmitting data via infrared light. IRDA ports enable the transfer of data between IRDA devices without using a cable. For transmitting information back and forth between IRDA devices, IRDA module  of handset  is aimed at the IRDA port of the communicating device. Maximum transmission distances for IRDA devices is approximately thirty-six inches. Light emitting diode  indicates when information is being transmitted between IRDA devices.","Local radio frequency (RF) device  is a module that transmits electro- magnetic waves in free space using a second antenna . Local RF module  generates a RF carrier to transmit information signals from handset . A Bluetooth module is an example of a local radio frequency module. Local RF devices are well known to those skilled in the relevant art(s).","Although transport modules or mechanisms  of handset  include wireless modem , serial communication module , IRDA module , and local RF module , the invention is not limited to these transport modules. One skilled in the art would know that other existing transport modules or mechanisms or future transport modules or mechanisms not yet developed may be incorporated in handset .",{"@attributes":{"id":"P-00060","num":"00060"},"figref":["FIG. 7","FIG. 7"],"b":["702","600","708","708","709","709"]},"Computer  includes a connector , a display , and a microphone\/speaker . Display  may, for example, display simultaneously information from a worldwide web site  and a diagnostic display . Diagnostic display  comprises status information about handset , such as the state of handset , whether handset  is searching for service, whether handset  has service, the signal strength of handset , whether there is an incoming telephone call, whether a telephone call is presently in progress, the battery strength of handset  and other types of handset related status information. Computer  connects to handset  via interconnecting cable  from connector  to handset serial port .","While computer  is connected to handset  via serial port , other hosts can communicate with handset  via one of the other transport modules . For example, a second host  having an IRDA port  can communicate with handset  through IRDA device  and a third host  having a local RF antenna  can communicate with handset  through local RF device . Thus, handset  can communicate with a single host or a plurality of hosts simultaneously via transport mechanisms .","In an alternative embodiment, computer  could also connect to handset  via IRDA device  or local RF device  if computer  is equipped with corresponding IRDA or local RF ports. Computer  could also connect to handset  via wireless modem  if computer  is equipped with a wireless modem.",{"@attributes":{"id":"P-00064","num":"00064"},"figref":"FIG. 7","b":["600","710","600","709","709","608","610","304","705","703","608","702"]},"Another TCP\/IP connection within pipe  connects to IP router  from serial communications module  and, in turn, is routed to diagnostic manager  to display diagnostic information  on display . Another TCP\/IP connection within pipe  is routed to vocoder  via IP router , by way of serial communications device , in order to provide the user the ability to converse over microphone\/speaker  instead of handset  when a telephone call is in progress.","In an alternative embodiment, access to the worldwide web could be obtained by routing one of the TCP\/IP connections within pipe  directly from serial communication device  to wireless modem  (shown as connection ).",{"@attributes":{"id":"P-00067","num":"00067"},"figref":"FIG. 8","b":["800","800","800","104","604","606","304","608","610","614","618","306","800","800","800","104","800","306","800","104"]},"Wireless cellular device  can also be coupled to another device (not shown) having a keyboard, CRT (cathode ray tube), and processor via serial communications module . This would allow a user as well as a host to communicate over wireless cellular device .","In an alternative embodiment, wireless cellular device  may operate as an e-mail pager. In this instance, device  would operate solely to receive e-mail and not the normal proprietary pages. E-mails could be printed by employing one or more transport modules  as intra-device modules for providing printing services. For example, local RF device  could transmit the e-mail to a printer having a local RF device to print the e-mail. Alternatively, IRDA device  could transmit the e-mail to a printer having an IRDA port to print the e-mail. Alternatively, wireless modem  could transmit the e-mail to a printer having a wireless modem to print the e-mail.",{"@attributes":{"id":"P-00070","num":"00070"},"figref":"FIG. 9","b":["900","900","902","904","902","302","304","306","302","104","604","606","306","608","618","608","620","618","622","902","600"]},"Car unit  comprises a user interface  and a local RF device . Local RF device  is connected to a third antenna .","When cellular phone  is placed within a car that houses car unit , communication between cellular phone  and car unit  is transmitted\/received over RF link  via local RF modules  and . System  acts as a hands-free automotive kit. Information from cellular phone  may be displayed to a driver via a heads-up display (not shown). For example, when an incoming call occurs, a message may appear on the windshield or heads-up display that says \u201cincoming call\u201d. Other types of information can be displayed as well, such as who the call is from, what the number is, etc. The audio from cellular phone  may be piped through the car radio or car stereo.",{"@attributes":{"id":"P-00073","num":"00073"},"figref":["FIGS. 10A and 10B","FIG. 10A"],"b":["1000","1000","104","302","304","608","610","612","306","304","104","608","610","610","612","1000","1002","612","610","1000","1002","1000","608","304","610","1010","10","1010","304","608","1010","620","608","620","608"]},{"@attributes":{"id":"P-00074","num":"00074"},"figref":"FIG. 11","b":["1100","104","302","304","608","306","104","304","304","608","608","620","1100"]},{"@attributes":{"id":"P-00075","num":"00075"},"figref":"FIG. 12","b":["1200","1202","304","608","610","612","614","618","608","610","614","618","306"]},"IP router  may contain Network Address Translation (NAT) capabilities. NAT is the translation of an IP address used in one network to a different IP address used within another network. Although NAT capabilities are described with reference to IP router  in , NAT capabilities may be incorporated in any of the exemplary embodiments described herein.","Serial communications box  includes a plurality of serial communication devices , , and  with a plurality of serial ports , , and . Each serial communication device , , and  is connected to serial port , , and , respectively. IP router  is connected to each serial communication device , , and , as well as each transport mechanism  (that is, wireless modem , IRDA device , and local RF device ). First antenna  is connected to wireless modem . Second antenna  is connected to local RF device .","Serial communication box  is used to connect serial devices to IP router .  shows a printer , a facsimile machine , and a monitor  as exemplary serial devices. Although  only shows three serial devices connecting to serial communication box , one skilled in the relevant art(s) would know that a greater or lesser number of serial devices could be connected to serial communication box  without departing from the scope of the invention. Printer  connects to serial port . Facsimile machine  connects to serial port . Monitor  connects to serial port . Each serial device registers itself with IP router  to identify its device type, IP port number, and its operating protocol. Wireless router  enables each serial device , , and  that connects to serial communication box  to operate as a virtual wireless device. Serial devices , , and  are now intra-device modules  that provide printing, facsimile, and monitoring services to hosts as if they were local servers on the internet. Hosts gain access to serial devices , , and  via at least one of wireless modem , IRDA device , and local RF device .",{"@attributes":{"id":"P-00079","num":"00079"},"figref":["FIGS. 13A","FIG. 13A"],"b":["13","13","1302","1304","1306","1308","1300","1302","1310","618","622","1304","1310","618","622","1308","1310","618","622","1306","1312","618","622"]},"Circuit card , found in monitor , keyboard , and printer , is shown in FIG. B. Circuit card  comprises a TCP\/IP stack  coupled to local RF device . TCP\/IP stack  is also coupled to the device in which circuit card  is found (that is, monitor , keyboard , or printer ). TCP\/IP stack  is used for interpreting protocols for the device in which it is plugged.","Circuit card , found in CPU , is shown in FIG. C. Circuit card  comprises an IP router  coupled to local RF device . Circuit card  may also include other transport mechanisms, such as a wireless modem , an IRDA device , and a serial communication device , each being coupled to IP router . IP router  is also coupled to CPU .","Wireless communications between monitor , keyboard , CPU , and printer  are provided by local RF devices  via antennas  on circuit cards  and . Thus, local RF devices  act as transport mechanisms  and monitor , keyboard , CPU , and printer  act as intra-device modules providing monitor, keyboard, printer, and computational services. Although  shows computer components , , , and  connecting via local RF, other wireless transport mechanisms, such as wireless modem  or IRDA device , could be used in a similar manner to connect monitor , keyboard , CPU , and printer  without departing from the scope and spirit of the present invention.","The present invention is not limited to the many uses described above. One skilled in the relevant art(s) would know that other uses and functions are capable of being performed by the present invention without departing from the scope and spirit of the invention.","The previous description of the preferred embodiments is provided to enable any person skilled in the art to make or use the present invention. While the invention has been particularly shown and described with reference to preferred embodiments thereof, it will be understood by those skilled in the art that various changes in form and detail may be made therein without departing from the spirit and scope of the invention."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE FIGURES","p":["The features, objects, and advantages of the present invention will become more apparent from the detailed description set forth below when taken in conjunction with the drawings in which like reference characters identify corresponding elements throughout. In the drawings, like reference numbers generally indicate identical, functionally similar, and\/or structurally similar elements. The drawings in which an element first appears is indicated by the leftmost digit(s) in the corresponding reference number.",{"@attributes":{"id":"P-00013","num":"00013"},"figref":"FIG. 1"},{"@attributes":{"id":"P-00014","num":"00014"},"figref":"FIG. 2"},{"@attributes":{"id":"P-00015","num":"00015"},"figref":"FIG. 3"},{"@attributes":{"id":"P-00016","num":"00016"},"figref":"FIG. 4"},{"@attributes":{"id":"P-00017","num":"00017"},"figref":"FIG. 5"},{"@attributes":{"id":"P-00018","num":"00018"},"figref":"FIG. 6"},{"@attributes":{"id":"P-00019","num":"00019"},"figref":"FIG. 7"},{"@attributes":{"id":"P-00020","num":"00020"},"figref":"FIG. 8"},{"@attributes":{"id":"P-00021","num":"00021"},"figref":"FIG. 9"},{"@attributes":{"id":"P-00022","num":"00022"},"figref":"FIGS. 10A and 10B"},{"@attributes":{"id":"P-00023","num":"00023"},"figref":"FIG. 11"},{"@attributes":{"id":"P-00024","num":"00024"},"figref":"FIG. 12"},{"@attributes":{"id":"P-00025","num":"00025"},"figref":"FIGS. 13A","b":["13","13"]}]},"DETDESC":[{},{}]}
