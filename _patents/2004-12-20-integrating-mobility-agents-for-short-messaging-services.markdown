---
title: Integrating mobility agents for short messaging services
abstract: A method of providing messaging services for GSM or 3G mobile stations is provided. A gateway detects a mobile network registration from a mobile station, and performs a location area update procedure with previous support nodes from its home public land mobile network. The gateway then receives data for the mobile station from a packet switched radio network and transmits the data for the mobile station through the mobile network.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07912037&OS=07912037&RS=07912037
owner: Intel Corporation
number: 07912037
owner_city: Santa Clara
owner_country: US
publication_date: 20041220
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND","DETAILED DESCRIPTION OF THE EMBODIMENTS"],"p":["Short messaging services are generally available in some wireless networks, such as those based upon General Packet Radio Systems (GPRS). GSM (Global System for Mobile Communications) operators that provide these services in GPRS networks rely upon these services as revenue generators, and users rely upon them for enhanced communication services. GPRS is seen as some as a bridge between GSM, which is considered second-generation wireless communications and the completely packetized, high bandwidth wireless communication protocol envisioned as third generation (3G).","Short messaging services may include SMS (Short Message Service) and MMS (Multimedia Message Service), among others. In many instances, MMS is considered to be a variation of SMS, in that MMS involves an SMS notification followed by a pull of the multimedia content. In addition, the principles discussed herein are applicable to transmissions of data traffic. These will be referred to here as short messaging services.","These services are currently unavailable in internetworked wireless local area networks (WLANs). An internetworked WLAN is one in which the WLAN may have third generation (3G) protocols and GSM intermixed with Wireless Fidelity (WiFi)-compliant protocols. Wi-Fi protocols are those substantially in compliant with the Institute for Electrical and Electronic Engineers (IEEE) specification 802.11a\/b\/g, etc., \u201cIEEE Standard for Information Technology\u2014Telecommunications and Information Exchange between Systems\u2014Local and Metropolitan Area Network\u2014Specific Requirements\u2014Part 11: Wireless LAN Medium Access Control (MAC) and Physical Layer (PHY) Specifications.\u201d The non-3G or non-GSM portions of the LAN do not provide short messaging services. Users having a 3G provider no longer have access to their short messaging services.",{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 1","b":["10","12","10","20"]},"GPRS may be viewed as an intermediate step between current second generation (2G) wireless systems, such as the Global System for Mobile Communications (GSM) networks, and the non-connection oriented, packet switched systems such as a third generation network (3G), as well as further generations such as 4G. GPRS endeavors to use existing GSM network elements as much as possible, and may provide data rates from 9.6 to 171 kilobits per second (kbps). The advent of 3G networks is projected to require completely new network elements to provide data rates of 384 kbps. Application of the embodiments of this invention are not limited to the use of a wireless mobile network with a GPRS network, it may be applied to use of a wireless mobile network to 3G systems as well.","When a mobile station such as  is in a wireless local area network, such as one in accordance with the Institute of Electrical and Electronic Engineers (IEEE) standard 802.11a\/b\/g (WiFi), it reaches its home network through an access router such as . The WiFi network may be referred to here as a mobile network. In one embodiment, the mobile network is an IP mobile network that supports mobile nodes. The access router provides access across a network , such as the Internet, through a gateway entity  to the packet switched radio network , which may be a GPRS network. For ease of discussion, GPRS entities will be discussed, with the understanding that embodiments of the invention may be applied to those entities in other networks that are analogous to the entities in GPRS.","However, the mobile station  may lose some of its services when in a WiFi network. The GPRS network has several entities and interfaces that allow for packet-switched radio communications. Among these entities are a serving GPRS support node (SGSN) such as  and , a gateway GPRS support node (GGSN), a gateway mobile services switching center (GSMC) such as , short messaging servers (SMS), short message switching center (SMSC)  and a mobile switching center .","Generally, with the network , the mobile stations communicate using the SGSNs and the MSCs, which route their traffic through the network. GGSNs transmit the traffic to and from the home network to mobile stations on other networks. The SMS-GMSC and the SMC-SC are involved when that traffic is short messages, such as those sent using SMS and MMS. Currently, a mobile station such as  cannot receive SMS, MMS and other packet-based messages addressed to it when the mobile station is in the wireless local area network, such as .","It is possible to provide a new gateway entity, such as , that combines a packet switched radio network interface, such as an SGSN interface, with a mobile network interface such as a Mobile Internet Protocol Home Agent (MIP HA). A MIP Home Agent resides in edge devices of a Mobile IP network and intercepts traffic intended for a mobile station that is associated with that agent. The MIP Home Agent then routes the traffic to the mobile station. This allows the mobile station to move around and only need to keep one entity apprised of its location.","The mobile agent updates its associated home agent through a process referred to as registration. Whenever a mobile station moves from one domain of a network to another, it sends a message to its home agent identifying in which domain it is operating and providing its \u2018forwarding\u2019 address. Traffic entering the home network addressed to the mobile station is then routed to its forwarding address by the home agent.","Similarly, in packet switched radio networks, such as GPRS, a serving GPRS Support node (SGSN), provides traffic forwarding to the mobile station. The SGSN, GGSN and a Home Location Register (HLR) track the mobile station's addresses as it moves. The update to these support nodes is usually referred to as a location area update.","The new gateway entity  combines the functions of a home agent with a packet switched radio interface such as an SGSN, which may be viewed as being analogous to a home agent for mobile stations in a GPRS network. This network device has a mobile network interface to allow mobile station communication through a wireless local area network, and a packet switched radio network interface to provide messaging services from a packet switched radio network.","A processor in the network device  detects the registration of a mobile station through the mobile network interface, triggered by the mobile station being in a wireless local area network, such as a WiFi hotspot. The processor then performs a local area update procedure with support nodes on the packet switched radio network, and transmits data intended for the mobile station from the packet switched radio network to the mobile network.","As discussed above, the mobile network interface may be a Mobile Internet Protocol Home Agent interface. The packet switched radio network interface may be a General Packet Switched Radio Serving GPRS Support Node interface. Alternatively, the packet switched radio network interface may be a 3G interface.","The two interfaces may be tightly integrated, in which case they are referred to as being co-located. In a co-located instance, for example, a MIP registration may cause application programming interface (API) calls to the SGSN function that would in turn trigger a location area update and redirection of the packets to the home agent. An example of this is shown in .","The incoming mobile network interface is referred to here as an Internet Protocol (IP) interface . The outgoing interface is a 3GPP (3G Partnership Project) Gn or Gp interface . The protocol stack in side the processor is shown at . Several interfaces have been described by the 3GPP and labeled Gn, Gp and Gb, as  examples. A Gn interface is an interface between two GGSNs in the same public land mobile network. A Gp interface is an interface between two GGSNs in different PLMNs. A Gb interface is between a SGSN and a base station system.","An embodiment where the two interfaces are non-co-located is shown in . In the non-co-located case, the device would also include a Gb interface  between the mobile network interface , shown as a MIP Home Agent in , and the packet radio interface . In this instance a Gd interface and a Gn interface connect the packet radio interface to the packer radio network. A Gd interface lies between an SMS-GMSC.","It must be noted that co-located and non-co-located do not necessarily imply physical location. The network device including these interfaces may be one physical device, or several physical devices, whether the interfaces are co-located or non-co-located.","Returning to , the mobile station  may use the new gateway entity  to receive services from its home PLMN that would not otherwise be available in the WLAN . As mentioned above, the mobile station may be a GSM mobile station or a 3G mobile station, as well as any other type of packet switched wireless network mobile station.","An embodiment of a method to provide these services using this new network entity is shown in . At , the gateway entity detects a mobile station registration. In the above examples, a Mobile IP registration process was assumed, but it may be a different type of mobile station registration. In response to detecting the registration, the gateway then performs a location area update at , such as that provided in GPRS. This updates relevant support nodes of the new location information for the mobile station. As discussed above, this may occur as a result of API calls to the SGSN functionality in the device, or through communications through a Gb interface in the non-co-located embodiment.","Once the location area update is completed, the gateway entity can now receive messaging traffic for the mobile station from the short message service providers in the PLMN at . This may involve the home agent intercepting packets transmitting through the gateway entity and tunneling them to the mobile station via the home agent at . In this manner, the mobile station may still receive short messaging services in a wireless local area network that would otherwise be unavailable.","As mentioned above, implementations of GPRS generally attempt to re-use existing network entities in the GSM network. In this instance, embodiments of the invention may be contained upon an article of machine-readable medium that, when executed, cause the machine to perform the methods and processes of the invention. The machine may be an existing gateway entity that is being upgraded to provide the new functionality, for example.","Messaging diagrams showing examples of messaging flows in different situations are shown in . In , a messaging flow is shown for a standard short message service where the mobile station is in a different PLMN than its home PLMN. A short messaging entity transmits the message to a switching center . This is then transmitting to a short message service gateway mobile switching center (SMS-GMSC)  that sends the message to the PLMN in which the mobile station currently resides. This is received by the SGSN Mobile Switching Center  that in turn relays it to the mobile station .","In , the new gateway entity allows the mobile station to receive short messaging services at either the WLAN as shown at , or in its home PLMN at . The SME  sends the message to the SC , which in turn transmits it to the appropriate SMS-GMSC. The SMS-GMSC then transmits it to the new gateway entity . If the mobile station is in a WLAN area, as determined by the MIP registration, the gateway  tunnels the data to the mobile station . It must be noted that the new gateway  will still perform the usual SGSN functions if the mobile station is in a PLMN as shown by ","In addition to allowing mobile stations to receive their short message service traffic, such as SMS or MMS, it also allows for access to regular packet switching services from the WLAN. It may provide continuity of access for these kinds of services. This is demonstrated by the packet flow between two mobile stations in .","Mobile station  (MS)  transmits packet data intended for mobile station  (MS) , which is currently in a WLAN area. The SGSN  supports MS and sends the packet data to the GGSN . This is typically accomplished via GPRS tunneling protocol (GTP). The GGSN then transmits the data to the appropriate new gateway entity , again typically by GTP. The new gateway  then uses Mobile IP to tunnel the data to the MS in the WLAN.","In this manner, the addition of the new gateway entity enables not only mobile stations from a PLMN to receive their short message service messages, but also to receive packet services from other mobile stations in the PLMN. The mobile stations may be GSM or 3G stations that can communicate over GPRS, as examples.","Thus, although there has been described to this point a particular embodiment for a method and apparatus to provide short messaging services to mobile stations in WLAN environments, it is not intended that such specific references be considered as limitations upon the scope of this invention except in-so-far as set forth in the following claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Embodiments of the invention may be best understood by reading the disclosure with reference to the drawings, wherein:",{"@attributes":{"id":"p-0006","num":"0005"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0007","num":"0006"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0008","num":"0007"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 7"}]},"DETDESC":[{},{}]}
