---
title: PLC function block for automated demand response integration
abstract: Systems and methods are described that allow a Programmable Logic Controller (PLC) to receive Demand Response (DR) data and process the data in a PLC Function Block (FB). Embodiments provide a PLC demand response FB that solicits DR data and a demand response load manager FB that compares the DR data with predetermined demand constraints corresponding to electrical equipment. The demand constraints provide energy consumption strategies for buildings and factories.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08670875&OS=08670875&RS=08670875
owner: Siemens Corporation
number: 08670875
owner_city: Iselin
owner_country: US
publication_date: 20110509
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS REFERENCE TO RELATED APPLICATIONS","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION"],"p":["This application claims the benefit of U.S. Provisional Application No. 61\/359,889, filed on Jun. 30, 2010, the disclosure which is incorporated herein by reference in its entirety.","The invention relates generally to process control. More specifically, the invention relates to interfacing a demand response system with a Programmable Logic Controller (PLC).","Residential and commercial buildings consume more than 70% of all electricity generated. Therefore, electricity consumption in buildings plays a major role in smart grid. Next to energy efficiency and renewable power generation, peak load reduction is an important goal for smart grid.","Demand Response (DR) is a way to change the electric usage by end-use customers from their normal consumption patterns in response to DR signals. The benefits are that by shedding electricity consumption during peak use hours the need for peaking power plants is reduced. Another benefit is the overall electricity consumption will be reduced when supply is short (e.g., renewable energy generation fluctuation, major equipment failure in the power grid, etc.).","DR manages customer consumption of electricity in response to supply conditions. DR mechanisms respond to explicit requests to shed load. DR involves curtailing power used or by starting on site generation which may or may not be connected in parallel with the grid. DR is a component of smart energy demand, which includes energy efficiency, home and building energy management, distributed renewable resources, and electric vehicle charging.","Current DR schemes are implemented through the use of dedicated control systems to shed loads in response to a request by a utility or market price conditions. Services (lights, machines, air conditioning) are reduced according to a preplanned load prioritization scheme during the critical time frames. An alternative to load shedding is on-site generation of electricity to supplement the power grid.","DR is typically used to reduce demand. Depending on the configuration of generation capacity, DR response may also be used to increase demand (load) at times of high production and low demand.","There are two types of DR\u2014emergency demand response and economic demand response. Emergency DR is needed to avoid power outages. Economic DR is used to assist utilities manage daily system peaks.","Today's Networked Control System (NCS) is a Distributed Control System (DCS) whose components (process sensors, controllers, process actuators, etc.) are distributed using digital network technology. An NCS is a control system where control loops are closed through a real-time DCS. Process signals (process variables) from transmitters, sensors, etc., and control signals (control variables) to actuators, valves, etc., are exchanged among the components as information packages through a network.","What is needed is a method and system that provides an operational interface between a facility control system and a DR system.","The inventors have discovered that it would be desirable to have systems and methods that allow a Programmable Logic Controller (PLC) to receive Demand Response (DR) signals and process them in a PLC Function Block (FB). Embodiments provide a PLC demand response FB that solicits DR data and a load manager FB that compares the DR data with predetermined demand constraints corresponding to electrical loads. The demand constraints provide energy consumption strategies for buildings and factories.","One aspect of the invention provides a method for a Programmable Logic Controller (PLC) to control facility electrical equipment based on Demand Response (DR) data. Aspects according to the method include obtaining DR data from a Demand Response Application Server (DRAS), receiving the DR data from the DRAS, and parsing the received DR data into a DR event level and price.","Another aspect of the method is wherein obtaining DR data further comprises selecting a Uniform Resource Locator (URL) corresponding to the regional DRAS for the facility.","Another aspect of the method is generating a query based on an eXtensible Markup Language (XML) based schema which describes the data format for the DRAS.","Another aspect of the invention is a Programmable Logic Controller (PLC) demand response Function Block (FB) that includes an enabling input (EN) and an enabling output (ENO) for coupling with a PLC ladder rung for execution, a client application configuration module configured with a Demand Response Application Server (DRAS) regional Uniform Resource Locator (URL) and a demand response data update frequency wherein an embedded client application script communicates over a communications network with the DRAS and solicits demand response event data from the DRAS depending on the update frequency, a demand response data protocol receiver configured to receive current demand response event level (normal, medium, high) and level price data from the DRAS, and a demand response data writer configured to write the received data to event level and event price address registers.","The details of one or more embodiments of the invention are set forth in the accompanying drawings and the description below. Other features, objects, and advantages of the invention will be apparent from the description and drawings, and from the claims.","Embodiments of the invention will be described with reference to the accompanying drawing figures wherein like numbers represent like elements throughout. Before embodiments of the invention are explained in detail, it is to be understood that the invention is not limited in its application to the details of the examples set forth in the following description or illustrated in the figures. The invention is capable of other embodiments and of being practiced or carried out in a variety of applications and in various ways. Also, it is to be understood that the phraseology and terminology used herein is for the purpose of description and should not be regarded as limiting. The use of \u201cincluding,\u201d \u201ccomprising,\u201d or \u201chaving,\u201d and variations thereof herein is meant to encompass the items listed thereafter and equivalents thereof as well as additional items.","The terms \u201cconnected\u201d and \u201ccoupled\u201d are used broadly and encompass both direct and indirect connecting, and coupling. Further, \u201cconnected\u201d and \u201ccoupled\u201d are not restricted to physical or mechanical connections or couplings.","It should be noted that the invention is not limited to any particular software language described or that is implied in the figures. One of ordinary skill in the art will understand that a variety of software languages may be used for implementation of the invention. It should also be understood that some of the components and items are illustrated and described as if they were hardware elements, as is common practice within the art. However, one of ordinary skill in the art, and based on a reading of this detailed description, would understand that, in at least one embodiment, components in the method and system may be implemented in software or hardware.","Embodiments of the invention provide methods, system frameworks, and computer-usable media storing computer-readable instructions that allow a user to control power consumption for a facility based upon regional energy pricing and the environmental conditions at the facility location. Embodiments monitor the price of electrical energy supplied to facilities by their electric utility. The invention may be deployed as software as an application program tangibly embodied on a program storage device. The application code for execution can reside on a plurality of different types of computer readable media known to those skilled in the art.","Embodiments allow for a load shedding scheme to be configured for a facility. Predetermined loads controlled by a PLC may be shed or shifted depending on the facility's control system energy consumption, the current energy commodity market prices, and future energy market prices. PLCs control process equipment and machinery used in building, manufacturing and process control. Embodiments extend a PLC's reach to enable automated demand response.","Although exemplary embodiments are described herein with reference to particular network devices, architectures, and frameworks, nothing should be construed as limiting the scope of the invention.",{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 1","b":"101"},"One or more facilities , (collectively ) that employ PLCs , (collectively ) access one or more Demand Response Automation Servers (DRASs) ,  which host Demand Response (DR) data via the network . A PLC  is used to control facility  automation and electrical loads.","The DRASs ,  provide energy data in an OpenADR alliance web service. DR programs are accepted as an effective industry solution for shedding or shifting user electric loads. The DR data is forwarded through the network  to subscribing clients. The DRASs ,  offer a web service interface employing, for example, Simple Object Access Protocol (SOAP) with an XML (eXtensible Markup Language) or HyperText Markup Language (HTML) based type data exchange format where a DRAS client connects regularly for data. The format may include an XML based schema which describes the data format and uses a messaging pattern such as Message Exchange Pattern (MEP) to retrieve the DR data.","A regional power utility or Independent Service Operator (ISO) ,  defines DR event levels and energy price data that are sent to the DRASs , . DR event levels and energy price are published at the DRASs ,  up to 36 hours before an event level execution, which means there is time to plan accordingly. However, depending on the DR program, it is also possible that the reaction time for a DR event may be short (e.g., 15 minutes).","A PLC  comprises a processor, an operating system (OS), a data store, a communication bus, an external control connection (I\/O) and a communications interface. The communications interface couples to a wired or wireless network interface , (collectively ) for communication with the network . Each PLC typically includes I\/O cards or modules which may comprise switched outputs and inputs, analog outputs and inputs, and configurable digital interfaces and is expandable regarding the number and type of I\/O points. The network interface  may be a separate I\/O card or may be part of the PLC . Other I\/O configurations are possible. The I\/O may couple directly or indirectly (using a building automation system) to loads and other facility devices for control.","The SIMATIC S7 is one exemplary PLC manufactured and sold by Siemens AG. PLCs are usually programmed with a conventional personal computer such as a PC, MACINTOSH or UNIX based workstation based software programming tool, for example, Siemens Step 7, and communicates with the PLC over wireline (guided) or wireless (unguided) communications media to download and store the program for execution. The software is used for programming, testing, and documentation. The software may run on a Microsoft Operating System (OS) or others. The programming environment may include macros and cross compilation to and from other programming languages such as BASIC, C, C++, C# and Java.","The PLC program can be created in different ways such as a Function Block Diagram (FBD) where an automation task is a graphical representation (graphical symbols) in accordance with DIN 40700\/DIN 40719 symbols and comprise Organization Blocks (OB) that manage the PLC program and Programming Blocks (PB) that structure the control program; a Ladder Diagram (LD) where the program resembles a circuit diagram of the automation task; a Structured Text (ST) (similar to Pascal programming language) where the program comprises a sequence of commands (mnemonic codes) executed one after another; an Instruction List (IL) (similar to assembly language) and a Sequential Function Chart (SFC). These techniques emphasize the logical organization of operations.","Preferably, the PLC  communications interface  is secure and allows effective integration of stored data and external DRASs ,  data such as utility market prices  and weather information  through a set of software Function Blocks (FBs).",{"@attributes":{"id":"p-0037","num":"0036"},"figref":["FIG. 2","FIG. 3","FIGS. 4 and 5"],"b":["201","203","201","203"]},"The demand response FB  comprises an enabling input (EN) and an enabling output (ENO), and configurable DR address registers for energy price (#Price\u201416#0000) and event level (#Mode\u201416#0001) which may include start and end times. The PLC software programming engineering and configuration tool is opened and a user selects (drags and drops) a demand response FB  from the FB library and inserts it into a desired ladder rung under development. The demand response FB  is configured with a DRAS regional Uniform Resource Locator (URL) with whom the Demand Response contract is with and a DR data update frequency inputted by a user. The update frequency may be per unit time (every 30 minutes) or per PLC program execution cycle (steps , , , ).","The demand response FB  employs an embedded client application script that communicates with and requests information from the DRASs ,  depending on the update frequency and writes received data to the DR address registers.","The demand response load manger FB 203 comprises an enabling input (EN), an enabling output (ENO) and one or more assignable, configurable load address registers. In the illustrated example, the ENO resets the state of the memory bit M100.1 when the FB 203 successfully executes. The load address registers control assigned equipment via PLC I\/O. The user selects a demand response load manager FB 203 from the FB library and couples it to the demand response FB 201 ENO (steps , , , ).","The demand response FB  comprises a DRAS subscription engine  that solicits DR data from the DRASs , . A client application configuration module  allows the user to enter DRAS contact information in the form of a URL to contact the DRASs ,  hosting the DR applications.","The client application configuration module  is a software module that acquires information from external systems, third parties and Web Services, and supports XML. The client application configuration module  allows each external system to be subscribed to, thereby exposing information. The client application configuration module  subscribes for information from the DRASs ,  such as energy pricing  and environmental and weather conditions  where a facility  is located and knows each of the external systems a priori by URL or by search engine if unreachable or not known. The client application configuration module  is necessary to configure the URL string and DR request frequency (how often to poll the DRASs ,  for data). The client application configuration module  programmatically requests all required DR information from the DRASs , .","The PLC  communicates with the DRASs ,  over the network  using custom or standard Internet languages and protocols, and may involve scripting languages including HTML (Hypertext Markup Language), dynamic HTML (DHTML), Microsoft VBScript (Visual Basic Scripting Edition), Jscript, ActiveX, XML and Java.","The DR data that are sent from the DRAS ,  to the DRAS clients (devices) follow the proposed standard developed at the Lawrence Berkeley National Laboratory Demand Response Research Center. The OpenADR standard defines two ways in which to interface with DRAS: 1) via a Representational State Transfer (REST) web service or 2) via a SOAP web service. The REST web service provides DRAS clients with a simple method for retrieving DRAS event information over the Internet, while the SOAP web service contains the same information, but uses the more structured SOAP protocol.","Utilities offer different programs for their customers. For example, Large Commercial and Industrial Demand Response (Demand Bid, Capacity Bid, Peak Choice, Participating Load) and Price Response Notification and Automation (Retail: Critical Peak Pricing) dependent on the program and the content availability of the protocol may vary.","Data from the DRAS ,  is transport in an XML format. For example:",{"@attributes":{"id":"p-0047","num":"0046"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"308pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"<?xml version=\u201c1.0\u201d encoding=\u201cUTF-8\u201d standalone=\u201cyes\u201d?>"},{"entry":"<p:listOfEventState xsi:schemaLocation=\u201chttp:\/\/openadr.lbl.gov\/src\/1\/EventState.xsd\u201d"},{"entry":"xmlns:p=\u201chttp:\/\/www.openadr.org\/DRAS\/EventState\u201d xmlns:xsi=\u201chttp:\/\/www.w3.org\/2001\/XMLSchema-"},{"entry":"instance\u201d>"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"294pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<p:eventStates offLine=\u201cfalse\u201d testEvent=\u201cfalse\u201d drasName=\u201cAkuacom 5.0\u201d schemaVersion=\u201c1.0\u201d"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"308pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"eventStateID=\u201c1985996601\u201d drasClientID=\u201cclient-1\u201d eventIdentifier=\u201c110114-165130\u201d"},{"entry":"eventModNumber=\u201c1\u201d programName=\u201cDBP DA\u201d>"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"280pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<p:simpleDRModeData>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"266pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<p:EventStatus>ACTIVE<\/p:EventStatus>"]},{"entry":[{},"<p:OperationModeValue>HIGH<\/p:OperationModeValue>"]},{"entry":[{},"<p:currentTime>11791.012<\/p:currentTime>"]},{"entry":[{},"<p:operationModeSchedule>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"252pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<p:modeSlot>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"238pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<p:OperationModeValue>MODERATE<\/p:OperationModeValue>"]},{"entry":[{},"<p:modeTimeSlot>0<\/p:modeTimeSlot>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"252pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<\/p:modeSlot>"]},{"entry":[{},"<p:modeSlot>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"238pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<p:OperationModeValue>HIGH<\/p:OperationModeValue>"]},{"entry":[{},"<p:modeTimeSlot>3600<\/p:modeTimeSlot>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"252pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<\/p:modeSlot>"]},{"entry":[{},"<p:modeSlot>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"238pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<p:OperationModeValue>MODERATE<\/p:OperationModeValue>"]},{"entry":[{},"<p:modeTimeSlot>7200<\/p:modeTimeSlot>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"252pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<\/p:modeSlot>"]},{"entry":[{},"<p:modeSlot>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"238pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<p:OperationModeValue>HIGH<\/p:OperationModeValue>"]},{"entry":[{},"<p:modeTimeSlot>10800<\/p:modeTimeSlot>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"252pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<\/p:modeSlot>"]},{"entry":[{},"<p:modeSlot>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"238pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<p:OperationModeValue>MODERATE<\/p:OperationModeValue>"]},{"entry":[{},"<p:modeTimeSlot>14400<\/p:modeTimeSlot>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"252pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<\/p:modeSlot>"]},{"entry":[{},"<p:modeSlot>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"238pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<p:OperationModeValue>HIGH<\/p:OperationModeValue>"]},{"entry":[{},"<p:modeTimeSlot>18000<\/p:modeTimeSlot>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"252pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<\/p:modeSlot>"]},{"entry":[{},"<p:modeSlot>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"238pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<p:OperationModeValue>MODERATE<\/p:OperationModeValue>"]},{"entry":[{},"<p:modeTimeSlot>21600<\/p:modeTimeSlot>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"252pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<\/p:modeSlot>"]},{"entry":[{},"<p:modeSlot>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"238pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<p:OperationModeValue>HIGH<\/p:OperationModeValue>"]},{"entry":[{},"<p:modeTimeSlot>25200<\/p:modeTimeSlot>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"252pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<\/p:modeSlot>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"266pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<\/p:operationModeSchedule>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"280pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<\/p:simpleDRModeData>"]},{"entry":[{},"<p:drEventData>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"266pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<p:notificationTime>2011-01-14T16:52:59.000-08:00<\/p:notificationTime>"]},{"entry":[{},"<p:startTime>2011-01-18T12:00:00.000-08:00<\/p:startTime>"]},{"entry":[{},"<p:endTime>2011-01-18T20:00:00.000-08:00<\/p:endTime>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"280pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<\/p:drEventData>"]},{"entry":[{},"<p:customData\/>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"294pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<\/p:eventStates>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"308pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"<\/p:listOfEventState>."},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}]}}},"After parsing and normalization, the received data from a DRAS ,  changes event levels in a predefined interval using a Demand Bid Program (DBP):","Signal Entries Program: DBP DA, Event: 110114-165130, Comm Dev: client-1 Time Signal Value",{"@attributes":{"id":"p-0049","num":"0000"},"ul":{"@attributes":{"id":"ul0001","list-style":"none"},"li":{"@attributes":{"id":"ul0001-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0002","list-style":"none"},"li":["01\/17\/11 21:00:00 pending on","01\/18\/11 12:00:00 mode moderate","01\/18\/11 13:00:00 mode high","01\/18\/11 14:00:00 mode moderate","01\/18\/11 15:00:00 mode high","01\/18\/11 16:00:00 mode moderate","01\/18\/11 17:00:00 mode high","01\/18\/11 18:00:00 mode moderate","01\/18\/11 19:00:00 mode high."]}}}},"The following XML shows a message for a Critical Peak Pricing (CPP) event:",{"@attributes":{"id":"p-0051","num":"0058"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"315pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"<?xml version=\u201c1.0\u201d encoding=\u201cUTF-8\u201d standalone=\u201cyes\u201d?>"},{"entry":"<p:listOfEventState xsi:schemaLocation=\u201chttp:\/\/openadr.lbl.gov\/src\/1\/EventState.xsd\u201d"},{"entry":"xmlns:p=\u201chttp:\/\/www.openadr.org\/DRAS\/EventState\u201d xmlns:xsi=\u201chttp:\/\/www.w3.org\/2001\/XMLSchema-"},{"entry":"instance\u201d>"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"301pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<p:eventStates offLine=\u201cfalse\u201d testEvent=\u201cfalse\u201d drasName=\u201cAkuacom 5.0\u201d schemaVersion=\u201c1.0\u201d"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"315pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"eventStateID=\u201c1985996835\u201d drasClientID=\u201cclir.f\u201d eventIdentifier=\u201c110118-165641\u201d eventModNumber=\u201c1\u201d"},{"entry":"programName=\u201cCPP\u201d>"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"287pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<p:simpleDRModeData>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"273pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<p:EventStatus>FAR<\/p:EventStatus>"]},{"entry":[{},"<p:OperationModeValue>NORMAL<\/p:OperationModeValue>"]},{"entry":[{},"<p:currentTime>\u221275596.862<\/p:currentTime>"]},{"entry":[{},"<p:operationModeSchedule>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<p:modeSlot>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"245pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<p:OperationModeValue>NORMAL<\/p:OperationModeValue>"]},{"entry":[{},"<p:modeTimeSlot>0<\/p:modeTimeSlot>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<\/p:modeSlot>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"273pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<\/p:operationModeSchedule>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"287pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<\/p:simpleDRModeData>"]},{"entry":[{},"<p:drEventData>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"273pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<p:notificationTime>2011-01-18T16:56:48.000-08:00<\/p:notificationTime>"]},{"entry":[{},"<p:startTime>2011-01-19T14:00:00.000-08:00<\/p:startTime>"]},{"entry":[{},"<p:endTime>2011-01-19T18:00:00.000-08:00<\/p:endTime>"]},{"entry":[{},"<p:eventInfoInstances>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<p:eventInfoTypeID>PRICE_MULTIPLE<\/p:eventInfoTypeID>"]},{"entry":[{},"<p:eventInfoName>cpp_price<\/p:eventInfoName>"]},{"entry":[{},"<p:eventInfoValues>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"245pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<p:value>1.36229<\/p:value>"]},{"entry":[{},"<p:timeOffset>0<\/p:timeOffset>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<\/p:eventInfoValues>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"273pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<\/p:eventInfoInstances>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"287pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<\/p:drEventData>"]},{"entry":[{},"<p:customData\/>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"301pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<\/p:eventStates>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"315pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"<\/p:listOfEventState>."},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}]}}},"The data are received and normalized, and the values (time, event level (mode), price) are stored in the assigned PLC DR address registers. The client application configuration module  includes a configurable DRAS ,  polling period. During each PLC cycle when the demand response FB  is executed, if the polling period has expired, the demand response FB  will solicit the DRAS ,  to check for new DR data. If new DR data is available, the demand response FB  receives a new data message.","A DR signal may contain: 1) DR event data which may include price and\/or load shed\/shift levels; 2) a schedule of DR event and business information which is a date and time that specifies when a DR event occurs and when the information related to the DR event is valid and may be a single calendar event or a schedule (e.g., a schedule of prices wherein different timeslots during a DR event period represent different prices); 3) ancillary data that may aid the DR logic in determining how to respond to a DR event (e.g., source of energy\u2014green power); and 4) simplified DR event data which is an alternative representation of DR event data that allows a wider range of automation systems and load controllers to respond to DR events.","A demand response protocol receiver  receives data returned from the DRAS ,  (steps , ). The received DR data is converted, if required, using a normalizer to a compatible PLC format and is parsed to retrieve DR level data in accordance with the user\/DRAS contract (steps , ). The DR data may comprise the current DR event level (normal, medium, high) and energy cost. For example, during 1:00-3:00 PM the event level is medium, during 3:00-5:00 PM the event level is high, during 5:00-7:00 PM the event level is medium and after 7:00 PM the event level is normal. A DR level describes how much load may be curtailed. Normal is business as usual\/no curtailment, Moderate is medium curtailment and High means high energy curtailment. The amount for each of these levels is described in the contract with the Utility\/ISO\/Aggregator and different for each customer. Each DR event includes a time interval (e.g., from 1:00-2:00 PM: level=moderate, price=$1\/kWh; from 2:00-4:00 PM: level=high, price=$5\/kWh; from 4:00-6:00 PM: level=moderate, price=$2\/kWh). Dependent on the offered program the user can choose what the trigger will be (price\/level or both).","The demand response protocol receiver  forwards the information to a demand response protocol writer  which writes the formatted DR data in the DR address registers (step ).","The demand response load manger FB  DR data reader  reads the DR data from the demand response FB  DR address registers and compares the DR data in a demand response strategy engine  (step ). The demand response strategy engine  is a user configuration that specifies predetermined load constraints for each load address register. Each load address register is controlled by a logic statement that compares a DR event level with a configured (predefined) DR event level for that specific equipment.","The demand response load manger FB  user configuration specifies the address registers that control electrical load shedding, load shifting and\/or onsite generation. For example, lighting (#Light_Low, #Light_Medium, #Light_High), battery charging (#Charging, #Discharging), ventilation fan (#Fan_Off, #Fan_Low, #Fan_Medium, #Fan_High) and generator (#Generator_On, #Generator_Off) ().","For each selected load, a corresponding DR event level is assigned. The user decides whether an event level or the energy price for that level is compared. The user configuration may be created, for example, using the Standard Template Library (STL).","The DR strategy engine  in conjunction with the user configuration determines which loads are shed or sequenced on when an event level changes, or if the cost of energy reaches a predetermined threshold (step ).","One or more embodiments of the present invention have been described. Nevertheless, it will be understood that various modifications may be made without departing from the spirit and scope of the invention. Accordingly, other embodiments are within the scope of the following claims."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 5"}]},"DETDESC":[{},{}]}
