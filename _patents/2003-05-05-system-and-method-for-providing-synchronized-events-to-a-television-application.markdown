---
title: System and method for providing synchronized events to a television application
abstract: A set top box client in an enhanced television system stores a table associating time references with events. The table is accessed to synchronize the delivery of events to an enhanced television application that is associated with an underlying video program. The enhanced television system delivers broadcast video, video-on-demand and video from a storage component such as a personal video recorder or a digital video disk player. The enhanced television system further provides an application that provides enhancements to an associated video program by overlaying a user interface, by providing overlaid graphical and/or text information or by providing additional audio information.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08832754&OS=08832754&RS=08832754
owner: TVWorks, LLC
number: 08832754
owner_city: Philadelphia
owner_country: US
publication_date: 20030505
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","SUMMARY","DETAILED DESCRIPTION"],"p":["This application claims priority to U.S. Provisional Patent Application 60\/377,630, filed May 3, 2002.","The invention relates to interactive television generally and more specifically to synchronizing events to a television application such as an enhanced television application.","Advances in set top boxes and associated software have enabled the emergence of new types of television viewing experiences. These viewing experiences include television applications such as enhanced TV (described below), games, tickers and other interactive and non-interactive applications. In each of these instances, there is often a need to synchronize the operation of the application and its associated events with an underlying related video program.","Enhanced TV (\u201cETV\u201d) refers to the delivery of data to a client such as a set top box, a personal digital assistant, a video-enabled cellular phone, a television or other receiver in addition to conventional audio, video, teletext, and subtitle data that is delivered presently. This additional data may be used to enhance the viewing experience in many ways. It may be used to prompt the user to take certain actions, it may be used to place informational graphics on the television screen, or it may be used to create truly interactive programming, where the viewer has a great deal of control over what appears on the screen.","In a broadcast ETV system, a cable or satellite head end functions as a source. In this instance, the source is often a server or suite of servers that schedule and format enhancement data that sometimes needs to be synchronized with the conventional data. The enhancement data, in some instances, is then integrated into the audio and video data streams, and sent down to the end users' homes through a broadcast transmission system. The essential action of the source is the creation of a set of data for later distribution. Although the source is referred to in this document as a server, the source may not be a server in the strict sense. For instance, the source could be a software component that writes files to a disk for later broadcast or other distribution means, or annotates an MPEG file, or creates one or more proprietary files to be read by a transmission agent, such as a spooler.","On the end user side, there is generally a module in the television or set top box client in the viewer's home that interprets the ETV data. This module may carry out commands in the data itself, or it may launch a dedicated application, referred to as an enhancement, which may have its own methods of listening to and interpreting the ETV data.","In one system, ETV is an application running in a set-top box that is synchronized to the video appearing on the screen. For example, many companies have created ETV applications for game shows. When the on-screen contestants are asked a question during game play, the viewer is presented with the exact same question through an interface rendered by the set-top box. The ETV application generally allows user interaction, such as allowing the user to select an answer. This allows the viewer to play along with the video.","ETV and other television applications often need to perform certain events at the exact same time as on screen video events. Synchronizing the set-top box application with the on screen video is difficult for several reasons. Many set top boxes in particular are unable to read time code information normally associated with received video. Additionally, if video is received from a source that does not supply an embedded time code an alternative synchronization method must be used. Thus there is a need for a method of synchronizing an application with on screen video.","In accordance with one embodiment of the invention, an event table is used to store time references and associated events that are to be communicated to a television application that is preferably synchronized with an associated video program.","In accordance with another embodiment of the invention, a hardware timer resident on client hardware is set to a selected time in accordance with time references retrieved from the event table. When the timer indicates that the selected time has lapsed, the corresponding event is communicated to the television application.","In accordance with yet another embodiment of the invention, the event table is polled repeatedly, each time using a \u201ccurrent video time\u201d, to determine whether any events correspond to the \u201ccurrent video time\u201d. If an event corresponds to the \u201ccurrent video time\u201d, the event is communicated to the application.",{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 1A","b":["1100","1100","1101","1102","1103","1104","1105","1000","1106"]},"Application server  is an application server that provides one or more applications to client . Application server  may be a single application server or may be an interface to a system of application servers. Video broadcast server  is a video server that receives and transmits video from one or more sources. Video broadcast server  may additionally perform scheduling functions as well. Video broadcast server  may be a single computer or it may consist of many computers collaborating to create one or many broadcast streams. Video-on-demand server  is a video-on-demand server that provides video streams to one or more clients in response to a request from a user, a scheduler or from another source. Alternatively, video on demand server  is a video on demand gateway that provides an interface to one or more video-on-demand systems. Video from video-on-demand server  is generally provided to client  as a video stream. The video stream generally includes video or audio or both audio and video.","Application server , video broadcast server  and video on demand server  are configured to communicate with each other to enable desired functionality. In one embodiment, video-on-demand server  is configured to receive video from video broadcast server . In this configuration, video-on-demand server  stores video that is simultaneously being broadcast. The stored video is later transmitted to a client on demand to provide networked DVR\/PVR (digital video recorder\/personal video recorder) functionality.","Application server , Video broadcast server  and video-on-demand server  provide video and data to client  in accordance with a transport mechanism or protocol. In one embodiment, the video and data is provided to client  over a cable network using the MPEG-2 transport stream. In other embodiments, such video and data are provided over a satellite network or a DSL network. Alternatively, such video and data are provided using other network types, compression technology or other communication means.","Client  is a set top box as described in reference to  below. Client  is coupled to display , input device  and local video storage . Display  is a television display, computer monitor or other display device. Input device  is a device that allows a user to provide input to client . Exemplary input devices  include a remote control, a keyboard, a mouse and a voice activated control device. Other input devices may be used in accordance with the principles of the present invention. Local video storage  is storage device such as a digital video disk (DVD) player, a hard disk or a system of hard disks configured to store video at the client  location.","It should be understood that client , display , input device , and local video storage  may each be separate components or may integrated into a single component or any number of components. For example, client  and local video storage  may exist as a single component such as a set top box including sufficient local storage and control to provide local video storage capability. Alternatively, client  and local video storage  may exist as separate components such as a set top box coupled to a personal video recorder (PVR). In yet another embodiment, client , display  and input device  are integrated into a single component such as a personal digital assistant, a handheld computer, a cellular phone and the like.",{"@attributes":{"id":"p-0024","num":"0023"},"figref":["FIG. 1B","FIG. 1A"],"b":["1000","1000","1001","1003","1004","1007","1001","1001","1002","1003","1004","1001","1004","1007","1001","1004","1005","1006","1005","1007","1006","1007"]},"ETV application  is associated with, and synchronized with, a video program. As used herein, \u201cvideo program\u201d means any audio, video or combined audio and video program such as a television program. The video program may be received from any of a number of sources including from either a cable or satellite network, from hardware or a system co-located with the client  (e.g., a digital video recorder, a personal video recorder or a digital video disk player) or from within the client itself. In the latter instance, the video program may have been stored on a hard disk or other storage means internal to client .","ETV application  is associated with video that is received from any of the video-on-demand server , the video broadcast server , and local video storage . ETV application  is an application that runs on client  and provides information or content that is intended to be synchronized with the associated video. In one embodiment, ETV application  provides a display on display . In one embodiment, the display that is provided is a user interface that is overlaid over the associated video. In another embodiment, the display is a ticker that crawls across the bottom of display . It should be understood that ETV application  may or may not be an interactive application. It should be further understood that the information that ETV application  provides may be visual (such as graphical and text overlays), audio or a combination of the two.","In one embodiment, ETV application  is a software program written in a language such as Java, Javascript and HTML. ETV application  responds to events, at least some of which are time based events that are intended to be synchronized to the video associated with the particular ETV application .","In one embodiment, the ETV application  provides \u201cplay along\u201d capability associated with a game show in which contestants compete by answering questions. In this example, ETV application  and ETV service  cooperatively provide a participating user (subscriber) at a client location with an on screen interface, overlaid on top of the game show program, which allows the user to answer and keep score along with the game show. One mechanism by which ETV service  communicates with ETV application  is by passing \u201cevents\u201d from ETV service  to ETV application . An event is a message that provides instructions such as an instruction to display a particular user interface or an instruction to prompt the user. As used herein the term \u201cevent\u201d means an event or, alternatively, a reference to an event. In this example, ETV application  must receive events at certain times to maintain synchronization with the associated video program. For example, a user should be presented a question at the same time that the corresponding question is presented in the associated video. Similarly, a user should be precluded from answering a question once the answer has been announced in the associated video.","In accordance with the present invention, synchronization is realized by using event table .  illustrates an event table in accordance with the present invention. Event table  includes a set of time references  each having an associated event reference . Event table  additionally optionally includes further associations such as auxiliary information  or other information, not shown. Time references  are either absolute or relative time indicators that indicate when associated events should occur in the course of the video with which the ETV application is associated. Event references  are either actual events to be communicated to ETV application  or a reference to the event that is to be communicated.","In some embodiments, auxiliary information  indicates whether the event has already been delivered to enhanced TV application  or, alternatively or additionally, how many times it has been delivered. In other embodiments auxiliary information includes any of the following: a parental control rating, a skill level rating, expiration information, authorization information, hardware requirement, software requirement and other information that can be used by ETV application . In another embodiment, auxiliary information  provides information that instructs ETV application  how to process the associated event when the associated video is being displayed in a \u201ctrick play\u201d mode such as fast forward and rewind. Auxiliary information can further instruct ETV application  how to process the associated event after the associated video has been rewound or fast forwarded. Similarly, auxiliary information  can instruct ETV application how to process the associated event while the associate video is paused and after the associated video has been stopped and then later resumed.","It should be understood that although the event table  is described and illustrated as a table, it can be implemented in any number of ways including by a linked list, an N-dimensional array, a database relation, a database record or other construct. It should further be understood that, in accordance with the invention, the software components described herein can be implemented as a single module or as separate modules having functionality divided in a way that is different than the division described herein. For example, in some embodiments, the ETV service  and the ETV application  may be combined as single application. Alternatively, the functionality of ETV application  and ETV service  may be spread across more than two software components. Similarly, event table  may reside within ETV service  or alternatively within either the ETV application  or the operating system .","In one embodiment, event table  is delivered to client  prior to the start of the associated video program. Alternatively, event table  is built dynamically during the presentation of the associated video program. Event table  may also be delivered in part prior to the start of the video and then completed during presentation of the associated video. This method of event table delivery lends itself in particular to ETV applications having a mixture of events, some of which are known to occur at predetermined fixed time within the video and others of which that are not known as predictably. Enhancement events associated with a newscast may fit this pattern if, for example, weather and sports are known to occur at predetermined fixed times within a news broadcast (e.g. 15 minutes in and 23 minutes in, respectively) but other events tied to changing news items do not occur at fixed predetermined times.","In another embodiment, event table  is not received from an external source but instead is built by a module running on client , such as by ETV application  or another application. In some embodiments, event table  contains a complete listing of all events associated with the corresponding video. In alternative embodiments, a memory management module enables the selective removal and\/or overwriting of some events in event table .","In a first method of operation, ETV service  repeatedly polls event table  to determine whether a current video time corresponds to any time references stored in event table . If the current video time does correspond to an event in the event table , then the corresponding message is communicated to ETV application . Determining whether the current video time corresponds to an event in event table  is performed by comparing the current video time to a time reference in event table  using a predefined criteria. In one embodiment, the comparison determines whether the current video time and the time reference are substantially equal (e.g., the same within a predetermined threshold). In another embodiment the comparison determines whether the current video time is greater than or equal to the reference time.","As discussed above, in alternative embodiments additional associations such as status may also be stored in event table . In these instances, the status and\/or additional association may also be communicated to the ETV application . Alternatively, the auxiliary or additional association may cause the event not to be communicated. In this embodiment, ETV service  determines a \u201ccurrent video time\u201d with which to poll (e.g., perform a look up in) event table . The \u201ccurrent video time\u201d corresponds to the current time (either relative or absolute) in the video associated with the ETV application . ETV service  determines the current video time in any of a number of ways.","In one embodiment, the current video time is determined as a time offset that is started coincident with the start of the video. In this embodiment, the ETV service  determines the current system time (e.g. queries the set top hardware  for the current time) at the time that the video starts. ETV service  thereafter performs subsequent queries of the system time, computes an offset (difference) from the start time to derive a \u201ccurrent video time\u201d.","In another embodiment, the current video time is determined from a source external to client . For example, in cases where the video program is received from either a local storage device (e.g., a personal video recorder (\u201cPVR\u201d) or a DVD) or from a remote storage device (e.g., video-on-demand or networked PVR) current video time may be received from such external source as either a signal embedded in the video program or on a separate communication path.","As an alternative to the polling method of accessing event table , the present invention can use a timer, preferably hardware timer , on set top hardware . In this embodiment, ETV service  sets hardware timer  in accordance with the time associated with the next event in event table . Once the timer indicates that the desired amount of time has elapsed, the corresponding event is communicated to ETV application  and timer  is reset for a time corresponding to the time reference associated with the next event. Further, in this embodiment, event table  is accessed in time sequential sorted order. For example, the table is sorted based on time prior to access.",{"@attributes":{"id":"p-0039","num":"0038"},"figref":["FIG. 3","FIG. 3"],"b":["100","101","102","105","105"]},"The application receives notification  that the video-on-demand stream has started playing. The application next enters a continuous loop until the video clip stops playing. The application then receives  the current time code, i.e. the current elapsed time in the video clip, from the video-on-demand server . The application uses a lookup table  to determine  whether or not to trigger an event. The lookup table  contains an association between the time code and events that must happen within the application. If there is an associated event, the event is performed  and the application returns to its previous state . If there is no associated event, the application returns to its previous state .",{"@attributes":{"id":"p-0041","num":"0040"},"figref":"FIG. 4","b":["200","201","202","205","205"]},"The application receives notification that the video-on-demand stream has started playing  from the video-on-demand server . The application queries the system clock  for the current time and saves the result in memory . The application then enters a continuous loop until the video clip stops playing. The application queries the system clock  again for the current time and compares it to the video-on-demand stream starting time previously saved in memory . The calculated result is the elapsed time since the time that the video-on-demand clip started, i.e. the video time code, which can be used to synchronize events.","The application uses a lookup table  to determine  whether or not to trigger an event. The lookup table contains an association between the elapsed time and events that must happen within the application. If there is an associated event, the event is performed  and the application returns to its previous state . If there is no associated event, the application returns to its previous state .","It should be understood that although the embodiments described herein disclose the synchronization of enhanced TV applications, the principles of the present invention apply to the synchronization of events with other kinds of television applications including but not limited to games, non-interactive enhanced television, educational applications, testing applications, sports, gambling and tickers.","Although the invention is described herein with reference to the preferred embodiment, one skilled in the art will readily appreciate that other applications may be substituted for those set forth herein without departing from the spirit and scope of the present invention. Accordingly, the invention should only be limited by the Claims included below."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 1A"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":["FIG. 1B","FIG. 1A"]},{"@attributes":{"id":"p-0015","num":"0014"},"figref":["FIG. 2","FIG. 1B"]},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 4"}]},"DETDESC":[{},{}]}
