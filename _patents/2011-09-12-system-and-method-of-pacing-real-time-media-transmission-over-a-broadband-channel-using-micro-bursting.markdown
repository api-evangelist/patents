---
title: System and method of pacing real time media transmission over a broadband channel using micro bursting
abstract: A wireless system for streaming media files includes a microburst gateway in which microbursts, comprising groups of buffered packets of the streamed media, are transmitted periodically to a user over a broadband channel over respective window periods, the bursts being transmitted at a higher than an average packet rate associated with the media file. At the start of each fairly long window period of 500 ms, for example, one microburst is sent over the broadband channel, leaving the remainder of the window period available for other users. The window period and a number of packets in the burst within the window period are defined so that the average packet rate is substantially maintained. A corresponding microburst gateway and a method for transmitting the media file are also provided.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08681768&OS=08681768&RS=08681768
owner: Vantrix Corporation
number: 08681768
owner_city: Montreal, Quebec
owner_country: CA
publication_date: 20110912
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS REFERENCE TO RELATED APPLICATIONS","FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE EMBODIMENTS OF THE INVENTION"],"p":["This application claims priority from U.S. provisional application 61\/385,108 filed on Sep. 21, 2011 for \u201cSystem and Method of Pacing Real Time Media Transmission over a Broadband Channel using Micro Bursting\u201d, entire contents of which are incorporated herein by reference.","The present invention relates to the wireless transmission of real time media, and in particular to a system and method for pacing real time media transmission over a broadband channel using micro bursting.",{"@attributes":{"id":"p-0004","num":"0003"},"figref":"FIG. 1","b":["100","102","104","106","108","110","112","114","116"]},"Modern wireless services such as Third Generation (3G), Worldwide Interoperability for Microwave Access (WiMAX), and WiFi using IEEE . family of standards provide an on-demand broadband channel for carrying data packets between the wireless base station  and a mobile unit , which may, for example, be a smart phone or a laptop computer.","The wireless base station  may be connected over the internet  to servers, including the media server .","A media session may be requested by the mobile unit . The purpose of the media session is to send a stream of media packets (a media file) from the media server  to the mobile unit  via the wireless base station .","The media session is carried in a virtual connection between the media server  and the mobile unit , according to a standard protocol, for example the Hypertext Transfer Protocol (HTTP), protocol data units (PDUs) of this higher level protocol being in turn carried over the Transmission Control Protocol (TCP). The media server  transmits the media packets to the wireless base station  over the internet . The wireless base station  allocates an available broadband wireless channel to the mobile unit , and forwards the media packets to the mobile unit .","The transmission rate of the media packets may be throttled such that sufficient data is available at the mobile unit  to display the media, for example, audio or video, in real time without excessive buffering.","When the bandwidth of the wireless channel is greater, perhaps much greater, than the bandwidth required to send the throttled media packets in real time, a large amount of the wireless resource, i.e. of the allocated channel, may be wasted.","Accordingly, a method and system to improve the efficiency in the use of the wireless broadband channel are required.","There is an object of the invention to provide an improved system and method for transmitting a media file from a media server to a mobile unit.","According to one aspect of the invention, there is provided a microburst gateway for transmitting a media file over a transmission channel having excess bandwidth, the microburst gateway comprising:","a processor and a computer readable storage medium having computer readable instructions stored thereon for execution by the processor, forming:",{"@attributes":{"id":"p-0014","num":"0000"},"ul":{"@attributes":{"id":"ul0001","list-style":"none"},"li":{"@attributes":{"id":"ul0001-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0002","list-style":"none"},"li":["a packet buffer, receiving and storing data packets of the media file; and","a microburst controller, controlling transmission of the data packets stored in the packet buffer in bursts, recurring over respective window periods, at a higher than an average packet rate, the average packet rate being associated with the media file, each window period comprising a burst duration time during which a burst is transmitted and a remaining idle time, the window period and a number of packets in the burst within the window period being defined so that the average packet rate is substantially maintained."]}}}},"The average packet rate is a function of a profile of the media file.","The microburst gateway further comprises:\n\n","In the embodiments of the invention, the source is a server computer, and the destination is a wireless base station serving a mobile unit over a broadband wireless channel, and the microburst gateway may be contained within the media server computer or within a wireless base station.","The microburst controller is further configured to determine duration of a window period and a packet count limit for the window period, and the microburst gateway further comprises:\n\n","The microburst gateway further comprises a window timer for timing the window period. In the embodiments of the invention, the duration of the window period is in a range from about 100 ms to about 1000 ms. Conveniently, the idle time is at least 50% of the window period, and the excess bandwidth is at least twice of the bandwidth required for carrying the data packets.","In the embodiments of the invention, the duration of the window period is further limited by one or more of the following:\n\n","For example, the minimum hold-over period may be about 10 ms.","In the microburst gateway described above, the data packets in each burst are continuous and transmitted using a full bandwidth of the transmission channel.","The data packets in each burst are protocol data units of a standard transmission protocol, for example, a Transmission Control Protocol (TCP) or another protocol.","According to yet another aspect of the invention, there is provided a system for transmitting a media file over a transmission channel having excess bandwidth, comprising:\n\n","The system of the embodiments of the invention operates according to the wireless standard, which is one of Second Generation (2G), Third Generation (3G), Fourth Generation (4G) net-works standards, Long Term Evolution (LTE), LTE Advanced, Worldwide Interoperability for Microwave Access (WiMAX), and Wi-Fi.","The system further comprises an Internet connection between the microburst gateway and the wireless base station. The wireless base station may also include a satellite.","Conveniently, the system may be configured so that the wireless base station transmits other data in the wireless broadband channel during the idle time.","In the system described above, the wireless broadband channel has sufficient bandwidth required for carrying the data packets, plus an excess bandwidth.","Conveniently, the idle time is sufficiently long to carry another burst associated with another media file.","According to another aspect of the invention, there is provided, in a microburst gateway for transmitting a media file over a transmission channel having excess bandwidth, comprising a packet buffer receiving and storing data packets of the media file, a processor and a memory having computer readable instructions stored thereon for execution by the processor:\n\n","According to yet another aspect of the invention, there is provided a method for transmitting a media file over a transmission channel having excess bandwidth, comprising:\n\n","The method further comprises repeating the steps (a) and (f) until the media file is transmitted.","The method further comprises:\n\n","In the method described above, the step (b) comprises defining the window period, which is in a range from about 100 ms to about 1000 ms.","In the method described above, the step (b) further comprises defining the window period, which is further limited by one or more of the following:\n\n","Conveniently, the minimum hold-over period may be about 10 ms.","In the method described above, the step (d) comprises sending so that the data packets in each burst are continuous and transmitted using a full bandwidth of the transmission channel.","The step (d) comprises sending the data packets in each burst according to a standard transmission protocol, for example, according to a Transmission Control Protocol (TCP) or another protocol.","In the embodiments of the invention, the step (b) comprises defining the idle time, which is at least 50% of the window period. In the method described above, the excess bandwidth is at least twice of the bandwidth required for carrying the data packets.","The method further comprises providing the transmission channel, which is a wireless broadband channel according to a wireless standard for mobile users, for example, Second Generation (2G), Third Generation (3G), Fourth Generation (4G) networks standards, Long Term Evolution (LTE), LTE Advanced, Worldwide Interoperability for Microwave Access (WiMAX), and Wi-Fi.","According to yet one more aspect of the invention, there is provided a method for transmitting a media file over a transmission channel having excess bandwidth, the method comprising:\n\n","Thus, an improved system and method for transmitting a media file in the form of periodic short bursts of data packets from a media server to a mobile unit have been provided.",{"@attributes":{"id":"p-0053","num":"0082"},"figref":"FIG. 2","b":["200","100","202","102","106","104","202","102","204","104","202","106","206"]},"Alternatively, the Microburst Gateway  may be co-located with the media server  in which case the media connection  may be over a local link.","Higher wireless efficiency is achieved by intercepting a media file through the Microburst Gateway  according to a method of the invention, which requires no changes in the wireless base station  or the mobile unit , and makes use of existing internet protocols, preferably HTTP.","Rather than keeping the allocated wireless channel to the mobile unit  open for the duration of a transfer (a call), the transfer is accomplished in periodic short bursts (termed \u201cmicrobursts\u201d). Each microburst is followed by a comparatively long pause that allows the base station to release the broadband channel between microbursts.","At the start of a media transmission according to the invention, an HTTP session which includes a TCP connection between the mobile unit  and the media server  is set up. Based on the need for packets to flow upstream and downstream, the wireless base station  will allocate wireless broadband channels. This includes a broadband download channel of a mobile bandwidth of \u201cX\u201d Mb per second to the mobile unit . The mobile bandwidth \u201cX\u201d is a fraction of a total wireless bandwidth \u201cZ\u201d, measured as Mb per second, that is available at the wireless base station  to be shared with all mobile units that are currently accessing the wireless base station.","Typically when there is no packet to transmit for more than about 10 ms hold-over period the broadband download channel will be de-allocated by the wireless base station  and may be assigned to another user.","A throttling window of a fixed window period W, for example W=500 ms, may be selected in the Microburst Gateway , the window period \u201cW\u201d being selected statically based on the con-figuration of the hold-over time in the base station.","In the embodiments of the invention, the duration of the window period is in a range from about 100 ms to about 1000 ms. The actual hold-over period is determined by a channel management function of the wireless base station , as defined in an applicable specification for the wireless base station . The hold-over period may be assumed to be typically 10 ms, and may range from 1 to 50 ms, depending on wireless base station design.","An average bandwidth \u201cA\u201d (Mb per second) that is required for transmitting the given media is determined in the media server when an HTTP streaming session is setup, by analyzing dynamically the bandwidth required to play back the media in real time. Information regarding the average bandwidth \u201cA\u201d is available from the profile of the media file, including visual profile, audio profile, graphics profile, scene graph profile MPEG-J profile et al., and can be obtained during the HTTP streaming session setup.","A copy of the MPEG4 standard, which is a standard for video coding, is available from http:\/\/mpeg.chiariglione.org\/standards\/mpeg-4\/mpeg-4.htm. The MPEG4 standard is only one of several standards for the encoding of media files, each standard providing one or more media profiles thus providing for average bandwidth figures for specific media types and coding levels.","The present invention takes advantage of the case where the average bandwidth \u201cA\u201d is less, and preferably significantly less than the mobile bandwidth \u201cX\u201d. From the average bandwidth information, a number \u201cP\u201d of packets, each carrying \u201cp\u201d bytes of the media file in each throttling window of period \u201cW\u201d, may be determined as follows:","The total number of bits per throttling window period that can be carried in the broadband download channel is:\n\n\n","The number of bits required to transmit a portion of the media in the window period W:\n\n, where \u201c\u201d may be much less than \u201c\n","The corresponding number of packets P, that is, a set of media packets, each carrying p*8 bit, in a window period \u201cW\u201d is:\n\n\/(8).\n","The media file is transmitted by the Media Server  in the form of media packets over the media connection  at the average bandwidth \u201cA\u201d. The Media Server  does not need to be aware of the presence of the Microburst Gateway , which buffers the media packets and releases them in sets of \u201cP\u201d media packets to be transmitted in bursts at a speed corresponding to the mobile bandwidth \u201cX\u201d of the wireless broadband download channel over the internet connection .","When a first set of media packets has been transmitted by the Microburst Gateway , the Microburst Gateway  will pause for the rest of the window period W. Each set of media packets (P packets) is transmitted as fast as the network allows it. The term \u201cmicroburst\u201d will be used herein to denote a set of \u201cP\u201d media packets. When the microburst reaches the base station  a broadband download channel will be allocated by the base station  to deliver the packets to the mobile unit . Once all the packets of a microburst have reached the mobile unit , and no more packets are available for the mobile unit , the base station will de-allocate the broadband download channel after a short hold-over period \u201cTo\u201d, for example \u201cTo\u201d=10 ms, the hold-over period \u201cTo\u201d being a configured property of the wireless base station  and may be shorter or longer than 10 ms. The wireless base station  is now free to allocate the wireless broadband channel to another user, that is, the remainder of the throttling window after the microburst has been delivered, is available for the total bandwidth \u201cX\u201d of the wireless broadband channel to be used now in other transmissions (to other mobile units, including the mobile unit  for example).","At the start of each window period W, a new set of \u201cP\u201d packets, i.e. another microburst, is sent by the Microburst Gateway , and the base station  will allocate a fresh wireless broadband download channel. A microburst of \u201cP\u201d packets is then transferred from the Microburst Gateway  to the mobile unit , after which the wireless download channel is released again by the wireless base station .","The Microburst Gateway  may be independently and simultaneously serving connections to multiple mobile units (, , etc.) at the same time. A staggered set of windows, each of the length of window period W, for example may be managed independently on a per connection basis, to provide an interleaved set of microbursts.",{"@attributes":{"id":"p-0071","num":"0100"},"figref":"FIG. 2A","b":["250","200","250","202","102","252","250","200","204","104","252"]},{"@attributes":{"id":"p-0072","num":"0101"},"figref":"FIG. 2B","b":["260","200","260","202","106","262","260","200","206","104","262"]},{"@attributes":{"id":"p-0073","num":"0102"},"figref":["FIG. 3","FIG. 2"],"b":["300","200","102","106","202","302","304","306","302","306","308","308","1","308","2","204","206"]},"The microburst process  comprises computer readable instructions stored in a computer readable storage medium such as the Program Storage Memory , for execution by a processor such as the CPU .","In one embodiment, the Microburst Gateway  comprises computer readable instructions stored in a computer readable storage medium such as memory for execution by a general purpose or specialized processor. Alternatively, the Microburst Gateway  may be implemented in firmware.","Software program instructions of the microburst process  are found in the following program modules: a microburst control module , a window timer , a packet counter , a server interface , a packet buffer , a packet gate module , and a Network Protocol Interface , each of these modules comprising non-transitory computer readable storage medium such as memory storing computer readable instructions for execution by a general purpose or a specialized processor.","Additional instances N of the microburst process  may be created as needed, to serve additional mobile units which may be receiving the same or different media files over the same or different wireless base stations, preferably using the same window size although the individual windows do not need to be synchronized.","In operation, a media file  from the media server  is received by the server interface  over the media connection  and the first network interface ., and is buffered in the packet buffer . The capacity of the packet buffer  may be as large as an entire media file, but is preferably not much larger than is needed to buffer the packets of a few microbursts, given a selected window period W, because it may be assumed that sending the microbursts will be draining the buffer faster than the media server can fill it. The packet buffer  may be conventionally implemented.","The microburst control module  determines the parameter \u201cW\u201d defining the window period W, and programs the window timer  accordingly, i.e. restarts the window timer  at the beginning of each window period. The microburst control module  further determines the number of packets \u201cP\u201d that will be sent in each microburst, and stores the value of \u201cP\u201d in a \u201cP Limit\u201d register of the packet counter. The microburst control module  may obtain any necessary profile information of the media file that is available during the streaming session setup, by accessing the Server Interface . From the media file profile which includes information on the average bit rate of the media file, the average packet rate is calculated by the microburst control module  as described above.","At the start of each burst window period, the packet counter  is cleared by the window timer , and the packet gate module  is enabled by the microburst control module .","Buffered packets of the media file  are transmitted from the packet buffer  through the packet gate module  to the Network Protocol Interface  and delivered via the second network interface . over the internet connection  to the wireless base station , and so ultimately to the mobile unit . The network protocol utilized and provided by the Network Protocol Interface  is preferably the standard Transmission Control Protocol (TCP), although other protocols are also envisaged. The Network Protocol Interface  provides an indication to the packet counter  for each packet that has been sent. Transmitted packets are counted in the packet counter , and when the number of packets reaches the packet limit P, i.e. one microburst has been sent, the microburst control module  is informed by the packet counter  and the packet gate module  is disabled so that no further packets are sent out, until the next window period \u201cW\u201d starts.","When the window period \u201cW\u201d expires, as determined by the window timer , another window period is started: the window timer  starts counting the next window period, the packet counter  is cleared, and the packet gate module  is enabled to allow up to \u201cP\u201d packets to be sent again. The window period is thus composed of a burst duration time and an idle time. The burst duration time ends after \u201cP\u201d packets have been sent or, in the start-up phase as well as the finishing phase, when the packet buffer  is empty.","Preferably, the idle time is at least 50% of the window period, and the excess bandwidth is at least twice of the bandwidth required for carrying the data packets.","In the start-up phase, transmission of microbursts preferably begins as soon as any number of packets, for example just the first packet of the media file have arrived in the packet buffer . The first, or the first few microbursts of the start-up phase may then contain fewer than \u201cP\u201d packets because the packet buffer  is being filled with packets from the Server Interface  at a lower rate than it is drained by the Packet Gate . When as a result the packet buffer  is temporarily empty and no packets are available to continue the microburst, the microburst is ended and the system waits for the next window period to start, i.e. the idle time. As the buffer continues to fill during the idle time, the next microburst will have more packets available and so on, until either equilibrium is achieved. Similarly, in the finishing phase, less than \u201cP\u201d packets may be left in the packet buffer  for the last microburst.","The average rate of packets arriving from the media server  should ideally at least slightly exceed the rate of packet transmission in the microbursts. By the same token, it is also possible to ingest the entire media file  in the packet buffer  at much higher speed, but that would require a much larger capacity of the packet buffer . Transmission to the mobile unit  is then still controlled by the Microburst Gateway  to match the average bandwidth that was determined in the HTTP streaming session setup.",{"@attributes":{"id":"p-0086","num":"0115"},"figref":["FIG. 4","FIG. 4"],"b":["400","402","404","202","204","406","408","408","410","408","0","408","1","408","2","400","402","406"],"i":["i","i ","i "],"sub":"b"},"Data packets , representing the content of the media file  arrive at the Microburst Gateway  from the media server , at an average rate corresponding to the average bandwidth \u201ca\u201d that is sufficient to support the real time display of the media file  in the mobile unit  as described earlier. Approximately \u201cP\u201d packets arrive in each window period \u201cW\u201d of the throttling windows . This is illustrated in packet sequences . and . each of which includes \u201cP\u201d packets as indicated by sequence numbers 1, 2, 3, . . . P.","While the actual number of arriving packets in each window period \u201cW\u201d may vary considerably and is consequently buffered in the packet buffer , the average number of packets per window period \u201cW\u201d will be \u201cP\u201d. Each group of \u201cP\u201d packets is forwarded into a microburst , the packet sequence . as the microburst . of the throttling window ., and the packet sequence . as microburst . of the throttling window .. The arrival of the last packet, i.e. the \u201cP\u201d-th packet , of a previous packet sequence . (which is not shown in ) completes the set of packets of the microburst . of the throttling window ..","A microburst duration Bi (B to B), shown in  to indicate the duration of each microburst ., is a function of the number of packets \u201cP\u201d, and the actual bandwidth available to transmit the \u201cP packets of the microburst to the mobile unit  over the internet connection  to the wireless base station . The microburst duration Bi is further affected by the action of the transmission protocol used on the internet connection , for example TCP. Because the TCP connection is suspended after each microburst and then resumed at the start of the next microburst, the TCP windowing mechanism causes the packet transmission rate within each microburst to increase from zero and gradually increase to a maximum governed by the available bandwidth. As a result, the actual microburst duration Bi is not fixed. Alternatively, the connection may also use another protocol for transmitting the data packets of each microburst. Using the other protocol, i.e. a protocol without feedback constraints, allows the data packets in each burst to be continuous and be transmitted using the full bandwidth of the transmission channel.","Following the transmission of the last packet of each microburst , the TCP connection may be kept open while no packets are sent. As a result, the wireless base station  will time out after a minimum hold-over period \u201cTo\u201d and release the wireless broadband channel  to the mobile unit , to ensure the wireless broadband channel becomes free for other uses between bursts. This leaves a remaining period \u201cTr\u201d in each throttling window , a period in which the wireless base station  is able to use the freed-up wireless broadband channel otherwise, for example assign it to another mobile unit. The sum of the hold-over period \u201cTo\u201d and the remaining period \u201cTr\u201d in each window is considered as an idle time in which the wireless broadband channel is available for other traffic. Preferably, the idle time is substantially longer than the microburst duration Bi and the minimum hold-over period \u201cTo\u201d, at the very least longer than 2-10 hold-over periods \u201cTo\u201d, or even longer in order to allow for other traffic to take advantage of the remaining period \u201cTr\u201d.","While the window period should be selected long enough to allow a sufficiently long idle time, so that it is substantially longer than the minimum hold-over period, the length of the window period is also limited by the following considerations:","The length of the window period is directly proportional to the number of packets \u201cP\u201d in each microburst. It is assumed that the ultimate receiver of the microbursts, i.e. the mobile unit  or specifically the video decoder in the mobile unit , has sufficient buffer capacity to smooth the received microburst packets into the required real time video sequence. Therefore, the selection of the window period should be based on an expected reasonable buffer capacity in the receiver receiving the media file.","The internet connection  will time out after a connection timeout value which is associated with the protocol used for transmitting the data packets. This connection timeout value is expected to be quite long in a typical system, on the order of several seconds, but future high speed systems may consider protocols with shorter connection timeout values. The window period should not be longer than the connection timeout.","Another reason for restricting the length of the window period is the absolute added delay that is caused by the packet buffer . This delay which is added to any transmission delay from the media server  to the receiver, i.e. the mobile unit , corresponds to the time represented by packets having arrived from the media server  in the packet buffer , but waiting for the next microburst to be sent on to the mobile unit . For ordinary one-way delivery of media files for real time viewing for example, this added delay may not be of concern. It may be of concern with interactive media or two-way video, and becomes another reason not to make the window period too long.","In effect, the wireless broadband channel may be considered to be similar to an Ethernet local network bus in some respects. For example, the wireless broadband channel by virtue of the micro-bursting technique, disclosed in the present invention, allows dynamic timesharing of a single wireless broadband channel for providing simultaneous media delivery to multiple mobile units. For example, according to embodiments of the invention, the idle time is intended to be sufficiently large to permit another burst associated with another media file, to be sent in the same window period.","It is noted that the wireless base station  may be constructed according to any standard which provides a wireless broadband channel supporting the Internet Protocol (IP). Applicable standards include wireless Second Generation (2G), Third Generation (3G) and Fourth Generation (4G) networks standards, Long Term Evolution (LTE), LTE Advanced, Worldwide Interoperability for Microwave Access (WiMAX) and Wi-Fi for example.","It is further noted that a system for distributing media files over a broadband wireless channel over a satellite using microbursts according to embodiments of the invention should be considered to be within the scope of the invention.",{"@attributes":{"id":"p-0098","num":"0127"},"figref":"FIG. 4A"},{"@attributes":{"id":"p-0099","num":"0128"},"figref":"FIG. 5","b":"500"},"step : \u201cReceive Media Request From Mobile Unit\u201d;","step : \u201cForward Media Request To Media Server\u201d;","step : \u201cGet Media Parameters\u201d;","step : \u201cDetermine Packet Count P\u201d;","step : \u201cReceive Media Packet and Store in Buffer\u201d;","step : \u201cIs Media File complete?\u201d;","step : \u201cStart Window Timer\u201d;","step : \u201cRead up to P Packets from Buffer\u201d;","step : \u201cSend Microburst\u201d;","step : \u201cIs Packet Buffer Empty?\u201d; and","step : \u201cWait for Window Timeout\u201d.","The micro-bursting method  may be executed in the Microburst Gateway  of  and according to the microburst process  of .","After a media request for a media file in a media server, for example for the Media File  in the Media Server , is generated by a mobile unit, for example the mobile unit , and relayed by the Wireless Base Station  to the Microburst Gateway , the request is registered in the microburst process  in the step  \u201cReceive Media Request From Mobile Unit\u201d. This includes establishing a TCP connection between the mobile unit and the Microburst Gateway  over the internet link .","In the step  \u201cForward Media Request To Media Server\u201d, the media request is forwarded to the media server concerned, and a second TCP connection, over the media link  between the Microburst Gateway  and the media server is established. From this point on, information can be exchanged between the mobile unit and the media server, whereby the Microburst Gateway  acts as a proxy.","In the step  \u201cGet Media Parameters\u201d, media parameters which are exchanged between mobile unit and the media server are monitored in the Microburst Gateway , specifically to obtain the average bandwidth \u201cA\u201d required to stream the requested media in real time.","In the step  \u201cDetermine Packet Count P\u201d, the packet count \u201cP\u201d to be used in micro-bursting is calculated as a function of the average bandwidth \u201cA\u201d and the window period \u201cW\u201d. The window period \u201cW\u201d may have been configured as a constant value, for example 500 ms, or optionally be determined within a range from about 200 ms to 1000 ms, as a function of network conditions associated with the properties of the links to one or both, of the mobile unit and the media server.","From this point on, two loops are executed concurrently: A receiving loop , comprising the steps  and  required to receive all media packets representing the media file sent by the media server over the link ; and a micro-bursting loop  comprising the steps  to  in which the received packets are transmitted to the wireless base station over the link  and thereby to the mobile unit.","In the step  \u201cReceive Media Packet and Store in Buffer\u201d, one received media packet is stored in the Packet Buffer .","In the step  \u201cIs Media File complete?\u201d, it is determined if the complete file has been received. If it has not yet completely been received (exit NO from the step ) the execution continues with the step , otherwise (exit YES from the step ) the receiving loop  is stopped. However, the concurrent micro-bursting loop  continues to send the media packets until the packet buffer  is empty.","In the step  \u201cStart Window Timer\u201d, the Window Timer  is started to time a new window period \u201cW\u201d.","In the step  \u201cRead up to P Packets from Buffer\u201d, a number \u201cP\u201d of media packets is read from the Packet Buffer  to form a microburst  of \u201cP\u201d packets, see . If at least one, but less than \u201cP\u201d packets are available in the packet buffer, the media file may be almost complete. In that case, the available less than \u201cP\u201d packets are read in the step  and sent in the next step","In the step  \u201cSend Microburst\u201d, the microburst  is transmitted to the wireless base station over the link  and thereby to the mobile unit.","In an alternative embodiment of the invention, the steps  and  may be replaced a subroutine  \u201cSend Microburst from Buffer\u201d which is expanded in .",{"@attributes":{"id":"p-0112","num":"0141"},"figref":"FIG. 6","b":"528"},"step : \u201cReset P_Count\u201d;","step : \u201cIs Packet Buffer Empty?\u201d;","step : \u201cRead one Packet from Buffer\u201d;","step : \u201cSend one Packet\u201d;","step : \u201cIncrement_P_Count\u201d; and","step : \u201cIs P_Count equal P\u201d.","Through subroutine  \u201cSend Microburst from Buffer\u201d, a single microburst is sent directly from the packet buffer, one packet at a time while keeping track of the packets that have been sent in the microburst, in a packet counter. Depending on the type of network API (Application Programming Interface) of the Network Protocol Interface , this method may be more efficient than the pair of steps  and  above which may be implemented by first copying a block of \u201cP\u201d packets from the Packet Buffer  into a temporary memory block that may be associated with the network API (step ), and then sending the entire block of \u201cP\u201d packets out (step ).","Other implementations for transmitting a microburst from the packet buffer to the internet link , that is variations of the steps +, or equivalently the subroutine , may occur to those skilled in the art, and are within the scope of the invention.","In the step  \u201cReset P_Count\u201d, a packet counter, for example the Packet Counter  () is reset to zero.","The steps  to  constitute a loop, each iteration of which serves to send a single packet from the packet buffer to the internet link ","In the step  \u201cIs Packet Buffer Empty?\u201d, it is determined if the packet buffer is empty. This may occur, for example, at the end of the media file, when the total number of packets in the media file is not an integer multiple of the microburst size \u201cP\u201d. If the packet buffer is empty (exit YES from the step ), the subroutine  returns, otherwise (exit NO from the step ) execution continues with the next step .","In the step  \u201cRead one Packet from Buffer\u201d, a single packet \u201cS\u201d is read from the Packet Buffer , and in the step  \u201cReset P_Count\u201d, this packet \u201cS\u201d is transmitted.","In the step  \u201cIncrement P_Count\u201d, the packet counter is incremented to account for the packet \u201cS\u201d that was sent.","In the step  \u201cIs P_Count equal P\u201d, it is determined if the packet count has reached \u201cP\u201d. If it has reached \u201cP\u201d (exit YES from the step ) the microburst is complete and the subroutine  returns, otherwise (exit NO from the step ) additional packet(s) are to be sent, and the loop execution continues from the step .","Attention is now drawn back to .","In the step  \u201cIs Packet Buffer Empty?\u201d, it is determined if the packet buffer is empty. If the packet buffer is empty, this means that there are no more packets available because the entire media file has been sent to the mobile unit. In that case (exit YES from the step ), the micro-bursting method  is finished and exits, otherwise (exit NO from the step ) execution continues with the next step .","In the step  \u201cWait for Window Timeout\u201d, the Window Timer  continues to count down. When the timer expires, i.e. times out, the step  ends and execution continues with the step , that is another iteration of the micro-bursting loop  is started.","The micro-bursting method  of  is designed to begin transmitting microbursts to the mobile unit as soon as the start of the media file is received and continue sending microbursts concurrently with receiving media file packets from the media server. This assumes that the pace of streaming of packets from the media server is at least as high as the average bandwidth \u201cA\u201d required to stream the requested media in real time. But if the arrival rate of packets from the media server is insufficient, this could have an undesirable side effect in not having sufficient packets, that is less than \u201cP\u201d packets available for micro-bursting in each window period \u201cW\u201d. To avoid this, a minimum number of \u201cP\u201d packets or more may be accumulated in the packet buffer before sending the first microburst.","In an alternative embodiment, the entire media file may be received and stored in the packet buffer , before transmission to the mobile unit is begun.","In the embodiments of the invention described above, micro busts have been sent with predetermined periodicity associated with the duration of the window period. It is contemplated that different window periods may have different durations, and micro bursts may be sent not necessarily strictly periodically, as required.","While the description of the embodiment has been with regards to a wireless application of media downloading to mobile units, it should be clear that this application of the invention is only an example. The proposed method of pacing a download by means of microbursts may equally have validity in related fields, for example, where a broadband channel is provided by optical means, and a packet transmission may be paced using microbursts in larger windows."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Embodiments of the invention will now be described, by way of example, with reference to the accompanying drawings in which:",{"@attributes":{"id":"p-0044","num":"0073"},"figref":"FIG. 1","b":"100"},{"@attributes":{"id":"p-0045","num":"0074"},"figref":"FIG. 2","b":"200"},{"@attributes":{"id":"p-0046","num":"0075"},"figref":"FIG. 2A","b":["250","200"]},{"@attributes":{"id":"p-0047","num":"0076"},"figref":"FIG. 2B","b":["260","200"]},{"@attributes":{"id":"p-0048","num":"0077"},"figref":["FIG. 3","FIG. 2"],"b":["300","200"]},{"@attributes":{"id":"p-0049","num":"0078"},"figref":["FIG. 4","FIG. 2"],"b":["400","402","404","202","406","408"]},{"@attributes":{"id":"p-0050","num":"0079"},"figref":"FIG. 4A"},{"@attributes":{"id":"p-0051","num":"0080"},"figref":"FIG. 5","b":"500"},{"@attributes":{"id":"p-0052","num":"0081"},"figref":["FIG. 6","FIG. 5"],"b":"528"}]},"DETDESC":[{},{}]}
