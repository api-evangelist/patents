---
title: Methods for deforming map widgets on the browser
abstract: A method for displaying an image of a map using a processing system, the method including: dividing a first map image obtained from a map widget into sections wherein the first map image is displayed by the processing system; recording the location of each marker to be represented in a second map image; calculating a weight factor for each section; moving and deforming each section according to the weight factor of each section to form the second map image; placing a new marker on the second map image wherein the new marker represents at least one marker with a recorded location; and displaying the second map image in place of the first map image.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08438477&OS=08438477&RS=08438477
owner: International Business Machines Corporation
number: 08438477
owner_city: Armonk
owner_country: US
publication_date: 20071206
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["TRADEMARKS","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","TECHNICAL EFFECTS","DETAILED DESCRIPTION OF THE INVENTION"],"p":["IBM\u00ae is a registered trademark of International Business Machines Corporation, Armonk, N.Y., U.S.A. Other names used herein may be registered trademarks, trademarks or product names of International Business Machines Corporation or other companies.","1. Field of the Invention","This invention relates to modifying maps received from the Internet, and particularly to modifying the maps with a browser.","2. Description of the Related Art","The World Wide Web provides many services via the Internet. These services are generally accessed using a software application referred to as a \u201cbrowser.\u201d Some of the services provide a mapping feature, which may be referred to as a \u201cmap widget.\u201d One example of a map widget is GOOGLE Maps.","The map widget may present a map upon which a marker is illustrated. The marker is used to indicate a certain location on the map.","Some problems may arise when a map is displayed with more than one marker. In some situations where markers are close together on a small area of the map, the markers may overlap each other. When markers overlap each other, a false impression concerning the information presented by the markers may be created. The false impression may be created because a viewer may not be abler to discern the number of markers present at the small area of the map. In addition, information displayed on the map may be obstructed by the markers being close together.","Attempts have been made to overcome the problems stated above using available software with the browser. In one example, a chart is used to present information that would be presented by the markers. However, the chart can also obstruct details on the map such as country names and borders. In another example, color is used to convey marker information. The application of color, though, cannot be applied to maps that already have color. Also, the browser is unable to color only the land because the browser cannot find the border between sea and land.","The map image itself cannot be modified using image processing techniques in conjunction with the browser because JAVASCRIPT cannot be used with binary code.","Therefore, what are needed are techniques for illustrating a map while providing an accurate impression of the number or markers presented on the map. In addition, the map is illustrated so as to limit obscuring of information displayed on the map.","The shortcomings of the prior art are overcome and additional advantages are provided through the provision of a method for displaying an image of a map using a processing system, the method including: dividing a first map image obtained from a map widget into sections wherein the first map image is displayed by the processing system; recording the location of each marker to be represented in a second map image; calculating a weight factor for each section; moving and deforming each section according to the weight factor of each section to form the second map image; placing a new marker on the second map image wherein the new marker represents at least one marker with a recorded location; and displaying the second map image in place of the first map image.","Further disclosed is a computer program product stored on machine readable media and including machine executable instructions for displaying an image of a map using a processing system, the product including instructions for: dividing a first map image obtained from a map widget into sections wherein the first map image is displayed by the processing system; recording the location each marker to be represented in a second map image; calculating a weight factor for each section wherein the weight factor is proportional to the number of markers to be represented in each section; moving and deforming each section according to the weight factor of each section to form the second map image wherein at least one section that includes the location of at least one marker is expanded and at least one section that does not include the location of at least one marker is contracted; placing a new marker on the second map image wherein a size of the new marker is proportional to the number of markers the new marker represents; and displaying the second map image in place of the first map image.","Additional features and advantages are realized through the techniques of the present invention. Other embodiments and aspects of the invention are described in detail herein and are considered a part of the claimed invention. For a better understanding of the invention with advantages and features, refer to the description and to the drawings.","As a result of the summarized invention, technically we have achieved a solution, which solves the problem of displaying a map image on a processing system wherein markers located close together result in markers overlapping each other and thereby creating an inaccurate first impression. In addition, we have achieved a solution to the problem of markers obscuring information displayed on the map image.","The detailed description explains the preferred embodiments of the invention, together with advantages and features, by way of example with reference to the drawings.","The teachings provide techniques for illustrating a map with at least one marker on a display of a computer processing system. In particular, the techniques illustrate the marker on the map while limiting obscuring of information on the map by the marker. The techniques provide for an accurate first impression concerning the number of markers and their location on the map.","The techniques include a method for distorting an image of the map with a browser. Specifically, the method emphasizes (by expanding) a portion of the map that includes the marker. By expanding the emphasized portion, more area of the image is available to provide information without being obscured by the marker. The method also includes de-emphasizing (by contracting) portions of the map that do not include any markers. A portion of the map between an emphasized portion and a de-emphasized portion is generally distorted to provide a smooth transition between the two portions.","In one embodiment, when there are many markers located in a small area of the map, the method may illustrate a single marker in place of the many markers. The single marker, in these instances, will have a size proportional to the number of markers for which the single marker is substituted.","Referring to , there is shown an exemplary embodiment of a processing system  for implementing the teachings herein. In this embodiment, the system  has one or more central processing units (processors) , , , etc. (collectively or generically referred to as processor(s) ). In one embodiment, each processor  may include a reduced instruction set computer (RISC) microprocessor. Processors  are coupled to system memory  and various other components via a system bus . Read only memory (ROM)  is coupled to the system bus  and may include a basic input\/output system (BIOS), which controls certain basic functions of system .",{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 1","b":["107","106","113","107","103","105","107","103","105","104","106","113","116","100","115","113","112","107","106","112","113","113","108","112","109","110","111","113","108"]},"Thus, as configured in , the system  includes processing means in the form of processors , storage means including system memory  and mass storage , input means such as keyboard  and mouse , and output means including speaker  and display . In one embodiment, a portion of system memory  and mass storage  collectively store an operating system such as the AIX\u00ae operating system from IBM Corporation to coordinate the functions of the various components shown in .","It will be appreciated that the system  can be any suitable computer or computing platform, and may include a terminal, wireless device, information appliance, device, workstation, mini-computer, mainframe computer, personal digital assistant (PDA) or other computing device.","Examples of operating systems that may be supported by the system  include WINDOWS 95, WINDOWS 98, WINDOWS NT 4.0, WINDOWS XP, WINDOWS 2000, WINDOWS CE, WINDOWS VISTA, MACINTOSH, JAVA, LINUX, and UNIX, or any other suitable operating system. The system  also includes a network interface  for communicating over a network. The network can be a local-area network (LAN), a metro-area network (MAN), or wide-area network (WAN), such as the Internet or World Wide Web.","Users of the system  can connect to the network through any suitable network interface  connection, such as standard telephone lines, digital subscriber line, LAN or WAN links (e.g., T1, T3), broadband connections (Frame Relay, ATM), and wireless connections (e.g., 802.11(a), 802.11(b), 802.11(g)).","As disclosed herein, the system  includes machine readable instructions stored on machine readable media (for example, the hard disk ) for capture and interactive display of information shown on the screen  of a user. As discussed herein, the instructions are referred to as \u201csoftware\u201d . The software  may be produced using software development tools as are known in the art. Also discussed herein, the software  may also referred to as a \u201cmap display software\u201d , or by other similar terms. The software  may include various tools and features for providing user interaction capabilities as are known in the art.","In some embodiments, the software  is provided as an overlay to another program. For example, the software  may be provided as an \u201cadd-in\u201d to an application (or operating system). Note that the term \u201cadd-in\u201d generally refers to supplemental program code as is known in the art. In such embodiments, the software  may replace structures or objects of the application or operating system with which it cooperates.","The software  generally provides users with a capability to distort a map provided by a widget. Commands to distort the map are used with the browser. The commands are automatically executed by the browser to distort the map. The commands may be native to (written to function within) computer application code programs (for example, C, C++, PERL, JAVA, JAVASCRIPT and others), other programs typically regarded as computing environments (UNIX, LINUX, DOS, and others) as well as other types of programs.","In one embodiment, the software  may initially be placed on a server. In this embodiment, the processing system  can be a client of the server. The processing system  running the browser can receive the software  via the Internet by specifying a uniform resource locator (URL). In one embodiment, the processing system  will receive the software  that includes JAVASCRIPT and Hypertext Markup Language (HTML). The browser can then run the JAVASCRIPT that was received by the processing system .","As a matter of convention herein, it is considered that the \u201csoftware\u201d  provides for interfacing with other \u201ccomputer code\u201d used for presenting a map widget. It is recognized that computer code is commonly regarded as software, however, in the interest of avoiding confusion, use of the term \u201csoftware\u201d is generally limited to describing embodiments of computer implemented instructions and computer program products that provide for distorting a map presented by a map widget.","For some perspective on the map display software , consider the following. A map widget may be presented on the processing system  by an Internet browser such as MOZILLA FIREFOX\u00ae available from Mozilla Corporation of Mountain View, Calif. A map with markers associated with the map widget may be transformed by the map display software . The map display software  may be run on Firefox to transform the map and present the markers.","As used herein, the term \u201cdistorted\u201d generally refers to a capability of the software  to transform the undistorted map into an \u201cemphasized map.\u201d The term \u201ctransform\u201d relates to deforming sections of the undistorted map and assembling the deformed sections to create the emphasized map. The terms \u201cmap\u201d and \u201cmap image\u201d relate to an image of a map displayed on the display  of the processing system . The term \u201cweight factor\u201d relates to a value or values that may be calculated using equations herein that include the term \u201cweight\u201d.",{"@attributes":{"id":"p-0044","num":"0043"},"figref":"FIG. 2","b":["20","20","21","20","22","115","20","23","20","24","20","25","20","26"]},{"@attributes":{"id":"p-0045","num":"0044"},"figref":["FIG. 3","FIG. 3","FIG. 3"],"b":["30","115","30","30","31","31","30","31","21","30","32","20","30","32","31","32"]},"With respect to step , a map application programming interface (API) associated with the map widget may be used to record a location (latitude and longitude) for each of the markers  on the undistorted map . The map API may also be used to convert the geographical location for each marker  into a pixel position on the undistorted map .","Referring to , in one embodiment the weight for each of the sections  is calculated using equation (1) as follows for (row\u2032, column\u2032) or (r\u2032,c\u2032) to (row, column) or (r,c):",{"@attributes":{"id":"p-0048","num":"0047"},"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"msub":{"mi":"weight","mrow":{"mrow":[{"mo":["(",")"],"mrow":{"msup":[{"mi":["r","\u2032"]},{"mi":["c","\u2032"]}],"mo":","}},{"mo":["(",")"],"mrow":{"mi":["r","c"],"mo":","}}],"mo":"\u2192"}},"mo":"=","mfrac":{"mrow":[{"mi":"markerNum","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["r","c"],"mo":","}}},{"mn":"1","mo":"+","mrow":{"mi":"A","mo":"\u00d7","mrow":{"mo":["(",")"],"mrow":{"mrow":[{"mo":["(",")"],"mrow":{"mi":["d","c","d","c"],"mo":["\u2062","\u2062","\u00d7","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}},{"mo":["(",")"],"mrow":{"mi":["dr","dr"],"mo":"\u00d7"}}],"mo":"+"}}}}]}}},{"mrow":{"mo":["(",")"],"mn":"1"}}]}}}}},"where A is a constant selected to express how much the weight in one section  will influence the weight in another section ; dc represents the number of columns between c and c\u2032; dr represents the number of rows between r and r\u2032; and markerNum(r,c) represents the number of markers  in the section  identified by coordinates (r,c). Equation (1) represents the weight from position (r,c) to position (r\u2032,c\u2032). In general, the section  with more markers  than another section  will have a greater weight than the other section . In addition, the section  adjacent to a section  with heavy weight will also have heavy weight.","Referring to , in one embodiment the cumulative weight from all sections  is calculated using equation (2) as follows:",{"@attributes":{"id":"p-0051","num":"0050"},"maths":{"@attributes":{"id":"MATH-US-00002","num":"00002"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"mi":"weight","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["r","c"],"mo":","}}},{"munderover":{"mo":"\u2211","mrow":{"msup":{"mi":["r","\u2032"]},"mo":"=","mn":"0"},"mi":"NumR"},"mo":"\u2062","mrow":{"munderover":{"mo":"\u2211","mrow":{"msup":{"mi":["c","\u2032"]},"mo":"=","mn":"0"},"mi":"NumC"},"mo":"\u2062","msub":{"mi":"weight","mrow":{"mrow":[{"mo":["(",")"],"mrow":{"msup":[{"mi":["r","\u2032"]},{"mi":["c","\u2032"]}],"mo":","}},{"mo":["(",")"],"mrow":{"mi":["r","c"],"mo":","}}],"mo":"\u2192"}}}}],"mo":"="}},{"mrow":{"mo":["(",")"],"mn":"2"}}]}}}}},"where NumR represents a number of rows and NumC represents a number of columns.","With respect to step  of method , in one embodiment each section  is moved and deformed in accordance with the weight of each section . To fit all sections  that are deformed into the emphasized map image of a given width and height, a column weight and a row weight are calculated. Referring to , in one embodiment equation (3) is used to calculate a row weight for sections  in row r.",{"@attributes":{"id":"p-0054","num":"0053"},"maths":{"@attributes":{"id":"MATH-US-00003","num":"00003"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"mi":"rowWeight","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"r"}},{"munderover":{"mo":"\u2211","mrow":{"mi":"c","mo":"=","mn":"0"},"mi":"NumC"},"mo":"\u2062","mrow":{"mi":"weight","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["r","c"],"mo":","}}}}],"mo":"="}},{"mrow":{"mo":["(",")"],"mn":"3"}}]}}}},"br":{},"figref":"FIG. 5","b":"32"},{"@attributes":{"id":"p-0055","num":"0054"},"maths":{"@attributes":{"id":"MATH-US-00004","num":"00004"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"mi":"colWeight","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"c"}},{"munderover":{"mo":"\u2211","mrow":{"mi":"r","mo":"=","mn":"0"},"mi":"NumR"},"mo":"\u2062","mrow":{"mi":"weight","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["r","c"],"mo":","}}}}],"mo":"="}},{"mrow":{"mo":["(",")"],"mn":"4"}}]}}}}},"An average row weight and an average column weight are calculated using equations (5) and (6) as follows:\n\navrRowWeight()=rowWeight()\/Num\u2003\u2003(5)\n\navrColWeight()=colWeight()\/Num\u2003\u2003(6)\n","Referring to , in one embodiment equations (7) through (14) are used to determine at least one of how each section  will be deformed and how each section  that is deformed will be located as follows:\n\npos()[]=pos(\u22121)[]+pos(\u22121)[\u2003\u2003(7)\n","where pos(r,c)[x] represents a pixel position in the \u201cx\u201d direction of the section  identified by row and column coordinates (r,c);\n\npos()[]=pos(\u22121)[]+pos(\u22121)[\u2003\u2003(8)\n\nwhere pos(r,c)[y] represents a pixel position in the \u201cy\u201d direction of the section  identified by row and column (r,c);\n\npos()[\u2032]=section\u00d7weight()\/avrColWeight()\u2003\u2003(9)\n","where sectionH is the pixel height of the section  identified by (r,c);\n\npos()[\u2032]=section\u00d7weight()\/avrRowWeight()\u2003\u2003(10)\n","where sectionW is the pixel width of the section  identified by (r,c);\n\npos()[tan ]=(pos(1)[]\u2212pos()[])\/pos()[\u2003\u2003(11)\n","where pos(r,c)[tan X] represents the gradient degrees in the \u201cx\u201d direction of the section  identified by (r,c);\n\npos()[tan ]=(pos(1)[]\u2212pos()[])\/pos()[\u2003\u2003(12)\n","where pos(r,c)[tan Y] represents the gradient degrees in the \u201cy\u201d direction of the section  identified by (r,c);\n\npos()[]=(pos(+1)[\u2032]>pos()[\u2032])?pos(+1)[\u2032]: pos()[\u2003\u2003(13)\n","where pos(r,c)[h] represents the height in pixels of the section  identified by (r,c); and\n\npos()[]=(pos(+1)[\u2032]>pos()[\u2032])?pos(+1,)[\u2032]: pos()[\u2003\u2003(14)\n","where pos(r,c)[w] represents the width in pixels of the section  identified by (r,c).","With respect to equation (13), pos(r,c)[h] uses the larger of pos(r,c)[h\u2032] and pos(r,c+1)[h\u2032] so that an adjacent section  can fill in a resulting gap. Similarly, with respect to equation (14), pos(r,c)[w] uses the larger of pos(r,c)[w\u2032] and pos(r+1,c)[w\u2032] so that an adjacent section  can fill in a resulting gap.","Referring to , applying the equations presented above to the undistorted map  and the sections  results in producing an emphasized map  with modified sections . The modified sections  result from deforming the sections .",{"@attributes":{"id":"p-0067","num":"0066"},"figref":"FIG. 7","b":["32","62"]},"Referring to , in one embodiment equations (13) and (14) are used to place the markers  on the modified sections  of the emphasized map  as follows:\n\nmarker\u2032=marker\u00d7(pos()[]\/section)\u2003\u2003(15)\n","where markerX\u2032 represents the number of pixels in the \u201cx\u201d direction from an origin (r,c) of the modified section , markerX represents the number of pixels in the \u201cx\u201d direction used to locate the marker  on the section , and sectionW represents the pixel width of the corresponding section ; and\n\nmarker\u2032=marker\u00d7(pos()[]\/section)\u2003\u2003(16)\n","where markerY\u2032 represents the number of pixels in the \u201cy\u201d direction from an origin (r,c) of the modified section , markerY represents the number of pixels in the \u201cy\u201d direction used to locate the marker  on the section , and sectionH represents the pixel height of the corresponding section .","Referring to , one example of computing the emphasized map  is presented as follows with the following conditions:","NumR=8;","NumC=16;","IMG_H=secH*NumR=256 [pixel];","IMG_W=secW*NumC=512 [pixel];","IMG_NAME=\u201cmap.img\u201d;","A=1\/16.","The code presented in this example is written in JAVASCRIPT.","The following code is used to select the section  for each marker :",{"@attributes":{"id":"p-0073","num":"0072"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"for (var i in markers) {\u2003\u2003\u2003(markers[i] represents each marker 31)"},{"entry":"\u2003markers[i][\u201dc\u201d] = parseInt(markers[i][\u201dmapX\u201d] \/ secW)"},{"entry":"\u2003markers[i][\u201dr\u201d] = parseInt(markers[i][\u201dmapY\u201d] \/ secH)"},{"entry":"\u2003where markers[i][\u201dmapX\u201d] and markers[i][\u201dmapY\u201d] are pixel location"},{"entry":"given by the map API."},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"The following code is used to calculate the weight for each modified section :",{"@attributes":{"id":"p-0075","num":"0074"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\u2003for (var r = 0; r < NumR; r++) {"]},{"entry":[{},"\u2003\u2003for (var c = 0; c < NumC; c++) {"]},{"entry":[{},"\u2003\u2003\u2003var dC = c \u2212 markers[i][\u201dc\u201d];"]},{"entry":[{},"\u2003\u2003\u2003var dR = r \u2212 markers[i][\u201dr\u201d];"]},{"entry":[{},"\u2003\u2003\u2003weight[r][c] += 1 \/ (1 + A * (dC * dC + dR * dR));"]},{"entry":[{},"\u2003\u2003\u2002}"]},{"entry":[{},"\u2003}"]},{"entry":[{},"}"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"The following code is used to calculate the average row weight and the average column weight:",{"@attributes":{"id":"p-0077","num":"0076"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"for(var r = 0; r < NumR; r++) {"]},{"entry":[{},"\u2003for(var c = 0; c < NumC; c++) {"]},{"entry":[{},"\u2003\u2003avrRowWeight[r] += weight[r][c] \/ NumC;"]},{"entry":[{},"\u2003\u2003avrColWeight[c] += weight[r][c] \/ NumR;"]},{"entry":[{},"\u2003}"]},{"entry":[{},"}"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"The following code is used to calculate the positions of each section :",{"@attributes":{"id":"p-0079","num":"0078"},"tables":{"@attributes":{"id":"TABLE-US-00004","num":"00004"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"for(var r = 0; r < NumR; r++) {"},{"entry":"\u2003for(var c = 0; c < NumC; c++) {"},{"entry":"\u2003\u2003pos[r][c][\u201dx\u201d] = (0 == c)? 0 : (pos[r][c \u2212 1][\u201dx\u201d] + pos[r][c \u2212 1][\u201d_w\u201d]);"},{"entry":"\u2003\u2003pos[r][c][\u201dy\u201d] = (0 == r)? 0 : (pos[r \u2212 1][c][\u201dy\u201d] + pos[r \u2212 1][c][\u201d_h\u201d]);"},{"entry":"\u2003\u2003pos[r][c][\u201d_h\u201d] = secH * weight[r][c] \/ avrColWeight[c];"},{"entry":"\u2003\u2003pos[r][c][\u201d_w\u201d] = secW * weight[r][c] \/ avrRowWeight[r];"},{"entry":"\u2003}"},{"entry":"}"},{"entry":"for (var r = 0; r < unitNumR; r ++) {"},{"entry":"\u2003for (var c = 0; c < this.unitNumC; c ++) {"},{"entry":"\u2003\u2003\u2003pos[r][c][\u201dtanX\u201d] = (pos[r+1][c][\u201dx\u201d] \u2212 pos[r][c][\u201dx\u201d]) \/ (pos[r+1][c][\u201dy\u201d] \u2212"},{"entry":"\u2003\u2003\u2003pos[r][c][\u201dy\u201d]);"},{"entry":"\u2003\u2003\u2003pos[r][c][\u201dtanY\u201d] = (pos[r][c+1][\u201dy\u201d] \u2212 pos[r][c][\u201dy\u201d]) \/ (pos[r][c+1][\u201dx\u201d] \u2212"},{"entry":"\u2003\u2003\u2003pos[r][c][\u201dx\u201d]);"},{"entry":"\u2003\u2003\u2003var xx = (pos[r][c + 1][\u201dx\u201d] < pos[r + 1][c + 1][\u201dx\u201d])? pos[r + 1][c + 1][\u201dx\u201d] :"},{"entry":"\u2003\u2003\u2003pos[r][c + 1][\u201dx\u201d];"},{"entry":"\u2003\u2003\u2003var yy = (pos[r + 1][c][\u201dy\u201d] < pos[r + 1][c + 1][\u201dy\u201d])? pos[r + 1][c + 1][\u201dy\u201d] :"},{"entry":"\u2003\u2003\u2003pos[r + 1][c][\u201dy\u201d];"},{"entry":"\u2003\u2003\u2003pos[r][c][\u201dheight\u201d] = yy \u2212 pos[r][c][\u201dy\u201d];"},{"entry":"\u2003\u2003\u2003pos[r][c][\u201dwidth\u201d] = xx \u2212 pos[r][c][\u201dx\u201d];"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"The following code is used to clip the source image (undistorted map ):",{"@attributes":{"id":"p-0081","num":"0080"},"tables":{"@attributes":{"id":"TABLE-US-00005","num":"00005"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"\u2003var divGfx = document.createElement(\u201dDIV\u201d);"},{"entry":"\u2003..."},{"entry":"\u2003\u2002divGfx.style.top = pos[r][c][\u201dy\u201d] + \u201dpx\u201d;"},{"entry":"\u2003\u2002divGfx.style.left = pos[r][c][\u201dx\u201d] + \u201dpx\u201d;"},{"entry":"\u2003\u2002divGfx.style.height = pos[r][c][\u201dheight\u201d] + \u201dpx\u201d;"},{"entry":"\u2003\u2002divGfx.style.width = pos[r][c][\u201dwidth\u201d] + \u201dpx\u201d;"},{"entry":"\u2003\u2002var surface = dojo.gfx.createSurface(divGfx, pos[r][c][\u201dwidth\u201d],"},{"entry":"pos[r][c][\u201dheight\u201d]);\u2003\u2003(create a surface object with gfx library from"},{"entry":"Dojo to hide rest of image)"},{"entry":"\u2003\u2002var img = surface.createImage({width: IMG_W, height: IMG_H, src:"},{"entry":"\u2003\u2002IMG_NAME}); (Set the source image.)"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"The following code gives the parameters to fit the image to the right position:",{"@attributes":{"id":"p-0083","num":"0082"},"tables":{"@attributes":{"id":"TABLE-US-00006","num":"00006"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"var dX = \u2212c * secW;"]},{"entry":[{},"var dY = \u2212r * secH;"]},{"entry":[{},"var ddSftC = 0 < pos[r][c][\u201dtanX\u201d]? \u22121 : 1;"]},{"entry":[{},"var dSkX = \u2212r * secH * pos[r][c][\u201dtanX\u201d];"]},{"entry":[{},"var dSkY = \u2212c * secW * pos[r][c][\u201dtanY\u201d];"]},{"entry":[{},"var ddLnC = dLnC \u2212 ddSftC * (NumC \u2212 1);"]},{"entry":[{},"var dBkX = (ddSftC \u2212 ddLnC) * secW;"]},{"entry":[{},"var dSkBkY = (\u2212ddLnC + 1) * secW * pos[r][c][\u201dtanY\u201d];"]},{"entry":[{},"var dSkBkX = dSkX \u2212 dSkBkY * pos[r][c][\u201dtanX\u201d];"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"In the following code, the numbers in parentheses correspond to the numbers on . This code is used to create a transformation array wherein each transformation is applied one after another. The transformations transform each section  to one modified section  using the gfx library:",{"@attributes":{"id":"p-0085","num":"0084"},"tables":{"@attributes":{"id":"TABLE-US-00007","num":"00007"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"var transForm = [dojo.gfx.matrix.scale(pos[r][c][\u201dwidth\u201d]\/ secW,"]},{"entry":[{},"pos[r][c][\u201dheight\u201d]\/ secH), (1)"]},{"entry":[{},"\u2003dojo.gfx.matrix.translate(dBkX, dY), (2)"]},{"entry":[{},"\u2003dojo.gfx.matrix.translate(dSkBkX, dSkBkY), (3)"]},{"entry":[{},"\u2003dojo.gfx.matrix.skewX(Math.atan(pos[r][c][\u201dtanX\u201d])), (4)"]},{"entry":[{},"\u2003dojo.gfx.matrix.skewY(\u2212Math.atan(pos[r][c][\u201dtanY\u201d])) (5)"]},{"entry":[{},"\u2002];"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"The following code is used to apply the transformation array:",{"@attributes":{"id":"p-0087","num":"0086"},"tables":{"@attributes":{"id":"TABLE-US-00008","num":"00008"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\u2003\u2003img.setTransform(transForm);"]},{"entry":[{},"\u2003}"]},{"entry":[{},"}"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"One example of the emphasized map  is illustrated in . Referring to , the emphasized map  includes new markers . The new markers  result from the markers  being placed on the emphasized map . In the embodiment of , the size of each new marker  is proportional to the number of markers  each new marker  represents.","The capabilities of the present invention can be implemented in software, firmware, hardware or some combination thereof.","As one example, one or more aspects of the present invention can be included in an article of manufacture (e.g., one or more computer program products) having, for instance, computer usable media. The media has embodied therein, for instance, computer readable program code means for providing and facilitating the capabilities of the present invention. The article of manufacture can be included as a part of a computer system or sold separately.","Additionally, at least one program storage device readable by a machine, tangibly embodying at least one program of instructions executable by the machine to perform the capabilities of the present invention can be provided.","When introducing elements of the present invention or the embodiment(s) thereof, the articles \u201ca,\u201d \u201can,\u201d and \u201cthe\u201d are intended to mean that there are one or more of the elements. The terms \u201cincluding\u201d and \u201chaving\u201d are intended to be inclusive such that there may be additional elements other than the listed elements.","The flow diagrams depicted herein are just examples. There may be many variations to these diagrams or the steps (or operations) described therein without departing from the spirit of the invention. For instance, the steps may be performed in a differing order, or steps may be added, deleted or modified. All of these variations are considered a part of the claimed invention.","While the preferred embodiment to the invention has been described, it will be understood that those skilled in the art, both now and in the future, may make various improvements and enhancements which fall within the scope of the claims which follow. These claims should be construed to maintain the proper protection for the invention first described."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The subject matter, which is regarded as the invention, is particularly pointed out and distinctly claimed in the claims at the conclusion of the specification. The foregoing and other objects, features, and advantages of the invention are apparent from the following detailed description taken in conjunction with the accompanying drawings, wherein like numbered elements are numbered alike, in which:",{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":["FIGS. 8A and 8B","FIG. 8"]},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 10"}]},"DETDESC":[{},{}]}
