---
title: Systems and methods for embedding a foreground video into a background feed based on a control input
abstract: A color image and a depth image of a live video are received. Each of the color image and the depth image are processed to identify the foreground and the background of the live video. The background of the live video is removed in order to create a foreground video that comprises the foreground of the live video. A control input may be received to control the embedding of the foreground video into a second background from a background feed. The background feed may also comprise virtual objects such that the foreground video may interact with the virtual objects.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09628722&OS=09628722&RS=09628722
owner: PERSONIFY, INC.
number: 09628722
owner_city: Chicago
owner_country: US
publication_date: 20110330
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["RELATED APPLICATION","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION"],"p":["This application claims the benefit of U.S. Provisional Application No. 61\/318,969 filed on Mar. 30, 2010 and entitled \u201cForeground Video Embedding.\u201d","1. Field of the Invention","The present invention is related to the field of video processing, and more specifically towards systems and methods for embedding a foreground video into a background feed based on a control input.","2. Art Background","Background subtraction comprises the removal of a background from a live video, the results of which results in a video comprising the foreground of the live video. Conventional video processing techniques use such background subtraction processes for video conference applications. For example, the foreground of the live video may be extracted and then inserted or embedded into a second background.","Although conventional video processing techniques insert or embed a foreground from a live video into a second background, the conventional techniques do not provide a more robust video experience allowing greater user control or interaction with the second background or virtual objects comprised within the second background.","Accordingly, it is highly desirable to develop systems and methods for embedding a foreground video into a background feed based on a control input. The systems and methods may provide increased user interaction and control of the background feed as well as virtual objects comprised within the background feed.","The systems and methods disclosed herein embed a foreground video into a background feed. Specifically, the systems and methods may receive a depth image and a color image of a frame from a live video. The depth and color images may be used to detect the foreground and the background of the live video. The background may be subtracted and the resulting foreground video only comprises the foreground of the live video. A control input is received from the user to control the embedding of the foreground video into a second received background. In addition, the control input may comprise the user as depicted in the foreground video to interact with virtual objects from the background feed.","The systems, methods, and circuits disclosed herein relate to video processing. Specifically, the systems and methods relate to foreground video embedding.","In the following detailed description, numerous specific details are set forth in order to provide a thorough understanding of the present invention. However, it will become obvious to those skilled in the art that the present invention may be practiced without these specific details. The description and representation herein are the common means used by those experienced or skilled in the art to most effectively convey the substance of their work to others skilled in the art. In other instances, well known methods, procedures, and systems have not been described in detail to avoid unnecessarily obscuring aspects of the present invention.",{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 1","b":["100","100","110","120","110","120","120","100","110","120","100","120","110"]},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 2","b":["200","200","120","110","100","110"]},{"@attributes":{"id":"p-0027","num":"0026"},"figref":["FIG. 3","FIG. 3"],"b":["300","300","120","120","310","120","310","310"]},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 4","b":["400","400"]},"As seen in , at block , depth and color camera information of a video is received. In some embodiments, the depth information may relate to the distance to points in an image scene from a specific point. For example, the depth information may comprise the distance of each pixel of an image frame of a video from a sensor. The color information may comprise color pixel information of an image frame of a video. The depth and color camera information may be received from a three dimensional (3D) camera, depth camera, z-camera, range camera, or from a plurality of sources. For example, the color information may be received from a color camera and the depth information may be received from a depth camera. In some embodiments, the color information and depth information may be received from a single camera. For example, the color information may be received from an red-blue-green (RGB) sensor on a camera and the depth information may be received from an infrared (IR) sensor comprised within the same camera. Further details with regard to the camera are described with relation to . As such, the method  receives depth and color information of a video.","At block , the background portion and the foreground portion of the video are identified. For example, given an example of a human presenter in front of a wall, the foreground portion may comprise the human presenter and the background portion may comprise the wall. As such, at block , the depth information and\/or color information is used to identify the background portion and the foreground portion of a video. At block , the background portion of the video is subtracted or removed to create a foreground video. For example, in the previous example of a human presenter in front of a wall, the image of the wall may be removed and the resulting video may only comprise the foreground portion (e.g., the human presenter). Further details of the background and foreground identification at block  and the background subtraction at block  are described in further detail below with relation to .","At block , a background feed is received. In some embodiments, the background feed may comprise an image or a slide from a presentation or a series of images or slides from a presentation. For example, the background feed may comprise a series of presentation slides for which a human presenter will discuss. In the same or alternative embodiments, the background feed may comprise an image or view of a shared computer desktop, a pre-recorded video stream, live recording video stream, and\/or a 3D virtual scene. As such, the background feed may comprise any image, video, or combination of at least one image or at least one video.","At block , a control input is received. The control input may comprise a gesture control input. For example, the control input may be a gesture from a human user such as a user who may be giving a presentation or a discussion. In some embodiments, the user may be depicted by the previously identified foreground video. As such, the control input may comprise a gesture from a user from the previously identified foreground video. Examples of gesture control input may comprise, but are not limited to, hand gestures, walking direction, user standing placement, and any other user movement. Further examples and details with regard to gesture control inputs are discussed below with relation to . In some embodiments, the control input may comprise a computer mouse control input. For example, the control input may comprise a computer mouse click or movement of a computer cursor by the computer mouse. In some embodiments, the control input may be provided by a remote control. For example, the control input may be received by the pressing of a button on the remote control.","Regardless of whether the input control is received from a user gesture, mouse control, and\/or remote control, the input control may be used to control where to place, insert, and\/or embed at least one foreground video into the new background provided by the background feed. Moreover, in some embodiments, the control input may be used to select a specific foreground video. For example, a plurality of foreground videos may be present and the control input may be used to select one of the plurality of foreground videos. In the same or alternative embodiments, the control input may be used to select a specific background from the background feed. For example, the background feed may comprise a plurality of videos and\/or images. As such, the control input may be used to select which video of the background feed to use to insert or embed the foreground video within. In some embodiments, the control input may be used to change the background feed. For example, a gesture control input from a user depicted in the foreground video may prompt the background feed to change from a first presentation slide to a second presentation slide. As such, the gesture control input, mouse control input, and remote control input may be used to change the background feed. In some embodiments, control input may be used to change a portion of the background feed, as described in further detail below with relation to .","At block , a decision is made whether to insert or embed the foreground video into the background feed. The control input may comprise an action to embed the foreground video into the background feed, as described above with relation to block . If it is determined that the foreground video should not be embedded, then at block , the foreground video is not embedded into the background feed. As such, in some embodiments, the background feed may be displayed without the embedding or insertion of the previously identified foreground video. However, if it is determined that an insertion or embedding of the foreground video into the background feed is needed, then at block , a composite video comprising the background feed and the foreground video is created. In some embodiments, as previously described, the control input may provide instruction as to where to embed the foreground video within the background feed. At block , the composite video comprising the foreground video of the user and the background feed (e.g., presentation slides) are displayed.",{"@attributes":{"id":"p-0035","num":"0034"},"figref":["FIG. 5","FIG. 6","FIG. 7"],"b":["500","600","510","520","530","540"]},{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIG. 6","b":["600","500"]},"As seen in , at block , a depth image is received. At block , the depth image is checked. In some embodiments, upon receiving a new depth image frame from a camera, the depth image frame is checked to determine whether the depth information is useful. For example, if the majority of pixels from the depth image comprise small or invalid values then the depth image frame may be considered to not be useful and as such may be discarded. In some embodiments, if a depth image frame is discarded then all pixels in the region map (described in more detail below) are set to \u2018unknown.\u2019 Moreover, in some embodiments, if a large number of consecutive depth image frames (e.g., 20 consecutive frames) comprise invalid depth information, then all depth histories (described in further detail below) and user information may be cleared or deleted.","At block , individual pixels of the depth image frame are categorized. Each pixel may be categorized or determined to belong to a section of the depth image frame. For example, each pixel may be categorized as unknown, background, foreground (e.g., a user), or as a bad pixel. In some embodiments, the categorization of the pixels is based on a background history, foreground history (e.g., user history), and a noise history. Each of the background history, foreground history, and noise history comprises an aggregate history of the background pixels, foreground pixels, and noise of each pixel as compiled from previous depth image frames. For each pixel of a received depth image frame, the current depth value is compared to the depth value in the background and foreground histories and ideally matched as either background or foreground. In some embodiments, how close a pixel's current depth value must match either of the background or foreground histories may be based upon a confidence level threshold and the noise level of the pixel. For example, to determine the best match (e.g., whether the pixel is a foreground or background) may comprise a cost calculated for each history and the history with the lowest cost may be chosen to be the pixel's section or categorization. If the depth value of a current pixel does not match any of the background or foreground history, then the pixel may be labeled as unknown. In some embodiments, if the pixel has an invalid depth value or a depth value beyond a threshold, then the pixel may be labeled as an invalid pixel (e.g., a bad pixel).","As seen in , at block , connected components of the depth image pixels are created. In some embodiments, the creation of connected components may group pixels into components based on the pixel's section or categorization and the pixel's depth value. For example, each pixel's depth value and categorization (i.e., foreground or background) may be compared with its neighboring pixels' depth value and categorization. If neighboring pixels share a common categorization and have similar depth values, then the neighboring pixels may be considered to be a part of a single component. However, for pixels that are categorized as having an invalid depth, the pixel's depth value is not compared with a neighboring pixel's depth value. As such, neighboring pixels with an invalid depth categorization will be grouped into a single component. In some embodiments, in order to reduce computational resources, disjoint sets are used to manage the connected components. Once the connected components are determined (e.g., components are created for foreground components, background components, etc.) each component comprising the pixels categorized as unknown are examined. A determination may be made to decide whether the unknown component is connected to a known component such as a background or foreground component. For example, for each unknown component, a list of connections to known categorized components is generated. If the unknown component is connected to one or more known categorized components, then the categorized component selected for the unknown component is based on the total number of connections and the total depth difference between the unknown component and the categorized component. For example, if an unknown component comprises a large number of connections to a background component and there is a small depth difference between the unknown component and the background component, then the unknown component may be categorized as a background component. As such, all pixels in the unknown component may be categorized as a background component and included in the background component. Thus, the previously unknown pixels are regrouped into the background component pixels.","At block  of , a motion detection of connected components is performed. The motion detection determines if a component is moving between depth image frames. A moving component may be determined to be a person (e.g., a user). As such, a user may be detected at block . In some embodiments, a camera may provide an infrared intensity image and as such the difference between the infrared intensity or depth value of the current image frame and a previous image frame may be calculated. If a pixel's infrared intensity increases by a significant amount and the pixel's value is below a specific threshold, then the pixel may be marked as moving. In embodiments where the camera does not provide an infrared intensity image, a pixel may be considered to be moving if its depth value decreases by a specific amount and the pixel depth value is below a specific threshold. Each component comprising a moving pixel may be further examined. If the number of moving pixels in a single component is above a predefined minimum amount and the percentage of moving pixels is not small relative to all pixels of the component, then the component may be tagged as being in motion and as such may comprise a user.","As seen in , at block , user tracking is performed on the components that have been marked as being in motion. In some embodiments, user tracking may be performed at every few frames and result in the analysis of all of the moving components. For example, for an unknown component, the user tracking may comprise checking the unknown component to determine whether the unknown component should be a foreground component or if it is a part of an existing foreground component (e.g., the unknown component is a user). If the unknown component is not part of an existing user, then the unknown component may be a new user and thus is analyzed through additional processes at blocks  and . Similar processes are performed for a background component that has been detected to be in motion. However, for a background component to be re-categorized as a foreground or user component, the background component must be approximate to a user's center of mass. Moreover, in some embodiments, a new user must have additional features detected and must be in motion. If a background component is determined to be a part of a user or a new user, then the component is removed from the background history.","The performance of the user tracking at block  may further comprise processing checks on foreground or user components. For example, if a foreground or user component is far from a user's center of mass, then it may be re-categorized as an unknown component. If a user component is close to another user's center of mass, then it may be removed from the current user and into the second user's history. In some embodiments, following the previously described processing steps, the user's information may be updated based on the current frame. For example, information related to a user's center of mass, dimensions, and motion may be updated. As such, the positioning and placement of a user may be detected such that a user's gestures may be detected, as described in further detail below. In some embodiments, a detected gesture from a user may enable or disable the user from the system or the user's standing placement (e.g., depth threshold) may be used to enable or disable the user. As such, a history of various characteristics of a user are recorded and updated.","If it is determined that a component is a user at block , then at block , the user's features are detected. In some embodiments, the features detected may comprise a user's head and hands. To do so, the user's torso and neck may first be located by segmenting the user component into a plurality of horizontal slices and moving upward until the width of the horizontal slices begins to diverge from the average width by a set amount. After finding the user's torso and neck, the user's head is identified by examining an area above the identified neck. Once the user's head is found, then the user's hands may be identified by performing a skeletonization of the user component. In some embodiments, the user's hands may be assumed to be the furthest points to the left and the right of the user's torso.","As seen in , at block , a user component's gestures are detected. As such, at block , a user raising his or her hand may be detected. In some embodiments, the detection of a user's gestures is based on the previously provided position of the user's features. In some embodiments, a user raising his or her hand may be detected by a vertical line comprising the user's hand position as well as a distance.","At block , a region map may be created. In some embodiments, the region map may be created based on the previously discussed categorizations and user information. The region map may comprise values of foreground, background, unclear, and unknown. For a background component, the region is set to background. In some embodiments, an invalid depth component may be set to unknown. If the component is set to unknown, then it may be checked to see whether it is close in proximity to a user such that it may be considered to be part of the user and as such categorized as a foreground component. If the user is enabled then the user component may remain as a foreground component, but if the user is disabled, then the user component may be re-categorized as a background component. As such, in some embodiments, the region map may comprise a categorization of pixels and\/or components as foreground, background, unclear, or unknown.","At block  in , user history may be updated. In some embodiments, a user history is recorded and updated for each user. Each pixel in the user history may comprise a depth value and a confidence level. In some embodiments, the user history is updated for each received depth frame. The depth values may be updated using an exponential moving average. The confidence level may be updated so as to increase whenever a pixel is categorized as a user and the depth value is similar to the depth value in the user history. However, if the depth value is significantly different, then the confidence level may decrease. If a pixel is labeled as a background then the confidence level decreases, but if a pixel is labeled as another user, then the user confidence may decrease more slowly. As such, the user history enables the systems and methods disclosed herein to determine which pixels are associated to which user in a following frame.","At block , a background history may be updated similar to the user history as previously described. In some embodiments, the background history may comprise two different types of histories such as a trusted and non-trusted history. The non-trusted history may be updated per each frame. When a pixel is labeled as a background and the depth value matches the depth value in the non-trusted history then the age of the pixel increases. If the age of the pixel reaches a defined minimum age, then the pixel is re-categorized as trusted. If the depth value continues to match the depth value in the trusted history, then the confidence level may increase. However, if the depth value does not match, then the confidence level will decrease and if the confidence level reaches zero then the history at the pixel may be re-categorized as non-trusted.","As seen in , at block , a noise history is updated. In some embodiments, the noise history comprises a depth value and a noise level for each pixel. If a depth value does not match the depth value in the noise history, then the noise level increases. However if the depth values do match, then the noise level may decrease.",{"@attributes":{"id":"p-0049","num":"0048"},"figref":["FIG. 7","FIG. 6"],"b":["700","710","720"]},"At block  of , a foreground region filling may be performed. For example, in some instances, the depth image as received in  may comprise a reduced resolution than that of the color image. In such an instance, a warped foreground region may comprise a sparse set of pixels while unknown pixels within the sparse set of pixels should be labeled as foreground pixels. As such, for each unknown pixel, a local window surrounding the pixel may be searched for other foreground pixels. If the unknown pixel is surrounded by foreground pixels, then it may be assumed that the unknown pixel lies within the sparse set of foreground pixels and should thus be re-categorized or labeled as a foreground pixel.","At block , unclear regions of the color image may be identified and segmented out of the foreground and background regions of the color image so that further processing may be performed on the unclear region. The unclear region may comprise the area or set of pixels of which may not yet be categorized as a background pixel or a foreground pixel. As previously discussed, foreground region filling may be performed on unknown pixels that are surrounded by foreground pixels. However, if an unknown pixel is not surrounded by foreground pixels, then it may be comprised within an unclear region. For example, an unclear region may comprise pixels at the position of a user's hair. An unclear region surrounding a user's body may be further identified by expanding the contour line of the user body outwards and\/or inwards to become a region. As such, unclear regions may be identified.","At block , a color background history may be applied and updated. The color background history may comprise the accumulated color values of a plurality of color images. In some embodiments, the color background history may be used to remove unclear head pixels from the unclear region that comprise color values that are similar with the corresponding color values in the color background history. In some embodiments, the application of the color background history may be performed before the processes described with relation to block  so as to create a more efficient color image process. The color background history may also be used when applying a graph cut as described in further detail below.","At block , a graph cut may be constructed. For example, a graph cut may be constructed by all of the pixels in the identified unclear region, along with any foreground and background pixels that is adjacent to the unclear region. Each pixel is then connected to its 4 or 8 neighboring pixels and a source that represents the foreground and a sink that represents the background. In some embodiments, N-links may be inter-pixel links. Terminal links (T-links) may comprise links connecting a pixel to the source or the sink. The capacities of the N-links may be assigned based on the color contrast (L1 norm) between pixels based on the following equation:",{"@attributes":{"id":"p-0054","num":"0053"},"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"msub":{"mi":["cap","N"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["i","j"],"mo":","}}},{"mo":"{","mtable":{"mtr":[{"mtd":[{"mrow":{"msub":{"mi":["\u03bb","N"]},"mo":"\u2062","msup":{"mi":"\u2147","mrow":{"mrow":{"mo":"-","msub":{"mi":["\u03b2","N"]}},"mo":"\u2062","msub":{"mrow":{"mo":["\uf605","\uf606"],"mrow":{"msub":[{"mi":["p","i"]},{"mi":["p","j"]}],"mo":"-"}},"mn":"1"}}}}},{"mrow":{"mrow":{"mi":"if","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"msub":{"mrow":{"mo":["\uf605","\uf606"],"mrow":{"msub":[{"mi":["p","i"]},{"mi":["p","j"]}],"mo":"-"}},"mn":"1"}},"mo":"<","msub":{"mi":["\u03b4","N"]}}}]},{"mtd":[{"mn":"0"},{"mi":"else"}]}]}}],"mo":"="}}}},"The capacities of the T-links may comprise the summation of several factors. One such factor may comprise the probability with respect to the Gaussian mixture models of the background and the Gaussian mixture model of the foreground. These models may be learned and updated using the detected background pixels from the previous color image frames. Another factor may comprise the temporal coherence of the region map of the current image frame and the region map of the previous image frame. For each pixel i in the graph, a value cap(i) (capacity) may be defined as the following equation:",{"@attributes":{"id":"p-0056","num":"0055"},"maths":{"@attributes":{"id":"MATH-US-00002","num":"00002"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"mi":"cap","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"i"}},{"mo":"{","mtable":{"mtr":[{"mtd":[{"mrow":{"msub":{"mi":["\u03bb","T"]},"mo":"\u2062","msup":{"mi":"\u2147","mrow":{"mrow":{"mo":"-","msub":{"mi":["\u03b2","T"]}},"mo":"\u2062","msub":{"mrow":{"mo":["\uf605","\uf606"],"mrow":{"msubsup":[{"mi":["p","i","current"]},{"mi":["p","i","previous"]}],"mo":"-"}},"mn":"1"}}}}},{"mrow":{"mrow":{"mi":"if","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"msub":{"mrow":{"mo":["\uf605","\uf606"],"mrow":{"msubsup":[{"mi":["p","i","current"]},{"mi":["p","i","previous"]}],"mo":"-"}},"mn":"1"}},"mo":"<","msub":{"mi":["\u03b4","T"]}}}]},{"mtd":[{"mn":"0"},{"mi":"else"}]}]}}],"mo":"="}}},"br":{},"sub":["source","sink","source","sink"]},"A third factor may comprise the color contrast (L1 norm) between a pixel in the graph and its color background history, as in the following equation:",{"@attributes":{"id":"p-0058","num":"0057"},"maths":[{"@attributes":{"id":"MATH-US-00003","num":"00003"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":{"mrow":{"msub":{"mi":["cap","source"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"i"}},"mo":"-","mn":"0"},"mo":";"}}},{"@attributes":{"id":"MATH-US-00003-2","num":"00003.2"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"msub":{"mi":["cap","rink"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"i"}},{"mo":"{","mtable":{"mtr":[{"mtd":[{"mrow":{"msub":{"mi":["\u03bb","T"]},"mo":"\u2062","msup":{"mi":"\u2147","mrow":{"mrow":{"mo":"-","msub":{"mi":["\u03b2","T"]}},"mo":"\u2062","msub":{"mrow":{"mo":["\uf605","\uf606"],"mrow":{"msubsup":[{"mi":["p","i","current"]},{"mi":["p","i","previous"]}],"mo":"-"}},"mn":"1"}}}}},{"mrow":{"mrow":{"mi":"if","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"msub":{"mrow":{"mo":["\uf605","\uf606"],"mrow":{"msubsup":[{"mi":["p","i","current"]},{"mi":["p","i","previous"]}],"mo":"-"}},"mn":"1"}},"mo":"<","msub":{"mi":["\u03b4","T"]}}}]},{"mtd":[{"mn":"0"},{"mi":"else"}]}]}}],"mo":"="}}}]},"In some embodiments, the capof the foreground pixels in the graph may be set to a large enough constant number to prevent its categorization as a background pixel by the graph cut algorithm. Similarly, the capof the background pixel must also be set to a large constant number. As such, a fast binary graph cut may be performed on the graph based on a number of factors to obtain a segmentation between the foreground and background.","At block , the region map may be stabilized in order to reduce small temporal flickering of the foreground-background edges (e.g., edge waviness artifacts). Noisy pixels may be detected in the unclear region of the region map before the graph cut is performed by counting the foreground to background and background to foreground transition time of each pixel. For every new frame and for each pixel of the new frame, if the pixel doesn't transition from one categorized region to another categorized region (e.g., from a foreground region to a background region), its transition count may decrease. However, if the pixel does transition from a categorized region to another categorized region (e.g., from a background region to a foreground region), then the pixel transition count may increase. If a pixel's transition count is above a threshold value, the region categorization of the pixel may be copied from the pixel's region categorization from the previous image frame's region map.","In some embodiments, at block , a median filter may be applied to the identified foreground region in order to smoothen the foreground edges. The median filter may be applied in the following pseudo code manner:",{"@attributes":{"id":"p-0062","num":"0061"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"For each pixel p in UC region"]},{"entry":[{},"{"]},{"entry":[{},"Count = 0;"]},{"entry":[{},"\u2003\u2003For each pixel pin the NxN support window around pixel p {"]},{"entry":[{},"\u2003\u2003\u2003\u2003If R(p) = UC, count++;"]},{"entry":[{},"\u2003\u2003}"]},{"entry":[{},"\u2003\u2003If(count<N*N\/2), R(p) = BG;"]},{"entry":[{},"\u2003\u2003Else R(p) = FG;"]},{"entry":[{},"}"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"At block , an alpha mask may be generated to convert the foreground categorized pixels to a 0xFF alpha value and convert other categorized pixels to a 0x00 alpha value. In some embodiments, this may comprise an up sampling for the alpha mask.",{"@attributes":{"id":"p-0064","num":"0063"},"figref":"FIG. 8","b":["800","800"]},"At block , virtual objects are identified or received. A virtual object may comprise, but is not limited to, an image, video, slide, text box, bullet item, or a 3D computer graphic object. As such, a virtual object may comprise an object image that may be blended into the background feed and animated or interacted with by a user depicted within the foreground video. Each virtual object may be assigned an effect by a user and the effect may be activated and\/or animated by using the live extracted foreground video of a user. At block , an effect and user action is assigned to each virtual object. For example, an effect may comprise an animation of a virtual object, movement of the virtual object within the background feed or composite video, and\/or issuing of a command to change the background feed of the composite video. Each virtual object is also assigned a required user action to activate or interact with the virtual object, as described in further detail below. In some embodiments, a virtual object may be added or embedded into a background feed by a virtual object authoring application, program or module. For example, a user may select a type of virtual object to add or embed into a background feed or may select a virtual object to be the background feed. As such, the virtual object authoring application, program, or module may be used to assign the user action and the virtual object effect to a virtual object.","At block , a user action is detected. For example, a body mask of a user from the foreground video may be observed entering into a designated area (e.g. a \u2018hot spot\u2019) on a screen (2D) or in a particular area of a scene (e.g., 3D by using the depth information). Another user action may comprise the user body moving in a certain direction. For example, the user moving left, right, forward or backwards may comprise a user action. This may be accomplished by computing the user body's center of mass from the foreground video and then detecting the motion of the user body's center of mass. Further user actions may comprise the user pushing a virtual button. For example, the virtual button may be blended into the background feed of the composite video. The user's hand from the live foreground video may be detected to reach over the virtual button on the composite video and then the depth of the user's hand may be detected from the depth image information. If the depth value of the user's hand while positioned over the virtual button increases, then it may be assumed that the user is \u2018pushing\u2019 the virtual button and as such would active the virtual button. In some embodiments, the activation of the virtual button may comprise the changing of a slide or background, animating a virtual object that has been blended into the composite video, or any other interaction with the background feed.","Further user actions and virtual object effects may comprise a \u2018MovieEffect\u2019 that may comprise a check of whether a user body part is over a predefined \u2018hot spot\u2019 (e.g., a particular side of a screen) and upon detection of the user body entering the \u2018hot spot\u2019, an event may be triggered, such as the playing of an animation. A \u2018BulletEffect\u2019 may comprise the \u2018hot spot\u2019 detection and motion detection that may trigger an effect. For example, if a user body moves from a \u2018hot spot\u2019 A to a \u2018hot spot\u2019 B, then a presentation bullet may be advanced. However, if the user body moves from the \u2018hot spot\u2019 B to the \u2018hot spot\u2019 A, then the presentation bullet may go backwards such that the presentation bullet is no longer advanced. As such, the user body entering into a \u2018hot spot\u2019 may affect the background feed or a virtual object within the composite video. Thus, the \u2018hot spot\u2019 may comprise a 2D placement of the user body and\/or a 3D placement of the user body. For example, a 2D \u2018hot spot\u2019 may comprise a user body entering a defined horizontal positioning, area, or placement and a 3D \u2018hot spot\u2019 may comprise a user body entering a defined horizontal and depth positioning, area, or placement. Moreover, the \u2018hot spot\u2019 approach may further consider a robust statistic, such as a median, instead of simple binary directions.","An \u2018ImageEffect\u2019 may comprise the detection of the horizontal position of the user. For example, if the user is in the center of the screen, he or she may be positioned in the center of the content of the background feed. If the user moves to one side, then the content of the background feed (e.g., text of a presentation slide or a video) may slide over to the other side of the composite video. As such, the user as depicted in the foreground video may seamlessly transition from standing in front of the content of the background feed to standing besides the content of the background feed. In some embodiments, the user's position may be detected by using a median of the horizontal position and\/or the width of the user's body mask.","A \u2018Comparison Effect\u2019 may comprise similarities to the \u2018ImageEffect\u2019 as previously described, but content may be present on both sides of the user. For example, the foreground video may comprise a user and the background feed comprises text and\/or videos on both sides of the user. The content on either side may re-size as the user moves from one side to the other side. For example, if the user moves to the left, then the content on the left may increase in size and the content on the right may decrease in size. In some embodiments, the user's position may be used to position the foreground video behind or in front of content.","A \u2018Graph Effect\u2019 may comprise a user displaying content that may otherwise be too large or wide to within a screen. For example, the content from a background feed or virtual object may be reduced in size so that it fits within the screen and the user (e.g., foreground video) may be positioned behind the content. However, additional content may be directly in front of the user and may be at a full resolution. As such, the user may emphasize a portion of the background feed or content while preserving an overview.","At block , the detected user action is processed. If the detected user action matches with the assigned user action for a virtual object, then the virtual object may be activated, animated, or interacted with. For example, if a virtual button has been assigned an effect of changing a presentation slide depicted in the background feed of the composite video and the virtual button has been assigned a user action of a user \u2018pushing\u2019 the button (as described above), then if the user of the live foreground video places his or her hand over the virtual button and the depth of the user's hand increases, then the virtual button may issue a command to change the presentation slide depicted in the background feed of the composite video. However, if the user action does not match with the virtual object's assigned user action, then the virtual object is not animated, activated, and\/or interacted with. In some embodiments, the virtual object may comprise a video and a required user action of the user as depicted in the foreground video placing his or her hand over the virtual object in order to play the video.","At block , the virtual object is blended into the composite video that comprises the foreground video of the user. As such, the composite video comprises the foreground video (e.g., a depiction of a user) interacting with virtual objects.",{"@attributes":{"id":"p-0073","num":"0072"},"figref":["FIG. 9","FIG. 9","FIG. 5"],"b":["900","900","940","900","920","950","940","920","950","940","950","910","920"]},"In some embodiments, the foreground video of the user presenter  may be embedded into the background feed display  based on a control input. For example, the foreground video may be embedded into the background feed display  based upon a gesture from the user presenter  as previously described in , a mouse click, or a remote control input. In some embodiments, the foreground video may be embedded into the background feed display  based upon a user presenter threshold . For example, the user presenter threshold  may comprise a predefined distance from the camera  such that if the user presenter  meets the threshold limit, then the foreground video comprising the user presenter  may be embedded into the background feed display . For example, the user presenter threshold  may comprise a distance of 10 feet from the camera . As such, if the user presenter  is within the 10 feet user presenter threshold  limit, then the foreground video comprising the user presenter  may be embedded into the background feed . However, if the user presenter  is 15 feet away from the camera , then the user presenter  is outside of the user presenter threshold  and as such the foreground video will not be embedded into the background feed display .","As such, the camera  may receive a depth image comprising the user presenter . The camera  and\/or related hardware or software may continuously monitor the depth image comprising the user presenter . If the user presenter  meets a defined threshold (e.g., a distance from the camera ), then the systems and methods disclosed herein may embed a video of the user presenter  (e.g., the foreground video) into the background feed  (e.g., a presentation slide). However, if the user presenter  does not meet the defined threshold, then the systems and methods disclosed herein may not embed a video of the user presenter  into the background feed . Moreover, since the camera  may continuously monitor or receive the depth images, the foreground video may be repeatedly embedded or removed from the background feed  depending on the movement of the user presenter . As such, the systems and methods disclosed herein may detect a user presenter moving forward or backwards and use such user movement to embed a foreground video comprising the user presenter into a second video, image, presentation slide, or any other image or video.","In some embodiments, the systems and methods disclosed herein may dynamically resize a presentation of the background feed based on the positioning of the user presenter . For example, if the user presenter meets a threshold as previously described, then the background feed may shrink in size and the foreground video comprising the user presenter  may be embedded into the background feed . However, if the user presenter  is outside of the threshold limit, then the background feed may expand in size to occupy a whole screen and the foreground vide of the user presenter would not be embedded into the background feed. In some embodiments, the user presenter is detected as a body mask and the movement of the body mask is detected by the systems and methods disclosed herein.","Although the above example discusses using depth image of the user presenter  to embed or not embed the user presenter  into the background feed display , the camera  may also detect the user presenter  moving from side to side, and as such not changing in depth relative to the camera , to control whether or not to embed the foreground video into the background feed . For example, the user presenter  moving to the right may indicate that the foreground video should be embedded into the background feed display  and the user presenter  moving to the left may indicate that the foreground video should not be embedded into the background feed display .","In some embodiments, the systems and methods disclosed herein may embed the foreground video into the background feed  based on a control input such as a gesture control, mouse click, or remote control input. As such, a gesture from the user presenter  may embed the foreground video into the background feed . For example, the waving of a hand of the user presenter  may comprise a gesture control for the embedding of the foreground video into the background feed .",{"@attributes":{"id":"p-0079","num":"0078"},"figref":"FIG. 10","b":"1000"},"As seen in , a composite video  may comprise a foreground video  of a user presenter embedded into a background feed  that may comprise a second video. However, in some embodiments, the background feed  may comprise a presentation slide. As illustrated, the background feed  may comprise virtual objects , , , , and . The virtual objects may comprise additional videos, images, presentation slides, or icons. Each of the virtual objects may be changed and\/or interacted with based on the positioning, depth, and\/or action of the user presenter . For example, the background feed  comprises a \u2018next\u2019 icon at virtual object . In some embodiments, the user presenter  may position his or her hand such that the depiction of the user presenter in the foreground video  results in the user presenter's hand over the next button to provide a control input to change the background feed (e.g., to proceed to a next slide). In some embodiments, the user presenter may perform a gesture at the next button in order to provide a control input. For example, the user may wave his hand at the next button in order to provide a control input. In some embodiments, the systems and methods disclosed herein may detect the depth of the user presenter's hand in conjunction with the placement of the user presenter's hand within the composite video in order to provide the control input. Similar gestures from the user presenter  may be used to expand, play a video, or interact with other portions , , , and  of the background feed. For example, in some embodiments, as the user presenter  as seen in the composite video  moves from section  to section , the section  may shrink in size and the section  may increase in size as the user presenter  foreground video is in closer proximity to the section .",{"@attributes":{"id":"p-0081","num":"0080"},"figref":"FIG. 11","b":["1100","1100","1110","1120","1130"]},"As seen in , a camera  is connected to a computer . The camera  may comprise a three dimensional (3D) camera, depth camera, z-camera, range camera. In some embodiments, the camera  may be comprised of a color or RGB camera and a depth camera or may comprise of a single camera with an RGB sensor and depth sensor. As such, the camera  receives color information and depth information. The received color information may comprise information related to the color of each pixel of a video. In some embodiments, the color information is received from a Red-Green-Blue (RGB) sensor . As such, the RGB sensor  may capture the color pixel information in a scene of a captured video image. The camera  may further comprise an infrared sensor  and an infrared illuminator . In some embodiments, the infrared illuminator  may shine an infrared light through a lens of the camera  onto a scene. As the scene is illuminated by the infrared light, the infrared light will bounce or reflect back to the camera . The reflected infrared light is received by the infrared sensor . The reflected light received by the infrared sensor results in depth information of the scene of the camera . As such, objects within the scene or view of the camera  may be illuminated by infrared light from the infrared illuminator . The infrared light will reflect off of objects within the scene or view of the camera  and the reflected infrared light will be directed towards the camera . The infrared sensor  may receive the reflected infrared light and determine a depth or distance of the objects within the scene or view of the camera  based on the reflected infrared light.","In some embodiments, the camera  may further comprise a synchronization module  to temporally synchronize the information from the RGB sensor , infrared sensor , and infrared illuminator . The synchronization module  may be hardware and\/or software embedded into the camera . In some embodiments, the camera  may further comprise a 3D application programming interface (API) for providing an input-output (IO) structure and interface to communicate the color and depth information to a computer system . The computer system  may process the received color and depth information and comprise and perform the systems and methods disclosed herein. In some embodiments, the computer system  may display the foreground video embedded into the background feed onto a display screen .",{"@attributes":{"id":"p-0084","num":"0083"},"figref":"FIG. 12","b":["1200","1202","1202","1204","1204","1206","1206","1250"],"sub":["1 ","N","1 ","N","1 ","N"]},"Any node of the network  may comprise a general-purpose processor, a digital signal processor (DSP), an application specific integrated circuit (ASIC), a field programmable gate array (FPGA) or other programmable logic device, discrete gate or transistor logic, discrete hardware components, or any combination thereof capable to perform the functions described herein. A general-purpose processor may be a microprocessor, but in the alternative, the processor may be any conventional processor, controller, microcontroller, or state machine. A processor may also be implemented as a combination of computing devices (e.g. a combination of a DSP and a microprocessor, a plurality of microprocessors, one or more microprocessors in conjunction with a DSP core, or any other such configuration, etc).","In alternative embodiments, a node may comprise a machine in the form of a virtual machine (VM), a virtual server, a virtual client, a virtual desktop, a virtual volume, a network router, a network switch, a network bridge, a personal digital assistant (PDA), a cellular telephone, a web appliance, or any machine capable of executing a sequence of instructions that specify actions to be taken by that machine. Any node of the network may communicate cooperatively with another node on the network. In some embodiments, any node of the network may communicate cooperatively with every other node of the network. Further, any node or group of nodes on the network may comprise one or more computer systems (e.g. a client computer system, a server computer system) and\/or may comprise one or more embedded computer systems, a massively parallel computer system, and\/or a cloud computer system.","The computer system  includes a processor  (e.g. a processor core, a microprocessor, a computing device, etc), a main memory  and a static memory , which communicate with each other via a bus . The machine  may further include a display unit  that may comprise a touch-screen, or a liquid crystal display (LCD), or a light emitting diode (LED) display, or a cathode ray tube (CRT). As shown, the computer system  also includes a human input\/output (I\/O) device  (e.g. a keyboard, an alphanumeric keypad, etc), a pointing device  (e.g. a mouse, a touch screen, etc), a drive unit  (e.g. a disk drive unit, a CD\/DVD drive, a tangible computer readable removable media drive, an SSD storage device, etc), a signal generation device  (e.g. a speaker, an audio output, etc), and a network interface device  (e.g. an Ethernet interface, a wired network interface, a wireless network interface, a propagated signal interface, etc).","The drive unit  includes a machine-readable medium  on which is stored a set of instructions (i.e. software, firmware, middleware, etc)  embodying any one, or all, of the methodologies described above. The set of instructions  is also shown to reside, completely or at least partially, within the main memory  and\/or within the processor . The set of instructions  may further be transmitted or received via the network interface device  over the network bus .","It is to be understood that embodiments of this invention may be used as, or to support, a set of instructions executed upon some form of processing core (such as the CPU of a computer) or otherwise implemented or realized upon or within a machine- or computer-readable medium. A machine-readable medium includes any mechanism for storing information in a form readable by a machine (e.g. a computer). For example, a machine-readable medium includes read-only memory (ROM); random access memory (RAM); magnetic disk storage media; optical storage media; flash memory devices; electrical, optical or acoustical or any other type of media suitable for storing information.","Although the present invention has been described in terms of specific exemplary embodiments, it will be appreciated that various modifications and alterations might be made by those skilled in the art without departing from the spirit and scope of the invention. The previous description of the disclosed embodiments is provided to enable any person skilled in the art to make or use the present invention. Various modifications to these embodiments will be readily apparent to those skilled in the art, and the generic principles defined herein may be applied to other embodiments without departing from the spirit or scope of the invention. Thus, the present invention is not intended to be limited to the embodiments shown herein, but is to be accorded the widest scope consistent with the principles and novel features disclosed herein."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The novel features of the invention are set forth in the appended claims. However, for purpose of explanation, several embodiments of the invention are set forth in the following figures.",{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 12"}]},"DETDESC":[{},{}]}
