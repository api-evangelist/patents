---
title: Mobile device locator adapter system for location based services
abstract: One or more embodiments of the invention provide a method, apparatus, and article of manufacture for locating a mobile device. An application programming interface (API), executed by a computer, provides a plurality of simplified procedures that allow an application program executed by the computer to locate the mobile device. The application program invokes the simplified procedures of the API. The invoked procedures obtain a location of the mobile device given an identification of the mobile device and a description of a spatial reference system associated with the location. Additionally, the invoked procedures interact with specifics for a mobile positioning server of a carrier of the mobile device and with different methods of identifying the device as required by the carrier.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=06963748&OS=06963748&RS=06963748
owner: Autodesk, Inc.
number: 06963748
owner_city: San Rafael
owner_country: US
publication_date: 20011226
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS","CONCLUSION"],"p":["This application is related to the following co-pending and commonly-assigned patent applications, which applications are incorporated by reference herein:","U.S. patent application Ser. No. 10\/034,440, entitled \u201cLOCATION BASED SERVICES BRIDGE TO EXTERNAL DATA SOURCES\u201d, by Nenimara Chithambaram, et. al., filed on the same date herewith;","U.S. patent application Ser. No. 10\/034,442, entitled \u201cFUZZY LOGIC REASONING FOR INFERRING USER LOCATION PREFERENCES\u201d, by Nemmara Chithambaram, filed on the same date herewith;","U.S. patent application Ser. No. 09\/629,115, entitled \u201cMETHOD AND APPARATUS FOR PROVIDING ACCESS TO MAPS ON A PERSONAL DIGITAL ASSISTANT (PDA)\u201d, by Nemmara Chithambaram et al., filed on Jul. 31, 2000;","U.S. patent application Ser. No. 09\/628,851, entitled \u201cGEOGRAPHICAL DATA MARKUP ON A PERSONAL DIGITAL ASSISTANT (PDA)\u201d, by Edward J. Connor, et al., filed on Jul. 31, 2000;","U.S. patent application Ser. No. 09\/628,850, entitled \u201cGENERALIZED, DIFFERENTIALLY ENCODED, INDEXED RASTER VECTOR DATA AND SCHEMA FOR MAPS ON A PERSONAL DIGITAL ASSISTANT\u201d, by Nemmara Chithambaram et al., filed on Jul. 31, 2000;","U.S. application Ser. No. 09\/795,719, entitled \u201cINTERPROCESS APPLICATION PROGRAMMING INTERFACE FOR PERSONAL DIGITAL ASSISTANT APPLICATIONS,\u201d filed on Feb. 28, 2001, by Timothy John Nelson, et. al.,","U.S. application Ser. No. 09\/795,890, entitled \u201cSINGLE GESTURE MAP NAVIGATION GRAPHICAL USER INTERFACE FOR A PERSONAL DIGITAL ASSISTANT,\u201d filed on Sep. 5, 2001, by Nemmara Chithambaram, et. al.,","U.S. patent application Ser. No. 09\/629,117, entitled \u201cMETHOD AND APPARATUS FOR OBTAINING A SET OF MAPS\u201d, by Howard Marantz et al., filed on Jul. 31, 2000; and","Patent Cooperation Treaty application serial number PCT\/US00\/26436, entitled \u201cGEOGRAPHIC MAPS ON A PERSONAL DIGITAL ASSISTANT (PDA) AND SERVER,\u201d filed on Sep. 26, 2000, by Nemmara Chithambaram, et. al.,","U.S. patent application Ser. No. 09\/411,506, entitled \u201cVECTOR-BASED GEOGRAPHIC DATA\u201d, by Gregory A. Roy, et. al., filed on Oct. 4, 1999, which is a continuation patent application of U.S. Pat. No. 5,966,135 issued on Oct. 12, 1999 (application Ser. No. 08\/757,706 filed on Oct. 30, 1996), by Gregory A. Roy et al., entitled \u201cVECTOR-BASED GEOGRAPHIC DATA\u201d.","1. Field of the Invention","The present invention relates generally to location based services, and in particular, to a method, apparatus, and article of manufacture for detecting the location of a mobile device.","2. Description of the Related Art","Detecting the location of a mobile device (e.g., a cellular phone, a personal digital assistant [PDA], etc.) is fundamental to providing location based services (LBS). Location based services are applications\/services that utilize or are based on the location of a device. For example, detecting that a device is located on a particular street (e.g., McInnis Parkway) allows an LBS application to provide a nearby theatre (e.g., Northgate Mall Cinema) when a user requests the closest entertainment option. Additional examples of LBS applications include traffic updates, location sensitive billing, fleet management, and asset and people tracking. However, different protocols may be used by different cellular phone carriers to provide location information. Accordingly, in the prior art, LBS applications must be individually configured for each cellular phone carrier to provide location information. Such configuration customization is time consuming, subject to continuous and multiple modifications\/updates, and burdensome for LBS providers.","Location Detection Prior Art","As described above, a wide variety of methods\/protocols are used by mobile device carriers to determine and provide a device's location to an LBS application. For example, different methods may be used to identify the device. Further, different protocols may be used to communicate with the carrier's mobile positioning server (MPS). Different formats for request\/response exchange with the mobile positioning server may also be used. Additionally, there may be different levels of robustness, error handling, and network infrastructure stability. Lastly, there may be differing levels of precision\/accuracy in the location provided by the MPS (e.g., the approximate location provided by the MPS could be 150 meters to several 100 meters from the actual location of the device). Thus, while some MPS services only provide a geographic region that a mobile device is within, other MPS services may provide specific coordinates.","The use of such varying methodologies are problematic for LBS providers. The focus of most LBS providers is in the application\/business logic that utilizes the location of the device. However, for an application to be utilized in a variety of environments and platforms, substantial time and programming is necessary to customize the application for each cellular provider.","One or more embodiments of the invention provide a method, system, apparatus, and article of manufacture for determining the location of a device using a variety of mobile device carriers. A device locator (also referred to as a device locator adapter) provides a common uniform application programming interface (API) for a user.","The API isolates and allows application developers to ignore specifics of a mobile device carrier when locating a device. The device locator interacts with the specifics of a carrier's positioning server and the different methods of identifying the device as required by the carrier (e.g., cell phone number, a mobile subscriber international subscriber directory number [MSISDN] encoded in a \u201ccookie\u201d in a wireless application request, IP address encoded in the request header, or a pre-stored default in a user profile database). Further, the device locator deals with difference in protocols of the carrier (e.g., HTTP, HTTPS, etc.). The device locator provides robustness by dealing with network instabilities within a carrier's infrastructure.","Once a device's approximate location is determined through the API, the approximate location may be refined by a mobile positioning server by applying one or more heuristics. For example, the approximate location may be snapped to the closest point on a street network or snapped to a landmark or \u201cpoint of interest\u201d in the vicinity. Alternatively, the refinement may look for locations in the vicinity of the approximate location, that the mobile device user has recently visited (e.g., by studying the \u201chistory\u201d in a user's profile). Further, the approximate location may be refined by examining \u201cfavorite\u201d locations bookmarked by the mobile device user, and determining if any \u201cfavorite\u201d locations are in the vicinity of the approximate device location.","Additionally, to utilize new carriers or to modify existing carriers in the system, a new adapter is merely added. The API remains the same from the application developer's view and a new version of the entire system does not need to be deployed. Thus, new adapters may be dynamically deployed and used in the invention.","In the following description, reference is made to the accompanying drawings which form a part hereof, and in which is shown, by way of illustration, several embodiments of the present invention. It is understood that other embodiments may be utilized and structural changes may be made without departing from the scope of the present invention.","Overview","An API allows location based service applications to determine the location of a device regardless of the mobile device carrier. Specifics of the carrier's positioning server, mobile device identification method, and protocol are handled internally by the methods of the API. Accordingly, the application is insulated and the specific details of a carrier are transparent. Further, using heuristics, a device's approximate location may be refined.","Hardware Environment",{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 1","b":["100","102","104","106"]},"A mobile device client  may include any type of mobile device such as handheld personal computers (HPC), palm-held personal computers (PPC or PDA), cellular phones, smart phones, etc. However, embodiments of the invention may be implemented on desktop clients as well. Hereafter, mobile device clients  and desktop clients may be used interchangeably and refer to all types of clients\/client computer systems. A typical combination of resources used in system  may include a network  such as a cell phone network, the Internet, LANs, WANs, or the like, mobile devices , desktop clients, and servers  that are personal computers, workstations, minicomputers, or mainframes.","The network  connects mobile device clients  or desktop clients executing the appropriate software applications to server computers . Server computers  may execute a variety of applications including a server application  (e.g., a Web server), an LBS application , MapGuide server , and\/or servlet . MapGuide servers  and servlets  may be located within or part of server application . The server  and its components may also be referred to as a back office system. Such a back office system maintains access to corporate databases, synchronization utilities, etc. The server application  is typically a program such as a UNIX Apache Web server or Microsoft's Internet Information Server. The servlet  may communicate with a client  through server application  such that any additional processing required by a client  may be performed by the servlet .","In a geographic information system (GIS) offering location based services, servlet  may communicate with MapGuide server  to obtain needed map data\/information. Additionally, servlet  may access map windows files (MWF)  to obtain relevant data. MapGuide server  (or another application) may also interact with a database management system (DBMS)  that may be utilized to retrieve relevant geographical data (such as SDF [Spatial Data Files] data [a special data format for delivering large amounts of data quickly over an intranet or the Internet], raster data, Open DataBase Connectivity (ODBC) data, etc.) from database .","Further, client  may interface with LBS application  through an application programming interface (API)  that provides a uniform interface for determining a location of device  and providing additional location based services. To determine the location of client device , the LBS application may utilize one or more adapters  for each of the different protocols of various mobile device carriers . The carriers  may also maintain user profile information in one or more databases -. The LBS application  may also maintain an LBS database  for the local storage of information.","Generally, components - all comprise logic and\/or data that is embodied in or retrievable from a device, medium, signal, or carrier, e.g., a data storage device, a data communications device, a remote computer or device coupled to the computer via a network or via another data communications device, etc. Moreover, this logic and\/or data, when read, executed, and\/or interpreted, results in the steps necessary to implement and\/or use the present invention being performed.","Thus, embodiments of the invention may be implemented as a method, apparatus, or article of manufacture using standard programming and\/or engineering techniques to produce software, firmware, hardware, or any combination thereof. The term \u201carticle of manufacture\u201d (or alternatively, \u201ccomputer program product\u201d) as used herein is intended to encompass logic and\/or data accessible from any computer-readable device, carrier, or media.","Those skilled in the art will recognize many modifications may be made to this exemplary environment without departing from the scope of the present invention. For example, those skilled in the art will recognize that any combination of the above components, or any number of different components, including different logic, data, different peripherals, and different devices, may be used to implement the present invention, so long as similar functions are performed thereby.","Mobile Device Locator Adapter System","A device locator application may be executing on a client  or a server  to determine the location of a specific mobile device client . To determine the location of a mobile device client , a device-specific identification is provided to the device locator. For example, a mobile subscriber international subscriber directory number (MSISDN) (the directory number [e.g., the GSM\u2014global system for mobile communications number] or the number one dials to connect to a GSM subscriber) may be provided to a device locator application . Such an MSISDN may be encoded in a cookie in a wireless application request. Alternatively, a device may be identified by an Internet protocol (IP) address encoded in a request header or may be identified by a pre-stored default in the user profile database -.","The resulting location provided by the device locator  contains the coordinates of the device , the device's  spatial reference system (SRS), and information regarding the precision of the coordinates.","The device locator  provides an interface  for accessing the network-provided location of a device . For devices  that provide their own location (such as via a SIM card), the application developer already has the coordinates of the device  and does not need to use the device locator .","The device locator  provides users with a unified API  for determining the location of devices . The device locator  retrieves the location of devices  from third-party location determination technology (LDT) providers , each of which may support different protocols (e.g., HTTP, HTTPS, etc.). LDT is a general term that describes a carrier network based service that provides device  location information to internal and external systems. LDT adapters  may be supplied by specific carriers  and may be utilized to provide the location information. Any location obtained from a source other than the supplied LDT adapters  may still be used throughout GIS applications in any application programming information (API) call that requires a location parameter. As described above, LDT providers\/carriers  may each support different protocols that may vary with respect to the format of the request, the format of the response, and the accuracy of the response. Some services may only provide a geographic region that the mobile system is within, while others may provide specific coordinates.","The device locator interface (i.e., the API)  insulates application code from the specific APIs of individual LDT providers . Application developers do not need to understand provider APIs or protocols. Instead, an LDT adapter  translates specific provider APIs into a generic API  that is presented to the application as the device locator . The LDT adapter  therefore insulates the application from differences in protocols like hypertext transfer protocol (HTTP), secure hypertext transfer protocol (HTTPS), etc. Such an architecture may also support additional LDT providers  in the future without changing the application API . An LDT adapter  simply needs to be written for the new LDT provider .",{"@attributes":{"id":"p-0043","num":"0042"},"figref":"FIG. 2","b":["110","202","208","210","202","122","212","204","104"]},"The device locator  interfaces with individual carrier protocols set forth in specific carrier LDT adapters  in internal layer  to retrieve location information using carrier specific implementations. The carrier LDT adapters  interact with client code  that communicates with server code  in the remote LDT provider layer .","To query the location of a device , the application code  retrieves an instance of a device locator object  (e.g., LbsDeviceLocatorManager). The application code  may then use the device locator  to obtain the location of a device  given a device's id. As described above, the format of device ids may vary according to the LDT implementation. If a query for the location of a device  fails, the device locator  may generate an exception.","If the query is successful, a location object may be returned to application layer . As described above, the resulting location object may contain a Point\/Coordinate object containing the coordinates representing the device's location, an SRS object that describes the associated spatial reference system, and a Precision object that describes the precision of the coordinates.","In one or more embodiments of the invention, a device locator manager provides the API  and delegates calls to specific getlocation( ) methods implemented for\/by individual carriers . To ensure that the individual carriers  implement such a getLocation method, an interface (e.g., a devicelocator interface) may be implemented by all specific device locator adapters .","Ericsson\u2122 Implementation","As described above, various adapters  may be utilized by the LBS application . Each adapter  may be configured for a particular cellular carrier . The following description is specific for supporting an implementation for an adapter  implemented for Ericsson\u2122. For the Ericsson\u2122 implementation, the device id is represented as an MSISDN.","The Ericsson\u2122 implementation locates the device  within a cell and can determine its approximate distance from the cell tower. A cell is a geographic area surrounding or immediately adjacent to a base station. This location data may be modeled as an arc as shown in FIG. . The Point object returned (e.g., as part of the location object) represents the geometric center of the arc, and the application layer  may retrieve the inner and outer radii d1 and d2. Further, angles \u03b8and \u03b8are in degrees and are measured clockwise from due North.","If the device locator  fails to determine the location of a device , it will retry the request a predetermined\/specified number of times. If, after the specified number of retries, the device locator  still fails to determine the location, an exception is thrown. Typically, exceptions occur when interfacing with the LDT provider \/adapter . If the LDT provider  generates the exception, then any additional information provided by the provider , such as error codes and messages, may be written to an error log file.","One can determine that an exception was thrown by the device locator  by comparing its error code to a list of error codes. The following tables describe the error codes returned by an Ericsson\u2122 implementation, that will appear in an error log file. In the tables, the term coordinate system refers to a system for specifying a location. The Ericsson\u2122 Mobile Positioning Protocol (Ericsson\u2122 MPP) refers to an HTTP\/HTTPS-based specification developed by Ericsson for interfacing with a mobile positioning center. IDMS0 refers to a format for specifying latitude or longitude, where I is a letter indicating the cardinal direction, D is degrees (2 or 3 digits), M is minutes (2 digits), S is seconds (2 digits), and 0 indicates no decimals (e.g., E153806 or N603758). Additionally, Mobile Positioning Centre (MPC) is the term employed by Ericsson\u2122 to describe a positioning gateway that enables applications to access mobile station position information. Further, Mobile Positioning System (MPS) is the term employed by Ericsson\u2122 to describe the implementation of their MPP for LDT. The error codes represent version 3.0 of the Ericsson\u2122 MPS SDK.",{"@attributes":{"id":"p-0052","num":"0051"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":"TABLE 1"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Ericsson\u2009\u2122 General Error Codes"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"112pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"105pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Error Code","Description"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":["\u2003\u20020","No error."]},{"entry":["200-299","Syntax error."]},{"entry":["300-399","Authentication error."]},{"entry":["400-499","Authorization error."]},{"entry":["500-599","Positioning error."]},{"entry":["600-699","Network error."]},{"entry":["9999","Internal MPC error."]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0053","num":"0052"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":"TABLE 2"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Ericsson\u2009\u2122 Syntax Error Codes"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Error code","Description"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":["200-299","Syntax error. Syntax error is always described with a text"]},{"entry":[{},"slogan."]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0054","num":"0053"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":"TABLE 3"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Ericsson\u2009\u2122 Authentication Error Codes"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Error Code","Description"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":["300","Access denied. Invalid Password or Client Id or the LCS"]},{"entry":[{},"client is not activated."]},{"entry":["399","Authentication error, other."]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0055","num":"0054"},"tables":{"@attributes":{"id":"TABLE-US-00004","num":"00004"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":"TABLE 4"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Ericsson\u2009\u2122 Authority Error Codes"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Error Code","Description"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":["400","Request type not allowed for client."]},{"entry":["401","MSISDN specified in the request not allowed to be"]},{"entry":[{},"positioned by the client."]},{"entry":["499","Authority error, other."]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0056","num":"0055"},"tables":{"@attributes":{"id":"TABLE-US-00005","num":"00005"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":"TABLE 5"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Ericsson\u2009\u2122 Positioning Error Codes"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"21pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Error",{}]},{"entry":["Code","Description"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":["503","Congestion. It is not possible to execute the positioning request at"]},{"entry":[{},"the requested time or times due to heavy usage of the MPC."]},{"entry":["504","Conversion to correct geodetic datum failed."]},{"entry":["505","Positioning of the MS failed, probably due to missing cell data."]},{"entry":["506","Positioning of the specified MSISDN is not allowed at the moment."]},{"entry":["599","Positioning error, other."]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0057","num":"0056"},"tables":{"@attributes":{"id":"TABLE-US-00006","num":"00006"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":"TABLE 6"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Ericsson\u2009\u2122 Network Error Codes"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"21pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Error",{}]},{"entry":["Code","Description"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":["600","The specified MSISDN in not known to the network."]},{"entry":["601","The specified MSISDN is not available for positioning. This occurs"]},{"entry":[{},"for example if the MS is detached."]},{"entry":["602","The specified MSISDN is not reachable for positioning at the"]},{"entry":[{},"moment. This occurs for example if the MS out of radio coverage."]},{"entry":["603","Positing failed due to network reasons."]},{"entry":["699","Network error, other."]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0058","num":"0057"},"tables":{"@attributes":{"id":"TABLE-US-00007","num":"00007"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":"TABLE 7"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Ericsson\u2009\u2122 MPS 1.1 Error Codes"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"21pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Error",{}]},{"entry":["Code","Description"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"21pt","align":"char","char":"."}},{"@attributes":{"colname":"2","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["0","No error."]},{"entry":["100","No parameters were supplied with the request."]},{"entry":["101","The POSITION_TIME parameter is missing in the request."]},{"entry":["102","The POSITION_TIME parameter is missing in the request."]},{"entry":["107","Access denied. The user does not exist or the supplied password is"]},{"entry":[{},"incorrect."]},{"entry":["110","The parameter GEODETIC_DATUM was specified in the request"]},{"entry":[{},"but was not assigned any value."]},{"entry":["111","The parameter COORDINATE_SYSTEM was specified in the"]},{"entry":[{},"request but was not assigned any value."]},{"entry":["112","The parameter POSITION_FORMAT was specified in the request"]},{"entry":[{},"but was not assigned any value."]},{"entry":["113","The parameter GMT_DIFFERENCE was specified in the request"]},{"entry":[{},"but was not assigned any value."]},{"entry":["114","The parameter POSITION_DELAY was specified in the request"]},{"entry":[{},"but was not assigned any value or the assigned value was not a"]},{"entry":[{},"numeric string."]},{"entry":["1001","Access denied. The specified request is not authorized to execute."]},{"entry":["1002","Invalid syntax for the supplied POSITION_ITEM value. This can"]},{"entry":[{},"also indicate that too many position items have been specified."]},{"entry":["1003","Invalid syntax for the supplied POSITION_TIME value. This can"]},{"entry":[{},"also indicate that too many position times have been specified."]},{"entry":["1004","The supplied request will generate too many positions and has thus"]},{"entry":[{},"been rejected."]},{"entry":["1005","The MPC has problems contacting the network."]},{"entry":["1006","The PP the MPC uses for the request has an internal error, due to"]},{"entry":[{},"this the MPC cannot execute the request. The MPC may be missing"]},{"entry":[{},"cell data in its internal cell database."]},{"entry":["1007","The specified MS is not available for positioning. This occurs for"]},{"entry":[{},"example if the MS is detached."]},{"entry":["1008","The request has passed its specified positioning time. This can be"]},{"entry":[{},"due to heavy load on the MPC and due to POSITION_DELAY"]},{"entry":[{},"being set to a too small value."]},{"entry":["1009","The network claims that there is an error in the MS."]},{"entry":["1010","Congestion. The MPC is unable to execute the positioning request"]},{"entry":[{},"at the requested time or times due to currently heavy usage of the"]},{"entry":[{},"MPC. This can be overcome by increasing the allowed"]},{"entry":[{},"positioning delay value (see Available MPP parameters on page 4)."]},{"entry":["9999","The request cannot be executed due to an internal error in the"]},{"entry":[{},"MPC."]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}},"br":{}},"Once a location for a device  has been obtained, one or more embodiments of the invention may refine the approximate location by applying several heuristics. A user or application may specify when such a location refinement is to occur. For example, a boolean \u201cREFINE\u201d value may be set to TRUE if refinement is desired. Accordingly, once a location is identified (as described above), the boolean value may be examined to determine if further refinement should be performed.","A user may be permitted to specify the desired methodology for refining the location of a device . The different methodologies may include snapping the location to the closest point on the street network, a landmark, or a \u201cpoint of interest\u201d in the vicinity. Alternatively, the application may look for locations in the vicinity of the approximate location that the mobile device user has recently visited (i.e., studying the \u201chistory\u201d in the user profile) and snapping the location to a particular location (e.g., the closest location last visited). Further, the application may examine \u201cfavorite\u201d locations bookmarked by the mobile device user and determine if any such \u201cfavorite\u201d locations are in the vicinity of the approximate device location. The approximate location may then snap to the closest \u201cfavorite\u201d location.","To refine the approximate location of a device , a location refinement manager may be utilized. The location refinement manager is the initial point for location refinement, and a method of the location refinement manager may return a list of lists of refined locations. Each list of refined locations may be based on the particular refinement performed. For example, one list may be based on favorites, a second list may be based on the history, while a third list may be based on landmarks. Further, each list may be sorted based on their distance from the centroid or approximate location.","Once the list of lists of refined locations is obtained, all of the lists may be resolved into a single list. For example, each location in each list may be combined into a single list sorted by distance from the centroid. Additionally, the individual lists or single resolved lists may be filtered such that only locations within a specified polygon are returned. Further, based on the individual lists or single resolved list, a single refined list may be returned. Accordingly, depending on the implementation of the location refinement manager, the user may be presented with a single refined location, a list of refined locations, or a list of lists of refined locations. Nonetheless, the location refinement manager permits the approximate location of a device  to be refined based on various factors\/heuristics that may be selectable by a user.","Adapter System Flow",{"@attributes":{"id":"p-0063","num":"0062"},"figref":["FIG. 4","FIG. 4"],"b":["100","1","100","110","100","100"]},"Once the application program  has been deployed, simplified procedures of an API  of the application program  may be invoked at step . The simplified procedures obtain the location of the mobile device  at step  (e.g., using an identification of the mobile device ). To obtain the location, the invoked procedures interact with the carrier adapter  at step . Since the carrier adapter  is customized for a particular carrier , specific information and methods may be utilized. For example, the invoked procedures may interact with the specifics for a mobile positioning server of the carrier  and different methods of identifying the device  as required by the carrier . Additionally, the invoked procedures may obtain the spatial reference system associated with the location of the device  at step .","The location of the mobile device  obtained at step  may comprise a cellular phone number, an MSISND, an Internet protocol address encoded in a request header or a pre-stored default. Further as described above, by interacting with one or more carrier adapters  at step , the invoked procedures interact with different protocols provided by the carriers . Once the location has been obtained at step , the location may be further refined at step . To refine the location, one or more heuristics may be applied. For example, as described above, the location may be snapped to a closest point on a street network, to a landmark or point of interest in the vicinity, to a location in the vicinity of the location the mobile device user has recently visited (by examining the user's \u201chistory\u201d), or to a location in a vicinity of the location that the mobile device user has bookmarked as a \u201cfavorite\u201d location.","This concludes the description of the preferred embodiment of the invention. The following describes some alternative embodiments for accomplishing the present invention. For example, any type of computer, such as a mainframe, minicomputer, or personal computer, or computer configuration, such as a timesharing mainframe, local area network, or standalone personal computer, or an type of mobile device such as a cellular phone, laptop computer, personal digital assistant, etc. could be used with the present invention.","The foregoing description of the preferred embodiment of the invention has been presented for the purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise form disclosed. Many modifications and variations are possible in light of the above teaching. It is intended that the scope of the invention be limited not by this detailed description, but rather by the claims appended hereto."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Referring now to the drawings in which like reference numbers represent corresponding parts throughout:",{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 4"}]},"DETDESC":[{},{}]}
