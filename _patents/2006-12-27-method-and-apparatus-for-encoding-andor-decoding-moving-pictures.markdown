---
title: Method and apparatus for encoding and/or decoding moving pictures
abstract: A method of encoding moving pictures using a plurality of quantization matrices. The method involves selecting one of the plurality of quantization matrices in consideration of an at least one characteristics of an input image; transforming the input image; and quantizing the transformed input image using the selected quantization matrix.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07978767&OS=07978767&RS=07978767
owner: Samsung Electronics Co., Ltd.
number: 07978767
owner_city: Suwon-Si
owner_country: KR
publication_date: 20061227
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS"],"p":["This application is a continuation of application Ser. No. 10\/755,671 filed on Jan. 13, 2004 now abandoned, which claims the priority of Korean Patent Application No. 2003-2371, filed on Jan. 14, 2003, in the Korean Intellectual Property Office, the disclosure of which is incorporated herein by reference.","1. Field of the Invention","The present invention relates to a method and apparatus for encoding and\/or decoding moving pictures, and more particularly, to a method and an apparatus for encoding and\/or decoding moving pictures which are capable of enhancing the efficiency of encoding moving pictures by adaptively selecting a quantization matrix in consideration of the characteristics of images input into a moving picture encoder.","2. Description of the Related Art",{"@attributes":{"id":"p-0006","num":"0005"},"figref":"FIG. 1","b":["120","140"]},"In order to provide a video-on-demand (VOD) service or to enable a moving picture communication, the encoding unit  creates a bitstream encoded by a compression technique, and the decoding unit  restores original images from a bitstream input thereinto.","A discrete cosine transform (DCT) unit  carries out a DCT operation on image data input thereinto in the unit of an 8\u00d78 pixel block in order to remove spatial correlation from the input image data. A quantization unit (Q)  carries out highly efficient data loss compression by carrying out quantization on the input image data using a DCT coefficient obtained by the DCT unit  and representing the quantized data by several representative values.","An inverse quantization unit (IQ)  inversely quantizes the quantized image data provided by the quantization unit . An inverse discrete cosine transform (IDCT) unit  carries out an IDCT on the inversely quantized image data provided by the inverse quantization unit . A frame memory unit  stores the IDCT'ed image data provided by the IDCT unit  on a frame-by-frame basis.","A motion estimation and compensation unit (ME\/MC)  estimates a motion vector (MV) for each macroblock and a sum of absolute difference (SAD), which correspond to a block matching error, by using the image data of a current frame inputted thereinto and the image data of a previous frame stored in the frame memory unit .","A variable length coding unit (VLC)  removes statistical redundancy from digital cosine transformed and quantized image data according to the estimated motion vector provided by the motion estimation and compensation unit .","A bitstream encoded by the encoding unit  is decoded by the decoding unit . The decoding unit  includes a variable length decoding unit (VLD) , an inverse quantization unit , an IDCT unit , a frame memory unit , and a motion estimation unit .","U.S. Pat. No. 6,480,539 discloses an example of an apparatus for encoding moving pictures.","A set-top box, which receives an analog terrestrial broadcast program and then encodes and stores the received program by using a data compression method such as MPEG2 or MPEG4, has recently been developed. However, in the case of a terrestrial broadcast, images arriving at a receiving terminal may be distorted due to channel noise. For example, an image may look as if white Gaussian noise were added thereto. If the image is compressed as it is, the efficiency of compressing the image may be very low due to the influence of the white Gaussian noise.","Therefore, in order to get rid of noise in a conventional method of encoding moving pictures, a pretreatment filter is provided at an input port of an encoder. However, in the case of using the pretreatment filter, an additional calculation process for encoding moving pictures is needed.","In addition, in such a conventional method of encoding moving pictures, a quantization matrix is determined irrespective of the characteristics of an input image, and quantization is carried out on the input image by applying the quantization matrix to the input image on a picture-by-picture basis, in which case the efficiency of encoding the inputted image is low.","The present invention provides a method and an apparatus for encoding and\/or decoding moving pictures, which are capable of improving the efficiency and performance of compressing moving pictures.","The present invention also provides a method and an apparatus for encoding and\/or decoding moving pictures, which are capable of removing noise without increasing the number of calculations performed.","According to an aspect of the present invention, there is provided a method of encoding moving pictures using a plurality of quantization matrices. The method involves (a) selecting one of the plurality of quantization matrices in consideration of characteristics of an input image; (b) transforming the input image; and (c) quantizing the transformed input image using the selected quantization matrix.","According to another aspect of the present invention, there is provided a method of decoding moving pictures using a plurality of quantization matrices. The method involves (a) carrying out variable length decoding on encoded image data; (b) extracting index information that specifies one of the plurality of quantization matrices, classified according to characteristics of an input image, from the variable-length-decoded image data; (c) selecting one of the plurality of quantization matrices based on the extracted index information; and (d) inversely quantizing each macroblock of the variable-length-decoded image data using the selected quantization matrix.","According to another aspect of the present invention, there is provided an apparatus for encoding moving pictures using a plurality of quantization matrices. The apparatus includes a quantization matrix determination unit that selects one of the plurality of quantization matrices for each macroblock in consideration of characteristics of an input image and generates index information indicating the selected quantization matrix for each macro block; a quantization matrix storage unit that stores a plurality of quantization matrices, which are classified according to the characteristics of the input image and outputs a quantization matrix for each macroblock according to the index information generated by the quantization matrix determination unit; an image transformation unit that transforms the input image; and a quantization unit that quantizes the transformed input image using the selected quantization matrix.","According to another aspect of the present invention, there is provided an apparatus for decoding moving pictures using a plurality of quantization matrices. The apparatus includes a variable length decoding unit that receives an encoded image stream, carries out variable length decoding on the input image stream, and extracts index information that specifies one of the plurality of quantization matrices, which are classified according to characteristics of an input image, from each macroblock of the variable-length-decoded image stream; a quantization matrix storage unit that stores the plurality of quantization matrices, selects one of the plurality of quantization matrices based on the extracted index information, and outputs the selected quantization matrix; and an inverse quantization unit that inversely quantizes each macroblock of the variable-length-decoded image stream using the quantization matrix output from the quantization matrix storage unit.","Additional aspects and\/or advantages of the invention will be set forth in part in the description which follows and, in part, will be obvious from the description, or may be learned by practice of the invention.","Reference will now be made in detail to the embodiments of the present invention, examples of which are illustrated in the accompanying drawings, wherein like reference numerals refer to the like elements throughout. The embodiments are described below to explain the present invention by referring to the figures.","When it comes to encoding moving pictures, pre-treatment filtering is very important because it can increase the efficiency of encoding the moving pictures by removing noise from images. While a conventional pre-treatment filtering technique for removing noise from images is generally carried out in a spatial pixel block, in the present invention, a noise removal technique is carried out in a DCT block in an apparatus for encoding moving pictures.","In the present invention, an approximated generalized Weiner filtering method is used for removing noise from images. In the approximated generalized Weiner filtering method, Weiner filtering is realized by taking advantage of fast unitary transformation, such as a discrete cosine transform (DCT). However, a filtering method other than the approximated generalized Weiner filtering method may be selectively used for carrying out filtering in a DCT block.",{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIG. 2"},"In , v represents an image block containing noise, and \u0175 represents a row-ordered column vector of a filtered image block. Since the average of the image block v is not 0, an average estimation unit  estimates an average {circumflex over (m)} of the image block v, and a subtraction unit  subtracts the estimated average {circumflex over (m)} from the image block v.","A value z, output from the subtraction unit  as a result of the subtraction, is filtered by a filtering unit , and the filtering unit  outputs filtered data \u0177 as a result of the filtering. An addition unit  adds the estimated average {circumflex over (m)} of the image block v to the filtered data and then outputs desirably filtered data \u0175 as a result of the addition.","Hereinafter, an approximated generalized Weiner filtering method for processing an image model whose average is 0 will be described in greater detail.","The approximated generalized Weiner filtering method for processing an image model whose average is 0 can be expressed by Equation (1) below.\n\n\u2003\u2003(1)\n","In Equation (1), {tilde over (L)}=AL A*, L=[I+\u03c3R], R=E[y y], Z=Az, and \u03c3represents a noise variance value. In addition, in Equation (1), A represents unitary transformation. Since in the present embodiment, DCT is used as unitary transformation, A represents DCT here. Supposing that Cand {circle around (x)} represent an 8\u00d78 DCT matrix and a Kronecker operator, A=C{circle around (x)}C.","Since, in most cases, {tilde over (L)} is approximately diagonalized in a unitary transformation, Equation (1) can be rearranged into Equation (2) below.\n\n\u2003\u2003(2)\n","In Equation (2), \u0176={tilde over (L)}Z\u2248[Diag{tilde over (L)}]Z.","Therefore, by applying Equation (2) to an 8\u00d78 block, Equation (3) below can be obtained.",{"@attributes":{"id":"p-0045","num":"0044"},"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":[{"mtd":[{"mrow":{"mrow":[{"mover":{"mi":"y","mo":"\u22d2"},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["k","l"],"mo":","}}},{"mrow":[{"mover":{"mi":"p","mo":"~"},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["k","l"],"mo":","}}},{"mi":"Z","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["k","l"],"mo":","}}}],"mo":"\u2062"}],"mo":"\u2248"}},{"mrow":{"mo":["(",")"],"mn":"3"}}]},{"mtd":[{"mrow":{"mrow":{"mover":{"mi":"p","mo":"~"},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["k","l"],"mo":","}}},"mo":"\u2245","mfrac":{"mn":"1","mrow":{"mn":"1","mo":"+","mrow":{"mfrac":{"msubsup":{"mi":["\u03c3","n"],"mn":"2"},"msup":{"mi":"\u03c3","mn":"2"}},"mo":"\u2062","msup":{"mrow":[{"mi":"\u03a8","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["k","l"],"mo":","}}},{"mo":"-","mn":"1"}]}}}}}},{"mrow":{"mo":["(",")"],"mn":"4"}}]}]}}}},"In Equation (4), \u03a8(k, l) represents normalized elements placed along a diagonal line of AL A*, and \u03c3represents a variance value of an original image y. In general, \u03c3cannot be known. Therefore, \u03c3is substituted by a result of subtracting the noise variance value \u03c3from a variance value of z.","As shown in Equation (3), approximated generalized Weiner filtering is carried out on an image block whose average is 0 by multiplying a two-dimensional DCT coefficient Z(k, l) by {tilde over (p)}(k, l). Once \u0177(m, n) is determined, a final, filtered image is obtained by adding {circumflex over (m)}(m, n) to \u0177(m, n).","Hereinafter, an approximated generalized Weiner filtering method for processing an image model whose average is not 0 will be described in greater detail.","Let us assume that an average block is obtained by multiplying an input DCT block containing noise by S(k, l), i.e., the average block satisfied in Equation (5) below. Then, the approximated generalized Weiner filter method of , which carries out addition and subtraction in the DCT block, can be restructured into an approximated generalized Weiner filter of , B, or C.\n\n()=()\u00b7()\u2003\u2003(5)\n","By using Equations (3) and (5), an image block filtered in the DCT block can be represented by Equation (6) below.",{"@attributes":{"id":"p-0051","num":"0050"},"maths":{"@attributes":{"id":"MATH-US-00002","num":"00002"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mtable":{"mtr":[{"mtd":{"mrow":{"mrow":[{"mover":{"mi":"W","mo":"\u22d2"},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["k","l"],"mo":","}}},{"mrow":[{"mover":{"mi":"Y","mo":"\u22d2"},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["k","l"],"mo":","}}},{"mover":{"mi":"M","mo":"^"},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["k","l"],"mo":","}}}],"mo":"+"}],"mo":"="}}},{"mtd":{"mrow":{"mo":"=","mrow":{"mrow":[{"mo":["(",")"],"mrow":{"mrow":[{"mrow":[{"mover":{"mi":"p","mo":"~"},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["k","l"],"mo":","}}},{"mo":["(",")"],"mrow":{"mn":"1","mo":"-","mrow":{"mi":"S","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["k","l"],"mo":","}}}}}],"mo":"\u00b7"},{"mi":"S","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["k","l"],"mo":","}}}],"mo":"+"}},{"mi":"V","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["k","l"],"mo":","}}}],"mo":"\u00b7"}}}},{"mtd":{"mrow":{"mo":"=","mrow":{"mrow":[{"mi":"F","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["k","l"],"mo":","}}},{"mi":"V","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["k","l"],"mo":","}}}],"mo":"\u00b7"}}}}]}},{"mrow":{"mo":["(",")"],"mn":"6"}}]}}}}},"F(k, l) in Equation (6) can be expressed by Equation (7) below.",{"@attributes":{"id":"p-0053","num":"0052"},"maths":{"@attributes":{"id":"MATH-US-00003","num":"00003"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"mi":"F","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["k","l"],"mo":","}}},{"mrow":{"mrow":[{"mrow":[{"mover":{"mi":"p","mo":"~"},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["k","l"],"mo":","}}},{"mo":["(",")"],"mrow":{"mn":"1","mo":"-","mrow":{"mi":"S","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["k","l"],"mo":","}}}}}],"mo":"\u00b7"},{"mi":"S","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["k","l"],"mo":","}}}],"mo":"+"},"mo":"=","mfrac":{"mrow":[{"mn":"1","mo":"+","mrow":{"mrow":{"mi":"S","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["k","l"],"mo":","}}},"mo":["\u00b7","\u00b7"],"mfrac":[{"msubsup":{"mi":["\u03c3","n"],"mn":"2"},"msup":{"mi":"\u03c3","mn":"2"}},{"mn":"1","mrow":{"mi":"\u03a8","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["k","l"],"mo":","}}}}]}},{"mn":"1","mo":"+","mrow":{"mfrac":[{"msubsup":{"mi":["\u03c3","n"],"mn":"2"},"msup":{"mi":"\u03c3","mn":"2"}},{"mn":"1","mrow":{"mi":"\u03a8","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["k","l"],"mo":","}}}}],"mo":"\u00b7"}}]}}],"mo":"="}},{"mrow":{"mo":["(",")"],"mn":"7"}}]}}}}},"As shown in Equation (6), the entire filtering process can be simplified into a multiplication of F(k, l). Equation (7) shows that F(k, l) is determined by a signal-to-noise  ratio (SNR), a covariance matrix, and an average matrix.","In order to determine F(k, l), it is necessary to obtain an average matrix S(k, l). In the present embodiment, among possible candidates for the average matrix S(k, l), the one that is satisfied in Equation (5) is selected. The average matrix S(k, l) can be represented by Equation (8) below. Equation (8) illustrates one of the simplest forms that the average matrix S(k, l) could take in the DCT block.",{"@attributes":{"id":"p-0056","num":"0055"},"maths":{"@attributes":{"id":"MATH-US-00004","num":"00004"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"mi":"S","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["k","l"],"mo":","}}},{"mo":["(","\u2062","\u2062",")"],"mstyle":[{"mspace":{"@attributes":{"width":"0.em","height":"0.ex"}}},{"mspace":{"@attributes":{"width":"0.em","height":"0.ex"}}}],"mtable":{"mtr":[{"mtd":[{"mn":"1"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"0"}]}]}}],"mo":"="}},{"mrow":{"mo":["(",")"],"mn":"8"}}]}}}}},"Hereinafter, a pretreatment process performed in an apparatus for encoding moving pictures will be described in greater detail with reference to .","As described above, an approximated generalized Weiner filtering process can be carried out on an image block whose average is not 0 by multiplying the image block with a DCT value.",{"@attributes":{"id":"p-0059","num":"0058"},"figref":["FIGS. 4A through 4C","FIGS. 4A through 4C","FIGS. 4A and 4B","FIGS. 4A and 4B","FIG. 4C"]},"As described in , the concepts of the present invention, described in , can be directly applied to an occasion when an apparatus for encoding moving pictures processes an inter block, as long as the noise has been removed from the motion-compensated block information p(m, n).","A covariance value \u03a8(k, l) is determined depending on whether an input image block is an inter block or an intra block. Therefore, F(k, l) of  may be varied depending on whether the input image block is an inter block or an intra block.","Hereinafter, a method of obtaining an estimated variance value of intra blocks or inter blocks, from each of which their average is subtracted, will be described in detail with reference to Equation (9) below. Supposing that S represents an N\u00d7N (where N=8) block from which an average of the corresponding block has already been subtracted, a variance matrix of the N\u00d7N block can be obtained using Equation (9).",{"@attributes":{"id":"p-0063","num":"0062"},"maths":{"@attributes":{"id":"MATH-US-00005","num":"00005"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mover":{"mi":"C","mo":"^"},"mo":"=","mrow":{"mfrac":[{"mn":["1","2"]},{"mi":"N","mrow":{"mn":"2","mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mi":"trace","mrow":{"mo":["(",")"],"mrow":{"msup":{"mi":["S","T"]},"mo":"\u2062","mi":"S"}}}}],"mo":["\u2062","\u2062"],"mrow":{"mo":["(",")"],"mrow":{"mrow":{"msup":{"mi":["S","T"]},"mo":"\u2062","mi":"S"},"mo":"+","msup":{"mi":["SS","T"]}}}}}},{"mrow":{"mo":["(",")"],"mn":"9"}}]}}}}},"Equation (9) has been disclosed by W. Niehsen and M. Brunig in \u201cCovariance Analysis of Motion-compensated Frame Differences\u201d, IEEE Trans. Circ. Syst. for Video Technol., June 1999.","An estimated variance value can be obtained by applying Equation (9) to a variety of experimental images. Where an original image block is an intra block, an original image is divided into 8\u00d78 blocks, and then a variance value of each of the 8\u00d78 blocks is calculated. On the other hand, where the original image block is an inter block, an estimated variance value is calculated by applying Equation (9) above to each image block that is determined as an inter block.","By using the estimated covariance value, the following equation is obtained: R=E[y y]. Thereafter, by carrying out DCT on R, the following equation is obtained: \u03a8=ARA*.","Hereinafter, a method of calculating",{"@attributes":{"id":"p-0068","num":"0067"},"maths":{"@attributes":{"id":"MATH-US-00006","num":"00006"},"math":{"@attributes":{"overflow":"scroll"},"mfrac":{"msubsup":{"mi":["\u03c3","n"],"mn":"2"},"msup":{"mi":"\u03c3","mn":"2"}}}},"br":{}},"In Equation (7), the noise variance value \u03c3can be obtained by using a noise estimator. Given that noise and original image pixels are independent random variables, an estimated value {circumflex over (\u03c3)}of the variance \u03c3of an original image can be calculated using Equation (10) below.\n\n{circumflex over (\u03c3)}=max({circumflex over (\u03c3)}\u2212{circumflex over (\u03c3)}, 0)\u2003\u2003(10)\n","In Equation (10), \u03c3represents a variance value of each macroblock (MB). In a typical type of apparatus for encoding moving pictures, \u03c3is calculated on a macroblock-by-macroblock basis. In the present embodiment, 8\u00d78 blocks in the same macroblock are supposed to have the same variance value. Therefore, there is no need to perform additional calculations to obtain a variance value of each of the 8\u00d78 blocks.",{"@attributes":{"id":"p-0071","num":"0070"},"figref":"FIG. 6"},"In the present embodiment a level of noise contained in the input image is adaptively reflected in a quantization matrix.","Hereinafter, the structure and operation of the apparatus for encoding moving pictures according to a preferred embodiment of the present invention will be described in detail with reference to .","The apparatus of  includes a discrete cosine transfer unit , a quantization unit (Q) , a variable length coding unit (VLC) , an inverse quantization unit (IQ) , an inverse DCT unit (IDCT) , a frame memory unit , and a motion estimation and compensation unit , which correspond to the DCT unit , the quantization unit , the VLC unit , the inverse quantization unit , the inverse DCT unit , the frame memory , and the motion estimation and compensation unit , respectively, of the encoding unit  of . In addition, the apparatus further includes a noise estimation unit , a quantization weight matrix determination unit , and a quantization weight matrix storage unit .","Since the DCT unit , the inverse DCT unit , the frame memory unit , and the motion estimation and compensation unit  serve the same functions as their respective counterparts of , their description will not be repeated.","The quantization weight matrix determination unit  determines a quantization weight matrix corresponding to a predetermined macroblock based on a noise variance value \u03c3received from the noise estimation unit  and the predetermined macroblock's variance value \u03c3received from the motion estimation and compensation unit . Thereafter, the quantization weight matrix determination unit  sends index information corresponding to the determined quantization weight matrix to the quantization weight matrix storage unit  and the VLC unit .","Hereinafter, a method of determining a quantization weight matrix corresponding to the predetermined macroblock based on \u03c3received from the noise estimation unit  and \u03c3received from the motion estimation and compensation unit , will be described in detail.","As described above with reference to Equation (8) and , F(k, l) is determined by Equation (7). Once F(k, l) is determined, the DCT coefficient V(k, l) of an 8\u00d78 block is multiplied by F(k, l), and the result of the multiplication \u0174(k, l) is divided by a predetermined quantization weight matrix during a quantization process.","The apparatus of  integrates the process of multiplying F(k, l) by the DCT coefficient V(k, l) and the process of dividing \u0174(k, l) by the quantization weight matrix into a single process and performs the single process. In other words, if a location component of (k, l) of a quantization weight matrix QT is represented by Q(k, l), then a location of (k, l) in a new quantization weight matrix QT\u2032 is Q(k, l)\/F(k, l).","In the present embodiment, by integrating the two separate processes into a single process, a plurality of F matrices obtained using \u03c3and \u03c3are computed in advance, and then the new quantization weight matrix QT\u2032 is then computed using the plurality of F matrices and then is stored in the quantization weight matrix storage unit .","In addition, in the present embodiment, five new quantization weight matrices obtained using \u03c3and \u03c3are stored in the quantization weight matrix storage unit . Once \u03c3and \u03c3are determined,",{"@attributes":{"id":"p-0082","num":"0081"},"maths":{"@attributes":{"id":"MATH-US-00007","num":"00007"},"math":{"@attributes":{"overflow":"scroll"},"mfrac":{"msubsup":{"mi":["\u03c3","n"],"mn":"2"},"msup":{"mi":"\u03c3","mn":"2"}}}},"br":{}},"As shown in Equation (7), F(k, l) is determined by S(k, l), \u03a8(k, l), and",{"@attributes":{"id":"p-0084","num":"0083"},"maths":{"@attributes":{"id":"MATH-US-00008","num":"00008"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mfrac":{"msubsup":{"mi":["\u03c3","n"],"mn":"2"},"msup":{"mi":"\u03c3","mn":"2"}},"mo":"."}}},"br":{}},{"@attributes":{"id":"p-0085","num":"0084"},"maths":{"@attributes":{"id":"MATH-US-00009","num":"00009"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mfrac":{"msubsup":{"mi":["\u03c3","n"],"mn":"2"},"msup":{"mi":"\u03c3","mn":"2"}},"mo":"."}}},"br":{}},{"@attributes":{"id":"p-0086","num":"0085"},"maths":{"@attributes":{"id":"MATH-US-00010","num":"00010"},"math":{"@attributes":{"overflow":"scroll"},"mfrac":{"msubsup":{"mi":["\u03c3","n"],"mn":"2"},"msup":{"mi":"\u03c3","mn":"2"}}}},"br":{},"b":"694"},"The quantization weight matrix determination unit  quantizes",{"@attributes":{"id":"p-0088","num":"0087"},"maths":{"@attributes":{"id":"MATH-US-00011","num":"00011"},"math":{"@attributes":{"overflow":"scroll"},"mfrac":{"msubsup":{"mi":["\u03c3","n"],"mn":"2"},"msup":{"mi":"\u03c3","mn":"2"}}}},"br":{},"sub":["n","z"],"sup":["2 ","2 "],"b":["680","660","692","670"]},"For example, if quantization weight matrices stored in the quantization weight matrix storage unit  are classified into five different types according to",{"@attributes":{"id":"p-0090","num":"0089"},"maths":{"@attributes":{"id":"MATH-US-00012","num":"00012"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mfrac":{"msubsup":{"mi":["\u03c3","n"],"mn":"2"},"msup":{"mi":"\u03c3","mn":"2"}},"mo":","}}},"br":{}},{"@attributes":{"id":"p-0091","num":"0090"},"maths":{"@attributes":{"id":"MATH-US-00013","num":"00013"},"math":{"@attributes":{"overflow":"scroll"},"mfrac":{"msubsup":{"mi":["\u03c3","n"],"mn":"2"},"msup":{"mi":"\u03c3","mn":"2"}}}},"br":{}},"In an image with a lot of noise, the",{"@attributes":{"id":"p-0093","num":"0092"},"maths":{"@attributes":{"id":"MATH-US-00014","num":"00014"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mfrac":{"msubsup":{"mi":["\u03c3","n"],"mn":"2"},"msup":{"mi":"\u03c3","mn":"2"}},"mo":","}}},"br":{}},{"@attributes":{"id":"p-0094","num":"0093"},"maths":{"@attributes":{"id":"MATH-US-00015","num":"00015"},"math":{"@attributes":{"overflow":"scroll"},"mfrac":{"msubsup":{"mi":["\u03c3","n"],"mn":"2"},"msup":{"mi":"\u03c3","mn":"2"}}}},"br":{},"sub":"cutoff "},{"@attributes":{"id":"p-0095","num":"0094"},"maths":{"@attributes":{"id":"MATH-US-00016","num":"00016"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mfrac":{"msubsup":{"mi":["\u03c3","n"],"mn":"2"},"msup":{"mi":"\u03c3","mn":"2"}},"mo":"=","mrow":{"mi":"min","mo":["(",")"],"mrow":{"msub":{"mi":["T","cutoff"]},"mo":",","mfrac":{"msubsup":{"mi":["\u03c3","n"],"mn":"2"},"msup":{"mi":"\u03c3","mn":"2"}}}}}},{"mrow":{"mo":["(",")"],"mn":"11"}}]}}}}},"In general, Thas a value between 1 and 2.","The quantization weight matrix storage unit  transmits a quantization weight matrix corresponding to the index information received from the quantization weight matrix determination unit  to the quantization unit  and the inverse quantization unit .","The quantization unit  quantizes the predetermined macroblock using the quantization weight matrix received from the quantization weight matrix storage unit .","The inverse quantization unit  inversely quantizes the predetermined macroblock using the received quantization weight value.","The VLC unit  carries out VLC on input image data quantized by the quantization unit  and inserts the index information of the quantization weight matrix received from the quantization weight matrix determination unit  into a macroblock header.","In the present embodiment, the index information of the corresponding quantization weight matrix is inserted into the macroblock header and the macroblock header is transmitted. If there are ten quantization weight matrices stored in the quantization weight matrix storage unit , then 4-bit data is required for each macroblock.","Adjacent macroblocks are supposed to have similar image characteristics and there is supposedly a correlation among their index values. Therefore, a difference between an index value of one macroblock and an index value of an adjacent macroblock may be used as index information. The amount of index information to be transmitted can be considerably reduced in cases where a single quantization weight matrix is applied to an entire sequence.","In the present embodiment, a plurality of quantization weight matrices stored in the quantization weight matrix storage unit  should also be stored in a decoding unit. It may also be possible to use a plurality of quantization weight matrices transmitted to the decoding unit on a picture-by-picture basis using a picture extension header or transmitted to the decoding unit on a sequence-by-sequence basis using a sequence extension header.","As described above, it is possible to remove noise from an input image and enhance the efficiency of encoding the input image by adaptively applying a quantization matrix to each macroblock in consideration of a level of noise contained in the input image.","It is also possible for a user to arbitrarily determine quantization weight matrices. In the present embodiment, noise removal has been described as being performed on a Y component of an input image block in a DCT block. However, the noise removal can also be applied to a U or V component of the input image block, in which case additional quantization weight matrices are required exclusively for the U and V components of the input image block.",{"@attributes":{"id":"p-0106","num":"0105"},"figref":"FIG. 7"},"More specifically, among various characteristics of an input image, the edge characteristics of each macroblock of the input image are taken into consideration in the present embodiment.","Referring to , an apparatus for encoding moving pictures according to another preferred embodiment of the present invention includes a DCT unit , a quantization unit , a VLC unit , an inverse quantization unit , an inverse DCT unit , a frame memory unit , and a motion estimation and compensation unit , which correspond to the DCT unit , the quantization unit , the VLC unit , the inverse quantization unit , the inverse DCT unit , the frame memory , and the motion estimation and compensation unit , respectively, of the encoding unit  of . In addition, the apparatus further includes a quantization matrix determination unit  and a quantization matrix storage unit . Since the DCT unit , the inverse DCT unit , the frame memory unit , the motion estimation and compensation unit , and the VLC unit  serve the same functions as their respective counterparts of , their description will not be repeated.","The quantization matrix determination unit  selects an optimal quantization matrix for each macroblock in consideration of the characteristics of an input image and then transmits index information of the selected quantization matrix to the quantization matrix storage unit  and the VLC unit .","The quantization matrix determination unit  takes the edge characteristics of each macroblock into consideration as a benchmark for selecting one out of a predetermined number of quantization matrices.","Hereinafter, a method of selecting a quantization matrix in consideration of the edge characteristics of a macro block will be described in detail.","In a case where a predetermined macroblock of an input image is an intra block, the size and direction of an edge in each pixel of the predetermined macroblock are computed using such an edge detector as a sobel operator. The sobel operation can be represented by Equation (12).",{"@attributes":{"id":"p-0113","num":"0112"},"maths":{"@attributes":{"id":"MATH-US-00017","num":"00017"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mtable":{"mtr":[{"mtd":{"mrow":{"mrow":{"msub":{"mi":"H","mn":"1"},"mo":"=","mrow":{"mo":["[","]"],"mtable":{"mtr":[{"mtd":[{"mrow":{"mo":"-","mn":"1"}},{"mn":"0"},{"mn":"1"}]},{"mtd":[{"mrow":{"mo":"-","mn":"2"}},{"mn":"0"},{"mn":"2"}]},{"mtd":[{"mrow":{"mo":"-","mn":"1"}},{"mn":"0"},{"mn":"1"}]}]}}},"mo":","}}},{"mtd":{"mrow":{"msub":{"mi":"H","mn":"2"},"mo":"=","mrow":{"mo":["[","]"],"mtable":{"mtr":[{"mtd":[{"mrow":{"mo":"-","mn":"1"}},{"mrow":{"mo":"-","mn":"2"}},{"mrow":{"mo":"-","mn":"1"}}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"mn":"2"}]},{"mtd":[{"mn":"1"},{"mn":"2"},{"mn":"1"}]}]}}}}}]}},{"mrow":{"mo":["(",")"],"mn":"12"}}]}}}}},"The quantization matrix determination unit  calculates the magnitude of a vertical edge and the magnitude of a horizontal edge using Equation (12) above and calculates the intensity and direction of an edge of the predetermined macroblock using the magnitude of the vertical and horizontal edges. Thereafter, the quantization matrix determination unit  selects one from among a predetermined number of quantization matrices in consideration of the intensity and direction of the edge of the predetermined macroblock and encoding efficiency. In other words, in a case where the predetermined macro block includes a horizontal or vertical edge, the quantization matrix determination unit  selects a quantization matrix that can enable quantization in full consideration of the horizontal or vertical edge of the predetermined macro block.","In a case where the predetermined macroblock is an inter block, the intensity and direction of an edge included in the predetermined macroblock can also be obtained using such an edge detector as a sobel operator.","In the present embodiment, a sobel detector is used for computing the intensity and direction of an edge included in the predetermined macroblock. However, a spatial filter, such as a differential filter or a Robert's filter, can also be used for computing the intensity and direction of the edge included in the predetermined macroblock.","In addition, in the present embodiment, a quantization matrix is selected in consideration of the edge characteristics of the predetermined macroblock. However, other characteristics of the predetermined macroblock that can affect encoding efficiency or the quality of an output image can be taken into consideration in adaptively selecting an optimal quantization matrix for the predetermined macroblock.","The quantization matrix storage unit  selects a quantization matrix based on the index information received from the quantization matrix determination unit  and transmits the selected quantization matrix to the quantization unit  and the inverse quantization unit .","The quantization unit  carries out quantization using the quantization matrix received from the quantization matrix storage unit .","The inverse quantization unit  carries out inverse quantization using the quantization matrix received from the quantization matrix storage unit .","The VLC unit  carries out VLC on quantized input image data, received from the quantization unit , and index information of a quantization matrix corresponding to the predetermined macroblock, received from the quantization weight matrix determination unit . The index information is inserted into a macroblock header.","In the present embodiment, index information of a quantization weight matrix corresponding to a predetermined macroblock is inserted into a header of the predetermined macroblock and then transmitted. A difference between an index value of one macroblock and an index value of an adjacent macroblock may be used as index information.","In the present embodiment, a plurality of quantization weight matrices stored in the quantization matrix storage unit  are also stored in a decoding unit. However, it may also be possible to use a plurality of quantization weight matrices transmitted to the decoding unit on a picture-by-picture basis using a picture extension header or transmitted to the decoding unit on a sequence-by-sequence basis using a sequence extension header.",{"@attributes":{"id":"p-0124","num":"0123"},"figref":["FIG. 8","FIG. 8","FIG. 1","FIG. 1"],"b":["810","820","830","840","850","142","144","146","148","150","140","860","830","840","850"]},"The variable length decoding unit  carries out variable length decoding on an input stream, extracts index information of a quantization weight matrix corresponding to a predetermined macroblock of the input stream from a header of the predetermined macroblock, and outputs the extracted index information to the quantization weight matrix storage unit .","The quantization weight matrix storage unit  outputs a quantization weight matrix corresponding to the index information received from the variable length decoding unit  to the inverse quantization unit . The quantization weight matrix storage unit  stores a plurality of quantization weight matrices, which are classified according to the characteristics of an input image processed by an encoding unit, for example, a noise variance value as a ratio between an input image variance value and the edge characteristics of the input image.","The plurality of quantization weight matrices stored in the quantization weight matrix storage unit  can be transmitted on a picture-by-picture basis using a picture extension header or transmitted to the decoding unit on a sequence-by-sequence basis using a sequence extension header. The plurality of quantization weight matrices are transmitted from the variable length decoding unit  to the quantization weight matrix storage unit , as marked by a dotted line in .","The present invention can be applied to different types of methods and apparatuses for encoding and\/or decoding moving pictures, such as MPEG-1, MPEG-2, or MPEG-4. In addition, the present invention can be realized as computer-readable codes written on a computer-readable recording medium. The computer-readable recording medium includes any type of recording device on which data can be written in a computer-readable manner. For example, the computer-readable recording medium includes ROM, RAM, CD-ROM, a magnetic tape, a hard disk, a floppy disk, flash memory, an optical data storage, and a carrier wave (such as data transmission through the Internet). In addition, the computer-readable recording medium can be distributed over a plurality of computer systems which are connected to one another in a network sort of way so that computer-readable codes are stored on the computer-readable recording medium in a decentralized manner.","As described above, the methods of encoding and\/or decoding moving pictures according to the embodiments of present invention, a quantization matrix is adaptively applied to each macroblock of an input image in consideration of the characteristics of the input image. Thus, it is possible to enhance the efficiency and performance of encoding the input image.","Although a few embodiments of the present invention have been shown and described, it would be appreciated by those skilled in the art that changes may be made in this embodiment without departing from the principles and spirit of the invention, the scope of which is defined in the claims and their equivalents."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["These and\/or other aspects and advantages of the invention will become apparent and appreciated from the following description of the embodiments taken in the attached drawings in which:",{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIGS. 4A through 4C"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 8"}]},"DETDESC":[{},{}]}
