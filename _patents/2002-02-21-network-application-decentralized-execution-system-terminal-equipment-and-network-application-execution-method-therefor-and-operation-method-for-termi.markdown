---
title: Network application decentralized execution system, terminal equipment and network application execution method therefor, and operation method for terminal equipment
abstract: A network application decentralized execution system which allows a network application developed for a centralized switched network to be applied to a decentralized switched network is disclosed. The network application decentralized execution system includes a network application server, a first terminal equipment and a second terminal equipment. Each of the first and second terminal equipments includes a detection section for detecting a variation of a connection state of the terminal equipment, a control section for controlling the connection state, and a plug-in section for plugging in an application execution script downloaded from a network application server.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07100166&OS=07100166&RS=07100166
owner: NEC Corporation
number: 07100166
owner_city: Tokyo
owner_country: JP
publication_date: 20020221
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DESCRIPTION OF THE PREFERRED EMBODIMENTS"],"p":["1. Field of the Invention","The present invention relates to a network application decentralized execution system wherein a network application developed for a centralized switched network can be applied to a decentralized switched network.","2. Description of the Related Art","A system which provides an application programming interface (API) which abstracts and utilizes network controlling functions of a switching system is called open API of a network and serves as a platform for providing network service applications which make use of intra-network communication resources such as a switched network, a media storage and synthesis trunk and a multi-point conference control trunk.","Recently, such corporate bodies as the JAIN and the Parlay which standardize a set of such APIs as mentioned above have been organized, and a network application developed based on an API standardized by any of such corporate bodies can be utilized commonly between various switching systems of different implementation forms for which the API is ready. Thus, such network applications are generally useful for reduction of the period of development of a network application.","An interface between execution environments of an application described in an existing network API such as the JAIN or the Parlay and a switching system is conventionally implemented by connection between a server which executes the application and a control apparatus in an exchange. This makes it possible to perform detection of an event and a controlling operation from the application in response to a connection call managed in the control apparatus in the exchange.","The API set includes seven APIs given below in accordance with individual functions:","1. Event collection type API","2. State collection type API","3. Connection destination control type API","4. User interaction type API","5. Database accessing type API","6. Process calling type API","7. Process ending type API","A network application can be constructed by a suitable combination of the APIs given above.","Meanwhile, a voice over Internet protocol (VoIP) network which is a switching service network in which the Internet protocol is used has been constructed recently, and the architecture for switched network control has begun to vary fundamentally.","In the VoIP network, each terminal equipment has a call state holding function and a mutual connection function incorporated therein so that it can establish a connection directly to another terminal equipment of the other party without intervention of an exchange using connection destination address information acquired from a directory server.","Such decentralized connection control as just described can significantly reduce the load to a server necessary for a switching network service.","However, a function module corresponding to the control apparatus of an exchange which is a destination of connection of a network application described above is decentralized and eliminated. In particular, communication in decentralized connection control is performed without intervention of an exchange, and therefore, application execution environments (refer to description hereinafter given with reference to ) cannot control communication. Therefore, there is a problem that a network application developed for a centralized switched network cannot be applied to a decentralized switched network.","It is an object of the present invention to provide a network application decentralized execution system which allows a network application developed for a centralized switched network to be applied to a decentralized switched network.","In order to attain the object described above, according to an aspect of the present invention, there is provided a network application decentralized execution system which allows application of a network application developed for a concentrated switched network to a decentralized switched network, comprising a network application server, and a terminal equipment including connection state variation detection means for detecting a variation of a connection state of the terminal equipment, connection state control means for controlling the connection state of the terminal equipment, and plug-in means for plugging in an application execution script downloaded from the network application server.","Preferably, the network application decentralized execution system further comprises a database, and wherein the plug-in means records time for which the application execution script is executed into the database.","According to another aspect of the present invention, there is provided a network application decentralized execution system which allows application of a network application developed for a concentrated switched network to a decentralized switched network, comprising a network application server, and a terminal equipment, the network application server including an application storage section for storing an application execution script for a concentrated switched network, a subscriber information storage section for storing corresponding relationships between subscribers and network applications used by the subscribers, a subscriber\/application information management section for managing the application storage section and the subscriber information storage section, and a data transmission\/reception section for exchanging data with the terminal equipment, the terminal equipment including an application storage section for storing the application execution script downloaded from the network application server, an application control section for executing a network application and managing the application storage section, a state variation detection section for supervising an event designated by the network application and issuing, if the event occurs, a notification of the occurrence of the event to the application control section, a call state storage section for storing a call state of the terminal equipment and another terminal equipment of the other party of the communication, a connection state control section for managing the call state storage section, and a data transmission\/reception section for exchanging data with the terminal equipment of the other party and the network application server.","According to a further aspect of the present invention, there is provided a network application decentralized execution system which allows application of a network application developed for a concentrated switched network to a decentralized switched network, comprising a network application server, a terminal equipment, and a database connected to the terminal equipment, the network application server including an application storage section for storing an application execution script for a concentrated switched network, a subscriber information storage section for storing corresponding relationships between subscribers and network applications used by the subscribers, a subscriber\/application information management section for managing the application storage section and the subscriber information storage section, and a data transmission\/reception section for exchanging data with the terminal equipment, the terminal equipment including an application storage section for storing the application execution script downloaded from the network application server, an application control section for executing a network application and managing the application storage section, a state variation detection section for supervising an event designated by the network application and issuing, if the event occurs, a notification of the occurrence of the event to the application control section, a call state storage section for storing a call state of the terminal equipment and another terminal equipment of the other party of the communication, a connection state control section for managing the call state storage section, and a data transmission\/reception section for exchanging data with the terminal equipment of the other party and the network application server, the database being connected to the data transmission\/reception section of the terminal equipment.","In the network application decentralized execution systems according to the second and third aspects of the present invention, the application control section may include and use an application programming interface for a concentrated switched network to control the call state storage section and the connection state control section.","The application control section may have, as a function of the application programming interface,","(1) a function of detecting an event and issuing a notification of the occurrence of the event to the application execution script;","(2) a function of causing the application execution script to place the terminal equipment into a connection state and a communication state;","(3) a function of causing the application execution script to control the connection state of the terminal equipment;","(4) a function of causing the application execution script to interact with a user through the terminal equipment;","(5) a function of causing the application execution script to access the network application server;","(6) a function of causing the application execution script to call a process of a concentrated server; or","(7) a function of ending an execution state of the application execution script.","In the network application decentralized execution system according to the third aspect of the present invention, the application control section may write a period of time within which the application execution script is executed into the database.","According to a still further aspect of the present invention, there is provided a terminal equipment which cooperates with a network application server to form a network application decentralized execution system which allows application of a network application developed for a concentrated switched network to a decentralized switched network, comprising connection state variation detection means for detecting a variation of a connection state of the terminal equipment, connection state control means for controlling the connection state of the terminal equipment, and plug-in means for plugging in an application execution script downloaded from the network application server.","According to a yet further aspect of the present invention, there is provided a terminal equipment which cooperates with a network application server to form a network application decentralized execution system which allows application of a network application developed for a concentrated switched network to a decentralized switched network, comprising an application storage section for storing the application execution script downloaded from the network application server, an application control section for executing a network application and managing the application storage section, a state variation detection section for supervising an event designated by the network application and issuing, if the event occurs, a notification of the occurrence of the event to the application control section, a call state storage section for storing a call state of the terminal equipment and another terminal equipment of the other party of the communication, a connection state control section for managing the call state storage section, and a data transmission\/reception section for exchanging data with the terminal equipment of the other party and the network application server.","According to a yet further aspect of the present invention, there is provided a terminal equipment which cooperates with a network application server and a database to form a network application decentralized execution system which allows application of a network application developed for a concentrated switched network to a decentralized switched network, comprising an application storage section for storing the application execution script downloaded from the network application server, an application control section for executing a network application and managing the application storage section, a state variation detection section for supervising an event designated by the network application and issuing, if the event occurs, a notification of the occurrence of the event to the application control section, a call state storage section for storing a call state of the terminal equipment and another terminal equipment of the other party of the communication, a connection state control section for managing the call state storage section, and a data transmission\/reception section connected to the database for exchanging data with the terminal equipment of the other party and the network application server.","According to a yet further aspect of the present invention, there is provided an execution method of a network application for a network application decentralized execution system which includes a network application server and a terminal equipment and allows application of a network application developed for a concentrated switched network to a decentralized switched network, comprising a first step of detecting a variation of a connection state between the network application server and the terminal equipment, a second step of controlling the connection state in response to the variation detected by the first step, and a third step of for plugging in an application execution script downloaded from the network application server.","Preferably, the execution method further comprises a step of recording time for which the application execution script is executed.","According to a yet further aspect of the present invention, there is provided an execution method of a network application for a network application decentralized execution system which includes a network application server and a terminal equipment and allows application of a network application developed for a concentrated switched network to a decentralized switched network, comprising a first step of downloading a network application from the network application server into the terminal equipment, a second step of setting a first trigger for starting up the received network application to the terminal equipment, a third step of starting up the network application when the first trigger is fired, and a fourth step of ending the execution of the network application when a particular operation is performed.","Preferably, the execution method further comprises a step of setting a second trigger for starting up a next operation when the first trigger is fired.","Preferably, the execution method further comprises a step of setting an N+1th trigger for starting up a next operation when an Nth trigger is fired, N being a positive integer greater than 1.","The first step may include the steps of using, when power supply to the terminal equipment is switched on, the switching on of the power supply as a trigger to start up a network application for allowing selection from among services which can be used by the terminal equipment, transmitting subscriber identification information from the terminal equipment to the network application server, preparing a list of network applications which can be used by a user of the terminal equipment based on the subscriber identification information by the network application server and transmitting the list from the network application server to the terminal equipment, selecting one of the network applications from within the list by the user of the terminal equipment, and downloading the selected network application from the network application server to the terminal equipment.","Preferably, the execution method further comprises a step of storing the network application downloaded from the network application server into the terminal equipment.","Preferably, the execution method further comprises a step of issuing, when the first trigger is fired, before the network application is started up, an inquiry from the terminal equipment to a user of the terminal equipment regarding whether or not the network application may be started up.","Preferably, execution method further comprises a step of issuing, when the first trigger is fired, before the network application is started up, an inquiry from the terminal equipment to a user of the terminal equipment regarding whether or not the network application may be started up, and the second trigger or the second to N+1th triggers are set only when the user consents to starting up of the network application.","Preferably, the execution method further comprises a step of recording time for which the network application is executed.","According to a yet further aspect of the present invention, there is provided an operation method for a terminal equipment which cooperates with a network application server to form a network application decentralized execution system which allows application of a network application developed for a concentrated switched network to a decentralized switched network, comprising a first step of detecting a variation of a connection state between the terminal equipment and the network application server, a second step of controlling the connection state in response to the variation detected by the first step, and a third step of plugging in an application execution script downloaded from the network application server.","Preferably, the operation method further comprises a step of recording time for which the application execution script is executed.","According to a yet further aspect of the present invention, there is provided an operation method for a terminal equipment which cooperates with a network application server to form a network application decentralized execution system which allows application of a network application developed for a concentrated switched network to a decentralized switched network, comprising a first step of downloading a network application from the network application server into the terminal equipment, a second step of setting a first trigger for starting up the received network application to the terminal equipment, a third step of starting up the network application when the first trigger is fired, and a fourth step of ending the execution of the network application when a desired operation is performed.","Preferably, the operation method further comprises a step of setting a second trigger for starting up a next operation when the first trigger is fired.","Preferably, the operation method further comprises a step of setting an N+1th trigger for starting up a next operation when an Nth trigger is fired, N being a positive integer greater than 1.","The first step may include the steps executed by the terminal equipment of using, when power supply to the terminal equipment is switched on, the switching on of the power supply as a trigger to start up a network application for allowing selection from among services which can be used by the terminal equipment, transmitting subscriber identification information to the network application server, receiving a list of network applications which can be used by a user of the terminal equipment prepared based on the subscriber identification information by and transmitted from the network application server, and downloading one of the network applications of the list selected by a user of the terminal equipment from the network application server.","Preferably, the operation method further comprises a step of storing the network application downloaded from the network application server into the terminal equipment.","Preferably, the operation method comprises a step of issuing, when the first trigger is fired, before the network application is started up, an inquiry to a user of the terminal equipment regarding whether or not the network application may be started up.","Preferably, the operation method further comprises a step of issuing, when the first trigger is fired, before the network application is started up, an inquiry from the terminal equipment to a user of the terminal equipment regarding whether or not the network application may be started up, and the second trigger or the second to N+1th triggers are set only when the user consents to starting up of the network application.","Preferably, the operation method further comprises a step of recording time for which the network application is executed.","As described above, according to the present invention, a network application decentralized execution system which includes a network application server and a terminal equipment and allows application of a network application developed for a concentrated switched network to a decentralized switched network is configured such that the terminal equipment has extended functions.","More particularly, the terminal equipment has a function for detecting a variation of a connection state of the terminal equipment, another function for controlling the connection state of the terminal equipment, and a further plug-in function for plugging in an application execution script.","The application execution script is selected based on a subscriber contract or a connection destination number inputted upon origination of a call and is downloaded from a network application server on a network.","The APIs of the API set described hereinabove correspond to the functions of the terminal equipment as described below.","The event collection type API corresponds to the function of the application execution script of detecting an event and issuing a notification of the occurrence of the event to the application execution script.","The state collection type API corresponds to the function of the application execution script of acquiring a connection state, a terminal state and a communication state.","The connection destination control type API corresponds to the function of the application execution script of controlling the connection state of the terminal equipment.","The user interaction type API corresponds to the function of the application execution script of interacting with a user through the terminal equipment.","The database accessing type API corresponds to the function of the application execution script of accessing a database server.","The process calling type API corresponds to the function of the application execution script of calling a process of a concentrated server.","The process ending type API corresponds to the function of the application execution script of ending an execution state.","As described above, according to the present invention, a network application developed for a centralized switched network system can be executed on a decentralized switched network system, and consequently, effective utilization of the service application can be promoted while merits of a decentralized system are maintained.","The above and other objects, features and advantages of the present invention will become apparent from the following description and the appended claims, taken in conjunction with the accompanying drawings in which like parts or elements are denoted by like reference symbols.","First, in order to facilitate understanding of the present invention, general configurations of a network application decentralized execution system according to the present invention and a network application execution system disclosed, for example, in Japanese Patent Laid-Open No. 239094\/1999 as a representative one of conventional network application execution systems are described for comparison.","Referring first to , there is shown a configuration of the conventional network application execution system mentioned above. The network application execution system shown includes first and second terminal equipments  and , mobile exchanges  and  corresponding to the first and second terminal equipments  and , respectively, a public network  for interconnecting the mobile exchanges  and , and an application execution environment  connected to the mobile exchanges  and  for controlling the mobile exchanges  and  to provide added-value services to the terminal equipments  and .","Operation when, for example, the first terminal equipment  uses a certain application (for example, a number conversion application hereinafter described in connection with a second embodiment of the present invention) to communicate with the second terminal equipment  is such as follows.","If the mobile exchange  receives a call origination request from the first terminal equipment , then it notifies the application execution environment  of the call origination request. The application execution environment  performs number conversion of a connection destination and issues an instruction to the mobile exchange  to transfer the call origination request to the mobile exchange . As a result, the first terminal equipment  can start communication with the second terminal equipment  through the mobile exchange , public network  and mobile exchange .","In the conventional network application execution system, the API set is incorporated only in the mobile exchanges  and .","Accordingly, execution of the application between the first terminal equipment  and the second terminal equipment  must be performed through the mobile exchanges  and .",{"@attributes":{"id":"p-0086","num":"0085"},"figref":["FIG. 8","FIG. 8"],"b":["301","302","320","301","302"]},"Different from the conventional network application execution system, the network application decentralized execution system according to the present invention does not include a mobile exchange in which the APIs described above are defined, but the APIs described above are defined in each of the terminal equipments  and  in advance. In other words, each of the terminal equipments  and  in the network application decentralized execution system according to the present invention has, in addition to functions as a terminal equipment, functions as the mobile exchanges  and  in the conventional network application execution system.","Therefore, for example, if an application is downloaded from an application server into the terminal equipments  and , then each of the terminal equipments  and  can execute the application directly between the terminal equipments  and  without intervention of a mobile exchange as is used in the conventional network application execution system.","Therefore, when compared with the conventional network application execution system, the network application decentralized execution system of the present invention can eliminate a mobile exchange itself and can therefore achieve simplification in system structure.","Referring now to , there is shown a network application decentralized execution system to which the present invention is applied. The network application decentralized execution system of the present embodiment uses the event collection type API, state collection type API, connection destination control type API, user interaction type API, database accessing type API, process calling type API and process ending type API.","It is to be noted that, in the following description, the network application decentralized execution system of the present embodiment uses an automatic call back service application as an example of a network application. The automatic call back service signifies a service which is started up when a party of a call destination is busy and re-originates a telephone call automatically using it as a trigger that the telephone conversion of the party of the call destination comes to an end.","The network application decentralized execution system shown in  generally denoted by  and includes a network application server , a first terminal equipment  and a second terminal equipment .","The network application server  includes an application storage section , a subscriber information storage section , a subscriber\/application information management section  and a message transmission\/reception section .","The application storage section  stores a service application (application execution script). The application execution script stored in the application storage section  has originally been developed for a concentrated switched network.","The subscriber information storage section  stores corresponding relationships between subscribers and applications used by the individual subscribers.","The subscriber\/application information management section  manages the application storage section  and the subscriber information storage section .","For example, the subscriber\/application information management section  performs licensing management in order to allow a network application for carrying out a service requested by a subscriber to be downloaded into a terminal equipment of the subscriber in response to the request from the subscriber.","The message transmission\/reception section  performs exchange of data such as a message with the first and second terminal equipments  and .","The first terminal equipment  includes an inputting apparatus , an outputting apparatus , an application control section , a state variation detection section , a connection state control section , a message transmission\/reception section , an application storage section  and a call state storage section .","The inputting apparatus  may be formed, for example, as keys for inputting numerals and other symbols. However, for example, if the first terminal equipment  includes a liquid crystal display screen as the outputting apparatus , then the inputting apparatus  may be formed as a touch panel placed on the liquid crystal display screen. Alternatively, the inputting apparatus  may have, for example, a speech recognition function of a speaker so that it allows direct inputting of speech of a speaker.","The outputting apparatus  may include, for example, a liquid crystal display screen for displaying characters and symbols. The outputting apparatus  may further include a speaker for outputting a voice message.","The application control section  performs execution of a network application and management of the application storage section .","The state variation detection section  supervises an event designated by the network application and notifies the application control section  of occurrence of the event. The event occurs, for example, when connection of a call is completed, when the connection comes to an end, or when the position of a terminal equipment changes.","The connection state control section  performs management of the call state storage section , a transition process of a call state, a message preparation process involved in the transition process of a call state and other necessary processes. Further, if a connection state varies, then the connection state control section  notifies the state variation detection section  of the variation.","The message transmission\/reception section  performs exchange of data such as a message with another terminal equipment and the network application server .","The application storage section  stores an application execution script downloaded from the network application server .","The call state storage section  stores call states of the terminal equipment itself and the opposite terminal equipment.","The application control section  controls not only the application storage section  but also the inputting apparatus , outputting apparatus , state variation detection section , connection state control section  and message transmission\/reception section .","The application control section  includes an API set including the following APIs:","1. Event collection type API","2. State collection type API","3. Connection destination control type API","4. User interaction type API","5. Database accessing type API","6. Process calling type API","7. Process ending type API","The application control section  uses the API set to control the inputting apparatus , outputting apparatus , state variation detection section , connection state control section  and message transmission\/reception section . The API set was originally developed so as to be used for development of network applications for a concentrated exchange. According to the present embodiment, however, the API set can be applied also to a decentralized switching network wherein functioning modules are decentralized (in the present embodiment, management of a call state is performed individually by the individual terminal equipments  and ).","The second terminal equipment  includes an inputting apparatus , an outputting apparatus , an application control section , a state variation detection section , a connection state control section , a message transmission\/reception section , an application storage section  and a call state storage section .","The inputting apparatus , outputting apparatus , application control section , state variation detection section , connection state control section , message transmission\/reception section , application storage section  and call state storage section  have same configurations and functions as those of the inputting apparatus , outputting apparatus , application control section , state variation detection section , connection state control section , message transmission\/reception section , application storage section  and call state storage section  of the first terminal equipment , respectively.","It is assumed that, in the present embodiment, the first terminal equipment  and the second terminal equipment  use an expanded protocol of the SIP (Session Initiation Protocol) as a signaling protocol for generation, modification or interruption of a call between terminals. The specifications of the SIP are recited in the RFC2543 used by the IETF (Internet Engineering Task Force). In the present embodiment, however, for simplified description, some message necessary for protocol operation is sometimes omitted.",{"@attributes":{"id":"p-0121","num":"0120"},"figref":["FIG. 2","FIG. 1","FIG. 2"],"b":["10","10"]},"If a user of the first terminal equipment  operates the inputting apparatus  to switch on the power supply to the first terminal equipment  (step S), then the application control section  of the first terminal equipment  uses it as a trigger to start up an application for selection of available services.","The application uses the process calling type API to acquire a list of services which can be used by each user who uses a terminal equipment from the network application server  in the following manner.","First, when the process calling type API is called, the application control section  of the first terminal equipment  transmits subscriber identification information of the user of the first terminal equipment  to the network application server  (step S).","The network application server  receives the subscriber identification information, and prepares a list of services which can be used by the user of the first terminal equipment  based on the subscriber identification information and transmits the list to the first terminal equipment  (step S).","The first terminal equipment  displays the received service list, for example, on the display screen of the outputting apparatus  (step S).","The user of the first terminal equipment  will select a service to be used from among the services displayed on the display screen of the outputting apparatus  and designate the service through the inputting apparatus  (step S).","In response to the designation of the service, the application control section  issues a request for downloading of a network application to be used for execution of the service selected by the user to the network application server  (step S).","Then, the first terminal equipment  downloads the pertaining network application from the network application server  (step S).","Here, the requesting for downloading of a network application to the network application server  (step S) and the downloading of the network application from the network application server  (step S) are realized by the application execution script using the database accessing type API.","The network application downloaded from the network application server  is sent to the application control section  through the message transmission\/reception section .","The application control section  sets a first trigger for stating up the received network application to the state variation detection section  (step S).","In the present embodiment, the first trigger for starting up the network application is set to \u201cthat the first terminal equipment  detects that the other party side terminal equipment is busy\u201d, that is, \u201cthat the first terminal equipment  receives a BUSY message from the other party side terminal equipment\u201d.","The setting of the first trigger is performed to the state variation detection section  by the application control section  using the event collection type API.","Further, since detection of an event is performed by the connection state control section , the state variation detection section  issues an instruction to the connection state control section  to notify the state variation detection section  of occurrence of the event when the event occurs.","Here, it is assumed that the user of the first terminal equipment  originates a telephone call to the second terminal equipment  (step S).","First, if the user inputs a telephone number of a terminal equipment of the other party through the inputting apparatus , then the application control section  issues a connection request to the connection state control section  (step S).","In response to the connection request, the connection state control section  transmits an INVITE message to the second terminal equipment  through the message transmission\/reception section  (step S).","Here, it is assumed that the second terminal equipment  is in a state connected to a third terminal equipment  when the first terminal equipment  issues a telephone call to the second terminal equipment  (steps A, A and A).","Therefore, the second terminal equipment  returns a BUSY message in response to the INVITE message originated from the first terminal equipment  (step S).","When the first terminal equipment  receives the BUSY message from the second terminal equipment , the connection state control section  notifies the state variation detection section  in accordance with the instruction from the state variation detection section  to the connection state control section  set in step S that the designated event has occurred (step S).","In response to the notification, the state variation detection section  fires the first trigger set in step S. As a result, the automatic call back service application is started up.","At this time, a notification of the fact that the first trigger has been fired is sent from the state variation detection section  to the application control section  using the event collection type API (step S).","Thereafter, the application control section  issues an inquiry whether or not the automatic call back service may be executed to the user of the first terminal equipment  through the outputting apparatus  before it starts the automatic call back service (step S).","If the user of the first terminal equipment  consents with the inquiry (step S), then the application control section  of the first terminal equipment  sets a second trigger necessary to start up a next operation (step S).","Here, the inquiry of whether or not the automatic call back service may be executed to the user of the first terminal equipment  (step S) and the reception of the consent of the user of the first terminal equipment  to the inquiry (step S) are performed by the application control section  using the user interaction type API.","In the present embodiment, the second trigger is set to \u201cthat the second terminal equipment  is placed into a disconnected state\u201d. The setting of the second trigger is performed using the state collection type API.","In order to detect a state transition of the second terminal equipment  which is located remotely, the first terminal equipment  transmits to the second terminal equipment  a message (SUBSCRIBE) which designates that, when the second terminal equipment  is placed into a disconnected state, the second terminal equipment  should issue a notification of this to the first terminal equipment  (step S).","If the second terminal equipment  receives a BYE message from the third terminal equipment  (step S) and changes its state into a disconnected state, then it issues a message (NOTIFY) representing that it has been placed into a disconnected state to the state variation detection section  of the first terminal equipment  in accordance with the message (SUBSCRIBE) designated in step S (step S).","When the first terminal equipment  receives the message from the second terminal equipment , the second trigger set in step S is fired (step S), and the automatic call back service application executes a next instruction.","A notification that the second trigger has been fired is sent from the state variation detection section  to the application control section  using the state collection type API.","The application control section  issues a notification that the automatic call back process is proceeding to the user of the first terminal equipment  through the outputting apparatus  in accordance with the automatic call back service application.","Here, the notification that the automatic call back process is proceeding is carried out using the user interaction type API.","Then, the automatic call back service application issues an instruction to the connection state control section  of the first terminal equipment  to request the first terminal equipment  to connect itself to the second terminal equipment  (step S). This request is carried out using the connection destination control type API.","In response to the request, the connection state control section  signals an INVITE message to the second terminal equipment  through the message transmission\/reception section  (step S).","If the user of the second terminal equipment  responds to the telephone call, then the second terminal equipment  transmits an OK message to the first terminal equipment  (step S).","When the second terminal equipment  receives the OK message from the first terminal equipment , both of the first terminal equipment  and the second terminal equipment  enter a connection state (step S) so that communication between the first terminal equipment  and the second terminal equipment  is enabled.","After the communication becomes enabled, the automatic call back service application uses the processing ending type API to end the execution state of the application execution script and abandon the control right to the call in the connected state.",{"@attributes":{"id":"p-0159","num":"0158"},"figref":"FIG. 3"},"In the present embodiment, a number conversion application is used as an example of a network application. The number conversion application accesses, when a connection request to a connection destination address designated in advance is generated, a number conversion table to determine a transfer destination address from a connection source address and the connection destination address and transfers the telephone call. Use of the number conversion table makes it possible to automatically transfer, for example, only if a telephone call is originated to a rotary group number of a customer, the telephone call to an extension of the pertaining post of the customer.","It is assumed that, in the example described below, a period of time for which a telephone is connected is written into a database to grasp the connect time.","Referring to , the network application decentralized execution system  of the present embodiment is a modification to but is different from the network application decentralized execution system  of the first embodiment in that it additionally includes a database .","The database  is connected to the message transmission\/reception section  of the first terminal equipment  and stores a number conversion table prepared in advance therein. Further, the database  records a communication period of time of the first terminal equipment .",{"@attributes":{"id":"p-0164","num":"0163"},"figref":["FIG. 4","FIG. 3","FIG. 4"],"b":["20","20"]},"If a user of the first terminal equipment  issues a request to the application control section  to originate a telephone call to a certain address (for example, a rotary group number of a customer) through the inputting apparatus  (step T), then the application control section  transmits the request to the connection state control section  (step T).","Here, it is assumed that the network application server  is registered as a proxy server of the SIP (server which mediates SIP message exchange between terminals) in the first terminal equipment .","In response to the request from the application control section , the connection state control section  transmits an INVITE message to the network application server  through the message transmission\/reception section  (step T).","The network application server  discriminates the pertaining number conversion application based on a connection source address and a connection destination address of the received INVITE message and downloads the number conversion application to the first terminal equipment  (step T).","In the first terminal equipment , the application control section  starts up the downloaded application and accesses the number conversion table stored in the database  using the database accessing type API (step T) to acquire a transfer destination number from the database  (step T).","Then, the application control section  sets a trigger to the state variation detection section  using the state collection type API so that, when an event that a connection is cut occurs, a notification of it may be issued to the application control section  (step T).","Since this event is one of events which are detected by the connection state control section , the state variation detection section  sets it to the connection state control section  that, when an event of \u201ctransition to a state wherein a connection is cut\u201d occurs, the connection state control section  should notify the state variation detection section  of the occurrence of the event (step T).","Then, the application control section  transmits a request for connection to the transfer destination address acquired in step T to the connection state control section  using the connection destination control type API in accordance with the number conversion application (step T).","When the connection state control section  receives the connection request, it transmits an INVITE message to the second terminal equipment  of the transfer destination (step T).","When the second terminal equipment  receives the connection request from the first terminal equipment , it transmits an OK message back to the first terminal equipment  (step T), and both of the first terminal equipment  and the second terminal equipment  enter a connection state (step T). Consequently, communication between the first terminal equipment  and the second terminal equipment  is enabled.","If the second terminal equipment  determines to cut the connection, then it issues a BYE message to the connection state control section  of the first terminal equipment  (step T).","When the connection state control section  of the first terminal equipment  receives the cut of the connection, it transmits an OK message back to the second terminal equipment  (step T).","Consequently, since the event of the \u201ctransition to a state wherein a connection is cut\u201d designated in step T has occurred, the connection state control section  issues a notification of occurrence of the event to the state variation detection section  (step T).","The state variation detection section  fires the trigger set in step T using the state collection type API and issues a notification of this to the application control section  (step T).","The application control section  registers connect time to the transfer destination into the database  using the database accessing type API (step T).","In the second embodiment described above, the first terminal equipment  writes connect time into the database . However, it is otherwise possible to connect the message transmission\/reception section  of the second terminal equipment  to the database  so that writing of connect time into the database  is performed by the second terminal equipment  as described below as a modification to the second embodiment of the present invention.",{"@attributes":{"id":"p-0181","num":"0180"},"figref":"FIG. 5"},"Though not shown in the accompanying drawings, in the network application decentralized execution system according to the modification to the second embodiment, the database  is connected to the message transmission\/reception section  of the second terminal equipment  while it is not connected to the message transmission\/reception section  of the first terminal equipment , different from the second embodiment.","The network application decentralized execution system performs processing in steps T to T of  quite similar to that in steps T to T of  described hereinabove. Thus, overlapping description of the common processing is omitted herein to avoid redundancy.","The operation of the network application decentralized execution system of the modification to the second embodiment is different from the operation of the second embodiment described above in that, after the network application server  receives an INVITE message from the first terminal equipment  in step T, the application is pushed also to the second terminal equipment  (step U).","After the first terminal equipment  determines that the connection should be cut, the connection state control section  of the first terminal equipment  issues a BYE message to the second terminal equipment  (step U).","When the second terminal equipment  receives the cut of the connection, it transmits an OK message back to the connection state control section  of the first terminal equipment  (step U).","The application downloaded to the second terminal equipment  in step U writes connect time into the database  using transition of the connection state to a cut state as a trigger (step U).","While, in the modification to the second embodiment, the database  is connected only to the message transmission\/reception section  of the second terminal equipment  but is not connected to the message transmission\/reception section , it is otherwise possible to connect the database  to both of the message transmission\/reception section  of the second terminal equipment  and the message transmission\/reception section  of the first terminal equipment  so that both of the first terminal equipment  and the second terminal equipment  can write connect time into the database .","In the following, a network application decentralized execution system according to a second modification to the second embodiment described above is described.","In the present modification, a prepaid application is used as an example of a network application. The prepaid application allows communication for a period of time corresponding to an amount of money paid in advance by a source of connection or a destination of connection. The remaining connectable time is stored in the database.","In the second modification described below, a terminal equipment of the destination of connection accesses the database to acquire connectable time of the source of connection and notifies, before the remaining time is used up, the source of connection that the remaining time is little. If the connectable time decreases to zero, then the terminal equipment of the destination of connection cuts the connection. Further, the terminal equipment of the destination of connection writes time of the connection into the database after the connection is cut.",{"@attributes":{"id":"p-0192","num":"0191"},"figref":"FIG. 6"},"The network application decentralized execution system of the present modification has a structure same as the network application decentralized execution system of the first modification to the second embodiment described above. It is to be noted that the database  in the present embodiment has connectable time stored in advance therein for each terminal equipment and further records service time after a connection is cut.","In the following, operation of the network application decentralized execution system of the present modification is described with reference to .","It is assumed that, in the present modification, the network application server  is registered as a redirect server of the SIP (a server which issues a notification of a transfer destination to a terminal equipment of a source of connection) in the first terminal equipment .","The first terminal equipment  issues an INVITE message in order to establish a connection to the second terminal equipment . Since the network application server  is registered as a proxy server in the first terminal equipment , the INVITE message comes to the network application server  (step V).","The network application server  discriminates the pertaining prepaid application based on a connection source address and a connection destination address of the received INVITE message, and pushes the prepaid application to the application control section  of the second terminal equipment  (step V).","The application control section  sets a first trigger to the application storage section  using the state collection type API so that the state variation detection section  may issue a notification when it receives a connection request from the first terminal equipment  (step V).","Since this event that \u201ca connection request is received from the first terminal equipment \u201d is an event which is detected by the connection state control section , the state variation detection section  sets it to the connection state control section  that the connection state control section  should issue a first event notification (step V).","The network application server  transmits, after it pushes the prepaid application to the second terminal equipment  in step V, to the first terminal equipment , a message (Moved Temporarily) for notification of a connection destination address of the second terminal equipment  which is a transfer destination (step V).","Then, the first terminal equipment  transmits a connection request message (INVITE) to the second terminal equipment  (step V).","When the second terminal equipment  receives the connection request message (INVITE), the connection state control section  thereof issues a first event notification to the state variation detection section  (step V).","When the state variation detection section  receives the first event notification, it fires the first trigger using the state collection type API and issues to the application control section  a notification that the first trigger has been fired (step V).","Then, the application control section  issues an inquiry for connectable time to the database  based on the address of the first terminal equipment  included in the INVITE message received from the first terminal equipment  (step V). The database accessing type API is used for the inquiry.","The database  transmits connectable time obtained by a search to the second terminal equipment  (step V).","Thereafter, the application control section  of the second terminal equipment  sets it to the state variation detection section  that, when a connection is cut, a second trigger for notification of the cutting of a connection should be sent to the application control section  (step V).","Since the event that a connection is cut is an event detected by the connection state control section , the state variation detection section  performs necessary setting to the connection state control section  so that, when this event occurs, an event notification for notification of the occurrence of the event may be sent from the connection state control section  to the state variation detection section  (step V).","Thereafter, the application control section  issues a request for connection to the connection state control section  using the connection destination control type API in order to establish a connection to the first terminal equipment  (step V).","When the connection state control section  receives the connection request, it transmits an OK message to the first terminal equipment  through the message transmission\/reception section  (step V).","Consequently, the first and second terminal equipments  and  enter a connection state wherein they can communicate with each other (step V).","Then, the application control section  determines, based on the connectable time acquired from the database , a point of time at which, when the remaining time becomes little (for example, 30 seconds), a notification of this should be issued to the first terminal equipment , and then sets a third trigger for notifying, when the point of time comes, the application control section  of the fact to the state variation detection section  (step V).","When the point of time set in step V comes, the third trigger is fired (step V), and the application control section  issues a request to the connection state control section  using the user interaction type API to issue a notification that the remaining connectable time is little to the first terminal equipment  (step V).","The connection state control section  transmits a MESSAGE message to the first terminal equipment  through the message transmission\/reception section  in response to the request (step V). In response to the MESSAGE message, the outputting apparatus  of the first terminal equipment  displays that the remaining connectable time is little.","Further, the application control section  sets a fourth trigger to the state variation detection section  so that, when the remaining connectable time decreases to zero, a notification of this may be sent from the state variation detection section  to the application control section  (step V).","When the remaining connectable time decreases to zero, the fourth trigger is fired (step V), and the application control section  issues a request for cutting of a connection to the connection state control section  using the connection destination controlling API (step V).","In response to the connection cutting request, the connection state control section  transmits a BYE message to the first terminal equipment  through the message transmission\/reception section  (step V).","When the first terminal equipment  receives the cut of the connection, an OK message is transmitted from the first terminal equipment  back to the second terminal equipment  (step V).","In response to the transition from the connection state to the disconnection state, the second event notification set in step V is performed from the connection state control section  to the state variation detection section  (step V).","When the state variation detection section  receives the second event notification, it fires the second trigger using the state collection type API and issues a notification that the second trigger has been fired to the application control section  (step V).","Then, the application control section  records connect time between the first terminal equipment  and the transfer destination into the database  using the database accessing type API (step V).","While preferred embodiments of the present invention have been described using specific terms, such description is for illustrative purposes only, and it is to be understood that changes and variations may be made without departing from the spirit or scope of the following claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0072","num":"0071"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0073","num":"0072"},"figref":["FIG. 2","FIG. 1"]},{"@attributes":{"id":"p-0074","num":"0073"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0075","num":"0074"},"figref":["FIG. 4","FIG. 3"]},{"@attributes":{"id":"p-0076","num":"0075"},"figref":["FIG. 5","FIG. 3"]},{"@attributes":{"id":"p-0077","num":"0076"},"figref":["FIG. 6","FIG. 3"]},{"@attributes":{"id":"p-0078","num":"0077"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0079","num":"0078"},"figref":"FIG. 8"}]},"DETDESC":[{},{}]}
