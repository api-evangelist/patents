---
title: Non-transitory computer-readable recording device storing computer program including instructions for causing a device to select an object device with which the device communicates
abstract: A computer-readable recording device may store a computer program including instructions for causing a computer of a mobile device to operate as: (1) a first storing controlling module that causes a storing unit to store one or more first information for identifying one or more candidate devices, the one or more first information being received from a wireless network by a communication unit, (2) a sending controlling module that selects one candidate device as a temporarily selected candidate device from among the one or more candidate devices identified by the one or more first information, and controls the communication unit such that the communication unit sends a first instruction to the temporarily selected candidate device, and (3) a communication controlling module that controls the communication unit such that the communication unit communicates with the temporarily selected candidate device in a case where a predetermined condition is satisfied.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09606762&OS=09606762&RS=09606762
owner: BROTHER KOGYO KABUSHIKI KAISHA
number: 09606762
owner_city: Nagoya, Aichi
owner_country: JP
publication_date: 20110928
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","TECHNICAL FIELD","DESCRIPTION OF RELATED ART","BRIEF SUMMARY","DETAILED DESCRIPTION"],"p":["This application claims priority to Japanese Patent Application No. 2010-218595, filed on Sep. 29, 2010 and Japanese Patent Application No. 2011-093376, filed on Apr. 19, 2011, the contents of which are hereby incorporated by reference into the present application.","The present application relates to a program of a mobile device, the mobile device, and a method for controlling the mobile device which enables a selection of an apparatus to engage in wireless communication by a simple procedure.","A technique is known which connects a mobile device (a notebook personal computer, a mobile phone, or the like) and an apparatus (a printer or the like) by wireless communication (wireless LAN, Bluetooth, or the like). Radio waves in wireless communication have no directionality and are transmitted all around the mobile device. Therefore, a presence of a plurality of apparatuses around the mobile device means that there is a plurality of destination candidates of the wireless communication. A technique is known which, in this case, displays a list of identification information (an address, a name, or the like) of apparatuses capable of the wireless communication on a display unit of the mobile device to prompt a user to select a destination apparatus.","Conventionally, a technique is disclosed in which a mobile device and an image forming apparatus are provided with GPS (Global Positioning System) receivers and, based on coordinate data generated by the GPS, the mobile device transmits print data to a nearest image forming apparatus. However, with the conventional technique, the mobile device may inadvertently transmit the print data to an image forming apparatus located behind the user. Therefore, the conventional technique had not necessarily been convenient for the user. The present specification provides a technique capable of eliminating such inconveniences.","In another aspect of the teachings disclosed herein, a computer-readable recording device may be provided. The computer-readable recording device may store a computer program including instructions for causing a computer of a mobile device to operate as: a first storing controlling module that causes a storing unit to store one or more first information for identifying one or more candidate devices, the one or more first information being received from a wireless network by a communication unit configured to communicate using the wireless network; a sending controlling module that temporarily selects one candidate device as a temporarily selected candidate device from among the one or more candidate devices identified by the one or more first information, and controls the communication unit such that the communication unit sends a first instruction to the temporarily selected candidate device, the first instruction being an instruction that makes the temporarily selected candidate device perform a temporarily selected state notifying action for notifying that the temporarily selected candidate device has been selected; and a communication controlling module that controls the communication unit such that the communication unit communicates with the temporarily selected candidate device in a case where a predetermined condition is satisfied.","A method for controlling a mobile device and a mobile device are also novel and useful.",{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 1","b":["1","1","10","51","53","62","71","61","10","51","53","51","53","51","53","100","62","71","62","70"]},"Each of the first to third MFPs  to  and the access point  are configured to be capable of respectively performing wireless communications (data communications using radio waves)  to  conforming to a wireless LAN infrastructure mode (a mode in which a plurality of wireless LAN terminal devices performs data communication via an access point). Once the mobile phone  accesses the access point  and enters a state where wireless communication  conforming to a wireless LAN infrastructure mode can be performed, the mobile phone  can perform data communication with the first to third MFPs  to  and the server  via the access point . Examples of wireless LAN systems include a communication system specified by the IEEE802.11a\/b\/g\/n standard.","A configuration of the mobile phone  will be described. As shown in , the mobile phone  mainly comprises a CPU (Central Processing Unit) , a storage unit , a wireless transceiver unit , a wireless antenna unit , a button input unit , a panel , a mobile phone transceiver unit , a mobile phone antenna unit , a GPS unit , a compass unit , an acceleration sensor , and a camera unit . A speaker  and a microphone  are provided for making calls and inputting sound.",{"@attributes":{"id":"p-0030","num":"0029"},"figref":["FIG. 7","FIG. 7"],"b":["10","3","4","18","10","10","3","18","4","10","3","4"]},"The CPU  executes processing according to programs stored in the storage unit . Subsequently, the CPU  that executes programs such as a communication program  or an operating system may sometimes be simply described by a program name. For example, the description \u201cthe communication program \u201d may sometimes mean \u201cthe CPU  executing the communication program \u201d. The storage unit  is configured by combining a RAM (Random Access Memory), a ROM (Read Only Memory), a flash memory, an HDD (Hard Disk Drive), a buffer provided in the CPU , and the like. The wireless transceiver unit  performs wireless communication  conforming to a wireless LAN infrastructure mode via the wireless antenna unit . Digital signals constituting various data are transmitted and received by the wireless transceiver unit . The GPS unit  is a member which receives radio waves from a GPS satellite and which calculates location information indicating a physical location of the mobile phone . The term \u201cphysical location\u201d herein may also be termed \u201cabsolute location\u201d. Location information includes latitude, longitude, and height components. The mobile phone transceiver unit  performs wireless communication  conforming to a mobile phone communication system with the base station  via the mobile phone antenna unit . The storage unit  stores a program . The program  includes a basic program (not shown), a communication program , and the like. The basic program includes a program for causing the mobile phone transceiver unit  to execute communication, a program for causing the wireless transceiver unit  to execute the wireless communication , and the like. The basic program is also a program which provides an API (Application Programming Interface) that enables respective programs to acquire information calculated by the GPS unit . The communication program  is a program which causes the CPU  to execute an operation flow of the communication system , which will be described later.","The storage unit  comprises a set value storage area and a table storage area . The set value storage area stores a predetermined period of time, a predetermined acceleration value, an allowable angular range, a predetermined distance, a predetermined sequence and the like which will be described later. The table storage area stores a storage table TB.  shows an example of the storage table TB. The storage table TB assigns a selection priority  to each of the first to third MFPs  to , and associatively stores MFP identification information , MFP location information , a relative direction , a relative distance , and a flag . The MFP identification information  is information that is unique to each of the first to third MFPs  to . The MFP identification information  is, for example, an IP address  of an MFP. An MFP name  is a name assigned to each of the first to third MFPs  to  by a user or administrator of the MFP or by a manufacturer prior to shipment. MFP location information  is information indicating a physical location of the first to third MFPs  to  and includes latitude, longitude, and height components. The mobile phone  receives information indicating a physical location from an MFP, and stores the information in the storage table TB without modification as the MFP location information  of the MFP. The relative direction  is information indicating directions in which the first to third MFPs  to  are located in relation to a location of the mobile phone  (directions with the mobile phone  as the reference). The relative direction  includes a horizontal component (a direction in which an MFP is located in relation to the mobile phone  when the mobile phone  and the location of the MFP relative to the mobile phone  are projected on a horizontal plane) and a vertical component (a direction in which the MFP is located in relation to the mobile phone  when the mobile phone  and the location of the MFP relative to the mobile phone  are projected on a vertical plane that is perpendicular to a vertical plane including the mobile phone  and the MFP). The relative distance  is a respective distance between the mobile phone  and the first to third MFPs  to . The relative distance  includes a horizontal component (a distance between the mobile phone  and an MFP when the mobile phone  and the location of the MFP relative to the mobile phone  are projected on a horizontal plane) and a vertical component (a distance between the mobile phone  and the MFP when the mobile phone  and the location of the MFP relative to the mobile phone  are projected on a vertical plane that is perpendicular to a vertical plane including the mobile phone  and the MFP). The flag  is flag information indicating a selection candidate.","The table storage area stores an exclusion table TB and a usage table TB.  shows an example of the usage table TB. The usage table TB is for storing MFPs for which selection priority  is to be raised. The usage table TB stores a storage priority  and MFP identification information . The storage priority  is information indicating a sequence of storage in the usage table TB. The smaller the storage priority  of MFP identification information , the more recently the MFP identification information  had been stored in the usage table TB. While the usage table TB in  is depicted to include storage priorities  up to \u201c2\u201d, such a mode is not restrictive. Instead, the usage table TB may be arranged so that a greater number of storage priorities  are storable therein.",{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIG. 11","b":["2","2","220","2","3"]},"The button input unit , the GPS unit , the compass unit , the acceleration sensor , and the camera unit  are operation units that receive an operation by a user of the mobile phone . The button input unit  is integrally configured with the panel  as a touch panel. The panel  displays various types of function information of the mobile phone . The compass unit  includes a geomagnetic sensor that acquires an orientation of the mobile phone . The acceleration sensor  is a sensor that measures an acceleration of the mobile phone . The camera unit  is a portion that acquires image data with a CCD or the like. The basic program provides an API (Application Programming Interface) that enables the respective programs to acquire information indicating an orientation acquired by the compass unit , an acceleration measured by the acceleration sensor , image data acquired by the camera unit , and the like.","A configuration of the first MFP  will be described. The first MFP  mainly comprises a CPU , a storage unit , a wireless transceiver unit , a wireless antenna unit , a button input unit , a panel , a modem , a telephone line connection unit , a printer , a scanner , a GPS unit , and an indicator light . These components are configured to be mutually communicable via an input\/output port .","The CPU  controls respective functions according to programs stored in the storage unit , various signals transmitted and received via the wireless transceiver unit , and the like. The storage unit  may be configured by combining a RAM (Random Access Memory), a ROM (Read Only Memory), a flash memory, an HDD (Hard Disk Drive), or the like.","The wireless transceiver unit  performs wireless communication  conforming to a wireless LAN infrastructure mode via the wireless antenna unit . Digital signals constituting various data are transmitted and received by the wireless transceiver unit .","The button input unit  is one or more keys for executing various functions of the first MFP . The button input unit  may be integrally configured with the panel  as a touch panel. The panel  displays various function information of the first MFP . The printer  is a portion that executes printing. The scanner  is a portion that executes scanning. The GPS unit  is a portion that acquires location information of the first MFP . The indicator light  comprises an LED (Light Emitting Diode) or the like and is a portion that notifies various statuses of the first MFP  to the user. The modem  modulates document data to be transmitted using the facsimile function into a signal transmittable to the telephone network  and transmits the signal via the telephone line connection unit , and receives an inputted signal from the telephone network  via the telephone line connection unit  and demodulates the signal into document data. Since configurations of the second MFP  and the third MFP  are the same as the first MFP , a detailed description will be hereby omitted.","A configuration of the server  will be described. The server  mainly comprises a CPU , a storage unit , and a communication unit . The server  is a device that provides its own functions or data to a client device in a network. The CPU  controls various functions. The storage unit  stores various data. The communication unit  communicates various types of information with the mobile phone .","Operations of the communication system  according to a first embodiment will be described with reference to . A flow performed by the mobile phone  will be described with reference to . The flows shown in  are executed in response to an activation of the communication program  of the mobile phone . As shown in , in the first embodiment, the user grips a side of the microphone of the mobile phone  and holds the mobile phone so that the panel  faces upward, and when the user briskly waves the mobile phone  toward an MFP that the user wishes to set as a data communication object (so that a tip of a side of the speaker  of the mobile phone  points toward the MFP), the mobile phone  performs data communication with the MFP existing in a direction pointed by its speaker  side tip as the data communication object.","In S in , the CPU  first determines whether or not an acceleration measured by the acceleration sensor  has been abruptly switched from an acceleration, which is equal to or greater than a predetermined value and oriented in one direction, to an acceleration which has an equal or grater than predetermined value and is oriented in an opposite direction; in other words, whether or not an operation conducted by the user is an operation that satisfies a trigger condition. In particular, the CPU  makes a determination using acceleration acquired regularly using an API. When the trigger condition is not satisfied (S: NO), the CPU  returns to S. On the other hand, when the trigger condition is satisfied (S: YES), the CPU  advances to S. Providing the determination of the trigger condition means that processes of S and thereafter are not executed unless the user performs the operation in which the mobile phone  is briskly waved and then held still. Therefore, a situation can be prevented where data communication is executed by mistake due to the user moving the mobile phone  without an intention of performing data communication. In S, the CPU  uses the API to acquire information indicating an orientation of the mobile phone  from the compass unit . Using the acquired information, the CPU  calculates a direction in which the speaker  side tip is located in relation to the microphone side tip along a central axis in a longitudinal direction (an axis which is located at a center in a transverse direction and a center in a thickness direction and which extends in a longitudinal direction: refer to ) of the mobile phone  in relation to a reference location of the mobile phone  (a center in the longitudinal direction, a center in the transverse direction, and a center in a thickness direction of the mobile phone : refer to ). In other words, information is calculated which indicates what direction is specified by an operation received from the user by the mobile phone  in relation to the location of the mobile phone. The calculated information is stored in the storage unit  as a direction information. The direction information includes a horizontal component (a direction in which the tip of the mobile phone  on the speaker  side is located in relation to a reference location of the compass unit  when relative locations of the reference location of the compass unit  and a location of the speaker  side tip of the mobile phone  are projected on a horizontal plane).","Subsequently, in S, the CPU  acquires a network set value. Specifically, a wireless LAN probe request is broadcasted using the wireless transceiver unit . An SSID (Service Set Identifier) included in a probe response returned by an access point (e.g., the access point ) in a radio wave range of the wireless transceiver unit  is then received and temporarily stored in a work area (a RAM of the storage unit  or a buffer) of the CPU . In S, the CPU  accesses the access point  using the acquired SSID and enters a state where wireless communication  conforming to the wireless LAN infrastructure mode can be performed.","In S, the CPU  executes a flow for acquiring a relative direction and a relative distance. Detailed contents of the flow for acquiring the relative direction and the relative distance will be described with reference to . In S, the CPU  uses the wireless transceiver unit  to broadcast first data (the first data includes a broadcast address as information indicating a destination of the first data in order to indicate that the first data is being broadcasted) by wireless communication  conforming to the wireless LAN infrastructure mode. As a result, wireless clients accessing the access point  (in other words, the wireless clients including the first to third MFPs  to ) receive the first data via the access point. The first data includes identification information (IP address) of the mobile phone  in order to indicate a source of the first data. The first data also includes inquiry information (which is also information indicating that the data is first data; as a specific example, an SNMP (Simple Network Management Protocol) Request command) for inquiring whether the communication program  is supported.","In S, the CPU  determines whether or not second data has been returned from the first to third MFPs  to . Specifically, the CPU  determines whether or not data has been received which includes the identification information of the mobile phone  in order to indicate the destination, the identification information (IP address) of an MFP in order to indicate the source, and reply information (which is also information indicating that the data is second data; as a specific example, an SNMP Reply command) for notifying the mobile phone that the data is a reply to the first data. When the second data is received (S: YES), the CPU  advances to S. In S, the CPU  extracts MFP identification information from the second data. Since the second data also includes information indicating a physical location of an MFP, the CPU  also extracts information indicating a physical location of the MFP from the second data. The extracted identification information and information indicating the physical location are temporarily stored in the storage table TB as an IP address  and MFP location information  of the MFP.","When the second data has not been received (S: NO), the CPU  advances to S to determine whether or not a reply wait time for the second data has elapsed. When the reply wait time has not elapsed (S: NO), the CPU  returns to S, and when it had elapsed (S: YES), the CPU  advances to S. In S, the CPU  acquires location information of the mobile phone  calculated by the GPS unit . The acquired location information of the mobile phone  is temporarily stored in the storage unit .","In S, the CPU  calculates a relative direction and a relative distance. The calculation of the relative direction and the relative distance is performed based on the location information of the mobile phone  and the MFP location information  stored in the storage unit . The calculated relative direction and relative distance are temporarily stored in the storage table TB as the relative direction  and the relative distance  of the MFP.","In S, the CPU  determines whether or not the relative direction  and the relative distance  have been calculated for all MFPs which have returned the second data. If calculated (S: YES), the CPU  ends the flow, and the CPU  advances to S (), and if not calculated (S: NO), the CPU  advances to S. In S, the CPU  selects an uncalculated MFP and then returns to S. Accordingly, the relative direction  and the relative distance  can be acquired for all MFPs which have returned the second data.","In S, the CPU  selects an object MFP based on the direction information, the location information of the mobile phone , and the location information of MFP respectively stored in the storage unit . An object MFP is an MFP to become an object of data communication (in other words, an MFP that is to execute the data communication with the mobile phone ). A flow for selecting the object MFP will be described with reference to . In S, the CPU  sorts the selection priorities  of MFPs stored in the storage table TB so that the selection priority  of an MFP with a small difference between the direction indicated by the horizontal component of the relative direction  and the direction indicated by the horizontal component of the direction information is given a higher priority than the selection priority  of an MFP with a large difference between the direction indicated by the horizontal component of the relative direction  and the direction indicated by the horizontal component of the direction information.","In S, the CPU  determines the number of MFPs (MFPs existing in front of the user of the mobile phone ) of which a difference between a direction indicated by a horizontal component of the relative direction  and a direction indicated by a horizontal component of the direction information is less than 90 degrees (in other words, in a direction pointed by the speaker  side tip of the mobile phone  or in front as seen from the user of the mobile phone ). When there is a plurality of MFPs existing in front of the user (S: plurality), the CPU  advances to S. When no MFP exists in front of the user (S: zero), the CPU  advances to S. When there is only one MFP existing in front of the user (S: one), the CPU  advances to S. In S, the CPU  selects the MFP to be a temporarily selected MFP and advances to S. In S, the CPU  sets the MFPs existing in front of the user as selection candidates. For example, when the user of the mobile phone  is on a first floor, it is inconvenient to set an MFP installed on a second floor as the data communication object. Therefore, only MFPs of which the distance indicated by the vertical component of the relative distance  is within a threshold value (for example, less than 2 meters) are set as the selection candidates of the temporarily selected MFP among the MFPs of which the difference between the direction indicated by the horizontal component of the relative direction  and the direction indicated by the horizontal component of the direction information is less than 90 degrees. Setting as the selection candidate means to store information of the MFP, that is set as the selection candidate, in the storage table TB in association with the flag  () indicating that the MFP is the selection candidate of the temporarily selected MFP. In S, the CPU  sorts selection priorities  of MFPs stored in the storage table TB so that the selection priority  of the MFP with a shorter distance indicated by the horizontal component of the relative distance  is given a higher priority than the selection priority  of the MFP with a longer distance indicated by the horizontal component of the relative distance .","In S, the CPU  sorts the selection priorities  of the MFPs stored in the storage table TB so that, among the selection candidate MFPs, the selection priorities  of the MFPs stored in the exclusion table TB are given lower priority and the selection priorities  of the MFPs stored in the usage table TB are given higher priority. Specifically, a determination is made on whether an MFP is stored in the exclusion table TB (or whether the MFP is not stored in the usage table TB). Subsequently, processing is performed in which, if the MFP is stored in the exclusion table TB (or if the MFP is not stored in the usage table TB), the selection priority of the MFP is set one rank lower than the MFP with the lowest selection priority among the MFPs not stored in the exclusion table TB (or among the MFPs stored in the usage table TB). The processing is repetitively performed until the selection priorities of all of the MFPs stored in the exclusion table TB (or all MFPs not stored in the usage table TB) become lower than the selection priorities of the MFPs not stored in the exclusion table TB (or the MFPs stored in the usage table TB).","In S, the CPU  selects the MFP of which the selection priority  has been set to \u201c1\u201d, which is the topmost selection priority among the storage table TB, and for which the flag  indicating that the MFP is a selection candidate, as a temporarily selected MFP. The temporarily selected MFP is an MFP temporarily set to a selected state as the candidate for performing data communication. Accordingly, the temporarily selected MFP can be automatically decided without needing user input.","In S, the CPU  causes the wireless transceiver unit  to transmit a notification executing instruction to the temporarily selected MFP. The notification executing instruction is an instruction for causing the temporarily selected MFP to perform a temporarily selected state notifying action for notifying that it has been temporality selected as the temporarily selected candidate device. The temporarily selected MFP having received the instruction performs the temporarily selected state notifying action. Examples of the temporarily selected state notifying action include methods such as lighting the indicator light , causing the panel  to display a notification of the temporal selection, moving movable parts of the printer  or the scanner , and moving other movable parts of the MFP.","In S, the CPU  determines whether or not a canceling action of the temporal selection has been executed. The canceling action is an action for canceling the temporal selection of the temporarily selected MFP. The canceling action is executed after the direction information is stored in the storage unit  in S and in response to an input of cancellation information to an external input receiving module. The cancellation information is direction information indicating a different direction from the direction information acquired in S.","The cancellation information may be various types of direction information. For example, the cancellation information may be direction information having an opposite direction from the direction indicated by the direction information V as is the case of cancellation information C shown in . Accordingly, for example, when a temporal selection is made by holding out the mobile phone  in the direction indicated by the direction information V, the temporal selection can be cancelled by an action in which the mobile phone  is moved in the direction indicated by the cancellation information C (in other words, an action by which the mobile phone  that had been held out is restored to its original location).","As another alternative example, the cancellation information may have a direction perpendicular to the direction indicated by the direction information V as is the case of cancellation information C shown in . Accordingly, for example, when the temporal selection is made by holding out the mobile phone  in the direction indicated by the direction information V, the temporal selection can be cancelled by an action in which the mobile phone  is moved in the direction indicated by the cancellation information C (in other words, an action by which the mobile phone  is waved sideways).","When the canceling action is executed (S: YES), the CPU  advances to S. In S, the CPU  causes the cancellation information to be stored in the storage unit . In S, the CPU  uses the wireless transceiver unit  to transmit a notification terminating instruction to the temporarily selected MFP. The notification terminating instruction is an instruction issued to the temporarily selected MFP which causes the temporarily selected state notifying action to be terminated. The flow is then finished. The temporarily selected MFP having received the instruction terminates the temporarily selected state notifying action.","On the other hand, when the canceling action is not executed in S (S: NO), the CPU  advances to S (). In S, the CPU  determines whether or not finalization processing has been performed. Finalization processing is processing for receiving input information input by an operation by the user, who desired to finalize the temporarily selected MFP as the object MFP, to instruct to finalize the object MFP. An example of finalization processing is processing in which the external input receiving module receives a predetermined external input. Examples of the predetermined external input include an OK button provided at the button input unit  being pressed and acceleration being applied to the acceleration sensor  by waving the mobile phone .","Other examples of finalization processing include processing in which a lapse of a given period of time is detected without the external input receiving module receiving a predetermined external input. In this case, an example of the predetermined external input is an NG operation performed to cancel an execution of communication processing. An example of the NG operation is a cancel button of the button input unit  being pressed. The given period of time may be determined in advance by the user and stored in the set value storage area ","When the finalization processing is executed (S: YES), the CPU  advances to S. In S, the CPU  finalizes the temporarily selected MFP as the object MFP. In S, the CPU  stores the MFP identification information  of the object MFP in the usage table TB. Specifically, in the usage table TB, storage priorities  of MFP identification information  already stored are respectively lowered by one rank. At this point, the MFP identification information  having the greatest storage priority  is deleted. The MFP identification information  of the object MFP is stored in the storage priority =\u201c1\u201d field. In S, the CPU  deletes the MFP identification information  of the object MFP from the exclusion table TB.","In S, the CPU  executes data communication with the object MFP. Specifically, the CPU  executes data communication in which the CPU  reads out MFP identification information  (IP address) of the object MFP from the storage table TB, causes the wireless transceiver unit  to transmit data including the IP address of the object MFP to be indicated as the destination as transmission data to the object MFP, and causes the wireless transceiver unit  to receive data including the IP address of the object MFP (in other words, data transmitted by the object MFP) as reception data. The IP address of the object MFP is information for identifying a sender of the data. Various types of data are conceivable as the data handled in data communication. For example, processing data may be transmitted to the object MFP by the wireless transceiver unit  to have the object MFP execute predetermined processing thereon. Specifically, print data may be transmitted to the object MFP by the wireless transceiver unit  to have the object MFP perform printing of the print data using the printer . A scanning instruction may be transmitted to the object MFP by the wireless transceiver unit  to have the wireless transceiver unit  receive scan data generated by the object MFP using the scanner  from the object MFP. An IP phone instruction may be transmitted to the object MFP by the wireless transceiver unit  to have the object MFP execute a call or a facsimile communication to a phone device or a facsimile device existing on another end of the telephone line via the modem  of the object MFP and the telephone line connection unit . In S, the CPU  releases the connection with the object MFP. The flow is then finished.","On the other hand, when the finalization processing is not executed in S (S: NO), the CPU  advances to S. In S, the CPU  causes the wireless transceiver unit  to transmit a notification terminating instruction to the temporarily selected MFP. In S, the CPU  releases the connection with the temporarily selected MFP. In S, the CPU  stores the MFP identification information  of the temporarily selected MFP in the exclusion table TB. Since the registration processing to the exclusion table TB is similar to the registration processing (S) to the usage table TB described earlier, a detailed description will be hereby omitted.","In S, the CPU  deletes the MFP identification information  of the temporarily selected MFP from the usage table TB. In S, the CPU  selects a next new temporarily selected MFP. As the next new temporarily selected MFP, an MFP is selected which has a lower priority than the selection priority  of the current temporarily selected MFP and for which is stored the flag  indicating that the MFP is a selection candidate in the storage table TB. The CPU  then returns to S ().","Flows performed at the first to third MFPs  to  will be described with reference to . In S, the CPU  determines whether or not first data broadcasted from the mobile phone  has been received (specifically, the CPU  determines whether or not data has been received which includes a broadcast address as information indicating a destination and which includes information indicating that the data is first data). When not received (S: NO), the CPU  advances to S, and when received (S: YES), the CPU  advances to S. In S, the CPU  returns the second data to the mobile phone .","In S, the CPU  determines whether or not a notification executing instruction has been received from the mobile phone . When not received (S: NO), the CPU  advances to S, and when received (S: YES), the CPU  advances to S. In S, the CPU  causes the indicator light  to be turned on. Accordingly, the user can be notified that the user's own device (the device that received the notification executing instruction) has been temporarily selected.","In S, the CPU  determines whether or not a notification terminating instruction has been received. When not received (S: NO), the CPU  advances to S, and when received (S: YES), the CPU  advances to S. In S, the CPU  causes the indicator light  to be turned off. Accordingly, the user can be notified that the temporal selection of the user's own device had been cancelled.","In S, the CPU  determines whether or not processing data such as print data has been received from the mobile phone . When not received (S: NO), the CPU  returns to S, and when received (S: YES), the CPU  advances to S. In S, the CPU  executes processing on the processing data. For example, when the processing data is print data, processing is executed for printing the print data using the printer . The CPU  then returns to S.","As a specific example of operations of the communication system  according to the first embodiment, a case will be described in which first to third MFPs  to  are arranged in a form shown in . A case will be described in which the first MFP  is selected as an object MFP. A case will be described in which the first MFP  is stored in the exclusion table TB () and the third MFP  is stored in the usage table TB (). A case will be described in which the acceleration sensor  is used as an operation unit which receives an operation by the user. A case will be described in which the CPU  causes the wireless transceiver unit  to transmit print data to the object MFP.","The flow shown in  is started in response to an activation of the communication program  by an operation of the button input unit  of the mobile phone  by the user. A trigger condition is satisfied in correspondence to the mobile phone  being briskly waved toward the first MFP  and then held still by the user who wishes to set the first MFP  as the data communication object (S: YES). Subsequently, the mobile phone  acquires direction information (S). In this case, the direction indicated by the direction information is a direction from the mobile phone  toward the first MFP . The mobile phone  then accesses the access point  and enters a state where wireless communication  conforming to the wireless LAN infrastructure mode can be performed (S). Next, the mobile phone  broadcasts first data to the first to third MFPs  to  (S). Subsequently, the first to third MFPs  to  receive the first data (S: YES) and return second data to the mobile phone  (S). The mobile phone  receives the second data from the first to third MFPs  to  (S: YES) and stores the second data in the storage table TB of the storage unit  (S). Therefore, as shown in , the MFP identification information  and the MFP location information  are associated to each of the first to third MFPs  to  and stored in the storage table TB. At this point, the selection priorities  are arranged in a sequence of storage of the selection priorities  in the storage table TB.","The mobile phone  acquires location information of the mobile phone calculated by the GPS unit  (S). The mobile phone  calculates the relative direction and the relative distance for each of the first to third MFPs  to  (S). As a result, as shown in , a relative direction D of the first MFP , a relative direction D of the second MFP , and a relative direction D of the third MFP  are calculated. A relative distance R of the first MFP , a relative distance R of the second MFP , and a relative distance R of the third MFP  are respectively calculated. Subsequently, as shown in , the calculated relative directions and relative distances are stored in the storage table TB as the relative direction  and the relative distance .","Once the relative direction and the relative distance have been calculated for all of the first to third MFPs  to  (S: YES), the mobile phone  sorts the selection priorities  of the MFPs stored in the storage table TB in an ascending order of the difference between the direction indicated by the horizontal component of the relative direction  and the direction indicated by the horizontal component of direction information V (S). In the example shown in , since the direction indicated by the horizontal component of the direction information V and the direction indicated by the horizontal component of the relative direction  (=D) are consistent with each other, the selection priority  of the first MFP  is set to \u201c1\u201d which is the highest priority. Since the direction indicated by the horizontal component of the direction information V and the direction indicated by the horizontal component of the relative direction  (=D) significantly differ from each other, the selection priority  of the third MFP  is set to \u201c3\u201d which is the lowest priority. Since there is a plurality of MFPs (the first MFP  and the second MFP ) whose difference between the direction indicated by the horizontal component of the direction information V and the direction indicated by the horizontal component of the relative direction  are less than 90 degrees (S: YES), only the first MFP  and the second MFP  are set as the selection candidates (S), and the flag  indicating that the MFP is a selection candidate is stored in the storage table TB (). Subsequently, the selection priorities  are sorted in an ascending order of a distance indicated by a horizontal component of the relative distance  (S). In the example shown in , since a distance indicated by a horizontal component of the relative distance  (=R) is shorter than a distance indicated by a horizontal component of the relative distance  (=R), the selection priority  of the first MFP  is set to \u201c1\u201d and the selection priority  of the second MFP  is set to \u201c2\u201d. Accordingly, the sorting is completed as shown in the storage table TB of .","The mobile phone  sorts the MFPs stored in the storage table TB so that the selection priority  of the first MFP  stored in the exclusion table TB () is given a low priority and the selection priority  of the third MFP  stored in the usage table TB () is given a high priority (S). Accordingly, the sorting is completed as shown in the storage table TB of .","The mobile phone  selects the second MFP  for which, in the storage table TB (), the selection priority  has been set to \u201c1\u201d, that is the topmost selection priority, and for which the flag  indicates that the MFP is a \u201cselection candidate\u201d, as the temporarily selected MFP (S). The mobile phone  transmits a notification executing instruction to the temporarily selected MFP (second MFP ) (S). Upon receiving the notification executing instruction from the mobile phone  (S: YES), the second MFP  causes the indicator light  to be turned on (S). When the user presses the OK button provided in the button input unit  of the mobile phone  (S: YES), the temporarily selected MFP (the second MFP ) is finalized as the object MFP (S).","The mobile phone  registers the second MFP  that is the object MFP in the usage table TB (S). The mobile phone  executes data communication with the object MFP (the second MFP ) and transmits the print data (S). The second MFP  receives the print data (S: YES) and prints the print data using the printer  (S). The flow is then finished.","In S, when the Cancel button provided in the button input unit  of the mobile phone  is pressed in a state where the second MFP  is selected as the temporarily selected MFP (S: NO), the MFP identification information  of the second MFP  is stored in the exclusion table TB (S). The MFP identification information  of the second MFP  is deleted from the usage table TB (S). An MFP (the first MFP ), which has a lower priority than the selection priority  (\u201c1\u201d, ) of the current temporarily selected MFP (the second MFP ) and for which is stored the flag  indicating that the MFP is a selection candidate, is selected as a next new temporarily selected MFP (S).","Advantageous effects of the communication system  according to the example of the first embodiment described above will now be described. The communication system  can cause the temporarily selected MFP that is temporarily selected as a communication destination candidate to perform the temporarily selected state notifying action. Therefore, the user can readily recognize which MFP is temporarily selected by visual confirmation or the like. By performing a predetermined input to the mobile terminal device, the temporarily selected MFP can be finalized as the object MFP and data communication can be performed. Accordingly, the user is no longer required to be aware of identification information of the MFP to which the user desires to connect or to find out the identification information of the MFP and input the same to the mobile phone . Therefore, the object MFP can now be selected by a simple procedure.","With the communication system , when the temporarily selected MFP is not the MFP which the user desires to select as the communication destination, the temporal selection can be cancelled by executing the canceling action. Therefore, convenience for the user can be improved.","With the communication system , the cancellation information is arranged as direction information indicating a different direction from the direction information acquired in S. Therefore, a temporal selection operation can be cancelled by a simple operation such as an action in which the mobile phone  having been held out is pulled back to an original location.","With the communication system , not only the relative direction  but the relative distance  is also used when selecting an object MFP. Therefore, even when a single object MFP cannot be selected using the relative direction  alone such as in a case where there is a plurality of MFPs having relative directions  consistent with the direction information, a single appropriate object MFP can be selected.","With the communication system , when the triggering condition is satisfied, the determination that the user intends to select the object MFP is made and identification of the object MFP is started. Therefore, a situation can be prevented where the object MFP is erroneously selected when the user does not intend to select the object MFP.","In the communication system , the location information of the mobile phone  is acquired when it is determined that the triggering condition has been satisfied. Accordingly, the object MFP can be identified based on the location information of the mobile phone  at a point where the triggering condition is satisfied. Therefore, even in a case where a network state varies dynamically such as when the user operates the mobile phone  while moving, the object MFP can be reliably identified.","With the communication system , an occurrence of an acceleration measured by the acceleration sensor  exceeding a threshold value is set as the trigger and direction information is calculated using the compass unit . Therefore, processing for selecting an object MFP can be executed in response to various actions of the user including the user waving the mobile phone  vertically and then holding the mobile phone  still, the user waving the mobile phone  horizontally and then holding the mobile phone  still, or the user holding the mobile phone  still in a posture in which the speaker  side tip of the mobile phone  is pointed outward.","While the first embodiment has been described in detail above, such description is for illustrative purposes only and is not intended to limit the scope and claims of the invention. Techniques described in the claims of the invention include various modifications and changes made to the specific example illustrated above.","For example, a configuration in which, in S, the CPU  calculates information indicating a direction in which the speaker  side tip of the mobile phone  is located in relation to a reference location of the mobile phone  is not restrictive. As a first modification, in S, the CPU  may calculate information indicating a direction in which the microphone side tip of the mobile phone  is located in relation to a reference location of the mobile phone . With such a modification, similar convenience to the first embodiment can be achieved in the user gripping the speaker  side of the mobile phone , waving the mobile phone  so that the microphone side tip points in the direction in which the MFP that the user desires as the data communication object exists, and then holding the mobile phone  still.","As a second modification, in S, the CPU  may calculate information indicating a direction in which the installation face of the camera unit  on the mobile phone  is located in relation to a reference location of the mobile phone . With such a modification, similar convenience to the first embodiment can be achieved in the user gripping the mobile phone  so that the camera unit  points in the direction in which the MFP that the user desires as the data communication object exists, and then holding out the mobile phone  to stop the waving motion.","For example, the operation that satisfies the trigger condition is not limited to waving the mobile phone  and then holding the mobile phone  still. As a third modification, a configuration may be adopted in which the button input unit  is used as the operation unit and an operation for instructing photography using the camera unit  to be performed is used as the operation that satisfies the trigger condition. In this case, when the user activates the communication program , the camera unit  is activated and the panel  functions as an electronic viewfinder of the camera unit . Subsequently, in S in the flow shown in , the CPU  determines whether or not a user operation on the button input unit  with an intention to perform photography using the camera unit  (in other words, an operation satisfying the trigger condition) has been made. When the trigger condition is satisfied (S: YES), in S, the CPU  uses the compass unit  to calculate a direction in which the installation face of the camera unit  on the mobile phone  is located in relation to a reference location of the mobile phone  or, in other words, information indicating a direction in which the user viewing the panel  that is an electronic viewfinder had pointed the camera unit  during photography, and stores the same in the storage unit  as direction information.","A configuration may be adopted in which, in S and S in the third modification, the CPU  executes the same processing as in the second modification. With such a configuration, similar convenience to the first embodiment can be achieved by usage in which a user activates the communication program , and performs photography with the camera unit  pointed (or holding out the mobile phone ) in the direction in which the MFP that the user desires as the object of data communication with the mobile phone .","As a fourth modification, a configuration may be adopted in which the acceleration sensor  is used as an operation unit and the mobile phone  kept oriented by the user in a same direction for a predetermined period of time is used as an operation that satisfies the trigger condition. In this case, when the user activates the communication program , in S in the flow of the mobile phone  shown in , the CPU  determines whether or not a predetermined period of time has elapsed without an acceleration measured by the acceleration sensor  exceeding a threshold value that is a value small enough that an intentional movement of the mobile phone  is inconceivable (in other words, whether or not an operation that satisfies a trigger condition has been performed). When the trigger condition has been satisfied (S: YES), in S, the CPU  executes the same processing as any of the first embodiment, the first modification, the second modification, and the third modification. In the same manner as in the third modification, when the user activates the communication program , the camera unit  may be activated and the panel  may function as the electronic viewfinder of the camera unit . With such a modification, similar convenience to the first embodiment can be achieved in the user activating the communication program , and holding the speaker  side tip of the mobile phone  (or the microphone side tip or the installation face of the camera unit ) still for a predetermined period of time in the direction in which the MFP that the user desires as the object of data communication with the mobile phone  exists.","In the fourth modification, a configuration may be adopted in which, in S, the CPU  determines whether or not a predetermined period of time has elapsed without a variation equal to or greater than a threshold value in the location information calculated by the GPS unit . A configuration may be adopted in which, in S, a determination is made as to whether or not a predetermined period of time has elapsed without a variation equal to or greater than a threshold value in the information indicating an orientation acquired by the compass unit . Even with these configurations, similar convenience to the first embodiment can be achieved.","As a fifth modification, a configuration may be adopted in which the button input unit  (or a touch panel) or the microphone  is used as an operation unit and a predetermined input performed by the user to the button input unit  or the microphone  is used as an operation that satisfies the trigger condition. In this case, when the user activates the communication program , in S in the flow of the mobile phone  shown in , the CPU  determines whether or not a predetermined input has been made to the button input unit  (in other words, whether or not an operation satisfying the trigger condition has been performed). When the trigger condition has been satisfied (S: YES), in S, the CPU  executes the same processing as any of the first embodiment, the first modification, the second modification, and the third modification. In the same manner as in the third modification, when the user activates the communication program , the camera unit  may be activated and the panel  may function as an electronic viewfinder of the camera unit . With such a modification, similar convenience to the first embodiment can be achieved by usage in which a user activates the communication program , points the speaker  side tip (or the microphone side tip or the installation face of the camera unit ) of the mobile phone  in a direction in which an MFP that the user desires as an object of data communication with the mobile phone  exists, and performs a predetermined input to the button input unit  or the microphone .","In the fifth modification, the predetermined input may be an input in which a directional button (not shown; for example, a front button may be associated with an angle of 0 degrees, a right button with an angle of 90 degrees rightward, a left button with an angle of 90 degrees leftward, and a rear button with an angle of 180 degrees) of the button input unit  (including a touch panel) is operated. Also in the fifth modification, the predetermined input may be an input to the button input unit  (touch panel) in which an indicator (a finger, a stylus pen, or the like) is slid in a predetermined direction (for example, a sliding motion in the longitudinal direction toward the speaker  side tip may be associated with an angle of 0 degrees, a rightward sliding motion in a transverse direction with an angle of 90 degrees rightward, a leftward sliding motion in a transverse direction with an angle of 90 degrees leftward, and a sliding motion in the longitudinal direction toward the microphone side tip may be associated with an angle of 180 degrees). Also in the fifth modification, the predetermined input may be a voice input indicating a direction to the microphone  (for example, an utterance of \u201cfront\u201d may be associated with an angle of 0 degrees, an utterance of \u201cright\u201d with an angle of 90 degrees rightward, an utterance of \u201cleft\u201d with an angle of 90 degrees leftward, and an utterance of \u201crear\u201d with an angle of 180 degrees). Subsequently, after such input is performed, in S, information indicating a direction obtained by adding an angle associated with the directional button operated by the user to information calculated by the CPU  may be stored in the storage unit  as direction information.","By adopting such a configuration, similar convenience to the first embodiment (with respect to a direction in which any of the speaker  side tip, the microphone side tip, and the camera unit  is pointed, an MFP existing e.g. to the right is selected as the temporarily selected MFP and an MFP existing e.g. to the left is not selected as the temporarily selected MFP) can be achieved by usage in which a user activates the communication program , points the speaker  side tip (or the microphone side tip or the installation face of the camera unit ) of the mobile phone  in the direction in which the MFP that the user desires as the object of data communication with the mobile phone , and operates a directional button, slides a finger, or inputs an utterance into the microphone .","As a sixth modification, in S, information indicating an orientation of the mobile phone  may be acquired using the acceleration sensor . Specifically, when one direction measured by the acceleration sensor  in S and an opposite direction of the one direction are on a same axis, a direction of the axis may be stored in the storage unit  as information indicating the orientation of the mobile phone .","As a seventh modification, a modification will be described in which, in S (), a plurality of MFPs does not exist in front of the user (S: zero). In this case, an absence of selection candidate MFPs may be displayed on the panel  of the mobile phone  to end the flow. Alternatively, in this case, the absence of the selection candidate MFPs in the direction in which the user had waved the mobile phone  may be displayed on the panel  of the mobile phone . MFPs (first to third MFPs  to ) connected to a wireless network formed by the access point  may be displayed as options on the panel . Subsequently, in S, a selection input of an option may be received.","As an eighth modification, in S (), a determination that an operation by the user satisfies a trigger condition may be made subject to a detection of an acceleration measured by the acceleration sensor  equaling or exceeding a predetermined value. Accordingly, the trigger condition can be detected simply by a large acceleration being applied to the mobile phone . Therefore, an object MFP can be decided by having the user simply perform an operation of briskly waving the mobile phone  toward an MFP which the user wishes to set as an object of data communication. As a result, a need for performing an operation of holding the mobile phone  still after waving the mobile phone  can be eliminated.","For example, a configuration may be adopted in which, in S, a plurality of network set values is acquired (for example, by receiving a probe response from a plurality of access points), and the plurality of access points is accessed using the set values. In this case, the CPU  acquires a plurality of network set values in S. Subsequently, processing is repeated which includes, in S, accessing an access point using one of the acquired set values, and in S, executing a flow for acquiring a relative direction and a relative distance, whereby every time a relative direction and a relative distance are acquired, the relative direction and the relative distance are additionally stored in the storage table TB. Such a configuration enables an object MFP to be selected not only from MFPs connected to one network but also from MFPs connected to other networks. A configuration may be adopted in which, for example, an acquisition of a network set value in S involves temporarily storing a network set value stored in advance in the set value storage area of the mobile phone  in a work area of the CPU .","In a case where, despite a determination is made in S in that an operation satisfying the trigger condition has been performed (S: YES), the mobile phone  does not perform data communication with an object MFP in S and a connection between a network accessed by the mobile phone  and the mobile phone  is cut off, it is unnecessary to discard a value of the storage table TB stored in S and once again determine in S that an operation satisfying the trigger condition has been performed, and processing may be restarted from S. Accordingly, even in a situation where network connection is susceptible to interruptions such as when the user operates the mobile phone  while moving so as to approach an MFP which the user desires as an object of data communication with the mobile phone , since the acquisition of the direction information and the acquisition of the relative direction and the relative distance are performed without the user having to once again perform the operation for satisfying the trigger condition, data communication can be performed between an MFP existing in the direction desired by the user and the mobile phone .","A determination that an operation satisfying the trigger condition has been performed need not be made once again in S after discarding a value of the storage table TB stored in S, and processing may be restarted from S. Accordingly, even in a situation where network connection is susceptible to interruptions such as when the user first performs the operation indicating the direction of an MFP which the user desires as the object of data communication with the mobile phone  and then holds the mobile phone  in a manner that is arbitrary to the user and approaches the desired MFP, the acquisition of the relative direction and the relative distance are performed without the user having to once again perform the operation for satisfying the trigger condition. Therefore, data communication can be performed between an MFP existing in the direction desired by the user and the mobile phone .","For example, processing of S to S may be regularly executed in response to power activation of the mobile phone , and when the trigger condition is satisfied (S: YES), processing of S and then S may be executed. For example, processing of S to S may be regularly executed in response to power activation of the mobile phone , and when the trigger condition is satisfied (S: YES), processing of S and then S may be executed.","For example, with respect to the MFP decided as the object MFP in S, the wireless transceiver unit  may be configured to execute processing for transmitting a notification which notifies that the MFP has been decided as the object MFP. Subsequently, when a reply signal such as an ACK signal is not received within a predetermined period of time, the wireless transceiver unit  may be configured to execute processing for deciding another MFP as the object MFP and retransmitting the notification to the newly decided object MFP. Accordingly, communication with the object MFP can be performed more reliably.","For example, a configuration may be adopted in which the server  regularly receives identification information and information indicating the physical location from the first and second MFPs  and  respectively and stores the information in the storage unit . In this case, upon receiving first data transmitted by the mobile phone  in S, the server  returns second data including the stored identification information and information indicating a physical location of the first and second MFPs  and  to the mobile phone . The second data returned by the server  includes identification information of the mobile phone  for indicating the destination, identification information (IP address) of the server  for indicating the source, and return information which indicates that the data is second data. In this case, upon receiving by the wireless transceiver unit , in S, the second data transmitted by the server , the CPU  of the mobile phone  extracts MFP identification information and information indicating the physical location from the second data in S and temporarily stores the information in the storage table TB.","In the first embodiment, the mobile phone  communicates with the first to third MFPs  to  via the access point  by wireless communication  conforming to the wireless LAN infrastructure mode. Alternatively, a configuration may be adopted in which the mobile phone  directly communicates with the first to third MFPs  to  by wireless communication  conforming to Bluetooth (registered trademark). In this case, the first to third MFPs  to  are in states capable of responding to the search while conforming to Bluetooth. In S, the CPU  of the mobile phone  receives a response including an MFP Bluetooth address (a type of identification information which is also referred to as an BD address) from the MFPs existing at a distance in which wireless communication conforming to Bluetooth can be performed with the mobile phone  (in other words, first to third MFPs  to ). Specifically, for example, a search according to SDAP (Service Discovery Application Profile) is performed and a response is received from a device that provides a printer function and a scanner function (in other words, an MFP). Then, in S, a connection is made to the first MFP  according to connection processing conforming to Bluetooth. Subsequently, in S, a relative direction and a relative distance are acquired from the connected MFP. In this case, in S, instead of broadcasting the first data, the wireless transceiver unit  may be configured to execute processing for transmitting first data including a Bluetooth address of the connected MFP in order to indicate a destination. Subsequently, a return is made to S to make a connection to the second MFP , S is executed, a return is made to S to make a connection to the third MFP , and S is executed (in other words, processing of S and S is executed for all MFPs existing in a distance over which wireless communication can be performed). Thereafter, the object MFP is identified in S and data communication is executed with the object MFP in S. In a configuration in which communication is directly performed with the first to third MFPs  to , wireless communication which conforms to a wireless LAN ad-hoc mode (a mode in which a plurality of wireless LAN terminal devices perform direct data communication without access points) can be used instead of Bluetooth.","A second embodiment will now be described. The second embodiment is a mode in which another example of finalization processing is used in the communication system  illustrated in . A predetermined sequence when sequentially selecting the first to third MFPs  to  is stored in advance in the set value storage area . As an example, a case will be described in the second embodiment in which a predetermined sequence expressed as the first MFP , the second MFP , the third MFP , the first MFP  . . . is stored. As an example, a case will be described in which the first MFP  is selected as an object MFP. Since the second embodiment is otherwise configured the same as the communication system  according to the first embodiment, a detailed description will be hereby omitted.","A specific example of operations of the communication system  according to the second embodiment will now be described with reference to  and the flow chart shown in .  shows a flow performed by the mobile phone . The operation flow shown in  is a flow that is performed in place of the operation flow shown in  in the first embodiment. Here, since operations shown in  are the same as in the first embodiment, a detailed description will be omitted. In S in , the CPU  causes a description of \u201cSelect new MFP next in sequence as a temporarily selected MFP?\u201d to be displayed on the panel  of the mobile phone . When the YES button of the button input unit  is pressed (S: YES), the CPU  advances to S, and when the NO button is pressed (S: NO), the CPU  advances to S.","In S, the CPU  determines whether or not finalization processing has been performed within a predetermined period of time. The predetermined period of time may be determined in advance by the user or the like and stored in the set value storage area . When the finalization processing had not been performed within the predetermined period of time (S: NO), the CPU  advances to S. Here, since contents of operations in S to S in  are the same as the contents of operations in S to S in , a detailed description will be hereby omitted. Accordingly, when the predetermined period of time elapses (S: NO) without selection of an MFP that is next in order (S: NO), the MFP having the next predetermined sequence is automatically selected as the new temporarily selected MFP (S).","On the other hand, in S, when the OK button is pressed within the predetermined period of time and the finalization processing is performed (S: YES), the CPU  advances to S. Here, since contents of operations in S to S in  are the same as the contents of operations in S to S in , a detailed description will be hereby omitted. Accordingly, an action is performed for finalizing the MFP being selected as the temporarily selected MFP at the point where the OK button is pressed as the object MFP.","As described above, the communication system  according to the second embodiment turns on the indicator light  for a predetermined period of time for each occasion in the predetermined sequence expressed as the first MFP , the second MFP , the third MFP , the first MFP , . . . and so on. Subsequently, by having the user press the OK button of the mobile phone  at a timing when the indicator light  of the first MFP  with which the user desires to perform data communication is being turned on, the first MFP  can be selected as the object MFP. Accordingly, since an action that sequentially temporarily selects MFPs is automatically performed by the mobile phone , the object MFP can be decided by pressing the OK button at the timing when the indicator light  of the MFP which the user desires to select is on. Therefore, convenience of the user can be improved.","In the operation example according to the second embodiment, a temporal selection action by the user is not required. Therefore, the flow for temporal selection can be omitted. Specifically, in the flow shown in , the acquisition of direction information (S) can be omitted. In the flow shown in , the calculation of the relative direction and the relative distance (S) can be omitted. In the flow shown in , the flow for selecting an MFP having the highest selection priority  (S to S) can be omitted.","A third embodiment will now be described. In the third embodiment, a server  is used in the communication system  illustrated in . Processing that is performed by the mobile phone  in the first embodiment is divided in the third embodiment between a server and a mobile phone . A storage unit  of the server  stores a storage table TB. Operations of the communication system  according to the third embodiment will now be described with reference to .  show flows performed by the mobile phone .  show flows performed by the server .","Flows performed by the mobile phone  will be described. In S in , a CPU  of the mobile phone  determines whether or not an operation unit (an acceleration sensor , a compass unit , a button input unit , or the like) has received an operation input by a user. When an operation input has not received (S: NO), the CPU  returns to S. On the other hand, when an operation input has been received (S: YES), the CPU  advances to S. In S, the CPU  causes the wireless transceiver unit  to transmit information regarding the operation input (information indicating an orientation acquired by the compass unit , an acceleration measured by the acceleration sensor , image data acquired by the camera unit , or the like) to the server  via wireless communication , an access point , and the Internet .","In S, the CPU  uses an API to acquire information indicating the orientation of the mobile phone  from the compass unit . The CPU  then calculates direction information and stores the same in the storage unit . The CPU  causes the wireless transceiver unit  to execute processing for transmitting the direction information to the server  via wireless communication , the access point , and the Internet .","In S, the CPU  executes acquisition and transmission of second data. Detailed contents of the flow for acquiring and transmitting the second data will now be described with reference to . In S, the CPU  performs wireless communication  conforming to an infrastructure mode with the access point . In S, using the wireless transceiver unit , the CPU  broadcasts first data by wireless communication  conforming to the wireless LAN infrastructure mode. Consequently, first to third MFPs  to  receive the first data via an access point. In S, the CPU  determines whether the second data has been returned from the first to third MFPs  to . Specifically, a determination is made on whether or not data including the identification information of the mobile phone , MFP identification information (IP address), and return information has been received. When the second data has been received (S: YES), the CPU  advances to S to temporarily store the second data in the storage table TB.","On the other hand, when the second data has not been received (S: NO), the CPU  advances to S to determine whether or not a reply wait time for the second data has elapsed. When the reply wait time had not elapsed (S: NO), the CPU  returns to S, and when it had elapsed (S: YES), the CPU  advances to S. In S, the CPU  acquires location information of the mobile phone  calculated by the GPS unit . The acquired location information of the mobile phone  is temporarily stored in the storage unit . In S, the CPU  causes the wireless transceiver unit  to execute processing for transmitting the second data and the location information of the mobile phone stored in the storage unit  to the server . The acquisition flow of second data is finished and a return is made to S ().","In S, the CPU  receives a notification executing instruction from the server . In S, the CPU  determines whether or not a canceling action of the temporal selection has been executed by the user. When the canceling action has been executed (S: YES), the CPU  advances to S to cause the wireless transceiver unit  to execute processing for transmitting cancellation information to the server . On the other hand, when the canceling action has not been executed (S: NO), the CPU  advances to S to cause the wireless transceiver unit  to execute processing for transmitting information on whether or not finalization processing has been executed by the mobile phone  to the server . The flow performed by the mobile phone  is then finished.","A flow performed by the server  will be described. In Sin , a CPU  of the server  determines whether or not an operation input received from the mobile phone  satisfies the trigger condition. When the trigger condition is not satisfied (S: NO), the CPU  returns to S, and when the trigger condition is satisfied (S: YES), the CPU  advances to S. In S, the CPU  receives the direction information from the mobile phone .","In S, the CPU  executes a flow for acquiring the relative direction and the relative distance. Detailed contents of the flow for acquiring the relative direction and the relative distance will be described with reference to . In S, the CPU  receives the second data and location information of the mobile phone  from the mobile phone  and causes the storage unit  to store the same. In S, the CPU  extracts the IP addresses  of the MFPs and the MFP location information  from the second data. The CPU  associates the MFP location information  and the IP address  to each MFP and causes the storage table TB of the storage unit  to store the same. In S, the CPU  calculates the relative direction  and the relative distance . The calculation of the relative direction  and the relative distance  is performed based on the location information of the mobile phone  and the MFP location information  stored in the storage unit . The calculated relative direction and relative distance are temporarily stored in the storage table TB as the relative direction  and the relative distance  of the MFP.","In S, the CPU  determines whether or not the relative direction  and the relative distance  have been calculated for all MFPs which have returned the second data. If calculated (S: YES), the CPU  ends the flow, and if not calculated (S: NO), the CPU  advances to S. In S, the CPU  selects an MFP for which the relative direction and the relative distance have not been calculated and then returns to S. Accordingly, the relative direction  and the relative distance  can be acquired for all MFPs which have returned the second data.","Returning now to the flow shown in , in S, the CPU  performs a flow for selecting an MFP having a highest selection priority . Since details of Sare the same as those of S to S in , a description thereof will be omitted. In S, the CPU  selects the MFP having the highest selection priority  and for which is stored the flag  indicating that the MFP is a selection candidate as a temporarily selected MFP. In S, the CPU  causes the communication unit  to execute processing for transmitting a notification executing instruction to the temporarily selected MFP and the mobile phone  via the Internet  and the access point .","In S, the CPU  determines whether or not cancellation information has been received from the mobile phone . If the cancellation information has been received, the CPU  advances to Sand causes the communication unit  to execute processing for transmitting a notification terminating instruction to the temporarily selected MFP. On the other hand, when the cancellation information has not been received, the CPU  advances to Sand determines whether or not finalization processing has been executed by the mobile phone .","When it is determined that finalization processing has been executed (S: YES), the CPU  advances to Sto finalize the temporarily selected MFP as the object MFP and to execute data communication. Since details of Sare the same as those of S to S in , a description thereof will be omitted. On the other hand, in S, when it is determined that finalization processing has not been executed (S: NO), the CPU  advances to Sto release the current temporal selection and select a next new temporarily selected MFP. Since details of Sare the same as those of S to S in , a description thereof will be omitted. The flow performed by the server  is then finished.","As described above, with the communication system  according to the illustrated example of the third embodiment, parts of processing for acquiring a relative direction and a relative distance, processing for selecting the temporarily selected MFP, processing for identifying the object MFP, or the like can be performed by the server . As a result, a burden of processing on the mobile phone  and the first to third MFPs  to  can be reduced.","While specific embodiments of the present invention have been described in detail above, such description is for illustrative purposes only and is not intended to limit the scope and claims of the invention. Techniques described in the claims of the invention include various modifications and changes made to the specific examples illustrated above.","Modifications","In the third embodiment, various paths may exist along which the server  acquires the MFP location information , the MFP identification information , location information of the mobile phone , and the like. In the third embodiment, while the server  receives second data including the MFP location information  and the MFP identification information  from the mobile phone , such a mode is not restrictive. For example, MFP location information  for each of the first to third MFPs  to  may be stored in advance in the storage unit  of the server . The server  may receive only location information of the mobile phone  from the mobile phone . In this case, the server  may be configured to search MFPs existing around the mobile phone  by comparing the location information of the mobile phone  with the MFP location information . Accordingly, by transmitting the location information of the mobile phone  to the server , MFP location information  and identification information of MFPs existing around the mobile phone  can be received from the server . As a result, since the first to third MFPs  to  need not include a location measuring device such as the GPS unit , a simplified configuration can be achieved.","Methods of deciding a relative direction  are not limited to the method of S. Alternatively, the relative direction  may be identified based on radio wave characteristics when the mobile phone  receives data from the MFP. Specific examples include providing the mobile phone  with a directional antenna to obtain a relative direction  of an MFP transmitting radio waves. A method is conceivable in which the mobile phone  includes a plurality of antennas, and a relative direction  of an MFP transmitting radio waves can be obtained from a time lag in radio wave reception. As a result, a relative direction  can be acquired even when location information of the mobile phone  or MFP location information  cannot be acquired.","Methods of deciding a relative distance  are not limited to the method of S. A relative distance  may be calculated based on a radio field intensity of wireless communication. As a result, a relative distance  can be acquired even when location information of the mobile phone  or MFP location information  cannot be acquired.","Embodiments of the present teachings is not limited to the configuration in which the mobile phone  receives information indicating a physical location from an MFP, and stores the information in the storage table TB without modification as the MFP location information  of the MFP. Alternatively, the physical location received from the MFP may be converted to any data format that can easily be processed by the mobile phone , and then may be stored as the MFP location information  in the storage table TB.","In S, the CPU  determines the number of MFPs (MFPs existing in front of the user of the mobile phone ) of which a difference between a direction indicated by a horizontal component of the relative direction  and a direction indicated by a horizontal component of the direction information is less than 90 degrees (in other words, in a direction pointed by the speaker  side tip of the mobile phone  or in front as seen from the user of the mobile phone ). The MFPs counted in S are not limited to those with the difference between the direction indicated by the horizontal component of the relative direction  and the direction indicated by the horizontal component of the direction information is less than 90 degrees (e.g., within 90 degrees to the right side from a direction pointed by the speaker  side tip of the mobile phone ). MFPs within minus 90 degrees (e.g.) may also be counted (e.g., within 90 degrees to the left side from a direction pointed by the speaker  side tip of the mobile phone ). The difference between the direction indicated by the horizontal component of the relative direction  and the direction indicated by the horizontal component of the direction information is not limited to 90 degrees; it may be an angle smaller than 90 degrees (e.g. 60 degrees). 60 degrees is an angle included within 90 degrees.","A device having a communication function such as a notebook personal computer can be used instead of the mobile phone . In this case, the communication program  may be various driver software installed in the notebook personal computer. The number of MFPs connected to the communication system need not be limited to three and a large number of MFPs may exist. Communication between the access point  and the first to third MFPs  to  is not limited to a wireless LAN method and a wired LAN method may be used instead.","The external input receiving module for inputting direction information is not limited to the acceleration sensor  or the compass unit . Direction information may be inputted using direction keys provided in the button input unit  by pressing a button of a corresponding direction. In this case, a canceling action may be performed by pressing a button of a direction opposite to the corresponding direction or pressing a button of a direction perpendicular to the corresponding direction. In a case where the panel  is a touch panel, the direction information may be inputted by sliding a fingertip on the panel  in the corresponding direction. In this case, a canceling action may be performed by touching any location on the panel . In a case where the mobile phone  is provided with a 3D sensor or the like, direction information may be inputted by a motion of the fingertip or the like without having to touch the panel . In this case, the canceling action may be performed by moving the fingertip in a direction opposite to the corresponding direction or in a direction perpendicular to the corresponding direction. Direction information may be inputted by using a microphone unit of the mobile phone to issue a voiced instruction. Direction information may be inputted by using the camera unit  to photograph an MFC existing in the corresponding direction. In this case, the canceling action may be performed by pointing the camera unit  in a direction that differs from the corresponding direction.","Various modifications exist for the method of deciding an object MFP. For example, in a case where only one MFP exists in front of the user (S: one) in the flow shown in , the CPU  may decide the MFP as the object MFP in S and subsequently advance to S or S. When a plurality of MFPs exists in front of the user (S: plurality), MFPs that are not selection objects (MFPs not existing in front of the user) can be deleted from the storage table TB in S. Processing of S and thereafter may be performed only on MFPs remaining in the storage table TB. Accordingly, an object MFP can be decided without using the flag .","Various modifications exist for the method of sorting the selection priorities . For example, in place of the processing of S to S (), processing may be performed in which the selection priorities (selection priority group A) are decided only among MFPs stored in the exclusion table TB (or MFPs not stored in the usage table TB) and the selection priorities (selection priority group B) are decided only among the MFPs stored in the exclusion table TB (in other words, the MFPs not stored in the usage table TB). Subsequently, processing for sorting selection priorities  of MFPs stored in the storage table TB may be performed so that a next priority of a lowest priority in the selection priority group A becomes the highest priority among the selection priority group B.","In S, the operation to instruct the finalization of the object MFP may be inputted by the user operating a panel (operation unit) of the MFP that has been selected as the temporarily selected MFP. In this case, the MFP into which the operation by the user is inputted may send information indicating that the aforesaid operation has been inputted to the mobile phone . With the mobile phone  receiving the information indicating that the aforesaid operation has been inputted, the finalization processing is completed.","Furthermore, it is to be understood that the technical elements described in the present specification and the drawings exhibit technical usefulness solely or in various combinations thereof and shall not be limited to the combinations described in the claims at the time of filing. The techniques illustrated in the present specification and the drawings are to achieve a plurality of objectives at the same time, and technical usefulness is exhibited by attaining any one of such objectives.","Each program may be constituted by a single program module or by a plurality of program modules. Each example may adopt another replaceable configuration which is within the context of the present invention. Adoptable configurations include a computer (the CPU  or the like) which executes processing based on a program (the communication program  or the like), a computer which executes processing based on a program other than an image processing program such as an operating system and other applications, a hardware configuration (the panel  or the like) which operates according to an instruction by a computer, and a configuration in which a computer and a hardware configuration work in conjunction with each other. Obviously, adoptable configurations also include a computer which executes processing by coupling processing based on a plurality of programs, and a hardware configuration which operates according to an instruction by a computer which executes processing by coupling processing based on a plurality of programs."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF DRAWINGS","p":[{"@attributes":{"id":"p-0008","num":"0007"},"figref":"FIG. 1","b":"1"},{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 16"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 17"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 18"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 19"}]},"DETDESC":[{},{}]}
