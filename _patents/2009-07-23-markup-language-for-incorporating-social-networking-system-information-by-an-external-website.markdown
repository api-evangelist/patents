---
title: Markup language for incorporating social networking system information by an external website
abstract: A social networking system contains information describing information about users of the social networking system and about various connections among the users. When a user of the social networking system accesses an external website, the external website may send the user a web page containing markup language with instructions to retrieve information associated with a user from a social networking system. The client device processes the annotations and sends a request for social information related to the user to a social networking system, subject perhaps to privacy settings in the social networking system. The user's browser uses the information obtained from the social networking system in response to the request to render the markup language document for display on the user's computer system. This process allows the external website to use information from the social networking system to enhance the user's experience on the external website.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08549072&OS=08549072&RS=08549072
owner: Facebook, Inc.
number: 08549072
owner_city: Menlo Park
owner_country: US
publication_date: 20090723
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["FIELD OF THE INVENTION","BACKGROUND","SUMMARY","DETAILED DESCRIPTION"],"p":["This invention relates to social networking systems and in particular to using information from a social networking system in interactions with an external website outside of the social networking system.","A system, such as a website interacts with a client device by sending information to the client device in response to requests from the client device. The information sent to the client device may be in the form of a markup language document, for example, a hypertext markup language (HTML) document. A markup language document can include instructions to be executed by the client device, for example, instructions to render content provided in the markup language document. A system that allows users to interact with the system typically stores a record for each users of the system. These records may comprise information provided by the user as well as information gathered by the system related to activities or actions of the user on the system. For example, a system may require a user to enter information such as contact information, gender, preferences, interests, and the like in an initial interaction with the system, which is stored in the user's record. A user's activities on the system, such as frequency of access to particular information on the system, also provide information that can be stored in the user's record. The system may then use information provided by the user and information gathered about the user, to constantly customize interactions of the system with the user. For example, a website selling books may keep track of a user's previous purchases and provide the user with information on related books during subsequent interactions with the system. Information in a user's profile may also be used by the system to target advertisements that are of interest to the user. Using information collected from and about users results in a system that is more efficient and beneficial for both the user and the system.","However, prior systems, including websites, lack the ability to use information associated with a user's social connections or activities to customize and\/or personalize the user's experience while using the system. Access to information about the user's social interactions and\/or the activities of a user's social connections (e.g. friends, family, co-workers, etc.) improves the user's experience while using the system and increases the chance that the user will use the system in the future. For example, users visiting a website that sells books may be interested in books that their social connections have looked at, book reviews or comments provided by their social connections, and other social information that might inform their purchases of book from the website. The system itself also benefits, because it can leverage information about the user and the user's social connections to more accurately determine what a user might be interested in. Such a system can use social information to customize a user's experience and target products, services and\/or advertisements to the user.","Typical systems do not possess sufficient information about a user's social connections to customize the user's experience or effectively target advertising to the user. Assembling enough information about a user's social connections for these purposes requires a system to interact with a large number of users over an extended period of time. The majority of websites will not have the resources, expertise, or user base required to build and maintain a system of the scale necessary to capture, organize and maintain a sufficient amount of information about users' social connections and their activities. Thus, users of these systems will have an inferior experience, and the customization\/personalization provided by these sites is unlikely to accurately take into account or reflect information about the user's social connections and their activities.","A social networking system maintains information related to social aspects of its users. This information may be highly valuable to external websites and other systems that do not maintain this information. Embodiments of the invention allow external websites to use information about users of a social networking system and their connections. The external website may use this information for various purposes, for example, to present information related to a user's connections while the user is navigating the external website, or to use a user's information to determine what information (such as advertisements) the external website should present to the user.","Instructions to access a social networking system are provided to a client device in a markup language document sent to the client device by an external system. The markup language document executes the instructions to access the social networking system and obtain social networking information from the social networking system. The markup language document also includes instructions for rendering a webpage on the client device. The client device uses the social networking information for rendering the web page.","In one embodiment the external website presents to the user's client device a markup language document containing instructions for fetching information from a social networking system website. The processing of the instructions in the markup language document by the client device causes a request for information associated with the user to be sent to a social networking system. The requested information is received from the social networking system server. A displayable web page that includes information from the social networking system is then rendered based on the markup language, and the rendered web page is displayed on the user's computer system.","In some embodiments, the request for information provides information identifying the user to the social networking system allowing the social networking system to identify the correct user. The information requested from the social networking system may be associated with the user or with the user's connections. The social networking system ensures that the privacy settings of all the users whose information is being requested are respected. A subset of the requested information based on the privacy settings of all the users whose information is requested is provided to the client device. The markup language document is processed by the client device based on the social networking system information obtained and rendered for display at the client device.","The features and advantages described in this summary and the following detailed description are not all-inclusive. Many additional features and advantages will be apparent to one of ordinary skill in the art in view of the drawings, specification, and claims.","The figures depict various embodiments of the present invention for purposes of illustration only. One skilled in the art will readily recognize from the following discussion that alternative embodiments of the structures and methods illustrated herein may be employed without departing from the principles of the invention described herein.","Interactions Between an External Website and a Social Networking System","A social networking system offers its users the ability to communicate and interact with other users of the social networking system. In use, users join the social networking system and then add connections to a number of other users to whom they desire to be connected. As used herein, the term \u201cconnection\u201d refers to any other user to whom a user has formed a connection, association, or relationship via the website (connections are sometimes referred to herein by using the term \u201cfriend\u201d). A \u201cuser\u201d can be an individual or any other entity represented in a social networking system. Connections may be added explicitly by a user, for example, the user selecting a particular other user to connect to, or automatically created by the social networking system based on common characteristics of the users (e.g., users who are alumni of the same educational institution). Connections in social networking systems may be in both directions, but need not be. The connection between users may be a direct connection; however, some embodiments of a social networking system allow the connection to be indirect via one or more levels of connections. The functionality of a social networking system may be implemented by a social networking system, for example, with a social networking website.","External websites that require information available in a social networking system may be able to access information from the social networking system using application programming interface provided by the social networking system as described in U.S. application Ser. No. 12\/324,761, filed on Nov. 26, 2008, which is incorporated herein by reference in its entirety. Use of application programming interface requires the external website to directly access the social networking system. Alternatively, the external website can present information from the social networking system in the web page by providing instructions to the client device, enabling the client device to retrieve the required information from the social networking system. This mechanism allows the external website to present social networking information in web pages without communicating directly with the social networking system.",{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 1","b":["110","100","130","100","120","110","110","100","120","110","120","130","100","120","110","100","130","140","130","130","140","100"]},"In response to a request  from client device , the external website responds  with a markup language document . A browser application  renders the markup language document  to display it. The markup language document contains instructions, for example, to specify how content is rendered for display or how additional information can be fetched. In some embodiments, the instructions may be in the form of custom tags interpreted by the client device . Alternatively, the instructions may contain program logic interpreted by a scripting engine on the client device . The markup language document  may include instructions for fetching information from the social networking system . An instruction for fetching information from the social networking system  is interpreted by the browser application by sending a request  to the social networking system . The social networking system may respond  with the requested information or with a subset of the requested information. The browser application  renders a web page based on information obtained from the social networking system  along with content obtained from the external website  and displays the web page. In one embodiment, the social networking system can be any system that maintains identities of users and provides data associated with the user.","In one embodiment, the information retrieved from the social networking website comprises information available on the user's profile stored on the social networking system. For example, a profile image of the user may be retrieved and displayed on the client device on a web page of the external website. Alternatively, information posted by the member on the social networking system, for example, the status of the user as indicated on the social networking website can be obtained and displayed on the client device on a web page of the external website. The information retrieved from the social networking system can comprise information related to connections of the user on the social networking system. For example, the information retrieved may include a list of friends or a list of friends of friends of the user. Alternatively, the information retrieved may be a flag indicating whether another user is a friend of the user or not.","System Architecture",{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 2","b":["120","110","100","210"]},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 2","b":["100","100","220","225","240","250","255","245","100"]},"The social networking system  comprises a computing system that allows users to communicate or otherwise interact with each other and access content as described herein. The social networking system  stores user profiles in the user profile store  that describe the users of a social networking system, including biographic, demographic, and other types of descriptive information, such as work experience, educational history, hobbies or preferences, location, and the like. The social networking system  further stores data describing one or more connections between different users in the connection store . The connection information may indicate users who have similar or common work experience, group memberships, hobbies, or educational history. Additionally, the social networking system  includes user-defined connections between different users, allowing users to specify their relationships with other users. For example, these user defined connections allows users to generate relationships with other users that parallel the users' real-life relationships, such as friends, co-workers, partners, and so forth. Users may select from predefined types of connections, or define their own connection types as needed.","The web server  links the social networking system  via the network  to one or more client devices ; the web server  serves web pages, as well as other web-related content, such as Java, Flash, XML, and so forth. The web server  may include a mail server or other messaging functionality for receiving and routing messages between the social networking system  and the client devices . The messages can be instant messages, queued messages (e.g., email), text and SMS messages, or any other suitable messaging technique.","The action logger  is capable of receiving communications from the web server  about user actions on and\/or off the social networking system . The action logger  populates the action log  with information about user actions to track them. Any action that a particular user takes with respect to another user is associated with each user's profile, through information maintained in a database or other data repository, such as the action log . The actions taken by the members that are recorded in the action log may be actions taken on the social networking system  or actions taken on the external website . The actions taken by the member on an external website  are communicated to the web server  and the web server  sends a request to the action logger  to record the actions in the action log . Such actions may include, for example, adding a connection to the other user, sending a message to the other user, reading a message from the other user, viewing content associated with the other user, attending an event posted by another user, among others. In addition, a number of actions described below in connection with other objects are directed at particular users, so these actions are associated with those users as well. When a user takes an action on the social networking system , the action is recorded in an action log . In one embodiment, the social networking system  maintains the action log  as a database of entries. When an action is taken on the social networking system , the social networking system  adds an entry for that action to the log .","The authorization server  enforces the privacy settings of the users of the social networking system. The privacy setting of a user determines how particular information associated with a user can be shared. The privacy setting comprises the specification of particular information associated with a user and the specification of the entity or entities with whom the information can be shared. The entities with which information can be shared may include other users, applications, external websites, or any entity that can potentially access the information. The information that can be shared by a user comprises user profile information like profile photo, phone numbers associated with the user, user's connections, actions taken by the user such as adding a connection, changing user profile information and the like.","The privacy setting specification may be provided at different levels of granularity. For example, the information to be shared may be specific information, such as, work phone number, or a set of related information, such as, personal information including several pieces of related information including profile photo, home phone number, and status. Alternatively, the privacy setting may apply to all the information associated with the user. The specification of the set of entities that can access particular information can also be specified at various levels of granularity. Sets of entities with which information can be shared may include, for example, all friends of the user, all friends of friends, all applications, or all external systems. One embodiment allows the specification to comprise an enumeration of entities, for example, the user may provide a list of external systems that are allowed to access certain information. Another embodiment allows the specification to comprise a set of entities along with exceptions that are not allowed to access the information. For example, a user of a social networking system may allow all external systems to access the user's work information but specify a list of external systems that are not allowed to access the work information. Certain embodiments call the list of exceptions that are not allowed to access certain information a \u201cblock list.\u201d External systems belonging to a block list specified by a user of a social networking system are blocked from accessing the information specified in the privacy setting. Note that various combinations of granularity of specification of information and granularity of specification of entities with which information may be shared are possible, i.e., all personal information may be shared with friends, whereas all work information may be shared with friends of friends.",{"@attributes":{"id":"p-0030","num":"0029"},"figref":["FIG. 3","FIG. 3"],"b":["130","130","305","310","350","305","340","130","355","305","130","305","315","130","325","305","325","330","130","130","130","130"]},"The authorization server  contains logic to determine if certain information associated with a user can be accessed by a user's friends and\/or other applications and entities. For example, an application  that attempts to access a user's work phone number  must get authorization to access the information from the authorization server . The authorization server  decides based on the user's privacy settings if the user's work phone number  can be accessed by the application . Based on the user's privacy settings, the authorization server  decides if the application  is allowed to access information associated with the user .","As discussed above, the social networking system  maintains data about objects with which a user may interact on the social networking system . To this end, the user profile store  and the connection store  store instances of the corresponding type of objects maintained by the social networking system . Each object type has information fields that are suitable for storing information appropriate to the type of object. For example, the user profile store  contains data structures with fields suitable for describing a user's profile. When a new object of a particular type is created, the social networking system  initializes a new data structure of the corresponding type, assigns a unique object identifier to it, and begins to add data to the object as needed. This might occur, for example, when a user becomes a user of the social networking system, the social networking system  generates a new instance of a user profile in the user profile store , assigns a unique identifier to the user profile, and begins to populate the fields of the user profile with information provided by the user.",{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 2","b":["110","280","275","280","220","110","120","120","280","120","120","275","275","120","275","275","120"]},"The client devices  comprise one or more computing devices that can receive user input and can transmit and receive data via the network . For example, the client devices  may be desktop computers, laptop computers, smart phones, personal digital assistants (PDAs), or any other device including computing functionality and data communication capabilities. The client devices  are configured to communicate via network , which may comprise any combination of local area and\/or wide area networks, using both wired and wireless communication systems.","The client device  includes components browser application , script engine , local cache , and social networking system tag library . In alternative configurations, different and\/or additional modules can be included in the client device . In some embodiments, the browser application may be an internet browser that allows users to browse websites on the internet. In other embodiments, the browser application may be an application program that runs in the internet browser. The browser application  provides a user interface for the user to interact with the external website . In some embodiments, the browser application  is capable of sending requests to a website or server and receiving the response from the website or server. In some embodiments, the browser application  is capable of displaying text and graphics and allowing the user to input commands that may cause requests to be sent to websites. The browser application  may store data or information in local cache . The browser application  renders markup language documents received from the external website  for displaying. The browser application  may use the scripting engine  to interpret the markup language document if the markup language document contains program logic for the script engine . An example of a language used for providing instructions in a markup language document that can be executed by the script engine  is JAVASCRIPT. The interpretation of the instructions in the markup language document may require the browser application to interact with other websites or servers, for example, the external website  or the social networking system . In some embodiments, the markup language document contains custom tags for performing specialized tasks not typically provided by the markup language. The interpretation of custom tags requires a custom tag library that provides the program logic that corresponds to each custom tag. An example of a custom tag library is the social networking system tag library  that provides interpretation of specialized tags that allow specific information to be retrieved from the social networking system .","An example of a custom tag that may be provided for retrieving the profile picture of a user from the social networking system is <profile-picture userid=\u201c1234\u201d width=\u201c32\u201d height=\u201c32\u201d \/>. The name of the custom tag is \u201cprofile-picture\u201d and the attributes provided as input are the userid corresponding to the identification of the user and the expected width and height of the image. The browser application  interprets the tag profile-picture by loading the program logic for the custom tag from the social networking system tag library  and using the script engine  to interpret the program logic. For example, to interpret the profile-picture tag, the browser application  may send a request to the social networking system  with the userid, width, and height parameters. The social networking system  may respond with a profile picture of the specified dimensions of the corresponding user.",{"@attributes":{"id":"p-0037","num":"0036"},"figref":"FIG. 4","b":["120","110","120","400","110","400","110","110","405","400","110","110","120","120"]},"A portion of the markup language document may include all the necessary information required for rendering the portion. For example, the portion may include the content of a paragraph of text and all the information necessary for formatting the paragraph. The browser application  can render the portion without requiring any additional interaction with any server\/website. Some other portion of the markup language document may require information from the social networking system for rendering the corresponding portion of the document. A portion of the document that requires information from the social networking system  includes instructions specifying details of the information required from the social networking system. The client device  sends a request  to the social networking system . In some embodiments, the social networking system  checks  whether the user for whom information is requested is a user of the social networking system. In other embodiments, the check  is performed for an initial request from the client device  and a key identifying the user is provided to the client device . The client device  may store the identification key in the local cache  for future use. In subsequent requests, the client device  sends the identification key of the user along with the request, thereby simplifying the process of checking  if the user is a user of the social networking system.","The social networking system  computes  the information requested  by the client device . The information requested may be based on the user profile of the user (including information about the user's actions and interactions on the social networking system and external systems) or based on the user's connections (including the connection's actions and interactions on the social networking system and external systems). The authorization server  of the social networking system  checks the privacy settings of all users whose information is requested to determine the information that can be returned in response to the request . Based on the privacy settings of the users, either the complete set of information requested or a subset of the information requested is sent in a reply  to the client device . The client device  renders  the document based on the information received from the social networking system and the information obtained from the external website  in the markup language document.",{"@attributes":{"id":"p-0040","num":"0039"},"figref":["FIG. 5","FIG. 5"],"b":["500","510","515","520","1","2","270","1","2","150","500","525","535","1","510","2","520","530","500","515","100"]},{"@attributes":{"id":"p-0041","num":"0040"},"figref":["FIG. 6","FIG. 6"],"b":["600","110","610","630","640","670","680","640","650","100","100","660","670","680"]},"In some embodiments the scripting engine  on the client device  optimizes a set of instructions retrieving information from the social networking system in the markup language document. For example, multiple requests to the social networking system  that fetch the same information can be replaced with a single request. Alternatively, multiple requests may be batched together to minimize communication overhead between the client device  and the social networking system  since multiple round trips of messages are replaced by a single round trip of messages.","Some embodiments provide instructions in the markup language document to send a request to the social networking system  specifying conditions for filtering the information retrieved. For example, the condition may specify a location such that a list of friends of the user with addresses in the location is retrieved, or specific information is fetched only if the user's address is within the location. Alternatively, the condition may specify a range of age such that a list of friends with age within the specified range is retrieved, or specific information related to the user is fetched only if the user is within the specified age range. In some embodiment, information in the social networking system is associated with predefined attributes with specific values. The request for information from the social networking system specifies a value of an attribute, such that only content from the social networking system associated with the specified value of the attribute is fetched.","In some embodiments, the social networking system  renders a complete markup language snippet and returns it in response to the client request. This enables the social networking system  to determine the rendering and presentation of the information provided by the social networking system . For example, the external website  may present a user with a web page displaying content from the external website  along with a portion of the web page that resembles information normally displayed on the social networking system. As a result, the external website  presents the user with web pages that present information from social networking system  in a manner that the user is used to seeing on a social networking website.","In some embodiments, the information requested by the client device comprises access control information. For example, the social networking system may provide value of a flag indicating whether the user has access to specific information related to a connection such as the connection's profile photo. The access control information obtained from the social networking system may be used by the external website  to determine if some content from the external website  is displayed to the user.","In one embodiment, the social networking system  stores information related to external websites. For example, the social networking system  can keep track of activities of users of the social networking system on the external website , such as purchases made or comments posted on the external website . A markup language document provided to the browser application  can instruct the browser application  to send a message to the social networking system  to store information associated with actions taken by users on the external website, for example, purchase of an item. A user must grant permission to an external website to provide information to the social networking system. Information related to such permissions may be part of the privacy settings for a user stored on the social networking system . This information can be stored by the action logger  in the action log . Periodically, all actions (or a subset of actions determined to be significant) taken by a user on the external website are analyzed from the action log  and stored in a data structure associated with the profile of the user in the user profile store . The external website  can provide a markup language document to the client device  with instructions to retrieve activities of the user's connections on the external website and present them to the user. This ability is beneficial to the external website since a user is more likely to be interested in an item available on the external website if the user is made aware that a connection of the user demonstrated an interest in the item.","In some embodiments, the instructions provided in the markup language allow the browser application  to open a communication channel between the client device  and the social networking system . The user may be provided with user interface controls on the web page provided by the external website  to communicate with the social networking system . The communication may allow the user to send\/receive information to\/from the social networking system . For example, the communication channel may be used to post comments on the social networking system allowing the user to post messages related to the external website. The ability to perform such activity from a web page of the external website provides a much better user experience compared to a user starting the communication with the social networking system  explicitly, for example, by opening a new internet browser window for this purpose. As a result, the user is more likely to communicate information related to the external website .","Alternative Applications","The foregoing description of the embodiments of the invention has been presented for the purpose of illustration; it is not intended to be exhaustive or to limit the invention to the precise forms disclosed. Persons skilled in the relevant art can appreciate that many modifications and variations are possible in light of the above disclosure.","Some portions of this description describe the embodiments of the invention in terms of algorithms and symbolic representations of operations on information. These algorithmic descriptions and representations are commonly used by those skilled in the data processing arts to convey the substance of their work effectively to others skilled in the art. These operations, while described functionally, computationally, or logically, are understood to be implemented by computer programs or equivalent electrical circuits, microcode, or the like. Furthermore, it has also proven convenient at times, to refer to these arrangements of operations as modules, without loss of generality. The described operations and their associated modules may be embodied in software, firmware, hardware, or any combinations thereof.","Any of the steps, operations, or processes described herein may be performed or implemented with one or more hardware or software modules, alone or in combination with other devices. In one embodiment, a software module is implemented with a computer program product comprising a computer-readable medium containing computer program code, which can be executed by a computer processor for performing any or all of the steps, operations, or processes described.","Embodiments of the invention may also relate to an apparatus for performing the operations herein. This apparatus may be specially constructed for the required purposes, and\/or it may comprise a general-purpose computing device selectively activated or reconfigured by a computer program stored in the computer. Such a computer program may be stored in a tangible computer readable storage medium or any type of media suitable for storing electronic instructions, and coupled to a computer system bus. Furthermore, any computing systems referred to in the specification may include a single processor or may be architectures employing multiple processor designs for increased computing capability.","Embodiments of the invention may also relate to a computer data signal embodied in a carrier wave, where the computer data signal includes any embodiment of a computer program product or other data combination described herein. The computer data signal is a product that is presented in a tangible medium or carrier wave and modulated or otherwise encoded in the carrier wave, which is tangible, and transmitted according to any suitable transmission method.","Finally, the language used in the specification has been principally selected for readability and instructional purposes, and it may not have been selected to delineate or circumscribe the inventive subject matter. It is therefore intended that the scope of the invention be limited not by this detailed description, but rather by any claims that issue on an application based hereon. Accordingly, the disclosure of the embodiments of the invention is intended to be illustrative, but not limiting, of the scope of the invention, which is set forth in the following claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 6"}]},"DETDESC":[{},{}]}
