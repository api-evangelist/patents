---
title: Selective durability in a directory database
abstract: Selective durability in a directory database is presented. A directory database that provides durability processing includes a mechanism where selective attributes for directory resources can turn durability processing off. So, when a directory transaction is encountered having a durability processing turned off, the directory database processes that directory transaction without first flushing the directory transaction from memory to storage.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08180733&OS=08180733&RS=08180733
owner: Novell, Inc.
number: 08180733
owner_city: Provo
owner_country: US
publication_date: 20090319
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND","SUMMARY","DETAILED DESCRIPTION"],"p":["Increasingly individuals and enterprises are conducting affairs over the World-Wide Web (WWW) and the Internet. Enterprises often have backend databases that capture transactions with consumers. For example, an airline has a centralized database that permits consumers to reserve seats on flights of the airline. Because multiple servers may be used to provide high-response and high-availability to the consumers, an airline will likely provide many frontend servers that are capable of accessing the central database. One obvious situation that occurs is if two separate consumers attempt to book a same seat on a same flight. To prevent this from happening, the separate servers communicate with one another via a two-phase commit protocol. So, before the centralized server commits to reserving a seat for a particular consumer the other servers acknowledge the commit and that the seat is being reserved for the particular consumer. Other distributed locking techniques may also be used to ensure that requested seat is not reserved or confirmed more than once.","In the previous example, another situation can arise with a distributed approach to performing transactions against a centralized database. Here, the database can fail before the seat is actually updated as being taken within the database. To ensure that this situation will not deny the consumer the seat that the airline committed to providing the consumer, the transaction is performed as a durable transaction.","Durability guarantees that transactions that have been committed to a database will permanently survive even if the database should fail before the database is actually updated. This is done by flushing the transaction log for the operation from memory to physical storage before the commitment is acknowledged. So, in the example, the centralized database first writes the reservation operation of the consumer to storage and flushes it from memory before the consumer receives an acknowledgement indicating that the seat was reserved. Once the flushed operation is on physical storage, the consumer receives the acknowledgement. Now, even if the database fails the consumer is assured that the seat reserved is his\/her seat because the reservation operation can be replayed from the physical storage if the database fails when the database is brought back online.","One obvious drawback with durability is that the more frequently memory is flushed to storage, the slower performance becomes for users of the database. Often some data and certain types of operations that use durability do not have to do so and may not even be wanted by an enterprise. However, there is no way to turn durability on and off as desired.","Additionally, many enterprises' directories are essentially databases that are distributed and use durability to ensure commits and reliability to distributed users of the enterprise.","Thus, what are needed are improved techniques for selective durability to directory databases.","In various embodiments, cluster-free techniques for selective durability in a directory database are presented. More specifically, and in an embodiment, a method is provided for selective directory database durability. A turn-durability-off setting is received for an attribute of a resource, which is being managed by a directory. Next, a listing is updated for purposes of assigning the turn-durability-off setting to the attribute. Subsequently, a directory transaction is detected that alters the attribute, and the directory transaction is passed to a directory database for processing. Moreover, the directory database is instructed to process the transaction without flushing the directory transaction from memory to storage in response to the turn-durability-off setting included in the listing.","As used herein a \u201cresource\u201d is an addressable and uniquely distinguishable entity, which is represented within a network, such as but not limited to, a user, a service, a group, a website, a domain, a device, a file, a document, an image, a piece of music, a video, a presentation, custom-defined objects, and\/or various combinations of these things, and the like.","Various aspects of this invention discuss usage of a directory service protocol. In an embodiment, that directory service protocol is a Lightweight Directory Access Protocol (LDAP), which is used for querying and modifying directory resources, such as services or objects, that execute or that are accessible within a directory using Transmission Control Protocol (TCP)\/IP. It is noted that in other cases different directory service protocols can be used with the teachings presented herein and below.","A \u201cdirectory\u201d is a set of objects (services) having similar attributes and that are organized in a logical and hierarchical manner over a network. The hierarchy of the directory is often referred to as a \u201ctree,\u201d which uses identifiers, supplied via the Directory Name System (DNS), for structuring and organizing various levels of the tree.","A \u201cdatabase\u201d refers to an interface to content information associated with resources. The content includes metadata about the resources, such as identity information, access information, context information, and the like. The interface (directory service (discussed below)) permits resources and their content to be modified, created, and\/or deleted from the database. So, a database may be viewed as an Application Programming Interface (API) to content maintained for resources within a network.","A \u201cdirectory service\u201d is a directory manager at a higher level interface than the underlying directory service protocol that is accessible by applications and users to manage and access a directory. In an embodiment, the directory service is eDirectory\u00ae distributed by Novell, Inc. of Provo, Utah.","\u201cDurability\u201d refers to processes used with the database that ensure that an operation is guaranteed to occur when acknowledged to a requestor of the operation. Here, in a distributed environment, when a requesting resource requests a modification to the database before the success of the operation is confirmed, the operation and request is flushed from memory of a device to storage. Once on storage, the request can be confirmed or acknowledged because the request and its operation can be processed even if the database fails before the operation is updated to the database. Essentially, the request and its operation are replayed from storage to the database when the database recovers from a failure.","A \u201ctransaction\u201d as used herein refers to a single logical operation on portions of the content or data associated with a directory. Some transactions may be volatile, which means that the data is deleted or modified in some manner. Other transactions may be non volatile, which means that the data is not changed after the transaction, such as a read operation against the data.","According to an embodiment, the techniques presented herein are implemented in eDirectory\u00ae and\/or proxy-based products that are distributed by Novell\u00ae, Inc. of Provo, Utah. Also, in some embodiments, the Operating System (OS) is Linux, such as Suse\u00ae Linux, distributed by Novell\u00ae, Inc. of Provo, Utah.","Of course, the embodiments of the invention can be implemented in a variety of architectural platforms and products. Any particular architectural layout, product, or implementation presented herein is provided for purposes of illustration and comprehension only and is not intended to limit various aspects of the invention.","It is within this initial context, that various embodiments of the invention are now presented with reference to the .",{"@attributes":{"id":"p-0023","num":"0022"},"figref":["FIG. 1","FIG. 1"],"b":["100","100"]},"It is noted that each of the processing descriptions presented herein and below of the selective durability service are executed on the one or more network-based machines.","Also, the selective durability service provides a perspective that permits the selective durability service to be initially configured for selective durability processing as well as proceeding with durability processing.","At , the selective durability service receives a turn-durability-off setting for an attribute of a resource that is being managed by a directory. For example, an attribute for last-successful-login for a user identified as resource \u201cPradeep\u201d includes a setting for turn-durability-off. So, when Pradeep (resource) subsequently and successfully logs into an enterprise network (that runs the selective durability service) processing can proceed as identified below.","In an embodiment, at , the selective durability service dynamically interacts with an administrator. The administrator selectively provides the turn-durability-off setting for one of several attributes assigned to the resource. The other attributes of the resource lack the turn-durability-off setting; so, durability processing is turned on when these other attributes are processed by the directory database (discussed below) for other subsequent directory transactions. Continuing with the example presented at , Pradeep (resource) may also include an attribute for email-address that does not include the turn-durability-off setting; thus, when a subsequent directory transaction is received that modifies the email-address attribute; durability processing by the directory database takes place. That is, the directory database will flush the subsequent directory transaction with the modified email-address attribute to physical storage before the subsequent directory transaction is processed by the directory database and acknowledges the update back to Pradeep as soon as the directory transaction and the modified email-address attribute successfully writes to the physical storage.","Continuing with the embodiment at  and at , the selective durability service interacts with the administrator via a front-end interface to the method  (selective durability service). Therefore, the selective durability service includes a command-driven or Graphical User Interface (GUI)-based interface that permits the administrator to interactively activate a turn-durability-off setting for selective attributes of a resource.","In another case, at , the selective durability service receives an additional setting for the resource indicating that the resource can have durability processing turned back on depending upon subsequent directory transactions taken on the resource. Here, a policy may indicate that a particular attribute of a resource can dispense with durability processing for one type of directory transaction but requires durability processing when another type of directory transaction is detected. For example, the last-successful-login attribute may not require durability processing for a login transaction that occurs within a secure network of an enterprise but may require durability processing for a login transaction that occurs via a remote login transaction where Pradeep is logging into the secure network from an insecure network, since the Internet Protocol (IP) address of where Pradeep originates the request may need to be recorded and captured for audit tracking within the enterprise.","So, durability processing can be turned on and off as desired by resources (e.g., users, administrators, automated services).","At , the selective durability service updates a listing to assign the turn-durability-off setting to the selected attribute of the resource. Here, the selective durability service manages how and what mechanism is being used to subsequently detect the setting on the selected attribute. This can be done in a variety of manners.","For example, at , the selective durability service accesses the listing as a data structure maintained by the method  (selective durability service). Here, the data structure is maintained by the selective durability service outside the directory or separate and apart from the directory. Thus, the data structure may reside in memory, in local storage, and\/or in memory and storage within a local processing environment and local processor associated with the selective durability service.","In an alternative situation, at , the selective durability service accesses the listing as another resource that is maintained within the directory database. Here, the listing is actively maintained by the selective durability service within the directory via the directory database.","At , the selective durability service subsequently (subsequent to the processing at -) and dynamically detects a directory transaction that is attempting to alter the attribute identified at . The selective durability service identifies the type of operation being attempted against the directory along with the parameters associated therewith that include an identifier for the resource and the attribute. In response to this, the selective durability service determines that the operation is a volatile (modifying) operation and that the resource attribute is included in the listing and has the turn-durability-off setting associated with it.","At , the selective durability service dynamically passes the directory transaction to the directory database for processing and further also instructs the directory database to process the directory transaction without flushing the directory transaction from memory to storage. Again, the selective durability service knows how to do this by identifying the resource and its attribute in the listing and identifying that an entry within the listing includes the turn-durability-off setting.","According to an embodiment, at , the selective durability service communicates with the directory database at a database layer of communication within the directory database. So, the processing of the selective durability service is integrated and coupled to the database layer. This permits the selective durability service to inspect and forward directory transactions to the directory database and provide instructions regarding whether durability processing is to take place with any given directory transaction or whether durability processing is to not take place with any given directory transaction.","One now fully appreciates how selective attributes of directory resources can include a setting to turn durability processing on and off while other attributes of the same resource or other resources have the contrary processing being performed (so if durability processing is on for one attribute of a resource, durability processing can simultaneously be off for another attribute of the same resource). When durability processing is selectively turned off, the directory database processes the given directory transaction without first flushing the directory transaction from storage to memory. Such selective durability processing can improve the processing throughput of directory transactions. Especially, in large scale distributed directories.",{"@attributes":{"id":"p-0038","num":"0037"},"figref":["FIG. 2","FIG. 2"],"b":["200","200"]},"The directory service presents another and in some cases an enhanced perspective of the selective durability service represented by the method  of the  and presented in detail above.","At , the directory service receives a directory transaction for execution against a directory database. Receipt of the directory transaction can occur in a variety of manners.","For example, at , the directory service intercepts the directory transaction within a database layer of communication of a directory database before the directory database has an opportunity to execute the directory transaction. Thus, the directory service is integrated into the database layer of communication so as to permit interception and receipt of incoming directory transactions occurring over the network from requestors (types of resources, such as users and\/or automated services).","In another case, the directory service can be configured as a reverse proxy for the directory database, such that requestors and the directory database are unaware of the presence of the directory service. Here, processing may not be as efficiently done as it is at  but the directory service can be integrated into existing directories with minimal configuration and effort.","At , the directory service determines that the directory transaction is a volatile transaction to data associated with an attribute of a resource, which is being managed by the directory database. Examples for initially configuring this scenario for detection and for detecting this scenario were provided in detail above with reference to the method  of the .","According to an embodiment, at , the directory service recognizes the directory transaction as being a write operation, a delete operation, and\/or a modify operation. The write operation can include creation. Essentially, any operation that alters values associated with the attribute that is flagged for the resource can be detected by the directory service. Policy or initial configuration of the directory service can be used to permit the directory service to dynamically recognize the volatile transactions or operations.","At , the directory service acquires a setting for the attribute, which indicates that durability processing is to be turned off for the directory transaction that was recognized and that is attempting to modify the attribute. Again, example processing for achieving this was presented in detail above with reference to the method  of the .","For example, at , the directory service detects an identifier for the attribute with the volatile transaction and locates that identifier in a listing of other attributes that are to have durability processing turned off. That is, the mere presence of the identifier for the attribute within the listing implies or informs the directory service that durability processing is to be turned off. Essentially, the listing includes an entry for each resource and an attribute identifier combination, which if present instructs the directory service to turn durability processing off at the directory database level of processing.","In another case, at , the directory service indexes and identifier for the attribute into a listing to determine that an entry, within the listing, for the identifier indicates that durability processing is to be turned off via a presence of the setting within the entry for the identifier. So, unlike the processing at  the processing at  uses the directory database's entry listing for the resource and its identifier to include a setting value on an attribute or a property of the attribute, which if set to turn-durability-processing-off indicates to the directory service that durability processing can be dispensed with for this particular attribute of the resource.","At , the directory service passes the directory transaction for execution to the directory database and also concurrently indicates to the directory database that the directory database is to process the directory transaction without first flushing the directory transaction from memory to physical storage. Since the directory transaction is processed without memory being flushed to physical storage, the transaction experiences a more rapid response from the directory database and improves overall processing throughput of the directory database for other concurrent requests being made by other requestors of the directory over the network.","According to an embodiment, at , the directory service instructs the directory database to do a full entry log for the directory transaction when the directory database uses a differential approach to reconstruct the results of the directory transaction and when subsequent directory transactions (associated with the attribute) can permissibly and selectively turned back on. That is, if version control of the directory database uses an approach where only the differences and the operation to apply are recorded in physical storage, then should a subsequent directory transaction on the attribute turn durability back on, then the directory database will not have sufficient information to rebuild what occurred before. So, the processing at  ensures that if the directory database is using a differential approach and the attribute can turn durability back on depending upon the context or type of directory transaction being processed, then the directory service tells or instructs the directory database to do full entry logs on changes for directory transactions that have durability processing turned off. This permits the directory database to use the differential approach against subsequent directory transactions that can turn durability processing back on after it was previously turned off via the processing at -.","In another situation, at , the directory service provides the directory transaction and the instruction for processing that directory transaction without durability processing (e.g., process the directory transaction without flushing it from the memory to the storage first) to the directory database at a database layer of communication within the directory database. That is, the directory service is integrated within the database communication layer of the directory.","In another situation, at , the entire directory service and its processing is implemented and is executed as an agent service of the directory database. In other words, the directory service is part of the directory system including the API associated with the directory database.",{"@attributes":{"id":"p-0052","num":"0051"},"figref":["FIG. 3","FIGS. 1 and 2"],"b":["300","300","100","200","300"]},"The selective durability directory database system  includes a directory database  and a directory agent . Each of these components and their interactions with one another will now be discussed in turn.","The directory database  is implemented in a computer-readable storage medium and executes on one or more processors of the network. Example aspects of the directory database  were presented in detail above with reference to the methods  and  of the , respectively.","In an embodiment, the directory database  is a directory manager that is modified to achieve the teachings presented herein and above, such as an enhanced version of eDirectory\u00ae, which is distributed by Novell, Inc., of Provo, Utah. Of course it is understood that the directory and corresponding directory database  can be any modified and enhanced version of existing directories or directory managers that are modified and enhanced to interact with the directory agent  in the manners discussed herein above and below.","The directory agent  is implemented in a computer-readable storage medium and also executes on one or more processors of the network. Example processing associated with the directory agent  was presented in detail above with reference to the methods  and  of the , respectively.","During operation, the directory database  interacts with the directory agent  for purposes of processing directory transactions and managing directory resources. The directory agent  determines at some point during processing that a particular directory transaction is associated with a setting for an attribute of a resource. The setting is an indication to the directory agent  that durability processing is to be turned off for that particular directory transaction. The directory agent  passes the particular directory transaction to the directory database  with an instruction that the directory database  is to process the particular directory transaction without flushing that particular directory transaction from memory to storage (durability processing selectively and dynamically configured to be turned off for this particular directory transaction having this particular attribute for this particular resource).","In an embodiment, the directory agent  determines that the setting is set for the attribute by locating an entry in a listing for an identifier associated or assigned to the attribute. This scenario was discussed above with reference to the method  of the .","In another case of the previous embodiment, the directory agent  maintains the listing within the directory database . Again, this scenario was discussed above with reference to the method  of the .","Still continuing with the listing embodiment, in an alternative situation to the very last embodiment, the directory agent  maintains the listing independent and separate from the purview of the directory database . Once again, this scenario was discussed above with reference to the method  of the .","According to an embodiment, the setting is originally provided, set, and\/or configured by an administrator. The administrator selectively provides the setting for the attribute when other attributes associated with the resource do not including the setting. The other attributes that do not have the setting ensure that other directory transactions that use these other attributes will have the durability processing turned on. So, the other directory transactions are to be flushed from the memory to the storage by the directory database  before those other directory transactions are processed by the directory database .","In another case, the directory agent  also instructs the directory database  to do a full entry log on the particular directory transaction because subsequent directory transactions that utilize the attribute can entail selectively turning back on durability processing. This situation was discussed in detail above with reference to the methods  and  of the , respectively.",{"@attributes":{"id":"p-0063","num":"0062"},"figref":["FIG. 4","FIGS. 1-2","FIG. 3"],"b":["400","400","100","200","300","400"]},"The selective durability directory database system  is another and in some cases enhanced perspective to the selective durability directory database system  represented by the  and presented above.","The selective durability directory database system  includes a directory agent interface  and a directory agent . Each of these components and their interactions with one another will now be discussed in turn.","The directory agent interface  is implemented in a computer-readable storage medium and executes or processes on a processor of the network. Example aspects of the directory agent interface  were presented above with reference to the method  of the .","The directory agent interface  interacts with an administrator to selectively provide or configure a setting for particular attributes of a resource. The setting indicates that durability processing for a directory database is to be turned off for these particular attributes during volatile directory transactions or for specific directory transactions.","According to an embodiment, the directory agent interface  maintains a listing of the particular attributes having the setting for the directory agent  to dynamically access and inspect on receipt of directory transactions.","In an alternative situation, the directory agent interface  updates entries in the directory database for resources to include the setting on the particular attributes.","So, the listing can be maintained within the directory or independent of the directory.","The directory agent  is implemented in a computer-readable storage medium and executes or processes on the same processor as the directory agent interface  or an entirely different processor of the network. Example processing associated with the directory agent  was presented in detail above with reference to the methods  and  of the , respectively, and with reference to the system  of the .","The directory agent  inspects directory transactions that are directed to the directory database for processing. When a particular directory transaction includes the setting for one of the particular attributes having the setting, the directory agent  instructs the directory database to process or execute the particular directory transaction without flushing that particular directory transaction from memory to storage (that is, without durability processing turned on).","One now fully appreciates how selective attribute-based durability processing can be achieved within directory databases. This can significantly improve the processing throughput of large-scale distributed directories by reducing Input\/Output (I\/O) instructions that flush to storage, when such instructions are not needed or desired by an administrator of a network.","The above description is illustrative, and not restrictive. Many other embodiments will be apparent to those of skill in the art upon reviewing the above description. The scope of embodiments should therefore be determined with reference to the appended claims, along with the full scope of equivalents to which such claims are entitled.","The Abstract is provided to comply with 37 C.F.R. \u00a71.72(b) and will allow the reader to quickly ascertain the nature and gist of the technical disclosure. It is submitted with the understanding that it will not be used to interpret or limit the scope or meaning of the claims.","In the foregoing description of the embodiments, various features are grouped together in a single embodiment for the purpose of streamlining the disclosure. This method of disclosure is not to be interpreted as reflecting that the claimed embodiments have more features than are expressly recited in each claim. Rather, as the following claims reflect, inventive subject matter lies in less than all features of a single disclosed embodiment. Thus the following claims are hereby incorporated into the Description of the Embodiments, with each claim standing on its own as a separate exemplary embodiment."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 4"}]},"DETDESC":[{},{}]}
