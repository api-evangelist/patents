---
title: Position determination in a wireless communication system with detection and compensation for repeaters
abstract: Techniques to detect whether or not a remote terminal is under the coverage of a repeater within a wireless communication network, which may be based on (1) a list of base stations expected to be received while under the repeater's coverage, (2) the characterized environment of the repeater, and/or (3) the propagation delays for a transmission received at the remote terminal. Additional ambiguity resulting from being under a repeater's coverage may also be accounted for and/or compensated by (1) discarding time measurements from repeated base stations, (2) adjusting the processing for position estimation to account for the additional ambiguity due to the repeater, (3) computing a series of position estimates based on multiple transmissions received from the same originating base station and selecting the best estimate, and/or (4) computing a series of position estimates based on multiple transmissions from multiple originating base stations and selecting the best estimate.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07039418&OS=07039418&RS=07039418
owner: Qualcomm Incorporated
number: 07039418
owner_city: San Diego
owner_country: US
publication_date: 20010803
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["RELATED APPLICATIONS","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE SPECIFIC EMBODIMENTS"],"p":["This application claims priority to U.S. Provisional Application No. 60\/249,846, filed Nov. 16, 2000.","1. Field of the Invention","The present invention relates to communication. More particularly, the present invention relates to a novel and improved method and apparatus for determining position of a remote terminal in a wireless communication system, wherein repeaters are detected and compensated.","2. Description of the Related Art","Wireless communication systems are widely employed to support communication for a large number of users. Such systems include CDMA, TDMA (e.g., GSM), and other commonly deployed systems. In a wireless communication system, a user on one remote terminal is able to communicate with another user on another remote terminal (or a wireline unit) via a wireless link to a base station. Each base station is designed to coordinate and facilitate the communication between the remote terminals within its coverage area.","Some wireless communication networks employ repeaters to provide coverage for designated areas within the network or to extend the coverage of the network. For example, a repeater may be used to cover a particular region within a network not covered by a base station due to fading conditions (i.e., a hole within the network). Repeaters may also be used to extend coverage into rural areas (e.g., along a freeway) that are outside the coverage area of the base stations.","A repeater is a high-gain bi-directional amplifier placed in a network to receive, amplify, and retransmit a modulated signal. On the forward link, a signal from a \u201cdonor\u201d sector (also referred to as a serving base station) is provided to the repeater via a directive antenna or a cable (e.g., a coaxial or fiber optic cable). The repeater then filters, amplifies, and retransmits the donor signal to the remote terminals in the repeater's coverage area. Correspondingly, on the reverse link, the repeater receives signals from the remote terminals within its coverage area, conditions and retransmits the signals to the base station.","Besides facilitating communication between users, a wireless communication system may be designed with the capability to determine the position of a remote terminal. In fact, the Federal Communications Commission (FCC) has mandated support for an enhanced emergency 911 (E-911) service whereby the location of a remote terminal in a 911 call is required to be sent to a Public Safety Answering Point (PSAP).","For position determination, a remote terminal within a wireless communication system typically measures the arrival times of the transmissions from a number of base stations. The differences between the signal arrival times can be computed and translated into pseudo ranges, which are then used to determine the position of the remote terminal.","Various challenges are encountered in measuring the signal arrival times in a network that employs repeaters. These repeaters introduce additional delays in the remote terminal's time measurements, with the amount of additional delays being unknown in many instances. The additional delays typically cannot be accurately compensated for by the network because it may not be known with certainty whether or not a remote terminal is under the coverage of a repeater. This uncertainty in the sources for the time measurements can result in an inaccurate estimate of the remote terminal's position and\/or an increase in the processing required by the remote terminal to determine its position.","Therefore, it is highly desirable to develop techniques that can detect whether or not a remote terminal is under the coverage of a repeater, and to possibly account for the additional delays introduced by the repeater, in determining the position of the remote terminal. These techniques may lead to improved accuracy in the estimated position of the remote terminal and may further reduce the amount of processing required for position determination.","The invention provides various techniques to detect whether a remote terminal is under the coverage of a repeater within a network so that the processing to estimate the remote terminal's position can account for the additional ambiguity typically associated with the repeater. In accordance with various aspects of the invention, a determination of whether the remote terminal is under the coverage of a repeater may be achieved based on (1) a list of base stations expected to be received while under the coverage of the repeater (i.e., a probable neighbor list) versus a list of base stations actually received by the remote terminal, (2) the characterized environment of the repeater, (3) the propagation delays for a transmission received at the remote terminal, (4) some other criteria, or (5) a combination thereof.","The invention further provides techniques to account and\/or compensate for the additional ambiguity resulting from being under the coverage of a repeater. In one aspect, time measurements from repeated base stations may be discarded and not used to estimate the remote terminal's position. In another aspect, the processing to estimate the remote terminal's position may be adjusted to account for the additional ambiguity (e.g., a search window may be widened). In yet another aspect, more than one multipath received from the same originating base station by the remote terminal may be used to compute a series of position estimates for the remote terminal, and the most likely estimate is selected.","Various aspects, embodiments, and features of the invention are described in further detail below.",{"@attributes":{"id":"p-0033","num":"0032"},"figref":["FIG. 1","FIG. 1"],"b":["100","100","100","104","102","104","104"],"i":["a ","c "]},"One or more repeaters  may be employed with a particular base station  to provide coverage for regions within the cell that would not otherwise be covered due to fading conditions (such as region shown in ) or to extend the coverage of a network (such as regions and ). Each repeater  couples directly or through another repeater to an associated base station  via a wireless or wireline link (e.g., a coaxial or fiber optic cable). Any number of base stations within the network may be repeated, depending on the particular network design.","A number of remote terminals  are typically dispersed throughout the network (only one terminal is shown in  for simplicity). Each remote terminal  may communicate with one or more cells on the forward and reverse links at any moment, depending on whether the remote terminal is in soft handoff. Typically, one of the cells (e.g., cell ) is designated as the serving cell (i.e., the reference cell) and the other cells are neighbor cells.","A number of base stations  typically couple to a base station controller (BSC)  that coordinates the communication for these base stations. For position determination, base station controller  typically couples to a Position Determining Entity (PDE)  that receives time measurements from the remote terminals and provides control and other information related to position determination, as described in further detail below.","For position determination, remote terminal  measures the arrival times of the transmissions from a number of base stations . For a CDMA network, these arrival times can be determined from the phases of the pseudo-noise (PN) codes used by the base stations to spread the signals prior to transmission to the remote terminal. The PN phases detected by the remote terminal are then reported to PDE  via (e.g., IS-801) signaling. PDE  then uses the reported PN phase measurements to determine pseudo-ranges, which are then used to determine the position of the remote terminal.","The position of remote terminal  may be determined using a hybrid scheme whereby signal arrival times (i.e., times of arrival (TOA)) are measured for one or more base stations  and one or more Global Positioning System (GPS) satellites . The time measurements for the GPS satellites can be used as the primary measurements or to supplement the time measurements for the base stations. The time measurements for GPS satellites are typically more accurate than those from the base stations but require clear line-of-sight to the satellites. Thus, the use of GPS may be limited to outdoor use where obstructions may not be present, and is typically not available for use indoors or in applications where there are obstructions such as foliage or buildings. However, GPS has extensive coverage and four or more GPS satellites can (potentially) be received from virtually anywhere.","In contrast, base stations are typically located in populated areas but their signals are able to penetrate some buildings and obstructions. Thus, the base stations may be advantageously used to determine position within cities and (potentially) within buildings. However, the time measurements for the base stations are typically less accurate because multiple signals may be received at the remote terminal from a particular base station due to multipath.","In the hybrid scheme, each base station and each GPS satellite represents a transmission node. To determine the position of the remote terminal, transmissions from three or more non-spatially aligned nodes (base stations and\/or satellites) are processed. A fourth node may be used to provide altitude and may also provide increased accuracy (i.e., reduced uncertainty in the measured arrival times). The signal arrival times can be determined for the transmission nodes and used to compute pseudo-ranges, which can then be used (e.g., via a trilateration technique) to determine the position of the remote terminal. Position determination can be achieved in accordance with the techniques described in the aforementioned 3GPP 25.305, TIA\/EIA\/IS-801, and TIA\/EIA\/IS-817 standard documents and in U.S. Pat. No. 6,353,412.","In accordance with an aspect of the invention, remote terminal  detects the signal arrival times for base stations  and reports the time measurements to PDE . PDE  in turn uses the measurements to determine an initial estimate of the possible positions of remote terminal  and may further instruct the remote terminal to use a set of time windows to search for transmissions from a set of GPS satellites . The search windows are determined by PDE  based on the measurements from remote terminal  and possibly from additional information available to the PDE. Generation of the search windows is described in further detail below.","Each GPS satellite  continually transmits a message that includes the time at which the message was transmitted. The message is spread with a pseudo-noise (PN) code having a specific length and offset assigned to the GPS satellite. The remote terminal receives the GPS transmission, despreads the received signal with the same PN code, but at various time offsets within a particular range defined by the search window, and recovers the message. The PN offset used by the remote terminal to recover the GPS transmission is indicative of the time difference between the GPS satellite and the remote terminal, and is also indicative of the signal arrival time.","The remote terminal typically searches within a particular search window (i.e., a particular range of PN offsets) in an attempt to recover the GPS transmission. A larger search window translates to longer search time, which may be used to ensure that a GPS transmission in a wider range of time offsets can be found by the remote terminal. Alternatively, a smaller search window translates to a shorter search time, which is more desirable, but requires additional information to indicate that the GPS transmission is likely to be found within that smaller range of time offsets.","In the example shown in , remote terminal  may receive transmissions from GPS satellites through , base stations and (and possibly base station ), and repeater . Remote terminal  measures the signal arrival times of the transmissions from the satellites, base stations, and repeater, and reports these time measurements to PDE  via BSC .","As noted above, repeaters can be used to provide coverage for regions not covered by the base stations. Repeaters are more cost effective than base stations, and can be advantageously deployed where additional capacity is not required (e.g., in rural areas). However, a repeater is associated with additional delays due to (1) circuitry within the repeater and (2) cabling and\/or additional transmission associated with the repeater. As an example, surface acoustic wave (SAW) filters, amplifiers, and other components within the repeater introduce additional delays that are comparable to, or may be even greater than, the transmission delays from the base station to the remote terminal.",{"@attributes":{"id":"p-0046","num":"0045"},"figref":"FIG. 2A","sub":"BT","b":["212","212"]},{"@attributes":{"id":"p-0047","num":"0046"},"figref":"FIG. 2B"},"To illustrate the uncertainty in the remote terminal's position due to the use of a repeater with a cell, an assumption can be made that no additional delays are introduced by the repeater. The signal arrival time measured at the remote terminal can be translated into a range R. This range represents the range Rfrom the base station to the repeater plus the range Rfrom the repeater to the remote terminal (i.e., R=R+R). The remote terminal may thus be located from (R\u2212R) to (R+R) radially from the base station, which is represented by circles and , respectively. Again, if no additional information is available, the remote terminal may be located anywhere within an area defined by circles and ","The additional delays introduced by the repeater increases the uncertainty of the remote terminal's position. The additional repeater delays can be translated into a range R, which is added to the range Rto obtain the total range R(i.e., the range corresponding to the signal arrival time from the base station to the remote terminal with the repeater delays). This total range Ris represented by a circle in . As shown in , due to the uncertainty resulting from the use of the repeater with the cell and the additional delays introduced by the repeater (if the delays are not known), the remote terminal may be located anywhere within areas and based on the time measurement from the terminal.","The invention provides various techniques to detect whether a remote terminal is under the coverage of a repeater within a network so that the processing to estimate the remote terminal's position can account for the additional ambiguity typically associated with the repeater. In accordance with various aspects of the invention, a determination of whether the remote terminal is under the coverage of a repeater may be achieved based on (1) a list of base stations expected to be received while under the coverage of the repeater (i.e., a probable neighbor list) versus a list of base stations actually received by the remote terminal, (2) the characterized environment of the repeater, (3) the propagation delays for a transmission received at the remote terminal, (4) some other criteria, or (5) a combination thereof.","The invention further provides techniques to account and\/or compensate for the additional ambiguity resulting from being under the coverage of a repeater. In one aspect, time measurements from repeated base stations may be discarded and not used to estimate the remote terminal's position. In another aspect, the processing to estimate the remote terminal's position may be adjusted to account for the additional ambiguity (e.g., a search window may be widened). In yet another aspect, multiple transmissions received from the same originating base station may be used to compute a series of position estimates for the remote terminal, and the most likely estimate is selected. For a CDMA network, an originating base station is one assigned to a specific PN offset. And in yet another aspect, multiple transmissions from multiple originating base stations may be used to compute a series of position estimates for the remote terminal, and again the most likely estimate is selected.","The techniques described herein may be used to more accurately to determine the position of the remote terminal by taking into account the sources for the time measurements and any additional information available for the base station and repeaters. Various aspects, embodiments, and features of the invention are described in further detail below.","Detection of Repeater Based on Probable Neighbor List","An aspect of the invention provides a technique to detect whether a remote terminal is under the coverage of a repeater based on probable neighbor lists formed for the repeaters in the network. In a typical wireless network, the coverage pattern is such that a remote terminal located anywhere within the network is likely to receive signals from a number of transmission sources (i.e., base stations and\/or repeaters). This information can be cataloged and used to determine whether the remote terminal is under the coverage of a repeater.",{"@attributes":{"id":"p-0054","num":"0053"},"figref":"FIG. 3","b":["300","300","106","114","106","104"],"i":["x ","x ","y ","y"]},"As noted above, a repeater is typically employed to solve coverage problem. For example, a repeater may be employed to cover a region (hole) in the network that may be \u201cshadowed\u201d out. Such regions may include, for example, mountains, tunnels, shopping malls, and so on. A repeater may also be used to extend coverage to a new area that cannot be reached by an existing base station. Thus, the probable neighbor list for each repeater is likely to be different from those of other repeaters in the network and would be a subset of the base stations surrounding the base station that is repeated.","In an embodiment, the base stations and repeaters within the network are characterized. This characterization may entail determining the layout of the network, the locations of each base station and repeater within the network, and so on. Additionally, measurements may be made by remote terminals at various locations within the entire network to collect information as to which base stations may be detected in that coverage area. This information can be used to generate a probable neighbor list for the repeater. The process can be performed for each repeater within the network.","The information for a repeater can be collected by measurements made when the repeater is initially deployed. Alternatively, this information can be \u201clearned\u201d from the remote terminal, when operated under the coverage of the repeater, during normal operation. The PDE can generate and maintain the probable neighbor lists for all repeaters located within the network.","Thereafter, if the PDE suspects that a particular remote terminal is under the coverage of a repeater, it can verify this by comparing the sources of the time measurements received from the remote terminal against the probable neighbor lists maintained for the repeaters. The PDE may assign a particular degree of confidence in its assessment of whether the remote terminal is under a particular repeater's coverage.",{"@attributes":{"id":"p-0059","num":"0058"},"figref":"FIG. 4","b":["400","412","414","416"]},"Otherwise, if the remote terminal is suspected to be under a repeater's coverage, the list of base stations from which the time measurements were obtained is determined, at step . This list of received base stations may also be generated by the PDE at step  for the time measurements received from the remote terminal. The list of received base stations is then compared against the probable neighbor list for the repeater under which the remote terminal is suspected to be covered, at step .","Based on the result of the comparison in step , a determination is made whether the remote terminal is under the repeater's coverage, at step . If the answer is no, the search windows for the remote terminal are generated in the normal manner, at step . Otherwise, if the remote terminal is deemed to be under the repeater's coverage, the search windows are generated in a manner to account for the additional ambiguity resulting from being under the repeater's coverage, at step . For example, the search windows may be widened and\/or shifted depending on the detected delays. The process then terminates.","Detection of Repeater Based on Environmental Information","An aspect of the invention provides a technique to detect whether a remote terminal is under the coverage of a repeater based on environmental information collected for repeaters within the network. In an embodiment, the PDE \u201ccatalogs\u201d the environment types for some or all repeaters in the network, with the environment types being descriptive of the repeater's coverage. This cataloged information is thereafter used to determine whether a remote terminal is under the coverage of a repeater.",{"@attributes":{"id":"p-0063","num":"0062"},"figref":["FIG. 5","FIG. 5"],"b":["500","104","104","104","114","114","512","106","104","114","114","104","104","106"],"i":["a ","c ","a ","e ","f ","a ","a ","e ","f","b ","c ","b "]},"In an embodiment, the PDE can note the environment types for the repeaters. In the example shown in , the PDE can note that repeaters and are located within a tunnel and that the obstruction caused by the tunnel would likely block the signals from other base stations. Thus, if the PDE receives only one time measurement from a remote terminal (e.g., remote terminal ) determined to be located in the area between base stations , , and , the PDE can deduce that the time measurement is from a repeater (e.g., repeater or ). Correspondingly, if the PDE receives a number of time measurements for a number of base stations from a remote terminal (e.g., remote terminal ) determined to be located near the same area, the PDE can deduce that the remote terminal is not under the coverage of repeater or . Thus, the cataloged environment type of the repeater's coverage can be used to determine whether or not the remote terminal is under the coverage of a repeater.","In an embodiment, the environment type of a repeater may be cataloged by the type of fading and path loss encountered in the repeater. For example, signals in an urban area generally do not degrade in the same way as they do in a rural or suburban area. Such information may be used to determine which repeater solution to proceed. As an example, in a tunnel, the base station signals will be very weak and the GPS signals are almost undetectable. So if it is concluded from the remote terminal's readings that it is located in a tunnel, then that provides some information as to the remote terminal's position. Also if the particular tunnel is repeated, then proper adjustments can be made on the measurements to determine the position of the remote terminal.","In a rural area, the signals have relatively better path loss (i.e., they do not degrade as much with distance). If it is known how a signal degrades in whatever medium it propagates, the path distance traveled by the signal may be determined. If that distance is deemed much greater than the separation of the remote terminal and base station, the difference can be due to repeaters and accounted for when calculating position.","In an embodiment, the environment type of a repeater is defined with the use of a neighbor list for each repeater. For the example shown in , a terminal under the coverage of repeater is likely to be able to receive only the signal from base station and unlikely to receive the signals from base stations and . Thus, the neighbor list for repeater is empty. However, a terminal under the coverage of repeater may also receive the signal from base station , and the neighbor list for repeater accordingly reflects this (e.g., as shown in Table 1). The neighbor list for base stations may include base stations and , the neighbor list for base station may include base stations and , and the neighbor list for base station may include base stations and .","Table 1 lists the transmission sources for the example shown in  and their neighbor lists.",{"@attributes":{"id":"p-0069","num":"0068"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"98pt","align":"left"}}],"thead":{"row":[{"entry":"TABLE 1"},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}},{"entry":[{},"Repeater",{}]},{"entry":["Transmission Source","Employed","Neighbor List"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Base station 104a","Yes","Base stations 104b and 104c"]},{"entry":["Repeater 114e","\u2014","Empty"]},{"entry":["Repeater 114f","\u2014","Base station 104c"]},{"entry":["Base station 104b","No","Base stations 104a and 104c"]},{"entry":["Base station 104c","No","Base stations 104a and 104b"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}}}},{"@attributes":{"id":"p-0070","num":"0069"},"figref":["FIG. 5","FIG. 1"],"b":["114","114","104","104","104"],"i":["b ","c ","a","b","c. "]},"Detection of Repeater Based on Time of Arrival (TOA) or Round Trip Delay (RTD)","An aspect of the invention provides a technique to detect whether a remote terminal is under the coverage of a repeater based on the time measurements from the remote terminal. This technique exploits known or estimated delays associated with a transmission from a repeater to a remote terminal and known or estimated delays typically associated with the repeater itself to determine whether or not the remote terminal is under the coverage of the repeater. This technique may be used for various network configurations, and is especially applicable for a network configuration in which repeaters are used to extend the coverage of the network, such as repeaters and in .","In an embodiment, the timing of the system may be calibrated. For a base station, the time difference between system time and the timing of the base station's transmission may be determined. And for a repeater, the measured delay between the receive and transmit paths of the repeaters may also be determined. These time measurements may be used to detect whether or not the remote terminal is under a repeater's coverage, as described in further detail below.",{"@attributes":{"id":"p-0073","num":"0072"},"figref":["FIG. 6A","FIG. 6A","FIG. 6A"],"b":["104","106","104","106","610","610","612"],"i":["a","b "],"sub":["BT1 ","BT2"]},{"@attributes":{"id":"p-0074","num":"0073"},"figref":["FIG. 6B","FIG. 6B","FIG. 6B","FIG. 6B"],"b":["104","106","114","106","114","104","104","104","114","612","114","106","114"],"i":"a","sub":"R "},"For , the worst case propagation delays for the transmission from base station  to remote terminal  can be determined as the delays Tassociated with reflected path . And for , the best-case propagation delays Tfor the transmission from base station  to remote terminal  is dependent on the delays Tfrom the base station to the repeater, the delays Tintroduced by the repeater, and the delays Tfrom the repeater to the remote terminal (i.e., T=T+T+T). If there is a time difference (i.e., a gap) between the worst case propagation delays Tfor a transmission from the base station and the best case propagation delays Tfor a transmission from the repeater, then a threshold value can be selected to determine whether the remote terminal is under the coverage of the base station or the repeater. The threshold value can be selected based on the following:\n\n,\u2003\u2003Eq(1)\n\nwhere Tis the worst case propagation delays for a transmission received from the base station (T), Tis the threshold value, and Tis the best-case propagation delays for a transmission received from the repeater (T).\n","Once the threshold value for a repeated base station is selected, the PDE can thereafter compare a time measurement received from the remote terminal for that repeated base station to the threshold value. If the propagation delays indicated by the time measurement is greater than the threshold value, the PDE can deem that the time measurement is for the repeater. Otherwise, if the propagation delays indicated by the time measurement is less than the threshold value, the PDE can deem that the time measurement is for the base station.","Equation (1) assumes that the worst-case propagation delays for the base station is less than the best-case propagation delays for the repeater (i.e., T<T). However, even if there is an overlap between these propagation delays (i.e., T>T), a threshold value can be selected within the range of the overlap to achieve a high likelihood of correctly detecting whether the remote terminal is under the coverage of the base station or the repeater.",{"@attributes":{"id":"p-0078","num":"0077"},"figref":"FIG. 7","b":["700","710","712"]},"At step , a determination is made whether the one-way delays (or RTD) estimate is less than a threshold value that has been selected for the base station based on the factors described above. If the one-way delays estimate is less than the threshold value, the remote terminal is deemed to be under the coverage of the base station and position determination for the remote terminal is performed without considering the additional ambiguity associated with repeaters. Thus, the search windows for the remote terminal can be generated in the normal manner, at step . Otherwise, if the one-way delays estimate is greater than or equal to the threshold value, the remote terminal is deemed to be under the coverage of the repeater and position determination for the remote terminal is performed taking into account the additional ambiguity associated with the repeater. In this case, the search windows for the remote terminal can be generated to account for the repeater, at step . The process then terminates.","Position Determination Based on Selective Measurements","In accordance with an aspect of the invention, position determination for a remote terminal is performed based on selected ones of the time measurements received from a remote terminal. As described above with respect to , the mere use of a repeater and also the additional delays associated with the repeater result in additional ambiguity in the position of the remote terminal. Because of this additional uncertainty, the time measurement for a cell employing a repeater may not be helpful in determining the position of the remote terminal. Thus, in accordance with this aspect of the invention, a time measurement for a repeated base station is not used to determine the position of the remote terminal.","Referring back to , remote terminal  is located within coverage area of repeater and may receive a transmission from base station or repeater , or both, depending on various factors such as the communication link, fading conditions, and so on. Thus, there may be uncertainty as to the actual source of the transmission received by remote terminal  for cell , which may be either base station or repeater . Since the source of the transmission is unclear, there may be greater uncertainty in the estimated position of a remote terminal located in a cell that employs a repeater, as described in further detail below.","The estimated position of a remote terminal may be less accurate if a time measurement for a repeated base station is erroneously equated to a wrong source than if that time measurement was not used at all for position determination. As an example, if the time measurement received for repeater is erroneously equated as being for base station , then remote terminal  may be erroneously estimated as being further from the base station than in actuality. The amount of error is related to the amount of additional delays introduced by the repeater. Alternatively, if the time measurement received for base station is erroneously equated as being for repeater , then remote terminal  will be erroneously estimated as being closer to the base station than in actuality.","In an embodiment, the PDE maintains a list of base stations for which it may receive time measurements and, for each base station in the list, an indication of whether repeaters are employed with the base station. Table 2 is an example of a list maintained by the PDE for the network layout shown in .",{"@attributes":{"id":"p-0084","num":"0083"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"84pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"98pt","align":"left"}}],"thead":{"row":[{"entry":[{},"TABLE 2"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]},{"entry":[{},"Cells","Repeater Employed"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Base station 104a","Yes"]},{"entry":[{},"Base station 104b","Yes"]},{"entry":[{},"Base station 104c","No"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}}}},"For each time measurement reported by the remote terminal, the PDE determines the base station for which the time measurement is associated (i.e., the base station originating the transmission from which the time measurement was derived). The PDE then consults the table to determine whether the time measurement is associated with a base station that employs a repeater (i.e., a repeated base station). If the table indicates that the originating base station is a repeated base station, the PDE can elect to omit this time measurement from being considered in the position determination processing. In this case, the PDE would estimate the position of the remote terminal and\/or compute the search windows for the remote terminal based on time measurements for base station not associated with repeaters (i.e., non-repeated base stations).","Alternatively, the PDE can elect to consider this time measurement associated with a repeated base station in the position determination processing. The PDE would then determine the position of the remote terminal and\/or compute the search windows for the remote terminal taking into account the ambiguity introduced by the repeaters.",{"@attributes":{"id":"p-0087","num":"0086"},"figref":["FIG. 8A","FIG. 8A","FIG. 1"],"b":["106","104","104","104","130","130","104","104","104","130","104","104","104","106","812","104","106","130"],"i":["a","b","c","a ","b ","c","a ","b","c","c "]},{"@attributes":{"id":"p-0088","num":"0087"},"figref":["FIG. 8B","FIG. 8B","FIG. 1"],"b":["106","104","106","816","104","812","104","130"],"i":["a ","a ","c"]},"As described above in , shaded area  results from the uncertainty associated with the deployment of repeater . Depending on the additional delays introduced by repeater , shaded area  may be much larger than that shown in , and may encompass the entire coverage area of base station . In that case, the use of the time measurement for base station may result in more uncertainty than simply omitting this time measurement.",{"@attributes":{"id":"p-0090","num":"0089"},"figref":"FIG. 9","b":["900","912","914","916","940"]},"At step , if any received time measurement is for a repeated base station, a determination is made whether or not any of the repeated base stations is the reference base station, at step . If none of the repeated base stations is the reference base station, the time measurements for the repeated base stations are discarded, at step . The process then proceeds to step .","The reference base station is the base station from which the remote terminal derives its timing. Position is computed by determining the difference in the arrival times of signals from other base stations (i.e., the difference in time between the arriving paths from the reference base station and other base stations). For positioning determination purposes, any reasonably strong received base station may be the reference base station.","At step , if the reference base station is determined to be a repeated base station, a determination is made whether a non-repeated base station can be selected as the reference base station, at step . If the answer is yes, a non-repeated base station is selected as the reference base station, at step , and the time measurements for repeated base stations are discarded, at step . The PDE then determines an initial position estimate for the remote terminal and further generates search windows for the GPS satellites based on the retained time measurements, at step .","Back at step , if the time measurements are from repeated base stations and a non-repeated base station cannot be selected as the reference base station, the time measurements from the repeated base stations are retained, at step . The PDE then appropriately generates search windows to account for the additional ambiguity due to the repeaters, at step .","Generation of Search Windows to Account for Detected Presence of Repeaters","As noted above, the mere presence of repeaters in a network results in additional ambiguity in the estimated position of a remote terminal because it may not be known with certainty whether a transmission is received from a base station or its repeater. Moreover, additional delays introduced by the repeaters also results in additional ambiguity in the remote terminal's estimated position. For a base station that is not associated with a repeater, a remote terminal can be estimated as being located on a circle that surrounds the base station, with the radius of the circle being dependent on the propagation delays estimate from the base station, as shown in . And for a base station that is associated with a repeater, the remote terminal can be estimated as being located on a circular region that surrounds the base station, with the size of the region being dependent on the coverage area of the repeater as well as the additional delays introduced by the repeater, as shown in . The generation of a search window for a GPS satellite to account for the additional uncertainty in the estimated position of a remote terminal due to the use of repeater is described below.",{"@attributes":{"id":"p-0096","num":"0095"},"figref":["FIG. 10A","FIG. 10A"]},"Using trigonometric calculations, the distance between the remote terminal and the GPS satellite can be computed as either c or d, depending on whether the remote terminal is located on the left or right side of the base station, respectively. The search window for this GPS satellite can be computed as a time window that is related to the difference between the distances c and d (i.e., search window \u221d (c\u2212d)). The time offset to the center of the search window is related to the distance b (i.e., time offset \u221d b). The remote terminal may be instructed to search for and acquire the transmission from the GPS satellite based on the search window at the determined time offset.",{"@attributes":{"id":"p-0098","num":"0097"},"figref":["FIG. 10B","FIG. 10B"]},"Using trigonometric calculations, the distance between the remote terminal and the GPS satellite can be computed as either f or g, depending on which side of the base station the remote terminal is located and assuming the remote terminal is located at the distance (e+r) from the base station. Similarly, the distance between the remote terminal and the GPS satellite is determined as either h or i, again depending on which side of the base station the remote terminal is located and assuming the remote terminal is located at the distance (e\u2212r) from the base station. The worst-case difference between these distances is (f\u2212i), and the search window can be computed to be proportional to this worst case difference (i.e., search window \u221d (f\u2212i)).","As indicated in , the additional delays introduced by a repeater further increase the ambiguity in the position of the remote terminal. This additional ambiguity can be accounted for by increasing the search window for the GPS satellite by an amount related to the additional delays introduced by the repeater.",{"@attributes":{"id":"p-0101","num":"0100"},"figref":"FIG. 11","b":["1100","1112","1114","1116"]},"If one or more time measurements for repeated base stations are used to estimate the remote terminal's position, at step , the PDE generates search windows for GPS satellites having enlarged sizes to account for the additional ambiguity in the estimated position due to repeaters, at step . The search windows can be generated based on the technique described above. Otherwise, if none of the time measurements used to estimate the remote terminal's position are from a repeated base station, the search windows are generated in the normal manner, at step . The PDE then instructs the remote terminal to search for GPS satellites using the generated search windows, at step .","Position Determination Using Multiple Time Measurements","In a typical cellular environment, a remote terminal receives multiple signals from a number of transmitting sources (i.e., base stations and\/or repeaters). For a CDMA system, these transmissions may be received and individually processed.","In accordance with an aspect of the invention, the position of the remote terminal is estimated based on a number of transmissions received at the terminal from a particular originating base stations. Each transmission is received at a particular signal level and associated with a particular propagation delays. The remote terminal can process the transmissions received from the base stations and repeaters and report some or all received transmissions (e.g., report transmissions having signal strengths above a particular threshold). The PDE can then use the time measurements for these reported transmissions to estimate the position of the remote terminal. The PDE may select and utilize the time measurements that result in the position estimate having the best confidence. If the PDE determines that the remote terminal is under the coverage of a repeater in the network, then the PDE may instruct the remote terminal to widen or shift the search windows.",{"@attributes":{"id":"p-0105","num":"0104"},"figref":["FIG. 12A","FIG. 12A"],"b":["106","104","114"],"i":["a ","a "],"sub":["BT1 ","RT1"]},"For the example shown in , since remote terminal  is not under the coverage of repeater , the signal strength for the transmission received from the repeater is likely to be weak. And since remote terminal  is under the coverage of base station , the signal strength for the transmission received from the base station is likely to be stronger. A series of position fixes (i.e., position estimates) may be generated by the PDE for the remote terminal based on the received time measurements. The position fix having the best metric can be selected as the estimated position of the remote terminal.","Determination of the position of a remote terminal based on a number of time measurements for a number of transmissions from the same originating base station can be achieved, for example, in a manner described in U.S. Pat. No. 6.289, 280, issued on Sep. 11, 2001 entitled \u201cMETHOD AND APPARATUS FOR DETERMINING AN ALGEBRAIC SOLUTION TO GPS TERRESTRIAL HYBRID LOCATION SYSTEM EQUATIONS,\u201d assigned to the assignee of the present application and incorporated herein by reference. A root mean square error (RMSE) metric can be computed in a manner known in the art for each position fix based on the signal strength associated with each time of arrival (TOA) estimate. Weaker signal strength for a received multipath corresponds to a higher likelihood that the signal has been bounced around. A transmission with weaker signal strength generally corresponds to greater ambiguity in a position fix computed based on this transmission and a correspondingly lower metric. Thus, the position fixes are usually associated with \u201cresiduals\u201d, which are representative of the uncertainty for the estimated position fixes. The computation of the metric is described in further detail in the aforementioned U.S. Pat. No. 6,289,280.",{"@attributes":{"id":"p-0108","num":"0107"},"figref":["FIG. 12B","FIG. 12B"],"b":["106","104","114"],"i":["a ","a "],"sub":["BT2 ","RT2"]},"For the example shown in , since remote terminal  is under the coverage of repeater , the signal strength for the transmission received from the repeater is likely to be stronger than the transmission received from the base station. Again, a series of position fixes can be generated by the PDE for the remote terminal, and the position fix having the best metric can be selected as the estimated position of the remote terminal.",{"@attributes":{"id":"p-0110","num":"0109"},"figref":"FIG. 13","b":["1300","1312"]},"The PDE computes a series of position fixes based on the received time measurements and for various combinations of the multiple time measurements received for a particular base station, at step . Each computed position fix is associated with a respective metric that identifies a particular degree of confidence the computed position fix.","The position fix with the best metric is then selected as the estimated position of the remote terminal, at step . For the selected position fix, a determination is then made whether or not the remote terminal is under the coverage of a repeater, at step . If the answer is no, the search windows for the remote terminal are generated in the normal manner (i.e., without compensating for repeaters), at step . Otherwise, if the remote terminal is estimated to be under the coverage of a repeater, the search windows are generated in a manner to account for the additional ambiguity associated with the repeater, at step . This may entail widening and\/or shifting the search windows depending on the delays, as described above. The process then terminates.","Position Determination Using Cost Functions","In accordance with an aspect of the invention, a determination of whether or not a remote terminal is under the coverage of a repeater can be made by calibrating the base stations and repeaters in a network. In an embodiment, as part of the calibration, the PDE is provided with information on which base station is associated with one or more repeaters, the propagation delays between the base stations and their associated repeaters, the propagation delays between repeaters, and the additional delays introduced by each repeater. This information can be stored in a table maintained by the PDE.","Table 3 is an example of a table that may be maintained by the PDE for the delays associated with repeated base stations for the example network layout shown in . The first column lists the transmission source (i.e., a base station or repeater) and the second column lists whether the base station is repeated. If the base station is repeated, the third column lists the propagation delays from the base station to the first repeater, or from one repeater to the next. And the fourth column lists the additional delays associated with the repeaters.",{"@attributes":{"id":"p-0115","num":"0114"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"5"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"42pt","align":"left"}}],"thead":{"row":[{"entry":[{},"TABLE 3"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"4","align":"center","rowsep":"1"}}]},{"entry":[{},"Transmission","Repeater","Propagation","Repeater"]},{"entry":[{},"Source","Employed","Delay","Delay"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"4","align":"center","rowsep":"1"}}]}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Base station 104a","Yes","T",{}]},{"entry":[{},"Repeater 114a","\u2014",{},"T"]},{"entry":[{},"Base station 104b","No"]},{"entry":[{},"Base station 104c","Yes","T"]},{"entry":[{},"Repeater 114b","\u2014","T","T"]},{"entry":[{},"Repeater 114c","\u2014",{},"T"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"4","align":"center","rowsep":"1"}}]}]}}}}},"For position determination, the remote terminal receives transmissions from the base stations and repeaters in the network and reports to the PDE the time measurements for the received transmissions. In an embodiment, the remote terminal reports one time measurement for each originating base station (i.e., each unique PN offset in a CDMA network). This time measurement may be from a base station or a repeater of a repeated base station, and is typically derived from the earliest and strongest multipath from the transmission source.","The PDE receives from the remote terminal time measurements for a number of base stations (or their associated repeaters). In an embodiment, the PDE then estimates the position for the remote terminal based on the received time measurements and in accordance with a number of hypotheses. Each hypothesis is indicative of a particular guess as to the particular transmission source for each time measurement used to estimate the remote terminal's position. For example, one hypothesis assumes that all received time measurements are from the base stations and not repeaters.","The remaining hypotheses are for various combinations of base stations and repeaters for the received time measurements. For each of these hypotheses, the time measurement for each repeated base station is hypothesized to be for either the base station or a repeater. The time measurement for each hypothesized base station is then compensated by subtracting the delays associated with the transmission from the base station to the repeater and the additional delays introduced by the repeater. Each hypothesis results in one position fix and an associated error metric, which can be computed as described in the aforementioned U.S. patent application Ser. No. 09\/460,180 The PDE then selects the position fix having the best metric (i.e., smallest error). From this selected position fix, a determination can be made whether or not the remote terminal is under the coverage of a repeater based on the hypothesis.",{"@attributes":{"id":"p-0119","num":"0118"},"figref":["FIG. 14","FIG. 1"],"b":["114","104","104","114","104","114","114","104","104"],"i":["a ","b ","c","a ","a ","a ","a","b ","c "]},"Base on the calibration information such as that shown in Table 3, the PDE recognizes that base stations and are repeated base stations. For the first hypothesis, the PDE computes the position of the remote terminal assuming that all received time measurements are from the base stations (i.e., base stations , , and ). Because of the additional delays associated with repeater , the estimated range from base station is further away than actuality, and the remote terminal is estimated to be located at point H.","For the next hypothesis, the time measurement for base station is assumed to be from repeater and the other time measurements are assumed to be from base stations and . The PDE then compensates the time measurement for repeater with the delays stored in the table for base station and repeater . In particular, the PDE subtracts the propagation delays Tfrom base station to repeater and the additional delays Tintroduced by repeater from the time measurement for repeater . The estimated position of the remote terminal for this set of hypothesized time measurements is at point H. Another hypothesis assumes that the time measurement for base station is from repeater . However, the measurement from base station is associated with a low signal level, and this position fix is likely to be assigned a worse metric.",{"@attributes":{"id":"p-0122","num":"0121"},"figref":"FIG. 15","b":["1500","1512","1514","1516","1518"]},"Otherwise, if any of the time measurements is determined to be for a repeated base station, at step , the PDE computes a series of position fixes based on the received time measurements and for various network hypotheses, at step . Each network hypothesis assumes a particular transmission source for the time measurement for each repeated base station (i.e., whether from the transmission source is the base station or repeater). The computed position fix for each hypothesis is associated with a respective metric that identifies a particular degree of confidence in the computed position fix. This metric can be based on the RMSE (root mean square error).","The position fix with the best metric is then selected as the estimated position of the remote terminal, at step . For the selected position fix, a determination is then made whether the remote terminal is under the coverage of a repeater, at step . If the answer is no, the search windows for the remote terminal are generated in the normal manner (i.e., without compensating for repeaters), at step . Otherwise, if the remote terminal is estimated to be under the coverage of a repeater, the search windows are generated in a manner to account for the additional ambiguity associated with the repeater, at step . This may entail widening and\/or shifting the search windows depending on the delays, as described above. The process then terminates.","System",{"@attributes":{"id":"p-0125","num":"0124"},"figref":"FIG. 16","b":["106","1612","1614","1622","1622","1624","1624","1626"]},"For position determination, the rake receiver may be operated to provide to a controller  the arrival times for the strongest received multipaths or the multipaths having signal strengths that exceed a particular threshold level. For certain embodiments, the samples from RF receiver unit  may also be provided to an RX signal quality measurement unit  that measures the quality of the received transmissions. The signal quality measurement can be achieved using various techniques, including those described in U.S. Pat. Nos. 5,056,109 and 5,265,119.","Controller  receives the time measurements for the base stations and repeaters, the measured signal quality of the multipaths (for some embodiments), and a message indicative of the search windows sent by the PDE. The time measurements and signal quality measurements are provided to a modulator  for transmission back to the PDE, and the search windows are provided to a GPS receiver .","GPS receiver  receives and searches for GPS signals based on the search windows provided by controller . The time measurements for the GPS satellites are then provided by GPS receiver  to controller , which then forwards the information to the PDE.","On the reverse link, data is processed (e.g., formatted, encoded) by a transmit (TX) data processor , further processed (e.g., covered, spread) by a modulator (MOD) , and conditioned (e.g., converted to analog signals, amplified, filtered, quadrature modulated, and so on) by an RF TX unit  to generate a reverse link signal. The information from controller  may be multiplexed with the processed data by modulator . The reverse link signal is then routed through duplexer  and transmitted via antenna  to the base stations and\/or repeaters.",{"@attributes":{"id":"p-0130","num":"0129"},"figref":"FIG. 17","b":["130","130","120"]},"On the reverse link, data from the base stations is provided via a transceiver  to a RX data processor . This data includes the time measurements and (possibly) the signal quality indications reported by the remote terminals, the time measurements for GPS satellites reported by the base stations, and other data. Data processor  extracts the time measurements and signal quality indications from the received data and provides the information to a controller . Controller  may also receive additional data from a data storage unit  (i.e., information indicating whether a base station is repeated, the delays associated with the base stations and repeaters, and so on) and computes a position estimate for a remote terminal. Controller further computes search windows for the remote terminal based on available information. The search windows are provided to a TX data processor , which properly formats and sends the data to the BSC via transceiver .","The processing units described herein (e.g., the rake receiver, data processors, controllers, and others) can be implemented in various manners. For example, each of these processing units can be implemented in an application specific integrated circuit (ASIC), a digital signal processor, a microcontroller, a microprocessor, or other electronic circuits designed to perform the functions described herein. The processing units can also be integrated into one or more integrated circuits. Also, the processing units can be implemented with a general-purpose or specially designed processor operated to execute instruction codes that achieve the functions described herein.","Various aspects of the invention may also be implemented in software code executed on a processor. For example, the computation to estimate the position of the remote terminal based on time measurements from the remote terminal and to generate the search windows based on the estimated position of the remote terminal may be achieved by one or more software modules. Thus, at least some of the processing and computations described her(in may be implemented using hardware, software, or a combination thereof.","For clarity, the position determination is described as being performed by the PDE. However, the processing to estimate position may also be performed at the base station, the remote terminal, or distributed between the PDE, base station, and remote terminal.","For clarity, section headings are used herein to organize various aspects of the invention. It is to be noted that the features described under these various section headings are not intended to be restricted to the section under which they are described, and techniques from two or more sections may be combined. For example, the determination of whether or not a remote terminal is under the coverage of a repeater may be made based on the probable neighbor list, the environment type of the repeater, the delays in the time measurements, the cost functions, or a combination thereof.","The foregoing description of the preferred embodiments is provided to enable any person skilled in the art to make or use the present invention. Various modifications to these embodiments will be readily apparent to those skilled in the art, and the generic principles defined herein may be applied to other embodiments without the use of the inventive faculty. Thus, the present invention is not intended to be limited to the embodiments shown herein but is to be accorded the widest scope consistent with the principles and novel features disclosed herein."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The features, nature, and advantages of the present invention will become more apparent from the detailed description set forth below when taken in conjunction with the drawings in which like reference characters identify correspondingly throughout and wherein:",{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIGS. 2A and 2B"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIGS. 6A and 6B"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIGS. 8A and 8B"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIGS. 10A and 10B"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIGS. 12A and 12B"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":["FIG. 14","FIG. 1"]},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIGS. 16 and 17"}]},"DETDESC":[{},{}]}
