---
title: Transparent session initiated protocol
abstract: Method and apparatus employing transparent session initiation protocol (SIP) technique for communication especially between a user device in one domain and an application/service provide in an external domain. The transparent SIP technique is usable in wired or wireless systems such as 3G systems and wireless local area networks (WLANs).
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07574595&OS=07574595&RS=07574595
owner: InterDigital Technology Corporation
number: 07574595
owner_city: Wilmington
owner_country: US
publication_date: 20040728
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS REFERENCE TO RELATED APPLICATION(S)","FIELD OF INVENTION","BACKGROUND","BRIEF DESCRIPTION OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENT(S)"],"p":["This application claims priority U.S. provisional application No. 60\/582,035 filed Jun. 22, 2004, which is incorporated by reference as if fully set forth.","The present invention relates to session initiation protocol (SIP) in a communication system and, in particular, to an apparatus and method for significantly reducing the number of interfaces required between caller and called agents.","A typical SIP scenario involves one or more proxy\/re-direct servers as shown in . The \u201ctrapezoidal\u201d arrangement shown therein includes a caller (UA) entity and a called (UA) entity. The UA caller may be anyone of a variety of user equipments (UEs) such as a properly equipped laptop, PDA, wireless cell phone capable of transmitting and receiving data as well as voice, and so forth. One important SIP feature is the ability to invite new participants to a call.","A user is identified in SIP using an SIP uniform resource identifier (URI) which may, for example, be UA at Domain (A). The Domain (A) server, Proxy , determines an SIP server for Domain (B), in this case, Proxy , using directory name service (DNS) procedures. During the message exchange, the caller UA and called UA entities exchange addresses at which they would like to receive communicated media from each other.","Once session establishment is completed, the caller\/called entities can exchange data directly without involvement of the SIP proxies, such as Proxy  and Proxy . Conventionally, the control signals are communicated as illustrated by control signal lines CS via the proxy servers while the media content is shared as illustrated by media line MS.","Conventional techniques require that users in a particular network must always use the SIP proxy servers of that network operator in order to establish a SIP session. Third party application providers make their servers available to the network operator via open interfaces. The network operator makes these third party servers, and the applications they provide, available to the user via proxy servers within their networks. Typically, the network operator charges the user for access to the service with only a small amount of the revenue passed through to the third party application server provider.","The servers in the operators network are used to provide access to the third party application servers. The network operator controls the use of these servers and as a result, also controls access to the third party application servers. The present invention enhances access to third party application servers from user devices attached to operator networks and also provides the ability to increase the revenue stream for those services to the third party providers.","The objective of the present invention is to address scenarios where SIP is employed for contacting a third party application or content server transparently. The motivation behind this invention is the provision of a transparent means of network traversal to access third party application and content servers located outside of the operators' network.","The present invention provides for the utilization of \u201csmart\u201d SIP Proxy Agent Middleware (SPAM) which are preferably integrated into user devices. In a preferred embodiment, all user agents (UAs) in a user device are configured with SPAM as an outbound proxy. A User Agent (UA) is a logical entity that both creates new SIP requests and responds to received SIP requests. A user device refers to a physical communication device such as a mobile phone, PDA, laptop or other type of network connectable communication device. There can be more than one User Agent in a user device at any instant of time.","Preferably, the address of the SIP proxy server, which is illustrated in the Figures as Proxy  in Domain A, and the address of the internal domain, which is the network operator's domain i.e. Domain A, are provided to SPAM. Depending upon the domain that the UA is trying to contact, SPAM preferably determines whether the request has to be handled internally, i.e., within the network operator's domain or externally, i.e., transparently for networks outside of the operator's domain.","The above as well as other objects of the invention will become apparent when reading the accompanying detailed description in conjunction with the drawings in which like elements are designated by like numerals.","In order to simplify communication between the calling and called entities, the present invention provides method and apparatus which employ an improved session initiation protocol (SIP) for transparently contacting third party applications or content servers. A transparent means of network traversal is provided to access to third party application and content servers located outside of the operator's network.","To accomplish this, \u201csmart\u201d SIP proxy agent middleware (SPAM) is provided in user devices which are conveniently referred to as User Equipments (UEs). In a preferred embodiment, all user agents (UAs) in a UE are manually configured with SPAM as an outbound proxy. A User Agent (UA) is a logical entity that both creates new SIP requests and responds to received SIP requests. A User Equipment (UE) refers to the physical user device such as a mobile phone, PDA, laptop or other type of network connectable communication device which may serve as an SIP terminal. There can be more than one User Agent in a UE at any instant of time.","The address of the SIP proxy server, which, for the example illustrated in , is the proxy server in a domain A, and an internal domain which is the network operator's domain, are provided to SPAM. Depending on the domain that a UA is attempting to contact, SPAM determines whether the request has to be handled internally, i.e., within the network operator's domain or externally, i.e., transparently for networks outside of the operator's domain.","For external domains, i.e., networks outside of the operator's domain, SPAM determines the SIP server of the external domain by, for example, identifying the IP address, port and transport protocol for the external domain's proxy server, such as Proxy  in Domain B illustrated in , by performing a directory name service (DNS) lookup.","For an internal domain, such as within the network operator's Domain (A), the request is sent to the SIP proxy server, Proxy  in Domain A specified by the operator, wherein internal services provided are obtained in a conventional manner.","With reference to , when external services are desired, SPAM provides the SIP uniform resource identifier (URI) for UA in the form of a numerical internet protocol (IP) address of an SIP terminal, for instance UA, at 162.178.9.6, in which the internal domain proxy server, Proxy  of Domain A, is omitted when performing SIP transactions. This architecture is utilized when the SIP terminal, i.e. UA, initiates a call to a third party application\/content server. More specifically, in the example of , UA utilizes the SIP URI for Proxy  of Domain B in order to access services from content server UA. The control communications links between UA, Proxy  and UA are identified as CS, the media communication link which is established is illustrated as MS. Accordingly, SPAM enables the SIP terminal, UA to bypass Proxy  of Domain A.","Specific example of the processes involved are illustrated in  which show a flow diagram of a user device employing transparent SIP for communication with external domains. Although UA and SPAM are illustrated separately in , preferably they are both implemented in the physical user device employed as the SIP terminal acting as \u201ccaller.\u201d At step S, UA sends an invitation signal, Invite, to SPAM. At SA of , SPAM then identifies the Invite as an external domain. A preferred procedure for the case where SPAM identifies the Invite as a request for internal services is illustrated in .","For the external service case of , at SB, a DNS lookup is performed by SPAM, such as by SPAM accessing a DNS Server via Proxy . Upon obtaining the address of the proxy server of the external domain, in this case Proxy  of Domain B, at step S, an Invite from SPAM is communicated to Proxy . At step S, SPAM preferably reports a  \u201ctrying\u201d communication to UA.","Proxy , responsive to the Invite from SPAM, communicates, at step S, an Invite signal to a called third party application server, in this case UA. Preferably, at step S, Proxy  also sends a  \u201ctrying\u201d communication to SPAM which may be relayed to UA.","UA, responsive to the Invite (step S), preferably sends a  Ringing communication to Proxy  at step S, which, at step S, preferably sends a  Ringing communication to SPAM which, in turn preferably sends a  Ringing communication to UA, at step S.","Acceptance of the Invite (step S) by UA, preferably results in a  OK message, at step S, which is communicated to Proxy . Proxy  then, at step S, sends a  OK communication to SPAM, which, in turn, sends a  OK communication to UA, at step S. Responsive to the  OK communication (step S), UA sends an acknowledgement (ACK) directly to UA, at step S, whereupon a Media session is initiated at step SA via a conventional link that bypasses the proxy servers.","Upon completion of the media session, UA sends a BYE communication to UA, at step S whereupon UA, at step S, responds with a 200OK communication to UA. Such session termination corresponds with conventional techniques; by definition SIP are protocols which are directed to the control of session initiation.",{"@attributes":{"id":"p-0035","num":"0034"},"figref":"FIG. 4","b":["1","1","1","2","1","3","100","1","1","1"]},"In the case shown in  where another proxy server, Proxy , controls the \u201ccalled entity\u201d UA which provides the desired internal services, Proxy , responsive to the Invite (step S), performs a DNS lookup, at step SA, and sends an Invite to Proxy , at step S, and further sends a  Trying communication to SPAM, at step S. Proxy , responsive to the Invite (step S), sends an Invite to UA, at step S and sends a  trying communication to Proxy , at step S. In , UA and Proxy  are in same domain as UA and Proxy .","The UA, at step S, sends a  Ringing communication to Proxy  which responds by sending a  Ringing communication to Proxy , at step S, Proxy  responding thereto by sending a  Ringing communication to SPAM, at step S. SPAM, at step S, sends a  Ringing communication to UA.","Upon acceptance of the Invite (step S), UA sends a  OK communication to Proxy , at step S, Proxy  sending a  OK communication to Proxy , at step S, and SPAM receiving  OK from Proxy  at step S, responding thereto by sending a  OK to UA, at step S. UA responds to the  OK by sending an Acknowledgement (ACK) to UA, at step S, and a Media session between UA and UA is set up, at step SA.","When a session is completed, UA, at step S, sends a BYE to UA which responds with a 200OK communication to UA, at step S.","The user devices which are configured with the SPAM associated with UAs may be configured for operation within either a wired or wireless embodiment. Accordingly, the user device may take the form of a wireless transmit receive unit (WTRU) configured for use in a wireless network such as a wireless local area network (WLAN) employing one or more of the IEEE 802 family of standards or a Universal Mobile Telecommunications Systems (UMTS) employing code division multiple access (CDMA). The term WTRU includes but is not limited to a user equipment (UE), mobile station, fixed or mobile subscriber unit, pager, or any other type of device capable of operating in a wireless environment.",{"@attributes":{"id":"p-0041","num":"0040"},"figref":"FIG. 5","b":["1","1","1","2","1","2","3","2","2","4"]},"Utilization of the control technique of the present invention is illustrated with the lighter weight solid line identified as Modified Control that shows UA communicates with the UA through the AP, IP backbone and Proxy  as indicated by the modified control links MC, MC and MC. In both cases, the content services provided from UA through the IP backbone and the AP to UA is shown by the heavy line media connection MM, MM. However, using the modified control path, Proxy  is bypassed due to the use of the transparent SIP in the WLAN for SIP call control flow.","Conventional SIP call flows emanating in a third generation partnership project (3GPP or 3G) communication system, such as specified in 3GPP Technical Specification 24.228 V5.6.0 (2003-09) are shown in . With reference to , a UE performs a general packet radio service (GPRS) Attach, performing a PDP context activation procedure, at step S, which step is conducted with a Proxy-call state control function (P-CSCF) to a Gateway GPRS Support Node (GGSN). An address is obtained using a dynamic host configuration protocol (DHCP) procedure, utilizing DHCP and DNS queries, which take place between the UE and the GGSN, and the GGSN and a DHCP server, as shown at step S. The DSN query\/response takes place in a communication between the UE and a DNS server, at step S, which steps are conventional.",{"@attributes":{"id":"p-0044","num":"0043"},"figref":"FIG. 6B","b":["1","2","3","4","5"]},{"@attributes":{"id":"p-0045","num":"0044"},"figref":["FIG. 7","FIG. 7"]},"At step S, a UE communicates an Invite to a P-CSCF, operating as a Policy Decision Function (PDF). The P-CSCF, at step S, sends a  trying communication to the UE and, at step S, sends an Invite to the next entity. The next entity, at step S, sends a  trying communication to the P-CSCF and, at step S, the next entity sends a  session progress communication to the P-CSCF. At step S, the P-CSCF authorizes the Quality of Service (QoS) resources and, at step S, sends a  session progress signal to the UE. The UE, responsive to step S, sends, at step S an acknowledgement signal (PRACK) to the P-CSCF which, at step S, relays the PRACK to the next entity.","SIP defines two types of responses, provisional and final. Final responses convey the result of the request processing, and are sent reliably. Provisional responses provide information on the progress of the request processing, but are not sent reliably in RFC 3261. It has been observed that reliability is important in several cases, including interoperability scenarios with a Public Switch Telephone Network (PSTN). Therefore, an optional capability was needed to support reliable transmission of provisional responses. That capability is provided by PRACK (refer RFC 3262). Reliable responses are retransmitted by the Transaction User (TU) with an exponential backoff. Those retransmissions cease when a PRACK message is received. The PRACK request plays the same role as ACK, but for provisional responses.","The next entity, at step S, sends a  OK (PRACK) to the P-CSCF which relays this message to the UE, at step S. At step S, the UE sends a GPRS: ACTIVATE PDP context to a Serving GPRS Support Node (SGSN) which, at step S, sends a GPRS create PDP context to a GGSN, which, at step S sends a COPS: request (REQ) activate PDP context to the P-CSCF, which, responsive to step S, sends a COPS:DEC policy information communication to the GGSN, at step S. The GGSN, at step S, sends a COPS:RPT activate PDP context to the P-CSCF and, at step S, the GGSN sends a GPRS: create PDP response to the SGSN, which, responsive to step S, sends a GPRS:ACTIVATE PDP context accept to the UE, at step S.","The UE, at step S, sends an update to the P-CSCF which relays this to the next entity, at step S. The next entity, at step S sends a  OK update to the P-CSCF which relays this message to the UE, at step S. The next entity, at step S, also sends a  ringing message to the P-CSCF which relays this message to the UE, at step S. The UE, at step S, sends an PRACK to the P-CSCF which relays this message to the next entity, at step S. The next entity, at step S, sends a  OK (PRACK) to the P-CSCF which relays this message to the UE, at step S.","At step S, the next entity sends a  OK (INVITE) to the P-CSCF which, at step S, sends a COPS:DEC (open \u201cgate\u201d) to the GGSN. The GGSN, at step S, sends a COPS:RPT (report outcome) to the P-CSCF, which sends a  OK (INVITE) to the UE, at step S. Responsive thereto, the UE sends an ACK to the P-CSCF, at step S, which conveys the ACK message to the next entity, at step S.",{"@attributes":{"id":"p-0051","num":"0050"},"figref":["FIG. 8","FIG. 7"],"b":["1","2","1","1","2","1","2"]},{"@attributes":{"id":"p-0052","num":"0051"},"figref":"FIG. 9","b":["1","1","1","1","2","1"]},"The SPAM, at step SC, establishes PDP context bearer by using a PDP context establishment procedure, which is conventional, and is described at 3GPP TS 24.008. \u201cACT\u201d in step SC stands for \u201cPDP Context Activation Procedure.\u201d At step SD, SPAM performs a DNS lookup, and identifies IP address, port and transport protocol for Proxy  in external domain B, by communicating with a DNS server.","The SPAM, at step SE, then establishes a packet switched (PS) call to Proxy  in Domain B. Thereafter, the remaining steps S through S are conducted between UA, Proxy  and UA are substantially identical to those shown and described in , except that, after step S and before step S, the SPAM performs a function of tearing down the PS call to Proxy  and establishes a PS call to the third party application server UA to implement the transfer of media content. It can be seen from a comparison of  that a significant number of steps are eliminated during the control phase as well as eliminating the need for utilization of the entities such as the SGSN and the IP Multimedia CN subsystems.","Significant advantages of the transparent SIP technique for use in 3G networks resides in the fact that IMS is exclusively Internet Protocol Version 6 (IPv6) which provides support for identity and can be used to identify flows and improve QoS. 3GPP IP Multimedia terminals were required to exclusively use IPv6 to access the IMS and the IMS SIP server and proxy server support exclusively IPv6. Hence, all the traffic going to the IMS had to be IPv6, even if the UE is dual stack capable, i.e., is capable of supporting both IPv4 and IPv6 and this impacts both signaling and user traffic. Accordingly, prior to the present invention, there was no means to use SIP-based applications in 3GPP Re199 and Re14 version networks.","Apart from the obvious advantage of providing a transparent means of network traversal to access third party application and content servers located outside of the operator's network, transparent SIP has the following additional advantages when used in a 3G network:\n\n","Provides a means to use SIP based applications in 3GPP Re199 and Re14 version networks.\n\n",{"@attributes":{"id":"p-0058","num":"0061"},"figref":"FIG. 10"},"The UE 100 preferably includes hardware (HW) for network access services, data communication services, multimedia interface services, application platform services and operation and related services respectively shown at A through A. The UE 100 also preferably includes software supporting these services being shown respectively at B through B. Middleware services  are preferably implemented in connection with a platform application programming interface (API) as well as the open archives, open application framework (OAF) which is integrated into the middleware services and functions to manage all interfaces of the platform with the underlying services. For example, the user interface (UA) , which is\/may be JAVA-based, enables a user to operate the mobile terminal to turn on, turn off, input data, select from among stored menus, etc. may, when the platform takes the form of a cell phone, have a conventional telephone keypad together with other operating buttons to provide on\/off, scan, mode selection and other typical functions. Alternatively, the manual interface may be a keyboard type input or the manual input may be a touch screen type or the like. The user interface  is managed by the OAF . The user interface  need not be Java-based and may support any other suitable programming language. The SPAM  is preferably integrated into the UE middleware to enhance the U-100 platform."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWING(S)","p":[{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIGS. 6A and 6B"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 10"}]},"DETDESC":[{},{}]}
