---
title: System and method for controlling the upload of data already accessible to a server
abstract: Systems, methods, and machine-readable media for controlling an upload of a block of data associated with an upload command are described. In certain aspects, an interface module may be configured to obtain a cryptographic checksum for the block of data associated with the upload command. A checksum module may configured to compare the cryptographic checksum for the block of data associated with the upload command to a cryptographic checksum in an index storing cryptographic checksums identifying blocks of data previously uploaded to a server. If the cryptographic checksum for the block of data associated with the upload command matches the cryptographic checksum in the index, an upload module may be configured to cancel the upload of the block of data associated with the upload command.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08812849&OS=08812849&RS=08812849
owner: Google Inc.
number: 08812849
owner_city: Mountain View
owner_country: US
publication_date: 20110926
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["RELATED APPLICATION","BACKGROUND","SUMMARY","DETAILED DESCRIPTION"],"p":["This application is a continuation of U.S. patent application Ser. No. 13\/156,312, filed on Jun. 8, 2011, entitled \u201cSYSTEM AND METHOD FOR CONTROLLING THE UPLOAD OF DATA ALREADY ACCESSIBLE TO A SERVER,\u201d the entire contents of which are herein incorporated by reference in its entirety.","The present disclosure generally relates to the transmission of data from one location to another.","Files or other data are often transmitted or uploaded to a server. For example, in order to email a file to another person, a user of an email service may first need to upload the file to one or more email servers hosting the email service. Users of social networking platforms may also upload files (e.g., images, videos, documents, audio, etc.) to a social networking server so that the files may be shared with others. In some cases, however, uploading a file may be redundant because an identical file may have been previously uploaded to the server. Furthermore, file uploads may require substantial resources and time to upload depending on the size of the file, the capabilities of the sending or receiving systems, and the platform that the upload transmission takes place on.","According to one aspect of the subject technology, a system for controlling an upload of a block of data associated with an upload command is provided. The system may include an interface module, a checksum module, and an upload module. The interface module may be configured to obtain a cryptographic checksum for the block of data associated with the upload command. The checksum module may be configured to compare the cryptographic checksum for the block of data associated with the upload command to a cryptographic checksum in an index storing cryptographic checksums identifying blocks of data previously uploaded to a server. The upload module may be configured to cancel the upload of the block of data associated with the upload command if the cryptographic checksum for the block of data associated with the upload command matches the cryptographic checksum in the index.","According to another aspect of the subject technology, a method for controlling an upload of a block of data associated with an upload command is provided. The method may include obtaining a cryptographic checksum for the block of data associated with the upload command and comparing, using a processor, the cryptographic checksum for the block of data associated with the upload command to a cryptographic checksum in an index storing cryptographic checksums identifying blocks of data previously uploaded to a server. The method may also include canceling the upload of the block of data associated with the upload command if the cryptographic checksum for the block of data associated with the upload command matches the cryptographic checksum in the index.","According to yet another aspect of the subject technology, a machine-readable medium comprising instructions stored therein, which when executed by a machine, cause the machine to perform operations for controlling an upload of a block of data associated with an upload command is provided. The operations may include obtaining a cryptographic checksum for the block of data associated with the upload command, comparing, using a processor, the cryptographic checksum for the block of data associated with the upload command to a cryptographic checksum in an index storing cryptographic checksums identifying blocks of data previously uploaded to a server, and canceling the upload of the block of data associated with the upload command if the cryptographic checksum for the block of data associated with the upload command matches the cryptographic checksum in the index.","It is understood that other configurations of the subject technology will become readily apparent to those skilled in the art from the following detailed description, wherein various configurations of the subject technology are shown and described by way of illustration. As will be realized, the subject technology is capable of other and different configurations and its several details are capable of modification in various other respects, all without departing from the scope of the subject technology. Accordingly, the drawings and detailed description are to be regarded as illustrative in nature and not as restrictive.","The detailed description set forth below is intended as a description of various configurations of the subject technology and is not intended to represent the only configurations in which the subject technology may be practiced. The appended drawings are incorporated herein and constitute a part of the detailed description. The detailed description includes specific details for the purpose of providing a thorough understanding of the subject technology. However, it will be apparent to those skilled in the art that the subject technology may be practiced without these specific details. In some instances, well-known structures and components are shown in block diagram form in order to avoid obscuring the concepts of the subject technology.","In accordance with various aspects of the subject technology, systems and methods for controlling an upload of a block of data (e.g., a file or segment of a file) associated with an upload command are disclosed. For example, an upload process for a file may be canceled when an identical file already exists and is accessible to the server (e.g., the file was previously uploaded to the server by one or more users). Instead, the file that already exists and is accessible to the server may be referenced and used. By canceling the upload of one or more files, the amount of resources (e.g., processing for the client and the server, memory on the server, bandwidth, etc.) or time used when a user tries to upload files may also be reduced.",{"@attributes":{"id":"p-0019","num":"0018"},"figref":["FIG. 1","FIG. 1"],"b":["100","100","130","110","150","100"]},"The servers  can be any system or device having a processor, a memory, and communications capability for hosting various services. For example, the servers  may host email services, file storage or sharing services, online marketplace services, or social networking services. These services and others may be hosted independently, either on one or many separate servers , or hosted on the same server or servers . In one aspect, a server or servers  may be a virtual entity that might refer to a cluster or even multiple clusters of servers.","Users may interact with the various services hosted by the servers  on client machines (e.g., clients ) over the network . Many of the interactions between a user on a client machine  and a service hosted on a server  may involve uploading data from the client machine  to the server . For example a user of the email service may wish to send a file to a colleague. To do so, the user may first need to upload the file from his client machine  to the servers  hosting the email service. In another example, a user may wish to upload an image file from his client machine  to an online photo-sharing service or a social networking service running on one or more servers .","The clients  can be, for example, desktop computers, mobile computers, tablet computers, mobile devices (e.g., a smart phone or PDA), set top boxes (e.g., for a television), video game consoles, thin clients, or any other devices having appropriate processor, memory, and communications capabilities. In one aspect, a server may also be a client . The clients  may be configured to run applications (e.g., a file upload program, a web browser, or other program) that may be used to issue or receive upload commands to upload data to the one or more servers .","The network  can include, for example, any one or more of a personal area network (PAN), a local area network (LAN), a campus area network (CAN), a metropolitan area network (MAN), a wide area network (WAN), a broadband network (BBN), the Internet, and the like. Further, the network  can include, but is not limited to, any one or more of the following network topologies, including a bus network, a star network, a ring network, a mesh network, a star-bus network, tree or hierarchical network, and the like.",{"@attributes":{"id":"p-0024","num":"0023"},"figref":["FIG. 2","FIG. 2"],"b":"200"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 2","b":["205","215","250","210","210"]},"A cryptographic checksum, also referred to as a cryptographic hash value, may be generated by a cryptographic hash function that reads in a block of data (e.g., a file or a part of a file) and returns a bit string (e.g., the cryptographic checksum). The cryptographic checksum may have several important characteristics. For example, it is computable for any given block of data, it is infeasible to determine a block of data using its cryptographic checksum, it is computationally infeasible to find two different blocks of data with the same cryptographic checksum, and it is computationally infeasible to modify a block of data without changing its cryptographic checksum. The characteristics of the cryptographic checksums computed for a file or a part of a file selected for uploading allow the file or the part of the file to be uniquely identified using their cryptographic checksums. Thus, if two pieces of data have the same cryptographic checksum, the two pieces of data are most likely identical.","One cryptographic hash function that may be used is the SHA-1 function designed by the National Security Agency (NSA) which uses a 160-bit hash function. However, other cryptographic hash functions, including stronger hash functions may be used as well.","The server  may include an interface module , a checksum module , an upload module , and one or more databases . The interface module  may be configured to communicate with one or more client machines  or servers. The interface module  may, for example, obtain cryptographic checksums for blocks of data associated with upload commands or receive blocks of data being uploaded. According to one aspect, the interface module  may receive cryptographic checksums and blocks of data being uploaded at the same time.","The checksum module  may be configured to compare a cryptographic checksum for a file or block of data associated with an upload command to the cryptographic checksums in an index to determine whether the cryptographic checksum associated with the upload command matches one of the cryptographic checksums in the index. A match would indicate that a file or a block of data identical to the file or the block of data associated with the upload command is accessible to the server . The checksum module  may also be configured to calculate cryptographic checksums and store the checksums in the index. According to one aspect, the index may contain a collection of cryptographic checksums that may be used to identify files or blocks of data that already exist and are accessible to the server  (e.g., files or blocks of data that were previously uploaded to the server ).",{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 3","b":["300","300","215","215","215","235","215","250","215","300"]},"Referring back to , the upload module  may be configured to control the upload process of a file or block of data. For example, the upload module  may cancel the upload of a file from the client machine  to the server  and use a file already accessible to the server  or it may allow the interface module  to continue and complete the upload process.","The one or more databases  may store various files, programs, and data accessible to the server . Although  shows the databases  as being in the server , according to one aspect, the databases  may be reside on one or more other servers that may communicate with the server  via the network . According to another aspect, the index may also be stored in one of the databases . Further details and configurations of the modules, according to various aspects of the subject technology, are discussed below with reference to .",{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 4","b":["400","400","405","210","205"]},"The upload command may be associated with a particular task and received from a user via an interface or from another program or device. Tasks may include, for example, uploading a file to an email server to be attached to an email, uploading a file to a file sharing website, uploading a file to be published on a social networking site, etc. For example a user of the email service may wish to attach one or more files to an email and send the email to an intended recipient. To do so, the user may select the files on the client machine  in an interface provided by the program or web browser  and initiate an upload command.","Once the upload command is received, at operation , the web browser  may calculate a cryptographic checksum for the file associated with the upload command and, at operation , send the cryptographic checksum to the server . In a first instance of an upload of a file or block of data, the cryptographic checksum for the file or block of data may be stored in an index at the server. Upon subsequent uploads of the same or an identical file or block of data, the cryptographic checksum may be sent to the server  and used to identify and locate the version previously uploaded in the first instance as will be discussed in more detail below.","According to one aspect, the web browser may support the Hypertext Markup Language revision 5 (HTML5) FileReader application programming interface (API) and, as a result, may be able to read the file and generate the cryptographic checksum without the need for additional plug-ins (e.g., a Flash\u00ae plug-in or Java\u00ae plug-in). Further details about the FileReader API may be found at http:\/\/www.w3.org\/TR\/FileAPI\/, which is hereby incorporated by reference in its entirety.","Once a cryptographic checksum is calculated for the file, it may be sent, via the network , to an interface module  of a server . At operation , the interface module  obtains the cryptographic checksum for the file associated with the upload command. At operation , the checksum module  may compare the cryptographic checksum for the file associated with an upload command to cryptographic checksums in an index to determine whether the two cryptographic checksums match.","A match between one of the cryptographic checksums in the index and the cryptographic checksum for the file associated with the upload command may indicate that an identical file is accessible to the server  (e.g., that an identical file has been previously uploaded by the same user or a different user). A match may also indicate that uploading the file from the client machine  to the server  is unnecessary because the identical version accessible to the server  may be used. As a result, at operation , if a match is found, the upload module  may cancel the upload of the file or send a response to the client machine  that the client machine  may cancel the upload. By canceling the upload process for the file, any additional resources or time that would have been used to upload the file may be conserved.","According to one aspect, when the upload process for the file is canceled, the web browser  or program uploading the file may give an indication (e.g., a message or notification) that an identical file is already accessible to the server or has already been uploaded. According to another aspect, however, the web browser  or program uploading the file may not give any indication. Instead, the web browser  or program will simply act as if the upload for the file has been completed. As a result, the cancelation of the upload and use of an identical file accessible to the user is transparent to the user.","Once a match is found, the upload module  may also locate and retrieve the identical file accessible to the server  so that the file may be used. For example, the upload module  may identify that the identical file accessible to the server  exists using the matching cryptographic checksum in the index and retrieve the file using the reference to the file (e.g., the location of a file or a pointer to the file) that corresponds to the cryptographic checksum (see index  in ). Once the identical file is located or retrieved, the upload module  may use the identical file for whatever task was associated with the upload command (e.g., attach the identical file to an email to be sent, allow the identical file to be shared on the file sharing website, publish the identical file on a social networking site, etc.).","If a match is not found, this may indicate that an identical file does not exist or is not accessible to the server  and, as a result, uploading the file from the client machine  to the server  may be necessary. In such a case, the upload module  would allow the interface module  to complete the upload of the file and use it for the task at operation .","Furthermore, in order to conserve time and computing resources in the future when the same user or a different user attempts to upload a file identical to the one just uploaded, it may be desirable to store a cryptographic checksum for the file just uploaded in the index so that the file may be identified. Similarly, it may be desirable to store a reference to the file (e.g., storage location data for the file or a pointer to the file) in the index as well so that the file may be located and retrieved for use. Thus, according to another aspect of the subject technology, the checksum module  may calculate a cryptographic checksum for the file just uploaded and store the cryptographic checksum in the index along with a reference to the file at operation .","Various other aspects may involve beginning to upload a file while the process described above occurs. In many cases, the time it takes to transmit the file will be longer than the time it takes to calculate the cryptographic checksum, send it to the server , and determine if an identical file is accessible. Thus, if it is later determined that the upload process is to be canceled, the upload module  may cancel the file upload in progress.  helps illustrate such one such aspect.",{"@attributes":{"id":"p-0044","num":"0043"},"figref":"FIG. 5","b":["500","500","505","550","510","515"]},"From the server end, at operation , the interface module  may start receiving the file at any time. While receiving the file, the interface module  may also receive the cryptographic checksum for the file at operation  and the checksum module  may compare the cryptographic checksum for the file being uploaded with the cryptographic checksums in the index at operation .","If the cryptographic checksum for the file being uploaded matches one of the cryptographic checksums in the index, it indicates that an identical file is already accessible to the server  and, as a result, uploading the file may not be necessary. Thus, at operation , the upload module  may cancel the upload of the file already in progress and use the identical file accessible to the server . If no match is found, the upload module  may allow the upload process to continue (e.g., the interface module  will continue to receive the file) and when it is complete, the uploaded file may be used.","Although many aspects of the subject technology may be described in terms of uploading a file, the aspects disclosed are not limited to files and may apply to the uploading of any block of data. In some cases, a file to be uploaded may be partitioned into multiple blocks of data to be uploaded. For example, where the file associated with the upload command is large, the file may be split into a number of smaller segments and cryptographic checksums may be generated for each of the segments of the larger file. Partitioning a larger file into smaller blocks of data may improve performance because calculating a checksum for a large file may require more computational resources and computing time than calculating checksums for a number of smaller blocks of data.  helps illustrate such one such aspect.",{"@attributes":{"id":"p-0048","num":"0047"},"figref":"FIG. 6","b":["600","600","605","205"]},"Instead of calculating a cryptographic checksum for the entire file, at operation , the program on the client machine  may calculate a cryptographic checksum for the first N bytes of the file. N may be an arbitrary predetermined number of bytes (e.g., 10 megabytes) or may be determined based on the capabilities of at least one of the client machine , the network , and the server . For example, N may be small for a mobile device that uses a cellular network and has limited memory and processing power. On the other hand, N may be bigger for a desktop computer that has a faster network connection and has more memory and processing power.","At operation , the client machine  may send the cryptographic checksum for the first N bytes of the file to the server  where it can be compared with other cryptographic checksums in an index to determine whether an identical block of data is accessible to the server . According to this aspect, the index may include cryptographic checksums for blocks of data rather than, or in addition to, cryptographic checksums for entire files. If an identical block of data is found, the upload process for that block of data (which may be occurring in parallel) may be canceled and the identical block of data may be used. If an identical block of data is not found, the upload process for that block of data may be allowed to finish.","At operation , if additional bytes exist in the file, cryptographic checksums for the next N bytes of the file may be calculated and sent to the server. This process may continue until no additional bytes remain in the file.","In some cases, the name of the file associated with the upload command may be different from the name of an identical file accessible to the server. For example, a user may upload a file to the server using a first file name, change the name of the file to a second file name, and attempt to upload the same file with the second file name. According to another aspect of the subject technology, the server  may be able to identify two files that contain identical data that have different file names or file identifiers. The client machine  may calculate a cryptographic checksum for the data contained in a file and send the cryptographic checksum to the server . The checksum module  at the server  may determine if a file containing identical data is accessible to the server by comparing the received cryptographic checksum with cryptographic checksums in an index, wherein the cryptographic checksums in the index are calculated based on the data contained in files accessible to the server .",{"@attributes":{"id":"p-0053","num":"0052"},"figref":["FIG. 7","FIG. 1"],"b":"700"},"The example computer system  includes a processor , a main memory , a static memory , a disk drive unit , and a network interface device  which communicate with each other via a bus . The computer system  may further include an input\/output interface  that may be configured to communicate with various input\/output devices such as video display units (e.g., liquid crystal (LCD) displays, cathode ray tubes (CRTs), or touch screens), an alphanumeric input device (e.g., a keyboard), a cursor control device (e.g., a mouse), or a signal generation device (e.g., a speaker).","Processor  may be a general-purpose microprocessor (e.g., a central processing unit (CPU)), a graphics processing unit (GPU), a microcontroller, a Digital Signal Processor (DSP), an Application Specific Integrated Circuit (ASIC), a Field Programmable Gate Array (FPGA), a Programmable Logic Device (PLD), a controller, a state machine, gated logic, discrete hardware components, or any other suitable entity that can perform calculations or other manipulations of information.","A machine-readable medium (also referred to as a computer-readable medium) may store one or more sets of instructions  embodying any one or more of the methodologies or functions described herein. The instructions  may also reside, completely or at least partially, within the main memory  and\/or within the processor  during execution thereof by the computer system , with the main memory  and the processor  also constituting machine-readable media. The instructions  may further be transmitted or received over a network  via the network interface device .","The machine-readable medium may be a single medium or multiple media (e.g., a centralized or distributed database, and\/or associated caches and servers) that store the one or more sets of instructions. The machine-readable medium may include the drive unit , the static memory , the main memory , the processor , an external memory connected to the input\/output interface , or some other memory. The term \u201cmachine-readable medium\u201d shall also be taken to include any non-transitory medium that is capable of storing, encoding or carrying a set of instructions for execution by the machine and that cause the machine to perform any one or more of the methodologies of the embodiments discussed herein. The term \u201cmachine-readable medium\u201d shall accordingly be taken to include, but not be limited to, storage mediums such as solid-state memories, optical media, and magnetic media.","Systems, methods, and machine-readable media for controlling an upload of a block of data associated with an upload command have been described. In certain aspects, an interface module may be configured to obtain a cryptographic checksum for the block of data associated with the upload command. A checksum module may configured to compare the cryptographic checksum for the block of data associated with the upload command to a cryptographic checksum in an index storing cryptographic checksums identifying blocks of data previously uploaded to a server. If the cryptographic checksum for the block of data associated with the upload command matches the cryptographic checksum in the index, an upload module may be configured to cancel the upload of the block of data associated with the upload command.","Those of skill in the art would appreciate that the various illustrative blocks, modules, elements, components, methods, and algorithms described herein may be implemented as electronic hardware, computer software, or combinations of both. To illustrate this interchangeability of hardware and software, various illustrative blocks, modules, elements, components, methods, and algorithms have been described above generally in terms of their functionality. Whether such functionality is implemented as hardware or software depends upon the particular application and design constraints imposed on the overall system. Skilled artisans may implement the described functionality in varying ways for each particular application. Various components and blocks may be arranged differently (e.g., arranged in a different order, or partitioned in a different way) all without departing from the scope of the subject technology.","It is understood that the specific order or hierarchy of steps in the processes disclosed is an illustration of exemplary approaches. Based upon design preferences, it is understood that the specific order or hierarchy of steps in the processes may be rearranged. Some of the steps may be performed simultaneously. The accompanying method claims present elements of the various steps in a sample order, and are not meant to be limited to the specific order or hierarchy presented.","The previous description is provided to enable any person skilled in the art to practice the various aspects described herein. The previous description provides various examples of the subject technology, and the subject technology is not limited to these examples. Various modifications to these aspects will be readily apparent to those skilled in the art, and the generic principles defined herein may be applied to other aspects. Thus, the claims are not intended to be limited to the aspects shown herein, but is to be accorded the full scope consistent with the language claims, wherein reference to an element in the singular is not intended to mean \u201cone and only one\u201d unless specifically so stated, but rather \u201cone or more.\u201d Unless specifically stated otherwise, the term \u201csome\u201d refers to one or more. Pronouns in the masculine (e.g., his) include the feminine and neuter gender (e.g., her and its) and vice versa. Headings and subheadings, if any, are used for convenience only and do not limit the invention.","A phrase such as an \u201caspect\u201d does not imply that such aspect is essential to the subject technology or that such aspect applies to all configurations of the subject technology. A disclosure relating to an aspect may apply to all configurations, or one or more configurations. An aspect may provide one or more examples. A phrase such as an aspect may refer to one or more aspects and vice versa. A phrase such as an \u201cembodiment\u201d does not imply that such embodiment is essential to the subject technology or that such embodiment applies to all configurations of the subject technology. A disclosure relating to an embodiment may apply to all embodiments, or one or more embodiments. An embodiment may provide one or more examples. A phrase such an embodiment may refer to one or more embodiments and vice versa. A phrase such as a \u201cconfiguration\u201d does not imply that such configuration is essential to the subject technology or that such configuration applies to all configurations of the subject technology. A disclosure relating to a configuration may apply to all configurations, or one or more configurations. A configuration may provide one or more examples. A phrase such a configuration may refer to one or more configurations and vice versa.","The word \u201cexemplary\u201d may be used herein to mean \u201cserving as an example or illustration.\u201d Any aspect or design described herein as \u201cexemplary\u201d is not necessarily to be construed as preferred or advantageous over other aspects or designs.","All structural and functional equivalents to the elements of the various aspects described throughout this disclosure that are known or later come to be known to those of ordinary skill in the art are expressly incorporated herein by reference and are intended to be encompassed by the claims. Moreover, nothing disclosed herein is intended to be dedicated to the public regardless of whether such disclosure is explicitly recited in the claims. No claim element is to be construed under the provisions of 35 U.S.C. \u00a7112, sixth paragraph, unless the element is expressly recited using the phrase \u201cmeans for\u201d or, in the case of a method claim, the element is recited using the phrase \u201cstep for.\u201d Furthermore, to the extent that the term \u201cinclude,\u201d \u201chave,\u201d or the like is used in the description or the claims, such term is intended to be inclusive in a manner similar to the term \u201ccomprise\u201d as \u201ccomprise\u201d is interpreted when employed as a transitional word in a claim."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The accompanying drawings, which are included to provide further understanding and are incorporated in and constitute a part of this specification, illustrate disclosed aspects and together with the description serve to explain the principles of the disclosed aspects. In the drawings:",{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":["FIG. 7","FIG. 1"]}]},"DETDESC":[{},{}]}
