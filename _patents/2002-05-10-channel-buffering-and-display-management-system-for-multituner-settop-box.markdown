---
title: Channel buffering and display management system for multi-tuner set-top box
abstract: A system is provided that resources media content of multiple display channels. The system includes a memory with logic, tuning resources to receive media content of a plurality of display channels, buffering resources for buffering the media content, display resources for displaying the media content from at least one of the display channels, and a processor configured with the logic to determine when the resources are unavailable to receive media content of a newly requested display channel. The processor is further configured with the logic to, responsive to a determination of insufficient resources, determine the lowest priority display channel using at least one user configurable rule, wherein the processor is further configured with the logic to effect discontinuing the receipt of media content of a display channel designated as having the lowest priority among a plurality of received display channels.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07409140&OS=07409140&RS=07409140
owner: Scientific-Atlanta, Inc.
number: 07409140
owner_city: Lawrenceville
owner_country: US
publication_date: 20020510
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","TECHNICAL FIELD","BACKGROUND OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS"],"p":["This application claims priority to copending U.S. provisional application having Ser. No. 60\/290,315, filed May 11, 2001, which is entirely incorporated herein by reference.","This application is related to copending U.S. utility patent application entitled, \u201cMANAGING TIME SHIFT BUFFERS\u201d, referenced under Scientific-Atlanta, Inc., which includes inventors Dariusz S. Kaminski, Arturo A. Rodriguez, Robert O. Banker, and Valerie G. Gutknecht, filed on even date herewith, which is entirely incorporated herein by reference.","The present invention is generally related to television systems, and, more particularly, is related to personal video recording.","With recent advances in digital transmission technology, subscriber television systems are now capable of providing much more than the traditional analog broadcast video. In implementing enhanced programming, the home communication terminal device (\u201cHCT\u201d), otherwise known as the set-top box, has become an important computing device for accessing media content services (and media content within those services) and navigating a user through a maze of available services. In addition to supporting traditional analog broadcast video functionality, digital HCTs (or \u201cDHCTs\u201d) now also support an increasing number of two-way digital services such as video-on-demand and personal video recording.","Typically, a DHCT is connected to a cable or satellite, or generally, a subscriber television system, and includes hardware and software necessary to provide the functionality of the digital television system at the user's site. Some of the software executed by a DHCT may be downloaded and\/or updated via the subscriber television system. Each DHCT also typically includes a processor, communication components, and memory, and is connected to a television or other display device, such as a personal computer. While many conventional DHCTs are stand-alone devices that are externally connected to a television, a DHCT and\/or its functionality may be integrated into a television or personal computer or even an audio device such as a programmable radio, as will be appreciated by those of ordinary skill in the art.","DHCTs are typically capable of providing users with a very large number and variety of media content choices. As the number of available media content choices increases, viewing conflicts arise whereby the user must choose between watching two or more media content instances (e.g., discrete, individual instances of media content such as, for a non-limiting example, a particular television show or \u201cprogram\u201d episode), all of which the user would like to view. Further, because of the large number of viewing choices, the user may miss viewing opportunities. Buffering of media content instances in memory, or more recently, in storage devices (e.g., hard disk drives, CD-ROM, etc.) coupled to the DHCT, has provided some relief from the conflict in viewing choices while providing personal video recording functionality. However, current buffering mechanisms for personal video recording make inefficient use of tuner and buffer resources for a plurality of display channel changes using buffering mechanisms that operate under single-tuner constraints and\/or assumptions. Therefore, there exists a need to exploit multi-tuner functionality to make more efficient use of DHCT resources.","Thus, a heretofore unaddressed need exists in the industry to address the aforementioned deficiencies and inadequacies.","The preferred embodiments of the invention now will be described more fully hereinafter with reference to the accompanying drawings, in which preferred embodiments of the invention are shown. One way of understanding the preferred embodiments of the invention includes viewing them within the context of a subscriber television system, and more particularly within the context of a media client device, such as a digital home communication terminal (DHCT). The DHCT provides for user interaction with what is displayed on a television and what is buffered into an associated storage device. Although other communication environments are considered to be within the scope of the preferred embodiments, the preferred embodiments of the invention will be described in the context of a DHCT that receives media content from a headend over a subscriber network as one example implementation among many.","Because the preferred embodiments of the invention can be understood in the context of a subscriber television system environment, an initial description of a subscriber television system is followed with a description of the types of transmission signals that are included in the subscriber television system, in addition to further description of the headend and DHCT (and coupled storage device) that are included within the subscriber television system. The preferred embodiments of the invention include controlling rules for displaying and buffering media content in a multi-tuner, multi-display channel changing environment. Thus, the description that follows the DHCT discussion will help to illustrate what resources are included in tuning, displaying and\/or storing media content at the DHCT, and how those resources are managed and allocated to implement a plurality of display channel changes.","Following the discussion on resource allocation and management is a description of input variables, and how the input variables are used in the context of a rule based system of the preferred embodiments to produce a set of consequences and\/or outputs to make decisions on what media content to receive and buffer during a plurality of display channel changes.","This description of input variables in the context of a rule-based system is followed by a description of some example implementations that rely on the rule based system to provide for efficient functioning of the personal video recording (PVR) system of the DHCT.","The preferred embodiments of the invention may, however, be embodied in many different forms and should not be construed as limited to the embodiments set forth herein; rather, these embodiments are provided so that this disclosure will be thorough and complete, and will fully convey the scope of the invention to those having ordinary skill in the art. Furthermore, all \u201cexamples\u201d given herein are intended to be non-limiting, and are provided as an exemplary list among many other examples contemplated but not shown.","One embodiment of the invention is generally implemented as part of a subscriber television system (STS), which includes digital broadband delivery systems (DBDS) and cable television systems (CTS). As a non-limiting example, a subscriber television system (STS) and its operation will be described initially, with the understanding that other conventional data delivery systems are within the scope of the preferred embodiments of the invention.  shows a block diagram view of an STS , which is generally a high quality, reliable and integrated network system that is typically capable of delivering video, audio, voice and data services to digital home communication terminals (DHCTs) . Although  depicts a high level view of an STS , it should be appreciated that a plurality of subscriber television systems can tie together a plurality of regional networks into an integrated global network so that DHCT users can receive media content provided from anywhere in the world. Further, it will be appreciated that the STS  shown in  is merely illustrative and should not be construed as implying any limitations upon the scope of the preferred embodiments of the invention. For instance, subscriber television systems also included within the scope of the preferred embodiments of the invention include systems not utilizing physical structured cabling for transmission, such as, but not limited to, satellite systems. Further, transmission media included within the scope of the preferred embodiments of the invention include, but are not limited to, Hybrid Fiber\/Coax (HFC), optical, satellite, radio frequency (RF), frequency modulated (FM), and microwave. Further, data provided from the headend  to the DHCTs  and programming necessary to perform the functions discussed below will be understood to be present in the STS , in accordance with the description below.","The STS  typically delivers broadcast video signals as digitally formatted signals in addition to delivering traditional broadcast analog video signals. Furthermore, the system can typically support one way broadcast services as well as both one-way data services and two-way media content and data services. The two-way operation of the network typically allows for user interactivity with services, such as Pay-Per-View programming, Near Video-On-Demand (NVOD) programming according to any of several known NVOD implementation methods, Video-on-Demand (VOD) programming (according to any of several VOD implementation methods), and interactive applications, such as Internet connections.","The STS  also provides the interfaces, network control, transport control, session control, and servers to access media content from media content services, and distributes media content to DHCT users. As shown in , a typical STS  comprises a headend , hubs , an HFC access network , nodes, , taps , and DHCTs . It should be appreciated that although a single component (e.g., a headend) is illustrated in , an STS  can feature a plurality of any one of the illustrated components, can omit components, or may be configured with alternative embodiments for any one of the individual components or with yet other additional components not enumerated above.","Media content provided by one or more content providers (not shown) is communicated by the content providers to one or more headends . From those headends  the media content is then communicated over a communications network  that includes a plurality of HFC access networks  (only one HFC access network  is illustrated). The HFC access network  typically comprises a plurality of HFC nodes , each of which may serve a local geographical area. The hub  connects to the HFC node  through a fiber portion of the HFC access network . The HFC node  is connected to a tap  that is connected to a digital home communication terminal (DHCT) . Coaxial cables are typically used to couple nodes  and taps  because the electrical signals can be easily repeated with RF amplifiers. As the high-level operations of many of the functions of an STS  are well known to those of ordinary skill in the art, further high level description of the overall STS  of  will not be contained herein.",{"@attributes":{"id":"p-0031","num":"0030"},"figref":["FIG. 1B","FIG. 1A","FIG. 1","FIG. 1A"],"b":["10","60","64","68","72","16","17","11","12"]},"As depicted in , the STS  () can simultaneously support a number of transmission signal types, transmission rates, and modulation formats. The ability to carry analog and digital signals over a large bandwidth are characteristics of an HFC network typically employed in an STS, as in the STS  of . As will be appreciated by those of ordinary skill in the art, analog and digital signals in HFC networks can be multiplexed using Frequency Division Multiplexing (FDM), which enables many different types of signals to be transmitted over the STS  to the DHCT . Typically, an STS  using HFC supports downstream (i.e., in the direction from the headend  to the DHCT ) frequencies from 50 mega-hertz (MHz) to 870 MHz, whereas upstream frequencies (i.e., in the direction from the DHCT  to higher levels of the system) are in the 5 MHz to 42 MHz band. Generally, the RF bandwidth spacing for analog and digital services is 6 MHz. Furthermore, for a typical 870 MHz system in the United States, a possible downstream RF spectrum subdivision plan uses 6 MHz frequency subdivisions, or spans, within the 50 MHz to 550 MHz band for analog video transmission signals and within the 550 MHz to 870 MHz range for digital transmission signals.","Analog Transmission Signals (ATSs)  shown in  are typically broadcast in 6 MHz frequency subdivisions, typically referred to in analog broadcasting as channels, having an analog broadcast signal composed of analog video and analog audio, and include Broadcast TV Systems Committee (BTSC) stereo and Secondary Audio Program (SAP) audio. Referring again to , the downstream direction transmission signals, having been multiplexed, and in one embodiment using FDM, are often referred to as in-band transmission signals and include the ATSs  and Digital Transmission Signals (DTSs) , ,  (also known as Digital Transport Signals). These transmission signals carry video, audio, and\/or data services. For example, these transmission signals may carry television signals, Internet data, and\/or any additional types of data, such as Interactive Program Guide (IPG) data. Additionally, as will be appreciated by those of ordinary skill in the art, additional data can be sent with the analog video image in the Vertical Blanking Interval (VBI) of the video signal and stored in DHCT memory or a DHCT local physical storage device (not shown). It should be appreciated, however, that the amount of data that can be transmitted in the VBI of the analog video signal is typically significantly less than data transmitted in a DTS.","Like the ATSs , the DTSs , ,  each typically occupies 6 MHz of the RF spectrum. However, the DTSs , , and  are digital transmission signals consisting of 64- or 256-Quadrature Amplitude Modulated (QAM) digital signals formatted preferably using Moving Picture Experts Group (MPEG) standards such as MPEG-2 transport streams, allocated in a separate frequency range. The MPEG-2 transport stream enables transmission of a plurality of DTS types over each 6 MHz RF subdivision, as compared to a 6 MHz ATS. The three types of digital transport signals illustrated in  include broadcast digital transmission signals , carousel digital transmission signals , and on-demand transmission signals .","MPEG-2 transport may be used to multiplex video, audio, and data in each of these Digital Transmission Signals (DTSs). However, because an MPEG-2 transport stream allows for multiplexed video, audio, and data into the same stream, the DTSs do not necessarily have to be allocated in separate 6 MHz RF frequencies, unlike the ATSs  in one embodiment. On the other hand, each DTS is capable of carrying multiple broadcast digital media content instances, multiple cycling data carousels containing broadcast data, and data requested on-demand by the subscriber. Data is formatted, such as in Internet Protocol (IP), mapped into MPEG-2 packets, and inserted into the multiplexed MPEG-2 transport stream. Encryption can be applied to the data stream for security so that the data may be received only by authorized DHCTs. The authorized DHCT  is provided with the mechanisms to receive, among other things, additional data or enhanced services. Such mechanisms can include \u201ckeys\u201d that are required to decrypt encrypted data.","Each 6 MHz RF subdivision assigned to a digital transmission signal can carry the video and audio streams of the media content instances of multiple television (TV) stations, as well as media content and data that is not necessarily related to those TV media content instances, as compared to one TV channel broadcast over one ATS  that consumes the entire 6 MHz. The digital data is inserted into MPEG transport streams carried through each 6 MHz frequency subdivision assigned for digital transmission, and then demultiplexed at the subscriber DHCT so that multiple sets of data can be produced within each tuned 6 MHz frequency span, or subdivision.","Although broadcast in nature, the carousel DTSs  and on-demand DTSs  offer different functionality. Continuing with , the broadcast DTSs  and carousel DTSs  typically function as continuous feed for an indefinite time, whereas the on-demand DTSs  are continuous feeds sessions for a limited time. In one embodiment, all DTS types are capable of being transmitted at high data rates. The broadcast DTSs  preferably carry data comprising multiple digitally-MPEG-2 compressed and formatted TV source signals and other continuously fed data information. The carousel DTSs  carry broadcast media content or data that is systematically broadcast in a cycling fashion but updated and revised as needed. Thus, the carousel DTSs  serve to carry high volume data such as media content and data and possibly, other data at high data rates.","The carousel DTSs  preferably carry data formatted in directories and files by a Broadcast File System (BFS) (not shown), which is used for producing and transmitting data streams throughout the STS , and which provides an efficient means for the delivery of application executables and application media content and data to the DHCT, as will be described below. Media content and data received by the DHCT  in such manner can then be saved in the DHCT memory and\/or transferred to the DHCT storage device for later use. The on-demand DTSs , on the other hand, can carry particular information such as compressed video and audio pertaining to subscriber requested media content instance preview and\/or media content instance descriptions, as well as other specialized data information.","Preferably, the User-to-Network Download Protocol of the MPEG-2 standard's DSM-CC specification (Digital Storage Media\u2014Command and Control) preferably provides the data carousel protocol used for broadcasting data from a server located at the headend , or located elsewhere. It also provides the interactive download protocol for reliable downloading of data from a server (possibly the same server) to an individual DHCT through the on-demand DTSs. Each carousel and on-demand DTS is preferably defined by a DSM-CC session. Therefore, some of the basic functionality reflected in the DHCT  when the DHCT does not have a local physical storage device is somewhat similar to a networked computer (i.e., a computer without a persistent storage device), in addition to traditional set top box functionality, as is well known to those of ordinary skill in the art. A DHCT  with a storage device reduces data access latency when the data is stored in the local physical storage device ahead of time.","Also shown in  are Out-Of-Band (OOB) signals that provide continuously available two-way signaling to the subscribers' DHCT  regardless of which in-band signals are tuned to by the individual DHCT in-band tuners. The OOB signals consist of a Forward Data Signal (FDS)  and a Reverse Data Signal (RDS) . The OOB signals can comply to any one of a number of well known transport protocols but preferably comply to either a Digital Audio Visual Council (DAVIC) 1.1 Transport Protocol with an FDS of 1.544 mega-bits per second (Mbps) or more using quadrature phase shift keying (QPSK) modulation and an RDS of 1.544 Mbps or more using QPSK modulation, or to a Data Over Cable Service Interface Specification (DOCSIS) Transport Protocol with an FDS of 27 Mbps using 64-QAM modulation and an RDS of 1.544 Mbps or more using QPSK modulation or 16-QAM modulation. The OOB signals provide the two-way operation of the network, which allows for subscriber interactivity with the applications and services provided by the network. Furthermore, the OOB signals are not limited to a 6 MHz spectrum, but generally to a smaller spectrum, such as 1.5 or 3 MHz.",{"@attributes":{"id":"p-0041","num":"0040"},"figref":["FIG. 2","FIG. 1A","FIG. 2","FIG. 1A","FIG. 2"],"b":["11","10","12","12","11","11","11","11","18"]},"In a typical system, the programming, services and other information from content providers can be distributed according to a variety of mechanisms. The input signals may be transmitted from sources to the headend  via a variety of transmission paths, including satellites (not shown), and terrestrial broadcast transmitters and antennas (not shown). The headend  can also receive content from a direct feed source  via a direct line . Other input sources from content providers include a video camera , an analog input source , or an application server . The application server  may include more than one line of communication. One or more components such as the analog input source , the input source , the video camera , and the application server  can be located external to the headend , as shown, or internal to the headend  as would be appreciated by one having ordinary skill in the art. The signals provided by the content or programming input sources can include a single media content instance or a multiplex that includes several media content instances.","The headend  generally includes one or more receivers  that are each associated with a content source. In one implementation, MPEG encoders, such as encoder , are included for digitally encoding local programming or a real-time feed from the video camera , or the like. In other implementations, an encoder can be located externally to the headend . The encoder  outputs the respective compressed video and audio streams corresponding to the analog audio\/video signal received at its input. For example, the encoder  can output formatted MPEG-2 or MPEG-1 packetized elementary (PES) streams or transport streams compliant to the syntax and semantics of the ISO MPEG-2 standard, respectively. The PES or transport streams may be multiplexed with input signals from a switch , the receiver  and a control system . The multiplexing logic  processes the input signals and multiplexes at least a portion of the input signals into a transport stream . The analog input source  can provide an analog audio\/video broadcast signal which can be input into a modulator . From the modulator , a modulated analog output signal can be combined at a combiner  along with other modulated signals for transmission into a transmission medium . Alternatively, an analog audio\/video broadcast signal from the analog input source  can be input into the modulator . Alternatively, an analog audio\/video broadcast signal can be input directly from the modulator  to the transmission medium . The analog broadcast media content instances are transmitted via respective RF channels, each assigned for transmission of an analog audio\/video signal such as National Television Standards Committee (NTSC) video, as described in association with .","The switch, such as an asynchronous transfer mode (ATM) switch , provides an interface to an application server . There can be multiple application servers  providing a variety of services such as a Pay-Per-View service, including video on demand (VOD), a data service, an Internet service, a network system, or a telephone system. Service and content providers may download content to an application server located within the STS . The application server  may be located within the headend  or elsewhere within the STS , such as in a hub . The various inputs into the headend  are then combined with the other information from the control system , which is specific to the STS , such as local programming and control information, which can include, among other things, conditional access information.","The headend  contains one or more modulators  to convert the received transport streams  into modulated output signals suitable for transmission over the transmission medium  through the network . Each modulator  may be a multimodulator including a plurality of modulators, such as, but not limited to, QAM modulators, that radio frequency modulate at least a portion of the transport streams  to become output transport streams . The output signals  from the various modulators  or multimodulators are combined, using equipment such as the combiner , for input into the transmission medium , which is sent via the in-band delivery path  to subscriber locations (not shown). The in-band delivery path  can include DTS , , , and ATS , as described with .","In one embodiment, the server  also provides various types of data  to the headend . The data, in part, is received by media access control functions  that output MPEG transport packets containing data  instead of digital audio\/video MPEG streams. The control system  enables the television system operator to control and monitor the functions and performance of the STS . The control system  interfaces with various components, via communication link , in order to monitor and\/or control a variety of functions, including the frequency spectrum lineup of the programming for the STS , billing for each subscriber, and conditional access for the content distributed to subscribers. Information, such as conditional access information, is communicated from the control system  to the multiplexing logic  where it is multiplexed into the transport stream .","Among other things, the control system  provides input to the modulator  for setting the operating parameters, such as selecting certain media content instances or portions of transport streams for inclusion in one or more output transport stream , system specific MPEG table packet organization, and\/or conditional access information. Control information and other data can be communicated to hubs  () and DHCTs  () via an in-band delivery path  or via an out-of-band delivery path .","The out-of-band data is transmitted via the out-of-band FDS  of the transmission medium  by, but not limited to, a Quadrature Phase-Shift Keying (QPSK) modem array . Two-way communication utilizes the RDS  of the out-of-band delivery path . Hubs  () and DHCTs  () transmit out-of-band data through the transmission medium , and the out-of-band data is received in the headend  via the out-of-band RDS . The out-of-band data is routed through router  to the application server  and\/or to the control system . The out-of-band control information includes such information as, among others, a pay-per-view purchase instruction and a pause viewing command from the subscriber location to a video-on-demand type application server located internally or external to the headend , such as the application server , as well as any other data sent from the DHCT  or hubs , all of which will preferably be properly timed. The control system  also monitors, controls, and coordinates all communications in the subscriber television system, including video, audio, and data. The control system  can be located at the headend  or remotely.","The transmission medium  distributes signals from the headend  to the other elements in the subscriber television system, such as the hub , the node , and subscriber locations (). The transmission medium  can incorporate one or more of a variety of media, such as optical fiber, coaxial cable, HFC, satellite, direct broadcast, or other transmission media.",{"@attributes":{"id":"p-0050","num":"0049"},"figref":["FIG. 3A","FIG. 3A","FIG. 3B"],"b":["16","11","341","16","16","363","11","16","16","342","11","18","11","18"]},"The DHCT  further preferably includes one or more processors, such as processor , for controlling operations of the DHCT , and a tuner system , which preferably comprises two tuners, tuner  and tuner , for tuning into a particular television channel or frequency to display media content and for sending and receiving various types of data or media content to and from the headend . The DHCT  may include, in other embodiments, more than two tuners for receiving downloaded (or transmitted) media content. The tuner system  can select from a plurality of transmission signals () provided by the subscriber television system. The tuner system  enables the DHCT  to tune to downstream media and data transmissions, thereby allowing a user to receive digital and\/or analog media content delivered in the downstream transmission via the subscriber television system. The tuner system  includes, in one implementation, an out-of-band tuner for bi-directional QPSK data communication and two QAM tuners (in band) (tuner  and tuner ) for receiving television signals. The tuners  and  of tuner system  can be used to simultaneously receive a plurality of signals at different carrier frequencies, and\/or at different program identification (PID) locations to receive different services (e.g., receiving HBO and CNN on one carrier frequency, but different PID locations) in an MPEG formatted signal. Additionally, a receiver  receives externally generated information, such as user inputs or commands from an input device, such as a remote control device , or other devices.","According to another embodiment of the invention, a telephone modem (not shown) in the DHCT  can be utilized for upstream data transmission and the headend , the hub  (), or other components located upstream in the STS  () can receive data from a telephone network corresponding with the telephone modem and can route the upstream data to a destination internal or external to the STS , such as an application data server in the headend  or content provider.","The DHCT  includes a signal processing system , which comprises demodulating system  and transport demultiplexing and parsing system  (herein demultiplexing system) to process broadcast media content and\/or data. One or more of the systems of the signal processing system  can be implemented with software, a combination of software and hardware, or preferably in hardware. The demodulating system  comprises functionality for RF signal demodulation, either an analog transmission signal or a digital transmission signal. For instance, the demodulating system  can demodulate a digital transmission signal in a carrier frequency that was modulated, among others, as a QAM-modulated signal.","When tuned to a carrier frequency corresponding to an analog TV signal transmission, the demultiplexing system  is bypassed and the demodulated analog TV signal that is output by the demodulating system  is instead routed to an analog video decoder . The analog video decoder  converts the analog video signal (i.e., the video portion of a media content instance that comprises a video portion and an audio portion, such as NTSC video) received at its input into a respective non-compressed digital representation comprising a sequence of digitized pictures and their respective digitized audio. In one implementation, the video consists of a sequence of fields spaced apart at approximately one-sixtieth of a second. A pair of consecutive fields constitutes a picture. The odd field contains the odd-numbered lines of the picture and the even field contains the even-numbered lines of the picture. The analog video decoder  outputs the corresponding sequence of digitized pictures and respective digitized audio. Each picture is a two dimensional entity of picture elements and each picture element contains a respective set of values. A picture element value comprises luminance and chrominance information that are representative of brightness and color information at the spatial location of the picture element within the picture.","Digitized pictures and respective audio output by the analog video decoder  are presented at the input of a compression engine . Digitized pictures and respective audio output by the analog video decoder  can also be presented to a bypass , which acts through an interface (not shown) such as ITU-656 (International Telecommunications Union or ITU), and is dedicated for non-compressed digitized analog video and audio, for display on the TV . The compression engine  is coupled to memory  and additionally to a local dedicated memory  that is preferably DRAM, for input and processing of the input digitized pictures and the respective digitized audio. Alternatively, the compression engine  can have its own integrated memory (not shown). The compression engine  processes the sequence of digitized pictures and digitized audio and converts them into a video compressed stream and an audio compressed stream, respectively. The compressed audio and video streams are produced in accordance with the syntax and semantics of a designated audio and video coding method, such as specified by the MPEG-2 audio and MPEG-2 video ISO (International Organization for Standardization or ISO) standard, so that they can be interpreted by a video decoder  (also known as a video decompression engine) and an audio decoder  (also known as an audio decompression engine) for decompression and reconstruction at a future time. Each compressed stream includes a sequence of data packets containing a header and a payload. Each header includes a unique program identification, or PID, associated with the respective compressed stream.","The compression engine  multiplexes the audio and video compressed streams into a transport stream, such as an MPEG-2 transport stream, for output. Furthermore, the compression engine  can compress audio and video corresponding to more than one media content instance in parallel (e.g., from two tuned analog TV signals when the DHCT  possesses multiple tuners) and to multiplex the respective audio and video compressed streams into a single transport stream. The output of compressed streams and\/or transport streams produced by the compression engine  is preferably input to the signal processing system . Parsing capabilities within the signal processing system  allow for interpretation of sequence and picture headers, for instance, annotating their locations within their respective compressed stream for future retrieval from a storage device . A compressed analog media content instance (e.g., TV program episode or show) corresponding to a tuned analog transmission channel can be output as a transport stream by the signal processing system  and presented as input for storage in the storage device  via an interface  as will be described below. The packetized compressed streams can be also output by the signal processing system  and presented as input to the media engine  for decompression by the video decompression engine  and the audio decompression engine  for its display on the TV , as will be described below.","The demultiplexing system  can include MPEG-2 transport demultiplexing. When tuned to carrier frequencies carrying a digital transmission signal, the demultiplexing system  enables the separation of packets of data, corresponding to the compressed streams of information belonging to the desired media content instances, for further processing. Concurrently, the demultiplexing system  precludes packets in the multiplexed transport stream that are irrelevant or not desired, such as packets of data corresponding to compressed streams of media content instances of other media content signal sources (e.g., other TV channels), from further processing.","The parsing capabilities of the demultiplexing system  includes reading and interpreting the received transport stream without disturbing its content, such as to interpret sequence and picture headers, for instance, to annotate their locations and corresponding time offset within their respective compressed stream for future retrieval from the storage device . Thus, the components of the signal processing system  are capable of QAM demodulation, forward error correction, and demultiplexing MPEG-2 transport streams, and parsing elementary streams and packetized elementary streams, among other functions. A compressed media content instance corresponding to a tuned carrier frequency carrying a digital transmission signal can be output as a transport stream by the signal processing system  and presented as input for storage in the storage device  via the interface  as will be described below. The packetized compressed streams can be also output by the signal processing system  and presented as input to the media engine  for decompression by the video decompression engine  and the audio decompression engine , and output to an output stage , as will be described below.","One having ordinary skill in the art will appreciate that the signal processing system  will preferably include other components not shown, including memory, decryptors, samplers, digitizers (e.g., analog-to-digital converters), and multiplexers. Further, other embodiments will be understood, by those having ordinary skill in the art, to be within the scope of the preferred embodiments of the present invention, including analog signals (e.g., NTSC) that bypass one or more elements of the signal processing system  and are forwarded directly to the output stage . Further, outputs presented at corresponding next-stage inputs for the aforementioned signal processing flow may be connected via accessible memory  in which the outputting device stores the output data and the inputting device thereafter inputs the output data written to memory  by the respective outputting device. Outputting and inputting devices include the analog video decoder , the compression engine , the media engine , the signal processing system , and components or subcomponents thereof. Further, it will be understood by those having ordinary skill in the art that components of the signal processing system  can be spatially located in different areas of the DHCT . Further, it will be understood by those having ordinary skill in the art that, although the components of the signal processing system  are illustrated as being in communication with an incoming signal from the communications interface , the signal may not necessarily be in the order shown for all signals.","The DHCT  also includes the media engine , which includes the digital video decoder  (or video decompression engine), the digital audio decoder  (or audio decompression engine), the output stage , and the bypass , and other digital signal processing components not shown, as would be appreciated by those having ordinary skill in the art. For example, the demultiplexing system  is in communication with the tuner system  and processor  to effect reception of digital compressed video streams, digital compressed audio streams, and data streams corresponding to one or more media content instances to be separated from other media content instances and\/or streams transported in the tuned transmission channel and to be stored in a first part (not shown) of DRAM  of DHCT  assigned to receive packets of one or more media content instances. Other dedicated memory may also be used for media content instance packets.","Furthermore, while conducting this process, the demultiplexing system  demultiplexes and separates desired compressed streams from the received transport stream without disturbing its content. Further, the demultiplexing system  parses (i.e., reads and interprets) compressed streams such as to interpret sequence headers and picture headers, and deposits a transport stream carrying compressed streams of a media content instance into DRAM . The processor  causes the transport stream in DRAM  to be transferred to the storage device  via the interface . Under program control by the processor , the demultiplexing system , in communication with the digital video decoder , the storage device , and the processor , effects notification and\/or transfer of received packets of one or more compressed streams corresponding to one or more media content instances from a first part of DRAM  to a second part (not shown) of DRAM  assigned to the digital video decoder  and the digital audio decoder . In other embodiments, the media engine  can have access to a dedicated localized DRAM, such as A\/V decoder memory  to facilitate such transfers. Upon demultiplexing and parsing the transport stream carrying one or more media content instances, and in communication with the processor , the signal processing system  outputs to DRAM  ancillary data in the form of a table or data structure (not shown) comprising the relative or absolute location of the beginning of certain pictures in the compressed media content instance for convenience in retrieval during future operations.","In another embodiment, according to a plurality of tuners, and respective number of demodulating systems , demultiplexing systems , and signal processing systems , a respective number of broadcast digital media content instances are received and routed to the hard disk  of the storage device  simultaneously while performing the necessary data annotations for each of the respective compressed media streams for their future retrieval from storage device . Alternatively, a single demodulating system , a single demultiplexing system , and a single signal processing system , each with sufficient processing capabilities can serve to process more than one digital media content instance. One or more of the received broadcast digital media content instances routed to the storage device  can be routed simultaneously to the media engine  for decoding and display to the TV .","In another embodiment according to the aforementioned description, a first tuner, for example tuner  of tuning system  receives an analog video signal corresponding to a first media content instance and a second tuner, for example tuner  receives a digital compressed stream corresponding to a second media content instance. The first media content instance is processed as an analog signal and the second media content instance is processed as a digital compressed stream as described above. The compressed digital version of the analog video signal or the second media instance, or both, can be routed to the storage device  while simultaneously performing the respective data annotations required for future retrieval. Additionally, either or both of the media instances can be routed simultaneously to the media engine  for decoding and display on the TV .","In one implementation, the compression engine  can output formatted MPEG-2 or MPEG-1 packetized elementary streams (PES) inside a transport stream, all compliant to the syntax and semantics of the ISO MPEG-2 standard. Alternatively, the compression engine  can output other digital formats that are compliant to other standards. The digital compressed streams output by the compression engine  corresponding to a media content instance are preferably deposited in local memory  for the compression engine  and routed to the demultiplexing system . The demultiplexing system  parses (i.e., reads and interprets) the transport stream generated by the compression engine  without disturbing its content, such as to interpret picture headers, and deposits the transport stream into DRAM . The processor  causes the transport stream in DRAM  to be transferred to the storage device . While parsing the transport stream, the demultiplexing system  outputs to DRAM  ancillary data in the form of a table or data structure (not shown) comprising the relative or absolute location of the beginning of certain pictures in the compressed media content stream for the media content instance for convenience in retrieval during future operations. In this way, random access operations such as fast forward, rewind, and jumping to a location in the compressed media content instance can be attained.","In another embodiment, according to a plurality of tuners, respective number of analog video decoders , and respective number of compression engines , the aforementioned compression of analog video and audio is performed and routed to the hard disk  of the storage device  simultaneously on a respective number of analog media content instances. Alternatively, a single compression engine with sufficient processing capabilities can serve to compress more than one analog media content instance.","The media engine  also includes the output stage . In one implementation, the output stage  can include a digital encoder (DENC) (not shown) for driving the TV display. In parallel to feeding a DENC, the output stage  can also route the video\/audio signal for output in multiple formats. Such formats can include analog component YPbPr, which can be used in High Definition Television (HDTV), some standard televisions, and digital video disk (DVD) players. Another format can be RGB component for personal computer displays. Another format can include a digital version of an analog component, which is used with fiber optic cable connections. The DENC output can feed digital analog converters (DAC\u2014not shown) for output as composite video (CVBS), also known as baseband (e.g., V-output connection in a VCR or DVD player). In other implementations, the luma and chroma signals can be kept separate to output \u201cseparate video\u201d through DACs (e.g., S-video connection in a VCR or DVD player). The DENC output of the output stage  can also feed an RF channel  and  modulator (not shown) that feeds a DAC. In another implementation, the output stage  outputs in parallel through an ITU-656 output port, either for internal routing of the video or to drive an external DENC (e.g., for VCR recording). In other embodiments, the DENC can be external to the output stage . In other embodiments, a DENC internal to the output stage  can be used to drive an external DENC (not shown), and the external DENC can be used to drive a Channel  and\/or  RF modulator.","The DHCT  also includes a media memory . These components can include software and\/or hardware to compose and store graphical information created by the processor . These components enable the compositing of graphical data with video into a picture for a TV display as provided by capabilities in the media engine .","In one implementation, compressed video and audio streams received through an in-band tuner of the tuner system  or read from the local storage device  is deposited continuously into a compressed audio and video section  of the media memory . Thereafter, one or more video decompression engines  within the media engine  decompress compressed MPEG-2 Main Profile\/Main Level video streams read into the video decompression engine  from the compressed video buffer  of the media memory . Each picture decompressed by the video decompression engine  is written to a reconstruction portion  of the media memory , where the reconstructed pictures are retained.","Alternatively, the pictures may be decompressed in the video decompression engine , then scaled down as they are being reconstructed in a procedural fashion by feeding data of the reconstructed pictures in raster-scan order from the video decompression engine  to a video scaling unit (not shown). According to this alternative, the scaled down reconstructed picture can be stored in one of multiple scaled video picture buffers (not shown) in media memory  in raster-scan order as they are reconstructed, such that a respective scaled video picture buffer is dedicated to the motion video picture of a program or video object (read from the local storage device ) and included in the displayed presentation.","Additionally, one or more digital audio decompression engines  in the media engine  can decode the compressed digital audio streams associated with the compressed digital video or read as an audio object from the local storage device  in a similar fashion, allocating respective buffers as necessary. It should be appreciated that in some implementations only one audio buffer may be required. Note that, in some embodiments, system memory  and media memory  can be unified as one physical memory device. It should be appreciated that the media memory  is a memory of finite number of bytes, and it serves as a repository for different data components. Compressed MPEG-2 video streams are deposited in A\/V decoder memory  allocated for compressed video and compressed audio, as described above. Decompressed audio is fed into an audio port (not shown) for playback. Further information on the media memory and subcomponents thereof, in addition to other DHCT components can be found in the patent application entitled, DIGITAL SUBSCRIBER TELEVISION NETWORKS WITH LOCAL PHYSICAL STORAGE DEVICES AND VIRTUAL STORAGE, filed on Jul. 30, 2001, assigned a Ser. No. 09\/918,376, assigned to Scientific Atlanta, Inc., and herein incorporated by reference.","One or more programmed software applications, herein referred to as applications, are executed by utilizing the computing resources in the DHCT . Note that an application typically includes a client part and a server counterpart that cooperate to provide the complete functionality of the application.  is a block diagram of an example system memory . The applications may be resident in FLASH memory  or downloaded (or uploaded) into DRAM . Applications stored in FLASH memory  or DRAM  are executed by the processor  (e.g., a central processing unit or digital signal processor) under the auspices of the operating system . Data required as input by an application is stored in DRAM  or FLASH memory  and read by the processor  as need be during the course of application execution. Input data may be data stored in DRAM  by a secondary application or other source, either internal or external to the DHCT , or possibly anticipated by the application and thus created with the application at the time it was generated as a software application, in which case it is stored in FLASH memory . Data generated by an application is stored in DRAM  by the processor  during the course of application execution. DRAM  also includes application memory  that various applications may use for storing and\/or retrieving data.","An application referred to as a navigator  is also resident in FLASH memory  for providing a navigation framework for services provided by the DHCT . The navigator  registers for and in some cases reserves certain user inputs related to navigational keys such as channel increment\/decrement, last channel, favorite channel, etc. The navigator  also provides users with television related menu options that correspond to DHCT functions such as, for example, blocking a display channel or a group of display channels from being displayed in a display channel menu presented on a screen display.","The FLASH memory  also contains a platform library . The platform library  is a collection of utilities useful to applications, such as a timer manager, a compression manager, a configuration manager, a hyper text markup language (HTML) parser, a database manager, a widget toolkit, a string manager, and other utilities (not shown). These utilities are accessed by applications via application programming interfaces (APIs) as necessary so that each application does not have to contain these utilities. Two components of the platform library  that are shown in  are a window manager  and a service application manager (SAM) client .","The window manager  provides a mechanism for implementing the sharing of the screen regions and user input. The window manager  on the DHCT  is responsible for, as directed by one or more applications, implementing the creation, display, and deallocation of the limited DHCT  screen resources. It allows multiple applications to share the screen by assigning ownership of screen regions, or windows. The window manager  also maintains, among other things, a user input registry  in DRAM  so that when a user enters a key or a command via the remote control device  or another input device such as a keyboard or mouse, the user input registry  is accessed to determine which of various applications running on the DHCT  should receive data corresponding to the input key and in which order. As an application is executed, it registers a request to receive certain user input keys or commands. When the user presses a key corresponding to one of the commands on the remote control device , the command is received by the receiver  and relayed to the processor . The processor  dispatches the event to the operating system  where it is forwarded to the window manager  which ultimately accesses the user input registry  and routes data corresponding to the incoming command to the appropriate application.","The SAM client  is a client component of a client-server pair of components, with the server component (not shown) being located on the headend , preferably in the control system  (). A SAM database  (i.e., structured data such as a database or data structure) in DRAM  includes a data structure of services and a data structure of channels that are created and updated by the headend . Herein, database will refer to a database, structured data or other data structures as is well known to those of ordinary skill in the art. Many services can be defined using the same application component, with different parameters. Examples of services include, without limitation and in accordance with one implementation, presenting television instances (available through a WatchTV application ), pay-per-view events (available through a PPV application ), digital music (not shown), media-on-demand (available through an MOD application ), and an interactive program guide (IPG) . In general, the identification of a service includes the identification of an executable application that provides the service along with a set of application-dependent parameters that indicate to the application the service to be provided. As an example, a service of presenting a television instance (media content instance) could be executed by the WatchTV application  with a set of parameters specifying HBO to view HBO or with a separate set of parameters to view CNN. Each association of the application component (tune video) and one parameter component (HBO or CNN) represents a particular service that has a unique service I.D. The SAM client  also interfaces with the resource manager  to control resources of the DHCT .","Applications can also be downloaded into DRAM  at the request of the SAM client , typically in response to a request by the user or in response to a message from the headend . In the example DHCT memory illustrated in , DRAM  includes a media-on-demand application (MOD) , an e-mail application , a PVR application , and a web browser application . It should be clear to one with ordinary skill in the art that these applications are not limiting and merely serve as examples for embodiments of the invention. Furthermore, one or more DRAM based applications may be resident, as an alternative embodiment, in FLASH memory . These applications, and others provided by the subscriber television system operator, are top-level software entities on the network for providing services to the user.","In one implementation, applications executing on the DHCT  work with the navigator  by abiding by several guidelines. First, an application utilizes the SAM client  for the provision, activation, and suspension of services. Second, an application shares DHCT  resources with other applications and abides by the resource management policies of the SAM client , the operating system , and the DHCT . Third, an application handles situations where resources are only available with navigator  intervention. Fourth, when an application loses service authorization while providing a service, the application suspends the service via the SAM (the navigator  will reactivate an individual service application when it later becomes authorized). Finally, an application is designed to not have access to certain user input keys reserved by the navigator  (i.e., power, channel +\/\u2212, volume +\/\u2212, etc.).","The MOD application  provides the user with lists of available media content titles for each media content instance to choose from and with media content instances requested by the user. The MOD application  provides media content to the user by engaging, typically, in a direct two-way IP (Internet Protocol) connection with VOD content servers (not shown) that would be located, in one embodiment, in the headend .","An executable program or algorithm corresponding to an operating system (OS) component, or to a client platform component, or to an application, or to respective parts thereof, can reside in and execute out of DRAM  and\/or FLASH memory . Likewise, data input into or output from any executable program can reside in DRAM  or FLASH memory . Furthermore, an executable program or algorithm corresponding to an operating system component, or to a client platform component, or to an application, or to respective parts thereof, can reside in FLASH memory , or in a local storage device (such as the storage device ) externally connected to or integrated into the DHCT  and be transferred into DRAM  for execution. Likewise, data input for an executable program can reside in FLASH memory  or a storage device and be transferred into DRAM  for use by an executable program or algorithm. In addition, data output by an executable program can be written into DRAM  by an executable program or algorithm and be transferred into FLASH memory  or into a storage device. In other embodiments, the executable code is not transferred, but instead, functionality is effected by other mechanisms.","Referring again to , the DHCT  may also include one or more wireless or wired interfaces, also called communication ports , for receiving and\/or transmitting data to other devices. For instance, the DHCT  may feature USB (Universal Serial Bus), Ethernet (for connection to a computer), IEEE-1394 (for connection to media content devices in an entertainment center), serial, and\/or parallel ports. The user inputs may be, for example, provided by an input device including a computer or transmitter with buttons or keys located either on the exterior of the terminal or by a hand-held remote control device  or keyboard that includes user-actuated buttons, or even aural input (e.g., voice activated).","The DHCT  includes at least one storage device  to provide storage for downloaded media content. The storage device  can be an optical storage device or a magnetic storage device, and is preferably a hard disk drive. The storage device  comprises storage for media content and\/or data that can be written to for storage and later read from for retrieval for presentation. The storage device  preferably includes two hard disks  and , with each including a corresponding buffer space TSB  and TSB , as will be explained further below. Alternatively, the DHCT  can be coupled to two storage devices, each with one hard disk. Alternatively, a storage device can be used that uses different buffer spaces on one hard disk, or the storage device can include more than two hard disks, or platters. Throughout this disclosure, references relating to writing to or reading from the storage device , or references regarding recordings from or to the storage device  will be understood to mean that such read or write operations are occurring to the actual medium (for example, the hard disk  and\/or ) of the storage device . The storage device  is also comprised of a controller  that receives operating instructions from a device driver  of the operating system  (as described below) and implements those instructions to cause read and\/or write operations to the hard disks  and\/or .","The device driver  communicates with the storage device controller  to format the hard disks  and , causing the hard disks to be divided radially into sectors  and concentric circles called tracks , as illustrated by the schematic diagram n of the example hard disk  in . It will be understood to one having ordinary skill in the art that the discussion that follows pertains to hard disk  as well as hard disk . Note from  that the same number of sectors  per track  are illustrated, but other embodiments with a different number tracks per side, sectors per track, bytes per sector, and in different zones of tracks, are within the scope of the preferred embodiments of the invention. The sector  is the basic unit of storage on the hard disk . In one implementation, each sector  of a hard disk  can store 512 bytes of user data. While data is preferably stored in 512-byte sectors on the hard disk , the cluster, such as example cluster , is typically the minimum unit of data storage the operating system  uses to store information. Two or more sectors on a single track make up a cluster.","Referring again to , the storage device  is preferably internal to the DHCT , coupled to a common bus through the communication interface , preferably an integrated drive electronics (IDE) interface or small computer system interface (SCSI), although IEEE-1394 or USB can be used. In other embodiments, the storage device  can be externally connected to (and thus removable from) the DHCT  via the communication port  implemented as IEEE-1394 or USB or as a data interface port such as a SCSI or an IDE interface. In one implementation, under the auspices of the real-time operating system  (as described below) and executed by the processor , and in coordination with the personal video recording (PVR) application , the device driver , and the device controller  (the latter three components described below), downloaded media content (herein understood to also refer to other types of data, in addition to, or instead of, media content instances) are received in the DHCT  via the communications interface , processed as described above, and stored in a temporary cache (not shown) in memory .","The temporary cache is implemented and managed to enable media content transfers from the temporary cache to the storage device , or, in concert with the insertion of a newly arriving media content into the temporary cache. In one implementation, the fast access time and high data transfer rate characteristics of the storage device  enables media content to be read from the temporary cache in memory  and written to the storage device  in a sufficiently fast manner. Orchestration of multiple simultaneous data transfer operations is effected so that while media content is being transferred from the cache in memory  to the storage device , new media content is received and stored in the temporary cache of memory . In other implementations, the downloaded media content is received through the communications port  in the DHCT  and then transferred directly to storage device , thus bypassing the temporary cache.","The operating system , the device driver , and the controller  communicate under program execution in the processor  and\/or via the interrupt and messaging capabilities of the DHCT  and thus cooperate to create a special file in one of the hard disk sectors in each hard disk  and  called a file allocation table (FAT) (not shown). The FAT is where the operating system  stores the cluster and file information about each of the hard disks  and , and which clusters are assigned and associated with a file and thus used to store which media content instance files. The operating system  can determine where a file's data is located by using the directory entry (not shown) for the file and the entries of the FAT. The directory entry gives information about a directory such as its related files and subdirectories and create time, and special permissions. A FAT entry describes the physical locations of data associated with a media content downloaded to the hard disks  and  of the storage device . The FAT also keeps track of which clusters are free, or open, and thus available for use. Updates to the FAT are provided for by the operating system , or the device driver , or a combination of both. Writes to each of the hard disks  and  are coordinated between the PVR application  (described below), the operating system , the device driver , and the storage device controller .","The PVR application , the operating system , and the device driver  execute respective programmed instructions in the processor . The processor , the storage controller , and the demultiplexing system  communicate via interrupt and messaging capabilities of the DHCT . The PVR application , in communication with operating system , the device driver , the storage device controller , and the demultiplexing system , effects retrieval of compressed video streams, compressed audio streams, and data streams corresponding to one or more media content instances from the storage device . The retrieved streams are deposited in an output cache in the storage device  and transferred to DRAM , and then processed for playback according to mechanisms well known to those having ordinary skill in the art. In some embodiments, the media content instances are retrieved and routed from the hard disks  and\/or  to the video and audio decoding system  and  simultaneously, and then further processed for eventual presentation on a display device or other device.","The PVR application  provides for media content recording functionality by enabling the temporary writing to, and if requested, more permanent recording (i.e., relatively permanent) to the storage device . Media content can be transmitted (or downloaded) from a remote location, such as, for example, a remote server located in the head end , or from a home communication network, or from other consumer electronic devices. Downloaded media content that is received at each tuner of tuner system  is temporarily buffered, or stored, on the hard disk of the storage device. The corresponding space on each hard disk is called a buffer space, or a time shift buffer (TSB). In a preferred embodiment, each tuner in tuner system  has a respective TSB. In one implementation, tuner  receives media content for buffering to TSB . Likewise, the second tuner  receives media content for buffering to TSB . Moreover, media instances sourced from a device such as a camera attached to the DHCT  via the communication port  has a respective TSB (not shown). Note that buffering is understood to mean temporarily storing media content, received from a local attached device, or either from reception of a broadcast digital channel, and\/or a digital compressed version of a broadcast analog channel, and\/or data, into the buffer spaces (or TSBs) of the storage device .","Under normal operation, the PVR application  effectively associates a temporary recording designation with the media content received into the TSBs. The media content stored in the TSBs will either be deleted (i.e., the clusters storing the media content will be configured as writeable for eventual write operations that overwrite the media content within those clusters) or retained (through election by the user, as one example) as a permanent recording. A permanent recording will be understood to include media content that is stored for an extended period of time as decided by the user. Permanent recordings are stored in non-buffer clusters (i.e., not in clusters assigned to the TSBs) that are not used for the TSBs in instances when the user elects in advance to make a scheduled recording of a media content instance that has not yet been tuned to at the DHCT . A permanent recording can also be achieved by selecting a media content instance stored in the TSBs and designating the media content instance as permanent. In this latter implementation, the designated media content is stored in clusters that are configured from TSB clusters to permanent recording clusters (non-buffer clusters). To compensate for the re-designation of clusters to a permanent recording, the device driver  preferably assigns and associates an equivalent number of clusters to the TSB that it obtains from a pool of available unused and\/or writeable (e.g., repossessed) clusters thus permitting continuance of normal TSB behavior and management. Thus, permanent recordings will preferably be more permanent than media content in the TSBs, and permanent recordings can eventually be deleted from the disk space, typically at the explicit request of a user, as one example.","There is a duration associated with the TSBs, which represents how much data is held by the TSBs. This duration could represent, in one embodiment, actual media content instance time. The PVR application , in such a time-duration embodiment, will preferably maintain a substantially constant buffer space capacity suitable for a certain duration of media content instance time, for example, 3-4 hours worth of media content instances. Media content instance-time tracking is related to hard disk space tracking if a constant data rate, or buffering rate, is assumed or estimated. In a preferred embodiment, the duration of the TSBs represents hard disk space. The PVR application  can set a buffer size capacity, for example 3 gigabytes (GB), and then track the disk space used for the TSBs to ensure a substantially constant TSB capacity. For example, before the PVR application  effects a write to the storage device , it can query the device driver  (through the operating system ) to determine the available hard disk space. After the write operation, the PVR application  again can poll the device driver  to get an update on available hard disk space.","The TSBs can be managed according to several mechanisms. In one embodiment, each media content instance that is received at either of the tuners of tuner system  prompts the PVR application  to cause each media content instance to be downloaded to the hard disk  or  and associated as a media content instance file under a designated media content instance filename. This media content instance filename is recorded in a FAT that maintains a list of the corresponding clusters storing the media content instance file. The PVR application  also creates a management file that maintains a data record that preferably points to the corresponding filename and includes a data record that includes, among other elements, guide data and the receipt time of the downloaded media content instance. The guide data includes the scheduled start time and stop time of the downloaded media content instance as well as other attributes and information that pertain to the media content instance.","The receipt of the downloaded media content instance is also recorded by the PVR application  (through coordination with the operating system  and an internal clock ) as a real-time value. The PVR application  is either alerted to the start of a media content instance, in one implementation, from a keypress event (e.g., when a user tunes to a desired display channel). In another implementation, the PVR application can use a polling or timing mechanisms (via timer , as one example) in cooperation with the internal real-time clock  and guide data. The PVR application  provides the operating system  with the scheduled stop time (from guide data, such as from an interactive program guide) of the downloaded media content instance in order to set up a timer interrupt (or in other embodiments, polls the operating system ) with the operating system . The operating system , in coordination with the real-time clock  within the DHCT , alerts the PVR application  () to the end of the received media content instance.","Further, the PVR application  preferably maintains the management files with an organization mechanism such as a linked list, wherein each management file is associated with each of the media content instances located on the hard disks  and . Read requests for one of the downloaded media content instances in the TSB  occurs by the PVR application  searching the linked list for the requested media content instance, and providing a graphics user interface (GUI) (not shown) on a display screen based on the information maintained in the corresponding management file. Furthermore, a bi-directional link-list mechanism can be employed for arbitrary entry and to search forward or backward in relation among media instances.","Further information pertaining to this embodiment for creating and maintaining the TSBs can be found in the patent application entitled, SYSTEM AND METHOD FOR CONTROLLING SUBSTANTIALLY CONSTANT BUFFER CAPACITY FOR PERSONAL VIDEO RECORDING WITH CONSISTENT USER INTERFACE OF AVAILABLE DISK SPACE, filed Dec. 6, 2001 under Ser. No. 10\/010,270 and assigned to Scientific Atlanta, herein incorporated by reference.","Another embodiment for maintaining and managing the TSBs includes associating a single file for each TSB, and controlling the allocation and deallocation of clusters in the disk space at the device driver  level. In this embodiment, further described in the patent application entitled, DISK DRIVER CLUSTER MANAGEMENT OF TIME SHIFT BUFFER WITH FILE ALLOCATION TABLE STRUCTURE,\u201d filed Dec. 5, 2001 under Ser. No. 10\/005,628 and assigned to Scientific Atlanta, herein incorporated by reference, the PVR application  requests the allocation of disk space for a single file for each TSB. For each TSB , the device driver , implemented as either a separate software module, or integrated with the operating system , allocates enough clusters and assigns them to the respective file to meet the size requirement designated by the PVR application . Media content instances downloaded and written to the TSBs are preferably tracked by time. The device driver  provides a software generated pointer, called Normal Play Time (NPT), which points to locations within files and locations within media content instances within those files. Based on the Lightweight Stream Control Protocol, NPT can be thought of as the clock associated with a video asset (as distinguished from the real-time clock  for the DHCT ).","For every file that is created for media content downloaded to the storage device , an NPT is generated. There is an NPT for the read head of the storage device  and for the write head of the storage device . For writing media content to the storage device  for a newly created file (e.g., a TSB file), an NPT is created for the write head of the storage device  with an initial value of zero. In one implementation, the device driver  receives a periodic interrupt (for example every 5-10 msec) set up by the PVR application  through the computer services of the operating system . This interrupt is synchronized with the internal real-time clock  of the DHCT  in order to advance the pointer (i.e., the NPT) at a substantially constant rate. The NPT continues to increase in value (from an initial value of zero) until the associated file is closed. For the read head of the storage device , the NPT starts at 0 at the start of the file, advances in real time in normal play mode, advances faster than real time in fast forward mode, decrements in rewind mode, and is fixed when the video is paused.","The PVR application  maintains a data structure for every downloaded media content instance. There are one or more data structures preferably maintained on the hard disks  and  of the storage device , but the data structures can also be maintained in memory . The data structures include, for example, the NPT values defining the start and end times of the downloaded media content instance, the real-time values corresponding to the start and end times of the media content instances, as well as the corresponding media content instance guide data, among other elements. The device driver  maintains the mapping between NPT and the cluster and sector locations of the media content in a separate look-up table data structure (not shown) preferably located on the hard disks  and . In one embodiment, the device driver  can sample the current write location (i.e., cluster and sector location provided by the storage device controller ) as the write head of the storage device  advances and store that cluster and sector location in the look-up table data structure along with a corresponding NPT value. This sampling can occur, for example, every 5-10 msec. In an alternative embodiment, the device driver  can record an initial sample and through an estimation algorithm (e.g., interpolation) estimate file locations and locations within said files. When the PVR application  references a particular media content instance (for example where a user seeks to rewind to a downloaded media content instance in the hard disk ), the PVR application  passes the stored start and stop NPT values for that media content instance to the device driver , and the device driver  determines the hard disk locations from the look-up table data structure. The PVR application  correlates NPT read values for locations within the media content instances to the real-time clock value. With the real-time start and stop values and guide data maintained in a data structure, as well as the correlated read-NPT to real-time values, the PVR application  can produce a GUI that provides the user with information that includes what portion of a buffered media content instance the user is currently viewing.","As described above, the user preferably permanently records from the TSBs by designating as permanent a currently viewed media content instance during real-time viewing or returning (e.g., rewinding) to any part of a media content instance in the TSBs and selecting record from a remote device , or alternatively, from selecting a record button (not shown) on the DHCT . An example remote control device  to provide input to the DHCT  is illustrated in . A display channel is selected, and changed, by a user, typically via pressing a key or button on the remote control device . Rewind  and fast-forward  buttons enable a user to access buffered media content instances in the TSBs  and . A record button  enables the user to designate as permanently recorded any media content instance buffered into the TSBs  and , as described below. A pause button  (and a stop button ) enables the user to pause a media content instance, or pause during a search for a particular media content instance. A playback button  enables the playback of a media content instance. \u201cA\u201d , \u201cB\u201d , and \u201cC\u201d  buttons can correspond to certain application-defined functions that have a corresponding \u201cA\u201d, \u201cB\u201d, or \u201cC\u201d symbol displayed in a GUI presented on a display device. A list button  can be used to evoke various PVR application  user interface screens. Also included is a select button  for selecting an option on a display screen, and up and down arrows  and  for scrolling through displayed options. Many alternative methods of providing user input may be used including a remote control device with different buttons and\/or button layouts, a keyboard device, a voice activated device, etc. The embodiments of the invention described herein are not limited by the type of device used to provide user input.",{"@attributes":{"id":"p-0098","num":"0097"},"figref":["FIG. 4","FIG. 2","FIG. 3A"],"b":["341","300","301","373","300","1","376","11","1","354","345","2","358","345","301","2","378","1","376","2","378"]},"While tuner  receives media content of the first display channel for storage into TSB  and display on the TV , assume a user changes from the first display channel to the second display channel. In order to receive media content at tuner , the operating system  () preferably performs a resource query to determine if the resources exist to tune and buffer both display channels. For instance, if tuner  was currently resourced to perform a scheduled recording, then the second display channel, in one implementation, may not be received at tuner , and thus the content of the second display channel may have to be received at tuner  and TSB  at the expense of the media content stored in TSB  and received from the first display channel.","In another implementation, if the second display channel is transmitted over the same center RF frequency as the first display channel, as determined by the operating system  () from a display channel number to center frequency association table (not shown) in memory  (), resourcing of tuner  is not necessary and media content of both the first and second display channel are received via tuner  and deposited into the respective TSB  and TSB .","Assume the user changed from the first display channel to the second display channel, and that the second tuner  is an available resource. The media content of the first display channel, in one embodiment, will not be \u201cdeleted\u201d (i.e., written over or its associated clusters made writeable) but instead retained for now, and the media content (after the display channel change) will continue to be received at tuner  and downloaded into TSB  from the first display channel. The point in time when the user resources tuner  to receive the second display channel is \u201cmarked\u201d and stored in memory  and thereafter copied to a PVR application data structure (not shown) associated with the buffer spaces of the storage device  () when enough time of buffering the second display channel elapses. Buffering to storage device  is preferably effected by the caching the data to memory  () and thereafter reading the respective data from memory  and writing it to storage device . The buffering is timely orchestrated so that previously deposited data to memory  is read while additional data is being written to memory. Further, a pointer to the location of the hard disk  where the media content of the first display channel is buffered when tuner  is resourced is also recorded in the data structure to enable later access and\/or retrieval, as described below.","In an alternate implementation, memory  () in DHCT  () is of sufficient size to permit buffering of data up to a predetermined elapsed time required according to a threshold before proceeding to transfer the cached data in memory  to storage device  (). Consequently, less bookkeeping is required on the storage device .","The amount of elapsed time deemed to be sufficient is determined by comparison to a first programmable threshold value. The threshold value can be preset at compilation time by the application developer. In one preferred embodiment, the programmer programs the threshold to have an initial default value that can be modified throughout the course of time by the viewer according to the viewer's preference via an interactive configuration application (not shown) in which the viewer makes selections in a displayed graphical user interface (GUI) by entering information with key presses or by entering alphanumeric information with an input device such as a remote control device  (). For instance, desired preferences and configuration can be entered as part of an overall general settings application  ().","The PVR application  () recognizes the keypress event associated with the display channel change, and determines the time of the key press from time and clock provisions in the DHCT  () and from services of the operating system  (). The time of the key press is stored in memory  () and thereafter if enough time elapses, as defined by a first threshold, for example, while buffering the second display channel, the time of the key press is also annotated (written) into the storage device  with annotations associated with the respective media content. Annotations include information required to retrieve the media content downloaded to the storage device  (). Such information includes the time that the media content was received, information to fulfill playback and other navigating modes, characteristics of the media content, elapsed time of buffering, and a pointer to the location of the downloaded media content, among other information. If enough time elapses, an address marker associated with the start of where the media content corresponding to the second display channel is downloaded is also stored on the hard disk  or  () in the storage device  () as part of the media content's annotations. The PVR application  stores these values in memory until it determines that sufficient time (according to a first threshold) has elapsed and then also stores them in the hard disk  or  by reading their respective information from memory  and writing it to hard disk  or .","The PVR application  () waits until a next input state regardless of whether enough time has elapsed to store annotations in the storage device  (). A next input state from a set of possible next input states includes a viewer's input such as a keypress event that is possibly associated with returning to the first display channel (when that occurs). A next input state can alternatively correspond to a key press corresponding to the currently displayed channel (that is, the second display channel) or to a third display channel. A key press that selects the second display channel while the user is currently viewing the media content of the second display channel may be a viewer's mistake, in conventional television systems. However, in the preferred embodiments, it can actually signify a desired effect by the viewer such as to give precedence to buffering the second display channel over the buffering of a first display channel. In one embodiment, this viewer desired precedence behavior for buffering the second display channel becomes effective indefinitely. In an alternate embodiment, the viewer desired precedence behavior for buffering the second display channel becomes effective if the viewer subsequently selects to display a third display channel within a specific amount of elapsed time corresponding to less than a second threshold.","The return to the first display channel causes the PVR application  () to, in one implementation, return to the point in the media content instance that the user left off viewing the media content associated with the first display channel to go to the media content of the second display channel. In other implementations, according to a programmed default behavior or to a viewer's configured preference, the user can be returned to the real-time tuned position to receive the current media content, with the ability to rewind back to where the user left the media content of the first display channel. The first display channel and the second display channel can download a single media content instance to each of the buffer spaces  and  between display channel changes, or a plurality of media content instances can be downloaded to each respective buffer space, depending on the amount of time, or the download duration, that the media content is received in each respective buffer space. In other words, the user is free to change the display channel at any point within or after a media content instance presentation, and thus at any point in time, either buffer space can temporarily store, for example, a portion (e.g., 30 seconds) of a media content instance, or enough media content instances to reach buffer space capacity, among other examples. Such buffering behavior is determined in part by a set of programmed thresholds, including a first and a second threshold as described above. Alternatively, each threshold in the set of thresholds can be fixed to respective empirically determined values by the application developer. In another embodiment, some of the thresholds in the set may be programmed to be configurable and others to fixed values.","When the user decides to change display channels (e.g., switch to a third display channel), the media content of the third display channel can go to either TSB  or TSB . In one embodiment, according to a programmed behavior, when the media content of the third display channel is downloaded to one of these buffer spaces, the media content already stored there is deleted (e.g., overwritten or made writeable) in order to receive and store the media content of the third display channel. A user can implement a preference as to which buffer space media content to delete.","In other embodiments, a currently buffered display channel's media content is deleted after a display channel change according to a set of controlling rules based on the respective values of a set of input variables that effect one or more outcomes or resulting behaviors. The controlling rules are programmed by the application developer and employ measured input variables that preferably connote elapsed time as measured in the background throughout the course of time by the PVR application  (). Relational input variables are also employed by the programmed controlling rules. The relational input variables express respective comparisons of the value of an input variable type that expresses elapsed time for a first display channel to the value for a second display channel. As a non-limiting example, a relational input variable may be the fraction obtained by division of the values of the two corresponding input variables being compared or their reciprocal.","The PVR application , the operating system , the controller , the general settings application , and the device driver  () execute respective programmed instructions in the processor  (). The communication between these entities is preferably via interrupt and\/or messaging capabilities of the DHCT  as well as by sharing of data output by one of these entities and written in memory  that serves as input to one or more of any of these entities by reading the data from memory . The data output by one or more of these entities can be input data to itself. Programmed controlling rules are a programmed component part of the PVR application . The controlling rules comprise ingredients employed in the preferred embodiments of the invention to make decisions, for example decisions as to priority of buffering and tuning resources. This rule-based system of the preferred embodiments includes variables that feed into their antecedents, and each rule produces a consequence or a prediction. The set of consequences may in turn be input to another set of rules to provide an overall output, or the consequences may be input to other mechanisms (e.g., statistical classifiers, syntactical classifiers, or other inference engine mechanisms used with inference engines in expert systems) to make a decision. As will be described further below, variables can be assigned coefficients. Consequences produced by the rules can be assigned a weight as well. The weights can change throughout the course of time, for example in a dynamic system. If probability or a confidence\/certainty factor is assigned to a variable (e.g., a favorites channel), then the rule based system can be generically categorized as a fuzzy-set system.","The scope of outcomes or actions conducted by the execution of the programmed controlling rules, include one or more of the following:\n\n","The order in the actions conducted can differ, and no particular order is implied by the list A-J described above. A tuner resource change comprises the discontinuation of receiving a display channel's media content, and receiving the media content of another display channel requested by the viewer. A display resource change comprises the discontinuation of displaying a received display channel's media content and displaying on the TV  the media content of a newly requested display channel. A buffer resource change comprises the discontinuation of a received display channel and deletion of the corresponding media content that is buffered, in addition to buffering the media content of another received display channel in the TSB.","With continued reference to , if all the resources are available to tune, buffer, and display the media content of the third display channel (i.e., newly requested display channel), no discontinuation is required in the signal flow path through the DHCT. However, if there is a conflict in resources used such that the current resources are fully employed for tuning, buffering, and\/or displaying the first and second display channel media content, then the controlling rules of the preferred embodiments will provide for a discontinuation preferably in reverse order (e.g., from display to source) to the order used to establish a connection between resources to tune, display, and\/or buffer the media content, and connection in the forward order (e.g., from source to display) for receiving, buffering, and displaying the media content for the newly requested display channel.","For the example implementations provided, it will be assumed that a newly requested display channel is to be both displayed on the television  and buffered, with the understanding that the preferred embodiments can be used to accomplish either one of these operations alone or in combination. A couple of considerations are worth noting in the context of proper resource management. For example, according to rules and precedences configured, and with continued reference to , the second display channel may be discontinued from being displayed, but its buffering may continue. The first display channel that was not being displayed but only buffered may stop buffering, and its associated tuner may discontinue sourcing the media content of the first display channel in favor of sourcing the newly requested display channel. Further, the media content of the first display channel downloaded to the buffer can be deleted in favor of the media content of the newly requested display channel. Thus, although tuning, displaying, and\/or buffering media content from one display channel can be completely discontinued in favor of a newly requested display channel, it is also possible that the signal flow for both display channels (the first and the second) will in some way be affected to provide resources for the newly requested display channel media content. As described above, the discontinuation in signal flow is preferably done in the reverse order (i.e., reverse to its forward connection), such that the display for the second display channel is discontinued first, and then the buffering and then the tuning is discontinued for the first display channel, as one example.","Another consideration in resource management includes the fact that discontinuation will vary in the signal flow path and the resources affected, in some implementations, depending on whether the received display channel is analog or digital.  will now be used to further illustrate the signal flow paths through a DHCT, and in particular, how resources are employed to receive (tune), buffer, and\/or display media content sourced from analog transmission signals and digital transmission signals. The timing diagrams of  will also help to provide added understanding of the outcomes described above in A-J.",{"@attributes":{"id":"p-0115","num":"0124"},"figref":["FIG. 5","FIG. 3A","FIGS. 6-11"],"b":["501","345","314","314","322","502","503","305","504","348","341","505","505","504","503"]},{"@attributes":{"id":"p-0116","num":"0125"},"figref":["FIG. 6","FIG. 5"],"b":["601","605","501","505","610","602","352","611","352","375","612","373"]},{"@attributes":{"id":"p-0117","num":"0126"},"figref":"FIG. 7","b":["701","314","352","702","375","703","373","704","373","375","705","322","706","322","305","707","708","341","709"]},{"@attributes":{"id":"p-0118","num":"0127"},"figref":"FIG. 8","b":["373","345","314","801","352","802","375","803","373","804"]},{"@attributes":{"id":"p-0119","num":"0128"},"figref":["FIGS. 9-11","FIG. 9"],"b":["901","345","314","316","902","322","903","305","904","341","905"]},{"@attributes":{"id":"p-0120","num":"0129"},"figref":["FIG. 10","FIG. 9"],"b":["1001","345","314","316","1002","316","1003","322","1004","1005","904","905","316","317","1010","309","1011","1012","352","375","1013","373","1014"]},{"@attributes":{"id":"p-0121","num":"0130"},"figref":"FIG. 11","b":["1101","345","314","316","1102","317","1103","309","1104","317","352","1105","375","1106","373","1107","373","375","1108","322","1109","1110","305","1111","341","1112"]},"Thus as shown, the management of resources for tuning, displaying, and\/or buffering media content from a plurality of display channels includes, in addition to the considerations mentioned above, determining whether the resources are processing analog signals, digital signals, or a combination of both.  is a flow diagram of an example resource management process that can be implemented when the first and\/or second display channel signal flow needs to be discontinued, in whole or in part, to provide for the tuning, buffering and display of a newly requested display channel. Assume that the desired signal flow for the newly requested display channel is as shown in the configuration illustrated in  (e.g., display in parallel to buffering), or in other embodiments, the configuration shown in  (time-shifted display). Step  provides that media content is provided in a first display channel for display to the display device and in parallel, for buffering to a storage device, much like the configuration shown in . Step  provides that the second display channel is now being displayed and buffered (which results in discontinuation of the display of the media content of the first display channel), and the first display channel is resourced within a configuration that appears much like the configuration shown in . Similar actions and configurations can apply for analog signals, as will be described below.","Step  includes receiving a request for a new display channel. For purposes of discussion, it will be assumed that the new display channel is provided as a digital signal, with the understanding that the steps provided herein can be generally applied for an analog signal, or a combination of analog and digital signals. Step  includes discontinuing the display of the media content of the second display channel on a display device (e.g., TV). For example, if the second display channel was currently providing media content to the display device, such as that shown in the timing diagram of , the following forward path steps would be reversed, preferably in the order given: steps , , , and then . At this stage, the first and the second display channel would have a forward signal path that closely resembles  for a digital signal (or steps , ,  through  of  for an analog signal).","Step  includes determining a precedence for resourcing a newly requested display channel according to a set of controlling rules, as will be described below. If the rules mandate that the first display channel has precedence, then discontinue the buffering of the media content of the second display channel (step , ). According to the example configuration shown in , such an action would result in discontinuing the signal flow path according to the following order: steps , , , , and  (or steps -, , and  of  for an analog signal). Step  () includes using the tuner resources, the buffer resources, and the display resources previously employed for the second display channel to resource the media content of the newly requested display channel.","Referring to , with continued reference to , if the rules mandate that the second display channel has precedence, then buffering for the second display channel (for example, as shown in steps  through  of  for a digital signal, or steps , , - of  for an analog signal) will continue and the first display channel buffering path will be discontinued (step ). Step  includes using the tuner resources, the buffer resources, and the display resources previously employed for the first display channel to resource the media content of the newly requested display channel.","In one implementation, the repossession of \u201cbuffering resources\u201d of the received display channel to be displaced uses a form of bookkeeping. In one embodiment, the point on the hard disk (e.g.,  or , ) where the media content to be deleted started will preferably be recorded (for example in the PVR data structure or in annotations in the storage device  ()) such that the newly requested display channel media content will start at the point where the deleted media content started. Another form of bookkeeping that can be used in other embodiments includes subtracting the amount of total buffer capacity after such deletion. As described briefly above, the determining of precedence relies preferably on a set of controlling rules, which in turn rely on a set of input variables, and\/or user inputted preferences. One of the input variables to the controlling rules, including those rules that control discontinuation of buffering of a display channel's media content, can be the length of contiguous time of buffering the display channel's media content (and deletion of buffered media content). Alternatively, the total time of buffering a respective media content instance (i.e., not necessarily contiguous time) can be employed.","Another input variable can be the length of time that a buffered display channel's media content is displayed on TV. Whether a buffered display channel's media content is currently displayed or last displayed on TV may cause this input variable to be weighted more significantly in the controlling rules. Hence, the multiplicative coefficient of an input variable may be dynamically adjusted according to a user's viewing patterns. The relationship between the length of buffering elapsed time between media content of a first display channel currently being buffered to media content of a second currently buffered display channel can also be another input variable.","The relationship between the length of buffering elapsed time of a display channel's media content currently being buffered to its total time displayed on TV throughout the course of buffering can also be an input variable. Another input variable to the controlling rules can be whether a display channel currently being buffered is included in a favorites channel list, such as a list of preferred display channels selected or entered by the viewer during the course of a configuration session. A favorites channel list, as well as all preferences and configurations aforementioned herein are stored in memory (e.g., DRAM ) and in non-volatile memory, such as FLASH memory  () for its recovery in the event of a power outage. The storage device  () can also serve for storing preferences and configurations and recovery upon power-up. Whether the favorites channel list influences the controlling rule is preferably a configuration and\/or preference entered by the viewer during a configuration session.","In one embodiment, when the favorites channel list is employed as input to the controlling rules, a different set of controlling rules is executed. Alternate values for thresholds that control relational input variables can be employed when the favorites channel list is part of the input to the controlling rules. Hence, if a display channel being buffered is in the favorites channel list, it will influence the controlling rules in a way more towards continuing its buffering (or equivalently, less likely of being displaced and discontinued due to sourcing the tuner and respective TSB for media content of a newly requested display channel).","An input variable may be designed to exhibit a non-linear range when controlled by a respective threshold or set of thresholds. A first input threshold is preferably assigned to control the value of a first variable. A first type of input variable may be assigned a value of \u201cno significance\u201d (e.g., zero) if below its respective first controlling threshold value. Furthermore, the value of a second type of input variable may be controlled with a first controlling respective threshold and a second respective controlling threshold. If the value of the second type of input variable is above or equal to a first respective controlling threshold but below a second respective controlling threshold value, it retains its original value. Furthermore, the value of a third type of input variable may be controlled with a first respective controlling threshold and a second respective controlling threshold but may be assigned a maximum value when its value is above a second respective controlling threshold value. As would be understood and appreciated by those having ordinary skill in the art, the comparison of an input variable's value to a threshold value may be based on programmable operations, including \u201cif less than the value\u201d, \u201cless than or equal to\u201d, \u201cgreater than\u201d, \u201cgreater than or equal to\u201d, \u201cequal\u201d, and\/or \u201cnot equal.\u201d","A fourth type of input variable may be controlled by assigning a respective \u201cno significance\u201d value indirectly or directly per a viewer's input. A fifth type of input variable may be controlled by assigning a respective \u201cno significance\u201d value indirectly or directly per a viewer's input to configure a desired buffering, tuning and\/or display behavior during a configuration session. A sixth type of input variable may be controlled by assigning a respective \u201cmaximum value\u201d indirectly or directly per a viewer's input. A seventh type of input variable may be controlled by assigning a respective \u201cmaximum value\u201d indirectly or directly per a viewer's input to configure a desired buffering, tuning and\/or display behavior during a configuration session. In this way, the value of some and possibly all input variables can be modified to a non-linear range of values according to their actual value. The actual value of an input variable can be a measured value, a user input value, or a default value assigned by the programmed application. Each input variable may be further weighted multiplicatively with a respective coefficient that pertains to the importance of the respective input variable with respect to the complete set of input variables employed by the controlling rules. For example, a first controlling rule has a first multiplicative coefficient for a first input variable and a second controlling rule has a second multiplicative coefficient for the same first input variable.","Throughout the course of time, the PVR application  () employs OS services such as time posting and clock access to allow updating of values for each respective input variable in the set of input variables, and to be updated according to the \u201ctime posting granularity\u201d of the OS  and according to the granularity of timer  and clocks  (one is shown) of DHCT . Values of input variables are stored in memory  () with annotations pertaining to a file in the storage device  ().","Upon a viewer's input entered via an input device such as a remote control device  (), the PVR application  executes on the processor  () to enter a machine state wherein the PVR application  () assesses and determines available resources such as (1) tuners for sourcing media content of a display channel selection by the viewer, (2) TV display for displaying a display channel's media content, (3) compression engines for compressing analog signals, (4) decompression engines for decoding digital signals, (5) communication interfaces for access to and from the storage device, and (6) TSBs for buffering the respective display channel's media content. Determination of resources is part of the controlling rules in one embodiment. When the PVR application  determines the lack of a required resource, controlling rules are executed to effect the desired change according to the viewer's input requesting a new display channel, a prior entered viewer's configuration and prioritization, and\/or according to set of input variables.","Prior to the execution of the controlling rules, pre-processing of the applicable input variables is preferably conducted. The pre-processing module  () includes processing of the controlling rules and is preferably included in the PVR application  (), although similar functionality can be found in other applications or as a separate module. In the pre-processing module , the respective values of input variables is read from memory . For an applicable input variable, its respective value is compared to one or more thresholds assigned to that particular input variable and a modified value for the input variable is obtained. Hence, the preprocessing module  maps the actual value of each input variable required to be modified to a desired range according to the predetermined set of thresholds assigned to control the respective input variable. Thereafter, each pre-processed input variable is multiplied by its respective weight coefficient and the set of controlling rules are executed to obtain one or more outcomes that effect one or more resource changes.","The following description will include an example implementation, based on , using some input variables to illustrate a rule-based system that determines priority of resources to tune, buffer, and display a third display channel when two other display channels are consuming the resources needed for the third display channel. One way to prioritize which buffer space of the storage device  () to delete of media content is to prioritize the cumulative media content in each buffer space by evaluating input variables such as download duration. For example, if the user was viewing the first display channel for 5 hours, and then decided to \u201cchannel surf\u201d (i.e., change display channels in brief succession) over 1 through \u201cN\u201d display channels, then it is probable that the content downloaded from the first display channel is of higher significance, or of a higher priority, than the media content downloaded from the surfed display channels. Thus, with each display channel change, a tuner and buffer conflict arises whereby media content downloaded from prior display channels into TSB  and\/or TSB  are at risk of being deleted to accommodate the download of the newly requested display channel. It will be assumed that the most recently tuned display channel will be displayed. The conflict of tuning and buffering can be addressed, in one implementation, by establishing a system that prioritizes the download duration to each buffer space according to controlling rules.","In the preferred embodiments, the buffering duration of the media content of the first display channel up to the point of the display channel change (to the second display channel) is compared to the buffering duration of the media content of the second display channel. For example, the user can be viewing a series of media content instances over a span of hours on the first display channel. The user then decides to look at the score of a football game on the second display channel. The point in the presentation of the media content instance of the first display channel when the user switched to the second display channel is \u201cmarked\u201d, and this \u201cmark\u201d, the buffering duration, and the displayed duration for the first display channel are stored in a PVR data structure with its pertinent annotations (not shown). The user is now viewing the football game on the second display channel, which is preferably received at tuner  and buffered to TSB . The media content of the first display channel continues to be downloaded to TSB . Assume the user waits a few minutes before the score comes up on the screen display for the football game, and then decides to go to a third display channel.","Assuming the two tuner DHCT illustrated in , the user selects the third display channel on his or her remote control device  (). The PVR application  () executes the set of controlling rules and according to the outcome of the rules, makes a determination as to which tuner (tuner  or tuner ) to resource as well as the respective applicable behavior to effect. The PVR application  makes this determination by executing the programmed controlling rules that effectively compare the buffering duration (stored in the PVR data structure) of the first display channel with the buffering duration of the second display channel (the football game) by the pre-processing (via the pre-processing module  ()) of applicable input variables and execution of controlling rules. Since the difference in buffering durations is measurable in hours, the second display channel is discontinued, the second tuner , in one implementation, is then resourced for the third display channel and the associated buffered media content (i.e., the game in TSB ) is deleted in order to receive and store the media content of the third display channel.","If shortly after switching to the third display channel, the user decides to switch to a fourth display channel, the PVR application  () does a similar evaluation of buffering durations. The buffering duration of the first display channel (stored in the PVR data structure) is compared to the buffering duration for the third display channel. Again, in one implementation, due to the large difference in buffering duration (or because the buffering duration of the third display channel did not meet sufficient elapsed time according to a first threshold), the third display channel is discontinued, the second tuner  is again resourced for the fourth display channel, and the TSB media content of the third display channel is deleted to receive the media content of the fourth display channel, while the media content of the first display channel continues to be buffering and retained in TSB .",{"@attributes":{"id":"p-0139","num":"0148"},"figref":["FIGS. 13-17","FIG. 4"]},"With continued reference to ,  is a flow chart that establishes an arbitrary starting point for prioritizing the buffering durations to the first buffer (TSB ) and the second buffer (TSB ). Step  includes receiving the media content of the first display channel (via tuner ) into the first buffer (TSB ), and displaying the media content on the TV . Thus, as a non-limiting example, a two-tuner system is assumed, and tuner  is employed to receive media content of the first display channel. Upon a viewer's input via an input device (e.g., a remote control device , ) to display a second display channel's media content, step  includes receiving the media content from a second display channel (via tuner ) into the second buffer (TSB ), and displaying the media content on the TV . The second tuner (tuner ) is assumed to be an available resource, and thus receives the media content of the second display channel. The newly requested display channel will preferably have display resource precedence over the currently displayed display channel.","Step  includes receiving user input requesting a third display channel. Unless the DHCT  contains additional tuners, a conflict arises, since one of the tuners ( or ) has to be resourced to receive the media content of the third display channel for display on the TV  (). This example scenario assumes that no other buffer resource conflicts are present, for instance from a scheduled permanent recording or from preference filter mechanisms, among others. Otherwise, additional constraints or behavior would be enacted based on the outcome of the execution of the programmed controlling rules. Some conflicts, when they arise, can give rise to conflict barkers that are presented on a display screen to give the user the opportunity to resolve the conflict. Other conflicts can be automatically resolved by execution of the programmed controlling rules. In some embodiments, a system settings menu (not shown) can be utilized at start-up or at times convenient to the user that enables the user to select and\/or configure priorities between these and other conflicts that may arise. Assuming that the DHCT  has only two tuners, step  includes a decision to be made by the PVR application  (). Namely, the PVR application , upon receiving a request for a display channel change to a third display channel, decides whether media content of the first two display channels was buffered for a minimum threshold buffering duration prior to the respective display channel changes. The determination of which display channel did not meet the minimum buffering threshold will be left for step  of , as described below.","If a minimum buffering duration threshold was not met for the buffering of the media content to its respective buffer, then the prioritizing continues to point A in , otherwise to point B in . Continuing the example at point A in , the PVR application  decides whether the media content buffered to either buffer was buffered over at least a minimum threshold duration (step ). If a buffering duration threshold was met for the buffering of the media content to one buffer, then step  includes the steps of resourcing the tuner (for the third display channel media content) that is sourcing the display channel for which the buffered media content does not satisfy the minimum duration according to a first threshold. In turn, the media content buffered for less than the minimum threshold is displaced with the media content buffered from the third display channel, while the media content buffered for a minimum threshold duration is retained allowing for a continued tuning and buffering operation.","If the buffering of the media content to either buffer failed to meet a minimum threshold duration, then either tuner  or tuner  () is resourced for the third display channel and the media content from either buffer is displaced while retaining the media content in the non-displaced buffer. At this point, other input variables (as described above), can be employed to provide a decision as to priority. In one embodiment, the media content consuming the least buffered space is displaced. In another implementation, the latest displayed channel media content is retained. In yet another embodiment, the last displayed channel (e.g., the first display channel media content) is retained when the viewer has pressed the key for the current display channel media content being displayed (e.g., the second display channel media content) prior to changing to a third display channel. Another embodiment includes retaining media content sourced from a higher priority display channel (e.g., a favorites channel). Alternatively, the user can be presented at this point with a user interface screen (decision barker screen), as explained below, that provides the user with a choice of buffers to clear (and a choice of tuners to resource) to make room for the third display channel media content.",{"@attributes":{"id":"p-0144","num":"0153"},"figref":["FIG. 15","FIG. 13"],"b":["1516","1518"]},"However, if the media content to both buffers was not buffered for an equal buffering duration, then the next step (step ) is to determine whether the media content of the first display channel was buffered for a longer duration than the media content of the second display channel (i.e., relational input variables). It will be understood by those of ordinary skill in the art that the reference comparison can be reversed. For example, step  can just as easily be described as determining whether the second display channel was buffered for a longer duration, or described as whether the media content of the second display channel was buffered for a shorter duration, etc. If step  results in an affirmative determination, the prioritizing steps continue to point C (), otherwise the steps continue at point D ().",{"@attributes":{"id":"p-0146","num":"0155"},"figref":["FIG. 16","FIG. 4","FIG. 4","FIG. 4"],"b":["1622","1","376","2","378","1622","1624","2","358"]},"However, continuing the example, if the media content of the second display channel was buffered for 25 minutes, this buffering duration exceeds the threshold percentage of 50%, and thus a decision barker can be provided (step ) to enable the user to determine priority in this case. In one embodiment, the viewer configures when to allow the decision barker to be displayed by entering input during a configuration session. Furthermore, the viewer configures the percentage difference from the set threshold for when the decision barker is displayed. Alternatively, a decision barker is only presented to the viewer to enable the viewer to determine priority in cases deemed as a \u201cclose-case,\u201d such as when near the percentage threshold. Alternatively, default threshold percentages can be provided in the software, or the user can configure these threshold percentages in a user interface screen at start-up, or at other times, or additional input variables can be evaluated.",{"@attributes":{"id":"p-0148","num":"0157"},"figref":["FIG. 17","FIG. 15","FIG. 16","FIG. 4"],"b":["1520","1728","1622","1730","1","354","1732"]},{"@attributes":{"id":"p-0149","num":"0158"},"figref":["FIG. 18","FIG. 3B","FIG. 3D"],"b":["377","1800","1834","1800","1836","1838","1893","1894","1895","393","394","395","380","1838"]},"The PVR application  () of the present invention can be implemented in hardware, software, firmware, or a combination thereof. In the preferred embodiment(s), the PVR application  is implemented in software or firmware that is stored in a memory and that is executed by a suitable instruction execution system. If implemented in hardware, as in an alternative embodiment, the PVR application  may be implemented with any or a combination of the following technologies, which are all well known in the art: a discrete logic circuit(s) having logic gates for implementing logic functions upon data signals, an application specific integrated circuit (ASIC) having appropriate combinational logic gates, a programmable gate array(s) (PGA), a field programmable gate array (FPGA), etc.","The PVR application  (), which comprises an ordered listing of executable instructions for implementing logical functions, can be embodied in any computer-readable medium for use by or in connection with an instruction execution system, apparatus, or device, such as a computer-based system, processor-containing system, or other system that can fetch the instructions from the instruction execution system, apparatus, or device and execute the instructions. In the context of this document, a \u201ccomputer-readable medium\u201d can be any means that can contain, store, communicate, propagate, or transport the program for use by or in connection with the instruction execution system, apparatus, or device. The computer readable medium can be, for example but not limited to, an electronic, magnetic, optical, electromagnetic, infrared, or semiconductor system, apparatus, device, or propagation medium. More specific examples (a nonexhaustive list) of the computer-readable medium would include the following: an electrical connection (electronic) having one or more wires, a portable computer diskette (magnetic), a random access memory (RAM) (electronic), a read-only memory (ROM) (electronic), an erasable programmable read-only memory (EPROM or Flash memory) (electronic), an optical fiber (optical), and a portable compact disc read-only memory (CDROM) (optical). Note that the computer-readable medium could even be paper or another suitable medium upon which the program is printed, as the program can be electronically captured, via for instance optical scanning of the paper or other medium, then compiled, interpreted or otherwise processed in a suitable manner if necessary, and then stored in a computer memory.","It should be emphasized that the above-described embodiments of the present invention, particularly, any \u201cpreferred embodiments\u201d are merely possible examples of implementations, merely setting forth a clear understanding of the principles of the inventions. Many variations and modifications may be made to the above-described embodiments of the invention without departing substantially from the spirit of the principles of the invention. All such modifications and variations are intended to be included herein within the scope of the disclosure and present invention and protected by the following claims."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The preferred embodiments of the invention can be better understood with reference to the following drawings. The components in the drawings are not necessarily to scale, emphasis instead being placed upon clearly illustrating the principles of the present invention. Moreover, in the drawings, like reference numerals designate corresponding parts throughout the several views.",{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 1A"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":["FIG. 1B","FIG. 1A"]},{"@attributes":{"id":"p-0012","num":"0011"},"figref":["FIG. 2","FIG. 1A"]},{"@attributes":{"id":"p-0013","num":"0012"},"figref":["FIG. 3A","FIG. 1A"]},{"@attributes":{"id":"p-0014","num":"0013"},"figref":["FIG. 3B","FIG. 3A"]},{"@attributes":{"id":"p-0015","num":"0014"},"figref":["FIG. 3C","FIG. 3A"]},{"@attributes":{"id":"p-0016","num":"0015"},"figref":["FIG. 3D","FIG. 3A"]},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIGS. 5-11"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":["FIGS. 12A-12C","FIGS. 5-11"]},{"@attributes":{"id":"p-0020","num":"0019"},"figref":["FIGS. 13-17","FIG. 4"]},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 18"}]},"DETDESC":[{},{}]}
