---
title: Fast database replication
abstract: The invention relates to a method for updating a remote data base with sets of data of a master data base system. The sets of data are forwarded to an intermediate data base, and the intermediate data base and the remote data base system are coupled by means of a synchronisation protocol. The protocol ensures, that the remote data base is reliably updated, wherein said master data base and said intermediate data base are logically independent data bases each part of a unique data base system controlled by a unique data base management, and also to master data base system therefore.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07788224&OS=07788224&RS=07788224
owner: Alcatel
number: 07788224
owner_city: Paris
owner_country: FR
publication_date: 20040914
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["TECHNICAL FIELD","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION"],"p":["The invention relates to a method for updating at least one remote data base with sets of data of a master data base with sets of data of a master data base system, wherein said sets of data are forwarded to an intermediate data base, said intermediate data base and the remote data base system being coupled by means of a synchronisation protocol, said protocol ensuring, that the remote data base is reliably updated, and to a master data base system comprising sending means for transferring said sets of data to an intermediate data base, said intermediate data base and the remote data base system comprising protocol means for performing a synchronisation protocol, said protocol ensuring, that the remote data base is reliably updated. The invention is based on a priority application EP 03292484.7 which is hereby incorporated by reference.","In the field of telecommunication, it is often necessary to update a number of remote (slave) data bases according to a master data base, the master data base e.g. located by a telecommunication service provider. Therefore, the data or subsets of data of a master data base has to be provided to each one of a number of remote slave data bases, e.g. for providing fixed number portability changing between different service providers. To keep an actual data image of one subset of data in a slave data base, an instant data filter must be provided between the master data base and said slave data base.","Every time, if new data is entered into the master data base, e.g. if a new subscriber has to be entered or if subscriber data has to be updated, this data must be sent to the remote or slave data bases. The master data base, for administrative purposes, contains more data than necessary for the control of the telecommunications network. Moreover, the master data base contains possibly information about states, that are activated in the future. Therefore the master data base has different data structure than proxy- and slave data bases.","For de-coupling of the master data base from the slave data bases, a proxy data base at service providers side is connected between the master data base and the slave data bases. Updates of the master data base are loaded into the proxy data base(s). The proxy data base carries out the further forwarding of the updates to the slave data bases. The proxy data base contains exactly the same data (data mirror), that the slave data bases should contain after updating.","However, the synchronisation of the three data bases: master, proxy and slave data base is difficult. On the other hand, maintaining multiple physical data bases at service providers side is costly. Moreover, it is not possible to perform a consistent backup of multiple physical data bases.","It is an object of the invention to propose a method for data replication, in a distributed data base system, that allows for an easy synchronisation.","This object is achieved, according to the invention, by a method for updating at least one remote data base with sets of data of a master data base with sets of data of a master data base system, wherein said sets of data are forwarded to an intermediate data base, said intermediate data base and the remote data base system being coupled by means of a synchronisation protocol, said protocol ensuring, that the remote data base is reliably updated, and to a master data base system comprising sending means for transferring said sets of data to an intermediate data base, said intermediate data base and the remote data base system comprising protocol means for performing a synchronisation protocol, said protocol ensuring, that the remote data base is reliably updated.","The basic idea of the invention is that a master data base and an intermediate or proxy data base, the proxy data base serving as replication data base for further remote data bases, are configured as logically different data bases within one physical data base the physical data base characterised in that it is controlled by a unique data base management. Updating the remote data bases with sets of data of the master data base system, the sets of data that are forwarded to the proxy data base, Said proxy data base and the remote data base system are coupled by means of a synchronisation protocol, said protocol ensuring, that the remote data base is reliably updated in a minimum of time. As the proxy data base and the master data base are realised as part of a physical data base, the synchronisation effort between the master data base and the proxy data base is minimised. Especially, the transaction performance is augmented due to the fact, that no two-phase commits are necessary.","Further refinements of the invention are to be found in the dependent claims and in the description below.",{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 1","b":["1","2","3","1","2","3","1","2","3"]},"Further, not shown in , said data base systems each comprise interface units to the communications network, agents, protocol engines and dynamic data stores. The slave data bases SDB, SDB and SDB should be loaded with data stored in the master data base. MDB. According to the prior art, de-coupling the master data base MDB from the slave data bases, a proxy data base at service providers side, not shown here, is connected between the master data base MDB and the slave data bases SDB, SDB and SDB, the proxy data base being physically independent from the master data base MDB. Updates of the master data base MDB are loaded into the proxy data base. The proxy data base then carries out the further forwarding of the updates to the slave data bases SDB, SDB and SDB.","According to the prior art, all data bases, master data base MDB, proxy data base PDB and the slave data bases SAS, SAS, SAS are physically independent data bases. Physical independence means, that the data bases each have their own file system with each their own administration. For a transaction of data from the master data base MDB to a slave data base SDB, each transaction comprises a first transaction from the master data base to the proxy data base and a second transaction from the proxy data base to the slave data bases. To ensure data consistency, a synchronisation of those transactions is necessary. Moreover, a synchronisation is also necessary for backup and restoring.","According to the invention, the master data base MDB and the proxy data base PDB are realised as one physical database. Therefore  shows a block diagram with a customer care system CCS, a master data base system SPS according to the invention and an exemplary remote data base SAS. The master data base system SPS comprises a master data base agent DBA, a master data base MDB exemplary consisting of three logically different data base parts A-C, a proxy data base PDB, an audit monitor AM and a (first) proxy data base agent AG. The (first) remote data base system SAS comprises a (first) slave data base SDB exemplary consisting of three data base parts A\u2032-C\u2032. Double arrows - between these units represent be-directional communication relations.","The proxy data base serves for an intermediate storage of data to be immediately transmitted to the remote data bases SAS, SAS and SAS in a one-to-many (in the above example n=3) replication.","Within the a first communication relation user requests e.g. for entering new data is sent from the customer care system CCS to the master data base agent DBA. Within the second communication relation , commands for data base actions are transmitted from the master data base agent DBA to the master data base. Within the third communication relation , data to be distributed to the remote data base system SAS are sent to the proxy data base. Within the fourth, fifth and sixth communication relations , , , data distribution from the master data base MDB to the slave data base SDB is controlled. The proxy data base agent AG reads\/writes data from\/to the proxy data base PDB The audit monitor AM serves for supervising and assuring a successful replication. Within the seventh communication relation , the data base objects are transferred from the proxy data base PDB to the slave data base SDB.","Exemplary, the master data base MDB and the slave data base SAS are each divided into three sections A, B and C or A\u2032, B\u2032 and C\u2032 respectively. Each of these section can be regarded as logical data base. For a service provisioning in a telephone system, the following services for telephone number portability might be exemplary realised, each of these services having assigned one data base segment A, B or C or A\u2032, B\u2032 or C\u2032 respectively:","Fixed number portability (FNP) containing the parts geographical number portability and local number portability:","The local number portability (LNP) is the ability of an end user of the PSTN\/ISDN (public switched telephone network\/integrated services digital network) to retain the same E.164 international public telephone number when changing from one service provider to another without changing their location.","Geographic number portability (GNP) is the ability of an end user to retain the same E.164 international public telephone number when moving from one location to another without changing the service provider.","Mobile Number Portability (MNP) is the ability of an end user to retain the same mobile E.164 international public telephone number when changing from one service provider to another.","For these services, each a different data base can be used on service providers side and on remote sides. Preferably, each of these data bases form on each side logically independent data bases A, B, C or A\u2032, B\u2032, C\u2032 respectively one the top of a unique physical data base system SPS or SAS respectively.","The master data base system SPS typically the following characteristics:\n\n","The master data base MDB can be exemplary realised on a combined Network Element (NE) Management\/Service Management Server (CMC\/SPS) with the following hardware and operating system from the company Hewlett Packard and the data base from the company Versant:","Hardware: HP A400 or HP A500","Software: Operating System: HP-UX 11\n\n","The remote data bases system SAS is preferably a highly-available and distributed system with the following exemplary characteristics:\n\n","For a set of defined functions (e.g. replication), the proxy data base behaves as well as a logically independent data base from the master data base.","The data sets stored in the physical data base therefore comprise each a data base identifier for identifying to which of the logically independent data base each data set belongs to.","The concept of independent logical data bases on top of one physical data base offers the possibility to handle different databases in one transaction. There is no transaction synchronisation via different databases necessary.","With this method, in the proxy data bases on SPS side replication queues with entries of logical-object-ID's of the changed objects are administered. A so-called ReplicationSlaveSiteDriver process running on SAS side, reads the entries of this replication queue, takes them into a replication queue on SAS side and copies the changed objects into the corresponding slave data base. A cache updater, running on each SAS, eventually reads the replication queue on SAS side and copies the changes into a client cache of a corresponding application process, the changes thus becoming effective.","If the ReplicationSlaveSiteDrivers of all remote SAS systems have taken over an entry of the replication queue at SPS side, this entry is cleared there. Accordingly, an entry is cleared on SAS side, if the corresponding data is transferred into the client cache of an application process.","For flexibility reasons, it is also possible, that two or more SAS systems share one slave data base, that is installed on one of the SAS systems. Then, only one ReplicationSlaveSiteDriver is provided, but for each SAS system a cache updater is provided, that updates the data in the client cache of the corresponding SAS system. The entries of the replication queue in the slave data base are the erased, if the cache updaters of all of said SAS systems have taken over the data.","No synchronisation is necessary for data backup, restoration and roll forward archives within the physical data base. Further, a fast data re-storage of the proxy data base, e.g. after a failure occurrence, the usage of roll forward archives and e.g. the usage of Versant habackup possible. Thus, the invention allows for a simple database administration on service providers side.",{"@attributes":{"id":"p-0041","num":"0050"},"figref":"FIG. 3","b":["1","3","1","3","1","3","1","2","3"]},"The wording connection means a communication relation on the logical base. The connections have basically one main communication direction, the connections are bi-directional, as normally, a feedback (acknowledge or OK) is returned. In the following, the main units are described in more details:","Command Interpreter CI:","This unit receives commands from the customer care system CCS, performs a distribution of this commands to the different master data bases, and manages the return data to be sent back to the customer care system CCS.","Master Data Base MDB:","This unit performs the persistent storage of the complete service data.","This data is kept to be transferred to the remote slave data bases SAS, SAS, SAS. Further, this data base comprises timing conditions for the transfer of the data (e.g. activation dates) and generates scheduling requests to be sent to the data base scheduler DBS.","Master Data Base Agent DBA:","This unit reads and writes data from\/to the master data base MDB. It includes the complete application and data manipulation logic, performs syntactical checks, and the maintenance of the corresponding structures for object navigation. Additionally, semantic and consistency checks might be performed.","Data base Scheduler DBS:","This unit allows for time controlling data transfers. Data to be transferred to the proxy data bases with a time delay is handled by this unit.","SAS Proxy DB Agents AG, AG, AG:","These agents read and write data from\/to the proxy DB. The tasks of these agents include the maintenance of the database structure. They also performs an object navigation. The data base agents each maintain a pointer to a data queue of the proxy data base PDB. These pointers mark the data element in the queue, until which the elements before has been already successfully downloaded to the corresponding remote data base SAS, SAS, SAS.","(SAS) Proxy Data Base PDB:","This data base serves for an intermediate storage of data to be immediately downloaded or transmitted to the remote data bases SAS, SAS and SAS in each a one-to-many replication. The data elements to be transmitted are packed in a queue.","SAS DB Adapter ADP:","This unit converts data from the master data base MDB to the proxy data base PDB. It hides the details of the mapping between both data models (Master DB data model optimised for provisioning, SAS-Proxy for high speed access of service controls).","Audit Monitor AM:","This unit carries out a periodical comparison of the state of the master data base MDB, of the SAS proxy data base PDB and the remote data bases to prove the successful replication. On request, the audit monitor sends results back to a supervisor.","The administration Unit CMC performs administration tasks on the SPS, e.g. alarm handling, backup, network element administration and logging.",{"@attributes":{"id":"p-0053","num":"0062"},"figref":["FIG. 4","FIG. 3"],"b":["1","20"]},"A first command M with a request is sent from the customer care system CCS to the command dispatcher or interpreter CI. The Command interpreter queues this command and sends back a second command M as acknowledge. After queuing, the command interpreter CI sends a third command M with a request to the master (data base) agent DBA, that return a fourth command M as acknowledge. The master agent DBA, with a fifth command M to the master data base MDB, initiates the updating of the corresponding objects. With a sixth command M, the master agent DBA send an object synchronisation request to the (SAS data base) adapter ADP. The adapter ADP reads the corresponding objects from the master data base MDB, symbolised as seventh command M, and sends an eighth command M with an update request to exemplary the (first) proxy (data base) agent AG. The proxy agent AG, with a ninth command M to the proxy data base PDB, initiates the updating of the corresponding objects, and with a tenth command M to the proxy data base PDB sends a command for creating a transfer request. It returns an eleventh command M with an OK back to the adapter ADP, that forwards this OK as twelfth command M to the master agent DBA. The master agent DBA sends thirteenth command M with a commit changes command both to the master data base MDB and to the proxy data base PDB. Thus, a single commit is executed over both data bases MDB and PDB.","The commit finalises update transaction between said data bases. A transaction generally consists of a set of logically dependant single actions. With a transaction, a data base is transferred from one logically consistent state into another logically consistent state. As soon as the changes of a transaction are released, they are permanently available in the data base.","After that, the master agent DBA sends a fourteenth command M as response to the command interpreter CI, that queues this command, before sending a fifteenth command M as response to the customer care system CCS. Independently, the proxy data base PDB queues the transfer requests M for each remote data base SAS, SAS, SAS. Here, only an update of a single remote data base SAS is considered: A transfer processor TP reads the (queued) transfer request(s), symbolised as sixteenth command M, reads the changes, symbolised as seventeenth command M and transmits the changes with an eighteenth command M to the remote data base SAS. Further, the transfer processor TP sends a nineteenth command M with an update transfer request to the proxy data base PDB and sends twentieth command M with a commit command to both the proxy data base PDB and the remote data base SAS.",{"@attributes":{"id":"p-0057","num":"0066"},"figref":["FIG. 5","FIG. 4","FIG. 3"],"b":["6","61","65"]},"A first varied command M with a list of objects to be observed is sent from the master agent DBA to the scheduler DBS, that returns a second varied command M as OK. The master agent sends a third varied command M with a commit command to the master data base MDB. The scheduler takes up said objects into a schedule list SL. At a predefined point of time (the predefined times e.g. cyclically defined), the scheduler DBS sends a fourth varied command M to the master data base MDB, therewith initiating the updating of the corresponding objects. With a fifth varied command M, the master agent DBA send an object synchronisation request to the adapter ADP. After finalisation the update transaction described under , instead of the master agent DBA sending the commit command M, the scheduler DBS sends the commit command M\u2032 to both the master data base MDB and the proxy data base PDB. The further actions of updating the remote data base remains unchanged as described under .","Delta Replication:","Within existing replication methods of updating object oriented data bases, complete objects are distributed from a master data base to one or more slave data bases (SAS). This means that the replication sends an object, if at least one object attribute was changed on master side. It amounts to performance problems, if many large objects are changed in short time. Although often only one or a few attributes are changed, each object is sent completely to all slave data bases (SAS).","According to a further aspect of the invention, a so-called message concept is implemented. A message object contains the changed attributes of a data base object.","These message object will be moved to the replication queue, wherein the remote data base system reads the entries of this replication queue, takes them into further a replication queue on the remote side and maps the attribute values to the corresponding mirror data base object.","Delta Replication is a message concept, that offers the advantage to send only changed attributes of a data base object to be updated. This concept thus reduces the data traffic load."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The invention is explained further below with the aid of the accompanying drawing:",{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":["FIG. 5","FIG. 4"]}]},"DETDESC":[{},{}]}
