---
title: Methods, systems and apparatus for the control of interconnection of fibre channel over ethernet devices
abstract: Systems, apparatus and methods are provided for interconnection of one or more Fiber Channel over Ethernet (FCoE) devices. The system preferably comprises a virtualized or virtual server which in turn comprises a virtual machine having an FCoE device interconnection apparatus controller, a virtual switch, the virtual switch being coupled to the FCoE device interconnection apparatus controller, and a network interface. The network interface is coupled to the virtual switch, which in turn couples to an Ethernet fabric. A first Ethernet link couples the network interface to the Ethernet fabric. One or more Fiber Channel over Ethernet (FCoE) devices are coupled to the Ethernet fabric via Ethernet links.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09178944&OS=09178944&RS=09178944
owner: JEDA NETWORKS, INC.
number: 09178944
owner_city: Newport Beach
owner_country: US
publication_date: 20120712
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["PRIORITY CLAIM","FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","BRIEF SUMMARY OF THE INVENTION","ACRONYMS","DEFINITIONS","DETAILED DESCRIPTION OF THE INVENTION"],"p":["This patent application is a continuation-in-part of the following U.S. patent applications: application Ser. No. 12\/987,057, now U.S. Pat. No. 8,625,597 entitled \u201cMethods, Systems and Apparatus for the interconnection of Fibre Channel Over Ethernet Devices\u201d, application Ser. No. 12\/987,063 now U.S. Pat. No. 8,811,399 entitled \u201cMethods, Systems and Apparatus for the Interconnection of Fibre Channel Over Ethernet Devices Using a Fibre Channel Over Ethernet Interconnection Apparatus Controller\u201d, application Ser. No. 12\/987,066 now U.S. Pat. No. 8,559,433 entitled \u201cMethods, Systems, and Apparatus for the Servicing of Fibre Channel Fabric Login Frames\u201d, application Ser. No. 12\/987,073 entitled \u201cMethods, Systems and Apparatus for Utilizing an iSNS Server in a Network of Fibre Channel Over Ethernet Devices\u201d, application Ser. No. 12\/987,077 entitled \u201cMethods, Systems and Apparatus for the Interconnection of Fibre Channel Over Ethernet Devices Using a TRILL Network\u201d, application Ser. No. 12\/987,076 now U.S. Pat. No. 8,559,335 entitled \u201cMethods, Systems and Apparatus for Converged Network Adapters\u201d, and application Ser. No. 12\/987,075 entitled \u201cMethods, Systems and Apparatus for the Interconnection of Fibre Channel Over Ethernet Devices Using Shortest Path Bridging\u201d, all filed on Jan. 7, 2011, which are all incorporated herein by reference as if fully set forth herein.","The disclosures and embodiments of the invention relate to network systems and communications networks, more particularly, certain embodiments of the invention relate to a method and system for Fibre Channel over Ethernet networking, Fibre Channel networking, and Ethernet frame forwarding.","There are at least two separate networks are found in Data Centers. The more ubiquitous of the networks, the Local Area Network (LAN) based on the Ethernet protocol, is mainly used for server to server and server to internet communications. The other network, the Storage Area Network (SAN), is specialized to carry server to storage communications. The Data Center Storage Area Network is mainly based on the Fibre Channel protocol and has the following characteristics: low latency, high bandwidth, and a loss-less network. Recently there have been innovations to merge the Storage Area Network (SAN) with the Local Area Network. The promised benefits include a savings on the amount of equipment and the resulting savings on the amount of equipment real estate, power, and cooling required. Newly created standards comprising this LAN\/SAN convergence define how Storage Area Network frames, namely Fibre Channel protocol frames, are mapped over the Ethernet network. These new frames are called Fibre Channel over Ethernet (FCoE) network frames. Additional standards define how to make the Ethernet network lossless, i.e., to add flow control at the network level to prevent Ethernet frames from being dropped due to congestion. Still other standards define how to segment the transmission line into classes that virtually separate the communications over the transmission line.","Converging the LAN and SAN networks has created additional complexity in the management, control, and data switching areas. Singly, the Fibre Channel switch fabric protocols are very complex and have shown to be not very interoperable between the small number of vendors who build products that support them. Mapping the Fibre Channel switch fabric protocols over Ethernet has resulted in a dizzying amount of new standards that have inhibited the market acceptance of the Fibre Channel over Ethernet (FCoE) mapping over this new converged network. New switches have been defined called Fibre Channel Forwarders (FCFs) and Fibre Channel Data Forwarders (FDFs), which add Fibre Channel over Ethernet and Ethernet elements to the already complex Fibre Channel switch architecture. FCFs and FDFs interconrect ENodes, which are Fibre Channel or devices nodes that are able to transmit Fibre Channel over Ethernet frames. There have been some standards and innovations applied to ENodes, and their embedded Virtual N_Ports (VN_Ports), to connect without using FCF's or FDF's. One of these efforts defines an ENode to ENode connection method, called VN_Port to VN_Port (VNVN) whereby ENodes can connect to each other over a Lossless Ethernet network without an FCF or FDF. Other methods have been suggested to move some of the FCF\/FDF intelligence to the ENode. Both the emerging VNVN standard and the emerging direct ENode direct connect methods have many significant disadvantages. These disadvantages include but are not limited to: the requirement for the ENode to choose a unique MAC address for each VN_Port, the requirement for the ENode to choose a unique Fibre Channel address identifier for each VN_Port, the lack of visibility into the network's supported maximum frame size or other capabilities, the lack of standardized discovery of specific ENode types such as Storage targets, the lack of the ability to automatically and dynamically create Fibre Channel zones or access control lists (ACLs) for intermediate Ethernet bridges, the lack of visibility to load balance across several paths from a source ENode to a destination ENode based on FCID's, and the increased complexity to scale to hundreds of ENodes which requires error prone manual configuration. Due to the lack of Fibre Channel fabric control, these emerging ideas and standards target smaller networks of ENodes, which are impractical in today's Data Center.","In parallel with the innovations around converging the LAN and SAN, there have also been a trend to virtualize servers, i.e., consolidate a corporation's many underutilized servers onto fewer more utilized servers. The server virtualization trend has many advantages, including more utilization of existing underutilized servers, lower equipment space, power, and cooling requirements since there are fewer servers. This trend results in fewer and higher utilized servers which have changed the traffic characteristics of the Local Area Network that interconnects them. The traffic requirements which used to be flowing from Internet to Server have changed to an any-to-any server flow. This migration in traffic patterns has produced a trend to \u201cflatten\u201d LANs, i.e., consolidate the normally three layers (core, distribution, and access) of switches commonly found in a Data Center to two layers (core and access). In parallel with this physical flattening trend is the trend towards utilizing layer 2 forwarding methods to keep the network in a single broadcast domain, which helps support any-to-any connection requirements of virtualized servers and their hypervisors. New link level protocols have been defined to accelerate the ability for any to any server based virtual machine communications. Many of these new link level protocols need new switch hardware and new ways to manage the resulting network.","What is needed is a simpler way to converge the LAN and SAN in a scalable and less complex method than the trajectory of both the standards committees and emerging ENode to ENode inventions. What is also needed is have this simpler method be more compatible with the trend towards flattening the large Data Center networks. Both simpler methods need to be easily managed, scalable, and interoperable. Accomplishing this would accelerate LAN\/SAN network convergence trend and accelerate the flattening of the LAN to more easily attain the benefits of virtualization, convergence, and consolidation.","In one aspect of the inventions herein, a system is provided for interconnection of one or more Fibre Channel over Ethernet (FCoE) devices. The system preferably comprises a virtualized or virtual server which, in turn comprises a virtual machine having an FCoE device interconnection apparatus controller, a virtual switch, the virtual switch being coupled to the FCoE device interconnection apparatus controller, and a network interface. The network interface is coupled to the virtual switch, which in turn couples to an Ethernet fabric. A first Ethernet link couples the network interface to the Ethernet fabric. One or more Fibre Channel over Ethernet (FCoE) devices are coupled to the Ethernet fabric via Ethernet links.","In yet another aspect of the inventions, a system, method or apparatus provides for interconnection of one or more Fibre Channel over Ethernet (FCoE) devices under control of a FIAC virtual machine coupled to an Ethernet fabric. In one implementation, a FIP Discovery Advertisement frame is multi-cast over the Ethernet fabric to the one or more FCoE devices. The FIP Discovery Advertisement frame is received at the one or more FCoE devices. A response is then made from one or more of the FCoE devices to the FIAC virtual machine with a FIP Discovery Solicitation frame.","In yet another aspect of the invention, automatic zone configuration is implemented through use of best practices. In the discovering of initiators and targets in the system, zones are created so as to have one initiator with one target. By way of example, if two initiators are found and one target, the best practice rule will pair one initiator with one target in a zone, for a total of two zones.","In one aspect of the invention, the systems and methods use port groups, such as LAGs and MLAGs by FIAs in forwarding the FCoE frames. In the preferred implementation, this is accomplished without use of Fibre Channel based routing, such as FSPF.","In yet another aspect of the inventions, the systems and methods provide for automatic discovery of FIA ports attached to ENodes through use of the Bridge-MIB. In one aspect, if a MAC address is known, the Bridge-MIB is used to discover the port in the FIA to which the ENode is connected.","In yet another aspect, when multiple modules share a single database is utilized, a database trigger is provided within the system when a change is made to a database thereby informing other modules that a change occurred in the database.","In yet another aspect, the FMEs are preconfigured by a FIAC to optimize FME configuration. In one implementation, the FMEs are preloaded with filter table entries, such that a VN_Port is instantiated without the need to communicate with the FIA to set an FME.","In yet another aspect, in the transport of frames between two ENodes, the network between the ENodes being a TRILL network.","In yet another aspect, in the transport of frames between two ENodes, wherein the intervening network is a network using the Shortest Path Bridging (SPB) frame forwarding.","In yet another aspect of these inventions, the use of FIACs apply to various systems, topologies and architectures. By way of example, the FIAC is used in a redundant network, a redundant FIAC may be used in a redundant network, a FIAC may be used in a core\/edge or leaf\/spline network and\/or a FIAC in a virtual chassis network.","CNA Converged Network Adapter","DA Destination Address","DCB Data Center Bridging","DCBX DCB Exchange protocol","ENode FCoE Node","FCF FCoE Forwarder","FIA FCoE and FC Interconnection Apparatus","FIA Controller Apparatus that controls FIA's","FIB Forwarding Information Base","FC Fibre Channel","FCF-MAC FCoE Forwarder Media Access Control","FCID Fibre Channel address or port identifier","FCoE Fibre Channel over Ethernet","FCoE_LEP FCoE Link Endpoint","FDF FCoE Data Forwarder","FIP FCoE Initialization Protocol","FME Frame Match Entry","FPMA Fabric Provided MAC Address","IEEE Institute of Electrical and Electronics Engineers","MLAG Multi-chassis Link Aggregation","LAG Link Aggregation Group","LAN Local Area Network","MAC Media Access Control","PCP Priority Field in the VLAN Tag","RBridge Routing Bridge","SA Source Address","SNMP Simple Network Management Protocol","SPF Shortest Path First","TRILL Transparent Interconnection of Lots of Links","VE_Port Virtual E_Port","VF_Port Virtual F_Port","VID VLAN Identifier","VLAN identifier","VLAN Virtual Local Area Network","VN_Port Virtual N_Port","vSwitch Virtual Switch",{"@attributes":{"id":"p-0086","num":"0085"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"CONSTANTS"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"84pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["FIP_TYPE:","8914h","The value specified in the"]},{"entry":[{},{},"Ethernet TYPE field for"]},{"entry":[{},{},"a FIP PDU"]},{"entry":["FCoE_TYPE:","8906h","The value specified in the"]},{"entry":[{},{},"Ethernet TYPE field for"]},{"entry":[{},{},"an FCoE PDU"]},{"entry":["All-FCoE-MACs:","01-10-18-01-00-00","The group address for all"]},{"entry":[{},{},"FCoE devices."]},{"entry":["All-ENode-MACs:","01-10-18-01-00-01","The group address for all"]},{"entry":[{},{},"ENodes"]},{"entry":["DEFAULT_FC-MAP:","0EFC00h","The default value for the"]},{"entry":[{},{},"FC-MAP field in a FIP"]},{"entry":[{},{},"FC-MAP descriptor"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}}},"Address or Port identifier: An address value used to identify source (S_ID) or destination (D_ID) of a frame.","Controlling FCF: An FCF able to control a set of FDFs in order to create a Distributed FCF.","Controlling FCF Set: The Switch_Names of the up to two Controlling FCFs that are part of a Distributed FCF.","Converged Network Adapter (CNA): is a technology that supports data networking (TCP\/IP) and storage networking (Fibre Channel) traffic on a single I\/O adapter. CNA's support both Enhanced Ethernet and Fibre Channel over Ethernet (FCoE).","Distributed FCF: A set of FDFs associated with at least one Controlling FCF, that controls the operations of the set of FDFs, A Distributed FCF is defined by the administrative configuration of the Controlling FCF Set and of the FDF Set.","Domain Identifier: Bits  through  of an address identifier.","Encapsulated FC frame: An SOF\/EOF delimited FC frame prefixed with a 28-byte FC frame Encapsulation Header (see RFC 3643).","ENode: An FCoE Node, a Fiber Channel node (see FC-FS-3) that is able to transmit FCoE frames using one or more ENode MACs.","ENode MAC: A Lossless Ethernet MAC coupled with an FCoE Controller in an ENode.","ENode MAC address: The MAC address used by the FCoE Controller on an ENode MAC for the FCoE Initialization Protocol (FIP).","Fabric: As defined in FC-FS-3 an entity that interconnects various Nx_Ports attached to it, and is capable of routing frames using only the D_ID information in an FC-2 frame header. A Fabric may also refer to an Ethernet network comprised of one or more Ethernet switches or FIAs.","FIA: An FCoE interconnect apparatus. Some examples may include an Ethernet switch, an Ethernet bridge or an Ethernet router.","FIB (Forwarding information Base): also known as a forwarding table, is most commonly used in network bridging, routing and similar functions to find the proper interface to which the input interface should send a packet to be transmitted by the bridge, switch, router or similar device.","FCF (FCoE Forwarder): A Fibre Channel Switching Element (see FC-SW-5) that is able to forward FCoE frames across one or more FCF-MACs, and that optionally includes one or more Lossless Ethernet bridging elements and\/or a Fibre Channel Fabric interface.","FDF (FCoE Data-Plane Forwarder): A simplified FCoE switching entity that forwards FC frames among VA_Ports and VF_Ports through a FCDF Switching Element. An FDF shall support at least one VA_Port capable FDF-MAC and may support one or more VF_Port capable FDF-MAC. Each FDF-MAC shall be coupled with an FCoE Controller function and may be coupled with a Lossless Ethernet bridging element.","FDF Set: The Switch_Names of the FDFs that are part of a Distributed FCF.","FIA: A FCoE and FC interconnection apparatus. The interconnection apparatus interconnects devices selected from the list which may include but not be limited to FCoE ENodes, Fibre Channel devices, FCF's, FDF's. An FIA may also be a FCoE only interconnection apparatus, i.e., not capable of handling Fibre Channel frames not embedded in Ethernet frames.","FCF-MAC: A Lossless Ethernet MAC coupled with an FCoE Controller in an FCF.","FCF-MAC address: The MAC address of an FCF-MAC.","FCoE Controller: A functional entity, coupled with a Lossless Ethernet MAC, instantiating and de-instantiating VE_Ports, VF_Ports, VN_Ports, and\/or FCoE_LEPs.","FCoE Entity: The interface, containing one or more FCoE_LEPs, between a VN_Port, a VF_Port, or a VE_Port, and a Lossless Ethernet MAC.","FCoE frame: An Ethernet frame (see IEEE 8023-2008) that contains an FCoE PDU","FCoE_LEP (FCoE Link End-Point): The data forwarding component of an FCoE Entity that handles FC frame encapsulation\/decapsulation, and transmission\/reception of encapsulated frames through a single Virtual Link.","FDF (FCoE Data Forwarder): a Fibre Channel Switching Element (see FC-SW-5) that is able to forward FCoE frames across on or more FCF-MACs, and that optionally includes one or more Lossless Ethernet bridging elements. A FDF comprises a subset of FCF features, most notably routing and zoning. A FDF is controlled by a FCF.","FIP frame: An Ethernet frame (see IEEE 802.3-2008) containing a FCoE Initialization Protocol (FIP) PDU.","FLOGI: Fabric Login ELS (see FC-LS-2).","Link Aggregation: Link Aggregation is a term to describe various methods of combining (aggregating) multiple network connections in parallel to increase throughput beyond what a single connection could sustain, and to provide redundancy in case one of the links fails. Further umbrella terms used to describe the method include port trunking, link bundling, Ethernet\/network\/NIC bonding, or NIC teaming. These umbrella terms not only encompass vendor-independent standards such as IEEE 802.1ax Link Aggregation Control Protocol (LACP) for wired Ethernet, or the previous IEEE 802.3ad, but also various proprietary solutions.","Lossless Ethernet bridging element: An Ethernet bridging function operating across Lossless Ethernet MACs.","Lossless Ethernet MAC: A full duplex Ethernet MAC implementing extensions to avoid Ethernet frame loss due to congestion (e.g., the PAUSE mechanism (see IEEE 802.3-2008) or the Priority-based Flow Control mechanism (see IEEE 802.1Qbb))","LS_ACC: Link Service Accept (see FC-LS-2).","Lossless Ethernet network: An Ethernet network composed only of full duplex links, Lossless Ethernet MACs, and Lossless Ethernet bridging elements.","LS_RJT: Link Service Reject (see FC-LS-2).","Multicast MAC address: A MAC address associated with a group of logically related Ethernet stations on an Ethernet network and called a Multicast-Group Address in IEEE 802.3-2008.","N_Port: A device port that generates\/terminates FC-4 channel traffic.","N_Port_Name: A Name_identifier that identifies an N_Port.","PLOGI: N_Port Login (see FC-LS-2).","Unicast MAC address: A MAC address associated with a particular Ethernet station on an Ethernet network and called an Individual Address in IEEE 802.3-2008.","VA_Port (Virtual A_Port): An instance of the FC-2V sublevel of Fibre Channel that communicates with another VA_Port and that is dynamically instantiated on successful completion of a FIP ELP Exchange. A VA_Port is uniquely identified by an A_Port_Name Name_Identifier and is addressable by the VA_Port connected to it through the A_Port Controller address identifier (i.e., FFFFF9h).","VA_Port\/FCoE_LEP pair: A VA_Port and its associated FCoE_LEP.","Virtual Switch: is a software program that allows one virtual machine (VM) to communicate with another virtual machine (VM). A virtual machine can intelligently direct communication on the network by inspecting packets before passing them on.","VF_Port\/FCoE_LEP pair: A VF_Port and one of its associated FCoE_LEPs.","VF_Port\/FCoE_LEP pair: A VN_Port and its associated FCoE_LEP.","Virtual Link: The logical link connecting two FCoE_LEPs.","Virtual Chassis: Virtual chassis is a technology that allows multiple physically separate Ethernet switches to be combined into a single logical entity for the purpose of simplifying management and configuration.","VN_Port (Virtual N_Port): An instance of the FC-2V sublevel of Fibre Channel that operates as an N_Port (see FC-FS-3) and is dynamically instantiated on successful completion of a FIP FLOGI or FIP NPIV FDISC Exchange.","VN_Port MAC address: The MAC address used by an ENode for a particular VN_Port.","Zone: A group of Zone Members. Members of a Zone are made aware of each other, but not made aware of Zone Members outside the Zone.","Zone Definition: The parameters that define a Zone.","Zone Member: The specification of a device to be included in a Zone.",{"@attributes":{"id":"p-0136","num":"0135"},"figref":["FIG. 1","FIG. 1","FIG. 1"],"b":["1","2","3","1","4","5","6","7","2","3","1","8","9","9","1","9","1","1"]},{"@attributes":{"id":"p-0137","num":"0136"},"figref":"FIG. 2","b":["20","21","20","21","25","26","29","30","31","32","27","28","20","21","23","20","21","36","36","33","34","35","40","41","20","21","27","28","33","34","35","40","41","34"]},{"@attributes":{"id":"p-0138","num":"0137"},"figref":"FIG. 3","b":["42","57","57","47","52","60","65","43","48","53","42","47","52","47","52"],"ul":{"@attributes":{"id":"ul0001","list-style":"none"},"li":{"@attributes":{"id":"ul0001-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0002","list-style":"none"},"li":["a) optionally performs the FIP VLAN discovery protocol to discover FCoE VLANs;","b) discovers other VA_Port capable FDF-MACs and VA_Port\/VE_Port capable FCF-MACs connected to the same Lossless Ethernet network using the FIP discovery protocol;","c) instantiates a VA_Port\/FCoE_LEP     pair on successful completion of each FIP ELP Exchange with a remote VA_Port capable FDF-MAC or VA_Port\/VE_Port capable FCF-MAC;","d) de-instantiates a VA_Port\/FCoE_LEP pair on receiving a FIP Clear Virtual Link request;","e) monitors the status of the instantiated VA_Port\/FCoE_LEP pairs;","f) initiates FIP Clear Virtual Link requests as needed to terminate Virtual Links to other VA_Ports;","g) transmits periodic FIP Discovery Advertisements to the All-FCF-MACs address every FKA_ADV_PERIOD; and","h) monitors the status of remote VA_Ports by maintaining timers and verifying that periodic FIP Discovery Advertisements are received within every FKA_ADV_PERIOD."]}}}},"The FCoE_LEP    is the functional entity performing the encapsulation of FC frames into FCoE frames in transmission and the decapsulation of FCoE frames into FC frames in reception. An FCoE_LEP    operates according to the MAC address of the local link end-point and the MAC address of the remote link end-point. When encapsulating FC frames into FCoE frames, the MAC address of the local link end-point shall be used as source address and the MAC address of the remote link end-point shall be used as destination address of the generated FCoE frame. When decapsulating FC frames from FCoE frames, the FCoE_LEP shall verify that the destination address of the received FCoE frame is equal to the MAC address of the local link end-point and shall verify that the source address of the received FCoE frame is equal to the MAC address of the remote link end-point. If either check fails the FCoE frame shall be discarded. For a VA_Port capable FDF-MAC, the MAC address of the local link end-point is the FDF-MAC address and the MAC address of the remote link end-point is the MAC address of the remote FDF-MAC or FCF-MAC with which a FIP ELP Exchange has been successfully completed.","A VA_Port   is an instance of the FC-2V   sublevel of Fibre Channel that is dynamically instantiated together with its FCoE_LEP   on successful completion of a FIP ELP Exchange, according to the rules specified in the FC-BB  standard. A VA_Port receives FC frames from the FCDF Switching Element  and sends them to its FCoE_LEP    for encapsulation and transmission over the Lossless Ethernet network. In a similar way, a VA_Port sends FC frames received from its FCoE_LEP to the FCDF Switching element . A VA_Port is uniquely identified by an A_Port_Name Name_Identifier and is addressed by the A_Port Controller address identifier (i.e., FFFFF9h). To initialize VA_Port to VA_Port links, i.e., links between FDFs, a successful completion of a FIP ELP Exchange is required. After successful FIP ELP Exchange, the FCoE Controllers of the two involved VA_Port capable FDF-MACs instantiate a VA_Port\/FCoE_LEP pair.","Another topology defined by the ANSI T11 standards includes the instantiation of VN_Port to VN_Port links, i.e., direct attachment between ENodes. A VNVN ENode MAC, operating in either multipoint or point-to-point mode, instantiates VN_Port to VN_Port Virtual Links on successful completion of a point-to-point PIP FLOGI, as defined in FC-LS-2. Both FIP FLOGI Request and LS_ACC shall have the Locally Unique N_Port_ID of the originating VNVN_Port as S_ID, the Locally Unique N_Port_ID of the destination VNVN_Port as D_ID for the point-to-point FLOGI protocol, and the originating VN_Port FPMA in the MAC Address descriptor. The MAC addresses of the FIP FLOGI Request and LS_ACC shall be the ENode MAC addresses of the involved VNVN_Ports. As specified in FC-LS-2, the VNVN_Port with the greater N_Port_Name proceeds to N_Port Login, with the PLOGI ELS encapsulated in FCoE. Both FCoE PLOGI Request and LS_ACC shall have the Locally Unique N_Port_ID of the originating VNVN_Port as S_ID and the Locally Unique N_Port_ID of the destination VNVN_Port as D_ID. Upon completion of FCoE PLOGI the involved VN_Ports operate in point-to-point mode (see FC-LS-2). A VN_Port to VN_Port Virtual Link is explicitly deinstantiated by performing a FIP LOGO, that deinstantiates the FCoE_LEPs and performs a N_Port logout. The S_ID and D_ID on the encapsulated LOGO ELS shall be set to the Locally Unique N_Port_IDs of the involved VNVN_Ports. The VN_Port to VN_Port capability is limited due to scalability and ENode complexity in implementation issues.",{"@attributes":{"id":"p-0142","num":"0149"},"figref":["FIG. 4","FIG. 4","FIG. 1","FIG. 2","FIG. 2"],"b":["80","90","81","82","88","89","90","91","1","81","1","83","88","2","84","89","2","82","3","85","90","4","86","91","2","82","87","1","81","2","82","92","80","80","83","84","85","86","80","80","80","80","27","28","80","80","80","80"]},{"@attributes":{"id":"p-0143","num":"0150"},"figref":["FIG. 5","FIG. 5","FIG. 5"],"b":["101","100","101","102","104","102","111","103","104","116","105","103","112","106","105","117","107","106","1","108","113","2","109","114","107","1","108","118","2","109","119","1","108","2","109","113","106","114","118","107","119","108","109","101","103","105","112","117","101","106","107"]},{"@attributes":{"id":"p-0144","num":"0151"},"figref":"FIG. 6","b":["122","120","122","127","129","123","125","128","130","124","126","124","126","131","132","133","134","135","136","133","134","137","138","140","141","121","147","148","145","146","143","144","143","144","133","134","139","142","151","122","120","152","121","151","121"]},{"@attributes":{"id":"p-0145","num":"0152"},"figref":["FIG. 7","FIG. 8","FIG. 8","FIG. 8","FIG. 8"],"b":["160","167","160","1","161","2","162","1","161","11","163","181","1","164","183","2","162","2","165","182","1","166","183","167","160","1","163","1","1","164","2","2","165","3","3","168","2","2","169","1"]},{"@attributes":{"id":"p-0146","num":"0153"},"figref":"FIG. 8","b":["1","181","2","182","3","192","1","183","2","193","184","180","180","184","4","185","1","181","184","1","186","2","182","184","2","187","3","192","184","20","190","1","183","3","188","184","1","181","2","182","3","192","1","183","2","193","180"]},{"@attributes":{"id":"p-0147","num":"0154"},"figref":["FIG. 9","FIG. 8"],"b":["184","230","1","231","1170","1179","1","183","1","181","2","232","1180","1189","2","183","2","182","3","233","1190","1199","1","181","1","183","4","200","209","2","182","1","183","5","235","210","215","180","6","216","222","180","1170","1180","1190","200","210","2216","184","1171","1181","1191","201","211","217","1176","1186","1196","206","214","221","1172","1182","1192","292","212","218","1173","1183","1193","203","213","219","1174","1184","1194","204","220","1175","1185","1195","205","1177","1187","1197","207","1178","1188","1198","208","1179","1189","1199","209","215","222"]},"In  FME entry #  is a lower priority entry in the VIA FME table, i.e., the rule will match if all it's elements match    and none of the other FME entries       match. In FME entries #  #  #  # , elements , ,  and  may be optional. If the elements are not present, frames will still be forwarded to the appropriate FCoE devices but the check that the correct Fibre Channel source identifier (S_ID) will not be done. Further, the redirect port or port group actions       may also be optional, i.e., the FIB in the FIA   can be used to forward the frames.",{"@attributes":{"id":"p-0149","num":"0156"},"figref":["FIG. 11","FIG. 11","FIG. 11","FIG. 11","FIG. 12"],"b":["251","252","254","255","256","256","257","258","260","260","261","262","264","266","267","268","1","1","2","1"]},{"@attributes":{"id":"p-0150","num":"0157"},"figref":"FIG. 12","b":["280","4","288","1","284","1","281","1","284","1","290","2","283","2","285","1","296","1","282","1","284","3","291","1","2","5","292","6","293","292","293","286","2","285","1","284","2","294","3","295","294","295","287","286","287"]},{"@attributes":{"id":"p-0151","num":"0158"},"figref":["FIG. 13","FIG. 12","FIG. 12","FIG. 12"],"b":["300","1","284","1","301","1","282","1","281","2","302","1","1","3","303","2","1","4","304","342","341","5","305","6","306","1","301","2","302","3","303","4","304","5","305","6","360","361","1","301","2","302","3","303","4","304","5","305","316","329","339","345","356"]},{"@attributes":{"id":"p-0152","num":"0159"},"figref":["FIG. 14","FIG. 12","FIG. 12","FIG. 12"],"b":["1","284","2","285","400","2","285","410","400","1","401","403","401","1","1","403","1","1","1","1","1","2","402","404","402","2","2","404","1","2","2","1","100"]},"The FIA  FME table   comprises two FME entries  . FME Entry #  matches frames sent from T to  and FME Entry # matches frames sent from I to T. Note that in FME Entry # , there exists the capability of forwarding over a predefined Port Group. The Port Group could be a LAG group or any other method for coupling multiple ports together, e.g., TRILL, Port Bonding, etc.",{"@attributes":{"id":"p-0154","num":"0161"},"figref":["FIG. 15","FIG. 15"],"b":["501","503","504","502","500","509","510","511","502","502","502","509","510","511","501","2","503","3","504","502"]},{"@attributes":{"id":"p-0155","num":"0162"},"figref":"FIG. 16","b":["600","603","602","601","601","603","602","605","600","607","601","601","608","602","602","609","601","610","600","601"]},{"@attributes":{"id":"p-0156","num":"0163"},"figref":"FIG. 17","b":["620","622","621","622","621","622","621","621","622","625","621","625","622","625","620","621","621","622"]},{"@attributes":{"id":"p-0157","num":"0164"},"figref":"FIG. 18","b":["626","629","626","630","627","631","628","628","632","629","633","634","626","629","637","638","626","629","629","626","640","641","636","639","626","629"]},{"@attributes":{"id":"p-0158","num":"0165"},"figref":"FIG. 19","b":["667","667","665","665","664","664","657","656","656","655","655","651","651","651","655","650","646","647","648","649","652","651","653","645","645","645","651","660","659","661","662","663","661","661","645","645","667","667","660","667","667","659","667","661","661","667","662","667","663","663","667"]},{"@attributes":{"id":"p-0159","num":"0166"},"figref":"FIG. 20","b":["704","700","704","1","702","1","702","707","701","1","702","2","703","700","701","705","1","702","706","2","703","1","702","707","2","703","708","701","705","1","702","705","706","700"]},{"@attributes":{"id":"p-0160","num":"0167"},"figref":"FIG. 21","b":["702","703","711","704","712","705","710","708"]},{"@attributes":{"id":"p-0161","num":"0168"},"figref":"FIG. 22","b":["600","602","603","601","605"]},{"@attributes":{"id":"p-0162","num":"0169"},"figref":"FIG. 23","b":["1","1","800","805","1","1","802","1","1","1","100","2","804","1","801","807","1","1","100","100","100","100","2","100","200","7","803","802","7","803","808","1","1","800","1","2","100","804","100","100","2","804","810","812","100","100","1","1","100","100","7","803","814","2","100","804","100","802","1","1","1","1","1","1","800","1","1","801","813","2","100","804","100","1","1","800","1"]},{"@attributes":{"id":"p-0163","num":"0170"},"figref":"FIG. 24","b":["900","904","901","903","1","900","1","901","902","2","903","905","2","903","904","906","1","1","900","907","1","1","1","1","1","1","1","901","1","1","900","1","1","1","908","2","903","2","903","910","910","1","1","904","1","1","904","914","2","903","913","1","901","1","901","2","903","2","903","1","1","1","1","1","913","1","1"]},{"@attributes":{"id":"p-0164","num":"0171"},"figref":"FIG. 25","b":["951","952","955","957","1","951","2","953","950","954","1","951","2","953","956","1","950","958","1","951","952","1","951","1","952","952","950","951","953","952","1","951","959","952","952","963","960","952","950","1","1","1","1","951","961","1","950","950","954","964","966","969","967","1","1","950","964","2","2","954","2","1","951","965","1","1","950","1","2","2","954","2","1","951","965","2","953","2","953","966","2","2","954","2","2","954","971","969","2","953","2","2","954","2","1","1","950","1","2","953","968","1","951","1","951","967","1","1","950"]},{"@attributes":{"id":"p-0165","num":"0172"},"figref":"FIG. 26","b":["2620","2629","2628","2627","2630","2631","2626","1","2628","2","2627","3","2630","2626","1","2628","1","2629","3","2630","2","2631","2652","2700","2701","2","2627","2700","2626","2628","2630","2629","2631","2620","1","2650","1","2629","2700","1","2650","1","2623","1","2622","2621","1","2628","2","2651","2","1","2628","2619","2","2619","2618","1","2","2627","2641","3","2630","3","2641","2640","2","2","2640","2632","3","2630","2700","2646","2642","2","2651","2","2631"]},"Shortest Path Bridging (SPB) is an IEEE draft (802.1aq). There are two SPB models for multipath bridging: Shortest Path Bridging VLAN (SPBV) and Shortest Path Bridging MAC-in-MAC (SPBM).  is a diagram showing the interconnection of ENodes   through a Shortest Path Bridging MAC-in-MAC (SPBM) network . An FCoE frame  sent from an Ethernet connected ENode  through a network of FIAs    adapted to implement Shortest Path Bridging to a destination Ethernet connected ENode  over a SPBM network . FIA , FIA , and FIA  form a SPBM . The links from FIA  to ENode  and from FIA  to ENode  are Ethernet links . An FIAC  is coupled to the SPBM network  through the link . The FIAC  may be located anywhere in the network as long as it can access both the FIAs    to set and remove FMEs and access the ENodes   to perform the FIP protocol and provide essential Fabric Services through FCoE frames. The FCoE frame transmitted  from VN_Port  in ENode  includes the following values: Ethernet destination FCF-MAC address  of the FIAC , symbolically FIACntlrMAC , Ethernet source MAC address  of VN_Port, symbolically VN_Port MAC, a Vlan identifier , symbolically VLAN, data , and an FCS . FIA  substitutes the destination MAC address with VN_Port's  MAC address , symbolically VN_PortMAC, and substitutes the source MAC address  with VN_Port's  MAC address, symbolically VN_PortMAC. The FIA  encapsulates the frame in a SPBM frame, i.e., adds a MAC-in-MAC header and other SPB fields. The outer destination Ethernet MAC  address contains the value of the egress FIA MAC address, in this case the symbolic MAC address FIAMAC . The outer source Ethernet MAC address  contains the value of the current FIA MAC address, in this case the symbolic MAC address FIAMAC. The frame is received by FIA  and forwarded to the egress FIA, FIA . FIA  removes the outer MAC header, substitutes the source MAC address  with the FIAC MAC address, symbolically FIACntlrMAC, and forwards the frame to VN_Port  in ENode . The Shortest Path Bridging network can be adapted to use Shortest Path Bridging VLAN (SPBV) in lieu of SPBM by using the Shortest Path VLAN ID (SPVID) to designate nodal reachability.",{"@attributes":{"id":"p-0167","num":"0174"},"figref":"FIG. 28","b":["2900","2904","2901","2902","2903","1","2901","2","2902","100","200","1","2900","1","2901","2905","2","2902","2906","2","2904","1","2901","2908","2","2902","2910","2903","1","2901","2907","2","2902","2909","2905","2908","2907","100","2906","2909","2910","200"]},{"@attributes":{"id":"p-0168","num":"0175"},"figref":"FIG. 29","b":["2950","2954","2955","2951","2952","1","2954","2","2955","1","2950","1","2954","2956","2","2955","2960","2","2953","1","2954","2959","2","2955","2963","1","2951","1","2954","2957","2","2955","2961","2","2952","1","2954","2958","2","2955","2962","1","2951","2","2952","2950","2953","2956","2957","2958","2959","100","1","2951","2","2952","2950","2953","2960","2961","2962","2963","200","2","2952","1","2951","2","2952","200","1","2951","100"]},{"@attributes":{"id":"p-0169","num":"0176"},"figref":"FIG. 30","b":["3254","3255","3256","3258","3259","3250","3251","3252","3253","3257","3250","3251","3252","3253","3260","3260","3250","3251","3252","3253","3260","1","3254","2","3255","3","3256","4","3258","5","3259","3266","3267","3268","3273","3274","3257","3269","3257","3254","3255","3256","3258","3259","3260","3250","3251","3252","3253","3261","3280","3262","3281"]},{"@attributes":{"id":"p-0170","num":"0177"},"figref":["FIG. 31","FIG. 31"],"b":["3320","3321","3322","3324","3325","3301","3302","3303","3304","3305","3306","3323","3301","3302","3303","3304","3305","3306","330","3302","3303","3304","3305","3306","3301","3302","3303","3304","100","200","1","3320","2","3321","3","3322","1","3301","2","3302","3323","4","3324","5","3325","3","3303","4","3304","3301","3302","3303","3304","3305","3306","3323","100","3","3303","3314","3323","200","4","3304","3317","3323","100","200","3320","3321","3322","3324"]},"The foregoing systems, methods and apparatus may be widely applied to various applications. Without narrowing the generality of the foregoing, they may be fully applicable to Software Defined Storage Networks.","Although the foregoing invention has been described in some detail by way of illustration and example for purposes of clarity and understanding, it may be readily apparent to those of ordinary skill in the art in light of the teachings of this invention that certain changes and modifications may be made thereto without departing from the spirit or scope of the appended claims.","All publications and patents cited in this specification are herein incorporated by reference as if each individual publication or patent were specifically and individually indicated to be incorporated by reference in their entirety."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The drawings illustrate only exemplary embodiments of the invention and therefore do not limit its scope because the inventive concepts lend themselves to other equally effective embodiments.",{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":["FIG. 7","FIG. 8"]},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":["FIG. 9","FIG. 8"]},{"@attributes":{"id":"p-0028","num":"0027"},"figref":["FIG. 10","FIG. 8"]},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":["FIG. 13","FIG. 12"],"b":"1"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 14","b":["1","2","2"]},{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIG. 16"},{"@attributes":{"id":"p-0035","num":"0034"},"figref":"FIG. 17"},{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIG. 18"},{"@attributes":{"id":"p-0037","num":"0036"},"figref":"FIG. 19"},{"@attributes":{"id":"p-0038","num":"0037"},"figref":"FIG. 20"},{"@attributes":{"id":"p-0039","num":"0038"},"figref":"FIG. 21"},{"@attributes":{"id":"p-0040","num":"0039"},"figref":"FIG. 22"},{"@attributes":{"id":"p-0041","num":"0040"},"figref":"FIG. 23"},{"@attributes":{"id":"p-0042","num":"0041"},"figref":"FIG. 24"},{"@attributes":{"id":"p-0043","num":"0042"},"figref":"FIG. 25"},{"@attributes":{"id":"p-0044","num":"0043"},"figref":"FIG. 26"},{"@attributes":{"id":"p-0045","num":"0044"},"figref":"FIG. 27"},{"@attributes":{"id":"p-0046","num":"0045"},"figref":"FIG. 28"},{"@attributes":{"id":"p-0047","num":"0046"},"figref":"FIG. 29"},{"@attributes":{"id":"p-0048","num":"0047"},"figref":"FIG. 30"},{"@attributes":{"id":"p-0049","num":"0048"},"figref":"FIG. 31"}]},"DETDESC":[{},{}]}
