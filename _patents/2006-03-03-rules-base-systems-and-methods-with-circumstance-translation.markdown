---
title: Rules base systems and methods with circumstance translation
abstract: The invention provides, in one aspect, a method of finding a rule in a rules base that includes a plurality of rule entries, each having a rule and an associated objective and one or more associated circumstances. A rule finder accesses the rules base in response to a request, with a specified objective and with specified circumstances, by searching the rules base for a matching entry. Where the search fails, the rule finder searches one or more translation tables for entries having first circumstances matching those specified in the request that resulted in the failure. If found, the rule finder repeats the search of the rules base with the specified objective and with a second (or “map-to”) circumstances from matching entries in the translation tables. The rule finder can return, e.g., to an application program that issued the request, a rule found during that repeat search of the rules base.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07640222&OS=07640222&RS=07640222
owner: Pegasystems Inc.
number: 07640222
owner_city: Cambridge
owner_country: US
publication_date: 20060303
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION"],"p":["The invention relates to digital data processing and, more particularly, to rules base systems and methods.","Computer systems that facilitate business operations based on information specific to an industry or enterprise are well known in the art. These typically rely on rules identifying situations that are expected to arise during enterprise operation and applicable responses. Such systems have been used in a range of applications, from health care to automotive repair. The rules on which they rely come from experts in the field, from the collective experience of workers on the \u201cfront line,\u201d or a combination of these and other sources.","Simple computer systems of this sort incorporate application-specific knowledge directly into source code, using (for example) a sequence of \u201cif . . . then . . . else\u201d or \u201ccase\u201d statements. From these, the executing systems can identify appropriate responses to conditions input, e.g., by a human operator, by automated monitoring equipment, and so forth. For example, a simple banking system for determining and displaying loan rates based on customer locale, customer type, and order size might encode such information as follows:\n\n","One drawback of this approach is that encoding knowledge in programming constructs themselves can make implementation difficult in all but the most limited applications. A further drawback is that the complexity and operational inefficiencies of these systems grow rapidly as their sizes increase.","More complex systems store knowledge separately from the programs that access them. Many of these use \u201crules bases\u201d that store application-specific information in tables, database records, database objects, and so forth. For example, such a system might store the information above in a table as follows:",{"@attributes":{"id":"p-0007","num":"0014"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"6"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"5","colwidth":"35pt","align":"center"}}],"thead":{"row":[{"entry":[{},{"@attributes":{"namest":"offset","nameend":"5","align":"center","rowsep":"1"}}]},{"entry":[{},"City","State","Customer Type","# Prod","Rate"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"5","align":"center","rowsep":"1"}}]}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"6"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"5","colwidth":"35pt","align":"char","char":"."}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Boston","MA","Platinum",{},"8.1%"]},{"entry":[{},"Boston","MA","Not Platinum",{},"8.3"]},{"entry":[{},"Providence","RI",{},{},"8.0%"]},{"entry":[{},"New York","NY",{},{},"8.5%"]},{"entry":[{},"Washington","DC",{},"<3","8.1%"]},{"entry":[{},"Washington","DC",{},">3","8.0"]},{"entry":[{},"Sacramento","CA",{},{},"7.5%"]},{"entry":[{},"San Francisco","CA",{},{},"6.6%"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"5","align":"center","rowsep":"1"}}]}]}}]}}},"Traditionally, such tables (and, more broadly, such rules bases) are dedicated to a single class of problems. For example, a bank might use one rules base for determining loan rates and another for determining credit worthiness. More comprehensive systems combine rules covering diverse situations into a single knowledge or rules base, indexing those solutions by two or more values, e.g., \u201cobjective\u201d and \u201ccircumstance\u201d (or \u201cobjective,\u201d \u201ccircumstance 1,\u201d \u201ccircumstance 2,\u201d and so forth). The objective identifies the class of problems, e.g., loan rates, credit worthiness, etc. The circumstances identify the particular situation of interest, e.g., customer locale, customer type, and\/or order size (for the objective \u201cloan rate\u201d), savings balance level (for the objective \u201ccredit worthiness\u201d), etc.","Such a rules base is disclosed in commonly assigned U.S. Pat. No. 5,826,250, entitled \u201cRules Bases and Methods of Access Thereof.\u201d According to the abstract of that patent, each entry of a rules base has an associated objective and circumstance, as well as a status. The latter has values such as \u201cvalid\u201d (indicating that information for that entry corresponds to a rule for the corresponding objective\/circumstance), \u201cinheritance\u201d (indicating that the rule for the corresponding objective\/circumstance is available, e.g., in another entry in the rules base), and so forth. Methods for using that rules base make use of these status designators, along with an inheritance structure that is maintained with the rules base, to find rules matching a designated objective and circumstance.","While rules bases of the type described in the foregoing patent and utilized in products of the assignee have met with great acceptance, there remains room for improvement.","An object of this invention is to provide improved systems and methods for digital data processing. A more particular object is to provide improved rules bases, as well as systems and methods that use them.","A further object is to provide such systems and methods as utilize rules bases that can be readily populated and searched.","A related object of the invention is to provide such systems and methods as utilize rules bases that store information without excessive redundancy and that can be easily modified.","Still another object of the invention is to provide such systems and methods as can be implemented on legacy, current and future digital data processing systems, and that operate without undue consumption of computer storage and processing resources.","The invention provides, in one aspect, a method of finding a rule in a rules base that includes a plurality of rule entries, each having a rule, an associated objective and one or more associated circumstances. A rule finder accesses the rules base in response to a request, with a specified objective and specified circumstance(s), by searching the rules base for a matching entry. Where the search fails, the rule finder searches one or more corresponding translation tables for an entry having a first circumstance matching the specified circumstance. If found, the rule finder repeats the search of the rules base with the specified objective and with a second (or \u201cmap-to\u201d) circumstance from the matching entry in the translation table(s). The rule finder can return, e.g., to an application program that issued the request, a rule found during that repeat search of the rules base.","Further aspects of the invention provide methods as described above in which the translation tables have one or more entries that include, in lieu of a map-to circumstance, an identifier of a still further translation table. According to these aspects, the rule finder responds to a successful search of a first translation table by searching a second table for a translation entry matching the specified circumstance. If found, a map-to circumstance associated with that entry is used by the rule finder during repeat the search of the rules base.","Still further aspects of the invention provide methods as describe above in which a first translation table includes some entries containing a first circumstance and an identifier of a further translation table, and other entries containing a first circumstance and a second (or map-to) circumstance. According to these aspects, the rule finder responds to a successful search of the first translation table matching an entry of the former type by searching the second translation table and using the results of that search for the repeat search of the rules base. On the other hand, where the search of the first translation table is successful in finding an entry of the latter type, the rule finder repeats the search of the rules base with the map-to circumstance from the matching entry of the first translation table.","These and other aspects of the invention are evident in the drawings and the description that follows.","Structure",{"@attributes":{"id":"p-0027","num":"0034"},"figref":["FIG. 1","FIG. 1"],"b":["10","10","12","14","16","16","18","10","10","12","14"],"i":"a"},{"@attributes":{"id":"p-0028","num":"0035"},"figref":"FIG. 2","b":["30","30","32","34","36","30","30","10","10","30","30"]},"Rule finder  responds to requests generated by the applications programs A-C by accessing rules base  and\/or translation table(s)  to determine rules corresponding to an objective\/circumstance tuple specified in each such request. The rule finder  of the illustrated embodiment is implemented in software executing on one or more of the digital data processors A-C, though in other embodiments it may comprise hardware, a combination of software and hardware, or otherwise, executing on one or more of those digital data processors or otherwise. Regardless, the rule finder  operates as discussed below (and elsewhere herein) and as illustrated, by way of non-limiting example in .","Rules base  is a store of rules indexed or otherwise accessible by objective and circumstance. Unlike the prior art, in which a rule-containing entry is typically provided for every likely combination of objective\/circumstance expected in incoming requests, e.g., from applications programs A-C, rules base  need not have entries for all expected circumstances. Rather, circumstances for some objective\/circumstance tuples are addressed vis-\u00e0-vis translation table , as discussed below.","Though shown as tables in the figures for the sake of convenience, rules base  and translation table  of the illustrated embodiment may comprise tables, databases, linked lists, structs, or other data collections stored on and\/or accessible by one or more of the digital data processors A-C and, particularly, accessible by rule finder . Thus, by way of non-limiting example, the rules base may be contained in random access memory, read-only memory, CD ROM, DVD, hard disk, file servers, network addressable storage, or otherwise.","Referring to , the rules base  and translation tables  are shown in greater detail. Particularly, rules base  is shown as including a plurality of rule entries or records A-S. Each record A-S includes a rule that is associated with an objective, here, denoted \u201cObjective x,\u201d and one or more (here, multiple) circumstances, each, denoted \u201cCircumstance x,\u201d as shown in the drawing. Each record A-S may include additional information, as well\u2014such as additional rules, status and\/or description fields of the type shown in  (by way of example) and discussed in the corresponding text, of aforementioned U.S. Pat. No. 5,826,250, the teachings of which are incorporated herein by reference. The rules, objectives, circumstances and other information maintained in the rules base entries may be stored directly in associated entries, records or other structs, or may be associated with them indirectly, e.g., by way of pointers or otherwise. For convenience, the objective and circumstance(s) designated in a request issued by the applications program A-C, contained in the rule base entries, or so forth, are referred to herein as an objective\/circumstance tuple.","Those skilled in the art will appreciate that, although, the entries for Objective 1 and Objective 2 are show with the same number of circumstances in the drawing, this is merely for convenience and is not a requirement of the invention.","As noted, translation tables  are used by rule finder  to facilitate finding rules for objective\/circumstance tuples that are not listed in rules base \u2014and, specifically, to find alternates to circumstances that are absent from the rules base. To this end, each translation table, e.g., A-C, can include entries, each of which contains tuples of associated circumstances, where the first circumstance (for example) of each tuple is a circumstance that is expected in an incoming request, yet, may be absent from the rules base , and the second or other circumstances (again, for example) of each tuple is a circumstance that is found in the rules base  (or in another translation table entry). While the illustrated embodiment includes multiple translation tables, e.g., A-C, in other embodiments only one such table may be provided and, in still other embodiments, more tables may be provided than are shown here. And, although tables are shown in the drawing, in other embodiments these may be databases, linked lists, structs or other data collections.","The rules base includes one or more identifiers A, B indicating which of the translation tables is to be used in translating circumstances specified in incoming requests. Thus, in the drawing, indicator A specifies that table A is to be used in translating unmatched circumstances of type Circumstance 1 in requests for rules associated with Objective 1; indicator B, unmatched circumstances of type Circumstance 2; and indicator C, unmatched circumstances of type Circumstance 3. A corresponding set of indicators D-F are provided for the circumstances of Objective 2, though, as suggested by the drawing, those indicators need not specify the same tables as indicators A-C. In embodiments having only one translation table, the aforementioned identifiers A-F specify with which circumstances that table is to be used.","Similar identifiers can be used in entries of the translation tables, e.g., in place of (or in addition to) the map-to circumstance. Where used, these indicate that a further translation table is to be employed in determining an alternate circumstance for that specified in the request. These are depicted as pointers A, B associated with entries in the illustrated translation tables A, B.",{"@attributes":{"id":"p-0037","num":"0044"},"figref":"FIG. 4","b":["34","36","38","38","34","34","38","38"]},"As evident in the drawing, circumstances can be designated at varying levels of specificity within the rules base , e.g., as is the case with the locale circumstance. Thus, for example, entries such as A\u2032-E\u2032 (by way of example) include city, state and country designations. The rule finder  can match these entries with request tuples at city-level detail. On the other hand, entries such as H\u2032-I, include state and country designations only, leaving city \u201cwildcarded\u201d (as indicated by asterisks). The rule finder  can match these entries with request tuples at the state (and country) level, e.g., where no entries match at the city-level of detail. Further, entries such as S\u2032 include country designations only, leaving both city and state wildcarded. The rule finder can match these entries with request tuples at the country level, e.g., where no entries match at the city-level or state-level of detail.","Translation tables \u2032 contain lists of circumstances\u2014e.g., locales, service levels and pricing schedules\u2014that may be contained in rule requests received by the rule finder, e.g., from the applications programs A-C, but that are not (or may not) be contained in the entries A\u2032-M\u2032 or N\u2032-S\u2032. For each of these, the tables  list \u201ctranslations\u201d or mappings, i.e., circumstances that are expected in those entries or, alternatively, in other translation table entries. Thus, for example, translation table A\u2032 has entries for the circumstances (i.e., cities) Anaheim and Cambridge, which are not listed in rules base \u2032. However, for each of those circumstances, the respective entries of translation table \u2032 list alternative circumstances, namely, Los Angeles and Boston, respectively. By way of further example, translation table C\u2032 has map-to entries specifying pricing schedule levels that are used in rules base \u2032 and that are derivable (e.g., by a function call) from loan amounts specified in the incoming requests.","Pointers or other identifiers A\u2032-C\u2032 identify tables A\u2032-C\u2032, respectively, for use in translating unmatched circumstances specified in incoming requests, as discussed above. Identifiers corresponding to A, B, of , are not shown in , although they could be used to provide cross-referencing between the illustrated tables A\u2032-C\u2032 and\/or additional translation tables.","While translation tables A\u2032, B\u2032 are shown containing string (or text) designators, it will be appreciated that other data types, such as integers, reals, enumerations, and so forth, can be employed in the translation tables in accord with the form of the incoming requests and expected searches to be run against the rules base \u2032.","Moreover, as evident from the discussion above, it will be appreciated that the translation tables can include function calls and other evaluatable expressions, e.g., as in the case of table C\u2032. As shown here, that table includes function calls, \u0192(loan request), which may be called with amounts specified in incoming requests in order to secure a match with entries of the corresponding circumstance, Pricing Schedule. In addition (or instead), the translation tables may include evaluatable expressions that involve, for illustrative purposes and by way of non-limiting example, (i) backward chaining and\/or (ii) evaluation of other rules for the accessing of new data. As with translation table entries that include function calls, these expressions are executed or otherwise evaluated, e.g., by rule finder , in responding requests generated by the applications programs A-C.","Operation","As will be evident to those skilled in the art, by using the translation tables \u2032 in combination with the rules base \u2032, the finder  can find rules for objective\/circumstance tuples that are not encoded in the rules base. Thus, when the rule finder fails to find in the rules base \u2032 an entry with an objective and circumstance(s) specified in a request (e.g., from applications programs A-C), the finder can search the translation tables \u2032 for an entry with a first circumstance matching that specified in the request\u2014or, as in the case of table C, with a first circumstance that evaluates to \u201ctrue\u201d in view of the incoming request. The finder can then re-search the rules base using the corresponding circumstance from that entry, along with (i) the originally specified objective, and (ii) the other originally specified circumstances and\/or map-to circumstances derived for them from the translations tables \u2032. Once found, that rule can be returned to the requestor.","This can best be appreciated by reference to . Specifically,  depicts a method for identifying a rule for specified objective and circumstances according to one practice of the invention. Referring to step  of that drawing, rule finder operation is invoked upon receipt of a query from an applications program, e.g., A. That query specifies inter alia an objective and multiple circumstances, here, locale, service level and loan request for which a rule is sought.","In step , the rule finder searches the rules base for a rule entry associated with an objective and circumstances matching those specified in the request. As evident from the discussion above, this includes matching the locale circumstance at the city-level and, failing that, at the state-level and country-levels, respectively\u2014depending on the content of the wildcarded entries, if any, in the rules base. If the search is successful for locale, service level and pricing schedule, the rule finder returns to the requester the rule from that matching entry. See, steps -.","If the search specified in step  is not successful, the rule finder inspects indicators A\u2032-F\u2032 to determine whether there is a translation table for the circumstance(s) that caused the failure. See, step . If not, the rule finder returns a message indicating that no rule was found. See, step .","Otherwise, in step , the rule finder searches the implicated translation table A\u2032-C\u2032 for a translation entry associated with a first circumstance matching the specified circumstance, or that evaluates to \u201ctrue\u201d in view of the incoming request content (which is also considered a \u201cmatch\u201d) for purposes hereof. If such an entry is not found, the rule finder returns a message indicating that no rule was found. See, steps -.","In step , the rule finder searches the rules base for a rule entry associated with an objective and circumstance matching the originally specified objective, the map-to circumstance associated with the translation table entry found in step , and the other originally specified circumstances (or translations thereof discerned from the translation tables). If the search is successful, the rule finder returns to the requester the rule from that matching entry. See, steps -.","If the search of step  was not successful, the rule finder returns a message indicating that no rule was found. See, step . Except, however, in the event that multiple circumstance(s) failed to match in step , the rule finder repeats steps - for each combination of translated circumstances discerned from the translation tables, as shown by dashed line , prioritizing the searching sequence or among results, depending upon implementation requirements.","Referring back to step , if the matching translation table entry found in step  includes an identifier of a further translation table, the rule finder does not immediately search the rules base as shown in the flow chart. Rather, as shown by dashed line , it returns to the process illustrated at step , albeit searching that further translation table for an entry matching the specified circumstance\u2014or, if the matching translation table entry includes a second circumstance (in addition to an identifier of a further translation table), an entry matching that second circumstance.",{"@attributes":{"id":"p-0052","num":"0059"},"figref":["FIG. 6","FIG. 7"],"b":["52","56","52","62","68","72"]},"One skilled in the art will appreciate further features and advantages of the invention based on the above-described embodiments. Accordingly, the invention is not to be limited by what has been particularly shown and described herein. For example, it will be appreciated that rather than returning a rule matching a successful search in any of steps  and\/or , above, the rule finder can return an indication of the success of the search, a location of an entry containing the rule, a value associated with the rule, or otherwise. In view hereof,"],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The foregoing features, objects and advantages of the invention will become apparent to those skilled in the art from the following description and the accompanying drawings:",{"@attributes":{"id":"p-0020","num":"0027"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0021","num":"0028"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0022","num":"0029"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0023","num":"0030"},"figref":["FIG. 4","FIG. 3"]},{"@attributes":{"id":"p-0024","num":"0031"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0025","num":"0032"},"figref":["FIGS. 6 and 7","FIG. 5"]}]},"DETDESC":[{},{}]}
