---
title: Payment application framework
abstract: Embodiments of the present invention provide a payment application framework. In an example embodiment, a request at a payment facilitator is received. The request is for a split payment to a plurality of receiving parties. The request is processed to establish one or more payment transactions. A single transfer of funds is sent from an account of a sender to at least one account of a receiving party of the plurality of receiving parties.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08751387&OS=08751387&RS=08751387
owner: eBay Inc.
number: 08751387
owner_city: San Jose
owner_country: US
publication_date: 20091001
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["RELATED APPLICATION","FIELD","BACKGROUND","DETAILED DESCRIPTION"],"p":["The present application is a continuation of U.S. patent application Ser. No. 12\/207,383 filed on Sep. 9, 2008 and entitled \u201cPayment Application Framework,\u201d which is incorporated herein by reference.","The present application relates generally to the field of electronic payments and, in one specific example embodiment, a framework for payment application development.","Electronic payment systems have evolved over the last several years with the introduction of services by different payment providers or facilitators. These payment facilitators may use different proprietary programming interfaces to develop payment applications. Each application may be developed independently of one another. This approach can be problematic as new features and requirements may have to be implemented individually depending on the service. This approach may result in unnecessary duplicate efforts and may delay time to bring new payment applications\/services to the market.","For some example embodiments, methods and systems for developing payment applications using a payment application framework are disclosed. The payment application framework may include metaphors and constraints. The metaphors may include actors and objects. The actors and objects are some of the components of the payment transactions. The constraints may include rules that may be followed to process the payment transactions.","In the following description, for purposes of explanation, numerous specific details are set forth in order to provide a thorough understanding of example embodiments. It will be evident, however, to one skilled in the art that the present invention may be practiced without these specific details.","In example embodiments, a computer system (e.g., a client machine, server machine etc) configured by an application may constitute a \u201cmodule\u201d that is configured and operates to perform certain operations as described herein. Accordingly, the term \u201cmodule\u201d should be understood to encompass a tangible entity, be that an entity that is physically constructed, permanently configured (e.g., hardwired) or temporarily configured (e.g. programmed) to operate in a certain manner and to perform certain operations described herein.","Overview","A payment application framework may allow development of payment applications using a set of standards. The payment applications may cover different payment scenarios including, for example, checkout, send money, request money, split payment, mass payment, recurring payments and remittances. The example scenarios may involve one or more sending or paying parties and one or more receiving parties. The payment transactions may be associated with the transfer of funds in one or more currencies. The payment transactions may be associated with the transfer of valuable items or merchandises. For example, the payment transactions may also be associated with points, mileages, rewards, or any tangible or intangible objects or services that are perceived as having some measureable values by the one or more sending parties and the one or more receiving parties.","A payment application framework may include metaphors and constraints. There may be flows and services used with or applied to the metaphors and the constraints. Using the payment application framework, the development of new payment applications may be simplified.","Platform Architecture",{"@attributes":{"id":"p-0025","num":"0024"},"figref":["FIG. 1A","FIG. 1A","FIG. 1A"],"b":["100","112","114","116","120","117","121","118","122","120","122","100"]},"The client machines -, may include a mobile device, a palmtop computer, a laptop computer, a desktop computer, a personal digital assistant, a cellular telephone, a communications device, a wireless telephone, a land-line telephone, a control system, a camera, a scanner, a television, television cable, a telephone with a web browser, a facsimile machine, a printer, a pager, and\/or a personal trusted device. The client machines - may include a card, such as a smart card, a magnetic card, and\/or a key card. The client machines - may include a telephone or any device capable of Short Messaging Service (SMS) messaging, multimedia messaging service (MMS) messaging and\/or generating audio tones, such as dual-tone multi-frequency (DTMF) tones.","The client machines - may be browser-enabled. The client machines - may engage in an interactive message and\/or open communication session, such as SMS, electronic mail, Extensible Hypertext Markup Language (xHTML), Wireless Application Protocol (WAP), web, interactive voice response (IVR) and\/or other mobile interfaces. The communication session between the client machines - and the network-based system  may involve multiple technology modalities. For example, a user of the client machines ,  or  may engage the network-based system  via SMS and receive a responsive communication as an SMS with an embedded hyperlinked URL directing the client machines , , or  to a WAP or web page. A hyperlinked URL may be delivered directly to the client machines - from the application server(s)  and may be used to access a web site or a micro-browser, such as a WAP site. The client machines - may enable mobile videophone communications, digital television signals, and\/or digital radio signals. The client machines - may include a receiver to receive near field communications.","Turning specifically to the network-based system , an Application Program Interface (API) server , and a web server  may be coupled to, and may provide programmatic interface and web interface to one or more application servers . The client machines - may use one or more of these interfaces to access the application server(s) .","For example, the web client  may access the application server(s)  via a web interface supported by the web server . The web interface may include a web browser or any micro-browser, such as xHTML or WAP. Similarly, the programmatic client  may access the various services and functions provided by the application server(s)  via the programmatic interface provided by the API server  and\/or via the web interface provided by the web server . For an additional embodiment, an application supported by one or more applications of the application server(s)  may be downloadable to the client machines -.","The client machines - may host the interface associated with the one or more applications of the application server(s) . The interface on the client machines - may be an API interface, an SMS interface, a web interface, and\/or an IVR interface. Consumer wireless device platforms, such as Java 2 Platform Micro Edition (J2ME), J2SE and J2EE allow developers to use Java and a wireless toolkit to create applications and programs for the client machines -. The J2ME interface may include an API for the client machines -. The application of the programmatic client  may also access the network  using, for example, Binary Runtime Environment for Wireless (BREW).","The device application  executed on the client machine  may access the application server(s)  via the web interface of the web server . The device application  may be selected on the client machine  and launched in a background. The device application  may additionally or alternatively access the server(s)  via the programmatic interface of the API server . In an embodiment, the downloaded application described herein may include the device application .","The application server(s)  may host one or more administration module(s)  and one or more payment module(s) . The application server(s)  are, in turn, shown to be coupled to one or more database servers  that facilitate access to one or more databases . The account administration module(s)  may provide for administration of various accounts, as discussed in more detail herein.","A third party application  executing on a third party server  may offer goods and services to users of the client machines -. The third party application  may have programmatic access to the network-based system  via the programmatic interface provided by the API server . The third party application  may be associated with a vendor, a merchant, or any organizations that may conduct transactions with the users of the client machines -. For some example embodiments, the third party application  may be associated with an online marketplace (e.g., eBay, Inc. of San Jose, Calif.).","The payment module(s)  may provide a number of payment services and functions to the users of the client machines -. The payment module(s)  may allow the users to accumulate value (e.g., in a commercial currency, such as the U.S. dollar, or a proprietary currency, such as \u201cpoints\u201d) in accounts, and then later to redeem the accumulated value via several possible avenues. The payment module(s)  may also extend credit to a user and\/or may also have access to other funding sources to complete transactions. Examples of the funding sources include a credit card, a bank account, and\/or a credit line. The payment module(s)  may operate as a money transmitter.","A third party associated with the third party application  may conduct transactions with a user and may receive information from the payment module(s) . The information may include information regarding an order for a product, a service, a gift, a donation, etc. The information may also include shipment address specified by the user and payment status including payment confirmation. The payment module(s)  may secure financial information of the user with respect to the third party.","The client machine , , or  may host the interface associated with the payment module(s)  of the application server(s) . The web client , the device application , and\/or the programmatic client  may be associated with the account management module(s)  and\/or the payment module(s) .","The payment module(s)  may also be implemented as a standalone software program, which does not necessarily have networking capabilities. For this embodiment, the client machines - may be directly connected to the payment module(s) , without using the network .","The payment module(s)  may have access to the database  which may be coupled to database server(s) . The database  may include user account information. The user account information may include payment information, credit card information, checking account information, address information, etc.","The web client , the device application , and\/or the programmatic client  may operate a program supported by the one or more database server(s) . The database server(s)  may support one or more account information links on a user interface of the client machines -, for example, using the web client . By accessing the database server(s) , the user may add, amend or delete own account information including, for example, shipment address, payment method, etc.","The network  may include a mobile telephone network, a wireless wide area network (WWAN), a wired telephone network, a wireless local area network (wireless LAN or WLAN), a wireless Metropolitan Area Network (MAN), and\/or a wireless personal area network (PAN) (e.g., a Bluetooth\u00ae network). Other network-based technologies that may be used to connect include PON, VSAT satellite, Micro-impulse Radar, Radio Frequency identification (RFID), Ultra-Wide Band, and\/or Infrared. The client machines - may connect to the web using mobile internet exchange protocol such as, for example, Wireless Application Protocol (WAP) and\/or Hypertext Transport Protocol (HTTP).","Marketplace Applications",{"@attributes":{"id":"p-0041","num":"0040"},"figref":"FIG. 1B","b":["130","132","112","130","132","130","132","130","132","130","132","136","134"]},"The networked system  may provide a number of publishing, listing and price-setting mechanisms whereby a seller may list (or publish information concerning) goods or services for sale, a buyer can express interest in or indicate a desire to purchase such goods or services, and a price can be set for a transaction pertaining to the goods or services. To this end, the marketplace applications  are shown to include at least one publication application  and one or more auction applications  which support auction-format listing and price setting mechanisms (e.g., English, Dutch, Vickrey, Chinese, Double, Reverse auctions etc.). The various auction applications  may also provide a number of features in support of such auction-format listings, such as a reserve price feature whereby a seller may specify a reserve price in connection with a listing and a proxy-bidding feature whereby a bidder may invoke automated proxy bidding.","A number of fixed-price applications  support fixed-price listing formats (e.g., the traditional classified advertisement-type listing or a catalogue listing) and buyout-type listings. Specifically, buyout-type listings (e.g., including the Buy-It-Now (BIN) technology developed by eBay Inc., of San Jose, Calif.) may be offered in conjunction with auction-format listings, and allow a buyer to purchase goods or services, which are also being offered for sale via an auction, for a fixed-price that is typically higher than the starting price of the auction.","Store applications  allow a seller to group listings within a \u201cvirtual\u201d store, which may be branded and otherwise personalized by and for the seller. Such a virtual store may also offer promotions, incentives and features that are specific and personalized to a relevant seller.","Reputation applications  allow users that transact, utilizing the networked system , to establish, build and maintain reputations, which may be made available and published to potential trading partners. Consider that where, for example, the networked system  supports person-to-person trading, users may otherwise have no history or other reference information whereby the trustworthiness and credibility of potential trading partners may be assessed. The reputation applications  allow a user, for example through feedback provided by other transaction partners, to establish a reputation within the networked system  over time. Other potential trading partners may then reference such a reputation for the purposes of assessing credibility and trustworthiness.","Personalization applications  allow users of the networked system  to personalize various aspects of their interactions with the networked system . For example a user may, utilizing an appropriate personalization application , create a personalized reference page at which information regarding transactions to which the user is (or has been) a party may be viewed. Further, a personalization application  may enable a user to personalize listings and other aspects of their interactions with the networked system  and other parties.","The networked system  may support a number of marketplaces that are customized, for example, for specific geographic regions. A version of the networked system  may be customized for the United Kingdom, whereas another version of the networked system  may be customized for the United States. Each of these versions may operate as an independent marketplace, or may be customized (or internationalized) presentations of a common underlying marketplace. The networked system  may accordingly include a number of internationalization applications  that customize information (and\/or the presentation of information) by the networked system  according to predetermined criteria (e.g., geographic, demographic or marketplace criteria). For example, the internationalization applications  may be used to support the customization of information for a number of regional websites that are operated by the networked system  and that are accessible via respective web servers .","Navigation of the networked system  may be facilitated by one or more navigation applications . For example, a search application (as an example of a navigation application) may enable key word searches of listings published via the networked system . A browse application may allow users to browse various category, catalogue, or inventory data structures according to which listings may be classified within the networked system . Various other navigation applications may be provided to supplement the search and browsing applications.","In order to make listings, available via the networked system , as visually informing and attractive as possible, the marketplace applications  may include one or more imaging applications  utilizing which users may upload images for inclusion within listings. An imaging application  also operates to incorporate images within viewed listings. The imaging applications  may also support one or more promotional features, such as image galleries that are presented to potential buyers. For example, sellers may pay an additional fee to have an image included within a gallery of images for promoted items.","Listing creation applications  allow sellers conveniently to author listings pertaining to goods or services that they wish to transact via the networked system , and listing management applications  allow sellers to manage such listings. Specifically, where a particular seller has authored and\/or published a large number of listings, the management of such listings may present a challenge. The listing management applications  provide a number of features (e.g., auto-relisting, inventory level monitors, etc.) to assist the seller in managing such listings. One or more post-listing management applications  also assist sellers with a number of activities that typically occur post-listing. For example, upon completion of an auction facilitated by one or more auction applications , a seller may wish to leave feedback regarding a particular buyer. To this end, a post-listing management application  may provide an interface to one or more reputation applications , so as to allow the seller conveniently to provide feedback regarding multiple buyers to the reputation applications .","Dispute resolution applications  provide mechanisms whereby disputes arising between transacting parties may be resolved. For example, the dispute resolution applications  may provide guided procedures whereby the parties are guided through a number of steps in an attempt to settle a dispute. In the event that the dispute cannot be settled via the guided procedures, the dispute may be escalated to a third party mediator or arbitrator.","A number of fraud prevention applications  implement fraud detection and prevention mechanisms to reduce the occurrence of fraud within the networked system .","Messaging applications  are responsible for the generation and delivery of messages to users of the networked system , such messages for example advising users regarding the status of listings at the networked system  (e.g., providing \u201coutbid\u201d notices to bidders during an auction process or to provide promotional and merchandising information to users). Respective messaging applications  may utilize any number of message delivery networks and platforms to deliver messages to users. For example, messaging applications  may deliver electronic mail (e-mail), instant message (IM), Short Message Service (SMS), text, facsimile, or voice (e.g., Voice over IP (VoIP)) messages via the wired (e.g., the Internet), Plain Old Telephone Service (POTS), or wireless (e.g., mobile, cellular, WiFi, WiMAX) networks.","Merchandising applications  support various merchandising functions that are made available to sellers to enable sellers to increase sales via the networked system . The merchandising applications  also operate the various merchandising features that may be invoked by sellers, and may monitor and track the success of merchandising strategies employed by sellers.","The networked system  itself, or one or more parties that transact via the networked system , may operate loyalty programs that are supported by one or more loyalty\/promotions applications . For example, a buyer may earn loyalty or promotions points for each transaction established and\/or concluded with a particular seller, and be offered a reward for which accumulated loyalty points can be redeemed.","Payment framework applications  are responsible for the interaction with a payment application developer to enable developing payment applications. The payment framework applications  may perform operations that enable associating components of payment transactions with at least some sets of predefined tools including those associated with a sending entity (or sender), a receiving entity (or receiver), a payment system (or a payment facilitator) along with flows that enable transfer of values from the sender to the receiver. The payment framework applications  may be able to access information stored in the databases .","Data Structures",{"@attributes":{"id":"p-0057","num":"0056"},"figref":"FIG. 1C","b":["180","136","130","132","181","112","112","112"]},"The user table  may be associated with one or more of the sender and the receiver that may be used by the payment framework applications  described in .","The tables  also include an items table  in which are maintained item records for goods and services that are available to be, or have been, transacted via the networked system . Each item record within the items table  may furthermore be linked to one or more user records within the user table , so as to associate a seller and one or more actual or potential buyers with each item record.","A transaction table  contains a record for each transaction (e.g., a purchase or sale transaction) pertaining to items for which records exist within the items table .","An order table  is populated with order records, each order record being associated with an order. Each order, in turn, may be with respect to one or more transactions for which records exist within the transaction table .","Bid records within a bids table  each relate to a bid received at the networked system  in connection with an auction-format listing supported by an auction application . A feedback table  is utilized by one or more reputation applications , in one example embodiment, to construct and maintain reputation information concerning users. A history table  maintains a history of transactions to which a user has been a party. One or more attributes tables  record attribute information pertaining to items for which records exist within the items table . Considering only a single example of such an attribute, the attributes tables  may indicate a currency attribute associated with a particular item, the currency attribute identifying the currency of a price for the relevant item as specified in by a seller. Payment framework table  may include information that may be used by the payment framework applications .",{"@attributes":{"id":"p-0063","num":"0062"},"figref":["FIG. 1D","FIG. 1C"],"b":["136","190","191","192","193"]},"Payment Application Framework","For some example embodiments, payment applications that are developed using the payment application framework generally enable transfer of values (e.g., funds, reward points, etc.) from an account associated with one party (referred to as a sender) to another account associated with another party (referred to as a receiver). To perform the value transfer, execution of the payment applications may be based on one or more approval flows. This may require having access or the rights to initiate these approval flows and to use the services of a payment facilitator. One example of a payment facilitator is the services offered by PayPal, Inc. of San Jose, Calif. Having access may not include having approval to transfer the values out of the sender's account. Having approval may implicitly include having access. This may be applicable in pre-approval situations, as described below.","The payment applications may generate pay requests. The pay requests are related to the payment transactions. The pay requests include instructions provided to the payment facilitator (or payment processing logic in the payment facilitator) to set up or define one or more payment transactions. For example, in a split payment scenario, a single pay request can refer to a single payment transaction or multiple payment transactions. The pay requests may be viewed as tools used by the developers to set up the payment transactions. The pay requests may be transparent to the senders and the receivers. The payment transactions may be more visible and recognizable to the senders and the receivers.",{"@attributes":{"id":"p-0066","num":"0065"},"figref":"FIG. 2","b":["200","220","132","100","200","205","210","200","220","215","215","205","210"]},"For some example embodiments, the metaphor library  may include metaphors that represent high level views of more detailed payment-related concepts. The metaphors may be designed to be simple and easy to understand and to enable consistency across different types of payment applications . For some example embodiments, the constraint library  may include constraints that are associated with the payment rules. Some constraints may be associated with default values. Some examples of the constraints include frequency of payment, currency associated with payments, etc.","For some example embodiments, the metaphors in a payment application framework may include actors, objects, and phases. The actors, objects and phases may interact with one another in similar fashions across multiple payment applications developed using the payment application framework . The payment applications may be developed to process different types of payment transactions.","Metaphors: Actors",{"@attributes":{"id":"p-0069","num":"0068"},"figref":"FIG. 3A","b":["300","305","310","315","305","310","315","200"]},"A\/ Sender","For some example embodiments, the sender  is an account holder of an account with the payment facilitator . Payments are to be debited from an account of the sender . The sender  may represent any person, persons or entity who actually owns the account. The sender  may also represent any person, persons, entity, or entities who have received approval to access the account of behalf of the actual owner. The sender  may be associated with one or more payment transactions. For some example embodiments, the sender  may be associated with an email address related to the payment facilitator . For example, the payment facilitator  may be PayPal, Inc. of San Jose, Calif., and an email address related to PayPal, Inc. may be SenderID@PayPal.com. For some embodiments, an email address may be substituted with a mobile phone number or other such independent references to an account. For some example embodiments, there may be multiple senders  sending payments to a single receiver  in a payment transaction. This payment scenario is referred to as aggregate payments.","B\/ Receiver","For some example embodiments, the receiver  is an account holder of an account with the payment facilitator . The receiver  may represent any person, persons or entity who actually owns the account. The receiver  may also represent any person, persons, entity, or entities who have received approval to access the account of behalf of the actual owner. The receiver  may be associated with one or more payment transactions. For some example embodiments, the receiver  may be associated with an email address related to the payment facilitator . For some example embodiments, there may be multiple receivers  receiving payments from a single sender . This payment scenario is referred to as split payments. For some example embodiments, there may be multiple senders  and multiple receivers  in a payment transaction.","C\/ Payment Facilitator","For some example embodiments, the payment facilitator  may receive pay request  from the sender . The pay request  may have one or more line items describing the pay request in detail. The payment facilitator  may process the pay request  and may cause payment  to be sent from an account of the sender  to an account of the receiver . The payment facilitator  may enable the sender  to use different payment instruments. For example, the payment instruments may include credit cards, debit cards, checking accounts, savings accounts, etc.",{"@attributes":{"id":"p-0073","num":"0072"},"figref":"FIG. 3B","b":["390","305","310","350","355","200","355","360","365","360","365","200"]},"Although the following discussions use examples that refer to payments processed by a payment facilitator, it should be noted that the discussions may also apply to one or more payment facilitator(s) and\/or one or more payment network(s).","Metaphors: Objects","For some example embodiments, the objects may include pay requests, pay keys, and parameters associated with the pay requests and the pay keys. The pay requests may include information that defines a payment. The pay keys may be encrypted and may be used to request for approval or to indicate approval. As will be described, the approvals may be associated approval flows or pre-approval flows. The parameters may be included in hypertext transfer protocol (HTTP) messages. The HTTP messages may be sent between the payment applications and may be processed by the payment facilitator.","Referring to the example illustrated in , the pay request  may include an amount, information about a sender, information about a receiver, and a currency. The pay request  may also include other related information such as, for example, transaction fee. The transaction fee is the fee charged by the payment facilitator  to process the payment transaction. The transaction fee may be paid by the sender  or the receiver .","The pay request  is sent to and processed by the payment facilitator . The payment facilitator  may issue a pay key in response to receiving the pay request . The payment facilitator  may send the pay key to the sender . The pay key may be used for approval. For some example embodiments, the pay request  is not processed until the sender  approves the pay request . The sender  may provide an approval (or an indication of approval) based on an approval flow. It may be noted that the indication of approval received from the sender  may either be a positive approval or a negative approval.","A pay key is uniquely associated with a pay request and may be used in subsequent payment transactions that are related to the pay request. For some example embodiments, a pay request waiting for an approval from the sender  may expire if the approval is not received after a predetermined period of time. An extension may be issued to prevent the pay request from expiring. An example of the pay key is illustrated as pay key  in .","For some example embodiments, an approval may be provided by the sender  before a payment is made. This is referred to as pre-approval. In pre-approval situations, a pre-approval request may be created and sent to the payment facilitator. The payment facilitator may process the pre-approval request and may return a pre-approval key. Subsequently, a pay request along with the pre-approval pay may be sent to the payment facilitator for processing.","For some example embodiments, the pre-approval key may be issued for one time future payment or for a set of recurring future payments. A pre-approval key may be unique to a pre-approval request. The sender  may provide a pre-approval based on a pre-approval flow. The pre-approval flow may include a set of rules. For some example embodiments, a pre-approval request may expire after a predetermined period of time unless it is extended. An example of the pre-approval key is illustrated as pre-approval key  in .","The payment facilitator may perform functions to handle the approval requests and the pre-approval requests. The payment facilitator may also perform functions to handle other payment-related requests. Some of these functions may be required in every payment transaction, while some may be optional. Without limiting the services and\/or capabilities of the payment facilitator, the following table (Table 1) highlights some example functions.",{"@attributes":{"id":"p-0082","num":"0081"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 1"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Service or Capability Name - Usage"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"Pay - used in individual payment transaction."},{"entry":"GetPayStatus - used to determine the status of a payment."},{"entry":"GetPreApproval - used to get approval for a future one-time or recurring"},{"entry":"payment."},{"entry":"GetPreApprovalStatus - used to determine if a sender has approved a -pre-"},{"entry":"approval request."},{"entry":"Capture - used to capture funds that have been reserved for a payment."},{"entry":"Partial payments may not be allowed, but within split payments the capture"},{"entry":"of a particular segment or transaction of the pay request is possible."},{"entry":"Refund - used in complex split payment scenarios where refunds from"},{"entry":"multiple receivers are to be triggered all at once the refund function is used."},{"entry":"This function may require third party access right. A refund transaction can"},{"entry":"be executed by the receiver by calling the Refund function. The receiver"},{"entry":"would pass in a Pay Key and the passed in refund amount to be refunded to"},{"entry":"the sender."},{"entry":"Interactive Voice Response (IVR) Approval - used to trigger payment"},{"entry":"facilitator's IVR service to call a registered payment facilitator user's mobile"},{"entry":"phone number to get approval for a payment."},{"entry":"GetPayRequestDetails - used to get information about a pay request based"},{"entry":"on a pay key. A pay key may be mapped to to one or more transaction."},{"entry":"GetPreApprovalRequestDetails - used to get information about a pay"},{"entry":"request based on a pre-approval key."},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}]}},"br":{}},{"@attributes":{"id":"p-0083","num":"0082"},"figref":["FIG. 4A","FIG. 4B"],"b":["400","405","410","405","315","410","305","315","410","455"]},"For some example embodiments, the pay phase  may occur before the approval phase . An example is a simple checkout scenario where a pay request is followed by an approval by the sender . As illustrated, the pay request may include a pay key  as a parameter. Operations associated with the approval phase  may be based on an approval flow. The approval flow may direct the sender  to a web site of the payment facilitator . The web site of the payment facilitator  may provide an interface for the sender  to provide information necessary for an approval. For example, the sender  may be a customer purchasing an item at a merchant's web site. The sender  may be redirected from the merchant's web site to the web site of the payment facilitator. This redirection may be via a Uniform Resource Locator (URL) link associated with an interface presented by the web site of the payment facilitator (e.g., PayPal web site). Based on the sender  providing the approval for payment, the sender  may be redirected back to the merchant's web site. In this scenario, a redirect URL link (e.g., link to the merchant's web site) may be sent as a parameter, and the sender  is redirected to a specified page of the merchant's web site following completion of the approval flow.","For some example embodiments, the approval phase  may be associated with approval notification flows. An approval notification flow may use a notification URL link as a parameter. The notification URL link may be associated with a merchant. For example, when the sender  provides the approval, the merchant is notified so that the purchase transaction of the sender  at the merchant's web site can proceed to a next step. The merchant in this example is in the role of the receiver . For some example embodiments, the approval phase  may include sending a notification to the sender  when the funds are transferred out of the sender's account. This may be performed via email, wireless communication, or any other form of communication that may enable notifying the sender . A similar notification may also be sent to the receiver .",{"@attributes":{"id":"p-0086","num":"0085"},"figref":"FIG. 4B","b":["450","455","460","455","460","455"]},"A pre-approval request may be initiated and sent to the sender . The pre-approval request may be initiated by a receiver (e.g., a merchant) . A pre-approval key  may also be sent. The sender  may review the pre-approval request via a pre-approval interface associated with the payment facilitator . The sender  may provide the receiver  the pre-approval. As described above, the pre-approval key  may be unique and may be associated with the pre-approval request for one time or for recurring future payments. For some example embodiments, the pre-approval key  may be sent using encrypted data.","Constraints","The constraints may include rules that may be used by the developers to more efficiently develop payment applications. The rules may be implemented in the payment flows. The payment flows may be associated with the approval flows and\/or the pre-approval flows. Parameters may be used with the payment flows. The parameters may have default values. For some example embodiments, some of the parameters may be used in the payment flows with their default values unchanged. The following table (Table 2) illustrates an example summary of the payment flows that may be used.",{"@attributes":{"id":"p-0089","num":"0088"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"91pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"91pt","align":"left"}}],"thead":{"row":[{"entry":"TABLE 2"},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}},{"entry":[{},"Pay \u2192 Approval","Pre-Approval \u2192 Pay"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Pre-",{},"A pre-approval request is"]},{"entry":["Approval",{},"submitted to the payment"]},{"entry":[{},{},"processing logic of a payment"]},{"entry":[{},{},"facilitator. The pre-approval"]},{"entry":[{},{},"request is processed. A pre-"]},{"entry":[{},{},"approval key is returned."]},{"entry":[{},{},"A sender is directed to"]},{"entry":[{},{},"the pre-approval flow"]},{"entry":[{},{},"with the pre-approval"]},{"entry":[{},{},"key as a parameter."]},{"entry":["Payment","A pay request is submitted by a","A pay request is submitted "]},{"entry":[{},"receiver to the payment","along with the pre-approval"]},{"entry":[{},"processing logic of the payment","key to the payment"]},{"entry":[{},"facilitator. The pay request is","processing logic of the"]},{"entry":[{},"processed and a pay key is","payment facilitator. The pay"]},{"entry":[{},"returned to the requester","request is processed. The"]},{"entry":[{},"(receiver).","payment is processed."]},{"entry":["Approval","A sender is directed to an",{}]},{"entry":[{},"approval flow with pay key as a",{}]},{"entry":[{},"parameter. The sender provides",{}]},{"entry":[{},"an approval, and the payment is",{}]},{"entry":[{},"processed."]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}}}},"In order for a receiver  to use the payment flows, the receiver  may need to have access to services provided by the payment facilitator . As described above, having access may enable the receiver  to send the pay requests  to the payment facilitator . In situations when the sender  provides a pre-approval for a payment, the sender  may implicitly provide the receiver  (the party who initiated the pre-approval request) access to the account of the sender  on behalf of the sender . This may be limited to a time duration when the pre-approval request is active. For some example embodiments, the receiver  may initiate a pay request only to reserve funds. In those situations, only operations associated with the reserve funds may be completed, and the transfer of funds may wait until there is a capture (described above). The capture may include the pay key as a parameter.","Constraints: Approval Flows",{"@attributes":{"id":"p-0091","num":"0090"},"figref":"FIG. 5","b":["320","305","320","500","505"]},"At block , a pay request  is received by the sender . The pay request  is associated with a pay key . The pay key  may be encrypted for security. The pay key  may be sent to the sender  via a web page redirect, email, short message services (SMS) messages, etc. The pay key  may enable the sender  to retrieve the specific information about the pay request . For some example embodiments, the approval flow may be associated with an approval interface showing the specific details of the payment based on the pay request . The interface may be presented to the sender . For example, the sender  may be directed to a web page associated with the interface. The web page may be part of a web site associated with the payment facilitator . The sender  may need to log in. This is illustrated in block .","After the sender  logs in, the specific information about the pay request  may be displayed. At block , the sender  may review the pay request . At block , the sender  may provide an approval. Based on the sender  providing the approval, the process may be completed. The sender  may be directed back to a web page that causes the pay request  to be initiated.","Constraints: Interactive Voice Response (IVR) Approval Flows","Interactive Voice Response (IVR) is a technology that is used in mobile applications via application programming interfaces (APIs). The IVR approval flows may be used to get an approval from a sender  via a mobile phone of the sender . The sender  may need to have the sender's phone number verified by the payment facilitator . For some example embodiments, the payment facilitator  may include processing logic that places calls to the sender  using the sender's phone number that was previously registered with the payment facilitator . As illustrated in , the pay request  and the pay key  may be sent to the sender  for approval. However, instead of directing the sender  to a web page, the IVR system may call the sender  on the phone to get the approval. The sender  may use a personal identification number (PIN) and provide the approval via the sender's phone.","Constraints: Pre-Approval Flows",{"@attributes":{"id":"p-0095","num":"0094"},"figref":"FIG. 6","b":["600","605","605","305","465","465","465","305"]},"For some example embodiments, the constraints included in the pre-approval request may need to be negotiated between the sender  and the receiver  separate from the pre-approval flow. For some example embodiments, the pre-approval flow may be associated with a pre-approval interface showing the specific details of the pre-approval request. The pre-approval interface may be associated with the payment facilitator  and may be presented to the sender . For example, this may be performed via a URL and the sender  may be directed to a web page associated with the URL. The web page may be part of a web site associated with the payment facilitator . The sender  may need to log in. This is illustrated in block . At block , the sender  reviews the details of the pre-approval request. At block , the sender  may provide the pre-approval. Having the pre-approval may allow the receiver  to receive future payments without having to submit a pay request.","For some example embodiments, a pre-approval provided by the sender  may be canceled by the sender . This may be performed via a pre-approval management interface of the payment facilitator . The pre-approval management interface may list all the pre-approvals provided by the sender . The pre-approval management interface may enable the sender  to select and to cancel one or more pre-approvals.","The pre-approval flows may be different from the normal approval flows because the approval phase takes place before the pay phase and because a single pre-approval can be applied to multiple payments. The pre-approval flows may be applied to many different payment scenarios (e.g., split payment, checkout, send payment, etc.). Following are some example constraints that can be applied to a pre-approval flow:\n\n",{"@attributes":{"id":"p-0099","num":"0105"},"figref":"FIG. 7","b":["305","310"]},"At block , the sender  sends in a pay request. The sender  may need to have access to the payment facilitator  to submit the pay request. In this example, the sender  may be either the actual account holder or someone who has rights to access the account of behalf of the sender . The payment facilitator  processes the pay request and generates a pay key.","The sender  is then directed to an approval interface by the approval flow with the pay key as a parameter. This may be though a web page redirect, email, SMS message, or any other method that may include the sending a URL. The approval interface may be associated with the payment facilitator . Based on the sender  providing the approval, the payment is processed, as illustrated in blocks  and . Optionally, if notification is requested and specified in the pay request, a notification message may be sent to the receiver  and\/or the sender .","An example of a send money scenario may include making an online payment for a utility bill. During the pay phase, a person (sender) visiting a web site of a utility company (receiver) to make a payment for the utility bill. The web site of the utility company may make a programming call (pay request) with the details of the payment to the payment facilitator. A pay key is generated. The pay key may be sent to the utility company. During the approval phase, the person is redirected from the web site of the utility company to a web site of a payment facilitator (e.g., PayPal) with the pay key and a redirect URL as parameters. The person is taken through an approval flow and approves the payment. The person is then redirected back to the web site of the utility company using the URL parameter. Payment is then transferred from the person's account to an account of the utility company. The account of the utility company may be with the payment facilitator.","It may be noted that this example covers a send money scenario, and thus it may not be necessary to perform any reserve funds functions. However, if the reserve funds functions are required, this information would be included in the pay request. The reserve funds would then be performed after the approval is provided. Subsequently, recapture functions may need to be performed to transfer the funds from the person's account with the payment facilitator.","The utility company may also want to use the pay status functions to check on the status of the payment. This may be performed by making another programming call to the payment facilitator to check on the pay status of the payment. The programming call includes the pay key as a parameter, and the return status from the programming call may include approval information and funds transfer information. A payment notification may be sent to the utility company web site if the notification option is included in the pay request.","In certain situations, the send money scenarios may be associated with the pre-approval flow. These scenarios may be referred to as pre-approval send money. This may occur when a sender provides the pre-approval and access to send money from the sender's account in the future with restrictions. The sender  may create a pre-approval request with constraints of the payment and send the request to the payment facilitator . A pre-approval key is then generated by the payment facilitator , and the sender  is taken through the pre-approval flow to view and create an agreement for the pre-approval payments. Subsequently, the sender  (or someone acting on the sender's behalf) may submit a pay request and send the pay request along with the pre-approval key to the payment facilitator . Based on the sender providing the approval, the payment is transferred. A notification may also be included in the pay request to notify the sender  when the payment is transferred.","Checkout Application",{"@attributes":{"id":"p-0106","num":"0112"},"figref":"FIG. 8","b":["310","305","310"]},"In this scenario, a consumer (sender ) may indicate to a merchant (receiver ) at a merchant's web site that the consumer wants to make a purchase. A common example would include the consumer filling a shopping cart on the merchant's website and selecting a checkout cart. The merchant then creates a pay request and send it to payment facilitator , as illustrated in block .","At block , a pay key is received from the payment facilitator . The merchant then redirect the consumer to the web site of the payment facilitator  with the pay key as a parameter, as illustrated in block . The consumer is taken through an approval flow and approves the payment, as illustrated in block . The fund is then transferred to the merchant, as illustrated in block .","In certain situations, the checkout scenarios may be associated with a pre-approval flow, referred to as pre-approval checkout. This occurs when a consumer (sender) and a merchant (receiver) agree to a pre-approval payment scenario by, for example, filling out a form on the web site of the merchant. The merchant then creates a pre-approval request with the constraints of the payment and then sends it to the payment facilitator . A pre-approval key is received from the payment facilitator . The consumer is then redirected to the payment facilitator  and taken through a pre-approval flow. The consumer then views and creates the agreement to the pre-approval payments. Subsequently, the merchant may generate a pay request and send the pay request with the pre-approval key to the payment facilitator  for payments. A pay key may be sent to the merchant by the payment facilitator .","Split Payments",{"@attributes":{"id":"p-0110","num":"0116"},"figref":["FIGS. 9A-9B","FIG. 9A","FIG. 9B"]},"Referring to , a single pay request may be used to transfer funds from one sender  to multiple receivers -. In this example, since there are three receivers ,  and , there may be three separate transactions. In parallel payments, it may not be necessary to designate a primary receiver. The sender  or any of the receivers - can initiate the pay request. This is advantageous in situations when one receiver desires to make a pay request with a reserve funds function while another receiver is designated to use the capture function. When it is time for the sender to review the pay request and to provide the approval, all segments or transactions within a parallel payment may need to be visible for the sender  to approve. Accordingly, the receivers - are the merchants of record for all parallel payment scenarios.","An example of a parallel payment scenario includes a consumer who purchases goods\/services from multiple vendors in a shopping mall and pay for the goods\/services in one checkout flow. The sender  (consumer) may be redirected to a payment facilitator  and may only need to provide one approval even though there are multiple receivers - (vendors) involved. When the approval is provided by the sender , the funds may be transferred to the accounts of each of the receivers -. It may be noted that the approval flow in the parallel payment scenarios with multiple receivers may involve the same operations (e.g., pay request, pay key, redirecting, approval, and payment) as the approval flow for a single receiver. The difference is that the payments are split to three receives in the parallel payment scenarios. The details of how much to pay each of the receivers - may be included in the parameters of the pay request and is based on the cost of the items purchased from the particular vendor. In the situation when one of the receivers - needs to cancel an item, a refund is processed for the amount associated with the item being canceled. In the situation when one of the payment transactions fails (e.g., due to insufficient funds), then a default action may include reversing or rolling back all payment transactions.","Referring to , the chained payment scenario may be different than the parallel payment scenario because of the special circumstances surrounding refunds, fees, and funds movement. This is because the movement of the funds to the primary receiver may need to happen before the funds are transmitted to the additional receivers. The chained payment scenarios may include a primary receiver  who first receives all of the funds for the payment transaction. After the payment transaction completes, the funds are then moved into one or more secondary receiver's accounts. For some example embodiments, the chained payment scenario may only have a single primary receiver  sending to a single group of additional receivers -. For some example embodiments, a limit may be placed on a number of receivers (primary and secondary receivers) for any given pay request. The sender  of the payment transaction in a chained payment scenario may only see the primary receiver  in the approval flow and any payment transaction history. Accordingly, the primary receiver  is the merchant of record for all chained payment scenarios.","An example of a chained payment scenario includes a broker who receives funds on behalf of the service providers. The broker is the primary receiver , and the service providers are the secondary receivers -. An example of a broker may be Travelocity.com which provides authorization for all aspects of a travel package including airline portion, hotel portion, event portion, etc. Each of these portions may be associated with a different service provider. The secondary receivers - may need to provide the primary receiver  third-party access to their accounts in order to transfer payments into their accounts. This may also allow the primary receiver to issue refunds to the sender  on behalf of the secondary receivers -.","During the pay phase, the sender  (consumer) visits the web site of the primary receiver  (e.g., Travelocity.com). The sender  selects a package that includes the services (e.g., hotel, car rental, flight insurance, tour packages, etc.) provided by the secondary receivers -. The primary receiver  creates a pay request and sends the pay request to the payment facilitator . A pay key is generated and provided by the payment facilitator  to the primary receiver .","During the approval phase, the primary receiver  redirects the sender  to the payment facilitator . The sender  reviews the pay request and provides the approval based on an approval flow. The pay key is sent along with a redirect URL to return to the web site of the primary receiver . Based on the sender  approving the payment, the sender  is redirected back to the web site of the primary receiver  using the redirect URL. The funds are then transferred from the sender's account to the account of the primary receiver . The funds are then sent from the account of the primary receiver  to the accounts of the secondary receivers -. It may be noted that all of these accounts may be associated with the payment facilitator .","Computer System",{"@attributes":{"id":"p-0117","num":"0123"},"figref":"FIG. 10","b":"1000"},"Further, while a single machine is illustrated, the term \u201cmachine\u201d shall also be taken to include any collection of machines that individually or jointly execute a set (or multiple sets) of electronically-coded instructions to perform any one or more of the methodologies discussed herein.","The example computer system  includes a processor  (e.g., a central processing unit (CPU), a graphics processing unit (GPU), or both), a main memory  and a static memory , which communicate with each other via a bus . The computer system  may further include a video display unit  (e.g., a liquid crystal displays (LCD) or a cathode ray tube (CRT)). The computer system  also includes an input device  (e.g., a keyboard), a cursor control device  (e.g., a mouse), a disk drive unit , a signal generation device  (e.g., a speaker) and a network interface device .","The disk drive unit  includes a machine-readable medium  on which is stored one or more sets of electronically-coded instructions (e.g., software ) embodying any one or more of the methodologies or functions described herein. The instructions  may also reside, completely or at least partially, within the main memory , the static memory , and\/or within the processor  during execution thereof by the computer system . The main memory  and the processor  also may constitute machine-readable media.","The instructions  may further be transmitted or received over a network  via the network interface device .","Applications that may include the apparatus and systems of various embodiments broadly include a variety of electronic and computer systems. Some embodiments implement functions in two or more specific interconnected hardware modules or devices with related control and data signals communicated between and through the modules, or as portions of an application-specific integrated circuit. Thus, the example system is applicable to software, firmware, and hardware implementations.","While the machine-readable medium  is shown in an example embodiment to be a single medium, the term \u201cmachine-readable medium\u201d should be taken to include a single medium or multiple media (e.g., a centralized or distributed database, and\/or associated caches and servers) that store the one or more sets of instructions. The term \u201cmachine-readable medium\u201d shall also be taken to include any medium that is capable of storing, encoding or carrying a set of instructions for execution by the machine and that cause the machine to perform any one or more of the methodologies of the present invention. The term \u201cmachine-readable medium\u201d shall accordingly be taken to include, but not be limited to, solid-state memories, optical and magnetic media, and carrier wave signals.","The illustrations of embodiments described herein are intended to provide a general understanding of the structure of various embodiments, and they are not intended to serve as a complete description of all the elements and features of apparatus and systems that might make use of the structures described herein. Many other embodiments will be apparent to those of skill in the art upon reviewing the above description. Other embodiments may be utilized and derived therefrom, such that structural and logical substitutions and changes may be made without departing from the scope of this disclosure.  are merely representational and may not be drawn to scale. Certain proportions thereof may be exaggerated, while others may be minimized.","Although the present invention has been described with reference to specific example embodiments, it will be evident that various modifications and changes may be made to these embodiments without departing from the broader spirit and scope of the invention. Accordingly, the specification and drawings are to be regarded in an illustrative rather than a restrictive sense.","The description includes terms, such as \u201cup\u201d, \u201cdown\u201d, \u201cupper\u201d, \u201clower\u201d, \u201cfirst\u201d, \u201csecond\u201d, etc. that are used for descriptive purposes only and are not to be construed as limiting. The elements, materials, geometries, dimensions, and sequence of operations may all be varied to suit particular applications. Parts of some embodiments may be included in, or substituted for, those of other embodiments. While the examples of dimensions and ranges are considered typical, the various embodiments are not limited to such dimensions or ranges.","The Abstract is provided to comply with 37 C.F.R. \u00a71.74(b) to allow the reader to quickly ascertain the nature and gist of the technical disclosure. The Abstract is submitted with the understanding that it will not be used to interpret or limit the scope or meaning of the claims. In the Detailed Description, various features are grouped together in a single embodiment for the purpose of streamlining the disclosure. This method of disclosure is not to be interpreted as reflecting an intention that the claimed embodiments have more features than are expressly recited in each claim. Thus, the following claims are hereby incorporated into the Detailed Description, with each claim standing on its own as a separate embodiment."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Some embodiments are illustrated by way of example and not limitation in the figures of the accompanying drawings in which:",{"@attributes":{"id":"p-0006","num":"0005"},"figref":"FIG. 1A"},{"@attributes":{"id":"p-0007","num":"0006"},"figref":["FIG. 1B","FIG. 1A"]},{"@attributes":{"id":"p-0008","num":"0007"},"figref":["FIGS. 1C-1D","FIG. 1A"]},{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 3A"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 3B"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 4A"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 4B"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIGS. 9A-B"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 10"}]},"DETDESC":[{},{}]}
