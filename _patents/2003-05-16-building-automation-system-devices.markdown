---
title: Building automation system devices
abstract: A building automation control system for use in a building having an IT network is disclosed. The building automation control system includes at least one BAS controller connected to the IT network and at least one BAS device located within the building and connected to the at least one BAS controller through the IT network. Further the system may be configured to use standards-based IT technologies over the IT network to manage the at least one BAS device. The standards-based IT technologies may include DHCP to obtain IP addresses and network parameters of the BAS devices, DNS to provide a mechanism for associating the BAS devices with human-friendly names, a distributed mechanism for storing the names, and a method for locating the BAS devices by resolving names and IP addresses, SNTP to synchronize time on the BAS devices, SNMP to monitor the BAS devices and report alarms, SMTP for delivery of e-mail alarms, web-services to provide Internet-friendly communications, and standards-based IT security mechanisms to protect software of the BAS devices.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07634555&OS=07634555&RS=07634555
owner: Johnson Controls Technology Company
number: 07634555
owner_city: Holland
owner_country: US
publication_date: 20030516
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF PREFERRED AND OTHER EXEMPLARY EMBODIMENTS"],"p":["The present invention relates to building automation systems that utilize distributed network architectures. More specifically, the present invention relates to building automation systems for controlling subsystems of customers' buildings or other facilities using existing or standardized IT networks rather than dedicated or specialized BAS networks.","It is generally known to provide building automation systems (BAS) having distributed network architectures. Such known systems are typically used to monitor and control operational subsystems found in commercial buildings and other facilities such as heating, ventilation and air conditioning (HVAC), fire, security, power management, parking structure management, elevator control, energy management, and the like.","As new requirements have arisen, new markets have opened up, and new technologies have become available, it has become necessary to expand the functionality and scope of such systems to satisfy customer demand and to remain cost competitive. For example, current BAS architectures have recently been designed to ensure they can co-exist with IT technology on a common IT network.","Although current BAS systems are capable of co-existing with existing standardized IT networks, such known systems have not heretofore been designed to fully utilize the capabilities of IT infrastructures. For example, the heretofore known BAS systems do not incorporate or use many standardized IT technologies that are now in common use on IT networks such as Dynamic Host Configuration Protocol (DHCP), Domain Name Server (DNS) protocol, Simple Network Time Protocol (SNTP), Simple Network Management Protocol (SNMP), Simple Mail Transfer Protocol (SMTP), web services, standards-based IT security mechanisms, and the like.","Accordingly, it would be advantageous to provide building automation systems that not only co-exist with IT systems, but are capable of directly interacting with and fully utilizing the standardized features and capabilities of such networks. In particular, it would be advantageous to provide BAS controllers and related devices that are capable of using standards-based technologies of existing IT networks such as DHCP, DNS, SNTP, SNMP, SMTP, web services, standards-based IT security mechanisms, and the like. Inexpensive, reliable, and widely adaptable IT compatible BAS systems that provide the above-referenced and other standardized IT functionality would represent a significant advance in the art.","The present invention relates to distributed network BAS systems that fully incorporate and utilize standards-based IT technologies such as DHCP and DNS to resolve network addresses and names, SNTP to synchronize time on the BAS controllers, SNMP to allow network monitoring of BAS devices and to report alarms, SMTP for delivery of E-mail alarms, web services to provide Internet-friendly communications, and use of standards-based IT security mechanisms to protect BAS software.","How these and other advantages and features of the present invention are accomplished (individually, collectively, or in various subcombinations) will be described in the following detailed description of the preferred and other exemplary embodiments, taken in conjunction with the FIGURES. Generally, however, they are accomplished in a building automation control system for use in a building having an IT network, including at least one BAS controller connected to the IT network and at least one BAS device located within the building and connected to the at least one BAS controller through the IT network. Further, the system may be configured to use standards-based IT technologies over the IT network to manage the at least one BAS device.","Another embodiment of the present invention provides a method of controlling BAS devices in at least one building using standards-based IT technologies to monitor statistics and manage operational parameters of the BAS devices on an enterprise intranet-type network. The method may include providing network and device management including one or more of the following functions: (a) discovery of the BAS devices on the network; (b) identification of the BAS device models and revisions; (c) tracking of online\/offline status of the BAS devices; (d) tracking communication statistics including determining a number of data packets sent to or from the BAS devices, and determining a number of error transmissions; and (e) managing configuration parameters of the BAS devices including resolving IP addresses for the BAS devices, determining manufacturer information of the BAS devices, determining versions of operating systems, and setting protocol configuration parameters.","Another embodiment of the present invention provides a method of controlling BAS devices of at least one building using standards-based IT technologies on an enterprise intranet-type network. The method may include one or more of the following: (a) using DHCP to obtain IP addresses and network parameters; (b) using DNS to provide a mechanism for identifying hosts with human-friendly names, a distributed mechanism for storing the names, and a method for locating hosts by resolving names and IP addresses; (c) using SNTP to synchronize time on the BAS devices; (d) using SNMP to monitor the BAS devices and report alarms; (e) using SMTP for delivery of e-mail alarms; (f) using web-services to provide Internet-friendly communications; and (g) using standards-based security mechanisms to protect software of the BAS devices.","Another embodiment of the present invention provides a method of integrating BAS controllers and devices into an existing IT network of a building so that the BAS controllers and devices function as part of the existing IT network rather than as part of a parallel and separate network. The method may include configuring the BAS controllers to use standards-based IT technologies to provide network and device management of the BAS devices.","Another embodiment of the present invention provides an IT network that uses standards-based IT technologies to manage BAS devices within at least one building. The standards-based IT technologies may include one or more of the following: (a) DHCP to obtain IP addresses and network parameters of the BAS devices; (b) DNS to provide a mechanism for associating the BAS devices with human-friendly names, a distributed mechanism for storing the names, and a method for locating the BAS devices by resolving names and IP addresses; (c) SNTP to synchronize time on the BAS devices; (d) SNMP to monitor the BAS devices and report alarms; (e) SMTP for delivery of e-mail alarms; (f) web-services to provide Internet-friendly communications; and (g) standards-based IT security mechanisms to protect software of the BAS devices.","The present invention further relates to various features and combinations of features shown and described in the disclosed embodiments. Other ways in which the objects and features of the disclosed embodiments are accomplished will be described in the following specification or will become apparent to those skilled in the art after they have read this specification. Such other ways are deemed to fall within the scope of the disclosed embodiments if they fall within the scope of the claims which follow.","Before explaining a number preferred, exemplary, and alternative embodiments of the invention in detail it is to be understood that the invention is not limited to the details of construction and the arrangement of the components set forth in the following description or illustrated in the drawings. The invention is capable of other embodiments or being practiced or carried out in various ways. It is also to be understood that the phraseology and terminology employed herein is for the purpose of description and should not be regarded as limiting.","Before proceeding to the detailed description of the preferred and exemplary embodiments, several comments can be made about the general applicability and the scope thereof. First, while the components of the disclosed embodiments will be illustrated as being designed for a building automation control system for use in a building having an IT network, the features of the disclosed embodiments have a much wider applicability. For instance, the design is adaptable for other structures that employ control systems and IT networks. In addition, although specific examples of standardized IT technologies are described in this disclosure, any number of other standardized IT technologies may be used.",{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 1","b":["10","10","10"]},"According to the illustrated embodiment, a plurality of network control engines (NCEs)  and  operate separate groups of control subsystems of BAS  and are connected to a high speed digital communication network , such as a 10 Base-T or 100 Base-T Ethernet. As explained further below, NCEs  and  execute specialized programs to maintain the environmental conditions governed by their respective subsystems according to programmed parameters. An optional local input\/output (I\/O) panel  allows a user to monitor and control the functions of NCE  via a standard IT interface such as RS-232. NCEs  and  also perform numerous background tasks to assure that each of the nodes of network  is operating with the same set of global variables, is time synchronized, and has consistent directories of system names and configuration data.","The environmental subsystems in turn are governed by separate configurable field controllers (CFCs) , , ,  and  which are connected to one of NCEs  and  by a field bus. As shown in , CFCs - may be connected to NCEs  and  by N2 buses  and , respectively. However, controllers - could instead (or additionally) be connected to NCEs  and  by alternative network architectures such as LON bus  or MSTP (high speed) bus . According to a preferred embodiment, NCE  is a high capacity controller capable of being connected to as many as three or more field buses simultaneously, while NCE  can be connected to one or two field buses simultaneously.","As illustrated in , CFCs - interface with BAS devices such as sensors, actuators and other devices of the respective BAS subsystems. Depending upon the type of BAS subsystem being controlled, CFCs - may receive signals from pressure\/electric transducers, binary input contacts, differential pressure inputs and binary frequency inputs. Typical actuators and outputs of a subsystem include analog devices, solenoids, relays, motor controllers, indicator lights and annunciators. These BAS devices could be used in a wide variety of BAS subsystems, including but not limited to HVAC, fire, security, power management, parking structure, elevator control, energy management subsystems, etc. Similarly, the BAS devices could be used with a wide variety of BAS equipment such as doors, lights, fire detectors, sump detectors, chillers, boilers, vents, fans, etc.","In the exemplary system , a first CFC  operates lighting within an area of the building. A plurality of light circuits  are connected to relay outputs of CFC , which also receives input signals from manual room light switches . The second CFC  operates a conventional variable air volume (VAV) unit  of the building HVAC system and receives input signals from an airflow sensor  and a thermostat  within the room supplied by the VAV unit. In response to these input signals and control commands from the N2 bus, second CFC  operates electrical actuators of a variable damper  and a chiller coil valve .","In the illustrated embodiment, the second NCE  is provided with expanded capacity and range via its connection to two remote network expansion units  and  on the field bus. This eliminates the necessity of wiring the AC line voltage for separate devices back to NCE .","In addition to the NCEs, system  includes other Ethernet devices such as devices ,  and . Devices ,  and  may comprise additional NCEs, web servers, application servers, configuration servers, and the like. In the illustrated embodiment, Ethernet device  comprises a first operator workstation, such as a personal computer, which is connected to network  to communicate with NCEs  and . The first workstation  may be loaded with and execute a supervisory control program which gathers status data regarding the operation of components of system  and responds to user inputs by issuing commands that govern system operation. First workstation  may also store information regarding the configuration of system  and operational data associated with each level of the system organization.","Ethernet device  is a second workstation that is connected not only to network  but also to the Internet  for external communication. For example, the second workstation  may be loaded with software that implements a facility management system Website on the Internet . Alternatively, an external connection can be provided to an Intranet for an educational institution or a large business entity, thus enabling centralized control of several buildings on a campus. In either case, second workstation  may be loaded with a conventional Web server program for exchanging information over the Internet  (or Intranet) and\/or over the network  via the standard Transport Control Protocol\/Internet Protocol (TCP\/IP).","Ethernet device  is yet another workstation connected to network  that may be used to provide non-BAS related functions such as secretarial support. As persons skilled in the art will appreciate, workstation  may be connected to additional devices  (e.g., other workstations, printers, scanners, fax machines, etc.) via network  or, alternatively, via communication ports (e.g., serial, parallel or USB ports), to provide workstation  as is well known in the IT field. Workstation , ,  are each preferably configured to run a standard IT operating system, such as Windows\u00ae NT. Thus, workstations , ,  may exist and operate on the same Ethernet network  as NCEs  and . As described further below, each workstation ,  and  preferably includes a web browser that allows BAS data to be accessed and displayed when a user with appropriate access rights makes such a request.","Referring to , an exemplary Ethernet-based device architecture  for NCEs  and\/or  is shown. BAS device architecture  includes many of the common components of a standard IT device architecture such as may be used in workstations ,  and . For example, device architecture  may include a standard hardware platform  and a standard operating system  (e.g., Microsoft\u00ae Windows\u00ae Embedded, XP, CE, 9X, ME, NT and 2000). Many of the features of device architecture  shown in  will now be discussed in greater detail.","As shown in , BAS device architecture  preferably includes a DNS element . As is generally understood in the art, a Domain Name Service (DNS) is a hierarchical system for identifying hosts on the Internet or on a private intranet. It provides a mechanism for identifying hosts with human-friendly names (as opposed to numeric IP addresses), a distributed mechanism for storing the name-IP pairs, and a method for locating hosts by resolving their names to IP addresses. It is a standard embraced by the Internet community for mapping names to IP addresses.","According to an embodiment of the present invention, DNS  may be utilized for naming conventions for host device names as well as the hierarchical domain structure defined by the DNS standards. DNS  may be integrated with the DNS naming conventions established by different users, where each user may have their own internal naming hierarchy. However, other standard IT host name-to-IP resolution mechanisms (such as WINS or a local hosts file) may be used in addition to DNS  or in place of DNS .","In addition to the use of DNS  or a similar IT-based service, BAS device architecture  may include a Dynamic Host Configuration Protocol (DHCP) element  that is capable of automatically obtaining an IP address and other related network parameters from a suitable DHCP server. For example, the BAS device having DHCP element  can make a request to the DHCP server for an IP address whenever needed (e.g., when the device is first installed or after a system reset). This avoids the need for static IP address assignment for BAS devices as was required in the past.","Many functions of Ethernet-based BAS devices, such as time-based data collection, scheduling of controller functions, and time-stamped alarms and events, require accurate knowledge of the time of day. For these functions to work correctly on a network and in order to recover the correct sequence of recorded events in a distributed environment, the time must be accurately synchronized across all controllers. According to an exemplary embodiment of the present invention, BAS architecture  includes a Simple Network Time Protocol (SNTP) element  to synchronize time to a known accurate source.","There are two primary roles that a device may perform for synchronizing time on the network:","Time Server\u2014provides the current time to SNTP clients; and","SNTP Client\u2014sends time requests to the SNTP server.","Under SNTP , the SNTP client is responsible for obtaining the correct time from the SNTP server using SNTP element . The SNTP server acts as the authoritative source of time on the network and may be located internally or externally, including on the Internet (e.g., a NIST atomic clock site). In order to minimize traffic outside the intranet, BAS  preferably includes a local server that acts as the authoritative time source to the other BAS devices on network  and that synchronizes with an external time source on a regular basis. As persons skilled in the art will understand, SNTP is an adaptation of Network Time Protocol (NTP) and is used to synchronize computer clocks on the Internet. Once the SNTP client obtains the correct synchronized time from the time server, it sets its own local clock to that time value. For the purposes of architecture , the term \u201ctime\u201d may include (but is not limited to):","current absolute time of day to one second accuracy; and","current date.","Each BAS device adjusts time for its local time zone via a UTC (coordinated universal time) offset. Moreover, each BAS device adjusts time for local daylight savings time as appropriate.","Network and device management encompasses a set of functionality that monitors statistics and manages operational parameters of BAS devices on a network. It includes the automatic discovery of BAS devices on the network, identification of device models and revisions, and tracking of the online\/offline status of the device. Management also includes tracking of other data such as communication statistics, including the number of data packets sent to or from the BAS device, the number of error transmissions, and so on. It also includes functions to get and set configuration parameters within the BAS devices that control how the device operates. Examples include the IP address of the BAS device, device manufacturer information, version of the operating system, and protocol configuration parameters.","Still referring to , BAS device architecture preferably includes a Network Management Protocol (SNMP) element . SNMP element  is an application layer protocol used for exchanging BAS device and network management information with other BAS devices on the TCP\/IP network . Although SNMP is used as a standard by most IT organizations to collect statistical information on typical network devices such as switches, routers, servers, workstations, and printers, it has not heretofore been used in connection with networked BAS devices such as described above. Similarly, SNMP  can also be used to send \u201ctraps\u201d to networked BAS devices, indicating that an event or problem has occurred within the system .","SNMP  may include an SNMP agent. The SNMP agent is a component within the BAS device that is responsible for communicating to a network manager device via SNMP . The network manager device is responsible for collecting network and device management and statistics information from BAS devices on part of, or the entire, network. Network managers typically utilize high-end software packages to oversee the network. The SNMP network manager communicates to the SNMP agent via \u201cget\u201d services within SNMP , allowing the network manager to obtain operational statistics. The agent is responsible for managing the data locally within the device\u2014either storing the data itself or obtaining it from other components within the device as needed. The network manager may also use SNMP  to send \u201cset\u201d requests to the agent, allowing it to configure parameters within the device.","In addition to getting and setting information in the BAS device, SNMP  can be used to send unsolicited \u201ctraps\u201d from the BAS device to the network management station. A trap is an indication that some event has occurred in the system. As an example, a BAS device may have exceeded some reporting threshold, such as the number of bad packets it has received. For example, the trap facility may be used to communicate BAS system alarms to the network management station as an optional alarm\/event destination. A configured SNMP destination component is sent certain alarms\/events from other alarm components in the device. The SNMP destination formats the alarm as an SNMP trap and makes use of the SNMP agent services to send the alarm\/event trap to the network manager.","BAS device architecture  also may include a Simple Mail Transfer Protocol (SMTP) element . SMTP element  may be utilized to send email messages over network  or the Internet . For example, the email alarm destination component in the associated BAS device can receive an alarm, reformat it for email, and utilize the services of SMTP element  to send the email to the appropriate destination server.","According to an embodiment of the present invention, web-services  (see ) may be used to provide Internet-friendly communications. For example, an HTTP server  (see ) loaded on workstation  (see ) may be utilized to provide a mechanism for remote service invocation on a second computer, typically located behind a firewall. Remote service invocation allows an application on one device to make use of the functionality provided by a component on another device.","There are a number of middleware alternatives that exist today that provide a remote service invocation mechanism. The most prominent of these are the remote procedure call in the Microsoft\u00ae DCOM architecture and CORBA\u00ae, as well as Remote Method Invocation in Java\u00ae. As persons skilled in the IT industry will understand, CORBA\u00ae uses the IIOP (Internet Inter-ORB Protocol) wire protocol for remote method invocation, Java\u00ae uses JRMP (Java\u00ae Remote Method Invocation Protocol), and DCOM uses its own proprietary wire protocol for the same purpose. Unfortunately, none of these protocols are directly interoperable with each other. In addition, these protocols are typically not allowed through firewalls in most IT organizations. As a result, it may not be desirable to utilize these protocols to web-enable Ethernet-based BAS devices, such as the sensors and actuators illustrated in .","In order to circumvent the interoperability issues and allow remote procedure invocations to pass through firewalls, BAS device architecture  preferably includes a SOAP (Simple Object Access Protocol) element  (see ). As is well known in the IT industry, SOAP defines a standard syntax for expressing the information required to make remote service invocations, including the location of the service provider, service or method to be invoked, parameters to be passed in, and return parameter information. As explained below, SOAP is based on XML (Extensible Markup Language), which is a text-based language. SOAP defines the required format of an XML document containing the remote invocation information. SOAP has the following advantages:\n\n","SOAP element  allows a wide variety of web services to be implemented on the various BAS devices of BAS . Each set of web services exposes a number of methods or procedures that allow remote applications to monitor data and perform control over an intranet or the Internet. It should be noted that other types of web services besides, or in addition to, SOAP could be used in BAS  depending on the particular circumstances of a situation. Some examples of web services that may be used in the operation of BAS  will now be discussed.","First, an offline controller configuration may be utilized according to an embodiment of the present invention. An offline controller configuration is the process of defining a controller configuration database within an application on a configuration server and later submitting that configuration to the controller for downloading and processing. For this purpose, BAS device architecture  preferably includes a control engine  (described in detail below) that supports the ability to download the configuration database from a configuration server running a copy of the offline configuration application. Download can be done on the intranet or over the Internet (e.g., via a web service). Within the download web service in control engine , the XML files are parsed and turned into control engine \u201cadd\u201d or \u201cmodify\u201d application programming interface (API) requests or appropriate service requests to the other service components or applications.","Control engine  is the primary monitoring and control component of the associated Ethernet-based BAS device. It houses most of the BAS functionality that is traditionally expected from a \u201csupervisory level\u201d BAS controller. This can include applications that coordinate activities across a network of field devices (e.g., Interlocking or DLLR) or perform control of equipment. As such, it includes control functions that have traditionally been housed in field bus devices. It is also the mechanism whereby the controller is able to communicate with field bus devices, BACnet devices and other legacy and third party devices.","The same set of web services  (see ) can also be used to archive (serialize) and restore the controller database to a disk on a configuration server. The archival process consists of serializing the control engine and service component data to an XML file  that is then uploaded to the configuration application in the configuration server. The database restore process is similar, however, it is conducted in the opposite direction.","Another web service that may be utilized in BAS device architecture  is a SOAP client proxy component . While web services  provide the code for execution of services within the controller, a SOAP proxy component  provides local clients with the capability to build and make those requests to another device. That is, SOAP proxy component  contains the functionality that packages the remote service invocation into a valid SOAP\/XML document. It further packages that XML document into an HTTP  request that is then sent to HTTP server  on the remote device for invocation.","In addition to the foregoing, BAS device architecture  may also incorporate standard IT-based security mechanisms to protect the software loaded on the associated BAS device. To accomplish this, the BAS device can incorporate the current IT standards and technologies commonly used in web server architectures. This enables communications through standard IT infrastructures without placing additional requirements on the infrastructure that may jeopardize network security. It also provides the mechanisms for standard web interoperability of BAS devices. Further, secure access to BAS data may be accomplished by providing security via a high performance password access mechanism, thereby enabling consistent and controlled access to BAS data, files and applications.","It is important to note that the above-described preferred embodiments are illustrative only. Although the invention has been described in conjunction with specific embodiments thereof, those skilled in the art will appreciate that numerous modifications are possible without materially departing from the novel teachings and advantages of the subject matter described herein. For example, although the invention is illustrated using particular standards-based IT technologies over an IT network to manage BAS devices, any number of other standards-based IT technologies may be used. Accordingly, these and all other such modifications are intended to be included within the scope of the present invention as defined in the appended claims. The order or sequence of any process or method steps may be varied or re-sequenced according to alternative embodiments. In the claims, any means-plus-function clause is intended to cover the structures described herein as performing the recited function and not only structural equivalents but also equivalent structures. Other substitutions, modifications, changes and omissions may be made in the design, operating conditions and arrangement of the preferred and other exemplary embodiments without departing from the spirit of the present invention."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"DESCRIPTION OF THE FIGURES","p":[{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 3"}]},"DETDESC":[{},{}]}
