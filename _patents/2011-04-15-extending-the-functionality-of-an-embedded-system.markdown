---
title: Extending the functionality of an embedded system
abstract: The present description refers in particular to a computer-implemented method, an embedded system, and a memory. The method relates to extending the functionality of an embedded system, wherein the embedded system includes a firmware in a fixed non-volatile memory. The method comprises attaching an attachable non-volatile memory to the embedded system, wherein an extension is stored in the attachable non-volatile memory; recognizing the extension by the firmware; and executing a service on the embedded system by means of the extension.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08627307&OS=08627307&RS=08627307
owner: Accenture Global Services Limited
number: 08627307
owner_city: Dublin
owner_country: IE
publication_date: 20110415
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["PRIORITY ","SUMMARY","DETAILED DESCRIPTION"],"p":["This application claims priority to European patent application serial number 10 425 122.8, filed on Apr. 16, 2010, and entitled \u201cExtending the Functionality of an Embedded System\u201d, which is incorporated by reference in its entirety.","The present application relates to a computer-implemented method for extending the functionality of an embedded system, an embedded system with extended functionality, and a memory.","According to an aspect, a computer-implemented method for extending the functionality of an embedded system is provided. The embedded system may include a firmware in a fixed non-volatile memory. The method may comprise attaching an attachable non-volatile memory to the embedded system. An extension may be stored in the attachable non-volatile memory. The method may also comprise recognizing the extension by the firmware, and executing a service on the embedded system by means of the extension.","In some cases, the attachable non-volatile memory has greater storage capacity than the fixed non-volatile memory.","Furthermore, the fixed non-volatile memory may be built into a chip and the chip may be wired to the embedded system.","Also, the firmware may be stored in the fixed non-volatile memory as a binary image.","Moreover, the attachable non-volatile memory may be a USB storage.","In some cases, the method further comprises loading the extension using a security mechanism; and isolating, by means of the security mechanism, the extension from the firmware. The steps of loading and isolating may be performed before executing the service by means of the extension.","The method may also comprise copying the firmware to a volatile memory of the embedded system by copying the entire contents of the fixed non-volatile memory into the volatile memory of the embedded system.","Also, the volatile memory may be faster than the fixed non-volatile memory, and\/or the volatile memory may be faster than the attachable non-volatile memory.","Moreover, the extension may comprise one or more of the following:","libraries and\/or utilities usable by the firmware;","at least one dynamically loadable module that can be linked to the firmware; and","a framework enabling execution of the service independent of an architecture of the embedded system.","The method may also comprise attaching a port expander to an interface of the embedded system. Attaching the attachable non-volatile memory to the embedded system may comprise attaching the attachable non-volatile memory to a first port of the port expander, and expanding the embedded system by attaching a device to a second port of the port expander.","In some cases, the embedded system is a network access gateway. Also, the firmware may include an operating system and at least one service.","According to another aspect, an embedded system is provided. The system may comprise a volatile memory, and a fixed non-volatile memory including a firmware. The system may also comprise an interface operable to allow an attachable non-volatile memory to be attached to the embedded system. The attachable non-volatile memory may be operable to store an extension. Also, the firmware may be operable to recognize the extension. Moreover, the embedded system may be adaptable to execute a service by means of the extension. The embedded system may be provided as a device, e.g. an embedded device, or as a computer program product.","According to yet another aspect, an attachable non-volatile memory, attachable to an interface of an embedded system is provided. The memory may comprise an extension including a service, wherein the extension is stored in the attachable non-volatile memory. The extension may be operable to extend a firmware of the embedded system after being recognized by the embedded system. The service may be operable to be executed by the embedded system after the firmware of the embedded system has been extended.","In some embodiments, the attachable non-volatile memory may be attachable to the interface of the embedded system, where the embedded system comprises a volatile memory, and a fixed non-volatile memory including a firmware. The system may also comprise an interface operable to allow the attachable non-volatile memory to be attached to the embedded system. Also, the firmware may be operable to recognize the extension. Moreover, the embedded system may be adaptable to execute a service by means of the extension. The attachable non-volatile memory may also be provided as a device or as a computer program product.","In the following text, a detailed description of examples will be given with reference to the drawings. It should be understood that various modifications to the examples may be made. In particular, elements of one example may be combined and used in other examples to form new examples.","The subject matter described in this specification can be implemented as a method or on a device, possibly in the form of one or more computer program products. The subject matter described in the specification can be implemented in a data signal or on a machine readable medium, where the medium is embodied in one or more information carriers, such as a semiconductor memory, or a hard disk. Such computer program products may cause a data processing apparatus to perform one or more operations described in the specification.","In addition, subject matter described in the specification can also be implemented as a system including a processor, and a memory coupled to the processor. The memory may encode one or more programs to cause the processor to perform one or more of the methods described in the specification. Further subject matter described in the specification can be implemented using various machines.","Details of one or more implementations are set forth in the exemplary drawings and description below. Other features will be apparent from the description, the drawings, and from the claims.",{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 1","b":["100","111","100","100","100","100","100","100","100","100","100","100","100","100","100"]},"The embedded system  may include a chipset  with a central processing unit (CPU). In a specific example, the chipset  may be a Texas Instruments AR7 combining a MIPS 32 bit CPU, a Digital Signal Processing (DSP)-30 based digital transceiver, and an ADSL analog front end. Other possible chipsets include the Broadcom 6358. The chipset  may be a microprocessor or a microcontroller. Further CPUs such as the Advanced RISC Architecture Machine (ARM) or PowerPC are also possible (RISC refers to Reduced Instruction Set Computer).","Some implementations of the embedded system  include a non-volatile memory, such as a flash memory . Alternatively, the embedded system  may include another form of non-volatile memory. The non-volatile memory of the embedded system  may be electronically addressable. In some cases, the non-volatile memory of the embedded system  may be another form of solid-state memory, such as a Silicon-Oxide-Nitride-Oxide-Silicon (SONOS) memory, or a non-volatile Random Access Memory. Other types of non-volatile memory are also possible.","The flash memory  may be fixed to the embedded system . In particular, the flash memory  may be built into a chip and the chip may be wired to the embedded system . The contents of the flash memory  may be referred to as a firmware  (see ).","In some cases, the firmware  stored by the flash memory  may include an operating system  (see ) for the embedded system . The firmware  stored by the flash memory  may also include services that can be run on the embedded system , and the graphical user interface for managing the embedded system . Specifically, the operating system  may be Linux, e.g. Linux kernel 2.6 including uClibc libraries. More specifically, the operating system  could be implemented using Debian Etch for MIPS with Linux kernel 2.6.1. The operating system  may have been stripped of unnecessary components and may include only what is necessary to manage the embedded system . The applications may be suitable for performing networking tasks such as routing, firewall maintenance, domain name service (DNS), and dynamic host configuration protocol (DHCP).","In some embodiments, the operating system  allows a supporting service (e.g. drivers) for a further device to be added. For example, the operating system  may support linking further functionality to the operating system kernel on demand. In other words, it may be possible to link a dynamically loadable module to the operating system . Accordingly, linking the dynamically loadable module to the firmware  may be understood as linking the dynamically loadable module to the kernel of the operating system of the embedded system . Different kernel modules may be used to support different embedded system architectures and operating system kernels.","In addition to applications, services that may be executed on the embedded system  can include kernel modules, device drivers or other software that extends the functionality of the embedded system .","The embedded system  may include minimal hardware, e.g. hardware required to execute basic networking tasks and no other hardware, in order to lower costs. Moreover, the contents of the flash memory  (e.g. operating system and applications) may be stored on the embedded system  in a monolithic approach, i.e. as a single closed block.","For example, the contents of the flash memory  may be stored as a single closed block, e.g. as a binary image or as a compressed binary image. In other words, the flash memory  may contain a binary firmware image or a compressed binary firmware image. This may reduce the amount of flash memory  required on the embedded system , and thus reduce the cost of producing the embedded system . In addition, the use of the binary image on the embedded system  may be advantageous for a manufacturer or maintainer of the embedded system , e.g. the manufacturer of the embedded system  may be able to maintain control of the embedded system , such that an extension of the embedded system  can only be realized by the manufacturer and a purchaser of the embedded system (e.g. a telecommunications service provider) is forced to ask the manufacturer for support for any new\/added features. Moreover, use of the binary image may make it simpler for a user to update the embedded system .","The binary image may be understood to contain the complete contents and structure representing a storage medium, e.g. the flash memory . A binary image may be stored in a single file.","However, storing the contents of the flash memory  as a binary image may have the effect that the only way to upgrade applications stored on the embedded system  is to perform a full firmware upgrade, as carried out in prior art methods. In other words, there has been no way to independently upgrade a single application. Instead, the full firmware upgrade has been required even for small changes to one application on the embedded system .","It may be difficult or undesirable to perform the full firmware upgrade for an arbitrary update of software on the embedded system . The full firmware upgrade may result in the use of more bandwidth, possible errors may have more sever consequences, and the full firmware upgrade may disrupt operations of the embedded system . For example, downloading the full firmware in order to make a small change to a single application may require more bandwidth than downloading the part of the application that is changed or the application itself. Furthermore, it is possible that the full firmware upgrade can fail, causing the embedded system  to become unusable. Also, the full firmware upgrade often causes an interruption of operation of the embedded system , since reboot of the embedded system  is normally required. To overcome this problem, the present invention adapts the embedded system  to execute a service without upgrading the entire firmware or replacing the embedded system  with a more capable device.","The embedded system  may further include a volatile memory, such as random access memory (RAM) .","In some configurations, the RAM  may have a greater storage capacity than the flash memory . A reason for this design may be that program execution on the embedded system  can be understood as a process where data changes frequently and often does not need to be stored. For example when the embedded system  processes Internet Protocol (IP) packets, they may be temporarily stored in the RAM  in order to be analyzed and elaborated, but it is possible that the IP packets do not need to be stored when the embedded system  is powered down. In other words, it is possible that the IP packets do not need to be stored in the flash memory .","It is also possible that the RAM  has a lower storage capacity than the flash memory . In particular, the capacity of the flash memory  may be proportional to the number and the size of programs stored on the embedded system . Moreover, the capacity of the RAM  may be proportional to the number and the size of programs to be executed concurrently on the embedded system . For example, if a number of different applications are stored in the flash memory  and it is not necessary for the embedded system  to be able to run many programs concurrently, the flash memory  may have a greater storage capacity than the RAM .","Also, it may be that computer programs can be executed faster using the RAM  of the embedded system  in comparison to the flash memory  of the embedded system . Moreover, the embedded system  may be designed so that a program must be copied to the RAM  before the program can be executed.","In a specific example, the flash memory  has a storage capacity of 16 MB, and the RAM  has a storage capacity of 32 MB.","In some cases, the embedded system  does not include mechanically addressed non-volatile memory, such as a hard disk.","Furthermore, the embedded system  may include a means of access connectable to an external network, such as a telephone port . The means of access could also be a fiber port or an Ethernet port depending on a type of the external network. The external network may be the Internet or another network.","Also, the embedded system  may include an interface, such as a universal serial bus (USB) port . The interface may be a peripheral interface. The interface may also be another type of serial interface, such as FireWire, or a type of parallel interface operable to allow an attachable non-volatile memory to be connected to the embedded system . In cases where the interface is the USB port , the attachable non-volatile memory may be implemented as USB storage . In a specific example, the USB storage  may be a USB flash drive (as depicted in ) or an external hard drive connectable via a USB cable (not depicted). Accordingly, attaching the attachable non-volatile memory to the embedded system  may be implemented by attaching the USB storage  to the USB port . In this context, attaching may be understood as connecting or plugging in, i.e. plugging the USB storage  into the USB port .","In some embodiments, the USB storage  has a storage capacity of at least 128 Megabytes (MB). Thus, the storage capacity of the attachable non-volatile memory (e.g. the USB storage ) may be greater than the storage capacity of the fixed non-volatile memory (e.g. the flash memory ). Furthermore, the RAM  may be faster than the flash memory  and\/or the USB storage .","The embedded system  may also include a means of access connectable to a local network, such as an Ethernet port . The embedded system  may also support wireless access, e.g. by means of wireless fidelity (WiFi). The local network may be a home network or an internal network or another network.","In addition, the embedded system  may include a reset button  that can be used to return the embedded system  to a standard or default configuration. The embedded system  may further include a power connector  that can be used to connect the embedded system  to a power source.",{"@attributes":{"id":"p-0053","num":"0052"},"figref":"FIG. 2","b":["200","100","104","104","302","302","303","100"]},"The method  may comprise, at step , attaching an attachable non-volatile memory, e.g. the USB storage , to the embedded system . An extension may be stored in the USB storage .","The extension may include a full operating system environment corresponding to the operating system  of the embedded system . In particular, the operating system  of the embedded system  may include software that is not commonly found on a desktop PC needed to run certain applications. Accordingly, the extension may include libraries usable by the firmware , e.g. usable by the operating system . The extension may also include operating system utilities and modules.","For example, if the firmware  includes a version of the Linux operating system, the libraries of the extension may include user space libraries, such as GNU C library (glibc)  (see ), and libraries required to run a Java virtual machine (Java is a trademark of Oracle Corporation). In this context, a library may include one or more subroutines, classes or data usable by a program. The library may be independently executable.","The modules of the extension may include drivers for controlling and managing devices operating according to the X10 standard for electronic devices. The modules may also include a Session Initiation Protocol (SIP) back to back user agent and a Real-Time Transfer Protocol (RTP) proxy to manage Voice over IP services. In addition, the utilities may include a Universal Plug-and-Play (UPnP) audiovisual media server, which can be used to share media content. The modules may also include software to enable control of lights and appliances using a mobile communication device, e.g. an iPhone. The modules may be referred to as kernel modules and may be dynamically loadable.","Exemplary applications of the extension that may be run on the embedded system  include an image searching application. Accordingly, a user may upload a plurality of images to the embedded system . For example, the user may come back from a holiday with a number of images stored in a digital camera. The user may connect a digital camera to the embedded system  and all the images may be automatically uploaded from the digital camera to the embedded system . The images may be stored on USB storage . The user may then interact with the image searching application in order to search for images.","Moreover, the extension may include a framework that enables execution of an application, such as the image searching application, independent of an architecture of the embedded system . In some implementations, the framework may be based on OSGi and the Java programming language, and may provide an application execution environment that is tailored to the architecture of the embedded system . More specifically, the framework may be defined according to the OSGi Specifications, Release 4, version 4.2, available from http:\/\/www.osgi.org. Accordingly, the framework may enable dynamic management of applications and dependencies. The framework may also provide a set of Application Programming Interfaces (APIs) that support devices with different capabilities and resources and enable applications to interact with those devices without needing the application developer to be aware of the details of the architecture of each device. Furthermore, the framework may provide a dynamic loader to install new applications. The framework may also be referred to as a middleware.","The flash memory  may be fixed by being wired to a circuit board of the embedded system . The operating system  may include support for the USB storage  and support for dynamically loadable modules. The operating system  may also support a port expander that can be attached to the USB port . The port expander may be supported if the USB port  is the only USB port on the embedded system , and it is desirable to attach additional devices to the embedded system . In case the RAM  does not provide sufficient storage capacity to execute a particular application, the operating system  may support virtual memory.","In the specific example where the firmware  includes the Linux operating system, the firmware  may include support for configuring the Linux kernel, as well as Linux kernel headers and cross compilation tools.","In some cases, the method also comprises copying the firmware  to the RAM  by copying the entire contents of the flash memory  into the RAM . The operation of copying the entire contents of the flash memory  into the RAM  may be referred to as a bulk read. Copying the entire contents of the flash memory  into the RAM  by means of the bulk read may enable simpler and more efficient operation of the embedded system .","The method  may also comprise, at step , recognizing the extension by the firmware , e.g. by means of a digital certificate. In some implementations, the digital certificate may be stored on the USB storage  and may be verified by the operating system . Other means may also be used to recognize the extension including code signing, a hardware lock (the USB storage  must include particular hardware features to be recognized), or encryption.","Recognizing the extension by the firmware  may have the technical effect of adapting the embedded system  to execute the service, e.g. the image search application described above. Execution of the service without the extension might not have been possible without upgrading the entire firmware  or replacing the embedded system  with a more capable device.","The user interface of the embedded system  may allow the extension to be configured. In this case, the framework may be loaded automatically. Alternatively, the extension may be recognized and configured automatically; accordingly, the extension may run in the background and load applications or recognize new devices automatically.","Once the extension is recognized and configured, the framework may be configured to load services, including the image search application, manually or automatically. The extension may be configured to provide virtual memory for the embedded system  via the USB storage , or to extend existing virtual memory of the embedded system  via the USB storage .","In some embodiments, the extension may be loaded using a security mechanism. Loading of the extension may occur after recognizing the extension and before configuring the extension. The security mechanism may be a sandbox. In other words, the security mechanism may be software that is used to separate running programs. Put yet another way, the extension is loaded in a virtual environment, separate from the firmware  of the embedded system . Accordingly, the security mechanism can be used to isolate the extension from the firmware . More specifically, when both the extension and the firmware  are loaded into the RAM  and are both running, the security mechanism can be used to isolate the firmware  from the extension.","In a particular example, the security mechanism may be a chroot environment  (see ). The chroot environment  may be implemented by changing the apparent root directory for the extension and any process executed by the extension. In other words, the extension, and child processes of the extension, are unable to access files of the firmware . More specifically, loading the extension using a security mechanism may be implemented by loading files associated with the extension into the sandbox (e.g. the chroot environment ), thereby ensuring that applications, libraries and utilities executed within the framework cannot access the firmware . The security mechanism may also be implemented via other means of program isolation.","Advantageously, the security mechanism may be used to guarantee that the embedded system  provides at least the same level of functionality provided before the extension was loaded. The image search application (or other application) executed using the extension may be executed in a protected environment that allows low level system protection.","The method  may also comprise at step  executing the service after the extension is loaded. Executing a service on the embedded system  by means of the extension may be understood to include executing libraries, modules, or applications usable by the firmware . The service may also include additional operating system utilities, such as shell commands.","Executing the service by the extension may enable an additional device to be attached to the embedded system . For example, the additional device may be attached to another USB port (not depicted) on the embedded system . In another example, attaching the additional device may comprise attaching a port expander, such as a USB hub, to the USB port . In particular, the port expander may be used if the USB port  is the only USB port on the embedded system . According to the example, when the USB storage  is attached in step , the USB storage  is attached to a first port of the port expander and the port expander is attached to the USB port . The additional device may then be attached to a second port of the port expander.","Other applications may also be added to the embedded system  by means of the extension including an Internet Protocol-Private Branch eXchange (IP-PBX) system, a Digital Living Network Alliance (DLNA) media server, a home automation application for controlling household appliances via a home automation gateway, a video surveillance system, and a smart energy monitoring system.","Additional applications, other types of non-volatile memory, or other interfaces are also possible, as described with respect to .","In addition, the extension may enable the operating system  to support other functionality. For example, the extension may include modules that can be dynamically loaded by the operating system kernel in order to support additional file systems, e.g. the Linux ext2 file system. The extension may also include modules that enable the operating system  to support additional attached devices, such as the home automation gateway, a ZigBee interface, or a digital camera control module  (see ). Smart energy meters could also be connected to the embedded system  using the extension.","The method  may enable the functionality of the embedded system  to be extended without replacing the embedded system. In addition, the method  may make it possible to install a new service update an individual application without a full firmware upgrade. Moreover, the framework included in the extension may enable the development of highly portable services for a variety of device architectures.",{"@attributes":{"id":"p-0076","num":"0075"},"figref":"FIG. 3","b":["104","102","106","100"]},"The example of  represents the state of the embedded system  before attaching the USB storage .","In the exemplary depiction of , the firmware stored in the flash memory  includes a print server and a file server. The firmware stored in the flash memory  also includes customizations to the embedded system , used for example by a telecommunications service provider. The customizations may include a session initiation protocol (SIP) user agent, a high speed packet access (HSPA) backup utility to manage mobile telephony protocols, a technical report 069 (TR-069) utility for remote management of the embedded system , and a graphical user interface (GUI). According to the example, the firmware stored in the flash memory  also includes user space libraries (e.g. uClibc), the operating system (e.g. Linux), and device drivers. In this particular case, the flash memory  has a 16 MB storage capacity.","Continuing with the example in , the chipset  is a Broadcom chipset 6358, with a System on a Chip (SoC) 32-bit MIPS processor, supporting asynchronous digital subscriber line (ADSL) 2\/2+, as well as Ethernet and wireless fidelity (WiFi).","The RAM  of  includes a kernel of the operating system and one or more applications (Apps). The applications in the RAM  correspond to the customizations in the flash memory . In this particular case, the RAM has a 64 MB storage capacity.",{"@attributes":{"id":"p-0081","num":"0080"},"figref":["FIG. 4","FIG. 4","FIG. 3"],"b":["104","111","102","106","111","111","100","111"]},"According to the example depicted in , the extension stored on the USB storage  includes a framework (in this case an Equinox OSGi framework), a Java Virtual Machine (JVM), glibc user space libraries, and at least one Linux kernel module.","In addition to the kernel of the operating system and the applications depicted in , the RAM  of  includes the JVM and the Equinox OSGi framework from the USB storage . The security mechanism (not depicted) may be used to isolate the JVM and the OSGi framework from the kernel of the operating system and the applications.",{"@attributes":{"id":"p-0084","num":"0083"},"figref":"FIG. 5","b":["104","111","102","106","111"]},"The RAM  of  includes bundle  to bundle n. Each bundle from  to n may be understood to represent a dynamically loadable collection of one or more classes, Java Archives (JAR)s, and configuration files, with explicitly declared external dependencies (if any). The bundles may be implemented according to the OSGi standard. In this particular example, n is 2 and the bundles  to n correspond to the media server application and the home automation application.","In some embodiments, the security mechanism (not depicted) may be used to isolate the JVM, the OSGi framework, and the media server application bundle from the kernel of the operating system and the applications.","Thus,  differs from  in that the USB storage  includes 2 applications and these applications have loaded into the RAM  as bundles."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE FIGURES","p":[{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 5"}]},"DETDESC":[{},{}]}
