---
title: Method of rebooting a multi-device cluster while maintaining cluster operation
abstract: The present invention is directed at rebooting a cluster while maintaining cluster operation. Cluster operation is automatically maintained during the reboot since at least one member of the cluster stays active during the process. An administrator triggers the reboot process and then does not have to perform any other steps during the reboot process. An algorithm executes which reboots members of the cluster at different times, while always maintaining operation of at least one member of the cluster.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07076645&OS=07076645&RS=07076645
owner: Nokia Inc.
number: 07076645
owner_city: Irving
owner_country: US
publication_date: 20030625
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENT"],"p":["Equipment that provides a high degree of reliability is a prime consideration of organizations that supply Internet and Intranet services. To help meet this need, technology has become available to combine several devices into a cluster that is configured to act as a single device. Using the cluster arrangement, it is intended that the failure of one device does not significantly affect the remaining components within the cluster.","The term for starting software on a device is \u2018booting\u2019 (short for \u2018bootstrapping\u2019); when this is performed on a device that is active, the term is \u2018rebooting\u2019. A reboot is normally performed for a variety of reasons, including: to activate new versions of the software; and to restore functionality of the device after a fatal error in the software that prevents the device's operation.","In a cluster environment, the reboot of devices requires special consideration, since maintenance of the cluster functionality is of utmost importance. Rebooting the cluster, however, may interfere with its operation. What is needed is a way to reboot members of a cluster such that the cluster operation is maintained.","The present invention is directed at rebooting a cluster while maintaining cluster operation.","According to one aspect of the invention, cluster operation is automatically maintained during the reboot. During the cluster reboot process at least one member of the cluster remains active during the rebooting of the other members.","According to another aspect of the invention, a user, such as an administrator triggers the cluster reboot process. The administrator does not have to manually reboot each member of the cluster. Instead, the cluster reboot process handles the reboots of the members.","According to another aspect, an algorithm is executed which reboots members of the cluster at different times. Rebooting all cluster members at the same time would cause the operation of the cluster to be lost until at least one member is restored to operation.","In the following detailed description of exemplary embodiments of the invention, reference is made to the accompanied drawings, which form a part hereof, and which is shown by way of illustration, specific exemplary embodiments of which the invention may be practiced. Each embodiment is described in sufficient detail to enable those skilled in the art to practice the invention, and it is to be understood that other embodiments may be utilized, and other changes may be made, without departing from the spirit or scope of the present invention. The following detailed description is, therefore, not to be taken in a limiting sense, and the scope of the present invention is defined only by the appended claims.","Throughout the specification and claims, the following terms take the meanings explicitly associated herein, unless the context clearly dictates otherwise.","The term \u201cIP\u201d means any type of Internet Protocol. The term \u201cnode\u201d means a device that implements IP. The term \u201crouter\u201d means a node that forwards IP packets not explicitly addressed to itself. The term \u201croutable address\u201d means an identifier for an interface such that a packet is sent to the interface identified by that address. The term \u201clink\u201d means a communication facility or medium over which nodes can communicate. The term \u201ccluster\u201d refers to a group of nodes configured to act as a single node.","The following abbreviations are used throughout the specification and claims: RMB Remote Management Broker; CS=Configuration Subsystem; CLI=Command Line Interface; CM=Cluster Management; GUI=Graphical User Interface; MAC=Message Authentication Code; and NM=Network Management.","Referring to the drawings, like numbers indicate like parts throughout the views. Additionally, a reference to the singular includes a reference to the plural unless otherwise stated or is inconsistent with the disclosure herein.",{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 1","b":["100","105","108","130","110","120","125","145","130","135"]},"The present invention is directed at rebooting a cluster while maintaining cluster operation. At least one member of the cluster stays active during the reboot process. An administrator triggers the reboot process and then does not have to perform any other steps during the reboot process. An algorithm is executed which reboots members of the cluster at different times while always maintaining operation of at least one member of the cluster.","As illustrated, inside network  is an IP packet based backbone network that includes routers, such as routers  to connect the support nodes in the network. Routers are intermediary devices on a communications network that expedite message delivery. On a single network linking many computers through a mesh of possible connections, a router receives transmitted messages and forwards them to their correct destinations over available routes. On an interconnected set of LANs, including those based on differing architectures and protocols, a router acts as a link between LANs, enabling messages to be sent from one to another. Communication links within LANs typically include twisted wire pair, fiber optics, or coaxial cable, while communication links between networks may utilize analog telephone lines, full or fractional dedicated digital lines including T, T, T, and T, Integrated Services Digital Networks (ISDNs), Digital Subscriber Lines (DSLs), wireless links, or other communications links.","Management computer  is coupled to management network  through communication mediums. Management computer  is coupled to inside network  through communication mediums. Management computers  and  may be used to manage a cluster, such as cluster , as well as to trigger a cluster reboot.","Furthermore, computers, and other related electronic devices may be connected to network , network , and network . The public Internet itself may be formed from a vast number of such interconnected networks, computers, and routers. IP network  may include many more components than those shown in . However, the components shown are sufficient to disclose an illustrative embodiment for practicing the present invention.","The media used to transmit information in the communication links as described above illustrates one type of computer-readable media, namely communication media. Generally, computer-readable media includes any media that can be accessed by a computing device. Communication media typically embodies computer-readable instructions, data structures, program modules, or other data in a modulated data signal such as a carrier wave or other transport mechanism and includes any information delivery media. The term \u201cmodulated data signal\u201d means a signal that has one or more of its characteristics set or changed in such a manner as to encode information in the signal. By way of example, communication media includes wired media such as twisted pair, coaxial cable, fiber optics, wave guides, and other wired media and wireless media such as acoustic, RF, infrared, and other wireless media.",{"@attributes":{"id":"p-0025","num":"0024"},"figref":["FIG. 2","FIG. 2"],"b":["200","200","200","202","204","216"]},"Depending on the exact configuration and type of computing device, system memory  may include volatile memory, non-volatile memory, data storage devices, or the like. These examples of system memory  are all considered computer storage media. Computer storage media includes, but is not limited to, RAM, ROM, EEPROM, flash memory or other memory technology, CD-ROM, digital versatile disks (DVD) or other optical storage, magnetic tape, magnetic disk storage or other magnetic storage devices, or any other medium which can be used to store the desired information and which can be accessed by node . Any such computer storage media may be part of node .","Node  may include input component  for receiving input. Input component  may include a keyboard, a touch screen, a mouse, or other input devices. Output component  may include a display, speakers, printer, and the like.","Node  may also includes network component  for communicating with other devices in an IP network. In particular, network component  enables node  to communicate with mobile nodes and corresponding nodes. Node  may be configured to use network component  to receive and send packets to and from the corresponding nodes and the mobile nodes. The communication may be wired or wireless.","Signals sent and received by network component  are one example of communication media. The term computer readable media as used herein includes both storage media and communication media.","Software components of node  are typically stored in system memory . System memory  typically includes an operating system , one or more applications , and data . As shown in the figure, system memory  may also include cluster rebooting program . Program  is a component for performing operations relating to rebooting a cluster as described herein. Program  includes computer-executable instructions for performing processes relating to cluster rebooting.",{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 3","b":["300","305","310","315","320","325","335","340","345","350"]},"The GUI and CLI may be configured to present a view of a node(s) within the cluster. RMB  distributes information between the nodes within the cluster.","According to one embodiment, GUI  is configured to execute on a workstation (not shown) and interact with Configuration Subsystem  of device . GUI  provides a graphical interface to perform operations relating to device . One of these operations is performing a reboot of a cluster. CLI  provides a command line interface that allows the user to perform operations on device  by an application executing on device . The GUI and CLI associated with device  may also be used to trigger a cluster reboot.","RMB  is configured to communicate with device  and other devices (device  and device ) within the cluster. RMB  may be included within device  or it may be separate from device . Generally, RMB  is used to communicate information between the members of the cluster.","According to one embodiment, the system acquires exclusive authority of the cluster during the reboot process. This helps to prevent more than one user or system from affecting the devices during the reboot.","According to one embodiment, GUI  is implemented as a set of Web pages in a browser and a Web Server. The server may operate on a device within the cluster or a device separate from the cluster. The server may operate on all or some of the cluster members.","CLI  is a management CLI that presents the cluster information relating to the device and the cluster textually to a user.","When the reboot process is initiated, RMB  interacts with the configuration subsystems of the devices being rebooted. According to one embodiment, when an error occurs during a reboot with one of the cluster members, the reboot process is stopped. According to one embodiment, RMB  may be configured to restore the configurations to the devices before the reboot process began. This helps to ensure that all the members of the cluster maintain the same attributes. When a problem occurs RMB  may indicate that there was a failure to the GUI and CCLI, or send the error to some other location. When the rebooting is complete, the administrator may perform other operations.","The reboot action is triggered by a control in an application using the Graphical User Interface (GUI) or a command in a Command Line Interface (CLI) shell.","The control or command causes a script to be run that performs the cluster rebooting process. The script initiates a reboot by contacting each cluster member, providing an attribute that causes each member to temporarily be removed from the cluster, and then providing an attribute that causes the reboot operation to begin. The script then detects the loss of contact with the device and attempts to re-establish contact. When the script has established contact, it internally indicates that that device is now rebooted and informs the administrator which device has been rebooted. According to one embodiment, the device from which the rebooting process is initiated is not rebooted until all of the other devices have been rebooted.","The reboot for all of the devices, except for the one on which the reboot is initiated, can either be performed sequentially (one device at a time) or in parallel. The parallel method reduces the overall time needed to restore the cluster to full operation.","If the reboot fails on any of the devices, as indicated by failure to re-establish contact with the device, the reboot process halts, thereby preserving the state of the devices not rebooted. The administrator is informed that the cluster reboot has been stopped prematurely along with the identity of the device or devices that have failed.",{"@attributes":{"id":"p-0043","num":"0042"},"figref":"FIG. 4","b":["400","420","410","440","435","420","425","430","425","430","435","440","410","420","435"]},"Remote Management System  acts as the backbone for the nodes within the cluster. RMB  provides base mechanisms including: discovering the members within the cluster; delivering queries and operations relating to NM attributes to the devices in the cluster; ensuring message integrity; an interface for management applications; and an interface to each device's local configuration subsystem. RMB  also includes a secure mechanism for transporting the information in the messages sent between the nodes within the cluster.","RMB  is also configured to automatically query the nodes it is coupled with in order to determine the cluster members. These queries are performed periodically to help ensure that all cluster members are available at any given time.","According to one embodiment, RMB  ensures consistency of the configuration by using database transactions. For example to begin a transaction whenever an attribute is to be changed and applying a \u2018commit\u2019 database operation if the change is successful on all devices and a \u2018rollback\u2019 operation when the change fails on any device. The RMB may implement these transactions either internally or by using the transaction capabilities of the Configuration Subsystem. According to one embodiment, the Configuration Subsystem's transactions are used since these may be complicated operations.","RMB Client  uses Cluster API  to discover the cluster's member devices.","RMB  uses messages to perform system and NM operations. The system operations include acquiring and releasing the configuration lock. When a message is to be sent, the RMB fills in header and delivers the message. When a message is received, the RMB checks the header and accepts the message only if values in the fields of the header are valid. The RMB discards any message whose header has invalid values in the fields.","RMB Client  composes the body of a RMB message and uses Cluster API  to deliver the message to the cluster members; receive the responses from the members; and extract the result of the operation from the message. Remote API  delivers the message to a particular cluster member and checks that a response message is received for every request message sent. Secure Transport  is the transport mechanism that actually sends and receives the messages.","The RMB Client can be implemented as a collection of shared-object libraries with well-defined Application Programming Interfaces (APIs). CGUI and CCLI can use these APIs to interact with the RMB to perform NM operations.","The RMB Server can be implemented as a daemon that is launched during system start-up.","RMB's Secure Transport can be implemented as a Secure Sockets Layer (SSL) socket. This provides and extra layer of security by providing the ability to encrypt the RMB messages.",{"@attributes":{"id":"p-0053","num":"0052"},"figref":"FIG. 5","b":["500","505","510","515","520","530","525","530","530"]},"The above specification, examples and data provide a complete description of the invention. Since many embodiments of the invention can be made without departing from the spirit and scope of the invention, the invention resides in the claims hereinafter appended."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 5"}]},"DETDESC":[{},{}]}
