---
title: Method and system for tracking network use
abstract: An interactive media delivery system enables interactive media programming to a multimedia device and also tracks a subscriber's use of the multimedia device. For example, the device tracks events, such as a change in programming, a change in channel selection, and/or the subscriber's interaction with a particular interactive services application. Each event may be stored as an event record in a database, and one or more of the event records may be merged with content data to form event timelines of programming or other activity to the multimedia device over a selected time period. Further, timelines may be analyzed to generate ratings and other information about programming and may also be correlated with demographics data for marketing analysis.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=06983478&OS=06983478&RS=06983478
owner: BellSouth Intellectual Property Corporation
number: 06983478
owner_city: Wilmington
owner_country: US
publication_date: 20000201
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"p":["This application is a continuation of U.S. application Ser. No. 08\/779,306, filed with the U.S. Patent Office on Jan. 6, 1997, now abandoned.","This invention is a method and system for tracking subscriber use of network applications, particularly network applications involving delivery of interactive media or video programming.","Broadcast and cable television have long dominated the visual media market. New communications technologies, however, have accelerated demand for new types of media such as video on demand, interactive video, interactive gaming, home shopping or interactive advertising. Unlike broadcast television, viewers of these services typically are paying \u201csubscribers,\u201d although payments from advertisers also pay a large share of the costs of providing these media services.","To gauge the effectiveness of their spending, advertisers have long sought information on viewers' viewing patterns. A number of devices and techniques exist for gathering such information. For instance, U.S. Pat. No. 4,258,386 to Cheung and U.S. Pat. No. 4,556,030 to Nickerson, et al., describe the general concept of deploying in viewers' homes devices for monitoring a viewer's television set (\u201cTV\u201d) in order to accumulate data illustrating viewing habits such as which channels were watched at particular times. Accumulated data is then forwarded via telephone lines to a central location for analysis. Cheung sends data from particular monitoring stations at a preselected, specific \u201cwindow\u201d of time; interruptions to transmission during that window result in the Cheung system forwarding the data at another time.","Other systems and methods provide somewhat more use data than just channel numbers viewed and time of viewing, Typically, however, the information is for a smaller subset of users. Thus, U.S. Pat. No. 4,816,904 to McKenna, et al., U.S. Pat. No. 4,912,552 to Allison, III, et al. and U.S. Pat. No. 5,374,951 to Welsh, all disclose monitoring \u201cpanelist\u201d TV use in order to collect data about panelist viewing patterns as well as certain marketing information. Generally, panelist monitoring is used to gauge the effectiveness of advertising on selected groups of \u201cpanelists,\u201d each of which is one household in a group comprising a \u201cpanel,\u201d typically located in a particular geographical area.","Monitoring not only determines which commercial and TV programs the panelist views but also may be used to gather information about which products panelists purchase. For instance, the U.S. patent to McKenna discloses a remote data collection unit located at a panelist home that monitors viewer identification data and TV functions (e.g., channel viewed, VCR viewing time or game time). Additionally, a wand is provided for inputting bar codes of purchased items. Monitored data is sent via the telephone network to a central location, which can also download questionnaires to the panelist and receive responses. Allison and Welsh disclose similar monitoring systems and methods. Instead of simply monitoring the channel number that a panelist was viewing at a particular time, Welsh discloses monitoring identification information carried in the television signal vertical blanking interval that identifies preselected commercials. After detecting and storing the identification information that identifies particular commercials viewed by panelists, the data is transmitted by telephone to a central location for analysis.","Monitoring systems also have been used with some early interactive media systems. U.S. Pat. No. 5,404,393 to Remillard discloses an interactive TV system. Among other elements of the system, a controller monitors TV channels and time\/date stamps the selected channel so that, indirectly, viewers' programming choices may be monitored. Data is assembled into a \u201cuser profile,\u201d which is uploaded to an appropriate facility via the telephone network.","Nevertheless, while panelist monitoring systems like those of Allison, McKenna and Welsh or interactive television monitoring systems like Remillard's provide somewhat more monitoring data than just TV tuning data, they do so only for limited groups. For example, when more data is gathered (like purchase information), it is done only for the panelist groups, rather than for subscribers to the entire system. Also, systems like McKenna's that uses a wand for scanning bar codes are intrusive systems that require user action to collect data rather than collecting data passively and automatically. Other systems contemplate capturing only some of the data generated by subscriber's viewing activities or only some of the ratings information. For instance, previous systems typically capture ratings information that identify television shows viewed rather than whether the subscriber viewed commercials displayed during those shows.","Perhaps more importantly, none of the systems described attempt to match \u201craw\u201d information on channels viewed with programming information. Nor do those systems match viewing pattern information with demographics information about the particular users in order to provide more \u201ctargeted\u201d advertising.","The present invention uses a collector, associated with a subscriber's set top box (\u201cSTB\u201d), to obtain data about any \u201cevents\u201d\u2014subscriber actions or changes in programming\u2014that are of interest. Data about virtually any events, from channels watched to volume changes to interactive applications invoked, may be captured with the collector. Event records comprising such data, as well as the identity of the application involved and the event time, are buffered. Periodically or on command, event records are uploaded from the buffer to a merge processor such as through an interactive network that allows for duplex communication with the STB. The merge processor, which may be a head end server or a workstation computer forming part of or coupled to the media delivery network, receives (1) the event data and (2) content data that identifies programming content broadcast or delivered throughout the region in which the system is deployed. Timelines showing particular events over time may then be generated for each subscriber. Rather than just determining the channel viewed and time of day, the event timelines describe the programming or interactive applications selected by or shown to a subscriber over a selected period of time (e.g., 24 hours).","The merge processor may further filter this collected and merged data to generate reports ranging from descriptions of a single user's viewing patterns to very high level viewing patterns showing the number of users who watched or participated in a particular program for a selected time period. Further, that information can be combined with billing and demographics information to provide detailed information on a particular subscriber's or group of subscribers' viewing and related buying patterns.","The present invention thus involves a method for obtaining detailed information on every application invoked by a subscriber and information about the type of programming shown. The first step is to identify data that describe the events of interest that occur. Those events include: the channel viewed, a switch to another channel, a passive change in programming because of a commercial break or change to a new program, use of a VCR or other ancillary device, or invocation of an interactive application and subscriber commands given to the system during the application. Event data also includes start and stop times, identification of the subscriber's STB or specific data needed to be recorded for any particular interactive or other application.","Event records are formed from this collected data and buffered before uploading through the interactive or other media delivery network to a headend, server or third party data analysis system. Before uploading, the captured data may be compressed and formed into packets for transmission.","Using the system or method of the present invention allows service providers to obtain ratings information and detailed information on subscriber viewing patterns and subscriber use of interactive applications. Thus, the present invention can track the number of subscribers viewing or watching particular programs, including advertisements. It also can track use of particular interactive applications such as video on demand. The invention automatically matches data describing programming content with event data describing a channel or application activated or controlled by the subscriber. This allows the invention comprehensively to track user \u201cchannel surfing.\u201d Also, the invention can compare subscriber demographics or billing information with viewing pattern information in order to tailor commercials to those subscribers; determine whether subscribers with a selected demographic background viewed a commercial of interest; or determine the demographics of subscribers that viewed selected commercials.","Persons skilled in the art will recognize that the present invention may be used with numerous types of networked media delivery systems. For instance, the method or system of the present invention can be deployed on an interactive media delivery system or modified for use with a conventional cable television network, a wireless cable television network, or a home satellite television network.","It is accordingly an object of the present invention to provide a system and method for collecting information about patterns of subscriber viewing and use of a media delivery system.","It is another object of the present invention to provide a system and method for determining which network applications, particularly interactive applications, are invoked by particular subscribers.","It is an additional object of the invention to provide a system and method for communicating collected information to a merge processor.","It is a further object of the invention to provide to the merge processor information about the programming content distributed over the media delivery system.","It is yet another object of the invention to provide a system and method for merging the collected information with the programming information in order to obtain comprehensive information about programming shown to or network applications invoked by subscribers. Other objects, features and advantages of the present invention will become apparent upon reading the rest of this document.",{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 1","b":["20","20","30"]},"In any event,  shows various system  elements and subsystems that communicate with each other to transmit collected information, data error detection schemes and data acknowledgments. Briefly, the STB  communicates through a distribution network  with a video server , such as a video transfer engine (\u201cVTE\u201d), that may be acquired from Hewlett Packard (\u201cHP\u201d), with a video\/object storage database . Video server  couples to a video control server , such as an Inter Media Server available from Sybase and deployed on a platform such as an HP 9000, with a database . The video server control  controls video server  and also logs information about video server  use. A staging server  receives collected records of events of interest. These \u201cevent records\u201d pass through the video server control , which also couples to a Marketing and Information System (\u201cMKIS\u201d)  that couples to staging server , which receives (1) the event records and (2) content data from various sources ,  and  identified in  and which describe programming content available through the interactive network to all subscribers. MKIS  may be coupled to a third party search and analysis system  that can provide customer support operations.","STB  provides a platform by which (1) content is converted to a selected video format (e.g., NTSC or PAL) and presented to the subscriber or (2), for interactive systems, messages are exchanged (including video data) over a network  with the staging server . STB  also could include platforms capable of: (1) receiving messages from a user input device, such as a hand-held remote control unit; (2) translating video signals from a network-native format into a format that can be used by the television or display device; (3) inserting alphanumeric or graphical information into the video stream in order to \u201coverlay\u201d that information on the video image; (4) providing graphic or audio feedback to a user; or (5) possibly the most basic function, simply routing a traditional broadcast signal to a viewing device connected to the STB . Analogous terms to STB include: Set-Top Terminal (\u201cSTT\u201d), Cable Converter, and Home Communications Terminal (\u201cHCT\u201d) and any of these devices may be coupled to or made a part of a display device for showing programming to subscribers. Generally, STB  may be a Richmond or 8600X available from Scientific Atlanta, a CFT 2200 available from General Instruments, Thomson's DSS or any other device equipped with (1) a microprocessor; (2) memory for operating instructions and storage; and (3) a control interface for accepting subscriber commands from a remote control device or control panel.","For the particular embodiment of system  shown in the Figures, collected event records that are packaged for transport through system  are called \u201cclickstream\u201d data or information.  shows a clickstream processor  that resides in the memory, such as DRAM or the like, of an STB  and which has a clickstream kernel , buffers  or , a clickstream upload handler , a clickstream controller  and a clickstream event API (application programming interface) .","Briefly, the clickstream kernel  buffers events passed to it by various network applications through the clickstream event API . Clickstream controller  accepts control messages from staging server  and appropriately stores their payload. Typical messages may be sent over the Extended Super Frame (\u201cESF\u201d) pass-through data link and control the uploading of clickstream data. Clickstream upload handler  accepts control messages over the system , which messages control the uploading of collected clickstream data over the reverse path through network . Also, the clickstream upload handler  stores the payload of these messages in appropriate and available memory and accepts the messages sent to it to acknowledge the receipt of uploaded clickstream data.","Referring again to , video server  provides information from video\/object storage  to the particular interactive system over which system  is deployed. Clickstream data collected at STBs  can be uploaded to staging server  in any number of ways. For instance,  shows that the distribution network  could couple directly to staging server , allowing clickstream data packets sent from STBs  to be forwarded to staging server  directly and for staging server  to then return via the network  data acknowledgements. A network management controller  controls the flow of informationb through the network . Alternatively,  and, in greater detail, , show that clickstream data packets may be sent to the distribution network  to the video server . Video server  passes through both clickstream data uploads from various STBs  and data acknowledgments returned to the STBs . A communications router inside the video server  redirects traffic to the appropriate destination. Video server control  similarly acts as a pass-through device for STB  clickstream data going to the staging server  and as a pass-through device for staging server  data acknowledgments to the STBs . Also, video server control  may provide log information that identifies interactive applications invoked by particular STBs . That log information is provided to the staging server  so that video server control  also acts as another data source about content available over the network, like EPG metadata source , broadcast advertising metadata source , or advertising traffic control metadata source . Staging server  collects all such clickstream data and content data, analyzes and then forwards it to MKIS database  or to a third-party analysis engine and database , as described in more detail in the text associated with .","Clickstream processor  collects information to create a \u201cjournal\u201d or log about all events or selected events of interest. An event is an action or a change in the state of a STB  that is deemed important to building a knowledge base on subscribers or their viewing patterns. For example, an event can include key presses to change channels or volume, mute, to enter the navigator for the interactive system, to turn the STB  off or on, to fast forward, to pause or to rewind a video obtained via the video on demand application. The events include applications called by the subscriber, such as interactive gaming applications, an electronic program guide, a video on demand or near video on demand application, a home-shopping application or a particular company's interactive application, such as The Weather Channel's weather on demand, World Span's travel on demand or Light Span's educational interactive application. Events include subscriber use of and control commands to peripheral devices coupled to the STB  or a subscriber's display device, such as a VCR or videodisk player.","Each application residing on the STB  interfaces with the clickstream processor  to send selected data for maintaining a desired journal. Assuming that the system  is used with an interactive system, many different applications may be deployed over that system and may be triggered by the subscriber. Some fairly typical applications that might be invoked include:\n\n","Clickstream processor  interfaces with the various applications resident in the STB 's operating system  and any third party applications . Note that for systems using other types of STB 's than the embodiment described in the Figures, those STB 's need not have an operating system. Instead, all instructions can be written directly to the memories of those particular STBs. Applications  can be added by either downloading entirely new software directly to memory or by downloading new tables as described below.","When an application  reaches a point where an \u201cevent\u201d of interest has been generated, the application  stores an event record to memory. The application  then launches to the clickstream kernel  the event record, including information such as: (1) the application's  identification code (e.g., the \u201cCable Television Application\u201d or a particular interactive application); (2) a count of the amount of information (number of bytes) to be journaled; (3) a \u201ctime stamp\u201d that defines a unique point in time, e.g., by defining the date and time of day, accurate to the hour, minute or second; (4) an identification code for the event, or (5) where the event data was stored. Clickstream kernel  uses the information provided by the applications  to collect the event data, format it and place it into a buffer  or . Table I shows the type of information that will be generally sent by the clickstream processor  to the buffers  or .",{"@attributes":{"id":"p-0040","num":"0045"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":"TABLE I"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Application Event Record"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"175pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Size"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"42pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Timestamp","6 bytes"]},{"entry":["Assigned Application ID","16 bits"]},{"entry":["Number Bytes to Follow (length)","8 bits"]},{"entry":["Application Specific Data with customized formats and","Multiple"]},{"entry":["lengths","Bytes"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},"Global table II defines events of interest that each application can identify, collect, store in the \u201cApplication Specific Data\u201d field and notify the clickstream kernel . These events could be as simple as a broadcast channel change by pressing the \u201cChan Up\u201d remote key. All of these event types can be accessed and used by each application. While each application may not use every possible event type, the number of events available for collection allows system  to extract any pertinent usage information for analysis. Also, the use of the global table II increases system  efficiency because event types can be modified, added or removed.",{"@attributes":{"id":"p-0042","num":"0047"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":"TABLE II"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"EVENT DEFINITIONS"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"98pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Code","Event"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"Content Related Events"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"98pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"0x0000","Passive Content"]},{"entry":[{},{},"Change"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"Direct Key Presses"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"98pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"0x0001","TV < > ITV"]},{"entry":[{},{},"Pressed"]},{"entry":[{},"0x0002","Power Pressed"]},{"entry":[{},"0x0003","One (1) Pressed"]},{"entry":[{},"0x0004","Two (2) Pressed"]},{"entry":[{},"0x0005","Three (3)"]},{"entry":[{},{},"Pressed"]},{"entry":[{},"0x0006","Four (4) Pressed"]},{"entry":[{},"0x0007","Five (5) Pressed"]},{"entry":[{},"0x0008","Six (6) Pressed"]},{"entry":[{},"0x0009","Seven (7)"]},{"entry":[{},{},"Pressed"]},{"entry":[{},"0x000A","Eight (8)"]},{"entry":[{},{},"Pressed"]},{"entry":[{},"0x000B","Nine (9) Pressed"]},{"entry":[{},"0x000C","Zero (0) Pressed"]},{"entry":[{},"0x000D","Channel Up"]},{"entry":[{},{},"Pressed"]},{"entry":[{},"0x000E","Channel Down"]},{"entry":[{},{},"Pressed"]},{"entry":[{},"0x000F","Volume Up"]},{"entry":[{},{},"Pressed"]},{"entry":[{},"0x0010","Volume Down"]},{"entry":[{},{},"Pressed"]},{"entry":[{},"0x0011","Last Channel"]},{"entry":[{},{},"Pressed"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"Application\/State Switching"},{"entry":"Related"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"98pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"0x0028","AC Power ON"]},{"entry":[{},"0x0029","Application"]},{"entry":[{},{},"Switch (Normal)"]},{"entry":[{},"0x002A","Application"]},{"entry":[{},{},"Switch"]},{"entry":[{},{},"(Abnormal)"]},{"entry":[{},"0x002B","Application"]},{"entry":[{},{},"Terminated"]},{"entry":[{},{},"(Normal)"]},{"entry":[{},"0x002C","Application"]},{"entry":[{},{},"Terminated"]},{"entry":[{},{},"(Abnormal)"]},{"entry":[{},"0x002D","Soft Power OFF"]},{"entry":[{},"0x002E","Soft Power ON"]},{"entry":[{},"0x002F","OFF State"]},{"entry":[{},{},"Polling Event"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"General"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"98pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"0x0030","Direct Channel"]},{"entry":[{},{},"Change"]},{"entry":[{},"0x0031","Mute"]},{"entry":[{},"0x0032","Un-Mute"]},{"entry":[{},"0x0033","Volume Change"]},{"entry":[{},{},"Below 50%"]},{"entry":[{},"0x0034","Volume Change"]},{"entry":[{},{},"Below 25%"]},{"entry":[{},"0x0035","Volume Change"]},{"entry":[{},{},"Below 10%"]},{"entry":[{},"0x0036","Volume Change"]},{"entry":[{},{},"Above 50%"]},{"entry":[{},"0x0037","Volume Change"]},{"entry":[{},{},"Above 25%"]},{"entry":[{},"0x0038","Volume Change"]},{"entry":[{},{},"Above 10%"]},{"entry":[{},"0x0039","Change to"]},{"entry":[{},{},"Interactive"]},{"entry":[{},{},"Mode"]},{"entry":[{},"0x003A","Change to"]},{"entry":[{},{},"Broadcast Mode"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]},{"entry":[{},"@"]}]}}]}}},"Note that Table II defines relative volume changes (e.g. \u201cvolume change below 50%,\u201d \u201cvolume change below 25%,\u201d etc.). Although the applications could capture the actual key presses that lead to these relative volume changes, that level of detailed information is of little use to system  operators. Also, capturing all that detail leads to more records and higher demands upon the transmission network  when those records are uploaded. Applications could also be configured to \u201cfilter\u201d other unwanted details about other subscriber activities. For example, when subscribers \u201cchannel surf\u201d by quickly flipping through a number of channels in a short period of time, the application could be configured not to record channel changes unless the subscriber paused for greater than a certain selected time period (e.g., 15 to 30 seconds). Again, this eliminates information of little use and decreases network traffic.","Table III defines a small portion of a sample global channel identification table that proposes codes for identifying national and local broadcasters. Such a table allows any application journaling events which occur while subscribers are viewing broadcast or cable television programs to identify the network carrying the programming content by using a subset of the global table II. In this way channel lineups can be changed yet the identifier for a broadcast or cable network would stay the same. The use of this mapping scheme eliminates the need to map an ever-changing channel number to a network.",{"@attributes":{"id":"p-0045","num":"0050"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE III"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Broadcast Channel"},{"entry":"Identification"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"84pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"91pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"0x0100 to","News\/Talk"]},{"entry":[{},"0x011F","Shows"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]},{"entry":[{},"0x0100","CNN"]},{"entry":[{},"0x0101","Headline News"]},{"entry":[{},"0x0102","The Weather"]},{"entry":[{},{},"Channel"]},{"entry":[{},"0x0103","CNBC"]},{"entry":[{},"0x0104","CSPAN"]},{"entry":[{},"0x0105","CSPAN-2"]},{"entry":[{},"0x0106","America's"]},{"entry":[{},{},"Talking"]},{"entry":[{},"0x0107","Talk Channel"]},{"entry":[{},"0x0108","Court TV"]},{"entry":[{},"0x0109","The Crime"]},{"entry":[{},{},"Channel"]},{"entry":[{},"0x010A","National"]},{"entry":[{},{},"Empowerment"]},{"entry":[{},{},"TV"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]},{"entry":[{},"0x0120 to"]},{"entry":[{},"0x013F","Sports"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]},{"entry":[{},"0x0120","ESPN"]},{"entry":[{},"0x0121","ESPN-2"]},{"entry":[{},"0x0122","SportSouth"]},{"entry":[{},"0x0123","The Golf"]},{"entry":[{},{},"Channel"]},{"entry":[{},"0x0124","Classic Sports"]},{"entry":[{},{},"Network"]},{"entry":[{},"0x0125","Prime Network"]},{"entry":[{},"0x0126","NewSport"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]},{"entry":[{},"0x0140 to"]},{"entry":[{},"0x015F","Music"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]},{"entry":[{},"0x0140","MTV"]},{"entry":[{},"0x0141","VH-1"]},{"entry":[{},"0x0142","Country Music"]},{"entry":[{},{},"Television"]},{"entry":[{},"0x0143","The Nashville"]},{"entry":[{},{},"Network"]},{"entry":[{},"0x0144","The Box"]},{"entry":[{},"0x0145","Video Jukebox"]},{"entry":[{},"0x0146","MOR Music TV"]},{"entry":[{},"0x0147","Music Choice"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}]}}},"Table IV below shows some possible identification codes for particular applications. Note that each application could be programmed to insert its application ID code into the event record without accessing table IV. But by having each application access the table IV during the journaling process, the system's  ability to modify or add application ID codes easily is enhanced because such codes could be populated across system  by downloading an updated table IV. Providing for downloading of new tables increases the application footprint and system  complexity so tables can also be part of the application programming.",{"@attributes":{"id":"p-0047","num":"0052"},"tables":{"@attributes":{"id":"TABLE-US-00004","num":"00004"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":"TABLE IV"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Application Identifiers"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"ID Code","Content"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]},{"entry":[{},"0x0000","Operating System"]},{"entry":[{},"0x0001-F","Operating System Sub-Systems"]},{"entry":[{},"0x0010","Application Manager"]},{"entry":[{},"0x0011","Cable Television Application"]},{"entry":[{},"0x0012","Clickstream Kernel"]},{"entry":[{},"0x0100","EPG System"]},{"entry":[{},"0x0101","Digital Pictures - Interactive Game"]},{"entry":[{},"0x0110-F","Viacom - MTV\/Showtime, etc."]},{"entry":[{},"0x1000","Interplay Written Applications General ID"]},{"entry":[{},"0x1001","Interplay Runtime Engine"]},{"entry":[{},"0x1002","Interplay Navigator"]},{"entry":[{},"0x1003","Interplay VOD"]},{"entry":[{},"0x1004","Interplay NVOD"]},{"entry":[{},"0x1005","Interplay TownGuide"]},{"entry":[{},"0x1100","The Weather Channel, Weather On-Demand"]},{"entry":[{},"0x1101","Worldspan - Travel On-Demand"]},{"entry":[{},"0x1102","Lightspan - Educational Interactive Application"]},{"entry":[{},"0xFFFF","Missed Events Record"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}]}}},"Each particular application can simply reference the global application, event and channel identification tables (which periodically may be updated and then downloaded to STBs ) in order to build an event record. Examples of application specific event records that may be created in this manner are shown in Tables V through VIII below and discussed in associated text.","A cable TV application  may tune analog or digital broadcast services. When a command to change channels is entered, the cable TV application  is invoked. The cable TV application  begins building an event record by inserting an application ID and time stamp into the record. Next, the application  determiines the \u201cevent ID\u201d by cross-referencing the command with the global event ID table II for the proper code. Then, the application  journals the \u201cChannel ID.\u201d","Although the Channel ID could simply be the number of the channel, that information means little. The fact that channel 6 was watched more than channel 7 has little or no meaning unless networks and, ultimately, the content delivered by those networks are associated with particular channels. Accordingly, the Channel ID may be a field, like a 16 bit field, which uniquely identifies the broadcast network displayed on that particular channel. The Channel ID may be determined by programming the cable TV application  to compare the channel number tuned with global broadcast channel identification table II, above, to determine the correct channel identification code. Correlating the channel number with the channel identification code found in Table III ensures accurate reporting even though channels may differ at different cable TV headends within a particular region or even though individual channel line-up changes may be made over a period of time. This correlation between channel number and channel identification code could be done also at the staging server  after it receives all of the event records, provided that correlation there accounted for different regional channel lineups.",{"@attributes":{"id":"p-0051","num":"0056"},"tables":{"@attributes":{"id":"TABLE-US-00005","num":"00005"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":"TABLE V"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Cable TV Application Event Record"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"182pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"35pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Size"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"35pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Application ID: See Application ID table IV","16 bits"]},{"entry":["Timestamp: Identifies event time","6 bytes"]},{"entry":["Event ID: See Global Event ID table II for Syntax","16 bits"]},{"entry":["Channel ID: See Broadcast Channel ID table III for Syntax","16 bits"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},"Table VI below shows a navigator application that may be provided in order to give subscribers an interactive menu that assists them in selecting from the many available programs and applications in an interactive network. The \u201cEvent ID\u201d refers to the identification codes for commands relating to the Navigator application, which codes may be located by referring to the global event ID table II above. Table VI also shows some of the features of the navigator that might be used by the subscriber and that could be useful to track. The right hand column under \u201cSize\/Data\u201d shows, first, next to the \u201cApplication state ID\u201d that 8 bits are allocated to that record and, second, in the various rows beneath, the particular code that is journaled in order to indicate a subscriber accessed the identified (e.g. Fly-Thru, Main Menu, etc.) screen. Such information lets system  operators determine the screens that users are viewing heavily or lightly in order to replace less popular screens with more useful ones or to charge more for advertisements placed on heavy use screens.",{"@attributes":{"id":"p-0053","num":"0058"},"tables":{"@attributes":{"id":"TABLE-US-00006","num":"00006"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":"TABLE VI"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Navigator Application Event Record"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"168pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Size\/Data"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Application ID: See Application ID table IV","16 bits"]},{"entry":[{},"Timestamp: Identifies event time","6 bytes"]},{"entry":[{},"Event ID: See Global Event ID table for Syntax","16 bits"]},{"entry":[{},"Application State ID: See below for information","8 bits"]},{"entry":[{},"tracked:"]},{"entry":[{},"Fly-Thru","0x00"]},{"entry":[{},"Main Menu","0x01"]},{"entry":[{},"Information (Help) Screen or Video","0x02"]},{"entry":[{},"Movies Sub-Menu","0x03"]},{"entry":[{},"Movie Categories Sub-Menu","0x04"]},{"entry":[{},"List of Movies Sub-Menu","0x05"]},{"entry":[{},"Movie Info Screen","0x06"]},{"entry":[{},"Movie Buy State","0x07"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}]}}},"Table VII similarly shows the journaling information collected for a video on demand application  that may be launched in an interactive service from the Navigator application above or its equivalent. Some of the information collected here may include the amount of pausing, fast forwarding and rewinding. Additionally, the service provider may want to determine whether viewers are recording a video in order to charge them a recording fee. Similar information could be collected for a near video on demand service, which typically allow only incremental pause, forward or rewind.",{"@attributes":{"id":"p-0055","num":"0060"},"tables":{"@attributes":{"id":"TABLE-US-00007","num":"00007"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":"TABLE VII"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Video on Demand Application Event Record"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"168pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Size\/Data"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Application ID: See Application ID table IV","16 bits"]},{"entry":[{},"Timestamp: Identifies event time","6 bytes"]},{"entry":[{},"Event ID: See Global Event ID table for Syntax","16 bits"]},{"entry":[{},"Application State ID: See below for information","8 bits"]},{"entry":[{},"tracked:"]},{"entry":[{},"Playing","0x00"]},{"entry":[{},"Paused","0x01"]},{"entry":[{},"Fast Forward","0x02"]},{"entry":[{},"Rewind","0x03"]},{"entry":[{},"Info (Help) Video or Screen Played","0x04"]},{"entry":[{},"reserved","0x05"]},{"entry":[{},"reserved","0x06"]},{"entry":[{},"reserved","0x07"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}]}}},"Table VIII below shows the event record for the Electronic Program Guide (EPG) application . The EPG application  records the application ID, timestamp and event ID records just as do the above applications described in tables V\u2013VII. Additionally, it has an application  state ID field that identifies which of the display screens were accessed by subscribers, as shown below.",{"@attributes":{"id":"p-0057","num":"0062"},"tables":{"@attributes":{"id":"TABLE-US-00008","num":"00008"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":"TABLE VIII"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Electronic Program Guide (EPG) Application"},{"entry":"Event Record"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"168pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Size\/Data"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Application ID: See Application ID table IV","16 bits"]},{"entry":[{},"Timestamp: Identifies event time","6 bytes"]},{"entry":[{},"Event ID: See Global Event ID table for Syntax","16 bits"]},{"entry":[{},"Application State ID: See below for information","8 bits"]},{"entry":[{},"tracked:"]},{"entry":[{},"Initial Display Screen","0x00"]},{"entry":[{},"Look Ahead Display 4 Hour","0x01"]},{"entry":[{},"Look Ahead Display 8 Hour","0x02"]},{"entry":[{},"Look Ahead Display 12 Hour","0x03"]},{"entry":[{},"Look Ahead Display 16 Hour","0x04"]},{"entry":[{},"Look Ahead Display 20 Hour","0x05"]},{"entry":[{},"Look Ahead Display 24 Hour","0x06"]},{"entry":[{},"Reserved","0x07"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}]}}},"Generally, similar information about other applications , such as home shopping, interactive gaming or any other new applications deployed over an interactive or other media delivery system, can be tracked in a similar fashion. Additionally, the journaling process may be used to track errors within the system , with clickstream kernel  journaling such errors using the same method as described above.","Over time, the journaling needs of system , or system  itself may evolve. Applications may be changed or new ones deployed. New events may become of interest to the operator of system . In order to provide flexibility for system , operators may download to STBs  new or replacement applications that will include the necessary processes for journaling all events of interest.","Assume that Mr. Smith turns on his interactive television at 7:30 p.m. to watch a half hour news program on channel 5, which corresponds to CNN for that region. At 8:00 p.m. he accesses the Navigator application to order a video through the video on demand application. He then accesses the Video on Demand application, which automatically begins playing a video at 8:04, pauses the video at 8:50 and begins playing again at 8:55 until it is completed at 9:45, at which point he turns off his interactive TV.","Mr. Smith's activities generate the following event records shown in table IX below (for convenience, multiple events occurring under a single application are grouped even though separate records are created in operation):",{"@attributes":{"id":"p-0062","num":"0067"},"tables":{"@attributes":{"id":"TABLE-US-00009","num":"00009"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":"TABLE IX"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Sample Event Records"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"168pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Data"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Cable Application Event Record 1 Content",{}]},{"entry":["Application ID: See table IV for application ID Code","0x0011"]},{"entry":["Timestamp: Identifies event time","1\/1\/96"]},{"entry":[{},"7:30:01 p.m."]},{"entry":["Event ID: See Global Event ID table II to retrieve","0x002"]},{"entry":"code for \u201cpower pressed\u201d"},{"entry":"Cable Application Event Record 2 and 3 Content"},{"entry":["Application ID: See table IV for application ID Code","0x0011"]},{"entry":["Timestamp: Identifies event time (Date will be same","1\/1\/96"]},{"entry":["for second entry)","7:30:03 p.m.;"]},{"entry":[{},"8:00:01 p.m."]},{"entry":["Event ID: See (1) global Broadcast Channel ID table","0x0100"]},{"entry":["III to determine that Channel 5 is CNN and locate","0x0001"]},{"entry":"code and (2) table II for an event ID code"},{"entry":"corresponding to an \u201ciTV Press\u201d by Mr. Smith."},{"entry":"Navigator Application Event Record 4 Content"},{"entry":["Application ID: See table IV for application ID Code","0x1002"]},{"entry":["Timestamp: Identifies event time for accessing each","1\/1\/96"]},{"entry":["screen.","8:01:30 p.m."]},{"entry":["Event IDs: See table II for event ID code that","0x0021"]},{"entry":"identifies an \u201center\u201d command by Mr. Smith to invoke"},{"entry":"this application."},{"entry":["Application State ID Code: This shows Mr. Smith","0x01"]},{"entry":"accessed the Main Menu"},{"entry":"Navigator Application Event Records 5\u20136 Content"},{"entry":["Application ID: See table IV for application ID Code","0x1002"]},{"entry":["Timestamp: Identifies event time for accessing each","1\/1\/96"]},{"entry":["screen. A separate record is created for each activity,","8:02:00 p.m.;"]},{"entry":["with a timestamp showing initiation of each activity.","8:03:00 p.m.;"]},{"entry":"Each record will have the corresponding event and"},{"entry":"state."},{"entry":["Event IDs: See table II for event ID code that","0x0021"]},{"entry":["identifies an \u201center\u201d command by Mr. Smith to invoke","0x0021"]},{"entry":"this application."},{"entry":["Application State ID Codes: This shows Mr. Smith","0x03"]},{"entry":["accessed the Movies Sub-Menu and Movie Sub-menu","0x05"]},{"entry":"list."},{"entry":"Video on Demand Application Event Records 7\u20139"},{"entry":"Content"},{"entry":["Application ID: See Application ID table IV (same for","0x1003"]},{"entry":"each record)."},{"entry":["Timestamp: Identifies event time for each event","1\/1\/96"]},{"entry":["recorded by the application. (The day is the same for","8:04:00 p.m."]},{"entry":["each record and each time corresponds with the","8:50:00 p.m."]},{"entry":["activity identified below).","8:55:00 p.m."]},{"entry":["Event ID: See table II for event ID codes that identify","0x0022"]},{"entry":["Mr. Smith's play, pause and play commands.","0x0024"]},{"entry":[{},"0x0022"]},{"entry":["Application State ID Codes: These show Mr. Smith","0x00"]},{"entry":["activated this application, played, paused and then","0x01"]},{"entry":["played again his selected video.","0x00"]},{"entry":"Cable Application Event Record 10 Content"},{"entry":["Application ID: See table IV for application ID Code","0x0011"]},{"entry":["Timestamp: Identifies event time","1\/1\/96"]},{"entry":[{},"9:45:00 p.m."]},{"entry":["Event ID: See Global Event ID table II to retrieve","0x002"]},{"entry":"code for \u201cpower pressed\u201d"},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},"The variably sized event records are collected and then stored in one of two clickstream buffers  or . Capacity of each of the buffers may be statically provisioned or the system  may addressably download to particular STBs  an appropriate buffer  or  size. A buffer  or  may be an allocated, contiguous free area of STBs'  memory set aside for buffering event records only. Although advanced database techniques like link lists or record pointers could be used, they would increase the application footprint and complexity. Because buffer sizes of about 15 kB would probably accommodate the journaling needs of most applications, advanced database techniques need only be used for larger buffers. Buffers up to 15 kB should allow at least 4 to 8 hours of peak channel \u201csurfing\u201d between uploads (channel surfing typically will generate the most event records). In any event, empirical analysis of network use should determine the optimum buffer size.","Event records are directed to one of the two buffers  or , although a single or even more buffers could be used with the system . Conceivably, the system  could also be modified to upload event records in real time; however, that severely increases the possibility of instantaneous overloads in network traffic. Thus, system  preferably uses buffers  or  to buffer collected event records until they are upload.","Event records from a particular STB  may be uploaded in a format that assists in their transmission back through the distribution network  to the staging server . A header record may indicate the time the buffer  or  was first opened, the number of bytes in the buffer  or , the originating STB  by address, the version of the clickstream kernel  which generated the record and the type of data compression used on the following data (if any). This first header record may be of fixed length and uncompressed. Information following \u201cCompression Type\u201d may be compressed to save in transmission bandwidth. Table X below shows this general header format:",{"@attributes":{"id":"p-0066","num":"0071"},"tables":{"@attributes":{"id":"TABLE-US-00010","num":"00010"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":"TABLE X"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Buffer Header Record"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"168pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Size"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"147pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Transaction Code","8 bits"]},{"entry":[{},"Clickstream Version Number","8 bits"]},{"entry":[{},"Timestamp","6 bytes"]},{"entry":[{},"Number of Bytes","8 bits"]},{"entry":[{},"STB Unique Address Most Significant","16 bits"]},{"entry":[{},"STB Unique Address Least Significant","32 bits"]},{"entry":[{},"Compression Type","8 bits"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}]}}},"When (1) a buffer  or  fills, (2) an upload timer event expires or (3) upon command from the staging server , the clickstream processor  initiates an upload process. During that process the uploading buffer  is locked and subsequent event records are routed to and stored in the second buffer . When upload of buffer  is completed, records continue to buffer  until the next upload time, after which buffer  locks and records go to buffer . This cycle continues to repeat.",{"@attributes":{"id":"p-0068","num":"0073"},"figref":"FIG. 3","b":["52","34","30"]},"An example of the use of these parameters would be to define a period of time every day for STBs  within system  to upload data. Typically, the system  operator may want the data available every morning for analysis. Peak use of broadcast prime time or of interactive services will typically be from 7 p.m. until 12 p.m., during which time no uploads should occur in order to minimize the burden on the network . Beginning at 12 p.m., uploads of event records out of a buffer  or  would begin. In order to have all STBs  upload before 8 a.m., the STBs  may be divided into upload groups, e.g., , with each group uploading over a selected (e.g., 15 minute) period. To achieve this upload cycle, the following parameters are defined in the  cycle in table XI:",{"@attributes":{"id":"p-0070","num":"0075"},"tables":{"@attributes":{"id":"TABLE-US-00011","num":"00011"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":"TABLE XI"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Upload Cycle Parameters"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"126pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"91pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Parameter","Definition"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":["CycleFirstOccuranceStartTime","12:00 am Jan 1, 1995 + \u201cX\u201d *"]},{"entry":[{},"15 minutes. \u201cX\u201d staggers each"]},{"entry":[{},"upload group by 15 minutes;"]},{"entry":[{},"X = number of Groups"]},{"entry":["Cycle Time","24 hours"]},{"entry":["Upload Duration","15 minutes"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}},"br":{},"b":["30","52"]},"STBs  can be instructed as to their role in uploading by sending from staging server  appropriate commands that are handled by the clickstream upload controller . For instance, the following commands may be addressed and sent by staging server  to a single or group of STBs .",{"@attributes":{"id":"p-0072","num":"0077"},"tables":{"@attributes":{"id":"TABLE-US-00012","num":"00012"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":"TABLE XII"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Clickstream Upload Control Commands"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Octet#","Contents"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":["T 0","Transaction Code MSB = 0 \u00d7 80"]},{"entry":["T 1","Transaction Code LSB = 0 \u00d7 10"]},{"entry":["0","Clickstream Processor Version Number"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"5"},"colspec":[{"@attributes":{"colname":"1","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"5","colwidth":"70pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["1","Global","Addressable","Group Address","Denotes the group of"]},{"entry":[{},"Flag","Flag",{},"STBs to field this 1"]},{"entry":[{},"(b1)","(b1)",{},"transaction\u2003\u2003(b5)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"84pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"105pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["2","Collection On\/Off Key","Will turn clickstream collection"]},{"entry":[{},{},"On\/Off to a STB or Group of STBs"]},{"entry":[{},{},"(non-Global only)."]},{"entry":["3","Perform Upload Now Key","Will perform an upload on"]},{"entry":[{},{},"command. Will only upload on"]},{"entry":[{},{},"command if Global Flag is NOT"]},{"entry":[{},{},"set."]},{"entry":["4","Suppress Upload on","Will keep the STB or Group from"]},{"entry":[{},"Buffer Ful","uploading when buffer is full."]},{"entry":[{},{},"The STB or Group will only"]},{"entry":[{},{},"upload on it's appointed upload"]},{"entry":[{},{},"cycle."]},{"entry":["5","UploadCycleDefinition","A STB will have 1 to 4 possible"]},{"entry":[{},{},"upload cycles defined. This will"]},{"entry":[{},{},"define any one of those cycles."]},{"entry":["6","Cycle First Occurrence","Year (b8) Defines the time for"]},{"entry":[{},"Start Time (Total b48)","first upload in cycle."]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"84pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"56pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["7","Cycle First Occurrence","Month","(b8)"]},{"entry":[{},"Start Time"]},{"entry":["8","Cycle First Occurrence","Day","(b8)"]},{"entry":[{},"Start Time"]},{"entry":["9","Cycle First Occurrence","Hour","(b8)"]},{"entry":[{},"Start Time"]},{"entry":["A","Cycle First Occurrence","Minute","(b8)"]},{"entry":[{},"Start Time"]},{"entry":["B","Cycle First Occurrence","Second","(b8)"]},{"entry":[{},"Start Time"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"105pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["C","Upload","(Total b24)","Hours(0\u201324) (b8) Defines a"]},{"entry":[{},"Duration",{},"duration of time over which the"]},{"entry":[{},{},{},"STB randomizes upload start"]},{"entry":[{},{},{},"time."]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"84pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"56pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["D","Upload Duration","Minutes(0\u201359)","(b8)"]},{"entry":["E","Upload Duration","Seconds(0\u201359)","(b8)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"105pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["F","Cycle Time","(Total b32)","Days (0\u201314) (b8) Defines the"]},{"entry":[{},{},{},"periodicity (mean time) between"]},{"entry":[{},{},{},"uploads."]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"84pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"56pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["10\u2002","Cycle Time","Hours(0\u201324)","(b8)"]},{"entry":["11\u2002","Cycle Time","Minutes(0\u201359)","(b8)"]},{"entry":["12\u2002","Cycle Time","Seconds(0\u201359)","(b8)"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]}}]}},"br":{},"b":["30","30","30","42","44","30"]},"After the upload process triggers, each STB  typically initiates upload by first locking the buffer  or  to be uploaded and then compressing the contents of that buffer  or . A number of different compression techniques may be used, however, about 50% compression may be achieved with LZW compression utilities. Such compression substantially reduces the load on network  caused by numerous STBs  uploading event records. Compressed data is divided into transmission \u201ctransactions\u201d or \u201cpackets\u201d and packet headers are addressed to indicate packet identification, IP destination address, etc. The actual network connection can be initiated by the operating system for the particular STB . Persons skilled in the art will recognize that the type of and manner of invoking and implementing the network connection will vary depending upon the type of media delivery network over which system  is deployed.","For instance, the STB  can be configured to insert UDP\/IP headers and trailers taken from the RFC 791 or RFC 768 specifications published by the ISO. Each data packet may have UDP\/IP protocol built around a Level 1 pass-through header, such as shown in Table XIII below:",{"@attributes":{"id":"p-0075","num":"0080"},"tables":{"@attributes":{"id":"TABLE-US-00013","num":"00013"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE XIII"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"UDP\/IP Protocol for Headers"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"IP Header"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"42pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"35pt","align":"center"}},{"@attributes":{"colname":"4","colwidth":"98pt","align":"center"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["IP Version","Header","Type of","Total Length"]},{"entry":[{},"Length","Service"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"119pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"70pt","align":"center"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["Identification","Flags","Fragment Offset"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"42pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"56pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"98pt","align":"center"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Time to Live","Protocol","Header Checksum"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"Source IP Address"},{"entry":"Destination IP Address"},{"entry":"UDP Header"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"119pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"98pt","align":"center"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Source Port","Destination Port"]},{"entry":["Length","Checksum"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},"In the embodiment shown in the Figures, the clickstream processor  will identify a particular VSP\u2014Video Service Provider, which is an entity connecting to network  to distribute services\u2014like VSP  shown in , as the destination of these data packets. All of the data to be uploaded appears as \u201cpayload\u201d to the STB , the signaling network , the network management controller , and the event capture process  on the staging server . After an appropriate header and trailer inserted at the STB , the upload data packet may have the format shown in Table XIV:",{"@attributes":{"id":"p-0077","num":"0082"},"tables":{"@attributes":{"id":"TABLE-US-00014","num":"00014"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":"TABLE XIV"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Clickstream Upload Data Packet"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Octet#","Contents"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":["T 0","Transaction Code MSB = 0x80"]},{"entry":["T 1","Transaction Code LSB = 0x18"]},{"entry":["0","Clickstream Processor Version Number"]},{"entry":["1","Upload Sequence Number"]},{"entry":["0x02","Clickstream Upload Buffer Data Structure (as shown in Table I"]},{"entry":["thr.","and X). The data may be broken up into as many reverse path"]},{"entry":["0xFA","transactions as necessary to complete data upload."]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},"Providing two buffers ,  allows event record collection to continue during upload. Assuming buffer  is being uploaded, if the second buffer  fills during the upload process, a buffer overrun condition occurs. To account for such an occurrence, the buffer trailer record sent during upload from STBs  may denote such an error condition. The structure of the buffer trailer record may take the form as shown in Table XV below and include a time stamp, assigned application identification, length and upload code.",{"@attributes":{"id":"p-0079","num":"0084"},"tables":{"@attributes":{"id":"TABLE-US-00015","num":"00015"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":"TABLE XV"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Buffer Trailer Record"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"161pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Size"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"133pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"56pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Timestamp","6 bytes"]},{"entry":[{},"Assigned Application ID","16 bits"]},{"entry":[{},"Number Bytes to Follow (length)","8 bits"]},{"entry":[{},"Upload Status Code","8 bits"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}]}}},"These upload status codes identify the stage of the upload process at the time a buffer  or  overflow occurred. Thus, some possible upload codes could include: upload not used, upload in progress, upload completed but no acknowledgment received, upload completed but only partial acknowledgment received or no upload attempted. This will let the staging server  know that STB  event records are missing beginning at that time. Also, receiving a buffer overrun record informs the staging server  that buffer  or  sizes have not been set appropriately. Buffer  or  sizes can then be reset and released to the system  as an update or released to a particular STB  by sending it an appropriate command.","Note that the packetization description above is for one embodiment of the system . However, generally, to upload collected event records, STBs  can initiate whatever \u201cupstream\u201d data transmission process used by the interactive, cable television or other media delivery system with which the system  is used. That process will upload the event records in the appropriate system format.","In any event, for system , clickstream data packets are uploaded to the staging server  over a slotted-ALOHA (a contention-based standard transport protocol) data transmitter of the STB . Data acknowledgments from the staging server  are sent; each is addressed to particular STBs . The frequency and period of data acknowledgments may be determined by considering network error rates, network packet error rates and causes of those types transmission errors.",{"@attributes":{"id":"p-0083","num":"0088"},"figref":["FIGS. 4A and 4B","FIG. 4A"],"b":["20","30","50","50","52","52","60","56","70","100","110","30","70"]},{"@attributes":{"id":"p-0084","num":"0089"},"figref":"FIG. 4B","b":["71","70"]},"As noted, once a buffer  or  fills or the clickstream processor  decides to upload data for other reasons (time expiration, low system utilization, commanded upload, etc.), the buffer  or  will be formatted, compressed and then uploaded through the system  to the staging server . The upstream data packets may travel from the network management controller  across the distribution network  to video server  through a process called IP (\u201cInternet Protocol\u201d) tunneling, which is essentially automatic IP routing based upon information in the packet payload. The same process can be used to route packets through network  directly to staging server  without going through video server .  shows that, at video server , an L pass-through process  uses a VSP routing table  to associate destination IP addresses with corresponding tags inserted in the received data packets. This process re-directs the data packets to the application server  L pass-through process  by associating the tags with the appropriate listed destination\u2014here, the application server . The L pass-through process  on application server  performs a similar function with the data packets, routing them based on a payload identifier (transaction code or other) to an event record capture (\u201cECAP\u201d) open server process  on the staging server .","When the ECAP process  receives a clickstream data packet, it accepts the data packet and correlates the source address of the data packet with an upload session already in progress with a particular STB . If there is currently no upload in progress with that STB , then one is considered to be initiated. ECAP process  processes the upload of data in accordance with the particular protocol needed for the system . After receipt of all clickstream data packets associated with the upload from a particular STB , the ECAP process  sequences the packets into proper order (particular packets may have arrived out of their original transmission sequence because of transmission delays in network ), decompresses the packets, eliminates transport overhead (e.g., trailers, headers, etc.) and stores them, such as in a flat file, for later analysis. At the end of a selected period, like 24 hours, the file is closed and a new one is opened, which allows a subsequent merge and parse process to batch process discrete files that cover discrete time periods. Immediately after initiation of and during the ECAP process , an operation log is opened to record information about the initiation and termination of each upload session and any errors.","As shown in , staging server  will formulate and send a data acknowledgment to each STB  engaged in the upload process. One method of doing so is to send acknowledgments as addressable downstream level one pass-through transactions over network  to the STB . Such data acknowledgments provide redundant error correction because failure to receive them may alert STB  to a possible transmission error.",{"@attributes":{"id":"p-0088","num":"0093"},"figref":["FIGS. 6A and 6B","FIG. 7"],"b":["30","20","82","84","86","88","60"]},"Collectively, all of this data enters into a merge and parse engine  that creates an event timeline  for each STB . Merge and parse engine  may be deployed upon staging server  or the MKIS system . So deploying merge and parse engine  on staging server  allows collected event records to be merged and parsed. The resulting event timelines  can be sent to MKIS system  for further analysis.","Timeline  provides a snapshot of activity on a particular STB  for a selected period (e.g., 24 hours) or for a selected event\u2014for instance, a timeline  would be created for each STB  tuning to a particular show or shows (e.g., a pay per view fight) that may occur over a selected period. Timeline  is created by merging event records with metadata about programming available over the network for the selected time period.","To merge that data, proper priority must be assigned to data that otherwise may be conflicting. For instance, broadcast advertising data  may indicate that a certain national ad was run at Time A. On the other hand, if the system  is an interactive system and the interactive server provided a targeted advertisement (\u201cad\u201d) also at Time A, as indicated by session-services advertising data , that targeted ad was inserted over the national ad at Time A. Thus, by assigning session-services advertising data  a priority higher than national broadcast advertising data , the merge and parse engine  is able to create an accurate timeline  of programming delivered to a particular STB . Similarly, even a traditional cable or wireless cable network requires priority assignments. Typically, local cable operators typically are allowed to insert local ads over certain national ads (assuming they can sell that local ad time).",{"@attributes":{"id":"p-0092","num":"0097"},"figref":["FIG. 6B","FIG. 6B"]},"Applying these priority rules produces a timeline  for each subscriber. Additional filtering criteria  are applied by the merge and parse engine  in order to generate a further refined timeline , as depicted in . For example, event records may include such highly granular and specific information as the number of volume ups or channel ups that a particular subscriber entered. One set of filtering criteria  may ensure that the timeline  includes only channels that were viewed for more than a threshold (e.g., 15 seconds) time period. This eliminates any very fast channel changes made by the subscribers, thereby simplifying the event timeline  because event records that do not meet the criteria  are filtered out of the event timeline .","Merge and parse engine  also may apply other criteria to the filtered timeline  (or the original timeline ), as shown in . Specifically, advertisers may wish to apply \u201cview\u201d and \u201cwatch\u201d criteria . This criteria  will identify those programs and advertisements that are \u201cviewed\u201d by subscribers for less than a certain threshold amount of time. Programming seen by subscribers for more than that threshold, would be identified as \u201cwatched\u201d programming. For example, for a 30 second ad, the threshold might be 15 seconds. If a subscriber was tuned to a channel displaying that ad for less than 15 seconds he would be deemed to have simply \u201cviewed\u201d that ad; on the other hand, if the subscriber was tuned to the channel carrying that ad for 25 seconds of the ad's length, he would be deemed to have \u201cwatched\u201d it. This criteria  allows system  operators to charge more for \u201cwatched\u201d ads versus those that are merely \u201cviewed.\u201d Similar criteria can be applied against programming in order to more accurately gauge ratings. Thus, for a 30 minute program, if a user was tuned to that program for less than 10 minutes, the view and watch criteria  may decide that the program was only \u201cviewed.\u201d In any event, applying the view and watch criteria , merge and parse engine  creates \u201cview\u201d and \u201cwatch\u201d lists  that are useful for the system  operator and advertisers who contract with system  operator.","Note also that other criteria than simply how much time a tuned to a particular channel may be included in the view and watch criteria . For instance another criteria may be volume level. If a viewer was tuned to a channel for the full thirty second length of an ad but hit the mute button or changed the volume below a certain threshold for that ad, view and watch criteria  may classify that ad as a \u201cviewed\u201d ad.","Generally, merging and parsing should be done on discrete segments of data, such as 24 hour segments, as soon as possible in order to minimize the occurrence of un-resolved events. In other words, discrete events are simply pieces of the entire picture. To analyze only several hours of clickstream event data would not allow determination of such things as programming \u201cwatched\u201d versus \u201cviewed.\u201d",{"@attributes":{"id":"p-0097","num":"0102"},"figref":"FIG. 7","b":["80","82","84","92"]},"A timeline  for each STB  is built and uploaded by staging server  to the MKIS database  or a third party analysis engine and database , either of which may store demographics and be used to run queries against the event timelines  and those demographics. Combining the timelines  with demographics information allows for even more detailed and granular information about subscribers and their viewing habits. For instance, consider the following examples:","Widget Co. has ten different advertisements that it has been running on system . Widget Co. wishes to know whether subscribers are \u201cviewing\u201d or \u201cwatching\u201d particular ads. Because of the detailed information captured by the system  of the present invention, a query can be formulated to determine (a) which subscribers \u201cwatched\u201d particular 30 second advertisements for greater than 15 seconds versus (b) which subscribers simply \u201cviewed\u201d the ad, for less than 15 seconds.","When event timelines  (or view and watch lists ) are loaded into MKIS  or analysis engine , the same query can be run for a particular demographic group. For instance, Widget Co. wishes to know which particular ads its primary customer base, baby boomers between ages 40 and 50 and with income over $50,000 per year, \u201cwatched\u201d versus \u201cviewed\u201d their advertisements.","Obviously, the system  can also be modified to target ads to particular demographic households based on feedback from parsed and merged data. Then, event records occurring after those targeted ads are broadcast over system  can be checked to determine whether the particular demographic market targeted watched or viewed the advertisement.","The foregoing is provided to explain and disclose preferred embodiments of the present invention, modifications to which may be made that still fall within the following claims. For instance, the architecture and programming of the system may be modified. Or, a variety of different manufacturers' servers, set top boxes or databases may be configured in order to implement the system. The particular identification codes and allocated sizes show in the tables and described herein may also be greatly modified. Further modifications and adaptations to the described embodiments will be apparent to those skilled in the art and may be made without departing from the scope or spirit of the invention and the following claims."],"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE DRAWINGS","System Overview","Journaling of Event Data","Sample Journal","Event Record Upload Cycle","Event Record Formatting, Upload and Capture","Merging and Parsing","EXAMPLE 1","EXAMPLE 2"],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":["FIG. 2","FIG. 1"]},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":["FIGS. 4A and 4B","FIGS. 1 and 5"]},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 6A"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 6B"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 7"}]},"DETDESC":[{},{}]}
