---
title: System and method for reporting the addition and deletion of TAPI line and phone devices in absence of such notifiction from a PBX
abstract: A TAPI service provider may request configuration information from hardware such as a PBX. Configuration information received from the hardware is stored in a list and compared to the existing configuration list. Two new lists are then generated: an added list and a deleted list. All devices in the deleted list are deleted from the internal database and deleted messages are sent to the TAPI service provider. All new devices are temporarily added to the internal database and addition messages are sent to the TAPI service provider. The new device configuration list is then saved, and the added devices are marked as permanent.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=06975715&OS=06975715&RS=06975715
owner: Siemens Communications, Inc.
number: 06975715
owner_city: Boca Raton
owner_country: US
publication_date: 20000209
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["RESERVATION OF COPYRIGHT","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE INVENTION"],"p":["A portion of the disclosure of this patent document contains material which is subject to copyright protection. The copyright owner has no objection to the facsimile reproduction by anyone of the patent document or the patent disclosure, as it appears in the Patent and Trademark Office patent file or records available to the public, but otherwise reserves all copyright rights whatsoever.","1. Field of the Invention","The present invention relates to communications systems and, in particular, to a communication system employing a private branch exchange (PBX) and a TAPI interface.","2. Description of the Related Art","The Telephony Application Programming Interface (TAPI) is a high level programming interface for Windows\u2122 which supports many types of telephony applications associated with conventional analog public telephone lines, PBX phone lines, ISDN phone lines, and the like. Thus, TAPI allows a communication application to support numerous telephony operations through a variety of mediums by making a function call to TAPI which will drive the hardware (fax\/modem card, DSP card, network switch, and the like) coupled thereto.","The TAPI architecture  is illustrated in . As shown, the TAPI architecture  includes a TAPI implementation  interfaced to telephony application programs . TAPI  provides a connection to a TAPI service provider, such as a TAPI server , which then interfaces to hardware such as voices cards H.323 interfaces or PBX's ","The TAPI specification requires that device configuration information be available at the startup of the TAPI service provider. If unsolicited addition and deletion events from a telephony device hardware, such as a PBX, are not supported (i.e., the hardware does not automatically inform the TAPI service provider of updates), the TAPI service provider can only do configuration change updates at start up. The TAPI service provider does so by requesting the static device configuration from the PBX, building the initial internal database and reporting all the devices to the TAPI. If changes are made on the PBX, the telephony server system administrator would be required to shut down the TAPI service provider and restart it again. This has the disadvantage of disrupting service to all users of the TAPI service provider. Moreover, in such a system, there is no way to shut down a TAPI service provider if it is in use. It will be shut down only if every TAPI application using it shuts down. Since several thousand clients can be supported, this can provide severe disadvantages in administration.","These and other drawbacks in the prior art are overcome in large part by a system and method for client configuration in a TAPI environment according to the present invention. Briefly, the present invention provides a method whereby a TAPI service provider may request configuration information from hardware such as a PBX. Configuration information received from the hardware is stored in a list and compared to the existing configuration list. Two new lists are then generated: an added list and a deleted list. All devices in the deleted list are deleted from the internal database and deleted messages are sent to the TAPI service provider. All new devices are temporarily added to the internal database and addition messages are sent to the TAPI service provider. The new device configuration list is then saved, and the added devices are marked as permanent.",{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIGS. 2\u20134"},"An exemplary TAPI client  is shown in . The TAPI client  may be embodied as a personal computer, including a system unit , a keyboard , a mouse , and a display . Also shown are one or more speakers and a microphone . The screen  of the display device  is used to present a graphical user interface (GUI) and particularly, a TAPI client window . The graphical user interface supported by the operating system allows the user to employ a point and click method of input, i.e., by moving the mouse pointer or cursor (not shown) to an icon representing a data object at a particular location on the screen  and pressing one or more of the mouse buttons to perform a user command or selection. The GUI may be any of the Windows GUIs available from Microsoft Corporation or the Macintosh OS, available from Apple Computer.",{"@attributes":{"id":"p-0017","num":"0016"},"figref":["FIG. 3","FIG. 2"],"b":["11","21","22","21","23","24","21","22"]},"The ROM  contains among other code the basic input output system (BIOS) which controls basic hardware operations such as the interaction of the disk drives and the keyboard. The RAM  is the main memory into which the operating system and applications programs are loaded. The memory management chip  is connected to the system bus  and controls direct memory access operations including passing data between the RAM  and hard disk drive  and floppy disk drive . A CD ROM drive (or DVD or other optical drive)  may also be coupled to the system bus  and is used to store a large amount of data, such as a multimedia program or a large database.","Also connected to the system bus  are various I\/O controllers: The keyboard controller , the mouse controller , the video controller , and the audio controller . The keyboard controller  provides the hardware interface for the keyboard; the mouse controller  provides the hardware interface for the mouse ; the video controller  is the hardware interface for the video display ; and the audio controller  is the hardware interface for the speakers  and microphone . The speakers and the microphone  allow for audio communication during telephony operation. In operation, keyboard strokes are detected by the keyboard controller  and corresponding signals are transmitted to the microprocessor ; similarly, mouse movements and button clicks are detected by the mouse controller and provided to the microprocessor . Typically, the keyboard controller  and the mouse controller  assert interrupts at the microprocessor . In response, the microprocessor  executes a corresponding interrupt routine, as is known. Additionally, an interrupt controller (not shown) may be provided to arbitrate among interrupt requests. An I\/O controller or network interface  enables communication over a network , such as a packet network.","One embodiment of the present invention is as a set of instructions in a code module resident in the RAM . Until required by the computer system, the set of instructions may be stored in another computer memory, such as the hard disk , on an optical disk for use in the CD ROM drive , or a floppy disk for use in the floppy disk drive .","As shown in the figure, the operating system , the TAPI application , the TAPI service provider , and one or more configuration table objects  are resident in the RAM . As is known, the operating system  functions to generate a graphical user interface on the display . The TAPI application program  performs TAPI functionality, including generation of a TAPI client window  () in the GUI. The TAPI service provider  implements an interface to the hardware, as will be described in greater detail below.","Turning now to , a flowchart illustrating operation of an implementation of the invention is shown. Upon startup, in a step , the TAPI service provider  requests static configuration information from the PBX (not shown) or other telephony hardware. Such static configuration information can be static line or static phone device information. In the case of a line device, the configuration information includes the device ID and the number of addresses on the line. In the case of a phone device, the information includes the device ID. Turning back to , in a step , the PBX returns multiple blocks of information of PBX configuration information to the TAPI service provider . Next, in a step , the TAPI service provider  instantiates and builds a static configuration table object (C).","In normal operation, devices are added or deleted to the PBX without notifications being sent to the TAPI service provider . Turning now to FIG. B, in a step , the administrator may request the TAPI service provider  check for PBX configuration changes. In a step , the TAPI service provider  requests static information from the PBX. In a step , multiple blocks of information containing the PBX configuration data arrive at the TAPI service provider . In a step , the TAPI service provider  instantiates and builds a new static configuration table object (C). This new object becomes the current TAPI configuration object. In a step , the TAPI service provider  takes the C object as an input and produces two new configuration table objects: deleted objects (C) and added devices (C).","In a step , for each device in C, the TAPI application  is notified that the corresponding line device has been deleted. In a step , for each device in C, the TAPI application  is notified that the corresponding phone device has been deleted. In a step , for each device in C, the TAPI application  is notified that the corresponding line device has been added. Finally, in a step , for each device in C, the TAPI application  is notified that the corresponding phone device has been added.","Further details regarding a specific implementation of a system and method according to the present invention are shown in the attached Appendix. It is noted, however, that the invention is not limited to the specific form set forth herein, but includes such alternatives, modifications and equivalents as can reasonably be included within the spirit and scope of the appended claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["A better understanding of the invention is obtained when the following detailed description is considered in conjunction with the following drawings in which:",{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":["FIG. 3","FIG. 2"]},{"@attributes":{"id":"p-0014","num":"0013"},"figref":["FIG. 4A","FIG. 4B"]}]},"DETDESC":[{},{}]}
