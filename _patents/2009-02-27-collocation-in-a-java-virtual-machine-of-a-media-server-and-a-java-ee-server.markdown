---
title: Collocation in a JAVA virtual machine of a media server and a JAVA EE server
abstract: In one embodiment, a mechanism for collocation in a JAVA virtual machine of a media server and a JAVA EE server is disclosed. In one embodiment, a system includes an integrated application server including a media server and Java™ Enterprise Edition (JAVA EE) deployed in a single Java™ virtual machine (JVM), and one or more management interfaces communicably coupled to the integrated application server.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08631164&OS=08631164&RS=08631164
owner: Red Hat, Inc.
number: 08631164
owner_city: Raleigh
owner_country: US
publication_date: 20090227
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["RELATED APPLICATION","TECHNICAL FIELD","BACKGROUND","DETAILED DESCRIPTION"],"p":["The present application is related to co-filed U.S. patent application Ser. No. 12\/395,501 entitled \u201cMechanism for Implementation of Endpoints as JMX MBeans in an Integrated Media and JAVA EE Application Server\u201d, which is assigned to the assignee of the present application.","The embodiments of the invention relate generally to communication platforms and, more specifically, relate to a mechanism for collocation in a Java\u2122 virtual machine (JVM) of a media server and Java\u2122 Enterprise Edition (JAVA EE).","With the continued progress of globalization, more corporations than ever before have work groups spread across countries and continents around the world. To support and increase the productivity of remote and telecommuting work groups, communications companies are considering more cost-effective network solutions that combine voice, wireless, data and video functionality. Businesses like these expect that the services they select and eventually implement will have call quality comparable to conventional telephone service, and they expect those services to boost productivity and reduce overall communications costs. Acquiring these desired network services requires connections from the Internet and wireless and wireline networks to Public Switched Telephone Networks (PSTNs) using a flexible, robust, scalable, and cost-effective media gateway. The ability of such media gateways to reduce overall communications costs for dispersed workgroups forms the foundation for media services and servers.","For integrated communication applications, such as those described above, server support needs to be provided. Media gateways provide the ability to switch voice media between a network and its access point. Using Digital Subscriber Line (DSL) and fast-Internet cable technology, a media gateway converts, compresses and packetizes voice data for transmission back-and-forth across the Internet backbone for wireline and wireless phones. Media gateways sit at the intersection of the PSTNs and wireless or IP-based networks. One way for service providers to speed up their innovation processes and quickly launch new services is if they use a standards-based component model and container architecture, such as a Java\u2122 based communications platform.","Today, all communications can be routed through computers. Widespread access to broadband Internet and the ubiquity of Internet Protocol (IP) enable the convergence of voice, data and video.","Embodiments of the invention provide for collocation in a Java\u2122 virtual machine (JVM) of a media server and Java\u2122 Enterprise Edition (JAVA EE). In one embodiment, a system for collocation in a JVM of a media server and JAVA EE includes an integrated application server including a media server and Java\u2122 Enterprise Edition (JAVA EE) deployed in a single Java\u2122 virtual machine (JVM), and one or more management interfaces communicably coupled to the integrated application server.","In the following description, numerous details are set forth. It will be apparent, however, to one skilled in the art, that the present invention may be practiced without these specific details. In some instances, well-known structures and devices are shown in block diagram form, rather than in detail, in order to avoid obscuring the present invention.","Some portions of the detailed descriptions which follow are presented in terms of algorithms and symbolic representations of operations on data bits within a computer memory. These algorithmic descriptions and representations are the means used by those skilled in the data processing arts to most effectively convey the substance of their work to others skilled in the art. An algorithm is here, and generally, conceived to be a self-consistent sequence of steps leading to a desired result. The steps are those requiring physical manipulations of physical quantities. Usually, though not necessarily, these quantities take the form of electrical or magnetic signals capable of being stored, transferred, combined, compared, and otherwise manipulated. It has proven convenient at times, principally for reasons of common usage, to refer to these signals as bits, values, elements, symbols, characters, terms, numbers, or the like.","It should be borne in mind, however, that all of these and similar terms are to be associated with the appropriate physical quantities and are merely convenient labels applied to these quantities. Unless specifically stated otherwise, as apparent from the following discussion, it is appreciated that throughout the description, discussions utilizing terms such as \u201csending\u201d, \u201creceiving\u201d, \u201cattaching\u201d, \u201cforwarding\u201d, \u201ccaching\u201d, or the like, refer to the action and processes of a computer system, or similar electronic computing device, that manipulates and transforms data represented as physical (electronic) quantities within the computer system's registers and memories into other data similarly represented as physical quantities within the computer system memories or registers or other such information storage, transmission or display devices.","The present invention also relates to an apparatus for performing the operations herein. This apparatus may be specially constructed for the required purposes, or it may comprise a general purpose computer selectively activated or reconfigured by a computer program stored in the computer. Such a computer program may be stored in a computer readable storage medium, such as, but not limited to, any type of disk including floppy disks, optical disks, CD-ROMs, and magnetic-optical disks, read-only memories (ROMs), random access memories (RAMs), EPROMs, EEPROMs, magnetic or optical cards, or any type of media suitable for storing electronic instructions, each coupled to a computer system bus.","The algorithms and displays presented herein are not inherently related to any particular computer or other apparatus. Various general purpose systems may be used with programs in accordance with the teachings herein, or it may prove convenient to construct more specialized apparatus to perform the required method steps. The required structure for a variety of these systems will appear as set forth in the description below. In addition, the present invention is not described with reference to any particular programming language. It will be appreciated that a variety of programming languages may be used to implement the teachings of the invention as described herein.","The present invention may be provided as a computer program product, or software, that may include a machine-readable medium having stored thereon instructions, which may be used to program a computer system (or other electronic devices) to perform a process according to the present invention. A machine-readable medium includes any mechanism for storing or transmitting information in a form readable by a machine (e.g., a computer). For example, a machine-readable (e.g., computer-readable) medium includes a machine (e.g., a computer) readable storage medium (e.g., read only memory (\u201cROM\u201d), random access memory (\u201cRAM\u201d), magnetic disk storage media, optical storage media, flash memory devices, etc.), a machine (e.g., computer) readable transmission medium (electrical, optical, acoustical or other form of propagated signals (e.g., carrier waves, infrared signals, digital signals, etc.)), etc.","Embodiments of the invention provide for collocation in a Java\u2122 virtual machine (JVM) of a media server and Java\u2122 Enterprise Edition (JAVA EE). The use of the modular JAVA EE architecture with a media server results in a simple and cleanly separable architecture for the implementation of embodiments of the invention. The JAVA EE microkernel architecture is a natural fit for building and integrating a media server.",{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 1","b":["100","100"]},"JVM  includes an integrated media server and JAVA EE application server  and management interfaces  associated with the integrated application server . The integrated application server  combines a media server  with a JAVA EE application server  to enable the development, deployment and management of applications that integrated of voice, video and data across a range of networks and devices. Media server  facilitates applications in sending media across communications networks to devices. In one embodiment, the media server is communicably coupled to an Internet backbone for wireline and wireless telephones, and receives and processes data from the Internet backbone. JVM  and its associated components such as media server  and JAVA EE application server  may be hosted by one or more computing devices.","In one embodiment, the integrated media and JAVA EE application server  is a single integrated stack, with the media server  and JAVA EE  running in the same JVM . The integrated application server  further provides scalability via a flexible architecture for multiple topologies, data center scalability with local network protocol load balancing, and geographic scalability via DNS load balancing. The integrated application server  of embodiments of the invention additionally provides development benefits, such as not limiting users to an exclusive choice of JAVA EE  or a media server , a continuous step-through debugging experience, a common microkernel architecture (e.g., JBossMX\u2122), and shared container building blocks (e.g., Java\u2122 Naming and Directory Interface (JNDI), Java\u2122 Management Extensions (JMX), Java\u2122 Transaction API (JTA), Web Services, Aspect-Oriented Programming (AOP), etc).","In one embodiment, management interfaces  provide third party application programming interfaces (APIs) , ,  to the integrated media and JAVA EE application server . These third party APIs - simplify integrating with core business systems. For example, some of the management functions provided by management interfaces  may include, but are not limited to, full visibility for monitoring and management via JMX , internal system APIs (media server control API), and application APIs (service usage, service building blocks usage, event traffic control). Third party APIs also provide Operational\/Business Support Systems (OSS\/BSS) connectivity. For example, this may include remote JAVA EE connectivity. Some example APIs shown in  include the JMX API , a Simple Network Management Protocol (SNMP) API , and a Web API .","In one embodiment, the media server  includes one or more endpoints , , ,  and . An endpoint - is a source and\/or sink of data that may be physical or virtual. One example of a physical endpoint is an interface to a gateway that terminates a trunk connected to a Public Switch Telephone Network (PSTN) switch. Another example of a physical endpoint is an interface to a gateway that terminates an analog Plain Old Telephone System (POTS) connection to a phone or a PBX, for instance.","An example of a virtual endpoint is an Announcement endpoint  that plays an audio file for a user agent (UA) (not shown). Another virtual endpoint is a Packet Relay endpoint , which is a specific form of a conference bridge that usually supports just two connections. A further example of a virtual endpoint is a Conference endpoint , which includes an Audio Mixer and is used for conference applications. Another example virtual endpoint is an Interactive Voice Response (IVR) endpoint  that is used for recording, collecting, and generating dual tone multi-frequency (DTMF) signals and other tones. Yet another virtual endpoint may be an Echo endpoint , which generally echoes the audio from a UA and is mostly used for testing the line between the UA and the media server .","In one embodiment, the media server  may be controlled by applications that are not in same JVM  as the media server  via industry-standard controllers. Such industry-standard controller may include, but are not limited to, MEGACO , Media Gateway Control Protocol (MGCP) , or Media Server Markup Language (MSML) . JSR   may be another industry standard used by applications to call the media server .","To better understand the integrated media server and JAVA EE application server  component of the JVM , a closer look at the building blocks for the media server  is helpful.  is a block diagram illustrating a media server architecture  according to an embodiment of the invention. In one embodiment, media server  is the same as media server  described with respect to .","The media server architecture  consists of endpoints . As discussed previously, the endpoints  may be physical or virtual endpoints. Some examples of endpoints  include T1 lines, E1 lines, Time-Division Multiplexing (TDM) lines, fax lines, IVR, Announcement, Conference, Packet Relay, and Echo, to name a few examples. In one embodiment, the endpoints  may be implemented as JMX MBeans.","As illustrated in , there are five main areas within an endpoint , as shown in blown-up form in endpoint : primary sink , secondary sinks , primary source , secondary sources , and Digital Signal Processing (DSP) logic . Each endpoint ,  has a primary source  and many secondary sources . Sources are producer of media. Some examples of sources include audio players, tone generators for DTMF tones, busy tones, fax tones, etc. In addition, each endpoint ,  has a primary Sink  and many secondary sinks . Sinks are consumers of media. Some examples of sinks include a recorder that does audio and\/or video recording, tone detectors for DTMF tones, busy tones, fax tones, etc. In one case, an audio mixer for a conference endpoint can act as a sink as well as a source as it takes media from all other participants (hence, acting as a sink), mixes it, and gives it to listening participant (hence, acting as source).","Within the endpoint , , the primary source  acts as single point of media stream producer to a sink outside of endpoint (not shown) and many secondary sources  contribute the media to this primary source . Additionally, within the endpoint , , the primary sink  acts as single point of media stream consumer from a source (not shown) outside of the endpoint ,  and many secondary sinks  consume the media from the primary sink .","In light of the above depiction of the media server, the following description provides explanation of integrating this media server environment with JAVA EE according to embodiments of the invention.  is a block diagram depicting a communications platform  that integrates a media server  as an extension of JAVA EE  according to an embodiment of the invention. In one embodiment, media server  is the same as media server  and JAVA EE Application Server (AS)  is the same as JAVA EE AS  described with respect to .","As illustrated, the hierarchy of components supporting the integrated media server  and JAVA EE  components includes third party services , an operating system , and third party industry standard hardware . In one embodiment, the JAVA EE component  may be a JBoss\u2122 application server distributed by Red Hat, Inc. of Raleigh, N.C. In another embodiment, the operating system may be Red Hat\u2122 Enterprise Linux system.","It should be noted that media server  is not a JAVA EE specification. However, it utilizes many JAVA EE components, like JMX and JNDI. JAVA EE  is an application building platform that provides many facilities that media server  uses. For example, some useful JAVA EE services and tools may include, but are not limited to, JBoss\u2122 cache, JMX, Java\u2122 Naming and Directory Interface (JNDI), JavaAssist\u2122, and JBoss\u2122 clustering.","The use of the modular JAVA EE architecture  with a media server  results in a simple and cleanly separable architecture for the implementation of embodiments of the invention. The JAVA EE microkernel architecture  is a natural fit for building the media server . In one embodiment, the media server  is a service in the JMX microkernel of JAVA EE . JMX is a Java\u2122 technology that supplies tools for managing and monitoring applications, system objects, devices (e.g., printers), and service-oriented networks. Those resources are represented by objects called MBeans (for Managed Bean). In other embodiments, other similar frameworks may be utilized for the microkernel architecture of JAVA EE including Open Service Gateway initiative (OSGi), for example.","With regard to the JMX,  is a block diagram providing a JMX agent view  of all the media server services. In one embodiment, the JMX agent view  is provided by JAVA EE application server  described with respect to . The JMX agent view  details the endpoints  implemented as MBeans. Each Endpoint uses the RTPManger Service  which is responsible for creating a socket for each endpoint's connections. The RTPManger Service defines the RTPFactory internally, which acts as a factory for sockets and also defines the mapping between the formats supported by the media server and payload for that particular format. All of the endpoints and RTPManager are centrally controlled by the service MediaServerManagement  which itself is an MBean. All of the MBeans of the media server are bundled and deployed as MediaServer archive .",{"@attributes":{"id":"p-0038","num":"0037"},"figref":["FIG. 5","FIG. 1","FIG. 3"],"b":["500","500","500","100","300"]},"Method  begins at block , where a media server is registered as a service in a JMX kernel of a JAVA EE implementation in order to create an integrated media server and JAVA EE application server in a single JVM. In one embodiment, at the start time of the JAVA JEE application server, the application server will scan for all available applications that need to be deployed and one of them will be the media server. Then, at block , controllers are implemented for the integrated application server to provide interaction capabilities and services to one or more converged applications utilizing the integrated application server. Controllers are industry standard protocols, as described in  with respect to components , ,  and . In one embodiment, the controllers may be registered as separate services all together, which are deployed by the Java EE Application Server at start time. These controller services integrate with the media server and open communication channels for applications either residing in the same JVM as the media server or with applications remote to the media server.","Lastly, at block , management interfaces are associated with the integrated application server to interface with core business systems to provide monitoring and management services related to activities of telecommunications protocols used by the integrated application server. As the various endpoints and other services of the media server are implemented as MBeans, they expose their APIs as described in the JMX specification via the Mbean server. These APIs may be called by management applications residing either in the same JVM as the media server or in management applications remote to the media server that manage the media server. Each of these management applications may actually query the MBean server with a wild card query to receive all of the MBeans registered. In this way, the management applications may not only monitor the media server, but also monitor the JAVA EE application server as well.",{"@attributes":{"id":"p-0041","num":"0040"},"figref":"FIG. 6","b":"600"},"The exemplary computer system  includes a processing device , a main memory  (e.g., read-only memory (ROM), flash memory, dynamic random access memory (DRAM) (such as synchronous DRAM (SDRAM) or Rambus DRAM (RDRAM), etc.), a static memory  (e.g., flash memory, static random access memory (SRAM), etc.), and a data storage device , which communicate with each other via a bus .","Processing device  represents one or more general-purpose processing devices such as a microprocessor, central processing unit, or the like. More particularly, the processing device may be complex instruction set computing (CISC) microprocessor, reduced instruction set computer (RISC) microprocessor, very long instruction word (VLIW) microprocessor, or processor implementing other instruction sets, or processors implementing a combination of instruction sets. Processing device  may also be one or more special-purpose processing devices such as an application specific integrated circuit (ASIC), a field programmable gate array (FPGA), a digital signal processor (DSP), network processor, or the like. The processing device  is configured to execute the processing logic  for performing the operations and steps discussed herein.","The computer system  may further include a network interface device . The computer system  also may include a video display unit  (e.g., a liquid crystal display (LCD) or a cathode ray tube (CRT)), an alphanumeric input device  (e.g., a keyboard), a cursor control device  (e.g., a mouse), and a signal generation device  (e.g., a speaker).","The data storage device  may include a machine-accessible storage medium  on which is stored one or more set of instructions (e.g., software ) embodying any one or more of the methodologies of functions described herein. The software  may also reside, completely or at least partially, within the main memory  and\/or within the processing device  during execution thereof by the computer system ; the main memory  and the processing device  also constituting machine-accessible storage media. The software  may further be transmitted or received over a network  via the network interface device .","The machine-readable storage medium  may also be used to implement embodiments of JVM  described with respect to , and\/or a software library containing methods that call the above applications. While the machine-accessible storage medium  is shown in an exemplary embodiment to be a single medium, the term \u201cmachine-accessible storage medium\u201d should be taken to include a single medium or multiple media (e.g., a centralized or distributed database, and\/or associated caches and servers) that store the one or more sets of instructions. The term \u201cmachine-accessible storage medium\u201d shall also be taken to include any medium that is capable of storing, encoding or carrying a set of instruction for execution by the machine and that cause the machine to perform any one or more of the methodologies of the present invention. The term \u201cmachine-accessible storage medium\u201d shall accordingly be taken to include, but not be limited to, solid-state memories, and optical and magnetic media.","Whereas many alterations and modifications of the present invention will no doubt become apparent to a person of ordinary skill in the art after having read the foregoing description, it is to be understood that any particular embodiment shown and described by way of illustration is in no way intended to be considered limiting. Therefore, references to details of various embodiments are not intended to limit the scope of the claims, which in themselves recite only those features regarded as the invention."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The invention will be understood more fully from the detailed description given below and from the accompanying drawings of various embodiments of the invention. The drawings, however, should not be taken to limit the invention to the specific embodiments, but are for explanation and understanding only.",{"@attributes":{"id":"p-0008","num":"0007"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 6"}]},"DETDESC":[{},{}]}
