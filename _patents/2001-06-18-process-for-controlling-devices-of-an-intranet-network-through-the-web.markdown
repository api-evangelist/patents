---
title: Process for controlling devices of an intranet network through the web
abstract: Preferably, the set of instructions is used for controlling a remote installation of a software package within the devices in accordance with selections made by the IT administrator.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=06920492&OS=06920492&RS=06920492
owner: Hewlett-Packard Development Company, L.P.
number: 06920492
owner_city: Houston
owner_country: US
publication_date: 20010618
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["TECHNICAL FIELD OF THE INVENTION","BACKGROUND ART","SUMMARY OF THE INVENTION","DESCRIPTION OF THE PREFERRED EMBODIMENT OF THE INVENTION"],"p":["The invention relates to telecommunications and more particularly to a process for controlling devices of an Intranet network via a server communicating through the Web.","The development of computers and telecommunications, and particularly the Internet, increases the complexity of the tasks for the network manager, also known as the Information Technology Administrator, who has to manage the networks and network nodes, and particularly to ensure that the devices forming the Intranet of a company or a private organisation fully fit the requirements of the users. This particularly covers the management of the different elements of the network, including the nodes, the computers, the printers, the switches, the hubs and the modems. The IT manager has to ensure that the different elements which compose a network fully operate in a satisfactory fashion, but also that each machine is loaded with the appropriate Operating System, and also With the adequate software applications.","Different tools are known for facilitating the management of devices, printers, routers, switches and computers composing an Intranet network. HP OpenView\u2122 manufactured by Hewlett Packard Inc., IBM TIVOLI\u2122 manufactured by IBM Corp. , CS Unicenter TNG etc . . . HP TopTools\u2122 is another tool for facilitating the network devices or network nodes management.","Among many different installation and maintenance operations, the IT Administrator has to support the PC cleanup and defragmentation of the different hard disk of the computers, the loading of the appropriate software packages and particularly the update of the antivirus tools, the backup of the files, the software update, the resources monitoring and the e-mail notifications.","Although some tools have been designed to facilitate the tasks of the IT administrator, basically, by using specific agents on the different devices, it still appears that the handling and the management of an Intranet requires a highly qualified professional, which has to remain within the vicinity of the Intranet network.","There is a wish for enabling the control, the maintenance, the update of the devices within an Intranet by a Web server which is located elsewhere, outside the Intranet, what is generally hindered or made difficult by the presence of the proxy and the firewall.","The arrangement of a Firewall mechanism for the purpose of supervising the ports of communication with the Internet network is an obstacle to such external control.","The technical problem to be solved by the present invention is to design a process which allows the handling of a Intranet network, including the different subnets composing that network, by an external centralized Web server for the purpose of constituting a Web portal dedicated to the control, the inventory and the maintenance of an Intranet network.","Another technical problem is to facilitate the control of an Intranet network by an external Web browser, without requiring changes to be brought to the existing proxy and firewall arrangement and without requiring installation of specific administration tools.","It is an object of the present invention to control an Intranet network by means of an external Web server operating as a portal dedicated for management, inventory, and maintenance of the Intranet.","It is a further object of the present invention to collect via an external Web server a comprehensive description of the architecture of an Intranet network for the purpose of asset management.","It is another object of the present invention to provide a comprehensive control of the devices composing an Intranet network by an external Web server.","These and another objects are achieved by means of the present invention which is defined in the independent claims. Basically, there is provided a process for controlling an Intranet network by a Web server which involves the step of:\n\n","In one embodiment, the set of instructions is used for the purpose of controlling a remote installation of a software package within the devices in accordance with selections made by the IT administrator.","In another embodiment of the invention, there is controlled the installation of an executable file causing the gathering of technical data within the system by means of an analysis of BIOS characteristics and the registry. There is therefore provided a wide and comprehensive inventory of the devices connected to the network.","A set of specific commands has been designed for achieving the control of the Internet Control Agent by the Web server. Those includes an EXECUTE command for the purpose of executing a particular executable file located in a share resource or on a local hard disk, with a first parameter defining the maximum time allowed to the execution and a second parameter which defines the file where a report of the execution has to be created and transmitted to the Web server. A DOWNLOAD command is used for controlling the download of files with the appropriate Uniform Resource Locator (URL). A SLEEP command is used for scheduling the next execution of the Internet Control Agent for the purpose of the execution of a new set of commands or instructions.","In one embodiment, the discovery of the different devices of the Intranet uses a mechanism based on the current IP address, the subnet mask being associated to the address of the router of the considered subnet. All the active nodes which are comprised within a considered submask are successively discovered by means of a PING. When a node appears to be detected, a Simple Network Management Protocol (SNMP) request is then used for accessing to information relevant to that device and determining the type of the machine. In the case of a router, a further SNMP request permits to discover the interfaces and thus, the possible existence of additional subnets, with the subnet masks. Each discovered subnet is subject of the same iterative mechanism and the different nodes composing the Intranet network are progressively disclosed and reported.","With respect to the  there is illustrated the control of an Intranet network which communicates via a Proxy  and a firewall arrangement  to the Web . As an example, the Intranet network may comprise two subnets  and  communicating via a router device . Subnet  includes IT administrative console , a computer client , a printer  and a server . Subnet  includes a computer client , a printer , a server , and optionally, a server appliance  which purpose is to communicate with a server . As will be shown below with details, a server  is associated to a database  and is used for controlling, for the maintenance and inventory of the Intranet network.","A Firewall  is used for separating the Intranet network from the Web. As known by the skilled man a firewall arrangement is used for filtering the communication exchanged between the network devices that are connected outside the Intranet and those included within the Intranet. Such a firewall is generally based on one proxy element, similar to proxy  which is represented on the , and two different routers (not shown). A first router is generally dedicated to the interface with the Web while a second router handles the frames which are exchanged with the devices inside the Intranet. Any direct exchange of frames between the Intranet and the Web is avoided and all devices communicate through the proxy, thus substantially securing the internal organisation of the Intranet.","It will be described now how the external Web server  can take the control of the devices composing the Intranet for the purpose of management, inventory and maintenance of the different components of the network.","The process involves a registration procedure by the IT administrator to the external Web server , in step . To achieve this, the IT administrative uses a HTTP standard request to the server  by using the conventional browser existing in the console or computer , such as, for instance, Internet Explorer\u2122 4 or 5 (manufactured by Microsoft Corp.) or Netscape Navigator\u2122 (manufactured by Netscape Communications Corp.). The communication can be secured by the user of the HTTPS (RFC 2660) protocol for securing the communication between the IT administrator and the Web server . During the registration procedure, the IT administrator is assigned a registration number, with a logging account and a password.","The registration procedure is followed by the transmission to the IT administrative console, in step , of an installation package of a Internet Control Agent. In the preferred embodiment, the package is designed for a setup procedure for Windows\u2122 9x or Windows\u2122 NT type machines, and comprises reference to the newly registered account. More particularly, the package is a signed executable file which supports automatic extraction and installation, as well as unattended setup. In one embodiment, the Internet Control Agent may be directly received as an attachment of an electronic mail. For Windows\u2122 9x type machines, a login script may also be used.","As will be shown below, the Internet Control Agent, once installed in console  of IT administrator, exchanges control information with the server  through the HTTP protocol, and particularly the GET and POST requests. The particular format of the HTTP GET request is defined in the well-known rules laid down in the Request For Commands (RFC) 2.6.1.6, which are available at the following address www.w3.org\/protocols. Since those rules are well known to the skilled man, they will not be elaborated further on. Use of the secure version of HTTP, HTTPS (RFC 2660) is an extension, which enables the protection of the users privacy by encrypting the profile information in transit.","Internet Control Agent receives the HTTP references of proxy , for instance, under the form of http:\/\/proxy.company.com:8080. In one particular embodiment, that reference can be automatically incorporated by server  into the installation package transmitted in step . This can be achieved by constructing, during the registration procedure of step , a Web page containing a Hyperlink to a proxy detection script. By accessing the internal parameters of the registry of the IT Administrator console , the settings of the proxy are discovered, and can them be posted back to server  via an HTTPS POST request. The use of such a script is well known to the skilled man and will not be further developed.","The auto-discovery process can then be initiated in step  for the purpose of gathering a comprehensive description of the Intranet architecture and the different devices composing the network. Two different embodiments may be used for this purpose.","In a first embodiment, a Server Appliance  is attached to the Intranet network, and includes means for carrying out the discovery process and collecting the information being gathered for the purpose of generating a report file. Such a discovery facility which may be used within the Intranet is known to the skilled man. An example of such a tool is TopTool\u2122, which is manufactured by the Applicant of the present application. Once the information has been gathered on the Intranet, a text or eXtended Markup Language (XML) file is transmitted via a HTTPS post to the server . For that purpose, the Server Appliance  particularly includes the account registration number assigned by server  to the IT administrator as well as the accurate settings of the proxy.","In a second embodiment, the server  prepares a Web page containing a hyperlink referring to a script which is executed on the IT administrator console . The network discovery script is then automatically executed and the auto-discovery mechanism is launched.","The auto-discovery mechanism is based on the current IP address, the subnet mask being associated to the address of the router of the considered subnet, e.g. subnet  or subnet . In this way, all the active nodes which are comprised within a considered subnet are successively discovered by means of a PING request. When a node appears to be detected, a Simple Network Management Protocol (SNMP) request is then used for accessing to information relevant to that device and determining the type of the device. In the case of a router, a further SNMP request permits to discover the interfaces and thus, the possible existence of additional subnets. Each discovered subnet can be subject of the same iterative mechanism and the different nodes composing the Intranet network are progressively disclosed and reported.","The auto-discovery process thus permits the elaboration of a comprehensive description of the topology of the Intranet, including the different subnets and the IP addresses of the different devices. In the particular case of the architecture which is shown in , the auto-discovery process produces a table comprising the different elements of the network, with the following information:",{"@attributes":{"id":"p-0038","num":"0044"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{}," Subnet 15:"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"98pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"77pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{}," Computer (6):","128.1.1.1"]},{"entry":[{},"Computer (7):","128.1.1.2"]},{"entry":[{},"Printer (8):","128.1.1.3"]},{"entry":[{},"Router(9):","128.1.1.4"]},{"entry":[{},"Server(10):","128.1.1.5"]},{"entry":[{},"Subnet 16:"]},{"entry":[{},"Computer (11):","128.1.3.1."]},{"entry":[{},"Printer (12):","128.1.3.2."]},{"entry":[{},"Server (13):","128.1.3.4"]},{"entry":[{},"Server appliance","128.1.3.5."]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}]}}},"Such a table may be compiled within a text or XML file and transmitted to server  via a HTTPS POST, for the purpose of a final storage within the database .","In one embodiment, the auto-discovery mechanism is regularly executed, either by Server Appliance  or by the script mechanism within console , so as to ensure that the description of any device is progressively incorporated within the database .","When the topology of the Intranet network, including the subnets and the IP addresses of the devices, has been collected and included within a report file, e.g. a text or XML file, the latter is being transmitted in step  to the server  via a HTTPS POST request. Such a request may easily be conveyed throughout the firewall mechanism without requiring any change to the latter, as the HTTP and HTTPS outbound connections are usually left open in a firewall. The precise information relevant to the topology of the Intranet network can then be stored within the database  which is associated to Web server .","In step , the external server  produces a Web page which is displayed within the browser of the IT administrator for the purpose of controlling the distribution of the Internet Control Agent within the different Intranet devices. Practically a Web page is elaborated within the server  which summarises the different devices which were discovered by the server , and for which the IT Administrator may decide, or not, to include within the broadcast and diffusion of the Internet Control Agents. In one embodiment, the Web server may use a Graphical User Interface (G.U.I) on console  for the purpose of providing a wide and comprehensive description of the topology of the network, of the different PC clients comprised within the network. When the Graphical User Interface is being started, the IT administrator is being prompted to select the particular devices within the Intranet which will be managed by the external server .","Further to the selection of the particular devices which will be covered by the control process of external Web server , the downloading and the installation of the Internet Control Agent is launched within the selected devices of the Intranet. In the embodiment based on Server Appliance , the installation file of the Internet Control Agents may be advantageously loaded within that Appliance  so as to reduce the data exchanged with the Web.","The installation of the Internet Control Agent can then be executed in step  in the appropriate devices, in accordance with the selection made by the IT administrator, and registered within database . It should be noticed that the latter may vary in accordance with the type of the machine being considered but, generally, all devices may receive a communication agent, and particularly the printers.","The following description will be more particularly elaborated for the case of the computers and servers. Clearly there is provided an extensive control possibilities to the computers attached to the Intranet network.","Different modes of operation may be used for achieving the installation of the Internet Control Agent in the devices.","In one embodiment, the installation package of the Agent can be enclosed within one electronic mail and transmitted to the different users.","In a second embodiment the installation may be achieved by means of a login script, i.e. an executable file which is executed as soon as the user of the devices is login on. That login script is elaborated by the server  by means of the information stored within database . The login script is embedded into a Web page constructed by server , and which the IT administrator may access from his console . He may then installs that login script on the Primary Domain Controller (PDC) of the network so that the latter is automatically executed when the users are login in.","It will be more particularly described a third embodiment which may take a great advantage of the NT Service Control Manager existing in the NT type machines. The NT SCM is deviated from the usual use for the purpose of providing an automatic execution and installation of any executable file located in a shared resource. The installation package file of the Internet Control Agent installation package includes all the files which are normally required for a local setup procedure, as well as the executable file\u2014the setup.exe\u2014which causes the launching of the installation procedure. That file has to support the unattended mode, which is that generally involved when the user types the \u201c-s\u201d switch on the command line (unattended setup).","In addition to those files, the installation package of the Agent includes an additional description file, hereinafter referred to as package.ini file. Package.ini file may take the form of a text file and contains the description of the installation files which are involved in the setup procedure. It particularly includes the precise list of the installation files required for a local setup procedure, plus an additional line carrying the command which is required for starting the local setup procedure.","The selection of one device by the IT administrator in step , there is Web server in a Web page created by server , causes the downloading in step  of the corresponding installation package, as well as a particular\u2014so-called pusher.exe executable file in console , which is then executed.","As shown in , the process which is executed by pusher.exe executable file causes, in step , the installation of a new NT service on one client, for instance computer , hereinafter referred to as pushservice.exe. This is achieved by means of the use of the NT Service Control Manager (SCM) of computer , thanks to the administrative rights given to IT administrator on that particular machine. As known by the skilled man, Microsoft NT\u2122 and Microsoft 2000\u2122 supports an application type known as a service which takes the form of a .exe or .dll, for instance. A service application conforms to the interface rules of the SCM. It can be started automatically at system boot, or by a user through the Service Control panel applet, or by an application which uses the service functions included in the Microsoft\u2122 WIN32\u2122 Application Programming Interface (API). The process which is described below takes advantage of the NT service which is generally used for local files, drivers, anti-virus programs, Internet Protocol and TCP\/IP drivers, and hard disk drive compression mechanisms. The process which is described herein after however deviates the normal use of the standard NT service for the purpose of executing a remote executable file located within a shared resources on the Intranet, for instance Server Appliance , but which can also be downloaded from the Web. Once it has been registered and installed as a service, the executable file can be started on a computer without being present on the hard disk drive of the latter. It should be noticed that the particular executable file\u2014herein referred to as the pushservice.exe\u2014is compiled in accordance with the prescriptions applying to the services, and which are defined in the Microsoft specifications. Particularly, the entry point of that executable file is not referring to WINMAIN as for the usual standard executable files, but refers to a service entry which WINDOWS NT decodes as such.","Once registered by the NT Service Control Manager, the NT service receives the following reference:\n\n\\\\server\\share\\pushservice.exe\n","A reference to the package software of the Internet Control Agent which is located within a shared resources, is used as an option of the command line, e.g.\n\n\\\\server\\share\\package.ini\n","When it is installed, the new NT service is started by the IT administrator controlling the Web page displayed by server , in step . The starting of the NT service complies with the usual NT Service Control Manager procedures. That causes the instantiation of the service into the memory of the computer client and starts its execution. The new NT service becomes available and is automatically executed within that computer, what results in the identification of the software package which is to be installed, ie the Internet Control Agent. This is achieved by means of the extraction of the particular command line which has been associated to the new service by the NT Service Control Manager, as explained above. The process particularly uses the option of the command line defined above, and which contains a reference to the package.ini description file. The opening of the package.ini description file causes the identification of the different files which are to be installed on computer , and thus their downloading on a predetermined directory on the hard disk drive of the latter, as illustrated in step . As known by the skilled man this can be achieved by means of a path relative to the pushservice.exe path.","When all the installation files have been copied onto the hard disk drive of computer , the process executed by pushservice.exe causes the execution of the command which is defined at the last line of the package.ini description file, in step , and finally launches the unattended setup procedure of the particular application which is concerned. At the completion of the NT service, the latter uninstalls itself in step  and stops in accordance with the normal NT service rules.","Whatever the particular mechanism which is used for deploying the Internet Control Agent within the different devices, it will now be described how the complete control of the Intranet can be achieved by external server , even when the Intranet is secured by a firewall mechanism.","The control process will be particularly described in reference to FIG. .","Once installed, the Agent initiates a connection in step  to the Web server via the HTTPS protocol. It issues a POST request, with the Customer Identifier assigned by the Web server  during step , and the system name.","Then, in step , the Agent receives and stores the Node Identifier (NID) which is assigned by Web server . The NID is unique and will be used for identifying each device and securing the control process.","Once the NID has been assigned, the agent can then receive a set of specific instructions in step  which is decoded and used for controlling the particular management, maintenance and update of the considered network devices. In one embodiment, the set of instructions is embedded within a TEXT file or a XML file, and includes the following commands:","The set of instructions, once received, can be executed in step  by the Internet Control Agent for the purpose of a wide variety of different management tasks. Indeed, a specific set of commands has been designed for that control of the network through the external Web server . These particularly include the following commands useful for computers and servers.","A DOWNLOAD command is used for controlling Agent in order to download files connected in shared resources on the network.","An EXECUTE command is used for the purpose of executing an NT command line, ie an executable local file or existing in a share resource. Two parameters are associated to that command. A first one corresponds to a maximum time for execution and watchdog mechanism for the purpose of preventing an infinite wait in the case of an error condition occurrence. A second parameter is used for defining the name of a report file which the Agent post back to server  via a HTTPS request. In one embodiment, the report file takes the form of a TXT file or a XML file.","A SLEEP command is used for scheduling the next execution of the Internet Control Agent for the purpose of the execution of a new set of commands or instructions.","An AUTO-UPDATE command is used for controlling the update of the kernel of the Internet Control Agent installed within the considered device. For this purpose, a temporary service is being launched in NT type machines, which receives, as an option, the name of the file which is to be installed, the name of the previous which is to be uninstalled, and the name of the process which is to be stopped. Such a result may also been obtained with the use of a Dynamic Link Library (DLL) file in Windows\u2122 9x machines.","An UNINSTALL command is used for controlling the un installation of the Agent within the considered device.","By using the set of commands described, there is provided an effective way for controlling independently the different devices which are connected to the Intranet network. By taking advantage of the HTTP or HTTPS protocol which is well accepted through the proxy and the firewall mechanisms, there is permitted to take the control of the Intranet network and remotely manages its different devices.","Should the Web service, in accordance with the information loaded within database , controls the installation of a specific software package within device  for instance, the Web server transmits the following set of commands to that device.","1. download http:\/\/portal.hp.com\/_user.cab .\\_user.cab","2. download http:\/\/portal.hp.com\/_isdel.exe .\\_isdel.exe","3. download http:\/\/portal.hp.com\/setup.exe .\\setup.exe","4. execute .\\setup.exe -s","It will now be explained how the process can be used in combination with a software executable which is dedicated to the gathering of important technical information about the hardware and the software of a considered machine. To achieve this, Internet Control Agent controls the downloading and the installation of a specific executable file\u2014a so called sysinfo.exe executable file\u2014for the purpose of collecting data representative of the hardware of the device. That particular file, once loaded, accesses the internal technical parameters which are loaded into the BIOS layer. Once installed, the sysinfo.exe executable file extracts system information directly from the SMBIOS tables, or interrogates the Desktop Management Interface (DMI), or Windows Management Interface (WMI) as known from Microsoft. As known by the skilled man, the DMI and WMI interfaces are Application Programming Interfaces (API) that consists of a set of routines that are called for accessing the information relevant to the host machine. Basic information relating to the DMI programming interface can be found at the address www.dmtf.org\/.","By using the DMI or WMI interfaces, or by accessing directly the SMBIOS level, the sysinfo.exe executable file accesses the different tables contained in the System Management BIOS (SMBIOS) for the purpose of reporting comprehensive information regarding the user's configuration, and required for completing a request for transaction. Such information includes the system manufacturer, model, version and serial number, the type and speed of processors, the type of chipset, the number, manufacturer and size of hard disk drives, the particular graphic card being used, the memory size and speed, the serial number of the display, the reference of the operating system and so on.","Once the different relevant parameters are gathered from the DMI or WMI interface, the Internet Control Agent compiles the comprehensive information which has been gathered into a report file, which report is transmitted through external server  and stored within database  for the purpose of enhancing the control over the different devices. In the preferred embodiment, the local agent issues a request for transaction which may be embedded into a HTTP POST request which is recognised at every level, and particularly by every Proxy.","While the auto-discovery mechanism permits the comprehensive description of the Intranet, for the purpose of storing the corresponding information within database , the IT administrator still keeps the possibility to manually register computers which are outside the firewall and which can not be normally discovered by the mechanism described above. This is the case of portable computers which may be registered independently. However, it is clear that, once registered, the portable computer may be fitted with the Internet Control Agent which may communicate with server  and receives the sets of instructions as for the other devices within the Intranet. The portables computers therefore receive the possibility of an automatic maintenance and update capabilities."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"DESCRIPTION OF THE DRAWINGS","p":["An embodiment of the invention will now be described, by way of example only, with reference to the accompanying drawings, wherein:",{"@attributes":{"id":"p-0021","num":"0027"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0022","num":"0028"},"figref":"FIG. 2","b":"1"},{"@attributes":{"id":"p-0023","num":"0029"},"figref":"FIG. 3","b":"1"},{"@attributes":{"id":"p-0024","num":"0030"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0025","num":"0031"},"figref":"FIG. 5"}]},"DETDESC":[{},{}]}
