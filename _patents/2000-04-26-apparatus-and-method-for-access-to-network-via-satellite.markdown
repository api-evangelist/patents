---
title: Apparatus and method for access to network via satellite
abstract: A system in which a personal computer sends messages into a TCP/IP network using a conventional dial-up link and downloads data from the TCP/IP network using a high-speed one-way satellite link. A preferred embodiment uses a conventional SLIP provider to connect to the TCP/IP network and uses a commercial software TCP/IP package that has a standard driver interface. A spoofing protocol compensates for the long propagation delays inherent to satellite communication.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=06839770&OS=06839770&RS=06839770
owner: Hughes Electronics Corporation
number: 06839770
owner_city: El Segundo
owner_country: US
publication_date: 20000426
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"p":["This application is a division of application Ser. No. 09\/204,436 filed Dec. 3, 1998, which is a division of U.S. Ser. No. 08\/901,152 filed Jul. 28, 1997, U.S. Pat. No. 5,995,725, which is a continuation of application Ser. No. 08\/257,670 filed Jun. 8, 1994, now abandoned.","This application relates to a computer network and, more specifically, to a method and apparatus for allowing both high-speed and regular-speed access to a computer network. The Internet is an example of a TCP\/IP network. The Internet has over 10 million users. Conventionally, access to the Internet is achieved using a slow, inexpensive method, such as a terrestrial dial-up modem using a protocol such as SLIP (Serial Line IP), PPP, or by using a fast, more expensive method, such as a switched 56 Kbps, frame relay, ISDN (Integrated Services Digital Network), or T1.","Users generally want to receive (download) large amounts of data from networks such as the Internet. Thus, it is desirable to have a one-way link that is used only for downloading information from the network. A typical user will receive much more data from, the network than he sends. Thus, it is desirable that the one-way link be able to carry large amounts of data very quickly. What is, needed is a high bandwidth one-way link that is used only for downloading information, while using a slower one-way link to send data into the network.","Currently, not all users have access to high speed links to networks. Because it will take a long time to connect all users to networks such as the Internet via physical high-speed lines, such as fiber optics lines, it is desirable to implement some type of high-speed line that uses the existing infrastructure.","Certain types of fast network links have long propagation delays. For example, a link may be transmitting information at 10 Mbps, but it may take hundreds of milliseconds for a given piece of information to travel between a source and a destination on the network. In addition, for even fast low-density links, a slow speed return-link may increase the round trip propagation time, and thus limit throughput. The TCP\/IP protocol, as commonly implemented, is not designed to operate over fast links with long propagation delays. Thus, it is desirable to take the propagations delay into account when sending information over such a link.","The present invention overcomes the problems and disadvantages of the prior art by allowing a user to download data using a fast one-way satellite link, while using a conventional low-speed Internet connection for data being sent into the network. The invention uses a \u201cspoofing\u201d technique to solve the problem of the long propagation delays inherent in satellite communication. In accordance with the purpose of the invention, as embodied and broadly described herein, the invention is a network system that forms a part of a network, comprising a source computer, having a link to the network; a destination computer, having a link to the network; a satellite interface between the source computer and the destination computer, wherein information passes from the source computer to the destination computer; means in the, destination computer for requesting information from the source MON computer over the network; means for receiving an information packet sent from the source computer in response to the request and for sending the information packet to the destination computer over the satellite interface; and means for sending an ACK message to the source computer in response to receipt of the information packet, wherein the ACK message appears to the source computer to have come from the destination computer.","In further accordance with the purpose of the invention, as embodied and broadly described herein, the invention is a gateway in a network system that forms a part of a TCP\/IP network, wherein the network includes a source computer having a link to the TCP\/IP network and a link to a high speed satellite interface, and a destination computer having a link to the TCP\/IP network and a link to the high speed satellite interface, the gateway comprising means for receiving an information packet sent from the source computer and for sending the information packet to the destination computer over the satellite interface; and means for sending an ACK message to the source computer in response to receipt of the information packet, wherein the ACK message appears to the source computer to have come from the destination computer.","Objects and advantages of the invention will be set forth in part in the description which follows and in part will be obvious from the description or may be learned by practice of the invention. The objects and advantages of the invention will be realized and attained by means of the elements and combinations particularly pointed out in the appended claims.","Reference will now be made in detail to the preferred embodiments of the invention, examples of which are illustrated in the accompanying drawings. Wherever possible, the same reference numbers will be used throughout the drawings to refer to the same or like parts.","a. General Overview","A preferred embodiment of the present invention uses satellite technology to implement a high-speed one way link between a user's computer and a TCP\/IP network, such as the Internet or a private TCP\/IP network. This high-speed link is used to download data from the network. The user's computer also has a conventional TCP\/IP link for sending data to the network. The invention can use various forms of high-speed, one-way links, such as satellites and cable television lines. The invention cap use various forms of low-speed networks, such as TCP\/IP networks, dialup telephones; ISDN D-channel, CPDP, and low-speed satellite paths.","The described embodiment of the present invention uses satellites to provide a high-speed one-way link. Satellites can cover large geographical areas and are insensitive to the distance between a transmitter and a receiver. In addition, satellites ark very efficient at point-to-point and broadcast applications, and are resilient and resistant to man-made disasters. Two-way satellites are expensive to use, however, because of the costs involved in purchasing and installing satellite earth station hardware. In the past, these costs have placed satellite communications outside the reach of the consumer.","The present invention allows a personal computer to receive downloaded information from the network via a satellite at a very practical cost. In the present invention, the cost of satellite communications is reduced because a one-way satellite link is used. Receive-only earth station equipment is cheaper to manufacture because it requires less electronics than send\/receive; antennae.","As is well-known in the art, communication over the Internet and similar TCP\/IP networks is achieved through a group (suite) of su protocols called Transmission Control Protocol\/Internet Protocol (TCP\/IP). The TCP\/IP protocol is described in the book \u201cInternetworking With TCP\/IP, Vol I\u201d by Douglas Comer, published by Prentice-Hall, Inc., of Englewood Cliffs, N.J., 1991, which is; incorporated by reference.","b. Hybrid TCP\/IP Access",{"@attributes":{"id":"P-00032","num":"00032"},"figref":["FIG. 1","FIG. 1"],"b":["110","130","140","150","160","110","190","130","192","170","175","180","160","110","130","140","150","128","128","1"]},"Each of hybrid terminal , SLIP provider , application server , hybrid gateway  and satellite gateway  includes a processor (not shown) that executes instructions stored in a memory (not shown). Other parts of the invention also include processors that are not discussed herein, such as I\/O processors, etc. Preferably, hybrid terminal , hybrid gateway , and satellite gateway  are implemented as personal computers including an 80386\/80486 based personal computer operating at least 33 MHz, but these elements can be implemented using any data processing system capable of performing the functions described herein. In the described embodiment, SLIP provider  is a conventional SLIP provider and application server  is any application server that can connect to the Internet  via TCP\/IP.","As shown in , hybrid terminal  preferably includes application software , driver software , a serial port  for connecting hybrid terminal  to modem , and satellite interface hardware  for connecting hybrid terminal  to satellite receiver .",{"@attributes":{"id":"P-00035","num":"00035"},"figref":"FIG. 2","b":["112","114","122","120","112","212","210","114","212","210","114","210","114"]},"As shown in , application software  also includes well-known Internet utilities, such as FTP,  and well-known user interfaces, such as Mosaic and Gopher (shown). Application software  can also include other utilities, e.g., News and Archie (not shown).","The following paragraphs describe how a request from hybrid terminal  is carried through the Internet  to application server  and how a response of application server  is carried back to the user at hybrid terminal  via the satellite link. The operation of each subsystem will be described below in detail in separate sections.","In the present invention, hybrid terminal  is given two IP addresses. One IP packet address corresponds to SLIP provider  and is assigned by a SLIP service provider. The other IP address corresponds to satellite interface  and is assigned by a hybrid service provider. IP addresses are assigned by the SLIP and satellite network managers and loaded into hybrid terminal  as part of an installation configuration of the hybrid terminal's hardware and software. These two IP addresses correspond to completely different physical networks. SLIP provider  does not \u201cknow\u201d anything about the satellite IP address or even whether the user is using the satellite service. If a host somewhere in the Internet is trying to deliver a packet to the satellite IP address by using the Internet routing scheme of routers, gateways, and ARPs (Address Resolution protocol), the only way that the packet can reach the satellite IP interface is to traverse the satellite by being routed through satellite gateway .","The following example assumes that a user at hybrid terminal  desires to send a request to a remote machine, such as application server , that is running FTP (File Transfer protocol) server software. The FTP software running on application server  receives file transfer requests and responds to them in an appropriate fashion.",{"@attributes":{"id":"P-00040","num":"00040"},"figref":["FIG. 3","FIG. 1. A"],"b":["140","110"],"ul":{"@attributes":{"id":"ul200001","list-style":"none"},"li":{"@attributes":{"id":"ul200002-li00002"},"ul":{"@attributes":{"id":"ul200002","list-style":"none"},"li":["1) Within hybrid terminal , FTP client software  generates a request and passes it to TCP\/IP software . TCP\/IP software  places the request in a TCP packet (see FIG. ). Next, the TCP packet is placed in an IP packet, having a format shown in FIG. . TCP\/IP software  places the IP packet in an Ethernet packet, as shown in , and passes the Ethernet packet to driver . This packet has a source IP address corresponding to satellite interface  and a destination IP address of application server .","2) In driver , the Ethernet header and checksum are stripped off the packet and the IP packet is encapsulated, or \u201ctunneled,\u201d inside of another IP packet and sent over serial port  to SLIP provider .  shows a format of a tunnelled packet.  shows an example of a tunnelled packet. The encapsulation adds a new IP header  in front of the original packet  with a source address corresponding to SLIP provider  and a destination address corresponding to hybrid gateway .","3) SLIP provider  receives the IP packet, analyzes the tunneling header and, thinking it is destined for hybrid gateway , uses standard Internet routing to send the packet to hybrid gateway .","4) When hybrid gateway  receives the packet, it strips off the tunneling header, revealing the true header with application server  as the destination. The packet is then sent back out into the Internet .","5) Internet routing takes the packet to application server , which replies with the requested file and addresses the reply to the request's source IP address, i.e., the IP address of the hybrid terminal's satellite interface .","6) In order to find the hybrid terminal's satellite interface , the Internet routing protocol will send the packet to the subnet containing a router\/gateway connected to hybrid gateway . When a router on the same physical network as satellite gateway  and hybrid gateway  sends out an ARP for the IP address of satellite interface  (to find a physical address of satellite interface ), hybrid gateway  responds and says \u201csend it to me.\u201d Thus, application server  and the rest of the Internet  thinks that packets sent to hybrid gateway  will reach the hybrid terminal's satellite interface.","7) Once hybrid gateway  receives a reply packet from application server , it sends it to satellite gateway . In the described embodiment, hybrid gateway  encapsulates the packet in a special packet format that is used over the satellite link and uses the satellite interface IP address to uniquely identify the satellite packet's destination. Then hybrid gateway  sends the packet over the Ethernet to satellite gateway .","8) Satellite gateway  broadcasts over the satellite links any packets it receives from hybrid gateway .","9) Driver  in hybrid terminal  that services satellite interface  scans all packets broadcast over satellite transmitter  looking for its satellite interface IP address in the header. Once it identifies one, it captures it, strips off the satellite header revealing the reply IP packet, and sends it to driver ."]}}}},"Thus, IP packets sent into Internet  are carried by the SLIP connection, while IP packets from the Internet  are carried by the satellite link. The following paragraphs describe the operation of each subsystem in more detail.","1. The Hybrid Terminal","Hybrid terminal  is the terminal with which the user interacts. Thus, hybrid terminal  includes a user interface device (not shown) such as a mouse, keyboard, etc. As shown , hybrid terminal  includes one or more application programs  (including TCP\/IP software ), and driver software , which communicates with SLIP provider  through a serial port  and modem , using a driver portion , and which communicates with satellite receiver  through a satellite interface , using a driver portion .","To TCP\/IP software , driver  appears to be an Ethernet card, although driver  is actually connected to satellite receiver  (via satellite interface ) and to SLIP provider  (via serial line  and modem ). Thus, TCP\/IP software  believes that it is communicating with a single physical network, when it is, in reality, communicating with two physical networks (the SLIP dialup network and a satellite network). Ethernet is a packet switching protocol standardized by Xerox Corporation, Intel Corporation, and Digital Equipment Corporation, which is described in \u201cThe Ethernet: A Local Area Network Data Link Layer and Physical Layer Specification,\u201dSeptember 1980, which is available from any of these three companies, and which is incorporated by reference.",{"@attributes":{"id":"P-00054","num":"00054"},"figref":["FIG. 6","FIG. 6"],"b":["114","110","1","114","210","130","122","190","140","180","120","220","114","210"]},"The following paragraphs discuss two basic functions performed by driver  (tunnelling and ARP handling) and discuss various implementation details for the described embodiment.","A. \u201cTunnelling\u201d","As discussed above, hybrid terminal  has two IP addresses associated with it: one for SLIP provider  and one for the satellite interface . Packets containing requests are sent from hybrid terminal  to application server  via the Internet , while packets containing a reply are sent back via the satellite link. Tunnelling is the method by which application server  is \u201cfooled\u201d into sending a reply to a different IP address (satellite interface ) than that of the senders (serial port ).","A packet received by driver  from the TCP\/IP software  has a source address of satellite gateway  and a destination address of application server . As shown in step  of , driver  removes the Ethernet header and checksum and encapsulates the IP header into an IP tunnelling header having a source address of SLIP provider  and a destination address of hybrid gateway  (see FIG. ). As described above, at hybrid gateway , the tunnelling header is removed and the packet is sent back into the Internet  to be sent to application server .","When forming a tunnelling header, driver  copies all the values from the old header into the new one with the following exceptions. The source and destination addresses of the tunnelling header change, as described above. In addition, a total packet length field  is changed to contain the contents of length field  plus the length of the tunnelling header. Lastly, the driver  recalculates checksum  of the tunnelling header because some of the fields have changed.","B. ARP Handling","ARP (Address Resolution Protocol) is used by TCP\/IP to dynamically bind a physical address, such as an Ethernet address, to an IP address. When TCP\/IP finds an IP address for which it does not know a physical address, TCP\/IP broadcasts an ARP packet to all nodes, expecting a response that tells TCP\/IP what physical, address corresponds to the IP address.","During initialization, driver  declares to TCP\/IP software  that driver  is an Ethernet card to ensure that the packets that TCP\/IP package sends are Ethernet packets and that the TCP\/IP package will be prepared to receive packets at a high-rate of speed. As shown in step  of , when driver  detects that TCP\/IP has sent an ARP packet, driver  creates a physical address and sends a reply packet to TCP\/IP software . The contents of the physical address are irrelevant, because driver  strips off the Ethernet header on packets from TCP\/IP before the packets are sent to SLIP provider .","C. Other Functions","As shown in step  of , packets received by driver  from satellite receiver  (via satellite driver ) are merely passed to TCP\/IP software . The following paragraphs discuss implementation details for the described embodiment.","In a preferred embodiment, TCP\/IP software  (e.g., Frontier's SuperTCP) sends an ACK (acknowledge) for every packet it receives, even though this action is not required by the TCP\/IP protocol. In this situation, many packets compete for the slow link to SLIP provider . In TCP\/IP, the ACK scheme is cumulative. This means that when a transmitter receives an ACK stating that the receiver has received a packet with sequence number N, then the receiver has received all packets with sequence numbers up to N as well, and there is no reason why every packet needs to be ACK'ed.",{"@attributes":{"id":"P-00066","num":"00066"},"figref":["FIG. 8","FIG. 11","FIG. 11","FIG. 8"],"b":["114","110","1102","1104","1106","810","114","210","130","820","114","830","114"]},"Serial port  provides a physical connection to modem  and, through it, to the terrestrial network via a SLIP protocol as described below in connection with SLIP provider . Serial data is sent and received through an RS-232 port connector by a UART (Universal Asynchronous Receiver Transmitter), such as a U8250, which has a one byte buffer and is manufactured by National. Semiconductor, or a U16550, which has a 16 byte buffer and is also manufactured by National Semiconductor.","The invention preferably operates under the DOS operating system and Windows, but also can operate under other operating systems.","Satellite driver software  receives packets from satellite , and passes them to driver  using a DOS call. Thus, the two physical links are combined within driver  and the existence of two physical links is transparent to TCP\/IP software . Satellite driver  scans all packets transmitted over the satellite channel for a packet with a header corresponding to the IP address of the satellite interface , performs some error detection and correction on the packet, buffers the received packet, and passes the packet to driver  using a DOS call, e.g., IOCTL-output-cmd( ). Driver  copies data from satellite driver  as quickly as possible and passes it to TCP\/IP software .","As discussed above, TCP\/IP software  is fooled into thinking that it is connected to an Ethernet network that can send and receive at 10 Mbps. This concept is helpful on the receive side because data from the satellite is being received at a high rate. On the transmit side, however, modem  is not capable, sending at such a high rate. In addition, TCP\/IP software  sends Ethernet packets to driver , i.e., an IP packet is encapsulated into an Ethernet packet. Because SLIP provider  expects IP packets, driver  must strip the Ethernet header before the packet is sent to SLIP provider .","As described above in connection with , driver  also includes a transmit and receive queue. As data is received from TCP\/IP software  and received from the satellite driver , it is buffered within the queue. When the queue is full, e.g., when TCP\/IP is sending packets faster than modem  can send them, driver  drops the packets and returns an error so that TCP\/IP software  will decrease its rate of transmission.","In a first preferred embodiment, a SLIP connection is initiated with an automatic logon procedure. In another preferred embodiment, driver  executes instructions to allow a user to perform a SLIP logon manually.","Because TCP\/IP software  preferably is configured to talk to Ethernet and it is desirable to receive the largest packet size possible, driver  configures TCP\/IP so that the MTU (Maximum Transmission Unit) of the network is as large as possible, e.g., 1500 bytes. Some SLIP providers  have a smaller MTU, e.g., 512 bytes. To handle the disparity in size, driver  segments large packets received from TCP\/IP software  into segments the size of the SLIP MTU. Once a packet is segmented, it is reassembled hybrid gateway . Only the tunnelling header is copied as the header of the segments.","2. The SLIP Provider","SLIP provider  performs the function of connecting hybrid terminal  to the Internet . As described above, other protocols, such as PPP, could also be used to perform the connecting function. SLIP server  receives SLIP encoded IP packets from modem , uncodes them, and forwards them to hybrid gateway  via the Internet .","In its most basic form, SLIP provider  delimits IP packets by inserting a control character hex 0xC0 between them. To insure that a data byte is not mistaken for the control character, all outgoing data is scanned for instances of the control character, which is replaced by a two character string. The SLIP protocol is described in detail in J. Romkey, \u201cA Nonstandard for Transmission of IP Datagrams over Serial Lines: SLIP,\u201d RFC 1055, June 1988, pp. 1-6, which is incorporated by reference.","3. The Application Server","Application server  is a computer system running any combination of known application programs available on the Internet using the TCP\/IP protocol suite. For example, application server  may be transferring files to requesting users via FTP. Although hybrid terminal  actually has two IP addresses (a serial port address and an address for the satellite interface), the software executing on application server  thinks that it is receiving requests over the satellite network and sending responses over the satellite network. Hybrid terminal  is completely transparent to application server .","4. The Hybrid Gateway","Although only one hybrid terminal  is shown in , the invention can include a plurality of hybrid terminals . Preferably, all packets sent from all hybrid terminals  pass through hybrid gateway  to get untunnelled. Thus, hybrid gateway  is a potential system bottleneck. Because of this potential bottleneck, the functions of hybrid gateway  fire as simple as possible and are performed as quickly as possible. Hybrid gateway  also has good Internet connectivity to minimizing the accumulated delay caused by packets waiting to be processed by hybrid gateway .","A. Untunnelling",{"@attributes":{"id":"P-00082","num":"00082"},"figref":"FIG. 9","b":["150","1","910","150","5","150","128"]},"As described above, packets are sometimes broken into segments when they are sent in order to accommodate a small MTU SLIP provider . Packets may also be segmented as they pass through other elements of the Internet  having small MTUs. For fragmented packets, only the tunnelled header is copied into the header of each segment. Hybrid gateway  stores fragmented packets in a memory (not shown) and reassembles them in order before untunnelling the original packet and passing it to the Internet . Preferably, a \u201ctime to live\u201d value is assigned to each packet when it is sent by driver  and if all segments do not arrive before a time to live timer expires, the packet is discarded.","B. ARP Responding","Preferably, satellite gateway  is on a same physical network as hybrid gateway . As shown in step  of , when a router on the same physical network as satellite gateway  and hybrid gateway  sends out an ARP for the IP address of satellite interface  (to find a physical address of satellite interface ), hybrid gateway  responds and says \u201csend it to me.\u201d Hybrid gateway  needs to intercept packets intended for satellite interface  because it needs to encapsulate packets for satellite gateway  as follows.","C. Satellite Packetizing","The following paragraphs describe how packets travel from application server  through hybrid gateway  and to satellite gateway . The following explanation is given by way of example and is not intended to limit the scope of the present invention. As shown in step  of , hybrid gateway  encapsulates replies from application server  into a satellite packet format.  is a diagram showing a format of a satellite packet sent to satellite gateway  of  satellite packet includes the data  of an original IP packet and two headers ,  added by hybrid gateway .","Satellite gateway  expects IP packets to be encapsulated first in a special satellite packet and then within an LLC-1 IEEE 802.2 link level control, type  packet. Satellite header  identifies the downlink and contains a sequence number and the packet length. An LLC-1 header  preferably is used to send the packet to satellite gateway , in an Ethernet LAN. Hybrid gateway  prepares packets for satellite gateway  by appending headers  and  to the front of an IP packet .","The receiver in hybrid terminal  does not receive the LLC-1 header . Hybrid terminal  identifies packets intended for it by checking a least significant byte in the satellite IP address. Thus, a six byte satellite destination address is determined by reversing an order of bytes of the satellite IP address for hybrid terminal  and then padding the rest of the address with zeroes.","5. The Satellite Gateway","Satellite gateway  can include any combination of hardware and software that connects satellite transmitter  to hybrid gateway . Satellite transmitter  and satellite receiver  can be any combination of hardware and software that allows data to be transmitted by satellite transmitter  and received by satellite receiver , and to be input to hybrid terminal . For example, satellite gateway  preferably is a personal computer with a high-speed Ethernet connection to hybrid terminal . When satellite gateway  receives a packet from hybrid gateway , it sends it over the satellite link.","Satellite communication may be effected by, for example, the Personal Earth station manufactured by Hughes Network Systems Inc. In a preferred embodiment, a one-way version of the Personal Earth Station is used. Another embodiment uses a satellite communication system manufactured by Comstream. Yet another embodiment uses a system that allows hybrid terminal  to be connected directly to satellite receiver  via Hughes Network Systems' DirecPC product. The DirecPC satellite interface card is described in \u201cDirecPC, Phase A Data Sheet,\u201d dated Jun. 7, 1993, which is incorporated by reference and by the inclusion of its contents which read as follows:","\u201cDirecPC is a satellite, one-way broadcast network offering three services to the IBM compatible PC:\n\n","See FIG. .","To receive the DirecPC broadcast, a PC is equipped with a PC plug-in card and a 24 inch antenna. DirecPC uses a full Galaxy class Ku-Band transponder to provide an 11 Mbps broadcast channel. DES encryption based conditional access ensures that a receiver PC may only access data it is authorized to receive.","Section 1 PC User Perspective","The PC hardware consists of the DirecPC adapter, an antenna and a TVRO standard coaxial cable. The DirecPC adapter is a 16-bit ISA adapter providing throughput comparable to a 16-bit ISA ethernet adapter.","The software appears to the user as a set of Windows applications. The applications:\n\n","The software for a data pipe service is provided by the enterprise providing the service. Communications back to the uplink is required for billing purposes and also for Hybrid Internet access. These communications take place via the PC's dial-up AT command-set modem.","Section 2 Open Interfaces And APIs","The DirecPC architecture is open, allowing content providers complete control over their content and the user interface to their content. DirecPC provides interfaces to content providers at the uplink and Application Programming Interfaces (APIs) on the receiving PC. The specifications and APIs are available on request.","See FIG. .","Section 3 Content Providers","A content provider is an organization that supplies the data sent over the DirecPC system. A content provider can be categorized as being either a:\n\n","DirecPC supports multiple content providers of both kinds.","Section 4 DirecPC Package Distribution","The DirecPC system allows data packages to be distributed and purchased. The term \u201cpackage\u201d refers to any data (including electronic documents, multi-media data, software packages, games, etc.) which can take the form of a group of PC files.","To prepare a package for transmission, a publisher merges the package's files into a single file using the appropriate utility (e.g. PKZIP or ARJ) and loads the package into the uplink using an off-the-shelf file transfer mechanism (e.g. TCP\/IP's FTP, floppy-disk, CD-ROM, X-Modem, etc.). Scheduling, pricing and conditional access restrictions can be performed either manually or automatically under publisher control when the package is loaded into the uplink.","DirecPC's conditional access mechanism ensures that a user may only receive authorized packages. As part of initial registration, the user is provided a credit limit. The PC locally maintains a credit account. When the user selects a package for reception, the PC records the transaction and debits the account. A log of all package receptions is maintained on the PC's hard disk and can be browsed by the graphical front-end.","On uplink operator command, when the local credit limit is exceeded or when the user has purchased a certain number of packages, the PC makes a dial-up call to the DirecPC billing service. The call reports the billing information as well as usage information of packages received.","The usage information is used to provide feedback for future scheduling of packages. The reports given to publishers include for each package reception, the name, address etc. of the recipient, the ID of the package and when package delivery took place.","A software package may either be transmitted on a scheduled basis or on-demand. Scheduled transfers are perfect for:\n\n","Phase A package delivery allows a single transmission at any given time. The rate of transmission is settable under operator control at speeds up to 2 Mbits\/sec. Support for simultaneous transmissions will be provided in a subsequent release of DirecPC software.","A software package may be transmitted on-demand in the gaps between scheduled transmissions. Such a transfer delivers the information more quickly to the requesting PC, but at greater cost as the package is not broadcast. A PC uses its modem to request the package.","DirecPC's low bit error rate and high availability ensure that packages are reliably delivered with one transmission. For even grater reliability, each package may be set to employ one or more of the following methods to ensure fail-safe delivery:\n\n","DirecPC's data pipe services are modelled on Local Area Network multi-cast transmission. The data pipe provider passes 802.2 LLC1 Token-Ring or Ethernet multi-cast packets to the uplink. This allows off-the-shelf bridges and routers to be used to support a terrestrial backhaul. It also allows some LAN based applications to operate across the spacelink with little or no modification. The uplink relays these packets across the spacelink. The DirecPC driver passes received packets to the applications. To prevent unauthorized access, each multi-cast address is encrypted under a different key. The DirecPC device driver API allows applications to designate which multi-cast addresses are of interest. Hardware filtering in the DirecPC adapter allows the reception of any 100 different multi-cast addresses.","DirecPC network management allocates to each service provider:\n\n","Hybrid Internet access allows a PC high-speed (over 100 Kbps) access to the Internet. An HNS (Hughes Network Systems) provided NDIS device driver operates with an off-the-shelf TCP\/IP package. Reception from the Internet takes place via DirecPC. Transmission into the Internet takes place via a dial-up SLIP connection into the uplink. Hybrid Internet Access allows operation of all the standard Internet applications including SMTP EMAIL, NNTP Usenet News, FTP, GOPHER and Mosaic. As part of initial registration, each receiving PC is provided a permanently assigned IP address.","Hybrid Internet Access is the result of joint development by HNS and the University of Maryland funded in part by a MIPs grant. Continuing development will increase performance and allow receive-only reception of Usenet News.","Section 7 Performance Specifications","Averaged across a whole year, each DirecPC receiver should be expected to have a BER less than 10E\u221210 more than 99.5% of the time where a single bit error causes the loss of an entire packet.","Section 8 User Characteristics","The receiver (antenna, cabling and PC plug-in card) is intended to be self-installable by consumers and small business. In cases where self-installation is not desirable, the DirecPC adapter will be installed by the customer and the antenna and cable will be installed by the HNS VSAT installers. The customer uses diagnostic software provided with the adapter to ensure that the PC as a whole is ready for the antenna to be installed.","Maintenance will be performed either by the user swapping components (DirecPC adapter, LNB, etc. with telephone support). HNS's nationwide VSAT field-service network may also be contracted for.","At the downlink, satellite receiver  includes a 0.6 meter receive-only antenna receiving HDLC encapsulated LAN packets. Satellite interface  includes rate \u2154 Viterbi\/Reed-Solomon concatenated forward error correction.","Although only one hybrid terminal  and one application server  are shown in , the invention car, include a plurality of hybrid terminals  and\/or a plurality of application servers . Preferably, all packets sent from all application servers  to a hybrid interface  pass through satellite gateway . Thus, satellite gateway  is a potential system bottleneck. Because of this potential bottleneck, the functions of satellite gateway  are as simple as possible and are performed as quickly as possible.","c. Protocol Spoofing","TCP\/IP protocol specifies that only a predetermined number of packets can be outstanding during transmission, i.e., that only a limited number of packets can be sent before an ACK (acknowledgment) is received. The high bandwidth and long delays incurred in sending packets to an orbiting satellite and back means that at any given time, a lot of packets are \u201cin the pipe\u201d between transmitter and receiver.","When using conventional TCP\/IP protocol, application server  sends a predetermined number of packets in accordance with a predetermined window size, and then waits to receive ACKs over the modem link before sending additional packets. The purpose of windowing is to limit a number of packets that must be re-sent if no ACK is received and to provide flow control, e.g., to prevent sending packets faster than they can be received. The packets that have not been ACK'ed are stored in a memory so that they can be re-sent if no ACK is received.","In a preferred embodiment of the present invention, hybrid gateway  \u201cspoofs\u201d application server  to improve the throughput over the satellite link. Specifically, hybrid gateway  sends an ACK to application server , even though a corresponding packet may not have been received by hybrid terminal  via the satellite at the time.",{"@attributes":{"id":"P-00149","num":"00149"},"figref":["FIG. 12","FIG. 12","FIG. 12"],"b":["140","150","110","140","150","150","140","150","110","110","150","150","110"]},"FIGS. () through () are flowcharts of steps performed by hybrid gateway  of  during protocol spoofing. In step  of FIG. (), hybrid gateway  receives a packet from application server  indicating that a new connection is being formed between application server  and hybrid terminal . In step , hybrid gateway  sets up a queue or similar data structure in memory to save un-ACK'ed packets for the new connection. FIG. () show corresponding steps performed by hybrid a gateway  when the connection is closed. Hybrid gateway  receives a packet indicating the closure in step  and deletes the queue and saved values for the connection in step .","In step  of FIG. (), hybrid gateway  fails to receive an ACK for a packet number X from hybrid terminal  before an end of a predetermined timeout period. Hybrid gateway  maintains a timer for each un-ACK'ed packet. At the end of the predetermined period, hybrid gateway  retransmits a packet corresponding to the expired timer. In step , hybrid gateway  re-sends packet number X, which it previously saved in the memory queue for this connection (see FIG. () below).","In step  of FIG. (), hybrid gateway  receives a packet from application server . In step , hybrid gateway  sends the received packet to satellite gateway , where it is transmitted over the satellite link, and saves the packet in case it needs to be retransmitted (see FIG. ()). Hybrid gate-way  then creates an ACK packet to send to application server  in step . The created ACK packet incorporates a format shown in FIG. . Hybrid gateway  creates an ACK number for field . The ACK number is determined as follows:","Hybrid gateway  saves the following information for each connection:\n\n","When hybrid gateway  inserts the ACK number in the packet, it also calculates the packet's checksum .","In step  of FIG. (), hybrid gateway  receives all ACK packet over the modem link from hybrid terminal . In step  hybrid gateway  removes from the queue the packet for which the ACK was received. Because an ACK was received, the packet does not need to be re-sent. In the TCP\/IP protocol, a packet containing an ACK may or may not contain data. Hybrid gateway  edits the received packet to replace the packet's ACK; number  with a \u201cspoofed\u201d ACK number in step . The spoofed ACK number is determined in the same way as the ACK number in step  of FIG. (). When hybrid gateway  substitutes the spoofed ACK number  in the packet, it also recalculates the packet's checksum  in step .","In step , hybrid gateway  forwards the received ACK packet to application server . Application server  may simply disregard the packet if it contains an ACK and no data another embodiment, hybrid gateway  simply discards a packet received from hybrid terminal  that contains an ACK, but no data.","If the connection goes down, either explicitly or after a predetermined period of time, hybrid gateway  deletes the saved packets for the connection.","d. Summary","In summary, the present invention allows a personal computer to send messages into the Internet using a conventional dial-up link and to download data from the Internet using a high-speed one-way satellite link. In a preferred embodiment, the invention uses a conventional SLIP provider to connect to the Internet and uses a commercial software TCP\/IP package that has a standard driver interface. A spoofing protocol compensates for the long propagation delays inherent to satellite communication.","Other embodiments will be apparent to those skilled in the art from consideration of the specification and practice of the invention disclosed herein. It is intended that the specification and examples be considered as exemplary only, with a true scope of the invention being indicated by the following claims."],"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS"],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The accompanying drawings, which are incorporated in and constitute a part of this specification, illustrate several embodiments of the invention and, together with the description, serve to explain the principles of the invention.",{"@attributes":{"id":"P-00011","num":"00011"},"figref":"FIG. 1"},{"@attributes":{"id":"P-00012","num":"00012"},"figref":["FIG. 2","FIG. 1"]},{"@attributes":{"id":"P-00013","num":"00013"},"figref":"FIG. 3"},{"@attributes":{"id":"P-00014","num":"00014"},"figref":"FIG. 4"},{"@attributes":{"id":"P-00015","num":"00015"},"figref":"FIG. 5"},{"@attributes":{"id":"P-00016","num":"00016"},"figref":["FIG. 6","FIG. 1"]},{"@attributes":{"id":"P-00017","num":"00017"},"figref":"FIG. 7"},{"@attributes":{"id":"P-00018","num":"00018"},"figref":["FIG. 8","FIG. 1"]},{"@attributes":{"id":"P-00019","num":"00019"},"figref":["FIG. 9","FIG. 1"]},{"@attributes":{"id":"P-00020","num":"00020"},"figref":["FIG. 10","FIG. 1"]},{"@attributes":{"id":"P-00021","num":"00021"},"figref":"FIG. 11"},{"@attributes":{"id":"P-00022","num":"00022"},"figref":"FIG. 12"},"FIGS. () through () are flowcharts of steps performed by the hybrid gateway of FIG. .",{"@attributes":{"id":"P-00024","num":"00024"},"figref":"FIGS. 14 and 15"}]},"DETDESC":[{},{}]}
