---
title: System and method for management of data replication
abstract: This invention is a system and method for managing replication of data in a data storage environment by grouping logical devices. The system is enabled for configuring, monitoring, and controlling replication processes in accordance with a replication policy that is particularly useful when combined with grouping of logical devices used in replication. The invention is useful for replicating essentially an entire copy of a production-level database such that the copy may be used essentially as the production-level database itself.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07290017&OS=07290017&RS=07290017
owner: EMC Corporation
number: 07290017
owner_city: Hopkinton
owner_country: US
publication_date: 20010920
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"p":["A portion of the disclosure of this patent document contains command formats and other computer language listings, all of which are subject to copyright protection. The copyright owner, EMC Corporation, has no objection to the facsimile reproduction by anyone of the patent document or the patent disclosure, as it appears in the Patent and Trademark Office patent file or records, but otherwise reserves all copyright rights whatsoever.","The invention relates generally to management of data replication in a data storage environment, and more particularly to a system and method for management of devices and data associated with data replication across a plurality of storage devices.","As is known in the art, computer systems generally include a central processing unit (CPU), a memory subsystem, and a data storage subsystem. According to a network or enterprise model of the computer system, the data storage system associated with or in addition to a local computer system, may include a large number of independent storage devices, typically disks housed in a single enclosure or cabinet. This array of storage devices is typically connected to several computers or host processors over a network or via dedicated cabling. Such a model allows for the centralization of data that is available to many users but creates a critical hub for operations.","Recently, disk redundancy has evolved as an alternative or complement to historical backups of the information stored on this critical hub. Generally speaking, in a redundant system having at least two storage devices, such as disk storage devices, data is copied or replicated and stored in more than one place. This allows the data to be recovered if one storage device becomes disabled.","In a basic approach, a first disk storage device stores the data and a second disk storage device stores a mirror image of that data. Whenever a data transfer is made to the first disk storage device, the data is also transferred to the second disk storage device. Typically, separate controllers and paths interconnect the two disk storage devices to the remainder of the computer system.","The concept of disk redundancy has been extended to environments wherein disks targeted for copying and storage of information are located remote to the source or primary disk. Remote redundancy provides further protection for data integrity because if a disaster or other unfortunate event renders the primary data unusable the remotely located target is much more likely to be unaffected than locally located disks.","Such redundancy may also be useful for reasons other than data backup. Uses include creating test environments with production data, or even creating alternative production sites for use while the primary production site is not available.","It is clear that there are many advantages gained by replicating data from primary or source disks to secondary or target disks. On the other hand, as the number of places used for data replication grows the complexity inherently increases. As the complexity increases the cost and problems of managing the data and associated devices grows and typically in an explosive fashion. The problem is exacerbated by the increasing difficulty of finding skilled information technology professionals, who are in short supply but ample demand.","What is needed is a tool that allows for adequate management of multiple devices used for data replication and the data itself but while maintaining ease of use and not requiring high degrees of experience and knowledge regarding information technology. Further it would be an advantage if such an easy to use management tool could allow for replication of entire application software and associated data, particularly with regard to databases which are ubiquitous and critical in major commercial environments.","The present invention is a system and method for management of data replication in a data storage environment. It is useful for managing replication of data in a data storage environment by grouping logical devices. The system is enabled for configuring, monitoring, and controlling replication processes in accordance with a replication policy that is particularly useful when combined with grouping of logical devices used in replication.","In another embodiment, the invention is useful for replicating essentially an entire copy of a production-level database such that the copy may be used essentially as the production-level database itself.","The methods and apparatus of the present invention are intended for use in data storage systems, such as the Symmetrix Integrated Cache Disk Array system available from EMC Corporation of Hopkinton, Mass. Specifically, this invention is directed to methods and apparatus for use in systems of this type that include transferring a mirrored set of data from a standard device to a redundant device for use in applications such as backup or error recovery, but which is not limited to such applications. The present invention addresses a problem of managing operations when one or more redundant devices are used and one or more of such devices may be remotely located from the standard device.","The methods and apparatus of this invention may take the form, at least partially, of program code (i.e., instructions) embodied in tangible media, such as floppy diskettes, CD-ROMs, hard drives, random access or read only-memory, or any other machine-readable storage medium. When the program code is loaded into and executed by a machine, such as a computer, the machine becomes an apparatus for practicing the invention. The methods and apparatus of the present invention may also be embodied in the form of program code that is transmitted over some transmission medium, such as over electrical wiring or cabling, through fiber optics, or via any other form of transmission. And may be implemented such that herein, when the program code is received and loaded into and executed by a machine, such as a computer, the machine becomes an apparatus for practicing the invention. When implemented on one or more general-purpose processors, the program code combines with such a processor to provide a unique apparatus that operates analogously to specific logic circuits.","The logic for carrying out the method is embodied as part of the system described below beginning with reference to , and which is useful for carrying out a method described with reference to  below. For purposes of illustrating the present invention, the invention is described as embodied in a specific configuration and using special logical arrangements shown in , but one skilled in the art will appreciate that the device is not limited to the specific configuration but rather only by the claims included with this specification.","Referring now to , reference is now made to an environment in which the invention is particularly useful and includes a local system  and remote systems -. One skilled in the art will recognize that the invention is useful with any number of remote systems (including only one) but two are shown for simplicity and convenience. Local and remote systems each include, respectively, a data storage system  (also referred to as \u201csource\u201d or \u201cprimary\u201d system) and remote data storage systems -(also referred to as \u201ctarget\u201d or \u201csecondary\u201d system). Each of these respective data storage systems  and -are in a preferred embodiment each Symmetrix Integrated Cache Disk Arrays available from EMC Corporation of Hopkinton, Mass. Such data storage systems and their implementations are fully described in U.S. Pat. No. 6,101,497 issued Aug. 8, 2000, and also in U.S. Pat. No. 5,206,939 issued Apr. 27, 1993, each of which is assigned to EMC the assignee of this invention and each of which is hereby incorporated by reference. Consequently, the following discussion makes only general references to the operation of such systems.","For purposes of this invention it is sufficient to understand that the remote systems -have mirrored devices that normally act as a mirror of the local system  on a volume-by-volume basis and that the volumes can by physical volumes, although logical volumes are preferred. Devices and volumes in a logical sense are also used interchangeably throughout. Note also that throughout this document, like symbols and identical numbers represent like and identical elements in the Figures.","Although the invention is particularly useful in an environment employing a local and remote data storage system, it will become apparent upon reading this specification, the invention is also useful in a local system itself using replication to a local volume. In a preferred embodiment such a local volume is denoted as a business continuance volume (BCV) is employed (). Such a local system which employs mirroring for allowing access to production volumes while performing backup is also described in the '497 patent incorporated herein. Also, the invention is useful in an environment that employs local redundant volumes such as BCV's while also employing redundant remote volumes which themselves may be replicated locally as BCV's that are synchronized with the redundant remote volumes on the remote system itself.",{"@attributes":{"id":"p-0042","num":"0041"},"figref":["FIG. 2","FIG. 3"],"b":["119","149","224","226","117","120","122","113"],"i":["a","b"]},"Returning again to , an internet network cloud  interconnects the local system , remote systems -, DRM graphical user interface units (GUI) , DRM Agents , and DRM Server . The physical separation between the local system  and the remote systems -may be hundreds or thousands of kilometers, since it may via the internet. Each system , , and has at least one internet protocal (IP) communication line  over which communications are directed to the internet. Each system has a remote gateway  which essentially re-arranges data into data packets in accordance with the internet protocol. A high speed path  such as ESCON or Fibre Channel provides a communication link between each data storage system and the respective gateway.",{"@attributes":{"id":"p-0044","num":"0043"},"figref":"FIG. 1","b":["119","113","113","149","115","116"],"i":["a","b"]},"A preferred structure of the Agent, User Interface, and Server architectural relationship is shown in a simplified schematic block diagram in . Each Agent and Server in a preferred embodiment comprises software, such as C++ code stored and running in a digital computer, and which may be included in whole or in part on a computer readable medium such as medium , which could also contain in whole or part the code for the GUI. The GUI  that is preferably IP-based, e.g. via a Java written code is connected via IP line  to the DRM Server  through Java-based code. The DRM Server is connected via IP line  to one or more DRM Agents , which each communicate through an IP-based interface -IP (such as Java program code) and to each Data Storage System by including an API-based interface -API to the API  in each such Data Storage System.","Referring again to , the local system  and the remote systems -includes an Application Server  that may operate an application such as an Oracle database. Each Application Server  is in communication with each respective Data Storage System that is located within the same local or remote system through a high-speed computer interface , e.g., the well-known Small Computer System Interface (SCSI). Each Application Server is also linked to each respective DRM Agent within its similar realm through such a SCSI interface. The Application Server may be at least a part of a well-known computer, such as a personal computer.","The local system  and remote systems -comprise major components including data storage facilities  and -, respectively, which each have multiple data storage devices or data stores, and each of which are represented in whole or part as logical volumes, such as the BCV devices discussed above. In a preferred embodiment the storage devices are disk storage devices arranged in a array, such as that available with the Symmetrix Integrated Cache Disk Array from EMC of Hopkinton, Mass.","The host or computer adapter  provides communications between the DRM Agents  and the device adapters (DA)  and provide pathways between system memory (not shown, but conventional electronic cache memory) and the storage devices. In a preferred embodiment, a Remote Data Facility Adapter (not shown but discussed in incorporated '497 patent) as part of each Data Storage System provides access to the DRM Remote Gateways and provides Local System  access to the storage devices on the Remote Systems -and with the assistance of the Agents for managing replication.","Logic for carrying out the methods of this invention are preferably included as part of the DRM Agents, the Server, and the GUI but one skilled in the computer arts will recognize that the logic, which may be implemented interchangeably as hardware or software may be implemented in various fashions in accordance with the teachings herein.","Generally speaking, the local system  operates in response to commands from one or more computers, such as the DRM Agent , that a connected host or Computer Adapter  receives. The computer adapter transfers commands to a command buffer that is part of the data storage system's memory. The command buffer stores data structures and write requests that the DA  generates. The device adapter responds by effecting a corresponding operation using the information in a command buffer and then initiates a data operation.","Examples of the use of logical devices in the preferred environment that are sometimes referred to as mirrors because they are used for replication and often including duplication is now given in . The invention is useful with any type of mirroring devices for managing replication, but the preferred mirroring devices are available from EMC in association with a Symmetrix Data Storage System and are described in the incorporated '497 patent.",{"@attributes":{"id":"p-0052","num":"0051"},"figref":"FIGS. 4A-E","b":["113","126","221","222"]},"In , a storage unit , or -(preferably an EMC Symmetrix) is represented as comprising two disk volumes that are mirrors, denoted as M and M respectively. They are an M volume and an M volume . Following this example configuration, a third storage volume  comprises a BCV device . In this particular example, the M and M devices  and  can actually comprise multiple physical disks as might be incorporated in a RAID-5 redundancy. In such an event the BCV volume would also comprise multiple disks so that the BCV device could act as a mirror. Generally each mirror volume and the BCV device will be on physical disk drives that connect to separate device or disk adapters, as known in the art.","Once the shown relationship is established, the Agent  can issue a number of commands to ESTABLISH the BCV device  as another mirror (), to SPLIT the BCV device  as a mirror and re-establish a data transfer path with the volume , () to RE-ESTABLISH the BCV device as a mirror  and to restore data from the BCV device  when it operates as a mirror synchronized to the storage devices and (). Each of these operations is described in detail in the incorporated '497 reference, but are briefly explained now for the sake of completeness.","In the example configuration, the ESTABLISH command pairs BCV device  to standard device M as the next available mirror M. Then all tracks (full volume) are copied from the standard device M to the BCV device. On issuance of the SPLIT command following the ESTABLISH command, the established standard\/BCV pair (\/) are broken apart and the BCV  becomes available to its original host address.","Shown in , a RE-ESTABLISH command is issued by Agent  to resynchronize the previously SPLIT standard\/BCV pair by performing effectively an incremental ESTABLISH. Under operation of this command only updated tracks from the standard to the BCV device are copied and any BCV tracks that were changed are refreshed. The BCV device is not available to its original host address until SPLIT again. In a normal environment, once the volumes are ESTABLISHED, normal operation consists of a series of sequential RE-ESTABLISH and SPLIT commands according to some predetermined schedule, which is often dictated by backup needs.",{"@attributes":{"id":"p-0057","num":"0056"},"figref":["FIG. 4E","FIG. 1"],"b":["111","100","119","149","149"],"i":["a","b ","a ","b"]},"For the sake of completeness, an example of such a configuration is now given with reference to . For the sake of completeness, an example of such a configuration is now given. An Agent  on Local System  and Remote System each interact with each respective Data Storage System as described with reference to  discussed above. The local system  includes two mirror memory devices identified as M and M mirror device  and . The M and M mirror devices represent a source device R designated by reference numeral .","At the Remote System, a data storage facility includes M and M mirror devices  and  that could attach to disk adapters such as disk adapters  and  in . These memory devices constitute a target or R memory device represented by reference numeral  that acts as a remote mirror of source device R. As will be apparent, in this configuration there are local and remote mirrors. Each mirror has an assigned specific number, e.g., 1, 2, 3 . . . Local and remote mirrors are designated by the use of \u201cM\u201d and \u201cR\u201d respectively.","The Data Replication Manager system enables easy setup, management, and running of a replication process by an innovative system. Rules governing such a process (replication policy) may be flexibly set up by a user or administrator to govern the replication.  details the steps required to set up, manage, and run a replication process.","Referring to , in step  a user or administrator creates a so-called site, which includes the underlying steps of creating a replication policy (step ) and defining groups (step ). Creating a site is discussed further below with reference to using invention, because it is helpful to understand policies and groups thoroughly in order to fully understand sites.","Replication policy creation and group definition are each respectively described in detail with reference to  below. Replication scheduling (step ) follows site and profile creation (step ) and is described in detail with reference to  below. Profile creation is also discussed further with reference to using the invention. Connector steps labeled A, B, and C (steps , , and , respectively) introduce .","Referring to , following continuation step , the user or administrator using this invention is enabled to define control policy (step ), define schedule policy (step ), define application policy (step ), and define session policy (step ).","Referring to , following continuation step , the user or administrator using this invention is enabled to configure checkpoint device sets (step ), configure a checkpoint device set group (step ), configure a device group (step ), configure a replication group (step ), configure a host group (step ), and configure an application group (step ).","Referring to , following continuation step , a user or administrator may use this invention to schedule a replication by defining trigger an advance (step ), and set up the system for monitoring replication (step ).","Referring to , generally, a DRM group is a logical grouping of devices at different control levels. There can be multiple groups in any category and such groups are shown in  and described (from lowest to highest level) below. A Logical Device Group  (hereafter simply \u201cDevice Group;\u201d ) is a grouping of logical devices, such as device group  including devices  for replication. For example a Device Group can consist of a STD device and a BCV device. Other Device Groups might consist of a STD device and a BCV\/R device, a BCV\/R device and an R device, or a STD device and two BCV devices.","A Replication Group  is a grouping of the Logical Device Groups  involved in a replication operation from the beginning to the end of the replication path. One Replication Group is required for each STD device in a replication. A Replication Group can contain one Device Group, such as Device Group , in the case of mirroring functions taking place on a single Data Storage System, or may contain many, as in the case of remote mirroring (). And may include multiple mirroring functions across multiple remote systems.","A Replication Group consists of one or more Device Groups and defines the device path that a replication moves along until it reaches the desired location. Generally, it is a good choice to have one Replication Group for each replicated STD device or R device. If using replication locally and remotely, it is preferred to use a minimum of two or more Device Groups for each Replication Group.","Replication Groups may be further managed by allocating Replication Group Types. A good choice for allocating Replication Group types are listed below:","1. STD-BCV:","Generally this is local replication requiring only one Device Group. They are used for Synchronize actions, for example:\u2014a Device Group containing one STD device to one BCV device and the location is local. They are also used for CheckPoint actions, for example where a Device Group containing one STD device and the location is local. They are also used for Synchronize actions with the feature of Concurrent BCV devices, for example, as a Device Group containing one STD device to two BCV devices and the location is local.","2. STD-BCV\/R-R-BCV","Generally this is local, remote, and again local replication requiring three or more Device Groups. Such replication group types are useful for Synchronize actions. For example, if a first Device Group contains one STD device replicated to one BCV\/R device and location is local, and a second Device Group contains one BCV\/R device replicated to one R device and location is intermediate, and a third Device Group contains one R device to one BCV device and location is remote.","3. R-R-BCV","Generally this is local and remote replication requiring two Device Groups. Such replication group types are useful for Synchronize actions. For example, if a first Device Group contains one R device and one R device but the replication occurs locally, and a second Device Group contains one R device and one BCV device and location for replication is set to remote.","In summary, in the preferred embodiment, a Device Group is a pairing or grouping of devices that are synchronized and split together. There are two types of Device Groups: BCV Groups and RD Groups. A BCV Device Group consists of at least one STD device and at least one BCV device (including for example a remotely located device such as BCV\/R). An RD Device Group can consist of any of the following: One R device and one R device and one BCV\/R device and one R device.",{"@attributes":{"id":"p-0077","num":"0076"},"figref":"FIG. 11","b":["502","504","506","500","507","511","119","149","149","118","502","507","1","513","504","1","513","2","509","506","2","509","511"],"i":["a ","b "]},"Referring again to , Host Group  (centering on a Host, such as Host Computer ) is a grouping of Replication Groups  to control a specific Group of devices together. A Host Group contains one or more Replication Groups. One may associate Replication Groups with a Host Group to control all of the devices in the Replication Groups together. This grouping level is for replicating applications. For example, by putting different sets of devices into different Host Groups one can give them different Replication Policies, such as different schedules.","Another level of group granularity associated with Host Grouping is denoted as Consistency Groups. Consistency Groups may be enabled at the Host Group level for devices within the linked Host Group. For example, one might choose to enable Consistency Groups if the devices within the Host Group are located on different remote links (e.g., EMC SRDF links).","Another level of group granularity associated with Host Grouping is denoted as Application Groups. An Application Group contains one or more Host Groups. It is preferred to associate Host Groups with an Application Group when it is desirable to control all of the devices contained within the Host Groups together. For example, one might choose to create an Application Group to start an application on the remote side.","Application Group  is a grouping of Host Groups  to control a specific Group of devices together if all are associated with an application to be replicated such as application , which may for example be a database (e.g., an Oracle database). Remote Device (RD) Group  groups one or more logical devices  in logical device groups  that are distributed across local system  and remote system or across IP network . At the Application Group level, one can enable Consistency Groups using this invention. One may enable consistency groups at the Application Group level for devices contained within that Application Group. For example, you might choose to enable Consistency Groups if the devices within different Host Groups resides on different SRDF links. If any of the remote links, such as SRDF links are out of service then devices within the Application group marked as belonging to a consistent group remain consistent.","Referring again to , CheckPoint Device Set Group  is a set of BCV devices used for a point-in-time copy of a Group of devices. For example, if an application resides on four STD devices, four BCV devices of the same logical size will be needed in each of the CheckPoint Device Sets. It is a good choice to have as many CheckPoint Device Sets as the number of point-in-time copies desire for maintenance.","In summary, DRM, in a preferred embodiment allows configuring replications by using the following grouping levels: Device Group\u2014A pairing or group of Symmetrix devices; Replication Group\u2014A group of Device Groups; Host Group\u2014A group of Replication Groups; Application Group\u2014A group of Host Groups; CheckPoint Device Set\u2014A group of BCV devices on either the local or remote side; and CheckPoint device Set Groups\u2014A group of CheckPoint Device Sets.","Now that important concepts and terminology have been described, a more detailed description of a Replication Policy now follows. A Replication Policy controls how the replication is accomplished. The following Policy areas can be assigned to a Replication Policy Control Policy; Schedule Policy; Application Policy; and Session Policy. A Replication Policy can be associated with any Group level (Device Group, Replication Group, Host group, etc.). All replications must have, as a minimum requirement, a Control Policy (determines the replication behavior) and a Session Policy (defines the duration of the session) in the Replication Policy associated with the highest Group level. If a replication does not have a Session Policy associated at the highest Group level, the replication will start but will only have a predetermined time such as one hour to complete. If the replication does not complete in one hour, it will timeout and abort. If a Control Policy is not associated at the highest grouping level, the DRM Server does not know what to do with the replication, and does not start. This is true for either Synchronization or CheckPoint replication configurations. Session Policy areas associated with lower level groups override Session Policy areas associated with higher level group policies.","The Control Policy determines the behavior of the replication process. The Control Policy also defines how the replication occurs and the order in which replication operations are performed. A Control Policy can be assigned to any grouping level, and multiple Control Policies may exist within one replication.","The following options may be set to create a Control Policy: Replication Mode; Command Mode; Rendezvous Mode; Policy Mode; Priority Mode; and Local Split Mode.","There are two Replication mode options to choose from: Complete\u2014all the tracks of the device(s) must be synchronized; and Incremental\u2014only the changed tracks of the device(s) are synchronized. An incremental replication usually takes a shorter amount of time than a complete replication. There is, however, an exception to this rule. If changes occurred on every track on the device, a complete synchronization takes place even if the replication mode is set to incremental.","There are two command mode options to choose from: Synchronize\u2014replicates  a device or set of devices from the source to the target each time the replication occurs; and CheckPoint\u2014maintains multiple point-in-time copies of a device or a set of devices. The Synchronize mode replicates a device or a set of devices from the source to the target. For example, if the Synchronize mode is used to replicate a STD device to a BCV\/R device to an R device to a BCV device, the same process (to the same BCV device) will take place each time the replication is scheduled. It is also possible to synchronize to a different device each time with the Synchronize mode. For example, one might need to synchronize a STD device to a BCV\/R device to an R device to one or another BCV devices.",{"@attributes":{"id":"p-0089","num":"0088"},"figref":"FIG. 12","b":["119","1","1"]},"The example CheckPoint configuration shown in  maintains multiple point-in-time copies of a device or a set of devices. These point-in-time copies may be all stored on local BCV devices, on remote BCV devices, or on a mixture of local and remote BCV devices. In the example shown in , three point-in-time copies are needed. The first time the replication takes place, the STD device  establishes to device  denoted as BCV_ as indicated by data flow arrow . The second time the scheduled replication takes place, the STD device establishes to device  denoted as BCV_ and the replication is indicated by data flow arrow . The third time the replication occurs, the STD device establishes to device  denoted as BCV_ and the replication is indicated by data flow arrow . The next time the replication occurs, the STD devices establishes to BCV_ again and the replication is indicated by data flow arrow . The process continues in this fashion each time the replication is scheduled to run.","A CheckPoint Device Set Group contains one or more CheckPoint Device Sets. The CheckPoint Device Set Group is the Group that gets associated with either a Device, Replication, Host, or Application Group. CheckPoint Device Set Groups are preferably associated at the highest Group level for a replication. The CheckPoint Device Set Group can contain all local devices, all remote devices, or a mixture of local and remote devices. For example, if an application resides on 10 STD devices and four point-in-time copies are needed, then four different CheckPoint Device Sets must be created, each containing 10 BCV devices. All four CheckPoint Device Sets can then be associated with one CheckPoint Device Set Group, which is then in turn associated with a Host Group or an Application Group.","If associating a CheckPoint Device Set Group with a Device, Replication, Host, or Application Group, the following list details the supported replication types and describes how to set up the Device Groups for the Replication Groups:","1. STD-BCV When configuring a CheckPoint Device Set for this replication type, the minimum requirements are: create one or more CheckPoint Device Sets that each contain one BCV device (CheckPoint Device Sets must be local); associate the CheckPoint Device Sets with one CheckPoint Device Set Group; create a Device Group containing a STD device with a location of local; and associate the CheckPoint Device Set Group to the Device Group.\n\n2. STD-BCV\/R-R\u2014When configuring a CheckPoint for this replication type, the minimum requirements are: create one or more CheckPoint Device Sets that each contain one BCV device (a CheckPoint Device Set can be either local or remote); associate the CheckPoint Device Sets with one CheckPoint Device Set Group; create a Device Group containing one STD device and one BCV\/R device with a location of local; create a Device Group containing one BCV\/R device and one R device with a location of intermediate; \u2022 Create a Device Group containing one R device with a location of remote; associate all three Device Groups into one Replication Group; and associate the CheckPoint Device Set Group to the Replication Group.\n\n3. R-R-BCV\u2014When configuring a CheckPoint for this replication type, the minimum requirements are: create one or more CheckPoint Device Sets that each contain one BCV device (these BCV devices must be remote); associate the CheckPoint Device Sets with one CheckPoint Device Set Group; create a Device Group containing one R device and one R device with a location of local; create a Device Group containing one R device with a location of remote; associate both Device Groups into one Replication Group; and associate the CheckPoint Device Set Group to the Replication Group.\n","Checkpoint replication is useful also with regard to performing a restore with DRM. In such a case, one may restore from a BCV device to a STD device, but only from a CheckPoint replication. In a preferred embodiment, by default, DRM restores to the STD device last paired with the BCV device. The invention provides flexibility through the GUI for the user or administrator to choose to restore to a different set of STD devices residing on the same Symmetrix system.",{"@attributes":{"id":"p-0095","num":"0094"},"figref":"FIG. 13","b":["516","119","149","149","526","528","516","532","1","530","518","516","1","530","2","534","520","516","2","534","1","536","522","516","1","536","2","524","516","2","540","538","526","516"],"i":["a","e ","a ","b ","a","e","a","b","c","d","e. "]},"Returning once again to a general explanation of policies and their relationship with Device Groups, a Rendezvous mode controls when the actions of devices in a group occur. In Rendezvous mode, all devices in a group must reach the same state before any devices in the group can move to the next state. There are four choices for Rendezvous mode: Local\u2014all devices on the local side must reach the same state before moving to the next state; Remote\u2014all devices on the remote side must reach the same state before moving to the next state; All\u2014all devices on the local and remote side must reach the same state before moving to the next state; and None\u2014all devices can move to the next state on their own.","For example, a Host Group that has a Replication Policy containing an associated Control Policy with the Rendezvous mode set to local means that all devices on the local side in that Host Group are effected by that Replication and Control Policy. Devices on the local side (such as with local system ) can be a STD device to a BCV device or a STD device to a BCV\/R device (See  for example). If the Rendezvous mode is set to remote, only the action on the remote side is affected. This means that the Replication and Control Policy affect all devices on the remote side of the SRDF link. In this example, devices on the remote side are an R device to a BCV device. If the Rendezvous mode is set to all, then all devices on both the local and remote side are affected by the Replication and Control Policy. If Rendezvous mode is set to none means that devices can move to each state without having to wait for other devices. Of course one skilled in the art will recognize that the choice of an identifying name for each of the modes, e.g. \u201call\u201d or \u201cnone\u201d is simply a choice but that the operations of the modes are part of the fabric of the novelty and usefulness of the invention, and this underlying principle applies globally to this invention.","The invention conveniently provides three choices for Policy mode in a preferred embodiment: (1) Automatic\u2014replication runs automatically; (2) Manual\u2014user intervention is required to start the replication; and (3) Event\u2014the replication waits for an event to occur before the replication begins.","Setting the Policy mode to automatic means that the associated group starts automatically. A Replication Policy containing a Control Policy with the Policy mode set to automatic also needs a Schedule Policy if the Replication Policy is associated at the highest grouping level. Groups at a lower level with than the associated group also start automatically in appropriate sequence. In the preferred embodiment, Setting the Policy mode to manual means that the associated group requires a user to start the replication. It is a good choice not to set lower level groups at manual or user intervention shall be required for each. Setting the Policy mode to event means that the associated group is waiting for an event to occur before it begins its replication. This event can be internal or external to the DRM Server.","For example, there may be two databases named DB and DB, and replication of DB should not occur until DB's replication is complete. To accomplish this, in accordance with the invention a user may create a Replication Policy containing a Control Policy with the Policy mode set to event for DB. Associating the Replication Policy at the highest group level, DB causes DB's replication to not start until it receives an event from the DB replication.","An external event may also trigger the replication for a group to begin. The Policy mode at the highest group level must be set to event. An example of an external event is a scheduler, which may trigger an event based on date\/time.","Priority Levels may be set with the invention to allow setting which replications take precedence over others. A replication with a higher priority does not allow a lower priority replication to begin until it finishes, e.g. 0\u2014lowest priority to 6\u2014highest priority. For example, if a replication is running that has a priority set to 0, and another replication starts with the priority of 1, both replications continue to run. If a replication is running that has a priority of 1, and another replication is scheduled to start with a priority of 0, the replication with a priority of 0 will not start until the replication with priority 1 completes.","A suggested exception to this rule should be when a user needs to execute a replication manually such as a restore. These types of replications should receive the highest priority. When these types of replications start, all replications currently running are allowed to complete, but no replication with a lower priority can begin until the manual or restore replication completes. Any replication that needs to be triggered manually, such as a restore, is usually of high importance and requires all of the resources to complete the replication in the fastest amount of time.","In the preferred embodiment, the invention has certain modes including Local Split mode allows a user to control whether the DRM Server automatically splits local devices () or skips the split of local devices. Local devices can be a STD device to a BCV device or a STD device to BCV\/R device. The local split mode has two options: Split and Skip. If the user chooses the Split option, the DRM Server to automatically do the split of devices on the local side. An example of when a user might choose the Skip option is when the system is performing a script that automatically splits devices on the local side.","In the preferred embodiment, the Application Policy allows the user to define scripts to run at specific times during the replication to control your applications and\/or any other processes. These scripts are user-defined. Preferably such a script should be set to run at a specific time during the replication, and include the following information type of identifying information: (1) Name\u2014A name for the action; (2) Location\u2014There are two options: (a) Local\u2014The script executes on the local host of the replication; and (b) Remote\u2014The script executes on the remote host of the replication; (3) Host or computer name\u2014The host or computer name or IP address of the host on which the scripts reside; (4) Event\u2014The point at which the script is executed during the replication, e.g. before a STD device is established to a BCV device or to a BCV\/R device on the local side or an R device is established to a BCV device on the remote side, or before a STD device is split from a BCV device or a BCV\/R device on the local side.","It is a good practice to include exit codes when writing scripts to use with DRM. DRM recognizes an exit code of zero as success, and any other number greater than zero as unsuccessful. If the DRM Server receives an exit code greater than zero it reports an error and aborts the replication. As good practice, the user or administrator should have a separate log file for scripts so that you can determine the cause of the error. Examples of scripts for Oracle Database may be obtained from EMC Corporation of Hopkinton, Mass. for the preferred embodiment using a EMC Symmetrix Data Storage System.","The Session Policy determines the length of time a replication is allotted to complete. The length of time should be entered in seconds. A Session Policy may be assigned to any group level, and you can have many Session Policies in one replication depending on your business requirements. A Session Policy should be associated with the highest Group level and in a preferred embodiment the DRM Server defaults the total amount of time for the replication to one hour (3600 seconds). If the replication is not complete in that amount of time, the replication times-out and is aborted.","The frequency of a replication is defined using the Schedule Policy tool of this invention. Scheduling of a replication is done either within the DRM Server or externally. Preferably, the modes and their options for the Schedule Policy are as follows: an Parameters include Monthly; Week or Date\u2014Select the week, multiple weeks in a month, or a single day; Day\u2014Select one day of the week, or multiple days; Time\u2014The time of day that the replication will run. For Example: Run the replication the first and third week of the month on Monday, Wednesday, and Friday at midnight. The invention preferably includes a range of time in which the user can exclude from replications occurring.","Useful practices for setting policies and now described. All replications need a Session Policy (that determines the length of time the replication is allotted to run) associated at the highest group level. If not, the replication session length defaults to one hour. A Control Policy can be used in conjunction with a Schedule Policy that is associated with the highest group level to set up a replication to run automatically at a specific time. A Control Policy can be used in conjunction with a Schedule Policy that is associated with the highest group level to set up a replication to run automatically in response to an external triggering, such as an external event. A Control Policy can also be used in conjunction with a Schedule Policy that is associated with the highest group level of another group associated with an internal event to run automatically in response to an internal triggering.","Preferably, the Application Policy should include a rule that executes either a program script to trigger an event for replication. If the highest group level has a Control Policy with the Policy mode set to automatic, all of the lower group level's Replication Policies containing Control Policies should have the Policy modes set to either Automatic or Event. If the highest group level has a Control Policy with the Policy mode set to Manual, all of the lower group level's Replication Policies containing Control Policies should have the Policy modes set to either Automatic or Event. If the highest group level contains a Control Policy with the Policy mode set to automatic, then no Replication Policies for any of the lower groups contain a Control Policy with the Policy mode set to manual.","To protect devices from being used by different applications at the same time, or anytime, device locking is implemented in SymmAPI 4.3 in the preferred embodiment. Device locking means that once a device is locked by an application, it is not available to other applications. SymmAPI is a particular application program interface available from EMC for interfacing with an EMC Symmetrix data storage system, such as Data Storage System .","Devices should be locked by the DRM application, running on the DRM Server and Agent. With SymmAPI, if a device is locked by another application, then replication cannot run. A device that was locked by DRM can be used in other replications configured by DRM, but not by other applications.","Using the Invention","Referring again to , the first step in setting up a replication is to create a site. A site consist of Groups and Replication Policies. Replication Policies are a set of rules that can be applied to any device grouping. The DRM invention allows a user or administrator to setup a site for one replication or for multiple replications. If choosing to have one replication per site and advantage is that it is easier to troubleshoot versus multiple replications per site, and also easier to modify groups or policies for replication within the site. On the other hand, associating any device with a group removes it from being available for association with other groups but such devices remain available for grouping within a new site which is a dangerous practice because of inherent complexity and possible confusion.","An advantage for choosing to have multiple replications per site is that it as devices are used for each replication, they are not available for other replications which eliminates the complications and confusion described above. On the other hand, troubleshooting is more complex because of the multiple replications per site. Also before a user or administrator may use the GUI  () to modify a group or policy for replication, all of the replications with the site must be removed from being scheduled for replication (the site itself may be copied and changes made to the copy but again much attention to detail is needed).",{"@attributes":{"id":"p-0116","num":"0115"},"figref":"FIG. 14A","b":["600","115","631"]},"Referring again to , the preferred screen layout of screen  of the GUI  is discussed. A Policy List area , includes fields , , , and  for identifying, respectively, Control Policy Name, Schedule Policy Name, Application Policy Name, and Session Policy Name. Groups, a Policy, and Setup exit Icons , , and , respectively are used to allow definitions and access to these important aspects. A general menu bar  allows easy access to general items (File, Manage, Tools, and Help). The following Icons , , , and  are used for access to consoles for these functions: Control, Monitor, Setup, and Alarm, respectively. Icons , , , and  are used for implementing these respective functions: Finish, Apply, Reset, and Cancel.","Buttons  and  can be used to create Profiles and Sites. While button  is used to further manipulate and access Agent identifications and configurations. Agents and Servers for association with Policies created using GUI  are represented in screen area .","Referring still to , after clicking on the Policy Icon , a Replication Policy menu bar  allows such a policy to be assigned to any grouping level. Policies assigned to the lower level groups override policies assigned to upper levels. A Replication Policy controls how the replication is accomplished.","One or more of the following policy areas can be assigned to a Replication Policy: Control, Schedule, Application, and Session, shown respectively by fields in menu pull down . In general, the steps to create a Replication Policy with a Wizard-type tool are to define the individual policy areas and create a replication Policy by associating policy areas to the Replication Policy. Such definition includes defining the following groups and assigning a Replication Policy (if required) to each of the following Groups: Device Groups; Replication Groups; Host Groups; and Application Groups ().","Next the user or administrator (these two terms are used interchangeably herein for simplicity) may use the GUI and preferably with a Wizard-type tool which in this example is named \u201cTest\u201d to give ease of use to create a Control Policy that determines the behavior of the replication. For identification, a Policy Name TestPolicy in this example is created by using policy name field  in association with the Test Policy Wizard.","The Control Policy, named Control_test in the example shown in , may be named with the following example steps: access a so-called Policy Wizard that is part of the invention software, pull down menus through the GUI and select Control Policy, then click on new. In the policy name field , the user would enter a unique name for the Control Policy and press enter. Such similar steps are understood to be followed with similar type steps involving policy and groups and using GUI's and\/or Wizard-type software tools for purposes of this document and therefore such detail will be generally omitted for the sake of simplicity.","Referring to , defining Control Policy is further illustrated by example. After entering the unique name for the Control Policy (appearing at field ) the user would select the Rendezvous Option in the General screen area  and by using field  and select one of the following options: Local and Remote, and with All or None selected.","In local mode all of the local Device Groups in the group with this policy must reach the same state in the replication process before continuing to the next step in the operation. In remote mode all of the remote Device Groups in the group with this policy must reach the same state in the replication process before continuing to the next step in the operation. Further selecting All Device Groups, (local and remote) in the group with this policy must reach the same state in the replication process before continuing to the next step in the operation. If None is selected then the devices in this group are not required to reach the same state in the replication process before continuing to the next step.","Next the user would select the Priority Level using field  for the Replication Group. Different priority levels may be assigned to Replication Groups ranging from for example 0 (lowest priority) to 6 (highest priority). Command options appearing in field  include Synchronize appearing at field  for synchronizing the desired devices and at field . CheckPoint which allows multiple point-in-time copies of the STD devices to be stored on local BCV devices, remote BCV devices, or both.","Next the user may select the Policy Mode in screen area . The Policy Mode controls how the replication is run. Options appearing respectively at fields , , and  include: Automatic\u2014Replication process starts automatically; Manual\u2014Replication process starts manually; and Event\u2014Replication process starts based on a predefined system event.","Next the user may select the Replication Mode at screen area . For the Replication Mode, the user may use fields  and , respectively, to select one of the following options: Incremental\u2014Copies only changed tracks (re-establish); and Complete\u2014Copies all tracks (full establish).","Next the user may select the Local Split Mode in screen area , which is relevant to the preferred embodiment using BCV's () and may not be directly apply to mirroring type devices other than such types, but which are still within the scope and spirit of the invention. There are two choices for Local Split mode available for selection at respective fields  and : Split\u2014the DRM Server splits the local devices automatically; and Skip\u2014the DRM Server does not split the local devices (the user would need to provide a script that splits the local devices in such a case).","Next the user may select the Local Pair State in screen area , where there are two choices available for selection at respective fields  and : Split\u2014the DRM Server splits the local devices automatically; and Skip\u2014the DRM Server does not split the local devices (the user would need to provide a script that splits the local devices in such a case).","Referring to , after following the above steps, the user would create a Schedule Policy using menu bar , named Schedule in the example shown at field  and also appearing in General screen area . A Schedule Policy determines how often replication occurs. One defines using the GUI by creating a new Schedule Policy and selecting the options based on the Schedule mode. Preferably a new Schedule Policy is created by using the GUI to access a Policy Wizard (similar to that described above) then selecting the appropriate choices and naming the policy. Next it is important to define the time or frequency of replication, e.g. monthly, weekly, daily, hourly, or continuous, in the mode field . Conveniently, exclusions may be made in the Exclusion screen area  which is part of the Details screen area  and which includes From and To screen areas  and , respectively.","The above example is typical of how the GUI  and Screen  may be used for using groups and policies with this invention. Other examples and general explanations are given below, but for the sake of simplicity examples of specific screen presentations are generally not given since it will occur to one skilled in the art how to implement such in view of the examples already given and the teachings herein.","Application Policies may control external applications with user-defined scripts that are executed on certain event states. Such event states include: PreSync\u2014The state before devices become established; PreSplit\u2014The state before devices split; PostSplit\u2014The state after devices split; and PostSplit Complete\u2014Triggers an Event for another Group.","In order create a new Application Policy, the user follows similar steps as described with other policies using the GUI and Wizard-type software tool. After the Application Policy is named then the user should create appropriate Rules, including naming the rule and specifying where the rule scripts reside denoted as Rule Location. Rule Locations may include these selections: Local\u2014Specify the host on the local side of the Replication; and Remote\u2014Specify the host on the remote side of the Replication. The host should be identified by its unique name of IP address of the host where the scripts reside. In the Event list, the user should select an event state (e.g. from a drop-down box on the GUI) that is used to initiate the script (the options are described above). A Session Policy should be used to define the duration of a replication.","A Replication Policy controls the behavior of the replication process for a group and may contain a Control, Schedule, Application, or Session Policy. A user may use the GUI to associate one, some, or all of these policies with a Replication Policy. For example, a Replication Policy might contain a Control, Schedule, and Session Policy but no Application Policy. A Replication Policy may or may not be associated with any grouping level. A lower level group's Session Policy will override a Session Policy assigned to a higher level group. For example, if a replication had an Application Group with a Session Policy of 3600 and a Host Group with a Session Policy of 7200, the replication would have 7200 seconds to complete before the replication would abort. Replication Policies are created and named in a similar fashion as other policies. Individual policies may be included in the Replication Policy to add another level of granularity.","Recall there are six group types: Logical Device Group\u2014Consists of either a BCV Device Group or an RDF Device Group; Replication Group\u2014Consists of BCV Device Groups and RDF Device Groups; Host Group\u2014Consists of Replication Groups Application Group\u2014Consists of Host Groups; CheckPoint Device Set\u2014Consists of a BCV device or a group of BCV devices; CheckPoint Device Set Group\u2014Consists of CheckPoint Device Sets.","The user may use the GUI to select the Data Storage Systems such as the preferred EMC Symmetrix Systems for managing with this invention. Multiple systems, such as system  and -with applications that span across many systems may be managed.","As illustrated in , a wizard type tool, such as a so-called Groups Wizard through the GUI  and screen  may be used to select the Data Storage Systems one may you want to manage with the following example steps: (1) clicking Groups using icon , wherein a window  appears showing the serial numbers of the available and managed Data Storage Systems for this site; (2) Select the Data Storage Systems desired to be managed from the available list and add to the managed list appearing in window .","After selecting the Symmetrix systems the user may be given the option to create a Checkpoint Device Set that allows point-in-time copies of data from selected STD devices. It is recommended that the user select as many BCV devices as there are STD devices for a particular application or file system. The user should choose Local if the BCV devices are on the local Symmetrix system or select Remote if the BCV devices are on the remote Symmetrix system. The devices in each CheckPoint Device Set must be either all from the local Symmetrix system or all from the remote Symmetrix system.","Once CheckPoint Device Sets are defined the user may use the GUI to create a CheckPoint Device Set Group (a grouping of CheckPoint Device Sets). For example for three point-in-time copies of a database, one would need three CheckPoint Device Sets associated with one CheckPoint Device Set Group. Each CheckPoint Device Set in such a group must have the same number and size of devices. The CheckPoint Device Set Group will be associated with either a device, replication, host, or Application Group depending upon the configuration.","A Logical Device Group (herein interchangeably defined as simply a Device Group) contains user-specified Symmetrix devices. A Device Group provides control, status, and performance data on collective devices within the Device Group. A Device Group defines which STD device will be synchronized with another device. Once the Device Group is named then the user should select a Location. The location determines control of the replication. There are three options: local, intermediate, and remote. If Local is chosen then from a control standpoint, this is local volume. One of the devices in the Device Group is physically attached to the local host and there is one local Device Group per Replication Group. If Intermediate is chosen then from a control standpoint this is the middle staging device in the process. For example, any Device Group that is not local or remote is intermediate. There can be multiple intermediate Device Groups per Replication Group. Finally if Remote is chosen, then from a control standpoint this is the final target destination in the replication. There can be multiple remote Device Groups per Replication Group.","A Replication Group consists of Device Groups grouped together in order to be managed as a single object. For example, when one manages data replication from local, through intermediate, to remote devices as one transaction (e.g. a database transaction).","Referring again to , a user may use the GUI and Wizard-type tool to configure Replication Groups by using Device Group Properties screen area : specifying a name for the group in Group Name Field ; selecting the type in field ; selecting which Device Groups are in the Replication Group using menu button ; and assigning a Replication Policy to the group using menu button ; and selecting Checkpoint DeviceSet Group using button . Location of the Group is designated in field  and respective ID's for Local and Remote Data Storage Systems are placed in fields  and . A Skip icon  accompanies the usual other control icons for flexibility using screen  for defining Groups.","Once Replication Groups are defined then the user may create Host Groups. A Host Group is a collection of Replication Groups for controlling devices. One Host Groups are named then the user uses the GUI and Wizard to select which Replication Groups are in the Host Group and assigns an eplication Policy to the group.","After Host Groups are created then the user may create an Application Group or Groups using the GUI and a Wizard-type software tool. An Application Group is a collection of Host Groups for another level of granularity for controlling devices. Once named, then the user selects which Host Groups are in the Application Group, enables Consistency Groups within the Application Group, assigns a Replication Policy to the Application Group; and assigns a CheckPoint Device Set Group to the Application Group.","Once the user has set up the site including policies and groups, then a Profile may be created (See ). A profile is a record of the schedule, monitor, trigger, and system log filter list that a user defines. Once a profile is created, a user may schedule a replication, monitor a replication using monitor icon  for access of a monitor console, view system logs, define events, and set triggers for notification from a Alarm console through Alarm icon. Once the GUI is used to name the Profile using Profiles button , the user may associate with it several lists including Schedule, Monitor, and Trigger Lists. A Schedule and Monitor List each contain the groups for which replication is scheduled and\/or to be monitored. The Trigger List contains the triggers defined by a user for replication and notification.","The user may use the GUI to define a Trigger which is an association between a system event and a user group. When a specified event occurs, the DRM software notifies all users belonging to a specified user group. Once defined, a trigger is saved as an element of the profile and reused. System events must be defined before one may define a trigger. A system event is an occurrence that may or may not require a response from a user, depending on its severity. The user may monitor replication to follow the progress of a selected scheduled group by loading a profile containing the proper information as described above.","Presented below is an example of implementation of the invention for replicating a database application which in this example is a well-known Oracle database application is now presented. It will be apparent to those of skill in the art that any application, and any database application in particular could also be used in a similar fashion with some straight forward application-specific adjustments.","This section provides a brief exemplary overview of the terms used to describe the replication process and the requirements for setting up the replication. For the purposes of database replication the following terms are important. A source or primary database is where production (commercially active in-use) data resides. This provides the base data in the replication transfer. On the other hand a target or standby database is where the production data is replicated or copied from the source. It is a good choice to locate the physical target site is usually remote or away from the source site. The source and target sites can be thousands of kilometers or miles apart. An example of a scenario for which sites being far apart is advantageous is the preparation for disaster recovery, e.g. earthquakes.","Both the source and the target system should have the same version of Operating System (OS) installed. Both the source and the target system should have the same version of database software such as Oracle installed and should be configured identically. The Oracle software can be installed on both systems separately, or one can use the software of this invention to replicate the source setup database software to the target.","A minimum of three different volume groups are required for each database, one for application data (which contains more static information, such as Oracle software), one for data about Oracle database files, and one for archive log files and controlfiles. For use on the preferred Symmetrix, EMC Corporation of Hopkinton, Mass. can provide any additional host configuration scripts that may be needed to prepare for the replication.","This basic Oracle Database replication example comprises the replication of one source database onto one target database. Some general knowledge of databases is helpful for better understanding this example and may be obtained from product literature available from Oracle Corp. of Redwood City, Calif. Both the source and the target databases need to be configured in archive log modes. Replication should be executed periodically, for example, every 30 minutes or every day at 12 pm, depending on business requirements. The replication can be configured through the methods described generally above.","On the source side, the processes involved are: (1) put the Oracle database into hot backup mode to enable the split BCV volume of the volume containing the data files to be a point-in-time copy of date files; (2) split the BCV volume containing all of the Oracle data files; (3) take the Oracle database out of hot backup mode, then force the log switches and back up the control file to trace; and (4) replicate the data files and the archive logs to the target side.","On the target side, the processes involved are: (1) shut down the database; (2) synchronize the data files; (3) recover the database using control files and archived redo logs; (4) and startup the database.","A more advanced example of Oracle database replication is now given. In this example the replication comprises a source database onto a target database as described in the basic replication scenario, but involves one source database and three target databases. The source and target databases need to be configured in archive log modes, except for the Master database as described below.","Preferably, replication is executed periodically, for example, every 30 minutes or every day at 12 pm, depending on business requirements. The replication scheduling can be configured as described above. This scenario provides an advanced solution for Oracle replication that allows the target site to be available for query instead of only being used as an idle database as in the basic replication scenario. This enables one to use another database for report generating, user queries, etc., which helps to reduce the load on the production (Source) database and thus provides important advantages of prior art systems which do not provide such capability with such flexibility and convenient easy to use features.","The first database, (named Master in this example), is up and running at all times and serves as a window for end-user access. The Master database does not physically contain the production data (and hence has minimal storage requirements). It does not need to be in archive log mode. The Master database is linked to one of the two underlying databases at any given point in time. The underlying databases are target databases replicated from the source site.","The Master database points\/links to the two databases (Toggle and Toggle in this example) in a toggling fashion. While the database replication is replicating the current source database to Toggle, Toggle is up and linked to the Master for the user to access. Once the replication of Toggle is done, it is brought up and the \u201cpointer\u201d of the Master database is switched from Toggle to Toggle. The next round of replication begins and the database replication transfers the current source database to Toggle, while Toggle is up and linked to the Master for the user to access. Once the replication of Toggle completes, it is brought up and the \u201cpointer\u201d of the Master database is switched from Toggle to Toggle.","One may create the database links pointing from the Master database to the two toggling databases by running the following example SQL scripts within the Master database.",{"@attributes":{"id":"p-0159","num":"0000"},"ul":{"@attributes":{"id":"ul0001","list-style":"none"},"li":{"@attributes":{"id":"ul0001-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0002","list-style":"none"},"li":["drop public database link TOGGLE;","drop public database link TOGGLE;","create public database link TOGGLE connect to username","identified by password using \u2018tns:TOGGLE\u2019;","create public database link TOGGLE connect to username","identified by password using \u2018tns:TOGGLE\u2019;"]}}}},"Once the database links are set up in the Master Database, it is best to set up public synonyms for all of the objects in the Production database. The scripts for creating the public synonyms are built into the SDMM scripts. Due to the toggling nature of the database replication, there is an instance in time that the synonym pointer is being switched from one database to the other. If a user session attempts to access an object at that instant, an Oracle error may be returned indicating a requested object link (e.g. table or view) does not exist. However, this may be worked around by rerunning the query or masking off this error message during replication.","The target site for this toggling solution requires at least two volume groups for Toggle (one for Oracle data files and one for archive logs and control files); and at least two volume groups for Toggle (one for Oracle data files and one for archive logs and control files), plus separate volume groups for the Master database.","In summary and as stated above, an advantage provided by the present invention is related to ease of use, and granularity of control. With regard to database replication the invention provides the same advantages as well as the advantage of establishing a replicated database which may be used to offload overhead on the productions database.","A system and method has been described for managing replication of data in a data storage environment. Having described a preferred embodiment of the present invention, it may occur to skilled artisans to incorporate these concepts into other embodiments. In particular other advantages and implementations of this invention may occur to one skilled in the art that are outside of the preferred embodiments or examples given. Nevertheless, this invention should not be limited to the disclosed embodiment, but rather only by the spirit and scope of the following claims and their equivalents."],"heading":["FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENT","Data Storage Environment Including Logic for this Invention","Logical Devices in the Preferred Environment","General Overview of Method Steps for Managing Devices and Data associated with Local and Remote Replication","Groupings","Policies in View of Groupings","SQL Script Table"],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The above and further advantages of the present invention may be better under stood by referring to the following description taken into conjunction with the accompanying drawings in which:",{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":["FIG. 2","FIG. 1"]},{"@attributes":{"id":"p-0016","num":"0015"},"figref":["FIG. 3","FIG. 1"]},{"@attributes":{"id":"p-0017","num":"0016"},"figref":["FIG. 4A","FIG. 1"]},{"@attributes":{"id":"p-0018","num":"0017"},"figref":["FIG. 4B","FIG. 4A"]},{"@attributes":{"id":"p-0019","num":"0018"},"figref":["FIG. 4C","FIGS. 4A and 4B"]},{"@attributes":{"id":"p-0020","num":"0019"},"figref":["FIG. 4D","FIGS. 4A-4C"]},{"@attributes":{"id":"p-0021","num":"0020"},"figref":["FIG. 4E","FIGS. 4A-4C"]},{"@attributes":{"id":"p-0022","num":"0021"},"figref":["FIG. 5","FIGS. 4A-4E","FIG. 1"]},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":["FIG. 10","FIG. 1","FIGS. 6-9"]},{"@attributes":{"id":"p-0028","num":"0027"},"figref":["FIG. 11","FIG. 10","FIGS. 6-9"]},{"@attributes":{"id":"p-0029","num":"0028"},"figref":["FIG. 12","FIG. 10","FIGS. 6-9"]},{"@attributes":{"id":"p-0030","num":"0029"},"figref":["FIG. 13","FIG. 10","FIGS. 6-9"]},{"@attributes":{"id":"p-0031","num":"0030"},"figref":["FIG. 14A","FIG. 1","FIGS. 6-9"]},{"@attributes":{"id":"p-0032","num":"0031"},"figref":["FIG. 14B","FIG. 1","FIGS. 6-9"]},{"@attributes":{"id":"p-0033","num":"0032"},"figref":["FIG. 14C","FIG. 1","FIGS. 6-9"]},{"@attributes":{"id":"p-0034","num":"0033"},"figref":["FIG. 14D","FIG. 1","FIGS. 6-9"]},{"@attributes":{"id":"p-0035","num":"0034"},"figref":["FIG. 14E","FIG. 1","FIGS. 6-9"]}]},"DETDESC":[{},{}]}
