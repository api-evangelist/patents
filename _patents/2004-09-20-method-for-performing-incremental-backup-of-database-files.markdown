---
title: Method for performing incremental backup of database files
abstract: A method and apparatus for incrementally backing up database files is described. In one embodiment, the present invention replicates an original database file for the purpose of creating a backup database file. The backup database file is subsequently stored in a data store and the original database file is monitored for at least one change (i.e., new e-mail message). In response to a detected change, the change to the original database file is copied to the backup database file so that the two database files are replicas of each other.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08041675&OS=08041675&RS=08041675
owner: Symantec Operating Corporation
number: 08041675
owner_city: Mountain View
owner_country: US
publication_date: 20040920
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION"],"p":["This application claims benefit of U.S. provisional patent application Ser. No. 60\/598,251, filed Aug. 2, 2004, which is herein incorporated by reference.","1. Field of the Invention","Embodiments of the present invention generally relate to file storage, and more particularly, to a method for incrementally backing up database files.","2. Description of the Related Art","Modern computer networks generally comprise a plurality of user computers connected to one another and to a computer server via a communication network. To provide redundancy and high availability of the information in applications that are executed upon the computer server, multiple computer servers may be arranged in a cluster, i.e., forming a server cluster. Such server clusters are available under the trademark VERITAS CLUSTER SERVER from Veritas Software Corporation at Mountain View, Calif. In a server cluster, a plurality of servers communicate with one another to facilitate failover redundancy such that when software or hardware, i.e., computer resources, become inoperative on one server, another server can quickly execute the same software that was running on the inoperative server substantially without interruption. In addition to providing redundancy and high availability measures, a computer network is required to backup copious amounts of data on cluster servers in order to achieve a reliable and steadfast network environment.","One form of data commonly backed up to a cluster server is a database file. Traditional methods for backing up database files residing on a client computer, such as MICROSOFT OUTLOOK Personal Folder Files (known as PST files because these files carry the extension \u201cpst\u201d), consume a significant amount of network bandwidth. Notably, considerable amounts of redundant data are transferred over the network every time a backup of these files is performed. For example, a PST file contains detailed information about a user's e-mail, calendar, contacts, journal, notes, and other data needed to support the functionality of OUTLOOK. A PST file, or any database file, is typically very large in size and is frequently modified. However, backing up the entire database file every time a change is made to the file is an inefficient use of network resources.","Therefore, a need exists in the art for a more efficient method and apparatus for the capture and backup the incremental changes in a database file.","The invention provides a method and apparatus for incrementally backing up database files. In one embodiment, the present invention replicates an original database file in order to create a backup database file. The backup database file is subsequently stored in a data store and the original database is monitored for at least one change (i.e., new message in e-mail). In response to a detected change, the change to the original database file is copied to the backup database file so that the two database files are replicas of each other.","While the invention is described herein by way of example using several embodiments and illustrative drawings, those skilled in the art will recognize that the invention is not limited to the embodiments of drawing or drawings described. It should be understood that the drawings in detailed description thereto are not intended to limit the invention to the particular form disclosed, but on the contrary, the invention is to cover all modification, equivalents and alternatives falling within the spirit and scope of the present invention as defined by the appended claims. The headings used herein are for organizational purposes only and are not meant to be used to limit the scope of the description or the claims. As used throughout this application, the word \u201cmay\u201d is used in a permissive sense (i.e., meaning having the potential to), rather than the mandatory sense (i.e., meaning must). Similarly, the words \u201cinclude\u201d, \u201cincluding\u201d, and \u201cincludes\u201d mean including but not limited to.",{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 1","b":"100"},"The computer system  comprises a computer  coupled to a backup system  through a conventional data communications network  (e.g., the Internet, LAN, WAN, and the like). The computer  may include an individual computer, wireless device, personal digital assistant, desktop computer, laptop computer, and the like. Similarly, the computer system  could also include a server or server cluster as well. The backup system  contains a Network Data Store , which acts as a backup storage unit for storing database backup files . These backup files  are copies of the original backup database files  stored on the computer  and may be updated immediately (provided there is a network connection) or in accordance with a predefined backup schedule.","The computer  generally includes at least one central processing unit (CPU) , support circuits , memory , and a Desktop Data Store  (e.g., Desktop and Laptop Option (DLO) cache). The CPU  is coupled to the memory  and support circuits  and may include one or more commercially available processors. The support circuits  are well known circuits that include cache, power supplies, clocks, input\/output interface circuitry, and the like.","In one embodiment, the Desktop Data Store  may be a storage folder that contains backup database files . Backup database files , which reside on remote computers not connected to the network  (e.g., laptop computers), are typically stored in the Desktop Data Store  until the computer  establishes a network connection. Once this connection to the network  is made, the laptop may upload the data stored in the Desktop Data Store  to a backup system . Alternatively, these database files may reside in the Desktop Data Store  of a computer  that is connected to the network  on a regular basis. In this particular scenario, the computer may be configured to backup its files and\/or messages to the backup system  in one of several ways. One backup mode entails backing up the original file  to the backup system  (e.g., a network server) immediately as changes to the original file  occur in real time. Another mode is dependent on the user to manually backup the files to the backup system  at the user's convenience. Yet another mode involves the backing up of files according to a predefined schedule.","The invention is capable of monitoring several types of database files  including, but not limited to, MICROSOFT OUTLOOK PST personal folder files, MICROSOFT EXCHANGE database files, MICROSOFT Offline Personal Folder Files (known as OST files because these files carry the extension \u201cost\u201d), and the like.","MICROSOFT OUTLOOK may be configured to operate in a \u201ccached exchange mode\u201d that enables the application to synchronize messages with MICROSOFT EXCHANGE by utilizing OST files. More specifically, OST files are used to read and send (i.e., store a message in an outbox) electronic mail while the user is offline. While the user is offline, the changes made to an OST file may be replicated to the client's data store. With the capability to monitor the modifications to a file, this invention effectively adds an additional degree of redundancy for offline users. Notably, any change made to the OST file is relayed to the Exchange server (e.g., the backup system ) when the connection to the network  is established.","The memory  may include random access memory, read only memory, removable disk memory, flash memory, and various combinations of these types of memory. The memory  is sometimes referred to as main memory and may in part be used as cache memory. The memory  possesses various software applications , original database files , a storage agent , and a mail application program interface (MAPI) . The original database files  may include PST files, OST files, EXCHANGE database files, and the like. The storage agent  is a piece of software responsible for protecting the user's data. This agent  also handles the backup and synchronization of data files that reside in both the Desktop Data Store  and the Network Data Store .","The MAPI  is a specialized API used to actively monitor changes to an original database file  via an event registration process. The event registration process is the means by which the MAPI detects incremental changes (i.e., events) to the original database file , such as the addition of a new e-mail message to a local PST file located on the computer .",{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 2","b":["200","200","200","200","202","204","130","132","132","130","132","130","206","130","104","130","120","112","200","208","130","132","132","132","134"]},"At step , a determination is made as to whether a change in the original PST database file  is detected. If at step , the method  determines that the original database  has not been modified, then the method  returns to step  and the MAPI  continues to monitor for changes. Alternatively, if the original PST database  has been modified (e.g., the addition or deletion of a message to the original PST database ), the method  proceeds to step .","At step , a storage agent  performs a backup function (in much the same manner that the initial full backup procedure was performed) for each change detected in the original PST database . This step may occur immediately after the original database file  has been changed (i.e., in real-time). Similarly, this backup is not a file-level replication, but rather the storage agent  is replicating the change, e.g., an e-mail update transaction, to the Desktop Data Store . At step , a decision is made as to whether or not the program should end once the backup function is completed. If additional event monitoring is required, the method  returns to step . If there is no need to monitor the original database file , the method ends at step .","In another embodiment of the invention, method  takes place on a server computer instead of a client computer. Specifically, the MAPI  is utilized to actively monitor the changes or events of MICROSOFT EXCHANGE database files, MICROSOFT OST files, and the like, residing on the server computer.","The present invention provides the ability to backup a database file, such as a PST file, on an incremental basis. Notably, the invention monitors the original database file for changes and subsequently alters the backup database to reflect the modification in the event a change actually occurs. By backing up large databases on an incremental basis, this invention avoids the needless consumption of network resources involved with backing up an entire database for the sake of small and minor modifications.","While the foregoing is directed to embodiments of the present invention, other and further embodiments of the invention may be devised without departing from the basic scope thereof, and the scope thereof is determined by the claims that follow."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The following detailed description makes reference to the accompanying drawings, which are now briefly described.",{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 2"}]},"DETDESC":[{},{}]}
