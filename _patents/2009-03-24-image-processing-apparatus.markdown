---
title: Image processing apparatus
abstract: An image processing apparatus includes an input control unit, a processing unit, an output control unit, a first sending unit, and a second sending unit. When an output request including a unique identifier and a data generation condition of image data is received, the first sending unit writes the image data corresponding to the unique identifier in the processing unit. The processing unit compares the image data written by the first sending unit with the data generation condition thereby determining a processing condition, processes the image data based on the processing condition, and outputs the processed image data to the output control unit via the second sending unit.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08416438&OS=08416438&RS=08416438
owner: Ricoh Company Limited
number: 08416438
owner_city: Tokyo
owner_country: JP
publication_date: 20090324
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS"],"p":["The present application claims priority to and incorporates by reference the entire contents of Japanese priority document 2008-081660 filed in Japan on Mar. 26, 2008.","1. Field of the Invention","The present invention relates to an image processing apparatus.","2. Description of the Related Art","Recently, a central processing unit (CPU) is incorporated in an image forming apparatus in the same manner as in a general-purpose computer and the CPU is used to run various applications to control various operations of the image forming apparatus. Examples of such image processing apparatuses are printers, copiers, scanners, facsimiles, or multifunction products (MFPs) in which various functions are bundled together in one casing.","Japanese Patent No. 3679349 discloses an image forming apparatus in which a function to be shared among different applications is prepared as a platform and an application programming interface (API) included in the platform is used to implement the applications.","Japanese Patent Application Laid-open No. 2004-072527 discloses an MFP in which an image obtained by scanning is marked with a specific color to specify a closed area in the image, the closed area is extracted, and the image within or out of the closed area is used in accordance with the specific color.","Japanese Patent Application Laid-open No. 2003-244412 discloses an image processing apparatus in which an original to be transmitted to multi addresses is marked with a plurality of colors in a plurality of formats, a process to be performed is determined for each marked area of the original, and if an address list containing the multi addresses needs to be edited, the address list is permanently changed by using marking data.","According to the technologies described in Japanese Patent No. 3679349, Japanese Patent Application Laid-open No. 2004-072527, and Japanese Patent Application Laid-open No. 2003-244412, because the function to be shared in the applications is prepared as the platform, it is possible to customize functions as desired, and expand functions as desired, and prevent unnecessary overlapping of function.","However, if a function to be provided by the platform, or the interface (I\/F) granularity, is not properly designed, it is often difficult to increase the development efficiency of applications.","For example, if the granularity is too fine, many API calls are required even for an application that provides a simple service, and the source code of the application becomes complicated.","On the other hand, if the granularity is too coarse, when an application for providing a service in which a part of a specific function is changed is to be implemented, the platform needs to be changed, which can increase man-hours for development. Especially, if dependency between modules in the platform is strong, it is often necessary, not only to add a new function to the platform, but also to change an existing part, which causes a complicated process.","Moreover, when an application in which a part of service (for example, an input operation of an image) provided by an existing application has been changed is to be implemented, the existing application cannot be called to provide a part of the service that has not been changed. Therefore, it is necessary to describe a new source code and implement a new application.","It is an object of the present invention to at least partially solve the problems in the conventional technology.","According to an aspect of the present invention, there is provided an image processing apparatus including an input control unit that controls input of image data; a processing unit that processes the image data; an output control unit that controls output of the image data; a first sending unit that sends the image data from the input control unit to the processing unit; and a second sending unit that sends the image data from the processing unit to the output control unit. The input control unit assigns a unique identifier to the image data and writes the image data and the unique identifier in the first sending unit, upon receiving an output request including a unique identifier and a data generation condition of the image data, the output control unit sends a data read request including the unique identifier and the data generation condition to the second sending unit, the second sending unit sends the data read request to the processing unit, the processing unit sends the data read request to the first sending unit, the first sending unit writes the image data corresponding to the unique identifier included in the data read request in the processing unit, and the processing unit compares the image data written by the first sending unit with the data generation condition included in the data read request received from the second sending unit thereby determining a processing condition required for outputting the image data based on the data generation condition, processes the image data based on the processing condition to generate processed image data, and outputs the processed image data to the output control unit via the second sending unit.","The above and other objects, features, advantages and technical and industrial significance of this invention will be better understood by reading the following detailed description of presently preferred embodiments of the invention, when considered in connection with the accompanying drawings.","Exemplary embodiments of the present invention are explained in detail below with reference to the accompanying drawings. Although the embodiments are explained by using an MFP in which a printer function, a copy function, a scanner function, and a facsimile function are bundled together in one casing, the embodiments can be implemented on other image forming\/processing apparatuses. For example, the embodiments can be implemented on a scanner apparatus, a facsimile apparatus, or an ordinary computer.","In the following embodiments, software architecture based on an idea called Pipe and Filter is applied to the image processing apparatus in order to allow easy customization or expansion of functions of the image processing apparatus. An identifier is assigned to data and a read request including the identifier and a data generation condition is sent from an output unit to an input unit, so that the output unit can obtain desired data on which a process has been performed in accordance with a condition determined by the output unit. Furthermore, an output filter controls data read from a pipe, and if a condition determined by the output unit is changed in a middle of a process, the output filter requests data from the pipe again and acquires the data on which a different process has been performed.",{"@attributes":{"id":"p-0038","num":"0037"},"figref":"FIG. 1"},"It is assumed below that the filters F are to perform a predetermined conversion process on input data. Specifically, each function to be performed by the image processing apparatus is regarded as successive \u201cconversion processes\u201d to be performed on a document (input data). It is considered that each function to be performed by the image processing apparatus includes an input operation, a processing operation, and an output operation of a document. Therefore, each of the input operation, the processing operation, and the output operation is regarded as \u201ca conversion process\u201d, and a software component for performing one conversion process is configured as the filter F.","A filter that controls a data input operation is an input filter, a filter that controls a data processing operation is a process filter, and a filter that controls a data output operation is an output filter. Each of the filters is an independent computer program and can be independently added (installed) or deleted (uninstalled) in the image processing apparatus.",{"@attributes":{"id":"p-0041","num":"0040"},"figref":"FIG. 2","b":["100","100","21","22","23","24","25","26","27","28"]},"The scanning device  includes a scanner engine (not shown) and an engine control unit (not shown). The scanning device  scans an original to obtain image data. The plotter device  includes a plotter engine (not shown) and an engine control unit (not shown). The plotter device  prints out the image data. The I\/F device  includes a modem (not shown) and a local area network (LAN) card (not shown). The I\/F device  is used for network connection. The operation panel  is used for performing an operation in relation to a process to be executed by the image processing apparatus . The operation panel  is a touch panel, or the like, having a display function.","An image processing program according to the first embodiment is at least a part of various computer programs for controlling the image processing apparatus . The image processing program is provided by, for example, distributing a recording medium  in which the image processing program is stored or is downloaded via a network. The recording medium  can be various types of recording media. For example, it can be a recording medium, such as a compact disk read only memory (CD-ROM), a flexible disk, or a magnetooptic disk, in which data is stored optically, electrically, or magnetically, or a semiconductor memory, such as a read-only memory (ROM) or a flash memory, in which data is stored electrically.","When the recording medium  is inserted into the drive device , the image processing program is installed from the recording medium  into the auxiliary storage device  via the drive device . On the other hand, it the image processing program is downloaded from the network, it is installed into the auxiliary storage device  via the I\/F device .","Necessary files and data as well as the installed image processing program are stored in the image processing apparatus . The memory device  reads the image processing program from the auxiliary storage device  when a computer is started up, and stores therein the read image processing program. The calculating device  performs a function of each unit described later in accordance with the image processing program stored in the memory device , thereby performing various operations.","The idea of Pipe and Filter is applied to software architecture for performing various functions in the image processing apparatus .  is a block diagram for explaining the software configuration of the image processing apparatus . The image processing apparatus  is an MFP that performs a plurality of functions of a printer, a copier, a scanner, a facsimile, and the like, in one casing.","Software for performing functions of the image processing apparatus  has a hierarchical structure including a user interface (UI) layer , a control layer , an application logic layer , a device service layer , and a device control layer . A hierarchical relation between the layers is defined based on a call relation between the layers. Specifically, as shown in , the upper layer calls the lower layer.","When the UI layer  receives an execution instruction of various functions from a user, the UI layer  calls the control layer  to control the application logic layer  based on the received execution instruction. The application logic layer  executes an application for performing a requested function based on an instruction from the control layer . The device service layer  and the device control layer  then control a hardware resource of the image processing apparatus  based on the execution result. As a result of the above operation, the image processing apparatus  obtains an output result corresponding to the function based on the instruction received by the UI layer .","A communication server unit  and a local UI unit  are implemented in the UI layer . The UI layer  has a function of receiving an execution request for performing various functions of the image processing apparatus . The various functions include, for example, a copy function, a print function, a scan function, and a facsimile function. It is possible that the communication server unit  receives an execution request from a client personal computer (PC) (not shown), or the like, via a network. It is also possible that the local UI unit  receives an execution request via the operation panel , or the like. The structure and functions of the operation panel  will be explained in detail later. An execution request received by the UI layer  is sent to the control layer .","The control layer  is a control unit in which a function for controlling a process to perform each function of the image processing apparatus  is implemented. Specifically, the control layer  connects filters in the application logic layer  by using a pipe  depending on a requested function and controls execution of the function by using the connected filters.","The control layer  controls the pipe  based on an execution request received by the UI layer . How the pipe  is controlled by the control layer  will be described in detail later.","A function of the image processing apparatus  is defined as a unit of service (from when a request is received to when a final output is obtained) to be provided to the user by the image processing apparatus , and is synonymous with an application for providing a unit of service in terms of software.","Various filters that constitute a group of components for performing a part of functions provided by the image processing apparatus  are implemented in the application logic layer . The application logic layer  performs one function by combining a plurality of filters under the control of the control layer . An input filter , a process filter , and an output filter  are implemented in the application logic layer . Each of the input filter , the process filter , and the output filter  is operated based on the same definition and controlled by the control layer  based on the definition. The configurations and the operations of the filters , , and  will be described in detail later.","A lower level function in which each filter implemented in the application logic layer  is shared is implemented in the device service layer . The pipe  and a first data management unit  are implemented in the device service layer . The pipe  is the pipe P illustrated in , and sends an output result obtained from one filter implemented in the application logic layer  to other filter.","The first data management unit  is a database included in the image processing apparatus . For example, it is possible that the first data management unit  stores therein user information registered by the user or document data or image data on which various operations have been performed by the image processing apparatus .","A driver that is a computer program for controlling hardware is implemented in the device control layer . A scanner control unit , a plotter control unit , a memory control unit , a telephone (Tel)-line control unit , and a network control unit  are implemented in the device control layer . The scanner control unit , the plotter control unit , the memory control unit , the Tel-line control unit , and the network control unit  control a scanner, a plotter, a memory, a telephone, and a network, respectively.","The input filter  controls an input operation on data received from outside of the image processing apparatus . The input filter  includes a read filter , a stored-document read filter , a mail receive filter , a facsimile receive filter , a PC-document receive filter , and a report filter .","The read filter  controls the scanner to read image data and outputs the read image data. The mail receive filter  receives an electronic mail and outputs data contained in the received electronic mail. The facsimile receive filter  controls reception of facsimile data and outputs the received data. The PC-document receive filter  receives print data from the client PC, or the like, and outputs the received print data. The report filter  generates setting information or log information of the image processing apparatus  in, for example, a tabular form, and outputs the generated data. The stored-document read filter  reads data from the first data management unit  or a storage device (not shown) included in the image processing apparatus  rather than from outside of the image processing apparatus , and outputs the read data.","The process filter  performs a predetermined process on data received from a pipe connected to the input side of the process filter , and outputs processed data as a process result to a filter connected to the output side of the process filter . The process filter  includes a document process filter  and a document convert filter . The document process filter  performs image conversion on input data and outputs the processed data. The image conversion can be, for example, combining, enlargement, reduction, or the like. The document convert filter  performs rendering on input data and outputs the processed data. Specifically, the document convert filter  converts received PostScript data into bitmap data, and outputs the bitmap data.","The output filter  controls an output operation on data and outputs the data to outside of the image processing apparatus . The output filter  includes a print filter , a stored-document register filter , a mail transmit filter , a facsimile transmit filter , a PC-document transmit filter , and a preview filter .","The print filter  causes the plotter to output (print out) data. The mail transmit filter  attaches data to an electronic mail and transmits the electronic mail. The facsimile transmit filter  transmits data by the facsimile. The PC-document transmit filter  transmits data to the client PC, or the like. The preview filter  previews data on the operation panel  or the like included in the image processing apparatus . Exceptionally, data output from the stored-document register filter  is stored in the storage device included in the image processing apparatus  or the first data management unit  rather than outside of the image processing apparatus .","The application logic layer  performs each function of the image processing apparatus  by combining the filters. With this configuration, the image processing apparatus  can perform various functions by combining the filters and the pipes. Specifically, for example, if a copy function is to be performed, the read filter , the document process filter , and the print filter  can be combined.",{"@attributes":{"id":"p-0063","num":"0062"},"figref":"FIG. 4","b":["300","310","320","41","41","100","300","310","41","310","320","41"],"i":["a","b ","a","b. "]},"The first pipe temporarily holds data received from the input filter  and sends the data to the process filter . The first pipe can also send data to the process filter  in response to a data read request received from the process filter .","The second pipe sends data to the process filter  in response to a data read request received from the output filter . The second pipe also acquires processed data from the process filter  and sends the processed data to the output filter . Because the first pipe and the second pipe are arranged between the filters  to , it is possible to perform continuous operations between the filters  to .",{"@attributes":{"id":"p-0066","num":"0065"},"figref":"FIG. 5","b":["100","300","111","41","300","112","41","113","300","113","111"],"i":["a ","a "]},"Upon detecting input of the data to the first pipe connected to the input side of the process filter , the process filter  starts an operation. The process filter  reads the data from the first pipe (Step S) and processes the read data (Step S). The process filter  then writes the processed data as a process result to the second pipe connected to the output side of the process filter  (Step S). When an operation ends for all of the data input to the first pipe (Yes at Step S), the operation of the process filter  ends. If the operation does not end for all of the data input to the first pipe (No at Step S), the process control returns to Step S.","Upon detecting input of the data to the second pipe connected to the input side of the output filter , the output filter  starts an operation. The output filter  reads the data from the second pipe (Step S). The output filter  then outputs the read data by using an output device (not shown) (Step S). When an operation ends for all of the data input to the second pipe (Yes at Step S), the operation of the output filter  ends. If the operation does not end for all of the data input to the second pipe (No at Step S), the process control returns to Step S.","As described above, because each function is performed by using each of the filters as a component in the image processing apparatus , it is possible to easily customize or expand a function. Specifically, because there is no functional dependency between the filters, i.e., independency of the filters is maintained, it is possible to easily develop a new function (application) by adding a new filter or changing a combination of the filters. Therefore, when a new application is to be implemented, if a filter for performing a part of an operation of the new application is not available, only such a filter needs to be developed and installed. Thus, it is possible to reduce frequency of change to be required in accordance with implementation of a new application in the lower layer than the control layer  and the application logic layer , and a stable platform can be provided.","Therefore, it is possible to improve development efficiency of an application without being influenced by a function provided by the platform or granularity of the I\/F. Moreover, if an application in which a part of a service provided by an existing application is changed is to be implemented, only a part of filters for providing the service needs to be changed. Therefore, it is not necessary to describe a new source code, and the development efficiency can be improved.",{"@attributes":{"id":"p-0071","num":"0070"},"figref":"FIG. 6","b":["100","100"]},"When the input filter  receives data from the user (Step S), the input filter  assigns a page number as an identifier to the received data and writes the data and the identifier in the first pipe in an associated manner (Step S). The received data can include data about a sheet size, a sheet orientation, and the like. It is assumed here that the sheet size A3 is written in association with the data and the identifier. Although it is explained in the first embodiment that the page number is assigned as the identifier, a number can be assigned to data in order, beginning with the first data acquired by the input filter . For example, in the case of image data read by the scanning device , it is possible that a data number is assigned to data in order, beginning with the first data read by the scanning device , and the data number is used as the identifier. The identifier is not limited to such an order. Any identifier can be used if data can be identified with the identifier. For example, a sheet size, resolution, an image quality mode, or the like, of input data can be used as the identifier.","The output filter  then determines whether an execution request of a data output operation is received from the user (Step S). If it is determined that the execution request of the data output operation is received from the user (Yes at Step S), the output filter  sends a data read request including an identifier associated with data to be output and the sheet size A4 as a data generation condition to the second pipe (Step S). The second pipe sends the data read request to the process filter  (Step S). If it is not determined that the execution request of the data output operation is received from the user (No at Step S), the output filter  repeats determination until the output filter  receives the execution request of the data output operation.","The process filter  sends a read request to the first pipe to perform a processing operation on data corresponding to the identifier included in the data read request (Step S). As described above at Step S, the data associated with the identifier is written in the first pipe . Upon receiving the read request from the process filter , the first pipe writes data corresponding to the identifier included in the read request in the process filter  (Step S).",{"@attributes":{"id":"p-0075","num":"0074"},"figref":"FIG. 7","b":["100","41","310","300","302","100","25","24"],"i":"a "},"The first pipe sends the read request received from the process filter  to the input filter  (Step S). The input filter  writes data corresponding to the identifier included in the read request in the first pipe (Step S).","The process filter  then determines whether the data is written in the first pipe (Step S). If it is determined that the data is written in the first pipe (Yes at Step S), the process filter  reads the data from the first pipe and writes the read data in the process filter  (Step S). On the other hand, if it is not determined that the data is written in the first pipe (No at Step S), the process filter  repeats determination until the process filter  determines that the data is written in the first pipe ","Referring back to , the process filter  compares the sheet size A3 of the data written at Step S with the sheet size A4 as the data generation condition, thereby determining a reduction ratio of 71% as the processing condition (Step S). The process filter  reduces the data size based on the determined processing condition (Step S), and writes the processed data in the second pipe (Step S).","The output filter  determines whether the processed data is written in the second pipe (Step S). If it is determined that the processed data is written in the second pipe (Yes at Step S), the output filter  reads the written data from the second pipe outputs the read data (Step S). On the other hand, if it is not determined that the processed data is written in the second pipe (No at Step S), the output filter  repeats determination until the output filter  determines that data is written in the second pipe ","Although it is explained in the first embodiment that the process filter  enlarges or reduces the data size in accordance with an output request, it is possible to configure the input filter  so as to change the data size into a predetermined sheet size when the data is input.",{"@attributes":{"id":"p-0081","num":"0080"},"figref":["FIG. 8","FIG. 8","FIG. 8"],"b":["41","310"],"i":"a "},"The data sets having the sheet sizes A3, A4, and A5 that are written in the first pipe are reduced, enlarged, or generated in full size by the input filter  based on determined processing conditions, and are output as data sets having the sheet size A4. Although it is explained in the first embodiment that the image processing apparatus  has the basic reduce\/enlarge function, it is possible to configure the image processing apparatus  so as to further include the advanced reduce\/enlarge function. Moreover, an image quality mode can be set as the processing condition. The image quality mode includes a character mode for output of a clear character, a photographic mode for output with high image quality, and a character\/photographic mode for output of a document including a character and a photograph in a mixed manner.","As described above, an application is configured by connecting the input filter , the process filter , and the output filter  via the first pipe and the second pipe , so that each of the filters , , and  functions independently whereby it is possible to simplify customization and expansion of a function.","Moreover, the input filter  assigns an identifier to data and the output filter  sends a read request including the identifier and a data generation condition to the process filter , so that a request from the output filter  can be reflected on the input filter  in an easy manner. As a result, it is possible to set detailed settings of a process in the input filter  and the process filter  depending on an output request and to customize a function, resulting in an improved performance.","Furthermore, the image processing apparatus  has the basic reduce\/enlarge function and the advanced reduce\/enlarge function, and the data read request including the sheet size as the data generation condition is sent to the process filter , so that it is possible to enlarge or reduce an image size in accordance with a read request. Therefore, when data cannot be output with a predetermined sheet size due to run out of sheet, sheet jam, or the like, data is reduced, enlarged, or generated in full size so that the processed data can be promptly output from a different feed tray with a different sheet size.",{"@attributes":{"id":"p-0086","num":"0085"},"figref":"FIGS. 9A and 9B"},"When the input filter  receives data from the user (Step S), the input filter  assigns a page number as an identifier to the received data and writes the data and the identifier in the first pipe in an associated manner (Step S). The received data can include data about a sheet size, a sheet orientation, and the like. In the example 1 of the first embodiment, the sheet size A3 and the portrait orientation are written in association with the data and the identifier.","The output filter  determines whether an execution request of a data output operation is received from the user (Step S). If it is determined that the execution request of the data output operation is received from the user (Yes at Step S), the output filter  sends a data read request including an identifier associated with data to be output and the sheet size A4 and the landscape orientation as data generation conditions to the second pipe (Step S). The second pipe sends the data read request including the identifier and the data generation conditions to the process filter  (Step S). If it is not determined that the execution request of the data output operation is received from the user (No at Step S), the output filter  repeats determination until the output filter  receives the execution request of the data output operation.","The process filter  sends a read request to the first pipe to process data corresponding to the identifier included in the data read request (Step S). As described above at Step S, the data associated with the identifier is written in the first pipe . Upon receiving the read request from the process filter , the first pipe writes data corresponding to the identifier included in the read request in the process filter  (Step S). A process from when the first pipe receives the read request from the process filter  to when the data corresponding to the identifier included in the read request is written in the process filter  is the same as that described with reference to , and therefore its explanation is omitted.","The process filter  compares the sheet size A3 and the portrait orientation of the data written at Step S with the sheet size A4 and the landscape orientation as the data generation conditions, thereby determining a reduction ratio of 71% and a rotation angle of 90 degrees as processing conditions (Step S in ). The process filter  reduces the data size and rotates the sheet orientation associated with the data based on the determined processing conditions (Step S), and writes the processed data in the second pipe (Step S).","The output filter  determines whether the processed data is written in the second pipe (Step S). If it is determined that the processed data is written in the second pipe (Yes at Step S), the output filter  reads the written data from the second pipe and outputs the read data (Step S). On the other hand, if it is not determined that the processed data is written in the second pipe (No at Step S), the output filter  repeats determination until the output filter  determines that the data is written in the second pipe ",{"@attributes":{"id":"p-0092","num":"0091"},"figref":["FIG. 10","FIG. 10","FIG. 10"],"b":["41","41","310"],"i":["a ","a"]},"The rotate sort function is performed to rotate a sheet orientation associated with data as appropriate depending on a sheet orientation of a target feed tray. Specifically, the rotation process is performed with settings such that the rotation angle is set to 0 degrees when a sheet orientation associated with data is the same as that of the feed tray and the rotation angle is set to 90 degrees when a sheet orientation associated with data is different from that of the feed tray. In the rotation process with the settings of the rotation angle of 90 degrees, the landscape orientation is changed to the portrait orientation by the rotation angle of 90 degrees, and the portrait orientation is changed to the landscape orientation by the rotation angle of 90 degrees. As shown in , after the data written in the first pipe is enlarged, reduced, or generated in full size, the sheet orientation associated with the data is rotated 0 degrees or 90 degrees as appropriate, and the data is output to a feed tray with the sheet size A4 and the landscape orientation.","Although it is explained in the example 1 of the first embodiment that the image processing apparatus has the basic reduce\/enlarge function and the rotation function, it is possible to configure the image processing apparatus to further include the advanced reduce\/enlarge function. Moreover, an image quality mode can be set as the processing condition. The image quality mode includes a character mode for output of a clear character, a photographic mode for output with high image quality, and a character\/photographic mode for output of a document including a character and a photograph in a mixed manner.","As described above, the input filter  assigns an identifier to data and the output filter  sends a read request including the identifier and a data generation condition to the process filter , so that a request from the output filter  can be reflected on the input filter  in an easy manner. As a result, it is possible to set detailed settings of a process in the input filter  and the process filter  depending on an output request and to customize a function, resulting in an improved performance.","Furthermore, the image processing apparatus has the basic reduce\/enlarge function, the advanced reduce\/enlarge function, and the rotation function, and the data read request including the sheet orientation as the data generation condition is sent to the process filter , so that it is possible to rotate an image in accordance with the read request. Therefore, when data cannot be output in a feed tray with a predetermined sheet size due to run out of sheet, sheet jam, or the like, the data is rotated to change the sheet orientation whereby the processed data can be promptly output from a different feed tray with a different sheet orientation.",{"@attributes":{"id":"p-0097","num":"0096"},"figref":"FIGS. 11A and 11B"},"When the input filter  receives data from the user (Step S), the input filter  assigns a page number as an identifier to the received data and writes the data and the identifier in the first pipe in an associated manner (Step S). The received data can include data about a sheet size, a sheet orientation, resolution in dot per inch (dpi), and the like. In the example 2 of the first embodiment, the resolution of 600 dpi is written in association with the data and the identifier.","Then, the output filter  determines whether an execution request of a data output operation is received from the user (Step S). If it is determined that the execution request of the data output operation is received from the user (Yes at Step S), the output filter  communicates with a receiver and acquires the resolution of 150 dpi corresponding to a fax machine arranged in the receiver (Step S). The output filter  sends a data read request including an identifier associated with data to be output and the resolution of 150 dpi as a data generation condition to the second pipe (Step S). The second pipe sends the data read request to the process filter  (Step S). If it is not determined that the execution request of the data output operation is received from the user (No at Step S), the output filter  repeats determination until the output filter  receives the execution request of the data output operation.","The process filter  sends a read request to the first pipe to process data corresponding to the identifier included in the data read request (Step S). As described above at Step S, the data associated with the identifier is written in the first pipe . Upon receiving the read request from the process filter , the first pipe writes data corresponding to the identifier included in the read request in the process filter  (Step S in ). A process from when the first pipe receives the read request from the process filter  to when data corresponding to the identifier included in the read request is written in the process filter  is the same as that described with reference to , and therefore its explanation is omitted.","The process filter  compares the resolution of 600 dpi of the data written at Step S with the resolution of 150 dpi as the data generation condition, thereby determining a pixel skipping ratio of 25% as a processing condition (Step S). The process filter  perform a pixel skipping process on data based on the determined processing condition (Step S), and writes the processed data in the second pipe (Step S).","The output filter  determines whether the processed data is written in the second pipe (Step S). If it is determined that the processed data is written in the second pipe (Yes at Step S), the output filter  reads the written data from the second pipe and outputs the read data (Step S). On the other hand, if it is not determined that the processed data is written in the second pipe (No at Step S), the output filter  repeats determination until the output filter  determines that the data is written in the second pipe ",{"@attributes":{"id":"p-0103","num":"0102"},"figref":["FIG. 12","FIG. 12"],"b":["41","300","320","310","41","310","320","320"],"i":["a ","b"]},"Although it is explained in the example 2 of the first embodiment that the image processing apparatus has the resolution adjusting function, it is possible to configure the image processing apparatus to further include the basic reduce\/enlarge function, the advanced reduce\/enlarge function, and the rotation function. Furthermore, an image quality mode can be set as the processing condition. The image quality mode includes a character mode for output of a clear character, a photographic mode for output with high image quality, and a character\/photographic mode for output of a document including a character and a photograph in a mixed manner.","As described above, the input filter  assigns an identifier to data and the output filter  sends a read request including the identifier and a data generation condition to the process filter , so that a request from the output filter  can be reflected on the input filter  in an easy manner. As a result, it is possible to set detailed settings of a process in the input filter  and the process filter  depending on an output request and to customize a function, resulting in an improved performance.","Furthermore, the data read request including the sheet size as the data generation condition is sent to the process filter , so that it is possible to enlarge or reduce an image size in accordance with a read request. Therefore, when data cannot be output with a predetermined sheet size due to run out of sheet, or the like, the data size is enlarged or reduced to change a sheet size whereby the data can be promptly output in response to a new output request.","Moreover, the image processing apparatus has the resolution adjusting function, and even if the image processing apparatus has different resolution from that of the fax machine in the receiver to which data is to be output, the image processing apparatus communicates with the receiver to acquire the resolution corresponding to the fax machine in the receiver, and sends a data read request including the acquired resolution as the data generation condition to the process filter , so that the interpolation process or the pixel skipping process can be performed on an image in the input filter  or the process filter . Thus, because the resolution is adjusted as appropriate depending on the resolution corresponding to the fax machine in the receiver, it is possible to promptly transmit image data to the receiver.","As described above, in the first embodiment, the process filter  acquires data corresponding to the identifier included in the read request from the first pipe and compares the acquired data with the data generation condition included in the read request and processes the data in accordance with an output request. In a second embodiment of the present invention, an output filter  includes a data list  in which data is stored and a data retrieving unit . When an output request is received, data corresponding to an identifier included in the output request is retrieved from the data list , and if the data is contained in the data list, the data is output.",{"@attributes":{"id":"p-0109","num":"0108"},"figref":"FIG. 13","b":["300","310","330","41","41","330","331","330","41","330","400","400","300","310","41","41"],"i":["a","b ","b","a","b "]},"The output processing unit  outputs data in response to an output request received from the user. A second data management unit , the data retrieving unit , and the data list  are connected to the output processing unit . The data list  contains data processed by the process filter . Data is registered in the data list  in association with a page number as an identifier, a sheet size, and a sheet orientation. The data retrieving unit  retrieves data from the data list  in response to an output request. Specifically, the data retrieving unit  retrieves data corresponding to the identifier included in a data read request. The second data management unit  manages data registered in the data list  and performs a registration process in the data list . The second data management unit  acquires data processed by the process filter  from the output processing unit  and registers the acquired data in the output filter  or the data list .",{"@attributes":{"id":"p-0111","num":"0110"},"figref":"FIG. 14"},"When the input filter  receives data from the user (Step S), the input filter  assigns a page number as an identifier to the received data and writes the data and the identifier in the first pipe in an associated manner (Step S). The received data can include data about a sheet size, a sheet orientation, and the like. In the second embodiment, the sheet size A3 and the portrait orientation are written in association with the data and the identifier. Although it is explained in the second embodiment that the page number is assigned as the identifier, a number can be assigned to data in order, beginning with the first data acquired by the input filter . For example, in the case of image data read by the scanning device , it is possible that a data number is assigned to data in order, beginning with the first data read by the scanning device , and the data number is used as the identifier. The identifier is not limited to such an order. Any identifier can be used if data can be identified with the identifier. For example, a sheet size, resolution, an image quality mode, or the like, of input data can be used as the identifier.","The output filter  then determines whether an execution request of a data output operation is received from the user (Step S). If it is determined that the execution request of the data output operation is received from the user (Yes at Step S), the data retrieving unit  retrieves data corresponding to the identifier of the data and the sheet size A4 and the landscape orientation as the data generation conditions included in the execution request from the data list  (Step S). On the other hand, if it is not determined that the execution request of the data output operation is received from the user (No at Step S), the output filter  repeats determination.","As shown in , data including the page number 1, the sheet size A4, and the landscape orientation is registered as data corresponding to the page number 1 included in the execution request in a first line of the data list . If the data retrieving unit  determines that the data corresponding to the data generation conditions included in the execution request is present in the data list  (Yes at Step S), the output processing unit  acquires the corresponding data from the data list  and outputs the acquired data (Step S). On the other hand, if the data retrieving unit  does not determine that the data corresponding to the data generation conditions included in the execution request is present in the data list  (No at Step S), the processes at Step S and subsequent steps are performed on the data and the processed data is output.","Data processed by the process filter  is written in the second pipe by the second data management unit . It is possible to configure the second data management unit  so as to store processed data in the data list . Such a configuration will be explained later in examples of the second embodiment.","Although the second data management unit  is included in the output filter , the second data management unit  can be included in the process filter . Moreover, although the process filter  enlarges or reduces the data size in response to an output request in the second embodiment, it is possible to configure the input filter  so as to change a data size into a predetermined sheet size when the data is input.","Because output data on which the basic reduce\/enlarge process and the rotation process have been performed by the above operation is the same as the example shown on the top of , its explanation is omitted. Although the image processing apparatus having the basic reduce\/enlarge function and the rotation function is explained as an example in the second embodiment, it is possible to configure the image processing apparatus to further include the advanced reduce\/enlarge function. Furthermore, an image quality mode can be set as the processing condition. The image quality mode includes a character mode for output of a clear character, a photographic mode for output with high image quality, and a character\/photographic mode for output of a document including a character and a photograph in a mixed manner. Although it is explained in the second embodiment that the process filter  enlarges or reduces the data size by using the sheet size as the data generation condition, a process performed by the image processing apparatus is not limited to the above processes. Alternatively, it is possible that a data read request including a sheet orientation or image resolution as the data generation condition is sent to the process filter  and the process filter  performs the rotation process, the pixel skipping process, the interpolation process, or the like, on data.","If data corresponding to the data generation condition is stored in the data list , the output processing unit  outputs the data from the data list . Therefore, when the data cannot be output due to an error, an interrupt, or the like, the output filter  can promptly output desired data without making a data read request to the input filter .",{"@attributes":{"id":"p-0119","num":"0118"},"figref":"FIG. 15","b":["300","310","330","41","41","300","310","41","41","330","400","334"],"i":["a","b ","a","b"]},{"@attributes":{"id":"p-0120","num":"0119"},"figref":"FIGS. 16A and 16B"},"When the input filter  receives data from the user (Step S), the input filter  assigns a page number as an identifier to the received data and writes the data and the identifier in the first pipe in an associated manner (Step S). The received data can include data about a sheet size, a sheet orientation, and the like. In the example 1 of the second embodiment, the sheet size A3 and the portrait orientation are written in association with the data and the identifier. Although it is explained in the example 1 of the second embodiment that the page number is assigned as the identifier, a number can be assigned to data in order, beginning with the first data acquired by the input filter . For example, in the case of image data read by the scanning device , it is possible that a data number is assigned to data in order, beginning with the first data read by the scanning device , and the data number is used as the identifier. The identifier is not limited to such an order. Any identifier can be used if data can be identified with the identifier. For example, a sheet size, resolution, an image quality mode, or the like, of input data can be used as the identifier.","The output filter  then determines whether an execution request of a data output operation is received from the user (Step S). If it is determined that the execution request of the data output operation is received from the user (Yes at Step S), the data retrieving unit  retrieves data corresponding to the identifier of the data and the sheet size A4 and the landscape orientation as the data generation conditions included in the execution request from the data list  (Step S). In the example 1 of the second embodiment, data including the sheet size A4 and the portrait orientation is stored in the data list  corresponding to the page number 1 as the identifier.","If the data retrieving unit  determines that the data corresponding to the data generation conditions included in the execution request is not present in the data list  (No at Step S in ), the output filter  sends a data read request including the identifier associated with data to be output and the sheet size A4 and the landscape orientation as the data generation conditions to the second pipe (Step S). The second pipe sends the data read request to the process filter  (Step S). The process filter  sends a read request to the first pipe to process the data corresponding to the identifier included in the data read request (Step S). Upon receiving the read request from the process filter , the first pipe writes the data corresponding to the identifier included in the read request in the process filter  (Step S). If it is not determined that the execution request of the data output operation is received from the user (No at Step S), the output filter  repeats determination until the output filter  receives the execution request of the data output operation. If the data retrieving unit  determines that the data corresponding to the identifier and the data generation conditions included in the execution request is present in the data list  (Yes at Step S), the output processing unit  outputs the corresponding data (Step S).","The process filter  compares the sheet size A3 and the portrait orientation of the data written at Step S with the sheet size A4 and the landscape orientation as the data generation conditions, thereby determining a reduction ratio of 71% and a rotation angle of 90 degrees as processing conditions (Step S). The process filter  reduces the data size and rotate the sheet orientation associated with the data based on the determined processing conditions (Step S), and writes the processed data in the second pipe (Step S).","The output filter  determines whether the processed data is written in the second pipe (Step S). If it is determined that the processed data is written in the second pipe (Yes at Step S), the second data management unit  registers the written data in the data list  (Step S), and deletes the previously registered data including the page number 1, the sheet size A4, and the portrait orientation from the data list  (Step S). The output processing unit  reads the written data from the second pipe and outputs the read data (Step S). On the other hand, if it is not determined that the processed data is written in the second pipe (No at Step S), the output filter  repeats determination until the input filter  determines that the data is written in the second pipe ","It is explained in the example 1 of the second embodiment that if the data corresponding to the identifier included in the read request is present in the data list  and if the data registered in the data list  has different data generation conditions from those of the data included in the read request, the data is deleted from the data list . Alternatively, it is possible that, if the data corresponding to one of data generation conditions is present in the data list , the data is not deleted from the data list  and new data is registered together with the data in the data list  as described below in an example 2 of the second embodiment.","Furthermore, although it is explained in the example 1 of the second embodiment that the process filter  enlarges or reduces the data size or rotates the sheet orientation associated with the data in accordance with an output request, it is possible to configure the input filter  so as to change the data size into a predetermined sheet size or change the sheet orientation associated with the data in a predetermined sheet orientation when the data is input.","Because output data on which the basic reduce\/enlarge process and the rotation process have been performed by the above operation is the same as the example shown on the top of , its explanation is omitted. Although the image processing apparatus having the basic reduce\/enlarge function and the rotation function is explained as an example in the example 1 of the second embodiment, it is possible to configure the image processing apparatus to further include the advanced reduce\/enlarge function. Furthermore, an image quality mode can be set as the processing condition. The image quality mode includes a character mode for output of a clear character, a photographic mode for output with high image quality, and a character\/photographic mode for output of a document including a character and a photograph in a mixed manner. Although it is explained in the example 1 of the second embodiment that the process filter  enlarges or reduces the data size by using the sheet size as the data generation condition, a process performed by the image processing apparatus is not limited to the above processes. Alternatively, it is possible that a data read request including a sheet orientation or image resolution as the data generation condition is sent to the process filter  and the process filter  performs the rotation process, the pixel skipping process, the interpolation process, or the like, on data.","As described above, if the data registered in the data list  have different data generation conditions from those of the data included in the read request, the data is deleted from the data list . Thus, if the data cannot be output due to an error, an interrupt, run out of sheet, or the like, when data is to be output from a different feed tray again, data corresponding to the identifier and the data generation conditions in the data list  can be used. Therefore, it is possible to promptly output the data again from a different feed tray without sending an unnecessary read request.","If the data cannot be output due to an error, an interrupt, run out of sheet, or the like, and if the data corresponding to the identifier and the data generation condition is not present in the data list  when the data is to be output from a different feed tray again, a read request can be sent to the second pipe . Therefore, it is possible to prevent data amount from being increased in the second data management unit  by deleting unnecessary data.",{"@attributes":{"id":"p-0131","num":"0130"},"figref":"FIG. 17","b":["300","310","330","41","41","300","310","41","41","330","400","334"],"i":["a ","b ","a","b"]},{"@attributes":{"id":"p-0132","num":"0131"},"figref":"FIGS. 18A and 18B"},"When the input filter  receives data from the user (Step S), the input filter  assigns a page number as an identifier to the received data and writes the data and the identifier in the first pipe in an associated manner (Step S). The received data can include data about a sheet size, a sheet orientation, and the like. In the example 2 of the second embodiment, the sheet size A3 and the portrait orientation are written in association with the data and the identifier. Although it is explained in the example 2 of the second embodiment that the page number is assigned as the identifier, a number can be assigned to data in order, beginning with the first data acquired by the input filter . For example, in the case of image data read by the scanning device , it is possible that a data number is assigned to data in order, beginning with the first data read by the scanning device , and the data number is used as the identifier. The identifier is not limited to such an order. Any identifier can be used if data can be identified with the identifier. For example, a sheet size, resolution, or an image quality mode of received data, or the like, can be used as the identifier.","The output filter  then determines whether an execution request of a data output operation is received from the user (Step S). If it is determined that the execution request of the data output operation is received from the user (Yes at Step S), the data retrieving unit  retrieves data corresponding to the identifier of the data and the sheet size A4 and the landscape orientation as the data generation conditions included in the execution request from the data list  (Step S). In the example 2 of the second embodiment, data including the sheet size A4 and the portrait orientation is registered as data corresponding to the page number 1 in the data list .","If the data retrieving unit  determines that the data corresponding to the data generation conditions included in the output request is not present in the data list  (No at Step S in ), the output filter  sends a data read request including the identifier corresponding to data to be output and the sheet size A4 and the landscape orientation as the data generation conditions to the second pipe (Step S). The second pipe sends the data read request to the process filter  (Step S). The process filter  sends a read request to the first pipe to perform a processing operation on data corresponding to the identifier included in the data read request (Step S). Upon receiving the read request from the process filter , the first pipe writes the data corresponding to the identifier included in the read request in the process filter  (Step S). If it is not determined that the execution request of the data output operation is received from the user (No at Step S), the output filter  repeats determination until the output filter  receives the execution request of the data output operation. On the other hand, if the data retrieving unit  determines that the data corresponding to the identifier and the data generation conditions included in the output request is present in the data list  (Yes at Step S), the output processing unit  outputs the corresponding data (Step S).","The process filter  compares the sheet size A3 and the portrait orientation of the data written at Step S with the sheet size A4 and the landscape orientation as the data generation conditions, thereby determining a reduction ratio of 71% and a rotation angle of 90 degrees as processing conditions (Step S). The process filter  reduces the data size and rotates the sheet orientation associated with the data based on the determined processing conditions (Step S), and writes the processed data in the second pipe (Step S).","The output filter  determines whether the processed data is written in the second pipe (Step S). If it is determined that the processed data is written in the second pipe (Yes at Step S), the second data management unit  registers the written data, i.e., the data corresponding to the page number 1, the sheet size A4, and the landscape orientation, in the data list  together with the registered data, i.e., the data corresponding to the page number 1, the sheet size A4, and the portrait orientation (Step S). The output processing unit  reads the written data from the second pipe and outputs the read data (Step S). On the other hand, if it is not determined that the processed data is written in the second pipe (No at Step S), the output filter  repeats determination until the output filter  determines that the data is written in the second pipe ","Furthermore, although it is explained in the example 2 of the second embodiment that the process filter  enlarges or reduces the data size or rotates the sheet orientation associated with the data in accordance with the output request, it is possible to configure the input filter  so as to change a data size into a predetermined sheet size or change the sheet orientation associated with the data in a predetermined sheet orientation when the data is input.","Because output data on which the basic reduce\/enlarge process and the rotation process have been performed by the above operation is the same as the example shown on the top of , its explanation is omitted. Although the image processing apparatus having the basic reduce\/enlarge function and the rotation function is explained as an example in the example 2 of the second embodiment, it is possible to configure the image processing apparatus to further include the advanced reduce\/enlarge function. Furthermore, an image quality mode can be set as the processing condition. The image quality mode includes a character mode for output of a clear character, a photographic mode for output with high image quality, a character\/photographic mode that for output of a document including a character and a photograph in a mixed manner. Although it is explained above that the process filter  enlarges or reduces the data size by using the sheet size as the data generation condition, a process performed by the image processing apparatus is not limited to the above processes. Alternatively, it is possible that a data read request including a sheet orientation or image resolution as the data generation condition is sent to the process filter  and the process filter  performs the rotation process, the pixel skipping process, the interpolation process, or the like, on data.","As described above in the example 2 of the second embodiment, if the data corresponding to the identifier included in the read request is present in the data list  and if the data registered in the data list  have different data generation conditions from those of the data included in the read request, the data registered in the data list  is not deleted and is registered together with the data included in the read request. Thus, when the data registered in the data list  needs to be output again, it is possible to promptly output the data again without sending the read request.","Although the image processing apparatuses according to the first and the second embodiments above are explained above, various modifications and improvements can be made to the embodiments.","According to an aspect of the present invention, it is possible to simplify customization and expansion of a function by individually performing a function of each filter.","Although the invention has been described with respect to specific embodiments for a complete and clear disclosure, the appended claims are not to be thus limited but are to be construed as embodying all modifications and alternative constructions that may occur to one skilled in the art that fairly fall within the basic teaching herein set forth."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":["FIG. 9A","FIG. 9B","FIG. 9A"]},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":["FIG. 11A","FIG. 11B","FIG. 11A"]},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0033","num":"0032"},"figref":["FIG. 16A","FIG. 16B","FIG. 16A"]},{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIG. 17"},{"@attributes":{"id":"p-0035","num":"0034"},"figref":["FIG. 18A","FIG. 18B","FIG. 18A"]}]},"DETDESC":[{},{}]}
