---
title: Method and system for sending, routing, and receiving information using concise messages
abstract: A system and method are provided for communication between a communication device and a content provider associated with an internet domain name and a server. The system includes a network with a user interface, an internet connection, and an interface to the content provider's internet domain. A communication device user enters a concise message request which includes a channel, a designator and, optionally, a request instruction. The combination of the channel and the designator specify a location on the internet at which routing instructions reside for responding to the concise message request and generating a concise message response for output to the communication device. Concise message documents can be generated for effecting financial transactions such as purchases and payments via SMS. CMRL can also be used to route person-to-person messaging through a content provider's internet domain at which the users may be registered.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08457043&OS=08457043&RS=08457043
owner: Scientific Media
number: 08457043
owner_city: Setauket
owner_country: US
publication_date: 20080521
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["RELATED APPLICATIONS","FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE INVENTION","EXAMPLE 1","CMRL Document Structure","EXAMPLE 2","The System","EXAMPLE 3","DOTGO Sample Document 1","EXAMPLE 4","DOTGO\u2122 Sample Document 2","EXAMPLE 5","Keywords","EXAMPLE 6","Session Variables","EXAMPLE 7","Anchors","EXAMPLE 8","Implementing a DOTGO\u2122 Engine","EXAMPLE 9","M-Commerce\u2014Purchase Transaction","EXAMPLE 10","M-Commerce: Purchase Transaction","EXAMPLE 11","M-Commerce: Payment Transaction","EXAMPLE 12","DOTGO\u2122 Messaging"],"p":["This application claims the priority of U.S. Provisional Application No. 60\/939,296, filed May 21, 2007, and U.S. Provisional Application No. 60\/983,554, filed Oct. 29, 2007, both of which are incorporated herein by reference.","The present invention relates to a method for information dissemination and information retrieval using concise messages sent over a variety of media, including mobile phone text messaging. Specifically, the present invention allows concise message content to be made available and readily accessible to those seeking information with communications devices such as mobile phones.","Mobile phones have become ubiquitous in the US over the past decade. SMS (short message service), popularly known as \u201ctext messaging\u201d, has grown in popularity over the past several years to become one of the most widely used mobile phone features. Projections estimate that 80 billion SMS messages will be sent per month in 2008. As a result, services have begun to emerge which seek to provide useful concise information to mobile phone users by SMS (and other media), such as weather forecasts, sports scores, etc. Since many mobile phones are limited by small displays and restricted input mechanisms, a method of quickly and easily locating concise content is of interest to mobile phone users and hence to content providers seeking to enter and serve the mobile market.","One approach to address this need is to provide services for end users by creating repositories of useful information and making that information available via some kind of search engine. Such a model has been adopted by the SMS service of 4info.net, under the short code $INFO (44636), the SMS service of GOOGLE\u00ae, under the short code GOOGLE (466453), and others. For example, the text message request \u201cweather 90210\u201d sent to the 4info.net short code 4INFO may return a weather forecast for the zip code 90210. The primary limitation of this approach is that it requires the service provider to provide all possible information in which an end user might be interested. However, if an end user wishes to find a review of a particular vintage of wine and neither 4info.net nor GOOGLE\u00ae offer wine review, the user will be disappointed. The widespread usage of mobile phones across all demographics and the vast variety of information that has been made available on the internet suggest that this approach can only be a partial solution.","A second approach to address this need allows content providers to offer content via mobile media. This is the approach adopted by, e.g., Mobivity.com, which allows content providers to reserve SMS \u201ckeywords\u201d under the Mobivity.com \u201cshared\u201d short code 95495. For example, a news organization may reserve the keyword \u201cnews\u201d and return breaking news headlines in response to the text message request \u201cnews\u201d sent to the short code 95495. There are several limitations of this approach. First, there is no method for searching for content across the various shared short codes and no way for end users to search for short codes using their mobile devices. For example, wine reviews may be offered on one shared short code and breaking news headlines on another. The user would be required to remember which is which, if they could even find the shared short codes in the first place. Next, as more and more content becomes available, the logical organization of content under a shared short code becomes more and more difficult, especially as different content providers begin to offer similar types of content. For example, if a news organization was to reserve the keyword \u201ccnn\u201d, the end user would reasonably expect that \u201ccnn\u201d refers to the news organization CNN\u00ae, when, in fact, it might refer to some other news organization. Should CNN reserve the keyword \u201ccnn,\u201d the keyword \u201cnews,\u201d or some other keyword? Next, shared short codes make no provision for allowing multiple authorship of content. Shared short code services can provide a single keyword to a large organization such as a university but present no mechanism for allowing the tens of thousands of students, faculty, and staff of the university to make their content available under the university keyword. Finally, this approach typically treats different media such as SMS and voice independently, requiring the content provider to prepare their content for each medium individually, by entirely unrelated mechanisms.","Similar issues present themselves in the area of mobile payment systems, such as those offered by OBOPAY\u2122 and PAYPAL\u00ae, and the GILBARCO\u00ae RFID technology. These payment systems typically allow for payments to be sent either directly to the mobile phone carrier (\u201cPremium Billing\u201d) or from one mobile phone user to the account of another mobile phone user or a merchant.","For these payment systems, much of the related art is focused on identifying a payee via a single identifier. For example, PAYPAL\u00ae Mobile allows any user to request money from any other user by SMS with the syntax \u201cget x from y\u201d, where x is an amount and y is a phone number or email address. Sending the text message \u201cget 5 from 4085552388\u201d to the short code PAYPAL (729725) would send a request for $5.00 to the phone number 408-555-2388 via the PAYPAL\u00ae payment system. Other related art allows for mobile payments to be requested from or directed to a user specified by a word identifying an account. For example, a payment request by SMS might read \u201cgpay Starbucks357 3.50\u201d. In this example, the payee is identified by the word \u201cStarbucks357,\u201d and the amount to be paid is $3.50.","One of the main problems with existing payment systems such as PAYPAL\u00ae Mobile or OBOPAY arises in the field of mobile commerce (\u201cm-commerce\u201d). In particular, larger organizations such as the STARBUCKS\u00ae chain of cafes might hope to identify each store with an identifier such as \u201cstarbucksXXX,\u201d where XXX is the store number. But who has authority over the \u201cstarbucks\u201d identifiers? The related art provides no clear mechanism for assigning and managing ownership of these identifiers with STARBUCKS\u00ae and STARBUCKS\u00ae franchise cafes or for presenting someone unrelated to STARBUCKS\u00ae from reserving \u201cstarbucksYYY,\u201d where YYY is a non-reserved (or as yet non-existent) STARBUCKS\u00ae store. Does the identifier \u201camazon\u201d refer to the on-line merchant AMAZON.COM\u00ae or to some other merchant? Does the identifier \u201cbuy\u201d refer to the on-line merchant Buy.com or to some other merchant? Here the problem is very similar to the ambiguity regarding ownership of the keywords \u201ccnn\u201d and \u201cnews\u201d described previously.","A second problem with the existing methods as they relate to m-commerce arises from the fact that they make no provision for associating a payment with a particular transaction, for example at a point-of-sale location. For example, a particular STARBUCKS\u00ae franchise might want to allow users to text in a payment for an order which has been entered at cash register. However, there is no a priori connection between the order on the cash register and the payment sent in by the user. Hence, the current methods address solely the question of sending money, instead of offering a more comprehensive solution for selling products.","A third problem of current methods as they relate to m-commerce is the need to disclose personal information such as a phone number, email address, or account name when requesting or sending a payment. For example in order to allow a business to request a payment from a user using the PAYPAL\u00ae system (e.g., if an order is registered at a cash register), the user would be required to disclose their phone number so that the business could send the request to that user.","Finally, the existing methods as they relate to m-commerce are typically designed to be used person to person and often do not provide an integrated means for a computer (e.g. a cash register) to request or receive payment from a mobile user for a particular transaction.","A separate though related problem in the prior art arises in the field of person-to-person communication. Current person-to-person mobile phone communication, including text messaging and voice, require that a person divulge their mobile phone number to other mobile phone users. While this is acceptable in some cases, it becomes unacceptable if a user wishes to allow a broader audience to contact them on their mobile phone, since no method exists to \u201crevoke\u201d or \u201cun-publicize\u201d a phone number that has been given out (e.g. on a website on the internet). Existing mobile phone person-to-person communication is extremely limited in its provisions for managing permissions for incoming messages or calls. In addition, a mobile phone user may maintain several distinct identities (such as different accounts at MYSPACE\u00ae and FACEBOOK\u00ae). The prior art makes no provision for carrying these different identities over to mobile phone communication. Finally, mobile phone communication, and text messaging in particular, provide no built-in mechanism for one-to-many and many-to-many messaging, and require custom and proprietary solutions such as the service offered by Twitter.com. The problem with services such as TWITTER\u2122 is that they do not allow a content provider to provide a solution branded to the content provider. For example, Twitter makes no provision for allowing MYSPACE\u00ae users to broadcast messages to other MYSPACE\u00ae users using their myspace.com accounts.","These problems in the prior art suggest the need for a general, flexible, and standardized method and system which allows anyone with an internet domain name to disseminate content to mobile phone users.","Accordingly, the need remains for more versatile methods for searching for and disseminating information by mobile phones, and for providing means for conducting financial transactions using mobile phones, to address the needs of the ever growing number of mobile phone users who rely on their phones for more than merely voice communication.","According to the present invention, a method and system are provided for sending and receiving information to and from any individual, business entity, or organization with an internet domain name using messaging systems such as mobile phones with SMS text messaging.","In one aspect of the invention, a system and method are provided for communication between a communication device and a content provider associated with an internet domain name and a server. The system includes a network with a user interface for receiving concise message requests from and transmitting concise message responses to the communication device, an internet connection, and an interface to the content provider's server. A communication device user enters a concise message request which includes a channel, a designator and, optionally, a request instruction. The combination of the channel and the designator specify a location on the internet at which routing instructions reside for responding to the concise message request and generating a concise message response for output to the communication device.","In one embodiment of the invention, the communication device is a mobile phone having a short message service function and the channel is a short code corresponding to a top-level internet domain. In another embodiment, the channel provides access to the network and the designator contains the entire internet domain name. The concise message documents are written in a language referred to as Concise Message Routing Language (CMRL). Concise message documents can be generated for effecting financial transactions such as purchases and payments via SMS. CMRL can also be used to route person-to-person messaging through a content provider's internet domain at which the users may be registered.","The present invention provides a system of multi-media content organization and dissemination. A mechanism is provided by which users or entities with possibly multiply-authored content (collectively, \u201ccontent providers\u201d) can disseminate their content via SMS\/MMS (short message service\/multimedia message service), voice, or other media on an interactive or scheduled basis to \u201csubscribers\u201d. The system provides an intuitive interface that allows the subscribers to locate and access content that is of interest. The invention also provides a mechanism by which subscribers can be billed, a mechanism by which subscribers can send messages to other subscribers, and mechanisms for integrating advertising into the concise message content and tracking the effectiveness of the advertising.","The system and method according to the present invention achieve the above-identified goals and more by introducing a novel content organization scheme together with the concept of a \u201cconcise message request.\u201d Using these two concepts, the present invention implements a system whereby users can request content from specific content providers by addressing and sending concise message requests to the content provider from their mobile phones. Further, it allows for content from content providers to be indexed and hence searched using concise message requests not addressed directly to a particular content provider.","An important aspect of the present invention is the content organization. One embodiment of the invention provides an organizational structure for concise messaging content which replicates the internet domain name structure. In the exemplary embodiment for SMS text messaging, rather than allowing each content provider (or other entity with an internet domain) to select an SMS keyword which users can send via SMS to an SMS short code (as is typical in the related art), keywords are assigned to content providers in such a way that the short code and keyword taken together uniquely identify the internet domain name of the content provider (the \u201cconcise message request addressee\u201d). For example, the content provider of weather news and information which operates the domain name \u201cweather.com\u201d could make content available when a user sends a concise message request consisting of a text message containing the word \u201cweather\u201d to the short code DOTCOM (corresponding to 368266 on a standard mobile phone keypad). Here, the combination of the word \u201cweather\u201d together with the short code DOTCOM (368266) in the concise message specifies the \u201caddress\u201d of the concise message request and uniquely identifies the domain name weather.com.","An important aspect of the invention is the concept of using a standardized and open language to describe concise messaging services. One embodiment of the language, Concise Message Routing Language (CMRL), which may alternatively be referred to as CMML for \u201cConcise Message Markup Language\u201d, provides a means for content providers to describe their concise message content in a way that can be independent of the media used to request and disseminate it, and in a way that can be indexed and searched. The language allows for multiple authorship of content by providing the idea of concise message redirects. These redirects instruct the system to look for content in another CMRL document, which may be managed by another content provider. CMRL together with concise message redirects form a directed graph structure of concise message content. The nature of this directed graph allows for content to be located with concise message requests by finding the most probable route through the document graph based on the content of the subscriber concise message request.","The organizational structure and system allows for concise message purchase or payment requests to be sent to the system and properly routed to the appropriate account as designated by the content provider. This organizational structure provides a solution to the problems associated with the related art regarding identifying the payee (e.g., a particular STARBUCKS\u00ae franchise) by using the inventive routing method. Specifically, the present invention enforces a one-to-one mapping between Internet domain name and concise message request address, and allows only the owner of the internet domain to specify the content returned or action taken when concise message requests are routed to the content provider. This permits, for example, only STARBUCKS\u00ae, which operates the starbucks.com domain name, to assign its franchises identifiers under the \u201cstarbucks\u201d keyword on the short code DOTCOM (368266), and guarantees to subscribers that they are accessing the owner of the domain name \u201cstarbucks.com\u201d when they address requests to \u201cstarbucks\u201d at the shortcode DOTCOM (368266). In this example, STARBUCKS\u00ae might assign the identifier \u201cstore123\u201d to a particular STARBUCKS\u00ae franchise. Subscribers could then make a payment of $4.99 to that franchise by sending the hypothetical concise message request \u201cstarbucks store123 4.99\u201d to DOTCOM (368266).","Another aspect of the present invention provides a built-in mechanism for allowing a content provider to associate a payment with a particular transaction, without the need for a subscriber to disclose personal information. Because a transaction is initiated via concise message request by a subscriber, there is no need for the subscriber to divulge personal information (e.g., mobile phone number, email address, account name, etc.) directly to the content provider. The system provides a mechanism by which a content provider can specify a URL to be called (an \u201cengine\u201d) when a transaction is initiated, completed, and\/or terminated by the subscriber. For example, if a cashier in a store or restaurant operated by the content provider were to ring up a purchase, the cashier could then instruct the cash register to accept a payment by SMS and give the customer a corresponding purchase number. The customer could then send that purchase number via concise message addressed to the content provider via the inventive system in order make the payment. This feature, namely that of providing a concrete way to associate a payment with a particular transaction, makes the inventive system particularly useful for person-to-computer (e.g., point-of-sale) transactions.","According to the present invention, all aspects of a transaction can be handled, including: identifying the item being requested; informing the purchaser of any ambiguities in their request; informing the purchaser about the price, availability, and other information related to the items they have chosen to buy; confirming or possibly requesting billing and\/or account information from the purchaser; confirming the purchase with the purchaser; debiting the purchaser's account, credit card, bank account, or other method of payment; crediting the content provider for the purchase; logging all aspects of the transaction and possibly making some or all of this information available to the purchaser, content provider, or both.","Still another aspect of the invention is to provide a means for utilizing the concise message routing system described herein to provide a mobile-phone-based person-to-person messaging system without requiring the parties to disclose their mobile phone numbers. By allowing the concise message request address to optionally include an account name associated with the domain name, users can address messages to each other using the present invention by addressing the concise message requests to the subscriber's user name at a particular domain. For example, in one embodiment of the invention, a subscriber identified by the website account subscriber1 at the MYSPACE\u00ae website myspace.com could contact a second subscriber identified by the website account subscriber2 at myspace.com by sending a concise message request addressed to \u201csubscriber2@myspace\u201d to DOTCOM (368266). This form of communication avoids the drawbacks of publicizing one's mobile phone number and gives the user greater control over who has access to his or her mobile phone for calls or text messages. The system allows subscribers to grant, revoke, and otherwise manage permissions related to who they wish to receive messages from, when (i.e. times of day, days of week, etc.) they wish to receive or not receive messages, and via which media (e.g. voice, SMS, e-mail, web-based account, etc.) they wish to receive the messages.","A related aspect of the invention is that the same system allows users to exchange messages on one-to-one, one-to-many, and many-to-many bases and allows the messaging system to be integrated into other, existing messaging systems, including instant-messaging systems and email. For example, in addition to the one-to-one operation described previously (one-to-one), a subscriber could contact a number of \u201cfollowers\u201d by sending a single concise message request (one to many), and many subscribers could contact a number of \u201cfollowers\u201d by sending single concise message requests (many to many). Or, for example, in one embodiment of the invention, a subscriber identified by the website account subscriber1 at the MYSPACE\u00ae website myspace.com could contact a second subscriber identified by the website account subscriber2 at myspace.com by sending a concise message request addressed to \u201csubscriber2@myspace\u201d to DOTCOM (368266), which could be delivered to subscribers using an instant messaging system operated by myspace.com, if myspace.com determined that subscriber2 was currently logged in to its instant messaging system. Alternatively, the message could be delivered to subscriber2 by email or otherwise handled at the discretion of myspace.com.","The inventive system accepts request for content from subscribers which are in the form of \u201cconcise message requests.\u201d The content returned in response to a concise message request is referred to \u201cconcise message content.\u201d Concise message content may include any combination of text, audio, video, or other multi-media content. In one embodiment, concise message requests are requests for content which have the form shown in . In this embodiment, concise message requests consist of a minimum of two parts, the \u201cchannel\u201d and \u201cdesignator\u201d, followed by an optional \u201cinstruction,\u201d which may consist of one or more of: a \u201cpath,\u201d an \u201cargument,\u201d a \u201cdirective,\u201d and a \u201cdirective argument.\u201d The channel is the mechanism by which the message is received by the system. For example, if the concise message request is received as a text message sent to the short code DOTCOM, then the channel would specify DOTCOM. Alternatively, if the concise message request was spoken by a user making a voice call to the system, the channel would specify that the request was a voice request on a particular phone number. The designator is the portion of the concise message request that is used to specify the content provider to whom the message is destined. In one embodiment for text messaging, the designator is the first string of non-space characters in the body of the text message.","Taken together, the channel and the designator completely specify the \u201caddressee\u201d of the concise message request, which is mapped uniquely to an internet domain name. In one embodiment, the available short codes for SMS text messaging include DOTCOM (368266), DOTEDU (368338), DOTGOV (368468), DOTNET (368638), and DOTORG (368674). In this embodiment, a text message with the body \u201cgoogle\u201d sent to the shortcode DOTCOM would have the channel DOTCOM, the designator \u201cgoogle\u201d, and would be mapped to the internet domain name \u201cgoogle.com\u201d. Similarly, a text message with the body \u201cwikipedia james brown\u201d sent to the short code DOTORG would have the channel DOTORG, the designator \u201cwikipedia\u201d, and the instruction \u201cjames brown\u201d. In this case the channel and the designator would be mapped to the internet domain name \u201cwikipedia.org\u201d. Finally, the text message \u201cgoogle.com\u201d sent to the short code DOTEDU would have the channel DOTEDU, the designator \u201cgoogle.com\u201d, and would be mapped to the internet domain name \u201cgoogle.com\u201d. In this embodiment, if the designator explicitly specifies the top-level domain, this top-level domain takes precedence over the top-level domain associated with the channel, so that the channel solely performs the function of initiating communication with the system. Thus, while the combination of the channel and the designator provides the means for mapping the text message to the content provider google.com, the designator alone provided the complete internet domain name.","In addition, the designator can optionally specify account information associated with the domain. In one embodiment, the designator has the form \u201cuser@domain\u201d. The content provider can then specify how concise message requests with the optional account information in the designator are to be handled, on an account-by-account basis. For example, the routing instructions set up for google.com could specify that all requests with the designator \u201csupport@google\u201d be delivered via regular e-mail to a particular e-mail address, and that all other account requests to the google domain result in an SMS text message being delivered to a particular user. The designator may include an additional character string such as \u201c+\u201d immediately following the domain name to denote additional functionality.","The remaining parts of the concise message request, namely the \u201cpath\u201d, \u201cargument\u201d, \u201cdirective\u201d, and \u201cdirective argument\u201d are discussed in more detail later in this document. It is important to note that the user may or may not be able to explicitly specify some or all of the components of a concise message request depending on the device being used to initiate the concise message request. For example, a user using the standard text messaging functionality of a mobile phone can select the channel (in this case the short code) and completely specify all other parts of the concise message request, within the limitations due to the allowable length and character set of the text message. A concise message request initiated by a custom application such as those which run on mobile devices such as the APPLE\u00ae iPhone or other mobile phones, however, could provide a richer user interface for defining the channel, designator, path, argument, directive, and\/or directive argument, or could limit the possible selections for any or all of these components. The device could, for example, automatically send concise message requests to the designator \u201cstarbucks\u201d on the DOTCOM channel, eliminating the need for the user to explicitly select that designator\/channel pair.","Once the channel and the designator of a concise message request have been mapped to an internet domain name, the system consults the content corresponding to the internet domain name to further handle the request. This content is expressed in one embodiment using the Concise Message Routing Language (CMRL), alternatively referred to as CMML, which is the language used by the inventive system to describe concise message routing and content. In this embodiment, one or more CMRL documents may reside at predetermined locations on web-, ftp-, or other internet servers identified by the internet domain name. For example, the channel and designator resulting in the domain name \u201cgoogle.com\u201d may result in the CMRL document \u201cindex.cmrl\u201d located at the URL for google.com being retrieved and processed. Alternatively, the CMRL document may be retrieved from another pre-specified location, or may be retrieved from the servers of the inventive system if the content provider has previously uploaded the CMRL via a web-based content provider interface. In addition, the CMRL may be optionally encrypted.","In the exemplary embodiment, CMRL is an XML-based language that defines concise message content and routing information. One of the fundamental aspects of CMRL is the definition of a hierarchy that specifies the patterns that are expected in concise message request instructions. The hierarchy of patterns forms a CMRL document structure that is used to route an incoming concise message request to a concise message response. A CMRL document can include other CMRL documents via \u201credirect\u201d statements, effectively merging the documents to form a single CMRL document structure. Redirect statements also allow for permissions related to m-commerce, advertising, and other aspects of content dissemination to be managed when documents are effectively merged. These aspects of CMRL are vital for multiply-authored content.","Key elements, nodes, and tags used in one embodiment of the CMRL language are defined as follows:","\u201canchor\u201d\u2014The anchor element defines a concise message link within concise message content. When the content is sent to the user, the anchor element is replaced with the text contained within the anchor tag, if any, followed by a number in parenthesis corresponding to the reply the user should send to follow the link. When the user replies with this link text, the terminating node in the anchor is evaluated.","For example:",{"@attributes":{"id":"p-0040","num":"0039"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\u2003<match pattern=\u201c\u201d>"]},{"entry":[{},"\u2003\u2003<message>"]},{"entry":[{},"\u2003\u2003\u2003<content>Read <anchor>our blog<rss"]},{"entry":[{},"href=\u201chttp:\/\/www.example.com\/rss.xml\u201d\/><\/anchor><\/content>"]},{"entry":[{},"\u2003\u2003<\/message>"]},{"entry":[{},"\u2003<\/match>"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}},"br":{}},"\u201ca\u201d\u2014The a element is a shortcut for an anchor tag that evaluates a query. The query attribute specifies the query to execute if the link is followed. For example:",{"@attributes":{"id":"p-0042","num":"0041"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\u2003<match pattern=\u201c\u201d>"]},{"entry":[{},"\u2003\u2003<message>"]},{"entry":[{},"\u2003\u2003\u2003<content>Get help on <a query=\u201cexample.com"]},{"entry":[{},"help\u201d>Example<\/a>.<\/content>"]},{"entry":[{},"\u2003\u2003<\/message>"]},{"entry":[{},"\u2003<\/match>"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"In this example, the message will be displayed as e.g. \u201cGet help on Example(1).\u201d If the user responds to the number corresponding to the link (1 in this example) then the query \u201cexample.com help\u201d is executed as if the user had entered the text directly.","\u201cblock\u201d\u2014The block element is a terminating node that allows various \u201chelper\u201d tags to be associated with another terminating node. A block must contain exactly one terminating node, but can contain additional CMRL nodes as well, including zero or one keywords tag or zero or more set tags. A block allows a terminating match to execute more than one statement. For example, the following match:",{"@attributes":{"id":"p-0045","num":"0044"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<match pattern=\u201cvote\u201d>"]},{"entry":[{},"\u2003<block>"]},{"entry":[{},"\u2003\u2003<keywords>"]},{"entry":[{},"\u2003\u2003\u2003<keyword>red<\/keyword>"]},{"entry":[{},"\u2003\u2003\u2003<keyword>blue<\/keyword>"]},{"entry":[{},"\u2003\u2003<\/keywords>"]},{"entry":[{},"\u2003\u2003<set name=\u201cvoted\u201d>1<\/set>"]},{"entry":[{},"\u2003\u2003<engine ref=\u201chttp:\/\/www.example.com\/cgi-bin\/vote\u201d \/>"]},{"entry":[{},"\u2003<\/block>"]},{"entry":[{},"<\/match>"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}},"br":{}},"\u201cbr\u201d\u2014The br element specifies a line break.","\u201ccmrl\u201d\u2014The cmrl tag is the root tag for CMRL documents,","\u201ccontent\u201d\u2014The content node is contained in a message and specifies the content of a message.","\u201cengine\u201d\u2014The engine element is used to call an external program (i.e., CGI script). The only requirement of an external engine program is that it prints out exactly one terminating node. The engine tag must contain the attribute href which specified the URL of the engine.","\u201cfollow\u201d\u2014The follow tag allows a user to register their phone number to a query as a \u201cfollower.\u201d Users who are registered as followers of a query will receive the argument of incoming concise message requests that result in the query and that include a \u201c+\u201d immediately following the designator. For example, a user who is following the query \u201cfacebook partyline\u201d would receive the message \u201chello\u201d when the concise message request \u201cfacebook+partyline hello\u201d is routed. Similarly, a user following the query \u201cnews@myspace\u201d would receive the message \u201cNo news today\u201d when the concise message request \u201cnews@myspace+ No news today\u201d.","\u201cforward\u201d\u2014The forward tag specifies that the argument of a concise message request be sent to the user who has registered to the corresponding register tag of the query. In addition, the forward tag also sends the argument of the query to all followers of the query if a \u201c+\u201d is present immediately following the designator in the concise message query (see the follow tag).","\u201cget\u201d\u2014The get element is used to insert the contents of a session variable (which are set either with set or an input). For example:",{"@attributes":{"id":"p-0053","num":"0052"},"tables":{"@attributes":{"id":"TABLE-US-00004","num":"00004"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\u2003<match pattern=\u201cwelcome\u201d>"]},{"entry":[{},"\u2003\u2003<message>"]},{"entry":[{},"\u2003\u2003\u2003<content>Welcome <get name=\u201cfirst_name\u201d\/> <get"]},{"entry":[{},"name=\u201clast_name\u201d\/>!<\/content>"]},{"entry":[{},"\u2003\u2003<\/message>"]},{"entry":[{},"\u2003<\/match>"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"If, e.g., set had been used to set the variable first_name to \u201cEduardo\u201d and the variable last_name to \u201cGeming a\u201d, then this message might be sent to the user as \u201cWelcome Eduardo Geminga!\u201d","\u201cinput\u201d\u2014The input element provides a way for obtaining an arbitrary response from the user and optionally storing it in a session variable. The name attribute specifies the name of the variable to be set, and the terminating node inside the input specifies where the result of the input should be sent. For example, the match",{"@attributes":{"id":"p-0056","num":"0055"},"tables":{"@attributes":{"id":"TABLE-US-00005","num":"00005"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<match pattern=\u201clogin\u201d"]},{"entry":[{},"\u2003<message>"]},{"entry":[{},"\u2003\u2003<content>Reply with your first name.<\/content>"]},{"entry":[{},"\u2003\u2003\u2003<input name=\u201cfull_name\u201d>"]},{"entry":[{},"\u2003\u2003\u2003\u2003<engine href=\u201chttp:\/\/example.com\/cgi-bin\/login.cgi\u201d \/>"]},{"entry":[{},"\u2003\u2003\u2003<\/input>"]},{"entry":[{},"\u2003\u2003<\/content>"]},{"entry":[{},"\u2003<\/message>"]},{"entry":[{},"<\/match>"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}},"br":{}},"\u201ckeyword\u201d\u2014The keyword tag defines an allowable keyword for a block. Keywords are enclosed in a keywords tag. Keywords specify how a concise message argument should be corrected before executing the terminating node in a block. This is discussed in more detail below. Keywords must be enclosed in a keywords tag.","\u201ckeywords\u201d\u2014The keywords tag is a container for keyword tags.","\u201cm-buy\u201d\u2014The m-buy tag is a terminating node that allows a CMRL document to specify items which an end user can purchase. The m-buy tag and its child tags are discussed in more detail in the \u201cMobile Commerce\u201d section below.","\u201cm-pay\u201d\u2014The m-pay tag is a terminating node that allows a CMRL document to specify that a payment can be made from the end user to the content provider. This can be used to allow the end user to pay for services rendered, or to e.g. make a point-of-sale purchase. The m-pay tag and its child tags are discussed in more detail in the \u201cMobile Commerce\u201d section below.","\u201cmatch\u201d\u2014The match tag provides the fundamental structure of CMRL. A match tag defines a pattern which is to be matched to an incoming concise message request. For example, the following CMRL fragment:",{"@attributes":{"id":"p-0062","num":"0061"},"tables":{"@attributes":{"id":"TABLE-US-00006","num":"00006"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"<match pattern=\u201cjohn smith\u201d>"},{"entry":"\u2003<message><content>My name is John Smith.<\/content><\/message>"},{"entry":"<\/match>"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}},"br":{}},{"@attributes":{"id":"p-0063","num":"0062"},"tables":{"@attributes":{"id":"TABLE-US-00007","num":"00007"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"<match pattern=\u201cjohn smith\u201d>"},{"entry":"\u2003<match pattern=\u201c\u201d>"},{"entry":"\u2003\u2003<message><content>My name is John Smith.<\/content><\/message>"},{"entry":"\u2003<\/match>"},{"entry":"\u2003<match pattern=\u201coffice\u201d>"},{"entry":"\u2003\u2003<message><content>My office is located in room"},{"entry":"233.<\/content><\/message>"},{"entry":"\u2003<\/match>"},{"entry":"\u2002<\/match>"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}},"br":{},"b":"233"},"Special allowable match patterns are \u201c \u201d (the null match, corresponding to no additional tokens in the query), and \u201c*\u201d (the default match, corresponding to a match if no other suitable match is found. In addition, a special match pattern can be specified to match designator account information. For example, the match",{"@attributes":{"id":"p-0065","num":"0064"},"tables":{"@attributes":{"id":"TABLE-US-00008","num":"00008"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<match pattern=\u201dstefan@\u201d>"]},{"entry":[{},"\u2003<message><content>Stefan is on vacation<\/content><\/message>"]},{"entry":[{},"<\/match>"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}},"br":{}},{"@attributes":{"id":"p-0066","num":"0065"},"tables":{"@attributes":{"id":"TABLE-US-00009","num":"00009"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"182pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<match pattern=\u201d*@\u201d>"]},{"entry":[{},"\u2003<engine href=http:\/\/example.com\/accounts.cgi \/>"]},{"entry":[{},"<\/match>"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}},"br":{}},"If the loose attribute is not set to \u201c0\u201d (or if it is omitted), the CMRL parser will use a loose parsing algorithm to match queries in a flexible way. For example, if the match pattern is \u201cjohn smith\u201d, then the interpreter might match \u201cjohn\u201d, \u201cjsmith\u201d, \u201cjs\u201d, or \u201cjon\u201d, if these can be unambiguously identified with the pattern. Note that match patterns which are to be used for, e.g., passwords should have loose set to 0 so that they must be matched exactly.","\u201cmessage\u201d\u2014The message tag is a terminating element used to define a message which is sent to the user. A message must have exactly one content tag, and optionally may include zero or one input elements to read a response from the user. The message element is a terminating node.","\u201cquery\u201d\u2014The query element is a terminating node. It can be used to return the result of executing another query, or can be placed in an anchor or input to specify the destination query for the user input. The query tag must contain a text string, which is the query to be executed.","\u201credirect\u201d\u2014The redirect tag allows a CMRL document to include the contents of another CMRL document.","\u201cregister\u201d\u2014The register tag allows a phone number (or other user contact identifier, such as e-mail address) to be associated with a particular query. A query can have only one registered phone number. A registered user will receive messages sent via forward tags located in the terminating node of the query.","\u201crss\u201d\u2014The rss tag is a terminating node used to return an RSS feed as a formatted message. Possible attributes include href story, and link. The href attribute specifies the http destination of the RSS feed. If neither story nor link are specified, rss returns a menu of the stories in an RSS feed as a message. The story attribute is a 1-based index corresponding to the item tags in the feed. If story is specified then the corresponding item is returned as a message. If link is specified, then the links in the RSS feed for the RSS stories are displayed. If both link and story are specified, then the link corresponding to the story is pushed via a WAP push to the phone. Depending on the phone, this may result in the story automatically opening in the phone's web browser, if supported.","\u201cset\u201d\u2014The set element sets a session variable. The attribute name specifies which session variable is to be set. A session variable can be unset by using a set with no value.","\u201curl\u201d\u2014The url tag is used to replace a URL with a shortened SMS-safe version. For example, the following message:",{"@attributes":{"id":"p-0075","num":"0074"},"tables":{"@attributes":{"id":"TABLE-US-00010","num":"00010"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<message><content>For more information visit"]},{"entry":[{},"<url>http:\/\/www.example.com\/sdflj\/~lksdfd?bsdf=123032-123322-"]},{"entry":[{},"123132&prod=39482342&output=2342341234<\/"]},{"entry":[{},"url><\/content><\/message>"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}},"br":{}},"For more information visit http:\/\/dotgo.com\/2vrb3f","When the end user accesses the resulting URL they will be automatically redirected to the URL specified in the url tag. It is recommended that all URLs be encoded in this way, for several reasons: (1) some URLs contain characters (such as \u02dc) which are not present in the default GSM 7-bit alphabet (and hence may be stripped); and (2) this tag produces URLs that are preferentially not split between messages.","The structure and processes for adding content and fulfilling concise message requests for content are shown in , which provides a block diagram of an exemplary implementation of the inventive system . As illustrated, a content provider  accesses the content provider interface  via a distributed network, e.g., the internet . The content provider interface  provides a mechanism for content providers to interact with the system. For example, they can manage their account information, upload CMRL documents, create CMRL documents using CMRL front-end tools, define pricing for content, manage and pay media usage fees, and handle all other aspects of content creation and dissemination. After content is published (either directly via CMRL upload or via the content provider interface CMRL front-end tools), it is added to the CMRL database. Any events that are to be disseminated on a schedule are added to the event database .","For dealing with subscription content, the Event Handler  periodically polls the event database  to determine if scheduled events need to be acted upon. If an event needs to be acted upon, the Event Handler  queries the Subscriber Database (DB)  to determine which subscribers the event applies to, queries the User Profile DB  to read user delivery preferences (such as excluding certain times of day), and creates a message for each user and sends it to the Formatting Module .","Content that is meant to be accessed interactively (or \u201con-demand\u201d) is made available to the Request Handler  via the CMRL database . When a concise message request is received by the Concise Message Interface  via SMS, email, voice, or other medium, it is converted from the requesting medium to a standard format, a top-level query pattern is prepended as will be described below, and the message is passed to the Request Handler . The Request Handler  accesses the User Profile Database  to determine previous request history for this and other users, and then constructs a CMRL document graph (e.g. ). The Request Handler  then matches the request to the complete document graph using a matching algorithm that takes into account misspellings in the request, alternate orderings of the request tokens, user preferences, and usage history. If the result is sufficiently ambiguous, the Request Handler  sends a response to the Formatting module  with instructions for how the user can disambiguate the request. If the result returns a sufficiently probable result but other results are also likely, the Request Handler  sends a message to the Formatting Module  containing the result of the most probable route along with suggested alternatives. If no match is found, a corresponding message is sent to the Formatting Module for delivery to the end user.","If the request route on the document graph results in a URL, RSS feed, or other web service, the Request Handler  retrieves the content from the internet server  specified by the match. This match may be cached to improve performance (e.g., for RSS feeds). If the match results in an engine (a web-based CGI script), the system executes, calls the engine, and evaluates the resulting CMRL. (Engines must return a terminating node, so when the system calls an engine it gets CMRL (a terminating node) in response, and evaluates that terminating node.)","The Formatting Module  first passes the message to the Customization Module , which customizes the message based on the user profile contained in the User Profile DB . For example, the message might contain a special tag <get name=\u201cfirstname\u201d>, which the Customization module  will replace with the first name of the user. Or, it might contain a special tag <function name=\u201cdusk\u201d>, which the Customization Module  will replace with the calculated time of local dusk in the user's zip code. If the message contains any advertising tags, the Customization Module  retrieves an advertisement from the Advertising Module  before customizing the message. In this way, the advertisement can be customized for the end user. The advertisement is selected from the Advertisement DB  based on user profile information, such as location, user preferences, usage history, etc.","The Formatting Module  then takes the customized message and formats it into the appropriate medium taking into account user preferences. The preferences might include, for example, maximum text message length for SMS or the type of voice to use when synthesizing the message for audio dissemination. If the message refers to any special multimedia (e.g., an audio file for audio dissemination, or an image for email dissemination), the formatter retrieves these from the Media DB . When the Formatter  has finished formatting the message, it is passed on to the Concise Message Interface  for delivery to the end user.","Subscribers  are also able to manage their account information via the web (accessible directly over the internet, or via a mobile device supporting WAP, the Wireless Application Protocol).  illustrates one example of such a Subscriber Web Interface. The Subscriber Web interface  allows the user to view and manage their subscriptions in the Subscription DB , and edit their profile information, edit their billing information, and review and possibly dispute any billing transactions posted to their account stored in the User Profile DB .",{"@attributes":{"id":"p-0085","num":"0084"},"figref":["FIG. 4","FIG. 4","FIG. 4"]},"A concise message request is routed considering (1) the request, (2) a CMRL document structure, (3) user preferences, and (4) usage history. Based on these factors, the response to the request may instruct the user that no match was found, an exact match was found, a probable match was found (possibly with other probable matches), or too many matches were found.","As a concrete example, consider the document \u201cindex.cmrl\u201d and the other documents hosted by the internet domain \u201cstonybrook.edu,\u201d and consider the request \u201cstonybrook\u201d on the \u201cDOTEDU\u201d short code with respect to the CMRL document structures of . Because the request was received via the \u201cDOTEDU\u201d short code, the system examines the CMRL document \u201cindex.cmrl\u201d at the internet domain \u201cstonybrook.edu.\u201d This document contains seven entries: one terminating with the message \u201cWelcome to Stony Brook,\u201d four linking the match patterns \u201castronomy,\u201d \u201cphysics,\u201d \u201cast101,\u201d and \u201cast102\u201d to the document \u201cphysics.cmrl,\u201d and two linking the match patterns \u201cbiology\u201d and \u201cbio101\u201d to the document \u201cbiology.cmrl.\u201d Because the request matches no match patterns, the system resolves under the \u201cnull match\u201d to the message \u201cWelcome to Stony Brook.\u201d","Next consider the request \u201cstonybrook astronomy lanzetta office\u201d on the \u201cDOTEDU\u201d short code. As in the previous example, the system examines the CMRL document \u201cindex.cmrl\u201d at the internet domain \u201cstonybrook.edu,\u201d but now the system matches the match pattern \u201castronomy\u201d in the \u201cstonybrook\u201d document, which links to the document \u201cphysics.cmrl\u201d The system next examines the document \u201cphysics\u201d and matches the match pattern \u201clanzetta,\u201d which links to the document \u201clanzetta.cmrl\u201d","The system next examines the document \u201clanzetta\u201d and matches the match pattern \u201coffice,\u201d which terminates on the message \u201cOffice is 456 ESS.\u201d The system returns the message \u201cOffice is 456 ESS.\u201d","Next consider the request \u201cstonybrook office\u201d on the \u201cDOTEDU\u201d short code. As in the previous two examples, the system examines the CMRL document \u201cindex.cmrl\u201d at the internet domain \u201cstonybrook.edu,\u201d but the system cannot match any match pattern in the \u201cindex.cmrl\u201d document. Because the entire CMRL structure is available, the system searches the structure for a match to the match pattern \u201coffice.\u201d Such a match is found only in the document \u201clanzetta.cmrl,\u201d which terminates on the message \u201cOffice is 456 ESS.\u201d The system again returns the message \u201cOffice is 456 ESS.\u201d","What if the match pattern \u201coffice\u201d is not unique under the \u201cstonybrook\u201d portion of the CMRL structure, e.g. what if the match pattern \u201coffice\u201d appears in the document \u201cyahil\u201d as well as in the document \u201clanzetta\u201d? In this case, the system appeals to user preferences and usage history to attempt to remove the ambiguity and determine the best route based on probability. For example, if the user has a history of accessing the match pattern \u201clanzetta\u201d and no history of accessing the match pattern \u201cyahil,\u201d then the system ascribes higher probability to the match pattern \u201clanzetta office\u201d and lower probability to the match pattern \u201cyahil office\u201d and returns the concise message \u201cOffice is 456 ESS. Found under lanzetta office. Respond[1] for more.\u201d If the user has no history of accessing either match pattern \u201clanzetta\u201d or \u201cyahil,\u201d the system returns the concise message \u201cTwo results found. Respond [1] for lanzetta and [2] for yahil.\u201d In this way, the system allows users to abbreviate requests.","Next consider the request \u201cstonybrook ast101 grades exam1 1234\u201d on the \u201cDOTEDU\u201d short code. As in the previous examples, the system routes this request along \u201cstonybrook astronomy lanzetta ast101,\u201d which links to the match patterns \u201cgrades,\u201d \u201cschedule,\u201d and \u201cezipsky.\u201d The system matches the match pattern \u201cgrades,\u201d which terminates on the engine \u201cgrades.cgi.\u201d The system passes the request (i.e., \u201cstonybrook ast101 grades exam1 1234\u201d) and a tokenized version of the request (i.e., \u201cstonybrook,\u201d \u201cast101,\u201d \u201cgrades,\u201d \u201cexam1,\u201d and \u201c1234\u201d) to the URL specified by the engine. The URL returns a response to the system (presumably the grade on exam1 received by the student of identification number 1234), and the system returns this response.","Next consider the request \u201cstonybrook ezipsky 11787\u201d on the \u201cDOTEDU\u201d short code. As in the previous examples, the system routes this request along \u201cstonybrook astronomy lanzetta ast101.\u201d The system matches the match pattern \u201cezipsky,\u201d which terminates on the engine \u201cezipsky.cgi\u201d The system passes the request (i.e., \u201cstonybrook ezipsky 11787\u201d) and a tokenized version of the request (i.e. \u201cstonybrook,\u201d \u201cezipsky,\u201d and \u201c11787\u201d) to the engine. The engine returns a response to the system (presumably information about the night sky in zip code 11787), and the system returns this response.","Match patterns are probabilistically matched to requests in a way that allows for possibilities of misspellings and possibly (in one embodiment) out-of-order arrangement. For example, the match patterns of the document structure of  might be matched to the misspelled request \u201cstonybook astronomy lanzetta office\u201d and the out-of-order request \u201cstonybrook astronomy office lanzetta\u201d in the same way they are matched to the request \u201cstonybrook astronomylanzetta office.\u201d","The follow code listing provides the CMRL of the example document lanzetta.cmrl described in .",{"@attributes":{"id":"p-0096","num":"0095"},"tables":{"@attributes":{"id":"TABLE-US-00011","num":"00011"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<cmrl>"]},{"entry":[{},"\u2003<match pattern=\u201d\u201d>"]},{"entry":[{},"\u2003\u2003<message>"]},{"entry":[{},"\u2003\u2003\u2003<content>Welcome to Lanzetta.<\/content>"]},{"entry":[{},"\u2003\u2003<\/message>"]},{"entry":[{},"\u2003<\/match>"]},{"entry":[{},"\u2003<match pattern=\u201doffice\u201d>"]},{"entry":[{},"\u2003\u2003<message>"]},{"entry":[{},"\u2003\u2003\u2003<content>Office is 456 ESS.<\/content>"]},{"entry":[{},"\u2003\u2003<\/message>"]},{"entry":[{},"\u2003<\/match>"]},{"entry":[{},"\u2003<match pattern=\u201dschedule\u201d>"]},{"entry":[{},"\u2003\u2003<message>"]},{"entry":[{},"\u2003\u2003\u2003<content>Office hours are MW 2-3.<\/content>"]},{"entry":[{},"\u2003\u2003<\/message>"]},{"entry":[{},"\u2003<\/match>"]},{"entry":[{},"\u2003<match pattern=\u201dskynews\u201d>"]},{"entry":[{},"\u2003\u2003<engine href=\u201dhttp:\/\/stonybrook.edu\/cgi-bin\/skynews.cgi\u201d>"]},{"entry":[{},"\u2003<\/match>"]},{"entry":[{},"\u2003<match pattern=\u201dast101\u201d>"]},{"entry":[{},"\u2003\u2003<match pattern=\u201dgrades\u201d>"]},{"entry":[{},"\u2003\u2003\u2003<engine href=\u201dhttp:\/\/stonybrook.edu\/cgi-bin\/skynews.cgi\u201d>"]},{"entry":[{},"\u2003\u2003<\/match>"]},{"entry":[{},"\u2003\u2003<match pattern=\u201dschedule\u201d>"]},{"entry":[{},"\u2003\u2003\u2003<message>"]},{"entry":[{},"\u2003\u2003\u2003\u2003<content>Class meets MWF 11-12.<\/content>"]},{"entry":[{},"\u2003\u2003\u2003<\/message>"]},{"entry":[{},"\u2003\u2003<\/match>"]},{"entry":[{},"\u2003\u2003<match pattern=\u201dezipsky\u201d>"]},{"entry":[{},"\u2003\u2003\u2003<engine href=\u201dhttp:\/\/stonybrook.edu\/cgi-bin\/ezipsky.cgi\u201d>"]},{"entry":[{},"\u2003\u2003<\/match>"]},{"entry":[{},"\u2003<\/match>"]},{"entry":[{},"<\/cmrl>"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"The following examples describe an implementation of the inventive system:","An embodiment of the present invention has been published via the World Wide Web under the name \u201cDOTGO\u2122\u201d. To use DOTGO\u2122, the mobile phone user sends a text message starting with an internet domain name to the phone number DOTCOM (368266)\u2014or to one of the phone numbers DOTEDU (368338), DOTGOV (368468), DOTNET (368638), or DOTORG (368674), as appropriate. A simple three step operation is:\n\n","In this case, the response is a list of news topics from cnn.com. The user can reply with the text message \u201c1\u201d to select the first topic, \u201cTop Stories.\u201d The response is a list of stories within \u201cTop Stories\u201d from cnn.com. Replying with the text message \u201c1\u201d selects the first story, \u201c2\u201d selects the second story, etc.","As another example, texting \u201cnytimes\u201d to the phone number DOTCOM (368266) produces a response of a list of news stories from nytimes.com. The stories can then be browsed as in the previous example.","Many services also accept additional input, allowing a user to specify exactly what information is sought. For example, texting \u201cwikipedia dog\u201d to the phone number DOTORG (368674) provides information about dogs from wikipedia.org. Or the user can text \u201cweather\u201d+the local zip code to the phone number DOTCOM (368266) to obtain the latest weather forecast for a specific area from weather.com. In another example, the user can text \u201cezipsky\u201d+the zip code+a celestial object in the night sky (such as the name of a planet, star, or constellation) to the phone number DOTCOM (368266) to get up-to-the-minute instruction on how to see that celestial object from ezipsky.com.","DOTGO\u2122 utilizes the principles of the invention described above: the first word of the message specifies the internet domain name, and the phone number specifies the top-level domain. Broadly speaking, DOTGO\u2122 replicates the organizational structure of the internet, however, the information offered by DOTGO\u2122 is generally a subset of the information available on the internet\u2014the subset that is most useful and relevant in a mobile setting. Text messages are short, allowing the user to quickly send and receive small amounts of information using a mobile phone. In essence, DOTGO\u2122 is as an extension of the internet to mobile-phone text messaging.","This following example describes the DOTGO\u2122 system from the perspective of a publisher seeking to implement a mobile service.","For a content provider who owns an internet domain name and has the authority to customize the content returned by DOTGO\u2122 under that internet domain name begins by placing a file called \u201cindex.cmrl\u201d onto the root directory of its web server. The file index.cmrl contains instructions that describe how to distribute content via mobile-phone text messaging, much as a file \u201cindex.html\u201d contains instructions that describe how to distribute content via the web. These instructions can simple or sophisticated to perform operations including returning static or dynamic content, providing or collecting information, selling or buying products, etc.","The instructions contained in the file index.cmrl are written in CMRL which has been described previously. CMRL plays the same role to DOTGO\u2122 that HTML plays to the internet\u2014it describes content. The difference is that CMRL is specifically designed to \u201croute\u201d the short queries and responses that are appropriate to mobile phone text messaging. The concise structure makes it ideal for describing content that is intended to be accessed in a mobile setting, where slow data transfer rates often make browsing the internet on a mobile phone browser a frustrating experience.","If there is no file index.cmrl, DOTGO\u2122 seeks to render the file index.html as well as possible within the limitations of mobile phone text messaging. For example, any page that references one or more RSS feeds is rendered in such away as to make those RSS feeds available. Other times, the result may be less useful. But this feature ensures that DOTGO\u2122 will always provide some type of response to any request for any internet domain name. In fact, DOTGO\u2122 will respond with something to any request for any URL.","The advantages of DOTGO\u2122 over other methods of implementing a separate mobile service, e.g., by obtaining a dedicated or shared short code, are substantial: (1) a content provider can instantly carry over the brand name recognition of its internet domain name to its mobile service. If users know where to find the content provider on the internet, they will know where to find them using DOTGO\u2122. (2) The content provider saves money because there are no setup fees, no monthly fees, and no per-message fees. (3) The content provider does not need to purchase or maintain expensive hardware\u2014the mobile service runs on the DOTGO\u2122 servers. (4) The content provider can immediately take advantage of the DOTGO\u2122 software infrastructure to compose innovative mobile content.","Consider the following CMRL document:",{"@attributes":{"id":"p-0109","num":"0111"},"tables":{"@attributes":{"id":"TABLE-US-00012","num":"00012"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"182pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<?xmlversion=\u201c1.0\u201d encoding=\u201cUTF-8\u201d?>"]},{"entry":[{},"<cmrl xmlns:dotgo=\u201chttp:\/\/dotgo.com\/cmrl\/1.0\u201d>"]},{"entry":[{},"\u2003<match pattern=\u201c*\u201d>"]},{"entry":[{},"\u2003\u2003<message>"]},{"entry":[{},"\u2003\u2003<content>Hello world!<\/content>"]},{"entry":[{},"\u2003\u2003<\/message>"]},{"entry":[{},"\u2003<\/match>"]},{"entry":[{},"<\/cmrl>"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}},"br":{}},"Line 1: <?xml version=\u201c1.0\u201dencoding=\u201cUTF-8\u201d?>","This line indicates that the document is an XML document, which is necessary because CMRL is a variety of XML. An opening line like this is required of any XML document and hence of any CMRL document.","Line 2: <cmrl xmlns:dotgo=\u201chttp:\/\/dotgo.com\/cmrl\/1.0\u201d","This line indicates that the document is a CMRL document. A line like this is required of any CMRL document.","Line 3: <match pattern=\u201c*\u201d>","This line introduces the match tag, which is a fundamental aspect of CMRL. A match specifies a pattern against which the query is compared to determine how the query is to be routed or resolved. In this case, the match pattern is the \u201cdefault\u201d match pattern (represented by the wild-card character \u201c*\u201d) and there are no other match patterns specified in the document, so any query that is presented to the document will satisfy this match.","Line 4: <message>","This line introduces the message tag, which is another fundamental aspect of CMRL. Every terminating match must contain one (and only one) terminating node, of which a message is the simplest example. A message must contain content (i.e., the body of the message) and may in addition contain other constructs.","Line5: <content>Hello world!<\/content>","This line contains the content of the message. In this case, the content is the simple text string \u201cHello world!\u201d enclosed by the opening <content> and closing <\/content> tags.","Line6: <\/message>","This line closes the <message> tag opened in line 4.","Line7: <\/match>","This line closes the <match> tag opened in line 3.","Line8: <\/cmrl>","This line closes the <cmrl> tag opened in line","To install the document, the content provider transfers the document to the root directory of its web server, i.e., to the same directory that contains the root \u201cindex.html\u201d of its website. The document should be named \u201cindex.cmrl\u201d and permissions should be set to allow appropriate access to the document.","To validate the document, the content provider sets its web browser to http:\/\/dotgo.com\/support\/cmrlvalidator\/ and enters its domain name into the input box under \u201cValidate by URI\u201d. Clicking the button \u201cValidate\u201d should produce a response indicating that the index.cmrl file is valid. If not, the document should be checked to confirm that it exactly matches the above listing, that the document is named \u201cindex.cmrl,\u201d and that permissions are set to allow appropriate access to the document.","The final step is to test the document, which involves texting the internet domain name to the phone number DOTCOM (368266)\u2014or to one of the phone numbers DOTEDU (368338), DOTGOV (368468), DOTNET (368638), or DOTORG (368674) as appropriate. For example, to access the internet domain \u201cexample.com,\u201d text \u201cexample\u201d to the phone number DOTCOM (3682266). The response should be \u201cHello world!\u201d","To achieve this result, the system used the first word of the query \u201cexample\u201d and the phone number DOTCOM (368266) through which the query was received to determine that the query should be routed to example.com. Next, the system retrieved the file index.cmrl from example.com. Finally, the system compared the remainder of the query (i.e., everything after \u201cexample,\u201d which in this case was an empty string) against the match patterns specified in the file index.cmrl in order to resolve the query. In this case, there was only one match pattern specified in the file index.cmrl\u2014the default match pattern\u2014which resolved to the message \u201cHello world!\u201d returned by the system.","The following provides another example of a procedure by which a content provider can create a document using the DOTGO\u2122 system for accessing content on their website:","Consider the following CMRL document:",{"@attributes":{"id":"p-0126","num":"0128"},"tables":{"@attributes":{"id":"TABLE-US-00013","num":"00013"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<?xml version=\u201c1.0\u201dencoding=\u201cUTF-8\u201d?>"]},{"entry":[{},"<cmrl xmlns:dotgo=\u201dhttp:\/\/dotgo.com\/cmrl\/1.0\u201d>"]},{"entry":[{},"\u2003<match pattern=\u201c\u201d>"]},{"entry":[{},"\u2003\u2003<message>"]},{"entry":[{},"\u2003\u2003\u2003<content>Welcome to the DOTGO example.<\/content>"]},{"entry":[{},"\u2003\u2003<\/message>"]},{"entry":[{},"\u2003<\/match>"]},{"entry":[{},"\u2003<match pattern=\u201cred\u201d>"]},{"entry":[{},"\u2003\u2003<match pattern=\u201ccircle\u201d>"]},{"entry":[{},"\u2003\u2003\u2003<message>"]},{"entry":[{},"\u2003\u2003\u2003\u2003<content>You have selected a red"]},{"entry":[{},"circle.<\/content>"]},{"entry":[{},"\u2003\u2003\u2003<\/message>"]},{"entry":[{},"\u2003\u2003<\/match>"]},{"entry":[{},"\u2003\u2003<match pattern=\u201csquare\u201d>"]},{"entry":[{},"\u2003\u2003\u2003<message>"]},{"entry":[{},"\u2003\u2003\u2003\u2003<content>You have selected a red"]},{"entry":[{},"square.<\/content>"]},{"entry":[{},"\u2003\u2003\u2003<\/message>"]},{"entry":[{},"\u2003\u2003<\/match>"]},{"entry":[{},"\u2003<\/match>"]},{"entry":[{},"\u2003<match pattern=\u201cgreen\u201d>"]},{"entry":[{},"\u2003\u2003<match pattern=\u201ccircle\u201d>"]},{"entry":[{},"\u2003\u2003\u2003<message>"]},{"entry":[{},"\u2003\u2003\u2003\u2003<content>You have selected a green"]},{"entry":[{},"circle.<\/content>"]},{"entry":[{},"\u2003\u2003\u2003<\/message>"]},{"entry":[{},"\u2003\u2003<\/match>"]},{"entry":[{},"\u2003<\/match>"]},{"entry":[{},"\u2003<match pattern=\u201cengine\u201d>"]},{"entry":[{},"\u2003\u2003<engine href=\u201chttp:\/\/dotgo.com\/cgi-"]},{"entry":[{},"\u2003bin\/examples\/current_time.cgi\u201d\/>"]},{"entry":[{},"\u2003<\/match>"]},{"entry":[{},"\u2003<match pattern=\u201crss\u201d>"]},{"entry":[{},"\u2003<rsshref=\u201chttp:\/\/dotgo.com\/support\/documentation\/example2\/"]},{"entry":[{},"\u2003example.rss\u201d\/>"]},{"entry":[{},"\u2003<\/match>"]},{"entry":[{},"\u2003<match pattern=\u201c*\u201d>"]},{"entry":[{},"\u2003\u2003<message>"]},{"entry":[{},"\u2003\u2003\u2003<content> Nothing relevant"]},{"entry":[{},"here.<\/content>"]},{"entry":[{},"\u2003\u2003<\/message>"]},{"entry":[{},"\u2003<\/match>"]},{"entry":[{},"<\/cmrl>"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}},"br":{}},"Using as an example the internet domain \u201cexample.com,\u201d the query \u201cexample\u201d produces the response \u201cWelcome to the DOTGO example.\u201d The system again used the first word of the query \u201cexample\u201d and the phone number DOTCOM (368266) through which the query was received to determine that the query should be routed to example.com. The system again retrieved the file index.cmrl from example.com, and compared the remainder of the query (which was again an empty string) against the match patterns specified in the file index.cmrl to resolve the query. In this case, the empty string was matched to the \u201cnull\u201d match pattern (i.e., the empty string), which resolved to the message \u201cWelcome to the DOTGO example.\u201d","The query \u201cexample red circle\u201d produces the response \u201cYou have selected a red circle.\u201d In this case, the second token of the query is matched to the match pattern \u201cred,\u201d and the third token of the query is matched to the match pattern \u201ccircle,\u201d so the match is unambiguous.","The query \u201cexample circle\u201d produces the response \u201cDid you mean \u2018red circle\u2019 (1) or \u2018green circle\u2019 (2)?\u201d In this case, the second token of the query is matched to the lower-level match pattern \u201ccircle\u201d but is ambiguous between the higher-level match patterns \u201cred\u201d and \u201cgreen,\u201d so the match is ambiguous, and the system seeks to resolve the ambiguity.","This query also illustrates the \u201chyperlink\u201d feature of DOTGO\u2122. In reply to the above response, the query \u201c1\u201d is equivalent to the query \u201cexample red circle.\u201d Similarly, the query \u201c2\u201d is equivalent to the query \u201cexample green circle.\u201d In this case, the hyperlinks were generated automatically by the system, although CMRL allows arbitrary hyperlinks to be specified.","The query \u201cexample square\u201d produces the response \u201cYou have selected a red square.\u201d In this case, the second token of the query is matched to the match pattern \u201csquare,\u201d skipping the higher-level match pattern \u201cred\u201d since the match to \u201csquare\u201d is unambiguous.","Both the queries \u201cexample grean cirkel\u201d and \u201cexample gc\u201d produce the response \u201cYou have selected a green circle.\u201d In these cases, the queries are matched to the match patterns \u201cgreen\u201d and \u201ccircle.\u201d In general, the system seeks to obtain matches using phonetics and abbreviations as well as by direct comparison (although it is possible to turn this feature off, requiring exact matches).","The query \u201cexample engine\u201d produces a response similar to \u201cIt is 9:18 UTC on Apr. 12, 2008.\u201d (but with the current time and date). In this case, the query is matched to the match pattern \u201cengine,\u201d which terminates in an \u201cengine\u201d tag that references a cgi program running on the DOTGO\u2122 servers. An engine is any web-based application program and can return arbitrary output in response to arbitrary input. Here, the engine simply returns the current time and date.","The query \u201cexample rss\u201d produces the response \u201cDOTGO News and Blog. Reply (1) for latest news entry and (2) for latest blog entry.\u201d In this case, the query is matched to the match pattern \u201crss,\u201d which terminates in an \u201crss\u201d tag that references RSS feeds hosted on the DOTGO\u2122 servers.","The query \u201cexample encyclopedia\u201d produces the response \u201cNothing relevant here.\u201d In this case, the query does not match any of the specified match patterns so it is matched to the default match pattern. A document does not need to have a default match, but, in general, it is a good idea to include one to handle queries that cannot otherwise be resolved.","The framework described above can be used to write rich content: by, for example, adding arbitrary matches, nesting matches within matches, and returning dynamic content using the <engine> and <rss> tags. In addition, arbitrary hyperlinks can be designated and user input can be accepted. \u201cSession variables,\u201d which store information on a per-user basis can be set and requested, and \u201ckeywords\u201d can be specified to \u201ccorrect\u201d user input to a list of standard tokens. The elements are described and illustrated in the following examples.","Keywords in CMRL are used to \u201ccorrect\u201d user input to a list of standard tokens that are somehow \u201cexpected\u201d under a particular match. Keywords provide means for handling the misspellings, abbreviations, and other ambiguities that often are quite common in text-message input.","To illustrate, an engine is implemented under the internet domain name \u201cexample\u201d and the match \u201ctravel\u201d related to travel between the major east-coast cities Boston, New York, Philadelphia, and Washington, D.C. Taking a pair of these cities as arguments, the engine might be referenced by the following CMRL fragment:",{"@attributes":{"id":"p-0139","num":"0141"},"tables":{"@attributes":{"id":"TABLE-US-00014","num":"00014"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"189pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<match pattern=\u201ctravel\u201d>"]},{"entry":[{},"\u2003<engine href=\u201chttp:\/\/example.com\/cgi-bin\/travel.cgi\u201d\/>"]},{"entry":[{},"<\/match>"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}},"br":{}},"example travel New York Washington, D.C.","The problem is that there could be many other queries that express exactly the same intention, including for example","example travel new york Washington, d.c.","example travel new yorke washingtun, d.c.","example travel ny wash","example travel nyc dc","In other words, the problem is that the query might contain misspellings and abbreviations, which must be handled in order to make the engine useful in practice.","One approach is to handle all possible misspellings and abbreviations in the engine, however, a more practical way is to obtain matches using phonetics and abbreviations as well as by direct comparison, to \u201ccorrect\u201d other user input to a list of standard tokens. The feature is implemented using the <keywords> and <keyword> tags within the <block> tag. For example, the keywords \u201cBoston,\u201d \u201cNew York,\u201d \u201cPhiladelphia,\u201d and \u201cWashington, D.C.\u201d could be associated with the engine described above by the following CMRL fragment:",{"@attributes":{"id":"p-0146","num":"0148"},"tables":{"@attributes":{"id":"TABLE-US-00015","num":"00015"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"196pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<match pattern=\u201ctravel\u201d>"]},{"entry":[{},"\u2003<block>"]},{"entry":[{},"\u2003\u2003<keywords>"]},{"entry":[{},"\u2003\u2003\u2003<keyword>Boston<\/keyword>"]},{"entry":[{},"\u2003\u2003\u2003<keyword>New York<\/keyword>"]},{"entry":[{},"\u2003\u2003\u2003<keyword>Philadelphia<\/keyword>"]},{"entry":[{},"\u2003\u2003\u2003<keyword>Washington, D.C.<\/keyword>"]},{"entry":[{},"\u2003\u2003<keywords>"]},{"entry":[{},"\u2003\u2003<engine href=\u201chttp:\/\/example.com\/cgi-bin\/travel.cgi\u201d\/>"]},{"entry":[{},"\u2003<\/block>"]},{"entry":[{},"<\/match>"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}},"br":{}},"example travel los angeles seattle","would not be corrected, and the engine would be passed \u201clos,\u201d \u201cangeles,\u201d and \u201cseattle.\u201d The query","example travel los angeles nyc","would be partially corrected, and the engine would be passed \u201clos,\u201d \u201cangeles,\u201d and \u201cNew York.\u201d","The <block> tag is a CMRL terminating node that allows various \u201chelper\u201d tags to be associated with another terminating node. The <block> tag must contain exactly one terminating node (which in this case is the <engine> tag) and may contain various other tags, including zero or one <keywords> tags (and zero or more <set> tags, which are beyond the scope of this document). The <keywords> tag may contain zero or more <keyword> tags, which list standard tokens that are somehow \u201cexpected\u201d under a particular match.","The system posts the corrected argument as the parameter \u201csys_corrected_argument.\u201d The system posts the known (because they are successfully matched to a keyword) corrected tokens as the parameters \u201csys_corrected_argument_known[n]\u201d (where n is a zero-based index) and the number of such tokens as the parameter \u201csys_num_corrected_argument_known.\u201d The system posts the unknown (because they are not successfully matched to a keyword) corrected tokens as the parameters \u201csys_corrected_argument_unknown[n]\u201d and the number of such tokens as the parameter \u201csys_num_corrected_argument_unknown.\u201d And the system posts the (known and unknown) corrected tokens (together in the original order) as the parameters \u201csys_corrected_argument[n]\u201d and the number of such tokens as the parameter \u201csys_num_corrected_argument.\u201d","It is important to note that keywords persist. For example, starting with the following CMRL fragment:",{"@attributes":{"id":"p-0152","num":"0154"},"tables":{"@attributes":{"id":"TABLE-US-00016","num":"00016"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"196pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<match pattern=\u201ccolors\u201d>"]},{"entry":[{},"\u2003<block>"]},{"entry":[{},"\u2003\u2003<keywords>"]},{"entry":[{},"\u2003\u2003\u2003<keyword>red<\/keyword>"]},{"entry":[{},"\u2003\u2003\u2003<keyword>green<\/keyword>"]},{"entry":[{},"\u2003\u2003\u2003<keyword>blue<\/keyword>"]},{"entry":[{},"\u2003\u2003<keywords>"]},{"entry":[{},"\u2003\u2003<engine href=\u201chttp:\/\/example.com\/cgi-bin\/colors.cgi\u201d\/>"]},{"entry":[{},"\u2003<\/block>"]},{"entry":[{},"<\/match>"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}},"br":{}},{"@attributes":{"id":"p-0153","num":"0155"},"tables":{"@attributes":{"id":"TABLE-US-00017","num":"00017"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"196pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<match pattern=\u201ccolors\u201d>"]},{"entry":[{},"\u2003<engine href=\u201chttp:\/\/example.com\/cgi-bin\/colors.cgi\u201d\/>"]},{"entry":[{},"<\/match>"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}},"br":{}},"This feature allows keywords to be set in either a CMRL document or an engine. For example, another way to set the keywords described in the first CMRL fragment described above would be to have the engine referenced in that fragment return the following CMRL fragment:",{"@attributes":{"id":"p-0155","num":"0157"},"tables":{"@attributes":{"id":"TABLE-US-00018","num":"00018"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"189pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<block>"]},{"entry":[{},"\u2003<keywords>"]},{"entry":[{},"\u2003\u2003<keyword>red<\/keyword>"]},{"entry":[{},"\u2003\u2003<keyword>green<\/keyword>"]},{"entry":[{},"\u2003\u2003<keyword>blue<\/keyword>"]},{"entry":[{},"\u2003<keywords>"]},{"entry":[{},"\u2003<message>"]},{"entry":[{},"\u2003\u2003<content>Thanks for selecting one of red, green, or"]},{"entry":[{},"blue<\/content>"]},{"entry":[{},"\u2003<\/message>"]},{"entry":[{},"<\/block>"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}},"br":{}},"Such a feature is useful because it would be cumbersome to list such a large number of keywords in some huge CMRL file. Similarly, it would not be practical for the engine to return such a large number of keywords every time it was called. The solution is to have the engine return the keywords only when specifically directed, for example, in response to a \u201creset\u201d request. For example, the following CMRL fragment could be inserted into the CMRL document:",{"@attributes":{"id":"p-0157","num":"0159"},"tables":{"@attributes":{"id":"TABLE-US-00019","num":"00019"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<match pattern=\u201creset\u201d>"]},{"entry":[{},"\u2003<engine href=\u201chttp:\/\/example.com\/cgi-bin\/cities.cgi?mode=reset\u201d\/>"]},{"entry":[{},"<\/match>"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}},"br":{}},{"@attributes":{"id":"p-0158","num":"0160"},"tables":{"@attributes":{"id":"TABLE-US-00020","num":"00020"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"189pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<block>"]},{"entry":[{},"\u2003\u2003\u2002<keywords>"]},{"entry":[{},"\u2003\u2003\u2002<keyword>Aaronsburg<\/keyword>"]},{"entry":[{},"\u2003\u2003\u2002<keyword>Abbeville<\/keyword>"]},{"entry":[{},"\u2003\u2003\u2002<keyword>Abbotsford<\/keyword>"]},{"entry":[{},"\u2003\u2003\u2002."]},{"entry":[{},"\u2003\u2003\u2002."]},{"entry":[{},"\u2003\u2003\u2002."]},{"entry":[{},"\u2003\u2003\u2002<keyword>Zwolle<\/keyword>"]},{"entry":[{},"\u2003\u2003\u2002<keywords>"]},{"entry":[{},"\u2003\u2003\u2002<message>"]},{"entry":[{},"\u2003\u2003\u2002<content>Keywords have been reset<\/content>"]},{"entry":[{},"\u2003\u2003\u2002<\/message>"]},{"entry":[{},"<\/block>"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"The keywords can be kept up to date by calling the engine with a reset request any time the keywords returned by the engine are modified.","To clear all keywords, an empty <keywords> tag, i.e., a <keywords> tag that contains no <keyword> tags, can be used.","Session variables in CMRL are used to store information on a per-user basis (e.g., user preferences, usage history, account identification, etc.). Session variables are similar to cookies on the web: they make it easy to customize services for individual users.","To illustrate, if one were to implement an engine under the internet domain name \u201cexample\u201d and the match \u201cweather\u201d that returns a weather forecast based on zip code, the engine might be referenced by the following CMRL fragment:",{"@attributes":{"id":"p-0163","num":"0165"},"tables":{"@attributes":{"id":"TABLE-US-00021","num":"00021"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<match pattern=\u201cweather\u201d>"]},{"entry":[{},"\u2003\u2003\u2003\u2002<engine href=\u201chttp:\/\/example.com\/cgi-bin\/weather.cgi\u201d\/>"]},{"entry":[{},"<\/match>"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}},"br":{}},{"@attributes":{"id":"p-0164","num":"0166"},"tables":{"@attributes":{"id":"TABLE-US-00022","num":"00022"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"#!\/usr\/bin\/perl"]},{"entry":[{},"use CGI qw(:standard);"]},{"entry":[{},"use strict;"]},{"entry":[{},"$argument =~ m\/(\\d\\d\\d\\d\\d)\/;"]},{"entry":[{},"my $current_zip_code = $1;"]},{"entry":[{},"my $argument = param(\u201csys_argument\u201d);"]},{"entry":[{},"my $last_zip_code = param(\u201clast_zip_code\u201d);"]},{"entry":[{},"my $content;"]},{"entry":[{},"if ($current_zip_code)\u2003{"]},{"entry":[{},"\u2003$content = forecast($current_zip_code);"]},{"entry":[{},"\u2003$last_zip_code = $current_zip_code;"]},{"entry":[{},"} elsif ($last_zip_code) {"]},{"entry":[{},"\u2003$content = forecast($last_zip_code);"]},{"entry":[{},"} else {"]},{"entry":[{},"\u2003$content = \u201cPlease supply a five-digit zip code--try again\u201d;"]},{"entry":[{},"}"]},{"entry":[{},"print header;"]},{"entry":[{},"print <<EOF"]},{"entry":[{},"<block>"]},{"entry":[{},"\u2003<set name=\u201clast_zip_code\u201d>$last_zip_code<\/set>"]},{"entry":[{},"\u2003<message>"]},{"entry":[{},"\u2003\u2003<content>$content<\/content>"]},{"entry":[{},"\u2003<\/message>"]},{"entry":[{},"<\/block>"]},{"entry":[{},"EOF;"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}},"br":{}},"Using this construction, the session variable \u201clast zip code\u201d, if it exists, is posted to the engine every time the engine is called. The engine assigns the value of the session variable \u201clast zip code\u201d to the Perl variable \u201c$last zip code\u201d in the line","my $last_zip_code=param(\u201clast_zip_code\u201d);","of the Perl program. If no zip code is supplied, and if there is a previous value of the zip code, then the engine uses the previous value of the zip code to produce the weather forecast. The engine sets the value of the session variable \u201clast zip code\u201d every time it is called using the <set> tag within the <block> tag. The <block> tag is a CMRL terminating node that allows various \u201chelper\u201d tags to be associated with another terminating node. The <block> tag must contain exactly one terminating node (which in this case is the <message> tag) and may contain various other tags, including zero or more <set> tags (and zero or one <keywords> tags, which are beyond the scope of this document). The <set> tag must contain the attribute name, which is the name of the session variable to be set (in this case \u201clast zip code\u201d), and must contain a text string, which is the value to be assigned to the session variable (in this case the value of the Perl variable \u201c$last zip code\u201d).","Session variables are stored per user and per CMRL document. When a particular user accesses a particular CMRL document, all session variables defined for that user and that CMRL document are available to the CMRL document (and are posted to engines referenced by the CMRL document).","The <get> tag is used to get the value of a session variable from within CMRL. Using the following CMRL fragment under the scenario described above:",{"@attributes":{"id":"p-0169","num":"0171"},"tables":{"@attributes":{"id":"TABLE-US-00023","num":"00023"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"<match pattern=\u201cshow default\u201d>"},{"entry":"\u2003<message>"},{"entry":"\u2003\u2003<content>Default zip code: <get name=\u201clast_zip_code\u201d\/><\/content>"},{"entry":"\u2003<\/message>"},{"entry":"<\/match>"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}},"br":{}},"The <input> tag can be used to set the value of a session variable. Using the following CMRL fragment under the internet domain name \u201cexample\u201d:",{"@attributes":{"id":"p-0171","num":"0173"},"tables":{"@attributes":{"id":"TABLE-US-00024","num":"00024"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<match pattern=\u201cname\u201d>"]},{"entry":[{},"\u2003\u2003\u2002<message>"]},{"entry":[{},"\u2003\u2003\u2003<content>Reply with your first name<\/content>"]},{"entry":[{},"\u2003\u2003\u2003<input name=\u201cfirst_name\u201d>"]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003\u2002<message>"]},{"entry":[{},"\u2003\u2003\u2003<content>Thanks <get name=\u201cfirst_name\u201d\/><\/content>"]},{"entry":[{},"\u2003\u2003\u2003\u2003<\/message>"]},{"entry":[{},"\u2003\u2003\u2003<\/input>"]},{"entry":[{},"\u2003<\/message>"]},{"entry":[{},"<\/match>"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}},"br":{}},"Two or more <input> tags can be nested, allowing multiple session variables to be set sequentially. For example, consider the following CMRL fragment:",{"@attributes":{"id":"p-0173","num":"0175"},"tables":{"@attributes":{"id":"TABLE-US-00025","num":"00025"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<match pattern=\u201cname\u201d>"]},{"entry":[{},"\u2003<message>"]},{"entry":[{},"\u2003\u2003<content>Reply with your first name<\/content>"]},{"entry":[{},"\u2003\u2003<input name=\u201cfirst_name\u201d>"]},{"entry":[{},"\u2003\u2003\u2003<message>"]},{"entry":[{},"\u2003\u2003\u2003\u2003<content>Now reply with your last name<\/content>"]},{"entry":[{},"\u2003\u2003\u2003\u2003<input name=\u201clast_name\u201d>"]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003<message>"]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003\u2003<content>Thanks <get name=\u201cfirst_name\u201d\/> <get"]},{"entry":[{},"name=\u201clast_name\u201d\/><\/content>"]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003<\/message>"]},{"entry":[{},"\u2003\u2003\u2003\u2003<\/input>"]},{"entry":[{},"\u2003\u2003\u2003<\/message>"]},{"entry":[{},"\u2003\u2003<\/input>"]},{"entry":[{},"\u2003<\/message>"]},{"entry":[{},"<\/match>"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"Under this construction, the query \u201cexample name\u201d produces the response \u201cReply with your first name.\u201d The reply \u201cSally\u201d then produces the response \u201cNow reply with your last name.\u201d The reply \u201cJones\u201d then produces the response \u201cThanks Sally Jones.\u201d","Anchors in CMRL are used to establish links to content. Anchors are similar to anchors on the web in that they make it easy to create a way for users to navigate a content hierarchy.","To illustrate, the following CMRL fragment under the internet domain name \u201cexample\u201d is used:",{"@attributes":{"id":"p-0177","num":"0179"},"tables":{"@attributes":{"id":"TABLE-US-00026","num":"00026"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"189pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<match pattern=\u201c\u201d>"]},{"entry":[{},"\u2003<message>"]},{"entry":[{},"\u2003\u2003<content>Welcome to example. com<br\/>"]},{"entry":[{},"Reply # for result<br\/>"]},{"entry":[{},"<a query=\u201cexample circle\u201d\/> Circle<br\/>"]},{"entry":[{},"<a query=\u201cexample square\u201d\/> Square<br\/>"]},{"entry":[{},"<a query=\u201cexample triangle\u201d\/> Triangle<\/content>"]},{"entry":[{},"\u2003<\/message>"]},{"entry":[{},"<\/match>"]},{"entry":[{},"<match pattern=\u201ccircle\u201d>"]},{"entry":[{},"\u2003<message>"]},{"entry":[{},"\u2003\u2003<content>You have selected a circle<\/content>"]},{"entry":[{},"\u2003<\/message>"]},{"entry":[{},"<\/match>"]},{"entry":[{},"<match pattern=\u201csquare\u201d>"]},{"entry":[{},"\u2003<message>"]},{"entry":[{},"\u2003\u2003<content>You have selected a square<\/content>"]},{"entry":[{},"\u2003<\/message>"]},{"entry":[{},"<\/match>"]},{"entry":[{},"<match pattern=\u201ctriangle\u201d>"]},{"entry":[{},"\u2003<message>"]},{"entry":[{},"\u2003\u2003<content>You have selected a triangle<\/content>"]},{"entry":[{},"\u2003<\/message>"]},{"entry":[{},"<\/match>"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"Here the query \u201cexample circle\u201d produces the response \u201cYou have selected a circle,\u201d the query \u201cexample square\u201d produces the response \u201cYou have selected a square,\u201d and the query \u201cexample triangle\u201d produces the response \u201cYou have selected a triangle.\u201d The query \u201cexample\u201d produces the response:","Reply # for result","(1) Circle","(2) Square","(3) Triangle","The query \u201cexample\u201d followed immediately (in the very next text message) by the reply \u201c1\u201d produces the response \u201cYou have selected a circle.\u201d Similarly, the query \u201cexample\u201d followed by the reply \u201c2\u201d produces the response \u201cYou have selected a square,\u201d and the query \u201cexample\u201d followed by the reply \u201c3\u201d produces the response \u201cYou have selected a triangle.\u201d","The \u201cnull\u201d match contains a <message> tag that contains a <content> tag that contains three <a> tags. The <a> tag is used within a <content> tag. The <a> tag must contain the attribute query and may contain a text string. The system turns the <a> tags within a <content> tag into links, which it enumerates, formats, and displays. If a <content> tag contains an <a> tag, then the reply sent by the user is treated differently than normal. In particular, if the reply matches one of the enumerated links, the query specified by the corresponding <a> tag is executed as though it were an incoming request. (If the reply sent by the user does not match one of the enumerated links, it will be treated as a normal query.)","The <a> tag is an abbreviated version of the similar but more general <anchor> tag. The following CMRL fragment under the internet domain name \u201cexample\u201d is used to illustrate:",{"@attributes":{"id":"p-0186","num":"0188"},"tables":{"@attributes":{"id":"TABLE-US-00027","num":"00027"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"<match pattern=\u201cweather\u201d>"},{"entry":"\u2003\u2003\u2002<message>"},{"entry":"\u2003\u2003\u2003<content>Today sunny, H 72<br\/>"},{"entry":"Reply <anchor>"},{"entry":"\u2003\u2003\u2003<message>"},{"entry":"\u2003\u2003\u2003<content>Today will be sunny and fair with a high of 72 deg"},{"entry":"F<\/content>"},{"entry":"\u2003\u2003\u2003<message>"},{"entry":"<\/anchor> for details<br\/>"},{"entry":"<br\/>"},{"entry":"Tonight clear, L 47<br\/>"},{"entry":"Reply <anchor>"},{"entry":"\u2003\u2003\u2003<message>"},{"entry":"\u2003\u2003\u2003<content>Tonight will be clear and cool with a low of 47 deg"},{"entry":"F<\/content>"},{"entry":"\u2003\u2003\u2003<\/message>"},{"entry":"<\/anchor> for details<\/content>"},{"entry":"\u2003\u2003\u2003<\/message>"},{"entry":"<\/match>"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}},"br":{}},"Today sunny, H 72","Reply (1) for details","Tonight clear, L 47","Reply (2) for details","The reply \u201c1\u201d produces the response \u201cToday will be sunny and fair with a high of 72 deg F.,\u201d whereas the reply \u201c2\u201d produces the response \u201cTonight will be clear and cool with a low of 47 deg F.\u201d","Like the <a> tag, the <anchor> tag is used within a <content> tag, and the system turns the <anchor> tags within a <content> tag into links which it enumerates, formats, and displays. The difference between the <a> tag and the <anchor> tag is that the <a> tag can refer only to a query whereas the <anchor> tag can refer to any CMRL terminating node. Specifically, the <anchor> tag must contain exactly one terminating node (which in this case is the <message> tag), which is resolved to if the reply matches the corresponding enumerated link.","To be further illustrate the similarity between the <a> tag and the <anchor> tag, the following CMRL fragment under the internet domain name \u201cexample\u201d is used:",{"@attributes":{"id":"p-0193","num":"0195"},"tables":{"@attributes":{"id":"TABLE-US-00028","num":"00028"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"196pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<match pattern=\u201c\u201d>"]},{"entry":[{},"\u2003\u2003\u2003<message>"]},{"entry":[{},"\u2003\u2003\u2003<content>He was able to <a query=\u201cexample"]},{"entry":[{},"elucidate\u201d>elucidate<\/a>"]},{"entry":[{},"the subject<\/content>"]},{"entry":[{},"\u2003\u2003\u2003<\/message>"]},{"entry":[{},"<\/match>"]},{"entry":[{},"<match pattern=\u201celucidate\u201d>"]},{"entry":[{},"\u2003\u2003\u2003<message>"]},{"entry":[{},"\u2003\u2003\u2003<content>elucidate -verb<br\/>"]},{"entry":[{},"to make lucid or clear; throw light upon; explain<\/content>"]},{"entry":[{},"\u2003\u2003\u2003<message>"]},{"entry":[{},"\u2002<\/match>"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}},"br":{}},{"@attributes":{"id":"p-0194","num":"0196"},"tables":{"@attributes":{"id":"TABLE-US-00029","num":"00029"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"<match pattern=\u201c\u201d>"},{"entry":"\u2003<message>"},{"entry":"\u2003<content>He was able to <anchor><query>example elucidate<\/query>"},{"entry":"elucidate<\/anchor> the subject<\/content>"},{"entry":"\u2003<\/message>"},{"entry":"<\/match>"},{"entry":"<match pattern=\u201celucidate\u201d>"},{"entry":"\u2003<message>"},{"entry":"\u2003\u2003<content>elucidate -verb<br\/>"},{"entry":"\u2002to make lucid or clear; throw light upon; explain<\/content>"},{"entry":"\u2003<message>"},{"entry":"<\/match>"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}},"br":{}},"He was able to elucidate (1) the subject","The reply \u201c1\u201d produces the response","elucidate\u2014verb to make lucid or clear; throw light upon; explain","In summary, by establishing links to specific content, anchors make it possible to create a way for users to navigate a content hierarchy.","A DOTGO\u2122 engine is a web-based application program that accepts input from DOTGO\u2122 and returns output to DOTGO\u2122. Engines can be used to create dynamic mobile services, connecting DOTGO\u2122 to the internet, databases, and other computer-based services. Because an engine is a web-based application program, it can be written in any web programming language (e.g. Perl, PHP, Java, Python, etc.)\u2014the only condition on an engine is that it must accept input in a specified format and must return output in a specified format.","Again utilizing the hypothetical mobile service implemented under the internet domain \u201cexample.com\u201d, the mobile service is accessed by sending a text message starting with the internet domain name \u201cexample\u201d to the phone number DOTCOM (368266) for which CMRL files and web-based application programs are hosted at the internet domain \u201cexample.com.\u201d","Consider the following CMRL document:",{"@attributes":{"id":"p-0201","num":"0203"},"tables":{"@attributes":{"id":"TABLE-US-00030","num":"00030"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<?xml version=\u201c1.0\u201d encoding=\u201cUTF-8\u201d?>"]},{"entry":[{},"<cmrl xmlns:dotgo=\u201chttp:\/\/dotgo.com\/cmrl\/1.0\u201d>"]},{"entry":[{},"\u2003<match pattern=\u201csomething\u201d>"]},{"entry":[{},"\u2003\u2003<engine href=\u201chttp:\/\/example.com\/cgi-bin\/something.cgi\u201d\/>"]},{"entry":[{},"\u2003<\/match>"]},{"entry":[{},"<\/cmrl>"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}},"br":{}},{"@attributes":{"id":"p-0202","num":"0204"},"tables":{"@attributes":{"id":"TABLE-US-00031","num":"00031"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"196pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"#!\/usr\/bin\/perl"]},{"entry":[{},"use CGI qw(:standard);"]},{"entry":[{},"use strict;"]},{"entry":[{},"my $color = param(\u201csys_argument\u201d);"]},{"entry":[{},"my @red_things = (\u201cApples\u201d, \u201cLips\u201d, \u201cHearts\u201d);"]},{"entry":[{},"my @green_things = (\u201cFrogs\u201d, \u201cShamrocks\u201d, \u201cOlives\u201d);"]},{"entry":[{},"my @blue_things = (\u201cJeans\u201d, \u201cBlueberries\u201d, \u201cBlue jays\u201d);"]},{"entry":[{},"my $thing;"]},{"entry":[{},"if ($color eq \u201cred\u201d) {"]},{"entry":[{},"\u2003$thing = $red_things[int(rand($#red_things+1))];"]},{"entry":[{},"} elsif ($color eq \u201cgreen\u201d) {"]},{"entry":[{},"\u2003$thing = $green_things[int(rand($#green_things+1))];"]},{"entry":[{},"} elsif ($color eq \u201cblue\u201d) {"]},{"entry":[{},"\u2003$thing = $blue_things[int(rand($#blue_things+1))];"]},{"entry":[{},"}"]},{"entry":[{},"my $content;"]},{"entry":[{},"if ($thing) {"]},{"entry":[{},"\u2003$content = \u201c$thing are $color\u201d;"]},{"entry":[{},"} else {"]},{"entry":[{},"\u2003$content = \u201cTry red, green, or blue\u201d;"]},{"entry":[{},"}"]},{"entry":[{},"print header;"]},{"entry":[{},"print <<EOF"]},{"entry":[{},"<message>"]},{"entry":[{},"\u2003\u2003<content>$content<\/content>"]},{"entry":[{},"<\/message>"]},{"entry":[{},"EOF"]},{"entry":[{},";"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"The query \u201cexample something red\u201d produces one of the responses (at random) \u201cApples are red,\u201d \u201cLips are red,\u201d or \u201cHearts are red.\u201d Similarly, the query \u201cexample something green\u201d produces one of the responses \u201cFrogs are green,\u201d \u201cShamrocks are green,\u201d or \u201cOlives are green,\u201d and the query \u201cexample something blue\u201d produces one of the responses \u201cJeans are blue,\u201d \u201cBlueberries are blue,\u201d or \u201cBlue jays are blue.\u201d The query \u201cexample something yellow\u201d produces the response \u201cTry red, green, or blue.\u201d","This result is obtained by accessing the service by sending the text message \u201cexample something red\u201d to the phone number DOTCOM (368266). First, the system uses the first word of the query \u201cexample\u201d and the phone number DOTCOM (368266) through which the query is received to determine that the query should be routed to example.com. Next, the system retrieves the file index.cmrl from example.com. Next, the system compares the remainder of the query (i.e., everything after \u201cexample,\u201d which in this case was the string \u201csomething red\u201d) against the match patterns specified in the file index.cmrl in order to resolve the query. In this case, there is only one match pattern specified in the file index.cmrl\u2014the match pattern \u201csomething\u201d, which is matched by the first token \u201csomething\u201d of the string \u201csomething red\u201d and which resolves to the <engine> tag. Next, the system calls the engine something.cgi referenced by the <engine> tag, posting the remainder of the query (i.e., everything after \u201csomething,\u201d which in this case is the string \u201cred\u201d) to the engine as the parameter \u201csys_argument.\u201d The engine uses the value of the parameter \u201csys argument,\u201d which it assigns to the variable \u201c$color,\u201d to construct the response, which is assigned to the variable \u201c$content.\u201d Finally, the engine prints the value of the variable \u201c$content\u201d within a CMRL <message> tag, which produces the message \u201cApples are red\u201d (or similar) returned by the system.","A number of points may be observed from this example:","1. The request is made up of several distinct parts: one part (in this case, the phone number DOTCOM (368266) plus \u201cexample\u201d) designates the internet domain that hosts the index.cmrl file, one part (in this case \u201csomething\u201d) designates the path that is compared against the match patterns specified by the CMRL document, and one part (in this case \u201cred\u201d) designates the argument that is passed to the engine.","2. There is no explicit delimiter between the path and the argument. The request must be routed by the system (by comparison to some CMRL document) in order to determine which portion of the request is the match and which part of the request is the argument.","3. The argument is posted to the engine as the parameter \u201csys argument.\u201d Other parameters are also posted to the engine (as described below).","4. The engine returns a CMRL \u201cterminating node,\u201d of which the <message> tag is the simplest example.","In summary, DOTGO\u2122 engines work by the following process: the system extracts an argument from the request by comparing the request against the match patterns specified in some CMRL document, the system posts the argument (and other parameters) to the engine, and the engine returns a CMRL terminating node.","The nomenclature of the structure of a request is illustrated in . A request is the fundamental unit of interaction with DOTGO\u2122. A request is made up of a channel and a query. A channel is a specification of the physical device through which the request was received. For purposes of this description, a channel is one of the phone numbers DOTCOM (368266), DOTEDU (368338), DOTGOV (368468), DOTNET (368638), or DOTORG (368674). A query is a text string sent by a user. A query is made up of a designator and an optional instruction. A designator is the first word of a query. A designator is either an internet domain name (with or without an explicit specification of a top-level domain) or a URL. The channel and the designator together specify the location of a CMRL file. An instruction is the remainder of the query (after the designator). An instruction is made up of an optional path, an optional argument, an optional directive, and an optional directive argument. A path is a portion of a query that is matched to match patterns specified in a CMRL file. A path is made up of one or more match patterns (which may contain spaces). An argument is the portion of the query after the match and before the directive. An argument includes one or more keywords (which may contain spaces). A directive is a DOTGO\u2122 reserved word. In version 1.0 of CMRL, the DOTGO\u2122 reserved words are \u201cfollow\u201d, \u201cunfollow\u201d, \u201cregister\u201d, \u201cunregister\u201d, \u201cstop\u201d, \u201csubscribe\u201d, and \u201cunsubscribe\u201d. A directive argument is the remainder of the query (after the directive). A directive and a directive argument are handled by the system and are never passed to an engine.","As one concrete example, consider the directive \u201csubscribe\u201d. This directive allows a user to initiate the creation of a subscription to a query via concise message request, via the subscriber web interface, or via a content provider website or application which accesses the inventive system through an internet-based application programming interface (API). After the subscribe request has been made, the user is contacted via concise message requesting confirmation of the subscription. Upon affirmation of the request by the user, a subscription is created. Once a subscriber has been subscribed to a query, the query is executed periodically, on a schedule or condition specified by the directive argument. For example, a request of the form \u201cstarbucks news subscribe mwf 9 am eastern\u201d to the short code DOTCOM would request confirmation from the user, and upon successful confirmation would result in the query \u201cstarbucks news\u201d being executed every Monday, Wednesday, and Friday at 9 am Eastern Standard Time. Similarly, the request \u201cstarbucks news subscribe daily 5:30 pm\u201d would result in the same query being executed every day at 5:30 pm. Finally, the request \u201cstarbucks news subscribe on update\u201d would result in the query being executed and the response sent to the user every time the concise message content returned as a result of the query for that user is changed. The directive argument for the directive \u201csubscribe\u201d can specify a variety of time or condition specifications, including time intervals, specific times and dates, time functions (such as \u201cdusk\u201d), content conditions (such as \u201con update\u201d), or other intentions for periodic specification.","Separation of the path from the argument can only be done by comparing the request against the match patterns specified in some CMRL document. In other words, what portion of the request will be posted to an engine depends on what portion of the request is matched to match patterns specified in the CMRL document.","In the example described above (with the colored items), the argument was posted to the engine through the parameter \u201csys_argument.\u201d Other parameters that can be posted to an engine are listed in Table 1:",{"@attributes":{"id":"p-0215","num":"0217"},"tables":{"@attributes":{"id":"TABLE-US-00032","num":"00032"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"98pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"119pt","align":"left"}}],"thead":{"row":[{"entry":"TABLE 1"},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":["Parameter","Description"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["sys_query","Query"]},{"entry":["sys_argument","Argument"]},{"entry":["sys_designator","Designator"]},{"entry":["sys_location","Location"]},{"entry":["sys_num_known_keywords","Number of matched and corrected"]},{"entry":[{},"keywords"]},{"entry":["sys_known_keyword[n]","Matched and corrected keywords"]},{"entry":["sys_num_unknown_keywords","Number of unmatched and"]},{"entry":[{},"uncorrected keywords"]},{"entry":["sys_unknown_keyword[n]","Unmatched and uncorrected keywords"]},{"entry":["sys_num_keywords","Number of matched and unmatched"]},{"entry":[{},"keywords"]},{"entry":["sys_keyword[n]","Matched and unmatched keywords"]},{"entry":[{},"(in order)"]},{"entry":["sys_match","Match"]},{"entry":["sys_num_patterns","Number of matched patterns"]},{"entry":["sys_patterns[n]","Number of matched patterns"]},{"entry":["Session variables","Session variables"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"An engine returns a CMRL \u201cterminating node,\u201d of which the <message> tag is the simplest example. In version 1.0 of CMRL, there are five CMRL terminating nodes: the <message> tag, the <engine> tag, the <rss> tag, the <block> tag, and the <query> tag, each of which has been described previously in the listing of key elements.","The framework described in this and the preceding examples can be use to write rich content using CMRL. Additional matches can be included, and matches can be nested within matches. Dynamic content can be returned using the <engine> and <rss> tags.","Mobile Commerce","The inventive system also includes provisions that allow content providers and end users to conduct mobile commerce, i.e., \u201cm-commerce.\u201d Transactions including \u201cm-buy\u201d, i.e., buying an item through the user's mobile phone using CMRL, and \u201cm-pay\u201d, i.e., conducting a transfer of funds using CMRL and a user's mobile phone, can be accomplished using the inventive system over a network such as the one illustrated in .","The structure of the inventive system is such that concise message purchase or payment requests sent to the system can be properly routed to the appropriate account as designated by the content provider. This organizational structure provides a solution to the problems associated with existing systems such as PAYPAL\u00ae regarding identifying the payee (e.g., a particular STARBUCKS\u00ae franchise) by using the inventive routing method. Specifically, the present invention enforces a strict mapping between concise message request channel\/designator pair and internet domain name, such that only the owner of an internet domain name can manage the corresponding domain name CMRL and hence determine the account(s) used for m-commerce. In this way end users are guaranteed that their concise message request is being routed to the owner of a particular domain name.","For example, STARBUCKS\u00ae, the owner of the domain starbucks.com, has complete and unambiguous control over the CMRL file located at the starbucks.com URL. Only the owner of the domain starbucks.com can create and manage this CMRL file. In one embodiment of the inventive system, the owner of starbucks.com is also the unambiguous owner of the designator\/channel pair \u201cstarbucks\u201d at the text messaging short code DOTCOM. In this embodiment, all concise message requests with the designator\/channel pair \u201cstarbucks\u201d at DOTCOM are routed and fulfilled considering the CMRL filed \u201cindex.cmrl\u201d contained located at the URL for starbucks.com. This in and of itself solves one of the problems of the related art, namely, how to unambiguously identify the payee of a transaction. In addition, because STARBUCKS\u00ae controls the CMRL that is used to fulfill requests with the designator\/keyword pair \u201cstarbucks\u201d at DOTCOM, it is able to assign store numbers in their top-level CMRL document to STARBUCKS\u00ae franchises as it sees fit, addressing another problem of the related art, namely the ambiguity of assigning and managing ownership of keywords. In this model, a user might send the concise message request via text message: \u201cstarbucks  buy grande latte\u201d. The query would be routed to the starbucks.com's CMRL document, which might have an entry \u201c332\u201d redirecting to the CMRL of STARBUCKS\u00ae store number 332. This CMRL document would then describe all the items that can be purchased at STARBUCKS\u00ae store 332, along with their prices, taxable status, and ordering options (e.g., \u201cgrande\u201d) using an m-buy CMRL tag. In this way, the owner of starbucks.com (namely, the company STARBUCKS\u00ae) has complete control (via their top-level CMRL document) over how they choose to route all requests that are addressed to the designator\/channel pair \u201cstarbucks\u201d at DOTCOM, which includes the ability to delegate requests to the appropriate franchises.","Another aspect of the present invention provides a built-in mechanism for allowing a content provider to associate a payment with a particular transaction, without the need for a subscriber to disclose personal information. Because a transaction is initiated via concise message by a subscriber and sent to the inventive system, there is no need for the subscriber to divulge personal information, e.g., mobile phone number, email address, account name, etc., to the content provider. The inventive system provides a mechanism by which a content provider can specify a URL to be called (an \u201cengine\u201d) when a transaction is initiated, completed, and\/or terminated by the subscriber. For example, if a cashier were to ring up an order for someone at a STARBUCKS\u00ae cafe, the cashier could then instruct the cash register to accept a payment by SMS and give the customer a corresponding purchase number. The customer could then send that purchase number via concise message addressed to the STARBUCKS\u00ae cafe (i.e., the content provider) via the inventive system in order make the payment. For example, the customer might text the query \u201cstarbucks.com 332 194F56\u201d, where 332 is the store number and 194F56 is the purchase number given to the customer by the cashier.","The system, if instructed by the CMRL of STARBUCKS\u00ae store 332, could then query a URL over the Internet or other network to request price and transaction information associated with the purchase number 194F56. The transaction and price could then be confirmed and completed by the customer. When the user has completed the transaction, the final details of the transaction can be sent to the URL, which could allow, e.g., the cash register to mark the payment as accepted. This feature, namely that of providing a concrete way to associate a payment with a particular transaction, makes the inventive system particularly useful for person-to-computer, e.g., point-of-sale, transactions.","The present invention allows for two classes of functionality to be expressed in a computer language: \u201cm-buy\u201d, and \u201cm-pay\u201d (for \u201cmobile-buy\u201d and \u201cmobile-pay\u201d). An \u201cm-buy\u201d language block allows a content provider to define items that users can purchase. A content provider can author an \u201cm-buy\u201d block in a computer text file (i.e. CMRL file) to define the items that are for sale as well as options that are available for the items. These options may or may not affect the cost of the item, such as whether it is taxable, or its size, color, etc. The present invention makes use of a system including hardware and software to interpret these CMRL files (preferably over a network) and make the items available by concise message request over one or more media. A user can send a concise message request (e.g., by mobile phone SMS text message) requesting an item. According to the present invention, all aspects of the transaction can be handled, including: identifying the content provider \u201cm-buy\u201d block and item being requested; informing the purchaser of any ambiguities in their request; informing the purchaser about the price, availability, and other information related to the items they have chosen to buy; confirming or possibly requesting billing and\/or account information from the purchaser; confirming the purchase with the purchaser; debiting the purchaser's account, credit card, bank account, or other method of payment; crediting the content provider for the purchase; logging all aspects of the transaction and possibly making some or all of this information available to the purchaser, content provider, or both.","An \u201cm-pay\u201d language block allows a content provider to define a more general concise message payment. This may be used when the content provider does not desire to define specific items for sale as in an \u201cm-buy\u201d block, or does not know the price of a transaction in advance. For example, an \u201cm-pay\u201d block might be used to allow a mobile user to pay an invoice as rung up on a cash register, to send a donation to a charity where the user specifies the amount to donate, or more generally to send an arbitrary amount of money to the content provider. An \u201cm-pay\u201d block can include a reference to a URL which can be used to query the price of a transaction and which is used to signal successful completion or termination of the transaction. For example, this URL could be used to inform a cash register after a payment has been made. Note that an \u201cm-pay\u201d block could be used by a content provider to implement a person-to-person method of payment.","Mobile commerce transactions enabled by the present invention are illustrated by the following examples.","The following code listing provides a hypothetical example of an m-buy (mobile-buy) block expressed in CMRL as it might be implemented for the starbucks.com domain. This file could be uploaded to the inventive system's servers and associated with the starbucks.com domain, or it could be named \u201cindex.cmrl\u201d and placed in the root web directory of the starbucks.com internet server.",{"@attributes":{"id":"p-0227","num":"0229"},"tables":{"@attributes":{"id":"TABLE-US-00033","num":"00033"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"<cmrl>"},{"entry":"\u2003<match pattern=\u201c\u201d>"},{"entry":"\u2003\u2003<message><content>Welcome to Starbucks. Text a store number,"},{"entry":"\u2003\u2003\u2002\u201cbuy\u201d, and some items to make a purchase.<br \/>"},{"entry":"\u2003\u2003\u2002Ex: \u201cbuy 332 small coff sgr lf mlk\u201d<\/content><\/message>"},{"entry":"\u2003<\/match>"},{"entry":"\u2003<match pattern=\u201c332\u201d>"},{"entry":"\u2003\u2003<match pattern=\u201clocation|address\u201d>"},{"entry":"\u2003\u2003\u2003<message><content>Starbucks store 332 is located at 123 Main"},{"entry":"Street, Cambridge, MA, 02139.<\/content><\/message>"},{"entry":"\u2003\u2003<\/match>"},{"entry":"\u2003<match pattern=\u201cbuy\u201d>"},{"entry":"\u2003<m-buy account=\u201cstarbucks332\u201d taxrate=\u201c0.085\u201d>"},{"entry":"\u2003\u2003<item pattern=\u201ccoffee\u201d taxable=\u201c1\u201d>"},{"entry":"\u2003\u2003\u2003<style pattern=\u201csmall\u201d price=\u201c1.99\u201d \/>"},{"entry":"\u2003\u2003\u2003\u2003<style pattern=\u201clarge\u201d price=\u201c2.99\u201d default=\u201c1\u201d\/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<options>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003<option pattern=\u201csugar\u201d \/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003<option pattern=\u201cregular milk\u201d \/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003<option pattern=\u201clow fat milk\u201d \/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<\/options>"},{"entry":"\u2003\u2003\u2003\u2003<\/item>"},{"entry":"\u2003\u2003\u2003<\/m-buy>"},{"entry":"\u2003\u2003<\/buy>"},{"entry":"\u2003<\/match>"},{"entry":"<\/cmrl>"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"In this example, the content provider has defined a \u201cnull match\u201d pattern which responds with the message, \u2018Welcome to Starbucks. Text a store number, \u201cbuy\u201d, and a brief description of the desired items to make a purchase. Ex: \u201cbuy  small coff sgr lf mlk\u2019\u201d. This \u201cnull match\u201d is returned when the query routed to this file has no additional tokens, namely the query \u201cstarbucks\u201d or \u201cstarbucks.com\u201d. In this example the content provider has also defined a match to the pattern \u201c332\u201d. Within the \u201c332\u201d match, the content provider has defined two additional match patterns: \u201clocation|address\u201d, and \u201cbuy\u201d. The \u201c1\u201d operator specifies that the match pattern should match a query that contains either the token \u201clocation\u201d or the token \u201caddress\u201d. For example, both queries \u201cstarbucks  location\u201d and \u201cstarbucks  address\u201d would result in the message \u201cStarbucks store 332 is located at 123 Main Street, Cambridge, Mass., 02139\u201d being sent to the user. In addition, the queries \u201cstarbucks address\u201d and \u201cstarbucks location\u201d would also result in the same response message, since the system uses an algorithm which allows for match levels to be skipped (\u201c332\u201d in this case) when possible. The queries \u201cstarbucks addr\u201d, and \u201cstarbucks  lcn\u201d would also result in the same message, since the matching and routing algorithm used by the system takes into account partial and phonetic matches, abbreviations, removal of punctuation, and acronyms.","The second match in the above code listing under the \u201c332\u201d match pattern matches the query pattern \u201cbuy\u201d, and terminates with an m-buy block instead of a message. This m-buy block defines the account, which has been created in one embodiment via a content provider web interface in the inventive system, which is to be credited with the payment (\u201cstarbucks332\u201d) and the tax rate to be applied for the sale (8.5%). It is important to note that this account name (\u201cstarbucks332\u201d) is completely hidden from the user, and that the payee is specified by the user via a concise message request which is routed to the m-buy block (and hence account) of the payee through a well-defined hierarchy ultimately administered by the internet domain name owner.","The m-buy block may include additional information needed for the sale as well, such as shipping information or per-state tax information. The m-buy block in the above code listing includes a single item for sale, \u201ccoffee\u201d, which is defined to be taxable (i.e., the tax rate will be applied). Two \u201cstyles\u201d of coffee are available in this example: \u201csmall\u201d, for a price of $1.99, and large, for a price of $2.99. Styles specify mutually exclusive qualifiers for the item. In this example, the queries \u201cstarbucks  buy small coffee\u201d and \u201cstarbucks  buy coffee small\u201d would both result in an order for a small coffee. The query \u201cstarbucks  buy large small coffee\u201d would result in an error, since \u201clarge\u201d and \u201csmall\u201d are both styles and hence can not appear together for a single item. Finally, because the \u201clarge\u201d style is marked as default, the query \u201cstarbucks  buy coffee\u201d is equivalent to \u201cstarbucks  buy large coffee\u201d.","The <options> tag in the example code listing allows for additional options to be added to an item. In this example, three options are defined: \u201csugar\u201d, \u201cregular milk\u201d, and \u201clow fat milk\u201d. Unlike styles, options are not mutually exclusive and more than one can appear in a query.","When a query that terminates in an m-buy block is sent to the inventive system, the system first determines whether the user can be billed by searching its database(s) for billing information for that user such as a credit card number, bank account number, or other credit information through which a transfer of funds can be effected for payment. If a user query is successfully matched to items in an \u201cm-buy\u201d block and the user does not have billing information on file, the user is instructed to supply their billing information, either via a website, by SMS, by phone, or by another medium. If the user does have billing information on file, the system sends the user a confirmation message, such as \u201cYour order totals $2.16. Reply [1] to confirm your order from STARBUCKS\u00ae 332 for: small coffee sugar low fat milk.\u201d If the user confirms this message (e.g., by replying \u201c1\u201d), the user's account that is on file in the system is debited for the cost of the order. The complete order information along with a system assigned transaction ID is then delivered to the content provider using delivery options specified in the merchant account identified with the \u201caccount\u201d attribute of the m-buy tag (\u201cstarbucks332\u201d in this example). This might include e-mail delivery, Internet IP delivery (e.g., via an HTTP \u201cPOST\u201d or \u201cGET\u201d), or other method. This delivery method and\/or destination and\/or other delivery details can also be optionally specified in the m-buy block itself. An order completion message is sent to the user which includes a transaction ID. The confirmation message could read, for example, \u201cYou have completed your purchase and your order has been sent to STARBUCKS\u00ae 332. Your transaction ID is 2D38484.\u201d The user can then present this transaction ID at STARBUCKS\u00ae store 332 to receive their order. Note it is also possible for an m-buy block to specify that the payment can or must be made using another method such as at the point-of-sale or via the internet instead of debiting the user's account information stored in the inventive system.","The following code listing provides another example of a CMRL document that uses an m-buy block to sell pizza for take-out from a UNO CHICAGO GRILL\u00ae restaurant, i.e., a nearby location of a restaurant chain. This example could be used by either uploading it to the inventive system's servers, or by putting it in the file \u201cindex.cmrl\u201d at unos.com, i.e., the general web site of the Pizzeria Uno Corporation. This action would make it immediately available by SMS via one or more short codes, by voice via one or more phone numbers, and possibly by other media including email via one or more email addresses.",{"@attributes":{"id":"p-0234","num":"0236"},"tables":{"@attributes":{"id":"TABLE-US-00034","num":"00034"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"<cmrl>"},{"entry":"\u2003<match pattern=\u201c\u201d>"},{"entry":"\u2003\u2003<message><content>Welcome to Pizzeria Uno. Text a store number"},{"entry":"or location you'd like to pick up your order at and what you'd like to"},{"entry":"buy.<\/content><\/message>"},{"entry":"\u2003<\/match>"},{"entry":"\u2003<match pattern=\u201c456|&location_near(\u201811790\u2019, 8, \u201856 Main Street\u2019)\u201d>"},{"entry":"\u2003\u2003<m-buy account=\u201cunos456\u201d taxrate=\u201c0.085\u201d>"},{"entry":"\u2003\u2003\u2003<item pattern=\u201cpizza\u201d taxable=\u201c1\u201d>"},{"entry":"\u2003\u2003\u2003\u2003<style pattern=\u201csmall\u201d price=\u201c10.99\u201d>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<options>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003<option pattern=\u201cpepperoni\u201d price=\u201c1.00\u201d \/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003<option pattern=\u201canchovies\u201d price=\u201c1.00\u201d \/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<\/options>"},{"entry":"\u2003\u2003\u2003\u2003<\/style>"},{"entry":"\u2003\u2003\u2003\u2003<style pattern=\u201clarge\u201d price=\u201c12.99\u201d \/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<options>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003<option pattern=\u201cpepperoni\u201d price=\u201c2.00\u201d \/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003<option pattern=\u201canchovies\u201d price=\u201c2.00 \/>"},{"entry":"\u2003\u2003\u2003\u2003\u2003<\/options>"},{"entry":"\u2003\u2003\u2003\u2003<\/style>"},{"entry":"\u2003\u2003\u2003<\/item>"},{"entry":"\u2003\u2003<\/m-buy>"},{"entry":"\u2003<\/match>"},{"entry":"<\/cmrl>"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}},"br":{}},"The above code listing also provides an example of allowing different option blocks within each style. This allows for different options per style, or different option attributes per style, such as price. In this example, the query \u201cunos 456 small pizza pepp\u201d would result in an order for a pizza with the style \u201csmall\u201d and with the option \u201cpepperoni\u201d, totaling $13.01 ($11.99 plus tax). Note that styles can contain additional styles, allowing for multiple mutually-exclusive qualifiers e.g., \u201clarge deep dish pizza\u201d.","The following code listing provides an example of an m-pay (mobile-pay) block as expressed in a hypothetical CMRL document for the Red Cross (redcross.org).",{"@attributes":{"id":"p-0237","num":"0239"},"tables":{"@attributes":{"id":"TABLE-US-00035","num":"00035"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"<cmrl>"},{"entry":"\u2003<match pattern=\u201c\u201d>"},{"entry":"\u2003\u2003<message><content>Welcome to the Red Cross SMS site. Text"},{"entry":"\u201cdonate\u201d to donate.<br \/>Ex: \u201credcross donate 15\u201d<br \/>"},{"entry":"\u2003\u2003Or, text \u201cdonate\u201d and a cause to donate to a specific"},{"entry":"charity.<br\/>"},{"entry":"\u2003\u2003Ex: \u201credcross donate tsunami\u201d<\/content><\/message>"},{"entry":"\u2003<\/match>"},{"entry":"\u2003<match pattern=\u201cdonate\u201d>"},{"entry":"\u2003\u2003<m-pay account=\u201credcross\u201d \/>"},{"entry":"\u2003<\/match>"},{"entry":"\u2003<match pattern=\u201cinvoice\u201d>"},{"entry":"\u2003\u2003<m-pay account=\u201credcross\u201d href=\u201chttp:\/\/redcross.org\/cgi-"},{"entry":"bin\/inv\u201d\/>"},{"entry":"\u2003<\/match>"},{"entry":"<\/cmrl>"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}},"br":{}},"The third match pattern (for \u201cinvoice\u201d) in the code listing shows an example of retrieving payment information dynamically from the content provider. In this example, the query \u201credcross.org invoice 8U8348\u201d is routed to the m-pay block under the \u201cinvoice\u201d match pattern. If the user is not billable, the user is instructed to provide billing information, as described above. If the user is billable, the system queries the script of the invoice directory for the Red Cross URL with the parameter \u201c8U8348\u201d to retrieve pricing and other information given the parameter \u201c8U8348\u201d. The transaction is completed using the price and other information returned by the script in a manner similar to that described in the previous example. This functionality permits a number of operations, including allowing a user to make a purchase at a content provider's store, obtain an invoice number, and pay this invoice directly from their mobile phone without divulging their mobile phone number, account number, or other contact information to the cashier. It should be noted that this dynamic querying of m-commerce information can also be used in an m-buy block (e.g., for querying item price or item availability).","Both the m-buy and m-pay blocks may default to the currency of the user, but can also support additional currencies. For example, a user could query \u201credcross.org donate 12 EUR\u201d to pay 12 Euros to redcross account.","Currently, person-to-person cell phone text messaging has a number of limitations:\n\n","These limitations make many people reluctant to share their mobile phone numbers with anyone other than a family member, friend or trusted business associate, and can particularly make people reluctant to publish their cell phone numbers on a website.","The system according to the present invention provides a solution to the foregoing problems in a way that builds directly on the fundamental organizational structure of the system. This feature is characterized by the following aspects of the DOTGO\u2122 system:","1. The possibility for the concise message request designator to optionally include account information, such as with the syntax user@domain.","2. The following three constructs of CMRL: register, forward, and follow","These two aspects of CMRL allow a content provider to quickly and easily define accounts and enable messaging between their users. This permits users to easily contact each other via mobile phone text messaging by sending messages such as \u201cjoe@example Hows it going?\u201d to DOTCOM. The messaging component of the inventive system includes the following features:","1. Account definition: Details of the user account at a domain are completely specified by the content provider in the CMRL of the SMS site. Content providers can add a functioning user account to their domain for text messaging in seconds by adding one to three simple language tags.","2. Privacy: Users can register their mobile phone numbers to an account only through concise message requests to the inventive system. The numbers are not shared with a content provider and users can unregister at any time.","3. Permissions: User- and domain-based white- and black-lists are supported. For example, a user at facebook.com could choose to block a specific FACEBOOK\u00ae user from texting them, could choose to allow only specific friends or groups of friends to text them, or could choose to block all messages from facebook.com.","4. One-to-many texting: Users can choose to \u201cfollow\u201d another user, receiving all messages sent by that user. This allows websites such as example.com to implement their own micro-blogging services (similar to that offered by Twitter.com, a service for friends, family, and co-workers to communicate and stay connected through the exchange of quick, frequent messages).","5. Many-to-many texting: Users can choose to \u201cfollow\u201d a \u201cpublic\u201d query. Messages sent to that query by its followers are distributed to all other followers, in effect providing a text messaging-based chat room.","6. Message routing: Users can choose to route messages to their phone, or can choose an alternate method of delivery such as e-mail, an instant messaging account, or another destination offered by the content provider (e.g., delivery as a message to their FACEBOOK\u00ae messaging account). In addition, message routing preferences can be set to block or allow receipt of messages at specified times of day, days of the week, or another time specifications.","The messaging features provided by CMRL create a tighter integration between person-to-person text messaging and the internet and allow text messaging to be a safer and more flexible form of communication. Such a capability enables, for example, college professors or high school teachers to allow their students text them in a safe and controllable manner, for users of social networks such as FACEBOOK\u00ae or MYSPACE\u00ae to text each other, and for every internet domain proprietor to provide a new way to engage and communicate with their users.","The system and method of the present invention allow mobile phone users to obtain, and content providers to provide, information via a variety of media including mobile phone text messaging. The inventive system replicates the organizational structure of the internet, making it easy for users to find the desired information via concise message request, and allows content providers to disseminate any subset of the information they make available on the internet\u2014the subset that is most useful and relevant in a mobile setting. Concise messages requests are typically short, and the inventive system makes it easy and fast to send and receive small amounts of information using a mobile phone. The organizing principle of the system for text messaging is that the first word of the text message request, possibly combined with the phone number the message was sent to, specifies the internet domain name being requested.","A language called the \u201cConcise Message Routing Language\u201d or \u201cCMRL\u201d plays a similar role to the inventive system that HTML plays to the world wide web\u2014it describes content. However, CMRL is specifically designed to provide content \u201crouting\u201d information, enabling concise message requests to be routed effectively and efficiently to the responses from content providers that are appropriate, using media such as mobile phone text messaging. This makes it ideal for describing content that is intended to be accessed in a mobile setting, where slow data transfer rates often make browsing the internet on a mobile-phone browser a frustrating experience. The organization of the present invention provides means for conducting financial transactions and communicating between individuals or groups without disclosing personal and private information.","Other embodiments, applications and modifications of the present invention will occur readily to those of ordinary skill in the art in view of these description and examples provided herein. Accordingly, the scope of the invention is to be limited only by the following claims which include all such other embodiments and modifications when viewed in conjunction with the foregoing specification and accompanying drawings."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 4"}]},"DETDESC":[{},{}]}
