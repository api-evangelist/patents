---
title: Dynamic tunnel for real time data communication
abstract: A tunneled session management (“TSM”) server manages a dynamic datagram tunnel (“DDT”) for a real time communication (“RTC”) with a TSM client. The TSM server establishes a stream based tunnel with the TSM client and then establishes the RTC via the stream based tunnel, where the RTC includes communicating a first channel for signaling traffic and a second channel for media traffic. Then, it is determined whether to establish the DDT for communicating the media traffic, and if so, the DDT is established and the second channel is communicated via the DDT while the first channel is maintained on the stream based tunnel.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09444792&OS=09444792&RS=09444792
owner: Oracle International Corporation
number: 09444792
owner_city: Redwood Shores
owner_country: US
publication_date: 20141021
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["FIELD","BACKGROUND INFORMATION","SUMMARY","DETAILED DESCRIPTION","Command Line Interface (CLI) Commands"],"p":["One embodiment is directed generally to a communication network, and in particular to delivering real time media over a communication network.","Many enterprises have moved from telephony services using the Public Switched Telephone Network (\u201cPSTN\u201d) (provided by a traditional telephone company) to telephony services using the Internet Protocol (\u201cIP\u201d) (provided by an IP Telephony service provider). Such services are commonly known as Voice over IP (\u201cVoIP\u201d) or IP Telephony. IP Telephony uses an IP network (e.g., the Internet) as a backbone and can thus provide advanced features such as video conferencing, call recording, and call forwarding.","Embodiments manage a dynamic datagram tunnel (\u201cDDT\u201d) for a real time communication (\u201cRTC\u201d) with a tunneled session management (\u201cTSM\u201d) client. Embodiments establish a stream based tunnel with the TSM client and then establish the RTC via the stream based tunnel, where the RTC includes communicating a first channel for signaling traffic and a second channel for media traffic. Then, it is determined whether to establish the DDT for communicating the media traffic, and if so, the DDT is established and the second channel is communicated via the DDT while the first channel is maintained on the stream based tunnel.","One embodiment provides real time communication (\u201cRTC\u201d) services in a network environment by establishing a dynamic datagram tunnel (\u201cDDT\u201d) that carries real time media traffic between end users and remote servers, while traversing security devices such as firewalls. Accordingly, by traversing security devices, this embodiment provides secure RTC services. Further, by using a datagram tunnel, this embodiment addresses RTC requirements such as call quality (which may be affected by impairments such as latency, packet loss, and\/or jitter).",{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 1","b":["100","100","101","114","124","126","122","101"]},"In order to communicate media and provide RTC, UE  communicates with media server  and signaling server  over two channels: a first channel  for signaling traffic via a Session Initiation Protocol (\u201cSIP\u201d), and a second channel  for media traffic. SIP is a signaling communications protocol, conventionally used for controlling multimedia communication sessions such as voice and video calls over IP networks.","Network  further includes a tunneled session management (\u201cTSM\u201d) client  (included within UE ) and a TSM server  that, together, establish and manage tunnels (e.g.,  and ) for supporting RTC over IP network . In general, using a tunnel for communication refers to using a delivery protocol to encapsulate a different payload protocol. TSM client  includes a tunnel service client (\u201cTSC\u201d)  and an application . In one embodiment, application  is SIP based and relies on a TSM library such as the TSM library provided by Oracle's TSM software development kit (\u201cSDK\u201d) . TSM server  includes a tunnel service control function (\u201cTSCF\u201d)  and a session border controller (\u201cSBC\u201d) . SBC  is a device regularly deployed in Voice over IP (\u201cVoIP\u201d) networks to control the signaling, and typically also the media streams, involved in setting up, conducting, and tearing down phone calls or other interactive media communications.","Network  further includes security devices such as firewalls  or proxies (not shown) that provide security for end user traffic. In general, a firewall is a software or hardware-based network security system that controls the incoming and outgoing network traffic based on applied rules. In network , tunnels ,  may traverse firewalls  so that RTC services are provided in a secure manner.",{"@attributes":{"id":"p-0013","num":"0012"},"figref":["FIG. 2","FIG. 1","FIG. 2"],"b":["10","10","10","10","16","10","24"]},"System  includes a bus  or other communication mechanism for communicating information, and a processor  coupled to bus  for processing information. Processor  may be any type of general or specific purpose processor. System  further includes a memory  for storing information and instructions to be executed by processor . Memory  can be comprised of any combination of random access memory (\u201cRAM\u201d), read only memory (\u201cROM\u201d), static storage such as a magnetic or optical disk, or any other type of computer readable media. System  further includes a communication device , such as a network interface card, to provide access to a network. Therefore, a user may interface with system  directly, or remotely through a network, or any other method.","Computer readable media may be any available media that can be accessed by processor  and includes both volatile and nonvolatile media, removable and non-removable media, and communication media. Communication media may include computer readable instructions, data structures, program modules, or other data in a modulated data signal such as a carrier wave or other transport mechanism, and includes any information delivery media.","Processor  may further be coupled via bus  to a display , such as a Liquid Crystal Display (\u201cLCD\u201d). A keyboard  and a cursor control device , such as a computer mouse, may further be coupled to bus  to enable a user to interface with system  on an as needed basis.","In one embodiment, memory  stores software modules that provide functionality when executed by processor . The modules include an operating system  that provides operating system functionality for system . The modules further include a dynamic tunnel module  for providing secure RTC communications, and all other functionality disclosed herein. In one example embodiment, dynamic tunnel module  may include TSM server  of . System  can be part of a larger system, such as added functionality to the \u201cAcme Packet \u201d from Oracle Corp. Therefore, system  can include one or more additional functional modules  to include the additional functionality. A database  is coupled to bus  to provide centralized storage for modules  and .","Referring again to , with known systems, when communicating first channel , for signaling traffic via SIP, and second channel , for media traffic, between UE  and servers , these channels may not go through firewalls  because firewalls  are normally filtered to a specific port and transport type and may only pass one type of traffic.","One known solution to communicate both of these channels through firewalls  is to encapsulate both channels within a tunnel with a delivery protocol such as a transmission control protocol (\u201cTCP\u201d). TCP is one of the core protocols of the IP suite and provides reliable, ordered, and error-checked delivery of a stream of octets between programs running on computers connected to an IP network such as local area network, intranet, or the public Internet. Accordingly, a TCP tunnel is stream based. The resulting TCP tunnel that encapsulates the SIP channel (i.e., first channel ) and the media channel (i.e., second channel ) can then traverse a firewall .","One disadvantage with this known approach is that this tunnel runs over TCP which is a stream based protocol and therefore not appropriate for media type of traffic, as media is susceptible to delay and jitter.","In contrast to the known solutions, one embodiment of the present invention dynamically supports two concurrent tunnels: a stream based tunnel  for communicating first channel  for signaling traffic, and a dynamic datagram tunnel (\u201cDDT\u201d)  for communicating second channel  for media traffic. A datagram is a basic transfer unit associated with a packet-switched network. For such datagram, the delivery, arrival time, and order of arrival need not be guaranteed by the network. In this embodiment, stream based tunnel  may use a stream based protocol such as TCP or a Transport Layer Security (\u201cTLS\u201d) protocol, while DDT  may use a protocol appropriate for media such as a User Datagram Protocol (\u201cUDP\u201d) or a Datagram Transport Layer Security (\u201cDTLS\u201d) protocol.","TLS is a cryptographic protocol designed to provide communication security over the Internet. UDP is a protocol that uses a simple connectionless transmission model with a minimum of protocol mechanism. Applications that do not require the reliability of a TCP connection may instead use UDP which emphasizes low-overhead operation and reduced latency rather than error checking and delivery validation. DTLS protocol provides communications privacy for datagram protocols. UDP and DTLS are optimized for real time media transport. On the contrary, TCP and TLS have head of line blocking issues which may be further aggravated by possible extensive packet loss and network latency. However, TCP\/TLS are needed for some VoIP services where signaling (e.g., call invites) must arrive via a TCP channel in order to \u201cwake up\u201d a called party. TCP\/TLS firewall bindings are usually kept open much longer than those of UDP\/DTLS.","In one embodiment, DDT  is provided by dynamically determining whether to use a single stream based (e.g., TCP or TLS based) tunnel or to use both a stream based tunnel and a datagram based (e.g., UDP or DTLS based) tunnel. In one embodiment, a switch may be provisioned (e.g., programmed) at the client (e.g., within TSM client ) so that, while communicating over an existing stream based tunnel , the client may designate a specific real time protocol (\u201cRTP\u201d) channel to run in DDT mode. Accordingly, DDT service is provided by creating on demand datagram tunnels based on client configuration. Upon activation of such switch, TSM client  creates a parallel datagram based tunnel, DDT , which is reliable for media and also minimizes latency. Then, TSM client  moves the designated RTP to DDT , while SIP remains on stream based tunnel . Accordingly, based upon the state of the switch, TSM client  dynamically moves RTP between stream based tunnel  and DDT  to improve voice quality.","In one alternative embodiment, the decision on whether to use only stream based tunnel  or to use both stream based tunnel  and DDT  may be based on the quality of the two tunnels instead of, or in addition to, the status of a switch at the client.","In one embodiment, based on the status of DDT service at TSM client , TSCF  of TSM server  provides configuration to disable\/enable DDT service at TSCF .","In one embodiment, when DDT service is enabled at TSM client , the protocol used to establish DDT  is based on the protocol of the existing stream based tunnel . If DDT service is enabled while stream based tunnel  is TCP based, DDT  will be UDP based running on the same port as stream based tunnel . If DDT is enabled while stream based tunnel  is TLS based, DDT  tunnel will be DTLS based running on the same port as stream based tunnel . In this embodiment, when DDT service is enabled, TSCF  of TSM server  may detect any missing tunnel pairs and warn TSM client .","In one embodiment, DDT service is activated at TSM client  and TSM server  according to the following functionality:\n\n","In one embodiment, in the most common scenario and to guarantee performance, TCP\/TLS tunnels (i.e., stream based tunnel ) are used for sending\/receiving signaling and connection maintenance information, and UDP\/DTLS tunnels (i.e., DDP ) are used for sending\/receiving media (i.e., audio\/video\/fax). In this embodiment, during datagram tunnel reservation, TSM server  reserves a new datagram tunnel (i.e., DDT ) that is configured to provide the same inner IP address as that used by the main stream tunnel (i.e., stream based tunnel ). For example, if 1.1.1.2 is used for a TLS tunnel, 1.1.1.2 will be also used for the matching DTLS tunnel, thereby guaranteeing transparent transition of media traffic from stream based tunnel  to DDT . Accordingly, SIP signaling will use the IP address of TLS tunnel 1.1.1.2 and SDP offer (or answer) will include the same IP address: 1.1.1.2. In this embodiment, TSM server  associates assigned IP addresses with specific tunnels and routes packets via the corresponding tunnels.","In one embodiment, DDT service is one of the assigned services that a TSCF interface can have. If it is present in the corresponding comma separated assigned services list, DDT service will be enabled for the applicable TSCF interface, and if it is absent, DDT service will be disabled. By default, DDT service is disabled.","In one embodiment, TSC client  can request DDT service by sending a client service request message. Upon receiving this request, TSCF  at TSM server  checks if DDT service is enabled for the TSCF interface on which the client service request is received. If DDT service is enabled TSCF  sends a response message indicating success. Otherwise TSCF  sends a response message indicating that DDT service is unavailable.","In one embodiment, DDT service is requested by the client application (i.e., application ) via an API, for example, by setting the appropriate TSM SDK socket option as follows:",{"@attributes":{"id":"p-0032","num":"0039"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\u2003\u2003\u2003tsc_so_tunnel_transport tunnel_tranport ="]},{"entry":[{},"tsc_so_tunnel_transport_datagram_only;"]},{"entry":[{},"int result = tsc_setsockopt(rtp_socket, SOL_SOCKET,"]},{"entry":[{},"SO_TSC_TUNNEL_TRANSPORT,"]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003\u2003(char *)&tunnel_tranport,"]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003\u2003sizeof(tsc_so_tunnel_transport));"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"where:",{"@attributes":{"id":"p-0034","num":"0041"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"typedef enum"]},{"entry":[{},"{"]},{"entry":[{},"\u2003tsc_so_tunnel_transport_default = 0,"]},{"entry":[{},"\u2003tsc_so_tunnel_transport_datagram_preferred,"]},{"entry":[{},"\u2003tsc_so_tunnel_transport_datagram_only,"]},{"entry":[{},"\u2003tsc_so_tunnel_transport_stream_preferred,"]},{"entry":[{},"\u2003tsc_so_tunnel_transport_stream_only,"]},{"entry":[{},"} tsc_so_tunnel_transport;"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"In this embodiment, if tsc_setsockopt returns \u22121, the option has not been set correctly. If it returns 0, it has been set correctly but DDT service will not be officially enabled until the new datagram tunnel (i.e., DDT ) is created. A new notification tsc_notification_ddt can be used to notify TSM client  about DDT enablement. The following pseudo-code illustrates how the notification is enabled and further shows callback:",{"@attributes":{"id":"p-0036","num":"0043"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"\u2003\u2003\u2003\u2003tsc_notification_enable(handle, tsc_notification_ddt,"},{"entry":"\u2003\u2003\u2003\u2003ddt_notification, NULL);"},{"entry":"\u2003\u2003\u2003\u2003void ddt_notification(tsc_notification_data *notification)"},{"entry":"\u2003\u2003\u2003\u2003{"},{"entry":"\u2003\u2003\u2003\u2003\u2003tsc_notification_ddt_info_data *ddt_data ="},{"entry":"(tsc_notification_ddt_info_data *)notification->data;"},{"entry":"\u2003\u2003\u2003\u2003\u2003if (ddt_data && ddt_data->available == tsc_bool_true) {"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003if (ddt_data->enabled == tsc_bool_true) {"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003printf(\u201cddt enabled on socket %d\\n\u201d, ddt_data->socket);"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003} else {"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2003printf(\u201cddt disabled on socket %d\\n\u201d, ddt_data->socket);"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003}"},{"entry":"\u2003\u2003\u2003\u2003\u2003} else {"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003printf(\u201cddt not allowed on socket %d\\n\u201d,"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003ddt_data->socket);"},{"entry":"\u2003\u2003\u2003\u2003\u2003}"},{"entry":"\u2003\u2003\u2003\u2003}"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"The fourth NULL parameter in tsc_notification_enable is an opaque\/private data pointer that can be recovered in the tsc_notification_data structure upon callback.","In one example embodiment, the interface configuration is as follows:",{"@attributes":{"id":"p-0039","num":"0046"},"tables":{"@attributes":{"id":"TABLE-US-00004","num":"00004"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"112pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"tscf-interface",{}]},{"entry":[{},"\u2003\u2003realm-id","\u2002access"]},{"entry":[{},"\u2003\u2003state","enabled"]},{"entry":[{},"\u2003\u2003max-tunnels","\u2002\u2003100"]},{"entry":[{},"\u2003\u2003local-address-pools","\u2002\u2003\u2002lp-1"]},{"entry":[{},"\u2003\u2003assigned-services","\u2002\u2003\u2002SIP, DDT"]},{"entry":[{},"\u2003\u2003tscf-port"]},{"entry":[{},"\u2003\u2003\u2003\u2003address","\u2002\u2003\u2003192.168.27.113"]},{"entry":[{},"\u2003\u2003\u2003\u2003port","\u2002\u20034567"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"84pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"105pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"\u2003\u2003\u2003\u2003transport-protocol","\u2002\u2003\u2003\u2003TCP"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"112pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\u2003\u2003\u2003\u2003tls-profile",{}]},{"entry":[{},"\u2003\u2003\u2003\u2003rekey-profile"]},{"entry":[{},"\u2003\u2003tscf-port"]},{"entry":[{},"\u2003\u2003\u2003\u2003address","\u2002\u2003\u2003192.168.27.113"]},{"entry":[{},"\u2003\u2003\u2003\u2003port","\u2002\u20034567"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"84pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"105pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"\u2003\u2003\u2003\u2003transport-protocol","\u2002\u2003\u2003\u2003UDP"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"112pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\u2003\u2003\u2003\u2003tls-profile",{}]},{"entry":[{},"\u2003\u2003\u2003\u2003rekey-profile"]},{"entry":[{},"\u2003\u2003last-modified-by","\u2002\u2003admin@console"]},{"entry":[{},"\u2003\u2003last-modified-date","\u2002\u2003\u20092011-08-30 11:09:43"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}]}}},"In this example embodiment, the changes to the corresponding Extensible Markup Language (\u201cXML\u201d) file are as follows:",{"@attributes":{"id":"p-0041","num":"0048"},"tables":{"@attributes":{"id":"TABLE-US-00005","num":"00005"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<tscfInterface realmID=\u2018access\u2019"]},{"entry":[{},"\u2003\u2002state=\u2018enabled\u2019"]},{"entry":[{},"\u2003\u2002maxTunnels=\u2018100\u2019"]},{"entry":[{},"\u2003\u2002assignedServices=\u2018SIP, DDT\u2019"]},{"entry":[{},"\u2003\u2002options=\u2018\u2019"]},{"entry":[{},"\u2003\u2002lastModifiedBy=\u2018admin@console\u2019"]},{"entry":[{},"\u2003\u2002lastModifiedDate=\u20182011-08-30 11:09:43\u2019"]},{"entry":[{},"\u2003\u2002objectId=\u201833\u2019>"]},{"entry":[{},"\u2003\u2002<key>access<\/key>"]},{"entry":[{},"\u2003\u2002<localAddressPool name=\u2018lp-1\u2019\/>"]},{"entry":[{},"\u2003\u2002<tscfPort address=\u2018192.168.27.113\u2019"]},{"entry":[{},"\u2003\u2002\u2003\u2003port=\u20184567\u2019"]},{"entry":[{},"\u2003\u2002\u2003\u2003transProtocol=\u2018TCP\u2019"]},{"entry":[{},"\u2003\u2002\u2003\u2003tlsProfile=\u2018\u2019"]},{"entry":[{},"\u2003\u2002\u2003\u2003rekeyProfile=\u2018\u2019"]},{"entry":[{},"\u2003\u2002<tscfPort address=\u2018192.168.27.113\u2019"]},{"entry":[{},"\u2003\u2002\u2003\u2003port=\u20184567\u2019"]},{"entry":[{},"\u2003\u2002\u2003\u2003transProtocol=\u2018UDP\u2019"]},{"entry":[{},"\u2003\u2002\u2003\u2003tlsProfile=\u2018\u2019"]},{"entry":[{},"\u2003\u2002\u2003\u2003rekeyProfile=\u2018\u2019"]},{"entry":[{},"\u2002<\/tscfInterface>"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"In one embodiment, the assigned services parameter is real-time reconfigurable. However, new values are only applied to newly established tunnels.","In one embodiment, messages exchanged between clients are logged by TSM SDK  in their corresponding client logs. In this embodiment, control messages forwarded by the session director are logged in a corresponding data log.",{"@attributes":{"id":"p-0044","num":"0051"},"figref":["FIG. 3","FIG. 2","FIG. 3"],"b":"16"},"At , TSM server  establishes stream based tunnel  with the TSM client . For example, a TSM library at application  creates stream based tunnel  and once a SIP call is established on stream based tunnel  and RTP is negotiated by SDP information exchange, an RTP media socket is created on stream based tunnel .","At , TSM server  establishes RTC via stream based tunnel  with TSM client , where the RTC includes communicating first channel  for signaling traffic and second channel  for media traffic.","At , TSM server determines whether to establish DDT  for communicating media traffic, for example, based on a message received from TSM client  and\/or dynamically based on the quality of stream based tunnel  and DDT . For example, to induce DDT  on RTP media socket, it is marked to run on a new separate datagram tunnel. When a binding function is executed on the RTP media socket and since it resides on stream based tunnel , the CSM at TSM client  sends a TSCF service request to TSM server  to initiate DDT services.","At , TSM server  establishes DDT  with the TSM client . For example, when TSM server  receives the TSCF service request, it reserves DDT  which is UDP or DTLS based if stream based tunnel  is TCP or TLS based, respectively. TSM server  sends a service response back to TSM client  indicating the TSCF TID of DDT . CSM then negotiates DDT  by sending a configuration request and processing the corresponding response. At this point, CSM moves RTP media socket from stream based tunnel  to DDT . While DDT  is being negotiated and until RTP media socket is moved from stream based tunnel  to DDT , all traffic sent\/received by RTP media socket is on stream based tunnel .","At , TSM server  communicates second channel  via DDT  while maintaining first channel  on stream based tunnel .","As disclosed, embodiments use on-demand datagram tunnels in parallel with stream based tunnels for providing real time communication. This gives the end user the possibility of having secure real time communication that also meets real time application quality requirements.","Several embodiments are specifically illustrated and\/or described herein. However, it will be appreciated that modifications and variations of the disclosed embodiments are covered by the above teachings and within the purview of the appended claims without departing from the spirit and intended scope of the invention."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0005","num":"0004"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0006","num":"0005"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0007","num":"0006"},"figref":["FIG. 3","FIG. 2"]}]},"DETDESC":[{},{}]}
