---
title: Method for synchronizing a multimedia file
abstract: The invention concerns a method for synchronizing data in a multimedia document (), said document comprising at least two separate computer files (track track) called the first file, the second file, etc., in which method: there is stored in the first file, in the second file, etc., respectively data of a first type, of a second type, etc., said data being grouped in the form of at least one event-related command characterizing an event, said event being either important or unimportant,â€”at least one synchronization command is inserted in each file, characterized in that said synchronization command is inserted before each event-related command characterizing an important event.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07386782&OS=07386782&RS=07386782
owner: Alcatel
number: 07386782
owner_city: Paris
owner_country: FR
publication_date: 20010913
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"p":["The present invention relates to a method of synchronizing different types of data in a multimedia file. It applies, for example, to portable systems such as mobile radio terminals, pocket computers or any other equipment that can have multimedia capabilities and for which the size of multimedia files and the computation power needed to process them constitute a problem.","There are very many monomedia files, i.e. files relating to only one particular type of data, such as the JPEG (Joint Photographic Expert Group) format for storing pictures or the RTF (Rich Text File) format for storing text.","The expression \u201cmultimedia file\u201d generally refers to integrating different types of data (such as pictures, sound and text) in the same file. Each type of data is contained in a given track. Each track is organized in the form of a series of commands. Each track is scanned by a microprocessor. Each microprocessor executes, at the same time as the others, commands from one track or simultaneous commands from more than one track and can present the data, via different interfaces, to a user of an equipment with multimedia capabilities. The interfaces can be a screen for text and picture data and a loudspeaker for audio data. The user therefore sees text and pictures whilst hearing sounds.","The problem is therefore to match the text to the music and the pictures, i.e. to synchronize the different types of data contained in the same multimedia file.","Each microprocessor, associated with each track containing one type of data uses an oscillator. Each oscillator produces a signal with a frequency slightly different from those of the other oscillators. Also, the software executed by each processor can be based on different operating systems, which drift with time in dissimilar ways. Thus two microprocessors that begin to read their respective tracks at the same time are eventually no longer synchronized with each other. For example, if the microprocessor for the sound data track is lagging behind the microprocessor for the text data track, the text of a phrase will be displayed before the sung phrase is heard.","The prior art solution is temporal synchronization.","In the  example, the microprocessor \u03bcp, which reads the track  containing sound, sends synchronization data every 3 \u03bcs to the microprocessor \u03bcp, which reads the track  containing text. The synchronization data can optionally be stored in the multimedia file.","Thus the microprocessor \u03bcpverifies every 3 \u03bcs whether its clock is synchronized to that of the first microprocessor \u03bcp. If the microprocessor \u03bcpfinds that it is in advance of the other one, it calculates the time difference and stops reading track  for that period of time. It then restarts in synchronism with the microprocessor \u03bcp. It is apparent that the better the synchronization required, the greater the quantity of synchronization data that has to be sent and the more frequently it has to be sent.","In mobile terminals there are severe file size constraints. The available memory is limited for reasons of overall size and battery life. What is more, multimedia files must be downloadable from a server center in a reasonable time, which is directly dependent on the file size.","Storing recurrent synchronization data is costly in terms of memory: the flow of data exchanged is burdened with many exchanges of synchronization data, which overloads the memory.","The above solution also has a further and major disadvantage: the synchronization data can reach the microprocessor \u03bcpwhile it is in the middle of displaying a phrase. The display of the phrase is then stopped short, and the user does not receive the impression of fluid presentation of data.","The object of the present invention is to reduce the size of multimedia files, to optimize the quantity of data exchanged, and to provide optimum synchronization.","To this end, the invention provides a method of synchronizing data in a multimedia document () comprising at least two separate data files (track, track) referred to as the first file, the second file, etc., in which method:\n\n","The method is advantageously characterized in that the important event corresponds to a command to display a text, a command to display a picture, or a command to reproduce a sound.","The invention also provides a device for synchronizing data in a multimedia file containing at least one track in which said data is stored and at least one synchronization command in each track, said device having first means for reading the data of each track and second means enabling the first means to communicate with each other, the data communicated between said first means concerning the occurrence of a synchronization command. The device is characterized in that one of the first data reading means is designated as having the highest priority and forces the other first means to synchronize with it.","The data in a multimedia file according to the invention can comprise either time values or sound, text or picture coding values. The time values can represent a note duration, an image display time, a track start or end time, or a waiting time between two events. According to the invention, the tracks of the multimedia file also include synchronization commands related to the various events included in the track (note, picture, text, etc.).",{"@attributes":{"id":"p-0022","num":"0023"},"figref":"FIG. 2"},"The multimedia file  includes a header  and tracks ,  and . According to the invention, a multimedia file can include a number of tracks from 1 to n and  merely represents one example of this kind of file.","The header  includes data that is common to all of the tracks and is not described in detail here.","Each track of the file  can contain a single type of data. For example, track  can be a MIDI (Musical Instrument Digital Interface) format track for sound, track  can contain a sequence of pictures, and track  can contain sequences of texts. The different tracks may be intended to be scanned by microprocessors and presented simultaneously to a user. The different microprocessors therefore scan the tracks at the same time.","Each track ,  and  has a respective header ,  and . Each header contains an indicator of the type of data contained in the track. Thus the microprocessor able to read MIDI data knows from this indicator which track to read.","Each track also contains data organized in the form of commands which are executed sequentially by the microprocessor (for example to display a picture or a text).",{"@attributes":{"id":"p-0028","num":"0029"},"figref":"FIG. 3"},"In this example:\n\n","Each track has a Start field for starting presentation to the user and an End field for ending presentation to the user.","Track  contains data relating to sound. A first field Nfrepresents the frequency of a first note and a second field Ndrepresents its duration. Likewise, the fields Nhand Nddefine a second note. The field Drepresents a waiting time before presenting the subsequent notes of the track.","The fields Nhand Ndrespectively represent the frequency and the duration of a third note.","Thus fields defining a note or a waiting time can follow on from each other in track .","Track  contains data corresponding to sequences of JPEG images. In this example, two JPEG images represented by the fields JPEG and JPEG must be presented to the user for a given time represented by the field JPEGdfor the image JPEG and the field JPEGdfor the image JPEG. The fields JPEGD, JPEGDand JPEGDrepresent waiting times before or between images.","Track  contains data corresponding to text messages. In this example two syllables represented by the fields TEXT and TEXT must be presented to the user. The fields TEXTDand TEXTDrepresent waiting times before a text.","The synchronization commands are represented by fields SYNCHi for i from 1 to n.","The synchronization commands are not temporal commands, as in the prior art, but are instead dependent on a specific event. Thus the fields SYNCHi are not present in the tracks at regular time intervals.","In the  example, musical notes included in the track  data must not be interrupted. Synchronizing the three tracks must not entail interrupting the music heard by the user. The microprocessor dedicated to reading this track is considered to be the master.","It forces the other microprocessors in charge of the other tracks, referred to as slaves, to synchronize with it.","Some notes must correspond to the display of an image or a syllable.","In this example, the first fields NFand Ndcorrespond to a first note. The second note, corresponding to the second fields NFand Nd, must be heard at the moment the first picture is displayed, corresponding to the field JPEG of track . Then, after a waiting time corresponding to the field D, the third note, corresponding to the third fields Nfand Nd, must be heard at the moment that the first syllable is displayed, corresponding to the field TEXT of track . Finally, the fourth note, corresponding to the fourth fields Nfand Nd, must be heard at the moment at which are simultaneously displayed the second picture, corresponding to the field JPEG in track , and the second syllable, corresponding to the field TEXT in track .","Thus the first synchronization command, which corresponds to the field SYNCH, is:\n\n","The second synchronization command, which corresponds to the field SYNCH, is:\n\n","The third synchronization command, which corresponds to the field SYNCH, is:\n\n","When the multimedia document is presented to the user, the microprocessors scan all the tracks at the same time. Two situations arise, according to whether the slave microprocessors are lagging behind or in advance of the master microprocessor. Each slave microprocessor can receive data concerning the synchronization commands from the master microprocessor.","The master microprocessor, which is dedicated to track , reaches the first synchronization command, corresponding to the field SYNCH, and sends first synchronization data to the other microprocessors.","Two situations arise:\n\n","Thus each important command, i.e. a command whose execution must not be interrupted, is represented by a given field preceded by a field representing a synchronization command. The synchronization command is at the same place in all the other tracks. Because of this, different tracks are resynchronized before any important command, if necessary.","Thus the invention synchronizes data in a multimedia file without overloading the memory with unnecessary synchronization data, and thereby restricting transfers of synchronization data between the microprocessors, without overloading the tracks with large quantities of unnecessary synchronization data, and most importantly without the execution of an important command stopping in the middle."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"p":["The invention and its advantages will become clearer in the course of the following description with reference to the accompanying drawings.",{"@attributes":{"id":"p-0018","num":"0019"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0019","num":"0020"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0020","num":"0021"},"figref":"FIG. 3"}]},"DETDESC":[{},{}]}
