---
title: Backup and recovery of systems by restoring a backup boot configuration data (BCD) with installation files from an operating system install disk
abstract: Various embodiments includes at least one of systems, methods, and software for backup and recovery of systems including boot configuration data in an extension firmware interface partition. Generating a backup, in some embodiments, includes copying Boot Configuration Data (BCD) from a registry of an operating system executing on a computer into a file and storing the file. These and other embodiments may include a system restore process that consumes this file. Such a process may operate to identify an Extension Firmware Interface (EFI) hard disk partition on a hard disk of a system to be restored, temporarily assign a drive letter to the identified EFI hard disk partition, and copy files common amongst all installations an operating system to be restored on the system along with BCD data from the BCD file to the EFI hard disk partition according to the assigned drive letter. The system may then be rebooted.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08788801&OS=08788801&RS=08788801
owner: CA, Inc.
number: 08788801
owner_city: Islandia
owner_country: US
publication_date: 20090818
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND INFORMATION","SUMMARY","DETAILED DESCRIPTION"],"p":["Backing up Microsoft\u00ae Windows\u00ae Server\u00ae 2008 systems presents complex issues. Portions of the Microsoft\u00ae Windows\u00ae Server\u00ae 2008 operating system are held in hard disk partitions that are not accessible while the operating system is running. Thus, conventional backup techniques are insufficient to create system images from which a bare-metal recovery may be performed.","Various embodiments include at least one of systems, methods, and software for backup and recovery of systems including boot configuration data in an extension firmware interface partition. Generating a backup, in some embodiments, includes copying Boot Configuration Data (BCD) from a registry of an operating system executing on a computer into a file and storing the file. These and other embodiments may include a system restore process that consumes this file. Such a process may operate to identify an Extension Firmware Interface (EFI) hard disk partition on a hard disk of a system to be restored, temporarily assign a drive letter to the identified EFI hard disk partition, and copy files common amongst all installations an operating system to be restored on the system along with BCD data from the BCD file to the EFI hard disk partition according to the assigned drive letter. The system may then be rebooted.","The Microsoft\u00ae Windows\u00ae Server\u00ae 2008 operating system that executes on the Intel\u00ae Itanium\u00ae Architecture 64-Bit (IA64) platforms includes an Extension Firmware Interface (EFI) partition on a hard drive that is hidden from the normal operating system environment and cannot be accessed once the operating system is started. Because it is hidden, backup software is typically unable to detect its presence and backup its contents. To back up this partition, backup software performs special operations to connect to this partition and copy the data. During recovery, special operations are also required to restore the data back. The whole procedure of creating a backup image and restoring that image in a bare-metal recovery process is quite complex.","At the same time, data stored in the EFI partition is critical during boot of the Microsoft\u00ae Windows\u00ae Server\u00ae 2008 operating system. Without protecting the partition, bare-metal disaster recovery for an IA64 Microsoft\u00ae Windows\u00ae Server\u00ae 2008 operating system cannot be achieved.","The EFI partition includes data defining a software interface between the Microsoft\u00ae Windows\u00ae Server\u00ae 2008 operating system and platform firmware. The EFI includes data tables that contain platform information and boot and runtime services that are available to the Microsoft\u00ae Windows\u00ae Server\u00ae 2008 operating system loader and the operating system. In a bare-metal recovery process, most of the contents of the EFI partition are consistent across Microsoft\u00ae Windows\u00ae Server\u00ae 2008 operating system installations. These consistent contents can be obtained in the Microsoft\u00ae Windows\u00ae Server\u00ae 2008 operating system recovery environment, such as by copying the content from a Microsoft\u00ae Windows\u00ae Server\u00ae 2008 operating system installation optical disk, hard disk, or other medium from which the Microsoft\u00ae Windows\u00ae Server 2008 operating system may be installed or recovered. However, a file or files referred to as Boot Configuration Data file (BCD), which is held in the EFI partition includes data that can differ between Microsoft\u00ae Windows\u00ae Server\u00ae 2008 operating system installations. Thus, to perform a complete bare-metal disaster recovery of a Microsoft\u00ae Windows\u00ae Server\u00ae 2008 operating system on an IA64 platform, data of the BCD is obtained from the particular system to be backed up.","The BCD includes at least one file that provides a store that is used to describe boot applications and boot application settings. While the Microsoft\u00ae Windows\u00ae Server\u00ae 2008 operating system is running, a command-line tool BCDEdit is used to export the content of the BCD into a file. However, in some embodiments, the file may be created via calls to an Application Programming Interface to obtain the BCD. This file is usually less than 100 kilobytes and does not impose overhead in terms of time, storage space, or complexity for backup and recovery. The BCD file, once created, can be used later to restore the state of the system. However, if the BCD file exported though the BCDEdit tool is copied to a newly formatted EFI partition on a target recovery system, the target recovery system cannot boot. Thus, the following describes methods and mechanisms that may be implemented to successfully backup and restore Microsoft\u00ae Windows\u00ae Server 2008 operating system machines in bare-metal disaster recovery scenarios.","A bare-metal disaster recovery is a process for recovery and restoration where backed up data is available in a form to allow restoration of a computer system without any requirements as to previously installed software or operating systems. The backed up data typically includes operating system, application, and data components to rebuild or restore a computer to a state at a time when the backed up data was copied. Thus, the term \u201cbare-metal\u201d as commonly used refers to computer system hardware as the \u201cmetal\u201d and \u201cbare\u201d meaning that there is no software or data on the computer or that the data and software on the computer is of no concern in the recovery process.",{"@attributes":{"id":"p-0015","num":"0014"},"figref":["FIG. 1","FIG. 1"]},"An object-oriented architecture may be used to implement such functions and communicate between the multiple systems and components. One example-computing device in the form of a computer , may include at least one processing unit , memory , removable storage , and non-removable storage . Memory  may include volatile memory  and non-volatile memory . Computer  may include\u2014or have access to a computing environment that includes\u2014a variety of computer-readable storage mediums, such as volatile memory  and non-volatile memory , removable storage , and non-removable storage . Computer storage includes random access memory (RAM), read only memory (ROM), erasable programmable read-only memory (EPROM) & electrically erasable programmable read-only memory (EEPROM), flash memory or other memory technologies, compact disc read-only memory (CD ROM), Digital Versatile Disks (DVD) or other optical disk storage, magnetic cassettes, magnetic tape, magnetic disk storage or other magnetic storage devices, or any other medium capable of storing computer-readable instructions. The computer storage may also include a hard disk, also referred to as a hard drive, that may be partitioned. The partitions may include an EFI partition that stores the BCD. Computer  may include or have access to a computing environment that includes input , output , and a communication connection . The computer may operate in a networked environment using a communication connection to connect to one or more remote computers, such as database servers and application servers. The remote computer may include a personal computer (PC), server, router, network PC, a peer device or other common network node, or the like. The communication connection may include a connection via a network interface device to one or more of a Local Area Network (LAN), a Wide Area Network (WAN), the Internet, and other networks.","Computer-readable instructions stored on a computer-readable storage medium are executable by the at least one processing unit  of the computer . A hard drive, CD-ROM, and RAM are some examples of articles including a computer-readable storage medium. For example, a computer program  may be stored on one or more computer-readable storage mediums. The computer program may include instructions executable by the at least one processing unit  to perform one or more of the methods and provide the functionality as described herein. The computer program  may also include an operating system, such as a Microsoft\u00ae Windows\u00ae operating system. The Microsoft\u00ae Windows\u00ae operating system can be the Microsoft\u00ae Windows\u00ae Server\u00ae 2008 operating system, the Microsoft\u00ae Windows\u00ae Vista\u00ae operating system, or other operating system that includes a similar architecture.",{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 2","b":["200","204","206","206","204","200","200","206","202","204","206","204","204","204","204","200"]},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 3","b":["300","300","300","302"]},"Once the proper BCD is identified and opened in the registry, the method  includes copying and saving  the registry hive to a file and copying the file to a storage medium. This file including the BCD may be stored to a hard disk, an optical medium such as a DVD or CD, or other medium. In some instances, the file including the BCD is stored on a medium with other disaster recovery data copied from the computer that the method  is executing against. The other disaster recovery data may include files and data of applications installed on the computer and as generated by a user or is otherwise stored on the computer. The backup of the method  then ends.",{"@attributes":{"id":"p-0021","num":"0020"},"figref":["FIG. 4","FIG. 3"],"b":["400","400","300","402","404"]},"The method  continues by using a disk utility, such as DISKPART, to set  a drive letter for the EFI partition to make the EFI partition accessible by processes other than pre-boot and boot processes. Data and files in the EFI that are common amongst all installations of the operating system being restored on the computer are copied  to the EFI drive. This data and these files may be copied from an operating system setup disk, a backup image of the computer being restored, from within a recovery or preinstallation environment of the operating system, or other location where the data and files may be stored. One other location may be a network location accessible over a network via a network interface device of the computer being restored. Further, the BCD file, or at least the BCD data from the BCD file, is copied  to the EFI drive, such as may be created according to the method  of . Further data may also be copied to the computer being restored, such as application files, data, configuration data, user data, and other data that may have been stored on the computer at a time when a backup image was generated. The method  then ends  and the computer may be rebooted to complete the recovery process. In some embodiments, the drive letter is set  for the EFI partition in a manner whereby the drive letter is temporary and disappears when the computer is rebooted. However, in other embodiments, the method  further includes unassigning the drive letter of the EFI partition.",{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 5","b":["500","500","500","502","504"]},{"@attributes":{"id":"p-0024","num":"0023"},"figref":["FIG. 6","FIG. 3","FIG. 5","FIG. 3","FIG. 5"],"b":["600","600","300","500","600","602","604","600","606","608","300","500","600","610"]},"Another embodiment is in the form of a system. The system includes at least one processor, at least one memory device, at least one hard disk, a video output device, and at least one input device interconnected via at least one integrated circuit board. The system also includes a system restore application stored on a computer-readable medium readable by a data reading device of the system, the application including instructions executable by the at least one processor. The instructions that are executable by the processor may include instructions to perform one or more of the methods described above to backup portions of computers, such as for bare-metal recovery, including BCD held in an EFI.","Numerous specific details are set forth herein to provide a thorough understanding of claimed subject matter. However, it will be understood by those skilled in the art that claimed subject matter may be practiced without these specific details. In other instances, methods, apparatuses, or systems that would be known by one of ordinary skill have not been described in detail so as not to obscure claimed subject matter. Some portions of the description are presented in terms of algorithms or symbolic representations of operations on data bits or binary digital signals stored within a computing system memory, such as a computer memory. These algorithmic descriptions or representations are examples of techniques used by those of ordinary skill in the data processing arts to convey the substance of their work to others skilled in the art. An algorithm is here, and generally, considered a self-consistent sequence of operations or similar processing leading to a desired result. In this context, operations or processing involve physical manipulation of physical quantities. Typically, although not necessarily, such quantities may take the form of electrical or magnetic signals capable of being stored, transferred, combined, compared or otherwise manipulated. It has proven convenient at times, principally for reasons of common usage, to refer to such signals as bits, data, values, elements, symbols, characters, terms, numbers, numerals or the like. It should be understood, however, that all of these and similar terms are to be associated with appropriate physical quantities and are merely convenient labels. Unless specifically stated otherwise, it is appreciated that throughout this description, discussions utilizing terms such as \u201cprocessing,\u201d \u201ccomputing,\u201d \u201ccalculating,\u201d \u201cdetermining\u201d or the like refer to actions or processes of a computing platform, such as a computer or a similar electronic computing device, that manipulates or transforms data represented as physical electronic or magnetic quantities within memories, registers, or other information storage devices, transmission devices, or display devices of the computing platform.","Thus, the functions or algorithms described herein are implemented in hardware, software, or a combination of software and hardware in one embodiment. The software comprises computer executable instructions stored on computer-readable media such as memory or other type of storage devices. Further, described functions, methods, and elements thereof may correspond to modules, which may be software, hardware, firmware, or any combination thereof. Multiple functions are performed in one or more modules as desired, and the embodiments described are merely examples. For example, the methods , , , and  of , , , and , respectively, may include one or more modules that operate in conjunction with one another to implement one or more of these methods in a system.","The software, which may be in the form of a software module, is executed on a digital signal processor, application specific integrated circuit (ASIC), microprocessor, or other type of processor operating on a system, such as a personal computer, server, a router, or other device capable of processing data including network interconnection devices. Some embodiments implement the functions in two or more specific interconnected hardware modules or devices with related control and data signals communicated between and through the modules, or as portions of an application-specific integrated circuit. Thus, the exemplary process flow is applicable to software, firmware, and hardware implementations.","In the foregoing Detailed Description, various features are grouped together in a single embodiment to streamline the disclosure. This method of disclosure is not to be interpreted as reflecting an intention that the claimed embodiments of the inventive subject matter require more features than are expressly recited in each claim. Rather, as the following claims reflect, inventive subject matter lies in less than all features of a single disclosed embodiment. Thus, the following claims are hereby incorporated into the Detailed Description, with each claim standing on its own as a separate embodiment."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0004","num":"0003"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0005","num":"0004"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0006","num":"0005"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0007","num":"0006"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0008","num":"0007"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 6"}]},"DETDESC":[{},{}]}
