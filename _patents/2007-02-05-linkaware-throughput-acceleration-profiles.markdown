---
title: Link-aware throughput acceleration profiles
abstract: An arrangement is provided for exposing TCP/IP profiles to a client application operating in a mobile computing environment where each profile comprises a set of TCP/IP configuration parameters that are mapped to a specific network type. An application programming interface (“API”) enables the client application to propagate configuration parameters in a selected TCP/IP profile to a TCP/IP layer in a communication protocol stack that resides on a mobile device. The TCP/IP configuration parameters are applied to data communications with a remote terminal over a network that is comprised of several links and which typically includes a wireless link.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09219670&OS=09219670&RS=09219670
owner: MICROSOFT TECHNOLOGY LICENSING, LLC
number: 09219670
owner_city: Redmond
owner_country: US
publication_date: 20070205
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND","SUMMARY","DETAILED DESCRIPTION"],"p":["Wireless networks, such as GPRS\/EDGE (General Packet Radio Services\/Enhanced Data rates for GSM Evolution), supporting mobile devices typically use a radio link that provides a reliable delivery mechanism for data packets. Such reliable delivery is provided even in the presence of impairments that may occur, for example, as a result of handoffs across base stations or when a mobile device is moved through a tunnel. The GPRS\/EDGE radio link ensures the integrity of received data through the implementation of two reliable modes of operation: RLC (radio link control) acknowledged and LLC (logical link control) acknowledged mode operations. The RLC acknowledged mode is typically used by default to ensure that the data received by\/from the mobile device is without error. LLC acknowledged mode is typically an optionally utilized feature. This protocol ensures that all LLC frames are received without error by verifying a checksum for each LLC frame. In case the checksum fails, the frame is discarded. Unacknowledged packets are then retransmitted and correct receipt of all LLC frames must be acknowledged. Due to impairments, RLC segments retransmission is expected which can propagate into delays in assembly of the LLC frames and IP (Internet Protocol) segments.","At a receiving terminal device, TCP\/IP (Transport Control Protocol\/internet Protocol) layer in a communication protocol stack disposed in the terminal requires that all RLC frames in an LLC frame, and all LLC frames, be received for assembling an IP segment before sending an acknowledgement to the mobile device. As a result of this flow control managed at the TCP\/IP layers, it is possible for assembly delay of an IP segment at the lower RLC\/LLC layers to cause TCP\/IP to back off on the transmission data rate and attempt retransmission of packets it believes have been lost. Such slow down of transmission can eventually lead to significant end-to-end network performance degradation.","This Background is provided to introduce a brief context for the Summary and Detailed Description that follow. This Background is not intended to be an aid in determining the scope of the claimed subject matter nor to be viewed as limiting the claimed subject matter to implementations that solve any or all of the disadvantages or problems presented above.","An arrangement is provided for exposing TCP\/IP profiles to a client application operating in a mobile computing environment where each profile comprises a set of TCP\/IP configuration parameters that are mapped to a specific network type. An application programming interface (\u201cAPI\u201d) enables the client application to propagate configuration parameters in a selected TCP\/IP profile to a TCP\/IP layer in a communication protocol stack that resides on a mobile device. The TCP\/IP configuration parameters are applied to data communications with a remote terminal over a network that is comprised of several links, and which typically include a wireless link.","In various illustrative examples, the TCP\/IP configuration parameters include values for connection timeout, send timeout, and receive timeout. The timeout values are each configured to at least be greater than the average propagation delay in the wireless link which reduces the TCP\/IP connection handshake and retransmission overheads. Data throughput is substantially accelerated using the present TCP\/IP profiles. In addition, client applications may be arranged with link-awareness to thereby enhance data transmission performance through the application of a TCP\/IP profile to the TCP\/IP layer exposed by the API. A client application may switch network connections and apply a new TCP\/IP profile to enhance the performance of the new connection. Client applications include, for example, small footprint databases which run on a mobile device host that occasionally need to synchronize with a remote terminal to send and receive updates or changes, or replicate a copy of a remote database on the mobile device.","This Summary is provided to introduce a selection of concepts in a simplified form that are further described below in the Detailed Description. This Summary is not intended to identify key features or essential features of the claimed subject matter, nor is it intended to be used as an aid in determining the scope of the claimed subject matter.","TCP\/IP is one of the most widely used transport protocols for non-real-time Internet applications like web-browsing, file transfer and email. It provides a connection-oriented end-to-end service ensuring reliable data transfer. TCP\/IP implements flow control in the Internet to avoid congestion. This is achieved by various mechanisms, including slow start and congestion avoidance, that work to achieve as high a data throughput rate as possible, but which then back off as soon as congestion occurs.","One application that has influenced protocol refinements is the World Wide Web on the Internet, which uses HTTP (Hypertext Transfer Protocol) running over TCP\/IP. The wide use of the Web and Internet has emphasized the need to enhance HTTP performance. Persistent-connection support, recently standardized in HTTP\/1.1, allows HTTP to re-use a single TCP\/IP connection across multiple transactions to the same terminal device or server.","The radio link used in wireless mobile data environments suffers from time-varying characteristics, shadowing, interference and relatively high bit error rates which can lead to packet loss and delays resulting in TCP\/IP timeouts. However, the root cause for the loss and delays is not network congestion but rather impairments on the radio link itself. Accordingly, the interaction between the protocol layers supporting wireless mobile data transmission, for example those used in a GPRS network, can negatively interact with the TCP\/IP layer which supports data communication over the Internet portion of a network.","Turning now to the drawings where like reference numerals indicate like elements,  is a first illustrative network topology  for a wireless mobile data network environment showing a mobile host device , a network  comprising multiple links, and a remote terminal . The mobile host device  is representative of the portable electronic devices currently available that support wireless data connectivity. Accordingly mobile host device  may be selected from one of mobile phone, PDA (personal digital assistant), smart phone, personal computer (\u201cPC\u201d), pocket PC, laptop computer, tablet PC, portable media player, game console, or portable game device, as required by a specific application of link-aware throughput acceleration profiles.","Network  is utilized to provide end-to-end connectivity between mobile host device  and the remote terminal . In this illustrative example, remote terminal  is a server that is arranged to host a database. Network  typically comprises several links. As shown in , network  includes a wireless mobile data network link  and an Internet network link . Mobile host device  communicates wirelessly with the mobile data network link  through a base station  as indicated by arrow .","Wireless mobile data network  is arranged using one of a variety of alternative wireless network protocols including, for example, GPRS, EDGE, HSDPA (High-Speed Downlink Packet Access), or UMTS (Universal Mobile Telecommunications System). In other alternative arrangements, a wireless networking protocol conforming to the Institute of Electrical and Electronics Engineers IEEE 802.11 (also known as \u201cWi-Fi\u201d) or wireless Ethernet is usable. Traditional wired networking protocols including dial-up networking over telephone lines and wired Ethernet may also be used in some applications of link-aware throughput acceleration profiles.",{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 2","b":["202","110","219","219","110","142","219","225","219","110","231","219","110"]},{"@attributes":{"id":"p-0020","num":"0019"},"figref":["FIG. 3","FIGS. 1 and 2"],"b":["302","110","302","110","304","302","304","306","309","312","314","316"]},"A number of client applications are typically hosted by host mobile device  including, for example, communication applications to support voice and data communications, email applications, web-browsers, etc. A small footprint database is also supported by the host mobile device  that is designed to work in a mobile environment where resources are typically limited.","An application programming interface  (\u201cAPI\u201d) is arranged as an intermediary between the applications  and the TCP layer A and IP layer B (collectively referred to as TCP\/IP layer ). The API  exposes TCP\/IP parameters to the applications . The TCP\/IP parameters are applied by the TCP\/IP layer  to manage a communication session between the mobile host device  and remote terminal  over network  (). In this illustrative example, the TCP\/IP parameters include timeouts including a connect timeout, a send timeout, and a receive timeout.","The connect timeout value is set or retrieved (for example from a library of stored parameter values) when an application  invokes a method INTERNET_OPTION_CONNECT_TIMEOUT which sets or retrieves an unsigned long integer value that contains the timeout value (in milliseconds) for Internet connection requests. If the connection request takes longer than this timeout value, the request is canceled. When attempting to connect to multiple IP addresses for a single host (referred to as a \u201cmultihomed\u201d host that has more than one connection to a network), the timeout limit is cumulative for all of the IP addresses.","The send timeout value is set or retrieved when an application  invokes a method INTERNET_OPTION_SEND_TIMEOUT (or alternatively, INTERNET_OPTION_DATA_SEND_TIMEOUT or INTERNET_OPTION_CONTROL_SEND_TIMEOUT) which sets or retrieves an unsigned long integer value, in milliseconds, that contains the timeout value to send a request. If the send takes longer than this timeout value, the send is canceled.","The receive timeout value is set or retrieved when an application  invokes a method INTERNET_OPTION_RECEIVE_TIMEOUT (or alternatively, INTERNET_OPTION_DATA_RECEIVE_TIMEOUT or INTERNET_OPTION_CONTROL_RECEIVE_TIMEOUT) which sets or retrieves an unsigned long integer value that contains the timeout value, in milliseconds, to receive a response to a request. If the response takes longer than this timeout value, the request is canceled.","Table 1 below provides three sets of exemplary timeout values for both an HTTP connection retry timeout and the TCP\/IP parameters discussed above. Each set of timeout values is mapped to a specific network type including high, medium, and low bandwidth networks (for which examples are given for each type). The values provided in Table 1 have been empirically shown to accelerate data throughput over mobile wireless data networks by as much as 25-35%. The values are generally selected to ensure that the timeouts exceed the average propagation latency for transmission over a wireless network link. However, it is emphasized that the specific values selected may be subject to some variability due to conditions and impairments found in a specific link or network. Accordingly, an actual optimum value for a particular application of link-aware acceleration profiles may lie within a range (e.g., \u00b110%) of the nominal values shown in Table 1.",{"@attributes":{"id":"p-0027","num":"0026"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"140pt","align":"center"}}],"thead":{"row":[{"entry":"TABLE 1"},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":["Network Type","Timeout Values"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"91pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"28pt","align":"right"}},{"@attributes":{"colname":"4","colwidth":"21pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["High Bandwidth ","HTTP connection retry timeout","30","s"]},{"entry":["Networks (e.g.,","TCP\/IP connect timeout","3000","ms"]},{"entry":["Ethernet and USB)","TCP\/IP send timeout","1000","ms"]},{"entry":[{},"TCP\/IP receive timeout","1000","ms"]},{"entry":["Medium Bandwidth ","HTTP connection retry timeout","60","s"]},{"entry":["Networks (e.g.,","TCP\/IP connect timeout","6000","ms"]},{"entry":["IEEE 802.11 wireless)","TCP\/IP send timeout","3000","ms"]},{"entry":[{},"TCP\/IP receive timeout","3000","ms"]},{"entry":["Low Bandwidth ","HTTP connection retry timeout","120","s"]},{"entry":["Networks (e.g., mobile","TCP\/IP connect timeout","12000","ms"]},{"entry":["data networks and","TCP\/IP send timeout","6000","ms"]},{"entry":["dial-up) ","TCP\/IP receive timeout","6000","ms"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0028","num":"0027"},"figref":["FIG. 4","FIG. 4"],"b":"400"},{"@attributes":{"id":"p-0029","num":"0028"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"63pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"98pt","align":"center"}}],"thead":{"row":[{"entry":"TABLE 2"},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}},{"entry":["Curve No.","Send Timeout Value","Receive Timeout Value"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"char","char":"."}},{"@attributes":{"colname":"2","colwidth":"63pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"98pt","align":"center"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["1","None","None"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"5"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"char","char":"."}},{"@attributes":{"colname":"2","colwidth":"35pt","align":"right"}},{"@attributes":{"colname":"3","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"56pt","align":"right"}},{"@attributes":{"colname":"5","colwidth":"42pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["2","2","s","2","s"]},{"entry":["3","3","s","3","s"]},{"entry":["4","4","s","4","s"]},{"entry":["5","5","s","5","s"]},{"entry":["6","7","s","7","s"]},{"entry":["7","10","s","10","s"]},{"entry":["8","20","s","20","s"]},{"entry":["9","50","s","50","s"]},{"entry":["10","100","s","100","s"]},{"entry":["11","360","s","360","s"]},{"entry":["12","400","ms","400","ms"]},{"entry":["13","700","ms","700","ms"]},{"entry":["14","1","s","1","s"]},{"entry":{"@attributes":{"namest":"1","nameend":"5","align":"center","rowsep":"1"}}}]}}]}}},"As shown in , the fourteen curves fall essentially into two groups: curves - are positioned noticeably above curves , , and . Curve  is specifically indicated in  as being positioned somewhat between the upper curves and the remaining curves  and  in the lower group.",{"@attributes":{"id":"p-0031","num":"0030"},"figref":["FIG. 5","FIG. 3","FIG. 5"],"b":["500","502","505","511","322","518","525","531","500","542"]},"Although the subject matter has been described in language specific to structural features and\/or methodological acts, it is to be understood that the subject matter defined in the appended claims is not necessarily limited to the specific features or acts described above. Rather, the specific features and acts described above are disclosed as example forms of implementing the claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0008","num":"0007"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 5"}]},"DETDESC":[{},{}]}
