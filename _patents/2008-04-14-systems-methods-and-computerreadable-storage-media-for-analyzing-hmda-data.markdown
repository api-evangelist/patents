---
title: Systems, methods, and computer-readable storage media for analyzing HMDA data
abstract: Systems, methods, and computer-readable storage media are described for normalizing HMDA data. In one exemplary embodiment, a computer-implemented method of normalizing HMDA data comprises receiving HMDA data including at least one of HMDA data reports and loan-level public HMDA data, the HMDA data having information that varies as a function of time; correcting errors in the HMDA data; normalizing the HMDA data across any variation in the information; summarizing the normalized HMDA data; and outputting the summarized and normalized HMDA data to an application for analysis.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07729961&OS=07729961&RS=07729961
owner: Federal Home Loan Mortgage Corporation (Freddie Mac)
number: 07729961
owner_city: McLean
owner_country: US
publication_date: 20080414
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["RELATED APPLICATIONS","TECHNICAL FIELD","BACKGROUND","SUMMARY","DESCRIPTION OF THE EMBODIMENTS"],"p":["This application claims the benefit of U.S. Provisional Application No. 60\/907,700 filed Apr. 13, 2007, which is incorporated herein by reference in its entirety.","The present disclosure generally relates to financial data and to systems, methods, and computer-readable storage media for analyzing data, such as data related to the Home Mortgage Disclosure Act. More particularly, the disclosure relates to systems, methods, and computer-readable storage media for analyzing summary reports and public versions of such data, and extracting the original underlying data for use in further analysis and incorporation into report format.","The Home Mortgage Disclosure Act (\u201cHMDA\u201d) was enacted by Congress in 1975 and requires certain financial institutions (e.g., lenders) to publicly disclose data about housing-related loans and applications for such loans. The publicly-disclosed data (\u201cHMDA data\u201d) may be used to: (a) determine whether financial institutions are serving the housing needs of their communities; (b) assist in directing government officials and private investors to areas that may need investment; and (c) identify possible discriminatory lending patterns and thereby assist regulatory agencies in enforcing compliance with antidiscrimination statutes.","Since HMDA was enacted, there have been periodic changes to the HMDA data required to be disclosed by the financial institutions. For example, initially, a financial institution was only required to disclose data related to the geographic location of originated and purchased home loans. Today, HMDA data has been expanded to include data about denied home loan applications; the race, sex, and income of the applicant or borrower; and the price data for some loans. Accordingly, with some exceptions, a financial institution is required under HMDA to report the following data:","(a) the loan or application, such as the type and amount of the loan made","(or applied for) and, in some circumstances, its price;","(b) the disposition of the application, such as whether it was denied or resulted in an origination of a loan;","(c) the property to which the loan relates, such as its type (single-family, multi-family, etc.) and location (including the census tract);","(d) the applicant's ethnicity, race, sex, and income; and","(e) the sale of the loan, if it was sold.","In addition to the changes in the requirement of data to be disclosed by HMDA, there has also been changes to the required format of the disclosed data. An example of a change in the required format is reflected in the disclosure of the property location information, which is reported using census tract information provided by the federal government. Census tracts may vary with each census reporting year. Accordingly, because the same property location may appear in different census tracts depending upon which census data is used, it is difficult to compare HMDA data for years that use, for example, the 1990 census tracts with HMDA data for years that use the 2000 census tracts.","The number of loans and applications each year that require the public disclosure of HMDA data is in the tens of millions. Financial institutions are required to disclose HMDA data annually, in a predefined format, to the Federal Financial Institutions Examination Council (\u201cFFIEC\u201d). The FFIEC consolidates and summarizes the HMDA data received from the different financial institutions and subsequently releases this data annually to the public via a publicly accessible database or through distribution of the HMDA data on a storage media, such as a Digital Versatile Disk (DVD).","The version of the HMDA data released to the public is loan-level HMDA data that is depersonalized so that information relating to the borrower or property can no longer be identified. In addition, the FFIEC may also release to the public summaries of the loan-level HMDA data in order to make the large amount of loan-level HMDA data manageable and useable. For example, a summary report may be published for each mortgage lender by metropolitan statistical area (\u201cMSA\u201d), another summary report may be published that aggregates lender data for each MSA, and yet another summary report may be published for the entire United States. MSAs are defined by the White House Office of Management and Budget (\u201cOMB\u201d) and comprise a list of geographic components (e.g., counties or towns) surrounding an urbanized area. An example of an MSA as defined by the OMB is the \u201cWashington-Arlington-Alexandria, DC-VA-MD-WV Metropolitan Statistical Area.\u201d","Because HMDA reporting requirements and formats have changed over the years and because the public HMDA data is only published on an annual basis, it is difficult for an analyst to conduct an in-depth analysis of this data. In particular, it is difficult to perform any cross-year analysis of the HMDA data. Moreover, mergers may also complicate analysis of HMDA data. For example, when a financial institution acquires another financial institution, the HMDA data for years preceding the acquisition will only reflect the acquired institution's relationship to the loan. The HMDA data published by the FFIEC is not updated to reflect the acquiring institution's relationship to the loan.","Thus, direct analysis of HMDA data may take inordinate amounts of time, typically requiring computer code to be written each time a specified analysis is undertaken. No existing application or tool effectively reduces the processing requirements for working with HMDA data so that data analysis may be conducted without writing new computer code and within user-friendly time constraints.","HMDA data may also be linked to and processed with other relevant data sets such as U.S. Department of Housing and Urban Development (\u201cHUD\u201d) data, lender data, and geographic reference data. However, no centralized processing mechanism exists that integrates HMDA data with other data sets, or allows for user-friendly visualization and processing of HMDA data and other data sets.","In addition, government-sponsored enterprises (\u201cGSEs\u201d), such as the Federal Home Loan Mortgage Corporation (Freddie Mac) and the Federal National Mortgage Association (Fannie Mae) may have HUD goals they are required to meet. These goals may include serving under-served area families, such as families in economically depressed areas where lenders tend to shy away from doing business. Another goal may be serving a certain percentage of low-income families, defined by having an income below a certain percentage of the average income for the area. No tool presently allows GSEs or other users to capture migrational patterns or other trends that allow the GSEs to project a business strategy that will help them achieve these HUD goals.","Systems and methods consistent with the present invention address the difficulties discussed above and allow for user-friendly processing of HMDA and other data.","Consistent with the present invention, as embodied and broadly described herein, systems, methods, and computer program products are provided for normalizing and analyzing HMDA data.","According to one embodiment consistent with the invention, a computer-implemented method is provided for normalizing HMDA data. The method may comprise receiving HMDA data including at least one of HMDA data reports and loan-level public HMDA data, the HMDA data having information that varies as a function of time; correcting errors in the HMDA data; normalizing the HMDA data across any variation in the information; summarizing the normalized HMDA data; and outputting the summarized and normalized HMDA data to an application for analysis.","In another embodiment consistent with the invention, a computer-readable storage medium includes program instructions which perform, when executed by a process perform, a method of normalizing HMDA data. The method may comprise receiving HMDA data including at least one of HMDA data reports and loan-level public HMDA data, the HMDA data having information that varies as a function of time; correcting errors in the HMDA data; normalizing the HMDA data across any variation in the information; summarizing the normalized HMDA data; and outputting the summarized and normalized HMDA data to an application for analysis.","In another embodiment consistent with the invention, a HMDA data analysis tool for performing a normalizing process and analysis of HMDA data is provided. The HMDA data analysis tool may comprise a geographic translator for performing a cross-year process to normalize geographic information on the location of properties reported in the HMDA data; an income translator for performing a cross-year process to normalize HUD goals required of government-sponsored enterprises relative to HMDA data; a lender translator for performing a cross-year process to normalize lender information reported in the HMDA data; a rules repository for storing rules for performing the normalization process; and a rules processor for executing the rules.","It is to be understood that both the foregoing general description and the following detailed description are exemplary and explanatory only and are not restrictive of the invention, as described. Further features and\/or variations may be provided in addition to those set forth herein. For example, the present invention may be directed to various combinations and subcombinations of several further features disclosed below in the detailed description.","Reference will now be made in detail to various embodiments of the invention, examples of which are illustrated in the accompanying drawings. Wherever convenient, similar reference numbers will be used throughout the drawings to refer to the same or like parts. The implementations set forth in the following description do not represent all implementations consistent with the claimed invention. Instead, they are merely some examples of systems and methods consistent with the invention.",{"@attributes":{"id":"p-0040","num":"0039"},"figref":["FIG. 1","FIG. 1","FIG. 1"],"b":["111","112","113","110","140","110","121","122","123","120","130","140","140","120","145","145","154","120","140","154","150","145","150","151","152","153","150","154","160","170"]},"Communication channels  and  may include, alone or in any suitable combination, a telephony-based network, a local area network (LAN), a wide area network (WAN), a dedicated intranet, wireless LAN, the Internet, and intranet, a wireless network, a bus, or other appropriate communication mechanisms. Moreover, various combinations of wired and\/or wireless components may be incorporated into communication channels  and . Furthermore, various combinations of point-to-point or network communications may also be incorporated into communication channels  and  to facilitate communication between the one or more financial institutions , the FFIEC , and one or more computers . Additionally, data communicated through communication channels  and  may be communicated instead through the transfer of storage media, such as DVDs.",{"@attributes":{"id":"p-0042","num":"0041"},"figref":["FIG. 2A","FIG. 2A"],"b":["200","110","120","140","210","110","211","212","213","214","215","216"]},"Various codes may be used to complete the LAR .  contains an exemplary listing of such codes.","The information required to complete the fields  of the LAR  () does not include all the information contained in a typical loan application. Instead, the fields  included in the LAR  represent the information required from each loan application by HMDA. Moreover, information included in the LAR  may not be as precise or may be in a different format than the information included in a loan application. For example, LAR  includes information fields within the category property location . These information fields include the five-digit MSA number, two-digit state code, three-digit county code, and six-digit census tract number. However, on a typical loan application the property location is provided by the address of the property in house number, street, city, state, and ZIP CODE\u2122 format. Accordingly, to transfer the address of the property provided on the loan application to the information required by the fields in the property location category  of the LAR , a process known as \u201cgeocoding\u201d may be used. Specifically, as used herein, geocoding refers to a process of assigning geographic identifiers (e.g., MSA number and census tract) to the address of a property.","Accordingly, to report property location accurately on the LAR , the financial institution  needs current information on the MSA boundaries and the correct census tract number (currently, the 2000 census tract number). Information on the MSA boundaries are defined and reported annually by the OMB within the federal government. Census tract information may be retrieved from the U.S. Census Bureau. However, because the information on the MSA boundaries may change annually and the information on the census tract may change from census to census, the geocoding result of the same address using the same geocoding process may also change from year to year.",{"@attributes":{"id":"p-0046","num":"0045"},"figref":["FIGS. 3A","FIG. 3A","FIG. 3A"],"b":["3","3","3","150","140","151","151"]},{"@attributes":{"id":"p-0047","num":"0046"},"figref":["FIG. 3B","FIGS. 3C-3D"],"b":"152"},{"@attributes":{"id":"p-0048","num":"0047"},"figref":"FIGS. 3A-3D","b":["154","140","140","154","150"]},{"@attributes":{"id":"p-0049","num":"0048"},"figref":"FIG. 4","b":["400","400","145","410","460","160","170","170","330","170","470","471","472","473","474","475"]},"Information sources  and - may include various sources of HMDA data and HMDA related data, such as the public HMDA database  operated by the FFIEC  for storing loan-level public HMDA data  and HMDA data summary reports ; a census database  operated by the United States Census Bureau for storing national census tract data; a weighted database  operated through the Missouri Census Data Center Program for storing weighted data reflecting what percentage of a census tract moves in and out of a county or an MSA as the MSA definitions vary; an MSA database  operated by the OMB for storing the definitions of the MSAs; a GSEs goal database  operated by HUD for storing the goals required of mortgage finance GSEs; the Avery File database  operated by a Federal Reserve analyst by the name of Robert Avery for storing data indicative of what HMDA data  belongs to what lender for a specific HMDA year; and a Federal National Information Center (NIC) database  for storing data about financial institutions for which the Federal Reserve has supervisory, regulatory, or research interest in.","The geographic translator  may perform a cross-year process to normalize geographic information on the location of properties reported in the HMDA data. As used herein, the term \u201cnormalize\u201d generally refers to transforming HMDA data so that individual records  may be compared against each other. For example, normalizing the HMDA data may include re-coding old census reference information associated with a record  to new census tract reference information. The geographic translator , income translator , and lender translator  each perform specific types of normalization of the HMDA data . Examples of the specific types of normalization performed are discussed in further detail below in conjunction with a description of the operation of each of the translators.","The geographic translator  may normalize HMDA data  by transforming similar data from various years into a consistent format by taking into account changes in HMDA reporting standards and formatting of the data, data definitions, and the time period when the change occurred. Exemplary operation of the geographic translator  is outlined in the flowchart of . In step , the geographic translator  may retrieve geographic reference data. Geographic reference data may comprise the geographic information of the properties reported using the census tract information available at the time the private HMDA data  was reported. This geographic information may be retrieved from the public HMDA database . The geographic reference data may also comprise information from the census database , information from the weighted database , information from the MSA database , and information from the GSEs goals database .","In step , the geographic translator  may use rules stored in rules repository  and rules processor  to process the geographic reference data. For example, information from the census database  may be used to normalize current census tract data to previous census tract data and vice-versa. Information from the census database  may also be used to normalize current and previous census tract data to counties. In addition, information from the weighted database  may be used in conjunction with information from census database  to determine how census tracts have changed from census to census. The information needed to normalize county information to MSA data may be retrieved from the MSA database .","Applying rules from the rules repository  to the information from these three databases, the geographic translator  is capable of providing a reasonable normalization of a census tract to an MSA (step ). Rules may be developed using commercially available software products that enable the development of programs or modules that may be used for managing, mining, analyzing, and reporting of data. An example of such a software product is SAS System, commercially available from the SAS Institute, Inc., hereinafter referred to as \u201cSAS.\u201d.","An example of a rule stored within the rules repository  and processed by rules processor  during the geographic translator process  is a rule that normalizes the asynchronous process of changes in MSA definitions promulgated by the OMB and the acceptance of these definitions by HUD. For example, MSA definitions are issued by the OMB in approximately June of each year.","However, HUD does not incorporate the new MSA definitions into the process of defining HUD GSE goals until the following year. As a result, if, for example, in November the OMB issues a subsequent modification to the MSA definitions promulgated in June, it is too late for HUD to incorporate these modifications into its HUD GSE goals for the following year. To correct for such a discrepancy, the geographic translator  may use a rule that factors in the asynchronous process of changes in MSA definitions promulgated by the OMB and the acceptance of these definitions by the OMB to thereby synchronize the process by normalizing the HMDA data  based on the HUD reporting of the GSE goals.","An example of the above described rule developed in SAS and that may be used by the geographic translator  to normalize HMDA data is illustrated below.","****************************************************************","******** First step: Data preparation for geo-matching; ********","****************************************************************","* Extract geographic information from HMDA;","proc sql;","create table hmdageo as","select distinct asofdt, fipcode, state, county, censusno, msaprop","from hmda.hmda90 msa;","quit;","run;","* Transform and enhance census tract information to make it compatible w\/HUD list","data hmda.hmdageo(drop=leftext rightext punto lendiff);","set hmdageo;","length TRACT $7;","length LEFTEXT $4;","length RIGHTEXT $2;","* Replace characters O and Z with number 0;","TRACT=translate(censusno, \u201800\u2019,\u2018OZ\u2019);","punto=indexc(TRACT, \u2018.\u2019);","if punto=0 then do;","TRACT=translate(TRACT, \u2018..\u2019, \u2018-\/\u2019);","punto=indexc(TRACT, \u2018.\u2019);","end;","* Extract text left and right of the dot;","if punto=0 then do;","leftext=substr(TRACT, 1, min(4, length(TRACT)));","lendiff=length(TRACT)\u2212length(leftext);","if lendiff>0 then rightext=","substr(TRACT,length(leftext)+1, lendiff);","end;","if punto>1 and punto <=5 then do;","leftext=substr(TRACT, 1, min(punto-1,4));","lendiff=length(TRACT)\u22121\u2212length(leftext);","if lendiff>0 then rightext=","substr(TRACT,length(leftext)+2,lendiff);","end;","* Replace any remaining character with number 0;","leftext=translate(upcase(leftext),","\u20180000000000000000000000000000000000000000000000000000000000\u2019,","\u2018QWERTYUIOPASDFGHJKLZXCVBNM< >?,.\\|\/:;{ }[ ]( )*&^%$-_=+#@!'\u00a7\u2019);","rightext=translate(upcase(rightext),","\u20180000000000000000000000000000000000000000000000000000000000\u2019,","\u2018QWERTYUIOPASDFGHJKLZXCVBNM< >?,.\\|\/:;{ }[ ]( )*&^%$-_=+#@!'\u00a7\u2019);","*Rebuild enhanced tract without dot;","TRACT=leftext\u2225rightext;","run;","****************************************************************","******** Second step: Data extraction for geo-matching; ********","****************************************************************","* Macro to extract geo data by year and type (uni, multi) using ref table-lookup;","% macro yearlyextract(type);","% do year=&begyear % to &endyear;","proc sql;","create table &type.geo&year as","select distinct hmdageo.*","from hmda.hmdageo, hmda.&type.cty90","where asofdt=&year and fipcode=&type.cty90.state and county=","cnty&year;","quit;","% end;","% mend yearlyextract;","* Macro to consolidate geo data by year and type (uni, multi);","% macro names(type);","% do year=&begyear % to &endyear;","&type.geo&year","% end;","% mend names;","* Define timeframe;","% let begyear=1990;","% let endyear=2003;","* Extract and merge reference-matched unicounties from HMDAGEO;","% let type=uni;","% yearlyextract(&type);","data hmda.&type.geo9003;","set % names(&type);","run;","* Extract and merge reference-matched multicounties from HMDAGEO;","% let type=multi;","% yearlyextract(&type);","data hmda.&type.geo9003;","set % names(&type);","run;",{"@attributes":{"id":"p-0106","num":"0000"},"ul":{"@attributes":{"id":"ul0001","list-style":"none"},"li":"* Get NonGeo (not reference-matched counties) by subtracting from HMDAGEO\n\nthe union of unigeo and multigeo;\n"}},"proc sql;","create table hmda.nongeo9003 as","select distinct * from hmda.hmdageo","except","select distinct *","from (select distinct * from hmda.unigeo9003\n\n","run;","The income translator  () relates to the HUD goals required of mortgage finance GSEs, such as Freddie Mac and Fannie Mae. For example, one HUD GSE goal includes a requirement that a certain percentage of loans purchased (guaranteed or held) by the GSEs are loans provided to low or moderate-income families. This HUD GSE goal is hereinafter referred to as the \u201cL\/MI goal.\u201d Another HUD GSE goal, referred to as the Special Affordable Housing Goal, requires that a certain proportion of GSE purchased loans, must be loans that are used to finance housing meeting the then-existing unaddressed needs of, and affordable to, low-income families in low-income areas and very-low-income families. This HUD GSE goal is hereinafter referred to as the \u201cSA goal.\u201d Yet another HUD GSE goal includes a requirement that the GSEs annually purchase a specified amount or percentage of loans used to finance homes in underserved areas, such as central cities and rural areas. This HUD GSE goal is hereinafter referred to as the \u201cunderserved goal.\u201d","The specific requirements of the HUD GSE goals are defined annually. For example, in 2004 in order to determine whether a loan qualified to count towards the L\/MI and\/or SA goal, HUD provided a GSE goals data file, which included numerous requirements. For example, the HUD GSE goals data file incorporated the census tract boundaries and tract numbering system used in the 2000 census as well as the MSA designations established by the OMB in June 2003; based the data values in the file determining low-income areas in 2002 on 1990 census data and pre-2003 MSA definitions; provided estimates of area median incomes (MIyyyy) for 1984 through 2002 which were benchmarked to the 1990 census and area median incomes for 2003 and 2004 benchmarked to the 2000 census; and classified census tracts as metropolitan or non-metropolitan based on the OMB's specification of MSAs prior to June 2003.","The specific requirements for the underserved goal in 2004 included a definition of a \u201ccentral city\u201d as a census tract with median income at or below 120 percent of the median income of the MSA and a minority population of 30 or greater; or a census tract with median income at or below 90 percent of median income of the MSA. The 2004 requirement defined \u201crural areas\u201d as a county having a median income at or below 120 percent of the greater of the state non-metropolitan median income or the nationwide non-metropolitan median income and a minority population of 30 percent or greater; or median income at or below 95 percent of the greater of the state non-metropolitan median income or nationwide non-metropolitan median income.","As is evidenced by the above 2004 requirements for the L\/MI and SA goal and the underserved goal, HUD GSE goals may vary across census tracts and, in addition, may vary from year to year. Accordingly, the income translator  may perform a cross-year normalization of the HMDA data  by factoring in the changes to the HUD GSE goals.","Operation of the income translator  is outlined in the flowchart of . In step , the income translator  may retrieve the HUD goals reference data. HUD goals reference data may comprise HUD GSE goals reference data files retrieved from the GSEs goal database  and HMDA data summary reports  and loan-level public HMDA data  retrieved from the public HMDA database . In addition, in step , the income translator  may retrieve the output of the geographic translator , the normalization of census tracts to MSAs.","In step , the income translator  may use rules stored in rules repository  and rules processor  to process the HUD goals reference data and the normalized census tracts to MSA data. In order to comply with requirements set forth in the HUD GSE goals, the income translator  may use rules to analyze a census tract to determine whether the census tract is part of an MSA or not (step ). For example, a determination may be made as to what part of the census tract will be considered metropolitan and what part of the census tract will be considered non-metropolitan. Based on the determination, additional rules may be applied in accordance with the requirements set forth in the HUD GSE goals data file for a particular year, such as those outlined for year 2004 discussed above (step ). As a result of the application of these rules, the income translator  may determine which loans within a particular census tract meet the HUD GSE goals of L\/MI and\/or SA.","Further, through geocoding of the census tract, the income translator  may also determine which loans in the census tract meet the HUD GSE goals of underserved by incorporating a HUD-provided list of underserved census tracts.","Once a determination is made, the income translator  may flag the L\/MI, SA, and underserved loans. In addition, by applying the rules in accordance with the requirements set forth in the HUD GSE goals data file for a particular year to the normalized census tracts to MSAs data, the income translator  may determine how much of a median family income has moved into and out of an MSA. Another rule may be applied in instances when an HMDA record is missing its tract number. In this instance, a rule may specify that the lowest greater than zero median income for a tract within a county is used as the median income for HUD classification purposes for that record. This allows records without tract numbers, which would otherwise be ignored, to be identified as eligible to be used in the evaluation of HUD GSE goals.","An example of a rule developed in SAS and that may be used by the income translator  to normalize HMDA data is illustrated below.","* Macro to parse goals-lookup datasets by year;","% macro geogoals;","% do year=1996% to 2002;","proc sql;","create table geogoals&year as","select distinct MSA2005, ST2005, CNTY2005, TRACT, CENINC, MEDINC, SERVED&year as UNDRSRVD, MI&year as AMI","from hmda.geogoals9602(rename=(STATE=ST2005 CNTY2002=CNTY2005 MSA2002=MSA2005 CENINC89=CENINC MEDINC89=MEDINC));","quit;","run;","% end;","proc sql;","create table geogoals2003 as","select distinct MSA2005, ST2005, CNTY2005, TRACT, CENINC, MEDINC, SERVED2003 as UNDRSRVD, MI2003 as AMI","from hmda.geogoals0305(rename=(STATE=ST2005 MSA2003=MSA2005 CENINC2003=CENINC MEDINC2003=MEDINC));","create table geogoals2004 as","select distinct ST2005, CNTY2005, TRACT, CENINC, MEDINC, SERVED2004 as UNDRSRVD, MI2004 as AMI","from hmda.geogoals0305(rename=(STATE=ST2005 CENINC2004=CENINC MEDINC2004=MEDINC));","quit;","run;","% mend;","% geogoals;","* Macro to flag goal-qualifying HMDA data; * Problem area;","% macro geogoaling;","% do year=1996% to 2003;","proc sort data=forgoals&year;","by MSA2005 ST2005 CNTY2005 TRACT;","run;","proc sort data=geogoals&year;","by MSA2005 ST2005 CNTY2005 TRACT;","run;","data geogoaled&year(drop=CENINC MEDINC);","merge forgoals&year(in =a)\n\n","by MSA2005 ST2005 CNTY2005 TRACT;","if a;","* Low- and Moderate-Income Goal;","if AMI>0 then do;","if APPLINCM>0 then do;\n\n","else LOWMOD=\u20189\u2019;*Unknown Income Level;","end;","else LOWMOD=\u20189\u2019;*Unknown Income Level;","* Special Affordable Goal;","if MEDINC>0 then TRACTRATIO=CENINC\/MEDINC; * Determining tract ratio;","else if ST2005<\u201856\u2019 then TRACTRATIO=1; * Low-Income Area cannot be determined;","else TRACTRATIO=0; * By definition, territories are Low-Income Areas;","if AMI>0 then do;","if APPLINCM>0 then do;\n\n","else SPECIAL=\u20189\u2019;","end;","else SPECIAL=\u20189\u2019;","drop TRACTRATIO;","run;","% end;","% let year=2004;","proc sort data=forgoals&year;","by ST2005 CNTY2005 TRACT;","run;","proc sort data=geogoals&year;","by ST2005 CNTY2005 TRACT;","run;","data geogoaled&year(drop=CENINC MEDINC);","merge forgoals&year(in=a)\n\n","by ST2005 CNTY2005 TRACT;","if a;","* Low- and Moderate-Income Goal;","if AMI>0 then do;","if APPLINCM>0 then do;\n\n","else LOWMOD=\u20189\u2019; * Unknown Income Level;","end;","else LOWMOD=\u20189\u2019; * Unknown Income Level;\n\n","if MEDINC>0 then TRACTRATIO=CENINC\/MEDINC; * Determining tract ratio;","else if ST2005<\u201856\u2019 then TRACTRATIO=1; * Low-Income Area cannot be determined;","else TRACTRATIO=0; * By definition, territories are Low-Income Areas; run;","if AMI>0 then do;","if APPLINCM>0 then do;\n\n","else SPECIAL=\u20189\u2019;","end;","else SPECIAL=\u20189\u2019;","drop TRACTRATIO;","run;","% mend;","% geogoaling;","In step , the income translator  outputs normalized HUD goals reference data, which include the flags for L\/MI, SA, and underserved loans. The output may be in the form of a reference or lookup table, which may further include census tracts by year, with area median income data and underserved area flags, as provided by HUD to the GSEs.","The lender translator  may perform a cross-year process to normalize lender information in the HMDA data summary reports  and loan-level public HMDA data . Operation of the lender translator  is outlined in the flowchart of . In step , the lender translator  may retrieve lender reference data. Lender reference data may comprise HMDA data summary reports  and loan-level public HMDA data  retrieved from the pubic HMDA database , Avery files retrieved from the Avery file database , and data from the Federal NIC database . Examples of the data retrieved from the Federal NIC database  may include bank names and associated identifying tags that allow the determination of what entity is the child of a parent bank. This data may be used, for example, to normalize the lenders to one standard set of names and thereby reduce the thousands of lender names that may exist in the HMDA data.","The Avery files may include rules for normalizing lender information associated with the HMDA data which fail to include the reporting of master financial institutions for lenders. For example, a financial institution  may include multiple entities that report private HMDA data . In part, financial institutions  report private HMDA data  out of multiple entities in an attempt to prevent other competitive financial institutions  from determining the lending patterns and lending amounts of the master financial institutions. Accordingly, when reviewing HMDA data summary reports  and loan-level public HMDA data , it may be difficult to determine all the loans that belong to a particular financial institution .","However, the Avery files may include a data set of lenders for each year, and therefore, it may be used to determine attribute metrics, like market share, for a particular lender in a given year by considering all of the loans for that lender. In step , the rules from the Avery files may be used to process the HMDA data to thereby identify what loans belong to a particular financial institution.","An example of a rule developed in SAS and that may be used by the lender translator  to normalize HMDA data is illustrated below.","My Averoll 1.sas","libname hmda \u2018e:\\hmda\u2019;","options nosymbolgen;","% let begyear=1990;","% let endyear=2004;","* Macro to define desired variable attributes;","% macro Attribit;","% do year=&begyear % to &endyear;","% let yy=% substr(&year,3,2);","ENTTY&yy length=$10.","ENTFT&yy length=$10.","NAME&yy length=$30.","FDIC&yy length=$10.","OCC&yy length=$10.","THRIFT&yy length=$10.","NCUA&yy length=$10.","ORG&yy length=8.","NAMEOR&yy length=$30.","ORGFUT&yy length=8.","% end;","% mend;","* Macro to define variables to keep;","% macro Keepit;","% do year=&begyear % to &endyear;","% let yy=% substr(&year,3,2);","ENTITY&yy ENTFUT&yy NAMES&yy CERT&yy OCC&yy THRIFT&yy NCUA&yy ORG&yy NAMEOR&yy ORGFUT&yy","% end;","% mend;","* Macro to define variables to be renamed;","% macro Renameit;","% do year=&begyear % to &endyear;","% let yy=% substr(&year,3,2);","NAMES&yy=NAME&yy CERT&yy=REG1&yy OCC&yy=REG2&yy THRIFT&yy=REG3&yy NCUA&yy=REG4&yy","% end;","% mend;","* Macro to define variables to be dropped;","% macro Dropit;","% do year=&begyear % to &endyear;","% let yy=% substr(&year,3,2);","ENTITY&yy ENTFUT&yy REG1&yy REG2&yy REG3&yy REG4&yy","% end;","% mend;","* Macro to define variables to be transformed;","% macro Transformit;","% do year=&begyear % to &endyear;","% let yy=% substr(&year,3,2);","if ENTITY&yy then ENTTY&yy=repeat(\u20180\u2019,9-length(compress(put(ENTITY&yy,8.)))) \u2225compress(put(ENTITY&yy,8.));","else ENTTY&yy=\u2018 \u2019;","if ENTFUT&yy then ENTFT&yy=repeat(\u20180\u2019,9-length(compress(put(ENTFUT&yy,8.)))) \u2225compress(put(ENTFUT&yy,8.));","else ENTFT&yy=\u2018 \u2019;","if REG1&yy then FDIC&yy=repeat(\u20180\u2019,9-length(compress(put(REG1&yy,8.)))) \u2225compress(put(REG1&yy,8.));","else FDIC&yy=\u2018 \u2019;","if REG2&yy then OCC&yy=repeat(\u20180\u2019,9-length(compress(put(REG2&yy,8.)))) \u2225compress(put(REG2&yy,8.));","else OCC&yy=\u2018 \u2019;","if REG3&yy then THRIFT&yy=repeat(\u20180\u2019,9-length(compress(put(REG3&yy,8.)))) \u2225compress(put(REG3&yy,8.));","else THRIFT&yy=\u2018 \u2019;","if REG4&yy then NCUA&yy=repeat(\u20180\u2019,9-length(compress(put(REG4&yy,8.)))) \u2225compress(put(REG4&yy,8.)); else NCUA&yy=\u2018 \u2019;","% end;","% mend;","% let yy=% substr(&endyear,3,2);","* Data step to customize Avery&yy;","data hmda.avery (drop=CODE HMPRID % Dropit);","attrib AGENCY length=$1. RESPID length=$10. % Attribit;","set hmda.avery&yy (keep=CODE HMPRID % Keepit rename=(% Renameit));","AGENCY=put(CODE,1.);","RESPID=HMPRID;","% Transformit;","run;","% let fromdata=hmda.avery;","% let newdata=avex;","* Macro to de-matrix Avery;","% macro DeAvery;","% do year=&begyear % to &endyear;","% let yy=% substr(&year,3,2);","data &newdata&year (keep=ASOFDT AGENCY RESPID ENTTY NAME FDIC OCC THRIFT NCUA ORG NAMEOR ORGFUT);","length ASOFDT 4;","length AGENCY $ 1;","length RESPID $ 10;","length ENTTY $ 10;","length NAME $ 30;","length FDIC $ 10;","length OCC $ 10;","length THRIFT $ 10;","length NCUA $ 10;","length ORG 8;","length NAMEOR $ 30;","length ORGFUT 8;","set &fromdata; if ENTTY&yy;","ASOFDT=&year;","ENTTY=ENTTY&yy;","NAME=NAME&yy;","FDIC=FDIC&yy;","OCC=OCC&yy;","THRIFT=THRIFT&yy;","NCUA=NCUA&yy;","ORG=ORG&yy;","NAMEOR=NAMEOR&yy;","ORGFUT=ORGFUT&yy;","run;","% end;","% mend;","% DeAvery;","In step , the lender translator  may output normalized lender reference data. The output may be in the form of a table of market shares for lenders by year. For example, a market share for financial institution  in 2006 may also include the market share of financial institution . Thus, the table may be used to determine the historical data of financial institution  as if it had owned financial institution  in 2006.","Operation of the HMDA data analysis tool  is outlined in the flowchart of . In the HMDA data analysis process , the HMDA data analysis tool  may normalize HMDA data by incorporating the outputs of geographic translator , income translator , and lender translator .","In step , the HMDA data analysis tool  may retrieve HMDA data summary reports  and loan-level public HMDA data  from the public HMDA database . The retrieved HMDA data may be HMDA data that has been reported across a number of different years.","In step , the HMDA data analysis tool  may perform a process of cleaning and standardizing the HMDA data to correct for errors caused by, for example, improper data entry and\/or inconsistent formatting of the entered data. Other errors in the HMDA data may be caused by a lender consistently misusing the codes used to complete the LAR . To correct this error, the HMDA data analysis tool  may clean the HMDA data by replacing the misused code with the correct code. Additionally, a branch of a lender may consistently report only a part of a census tract number, such as 1234.xx. To correct such an error, the HMDA data analysis tool  may convert the incomplete census tract to the tract number for the branch, so 1234.xx could be converted to 1234.56 if \u201c56\u201d is the suffix for properties serviced by that branch.","Another error in the HMDA data may occur when a lender may have reported their data using a first code for a given area, and other lenders may have reported data for the same area using a different, outdated code. The HMDA data analysis tool  may correct this error by standardizing the HMDA data to account for the differences in lender reporting. For example, if 10 lenders use code \u201c25\u201d for a particular area, and 5 lenders use code \u201c86,\u201d the HMDA data  may be standardized by converting code \u201c86\u201d to code \u201c25.\u201d","In addition, census county codes may have changed over the years. For example, code \u201c25\u201d for Dade County from the 1990 census may have changed to code \u201c86\u201d for Miami-Dade county for the 2000 census. Thus, within a particular HMDA record, the same property may have different reference codes. The data may be standardized to a particular census year by using either code \u201c25\u201d or \u201c86\u201d for all such records.","An example of a rule developed in SAS and that may be used to clean and standardize the HMDA data is illustrated below.","% unixrsub(consas);","rsubmit;","libname myhmda \u2018\/export\/fmacdata\/dev\/frd\/userdata\/gomez\/V8\u2019;","options errors=1 invaliddata=\u2018.\u2019;","\/*Fixing FIPS up*\/","data myhmda.app19097fips(drop=fipsnumber);","set myhmda.app19097;","\/* Cleaning up variable STATE *\/","if state=\u2018AK\u2019 then fipcode=\u201802\u2019;","else if state=\u2018AL\u2019 then fipcode=\u201801\u2019;","else if state=\u2018AR\u2019 then fipcode=\u201805\u2019;","else if state=\u2018AZ\u2019 then fipcode=\u201804\u2019;","else if state=\u2018CA\u2019 then fipcode=\u201806\u2019;","else if state=\u2018CO\u2019 then fipcode=\u201808\u2019;","else if state=\u2018CT\u2019 then fipcode=\u201809\u2019;","else if state=\u2018RQ\u2019 then state=\u2018PR\u2019;","else if state=\u2018AQ\u2019 then state=\u2018AS\u2019;","else if state=\u2018GQ\u2019 then state=\u2018GU\u2019;","else if state=\u2018SQ\u2019 then state=\u2018UM\u2019;","else if state=\u2018VQ\u2019 then state=\u2018VI\u2019;","else if fipcode=\u201864\u2019 then state=\u2018FM\u2019;","else if fipcode=\u201868\u2019 then state=\u2018MH\u2019;","else if fipcode=\u201869\u2019 then state=\u2018MP\u2019;","else if fipcode=\u201870\u2019 then state=\u2018PW\u2019;","else if trim(state)=\u2018 \u2019 then state=\u2018--\u2019;","\/* Cleaning up variable FIPCODE *\/","if fipcode=state then do;\n\n","end;","else do;\n\n","end;","run;","Once the HMDA data has been cleaned and standardized, the HMDA data analysis tool  may perform a multiple match-merge step with auxiliary data from processes , , and  in order to normalize the HMDA data to correct for changes in the data (step ). For example, as discussed above, depending on the variation in the reporting years of the HMDA data, the HMDA data may vary based on requirement and format changes that may have occurred during that time period. In addition, depending on the time period spanned by the received HMDA data, different mergers and acquisitions may have occurred among the lenders and, thereby, the HMDA data for years preceding the merger or acquisition will only reflect the acquired institution's relationship to the loan. Another variation in the HMDA data received may be caused by use of different census tract information. For example, some of the received HMDA data may have been reported using the 1990 census tract information while some of the received HMDA data may been reported using the 2006 census tract information.","In step , additional rules, that may normalize attributes of the HMDA data that are not geography, income, or lender based, may be used to process the HMDA data. The additional rules may include, for example, an interest rate spread for determining which loans belong to the sub-prime market and which loans belong to the prime market. Another example of an additional rule may be a rule for categorizing \u201cconforming\u201d and \u201cnon-conforming\u201d loans. For example, the rule may set forth that if a loan was originally sold to a GSE, the loan is conforming. If not, other HMDA data  or data derived from processes , , or  may be used to determine if the loan is conforming.","An example of a rule developed in SAS and that may be used to normalize attributes of the HMDA data that are not geography, income, or lender based is illustrated below.","libname hmda \u2018e:\\hmda\u2019;","data hmda;","length ASOFDT 4; length AGENCY $ 1; length RESPID $ 10; length SEQNO 8; length LNTYPE $ 1;","length LIMIT $ 1; length PROPTYPE $ 1; length RATE $ 1; length OCCPNCY $ 1;","length LNPURP $ 1; length PREAPPRV $ 1; length MINORITY $ 1; length RACE $ 1;","length ACTION $ 1; length PURTYPE $ 1; length LNAMT 8; length MSAPROP $ 5;","length FIPCODE $ 2; length COUNTY $ 3; length CENSUSNO $ 7; length APPLETHN $ 1;","length COAPETHN $ 1; length APPRACE1 $ 1; length APPRACE2 $ 1; length APPRACE3 $ 1;","length APPRACE4 $ 1; length APPRACE5 $ 1; length COAPRACE1 $ 1; length COAPRACE2 $ 1;","length COAPRACE3 $ 1; length COAPRACE4 $ 1; length COAPRACE5 $ 1; length APPLSEX $ 1;","length COAPSEX $ 1; length DENIAL1 $ 1; length DENIAL2 $ 1; length DENIAL3 $ 1;","length HOEPASTAT $ 1; length LIENSTAT $ 1; length EDITSTAT $ 1; length APDTPRE $ 1;","length STATE $ 2; length APPLINCM 8; length RATESPREAD 8; length POP 8; length PCTMINPOP 8;","length HUDMFI 8; length PCTTRCTMFI 8; length NUMOOUNITS 8; length NUM1TO4UNITS 8;","length MFI 8; length LOWMOD $ 1; length UNDRSRV $ 1; length SPECIAL $ 1;","length UNDRSRVD 8; length MSA2005 $ 4; length MSA2k2005 $ 5; length STFIPS $ 2;","length CNTY2005 $ 3; length TRACT90 $ 6; length TRACT2k $ 6; length SERVED $ 1;","set hmda.hmda (rename=(conform=LIMIT subprime=RATE applrace=APPRACE1 coaprace=COAPRACE1));","run;","proc sort data=hmda;","by ASOFDT AGENCY RESPID;","run;","data hmda.hmda9003 to 04(drop=CODE);","merge hmda(in=a)\n\n","by ASOFDT AGENCY RESPID;","if a;","** Eliminating double reporting by keeping AGENCY=\u20187\u2019 & RESPID=\u20182294709990\u2019 for CONSECO;","if ASOFDT=2002 and AGENCY=\u20183\u2019 and RESPID=\u20180000034536\u2019 then DELETE;","** Determining Subprime Rate or Manufactured Home Lender and Property Type;","if LNPURP in (\u20181\u2019, \u20182 \u2019, \u20183 \u2019) then PROPTYPE=\u20181\u2019;","else PROPTYPE=\u20183\u2019;","if ASOFDT>1992 then do;","if b=0 then RATE=\u20180\u2019; ** Not in Subprime list;","else do;\n\n","end;","end;","** Determining Race by applying racial matrix;","if apprace1 in (\u20181\u2019,\u20182\u2019,\u20183\u2019,\u20184\u2019,\u20185\u2019,\u20186\u2019) then do;","if coaprace1=apprace1 or coaprace1 not in (\u20181\u2019,\u20182\u2019,\u20183\u2019,\u20184\u2019,\u20185\u2019,\u20186\u2019) then RACE=apprace1;","else RACE=\u20180\u2019; * Joint\/multiracial household;","end;","else if apprace1 not in (\u20181\u2019,\u20182\u2019,\u20183\u2019,\u20184\u2019,\u20185\u2019,\u20186\u2019) then do;","if coaprace1 not in then RACE=\u20189\u2019;","else RACE=coaprace1;","end;","** Determining Minority;","if RACE=\u20189\u2019 then MINORITY=\u20189\u2019;","else if RACE=\u20185\u2019 then MINORITY=\u20180\u2019;","else MINORITY=\u20181\u2019;","run;","In step , the normalized HMDA data may be summarized and structured into data cubes. A data cube is a data structure that allows for fast analysis of the underlying data. The summarizing of the data may be performed using cross-tabulations techniques. For example, the normalized HMDA data may be considered as two types, metrics such as loan amounts, and categories such as minority status. For each category available in the HMDA data, the HMDA data analysis tool  may create every possible combination. For example, assuming the HMDA category \u201cminority status\u201d includes the values \u201cminority status A\u201d and \u201cminority status B,\u201d and the HMDA category loan type includes the categories \u201ctype 1\u201d and \u201ctype 2.\u201d The HMDA data analysis tool  may determine all four permutations of these two categories (A, A, B, B). Then, for each permutation, metrics such as the loan amount and count may be summarized for the permutation.","Derived categories such as conforming\/nonconforming or HUD-goal eligible may also be used for the above-described permutations, and metrics may be calculated for each permutation. Other categories that may be derived include lien status, conforming flag, conforming ratio distributions, prime\/sub-prime flag, geographic flags, minority flag, goal flags (low or moderate-income, underserved, and special affordable), merger-adjusted lender rollup, loan-to-income ratios, etc.","Finally, the metrics may be summarized using a report procedure at the most granular level, also known as a \u201chandle,\u201d defined as a unique combination of all categorical variables or attributes. In step , the summarized and normalized HMDA data may be exported into an application. The application may be a spreadsheet application, such as Microsoft Excel. Open Database Connectivity (ODBC) may be used to provide a standard software application programming interface (API) for linking the HMDA data to the application.","An example of a handle from the summarized and normalized HMDA data is illustrated in . In , handles (Handle , Handle , and Handle ) have been created for private HMDA data  reported during the years 1996, 1997, and 1998. In addition, the categorical variables of the handles include a subgroup of attribute variables and a subgroup of metric variables. The attribute variables subgroup corresponds to the fields of LAR  illustrated in . An optional translation has also been performed to translate the various listing of codes in  from a numerical representation to an alphabetical representation for purposes of simplifying analysis. For example, code  (one-to-four family) used in the property type group of  has been translated to code F.","The summarized and normalized HMDA data may be further aggregated into pivot tables and pivot charts for further analysis. For example, pivot tables and pivot charts may be used to analyze the HMDA data within an application, such as a spreadsheet application.  illustrate an example of such a pivot table.","Other HMDA record attributes, like gender, applications, reason for denial, accept rates, may be incorporated into the HMDA data analysis tool . Additionally, lenders may use internal, not publicly available data, as an input to process  to expand the analytical capabilities of the HDMA data analysis tool . Likewise, market data connectors may be created through analytical integration with other market monitoring tools. Through the use of the HMDA data analysis tool , patterns of primary market behaviors may be identified and understood.","Instructions may be stored on a computer-readable storage medium which, when executed by a processor, such as a processor in computer , performs the methods described in paragraphs -.","The foregoing description of possible implementations and embodiments consistent with the present invention does not represent a comprehensive list of all such implementations or all variations of the implementations described. The description of only some implementations should not be construed as an intent to exclude other implementations. Other embodiments of the invention will be apparent to those skilled in the art from consideration of the specification and practice of the invention disclosed herein. One of ordinary skill in the art will understand how to implement the invention in the appended claims in other ways using equivalents and alternatives that do not depart from the scope of the following claims. It is intended that the specification and examples be considered as exemplary only, with a true scope and spirit of the invention being indicated by the following claims."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The accompanying drawings, which are incorporated in and constitute a part of this specification, illustrate various features, embodiments and aspects consistent with the invention and, together with the description, explain advantages and principles of the invention. In the drawings,",{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 2A"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 2B"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 3A"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 3B"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIGS. 3C and 3D"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0035","num":"0034"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0037","num":"0036"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0038","num":"0037"},"figref":"FIGS. 10A and 10B"}]},"DETDESC":[{},{}]}
