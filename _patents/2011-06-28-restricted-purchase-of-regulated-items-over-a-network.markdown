---
title: Restricted purchase of regulated items over a network
abstract: A technique is disclosed for implementing electronic commerce transactions via a data network. A regulated item selected by a customer is identified. The regulated item may correspond to an item which satisfies predetermined criteria, indicating that the regulated item is prohibited from being purchased by the customer. Action is then taken to prohibit the purchase of the selected item, via the data network, by the customer. According to one embodiment, the action taken to prohibit the purchase of the regulated item is automatically implemented at a server system configured to implement electronic commerce transactions between an on-line merchant and the customer. According to a specific implementation, the predetermined criteria correspond to regulations which restrict sales of the regulated items to persons in a particular jurisdiction based upon certain criteria such as, for example, time of day, day of week, age of the customer, type of product being sold, etc.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08880428&OS=08880428&RS=08880428
owner: IpVenture, Inc.
number: 08880428
owner_city: Los Altos
owner_country: US
publication_date: 20110628
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS"],"p":["This application is a continuation of U.S. patent application Ser. No. 11\/701,206, filed Feb. 1, 2007, and entitled \u201cRESTRICTED PURCHASE OF REGULATED ITEMS OVER A NETWORK\u201d (now U.S. Pat. No. 8,010,411 B2), which is hereby incorporated herein by reference, and which in turn is a continuation of U.S. patent application Ser. No. 09\/813,235, filed Mar. 19, 2001, and entitled \u201cTECHNIQUE FOR HANDLING SALES OF REGULATED ITEMS OVER A DATA NETWORK\u201d (now U.S. Pat. No. 7,308,423), which is hereby incorporated herein by reference.","This application is also related to the following patent applications: U.S. patent application Ser. No. 09\/568,603, filed May 10, 2000, and entitled \u201cINTEGRATED SYSTEM FOR ORDERING, FULFILLMENT, AND DELIVERY OF CONSUMER PRODUCTS USING A DATA NETWORK\u201d (now U.S. Pat. No. 7,177,825); and U.S. patent application Ser. No. 09\/750,385, filed Dec. 27, 2000, and entitled \u201cTECHNIQUE FOR IMPLEMENTING ITEM SUBSTITUTION FOR UNAVAILABLE ITEMS RELATING TO A CUSTOMER ORDER (now U.S. Pat. No. 7,233,914)\u201d. Each of the above-referenced U.S. Patent Applications is incorporated herein by reference in its entirety for all purposes.","1. Field of the Invention","The present invention relates generally to electronic commerce, and more specifically to a technique for handling on-line sales and delivery of regulated items implemented using a data network.","2. Background","Over the past decade there has been a dramatic increase in on-line electronic commerce transactions conducted between consumers and retailers via the Internet or World Wide Web. Typically, during an electronic commerce transaction, the on-line merchant or retailer displays an electronic catalog of items which are available for purchase by a consumer or customer. The consumer then selects desired items to add to his or her electronic shopping cart and, when finished, requests to proceed to \u201ccheckout\u201d in order to purchase the selected items and complete the electronic commerce transaction. Once the \u201ccheckout\u201d transaction has been completed, the on-line merchant then fulfills the customer order, and either ships or delivers the customer order to a delivery location specified by the customer.","It is noted that most electronic commerce transactions that occur over the Internet are subject to the regulatory laws of the state or region where each on-line sales transaction has occurred. Typically, the laws and regulations governing on-line sales transactions are determined based upon the customer's billing address or the location where the delivery is to take place.","It is the responsibility of the on-line merchant to be aware of and conform with the requirements of each state's regulations relating to electronic commerce transactions in that state. Unfortunately, many on-line merchants are not able to conform with each state's regulations governing on-line sales transactions when engaging in electronic commerce transactions with customers in a particular state. One reason for this is that many systems which are designed to implement electronic commerce transactions are not configured to take into account each of the regulations governing electronic commerce transactions when taking orders from customers residing in different states or regions.","Accordingly, there exists a continual need to improve upon electronic commerce techniques in order to comply with laws and regulations which affect electronic commerce and on-line sales transactions.","According to specific embodiments of the present invention, a method and computer program product are disclosed for implementing electronic commerce transactions via a data network. A regulated item selected by a customer is identified. The regulated item may correspond to an item which satisfies predetermined criteria, indicating that the regulated item is prohibited from being purchased by the customer. Action can then taken to prohibit the purchase of the selected item, via the data network, by the customer. According to one embodiment, the action taken to prohibit the purchase of the regulated item is automatically implemented at a server system configured to implement electronic commerce transactions between an on-line merchant and the customer. According to a specific implementation, the predetermined criteria correspond to regulations which restrict sales of the regulated items to persons in a particular jurisdiction based upon certain criteria such as, for example, time of day, day of week, age of the customer, type of product being sold, etc.","According to specific embodiments, a variety of techniques may be used to prevent the purchase of the regulated item by the customer. In one embodiment, the display of items available for purchase by the customer may be modified to restrict the display of items which are not allowed to be purchased by the customer based upon specific criteria. In another embodiment, the customer may be prevented from adding the regulated item to the customer's electronic shopping cart. Alternatively, the customer may be prevented from purchasing or checking out the regulated item during an on-line checkout procedure.","According to one particular embodiment, one embodiment of the present invention can relates to a system for implementing electronic commerce transactions via a data network. The system can include at least one CPU and a memory. The system can be configured to at least: provide an online store for products, at least a portion of the products being regulated products; receive interactions from a customer with regard to the online store to create an online order for one or more of the products; receive a requested delivery location for the online order from the customer; determine whether the online order includes at least one regulated product; and determine, when it is determined that the online order includes at least one regulated product, whether the requested delivery location is permitted based on at least one regulation associated with the at least one regulated product, the at least one regulated product pertaining to an alcohol product, and the at least one regulation serving to restrict sale or delivery of at least alcohol products.","According to another particular embodiment, one embodiment of the present invention can relates to a system for implementing electronic commerce transactions via a data network. The system can include at least one CPU and a memory. The system can be configured to at least: provide an online store for products, at least a portion of the products being regulated products; receive a requested delivery location; receive interactions from a customer with regard to the online store to create an online order including at least one regulated product, the online order to be provided to the requested delivery location; determine whether the at least one regulated product within the online order is permitted based on at least one regulation associated with the at least one regulated product, the at least one regulated product pertaining to an alcohol product, and the at least one regulation serving to restrict shipment of at least alcohol products; and present to the customer a perceptible indication that at least the at least one regulated product is not permitted when it is determined that the at least one regulated product is not permitted to be shipped to the requested delivery location due to the at least one regulation.","Additional objects, features and advantages of the various aspects of the present invention will become apparent from the following description of its preferred embodiments, which description should be taken in conjunction with the accompanying drawings.","According to specific embodiments of the present invention, a technique is described for handling on-line sales of regulated items or products during electronic commerce transactions. It will be appreciated that the handling of on-line sales of regulated items of merchandise provides a difficult challenge since there are literally thousands of federal, state, county, city, and township regulations which may need to be complied with across thousands of geographic jurisdictions. Additionally, many of these laws and regulations were not originally drafted to take into account electronic commerce transactions. As a result, an additional level of difficulty in applying such regulations to electronic commerce exists in that legal interpretations of such laws need to be preformed so as to correctly apply the appropriate laws and regulations to electronic commerce transactions.","Generally, the regulatory laws governing retail commerce transactions mandate specific restrictions concerning the pricing, display, sale, and\/or delivery of regulated products. Many of these laws, however, are similar in nature, and therefore may be distilled down to a limited number of common conditions which require compliance activity. According to a specific embodiment of the present invention, the conditions and compliance activities are preferably treated in a systematic manner in order to allow the generation of a base set of rules which may then be re-applied, perhaps with different parameters, to different jurisdictions. According one implementation, the base set of rules may be represented as business rules which may be embodied by a set of lists or tables that enable an electronic commerce system to quickly, easily, and reliably identify regulated items of merchandise, and to easily respond to changing laws and\/or regulations.",{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIGS. 7A-7C"},"According to a specific embodiment of the present invention, selected SKUs in the on-line catalog may be assigned a corresponding regulation code attribute which enables that SKU to be identified as belonging to a particular class of regulated products. In a specific implementation, the assignment of a regulation code attribute may be applied only to regulated SKUs of the on-line catalog. An example of a regulation code assignment scheme is shown in  of the drawings.",{"@attributes":{"id":"p-0028","num":"0027"},"figref":["FIG. 7C","FIG. 7C","FIG. 7C"],"b":["770","770","770","772","774"]},"As shown in , the Regulation Code Attribute Table  may be used to define a plurality of different classes and sub-classes of regulated products such as, for example, alcohol, beer, 3.2% beer, distilled spirits, wine, dairy, insignia, tobacco, cigarettes, cigars, pipe tobacco, non-regulated products, etc. It will be appreciated that the regulated classes and sub-classes of products described in the table of  does not represent a complete list of all regulated products. Moreover, the regulation code attribute table may be modified to include additional classes and sub-classes of other regulated products, which will generally be known to one having ordinary skill in the art.","In addition to the regulation code attributes, a list or table of conditions may also be provided for use in identifying legal requirements which may mandate that the electronic commerce system evoke one or more types of compliance actions when selling particular regulated products to customers over a data network such as, for example, the Internet.",{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 7A","b":"700"},"As shown in , the Conditions Table  includes a plurality of entries relating to specific condition identifiers or condition IDs. Each entry represents a specific condition or legal requirement which may require the on-line merchant to evoke one or more compliance actions. Each entry in the Conditions Table  may include, for example, a Condition ID field  and a description field .","In the example of , the Conditions Table  may be used to define a plurality of different regulatory conditions such as, for example, minimum age conditions, dry delivery address conditions, day of week shopping conditions, day of week delivery conditions, hours of operation conditions, period of day shopping conditions, period of day delivery conditions, same state delivery conditions, minimum price conditions, etc.","For example, the condition \u201cMIN AGE\u201d may be used to represent legal regulations or mandates which exist related to shoppers, customers, or delivery recipients whose age is less than a specified minimum. The Condition ID entry corresponding to \u201cDAY OF WEEK SHOPPING\u201d may be used to refer to regulations or mandates which exist relating to the sale and\/or delivery of items which are restricted during certain days of the week. For example, certain states have mandated that alcohol is not to be sold to customers on Sunday or Election Day. It will be appreciated that the Conditions Table  represents a portion of the various conditions regulating electronic commerce transactions, and that the table may be modified to include additional conditions which will generally be known to one having ordinary skill in the art.","The Conditions Table  of  does not specify what actions are to be implemented in enforcing a particular condition. Thus, according to one implementation, the conditions list may be used as way to categorize and list each possible type of regulatory condition that may affect electronic commerce transactions conducted by the on-line merchant.","According to a specific embodiment, selected conditions in the conditions list may evoke one or more compliance actions or restrictions by the on-line merchant. Further, according to a specific implementation, at least one list or table may be generated which includes various types of compliance actions which may be automatically evoked by the on-line merchant's computer system in order to restrict the sale of specific regulated products.",{"@attributes":{"id":"p-0037","num":"0036"},"figref":["FIG. 7B","FIG. 7B"],"b":["750","750"]},"As shown in the example of , each entry in the Restriction Table  includes a Restriction ID field  and a description field . Each restriction entry corresponds to a specific compliance action which may be used by the on-line merchant to enforce one or more regulatory conditions. For example, the restriction \u201cno cart\u201d may be used to indicate that a condition will be enforced by not allowing a customer to add a SKU item to the customer's electronic shopping cart. The restriction \u201cno checkout\u201d may be used to indicate that a condition may be enforced by not allowing the customer to purchase the SKU item.","According to a specific implementation, after the various regulation codes, condition IDs and restriction IDs parameters have been defined, these parameters may then be collated into a regulation list or table in order to generate a set of rules that may used to manage all or selected variations of regulatory compliance affecting electronic commerce transactions conducted by the on-line merchant in various jurisdictions. An example of a regulation table is shown in  of the drawings.",{"@attributes":{"id":"p-0040","num":"0039"},"figref":"FIG. 4","b":"400"},"According to a specific implementation, different regulation tables may be generated for handling sales or delivery of regulated products in specific regions or zones. Alternatively, a master regulation list may be generated for handling sales or deliveries or regulated products throughout all jurisdictions in which the merchant is engaging in electronic commerce transactions. Using the master regulation table, a single set of rules may be used to manage all variations of regulatory compliance in all jurisdictions of activity. Moreover, for any regulated SKU which is identified in a particular jurisdiction, the system of the present invention may reference the master restriction table in order to identify the appropriate rules(s) which apply when engaging in electronic commerce transaction activities relating to the regulated SKU.","For example, as shown in  of the drawings, the Regulation Table  includes a plurality of regulation entries (e.g., , , etc.), wherein each regulation entry includes a specific set of parameters which defines specific compliance actions which are to be automatically implemented if certain conditions or other parameters have been satisfied with respect to a particular class or sub-class of regulated product. The different parameters of the regulation table may include, for example, compliance actions based upon one or more of the following parameters: distribution center , delivery zone  or sub-zone , regulation code , Condition ID , Restriction ID , age of the customer , delivery address , day of the week , time of day , month of year, week of month, day of month, calendar date, effective data , expiration date , etc. Thus, for example, entry  of Regulation Table  relates to a compliance action which may be applied at all distribution centers in which alcohol products (e.g. SKUs associated with regulation code A) may not be sold (i.e. \u201cNo Checkout\u201d) to customers who do not meet the minimum age requirement of being at least 21 years of age. Entry  of the Regulation Table  relates to a compliance action which may be applied to all distribution centers in which tobacco products (e.g. SKUs associated with regulation code T) may not be sold (i.e. \u201cNo Checkout\u201d) to customers who do not meet the minimum age requirement of being at least 18 years of age.","It will be appreciated that the technique of the present invention may also accommodate jurisdictions having more or less stringent requirements relating to at least a portion of regulated products. For example, the city of Atlanta, Ga. prohibits the sale of alcohol on Sundays and Election Day, and also prohibits the sale of distilled spirits (e.g., alcohol products containing more than 21% alcohol by volume) by general merchants or grocery stores. The city of Atlanta also allows alcohol to be sold to persons who are at least 18 years of age. In order to comply with these legal requirements, specific entries may be included in the Regulation Table  of .","For example, entry  relates to a compliance action which may be implemented only at Atlanta distribution centers (ATL01), wherein alcohol products may not be sold to customers who are not at least 18 years of age. Entries  and  of the Regulation Table  relate to compliance actions wherein distilled spirits (e.g. SKUs associated with the regulation code AD) products are not displayed as being for sale to on-line customers whose residence address or delivery address is located in Atlanta.","Additionally, one or more entries in the Regulation Table  may include an effective date field  to allow a particular regulation entry to be entered into the table before the new regulation actually goes into effect. Further, selected regulation entries may include an expiration date field  which may be used for specifying a particular date and\/or time when the corresponding legal regulation will no longer be in effect.","In the example of , two or more conditions and\/or restrictions on separate line entries for the same regulation code may be interpreted as having an OR relationship. Two or more conditions and\/or restrictions on the same line entry for a given SKU regulation code may be interpreted as having an AND relationship. For example, entry  of Regulation Table  relates to a compliance action which may be applied at all distribution centers in which alcohol products may not be sold to customers who do not meet the minimum age requirement of being at least 21 years of age, and where the regulation becomes effective on Mar. 15, 2000.","It will be appreciated that the Regulation Table  of  illustrates a specific embodiment for handling on-line sales of regulated products. However, it will be appreciated that the technique described herein for handling on-line sales of regulated products in different jurisdictions may be implemented using a variety of different implementation techniques. For example, according to a different embodiment, a specific set of rules and\/or parameters may be used to define compliance actions in specific jurisdictions. For example, in order to prevent Sunday delivery of alcohol products for all delivery zones in the Atlanta region, the following set of rules and\/or parameters may be applied:\n\n","In order to prevent sale or delivery of alcohol to Atlanta residence on Election Day (i.e., the first Tuesday in November), the following rules and\/or parameters may be defined:\n\n",{"@attributes":{"id":"p-0049","num":"0058"},"figref":["FIG. 1","FIG. 1"],"b":["100","100","100"]},"For example, system  of  may include a Publishing (PUB) Subsystem  which provides an interface to merchants, vendors and\/or content managers ; a Webstore Subsystem (WS)  which manages the on-line store interface with customers, including customer shopping and ordering transactions; an Order Management Subsystem (OMS)  which manages pricing data, item availability data, inventory data, vendor data, finance, procurement, etc.; an Order Fulfillment Subsystem (OFS)  which facilitates the fulfillment of customer orders; etc. Each of the various subsystems shown in  of the drawings will now be described briefly below.","According to a specific implementation, the PUB Subsystem  may be used for managing SKU inventory and catalog information (e.g. SKUs, UPCs, products, categories, descriptive attributes, etc.). Additionally, according to a specific implementation, the PUB subsystem may be used for allowing merchants or vendors to enter regulatory information such as, for example, regulation code parameters for selected SKUs, condition information, restriction information, etc.","\u201cInventory\u201d is the stock of SKU items actually available for customer orders. Each different item of inventory is associated with a respective stock keeping unit or SKU, regardless of whether the item is available for customer purchase. A \u201cstock keeping unit\u201d or SKU may be defined as a unique identifier that corresponds to a particular consumer item. A type of product, for example, Brand A ketchup, may have several unique SKUs, each corresponding, for example, to different sizes and\/or flavors of Brand A ketchup.","Merchants and content managers  may enter and maintain SKU information stored in the PUB database using the PUB Web GUI interface  and PUB Bulk Loader interface . The SKU information may include SKU attribute values such as, for example, UPCs, vendors, categories, category hierarchy, images, articles, descriptive information, regulation codes, etc. The PUB Web GUI interface  allows merchants to edit SKU information, products, and\/or categories. The PUB Bulk Loader  supports the processing of data files from outside the PUB Subsystem into the PUB database . According to a specific embodiment, the PUB Bulk Loader is configured to allow merchants to upload a variety of data file types into the PUB database including flat data files, and image files. The Bulk Loader processes the flat file information to create appropriate database records for the PUB catalog.","Periodically (e.g., minutes, hours, days) the OMS polls the PUB database for new and updated SKU information, and stores the retrieved data into the OMS database . According to a specific embodiment, OMS maintains available-to-promise (ATP), price, and inventory (e.g., replenishment and purchasing) information for each SKU. OMS may also capture and\/or manage sales and shipment data relating to each SKU. Periodically, OMS passes new and updated SKU information it acquires from the PUB Subsystem to the OFS. The SKU information may be used by OFS, for example, to maintain physical inventory and fulfill orders.","According to a specific embodiment, the PUB Subsystem  may be used as an interface to allow merchants\/vendors to enter regulated merchandise processing instructions relating to specific SKUs. An examples of regulated merchandise processing instructions for selected regulated products is shown in FIGS.  and A-C of the drawings.","It will be appreciated that, in an alternate embodiment, the regulated merchandise processing instructions may be entered by merchants, vendors, or other human operators via the Webstore interface , or via other desired system interfaces. Further, according to a specific implementation, the merchant or vendor is able to add, rearrange, and remove items from the list of regulated items.","According to at least one alternate embodiment, regulated merchandise processing instructions may be generated manually or automatically using a general set of business rules and information relating to laws and regulations governing on-line sales transactions in selected states and\/or regions. A preliminary list of regulated items may also be generated in the same manner to be approved or edited by merchants. In any of these embodiments, the regulated merchandise processing instructions are typically stored in a database for retrieval at an appropriate point of use.","Webstore Subsystem (WS)","According to a specific implementation, the Webstore Subsystem (WS)  provides an interface for enabling customers to access an on-line store (e.g. Webstore), which, for example, may be used to provide a customer with an electronic representation of a retail store. In a specific embodiment where the Webstore may be implemented as a website on the World Wide Web, customers  may access the Webstore via the Internet  or World Wide Web using any one of a plurality of conventional browsers. The Webstore user interface may be designed to provide a rich set of functions without requiring any special browser plug-ins. Thus, according to a specific embodiment, customers may access the Webstore using any client machine, regardless of the machine's operating system platform. Additionally, for security purposes, the Webstore interface also supports data encryption for exchange of any sensitive or private information between the customers and the website. According to a specific embodiment, the secure Webstore interface may be implemented using a secure http protocol (HTTPS), commonly known to those of ordinary skill in the art.","In accordance with a specific embodiment, the Webstore Subsystem  may be configured to support a number of customer related features such as, for example, self registration; accessing of customer account information; browsing of product categories and category hierarchy; viewing of product images and product information; keyword searches; delivery scheduling; accessing of customer order history; customizable shopping lists; on-line shopping and ordering; etc.","The Webstore Subsystem (herein referred to as the Webstore) may be implemented using at least one server which is connected to the data network. According to a specific embodiment, the Webstore may be implemented using a plurality of web servers (e.g. a load-balanced web server farm) which helps to minimize server response time and provide real-time failover and redundancy capabilities. Further, according to a specific embodiment, in order to keep the web server response time to a minimum, the Webstore may be configured such that all processing is performed on a single server, within one process. Where a plurality of Webstore servers are used, redundant processing may be performed by at least a portion of the servers so that a single Webstore server may handle all Webstore processing tasks associated with a particular on-line customer. It will be appreciated that the Webstore server boundaries may be crossed where appropriate, such as, for example, when accessing desired databases via the data network.","Order Management Subsystem (OMS)","The Order Management Subsystem (OMS)  manages a variety of aspects related to the integrated system architecture of system , including, for example, pricing, availability, inventory, vendors, financials, procurement, and data flows between various subsystems.","As shown in , the OMS subsystem  includes at least one database  for storing various data received from at least a portion of the other subsystems. According to a specific embodiment, the database  is configured to include a plurality of schemas, such as, for example, standard packaged application schemas and\/or customized schemas. According to a specific implementation, the OMS database is configured as a single Oracle database running on a Sun Solaris server.","According to a specific implementation, OMS batch processing may be controlled using a process scheduler. The process scheduler is able to manage the number of concurrent processes being run and the date\/time at which certain processes are to run or be executed. The process scheduler may also enable central visibility of all processes currently running. Batch processing and reporting may be accomplished using a variety of different technologies commonly known to one having ordinary skill in the art.","The Order Management Subsystem may be configured to support both asynchronous and synchronous interfaces with the other subsystems. In a specific embodiment, the OMS is configured to support an asynchronous interface with each of the other subsystems. Additionally, each OMS interface is configurable, and may be configured to support the running of batch processes as often as is desirable.","Implementation of the various interfaces between OMS and the other subsystems may be accomplished using a variety of different techniques commonly known to one having ordinary skill in the art. The following description provides an example of at least some of the various techniques which may be used for interfacing OMS with the other subsystems. However, it will be appreciated that the specific interfaces described below may be implemented using other techniques commonly known to those of ordinary skill in the art.","The interface between the OMS and the Webstore Subsystem may be implemented, for example, using a plurality of executable programs. A first portion of the executable programs may be responsible for moving data from the Webstore to the OMS. This data may include, for example, new\/updated customer data, new\/updated order data, order cutoff information, order billing information, customer return information, customer credits and fees (e.g. bill adjustment data), etc. A second portion of the executable programs is responsible for moving data from the OMS to the Webstore Subsystem. This data may include, for example, inventory data, availability data, pricing data, and information about shipped customer orders.","Order Fulfillment Subsystem (OFS)","The Order Fulfillment Subsystem  manages all functionality of the distribution center (DC). In the embodiment of , the OFS includes appropriate hardware and\/or software for managing the DC, including, for example, a warehouse management system (e.g. application software), at least one database , an optional automated material handling (AMH) controller component , if desired (which manages conveyor, carousel, and scanner components), etc.","In a specific implementation, the Order Fulfillment Subsystem  may be implemented using a warehouse management system such as, for example, the MOVE warehouse management system provided by Optum, Inc. of Costa Mesa, Calif. The warehouse system also provides an interface with the Order Management Subsystem. In a specific embodiment, this interface may be implemented using a business host interface (BHI). The warehouse management subsystem may also provide the interface for allowing the OMS subsystem to communicate with the OFS database .","The description is only a partial description of an architecture that is suitable for practicing the current invention, with emphasis on the subsystems that are most directly involved in the Regulated SKU Processing Procedure of the present invention. For a more complete description of such an architecture, see U.S. patent application Ser. No. 09\/568,603.","It will be appreciated that other embodiments of the system of  may be used for implementing the technique of the present invention. For example, entire subsystems or selected features or components of the WS Subsystem , OMS Subsystem , PUB Subsystem , and\/or OFS Subsystem  may be eliminated (if desired) or incorporated into other subsystems of the system of . Such modifications will be apparent to one having ordinary skill in the art. In a specific embodiment, it is preferable that the system  include at least a Webstore Subsystem (for receiving customer orders and maintaining inventory records), and an Order Fulfillment Subsystem (for fulfilling customer orders).",{"@attributes":{"id":"p-0071","num":"0080"},"figref":["FIG. 2","FIG. 2"],"b":"200"},"At , a customer enters his or her customer order via the Webstore  interface (described above). According to a specific embodiment, a \u201ccustomer order\u201d includes a list of SKU items that have been ordered, their associated quantities, and other relevant information (e.g., payment information, delivery time information, etc.)","The customer order may include one or more \u201cline item orders,\u201d where each line item order corresponds to a particular SKU and includes a desired quantity of the ordered SKU.","According to a specific embodiment, during the customer ordering process, customers will be provided information relating to availability of items. For example, customers may be provided with information relating to particular items which will not be available for delivery at the delivery window selected by the customer.","Returning to , at a designated time after a customer order has been placed, a \u201ccutoff\u201d time occurs (), at which point the customer is no longer able to modify the order. The customer order is then sent along with other \u201ccutoff\u201d customer orders to be processed (). The processing of a customer order is generally described in U.S. patent application Ser. No. 09\/568,603, previously incorporated herein by reference. In one implementation, order processing may be implemented at the Webstore Subsystem . In alternate embodiments, the order processing may be implemented at any desired subsystem which has been configured to handle the various tasks associated with the processing of customer orders. After the customer order has been processed, the customer order is then fulfilled () by obtaining the appropriate items from a warehouse, distribution center, or other locations. Once the order has been fulfilled, it may then be delivered () to the customer.","According to different embodiments of the present invention, there are a variety of techniques which may be used to help prevent the sale of restricted products to on-line customers which would violate legal regulations in various jurisdictions. For example, one technique for preventing illegal sales of restricted products is to prevent the restricted products from being displayed to the customers during the on-line customer shopping session. Another technique is to not allow the regulated item to be added to the customer's electronic shopping cart. A further example is to not permit the regulated item to be checked out of the customer's electronic shopping cart. Yet another example is to prevent delivery of the regulated item to the customer. Several of these examples are described in greater detail below with respect to , B, , and  of the drawings.",{"@attributes":{"id":"p-0077","num":"0086"},"figref":["FIG. 3A","FIG. 1"],"b":["300","300","300","130"]},"Initially, as shown at  of , a customer may access the on-line merchant's electronic commerce system in order to initiate a shopping session. According to a specific implementation, as shown in , for example, the customer may access the Webstore  for initiating an on-line shopping session.","Once the customer has initiated a shopping session with the on-line merchant's electronic commerce system, the customer may begin to shop by browsing the on-line merchant's catalog and adding items to the customer's electronic shopping cart. According to a specific implementation, the customer may schedule () a specific delivery window (e.g. specifying a particular date and time) for receiving delivery of the customer order. For example, the on-line merchant Webvan.com requires that customers select a delivery window for each customer order that is placed with the on-line system. Once the customer order has been fulfilled, it will subsequently be delivered to the customer at the time and date specified by the selected delivery window. At the time of delivery, the customer may be asked to provide a signature for proof of receipt of the customer order. According to some jurisdictions, the sale of a product is considered to occur at the time that the product is actually delivered to the customer. Accordingly, it will be appreciated that, according to specific embodiments, the delivery window may determine whether the sale of a particular restricted product is permitted.","According to a specific embodiment, each customer delivery address may be geocoded or mapped to a respective area, zone, and\/or subzone, which, according to a specific implementation, are not based upon the zip code of the delivery address. This mapping technique is advantageous since municipal regulations frequently define regulated regions of commerce by area, zone, or subzone (e.g. \u201cdry zones\u201d where the sale of alcohol is prohibited). Moreover, such regulated regions may bisect one or more zip code regions. Accordingly, using the customer delivery address geocoding technique of the present invention, delivery zones or subzones may be defined which map directly to a municipally regulated zone or subzones. Thus, for example, if a municipally regulated \u201cdry zone\u201d is mandated which bisects one or more zip code regions, a delivery zone may be defined to correspond to the mandated dry zone boundaries, regardless of zip code boundaries. Regulated product(s) may then be prevented from being sold or delivered to customers whose delivery address is within this \u201cdry\u201d delivery zone.","According to a specific embodiment, after the customer selects or schedules a delivery window for delivery of the customer order, the customer's electronic shopping cart may be examined to determine () whether the customer's electronic shopping cart includes any items. According to a specific embodiment, if it is determined that the customer cart is not empty, an Item Restriction Analysis Procedure may be executed () in order to remove any regulated items selected by the customer which are not available to be delivered at the specified delivery window. An example of an Item Restriction Analysis Procedure is shown in  of the drawings.","During the Item Restriction Analysis Procedure, a first item from the customer's scheduled shopping cart is selected (). The selected item is then analyzed () in order to determine whether the selected item corresponds to a regulated item which is not allowed to be delivered at the designated delivery window. In performing this determination, a regulation code associated with the selected item or SKU may be identified. A regulation table (e.g. Regulation Table ) may then be consulted to determine whether the sale or delivery of the identified, regulated SKU is permissible. If it is determined that the selected item is not allowed to be sold or delivered to the customer at the designated delivery window, a selected item may be removed () from the customer's scheduled shopping cart and placed into an unscheduled shopping cart. If, however, it is determined that the selected item is allowed to be sold and delivered to the customer at the designated delivery window, no further action is taken regarding the selected item. Once the Item Restriction Analysis Procedure has been performed for the selected item, a determination may then be made () as to whether there are additional items in the customer's scheduled shopping cart. If so, a next item from the scheduled shopping cart is selected for analysis. This process may continue until each of the items in the customer's scheduled shopping cart have been analyzed by the Item Restriction Analysis Procedure.","Returning to , once the Item Restriction Analysis Procedure has performed an analysis on the items in the customer's scheduled shopping cart, a determination may then be made () as to whether the customer's scheduled shopping cart is empty. If so, the customer may be advised () that no items are available to be delivered at the selected delivery window. According to a specific implementation, the customer may then be provided with the opportunity to select an alternate delivery window.","According to an alternate embodiment, the customer may not be required to select a delivery window. For example, many on-line merchants such as, for example, Amazon.com, do not require the customer to select a delivery window for receipt of the customer order. Rather, the on-line merchant allows the customer to purchase products via the Internet. The purchased items are then packaged and shipped to the customer via common carrier. Typically, the customer is charged for the purchase of the goods at the time that the order is shipped to the customer.","One technique for handling on-line sales of regulated products is to dynamically modify the display of products which are available to be sold\/delivered to each customer. This is shown, for example, at events  and  of .","During the customer's on-line shopping session, the customer may request () display of selected items available for purchase by the on-line merchant. According to a specific implementation, the display of items available for purchase by the customer may be modified () based upon predetermined rules such as, for example, the regulation criteria defined in one or more regulation lists. The modification of the product display may be based upon a number of different factors such as, for example, the customer's delivery address, the customer's age, the customer's residence address, the date\/time of delivery (if any), etc. According to one embodiment, the products which are not allowed to be sold or delivered to a specific customer may be hidden or otherwise prevented from being displayed to that customer. Alternatively, the regulated items may be displayed to the customer, but the customer will not be allowed to add the regulated item to the customer's electronic shopping cart.","Another technique for handling on-line sales of regulated items is to screen for regulated items as the customer selects each item to add to his or her electronic shopping cart. This is generally shown by events, for example, - of .","Initially, the customer may select a particular item, and submit a request to add () the selected item to the customer's shopping cart. An analysis may then be conducted () in order to determine whether the selected item is allowed to be sold and delivered to the customer (at a specified delivery window, if any). In performing this determination, a regulation code associated with the selected item or SKU may be identified. A regulation table (e.g. Regulation Table ) may then be consulted to determine whether the sale or delivery of the identified, regulated SKU is permissible.","If it is determined that the selected item is not allowed to be sold and delivered to the customer, the customer may be advised () that the selected item is not available to be added to the customer's electronic shopping cart. Additionally, according to a specific implementation, the regulated item may be placed () into an unscheduled shopping cart for the customer. If, on the other hand, it is determined that the selected item is allowed to be sold and delivered to the customer, the selected item may then be added to the customer's electronic shopping cart. Thereafter, the customer may continue with his or her on-line shopping session or may request to proceed to checkout.","According to a specific embodiment, another approach for handling on-line sales of regulated products is to screen the customer's electronic shopping cart for regulated items during checkout. This technique is generally described, for example, by events - of .","Referring to , at some point during the on-line shopping session, the customer may request to proceed to checkout in order to purchase the goods in the customer's electronic shopping cart. If, according to one embodiment, precautions have already been implemented for preventing inappropriate regulated items from being placed into the customer's scheduled shopping cart, then the checkout operation may proceed normally, whereby items in the customer's scheduled shopping cart may be check out () for purchase by the customer. If, according to a specific embodiment, selected regulated items have previously been placed into an unscheduled shopping cart for the customer, a determination may then be made () as to whether any items exist in the customer's unscheduled shopping cart. If so, the customer may be advised () of the existence of the unscheduled shopping cart. Thereafter, the customer may then choose to continue shopping using the customer's unscheduled shopping cart.","Alternate embodiments of the Regulated SKU Processing Procedure are shown in  of the drawings. In each of these embodiments, on-line sales of regulated SKU items may be handled during the customer checkout operation, where upon the content of the customer's shopping cart may be screened for regulated items which are not allowed to be sold\/delivered to the customer.","As shown in the embodiment of , once the customer has requested () checkout, an Item Restriction Analysis Procedure may be executed () for analyzing the contents of the customer's shopping cart. An example of an Item Restriction Analysis Procedure is shown in , described previously. In the example of , the Item Restriction Analysis Procedure will remove regulated items from the customer's current shopping cart which are not allowed to be sold or delivered to the customer, and may place the removed items into a new shopping cart. At  a determination is made as to whether there are any remaining items to be checked out of the customer's current shopping cart after having executed the Item Restriction Analysis Procedure. If so, flow may then commence starting at point B of . If, however, it is determined that there are no current items to be checked out from the customer's shopping cart, the customer may be advised () that there are no items available to be delivered or sold to the customer. The customer may also be advised as to the reason why the regulated items are unavailable. Thereafter, flow may then continue at point A of .","As shown in the embodiment of , once the customer has requested () checkout, a determination is then made () as to whether there are any regulated items identified in the customer's shopping cart which are not allowed to be sold or delivered to the customer, based upon predetermined criteria such as that shown, for example, in . If so, the customer may be requested () to remove the identified regulated items from the customer's electronic shopping cart. After all of the identified regulated items have been removed from the customer's electronic shopping cart, flow may then continue at point B of .","Another technique for preventing illegal sales of restricted products is to prevent delivery of the regulated item to the customer. According to a specific embodiment, delivery couriers (, ) may be notified that a particular shipment contains one or more regulated items. A delivery courier may then be required to verify specific information (e.g. proof of age of the customer) before delivering the regulated item(s) to the customer. According to a specific implementation, the delivery restrictions may be provided to the delivery courier via the use of a mobile field device (MFD) . A mobile field device (MFD) may be configured to download and\/or upload various types of information, including, for example, customer order history information, delivery information (e.g. vehicle delivery routes, stops, etc.), customer returns information, credits, adjustments, regulated delivery information, etc.","Other Embodiments","Generally, the regulated item processing techniques of the present invention may be implemented on software and\/or hardware. For example, they can be implemented in a separate user process, in a library package bound into network applications, on a specially constructed machine, etc. In a specific embodiment of this invention, the technique of the present invention is implemented in software such as an application running on an operating system.","A software or software\/hardware hybrid implementation of the regulated item processing technique of this invention may be implemented on a general-purpose programmable machine selectively activated or reconfigured by a computer program stored in memory. Such programmable machine may be a network device designed to handle network traffic, such as, for example, a router or a switch. Such network devices may have multiple network interfaces including frame relay and ISDN interfaces, for example. Specific examples of such network devices include routers and switches. A general architecture for some of these machines will appear from the description given below. In an alternative embodiment, the regulated item processing technique of this invention may be implemented on a general-purpose network host machine such as a personal computer or workstation. Further, the invention may be at least partially implemented on a card (e.g., an interface card) for a network device or a general-purpose computing device.","Referring now to , a network device  suitable for implementing the regulated item processing techniques of the present invention includes a master central processing unit (CPU) , interfaces , and a bus  (e.g., a PCI bus). When acting under the control of appropriate software or firmware, the CPU  may be responsible for implementing specific functions associated with the functions of a desired network device. For example, when configured to perform the functions of a server system adapted to implement electronic commerce transactions, the CPU  may be responsible for analyzing packets, encapsulating packets, forwarding packets to appropriate network devices, identifying regulated items or SKUs, identifying legal requirements or conditions which require compliance action to be taken with regard to the sale of regulated products, determining appropriate compliance actions to be implemented for identified regulated items, etc. The CPU  preferably accomplishes all these functions under the control of software including an operating system (e.g. Windows NT), and any appropriate applications software.","CPU  may include one or more processors  such as a processor from the Motorola family of microprocessors or the MIPS family of microprocessors. In an alternative embodiment, processor  is specially designed hardware for controlling the operations of network device . In a specific embodiment, a memory  (such as non-volatile RAM and\/or ROM) also forms part of CPU . However, there are many different ways in which memory could be coupled to the system. Memory block  may be used for a variety of purposes such as, for example, caching and\/or storing data, programming instructions, etc.","The interfaces  are typically provided as interface cards (sometimes referred to as \u201cline cards\u201d). Generally, they control the sending and receiving of data packets over the network and sometimes support other peripherals used with the network device . Among the interfaces that may be provided are Ethernet interfaces, frame relay interfaces, cable interfaces, DSL interfaces, token ring interfaces, and the like. In addition, various very high-speed interfaces may be provided such as fast Ethernet interfaces, Gigabit Ethernet interfaces, ATM interfaces, HSSI interfaces, POS interfaces, FDDI interfaces and the like. Generally, these interfaces may include ports appropriate for communication with the appropriate media. In some cases, they may also include an independent processor and, in some instances, volatile RAM. The independent processors may control such communications intensive tasks as packet switching, media control and management. By providing separate processors for the communications intensive tasks, these interfaces allow the master microprocessor  to efficiently perform routing computations, network diagnostics, security functions, etc.","Although the system shown in  illustrates one specific network device of the present invention, it is by no means the only network device architecture on which the present invention can be implemented. For example, an architecture having a single processor that handles communications as well as routing computations, etc. is often used. Further, other types of interfaces and media could also be used with the network device.","Regardless of network device's configuration, it may employ one or more memories or memory modules (such as, for example, memory block ) configured to store data, program instructions for the general-purpose network operations and\/or other information relating to the functionality of the regulated item processing techniques described herein. The program instructions may control the operation of an operating system and\/or one or more applications, for example. The memory or memories may also be configured to include data structures which store regulation code information, Condition ID information, Restriction ID information, regulation information, etc.","Because such information and program instructions may be employed to implement the systems\/methods described herein, the present invention relates to machine readable media that include program instructions, state information, etc. for performing various operations described herein. Examples of machine-readable media include, but are not limited to, magnetic media such as hard disks, floppy disks, and magnetic tape; optical media such as CD-ROM disks; magneto-optical media such as floptical disks; and hardware devices that are specially configured to store and perform program instructions, such as read-only memory devices (ROM) and random access memory (RAM). Examples of program instructions include both machine code, such as produced by a compiler, and files containing higher level code that may be executed by the computer using an interpreter.","Although several preferred embodiments of this invention have been described in detail herein with reference to the accompanying drawings, it is to be understood that the invention is not limited to these precise embodiments, and that various changes and modifications may be effected therein by one skilled in the art without departing from the scope of spirit of the invention as defined in the appended claims."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 3A"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 3B"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIGS. 5 and 6"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIGS. 7A-7C"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 8"}]},"DETDESC":[{},{}]}
