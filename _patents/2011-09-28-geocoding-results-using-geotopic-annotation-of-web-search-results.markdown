---
title: Geocoding results using geotopic annotation of web search results
abstract: Embodiments disclosed herein generally disclose how to provide geocoding results in response to location search queries. A geographical information system receives a search query for a map feature and identifies both web search results and geocoding results that are associated with the search query. The geographical information system determines which geocoding result to return based on the identified web search results.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08538956&OS=08538956&RS=08538956
owner: Google Inc.
number: 08538956
owner_city: Mountain View
owner_country: US
publication_date: 20110928
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["TECHNICAL FIELD","BACKGROUND","SUMMARY","DETAILED DESCRIPTION","System Overview"],"p":["The embodiments disclosed herein generally relate to providing geocoding results. More particularly, the embodiments herein relate to providing geocoding results that have been ranked based on geotopic annotations of web search results associated with a search query.","Conventional map systems provide online maps to users in response to queries for the maps. Conventional map systems rely on the completeness of an address included in the search query to provide the appropriate online map to fulfill the query. However, users often provide partial addresses in search queries resulting in incorrect search results. For example, a search query from a user may include a partial address including only a street number and street name in the search query. Because the partial address may correspond to multiple geographic locations, conventional map systems may provide to the user the wrong online map to fulfill the search query.","The embodiments herein generally describe mechanisms for performing location search queries and providing corresponding geocoding results to fulfill the queries. In one embodiment, a location search query comprises one or more terms that specify a geographical location of interest, such as a street address or a name of the geographical location of interest, for example. The process of identifying geocoding results in response to location search queries is generally referred to as geocoding. In one embodiment, a geocoding result comprises an online map of a geographical location represented by the geocoding result.","Generally, a geographical information system identifies both a set of web search results and a set of geocoding results in response to a location search query. Because the geographical information system allows for ambiguity in the format of the location search query, multiple geocoding results may be identified that match a search query. For example, a location search query may include a partial street address resulting in the identification of multiple geocoding results that match the partial street address. The geographical information system utilizes the web search results to assist in the identification of a geocoding result from the set of geocoding results to provide to a user that submitted the location search query.","In one embodiment, the geographical information system uses geotopics that are annotated to the web search results to identify which of the geocoding results to provide to the user. In one embodiment, a geotopic describes a geographical location that is associated with the web result. Thus, the web search results allow the geographical information system to identify the most likely geocoding result that the user intended to specify in the search query.","For each web result, the geographical information system identifies a set of previously determined geotopics that are associated with the web result if any. The geographical information system also identifies a measure of relatedness between each web result and each of its associated geotopics. The measure of relatedness describes the likelihood that the content of the document represented by the web result is associated with the geographic location represented by the geotopic.","In one embodiment, for each geocoding result, the geographical information system calculates a measure of relatedness between the geocoding result and the location search query. The measure of relatedness between the geocoding result and the location search query describes the likelihood that the geocoding result represents the geographical location of interest that the user intended to search for using the location search query. Additionally, the geographical information system may calculate a measure of similarity between each geocoding result and each geotopic included in the set of web search results. The measure of similarity between each geocoding result and each geotopic describes the similarity of the geographical location associated with the geocoding result and the geographic location represented by the geotopic. That is, the measure of similarity describes whether the geographical location corresponding to the geocoding result matches the geographical location corresponding to the geotopic.","In one embodiment, the geographical information system may also calculate a weight for the measure of relatedness between the geocoding result and the location search query. The weight describes how many web search results are associated with each geocoding result. The weight may be based on the measure of relatedness between each web result and each of its associated geotopics and the measure of similarity between each geocoding result and each geotopic.","The geographical information system ranks (or re-ranks) the set of geocoding results based on the weighted measures of relatedness between each geocoding result and the search query. The geographical information system provides an online map of a geocoding result from the ranked set of geocoding results. In one embodiment, an online map of the highest ranked geocoding result is provided to the client that submitted the request.","The features and advantages described in this summary and the following detailed description are not intended to be limiting. Many additional features and advantages will be apparent to one of ordinary skill in the art in view of the drawings, specification and claims.","The figures depict, and the detail description describes, various non-limiting embodiments for purposes of illustration only. One skilled in the art will readily recognize from the following discussion that alternative embodiments of the structures and methods illustrated herein may be employed without departing from the principles described herein.",{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 1","b":"100"},"In one embodiment, a location search query includes an address associated with a map feature. The address may be a partial address because the address does not include all the possible address components of a complete address. For example, a complete address may include values for the following address components such as a street number, street name, neighborhood, district, zip code, city, state, province, and country. Thus, a partial address includes some but not all of the address components above. For example, the search query may merely include a street number and street name. In another example, the search query may include a name of a point of interest such as \u201cUnion Square\u201d which is ambiguous because there are multiple geographic locations which are associated with the name \u201cUnion Square.\u201d","Because the geographical information system  may identify multiple geocoding results in response to a location search query with a partial address, the geographical information system  determines which of the geocoding results to provide to the user that submitted the query. In one embodiment, the geographical information system  identifies web search results associated with the search query, and uses those web search results to infer a geographical location that the user most likely intended to search for in the query. The geographical information system  provides a geocoding result associated with the inferred geographical location to the user to fulfill the query.","As shown in the embodiment of , the geographical information system  includes a front end interface , a web search module , a geocoding search module , a scoring module , a map module , a map database , and a web database . Each of these modules and databases is described in further detail below. Many conventional features, such as firewalls, load balancers, application servers, failover servers, site management tools and so forth are not shown so as not to obscure the features of the system.","In one embodiment, a suitable website for implementation of the geographical information system  is the GOOGLE\u2122 Maps website, found at maps.google.com. Other map sites are known as well, and can be adapted to operate according to the teaching disclosed herein. The term \u201cwebsite\u201d represents any computer system adapted to serve content using any networking protocol, and is not intended to be limited to content uploaded or downloaded via the Internet or the HTTP protocol. In general, functions described in one embodiment as being performed on the server side can also be performed on the client side in other embodiments. In addition, the functionality attributed to a particular component can be performed by different or multiple components operating together. Likewise, the functionality attributed to different or multiple components can be combined to be performed by fewer or even a single component.","In one embodiment, the geographical information system  is implemented as server program executing on server-class computer comprising a CPU, memory, network interface, peripheral interfaces, and other well known components. In one embodiment, the computers themselves run an operating system such as LINUX, Microsoft Windows, or Mac OS X, have generally high performance CPUs, 2G or more of memory, and 1 TB or more of disk storage. Of course, other types of computers can be used, and it is expected that as more powerful computers are developed in the future, they can be configured in accordance with the teachings here. The functionality implemented by any of the elements can be provided by computer program products (e.g., as computer executable instructions) that are stored in non-transitory computer-readable storage mediums (e.g., RAM, hard disk, or optical\/magnetic media). It will be appreciated that the data processing methods and processes described and claimed herein require the use of a computer, and cannot be performed as purely mental steps.","In one embodiment, and as shown in , a client  executing an application  connects to the geographical information system  to allow a user to view online maps provided by the geographical information system . The client  may connect to the geographical information system  via a network  such as the Internet or any combination of a LAN, a MAN, a WAN, a mobile, wired or wireless network, a private network, or a virtual private network. While only a single client  is shown in , in general very large numbers (e.g., millions) of clients  are supported and can be in communication with the geographical information system  at any time. In one embodiment, the client  can be implemented using any of a variety of different computing devices, some examples of which are personal computers, digital assistants, personal digital assistants, cellular phones, mobile phones, smart phones and laptop computers.","The application  is any application that allows users of clients  to access content, such as web pages, via the Internet. Suitable applications  include, but are not limited to web browsers such GOOGLE CHROME, MICROSOFT INTERNET EXPLORER, NETSCAPE NAVIGATOR, MOZILLA FIREFOX, and APPLE SAFARI. The application  may also be a dedicated application that provides online maps, such as map reader, navigation application, check-in application, recommendations application, or the like. The application  allows the user of client  to access websites comprising online maps provided by the geographical information system  via a user interface provided by the front end interface . Through the interface , a user can view online maps provided by the geographical information system .","Geographical Information System","As shown in , the geographical information system  comprises a map database . The map database  stores map information associated with map features that are displayed on digital or online maps, and is one means for performing this function. The map information defines parameters used to render map features for online maps as well as information associated with the map features. In one embodiment, a map feature represents a real world object that can be represented on an online map such as geographical locations associated with street addresses, cities, neighborhoods, buildings, points of interests, countries, provinces, islands, states, bodies of water, natural features (e.g., mountain ranges), etc. Each map feature is assigned a unique identification (ID) in the map database  to distinguish the map features from one another. In one embodiment, a map feature is associated with an address that represents the geographical location of the map feature, geospatial identifiers (e.g., latitude and longitude coordinates) associated with the map feature, and\/or a name of the map feature. For some map features, the address may also function as the name for the map feature.","The map module  is any web-based application known in the art that provides online or digital maps and information about map features to users. Exemplary web-based applications include GOOGLE Maps and GOOGLE Earth. The map module  utilizes the map information in the map database  to generate two-dimensional and\/or three-dimensional digital maps and populate the maps with map features. The map module  may construct an online map on the fly based on map tiles (e.g., images) corresponding to the map information in the map database  and transmit the online map to the client . Alternatively, rather than constructing the online map at the geographical information system , the map module  may transmit a map image and map information associated with the search query to the client  which constructs the online map on the fly (i.e., real time) for the user that provided the query.","The geographical information system  also comprises a web database . The web database  includes an index of documents. In the context of this description, \u201cdocuments\u201d are understood to be any type of media that can be indexed and retrieved by the geographical information system  or an affiliated web search engine or web crawling system, including web documents, images, multimedia files, text documents, PDFs or other image formatted files, and so forth. A document may have one or more pages, partitions, segments or other components, as appropriate to its content and type. Equivalently a document may be referred to as a \u201cpage,\u201d as commonly used to refer to documents on the Internet. No limitation as to the scope of the description is implied by the use of the generic term \u201cdocuments.\u201d Each document has an associated identifier that uniquely identifies the document; the identifier is preferably a uniform resource locator (URL), but other types of identifiers (e.g., document numbers) may be used as well. In this disclosure, the use of URLs to identify documents is assumed.","One or more documents in the web database  can be associated with metadata that describes the content of the document. In one embodiment, metadata for a document comprises a set of geotopics gthat are associated with the document and geospatial identifiers (e.g., latitude and longitude coordinates) that are associated with each geotopic g, where k references a particular geotopic. A geotopic gdescribes a geographic location that is associated with the document. Each geotopic gmay be assigned a unique ID that distinguishes the geotopic gfrom other geotopics. Thus, the web database  maintains a list of geotopics (i.e., geographic locations) and their associated ID, and a list of annotated documents that are associated with one or more geotopics. In one embodiment, the unique IDs included in the list of geotopics correspond to the unique IDs of the map features in the map database . Thus, each geotopic corresponds to a map feature.","The geographical information system  identifies particular geotopics gin a document based on the list of geotopics. Generally, the geographical information system  identifies any text in a document that matches a geotopic in the list of geotopics using the geocoding search module . Specifically, a geotopic gfor a document may be identified from the content of the document itself such as in the title of the document, in the text body of the document, or from audiovisual content included in the document. For example, a document describing a review of a restaurant in San Francisco, Calif. may be associated with a set of geotopics. The set of geotopics may include the geotopics \u201cSan Francisco,\u201d \u201cCalifornia,\u201d and \u201cSan Francisco, Calif.\u201d based on the address of the restaurant as described in the document. Additionally, the set of geotopics for the document may include the geotopics \u201cChicago,\u201d \u201cIllinois,\u201d and \u201cChicago, Ill.\u201d because the document compares the restaurant located in San Francisco to another restaurant located in Chicago.","In one embodiment, each geotopic gassociated with a document is assigned a geotopic score gs. The geotopic score gsis a measure of relatedness between the geotopic gand the document. That is, the geotopic score gsdescribes the likelihood that the content of the document pertains to the geographic location represented by the geotopic g.","In one embodiment, a geotopic score gfor a geotopic gis assigned a higher value if it appears in particular locations or areas of the document. That is, different areas (e.g., title, main text, and tags) may be associated with different weights to determine the geotopic score gfor a geotopic g. For example, if the geotopic gappears in the title of the document, the geotopic score gmay be assigned a higher value than another geotopic gthat appeared at the end of the document or in a footnote of the document.","In one embodiment, the geotopic score gfor a geotopic gthat appears in the title of the document may be inversely proportional to the quantity (i.e., number) of other geographic locations that are referenced by other geotopics that are also included in the title. If a single geotopic gis referenced in the title of the document, the geotopic score gmay be higher than the geotopic scores gfor multiple geotopics that appear in a title of another document.","In one embodiment, a geotopic gthat appears near the start or beginning of a document (e.g., within a threshold quantity of words of the document or within a threshold quantity of pixels at the top of the document) are considered \u201cleading geotopics.\u201d A leading geotopic may provide a reliable indication of the geographic location to which the document is relevant. Thus, a geotopic gthat is a leading geotopic may be assigned a higher weight than geotopics that appear later in the document (e.g., outside of the threshold quantity of words or outside of the threshold quantity of pixels).","For example, a geotopic gthat is in the first sentence of the first paragraph of a document may be assigned a higher geotopic score gthan a geotopic gthat is included in the second paragraph of the document. In another example, a document representing a news article may include a byline location comprising a geotopic gthat represents where the news article was filed and\/or written. This geotopic gmay be assigned a higher geotopic score gthan geotopics that appear later in the news article because the location listed in the byline is often the geographic location where events reported in the news article occurred. Therefore, the geotopic gincluded in the byline may be a reliable indication of a geographic location to which the news article is relevant.","Some documents may include tags, which are presented to the user or stored in metadata for the documents. These tags are used by an author of the document to facilitate indexing and discovery of the document. Therefore, geotopics that are included in the tags of the document can be a reliable indicator of geographic locations to which the document is relevant. Thus, a geotopic gthat appears in a tag may be assigned a higher weight than another geotopic gthat appears in the body of the document.","In another embodiment, geotopics may be assigned to a class of geotopics referred to as \u201cqualified geotopics\u201d which describe the relatedness of geotopics in the document. A qualified geotopic is a geotopic gthat is created as a result of the merger of two individual geotopics. For example, a geotopic \u201cCleveland\u201d and a geotopic \u201cOhio\u201d may be combined to create the qualified geotopic \u201cCleveland, Ohio.\u201d Qualified geotopics generally include individual geotopics that are located adjacent to each other and\/or appear in a specific sequence. Qualified geotopics can also be created from geotopics that are not adjacent to each other or in a specified sequence but are semantically related to one another. For example, if the \u201cSpringfield\u201d geotopic and \u201cOhio\u201d geotopic both appear in the document and no other states containing Springfield (e.g., Missouri or Illinois) appear on the document, the geotopics \u201cSpringfield\u201d and \u201cOhio\u201d can be combined to make the terms less ambiguous. In one embodiment, qualified geotopics are assigned a higher geotopic score gthan non-qualified (unqualified) geotopics.","In one embodiment, a parental support for a geographical location is used to increase the geotopic scores of geotopics associated with the geographical location. The parental support may describe a measure of the geotopics that are in child categories of a parent category. For example, a document comprising two geotopics that identify Erie, Pa., but Erie has a parental support of 80% for Pennsylvania (i.e., four of five geotopics are assigned to or resolve to Pennsylvania) and 100% parental support for USA (all five geotopics resolve to USA) for an average parental support of 90% for the geotopics.","In one embodiment, the geotopic score gsfor a geotopic gis based on a plurality of weights and an initial geotopic score igs. The factors and weights used to calculate the initial geotopic score igscomprise one or more of the following:\n\n","The relationship of the weights and factors to each other in an exemplary embodiment is represented by the following equation:\n\n=[1+max(TS\u00b7TBW,Q\u00b7LGW)]\u00b7(1+QGW+TG)+(TC\u00b7GPSW)\n","In one embodiment, the following weights may be used to calculate the initial geotopic score igsfor a geotopic gas shown below.",{"@attributes":{"id":"p-0040","num":"0047"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":"TABLE 2"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Example Weights"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"119pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"70pt","align":"center"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Weight","Value"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"119pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"70pt","align":"char","char":"."}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Title boost weight TBW","1.2"]},{"entry":[{},"Leading geotopic weight LGW","1.1"]},{"entry":[{},"Qualified geotopic weight QGW","1.1"]},{"entry":[{},"Tag weight TG","1.05"]},{"entry":[{},"Geotopic parental support weight GPSW","1.05"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}]}}},"In one embodiment, the weights may be determined, for example, based on a statistical analysis of search logs (i.e., logs that specify search results that were selected by users that submitted search queries) to estimate likelihoods that documents including particular geotopics are relevant to the geographical locations associated with the geotopics. The likelihoods can be used to select weights based on (e.g., proportional to) to the likelihoods.","In one embodiment, the geotopic score gsfor a geotopic gis calculated based on the initial geotopic score igsfor the geotopic gand the initial geotopic score igsfor other geotopics gthat are included in the document from which geotopic gis identified. The relationship of these factors to each other in an exemplary embodiment is represented by the following equation:",{"@attributes":{"id":"p-0043","num":"0050"},"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":["gs","k"]},"mo":"=","mfrac":{"msub":{"mi":["igs","k"]},"mrow":{"mi":"sum","mo":"\u2061","mrow":{"mo":["(",")"],"msub":{"mi":["igs","j"]}}}}}}}},"Thus, the geotopic score gsfor each geotopic gis computed by normalizing the initial geotopic score igsfor the geotopic gusing the sum of the initial geotopic scores igsof geotopics gsthat are also included in the document from which geotopic score gsis identified.","Table 1 below, illustrates one example of three document entries in the web database  and how these documents would be coded to represent the associated geotopics g. Although only three documents are illustrated, it is understood that the web database  may store entries for any number of documents. Each row of the table indicates a record for a document entry. Each record includes a document identification (ID) associated with the record, a URL that links to the document, a collection of geotopics (if any) that are associated with the document, a geospatial identifier associated with each geotopic, and a geotopic score gsassociated with each geotopic g. As shown below, documents 1 and 2 are associated with a set of geotopics whereas document 3 is not associated with a set of geotopics.",{"@attributes":{"id":"p-0046","num":"0053"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"center"}},"thead":{"row":{"entry":"TABLE 1"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Example Entries of the Web Database 113"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"5"},"colspec":[{"@attributes":{"colname":"1","colwidth":"14pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"5","colwidth":"35pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},{},{},{},"Geotopic"]},{"entry":["Id","URL","Geotopics (g)","Location","Scores"]},{"entry":{"@attributes":{"namest":"1","nameend":"5","align":"center","rowsep":"1"}}}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"5"},"colspec":[{"@attributes":{"colname":"1","colwidth":"14pt","align":"char","char":"."}},{"@attributes":{"colname":"2","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"5","colwidth":"35pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["1","www.exampleURL1.com","g= San","g= 37\u00b0 47\u2032 N\/122\u00b0 26\u2032 W","gs= 0.5"]},{"entry":[{},{},"Francisco, CA","g= 41\u00b0 51\u2032 N\/87\u00b0 39\u2032 W","gs= 0.25"]},{"entry":[{},{},"g= Chicago, IL","g= 40\u00b0 4\u2032 N\/74\u00b0 0\u2032 W","gs= 0.25"]},{"entry":[{},{},"g= New York,",{},{}]},{"entry":[{},{},"NY",{},{}]},{"entry":["2","www.exampleURL2.com","g= Los Angeles,","g= 34\u00b0 3\u2032 N\/118\u00b0 14\u2032 W","gs= 0.5"]},{"entry":[{},{},"CA","g= 41\u00b0 51\u2032 N\/87\u00b0 39\u2032 W","gs= 0.5"]},{"entry":[{},{},"g= Chicago, IL",{},{}]},{"entry":["3","www.exampleURL3.com","N\/A","N\/A","N\/A"]},{"entry":{"@attributes":{"namest":"1","nameend":"5","align":"center","rowsep":"1"}}}]}}]}}},"As shown in , the geographical information system  further comprises a web search module . The web search module  receives a location search query from the client . As previously mentioned, the address included in the location search query may be incomplete. For example, the query may merely include the keywords representing a name of a map feature such as \u201cUnion Square,\u201d but fails to further include other terms that provide an indication of the location of the map feature. The web search module  searches the web database  to identify documents that are relevant to the search query for inclusion in web search results. The web search module  identifies keywords in the search query, and then identifies documents that match the keywords. In one embodiment, the web search module  identifies documents for the web search results based on a match between metadata (e.g., geotopics) associated with the documents and keywords in the search query. The web search module  may also identify documents for the web search results based on a match between a title of the document and the search query. The web search module  may rank the documents in the search results using the presence of keywords from the query in the documents to influence the ranking order.","As described above, documents included in the web search results may have associated geotopics and geotopic scores. In one embodiment, the web search module  normalizes the geotopic scores gsof geotopics gthat are associated with the documents in the web search results. The web search module  may normalize the geotopic scores gsbased on the total number of documents included in the web search results. For example, the search query for \u201cUnion Square\u201d may result in the identification of five web search results, including documents 1 and 2 shown above in Table 1. The geotopic scores gsfor document 1 would then be normalized based on a factor of five (i.e., the total number of web search results) resulting in normalized geotopic scores of:\n\n=(0.5\/5)=0.1\n\n=(0.25+0.5)\/5=0.15\n\n=(0.25\/5)=0.05\n\n=(0.5\/5)=0.1\n","In one embodiment, the geocoding search module  identifies geocoding results Gassociated with the location search query received by the web search module . The geocoding search module  identifies one or more keywords in the search query, and searches the map database  for one or more geographical locations (i.e., map features) that match the one or more keywords identified in the location search query. The matching geographical locations represent the geocoding results for the search query.","In one embodiment, the geocoding results Gare initially ordered or ranked based on the similarity of the keywords from the query to the names of the geographical locations included in the geocoding results. Alternatively, the ranking may be influenced based on the geographic location of the client  that submitted the search query, which may be identified based on the internet protocol (IP) address associated with the client  or based on global positioning signals received by the client . Geocoding results Gthat are closer in terms of distance to the geographic location of the client  may be ranked higher than geocoding results that are farther from the location of the client .","In one example, the geocoding search module  may receive a location search query including the keywords \u201cUnion Square.\u201d In this example, the query terms do not specify the specific \u201cUnion Square\u201d of interest. Accordingly, the geocoding search module  may identify multiple geocoding results Gthat match the query for \u201cUnion Square.\u201d For example, the geocoding results may include the geographic locations of \u201cUnion Square Park\u201d in San Francisco, Calif., \u201cUnion Square Park\u201d in New York, N.Y., and \u201cUnion Square Shopping Center\u201d in San Jose, Calif. , B, and C respectively illustrate online maps A, B, and C, for the geocoding results associated with \u201cUnion Square Park\u201d in San Francisco, Calif., \u201cUnion Square Park\u201d in New York, N.Y., and \u201cUnion Square Shopping Center\u201d in San Jose, Calif. As will be further described below, the geographical information system  determines which of the online maps  to provide to the client  to fulfill the query for \u201cUnion Square.\u201d","In one embodiment, the scoring module  in the geographical information system  ranks (or re-ranks) the geocoding results Gbased at least in part on the web search results associated with the location search query and the search query itself. For each geocoding result G, the scoring module  calculates a geocoding score Sthat describes a measure of relatedness between the geocoding result Gand the search query. That is, a geocoding score G, for a geocoding result Grepresents the likelihood that the geocoding result Grepresents a geographical location of interest that the user intended to search for in the location search query. In one embodiment, the geocoding score Sfor a geocoding result Gis based at least in part on one or more of the following criteria:\n\n","As previously mentioned, a geographic location represented by a geocoding result Gmay be associated with a name that includes one or more keywords such as \u201cUnion Square Park, New York City, N.Y.\u201d In one embodiment, the similarity of the geocoding result Gand the keywords obtained from the search query is based on the number of terms in the name of the geographic location that match the keywords obtained from the search query. The value of the similarity criteria SCfor a particular term i in the location search query may include a product of weights. The weights may include a token mass and a relevance score for the term i in the search query. The token mass may reflect the nature or type of term in the search query. Examples of term types include stop words, street affix words (e.g., a street prefix word such as \u201crue\u201d in French or street suffix words such as \u201cstreet,\u201d \u201croad,\u201d and \u201cplace\u201d in English), numbers, synonyms, etc., with each predefined type being assigned a particular token mass. In one embodiment, the token mass may range in value between 0 to 1.","In one embodiment, the relevance score may reflect the degree of text match between the query term i and the name of the geographic location corresponding to the geocoding result G. For example, a complete text match between a query term i and a term in the name of the geographic location may be associated with a value of 1, whereas only a partial match between the query term i and a term in the name of the geographic location may be associated with a value that is less than 1 and that reflects the degree of the text match. In one embodiment, the value of SCfor a particular term i may be the product of the token mass value and relevance score for the term i.","As mentioned previously, a location search query may include values corresponding to various address components, such as a street number, street name, neighborhood, district, zip code, city, state, province, and country. The query criteria Q describe how many of those address components were provided in the location search query received from the client . Thus, if the location search query includes all of the address components mentioned above, the query is considered to be complete and thus the query criteria Q has a value of 1 in one embodiment. If the search query lacks some of the address components, the search query is considered incomplete and thus the query criteria Q has a value that is less than 1 and that decreases as the number of missing address components increases.","The prominence criteria P describe the prominence of the geographic location associated with the geocoding result G. In one embodiment, the prominence of the geographic location is based on the population of the geographic location. Thus, a geographic location comprising a region of higher population is more prominent than a geographic location comprising a region of lower population and would accordingly have a higher prominence score P and geocoding score S.","The relationship between the geocoding score Sand each of these criteria in an exemplary embodiment is represented by the following equation:",{"@attributes":{"id":"p-0058","num":"0068"},"maths":{"@attributes":{"id":"MATH-US-00002","num":"00002"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":["S","m"]},"mo":"=","mrow":{"mrow":{"mfrac":{"mn":"1","mi":"E"},"mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"munder":{"mo":"\u2211","mi":"i"},"mo":"\u2062","msub":{"mi":["SC","i"]}}}},"mo":["\u00b7","\u00b7"],"mi":["Q","P"]}}}}},"While the scoring module  calculates the geocoding score Sfor each geocoding result Gbased on the above equation in one embodiment, other embodiments using other geocoding scoring functions can also be used. In such embodiments, the geocoding scoring function can use some or all of the criteria mentioned above, as well as additional criteria. In one embodiment, the variable \u201cE\u201d is a normalization value that corresponds to the maximum value of the sum of the SCscores for a perfect match or equivalently the sum of the token masses for the keywords in the search query.","For each geocoding result G, the scoring module  also calculates a similarity score S(m,k) that describes a measure of relatedness between the geocoding result Gand each geotopic gincluded in the web search results. The similarity score S(m,k) describes the similarity of the geographical location associated with the geocoding result Gand the geographic location represented by the geotopic g. A similarity score S(m,k) between a geocoding result Gand a geotopic gcan be based at least in part on one or more of the following factors:\n\n","In one embodiment, the similarity score S(m,k) between a geocoding result Gand a geotopic gis based on constant parameter values. For example, if the matching criteria indicates that an ID of the geocoding result Gand the ID of the geotopic gmatch, the scoring module  adds a constant value (e.g., 3.0) to the similarity score S(m,k). Similarly, if the distance criteria indicates that the geographic location associated with the geocoding result Gis within a threshold distance (e.g., 10 kilometers) from the geographic location represented by the geotopic g, the scoring module adds a constant value to the similarity score S(m,k). In one embodiment, the constant value for the distance criteria as well as for the partial matching criteria is based on the type of map feature represented by the geotopic g.","Generally, a map feature that describes a more specific geographic location is associated with a higher constant value than a map feature that describes a general geographic location. For example, a map feature associated with a street address may be assigned a higher constant value than a map feature associated with a state. Below is one embodiment of the constant values assigned to the similarity score S(m,k) based on geotopic type:\n\n","For example, if the geotopic gcomprises a street or neighborhood that is included in the geocoding result G, or if the street or neighborhood is within the threshold distance of the geographic location associated with the geocoding result G, the scoring module  assigns a value of 1.0 to the similarity score S(m,k). However, if the geotopic gcomprises a district (e.g., Manhattan or the Bronx) that is included in the geocoding result Gor if the district is within the threshold distance of the geographic location associated with the geocoding result G, the scoring module  assigns a value of 0.9 to the similarity score S(m,k). If the geotopic gcomprises a city or village that is included in the geocoding result Gor if the city or village is within the threshold distance of the geographic location associated with the geocoding result G, the scoring module  assigns a value of 0.8 to the similarity score S(m,k). Additionally, the scoring module  assigns a value of 0.6 if the geotopic gcomprises a country or zip code that is included in the geocoding result G. or if the country or zip code is within the threshold distance of the geographic location associated with the geocoding result G. In one embodiment, no value is assigned to the similarity score S(m,k) if the geotopic gcomprises a province or country that is included in the geocoding result Gbecause provinces and countries are too general of a location to assist in the determination of which geocoding result to provide to the client . Note that in other embodiments, different constant values may be assigned to the various geotopic types shown above.","In one embodiment, the scoring module  calculates a web support score Wfor each geocode result Gthat describes how many web search results are associated with the geocode result G. The web support score Wfor each geocode result Gis based at least in part on the similarity score S(m,k) between a geocode result Gand a geotopic gand the normalized geotopic score for each geotopic g. The relationship of these factors to each other in an exemplary embodiment is represented by the following equation:\n\n=max{()} where 1 \n","In the above equation, the scoring module  multiplies the similarity score S(m,k) for a geocoding result Gand a geotopic's normalized geotopic score , and determines a particular geotopic g(i.e., a particular value for k) that maximizes the product. The scoring module  then assigns the product having the maximum value as the web support score Wfor the geocoding result G.","In one embodiment, the scoring module  adds the web support score Wto the geocoding score Sfor a geocoding result Gto create an updated geocoding score USfor the geocoding result G. The scoring module  may re-rank the geocoding results based on the updated geocoding score US. Alternatively, the scoring module  may only add the web support score Wto the geocoding score Sfor the geocoding result Gif the web support score Wis above a threshold value. Based on the re-ranked geocoding results, the scoring module  identifies which geocoding result Gto provide to the client  to fulfill the search query.","Consider the example where the geographical information system  identifies the following three geocoding results Gand determines respective geocoding scores Sin response to a search query as:\n\n()=(0.3);\n\n()=(0.25); and\n\n()=(0.2).\n","Assume that geocoding results G, G, and G respectively correspond to the online maps A, B, and C illustrated in . Furthermore, assume that the geographical information system  identifies the following web search results Rand their associated geotopics g:\n\n(),(), 3()=(0.5), (0.25), 3(0.25);\n\n(), ()=(0.5), (0.5);\n\n;\n\n; and\n\n.\n","As shown above, only web search results Rand Rhave associated geotopics. The geotopics gand their associated normalized geotopic scores are as follows:\n\n=0.1;\n\n=0.15;\n\n=0.05; and\n\n=0.1;\n","Furthermore, assume the following similarity scores S(m,k) between each geocoding result Gand each geotopic g:\n\n","According to the equation that represents the web support score W, the scoring module  calculates the following web support scores Wfor the geocoding results G, G, and G:\n\n=0.0;\n\n=0.15; and\n\n=0.0.\n","In this example, the scoring module  adds the web support score Wto the geocoding score Sfor each geocoding result Gresulting in the in the updated geocoding scores US:\n\nUS=0.3+0=0.3;\n\nUS=0.25+0.15=0.4; and\n\nUS=0.2+0=0.2.\n","In one embodiment, the scoring module  re-ranks the geocoding results Gand selects the geocoding result with the highest updated geocoding scores USto provide to the client  of the user. In the example illustrated with respect to , the scoring module  selects online map B describing the geographic location of \u201cUnion Square Park, New York, N.Y.\u201d since geocoding result Ghas the highest undated geocoding score USwhich is equal to 0.4. This causes the map module  to provide online map to the client  to fulfill the search query for \u201cUnion Square.\u201d If the updated geocoding scores USwere not calculated, the geocoding result Gassociated with San Francisco, Calif. (e.g., online map A) would have been provided to the user in response to the search query since geocoding result Ghas the highest non-updated geocoding score Swhich is equal to 0.3. Note that in one embodiment, the output of the scoring module  may be exposed via an application programming interface (API) to outside services to allow these services to provide information related to the geocoding results other than online maps such as business listings associated with the search query.","Process for Providing a Geocoding Result","Referring now to , there is shown one embodiment of a computer-implemented method performed by the geographical information system  for providing a geocoding result to fulfill a location search query received from a client . Note that in alternative embodiments, other steps may be performed other than those shown in .","In one embodiment, the geographical information system  receives  a location search query. The location search query may include one or more keywords that represent a name of a map feature or an address associated with a map feature. The geographical information system  accesses  web search results associated with the location search query. For each web result, the geographical information system identifies  geotopics associated with the web result and identifies  a measure of relatedness (i.e., a geotopic score gs) between the web result and each identified geotopic otherwise known as a geotopic score gs.","The geographical information system  also identifies  geocoding results associated with the location search query. The geocoding results represent geographic locations which match on some level the keywords included in the search query. For each geocoding result, the geographical information system  calculates  a measure of relatedness between the geocoding result and the search query (e.g., a geocoding score S). The geographical information system  also calculates  a measure of similarity between the geocoding result and each geotopic that is associated with the web search results (e.g., a similarity score S(m,k)). The geographical information system  then calculates  a weight for the measure of relatedness between the geocoding results and the web search results (e.g., a web support score W).","The geographical information system  then ranks  the geocoding results based on the weighted measures of similarity. The geographical information system  then determines a geocoding result from the ranked geocoding results, and provides  to the client  a map including the location identified by the geocoding results. In one embodiment, the geographical information system  may also provide the web search results with the online map. In one embodiment, the geographical information system  provides to the client  a map including the location identified by the geocoding result with the highest updated geocoding score USas described above.","Reference in the specification to \u201cone embodiment\u201d or to \u201can embodiment\u201d means that a particular feature, structure, or characteristic is included in at least one embodiment of the disclosure. The appearances of the phrase \u201cin one embodiment\u201d or \u201ca preferred embodiment\u201d in various places in the specification are not necessarily referring to the same embodiment.","Some portions of the above are presented in terms of methods and symbolic representations of operations on data bits within a computer memory. These descriptions and representations are the means used by those skilled in the art to most effectively convey the substance of their work to others skilled in the art. A method is here, and generally, conceived to be a self-consistent sequence of steps (instructions) leading to a desired result. The steps are those requiring physical manipulations of physical quantities. Usually, though not necessarily, these quantities take the form of electrical, magnetic or optical signals capable of being stored, transferred, combined, compared and otherwise manipulated. It is convenient at times, principally for reasons of common usage, to refer to these signals as bits, values, elements, symbols, characters, terms, numbers, or the like. Furthermore, it is also convenient at times, to refer to certain arrangements of steps requiring physical manipulations of physical quantities as modules or code devices, without loss of generality.","It should be borne in mind, however, that all of these and similar terms are to be associated with the appropriate physical quantities and are merely convenient labels applied to these quantities. Unless specifically stated otherwise as apparent from the following discussion, it is appreciated that throughout the description, discussions utilizing terms such as \u201cprocessing\u201d or \u201ccomputing\u201d or \u201ccalculating\u201d or \u201cdisplaying\u201d or \u201cdetermining\u201d or the like, refer to the action and processes of a computer system, or similar electronic computing device, that manipulates and transforms data represented as physical (electronic) quantities within the computer system memories or registers or other such information storage, transmission or display devices.","Certain aspects disclosed herein include process steps and instructions described herein in the form of a method. It should be noted that the process steps and instructions described herein can be embodied in software, firmware or hardware, and when embodied in software, can be downloaded to reside on and be operated from different platforms used by a variety of operating systems.","The embodiments discussed above also relates to an apparatus for performing the operations herein. This apparatus may be specially constructed for the required purposes, or it may comprise a general-purpose computer selectively activated or reconfigured by a computer program stored in the computer. Such a computer program may be stored in a non-transitory computer readable storage medium, such as, but is not limited to, any type of disk including floppy disks, optical disks, CD-ROMs, magnetic-optical disks, read-only memories (ROMs), random access memories (RAMs), EPROMs, EEPROMs, magnetic or optical cards, application specific integrated circuits (ASICs), or any type of media suitable for storing electronic instructions, and each coupled to a computer system bus. Furthermore, the computers referred to in the specification may include a single processor or may be architectures employing multiple processor designs for increased computing capability.","The methods and displays presented herein are not inherently related to any particular computer or other apparatus. Various general-purpose systems may also be used with programs in accordance with the teachings herein, or it may prove convenient to construct more specialized apparatus to perform the required method steps. The required structure for a variety of these systems will appear from the description below. In addition, the embodiments are not described with reference to any particular programming language. It will be appreciated that a variety of programming languages may be used to implement the teachings described herein, and any references below to specific languages are provided for disclosure of enablement and best mode.","While the disclosure has been particularly shown and described with reference to a preferred embodiment and several alternate embodiments, it will be understood by persons skilled in the relevant art that various changes in form and details can be made therein without departing from the spirit and scope of the invention.","Finally, it should be noted that the language used in the specification has been principally selected for readability and instructional purposes, and may not have been selected to delineate or circumscribe the inventive subject matter. Accordingly, the disclosure is intended to be illustrative, but not limiting, of the scope of the invention."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIGS. 2A-2C"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 3"}]},"DETDESC":[{},{}]}
