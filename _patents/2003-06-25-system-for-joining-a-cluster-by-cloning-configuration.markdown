---
title: System for joining a cluster by cloning configuration
abstract: The present invention clones configuration information onto a device joining a cluster. A Configuration Acquisition System (CAS) component, which, using a list of attributes to be cloned, connects to a cluster member, interacts with the cluster member to retrieve all the attributes, reconciles the values of the attributes from the cluster member with the values of the attributes in its own configuration and applies the reconciled configuration to its Configuration Subsystem.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07587475&OS=07587475&RS=07587475
owner: Nokia Siemens Networks Oy
number: 07587475
owner_city: Espoo
owner_country: FI
publication_date: 20030625
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENT"],"p":["Equipment that provides a high degree of reliability is a prime consideration of organizations that supply Internet and Intranet services. To help meet this need, technology has become available to combine several devices into a cluster that is configured to act as a single device. Using the cluster arrangement, it is intended that the failure of one device does not significantly affect the remaining components within the cluster.","Clusters may be configured to provide many services. For example, clusters are configured to perform traffic management, Domain Name System services, user authentication, authorization and accounting (AAA) services and collection of operational statistics. These types of services are generally known as Network Management (NM) services. The process of configuring these Network Management services within the cluster is known as Cluster Management. The act of a new device becoming part of a cluster is called \u2018joining\u2019.","In a typical single-device system, the operation of the NM services is governed by a set of attributes known as the NM configuration. The Network Management system allows the viewing of the configuration and monitored data and manipulation of the configuration in several ways, including through a Graphical User Interface (GUI), a Command Line Interface (CLI) and via the Simple Network Management Protocol (SNMP). Configuring the devices within the cluster is difficult and error prone.","One problem is that it is difficult to maintain identical configurations of the Network Management features on all devices within the cluster. In addition, errors in the configuration of one device, or incompatible configurations among the devices, may render a particular NM feature inoperable.","Manually configuring cluster attributes for a new cluster member is difficult and error prone. It is also difficult to manually determine and apply which NM attributes of a cluster member should be cloned on a new member. Additionally, it is difficult to apply NM attributes of the cluster each time a new device joins a cluster.","The present invention is directed at cloning configuration information onto a device joining a cluster.","According to one aspect of the invention, a Configuration Acquisition System (CAS) component, which, using a list of attributes to be cloned, connects to a cluster member, interacts with the cluster member to retrieve all the attributes, reconciles the values of the attributes from the cluster member with the values of the attributes in its own configuration and applies the reconciled configuration to its Configuration Subsystem.","According to another aspect of the invention, different events can trigger the cloning process. For example, whenever a device joins the cluster it may be cloned. Other events that trigger can include, but not limited too, rebooting a device, reconnection of the device to the cluster, a user action, and the like. Cloning helps to ensure that the device has an up-to-date configuration with other cluster members.","According to yet another aspect, the device that joins a cluster inherits some of the clustering attributes of other members of the cluster, as well as all the attributes of the Network Management services. This helps to ensure that the new member can become a fully operational member of the cluster.","In the following detailed description of exemplary embodiments of the invention, reference is made to the accompanied drawings, which form a part hereof, and which is shown by way of illustration, specific exemplary embodiments of which the invention may be practiced. Each embodiment is described in sufficient detail to enable those skilled in the art to practice the invention, and it is to be understood that other embodiments may be utilized, and other changes may be made, without departing from the spirit or scope of the present invention. The following detailed description is, therefore, not to be taken in a limiting sense, and the scope of the present invention is defined only by the appended claims.","Throughout the specification and claims, the following terms take the meanings explicitly associated herein, unless the context clearly dictates otherwise. The term \u2018cloning\u2019 means duplication of some or all attributes of one device by another. According to one embodiment, cloning duplicates attributes that are \u2018device-independent\u2019, i.e. have no parts that are unique to the system from which the attributes are duplicated.","The term \u201cIP\u201d means any type of Internet Protocol. The term \u201cnode\u201d means a device that implements IP. The term \u201crouter\u201d means a node that forwards IP packets not explicitly addressed to itself. The term \u201croutable address\u201d means an identifier for an interface such that a packet is sent to the interface identified by that address. The term \u201clink\u201d means a communication facility or medium over which nodes can communicate. The term \u201ccluster\u201d refers to a group of nodes configured to act as a single node.","The following abbreviations are used throughout the specification and claims: CAS=Configuration Acquisition System; CS=Configuration Subsystem; CLI=Command Line Interface; CM=Cluster Management; GUI=Graphical User Interface; MAC=Message Authentication Code; and NM=Network Management.","Referring to the drawings, like numbers indicate like parts throughout the views. Additionally, a reference to the singular includes a reference to the plural unless otherwise stated or is inconsistent with the disclosure herein.",{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 1","b":["100","105","108","130","110","120","125","145","130","135","150"]},"The present invention is directed at cloning the configuration of the cluster onto a device (such as node ) when it joins the cluster. Cloning the configuration information of the cluster onto the joining node provides many advantages. The list of attributes within the system that performs the cloning is encapsulated helping to ensure that no attributes are missed and all desired attributes are cloned onto the node. Cloning can occur even when access to the device from a remote workstation is not available. Attributes on the local device joining the cluster may be removed from the device when they do not exist in the member configuration of the cluster. Once the configuration of the cluster has been cloned successfully, node  becomes a part of cluster .","As illustrated, inside network  is an IP packet based backbone network that includes routers, such as routers  to connect the support nodes in the network. Routers are intermediary devices on a communications network that expedite message delivery. On a single network linking many computers through a mesh of possible connections, a router receives transmitted messages and forwards them to their correct destinations over available routes. On an interconnected set of LANs, including those based on differing architectures and protocols, a router acts as a link between LANs, enabling messages to be sent from one to another. Communication links within LANs typically include twisted wire pair, fiber optics, or coaxial cable, while communication links between networks may utilize analog telephone lines, full or fractional dedicated digital lines including T1, T2, T3, and T4, Integrated Services Digital Networks (ISDNs), Digital Subscriber Lines (DSLs), wireless links, or other communications links.","Management computer  is coupled to management network  through communication mediums. Management computer  is coupled to inside network  through communication mediums. Management computers  and  may be used to manage a cluster, such as cluster , as well as to trigger a cloning event.","Furthermore, computers, and other related electronic devices may be connected to network , network , and network . The public Internet itself may be formed from a vast number of such interconnected networks, computers, and routers. IP network  may include many more components than those shown in . However, the components shown are sufficient to disclose an illustrative embodiment for practicing the present invention.","The media used to transmit information in the communication links as described above illustrates one type of computer-readable media, namely communication media. Generally, computer-readable media includes any media that can be accessed by a computing device. Communication media typically embodies computer-readable instructions, data structures, program modules, or other data in a modulated data signal such as a carrier wave or other transport mechanism and includes any information delivery media. The term \u201cmodulated data signal\u201d means a signal that has one or more of its characteristics set or changed in such a manner as to encode information in the signal. By way of example, communication media includes wired media such as twisted pair, coaxial cable, fiber optics, wave guides, and other wired media and wireless media such as acoustic, RF, infrared, and other wireless media.",{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 2"},"New cluster member  uses CAS  to acquire the configuration information relating to the cluster. According to one embodiment, the configuration information is retrieved from one of the members of the cluster. As all of the members are configured identically, there is no need to acquire the configuration information from more than one member.","CAS  may maintain a list of the clustering configuration information (clustering attributes and NM attributes) that are to be cloned within a local configuration. CAS  is given or otherwise obtains information needed to acquire the attributes from the cluster member. According to one embodiment, the information includes the network address of the cluster member and authentication information used to access the Configuration Subsystem on the cluster member. According to one embodiment, the information to acquire the attributes from the cluster member is supplied by controls on a page from an application with Graphical User Interface (GUI) or a command in a Command Line Interface (CLI) shell.","In operation, CAS  connects to cluster member  and interacts with Configuration Subsystem  to retrieve all of the attributes to be cloned onto new member .","CAS  reconciles the values of the attributes from the cluster member with the values of the attributes stored within its own configuration. CAS  then applies the reconciled configuration to Configuration Subsystem  of new member . The cloned configuration information loaded onto the devices within the cluster may be protected so that it can not be modified. The protection may apply to one or more of the attributes on the device. This protection helps to prevent unauthorized, or unintentional, modification of the attributes that could lead to operational problems with the cluster.","According to one embodiment, the reconciliation operates on the following types of differences. When the attribute from the cluster member does not exist in the local configuration then the attribute from the cluster member does not exist in the local configuration then it is added to the local configuration.","When the attribute in the local configuration does not exist in the cluster member's configuration then this type of attribute is removed from the local configuration.","When the attribute from the cluster member exists in the local configuration, but has a different value, then this type of attribute is changed in the local configuration.","When the attribute from the cluster member exists in the local configuration and has an identical value then this type of attribute is unchanged in the local configuration.","The list of clustering attributes and Network Management attributes to be cloned from the cluster member is either built into the CAS or contained within one more Configuration Subsystem(s) (CS). According to one embodiment, the list is contained within CAS  to help prevent alteration of the list. For example, when the list is contained within CS  it could be altered by a user or other applications that maintain the CS.","According to one embodiment, a secure connection method within the CAS provides the connection between new member  and cluster member . The use of a secure connection is desirable when any of the attributes to be cloned are security-sensitive.","The system may be triggered to clone a configuration in many different ways. According to one embodiment, the following ways are used to trigger a cloning. A user action may trigger the cloning. For example, the user may select a button on a GUI, or initiate a command through a CLI. A power up, or reboot, of the device may also trigger the cloning. When a cluster member loses connection with the other members for a predetermined time may trigger a cloning to occur. For example, a cluster member may lose a network connection with the members of the cluster.",{"@attributes":{"id":"p-0042","num":"0041"},"figref":"FIG. 3","b":["300","305","330","315","320","325"]},"According to one embodiment, GUI  is configured to execute on a workstation (not shown) and interact with Configuration Subsystem  of device . GUI  provides a graphical interface to view NM configurations and perform NM operations for device . CLI  provides a command line interface that allows the user to view NM configurations and perform NM operations on device  by an application executing on device . The GUI and CLI associated with device  may also be used to trigger a cloning.","CAS  is configured to communicate with device  and other devices within the cluster. CAS  may be included within device  or it may be separate from device . Generally, CAS  is used to communicate cloning information.",{"@attributes":{"id":"p-0045","num":"0044"},"figref":"FIG. 4","b":["400","420","425","435","440","445"]},"The GUI and CLI present a view of a single device and the CAS helps to ensure integrity of the NM configuration on every device within the cluster by communicating the attributes to clone. CAS  distributes information between the nodes within the cluster. Under the cloning system, when a device joins the cluster it is cloned to the other nodes within the cluster. According to one embodiment, when a device joins the cluster that has attributes that are not common to the cluster, those attributes may be disabled, removed, modified, left alone, and\/or an error message is returned to the device. The action taken regarding the attribute depends upon the attribute that is not common. For example, if the attribute does not affect operation of the device within the cluster it could be left alone with no changes. On the other hand, when the attribute is critical to the device and it is not a common attribute the device is not allowed to join since the device would not work properly within the cluster.","According to one embodiment, the system acquires exclusive authority of the device joining the cluster until it is configured with the cloned configuration information. This helps to prevent more than one user or system from changing the configuration information of the device.","At some point before joining the cluster, a user enters information used in joining the cluster into the device. The GUI or CLI may be used to enter the cluster information. According to one embodiment of the information, the user enters an IP address associated with the cluster.","According to one embodiment, GUI  is implemented as a set of Web pages in a browser and a Web Server. The server may operate on a device within the cluster or a device separate from the cluster. The server may operate on all or some of the cluster members.","CLI  is a management CLI that presents the NM information relating to the device and the cluster textually to a user.","When a device joins the cluster, CAS  interacts with the configuration subsystem of the device joining the cluster to apply the cloning configuration information, thereby creating a clone device. According to one embodiment, when a change cannot be applied to a member, CAS  restores the original value of the attribute to the joining device and does not allow the device to join the cluster. This helps to ensure that all the members of the cluster maintain the same attributes. When a problem occurs CAS  may indicate that there was a failure to the GUI and CLI of the joining device, or send the error to some other location. When the cloning is complete, the newly added device operates as part of the cluster.",{"@attributes":{"id":"p-0052","num":"0051"},"figref":"FIG. 5","b":["500","520","510","540","535","520","525","530","525","530","535","540","510","520","535"]},"Configuration Acquisition System  acts as the backbone for the nodes within the cluster. CAS  provides base mechanisms including: discovering the members within the cluster; delivering queries and operations relating to NM attributes to the devices in the cluster; ensuring message integrity; an interface for management applications; and an interface to each device's local configuration subsystem. CAS  also includes a secure mechanism for transporting the information in the messages sent between the nodes within the cluster.","Configuration Acquisition System  helps to maintain identical configurations of Network Management features on all devices in the cluster. CAS  is also configured to automatically query the nodes it is coupled with in order to determine the cluster members. These queries are performed periodically to help ensure that all cluster members are available at any given time and have the same cloning configuration information.","CAS Client  uses Cluster Node  to discover the cluster's member devices.","CAS  uses messages to perform system and NM operations. The system operations include acquiring and releasing the configuration lock. When a message is to be sent, the CAS fills in header and delivers the message. When a message is received, the CAS checks the header and accepts the message only if values in the fields of the header are valid. The CAS discards any message whose header has invalid values in the fields.","CAS Client  composes the body of a CAS message and uses Cluster Node  to deliver the message to the cluster members; receive the responses from the members; and extract the result of the operation from the message. Remote Node  delivers the message to a particular cluster member and checks that a response message is received for every request message sent. Secure Transport  is the transport mechanism that actually sends and receives the messages.","The CAS Client can be implemented as a collection of shared-object libraries with well-defined Application Programming Interfaces (APIs). GUI and CLI can use these APIs to interact with the CAS to perform NM operations.","The CAS Server can be implemented as a daemon that is launched during system start-up.","CAS's Secure Transport can be implemented as a Secure Sockets Layer (SSL) socket. This provides an extra layer of security by providing the ability to encrypt the CAS messages.",{"@attributes":{"id":"p-0061","num":"0060"},"figref":"FIG. 6","b":["600","605","610","605","610"]},"Message Authentication Code (MAC)  is calculated from the message's contents and a value is provided to all members the system. The value acts as a \u201cshared secret\u201d between the members of the cluster.","Magic value  is identical for all messages and indicates that the message is a CAS message.","Type value  indicates the type of message. According to one embodiment of the invention, the message type includes a \u2018request\u2019 type and a \u2018response\u2019 type.","Token value  is unique for each request\/response message and can be used by the CAS Client to track outstanding requests.","Operation  indicates the particular NM operation to be performed at each cluster member. According to one embodiment of the invention, the operations include an \u2018attribute get\u2019 operation and an \u2018attribute set\u2019 option.","Size value  contains the number of bytes in the message's body.","The MAC and Magic fields ensure the integrity of the message. MAC  ensures the integrity for the contents of the message (including the header). MAGIC field  ensures the integrity of the origin of the message (a CAS Client or Server).",{"@attributes":{"id":"p-0069","num":"0068"},"figref":"FIG. 7","b":["700","705","710","715","720","730","725"]},{"@attributes":{"id":"p-0070","num":"0069"},"figref":["FIG. 8","FIG. 8"],"b":["800","800","800","802","804","816"]},"Depending on the exact configuration and type of computing device, system memory  may include volatile memory, non-volatile memory, data storage devices, or the like. These examples of system memory  are all considered computer storage media. Computer storage media includes, but is not limited to, RAM, ROM, EEPROM, flash memory or other memory technology, CD-ROM, digital versatile disks (DVD) or other optical storage, magnetic cassettes, magnetic tape, magnetic disk storage or other magnetic storage devices, or any other medium which can be used to store the desired information and which can be accessed by node . Any such computer storage media may be part of node .","Node  may include input component  for receiving input. Input component  may include a keyboard, a touch screen, a mouse, or other input devices. Output component  may include a display, speakers, printer, and the like.","Node  may also includes network component  for communicating with other devices in an IP network. In particular, network component  enables node  to communicate with mobile nodes and corresponding nodes. Node  may be configured to use network component  to receive and send packets to and from the corresponding nodes and the mobile nodes. The communication may be wired or wireless.","Signals sent and received by network component  are one example of communication media. Communication media may typically be embodied by computer readable instructions, data structures, program modules, or other data in a modulated data signal, such as a carrier wave or other transport mechanism, and includes any information delivery media. The term \u201cmodulated data signal\u201d means a signal that has one or more of its characteristics set or changed in such a manner as to encode information in the signal. By way of example, and not limitation, communication media includes wired media such as a wired network or direct-wired connection, and wireless media such as acoustic, RF, infrared and other wireless media. The term computer readable media as used herein includes both storage media and communication media.","Software components of node  are typically stored in system memory . System memory  typically includes an operating system , one or more applications , and data . As shown in the figure, system memory  may also include cluster management program . Program  is a component for performing operations relating to cloning as described above. Program  includes computer-executable instructions for performing processes relating to cluster management.","The above specification, examples and data provide a complete description of the invention. Since many embodiments of the invention can be made without departing from the spirit and scope of the invention, the invention resides in the claims hereinafter appended."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 8"}]},"DETDESC":[{},{}]}
