---
title: Sharing of location-based content item in social networking service
abstract: A method and/or system allows a user of a social networking service to publish a content item tagged with location information for sharing with other users of the social networking service. The user publishing the content item performs operations on the originating device to generate the content item. The originating communication device attaches the location information to the content item, and transmits the content item to a social networking system. The social networking system may provide various location-based services based on the content item tagged with the location information.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09119027&OS=09119027&RS=09119027
owner: Facebook, Inc.
number: 09119027
owner_city: Menlo Park
owner_country: US
publication_date: 20091006
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["RELATED APPLICATIONS","BACKGROUND","SUMMARY","DETAILED DESCRIPTION"],"p":["This application is related to U.S. patent application Ser. No. 12\/485,856 entitled \u201cSelective Content Accessibility in a Social Network,\u201d filed on Jun. 16, 2009 , which is incorporated by reference herein in its entirety.","1. Field of Art","The present invention generally relates to sharing a content item on a social networking service, more specifically to sharing a content item and location information associated with the content item using the social networking service.","2. Background of the Invention","As more computing devices, electronic devices and mobile devices come equipped with the capability to detect the location of the device, more users are using these devices to access various location-based services. The localization technology for detecting the location of the devices is becoming less costly to implement, and thus, contributing to the wide adoption of the technology. As a result, conventional devices such as laptop computers, cell phones, smartphones and PDAs (Personal Digital Assistants) that previously did not implement localization technology are now coming equipped with capability to detect the geographic location of the device.","Widely used location-based services include, among others, identifying businesses or services nearest to the user, locating people on a map, providing turn-by-turn navigation instructions, providing advertisements relevant to the location, and assisting recovery of lost or stolen asset (e.g., stolen car). Some of these location-based techniques use information locally stored on the devices while others require access to information stored on a remote server.","The location of the device may be determined based on a variety of technologies. The most widely used technology for detecting the location is GPS (Global Positioning System). GPS based technology uses radiowave signals transmitted by satellites orbiting around the earth to pinpoint the location of GPS enabled devices. Cell identification is another system used for locating the devices. Cell identification technology uses identification of a telecommunications cell in communication with the mobile device, the signal strength of the communicating cell and its neighboring cells to estimate the location of the mobile device. Although generally less accurate than the GPS technology, cell identification technology estimates the location of the mobile device with reasonable accuracy, especially in urban environments. Other location detection technologies make use of digital broadcast transmitters to locate a device.","Some existing services allow a first user to obtain the location of a second user's GPS enabled mobile device. Generally, the first user must provide a cell phone number of the second user's mobile device to the service, so that the service can identify mobile device, and report its location to the first user. This approach requires the first user to know the cell phone number of each second user that he wishes to track. However, a first user may not know the cell phone numbers of these other users. Further, the first user must manually enter this information to the service, which can be a time consuming, and error prone process.","Embodiments provide a method, a system and\/or a computer readable storage medium for sharing a content item and geographic location information associated with the content item in a social networking service. The social networking service has a plurality of users. A user generates content item at a communication device and makes the content item available to other users of the social networking service. The social networking system obtains geographic location information associated with the content item. The social networking system further selects which other users of the social networking service may access the content item and\/or the geographic location information, and makes the content item and\/or the geographic location information available to the selected users of the social networking service. The selected users have pre-existing social relationships with the first user in the social networking service.","The geographic location information may be generated at the originating communication device based on user input or localization technology. The geographic location information may be embedded in the content item, and then be sent to the social networking system for sharing.","Where location information is not provided by the originating communication device, geographic location information may be determined or estimated at the social networking system based on at least one of the user inputs received from the originating communication device, information provided by a third party, previous locations of the user or the originating communication device, the content item received from the originating communication device, and\/or activities or location of a group of users using the social networking service.","Geographic location information can be provided at various levels of resolution, from high resolution (e.g., an exact street address or latitude\/longitude), to medium resolution (e.g., neighborhood), to low resolution (e.g., city or state). The social networking system may vary the resolution of geographic location information provided to recipients, even though these varying levels of location information may pertain to the same content item. For example, high resolution location information (e.g., \u201cLat. 36\u00b0 57.39681\u2032 N\/Long. 121\u00b0 58.25409\u2032 W\u201d) about a photo of a surf spot may be provided to one recipient, while low resolution location information (e.g., \u201cSanta Cruz\u201d) about the surf spot may be provided to a second recipient. The resolution of the geographic location information to be shared with different members may be set accordingly to ensure that the level of information provided to each member is commensurate with the level of trust and reliability of that user.","The features and advantages described in the specification are not all inclusive and, in particular, many additional features and advantages will be apparent to one of ordinary skill in the art in view of the drawings, specification, and claims. Moreover, it should be noted that the language used in the specification has been principally selected for readability and instructional purposes, and may not have been selected to delineate or circumscribe the inventive subject matter.","The figures depict various embodiments of the present invention for purposes of illustration only. One skilled in the art will readily recognize from the following discussion that alternative embodiments of the structures and methods illustrated herein may be employed without departing from the principles of the invention described herein.","Embodiments provide a method and\/or system allowing a user of a social networking service to share a content item and location information of the content item with other users of the social networking service. The content item shared with the other users is created automatically or from user input. After the social networking service receives a content item and associated location information, the social networking service sends, or makes the content item and\/or the location information available to selected users. The social networking service determines which users are selected, and the resolution of the location information, based on social relationships between the user and the selected users that are established and managed by the social networking service.","A content item described herein refers to any data that can be shared by a plurality of users through a social networking service. The content item includes, for example, video or audio clips, images, comments, documents, maps, or a status message indicating what a user is doing, interested in or engaged in. These various types of content items are transmitted by the user from the user's originating communication device to the social networking system.","A user described herein may be an individual, a group of individuals, or an entity with one or more associated individuals. If multiple individuals are associated with a user, this user may be assigned multiple login IDs and passwords to allow multiple individuals to access the social networking system under the same user ID. A single user may be assigned a single user profile regardless of whether multiple individuals are associated with the single user.","The geographic location information described herein refers to information indicating a user's geographic location. The geographic location information can include, among others, the longitude and latitude of a location, a street address, or the name of the location. The location associated with content item may refer to the location where the user created the content item or any other location that is associated with the content item. For example, a user can post a photo taken in Troncones, Mexico and associate that photo with location information for Troncones. The association between the content item and the location may be made while the user is at the location or after the user moves to a different location. For example, the photo taken in Troncones may be associated with Troncones while the user is in Troncones or after moving to another location.","A social relationship described herein refers to relationships between users that are established and managed by a social networking service. The social relationship represents affinity or familiarity between users in a social networking service. Users can manually establish social relationships within the social networking service by selecting from a set of existing relationship indicators. The social relationships may be bidirectional (e.g., friends, relatives) or unidirectional (e.g., a fan of another user). The social networking service may also generate social relationships between users automatically based on various criteria including, but not limited to, shared interests and activities between the users, as well as commonality in their social relationships.","System Architecture of Social Networking System",{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 1","b":["100","110","100","130","130","130","100","114","110","110","130","100"]},"The originating communication device  is used by a user who wants to publish content item to the social networking system  for sharing with other users of the social networking system. The other users have their own respective communication devices . The originating communication device  can be any type of communication device that is capable of supporting a communications interface to the system . Suitable devices may include, but are not limited to, personal computers, mobile phones, personal navigation devices (PNDs), music players, gaming consoles and devices, handheld computers, personal digital assistants (PDAs), networking devices, cameras, GPS receivers, netbooks and smartphones. The originating communication device  is capable of generating content item and associating location information with the content item or sending a message including the location information to the social networking system , as described below in detail with reference to . While only a single originating device  is shown, in practice there will be a large number (e.g., millions) of such devices in communication with the system .","The content item generated at the originating communication device  may be any digital information. For example, the content item may include, but is not limited to, the user's status, a text note, a review, an image, a document, a hypertext link, an event, a description of the location, ratings, non-textual messages such as \u201clikes\u201d or \u201cpokes,\u201d a map, a list of locations, an animation clip, and an audio\/video clip, or other types of user-generated content. Each content item may be associated with location information. The association of location information with a content item may be achieved by tagging or labeling the content item with the location information. For example, a status message may be associated with the location where the message was generated, a photograph may be associated with the location where the photograph was taken, and an audio\/video clip may be associated with a number of locations where the audio\/video clip was recorded. A content item may also be associated with any location a user believes to be relevant to the content item. However, it is not necessary that location information be related to the content item in any way. For example, a user may be permitted to associate inaccurate location information with a content item.","The location information to be associated with a content item can be obtained using various methods. The following are examples of mechanisms for obtaining location information. A user may input location information directly. Alternatively, the originating communication device  may provide location information (or information that can be used to determine location) using any location technology available to a particular device, including, but not limited to, geometric, statistical, scene analysis and proximity based technologies or any combination of these technologies (e.g., GPS, aGPS, WiFi, Cell ID, device headers, http headers, direct API from carriers, handset APIs, Bluetooth, OTDOA, WiMAX, IP address, etc.). Trusted third parties may also provide location information (e.g., mobile carriers, airlines, banks, etc.). The social networking system  may provide location information using any technology available to the system for locating users (e.g., user profile information, registration information, IP address geocoding, etc.). Location information originating from a source other than the social networking system itself may be transmitted to the social networking system  in the same message as the content item with which it is associated, or in a separate message.","If the originating communication device  is incapable of detecting its location or the location information is unavailable for some reason at the originating communication device , the originating communication device  adds an indication in the content item that the location information associated with the content item is unavailable or sends a separate message indicating the unavailability of the location information. When the location information is unavailable, the location-based content processor module  may estimate the location associated with the content item, as described below in detail with reference to .","A communication device  is any type of communication device that is capable of supporting a communications interface to the system . Such devices may include, among others, personal computers, mobile phones, personal navigation devices (PNDs), music players, gaming consoles and devices, hand held computers, personal digital assistants (PDAs), networking devices, cameras, GPS receivers, netbooks and smartphones. The communication devices  receive the content item and the location information associated with the content item from the social networking the system .","An individual device, such as a computer or a mobile telephone can serve as both an originating communication device  and a receiving communication device , depending on the particular mode of operation. That is, a user can use a single device as both an originating communication device  for sending the content item and location information to the system , and as a communication device  for receiving the content item and location information from other users.","The social networking system  performs functions related to providing a social networking service to a plurality of users. To perform these functions, the social networking system  provides one or more communication mechanisms that allow the users to interact and communicate with each other. The communication mechanisms may include, among others, email services, instant messaging services, webpage hosting, application hosting, and photo\/video sharing services.","The social networking system  may include, among other components, a location-based content processing module , a content publishing module , a global privacy module , and a location-based service module . Other modules and functions of the social networking system  are well known in the art, and descriptions for these modules and functions are omitted herein for the sake of brevity.","In a simple implementation, the location-based content processor module  receives the content item tagged with location information and forwards the content item to the content publishing module  without further processing. In a more complex implementation, the location-based content processor module  receives the content item tagged with the location information from the originating communication device  via a channel , extracts the location information associated with the content item, processes the location information and\/or infers the location associated with the content item if the received content item is not tagged with location information, and provides the content item  and associated processed location information  to the content publishing module , as described below in detail with reference to .","The content publishing module  determines which users may access (or receive) the content item and\/or the location information, and makes the content item and\/or location information available to the communication devices  of such users under the restrictions imposed by the location-based content processor module  and the global privacy module . The restrictions may include, among others, the posting user's preferences with respect to who may access content item associated with location information and the resolution of that location information, if the location information is to be shared. The content publishing module  makes the location information and the content item available to the other users' communication devices .","In one embodiment, the content publishing module  provides links or other information to allow other users to retrieve the content item and\/or location information from a source. In another embodiment, the content publishing module  affirmatively transmits the content item and\/or location information to other users' communication devices , rather than merely making the content item and\/or location information available to the users' communication devices .","The global privacy module  implements policies and rules for sharing a content item received from a user with other users of the social networking system  based on social relationships between users. A user having a social relationship with another user is often referred to as a \u201cfriend\u201d or \u201cfan.\u201d Some social networking systems allow a first user to \u201cfollow\u201d or access content items that are posted by a second user with whom the first user has a social relationship. For this purpose, the global privacy module  stores global privacy information related to social relationships between users of the social networking system . Methods and systems for establishing and managing such social relationships are well known in the art; and therefore, detailed descriptions of such methods and systems are omitted herein for the sake of brevity.","The location-based service module  receives the location information  determined by the location-based content processor module  to provide various location-based services to the user of the originating communication device . The location-based services include, for example, navigation services, mapping services, location-based advertisements, and location-based alerts (e.g., traffic jam alert or disaster alert). The location-based services may also include a newsfeed service that provides content items from other users in real-time or near real-time to the originating communication device . The provided content items may be filtered by the location of the user of the originating communication device .","The location-based service module  may also provide location-based search services for searching businesses, points of interests, landmarks, other users and other objects to the content publishing module  and\/or the communication devices . For this purpose, the location-based service module  includes a database for storing objects based on their geographic locations. Alternatively, the location-based service module  may access other services provided by a third party to provide the search services.","The location-based content processor module , the content publishing module , the global privacy module  and the location-based service module  may be implemented as hardware, software, firmware or a combination thereof. Also, two or more of these components may be combined into a single component. The social networking system  may also consist of multiple servers, each server providing the same or different functions.","The social networking system  may also include a location service  that allows determination of the location of the originating communication device . The location service  may be provided by carriers that provide wired or wireless communication channel to or from the originating communication device . For example, the location service  is embodied as a system for providing GSM localization or deep level telecoms network (SS). Alternatively, the location service  may be provided by a trusted third party that provides reliable location information of the user. The third party may be the carrier of mobile communication devices. The third party may also be operators of public transport vehicles, vessels or airlines that broadcast wireless information indicating the location of the vehicles, vessels or airlines carrying the user. The originating communication device  may receive the location information from the location service , and perform calibrations or adjustments to determine its location, if needed.","The location service  may also be provided by a mobile device carried by a third party. The third party mobile device may be equipped with a GPS module or other means of localization. The third party mobile device transmits short-range wireless signals (e.g., Bluetooth signal) identifying the location of the third party mobile device to the originating communication device . Since the wireless signals from the third party mobile device are received only when in proximity to the third party mobile device, the location of the originating communication device  is approximated to the location of the third party mobile device upon receiving the wireless signal from the third party mobile device.","Architecture of Originating Communication Device",{"@attributes":{"id":"p-0047","num":"0046"},"figref":"FIG. 2","b":["110","110","100","110","210","214","218","220","234"]},"The location detector  is hardware, software, firmware or a combination thereof for detecting the location of the originating communication device . The location detector  embodies localization technology that can be based on geometric, statistical, scene analysis and proximity based technologies or any combination of these technologies (e.g., GPS technology, A-GPS technology, cell locating technology in a cellular system, IP geolocation, WiFi localization technology, and WiMAX localization technology, or other localization technology, to determine the location of the originating communication device . Alternatively, the location detector  communicates with the location services  to identify the location of the originating communication device  using localization technologies such as Control Plane location, User Plane location, Secure User Plane Location (SUPL) and telephony signaling protocols (for example, SS). The location detector  provides the location information  to the social networking service interface . Note that the location detector  is not the only source of the location information. That is, the location information may be received from the social networking system  based on IP address (or other means available to the system for determining location) of the originating communication device  or the location information may be received manually from the user input module .","The communication module  is hardware, software, firmware or a combination thereof for communicating with the social networking system  via channels ,  established using a wired or wireless communication method. Although the location detector  is illustrated as a component separate from the communication module  in the example of , the location detector  may be combined with the communication module . For instance, the communication module  may approximate the location of the originating communication device  by measuring the strengths of wireless signals from radio access stations in a cellular communication system that is also used for establishing the communication channels ,  to the social networking system . Further, the communication module  may receive the location information (for example, based on IP address of the originating communication device ) from the social networking system  and forward the location information to the social networking service interface .","The user input module  is hardware, software or a combination thereof for receiving user input from the user. The user input module  may comprise, among others, a keypad, a keyboard, a touchscreen or a mouse for performing various operations associated with the social networking service such as receiving a text input identifying the geographic location, or a click indicating the location of the user on a map or selecting the location from a menu. The input location information may be analyzed by the location information processor  to determine the location of the user, as described below in detail with reference to . The user input module  may also receive user inputs associated with setting of location privacy parameters to set parameters of the privacy setting module . The privacy parameters indicate which users may access or receive location information and\/or the resolution of the location information to be shared with each user.","The display  is an output interface for rendering and displaying user interface screens associated with the social networking service. Examples of user interfaces are described below in detail with reference to .","The social networking service interface  is hardware, software, firmware or a combination thereof providing a communication and application programming interface (API) with the social networking system  via the communication module . Alternatively, a standard web browser may be substituted for a custom API. These interfaces allow access to functions of the social networking service, including, logging into the social networking system , communication with the social networking system  via communication mechanisms (e.g., instant messages and text messages), uploading content items such as photos, audio, or video files, and setting privacy parameters associated with the content items. The social networking service interface  includes, among other components, a location-based content creator  and the location privacy setting module . The social networking service interface  can execute as a standalone application, a web browser with a plugin extension providing the appropriate interfaces, or a standard web browser.","The location-based content creator  is responsible for creating a content item to be shared on the social networking service and for adding the location information to the content item. Specifically, the location-based content generator  receives, among other data, the content item and the location information associated with the content item. The location-based content creator  then generates a location tagged content item by adding the location information as metadata of the content item. Alternatively, the location-based content creator  may create a content item and a separate message that indicates the location associated with the content item. The separate message indicating the location associated with the content item may be generated automatically without any user interactions. The location-based content creator  may also generate a location tagged content item periodically without user intervention to constantly update the location of the user to be published on the social networking system .","The location privacy setting module  is responsible for receiving user input and setting various privacy parameters associated with the content item according to user input. The location privacy setting module  allows users to set location privacy parameters associated with sharing of the location information independently of global privacy parameters associated with sharing the content item. Specifically, the location privacy setting module  receives user input associated with sharing of the location information (in addition to the content item) for other users with whom the user has a social networking relationship. The location privacy setting module  may also receive user input concerning the permissible resolution of the location information for particular users.","Alternatively, these settings may also be determined by the social networking system based on information available to the system about the user's relationships with other users. The location privacy setting module  generates and sends location privacy parameters to the location privacy module  of the location-based content processor module  to determine the other users who may access or receive location information and the resolution of the location information the other users may access or receive, as described below in detail with reference to .","The location privacy parameters may indicate that the location information associated with a content item at a city level (e.g., Palo Alto, Calif.) be provided to one group of users while the location information at a street level (e.g., 101 University Avenue, Palo Alto, Calif.) be provided to another group of users. The location privacy setting module  may establish which users may share the location information using the technology disclosed, for example, in U.S. patent application Ser. No. 12\/485,856 entitled \u201cSelective Content Accessibility in a Social Network,\u201d filed on Jun. 16, 2009, which is incorporated herein by reference in its entirety.","Although the location privacy setting module  is illustrated in  as being implemented on the originating communication device , the location privacy setting module  may be implemented on the social networking system .","Architecture of Location-Based Content Processor Module",{"@attributes":{"id":"p-0058","num":"0057"},"figref":"FIG. 3","b":["122","122","110","142","144","124","122","310","314","318","322","326","330","334"]},"The location approximation module  can approximate the location of the originating communication device  based on available information, including communication parameters such as the IP (Internet Protocol) address or the phone number associated with the originating communication device . The location approximation module  receives available information (e.g., an IP address or phone number) from a communication module (not shown) of the social networking system  and accesses data stored in the location information database  to determine a geographic location associated with information provided. In this way, the location approximation module  may approximate the location of the originating communication device  without receiving the location information from the originating communication device . The approximated location may be used as the location associated with the content item if the location information is not provided by the originating communication device  or to present maps relevant to the current location of the user for various locations based services. Further, the approximated location may be sent to the originating communication device  for display, as described below in detail with reference to .","The location information provided by the originating communication device  (as embedded in the content item or as included in a separate message) is generally used to indicate the location associated with the content item. However, if the location information is not provided by the originating communication device , the location information processor  generates the location information indicating a likely location of the user based on available data. The location information  generated at the location information processor  can be sent to the content database  for storing in association with the content item.","The location information database  stores data accessible to the location approximation module  and\/or the location information processor  to approximate, infer or predict the location of the originating communication device . The data stored in the location information database  may include, among others, mapping of IP addresses or phone numbers to geographic locations, data indicating relationships between street addresses and the combination of the longitude and latitude, data related to previous locations of users, user profiles (including user's resident address or office address), and user group information including identity of user groups and their users.","The administration module  performs various record keeping operations associated with the location information stored in the content database . The record keeping operations may include, among others, indexing the location information, retrieving the location information, editing location information associated with a user or a content item, deleting location information associated with a user upon request, deleting outdated content items and location information, and archiving the content items and location information to a secondary storage device or system.","The content data processor  receives a content item  from the originating communication device . If the received content is tagged with the location information, the content data processor  extracts the location information from the content and stores the content and the location information in the content database . In order to store the content items efficiently, the content data processor  may preprocess (e.g., compress or downscale) the content items before storing in the content database .","If the received content item is not tagged with location information, the content data processor  sends a signal  to the location information processor  to generate the location information  based on various accessible data, as described below in detail with reference to . The location information  from the location information processor  and the content item is stored in the content database . The location information  generated at the location information processor  may be presented to the user of the originating communication device  for confirmation before storing in the content database .","The content data processor  may also perform translation of location information received from the originating communication device  for storage in the content database . The location information may be stored in the content database in various formats, such as the combination of longitude and latitude. The content data processor  may convert the location information in other formats (e.g., street address) into a combination of longitude and latitude, and then store the location information in the content database . Similarly, the combination of longitude and latitude may be converted into street address and one or both of which may be stored in the content database.","The content database  receives and stores the content item and the location information associated with the content item. The content item and the location information stored in the content database  may be managed by the administration module . The location information  and the content item  are retrieved by the content publishing module  for making available or sending to the communication devices .","The location privacy module  stores location privacy parameters that control who may access location information associated with a particular content item and\/or what level of resolution those entitled to view location information will be permitted to access. The location privacy parameters may be received from the location privacy setting module  of the originating communication device . The location privacy module  may implement policies or rules for automatically setting the privacy parameters for location information associated with a content item.","Specifically, the policies or rules may automatically set the privacy parameters so that content item generated at a certain location or at a certain time are: (i) not shared with other users, (ii) only shared with a predefined group of users or (iii) shared with different groups of users at different levels of resolution (e.g., street level resolution or city level resolution). For example, the location privacy module  may implement a policy that the user's location may only be shared between 9:00 a.m. and 5:00 p.m. The location privacy module  may implement a policy that location information may not be shared, except for when the user posts a content item within a predefined geographical area. For example, privacy parameters may dictate that location information is only shared about the content item posted when the user in is California, but not if the user leaves the state.","Further, the policies or rules may also set the location privacy parameters so that the location information associated with certain types of content items is shared with other users but not location information associated with other types of content items. The content publishing module  receives the location privacy parameters  from the location privacy module  and determines the users to receive the location information, and the resolution of the location information to be provided to the communication devices  of the users. Privacy settings for content items and for location information may be set independent of each other. Hence, even if a user is not permitted to receive location information for a content item, the user may still be permitted to receive the content item itself.","Although the location privacy module  is illustrated in  as a component separate from the global privacy module , the location privacy module  may be implemented as a component of the global privacy module . Alternatively, the location privacy module  may be a module separate from the location-based content processor module . Further, the location privacy module  may be a module independent of the location-based content processor module  or be combined with other modules in the social networking system .","Example of Location Determination","If the originating communication device  has the capability to determine its location, the location associated with the content item is received from the originating communication device  either as data embedded in the content item or as a message separate from the content item. But if the originating communication device  does not have the capability to determine its locations or when a component for determining the location of the originating communication device  is not functioning for some reason, the location information associated with the content item may not be provided by the originating communication device .","If the social networking system  does not receive the location information from the originating communication device , the location information processor  of the social networking system  may predict or infer the current location of the originating communication device . In one embodiment, even in circumstances where the originating communication device  has the capability to determine its location, the location determined by the originating communication device  may be supplemented by other sources of location information to enhance the accuracy of the location information.",{"@attributes":{"id":"p-0073","num":"0072"},"figref":"FIG. 4","b":["314","314","410","420","430","440","450","400","100"]},"The user input analyzer  receives and analyzes user input received at the originating communication device  to determine, predict or infer the location of the originating communication device . A user may provide user input indicating the geographic location of the user, such as a combination of the longitude and latitude, the street address of the location, and the name of the business\/service (e.g., Home Depot in Cupertino, Calif.). Alternatively, the user may provide input indicating proximity to another user of the social networking service from which the location of the user may be determined. For example, user X of the originating communication device  may provide the following user input \u201cI am with Y\u201d indicating that user X is currently at the same location as user Y. If the location of user Y is known, the location of X can also be determined. Conversely, if the location of user X is known but the location of user Y is not known, the location of user Y may be determined from the same user input. Other user inputs indicating relative distance and direction from a user or a geographic location may also be provided to determine a user's location (e.g., \u201cI am 50 yards north of user Y\u201d and \u201cI am one block north of the Empire State Building.\u201d). Further, user input may indicate where two or more users of the social networking service are located (e.g., \u201cX and Y are at Bar ABC in Palo Alto.\u201d) to allow the social networking system  to update the location information for the two or more users. The user input analyzer  may detect and infer location automatically based on a parser which would include keywords or phrases such as \u201cat\u201d, \u201cwith\u201d, \u201cnear\u201d, \u201cin\u201d and their equivalents in all the languages that the system is localized for. In addition, a realtime natural language processing may analyze the phrase for context to provide a greater degree of accuracy in determining the location.","Further, the user input analyzer  may determine the location of the user based on user input provided for other purposes. For example, when a user runs an internet search for a certain geographic location or flight from one location to the other, the originating communication device  may capture such user input and analyze the user input to infer or predict the location of the user.","The third party service interface module  accesses a third party service to obtain information of the user. The third party must be an entity that can provide reliable location information for a user, such as public transport operators, banks or airlines. After receiving user inputs indicating that the user is taking a certain vehicle, vessel or flight to move from one location to another, the third party service interface module  may communicate with the third party service to obtain the updated location information of the vehicle, vessel or flight that the user is currently using.","The previous location tracker  determines the likely location of the user based on past patterns of user locations. For example, the previous location tracker  may predict that any content items received from the user between 9:00 a.m. to 5:00 p.m. originates from an office address if the location information of the user received between 9:00 a.m. to 5:00 p.m. on previous occasions predominantly indicated that the user was at the office address. Various heuristics may also be employed to increase the accuracy of inference or prediction of the location information. Predictive models may use classifiers based on machine learning techniques such as the k-nearest neighbor algorithm or Bayesian classifiers, and information filtering algorithms such as collaborative filtering.","The content analyzer  processes the substance of the content item to determine if the content item itself might provide a location associated with the content item. The substance of the content item may be analyzed using various content recognition tools such as visual recognition, OCR (Optical Character Recognition) and speech recognition. For example, the content analyzer  may employ an OCR (Optical Character Recognition) technology to read any characters appearing in a photograph or a web document to determine a likely location associated with the content item. As another example, the content analyzer  may recognize a unique landmark (e.g., Eifel Tower) appearing in a photograph and associate the photograph with the known location of the landmark. The content analyzer  may employ image detection algorithms to identify salient features in the image and matching these features against a database of known points of interest.","The user group activity tracker  tracks activities of various groups that the user is associated with and predicts the location of the user based on the activities of such groups. For example, if a large number of users in a group (e.g., high school alumni) send location information indicating congregation at a certain location, the user group activity tracker  may predict or infer that other users belonging to the group are also at this location. Further, the user group activity tracker  may analyze information made available on the social networking system  for members of the group to better predict the location of the user. For example, the user group activity tracker  may infer or predict the location of the members of the group based on postings on the webpage of the group or a group-wide email sent to members of a group.","The location engine  collects, evaluates, and scores the location predicted or detected by the location approximation module , the user input analyzer , the third party service interface module , the previous location tracker , the content analyzer  and the user group activity tracker . Based on the location predicted or detected from such multiples sources, the location engine  determines the most likely location of the user. The location engine  may apply various heuristics to determine the most likely location of the user. For example, more weight is given if one or more of the sources indicate that the user is likely to be at a certain location. The predicted or inferred location of the user is provided to the content database  for storage with the content item.","Method of Sharing Content Items and Associated Location",{"@attributes":{"id":"p-0081","num":"0080"},"figref":"FIG. 5","b":["310","110","502","100","100","506","110","100","110","110","110","530","110","220"]},"Referring to , a user interface of the originating communication device displaying the approximate location is illustrated. In the example of , the originating communication device is a smartphone with limited screen space. The user interface includes a content upload section  and published content sections A through C for displaying content items generated and published by the user of the originating communication device or other users of the social networking system . The content upload section  includes a thumbnail image  representing the user of the originating communication device, a text box  for receiving content items from the user to be published via the social networking service, and a \u201cshare\u201d button for receiving approval from the user to publish the content item and\/or the location information.","The content upload section  also includes a \u201clocation\u201d indicator  indicating whether the location feature is activated. When the location feature is activated the originating communication device generates content items tagged with location information. When the location feature is disabled, the originating communication device does not tag the content item with location information. The activation and disabling of the location feature can be toggled by clicking the indicator . In the user interface of , the approximate location of the user \u201cJoe\u201d is displayed as being \u201cNear 121 Lytton Ave., Palo Alto, Calif.\u201d. As described above in , the approximate location is determined by the social networking system  based on the IP address or other communication properties of the originating communication device.","Each of the published content sections A through C includes content items published by the user of the originating communication device or other users. In the example of , the content item in the content section A is a combination of a message  and a photograph . The location information  displays the location of user \u201cJared\u201d when the message  and the photograph  were uploaded by user \u201cJared\u201d. Similarly, the content sections B and C displays content items published by other users \u201cJulieta\u201d and \u201cSabra-Anne \u201d","Referring back to , the originating communication device  obtains  the location information of the originating communication device . As described above in detail with reference to , the location information may be obtained by the operation of the location detector  or by receiving the user input via the user input module .  illustrates the location information being obtained from a GPS system or other locating mechanism after the user clicks the \u201cFind My Location\u201d button . The location  as determined by the originating communication device  is displayed in an area  of the user interface as \u201c125 Lytton Ave., Palo Alto, Calif.\u201d","Referring back to , the originating communication device  then creates or retrieves  the content item. The content item may be created or retrieved based on various user interactions such as capturing a photograph using a camera installed on the originating communication device , recording audio\/video clips using the camera and a microphone, and retrieving data stored in the originating communication device . Alternatively, the content item may be created automatically after detecting an event or after elapse of a predetermined amount of time.","The originating communication device  receives  the user input indicating that the content item may be published. Referring to the example of , the user input for publishing the content item corresponds to clicking the \u201cshare\u201d button  on the user interface. Referring back to , the originating communication device  imbeds  the location information in the content data. The content data is then sent  from the originating communication device  to the social networking system . Alternatively, a separate message indicating the location associated with the content data may be generated at the originating communication device  and sent to the social networking system  instead of embedding the location information in the content data.","The social networking system  extracts  the location information from the received content data if the location information is embedded in the content data. If the location information is not available, the social networking system  may determine  the location associated with the content item using various factors, as described below in detail with reference to . Based on a global privacy setting and the location privacy parameters, the social networking system  determines  the users who may access or receive the content item, and the resolution of the location information to be sent or made available to each user. Specifically, for a given user, the content publishing module  determines the set of other users to access or receive the content item from the user's global privacy parameters stored in the global privacy module. For each user determined to receive the content item, the content publishing module  further determines whether a user should receive the location information, and if so, the resolution of the location information based on location privacy parameters  and\/or the global privacy setting.","After determining the users who may access or receive the content item and the resolution of the location information, the social networking system  makes available or sends  the content item and first location information to the first communication device A of a first user according to the determination. To make this information available, the social networking system  can transmit a message (e.g., an SMS message to the first user's telephone or an email) to the first user, or update a home page of the first user.","It should be noted here that a user receives the location information for other users with whom he has a social relationship, without ever having to provide identification information of those other users' communications devices to the social networking system. For example, referring to , the user Joe receives the location information for other users Jared and Julieta without ever having to manual entire any identification information for these other users' communication device (e.g., their mobile telephone numbers). This makes the location information significantly more available than would otherwise be possible using existing system which imposes this requirement.","Then the first communication device A may display  the content item and the first location information. The social networking system  may also make available or send  the content item and location information to the second communication device B of a second user. Then the second communication device B may display  the content item and location information. The resolution of the first location information and the resolution of the second information may be set differently depending on the location privacy setting of the user publishing the content item. For example, the first location information may be provided to a group of friends with a distant relationship (e.g., friends of a friend) to indicate the location at a city level (e.g., Palo Alto, Calif.) while the second location information may be provided to another group of friends with a close relationship (e.g., friends or relatives) to indicate the location at a street level (e.g., 101 University Avenue, Palo Alto, Calif.). The ability to provide location information of different resolutions to different communication devices, allows the user to more finely control the location information shared with other users depending on, for example, the reliability or trustworthiness of the users.","Various modifications can be made to the processes described in . Instead of embedding the location information in the content item at the originating communication device , the originating communication device  may generate and send a message to the social network system  including the location information. Also, the process of sending  the IP address, determining  the approximate location, sending  the approximate location and\/or the displaying  of the approximate location may be omitted.","Alternative User Interface Example",{"@attributes":{"id":"p-0093","num":"0092"},"figref":["FIGS. 7A through 7D","FIGS. 7A through 7D","FIGS. 6A and 6B","FIG. 7A","FIG. 7A"],"b":["704","710","724","714","714","704","724","714","714","110"]},"The published content section A includes a location filtering button  that activates or disables filtering operations based on the location. When location filtering is active, the content item displayed in the published content sections A through C are filtered so that the originating communication device only displays content items tagged with location information indicating locations in proximity to the originating communication device. To filter content items based on proximity, locations may be grouped into multiple geographic grids. Only content items with location information tagged with a location in the same geographic grid as the location of the device requesting the content item are selected and displayed. When the location filtering is disabled, content item from other users is displayed regardless of the location tagged to the content item.","The content upload section  allows the user to publish content items on the social networking service. The content uploading section  includes a text box  for entering text or other content items, a tagging menu  allowing the user to select the data to be tagged with the message, and a \u201cShare\u201d button  for approving the sharing of content items and\/or location information. The tagging menu  includes a \u201clocation\u201d button, a \u201clink\u201d button, a \u201cphoto\u201d button and a \u201cvideo\u201d button. The \u201clocation\u201d button is associated with tagging location information to the message. After the \u201clocation\u201d button is clicked, the screen of the originating communication device displays a user interface as illustrated in . The \u201clink\u201d button, the \u201cphoto\u201d button, and the \u201cvideo\u201d button are associated with adding a hypertext link, an image file or a video clip to the message. The location button may also function as a switch, displaying the user interface as illustrated in  when the user focuses the interface on the content upload section.",{"@attributes":{"id":"p-0096","num":"0095"},"figref":"FIG. 7B","b":["754","768","776"]},{"@attributes":{"id":"p-0097","num":"0096"},"figref":"FIG. 7C","b":["776","776","780","782","780","784","100","786","780","780","790"]},{"@attributes":{"id":"p-0098","num":"0097"},"figref":["FIG. 7D","FIG. 7D"],"b":["780","100","794","798","758"]},"Determining User Location",{"@attributes":{"id":"p-0099","num":"0098"},"figref":"FIG. 8","b":["810","810","110","814"]},"If the location information is not received from the originating communication device , the location of the user is estimated based on the information available to the social networking system . Specifically, the approximate location of the user is obtained from the location approximation module  of the social networking system . The user input is analyzed  by the user input analyzer  to determine the most likely location of the user. The user input includes, for example, search queries on an Internet search engine. The location information is also received  at the third party service interface module  of the social networking system  from a third party service. The pattern of user's previous locations is analyzed  by the previous location tracker  of the social networking system to determine the most likely location of the user. The content item is also analyzed  by the content analyzer  to determine the location of the user. The events of groups affiliated with the user are also analyzed  by the user group activity tracker . Based on the results of some or all of these and\/or other factors, the social networking system  determines  the most likely location of the user. Then the process terminates.","The steps illustrated in  are only illustrative and not restrictive. Only some of the steps illustrated in  may be performed to estimate the location of the user. Further, other information may be received or processed at the social networking system  to estimate the current location of the user.","Applicable Use of Content Items Tagged with Location Information","Content tagged with location information may be used to provide various location-based services to users of a social networking service. The social networking system  may filter and send the content item that is relevant to the current location of the user. As described above with reference to , for example, the content item published by various users may be filtered based on the locations associated with the content item by clicking the location filtering button . Further, the content item may be prioritized and presented to the user based on the proximity of the locations associated with the content item.","The location-based services provided by the social networking service may also facilitate reviewing and rating of business establishments (e.g., restaurants) by users. The review and ratings of the services may be uploaded to the social networking system  as content items tagged with locations, and stored in the social networking system  for reference by other users.","The social networking system  may also provide advertisements or send promotional materials based on the location information received from the user. When the user uploads a content item associated with a location, the social networking system  may automatically send coupons or other promotional items to the user. Other users may also send coupons or other promotional items to the user sharing the location. The content item published by other users may be digital coupons that are tagged with location where the digital coupons can be used.","The location-based services provided by the social networking service may also allow a user to identify other users in the area. The social networking system  may filter recent content items to obtain a list of users in a certain geographic location. The user may then send emails, instant messages, or use messaging services provided by the social networking service to meet with other users. The user may also be automatically directed to or provided with directions to the location of other members. The user may also set up notifications within a specific geographic location to allow them to automatically be notified when other members are within that geographic location.","In one embodiment, the location-based services provided by the social networking service may also allow a user to find other objects in a certain geographic location, including, but not limited to, events, photos, videos, stories, documents, reviews, messages, and notes.","In one embodiment, the location-based services provided by the social networking service may also allow a user to dynamically generate lists of friends that can then be used as a filter on the content items being viewed.","In one embodiment, the location-based services allow a user to view a map of a specific geographic location that displays many object types, including other members, content items, events and others.","In one embodiment, the location-based services may allow a user to set up a schedule of geographic locations that the user will be travelling to and automatically update selected members when they arrive or leave each location through the social networking system.","Further, although embodiments of this disclosure are primarily described with respect to a user of a social networking service making a content item and location information accessible to other users of the social networking system, other embodiments may allow a user to make a content item and location information available to others who are not users of the social networking system.","Components of the originating communication device  and the social networking system  may be implemented in software, firmware, hardware or a combination thereof. The components implemented as software may be stored in a computer readable storage medium, such as, but is not limited to, any type of disk including floppy disks, optical disks, CD-ROMs, magnetic-optical disks, read-only memories (ROMs), random access memories (RAMs), EPROMs, EEPROMs, magnetic or optical cards, application specific integrated circuits (ASICs), or any type of media suitable for storing electronic instructions.","Finally, it should be noted that the language used in the specification has been principally selected for readability and instructional purposes, and may not have been selected to delineate or circumscribe the inventive subject matter. Accordingly, the disclosure of the present invention is intended to be illustrative, but not limiting, of the scope of the invention, which is set forth in the following claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF DRAWINGS","p":[{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":["FIG. 2","FIG. 1"]},{"@attributes":{"id":"p-0017","num":"0016"},"figref":["FIG. 3","FIG. 1"]},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIGS. 6A and 6B"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIGS. 7A through 7D"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 8"}]},"DETDESC":[{},{}]}
