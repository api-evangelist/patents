---
title: Load balancing in a cellular telecommunication network
abstract: A method and apparatus for controlling a Network Load Balancing (NLB) algorithm that balances a traffic load between multiple downlink (DL) sectors in a cellular telecommunication network. A Connection Integrity Preservation (CIP) algorithm, which runs on top of the NLB algorithm in the Radio Network Controller/Base Station Controller (RNC/BSC), minimizes the risk of degrading network performance due to NLB offload decisions. The CIP algorithm may override an NLB offload decision, for example, if there have been too many offload failures, there are no target DL sectors available to acquire an offloaded Access Terminal (AT), or the offloaded AT is not acquired within a threshold time period. The CIP algorithm ensures required metrics are collected, and minimizes the impact on RNC/BSC processing due to Routing Update messages needed to make offload decisions. The invention enables the NLB algorithm to realize its potential without negative side-effects.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08694018&OS=08694018&RS=08694018
owner: Telefonaktiebolaget L M Ericsson (Publ)
number: 08694018
owner_city: Stockholm
owner_country: SE
publication_date: 20110616
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","STATEMENT REGARDING FEDERALLY SPONSORED RESEARCH OR DEVELOPMENT","REFERENCE TO SEQUENCE LISTING, A TABLE, OR A COMPUTER PROGRAM LISTING COMPACT DISC APPENDIX","BACKGROUND","SUMMARY","DETAILED DESCRIPTION"],"p":["This application claims the benefit of U.S. Provisional Patent Application No. 61\/451,235 filed Mar. 10, 2011; U.S. Provisional Patent Application No. 61\/451,245 filed Mar. 10, 2011; and U.S. Provisional Patent Application No. 61\/451,545 filed Mar. 10, 2011, the disclosures of which are fully incorporated herein by reference.","NOT APPLICABLE","NOT APPLICABLE","The present invention relates to cellular telecommunication systems. More particularly, and not by way of limitation, the present invention is directed to an apparatus and method for balancing a traffic load between multiple radio cells.","In existing 1x Evolved-Data Optimized (1x-EV-DO) advanced networks, a Network Load Balancing (NLB) algorithm provides methods of off-loading traffic from more loaded radio cells to less loaded radio cells by manipulating allowed forward\/downlink Base Transceiver Station (BTS) sectors from an Active Set (A_SET), for every active over-the-air connection. The NLB algorithm utilizes the measured load on BTS sectors in the A_SET and forces an Access Terminal (AT) to get service from a less loaded sector. This is done by having the Radio Network Controller (RNC) or Base Station Controller (BSC) unlock a Data Rate Control Lock (DRCLock) bit in a serving downlink (DRCLock=0), which forces the AT to select a different serving downlink sector among the pilots from the A_SET.","Although helping to balance the traffic load and improve capacity and individual user throughput, the NLB algorithm may degrade existing radio connection Key Performance Indicators (KPIs) for several reasons. First, since the algorithm moves ATs from preferred downlink sectors to possibly less optimum sectors, this may lead to degraded connection loss statistics. The connection drop rate is an important KPI that network operators use to measure overall health of the over-the-air connectivity. Degradation of this KPI could invalidate capacity gains and prevent successful NLB implementation.","Second, the NLB algorithm requires periodic Route Update reports from the ATs so that the algorithm can consider current RF signal quality when making its balancing decisions. There is no option to set periodic reporting in 1x-EV-DO, so Route Update Messages have to be solicited to get the reports. This puts additional strain on the call processing entity at the RNC, and needs to be minimized without compromising the ability of the NLB algorithm to gauge the signal strengths of forward\/downlink pilots in the A_SET.","Third, the NLB algorithm must have a correct set of NLB metrics to determine whether moving a given AT from one downlink sector to another will do more harm than good due to adverse effects on other ATs. Without mechanisms for obtaining these metrics, the NLB algorithm may degrade Signal-to-Noise Ratio (SNR) and Quality of Service (QoS) for larger numbers of ATs.","The present invention provides solutions to the above-mentioned problems. In one embodiment, the invention provides an RNC algorithm referred to herein as the Connection Integrity Preservation (CIP) algorithm, which runs on top of the NLB algorithm and provides steps, measures, and checks that minimize the risk of degrading over-the-air connectivity KPIs due to forced offload decisions, and enable the NLB algorithm to realize its potential without negative side-effects. The CIP algorithm runs for each active connection for which NLB offloading decisions have been made, and ensures that all forward\/downlink servers that have been force-barred by the NLB can be made available again, when the CIP algorithm detects that the connection may drop. In addition, basic protections are put in place to prevent the NLB algorithm from making repetitive offload decisions if there is a history of previously failed offload attempts during the same connection.","In another embodiment, the present invention also ensures the NLB algorithm receives the Route Update Messages it needs to gauge the signal strengths of forward\/downlink pilots in an AT's A_SET, while minimizing the signaling and call processing load on the RNC. This embodiment ensures that a minimum threshold level of contention is present in the current forward\/downlink sector before the RNC sends periodic Route Update Request messages and processes the responses to those messages. This minimizes the call processing impact by ensuring that Route Update Requests and Route Update Messages are sent only when required. Furthermore, this embodiment provides procedures for unlocking the DRCLock bit not only on the serving forward\/downlink sector, but also on other loaded sectors so that the AT is forced to the least loaded sector.","In a further embodiment, the invention also prevents excessive sector switching where the capacity benefit (in terms of metric difference between the current serving sector and a target sector) is too small. Likewise, the invention may prevent a forced offload when the adverse impact on other ATs is determined to be too great.","In a particular embodiment, the present invention is directed to a method of controlling an NLB algorithm that balances a traffic load between multiple downlink (DL) sectors in a cellular telecommunication network, wherein the method is performed by a processor associated with a Radio Network Controller\/Base Station Controller (RNC\/BSC). The method includes the steps of detecting that the NLB algorithm has decided to offload a given Access Terminal (AT) from a current serving DL sector to one of a plurality of target DL sectors in the given AT's active set due to a high traffic load in the current serving DL sector; determining a count of previous attempts to offload the given AT from the current serving DL sector that failed because the given AT was not acquired by any of the target DL sectors; and when the count of failed previous attempts to offload the given AT from the current serving DL sector exceeds a threshold amount, overriding the NLB algorithm decision to offload the given AT from the current serving DL sector.","In further embodiments, the method may include overriding the NLB algorithm decision to offload the given AT from the current serving DL sector when an earlier attempt to offload the given AT failed and the time period since the failure has been too short. Additionally, the invention may override the NLB algorithm decision to offload the given AT from the current serving DL sector when there are no target DL sectors in the given AT's active set that are currently allowed to acquire the given AT.","In another embodiment, the invention is directed to an apparatus in an RNC\/BSC for controlling an NLB algorithm that balances a traffic load between multiple DL sectors in a cellular telecommunication network. The apparatus includes a processor and a non-transitory memory for storing a Connection Integrity Preservation (CIP) algorithm. When the processor executes the CIP algorithm, the apparatus is caused to perform the steps of detecting that the NLB algorithm has decided to offload a given AT from a current serving DL sector to one of a plurality of target DL sectors in the given AT's active set due to a high traffic load in the current serving DL sector; determining a count of previous attempts to offload the given AT from the current serving DL sector that failed because the given AT was not acquired by any of the target DL sectors; and when the count of failed previous attempts to offload the given AT from the current serving DL sector exceeds a threshold amount, overriding the NLB algorithm decision to offload the given AT from the current serving DL sector.","In another embodiment, the invention is directed to an apparatus in an RNC\/BSC for controlling an NLB algorithm that balances a traffic load between multiple DL sectors in a cellular telecommunication network. The apparatus includes a processor and a non-transitory memory for storing a CIP algorithm. When the processor executes the CIP algorithm, the apparatus is caused to perform the steps of determining whether a time period since an earlier failed attempt to offload the given AT has been too short; and overriding the NLB algorithm decision to offload the given AT from the current serving DL sector when the time period since the earlier failed attempt has been too short.","In another embodiment, the invention is directed to an apparatus in an RNC\/BSC for controlling an NLB algorithm that balances a traffic load between multiple DL sectors in a cellular telecommunication network. The apparatus includes a processor and a non-transitory memory for storing a CIP algorithm. When the processor executes the CIP algorithm, the apparatus is caused to perform the steps of determining whether there are any target DL sectors in the given AT's active set that are currently allowed to acquire the given AT; and overriding the NLB algorithm decision to offload the given AT from the current serving DL sector when there are no target DL sectors in the given AT's active set that are currently allowed to acquire the given AT.","In the following detailed description, numerous specific details are set forth in order to provide a thorough understanding of the invention. However, it will be understood by those skilled in the art that the present invention may be practiced without these specific details. In other instances, well-known methods, procedures, components and circuits have not been described in detail so as not to obscure the present invention. Additionally, it should be understood that the invention can be implemented in hardware or in a combination of hardware processor(s) and computer program instructions stored on a non-transitory storage medium.",{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 1A","b":["11","12","13","1"]},"When the OffLoadTimer is >0 or the count of previously failed offloads of the given AT is greater than THOLD_, the method moves to step  where the CIP algorithm overrules the NLB decision and prevents unlocking of the DRCLock bit on the current serving DL sector. Data continues to be forwarded to the serving DL sector. However, when the OffLoadTimer=0 and the count of previously failed offloads of the given AT is less than THOLD_, the method moves to step  where the CIP algorithm causes the RNC to determine whether the DRCLock bit is set on any other sector\/cell in the given AT's current A_SET, other than the ones the NLB algorithm has indicated should be offloaded. In other words, the RNC determines whether there are any other DL sectors in the AT's A_SET that are allowed to acquire the AT. When there are none, the method returns to step  where the CIP algorithm overrules the NLB decision and prevents unlocking of the DRCLock bit on the current serving DL sector. The purpose of this check is to prevent forced offloads when there are no other radio nodes in the current A_SET capable of acquiring the offloaded AT. When there is at least one other sector in the current A_SET with the DRCLock bit set, the method moves to step  where the RNC honors the NLB algorithm decision and instructs the serving DL sector (and any other sectors the NLB selected) to force-unlock the DRCLock bit. At step , the flow of data to the serving DL sector is stopped and a SwitchTo timer is started (i.e., acquisition of the new serving DL sector is expected to occur within this time-out period). At step , the RNC saves all force-unlocked sectors in a list for later referral, if needed.",{"@attributes":{"id":"p-0025","num":"0024"},"figref":["FIG. 1B","FIG. 1A","FIG. 1A"],"b":["21","22","23","24","1","25"]},"The OffloadTimer timer and the OffloadFailed counter are utilized to prevent successive NLB-induced offloads that have recently failed to complete in the same active connection.","When the AT's DRCCover change is successfully decoded by the new radio node and the RNC gets that information within the SWITCH-TO time period, the method moves from step  to step  where the CIP algorithm stop\/resets the CIP's SwitchTo timer. At step , the CIP algorithm resets the OffloadFailed counter. The method then moves to step  where the CIP algorithm causes the RNC to monitor whether there is ever an event where acquisition on the serving DL is lost for a time greater than SWITCH_TO. If not, the RNC continues forwarding data to the current serving DL sector at step . However, if the acquisition on the serving DL is lost for a time greater than SWITCH_TO, this indicates an event where connection may be potentially lost. Thus the method moves to step  where the CIP algorithm determines whether there are any entries in the force-unlock list and if so, instructs all sectors in the force-unlock list to lock the DRCLock bit and clear the list. The method then returns to the start of .","It should also be noted that the OffloadTimer and OffloadFailed counter are initialized to zero (0) at every DL change; the CIP configurables, OFFLOAD_BARRED time, and SWITCH_TO time are set large enough to circumvent a 1x Tune-away; the CIP algorithm runs separately for each active connection; the CIP flow charts illustrated in  depict management of a given active connection in the context of NLB algorithm decisions; and the radio node gets cleared from the force-unlocked list if it drops out of the A_SET.","Thus, the above embodiment implements protective measures to prevent a connection drop in case an NLB-induced offload fails. Artificial unlocking of the best active set server is made revocable in case other radio nodes lose acquisition on the AT at any point after artificial unlock occurs, assuming that the force-unlocked radio node is still in the A_SET. Hysteresis is built into the CIP algorithm to protect against successive failed offload attempts.","In another embodiment, the present invention also ensures the NLB algorithm receives the Route Update Messages it needs to gauge the signal strengths of forward\/downlink pilots in the A_SET, while minimizing the signaling and call processing load on the RNC. This embodiment ensures that a minimum threshold level of contention is present in the current forward\/downlink sector before the RNC sends periodic Route Update Request messages and processes the responses to those messages. This minimizes the call processing impact by ensuring that Route Update Requests and Route Update Messages are sent only when required. Furthermore, this embodiment provides procedures for unlocking the DRCLock bit not only on the serving forward\/downlink sector, but also on other loaded sectors so that the AT is forced to the least loaded sector.","In the discussion that follows, \u201cNeff\u201d is the long-term measure of the number of users with non-empty queues. Each BTS sends Neff to the RNC, and the RNC queries the AT for a Route Update message only when user contention\/Neff at the current serving DL sector exceeds a configured minimum threshold (Neff_min_Threshold). The RNC then starts to periodically send a Route Update Request to the AT (with a period of RuR_periodicity). The AT responds by sending a Route Update message with the Signal-to-Interference (Ec\/lo) ratio of pilots in the A_SET.","The RNC then uses the metrics Neff, DRCLock, and Ec\/lo from the A_SET for its load balancing decision. The RNC compares the metrics among A_SET members and determines whether a legacy AT is a candidate for NLB. If so, the RNC offloads the AT from its capacity constrained sector by setting the DRCLock bit to 0 (out-of-lock) forbidding the AT to use that sector.",{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 2","b":["41","42","41","43","44"]},"At step , it is determined whether there is at least one sector \u201ci\u201d for which (NLB, dl\u2212NLB, i) is greater than Delta_Threshold. If not, the method returns to step . If yes, the method moves to step  where it is determined whether there are sectors \u201ck\u201d for which (NLB,dl\u2212NLB, k) is less than Delta_Threshold. If not, the method moves to step  where the RNC selects only the serving DL sector for DRCLock bit unlocking. If yes, the method moves to step  where the RNC selects for DRCLock bit unlocking, the serving DL sector and all other sector(s) with (NLB,dl\u2212NLB, k) less than Delta_Threshold.","In another embodiment, instead of using minimum contention\/Neff as the trigger to start sending periodic Route Update Request messages, the trigger may be a minimum effective physical layer, Tput, defined as DRC divided by Neff (hereafter, DRC_eff_min). Based on reports of contention\/Neff from the radio nodes and the periodically reported Ec\/lo for the pilots in the A_SET, applying the NLB metric will decide whether or not a forced sector switch from a serving sector to a target sector is needed. However if the difference between the metric measurements from the serving and target sectors is less than a configured Delta_Threshold, the forced sector switch is not performed. Additionally, the forced sector switch is not performed when the contention\/Neff level of the target sector is higher than a configured maximum threshold (Neff_max_Threshold).","In cases where more than two sectors are part of the A_SET, there may be a need to unlock the DRCLock bit on additional sectors besides the current serving DL sector. For example, there may be three pilots P, P, and P in the A_SET, with P having the highest reported Ec\/lo, P having the second highest reported Ec\/lo, and P having the lowest reported Ec\/lo. P, however, has the best NLB metric and P has the worst NLB metric. The current serving sector maps to P. In this case, there should be a switch from P to P as the target serving sector, but in order to do that, the DRCLock bit on both P and P must be unlocked to prevent the AT from accessing P.","In this manner, the present invention minimizes the call processing impact due to sending Route Update Request messages and receiving Route Update messages in response by sending Route Update Request messages only when the RNC determines the need for it. The invention provides potential additional capacity gain in the multi-sector SHO scenario by preventively unlocking the DRCLock bit not only on the serving DL sector, but also on other loaded sectors, targeting the least loaded sector. Additionally, the invention prevents excessive sector switching when the capacity benefit (in terms of metric difference between the current serving sector and the target sector) is too small.","As noted above, the NLB algorithm must have a correct set of NLB metrics to determine whether moving a given AT from one downlink sector to another will do more harm than good due to adverse effects on other ATs. Without mechanisms for obtaining these metrics, the NLB algorithm may degrade the SNR and QoS for larger numbers of ATs. Using a correct set of metrics is essential to ensure that the load balancing gains are realized.","1x Evolved-Data Optimized (1x-EV-DO) advanced networks support both best efforsts (BE) and delay sensitive (DS) flows. DS flows are given higher priority than BE flows during packet scheduling. Hence a DS flow active on a sector will impact the perceived throughput for a BE flow. If an AT is offloaded to a sector with a large number of DS flows, the AT may experience worse performance. Currently there is no consideration of impact due to DS flows. Also offloading a given AT may improve the user experience for that AT but degrade service for all other ATs. Currently, the NLB algorithm does not consider the impact on the performance of other users resulting from the network balancing. In an further embodiment of the present invention, these problems are also addressed.","In this embodiment, during the determination of AT offloading, the NLB algorithm computes an NLB metric to determine the sector to which traffic should be offloaded. This embodiment ensures that additional metrics are calculated, which consider the impact due to DS flows. Further the embodiment takes into account the performance of other users and overall sector throughput performance, and ensures it is not severely degraded.","The NLB algorithm is executed per AT. Based on the sector load (Neff), an AT's pilot strength (Ec\/lo), and the A_SET, a target sector is selected to offload the AT. An NLB Metric (NLB) has the following relation to each of these metrics:\n\n","In this embodiment, the NLB algorithm calculates an enhanced NLB Metric (NLB). The NLB algorithm first considers a DS flow factor. Since DS flows are given Entry higher priority in the network, having more DS flows implies fewer slots available to share between non-delay sensitive (e.g., BE) flows. This in turn will result in lower throughput. Hence a sector having high number of DS flows may not be a good candidate to which to offload ATs. In general, the relation between the enhanced NLBand DS flows can be summarized as:\n\nNLB\u221d(1\/DS_flow_factor)\n","The DS flow factor may be incorporated into the NLB calculations in several ways. As an example, it may be incorporated based on slot utilization. In this embodiment, the slots used by the DS flow are removed. Since during slot contention between a DS flow and BE flows it is highly likely that the DS flow will be given priority, removing the slots used by DS flows so as to eliminate this prioritization against other resource-contending users. The slot utilization can be a filtered number per sector averaged over a user-defined interval. This information should be available at the BTS level but may need to be extracted using an Application Programming Interface (API) and provided as an input to the NLB algorithm.\n\nNLB\u221d(1\/DS_flows_slot_usage)\n","The NLB algorithm also considers a Effective SNR Delta (SNR). When an AT is offloaded from a serving sector to a target sector, the decision is usually intended to improve the offloaded user's performance. The metrics do not consider the impact on the user experience of other users in the target sector. Often, however, offloading has a negative impact on other users in the target sector. SNRmay be used to control the degree of degradation.","SNRis the effective change in network SNR due to an AT being offloaded. It should be noted that other metrics may alternatively be utilized in this role. For example, SNR may be replaced with other quantities such as Ec\/Io or C\/I, which also provide a representation of the user's DL channel. SNRis used as a representation of potential change in user\/network throughput due to AT offloading. This can be viewed as a predictive metric and can be biased towards a given AT or sector throughput improvements. It may also help minimize AT offloadings that are less beneficial.","The following definitions are provided:\n\nSNR=Average_SNRrepresents the average of SNR across all users in the target sector\n\nSNR=Average_SNRrepresents the average of SNR across all users in the source sector not including given AT\n\nSNR=Average_SNR\n\nSNR*Average (SNR, SNR)\u2212*SNR\n\nwhere A and B are constants. For example average number of active connections in the sector\n","The SNRmeasurement may be incorporated into the NLB calculations in several ways. First, it may be implemented as a decision switch. In this embodiment, the NLB algorithm evaluates SNRfor each target sector in the given AT's A_SET (A_SET). An SNRdatafill is introduced, which determines the maximum allowable change in network SNR. If sector SNRis below the SNR, the sector is considered for NLB. Otherwise, the sector is not considered as a candidate sector for offload. The NLB algorithm then uses all other NLB metrics to determine a winning sector for the AT from the candidate sectors for NLB.","Second, the SNRmeasurement may be implemented as a priority switch. In this embodiment, the NLB algorithm evaluates SNRfor each target sector in the given ATs A_SET. The A_SET is ordered in the order of least SNR. The NLB algorithm then uses other NLB metrics to determine the winning sector for the AT.","Third, the SNRmeasurement may be implemented by integrating it with NLB metrics. In the following equation, \u2018Function\u2019 combines the two indicated quantities. Weighting coefficients \u03b1 and \u03b2 may be utilized to adjust the metric towards a given AT's performance or all user\/sector performance.",{"@attributes":{"id":"p-0050","num":"0051"},"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":["NLB","M"]},"mo":"=","mrow":{"mi":"Function","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mrow":[{"mi":"\u03b1","mo":"*","mfrac":{"msub":[{"mrow":[{"mo":["(",")"],"mrow":{"mi":["Ec","Io"],"mo":"\/"}},{"mi":"AT","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"1"}]},{"mi":["N","eff"]}]}},{"mi":"\u03b2","mo":"*","msub":{"mi":["SNR","delta_eff"]}}],"mo":","}}}}}}},"Note that the first term in the parentheses is the metric that determines the performance of a given AT. The second term is the metric that determines the performance of other users or the sector.",{"@attributes":{"id":"p-0052","num":"0053"},"figref":["FIG. 3","FIGS. 1A-1B","FIG. 2"],"b":["51","52","53","54","52","55"]},"For completeness, the RNC\/BSC  is also shown to include a BTS interface  for communicating data as well as various metrics, requests, responses, and instructions with a plurality of BTSs -labeled BTS-A through BTS-N. BTSs -control a number of DL sectors -, respectively.","As will be recognized by those skilled in the art, the innovative concepts described in the present application can be modified and varied over a wide range of applications. Accordingly, the scope of patented subject matter should not be limited to any of the specific exemplary teachings discussed above, but is instead defined by the following claims."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["In the following section, the invention will be described with reference to exemplary embodiments illustrated in the figures, in which:",{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIGS. 1A-1B"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 3"}]},"DETDESC":[{},{}]}
