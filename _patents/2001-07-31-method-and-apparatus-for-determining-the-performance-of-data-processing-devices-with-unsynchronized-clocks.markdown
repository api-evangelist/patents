---
title: Method and apparatus for determining the performance of data processing devices with unsynchronized clocks
abstract: Method and apparatus to enable measurement of response times, for example at one-second resolution or better, in a system where a starting location and ending location of processing are different. A timing data that signals a start of data processing is entered into a logging device and recorded in a system log file with a time stamp placed according to a system clock of the logging device. Output data from a CIS interface or TV interface that signals the end of processing is sent to the logging device and recorded in the system log file  with a time stamp placed according to the system clock of the logging device. The processing time is calculated with reference to the time stamps in the log data in the system log file associated with the processing.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07089156&OS=07089156&RS=07089156
owner: International Business Machines Corporation
number: 07089156
owner_city: Armonk
owner_country: US
publication_date: 20010731
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["FIELD OF THE INVENTION","BACKGROUND","SUMMARY","DETAILED DESCRIPTION"],"p":["The present invention relates to a method for measuring the performance of a data processing system. More particularly, it relates to a technique that can be applied effectively to the measurement of system performance when data processing in one task is started by one device or system and ended by another device or system.","Normally, when a system integration service or system-outsourcing service is provided, service level agreements are reached between service provider and client. Therefore, the achievement of service levels needs to be measured. To work out service levels concerning system response time, it is necessary to measure and evaluate response times in the system development and testing phases, and continue to measure and evaluate them after the system starts production runs. This requires an objective system for measuring response times.","In the case of Web application systems and client\/server systems, the source location of a user request and the destination location of a response to the user are the same. In such cases, a system that generates requests and receives responses can measure the time interval between the generation of a request and approval of a response using its system clock.","Clearly, the above mentioned technique used when the source location of a request and the destination location of a response are the same cannot be applied to cases where the source location of a request and the destination location of a response are different.","If the source location of a request and the destination location of a response are different, the response time can be measured, for example, as follows by using synchronization with a server that provides standard time. Specifically, the system from which the request is issued and the system at which the response arrives access the server that provides standard time and synchronize their system clocks with the standard time. The time when the request was issued and the time when the response was received are stamped according to the system clocks of the respective systems. Later, these times are gathered at one location to calculate the response time.","The above mentioned technique for synchronizing system clocks using standard time does not pose a particular problem if the temporal accuracy required is within a few seconds. However, difficulties arise if a subsecond temporal accuracy is required. Synchronization techniques on the order of several hundred milliseconds have been established on the Internet, but overhead information is necessary for synchronization. In the case of systems that require fast response, this overhead cannot be ignored as a load. Also, it is difficult to synchronize system clocks properly. Particularly, large systems such as systems for Olympic games, which require fast response speeds (one second or less) and consist of a large number of devices have difficulty in synchronizing the devices properly.","An object of the present invention is to provide a technique for measuring response times, for example, at one second resolution or better when the starting location (start device) and ending location (end device) of processing are different.","The present invention will be outlined below. Notification data of the start and end of processing are recorded by one logging device together with the time stamps of when the data (messages) were received. The time stamps attached to the messages are based on the system clock of the logging device. They represent the start time and end time of the processing. The processing time is calculated from the difference between the measured end time and start time. Since the start time and end time of processing are measured by one logging device (system clock), there is no need to synchronize system clocks. Besides, since the only system clock in the logging device is used, the calculated processing time does not depend on the system clocks of the start device and end device. This makes it possible to calculate accurate processing times.","The notification data of the start and end of processing are generated by the start device and end device and sent to the one logging device. The start of processing may also be generated by the logging device when input data is entered into the start device.","The notification data are sent to the logging device using TCP (Transmission Control Protocol) or UDP (User Datagram Protocol), where, TCP or UDP is used on IP (Internet Protocol). If Ethernet with a transfer speed of 10 Mbps is used, the notification data will reach the logging device with a network delay of a few milliseconds, which will not affect measurement accuracy on the order of several hundred milliseconds. In the case of UDP, higher accuracy can be achieved if ACK (connection acknowledgment function) and RETRY (data retransmission function) processes are eliminated in the protocol.","The notification data of the start and end of processing must be associated with each other in some way. Generally, data processing begins with entry of input data into the start device, performs predetermined processes on the input data, and ends at the end device. Consequently, the final data (output data) generally contains the content of the input data. Therefore, the input data is included in the start notification data and output data is included in the end notification data, and the start notification data and end notification data can be associated with each other by using predetermined keywords contained in the input data and output data.","Alternatively, if the start or end of processing can be identified by records in storage devices, changes in files stored in the storage devices may be monitored and included in the notification data. In this case, the start and end can be associated with each other by file name (directory name) and file size. Also, if the start and end of processing can be identified by messages generated by an API (Application Programming Interface) such as NETBIOS, these messages can be monitored and their contents can be included in the notification data. In this case, the start and end can be associated with each other by keywords contained in the messages.","A preferred embodiment of the present invention will be described in detail below with reference to the accompanying drawings. However, the present invention may be embodied in various different forms and should not be limited to the embodiment described herein. The same elements are given the same reference numerals throughout the embodiment described herein.","The embodiment will be described below in relation to a method and system. However, in addition to methods and systems, the present invention can be implemented as media containing programs that can be used on computers, as will be apparent to those skilled in the art. Therefore, the present invention can be implemented as hardware, software, or combinations of hardware and software. The media containing programs may be any computer-readable media such as hard disks, CD-ROMs, optical storage devices, or magnetic storage devices.","If the following embodiment uses computers as the devices described, it can use typical computers. The computer used by the embodiment comprises a central processing unit (CPU), main memory (RAM), nonvolatile storage (ROM), etc. and is connected to them via a bus. Besides, the bus may also be connected with a coprocessor, video accelerator, cache memory, input\/output controller, etc. External memories, data input devices, display devices, communications controllers, etc. are connected to the bus via appropriate interfaces. Needless to say, the computer may be equipped with other hardware resources that are generally installed on a computer. A typical external memory is a hard disk unit, but a magneto-optical storage system, optical memory unit, and semiconductor memory such as a flash memory can also be used. The data input devices include an input device such as a keyboard and pointing device such as a mouse. The data input devices may also include a voice input unit as well as an imaging device such as a scanner. The display device may be a CRT, liquid crystal display, plasma display unit, etc. The computer system may be a personal computer, workstation, main frame computer, etc.",{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 1"},"The system of this embodiment includes an event controller (EC) , data display system (DDS) , TV interface (TV) , broadcaster interface (BrInt) , scoreboard interface (SB) , printer (PR) , event manager (EM) , commentator information system interface (CISINT) , Internet result feed machine (IRF) , database server (DB) and backup domain control (BDC) , venue control (VC) and primary domain control (PDC) , gateway (GW) , and logging device . These devices are connected via a LAN  and router .","This system interoperates with another system  having a similar configuration. This redundancy of system configuration makes it possible to avoid delays in processing by operating the backup system immediately if part of the system fails. Redundancy has been increased because delays in processing are not permitted in situations, such as Olympic games, that draw global attention.","The event controller  has the capabilities to receive messages (time data) from a timing device  and calculate the standings of athletes, time differences between athletes, etc. based on the received messages. The results of the calculations are written into the database . The messages from the timing device are divided by a splitter . The event controller  controls the processes from the start to the end of an event, i.e., until all the athletes reach the goal.","The data display system  is connected with CATV ahead and has the capability to feed text information to CATV screens.","The TV interface  sends data to the broadcaster interface  through, for example, RS-232C. The broadcaster interface  blends the data with the TV images supplied by TV companies, and the resulting pictures are broadcast worldwide.","The scoreboard interface  has the capability to send data to scoreboards in stadiums through, for example, RS-232C.","The printer  is an item of equipment used to print out data (information) as hard copy.","The event manager  has the capability to update data in the database  according to data input by an operator. It manages the processing before an event starts and after the event ends.","The commentator information system interface  is connected with a commentator information system (CIS) controller ahead, and with a CIS workstation further ahead. The commentator information system interface  has the capability to transfer data to be displayed eventually on the CIS workstation. Sportscasters and commentators broadcast live from stadiums with reference to the display on the CIS workstation.","The Internet result feed machine  is connected with an MQ server ahead and is connected eventually to an Internet server which provides information publicly. The Internet result field machine  has the capability to transfer data to the Web servers to be presented publicly.","The database server and backup domain control  combine the functions of a database server and the functions of a backup domain control. Various information (standings, time differences, any world record or Olympic record, etc.) calculated by the EC is recorded in the database. The information entered by the EM is also recorded in the database. The backup domain control has the capability of controlling the backup system .","The venue control and primary domain control  control the entire system. They distribute the data (information) recorded in the database of the database server  to DDS, TV, SB, PR, CISINT, IRF, GW, etc. Particularly, they serve the important function of distributing data from the EC to TV and CISINT in real time during events.","The gateway  is connected to the MQ server and has the capability to feed non-real-time data. The data is distributed to an Olympic intranet service (INFO) server, Internet Web server, print distribution server, Olympic news distribution system for the press (WNPA), etc.","The logging device  is a system for logging the data needed to measure the performance of the present system. It will be described in detail later.","The system may contain more than one unit of each of the above devices ( to ). Also, functions of individual devices may be integrated into other systems. For example, the database server  may have the system logging function for performance measurement. However, as described below, the system logging function of the present invention references a single system clock. Thus, there can be only one system logging function.",{"@attributes":{"id":"p-0043","num":"0042"},"figref":["FIG. 2","FIG. 3"],"b":["7","1","1","1"]},"Referring to , the timing data  (SO) supplied by the timing device  is split by the splitter  into two parts. One of the parts is entered into the logging device  (S) and the other is entered into the EC  (event controller) (S). The timing data  may be supplied from a timing (clock) company in the format designated by the clock company. To connect the timing device  to the logging device  or EC , RS-232C is used, for example.","The timing data  entered into the logging device  is received by STSIM  (S). STSIM  has the capability to receive timing data and record it in a timing log file  (S) sequentially.","The timing data recorded in the timing log file  is read out when a replay is necessary due to a system failure or the like and supplied to the event controller (EC).","The input data received by STSIM  is transferred to DISTRIB . DISTRIB  has the capability to distribute input data to appropriate devices. As described later, even input data log devices (slave DISTRIB) that do not include the system log monitor (LANLAN ) of this embodiment include DISTRIB. These input data log devices have the capability to transfer received input data to DISTRIB  of the logging device . Here discussion goes on the master device that comprises the system log monitor, LANLAN . Thus, the input data is sent from DISTRIB  to LANLAN .","LANLAN  has the capability to record the input data received from DISTRIB  in a system log file  (S) by adding a time stamp to it (S). The capability to add time stamps may also be implemented in DISTRIB . The clock used for the time-stamping is the system clock of the logging device . As described later, the same system clock is also used to time-stamp the data (process end message) sent from RMSender. In this way, since a single system clock is used, there is no need to synchronize multiple system clocks in the multiple systems that need performance measurement. The use of the single system clock readily allows high-accuracy performance measurements. The time-stamped input data thus recorded in the system log file  is used to identify the process start time of the system. As described later, the difference from the time stamp on the end message can be used to calculate the time required for processing. Incidentally, LANLAN  allows system logs to be displayed on a viewer .","On the other hand, the timing data  entered into the event controller (EC)  is processed by the EC  (S). The data processing performed by the EC  includes, for example, calculations of athletes' standings and time differences as well as reference to world or Olympic records. The data  obtained from the calculations is sent to the venue control , from which it is transferred to CISINT  or TV  (, ). Although CISINT  or TV  is used as an example here, the description below similarly applies to other devices (DDS, SB, PR, IRF, and GW). However, when a PR is used, the PR should include a print server or it should be connected locally.","The transferred data  and  are processed by the CISInt (CIS interface) code  in CISINT  and by the TVInt (TV interface) code  (S), respectively. This process makes the data compatible with the system connected ahead of each device. In this process, respective initialization files (INI files  and ) are referenced. The data  processed by the CISInt code  is sent to the CIS control  (Sl) and used by the commentator information system. The data  processed by the TVInt code  is sent to BRINT  (S) and used by TV companies.","The data  and  are sent to systems other than the system of this embodiment. For the system of this embodiment, they are result data which indicate the end of a sequence of processes triggered by the entry of the timing data . Therefore, measuring the performance of the system of this embodiment is simply a matter of measuring the time from the entry of the timing data  to the delivery of the data  or data . The time the timing data  was entered is recorded in the system log file , as described above. Thus, the end time of processing (the time the data  or  was sent out) is measured as follows.","The CISInt code  sends the data  to the CIS control . It also sends the data  to RMSender  via an NT pipe . The TVInt code  sends the data  to BRINT . It also sends the data  to RMSender  via an NT pipe .","RMSender  and  send the received data  and  (result data) to DISTRIB  via TCP or UDP  and . DISTRIB  sends the received data  and  to LANLAN  as is the case with the timing data . The data  and  are time-stamped (S) and recorded in the system log file .","The time-stamped data  or  has the function of identifying the end time of the sequence of processes. Strictly speaking, the process end time, which represents the time when the data  or  is sent out to CIS control  or BRINT  or the like, differs from the time the data  or  is received by DISTRIB . According to this embodiment, however, RMSender \/ and DISTRIB  are connected via TCP or UDP \/ and transfer delays are only on the order of several milliseconds even if Ethernet with a low data F transfer rate of 10 Mbps is used. Since the required accuracy for performance measurement according to this embodiment is on the order of 100 milliseconds, delays in the data transfer from RMSender \/ to DISTRIB  are negligible.","The data  and  are time-stamped according to the system clock in the logging device , which is the same system clock that is used for time-stamping the timing data . Since the same clock is used to measure the start and end of processing, there is no need to synchronize system clocks. Also, the use of the single system clock readily allows high-accuracy performance measurements. Regarding the method for calculating the processing time from the difference between the time-stamped data \/ (process end data) and time-stamped timing data (process start data), description will be given later.","In this way, the data that identifies a process start time and the data that identifies a process end time are recorded sequentially in the system log file .","Although only one timing device  is used in the above example, there may be more than one timing device . Multiple timing devices may be connected in parallel to the splitter  so that timing data will be entered into the single splitter  from the multiple timing devices. However, when timing data are entered into the single splitter  from the multiple timing devices, the splitter  must be equipped with intelligent functions such as a termination detection function.","As shown in , multiple timing devices  and may be connected to the logging device  and another input data log system  via respective splitters . The input data log system  comprises STSIM  and DISTRIB , which have the same function as the above mentioned STSIM  and DISTRIB . The timing data (S) entered (S) into STSIM  from the timing device via the splitter  are recorded sequentially in the timing log file  (S) as is the case with the logging device . Then the timing data are transferred from STSIM  to DISTRIB , which in turn transfers the timing data to DISTRIB  of the logging device  (S). The timing data received by DISTRIB  is processed in the same manner as described above.","The transmission of the timing data from DISTRIB  is carried out via TCP or UDP . TCP or UDP  supports transfer rates of at least about 10 Mbps and network delays are on the order of several milliseconds as described above. The start point of processing triggered by the entry of the timing data essentially is the time when the data is entered in STSIM , but since network delays are negligible, the time when a time stamp is added by the system clock in the logging device  in DISTRIB  or LANLAN  can be treated as the start point of processing. In other words, regardless of whether the timing data is entered into STSIM  of the logging device  directly or via the other input log system , if DISTRIBs are connected with each other through an IP connection on a network capable of high transfer rates, such as a TCP or UDP network, a single system clock in the logging device  can be used for time-stamping in order to identify the start time of processing. Description about that part of  which overlap with  has been omitted.",{"@attributes":{"id":"p-0060","num":"0059"},"figref":"FIG. 5","b":["20","13"]},"The data recorded in the system log file  can be associated with each other as follows, i.e., the data that represent the start and end of a sequence of processes can be extracted as follows.  is a chart illustrating the relationship among data recorded in the system log file .","In , the data in the top row is data received by STSIM and identifies the start time of processing. The data illustrated here are timing data in a swimming event and contain the lane number (fourth lane in the case of the top row of ) of an athlete, which is indicated by arrow . The halfway time (30.00 sec in the case of the top row of ) of the athlete of this lane number is indicated by arrow . The end time data that corresponds to this start time data is searched for.","Since the data shown in the middle row of  contain characters \u201cTVINT,\u201d it can be seen that they identify the end time of the sequence of processes up to TVINT . The data in the middle row contain the lane number (arrow ) and halfway time (arrow ) of the athlete. Specifically, the value of these data are \u201c4\u201d and \u201c30.00,\u201d respectively, which match the STSIM data in the top row. Thus, the data shown in the top row can be associated with data shown in . It can be seen that the generation of a TV image (generation of the necessary data compatible with BRINT ) triggered by the entry of the data shown in the top row took 0.094 second (=13972.896\u221213972.802). The calculations of processing times (response times) are carried out by a calculation system  described later.","Similarly, the data shown in the top row can also be associated with the CISIF data shown in the bottom row. The data in the bottom row contain a lane number (indicated by arrow ) and halfway time (indicated by arrow ). Their values are \u201c4\u201d and \u201c30.00,\u201d respectively, as is the case with the data in the middle row, and thus can be associated with the data shown in the top row. Therefore, it can be seen from the data in the top row and data in the bottom row that it took 0.564 second (=13973.366\u221213972.802) to generate the necessary data to be sent to the CIS (commentator information system) controller.",{"@attributes":{"id":"p-0065","num":"0064"},"figref":["FIG. 7","FIG. 6","FIG. 6","FIG. 6"],"b":["0","16","1","13","1","2","13","2","0","2"]},{"@attributes":{"id":"p-0066","num":"0065"},"figref":"FIG. 8","b":["20","13","20","72","71","70"]},"The data that has been calculated is converted into a reduced file  by means of a reduction program  and uploaded to a performance reporter . The performance reporter  converts formats that vary with the event into a unified format and outputs system performance to display it in easy-to-view form, for example, by event or by machine. Performance reports are accumulated in a database  in such a way that they can be referenced at any time. Of course, process response times do not necessarily have to be calculated at the center , but they may be calculated in a local result system.","The system of this embodiment readily allows easy and high-accuracy measurement of the time required for processing even if the starting location and ending location of the processing are different. This makes it easy to measure the system performance of such a large, complex system that manipulates results of, for example, Olympic events for display.","Although the present invention has been described in concrete terms with respect to an embodiment, the present invention is not limited to the above embodiment and various modifications are possible without departing from the spirit of the invention.","For example, although the above embodiment has been described using a CIS interface and TV interface, other devices (DDS, SB, IRF, etc.) can similarly be equipped with RMSender to measure the processing times related to the given devices as with this embodiment.","Also, although the embodiment described above uses entry of timing data to signal the start of processing, any other input data may be used as well.","The start and end of processing may be signaled not only by data input from outside the system or data output from the system, but they may also be detected by RS-232C serial output, log information written into a hard disk drive (HDD), output information of various files, output of NETBIOS or other network messages, or any system event that can be monitored by a monitor program.","For example, a system such as the one shown in  can measure the time interval between the time when EC in the local result system receives data from the timing device  and the time when it writes calculation results into a frame (HDD)  of VC . Methods of detecting a write event into an HDD in real time include using a file-change event notification supplied as an API to the OS or scanning directory information of the HDD at regular intervals (e.g., every 500 msec). If an event such as a file change is detected by any of these approaches, the system can generate a packet containing details of changes (date, size, file name, etc.) and send it to the logging device  of the present invention via UDP or the like. To associate log data with each other, the file name, file size, etc. can be used.","Also, the system shown in  can measure the time required for data to reach a CIS workstation  from a CIS interface  via MQ and a CIS controller . Since the CIS controller  and CIS workstation  are connected by NETBIOS, NETBIOS messages can be captured. By packetizing these messages and sending them to the logging device  via UDP or the like, it is possible to identify times as is the case with the illustrative embodiment. Log data can be associated with each other by using the content of the messages.","Similarly, by measuring the difference between the times required for a NETBIOS message to travel from the CIS interface  to the CIS workstation  (local workstation) and from the CIS interface  to the CIS workstation  (remote workstation), it is possible to find the delay time caused by traveling via the central system. Since exactly the same message is logged through different routes, log data can be associated easily.","Also, the system shown in  can measure the time interval that elapses between the time when a file created by the event manager (EM)  of the local result system is recorded in a database  of the WNPA (Olympic news distribution system for the press) and the time when it is recorded on an HDD  of a WNPA server via MQSender , MQ, and the central system's WNPA distributor  or the time when it is recorded on an HDD of a WNPA terminal  via RS-232C. Events (recording on HDD) are detected and log data are associated in the manner described above.","Furthermore, the system can measure the time interval required for a print file created by EM to be stored in a HDD of a print server  via a print distributor . In this case, the log file can be associated by using the file name and size information plus the size increase equivalent to header information size.","The above exemplary embodiment has been described taking as an example a system which displays, manipulates, edits, and controls result information of Olympic games. The larger and more complex the system, more pronounced the effect of the present invention. However, the present invention is not limited by the scale or complexity of systems. In other words, the present invention can be applied to any application or any system that measures processing times in a system where the starting location and ending location of processing are different."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 10"}]},"DETDESC":[{},{}]}
