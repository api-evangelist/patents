---
title: Provisioning an internet protocol (IP) phone
abstract: An Internet Protocol (IP) phone transmits on a network, an IP packet comprising a dynamically-assigned IP address. A computer associated with the network uses the dynamically-assigned IP address in the packet to identify a specific site to which the IP phone belongs and/or a specific local area network (LAN) to which the IP phone is connected. Then, data to be used to provide telephony service to the phone is recorded in a memory. In some embodiments, the computer associates the IP phone with a dialing plan unique to the specific site, wherein the dialing plan includes an area code to be used by the IP phone.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08483374&OS=08483374&RS=08483374
owner: Shoretel, Inc.
number: 08483374
owner_city: Sunnyvale
owner_country: US
publication_date: 20110331
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO PARENT APPLICATION","CROSS-REFERENCE TO COMPUTER PROGRAM LISTING APPENDIX","CROSS-REFERENCE TO ATTACHED APPENDICES B & C","COPYRIGHT NOTICE","BACKGROUND","SUMMARY","DETAILED DESCRIPTION","APPENDIX B","Configuring IP Phones","APPENDIX C"],"p":["This application is a continuation application of U.S. patent application Ser. No. 10\/409,703 entitled \u201cProvisioning A Phone Without Involving An Administrator\u201d filed on Apr. 7, 2003 now U.S. Pat. No. 7,945,036 by Dale C. Tonogai, Allan J. Naim, and Scott Van Gundy. U.S. patent application Ser. No. 10\/409,703 is incorporated by reference herein in its entirety, including all appendices therein.","Note that a computer program listing Appendix A originally filed in U.S. patent application Ser. No. 10\/409,703 (see above) is hereby expressly incorporated by reference herein in its entirety.","Appendix A contains the following file in IBM-PC format and compatible with MS-Windows, submitted electronically, which forms a part of the present disclosure and this appendix A is incorporated by reference herein in its entirety.",{"@attributes":{"id":"p-0005","num":"0004"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"5"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"63pt","align":"left"}}],"thead":{"row":[{"entry":[{},{"@attributes":{"namest":"offset","nameend":"4","align":"center","rowsep":"1"}}]},{"entry":[{},"Date","Time","Size","File Name"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"4","align":"center","rowsep":"1"}}]}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Apr. 4, 2003","03:57p","39,946","SOURCE.TXT"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"4","align":"center","rowsep":"1"}}]}]}}}}},"The file of Appendix A contains source code of computer programs for an illustrative implementation of the present invention.","Specifically, the file SOURCE.TXT contains definitions and functions which describe operation of a computer, a telephone exchange, and a telephone in accordance with certain embodiments of the invention.","Appendices B and C which are attached below (as pages 59-65 and 66-70 respectively) just before the claims contain documentation related to one specific exemplary embodiment in accordance with the invention. Appendices B and C are integral portions of the present disclosure and are incorporated by reference herein in their entirety.","A portion of the disclosure of this patent document contains material that is subject to copyright protection. The copyright owner has no objection to the facsimile reproduction by anyone of the patent document or the patent disclosure, as it appears in the U.S. Patent and Trademark Office patent files or records, but otherwise reserves all copyright rights whatsoever.","Telephone exchanges of the prior art may be located in house at a subscriber's office, or in a remote terminal, or in a central office of a telephony service provider. Such a telephone exchange normally interconnects one telephone to another telephone if directly connected to both telephones, and connects any directly connected telephone to an outside telephone network (also called wide area network abbreviated as \u201cWAN\u201d). Conventional telephone exchanges normally support analog phones (that require circuit-switching), although recently a telephone may also be used to place and receive voice over Internet Protocol (VoIP)-based telephone calls and public switched telephone network (PSTN)-based telephone calls, as described in, for example, U.S. Pat. No. 6,141,341 granted to Jones, et al. that is incorporated by reference herein in its entirety. Internet Protocol (IP) based telephony is also described in, for example, U.S. Pat. No. 6,252,952 granted to Kung, et al. and U.S. Pat. No. 5,742,596 granted to Baratz, et al. each of which is incorporated by reference herein in its entirety.","Telephone exchanges that are located in a subscriber's office (called private branch exchanges, abbreviated as \u201cPBX\u201d) typically perform various telephone management functions, such as call transfer, call forwarding, speed dialing, music on hold, last number re-dial, 3-way conferencing, call blocking, call accounting, as well as integrating voice mail systems, and facsimile machines, although such functions may also be provided by telephone exchanges located in the central office (also called \u201ccentral office switch\u201d). An example of a packet-switching PBX is described in, for example, \u201cIntranet and IP-Based UnPBXs,\u201d Chapter 7, pages 7-16 to 7-22 in the book entitled \u201cthe UnPBX\u201d edited by Edwin Margulies, Flatiron Publishing, Inc. 1997 that is incorporated by reference herein in its entirety.","See also, the article entitled \u201cDesign and Evaluation of an Extensible Web & Telephony Server based on the J-Kernel\u201d by Daniel Spoonhower et al., Technical Report 98-1715, Department of Computer Science, Cornell University, November 1998 available on the Internet at http:\/\/www.cs.cornell.edu\/Info\/People\/chichao\/tr1715.pdf that is incorporated by reference herein in its entirety. Another article entitled \u201cTowards Junking the PBX: Deploying IP Telephony\u201d by Wenyu Jiang, et al. NOSSDAV '01, Jun. 25-27, 2001, Port Jefferson, N.Y., is also incorporated by reference herein in its entirety. Telephone exchanges for IP phones may conform to any of the following protocols: H.323, SIP and MGCP. These protocols are well known in the art and are described at the following webpages:","For H.323 protocol:","http:\/\/www.itu.int\/rec\/recommendation.asp?type=folders&lang=e","&parent=T-REC-H.323","For SIP protocol:","http:\/\/www.ietf.org\/rfc.html","see RFC 2543bis","For MGCP protocol:","http:\/\/www.ietf.org\/rfc.html","see RFC 2705bis","Traditionally, before a phone is used with a PBX or with a central office switch, one or more parameters that govern telephony-related services to be provided to a user of the phone must be specified by a human (hereinafter \u201cadministrator\u201d). Specifically, before a user receives any telephony-related service (hereinafter simply \u201cservice\u201d) at a phone, the administrator associates a telephone number (unique within the telephone exchange) with a port of the telephone exchange to which the phone is coupled, only then does the telephone exchange route calls to the phone (using this association). An administrator manually performs this association (in a process called provisioning) at a computer for managing the telephone exchange (which may be called, for example, \u201cOperations Support System\u201d abbreviated as OSS). Such a computer may also be known as, for example, Headquarters Server.","During provisioning, the administrator typically also performs other tasks, such as enabling voice mail service for calls to the port that are not answered, enabling access from the port to the WAN, and enabling access from the port to various services such as speed calling, call waiting, and call forwarding services. Information provided by the administrator is typically stored in a record of a database which contains a number of such records, one per port. After creation of such a record, the full range of services that are provisioned (including dial tone) are activated (in a process called \u201cservice activation\u201d), e.g. by appropriately configuring the telephone exchange. Thereafter, as soon as a phone is coupled to the newly-provisioned port, the phone is provided with access to the enabled services. In such systems, a user cannot receive any service until after their port has been provisioned, and service activated.","U.S. Pat. No. 5,588,051 granted to Berkowitz et al (which is incorporated by reference herein in its entirety) describes associating unsubscribed lines with the same telephone number and same switch line termination point. The unsubscribed lines may be inexpensively provisioned with soft dial tone thereby allowing a potential telephone subscriber to interactively subscribe to and activate telephone service from an unsubscribed line. Soft dial tone is also known in the art as limited access dial tone, left-in dial tone, quick serve, or warm line service. Since soft dial tone is not a billed service, calls directed to the unsubscribed telephone line are blocked at the central office switch. The application of soft dial tone may be used to identify a network access endpoint that is being used by a customer, and thus improve the accuracy of the contents of databases used by the operations facility in the provisioning of telephone service by identifying incorrect data.","U.S. Pat. No. 5,953,389 granted to Pruett et al (which is incorporated by reference herein in its entirety) describes receiving a service request from a customer at a living unit requesting service, and determining if the service request is eligible for processing by an adjunct processor. When eligible, the method automatically provisions customer equipment to execute the service request based on customer identification data and customer facilities.","A reference called \u201cCisco CallManager System Guide\u201d describes, in Chapter 11, a method called \u201cAuto-Registration\u201d that automatically assigns directory numbers to new devices as they connect to the IP telephony network. Auto-registration is to be used if the administrator wants Cisco CallManager to assign directory numbers automatically to new phones when the phones are plugged into the network. Since a directory number is assigned to a new device, it appears (to the inventors) that phone calls can be received at the new device.","Cisco's CallManager disables auto-registration by default. Enabling auto-registration carries a security risk in that \u201crogue\u201d phones can automatically register with Cisco CallManager. Accordingly, it is suggested by Cisco that auto-registration should be enabled only for brief periods when the administrator wants to perform bulk phone adds. After a new device has been auto-registered, Cisco requires an administrator to assign a user to the new device, via a graphical user interface.","A phone is provisioned in some embodiments of the invention, in a two step process without involving an administrator. Specifically, in a first step, as soon as a new phone is coupled to a network, a computer coupled to the network automatically provisions the phone without any human involvement. After the first step and before performance of a second step, the phone is only partially provisioned. Such a partially-provisioned phone can be used in the normal manner but only to make calls and not to receive calls. Also, depending on the embodiment, there may be no other services available at a partially-provisioned phone (i.e. other than to make calls).","Later, in a second step, in certain embodiments, a user identifies himself or herself at the partially-provisioned phone, and the computer responds by associating the partially-provisioned phone with the user, thereby to complete the provisioning. Therefore, after the second step, the phone is fully provisioned (i.e. the phone can now be used to both receive calls as well as make calls). Some embodiments require that the user must have been provisioned into the computer prior to the second step, although this is not required in other embodiments. If a user has in fact been provisioned before the second step, then any additional services that were enabled for that user (e.g. voice mail) are now made available to the user, at the fully provisioned phone.","In some embodiments, during the first step, the computer automatically records the existence of the phone in a memory of a telephone exchange. After the first step, the above-described telephone exchange uses its memory in the normal manner, to provide telephony-related services for all calls being made from the partially-provisioned phone. Moreover, after the first step, there is no support (in the telephone exchange) for calls to be received at the partially-provisioned phone, at least because a phone number has not yet been associated with the partially-provisioned phone. Such a partially-provisioned phone is sometimes referred to herein as an \u201canonymous\u201d phone because there is no phone number associated with the partially-provisioned phone. Due to lack of a phone number associated with an anonymous phone of certain embodiments, the anonymous phone is un-dialable from another phone.","As noted above, service that is initially provided after the above-described first step, to an anonymous phone, may be limited. Due to the limitation on service, any concern about security in which \u201crogue\u201d phones are provisioned is minimized. Specifically, if a \u201crogue\u201d phone is provisioned, then the only service it receives is limited as noted above. Moreover, such a \u201crogue\u201d phone is an anonymous phone and therefore the telephone exchange alerts a person receiving a phone call that the call originated at an anonymous phone (e.g. if caller id is enabled). In some examples, the limited service that is provided automatically after the first step is similar or identical to soft dial tone service wherein the anonymous phone can be used only to place calls to a limited set of phone numbers (e.g. long-distance calls are typically blocked, while 911 calls are typically permitted).","The service (provided by the telephone exchange) at such an anonymous phone after the above-described first step may be enhanced by performance of the above-described second step. Specifically, in the second step, several embodiments of the invention require a user of the anonymous phone to provide (e.g. via the phone) certain information that identifies that particular user. For example, some embodiments require the user to manually provide a phone number (e.g. an extension number in case of a PBX) to be used by others in making calls to that particular phone. In response to user input during the second step, the user's phone number is automatically recorded in the telephone exchange's memory (as being associated with that particular phone), thereby to enable the telephone exchange to route (to that particular phone) all calls that are made to the phone number. Such a phone, after the second step of provisioning, is sometimes referred to herein as a \u201cpersonalized\u201d phone.","During the second step, depending on the embodiment, the user's phone number (and\/or the user's name) may also be used by the computer to automatically identify and enable in the telephone exchange, one or more additional features (e.g. long distance calling, 3-way conferencing, display of caller's identity) which may have been previously associated with the user (i.e. during user provisioning). Specifically, prior to the just-described personalization of an \u201canonymous\u201d phone, several embodiments require an administrator to provision the user, i.e. identify the user's phone number (and optionally any enhanced services to be provided to the user). Therefore, in these embodiments, the computer creates a database record and stores therein some personal information about the user (e.g. the user's login name and password to be used with a voice mail server), prior to the above-described second step of personalization of the phone by the user.","As noted above, in some embodiments, the user must be already provisioned by the time the user performs the second step to personalize their phone. Such embodiments may not require the user to remember and provide their phone number during personalization of their phone, as long as the user identifies himself\/herself in a unique manner (sufficient to identify their personal record). For example, in one embodiment, the user is merely required to provide the user's login name and password that are to be used with voice mail, and the computer automatically looks up their personal record (during the second step) to obtain a phone number that was previously assigned to this user, and then associates this phone number to the user's phone (thereby to complete the user's personalization of their phone).","Moreover, depending on the embodiment, provisioning of a user can be performed at any time relative to coupling of a phone to the network. Specifically, in some embodiments, the user is provisioned prior to the user plugging in the phone into the network, whereas in alternative embodiments the user is provisioned only after the user has plugged in their phone into the network. In several such alternative embodiments, the user may be required to make a call from their partially-provisioned phone before it can be completely provisioned. Note that the call the user makes in such alternative embodiments may be either to the administrator or to an automated attendant, and after authentication of the user the above-described second step of personalization of the anonymous phone (including selection of a phone number to be associated with the phone) is permitted.","Also, although in some embodiments, user provisioning by an administrator must be performed prior to personalization of an anonymous phone by the user, this order can be reversed in alternative embodiments. In several such alternative embodiments, the user provisioning is not done by the administrator prior to personalization of an anonymous phone by the user and instead, the user uses an anonymous phone from a desk they plan to use, and presents a proposal for personalization and the administrator approves a user's proposed personalization of their phone.","Furthermore, although in some embodiments, a phone number is assigned to a user during user provisioning, in an alternative embodiment, a phone number may be assigned to the user during personalization of their phone (e.g. after a user has authenticated himself\/herself (e.g. via user name and password) to a computer that can alter a record in the telephone exchange, the computer selects a phone number from a list of available phone numbers, and assigns the selected phone number to the user (and at this time the computer informs the user about their phone number). During selection of the telephone number to be assigned to the user, the computer may interact with the user in the normal manner, in making a selection that may be preferred by the user.","In accordance with the invention, a computer  () automatically maintains data in memory M of a telephone exchange , to enable the telephone exchange (also called \u201cswitch\u201d) to provide telephony service to phones A-N (wherein A\u2266I\u2266N, N being the total number of such phones) that are coupled to telephone exchange . Specifically, telephone exchange  has in memory M (also called \u201cswitch memory\u201d) the data I for each phone I, and the data identifies at least the service to be provided to each phone I.","Telephone exchange  can provide any one of a number of different levels of service to each phone I, and data I identifies the service to be provided (e.g. telephone I's service may be set to toll-free service in which case only toll-free calls can be made). As shown in , data I may also identify a user's phone number that is associated with phone I. When a call is made to a specific user (e.g. by dialing their individual phone number), telephone exchange  uses such data to route calls to the associated phone.","As used herein, the word \u201cphone\u201d covers a telephone instrument that communicates via different media depending on the embodiment, such as an analog phone that communicates over a twisted pair (and provides only Plain Old Telephone Service), a cellular phone that communicates over a wireless network, and an Internet Protocol (IP) phone that communicates over Ethernet. Moreover, the word \u201cphone\u201d also covers a telephone instrument that uses different media for interacting with the user depending on the embodiment, such as an audio phone and a video phone.","Note that in one specific embodiment, data I for each phone object in a switch includes IP Address and Ethernet address. Certain embodiments may have, in addition to the IP Address and the Ethernet address, another field which contains a phone type although this additional field does not exist in other embodiments. In some embodiments, the IP address of an IP phone is used to provision the phone on the appropriate site, and the Ethernet address of the IP phone is used as a unique identifier for the phone in a database that contains configuration information.","Telephone exchange  is coupled to a number of sockets A-M (wherein A\u2266J\u2266M, M being the total number of such sockets) that are not connected to any phone, and that are available to support M new phones. Note that at this stage, since sockets A-M are not connected to a phone, there is no corresponding data in memory M (because no calls can originate and\/or terminate at sockets A-M). However, as soon as a phone J () is coupled to a socket J () as illustrated by act  in , computer  (when programmed in accordance with the invention) automatically becomes aware of the existence of phone J (as illustrated by a signal A that is received by computer ). In response, computer  automatically records existence of phone J (as per act  in ) in telephone exchange memory M.","For example, computer  may generate certain default data J and supply the data to be stored in memory M for use in providing telephony service for phone J (as illustrated by a signal B that is transmitted by computer ). Therefore, automatic provisioning of phone J requires that memory M hold certain default data J for phone J which data is in addition to previously stored data A-N. Addition of data J to telephone exchange memory M is performed automatically, as soon as phone J is coupled to socket J, and without involvement of an administrator. Therefore, in certain embodiments, when a new phone J is coupled to switch , a first step of provisioning occurs when computer  automatically provisions the phone in switch memory M.","After such provisioning without involvement of an administrator, phone J may be used to make calls in the normal manner (but not to receive calls). Specifically, telephone exchange  uses its memory M in the normal manner, to provide telephony-related services to all phones A-N (including automatically provisioned phone J). Therefore, from this point in time, telephone exchange  uses data J to enable phone J (as illustrated by act  in ) to make calls. However, depending on data J in memory M, service that is initially provided to phone J at this stage is limited, as discussed next.","At this stage, telephone exchange  does not yet support calls to be made to automatically provisioned phone J, at least because a phone number has not yet been associated with phone J (i.e. not identified in data J). For this reason, at this stage, phone J is only partially provisioned, and is therefore referred to as a partially-provisioned phone. Moreover, at this stage phone J is also sometimes referred to herein as an \u201canonymous\u201d phone because there is no phone number associated with the phone (and of course no user). Even though anonymous phone J cannot receive calls, note that telephone exchange  has provisioned phone J into the system automatically, for example with no or very minimal human intervention. Therefore, calls can be now made from partially-provisioned phone J.","In some examples, data J that is automatically supplied by computer  (on plugging phone J into socket J) identifies only a basic service wherein the partially provisioned phone J can be used only to place calls to a limited set of phone numbers (e.g. long-distance calls are typically blocked, while 911 calls are typically permitted), similar or identical to soft dial tone service. Therefore, phone J can be used to make a phone call to any of phones A-N (except to itself and to any other automatically provisioned phone).  illustrates by signal A, the use of phone J to make a call to phone N. Moreover,  illustrates with signal B that phone J cannot be used to make a long distance call.","Thereafter, the above-described acts may be repeated as often as necessary (as illustrated by act  in ), thereby to automatically provision a number of additional phones, e.g. one for each of the available sockets. Note that no manual intervention is required in the first step (i.e. nothing needs to be done by the user and also nothing needs to be done by the administrator) to automatically provision phones into a partially-provisioned state as soon as the phones are coupled to telephone exchange . Such elimination of manual steps in provisioning a phone provides savings in time and costs, and allows for \u201cplug and play\u201d use of telephone exchange .","Although telephone exchange  is shown in  as being coupled to each phone I and each socket J by a single line in a star topology, such a topology is not required in several embodiments. Specifically, it will be apparent to the skilled artisan that a network of any topology (or even a wireless network with no topology) can be used to connect telephone exchange  to phones A-N. Moreover, depending on the embodiment, phones A-N and sockets A-M can be coupled to telephone exchange  by any communication network, including a voice network and\/or data network or some combination thereof. Furthermore, such a network can be implemented as a telephony network, a cable TV network, a local area network, or a wireless network.","Furthermore, although all items are illustrated in  as being located at a single location, in an office  (in which case telephone exchange  may be referred to as a private branch exchange abbreviated as \u201cPBX\u201d), such items may be dispersed in different locations depending on the embodiment. For example, phones A-N and sockets A-M can be located at the office, whereas telephone exchange  may be located in the central office.","Data A-N in memory M may be organized in any manner, e.g. the data may be held in arrays of data structures, and\/or objects (combinations of data and logic), and\/or linked lists, and\/or hierarchical databases and\/or relational databases, or any other organization that would be apparent to the skilled artisan in view of the disclosure. In certain embodiments, a record for holding data J is automatically created in memory M by telephone exchange  in response to commands from computer , although in other embodiments the existence of phone J may be recorded in memory M in other ways.","Data J that is added when provisioning a phone contains information related to telephony, e.g. a phone number and\/or the user's level of telephony service that is provided to the phone. For this reason, data J is different from, for example, a record containing an IP address that may be created by a DHCP server when a modem is provisioned in the prior art. Note that in some embodiments data J may contain, for example, the following items of information that are normally not maintained by a DHCP server: the users configured in the system, all sites the system spans, switches, phone ports, and user preferences.","To enhance the basic service (provided by telephone exchange ) to an anonymous phone J, several embodiments of the invention require each user to operate their phone (after coupling to the network) to provide information that uniquely identifies the user (as illustrated by act  in ). This is the second step in a two step process of provisioning a phone in accordance with the invention. For example, user  () may be required to use their phone to dial a predetermined sequence of numbers (e.g. press the \u201c9\u201d button three times) followed by the user's phone number, during the second step. This user-supplied information is used by computer  (as illustrated by signal ) to complete the provisioning of phone J.","Note that although a simple sequence is described in the previous paragraph for user  to initially identify their phone to computer  during personalization of phone J, in other embodiments, user  may be required to provide (e.g. to an interactive voice response (IVR) application (also called \u201cauto attendant\u201d) that executes in computer ) the user's login name and the password that have been assigned for use with voice mail.","Such use of IVR enhances security. In several embodiments, signal  is implemented via a phone call between telephone J and computer , and the IVR is implemented to provide to user  voice prompts that are similar (or identical) to prompts of the voice mail application. When providing information for personalization of anonymous phone J, user  may operate the phone J using any input mechanism well known in the art, such as a button, a wheel, a touch screen, a mouse, a trackball and a microphone.","On receipt of such information which uniquely identifies the user (e.g. in the form of the user's phone number), computer  updates data J in memory M (as illustrated by act  in ) to associate the user 's phone number with phone J (see signal  in ) and at the same time computer  may add user 's name and phone number to a directory listing (if not previously added), so that other users can look up user 's phone number. In addition, computer  may upgrade the service for user  (see signal  in ), to a service better than the basic service.","In certain embodiments, on completion of provisioning of a phone J, computer  may also send a signal to phone J to inform the user that the phone has now been personalized with that particular user's information. For example, if phone J has a display (such as a liquid crystal display \u201cLCD\u201d screen), on receipt of such a signal from computer , phone J displays the user's name (which could be, for example, the information provided by an operator in fields  and  in , or alternatively in field  or ).","When such a signal is played (e.g. via the speaker in the handset) or displayed (e.g. via the LCD screen), the user knows that the provisioning of phone J has been completed, and that it happened successfully. Note that depending in the embodiment and the implementation, such a signal may also contain, for example, an extension number assigned to the phone J being provisioned. At this stage, phone J is enabled to receive calls that are being made to the extension number.","In various embodiments, whether or not there is an upgrade in service during the second step of provisioning (which is also called \u201cpersonalization\u201d) may depend on the user's job function in office  (e.g. certain employees, such as executives, may receive an upgrade whereas other employees, such as administrative assistants, may not receive the upgrade).","Regardless of service upgrade, as noted above, from this time onwards telephone exchange uses data J (that now includes the user's phone number) to support calls from other users to user  (as per act  in ). For example, signal  () illustrates a call being made from phone N to phone J. Depending on data J, telephone exchange  may provide support for long distance phone calls from phone J (as illustrated by signal  in ) and allow phone J to access voice mail  and\/or auto attendant  (as illustrated by signal  in ).","The above-described personalization of an automatically provisioned phone J is performed by user , without any involvement of an administrator. Note that in several such embodiments, the administrator provisions user  (e.g. creates a record for the user and supplies to the user the phone number (e.g. an extension number in case of a PBX) to be used by others in making calls to the user). In some embodiments, the provisioning of user  by an administrator is performed prior to the above-described coupling of the phone to the network, whereas in other embodiments such user provisioning is performed subsequent to the coupling but prior to personalization.","The phone number and enhanced services (if any) for user  are identified ahead of time in some embodiments (as per act  in ) during the provisioning of user  by an administrator  (). In several embodiments, prior to even coupling of phone J to the network (in act  of ) administrator  () must associate new user  with a phone number (e.g. an extension number in case of a PBX) that is to be used by others in placing calls to user . Computer  stores the information provided by administrator  in a database D () for holding such information on all users. Specifically, a new record U () is created for new user  (in database D shown in ), to hold the information being provided by administrator .","Administrator  may provide information for provisioning new user  via a screen  of the type illustrated in . In certain embodiments, administrator  must provide to computer  the user's first name (e.g. in field ), last name (e.g. in field ), and a telephone number (e.g. in field ) to be used by others in calling this user. In several embodiments, computer  assists administrator  in managing the allocation of phone numbers to users, e.g. by providing an optional button  on screen  that is operable by administrator  to display to all available phone numbers, for selection thereof. The number of digits for the phone number that must be identified in field  by administrator  depends on the individual implementation, e.g. in case of a PBX the number of digits may be 5 (depending on the size of the office) and such digits serve as an internal extension number to be used within office .","Although certain embodiments are described and illustrated herein other embodiments will be apparent to the skilled artisan in view of the disclosure. For example, in some embodiments, fields  and  are replaced by an employee number which is uniquely associated (in a different database) with the employee's name. As another example, in an alternative embodiment fields  and  are replaced by just the email address, and the email address is displayed (instead of user name) on the telephone's display after it has been provisioned. This display of email address is provided as an alternative. Since all such information is held in a persistent manner in the database, any unique User attribute could be used to identify the user by the applications.","In some embodiments, administrator  identifies a user by name, and also associates with the user a phone number to be used. In such embodiments, administrator  must also inform user  of their assigned telephone number. At this time administrator  may request entry of the user name and phone number into a directory listing, or alternatively this may be done automatically (e.g. when the user personalizes their phone). As noted elsewhere herein, when personalizing phone J, user  must provide at least the phone number to phone J, as illustrated by act  in .","Depending on the embodiment, in act  () administrator  may be required to assign to user  a client user id in field  and a client password in field  that are to be used by the user in a telephony application software (e.g. call manager) that enables the user to dial phone numbers via their personal computer. Also depending on the embodiment, in act  () administrator  may be required to assign to user  an email address in field  for use in their personal computer to receive and send email, and a password in field  to be used in accessing voice mail. Administrator  must inform user  of the information being filled in such fields. Such information is thereafter used by the user and by various applications (e.g. voice mail application) to authenticate user .","Note that several embodiments do not assign to a user a login name that is separate and distinct from the user's phone number, e.g. if the phone instruments do not have a graphical user interface (GUI). In such embodiments, the user's phone number itself is used as their login name, and hence field  () and the associated label \u201cClient User Id\u201d are both not present in screen . Furthermore, some embodiments may require assignment of a user to a group that automatically identifies zero or more enhanced services (such as long distance service and 3-way conferencing) to be provided to all users in that group.","Although the above description refers to provisioning of a user by an administrator  prior to the automatic provisioning of a phone J, as illustrated by act , in at least one alternative embodiment, the order is reversed as illustrated by act  in . Specifically, phone J is initially provisioned (automatically in act ) when coupled to the network, and subsequently administrator  performs act  to provision user  (assuming act  was not performed). Even though a record for phone J is present in database D prior to performance of act , administrator  merely provisions the user in act  (in a manner identical to act ), and does not provision or personalize the phone in such embodiments. Instead, after act  is performed, acts ,  and  are performed, as discussed above, followed by branch  (also discussed above).","Note that although several embodiments described above implement a two-step process (namely automatic provisioning which results in basic service, followed by personalization which results in enhanced service), in some embodiments the two steps are combined into a single step as illustrated by branch  in . Specifically, in such embodiments, act  is not performed immediately after act  (i.e. branch  is not taken). Instead, telephone exchange  waits for the memory to be updated to identify the user's phone number and the enhanced services to be provided to the user (as per act ) and only then does telephone exchange  start providing service to telephone J. Note that in such a case, when performing act , the user does not hear dial tone (and the user may be instructed by administrator  to blindly perform the appropriate key sequence at their phone as soon as the phone is plugged in).","In one such example, a visual display on each anonymous telephone shows the word \u201cAvailable\u201d to indicate that no user is assigned to the phone, and alternatively a provisioned phone displays visually the First and Last Name of a user assigned to the phone. Instead of a visual display, the user may be required to listen and respond to voice prompts which provide instructions to the user as to what needs to be done by the user to provision the phone.","In an embodiment illustrated in , a number of phones are digital phones that generate packets in conformance with Internet Protocol (IP). In this embodiment, prior to boot up of a new IP phone  that is located in office I (), acts  (user provisioning) and  (coupling of IP phone to network) are performed (as per ) in the manner described above in reference to . Thereafter, IP phone  () boots up and broadcasts its presence to network  (as per act  in ). For example, IP phone  may send out an Ethernet packet containing its MAC address (which uniquely identifies the IP phone). The just-described packet may conform to a conventional standard, such as Address Resolution Protocol abbreviated as ARP. DHCP server  () responds to the broadcast by sending a dynamically-assigned IP address to IP phone . Note that DHCP stands for Dynamic Host Configuration Protocol, which is an Internet protocol well known in the art.","IP phone  of this embodiment hereinafter uses the dynamically-assigned IP address in all IP messages that it generates. Specifically, in act  (), IP phone  sends a message to indicate that it is now coming up, to a software entity (commonly known as a \u201ccall agent\u201d) in a telephone exchange I that is to manage calls to and from IP phone . Such a software entity is commonly called a \u201cmedia gateway controller\u201d or a \u201ccall agent.\u201d IP phone  may obtain the IP address of the call agent in any manner depending on the embodiment, e.g. by use of a message from DHCP server  or by querying a directory or some combination thereof.","Depending on the embodiment, the IP message that is generated when phone  is coming up (also called a \u201ccommand\u201d) may conform to any conventional protocol, such as Media Gateway Control Protocol abbreviated as \u201cMGCP\u201d. For more information on MGCP, see the Request For Comment #2705 available on the Internet at http:\/\/www.ietf.org\/rfc\/rfc2705.txt?number=2705 and incorporated by reference herein in its entirety. Note that instead of using MGCP, other embodiments of phone  may use other protocols, such as Session Initiation Protocol (SIP), Session Announcement Protocol (SAP), Real Time Streaming Protocol (RTSP) as defined in RFC 2326 and\/or H.323. In certain embodiments that use MGCP, the command message can be, for example, a \u201cRestartInProgress\u201d message, abbreviated as RSIP, although any other IP message from phone  can be used to trigger automatic provisioning of phone  in the manner described herein. Note that command messages in any formats alternative to MGCP can be used in accordance with the invention, such as SIP, H.323 and Megaco.","In some embodiments, the RSIP message is used by phone  to signal to telephone exchange I that phone  is being taken in or out of service. On receiving the RSIP message, a call agent in telephone exchange I checks to see if it is responsible for this phone  and on finding that it is not responsible, forwards information in the RSIP message to the above-described computer (also referred to as \u201cadmin\u201d computer)  that performs automatic partial provisioning of phones, as illustrated by act  (). On receiving information in the RSIP message, computer  performs a number of acts that need to be performed to check if phone  is already provisioned and if not provisioned then to automatically provision phone  (into a partially-provisioned state).","In several embodiments, on receiving the RSIP message information, computer  checks whether phone  has been previously provisioned (see act  in ), and if already provisioned nothing is done (i.e. the process returns to act  discussed above). However if phone  was not previously provisioned, computer  automatically selects (see act  in ) a telephone exchange J () that is to provide service to phone . In certain embodiments, computer  selects telephone exchange J to be whichever telephone exchange is the closest to phone  (in terms of distance traveled by a signal between the exchange and the phone). Note that in other embodiments, computer  may use other criteria in selecting a telephone exchange J that is to provide service to phone . For example, computer  may select any telephone exchange on a local area network (LAN) to which phone  is connected. In the just-described example, computer  may use the IP address of phone  to discover a specific site (and a specific local area network (LAN)) to which phone  belongs.","Note that telephone exchange J that is selected can be the same as or different from telephone exchange I that was used to transfer the command from phone  to computer . The only requirement in such embodiments is that both telephone exchanges I and J must be coupled to the same network as the network to which IP phone  is coupled. After selection of the telephone exchange, computer  automatically creates a record in the memory of the selected telephone exchange, in a manner similar or identical to act  described above, thereby to complete the first step of partial provisioning of the new phone.","In creating the record, computer  of some embodiments uses default values for one or more fields in the record, e.g. the value NULL for the phone number. As previously noted, such a NULL value for the phone number causes the new phone to be anonymous. For this reason, computer  of several embodiments enables only very limited services at the new phone: e.g. phone calls to be made to a restricted set of zero or more phone numbers. Also, because there is no phone number associated with the new phone at this stage, telephone exchange J of some embodiments cannot send any phone calls to the new phone. Note that the services that are to be enabled at this stage when all new phones are partially provisioned (on being plugged in) may be identified ahead of time in a default setting which can be changed by the administrator.","In several embodiments, the just-described acts by computer  namely checking and creating the record are performed without any involvement on part of the administrator (i.e. for each new phone being provisioned). Thereafter, some embodiments contain a branch  () which transitions to act  (described above) wherein the record that has been just created is used by the selected telephone exchange J in the same manner as other records in its memory, i.e. to provide service to phone .","Therefore, basic service (as identified in the default setting) can be obtained at a newly-plugged in phone, without involvement of an administrator, e.g. as soon as a user inserts a plug of the phone into a socket of the network (which socket may thereafter be coupled to a port of the telephone exchange). In certain other embodiments, act  () is performed after act , wherein the selected telephone exchange J sends IP messages periodically (also called \u201ckeep alive\u201d messages or \u201cheart beat\u201d messages) to phone . At this stage, phone  can be used (as per act ) to obtain the basic service. As previously discussed, enhanced services are made available in several embodiments only after a user personalizes their phone  (as per acts  and ).","In certain embodiments that perform act , if at any time phone  does not receive one or more keep alive messages within a predetermined duration, then phone  concludes that a call agent within telephone exchange J that was selected by computer  to provide service to phone  has become unavailable (e.g. it may have crashed). Phone  may (in some embodiments) initiate a switch over process in order to use another call agent within the same telephone exchange J or in a different telephone exchange I. For example, phone  may reboot, thereby to generate the RSIP message which is handled in the above-described manner.","During such a switchover process, computer  will find that although phone  is already provisioned, the selected telephone exchange J is not available and therefore computer  provisions phone  on another telephone exchange I that may be available. As noted above, for the switchover process to be useful, both telephone exchanges I and J must be coupled to the same network as the network to which phone  is coupled. Moreover, the just-described switchover process is not supported in some embodiments.","One implementation of the above-described IP phone based embodiment is shown in , merely as an illustration of how such an embodiment can be implemented. In , a number of entities of logic (hardware and\/or software or human) are illustrated as human stick . Many of these entities - are conventional processes which have been modified to implement the invention as described herein. A number of other such implementations of the IP phone based embodiment will be apparent to the skilled artisan in view of this disclosure.","Referring to , when an IP Phone  is plugged into an Ethernet outlet, IP Phone  broadcasts it's presence to the network, as illustrated by signal , which is a standard ARP message. A responsive signal  to IP phone  is then generated by a DHCP server  which assigns an IP address for use by IP phone , and an FTP server's IP address. Next, a signal  is sent by IP phone  to the FTP server , using the FTP server's IP address retrieved from the DHCP server . In this manner, IP phone  retrieves two files from FTP server : namely a bootrom file and a phone configuration file.","Note that signal  is bidirectional and therefore represents the file request as well as the file transfer. IP phone  then extracts the IP address of a call agent  from the configuration file (which was retrieved from FTP server ). Call agent  may be identified in the configuration file as a primary call agent, in case two or more call agents are identified (in case the primary call agent is not available). Next, IP Phone  sends an MGCP command (as signal ) in a message (in conformance with User Datagram Protocol abbreviated as \u201cUDP\u201d and described in RFC 768 available over the Internet at http:\/\/www.freesoft.org\/CIE\/RFC\/768\/index.htm) to primary call agent .","In one specific embodiment, the IP phone sends to the Call Agent a UDP message having the following header:\n\n","Note that this UDP message carries an RSIP message, and examples of the values for each field in the UDP Header are as follows:\n\n","RSIP message:","{\n\n","}","On receiving such a message from the IP phone, primary call agent  initially looks up its database. Since this is a new IP phone, primary call agent  sends a signal  (which contains information in the RSIP message) to an entity in computer  called \u201cTelephone Management Service\u201d, with a request to provision the IP Phone. Note that call agent  sends signal  via a remote procedure call (abbreviated \u201cRPC\u201d). As would be apparent to the skilled artisan, RPC allows such processes to communicate with one another regardless of whether the processes are on the same machine or on remote machines.","In one specific implementation, the RPC for transferring information from a Call Agent to the Telephone Management Service uses the following structure:\n\n","Note that all these fields except idSession originate in the RSIP message, and field idSession is inserted by the Call Agent so as to uniquely identify this session (for the current phone) from among a number of other similar sessions.","Examples of messages sent between Telephone Management Service (abbreviated as \u201cTMS\u201d) and the Call Agent are:\n\n","Specifically, the Call Agent fills in information and sends the message MsgMediaStatsEvent to the TMS at the completion of a call:","struct MsgMediaStatsEvent","{\n\n","};","Moreover, after making contact with the IP phone, the Call Agent sends a message MsgUAIpPhoneInfoEvent to the TMS, containing the following information:","struct MsgUAIpPhoneInfoEvent","{\n\n","};","Furthermore, the following messages are used in certain embodiments:\n\n","{\n\n","};","The above message is sent by a Call Agent to the TMS, when the phone is taken on\/off hook. Note that on\/off hook is just one example of when this message is sent.\n\n","{\n\n","ULONG ulStatus;","};","The above message is sent by a Call Agent to the TMS, when a call is made on the phone.","struct MsgUADestroyEvent","{\n\n","};","The above message is sent by a Call Agent to the TMS, when a phone or extension is deleted.","struct MsgUACreateEvent","{\n\n","};","The above message is sent by a Call Agent to the TMS, when a phone or extension is created.","When invoked, Telephony Management Service  parses the RSIP information, and makes a call (using an interface that conforms to Component Object Model abbreviated as \u201cCOM\u201d specification defined by Microsoft Corporation) to another entity, namely IP Phone Configuration Service  to provision the IP Phone in the configuration database for the appropriate telephone exchange and call agent. When making the COM call, Telephony Management Service  passes to IP Phone Configuration Service  a number of parameters (represented as signal ), such as the Ethernet address, IP address, MGCP Endpoint and phone type of the IP Phone.","In one specific implementation, a COM\/IDL interface for transferring information from the Telephone Management Service to IP Phone Configuration Service uses the following structure:\n\n","In several embodiments, the above interface conforms to Microsoft's Component Object Model, as described in, for example,","http:\/\/www.microsoft.com\/com\/resources\/comdocs.asp","When invoked, IP Phone Configuration Service  uses the IP address of IP phone  that it received from Service  to discover a specific site (and a specific local area network (LAN)) to which IP phone  belongs. In the example illustrated in , DHCP server  provides IP addresses in different ranges for each of different offices A, I and P. For example, DHCP server  may be set up to provide to all devices on LAN  in office A only IP addresses in a fixed range (also called \u201cA\u201d range), and provide IP addresses in another range (also called \u201cP\u201d range) to all devices on LAN  in office P. Similarly, IP addresses in yet another range (also called \u201cI\u201d range) may be provided to all devices on LAN  in office I.","The IP address ranges associated with each LAN are known to IP Phone Configuration Service . For example, IP Phone Configuration Service  may have access to a table that contains the following three fields: Low IP address of the range, High IP address of the range, and LAN identity. IP Phone Configuration Service  compares the IP address of phone  to see if it falls between the first two values, namely Low IP address of the range, High IP address of the range, and if so, then the third value, namely LAN identity identifies the specific LAN (and in some embodiments the specific telephon exchange) to which phone  is coupled.","The just-described use of an IP address of phone  to identify a LAN to which the phone is coupled provides the following advantages. Specifically, in several such embodiments, a phone is automatically configured for a site (which corresponds one-for-one to a switchgroup in one embodiment) at which the phone is located using a dialing plan that is unique to the site, by use of just the IP address of the phone. For example, an area code where the site is located may be included in a dialing plan for the site, so that when the user dials a 7 digit number at the newly-provisioned phone , then the phone automatically inserts the area code preceding the 7 digit number.","In several such embodiments, system wide there is an anonymous IP Phone users group, each outgoing trunk group needs an access code. There is also a class of services of three types: telephony (and defined as call stacked, external calls (local only, national long distance, all calls)), call permissions (and defined as internal, local, national and international), and voice mail (allowing access to broadcast distribution lists, message notifications, system distribution lists). Whenever a record for an anonymous IP phone is created in such embodiments, it takes the properties of this user group.","Moreover, if the identified LAN has a number of call agents that can be used (in one or more telephone exchanges that are coupled to this identified LAN), IP Phone Configuration Service  performs load balancing to identify an appropriate call agent (e.g. which has a minimum capacity ratio). For instance, a call agent could have a capacity of one hundred IP phones and has fifty IP phones installed, so the capacity ratio of this call agent is 50%, and any call agent which has the lowest value for this ratio is selected.","In an alternative embodiment, instead of the above-described table, another table may contain a direct one-to-one mapping between the IP address of the phone and the identity of a LAN to which the phone is connected, thereby to provide a similar (or identical) function.","Although multiple telephone exchanges at a single office (also called \u201csite\u201d) have been described above as being connected to the same LAN, such telephone exchanges can be connected by other kinds of networks. For this reason, in several embodiments of the type described below, a number of co-located telephone exchanges (also called \u201cswitches\u201d) are grouped, i.e. groups are formed based on the physical location of the telephone exchanges (i.e. the site at which they are located). Such groups are also referred to below as \u201cSwitchGroups\u201d and are used interchangeably with the word \u201csite\u201d as uniquely indicating a physical location.","In the example illustrated in , when phone  is to be provisioned, the above-described match of range (identified by its Low IP and High IP addresses) is used to select a call agent in telephone exchange I (instead of another call agent in telephone exchange J) because this call agent is currently servicing only three phones (as compared to 5 phones being serviced by the call agent in telephone exchange J).","Note that in the example of , the availability of ports I and I is not considered during load balancing, so that these ports remain available for future use. Such ports may remain unpopulated (with hardware) which can be chosen at the time of usage, depending on whether an analog phone or an IP phone is to be supported. Note further that in this example, each port is illustrated as being able to support either one analog phone or three IP phones, although in other examples other numbers of IP phones (e.g. 5 IP phones) may be supported.","Referring to , after such load balancing, IP Phone Configuration Service  persists the IP phone data as well as the identity of the telephone exchange and the call agent (as illustrated by signal ) to a configuration data store (i.e. saves in non-volatile memory, such as a hard disk). Thereafter, notification signals are broadcast by a notification service  running on the Headquarters server, to all interested parties, indicating the identity of the telephone exchange and the call agent that are to provide service to IP phone .","Note that such a notification service receives events from database services, to proceed with informing all interested parties, that a particular database event has taken place. Interested parties subscribe, to be informed of particular events, with the notification server during start-up. At this time, the only interested party in such a broadcast message is Telephone Management Service .","On receiving such a message, Telephone Management Service  communicates with the identified call agent  and informs the call agent that it's now required to provide service to a new IP phone. In this embodiment, call agent  maintains information on each IP phone in an object, and therefore signal  from Telephone Management Service  is via RPC that requests creation of a new phone object. Telephone Management Service  also informs a display service  to update the IP phone's visual display, to indicate its availability as an automatically provisioned phone. Therefore, the display on IP phone  changes from displaying nothing (i.e. blank) to displaying the word \u201cAvailable.\u201d","Moreover, by this time, a phone object has been created for phone  by call agent , and thereafter call agent  periodically sends to the new IP Phone , a message (called \u201cheart beat\u201d signal ). For example, such a message may be sent at 1 minute intervals. Once the phone object is created by call agent , phone  has restricted access service, allowing only internal calls to be made from phone , including calls to the voice mail server (IVR). Phone  at this stage is also called an \u201canonymous\u201d phone because there is no phone number currently associated with phone .","At some time thereafter, a user  that is to hereinafter receive phone calls at this phone  logs into the voice mail server and personalizes the newly configured IP phone (as per signal ). In one specific example, user  presses the pound key (normally located at the bottom right corner of the keypad) on phone , to invoke the Voice Mail application (IVR) in the computer, and then user  enters their phone number and password and on doing so, the Voice Mail application (IVR) plays a voice prompt asking the user to confirm that they want to make the current phone (from which they are calling) their own phone (i.e. to be associated with the phone number that has been assigned to the user).","Therefore, the just-described personalization by user  is performed directly on the IP phone  that is to be personalized, e.g. by using a keypad that is physically attached thereto. In response to confirmation provided by user  (that it is this very phone  that is to be personalized), the voice mail server performs certain acts to assign the user's phone number to the current phone, and may also assign an enhanced service level (which identifies call permissions) to the IP phone. Specifically, the voice mail server updates a relation between the user's telephone number and the port that services the user's IP phone in the IP phone's record in the configuration data store , as illustrated by acts  and  in  (discussed below).","Thereafter, notification signals are broadcast by the notification service  (described above) to inform Telephone Management Service  of the identity of user  who is now associated with IP phone . In turn, Telephone Management Service  informs the above-described display service  to update the IP phone's visual display, to indicate personalization. Therefore, the display on IP phone  changes from displaying the word \u201cAvailable\u201d to displaying the user's name and extension.","As a part of signal  (described above for implementing RPC), Telephone Management Service  also communicates with the identified call agent , e.g. to create a phone object in the switch. Specifically, Telephone Management Service  informs the call agent  of the phone number now associated with phone  and also the IP Phone's call permissions (which are inherited from the group to which the user has been assigned, i.e. from the user record). At this stage, personalization of IP phone  is complete, and hereinafter phone  may be used, by the user, in the normal manner (to receive calls and to make calls).","A number of acts performed by each of the various entities, namely IP phone , telephone management service , IP Phone configuration service , and telephone exchange call agent  in one specific example are illustrated in , and are described next. When IP phone  first comes up, it waits (in act  in ) for a predetermined time period (e.g. 1 minute) for a heartbeat signal from the call agent. At the end of the time period, IP phone  goes to act  (and during this transition sets a variable N to zero) to check if the heartbeat signal was received, and if so, goes to act  and loops back to act , to wait for the next heartbeat signal.","In act , if the heartbeat signal was not received, IP phone  goes to act  (and during this transition increments the variable N). In act , IP phone  checks to see if N>1 which is not true on the first pass through this act but which will be true on the next pass. Therefore, on the initial pass, the \u201cno\u201d branch is taken to act  wherein IP phone  sends an RSIP message to the managing Call Agent. The managing Call Agent is the Call Agent  () communicating with the IP Phone via heart beat. In several embodiments, an IP Phone receives an identity of who is the managing call agent in act  illustrated in  and described above. After completion of act , IP phone  returns to act  (discussed above).","If the pass through act  is a second pass, the \u201cyes\u201d branch is taken, from act  to act . In act , IP phone  sends an RSIP message to the primary call agent. The primary call agent is the call agent  which the IP Phone first communicates with for provisioning. The primary call agent  forwards the phone's RSIP to the telephone management service .","Although in some embodiments the primary call agent  is also the managing call agent, in other embodiments the managing call agent is different, e.g. agent . After completion of act , IP phone  again returns to act  (discussed above). The identity of the primary call agent  may be provided to the IP phone by an FTP server, or alternatively such identity may already be stored in the IP phone (e.g. at a factory where IP phones are manufactured).","Telephone Management Service  of one specific implementation performs act - illustrated in . Specifically, in act , Telephone Management Service  receives and parses an RSIP message from an IP phone , and passes information from the RSIP message to the IP Phone Configuration Service  in act . In acts  and , Telephone Management Service  merely performs a translation of the RSIP message format into the native format needed by Phone Configuration Service . Thereafter, in such embodiments, Telephone Management Service  goes to act  and waits for notification that the IP phone is configured in the database.","Note that the above description of use of the RSIP message format and native format (of a storage type used internally by TMS to record the content of the RSIP message, for examples integers, strings and Booleans) are used by Telephone Management Service  in certain embodiments and are merely exemplary. In some embodiments, information of the type carried by the RSIP message is transmitted in other ways that will be apparent to the skilled programmer in view of this disclosure. Specifically, Telephone Management Service  of some embodiments maintains communications with Call Agents using an RPC protocol. Each Call Agent communicates via RPC, hence requires Telephone Management Service  to manage the requests to the database.","When a notification is received, Telephone Management Service  checks in act  if this particular IP phone has been configured and if not yet configured, it returns to act  to continue to wait. If in act  the IP phone has been configured, Telephone Management Service  goes to act  to create a line object, and thereafter goes to act  to create a phone object (described above). Note that in certain embodiments the line object contains the extension information for the line.","Next, in act , Telephone Management Service  sends an event indicating that the phone object and the line object have been created, to Telephony Application Programming Interface (\u201cTAPI\u201d), which is an interface defined by Microsoft Corporation and Intel Corporation. TAPI denotes an API for connecting a PC running Windows to telephone services. TAPI was introduced in 1993 as the result of joint development by Microsoft and Intel. The standard supports connections by individual computers as well as LAN connections serving many computers. Within each connection type, TAPI defines standards for simple call control and for manipulating call content.","The Telephony Server Application Programming Interface (TSAPI) defines similar capabilities for NetWare servers. In act , the just-described event is notified to a service that updates the display on the IP phone. This notification is done by TAPI in the admin computer  where Telephone Management Service  runs.","After performing act , Telephone Management Service  goes to act  to check if the call agent that is to service this IP phone is alive. Telephone Management Service  determines the identity of the call agent from the configuration of the IP phone. If not alive, then Telephone Management Service  simply waits for the call agent to come up, and when it does, goes to act . If the call agent is already up, then Telephone Management Service  goes directly to act . In act , Telephone Management Service  sends a command to telephone exchange call agent  to inform the call agent of the newly configured IP phone. As noted elsewhere herein, when so informed, the call agent provides heartbeat signals to the IP phone.","IP Phone Configuration Service  receives the IP address and the MAC address of a new phone to be provisioned from Telephone Management Service  in an act  as illustrated in . Next, in act , IP Phone Configuration Service  searches its database for the MAC address. In act  the result is evaluated, and if the MAC address doesn't exist then IP Phone Configuration Service  determines that the phone needs to be provisioned.","In such a case, IP Phone Configuration Service  cycles (in act ) through each SwitchGroup (or site) in its database to perform the following acts -. Note that in this embodiment, each SwitchGroup has a one-for-one correspondence with a site. In act , IP Phone Configuration Service  checks if there are any more SwitchGroups and if so, goes to act  to compare the IP address of the new phone with the IP address range (i.e. the Low IP address and the High IP address) associated with this particular SwitchGroup. Next, IP Phone Configuration Service  goes to act  to check if the IP address falls in the range, and if so, transitions to act  to perform load balancing, which is followed by act  to create a new record in the database, for the new phone. In act , an appropriate call agent (and hence telephone exchange) is identified as providing service to the phone being provisioned.","In act , the new phone may also be associated with a dialing plan (e.g. including an area code) that is unique to the site (or SwitchGroup) at which the phone is located. Therefore, the phone's IP address has been used to identify a dialing plan appropriate for the phone. Note also that a new record that is created in act  uses as a key the Ethernet address of the phone in some embodiments. Hence in these embodiments, when the same phone is again encountered with a new IP address (but having the same Ethernet address) this phone's record is updated with a new IP address (instead of creation of a new record).","In act , if the IP address is not in the range, IP Phone Configuration Service  goes to act  to get the next SwitchGroup, and then transitions to act  (described above). If in act  there are no more switch groups, IP Phone Configuration Service  goes to act , and selects a default SwitchGroup (which is the SwitchGroup for the headquarters). Thereafter, IP Phone Configuration Service  goes to acts  and  to perform load balancing and record creation, using the default SwitchGroup. In this embodiment if all call agents at the default SwitchGroup are at full capacity (and there were no switch groups in act ), the phone may be left unprovisioned.","In an alternative embodiment which does not implement a default SwitchGroup, if in act  there are no more SwitchGroups left, an error message may be generated and the phone may be left unprovisioned.","Referring back to act , if the IP phone identified by telephone management service  already exists in the database, then act  is performed. Note that an IP phone may already exist in the database if this phone has been moved (e.g. either at the same site or a to a different site). If this phone's IP address changes (as per DHCP), but the phone is on the same site, then the record for this phone is updated with its new IP address as per act . If this phone is at a different site, then there will be a change in this phone's IP address (as per DHCP), and hence a call agent is automatically found for this newly-located phone, and the record for this phone is updated with the new call agent and the new IP address as per act .","For this reason, it can be seen that in some embodiments, a computer of the type described herein is programmed to automatically identify a different call agent (and hence telephone exchange) for a newly-located phone in response to message (from the phone) with a new IP address. Note that a new telephone exchange is automatically identified only when the new IP address matches a new range of addresses which is different from the range of addresses that were previously found to match this phone's old IP address. If the new IP address falls within the same range as the old IP address of this phone, then the same telephone exchange is again identified.","Referring to , in act  IP Phone Configuration Service  extracts from the database the previously stored IP address (\u201cIP\u201d) for this IP phone (for comparison with the current IP address \u201cIP\u201d that is provided by Telephone Management Service ). Note that the IP address of a given IP phone can change over time even if the phone has not been moved, e.g. if the IP phone reboots and the DHCP server provides a new IP address. In act , IP Phone Configuration Service  also extracts from the database record for the IP phone, the SwitchGroup \u201cSG\u201d which identifies the site where the IP phone was previously located.","Thereafter, in acts  and , IP Phone Configuration Service  performs the same cycling as described above in reference to acts -, to identify the SwitchGroup \u201cSG\u201d indicating the site where the IP phone is currently located. Next, in act , IP Phone Configuration Service  checks if the two switch groups SG and SG are the same, and if so concludes that the IP phone is still at the same location. In such a case, IP Phone Configuration Service  goes to act  to check if the IP addresses \u201cIP\u201d and \u201cIP\u201d are also the same and if so nothing is done (per act ).","But if the IP addresses are different in act , then IP Phone Configuration Service  updates the database (in act ) with the new IP address IP (which indicates that the IP phone is still in the same site but has a new IP address). If the switch groups are different (in act ), then IP Phone Configuration Service  concludes that the phone must have been moved to a new site. So IP Phone Configuration Service  uses the new SwitchGroup \u201cSG\u201d to load balance (in act ) and then update the record (in act ).","Call agent  contains two threads that respectively perform acts - illustrated in  and acts - illustrated in . Specifically, in act , call agent  listens for events from Telephone Management Service . On receipt of an event, call agent  checks if the event was a command to create a phone object (in act ), and if not, checks the event was a command to delete a phone object (in act ), and if not simply returns to act . If in act , the event was to create a phone object, call agent  goes to act .","At this time, call agent  also adds the newly-configured IP phone into a list of phones to which a heartbeat signal is to be sent. Note that the thread illustrated in  is triggered in act  illustrated in . In the thread illustrated in  and discussed below, a heartbeat signal is sent in act . Thereafter, call agent  returns to act  (discussed above). In act  if the event was a command to delete a phone object, call agent  removes the identified IP phone from the above-described list, and thereafter returns to act .","As noted above, call agent  also contains another thread that is triggered when act  in  is executed. This thread checks (see act  in ) the IP address of each IP phone in the above-described list. Specifically, in one example, the IP address is compared against a table maintained in the call agent. An error is returned if there is no match in the table.","Next, in act , call agent  looks up the amount of time that has elapsed, and checks this amount against a predetermined limit in act . For example, call agent  may check if more than 60 seconds have elapsed, and if not, returns to act  while incrementing a counter that maintains a count of the elapsed time. In act , if more than 60 seconds have elapsed, then call agent  goes to act . In act  call agent  sends out the heartbeat signal to each IP phone in the above-described list, and thereafter returns to act  (described above) while resetting the elapsed time counter.","In one particular implementation, admin computer  maintains a number of tables (shown in the database schema illustrated in ) in its non-volatile memory in order to perform administrative functions, such as provisioning of a user and provisioning of a phone. Specifically, computer  () maintains a Users table  () that contains a number of fields, such as the UserDN which holds the phone number assigned to the user (and \u201cDN\u201d stands for dialing number), the UserGroupID which holds an identity of a group to which the user has been assigned, the GuiLoginName which holds the user's first initial and last name, the GUIPassword which holds the user's password for accessing voice mail.","Such a Users table may also include, for example, the following fields: UserGroupID which defines call permissions of the user (e.g. whether or not a user can make a long distance call), and AnyIPPhone which indicates whether this user can be provisioned for an IP Phone. As noted above, when an administrator provisions a new user via screen  (), computer  adds a new record to the Users table  ().","Computer  also maintains a Ports table  that contains a number of fields, such as the PortId which identifies each port uniquely within the database, SwitchID which uniquely identifies a call agent that is managing the IP phone (and this field serves as a key into the Switches table), a PortNumber which identifies a port uniquely within the switch (and this field is not used for IP phones), a PortTypeID which identifies the type of port, e.g. to distinguish a port that supports an IP phone from a conventional port that supports an analog phone. Such a Ports table may also contain the following fields:\n\n","As noted above, when an IP phone is first coupled to a network, computer  adds a new record to the Ports table . Although a single port can support five IP phones, there are not 5 records one for each phone and having the same port number, because port x 5 is a logical representation of the capacity of the call agent.","In this implementation, Ports table  contains two UserDN fields, namely a Home DN field and a Current DN field. Home DN field contains the phone number that identifies a user permanently assigned to the phone, and Current DN field contains another phone number that identifies another user that may be temporarily assigned to the phone. The phone number in the Current DN field is used to normally transfer calls to the port that services the phone. Initially, when a new phone is automatically provisioned (on being plugged in), and a default record for the new phone is to be added to the ports table as a first step of provisioning, these two fields are left NULL. These two fields are filled in only after the second step of provisioning, i.e. when a user personalizes their phone, and at that time the same phone number is stored in both fields.","For example, when a user with phone number \u201cABC\u201d (also called \u201cfirst user\u201d) personalizes their phone (also called \u201cfirst phone\u201d), that user's phone number \u201cABC\u201d is stored in the Home DN field and also in the Current DN field in the ports table. At this stage, provisioning (and personalization) of the phone have been completed.","After provisioning, in certain embodiments, a user with phone number \u201cABC\u201d may temporarily start using a second phone of another user that has the phone number \u201cXYZ\u201d. In such embodiments, the first user \u201cABC\u201d can personalize that second phone, in the normal manner. In such embodiments, a previously-personalized second phone is being temporarily personalized another time: the second phone's Current DN \u201cXYZ\u201d is changed to contain the first user's phone number \u201cABC\u201d, and the first phone's Current DN is changed to NULL, as illustrated in the following table.",{"@attributes":{"id":"p-0180","num":"0266"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"7"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"35pt","align":"center"}},{"@attributes":{"colname":"4","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"5","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"6","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"7","colwidth":"28pt","align":"center"}}],"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"7","align":"center","rowsep":"1"}}},{"entry":[{},"Home1 ","Current1","Home2","Current2","Home3","Current3"]},{"entry":{"@attributes":{"namest":"1","nameend":"7","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["1Phone","Null","Null","ABC","ABC","ABC","Null"]},{"entry":["2Phone","Null","Null","XYZ","XYZ","XYZ","ABC"]},{"entry":{"@attributes":{"namest":"1","nameend":"7","align":"center","rowsep":"1"}}}]}}}}},"Computer  also maintains a DN table  () that contains a number of fields, such as the DN which identifies each telephone number uniquely within the database. As noted above, when a new user is being manually provisioned, a number in this table which is known to be available is displayed in field  (), thereby to allow the administrator to select an appropriate number for assignment to the user. There's another table in the database which stores digit mappings and allows the administrative tool to allocate available extensions.","Computer  also maintains a SwitchGroups table  () that contains a number of fields, such as the SwitchGroupID which identifies each SwitchGroup uniquely within the database, and SiteID which provides a foreign key relationship with Sites table.","In addition, computer  also maintains a SwitchGroupIPAddress table  which is indexed by the SwitchGroupID field in the SwitchGroups table, and which contains the LowIPAddress and HighIPAddress. As noted above, when a new phone is being automatically provisioned, computer  cycles through the SwitchGroups, to find an appropriate SwitchGroup for use with the new phone. Computer  also maintains a Sites table  that is indexed by the SiteID field and this field is also present in the SwitchGroups table.","Computer  also maintains a Switches table  () that uses a SwitchID field as the key, and a number of switches identified in this table  belong to a SwitchGroup which is identified by the SwitchGroupID field (which in turn is a key into the SwitchGroups table). Such a Switches table may also contain, for example, the following fields:\n\n","The Switches table  is used in the above-described act  to find an appropriate switch that can provide service to the new phone that is being provisioned.","The UserGroups table  contains a field COSTID which contains an identifier for the class of service (e.g. whether or not long distance service is supported).","The System table  contains at least the following fields:\n\n","Moreover, the PortTypes table  contains at least the field PortTypeID which provides a unique identifier to indicate that a port is an IP Port. Finally, the PhoneTypes table  contains at least the field\u2014PhoneTypeID which is a unique identifier to indicate the type of IP Phone configured.","Numerous modifications, adaptations and enhancements of the embodiments, examples, and implementations are described above will be apparent to the skilled artisan in view of the disclosure. For example, in one alternative embodiment illustrated in , the administrator does not provision a user and instead, the users provision themselves through a screen that is similar or identical to screen  () but is displayed to the user, e.g. on a browser built into a display of the IP phone. Unless described otherwise, acts - and  illustrated in  are similar or identical to acts - and  described above, and the corresponding reference numerals are obtained by adding 500 thereto.","In the embodiment of , as soon as a new phone is coupled to the network (as per act ), a record for the phone is created in the memory of a call agent in the telephone exchange (as per act ), and basic service becomes available at the phone (as per act ). Thereafter, the user performs personalization (as per act ) as described above, but in this embodiment the telephone exchange does not immediately respond. Instead, the administrator reviews and approves the user-provided information (as per act ). In response to approval by the administrator, the computer updates the telephone exchange's memory (as per act ), and the telephone exchange starts to provide enhanced services (as per act ).","Therefore, in some embodiments of the type illustrated in , each new user may experience a delay (e.g. of one hour, half-day, or even one day) between the time the user performs the above-described actions (e.g. providing the user-specific information at the phone) and the time at which enhanced service becomes available (i.e. when the phone becomes \u201cpersonalized\u201d). However, such an embodiment does eliminate the need for an administrator to personally type in information about each user (because such information is self-entered by the user). In this embodiment, the administrator simply signs off on user-provided information, which significantly reduces the administrator's workload.","In another alternative embodiment illustrated in , coupling of a phone to a network (as per act ) does not result in basic service to be provided to the phone as described above. In  as well, acts - and  are similar or identical to acts - and , with the corresponding reference numerals being obtained by adding 100 thereto. In the embodiment illustrated in , the user is required to personalize their phone (as per act ) before the computer creates a record for the phone (as per act ).","When the computer creates the phone's record (as per act  in the embodiment of ), the record contains all information (including the phone number), and in such a case the telephone exchange provides the service (e.g. enhanced service) that is appropriate for the user (as per act ). In two variants of this embodiment, the administrator either provisions the user prior to coupling of the phone to the network (as per act ), or alternatively the administrator simply approves or corrects the user-provided information (as per act ) in which case the administrator's approval must be received by the computer, and the computer must update the telephone exchange (as per act ) before the telephone exchange will provide any service to the phone (as per act ).","Note that in an alternative to the embodiment illustrated in , acts  and  are performed in the reverse order, i.e. act  is performed before act . Specifically, in such embodiments, a user does not need to exist for a phone to be provisioned.","As noted above, when a phone is initially plugged in, it is only enabled to function in a default state because only limited services are made available. To access enhanced services (and also to even receive calls at the phone), the user is required to personalize their phone. For example, the user may be required to identify themselves via their phone and\/or provide a telephone number to be used in calling the user at their phone.","Specifically in one embodiment, the user uses an anonymous phone that is to be personalized, to log into voicemail (as per act  in ). On receipt of a user's login, an interactive voice response (IVR) system  () that implements voice mail checks to confirm that this user's name and password (which form the user's login) are authentic (e.g. by checking against the same information in a database). If so, the IVR system  () presents one or more options for personalization of the phone (e.g. as per act ). In response, the user may provide a number of answers. In certain embodiments of the invention, in at least one of the answers, the user supplies an extension number that is to be assigned to the IP phone (as per act ). This extension number was previously allocated to the user (e.g. in a user record) by the system administrator. Alternatively the extension number may be chosen by the user during the current session with IVR system .","The extension number supplied (or selected) by the user is saved into a persistent data store by IVR system  depending on the following circumstances: IVR system  checks (as per act  in ) as to whether or not the IP phone is previously personalized. If the IP phone is displaying the message \u201cavailable\u201d then it can be personalized, and hence the IVR system  (also called \u201cvoice mail server\u201d) updates a relation between the user's telephone number and the port that services the user's phone. The update is done in a record for the anonymous phone in configuration data store , to make the user the current owner of the anonymous phone (as per act ), e.g. the value NULL for the phone number is replaced with the extension number of the user.","Thereafter, in act  notification signals are broadcast by the notification service (described above) to each process that may be interested, e.g. to an IP phone display system and a telephone management system. An IP phone display service that is waiting for such a notification (as per act ) then updates the phone's display as per act  (e.g. by sending changing the message to be displayed in a memory of the phone). Hence, the user has been notified (via the change in display) that the phone has been successfully personalized (and that provisioning of the phone is now complete).","Note that in the above-described embodiment, a telephone management service is also waiting for such a notification (as per act ), and this service informs the call agent (as per act ) about an association between: the phone (identified by its MAC address), the user (identified by their name), and a phone number to be henceforth used to route calls to the phone.","In act  if the answer is NO, then IVR system  goes to act  to update the database and makes the user the owner of the phone. Next, the IVR system  updates the database to reset a bit (called \u201canyIPPhone\u201d bit) in a record for the user, indicating that personalization is now completed. Thereafter, IVR system  goes to act  (described above).","Although described in the terms of a telephone instrument that supports voice calls, as will be apparent to the skilled artisan, the invention can be used for automatically provisioning a device that supports calls using other kinds of information in addition to and\/or instead of audio (depending on the embodiment). Specifically, some embodiments of the invention automatically provision devices that support video calls and\/or multimedia telephone calls, e.g. of the type described in U.S. Pat. No. 5,689,553 granted to Ahuja, et al. and U.S. Pat. No. 5,999,525 Krishnaswamy, et al. each of which is incorporated by reference herein in its entirety.","Note that some embodiments implement Telephone Management Service and Display Service separate from the IP Config Service. Having multiple services makes the system more fault tolerant in such embodiments. For example, if any of the services terminates, the other services will continue responding.","Furthermore, although in certain embodiments the computer identifies a telephone exchange to be used with a phone by comparing a source address of a message to the computer (that is generated soon after the phone is plugged in) with a low address and a high address of each range of addresses available for assignment to telephones in alternative embodiments other mechanisms may be used to identify an appropriate telephone exchange. For example in some embodiments, the computer may pick a telephone exchange at random or may pick a default telephone exchange for use by all anonymous phones. In such embodiments, the computer changes the telephone exchange to be used by the phone during personalization of the phone. For example, the computer may use the user's phone number to pick the telephone exchange to be used after personalization.","Although in certain embodiments the value NULL is used for the phone number, in other embodiments different values may be used for the phone number of a phone that has been partially provisioned, without user interaction. Specifically, in some embodiments, a newly-plugged-in phone may be provisioned with an automatically-generated phone number from a predetermined range of phone numbers. For example, computer  may be set up by an administrator, ahead of time, to automatically generate phone numbers within the range 1535-1635 whenever computer  creates a new record in a telephone exchange for a newly-plugged-in phone in a first step of provisioning. In such a case, the newly-plugged-in phone can receive phone calls being made to the automatically-generated phone number, although services available at the phone are limited (based on services identified by an administrator as being default services to be provided to all anonymous phones). For this reason, such a phone (after the first step of provisioning) is also referred to as an anonymous phone.","To obtain services that are specific to a user (such as one or more enhanced services), it is still necessary, in the just-described embodiments, for a user to at least log in from the anonymous phone that is to be personalized (and in some embodiments to provide a phone number to be associated with phone being personalized as discussed elsewhere herein). During such a second step of provisioning (wherein the anonymous phone is being personalized), computer  of such embodiments overwrites (in the memory of the telephone exchange) an automatically-generated phone number that was saved in the first step, with the phone number to be associated with the user. As discussed above, the phone number to be associated with the user may have been provided to the user by an administrator or alternatively may be selected by the user during an interaction with the computer while performing the personalization (after the user has been authenticated).","Although in some embodiments, the user uses an anonymous phone that is to be personalized, to log into voicemail, and provides their user name and password to IVR system , in an alternative embodiment the user supplies such information via a graphical user interface. For example, a computer  may be equipped with a system  that generates screens for display on an IP phone. Alternatively, the IP phone itself may be programmed to display screens that obtain the user's name and password and send a message to a computer that forms an association between the phone, the user, and a phone number to be henceforth used to route calls to the IP phone.","Furthermore, although each IP phone is identified in some embodiments by a MAC address (i.e. a layer-2 address), in other embodiments each phone may be identified by any unique identifier (such as a serial number) that is programmed into a non-volatile memory of each phone, at the factory.","Therefore, numerous modifications, adaptations and enhancements of the embodiments, examples, and implementations are encompassed by the attached claims.","Appendix B explains how to:","Set IP address ranges","Assign configuration switches to support the IP phones","Select a user group for unassigned IP phones","Set DiffServ and TOS Quality of Service parameters","Add IP phone users to the system","Manage the IP phones","Setting IP Address Ranges","If your system consists of more than one site (Headquarters), you must define an IP address range","for IP phones at each site in the system. Setting ranges for each site ensures that new phones added to the system are associated with the correct site. You can also view IP Phones, by the switch supporting them, from the IP Phone Maintenance page. For more informations, see Chapter 14, Maintenance. You can view the IP address range for each site from the IP Address Map list page. The page lists the sites and associated IP address ranges. To add a site with IP phones, click the Add button and enter the information in the Site IP Address Range edit page. To delete a site from the list, click the check box to the left of the site and click the Delete button.\n\nTo edit the IP address range for a site: Step 1: From the Site column, click on the site for which you are setting a range. The Site IP Address Range edit page appears. Step 2: If you are setting the IP address range for a site other than the one shown in the Site pull-down list, select it from the list. Step 3: Enter the lowest IP address in the Low IP Address text-entry field. Step 4: Enter the highest IP address in the High IP Address text-entry field. Step 5: To set the new range, click Save. You can set ranges for other sites in the system by clicking Previous or Next.\n\nSetting IP Phones Options\n\nIP Phones Options edit page has four configurable parameters:\n","IP Phone Configuration Switch 1","IP Phone Configuration Switch 2","User Group for Unassigned IP Phones","Quality of Service","IP Phones Options Edit Page Assigning Configuration Switches You need to designate a switch through which the IP phones will initially request boot files from the server. The IP addresses of these switches are downloaded to the IP phones whenever the IP phones are booted. These switches communicate with the PBX server to determine which\n\nswitch manages calls for a particular IP phone. You have the option of assigning two switches to this function, in case one switch fails. Every installation with IP phones must have at least one configuration switch.\n\nTo assign configuration switches, simply select an available switch from the pull-down lists for configuration switches 1 and 2. In a new installation, the PBX system automatically assigns the first two switches you configure as the configuration switches.\n\nAssociating a User Group with Unassigned IP Phones\n\nUnassigned IP phones are available for users configured for Any IP Phone. From the pull-down list, select the user group that has the call permissions you want unassigned IP phones to have.\n\nQuality of Service\n\nThe Quality of Service field on the IP Phones Options edit page can be used to enter a Types of Service (TOS) value or a DiffServ value, whichever your network currently supports.\n\nAdding Users with IP Phones\n\nThere are two ways to add IP phone users to the system. The first method requires you to assign IP phones to each user, while the second uses the Any IP Phone feature to allow users to assign their own phone from their desktop and voice mail. Using the Any IP Phone method simplifies the setup of multiple new users. You can use either or both methods depending on your specific installation.\n\nAdding Users with any IP Phone\n\nTo add IP phone users using Any IP Phone:\n\nStep 1: Click Users>Individual Users from the navigation frame.\n\nStep 2: From Add New User at Site, select the site for the new users.\n\nStep 3: Click Go. The User edit page appears.\n\nStep 4: Enter the information for the first user you wish to add.\n\nStep 5: From Home Port, click IP Phones and select Any IP Phone from the pull-down list.\n\nStep 6: From User Group, select a user group that allows extension reassignment.\n\nStep 7: When you have finished configuring the user, click Save.\n\nStep 8: To add more users, click Copy and repeat Step 4 through Step 7 until you have added all the new users.\n\nStep 9: Instruct the users to log in to their voice mail from their desktop and follow the prompts. Each user's extension will automatically be assigned to the IP phone they are using. Make sure that users know which phone they should assign so that phones are not accidently assigned to the wrong users.\n\nNOTE Any IP Phone users are assigned to the \u201cHeadquarters\u201d site. When you assign a specific IP phone, the user will belong to the site where the IP phone is located. Only IP phones associated with the currently selected site will appear in the IP phone pull-down list.\n\nAfter users have assigned their IP phones from voice mail, you can view the IP phones and users from IP Phone list page or the IP Phone Maintenance page.\n\nAssigning IP Phones by User\n\nYou can also assign IP phones through the User edit page, one user at a time. You can assign phones by specific IP addresses or assign users to Any IP Phone according to the user's needs.\n\nTo assign an IP phone:\n\nStep 1: Click Users>Individual Users from the navigation frame.\n\nStep 2: From Add New User at Site, select the site for the new user.\n\nStep 3: Click Go. The User Edit page appears.\n\nStep 4: Enter the information for the user you wish to add.\n","Step 5: From Home Port, click IP Phones and either select the IP phone by IP address or select Any IP Phone. Only the IP phones in the current site will be listed. You may wish to assign some users to Any IP Phone if they will not have a permanent extension at the current site.","Step 6: Click Save.","Viewing and Editing IP Phones on the System","To help you manage the IP phones, software in a computer allows you to view and edit the IP phones on the system.","Viewing IP Phones","To view the IP phones on the system:","Step 1: Click IP Phones>Individual IP Phones from the navigation frame.","Step 2: From the By Site pull-down list, select the site that you want to view (or all sites).","Step 3: To view the IP phones connected to a specific switch, select the switch you want to view from the By Switch pull-down list. The IP phones for the sites and switches you have selected will be displayed.","IP phones can also be viewed from the maintenance screen of the computer.","You can change the name of an IP phone from the IP Phone List. By default, IP phones are listed by MAC address in the IP Phone List Name column. To change the name of an IP phone:","Step 1: Click IP Phones>Individual IP Phones from the navigation frame.","Step 2: Select your viewing options so that the IP phone or phones you want to rename are listed in the IP Phone List.","Step 3: From the Name column, click the IP phone you want to rename. A dialog box displays the information for the IP phone you selected.","Step 4: Enter the new name in the Name text-entry field.","Step 5: Click Save.","Deleting and Moving IP Phones","IP phones can be deleted from the system or moved to another site. To delete an IP phone:","Step 1: Click IP Phones>Individual IP Phones from the navigation frame.","Step 2: Select your viewing options so that the IP phone or phones you want to delete are listed in the IP Phone List.","Step 3: Click the check box of the IP phone you want to delete.","WARNING Make sure that you have the selected the correct phone and that no other phones are selected.","Step 4: Click Delete. You will see a dialog box requesting confirmation.","Step 5: Click Yes to delete the phone. Click Cancel if you have selected the wrong phone.","NOTE If you wish to add the IP phone back into the system, you must reboot the IP phone. It will be reconfigured during the boot process and become available again.","To move an IP phone to a destination switch on a remote site, the remote site must have an IP address range defined. You may not move an IP phone to a switch on a remote site if the IP address of the phone is not within the IP address range of the destination site. You may move an IP phone across switches at Headquarters without entering an IP address range for Headquarters site. The IP address range restrictions are only for switches at remote sites.\n\nTo move an IP phone:\n\nStep 1: Select the switch you are moving the IP phone(s) to from the pull-down list.\n\nStep 2: Click IP Phones>Individual IP Phones from the navigation frame.\n\nStep 3: Select your viewing options so that the IP phone or phones you want to move are listed in the IP-Phone List.\n\nStep 4: Click the check box of the IP phone you want to move.\n\nStep 5: Click Move. You will see a dialog box requesting confirmation.\n\nStep 6: Click Yes to move the phone. Click Cancel if you have selected the wrong phone(s).\n","AnyPhone is a feature of a specific PBX system that lets users assign their extension to any telephone on the system, quickly and simply. When a user assigns their extension to a telephone, their entire communications profile is reassigned to that telephone. Calls placed to the user will be routed to that telephone. Calls placed from that telephone will reflect proper caller ID information. The AnyPhone feature might be used by:","Multi-Site Users, such as executives or managers, who might use the system across multiple locations. AnyPhone allows these users to pick up a telephone at any location, log into voice mail, and assign their extension to that telephone.","Office Hotel Users, such as contractors or telecommuters, who might not always be in the office or might share office space. AnyPhone allows these users to have their own extension and mailbox yet not have a dedicated switch port. They can simply assign their extension to a telephone when they are in the office.","Remote Users, such as employees in sales or support, who might travel frequently. AnyPhone allows these users to have their own extension and mailbox yet not have a dedicated switch port optimizing system resources.","AnyPhone also allows the System Administrator to configure all telephones as \u201cAnonymous Telephones\u201d and all users as \u201cVirtual Users,\u201d eliminating administrative costs associated with frequent moves. When a move occurs, users simply plug in their telephone at their new location and assign their extension.\n\nTerms used to describe AnyPhone are as follows:\n\nSpecial Considerations\n\nThe following considerations apply when using AnyPhone:\n","To use the AnyPhone feature, the user must be in a User Group that has a Telephony Class of Service of Allow Extension Reassignment. See the \u201cConfiguring AnyPhone\u201d section for additional information about checking the Telephony Class of Service.","PBX supports up to 1,200 virtual users which are anonymous telephones not currently assigned a user. You can make a call from an anonymous telephone, but you cannot call an anonymous telephone.","AnyPhone The feature that lets a user assign their extension to any telephone.","Assign: The command that assigns an extension to a telephone.","Assigned: The status of the user who is currently assigned to a telephone, but their home switch port is the SoftSwitch.","Current Telephone The telephone to which the user is currently assigned (also known as \u201cCurrent Switch Port\u201d).","Go Home The command to assign a user's extension back to their home telephone.\u201d","Home: The status of a user who is assigned to their home telephone.","Home Telephone: The telephone to which the user is normally assigned (also know as \u201cHome Switch Port\u201d). This is the telephone to which the user returns when using the \u201cGo home\u201d command.","Unassign: The command that unassigns an extension from a telephone.","Vacated Telephone: A home telephone that currently does not have a user assigned. These are listed on the Anonymous Telephone edit page under Vacated Telephones.","Virtual User: A user that does not have a physical telephone port and is currently assigned to the SoftSwitch.","Use the following instructions to configure AnyPhone.","Step 1: Go to the Edit User page and assign a port to the user in the Home Switch Port parameter.","If you select a home switch port, the current switch port is initially defaulted to the home switch port. If you select the SoftSwitch, the system does not assign a physical switch port. This user will be a \u201cVirtual User\u201d until they use the AnyPhone feature to assign their extension to a telephone. If you click on Go Home, the system forces the user back to his or her home telephone. This option is useful when the user is not using his or her home phone.\n\nNOTE Clicking on Go Home drops all calls on the current switch port and the home switch port.\n\nEdit User Configuration Page\n\nStep 2: Go to the Edit Telephony Features Permissions configuration page for the user group you wish to grant this privilege.\n\nUsing Anyphone\n\nCheck the Allow Extension Reassignment check box, if not already checked.\n\nStep 3: Go to the Users List page, and verify that all users are assigned to the correct port.\n\nUsers List Page\n\nRecall the following states of the users:\n","Home\u2014The user is currently located to their home telephone.","Assigned\u2014The user is currently located at a telephone other than their home telephone.","NOTE You can view all the anonymous telephones as well as vacated telephones on the Anonymous Telephones edit page.","Allow Extension Reassignment Check Box","After configuring AnyPhone, use the Voice Mail telephone user interface to assign and unassign an extension to any telephone. Use the client user interface to return to a home telephone.","Using the Telephone User Interface","Use the following instructions to assign an extension to a telephone.","Step 1: Log into voice mail.","Step 2: Press 7 to select Personal Options.","Step 3: Press 3 to select Assign Extension.","Step 4: Press 1 to select Assign.","Step 5: Wait for a dial tone, then hang up.","NOTE This option is only available from telephone ports, not trunk.","Use the following instructions to unassign an extension from a telephone:","Step 1: Log into voice mail.","Step 2: Press 7 to select Personal Options.","Step 3: Press 3 to select Assign Extension.","Step 4: Press 2 to select Unassign.","Step 5: Wait for a dial tone, then hang up.","NOTE: If no other user is assigned to their home telephone, their extension will automatically revert back to their home telephone. If another user is assigned to their home telephone, their extension will be assigned to the SoftSwitch until their home telephone becomes available. A user can \u2018kick out\u2019 the other user from the home telephone by assigning their extension from their home telephone.\n\nUsing the Telephone User Interface\n\nUse the following instructions to assign an extension to a telephone.\n\nStep 1: Log into voice mail.\n\nStep 2: Press 7 to select Personal Options.\n\nStep 3: Press 3 to select Assign Extension.\n\nStep 4: Press 1 to select Assign.\n\nStep 5: Wait for a dial tone, then hang up.\n\nNOTE This option is only available from telephone ports, not trunk.\n\nUse the following instructions to unassign an extension from a telephone:\n\nStep 1: Log into voice mail.\n\nStep 2: Press 7 to select Personal Options.\n\nStep 3: Press 3 to select Assign Extension.\n\nStep 4: Press 2 to select Unassign.\n\nStep 5: Wait for a dial tone, then hang up.\n\nNOTE If no other user is assigned to their home telephone, their extension will automatically revert back to their home telephone. If another user is assigned to their home telephone, their extension will be assigned to the SoftSwitch until their home telephone becomes\n\navailable. A user can \u2018kick out\u2019 the other user from the home telephone by assigning their extension from their home telephone.\n"],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIGS. 1A-1D"},{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 2A"},{"@attributes":{"id":"p-0034","num":"0033"},"figref":["FIGS. 2B-2D","FIG. 2A"]},{"@attributes":{"id":"p-0035","num":"0034"},"figref":"FIG. 3A"},{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIG. 3B"},{"@attributes":{"id":"p-0037","num":"0036"},"figref":"FIG. 3A"},{"@attributes":{"id":"p-0038","num":"0037"},"figref":["FIG. 3C","FIG. 3B"]},{"@attributes":{"id":"p-0039","num":"0038"},"figref":"FIG. 4A"},{"@attributes":{"id":"p-0040","num":"0039"},"figref":["FIG. 4B","FIG. 4A"]},{"@attributes":{"id":"p-0041","num":"0040"},"figref":["FIG. 5A","FIG. 4A"],"b":"401"},{"@attributes":{"id":"p-0042","num":"0041"},"figref":["FIG. 5B","FIG. 5A"],"b":"521"},{"@attributes":{"id":"p-0043","num":"0042"},"figref":["FIG. 5C","FIG. 5A"],"b":"525"},{"@attributes":{"id":"p-0044","num":"0043"},"figref":["FIG. 5D","FIG. 5A"],"b":"526"},{"@attributes":{"id":"p-0045","num":"0044"},"figref":["FIGS. 5E and 5F","FIG. 5A"],"b":"524"},{"@attributes":{"id":"p-0046","num":"0045"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0047","num":"0046"},"figref":["FIGS. 7 and 8","FIG. 3A"]},{"@attributes":{"id":"p-0048","num":"0047"},"figref":"FIG. 9"}]},"DETDESC":[{},{}]}
