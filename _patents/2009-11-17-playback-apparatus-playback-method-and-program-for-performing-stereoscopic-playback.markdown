---
title: Playback apparatus, playback method, and program for performing stereoscopic playback
abstract: In performing stereoscopic view, a shift information memory () stores, as a number of pixel lengths, an offset indicating how far in a right direction or a left direction to move coordinates of pixels to realize stereoscopic view. When realizing stereoscopic view, a plane shift engine () moves the coordinates of image data in a graphics plane in the right direction or the left direction by the number of pixel lengths indicated by the offset. When a scale of video data targeted for stereoscopic view is changed by a basic graphics plane (), a shift distance of pixel coordinates by the plane shift engine () is based on a number of pixel lengths obtained by multiplying the offset by a changed scaling factor in the horizontal direction.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08335425&OS=08335425&RS=08335425
owner: Panasonic Corporation
number: 08335425
owner_city: Osaka
owner_country: JP
publication_date: 20091117
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","CITATION LIST","Patent Literature","Patent Literature 1","Patent Literature 2","SUMMARY OF THE INVENTION","MEANS TO SOLVE THE PROBLEM","EFFECTS OF INVENTION","DESCRIPTION OF EMBODIMENTS","Embodiment 1","Embodiment 2","Embodiment 3","Embodiment 4","Embodiment 5","INDUSTRIAL APPLICABILITY","REFERENCE SIGNS LIST"],"p":["(1) Field of the Invention","The present invention belongs to the technical field of stereoscopic playback.","(2) Background Art","Stereoscopic playback technology introduces a mechanism for showing different pictures to the left eye and the right eye, and uses a parallax between the eyes to create the illusion of a stereoscopic video.","Although currently the mainstream application of stereoscopic playback technology is use in theaters and the like, a use mode for enjoying stereoscopic playback on a playback apparatus or a display at home is expected to rapidly become widespread in the near future.","There are various methods for displaying a stereoscopic video to users (stereoscopic display). For example, one common method is to use shutter glasses. In this method, the shutter glasses alternately block a viewer's left eye field of view and then the viewer's right eye field of view at high speed, while a display image for the left eye and a display image for the right eye are alternately updated at high speed in synchronization with the blocking operation of the shutter glasses. This operation results in the image for the left eye on the display being visible only to the left eye, and the image for the right eye on the display being visible only to the right eye.","In order to allow the viewers to view the stereoscopic video at the same frame rate as normal monoscopic video, the playback apparatus must play back two videos to be seen respectively by the right eye and the left eye, and the display requires a response performance twice as high as the response performance needed for the normal monoscopic video. This means, for example, that it is necessary to switch among at least 120 frames per second in order to display video consisting of 60 frames per second. Patent Literature 1 listed below is conventional technology disclosing a playback apparatus for home use, and Patent Literature 2 is conventional technology disclosing stereoscopic playback.",{"@attributes":{"id":"p-0009","num":"0000"},"ul":{"@attributes":{"id":"ul0001","list-style":"none"},"li":"International Publication No. 2005\/119675"}},{"@attributes":{"id":"p-0010","num":"0000"},"ul":{"@attributes":{"id":"ul0002","list-style":"none"},"li":"International Publication No. 2008\/0192067"}},"When considering the recording and distribution of recording media, such as optical disks, of movie works that can be stereoscopically displayed, there is disagreement about how to realize a composite video, in which graphics such as subtitles and GUI in the moving images are composited.","One method is preparing a left eye and a right eye video stream, separately preparing left eye subtitles and right eye subtitles, and superimposing each subtitle on a corresponding video stream.","The second method is, as disclosed in Patent Literature 2, a method using one video stream and depth information corresponding to the video stream to give a stereoscopic effect to the video, and superimposing a subtitle object on the video. In patent document 2, using Zero parallax, that is, eliminating depth, when displaying the portion of video on which subtitles overlap enables avoiding giving viewers a sense of difference in depth between the subtitles and the video.","In the third method, a left eye video stream and a right eye video stream are prepared in advance, one subtitle object is prepared for both streams, and by causing a plane shift based on depth information, a subtitle with a stereoscopic effect is superimposed on each video stream.","In the first method, since not only the video stream, but also the graphics stream for subtitles and GUI must be created for both left and right views, the authoring load is large. In contrast, in the second method, it is not necessary to create left and right graphics streams for subtitle display, and thus the authoring load is reduced. However, since the sense of depth is lost in the portion where the subtitle overlaps with the stream, the visual effect is not ideal.","In the third method using plane shift, it is not necessary to create both left- and right-view graphics streams for subtitles and GUI, and also the sense of depth is not lost in the portion where the subtitles or GUI overlap the video, so this is the most ideal. However, when executing a scaling function for enlarging and reducing the screen being displayed, negative effects occur.","When executing a stereoscopic view of a video stream by playing back a video to be seen from a left view and a video to be seen from a right view, even when scaling is performed, since the video to be seen from a left view and the video to be seen from the right view is merely enlarged or reduced, there is no hindrance to stereoscopic view.","However since the graphics used for left view and right view are shared, although the text is reduced due to scaling, the position of the text remains the same as before scaling, and the depth of the subtitle text is preserved. This results in a case in which although the depth of the video has been reduced, the subtitle remains the same, and there is a sharp difference in stereoscopic effect between the video and the subtitles\/GUI during scaling.","Before and after scaling, if an interval between the subtitle for the left view and the subtitle for the right view is maintained, and only the depth of the video changes, the extent to which the video pops out is identical to the extent to which the subtitle pops out, and compared to before scaling, the subtitles have largely shifted after the scaling relative to a video plane. As a result, there is a risk of discomfort to the viewer due to the sharp difference in stereoscopic effect between the video and the subtitles. From the viewpoint of protecting consumers, this is undesirable since eyestrain in the viewers increases significantly.","In a playback apparatus using plane shift, the above-described problem does not occur if scaling is prohibited when the subtitles are composited with the video. However, in existing playback apparatuses, for example when playing back a video in full screen, when a menu call operation is performed, processing is performed to display a screen menu, and above that, to display a video that has been scaled to be more compact. The reason for this is that this processing enables enlarging the field of view of the menu without hindering the viewing of the video. GUI processing performed along with scaling the video enlarges the field of view of the menu and preserves the convenience of the user, and even to realize stereoscopic effect, abbreviating the GUI processing along with scaling means regression from the point of view of convenience of existing optical disk playback apparatuses, and cannot be considered an advantageous idea to the industry.","The aim of the present invention is to provide a playback apparatus that adheres to consumer protection while improving realism and realizing the processing of GUI with video scaling.","The playback apparatus of an embodiment of the present apparatus for solving the above problem is a playback apparatus that realizes stereoscopic playback including a video decoder operable to obtain video frames by decoding a video stream; a plane memory that stores therein graphics data having a resolution of a predetermined number of horizontal and vertical pixels; an offset storage unit that stores therein an offset indicating a number of pixel lengths for the graphics data; a shift engine operable to shift respective coordinates of the pixels in a left direction by a shift distance based on the offset, and to shift the respective coordinates of the pixels in a right direction by the shift distance, to realize stereoscopic playback; and a composition unit operable to composite the obtained video frames with the graphics data in which the coordinates of the pixels therein have been shifted in each of the left direction and the right direction respectively, wherein when a scaling factor of the video frames to be composited is changed to a value other than 1, the shift distance of the shift engine is based on a value obtained by multiplying the offset by the scaling factor.","Configured as above, the stereoscopic video playback apparatus of the present invention can adjust the shift distance by which a subtitle is shifted during the scaling of a video with the subtitle. As a result, when performing GUI processing with scaling, this enables preserving the depth balance between the video and the subtitle even after scaling is performed, and preventing the occurrence of unnatural change of the stereoscopic structure. Thus, the video and the subtitle are displayed in a more natural way, and eyestrain of the viewer can be alleviated, thus enabling ensuring consumer protection from every angle.","Although optional, further effects can be achieved by performing the following modifications on the above-described means of solving the problem.","A calculation table method may be realized, so that a table is used for the calculation of transforming the plane offset to coordinate values. By doing this, the depth of subtitles can be changed by devices with low resources.","Furthermore, when scaling the video with the subtitle, the stereoscopic video playback apparatus may be configured to adjust a shift distance of the video plane. Shifting the video plane can prevent a sharp difference in stereoscopic effect, alleviate eyestrain, and cause the video and the subtitle to be displayed in a more natural way.","Furthermore, when scaling the video with a subtitle, the stereoscopic video playback apparatus may be configured to gradually adjust the shift distance by which the subtitle is shifted for each frame. This way, the difference between the stereoscopic effect of the video and that of the subtitle does not become large. As the video and the subtitle are displayed in a more natural way, eyestrain of the viewer can be alleviated.","Furthermore, when scaling the video with a subtitle, the stereoscopic video playback apparatus may be configured to temporarily disable display of the subtitle. When a predetermined time period has passed, i.e., when the user's eyes have been accustomed to the difference between the stereoscopic effect of the pre-scaling video and that of the post-scaling video, the subtitle is displayed. This way, the difference between the stereoscopic effect of the video and that of the subtitle does not become large. As the video and the subtitle are displayed in a more natural way, eyestrain of the viewer can be alleviated.","A recording medium and playback apparatus including the above-described means for solving the problem are described below as embodiments of the present invention with reference to the drawings.",{"@attributes":{"id":"p-0086","num":"0085"},"figref":["FIG. 1","FIG. 1"],"b":["100","200","300","400","500"]},"The BD-ROM  provides the above-stated home theater system with a movie, for example.","The playback apparatus  is connected to the television , and plays back the BD-ROM . A 2D video and a 3D video exist among playback videos to be played back. The 2D video is, for example, when a plane including a display screen of a display apparatus is taken as an X-Y plane, an image displayed as pixels on positions on the display screen, and is also called a monoscopic video.","In contrast, a 3D video is a video in which elements on the X-Y plane in the display screen of the display apparatus appear, by using the structure described in the present embodiment, either farther forward or backward than the display screen, relative to a straight line that intersects with a plane taken as the X-Y plane as an axis (in the present embodiment, defined as an axis that is a straight line vertical to the X-Y plane (Z axis)).","When the 3D video is, for example, a video formed when corresponding data (stream data) of a left view video to be viewed by a left eye and a right view video to be viewed by a right eye is recorded on a recording medium that can be read via a virtual file system  shown in , described later (for example, a BD-ROM  or a local storage shown in , and here for simplicity the BD-ROM  is described as an example), and the extent of parallax between the two eyes causes a differing view between the right view to be viewed by the right eye and the left view to be viewed by the left eye, an operation is repeated in which the left view video is shown to the left eye only, and the right eye video is shown to the right eye only, and the video appearing as a stereoscopic image having depth to the human eye, can be displayed to the user. However, when only one of the left view video and the right view video is used for playback, the video merely appears monoscopic to the human eye. For example by showing the left view video to both the right eye and the left eye, the left view video merely appears as a monoscopic video to the human eye.","The remote control  is a device that receives an operation for the hierarchized GUI from the user. In order to receive such an operation, the remote control  includes: a menu key for calling menus composing the GUI; an arrow key for moving a focus of the GUI parts composing each menu; a decision key for performing a determining operation on the GUI parts composing each menu; a return key for returning to higher order hierarchized menus; and a numerical key.","The TV  provides the user with a dialogical operational environment by displaying the playback picture of the movie, a menu and the like. The display screen of the television  in  is an example of scaling a video and displaying a full-screen GUI. In the screen of the television , the right half displays a director's comment cm written by the director of the movie.","In the screen of the television , the bottom half includes a button element bn for receiving a \u201cnext skip\u201d or \u201cprevious skip\u201d instruction, a button element bn for receiving a menu call, a button element bn for receiving a return operation, and a button element bn for receiving a network connection. The bottom half also includes an indicator ir for displaying the number of the current title and the number of the current chapter. These button elements can be operated by the remote control .","The liquid crystal shutter glasses  are composed of crystal liquid shutters and a control unit, and realize stereoscopic view with use of binocular disparity of the viewer's eyes. Lenses having a feature that the transmittance of light is changed by changing applied voltage are used for the crystal liquid shutters of the liquid crystal shutter glasses . The control unit of the liquid crystal shutter glasses  receives a SYNC signal for switching between a right-view image and a left-eye image that are transmitted from the playback apparatus , and switches between a first state and a second state in accordance with this SYNC signal.","In the first state, the control unit adjusts the applied voltage so that light does not transmit through a liquid crystal lens corresponding to the right view, and adjusts the applied voltage so that light transmits through a liquid crystal lens corresponding to the left view. In such a state, only the left-view image is viewed, and the left view image is not provided to the right eye.","In the second state, the control unit adjusts the applied voltage such that the liquid crystal lens corresponding to the right view transmits light, and adjusts the applied voltage such that the liquid crystal lens corresponding to the left view does not transmit light. In such a state, the crystal liquid shutters provide view of the right-view image, and the right view image is not provided to the left eye.","Generally, the right-view image and left-view image look a little different due to differences between angles.","With use of such a difference between the image seen respectively by the left eye and the right eye (in other words, an extent of parallax), the user can recognize an image as a stereoscopic image. Thus, the user confuses a monoscopic display with a stereoscopic display by synchronizing timing of the liquid crystal shutter glasses  switching between the above-stated first state and second state with timing of switching between the right-view image and the left-view image. Next, a description is given of a time interval in displaying right-view video and left-view video.","Specifically, there is a difference between the right-view image and the left-view image that corresponds to binocular disparity of the user in a monoscopic image. By displaying theses images while switching the images at a short time interval, the images appear as if the images are displayed stereoscopically.","The short time interval may be a time period just enough to cause the user to confuse monoscopic images with stereoscopic images when the switching and the displaying are performed as described above.","This concludes the description of the home theater system.","The following describes a recording medium to be played back by the playback apparatus . The playback apparatus  plays back the BD-ROM .  shows an exemplary internal structure of the BD-ROM .","The BD-ROM  that is an example of the recording medium is shown in a fourth row from the top in the present figure, and a track on the BD-ROM  is shown in a third tier. Although the track is usually formed in a spiral manner from an inner circumference to an outer circumference, the track is drawn in a laterally-expanded manner in the present figure. This track consists of a lead-in area, a volume area and a lead-out area. Also, in the lead-in area exists a special area called BCA (Burst Cutting Area) that can be read only by a drive. Since this area cannot be read by an application, this area is often used in copyright protection technology.","The volume area in the present figure has a layer model having a file system layer and an application layer. Application data such as image data starting with file system information is stored in the file system layer. The file system is UDF, ISO9660 or the like. In the file system, it is possible to read logic data recorded in the same manner as a normal PC, with use of a directory or a file structure. Also, a file name or a directory name consisting of 255 words can be read. A top tier of  shows an application layer format (application format) of the BD-ROM expressed using a directory structure. As shown in the first tier, in the BD-ROM, a CERTIFICATE directory and a BDMV directory exists below the Root directory.","Below the CERTIFICATE directory, a file of a root certificate (app.discroot.certificate) of a disc exists. This app.discroot.certificate is a digital certificate used for checking whether an application has been tampered with, and identifying the application (hereinafter referred to as signature verification) when executing a program of a JAVA\u2122 application that performs dynamic scenario control using a JAVA\u2122 virtual machine.","The BDMV directory is a directory in which data such as AV content and management information used in the BD-ROM  are recorded. Six directories called \u201cPLAYLIST directory\u201d, \u201cCLIPINF directory\u201d, \u201cSTREAM directory\u201d, \u201cBDJO directory\u201d, \u201cJAR directory\u201d and \u201cMETA directory\u201d exist below the BDMV directory. Also, two types of files (i.e. INDEX.BDMV and MovieObject.bdmv) are arrayed.","The STREAM directory is a directory storing a file which is a so-called transport stream body. A file (00001.m2ts) to which an extension \u201cm2ts\u201d is given exists in the STREAM directory.","A file (00001.mpls) to which an extension \u201cmpls\u201d is given exists in the PLAYLIST directory.","A file (00001.clpi) to which an extension \u201cclpi\u201d is given exists in the CLIPINF directory.","A file (XXXXX.bdjo) to which an extension \u201cbdjo\u201d is given exists in the BDJO directory.","A file (YYYYY.jar) to which an extension \u201cjar\u201d is given exists in the JAR directory.","An XML file (ZZZZZ.xml) exists in the META directory.","The following describes these files.","M2ts File","Firstly, a description is given of the file to which the extension \u201cm2ts;\u201d is given. The file to which the extension \u201cm2ts;\u201d is given is a digital AV stream in the MPEG-TS (Transport Stream) method, and is acquired by multiplexing a video stream, one or more audio streams, a graphics stream, a text subtitle stream and the like. The video stream represents moving part of the movie, and the audio stream represents audio part of the movie. A transport stream including only a 2D stream is referred to as a \u201c2D stream\u201d, and a transport stream including a 3D stream is referred to as a \u201c3D stream\u201d. In the case of the 3D stream, both of left-eye data and right-eye data may be included in m2ts, or m2ts may be prepared separately for each of the left-eye data and the right-eye data. It is preferable to use a codec (e.g. MPEG-4 AVC MVC) in which a left-view stream and a right-view stream refer to one another in order to save disc capacity used for streams. Video streams compressed and encoded with use of such a codec are called MVC video streams.","PlayList Information","The file to which the extension \u201cmpls\u201d is given is a file storing PlayList (PL) information. The PlayList information defines a PlayList referring to the AV clip.","A dimension identification flag exists on the BD-ROM  for identifying whether the stream targeted for playback is for 2D or 3D, and in the present embodiment, the dimension identification flag is embedded in the PlayList (PL) information.","In the present embodiment, it is possible to determine whether streams to be played back include a 3D video stream, based on a structural format of the PlayList (PL) stored on the BD-ROM .","The PlayList information includes MainPath information, Subpath information and PlayListMark information.","1) The MainPath information defines a logic playback section by defining at least one pair of a time point (In_Time) and a time point (Out_Time) on a playback time axis of the AV stream. The MainPath information has a stream number table (STN_table) that stipulates which elementary streams that have been multiplexed into AV stream are permitted to be played back and are not permitted to be played back.","2) The PlayListMark information shows specification of a time point corresponding to a chapter in a part of the AV stream specified by the pair of the In_Time information and the Out_Time information.","3) The Subpath information is composed of at least one piece of SubPlayItem information. The SubPlayItem information includes information on specification of an elementary stream to be played back in synchronization with the AV stream, and includes a pair of In_Time information and Out_Time information on the playback time axis of the elementary stream. The Java\u2122 application for controlling playback instructs a Java\u2122 virtual machine to generate a JMF (Java Media Frame work) player instance that plays back this PlayList information. This starts the playback of the AV stream. The JMF player instance is actual data generated on a heap memory of the virtual machine based on the JMF player class.","Furthermore, according to a term definition, a 2D PlayList is a PlayList including only a stream for the 2D playback while a 3D PlayList includes a stream for 3D viewing in addition to the 2D stream.","The file to which the extension \u201cclpi\u201d is given is Clip information which is in one to one correspondence with AVclip information. Since the Clip information is management information, the Clip information has an EP_map showing an encoding format of the stream in the AVClip, a frame rate, a bit rate, information on resolution and the like, and a starting point of GOPs. The Clip information and PL information are classified as \u201cstill scenario\u201d.","BD-J Objects","The following describes the file to which the extension \u201cBDJO\u201d is given. The file to which the extension \u201cBDJO\u201d is given is a file storing a BD-J object. The BD-J object is information that defines a title by associating an AVClip string defined by the PlayList information with an application. The BD-J object shows an \u201capplication management table\u201d and a \u201creference value for PlayList information\u201d. The \u201creference value for PlayList information\u201d indicates PlayList information to be played back at the same time that the title starts. The application management table lists information for specifying an application that specifies this title as a life cycle.","The application management table stores, as detailed application information for each application, a text string indicating the name of the application, and an icon locator pointing to a location of an icon corresponding to the application. With use of an address, the icon locator points to an icon included in the Java (registered trademark) archive file.","The entity of the Java (registered trademark) application corresponds to a Java (registered trademark) archive file (YYYYY.jar) stored in the JAR directory under the BDMV directory in .","The application is, for example, a Java (registered trademark) application, and is composed of one or more xlet programs loaded in the heap area (also called \u201cwork memory\u201d) of the virtual machine. Since application signaling is performed and the life cycles are managed according to the application management table in the BD-J object, this is referred to as a BD-J application. The aim of the BD-J application is to improve interactivity. The BD-J application defines an API that can issue a scaling instruction that has, as input information, a size of scaling (hereinafter referred to as \u201cscaling factor\u201d, in the playback apparatus platform, to cause the BD-J application to operate. Aside from this, a scaling instruction can also be issued by a resident application that the user has incorporated in a direct device. The timing of issuing the scaling instruction may be determined freely, and while the scaling instruction may be issued during playback of the video stream, the scaling instruction may also be issued at another time.","In the meta file (ZZZZZ.xml) included in the META directory is stored various information pieces relating to the movie in the disc. Examples of information pieces stored in the meta file are a name of the disc and an image of the disc, information on who has created the disc, and a title name for each title. This concludes the description of the BD-ROM . The meta file is not a prerequisite, and some BD-ROMs do not include this meta file.","This concludes the description of the BD-ROM. The following describes the BD-J object.  shows an exemplary internal structure of the BD-J object. As shown in , the BD-J object is composed of an \u201capplication management table\u201d, a \u201cGUI management table\u201d and a \u201cPlayList management table\u201d.","The following describes these elements.","The \u201capplication management table\u201d (AMT) is a table for causing the playback apparatus  to perform application signaling that runs the title as a life cycle. A lead line bj shows the internal structure of the application management table in closeup. As shown in this lead line, the application management table includes an \u201capplication identifier\u201d and a \u201ccontrol code\u201d that specify an application to be operated when a title corresponding to the BD-J object becomes a current title. When the control code is set to AutoRun, the control code shows that this application is automatically started after the application is loaded on the heap memory. When the control code is set to Present, the control code waits for a call from another application, and shows whether the application should be operated after the application is loaded on the heap memory.","The \u201cGUI management table\u201d (GMT) is a table used for GUI related operations by the application. More specifically, resolution, font data used, masking information when GUI for executing the menu call, or a title call is instructed by the user, is included. A lead line bj shows the internal structure of the GUI management table in closeup. As shown by this lead line bj, the GUI management table may be set to one of HD3D1920\u00d71080, HD3D1280\u00d7720, HD1920\u00d71080, HD1280\u00d7720, QHD960\u00d7540, SD, SD50HZ720576 and SD60HZ720480.","The \u201cPlayList Management Table (PLMT)\u201d includes information on specification of the PlayList to be operated automatically when a title corresponding to the BD-J object becomes a current title. A lead line bj shows the internal structure of an auto playback PlayList in closeup. As shown by the lead line bj, 3D PlayList 1920\u00d71080, 3D PlayList 1280\u00d7720, 2D PlayList 1920\u00d71080, 2D PlayList1 1280\u00d7720, 2D PlayList 720\u00d7576 and 2D PlayList 720\u00d7480 can be specified as information specifying the auto playback PlayList.","The following describes details of the structural elements of the playback apparatus.  shows an exemplary internal structure of the playback apparatus. As shown in , the playback apparatus includes a BD drive , a local storage , a network interface , read buffers and , the virtual file system , a demultiplexer , video decoders and , a video plane , image decoders and , image memories and , an image plane , and audio decoder , an interactive graphics plane , a background plane , a register set , a still scenario memory , a playback control engine , a scaling engine , a composition unit , an HDMI transmission and reception unit , a display function flag storage unit , a left and right processing storage unit , a plane shift engine , an offset setting unit , a BD-J platform , a rendering engine , a still scenario memory , a mode management module , an HDMV module , a UO detection module , a still image memory , a still image decoder , a display mode setting initial display setting unit , and a display mode storage unit .","In the present embodiment, the BD-ROM  stores data in the file structure shown in . A video stream for the left eye, a video stream for the right eye, a subtitle stream, and a graphics stream are read from a later-described virtual BD-ROM (virtual package) via the later-described virtual file system  shown in . For simplicity, in the example described here, the video stream for the left eye and the video stream for the right eye are recorded on the BD-ROM .)","Also, subtitle streams and graphics streams for both the left eye and the right eye may be recorded on the BD-ROM , or the BD-ROM  may be configured so that one graphics stream and one graphics stream are shared for both left and right. In this case, by giving an offset as described later, although the subtitles and graphics visible through the liquid crystal shutter glasses  are monoscopic images, it is possible to make them appear to pop out from the display screen, or to appear in a position farther back than the display screen.","Videos recorded on this BD-ROM  in which a left eye video stream and a right eye video stream are input to the playback apparatus  and played back are videos in which a viewpoint (for example, the angle of vision) is different due to the parallax between the two eyes, and data for playing back this type of video is recorded in advance as a video stream on the BD-ROM .","In the present embodiment, it is preferable for a left eye video stream and a right eye video stream, a subtitle stream, and a graphics stream to be embedded in a single stream file in advance. This is to suppress the calculation load required for memory and graphics by a device (for example, a CE device) that is low on device resources.","BD Drive ","The BD drive includes, for example, a semiconductor laser (not shown), collimator lenses (not shown), a beam splitter (not shown), an objective lens (not shown), a condenser lens (not shown), an optical head (not shown) including a light detector (not shown). Light beam outputted from the semiconductor laser is collected on a information side of the optical disc through the collimator lenses, the beam splitter and the objective lens. The collected light beam is reflected and diffracted on the optical disc, and then collected by the light detector through the objective lenses, the beam splitter and the condenser lenses. The generated signal corresponds to data read from the BD-ROM in accordance with the amount of light collected on the light detector.","Network Interface ","The network interface is for performing communication with an external device to the playback apparatus. The network interface is capable of accessing servers that are accessible via the Internet and servers that are accessible via a local network. For example, the network interface can be used for downloading BD-ROM additional contents made public on the Internet, and by performing data communication between a server on the Internet indicated by the contents, can enable playback of content using an Internet function. BD-ROM additional content is not recorded on the original BD-ROM  loaded in the BD drive , and is, for example, additional sub-audio, subtitles, special features, applications, etc. The BD-ROM additional content can control the network interface from a BD-J platform, and can download additional content made public on the Internet to the local storage ","Local Storage ","The local storage includes a built-in medium and a removable media, and is used for storing the downloaded additional contents and data used by the application. A storage area for the additional contents is provided for each BD-ROM, and an area that can be used for storing data is provided for each application. Also, merge management information, which is a merge rule regarding how the downloaded additional contents are merged with the data on the BD-ROM that is loaded in the BD drive , is also stored in the built-in medium and the removable media.","The built-in medium is a writable recording medium such as a hard disk drive and a memory built in the playback apparatus .","The removable medium is a portable recording medium, for example, and is preferably a portable semiconductor memory card such as an SD card.","A description is given taking a case where the removable media is a semiconductor memory card as an example. The playback apparatus  is provided with a slot (not shown) into which the removable media is inserted, and an interface (e.g. memory card I\/F) for reading the removable area inserted into the slot. When the semiconductor memory is inserted into the slot, the removable media and the playback apparatus  are electrically connected to each other, and it is possible to convert data recorded in the semiconductor memory into an electrical signal and read the electrical signal with use of the interface (e.g. memory card I\/F).","Read Buffer ","The read buffer temporarily stores source packets composing extents that compose the left view stream read from the BD drive . The read buffer  transfers the source packets to the demultiplexer  after adjusting the transfer speed.","Read Buffer ","The read buffer stores source packets composing extents that compose the right view stream read from the BD drive . The read buffer  transfers the source packets to the demultiplexer  after adjusting the transfer speed.","Virtual File System ","The virtual file system  configures a virtual BD-ROM (virtual package) in which, for example, the additional contents stored in the local storage are merged with the contents on the loaded BD-ROM based on the merge management information downloaded in the local storage together with the additional contents. The virtual file system  for configuring the virtual package has an application data correlation module for generating and updating application correlation information. The application data correlation information is information that correlates local storage information to an application, based on information on the BD-ROM disk and attribute information set by the application.","The virtual package and the original BD-ROM can be referred to from a command interpreter which is a main operational part in the HDMV mode, and the BD-J platform which is a main operational part in the BD-J mode. The playback apparatus performs the playback control with use of the data on the BD-ROM and the data in the local storage during the playback of the virtual package.","Demultiplexer ","The demultiplexer  is composed of, for example, a source packet depacketizer and a PID filter. Receiving an instruction from a packet identifier corresponding to a stream to be played back (the stream is included in the structured virtual package (data on the loaded BD-ROM and the local storage corresponding to the loaded BD-ROM), the demultiplexer  executes packet filtering based on the packet identifier. In executing the packet filtering, the demultiplexer  extracts one of the left-view video stream and the right-view video stream that corresponds to a display method flag based on the flag in the left-right processing storage unit , and the demultiplexer  transfers the video stream to the video decoder or the video decoder . The demultiplexer  sorts the left view video frame and the right view video frame based on header information of the stream.","When a stream separated from the stream to be played back is a subtitle stream, the demultiplexer  writes the separated subtitle stream in to the image memory. When the subtitle streams (a left-view subtitle stream, and a right-view subtitle stream) are included in the stream, the demultiplexer  writes the left-view subtitle stream in the image memory , and writes the right-view subtitle stream in the image memory ","When the 2D subtitle stream (subtitle stream used for the monoscopic display) is included in the stream, the demultiplexer  writes the 2D subtitle stream in the image memory ","Video Decoder ","The video decoder decodes a TS packet outputted from the demultiplexer , and writes a compressed picture in a left-eye plane  (expressed as a code (L) in the video plane  in ).","Video Decoder ","The video decoder decodes the right view video stream outputted from the demultiplexer , decodes the TS packet, and writes the uncompressed picture in the right view video plane  (expressed as a code (R) in the video plane  in ).","Video Plane ","The video plane  is, for example, a plane memory that can store picture data compatible with a resolution such as 1920\u00d72160 (1280\u00d71440). The video plane  has a left-eye plane (expressed as the code (L) in the video plane  in ) having an area capable of storing data with resolution such as 1920\u00d71080 (1280\u00d7720), and a right-eye plane (expressed as the code (R) in the video plane  in ) having an area capable of storing data with resolution such as 1920\u00d71080 (1280\u00d7720).","Image Decoders and ","Each of the image decoders and decodes TS packets composing the subtitle stream that is outputted from the demultiplexer  and written in the image memories and , and writes the uncompressed graphics subtitles in the graphics plane . The \u201csubtitle streams\u201d decoded from the image decoders and are data pieces each showing subtitles compressed by a run-length coding, and is defined by pixel codes showing a Y value, a Cr value, a Cb value and an \u03b1 value and a run lengths of the pixel codes.","Image Plane ","The image plane  is a graphics plane capable of storing graphics data (e.g. subtitle data) obtained by for example, decoding the subtitle stream with a resolution of 1920\u00d71080 (1280\u00d7720). The image plane  has a left-eye plane (expressed as a code (L) in the image plane  in ) having an area capable of storing data having a resolution of 1920\u00d71080 (1280\u00d7720), for example, and a right-eye plane (expressed as a code (R) in the image plane  in ) having an area capable of storing data having a resolution of 1920\u00d71080 (1280\u00d7720), for example.","Audio Decoder ","The audio decoder  decodes audio frames outputted from the demultiplexer , and outputs the uncompressed audio data.","Interactive Graphics Plane ","The interactive graphics plane  is a graphics plane having a storage area capable of storing graphics data written by the BD-J application using the rendering engine with resolutions such as 1920\u00d72160 (1280\u00d71440). The interactive graphics plane  has, for an example, a left-eye plane (expressed as a code (L) in the interactive graphics plane  in ) having an area capable of storing data having a resolution of 1920\u00d71080 (1280\u00d7720), and a right-eye plane (expressed as a code (R) in the interactive graphics plane  in ) having an area capable of storing data having a resolution of 1920\u00d71080 (1280\u00d7720).","The \u201cgraphics data\u201d held in the interactive graphics plane  is graphics whose pixels each is defined by an R value, a G value, a B value, and an \u03b1 value. The graphics written in the interactive graphics plane  is an image or a widget mainly used for composing the GUI. Although the image data and the graphics data are different in terms of structure, they are collectively expressed as graphics data. There are two types of the graphics plane (i.e. the image plane  and interactive graphics plane ). Hereafter, when the term \u201cgraphics plane\u201d is used, it referrers to both or one of the image plane  and the interactive graphics plane .","Background Plane ","The background plane  is a plane memory capable of storing the still image data to be a background image having a resolution such as 1920\u00d72160 (1280\u00d71440). Specifically, the background plane  has a left-eye plane (expressed as a code (L) in the background plane  in ) having an area capable of storing data having a resolution of 1920\u00d71080 (1280\u00d7720), and a right-eye plane (expressed as a code (R) in the background plane  in ) having an area capable of storing data having a resolution of 1920\u00d71080 (1280\u00d7720).","Register Set ","The register set  is a collection of registers including a playback state register storing therein information on playback states of PlayLists, a playback setting register storing configuration information showing a configuration in the playback apparatus , and a general register capable of storing arbitrary information used by the contents. Each of the playback states of the PlayLists shows which of the AV data pieces in each kind of AV data information pieces that are written in the PlayList are used, and at which position (time point) of the PlayList the playback is performed.","Still Scenario Memory ","The still scenario memory  is a memory for storing current PlayList information or a current clip information. The current PlayList information is a current processing target from among a plurality of pieces of PlayList information accessible from the BD-ROM, a built-in medium drive or a removable media drive. The current clip information is a current processing target from among a plurality of pieces of clip information accessible from the BD-ROM, a built-in medium drive or a removable media drive.","Playback Control Engine ","The playback control engine  executes an AV playback function and a playback function of the PlayList in response to a function call from the command interpreter which is the main operational part in the HDMV mode and the Java platform which is the main operational part in the BD-J function. The AV playback function is a set of functions used in DVD players and CD players, and includes playback start, playback stop, pause, release of pause, release of freeze frame function, fast forwarding at a playback speed specified by an immediate value, fast rewinding at a playback speed specified by an immediate value, audio conversion, sub image conversion, and angle conversion. The PlayList playback function is to perform playback start or playback stop from among the above-stated AV playback functions according to the current PlayList information composing current PlayLists, and current clip information.","When a disc (for example, the BD-ROM ) is inserted into the disk drive, a PlayList and an AV stream that are playback processing targets by the playback control engine  are Auto playbackPlayLists that are written in the current scenario on the BD-ROM. The playback of the AV stream starts due to a user operation (e.g. playback button) or is automatically started by an event triggered by the terminal (such as a resident application).","Scaling Engine ","The scaling engine  is capable of performing reduction, enlargement, and size control of images in the image plane  and the video plane . The scaling engine  considers scaling to occur when, at a time that image data or picture data has been decoded, a value is set in the plane shift engine , and before storing the decoded video data in the video plane , scaling is performed via the scaling engine .","A scaling factor is, for example, a factor of a number of horizontal pixels and\/or a number of vertical pixels. To give an example, compared to graphics data for which a basic resolution is 1920\u00d71080 pixels, when a scaling factor of \u201c1\/2\u201d is specified, the resolution of the graphics data is (1920\u00d70.5)\u00d7(1080\u00d70.5) pixels, that is, it is reduced to 960\u00d7540 pixels. The scaling factor is not always less than 1 as in the case of 1\/2, but can also be set to be a value greater than or equal to 1, and in such cases expansion processing is performed.","Composition Unit ","The composition unit  composites data held in the interactive graphics plane , data held in the image plane , data held in the video plane  and data held in the background plane .","Each of the interactive graphics plane , the image plane , the video plane  and the background plane  has a separate layer structure. Data held in each of the planes is composited (overlaid) in order of the background plane , the video plane , the image plane , then the interactive graphics plane . As data of the image plane, subtitles, and as data of the interactive graphics plane , a POP-UP menu (graphics), and assuming that contents displaying GUI graphics data are played back, the composition unit always overlays the data of the image plane  (subtitles) with the data of the video plane  (video), and overlays the data of the interactive graphics plane  with the image plane . In other words, even if stereoscopic contents are in the video plane , when a subtitle, a POP-UP menu, or a GUI with no depth is superimposed on the stereoscopic video, images (such as subtitles, POP-UP menus, and GUI) must be preferentially displayed first. The same is true when scaling is performed.","HDMI Transmission\/Reception Unit ","The HDMI transmission\/reception unit  includes an interface that complies with the HDMI standard (HDMI: High Definition Multimedia Interface). The HDMI transmission\/reception unit  performs transmission and reception such that the playback apparatus  and a device (in this example, a TV ) that performs the HDMI connection with the playback apparatus  comply with the HDMI standard. The picture data stored in the video and audio data decoded from the uncompressed audio data by the audio decoder  are transmitted to the TV  via the HDMI transmission\/reception unit . The TV  holds information such as, whether the TV  is capable of displaying data stereoscopically, information regarding resolutions at which the monoscopic display can be performed, and information regarding resolutions at which the stereoscopic display can be performed. When the playback apparatus  gives a request via the HDMI transmission\/reception unit , the TV  gives the playback apparatus  necessary information (e.g. information regarding whether the TV  is capable of displaying data stereoscopically, information regarding resolutions at which the monoscopic display can be performed, and information regarding resolutions at which the stereoscopic display can be performed) requested by the TV . Thus, the playback apparatus  is capable of obtaining, from the TV , the information regarding whether the TV  is capable of displaying data stereoscopically via the HDMI transmission\/reception unit .","Display Function Flag Storage Unit ","The display function flag storage unit  stores a 3D display function flag that indicates whether the playback apparatus is capable of 3D display.","Left-Right Processing Storage Unit ","The left-right processing storage unit  stores information showing whether the current output processing is for left-view video or right-view video. A flag in the left-right processing storage unit  shows whether or not data to be outputted to a display device (the television  in ) connected to the playback apparatus  shown in  is the left-view video or the right-view video. While the left-view video is outputted, the flag in the left-right processing storage unit  is set as the left-view output. Also, while the right-view video is outputted, the flag in the left-right processing storage unit  is set as the right-view output.","Plane Shift Engine ","The plane shift engine  combines areas storing a plane offset. After the left-right processing storage unit  judges whether the current processing target is a left eye video or a right eye video, the plane shift engine  calculates, with use of a stored plane offset, a shift distance of a horizontal axis of an image plane (an amount indicating how far to shift the image displayed on the display screen, in a horizontal direction of the display screen, from a reference position), and shifts the image by the shift distance. By adjusting the shift distance of the displayed subtitles (graphics), the graphics can be shown to appear farther forward or back than the position of the display screen. The shift distance is an amount for adjusting how far forward or backward than the display screen the graphics appear.","In other words, changing the amount of shifting the horizontal axis of the subtitle\/graphics changes the depth. An optical effect is obtained so that, for example, the more distant the left-view subtitles and the right-view subtitles become in a predetermined direction, the farther forward the graphics are displayed, and the more distant the left-view subtitles and the right-view subtitles become from one another in an opposite direction, the farther back the graphics are displayed.","Depending on the shift distance, there are cases in which displacement of the image plane becomes too great for the resolution and size of the display, and a phenomenon occurs whereby the eye cannot follow the image, and the image appears to be doubled. In this case, based on a value written in the plane offset, information indicating the resolution and size of the display are combined, and an adjustment is made so that the subtitles\/graphics are not displayed too far to the front. For example, when the playback apparatus  includes a set-up function by which a value of the plane offset can be set, the plane shift engine  stores a value set with use of the set-up function.","Offset Setting Unit ","The offset setting unit , upon receiving an offset update request, sets an offset to be updated in the offset value storage unit  of the plane shift engine , described later.","Specifically, the offset setting unit  performs the settings by operations such as (a) reading an offset value of an image plane setting and an offset value of the interactive graphics plane setting stored in the later-described display mode storage unit , and setting the offset values, (b) setting the offset value acquired from the demultiplexer  after the demultiplexer  acquires the offset value of the image plane and the offset value of the interactive graphics plane stored in a header area of a stream input to the demultiplexer , (c) reading the offset value of the image plane and the offset value of the interactive graphics plane sent from the UO detection module , and setting the offset values, (d) reading the offset value of the image plane and the offset value of the interactive graphics plane included in the current PlayList information and setting the offset values.","The offset setting unit  is a module for temporarily storing the value of a plane offset for which a user or an application has requested an update. In the plane offset, the depth is, for example, expressed as an integer from \u221263 to 63 (with 63 indicating the farthest front, and \u221263 indicating the farthest back), and this is ultimately converted to pixel coordinates indicating a shift distance.","BD-J Platform ","The BD-J platform  is a Java platform which is a main operational part in the BD-J mode. The BD-J platform  is fully provided with the Java2Micro_Edition (J2ME) Personal Basis Profile (PBP 1.0) and Globally Executable MHP specification (GEM1.0.2) for package media targets. The BD-J platform  reads byte codes from a class file in the JAR archive file, and stores the heap memory to start the BD-J application. Then, the BD-J platform  converts byte codes composing the BD-J application and byte codes composing a system application into native codes, and causes the MPU to execute the native codes. The BD-J platform , when scaling has been requested by the BD-J application, stores a scaling factor given as a parameter in the later-described scaling factor storage unit  of the scaling engine  shown in .","Rendering Engine ","The rendering engine includes base software (e.g. Java 2D, OPEN-GL), and writes graphics and a character string in the interactive graphics plane  in accordance with the instruction from the BD-J platform  in the BD-J mode. Also, in the HDMV mode, the rendering engine writes graphics data (e.g. graphics data corresponding to an input button) extracted from the graphics stream other than a stream corresponding to the subtitles (subtitle stream), and writes the extracted graphics data held in the interactive graphics plane .","Dynamic Scenario Memory ","The dynamic scenario memory  stores current dynamic scenario, and is used for processing by the HDMV module which is the main operational part in the HDMV mode, and the Java platform which is the main operational part in the BD-J mode. The current dynamic scenario is a current execution target which is one of Index.bdmv, the BD-J object and the movie object recorded in the BD-ROM, the built-in media, or the removable media.","The mode management module  stores Index.bdmv read from the BD-ROM  or the local storage (the built-in medium or the removable medium in the example shown in ), and performs mode management and branching control. The mode management by the mode management module  is to perform allocation of the dynamic scenario to the module (i.e. to cause one of the BD-J platform  and the HDMV module  to execute the dynamic scenario).","HDMV Module ","The HDMV module  is a DVD virtual player to be a main operational part in the HDMV mode, and is a main execution part. This module includes a command interpreter, and executes control of the HDMV mode by reading and executing the navigation commands composing the movie object. The navigation commands are written by a syntax similar to a syntax for the DVD-Video. Therefore, the playback control like the DVD-Video can be realized by executing these navigation commands.","UO Detection Module ","The UO detection module  receives the user operation on the GUI. The user operation received by the GUI includes title selection determining which of the titles recorded in the BD-ROM is selected, subtitle selection and audio selection. In particular, one of the user operations unique to the stereoscopic playback is to receive the depth of stereoscopic video. For example, there are three levels of the depth such as distant, usual and close, or levels of the depth may be expressed by the numerical values such as how many centimeters or how many millimeters.","Also, when an instruction is received, via the remote control or a button on the device, to change the scaling of the image plane, the UO detection module  issues a direct scaling instruction to the module in the device.","Still Image Memory ","The still image memory stores still image data, forming a background image, taken from the BD-ROM or configured virtual package.","Still Image Decoder ","The still image decoder decodes still image data read from the still image memory , and writes the uncompressed background image data held in the background plane .","Display Mode Setting Initial Display Setting Unit ","The display mode setting initial display setting unit  sets the display mode and the resolutions based on the BD-J object in the current title provided with the BD-J platform unit.","Display Mode Storage Unit ","The display mode storage unit  stores information on whether a display mode is 2D or 3D, and whether a stereo mode is ON or OFF. When the 3D display function flag of the playback apparatus  shows that the playback apparatus  is capable of displaying 3D video, the display mode which is a terminal setting stored in the display mode storage unit  may be switched to one of a 2D mode and a 3D mode. Hereinafter, a state of the display mode shown as \u201c3D\u201d is referred to as a \u201c3D display mode\u201d, and a state of the display mode shown as \u201c2D\u201d is referred to as a \u201c2D display mode\u201d.","The following describes the particulars of this display mode. When the playback apparatus  is in the 3D playback mode, the stereo modes of the planes are either ON or OFF. The difference between ON and OFF of the stereo modes affects compositing methods for the planes.","Using a video stream as an example, \u201cStereo mode ON\u201d is a 3D display mode in which composition is performed such that the playback apparatus  displays two images for which the view (for example the angle of view) is different (for example, a left view video and a right view video having different angles of view).","\u201cStereo mode OFF\u201d is a 3D display mode in which composition is performed such that the playback apparatus  provides one image (for example, one of a left view image and a right eye image, and in the present example, a left view image is used) and provides the image to the left eye\/right eye. That is, when viewed by both of the eyes, the picture does not look stereoscopic (is a monoscopic image).","However, when the data held in the graphics plane  is shifted in the horizontal direction by the plane offset, the plane graphics data (subtitle data) that is held in the graphics plane  is to be displayed can be displayed in a position closer to the viewer than a position of the display screen, or in a position more distant from the viewer than a position of the display screen. The same effect can be obtained when offsets of video data held in the video plane , interactive graphics data held in the interactive graphics plane , and background image data held in the background plane  are adjusted when the \u201cstereo mode is in the OFF state\u201d.","As described in the above, there are two modes, \u201cStereo mode ON\u201d and \u201cStereo mode OFF\u201d in the \u201c3D display mode\u201d. When the playback apparatus  is in the \u201cStereo mode ON\u201d state in the 3D display mode, the left-view data and the right-view data (e.g. an image viewed by the left eye and the image viewed by the right eye can be seen from different angles) are held in the left-eye plane and the right-view plane, respectively, and displayed in accordance with the SYNC signal. This makes it possible to display the stereoscopic image.","Also, when the playback apparatus  is in the \u201cStereo mode OFF\u201d state in the 3D display mode, one of the left-view data and the right-view data (the left-view data held in the present embodiment) is held in each of the left-eye plane and the right-view plane, and the plane offsets of the stored data pieces are adjusted. This makes it possible to display the monoscopic image in a position closer to or more distant from the viewer than the position of the display screen.","In the present embodiment, the \u201cStereo mode ON\u201d and the \u201cstereo mode OFF\u201d can be set for each plane (i.e. the video plane , the graphics plane , the interactive graphics plane  and the background plane ).","The \u201c2D display mode\u201d is a normal display that displays the image in a position corresponding to the position of the display screen. In such case, a decoder and a plane used in a default setting is predetermined, and the composited image is displayed with use of the decoder and the plane.","For example, when the playback apparatus  is in the \u201c2D display mode\u201d, the composition unit  composites: the 2D video data written by the video decoder in the left-eye video plane (expressed as the code (L) in the video plane  in ); the 2D graphics data (subtitle data) written by the image decoder in the left-eye plane (expressed as the code (L) in the image plane  in ); the 2D interactive graphics written by the BD-J application in the left-eye plane (expressed as the code (L) in the interactive graphics plane  in ) using the rendering engine ; and the still image data written by the still image decoder in the left-eye plane (expressed as the code (L) in the background plane  in ).","At this time, the composition unit  performs the composition in the order of the 2D still image data, the 2D video data, the 2D graphics data (subtitle data) and the 2D interactive graphics data in order from the data from the bottom. The composition may be performed without compositing the 2D still image data when the video data is displayed on the whole screen. The flag in the display mode storage unit  showing whether the playback apparatus  is in the 2D display mode or the 3D display mode may also be stored in the register set , or may be stored in both the display mode storage unit  and the register set .","The following describes how the writing to the plane memories changes depending on the setting of the display mode.","Writing to the Video Plane ","First, the following describes the video plane . When the display mode of the video data is 3D display mode, and the stereo mode is ON, the video decoder decodes the left view video stream and writes the decoded left view video stream to the left eye plane (indicated by the notation (L) in the video plane  shown in ), and the video decoder decodes the right view video stream and writes the decoded right view video stream to the right eye plane (indicated by the notation (R) in the video plane  shown in ).","Also, when the display mode of the video data is 3D mode and the stereo mode is OFF, the video decoder , for example, decodes, for example, the left view video stream, and writes that decoded video stream to the left eye plane (indicated by the notation (L) in the video plane  shown in ) and in the right eye video plane (indicated by the notation (R) in the video plane  shown in ).","Also, the apparatus is configured so that when the display mode of the video data is 2D, for example, the demultiplexer  sends the 2D video stream to the video decoder , and the video decoder writes the decoded 2D video data to the left eye video plane (indicated by the notation (L) in the video plane  shown in ).","This completes the description of the video plane .","The following describes the details of the image plane .","Writing to the Image Plane ","For example when the display mode of the subtitle data is 3D display mode and stereo mode is ON, the image plane decodes the left view subtitle stream stored in the image memory , and writes the decoded left view subtitle stream in the left eye plane (indicated by the notation (L) in the image plane  shown in ), and the image decoder decodes the right view subtitle stream stored in the image memory and writes the decoded right view subtitle stream in the right eye plane (indicated by the notation (R) in the image plane  shown in )","Also, when the display mode of the subtitle data is 3D display mode, and the stereo mode is OFF, the image decoder decodes the left view subtitle stream stored in the image memory and stores the decoded left view subtitle stream in the left eye plane (indicated by the notation (L) in the image plane  shown in ) and the right eye plane (indicated by the notation (R) in the image plane  shown in ).","In the above example, when the display mode of the subtitle data is 3D display mode and stereo mode is OFF, the left view subtitle stream is decoded and written in the left plane and the right plane. However, when the subtitle stream stored on the recording medium is configured so that a same subtitle stream is shared between left and right, this shared subtitle stream may be read, and written to the left eye image plane and the right eye image plane.","Also, the apparatus is configured so that, when the display mode of the subtitle data is 2D display mode, the demultiplexer  stores the 2D subtitle stream in the image memory , and the image decoder decodes the 2D subtitle stream stored in the image memory , and writes the decoded 2D subtitle stream in the left eye plane (indicated by the notation (L) in the image plane  shown in )","This completes the description of the image plane . The following describes the stored content of the interactive graphics plane .","Writing to the Interactive Graphics Plane ","When the display mode of the interactive graphics plane is in 3D display mode, and the stereo mode is ON, it is indicated that the BD-J application includes a program that writes an interactive graphics that is viewable by the left eye (left-eye interactive graphics) and an interactive graphics that is viewable by the right eye and is different from the left-eye interactive graphics (right-eye interactive graphics).","The left-eye interactive graphics and the right-eye interactive graphics written by this rendering program can be seen from different angles so as to allow the viewer to see stereoscopic graphics.","When the left-eye interactive graphics and the right-eye interactive graphics are displayed, the BD-J application writes the left-view interactive graphics in the left-eye plane (to which a code (L) is given in the interactive graphics plane  in ) with use of the rendering engine , and writes the right-view interactive graphics in the right-eye plane (to which a code (R) is given in the interactive graphics plane  in ).","When the display mode of the interactive graphics plane is in 3D display mode, and the stereo mode is OFF, the BD-J application writes the left-view interactive graphics in the each of the planes to which the code (L) and the code (R) are respectively given, with use of the rendering engine ","When the display mode of the interactive graphics plane is in 2D display mode, the BD-J application writes the 2D interactive graphics in the interactive graphics plane  (more specifically, the plane to which the code (L) is given in the interactive graphics plane ) with use of the rendering engine ","This concludes the description of the interactive graphics plane . The following describes the stored content of the background plane  depending on display mode.","Writing to the Background Plane ","When the display mode of the background plane  is in 3D display mode, and the stereo mode is ON, the still image decoder decodes left-view still image data and right-view still image data that are stored in the still image memory . Then the image decoder writes the left-view still image data and the right-view still image data held in the left-eye plane (to which a code (L) is given in the background plane  shown in ) and the right-view plane (to which a code (R) is given in the background plane  shown in ), respectively.","When the display mode of the background plane  is in 3D display mode, and the stereo mode is OFF, the background plane  decodes the left-view still image data from among the 3D background images stored in the still image memory (the left-view still image data and the right-view still image data), and writes the decoded left-view image data held in the left-eye plane (to which a code (L) is given in the background plane  shown in ) and in the right-eye plane (to which a code (R) is given in the background plane  shown in ).","Writing to the Background Plane ","When the display mode of the background image is a 2D display mode, the still image decoder decodes the 2D still image data stored in the still image decoder , and writes the decoded 2D still image data held in the left-eye plane (to which a code (L) is given in the background plane  shown in ).","When the display mode of the background image is a 2D display mode, the still image decoder decodes the 2D still image data stored in the still image decoder , and writes the decoded 2D still image data held in the left-eye plane (to which a code (L) is given in the background plane  shown in ).","This concludes the description of the stored content of the background plane  depending on the display mode.","The following describes the details of switching between 2D display mode and 3D display mode in the present embodiment.",{"@attributes":{"id":"p-0264","num":"0263"},"figref":["FIG. 5","FIG. 5","FIG. 5","FIG. 5"],"b":["6","8","10","11"]},"Therefore, the same data is used for the left view and the right view in the 2D display mode. As a result, the same data is outputted.","On the right side of , an output model in the 3D display mode is shown. When the playback apparatus  is in the 3D display mode, the video plane , the image plane  (\u201cSubtitle\u201d in ) and the interactive graphics plane  are prepared for each of the left view and the right view. The picture data and the graphics data to be played back are held in each of the video plane , the image plane  (\u201cSubtitle\u201d in ), the interactive graphics plane  and the background plane  for the left eye and the right eye.","Therefore, the left-view output and the right-view output are performed separately in the 3D display mode. A different image can be provided for the left eye and the right eye. As a result, it is possible to obtain a 3D effect that the stereoscopic object in the screen appears to pop out closer to the viewer due to the binocular disparity.",{"@attributes":{"id":"p-0268","num":"0267"},"figref":"FIG. 6"},"Although  shows an example of a case where the stereo modes of the planes are the same, ON\/OFF of the stereo mode may be changed for each of the planes.","On the left side of , the plane structure when the stereo modes of all the planes are ON is shown. On the right side of , the plane structure when the stereo modes of all the planes are ON.","The first row shows the background plane  and the outputted data before the composition.","The second row shows the video stream, the video plane , and the outputted data before the composition.","The third row shows the image plane  and the outputted data before the composition.","The fourth row shows the interactive graphics plane  and the outputted data before the composition.","When the stereo mode is ON, a left-eye background plane which is expressed as an area to which (L) is given is used for writing the left-view background data, and a right-eye background plane which is expressed as an area to which (R) is given is used for writing the right-view background data. Each of the background data pieces is composited with the corresponding left-eye or right-view picture. When the stereo mode of the background plane  is OFF, the left-view background data is written, by the application, in each of the areas to which (L) and (R) are given respectively in the background plane . Therefore, the right-view background data does not affect the display.","When the stereo mode is ON, picture data of the left-eye video in the video stream is held in the left-view video plane. Also, picture data of right-eye video in the video stream is held in the right-view video plane. When the video plane  is in the OFF state of the stereo mode, the picture data of the left-eye video is held in both the left-view video plane and the right-view video plane.","When the stereo mode is ON, in the image plane , left-view image data is written in a left-eye image plane expressed as the area to which (L) is given, and right-view image data is written in a right-eye image plane expressed as the area to which (R) is given. Each of the image data pieces is composited with the corresponding left-eye or right-view picture.","When the image plane  is in the OFF state of the stereo mode, the subtitle graphics corresponding to the right-view image data does not affect the display. Also, when the stereo mode is OFF, the content in the image plane  is a content shifted in the right or left direction (\u201cShifted Left\u201d in ).","When the stereo mode is ON, in the interactive graphics plane , left-view interactive graphics is written in a left-view interactive graphics plane expressed as an area to which (L) is given, and right-view interactive graphics is written in a right-view interactive graphics plane expressed as an area to which (R) is given. Each of the interactive graphics data pieces is composited with the corresponding left-eye or right-view picture.","When the interactive graphics plane  is in the OFF state of the stereo mode, the right-view interactive graphics by the application does not affect the display. Also, when the stereo mode is OFF, the content in the interactive graphics plane  is a content that is shifted in the right or left direction (\u201cShifted Left\u201d in ).",{"@attributes":{"id":"p-0281","num":"0280"},"figref":"FIG. 7","b":["11","6","8","10","4","3","2","8","1","10"]},"Also, it can be seen that right-view background data u, right-view video u read from the video stream, right-view graphics u in the image plane  and right-view graphics u in the interactive graphics plane  are composited as the right view in this order.",{"@attributes":{"id":"p-0283","num":"0282"},"figref":["FIG. 8","FIG. 8","FIG. 8"],"b":["11","6","8","10","4","2","3","8","1","10"]},"The following describes switching between the stereo modes in the present embodiment.",{"@attributes":{"id":"p-0285","num":"0284"},"figref":"FIG. 9"},"Each of 6L and 6R are examples of composition results for the video plane . It can be seen from a difference in direction in which a woman faces that images in a left-view stream and images a right-view stream are taken from different angles. Note that a difference in directions in which a man and the woman face and a difference in positions of the man and woman in  are schematic, and show neither accurate directions in which the man and woman face nor accurate positions of the man and woman for realizing the stereoscopic display. When viewing the display screen of the television  with the naked eye without wearing the liquid crystal shutter glasses , the image photographed from this different angle appears as if superimposed on the image.","Subtitles \u201cI love you\u201d in the image plane  is an image obtained by decoding the subtitle data by the image decoder.","A GUI part that receives an operation of skipping to the previous or next in the interactive graphics plane  is written in the interactive graphics plane  by the BD-J application.","6LL is outputted left-view image after the composition, and 6RR is outputted right-view image after the composition. It can be seen that the subtitles \u201cI love you\u201d is shifted in the right direction and composited in the left-view image of 6LL. Also, the subtitle \u201cI love you\u201d is shifted in the left direction in the right-view image of 6RR.",{"@attributes":{"id":"p-0290","num":"0289"},"figref":"FIG. 10"},"A right-view image and a left-view image are filtered through the liquid crystal shutter glasses , for example, and appear differently to the left and right eyes. Observe that the subtitles \u201cI love you\u201d and the GUI part that receives the operation of skipping to the previous or next are different in each of the right and left images in addition to the fact that the images of the video stream are made stereoscopic by compositing the left-eye and the right-eye images. Thus, it can be seen that the depths of the video, the subtitles and the GUI are maintained naturally by turning the stereo mode ON when both the right-eye and left-eye contents are prepared in advance.",{"@attributes":{"id":"p-0292","num":"0291"},"figref":["FIG. 11","FIG. 11"],"b":["500","6","6","8","10","6"]},"Control for Realizing the Stereoscopic Effect","The following describes a direction in which the data held in the graphics plane is shifted for realizing the stereoscopic effects.","Directions to which the plane shift engine  shifts the data held in the graphics plane depends on whether the data held in the graphics plane should stereoscopically appear in a position farther back from the viewer than a position of the display screen or should stereoscopically appear in a position farther front than the display screen.","In the present embodiment, it is presumed that the left-view images are shifted in the right direction (i.e. the data stereoscopically appears to pop out from the screen).","A difference between coordinates of each original pixel data piece and coordinates of each pixel data piece shifted in the right or left direction is called a \u201cshift distance\u201d. The shift distance is to be calculated according to a depth value indicating how far to the front or to the back a position of the subtitles written in the image plane  or the graphics image written in the interactive graphics plane  is than the display screen. The shift distance also can be calculated with use of one of parameters that can be adopted as the binocular disparity between both of the eyes at a time of executing the stereoscopic playback.","Also, the parameter for shifting the pixel data pieces in the graphics plane in the right and left directions by the above-stated shift distance is called \u201cplane offset\u201d. While the shift distance is a scaling amount, the plane offset is a vector having a positive or negative polarity and size. The plane offset indicates the direction, (for example, left direction or right direction) in the horizontal direction of the display screen, and the amount of shifting in pixels from the normal position (that is, the state appearing displayed on the display screen). In the following description, the shifting is executed according to the plane offset. The plane offsets can be represented as the actual shift distance in pixels (with positive and negative value) or it can be represented as a value that can be used to calculate the actual shift distance in pixels.","The following describes the meanings of the positive and negative signs of the plane offset.","The plane offset of the graphics plane shows by how many pixels the coordinates of each of the pixel data pieces held in the right-view graphics plane and the coordinates of each of the pixel data pieces held in the left-view graphics plane are shifted.","When the viewer wants to obtain an effect that the video in the graphics plane pops out from the screen, the plane shift engine  shifts the data held in the left-view graphics plane in the right direction by the shift distance shown by the plane offset before the composition of data pieces in the planes. Then the plane shift engine  shifts the data held in the right-view graphics plane in the left direction by the shift distance shown by the plane offset. In the present embodiment, an effect that the images pops out from the screen can be obtained when the sign of the plane offset is a \u201cpositive sign\u201d.","When the viewer wants to obtain an effect that the images are displayed in a position distant from the viewer than the position of the screen, the plane shift engine  shifts the data held in the left-view graphics plane in the left direction by the shift distance shown by the plane offset before the composition of data pieces in the planes. Then the plane shift engine  shifts the data held in the right-view graphics plane in the right direction by the shift distance shown by the plane offset. In the present embodiment, an effect that the images are displayed in the position distant from the viewer than the position of the screen can be obtained when the sign of the plane offset is a \u201cnegative sign\u201d.","When the plane offset is \u201c0\u201d, the plane shift engine  does not perform the shifting, which means that the image is displayed in the normal state (so as to appear displayed on the display screen).",{"@attributes":{"id":"p-0304","num":"0303"},"figref":["FIG. 12A","FIG. 12B"],"b":"11"},"As shown in , in the image plane , shifting the graphics plane in the right direction results in adding a transparent area to the left side of the shifted graphics plane and cropping the end portion on the right side. Similarly, in the interactive graphics plane , shifting the graphics plane in the right direction results in adding a transparent area to the left side of the shifted graphics plane, and cropping the end portion on the right side.","As shown in , in the image plane , shifting the graphics plane in the left direction results in adding a transparent area to the right end of the shifted graphics plane and cropping the end portion on the left side. Similarly, in the interactive graphics plane , shifting the graphics plane in the left direction results in adding a transparent area to the right end of the shifted graphics plane and cropping the end portion on the left side.","The plane shift executed when the stereo mode is OFF causes the optical effect of causing the graphics in the image plane and the interactive graphics plane to appear in a position farther to the front than the display screen or farther back than the display screen. The following describes the principle that this plane shift is based on.","Principle of Realizing Stereoscopic View with Plane Shift",{"@attributes":{"id":"p-0309","num":"0308"},"figref":"FIG. 13A","b":"20"},"In each of ,  and , the image displayed on the display screen is indicated by a circle.","Firstly, since the image seen by the right eye and the image seen by the left eye are in the same position when there is no plane offset, the focus position at which both of the eyes see the image is on the display position (). As a result, the displayed image is positioned on the display screen.","Meanwhile, when the playback apparatus  is in the 3D display mode, and the stereo mode is OFF, the image seen by the left eye should appear in a position shifted more to the right compared to the case where the plane offset is \u201c0\u201d. At this time, the right eye should be covered by the crystal liquid shutter glasses  so that the right eye cannot see anything. The image seen by the right eye, on the other hand, should be in a position shifted more to the left compared to the case where the plane offset is \u201c0\u201d. At this time, the left eye should be covered by the crystal liquid shutter glasses  so that the left eye cannot see anything ().","We focus on the image with use of both of the eyes to recognize the image in the focus position. Accordingly, when switching between a state in which the left eye sees the image and a state in which the right eye sees the image is performed by the crystal liquid shutter glasses  at a short time interval, both of our eyes try to focus on the image in a position closer to us than the position of the display screen. As a result, we have an illusion as if the image is in the focus position closer to us than the position of the display screen ().",{"@attributes":{"id":"p-0314","num":"0313"},"figref":["FIG. 14A","FIG. 14B","FIG. 14C"],"b":"20"},"In each of ,  and , the image displayed on the display screen is indicated by a circle. Firstly, since the image seen by the right eye and the image seen by the left eye are in the same position when there is no plane offset, the focus position at which both of the eyes see the image is the position of display screen (). The resulting displayed image is positioned on the display screen.","Meanwhile, when the playback apparatus  is in the 3D display mode, and the stereo mode is OFF, the image seen by the left eye should appear in a position more to the left compared to the case where the offset is \u201c0\u201d. At this time, the right eye should be covered by the crystal liquid shutter glasses  so that the right eye cannot see anything. The image seen by the right eye, on the other hand, should be in a position more to the right compared to the case where the offset is \u201c0\u201d. At this time, the left eye should be covered by the crystal liquid shutter glasses  so that the left eye cannot see anything ().","When switching between a state in which the left eye sees the image and a state in which the right eye sees the image is performed by the crystal liquid shutter glasses  at a short time interval, both of our eyes try to focus on the image in a position more distant from us than the position of the display screen. As a result, we have an illusion as if the image is in the focus position more distant from us than the position of the display screen ().","This concludes the description of the graphics image written in the graphics plane. However, it is needless to say that the same concept of the above-stated offset may be applied to the interactive graphics plane , the video plane  and the background plane .","Creating Pop-Out Level\/Depth",{"@attributes":{"id":"p-0320","num":"0319"},"figref":"FIGS. 15A and 15B"},"An image depicting the graphics data that is closer to the viewer in each of  and  is a graphics image for the right view (right-view graphics image) after shifting. An image depicting the graphics data that is distant from the viewer in each of  and  is a graphics image for the left view (left-view graphics image) after shifting.",{"@attributes":{"id":"p-0322","num":"0321"},"figref":["FIG. 15A","FIG. 13"],"b":"20"},{"@attributes":{"id":"p-0323","num":"0322"},"figref":["FIG. 15B","FIG. 14"]},"This concludes the description of the method for displaying the subtitles in a position closer to the viewer than the position of the display screen or in a position more distant from the viewer than the position of the display screen by switching between the positive offset and the negative offset.","The above description illustrates that depending on the plane offset in the plane shift, a monoscopic image appears to be displayed farther in front than the display screen or farther to the back than the display screen. However, the size of the subtitle graphics targeted by the plane shift is not fixed, and generally, the size of the graphics are changed to accommodate processing such as enlarging or reducing the video, in order to improve interactivity.","In normal playback, the video is full scale, and the subtitle graphics are displayed at a size corresponding to the full scale video. In contrast, when switching to the menu screen, the video is reduced, the subtitle graphics are displayed at a size corresponding to the reduced video, and it is necessary to display a GUI necessary for the menu screen.","The following describes how to determine the plane offset in the plane shift when scaling is performed to realize interactivity of the video in this way.  shows a stereoscopic image viewed by a user when scaling is performed on the video.","When the display mode is 3D and the stereo mode of the video plane is ON, in the video image, if scaling is performed at a scaling factor \u201c1\/2\u201d, the horizontal and vertical width are both halved, and ultimately the stereoscopically displayed video image has 1\/4 the area of the original image.","At this time, when the display mode is 3D and the stereo mode of the video plane is ON, since the images played back in the left view video stream and the right view video stream are images that differ by viewed angle, when scaling is performed according to the scaling factor, the level to which the image pops out in stereoscopic display also dynamically changes according to the scaling factor.","However, when the display mode is 3D, the stereo mode of the image plane is OFF, and scaling is performed of the image plane subtitles according to the scaling factor, if the plane offset is set to a value other than \u201c0\u201d in the image plane, since this plane offset does not dynamically change due to scaling, in the composited image, the viewer feels discomfort due to the strong sense that the subtitles are popping out.","The same is true when the display mode is 3D and the stereo mode of the interactive graphics plane is OFF.","This is described with use of a simple example.",{"@attributes":{"id":"p-0333","num":"0332"},"figref":["FIG. 18A","FIG. 18B","FIG. 18C"]},"In ,  and , the object shown as a circle is an example of a virtual stereoscopic image visible to the human eye played back in the left view video stream and the right view video stream, viewed from the X-Z plane, and in the present example, the stereoscopic image appears farther front than the display screen.","Also, it is assumed that the offset of the image plane has been adjusted so that the position where the subtitles virtually appear is farther front than the virtual stereoscopic image.",{"@attributes":{"id":"p-0336","num":"0335"},"figref":["FIG. 18A","FIG. 18B"]},{"@attributes":{"id":"p-0337","num":"0336"},"figref":["FIG. 19","FIG. 18"]},"The playback apparatus in the present embodiment provides a structure to solve this technical problem.","Specifically, the playback apparatus of the present embodiment dynamically adjusts the offset of the image plane according to the scale of the video. Specifically, when a reduced video is displayed as shown in , adjusting (in this example, making smaller) the offset of the image plane brings the position where the subtitles virtually appear closer to the display screen.",{"@attributes":{"id":"p-0340","num":"0339"},"figref":"FIG. 19"},"In contrast, consider a case in which a plane offset E obtained by multiplying the scaling factor by the plane offset D used for compositing with the video before scaling is applied to the plane shift of the image plane. Since the scaling factor is multiplied by the plane offset D that has the meaning of the popping out level of the pixels in the image plane, the degree of popping out becomes less. Then the subtitle is brought up close to a vicinity of a scaled image of a person. In this way, the subtitle is close to the scaled image of the person, thus eliminating the sense of unbalance between the level of popping out of the image of the person and the subtitle.",{"@attributes":{"id":"p-0342","num":"0341"},"figref":"FIG. 20"},"In , unlike , the subtitle is close to the scaled image of the person, thus eliminating the sense of unbalance between the level of popping out of the image of the person and the subtitle.","In this way, to eliminate the sense of unbalance, it is necessary to provide a mechanism for calculating an optimal plane offset, in consideration of the scaling factor, in the plane shift engine . The plane shift engine  in  incorporates such a mechanism for calculating the optimal plane offset. The following describes the plane shift engine  with reference to .",{"@attributes":{"id":"p-0345","num":"0344"},"figref":["FIG. 21","FIG. 21"],"b":["20","200","20","41","42","43","44"]},"Offset Value Storage Unit ","The offset value storage unit  stores content from the offset setting unit , or an offset value specified from the user.","Scaling Factor Storage Unit ","The scaling factor storage unit  stores magnification information from before the scaling. For example, the scaling factor storage unit  stores information indicating \u201c1\u201d when the video is not scaled, indicating \u201c1\/2\u201d when scaled to half size, and \u201c2\u201d when enlarged to twice the size.","Plane Offset Calculation Unit ","The plane offset calculation unit  performs calculation to convert, in pixel units, a shift distance for the shift unit  to perform shifting in view of the screen size and the scaling based on the offset value stored in the offset value storage unit . To give a specific working example, when the scaling factor is specified to be \u201c1\/2\u201d, a new \u201cplane offset E\u201d is obtained by multiplying the scaling magnification stored in the scaling factor storage unit  by the offset value stored in the offset value storage unit .","Treatment of the Calculation Results","Next, the following describes the treatment of the calculation results following the decimal point. The calculation by the plane offset calculation unit  is performed along with the multiplication with the scaling factor, and in this case, the treatment of numerical values following the decimal point is a problem. The reason for this is that the shift distance must be an integer, since the shift distance indicates shifting by a number of pixel lengths. When the plane offset operation unit  performs the calculation, when a numerical value following the decimal point appears in the calculation unit, these numerical values following the decimal point are brought up to the next integer. For example, this means that if the result of the calculation by the plane offset calculation unit  is \u201c3.2\u201d, the operation result is made to be \u201c4\u201d.","Rounding the portion after the decimal point in the operation results up to the next integer in this way is called a \u201cCeil operation\u201d. In the present embodiment, when executing this operation when multiplying with the scaling factor, the Ceil operation is performed on the calculation result, and the portion after the decimal point in the calculation result is brought up to the next integer.","Influence of Demand for Resolution Maintenance","Next, the following describes the influence of demand for resolution maintenance from the application. Even during scaling when a KEEP_RESOLUTION setting is set, the plane offset calculation unit  executes a calculation of shift distance according to scaling factor. The KEEP_RESOLUTION setting is a function for performing enlargement\/reduction only on the video plane without enlarging\/reducing the interactive graphics plane at the time of the scaling instruction. Doing this enables changing the depth of the subtitles synchronously with the depth of the video at the time of KEEP_RESOLUTION.","Shift Unit ","The shift unit  performs shifting toward a width axis if the image plane based on a value calculated by the plane offset calculation unit .",{"@attributes":{"id":"p-0359","num":"0358"},"figref":"FIG. 22"},"The front shows a pair of a left image and a right image when the scaling factor is 1\/1, the middle shows a pair of a left image and a right image when the scaling factor is 1\/2, and the back shows a pair of a left image and a right image when the scaling factor is 1\/4.","These drawings show examples of displaying a composite image in a position on the left top of the display screen, for example when the scaling factor is 1\/2 or 1\/4.","When the scaling factor is 1\/2, the number of vertical pixels and number of horizontal pixels become 1\/2, and the image is displayed in reduced size on the left side of the screen. When the scaling factor is 1\/4, the number of vertical pixels and number of horizontal pixels become 1\/4, and the image is displayed in reduced size on the left side of the screen.","In , B, and C, a video in which subtitles and GUI are composited is targeted for scaling. However, in GUI processing performed along with scaling, the GUI is provided for full screen display, and in the full screen display of the GUI, the composite image is placed in the top left area. The GUI is meant to be removed as a target of scaling when drawn mainly in a portion other than the portion displayed in the composite image of the subtitles\/video displayed on the top left area, and in this case only the composite image of the subtitles and the video is the target of scaling.","Also, GUI has been described as an example of interactive graphics data drawn by the BD-J application. However, the interactive graphics data drawn by the BD-J application also includes graphics images such as video and animation, as well as GUI.","In such cases, if the interactive graphics data drawn by the BD-J application is a target for scaling similarly to the subtitles and video, the interactive graphics data may be configured to be reduced along with the reduction of the subtitles\/video. In this case, background data stored in the background plane  is displayed in the black portion shown in .","In the right eye and left eye images in , B, and C, it is apparent that after scaling, the shift distance of the subtitles is adjusted according to the size of the video plane, in contrast to the composite structure before scaling. This enables preventing a sharp difference in stereoscopic sense, reducing fatigue to the eye, and performing more natural display.",{"@attributes":{"id":"p-0367","num":"0366"},"figref":"FIG. 24"},"When the scaling factor is 1\/1, GUI does not exist, but if the scaling factor is 1\/2, the GUI is displayed. The right half of the screen of the television  shows a directors comment cm written by the director of a movie, and the lower half of the screen of the television  includes a button member bn for receiving next skip and previous skip operations, a button member bn for receiving a menu call, and a button member bn for receiving a network connection. These are the same as are shown in .","When the target of scaling is the video composited with subtitle graphics, the target of the plane shift is only the image plane, and the target of calculating the plane offset E, is also only the plane offset E in the image plane.","This completes the description of the plane shift engine . The following describes the details of the image plane targeted for the plane shift. First, with use of , the general structure of the image plane is described, and next, how pixel movement is performed in the image plane is described.","Each of  and  shows an exemplary internal structure of the image plane . When the resolution is set to 1920\u00d71080, the image plane  is composed of 8 bit-length memory elements, and has a size of 1920 (horizontal)\u00d71080 (vertical) as shown in . This means that the image plane  has a resolution of 1920\u00d71080, and has a memory allocation capable of storing an 8-bit pixel code for each pixel. The 8-bit pixel codes stored in the memory elements are converted into Y, CR and Cb values by color conversion using the color look-up table. The correspondence relationship among the pixel codes and the Y, CR and Cb values is defined by a pallet definition segment in the subtitle data.",{"@attributes":{"id":"p-0372","num":"0371"},"figref":["FIG. 26B","FIG. 14B"],"b":["8","8","6","8","6","11"]},{"@attributes":{"id":"p-0373","num":"0372"},"figref":["FIG. 27A","FIG. 27B","FIG. 27C","FIG. 27A","FIG. 27B","FIG. 27C"]},"This concludes the description of the internal structure of the image plane , and the description of the arrangements of pixel data pieces before and after the plane shift engine  performs the shifting in the image plane . The following describes the internal structure of the interactive graphics plane , and the arrangements of pixel data pieces held in the internal structure of the interactive graphics plane  before and after the shifting.","Each of  and  shows the internal structure of the interactive graphics plane . When the resolution is set to 1920\u00d71080, the interactive graphics plane  is composed of 32 bit-length memory elements, and has a size of 1920\u00d71080 as shown in . This means that the interactive graphics plane  has a resolution of 1920\u00d71080, and has a memory allocation capable of storing a 32-bit R, G, B and a values per pixel. The 32-bit R, G, B and a values are composed of an 8-bit R value, an 8-bit G value, an 8-bit B value and an 8-bit transparency \u03b1, respectively.",{"@attributes":{"id":"p-0376","num":"0375"},"figref":["FIG. 28B","FIG. 28B"],"b":["10","10","6","10","6"]},"The graphics data held in the background graphics plane , the video in the video plane  and the graphics data held in the image plane  can be seen through when the foreground plane has a transparent pixel and the composition unit  composites these data pieces in the respective planes. The transparent area contributes to realizing the composition.","This concludes the description of the pixel data pieces composing the foreground area and the pixel data pieces composing the background area after the shifting in the right direction and the shifting in the left direction have been performed.",{"@attributes":{"id":"p-0379","num":"0378"},"figref":["FIG. 29A","FIG. 29B","FIG. 29C","FIG. 29A","FIG. 29B","FIG. 29C"]},{"@attributes":{"id":"p-0380","num":"0379"},"figref":["FIG. 30A","FIG. 30B","FIG. 30C"],"b":"8"},{"@attributes":{"id":"p-0381","num":"0380"},"figref":"FIG. 30A"},{"@attributes":{"id":"p-0382","num":"0381"},"figref":["FIG. 30B","FIG. 30B"],"b":["20","8","20","8","20","8"]},{"@attributes":{"id":"p-0383","num":"0382"},"figref":["FIG. 30C","FIG. 30C"],"b":["20","8","20","8","20","8"]},"Next, meanings of the positive and negative signs of plane offsets are described.","When the playback apparatus  is in the 3D display mode and the stereo mode of the image plane  is OFF, the playback apparatus  perform the composition after performing the following processing in the planes based on the shift distance shown by the plane offsets E.","When the positive sign of the plane offset E is set, the plane shift engine  shifts coordinates of each of the pixel data in the left-view image plane  in the right direction by the shift distance indicated by the plane offset E. Then, the plane shift engine  shifts coordinates of each of the pixel data in the right-view image plane  in the left direction by the shift distance indicated by the plane offset E.","When the negative sign of the plane offset is set, the plane shift engine  shifts coordinates of each of the pixel data in the left-view image plane  in the left direction by the shift distance indicated by the plane offset E before the composition of the data in the respective planes. Then, the plane shift engine  shifts coordinates of each of the pixel data pieces in the right-view image plane  in the right direction by the shift distance indicated by the plane offset E.",{"@attributes":{"id":"p-0388","num":"0387"},"figref":["FIG. 31A","FIG. 31B","FIG. 31C"],"b":"10"},{"@attributes":{"id":"p-0389","num":"0388"},"figref":"FIG. 31A"},{"@attributes":{"id":"p-0390","num":"0389"},"figref":["FIG. 31B","FIG. 31B"],"b":["20","10","20","10","20","10"]},{"@attributes":{"id":"p-0391","num":"0390"},"figref":["FIG. 31C","FIG. 31C"],"b":["20","10"]},"(2-2) The plane shift engine  shifts the coordinates of each of the pixel data pieces in the interactive graphics plane  horizontally in the left direction by a shift distance indicated by the plane offset E. (2-3) The plane shift engine  adds a transparent area at the left end of the interactive graphics plane .","The following describes the size of the right end area and left end area of the graphics data to be cropped, and the size of the areas to be added at the right end and left end of the graphics data, in the interactive graphics plane , at the time of shifting the coordinates of each of the pixel data pieces in the respective planes. The plane offset E used for the above-stated shifting is a value that responds to the binocular disparity between the right eye and the left eye. This means that each of: the number of horizontal pixels composing the right end area to be cropped; the number of horizontal pixels composing the left end area of the graphics data to be cropped in the graphics plane; and the number of horizontal pixels composing the transparent area to be added at each of the right and left ends of the graphics data held in the graphics plane need to be the number of pixel lengths corresponding to the plane offset.","Therefore, the number of horizontal pixels composing the right end area to be cropped and the number of horizontal pixels composing the left end area to be cropped in the graphics plane is the number of pixel lengths corresponding to the shift distance indicated by the plane offset E. Also, the number of vertical pixels composing the transparent areas is the number of pixel lengths corresponding to the height of the graphics plane.","Similarly, the number of horizontal pixels composing the transparent areas to be added at each of the right and end ends of the graphics image held in the graphics plane is the number of pixel lengths corresponding to the shift distance indicated by the plane offset E. The number of vertical pixels composing the transparent areas is the number of pixel lengths corresponding to the height of the graphics plane.","This concludes the description of the process of shifting the image plane  and the interactive graphics plane . The following describes the meanings of the positive and negative signs of the plane offset E.","When the display mode is 3D, and the stereo mode of the interactive graphics plane  is OFF, the playback apparatus  performs the composition after performing the following process in the planes based on the plane offset E.","When the positive sign of the plane offset E is set, the plane shift engine  shifts the left-view graphics plane in the right direction by the shift distance shown by the plane offset E. Also, the plane shift engine  shifts the right-view graphics plane by the shift distance shown by the plane offset E.","When the negative sign of the plane offset E is set, the plane shift engine  shifts the left-view graphics plane in the left direction by the shift distance shown by the plane offset. And, the plane shift engine  shifts the right-view graphics plane in the right direction by the shift distance shown by the plane offset E.","Shifting of the Coordinates of the Pixel Data in the Respective Memory Elements in the Graphics Plane","The following describes how the plane shift engine  shifts coordinates of the pixel data in the memory elements in the graphics plane due to the above-stated shifting. The graphics data is composed of pixel data pieces, and has a resolution 1920\u00d71080 or 1280\u00d7720, for example.",{"@attributes":{"id":"p-0401","num":"0400"},"figref":["FIG. 32","FIG. 32"]},"The pixel data in a pair of coordinates (0, 0) is stored in the memory element whose address is 0001. The pixel data whose coordinates are (1, 0) is stored in a memory element whose address is 0002. The pixel data whose coordinates are (1919, 0) is stored in a memory element whose address is 07A8. The pixel data whose coordinates are (0, 1) is stored in a memory element whose address is 07A9. That is, it can be seen that graphics data is stored such that a plurality of lines composing the graphics are composed of memory elements having serially-arranged addresses. Thus, these pixel data pieces may be read in a burst mode by sequentially performing the DMA transfer on the memory elements to which the serial addresses are given.","Each of  and  shows what is held in the graphics plane after the shifting has been performed.",{"@attributes":{"id":"p-0404","num":"0403"},"figref":"FIG. 33A"},"Also, it can be seen that pixel data whose coordinates are (0, 1) in the graphics plane coordinate system is stored in a memory element whose address is 07AC, pixel data whose coordinates are (1, 1) in the graphics plane coordinate system is stored in a memory element whose address is 07AD, and pixel data whose coordinates are (2, 1) in the graphics plane coordinate system is stored in a memory element whose address is 07AE.",{"@attributes":{"id":"p-0406","num":"0405"},"figref":"FIG. 33B","b":"20"},"Also, it can be seen that pixel data whose coordinates are (3, 1) in the graphics plane coordinate system is stored in a memory element whose address is 07A9, pixel data whose coordinates are (4, 1) in the graphics plane coordinate system is stored in a memory element whose address is 07AA, and pixel data whose coordinates are (5, 1) in the graphics plane coordinate system is stored in a memory element whose address is 07AB.","As described in the above, it can be seen that, in the graphics plane after the shifting has been performed, the coordinates of each of the pixel data in the graphics plane are shifted to the right or left from the original coordinates of each of the pixel data pieces by the number of pixel lengths shown by the plane offset E.","In order to realize the shifting in the graphics plane, the plane shift engine  needs to shift the coordinates of each of the pixel data composing the graphics data by an amount indicated in a predetermined address, an address of a memory element on which each of the pixel data pieces composing the graphics data is positioned. It is needless to say that the plane shift engine  can realize the shifting in the graphics plane without changing the address of the memory element on which each of the pixel data pieces is arranged, by performing processing that corresponds to the above-stated processing.","This concludes the description of what is held in the graphics plane after the plane shift engine  has performed the shifting.","As described above, the plane shift is implemented to realize controlling how to move the coordinates of pixels in the memory, and is realized by software bundled in the playback apparatus, so to speak. In contrast, since a program for playback control provided from a BD-ROM is a byte code application written in Java language as described above, the executor of the byte code application exists in the playback apparatus . The following describes the internal structure of a BD-J platform unit  that executes byte code applications.",{"@attributes":{"id":"p-0412","num":"0411"},"figref":["FIG. 31","FIG. 31"],"b":["22","31","32","33","34","35"]},"Heap Memory ","The heap memory  is a stack area on which the byte code of the system application, the byte code of the BD-J application, a system parameter used by the system application and an application parameter used by the BD-J application are arranged.","Byte Code Interpreter ","The byte code interpreter  converts the byte codes composing the BD-J application stored in the heap memory  and byte codes composing the system application into native codes, and causes the MPU to execute the converted codes.","Middleware ","The middleware  is an operating system for the embedded software, and is composed of a kernel and a device driver. The kernel provides the BD-J application with functions specific to the playback apparatus  in accordance with calls of the application programming interface (API) from the BD-J application. Also, the kernel realizes hardware control such as starting an interrupt handler unit by an interrupt signal.","Class Loader ","The class loader  is one of the system applications, and loads the BD-J application by reading the byte codes from the class files that exist in the JAR archive file, and storing the byte codes in the heap memory .","Application Manager ","The application manager  is one of the system applications, and performs the application signaling of the BD-J application such as starting the BD-J application or ending the BD-J application, based on the application management table in the BD-J object.","This concludes the description of the internal structure of the BD-J platform unit.","In the above-stated layer model, the display mode setting initial display setting unit  is in the lower layer of the platform unit, which sets a display mode and a resolution based on the BD-J object in the current title used by the BD-J platform unit.","Internal Structure of the Display Mode Storage Unit ","The display mode storage unit  can be referred to from the above-stated layer model. Therefore, the display mode storage unit  can be referred to from the layer model via the API, and includes information showing a setting and a state of each of the background graphics plane , the video plane , the image plane  and the interactive graphics plane . The following describes the structure of the display mode storage unit , referring to .",{"@attributes":{"id":"p-0427","num":"0426"},"figref":"FIG. 35","b":"29"},"In , the display mode storage unit  stores information on the setting of the background plane , information on the setting of the video plane , information on the setting of the image plane , information on the setting of the interactive graphics plane , and information on the state of the display mode showing whether the playback apparatus  is in the 2D mode or the 3D mode. \u201cResolution (:YY\u00d7ZZ in FIG. )\u201d and a stereo mode (:ON or OFF in ) and a setting of THREE_D (:ON or OFF in ) are stored as setting items of each plane. Besides the above-stated setting items, the plane offset may be set in a range of \u201c\u221263\u201d to \u201c+63\u201d in the setting of the image plane  and the setting of the interactive graphics plane .","As shown in , if different values are used for the plane offset set in the image plane and the plane offset set in the interactive graphics plane, the subtitle graphics and the GUI appear to be displayed in different positions on the Z axis. In this case, the offset value storage unit in  is configured to store two plane offsets, namely, the plane offset set in the image plane and the plane offset set in the interactive graphics plane.","The following describes the resolution supported by the display mode storage unit .","When the playback apparatus  is in the 2D display mode, the display mode storage unit  supports a resolution of 1920\u00d71080 pixels, a resolution of 1280\u00d7720 pixels, a resolution of 720\u00d7576 pixels, and a resolution of a 720\u00d7480 pixels for the background plane , the video plane , the image plane  and the interactive graphics plane , as the initial display setting.","This concludes the description of what is stored in the display mode storage unit .","The following describes the initial display setting by the display mode setting initial display setting unit . Even during a period when one title has been selected, and the BD-J object corresponding to that title is valid in the playback apparatus, there are cases in which the currently-operating application calls a JMF player instance according to a user operation, thus starting playback of a new PlayList. If a new PlayList is started in this way, it is necessary to reset the display mode setting in the title.","As functions of the display mode setting initial display setting unit , support must be provided for an inter-title display mode setting used when the title changes, a display mode setting used when the PlayList changes in the title, and a display mode setting for when the application explicitly calls the API and sets the display mode. Specifically, a program can be created for causing the MPU to execute the processing procedures indicated in the flowchart described below, and this program can be implemented by incorporation in the playback apparatus.",{"@attributes":{"id":"p-0435","num":"0434"},"figref":"FIG. 36","b":["24","25","27","21","22","23","26"]},"Step S is a judgment of whether the auto playback PlayList exists or not, and Step S is a judgment of whether the immediately preceding display mode is a 3D display mode. Step S is a judgment of whether or not the auto playback PlayList of the selected title is a 3D PlayList with a resolution of 1920\u00d71080 or a 3D PlayList with a resolution of 1280\u00d7720.","When the auto playback PlayList does not exist, it is judged whether the default resolution of the BD-J object is HD3D1920\u00d71080, or HD3D1280\u00d7720 in Step S. If the judgment of Step S is Yes, the display mode is set to a 3D display mode, and the resolution is set to 1920\u00d71080 or 1280\u00d7720 in Step S.","If the judgment of Step S is No, the display mode is set to a 2D display mode in Step S, and the resolution is set to a default resolution in the BD-J object.","When the auto playback PlayList does exists, it is judged whether or not the immediately preceding display mode is the 2D display mode in Step S. If Step S is Yes, it is judged whether or not the PlayList is a 3D PlayList in Step S and the resolution is 1920\u00d71080 and 1280\u00d7720 in Step S. If the judgment of Step S or Step  is No, the display mode is set to the 2D display mode, and a resolution is set to the resolution of the auto playback PlayList in Step S.","If the judgment of Step S is Yes, and the judgment of Step S is also Yes, the display mode is set to a 3D display mode, and the resolution is set to 1920\u00d71080 and 1280\u00d7720 according to the resolution of the auto playback PlayList in Step S.","This concludes the description of processing procedures for setting the display modes in the title.",{"@attributes":{"id":"p-0442","num":"0441"},"figref":"FIG. 37","b":["31","32","31","34","32","33","34"]},"This concludes the description of the processing procedures for setting the display mode in the title.","Implementation of the Playback Control Engine ","When a current PlayList is selected due to some factor, the playback control engine  plays back the current PlayList. Specifically, the playback control engine  needs to realize processing of: reading PlayList information corresponding to the current PlayList in the still scenario memory ; and playing back a 3D stream and a 2D stream referred to by the PlayItem information in the PlayList information. More specifically, it is necessary to: create a program that executes processing procedures indicated by the flowchart below; install the program in the playback apparatus ; and cause the MPU to execute the program.",{"@attributes":{"id":"p-0446","num":"0445"},"figref":"FIG. 38"},"Step S is a judgment of whether the current PlayList number is set by setting of the auto start PlayList in the BD-J object that relates to the selected title, or generation of the JMF player instance. If the current PlayList number is set, a PlayList information file indicated by the current PlayList number is loaded in the still scenario memory in Step S. If a plane offset exists in the PlayList information in Step S, the offset setting unit sets the plane offset as the plane offset value in the plane shift engine . Then, the display mode in the title is set in Step S.","In Step S, the first PlayItem number in the loaded PlayList information is set to the current PlayItem number. In Step S, the current stream is selected from among PES streams permitted to be played back in the current PlayList information.","In Step S, what number of a stream is used is decided based on the PlayItem information.","In Step S, it is judged whether the display mode determined in the Step S is the 2D display mode or the 3D display mode. If the display mode is the 3D display mode, the playback control engine  executes the playback of the 3D video stream in the 3D display mode in Step S. If the display mode is the 2D display mode, Step S is performed.","Step S is judgments of whether the video stream indicated by the current stream number and whether the subtitles are 2D or 3D. If it is judged that the video stream and the subtitles are 2D in Step S, the playback control engine  executes the playback of a 2D AV stream in the 2D display mode in Step S. If it is judged that the video stream and the subtitles are 3D, the playback control engine  executes the playback of the 3D video stream in the 2D display mode in Step S. Lastly, when the procedure reaches \u201cend\u201d in , the playback of the PlayList starts.",{"@attributes":{"id":"p-0452","num":"0451"},"figref":"FIG. 39"},"In Step S, the plane offset D embedded in the video stream is set in the plane shift engine . In Step S, a current PlayItem. In_Time and a current PlayItem. Out_Time are converted into a Start_SPN[i] and End_SPN[i] respectively, with use of an entry map corresponding to the a packet ID of the left view stream.","The SubPlatItemIn_Time and SubPlayItemOut_Time specified with use of an entry map [j] corresponding to a packet ID [j] of the right view stream are converted into Start_SPN[j] and End_SPN[j], respectively (Step S).","The playback control engine  specifies an extent that falls in a read range [i] for reading Start_SPN[i] to End_SPN[i] of a TS packet [i] of the packet ID [i] (Step S). The playback control engine  specifies an extent that belongs to a read range for reading Start_SPN[j] to End_SPN[j] of a TS packet [j] of the packet ID [j] (Step S). The playback control engine  instructs the drive to sorts addresses of the extents that belong to the read ranges [i] and [j] in an ascending order in Step S, and to sequentially read these extents that belong to the read ranges [i] and [j] with use of the sorted addresses in Step S.","This concludes the description of the playback control engine .",{"@attributes":{"id":"p-0457","num":"0456"},"figref":"FIG. 40","b":["602","606","602","603","606"]},"Note that the processing for extracting the plane offset D from the current PlayList information and storing the plane offset D in the plane shift engine has already been performed in step S of .","In the present loop, step S is a judgment regarding whether the plane offset D is set in the offset value storage unit , and if the plane offset D is not set, processing skips to step S, but if the plane offset D is set, step S is executed. Step S is processing for offset calculation performed by the offset calculation unit  shown in , with use of the plane offset D stored in the offset value storage unit , and updating the plane offset E in the plane shift engine .","Processing Procedures for the 3D Video Stream at the Time of the 3D Display Mode","When the current display mode is the 3D display mode, and the playback targets are the 3D PlayList and the 3D stream, the processing procedures shown in  and  are executed.",{"@attributes":{"id":"p-0462","num":"0461"},"figref":["FIG. 41","FIG. 40"],"b":"602"},"Steps S to S in  are for left eye processing.","Firstly, the composition unit  acquires background data written in the left-view background plane  (the area to which \u201cL\u201d is given in ) for the left view. The left-view background plane stores the background data that has been written through the still image decoder according to the rendering instruction by the BD-J application.","Next, after the video decoder decodes the left-view video stream with use of the video decoder , and writes the decoded left-view video stream in the video plane  (to which (L) is given in ), the composition unit  acquires the left-view video data written in the video plane  (Step S).","Then, the composition unit  in step S checks whether the stereo mode in the image plane settings in the display mode storage unit  is ON or OFF (hereinafter, checking whether the stereo mode is ON or OFF is called checking the stereo mode flag). If the stereo mode is OFF, the composition unit  uses the image decoder to decode the left-view image, and writes the decoded left-view image in the image plane  (area to which (L) is given in ), then the plane shift engine  performs the shift processing for the left view (Step S).","When the stereo mode is ON, the composition unit  uses the image decoder to decode the left-view image, and writes the decoded left-view image in the image plane  (area to which the code (L) is given in ). When the stereo mode is ON, the plane shift engine  does not perform the shift processing for the left view on the decoded left-view image in the image plane  (area to which the code (L) is given in ). This is because, when the stereo mode is ON, the composition unit  writes, in the image plane (area to which an (R) is given in ) via the image decoder , the right-view image which is seen from the different angle from the left-view image (Step S).","The image plane  to which the code (L) is given in Step Sor in Step Sholds therein the image data which is stored in the image memory , and is decoded by the image decoder ","Next, the composition unit  checks a flag of the stereo mode in the interactive graphics plane  setting in the mode storage unit  in Step S. When the stereo mode is OFF, the BD-J application writes the left-view interactive graphics  in the left-eye plane (to which the code (L) is given in the interactive graphics plane  in ) with use of the rendering engine , and acquires the left-view interactive graphics from the left-eye plane (to which the code (L) is given in the interactive graphics plane  in ). The plane shift engine  performs shift processing for the left-eye on the acquired left-view interactive graphics (Step S).","When the stereo mode is ON, the BD-J application writes the left-view interactive graphics in the left-eye plane (to which the code (L) is given in the interactive graphics plane  in ) with use of the rendering engine . After that, although the BD-J application acquires left-view interactive graphics from the left-eye plane (to which the code (L) is given in the interactive graphics plane  in ) for display, the plane shift engine  does not perform the shift processing for the left eye on the left-view interactive graphics (Step S).","The left-view interactive graphics plane from which the left-view interactive graphics is acquired in Step Sand Step Sstores therein the data that has been written through the rendering engine according to the rendering instruction by the BD-J application in the BD-J mode.","Also, in HDMV mode, the left-view interactive graphics plane stores therein the decoding result of the graphics data extracted from a graphics stream instead of graphics data drawn by the BD-J application.","In Step S, the composition unit  composites: the background data written in the background plane  to which the code (L) is given in Step S; video data written in the video plane  to which the code (L) is given in Step S; the subtitle data written in the image plane  to which the code (L) is given in Step S; and the GUI data written in the interactive graphics plane  to which the code (L) is given in Step S in order. Then, the resultant composited data is outputted to the display as left-view data.","If the stereo mode is judged to be OFF in Step S and Step S, data obtained as a result of the shift processing performed in the corresponding planes are used for composition. As the final process of Step S, the flag in the left-right processing storage unit is changed when the data is outputted to the display. Note that each process in Step S to  is processed as process for the left eye. Which eye to process is determined by referring to the left-right processing storage unit .","Next, the processing for the right eye is performed after the processing for the left eye in Step S to S is completed.",{"@attributes":{"id":"p-0476","num":"0475"},"figref":["FIG. 42","FIG. 40","FIG. 42","FIG. 42"],"b":["603","801","809","801","16","11","29","801","16","11","11","802","11","11","802"],"i":["a","b"]},"Next, the composition unit  checks the flag of the stereo mode in the video plane  setting in the display mode storage unit  in Step S. When the stereo mode is OFF, the composition unit  uses the video decoder to decode the left-view video stream, writes the decoded image in the video plane  (to which the code (R) is given in ), and acquires the left-view video data from the video plane  (to which the code (R) is given in ) (Step S). When the stereo mode is ON, the composition unit  uses the video decoder to decode the right-view video stream, writes the decoded right-view video stream in the video plane  (to which the code (R) is given in ), and acquires the right-view video data from the video plane  the video plane  (to which the code (R) is given in ) (Step S).","Then, the composition unit checks the flag of the stereo mode in the image plane  setting in the display mode storage unit  in Step S. When the stereo mode is OFF, the composition unit  writes the left-view image decoded by the image decoder in the image plane  (area to which the code (R) is given). After that, the plane shift engine  performs processing for the right eye on the left-view image written in the image plane  (to which the code (R) is given) (Step S). When the stereo mode is ON, the composition unit  writes, in the image plane  (to which the code (R) is given), the right-view image decoded by the image decoder . However, when the stereo mode is ON, the plane shift engine  does not perform the shift processing. This is because when the stereo mode is ON, a right view image that is different in viewed angle from the left view image is written via the image decoder in the image plane  (area to which (R) is given in ) (Step S).","The image plane  from which the images are acquired in Step Sand Step Sstores therein the subtitle data that has been stored in the image memory , and decoded by the image decoder  (image decoders or in ).","Next, the composition unit  checks the flag of the stereo mode in the interactive graphics plane  setting in the display mode storage unit  in Step S. When the stereo mode is OFF, the right-eye plane (area to which the code (R) is given in the interactive graphics plane  in ) contains left-view interactive graphics written by the BD-J application using the rendering engine . Then the plane shift engine  performs the shift processing for the right eye on the left-view interactive graphics written in the right-eye plane (area to which the code (R) is given in the interactive graphics plane  in ) (Step S).","When the stereo mode is ON, the BD-J application uses the rendering engine to write the right-view interactive graphics in the right-eye plane (area to which the code (R) is given in the interactive graphics plane  in ). However, the plane shift engine  does not perform the shift processing on the right-view interactive graphics written in the right-eye plane (area to which the code (R) is given in the interactive graphics plane  in ) (Step S).","In Step S, the composition unit  composites: the background data written in the background plane  (to which the code (R) is given) in Step S; the video data written in the video plane  (to which the code (R) is given) in Step S; the image data written in the image plane  (to which the code (R) is given) in Step S; and the GUI data written in the interactive graphics plane  in Step S in order.","In case the stereo mode is OFF in Step S and Step S, data obtained as a result of the shift processing performed in the corresponding plane are targeted for the composition. The resultant composited data is outputted to the display as the right-view data in step Sand step S. When lastly in step S the composited data is outputted to the display, the flag in the left-right processing storage unit  is changed. Note that Step S to Step S is processed for the right eye. Whether or not the current process is for the right eye is judged by referring to the left-right processing storage unit .","As long as frames are continuously inputted, the processing of steps S, S, S, and S (if YES in S) in  is repeated (Step S).","This concludes the description of stream processing when the display mode is 3D.","Note that when the method for acquiring the plane offset D from the header area of the AV stream is adopted in the playback apparatus, and the update of each frame is implemented, it is necessary to update an offset value in the plane shift engine  to a value corresponding to the next frame by the offset setting unit  during Step S.",{"@attributes":{"id":"p-0487","num":"0486"},"figref":["FIG. 43A","FIG. 41","FIG. 42"],"b":["702","804"],"i":"a "},"First, the left view video stream is decoded with use of the video decoder , and output as video data (step S).","Next, a judgment is made as to whether the scaling factor is \u201c1\u201d (step S).","For example a scaling factor specified by the BD-J platform  is referenced, and the judgment is realized based on the referenced value.","In the present embodiment, the scaling factor value stored in the scaling factor storage unit  in the plane shift engine  may be referenced. However, the present invention is not limited to this. The scaling engine  may include a scaling factor storage unit (not depicted in the drawings) that stores a scaling factor specified by the BD-J platform . Also, the scaling factor storage unit  in the plane shift engine  may be provided in the playback apparatus but outside the scaling engine . The scaling engine  and the plane shift engine  may be provided in the playback apparatus, and may reference the scaling factor stored in the scaling factor storage unit  that is provided externally to the plane shift engine .","Next, in step S, when a judgment is made that the scaling factor is not \u201c1\u201d (when \u201cYes\u201d is judged in step S), the number of horizontal pixels in the decoded video data (number of pixel lengths in the horizontal direction on the display screen), the number of vertical pixels (number of pixel lengths in the vertical direction on the display screen) are converted to a number of horizontal pixels and a number of vertical pixels corresponding to the scaling factor (that is, enlargement\/reduction processing is performed), and the video data is written, according to the converted number of horizontal pixels and converted number of vertical pixels, in the video plane  so that the video data is displayed in a predetermined position on the display screen (step S).","Here, as specific processing of step S, in step S, in contrast to writing the data in the area given the code (L) in the video plane  in step S, in the specific processing of step S, in step S, the data is written in the area given the code (R) in the video plane .","For example, this means that when the scaling factor is 1\/2, the data is written in the video plane so that the video data is displayed in the top left portion of the display screen as shown in , and when the scaling factor is 1\/4, the data is written in the video plane so that the video data is displayed in the top left of the display screen as shown in . Also, although in the above description, the data is written in the video plane so that the video data is displayed in a predetermined position on the display screen according to the converted horizontal and vertical pixels, the apparatus may also be configured to determine the display position according to a specification from the BD-J application.","Known technology for enlargement\/reduction processing may be applied to the above processing.","In step S, when the scaling factor has been judged to be \u201c1\u201d, (when \u201cNo\u201d is judged in step S), the video data of the decoded left view video stream is written in the video plane  with use of the video decoder (step S).","Here, in the specific processing of step S, in contrast to step S in which the data is written in the area given the code (L) in the video plane , in the specific processing of step S, in step S, the data is written in the area given the code (R) in the video plane .","Step S means that, for example if the scaling factor is 1\/1, writing is performed in the video plane so that the video data is displayed in full screen, as shown in .",{"@attributes":{"id":"p-0499","num":"0498"},"figref":["FIG. 43B","FIG. 42"],"b":"804"},"First, with use of the video decoder , the right view video stream is decoded and the video stream is output (step S).","Next, a judgment is made that the scaling factor is not \u201c1\u201d (step S).","In step S, when a judgment is made that the scaling factor is not \u201c1\u201d (when \u201cYes\u201d is judged in step S), the video decoder that decoded the data performs a conversion from the horizontal pixel number (the number of pixel lengths in the horizontal direction of the display screen) and the number of vertical pixels (the number of pixel lengths in the vertical direction of the display screen) to a number of horizontal pixels and a number of vertical pixels corresponding to the scaling factor (that is, performs enlargement\/reduction processing), and writes the video data for which the number of horizontal pixels and the number of vertical pixels have been converted in the video plane  (area given the code (R)) so that the video data is displayed in a predetermined position of the display screen (step S).","In step S, when a judgment is made that the scaling factor is \u201c1\u201d (when \u201cNo\u201d is judged in step S), with use of the video decoder , the video data of the decoded right view video stream is written in the video plane  (area given the code (R)) (S).",{"@attributes":{"id":"p-0504","num":"0503"},"figref":["FIG. 16A","FIG. 41","FIG. 16A"],"b":["704","7","201"],"i":["b ","c"]},"Next, a judgment is made as to whether the scaling factor is not \u201c1\u201d (step S).","In the next step S, when a judgment is made that the scaling factor is not \u201c1\u201d (when \u201cYes\u201d is judged in step S), the video decoder or that decoded the data performs a conversion from the horizontal pixel number (the number of pixel lengths in the horizontal direction of the display screen) and the number of vertical pixels (the number of pixel lengths in the vertical direction of the display screen) to a number of horizontal pixels and a number of vertical pixels corresponding to the scaling factor (that is, performs enlargement\/reduction processing), and writes the video data for which the number of horizontal pixels and the number of vertical pixels have been converted in the video plane  (area given (L) in ) so that the video data is displayed in a predetermined position of the display screen (step S).","For example when the scaling factor is 1\/2, as shown on the left side of , the video data is brought to the left top of the display screen, and the subtitle data is written in the image plane so as to be displayed at the size corresponding to the subtitle. When the scaling factor is 1\/4, as shown on the left side of , the video data is brought to the left top of the display screen, and the subtitle data is written in the image plane so as to be displayed at the size corresponding to the subtitle. Also, although in the above description, conversion to the number of vertical pixels is performed, and the video data is displayed in a predetermined position on the display screen according to the converted number of horizontal pixels and converted number of vertical pixels, the display position of the subtitle data may instead be determined according to a specification from the BD-J application.","Known technology for enlargement\/reduction processing may be applied to the above processing.","In step S, when a judgment is made that the scaling factor is \u201c1\u201d (when \u201cNo\u201d is judged in step S), with use of the image decoder , the video data of the decoded left view video stream is written in the image plane  (area given (L) in ) (S).","For example the scaling factor is 1\/1, and as shown on the left side of , the subtitle data is written in the image plane  so as to be displayed in a corresponding size when the video data is displayed in full screen.",{"@attributes":{"id":"p-0511","num":"0510"},"figref":["FIG. 23A","FIG. 42","FIG. 23A"],"b":["806","7","201"],"i":["b","e"]},"Next, a judgment is made as to whether the scaling factor is not \u201c1\u201d (step S).","In step S, when a judgment is made that the scaling factor is not \u201c1\u201d (when \u201cYes\u201d is judged in step S), the number of horizontal pixels in the decoded video data (number of pixel lengths in the horizontal direction on the display screen), the number of vertical pixels (number of pixel lengths in the vertical direction on the display screen) are converted to a number of horizontal pixels and a number of vertical pixels corresponding to the scaling factor (that is, enlargement\/reduction processing is performed), and the converted number of horizontal pixels and converted number of vertical pixels are written in the image plane  (area given (R) in ) so that the video data is displayed in a predetermined position on the display screen (step S).","For example when the scaling factor is 1\/2, the subtitle data is written in the image plane to be displayed in the size corresponding to the subtitle when the video data is brought to the left top of the display screen as shown on the right side of . When the scaling factor is 1\/4, the subtitle data is written in the image plane to be displayed in the size corresponding to the subtitle when the video data is brought to the left top of the display screen as shown on the right side of .","Also, although in the above description, conversion to the number of vertical pixels is performed, and the video data is displayed in a predetermined position on the display screen according to the converted number of horizontal pixels and converted number of vertical pixels, the display position of the subtitle data may instead be determined according to a specification from the BD-J application.","Known technology for enlargement\/reduction processing may be applied to the above processing.","In step S, when a judgment is made that the scaling factor is \u201c1\u201d (when \u201cNo\u201d is judged in step S), with use of the image decoder , the subtitle data of the decoded right view subtitle stream is written in the image plane  (area given the code (R)) (S).","This means that for example, if the scaling factor is 1\/1, the subtitle data is written in the image plane  at a corresponding size when the video data is displayed in full screen as shown on the right side of .",{"@attributes":{"id":"p-0519","num":"0518"},"figref":["FIG. 16B","FIG. 41","FIG. 16"],"b":["704","201"],"i":["b ","d"]},"The left view interactive graphics data may be generated, for example, according to a drawing program included in the BD-J application. More specifically, the pixel values may be calculated according to program code, or the apparatus may be configured to record, in advance, corresponding left view JPEG graphics image data on a virtual BD-ROM (the BD-ROM  or the local storage ) that can be read via the virtual file system , and the apparatus may be configured so that the BD-J application reads the left view JPEG graphics image data. At this time, when the JPEG graphics image data is encoded and recorded, the JPEG graphics may be decoded by a decoder not depicted in the drawings or the image decoder , then read.","Next, a judgment is made as to whether the scaling factor of the interactive graphics plane is not \u201c1\u201d (step S).","Next in step S, when a judgment is made that the scaling factor is not \u201c1\u201d (when \u201cYes\u201d is judged in step S), the number of horizontal pixels in the generated interactive graphics data (number of pixel lengths in the horizontal direction on the display screen), the number of vertical pixels (number of pixel lengths in the vertical direction on the display screen) are converted to a number of horizontal pixels and a number of vertical pixels corresponding to the scaling factor (that is, enlargement\/reduction processing is performed), and the converted number of horizontal pixels and converted number of vertical pixels are written in the interactive graphics plane  (area given (L) in ) so that the interactive graphics data is displayed in a predetermined position on the display screen (step S).","For example when the scaling factor is 1\/2, the graphics data corresponding to the GUI parts is written in the interactive graphics plane to be displayed in a size that has been reduced by 1\/2. When the scaling factor is 1\/4, the graphics data corresponding to the GUI parts is written in the interactive graphics plane to be displayed in a size that has been reduced by 1\/4.","Also, although in the above description, conversion to the number of vertical pixels is performed, and the interactive graphics data is displayed in a predetermined position on the display screen according to the converted number of horizontal pixels and converted number of vertical pixels, the display position of the interactive graphics data may instead be determined according to a specification from the BD-J application.","Known technology for enlargement\/reduction processing may be applied to the above processing.","Also, in step S, when a judgment is made that the scaling factor is \u201c1\u201d (when \u201cNo\u201d is judged in step S), the generated left view interactive graphics data is written in the interactive graphics plane  (area given the code (L)) (S).","For example, when the scaling factor is 1\/1, this corresponds to the case of displaying the interactive graphics data in full screen.","When the scaling factor of the interactive graphics plane is not given consideration (that is, when the scaling factor of the interactive graphics plane is always set as \u201c1\u201d), step Sis to be performed after step S, and steps S and Smay be deleted.","For example, when the interactive graphics images are graphics images corresponding to the GUI parts, in the processing of step S, the interactive graphics images can be written in the interactive graphics plane  (area given the code (L)) so that the interactive graphics images corresponding to the GUI parts are displayed in the portion of the display screen other than the portion where the composite image of the reduced video\/subtitles when full screen display is performed.","Specifically, in , in a state of the scaling factor being 1\/1 and the subtitle and video composite image being displayed as an image seen from the left eye (the left side of ), for example when an input is received for switching to a menu screen, as shown in , the scaling factor of the video and subtitle composite image becomes 1\/2, the composite image is displayed in the top left of the display screen, the GUI image corresponding with the graphics image and the director's comment are written in the interactive graphics plane (area given the code (L)), and the images written to this interactive graphics plane (area given the code (L)) is further composited, and becomes the composite image for the left eye (see the left side of ).",{"@attributes":{"id":"p-0531","num":"0530"},"figref":["FIG. 23B","FIG. 42","FIG. 23B"],"b":["808","201"],"i":["b ","f"]},"The right view interactive graphics data may be generated, for example, according to a drawing program included in the BD-J application. More specifically, the pixel values may be calculated according to program code, or the apparatus may be configured to record, in advance, corresponding right view JPEG graphics image data on a virtual BD-ROM (the BD-ROM  or the local storage ) that can be read via the virtual file system , and the apparatus may be configured so that the BD-J application reads the right view JPEG graphics image data. At this time, when the JPEG graphics image data is encoded and recorded, the JPEG graphics may be decoded by a decoder not depicted in the drawings or the image decoder , then read.","Next, a judgment is made as to whether the scaling factor is not \u201c1\u201d (step S). In step S, when a judgment is made that the scaling factor is not \u201c1\u201d (when \u201cYes\u201d is judged in step S), the number of horizontal pixels in the generated interactive graphics data (number of pixel lengths in the horizontal direction on the display screen), the number of vertical pixels (number of pixel lengths in the vertical direction on the display screen) are converted to a number of horizontal pixels and a number of vertical pixels corresponding to the scaling factor (that is, enlargement\/reduction processing is performed), and the interactive graphics data is written in the interactive graphics plane  (area given the code (R) in ) so as to be displayed in a predetermined position on the display screen (step S).","For example, when the scaling factor is 1\/2, the graphics data corresponding to the GUI parts is written in the interactive graphics plane to be displayed in a size that has been reduced by 1\/2. When the scaling factor is 1\/4, the graphics data corresponding to the GUI parts is written in the interactive graphics plane to be displayed in a size that has been reduced by 1\/4.","Also, although in the above description, conversion to the number of vertical pixels is performed, and the interactive graphics data is displayed in a predetermined position on the display screen according to the converted number of horizontal pixels and converted number of vertical pixels, the display position of the interactive graphics data may instead be determined according to a specification from the BD-J application, or according to a predetermined reduction ratio.","Known technology for enlargement\/reduction processing may be applied to the above processing.","Next in step S, when a judgment is made that the scaling factor is \u201c1\u201d (when \u201cNo\u201d is judged in step S), the generated right view interactive graphics data is written in the interactive graphics plane  (area given the code (R) in ) (S).","For example, when the scaling factor is 1\/1, this corresponds to the case of displaying the interactive graphics data in full screen.","When the scaling factor of the interactive graphics plane is not given consideration (that is, when the scaling factor of the interactive graphics plane is always set as \u201c1\u201d), step Sis to be performed after step S, and steps S and Smay be deleted.","For example, when the interactive graphics images are graphics images corresponding to the GUI parts, in the processing of step S, the interactive graphics images can be written in the interactive graphics plane  (area given the code (R)) so that the interactive graphics images corresponding to the GUI parts are displayed in the portion of the display screen other than the portion where the composite image of the reduced video\/subtitles when full screen display is performed.","Specifically, in , in a state of the scaling factor being 1\/1 and the subtitle and video composite image being displayed as an image seen from the right eye (the right side of ), for example when an input is received for switching to a menu screen, as shown in , the scaling factor of the video and subtitle composite image becomes 1\/2, the composite image is displayed in the top left of the display screen, the GUI image corresponding with the graphics image and the director's comment are written in the interactive graphics plane (area given the code (R)), and the images written to this interactive graphics plane (area given the code (R)) is further composited, and becomes the composite image for the right eye (see the right side of ).",{"@attributes":{"id":"p-0542","num":"0541"},"figref":["FIG. 44A","FIG. 41"],"b":"704","i":"a "},"First, with use of the image decoder , the left view subtitle stream is decoded, and the decoded subtitle data is output (step S).","Although in step S, a structure is described of decoding the left view subtitle stream, alternatively, when the apparatus is configured so that the same subtitle stream is shared between right and left display, the shared left and right display subtitle stream may be read.","A judgment is made as to whether the scaling factor is not \u201c1\u201d (step S). This judgment is performed, for example, by referencing a scaling factor specified by the BD-J platform , and judging according to this referenced value.","In the present embodiment, the scaling factor value stored in the scaling factor storage unit  in the plane shift engine  may be referenced. However, the present invention is not limited to this. The scaling engine  may include a scaling factor storage unit (not depicted in the drawings) that stores a scaling factor specified by the BD-J platform . Also, the scaling factor storage unit  in the plane shift engine  may be provided in the playback apparatus but outside the scaling engine . The scaling engine  and the plane shift engine  may be provided in the playback apparatus, and may reference the scaling factor stored in the scaling factor storage unit  that is provided externally to the plane shift engine .","In step S, when a judgment is made that the scaling factor is not \u201c1\u201d (when \u201cYes\u201d is judged in step S), the number of horizontal pixels in the decoded subtitle data (number of pixel lengths in the horizontal direction on the display screen), the number of vertical pixels (number of pixel lengths in the vertical direction on the display screen) are converted to a number of horizontal pixels and a number of vertical pixels corresponding to the scaling factor (that is, enlargement\/reduction processing is performed), and the image data is written, according to the converted number of horizontal pixels and converted number of vertical pixels, in the image plane  (area given the code (L) in ) so that the image data is displayed in a predetermined position on the display screen (step S).","For example, this means that when the scaling factor is 1\/2, the subtitle data is written in the image plane so as to be displayed at a size corresponding to the subtitle when the video data is brought up to the left top of the display screen as shown on the left side of , and when the scaling factor is 1\/4, the subtitle data is written in the image plane so as to be displayed at a size corresponding to the subtitle when the video data is brought up to the left top of the display screen as shown on the left side of . Also, although in the above description, the data is written in the video plane so that the video data is displayed in a predetermined position on the display screen according to the converted horizontal and vertical pixels, the apparatus may also be configured to determine the display position according to a specification from the BD-J application.","Known technology for enlargement\/reduction processing may be applied to the above processing.","Next, the offset value stored in the offset value storage unit  of the plane shift engine  and the scaling factor referenced in step S are referenced, and left eye shift processing is performed on the subtitle data stored in the image plane  (specifically, the area given (L) in ). This corresponds to performing shift processing with use of an offset value corresponding to the result of performing the calculation \u201cvalue in offset storage unit (offset value)\u00d7scaling factor\u201d (cutting off the numbers after the decimal point) (step S).","Next, in step S, when a judgment is made that the scaling factor is \u201c1\u201d (when \u201cNo\u201d is judged in step S), with use of the image decoder , the subtitle data of the decoded left view subtitle stream is written in the image plane  (area given the code (L) in ) (step S).","For example when the scaling factor is 1\/1, and the video data is displayed in full screen on the display screen as shown on the left side of , the subtitle data is written in the image plane  (area given (L) in ) in a corresponding size.","Next, left eye shift processing is performed on the subtitle data stored in the image plane  (specifically the area to which (L) is given in ), with reference to the offset value stored in the offset value storage unit  of the plane shift engine . Since the scaling factor is 1, this means performing the calculation in step S, \u201cvalue in offset storage unit (offset value)\u00d7scaling factor\u201d, with \u201c1\u201d as the scaling factor value, that is, shifting an amount corresponding to the offset value (step S).",{"@attributes":{"id":"p-0554","num":"0553"},"figref":["FIG. 44B","FIG. 42"],"b":"806"},"First, with use of the image decoder , the left view subtitle stream is decoded and the decoded subtitle data is output (step S).","Next, a judgment is made as to whether the scaling factor is \u201c1\u201d (step SB).","This judgment is made by referencing a scaling factor specified by, for example, the BD-J platform , and judging according to the referenced value.","In the present embodiment, the scaling factor value stored in the scaling factor storage unit  in the plane shift engine  may be referenced. However, the present invention is not limited to this. The scaling engine  may include a scaling factor storage unit (not depicted in the drawings) that stores a scaling factor specified by the BD-J platform . Also, the scaling factor storage unit  in the plane shift engine  may be provided in the playback apparatus but outside the scaling engine . The scaling engine  and the plane shift engine  may be provided in the playback apparatus, and may reference the scaling factor stored in the scaling factor storage unit  that is provided externally to the plane shift engine .","In step S, when a judgment is made that the scaling factor is not \u201c1\u201d (when \u201cYes\u201d is judged in step S), the number of horizontal pixels in the decoded video data (number of pixel lengths in the horizontal direction on the display screen), the number of vertical pixels (number of pixel lengths in the vertical direction on the display screen) are converted to a number of horizontal pixels and a number of vertical pixels corresponding to the scaling factor (that is, enlargement\/reduction processing is performed), and the video data is written, according to the converted number of horizontal pixels and converted number of vertical pixels, in the image plane  (area given (R) in ) so that the video data is displayed in a predetermined position on the display screen (step S).","For example, this means that when the scaling factor is 1\/2, the subtitle data is written in the image plane so as to be displayed at a same size as the subtitle when the video data is brought up to the left top of the display screen as shown on the right side of , and when the scaling factor is 1\/4, the subtitle data is written in the image plane so as to be displayed at same size as the subtitle when the video data is brought up to the left top of the display screen as shown on the right side of . Also, although in the above description, the data is written in the video plane so that the video data is displayed in a predetermined position on the display screen according to the converted horizontal and vertical pixels, the apparatus may also be configured to determine the display position according to a specification from the BD-J application.","Known technology for enlargement\/reduction processing may be applied to the above processing.","Next, the offset value stored in the offset value storage unit  of the plane shift engine  and the scaling factor referenced in step Sare referenced, and right eye shift processing is performed on the subtitle data stored in the image plane  (specifically, the area given (R) in ). This corresponds to performing shift processing with use of an offset value corresponding to the result of performing the calculation \u201cvalue in offset storage unit (offset value)\u00d7scaling factor) (step S).","Next, in step S, when a judgment is made that the scaling factor is \u201c1\u201d (when \u201cNo\u201d is judged in step S), with use of the image decoder , the subtitle data of the decoded left view subtitle stream is written in the image plane  (area given the code (R) in ) (step S).","For example when the scaling factor is 1\/1, and the video data is displayed in full screen on the display screen as shown on the right side of , the subtitle data is written in the image plane  in a corresponding size.","Next, shift processing is performed on the subtitle data stored in the image plane  (specifically the area to which (R) is given in ), with reference to the offset value stored in the offset value storage unit  of the plane shift engine . Since the scaling factor is 1, this means performing the calculation in step S, \u201cvalue in offset storage unit (offset value)\u00d7scaling factor\u201d, with \u201c1\u201d as the scaling factor value (step S).",{"@attributes":{"id":"p-0566","num":"0565"},"figref":["FIG. 25A","FIG. 41","FIG. 25A"],"b":["706","421","201"],"i":"d"},"Since the stereo mode is in the OFF state, other than left view JPEG graphics image data corresponding to the GUI parts, in a structure in which the same JPEG graphics image data corresponding to the GUI parts is shared as the left view\/right view JPEG graphics image data, this shared JPEG graphics image data is read in step S.","Next, a judgment is made as to whether the scaling factor is not \u201c1\u201d (step S). Since a specific example of the judgment has already been described in the description of step S, detailed description thereof is omitted here.","Next, in step S, when a judgment is made that the scaling factor is not \u201c1\u201d (when \u201cYes\u201d is judged in step S), the number of horizontal pixels in the generated interactive video data (number of pixel lengths in the horizontal direction on the display screen), the number of vertical pixels (number of pixel lengths in the vertical direction on the display screen) are converted to a number of horizontal pixels and a number of vertical pixels corresponding to the scaling factor (that is, enlargement\/reduction processing is performed), and the interactive video data is written, according to the converted number of horizontal pixels and converted number of vertical pixels, in the image plane  (area given the code (L) in ) so that the image data is displayed in a predetermined position on the display screen (step SC).","Since a specific example has already been described in the description of step SD, detailed description thereof is omitted here.","The offset value stored in the offset value storage unit  of the plane shift engine  and the scaling factor referenced in step SC are referenced, and left eye shift processing is performed on the subtitle data stored in the interactive graphics plane  (specifically, the area given (L) in ). This corresponds to performing shift processing with use of an offset value corresponding to the result of performing the calculation \u201cvalue in offset storage unit (offset value)\u00d7scaling factor\u201d (cutting off the numbers after the decimal point) (step SC).","Next, in step S, when a judgment is made that the scaling factor is \u201c1\u201d (when \u201cNo\u201d is judged in step S), the generated left view interactive graphics data is written in the interactive graphics plane  (area given the code (L) in ) (step SC).","Left eye shift processing is performed on the interactive graphics data stored in the interactive graphics plane  (specifically the area to which (L) is given in ), with reference to the offset value stored in the offset value storage unit  of the plane shift engine . Since the scaling factor is 1, this means performing the calculation in step SC, \u201cvalue in offset storage unit (offset value)\u00d7scaling factor\u201d, with \u201c1\u201d as the scaling factor value, that is, shifting an amount corresponding to the offset value (step SC).","When the scaling factor of the interactive graphics plane is not given consideration (that is, when the scaling factor of the interactive graphics plane is always set as \u201c1\u201d), step Sis to be performed after step S, step Sis to be performed after step S, and steps S, S, and Smay be deleted.","For example, when the interactive graphics images are graphics images corresponding to the GUI parts, in the processing of step S, the interactive graphics images can be written in the interactive graphics plane  (area given the code (L)) so that the interactive graphics images corresponding to the GUI parts are displayed in the portion of the display screen other than the portion where the composite image of the reduced video\/subtitles when full screen display is performed.","Specifically, in , in a state of the scaling factor being 1\/1 and the subtitle and video composite image being displayed as an image seen from the left eye (the left side of ), for example when an input is received for switching to a menu screen, as shown in , the scaling factor of the video and subtitle composite image becomes 1\/2, the composite image is displayed in the top left of the display screen, the GUI image corresponding with the graphics image and the director's comment are written in the interactive graphics plane (area given the code (L)), and the images written to this interactive graphics plane (area given the code (L)) is further composited, and becomes the composite image for the left eye (see the left side of ).",{"@attributes":{"id":"p-0577","num":"0576"},"figref":["FIG. 25B","FIG. 42","FIG. 23B"],"b":["808","706","421","422"],"i":["a ","c "]},"Next, in step S, when a judgment is made that the scaling factor is not \u201c1\u201d (when \u201cYes\u201d is judged in step S), the number of horizontal pixels in the generated interactive graphics data (number of pixel lengths in the horizontal direction on the display screen), the number of vertical pixels (number of pixel lengths in the vertical direction on the display screen) are converted to a number of horizontal pixels and a number of vertical pixels corresponding to the scaling factor (that is, enlargement\/reduction processing is performed), and the interactive graphics data is written in the interactive graphics plane  (area given (R) in ) according to the converted number of horizontal pixels and converted number of vertical pixels so that the interactive graphics data is displayed in a predetermined position on the display screen (step S).","Next, the offset value stored in the offset value storage unit  of the plane shift engine  and the scaling factor referenced in step S are referenced, and left eye shift processing is performed on the subtitle data stored in the interactive graphics plane  (specifically, the area given (R) in ). This corresponds to performing shift processing with use of an offset value corresponding to the result of performing the calculation \u201cvalue in offset storage unit (offset value)\u00d7scaling factor\u201d (cutting off the numbers after the decimal point) (step S).","Also, in step S, when a judgment is made that the scaling factor is \u201c1\u201d (when \u201cNo\u201d is judged in step S), the generated left view interactive graphics data is written in the interactive graphics plane  (area given the code (R) in ) (step S).","Next, the offset value stored in the offset value storage unit  of the plane shift engine  is referenced, and right eye shift processing is performed on the interactive graphics data stored in the interactive graphics plane  (specifically, the area given (R) in ). Since the scaling factor is 1, this corresponds to performing the calculation in step SC, \u201cvalue in offset storage unit (offset value)\u00d7scaling factor\u201d, with \u201c1\u201d as the scaling factor value, that is, shifting an amount corresponding to the offset value (step S).","Although calculation of the shift distance is performed each time the above flowchart is displayed, when scaling is performed by the application, at the time of the call, it is reasonable to update the plane offset E, and exchange the plane offset in the offset value storage unit for a new one, since this enables reducing the number of calculations for the shift distance.","To enable this type of processing, it is necessary for the BD-J platform  of the playback apparatus to include a scaling API. The scaling API is, for example, an interface for specifying and calling up a parameter from an application, and as a parameter, for example, the scaling factor is specified.","When the scaling factor is called up as a parameter from the application by the scaling API, the BD-J platform  updates the scaling factor stored in the scaling factor storage unit, for example.","Also, according to the above implementation, even if a scaling instruction arrives during the output processing, the shift distance between the right eye and the left eye can always be reliably synchronized without performing processing based on immediately updating the scaling factor.","Unlike embodiment 1, in which subtitle data and interactive graphics data are made to be dependent on the depth of the video stream, the present embodiment presents a variation that reduces eye fatigue in the viewers when subtitled video is being scaled, by causing the video stream to be dependent on the depth of the subtitles and GUI.","To prevent the positional relationship between a subtitle or graphic and a video image from becoming out of kilter, when executing a plane shift of a video plane, the plane offset for the video plane must be calculated in consideration of the type of value of the plane offset of the graphics plane.","To realize this type of structure, in the present embodiment, an offset value of an image plane setting stored in the display mode storage unit , for example, is read, and the apparatus is configured to be able to use this offset value as the video offset value. Also, with use of the video data stored in the video plane , the plane shift engine  performs right eye shift processing and left eye shift processing.","Furthermore, in , it is necessary to add, to the plane shift engine , a constituent element that calculates this plane offset for the video plane.  shows the internal structure of the plane shift engine  with this constituent element added.","Although in embodiment 1, the plane offset stored in the offset storage unit is referred to as the \u201cplane offset D\u201d, and the plane offset calculated for scaling is referred to as the plane offset E, the actual parameter used for the plane shift of the video plane in the present embodiment is referred to as \u201cplane offset V\u201d.",{"@attributes":{"id":"p-0591","num":"0590"},"figref":["FIG. 46","FIG. 24"],"b":["20","45","20"]},"The video plane offset calculation unit  is a module for calculating the plane offset V of the video plane during scaling of a subtitled video.","The plane shifting in embodiment 1 is considered to be only of the graphics plane, but in the present embodiment, since the video plane is also a target of plane shifting, a processing procedure for the plane shifting of the video plane is necessary. The flowchart of  shows the processing procedures for the plane offset of the video plane.",{"@attributes":{"id":"p-0594","num":"0593"},"figref":["FIG. 47A","FIG. 41"],"b":"702"},"Since structural elements given the identical codes in  as the codes in  are identical or corresponding elements, duplicated description thereof is omitted here.","In step S, when a judgment is made that the scaling factor is not \u201c1\u201d (when \u201cYes\u201d is judged in step S), step S is performed.","Next, with use of the plane offset D for the image plane, calculation of the following expression is performed, thus calculating the plane offset V for the pixels of the video plane.","Expression\n\nVideo plane pixel plane offset =Ceil(\u2212(scaling factor\u00d7))\n","Then, shift processing is performed on the left eye video based on the plane offset V for the video plane, calculated according to the formula above (step S).","The description of the shift processing with reference to  can be applied to the current processing, with the video plane substituted for the interactive graphics plane or the image plane, and offset V substituted for offset E.","Also, in the next step S, when the scaling factor is judged to be \u201c1\u201d (when \u201cNo\u201d is judged in step S), step S is performed.","Video offset processing cannot be performed when the scaling factor is 1, since in the above expression, when \u201c1\u201d is substituted for the scaling factor, the offset V becomes 0.",{"@attributes":{"id":"p-0602","num":"0601"},"figref":["FIG. 47B","FIG. 42"],"b":"804"},"Since structural elements given the identical codes in  as the codes in  and  are identical or corresponding elements, duplicated description thereof is omitted here.","In step S, when a judgment is made that the scaling factor is not \u201c1\u201d (when \u201cYes\u201d is judged in step S), the number of horizontal pixels in the decoded video data (number of pixel lengths in the horizontal direction on the display screen), the number of vertical pixels (number of pixel lengths in the vertical direction on the display screen) are converted to a number of horizontal pixels and a number of vertical pixels corresponding to the scaling factor (that is, enlargement\/reduction processing is performed), and the video data is written, according to the converted number of horizontal pixels and converted number of vertical pixels, in the video plane  (area given the code (R)) so that the video data is displayed in a predetermined position on the display screen (step S).","Next, the plane offset V for the video plane is calculated by performing the calculation of the following expression with use of the plane offset D for the image plane.","Expression\n\nPlane offset for the video plane=Ceil(\u2212scaling factor\u00d7))\n","Then, shift processing is performed on the left eye video based on the plane offset V for the video plane, calculated according to the formula above (step S).",{"@attributes":{"id":"p-0608","num":"0607"},"figref":["FIG. 45","FIG. 42","FIG. 45","FIG. 43B"],"b":"804","i":"b "},"In , when a judgment is made that the scaling factor is not \u201c1\u201d (when \u201cYes\u201d is judged in step S), step Sis performed.","Next, the plane offset V for the video plane is calculated by performing the calculation of the following expression with use of the plane offset D for the image plane.","Expression\n\nPlane offset for the video plane=Ceil(\u2212scaling factor\u00d7))\n","Then, shift processing is performed on the right eye video based on the plane offset V for the video plane, calculated according to the formula above (step S).","Also, in the next step S, when the scaling factor is judged to be \u201c1\u201d (when \u201cNo\u201d is judged in step S), step Sis performed.","Giving an offset to the video plane in this way during right eye processing and left eye processing eliminates the need to always perform shift processing of the image plane and the interactive graphics plane. Therefore, since the offset of the video is changed without changing the offsets of the image plane and the interactive graphics plane according to the scaling of the video, this structure enables making the video stream dependent on the depth of the subtitles\/GUI, thus enabling reducing eye fatigue in the viewers during scaling of a subtitled video.","The above processing does not mean that shift processing is not performed in right eye processing and left eye processing on the image plane and the interactive graphics plane when an offset is given to the video plane.","In the above flowchart, since a plane offset for the video plane is calculated, in the present embodiment, in both the video plane and the image plane, plane shifting is executed. Here, the following describes specifically, with reference to , how the positional relationship between the subtitles and moving images changes in a case that plane shifting is performed on the graphics plane, and in a case that plane shifting is performed on the video plane and the graphics plane.","The following describes a situation in which shifting is applied to both the video plane and the graphics plane.",{"@attributes":{"id":"p-0618","num":"0617"},"figref":["FIG. 48A","FIG. 48A"]},"When a subtitle having a same shift distance (40 pixels) as before scaling on a video on which scaling has been performed is composited with a video image, in comparison with the image before scaling, the position of the subtitle is greatly displaced, and the structure of the video and the subtitle is not maintained. There is a risk of this causing the difference in stereoscopic sense to be sharp and for the eyes not to be able to follow.","In view of this, the plane offset calculation  performs the above calculation, and calculates a shift distance of the video plane.","Specifically, the plane offset is set as \u221240 pixels, and the scaling factor is set as 1\/2. When this is applied to calculating the shift distance of the video plane, the plane offset of the video plane according to the following calculation is calculated as \u201c\u221220\u201d.\n\n\u2212(Scaling factor\u00d7)=40\u2212(1\/2\u00d7\u221240)=\u221220\n","Since the actual parameter for the video plane, the plane offset V, is calculated to be \u221220, the coordinates of the pixels in the video plane are moved 20 pixels in the right direction in the left view, and 20 pixels in the left direction in the right view. When scaling has been performed on the moving images and the graphics, video on which scaling has been performed is shifted 20 pixels, and in addition, the video is composited with subtitles that have been shifted 40 pixels.","Since a relative change amount between the video plane and the graphics plane is 20 pixels in the right direction in the left view, and 20 pixels in a left direction in the right view, compared to , the change amount of the coordinates of the video plane and the graphics plane is made smaller and suppressed.",{"@attributes":{"id":"p-0624","num":"0623"},"figref":"FIG. 48B"},"According to the present embodiment as described above, together with a reduction in the video, a reduction of sense of depth due to a natural shrinking of a parallax between the left eye and the right eye can be prevented by plane shift.","The present embodiment is an expanded example of embodiment 1. When scaling is performed and there is a high rate of enlargement\/reduction, there is a sharp difference in changes in depth compared to before scaling. In embodiment 1, when performing scaling, a next frame after a scaling request reflects a depth change according to the scaling factor. When the depth of the image suddenly changes sharply, this change leads to eye fatigue in the user. The present embodiment describes a variation that aims to prevent eye fatigue in the user by causing the depth to change gradually when there is a scaling request, instead of causing the next frame to suddenly change the depth at once.","To change the depth gradually, it is necessary to store both an initial plane offset and a final plane offset as plane offsets in the plane shift engine , and midway through depth change processing, it is necessary to recalculate a midway level plane offset.  shows the internal structure of the plane shift engine  with these changes added.",{"@attributes":{"id":"p-0628","num":"0627"},"figref":["FIG. 49","FIG. 4"],"b":["20","20","41","41","41","46","46","46","46"],"i":["a ","b ","a ","b ","a"]},"Previous Information Storage Unit ","The previous information storage unit stores a plane offset D specified from the offset setting , as a plane offset previous to scaling.","Subsequent Information Storage Unit ","The subsequent information storage unit stores a plane offset E subsequent to the completion of scaling, that is, a value obtained by multiplying the plane offset D by the scaling factor. Also, the when a value obtained by multiplying the plane offset D by the scaling factor is updated in the offset value storage unit, the updated offset is stored in the subsequent information storage unit ","The timing of performing this update is after updating the value of the scaling factor storage unit  when a scaling instruction (for example, when video or subtitles are shown in reduced display due to a scaling instruction from a BD-J application) has been issued.","Plane Offset Calculation Unit ","The plane offset calculation unit  converts the plane offset D indicating the plane offset stored in the previous information storage unit and the plane offset E stored in the subsequent information storage unit , respectively, to pixel coordinates. Then the difference between these two sets of pixel coordinates is calculated, a plane offset necessary at the time of scaling is calculated, and the value in the updated number of frames storage unit is divided by the value in the frame update span storage unit ","Then, the updated number of frames in the updated number of frames storage unit is divided by a frame update span in the frame update span storage unit , and the resulting quotient is multiplied by the calculated final plane offset.","In embodiment 1, the plane offset provided from the offset setting unit  is referred to as \u201cplane offset D\u201d, and the plane offset calculated according to scaling is referred to as \u201cplane offset E\u201d. However, in the present embodiment, at a time point after a number of frames i has elapsed, a plane offset used for shifting the image plane is referred to as a plane offset P(i).","The following expression is used for calculating the plane offset P(i) in the frame (i).","Expression\n\n\u201cPlane offset ()=(Plane offset before completion of scaling\u2212plane offset after completion of scaling)\u00d7(updated frame number \u00f7frame update span)\u201d.\n","Also, when the plane offset P(i) would be a decimal value, the plane offset P(i) is made to be an integer value by rounding up one decimal place.","Shift Unit ","The shift unit , when performing processing for the right eye, shifts graphics to the left when the graphics pop out to the front of the screen, and shifts graphics to the right when the graphics appear to be pulled to the back. When performing left eye processing, the shift unit  shifts graphics to the right when the graphics pop out to the front of the screen, and shifts graphics to the left when the graphics appear to be pulled to the back.","Frame Counter Unit ","The frame counter unit  fulfills a function of counting how many frames have elapsed, in frame units, after a scaling request, from a value stored in the previous information storage unit , bringing the value closer to the value stored in the subsequent information storage unit ","Specifically, the frame counter unit  includes a frame update span storage unit that stores therein a frame update span indicating how close a frame count has become to the value stored in the subsequent information storage unit from the value stored in the previous information storage unit , using frames, and an updated number of frames storage unit showing how many times frame processing has been performed after the scaling request.","The value in the frame update span storage unit is set in the playback apparatus by the manufacturer of the playback apparatus, and is not updated.","When the value in the updated number of frame storage unit is lower than the value in the frame update span storage unit , the value of the updated number of frames storage unit is incremented by 1.","This completes the description of the internal structure of the plane shift engine. The following describes the internal structure of the plane shift engine pertaining to embodiment 3.","Since the updated number of frames continues changing according to the changes in the video frames targeted for playback, to implement a playback apparatus that performs the processing of the present embodiment, processing pertaining to the updated number of frames must be added to the processing procedures of the playback apparatus of the 3DAV stream described in embodiment 1. This type of processing pertaining to the updated number of frames includes processing to reset the updated number of frames, and processing to increment the updated number of frames.  shows the processing procedures for 3D display of a 3DAV stream after adding these types of processing pertaining to the updated number of frames.",{"@attributes":{"id":"p-0649","num":"0648"},"figref":"FIG. 50"},"In , please note that as a difference from , steps S to S have been added.","Structural elements that have been given identical codes as in  are identical or corresponding to the structural elements in .","The present flowchart is for executing the steps of S, S, S, S, S, S, and S.","In the above steps, the processing of sequentially executing left eye processing (step S) and right eye processing (step S) is continued until frame output ends (\u201cNo\u201d in step S). In the left eye processing of this loop, the coordinates of the pixels are moved in the image plane by the shift distance P(i) of the pixels corresponding to the number of frames i. Also, in the right eye processing, the coordinates of the pixels are moved in the image plane by the shift distance P(i) of the pixels corresponding to number of frames i. At this time, the shift distance P(i) corresponding to the left eye processing and the shift distance P(i) corresponding to the right eye processing are the same, but the direction of the shift is different.","First, the updated number of frames i is set to 0 (step S).","Next, left eye processing is performed (step S).","At this time, in the left eye processing, when calculating the image plane offset (shift distance), P(i) is calculated with use of the plane offset D from before scaling described later, the plane offset E from after completion of the scaling, and the update span.","Next, right eye processing is performed (step S).","At this time, when calculating the image plane offset (shift distance) in right eye processing, the above-described P(i) is used.","Step S is a judgment as to whether the updated frame number (i) is smaller than the frame updated span, and if the updated frame number (i) is smaller, the updated number of frames i is incremented in step S. If the updated frame number (i) is equal or larger (that is, if \u201cNo\u201d is judged in step S), processing advances to step S.","In step S, a judgment is made as to whether a next frame exists.","If a next frame does not exist, that is, if \u201cNo\u201d is judged in step S, the 3D display processing for the 3DAV stream ends.","If the next frame does not exist, that is, if \u201cYes\u201d is judged in step S, another calculation is made with use of the updated number of frames P(i) in the processing of steps S and S.","The updated number of frames i increases by one each time the judgment of step S is made until arriving at the update span, and after arriving at the updated span, the value becomes constant.","The updated frame (i) is continuously updated as the playback of the video stream advances, and accordingly, since the plane offset E is also updated, it is necessary to execute the plane shift in the present embodiment each time the updated frame number is updated. Along with this update of the updated number of frames, the plane offset is recalculated, and  shows the procedures for executing the platform based on the recalculated plane offset.",{"@attributes":{"id":"p-0665","num":"0664"},"figref":"FIG. 51"},"Since there are many common portions between left eye processing and right eye processing in the processing procedures for performing plane shift on the image plane in , such processing is described using the same flowchart. Note that when performing shift processing for the left eye, the target of shift processing is the subtitle data stored in the area given the code (L) in the image plane, and when performing shift processing for the right eye, the target of shift processing is the subtitle data stored in the area given the code (R) in the image plane.","The image plane is acquired, and the decoded images are written in the image plane (step S).","Then, the plane offset P(i) for the frame (i) is calculated according to the following calculation.","The plane offset P(i):\n\nPlane offset ()=(plane offset from before completion of scaling\u2212plane offset from after completion of scaling)\u00d7updated number of frames \u00f7frame update span)\n","The pixel coordinates in the image plane are shifted according to the plane offset P(i) calculated thus (step S). Note that in step S, the shifting is performed in opposite directions for the left eye shift processing and the right eye shift processing.","Since each time the loop shown in  is performed once, the updated number of frames i is incremented and the plane offset P(i) is calculated based on the updated number of frames i in step S, it is apparent that the larger the updated number of frames i becomes, the larger the change in the plane offset P(i). It is apparent also that if the updated number of frames i reaches the frame update span, the updated number of frames i is reset to \u201c0\u201d.","As described above, the updated number of frames i is updated along with the progress of playing back the video stream, and it is apparent that the plane offset P(i) is also updated along with this.  shows how the updated number of frames and the frame offset P(i) changes temporally. The following describes, with reference to the specific example of , the temporal phases of the plane offset P(i).",{"@attributes":{"id":"p-0673","num":"0672"},"figref":["FIG. 52","FIG. 52"],"b":["0","1","2","3","0","1","2","3"]},"The expressions for each frame indicate what value the frame offset P(i) will be when the updated number of frames i has been given the values \u201c1\u201d, \u201c2\u201d, and \u201c3\u201d for identifying the frames , , , and .","In this specific example, assume that the values \u221240 and \u221220 are stored in the previous information storage unit and the subsequent information storage unit. \u221240 is the plane offset D, and \u221220 is the plane offset P(i) obtained after adding a pixel change calculation to the plane offset. In the present example, the depth gradually changes over three frames, and the value \u201c3\u201d is stored in the frame update span storage unit . The value \u201c1\u201d is stored in the updated number of frames storage unit . This indicates that processing on a first frame is performed after a scaling instruction. This stored value is incremented to \u201c2\u201d and \u201c3\u201d as the frames elapse. Then, since the scaling request was for the scaling factor 1\/2, the value 1\/2 is set in the scaling factor storage unit .","In the specific example, based on the information in the plane shift engine and the difference between the previous information storage unit and the subsequent information storage unit, it is apparent that over 3 frames, it is necessary to move the coordinates \u221220 pixels.","Frame ","In frame , when the above expression is applied giving \u201c1\u201d as the value of the updated number of frames i, the updated number of frames i\u00f7the frame updated span is \u201c1\/3\u201d, and \u201c\u22127\u201d is obtained for the pixel frame offset P() as a result of the calculation (\u221240\u2212(1\/2\u00d7\u221240)\u00d71\/3). Accordingly, in frame , at the time of the left view, the image plane is shifted 7 pixels in the right direction, and at the time of the right view, the image plane is shifted 7 pixels in the left direction.","Frame ","In frame , when the above expression is applied giving \u201c2\u201d as the value of the updated number of frames i, the updated number of frames i\u00f7the frame updated span is \u201c2\/3\u201d, and \u201c\u221214\u201d is obtained for the pixel frame offset P() as a result of the calculation (\u221240\u2212(1\/2\u00d7\u221240)\u00d72\/3). Accordingly, in frame , at the time of the left view, the image plane is shifted 14 pixels in the right direction, and at the time of the right view, the image plane is shifted 14 pixels in the left direction.","Frame ","In frame , when the above expression is applied giving \u201c3\u201d as the value of the updated number of frames i, the updated number of frames i\u00f7the frame updated span is \u201c3\/3\u201d, and \u201c\u221220\u201d is obtained for the pixel frame offset P() as a result of the calculation (\u221240\u2212(1\/2\u00d7\u221240)\u00d73\/3). Accordingly, in frame , at the time of the left view, the image plane is shifted 20 pixels in the right direction, and at the time of the right view, the image plane is shifted 20 pixels in the left direction.","In this specific example, the coordinates in each frame are moved the shift distance corresponding to 1\/2 of the \u221220 pixels (7 pixels), and in the third frame, the coordinates are shifted \u221220 pixels. From the fourth frame onward, processing continues with the shift number preserved from the third frame. This continues until a judgment is made in step S that a next frame does not exist.","According to the present embodiment as described above, changing the depth of the subtitles during scaling not suddenly but gradually enables reducing eye fatigue in the user.","The plane shift engine  is required to calculate a shift distance for performing plane shift according to some type of parameter for stereoscopic view. It is preferable to use a plane offset for stereoscopic view incorporated in MVC (Multi View Codec) video streams for calculating this shift distance. Note that the present invention is not limited to this, and it is also preferable that the parameter is provided to the plane shift engine  through various information elements that the content provider provides to the playback apparatus through the BD-ROM.","The following describes processing for setting the plane offsets with reference to .",{"@attributes":{"id":"p-0687","num":"0686"},"figref":"FIG. 53"},"The following variations (AA) to (FF) exist as methods for providing the plane offset.","(AA) The writing control unit can update the plane offset in the plane setting in the display mode storage unit  by the method call of the setOffsetValue by the BD-J application.","The above-stated offset can be obtained by the BD-J application in the getOffsetValue method.","When the BD-J application calls the API, and the plane offset is embedded in the BD-J application, the flexibility is high, but the ability to change offset in real-time according to depth of the video is difficult. When the plane shift engine  refers to the offset specified by the BD-J application, the plane offsets specified by the BD-J application is stored in the display mode storage unit  (for example, the plane offset set in the image plane, and the plane offset set in the interactive graphics plane) are read by the offset setting unit  and set in the offset value storage unit  in the plane shift engine . The plane shift engine  automatically shifts the plane in the horizontal direction based on the plane offset values at the time of the composition.","The following describes timing of the setting.","At any time after the application has been started, the started application can call the API that changes the depth of data held in each of the image plane  and the interactive graphics plane . This is whether the video is stopped or not. In either case (video is played or not at the time of API call), it is possible to ensure that the shift distance for the right view is in synchronization with the shift distance for the left view, by controlling timing of setting the plane offset value (from the display mode storage unit ) in the plane shift engine .","Specifically, the writing control unit does not update the plane offset value in the plane shift engine  at timing that the BD-J application calls the setOffset( ). It is checked whether or not the writing control unit has updated the plane offset in the display mode storage unit  at a time when one frame worth of the left-view and one frame worth of the right-view data have been outputted. In accordance with the update, the writing control unit updates the offset value of the plane shift engine . Thus, it is possible to ensure that the shift distance for the right-view is in synchronization with the shift distance for the left view. When the shift distance for the right view is not in synchronization with the shift distance for the left view, the display appears in a way that is not intended by the content creator, which results in providing the unpleasant outputted video to the viewer.","(BB) When the BD-ROM is loaded, or when virtual package is constructed, the writing control unit updates the plane offset value in the plane shift engine  read from the meta file (ZZZZZ.xml) stored in the META directory specified by the BD-ROM or the virtual package.","(CC) When reading and decoding of the MVC video stream starts, the writing control unit updates, to the plane offset value in the plane shift engine , the plane offset embedded in a header area of each of the PES packets that compose the MVC video stream. Preferably, when output of one frame worth of the left-view data and one frame worth of the right-view data have completed, the writing control unit sets, as a plane offset, the offset corresponding to the next frame to be processed to a plane offset value in the read buffer .","In case the plane offset is embedded in the MVC video stream, since offset can be set for each video frame, the plane offset can be shifted dynamically but the cost of authoring can become a burden.","(DD) When the reading and decoding of the transport stream starts, the writing control unit updates the plane offset embedded in the header area of the transport stream to the plane offset value in the plane shift engine . Preferably, when output of one frame worth of the left-view data and one frame worth of the right-view data has completed, the writing control unit sets, in the read buffer , the offset corresponding to the frame being processed as a plane offset value in the plane shift engine .","In a case where the plane offset value is embedded in the stream, the offset value may be shifted dynamically with the video. Therefore, the real time property is high, but the cost of authoring can become a burden.","(EE) When the current PlayList is determined, and the PlayList information is loaded, the plane offset of the PlayList information is set to a plane offset value in the plane shift engine . When the PlayList information is used for determining the offset, flexibility is high at the time of authoring. However, compared to the case where the offset is embedded in the stream, it is not possible to shorten the time interval from a time point at which an offset is set to a time point at which the offset is updated. Therefore, the real-time property is a little poor.","(FF) Receiving the user operation that changes the level of the depth of image plane  and the data held in the interactive graphics plane  by the operation of the button attached to a remote control or a device (i.e. the depth is expressed by the three levels such as \u201cdistant\u201d, \u201cnormal\u201d and \u201cclose\u201d, or depth is expressed by the numerical values such as \u201chow many cm\u201d or \u201chow many mm\u201d), the UO detection module  updates the plane offset value in the plane shift engine  with use of the user operation. This update increases or decreases the plane offset depending on the number of times the right-arrow key of the remote control  is pressed. Thus, the graphics can be displayed closer to the viewer or distant from the viewer by changing the number of times the right arrow or the left arrow is pressed. This enhances the operational property.","The shift distance by which the image plane  and the interactive graphics plane  are shifted is obtained by performing the calculation based on the plane offset in the plane shift engine  after the above-stated processing is performed. The reason why the calculation processing is necessary is that while the shift distance of the pixel data pieces in each of the image plane  and the interactive graphics plane  is defined by the number of pixel lengths, the plane offset is often defined by units different from units of pixels.","If the plane offset is embedded in the MVC video stream, the plane offset calculation unit  calculates the shift distance by which the coordinates of the pixel data pieces held in the graphics plane based on the shift distance shown by the plane offset that the offset setting unit have stored in the plane shift engine , when output of one frame worth of the left-view data and one frame worth of the right-view data have completed.","This concludes the description of the various cases where the offset setting unit  sets the plane offset. The following describes a value provided by the user operation or the application.","The value provided from the user operation or the application may not be the actual shift distance in pixels, but is possibly an adjusted value from the value set in the current-state plane shift engine . In such case, the calculation of the plane offset value needs to be executed. For example, when the right-arrow key is pressed three times or a value \u201c3\u201d of a numerical value key is inputted, the plane shift engine  adds this value to the plane offset set in the apparatus, and calculates the plane offset based on the added value. When the value is a \u201c+\u201d value, the shift distance is decreased, and the graphics appears to be more distant from the viewer, for example. When the value is a \u201c\u2212\u201d value, the shift distance is increased, and the graphics appears to be closer to the viewer, for example.","The following describes a change in depth.","As described in the above, when graphics such as subtitles and GUIs are shifted along the horizontal axis, the depth is changed by changing a shift distance for the subtitles, and shift distance for the GUI along the horizontal axis. For example, the closer the left-view subtitles and the right-view subtitles become in a predetermined direction, the closer the graphics are displayed to the screen. The more distant the left-view subtitles and the right-view subtitles become from one another in an opposite direction, the more distant the graphics are displayed from the screen. However, the relationship between the plane offset and the pop-out level is greatly affected by the number of inches of the TV and the characteristic of the liquid crystal of the 3D glasses. By setting stated coefficients in the terminal in advance, a value obtained by multiplying the plane offset by this coefficient can be used for the shifting in order to realize such an optical effect. Multiplying the plane offset by the coefficient in such a manner makes it possible to adjust the pop-out level of the stereoscopic video based on the characteristics of the TV, the playback apparatus  and the liquid crystal of the 3D glasses.","The present embodiment describes what type of hardware is used in the playback apparatus described in the previous embodiments.",{"@attributes":{"id":"p-0709","num":"0708"},"figref":["FIG. 54","FIG. 54"],"b":["200","101","102","103","104","105","106","107","200"]},"The front end unit  is a data input source. In a figure described previously, the front end unit  includes a BD drive and a local storage , for example.","The system LSI  is composed of logic elements, and is a core part of the playback apparatus . This system LSI includes therein at least a demultiplexer , video decoders and , image decoders and , an audio decoder , a playback state\/setting register (PSR: Player Status\/Setting Register) set , a playback control engine , a composition unit , a plane shift engine  and an offset setting unit .","The memory device  is composed of arrays of memory devices such as an SDRAM. The memory device  includes, for example, a read buffer , a read buffer , a dynamic scenario memory , a still scenario memory , graphics planes  and , the video plane  and the background plane .","The back end unit  is a connection interface that connects internal parts of the playback apparatus  with other devices, and includes an HDMI transmission and reception unit .","The nonvolatile memory  is a readable and writable recording medium, and is a medium that can hold recorded contents without needing power source supply. The nonvolatile memory  is used for backup of information on a display mode stored in a display mode storage unit  (described in the following). A flash memory, an FeRAM or the like may be used as this nonvolatile memory .","The host microcomputer  is a microcomputer system that is composed of a ROM a RAM, and a CPU. Programs for controlling the playback apparatus are recorded on the ROM. The programs in the ROM are written in the CPU, and by cooperation between the program and the hardware resources, the functions of the HDMV module , the BD-J platform , the mode management module , the UO detection module , and the playback control engine  are realized.","The following describes the system LSI.","The system LSI is an integrated circuit obtained by implementing a bare chip on a high-density substrate and packaging them. The system LSI is also obtained by implementing a plurality of bare chips on a high-density substrate and packaging them, so that the plurality of bare chips have an outer appearance of one LSI (such a system LSI is called a multi-chip module).","The system LSI has a QFP (Quad Monoscopic view Package) type and a PGA (Pin Grid Array) type. In the QFP-type system LSI, pins are attached to the four sides of the package. In the PGA-type system LSI, a lot of pins are attached to the entire bottom.","These pins function as an interface with other circuits. The system LSI, which is connected with other circuits through such pins as an interface, plays a role as the core of the playback apparatus .","Such a system LSI can be embedded into various types of devices that can play back images, such as a television, game machine, personal computer, one-segment mobile phone, as well as into the playback apparatus . The system LSI thus greatly broadens the use of the present invention.","It is desirable that the system LSI conforms to the Uniphier architecture.","A system LSI conforming to the Uniphier architecture includes the following circuit blocks.","Data Parallel Processor (DPP)","The DPP is an SIMD-type processor where a plurality of elemental processors perform a same operation. The DPP achieves a parallel decoding of a plurality of pixels constituting a picture by causing operating units, respectively embedded in the elemental processors, to operate simultaneously by one instruction.","Instruction Parallel Processor (IPP)","The IPP includes: a local memory controller that is composed of instruction RAM, instruction cache, data RAM, and data cache; processing unit that is composed of instruction fetch unit, decoder, execution unit, and register file; and virtual multi processing unit that causes the processing unit to execute a parallel execution of a plurality of applications.","MPU Block","The MPU block is composed of: peripheral circuits such as ARM core, external bus interface (Bus Control Unit: BCU), DMA controller, timer, vector interrupt controller; and peripheral interfaces such as UART, GPIO (General Purpose Input Output), and sync serial interface.","Stream I\/O Block","The stream I\/O block performs data input\/output with the drive device, hard disk drive device, and SD memory card drive device which are connected onto the external busses via the USB interface and the ATA packet interface.","AV I\/O Block","The AV I\/O block, which is composed of audio input\/output, video input\/output, and OSD controller, performs data input\/output with the television and the AV amplifier.","Memory Control Block","The memory control block performs reading and writing from\/to the SD-RAM connected therewith via the external buses. The memory control block is composed of internal bus connection unit for controlling internal connection between blocks, access control unit for transferring data with the SD-RAM connected to outside of the system LSI, and access schedule unit for adjusting requests from the blocks to access the SD-RAM.","The following describes a detailed production procedure. First, a circuit diagram of a part to be the system LSI is drawn, based on the drawings that show structures of the embodiments. And then the constituent elements of the target structure are realized using circuit elements, ICs, or LSIs.","As the constituent elements are realized, buses connecting between the circuit elements, ICs, or LSIs, peripheral circuits, interfaces with external entities and the like are defined. Further, the connection lines, power lines, ground lines, clock signals and the like are defined. For these definitions, the operation timings of the constituent elements are adjusted by taking into consideration the LSI specifications, and bandwidths necessary for the constituent elements are reserved. With other necessary adjustments, the circuit diagram is completed.","After the circuit diagram is completed, the implementation design is performed. The implementation design is a work for creating a board layout by determining how to arrange the parts (circuit elements, ICs, LSIs) of the circuit and the connection lines onto the board.","After the implementation design is performed and the board layout is created, the results of the implementation design are converted into CAM data, and the CAM data is output to equipment such as an NC (Numerical Control) machine tool. The NC machine tool performs the SoC implementation or the SiP implementation. The SoC (System on Chip) implementation is a technology for printing a plurality of circuits onto a chip. The SiP (System in Package) implementation is a technology for packaging a plurality of circuits by resin or the like. Through these processes, a system LSI of the present invention can be produced based on the internal structure of the playback apparatus  described in each embodiment above.","It should be noted here that the integrated circuit generated as described above may be called IC, LSI, ultra LSI, super LSI or the like, depending on the level of the integration.","It is also possible to achieve the system LSI by using the FPGA (Field Programmable Gate Array). In this case, a lot of logic elements are to be arranged lattice-like, and vertical and horizontal wires are connected based on the input\/output compositions described in LUT (Look-Up Table), so that the hardware structure described in each embodiment can be realized. The LUT is stored in the SRAM. Since the contents of the SRAM are erased when the power is off, when the FPGA is used, it is necessary to define the Config information so as to write, onto the SRAM, the LUT for realizing the hardware structure described in each embodiment.","In the embodiment, the invention is realized by middleware and hardware corresponding to the system LSI, hardware other than the system LSI, an interface portion corresponding to the middleware, an interface portion to intermediate between the middleware and the system LSI, an interface portion to intermediate between the middleware and the necessary hardware other than the system LSI, and a user interface portion, and when integrating these elements to form the playback apparatus, particular functions are provided by operating the respective elements in tandem.","Appropriately defining the interface corresponding to the middleware and the interface for the middleware and the system LSI enables parallel, independent development of the user interface portion, the middleware portion, and the system LSI portion of the playback apparatus respectively, and enables more efficient development. Note that there are various ways of dividing up the respective interface portions.","Notes","This concludes the description of the best modes of carrying out the invention known to the applicant at the time of application. However, further improvements and variations related to the technical topics indicated below can be added. Whether to carry out the invention as indicated in the embodiments or to use these improvements and variations is arbitrary, and is left to the discretion of the one who carries out the invention.","Embedding a Display Function Flag","A display function flag for identifying whether a stream targeted for playback is 2D or 3D exists on the BD-ROM. In the present embodiment, the display function flag is embedded in PlayList (PL) information. However, the present invention is not limited to this, and the display function flag may be embedded in a different form on the BD-ROM, provided that the flag is information that can identify the stream and whether the stream is 2D or 3D.","Physical Form of Video Plane ","Although an example has been described in which the left eye plane and the right eye plane included in the video plane  shown in  are physically separated memories, the present invention is not limited to this, and for example, areas for the left eye plane and the right eye plane may be provided in one memory, and video data corresponding to these areas may be written in the respective planes.","Physical Form of Image Plane ","Although an example has been described in which the left eye plane and the right eye plane included in the video plane  shown in  are physically separated memories, the present invention is not limited to this, and for example, areas for the left eye plane and the right eye plane may be provided in one memory, and video data corresponding to these areas may be written in the respective planes.","Physical Form of Interactive Graphics Plane ","Although in , the interactive graphics plane  is shown as a left eye area (given the code (L)) and a right eye area (given the code (L)), the present invention is not limited to this. For example, physically separate areas may be used for both the left eye area (given the code (L)) and the right eye area (given the code (R)) of the interactive graphics plane .","Method of Adjusting Offset","The description of  take as a subject an example of, when the stereo mode is OFF, and the offset of the background and video area is not adjusted (that is, when the offset is 0, more specifically, when the position in the display screen is displayed). The reason is to simplify the above description. Accordingly, the present invention is not limited to the above description, and for example, the apparatus may be configured to adjust the offsets so that, for example, the video is positioned farther back than the graphics images (subtitles), and the background data is positioned farther back than the video.","Resolution to be Supported by Background Plane , Image Plane , Interactive Graphics Plane","When the playback apparatus is in 3D display mode, the background plane , the image plane , and the interactive graphics plane, in addition to the resolution of 2D mode, also may support a resolution of 1920\u00d72160 or 1280\u00d71440 pixels. In this case, the aspect ratio for 1920\u00d72160 or 1280\u00d71440 pixels becomes the aspect ratio of 16\/18. The upper half can be used as an area for the left eye, and the lower half can be used as an area for the right eye.","Target of Plane Offset Setting","The plane offset may have, for example, two different shift distances for the image plane and the interactive graphics plane, and a distinction may be made between the two shift distances. If the playback apparatus includes a setup function, \u201c0\u201d is set as a default. In this case, graphics such as subtitles and GUI are displayed in a position on the display screen, and the effect of popping out of the screen is not achieved.","Exclusion from Composition by Composition Unit","When composition is performed in the order of 2D still image data, 2D video data, 2D graphics data (subtitle data), and 2D interactive graphics, if the video data is displayed in full screen, the 2D still image data may be excluded from the composition processing.","Flag Storage in Display Mode Storage Unit  Variation","A flag indicating whether to perform 2D display or 3D display in the display mode storage unit  may be stored by the playback state register set , or may be stored by both the display mode storage unit  and the playback state register set .","Creating a Calculation Table","Although there are many possible algorithms for converting a plane offset to pixel coordinates, it is preferable to use an algorithm dependent on the size or resolution of the display device to display the video, or an algorithm dependent on the size of the video to be displayed.","Also, a playback apparatus that is low on device resources may not only calculate according to a conversion algorithm, but also may prepare a scaling correspondence table, and convert the plane offsets to the pixel coordinates according to the table. Specifically, the magnification rate of the scaling factor may be limited to several patterns, and the pixel coordinates corresponding to the scaling factors may be stored in advance in a table. When a scaling factor is specified, the corresponding pixel coordinates may be transmitted back to the shift unit -D.","As specific values for the plane offset, three levels of values may be set, such as 50 pixels, 30 pixels, and 25 pixels. For scaling factors, three levels of values may be set, namely 2 times, 1\/2 times, and 1\/4 times. By limiting the plane offset and the scaling factor to these values, the calculation algorithm becomes simpler, and creating the table for the above calculation enables simplifying the implementation of the plane offset calculation unit .","Duplexing","Although the structure shown in the drawings includes one each of the video decoders and , the video plane, and the image plane addition unit, the apparatus may be configured to have two of each unit, so that processing can be performed in parallel for both the left eye image and the right eye image.","Re-Use","When storing an image plane in which decoding and scaling has been performed, this image plane may be reused. Note that when the image plane is reused, it is necessary to return a shifted image plane to the original position thereof.","Pixels in 2D","Furthermore, in a case that a 2D video stream and the depth of screen pixels in frame units of the 2D video stream are treated as input, a depth of a frontmost pixel may be extracted, and the extracted depth may be used as the plane offset.","Synchronization","Separate flags may be provided for synchronizing the left eye and the right eye, and the apparatus may be configured to only perform right eye scaling processing in the case that scaling processing has been performed for the left eye.","Factor Variations","As scaling factors, a specific specification may be made of pixel coordinates from after scaling has completed. For example, a direct specification such as a horizontal length of 1000 and a vertical length of 250 may be made.","When the scaling factor is a specific number of pixel lengths, it is preferable to calculate a ratio between before scaling and after scaling on a horizontal axis, and to obtain a new image offset by multiplying the ratio with the image offset.","Timing of Display","Although in the structure of the present embodiment, it is possible to change the depth gradually after the scaling instruction has been received, the apparatus may instead be configured to invalidate the display of subtitles, and after a certain amount of frames has elapsed, to display the video at shift pixel coordinates calculated based on a value in the subsequent information storage unit. In this method, instead of calculating a shift distance according to frames, shift and display is performed according to a pixel shift distance that can be calculated by the subsequent information storage unit, at a timing when a value in the updated number of frames storage unit arrives at a value in the frame update span storage unit. This structure enables achieving an effect of absorbing any difference in stereoscopic sense, and thus reducing eye fatigue in the user, since when the depth of the video stream after scaling is changed, the subtitles are displayed in a state that the user is accustomed to.","Mode of Recording Streams","Streams arranged on the BD-ROM may be recorded so that the right eye stream and the left eye stream are recorded separately, or may be embedded in a single stream file.","Stereoscopic Method","In contrast to, for example, displaying a normal 2-dimension movie as 24 frames per second, the parallax image method that is a premise of embodiment 1 requires displaying 48 frames per second as a total of the left eye images and the right eye images, in order to display the left eye images and the right eye images alternating on a time axis. Accordingly, this method is optimal for a display apparatus that is comparatively quick to rewrite each screen. Stereoscopic view using this type of parallax is already generally adopted in play equipment at amusement parks, etc. Since the technology for this type of stereoscopic view has been established, it is expected to be put to practical use in the home soon. Methods for achieving stereoscopic view using parallax images are not limited to this, and additionally other technologies have been proposed such as using a method of 2-color separation. Although examples have been used in the present embodiment of a successive separation method or a polarization separation method, provided that parallax images are used, the invention is not limited to these two methods.","The display apparatus  is also not limited to using lenticular lenses, but may instead use a device having a similar function, for example a liquid crystal element. Alternatively, stereoscopic view may be realized by providing a vertical polarizing filter for pixels for the left view, and a horizontal polarizing filter for pixels for the right eye, and by the viewer viewing the screen of the display apparatus with use of polarizing glasses including a vertical polarizing filter for pixels for the left view, and a horizontal polarizing filter for pixels for the right eye.","Image Data","It is preferable for the image data described in the embodiments to be a Presentation Graphics stream.","A Presentation Graphics stream (PG stream) is a graphics stream indicating graphics to be precisely synchronized with subtitles, etc. and pictures of a movie, and a plurality of language streams exist such as English, Japanese, and French.","The PG stream is composed of a series of functional segments, namely, PCS (Presentation Control Segment), PDS (Pallet Define Segment), WDS (WindowDefineSegment), and ODS (Object Define Segment). The ODS (Object Define Segment) is a segment that defines a graphics object that has been compressed by run-length compression with use of a pixel code and the run length. The PDS (Palette Definition Segment) is a functional segment that defines a correspondence relationship between the respective pixel codes and luminance (Y), a red color difference (Cr), a blue color difference (Cb), and a transparency value (\u03b1 value). The PCS (PresentationControlSegment) is a functional segment that defines details of display sets in a graphics stream and defines screen composition with use of a graphics object. The screen composition may be set to Cut-In\/Out, Fade-In\/Out, Color Change, Scroll, or Wipe-In\/Out, and acting in conjunction with PCS screen composition enables achieving an effect of displaying a next subtitle while the current subtitle gradually disappears.","When playing back a graphics stream, the graphics decoder realizes the precise synchronization described above by a pipeline of simultaneously performing processing to decode an ODS belonging to a certain display set and write a graphics object in an object buffer, along with processing to write a graphics object, obtained by decoding the ODS belonging to the preceding display set, in the plane memory from the object buffer. Since a precise synchronization with the video images is realized by performing the decode operation using the pipeline, use of the PresentationGraphics stream is not limited to playback of text such as subtitles. A PresentationGraphics stream can be used for any type of graphics playback for which precise synchronization is required, such as displaying a mascot character and causing the mascot character to move in synchronization with the video images.","Although not multiplexed with a transport stream file, in streams that achieve subtitles, aside from PG streams, there are text subtitle (textST) streams. TextST streams are streams that achieve the content of subtitles with use of character codes. A combination of these PG streams and text ST streams is called a \u201cPGTextST stream\u201d in BD-ROM standards. Since text subtitle (textST) streams are not multiplexed with AV streams, before playing back the text subtitle streams and the font used for developing the text of the subtitles, preloading to the memory is necessary. Also, in the text subtitle streams, for each language code, a capability flag indicating whether the language can be correctly displayed is set in the playback apparatus. Meanwhile, it is not necessary to refer to the capability flags to play back subtitles using the PresentationGraphics stream. The reason is that the subtitles in the PresentationGraphics stream need only uncompress the run length-compressed subtitles.","The playback target of the PresentationGraphics stream may be subtitle graphics chosen according to a language setting on the apparatus side. Since this structure enables achieving a display effect of using text such as is displayed in the movie images on the current DVD by subtitle graphics displayed according to the language setting on the apparatus side, the practical value is great.","The target of playback by the PresentationGraphics stream may be subtitle graphics selected according to a display setting on the apparatus side. That is, graphics for various display modes such as wide vision, pan scan, and letterbox are recorded on a BD-ROM. The apparatus selects which display mode to use according to the settings of the television to which the apparatus is connected, and displays the subtitle graphics in the selected display mode. In this case, the presentation improves when a display effect is implemented based on the PresentationGraphics stream in contrast to subtitle graphics displayed thus. Since this structure enables achieving a display effect of using text such as is displayed in the movie images by subtitles displayed according to the language setting on the apparatus side, the practical value is great. Also, the PresentationGraphics stream may be used for karaoke, and in this case, the PresentationGraphics stream may realize the display effect of changing the color of the subtitles according to the progress of a song.","(Implementation as a Program)","The application program described in the embodiments can be made as described below. First, the software developer, with use of a programming language, writes a source program to realize the content of the flowcharts and the functional structural elements. When writing the source program that embodies the content of the flowcharts and the functional structural elements, the software developer uses the class structures, variables, array variables, and external function calls to write the program in accordance with the syntax of the programming language.","The written source programs are given as files to a compiler. The compiler translates the source programs and creates an object program.","The translation by the compiler is made up of the processes of syntax analysis, optimization, resource allocation, and code generation. Syntax analysis involves performing lexical analysis and semantic analysis of the source programs, and converting the source programs to an intermediary program. Optimization involves performing operations to divide the intermediary program into basic blocks, analyze the control flow of the intermediary program, and analyze the data flow of the intermediary program. In resource allocation, to improve suitability with a command set of a targeted processor, variables in the intermediary program are allocated to a register or a memory in a targeted processor. Code generation is performed by converting the intermediary commands in the intermediary program into program code, and obtaining an object program.","The object program generated here is made up of one or more program codes for executing, on a computer, the steps of the flowcharts and the various processes carried out by the functional structural elements in the embodiments. Here, program code may be any of various types such as native code of a processor or JAVA byte code. There are various formats for realization of the steps by the program code. If it is possible to use external functions to realize the steps, call texts that call such functions become program code. Also, there are cases in which a program code for realizing one step is attributed to separate object programs. In a RISC processor in which command types are limited, the steps of the flowcharts may be realized by compositing calculation operation commands, logical calculation commands, branch instruction commands, etc.","When the object programs have been created, the programmer starts up a linker. The linker allocates the object programs and library programs to memory spaces, composites the object programs and library programs into one, and generates a load module. The load module generated thus is anticipated to be read by a computer, and causes the computer to execute the processing procedures and functional structural components shown in the flowcharts. The programs may be provided to users by being recorded on a recording medium that is readable by a computer.","Recording Media Variations","The recording media of the embodiments include all types of package media such as optical disks, semi-conductor memory cards, etc. The recording media of the embodiments described, as an example, an optical disk (for example, a preexisting read-only optical disk such as a BD-ROM or a DVD-ROM). However, the present invention is not limited to this. For example, it is possible to implement the present invention by writing 3D contents, including data that is necessary for implementing the present invention and has been broadcast or distributed over a network, with use of a terminal device fulfilling a function of writing 3D contents (for example, the function may be included in the playback apparatus, or may be included in an apparatus other than the playback apparatus), on a writable optical disk (for example, a preexisting writable optical disk such as BD-RE or DVD-RAM).","Structure of Video Decoders","Although in the embodiments, it was described that the function of the video decoder is fulfilled by the left eye video decoder and the left eye video decoder , these may be incorporated as one.","Implementation as Semiconductor Memory Card Recording Apparatus and Playback Apparatus","The following describes implementing the data structure described in the embodiments as a recording apparatus that records data in a semiconductor memory, and a playback apparatus that plays back the data.","First, the following describes the technology this is premised on, which is a mechanism for protecting a copyright of data recorded on a BD-ROM.","From a standpoint, for example, of improving the confidentiality of data and copyright protection, there are cases in which portions of the data recorded on the BD-ROM are encoded as necessary.","For example, the encoded data of the data recorded on the BD-ROM may be, for example, data corresponding to a video stream, data corresponding to an audio stream, or data corresponding to a stream that includes both video and audio.","The following describes deciphering of encoded data that is among the data recorded on the BD-ROM.","In the semiconductor memory card\/playback apparatus, data corresponding to a key necessary for deciphering encoded data on the BD-ROM (for example, a device key) is recorded in the playback apparatus in advance.","Meanwhile, data corresponding to the key necessary for deciphering encoded data (for example, an MKB (media key block) corresponding to the device key) and data in which the key itself, for deciphering the encoded data, is encoded (for example an encoded title key corresponding to the device key and the MKB), is recorded on the BD-ROM. Here, the device key, the MKB, and the encoded title key correspond to each other, and furthermore correspond to an identifier (for example, a volume ID) written in an area that cannot be normally copied on the BD-ROM (an area called BCA). If this composition is not correct, the code cannot be deciphered. Only if the composition is correct, the key necessary for deciphering the code (for example, a decoded title key obtained by decoding the encoded title key based on the device key, the MKB and volume key, can be elicited, and with use of the key necessary for the encoding, the encoded data can be deciphered.","When the inserted BD-ROM is played back in the playback apparatus, encoded data cannot be played back unless the BD-ROM includes a device key that is paired with a title key or MKB (or corresponds to a title key or MKB). The reason is that the key necessary for deciphering the encoded data (the title key) is itself encoded when recorded on the BD-ROM (as an encoded title key), and if the composition of the MKB and the device key is not correct, the key necessary for deciphering the code cannot be elicited.","On the other hand, the playback apparatus is configured so that, if the composition of the encoded title key, MKB, device key, and volume ID is correct, the video stream is decoded, for example with use of the key necessary for deciphering the code (the decoded title key obtained by decoding the encoded title key based on the device key, the MKB and the volume ID), and the audio stream is decoded by the audio decoder.","This completes the description of the mechanism for protecting the copyright of data recorded on the BD-ROM. This mechanism is not necessarily limited to the BD-ROM, and for example, may be applied to, for example, a readable\/writable semiconductor memory (for example, a semiconductor memory card having a nonvolatile property such as an SD card).","The following describes the playback procedure of a semiconductor memory card playback apparatus. In contrast to an optical disk that is configured so that data is read from, for example, an optical disk drive, when using a semiconductor memory card, data may be read via an I\/F for reading the data on the semiconductor memory card.","More specifically, when the semiconductor memory card is inserted into a slot (not depicted) in the playback apparatus, the playback apparatus and the semiconductor memory card are electrically connected via the semiconductor memory card I\/F. The data recorded on the semiconductor memory card may be read via the semiconductor memory card I\/F.","Although the present invention has been fully described by way of examples with reference to the accompanying drawings, it is to be noted that various changes and modifications will be apparent to those skilled in the art. Therefore, unless such changes and modifications depart from the scope of the present invention, they should be construed as being included therein.","The present invention can be applied to a stereoscopic video playback apparatus that performs scaling when subtitles are superimposed on a stereoscopic view video stream, in playback equipment that plays back a stereoscopic video stream, in a device that displays subtitles and graphics superimposed on a stereoscopic video stream.",{"@attributes":{"id":"p-0817","num":"0000"},"ul":{"@attributes":{"id":"ul0003","list-style":"none"},"li":{"@attributes":{"id":"ul0003-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0004","list-style":"none"},"li":[{"@attributes":{"id":"ul0004-0001","num":"0816"},"b":"100"},{"@attributes":{"id":"ul0004-0002","num":"0817"},"b":"200"},{"@attributes":{"id":"ul0004-0003","num":"0818"},"b":"300"},{"@attributes":{"id":"ul0004-0004","num":"0819"},"b":"400"},{"@attributes":{"id":"ul0004-0005","num":"0820"},"b":"500"},{"@attributes":{"id":"ul0004-0006","num":"0821"},"b":"1","i":"a "},{"@attributes":{"id":"ul0004-0007","num":"0822"},"b":"1","i":"b "},{"@attributes":{"id":"ul0004-0008","num":"0823"},"b":"1","i":"c "},{"@attributes":{"id":"ul0004-0009","num":"0824"},"b":["2","2"],"i":["a","b "]},{"@attributes":{"id":"ul0004-0010","num":"0825"},"b":"3"},{"@attributes":{"id":"ul0004-0011","num":"0826"},"b":"4"},{"@attributes":{"id":"ul0004-0012","num":"0827"},"b":"5","i":"a,b "},{"@attributes":{"id":"ul0004-0013","num":"0828"},"b":"6"},{"@attributes":{"id":"ul0004-0014","num":"0829"},"b":"7","i":"a,b "},{"@attributes":{"id":"ul0004-0015","num":"0830"},"b":"7","i":"c,d "},{"@attributes":{"id":"ul0004-0016","num":"0831"},"b":"8"},{"@attributes":{"id":"ul0004-0017","num":"0832"},"b":"9"},{"@attributes":{"id":"ul0004-0018","num":"0833"},"b":"10"},{"@attributes":{"id":"ul0004-0019","num":"0834"},"b":"11"},{"@attributes":{"id":"ul0004-0020","num":"0835"},"b":"12"},{"@attributes":{"id":"ul0004-0021","num":"0836"},"b":"13"},{"@attributes":{"id":"ul0004-0022","num":"0837"},"b":"14"},{"@attributes":{"id":"ul0004-0023","num":"0838"},"b":"15"},{"@attributes":{"id":"ul0004-0024","num":"0839"},"b":"16"},{"@attributes":{"id":"ul0004-0025","num":"0840"},"b":"17"},{"@attributes":{"id":"ul0004-0026","num":"0841"},"b":"18"},{"@attributes":{"id":"ul0004-0027","num":"0842"},"b":"19"},{"@attributes":{"id":"ul0004-0028","num":"0843"},"b":"20"},{"@attributes":{"id":"ul0004-0029","num":"0844"},"b":"21"},{"@attributes":{"id":"ul0004-0030","num":"0845"},"b":"22"},{"@attributes":{"id":"ul0004-0031","num":"0846"},"b":"22","i":"a "},{"@attributes":{"id":"ul0004-0032","num":"0847"},"b":"23"},{"@attributes":{"id":"ul0004-0033","num":"0848"},"b":"24"},{"@attributes":{"id":"ul0004-0034","num":"0849"},"b":"25"},{"@attributes":{"id":"ul0004-0035","num":"0850"},"b":"26"},{"@attributes":{"id":"ul0004-0036","num":"0851"},"b":"27","i":"a "},{"@attributes":{"id":"ul0004-0037","num":"0852"},"b":"27","i":"b "},{"@attributes":{"id":"ul0004-0038","num":"0853"},"b":"28"},{"@attributes":{"id":"ul0004-0039","num":"0854"},"b":"29"}]}}}}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF DRAWINGS","p":["These and other objects, advantages, and features of the invention will become apparent from the following description thereof taken in conjunction with the accompanying drawings, which illustrate specific embodiments of the present invention.","In the drawings:",{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 2","b":"100"},{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0035","num":"0034"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0037","num":"0036"},"figref":"FIG. 7","b":["11","8","10"]},{"@attributes":{"id":"p-0038","num":"0037"},"figref":"FIG. 8","b":["11","8","10"]},{"@attributes":{"id":"p-0039","num":"0038"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0040","num":"0039"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0041","num":"0040"},"figref":"FIG. 11","b":["500","6"]},{"@attributes":{"id":"p-0042","num":"0041"},"figref":["FIG. 12A","FIG. 12B"]},{"@attributes":{"id":"p-0043","num":"0042"},"figref":["FIG. 13A","FIG. 13B","FIG. 13C"]},{"@attributes":{"id":"p-0044","num":"0043"},"figref":["FIG. 14A","FIG. 14B","FIG. 14C"]},{"@attributes":{"id":"p-0045","num":"0044"},"figref":["FIG. 15A","FIG. 15B"]},{"@attributes":{"id":"p-0046","num":"0045"},"figref":["FIG. 16A","FIG. 16B"],"b":["704","706"],"i":["b","b; "]},{"@attributes":{"id":"p-0047","num":"0046"},"figref":"FIG. 17"},{"@attributes":{"id":"p-0048","num":"0047"},"figref":["FIG. 18A","FIG. 18B","FIG. 18C"]},{"@attributes":{"id":"p-0049","num":"0048"},"figref":"FIG. 19"},{"@attributes":{"id":"p-0050","num":"0049"},"figref":"FIG. 20"},{"@attributes":{"id":"p-0051","num":"0050"},"figref":"FIG. 21","b":["20","200"]},{"@attributes":{"id":"p-0052","num":"0051"},"figref":["FIG. 22A","FIG. 22B","FIG. 22C"]},{"@attributes":{"id":"p-0053","num":"0052"},"figref":["FIG. 23A","FIG. 23B"]},{"@attributes":{"id":"p-0054","num":"0053"},"figref":["FIG. 24A","FIG. 24B"]},{"@attributes":{"id":"p-0055","num":"0054"},"figref":["FIG. 25A","FIG. 25B"]},{"@attributes":{"id":"p-0056","num":"0055"},"figref":["FIG. 26A","FIG. 26B"],"b":"8"},{"@attributes":{"id":"p-0057","num":"0056"},"figref":["FIG. 27A","FIG. 27B","FIG. 27C"],"b":"20"},{"@attributes":{"id":"p-0058","num":"0057"},"figref":["FIG. 28A","FIG. 28B"],"b":"10"},{"@attributes":{"id":"p-0059","num":"0058"},"figref":["FIG. 29A","FIG. 29B","FIG. 29C"],"b":"20"},{"@attributes":{"id":"p-0060","num":"0059"},"figref":["FIG. 30A","FIG. 30B","FIG. 30C"],"b":"8"},{"@attributes":{"id":"p-0061","num":"0060"},"figref":["FIG. 31A","FIG. 31B","FIG. 31C"],"b":"10"},{"@attributes":{"id":"p-0062","num":"0061"},"figref":"FIG. 32"},"Each of  and  shows what is held in the graphics plane after the plane shift engine  shifts the coordinates of each of the pixel data pieces;",{"@attributes":{"id":"p-0064","num":"0063"},"figref":"FIG. 34"},{"@attributes":{"id":"p-0065","num":"0064"},"figref":"FIG. 35","b":"29"},{"@attributes":{"id":"p-0066","num":"0065"},"figref":"FIG. 36"},{"@attributes":{"id":"p-0067","num":"0066"},"figref":"FIG. 37"},{"@attributes":{"id":"p-0068","num":"0067"},"figref":"FIG. 38"},{"@attributes":{"id":"p-0069","num":"0068"},"figref":"FIG. 39"},{"@attributes":{"id":"p-0070","num":"0069"},"figref":"FIG. 40"},{"@attributes":{"id":"p-0071","num":"0070"},"figref":"FIG. 41"},{"@attributes":{"id":"p-0072","num":"0071"},"figref":"FIG. 42"},{"@attributes":{"id":"p-0073","num":"0072"},"figref":["FIG. 43A","FIG. 43B"],"b":"6"},{"@attributes":{"id":"p-0074","num":"0073"},"figref":["FIG. 44A","FIG. 44B"]},{"@attributes":{"id":"p-0075","num":"0074"},"figref":"FIG. 45"},{"@attributes":{"id":"p-0076","num":"0075"},"figref":"FIG. 46","b":"20"},{"@attributes":{"id":"p-0077","num":"0076"},"figref":["FIG. 47A","FIG. 47B"],"b":"6"},{"@attributes":{"id":"p-0078","num":"0077"},"figref":["FIG. 48A","FIG. 48B"]},{"@attributes":{"id":"p-0079","num":"0078"},"figref":"FIG. 49","b":"20"},{"@attributes":{"id":"p-0080","num":"0079"},"figref":"FIG. 50"},{"@attributes":{"id":"p-0081","num":"0080"},"figref":"FIG. 51"},{"@attributes":{"id":"p-0082","num":"0081"},"figref":"FIG. 52"},{"@attributes":{"id":"p-0083","num":"0082"},"figref":"FIG. 53"},{"@attributes":{"id":"p-0084","num":"0083"},"figref":"FIG. 54"}]},"DETDESC":[{},{}]}
