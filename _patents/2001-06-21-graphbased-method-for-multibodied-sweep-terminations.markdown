---
title: Graph-based method for multi-bodied sweep terminations
abstract: A computer-implemented solid modeling system provides a graph-based method for multi-bodied sweep terminations in a computer-implemented solid modeling system. A planar profile of one or more curves is generated, and the profile swept along a specified path to generate a tool body. The swept profile is terminated after the tool body interacts with a plurality of blank bodies to a predefined extent. The termination is comprised of three phases: (1) a pre-processing phase is performed to label faces and edges of the tool and blank bodies; (2) an analysis phase is performed to extract tool and blank graphs for the labeled faces and edges; and (3) a post-processing phase is performed to integrate results from the extracted tool and blank graphs.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=06906711&OS=06906711&RS=06906711
owner: Autodesk, Inc.
number: 06906711
owner_city: San Rafael
owner_country: US
publication_date: 20010621
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS"],"p":["This application claims the benefit under 35 U.S.C. \u00a7119(e) of co-pending and commonly assigned U.S. Provisional Patent Application Ser. No. 60\/269,831, filed on Feb. 20, 2001, by Kenneth J. Hill, entitled \u201cGRAPH-BASED METHOD FOR MULTI-BODIED SWEEP TERMINATIONS,\u201d which application is incorporated by reference herein.","1. Field of the Invention","The present invention relates generally to computer-assisted design (CAD) systems, and in particular, to a graph-based method for multi-bodied sweep terminations in a computer-implemented solid modeling system.","2. Description of the Related Art","Over the last decade, designers have changed their fundamental approach to graphics design, moving from two-dimensional (2D) drawing systems to three-dimensional (3D) solid modeling systems. New software makes solid modeling technology available and affordable to virtually anyone.","Solid modeling is a technique that allows designers to create dimensionally accurate 3D solid models in a 3D space represented within a computer, rather than traditional 2D drawings. 3D solid models include significantly more engineering data than 2D drawings, including the volume, bounding surfaces, and edges of a design.","With the graphics capabilities of today's computers, these 3D solid models may be viewed and manipulated on a monitor. In addition to providing better visualization, 3D solid models may be used to automatically produce 2D drawing views, and can be shared with manufacturing applications and the like.","Some 3D solid modeling systems generate parametric feature-based models. A parametric feature-based model is comprised of intelligent features, such as holes, fillets, chamfers, etc. The geometry of the parametric feature-based model is defined by underlying mathematical relationships (i.e., parameters) rather than by simple unrelated dimensions, which makes them easier to modify. These systems preserve design intent and manage it after every change to the model.","An operation often performed by solid modeling systems to create parametric feature-based models is a profile sweep. A user typically draws a planar, simple (not self-intersecting) profile of curves and then instructs the solid modeling system to sweep the profile along a specified path (e.g., linearly for extrusions and circularly for revolutions). The result of the profile sweep is a shaped solid body or part.","However, the termination of profile sweeps (including extrusions and revolutions as special cases) is a non-trivial operation. This is especially true when multiple bodies are involved in the termination. Consequently, there is a need in the art for new methods of handling the termination of profile sweeps for multiple bodies in a solid modeling system.","To address the requirements described above, the present invention discloses a computer-implemented solid modeling system that provides a graph-based method for multi-bodied sweep terminations in a computer-implemented solid modeling system. Specifically, the present invention comprises a method, apparatus, and article of manufacture for terminating profile sweeps for multiple bodies in a computer-implemented solid modeling system. A planar profile of one or more curves is generated, and the profile is swept along a specified path to generate a tool body. The swept profile is terminated after the tool body interacts with a plurality of blank bodies to a predefined extent. The termination is comprised of three phases: (1) a pre-processing phase is performed to label faces and edges of the tool and blank bodies; (2) an analysis phase is performed to extract tool and blank graphs for the labeled faces and edges; and (3) a post-processing phase is performed to integrate results from the extracted tool and blank graphs.","In the following description, reference is made to the accompanying drawings which form a part hereof, and which is shown, by way of illustration, an embodiment of the present invention. It is understood that other embodiments may be utilized and structural changes may be made without departing from the scope of the present invention.","Overview","The present invention is a parametric, feature-based solid modeling system that provides a graph-based method for multi-bodied sweep terminations. Terminating profile sweeps is a fundamental operation in solid-modeling systems. The present invention describes a new technique for handling the termination of a profile sweep when multiple bodies are involved.","Hardware and Software Environment",{"@attributes":{"id":"p-0075","num":"0074"},"figref":"FIG. 1","b":["100","102","104","100"]},"The computer  usually operates under the control of an operating system , which is represented by a window displayed on the monitor . The preferred embodiment of the present invention is implemented by a computer-implemented graphics program , which is also represented by a window displayed on the monitor , that operates under the control of the operating system . The graphics program  preferably comprises a parametric feature-based solid modeling system, although other graphics programs  could be used as well.","Generally, the operating system  and graphics program  comprise logic and\/or data embodied in or readable from a device, media, or carrier, e.g., one or more fixed and\/or removable data storage devices  connected directly or indirectly to the computer , one or more remote devices coupled to the computer  via data communications devices, etc.","Those skilled in the art will recognize that the exemplary environment illustrated in  is not intended to limit the present invention. Indeed, those skilled in the art will recognize that other alternative environments may be used without departing from the scope of the present invention.","Computer-Implemented Graphics Program",{"@attributes":{"id":"p-0079","num":"0078"},"figref":"FIG. 2","b":["108","108","200","202","204","206","208","210"]},"The Graphical User Interface  displays information to the user and provides the functionality for the user's interaction with the graphics program .","The Image Engine  processes the Database  or files  and delivers the resulting graphics to an output device. In the preferred embodiment, the Image Engine  provides a complete application programming interface (API) that allows other computer programs to interface to the graphics program  as needed.","The Geometric Modeler  primarily creates geometry and topology for models. The Feature-Based Modeler , which interacts with the Geometric Modeler , is a parametric feature-based solid modeler that integrates 2D and 3D mechanical design tools, including parametric assembly modeling, surface modeling, 2D design, and associative drafting. The Feature-Based Modeler  provides powerful solid-, surface-, and assembly-modeling functionality.","The Database  is comprised of two separate types of databases: (1) a 3D database  known as the \u201cworld space\u201d that stores 3D information; and (2) one or more 2D databases  known as the \u201cvirtual spaces\u201d or \u201cview ports\u201d that stores 2D information derived from the 3D information. The 3D database  captures the design intent and behavior of a component in a model.","Object Structure",{"@attributes":{"id":"p-0084","num":"0083"},"figref":"FIG. 3","b":["300","212","300","302","304","306","300","212","304","300","212"]},"Operation of the Preferred Embodiment","The purpose of sweeping profiles in the present invention is to shape an object structure  or node  that represents a mechanical part. There are other operations that shape the part, but sweeping, and especially the linear sweep (more commonly called an \u201cextrude\u201d operation), is the most basic.","A user typically draws a planar, simple (not self-intersecting) profile of curves and tells the graphics program  to sweep this profile along a specified path. The path may be implied: in a revolve operation, the path is a circular arc around some user-selected axis; in an extrude operation, the path is a line perpendicular to the plane of the profile.",{"@attributes":{"id":"p-0087","num":"0086"},"figref":["FIG. 4","FIG. 5"]},{"@attributes":{"id":"p-0088","num":"0087"},"figref":["FIG. 6","FIG. 7","FIG. 8","FIG. 9"]},"In the figures above, the tool body has a fixed length. Often, however, the user would like to explicitly state the extent to which a tool body interacts with the blank body. In the present invention, the choices for extruding a profile are:\n\n","Other types of terminations can be used for other sweep types. For example, the user may specify a termination angle on a revolve sweep.",{"@attributes":{"id":"p-0091","num":"0095"},"figref":["FIG. 10","FIG. 11","FIG. 10","FIG. 12","FIG. 10","FIG. 13","FIG. 10","FIG. 14","FIG. 10","FIG. 15","FIG. 10"],"b":["1000","1002","1000"]},"Sweeping Sheets (Surfaces)","In addition to creating a solid tool body that interacts with a blank body, the present invention allows one to create sheet bodies that remain disjoint from the solid. The same termination types are available for sheet as are available for solid terminations, but there is no concept of joining, cutting, or intersecting the sheet with the solid blank. Once created, sheets stand as separate objects from the blank body.",{"@attributes":{"id":"p-0093","num":"0097"},"figref":["FIG. 16","FIG. 17","FIG. 18"],"b":["1600","1602","1600","1602"]},"Boundary Representations (B-Reps)","Solids are represented in the present invention by means of a boundary representation, although other types of solid representations such as \u201cconstructive solid geometry\u201d (CSG) models (also called \u201ccombinatorial solid geometry\u201d models) can be used without departing from the scope of the present invention. The boundary representation consists of a hierarchy of topological objects that define the boundaries of successively simpler elements of the model.","Each solid is composed of disconnected parts called \u201clumps.\u201d Most solids have only one lump, although most boundary representation models allow multiple lumps associated with them.",{"@attributes":{"id":"p-0096","num":"0100"},"figref":["FIG. 19","FIG. 20"]},"Each lump contains one or more \u201cshells.\u201d These shells are composed of a collection of faces that separates the inside portion of the lump from the outside. A lump can have several shells. There is typically an exterior shell which bounds the infinite void from the material, but there may also be interior shells which separate the material from pockets of empty space.","Each shell contains a set of one or more \u201cfaces.\u201d These faces are the infinitely thin boundaries between what is inside the solid and what is outside. A spherical lump might have only one face (on the one shell), or its surface might be chopped up into a patchwork of faces. A cube typically has six faces, but could have more if some of the sides are split. Each face is required to be smooth in the sense that there are no sharp ridges in the interior of the face. Underlying each face is a surface that represents the geometry associated with the face. The surface gives the face structure.","In some b-rep models, there is a topological entity called a \u201chalf-face\u201d that determines what side of the face is considered outside of the lump. Other b-rep models describe half-faces as special faces. When half-faces are present, the shells are comprised of half-faces, and the half-faces are associated to a face.","Each face is bounded by zero or more loops. A loop is to a face what a shell is to a lump. A spherical face might have no loops. The side of a block typically has one loop. A side of a cube with a round hole in it has two loops: one for the square outer boundary of the face, one for the round hole.","Each loop is comprised of multiple \u201chalf-edges\u201d (often called \u201cco-edges\u201d or \u201cfins\u201d). These half-edges represent the usage of an edge (the next lower topological item) by a face. The half-edge answers the question \u201cdoes the loop traverse an edge in the same parametric direction of the edge, or in the reverse direction?\u201d","Associated with each half-edge is an \u201cedge\u201d. One can think of an edge as being an infinitely thin wire. Each edge has a direction of traversal based on the underlying mathematical equation of the curve associated with the edge.","Edges are bounded by zero, one, or two \u201cvertices.\u201d Vertices connect a physical point as a termination to an edge.",{"@attributes":{"id":"p-0104","num":"0108"},"figref":"FIG. 21"},"Attributes","The graphics program  has the ability to attach data to topological entities. Each such datum is usually called an \u201cattribute.\u201d Attributes typically have programmable behaviors so that they can respond appropriately to common operations such as splitting, merging, copying, or transforming the entity to which they are attached.","For example, if one wishes to track how a certain face is split during a Boolean operation, one simply places an attribute on that face with the following behaviors:\n\n","After the Boolean operation is completed, all faces are examined to see which ones contain the attribute.","Suppose now it is desired to track two faces, one of type A and one of type B. One could create an attribute for each type one wishes to track, but a more compact way of doing it is to create an attribute (perhaps called AttribFaceTrack) with two Boolean data members (data items containing true or false, which are not to be confused with Boolean operation on solids). These data members can be distinct bits of a single machine word, for example, the first bit indicates whether the face is of type A, and the second bit indicates whether the face is of type B. The merge behavior could then be changed so that if each of the merging faces has an attribute of type AttribFaceTrack but with different faces indicated, the attribute on the resultant face has both faces indicated. After the Boolean operation, some faces will have no attribute of type AttribFaceTrack, some will have type A indicated, some type B, and others will possibly have type A and B indicated.","This multi-face tracking behavior will be used in a slightly more complex form to do the bookkeeping work in multi-body sweep terminations.","Cellular Topology","When speaking of the physical world, one expects that two bodies will not occupy the same space at the same time. In the symbolic world, there is no such restriction. When solids intersect, space is divided into the following types of disjoint regions: regions that are outside of both bodies (called \u201cthe void\u201d); regions that are inside the first body, but outside the second; regions that are inside the second body, but outside the first; and regions that are inside both bodies. The disjoint regions, interior to at least one of the solids, are called \u201ccells.\u201d There may be more than one cell of the same type.",{"@attributes":{"id":"p-0111","num":"0119"},"figref":["FIG. 22","FIG. 23"],"b":["0","1","2"]},"Two cells are called \u201cadjacent\u201d if they share at least one common face. In the two dimensional analogs that will be frequently used herein for illustration purposes (e.g., FIG. ), cells will be adjacent when separated by a common edge.","From the cells of intersecting bodies and the notion of adjacency, one may use graph theory to generate a useful abstraction of the connectivity of the cells. Let each cell (other than the void cells) be represented as a vertex on the graph (not to be confused with the b-rep vertices) and let two vertices be connected by an edge (again, not a b-rep edge), if and only if the cells associated with those vertices are adjacent. The resulting graph is called a \u201ccellular topology graph\u201d or simply a \u201cct-graph.\u201d (Note that these graphs, and the nodes therein, are different from the object structures , and nodes  and , shown in )",{"@attributes":{"id":"p-0114","num":"0122"},"figref":["FIG. 24","FIG. 24"],"b":"23"},"Selective Boolean Operations","A \u201cBoolean operation\u201d between two bodies creates a new solid from portions of each body. The body being modified is the \u201cblank body,\u201d and the body performing the modification is the \u201ctool body.\u201d After a \u201cjoin\u201d Boolean operation, the blank body is modified to contain all the material from both the original blank body and the tool body. After a \u201csubtract\u201d Boolean operation, the entire material interior to the tool body is removed from the blank body. An \u201cintersect\u201d Boolean operation replaces the blank body with only that material that is in both the tool body and the original blank body.","Each of the Boolean operations types presented above can be represented in terms of cellular topology. A ct-graph is created for the intersecting bodies, and then a decision is made regarding which vertices of the ct-graph to keep. If a particular vertex is kept in the resulting ct-graph, then its associated cell is present in the resulting solid.","There may be times when operations other than the three above are needed. When this occurs, an algorithm may choose to do a \u201cselective\u201d or \u201cpartial\u201d Boolean, in which the algorithm explicitly selects which vertices (and therefore which cells) ate kept. For example, perhaps it is desired to keep all the cells except the right most one. Removing one vertex from the ct-graph can do this.  illustrate a selective Boolean operation that removes only one cell.","Single Body Terminations","This section describes handling of terminations where only a tool body and a single manifold blank body are involved. Explicitly, in \u201cfrom-to\u201d terminations, the \u201cfrom\u201d face and the \u201cto\u201d face must lie on the same body. The purpose of this section is to provide a simplified framework that can be extended to the multi-body cases that are the subject of this invention. Other single-body termination algorithms ate in use that may or may not be similar to that outlined here.","Consider the 2-D body in  (2-D bodies are sufficient for discussion since the 3-D cases are completely analogous). Suppose the profile  is swept through the body  to form a tool body.  shows the associated cell diagram and  shows the associated ct-graph.","There are two important sub-graphs of the ct-graph that will be needed for further analysis.  illustrates the graph of vertices associated with cells internal to the blank body that is referred to as the \u201cblank body graph\u201d (or \u201cblank graph\u201d). Likewise,  illustrates the graph of vertices from the ct-graph whose associated cells are internal to the tool body that is called the \u201ctool body graph\u201d (or \u201ctool graph\u201d). Some vertices belong to both the tool body graph and the blank body graph; these are precisely the vertices associated with the intersection of the two bodies.","For open path sweeps (the only kind under consideration, since closed path sweeps may be explicitly opened once it is determined that a termination is desired), there is a starting face on the tool body and an ending face. All other faces are call \u201clateral faces.\u201d It is useful to keep track of which cells are attached to the starting face and which to the termination faces in the ct-graph. This is done by attaching a \u201ctermination vertex\u201d to all vertices of the ct-graph that are associated with a cell containing a start face, and a termination vertex to all those vertices containing an end face. Termination vertices contain either an \u201cS\u201d for the start termination or an \u201cE\u201d for the end termination (as shown in , which illustrates a tool body graph decorated with termination vertices).","Terminations on closed paths reduce to the open path case by removing an appropriate edge of the tool graph and connecting start and end vertices to those vertices formerly on the removed edge. That the closed-path ct-graph can be turned into an open path ct-graph is reasonable since the user's intent is to either use the whole path (in which case there is no termination analysis) or use some subset of the path shorter than the entire length.","When the tool body graph is decorated with termination vertices, it is also called the tool body graph. Although ambiguous, no confusion should occur, since once the termination vertices are added, there is no cause for further use of the undecorated version.","\u201cAll\u201d Terminations","\u201cAll\u201d terminations usually occur in two flavors: one-directional (where the user chooses the direction) or two-directional.","Assuming the tool body length is chosen, such tool body completely passes through the blank body, using the ct-graph makes selection of the result trivial. In the one-directional case, the algorithm need only keep those cells associated with vertices not attached to the end termination vertex. In the two-direction case, the algorithm need only keep the cells associated with those vertices not attached to either termination vertex.","\u201cTo-next\u201d Terminations","The intent behind \u201cTo-next\u201d terminations is that the tool body be extended to the first complete termination that effects a change in the body.","The first step in accomplishing this is to associate an integer representing the minimum number of steps that must be traversed from the start termination vertex with each vertex of the tool graph. This integer is the \u201cdistance\u201d from the start vertex. The distance from the start termination vertex to itself is 0. The distance from the start termination vertex of any vertices adjacent to the start vertex in the tool graph is 1.","For solid extrusions, the next step is to extract from the tool graph the vertices of distance  or  from the start vertex (other than those that are adjacent to the end termination vertex, as these cells must always be removed, since they are an artifact of extending the tool body beyond the bounds of the blank body). This choice of vertices (and by extension the cells) is justified by the observation that if a distance  vertex is interior to the blank body (in the sense that its associated cell is), any distance  cells adjacent to it are exterior. On the other hand, if the distance  vertex is exterior, its adjacent distance one cells are interior.","For sheet extrusions, only the distance  vertices are extracted (again, other than those adjacent to the end termination vertex).",{"@attributes":{"id":"p-0130","num":"0138"},"figref":["FIG. 32","FIG. 33","FIG. 34"],"b":"32"},{"@attributes":{"id":"p-0131","num":"0139"},"figref":["FIG. 35","FIG. 32","FIG. 36","FIG. 37","FIG. 35","FIG. 38"],"b":["32","36"]},{"@attributes":{"id":"p-0132","num":"0140"},"figref":"FIG. 39","b":"3900"},"\u201cTo-face\u201d Terminations","In the \u201cto-face\u201d termination, the user selects a face of the blank body to which the tool body is to be terminated. The face by itself may not completely cut through the tool body, but perhaps the selected face together with some neighboring faces allow sense to be made of this situation. This can be more clearly defined using cellular topology methods.","Each vertex of the ct-graph corresponds to a solid cell. Each edge of the ct-graph corresponds to the collection of faces that separate one cell from its adjacent cell. In the case of the termination vertices, the edges represent the termination faces themselves. The primary idea behind to-face terminations is to find the graph edges that contain the face that the user selected.","One difficulty that arises is that, in the process of creating the cells from the original bodies' faces, the face selected as the to-termination may be split into multiple faces, such that each side of every face is on the boundary of at most one cell. Thus, a tracking mechanism is necessary to keep track of all faces split from the original one. One can thus place an attribute (as defined previously) of type \u201cto-face\u201d on the face that the user selected. When the cells are created, any face that contains this attribute will be considered a valid termination candidate. Other methods of tracking which faces are to be used as terminations faces may be implemented without deviating from the scope of this invention.","Recalling that a ct-graph edge represents all faces separating two adjacent cells, the system defines an edge of the tool graph to be \u201cacceptable as a to-face termination\u201d if: (1) it contains a face flagged with the to-termination attribute (i.e., a face split off from the original selected termination face) or some other tracking mechanism, and (2) removal of that edge would cause the tool graph to be split into two disconnected pieces (called \u201ccomponents\u201d) such that one component includes the start termination vertex, and the other contains the end termination vertex. An edge whose removal splits a graph into two components is called a \u201cbridge\u201d.","If there are multiple graph edges that meet the stated criteria, either explicit user selection or a heuristic can be used to differentiate between them. One embodiment of the present invention may allow explicit user selection, while another embodiment may also use a heuristic called the \u201cmaximal principle\u201d that chooses the termination that causes the most number of cells to be included in the tool body. Other heuristics are possible within the scope of this invention.","\u201cFrom-to\u201d Terminations","From-to terminations are computed very much the same as to-face terminations. The main difference is that a \u201cfrom\u201d tool body graph edge must be selected as well as a \u201cto\u201d edge. Like the to-termination graph edge, the from-termination graph edge must be associated with a face tracked as a \u201cfrom-face,\u201d be a bridge of the tool graph, and must separate the start and end termination vertices. After selection of the from-edge and to-edge, the portion of the tool graph kept is the portion that does not contain either a start or an end termination vertex.","As for \u201cto-face\u201d terminations, an attribute may decorate the \u201cfrom\u201d face to track it through the partial Boolean operations, or some other tracking mechanism may be used. It is possible that a single face on the blank body be designated as both a \u201cfrom\u201d and a \u201cto\u201d face.","Post Processing","Once a particular sub-graph of the tool graph is chosen according to the termination type and ambiguity resolution heuristics, the vertices of the terminated tool graph are united, subtracted or intersected with those the blank graph. The resulting graph determines which cells are output by the termination algorithm.","Overview of the Multi-Body Termination Algorithm","In the handling of single-body terminations, a solid tool body operates on a blank body according to a termination type and Boolean operator (join, cut, intersect). Alternately, a sheet tool body may, by terminating to a blank body, create a new sheet body as a subset of the input tool body.","The situation becomes significantly more complex with multi-body terminations. The most complex scenario occurs when a tool body is terminated from a face on a body (called the \u201cfrom-body\u201d) to a face on another body (called the \u201cto-body\u201d). A Boolean operation is then applied against a third body (called a \u201ctarget-body\u201d). Complexity rises when one realizes that the from-body, to-body and target-body can all intersect in non-trivial ways.",{"@attributes":{"id":"p-0143","num":"0151"},"figref":"FIG. 40","b":["4000","4002","4004","4006","4002","4004","4006"]},{"@attributes":{"id":"p-0144","num":"0152"},"figref":"FIG. 41"},"Various combinations can occur: there may be no from-body or to-body (as when the user is doing a \u201cto-next\u201d termination); any combination of the from-body, to-body or target-body may actually be the same body; and any of these three bodies may be missing (depending on the operation).","Phases",{"@attributes":{"id":"p-0146","num":"0154"},"figref":"FIG. 42","b":"42"},"The first phase, represented by Blocks , , , and  in the first column, is known as the \u201cpreprocessing\u201d phase. The preprocessing phase is responsible for labeling all faces (and possibly edges when sheets ate being swept) according to the body from which they come. This labeling may be done with attributes as described above, or some other means of tracking may be used. The preprocessing phase is also responsible for the construction of a blank body. In single-body terminations, the blank body is always available: if it exists at all; it is simply the target-body. In multi-body terminations, a blank body must be constructed from some combination of a from-body, to-body and a target-body. Another responsibility of the preprocessing phase is to perform cellular decomposition and generate a ct-graph for the blank body. The final responsibility of the preprocessing phase is to propagate edge attributes when creating sheets.","The second phase, represented by Blocks , , and  in the second column, is known as the \u201canalysis\u201d phase. In this phase, all graph-based analysis takes place, including extracting the tool and blank graphs; adding termination vertices to the tool graph; and deriving new graphs (called \u201cbundle graphs\u201d) from the tool graph that are used to determine the potential \u201cfrom\u201d and \u201cto\u201d terminations. Another important function of the analysis phase is an operation called \u201clabel propagation,\u201d in which the marking of faces as a from-face or to-face are propagated to faces adjacent to those faces originally marked. This topic will be discussed in detail in a subsequent section. The output of the analysis phase is a graph whose vertices represent the cells that will be used by the final phase to create the output body.","The final phase, represented by Block  in the third column, is the \u201cpost processing\u201d phase. This is where the results of the analysis are integrated into a final result according to the desired Boolean operation.","Preprocessing","Step 1\u2014Body Tracking (Block  in )","It is important to track which faces came from which termination body (the to-body or the from-body) even after the cellular decomposition. This is typically done using attributes although other tracking mechanisms may be used within the scope of this invention. In from-to or to-face terminations, all faces on the body containing the to-face are marked with a \u201cto-body\u201d attribute. In from-to terminations, all faces on the body containing a from-face are marked with a \u201cfrom-body\u201d attribute. This allows faces to be identified according to which body they came from after the faces have been split or merged in the process of cellular decomposition.","Step 2\u2014Blank Body Creation (Block  in )","For \u201call\u201d or \u201cto-next\u201d terminations, the blank body is simply the target body. Although the present invention only allows the target body to be used in this termination type, other implementations could extend this functionality by joining multiple bodies together to form a single non-manifold blank body.","For \u201cto-face\u201d or \u201cfrom-to\u201d terminations, the situation is a bit more complex. In these cases, the blank body is created from some combination of the from-body, to-body, and target-body.",{"@attributes":{"id":"p-0153","num":"0161"},"figref":"FIG. 43"},"Block  represents the graphics program  setting the blank body pointer (pBlank) to the target body (pTarget). pTarget may be null.","Block  is a decision block that represents the graphics program  determining whether this is a from-to termination. If so, control transfers to Block ; otherwise, control transfers to Block .","Block  is a decision block that represents the graphics program  determining whether this is a to-face termination. If so, control transfers to Block ; otherwise, control transfers to Block .","Block  is a decision block that represents the graphics program  determining whether either the from or to faces are on the target body. If not, control transfers to Block ; otherwise, control transfers to Block .","Block  represents the graphics program  setting the blank body pointer (pBlank) to null, which indicates that a terminated tool body can be generated without the target body.","Block  is a decision block that represents the graphics program  determining whether one or more sheets are being extruded. If so, control transfers to Block ; otherwise, control transfers to Block .","Block  is a decision block that represents the graphics program  determining whether pBlank is null. If not, control transfers to Block ; otherwise, control transfers to Block .","Block  represents the graphics program  indicating that there is a solid target body to terminate to, but a sheet body is needed, and thus the target body is made a sheet body (it might be necessary to copy it first to preserve the original). One may think of this conversion as a \u201chollowing out\u201d of the solid, so that only the infinitely thin surfaces remain. This process is necessary because a non-manifold unite operation between a solid body and a sheet tool body causes portions of the tool body interior to the solid to be lost. There is no such loss when the surface of the solid blank body is extracted as a sheet blank body, and that sheet blank body is united with the sheet tool body.","Finally, Block  represents the graphics program  computing the non-manifold (non-regular as defined below) union of the from, to, and blank bodies (using the blank body computed above), while excluding any of these bodies that are undefined (null), wherein the result is the blank body to be used in the analysis phase.","Examining the flowchart reveals that for from-to or to-face terminations, if the to-body and from-body are both distinct from the target-body, the target body is not used at all in the creation of the blank body. What happens in this case is that the result of the termination process yields a truncated tool body, which is subsequently Booleaned with the target-body to form the final product. Doing this saves time because the blank body is simpler, which results in less work for the graphics program  when performing cellular decomposition and final construction from the selected cells. Keeping the blank body simple also reduces the chance of a modeling error due to the resulting complexity. This is an optional optimization that might not be implemented in all realizations of this invention.","Another point that can be gleaned from the flowchart is that, in the case of sheet tool bodies, the target-body must be turned into a sheet body. If the actual target-body should not be changed for when extruding sheets, a copy can be made before the conversion. This can be optimized so that the conversion of the target body to a sheet body is only done if the target body will ultimately be used in the blank body (pBlank !=Null).","It is important to note that when the various bodies are joined to form the blank body, a non-regular Boolean join operation is performed. \u201cNon-regular\u201d refers to the fact that any faces internal to the body are not discarded. This is important since some of these faces may be part of the termination.","Step 3\u2014Cellular Decomposition (Block  in )","In this step, the graphics program  performs cellular decomposition on the tool body and blank body. The result of this operation is a ct-graph.","Step 4\u2014Edge Propagation of Attributes (Block  in )","This step is only required when creating sheets. The label attributes on each face (to-face\/from-face attributes, to-body\/from-body attributes) should be copied from each face to the edges of those faces. Unlike the cellular decomposition of two solids where cells are adjacent if they share a common face, two sheet cells are adjacent if they share a common edge.","Analysis","Step 1\u2014Tool Graph and Blank Graph Extraction (Block  in )","The first step of the analysis phase is to extract the tool and blank graph from the ct-graph. The blank graph is created for the benefit of the post-processing phase to form an output body.","Unlike the single body case, the blank graph may have both 3-D and 2-D cells, because the blank body is possibly a union of a 3-D target body and one or two 2-D termination bodies. Since the 2-D cells are not output in the final body, they may be removed from the blank graph.","If sheets are being swept, there is no need for a blank graph.","Step 2\u2014Label Propagation (Block  in )","In the case of single body terminations, if two adjacent vertices in the ct-graph both contain a common face marked as a from-face or a to-face (or more precisely, if the cells associated with these vertices contain such a common face, which is a distinction that will be largely ignored from this point on), then the graph edge between the vertices may be marked as a potential termination edge. Under certain conditions, this edge could be used as a termination of the tool body. In the case of multi-body extrusions, however, things are more difficult because of possible intersections in the blank body.","Consider the multi-body termination in FIG. .  is a cell diagram of a from-to termination where the from-body (containing face ) is different from the to-body (containing only face ), and  illustrates a tool graph for FIG. . The single faced to-body is represented as a curve, but one may imagine in 3-D that it is a surface. In this figure, the user has selected face  as the from-face, and  as the to-face. It is then clear that edge - is a from-termination, but that edge is not a bridge of the graph. The user also intended (by extension) that edge - also be a from-termination edge. In fact, that vertices  and  are split at all is an artifact of the multi-body termination; it only happens because the to-body  intersects the from-body . The process of label propagation fixes this problem by copying the from-face and to-face attributes to adjacent faces on the same body, provided those faces are not marked as coming from the tool body. One possible method of doing this follows:\n\n","In the case where one is sweeping surfaces, the procedure above should be applied to edges rather than faces of a tool body.","Step 3\u2014Handling of Termination Types (Block  in )","\u201cAll\u201d Terminations","In solid modeling, all terminations are usually relative to a single solid body. Even when the termination is relative to multiple bodies, a non-regular unite of those bodies gives an appropriate blank body to which one may apply the single-body procedure. (See the section above on single body terminations.)","As in the single-body case, all cells connected to the appropriate termination vertices are removed from the tool graph.","\u201cTo-Next\u201d Terminations","This termination type is also performed against a single solid body. Extending this type to multiple bodies is trivial if all the bodies are all solid or all sheet bodies. One must simply union the bodies together and derive a terminated tool body. That terminated body can then be united with one or more of the original bodies, or kept as a new body. The graph distance rules apply equally well here (distance  and  cells ate kept in the solid tool body case, and distance  cells are kept in the sheet tool body case).","If solid and sheet bodies are combined to form a blank body, the distance rules become less clear and the situation more ambiguous. Rules can be created that depend on what is to be done with the tool body. For example, if the tool body is solid and is to be Booleaned with the solid portion of the blank body, all 2-D cells of the blank body can be discarded and the distance  rule can be applied. If a new body is to be output (as is often the case in extruding sheets), perhaps the distance  rule is more appropriate. Other situations may require other decisions.","\u201cFrom-To\u201d Terminations","A difficulty arises with multi-body terminations when attempting to use the technique described in the section on the single-body method. The problem is that viable solutions are missed due to the fact that the condition that an acceptable termination be a bridge edge in the tool body graph breaks down, as shown in , , , and . One sees that the cause of this problem is the potential interference of the from-body and to-body, which may intersect to form a non-manifold blank body.",{"@attributes":{"id":"p-0181","num":"0202"},"figref":["FIG. 46","FIG. 47","FIG. 48","FIG. 49"],"b":["4600","4602","46"]},"Motivated by the desire to recover the simplicity of the single body case, it is useful to introduce the idea of \u201cbundle vertices.\u201d The purpose of bundle vertices is to gather (bundle) multiple edges that collectively form valid terminations. A tool graph with bundle vertices added is called a \u201cbundle graph\u201d. One bundle graph (called the \u201cF-graph\u201d) is created for the potential \u201cfrom\u201d terminations, and one (called the \u201cT-graph\u201d) is created for the potential \u201cto\u201d terminations.","The steps for creating a F-graph are listed below. The steps for a T-graph are the same with the appropriate name changes (T for F, from-edge for to-edge):\n\n",{"@attributes":{"id":"p-0184","num":"0207"},"figref":"FIG. 50","b":["47","5000","5002","5004","5006"]},{"@attributes":{"id":"p-0185","num":"0208"},"figref":"FIG. 51","b":["5000","5002","5004","5006"]},{"@attributes":{"id":"p-0186","num":"0209"},"figref":"FIG. 52","b":["1","3","4","3","4","1","2","1","2","4","6","4","6"]},{"@attributes":{"id":"p-0187","num":"0210"},"figref":"FIG. 53","b":["1","3","1","4","1","1","1","1","2","2","4","2","5","2","6","2","7"]},{"@attributes":{"id":"p-0188","num":"0211"},"figref":"FIG. 54"},"From the F-graph and the T-graph, one can generate all reasonable termination combinations. Each T bundle vertex is \u201callowable\u201d if it is a cut vertex (a cut vertex is a vertex whose removal increases the number of components in a graph\u2014similar to the definition of a bridge, except it applies to vertices rather than edges), and if the removal of the bundle vertex yields a graph in which the start and end termination vertices are in separate components.","The set of all possible terminations are generated by considering the set of all pairs of allowable bundle vertices, one in the F-graph, one in the T-graph. Only pairs that meet a compatibility criterion are acceptable solutions. If one removes the bundle vertices in question from the F-graph and the T-graph (called \u201cpuncturing the graph\u201d), each punctured graph becomes disconnected with their termination vertices in separate components (as per the definition of allowable bundle vertices). If either the S component (the component containing the S-vertex) of the punctured F-graph (with the bundle vertex deleted) is disjoint from the E component of the punctured T-graph, or the E component of the punctured F-graph is disjoint from the S component of the punctured T-graph, then the bundle vertices are compatible. This compatibility criterion ensures that the from-termination does not interfere in some way with the to-termination.",{"@attributes":{"id":"p-0191","num":"0214"},"figref":"FIG. 55","b":"1"},{"@attributes":{"id":"p-0192","num":"0215"},"figref":"FIG. 56","b":["1","3","2","1","1"]},{"@attributes":{"id":"p-0193","num":"0216"},"figref":"FIG. 57","b":["2","1","2"]},"For some applications, it may turn out that the compatibility criterion is too harsh. It may be that even when the terminations interfere with each other, sense can be made of the result. For example, in , cell  may be the desired result (especially if cell  is small, maybe even negligible).","Once a compatible pair of terminations is chosen (either by a heuristic choice or by explicit user selection), the terminated tool body can be determined. In the process of determining compatibility, it was found that one component of the punctured F-graph containing a termination vertex was disjoint for a component of the punctured T-graph containing the opposition termination vertex. Removing the vertices in these disjoint components from the tool graph leaves the vertices whose corresponding cells make up the truncated tool body.","As shown in , for the termination pair (F, T), the S component of the F-graph (S-- from FIG. ), and the E component of the tool graph (--E from ) are removed from the tool graph, leaving only these cells which make up the terminated tool body (--).",{"@attributes":{"id":"p-0197","num":"0220"},"figref":"FIG. 59"},"\u201cTo-Face\u201d Terminations","To-face terminations are handled as a special case of from-to terminations. This case is easier since there is no possibility of the from-body and to-body interfering. One simply chooses an allowable bundle vertex in the T-graph, and discards the portion of the punctured T-graph containing end termination vertex. Furthermore, since there is no need to even consider the target-body if it is distinct from the to-body, this can be converted to a single-body problem and solved with single-body methods.","Handling of Multiple Component Tool Bodies","If multiple profiles (such as disjoint discs) are to sweep simultaneously, a tool body can be generated with multiple lumps. In this case, the tool graph has multiple components. These components can be handled separately. The complete terminated tool body is simply the union of the partial results. Other methods of handling tool-bodies with multiple components can be implemented without deviating from the scope of this invention.","Post Processing","Step 1\u2014Integrate Results (Block  in )","Three situations can occur:","1. There is no target body. In this case, the truncated tool body is the final result. It can be computed as the union of the cells of the truncated tool body.","2. There is a target body, but since a from-to or to-face termination is being done and the target body was neither the from-body nor the to-body, the target body did not participate in the analysis. In this case, the truncated tool body can be Booleaned with the target body to for the final result.","3. There is a target body, and it participated in the cellular decomposition. In this case, the truncated tool body graph can be Booleaned with the blank body graph (created in the preprocessing step). The union of the cells in this combined graph becomes the output body. Of course, option two can be done even in this case, but doing it all in one step is probably faster.","Conclusion","This concludes the description of the preferred embodiment of the invention. The following describes some alternative embodiments for accomplishing the present invention.","For example, any type of computer, such as a mainframe, minicomputer, work station or personal computer, could be used with the present invention. In addition, any program, function, or system for terminating sweeps in a solid modeling system could benefit from the present invention. A computer program other than a solid modeling system, including perhaps a 2D drawing program (wherein the bodies are in fact flat similar to the example figures contained herein) could benefit from this invention. Those skilled in the art will recognize that tracking from-faces, to-faces, from-bodies and to-bodies can be implemented in ways other than that described herein without deviating from the scope of the present invention. Those skilled in the art will recognize that resolving multiple solutions using other heuristics than those mentioned herein are within the scope of the present invention. Those skilled in the art will recognize that handling multi-lump tool-bodies (typically generated from profiles with multiple loops) in ways other than those explicitly mentioned herein are within the scope of the present invention.","In summary, the present invention discloses a parametric, feature-based solid modeling system that provides a graph-based method for multi-bodied sweep terminations. Specifically, the present invention comprises a method, apparatus, and article of manufacture for terminating profile sweeps for multiple bodies in a computer-implemented solid modeling system. A planar profile of one or more curves is generated, and the profile is swept along a specified path to generate a tool body. The swept profile is terminated after the tool body interacts with a plurality of solid or sheet bodies to a predefined extent. The termination is comprised of three phases: (1) a pre-processing phase is performed to label faces and edges of the tool and blank bodies; (2) an analysis phase is performed to extract tool and blank graphs for the labeled faces and edges; and (3) a post-processing phase is performed to integrate results from the extracted tool and blank graphs.","The foregoing description of the preferred embodiment of the invention has been presented for the purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise form disclosed. Many modifications and variations are possible in light of the above teaching. It is intended that the scope of the invention be limited not by this detailed description, but rather by the claims appended hereto."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Referring now to the drawings in which like reference numbers represent corresponding parts throughout:",{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 2","b":"108"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":["FIG. 11","FIG. 10"]},{"@attributes":{"id":"p-0025","num":"0024"},"figref":["FIG. 12","FIG. 10"]},{"@attributes":{"id":"p-0026","num":"0025"},"figref":["FIG. 13","FIG. 10"]},{"@attributes":{"id":"p-0027","num":"0026"},"figref":["FIG. 14","FIG. 10"]},{"@attributes":{"id":"p-0028","num":"0027"},"figref":["FIG. 15","FIG. 10"]},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 16"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 17"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 18"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 19"},{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 20"},{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIG. 21"},{"@attributes":{"id":"p-0035","num":"0034"},"figref":"FIG. 22"},{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIG. 23"},{"@attributes":{"id":"p-0037","num":"0036"},"figref":["FIG. 24","FIG. 23"]},{"@attributes":{"id":"p-0038","num":"0037"},"figref":"FIGS. 25A and 25B"},{"@attributes":{"id":"p-0039","num":"0038"},"figref":"FIG. 26"},{"@attributes":{"id":"p-0040","num":"0039"},"figref":["FIG. 27","FIG. 26"]},{"@attributes":{"id":"p-0041","num":"0040"},"figref":["FIG. 28","FIG. 26"]},{"@attributes":{"id":"p-0042","num":"0041"},"figref":"FIG. 29"},{"@attributes":{"id":"p-0043","num":"0042"},"figref":"FIG. 30"},{"@attributes":{"id":"p-0044","num":"0043"},"figref":"FIG. 31"},{"@attributes":{"id":"p-0045","num":"0044"},"figref":"FIG. 32"},{"@attributes":{"id":"p-0046","num":"0045"},"figref":["FIG. 33","FIG. 32"]},{"@attributes":{"id":"p-0047","num":"0046"},"figref":"FIG. 34"},{"@attributes":{"id":"p-0048","num":"0047"},"figref":["FIG. 35","FIG. 32"]},{"@attributes":{"id":"p-0049","num":"0048"},"figref":["FIG. 36","FIG. 32"]},{"@attributes":{"id":"p-0050","num":"0049"},"figref":["FIG. 37","FIG. 35"]},{"@attributes":{"id":"p-0051","num":"0050"},"figref":["FIG. 38","FIG. 36"]},{"@attributes":{"id":"p-0052","num":"0051"},"figref":"FIG. 39"},{"@attributes":{"id":"p-0053","num":"0052"},"figref":"FIG. 40"},{"@attributes":{"id":"p-0054","num":"0053"},"figref":"FIG. 41"},{"@attributes":{"id":"p-0055","num":"0054"},"figref":"FIG. 42"},{"@attributes":{"id":"p-0056","num":"0055"},"figref":"FIG. 43"},{"@attributes":{"id":"p-0057","num":"0056"},"figref":"FIG. 44"},{"@attributes":{"id":"p-0058","num":"0057"},"figref":["FIG. 45","FIG. 44"]},{"@attributes":{"id":"p-0059","num":"0058"},"figref":"FIG. 46"},{"@attributes":{"id":"p-0060","num":"0059"},"figref":["FIG. 47","FIG. 46"]},{"@attributes":{"id":"p-0061","num":"0060"},"figref":["FIG. 48","FIG. 47"]},{"@attributes":{"id":"p-0062","num":"0061"},"figref":["FIG. 49","FIG. 47"]},{"@attributes":{"id":"p-0063","num":"0062"},"figref":["FIG. 50","FIG. 47"]},{"@attributes":{"id":"p-0064","num":"0063"},"figref":"FIG. 51"},{"@attributes":{"id":"p-0065","num":"0064"},"figref":"FIG. 52","b":["1","3","4","2","4","6"]},{"@attributes":{"id":"p-0066","num":"0065"},"figref":"FIG. 53","b":["1","2"]},{"@attributes":{"id":"p-0067","num":"0066"},"figref":"FIG. 54"},{"@attributes":{"id":"p-0068","num":"0067"},"figref":"FIG. 55","b":"1"},{"@attributes":{"id":"p-0069","num":"0068"},"figref":"FIG. 56","b":"1"},{"@attributes":{"id":"p-0070","num":"0069"},"figref":"FIG. 57","b":"2"},{"@attributes":{"id":"p-0071","num":"0070"},"figref":"FIG. 58","b":["1","2"]},{"@attributes":{"id":"p-0072","num":"0071"},"figref":"FIG. 59","b":"58"}]},"DETDESC":[{},{}]}
