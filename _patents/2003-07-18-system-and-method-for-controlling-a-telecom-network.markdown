---
title: System and method for controlling a telecom network
abstract: A system for controlling a telecommunications network, e.g., a public switched switching network, which has a first switch fabric, for controlling connections or calls in the network. This fabric has first and second ports, and third ports for communicating with, e.g., a second switch fabric and/or peripheral apparatus. A bridging circuit, also located within the network, may be connected between the first and second ports. A computer apparatus, external to the network, is connected to the first and the second ports of the first switch fabric in order to control connections among the first, second and third ports.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07760714&OS=07760714&RS=07760714
owner: Koninklijke KPN N.V.
number: 07760714
owner_city: The Hague
owner_country: NL
publication_date: 20030718
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["FIELD OF THE INVENTION","BACKGROUND","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION"],"p":["The invention relates to a system and method for controlling a telecommunication network.","It is known that a telecommunication network is operated by interconnected switches. An example of such a network is the Public Switched Telecommunications Network (PSTN). This network may be combined with a radio telecommunications network for mobile communication.","The switches route calls from one subscriber to another, by passing control data and voice data along circuits, which are the interconnecting links among the switches in the network.","A subscriber may be connected to the network via a network access point using a peripheral apparatus, such as a telephone, a modem, an answering device, IVR equipment, conference call hardware or any apparatus used for communication via or interfacing with the network. Likewise, a voice service such as teleconferencing, news, weather forecast, traffic announcements or any other service may be connected to the network via a network access point also using a peripheral apparatus. A peripheral apparatus may originate connections or calls or receive them and has control circuitry to control these calls.","Similarly, each switch has its own control circuitry for connecting a call to another switch. The control circuitry implements rules telling the switch what to do with an incoming call. A call is originated by communicating a control signal from a peripheral apparatus to a switch and a peripheral apparatus receives a call by receiving control signals from a switch. Upon acceptance of the control signals, a voice connection is established between the switch and the peripheral apparatus via a voice-only circuit.","Once a call is received by one switch, whereby the call is accompanied with control data, the switch will on the basis of that control data route the call to a next switch or to another peripheral apparatus or service, whereby voice-only circuits are used to carry the voice data.","The path through the network from a peripheral apparatus to a particular switch may be referred to as one leg of a call or a half call. The path from that switch to another peripheral apparatus may be referred to as the other leg of the call or other half call.","In some cases, simple routing or switching is not enough. It may be desirable that a call is connected to a service, e.g., an information service. In other cases, more complex switching is required, e.g., in the case of call forwarding where a subscriber has moved to another number.","\u201cIN\u201d (Intelligent Networking) was introduced to perform such services. Switches connected to IN systems detect calls which require special treatment. The control signals of such calls are diverted to the IN system where decisions are made on the further treatment of the call. The result of these decisions is communicated to the switch, which will treat each such call accordingly.","Nowadays, there is a need for call control from a different perspective. With the emerging of computer networks, Internet, LANs and WANs, a need arises to be able to control telecom connections from the computer environments. IN provides for such possibilities. It is now possible to initiate a call or service from a computer network which is connected to an IN system, which is, in turn, connected to a switch and thereby able to establish calls, whereby the two legs of the call have their starting point at the switch connected or controlled by the IN system.","IN systems however are expensive and are limited in their functionality. They are bound by telecom standards, which evolve slower than the information technology now available.","The U.S. Pat. No. 6,337,858 discloses a further development, whereby a switch fabric is used outside of the telecom network. This switching fabric, comprising switch and switch control means is connected to and controlled by computer telephony hardware. This architecture is referred to as computer telephony integration (CTI) hardware. In this architecture, it is possible to set up a first call from the switching fabric to a first peripheral apparatus and a second call from the switching fabric to a second peripheral apparatus. Both calls constitute a leg to the respective peripheral apparatuses. After the legs have been set up, the CTI than bridges the calls.","This architecture gives control over both legs of the call. The result is great flexibility of building calls from the CTI environment. The CTI may be part of the Internet, a LAN or a WAN. Thereby, all kinds of users may be enabled to create telecom services in relation to, for example, a Web based service.","Despite the advantages of the solution disclosed in U.S. Pat. No. 6,337,858, a switch fabric outside of the telecommunication network is required. Switches are expensive equipment.","It is therefore a first object of the invention to provide a system for controlling a telephony network, to control at least two call legs, which are bridged within the telecom network using conventional switches.","It is a further object to provide a method for controlling a telephony network, for controlling at least two call legs within the telephony network using conventional control commands.","This first object of the invention can be achieved by a system for controlling a telephony network, for example a PSTN network which comprises switch apparatus, which may be present in the telephony network. The switch apparatus may have ports, used for connecting to further switch fabric or peripheral apparatus in the telecom network. Each port can have a control section and a voice data section. The switch apparatus may be arranged to receive control commands via the control sections of the ports for controlling connections or calls between the ports. A bridging circuit may be connected between the voice data sections of a first port and a second port. At least one third port being connected to the telecom network may be present. The system may further comprise a computer apparatus for communicating with the switch apparatus, arranged to send a first control command to the control section of the first port of the switch apparatus. The computer apparatus may also be arranged to send a second control command to the control section of the second port of the switch apparatus.","The connection from the at least third port to a peripheral apparatus may be completed according to normal call completion, by propagating appropriate control signals and subsequent switching in intermediate further switch fabric between the at least third port and the peripheral apparatus.","In this manner, a connection may be controlled between a first peripheral apparatus and a second peripheral apparatus via two independent connections, which are bridged via the bridging circuit. This provides the freedom of control necessary to provide services to subscribers where on-the-fly and seamless connections between subscribers may be altered, rerouted, re-rated and many other possibilities while using standard switch apparatus and where no IN system is required.","In an embodiment of the invention where the computer apparatus may be arranged to receive control signals from the switch apparatus, it is advantageous to start a particular service on the receipt of a control command.","The control commands are routed to the computer apparatus by the switch apparatus. The service may comprise the control of another half call, which may be bridged by the voice-only circuit.","In a further embodiment, where the computer apparatus may comprise a server, connected via a computer network, where the server is arranged to communicate with the switch apparatus and to perform a service upon receipt of a command from the user terminal, it is particularly advantageous to initiate services from a user terminal. The user terminal may be connected to the computer apparatus via the Internet. Users may initiate a telecom service while using the Internet or any other computer network.","In a further embodiment of the invention, where the computer apparatus may comprise a signalling gateway, that may be arranged to communicate with the server via a communications link or the computer network, and the signalling gateway may comprise a first and a second communication port that communicate with the control section of the first and second port respectively of the switch apparatus, it is advantageous that the further computer apparatus, the server and user terminals need not directly interface to the switch apparatus. This is achieved by commercially available signalling gateway, which is arranged to communicate with switch apparatus and may be controlled by simple commands, also known as events.","In a further embodiment, wherein the switch may comprise one switch, having the first and second ports with the bridging circuit between the voice data sections of the two ports and at least one third port connected to the telecom network, it is particularly advantageous to utilize two free ports on a switch already available in the telecom network. Even if such ports are not available, it is a standard routine procedure to add extra ports to a conventional switch, thereby making it very simple and cheap to add the functionality of setting up connections as described in the first object of the invention.","In a further embodiment of the invention, where the switch apparatus may comprise at least two switches, having the bridging circuit between the voice data sections of one port of one switch and one port of a second switch, and the at least two switches are connected to the telecom network via at least one port on each switch, it is advantageous to have the possibility to use an existing voice-only circuit as a bridging circuit between two switches to install the functionality of setting up connections as described in the first object of the invention. This may be necessary if spare ports are not available or possible in one switch.","The further object of the invention can be achieved by a method, where a computer apparatus may be arranged to communicate with the control sections of a first and second ports of a switch apparatus. The method may comprise the steps of controlling a first connection between a first circuit of the first port with a first peripheral apparatus accessible via at least one third port of the switch apparatus, and may further comprise the step of controlling a connection between a second circuit of the second port with a second peripheral apparatus accessible via at least one third port of the switch apparatus, whereby the first and second ports are connected via a bridging circuit and the first and second circuits are matched.","This is particularly advantageous, since standard control methods may be used to control the switch apparatus, so no special switch outside the telecom network is necessary, to control a connection which is made up of two independent connections, that are bridged via the bridging circuit.","In an embodiment of the invention, where the computer apparatus may comprise a server and at least one user terminal, connected via a network, and the server may be arranged to communicate with the switch apparatus, the method may have the steps of the server performing a first service upon receipt of a command from a user terminal, and the service has the steps of communicating control commands to the switch apparatus, advantageously the switch apparatus may be controlled by a issuing a command from a user terminal, i.e., while using the Internet or any other computer network. Various kinds of services may be conceived using the Web as a starting point for all kinds of telecom services using the telecom network.","In a further embodiment of the invention, where the computer apparatus may be arranged to receive control messages from the switch apparatus, the method may comprise the steps of the server performing a second service upon receipt of a command from the switch apparatus, the service comprising the steps of communicating control commands to the switch apparatus, the invention has the advantage of being able to define services initiated by telecom network events without having to adapt the telecom network itself. Only relatively inexpensive computer apparatus is needed to perform such services and which may be developed on a platform appropriate for a server, user terminal and network environment.","In a further embodiment of the invention, where the computer apparatus may further comprise a signalling gateway, the method further comprising the steps of generating an event in the server, the server communicating the event to the signalling gateway, the signalling gateway translating the event in a control command, the signalling gateway communicating the control command to the switch apparatus via the control section of the first or third port, it is advantageous to generate simple telecom events in the server which are translated by a commercially available signalling gateway, e.g., a Milborne.","The invention may be embodied using the elements described in this document in various combinations.",{"@attributes":{"id":"p-0039","num":"0038"},"figref":"FIG. 1","b":["1","2","15"]},"The telecom network  basically represents a PSTN network, but any telecom network having switches, including soft switches may apply. The network  may also include switch fabric and radio base stations for mobile telecommunication services like GSM or any other way of mobile telecommunication. Furthermore, the network  may also include voice gateways acting as switching interfaces between a telecom network and for example an IP network (Voice-Over-IP).","The first switch fabric  for switching calls or connections has communication ports  for communicating among the further switch fabric  or with peripheral apparatuses . The ports  communicate having a control section  and a voice data section . The control sections  are used for passing connection control data; the voice data sections  are used for passing the voice data. The control and voice data sections may include separate electrical connectors for connecting a cable, but they may also be combined in a single connector. In another embodiment, the control and voice data sections ,  may share the same connection. This is, for instance, the case where peripheral apparatuses  are connected with switch fabric, using one pair of conductors only, and where control and voice data share the same connection.","The peripheral apparatuses  may be any equipment used by end users or used for interfacing voice or data sources with the network, such as telephones, fax, modems and the like.","According to the invention, two ports , of ports  are reserved, whereby a bridging circuit  connects the voice data sections , which is a common way of connecting the voice part of calls or voice connections from one switch to another. The control sections  of the ports , however are connected to a computer apparatus  by means of control links  and .","The computer apparatus  is capable of communicating with the ports  and  of the first switch fabric , and thereby controlling calls or connections made via those ports  and .","These ports ,  may be instructed using control commands by the computer apparatus  to establish or terminate or any other form of control of connections or calls which may pass through the ports  or .","The computer apparatus  may for example issue a first command  telling the first switch fabric  to establish a first connection or half call between the voice data section  of port  and a peripheral apparatus  via one of third ports  of ports . The first switch fabric  and the further switch fabric  make the connection using circuits  and control links . Circuits  may be combined in a trunk.","Control links ,  and  may be combined in a control network. A C7 control network is an example of such a network, whereby switches in a telecom network exchange their control signals or commands via a common control network. A control link thus may be a virtual link defining a communication channel from one point in the control network to another.","A circuit  and a control link  are connected to the voice data section  and the control section  respectively of the at least one third port  on the first switch fabric . On the further switch fabric , the circuit  and control link  are connected to corresponding control and data sections , of further ports .","The computer apparatus  may also issue a second command  controlling the first switch fabric  to establish a second connection or half call between the voice data section  of port  and a peripheral apparatus  via one of third ports .","The two half calls are than bridged by the bridging circuit . So a first subscriber may receive a call ultimately via port , a second subscriber may receive a call via port . Since both half calls are bridged via bridging circuit  both subscribers may communicate with each other.","The computer apparatus  may also issue commands for terminating the connections or half calls established via the ports  or  using the first switch fabric . Thus it is possible to disconnect one of the subscribers, e.g., the second subscriber, establish a new half call to a third subscriber, such that the first subscriber can now communicate with the third subscriber, without the first subscriber having to disconnect.","The commands issued or received by the computer apparatus may comprise various C7 signalling protocols (such as MTP Layers 1-3, ISUP, SCCP, TCAP, INAP, MAP or SMS). The control links  and  and the control links  may be C7 links or any connection type used for communicating control signals or commands between switches. For commonly used switches, very often ISUP protocols apply.","In this manner, the object of the invention is achieved. It is now possible to flexibly bridge and independently establish half calls or connections under computer control, using standard switches. So modern services, through which subscribers are dynamically connected, can be developed and implemented in any existing telecommunications network.","A voice section  of a port  may be known by its CIC (Circuit Identification Code). A bridging circuit  or a circuit  connected to a voice sections  of two of ports . The circuits may be realized in the form of fibers or wires in a cable, but also as multiplexed circuits whereby voice data is sent over a single communication line, e.g., a glass fiber. A circuit  may also be part of a wireless connection.","Using circuits, the first switch fabric  may be instructed by the computer apparatus  to control a first call between a circuit in the voice-data section  of a port , e.g., port , and another circuit in the voice data section  of another third port , e.g., one of ports .","A second half call may then be controlled between a circuit in the voice-data section  of a second port , e.g., port , and yet another circuit in the voice data section  of another third port , e.g., one of ports . A bridging circuit , bridges the voice data sections  of ports  and .","In a further embodiment according to the invention, the computer apparatus  may also be arranged to receive incoming control commands from the first switch fabric . The commands may be detected and used for starting a particular behavior as part of a service for the subscriber that initiated the call that was switched to, e.g., port  of the first switch fabric .","Examples of services using command detection are:\n\n","In a further embodiment according to the invention, the computer apparatus  may also be arranged to receive control commands on one control port connected to the first switch fabric  and pass them to a second control, also connected to the first switch fabric  to allow the normal passage of control commands from one port to another.","The computer apparatus  may detect if an incoming control command represents a request for a particular service. If not, the control command may be passed on to the second control port. For these control commands, the computer apparatus behaves transparently.","In a preferred embodiment according to the invention, the first switch fabric  comprises one switch that has the first, second and the at least one third ports (, and ). The invention may be realized this way for example by using spare ports  in a switch, which is already in place in the telecom network . The telecom network  may also be expanded, adding a switch and configuring it according to the invention.","Network administration is simple, since only a single location of the switch is involved.",{"@attributes":{"id":"p-0063","num":"0065"},"figref":"FIG. 2","b":"2"},"In this embodiment a circuit connects a first port  (not specifically shown) at a first switch  to a second port  (not specifically shown) at a second switch  thereby forming the bridging circuit . The corresponding control links of ports  and  communicate with the control ports of the computer apparatus , thus establishing the first control link  and the second control link  by which the computer apparatus  controls the first switch fabric  as described.","This configuration allows for situations where spare circuits between two switches can be utilized to realize the invention.","By arranging the computer apparatus  to have the ability of to pass control command from one control port to another, the control links which now communicate with the computer apparatus can still be used for normal telephone traffic. Incoming control commands from the control ports of the switch fabric  can be intercepted in the computer apparatus . Control commands needed for normal traffic, not needed for services according to the invention, may be passed from the first control port to the second control port or vice versa. Control commands needed for services according the invention are not passed from one control port to another but interpreted and handled as required for a service according to the invention.","This situation can be applied between two switches on the same aggregation level within the network , but also between two switches at different levels, between switch and a RAC\/RAP (Routing and Access Controller\/Radio Access Point) or between a switch and a voice gateway (e.g., Voice-Over-IP gateway).",{"@attributes":{"id":"p-0068","num":"0070"},"figref":"FIG. 3","b":"10"},"For the computer apparatus , various architectures may apply. The simplest form may be that the computer apparatus  comprises a server  or a workstation acting as a server, which has communication ports that connect to the first switch fabric  via the control links  and . The server  or workstation comprising a processor, volatile memory, static memory usually in the form of a magnetic disk, is arranged to execute programs that enable the server  or workstation to perform as a control system. The server  or workstation may also be equipped with a display and input means for communicating with a user, who may develop or operate application software on this server  or workstation.",{"@attributes":{"id":"p-0070","num":"0072"},"figref":"FIG. 4","b":["10","10","22","11","12","22","2","1","21","22","23"]},"Signalling gateways are commercially available products. The one used for prototyping is a \u201cMilborne\u201d from Telesoft Technologies.",{"@attributes":{"id":"p-0072","num":"0074"},"figref":"FIG. 5","b":"10"},"In this embodiment, the server  and the signalling gateway  are connected to a private computer network , which may be a LAN or a WAN, via respectively a first connection  and a second connection . The private computer network  may then be connected, routed or bridged via a bridging means  which may also include a firewall to a public computer network , for example the Internet.","A user may gain access to the server  via said public and private networks  and  via bridge . The server  be arranged to provide web services which can be used, initiated or monitored from user terminals  like personal computers or workstations. An example of such a web-based service may be \u201cWeb-initiated call setup\u201d, whereby a telephone call can be initiated from a web\/IP-based interface.","In this service, the server  is arranged to present a user a field on a display of his user terminal  where the user can type in a first and a second phone number. The user may then be presented with a button which, when clicked on, will result in an action from the server  sending control commands to the signalling gateway  which will then send appropriate commands to the first switch fabric  to establish or control two half calls between peripheral apparatuses  (not specifically shown in ) which correspond to the first and second phone number.","In the previous described example of call conferencing, the switching of the half calls from the first conference call hardware to the second may also be controlled via a web interface by at least one of the subscribers, where the web interface communicates with the server  in the computer apparatus.","The invention further enables smart routing with functions like routing depending on time, day, user-settings, calling-party, called-party, etc.","Example services are:\n\n","The invention can be used in various call completion scenarios in such a way that tromboning can be prevented.","Tromboning occurs when, for control purposes, a call is routed from one switch to a side path one or more further switches deep and then routed back to the switch where the side path begun.","Since the invention does not switch the voice paths, but handles control commands only, no tromboning from the ordinary telephone network will occur. Thus, the invention enables changing the destination of a call without trombones during call set up after answer.","Another feature of the invention is that as far as the computer apparatus  initiates half calls, it is also the computer apparatus  that is responsible for and in control of generating call detail records (CDR's) for billing.","Services may then be freely programmed to perform billing to users, not limited by the CDR generation rules as they are implemented in the telecom network ."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The invention is explained according the figures summarized as below.",{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0035","num":"0034"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0037","num":"0036"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0038","num":"0037"},"figref":"FIG. 5"}]},"DETDESC":[{},{}]}
