---
title: Software-based acceleration color correction filtering system
abstract: A color correction filtering system filters color video data by compensating for non-linearities and color characteristics specific to a color monitor. Color video data is received by the system, for example through a web browser, and in an accelerated manner passed through a pre-calculated gamut-shifting array. The color correction filtering system gamma decompensates incoming color video data referenced to a non-linear color space through use of a linearization filter. The gamut-shifting array may contain pre-calculated compensation values stored in a plurality of look-up tables. A non-linearization filter is applied to the gamut-shifted color video data to produce color video data compensated for non-linearities specific to the color monitor.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07106344&OS=07106344&RS=07106344
owner: Hewlett-Packard Development Company, L.P.
number: 07106344
owner_city: Houston
owner_country: US
publication_date: 20040830
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","STATEMENT REGARDING FEDERALLY SPONSORED RESEARCH","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF INVENTION"],"p":["This application is a continuation of application Ser. No. 09\/893,657 filed on Jun. 28, 2001 now U.S. Pat. No. 6,826,303.","Not applicable.","1. Field of the Invention","The present invention relates to color management in computer monitors and, in particular but not by way of limitation, to systems and methods for correcting color displayed on computer monitors and to systems for displaying those corrected colors.","2. Background and Related Art","In computer systems, the digital representation of color is in terms of variable mixes of three basic colors: red, green and blue (RGB). The human visual system predictably perceives the close juxtaposition of these three basic colors as one resultant color. This illusion is the basis for color image processing. That is, it possible to manipulate the intensity mix of the three basic constituent colors (red, green, and blue) to cause a viewer to perceive various desired color shades. In fact, a whole range of colors may be perceived in this manner.","In the present computer graphics systems, red, green, and blue colors are mixed by a graphics controller that usually handles the intensity control of each basic color using a 6\u20138 bit control\u2014referred to as an intensity value. Generally, the working range of intensity values are from 0 to 255; 0 meaning that the corresponding basic color is completely dark (at 0%) and 255meaning that the corresponding basic color is at maximum intensity (at 100%). Intensity values between 0 and 255 produce corresponding, but not necessarily, proportional changes in actual displayed brightness for the corresponding color and, thus, corresponding changes in resulting perceived color.","For a high fidelity color system, the monitor must predictably display the correct shade of color that is represented by any mix of red, green and blue. However, a monitor can only display the correct shade of color if the intensities of each color component can be precisely controlled. Present display systems generally lack such precise control and, accordingly, display inaccurate colors. That is, because most computer systems cannot precisely control color intensities, a particular mix of colors may be viewed on one monitor, for example, as blue and on another monitor as blue-green.","In most cases, the variances in basic color points from one monitor to the next are only slight. However, even these small variances can result in a viewer perceiving different colors. The need for each monitor to display the same color is becoming more critical with the growth of web-based commerce. For example, retailers need to provide electronic shoppers with accurate depictions of their products. In particular, clothing retailers need to provide electronic shoppers with accurate colors, i.e., the \u201ctrue-color\u201d, of their products. Unless the retailer can convey the actual color of their products to its customers, those customers likely may become disappointed because the product that they received is different from the product that they thought that they ordered.","Presently, sRGB monitors have the ability to precisely control intensities and, thus, the ability to display accurate colors. sRGB monitors are specially designed to utilize a standard non-linear color space that is reliably consistent across all sRGB monitors. sRGB monitors, however, are very difficult to manufacture and are prohibitively expensive. Accordingly, attempts have been made to adjust typical computer monitors to more accurately display colors. These attempts have generally been less than satisfactory because they require human intervention (thereby interjecting a subjective element to color determination).","Other attempts to correct color deficiencies have similarly proven less than accurate typically as a result of insufficient data. For example, measured monitor specific color response data may not be available and instead color data is only estimated across large batches of manufactured monitors. Likewise, flaws in the monitor specific output measurement itself can cause inaccuracies.","Even with reliable monitor specific data, color correction attempts have proven unsuccessful as a result of system speed requirements. The number and time of processing computations to obtain a corrected output have been prohibitive. For example, video data color filtering for personal computer systems has involved fetching color video data from video memory, performing several multiplication and addition operations on the color video data, and writing the modified color video data back to the video memory. This process has been quite time consuming due to the processing time required for multiplication operations, with each multiplication operation taking on the order of one hundred times that of one addition operation. Since processing time associated with video data color filtering determines how quickly video images are displayed to personal computer users, video data color filtering is even avoided altogether with certain personal computer systems. Other attempts have taken shortcuts through approximation of color values, for example, in order to save valuable computational processing cycles. These shortcuts, however, fail to account for monitor specific color differences and thus result in less than accurate color transformation.","Briefly, a color correction filtering system filters color video data by compensating for non-linearities and color characteristics specific to a color monitor. Color video data is received by the system, for example through a web browser, and in an accelerated manner passed through a pre-calculated gamut-shifting array. The color correction filtering system gamma decompensates incoming color video data referenced to a non-linear color space through use of a linearization filter. The gamut-shifting array may contain pre-calculated compensation values stored in a plurality of look-up tables. A non-linearization filter is applied to the gamut-shifted color video data to produce color video data compensated for non-linearities specific to the color monitor.","The following related patent applications are hereby incorporated by reference as if set forth in their entirety:","U.S. patent application Ser. No. 09\/893,396 entitled \u201cHardware-Based Acceleration Color Correction Filtering System,\u201d filed concurrently;","U.S. patent application Ser. No. 09\/499,160, Entitled \u201cMETHOD FOR COLOR MANAGEMENT ON A DISPLAY DEVICE,\u201d by Henry M. D'Souza, William H. Nott, and Gokalp Bayramoglu, filed Feb. 7, 2000; and","U.S. patent application Ser. No. 09\/362,080, entitled \u201cMethod Apparatus For Computing Optimum Polynomial Coefficients To Represent The Input-Output Characteristics Of A Color Display Device,\u201d by Henry M. D'Souza, William H. Nott, and Gokalp Bayramoglu, filed Jul. 27, 1999.","The illustrative system described in this patent application generally provides techniques for accelerated color correction filtering. For purposes of explanation, specific embodiments are set forth by the understanding of the illustrative system. However, it will be understood by one skilled in the art, from reading this disclosure, that the techniques can be practiced without these details. Further, although the embodiments are described in terms of an RGB color scheme, it should be understood that this embodiment is illustrative and is not meant in any way to limit the practice of the disclosed system to an RGB color scheme. Also, the use of Internet images to illustrate how the system works is not intended to infer that the illustrative system requires Internet interface or communication. Rather, any of a variety of input sources may be employed in practicing the techniques described herein. Moreover, well-known elements, devices, process steps and the like, are not set forth in detail in order to avoid obscuring the disclosed system.","Referring to , a color correction system  is depicted. A web browser application  is stored within the computer system , such as a desktop personal computer. The web browser  receives images  through communication with the Internet . The computer system  contains video memory  which receives the color video data of images . A graphics controller  reads the information stored in the video memory  and communicates the image data to a non-linear color monitor . According to one embodiment, a color management module  is enabled to provide color correction data to the graphics controller  for the image data stored in video memory . The color correction operates to shift perceived color of the incoming color data to perceived color that is suitable for displaying the output color data on the monitor . One exemplary color correction or compensation method and apparatus is disclosed in the commonly-assigned U.S. patent application Ser. No. 09\/499,160, entitled \u201cMethod For Color Management On A Display Device,\u201d incorporated herein by reference in its entirety.","The color management module  uses monitor specific color characteristics  and monitor specific input-output characteristics  to perform color correction for the monitor . These characteristics are calculated and stored in the custom monitor profile , as part of the operating system . Examples of a suitable operating system with color management support is Windows 98, Windows Millennium Edition, or Windows 2000. These operating systems provide Integrated Color Management (ICM) 2.0 APIs (application programming interfaces). The custom monitor profile  is auto-generated and registered into the operating system  for use by the color management module . The monitor specific input-output characteristics  stored in the custom monitor profile  are used in a number of gamma decompensating look-up tables (discussed in more detail with reference to ) to compensate for non-linearities specific to the monitor . The monitor specific color characteristics (color point data)  stored in the custom monitor profile  are used in a number of color filter array look up tables to compensate for color characteristics specific to the monitor . In one embodiment, the color point data is expressed in terms of CIE 1931 chromaticity coordinates (each ordered pair represents a specific color stimulus) which define the color gamut of the monitor (i.e., the entire range of perceived color of the monitor).","With the color management module  enabled, the processor  and graphics controller  perform monitor specific color correction on images read from the video memory . The details of one exemplary color correction filtering process is more fully described below with reference to . Color corrected data is output from the graphics controller  and the computer system  to the monitor . The monitor  then displays the real or true color image  which is color corrected according to the specific color characteristics and input-output characteristics of monitor . Thus, because the color correction system  performs the color correction based on color and input-output characteristics specific to the monitor  to which it is coupled, the output of the graphics controller  produces a real color image  that is consistent and uniform across all non-linear monitors regardless of make, model, or manufacturing inconsistencies causing non-linearities such as differing input-output characteristics. Furthermore, as discussed below, accelerated color correction is achieved through the use of pre-calculated color transform look-up tables. By replacing numerous processing intensive multiplication operations with less processing intensive look-up table operations, the disclosed color correction may be processed at the full rate of the graphics controller . In other words, the disclosed color correction system  accelerates the rate of color image display.","It is noted that this color correction system can be used for substantially any display device. Such display devices include, but are not limited to, color display devices, VGA (video graphics array) flat panel, liquid crystal display (LCD), reflective LCD and plasma display devices. Furthermore, although the present embodiment discusses images from the Internet, images from various other sources may also be color corrected by system . Other possible color image sources include peripheral input devices such as scanners, printers, cameras and photo-shop applications.","Turning to , shown is a more detailed representation of the operation of the graphics controller  of . Image data in the form of RGB values, representing the three constituent colors of red, green and blue, is input into a color filter . The color filter  receives the RGB input and outputs linearized RGB\u2032 values. The color filter  decompensates for the non-linear RGB input which is based on a standard color image gamma function. The color filter  includes a set of linearization tables with each table corresponding to a constituent color. The RGB\u2032 linearized values are then input into a gamut shifting array including a number of multiplication look-up tables (MLUTs) \u2013. Each MLUT is loaded with pre-calculated values that represent specific multiplication operations. In other words, each MLUT \u2013 replaces a specific, more time consuming multiplication processing operation.","The set of MLUTs \u2013, and more generally, the 3\u00d73 gamut shifting array or matrix, function to transform the color point data from one color space, such as a standard color space, sRGB, for example, to a color space that is specific to the monitor . MLUTs will be discussed in more detail below with reference to . The output values from each set of MLUTs \u2013 are then input into a corresponding set of hardware adder devices \u2013. The adders \u2013 sum each of the three MLUT output values to collectively obtain the RGB\u2033 output. According to one embodiment, the addition operation is performed by the adders \u2013 when data is requested. Finally, the output of adder devices \u2013 are communicated to a set of non-linearization color look-up tables (CLUTs) \u2013 which perform a final transformation to compensate for monitor specific input\/output characteristics, or non-linearities. More generally, other embodiments may utilize one linearization table, one non-linearization table, one adder and one pre-calculated gamut shifting array or a set of pre-calculated gamut shifting arrays per constituent color.","The MLUTs \u2013 represent a three-dimensional look-up table containing pre-calculated RGB component outputs for each of the 256 possible intensities of each primary color. The specific values pre-calculated and loaded into the MLUTs \u2013 are derived from an array representing the product of an array referenced to a standard color space (e.g., sRGB) and an array referenced to the specific color space of the connected monitor.","According to an embodiment, the derivation or these values is calculated according to a detailed multi-equation calculation. First, according to known techniques, input color data along with the maximum brightness for each corresponding color is converted to tri-stimulus data X, Y, Z. This data is then used in column format to make up a 3\u00d73 matrix. This matrix is then inverted and pre-multiplied by a similar matrix made up of standard tristimulus values corresponding to a sRGB monitor. The table values \u2013 of  are then determined by multiplying the resultant filter matrix above into each [R 0 0], [0 G 0] and [0 0 B] possibility where R,G & B each have values from 0\u2013255. In equation form:\n\nInputs:xyxyxyxy,\n","where x and y are two dimensional input color CIE chromatically chart coordinates;\n\n\u00d70.7\u00d70.7\u00d70.7\n\n\u00d70.7\u00d70.7\u00d70.7\n\n\u00d70.7\u00d70.7\u00d70.7,\n","where 0.7 is the maximum voltage output of the graphics controller . The 0.7 value also represents the maximum input to a display device resulting in the brightest possible intensity for the color channel.",{"@attributes":{"id":"p-0037","num":"0036"},"maths":[{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":["X","R"]},"mo":"=","mrow":{"mfrac":{"msub":[{"mi":["X","r"]},{"mi":["y","r"]}]},"mo":"\u00d7","msub":{"mi":["Y","R"]}}}}},{"@attributes":{"id":"MATH-US-00001-2","num":"00001.2"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":["Z","R"]},"mo":"=","mrow":{"mfrac":{"mrow":{"mo":["(",")"],"mrow":{"mn":"1","mo":["-","-"],"msub":[{"mi":["x","r"]},{"mi":["y","r"]}]}},"msub":{"mi":["y","r"]}},"mo":"\u00d7","msub":{"mi":["Y","R"]}}}}},{"@attributes":{"id":"MATH-US-00001-3","num":"00001.3"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":["X","G"]},"mo":"=","mrow":{"mfrac":{"msub":[{"mi":["x","g"]},{"mi":["y","g"]}]},"mo":"\u00d7","msub":{"mi":["Y","G"]}}}}},{"@attributes":{"id":"MATH-US-00001-4","num":"00001.4"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":["Z","G"]},"mo":"=","mrow":{"mfrac":{"mrow":{"mo":["(",")"],"mrow":{"mn":"1","mo":["-","-"],"msub":[{"mi":["x","g"]},{"mi":["y","g"]}]}},"msub":{"mi":["y","g"]}},"mo":"\u00d7","msub":{"mi":["Y","G"]}}}}},{"@attributes":{"id":"MATH-US-00001-5","num":"00001.5"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":["X","B"]},"mo":"=","mrow":{"mfrac":{"msub":[{"mi":["x","b"]},{"mi":["y","b"]}]},"mo":"\u00d7","msub":{"mi":["Y","B"]}}}}},{"@attributes":{"id":"MATH-US-00001-6","num":"00001.6"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":["Z","B"]},"mo":"=","mrow":{"mfrac":{"mrow":{"mo":["(",")"],"mrow":{"mn":"1","mo":["-","-"],"msub":[{"mi":["x","b"]},{"mi":["y","b"]}]}},"msub":{"mi":["y","b"]}},"mo":"\u00d7","msub":{"mi":["Y","B"]}}}}},{"@attributes":{"id":"MATH-US-00001-7","num":"00001.7"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":{"mrow":[{"mi":["Filter","Matrix"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}},{"mrow":[{"msup":{"mrow":[{"mo":["[","]"],"mtable":{"mtr":[{"mtd":[{"msub":{"mi":["X","R"]}},{"msub":{"mi":["X","G"]}},{"msub":{"mi":["X","B"]}}]},{"mtd":[{"msub":{"mi":["Y","R"]}},{"msub":{"mi":["Y","G"]}},{"msub":{"mi":["Y","B"]}}]},{"mtd":[{"msub":{"mi":["Z","R"]}},{"msub":{"mi":["Z","G"]}},{"msub":{"mi":["Z","B"]}}]}]}},{"mo":"-","mn":"1"}]},"mo":"\u00d7","mrow":{"mrow":{"mo":["[","]"],"mtable":{"mtr":[{"mtd":[{"msub":{"mi":["X","Rs"]}},{"msub":{"mi":["X","Gs"]}},{"msub":{"mi":["X","Bs"]}}]},{"mtd":[{"msub":{"mi":["Y","Rs"]}},{"msub":{"mi":["Y","Gs"]}},{"msub":{"mi":["Y","Bs"]}}]},{"mtd":[{"msub":{"mi":["Z","Rs"]}},{"msub":{"mi":["Z","Gs"]}},{"msub":{"mi":["Z","Bs"]}}]}]}},"mo":["\u2062","[","]"],"mstyle":{"mtext":{}},"mtable":{"mtr":[{"mtd":{"mrow":{"mi":"A","mo":"\u00d7","msub":{"mi":"R","mrow":{"mo":["(",")"],"mi":"n"}}}}},{"mtd":{"mrow":{"mi":"E","mo":"\u00d7","msub":{"mi":"R","mrow":{"mo":["(",")"],"mi":"n"}}}}},{"mtd":{"mrow":{"mi":"I","mo":"\u00d7","msub":{"mi":"R","mrow":{"mo":["(",")"],"mi":"n"}}}}}]}}},{"mrow":[{"mrow":{"mrow":{"mo":["[","]"],"msup":{"mtable":{"mtr":[{"mtd":[{"mrow":{"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mo":"\u2062","mi":"__"}},{"mrow":{"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mo":"\u2062","munder":{"mrow":{"mi":["filter","Matrix"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}},"mi":"__"}}},{"mi":"__"}]},{"mtd":[{"mi":"__"},{"mi":"__"},{"mi":"__"}]},{"mtd":[{"mi":"__"},{"mi":"__"},{"mi":"__"}]}]},"mi":"__"}},"mo":["[","]"],"mtable":{"mtr":[{"mtd":{"msub":{"mi":"R","mrow":{"mo":["(",")"],"mi":"n"}}}},{"mtd":{"mn":"0"}},{"mtd":{"mn":"0"}}]}},"mo":["\u2062","[","]"],"mstyle":{"mtext":{}},"mtable":{"mtr":[{"mtd":{"mrow":{"mi":"C","mo":"\u00d7","msub":{"mi":"G","mrow":{"mo":["(",")"],"mi":"n"}}}}},{"mtd":{"mrow":{"mi":"F","mo":"\u00d7","msub":{"mi":"G","mrow":{"mo":["(",")"],"mi":"n"}}}}},{"mtd":{"mrow":{"mi":"J","mo":"\u00d7","msub":{"mi":"G","mrow":{"mo":["(",")"],"mi":"n"}}}}}]}},{"mrow":[{"mrow":{"mrow":{"mo":["[","]"],"msup":{"mtable":{"mtr":[{"mtd":[{"mrow":{"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mo":"\u2062","mi":"__"}},{"mrow":{"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mo":"\u2062","munder":{"mrow":{"mi":["filter","Matrix"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}},"mi":"__"}}},{"mi":"__"}]},{"mtd":[{"mi":"__"},{"mi":"__"},{"mi":"__"}]},{"mtd":[{"mi":"__"},{"mi":"__"},{"mi":"__"}]}]},"mi":"__"}},"mo":["[","]"],"mtable":{"mtr":[{"mtd":{"mn":"0"}},{"mtd":{"msub":{"mi":"G","mrow":{"mo":["(",")"],"mi":"n"}}}},{"mtd":{"mn":"0"}}]}},"mo":["\u2062","[","]"],"mstyle":{"mtext":{}},"mtable":{"mtr":[{"mtd":{"mrow":{"mi":"D","mo":"\u00d7","msub":{"mi":"B","mrow":{"mo":["(",")"],"mi":"n"}}}}},{"mtd":{"mrow":{"mi":"H","mo":"\u00d7","msub":{"mi":"B","mrow":{"mo":["(",")"],"mi":"n"}}}}},{"mtd":{"mrow":{"mi":"K","mo":"\u00d7","msub":{"mi":"B","mrow":{"mo":["(",")"],"mi":"n"}}}}}]}},{"mrow":{"mo":["[","]"],"msup":{"mtable":{"mtr":[{"mtd":[{"mrow":{"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mo":"\u2062","mi":"__"}},{"mrow":{"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mo":"\u2062","munder":{"mrow":{"mi":["filter","Matrix"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}},"mi":"__"}}},{"mi":"__"}]},{"mtd":[{"mi":"__"},{"mi":"__"},{"mi":"__"}]},{"mtd":[{"mi":"__"},{"mi":"__"},{"mi":"__"}]}]},"mi":"__"}},"mo":["[","]"],"mtable":{"mtr":[{"mtd":{"mn":"0"}},{"mtd":{"mn":"0"}},{"mtd":{"msub":{"mi":"B","mrow":{"mo":["(",")"],"mi":"n"}}}}]}}],"mo":"="}],"mo":"="}],"mo":"="}],"mo":"="},"mo":","}}}]},"where n \u03b5{0 . . . 255}.","According to one embodiment, the MLUTs \u2013 can be implemented in hardware as illustrated in . The MLUTs \u2013 compensate for the color characteristic of the monitor  with each color channel. Each color channel is passed through one of the corresponding 256-byte look-up tables. Thus, according to a hardware embodiment, the video data is processed through hardware at the speed of the graphics controller  (i.e., at a substantially full video rate), eliminating multiplication operation processing time overhead and permitting substantially real time true color. Alternatively, in another embodiment, the three-dimensional look-up table can be implemented as a software filter to process the bit map data at speeds similar to the hardware application. The software filter is launched at boot up. It initially takes time to read the color characteristics  from the monitor  via the custom monitor profile  and to pre-calculate the look-up tables \u2013. The software filter then stores the look-up tables in the memory  or in the custom-monitor profile  for fast access. In either case, the hardware or software embodiment, true color output can be obtained at substantially full video rate automatically or alternatively can be observed in response to the touch of a button, for example.","According to one embodiment, each of the values for each MLUT \u2013 are pre-calculated and loaded upon start-up or boot-up of the system . According to another embodiment, the pre-calculated MLUT \u2013 values are loaded upon system  recognition that a new monitor has been connected to the system . The MLUT \u2013 values may also be recalculated and loaded upon user request, such as to provide for changes in monitor color characteristics over time.","Continuing with , RGB\u2032 values are fed into corresponding MLUTs. Each value R\u2032, G\u2032, B\u2032 is used as a pointer to a specific value of its corresponding MLUT. For example, the R\u2032 input to MLUT  will point to one of the values, 0\u2013255 possibilities, contained in MLUT . That value will represent the value of the R\u2032 input multiplied by the coefficient A. The gamut shifting array of  may also be termed an attenuation and mixing matrix. The gamut-shifting matrix coefficients are discussed in more detail below with respect to . An independent MLUT is provided for each coefficient of the gamut shifting array, such as shown in , also shown with actual coefficient values in . Although, according to the disclosed embodiment of , a total of nine MLUTs are utilized, the number of pre-calculated MLUTs may be of any number such that at least one MLUT is used for every multiplication operation that is replaced.","The equations of  illustrate the longhand version of the matrix equation of . As shown in , the 3\u00d73 matrix of  and  requires a total of nine look-up-tables to replace each of the required multiplication operations shown in . For example, to perform the color correction of R\u2032 to R\u2033, a sum of coefficient A multiplied by R\u2032, plus coefficient C multiplied by G\u2032, plus coefficient D multiplied by B\u2032, is calculated. A similar calculation is made for G\u2033 using coefficients E, F and H and for B\u2033 using coefficients I, J and K, as shown in . Each of these nine multiplication operations is pre-calculated and stored into a corresponding 256 byte multiplication look-up table. Because input values of R\u2032 consist of a finite data range, 0\u2013255, the multiplication look-up tables \u2013 are also limited to 256-bytes of data. For example, multiplication look-up table  replaces the multiplication operation of (A\u00d7R\u2032) in the equation of . MLUT  contains the product of every value of R\u2032 multiplied by the coefficient A. The R\u2032 input value acts as a pointer for MLUT . For example, an input R\u2032 value of 33 operates as a pointer within the MLUT  to the pre-calculated value of 33 multiplied by the coefficient A, which pre-calculated value is then output from the MLUT  to the adder  as one of its three inputs.","The combination of the three MLUTs \u2013 along with the adder  provides the color transformed output value R\u2033. As shown in , R\u2033 consists of the sum of three multiplication operations. However, as discussed above, multiplication operations can take up to 100 times the processing time required for a simple addition operation. Each multiplication look-up table replaces each multiplication operation with a much faster pointer\/look-up-table operation. The set of gamut shifting array multiplication look-up tables ,  and  contain 256 values representing every possible value of the R\u2032 input, ranging from 0\u2013255, multiplied by the coefficients A, E and I, respectively. Likewise, the set of gamut shifting array MLUTs ,  and  contain 256 byte values representing every value of the G\u2032 input, ranging from 0\u2013255, multiplied by the coefficients C, F and J, respectively. Similarly, the set of gamut shifting array MLUTs ,  and  contain values representing the value of the B\u2032 input, ranging from 0\u2013255, multiplied by the coefficients D, H and K, respectively. From , the resultant nine multiplication look-up tables \u2013 represent each multiplication operation. The adder devices \u2013 perform the summation of the three multiplication operations for each R\u2033, G\u2033, B\u2033 color corrected output. These outputs represent color video data that is compensated for monitor specific primary color chromaticity variations and monitor specific tonal\/brightness response non-linearity characteristics. In terms of brightness, R\u2033, G\u2033 and B\u2033 values represent brightness as compared to maximum brightness. These outputs will result in the originally intended image colors being rendered on the specific monitor after conversion to a non-linear color space.","Each of the R\u2033, G\u2033, B\u2033 values are then input into a corresponding non-linearization color look-up table, or CLUT, to compensate the linear input into a non-linear color video data compensated for the specific non-linearities of the monitor . A method and apparatus for obtaining monitor specific input\/output brightness characteristics is disclosed in the commonly-assigned U.S. patent application Ser. No. 09\/362,080, entitled \u201cMETHOD APPARATUS FOR COMPUTING OPTIMUM POLYNOMIAL COEFFICIENTS TO REPRESENT THE INPUT-OUTPUT CHARACTERISTICS OF A COLOR DISPLAY DEVICE,\u201d incorporated herein by reference in its entirety. Specifically, the original RGB values from web browser , intended for monitor  are in the form of non-linearized data such as sRGB data. The color compensating matrix operation of  is a linear operation. As such, filter  functions to convert the RGB data first from a non-linear format to a linear format. This linearization allows application of the linear transform performed by the matrix of . The CLUTs \u2013 then function as non-linearization tables, converting the linear RGB\u2033 output to a monitor specific RGB\u2032\u2033 non-linear function for reception by the monitor .","The CLUTs \u2013 perform the non-linearization transformation according to the monitor specific input-output characteristics  stored in the custom monitor profile . Specifically, these monitor characteristics are accessed or retrieved from the custom monitor profile . The CLUTs \u2013 are then loaded with the appropriate values according to a non-linearization compensation algorithm that takes account of the monitor specific input-output characteristics. One such method of computing the values of a non-linearization CLUT is described in previously incorporated U.S. patent application Ser. No. 09\/362,080, entitled \u201cMethod Apparatus For Computing Optimum Polynomial Coefficients To Represent The Input-Output Characteristics Of A Color Display Device.\u201d","Turning now to , shown are exemplary RGB signal values for the various inputs and outputs of . Each list of values \u2013 is a range of discrete values from 0 to 255 for each R, G, and B tristimulus value. Beginning, the RGB values of  represent the input color image data into filter . The output of filter  for each of the exemplary values of RGB  is listed as the linearized data set RGB\u2032 . These values represent the gamma decompensating function of filter . As is understood by a skilled practitioner in the art, the gamma function is standard in the industry for color image representation. However, as discussed in the prior filed commonly-assigned U.S. patent application Ser. No. 09\/499,160, entitled \u201cMethod And Apparatus For Color Management In Computer Monitors\u201d, the gamma function contains significant inaccuracies causing inconsistent color image display. Also as understood by a skilled practitioner in the art, several well known transformations exist to decompensate for gamma-based values. One such transformation is the linearization process set forth in the sRGB specification by International Electrotechnical Commission Draft Number IEC\\3WD 61966-2.1 (1998), incorporated herein by reference in its entirety. The filter , represented by the RGB\u2032 output , performs a linearization transformation and compensation on the gamma based input RGB data .","The RGB\u2032  linearized data is communicated to the series of MLUTs \u2013. Each respective R\u2032, G\u2032, B\u2032 value is utilized as a pointer into the respective multiplication look-up table. For each R\u2032, G\u2032, and B\u2032 value, a total of three multiplication look-up tables is used. Thus, according to an embodiment, the R\u2032 value output from filter  is input into MLUT ,  and . The G value output from filter  is likewise input into MLUT tables ,  and . Finally, the B value output from filter  is input into MLUT tables ,  and . For each set of RGB\u2032 look-up table inputs, the resultant value is fed to the respective adders \u2013 to obtain the corresponding RGB\u2033 values output represented by dataset . Thus, the RGB\u2033 data values  represent color data values that are transformed or shifted from a sRGB color space intended for a sRGB monitor to a color space that is specific to the monitor .","The RGB\u2032\u2033 dataset  is output from the color look-up tables \u2013 to produce RGB\u2032 values that are compensated according to monitor specific non-linearities and monitor specific color characteristics. This final compensation process is more fully disclosed in the commonly-assigned U.S. patent application Ser. No. 09\/362,080, entitled \u201cMethod Apparatus For Computing Optimum Polynomial Coefficients To Represent The Input-Output Characteristics Of A Color Display Device.\u201d The difference between the RGB\u2033 values  and the RGB\u2032\u2033 values  corresponds to compensation for the specific tonal reproduction characteristic (TRC) for the monitor  being used. The TRC can also be described as an input\/output brightness characteristic. As discussed in the commonly-assigned, previously incorporated U.S. patent application Ser. No. 09\/499,160, entitled \u201cMethod For Color Management On A Display Device\u201d, the TRC may be a polynomial curve or other mathematical representation, instead of a gamma function. Thus, the RGB\u2032\u2033 output value from CLUTs \u2013 are color transformed values representing color image values equivalent to that which would be displayed on an sRGB monitor where only a standard non-linear monitor is available.","Turning now to , shown are actual values for the filter array of , and as expanded in , according to an embodiment. The values of  represent the coefficients A, C\u2013F and H\u2013K of . These coefficient values are derived from the color point data  stored in the custom monitor profile . This color point data , according to one embodiment, is in the form chromaticity values which define the color gamut of the specific monitor (i.e., the entire range of perceived color for the monitor). As described above, the matrix values are determined from the color point data  according to the above calculations. Suitable values of this gamut shifting array should avoid truncation error. Thus, the RGB\u2032 values  are mathematically operated as illustrated in  through the summation, via adders \u2013, of three multiplication operations via multiplication look-up tables \u2013, containing the coefficients of , to obtain the RGB\u2033 values . According to the embodiment of , the MLUTs \u2013 replace processing intensive floating point multiplication operations.","According to an embodiment, the matrix values of the matrix  represent the filter array for transforming RGB\u2032 values to RGB\u2033 values. According to an embodiment, the matrix  is a product of four matrices:\n\n","The Bradford transform matrix and the inverse Bradford transform matrix can be readily utilized since the Bradford transform is implemented by Microsoft's color management module. However, other embodiments may not utilize the Microsoft color management module, which would then eliminate the need for the Bradford transform matrix and the inverse Bradford transform matrix. Conceptually, the desired product matrix can be viewed as the product of a matrix representing a gamut of a monitor in a desired color space, such as that of an sRGB monitor, and a matrix representing the actual gamut or color space of the specific monitor connected to the system. Although the sRGB color space is the desired color space in one embodiment, other gamuts may be of interest and utilized, such as the gamut of a Corbis monitor (Corbis RGB).","Therefore, with the monitor specific color transformation from RGB\u2032 to RGB\u2033 to compensate for color characteristics of the monitor  and the monitor specific non-linearity compensation to RGB\u2032\u2033, a real color image  is produced and displayed on monitor . These two forms of compensation in combination provide consistent color image display across different display devices. Image data intended for an sRGB display is corrected for display on for a non-sRGB monitor. The result is that the image displayed on the non-sRGB monitor matches the color characteristics of the image if it were displayed on a sRGB monitor before the disclosed color correction.","The color correction is accelerated by avoiding processing intensive and time consuming multiplication operations which would otherwise be required by the various transformations. Multiplication look-up tables are pre-calculated with all possible values of an incoming color component signal, providing a system with minimal processing overhead. In this way, complete color correction filtering is accomplished at substantially full video rates. The accelerated data processing and the attendant accelerated display allow enhanced display capabilities, including, for example, streaming movie images.","The foregoing disclosure and description of the invention are illustrative and explanatory thereof, and various changes in the formulas, monitor types, memory, graphic circuitry, look-up tables, multiplication operations, addition operations, the organization of the components and the order and timing of the steps taken, as well as in the details of the illustrated circuitry and software and hardware and construction and method of operation may be made without departing from the scope and spirit of the invention."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["A better understanding of the present invention can be obtained when the following detailed description of the preferred embodiment is considered in conjunction with the following drawings, in which:",{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":["FIG. 2","FIG. 1"]},{"@attributes":{"id":"p-0018","num":"0017"},"figref":["FIG. 3","FIG. 2"]},{"@attributes":{"id":"p-0019","num":"0018"},"figref":["FIG. 4","FIG. 3"]},{"@attributes":{"id":"p-0020","num":"0019"},"figref":["FIG. 5","FIG. 2"]},{"@attributes":{"id":"p-0021","num":"0020"},"figref":["FIG. 6","FIG. 3"]}]},"DETDESC":[{},{}]}
