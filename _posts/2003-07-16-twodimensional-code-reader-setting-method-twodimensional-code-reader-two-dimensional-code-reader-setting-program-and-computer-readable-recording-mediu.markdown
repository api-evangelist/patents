---
title: Two-dimensional code reader setting method, two-dimensional code reader, two dimensional code reader setting program and computer readable recording medium
abstract: An object of the present invention is to easily set a camera attachment distance of an image pick-up optical system, a combination of close-up rings and the like. When a user designates a specification of a desirable two-dimensional code such as a code type, a data type, a data volume, a printable space, or printing precision, a cell size and a symbol size of the two-dimensional code and the like are calculated in accordance therewith. Furthermore, an attachment condition of an image pick-up section such as an attachment distance limitation of the image pick-up section or a shift tolerance of a two-dimensional code label is specified. By inputting and calculating the condition for setting the image pick-up optical system of a two-dimensional code reader, thus, an appropriate camera attachment distance, a type of a close-up ring and a standard of a scale of a focusing ring are calculated automatically.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=06983886&OS=06983886&RS=06983886
owner: Keyence Corporation
number: 06983886
owner_city: Osaka
owner_country: JP
publication_date: 20030716
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DESCRIPTION OF THE PREFERRED EMBODIMENT"],"p":["1. Field of the Invention","The present invention relates to a two-dimensional code reader, a two-dimensional code reading method, a two-dimensional code reading program and a computer readable recording medium.","2. Description of the Related Art","At present, various symbols such as a bar code and a two-dimensional code are utilized in the field such as merchandise management. The bar code is also referred to as a one-dimensional code, a linear code or the like, and segments having various widths are linearly arranged adjacent to each other so that information such as alphanumerics can be represented by a bar portion and a blank portion, and a universal product code is represented, for example. On the other hand, the two-dimensional code is also referred to as a two-dimensional symbol, a three-dimensional bar code or the like and is a symbol in which information is arranged vertically and horizontally, and has a feature that a computerization density is high, more information can be stored than that in a bar code and errors can be corrected because of a redundant code. In recent years, therefore, the two-dimensional code has rapidly spread in various fields.","In order to read the bar code and the two-dimensional code, a bar code scanner or a two-dimensional code reader is utilized for an optical type information reader.  is a block diagram showing an example of the structure of a two-dimensional code reader. In the two-dimensional code reader shown in , an image pick-up section  for acquiring an image including a two-dimensional code  and an illuminating section  for providing an illumination when acquiring an image by the image pick-up section  are connected to a two-dimensional code reader body to be a decoding section . The illuminating section  uniformly illuminates a two-dimensional code. The image pick-up section  includes image pick-up optical systems, for example, a camera  and a lens . In the image pick-up section , the camera  includes an image sensor such as a CCD image element, and image data in a region including a two-dimensional code label are picked up by an image sensing technique using a CCD and the image of the two-dimensional code is projected onto a CCD area sensor and is converted into an electric signal. The signal thus converted is expanded onto a memory in the image pick-up section  and is fetched as an image. The two-dimensional code is cut out by an image processing from image data fetched as an image, and is changed into a binary and is thus decoded so that encoded information is read.","Thus, the two-dimensional code is read differently from the bar code and the two-dimensional code is cut and decoded by the image processing. For this reason, an image pick-up optical system such as an image sensor, a camera and a lens for reading an image is required. As compared with a bar code reader which does not require equipment such as a camera or an illuminator and can be handled comparatively easily, accordingly, there is a problem in that the two-dimensional code reader requires a work for setting two-dimensional code reading conditions such as image pick-up conditions. For a user who does not know much about the two-dimensional code, particularly, a work for setting the reading conditions takes a great deal of time and labor and is hard to carry out. Although the two-dimensional code can store information at a high density, the size of a cell to be a minimum unit constituting the two-dimensional code is reduced in some cases. In order to accurately read the two-dimensional code with high precision, it is necessary to reliably capture the two-dimensional code by an image pick-up optical system. More specifically, it is necessary to hold the whole two-dimensional code in the visual field of a finder of a camera and to accurately adjust the focus such that a photograph can be taken as largely as possible in the vicinity of a center and the details can be read. For this purpose, it is necessary to regulate various parameters such as the attachment distance of a camera, the thickness of a close-up lens and the scale of a focusing ring and to set the optimum conditions.","However, the conventional two-dimensional code reader has a drawback that such a setting work is very complicated. In particular, a beginning user cannot understand the meaning of each set item and cannot smoothly carry out a work for moving a focusing regulation direction and a visual field and for shifting a focal position, thereby creating difficulties. Actually, it is necessary to manually carry out confirmation and setting after much trial and error at a site where the two-dimensional code reader is used. Therefore, a great deal of time and labor are required. For example, if the optimum combination of the close-up lenses is to be decided, for example, it is necessary to variously change the number of the close-up rings and the combination thereof and to carry out attachment again. In order to exchange the close-up ring, it is necessary to loosen a screw type ring, to remove a lens from an image pick-up section at each time, to exchange the close-up ring and to attach a new close-up ring again. Such an exchange work requires a great deal of time and labor.","Conventionally, a correspondence table indicating the combination of the correspondence relationship for each parameter has been used to facilitate such a setting. In general, the correspondence table describing, in a matrix, the correspondence relationship between the items, for example, the thickness of a close-up lens to be used for an image pick-up optical system, the attachment distance of a camera, a focusing range, the size of a visual field, the thickness of the close-up ring and the standard of the scale of a focusing ring is printed or belongs to the setting manual of the two-dimensional code reader. A user needs to determine the optimum condition setting such that an optimum two-dimensional code can be read according to the kind of the two-dimensional code to be used by himself (herself), the printing state of the two-dimensional code, an environment and other conditions while comparing the correspondence tables. Also in this method, however, the user actually selects a necessary correspondence table while looking up the manual, and furthermore, manually carries out a work for searching for a desirable combination, which is complicated. Moreover, the correspondence table is to be prepared by hand and can be misplaced. Furthermore, the setting work is complicated for the user who does not know much about the two-dimensional code, and the setting itself cannot be carried out easily. For this reason, the complication cannot be eliminated.","The present invention has been made in consideration of such conventional problems. An object of the present invention is to provide a two-dimensional code reader setting method, a two-dimensional code read setting device, a two-dimensional code reader setting program and a computer readable recording medium which can readily carry out settings for reading a two-dimensional code.","In order to attain the object, a first aspect of the present invention is directed to a method of setting a two-dimensional code reader for reading a two-dimensional code by using an image pick-up section, including the steps of designating a specification of the two-dimensional code including any of a code type, a model, an error correcting level, a printing pattern, a data type for encoding the two-dimensional code, a data volume, a printable space and printing precision of the two-dimensional code, calculating the specification of the two-dimensional code including any of a cell size and a symbol size of the two-dimensional code in accordance with the designated condition, designating an attachment condition of the image pick-up section including any of an attachment distance limitation of the image pick-up section, a shift tolerance of a two-dimensional code label, presence or absence of rotation, a cell size of the two-dimensional code and a printing pattern, and calculating an attachment specification including any of the attachment distance of the image pick-up section, a focusing range, a size of a visual field, the number of pixels to be allocated to one cell, a total thickness of close-up rings, a combination of a thickness of each of the necessary close-up rings and the number thereof, and a standard of a scale of a focusing ring in accordance with the specification of the calculated two-dimensional code and the attachment condition of the image pick-up section.","Moreover, a second aspect of the present invention is directed to a method of setting a two-dimensional code reader for reading a two-dimensional code by using an image pick-up section, including the steps of designating a specification of the two-dimensional code including at least a volume of data to be encoded into the two-dimensional code and a printable space or a symbol size of the two-dimensional code, and calculating an attachment specification including at least an attachment distance of the image pick-up section and a total thickness of close-up rings in accordance with the calculated two-dimensional code specification.","Furthermore, a third aspect of the present invention is directed to the method of setting a two-dimensional code reader, in addition to the feature according to the second aspect, wherein a cell size of the two-dimensional code is calculated as the specification of the two-dimensional code based on at least the volume of data to be encoded into the two-dimensional code and the printable space or the symbol size of the two-dimensional code and is determined based thereon.","Furthermore, a fourth aspect of the present invention is directed to the method of setting a two-dimensional code reader, in addition to the feature according to the second or third aspect, wherein the cell size of the two-dimensional code is calculated as the specification of the two-dimensional code based on a maximum value which can be permitted as at least the cell size and a resolution of a printer of the two-dimensional code and is determined based thereon.","Furthermore, a fifth aspect of the present invention is directed to the method of setting a two-dimensional code reader, in addition to the feature according to any of the second to fourth aspects, further including the steps of designating an attachment condition of the image pick-up section including at least an attachment distance limitation of the image pick-up section, and calculating an attachment specification including at least an attachment distance of the image pick-up section and a total thickness of the close-up rings based on the specification of the two-dimensional code and the attachment condition of the image pick-up section.","Furthermore, a sixth aspect of the present invention is directed to the method of setting a two-dimensional code reader, in addition to the feature according to any of the second to fifth aspects, further including the steps of designating an attachment condition of the image pick-up section including any of at least a shift tolerance of a two-dimensional code label, presence or absence of rotation and a printing pattern, and calculating an attachment specification including at least an attachment distance of the image pick-up section and a total thickness of the close-up rings based on the specification of the two-dimensional code and the attachment condition of the image pick-up section.","Furthermore, a seventh aspect of the present invention is directed to a method of setting a two-dimensional code reader for reading a two-dimensional code by using an image pick-up section, including the steps of designating a specification of the two-dimensional code including at least a code type of the two-dimensional code, a volume of data to be encoded into the two-dimensional code, a cell size of the two-dimensional code and a printable space or a symbol size of the two-dimensional code, and calculating an attachment specification including at least an attachment distance of the image pick-up section and a total thickness of close-up rings in accordance with the calculated two-dimensional code specification.","Furthermore, an eighth aspect of the present invention is directed to a method of setting a two-dimensional code reader for reading a two-dimensional code by using an image pick-up section, including the steps of designating a specification of the two-dimensional code including at least any of a volume of data to be encoded into the two-dimensional code and a cell size of the two-dimensional code, and calculating an attachment specification including at least an attachment distance of the image pick-up section and a total thickness of close-up rings in accordance with the calculated two-dimensional code specification.","Furthermore, a ninth aspect of the present invention is directed to a method of setting a two-dimensional code reader for reading a two-dimensional code by using an image pick-up section, including the steps of designating a specification of the two-dimensional code including at least any of a cell size of the two-dimensional code and a printable space or a symbol size of the two-dimensional code, and calculating an attachment specification including at least an attachment distance of the image pick-up section and a total thickness of close-up rings in accordance with the calculated two-dimensional code specification.","Furthermore, a tenth aspect of the present invention is directed to a method of setting a two-dimensional code reader for reading a two-dimensional code by using an image pick-up section, including the steps of designating a two-dimensional code reading specification including at least any of a volume of data to be encoded into the two-dimensional code, a printable space or a symbol size of the two-dimensional code, and an attachment distance of the image pick-up section, and calculating an attachment specification including at least a total thickness of close-up rings in accordance with the calculated two-dimensional code reading specification.","Furthermore, an eleventh aspect of the present invention is directed to a method of setting a two-dimensional code reader for reading a two-dimensional code by using an image pick-up section, including the steps of designating a two-dimensional code reading specification including at least any of a volume of data to be encoded into the two-dimensional code, a cell size of the two-dimensional code, and an attachment distance of the image pick-up section, and calculating an attachment specification including at least a total thickness of close-up rings in accordance with the calculated two-dimensional code reading specification.","Furthermore, a twelfth aspect of the present invention is directed to a method of setting a two-dimensional code reader for reading a two-dimensional code by using an image pick-up section, including the steps of designating a two-dimensional code reading specification including at least any of a cell size of the two-dimensional code, and a printable space or a symbol size of the two-dimensional code, and calculating an attachment specification including at least a total thickness of close-up rings in accordance with the calculated two-dimensional code reading specification.","Furthermore, a thirteenth aspect of the present invention is directed to the method of setting a two-dimensional code reader, in addition to the feature according to any of the first to twelfth aspects, wherein at least any of an attachment distance of the image pick-up section related to calculation, a total thickness of close-up rings or a combination of a thickness of each of necessary close-up rings and the number thereof, a standard of a scale of a focusing ring, a length and width of a symbol of the two-dimensional code, a size of one cell, a length and width of a two-dimensional code label having the two-dimensional code printed thereon, a shift tolerance of the two-dimensional code label, presence or absence of rotation, and a relationship between a visual field and a symbol size is displayed in an image.","Furthermore, a fourteenth aspect of the present invention is directed to the method of setting a two-dimensional code reader, in addition to the feature according to any of the first to thirteenth aspects, wherein a candidate group of the total thickness of the close-up rings or the combination of the thickness of each of the necessary close-up rings and the number thereof is calculated, a focusing range is visually displayed for each of the candidates, any of the candidate groups displayed side by side is selected so that at least any of an attachment distance of the image pick-up section related to the selected candidate, a focusing range, a size of a visual field, the number of pixels to be allocated to one cell, the total thickness of the close-up rings, the combination of the thickness of each of the necessary close-up rings and the number thereof, and a standard of a scale of a focusing ring is displayed.","Furthermore, a fifteenth aspect of the present invention is directed to the method of setting a two-dimensional code reader, in addition to the feature according to any of the first to fourteenth aspects, further including the step of setting an operation of the two-dimensional code reader including any of specification of a code to be read by the two-dimensional code reader, specification of a reading operation, output, predictive maintenance information and communication.","Furthermore, a sixteenth aspect of the present invention is directed to a two-dimensional code read setting device for setting a two-dimensional code reading operation for reading a two-dimensional code by using an image pick-up section and decoding the two-dimensional code by using a two-dimensional code reader. The two-dimensional code read setting device includes a two-dimensional code specification designating section for designating a specification of the two-dimensional code including any of a code type, a model, an error correcting level, a printing pattern, a data type for encoding the two-dimensional code, a data volume, a printable space and printing precision of the two-dimensional code read by the image pick-up section, a two-dimensional code specification calculating section for calculating the specification of the two-dimensional code including any of a cell size and a symbol size of the two-dimensional code in accordance with the condition designated by the two-dimensional code specification designating section, an image pick-up section attachment condition designating section for designating an attachment condition of the image pick-up section including any of an attachment distance limitation of the image pick-up section, a shift tolerance of a two-dimensional code label, presence or absence of rotation, a cell size of the two-dimensional code and a printing pattern, and an image pick-up section attachment specification calculating section for calculating an attachment specification including any of the attachment distance of the image pick-up section, a focusing range, a size of a visual field, the number of pixels to be allocated to one cell, a total thickness of close-up rings, a combination of a thickness of each of the necessary close-up rings and the number thereof, and a standard of a scale of a focusing ring in accordance with the specification of the two-dimensional code which is calculated by the two-dimensional code specification calculating section and the attachment condition of the image pick-up section which is designated by the image pick-up section attachment condition designating section.","Furthermore, a seventeenth aspect of the present invention is directed to the two-dimensional code reader setting device, in addition to the feature according to the sixteenth aspect, further including a two-dimensional code reading operation setting section for setting an operation of the two-dimensional code reader including any of specification of a code to be read by the two-dimensional code reader, specification of a reading operation, output, predictive maintenance information and communication.","Furthermore, an eighteenth aspect of the present invention is directed to a two-dimensional code reader setting program for setting a two-dimensional code reader for reading a two-dimensional code by using an image pick-up section. The program causes a computer to implement functions of designating a specification of the two-dimensional code including any of a code type of the two-dimensional code, a model, an error correcting level, a printing pattern, a data type to be encoded into the two-dimensional code, a data volume, a printable space and printing precision, calculating the specification of the two-dimensional code including any of a cell size and a symbol size of the two-dimensional code in accordance with the designated condition, designating an attachment condition of the image pick-up section including any of an attachment distance limitation of the image pick-up section, a shift tolerance of a two-dimensional code label, presence or absence of rotation, a cell size of the two-dimensional code and a printing pattern, and calculating an attachment specification including any of the attachment distance of the image pick-up section, a focusing range, a size of a visual field, the number of pixels to be allocated to one cell, a total thickness of close-up rings, a combination of a thickness of each of the necessary close-up rings and the number thereof, and a standard of a scale of a focusing ring in accordance with the specification of the calculated two-dimensional code and the attachment condition of the image pick-up section.","Furthermore, a nineteenth aspect of the present invention is directed to the two-dimensional code reader setting program, in addition to the feature according to the eighteenth aspect, which further causes the computer to implement a function of: saving an image of the two-dimensional code acquired by the image pick-up section.","Furthermore, a twentieth aspect of the present invention is directed to the two-dimensional code reader setting program, in addition to the feature according to the eighteenth or nineteenth aspect, which further causes the computer to implement a function of: printing set contents which are calculated.","Furthermore, a twenty-first aspect of the present invention is directed to the two-dimensional code reader setting program, in addition to the feature according to any of the eighteenth to twentieth aspects, which further causes the computer to implement a function of: saving the calculated set contents in a file.","Furthermore, a twenty-second aspect of the present invention is directed to a computer readable recording medium recording the two-dimensional code reader setting program according to any of the eighteenth to twenty-first aspects. The recording medium includes a magnetic disk, an optical disk, a magneto-optical disk, a semiconductor memory and other media capable of storing a program, for example, a CD-ROM, a CD-R, a CD-RW, a flexible disk, a magnetic tape, an MO, a DVD-ROM, a DVD-RAM, a DVD-R, a DVD-RW, a DVD+RW and a DVD+R.","Hereinafter, an embodiment of the present invention will be described with reference to the drawings. In the following embodiment, a two-dimensional code reader setting method, a two-dimensional code read setting device, a two-dimensional code reader setting program and a computer readable recording medium which serve to make clarify the present invention are illustrated. The present invention is not limited to the two-dimensional code reader setting method, the two-dimensional code read setting device, the two-dimensional code reader setting program and the computer readable recording medium which will be described below. Moreover, members described in the appended claims are not specified to members in the embodiments. Moreover, the sizes of members shown in the drawings and the positional relationships therebetween are exaggerated for clearer description in some cases. Referring to each of the elements constituting the present invention, a plurality of elements may be constituted by the same member and one member may be shared by a plurality of elements.","In this specification, the two-dimensional code reader setting method, the two-dimensional code read setting device, the two-dimensional code reader setting program and the computer readable recording medium are not limited to systems for reading a two-dimensional code and setting the reading and a device and a method for carrying out input, output, display, calculation, communication and other processes in relation to the reading of a two-dimensional code and the read setting on a hardware basis. The device and method for implementing processes on a software basis are also included in the scope of the present invention. For example, a device and a system for incorporating a software, a program, a plug-in, an object, a library, an applet, a compiler, a module or a macro to be operated on a specific program in a general-purpose circuit or computer to carry out the read setting itself for a two-dimensional code or a process related thereto are also equivalent to the two-dimensional code read setting device or the two-dimensional code reader setting program according to the present invention. In this specification, moreover, the computer also can include a general-purpose or special electronic computer, a work station, a terminal, a portable electronic apparatus, a mobile telephone such as PDC, CDMA, W-CDMA or FORMA, PHS, PDA, a pager, a smart telephone and other electronic devices. In this description, furthermore, the program is not always used as a single unit but can also be used with a positioning of a means for functioning as a part of a specific computer program, software or services, a means for functioning with a call if necessary, a means to be provided as a service in an environment such as OS, a means for operating with a terminate and stay resident in the environment, and\/or a means for operating on a background or other support programs.","The terminals of the computer to be used in the embodiments of the present invention or the like, and a server and a computer for operations, control, input and output, display and various processes which are to be connected thereto or other peripheral apparatuses such as printer are electrically connected through serial connection or parallel connection such as IEEE1394, RS-232C, RS-422 or USB or a network such as 10BASE-T, 100BASE-TX or 1000BASE-T. The connection is not limited to physical connection using a cable but may be wireless LAN such as IEEE802.11b or IEEE802.11a or wireless connection utilizing an electric wave, infrared rays or optical communication such as Bluetooth. Furthermore, the recording medium for exchanging data and saving the setting can utilize a memory card, a magnetic disk, an optical disk, a magneto-optical disk, a semiconductor memory or the like.","In this specification, moreover, printing includes a means for printing a two-dimensional code by an ink jet printer or the like, a means for marking a two-dimensional code by a laser marker, a direct marker or the like, or a means for representing a two-dimensional code by a method such as transfer.","First Embodiment",{"@attributes":{"id":"p-0060","num":"0059"},"figref":["FIG. 1","FIG. 1"],"b":["1","2","15","3","2","1","3","3","5","2"]},"The image pick-up section  includes image pick-up optical systems such as a camera  and the lens . The image pick-up section  picks up image data in an area including a two-dimensional code label portion by image sensing using a CCD image element, for example, and projects the image of the two-dimensional code onto a CCD area sensor and converts the image into an electric signal. The signal thus converted is expanded onto a memory in the image pick-up section  and is fetched as an image. This process can also be transmitted to and carried out in the two-dimensional code reader body. In the case where a pin hole camera is used, the lens is not required.","Decoding Section ","The decoding section  to be the two-dimensional code reader body shown in  includes an image processing circuit , an operation circuit , and a reading stability output circuit . The image processing circuit  serves to receive image data acquired by the image pick-up section  and to carry out a predetermined image processing. The image processing includes A\/D conversion for converting image data including analog shading information and the like into a digital signal. For example, the image data are converted into a digital signal having 8-bit 256 gradations.","The operation circuit  can include a CPU, an MPU, a system LSI, a DSP, a special hardware and the like, and includes a control section  for transmitting a signal to control the optical systems such as the camera  and the lens  and the illuminating section , an image processing section  for further processing a digital signal processed by the image processing circuit , a decode processing section  for decoding a signal to have a binary value or a multi-value by the image processing section , a reading stability determining section  for determining a reading stability and a serial input\/output section  for outputting the decoded signal to the outside.","The image processing section  first searches for a finder pattern from the A\/D converted image data and specifies and cuts out the area of a two-dimensional code included in the image data correspondingly. Furthermore, the boundary of a cell is decided from the image data of the two-dimensional code thus cut out and is divided into cells, and the image data of each cell are changed into a binary value based on a predetermined threshold. The change into a binary value is detected by an image processing such as the type, position, size, origin, inclination, or distortion of the two-dimensional code included in the fetched image and the light and darkness of a cell to be a minimum unit constituting the two-dimensional code, for example, white and black are acquired as binary data of  or . Multi-valued data as well as binary data can also be utilized.","Decode Processing Section ","The decode processing section  serves to decode binary or multi-valued data. For the decoding, reference is made to a symbol character table indicative of the contrast relationship between coded data. Based on the table, the data are converted and decoded into symbol character data corresponding to the binary data. Furthermore, the decode processing section  verifies whether the decoded data are correct or not based on a predetermined checking method. If an error is found on the data, correct data are calculated by an operation using an error correcting function. The error correcting function is determined through a method employed by a two-dimensional code to be used.","Reading Stability Determining Section ","On the other hand, the reading stability determining section  calculates a shading contrast in a predetermined reading stability determining area in the image data of the two-dimensional code which is cut out, and determines a reading stability as compared with a predetermined stability threshold. The shading contrast mainly indicates a difference in a lightness between white and black or a ratio thereof if the two-dimensional code is constituted by achromatic white and black, and furthermore, includes a difference or ratio of a chromaticity or color saturation and a contrast difference is expressed in any of them or their combination. Consequently, a color two-dimensional code can also be processed. As one exemplary method, several points decided to belong to white (1) and black (0) are extracted from points included in the A\/D converted image data included in the reading stability determining area respectively, and the mean value or total value of the digital signals of shading information for each of the white and the black is calculated, and a difference or a ratio is set to be a contrast. By using the contrast, a reading stability to be an index indicative of the reading stability of a two-dimensional code is determined. More specifically, the stability is decided by a comparison with a predetermined stability threshold as will be described below. For the points to be extracted, several predetermined coordinate points are previously selected in the set reading stability determining area. For example, if a finder pattern is the double square of a QR code, the vertexes of four corners of each frame of the white and the black and the points of contour portions are extracted. The number of the points to be extracted is eight for each of the white and the black, for example, and is thus set such that a sufficient mean value or total value can be calculated. A method of extracting several points and determining a contrast by a mean value or a total value can be processed at a high speed by decreasing the number of operation stages.","As another method, alternatively, respective mean values or modes of the white and the black may be obtained for all the points included in the reading stability determining area and a difference or ratio thereof may be set to be a contrast. In this method, all the points are utilized to obtain the mean value or the mode. Therefore, the contrast is accurate, and at the same time, misreading is generated depending on the reading conditions and the calculation is carried out based on a portion in which the decision of the white and the black is read erroneously. Under the condition that printing and illumination states are excellent and the misreading is rarely generated, all the points can be practically used sufficiently. It is possible to decide an authenticity on the basis of the degree of use of the error correcting function, for example.","The shading information cannot be known from the binary image data. For this reason, data which have not been binary are used. Multi-valued data can also be utilized in place of the binary data. For the decision of shading, moreover, a contrast of the area decided to be the white and the area decided to be the black is checked if the two-dimensional code is constituted by the white and the black, and a contrast for each color, for example, a contrast such as a hue, a lightness or a color saturation is checked for each of the colors if a color constituting the two-dimensional code is another color. Thus, the reading stability is determined. Furthermore, the reading stability determining area is preset and the finder pattern of the two-dimensional code or the like can be utilized. In an area in which the pattern of the white and black or the light and darkness is predetermined like a finder pattern, it is easy to decide the degree of the necessity of the contrast.","For example, the contrast is compared with a predetermined stability threshold. When the contrast is greater than the stability threshold, it is decided that the stability is excellent. If the contrast is smaller than the stability threshold, it is decided that the reading stability is reduced. Thus, a two-stage evaluation for one threshold can be carried out. In addition, the stability threshold can be set to have an upper limit stability threshold and a lower limit stability threshold, and a three-stage evaluation of the upper limit stability threshold or more, the upper limit stability threshold to the lower limit stability threshold, and the lower limit stability threshold or less can be carried out. Furthermore, three stability thresholds or more may be provided to carry out a multistage evaluation.","Alternatively, the reading stability may be changed into a numeric value by a predetermined algorithm and the numeric value may be outputted in place of such a stepwise evaluation. For example, there are methods of calculating the absolute value of a difference between the contrast and the stability threshold and multiplying the difference by a predetermined coefficient to set a reading stability, and a method of exactly outputting the absolute value as the reading stability.","Moreover, the contrast itself may be outputted as the reading stability. In the case where the contrast is A\/D converted into 8-bit 256 gradations, for example, it is displayed as a value of 0 to 255. In the case where the contrast itself is to be used, furthermore, it is not necessary to separately provide a stability threshold. The user decides the reading stability by seeing the contrast.","Setting of Stability Threshold","The stability threshold is set to have an appropriate value according to an environment in which a two-dimensional code is used, for example, printing and marking states such as the PCS (Print Contrast Signal) of the two-dimensional code, a surrounding brightness, the effect of an illumination and the like. For example, in the case where the two-dimensional code is printed on a paper having a high contrast, the stability threshold is set to be great. To the contrary, when the contrast is low as in the case where marking is put on a metal, the stability threshold is set to be small. The user can optionally set the stability threshold. The user changes a general stability threshold set as a default value into a desirable stability threshold by means of the stability threshold setting section provided in the two-dimensional code reader. In the case where the upper limit stability threshold and the lower limit stability threshold are to be set, the setting is carried out to obtain the (upper limit stability threshold)>the (lower limit stability threshold). Moreover, the two-dimensional code reader may be caused to automatically carry out the setting. In this case, the user is caused to input the condition of the use of the two-dimensional code, or the device side automatically detects the condition, and a stability threshold corresponding to the same condition is calculated in the device. Furthermore, the stability threshold can also be regulated automatically by following a change in the conditions.","The reading stability thus determined by the reading stability determining section  is sent to the serial input\/output section  or the reading stability output circuit . Consequently, a notice of the reading stability is given. Even if the two-dimensional code can be read, the user is notified of a reduction in the reading stability. Therefore, the user can take a necessary countermeasure before the reading cannot be carried out. Thus, it is possible to prevent the two-dimensional code reader from suddenly becoming unreadable.","Reading Stability Output Circuit ","Furthermore, the reading stability output circuit  includes a reading stability output section and is connected to the reading stability determining section  and outputs, to the outside, a reading stability determined by the reading stability determining section . The output is sent to a host system , and furthermore, a display section such as a special monitor can be provided separately to notify the user of the reading stability by the display thereon. Moreover, the reading stability output circuit  can also output, to the outside, a reading stability reduction signal for giving a notice of a reduction in the reading stability when the reading stability calculated by the reading stability determining section  is lower than a predetermined alarm threshold and can also give an alarm.","The reading stability determined by the reading stability determining section  is thus outputted from the reading stability output circuit  to be a special I\/O terminal, and furthermore, the reading stability can be added to the decoded data and can be transferred as serial data from the serial input\/output section . In this case, the reading stability may be added from the reading stability determining section  through the decode processing section  and may be transmitted to the serial input\/output section , and furthermore, the reading stability may be directly transmitted from the reading stability determining section  to the serial input\/output section .","Host System ","The host system  can utilize a general-purpose or special computer or the like, and serves to receive data on the two-dimensional code which are decoded, thereby carrying out a predetermined processing. The two-dimensional code reader body and the host system  are connected into a data communicable state. For a data communication, a one-way communication for transmitting data from the two-dimensional code reader body to the host system  is enough. For a two-way communication, it is also possible to transmit a change in various setting operations or an operation instruction from the host system  to the two-dimensional code reader body.","The type of the two-dimensional code which can be utilized in the present invention includes a QR code, a micro QR code, a data matrix (Data code), a Veri code, an Aztec code, PDF417, a Maxi code and the like. The two-dimensional code has a stack type and a matrix type, and the present invention can also be applied to both of the two-dimensional codes. The two-dimensional code is fixed onto an object by a method of sticking, onto an object, a label having a two-dimensional code printed or marked thereon, a method of marking a two-dimensional code on an object itself or the like. The present invention can also be used for a one-dimensional bar code, other data symbols, OCR for character recognition and the like without specifying a symbol to be a reading object into a two-dimensional code irrespective of a name. For example, in an application which cannot be used by a laser for bar code reading, it is necessary to read a bar code by using an optical image pick-up system. Thus, the present invention can be used as a bar code reader.","Two-dimensional Code Reader Setting Program","Next, description will be given to a two-dimensional code reader setting program for setting a two-dimensional code reader. The two-dimensional code reader setting program is installed in a computer connected to the two-dimensional code reader as a host system and is thus executed. The computer installing the two-dimensional code reader setting program carries out a communication with the two-dimensional code reader and transmits and receives necessary information, thereby performing setting. The communication is carried out by a serial communication through an RS-232C cable or a USB cable, for example.","The computer installing the program functions as a two-dimensional code read setting device. The two-dimensional code read setting device includes a two-dimensional code specification designating section for designating the desirable specification of a two-dimensional code, a two-dimensional code specification calculating section for calculating the specification of an actual two-dimensional code in accordance with the designated condition, an image pick-up section attachment condition designating section for designating the attachment condition of an image pick-up section, and an image pick-up section attachment specification calculating section for calculating an actual attachment specification in accordance with the specification of the calculated two-dimensional code and the attachment condition of the image pick-up section which is designated by the image pick-up section attachment condition designating section, and furthermore, a two-dimensional code reading operation setting section for setting the operation of the two-dimensional code reader. It is apparent that a two-dimensional code read setting device constituted by a special hardware can also be used as described above in addition to a device installing a program in a general-purpose computer. Moreover, the two-dimensional code reader itself can also serve as a two-dimensional code read setting device having a self-two-dimensional code read setting function. In this case, the calculating circuit  shown in  functions as the two-dimensional code specification designating section, the two-dimensional code specification calculating section, the image pick-up section attachment condition designating section, the image pick-up section attachment specification calculating section and the two-dimensional code reading operation setting section.",{"@attributes":{"id":"p-0080","num":"0079"},"figref":["FIGS. 3 to 18","FIG. 2"]},"It is apparent that the arrangement, shape, display, size, coloring, and pattern of each input column, each button or the like can be changed appropriately on these screens. It is also possible to make a layout which can be seen more easily by a change in a design in which an evaluation or a decision can readily be displayed or operated. For example, it is also possible to input each item in a wizard format and to cause a user to answer a question, thereby carrying out necessary settings. In the following, moreover, a detail set screen is displayed on another window or is provided in the same window in some cases. It is apparent that one of the cases is changed or both of them are used together.","On the user interface screen of these programs, an ON\/OFF operation for buttons or input columns are virtually provided, and the input of numeric values and instructions are designated by an input device disposed in a computer installing the two-dimensional code reader setting program. In this description, \u201cpress down\u201d includes that click or selection is carried out by the input device to falsely perform the press-down in addition to the operation for physically touching the buttons. An input\/output device is connected to a computer by a cable or wireless, or is fixed to the computer. Examples of a general input device include various point devices such as a mouse, a keyboard, a slide pad, a track point, a tablet, a joy stick, a console, a jog dial, a digitizer, a write pen, a ten-key keypad, a touch pad, an acupoint and the like. Moreover, these input\/output devices are not limited to only the operation of the program but can also be utilized for the operation of a hardware such as the two-dimensional code read setting device. By utilizing a touch screen or a touch panel for a display itself for displaying an interface screen, furthermore, a user can directly touch a screen by hand to carry out the input or operation, or can also use a voice input and other existing input means or use them together.","In addition to a manner in which the setting is carried out from the input\/output device connected to the computer installing the two-dimensional code reader setting program, it is also possible to incorporate a program or hardware for a two-dimensional code reader setting in the two-dimensional code reader, thereby carrying out the setting by only the two-dimensional code reader. In this case, the input\/output device is provided in or connected to the two-dimensional code reader and a monitor for setting or the like is connected if necessary.",{"@attributes":{"id":"p-0084","num":"0083"},"figref":"FIGS. 3 to 18"},"The two-dimensional code reader setting program includes four steps, S to S shown in the flow chart of  as a basic procedure. It is not necessary to always carry out the setting in accordance with the procedure shown. As will be described below, the determination of the specification of a two-dimensional code at the step S can be skipped and a user can also directly designate the specification of the two-dimensional code at the step S. Moreover, the operation of the two-dimensional code reader can be set at the step S independently of the steps S and S. Accordingly, it is also possible to execute such a method of use that a program is activated and only the step S is set to end the processing. Furthermore, the program can save the set contents and the last set contents can be called automatically at time of the activation. Therefore, it is also possible to carry out reading regulation at the step S with default setting. Thus, the method of using the program is not limited to only the procedure for carrying out the steps S to S in order. Description will be given to each set screen.","Condition Designation","(Step S Determination of Specification of Two-dimensional Code)",{"@attributes":{"id":"p-0086","num":"0085"},"figref":["FIG. 3","FIG. 3"],"b":"16"},"The user can set the type of the two-dimensional code, a redundancy thereof and an error correcting function according to uses, purposes and the like. For example, if the two-dimensional code is printed on an object having a high contrast, for example, a paper, accurate reading can be expected to some degree. Therefore, the error correcting function having a low level can be sufficient. On the other hand, in the case where the two-dimensional code is silk printed on a board, it is supposed that the contrast can be insufficient. Therefore, it may be necessary to have the error correcting function to some degree. Thus, any setting of the two-dimensional code can be determined depending on the use conditions.","Moreover, a two-dimensional code sample display column  for displaying the sample of the selected two-dimensional code is provided on the right side. When the code type is changed, the display of the sample is also varied correspondingly. Furthermore, a selectable item in a \u201cdata type\u201d designation column  in a lower stage is subjected to gray-out corresponding to the two-dimensional code selected in the code type. Thus, it is possible to select only a data type which can be set corresponding to each code type.","When a \u201cdetail . . . \u201d button  of a \u201ccode type\u201d designation column  is pressed down, a two-dimensional code detail set screen  shown in  is opened in another window and detailed setting can be carried out according to the selected two-dimensional code. In the example of , a model, an error correcting level and a dot pattern for a printing pattern can be changed as an example corresponding to the QR code. For this screen, an appropriate screen is displayed depending on the type of the selected two-dimensional code.","The printing pattern mainly indicates the presence of the printing dot pattern. The printing pattern includes a normal pattern (an ordinary pattern) and a dot pattern. In the dot pattern, a cell constituting a symbol is circularly constituted. Therefore, the adjacent cells are slightly separated from each other, and the dot pattern is generated when printing or marking is carried out like a dot by laser marking or direct marking. In general, an option can be selected when the two-dimensional code is a QR code or a data matrix.","In the \u201cdata type\u201d designation column , moreover, numerals, figures, alphanumerics, binary, and kanji can be selected by means of the radio button.","Furthermore, a \u201cdata volume\u201d designation column  designates the number of digits of data specified in the data type. For example, the number of digits of data is designated by the number of digits when the data type is the numeral or figure, by the number of characters when the data type is the alphanumerics or kanji, and by the number of bytes when, the data type is the binary.","In addition, a \u201cprintable space\u201d designation column  designates a size of a length and width in a maximum printable range.","When a \u201ccalculation start\u201d button  is pressed down in the screen of  after the input is completed, the two-dimensional code reader setting program calculates and determines whether or not a two-dimensional code coincident with the condition inputted by the user can be created based on the same condition. If it is determined that the two-dimensional code can be created, a maximum value of one side of a cell size and a maximum value of the size of a symbol are displayed in a size of a length and width on a calculation result display column . Furthermore, a \u201cprinting detail\u201d button  can be pressed down in the gray-out state.","When the \u201cprinting detail\u201d button  is pressed down, a printing detail set screen  shown in  is newly opened in a window, and a cell size to be printed can be designated. Consequently, the number of dots acting as minimum units to be printed by a printer for printing a two-dimensional code to which one cell to be a minimum unit constituting a two-dimensional code is allocated is designated corresponding to the resolution of the printer. When the number of the dots to be allocated to one cell is increased, the printing can be carried out more accurately and precision can be enhanced, and furthermore, the size of a two-dimensional code symbol to be printed is also increased. The two-dimensional code reader setting program calculates the size of one dot corresponding to the resolution of the printer and calculates the size of one cell to be actually printed and the size of the two-dimensional code symbol corresponding to the number of the dots to be allocated to one cell respectively, thereby displaying a candidate group. The user selects an optimum combination from the candidate group depending on the resolution of the printer to be used and the size of the symbol.","In the case where it is determined that the two-dimensional code cannot be created, an error message indicating that the two-dimensional code cannot be created is simply displayed on the calculation result display column , and furthermore, the reason and a recommended value for eliminating the reason can be presented and the user can be urged to carry out input again. For example, an alarm message indicating that a printable space is too small, a data volume is too large or the like is displayed, and any set value to be printable, for example, a change of a data type into . . . , or a change of the number of digits into . . . , or a change of a printable space into . . . \u00d7 . . . as a solution, is presented in another window.","Specification of Two-dimensional Code","Description will be given to an example of an algorithm for determining the specification of a two-dimensional code to be executed when the \u201ccalculation start\u201d button  is pressed down in the screen of .","(1) First of all, a necessary code size is obtained based on a code type, a data type, and a data volume. The code size indicates the number of cells per one symbol side and a code size is defined by a version. The relationship between the code type, the data type, the data volume, and the code size is determined, and for example, a version 1 (21 cells\u00d721 cells) is set in the case where the two-dimensional code is a QR code, a model 2, alphanumeric 10 digits and an error correcting level M. When the dot pattern is selected based on the details of the code type, the maximum value of the code size is limited by the specification of the two-dimensional code reader.","(2) As a result, if the code size exceeds the theoretical maximum code size, impossible creation is decided to be NG. The theoretical maximum code size is represented by: (n\u00d7safety coefficient)\/m. In the expression, m represents the pixel allocation number of a CCD and is set to have a value of 5 or 8, for example. In the case where the printing pattern is a normal pattern, generally, five pixels are allocated on the CCD. In the case where the printing pattern is a dot pattern, eight pixels are allocated on the CCD. Moreover, n represents a pixel number (X, Y) of the CCD and is set to be (640, 480), for example. Furthermore, a value of 0.9 or the like is inputted as the safety coefficient for perfectly holding a two-dimensional code in a visual field.","(3) Next, a cell size in the printing of a code over a full printable space is calculated from a printable space and a code size (including an external shape in Data Matrix). At this time, the cell size is set to be a \u201cprovisional maximum cell size\u201d. The provisional maximum cell size is represented by: (provisional maximum cell size [mm])=(printable space [mm])\/((code size)+(margin size)\u00d72). For example, when the printable space is 10 mm\u00d710 mm and the code size is 21 cells\u00d721 cells, the provisional maximum cell size is set to be 0.345 mm.","(4) Furthermore, the size of a symbol in the printing of a two-dimensional code with the provisional maximum cell size obtained in preceding step (3) above is calculated. The size of the symbol is represented by (symbol size [mm])=(cell size [mm])\u00d7((code size)+(margin size)\u00d72). In the case of a square code and a square printable space, (symbol size)=(printable space) is obtained.","(5) For all the combinations of close-up lenses, there is calculated a camera attachment distance in which the size of the symbol obtained in preceding step (4) above is 90% or less in the y-direction of a visual field. For example, when it is premised that the position determination precision of a work (a reading object including a two-dimensional code) during an application, the rotation of the work and the installation condition of a camera are not limited in consideration of only a cell size, a position resolution, and a visual field size, and one cell is allocated to 5 or 8 pixels of the CCD, the maintenance of a necessary visual field is calculated. As an example, the conditions are satisfied when the close-up ring which can be used is 0.5 mm, 1 mm, 5 mm, 10 mm, and 22 mm, when the cell size is 0.345 mm and the necessary visual field is 10 mm, and when the combination of the close-up rings is 0.5 mm, 1 mm, 5 mm, 5.5 mm, 6 mm, and 6.5 mm.","In the case where a rectangular data matrix is selected as the two-dimensional code, the size of the symbol is set to be a length of a long side. Moreover, the attachment distance of the camera is set to the condition that the length of the long side is 90% in the x-direction of the visual field. If a solution cannot be obtained, NG is set. If the solution can be obtained, the \u201cprovisional maximum cell size\u201d obtained in preceding step (3) above is set to the \u201cmaximum value of the cell size\u201d. In the case where the two-dimensional code is a data matrix code, an external shape is changed to carry out recalculation. If the size of the external shape is changed to satisfy the constraints of the printing space and the visual field, they are presented as recommended values to the user.","On the other hand, in the case where it is decided that the two-dimensional code of the specification to satisfy the designated conditions cannot be created (NG), the conditions for satisfying the specification are recalculated and are presented to the user. The conditions for the presentation include a change in a data type (it is calculated whether kanji\u2192alphanumerics\u2192figures can be set in order), a change in an error correcting level (the calculation is in order of H, Q, M, and L in the case of only a QR code and a micro QR code), a change in a printing space (a cell size is set to have a value of 0.025 mm and a necessary printing space is recalculated), a change in a data volume and the like.","Printing Detail Setting","Furthermore, description will be given to an example of an algorithm related to the printing detail setting. Herein, an optimum cell size and an optimum symbol size are calculated corresponding to the resolution of a printer for printing a two-dimensional code in place of the maximum values of the cell size and the symbol size.","(1) When the \u201cprinting detail\u201d button  is pressed down in the screen of , the printing detail set screen  in  is represented.","(2) In order to print the cell having the \u201cmaximum value of the cell size\u201d obtained above in 200 dpi, 300 dpi, 400 dpi, and 600 dpi corresponding to the resolution of the printer, the number of dots to be printed per cell and the maximum value (n (max)) of the number of the dots per cell are obtained. A method of calculating the (n (max)) is obtained as a maximum of n to satisfy (maximum value [mm] of cell size)>1\/(resolution [dpi] of printer)\u00d725.4\u00d7n. The cell size is calculated as (cell size [mm])n\u00d725.4\/(resolution [dpi] of printer). Moreover, the size of a symbol is calculated as (symbol size [mm])=(cell size [mm])\u00d7((code size)\u00d7(margin size)\u00d72).","(3) Referring to the dot number (n (max)) obtained in preceding step (2) above, the resolution (200 dpi, 300 dpi, 400 dpi, 600 dpi), the number of dots per cell, the cell size, and the symbol size are obtained and are displayed on the printing detail set screen .","(4) When the resolution of the printer is high and n (max)>2 is obtained, the calculation of preceding step (3) above is carried out from n=2 to n=n (max) and a value is displayed. If n (max) is more than 20, the calculation is stopped with 20. Referring to the result of the calculation displayed in , when the head of each column is clicked, the column is sorted into a key and is displayed.","In the printing detail set screen  of , furthermore, when the user inputs an optional cell size, the above-mentioned operation is carried out for a resolution designated into the input column of \u201cprinting precision\u201d by the user and the result of the operation is displayed on a list in a lower part. In this case, the results of the operation related to 200 dpi, 300 dpi, 400 dpi, and 600 dpi are not displayed.","The user selects a row for displaying a desirable value from the list of the results of the operation obtained as described above. Then, when an \u201cOK\u201d button is pressed down in the printing detail set screen  of , the printing detail set screen  is closed to return to a screen for determining the specification of a two-dimensional code in . In this case, \u201ccell size to be printed\u201d and \u201csymbol size to be printed\u201d in the row selected by the user are caused to reflect the cell size and the symbol size which are displayed in the calculation result display column  of , and furthermore, a character of \u201c. . . mm\/cell or less\u201d in a cell size column is changed into \u201cmm\/cell\u201d. When the \u201cprinting detail\u201d button  of  is pressed down again, the calculation is carried out based on \u201cmaximum value of cell size\u201d obtained in the \u201cspecification of two-dimensional code\u201d as well as the cell size obtained in the \u201cprinting detail setting\u201d which is displayed.","Based on the maximum values of the cell size and the symbol size which are calculated as described above, the image pick-up section attachment condition is calculated. More specifically, the attachment distance of the image pick-up section, the thickness of the close-up ring and the standard recommended value of the focusing ring are calculated based on the f value of a lens, a distance between the principal points of the lens, a lens length, the number and thickness of the close-up rings to be used, the adjustment range of the focusing ring, one pixel size of a CCD, the number of pixels and the like to be parameters, and are set to be the default values of the attachment conditions of the image pick-up section. The attachment distance of the image pick-up section indicates a distance from a work to the tip of the lens. Moreover, the attachment distance limitation of the image pick-up section indicates an attachment distance desired by the user and implies that the attachment distance of the image pick-up section is set within a range specified by the user. In the following embodiments, a camera is used as the image pick-up section.","Step S Determination of Camera Attachment Condition","At the step S, the attachment distance of the camera, the thickness of the close-up ring, and the standard of the focusing ring are determined as the attachment conditions of the camera.  shows a user interface screen for determining the attachment condition of the camera. The user designates, from , a \u201ctwo-dimensional code specification\u201d , a \u201ctwo-dimensional code label shift tolerance\u201d , a \u201cprinting pattern\u201d  and a \u201cdesired attachment distance\u201d  as conditions for attaching the camera.","For the two-dimensional code specification, the lengths and widths of the cell size, and the symbol size constituting a two-dimensional code are specified by numeric values. In the case where the operation is executed at the step S, the calculated values are inputted as default values and the user can regulate these values. The user can directly input desirable numeric values. If the slider  provided on the right side is dragged, the cell size and the symbol size can be changed continuously and numeric values corresponding thereto are automatically inputted to the input column. If the user designates the cell size, the symbol size can be operated automatically. In this case, a \u201csymbol size calculation\u201d button which will be described below is not displayed.","Alternatively, the user can directly designate the specification of the two-dimensional code without executing the step S. This example is shown in . In this case, the step S is skipped. For this reason, operation values are not inputted as defaults in the cell size and the symbol size and the user directly inputs a numeric value into each of the input columns.","Calculation of Symbol Size","In this case, furthermore, the symbol size can also be calculated based on the two-dimensional code specification. When a \u201csymbol size calculation\u201d button  provided on the right side of a \u201csymbol size\u201d input column  in  is pressed down, a \u201csymbol size calculation\u201d set screen  is displayed on another window as shown in . From the screen, whether a connection with a code type, a version (a code size), a cell size, and a symbol size is carried out, is specified and an \u201cOK\u201d button is pressed down so that the symbol size is calculated based on these information and the result of the calculation is inputted to the \u201csymbol size\u201d input column  in . This processing flow is as follows.","(1) When the \u201csymbol size calculation button\u201d  in the set screen for determining the camera attachment condition in  is pressed down, the \u201csymbol size calculation\u201d set screen  shown in  is displayed.","(2) The symbol size is calculated from the code type, the version (code size), and cell size.","(3) The symbol size calculated as described above is displayed as the \u201csymbol size\u201d.","(4) When the \u201cOK\u201d button is pressed down in , the \u201csymbol size calculation\u201d set screen  is closed to return to the screen of . At this time, the cell size and the symbol size which are obtained as described above are reflected by the \u201ctwo-dimensional code specification\u201d .","(5) In the case where the \u201cconnection of symbol size with cell size\u201d column in  is being checked, the \u201csymbol size\u201d input column  is subjected to gray-out in the screen of  and the slider  is thus made valid.","As described above, in the embodiment according to the present invention, the user can directly specify the items such as the cell size and the symbol size of the two-dimensional code, and furthermore, the user can select a necessary specification and the device side can carry out the calculation. Even a user who does not know much about the two-dimensional code can carry out the setting. Moreover, a user who knows much about the two-dimensional code can also carry out the direct input. Consequently, the complexity for a knowledgeable user can be eliminated and any user can maintain the advantage of usability.","The two-dimensional code label shift tolerance  in  indicates the shift range of a label or the positioning precision of a work and specifies an allowable range even if the label is shifted from a reference position. Furthermore, whether the rotation of the work is permitted is designated and \u201crotation\u201d is checked when the work is rotated. When the \u201crotation\u201d is checked, the two-dimensional code displayed on an attachment image screen in  which will be described below is rotated and is displayed obliquely and the selection of the \u201crotation\u201d can also be confirmed with an image.","Furthermore, the printing pattern  selects normal or dot.","The desired attachment distance  is set in the case where the attachment distance of the camera is restricted, for example, a distance at which the camera can be separated physically under the use conditions of the two-dimensional code is limited.","Conditions other than the above-mentioned conditions which can be set include a depth field, an illuminating condition, a decoding time and the like.","When the above-mentioned conditions are inputted and the \u201ccalculation start\u201d button  is pressed down, the camera attachment distance, the thickness of a close-up ring to be used, and the thickness of a focusing ring are calculated based on the designated conditions and are displayed on the \u201cattachment specification\u201d display column . Moreover, an \u201cattachment condition detail\u201d button  can be selected from the gray-out. In the case where the camera attachment distance cannot be calculated on the specified conditions in the same manner as in step S, the purport, the reason, and the recommended value are presented and the user is urged to carry out input again.","Calculation of Camera Attachment Distance","Description will be given to an example of the operation algorithm of the camera attachment distance which is to be executed when the \u201ccalculation start\u201d button  is pressed down. In the algorithm, a minimum value Oand a maximum value Oof the camera attachment distance are obtained in the following manner.","Calculation of Minimum Value Oof Camera Attachment Distance","The minimum value Oof the camera attachment distance to be the closest distance to be attached to the camera is calculated in the following manner.","(1) In the case where the code size of a two-dimensional code is unknown, the code size is calculated from the cell size and the symbol size. In the case of a square code, (symbol size)\/(cell size)=code size is set.","(2) If the code size obtained as a result of the calculation is more than the theoretical maximum code size described above, the calculation is decided to be NG.","(3) Based on the symbol size, the shift range of a label and the presence of the rotation of a work, a necessary visual field Vyin a Y-direction is calculated. For example, when the rotation is permitted in the square code, a necessary visual field of Vy=(one side of printing space)\u00d7\u221a2+2\u00d7(positioning precision) is set.","(4) A magnification Mfor maintaining Vyis obtained. The magnification Mis calculated with M=s\u00d7n\/Vy, wherein s represents the pixel size of a CCD, n represents a y-direction pixel number\u00d7safety coefficient of the CCD and m represents an allocated pixel ( or  ).","(5) A combination of a close-up ring to satisfy Mis picked up. An effective close-up ring thickness f\u00b7M is calculated with f\u00b7M=(close-up ring thickness)+(focusing ring adjustment range). When there is no combination to satisfy M, Mis determined again from the combination of the close-up ring which can be realized.","(6) A distance Ofrom an object in Mobtained in preceding step (5) above to the front end of the lens and a visual field Vy in that case are calculated. The distance Oto the front end of the lens is calculated with O=f\/M+2f+\u0394H\u2212d, wherein \u0394H represents a distance between the principal points of the lens and d represents a lens length. Moreover, the visual field Vy is calculated with Vy=s\u00d7n\/M, wherein s represents the pixel size (mm) of a CCD, n represents (y-direction pixel number of CCD)\u00d7(safety coefficient), and M represents a magnification. In the present embodiment, a focal length f=24.97 [mm], a distance between principal points \u0394H=0.69 [mm], a lens length (from a lower end to a focal plane) d=54.83 [mm], a CCD pixel size s=0.0074 [mm], a CCD y-direction pixel number=480, a CCD x-direction pixel number=640, a focusing ring adjustment range=0 to 2.5 [mm], and a visual field safety coefficient=0.9 are set to be calculation parameters.","Calculation of Maximum Value Oof Camera Attachment Distance","The maximum value Oof the camera attachment distance to be the longest distance at which the camera is attached is calculated in the following manner.","(1) A magnification Mat which one cell of a two-dimensional symbol has five pixels (in the case of a normal pattern) or eight pixels (in the case of a dot pattern) is obtained. M=S\u00d7m\/S is calculated, wherein s represents the pixel size (mm) of a CCD, m represents an allocated pixel ( or  ) and S represents a cell size (mm) on a work.","(2) A combination of a close-up ring to satisfy Mis extracted. If there is no combination to satisfy M, then Mis determined again from the combination of the close-up ring which can be realized.","(3) A distance Ofrom an object in Mobtained in preceding step (2) above to the front end of the lens and a visual field Vy in that case are calculated.","Display of \u201cAttachment Specification\u201d Display Column ","\u201cHeight for two-dimensional code to be 70% of visual field\u201d is displayed on the result of the calculation displayed in the \u201cattachment specification\u201d display column  in the set screen for determining the camera attachment conditions in . This corresponds to the case where a safety coefficient is set to be 0.7 in the equation for obtaining the minimum value O. In the case where the number of allocated pixels is less than 5, there is displayed a height (O) at which one cell of the two-dimensional code has five pixels (normal pattern) or eight pixels (dot pattern) on the CCD.","Attachment Condition Detail","The camera attachment distance indicates a minimum value or a recommended value. In the case of the minimum value, actual attachment may have a greater value. The recommended value is 1.1 to 2.0 times as great as the minimum value. When the \u201cattachment condition detail\u201d button  is pressed down in , the camera attachment condition detail screen  in  is displayed. In , a distance at which the camera can be attached is shown. In the drawing, by setting the attachment distance of the camera which is calculated to be a minimum value, a range in which the attachment can be carried out is shown and a region shown in a bar graph indicates a range in which focusing can be carried out. Moreover, the pattern of the combination of the close-up ring which can be obtained is illustrated. In addition to the camera attachment distance and the thickness of the close-up ring, furthermore, the limited value of a reading cell size is calculated. In the cases of the normal pattern and the dot pattern, respective operation values are displayed on the attachment condition detail display column .","In , the left side indicates a \u201cfocusing point range\u201d display column , an axis of ordinate indicates the camera attachment distance and a range in which focusing can be carried out is shown in a bar graph. In , seven bars are shown and each bar represents the combination of the close-up rings. When each bar is clicked and selected, the color of the bar is changed to be red, for example, and the details of the combination of the close-up rings thus selected are displayed in a \u201cclose-up ring combination\u201d column  on the right side. In the drawing, \u201ctotal: 6.5 mm\u201d in the \u201cclose-up ring combination\u201d column  indicates that the total ring thickness in the combination of the close-up rings which is currently selected is 6.5 mm. Moreover, \u201c(0.5+1.0+5.0)\u201d indicates that 6.5 mm is obtained by superposing close-up rings having thicknesses of 0.5 mm, 1.0 mm, and 5.0 mm as the pattern of the combination of the close-up rings. Consequently, the user preferably prepares close-up rings having specified thicknesses and can select the combination of the close-up rings without a hesitation. Furthermore, \u201cattachment range: 65 mm to 91 mm\u201d indicates that focusing can be carried out within a range of 65 mm to 91 mm in the combination of the close-up rings which is currently selected. This range corresponds to the length of the bar in the \u201cfocusing point range\u201d display column . In the \u201cfocusing point range\u201d display column , the upper and lower ends of a part of the bar are partially cut, which is displayed based on whether or not each bar can carry out focusing. On the other hand, in consideration of the basis as to whether or not the whole two-dimensional code can be read, regions on the upper and lower ends are not included. More specifically, the determination is carried out depending on whether a cell on the upper end of the bar can be discriminated, and the lower end is determined depending on whether the whole two-dimensional code can be read. The above-mentioned items depend on the combination of the close-up rings. Therefore, when another bar is selected in the \u201cfocusing point range\u201d display column , a newly selected bar is indicated to have a red color, for example, and the display of the \u201cclose-up ring combination\u201d column  and the attachment condition detail display column  are updated to information corresponding to the same bar.","Moreover, \u201cvisual field: 10 mm\u00d710 mm\u201d of the attachment condition detail display column  represents a current visual field. When a mouse is clicked in an optional position in the \u201cfocusing point range\u201d display column , a visual field in the checked position, that is, a visual field in which a position corresponding to an axis of ordinate of the \u201cfocusing point range\u201d display column  is set to be an attachment distance is calculated and displayed. Thus, the size of the visual field depends on the attachment distance.","Furthermore, the \u201cattachment distance: 66 mm\u201d represents a distance from a reading object to the front end of the lens. Moreover, when the mouse is clicked in the \u201cfocusing point range\u201d display column , a distance corresponding to the axis of ordinate of the \u201cfocusing point range\u201d display column  is displayed in the clicked position.","Moreover, \u201cfocus scale: 0.3 m\u201d implies that focusing is carried out if the scale of a focusing ring attached to the lens is adapted to 0.3 m. Referring to this item, when the mouse is clicked in the \u201cfocusing point range\u201d display column , a value corresponding to the clicked position is calculated and displayed. In the present embodiment, a lens for focusing in a range of 0.3 m to infinity (\u221e) is used. Therefore, the value to be displayed in this item ranges from 0.3 m to \u221e. This item depends on the combination of the close-up rings and the attachment distance.","Furthermore, \u201cpixel\/cell: 5\u201d implies that one cell of a two-dimensional code is allocated to five pixels of a CCD at a current set attachment distance. Referring to this item, similarly, when the mouse is clicked in the \u201cfocusing point range\u201d display column , a value corresponding to the clicked position is calculated and displayed. When the mouse is clicked in the vicinity of the lower part of the \u201cfocusing point range\u201d display column , the value is increased. To the contrary, when the mouse is clicked on the upper part of the \u201cfocusing point range\u201d display column , the value is decreased. This item also depends on the attachment distance.","The operation of each parameter displayed in the attachment condition detail display column  described above can be carried out in the following manner.","Visual Field","(1) A magnification M is calculated based on an attachment distance O. The magnification M is calculated with M=\u2212f\/(2f+\u0394H\u2212d\u2212O), wherein f represents a focal length, \u0394H represents a distance between principal points of the lens, and d represents a lens length.","(2) Visual fields Vx and Vy are calculated from the magnification M. The visual field Vx is calculated with Vx=s\u00d7n\/M, wherein s represents a pixel size (mm) of the CCD, n represents an x-direction pixel number of the CCD and M represents a magnification. Moreover, the visual field Vy is calculated with Vy=s\u00d7n\/M, wherein s represents a pixel size (mm) of the CCD, n represents a y-direction pixel number of the CCD and M represents a magnification.","Focusing Scale","(1) An effective close-up ring thickness f\u00b7M is obtained based on the magnification M.","(2) A length lpint for covering with a focusing ring is obtained from the effective close-up ring thickness f\u00b7M and an thickness lring of a close-up ring to be used actually. lpint=f\u00b7M\u2212lring is set.","(3) A value p of the focusing scale is obtained from lpint. The focusing scale is displayed on a 0.1 m unit and is represented by \u221e if it is greater than 5 m. The value p of the focusing scale is calculated with p=f2\/lpint+2f+\u0394H+lpint.","Allocated Pixel (pixel\/cell)","(1) An allocated pixel number m is obtained based on a magnification M, a pixel size s of a CCD and a cell size S on a work. The value thus obtained is displayed in an integer value with the figures below the decimal place omitted. The pixel number m is calculated with m=M\u00d7S\/s, wherein s represents a pixel size (mm) of a CCD and S represents a cell size (mm) on a work.","Furthermore, it is also possible to display a two-dimensional code using any region of the whole visual field as a \u201cratio of code to visual field\u201d column . For the standard, it is preferable that the whole two-dimensional code should be displayed in one-third or more of a region in the vicinity of the center of the visual field. The user carries out setting such that the whole two-dimensional code is held in the visual field and can be displayed as largely as possible by referring to the ratio of the code to the visual field. As described above, the present program automatically calculates and displays the conditions, that is, a camera attachment height, a close-ring thickness and a focusing ring scaling in place of the user.","Attachment Image","At step S, moreover, an attachment image  can also be displayed as shown in . Consequently, any portion of the two-dimensional code reading operation device to which each value thus calculated corresponds can be displayed to be easily understood by the user. By visually displaying a portion to be regulated for a user who is unfamiliar with two-dimensional code setting, particularly, the setting can easily be carried out. Examples of the items which can be subjected to image display include a camera attachment distance related to an operation, a close-up ring type, a focusing ring scale standard, the length and width of a two-dimensional code symbol, a cell size, the length and width of a two-dimensional code label having a two-dimensional code printed thereon, and the relationship between work positioning precision or a visual field and a symbol size, and can be displayed wholly or partially or only a selected portion can also be displayed. Moreover, a numeric value which is inputted to each portion or is calculated may be noted or each portion to be displayed may have a color varied. Furthermore, the attachment image  in  is displayed side by side with the set screen of , and portions in  which correspond to the set items and the results of an operation in  can also be displayed in the same colors. Furthermore, it is also possible to utilize a method of displaying the item selected in  with a highlight of inversion, flashing, a thick character, a red character or the like in  and, to the contrary, a method of displaying an item or a numeric value corresponding to the portion selected in  with a highlight in . Alternatively, it is also possible to change a size to be subjected to image display corresponding to the calculated size or to correspondingly vary the sample of a two-dimensional code subjected to the image display with a change in the type of the two-dimensional code which is selected. Furthermore, it is also possible to add a guidance function of displaying an attaching method in a dynamic image, interpreting each portion in a voice or explaining an attaching method. By such image display, it is possible to aid in easy setting by a beginner.","Step S Two-dimensional Code Reading Operation Setting",{"@attributes":{"id":"p-0157","num":"0156"},"figref":"FIGS. 11 to 16","b":["1","2","3","1","2","1","2"]},"In the screen of , a \u201creading code\u201d  is set. First of all, a type of a two-dimensional code to be read as a reading code is selected in a \u201creading code set\u201d column . The type of the two-dimensional code which can be selected corresponding to the specification of the two-dimensional code reader is listed, and the user can select a plurality of desirable types. A throughput, a speed and the like depend on the specification of the two-dimensional code reader. In general, if a large number of kinds of two-dimensional codes are set, a long time is taken for reading. In order to shorten a reading time, a reading code for reading by removing the check of an unnecessary two-dimensional code is restricted.","According to the type of the two-dimensional code thus selected, the details can further be set. For example, when a QR code is selected, the detail set screen of the QR code can be displayed in another window, the upper and lower limits of a version number of the QR code to be read can be specified and restricted and whether the edition mode of a coupling code can be brought can be set. Alternatively, when a data matrix is selected, the cell number and the visual field can be restricted. In the case where the cell number is restricted, the upper and lower limits of the cell number are specified. In the case where the visual field is restricted, upper left and lower right coordinates are specified as (1, 1) and (640, 480) as the vertex coordinates of the visual field, for example.","Furthermore, white and black inversion and double-side inversion can be specified as a \u201ctwo-dimensional code printing state\u201d specifying column , and furthermore, normal, dot and the like can be selected as a printing pattern. Moreover, when \u201cother codes\u201d is selected and is checked in the \u201creading code set\u201d column , an \u201cother code detail set\u201d column  on the right side can be inputted from gray-out and each item can be set. By the setting, various kinds of two-dimensional codes and bar codes can be set to be reading objects.","Moreover, the set contents can be transmitted and received in . A transmitting destination includes memories  to  provided in the two-dimensional code reading operation body and each of them can hold separate data. When a transmitting and receiving destination  is selected in each screen and a \u201cset transmission\u201d button  is pressed down, the set contents are transmitted to a specified destination. When a \u201cset receipt\u201d button  is pressed down, furthermore, the set contents are fetched from the specified destination.","In , a reading operation is set through a \u201creading operation\u201d tab . In a \u201creading mode\u201d set column , any of level trigger, edge trigger, and soft trigger is selected for a single label and level trigger or \u201ccontinuous\u201d is selected for a multi-label. Moreover, \u201cinput time constant\u201d, \u201cone-shot time\u201d, \u201ctrigger ON command\u201d, \u201ctrigger OFF command\u201d and \u201cre-reading prevention time\u201d are specified as a \u201creading mode detail\u201d  if necessary. Furthermore, when a \u201cbinary detail\u201d button  is pressed down, a \u201cbinary option\u201d screen  shown in  is opened in another window and a binary method, an A\/D conversion reference value, a digital smoothing size, dot pattern setting and the like can be set. In a normal operation, such setting does not need to be changed.","In an \u201coutput\u201d tab  of , output setting is carried out. Reading is carried out as an \u201coutput timing\u201d  and any is then selected after trigger OFF, and furthermore, the presence of an OK terminal output, an NG terminal output and a reading error code output is set. Moreover, when a \u201ctransfer data detail\u201d button  is pressed down, a \u201ctransfer data detail\u201d set screen is opened in another window and the presence of \u201csymbol identifier transfer\u201d, \u201cdigit number transfer\u201d, \u201cbreak character transfer\u201d and \u201cBCC transfer\u201d is selected by the ON\/OFF operation of a check box, respectively.","In a \u201cpredictive maintenance information\u201d tab  in , predictive maintenance information is set. The predictive maintenance information (PMI) indicates a reading stability to be an index indicative of the reading stability of a two-dimensional code, and each contrast is checked in a region constituting a light and darkness of a two-dimensional code and is compared with a predetermined stability threshold, thereby deciding whether or not reading is stably carried out. In the example of , whether the predictive maintenance information is outputted from a PMI terminal, is set in a \u201cPMI terminal output\u201d column . The PMI terminal is a special I\/O terminal for outputting the predictive maintenance information and corresponds to a reading stability output circuit .","In a \u201cpredictive maintenance information (PMI)\u201d set column , moreover, it is set whether the predictive maintenance information is added to decoding data reading a two-dimensional code. If checking is carried out therein, the predictive maintenance information is added to decoded data and is transferred as serial data from the serial input\/output section . Both an output from the PMI terminal and an output from the serial input\/output section  can also be selected.","Furthermore, the \u201cpredictive maintenance information (PMI)\u201d set column  inputs a predictive maintenance set value  to be an upper limit stability threshold and a predictive maintenance set value  to be a lower limit stability threshold. A user determines and inputs, for each predictive maintenance set value, a reference value to decide that a light and darkness contrast reading a two-dimensional code is deteriorated, and a reading stability is thus reduced according to the use environment. In this example, a two-dimensional code reading stability is evaluated in a three-stage evaluation using two stability thresholds.","A \u201ccommunication\u201d tab  in  is a screen image indicative of a communication set screen. Herein, the two-dimensional code reader sets the conditions for carrying out a communication with a host system. In this example, a serial communication is carried out by a computer constituting the host system and RS-232C. In , a \u201ccommunication speed\u201d  carries out selection from a combination box of 4800 bps, 9600 bps, 19200 bps, 38400 bps, 57600 bps, and 115200 bps. Moreover, a \u201cdata length\u201d  selects a type, for example, seven bits or eight bits, a \u201cstop bit\u201d  selects a type, for example, one bit or two bits, a \u201cparity\u201d  selects a type, for example, nothing, an even number or an odd number, and a \u201cheader, terminator\u201d  selects a type, for example, STX, ETX, CR, or LF. Furthermore, \u201cflow control\u201d  selects RTS\/CTS control and \u201ccommunication means\u201d  selects no procedure, ACK\/NAK or the like. When \u201creflect PC communication setting after setting is end\u201d  is checked, moreover, the setting is caused to automatically reflect the PC communication setting. Consequently, even if the communication setting on the two-dimensional code reader side is changed, a communication with the host system can be carried out continuously.","Furthermore,  shows another set screen by an \u201cother\u201d tab . As an \u201cexternal illumination output\u201d , any of \u201cnothing\u201d, \u201calways OFF\u201d, \u201calways ON\u201d, \u201ctrigger synchronization ON,\u201d and \u201ctrigger synchronization OFF\u201d is selected from the combination box. Moreover, \u201cbuzzer operation permission\u201d and \u201cread data display\u201d are selected by a check box. Furthermore, acquired image data saving conditions are set as \u201cimage saving setting\u201d . In this example,  screens can be saved at a maximum and any of only NG image saving, only OK image saving, and all image saving is selected.","Step S Reading Regulation",{"@attributes":{"id":"p-0169","num":"0168"},"figref":["FIGS. 17 and 18","FIG. 1","FIGS. 17 and 18"]},"Reading Test Mode","In the reading test mode, the two-dimensional code reader actually carries out a reading operation continuously for a two-dimensional code label and displays a result of a test every predetermined trial number. Furthermore, this operation is repeated at a plurality of times and the result of the test is displayed in a list.","In , when a \u201cset . . . \u201d button  is pressed down, a \u201creading test set\u201d screen  shown in  is opened in another window and \u201cdecoding time restriction\u201d and \u201ctrail number\u201d can be specified. In a \u201cdisplay data\u201d set column , moreover, \u201cread data\u201d, \u201creading rate\u201d, \u201cmean reading time\u201d, \u201clongest reading time\u201d, \u201cmean contrast\u201d and \u201clowest contrast\u201d can be selected as items to be included in data displayed in a reading test result display column  of  as the result of the reading test, and a check box is checked for each item and is thus added to the display data. Moreover, a sample  of the selected display data is displayed in the lower stage of the \u201cdisplay data\u201d set column  and a check box for each item is turned ON and OFF. Correspondingly, the display sample is also changed and a format in which the currently selected display data are displayed can be confirmed.","In a \u201cdisplay format\u201d designating column  in , moreover, whether acquired data are displayed as \u201coriginal data\u201d or \u201cbinary data\u201d is selected. Thus, the reading test is set. Furthermore, when a two-dimensional code is actually set to the two-dimensional code reader and a \u201ctest start\u201d button  is then pressed down, a confirmation screen for carrying out the reading test is opened and a message of \u201cPut a two-dimensional code in a visual code field and adjust a focus, a diaphragm and an illumination position\u201d is displayed. When an OK button is pressed down, the two-dimensional code is started to be read. When a \u201ctest start\u201d button  is pressed down, a two-dimensional code reader setting program continuously carries out a reading test to display a test result in one column for each of trial times (10 defaults) designated in the \u201creading test set\u201d screen . This operation is repeated to carry out display in a reading test result display column .",{"@attributes":{"id":"p-0173","num":"0172"},"figref":["FIG. 17","FIG. 18","FIG. 17","FIG. 18"],"b":"79"},"Illuminance Distribution Confirmation Mode","Next, an illuminance distribution confirmation mode will be described. In the illuminance distribution confirmation mode, an illuminating section is operated to carry out an illumination without a two-dimensional code and a work including the two-dimensional code set to the two-dimensional code reader, and an illuminance distribution test for confirming the illuminance distribution of a background from image data acquired in an image pick-up section is executed. In , when \u201creading regulation (T)\u201d\u2192\u201cilluminance distribution test\u201d in a menu is selected, a confirmation screen for carrying out the illuminance distribution test is opened and a message of \u201cAn illuminance distribution test will be carried out\u201d is displayed. When an OK button is pressed down, the illuminance distribution is measured in a state in which a two-dimensional code is actually illuminated and an illuminance distribution screen  indicative of a measurement result is displayed in another window. An example of the result of the illuminance distribution test is shown in .  show a good example and  shows a poor example. In these drawings, a visual field is divided into blocks and an illuminance distribution is displayed in an illuminance distribution display column  on the left side. A mean lightness is calculated as a mean illuminance for each block and an illuminance is displayed with a color varied stepwise, for example, in a white color with an increase in an illuminance and a black color with a reduction in the illuminance as in a scale displayed on a lower right part.","Moreover, a preferred example of the illuminance distribution is indicated as a \u201crecommended pattern\u201d  on the right side. By referring to the recommended pattern , an illuminance distribution confirmation test is repeated while changing the setting. An illuminance distribution pattern can be set to approach the recommended pattern by a confirmation through the illuminance distribution display column .  shows a uniform distribution with a sufficient high illuminance. In , moreover, a portion having a slightly poor illuminance is present on the right side but a sufficient illuminance is obtained. On the other hand, in , the whole portion is dark and a sufficient illuminance is not obtained. Accordingly, in the case where the illuminance distribution shown in  is displayed, the amount of light, an attachment position and an angle of an illuminator and the like are adjusted to approach the recommended pattern. The illuminance distribution test is carried out again in the adjustment state, and whether the illuminance distribution is improved is confirmed. Thus, the user can adjust the illumination while confirming the illuminance distribution.","In this example, acquired image data having 640\u00d7480 pixels are divided into rectangular blocks having 64\u00d748 pixels and a mean illuminance is measured every 10\u00d710 blocks. This block corresponds to a block in a binary method of image data.","Binary Method","There are various binary methods for changing the analog signal of image data to a binary value. In the screen of , when the \u201cbinary detail\u201d button  is pressed down, a \u201cbinary option\u201d screen  in  is displayed and the binary method can be selected and set in a \u201cbinary method\u201d set column . In this example, any of a division binary 1, a division binary 2, and fixation can be selected.","In the \u201cdivision binary 1\u201d, image data are divided into a plurality of blocks (for example, 16\u00d716 pixels) as described above and a change into a binary value is carried out based on the mean lightness of each block and the fixed threshold of a whole image. The two-dimensional code reader automatically calculates the fixed threshold of the whole image as will be described below, and the user does not need to specify the fixed threshold. This method is used in the case where both an uneven lightness and a background noise are comparatively increased. In the case where each of the unevenness and the noise is great, any of the following methods is preferable according to the unevenness and the noise.","Moreover, the \u201cdivision binary 2\u201d is a method of dividing image data into a plurality of blocks and carrying out a change into a binary value based on the mean lightness of each block. In this method, a lightness histogram is obtained for each block to calculate a mean lightness and a binary threshold is varied for each block. This method is used in the case where the uneven lightness is great and the background noise is small. Such division binary change is effective for the case where a change into a binary value based on the fixed threshold of a whole image has a problem. For example, in the case where the illuminator does not carry out uniform illumination and a gradation in which a bright portion and a dark portion are unevenly distributed on the acquired image data is generated, there is caused such a situation that the change into the binary value is carried out based on the whole screen so that a bias is generated and the change into a binary value cannot be carried out accurately. In such a case, an image is divided to set a binary threshold in each region. Consequently, binary data can be obtained correctly.","On the other hand, the \u201cfixation\u201d indicates a method of changing the whole image data into a binary value with a constant fixed threshold. In this method, the user can directly specify the fixed threshold differently from the \u201cdivision binary 1\u201d. In the screen of , when the \u201cfixation\u201d is selected, a \u201cbinary level\u201d input column  is changed from gray-out into a state in which the input can be carried out, and the user inputs a fixed threshold as the \u201cbinary level\u201d. This method is used in the case where the uneven lightness is small and the background noise is great.","The user can directly specify the fixed threshold, and furthermore, can cause the two-dimensional code reader to calculate the fixed threshold. The fixed threshold can be calculated from a histogram indicative of the lightness distribution of the whole image, for example. By the histogram, a central lightness in each of a bright portion (white) and a dark portion (black) can be obtained and a contrast of a difference can also be utilized as the index of the reading stability. In order to calculate the fixed threshold in this example, \u201cbinary level automatic detection\u201d is selected from \u201creading adjustment (T)\u201d of the menu in the reading adjustment screen of . Consequently, a dialog box of \u201cAn appropriate binary level for fixing a binary method is automatically detected. Put a two-dimensional code in a visual field and adjust a focus, a diaphragm and an illuminator position,\u201d is displayed. When the \u201cOK\u201d button is pressed down, the binary level automatic detection is executed. A message of \u201cBinary level automatic detection. The binary level is being automatically detected. Please wait for a while,\u201d is displayed and an optimum fixed threshold is calculated in approximately one minute. An operation value can be displayed on a screen if necessary, and furthermore, can be automatically set as a fixed threshold.","There are various binary methods, and the user selects an appropriate binary method corresponding to the use conditions of the two-dimensional code reader. In that case, the operation test and the illuminance distribution confirmation described above are effective. More specifically, the illuminance distribution is first confirmed and the two-dimensional code reading is then tested actually before the two-dimensional code reader is applied. Consequently, it is possible to previously confirm whether or not an optimum binary method is selected. Also in each binary method, moreover, each set value can be regulated to a more optimum value. Referring to the above-mentioned reading conditions other than the binary method, furthermore, an appropriate value can be set. For example, if it is clear that the reading stability is poor as a result of the reading test in step S, the processing returns to step S and the setting can be changed and adjusted to such setting as to solve the problems. The reading test is carried out again on the changed condition. If the execution of the stable reading can be confirmed, the setting is ended. An operation for feeding back the result of a reading trial to search for more preferable conditions and further carrying out a trial can be repetitively executed to finally obtain an optimum condition. Moreover, it is possible to set the two-dimensional code reading condition to meet a desirable purpose such as an enhancement in reading precision or an enhancement in a reading speed. Furthermore, the test is carried out before the two-dimensional code reader is introduced or applied, and a two-dimensional code is actually read so that a reading stability or the like can be confirmed. Consequently, it is also possible to obtain an advantage to prevent a problem, for example, an insufficient reading rate is clear after the start of the application.","As described above, it is possible to implement a feature that the two-dimensional code reader setting method, the two-dimensional code read setting device, the two-dimensional code reader setting program, and the computer readable recording medium according to the present invention can easily set the conditions for reading a two-dimensional code such as an image pick-up optical system. The reason is that a user is caused to specify necessary set conditions and an optimum set condition is automatically calculated. When the user inputs a necessary item, an appropriate value, for example, an image pick-up section attachment distance, the thickness of a close-up ring, or the scale of a focusing ring is automatically calculated. Therefore, the user can exactly carry out the setting so that the condition for reading the two-dimensional code can be obtained. Consequently, it is possible to set easy reading conditions more rapidly than a method of searching for the condition setting manually with reference to a correspondence table as in the conventional art. In particular, even a user who does not know much about a two-dimensional code can simply input a necessary item so that the necessary item to be set is calculated and displayed. Thus, the conditions can be determined without difficulty. Furthermore, a user who knows much about the two-dimensional code can directly specify some items. Therefore, it is possible to quickly obtain a necessary result. Thus, an operating property is not deteriorated. According to the present invention, thus, it is possible to implement an advantageous feature in that appropriate condition settings can easily be carried out regardless of the user's ability.","Legend for Figures and Words in Figures",{"@attributes":{"id":"h-0033","num":"0000"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0184","num":"0000"},"ul":{"@attributes":{"id":"ul0001","list-style":"none"},"li":["(): DECODING SECTION","(): IMAGE PICK-UP SECTION","(): ILLUMINATING SECTION","(): CAMERA","(): LENS","(): IMAGE PROCESSING CIRCUIT","(): OPERATION CIRCUIT","(): READING STABILITY OUTPUT CIRCUIT","(): CONTROL SECTION","(): IMAGE PROCESSING SECTION","(): DECODE PROCESSING SECTION","(): READING STABILITY DETERMINING SECTION","(): SERIAL INPUT\/OUTPUT SECTION","(): HOST SYSTEM","(): TWO-DIMENSIONAL CODE\n\n\n","(): START","(): DETERMINE A TWO-DIMENSIONAL CODE SPECIFICATION","(): DETERMINE A CAMERA ATTACHMENT CONDITION","(): SET A TWO-DIMENSIONAL CODE READING OPERATION","(): REGULATE READING","(): END\n\n\n","(): SET SOFTWARE","(): FILE (F)\n    \n    ","(): DETERMINE 2D CODE SPECIFICATION","(): DETERMINE CAMERA ATTACHMENT DISTANCE","(): SET BODY OPERATION","(): REGULATE READING","(): DETERMINE 2D CODE SPECIFICATION","(): CODE TYPE","(): QR CODE\n    \n    ","(): DETAILS","(): DATA TYPE","(): FIGURE\n    \n    ","(): DATA VOLUME","(): DIGIT","(): PRINTABLE SPACE","(): LENGTH","(): WIDTH","(): START CALCULATION","(): CELL SIZE","(): CELL OR LESS","(): SYMBOL SIZE","(): OR LESS","(): PRINTING DETAILS\n\n\n","(): QR CODE DETAILS","(): MODEL","(): ERROR CORRECTING LEVEL","(): DOT PATTERN","(): CANCEL\n\n\n","(): SET PRINTING DETAILS","(): DETERMINE CELL SIZE FOR PRINTING.\n    \n    ","(): INPUT PRINTING PRECISION IF PRINTING PRECISION IS DIFFERENT FROM THAT OF YOUR THERMAL PRINTER.","(): CELL SIZE","() mm\/CELL OR LESS","(): PRINTING PRECISION","(): RECALCULATION","(): PRINTER RESOLUTION","(): DOT NUMBER DOT\/CELL","(): CELL SIZE FOR PRINTING","(): SYMBOL SIZE FOR PRINTING","(): CANCEL\n\n\n","(): SET SOFTWARE","(): FILE (F)\n    \n    ","(): DETERMINE TWO-DIMENSIONAL CODE SPECIFICATION","(): DETERMINE CAMERA ATTACHMENT DISTANCE","(): SET BODY OPERATION","(): REGULATE READING","(): SET CAMERA ATTACHMENT DISTANCE","(): TWO-DIMENSIONAL CODE SPECIFICATION","(): CELL SIZE","(): SYMBOL SIZE (INCLUDING MARGIN)","(): LENGTH","(): WIDTH","(): LABEL SHIFT RANGE","(): ROTATION","(): PRINTING PATTERN","(): NORMAL","(): DOT","(): ATTACHMENT DISTANCE LIMITATION","(): NO","(): YES","(): ATTACHMENT DISTANCE\n    \n    ","(): VISUAL FIELD","(): ATTACHMENT CONDITION DETAILS","(): START CALCULATION\n\n\n","(): 2D CODE SPECIFICATION","(): CALCULATE SYMBOL SIZE","(): WORK POSITIONING PRECISION","(): DESIRED ATTACHMENT DISTANCE","(): CAMERA ATTACHMENT DISTANCE\n    \n    ","(): CALCULATE SYMBOL SIZE","(): CALCULATE SYMBOL SIZE FROM CODE TYPE, VERSION (CODE SIZE) AND CELL SIZE. INQUIRE AT LABEL CREATION SOURCE IF THESE INFORMATION ARE NOT KNOWN.","(): CODE TYPE","(): QR CODE\n    \n    ","(): VERSION\n    \n    ","(): SYMBOL SIZE\n    \n    ","(): ATTACHMENT CONDITION DETAILS","(): FOCUSING RANGE","(): RATE OF CODE TO VISUAL FIELD","(): CLOSE-UP RING COMBINATION\n    \n    ","(): VISUAL FIELD\n    \n    ","(): ATTACHMENT IMAGE\n\n\n","(): SET XXX OPERATION","(): READING CODE\n    \n    ","(): SET A READING CODE","(): QR CODE\n    \n    ","(): SET DETAILS OF OTHER CODES","(): INSPECT CHECK DIGIT","(): INSPECT CHECK DIGIT\n    \n    ","(): INSPECT CHECK DIGIT","(): RESTRICT THE NUMBER OF DIGITS OF BAR CODE","(): 2D CODE PRINTING STATE","(): INVERT WHITE AND BLACK (I)\n    \n    ","(): PRINTING PATTERN\n    \n    ","(): TRANSMITTING AND RECEIVING SOURCE","(): MEMORY \n\n\n","(): READING MODE","(): SINGLE LABEL\n    \n    ","(): MULTI-LABEL\n    \n    ","(): READING MODE DETAILS","(): INPUT TIME CONSTANT MILLISECOND","(): TRIGGER ON COMMAND\n    \n    ","(): RE-READING PREVENTING TIME SECOND","(): BINARY DETAILS\n\n\n","(): OUTPUT TIMING","(): AFTER READING\n    \n    ","(): OK TERMINAL OUTPUT\n    \n    ","(): OUTPUT ON TIME\n    \n    ","(): READING ERROR CODE OUTPUT\n    \n    ","(): TRANSFER DATA DETAILS\n\n\n","(): SET PREDICTIVE MAINTENANCE INFORMATION (PMI). THE PREDICTIVE MAINTENANCE INFORMATION CAN BE OUTPUTTED FROM PM TERMINAL OR CAN BE ADDED TO READ DATA AND SERIALLY TRANSFERRED.","(): PM TERMINAL OUTPUT","(): PREDICTIVE MAINTENANCE INFORMATION (PMI)\n    \n    ",{"@attributes":{"id":"ul0001-0134","num":"0368"},"b":"4"},"(): DATA LENGTH (L)","(): STOP BIT (S)","(): FLOW CONTROL\n    \n    ","(): COMMUNICATION MEANS\n    \n    ","(): AFTER SETTING TRANSMISSION, REFLECT PC COMMUNICATION SETTING.","(): PARITY (P)\n    \n    ","(): HEADER, TERMINATOR","(): NOTHING, CR LF\n\n\n","(): EXTERNAL ILLUMINATION OUTPUT","(): PERMIT BUZZER OPERATION","(): MONITOR DISPLAY READ DATA\n    \n    ","(): REGULATE READING\n    \n    ","(): SET","(): RECEIVED DATA\n    \n    ","(): DISPLAY FORMAT\n    \n    ","(): START TEST\n    \n    ","(): EXAMPLE\n\n\n","(): SET READING TEST","(): DECODE TIME LIMITATION WITHIN SECOND","(): NUMBER OF TRIALS","(): DISPLAY DATA\n    \n    ","(): ILLUMINANCE DISTRIBUTION","(): RECOMMENDED PATTERN","(): REGULATE CAMERA ATTACHMENT POSITION AND ILLUMINATION SUCH THAT ILLUMINANCE DISTRIBUTION APPROACHES RECOMMENDED PATTERN.","(): BRIGHT","(): DARK","(): END\n\n\n","(): BINARY OPTION","(): THESE SET ITEMS DO NOT NEED TO BE USUALLY CHANGED.","(): BINARY MODE\n    \n    ","(): A\/D CONVERSION REFERENCE VALUE\n    \n    ","(): DIGITAL FILTER SMOOTHING","(): SIZE","(): SET DOT PATTERN\n    \n    ","(): DOT SIZE\n    \n    ","(): INITIAL VALUE"]}}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0035","num":"0034"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0037","num":"0036"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0038","num":"0037"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0039","num":"0038"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0040","num":"0039"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0041","num":"0040"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0042","num":"0041"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0043","num":"0042"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0044","num":"0043"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0045","num":"0044"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0046","num":"0045"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0047","num":"0046"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0048","num":"0047"},"figref":"FIG. 16"},{"@attributes":{"id":"p-0049","num":"0048"},"figref":"FIG. 17"},{"@attributes":{"id":"p-0050","num":"0049"},"figref":"FIG. 18"},{"@attributes":{"id":"p-0051","num":"0050"},"figref":"FIG. 19"},{"@attributes":{"id":"p-0052","num":"0051"},"figref":"FIG. 20"},{"@attributes":{"id":"p-0053","num":"0052"},"figref":"FIG. 21"},{"@attributes":{"id":"p-0054","num":"0053"},"figref":"FIG. 22"},{"@attributes":{"id":"p-0055","num":"0054"},"figref":"FIG. 23"}]},"DETDESC":[{},{}]}
