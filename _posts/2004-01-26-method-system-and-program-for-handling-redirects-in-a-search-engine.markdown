---
title: Method, system, and program for handling redirects in a search engine
abstract: Disclosed is a method, system, and program for handling redirects in documents. At least one equivalence class that includes documents that are connected through a redirect. Cycles for each equivalence class are detected, wherein documents in a cycle are marked so that they are not indexed. Incomplete chains for each equivalence class are detected, wherein documents in an incomplete chain are marked so that they are not indexed. A representative for each equivalence class is selected.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08296304&OS=08296304&RS=08296304
owner: International Business Machines Corporation
number: 08296304
owner_city: Armonk
owner_country: US
publication_date: 20040126
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION","Additional Implementation Details"],"p":["1. Field of the Invention","The present invention is related to handling redirects in a search engine.","2. Description of the Related Art","The World Wide Web (also known as WWW or the \u201cWeb\u201d) is a collection of some Internet servers that support Web pages that may include links to other Web pages. A Uniform Resource Locator (URL) indicates a location of a Web page. Also, each Web page may contain, for example, text, graphics, audio, and\/or video content. For example, a first Web page may contain a link to a second Web page.","A Web browser is a software application that is used to locate and display Web pages. Currently, there are billions of Web pages on the Web.","Web search engines are used to retrieve Web pages on the Web based on some criteria (e.g., entered via the Web browser). That is, Web search engines are designed to return relevant Web pages given a keyword query. For example, the query \u201cHR\u201d issued against a company intranet search engine is expected to return relevant pages in the intranet that are related to Human Resources (HR). The Web search engine uses indexing techniques that relate search terms (e.g., keywords) to Web pages.","Some Web pages do not contain content, but, instead, contain a \u201credirect\u201d to another Web page. For example, if a given Web page A (i.e., a source) redirects to another Web page B (i.e., a target), the Web browser shows Web page B whenever a request for Web page A is received. There are several ways of implementing redirects, including Hyper Text Transfer Protocol (HTTP) redirects (e.g., with HTTP return codes  and ), the use of a META REFRESH tag in Hyper Text Markup Language (HTML), and scripting languages such as JavaScript.","Redirects are a challenge to Web search engines since the content of a target page should be used to index a source page. For instance, if Web page A redirects to Web page B, then the URL of Web page A should be indexed with the content of Web page B because Web page A has no content, just the redirect (e.g. the JavaScript code that does the redirect). Moreover, redirects may form chains (e.g., Web page A redirects to Web page B, which in turn redirects to Web page C), in which case the transitive closure relationship should be resolved. Additionally, redirect chains may have cycles (e.g., Web page A redirects to Web page B, which redirects to Web page C, which redirects to Web page A), in which case these Web pages should not be indexed because the Web browser cannot display them. Conventional search engines do not handle redirects well. Additionally, conventional search engines handle redirects when \u201ccrawling\u201d (i.e., retrieving Web pages), and so they lose the ability to use redirect information in conjunction with, for example, ranking, duplicate detection, and anchor text processing.","Thus, there is a need for improved redirect processing.","Provided are a method, system, and program for handling redirects in documents. At least one equivalence class that includes documents that are connected through a redirect. Cycles for each equivalence class are detected, wherein documents in a cycle are marked so that they are not indexed. Incomplete chains for each equivalence class are detected, wherein documents in an incomplete chain are marked so that they are not indexed. A representative for each equivalence class is selected.","In the following description, reference is made to the accompanying drawings which form a part hereof and which illustrate several implementations of the present invention. It is understood that other implementations may be utilized and structural and operational changes may be made without departing from the scope of the present invention.",{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 1","b":["100","190","120","100","190","100","104","110","112","104","112","170","112"]},"The server computer  includes system memory , which may be implemented in volatile and\/or non-volatile devices. A search engine  executes in the system memory . In certain implementations, the search engine includes a crawler component , a static rank component , a redirect component , a duplicate detection component , an anchor text component , and an indexing component . Although components , , , , , and  are illustrated as separate components, the functionality of components , , , , , and  may be implemented in fewer or more or different components than illustrated. Additionally, the functionality of the components , , , , , and  may be implemented at a Web application server computer or other server computer that is connected to the server computer . Additionally, one or more server applications  execute in system memory .","The server computer  provides the client computer  with access to data in at least one data store  (e.g., a database). Although a single data store  is illustrated, for ease of understanding, data in data store  may be stored in data stores at other computers connected to server computer .","Also, an operator console  executes one or more applications  and is used to access the server computer  and the data store .","The data store  may comprise an array of storage devices, such as Direct Access Storage Devices (DASDs), Just a Bunch of Disks (JBOD), Redundant Array of Independent Disks (RAID), virtualization device, etc. The data store  includes data that is used with certain implementations of the invention.",{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIGS. 2A and 2B","b":["200","130","142","132","132","132","170","120","120","132","170","132"]},"In block , the static rank component  reviews the stored documents and assigns a rank to the documents. The rank may be described as the importance of the source document relative to other documents that have been stored by the crawler component . Any type of ranking technique may be used. For example, documents that are accessed more frequently may receive a higher rank.","In block , the redirect component  builds a redirect file based on the stored documents. In certain implementations, the redirect component  performs a data store scan to read the documents stored by the crawler component  and determines whether the document contains a redirect. In certain implementations, the redirect component  determines whether a document contains a redirect based on meta-data associated with each document, markup data associated with each document, or content of each document. For instance, the redirect component may detect an HTTP return code (e.g., codes  or  in a HTTP header) indicating a redirect in the document, a META REFRESH directive in a HTML document, or a script (e.g., JavaScript) that performs a redirect in the document.","If the document contains a redirect, the redirect component  determines a target document of the redirect. In the case that a document contains a redirect, the redirect component  stores an entry for the document in the redirect file. In certain implementations, an entry consists of a source path (e.g., URL), a target path (e.g., URL), and a redirect type. A path may be described as data that indicates a location of a document.","Although examples herein may refer to HTML format or HTTP meta data, certain implementations of the invention are applicable to other formats and other retrieval protocols (e.g., different formats such as XML or Portable Document Format (PDF) and different retrieval protocols such as symbolic links in file systems, the File Transfer Protocol (FTP), etc.).","In block , the redirect component  identifies redirect chains in the redirect file. One example of a redirect chain occurs when a first document redirects to a second document, which in turn redirects to a third document. In certain implementations, the redirect component  identifies the redirect chains by scanning the redirect file and building a \u201cunion find\u201d data structure to identify the redirect chains. The \u201cunion find\u201d data structure could, for instance, be a mapping from documents to equivalence classes. An equivalence class may be described as including documents that are connected through a redirect. For example, if a source document has a redirect to a target document, the source document and target document are mapped to the same equivalence class.","Initially, each document is in its own equivalence class. Then, for each entry in the redirect file, if a first document redirects to a second document, the equivalence classes of the first and second documents are unified. Continuing with this processing, if the second document redirects to a third document, then the third document is in the same equivalence class as the first and second documents. The redirect component , thus, processes the entries in the redirect file to identify redirect chains in the form of equivalence classes.","In block , the redirect component  detects cycles in the redirect chains. For example, a cycle occurs when a first document redirects to a second document, which redirects to a third document, which redirects back to the first document. Once the redirect chains are identified, the redirect component  performs cycle detection. In particular, cycle detection analyzes each redirect chain, looking for cycles. If a cycle is detected in a redirect chain, the redirect component  marks the documents involved in that redirect chain with a \u201cdo not index\u201d indicator (e.g., flag), which indicates to the indexing component  that these documents are invalid documents that should not be indexed.","In block , the redirect component  detects incomplete chains in the redirect chains. In certain implementations, the incomplete chain detection is performed for chains that are not marked with a \u201cdo no index\u201d indicator. An example of an incomplete chain occurs when the documents in a single redirect chain are redirects, R->R-> . . . ->Rn, where Rn is a redirect to a document that was not discovered, fetched, and stored by the crawler component  (i.e., \u201ccrawled\u201d). This redirect chain is considered incomplete because there is no content associated with Rn (because it was not \u201ccrawled\u201d). The redirect component  marks documents in the incomplete redirect chain with a \u201cdo not index\u201d indicator.","In block , the redirect component  selects a representative for each redirect chain, and, if needed, propagates content of a target document with the selected representative. The technique for selecting a representative may be adapted to a search engine  policy. For instance, if a first document redirects to a second document, the content of the second document may be indexed with the path of either the first or second document. The selection may depend on the redirect type, for example, whether the redirect is permanent or temporary, or may be based on a static rank computed for each document.","In certain implementations, the redirect component  selects a representative for each redirect chain (e.g., equivalence class) whose documents have not been marked with a \u201cdo not index\u201d indicator. In certain implementations, the representative is a path (e.g., a URL) with which the content of the final target document in the chain is indexed. The final target document in the redirect chain contains content, while the other documents in the redirect chain redirect to the final target document. The other documents may directly (e.g., a second document redirects to the final target document) or indirectly (e.g., a first document redirects to a second document that redirects to the final target document) redirect to the final target document.","In certain implementations, the redirect component  selects a representative based on the type of the redirects (e.g., permanent or temporary), a static rank assigned to each document by the static rank component , or based on other criteria. For instance, for HTTP permanent redirects, the redirect component  may select the path (e.g., URL) of the target document, while for HTTP temporary redirects, the redirect component  may select the path (e.g., URL) of a source document. If selection is based on a ranking, a document with a highest ranking in an equivalence class may be selected. In certain embodiments, the paths for documents that are not selected are marked with an \u201cignore\u201d indicator so that these paths are not included in an index.","Moreover, the content of the target document may be propagated to the selected representative. For example, if the selected representative includes a temporary redirect, the content of the target document is propagated to the selected representative.","In block , the search engine  determines whether duplicate detection is to be performed. If so, processing continues to block , otherwise, processing continues to block . In block , the duplicate detection component  detects duplicate documents in different redirect chains and merges the redirect chains. In certain implementations, the duplicate detection component  uses a content-based duplicate detection technique that uses information about the documents in the redirect chain (i.e., the equivalence class) in the \u201cunion find\u201d data structure. In certain embodiments, two documents may be considered to be duplicates if they are similar (e.g., more than some percentage (e.g., 90%) of their content is the same). For example, if a first and second document are considered equivalent by content, and if a third document redirects to the first document and a fourth document redirects to the second document, the redirect component  concludes that the first, second, third, and fourth documents are equivalent. Additionally, if a redirect chain has a first document and another redirect chain has a second document, and if the first document and second document are duplicates based on content, the redirect chains containing the first and second documents are merged to form one redirect chain.","In block , the search engine  determines whether anchor text processing is to be performed. If so, processing continues to block , otherwise, processing continues to block . In block , the anchor text component  performs anchor text processing. Anchor text may be described as text associated with a path or link (e.g., a URL) to a document. In certain implementations, anchor text is text that labels or encloses hypertext text links in Web documents.","The search engine  may collect, for each document, the anchor text of paths that point to that document, and then the anchor text may be indexed along with the document content. For example, if a first document links to a second document, and the second document is a redirect to a third document, then the anchor text of the path from the first document to the second document is indexed along with the content of the third document, if the document is considered the representative of the redirect chain.","In certain implementations, the anchor text component  uses an anchor text indexing technique that uses information about the documents in the redirect chain (i.e., the equivalence class) in the \u201cunion find\u201d data structure to propagate anchor text to the representatives of redirect chains. As another example, if a first and a second document are in a redirect chain (e.g., an equivalence class) whose representative is a third document, then the anchor text pointing to the first document and to the second document is indexed for the third document, along with the content of the target document of the redirect.","In block , the indexing component  generates an index. In particular, for each redirect equivalence class, the indexing component  locates the target document that contains content (e.g., the target of the redirects) and indexes that content with the path (e.g., URL) of the representative for the redirect chain (e.g., equivalence class). The indexing component  performs indexing for the documents stored by the crawler component .","In certain implementations, paths of each document in the equivalence class may also be propagated to the selected representative for global analysis, which is described further in U.S. patent application Ser. No. 10\/764,722, entitled \u201cA PIPELINED ARCHITECTURE FOR GLOBAL ANALYSIS AND INDEX BUILDING,\u201d by Marcus F. Fontoura et al., filed on the same date herewith, and which is incorporated by reference herein in its entirety.",{"@attributes":{"id":"p-0042","num":"0041"},"figref":["FIG. 3","FIGS. 2A and 2B"],"b":["300","112","302","130","304","306","112"]},"Thus, certain implementations of the invention address the problem of indexing redirects in a search engine . Certain implementations of the invention identify redirects and group documents into equivalence classes. Certain implementations of the invention also identify cycles in redirect chains and incomplete redirect chains and avoid indexing the documents in a cyclic or incomplete redirect chains (i.e,. the documents marked \u201cdo not index\u201d are not included in the index generated by the indexing component ). Also, for each redirect chain, certain implementations of the invention identify a path for which the content is to be indexed, and marks all other paths to be ignored. Certain implementations of the invention work in conjunction with a content-based duplicate detection technique and with an anchor text indexing technique. The result of the processing of certain implementations of the invention is an improved index. Thus, the quality of results delivered by the search engine to its users is improved.","The described techniques for handling redirects in a search engine may be implemented as a method, apparatus or article of manufacture using standard programming and\/or engineering techniques to produce software, firmware, hardware, or any combination thereof. The term \u201carticle of manufacture\u201d as used herein refers to code or logic implemented in hardware logic (e.g., an integrated circuit chip, Programmable Gate Array (PGA), Application Specific Integrated Circuit (ASIC), etc.) or a computer readable medium, such as magnetic storage medium (e.g., hard disk drives, floppy disks, tape, etc.), optical storage (CD-ROMs, optical disks, etc.), volatile and non-volatile memory devices (e.g., EEPROMs, ROMs, PROMs, RAMs, DRAMs, SRAMs, firmware, programmable logic, etc.). Code in the computer readable medium is accessed and executed by a processor. The code in which various implementations are implemented may further be accessible through a transmission media or from a file server over a network. In such cases, the article of manufacture in which the code is implemented may comprise a transmission media, such as a network transmission line, wireless transmission media, signals propagating through space, radio waves, infrared signals, etc. Thus, the \u201carticle of manufacture\u201d may comprise the medium in which the code is embodied. Additionally, the \u201carticle of manufacture\u201d may comprise a combination of hardware and software components in which the code is embodied, processed, and executed. Of course, those skilled in the art will recognize that many modifications may be made to this configuration without departing from the scope of the present invention, and that the article of manufacture may comprise any information bearing medium known in the art.","The logic of , B, and  describes specific operations occurring in a particular order. In alternative implementations, certain of the logic operations may be performed in a different order, modified or removed. Moreover, operations may be added to the above described logic and still conform to the described implementations. Further, operations described herein may occur sequentially or certain operations may be processed in parallel, or operations described as performed by a single process may be performed by distributed processes.","The illustrated logic of , B, and  may be implemented in software, hardware, programmable and non-programmable gate array logic or in some combination of hardware, software, or gate array logic.",{"@attributes":{"id":"p-0047","num":"0046"},"figref":"FIG. 4","b":["100","120","180","400","400","402","404","410","405","404","410","406","410","404","402","408","412","402","414","402","400"]},"The computer architecture  may comprise any computing device known in the art, such as a mainframe, server, personal computer, workstation, laptop, handheld computer, telephony device, network appliance, virtualization device, storage controller, etc. Any processor  and operating system  known in the art may be used.","The foregoing description of implementations of the invention has been presented for the purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise form disclosed. Many modifications and variations are possible in light of the above teaching. It is intended that the scope of the invention be limited not by this detailed description, but rather by the claims appended hereto. The above specification, examples and data provide a complete description of the manufacture and use of the composition of the invention. Since many implementations of the invention can be made without departing from the spirit and scope of the invention, the invention resides in the claims hereinafter appended."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Referring now to the drawings in which like reference numbers represent corresponding parts throughout:",{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIGS. 2A and 2B"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 4"}]},"DETDESC":[{},{}]}
