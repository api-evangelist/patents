---
title: Controlling access to services in a communications system
abstract: A proxy network element for controlling access to services in a communications system is disclosed. The proxy network element is configured to communicate with at least one further network element using a protocol belonging to a plurality of protocols, the at least one further network element controlling service usage based on service subscriptions. The proxy network element is also configured to provide access for the at least one further network element to at least one information store storing information relating to service subscriptions. The proxy network element provides support for communicating using the plurality of protocols and support for accessing a plurality of different information stores.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07644267&OS=07644267&RS=07644267
owner: Nokia Corporation
number: 07644267
owner_city: Espoo
owner_country: FI
publication_date: 20040630
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS"],"p":["1. Field of the Invention","The present invention relates to controlling access to services in a communications system.","2. Description of the Related Art","A communication system can be seen as a facility that enables communication sessions between two or more entities such as user equipment and\/or other nodes associated with the communication system. The communication may comprise, for example, communication of voice, data, multimedia and so on. Communication systems providing wireless communication for communications devices, including various user equipment, are known. An example of the wireless systems is the public land mobile network (PLMN). Another example is the wireless local area network (WLAN).","A PLMN is typically a cellular system wherein a base transceiver station (BTS) or similar access entity serves user equipment (UE) such as mobile stations (MS) via a wireless interface between these entities. The operation of the apparatus required for the communication can be controlled by one or several control entities. The various control entities may be interconnected. One or more gateway nodes may also be provided for connecting the cellular network to other networks, such as to another cellular system or to a public switched telephone network (PSTN) and\/or other communication networks such as an IP (Internet Protocol) and\/or other packet switched data networks.","A cellular network, as an example of a communication system, may thus provide a number of communications services for a user. Furthermore the cellular network may provide access to various services and applications provided by the cellular network or by entities or networks external to the cellular network. These various services and application are often called content services. In the following description the term service generally refers to content services.","For controlling access to services, a communications system typically maintains information about service subscriptions. Only users having a service subscription may be allowed to access some services. Typically the service subscription information is maintained in a database or in a directory, and there is a subscription server managing the service subscriptions and service provisioning. Service provisioning refers here to configuring various network elements so that the user is provided with the access to the service he has subscribed to. Information about user subscribing a new service may be input manually to the subscription server by a person handling subscription information. Alternatively, the subscription server may be equipped with an interface for receiving subscription information from a further server which a user may access, for example, by browsing the Internet.","Access to some services may be controlled simply by service provisioning. In this case, when the relevant network elements have been configured properly, the user can access the service and otherwise he cannot access the service. In some cases, however, a user's access to a service is not dependent on configuring network element. In this case there may be need to monitor the user's service usage on-line, for example, for controlling the service usage or for charging purposes.",{"@attributes":{"id":"p-0010","num":"0009"},"figref":["FIG. 1","FIG. 1","FIG. 1"],"b":["100","10","120","10","120","100","110","112","114","114","10","114","114","114","112"]},"Typically a network operator of a communications system has a customer care and billing system with an information store for subscription information. If the network operator wishes to add to the communications system further network elements for controlling users' service usage, the customer care and billing system typically needs to be modified for providing access to the subscription information. Different network operators may have different customer care and billing systems, and the network elements for controlling service usage may be provided by different vendors. The customer care and billing system typically uses certain protocols, which may be even proprietary protocols of the network operator. Therefore at least protocol translation needs to be done for providing access to the customer care and billing system for the network element controlling service usage. Traditionally a lot of resources have been invested in making a specific customer care and billing system and network elements needing access to the customer care and billing information interoperable.","Alternatively, it is possible that a further information store is used for storing information relating to services provided by servers or network elements external to the communication system of the network operator. One reason for this is that a network operator may be reluctant to give access to the customer care and billing system for any network elements. A further reason may be that the customer care and billing system does not store information needed for controlling service usage. Additionally, a customer care and billing system may not be able to respond as often as is needed to on-line queries made by network elements controlling service usage.","There are thus a number of problems in providing a solution for controlling users' service usage. Typically it is expected that a solution involves a considerable amount of integration work.","One of the aims of the present invention is provide a feasible solution to the problem of controlling users' service usage.","A first aspect of the present invention relates to a proxy network element for controlling access to services in a communications system, said proxy network element configured to","communicate with at least one further network element using a protocol belonging to a plurality of protocols, said at least one further network element controlling service usage based on service subscriptions, and","provide access for said at least one further network element to at least one information store storing information relating to service subscriptions, said proxy network element providing support for communicating using said plurality of protocols and support for accessing a plurality of different information stores.","A second aspect of the present invention relates to a system for controlling access to services in a communications system, said system comprising","at least one information store for storing information relating to service subscriptions,","at least one first network element for controlling service usage based on service subscriptions, a first network element using a protocol of a plurality of first protocols for communicating information relating to the service subscriptions, and","a proxy network element configured to communicate with said at least one first network element using a protocol belonging to a plurality of protocols and to provide access for said at least one first network element to said at least one information store, said proxy network element providing support for communicating using said plurality of protocols and support for accessing a plurality of different information stores.","A third aspect of the present invention relates to a system for controlling access to services in a communications system, said system comprising","at least one information store for storing information relating to service subscriptions,","a first network element for managing said information relating to service subscriptions, said first network element configured to store and access information in said at least one information store,","at least one second network element for controlling service usage based on service subscriptions, and","a proxy network element configured to provide access for said at least one second network element to said at least one information store and to send to the first network element information relating to a new service subscription for making the new service subscription.","A fourth aspect of the present invention relates to a proxy network element for controlling access to services in a communications system, said proxy network element configured to","provide access for at least one first network element to at least one information store, said at least one first network element controlling service usage based on service subscriptions, and","send to a second network element information relating to a new service subscription for making the new service subscription, said second network element managing said information relating to service subscriptions and storing information in at least one of said at least one information store.","A fifth aspect of the present invention relates to a method for processing a request in a proxy network element, said method comprising","receiving a request in accordance with a protocol using a respective protocol specific module, said request relating to service usage and being received from a further network element responsible for controlling service usage, said protocol specific module belonging to a plurality of protocol specific modules provided in said network element,","converting said request into a unified request, and","processing said unified request.","A sixth aspect of the present invention relates to a method for controlling access to services in a communication network, said method comprising","receiving a request relating to service usage from a first network element responsible for controlling service usage,","detecting a need for a new service subscription relating to said request, and","sending information relating to the new service subscription to a second network element responsible for managing service subscriptions.","In accordance with another embodiment of the invention, a computer program embodied on a computer-readable medium , is provided. The computer program is configured to control a processor to perform communicating with at least one further network element using a protocol belonging to a plurality of protocols. The at least one further network element controlling service usage based on service subscription. The computer program is configured to control a processor to perform providing access for the at least one further network element to at least one information store storing information relating to service subscription. The proxy network element providing support for communicating using the plurality of protocols and support for accessing a plurality of different information stores.","The terms service usage and access to services in this description and in the appended claims refer mainly to content services. As mentioned above, a network element controlling service usage may identify the content service, for example, based on a network address, protocol, and\/or destination URL (Uniform Resource Locator). Some examples of content services are browsing (typically using Hypertext Transfer Protocol HTTP), electronic mail (specific protocols for communications between an email client and an email server), and services providing specific content like news services. News services and other specific content services are typically identified by URLs.","When the use of certain content services is controlled or monitored by a network operator providing mobile communications services, a user wishing to use these content services with a mobile station typically needs to have a service subscription to these content services with the network operator. It is appreciated that for accessing and using, for example, certain news services a user typically needs to have a subscription also with the news service provider. Subscriptions with content service providers are, however, not discussed further in this description.",{"@attributes":{"id":"p-0048","num":"0047"},"figref":["FIG. 2","FIG. 2"],"b":["220","200"]},"The communication system  has a network element  for managing subscription information. This network element  may be, for example, a part of a customer care and billing system. Alternatively, it may be a network element managing subscription information relating to services provided by servers external to the communication system . The communication system  also has, as an example, two information stores , for storing subscription information. It is possible that the first information store contains information relating to the same users as the second information store , but the pieces of user information or subscription information contained in these information stores are different. For example, the information store may contain information relating to the services provided by the communications system  and the second information store may contain information relating to services provided by servers external to the communications system . It is possible that the communication system  contains only one information store or more than two information stores.","An information store may be a directory employing a certain protocol for accessing and modifying the information stored in the directory. One example is a directory employing the Lightweight Directory Access Protocol (LDAP). An information store may alternatively be a relational database, for example, an Oracle database or a DB\/2 database. Further examples of information stores are proprietary information stores. There are also emerging standards for information stores, examples of which are Liberty, 3GPP GUP (Third Generation Partnership Project Generic User Profile), and SOAP\/XML (Simple Object Access Protocol\/Extensible Markup Language)","The communication system  contains a plurality of network elements , , for monitoring and controlling service usage. These network elements  need to have access to at least one of the information stores , storing subscription information. A network element  for monitoring and controlling service usage typically has the following functionality. The network element  gets the end user's (subscriber's) identity from the network (in other words, from other network elements). In addition, the network element  monitors end user's traffic and thus knows, which service the end user is currently using. It needs to retrieve end user's subscription information for that particular service from one or multiple of data stores , . The subscription information defines, how the network element  should monitor and control the end user's traffic. Different monitoring options can be, for example, count transmitted or received bytes, measure connection or session time, count only certain URLs or web pages accessed and report the measurements either to a file or to another network element. Controlling options can be, for example, allowing unlimited access, denying access, asking from another network element, how much traffic is allowed, redirecting traffic to another destination, or assuring certain QoS (Quality of Service). There are many common standards specifying how network elements monitoring and controlling service usage interact with each other and retrieve the user and subscription information. The following are some examples of such standards: LDAP, Radius, Diameter, Corba and SOAP\/XML.","It is appreciated that in the following description and in the appended claims a reference to a network element controlling service usage means a network element controlling and\/or monitoring service usage.","The proxy network element  provides connectivity between the network elements  and the information stores . As there are many possible protocols a network element  can use, the proxy network element  provides support for a plurality of protocols for communications between the network elements  and the proxy network element . Furthermore, as the information stores may be of different types, the proxy network element  provides support for accessing a plurality of different information stores.","A proxy network element  enables use of existing infrastructure for managing subscriptions and information about subscriptions. If the existing information stores have the needed data, the proxy  enables service usage controlling network elements to connect to the information stores. The proxy  thus saves the network operators duplicate investments into the system infrastructure for managing subscriptions.",{"@attributes":{"id":"p-0055","num":"0054"},"figref":["FIG. 3","FIG. 3","FIG. 3"],"b":["300","300","114","310","311","114","311","114","114","300","300","311","320","320","321","320","300","330","331"]},"It is appreciated that a unified message in this description and in the appended claims refers to a set of predefined attributes or other predefined message components. There may be defined a set of predefined message structures. A message structure here refers to a predefined set of attributes or other message components. Typically each predefined message structure has a respective identifier, and this message identifier may be used for determining how to process the unified message. For example, unified message could be a hash table, where keys and values are:",{"@attributes":{"id":"p-0057","num":"0056"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"PROTOCOL RADIUS"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"133pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"NE","GGSN"]},{"entry":[{},"TYPE","PROFILE_QUERY"]},{"entry":[{},"user_id","foo@bar.com"]},{"entry":[{},"IMSI","3294537457324532"]},{"entry":[{},"MSISDN","+358501231234"]},{"entry":[{},"source_ip","141.192.76.13"]},{"entry":[{},"URL","wap:\/\/wap.bar.com\/foo\/song.mp3"]},{"entry":[{},"timestamp","20040311114543"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}]}}},"In the beginning profile of query process a hash table could, for example, include only first four attributes. The rest of the attributes are added in the processing layer . The processing layer  may determine the subscriber identity IMSI (International Mobile Subscriber Identity) and the phone number MSISDN (Mobile Subscriber Integrated Services Digital Network) based on the original user identity information user_id, by accessing an information store containing information about the correspondence of the user identities and the subscriber identities.","The proxy  thus provides the protocol driver support for various protocols the network elements  may use. In addition the proxy  provides the ability to program the translation business logic. Translation business logic consists of modules each capable of doing dedicated operations. Each module's operation can be further specified with the configuration of proxy . The proxy  also has mechanism for adding new protocol specific modules , new processing modules  and\/or new data source connector modules  to the process of connecting clients to data sources. If a needed protocol specific module (query collector module), processing module or data source connector module is not yet available, the proxy  has a well defined API (Application Programming Interface), which makes it possible to implement the needed module. Such modules can be added to the proxy  without affecting the existing modules and without need to recompile the proxy .",{"@attributes":{"id":"p-0060","num":"0059"},"figref":"FIG. 4","b":["400","400","400"]},"To process the queries\/requests from the network elements , the proxy  has a plurality of processing modules  for processing requests. When a specific request is received, the proper processing modules  for processing the request can be selected based on the received request. Typically the received request is first translated into a unified request, and then the modules for processing the unified request are selected. The request is then processed in a pipeline processing manner using the set of processing modules, the processing modules sequentially following each other.","The following are some examples of processing modules for processing request. A request validation processing module  checks that the request contains necessary information for providing a response. An attribute translation processing module, which is in  shown to be part of the same processing module  as the request validation processing module, translates attributes in the original request into attributes used in processing requests in the proxy . For example, names of the attributes and the types of the attributes may need to be changed or a new attribute may need to be constructed based on other attributes. A request enhancement processing module  is responsible for fetching information, which is relevant for processing the original request but was not present in the original request. For example, the request enhancement processing module  may fetch a telephone number used in a specific information store based on a user identity present in the original request. As a further example, it is possible that a subscriber identity relating to the original user identity needs to be fetched from a first information store and then the telephone number is fetched from a second information store using the subscriber identity fetched from the first information store. A request filtering processing module  is responsible for filtering before information is fetched from the information stores. For example, it is possible that certain requests are treated as notifications and no response will be provided. As a further example, it is possible that in certain situations a standard response is sent. This may be applicable, for example, to prepaid subscriptions.  shows also a copying processing module. The copying processing module is responsible sending a complete copy or a partial copy of the request to a further network element or to a further process, for example, to a fraud detection system. Furthermore, as  shows, it is possible to provide a number of additional logic modules.","Similarly, the proxy  contains a plurality of processing modules for processing unified responses before converting them into responses to be sent to the network elements  controlling service usage. The conversion from a unified message into a protocol message to be sent to the network element  takes place in the query collection layer , typically in the specific protocol module. A set of processing modules from the plurality of processing modules may be selected based on the unified response to be processed.  shows some examples of processing modules for processing responses. An attribute translation processing module  translates, where necessary, attributes of the unified message into attributes to be sent to the network element . The processing component  performs similar tasks as the processing component , namely validation, filtering and\/or sending copies of the message. The privacy processing component  may be used, for example, for encrypting some information in the message. It is appreciated that same processing modules may be applicable for processing unified requests and unified responses.","The response sent from a proxy network element back to the network element controlling service usage typically contains subscription information indicating details for monitoring and\/or controlling the user's service usage.","The processing modules for processing the unified requests and responses may be configurable. The processing modules for processing the unified requests and responses may also be loadable. Proxy  has a system configuration  specifying, which protocols are supported and how different queries are processed i.e. what processing modules are used and in which order. Only processing modules that are needed and specified in the configuration, are loaded. For each processing module, the system configuration  can specify further, how that processing module processes the query. Thus the same processing module can behave in a different way while processing different types of queries. For example, for query types A and D a filtering processing module can filter out prepaid subscribers, for query type B it can filter out postpaid subscribers, and for query type C it can filter out both prepaid and postpaid subscribers. This increases the reusability of processing modules, and makes it easier for the proxy  to adapt to different processing needs.","The system configuration part  shows in  is discussed in detail above. There may also be a user interface  or other interface for specifying processing pipelines and configuring modules. As seen in previous paragraph, the system configuration is the soul of the proxy  as the system configuration specifies, how the proxy  behaves. To ease the configuring, a graphical user interface may be useful.",{"@attributes":{"id":"p-0067","num":"0066"},"figref":"FIG. 4","b":["420","212"]},"In-memory cache  allows for clients to store real-time session information to the proxy. A session can be, for example, a PDP context in GPRS network. The proxy  can store information related to the end user's session for the duration of the session. A network element  can, for example, inform the proxy  about the end user's location or measurement data relating to the session. Another network element  can request for the session information or the session information may be needed to construct a reply to another network element's  query. If the only function that the proxy  performs is the protocol translation between network elements  and information stores , it is not mandatory that the proxy maintains session information for each session or for any session, for example, if memory is low. The more the proxy  caches, the better the performance of the system typically is.","As  shows, there may also be a management interface  in the proxy . In certain situations, it might be beneficial to know currently active sessions. Proxy's in-memory cache  can be queried for administrative purposes using the management interface . Due to some missed queries or malfunction in the network, some session data may be left in the in-memory cache  even if the session has been terminated. In such cases the management interface  can be used to purge orphaned session information.","The proxy  also has means for synchronizing service subscription information stored in said memory means with information stored in said plurality of information stores. It is possible that the synchronization is carried out by the proxy polling the information stores for changes, for example, periodically. Alternatively, the information stores may send updates relating to changed information, for example, periodically or as soon as the change takes place. When the proxy  notices a change in subscriber's subscription and the proxy  knows that the subscriber has an active session, the proxy  can push the updated subscription information to the network element  controlling the service usage. This requires support for unsolicited messages from the protocol that is being used to communicate between the proxy  and the network element .",{"@attributes":{"id":"p-0071","num":"0070"},"figref":["FIG. 5","FIG. 5","FIG. 5"],"b":["500","114","114","500","500","114","114","114","500","500","210","500","210","210","212","210","500","210","500","500"]},{"@attributes":{"id":"p-0072","num":"0071"},"figref":"FIG. 6","b":["600","600","601","602","603","601","605"]},{"@attributes":{"id":"p-0073","num":"0072"},"figref":"FIG. 7","b":["700","700","601","602","600","701","702","703","704","705","311","321","706","706","331","703","706","700","604","605"]},"It is appreciated that the functionality of detecting a need for a new subscription and making the new subscription for the user may be implemented in various kinds of proxy network elements suitable for systems controlling service usage. Such a proxy element need not necessarily provide support for a plurality of protocols or information stores nor employ a unified message structure or processing modules.","It is possible that when processing a request relating to service usage, the proxy network element queries information from at least one information store. The proxy network element may further store information queried an information store. The proxy network element may further check, before querying information from an information store, whether said information to be queried is already stored within the proxy network element.","The proxy network element may further store session information relating to requests for further use.","The proxy network element may further receive information indicating a change in subscription information from an information store. The proxy network element may itself query for this information. The proxy network element may send information relating to said change in subscription information to at least one network element controlling service usage, especially when a service session relating to said change in subscription information is active.","It is appreciated that a service subscription relates to a subscriber. The user of the service may be the same entity as the subscriber or an entity relating to the subscriber.","It is furthermore appreciated that the terms user and subscriber in this specification cover both persons and processes subscribing to services and using services. The term user refers also to a process and a communications device used by a human user for accessing services.","Although preferred embodiments of the apparatus and method embodying the present invention have been illustrated in the accompanying drawings and described in the foregoing detailed description, it will be understood that the invention is not limited to the embodiments disclosed, but is capable of numerous rearrangements, modifications and substitutions without departing from the spirit of the invention as set forth and defined by the following claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Embodiments of the present invention will now be described by way of example only with reference to the accompanying drawings, in which:",{"@attributes":{"id":"p-0039","num":"0038"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0040","num":"0039"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0041","num":"0040"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0042","num":"0041"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0043","num":"0042"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0044","num":"0043"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0045","num":"0044"},"figref":"FIG. 7"}]},"DETDESC":[{},{}]}
