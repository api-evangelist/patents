---
title: Markov model of availability for clustered systems
abstract: Availability of a clustered system is determined by identifying all possible states of a cluster, mapping the connections between the states are mapped and determining the probability of the cluster being in each of the states is determined. Availability of the cluster is the sum of the probabilities of being in those states in which the cluster is at least partially available. Parameters affecting the availability of the cluster include the rates at which a cluster transitions from state to state, including the reciprocal of Mean Time To Fail, Mean Time to Fail-Over, Mean Time To Fail-Back and Mean Time To Restore. Availability of statefull and stateless clusters may be determined. Availability of clusters including any number of nodes (e.g., a Internet service) can be determined. In one embodiment of the invention, a target availability is determined and parameters are varied to determine the most efficient approach to reach the target availability.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07024580&OS=07024580&RS=07024580
owner: Microsoft Corporation
number: 07024580
owner_city: Redmond
owner_country: US
publication_date: 20021115
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["FIELD OF THE INVENTION","BACKGROUND","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE INVENTION","CONCLUSION"],"p":["This invention relates to the field of availability analysis and in particular to the field of calculating availability of clustered systems using mathematical modeling.","\u201cAvailability\u201d, as used in the world of computing, encompasses the concepts of system failures and recovery schemes and the impact of each on downtime and uptime. Availability is commonly quantified by the \u201cnumber of nines\u201d, meaning the percentage of time that a given system is active and working. For example, \u201c2 nines\u201d means 99% availability, and \u201c3 nines\u201d means 99.9% availability. The following table demonstrates the maximum system downtime required to achieve the coveted increase in nines.",{"@attributes":{"id":"p-0004","num":"0003"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"56pt","align":"left"}}],"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}},{"entry":["Acceptable",{},{},{}]},{"entry":["Uptime (%)","Per day","Per month","Per year"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"char","char":"."}},{"@attributes":{"colname":"2","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"56pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["95","72.00 minutes","36 hours","18.26 days"]},{"entry":["99","14.40 minutes","\u20027 hours","\u20023.65 days"]},{"entry":["99.9","86.40 seconds","43 minutes","\u20028.77 hours"]},{"entry":["99.99","\u20028.64 seconds","\u20024 minutes","52.60 minutes"]},{"entry":["99.999","\u20020.86 seconds","26 seconds","\u20025.26 minutes"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]}}]}}},"As can be seen, to increase availability from \u201ctwo nines\u201d to \u201cfive nines\u201d requires a decrease in system downtime from 14.40 minutes per day to only 0.86 seconds per day. Many customers require a certain level of system availability from their service providers and typically specify this level of availability in a Service Level Agreement (SLA). The SLA may also specify what percentage of the time services will be available, the number of users that can be served simultaneously, performance benchmarks to which actual performance are periodically compared and the like. Often, financial penalties are levied for failure to meet these contractual requirements, thus providing a considerable incentive to service providers to increase system availability. Correspondingly there is a need for service providers to be able to predict availability levels with a considerable degree of accuracy and robustness.","One way to improve availability is by the use of clustering. A cluster is a group of independent computers that work together to run a common set of applications or services but appear to the client and application to be a single system. Clustered computers are physically connected by cables and are programmatically connected by specialized software, enabling features (such as load balancing and fail-over) that increase availability.","Load balancing distributes server loads across all the servers in the system, preventing one server from being overworked and enabling capacity to increase with demand. Network load balancing complements clustering by supporting availability and scalability for front-end applications and services such as Internet or intranet sites, Web-based applications, media streams and terminal-emulating server-based computing platforms.","Fail-over automatically transfers resources from a failing or offline cluster server to a functioning one, thereby providing users with constant access to resources. For example, a MICROSOFT SQL SERVER or MICROSOFT EXCHANGE SERVER, among others, could be implemented as a clustered server.","Current analysis methods used for calculating system availability typically consume massive amounts of time and hardware resources and thus can be enormously expensive. One or more servers are typically set up in the deployment and tests that are supposed to simulate expected usage are run. Availability statistics are collected and metrics such as Mean Time To Fail (MTTF) are computed. Not only are these tests expensive to run, the test results themselves are suspect because the code designers fix the errors encountered in the tests. Thus the simulation does not reflect the real world, and estimations of availability based on the simulation lack credibility. Additionally, in the case of calculating availability of Microsoft clustered systems, no known method has been developed whereby the connections between the server elements can be clearly expressed. Hence, there is a need in the art to calculate availability of such clustered systems in a less costly, more accurate and more credible manner. It would also be helpful to be able to realistically estimate availability to the order of precision required by the \u201cnumber of nines\u201d promised.","A system and method for determining the availability of a clustered system or a group of clustered systems is described. To determine the availability of a clustered system, the state space of the system is approximated, the transitions between the states are mapped and the probability of the cluster being in each of the states is determined. Availability of the cluster is the sum of the probabilities of being in those states in which the cluster is available. Parameters affecting the availability of the cluster include the rates at which a cluster transitions from state to state. Using these metrics, availability of statefull and stateless clusters can be determined. Availability of clusters with any number of nodes can be determined. In one embodiment of the invention, a target availability is determined and parameters are varied to determine the most efficient approach to reach the target availability.","Overview","A system and method for calculating the availability of a cluster of computing devices is described. Parameters including but not limited to Mean Time to Fail, Mean Time to Fail-Over, Mean Time to Repair or Recover and, in the context of active-active clusters, Mean Time to Fail-Back, are exposed as free parameters. The parameters are correlated through system state probabilities from which the availability (e.g., the number of nines) is calculated.","Exemplary Computing Environment",{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 1","i":"a "},"Although not required, the invention can be implemented via an application programming interface (API), for use by a developer, and\/or included within the network browsing software which will be described in the general context of computer-executable instructions, such as program modules, being executed by one or more computers, such as client workstations, servers, or other devices. Generally, program modules include routines, programs, objects, components, data structures and the like that perform particular tasks or implement particular abstract data types. Typically, the functionality of the program modules may be combined or distributed as desired in various embodiments. Moreover, those skilled in the art will appreciate that the invention may be practiced with other computer system configurations. Other well known computing systems, environments, and\/or configurations that may be suitable for use with the invention include, but are not limited to, personal computers (PCs), automated teller machines, server computers, hand-held or laptop devices, multi-processor systems, microprocessor-based systems, programmable consumer electronics, network PCs, minicomputers, mainframe computers, and the like. The invention may also be practiced in distributed computing environments where tasks are performed by remote processing devices that are linked through a communications network or other data transmission medium. In a distributed computing environment, program modules may be located in both local and remote computer storage media including memory storage devices.",{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 1","i":"a ","b":["100","100","100","100"]},"With reference to , an exemplary system for implementing the invention includes a general purpose computing device in the form of a computer . Components of computer  may include, but are not limited to, a processing unit , a system memory , and a system bus  that couples various system components including the system memory to the processing unit . The system bus  may be any of several types of bus structures including a memory bus or memory controller, a peripheral bus, and a local bus using any of a variety of bus architectures. By way of example, and not limitation, such architectures include Industry Standard Architecture (ISA) bus, Micro Channel Architecture (MCA) bus, Enhanced ISA (EISA) bus, Video Electronics Standards Association (VESA) local bus, and Peripheral Component Interconnect (PCI) bus (also known as Mezzanine bus).","Computer  typically includes a variety of computer readable media. Computer readable media can be any available media that can be accessed by computer  and includes both volatile and nonvolatile media, removable and non-removable media. By way of example, and not limitation, computer readable media may comprise computer storage media and communication media. Computer storage media includes both volatile and nonvolatile, removable and non-removable media implemented in any method or technology for storage of information such as computer readable instructions, data structures, program modules or other data. Computer storage media includes, but is not limited to, RAM, ROM, EEPROM, flash memory or other memory technology, CDROM, digital versatile disks (DVD) or other optical disk storage, magnetic cassettes, magnetic tape, magnetic disk storage or other magnetic storage devices, or any other medium which can be used to store the desired information and which can be accessed by computer . Communication media typically embodies computer readable instructions, data structures, program modules or other data in a modulated data signal such as a carrier wave or other transport mechanism and includes any information delivery media. The term \u201cmodulated data signal\u201d means a signal that has one or more of its characteristics set or changed in such a manner as to encode information in the signal. By way of example, and not limitation, communication media includes wired media such as a wired network or direct-wired connection, and wireless media such as acoustic, RF, infrared, and other wireless media. Combinations of any of the above should also be included within the scope of computer readable media.","The system memory  includes computer storage media in the form of volatile and\/or nonvolatile memory such as read only memory (ROM)  and random access memory (RAM) . A basic input\/output system  (BIOS), containing the basic routines that help to transfer information between elements within computer , such as during start-up, is typically stored in ROM . RAM  typically contains data and\/or program modules that are immediately accessible to and\/or presently being operated on by processing unit . By way of example, and not limitation, illustrates operating system , application programs , other program modules , and program data .","The computer  may also include other removable\/non-removable, volatile\/nonvolatile computer storage media. By way of example only, illustrates a hard disk drive  that reads from or writes to non-removable, nonvolatile magnetic media, a magnetic disk drive  that reads from or writes to a removable, nonvolatile magnetic disk , and an optical disk drive  that reads from or writes to a removable, nonvolatile optical disk , such as a CD ROM or other optical media. Other removable\/non-removable, volatile\/nonvolatile computer storage media that can be used in the exemplary operating environment include, but are not limited to, magnetic tape cassettes, flash memory cards, digital versatile disks, digital video tape, solid state RAM, solid state ROM, and the like. The hard disk drive  is typically connected to the system bus  through a non-removable memory interface such as interface , and magnetic disk drive  and optical disk drive  are typically connected to the system bus  by a removable memory interface, such as interface .","The drives and their associated computer storage media discussed above and illustrated in provide storage of computer readable instructions, data structures, program modules and other data for the computer . In , for example, hard disk drive  is illustrated as storing operating system , application programs , other program modules , and program data . Note that these components can either be the same as or different from operating system , application programs , other program modules , and program data . Operating system , application programs , other program modules , and program data  are given different numbers here to illustrate that, at a minimum, they are different copies. A user may enter commands and information into the computer  through input devices such as a keyboard  and pointing device , commonly referred to as a mouse, trackball or touch pad. Other input devices (not shown) may include a microphone, joystick, game pad, satellite dish, scanner, or the like. These and other input devices are often connected to the processing unit  through a user input interface  that is coupled to the system bus , but may be connected by other interface and bus structures, such as a parallel port, game port or a universal serial bus (USB).","A monitor  or other type of display device is also connected to the system bus  via an interface, such as a video interface . A graphics interface , such as Northbridge, may also be connected to the system bus . Northbridge is a chipset that communicates with the CPU, or host processing unit , and assumes responsibility for accelerated graphics port (AGP) communications. One or more graphics processing units (GPUs)  may communicate with graphics interface . In this regard, GPUs  generally include on-chip memory storage, such as register storage and GPUs  communicate with a video memory . GPUs , however, are but one example of a coprocessor and thus a variety of coprocessing devices may be included in computer . A monitor  or other type of display device is also connected to the system bus  via an interface, such as a video interface , which may in turn communicate with video memory . In addition to monitor , computers may also include other peripheral output devices such as speakers  and printer , which may be connected through an output peripheral interface .","The computer  may operate in a networked environment using logical connections to one or more remote computers, such as a remote computer . The remote computer  may be a personal computer, a server, a router, a network PC, a peer device or other common network node, and typically includes many or all of the elements described above relative to the computer , although only a memory storage device  has been illustrated in . The logical connections depicted in include a local area network (LAN)  and a wide area network (WAN) , but may also include other networks. Such networking environments are commonplace in offices, enterprise-wide computer networks, intranets and the Internet.","When used in a LAN networking environment, the computer  is connected to the LAN  through a network interface or adapter . When used in a WAN networking environment, the computer  typically includes a modem  or other means for establishing communications over the WAN , such as the Internet. The modem , which may be internal or external, may be connected to the system bus  via the user input interface , or other appropriate mechanism. In a networked environment, program modules depicted relative to the computer , or portions thereof, may be stored in the remote memory storage device. By way of example, and not limitation, illustrates remote application programs  as residing on memory device . It will be appreciated that the network connections shown are exemplary and other means of establishing a communications link between the computers may be used.","One of ordinary skill in the art can appreciate that a computer  or other client device can be deployed as part of a computer network. In this regard, the present invention pertains to any computer system having any number of memory or storage units, and any number of applications and processes occurring across any number of storage units or volumes. The present invention may apply to an environment with server computers and client computers deployed in a network environment, having remote or local storage. The present invention may also apply to a standalone computing device, having programming language functionality, interpretation and execution capabilities.","System and Method for Calculating Availability of Clustered Computing Devices",{"@attributes":{"id":"p-0037","num":"0036"},"figref":"FIG. 1","i":["b ","a ","b ","a ","b ","a ","b ","a ","b ","a ","b ","a ","b"],"b":["10","10","10","10","10","10","10","10","12","12","10","10","14","12","10","10","14","14"]},"Post-processor  consumes data  and performs calculations on the data  from which availability can be determined. In particular post-processor  calculates mean times such as Mean Time to Fail (MTTF), Mean Time to Fail-Over (MTTF\/O), Mean Time to Fail-Back (MTTF\/B), and Mean Time to Recover\/Repair (MTTR) from which transition rates are calculated. The rates may be loaded into or associated with an internal representation of a Markov chain. The internal representation of the Markov chain in one embodiment of the invention is a directed graph, but any suitable internal representation is contemplated. The corresponding linear system is then solved for the cluster state probabilities and the state space enumeration is interpreted to map the probabilities into the cluster overall availability data .","The particular implementation and physical location of agent  and post-processor  depends on application context, data center considerations and other factors, thus agent  and post-processor  may reside on any suitable computing device. In one embodiment of the invention, post-processor  is a MICROSOFT EXCEL spreadsheet. In one embodiment of the invention times such as TTF, TTF\/O, TTF\/B and TTR are measured manually, such as with a stopwatch, and are recorded.","Alternatively, this data may be collected by an operating system feature or tool such as but not limited to MICROSOFT's Perfmon. Perfmon manages the collection of such data using perfmon counters. For example, an application may implement Perfmon counters to expose performance and reliability data such as the length of time the application has run without failure. Such a tool may be part of or reside on agent .",{"@attributes":{"id":"p-0041","num":"0040"},"figref":["FIG. 2","FIG. 2"],"b":["200","202","204","206","208","210","212","208","210","212"]},"Cluster devices  and  may be individual servers, computers or other suitable computing devices running, for example, WINDOWS 2000 ADVANCED SERVER or WINDOWS NT SERVER 4.0 Enterprise Edition or other suitable operating system software, and are generally referred to as nodes. Nodes  and  may include at least one instance of a cluster service (not shown). \u201cCluster service\u201d refers to a collection of components on a node that perform cluster-specific activities, such as detecting and responding to failures of nodes and the failure of resources the cluster service manages. \u201cResource\u201d, as used herein, typically refers to the hardware and software components within the cluster that are managed by the cluster service and would include components , ,  and  in exemplary cluster  in . It will be understood that while  depicts a cluster of two nodes, the system and method described herein for calculating availability is equally applicable to clusters containing more than two nodes, such as for example, but not limited to, the four-node clusters supported by the WINDOWS 2000 DATACENTER SERVER.","The instrumentation mechanism provided by the cluster service for managing resources typically is the resource dynamically linked libraries (DLLs), which define resource abstractions, communication interfaces, and management operations although other suitable instrumentation mechanisms may be employed. Clustered systems such as the one depicted in  typically provide fail-over support for back-end applications including database, file server, enterprise resource planning, messaging systems and the like.","Clustered systems typically provide improved availability by enabling services and applications in the server cluster to continue to provide service during hardware or software component failure or during planned maintenance. Clustering also provides increased scalability by supporting servers that can be expanded with the addition of multiple processors (e.g., up to eight processors in WINDOWS 2000 ADVANCED SERVER and up to 32 processors in WINDOWS 2000 DATACENTER SERVER) and additional memory (up to a maximum of 8 gigabytes (GB) of random access memory (RAM) in WINDOWS 2000 ADVANCED SERVER and 32 GB in WINDOWS 2000 DATACENTER SERVER). Clustering also typically improves manageability by enabling administrators to manage devices and resources within the entire cluster as if managing a single computer.","The collection of several server computers into a single unified cluster enables the sharing of a computing load to be transparent to clients , , , etc., who need not know that more than one server is involved. For example, if any resource (e.g., node ) in the server cluster  fails, cluster  can continue to offer service to clients , , , etc. using a resource on one of the other servers (e.g., ) in the cluster , regardless of whether the failed component is a hardware or software resource. In other words, when a resource fails, typically clients , , , etc. connected to cluster  may experience temporarily degraded performance, but do not completely lose access to the service. Additionally, as more processing power is needed, new resources can be added while cluster  remains online and available to clients , , , etc.","A resource is online when it is available and providing service to the cluster . Resources typically are physical or logical entities that can be brought online and taken offline; can be managed in a server cluster; and can be owned by only one node (e.g., node  or ) at a time. Cluster resources include physical hardware devices such as disk drives and network cards, and logical items such as Internet Protocol (IP) addresses, applications, and application databases. Each node ,  in the cluster  typically has its own local resources. Additionally, however, cluster  may also have common resources, such as a common data storage array and private cluster network (not shown). These common resources typically are accessible by each node in the cluster. One special common resource (not shown) is the quorum resource, a physical disk in the common cluster disk array that plays a critical role in cluster operations. It typically must be present for node operations\u2014such as forming or joining a cluster\u2014to occur.","A resource group is a collection of resources managed by the cluster service as a single, logical unit. Application resources and cluster entities can be easily managed by grouping logically related resources into a resource group. When a cluster service operation is performed on a resource group, the operation affects all individual resources contained within the group. Typically, a resource group is created to contain all the elements needed by a specific application server and client for successful use of the application.","The cluster service typically is based on a shared-nothing model of cluster architecture. This model refers to how servers in a cluster  manage and use local and common cluster devices and resources. In the shared-nothing cluster, each server owns and manages its local devices. Devices common to the cluster, such as a common disk array and connection media, are selectively owned and managed by a single server (e.g., node , ) at any given time.","The shared-nothing model typically simplifies the task of managing disk devices and standard applications. This model generally does not require any special cabling or applications and enables cluster service to support standard operating systems including, but not limited to, MICROSOFT WINDOWS 2000 and MICROSOFT WINDOWS NT-based applications and disk resources.","The cluster service typically uses standard server drivers including but not limited to MICROSOFT WINDOWS 2000 and MICROSOFT WINDOWS NT server drivers for local storage devices and media connections. The cluster service may support several connection media for external common devices that typically need to be accessible by all servers in the cluster . External storage devices (e.g., storage , ) that are common to the cluster may require small computer system interface (SCSI) devices and may support standard PCI-based SCSI connections as well as SCSI over fiber channel and SCSI bus with multiple initiators. Fiber connections may be SCSI devices hosted on a fiber channel bus instead of a SCSI bus. Conceptually, fiber channel technology encapsulates SCSI commands within the fiber channel and makes it possible to use the SCSI commands the cluster service is designed to support. These SCSI commands may be Reserve\/Release and Bus Reset and may function the same over standard or non-fiber SCSI interconnect media.","Within the cluster , fail-over can occur automatically because of an unplanned hardware or application failure, or can be triggered manually. When a node (e.g., node ) in a cluster  fails, its resource groups are transitioned to one or more available servers (e.g., node ) in the cluster. Fail-over can be planned, or automatic. Automatic fail-over is similar to planned administrative reassignment of resource ownership but requires determining what groups were running on the failed node and which nodes should take ownership of the various resource groups. All nodes (e.g., nodes , ) in the cluster  that are capable of hosting the resource groups may negotiate among themselves for ownership. This negotiation is based on node capabilities, current load, application feedback, or a node preference list. The node preference list is part of the resource group properties and is used to assign a resource group to a node. Once negotiation of the resource group is complete, all nodes in the cluster update their databases and keep track of which node owns the resource group.","In clusters with more than two nodes, the node preference list for each resource group can specify a preferred server plus one or more prioritized alternatives. This enables cascading fail-over, in which a resource group may survive multiple server failures, each time cascading or failing over to the next server on its node preference list. Cluster administrators typically can set up different node preference lists for each resource group on a server so that, in the event of a server failure, the groups are distributed amongst the cluster's surviving servers.","An alternative to this scheme, commonly called N+1 fail-over, sets the node preference lists of all cluster groups. The node preference list identifies the standby cluster nodes to which resources should be transitioned during first fail-over. The standby nodes are servers in the cluster that are mostly idle or whose own workload can be easily pre-empted in the event a failed server's workload must be transitioned to the standby node.","When a node comes back online, some resource groups can be transitioned back to the recovered node. This is referred to as fail-back. The properties of a resource group must have a preferred owner defined in order to fail-back to a recovered or restarted node. Resource groups for which the recovered or restarted node is the preferred owner will be transitioned from the current owner to the recovered or restarted node. The cluster service typically provides protection against fail-back of resource groups at peak processing times, or to nodes that have not been correctly recovered or restarted. Fail-back properties of a resource group may include the hours of the day during which fail-back is allowed, plus a limit on the number of times fail-back is attempted.","Typically, each node ,  in the cluster  periodically queries its resources using resource libraries (DLLs) in order to detect a resource failure, such as, for example, an access violation. Query polling intervals may be controlled by settable properties. If a resource failure is detected, (e.g., node  goes down) cluster service (e.g., the instance of the cluster service running on node ) typically can be configured to respond with restart and\/or automatic fail-over procedures. A local restart procedure refers to restarting the failed resource and its dependencies on the current node (e.g., node ), and automatic fail-over refers to pushing and restarting the resource group which contains the failed resource on an alternate node (e.g., node ).","If the cluster service is configured to restart a failed resource, it will continue to do so until successful, or until the maximum number of restarts is exceeded (the maximum number of restarts may be a settable property) within the specified period of time (which may also be a settable property). If restarting is not successful, then fail-over may be attempted, or restarting may be attempted again after remaining in the failed state for a set period of time (which may also be controlled by a settable property).","During fail-over, the cluster service may first attempt to gracefully offline each resource in the resource group containing the failed resource within a specified period of time (which may be controlled by a settable property). If this timeout is exceeded, then the resource is forcefully terminated. Once the resource group is offline, an attempt may be made to transfer it to a preferred host node. If the transfer is successful, attempts may be made to bring the resource group back online on the new host node. The cluster service may continue attempting fail-over until successful, or until the specified number of attempts is exceeded (which may be controlled by a settable property) within the specified period of time (which may be controlled by a settable property).","In addition to local detection of resource failures, all nodes ,  in a cluster  may periodically exchange messages to communicate status. If any node does not receive a message (e.g., a heartbeat) from any other node after consecutive communication attempts, then a regroup algorithm may be initiated to determine current cluster membership. Typical causes of missed heartbeats include failure of the machine, its network interface, or the underlying network infrastructure. After completion of this regroup event, the remaining online nodes engage in ownership arbitration to determine new owners for the resource groups owned by the failed node. These resource groups are then pulled by selected nodes, and their resources are restarted and marked as online. This procedure of pulling resource groups and restarting resources is referred to as automatic fail-over.","Resource groups may also be manually brought offline, pushed, and restarted on other online nodes as part of planned reassignment for maintenance or other reasons. This procedure is referred to as manual fail-over.","After a preferred node is repaired, those resource groups formerly under its ownership may be transitioned back and restarted under the preferred node again. The particular timing of this automatic fail-back procedure may be configurable, and may occur immediately after repair of the preferred node or between time windows as controlled by settable properties.","There are two types of clustering: active-passive clustering and active-active clustering. With active-passive 2-node clustering, the active node serves requests while the passive node remains ready in standby mode. If the active node fails, then fail-over to the passive node is initiated. All requests continue to be directed to the failed node until fail-over is complete.",{"@attributes":{"id":"p-0062","num":"0061"},"figref":["FIG. 3","FIG. 3"],"i":["a ","a","a","a"],"b":["300","310","312","310","310","312","312","314","316","308","318","320","310","312","322","316","320","310","322"]},"If node  fails or is taken offline, (i.e., is down), automatic or manual fail-over may result. During fail-over, SQL2 on node  becomes active, connections  and  become active, connections  and  become inactive and ownership of data resource  is transferred from node  to node , as shown in . Until fail-over is complete, requests requiring resources from Data Resource  will fail.",{"@attributes":{"id":"p-0064","num":"0063"},"figref":["FIG. 4","FIG. 4"],"i":["a ","a","a ","a ","a ","a"],"b":["400","410","412","410","412","410","410","412","412","414","416","418","420","408","410","412","410","422","422","416","412","424","420","426","428","410","424","412","422"]},"Cluster  may detect a node failure of either node  or node  through message communication via connection . If SQL1 fails or is taken offline, automatic or manual fail-over from SQL1 to SQL2 may result. If SQL1 fails, until fail-over to SQL2 is complete, requests requiring resources from Data Resource 1  will fail. If SQL1 fails or is taken offline, automatic or manual fail-over from SQL2 to SQL1 may result. Until fail-over is complete, requests requiring resources from Data Resource 2  will fail.","Referring now to , during the fail-over procedure from SQL1 to SQL2 , connection  becomes active and connection  becomes inactive, so that requests requiring resources from Data Resource 1  are satisfied by SQL2 via connection . Ownership of Data Resource 1  is transferred from node  to node .","Similarly, as shown in , if, for example, node  fails, during the fail-over process from to , connection  becomes active and connection  becomes inactive so that requests requiring resources from Data Resource 2  are satisfied by SQL1 via connection . Ownership of Data Resource 2  is transferred from node  to node , as shown in ","Referring now to , ,  and , availability is determined in accordance with one embodiment of the invention for an active-passive cluster such as the one described above.  is an illustration of a Markov chain for cluster .  is a flow diagram of a method of calculating availability of a clustered system using Markov analysis.","To calculate availability of a cluster, at step  all the possible states of the cluster are identified. Thus to calculate the availability of cluster  of and , all possible states of the cluster  are enumerated. There are four possible states of cluster . The four possible states of active-passive cluster  are; state one: one node is active, (e.g., serving customers) and the other node is in a passive state, waiting for the first node to fail, so the cluster is 100% available; state two: the first node has failed and the passive node has not yet become active (transfer of control has not yet completed) so no customers are being served (0% availability); state three: transfer of control is complete and the second node is actively serving customers so the cluster is 100% available; and state four: before the first node is repaired and while the second node is active, the second node also fails so that no customers can be served (0% availability).","At step , the state space transition pattern is determined. In this step, the structure of the transitions between states (e.g., the edges in a directed graph) is determined. At step  the transition rates between states are determined (e.g., the weight of each edge in the directed graph). In one embodiment of the invention, this is done by Markov analysis and may be implemented internally as a directed graph.  illustrates a Markov chain for active-passive cluster . It should be understood that while the Markov chain depicted in  illustrates the state space transition pattern and the transition rates between states, the actual generation of such a figure is not required by the invention. Only an appreciation of the state space transition pattern and transition rates between states is required. For example, if a directed graph is used as a geometric representation of a Markov chain, the structure of the transitions between states may be represented by the edges in the directed graph and the transition rates between states may be represented by the weight of each edge in the directed graph.","In state 1  (active-passive state), node 1  and node 2  are up and the cluster  is available (i.e., active, for example, answering requests). In state 2  (fail-over in progress), node 1  has failed or has been taken offline (i.e., is down), node 2  is up (still in passive mode) and cluster  is not available. In state 3  (active down state), node 1  is still down, node 2  is up and active, and cluster  is available. In state 4  (catastrophic failure state), both nodes  and  are down and the cluster  is not available.","The mean rate at which the system transitions from state 1 to state 2 is the mean rate at which node one fails (e.g., the mean rate of failure of node one may be, for example, one failure per one year) and is represented in  as \u03b1. The mean time it takes for node one to fail (mean time to failure while in active-passive state) is the reciprocal of the mean rate of failure of node one or 1\/\u03b1and is called the Mean Time To Fail (MTTF) for node 1.","The mean rate at which the system transitions from state 2 to state 3 is the rate at which the fail-over process proceeds and is represented in  as \u03b3. The mean time it takes for the fail-over process to complete (mean time to fail-over to active-down state) is the reciprocal of the mean rate of fail-over from node 1 to node 2 or 1\/\u03b3and is called the Mean Time to Fail-Over (MTTF\/O) from node 1 to node 2.","The mean rate at which the system transitions from state 3 to state 4 is the mean rate at which node two fails and is represented in  as \u03b1. The mean time it takes for node two to fail (mean time to failure while in active-down state) is the reciprocal of the mean rate at which node two fails or 1\/\u03b1and is called the Mean Time to Fail (MTTF) for node 2.","The mean rate at which the system transitions from state 4 back to state 3 is the mean rate of repair of node 2 and is represented in  as \u03b2. The mean time it takes to repair node two (mean time to recover from catastrophic failure to active-down state) is the reciprocal of the mean rate of repair of node 2 or 1\/\u03b2and is called the Mean Time to Repair or Restore (MTTR) for node 2.","Finally, the mean rate at which the system transitions from state 3 to state 1 is the mean rate of repair of node 1 and is represented in  as \u03b2. The mean time it takes to repair node one (mean time to recover from active-down to active-passive state) is the reciprocal of the mean rate of repair of node 1 or 1\/\u03b2and is called the Mean Time to Repair or Restore (MTTR) for node 1.","In one embodiment of the invention, it is assumed that simultaneous failure of both active and passive nodes  and  occurs with negligible probability, there is a negligible probability of failure of passive node  while node  is active and there is a negligible probability that node  will fail during fail-over. It is furthermore assumed that repair of failed node  is not attempted until fail-over to passive node  has occurred and that the failed node  occurs without interruption in service. Finally it is assumed that nodes  and  are symmetric, i.e., node  continues to serve until node  fails.","Referring now to , , ,  and , availability is calculated in accordance with one embodiment of the invention for an active-active cluster such as the one described above.  is an illustration of a Markov chain of cluster .  is a flow diagram of a method of calculating availability of a clustered system using Markov chains.","To calculate availability of the 2-node active-active cluster , at step  all the possible states of cluster  are identified. Hence, to calculate availability for cluster  of , and , all possible states of the cluster  are enumerated. There are five possible states of cluster . The five possible states of active-active cluster  are; state one: both nodes are active, (e.g., answering requests or serving customers or the like); state two: the first node has failed and control is being transferred to the other active node but the process is incomplete (node two has not yet assumed control of the first node's resource) so the requests to the first node's resources are not being answered; state three: transfer of control is complete and the second node is actively serving customers, the first node is not active; state four: before the first node is repaired and while the second node is active, the second node also fails so that no customers can be served; and state five: node one has been repaired, control of node one's resources is being returned to node one but the process is incomplete and node two is active.","After all the possible states are identified or as the possible states are identified, at step , the state space transition pattern is determined. In this step, the structure of the transitions between states (e.g., the edges in a directed graph) is determined. At step  the transition rates between states are determined (e.g., the weight of each edge in the directed graph). In one embodiment of the invention, this is done by Markov analysis and may be implemented internally as a directed graph.  is a Markov chain for active-active cluster . It should be understood that while the Markov chain depicted in  illustrates the transition pattern and associated transition rates between states, the actual generation of such a figure is not required by the invention.","In state 1  (active-active state), node 1  and node 2  are up and the cluster  is fully available. In state 2  (fail-over in progress), node 1  has failed or has been taken offline (i.e., is down), node 2  is up (in active mode), control of Data Resource  is being transferred to node 2 . Cluster  is said to be 50% (or \u00bd) available, assuming service is delivered to 50% of requests while the cluster is failing-over. In state 3  (active down state), node 1  is still down, node 2  is up and active and cluster  is 100% available. In state 4  (catastrophic failure state), both nodes  and  are down and the cluster  is not available. In state 5 node 1  has been repaired or is back online and control of Data Resource 1  has been returned to node 1 . The cluster is 50% available.","The mean rate at which the system transitions from state 1 to state 2 is the mean rate at which node one fails (e.g., the mean rate of failure of node one may be one failure with one year) and is represented in  as \u03b1. The mean time it takes for node one to fail (mean time to failure while in active-active state) is the reciprocal of the mean rate of failure of node one or 1\/\u03b1and is called the Mean Time To Fail (MTTF) for node 1.","The mean rate at which the system transitions from state 2 to state 3 is the rate at which the fail-over process proceeds and is represented in  as \u03b3. The mean time it takes for the fail-over process to complete (mean time to fail-over to active-down state) is the reciprocal of the mean rate of fail-over from node 1 to node 2 or 1\/\u03b3and is called the Mean Time to Fail-Over (MTTF\/O).","The mean rate at which the system transitions from state 3 to state 4 is the mean rate at which node two fails and is represented in  as \u03b1. The mean time it takes for node two to fail (mean time to failure while in active-down state) is the reciprocal of the mean rate at which node two fails or 1\/\u03b1and is called the Mean Time to Fail (MTTF) for node 2.","The mean rate at which the system transitions from state 4 back to state 3 is the mean rate to recover from catastrophic failure to active-down state and is represented in  as \u03b2.","The mean rate at which the system transitions from state 3 to state 5 is the reciprocal of the mean time elapsed after entering the active-down state and before initiating fail-back and is represented in  as \u03b2.","Finally, the mean rate at which the system transitions from state 5 to state 1 is the mean rate of fail-back and is represented in  as \u03b3. The mean time it takes to transfer control of Data Resource 1  from node two to node one (mean time to fail-back to active-active state) is the reciprocal of the mean rate of transfer of control from node 2 to node 1 or 1\/\u03b3and is called the Mean Time to Fail-Back (MTTF\/B) for node 1.","In one embodiment of the invention, it is assumed that simultaneous failure of both active nodes  and  occurs with negligible probability, there is a negligible probability of failure of active node  while node  is failing-over and vice versa and that either node  or  will fail during fail-back. It is furthermore assumed that repair of failed node  or  is not attempted until the fail-over to the other node has occurred. If both nodes  and  have failed, it is assumed that each node is repaired serially and return to active-active mode from active-down mode requires failing-back. Finally, it is assumed to service is delivered to 50% of requests while cluster  is either failing over or back.","At step , the probability of being in a particular state is calculated. The probability distribution of cluster states for any system generally consist of both transient and steady-state components. In a transient situation, if \u03c0(t) denotes the probability that the cluster is in state i at time t and the underlying stochastic process satisfies the Markov property, it can be shown that the state probability distribution \u03c0(t)=(\u03c0(t)) satisfies the differential equation of Kolmogorov:",{"@attributes":{"id":"p-0090","num":"0089"},"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"mfrac":{"mo":"\u2146","mrow":{"mo":"\u2146","mi":"t"}},"mo":"\u2062","mrow":{"mi":"\u03c0","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}}},{"mrow":{"mi":"\u03c0","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},"mo":"\u00b7","mi":"Q"}],"mo":"="}}},"br":{},"sub":"0"},{"@attributes":{"id":"p-0091","num":"0090"},"maths":{"@attributes":{"id":"MATH-US-00002","num":"00002"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":{"munder":{"mo":"\u2211","mi":"i"},"mo":"\u2062","msub":{"mi":["\u03c0","i"]}},"mo":"=","mn":"1"}}},"br":{}},{"@attributes":{"id":"p-0092","num":"0091"},"maths":[{"@attributes":{"id":"MATH-US-00003","num":"00003"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"msub":{"mi":"\u03c0","mn":"1"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},{"mfrac":{"mi":"\u03b2","mrow":{"mi":["\u03b1","\u03b2"],"mo":"+"}},"mo":"+","mrow":{"mfrac":{"mi":"\u03b1","mrow":{"mi":["\u03b1","\u03b2"],"mo":"+"}},"mo":"\u00b7","msup":{"mi":"\u2147","mrow":{"mrow":{"mo":"-","mrow":{"mo":["(",")"],"mrow":{"mi":["\u03b1","\u03b2"],"mo":"+"}}},"mo":"\u00b7","mi":"t"}}}}],"mo":"="}}},{"@attributes":{"id":"MATH-US-00003-2","num":"00003.2"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"msub":{"mi":"\u03c0","mn":"2"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},{"mfrac":{"mi":"\u03b1","mrow":{"mi":["\u03b1","\u03b2"],"mo":"+"}},"mo":"-","mrow":{"mfrac":{"mi":"\u03b1","mrow":{"mi":["\u03b1","\u03b2"],"mo":"+"}},"mo":"\u00b7","msup":{"mi":"\u2147","mrow":{"mrow":{"mo":"-","mrow":{"mo":["(",")"],"mrow":{"mi":["\u03b1","\u03b2"],"mo":"+"}}},"mo":"\u00b7","mi":"t"}}}}],"mo":"="}}}],"br":{},"sub":["1 ","2 "]},"In a steady-state situation, since the Markov chains are finite ergodic (i.e., homogeneous and irreducible) chains, \u03c0(t) converges to a unique steady state distribution \u03c0 as t\u2192. The Kolmogorov differential equation reduces to:\n\n\u03c0\u00b70\n\nThus, for a cluster with n states, the steady-state distribution is described by the solution of a (n+1)-dimensional linear system formed by this time-independent Kolmogorov equation and the normalization condition. For a single node system, given an error tolerance \u03b5>0, the maximum norm of the error introduced by steady-state approximation is:\n\n\u2225\u03c0()\u2212\u03c0(\u221e)\u2225<\u03b5\n\nwhen\n",{"@attributes":{"id":"p-0094","num":"0093"},"maths":{"@attributes":{"id":"MATH-US-00004","num":"00004"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mi":"t","mo":">","mrow":{"mfrac":[{"mn":"1","mrow":{"mi":["\u03b1","\u03b2"],"mo":"+"}},{"mi":"\u03b1","mrow":{"mrow":{"mo":["(",")"],"mrow":{"mi":["\u03b1","\u03b2"],"mo":"+"}},"mo":"\u00b7","mi":"\u025b"}}],"mo":["\u2062","\u2062","\u2062"],"mi":"log","mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}}}},"br":{},"sup":"\u2212"},"The 2-node active-passive cluster is described by the matrix:",{"@attributes":{"id":"p-0096","num":"0095"},"maths":{"@attributes":{"id":"MATH-US-00005","num":"00005"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mi":"Q","mo":"=","mrow":{"mo":["(",")"],"mtable":{"mtr":[{"mtd":[{"mrow":{"mo":"-","msub":{"mi":"\u03b1","mn":"1"}}},{"msub":{"mi":"\u03b1","mn":"1"}},{"mn":"0"},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"mrow":{"mo":"-","msub":{"mi":"\u03b3","mn":"1"}}},{"msub":{"mi":"\u03b3","mn":"1"}},{"mn":"0"}]},{"mtd":[{"msub":{"mi":"\u03b2","mn":"1"}},{"mn":"0"},{"mrow":{"mo":"-","mrow":{"mo":["(",")"],"mrow":{"msub":[{"mi":"\u03b1","mn":"2"},{"mi":"\u03b2","mn":"1"}],"mo":"+"}}}},{"msub":{"mi":"\u03b1","mn":"2"}}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"msub":{"mi":"\u03b2","mn":"2"}},{"mrow":{"mo":"-","msub":{"mi":"\u03b2","mn":"2"}}}]}]}}}}}},"The 2-node active-active cluster is described by the matrix:",{"@attributes":{"id":"p-0098","num":"0097"},"maths":{"@attributes":{"id":"MATH-US-00006","num":"00006"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mi":"Q","mo":"=","mrow":{"mo":["(",")"],"mtable":{"mtr":[{"mtd":[{"mrow":{"mo":"-","msub":{"mi":"\u03b1","mn":"1"}}},{"msub":{"mi":"\u03b1","mn":"1"}},{"mn":"0"},{"mn":"0"},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"mrow":{"mo":"-","msub":{"mi":"\u03b3","mn":"1"}}},{"msub":{"mi":"\u03b3","mn":"1"}},{"mn":"0"},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"mrow":{"mo":"-","mrow":{"mo":["(",")"],"mrow":{"msub":[{"mi":"\u03b1","mn":"2"},{"mi":"\u03b2","mn":"1"}],"mo":"+"}}}},{"msub":{"mi":"\u03b1","mn":"2"}},{"msub":{"mi":"\u03b2","mn":"1"}}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"msub":{"mi":"\u03b2","mn":"2"}},{"mrow":{"mo":"-","msub":{"mi":"\u03b2","mn":"2"}}},{"mn":"0"}]},{"mtd":[{"msub":{"mi":"\u03b3","mn":"2"}},{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mrow":{"mo":"-","msub":{"mi":"\u03b3","mn":"2"}}}]}]}}}}}},"For an active-passive cluster, in one embodiment of the invention, \u03c0is the probability of being in state 1, \u03c0is the probability of being in state 2, \u03c0is the probability of being in state 3 and \u03c0is the probability of being in state 4. Thus, the probability distribution is described by a 4-tuple, \u03c0=(\u03c0, \u03c0, \u03c0, \u03c0) is given by:",{"@attributes":{"id":"p-0100","num":"0099"},"maths":[{"@attributes":{"id":"MATH-US-00007","num":"00007"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":"\u03c0","mn":"1"},"mo":"=","msup":{"mrow":[{"mo":["(",")"],"mrow":{"mn":"1","mo":["+","+","+"],"mfrac":[{"msub":[{"mi":"\u03b1","mn":"1"},{"mi":"\u03b2","mn":"1"}]},{"msub":[{"mi":"\u03b1","mn":"1"},{"mi":"\u03b3","mn":"1"}]},{"mrow":[{"msub":[{"mi":"\u03b1","mn":"1"},{"mi":"\u03b1","mn":"2"}],"mo":"\u2062"},{"msub":[{"mi":"\u03b2","mn":"1"},{"mi":"\u03b2","mn":"2"}],"mo":"\u2062"}]}]}},{"mo":"-","mn":"1"}]}}}},{"@attributes":{"id":"MATH-US-00007-2","num":"00007.2"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":"\u03c0","mn":"2"},"mo":"=","msup":{"mrow":[{"mo":["(",")"],"mrow":{"mn":"1","mo":["+","+","+"],"mfrac":[{"msub":[{"mi":"\u03b3","mn":"1"},{"mi":"\u03b1","mn":"1"}]},{"msub":[{"mi":"\u03b3","mn":"1"},{"mi":"\u03b2","mn":"1"}]},{"mrow":[{"msub":[{"mi":"\u03b3","mn":"1"},{"mi":"\u03b1","mn":"2"}],"mo":"\u2062"},{"msub":[{"mi":"\u03b2","mn":"1"},{"mi":"\u03b2","mn":"2"}],"mo":"\u2062"}]}]}},{"mo":"-","mn":"1"}]}}}},{"@attributes":{"id":"MATH-US-00007-3","num":"00007.3"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":"\u03c0","mn":"3"},"mo":"=","msup":{"mrow":[{"mo":["(",")"],"mrow":{"mn":"1","mo":["+","+","+"],"mfrac":[{"msub":[{"mi":"\u03b2","mn":"1"},{"mi":"\u03b1","mn":"1"}]},{"msub":[{"mi":"\u03b2","mn":"1"},{"mi":"\u03b3","mn":"1"}]},{"msub":[{"mi":"\u03b1","mn":"2"},{"mi":"\u03b2","mn":"2"}]}]}},{"mo":"-","mn":"1"}]}}}},{"@attributes":{"id":"MATH-US-00007-4","num":"00007.4"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":"\u03c0","mn":"4"},"mo":"=","msup":{"mrow":[{"mo":["(",")"],"mrow":{"mn":"1","mo":["+","+","+"],"mfrac":[{"msub":[{"mi":"\u03b2","mn":"2"},{"mi":"\u03b1","mn":"2"}]},{"mrow":[{"msub":[{"mi":"\u03b2","mn":"1"},{"mi":"\u03b2","mn":"2"}],"mo":"\u2062"},{"msub":[{"mi":"\u03b3","mn":"1"},{"mi":"\u03b1","mn":"2"}],"mo":"\u2062"}]},{"mrow":[{"msub":[{"mi":"\u03b2","mn":"1"},{"mi":"\u03b2","mn":"2"}],"mo":"\u2062"},{"msub":[{"mi":"\u03b1","mn":"1"},{"mi":"\u03b1","mn":"2"}],"mo":"\u2062"}]}]}},{"mo":"-","mn":"1"}]}}}}],"br":{},"sub":["i ","1","3"]},"For example, suppose the mean times are determined to be:",{"@attributes":{"id":"p-0102","num":"0101"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Mean Times"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"91pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"1\/\u03b1","1 year"]},{"entry":[{},"1\/\u03b1","1 year"]},{"entry":[{},"1\/\u03b2","1 day"]},{"entry":[{},"1\/\u03b2","1 day"]},{"entry":[{},"1\/\u03b3","1 minute"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}]}},"br":{}},{"@attributes":{"id":"p-0103","num":"0102"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"21pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"140pt","align":"center"}}],"thead":{"row":[{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]},{"entry":[{},"State","Probability"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"1","0.99725840"]},{"entry":[{},"2","0.00000190"]},{"entry":[{},"3","0.00273221"]},{"entry":[{},"4","0.00000749"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}}},"br":{}},"For an active-active cluster, in one embodiment of the invention, \u03c0is the probability of being in state 1, \u03c0is the probability of being in state 2, \u03c0is the probability of being in state 3 \u03c0is the probability of being in state 4 and \u03c0is the probability of being in state 5. Thus, the probability distribution is described by a 5-tuple, \u03c0=(\u03c0, \u03c0, \u03c0, \u03c0, \u03c0) is given by:",{"@attributes":{"id":"p-0105","num":"0104"},"maths":[{"@attributes":{"id":"MATH-US-00008","num":"00008"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":"\u03c0","mn":"1"},"mo":"=","msup":{"mrow":[{"mo":["(",")"],"mrow":{"mn":"1","mo":["+","+","+","+"],"mfrac":[{"msub":[{"mi":"\u03b1","mn":"1"},{"mi":"\u03b2","mn":"1"}]},{"msub":[{"mi":"\u03b1","mn":"1"},{"mi":"\u03b3","mn":"1"}]},{"msub":[{"mi":"\u03b1","mn":"1"},{"mi":"\u03b3","mn":"2"}]},{"mrow":[{"msub":[{"mi":"\u03b1","mn":"1"},{"mi":"\u03b1","mn":"2"}],"mo":"\u2062"},{"msub":[{"mi":"\u03b2","mn":"1"},{"mi":"\u03b2","mn":"2"}],"mo":"\u2062"}]}]}},{"mo":"-","mn":"1"}]}}}},{"@attributes":{"id":"MATH-US-00008-2","num":"00008.2"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":"\u03c0","mn":"2"},"mo":"=","msup":{"mrow":[{"mo":["(",")"],"mrow":{"mn":"1","mo":["+","+","+","+"],"mfrac":[{"msub":[{"mi":"\u03b3","mn":"1"},{"mi":"\u03b1","mn":"1"}]},{"msub":[{"mi":"\u03b3","mn":"1"},{"mi":"\u03b2","mn":"1"}]},{"msub":[{"mi":"\u03b3","mn":"1"},{"mi":"\u03b3","mn":"2"}]},{"mrow":[{"msub":[{"mi":"\u03b1","mn":"2"},{"mi":"\u03b3","mn":"1"}],"mo":"\u2062"},{"msub":[{"mi":"\u03b2","mn":"1"},{"mi":"\u03b2","mn":"2"}],"mo":"\u2062"}]}]}},{"mo":"-","mn":"1"}]}}}},{"@attributes":{"id":"MATH-US-00008-3","num":"00008.3"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":"\u03c0","mn":"3"},"mo":"=","msup":{"mrow":[{"mo":["(",")"],"mrow":{"mn":"1","mo":["+","+","+","+"],"mfrac":[{"msub":[{"mi":"\u03b2","mn":"1"},{"mi":"\u03b1","mn":"1"}]},{"msub":[{"mi":"\u03b2","mn":"1"},{"mi":"\u03b3","mn":"1"}]},{"msub":[{"mi":"\u03b1","mn":"2"},{"mi":"\u03b2","mn":"2"}]},{"msub":[{"mi":"\u03b2","mn":"1"},{"mi":"\u03b3","mn":"2"}]}]}},{"mo":"-","mn":"1"}]}}}},{"@attributes":{"id":"MATH-US-00008-4","num":"00008.4"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":"\u03c0","mn":"4"},"mo":"=","msup":{"mrow":[{"mo":["(",")"],"mrow":{"mn":"1","mo":["+","+","+","+"],"mfrac":[{"msub":[{"mi":"\u03b2","mn":"2"},{"mi":"\u03b1","mn":"2"}]},{"mrow":[{"msub":[{"mi":"\u03b2","mn":"1"},{"mi":"\u03b2","mn":"2"}],"mo":"\u2062"},{"msub":[{"mi":"\u03b1","mn":"1"},{"mi":"\u03b1","mn":"2"}],"mo":"\u2062"}]},{"mrow":[{"msub":[{"mi":"\u03b2","mn":"1"},{"mi":"\u03b2","mn":"2"}],"mo":"\u2062"},{"msub":[{"mi":"\u03b1","mn":"2"},{"mi":"\u03b3","mn":"1"}],"mo":"\u2062"}]},{"mrow":[{"msub":[{"mi":"\u03b2","mn":"1"},{"mi":"\u03b2","mn":"2"}],"mo":"\u2062"},{"msub":[{"mi":"\u03b1","mn":"2"},{"mi":"\u03b3","mn":"2"}],"mo":"\u2062"}]}]}},{"mo":"-","mn":"1"}]}}}},{"@attributes":{"id":"MATH-US-00008-5","num":"00008.5"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":"\u03c0","mn":"5"},"mo":"=","msup":{"mrow":[{"mo":["(",")"],"mrow":{"mn":"1","mo":["+","+","+","+"],"mfrac":[{"msub":[{"mi":"\u03b3","mn":"2"},{"mi":"\u03b1","mn":"1"}]},{"msub":[{"mi":"\u03b3","mn":"2"},{"mi":"\u03b2","mn":"1"}]},{"msub":[{"mi":"\u03b3","mn":"2"},{"mi":"\u03b3","mn":"1"}]},{"mrow":[{"msub":[{"mi":"\u03b1","mn":"2"},{"mi":"\u03b3","mn":"2"}],"mo":"\u2062"},{"msub":[{"mi":"\u03b2","mn":"1"},{"mi":"\u03b2","mn":"2"}],"mo":"\u2062"}]}]}},{"mo":"-","mn":"1"}]}}}}],"br":[{},{},{}],"sub":["i ","1","3","2","5"],"in-line-formulae":[{},{}]},{"@attributes":{"id":"p-0106","num":"0105"},"tables":{"@attributes":{"id":"TABLE-US-00004","num":"00004"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Mean Times"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"91pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"1\/\u03b1","1 year"]},{"entry":[{},"1\/\u03b1","6 months"]},{"entry":[{},"1\/\u03b2","1 day"]},{"entry":[{},"1\/\u03b2","1 day"]},{"entry":[{},"1\/\u03b3","1 minute"]},{"entry":[{},"1\/\u03b3","1 minute"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}]}},"br":{}},{"@attributes":{"id":"p-0107","num":"0106"},"tables":{"@attributes":{"id":"TABLE-US-00005","num":"00005"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"21pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"140pt","align":"center"}}],"thead":{"row":[{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]},{"entry":[{},"State","Probability"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"1","0.99724905"]},{"entry":[{},"2","0.00000190"]},{"entry":[{},"3","0.00273219"]},{"entry":[{},"4","0.00001497"]},{"entry":[{},"5","0.00000190"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}}},"br":{}},"It should be understood that while specific examples for 2-node clusters have been detailed, the invention is not so limited and the availability of clusters containing any suitable number of nodes can be calculated.","For example, the state probability distribution for a single node system can be derived from the distribution for active-passive 2-node clusters by recognizing a special limiting case of the above-described metrics. More precisely, in the case of active-passive 2-node clusters, as \u03b3\u2192\u221e and \u03b1\u21920, \u03c0\u21920 and \u03c0\u21920, so the state space is reduced from four dimensions to two dimensions defined by \u201cup\u201d and \u201cdown\u201d states. In particular, the probability a single node system is in an up state is given by:",{"@attributes":{"id":"p-0110","num":"0109"},"maths":{"@attributes":{"id":"MATH-US-00009","num":"00009"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":"\u03c0","mn":"1"},"mo":"=","msup":{"mrow":[{"mo":["(",")"],"mrow":{"mn":"1","mo":"+","mfrac":{"mi":["\u03b1","\u03b2"]}}},{"mo":"-","mn":"1"}]}}}},"br":{}},{"@attributes":{"id":"p-0111","num":"0110"},"maths":{"@attributes":{"id":"MATH-US-00010","num":"00010"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":"\u03c0","mn":"3"},"mo":"=","msup":{"mrow":[{"mo":["(",")"],"mrow":{"mn":"1","mo":"+","mfrac":{"mi":["\u03b2","\u03b1"]}}},{"mo":"-","mn":"1"}]}}}},"br":{},"sub":["1 ","1"]},"At step , the invention is used to predict availability as a function of any of the above described metrics. For example, the availability of a cluster may be predicted given particular values for MTTF, for MTTF\/O, for MTTF\/B, or for MTTR. For example, if the baseline values for MTTF for one and two node active-passive clusters are as follows:",{"@attributes":{"id":"p-0113","num":"0112"},"tables":{"@attributes":{"id":"TABLE-US-00006","num":"00006"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Mean Times"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"5"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"70pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"21pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"77pt","align":"center"}},{"@attributes":{"colname":"4","colwidth":"28pt","align":"center"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"1-node",{},"2-nodes",{}]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"4","align":"center","rowsep":"1"}}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"5"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"63pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"1\/\u03b1","MTTF","1\/\u03b1","MTTF"]},{"entry":[{},"1\/\u03b2","1 day","1\/\u03b3","1 minute"]},{"entry":[{},{},{},"1\/\u03b1","\u03b1= \u03b1"]},{"entry":[{},{},{},"1\/\u03b2","1 day"]},{"entry":[{},{},{},"1\/\u03b2","1 day"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"4","align":"center","rowsep":"1"}}]}]}}]}},"br":{}},{"@attributes":{"id":"p-0114","num":"0113"},"tables":{"@attributes":{"id":"TABLE-US-00007","num":"00007"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"112pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"28pt","align":"center"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]},{"entry":[{},"Availability",{}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"42pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"98pt","align":"center"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"MTTF","1-node","2-nodes"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"3","align":"center","rowsep":"1"}}]},{"entry":[{},"1 week","0.87500000","0.98237236"]},{"entry":[{},"1 month","0.96816976","0.99893256"]},{"entry":[{},"6 months","0.99455041","0.99996636"]},{"entry":[{},"1 year","0.99726776","0.99999062"]},{"entry":[{},"4 years","0.99931554","0.99999906"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"3","align":"center","rowsep":"1"}}]}]}}]}}},"Similarly, how availability changes as a function of MTTR can be determined from:",{"@attributes":{"id":"p-0116","num":"0115"},"tables":{"@attributes":{"id":"TABLE-US-00008","num":"00008"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Mean Times"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"5"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"70pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"21pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"77pt","align":"center"}},{"@attributes":{"colname":"4","colwidth":"28pt","align":"center"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"1-node",{},"2-nodes",{}]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"4","align":"center","rowsep":"1"}}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"5"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"63pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"1\/\u03b1","MTTF","1\/\u03b1","MTTF"]},{"entry":[{},"1\/\u03b2","1 day","1\/\u03b3","1 minute"]},{"entry":[{},{},{},"1\/\u03b1","\u03b1= \u03b1"]},{"entry":[{},{},{},"1\/\u03b2","1 day"]},{"entry":[{},{},{},"1\/\u03b2","1 day"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"4","align":"center","rowsep":"1"}}]}]}}]}},"br":{}},{"@attributes":{"id":"p-0117","num":"0116"},"tables":{"@attributes":{"id":"TABLE-US-00009","num":"00009"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"112pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"28pt","align":"center"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]},{"entry":[{},"Availability",{}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"42pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"98pt","align":"center"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"MTTF","1-node","2-nodes"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"3","align":"center","rowsep":"1"}}]},{"entry":[{},"1 week","0.87500000","0.98237236"]},{"entry":[{},"1 month","0.96816976","0.99893256"]},{"entry":[{},"6 months","0.99455041","0.99996636"]},{"entry":[{},"1 year","0.99726776","0.99999062"]},{"entry":[{},"4 years","0.99931554","0.99999906"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"3","align":"center","rowsep":"1"}}]}]}}]}}},"In a stateless n-node cluster, incoming client requests may be uniformly distributed among servers by a load balancing mechanism. If a server in the cluster fails, the failed server may be \u201cblack-listed\u201d from request distribution after the failure is detected and the load balancing algorithm may be updated. During this delay, a proportional fraction of requests continue to be sent to the failed server. Node failures may be detected through mutual exchange of heartbeat messages. Network load balancing may increase availability of front-end applications which do not maintain permanent state in storage devices. Examples of such applications include but are not limited to MICROSOFT INTERNET INFORMATION SERVER (IIS) and proxy services.","Network load balancing may support load balanced distribution of TCP\/IP traffic in clusters containing, for example, up to 32 hosts. All clustered hosts may include an instance of network load balancing and periodically exchange multi-cast or broadcast messages to communicate status. If the heartbeat message from a given host is not received after a configurable number of exchanges, then that host is considered failed and \u201cconvergence\u201d may be initiated. Requests continue to be sent to the failed host during convergence until the load balancing algorithm is updated to redistribute traffic among remaining available hosts.","The heartbeat interval may be configurable with a default (e.g., 1 second). The number of missed heartbeats required to initiate convergence may also be configurable with a default (e.g., 5). These parameters typically will determine the delay in failure detection. Additional failover delay is imposed by the convergence process itself which may occur, for example, in less than 10 seconds.","Referring again to , at step  all the possible state spaces of a stateless n-node cluster are identified. For simplicity, the example given will discuss a 2-node stateless cluster, but it should be understood that the invention includes within its scope the determination of availability for one or more clusters containing any number of nodes. In a stateless 2-node cluster, there are four possible state spaces. The four possible state spaces of a stateless 2-node cluster are; state space one: two nodes are active, (e.g., serving customers) and there is full availability (i.e., availability=1); state space 2: a fail-over to an active node is in progress (fail-over in this scenario generally means that the node which has failed is pending black-list updating by the load balancer) and there is half-availability (i.e., availability=\u00bd); state space 3: one node is active and there is full availability (i.e., availability=1).","After all the possible states are identified (i.e., after the state space is determined), at step , the structure of the transitions between the states are mapped and at step  the transition rates between states are determined. In one embodiment of the invention, a Markov analysis is applied to the stateless 2-node cluster to calculate system availability.  is a Markov chain, as illustrated in  for a stateless 2-node. It should be understood that while the Markov chain depicted in  illustrates the transitions and transition rates between states, the actual generation of such a figure is not required by the invention.","In state 1  (2 nodes active), nodes 1 and 2 are up and the cluster is available. In state 2 , fail-over to the other active node is in progress and the cluster is \u00bd available, one of the nodes has failed or has been taken offline (i.e., is down), the other node is up and active and the cluster is \u00bd available. In state 3  one node is active, one node is down, and the cluster is available. In state 4 no nodes are active (catastrophic failure state), both nodes are down and the cluster is not available.","The mean rate at which the system transitions from state 1 to state 2 is the mean rate at which one of the nodes fails and is represented in  as \u03b1. The mean time it takes for one of the two nodes to fail (mean time to failure if 2 nodes are active) is the reciprocal of the mean rate of failure of one of the nodes or 1\/\u03b1and is called the Mean Time To Fail (MTTF) if 2 nodes are active.","The mean rate at which the system transitions from state 2 to state 3 is the rate at which the first failed node is black-listed and is represented in  as \u03b3. The mean time it takes for the black-listing process to complete (mean time to black-list the first failed node) is the reciprocal of the mean rate at which the first failed node is black-listed or 1\/\u03b3and is called the Mean Time to Black-List the first failed node. (MTTBL).","The mean rate at which the system transitions from state 3 to state 4 is the mean rate at which a node fails if one node is active and is represented in  as \u03b1. The mean time it takes for a node to fail if one node is active (mean time to failure if 1 node is active) is the reciprocal of the mean rate at a node fails if one node is active or 1\/\u03b1and is called the Mean Time to Fail (MTTF) if one node is active.","The mean rate at which the system transitions from state 4 back to state 3 is the mean rate of repair of the second failed node and is represented in  as \u03b2. The mean time it takes to repair the second failed node (mean time to repair second failed node) is the reciprocal of the mean rate of repair of the second failed node or 1\/\u03b2and is called the Mean Time to Repair or Restore (MTTR) the second failed node.","Finally, the mean rate at which the system transitions from state 3 to state 1 is the mean rate of repair of the first failed node and is represented in  as \u03b2. The mean time it takes to repair the first failed node (mean time to repair first failed node) is the reciprocal of the mean rate of repair of the first failed node or 1\/\u03b2and is called the Mean Time to Repair or Restore (MTTR) the first failed node.","In one embodiment of the invention, it is assumed that simultaneous failure of more than one active node occurs with negligible probability, and that there is a negligible probability of failure of the remaining active node during fail-over. It is furthermore assumed that requests are uniformly distributed among the nodes which are active or failing over and that repair of a failed node occurs without interruption in service.","The cluster availability of the stateless 2-node cluster is: \u03c0+\u03c0+\u00bd(\u03c0) where each of these state probabilities is given by the state probabilities as derived for active-passive 2-node clusters above. For example, if the mean times are determined to be:",{"@attributes":{"id":"p-0131","num":"0130"},"tables":{"@attributes":{"id":"TABLE-US-00010","num":"00010"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Mean Times"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"98pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"1\/\u03b1","\u20021 month"]},{"entry":[{},"1\/\u03b1","\u20022 weeks"]},{"entry":[{},"1\/\u03b2","\u20021 hour"]},{"entry":[{},"1\/\u03b2","\u20021 hour"]},{"entry":[{},"1\/\u03b3","15 seconds"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}]}},"br":{}},{"@attributes":{"id":"p-0132","num":"0131"},"tables":{"@attributes":{"id":"TABLE-US-00011","num":"00011"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"21pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"140pt","align":"center"}}],"thead":{"row":[{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]},{"entry":[{},"State","Probability"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"1","0.99860342"]},{"entry":[{},"2","0.00000385"]},{"entry":[{},"3","0.00138695"]},{"entry":[{},"4","0.00000385"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}}},"br":{}},"In an Internet service topology formed by groups of clustered and single server components (e.g., web and database servers) where each group performs the same function, the successful completion of requests from the Internet require the availability of some subset of these component groups. If a given component group consists of more than one server, then failure of a single server within the component group will often result in only a short interruption in service.","For example, suppose an Internet service consists of n component groups denoted {C}and the availability of each component group Cis A. If an Internet request requires the availability of a subset of component groups {C}where S{1, . . . , n}, then the availability of the Internet service with respect to that request is given by the product of these component group availabilities:",{"@attributes":{"id":"p-0135","num":"0134"},"maths":{"@attributes":{"id":"MATH-US-00011","num":"00011"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"munderover":{"mo":"\u220f","mrow":{"mi":["i","S"],"mo":"\u2208"},"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}},"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"msub":{"mi":["A","i"]}}}},"br":{}},"The availability of a simple Microsoft Commerce Server deployment as shown in can be determined using this methodology. The availability determined above for a stateless 2-node cluster and that of a 2-node active-passive cluster is used, i.e., the availability of the commerce server is 0.99999326*0.99999062=0.99998388. This value represents the overall availability for the deployment.","The above described system and method may be used as a design tool or operations tool. For example, suppose a particular enterprise or business entity wants to provide \u201cfive nines\u201d availability of a system for their customers. An analysis that is run on the current system may return the result that only \u201cthree nines\u201d availability is presently available. The above described system and method may be used to determine the most optimal way of altering the system to provide \u201cfive nines\u201d availability. By mathematically altering the parameters and determining the corresponding change in availability, the most cost effective way to reach \u201cfive nines\u201d availability can be determined. For example, by changing one of the parameters (MTTF, MTTF\/O, MTTR, or MTTF\/B) and correlating the cost to realize the change with the change in availability, the most effective or cost-efficient way to reach the desired availability estimate can be determined. By putting the desired availability into the availability equation and solving for MTTF, for example, it can be determined what the mean time for failure must be in order to reach the desired availability, and so on.","MTTR can be improved by specific engineering practices within an Information Technology department such as by choosing a faster backup mechanism for the database. MTTF\/O can be minimized by reducing the number of retries or decreasing the time between heartbeat checks. The aforementioned changes may be more proactively implemented than requiring an increased MTTF. Thus the Markov model as described in the context of the present invention can generate tangible increases in availability by performing a change to a much less complex system than the entire database server or application.","It is noted that the foregoing examples have been provided merely for the purpose of explanation and are in no way to be construed as limiting of the present invention. While the invention has been described with reference to preferred embodiments, it is understood that the words used herein are words of description and illustration, rather than words of limitation. Further, although the invention has been described herein with reference to particular means, materials and embodiments, the invention is not intended to be limited to the particulars disclosed herein; rather, the invention extends to all functionally equivalent structures, methods and uses, such as are within the scope of the appended claims. Those skilled in the art, having the benefit of the teachings of this specification, may effect numerous modifications thereto and changes may be made without departing from the scope and spirit of the invention in its aspects."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The foregoing summary, as well as the following detailed description of preferred embodiments, is better understood when read in conjunction with the appended drawings. For the purpose of illustrating the invention, there is shown in the drawings exemplary constructions of the invention; however, the invention is not limited to the specific methods and instrumentalities disclosed. In the drawings:",{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 1","i":"a "},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 1","i":"b "},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 3","i":"a "},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 3","i":"b "},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 4","i":"a "},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 4","i":"b "},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 4","i":"c "},{"@attributes":{"id":"p-0020","num":"0019"},"figref":["FIG. 5","FIGS. 3"],"i":["a ","b; "],"b":"3"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":["FIG. 6","FIGS. 4"],"i":["a ","b; "],"b":"4"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 8"}]},"DETDESC":[{},{}]}
