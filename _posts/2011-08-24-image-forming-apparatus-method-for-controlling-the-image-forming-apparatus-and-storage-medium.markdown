---
title: Image forming apparatus, method for controlling the image forming apparatus, and storage medium
abstract: An image forming apparatus having a restriction on an amount of resource usage for use in executing an application includes an installation unit configured to install a composite application including a plurality of application modules as one application, a display unit configured to, if, when the composite application installed by the installation unit is activated, the plurality of application modules included in the composite application cannot be activated due to the restriction on the amount of resource usage, activate a predetermined application module in the plurality of application modules and display a symbol corresponding to the activated predetermined application module on a display unit of the image forming apparatus, and an image forming unit configured to execute image processing using an application module corresponding to the symbol, if the symbol displayed by the display unit is selected to instruct the image processing.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08817279&OS=08817279&RS=08817279
owner: Canon Kabushiki Kaisha
number: 08817279
owner_city: Tokyo
owner_country: JP
publication_date: 20110824
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DESCRIPTION OF THE EMBODIMENT"],"p":["1. Field of the Invention","The present invention relates to an image forming apparatus which downloads and executes an external application, a method for controlling the image forming apparatus, and a storage medium.","2. Description of the Related Art","It is known that an execution environment (Java\u2122) for an embedded system is configured on a real-time operating system (OS) of image forming apparatuses, an application capable of controlling the image forming apparatuses is externally downloaded, and the application is executed on the configured execution environment. By configuring this execution environment, users can add an application(s) to the image forming apparatuses.","Unlike personal computers (PC), a plurality of applications needs to coexist in a limited resource, in the execution environment on the image forming apparatus. As compared with the PC, the image forming apparatus has a smaller hardware resource, such as a central processing unit (CPU) disposed on-board and a memory. In consideration of usability of a printing process, it is necessary to impose a restriction on the amount of resource usage for an application (s), to ensure the real-time image processing. For example, applications for using a display unit of the image forming apparatus have a restriction. Specifically, the upper limit is given to the number of invoked applications. Japanese Patent Application Laid-Open No. 2009-283002 discusses an image forming apparatus having a restriction on the amount of resource usage for the applications. The amount of resource required by the applications is added together with the amount of resource used for the applications being activated. It is determined as to whether the total amount of resources has reached the preset upper limit. Based on the determined result, the image forming apparatus controls the activation process of the applications. Accordingly, such image forming apparatuses required for real-time image processing have a restriction on activation of applications, when there is no enough space in the limited resource (upper limit of memory, storage, user interface (UI) usage) for activating the applications.","Conventionally, it has been assumed that one application includes one application module. However, one application (hereinafter referred to as a composite application) may include a plurality of application modules. Conventionally, no consideration has been given to how this format of application is activated by the image forming apparatus with the restriction on the resource.","The present invention is directed to an image forming apparatus having a restriction on an amount of resource usage, and to an image forming apparatus which can adequately activate a composite application.","According to an aspect of the present invention, an image forming apparatus having a restriction on resource usage for an application operating on the image forming apparatus includes an installation unit configured to install a composite application including a plurality of application modules having a similar function as one application, and an activation unit configured to activate a part of the plurality of application modules if, when activating the composite application installed by the installation unit, the plurality of application modules in the composite application cannot be activated due to the restriction on resource usage.","Further features and aspects of the present invention will become apparent from the following detailed description of exemplary embodiments with reference to the attached drawings.","Various exemplary embodiments, features, and aspects of the invention will be described in detail below with reference to the drawings.","In an assumed system (not illustrated) according to an exemplary embodiment of the present invention, an image forming apparatus and two external servers are connected with each other via the Internet. In the present exemplary embodiment, the number of external servers is two, although other numbers may alternatively be used. Each external server may be a server system including a plurality of servers.",{"@attributes":{"id":"p-0026","num":"0025"},"figref":["FIG. 1","FIG. 1"],"b":["100","112","123","125","100","112","112","112","112"]},"The scanner unit  executes image processing for reading a document, and generating image data from the read document information. The printer unit  conveys recording paper, forms image data as a visible image on the recording paper, and prints the formed image.","The controller unit  is connected to the scanner unit  via a bus , and is connected to the printer unit  via a bus . The controller unit  sends instructions for image processing to the scanner unit  and the printer unit . The controller unit  is connected to other units via a local area network (LAN) , a wide area network (WAN) , and a wireless line . The operation unit  also controls input\/output of image information and device information.","A central processing unit (CPU)  is a unit for controlling the entire system. A random access memory (RAM)  is a system work memory for the CPU  to operate, and is a unit for temporarily storing image data. A read-only memory (ROM)  is a unit for storing data, and is a boot ROM. The ROM  stores a boot program for the system. A hard disk drive (HDD)  is a unit for storing system software, image data, information regarding the entire wireless communication (specifications of wireless communications) and retained by a communication unit  as will be described below. The HDD  stores also applications operating on a real-time OS  and a virtual machine , as will be described below.","The image forming apparatus may have more functions by installing applications implemented with desired functions. By installing the applications, application programs for operating various functions on the image forming apparatus can be stored in the RAM  and\/or HDD . As will be described below, when installing the applications in the image forming apparatus, the applications are installed in a virtual environment operating in the OS controlling various functions of the image forming apparatus, rather than directly in the OS.","An operation unit I\/F  is an interface unit toward the operation unit  as a user interface (UI), and outputs data to be displayed on the operation unit  thereto. The operation unit I\/F  has a role in transmitting user-input information from the operation unit  to the CPU . A network unit  is connected to the LAN , and externally sends and receives information via a network. A modulator-demodulator (MODEM)  is connected to a wide area network (WAN) , and inputs and outputs information. The communication unit  is connected to a wireless network (WIRELESS)  via an antenna (not illustrated), and inputs and outputs information. The communication unit  can perform various kinds of wireless communications. Each of the above-described units is arranged on a system bus .","An image bus interface (I\/F)  is connected to the system bus  and an image bus  for transferring image data at high speed, and is a bus bridge for converting a data configuration. The image bus  is defined as a peripheral components interconnect (PCI) bus or by IEEE1394.","Of units arranged on the image bus , a raster image processor (RIP)  rasterizes page-description language (PDL) codes to a bitmap image. A device I\/F unit  connects the scanner unit  or printer unit  to the controller unit , for performing synchronous\/asynchronous conversion of image data.","A scanner image processing unit  corrects, processes, and edits input image data. A printer image processing unit  corrects the print-output image data and transforms the resolution for the print-output image data, according to the printer unit . An image rotation unit  rotates image data. An image processing unit  executes a compression\/decompression process (Joint Photographic Experts Group (JPEG), Joint Bi-level Image Experts Group (JBIG), Modified Modified READ (MMR), Modified Huffman (MH)), or executes a format conversion process (Portable Document Format (PDF), Tagged Image File Format (TIFF), Optical Character Recognition (OCR), encryption), for image data.","A software configuration  of the image forming apparatus illustrated in  will now be described with reference to . The software configuration  illustrated in  is implemented by loading, into the RAM , programs for realizing various functions stored in the HDD  of the image forming apparatus, and by the CPU  executing the programs.","The OS  is a first execution environment for controlling the entire image forming apparatus, and sends instructions to each unit or CPU that can control various functions of the image forming apparatus in real time. The OS  includes a group of libraries. The group of libraries can critically control each function including an optional unit(s) of a copying machine and an expansion card(s). The OS  includes a group of modules for providing interface commands to the applications operating thereon. A controller control unit  operates on the OS , and includes modules for controlling the scanner unit  and the printer unit .","An application programming interface (API)  realizes a process for accessing the controller control unit  and a function for sending control commands to a unit connected to a network via the network unit , in response to an instruction from the applications operating on the OS . The application  operates on the OS , and requests the controller control unit  via the API  for various processes.","A virtual machine  is a second execution environment for executing a particular application(s), and is implemented by, for example, a Java (registered trademark) virtual machine(s). An API  provides a function for the applications on the virtual machine  as the second execution environment to access the controller control unit  operating on the real-time OS  as the first execution environment. Specifically, the API  includes modules for providing various functions in response to a call from the applications operating on the virtual machine . The API  realizes a function of a conversion module for calling the API  and a function for sending control commands to units connected to a network via the network unit .","A framework module  has a function for generally controlling the applications on the second execution environment . A management application  manages the applications operating on the second execution environment . The management application  provides a function for downloading, uploading, deleting, invalidating, and installing an application  and a composite application , in cooperation with the framework module .","The management application  and the application  operate on the second execution environment , and request the controller control unit  via the API  for various processes.","A resource management unit  manages resources used by the virtual machine  as the second execution environment, and operates on the real-time OS  realizing the first execution environment. The resource management unit  restricts the amount of resource usage for each corresponding module, when the resource(s) is used by the application(s) operating on the virtual machine  realizing the second execution environment, the API , the framework , and the OS . Specifically, the amount of resource usage of the image forming apparatus is restricted in such a manner that each of the modules cannot use of greater than a predetermined amount of resource. For example, when loading the application(s) operating on the virtual machine  into the RAM , the loading of the applications is restricted, if a preset number of invoked applications have already been loaded into the memory. In another example, the execution of the applications may be restricted even though the applications are loaded into the RAM , because the resource for the CPU executing the loaded applications is not enough. In the present exemplary embodiment, the preset number of invoked applications implies a restriction imposed on the applications operating on the virtual machine , and the number of twenty, as an example. Thus, if twenty applications operating on the virtual machine  have already been loaded into the RAM , no more applications residing on the virtual machine  can be activated.",{"@attributes":{"id":"p-0042","num":"0041"},"figref":["FIG. 3","FIG. 3"],"b":["112","300","112","301","302","301","302"]},"The common area  includes a title bar  and a menu button . The title bar  is to describe the displayed screen, while the menu button  is to display a menu for configuration registration and function setting according to the presently displayed screen. The function area  includes displayed buttons for switching to screens corresponding to applications for \u201cCopy\u201d and \u201cSend\u201d. The application buttons in the present exemplary embodiment include a \u201cCopy\u201d application button , a \u201cSend\u201d application button , a \u201cBox\u201d application button , and a \u201cSend\u201d application button  for external servers. The applications corresponding to any buttons other than the \u201cSend\u201d application button  for external servers are those operating on the first execution environment. A button corresponding to a new application is displayed in the function area  on the top screen , when this application is installed in the image forming apparatus, loaded into the RAM , and adequately activated. Each of the applications is loaded into the RAM  at the time the image forming apparatus is activated. The buttons registered in the function area  correspond both to the applications operating on the OS  and the applications operating on the virtual machine .",{"@attributes":{"id":"p-0044","num":"0043"},"figref":["FIG. 4","FIG. 4"],"b":["400","212","212","212","212","212","401","402","403"]},"The external-service-A connection application unit  is an application module for communicating with an external server A (not illustrated) , and displays a UI  illustrated in  on the operation unit . The external server A is based on an assumption of a cloud computing environment, and provides an external service A using the cloud computing environment.","Reference numeral  in the UI  represents an item for specifying the scanning magnification, reference numeral  represents an item for specifying the resolution, and reference numeral  represents an item for specifying the density. Reference numeral  represents a button for executing transmission. When a user presses the \u201cSend\u201d button  for transmission toward the external service A, a document is scanned, and image data corresponding to the scanned document is sent to the external server A. The external-service-A connection application unit  includes a communication module for communicating with the external service A, and sends the scanned image through the communication with the external server A. At this time, the external-service-A connection application unit  calls the transmission processing application unit . The called transmission processing application unit  displays a UI  illustrated in  on the display unit, to inform the user that the scanned document image is being sent. More specifically, the composite application  activates two application modules of the external-service-A connection application unit  and the transmission processing application unit , executes image processing, and executes a process for sending the result of the image processing to the external server. As described above, the external-service-A connection application unit  can execute image processing for image data and print the processed image, upon reception of the image data from an external server. In this case, the external-service-A connection application unit  displays a UI (not illustrated) for printing that differs from the UI illustrated in .","The external-service-B connection application unit  is an application module for communicating with an external server B (not illustrated) , and displays a UI (not illustrated) for sending a scanned image to the external server B. The external server B is based on an assumption of a cloud computing environment, and is provided as an external service B using the cloud computing environment. The difference between the external service A and the external service B is the different kind of storage data format, for example. Unlike the external service A, the external service B can store a plurality of kinds of data formats. Thus, the UI displayed by the external-service-B connection application unit  includes also an item for selecting a data format, other than the items illustrated in . The external-service-B connection application unit  can also receive image data from the external server, execute image processing on the image data, and print the processed image.","The external-service-B connection application unit  includes a communication module for communicating with the external service B, communicates with the external server B, and sends a scanned image. At this time, the external-service-B connection application unit  calls the transmission processing application unit . The called transmission processing application unit  displays a UI representing that the scanned document image is being sent, as illustrated in . Like the application unit , the external-service-B connection application unit  is an application module operating in cooperation with the transmission processing application unit . In this manner, the application module for communicating with a system connected via a network is called an individual application module, while a module which is commonly used between individual application modules is called a common application module. The composite application  includes individual application modules and a common application module. As described above, each of the individual application modules has a function for displaying the UI. However, different UIs are displayed according to the external services provided by the connected external servers. The communication modules of the individual application modules communicate with the respective external servers to provide respective external services, thus communicating with communication protocols corresponding to the respective external servers.","The two external servers providing the external services A and B are based on a cloud computing environment. The two external servers have a known configuration of the information processing unit, and provide not only a service for storing data in response to an external request, but also a service for sending the stored data to a request source.",{"@attributes":{"id":"p-0050","num":"0049"},"figref":"FIG. 7A","b":["212","701","702","703","401","402","403","401","402"]},{"@attributes":{"id":"p-0051","num":"0050"},"figref":["FIG. 7B","FIG. 7B","FIG. 7B"],"b":["212","704","1","401","402","705","2","401","403"]},{"@attributes":{"id":"p-0052","num":"0051"},"figref":"FIG. 8","b":["212","801","212","802","212","401","211","401","802","803","212","102"]},"When the transmission processing application unit  is successfully activated in step S, the processing proceeds to step S. In step S, the composite application  confirms activation of the external-service-A connection application unit  having the second highest priority. In step S, when the external-service-A connection application unit  cannot be activated, the composite application  initializes and activates only the transmission processing application unit  in step S. At this time, the composite application  ends the activation process without registering any buttons in the top screen . The reason why no buttons are registered in the top screen  is that the user cannot be provided with a service using the external service only through the transmission processing application unit . When the external-service-A connection application unit  is successfully activated in step S, the processing proceeds to step S.","In step S, the composite application  confirms activation of the external-service-B connection application unit  having the third highest priority. When the external-service-B connection application unit  cannot successfully be activated in step S, the composite application  initializes and activates the transmission processing application unit  and the external-service-A connection application unit  in step S. At this time, the composite application  registers a button for using the external service A in the top screen . This button corresponds to the external-service-A connection application unit . When the external-service-B connection application unit  is successfully activated in step S, the composite application  initializes and activates the following three application modules in step S. The three application modules include the transmission processing application unit , the external-service-A connection application unit , and the external-service-B connection application unit . The composite application  registers a button for using the external service A and a button for using the external service B, in the top screen , and ends the activation process.",{"@attributes":{"id":"p-0055","num":"0054"},"figref":["FIG. 9","FIG. 8","FIG. 9"],"b":["209","401","402","403"]},{"@attributes":{"id":"p-0056","num":"0055"},"figref":["FIG. 10","FIG. 8","FIG. 10","FIG. 10"],"b":["1100","1103","1101","1102","1104","205","212","205","205","212"]},"Accordingly, the descriptions have been made to the activation of the composite application according to the present exemplary embodiment. Finally, the main point of the present exemplary embodiment will be discussed with reference to  to C.  is a diagram illustrating the main point of the present exemplary embodiment.  are diagrams illustrating the display of symbols (icons) upon activation of the application module.","The composite application includes a plurality of application modules. Each of the application modules realizes a plurality of functions. The application modules are classified as a common application module and individual application module. The individual application module can provide a user with a service based on an external service, in cooperation with the common application module. This service is to store scanned image data in an external server, download and print the image data stored in the external server. The individual application module includes a communication module for communication with an external server(s) and a display module for displaying a UI screen based on the external service of a communication target. The common application module includes a display module for displaying a UI screen representing that communication is being made with an external server, in response to a call from the individual application module.","In Case  where all application modules of the composite application can be activated, symbols (icons)  and  are displayed as illustrated in . The symbols correspond to all the activated individual application modules. A part of the application modules of all application modules of the composite application can be activated, in any of the following two cases (Case  and Case ). Specifically, the first case is Case  where the entire common application modules and at least one individual application module can be activated. The second case is Case  where no one individual application module can be activated, or where a part of the common application modules cannot be activated.","In Case , the common application module and the individual application module with a high priority are activated. As illustrated in , the symbol  is displayed. This symbol  corresponds to a predetermined individual application module that can be activated. In Case , the common application module to be activated is activated, without activating the individual application module. As illustrated in , no symbol corresponding to the individual application module is displayed. In Case , the reason why only the common application module is activated is to avoid being occupied by any applications other than the composite application . When occupied by any other application, it takes further more time to activate the composite application . In the present exemplary embodiment, like the composite application , the applications including a plurality of application modules have a higher priority of activation than another application not being activated yet. In Case  where no application modules of the composite application can be activated, no application modules are activated. As illustrated in , no symbol corresponding to the individual application is displayed.","When a symbol for using an external service displayed on the display unit is pressed, a corresponding individual application module displays a UI. The image forming apparatus receives image data, for example, from an external server, and prints the received image data. At this time, the individual application module operates in cooperation with the common application module. Accordingly, when any of various instructions is issued upon pressing the symbol, the image forming apparatus executes image processing before or after data communications with the external server.","Accordingly, the descriptions have been made to the image forming apparatus, a method for controlling the image forming apparatus, and a program process for controlling the image forming apparatus to execute the controlling method, according to the present exemplary embodiment. According to the present exemplary embodiment, in the image forming apparatus with a restriction on the amount of resource usage, the composite application can appropriately be activated.","In the present exemplary embodiment, the descriptions have been made to the composite application including both the common application module and the individual application module(s). However, the composite application may include only individual application modules. In this case, the resource of the image forming apparatus may be restricted. However, the present invention is also applicable.","In the present exemplary embodiment, each of the common application module and the individual application module includes a group of least necessary modules. However, each of the common application module and the individual application module may include any other group of modules.","Embodiments of the present invention can also be realized by a computer of a system or apparatus (or devices such as a CPU or micro-processing unit (MPU)) that reads out and executes a program of computer executable instructions recorded on a memory device to perform the functions of any of the above-described embodiment (s), and by a method, the steps of which are performed by a computer of a system or apparatus by, for example, reading out and executing the program recorded on a memory device to perform the functions of any of the above-described embodiment (s). For this purpose, the program may be provided to the computer for example via a network or from a recording medium of various types serving as the memory device (e.g., computer-readable medium). The program may be provided to the computer, for example, via a network or from a recording medium of various types serving as the memory device (e.g., computer-readable medium). The recording medium may include, for example, one or more of a hard disk, a random-access memory (RAM), a read only memory (ROM), a storage of distributed computing systems, an optical disk (such as a compact disc (CD), digital versatile disc (DVD), or Blu-ray Disc (BD)\u2122), a flash memory device, a memory card, and the like. Such a system or apparatus, and the computer-readable medium where the program is stored, are included as being within the scope of the present invention.","While the present invention has been described with reference to exemplary embodiments, it is to be understood that the invention is not limited to the disclosed exemplary embodiments. The scope of the following claims is to be accorded the broadest interpretation so as to encompass all modifications, equivalent structures, and functions.","This application claims priority from Japanese Patent Application No. 2010-189515 filed Aug. 26, 2010, which is hereby incorporated by reference herein in its entirety."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The accompanying drawings, which are incorporated in and constitute a part of the specification, illustrate exemplary embodiments, features, and aspects of the invention and, together with the description, serve to explain the principles of the invention.",{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":["FIG. 7A","FIG. 7B"]},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":["FIG. 12A","FIG. 12B","FIG. 12C"],"b":["1","2","3","4"]}]},"DETDESC":[{},{}]}
