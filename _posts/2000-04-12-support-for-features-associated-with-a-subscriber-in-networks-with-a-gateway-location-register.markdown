---
title: Support for features associated with a subscriber in networks with a gateway location register
abstract: A method and apparatus for providing an indication, in a system which uses a gateway location register to reduce signaling between visitor location registers and home location registers, to a home location register of the features not supported by a visitor location register. The indication of the features not supported by the visitor location register can be provided to the home location register during a location update message exchange or a data restoration request message exchange. The indication can also be provided in an information update message.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07031707&OS=07031707&RS=07031707
owner: Telefonaktiebolaget LM Ericsson (publ)
number: 07031707
owner_city: Stockholm
owner_country: SE
publication_date: 20000412
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","Referenced-Applications","STATEMENT REGARDING FEDERALLY SPONSORED RESEARCH","REFERENCE TO A MICROFICHE APPENDIX","BACKGROUND OF THE INVENTION","BRIEF SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE INVENTION"],"p":["This application claims priority under 35 U.S.C. \u00a7\u00a7119 and\/or 365 to U.S. Provisional Application No. 60\/128,786 filed on Apr. 12, 1999, the entire content of which is hereby incorporated by reference. This application is also related to the following co-pending applications filed on Apr. 12, 2000: U.S. patent application Ser. No. 09\/453,906 \u201cHome Location Register Fault Recovery\u201d; U.S. patent application Ser. No. 09\/453,907 \u201cGateway Location Register Fault Recovery\u201d; and U.S. patent application Ser. No. 09\/547,991 \u201cGateway Location Registers In A UMTS System\u201d, all of which are herein expressly incorporated by reference.","Not Applicable","Not Applicable","1. Description of Related Art","Not Applicable","2. Field of the Invention","The present invention relates to mobile communications systems, and more specifically, to addressing the situation when features associated with a roaming mobile subscriber are not supported by the serving location register in a visited network.",{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 1","b":["110","110","115","120","120"]},"In a GSM system mobile subscriber data is stored within the VLR that is associated with the mobile services switching center (MSC) that currently serves the mobile subscriber in order to reduce internetwork signaling between VLRs and HLRs. The decentralization of the VLRs within a GSM system (i.e., each MSC being equipped with a VLR) reduces intranetwork signaling as well. So, for example, if the mobile subscriber is roaming in an area of the VPLMN  which is controlled by the MSC\/VLR , the HLR  will transfer the mobile subscriber's profile to MSC\/VLR . Similarly, if the mobile subscriber is roaming in an area controlled by MSCNLR , the HLR  will transfer the mobile subscriber's profile to MSC\/VLR . Although  illustrates the MSC\/VLR as a single system node, one skilled in the art will recognize that the MSC and VLR can be implemented as separate system elements.","To increase the compatibility of GSM with other types of systems, it is anticipated that future versions of the GSM standard, also called Universal Mobile Telecommunications System (UMTS), will incorporate elements of other mobile communications systems. For example, the Japanese Personal Digital Cellular (PDC) system includes a system node which is used to reduce internetwork signaling known as a gateway location register (GLR).  illustrates an exemplary mobile communications system in accordance with the PDC system. Like a GSM system, a home network  includes an HLR  which contains the mobile subscriber's profile. When a mobile subscriber roams into a visited network  the mobile subscriber's profile is transferred to GLR . In GSM terms, the GLR can be described as a VLR for all subscribers roaming from other networks. Hence, only one GLR is needed for each network.",{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 3","b":["310","320","315","325","320","325","330","335","340","325","320","325","325","320","320"]},"The protocol used by GSM\/UMTS systems for transferring data between VLRs and HLRs is the mobile application part (MAP). Since GLRs are optional elements within the UMTS system, MAP procedures should be completely independent of the presence or absence of GLRs in a system. Accordingly, by using an HLR interface towards the VLRs and a VLR interface towards the HLRs, the GLR should be completely transparent. However, in a system which includes a GLR where the different MSC\/VLR nodes support different sets of supplementary services, the indications of this to the HLR in the home network becomes a problem. A similar problem occurs if some MSC\/VLR nodes support regional subscription restrictions while others do not, or if different MSC\/VLR nodes support different phases of customized applications for mobile network enhanced logic (CAMEL). CAMEL allows wireless systems to provide intelligent network services similar to those provided by wired networks such as the public switched telephone network. The same kind of problem is applicable when different bearer services and teleservices are supported, and when the support for operator determined barring varies between different MSC\/VLR nodes. A similar problem occurs when the entire MSC area is restricted for a certain mobile subscriber for some MSC\/VLRs but not restricted for other MSC\/VLRs. For ease of explanation supplementary services, support for regional subscription restrictions, support for different phases of CAMEL, bearer services and teleservices are referred to herein as features.",{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 5","b":["505","510","515","520","525"]},"Referring again to , the MSC\/VLR determines whether the features associated with the parameters set in the MAP_INSERT_SUBSCRIBER_DATA message are supported by the MSC\/VLR and sends a MAP_INSERT_SUBSCRIBER_DATA response message to the HLR.",{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 6","b":["605","610","615","620","625","630"]},"Referring again to , the location update procedure is completed by the HLR sending a MAP_UPDATE_LOCATION response confirmation message.",{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 7"},"To reduce internetwork signaling, when a GLR is used in the visited network, a MAP_UPDATE_LOCATION message is sent to the HLR of a roaming mobile subscriber only upon the first location update request of a series of consecutive location update requests from the roaming mobile subscriber in the particular visited network. Accordingly, when the mobile subscriber subsequently moves to other MSC areas or other serving MSC\/VLRs, the HLR is not informed of this move. Instead the MSC\/VLR, such as MSC\/VLR2, will send a MAP_UPDATE_LOCATION message to the GLR. The GLR will respond with a MAP_INSERT_SUBSCRIBER_DATA message to MSC\/VLR2. MSC\/VLR2 returns a MAP_INSERT_SUBSCRIBER_DATA response message. The GLR completes the location updating procedure by sending a MAP_UPDATE_LOCATION response message to MSC\/VLR2 and performing a location cancellation procedure with MSC\/VLR1. Accordingly, if MSC\/VLR2 supports different features than those supported by MSC\/VLR1, the HLR, which needs to have this information to provide such features, is not informed, since the location update messages are not forwarded by the GLR to the HLR.","According to exemplary embodiments of the present invention, methods and apparatus are provided for indicating features not supported by a visitor location register. A message including an indication of a feature not supported by a visitor location register for a subscriber is sent from a gateway location register to a home location register. Another message including another indication of a feature not supported by another visitor location register for the subscriber is sent to the gateway location register. The gateway location register determines whether a feature is supported by the visitor location register which is not supported by the another visitor location register or whether a feature is supported by the another visitor location register which is not supported by the visitor location register.","According to another aspect of the present invention, a location updating message indicating that a subscriber is being served by the visitor location register is sent from a visitor location register to a gateway location register. Which of the subscriber's features are supported by the visitor location register is indicated to the gateway location register. The message indicating which of the subscriber's features are supported by the visitor location register is sent to the subscriber's home location register. Another location updating message indicating that the subscriber is being served by the another visitor location register is sent from another visitor location register to the gateway location register. Which of the subscriber's features are supported by the another visitor location register is indicated to the gateway location register. The gateway location register determines whether the visitor location register supports features which are not supported by the another visitor location register or whether the another visitor location register supports features which are not supported by the visitor location register.","In the following description, for purposes of explanation and not limitation, specific details are set forth, such as particular sequences of inter and intra network signaling, types of messages, etc. in order to provide a thorough understanding of the present invention. However, it will be apparent to one skilled in the art that the present invention may be practiced in other embodiments that depart from these specific details. In other instances, detailed descriptions of well-known methods, devices, and network elements are omitted so as not to obscure the description of the present invention.","The exemplary radio communication systems discussed herein are described as operating in accordance with the UMTS system, however, one skilled in the art will recognize that the present invention can be implemented in other mobile communications systems where a gateway is used to reduce internetwork signaling.","According to exemplary embodiments of the present invention the GLR detects when a piece of information required by the HLR is changed and then forwards the required information to the HLR. To detect when a piece of information is changed, due to a changed location of the mobile subscriber, the GLR stores the six parameters associated with the mobile subscriber's features (SS-Code List, Bearer Service List, Teleservice List, Operator Determined Barring General Data, Regional Subscription Response, Supported CAMEL Phases) received in the MAP_INSERT_SUBSCRIBER_DATA response message from the MSC\/VLR. Since, with the exception of the indication of an entirely restricted MSC area, this is data characteristic to each node, the specific support for each feature in each node could also be stored in the GLR as configuration data. Configuration data stored in the GLR indicates the support for features that are not subscriber specific for each of the MSC\/VLRs controlled by the GLR, e.g., support for operator determined barring is not subscriber specific whereas a restricted mobility area is subscriber specific.","When the next MAP_INSERT_SUBSCRIBER_DATA response message concerning the same mobile subscriber is received from a new MSC\/VLR, the GLR determines whether any of the mobile subscriber's features has changed. The GLR can determine whether support for any of the mobile subscriber's features has changed by comparing the data received in the MAP_INSERT_SUBSCRIBER_DATA response message with the stored data from the previous MAP_INSERT_SUBSCRIBER_DATA response message for the concerned mobile subscriber. Alternatively, the GLR can make this determination by comparing the configuration data for the old and the new MSC\/VLR node. Since an entirely restricted MSC area cannot be determined by configuration data, the GLR will need to determine for each MSC\/VLR if the MSC\/VLR area is restricted based on the information previously provided by the HLR or provided in the MAP_INSERT_SUBSCRIBER_DATA response message from the MSC\/VLR. If support for the mobile subscriber's features has changed due to a mobile subscriber roaming from one MSC\/VLR to another where both MSC\/VLRs are served by the same GLR, the GLR informs the HLR in accordance with either of the following three alternative methods.",{"@attributes":{"id":"p-0038","num":"0037"},"figref":["FIG. 8","FIG. 7"]},"When the resulting MAP_INSERT_SUBSCRIBER_DATA message from the HLR is received, the GLR does not forward it to the MSC\/VLR. Instead it responds to the HLR with the same MAP_INSERT_SUBSCRIBER_DATA response message that it received from the MSC\/VLR indicating the features not supported by the MSC\/VLR and\/or that the entire MSC area is restricted. The HLR then responds with a MAP_UPDATE_LOCATION response confirmation. The GLR sends a MAP_UPDATE_LOCATION response confirmation to the MSC\/VLR. Through this process, the HLR receives the information concerning features supported by the new MSC\/VLR. Hence, the HLR can adjust the features which it is supporting for the mobile subscriber.","One skilled in the art will recognize that in certain scenarios the MAP_INSERT_SUBSCRIBER_DATA response message forwarded by the GLR will be an empty confirmation message. For example, when a mobile subscriber roams from an area where an MSC\/VLR supports all of the mobile subscriber's features but is an entirely restricted MSC area to an MSC\/VLR which also supports all of the mobile subscriber's features and is not an entirely restricted MSC area, the MAP_INSERT_SUBSCRIBER_DATA response message will be empty. Since the MAP_INSERT_SUBSCRIBER_DATA response message indicates features not supported and restricted MSC areas, an empty message indicates support for all mobile subscriber features and no restricted MSC areas.",{"@attributes":{"id":"p-0041","num":"0040"},"figref":["FIG. 9","FIG. 8"]},"Conventionally, the MAP_RESTORE_DATA message is sent from an MSC\/VLR to an HLR when the MSC\/VLR has experienced a fault which caused the MSC\/VLR to lose the mobile subscriber's data. The MAP_RESTORE_DATA message will trigger a MAP_INSERT_SUBSCRIBER_DATA message to be sent from the HLR, and the GLR responds to this with the same MAP_INSERT_SUBSCRIBER_DATA response message that it received from the MSC\/VLR, i.e., the MAP_INSERT_SUBSCRIBER_DATA message indicating features not supported by the MSC\/VLR and\/or that the entire MSC area is restricted for the concerned mobile subscriber, or an empty message. The HLR then sends a MAP_RESTORE_DATA response confirmation message to the GLR. The GLR completes the update location procedure with the MSC\/VLR by sending a MAP_UPDATE_LOCATION response confirmation message.","In accordance with another embodiment of the present invention, a new MAP message is defined for informing the HLR of the changes in the support for the mobile subscriber's features and\/or in the status of possible restriction of the entire MSC area. This message could, for example, be called MAP_INFORMATION_UPDATE and would include the IMSI of the concerned mobile subscriber (as well as the Invoke ID) as a mandatory parameter. The MAP_INFORMATION_UPDATE message can also include the SS-Code List, the Bearer Service List, the Teleservice List, the Operator Determined Barring General Data, the Regional Subscription Response and the Supported CAMEL Phases parameters as optional parameters for informing the HLR of changes in the support of these features and\/or the status of possible restriction of the entire MSC area. The response message from the HLR would only contain the common parameters Invoke ID, User Error and Provider Error.",{"@attributes":{"id":"p-0044","num":"0043"},"figref":["FIG. 10","FIG. 8"]},"For ease of explanation exemplary embodiments have been described as informing the HLR of features not supported by the new MSC\/VLR. Of course, one skilled in the art will recognize that the GLR by informing the HLR of features not supported by the new MSC\/VLR, the GLR is implicitly indicating the features which are supported by the new MSC\/VLR which were not supported by the previous MSC\/VLR.","One skilled in the art will recognize that the described methods are equally applicable in a general packet radio service (GPRS) network. By informing the HLR of features not supported by a new serving GPRS support node (SGSN), the GLR implicitly indicates the features which are supported by the new SGSN, and vice versa. For a more detailed description of GPRS and SGSNs, the interested reader should refer to U.S. Patent Application No. 09\/547,991 \u201cGateway Location Registers In A UMTS System\u201d which is herein expressly incorporated by reference.","The present invention has been described by way of exemplary embodiments to which the invention is not limited. Modifications and changes will occur to those skilled in the art without departing from the spirit and scope of the invention as defined in the appended claims."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE SEVERAL VIEWS OF THE DRAWINGS","p":["The present invention will now be described with reference to the accompanying drawings in which:",{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 10"}]},"DETDESC":[{},{}]}
