---
title: Method of video encoding using windows and system thereof
abstract: A first search window within a reference frame of video data is identified along with a first correlation threshold value for the first window. The first correlation threshold value is a value to which correlation factors between a pixel set being encoded and pixels sets of the first search window are compared. For example, if a correlation factor between a specific pixel set of the first search window and a pixel set being encoded meets the first threshold value, a successful match between the two pixel sets has been found, and a corresponding motion vector can be assigned to the pixel set being encoded. If none of the pixel sets within the first window meet the first threshold value, a second search window within the first frame is selected along with a second correlation threshold value. The correlation factors for pixel sets in the second window are compared to the second correlation threshold value.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07408989&OS=07408989&RS=07408989
owner: ViX5 Systems Inc
number: 07408989
owner_city: Toronto, Ontario
owner_country: CA
publication_date: 20030116
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["FIELD OF THE DISCLOSURE","BACKGROUND","DETAILED DESCRIPTION OF THE FIGURES"],"p":["The present disclosure relates generally to video processing, and more particularly to a method and system of encoding video data.","Encoding of digital video data is generally performed in order to compress the amount of data needed to represent a video stream. It is known in the art to encode a frame one set of pixels at a time. For example, each macroblock of a frame can be encoded by comparing the macroblock's pixels to the pixels of other macroblocks of a frame that has been previously displayed, or decoded. Once a set of pixels in the previous frame that corresponds closely to the set of pixels being encoded is found, a motion vector pointing to that set of pixels is identified. Once a motion vector to the set of pixels is identified, any information difference between the two sets of pixels can be quantified and efficiently compressed.","Known methods of encoding will correlate the set of pixels being encoded to sets of pixels in the previous frame or a portion of the previous frame until a correlation threshold is met. Once the correlation threshold is met, it is known that a pixel set in a previous frame that corresponds sufficiently close to the pixel set being encoded has been found. Due to the large amount of data associated with video streams, and video frames, the encoding process can be a very time-consuming process. Therefore, a system or method capable of more efficiently encoding pixels sets would be useful.","In accordance with the specific embodiment of the present disclosure, a first window is selected in a reference frame of video data. The first window contains one or more pixel sets, each that are to be correlated with a pixel set being encoded to determine a correlation factor. In addition, a first threshold value is determined for the first search window. The first threshold value is the value to which correlation factors are compared. For example, if a correlation factor between a specific pixel set of the first search window and the pixel set being encoded meets the first threshold value, a successful match between the two pixel sets has been found, and a corresponding motion vector can be assigned to the pixel set being encoded.","If none of the pixel sets within the first window meet the first threshold value, a second search window within the first frame is selected. A second threshold value different than the first threshold value, is determined for the second search window. Typically, the second threshold value will be less stringent than the first threshold value. The correlation factors for the pixel sets of the second search window that are correlated to the pixel set being encoded are compared to the second threshold value. By using multiple search windows with varying threshold values, a more efficient encoding process can be obtained. For example, by setting the first search window to be relatively small, a faster match can be expected while maintaining a high correlation level. This provides a decoder system a mechanism to set a trade off between processing power of an encode process, and the desired quality of the encode process.  further illustrate specific embodiments of the present disclosure.",{"@attributes":{"id":"p-0010","num":"0009"},"figref":["FIG. 1","FIG. 2","FIG. 1"],"b":["1","102","2","104","1","102","2","104","1","102","1","2","104","2","104","1","102","1","102"]},"At step  a first search window size and location is determined. For example, referring to , the search window  is defined. The search window  represents an area of frame F  that has one or more pixel sets that will be correlated to macroblock F\/. Note that F\/ refers to the macroblock at macroblock location  in frame F , which is the macroblock being encoded. It will be further appreciated, that within specific search windows, the searches are not constrained by specific pixel sets, such as macroblock boundaries. In other words, the pixel sets identified within a search window can reside across encoding pixel set boundaries. In one embodiment, the first search window  contains a single pixel set to be searched. In other embodiments, multiple pixel sets are contained with the first search window.","It will be appreciated that the location of the first search window is generally be based upon a predicted motion vector. It will be appreciated that there are many method of predicting motion vectors, and how the initial location of the first search window is determined can be determined by a variety of methods.","At step  of , a correlation threshold is set for the first window. As the pixel set being encoded is correlated to the pixel sets of the first window a correlation factor is determined. This correlation factor is compared to the correlation threshold of the first window to determine when a successful match between the pixel sets has been found. Generally, the correlation threshold for the first window would be set relatively high, compared to other correlation thresholds, because the number of pixels sets within the first window is relatively small. Because of the relatively small number pixel sets anticipated within the first window, a somewhat higher correlation factor can be used without affecting performance.","At step , a search window pixel set is determined. With respect to  a single search window pixel set may be present. Regardless, one pixel set within the search window will be identified.","At step , a correlation factor is determined between the pixel set being encoded and the search window pixel set. The correlation factor can be determined using any of a variety of correlation techniques. Such techniques can be as simple as subtracting one pixel set from the other to determine a difference between the pixel sets. Other techniques can be more complicated. For example, where the pixel set information represents spatial data, the correlation technique can perform a mathematical transform to convert the data to non-spatial pixel set data. For example, sub-sampling techniques and\/or techniques that operate on frequency domain data can be used. Furthermore, it will be appreciated, that each application of the step , in the loop formed by steps ---, can apply the same correlation technique or different correlation techniques. For example, the first search window location can use a different correlation technique than a subsequent search window.","At step , a determination is made whether or not the correlation factor meets the correlation threshold identified in step . If the correlation factor does meet the correlation threshold the flow proceeds to step  where a motion vector is used corresponding to the search window pixel set. If at step  the correlation factor does not meet the correlation threshold, the flow proceeds to step . Note that in an embodiment where the current window is to be the last window searched, the correlation threshold can be set so that it will never be met. This would allow the pixel set with the best correlation factor to be selected at step .","At step  a determination is made whether or not more search window pixel sets exist in the current search window. If so, the flow proceeds to step , otherwise the flow proceeds to step .","At step , a next search window pixel set is determined within the current window. Once the next search window pixel set is determined the flow proceeds to step . A loop including steps , , , and  continues until all of the search window pixel sets within the current window have been correlated to the pixel set being encoded, or until a successful correlation has occurred.","When no more search window pixel sets exist in the current search window the flow proceeds from step  to step . At step , a determination is made whether or not more search windows are to be identified. If not, the flow proceeds from step  to step  where the method of  selects the best pixel set location and\/or terminates without a successful correlation being found. However, if additional search windows are to be identified, the flow proceeds to step .","At step , a next search window size and location is determined. Referring to , a search window  is the next search window identified.","Step , a correlation threshold is set for the next search window . Again, with reference to , a new correlation threshold value would be set for the window size . Because the window size  contains more pixel sets than the search window  a less stringent correlation factor will be tolerated. In other words, to avoid a long encode time, a tradeoff in the quality of correlation is allowed.","At step , a new search window pixel set is identified. It will be appreciated that where the first search window  is a subset of the new search window , the correlation factors associated with the pixel sets of the first search window can be maintained, without re-correlating, and compared to the new threshold value. By saving the correlation factors for the first search window only the search window pixel sets that are unique to the second search window  would have to be correlated, thereby saving processing time.","Again in the manner previously described, the steps , , , and  will be repeated until either all of the search window pixel sets have been correlated against the pixel set being encoded, or a successful pixel set correlation has occurred.","In the manner described, a plurality of search windows, i.e., search windows , , and , can each be searched for pixels sets meeting different correlation threshold values. In this manner, tradeoffs between picture quality and the amount of processing time expected to be potentially spent can be dynamically maintained. It will be appreciated, that this is an advantage over the prior art, which would identify a single window and a single threshold value.",{"@attributes":{"id":"p-0025","num":"0024"},"figref":["FIG. 3","FIG. 3","FIG. 1","FIG. 3"],"b":["300","310","320","310","300","322","324","324","1","202","2","204","310","310","312","300"]},"In the preceding detailed description of the embodiments, reference has been made to the accompanying drawings which for a part thereof, and in which is shown by way of illustration specific embodiments in which the disclosure may be practiced. These embodiments are described in sufficient detail to enable those skilled in the art to practice the disclosure, and it is to be understood that other embodiments may be utilized and logical, mechanical and electrical changes may be made without departing from the spirit or scope of the present disclosure. To avoid detail not necessary to enable those skilled in the art to practice the disclosure, the description may omit certain information known to those skilled in the art. Furthermore, many other varied embodiments that incorporate the teaching of the disclosure may be easily constructed by those skilled in the art. Accordingly, the present disclosure is not intended to be limited to the specific form set forth herein, but on the contrary, it is intended to cover such alternatives, modifications, and equivalents, as can be reasonably included within the spirit and scope of the disclosure. The preceding detailed description is, therefore, not to be taken in a limiting sense, and the scope of the present disclosure is defined only by the appended claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0005","num":"0004"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0006","num":"0005"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0007","num":"0006"},"figref":"FIG. 3"}]},"DETDESC":[{},{}]}
