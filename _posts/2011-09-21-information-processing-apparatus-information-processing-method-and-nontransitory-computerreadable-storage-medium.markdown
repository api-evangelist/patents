---
title: Information processing apparatus, information processing method and non-transitory computer-readable storage medium
abstract: An information processing apparatus acquires a structured document containing a plurality of elements, specifies, in accordance with an instruction from a user, a partial element group from the plurality of elements contained in the acquired structured document, and selects, in accordance with the content of each of the plurality of elements included in the specified element group, an output-target element from the plurality of elements included in the element group.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09170759&OS=09170759&RS=09170759
owner: Canon Kabushiki Kaisha
number: 09170759
owner_city: Tokyo
owner_country: JP
publication_date: 20110921
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DESCRIPTION OF THE EMBODIMENTS"],"p":["1. Field of the Invention","The present invention relates to an information processing apparatus, an information processing method and a non-transitory computer-readable storage medium.","2. Description of the Related Art","By accessing Web pages on the Internet, users acquire a variety of information. A Web page is composed of a structured document described in a structured language such as HTML (HyperText Markup Language) or XHTML (Extensible HyperText Markup Language). A user refers to a Web page using software referred to as a \u201cbrowser\u201d, which corresponds to a display of such a structured document.","When a Web page is printed, there are cases where the user desires to print not the entire Web page but only a region that is a portion thereof. Many techniques for printing such a partial region of a Web page are known. An example of such a known technique is to adopt only the region of the Web page that is being displayed in the browser window at the time of print execution as the object of printing and to perform printing that is based upon image data representing the region that is the object of printing (see the specification of Japanese Patent Laid-Open No. 2002-351636).","If the user is to cause a desired region of a Web page to be output in accordance with the technique described in Japanese Patent Laid-Open No. 2002-351636 cited above, the user must first cause only the region of the Web page that is desired as the object of output to be displayed in the browser window.","The present invention provides a technique adapted so as to allow a user to readily select a desired region that is to be output from a Web page.","According to a first aspect of the present invention, there is provided an information processing apparatus comprising: an acquisition unit configured to acquire a structured document containing a plurality of elements; a specification unit configured to specify, in accordance with an instruction from a user, a partial element group from the plurality of elements contained in the structured document acquired by the acquisition unit; and a selection unit configured to select, in accordance with content of each of the plurality of elements included in the element group specified by the specification unit, an output-target element from the plurality of elements included in the element group.","According to a second aspect of the present invention, there is provided an information processing method of an information processing apparatus, comprising: acquiring a structured document containing a plurality of elements; specifying, in accordance with an instruction from a user, a partial element group from the plurality of elements contained in the structured document acquired at the acquiring step; and selecting, in accordance with content of each of the plurality of elements included in the element group specified at the specifying step, an output-target element from the plurality of elements included in the element group.","Further features of the present invention will be apparent from the following description of exemplary embodiments (with reference to the attached drawings).","An exemplary embodiment(s) of the present invention will now be described in detail with reference to the drawings. It should be noted that the relative arrangement of the components, the numerical expressions and numerical values set forth in these embodiments do not limit the scope of the present invention unless it is specifically stated otherwise.","Note that a \u201cprinting medium\u201d means not only a paper sheet for use in a general printing apparatus but also a member which can fix ink, such as cloth, plastic film, metallic plate, glass, ceramics, resin, lumber, or leather in a broad sense.",{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 1"},"A personal computer , a printer  and a plurality of WWW servers  are connected to the printing system via Internet . The personal computer  and printer  are connected using a LAN (Local-Area Network) or USB (Universal Serial Bus) so as to be capable of communicating with each other. It should be noted that the overall configuration shown here is strictly one example. For instance, a plurality of personal computers  and a plurality of printers  may be provided, and other devices may be connected as well.","The personal computer  is an information processing apparatus operated by the user. The personal computer  downloads a Web page from WWW server  via the Internet  and displays the downloaded Web page. The Web page is constituted by a structured document described in HTML, XHTML or XML or the like. A structured document is a document described by structured description language (markup language, for example), which defines the structure of a document using elements of a plurality of types. As long as a display screen is created based upon this document, it does not matter if the document is other than a Web page. Further, after the personal computer  has downloaded the Web page from the WWW server , the personal computer  is capable of instructing the printer  to print this Web page.","The printer  is a printing apparatus for forming an image on a printing medium (paper, for example) and printing the image. It should be noted that the printing method used by the printer  is not particularly limited and may be an inj-ket method or electrophotographic method, by way of example.","The WWW server  stores Web pages and images and the like described in HTML or XHTML or the like and provides these items of information via the Internet  in response to a request from the personal computer  or the like.","Next, an example of the hardware configure of the personal computer  shown in  will be described with reference to .","The personal computer  comprises a CPU , a RAM , a ROM , a hard disk , a USB interface , a display unit , an input unit  and a LAN interface . It should be noted that the various units constituting the personal computer  are connected via a bus  so as to be capable of communicating with one another.","The CPU  performs overall control of operation of the personal computer . More specifically, the CPU  operates on data and executes instructions in accordance with a program that has been stored in ROM  or on the hard disk , etc.","The RAM  is used as a work area when the CPU  executes various processing. The hard disk  stores an operating system (OS), browser and other application software and the like.","The USB interface , which is an interface to which a USB cable is connected, is used in order to perform data communication with the printer , by way of example. The LAN interface  is an interface to which a LAN cable is connected and is used in order to perform data communication with the WWW server  via the Internet , by way of example. It should be noted that data communication using the USB interface  and LAN interface  may be wired or wireless communication.","The display unit  is a CRT or liquid crystal display or the like and displays various screens [e.g., a Web page, print preview image, graphic user interface (GUI)] based upon information downloaded from the WWW server . The input unit  is constituted by a mouse and keyboard, for example, and inputs user instructions to the apparatus.","Next, an example of a functional configuration implemented by the personal computer  will be described with reference to . It should be noted that a functional configuration implemented within a structured document printing module  is realized by having the CPU  execute a program (the structured document printing module, for example) that has been read in from the ROM  using the RAM  as a work area, by way of example.","The browser , which is an application for displaying Web pages, functions to download a Web page from the WWW server  to the hard disk  of the personal computer  and to display the downloaded Web page on the display unit . As mentioned above, Web pages are structured documents of HTML or XHTML or the like and the elements that constitute a structured document, such as text and images, are described using tags. Further, a separate file referred to as a CSS (Cascading Style Sheet) that stipulates the display style of these elements is designated within a structured document. The browser  analyzes these structured documents and displays them on the display unit .","The structured document printing module  is plug-in software called from the browser . For example, if the browser  is instructed to perform automatic extraction of a print region (described later) in a state in which the user has not selected a print region, the structured document printing module  is activated. Further, in a case also where the browser  is again instructed to perform automatic extraction of a print region in a state in which a print region has been selected, the structured document printing module  is activated.","In the description that follows, a case will be described in which the structured document printing module  decides a Web-page region to be printed and causes the image of the decided region to be printed by the printer . However, the processing executed by the structured document printing module  is not limited to printing of images. The processing includes deciding a Web-page region to be output and displaying the decided region, and performing various control operations such as control of storage of such regions in memory and transfer of these regions to external devices.","Further, it may be arranged so that only elements automatically selected from among the plurality of elements contained in a structured document are output, and it may be arranged so that the user can output, in a form distinguishable from each other, both an automatically selected element and other elements.","It should be noted that in order for the user to specify automatic extraction of an output region in a state in which the output region has not been selected, the user uses a mouse or the like to specify the setting of an automatic extraction mode and specifies the start of automatic extraction. Further, in order for the user to specify automatic extraction of an output region in a state in which the output region has been selected, the user uses a mouse or the like to specify the desired output region within the Web page in a state in which the automatic extraction mode has been set.","The structured document printing module  comprises a print target element selection unit , an enhanced display processing unit , an element extraction unit , a print layout unit , a print preview unit  and a print control unit  as the functional components of the module.","The print target element selection unit , which functions to extract an element to be printed from within a structured document, comprises a hierarchical data construction unit , an element selection unit and an element re-selection unit ","The hierarchical data construction unit analyzes the elements within the structured document and constructs a DOM (Document Object Model) tree in the RAM . A DOM tree is data indicating the hierarchical structure of the elements constituting the structured document. An element that is a parent to a child element, or a child element corresponding to a parent element, which is contained in the structured document can be specified by acquiring the DOM tree. In other words, by using a DOM tree, a parent element that includes a region corresponding to a specific child element can be specified in a Web page.","The element selection unit selects one element or a plurality of elements (referred to as \u201cprint-target elements\u201d below) from a structured document using a DOM tree in a case where automatic extraction of an element has been designated by the user in a state in which a print region has not been selected. The element selection is performed by referring to the element content (area of each element, amount of text and text ratio, etc.). It should be noted that amount of text refers to the number of characters actually displayed on the browser and is included in character information within the element, by way of example. Text ratio refers to the ratio of overall tag size of an element to the amount of text, by way of example.","The element re-selection unit re-selects one element or a plurality of elements from a structured document using a DOM tree in a case where automatic extraction of an element has been designated by the user in a state in which a print region has already been selected by the element selection unit In re-selection of a print-target element, an element located at coordinates in a Web page designated as by the clicking of a mouse by the user is selected as the print-target element. A DOM tree and the manner in which a print-target element is selected will be described in detail later.","The enhanced display processing unit  presents an enhanced display of a print-target element, which has been selected by the print target element selection unit , in the form of a print region on the browser . For example, an enhanced display is presented as by enclosing the print-target element in a semi-transparent rectangle. It should be noted that an enhanced display is presented in order to notify the user of an element selected as the print target or of the region corresponding to this element in the Web page. Accordingly, it will suffice so long as the user can be notified of the print-target element, and the method of accomplishing this is not limited to an enhanced-display method. For example, information indicating the element that has been selected, such as text included in the element or the file name of a file that has been inserted as an element, may be displayed. Further, the method of notification also is not limited to a display. The user may be notified by causing the printer to print information indicative of the file that has been selected, or the user may be notified as by voice.","The element extraction unit  extracts from the structured document the print-target element selected by the print target element selection unit . In accordance with print settings, the print layout unit  decides the layout of print-target elements, which have been extracted by the element extraction unit , on a printing medium (paper, for example). It should be noted that print settings include information such as paper size, resolution and printable regions. The print settings are acquired from a printer driver  via an operating system . The print preview unit  arranges print-target elements in accordance with the layout decided by the print layout unit  and displays the elements on the display unit  as a print preview.","In accordance with the arrangement information indicating the output of the print-target elements selected by the print layout unit , the print control unit  controls printing that is based upon these print-target elements. More specifically, the print control unit  causes the printer driver  to execute processing for rendering the print-target elements via the operating system .","A re-selection designation unit  accepts designation of re-selection of a print region specified by the user via the input unit . This designation is input by the user after the print-target element selected by the element selection unit is displayed in enhanced form.","The operating system  provides various APIs (Application Programming Interfaces). For example, the operating system  provides an API for the purpose of allowing the structured document printing module  and printer driver  to exchange print settings data, or an API for rendering processing. Although the operating system  includes various control software such as a spooler system for managing a print job and a port monitor for outputting a printer command to a port, these techniques are well known and need not be described in detail here.","The printer driver  executes rendering processing in accordance with control by the print control unit , creates print data and converts the print data to a printer command. The printer driver  then transmits the printer command to the printer  via the operating system . As a result, the printer  can be made to print an image on the printing medium (paper, for example).","Next, reference will be had to  to describe an example of GUI screens displayed on the display unit . It should be noted that  illustrate an example in a case where a structured document (Web page) is displayed on the browser .","The browser  is provided with a back button , a forward button  and an address input area , etc., as illustrated in . The browser  is further provided with a print button , a print preview button , a range selection button  and an automatic extraction button .","If the automatic extraction button  is clicked by a user operation performed via a mouse or the like, the structured document printing module  is activated and a print region (print-target element) is selected automatically.","When the structured document printing module  is activated, a plug-in area  is displayed on the browser , as illustrated in . Disposed in the plug-in area  are a print button  for specifying start of printing, a print preview button  for specifying display of print preview, and a cancel button . If the cancel button  is clicked, the display screen shown in  is restored.","Here the structured document printing module  specifies a print-target element from the structured document that describes the composition of the Web page. Further, the structured document printing module  selects the specified print-target element as a print region and presents an enhanced display of this print-target element on the browser . In this case, a region  is displayed in enhanced form as the print region. It will suffice if the enhanced display is presented as by changing the settings in the style sheet, by way of example. In the example shown in , the region  is displayed in enhanced form using a semi-transparent rectangle. However, this is only one example. For instance, an enhanced display may be presented as by changing the background color or displaying only a border around the region.","If the print region desired by the user and the region  displayed in enhanced form match, the user clicks the automatic extraction button  again using the mouse or the like in order to finalize the print region.","On the other hand, if the print region desired by the user and the region  displayed in enhanced form do not match, then the user clicks the desired print region on the Web page using the mouse or the like, as illustrated in . When this is done, the browser  again calls the structured document printing module  using, as parameters, the structured document corresponding to the Web page being displayed and coordinate information of Web page coordinates indicating the position clicked by the user on the Web page. It should be noted that although this embodiment is described taking as an example a case where the structured document printing module  is called again in response to a user instruction, an arrangement may be adopted in which the above-mentioned coordinate information is input directly to the structured document printing module  in response to a user instruction.","The structured document printing module  that has been called again now specifies the element that contains the clicked position from the structured document. The structured document printing module  thenceforth selects the specified print-target element as the print region, obtains the display region of the print-target element on the browser  and displays this region in enhanced form. In this case, a region  is being displayed in enhanced form as the print region.","As a result, if the print region desired by the user and the region  displayed in enhanced form match, then the user clicks the automatic extraction button  using the mouse or the like in order to finalize the print region. It should be noted that if the desired print region and the region  displayed in enhanced form differ even under these conditions, then the user again clicks the desired print region on the Web page (on the display screen) using the mouse or the like.",{"@attributes":{"id":"p-0062","num":"0061"},"figref":["FIG. 7","FIG. 7"]},{"@attributes":{"id":"p-0063","num":"0062"},"figref":["FIG. 8","FIG. 8","FIG. 7"],"b":"61"},"The DOM tree constructed based upon the structured document shown in  has a document node , which represents the overall document, as a root node. The DOM tree has a node  of a head element and a node  of an html element as the child nodes of the root node. The node  of the html element further has a node  of a body element as a child node.","Thus, each element node holds data such as a pointer to a parent element node, a pointer to a sibling element node, a pointer to a child element node list, attribute information and text information. The form of display of each element and the layout information are defined by the style sheet, and these items are stored in the RAM  or the like as the node information of each element of the DOM tree. For example, font type, font size, character color and display position, etc., correspond to the node information of each element.","Next, an example of the flow of processing in the personal computer  shown in  will be described with reference to . It should be noted that the processing shown in  is implemented by having the CPU  execute a program corresponding to each functional component within the structured document printing module  shown in .","First, the flow of processing for selecting a print-target region will be described with reference to  in a case where automatic extraction has been specified in a state in which a print region has not been selected.","This processing starts (\u201cYES\u201d at step S) when the automatic extraction button  on the browser  shown in  is clicked by the user using a mouse or the like. When the processing starts, the personal computer  activates the structured document printing module  with the structured document of the Web page being displayed on the browser  serving as a parameter.","Using the hierarchical data construction unit , the structured document printing module  reads out the structured document via the browser  and constructs the DOM tree in the RAM  (step S). Each element of the DOM tree possesses node information, as described above.","When construction of the DOM tree is completed, the structured document printing module  uses the element selection unit to specify the body element  from within this DOM tree and adopts the body element  as an element Ri of interest (where i represents a natural number, the initial value of which is 1) (step S). It should be noted that the initial value of Ri is R. Further, the natural number i represents the number of layers below the body element  of the DOM tree; the higher the value of i, the lower the layer represented in the structured document.","The print target element selection unit  executes subsequent processing (steps S to S) repeatedly and specifies, layer by layer, an element of interest in a layer underlying a higher-order layer of the DOM tree. More specifically, first the element selection unit acquires the widths and heights (in pixel units) of all child elements, which are immediately below (one layer below) the element Ri of interest, in the display region, and finds the display areas of all of the child elements immediately below the element Ri of interest based upon these items of information (step S). It should be noted that the display area of each child element need only be found using information described in the tag and information specified in the style sheet, by way of example.","Next, the element selection unit acquires the text amounts and XHTML tag sizes included in all of the child elements immediately below (one layer below) the element Ri of interest and finds the text ratios in all of these elements based upon these items of information (step S).","From among all of the child elements immediately below the element Ri of interest, the print target element selection unit  specifies a child element whose text ratio exceeds a first threshold value and whose display area is largest. The print target element selection unit  sets this specified element as a candidate element C (step S).","Next, the element selection unit compares the display area of the element Ri of interest with that of the candidate element C and finds the ratio of the display area of the candidate element C to the display area of the element Ri of interest (step S). If the result of the comparison is that the ratio of the display areas exceeds a second threshold value (\u201cYES\u201d at step S), the element selection unit increments the layer number i (step S) and then sets the candidate element C as the element Ri of interest (step S). The personal computer  then returns control to the processing of step S and repeats the above-described processing.","It should be noted that if the above-mentioned ratio of the areas exceeds a predetermined threshold value, this means that the area of the region corresponding to the child element (candidate element C) within the region corresponding to Ri, which is the parent element, on the Web page is sufficiently large. In this case, there is a possibility that an element more suitable as an element to be output is contained in the child element C. For this reason, the processing of steps S to S is repeated with respect to child elements contained in the element C and an element that will serve as a candidate for output is extracted.","By thus executing the processing of steps S to S with respect to each layer of the structured document, elements R to Rn can be specified as candidates for output corresponding to the respective layers.","If the ratio of the display areas does not exceed the second threshold value (\u201cNO\u201d at step S), on the other hand, the element selection unit selects, as the print-target element, the element among the elements R to Rn for which the display area is smallest (step S) and then terminates this processing. A child element included immediately below a parent element is adopted as the next candidate element, as described above. The portion of the region of the Web page corresponding to the parent element Ri becomes the region corresponding to child element R(i+1) on the Web page. In the processing of steps S to S, therefore, the lower the order of the layer of interest, the smaller the area corresponding to the element of interest on the Web page. Accordingly, Rn is selected as the print-target element. Further, after the processing at step S, this selected print-target element is displayed in enhanced form as a print region, as shown in .","It should be noted that this embodiment has been described taking as an example a case where the element of interest among the elements R to Rn of interest that has the smallest area is selected as the candidate for output. However, this does not impose a limitation upon the present invention. A candidate for output may be selected in accordance with various conditions such as the text amount.","Described next with reference to  will be the flow of processing for selecting (re-selecting) a print-target region in a case where automatic extraction has been specified again in a state in which a print region has been selected.","It should be noted that this processing is started when any position on a Web page is clicked (\u201cYES\u201d at step S) on the browser  of  by the user using a mouse or the like. When this processing starts, the CPU  of personal computer  activates the structured document printing module  using as parameters the structured document of the Web page being displayed on the browser  and the Web-page coordinate information indicating the position clicked in the Web page.","Using the hierarchical data construction unit , the structured document printing module  reads out the structured document via the browser  and constructs a DOM tree in the RAM  (step S). The structured document printing module  then uses the element selection unit to specify the body element  from within this DOM tree and adopts the body element  as an element Ri of interest (where i represents a natural number, the initial value of which is 1) (step S). It should be noted that the initial value of Ri is R.","The print target element selection unit  executes subsequent processing (steps S to S) repeatedly and specifies, layer by layer, an element of interest in a layer underlying a higher-order layer of the DOM tree. More specifically, first the element re-selection unit refers to all child elements, which are immediately below (one layer below) the element Ri of interest, in accordance with coordinate information that was input when the structured document printing module  was activated. The element re-selection unit then determines whether these child elements include an element that has been placed at a position (designated coordinates) clicked by the user on the Web page (step S). That is, the element re-selection unit finds the coordinates of the display region on the Web page to which each of the child elements corresponds and compares the coordinates of this display region and the coordinates of the clicked position, thereby determining the element. It should be noted that the coordinates of the position on the Web page designated by the user are input to the structured document printing module  by the re-selection designation unit .","If the result of the determination is that the relevant element exists (\u201cYES\u201d at step S), the element re-selection unit sets this element as the candidate element C. The element re-selection unit then acquires the width and height (in pixel units) of the candidate element C in the display region and finds the display area of the candidate element C based upon these items of information (step S). The element re-selection unit then acquires the text amount contained in the candidate element C and the XHTML tag size and finds the text ratio based upon these items of information (step S).","Next, the element re-selection unit compares the display area of the element Ri of interest with that of the candidate element C and finds the ratio of the display area of the candidate element C to the display area of the element Ri of interest (step S). If the result of the comparison is that the ratio of the display areas exceeds a second threshold value (\u201cYES\u201d at step S), the element re-selection unit increments the layer number i (step S) and then sets the candidate element C as the element Ri of interest (step S). The personal computer  then returns control to the processing of step S and repeats the above-described processing.","If the ratio of the display areas does not exceed the second threshold value (\u201cNO\u201d at step S), on the other hand, the element re-selection unit selects as the print-target element the element among the elements R to Rn for which the display area is smallest (step S) and then terminates this processing. A child element included immediately below a parent element is adopted as the next candidate element, as described above. The portion of the region of the Web page corresponding to the parent element Ri becomes the region corresponding to child element R(i+1) on the Web page. In the processing of steps S to S, therefore, the lower the order of the layer of interest, the smaller the area corresponding to the element of interest on the Web page. Accordingly, the element Rn is selected at step S as the element to be output in this case. However, instead of adopting the element Rn as the element to be output, the element C specified at step S may be adopted as the element to be output. In such case the element C corresponds to a region that contains the coordinates designated by the user on the Web page and is an element in the layer which is one layer below the element Rn. That is, element C having an area smaller than that of the element Rn can be adopted as the element to be output.","Further, after the processing of step S, the print-target element selected is displayed in enhanced form as the print region. When this is done, the user, who observes the enhanced-display region as the print region, can verify whether this print region is the one desired. If the region of the print-target element decided at step S is not the desired print region, a change of the print region can be specified by using a user-operated device such as a mouse. At this time the elements R to Rn that include the coordinates designated on the Web page by the use will have been specified, as described above. Accordingly, the elements R to Rn are displayed in enhanced form as print-region candidates in accordance with an instruction from the user and these are presented to the user. When the desired print region has been displayed in enhanced form, the user can cause the image of the desired print region to be printed by clicking the print button  or print preview button  shown in . That is, the user can select the desired print region from among multiple candidates of print regions that contain the coordinates designated on the Web page.","If the result of the determination at step S is that the relevant child element does not exist (\u201cNO\u201d at step S), the element re-selection unit determines whether layer count i=1 holds. If i=1 holds (\u201cYES\u201d at step S), this processing is terminated without a new print-target element being selected. That is, since an element corresponding to the Web-page region designated by the user does not exist in the highest-order layer (i=1) of the structured document, this processing is terminated.","If i=1 does not hold (\u201cNO\u201d at step S), then control proceeds to the processing of step S. In this case, as a result of advancing the layer of the structured document toward lower-order layers and narrowing down the region of the Web page, the region in the Web page that will correspond to the element Rn of interest of the applicable layer (i=n) will not correspond to the coordinates designated on the Web page by the user. That is, it will be understood that although the elements R to Rn that were adopted as the elements of interest up to this point in time contain the Web-page coordinates designated by the user, a child element in the layer that is one layer below Rn does not contain the coordinates. In other words, the elements R to Rn are specified as elements that contain the coordinates designated on the Web page by the user. It should be noted that although the element Rn having the smallest area is selected from among the above-mentioned elements R to Rn, there are instances where an element that is smaller than the element desired for output by the user will be selected. In particular, in a case where the user designates coordinates on a Web page by using a pointing device, there are instances where, even though the user desires the surrounding region of these coordinates as the output target, the element Rn that includes these coordinates is a zone that is smaller than the surrounding region expected by the user. In this embodiment, therefore, from among the elements R to Rn, an element in a layer higher than Rn is decided upon as the element to be output. In the example of , R(n\u22121), which is an element in the layer that is one higher than that of Rn, is adopted as the element to be output. However, an element in a layer that is two or more layers higher than that of Rn may just as well be decided as the element to be output.","The element re-selection unit selects as the print-target element the element R(n\u22121) having the smallest display area among the elements of interest R to R(n\u22121) of area larger than that of element Rn (step S) and then terminates this processing. The element R(n\u22121) is selected as the print-target element since the lower the layer, the smaller the area in the Web page, as mentioned earlier. Further, following the processing of step S, the print-target element that has been selected is displayed in enhanced form as the print region, as shown in . It should be noted that the desired element among the elements R to Rn can be selected as the element to be output.","Thus, in accordance with this embodiment, as described above, a DOM tree in which the elements of a structured document have been arranged in hierarchical form is analyzed layer by layer, an element that is to be output is selected based upon the result of this analysis, and a Web-page region that corresponds to this element is displayed on the display unit  in enhanced form. If a region desired for output by the user and the selected element do not match, the user can specify re-selection of the output-target element by designating the position (coordinates) of the desired element on the Web page.","By executing the processing of steps S and S in accordance with the flowchart of  in the manner described above, an element of an order higher than that of an applicable element that includes an element designated by the user can be decided upon as the element Ri of interest from among the elements contained in a DOM tree. That is, a group of elements are specified by specifying an element that includes an element decided by the user. By executing the processing of step S and S, an element in a layer higher than that of an element decided by the user, or an element decided by a specification made by the user, is selected as the element to be output. Accordingly, an element decided by a specification made by the user is included as an element to be output.","As a result, the user can automatically select a region to be output from a Web page and, in a case where the selected region is one not acceptable to the user, automatic selection of the desired region can be specified again through a simple operation.","It should be noted that in the description rendered above, elements of an order higher than that of an element decided by user specification are specified as an element group. However, this does not impose a limitation upon the present invention. An element group may be specified so as to include elements in the same layer or in a lower-order layer of an element decided by user specification. That is, an element group that includes an element decided by user specification is specified and it will suffice if, as a result, an element decided by user specification is included in the element to be output.","The foregoing is one example of a typical embodiment of the present invention. However, the present invention is not limited to the embodiment indicated in the foregoing description and drawings and can be suitably modified within the scope of the claims.","For example, the flow of processing described in  above is only one example and may be implemented upon being modified as necessary. For example, in the description of , although the selection of a print-target element is performed using the area of an element (display area) and text ratio, the selection of the print-target element may be performed based upon text ratio only.","Further, in the description rendered above, Web-page coordinates designated by the user are specified and element selection is performed so as to include an element corresponding to the specified coordinates. However, the invention is not limited to a case where coordinates are specified; it will suffice if an element corresponding to a Web-page region designated by the user can be decided.","Furthermore, an arrangement may be adopted in which a print-target element is selected using information other than element area and element text ratio. For example, an element may be selected using element tag type, tag attribute or style, etc.","Further, in the description rendered above, a DOM tree is created and analysis of each element is performed using this DOM tree. However, this does not impose a limitation upon the present invention. For example, it may be arranged so that all elements are acquired from a structured document without creating a DOM tree and all of the acquired elements are analyzed to thereby extract the element of interest.","Further, in the description rendered above, the embodiment is described taking as an example a case where once automatic selection of an element to be output has been made, automatic selection is performed again in response to designation of a position on a Web page by the user. However, a case where automatic selection is performed again does not constitute a restriction and it may be arranged so that in a case where a position on a Web page is designated by the user in a state in which an element to be output has not been selected, automatic selection is carried out in accordance with the designated position.","Further, in the description rendered above, whether a text element is adopted as a center element is determined based upon the number of characters of text, which are contained in the text element, displayed on the display unit. However, this does not impose a limitation upon the present invention. It may be arranged so that whether a text element is adopted as a center element is determined based upon the amount of data that has been allocated to the text contained in the text element. For example, on the basis of the number of bytes that have been allocated to the characters contained in text, a text element that contains text having a larger number of bytes may be determined as the center element. In general, there are characters for which two bytes are allocated to the character and characters for which one byte is allocated to the character. Accordingly, if the determination is made in accordance with the number of bytes of text, text containing many characters to which two bytes have been allocated can be determined as text closer to the center of the Web page even if the number of characters is the same.","Further, in the description rendered above, a region to be output from within a Web page is selected by plug-in software associated with a browser that displays the Web page. However, this does not impose a limitation upon the present invention. An arrangement may be adopted in which the above-described functions are incorporated in the browser and the browser itself selects the region to be output from within the Web page.","Further, in the description rendered above, the embodiment is described taking HTML or XHTML as the language of the structured document. However, the processing according to the embodiment is applicable also to various structured documents in languages such as XML.","Thus, in accordance with the present invention, as described above, a user can readily select a desired region to be output from within a Web page.","(Other Embodiments)","Aspects of the present invention can also be realized by a computer of a system or apparatus (or devices such as a CPU or MPU) that reads out and executes a program recorded on a memory device to perform the functions of the above-described embodiment(s), and by a method, the steps of which are performed by a computer of a system or apparatus by, for example, reading out and executing a program recorded on a memory device to perform the functions of the above-described embodiment(s). For this purpose, the program is provided to the computer for example via a network or from a recording medium of various types serving as the memory device (e.g., computer-readable storage medium).","While the present invention has been described with reference to exemplary embodiments, it is to be understood that the invention is not limited to the disclosed exemplary embodiments. The scope of the following claims is to be accorded the broadest interpretation so as to encompass all such modifications and equivalent structures and functions.","This application claims the benefit of Japanese Patent Application No. 2010-232784, filed on Oct. 15, 2010, which is hereby incorporated by reference herein in its entirety."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The accompanying drawings, which are incorporated in and constitute a part of the specification, illustrate embodiments of the invention, and together with the description, serve to explain the principles of the invention.",{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":["FIG. 2","FIG. 1"],"b":"10"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":["FIG. 3","FIG. 1"],"b":"10"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 4","b":"16"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 5","b":"16"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 6","b":"16"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":["FIG. 9","FIG. 1"],"b":"10"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":["FIG. 10","FIG. 1"],"b":"10"}]},"DETDESC":[{},{}]}
