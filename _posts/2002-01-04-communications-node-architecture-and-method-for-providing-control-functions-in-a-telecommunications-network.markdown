---
title: Communications node architecture and method for providing control functions in a telecommunications network
abstract: An architecture for a communications node and a method of implementing control functions in a Session Initiation Protocol (SIP) telecommunications network. The node performs a plurality of call-control functions in a single physical node. A plurality of application-level logic blocks corresponding to the plurality of call-control functions are interfaced with a common engine module which is implemented on top of a common operating system and physical platform. The engine module includes SIP behavior functions and SIP stack functions, selected ones of which are operable to perform different call-control functions when interfaced with different application-level logic blocks. Mapping tables within the engine module identify groups of functions that, together with selected logic blocks, perform defined call-control functions. The open architecture allows additional functional logic blocks to be interfaced with the engine module to implement additional call-control functions.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07028311&OS=07028311&RS=07028311
owner: Telefonaktiebolaget LM Ericsson (publ)
number: 07028311
owner_city: Stockholm
owner_country: SE
publication_date: 20020104
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF EMBODIMENTS"],"p":["1. Technical Field of the Invention","This invention relates to telecommunication systems. More particularly, and not by way of limitation, the invention is directed to a communications node and method for providing control functions in a telecommunications network utilizing the Session Initiation Protocol (SIP).","2. Description of Related Art","Wireless telecommunication networks are evolving from second generation (2G) circuit-switched networks to third generation (3G) packet-switched networks. A reference architecture for a 3G wireless network is being developed by the Third Generation Partnership Project (3GPP). The 3GPP network architecture uses the Session Initiation Protocol (SIP) developed by the Internet Engineering Task Force (IETF) for call setup signaling. Media is then transported through an existing IP network. The SIP standard is described in RFC 2543 which is hereby incorporated in its entirety by reference herein.","In the 3GPP network, control signaling, often referred to as the \u201ccontrol plane\u201d, is kept separate from the payload or media, often referred to as the \u201cuser plane\u201d. When a mobile terminal (MT) is first activated, it registers its existence on a sub-network utilizing SIP call-control signaling through a Call State Control Function (CSCF). The SIP standard is a functional standard and, therefore, does not dictate a specific implementation for the CSCF. Functionally, the CSCF is broken down into a Proxy CSCF (P-CSCF), an Interrogating CSCF (I-CSCF), and a Serving CSCF (S-CSCF). The P-CSCF is the node that the MT directly communicates with, and is the MT's entry point into the SIP network. When the MT first registers, the P-CSCF determines the MT's home network using the domain name in the SIP REGISTER message and a Domain Name Server (DNS). The P-CSCF performs authentication and verification with the specified home network, performs some policy control in terms of determining what the MT is authorized to do, and performs a simple routing function based on a DNS lookup to route the REGISTER message to an I-CSCF in the home network.","The I-CSCF is the entry point into the home network, and serves as a boundary between the home network and a visited network into which the MT may roam. The I-CSCF also queries the MT's Home Subscriber Server (HSS) to identify an S-CSCF for the MT, and then routes the signaling to the S-CSCF. During registration, when the I-CSCF queries the HSS, the HSS determines that the MT does not have an S-CSCF assigned, and instructs the I-CSCF to select an S-CSCF from a plurality of S-CSCFs in the network. The I-CSCF selects one of the S-CSCFs in the network and assigns the MT to the S-CSCF. As long as the registration is valid, that S-CSCF is the MT's S-CSCF. The S-CSCF performs call setup and other telephony services for the MT. Once the MT is registered, the S-CSCF informs the HSS that the S-CSCF is now serving the MT. When calls come in for the MT, and the I-CSCF queries the HSS, the HSS responds with the identity of the assigned S-CSCF.","An originating user need not specify the exact destination address associated with the destination user. The 3GPP network uses aliases associated with particular users to automatically determine the identity of their registered terminals or devices, and to automatically format and deliver communications with the registered devices over an existing IP network. Thus, the 3GPP network architecture provides a centralized and independent communication control mechanism. For a registered user, the 3GPP network and associated elements keep track of the user's exact location and the identity of the user's registered terminal, and accordingly route and enable communication with that registered user over the existing IP network.","In addition to the three types of CSCFs, there are other types of control functions in the SIP network such as Media Resource Control Functions (MRCFs) and Border Gateway Control Functions (BGCFs). An MRCF is used for setting up and controlling conference calls. When two types of user equipment are to be joined in a conference call, and they do not have a common codec, the MRCF handles the signaling to set up digital signal processing hardware for media transcoding, and to start the codecs. The MRCF manages the conference, connects the legs of the call, and so on. A BGCF is used when non-SIP entities are to be joined in a session in the SIP-controlled IP network.","In existing implementation architectures, each control function is implemented independently. That is, the P-CSCF, I-CSCF, S-CSCF, MRCF, BGCF, and other control functions are separate nodes in the SIP network. From the development point of view, this is an inefficient process since there is a large amount of duplicated effort when designing these independent control functions. It would be advantageous to have a more efficient development methodology and control-function architecture. The present invention provides such an architecture and method.","The present invention provides an architecture for a communications node that enables the node to perform, in a single physical node, a plurality of call-control functions that previously were performed by a plurality of physical nodes. The node has an open architecture that allows additional functional logic blocks to be interfaced with a common engine module to implement additional call-control functions in the node.","Thus, in one aspect, the present invention is directed to an architecture for a communications node in a telecommunications network. The node performs a plurality of call-control functions using an operating system and a single physical platform. The architecture includes a plurality of application-level logic blocks corresponding to the plurality of call-control functions, and a common engine module interfaced with the application-level logic blocks. The engine module includes a plurality of functional blocks, selected ones of which are operable to perform selected ones of the call-control functions when interfaced with selected ones of the application-level logic blocks. The engine module also includes at least one mapping table that interfaces the plurality of application-level logic blocks with the plurality of functional blocks in the common engine module, and selects appropriate functional blocks for matching with the application-level logic blocks.","In another aspect, the present invention is directed to an architecture for a Call State Control Function (CSCF) node in a Session Initiation Protocol (SIP) telecommunications network. The CSCF node performs call-control functions of a Proxy CSCF (P-CSCF), an Interrogating CSCF (I-CSCF), and a Serving CSCF (S-CSCF) while being implemented on top of a single operating system and a single physical platform. The architecture includes an application-level logic block corresponding to the P-CSCF, an application-level logic block corresponding to the I-CSCF, and an application-level logic block corresponding to the S-CSCF. The architecture also includes a common engine module interfaced with the application-level logic blocks. The engine module includes a plurality of SIP behavior functions and a plurality of SIP stack functions, selected ones of which are operable to perform the functions of a P-CSCF, I-CSCF, or S-CSCF when interfaced with an appropriate application-level logic block corresponding to the P-CSCF, I-CSCF, or S-CSCF. The engine module also includes at least one mapping table that interfaces the plurality of application-level logic blocks with the plurality of SIP behavior functions and the SIP stack, and selects appropriate SIP behavior functions and SIP stack functions for matching with the application-level logic blocks. The architecture may also include a plurality of servlet Application Programming Interfaces (APIs) that are operable to provide a plurality of supplemental user services, and a servlet manager interfaced with the plurality of servlet APIs and with the application-level logic blocks. The servlet manager is operable to provide selected ones of the supplemental user services to any one of the application-level logic blocks.","In yet another aspect, the present invention is directed to a method of implementing in a telecommunications network, a communications node that performs a plurality of SIP call-control functions using a single operating system and a single physical platform. The method includes the steps of providing a plurality of application-level logic blocks corresponding to the plurality of call-control functions, assigning a network logic-block address to each of the application-level logic blocks, and interfacing with the application-level logic blocks, a common engine module. The common engine module includes a mapping table, a plurality of SIP stack functions, and a plurality of SIP call-control behavior functions. The method also assigns a network address to each of the SIP stack functions and call-control behavior functions, and stores in the mapping table, the logic-block addresses, SIP stack function addresses, and behavior-function addresses. The application-level logic blocks and the common engine module are implemented on top of the single operating system and the single physical platform. Additionally, the method identifies in the mapping table, a plurality of interface groups, each interface group comprising a set of addresses associated with one selected application-level logic block and at least one of the SIP stack functions and call-control behavior functions that, together, perform the call-control function corresponding to the selected application-level logic block.","In the drawings, like or similar elements are designated with identical reference numerals throughout the several views thereof, and the various elements depicted are not necessarily drawn to scale. Referring now to , a block diagram of a portion of a typical 3GPP network architecture  is depicted. The portion illustrated is suitable for setting up a call between an originating user utilizing Terminal-A  and a terminating user utilizing Terminal-B . A principal node in the 3GPP architecture is the Call State Control Function (CSCF). Each of the parties has an associated CSCF. The CSCF is essentially a switch that provides the parties with access to the network and routes the call setup signaling between the parties. Each CSCF includes a Proxy CSCF (P-CSCF), an Interrogating CSCF (I-CSCF), and a Serving CSCF (S-CSCF).","The P-CSCF is the first point of contact for a user registering with the network. When Terminal-A  registers, the originating P-CSCF  determines the home network  associated with the originating user and performs authentication and verification with the specified home network. When Terminal-A originates a call, the originating I-CSCF  queries an originating Home Subscriber Server (HSS)  associated with Terminal-A for user information. The HSS is the master database for a given user and is the network entity containing the subscription-related information to support the network entities actually handling the call\/session. The HSS is further used to determine and locate the originating user's S-CSCF . The originating S-CSCF provides service invocation and other user features available to the subscribed users. The originating S-CSCF also includes a Presence and Instant Messaging (PIM) server .","The terminating (called) user also has an associated home network . The terminating home network includes a terminating I-CSCF , a terminating HSS , and a terminating S-CSCF  having a PIM server . Terminal-B registers with the terminating home network through a terminating P-CSCF . Once call setup is complete, media is exchanged between the two parties via an IP network .",{"@attributes":{"id":"p-0023","num":"0022"},"figref":["FIG. 2","FIG. 1"],"b":["11","31","13","14","32","15","33","16","18","14","34"]},"At step , the REGISTER message is forwarded to the originating S-CSCF . At , the originating S-CSCF queries the originating HSS for User-A's profile information to determine what telephony features the originating user has subscribed to or activated, such as call blocking, call forwarding, voice mail, and the like. At step , the HSS returns the profile information to the originating S-CSCF where the information is cached.","Likewise, Terminal-B  sends a REGISTER message  to the terminating P-CSCF . The terminating P-CSCF determines the home network  associated with that particular user from the REGISTER message and performs authentication and verification with the specified home network. At , the REGISTER message is forwarded to the terminating I-CSCF . The terminating I-CSCF queries the terminating HSS  at step  to identify and locate the terminating S-CSCF  where the destination subscriber is currently registered. If this is an initial registration with the network, Terminal-B has no S-CSCF. In this case, the HSS returns selection criteria to the I-CSCF, and the I-CSCF selects a suitable S-CSCF for the user from a plurality of available S-CSCFs in the terminating home network. If the registration is a re-registration, the address of the terminating S-CSCF is returned to the terminating I-CSCF at step , where the information is cached. At step , the REGISTER message is forwarded to the terminating S-CSCF . At step , the terminating S-CSCF queries the terminating HSS for User-B's profile information to determine what telephony features the terminating user has subscribed to or activated. At step , the terminating HSS returns the profile information to the terminating S-CSCF where the information is cached.","Thereafter, Terminal-A  initiates call setup to Terminal-B by sending a SIP INVITE message  to the originating P-CSCF . SIP enabled multimedia communications include, but are not limited to, voice, video, instant messaging, presence, and a number of other data communications. At step , the INVITE message is forwarded to the originating I-CSCF  associated with the home network for the originating subscriber, and at , the SIP INVITE message is forwarded to the previously identified S-CSCF .","The originating S-CSCF  provides service invocation and other user features available to Terminal-A . Upon verifying that this particular user is able to initiate this particular call connection, the originating S-CSCF then transmits the SIP INVITE message at step  to the terminating I-CSCF  associated with the home network  of the terminating subscriber. At , the INVITE message is then forwarded to the terminating S-CSCF. At , the terminating S-CSCF determines from the terminating user's profile, the P-CSCF  currently serving the terminating Terminal-B . At , the INVITE message is forwarded to the terminating P-CSCF which then forwards it to Terminal-B at step .","Terminal-B  responds with a SIP 200 OK message at . The terminating P-CSCF  forwards the 200 OK message to the S-CSCF  in Terminal-B's home network at , and the terminating S-CSCF sends the 200 OK message to the terminating I-CSCF  at . At , the terminating I-CSCF  sends the 200 OK message to the originating S-CSCF  in Terminal-A's home network . The originating S-CSCF  forwards the 200 OK message at  to the originating I-CSCF , and at , the originating I-CSCF  sends the 200 OK message to the originating P-CSCF . Finally, at , the originating P-CSCF  sends the 200 OK message to Terminal-A .","At step , Terminal-A responds by sending an Acknowledgment to the originating P-CSCF  which forwards the Acknowledgment at step  to the originating I-CSCF . At , the originating I-CSCF sends the Acknowledgment to the originating S-CSCF which forwards it at step  to the terminating I-CSCF  in Terminal-B's home network . The terminating I-CSCF sends the Acknowledgment to the terminating S-CSCF  at step , which forwards it to the terminating P-CSCF  at step . Finally, at step , the terminating P-CSCF forwards the Acknowledgment to Terminal-B . Once the destination terminal has been identified and acknowledged, a data channel  is directly established between the two terminals over the existing IP network , and no further participation is required by the 3GPP network.",{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 3"},"In essence, the invention takes application-level logic from each of the control functions and implements logic blocks \u2013 between an underlying Engine  and an overlying Servlet Manager . The logic blocks \u2013 do not represent entire functional nodes as they are currently defined in the standards. Instead, the logic blocks are sub-systems performing the application-level logic for the various types of control nodes. For example, a P-CSCF as defined in the 3GPP standards comprises the P-CSCF logic block  plus the underlying Engine , Operating System (O\/S)  and Physical Platform . Likewise, the I-CSCF comprises the I-CSCF logic block  and everything below it, and so on.","The Engine  includes standard SIP behavior handlers Proxy , Forking Proxy , User Agent Server (UAS) , and User Agent Client (UAC) . Another SIP behavior handler, Registrar , handles SIP REGISTER messages and is preferably implemented in the S-CSCF Logic  due to data management considerations. Other applications may also act as SIP registrars, and they may be implemented in other ones of the application-level logic blocks. In existing implementations of individual functional control nodes, the SIP behavior handlers are selectively programmed into the individual functions as required. For example, a P-CSCF may utilize the Proxy behavior  to forward a signal to a single destination node. An S-CSCF may use the Forking Proxy behavior  when the destination user is registered on more than one terminal, and a signal is to be routed to all of the terminals simultaneously. An MRCF may use the UAS behavior  when receiving a call for a voice mailbox, and the MRCF may use the UAC behavior  to set up legs in a conference call.","In the present invention, the application-level logic blocks \u2013 for each type of control function tell the Engine  what type of SIP behavior the logic blocks need to handle a particular task. The Engine includes a plurality of mapping tables  implemented throughout the architecture that allow particular configurations to determine what type of node they are, and to access the SIP behaviors they need to perform the functions of that type of node. The plurality of mapping tables pull together all of the functionalities to create each of the application-level functions.","The Engine  also includes a SIP Stack  which performs reliability and error checking functions associated with signal communications within the node. The functionalities in the SIP stack are standard, but in the present invention, the SIP stack is built as three portable units: a transaction manager (TXN) , a Parser (PARS) , and a Utility package (UTIL) . An Operating System Layer (OSL)  binds the three portable units together to form the SIP Stack, and binds the portable units to the O\/S  which sits on top of the Physical Platform .","The Servlet Manager  may manage a plurality of Servlet Application Programming Interfaces (APIs) \u2013. In existing designs for stand-alone functional control nodes such as the P-CSCF, there is a physical platform, an O\/S, a SIP stack, and then a servlet manager. All of the functionality on top of the servlet manager is in the form of servlet APIs. To use that architecture to build a P-CSCF, for example, the P-CSCF is implemented as a P-CSCF servlet API on top of the servlet manager. In the present invention, however, the basic functionality of the control nodes is implemented in the application-level logic blocks \u2013, and the Servlet Manager  and Servlets \u2013 are used only for supplementary or additional services such as call forwarding, call blocking, and so on. The Servlet Manager can interface with all of the application level logic blocks \u2013 to provide additional services.","It should be noted that in the known art, an \u201cengine\u201d is normally thought of as a servlet engine. However, the Engine  is not a servlet engine as previously known. The interface between the Engine and the application-level logic blocks \u2013 is servlet API-like, but it is enhanced so that the application-level logic blocks have access to more functions and data. Using this interface, the present invention adds the control function logic layer \u2013 on top of the Engine  which does the bulk of the SIP behavior. When supplementary services are to be provided, the Servlet Manager  is inserted between the control function logic layer and the Servlets.","The architecture of the present invention uses interface groups to tie the separate logic blocks together to form the different control function types. When the system is provisioned, groups of network addresses are identified. Each group defines the functions necessary to perform a particular call-control function. One such group of network addresses may form, for example, an S-CSCF. Another group may form an ICSCF, and still another group may form an MRCF. When the groups are defined, group-address information is stored in the mapping tables  in various parts of the architecture. When a SIP message comes in, such as an INVITE message to begin a session, the SIP Stack  does not know it is handling a message for a specific application. The SIP Stack just knows that a SIP transaction is occurring, but the SIP Stack keeps track of which interface group it is in. Based on that interface information, particular application functions may be invoked. This interface mapping allows the co-location of the multiple application-level functions on the same physical platform.","The Servlet Manager  works in a similar manner. It does not know how many applications are under it, and it does not know the type of control function for which any particular service is being invoked. The mapping tables  track the groups of functionality and ensure that particular application functions are invoked when requested.","Thus, by adding application-level logic to a common engine, SIP stack, operating system, and physical platform, multiple types of nodes, and multiple instances of each type, may be implemented in a single physical node. The platform up to and including the engine can be reused for new 3GPP nodes.","As noted above, the multiple control functions that the present invention implements in a single node are normally implemented as independent nodes. Therefore, they normally communicate with each other by going out to the SIP network. With the present invention, however, the common node architecture can be used to skip network hops. For example, if signaling is to go from an I-CSCF to an S-CSCF, and those functional entities have been implemented in a single physical node, the signaling can be handled internally at the lower levels of the node architecture. The signal does not have to be actually sent out over the network. Thus, an entire CSCF, including P-CSCF, I-CSCF, and S-CSCF may be implemented as a single CSCF node, eliminating much of the network-level signaling.",{"@attributes":{"id":"p-0041","num":"0040"},"figref":["FIG. 4","FIG. 3"],"b":["41","11","15","42","43","18","23","25","18","19","21","22","16","23","13","44","45","26","28","31"]},"At step , one or more mapping tables  are created to store and map the logic-block addresses, the behavior function addresses, and the SIP Stack function addresses. At step , groups of addresses are identified in the mapping table(s). The address groups include the address of a selected application-level logic block and appropriate behavior functions and SIP Stack functions that, together, perform the call-control function corresponding to the selected application-level logic block. At step , the behavior functions, SIP Stack functions, and mapping tables are implemented on top of the common O\/S  and physical platform . Additional SIP functional nodes may be implemented on the same O\/S and physical platform by adding the corresponding application-level logic block and mapping the logic block to the appropriate behavior functions and SIP Stack functions.","Optionally, the architecture may be extended to provide supplementary or additional user services. At step , the plurality of servlet APIs \u2013 is created. At step , the Servlet Manager  is created, and at step , the Servlet Manager is interfaced with the servlet APIs and with the application-level logic blocks \u2013 to provide supplementary user services to requesting call-control functions.","It is believed that the operation and construction of the present invention will be apparent from the foregoing Detailed Description. While the architecture and method shown and described have been characterized as being preferred, it should be readily understood that various changes and modifications could be made therein without departing from the scope of the present invention as set forth in the following claims. For example, it should be clear to those skilled in the art that the present invention is not limited to providing a CSCF node, but may be practiced to provide any other type of control functions in a 3G network.","Additionally, whereas the use of a specific network architecture and specific messages and signaling protocols has been described in reference to the presently preferred exemplary embodiment of the present invention, such network architectures and signaling implementations are merely illustrative. The communication control node described in the preferred embodiment as being in a 3G SIP network is also applicable to other types of networks in which it is advantageous to implement multiple control functions in a single physical node. Accordingly, all such modifications, extensions, variations, amendments, additions, deletions, combinations, and the like are deemed to be within the ambit of the present invention whose scope is defined solely by the claims set forth below."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The invention will be better understood and its numerous objects and advantages will become more apparent to those skilled in the art by reference to the following drawings, in conjunction with the accompanying specification, in which:",{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":["FIG. 2","FIG. 1"]},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":["FIG. 4","FIG. 3"]}]},"DETDESC":[{},{}]}
