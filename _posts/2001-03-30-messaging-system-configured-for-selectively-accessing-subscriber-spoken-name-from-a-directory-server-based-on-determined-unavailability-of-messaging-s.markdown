---
title: Messaging system configured for selectively accessing subscriber spoken name from a directory server based on determined unavailability of messaging server
abstract: An application server is configured for initiating a messaging session for an incoming call by accessing a subscriber profile information from a directory server and a subscriber announcement from a messaging server. The application server includes a fault tolerant routine for initiating a messaging session, enabling playing of the subscriber's spoken name during the messaging session based on a determined unavailability of the messaging server. The subscriber announcement and the subscriber's spoken name (or another audible subscriber identifier) are stored in the messaging server as first and second data files having first and second sizes, respectively, where the second size is substantially smaller than the first size. The second data file also is stored in the directory server with the subscriber profile information. If, during initiation of the messaging session the application server determines that the messaging server is unavailable, the application server retrieves the second data file from the directory server and plays the corresponding audible subscriber identifier as an alternate announcement for the messaging session. Hence, the application server is able to initiate a messaging session that provides positive identification of the subscriber, enabling messages to be recorded for storage even when the messaging server is unavailable.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07574487&OS=07574487&RS=07574487
owner: Cisco Technology, Inc.
number: 07574487
owner_city: San Jose
owner_country: US
publication_date: 20010330
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","BEST MODE FOR CARRYING OUT THE INVENTION"],"p":["1. Field of the Invention","The present invention relates to fault tolerant unified messaging systems configured for providing unified messaging services in an open protocol network.","2. Description of the Related Art","The evolution of the public switched telephone network has resulted in a variety of voice applications and services that can be provided to individual subscribers and business subscribers. Such services include voice messaging systems that enable landline or wireless subscribers to record, playback, and forward voice mail messages. However, the ability to provide enhanced services to subscribers of the public switched telephone network is directly affected by the limitations of the public switched telephone network. In particular, the public switched telephone network operates according to a protocol that is specifically designed for the transport of voice signals; hence any modifications necessary to provide enhanced services can only be done by switch vendors that have sufficient know-how of the existing public switched telephone network infrastructure.","Unified communications systems are under development as a way of enhancing messaging services for users such as wireless telephone subscribers. A disadvantage of unified communications systems implemented as enhanced versions of the voice mail system, paging system, or e-mail interface resident within the wireless telephone communications system is that such implementation requires detailed knowledge of the proprietary protocols associated with the voice mail systems. Hence, such implementations are available only from switch vendors having knowledge of the proprietary protocols.","Use of a unified communications system implemented independent of the existing proprietary voice mail systems, such as the commercially-available Cisco Unified Open Network Exchange (Cisco uOne) (Products UONE-FOUND 4.1S, and UONE-VOICEMSG4.1S) from Cisco Systems, Inc., enables service providers to use scalable and distributed systems using recognized communication protocols. Hence, the service providers may use such unified communications systems across multiple platforms, independent of protocol, for storage of unified messages (carrying e.g., voice messages, facsimile, and\/or e-mail) stored in a centralized messaging store or distributed message stores. In particular, such unified communications systems may transfer unified messages to message stores according to a prescribed open network protocol, for example IMAP protocol via the Internet.","Commonly-assigned, copending application Ser. No. 09\/480,485, filed Jan. 11, 2000, entitled Application Server Configured for Dynamically Generating Web Pages for Voice Enabled Web Applications, the disclosure of which is incorporated in its entirety herein by reference, discloses an application server that executes a voice-enabled web application by runtime execution of extensible markup language (XML) documents that define the voice-enabled web application to be executed. The application server includes a runtime environment that establishes an efficient, high-speed connection to a web server. The application server, in response to receiving a user request from a user, accesses a selected XML page that defines at least a part of the voice application to be executed for the user. The XML page may describe any one of a user interface such as dynamic generation of a menu of options or a prompt for a password, an application logic operation, or a function capability such as generating a function call to an external resource. The application server then parses the XML page, and executes the operation described by the XML page, for example dynamically generating an HTML page having voice application control content, or fetching another XML page to continue application processing. In addition, the application server may access an XML page that stores application state information, enabling the application server to be state-aware relative to the user interaction. Hence, the XML page, which can be written using a conventional editor or word processor, defines the application to be executed by the application server within the runtime environment, enabling voice enabled web applications to be generated and executed without the necessity of programming language environments.","Hence, web programmers can write voice-enabled web applications, using the teachings of the above-incorporated application Ser. No. 09\/480,485, by writing XML pages that specify respective voice application operations to be performed. The XML documents have a distinct feature of having tags that allow a web browser (or other software) to identify information as being a specific kind or type of information. Hence, the XML documents define the application to be executed by the application server within the runtime environment, enabling voice enabled web applications to be generated and executed without the necessity of programming language environments.","Hence, open network-based systems such as the commercially-available Cisco uOne system (4.1S) or the system disclosed in application Ser. No. 09\/480,485 enable the use of open-network systems such as IMAP message stores, or LDAP directories accessible via an IP-based network such as the Internet, enabling worldwide deployment based on IP-based access protocols. In particular, the IMAP message stores are used for storage of received messages for messaging subscribers, for example voice mail messages. IMAP message stores also are used for storage of a subscriber's spoken name (used for example when the subscriber is sending a message) and subscriber greetings to be played for a calling party attempting to reach the subscriber. The LDAP directories are optimized for providing fast response times to high volume access or search operations for read-only type operations, and typically do not implement transaction or rollback schemes as typically found in complex database systems; hence LDAP directories typically are used for storage of subscriber attribute information, including subscriber name, account information, preferences including hierarchal lists of telephone numbers for single-number reach applications, etc.","An important consideration in the deployment of open network-based systems for complex operations, such as unified messaging, is the ability to provide fault tolerant messaging services in the event that there is a server failure. In particular, proprietary based voice messaging systems may suffer a complete loss of messaging services for incoming callers if the associated messaging server, configured for storing record messages, becomes inoperable; in such cases, incoming callers cannot leave any message for a messaging subscriber, creating substantial inconvenience for the messaging subscriber.","In addition, the reliance of an IMAP messaging server for storage of personalized greetings creates problems in the event that the IMAP messaging server is unable to provide a personalized greeting during an incoming call. In particular, a messaging server may be rendered inoperable if unable to access the personalized greetings, preventing incoming callers from leaving a message for a messaging subscriber. Although a messaging server can be configured to play the called party number using text to speech resources, a calling party may be hesitant to leave a sensitive message in a voice mailbox without verifying the identity of the owner of the voice mailbox.","There is a need for an arrangement that provides fault tolerant messaging services for an incoming caller attempting to reach a messaging subscriber, even if the messaging server that stores a prescribed audible greeting for the incoming caller is unavailable.","There also is a need for an arrangement that enables a messaging server to provide a fault tolerant greeting for an incoming caller attempting to reach a messaging subscriber, even if the messaging server that stores the prescribed audible greeting is unavailable, where the incoming caller can verify an identity of a voice mailbox as corresponding to the messaging subscriber.","These and other needs are attained by the present invention, where an application server is configured for initiating a messaging session for an incoming call by accessing a subscriber profile information from a directory server and a subscriber announcement from a messaging server. The application server includes a fault tolerant routine for initiating a messaging session, enabling playing of the subscriber's spoken name during the messaging session based on a determined unavailability of the messaging server. The subscriber announcement and the subscriber's spoken name (or another audible subscriber identifier) are stored in the messaging server as first and second data files having first and second sizes, respectively, where the second size is substantially smaller than the first size. The second data file also is stored in the directory server with the subscriber profile information. If, during initiation of the messaging session the application server determines that the messaging server is unavailable, the application server retrieves the second data file from the directory server and plays the corresponding audible subscriber identifier as an alternate announcement for the messaging session. Hence, the application server is able to initiate a messaging session that provides positive identification of the subscriber, enabling messages to be recorded for storage even when the messaging server is unavailable.","One aspect of the present invention provides a method in a server configured for initiating a messaging session for an incoming call by accessing subscriber profile information from a directory server. The method includes attempting retrieval of a subscriber announcement for the messaging session from a messaging server based on the subscriber profile information, the subscriber announcement stored in the messaging server as a first data file having a first size. The method also includes determining an unavailability of the subscriber announcement for the messaging session from the messaging server, and retrieving from the directory server an audible subscriber identifier, stored in the directory server as a second data file having a second size substantially smaller than the first size, based on the determined unavailability of the subscriber announcement. The method also includes playing for the messaging session an alternate subscriber announcement including the audible subscriber identifier. Hence, the messaging session can still play an audible subscriber identifier if the messaging server cannot provide the subscriber announcement, enabling a calling party to identify the messaging session for the subscriber.","Another aspect of the present invention provides a server configured for initiating a messaging session for an incoming call. The server includes a first executable resource configured for attempting access to a messaging server according to a first open standard protocol, the messaging server configured for storing a first file having a first size and that includes a subscriber announcement for a messaging session. The server also includes a second executable resource configured for accessing a directory server, according to a second open standard protocol, for subscriber profile information, and a messaging application. The messaging application is configured for initiating a messaging session for an incoming call by retrieving the subscriber profile information and attempting retrieval of the subscriber announcement based on the subscriber profile information. The messaging application also is configured for playing for the messaging session an alternate subscriber announcement having an audible subscriber identifier, retrieved by the messaging application from the directory server as a second data file having a second size substantially smaller than the first size, based on a determined unavailability of the subscriber announcement.","Additional advantages and novel features of the invention will be set forth in part in the description which follows and in part will become apparent to those skilled in the art upon examination of the following or may be learned by practice of the invention. The advantages of the present invention may be realized and attained by means of instrumentalities and combinations particularly pointed out in the appended claims.",{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 1","b":["10","20","10","12","14","16","18","20","22","22","24","26","20","16"]},"The gateway  is configured for receiving incoming calls from the public switched telephone network, as well as receiving voice over IP calls from the IP based network . An exemplary gateway  is an IP telephony gateway  such as a Cisco AS5300 Universal Access Server, configured for establishing Real Time Protocol (RTP) data stream connections according to H.323 protocol for the calling party ; the IP telephony gateway is configured for dialing into the application server , configured in this example as an IP-based resource configured for establishing RTP data streams according to H.323 protocol. An exemplary implementation of the unified messaging system is the commercially available Cisco Unified Open Network Exchange (Cisco uOne) (Products UONE-FOUND 4.1S, and UONE-VOICEMSG4.1S) from Cisco Systems, Inc.","Alternately the gateway  and the application server  may communicate via HTTP protocol, where the gateway  includes a proxy browser configured for sending HTTP requests and receiving HTML Web pages having XML control tags for playing of media information, such as concatenated .wav files, to provide the perception of a voice messaging session to the calling party . Additional details related to the interaction between the gateway  and the application server  according to HTTP protocol are described in the above-incorporated application Ser. No. 09\/480,485.","Regardless of the particular implementation of the communication link between the gateway  and the application server , the application server  is configured for initiating a messaging session for an incoming call by accessing the subscriber profile information  from the directory server  according to LDAP protocol. In particular, the application server  includes an executable messaging application , an executable LDAP resource  (e.g., an application programming interface (API)), an executable IMAP resource , a delivery queue , and an SMTP agent  configured for outputting recorded messages to the messaging server  for storage in the appropriate subscriber directory as a stored message .","The messaging application  is configured for initiating the messaging session for the incoming call, recording any message to be stored, and sending the recorded message to the delivery queue  for transfer to the appropriate subscriber mailbox . Typically the messaging application  begins the messaging session by receiving information related to the incoming call, for example the dialed number identification string (DNIS), used to identify the called party (i.e., the messaging subscriber). The messaging application  issues a function call to the LDAP API  to retrieve the subscriber profile information  in order to obtain subscriber preferences, for example single-number reach information, do not disturb preferences, etc., or identification of different announcements to be played depending on the call condition (e.g., busy vs. no answer, etc.).","As previously described, problems may be encountered if the stored subscriber announcements  cannot be retrieved for the messaging application  by the IMAP API , for example if the IMAP messaging server is unavailable. Conventional techniques for applying text to speech resources to the called party number cannot provide adequate assurances for the calling party that the correct called party has been reached.","According to the disclosed embodiment, an audible subscriber identifier  is stored as a data file (e.g., a .wav file) having a file size that is substantially smaller than the subscriber announcements  stored in the IMAP server . In particular, the subscriber announcements  may have a duration of 10 to 20 seconds, creating a data file having a substantially large size; in contrast, the audible subscriber identifier , for example the subscriber's spoken name, may only require a duration of about 1 to 2 seconds, resulting in a substantially smaller data file. Hence, storage of the audible subscriber identifier  within the subscriber profile information  will not provide any substantial adverse effects in the performance of the LDAP directory .",{"@attributes":{"id":"p-0029","num":"0028"},"figref":["FIG. 2","FIG. 2"]},"The method begins in step , where the messaging application  records the audible subscriber identifier, for example during a subscriber registration session, and stores in step  the recorded audible subscriber identifier with the subscriber profile information  in the LDAP directory . Typically the recording step  and the storage step  would be completed by the messaging subscriber before messaging services can be enabled, indicated by the appropriate enable information within the subscriber profile information . In addition, a copy of the audible subscriber identifier also would be stored with the subscriber announcements , for example if the audible subscriber identifier is needed to identify the subscriber when the subscriber is leaving a message for another messaging subscriber within the same system.","The initiation of the messaging session for an incoming call begins in step , where the messaging application  receives an incoming call and identifies the called party (i.e., messaging subscriber). The messaging application  accesses in step  the subscriber profile information  from the LDAP directory  by issuing the appropriate function call to the LDAP API . Upon receiving the subscriber profile information  retrieved by the LDAP API , the messaging application  sends in step  a request to the IMAP API  to attempt retrieval of a selected subscriber announcement (e.g., announcement for busy call, announcement for no answer, announcement for internal vs. external calls, etc.) based on prescribed logic and the specified subscriber attributes within the subscriber profile information. As apparent from the foregoing, multiple condition-specific announcements  may be stored within the group of subscriber announcements .","The IMAP API  attempts in step  to log into the IMAP messaging server  in order to retrieve the selected subscriber announcement. If in step  login was successful and the IMAP API  is able to retrieve the selected subscriber announcement, the IMAP API  returns in step  the selected subscriber announcement, stored as a .wav file, to the messaging application  for playback. However if in step  the subscriber announcement is determined by the IMAP API  to be unavailable, for example if the IMAP messaging server  returns a login error, the IMAP API  returns an error message to the messaging application  in step .","In response to receiving the error message, the messaging application  issues in step  a function call to the LDAP API  to request the audible subscriber identifier  from the LDAP directory . The LDAP API  requests and retrieves the audible subscriber identifier  from the LDAP directory  in step , and forwards the .wav file carrying the audible subscriber identifier  to the messaging application . The messaging application  then plays in step  an alternate subscriber announcement that includes a generic creating plus the audible subscriber identifier, enabling the calling party to confirm that the appropriate mailbox is being played.","After the messaging application  records the message in step , the messaging application generates in step  an SMTP message that includes the recorded message as a .wav file, and delivers the SMTP message to the delivery queue  for delivery to the message mailbox  of the subscriber. The SMTP agent periodically attempts in step  to deliver the SMTP message until detecting in step  either a delivery acknowledgment or a timeout condition (e.g., 24 hours).","According to the disclosed embodiment, messaging services can be maintained, enabling the initiation of messaging sessions for recording messages, even though a messaging server configured for storing subscriber announcements and stored messages is unavailable.","While this invention has been described in connection with what is presently considered to be the most practical and preferred embodiment, it is to be understood that the invention is not limited to the disclosed embodiments, but, on the contrary, is intended to cover various modifications and equivalent arrangements included within the spirit and scope of the appended claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Reference is made to the attached drawings, wherein elements having the same reference numeral designations represent like elements throughout and wherein:",{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":["FIG. 2","FIG. 1"]}]},"DETDESC":[{},{}]}
