---
title: Method and system for managing mobile station location information
abstract: Mobile stations initiate location determination sessions, such as at predetermined time intervals, with a wireless telecommunications network. The wireless telecommunications network obtains the locations of the mobile stations as a result of the location determination sessions, and the mobile station locations are stored in one or more location registers. The location information stored in the location register(s) may then be used by location-based applications. For example, an application may request that the wireless telecommunications network provide a specified service to the mobile stations that are located in a specified zone according to the mobile station locations stored in the location register(s).
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08948785&OS=08948785&RS=08948785
owner: Sprint Spectrum L.P.
number: 08948785
owner_city: Overland Park
owner_country: US
publication_date: 20021003
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND","SUMMARY","DETAILED DESCRIPTION OF EXEMPLARY EMBODIMENTS","1. Exemplary Architecture","2. Exemplary Operations","3. Conclusion"],"p":["1. Field of the Invention","The present invention relates to telecommunications and, more particularly, to methods and systems for managing mobile station location information.","2. Description of Related Art","Wireless telecommunications networks are increasingly using wireless location technologies to determine the locations of the mobile stations they serve. As a result, there is an increasing interest in developing location-based applications, i.e., applications that make use of mobile station location information. These location-based applications may simply track or monitor the locations of mobile stations, or they may provide information or services to mobile stations based on their locations. Such location-based applications may be internal to the wireless telecommunications network, or they may be third-party applications that obtain the locations of mobile stations from a location server or other entity in the wireless telecommunications network. For example, the Location Inter-operability Forum (LIF) has developed the \u201cMobile Location Protocol Specification\u201d (version 3.0.0 published on Jun. 6, 2002) to define an access method that allows applications to query a wireless network for location information.","One difficulty with expanding the use of location-based applications is that the process of obtaining mobile station locations for the applications may consume substantial network resources. In particular, wireless telecommunications networks typically initiate location determinations in order to respond to requests for location information from location-based applications. Thus, as the number of location-based applications requesting location information increases, and the number of mobile stations being located increases, the load on the wireless telecommunications network may correspondingly increase substantially.","Accordingly, there is a need to obtain and provide mobile station location information more efficiently.","In a first principal aspect, an exemplary embodiment of the present invention provides a method of managing location information relating to a mobile station. The mobile station is able to send receive communications via a wireless telecommunications network. In accordance with the method, the mobile station initiates a location determination session with the wireless telecommunications network. The wireless telecommunications network obtains a location of the mobile station as a result of the location determination session, and the location is stored in a location register of the wireless telecommunications network.","In a second principal aspect, an exemplary embodiment of the present invention provides a method of managing location information relating to a plurality of mobile stations. The mobile stations initiate location determination sessions at predetermined time intervals. The locations of the mobile stations are obtained as a result of the location determination sessions, and the locations are stored in at least one location register.","In a third principal aspect, an exemplary embodiment of the present invention provides a system for managing mobile stations location information. The system comprises a location gateway, a position determining entity (PDE) communicatively coupled to the location gateway, and at least one location register. The location gateway receives requests from mobile stations to initiate location determination sessions. In response, the location gateway determines whether permissions to locate the mobile stations have been obtained. The PDE obtains the locations of the mobile stations during the location determination sessions, and the at least one location register stores the locations.","In a fourth principal aspect, an exemplary embodiment of the present invention provides a method of providing location-based services in a wireless telecommunications network serving a plurality of mobile stations that have mobile station locations stored in at least one location register. In accordance with the method, a request that a specified service be provided to mobile stations located in a specified zone is received. Zone-located mobile stations are identified by determining which of the plurality of mobile stations are located in the specified zone, according to the mobile station locations stored in the at least one register. The specified service is provided to at least one of the zone-located mobile stations.","The present invention, in its preferred embodiments, provides a wireless telecommunications network with location information in advance of specific requests from location-based applications. In particular, the mobile stations themselves initiate location determination sessions with the wireless telecommunications network, as a result of which the wireless telecommunications network obtains the locations of the mobile stations. Preferably, the mobile stations initiate the location determination sessions at predetermined time intervals, such as every 15 minutes. However, the mobile stations may also be able to initiate location determination sessions at other times, i.e., \u201cspontaneously.\u201d","The locations obtained in this way are stored in one or more location registers in the wireless telecommunications network. Internal and third-party location-based applications may then use the location information stored in the location registers. In many cases, this stored location information is sufficient for the location-based applications, such as being recent enough, so that the network will not need to make additional location determinations to respond to requests from location-bases applications. In this way, network resources may be conserved.","Referring to the drawings,  is a simplified block diagram of an exemplary wireless telecommunications network  in which exemplary embodiments of the present invention may be employed. Wireless telecommunications network  includes a base transceiver station (BTS)  that provides a wireless coverage area within which BTS  may communicate with one or more mobile stations, such as mobile station , over an air interface. Mobile station  may be a wireless telephone, a wirelessly-equipped personal digital assistant (PDA), or other wireless communication device. The communications between BTS  and mobile station  may occur in a digital format, such as CDMA, TDMA, GSM, or 802.11x, or they may occur in an analog format, such as AMPS. A preferred wireless communications format is \u201cCDMA 2000,\u201d such as described in EIA\/TIA\/IS-2000 Series, Rev. A (published March 2000), which is incorporated herein by reference.","BTS  is controlled by a base station controller (BSC) , which, in turn, is controlled by a mobile switching center (MSC) . MSC  is connected to the public switched telephone network (PSTN)  and may use an out-of-band signaling system, such as Signaling System 7 (SS7) to route calls through PSTN . MSC  is also able to signal to a home location register (HLR)  and to a service control point (SCP) . This signaling may occur via one or more signal transfer points (STPs), such as STP . The signaling between MSC  and HLR  may conform to IS-41 specifications. A recent revision of the IS-41 specifications, ANSI\/TIA\/EIA-41-D-97, published in December 1997, is incorporated herein by reference. The signaling between MSC  and SCP  may conform to the specification \u201cWireless Intelligent Network,\u201d TIA\/EIA\/IS-771, published in July 1999, which is incorporated herein by reference. Other signaling protocols could be used, however. In this way, MSC , BSC , and BTS  may connect incoming calls from PSTN , which calls may originate from calling parties using landline telephones, mobile stations, or other communication devices, to mobile station . Similarly, MSC , BSC , and BTS  may connect calls originating from mobile station  to their destinations, via PSTN .","Mobile station  is also able to access a packet-switched network . Packet-switched network  may include one or more local area networks (LANs) and\/or one or more wide area network (WANs), such as the Internet. Packet-switched network  may route packets using a network protocol, such as the Transmission Control Protocol\/Internet Protocol (TCP\/IP).","To provide access to packet-switched network , BSC  may include a packet control function (PCF), and a packet data serving node (PDSN)  may connect BSC\/PCF  to packet-switched network . The communications between BSC\/PCF , MSC , and PDSN  may conform to \u201cthird generation\u201d (3G) specifications. Examples of such 3G specifications include \u201cWireless IP Network Standard,\u201d 3GPP2 P.S0001-A, dated Jul. 16, 2001 and \u201c3GPP2 Access Network Interfaces Interoperability Specification,\u201d 3GPP2 A.S0001-A, dated June 2001, which are incorporated herein by reference. Briefly stated, under these 3G specifications, when mobile station  requests packet data service, BSC\/PCF  may engage in signaling with MSC  and with PDSN  to authenticate and authorize mobile station  and to set up a data link with PDSN . If this process is successful, a point-to-point protocol (PPP) session is established between mobile station  and PDSN . PDSN  then acts as a network access server, providing mobile station  access to packet-switched network . In some cases, mobile station  may use the Wireless Application Protocol (WAP) for communications via packet-switched network , in which case the communications may occur through a WAP gateway .","Packet-switched network  may also carry communications related to the process of obtaining and providing location information relating to mobile stations, such as mobile station . In this regard, wireless telecommunications network  may include a position determination entity (PDE) . As described in more detail below, PDE  may be able to communicate with mobile stations, such as mobile station , in location determination sessions carried over packet-switched network , during which PDE  may determine the locations of the mobile stations. In some embodiments, PDF  may not be able to communicate using the TCP\/IP packet format used in packet-switched network . Accordingly, PDE  may be communicatively coupled to packet-switched network  via an interface application  that converts between the communication formats used by PDE  and packet-switched network .","As described in more detail below, the mobile station locations obtained in location determination sessions may be stored in one or more of location register(s) , which may be communicatively coupled to packet-switched network . In an exemplary embodiment, location register(s)  comprise a plurality of regional location registers. In particular, each regional location register may be associated with a geographic region, such as a region of the United States, and stores the locations of mobile stations that are located in its associated geographic region.","Wireless telecommunications network  may also include a location gateway , communicatively coupled to packet-switched network . Location gateway  may manage the processes of obtaining and utilizing mobile station location information in various ways. For example, location gateway  may be involved in setting up location determination sessions between mobile stations, such as mobile station , and PDE . For example, network  may be configured so that it does not locate a particular mobile station or provide location-based services to the mobile station unless the mobile station \u201copts in\u201d by granting permission to be located and\/or to receive specific location-based services. Accordingly, network  may include a permissions database  that stores information regarding the permissions that network  has obtained. Preferably, permissions database  is external to locations gateway , or wholly or partially internal to location gateway , so as to be accessible to location gateway . Before setting up a location determination session between a mobile station, such as mobile station , and PDE , location gateway  may query permissions database  in order to check whether network  has obtained permission to locate the mobile station.","Location gateway  may also serve as a gateway for applications seeking access to the location information contained in location register(s) . Such location-based applications may include internal applications  and\/or third-party applications . Internal applications  may be treated by wireless telecommunications network  as \u201ctrusted\u201d applications and may access location gateway , such as via packet-switched network , without network  applying security measures. In contrast, wireless telecommunications network  may require third-party applications  to access location gateway  via a wireless application manager , which, in turn, is communicatively coupled to location gateway  via packet-switched network . As described in more detail below, wireless application manager  may use a security service to authenticate and authorize third-party applications  before allowing them access to location gateway .","In addition to the foregoing, many other network elements may be communicatively coupled to packet-switched network  and may be able to communicate with mobile station  via packet-switched network .","Exemplary operations are described below with reference to the exemplary architecture of , with mobile station  as a representative of a plurality of mobile stations served by wireless telecommunications network . One exemplary operation relates to the process of obtaining the location of mobile stations, such as mobile station , and storing the location in location register(s) . As described in more detail below, the location of mobile station  may be obtained as a result of a location determination session. Another exemplary operation relates to the utilization of the location information stored in location register(s) , such as by internal applications  and\/or third-party applications .","a. Location Determination Sessions","In an exemplary embodiment, the process of obtaining the location of mobile station  begins when mobile station  initiates a location determination session with wireless telecommunications network . Mobile station  may initiate the location determination session autonomously. For example, mobile station  may be programmed to initiate a location determination session at predetermined time intervals, such as every 15 minutes.","Mobile station  may also initiate location determination sessions spontaneously. For example, an application running on mobile station  may cause it to initiate a location determination session at times other than the predetermined time intervals. Similarly, a network element in wireless telecommunications network , such as location gateway , may send a send a signal to mobile station  to cause it to initiate a location determination session at times other than the predetermined time intervals.","Wireless telecommunications network  obtains the location of mobile station  as a result of the location determination session initiated by mobile station . The specific manner in which the network  obtains the location will, in general, depend on the type of location-determining technique that is used and the specifics of the information that is exchanged during the location determination session. The communications between mobile station  and wireless telecommunications network  in the location determination session may conform to the specification \u201cPosition Determination Service Standard for Dual-Mode Spread Spectrum Systems,\u201d TIA\/EIA\/IS-801, dated Oct. 15, 1999, which is incorporated herein by reference. Other protocols may be used, however.","In a preferred embodiment, wireless assisted GPS is used to determine the location of mobile station . In the wireless assisted GPS approach, mobile station  includes a Global Positioning System (GPS) receiver but does not determine its location on its own. Instead, a location server in network , such as PDE , determines the location of mobile station , typically in terms of latitude and longitude, based at least in part on information provided by mobile station . For example, mobile station  may first send its approximation location, such as the cell or sector it is operating in, to PDE . Using this approximate location, PDE  determines what GPS satellites are in view and their Doppler offsets and then sends this information to mobile station  as \u201cassistance data.\u201d Mobile station  then uses this assistance data to acquire GPS signals from the GPS satellites and, thereby, obtains information, such as pseudoranges, from which its location may be calculated. Mobile station  sends the pseudoranges and\/or other location-related information to PDE . PDE  then calculates the location of mobile station , such as in terms of latitude and longitude, based on the information from mobile station  and, optionally, various corrections. In this way, wireless telecommunications network  obtains the location of mobile station  as a result of the location determination session.","However, other techniques for determining the location of mobile station  may be used. For example, mobile station  may use its GPS receiver to determine its location without network assistance. In that case, mobile station  may simply send to PDE  or other network element its calculated location, e.g., its latitude and longitude, during the location determination session. Alternatively, location technologies that do not rely on GPS may be used to determine the location of mobile station .","In a preferred approach, wireless assisted GPS is used, as described above. In addition, mobile station  preferably communicates with PDE  via packet-switched network , so as to avoid additional loading of the circuit-switched side of wireless telecommunications network . Thus, mobile station  may communicate with PDE  using IS-801 messages that are encapsulated in TCP\/IP packets.","Mobile station  may initiate a location determination session by first initiating a TCP\/IP session via PDSN . Mobile station  may then begin the location determination process by sending PDE  an IS-801 message encapsulated in TCP\/IP packets. For example, mobile station  may include a Qualcomm gpsOne-enabled chipset that generates the IS-801 message. The encapsulated IS-801 message may traverse PDSN , WAP gateway , and packet-switched network  and may be reviewed by location gateway  before reaching the PDE .","Location gateway  unwraps the IS-801 message and queries permissions database  to determine whether the sender has given permission to be located in this manner. If the sender has not given permission, location gateway  may return an \u201cask\u201d message to mobile station  that asks whether the user will give permission to being located. The user may respond to the \u201cask\u201d message, and mobile station  may transmit the response to location gateway . In addition, subscribers may be able to use their mobile stations to turn their permissions on and off as desired at other times.","If the appropriate permission is indicated, either in permissions database  or in an affirmative response to the \u201cask\u201d message, location gateway  encapsulates the IS-801 message into TCP\/IP packets and sends it to PDE . If PDE  is unable to use the packet format used by packet-switched network , then interface application  may unwrap the IS-801 message from the TCP\/IP packets and deliver the IS-801 message to PDE . Alternatively, location gateway  may be able to send the IS-801 message to PDE  directly.","After PDE  receives the initial IS-801 message, PDE  and mobile station  may continue to communicate as needed in order to complete the location determination. As noted above, the messaging required for PDE  to obtain the location of mobile station  will, in general, depend on the type of location technology that is used.","Once PDE  obtains the location of mobile station , the location, the mobile identification number (MIN) or other identifier of mobile station , and a timestamp are stored in location register(s) . In a preferred approach, PDE  sends the location to mobile station , and mobile station  sends its location, such as in an XML message, to the one of location register(s)  associated with its geographic region. Alternatively, PDE  may send the location to location register(s)  without going through mobile station .",{"@attributes":{"id":"p-0039","num":"0038"},"figref":"FIG. 2","b":["100","14","46","100","30","32","34","46"]},"In response to the message of step , location gateway  may check the permissions stored in permissions database  to determine whether a permission to locate mobile station  has been obtained. For example, location gateway  may send permissions database  a query that identifies mobile station , such as by MIN, as indicated by step . Permissions database  may return a response that includes the permissions, if any, associated with that MIN, as indicated by step . If the response of step  indicates an appropriate permission, then location gateway  forwards the session initiation message to PDE , as indicated by step . As noted above, the session initiation message of step  may reach PDE  via packet-switched network  and interface application .","PDE  and mobile station  may then continue to exchange messages so that PDE  obtains the location of mobile station . In the wireless assisted GPS approach, PDE  may send assistance data to mobile station , as indicated by step . Using this assistance data, mobile station  acquires location information from GPS satellites, such as pseudoranges, and sends the information to PDE , as indicated by step . PDE  then calculates the location of mobile station , such as in latitude and longitude, and sends the calculated location to mobile station , as indicated by step . Mobile station , in turn, sends location register(s)  a message that includes the calculated location of step , MIN or other identifier of mobile station , and a timestamp, as indicated by step . More particularly, mobile station  may send the message of step  to the one of location register(s)  associated with the geographic region in which mobile station is presently located, which location register then stores the relevant information contained in the message, e.g., the location, MIN, and timestamp.","b. Utilization of Location Information","One of the benefits of having the mobile stations initiate location determination sessions is that the mobile station locations are already stored in location register(s)  in advance of specific requests by location-based applications, such as internal applications  and third-party applications . Thus, when a location-based application needs mobile station locations, the application may, in many cases, use the information already stored in location register(s) , rather than requesting network  to use its resources to find mobile stations. More particularly, internal applications  may query location gateway , and third-party applications  may query location gateway  via wireless application manager , to make use of the location information stored in location register(s) . In this way, the location information stored in location register(s)  may be used to support broadcasting and multicasting technologies.","For example, the present invention may provide an application programming interface (API) that location-based applications can use to target multiple mobile stations located within a specified zone. Specifically, network  may support a Loc(Zone) API that location-based applications may use to request that a specified service be provided to multiple mobile stations located in a specified zone, based on the locations stored in location register(s) . The \u201czone\u201d may be defined in a number of different ways, such as by zip code, postal code, city, or latitude and longitude ranges. In many cases, the specified service may involve delivery of a message to the mobile stations located in the zone. The message may, for example, include text or graphics that a mobile station may be able to display or to save for later use. As other examples, the message may instruct the mobile station to generate a sound, vibrate, provide some other user-discernable indication, or perform some other function. In other cases, the specified service may relate to the process of setting up broadcast or multicast calls or to some other type of service.","When an application uses the Loc(Zone) API, location gateway  queries location register(s)  for an identification of the mobile stations, such as by MIN, that are located in the specified zone. If multiple regional location registers are used, then location gateway  may direct its query to the one or more regional location registers associated with geographic regions overlapping the specified zone. Location register(s)  may send location gateway  a response that indicates the MINs of the mobile stations currently located in the specified zone, based on the mobile station locations stored therein.","Location gateway  receives the MINs from location register(s)  and determines which of the identified mobile stations have granted permission for the service specified by the location-based application. For example, location gateway  may provide the MINs to permissions database , which may respond with the permissions associated with the MINs. In this way, location gateway  may determine which mobile stations in the specified zone have authorized receipt of the specified service. Location gateway  may then provide the specified service to the authorized mobile stations. For example, location gateway  may deliver a message to the authorized mobile stations using SMS, WAP push, e-mail, instant messaging, or other delivery method.","After the mobile stations receive the message or other service, the mobile stations may send acknowledgements back to location gateway . Location gateway  may then notify the requesting application when service delivery is complete. Location gateway  may also provide the requesting application with other service-related information, such as the number of mobile stations who received the message or service.",{"@attributes":{"id":"p-0048","num":"0047"},"figref":"FIG. 3","b":["52","200","52","54","200","54","52","54","46","202"]},"In response, location gateway  sends location register(s)  a query that includes the specified zone, as indicated by step . As indicated by step , location register(s)  responds with an identification, such as the MINs, of all of the mobile stations that are located in the specified zone, according to the mobile station locations stored in location register(s) . As indicated by step , location gateway  may then send permissions database  a query that includes the MINs or other mobile station identifications obtained in step . Permissions database  responds with the permissions associated with the MINs, as indicated by step .","From the permissions obtained in step , location gateway  determines which of the mobile stations identified in step  have authorized the specified service. Location gateway  may then provide the specified service to the authorized mobile stations. For example, location gateway  may send messages to the authorized mobile stations, such as mobile station , as indicated by step . The mobile stations, such as mobile station , may send back to location gateway  acknowledgements that they have received the messages, as indicated in step .","Location gateway  may then send a service complete message to wireless application manager , as indicated by step . The service complete message may include the number of messages sent to mobile stations located in the specified zone and\/or other information relating to the specified service. However, depending on the location-based application, the service complete message may or may not identify specific mobile stations, such as by MIN, that received the message or other service. Wireless application manager  then forwards the service complete message to third-party application , as indicated by step .","Preferably, the Loc(Zone) API uses the mobile station locations determined in advance and stored in location register(s) , such as in the manner shown in  and described above. However, the Loc(Zone) API may also be used when the locations of multiple mobile stations in the specified zone are determined in other ways.","Exemplary embodiments of the present invention have been described above. Those skilled in the art will understand, however, that changes and modifications may be made to these embodiments without departing from the true scope and spirit of the invention, which is defined by the claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 3"}]},"DETDESC":[{},{}]}
