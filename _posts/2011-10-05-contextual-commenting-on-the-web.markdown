---
title: Contextual commenting on the web
abstract: Techniques for contextual commenting on the web are disclosed. In some embodiments, contextual commenting on the web includes receiving a content selection for a comment within a corpus of content; determining a contextual based location within the corpus of content to map the contextual comment to a subset of content with the corpus of content; and storing the comment and the contextual based location within the corpus of content for the comment.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09141595&OS=09141595&RS=09141595
owner: Adobe Systems Incorporated
number: 09141595
owner_city: San Jose
owner_country: US
publication_date: 20111005
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","DETAILED DESCRIPTION"],"p":["Desktop content editing applications, such as Adobe\u00ae Acrobat\u00ae and Microsoft\u00ae Word, include functionality for allowing users to insert comments by marking a specified selection of content and applying a comment to it.","The invention can be implemented in numerous ways, including as a process; an apparatus; a system; a composition of matter; a computer program product embodied on a computer readable storage medium; and\/or a processor, such as a processor configured to execute instructions stored on and\/or provided by a memory coupled to the processor. In this specification, these implementations, or any other form that the invention may take, may be referred to as techniques. In general, the order of the steps of disclosed processes may be altered within the scope of the invention. Unless stated otherwise, a component such as a processor or a memory described as being configured to perform a task may be implemented as a general component that is temporarily configured to perform the task at a given time or a specific component that is manufactured to perform the task. As used herein, the term \u2018processor\u2019 refers to one or more devices, circuits, and\/or processing cores configured to process data, such as computer program instructions.","A detailed description of one or more embodiments of the invention is provided below along with accompanying figures that illustrate the principles of the invention. The invention is described in connection with such embodiments, but the invention is not limited to any embodiment. The scope of the invention is limited only by the claims and the invention encompasses numerous alternatives, modifications and equivalents. Numerous specific details are set forth in the following description in order to provide a thorough understanding of the invention. These details are provided for the purpose of example and the invention may be practiced according to the claims without some or all of these specific details. For the purpose of clarity, technical material that is known in the technical fields related to the invention has not been described in detail so that the invention is not unnecessarily obscured.","Desktop content editing applications, such as Adobe\u00ae Acrobat\u00ae and Microsoft\u00ae Word, include functionality for allowing users to insert comments by marking a specified selection of content and applying a comment to it.","What is needed are techniques for providing contextual commenting for web content, such as articles, web pages, blogs, and\/or other content available online, such as via the World Wide Web (e.g., web). For example, web content can change (e.g., as a result of dynamic content, such as dynamic script content, advertisements, and\/or modifications or updates to the web content by a web author), and, thus, techniques for efficiently and effectively maintaining contextual comments in association with the relevant subset of the web content (e.g., content selection for the comments) is needed.","Accordingly, techniques for contextual commenting on the web are disclosed. In some embodiments, contextual commenting on the web includes receiving a content selection for a comment within a corpus of content; determining a contextual based location within the corpus of content to map the contextual comment to the content selection; and storing the comment and the contextual based location within the corpus of content for the comment. In some embodiments, contextual commenting on the web further includes determining contextual comment location based on a CSS selector to map the contextual comment to the content selection; and updating the CSS selectors (e.g., if the web content has been modified); and storing the updated version of the CSS selector. In some embodiments, contextual commenting on the web further includes receiving a plurality of rankings on the comment; and determining a popularity ranking of the comment based on the received rankings.","In some embodiments, contextual commenting on the web includes sending a request for a web page to a web server; receiving the web page from the web server; receiving contextual comments associated with the web page from the web server; receiving executable code from the web server for mapping the contextual comments to selected content of the web page; and displaying the web page indicating the contextual comments shown as associated with the selected content.","In some embodiments, contextual commenting provides a fluent workflow that provides for a classic list of comments (e.g., listed at the bottom of each web page) as well as contextually associated and displayed comments within the web content. For example, links can be attached to the comments in a classic list and point to the context within the page that relate to the comments.","In some embodiments, contextual commenting on the web also includes techniques for monitoring and dynamically updating a display of the contextual comments based on peer or community input, such as to determine comment relevancy and\/or priority for display. For example, by using a rating and threaded commenting approach, contextual commenting can effectively indicate hot-spots of interest in web content and highlight them accordingly.","In some embodiments, as a mechanism to filter-out noise, techniques are provided herein to vary the prominence of user contributions based on various user inputs, such as voting input and\/or rankings. For example, using this approach, community-approved content can be more prominently displayed, and ousted comments can still be available but displayed in a secondary or less prominent manner. Accordingly, the various techniques described herein can assist comment moderators by factoring-in the natural reaction of the self-regulating community, which can identify less relevant or improper contributions (e.g., outdated input, incorrect input, irrelevant input, and\/or offensive or inappropriate input). Providing such comments in a meaningful and contextual display also provides a more compelling approach for users, rather than a traditional list of comments that is not prioritized or presented in a manner that is contextually linked or dynamically updated and presented based on community feedback.","Various techniques described herein can be applied to web content, such as articles posted on the web (e.g., World Wide Web), blog sites\/content available on the web, product documentation available on the web (e.g., online help and online community help resources), and\/or other forms of content available online. For example, these techniques can be applied to a wide range of community and multi-user applications. For instance, in the dynamic online social environment, user-to-user knowledge exchange can be very important, and users can obtain information from online articles as well as from peers who provide feedback and input to such articles. However, often due to the sheer volume of user contributions, some essential information can become muted by other, less relevant feedback, hidden in vast lists of comments.","Accordingly, using the techniques described herein that provide for pairing a valuable comment in context with the associated content selection, users can obtain a more streamlined information flow while reading such web content. As another example, this approach can promote contextual help, annotations, and corrections in web content in a dynamic online social environment. In some embodiments, techniques are provided for supporting social interaction patterns, such as voting on and replying to contextual comments, to provide an online document as a vibrant source of user-to-user information exchange.",{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 1","b":["150","160","170","170","180","150","170","180","160","170","180"]},"In particular, web content can change or be modified. For example, advertiser widgets can insert content based on text in the web content and\/or advertising links or other scripts on a web page can affect the web content (e.g., scripts and\/or plug-ins can allow users to click on an image or title or other content on the page to display new content). As a result, techniques are needed to ensure that the contextual commenting widget can support changing web content.","In some embodiments, the contextual commenting widget automatically adapts to changing web content, such as web content that undergoes layout structure changes. For example, the contextual commenting widget can adaptively associate comments to selected content without requiring a strict dependency to the hierarchical markup structure of the web content.","In contrast, approaches that solely rely on XPATH to decode and store a selection's location on a web page (e.g., in which an XPATH address is stored remotely and then resolved on the web page on subsequent web page loads as the XPATH points to the node containing a text selection) can fail to adapt to changing web page content in which the layout structure changes. In an XPATH structure, the type and position of each node in the structure is required to resolving the address of the targeted node. As shown in the below HTML markup to reference example, an XPATH representation to the highlighted \u201carticle\u201d node in this HTML markup would be \/div[@id=\u201ccontent\u201d]\/div\/p[1].",{"@attributes":{"id":"p-0033","num":"0032"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"147pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<div id=\u201ccontent\u201d>"]},{"entry":[{},"<div class=\u201cwrapper\u201d>"]},{"entry":[{},"<h2>Heading<\/h2>"]},{"entry":[{},"<p>text<\/p>"]},{"entry":[{},"<p class=\u201carticle\u201d>"]},{"entry":[{},"targeted text"]},{"entry":[{},"<\/p>"]},{"entry":[{},"<\/div>"]},{"entry":[{},"<\/div>"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"If the web content changes such that another wrapper node is introduced in the hierarchy, then the XPATH address is likely to be corrupted. For example, it is common in publishing systems to change templates (e.g., layout structures) from time to time. As a result, the content would not change, but the presentation layer would change. Altering the node structure is then likely to orphan such XPATH addresses that are stored remotely as they would not properly resolve. For example, inserting an additional wrapper node into the HTML structure will break the previously noted XPATH representation as shown in the below example by the \u201cinnerWrapper\u201d node.",{"@attributes":{"id":"p-0035","num":"0034"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<div id=\u2033content\u2033>"]},{"entry":[{},"<div class=\u2033wrapper\u2033>"]},{"entry":[{},"<div class=\u201dinnerWrapper\u201d>"]},{"entry":[{},"<h2>Heading<\/h2>"]},{"entry":[{},"<p>text<\/p>"]},{"entry":[{},"<p class=\u2033article\u2033>"]},{"entry":[{},"targeted text"]},{"entry":[{},"<\/p>"]},{"entry":[{},"<\/div>"]},{"entry":[{},"<\/div>"]},{"entry":[{},"<\/div>"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"Accordingly, new adaptive and flexible techniques are provided so that the contextual commenting widget can automatically adapt to changing web content, such as web content that undergoes layout structure changes. In some embodiments, the contextual commenting widget is based on CSS (Cascading Style Sheet) selectors coupled with regular expressions.","For example, CSS selectors can be used in web development to target nodes when applying visual styles. CSS selectors provide for a permissive and flexible mechanism in targeting complex structures. Also, a CSS selector is not dependent on the exact hierarchical structure of the web content and, thus, is more flexible and adaptive to changing web content in which the underlying HTML structure of the web content is modified.","For example, given the same HTML markup as provided in the above examples, in both cases, the CSS selector to target the \u201carticle\u201d node is as follows.","#content .article","In CSS selectors, a space between members signals a descendent hierarchical match, but not that it is necessarily directly descendent. In some embodiments, decoding the node hierarchy into a more complex CSS selector is provided to facilitate adaptive matching should the web content (e.g., HTML) structure change in the future (if nodes are inserted, changed, or deleted). Using this technique, the same CSS selector, written more specifically is equal in effect to the following:","div#content div.wrapper div.article","In some embodiments, when storing a comment on a text selection, the full CSS selector is used as an address, in which, for example, the current page's URL and the text selection are stored on a remote machine through a web service. The CSS selector address for a contextual comment can then be used on a first load of a web page with that contextual comment. If the CSS selector fails to resolve, members are dropped starting at the end of the CSS selector and the query is reapplied. Web browsers support this functionality with the \u201cquerySelectorAll( )\u201d JavaScript method. This process is performed recursively until the CSS selector is resolved to one of the targeted node's ancestor. Once this ancestor is determined, JavaScript is used to find its descendant nodes that contain the relevant text for the associated content selection. For example, with each text node found, the first five words can be matched from the text selection and stored remotely with the first five words in the current node. Regular expressions available in JavaScript can be used to perform this process. If a match is determined, then the starting node containing our selection has been identified. Next, the process can begin to start matching the last five words of the content selection with the last five words of the text node. If there is no match, the process continues looking through descendant nodes containing such text. This technique also supports the case in which the text selection spans multiple nodes. Once the end node for the text selection is identified, the contextual commenting widget can correctly apply a visual indicator (e.g., a highlighting, dashed underlining, and\/or other visual indicator) and the user's comment to the content selection.","Accordingly, using these techniques, contextual commenting is provided that is flexible and adaptive to ever-changing layouts and designs of web content such that the context of a user's comment, if still present within the web content, can be adaptively recalled. In addition, once the new node structure is correctly parsed, an updated CSS selector matching can be stored for future reuse thereby avoiding costly node parsing and text matching for other users. Thus, an optimization is provided in which updating of CSS selectors for changing web content using techniques described herein is performed at a first client, and the updated CSS selectors are sent to the contextual commenting web platform (e.g., web site serving the web content with contextual comments) for server side storage of the updated contextual mapping. As a result, subsequent client requests can receive the updated CSS selectors and need not perform the updating CSS selector processing.",{"@attributes":{"id":"p-0042","num":"0041"},"figref":"FIG. 2A","b":["200","202","204","206","208","208","202"]},{"@attributes":{"id":"p-0043","num":"0042"},"figref":"FIG. 2B","b":["250","252","254","200","208","256","200","206","258"]},"In some embodiments, the various techniques described herein facilitate a contextual commenting platform and solution based on HTML, CSS (e.g., CSS selectors), and JavaScript. In some embodiments, an in-context commenting workflow is provided (e.g., combining contextual based commenting with social web techniques, including, for example, comment threading, voting and ranking) with an efficient implementation that supports contextual commenting for changing Web pages using CSS selectors.","In some embodiments, contextual commenting using JavaScript as a client-side technology is provided. For example, a JavaScript file can be linked from a host web page where contextual commenting can be enabled, in which the host web page is one on which its administrator allows for such contextual commenting. Using this approach, there is no need for additional add-ons or plug-ins for end-users (e.g., as most common web browsers support JavaScript, if users have JavaScript settings enabled on their client browser).","In some embodiments, users select a portion of downloaded web content (e.g., text, images, etc.) with their mouse, keyboard, touch screen, and\/or other user interface input mechanism. In some embodiments, a contextual commenting widget is provided, which is associated with the downloaded web content and downloaded from the contextual commenting platform  to the client  along with the downloaded web content. For example, the contextual commenting widget can be implemented as a contextual commenting widget (e.g., implemented using a scripting language, such as JavaScript or another scripting language supported by a web browser). The JavaScript widget can attach custom behavior to the web content based on a JavaScript event. For example, this custom behavior can enable the user to comment on a content selection. Previous selections with comments made by other users can also be made visible on the web page by the executed\/interpreted contextual commenting widget.","In some embodiments, the contextual commenting widget (e.g., implemented using a scripting language, such as JavaScript, which can be downloaded to extend web browser functionality for interacting with downloaded web content) includes a form to enter comments, in which a user is presented with an input method to enter a comment for the current selection.","In some embodiments, the contextual commenting widget includes the ability to reply to comments (e.g., threaded commenting), in which users are able to post feedback on comments other than their own. For example, this can provide for threaded commenting on content selections.","In some embodiments, the contextual commenting widget includes a method of highlighting sections which have comments, in which content selections that have attached comments will be highlighted differently from the other text on the page. Based on the activity on a selection, such as multiple comments, the highlight can differ in intensity (e.g., by color or illustration). For example, this can signal a piece of content of special interest on the page.","In some embodiments, the contextual commenting widget includes the ability to view all comments attached to a selection, in context, in which users will be able to click on the highlighted selection in order to see all the comments attached to it. For example, this can happen without requiring a user to leave the current context of the page.","In some embodiments, the contextual commenting widget includes a method for rating comments, in which users will be able to express approval or disapproval of comments by voting on them. For example, voting can be supported using a binary voting system (e.g., yes or no voting input, or agree or disagree input, and\/or other input options) referring to their appreciation of the contextual comment.","In some embodiments, the contextual commenting widget includes a ranking algorithm for contextual comments, in which based on user ratings, the best comments will have greater prominence in a list of threaded comments. For example, this also means that highly negative rated comments can be excluded from the page.","In some embodiments, the contextual commenting widget further provides a classic list of comments, in which all comments posted on the page will be visible in a list on a separate area of the page. For example, the entries in this list can have links pointing to their appropriate context in the page.","In some embodiments, in-context comment moderation (e.g., approve\/reject comments) is provided. In some embodiments, the contextual commenting widget includes functionality to identify privileged users (e.g., via a login based on login credentials and\/or using various other identity verification related techniques), as well as to enable such privileged users (e.g., when logged in) to moderate contextual comments, for example, by approving, rejecting, and\/or editing existing comments (e.g., in order to completely remove certain comments pursuant to editorial standards, legal standards, and\/or other reasons\/standards).",{"@attributes":{"id":"p-0055","num":"0054"},"figref":"FIG. 3","b":["300","302","304","302"]},{"@attributes":{"id":"p-0056","num":"0055"},"figref":"FIG. 4","b":["400","402","404","402","404","404"]},{"@attributes":{"id":"p-0057","num":"0056"},"figref":"FIG. 5","b":["500","502","502","502"]},{"@attributes":{"id":"p-0058","num":"0057"},"figref":"FIG. 6","b":["600","602","602","604","604"]},{"@attributes":{"id":"p-0059","num":"0058"},"figref":"FIG. 7","b":["700","702","702"]},{"@attributes":{"id":"p-0060","num":"0059"},"figref":"FIG. 8","b":["800","802","802"]},{"@attributes":{"id":"p-0061","num":"0060"},"figref":"FIG. 9","b":["900","902","904","906"]},"Various techniques can be used to rank contextual comments based on a score. In some embodiments, a score is calculated by passing the ratings for a comment through to the following formula: [(U\u2212D)\/(U+D)]*log(U+D) in which U=the number of \u201cup\u201d votes on a comment and D=the number of \u201cdown\u201d votes on a comment. The first term [(U\u2212D)\/(U+D)] measures the quality of the comment from the perspective of users' votes. The second term log(U+D) is used to differentiate between more or less active comment threads.",{"@attributes":{"id":"p-0063","num":"0062"},"figref":["FIG. 10","FIG. 9"],"b":["1000","1002","1002"]},{"@attributes":{"id":"p-0064","num":"0063"},"figref":"FIG. 11","b":["1102","1104","1106"]},{"@attributes":{"id":"p-0065","num":"0064"},"figref":"FIG. 12","b":["1202","1204","1206","1208"]},{"@attributes":{"id":"p-0066","num":"0065"},"figref":["FIG. 13","FIG. 13","FIGS. 1 through 12"],"b":["100","102","102","102","100","110","102","118","102"]},"Processor  is coupled bidirectionally with memory , which can include a first primary storage, typically a random access memory (RAM), and a second primary storage area, typically a read-only memory (ROM). As is well known in the art, primary storage can be used as a general storage area and as scratch-pad memory, and can also be used to store input data and processed data. Primary storage can also store programming instructions and data, in the form of data objects and text objects, in addition to other data and instructions for processes operating on processor . Also as well known in the art, primary storage typically includes basic operating instructions, program code, data and objects used by the processor  to perform its functions (e.g., programmed instructions). For example, primary storage devices  can include any suitable non-transitory computer readable storage media, described below, depending on whether, for example, data access needs to be bidirectional or unidirectional. For example, processor  can also directly and very rapidly retrieve and store frequently needed data in a cache memory (not shown).","A removable mass storage device  provides additional data storage capacity for the computer system , and is coupled either bidirectionally (read\/write) or unidirectionally (read only) to processor . For example, storage  can also include computer-readable media such as magnetic tape, flash memory, PC cards, portable mass storage devices, holographic storage devices, and other storage devices. A fixed mass storage  can also, for example, provide additional data storage capacity. The most common example of mass storage  is a hard disk drive. Mass storage ,  generally store additional programming instructions, data, and the like that typically are not in active use by the processor . It will be appreciated that the information retained within mass storage ,  can be incorporated, if needed, in standard fashion as part of primary storage  (e.g., RAM) as virtual memory.","In addition to providing processor  access to storage subsystems, bus  can be used to provide access to other subsystems and devices as well. As shown, these can include a display monitor , a network interface , a keyboard , and a pointing device , as well as an auxiliary input\/output device interface, a sound card, speakers, and other subsystems, as needed. For example, the pointing device  can be a mouse, stylus, track ball, or tablet, and is useful for interacting with a graphical user interface.","The network interface  allows processor  to be coupled to another computer, computer network, or telecommunications network using a network connection, as shown. For example, through the network interface , the processor  can receive information (e.g., data objects or program instructions), from another network, or output information to another network in the course of performing method\/process steps. Information, often represented as a sequence of instructions to be executed on a processor, can be received from and outputted to another network. An interface card or similar device and appropriate software implemented by (e.g., executed\/performed on) processor  can be used to connect the computer system  to an external network and transfer data according to standard protocols. For example, various process embodiments disclosed herein can be executed on processor , or can be performed across a network such as the Internet, intranet networks, or local area networks, in conjunction with a remote processor that shares a portion of the processing. Additional mass storage devices (not shown) can also be connected to processor  through network interface .","An auxiliary I\/O device interface (not shown) can be used in conjunction with computer system . The auxiliary I\/O device interface can include general and customized interfaces that allow the processor  to send and, more typically, receive data from other devices such as microphones, touch sensitive displays, transducer card readers, tape readers, voice or handwriting recognizers, biometric readers, cameras, portable mass storage devices, and other computers.","In addition, various embodiments disclosed herein further relate to computer storage products with a computer readable medium that includes program code for performing various computer-implemented operations. The computer readable medium is any data storage device that can store data which can thereafter be read by a computer system. Examples of computer readable media include, but are not limited to: all the media mentioned above, magnetic media such as hard disks, floppy disks, and magnetic tape, optical media such as CD-ROM disks, magneto-optical media such as optical disks, and specially configured hardware devices, such as application-specific integrated circuits (ASICs), programmable logic devices (PLDs), and ROM and RAM devices. Examples of program code include both machine code, as produced, for example, by a compiler, or files containing higher level code (e.g., script) that can be executed using an interpreter.","The computer system shown in  is but an example of a computer system suitable for use with the various embodiments disclosed herein. Other computer systems suitable for such use can include additional or fewer subsystems. In addition, bus  is illustrative of any interconnection scheme serving to link the subsystems. Other computer architectures having different configurations of subsystems can also be utilized (e.g., server devices, appliances with hardware configured for specific functions, such as a web server or an application server, and\/or various other types of computing devices that can execute various operating systems and\/or virtual machine software techniques).","Although the foregoing embodiments have been described in some detail for purposes of clarity of understanding, the invention is not limited to the details provided. There are many alternative ways of implementing the invention. The disclosed embodiments are illustrative and not restrictive."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Various embodiments of the invention are disclosed in the following detailed description and the accompanying drawings.",{"@attributes":{"id":"p-0004","num":"0003"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0005","num":"0004"},"figref":"FIG. 2A"},{"@attributes":{"id":"p-0006","num":"0005"},"figref":"FIG. 2B"},{"@attributes":{"id":"p-0007","num":"0006"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0008","num":"0007"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 13"}]},"DETDESC":[{},{}]}
