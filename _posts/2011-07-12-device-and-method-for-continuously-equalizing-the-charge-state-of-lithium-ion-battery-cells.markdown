---
title: Device and method for continuously equalizing the charge state of lithium ion battery cells
abstract: A method of equalizing charge states of individual cells in a battery includes measuring a previous cell voltage for each cell, measuring a previous shunt current for each cell, calculating, based on the previous cell voltage and the previous shunt current, an adjusted cell voltage for each cell, determining a lowest adjusted cell voltage from among the calculated adjusted cell voltages, and calculating a new shunt current for each cell.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08933666&OS=08933666&RS=08933666
owner: The Johns Hopkins University
number: 08933666
owner_city: Baltimore
owner_country: US
publication_date: 20110712
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","STATEMENT OF GOVERNMENTAL INTEREST","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION"],"p":["This application claims priority to and the benefit of prior-filed U.S. Provisional Application No. 61\/363,315, filed Jul. 12, 2010, the content of which is herein incorporated by reference in its entirety.","This invention was made with U.S. Government support under U.S. National Aeronautics and Space Administration (NASA) contract number NNN06AA01C. The U.S. Government has certain rights in the invention.","1. Field of the Invention","The present invention generally relates to a device that continuously equalizes the charge state of a battery, e.g., a lithium ion battery, and a control algorithm implemented using the device.","2. Description of the Related Art","There is a continual need for miniaturization of spacecraft electronics to reduce mass, power and assembly cost. While this need extends to all spacecraft systems, substantial benefits can be had by using common spacecraft subsystems that can be easily reused among multiple spacecraft with a minimum amount of reconfiguration. Once such subsystem is lithium ion (Li-Ion) battery charger. However, Li-Ion battery cells, even from a common production lot, do not have perfectly matched parameters such as capacity and cell impedance, for example. As a result, individual cell charge states diverge, especially over multiple charge cycles, and, since the overall capacity of the Li-Ion battery is limited by the cell having the lowest charge state, significant portions of the battery capacity are forfeited. Traditional end-of-charge cell balancing techniques are based on reacting to the cell with the highest potential, resulting in a majority of the cells not being at the maximum charge state. Thus, traditional systems cannot simultaneously establish maximum charge states for all cells in a battery.","Accordingly, there is an ongoing need for improved battery charging devices and control algorithms for the same.","In accordance with embodiments of the present invention, a method of equalizing charge states of individual cells in a battery includes measuring a previous cell voltage for each cell, measuring a previous shunt current for each cell, calculating, based on the previous cell voltage and the previous shunt current, an adjusted cell voltage for each cell, determining a lowest adjusted cell voltage from among the calculated adjusted cell voltages, and calculating a new shunt current for each cell. In accordance with another embodiment of the present invention, a device includes control circuitry for equalizing charge states of individual cells in a battery. The control circuitry includes a part that measures a previous cell voltage for each cell, a part that measures a previous shunt current for each cell, a part that calculates, based on the previous cell voltage and the previous shunt current, an adjusted cell voltage for each cell, a part that determines a lowest adjusted cell voltage from among the calculated adjusted cell voltages, and a part that calculates a new shunt current for each cell.","In yet another embodiment, a system for equalizing battery cell charge states includes: a battery having first through eighth cells; a first control circuit corresponding to the first and second cells; a second control circuit corresponding to the third through fifth cells; and a third control circuit corresponding to the sixth through eighth cells. Each of the first through third control circuits includes: a voltage sense amplifier, which measures a previous cell voltage for each of the corresponding cells; a current sense amplifier, which measures a previous shunt current for each of the corresponding cells; a part, which calculates, based on the previous cell voltage and the previous shunt current, an adjusted cell voltage for each of the corresponding cells; a part that determines a lowest adjusted cell voltage from among the calculated adjusted cell voltages; and a part which calculates a new shunt current for each of the corresponding cells. The part that calculates the new shunt current for each of the corresponding cells sets the new shunt current for the cell having the lowest adjusted cell voltage to zero, and calculates new shunt currents for each of the remaining cells according to the following equation:\n\n=(\u0394)()\/()(), where\n\n","Other embodiments, such as apparatus, system, and method, for example, will become apparent from the following detailed description.","One example aspect of the present invention addresses cell divergence in a lithium ion (Li-Ion) battery. More particularly, one or more embodiments include a device and method, which will herein be referred to as continuous cell equalization, in which a very small current is continuously shunted around a cell (or cells) of the Li-Ion battery that have diverged from the other cell(s). The divergence is determined, for example, based on instantaneous cell voltage data from the lowest charge state cell deviating by more than a predetermined threshold. In continuous cell equalization, cell charge states are continuously matched throughout the charging process, and all cells are \u201cforced\u201d to simultaneously approach the maximum charge state. Battery stack charge current is reduced when the cells simultaneously reach maximum voltage. Accordingly, the battery charge controller, which controls the charging process based on battery (not cell) parameters, charges the battery to full capacity. As compared to conventional approaches, the continuous cell equalization approach more effectively matches the charge state of all cells, while optimizing the effective capacity of the battery. Thus, the present invention provides substantial battery mass\/weight savings as compared to conventional approaches.",{"@attributes":{"id":"p-0020","num":"0026"},"figref":["FIG. 1","FIG. 1","FIG. 1"],"b":["110","110","112","114","112","114"]},"Parts of the continuous cell equalization device  include, but are not limited to, a state machine , which itself includes a microprocessor (\u03bcP)  connected to a programmable read-only memory (PROM) , a random access memory (RAM) , and a decoder (DEC) , and an interface (not shown) which allows one or more connections to\/from external components, including, but not limited to, spacecraft systems\/subsystems, higher-level battery control systems (e.g., to coordinate\/control a plurality of devices  and\/or batteries ), and override functions, etc. Although the state machine  shown in  includes the microprocessor , the PROM , the RAM , and the DEC , it will be understood that additional example embodiments are not limited thereto. Instead, the state machine  may include, for example, other (or additional) hardware and\/or software components, such as a field programmable gate array (FPGA), an application specific integrated circuit (ASIC), etc.","In a preferred embodiment, the microprocessor  receives, via an analog-to-digital converter (A\/D) , multiplexed voltage (V), current (I), and temperature (T) signals from the battery cells . In a preferred embodiment, individual voltage, current, and temperature multiplexers (MUX) , , and , respectively, provide the aforementioned signals to another multiplexer , e.g., a general multiplexer , which provides a multiplexed signal to the A\/D .","As shown in , one or more temperature sensors  measure and provide the temperature signals, based on temperature(s) associated with the battery, such as battery cell stack temperature, for example, and input the temperature signals to the temperature multiplexer . In one embodiment, a single temperature sensor  may be used or, alternatively, any number of temperature sensors  may be included. In a preferred embodiment, eight (8) temperature sensors  correspond to eight (8) cells , but it will be noted that the number and correspondence of the temperature sensors  is not limited to the foregoing.","The voltage and current signals are provided to their respective multiplexers (, ) from each of the cell assemblies , as will be described in greater detail below with reference to . Specifically, and as shown in the embodiment illustrated in , for example, for a battery  with N=8 cells, the 8cell assembly  provides current and voltage signals Iand V, respectively, to the corresponding MUX. A voltage Vthat corresponds to a total stack current, e.g., current that flows through the stack of cells , is sensed across a resistor R, as shown in .",{"@attributes":{"id":"p-0025","num":"0031"},"figref":["FIGS. 2-4","FIG. 1","FIG. 1","FIG. 2","FIG. 3","FIG. 4"],"b":["114","112"],"sup":["st ","nd ","rd ","th ","th ","th "]},"Referring now to , a cell assembly , such as might be used for the 1and 2cells of an eight cell Li-Ion battery, for example, includes a current sense amplifier , a cell voltage sense amplifier , a shunt current control amplifier , a shunt current pass element , a shunt resistance , and a digital-to-analog converter (D\/A) . The current sense amplifier , the cell voltage sense amplifier , and the shunt current control amplifier  are supplied with a voltage VL, which is an upper supply voltage. In one embodiment the voltage VL is picked off of a battery voltage V(BATT), as shown in , but additional embodiments are not limited thereto. Together with a lower supply voltage VG (), which may be a voltage above a ground potential, the current sense amplifier , the cell voltage sense amplifier , and the shunt current control amplifier  are operated within appropriate voltage operating ranges.","The current sense amplifier  monitors and controls the instantaneous current being shunted around an individual battery cell  to match the desired value from the microcontroller  (), as will be described in greater detail below. The cell voltage sense amplifier  monitors instantaneous individual battery cell voltage. The shunt current pass element  and the shunt resistance , in conjunction with the current sense amplifier  and the shunt current control amplifier , control the current being shunted around an individual battery cell to match the desired value from the microcontroller . It will be noted that various additional components, e.g., resistors R, capacitors C, diodes D, operational amplifiers (OPAMPS), and other components\/connections are also shown in  but, for purposes of brevity and clarity, will not be fully described herein.","In a preferred embodiment, the D\/A  receives, from the microprocessor  (), a new shunt current signal (ISNn, described in further detail below), which is supplied to the shunt current control amplifier . In one embodiment, the shunt current control amplifier  is an OPAMP, such as an Analog Devices AD820, but additional embodiments are not limited thereto.","The shunt current control amplifier  supplies a signal, optionally via a rectifier\/diode, to the shunt current pass element , which may be a 2N5335 NPN bipolar junction transistor (BJT), although alternative embodiments are not limited to any such device model (or type of device, for that matter). Based on the signal supplied from the shunt current control amplifier , the shunt current pass element  controls the shunt current ISN (described below) that bypasses the cell through the shunt resistance . As a result, the charge states of all cells are balanced, as described below, and cell divergence is substantially reduced and\/or effectively eliminated.","Still referring to , the current sense amplifier  determines, e.g., senses or measures, the shunt current of the cell, and provides the cell's previous shunt current ISNp, described below, to the microprocessor  via multiplexers (, ) and A\/D  shown in . On the other hand, the voltage sense amplifier  determines, e.g., senses, based on a voltage VNS+ at the top of a sense line (not shown) and a voltage VNS\u2212 at the bottom of the sense line, the cell's previous (unadjusted) cell voltage VNp, described below, and provides the previous (unadjusted) cell voltage VNp to the microprocessor  via multiplexers (, ) and A\/D  ().","Referring now to , a cell assembly , such as might be used for the 3through 5cells of an eight cell Li-Ion battery, for example, includes a current sense amplifier , a voltage sense amplifier , a shunt current control amplifier , a shunt current pass element , a shunt resistance , and a digital-to-analog converter (D\/A) . The same or like components from  that are shown in  are substantially similar, and any repetitive detailed description thereof will hereinafter be simplified or omitted.","In a preferred embodiment, the D\/A  receives, from the microprocessor  (), a new shunt current signal ISNn, described below, supplied to the shunt current control amplifier . The shunt current control amplifier  supplies a signal, optionally via a rectifier\/diode, to the shunt current pass element . Based on the signal supplied from the shunt current control amplifier , the shunt current pass element  controls the shunt current ISN (described below) that bypasses the cell through the shunt resistance . As a result, the charge state of all cells  () are balanced and, as described below, cell divergence is substantially reduced and\/or effectively eliminated.","Still referring to , the current sense amplifier  determines the shunt current of the cell, and provides the cell's previous shunt current ISNp to the microprocessor  via multiplexers (, ) and A\/D  (best shown in ). In addition, the voltage sense amplifier  determines, based on a voltage VNS+ at the top of a sense line (not shown) and a voltage VNS\u2212 at the bottom of the sense line, the cell's previous (unadjusted) cell voltage VNp, described below, and provides the previous (unadjusted) cell voltage VNp to the microprocessor  via multiplexers (, ) and A\/D  ().","Referring now to , a cell assembly , such as might be used for the 6through 8cells of an eight cell Li-Ion battery, for example, includes a current sense amplifier , a voltage sense amplifier , a shunt current control amplifier , a shunt current pass element , a shunt resistance , and a digital-to-analog converter (D\/A) . The same or like components from  that are shown in  are substantially similar, and any repetitive detailed description thereof will hereinafter be simplified or omitted.","In a preferred embodiment, the D\/A  receives, from the microprocessor  (), a new shunt current signal (ISNn), which is thereafter supplied to the shunt current control amplifier . The shunt current control amplifier  supplies a signal, optionally via a rectifier\/diode, to the shunt current pass element . Based on the signal supplied from the shunt current control amplifier , the shunt current pass element  controls the shunt current ISN (described below) that bypasses the cell through the shunt resistance . As a result, the charge states of all cells are balanced, as described below, and cell divergence is substantially reduced and\/or effectively eliminated.","Still referring to , the current sense amplifier  determines the shunt current of the cell, and provides the cell's previous shunt current ISNp, described below, to the microprocessor  via multiplexers (, ) and A\/D , as shown in . On the other hand, the voltage sense amplifier  determines, based on a voltage VNS+ at the top of a sense line (not shown) and a voltage VNS\u2212 at the bottom of the sense line, the cell's previous (unadjusted) cell voltage VNp, described below, and provides the previous (unadjusted) cell voltage VNp to the microprocessor  via multiplexers (, ) and A\/D  ().","As previously described, one or more temperature (T) sensors  () provide temperature information, e.g., battery cell stack temperature, to the microprocessor , via multiplexers (, ) and A\/D . Using the temperature information, as well as the signals from the cell assemblies (, , ) described above with reference to , the microprocessor  () determines the charge state of each of the eight cells, as new shunt currents values for each of the eight cells, and supplies a signal to each of the eight cells such that each cell's shunt current is adjusted so that all cells simultaneously reach maximum voltage, i.e., the charge states of the cells converge in a controlled manner, regardless of the initial charge state of any given individual cell.",{"@attributes":{"id":"p-0038","num":"0044"},"figref":["FIG. 5","FIG. 1"],"b":["510","510","515","520","525","530","535","525","530"],"br":{},"in-line-formulae":[{},{}],"i":["VNpi=VNp","ZTp","ISNp"]},"VNpi is the previous voltage on cell N, adjusted for the previous cell N shunt current,","VNp is the unadjusted previous voltage on cell N,","ZTp is the nominal cell impedance at temperature Tp, and","ISNp is the previous shunt current for cell N.","After the adjusted cell voltage VNpi is calculated in step , the lowest adjusted cell voltage VLpi of all of the N cells is determined in step , and, in step , the shunt current ISN is set to zero (0) for the cell having the lowest adjusted cell voltage VLpi. Optionally, to prevent oscillations or \u201chunting\u201d for cell(s) very close to VLpi, a deadband D can be set, such as in 0.1 volt increments, for example, such that ISNn is set to zero (0) for all cells having VNpi less than or equal to VLpi+d.","In step , new shunt currents ISNn are calculated for the remaining (N\u22121) cells. Specifically, the new shunt currents ISNn are calculated according to:\n\n=(\u0394)()\/()(), where\n","ISNn is the new shunt current,","\u0394CTp is the difference between the nominal battery capacity at charge termination and the nominal battery capacity at discharge termination at temperature Tp,","VNpi is the adjusted cell voltage,","VLpi is the lowest adjusted cell voltage from among the adjusted cell voltages of each of the N cells,","B is the target time to substantially fully equalize the charge states,","VH is the cell charge voltage limit, and","VL is the cell discharge voltage limit.","In step , signals corresponding to the new shunt currents ISNn are sent to the respective cell assemblies  () and, accordingly, each cell's shunt current is adjusted such that all cells simultaneously reach maximum voltage, i.e., the charge states of the cells converge in a controlled manner, regardless of the initial charge state of any given individual cell. This aspect is shown in , which is a graph of cell voltages, in volts (V), versus time, in hours, taken from a device and algorithm according to the present invention for an eight cell Li-Ion battery charge cycle. More particularly, as can be seen in , the individual cell voltages, which are initially in mismatched charge states, converge in a controlled manner during charging of the battery.","Referring again to , in step , it is determined whether all cells are at their charge limit, i.e., whether all adjusted cell voltages VNpi are equal to the respective associated cell charge voltage limit VH. If not, the determination of cell charge states  begins again; otherwise, all shunt currents ISN are set to zero (0) in step , and constant voltage charge mode is entered (step ).","In constant voltage charge mode , also referred to as current taper mode, a voltage is applied to the battery, instead of the charge current, such that the battery is \u201ctopped off,\u201d e.g., is fully charged. More particularly, when all cells reach VH, the charge current is turned off and, instead, a voltage, which is greater than the battery voltage V(BATT), is applied to the cell stack such that the cells pull a battery stack current, which is limited to a predetermined value, such as \u0394CTp\/100, for example. When the battery stack current reaches a predetermined lower value (due to a decrease in voltage difference as the stack fully charges), e.g., \u0394CTp\/500, max battery charge current is set to zero (0), and the battery is considered fully charged.","It will be understood that various modifications may be made to the embodiments disclosed herein. Therefore, the above description should not be construed as limiting the scope of the invention, but merely as illustrating exemplifications of preferred embodiments. Those skilled in the art will readily envision other modifications within the scope and spirit of the present invention as defined by the appended claims."],"GOVINT":[{},{}],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The above and other features and advantages will become more readily apparent from the detailed description of the invention, accompanied by the drawings, in which:",{"@attributes":{"id":"p-0013","num":"0019"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0014","num":"0020"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0015","num":"0021"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0016","num":"0022"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0017","num":"0023"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0018","num":"0024"},"figref":"FIG. 6"}]},"DETDESC":[{},{}]}
