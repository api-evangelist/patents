---
title: Method and system for providing power management for an integrated gigabit ethernet controller
abstract: Certain aspects of a system for controlling power for a network interface controller device may comprise a precision voltage comparator that may instantaneously detect ramp up of a main voltage corresponding to a main voltage source in order to control the network interface controller device. A power monitor may detect when a threshold voltage of the main voltage is reached during the ramp up. A main voltage source switch and an auxiliary voltage source switch may switch an output from an auxiliary voltage to the main voltage source without the switches being simultaneously on. The power monitor may determine whether the main voltage is ramping up in excess of a determined rate and if so, may decrease a rate at which the main voltage ramps up. A current limiter and/or the power monitor may monitor and limit an inrush current caused during main voltage ramp up.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07689852&OS=07689852&RS=07689852
owner: 
number: 07689852
owner_city: 
owner_country: 
publication_date: 20040708
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS\/INCORPORATION BY REFERENCE","FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","BRIEF SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE INVENTION"],"p":["This application makes reference to, claims priority to and claims the benefit of U.S. Provisional Application Ser. No. 60\/502,790 filed on Sep. 12, 2003.","This application also makes reference to U.S. application Ser. No. 10\/887,061 filed on Jul. 8, 2004.","The above stated application is incorporated herein by reference in its entirety.","Certain embodiments of the invention relate to power management for an integrated circuit. More specifically, certain embodiments of the invention relate to a method and system for providing power management in an integrated gigabit Ethernet controller.","As the demand for higher data rates and bandwidth requirements continues to increase, various technologies facilitating transmission rates of the order of about 10 Gigabits and higher are being developed for high-speed network applications. High-speed digital communication networks over copper and optical fiber are typically used in many network communication and digital storage applications. Ethernet and Fiber Channel, for example, are two widely used communication protocols which continue to evolve in response to an ever increasing need for higher bandwidth in digital communication systems. Accordingly, there is a need to develop various Gigabit networking devices that may facilitate, for example, high-speed serial data applications. The IEEE P802.3ae draft 5 specification describes the physical layer requirements for 10 Gigabit Ethernet applications and is incorporated herein by reference in its entirety.","The Open Systems Interconnection (OSI) model (ISO standard) was developed to establish standardization for linking heterogeneous computer and communication systems. It describes the flow of information from a software application of a first computer system to a software application of a second computer system through a network medium. The OSI model has seven distinct functional layers including Layer 7: an application layer; Layer 6: a presentation layer; Layer 5: a session layer; Layer 4: a transport layer; Layer 3: a network layer; Layer 2: a data link layer; and Layer 1: a physical layer. Importantly, each OSI layer describes certain tasks which are necessary for facilitating the transfer of information through interfacing layers and ultimately through the network. Notwithstanding, the OSI model does not describe any particular implementation of the various layers.","OSI layers 1 to 4 generally handle network control and data transmission and reception. Layers 5 to 7 may be adapted to handle various application issues. Specific functions of each layer may vary depending on factors such as protocol and interface requirements or specifications that are necessary for implementation of a particular layer. For example, the Ethernet protocol may provide collision detection and carrier sensing in the data link layer. Layer 1, the physical layer, is responsible for handling all electrical, optical, opto-electrical and mechanical requirements for interfacing to the communication media. Notably, the physical layer may facilitate the transfer of electrical signals representing an information bit stream. The physical layer may also provide services such as, encoding, decoding, synchronization, clock data recovery, and transmission and reception of bit streams. In high bandwidth applications having transmission speeds of the order of Gigabits, high-speed electrical, optical and\/or electro-optical transceivers may be used to implement this layer.","The proliferation of physical layer devices designed to meet the needs of high speed communication applications will, without a doubt, give rise to new challenges. One challenge pertains to the development of circuits that may be adapted to support the high speed communications devices having optimized power consumption. In this regard, various attempts have been made to provide standardized power management procedures for various network devices and\/or applications. To ensure proper operation of these high speed communication devices, power control or power management circuits are required for efficiently transitioning the device between various processing states.","The network driver interface specification (NDIS) defines a standardized network application programming interface (API) that provides standardized power management procedures for network interface cards (NICs). In this regard, the NDIS provides a medium access control (MAC) driver that encapsulates or wraps the complexity and details of a network interface card and provides a common application programming interface for accessing various functions of a network interface card. For example, NDIS provides a standardized API that may be used to access Ethernet-based network interface cards.","NDIS also provides a suite or library of functions, which may be adapted as tools that may be used to access the functionality of a network interface card. The suite or library of functions provided by the NDIS may be utilized by various upper level protocol drivers, thereby reducing the complexity of these upper level drivers. For example, a MAC layer driver or even transmission control protocol\/internet protocol (TCP\/IP) driver may utilize one or more functions of NDIS suite or library of functions.",{"@attributes":{"id":"p-0012","num":"0011"},"figref":["FIG. 1","FIG. 1"],"b":["100","102","104","106","108","102","102"]},"The protocol stack block  may be adapted to provide a layered architecture that defines particular functionality and services offered by each layer in the architecture. Specifically, the protocol stack block  may be consistent with the layered architecture of the OSI.","The driver block  may include a hardware specific driver block  and\/or a miniport driver block . In general, the hardware specific driver block  may be adapted to provide platform or hardware specific functionality. In this regard, the use of the hardware specific driver block  by non-native applications may be limited and in some instances, some non-native applications may not have the capability to interface with the hardware specific driver block . The latter may be particularly true in instances where the hardware specific driver block  is proprietary. In general, the miniport driver block  may be adapted to provide platform independent functionality such as wrapper functions. In this regard, the miniport driver block  may conform to certain standards and may be adapted to provide universal functions, which may be utilized by both native and non-native applications.","The application block  may include one or more software applications and\/or functions that may be adapted to handle the communication of data received and\/or transmitted by the hardware block . Applications in the application block  may be adapted to utilize the standardized wrapper functions provided by the miniport driver block  and\/or the proprietary drivers provided by the hardware specific driver block . Applications in the application block  may utilize various functions provided by either of the hardware specific driver block  or the miniport driver block  to handle connections, process messages received by the hardware block  and messages to be transmitted by the hardware block .","For power management purposes, a network controller, such as an Ethernet medium access control (MAC) device, may be required to generate a power management event upon the receipt of certain network events. Those events may include, but are not limited to, network status changes, a management request, receipt of a network wakeup frame and receipt of a magic packet. In general, a wakeup frame may be any specified frame, also called an interested frame, that may be used to wakeup a system.","Particularly, a network wakeup event may be a hardware or software generated request, which may be used to initiate a change in power state of a system or system component or entity. For example, a network wakeup event may be utilized for changing the state of a system and\/or device from a lowered powered state to a fully powered state, or vice versa. In general, network wakeup events may be generated external to a network. Exemplary network wakeup frames may include address resolution protocol (ARP) broadcast frames, directed uni-cast frames and NetBIOS broadcast frames.","In some networking applications, depending on the network vendor, some software and\/or hardware applications may require the use of a network device capable of recognizing wakeup frames based on pattern matches that may occur anywhere in the first 128 bytes of the frame. Such an implementation may add excessive cost to the hardware required for the network interface controller and\/or card (NIC), since additional memory and\/or buffers may be required. Furthermore, since additional software programming is required to control the functionality of the network interface card, the programming overhead may further increase the cost associated with the network interface card. Moreover, in Gigabit Ethernet (GbE) wire-speed applications, these associated costs can obviously be prohibitively high. Due to the rapid growth in networking technology, a flexible power management solution is required that will not only meet current power management requirements, but will also be expandable so that it will be applicable to more advanced future networking applications.","Some conventional systems utilize rather large power monitoring circuits to aid in managing the power among the various operating states of the high speed communication devices. However, these large circuits are often complicated and not readily adaptable to the continuously varying power conditions experienced by these devices. The design of some of these power monitoring and management circuitry are often inflexible and may not be readily scaled or adapted to operate in other processing environments or on other platforms. For example, in certain instances, improper switching may result in current flowing back into a main voltage source, thereby increasing an input voltage to an undesired level. This may cause current levels to exceed various specification threshold levels. Depending on the system, this may cause the system to hang or be reset.","Furthermore, these conventional power control circuits may vastly increase the cost of processing because of the space which these power control circuits may occupy on printed circuit boards (PCBs). Since printed circuit board real estate is expensive and scarce, designers find it desirable to maximize the use of printed circuit boards by devoting as much of the real estate as possible to processing.","Further limitations and disadvantages of conventional and traditional approaches will become apparent to one of skill in the art, through comparison of such systems with some aspects of the present invention as set forth in the remainder of the present application with reference to the drawings.","Certain embodiments of the invention may be found in a method and system for controlling power for a network interface controller device. Aspects of the method may comprise instantaneously detecting ramp up of a main voltage corresponding to a main voltage source in order to control the network interface controller device. Upon detecting when a threshold voltage for the main voltage is reached during the ramp up of the main voltage, an output from an auxiliary voltage source may be switched to the main voltage source without causing a switch controlling the auxiliary voltage source and a switch controlling the main voltage source to be simultaneously on. A determination may be made as to whether the main voltage is ramping up in excess of a determined rate. If the main voltage is ramping up in excess of the determined rate, a rate at which the main voltage ramps up may be decreased. An inrush current caused by the ramp up of the main voltage may be monitored and the inrush current may be limited to less than about 375 mA. At least a core processor for the network interface controller device may be reset if the inrush current is greater than 375 mA.","Another aspect of the invention may comprise delaying switching from the auxiliary voltage source to the main voltage source and disabling turning on of at least one of the switch controlling the auxiliary voltage source and the switch controlling the main voltage source prior to reaching the threshold voltage. A reset signal that resets at least a core processor of the network interface controller device during detection of the ramp up of the auxiliary voltage may be generated. The reset signal may be generated whenever power down of the main power source is detected. The threshold voltage may be of the order of about 2.7V. A reference voltage threshold may be adjusted in increments of about 100 mV in order to detect changes in the main voltage source in order to provide greater precision or resolution. Another aspect of the invention may further comprise detecting ramp down of the main voltage. In this regard, the output may accordingly be switched from the main voltage source to the auxiliary voltage source without causing a switch controlling the auxiliary voltage source and a switch controlling the main voltage source to be simultaneously on.","Another embodiment of the invention may provide a machine-readable storage, having stored thereon, a computer program having at least one code section for controlling power for a network interface controller device. The at least one code section may be executable by a machine, thereby causing the machine to perform the steps as described above for controlling power for a network interface controller device.","Aspects of the system for controlling power for a network interface controller device may comprise a precision voltage comparator that may instantaneously detect ramp up of a main voltage corresponding to a main voltage source in order to control the network interface controller device. A power monitor may detect when a threshold voltage of the main voltage is reached during ramp up of the main voltage. A main voltage source switch and an auxiliary voltage source switch may switch an output from an auxiliary voltage to the main voltage source without the auxiliary voltage source switch and the main voltage source switch being simultaneously on. The power monitor may determine whether the main voltage is ramping up in excess of a determined rate and if so, the power monitor may decrease a rate at which the main voltage ramps up. The system may further comprise a current limiter and the current limiter and\/or the power monitor may monitor an inrush current caused by the ramp up of the main voltage. The current limiter may accordingly limit the inrush current to less than about 375 mA.","The system may further comprise at least one OR gate, and the OR gate and\/or the precision voltage comparator may cause generation of a reset signal that resets at least a core processor for the network interface controller device if the inrush current is greater than 375 mA. The power monitor may be adapted to delay switching from the auxiliary voltage source to the main voltage source. The power monitor may also disable turn on of the switch controlling the auxiliary voltage source and\/or the switch controlling the main voltage source prior to reaching the threshold voltage. An OR gate and\/or the precision voltage comparator may generate a reset signal and the reset signal that may be utilized to reset at least a core processor of the network interface controller device during detection of the ramp up of the auxiliary voltage. The OR gate and\/or the precision voltage comparator may generate the reset signal whenever power down of the main power source is detected. The threshold voltage may be of the order of about 2.7V. The precision voltage comparator may adjust a reference voltage threshold in increments of about 100 mV in order to detect changes in the main voltage source. In another aspect of the system, the power monitor may be utilized to detect ramp down of the main voltage. Accordingly, the auxiliary power source switch and the main power source switch may switch the output from the main voltage source to the auxiliary voltage source without causing the auxiliary power source switch and the main voltage source switch to be simultaneously on. The auxiliary power source switch may comprise a first FET coupled to a second FET and the main power source switch may comprise a third FET.","In another embodiment of the invention, a system for controlling power for a network interface controller device may comprise a power monitor coupled to an auxiliary power source switch and a current limiter coupled to the auxiliary power source. A precision voltage comparator may be coupled to the auxiliary power source switch and a main power source switch may be coupled to an OR gate which may be coupled to the precision voltage comparator. The auxiliary power source switch may comprise a first FET coupled to a second FET and the main power source switch may comprise a third FET. The OR gate may be coupled to a power control register and the auxiliary power source switch may be coupled to a reset logic generator.","These and other advantages, aspects and novel features of the present invention, as well as details of an illustrated embodiment thereof, will be more fully understood from the following description and drawings.","Aspects of the present invention are found in a method and system for controlling power for a network interface controller device such as a gigabit Ethernet controller. Certain aspects of the invention for controlling power for a network interface controller device may comprise a precision voltage comparator that may instantaneously detect ramp up of a main voltage corresponding to a main voltage source in order to control the network interface controller device. A power monitor may detect when a threshold voltage of the main voltage is reached during the ramp up. A main voltage source switch and an auxiliary voltage source switch may switch an output from an auxiliary voltage to the main voltage source without the main voltage source switch and the auxiliary voltage source switch being simultaneously on. The power monitor may determine whether the main voltage is ramping up in excess of a determined rate and if so, may decrease a rate at which the main voltage ramps up. A current limiter and\/or the power monitor may monitor and limit an inrush current caused during ramp up of the main voltage.","In a general computer environment, there are generally two major types of power sources or supplies that are supplied to the internal circuits. The first type of major power may be supplied by an auxiliary voltage source which supplies a voltage that may be referred to as an auxiliary voltage V. The auxiliary voltage Vis the voltage that is applied when, for example, a personal computer is plugged into a wall outlet or power receptacle but the power on\/off switch on the personal computer is turned to the off position. The second type of voltage may be supplied by a main voltage source which supplies a voltage that may be referred to as a main voltage, V. The main voltage Vmay be the voltage generated when, for example, a power on\/off switch on the personal computer is turned in the on position. The main voltage (V) may also be referred to as V, which represents a 3.3V input voltage. Accordingly, a power control system is disclosed that controls switching between various combinations of on\/off conditions for the main voltage (V) and on\/off conditions for the auxiliary voltage (V). Personal computer as utilized herein, unless otherwise stated, may comprise any computer system comprising laptops, notebooks, handhelds, desktops, and servers. Although various other types of voltage levels may be utilized, these required voltage levels may be generated from the main voltage source Vand the auxiliary voltage source V.","In instances where a personal computer comprises a local area network (LAN) card, which is more generically referred to as a network interface card (NIC), the NIC may be adapted to operate utilizing voltage supplied from either the auxiliary voltage source (V) or the main voltage source (V). A controller chip such as a gigabit Ethernet (GbE) controller chip integrated with the NIC may be adapted to operate from the moment when a power cord for the host system is plugged into a wall socket or outlet. The main voltage source (V) and the auxiliary voltage source (V) may therefore, supply a voltage to a bus, for example, a PCI, PCI-X or PCI Express bus into which the network interface card is plugged.","In this regard, power management operations may be adapted to place the gigabit Ethernet (GbE) controller in an operating mode where it may wait to receive context information from an Ethernet link. This context information may be utilized to, for example, wake up the system when a wakeup event or wakeup packet is received from the Ethernet link. The power to the gigabit Ethernet (GbE) controller may then be switched from the auxiliary power source (Vaux) to the main power source (V) once the host system wakes up.",{"@attributes":{"id":"p-0048","num":"0047"},"figref":["FIG. 2","FIG. 2"],"b":["200","202","204","206","208","210","208","210","208","210","206","208","210","206"],"sub":["aux","33-2","out","33-1","33-2"]},"The controller  may be a microprocessor, microcontroller or other device such a gigabit Ethernet (GbE) controller and may comprise any necessary supporting circuitry and\/or logic that may be utilized to implement a particular function. In this regard, the controller  may be implemented as, for example, an integrated circuit (IC), an application specific integrated circuit (ASIC) or a system on a chip (SoC).","The power controller block  may comprise electronic circuitry that may be adapted to provide the necessary logic for controlling switching between the auxiliary power source (V) and the main power source (V). An exemplary power controller block is illustrated in  and subsequently described with reference thereto. An output voltage generated by the power control block  may be supplied as an input voltage to the controller .","The bus power block  may be interfaced to the controller  and may be adapted to provide and control power for a bus interface. In accordance with an embodiment of the invention, the bus interface may be, for example, a PCI, PCI-X or a PCI Express bus. Notwithstanding, the bus power block  may comprise suitable circuitry and\/or logic that may be adapted to generate, for example, 1.2V, 2.5V or other voltages that may be required for power control. In this regard, the bus power block may be adapted to convert an input voltage such as Vto required voltages such as 1.2V and 2.5V.","The first switch  and the second switch  may be field effect transistors (FETs) or variants thereof, for example, metal oxide semiconductor FETS (MOSFETS) or JFETS. In this regard, the first switch  and the second switch  are coupled so that they provide an exclusive OR (XOR) function. Additionally, the first switch  and the second switch  are coupled so that they switch between the auxiliary power source (V) and the main power source (V).","In operation, the power control block  may control switching of the auxiliary power source (V) and the primary power source (V) by turning on or off any of the first switch  and the second switch . In this regard, the output voltage Vsupplied to the controller  may be utilized to facilitate transition between the various operating states or modes of the controller . U.S. application Ser. No. 10\/887,061 discloses various power management operating states and is hereby incorporated by reference herein in its entirety.",{"@attributes":{"id":"p-0054","num":"0053"},"figref":["FIG. 3A","FIG. 2","FIG. 3A"],"b":["300","206","302","304","306","306","308","310","312","314"]},{"@attributes":{"id":"p-0055","num":"0054"},"figref":["FIG. 3B","FIG. 3A","FIG. 3B"],"b":["302","304","322","322","312","322","202","202"],"sub":["main ","main","main ","33-1","33-1 "]},{"@attributes":{"id":"p-0056","num":"0055"},"figref":["FIG. 3C","FIG. 3A","FIG. 3C"],"b":["304","304","332","334","332","334","332","308","334","310","334","322","334"],"sub":["aux","33-1","aux","33-1"]},"Referring to , the current limiter  may be an inrush current limiter. Notwithstanding, the current limiter  may comprise suitable logic and\/or circuitry that may be adapted to limit the current flow during ramping up of the voltage source on power up. In this regard, the current limiter  may be adapted to limit the inrush current to 375 mA as provided by the PCI specification. In general, if the 375 mA current limit is exceeded, an error condition would result. However, in accordance with an aspect of the invention, the inrush current limiter  may be adapted to limit the inrush current in order to ensure that the 375 mA limit is not exceeded. This will ensure that no errors condition will result on power up or during switching.","For example, when a personal computer is plugged into a wall outlet or power receptacle, the auxiliary power source (V) may rapidly transition from 0V to 3V. If the auxiliary power source (V) is connected directly to the output Vvia the second switch  in this manner, then the output Vwould have the same ramp up rate as the voltage produced by the auxiliary voltage source (V). However, in this case, if Vis allowed to have the same ramp up rate as the auxiliary voltage (V) then the current surge would rapidly charge up the capacitive elements in the circuit of  and the current would exceed the maximum limit of 375 mA. Accordingly, the current limiter  is adapted to control a rate at which the auxiliary voltage source (V) ramps up and limit the inrush current so that it does not exceed the specified 375 mA. In other words, when the power cord is plugged in, the current limiter  keeps the rate at which the capacitors are charged low enough to ensure that the inrush current is limited to 375 mA.","The power monitor  may also be referred to as a \u201cpowergood\u201d monitor. Notwithstanding, the power monitor  may comprise various line conditioning circuits that may be adapted to detect any glitches that may occur during switching and smooth out any associated spikes that may occur. For example, when the main power source (V) ramps up and the voltage source switches from the auxiliary voltage source (V) to the main voltage source (V), the power monitor  may be adapted to facilitate a smooth transformation between the voltage sources Vand Vby eliminating any glitches that may occur.","The logic block  may comprise suitable circuitry and\/or logic that may be adapted to switch between the auxiliary voltage source (V) and the main voltage source (V) depending on, for example, an output signal generated by the voltage comparator . In this regard, the logic block  may comprise, for example, various tri-state buffers that may be adapted to temporarily operate the switches ,  in a tri-state mode until the voltage ramps up to a suitable level threshold voltage. The logic block  may also be adapted to control reset logic\/generator, current limiter  and power monitor .","The voltage comparator  may be a precision voltage comparator. The main voltage source Vand auxiliary voltage source Vmay be coupled as inputs to the voltage comparator . Notwithstanding, the voltage comparator  may comprise a bandgap circuit the may be adapted to generate a reference voltage (V). The voltage comparator  may compare the reference voltage (V) to an input voltage such as V, and accordingly, generate an output signal that may be utilized to control, for example, the logic block , the power monitor , and the reset logic\/generator. The precision voltage comparator  may be adapted to adjust the reference voltage (V) in small increments, for example, about 100 mV in order to provide precise switching by the switches , . Notwithstanding, the resolution of the precision voltage comparator  may be configured to provide more precise switching points for turning on\/off the switches , .","In general, if the power switch on the personal computer or a host device is off, the reference voltage (V) will be greater than the main voltage (V). However, if the power switch is on, then the main voltage (V) will be greater than the reference voltage (V). Accordingly, the voltage comparator  will enable the logic block  to turn off switch # , turn on switch # , thereby supplying power from the main voltage source (V) to the output V. The controller  would therefore be powered by the main voltage source (V). Otherwise, switch #  would be on, switch # would be off, and the output voltage (V) would be supplied by the auxiliary voltage source (V).",{"@attributes":{"id":"p-0063","num":"0062"},"figref":["FIG. 4A","FIG. 2","FIG. 4A","FIG. 3A","FIG. 4A","FIG. 2"],"b":["400","404","408","402","402","418","416","418","426","3","3","206"]},{"@attributes":{"id":"p-0064","num":"0063"},"figref":["FIG. 4A","FIG. 4A"],"b":["406","404","426","410","412","408","410","412","418","416"],"sub":["main","33-1","aux"]},"Notwithstanding, the power control controller block of  and its supporting circuitry as illustrated in , may further comprises a power control register  and a reset logic\/generator block . The power control register  may be coupled to the WOL power control module  and in particular the XOR gate . In this regard, software and\/or firmware may be utilized to control current flow via the power control register and\/or the OR gate. In an aspect of the invention, a power control driver may be adapted to control the operation of the power control system of .","The reset logic\/generator block  may comprise suitable circuitry and\/or logic that may be adapted to generate an output reset signal based on, for example, an input signal received from the precision voltage comparator  and\/or the power control register . The output reset signal generated by the reset logic\/generator block  may be utilized to reset a core processor of a network interface card, for example. This output signal generated by the reset logic\/generator block  may be referred to as a core reset signal and may be utilized to reset, for example, a core CPU that controls a gigabit Ethernet controller.","The reset logic\/generator block  may be utilized to issue an output reset signal in instances where the inrush current exceeds the 375 mA threshold. For example, the reset signal generated by the reset logic\/generator block  may be utilized to reset the gigabit Ethernet controller whenever it draws more than 375 mA in the D3 cold state. In another example, the reset logic\/generator block  may be adapted to reset the controller in instances when the inrush current may exceed the 375 mA threshold. The reset logic\/generator block  may also be adapted to generate a reset whenever the WOL power control module detects the main power source (V). This may be particularly useful in instances where a host system lacks an advanced configuration and power interface (ACPI). Accordingly, in instances when the current exceeds the 375 mA in the auxiliary FETs , , the reset logic\/generator  is adapted to reset the core processor of a network interface card.","In general, an advanced configuration and power interface (ACPI) is utilized to generate events and control transition between various power management states. However, in a non-ACPI environment or host system where there is no power management or control application running, the reset logic\/generator block  may be utilized to reset a core processor of the network interface card. A DOS based personal computer may be a non-ACPI environment. In instances where a host system such as a personal computer having no ACPI application support is powered down, then the WOL power control module or chip  may detect the loss of power and the reset logic\/generator block  may issue a reset signal to the core processor controlling a gigabit Ethernet controller chip. Upon issuance of the reset signal by the reset logic\/generator block , the gigabit Ethernet chip may enter a D3 cold state in order to consume less power.","U.S. application Ser. No. 10\/887,061 discloses a ACPI interface that may be utilized in connection with the invention and is hereby incorporated by reference herein in its entirety.","Although the switches  and  are integrated externally to the WOL power control module or chip , the invention is not so limited. Accordingly,  illustrates an embodiment of the invention in which the auxiliary power switch is integrated within the chip .  is a block diagram  illustrating a power control system comprising an integrated auxiliary power switch in accordance with an embodiment of the invention. Referring to , there is shown an integrated circuit  comprising auxiliary power source switch , a WOL power control module , an \u201cother\u201d or miscellaneous block , main power source switch  and bipolar junctions (BJTs) , .","The auxiliary power source switch  may comprise a first FET  and a second FET . The main power source switch  comprises FET . The WOL power control module  comprises a precision voltage comparator, a current limiter and a power monitor. The other or miscellaneous block  may comprise a power control register and a reset logic\/generator block. The precision voltage comparator, current limiter, power monitor, power control register and a reset logic\/generator block may be coupled as shown in .","With regard to the auxiliary power source switch , the first FET  may be coupled to the input auxiliary voltage source (V), the second FET  and the WOL power control module . The second FET  may be coupled to and controlled by the WOL power control module . In combination, the first FET  and the second FET , under control of the WOL power control module , may be adapted to control switching on\/off the auxiliary voltage source (V). The FET  of the main power source switch  may be adapted to control switching on\/off of the main voltage source (V). The BJTs  and  provide the 2.5V and 1.2V regulated voltage sources. Input signal Vprovides an input voltage to the integrated circuit .",{"@attributes":{"id":"p-0073","num":"0072"},"figref":["FIG. 4C","FIG. 2","FIGS. 5-10","FIG. 4C","FIG. 4C","FIG. 4A","FIG. 4C","FIG. 5","FIG. 10","FIG. 4C"],"b":"460","sub":["main","aux","33-1","o","ob"]},"In general, during power up, the power control system of  is adapted to switch from the auxiliary voltage source (V) to the main voltage source (V). On power down, the power control circuit of  is adapted to sense or detect when the main power source (V) goes down and switches from the main voltage source (V) to the auxiliary voltage source (V). Accordingly, whenever the main voltage source (V) is on, the auxiliary voltage source (V) is disconnected, and whenever the auxiliary voltage source (V) is on, the main voltage source (V) is disconnected. Hence, the power control system of  is adapted to sense or detect a power up state and a power down state and accordingly switch between the main voltage source (V) and the auxiliary voltage source (V).","In instances when the WOL power control module  is powered off, Vand Vmay be kept in a tri-state condition. However, when the main power source (V) is turned on, there is no glitching in Vand Vsince the power monitor  and tri-state buffers are adapted to prevent any glitching. The power monitor  is adapted to eliminate or minimize any glitching that may occur by disabling Vand Vin instances where the auxiliary voltage source (V) falls below, for example, about 2.7V.","In accordance with an aspect of the invention, the power control system of  utilizes a \u201cmake before break\u201d principle in which the circuit employs a precision switching mechanism to turn on\/off the FETs in the switches , . In this regard, a delay of, for example, about 1 \u03bcS may also be provided before switching on any of the FETs in order to eliminate simultaneously turning on the FETs in the switches , .","In operation, in instances when the auxiliary power source (V) is turned on and begins to ramp at too fast a rate, the inrush current limiter  may be adapted to detect the fast ramp up rate and accordingly limit the inrush current. In this regard, the inrush current limiter  may be adapted to reduce the rate at which FET  in the second switch  is turned on. Accordingly, the inrush current may be kept below the 375 mA specification limit.",{"@attributes":{"id":"p-0078","num":"0077"},"figref":["FIG. 5","FIG. 4C"],"sub":["aux","main","aux","aux ","0","main","aux ","33-1 ","o ","ob ","1","main","1","aux","33-1","o","ob ","0","main","33-1 ","1","1 ","2","main ","33-1 ","2 ","3","aux ","o ","ob ","3","main ","main ","33-1 ","main","aux","33-1","o","ob","2","main","33-1"]},{"@attributes":{"id":"p-0079","num":"0078"},"figref":["FIG. 6","FIG. 4C"],"sub":["aux","aux ","main","0 ","3","main","aux","0","aux","33-1 ","o ","ob ","1","aux ","1","aux","33-1","1 ","2","o ","ob ","2","aux","33-1 ","ob ","o ","3","aux","33-1 ","ob ","o ","1","aux ","2","3","aux","33-1"]},{"@attributes":{"id":"p-0080","num":"0079"},"figref":["FIG. 7","FIG. 4C"],"sub":["aux","main","main ","aux","0","main","aux","33-1","ob ","1","o ","1","main","aux","33-1 ","2","main","aux","33-1 ","2","o","ob ","1 ","2","3","main","aux","33-1","o ","ob ","main","33-1"]},{"@attributes":{"id":"p-0081","num":"0080"},"figref":["FIG. 8","FIG. 4C"],"sub":["0","main ","o ","0","aux","33-1 ","ob ","33-1","1","main ","1","aux","33-1","o","ob ","0","main","2","2","aux ","33-1 ","1 ","0","2","o ","ob ","3","main","aux","33-1 ","o ","ob ","main","33-1"]},{"@attributes":{"id":"p-0082","num":"0081"},"figref":["FIG. 9","FIG. 4C"],"sub":["aux","main","33-1"]},"In this regard, at time instant t, V, V, V, and Vare 3.3V. Also, at time instant t, Vand the core reset signal are 0V. At time instant t, Vis at 3.3V and starts ramping down and V, V, Vand the core reset signal are maintained at the same values there were at time instant t. At time instant t, Vstops ramping and is 0V, and Vand Vare maintained at the same values they were at time instant t. However, also at time instant t, Vtransitions from 3.3V to 0V, Vtransitions from 0V to 3.3V and the core reset signal transitions from 0V to 1.2V. At time instant t, Vis 0V, Vand Vare maintained at 3.3V, Vis 0V, Vis 3.3V and the core reset signal is 1.2V. Accordingly, the auxiliary voltage source (V) is connected to the output Vand a reset signal is issued to the core CPU.",{"@attributes":{"id":"p-0084","num":"0083"},"figref":["FIG. 10","FIG. 4C"],"sub":["aux","main","33-1"]},"In this regard, at time instant t, V, V, V, and Vare 3.3V. Also, at time instant t, Vis 0V and the core reset signal is 1.2V. At time instant t, Vis at 3.3V and starts ramping down and V, V, Vand the core reset signal are maintained at the same values there were at time instant t. Hence, the core reset signal is maintained at 1.2V. At time instant t, the main voltage (V) stops ramping down and is 0V, and Vand Vare maintained at the same values they were at time instant t. However, also at time instant t, Vtransitions from 3.3V to 0V, Vtransitions from 0V to 3.3V. However, the core reset signal is still maintained at 1.2V. At time instant t, Vis 0V, Vand Vare maintained at 3.3V, Vis maintained 0V, Vis maintained 3.3V and the core reset signal is maintained 1.2V. Accordingly, the auxiliary voltage source (V) is connected to the output V.",{"@attributes":{"id":"p-0086","num":"0085"},"figref":["FIG. 11","FIG. 11"],"b":["1100","1102","1104","1106","1108","1112","1114","1116","1118","1120","1122","1108","1110","1104","1106","1108","1112","1114","1116","1122","1118","1118"]},"The transport medium  may be an optical medium, electrical medium or a combination thereof. The PHY  may be gigabit PHY device which may be utilized for high speed communication at rates of the order of gigabits. The MAC controller  may be adapted to handle MAC layer functions. The MAC layer functions are handled by the MAC controller  may be part of the data link layer, layer , functions. In this regard, MAC controller  may be configured to implement, for example, the IEEE 802.11ae Gigabit Ethernet protocol.","The ACPI control block , may be adapted to conform with the advanced configuration and power interface (ACPI) specification. The ACPI block  may be coupled to the MAC controller , the core processor , the shared memory  and the power control block . The ACPI control block  may contain suitable logic and\/or circuitry that may be adapted to generate events and control transition between various power management states. In one aspect of the invention, the ACPI control block  may be implemented as a finite state machine (FSM), although the invention is not so limited.","The DMA Controller  may be any suitable direct memory access processor or controller that may be adapted to control read and write processes to the shared memory . The shared memory block  may be any dual port random access memory (DPRAM). The shared memory block may include one or more high speed memory devices that may be capable of handling the processing of data at Gigabit speeds. The shared memory block  may be memory mapped to facilitate access by one or more devices.","The core processor  may be any of a general class of microcontrollers or microprocessors and may be a standalone processor device or an embedded processor device such as a system-on-chip processor (SoC). One or more functions or applications may be executed by the core processor . For example, these functions or applications may be adapted to control the setting and clearing of the power management event status.","The bus  may be any suitable bus, for example, a PCI, PCI-X, PCI Express (New Card), CardBus, Firewire or SCSI. The bus  may be adapted to provide interconnectivity for a plurality of devices coupled thereto. Accordingly, an arbitration and\/or prioritization scheme may be provided to grant access to the bus by the various devices coupled to the bus. For example, an interrupt driven scheme may be utilized to grant bus access and\/or provide inter-device communication.","The host processor  may be coupled to the bus . The host processor  may be any of a class of general or special purpose microprocessors or microcontrollers that may be adapted to communicate with one or more devices that may be coupled to the bus . One or more applications or functions may be executed by the host processor . An operating system may be executed by the host processor . Additionally, one or more software applications may be adapted to receive and process power management events such as power management events for a particular device coupled to the bus , or for the host system. The shared memory block  may be memory mapped to a memory space of the host processor  in order to facilitate data access and transfer. A power management event handler may be implemented as a software application.","The power control block  is similar to the power control system of . In this regard, the power control block  may comprise a power monitor , a first switch , a second switch , a precision voltage comparator , a power control register , a current limiter  and an OR gate or function block . The power control block  may be coupled to the ACPI block  and may be adapted to generate various power management events to one or more devices coupled to the bus . The first switch  may be a main voltage source switch and the second switch  may be an auxiliary voltage source switch. The auxiliary power source switch  may comprise a first FET coupled to a second FET and the main power source switch  may comprise a third FET.","The system  may be utilized to control power for the network interface card (NIC)  in accordance with various aspects of the invention. The precision voltage comparator  that may instantaneously detect ramp up of a main voltage corresponding to a main voltage source in order to control the network interface card . The power monitor  may detect when a threshold voltage of the main voltage is reached during the ramp up of the main voltage. The main voltage source switch  and an auxiliary voltage source switch  may switch an output from an auxiliary voltage to the main voltage source without the auxiliary voltage source switch  and the main voltage source switch  being simultaneously on. The power monitor  may determine whether the main voltage is ramping up in excess of a determined rate and if so, the power monitor  may decrease a rate at which the main voltage ramps up if the main voltage is ramping up in excess of the determined rate. The current limiter  and\/or the power monitor  may monitor an inrush current caused by the ramp up of the main voltage. The current limiter  may accordingly limit the inrush current to less than about 375 mA.","The OR gate  and\/or the precision voltage comparator  may cause generation of a reset signal that resets the core processor  for the network interface card  if the inrush current is greater than 375 mA. The power monitor  may be adapted to delay switching from the auxiliary voltage source to the main voltage source. The power monitor  may also disable turn on of the switch  controlling the auxiliary voltage source and\/or the switch  controlling the main voltage source prior to reaching the threshold voltage. An OR gate and\/or the precision voltage comparator may generate a reset signal, and the reset signal may be utilized to reset at least a core processor of the network interface controller device. The OR gate  and\/or the precision voltage comparator  may be utilized to generate the reset signal whenever power down of the main power source is detected. The threshold voltage may be of the order of about 2.7V. The precision voltage comparator  may adjust a reference voltage threshold in increments of about 100 mV in order to detect changes in the main voltage source. The power monitor  may also be utilized to detect ramp down of the main voltage. Accordingly, the auxiliary power source switch  and the main power source switch  may switch the output from the main voltage source to the auxiliary voltage source without causing the auxiliary power source switch  and the main voltage source switch  to be simultaneously on.","Accordingly, the present invention may be realized in hardware, software, or a combination of hardware and software. The present invention may be realized in a centralized fashion in at least one computer system, or in a distributed fashion where different elements are spread across several interconnected computer systems. Any kind of computer system or other apparatus adapted for carrying out the methods described herein is suited. A typical combination of hardware and software may be a general-purpose computer system with a computer program that, when being loaded and executed, controls the computer system such that it carries out the methods described herein.","The present invention may also be embedded in a computer program product, which comprises all the features enabling the implementation of the methods described herein, and which when loaded in a computer system is able to carry out these methods. Computer program in the present context means any expression, in any language, code or notation, of a set of instructions intended to cause a system having an information processing capability to perform a particular function either directly or after either or both of the following: a) conversion to another language, code or notation; b) reproduction in a different material form.","While the present invention has been described with reference to certain embodiments, it will be understood by those skilled in the art that various changes may be made and equivalents may be substituted without departing from the scope of the present invention. In addition, many modifications may be made to adapt a particular situation or material to the teachings of the present invention without departing from its scope. Therefore, it is intended that the present invention not be limited to the particular embodiment disclosed, but that the present invention will include all embodiments falling within the scope of the appended claims."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF SEVERAL VIEWS OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":["FIG. 3A","FIG. 2"]},{"@attributes":{"id":"p-0032","num":"0031"},"figref":["FIG. 3B","FIG. 3A"]},{"@attributes":{"id":"p-0033","num":"0032"},"figref":["FIG. 3C","FIG. 3A"]},{"@attributes":{"id":"p-0034","num":"0033"},"figref":["FIG. 4A","FIG. 2"]},{"@attributes":{"id":"p-0035","num":"0034"},"figref":"FIG. 4B"},{"@attributes":{"id":"p-0036","num":"0035"},"figref":["FIG. 4C","FIG. 2","FIGS. 5-10"]},{"@attributes":{"id":"p-0037","num":"0036"},"figref":["FIG. 5","FIG. 4C"],"sub":"aux"},{"@attributes":{"id":"p-0038","num":"0037"},"figref":["FIG. 6","FIG. 4C"],"sub":["aux","aux "]},{"@attributes":{"id":"p-0039","num":"0038"},"figref":["FIG. 7","FIG. 4C"],"sub":["aux","main"]},{"@attributes":{"id":"p-0040","num":"0039"},"figref":["FIG. 8","FIG. 4C"]},{"@attributes":{"id":"p-0041","num":"0040"},"figref":["FIG. 9","FIG. 4C"]},{"@attributes":{"id":"p-0042","num":"0041"},"figref":["FIG. 10","FIG. 4C"]},{"@attributes":{"id":"p-0043","num":"0042"},"figref":"FIG. 11","b":"1100"}]},"DETDESC":[{},{}]}
