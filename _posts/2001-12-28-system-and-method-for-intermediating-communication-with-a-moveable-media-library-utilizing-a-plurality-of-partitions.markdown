---
title: System and method for intermediating communication with a moveable media library utilizing a plurality of partitions
abstract: In an embodiment, the present invention is directed to a system for intermediating communication, with a moveable media library, utilizing partitions, wherein the moveable media library comprises an internal controller that is, in part, operable to control a robotics subsystem in response to commands received via a control interface. Such a system comprises: a bridge unit that is operable to pass library commands to an external controller, wherein the bridge unit is operable to associate a plurality of logic units (LUNs) with the external controller. The external controller is operable to process library commands from the bridge unit, wherein the external controller associates each partition of a plurality of partitions with a respective LUN of the plurality of LUNs, and the external controller is further operable to translate received commands from the bridge unit for communication to the internal controller according to the plurality of partitions.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=06845431&OS=06845431&RS=06845431
owner: Hewlett-Packard Development Company, L.P.
number: 06845431
owner_city: Houston
owner_country: US
publication_date: 20011228
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","BACKGROUND OF THE INVENTION","BRIEF SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE INVENTION"],"p":["The present invention is related to the following copending and commonly assigned U.S. patent applications: Ser. No. 10\/033,003 entitled Method for Using Partitioning to Provide Capacity on Demand in Data Libraries, filed Dec. 28, 2001; Ser. No. 10\/033,010 entitled System and Method for Securing Fiber Channel Drive Access in a Partitioned Data Library, filed Dec. 28, 2001; Ser. No. 10\/034,888 entitled System and Method for Securing Drive Access to Data Storage Media Based On Medium Identifiers, filed Dec. 28, 2001; Ser. No. 10\/034,518 entitled System and Method for Securing Drive Access to Media Based On Medium Identification Numbers, filed Dec. 28, 2001; Ser. No. 10\/032,923 entitled System and Method for Peripheral Device Virtual Functionality Overlay, filed Dec. 28, 2001; Ser. No. 10\/032,662 entitled System and Method for Managing Access to Multiple Devices in a Partitioned Data Library, filed Dec. 28, 2001; Ser. No. 10\/033,009 entitled System and Method for Partitioning A Storage Area Network Associated Data Library Employing Element Addresses, filed Dec. 28, 2001; Ser. No. 10\/034,691 entitled System and Method for Partitioning a Storage Area Network Associated Data Library, filed Dec. 28, 2001 and issued as U.S. Pat. No. 6,715,031 on Mar. 30, 2004; and Ser. No. 10\/034,083 entitled System and Method for Managing a Moveable Media Library with Library Partitions, filed Dec. 28, 2001; the disclosures of which are hereby incorporated herein by reference.","1. Technical Field","The present invention is in general related to mass data storage and more specifically to a system and method for intermediating communication, with a moveable media library, utilizing a plurality of partitions","2. Background","Digital magnetic tape is commonly used for long-term data storage in computer systems. The low cost-per-bit stored, long-term retention capability, and portability of magnetic tape cartridges have made magnetic tape the medium of choice for storing the large quantities of data generated by businesses such as insurance companies, banking organizations, airlines, and the like.","Tape cartridges are frequently utilized by automated tape library peripherals. Tape libraries generally handle numerous tape cartridges to store very large amounts of data. The tape libraries hold the tape cartridges in predefined positions or media slots. When content is required from a particular tape cartridge, a host system communicatively coupled to the tape library communicates with a robotics subsystem controller of the tape library. The host system may be communicatively coupled to the tape library by a number of mechanisms. For example, the host system may be communicatively coupled to the tape library via a Small Computer System Interface (SCSI) bus or a Fibre Channel (FC) fabric. The host system may communicate a command to the robotics subsystem controller to retrieve the particular tape cartridge from the respective position or media slot. In response, the robotics subsystem controller may execute various mechanical operations by robotic mechanics to retrieve the desired tape cartridge and place the desired tape cartridge into a tape drive. The host system may then read from or write to the tape cartridge via the tape drive.","Additionally, other communication may occur between the host system and the robotics subsystem controller. For example, the host system may query the robotics subsystem controller to determine the number of tape cartridges, tape drives, and robotics mechanisms contained in the tape library. By querying the robotics subsystem controller in this manner, the host system may manage the tape library.","Although tape libraries are useful for providing a significant amount of long-term data storage capacity, tape libraries possess several disadvantages. For example, the data storage capacity may be allocated for use by several entities. Accordingly, all of the data storage capacity may be accessible by each host system or entity communicatively coupled to the tape library. To address this problem, partitioning has been utilized. Partitioning involves assigning specific tape library resources (e.g., various slots, tape drives, robotic mechanics) to discrete virtual devices. Access to the virtual devices is then restricted as desired for particular applications.","Different approaches may be utilized to partition a tape library. First, host system restrictions have been utilized to restrict access to portions of a tape library for partitioning applications. Such host restrictions are implemented by a mediating software process on a host system to enforce partition restrictions. However, this approach is problematic. Specifically, the approach is undesirable if the tape library is utilized in a storage service provider environment. In storage service provider environments, the tape library and the host systems belong to different entities (e.g., the storage service provider and the customers). Placement of software mediating processes on host systems is unattractive, because it increases the burden on the customers to make use of the storage service. Also, corporate environments impose relatively long qualification cycles for new host system software. Moreover, many customers are unwilling to allow other parties to place software on their host systems. Additionally, the software mediating process approach is typically incompatible with existing data back-up utilities, i.e., the software mediating process approach requires the use of specialized data back-up applications.","A second approach, used by Spectra Logic, provides multiple bridge devices to partition tape libraries into multiple virtual devices. Each bridge device includes Quad Interface Processors (QIPs) to implement partitioning. The QIPs are processor-based card devices that serve as the sole interface between a host system and a library. By configuring each of the QIPs via a software interface, the QIPs are capable of emulating several virtual libraries that appear to be multiple physical libraries to a host system or host systems. Each QIP in the library can only support one partition. Also, this architecture requires that all drives in a partition to share one SCSI bus with a host, thereby resulting in potential bottlenecks.","Although this architecture does provide a mechanism to implement partitioning in a manner that is somewhat transparent to host systems, this architecture is problematic. Specifically, it is costly and hardware-intensive in that it requires multiple processor-based cards. Second, the use of multiple hardware bridges introduces multiple points of failure, thereby increasing the probability that data may become inaccessible. Moreover, this hardware approach rigidly controls the addition of further resources to a given partition. There is a specific structural relationship between the bridging hardware and the addition of further resources to a partition. Accordingly, the hardware approach is not amenable to the creation of multiple smaller partitions or applicable to partitioning smaller tape libraries.","In an embodiment, the present invention is directed to a system for intermediating communication, with a moveable media library, utilizing partitions, wherein the moveable media library comprises an internal controller that is, in part, operable to control a robotics subsystem in response to commands received via a control interface. Such a system comprises: a bridge unit that is operable to pass library commands to an external controller, wherein the bridge unit is operable to associate a plurality of logic units (LUNs) with the external controller. The external controller is operable to process library commands from the bridge unit, wherein the external controller associates each partition of a plurality of partitions with a respective LUN of the plurality of LUNs, and the external controller is further operable to translate received commands from the bridge unit for communication to the internal controller according to the plurality of partitions.","The present invention is directed to systems and methods for partitioning the resources of a moveable media library. Specifically, bridge units, an external controller, and a partitioning management controller are utilized as intermediary elements to partition an existing library that does not otherwise support partitioning. Embodiments of the present invention utilize the bridge units to control communication between the external controller and host systems and communication between media drives of the library and host systems. The bridge units prevent or enable communication according to a defined partitioning scheme. Moreover, the external controller receives commands associated with partitions. The external controller translates the commands according to the defined partitioning scheme. For example, the external controller may perform element renumbering to make the partitioning scheme appear transparent. The external controller then passes the translated commands to the internal controller of the library. The partitioning management controller may be utilized to receive user input to define the partitioning scheme. The partitioning management controller utilizes the received input to configure the bridge units and the external controller to implement the partitioning scheme.","Utilizing an external controller to partition the resources of a storage library provides several advantages. First, the use of an external controller enables the large storage capacity of a storage library to be shared among several entities or organizations. By doing so, multiple entities or organizations that require moderate storage capacity may receive the benefit of reduced storage costs that mass storage libraries provide. Additionally, utilizing an external controller causes the partitioning scheme to be transparent to host systems accessing the stored data. Specifically, the host systems do not require specialized software and the host systems are not required to possess any knowledge of the other partitions. Specifically, the partitioning system may be implemented in a manner where an individual host system is only capable of accessing its own subset of resources of the storage library.",{"@attributes":{"id":"P-00021","num":"00021"},"figref":"FIG. 1","b":["100","108","100","101","101","101","101","101"]},"To aid the reader's understanding of embodiments of the present invention, the operations of tape library  will be briefly discussed. First, internal controller  is the typical controller unit that is used to access tape library  by a host system or host systems. Internal controller  processes commands received from host systems to control the operations of tape library  via management bus . For example, internal controller  may receive a \u201cRead Element Status\u201d command from a host system. In response, internal controller  may respond by identifying all elements in tape library . After the host system determines the elements of tape library , the host system may issue a command to internal controller  to retrieve a particular tape cartridge from one of the media slots of the tape library . The media slots may be arranged in media trays through In response, internal controller  may communicate with a robotics subsystem (not shown) to place the tape cartridge in one of tape drives through The robotics subsystem may perform the mechanical operations of retrieving the particular tape cartridge from a slot of media trays through and placing the particular tape cartridge into one of tape drives through ","Tape library  further comprises a plurality of SCSI buses to communicate with external systems. Tape drives through are preferably communicatively coupled to a respective SCSI bus to avoid creating a communications bottleneck. After a tape cartridge has been placed in one of tape drives through , a host system may initiate data transfers by communicating directly with the respective tape drive . Specifically, the tape commands and data transfers may be communicated over the tape drive's SCSI bus and do not necessarily involve internal controller .","Without external controller , partitioning management controller , and Fibre Channel (FC)-to-Small Computer System Interface (SCSI) bridges and implemented in accordance with embodiments of the present invention, tape library  is operable to respond to any host system or host systems communicatively coupled to the respective SCSI buses. However, a configuration lacking elements , , , and  is problematic. Specifically, if two or more independent organizations were to share the data storage capacity of tape library , access to mission-critical data of one organization by the another organization could be disastrous. Trade secrets could be revealed or data necessary for daily operations could be damaged.","Accordingly, external controller , partitioning management controller , and FC-to-SCSI bridges and are preferably utilized to partition the resources of tape library . By partitioning the resources, multiple libraries may be \u201cseen\u201d by a host system or host systems. Additionally, the partitioning scheme may be enforced by enabling only authorized host systems to access respective partitions to ensure the integrity of the stored data. Specifically, the SCSI buses associated with tape drives through are coupled to FC-to-SCSI bridges and . Moreover, external controller  is coupled to FC-to-SCSI bridge . Accordingly, FC-to-SCSI bridges and are operable to prevent unauthorized host systems from communicating with tape drives through and external controller  as will be discussed in greater detail below.","To configure the partitioning scheme, system  may comprise partitioning management controller  as disclosed in U.S. patent application Ser. No. 10\/033,009 entitled \u201cSYSTEM AND METHOD FOR PARTITIONING A STORAGE AREA NETWORK ASSOCIATED DATA LIBRARY EMPLOYING ELEMENT ADDRESSES.\u201d Partitioning management controller  may be communicatively coupled to a local area network (LAN) or other communication network. Partitioning management controller  may be coupled to FC-to-SCSI bridges and and external controller  via any suitable management bus such as the C (Inter-Integrated Circuit) bus. Additionally, partitioning management controller  may comprise an embedded web server to enable a system administrator to configure or partition system  from a secure host system. The web server may provide a user interface to enable the system administrator to create a partition, delete a partition, assign resources to a partition, and define permissions applicable to a partition. Modifications to the partition scheme are preferably presented to a user graphically via the web server interface. Additionally, the web server may preferably enable a user to download a particular partition configuration to the user's system. The user may then reload the partition configuration at a later time. Additionally or alternatively to providing a web server, partitioning management controller  may receive commands (via a suitable network management protocol) to configure the partitioning scheme.","To enhance the security of the partitioning scheme, partitioning management controller  may preferably not enable modifications to a partition if one of tape drives through is loaded with a tape affected by the partition modification. Partitioning management controller  also preferably detects whether the SCSI address of any device is changed. If so, partitioning management controller  may reconfigure various devices according to the defined partitioning scheme.","Moreover, it is advantageous to cause the configuration communication to occur \u201cout-of-band,\u201d i.e., the configuration communication preferably occurs over a separate medium than the communication associated with data storage and retrieval. By placing the configuration communication out-of-band, the partitioning scheme cannot be subverted by a host system coupled to system  via FC-to-SCSI bridges and . Additionally or alternatively, system  may include a manual user interface (not shown) to provide partitioning information to partitioning management controller .","In a storage provider environment, the resources of system  are managed by a storage provider. The data storage capacity is sold as a service to customers of the storage provider. In such an environment, partitioning management controller  may implement additional functionality to provide instant capacity on demand as disclosed in U.S. patent application Ser. No. 10\/034,691 issued as U.S. Pat. No. 6,715,031, entitled \u201cSYSTEM AND METHOD FOR PARTITIONING A STORAGE AREA NETWORK ASSOCIATED DATA LIBRARY.\u201d In such an environment, a storage customer may pay for a given amount of storage capacity. When a customer requests extension or modification of the customer's partition, partitioning management controller  may verify that the customer has obtained a license for such additional library resources. For example, the customer may pay for a license that permits a maximum number of tape drives  and\/or tape cartridges. Any partition extension request may be examined to determine whether the maximum number would be exceeded by performing the extension. Management controller  may either reject or enable the partition extension as appropriate. Moreover, it may be advantageous to cause certain resources to be reserved for future expansion by a specific customer. These resources may be disabled until the customer actually requires the resources and pays for their use.","To assign resources to a partition by using, for example, partitioning management controller , system resource table  may be utilized as depicted in FIG. . System resource table  may be stored in non-volatile memory (e.g., EEPROM) accessible by partitioning management controller . System resource table  respectively may assign tape drive to partition , tape drive to partition , tape drive to partition , and tape drive to partition  via the tape_drive_, tape_drive_, tape_drive_, and tape_drive_ records. Additionally, tape cartridges (that are stored in slots of media trays through ) may be assigned to partitions , , , and  in groups of 10 tape cartridges. For example, tapes - may be assigned to partition , tapes - may be assigned to partition , tapes - may be assigned to partition , and tapes - may be assigned to partition . It shall be appreciated that system resource table  is depicted in diagram form in FIG. . However, the representation of system resource table  is not limited to this format. Any suitable data structure (a table, an array, a file, an instantiated object of a class, and\/or the like) may be utilized to implement system resource table .","It shall be appreciated that all resources of a tape library need not be assigned at a particular time. It may be advantageous to leave certain resources unassigned or disabled. When an organization determines that it requires additional data storage capacity, its partition may be enlarged to encompass some of the unassigned resources.","It shall be also appreciated that system resource table  is merely exemplary. Other assignment configurations may be utilized. In one embodiment, tape cartridges may be assigned to partitions in groups of 10, i.e., one or several media trays  are added to or deleted from a partition. The groups need not be contiguous. For example, media trays and may be assigned to the same partition. Preferably, no more than one tape drive of tape drives through is assigned per ten tape cartridges assigned to a given partition. It shall be appreciated that this design preference is selected to increase operating efficiency. However, it shall be further appreciated that the present invention does not require this design preference or any other specific allocation of resources to the partitions.","In another embodiment, a greater degree of control may be applied to partitioning operations to ensure compatibility with software back-up operations. In an embodiment, the various components of tape library  are organized into levels (e.g., levels and shown in FIG. ). Each level comprises two media trays  and two tape drives . The levels may then be assigned in a manner that is compatible with other commercially-available tape libraries. For example, Hewlett-Packard Company SURESTORE 1\/9\u2122 tape library utilizes nine tape slots. System  may be configured such that level is made to appear to a host system or host systems as comprising at least two Hewlett-Packard Company SURESTORE 1\/9\u2122 tape libraries. To ensure compatibility with software back-up applications that utilize SURESTORE 1\/9\u2122 tape libraries, one partition should comprise the resources associated with the \u201cleft\u201d side of level (i.e., media tray and tape drive ). The other partition should comprise the resources associated with the \u201cright\u201d side of level (i.e., media tray and tape drive ). By assigning resources in this manner, partitions will not share the same trays or drives. Accordingly, conflicts in commands will be reduced. Commands to each partition will only need to be queued until the robotics subsystem completes various mechanical operations. Commands need not be delayed due to data transfers to and from the tape cartridges.","Similar partitioning schemes may be utilized to cause partitions to emulate other tape libraries. For example, an entire level (e.g., level ) may be allocated to one partition to emulate the operations of HP SURESTORE 2\/20\u2122 (a tape library that includes two tape drives and twenty tape cartridges).","The configuration schemes described herein are dependent on a tape library architecture similar to the architecture depicted in FIG. . Tape libraries that utilize other configurations may be partitioned to emulate multiple virtual tape libraries according to embodiments of the present invention. The particular architecture of a selected tape library may influence the partitioning scheme.","It shall be appreciated that the partitioning scheme may be configured to emulate at least two different tape library devices. For example, external controller  may be configured such that logical unit (LUN)  emulates a SURESTORE1\/9\u2122 while LUN  emulates a SURESTORE 2\/20\u2122. A portion of level may be allocated to the partition associated with emulation of the SURESTORE 1\/9\u2122 device. Library resources associated with level may be allocated to the partition associated with emulation of the SURESTORE 2\/20\u2122. Additionally, external controller  preferably responds appropriately to SCSI inquiry commands addressed to each LUN. For LUN , external controller  may return the vendor ID, product ID, firmware revision, and vendor specific information defined by the SURESTORE 1\/9\u2122 device. Likewise, for LUN , external controller  may return the vendor ID, product ID, firmware revision, and vendor specific information defined by the SURESTORE 2\/20\u2122 device.","The user interface associated with partitioning management controller  may be utilized to control access to various partitions. For example, permissions table  may be created via the user interface. Permissions table  lists the authorized host systems for each of partitions , , , and . The authorized host systems are identified by Fibre Channel World Wide Name (WWNs) (e.g. WWN-, WWN-, WWN-, WWN-, WWN- and WWN-, in FIG. ). Other communication protocol addresses or identifiers may be utilized in combination with or in lieu thereof. Permissions table  may be stored in non-volatile memory (e.g., EEPROM) in a location that is accessible to partitioning management controller .","Partitioning management controller  preferably utilizes the information received from the user interface to control or configure external controller  and FC-to-SCSI bridges and . Additionally, partitioning management controller  preferably detects any firmware changes to external controller . In the event that a modification to the firmware is detected, partitioning management controller  preferably reconfigures external controller  according to the defined partitioning scheme. By controlling or configuring the elements, the partitioning scheme may be enforced as will be discussed in greater detail below.","External controller  preferably utilizes the configuration information received from partitioning management controller  to virtualize or emulate multiple instances of internal controller  as disclosed in U.S. patent application Ser. No. 10\/033,009 entitled \u201cSYSTEM AND METHOD FOR PARTITIONING A STORAGE AREA NETWORK ASSOCIATED DATA LIBRARY EMPLOYING ELEMENT ADDRESSES.\u201d As previously noted, system resource table  of the illustrative embodiment defines four partitions. Accordingly, external controller  may associate the four LUNs (, , , and ) with the respective partitions (e.g., LUN  corresponds to partition , LUN  corresponds to partition , LUN  corresponds to partition , and LUN  corresponds to partition ). External controller  may be operable to process a command active on each individual LUN (external controller  may properly support disconnects). Additionally, external controller  may be operable to maintain the state of each \u201cvirtual\u201d controller associated with each LUN to, for example, respond to various commands including Test Unit Ready and Request Sense, Mode pages, Log pages, and the like.","External controller  receives commands from a host system or host systems. External controller  translates the commands according to the partitioning scheme. External controller  then passes the translated command to internal controller  if the command is valid, i.e., it references a proper element (e.g., tape cartridge) of the respective partition. External controller  receives a response message (if any) from internal controller . External controller  translates the response message and forwards the translated response message to the originating host system.","For example, a host system may send a \u201cRead Element Status\u201d command to LUN . External controller  determines the respective partition by reference to the identified LUN (partition  is associated with LUN ). External controller  may submit a \u201cRead Element Status\u201d command to internal controller . Internal controller  generates a response that identifies all elements of tape library  and communicates the response to external controller . After receiving the response information from internal controller , external controller  removes all information that does not pertain to partition . Additionally, external controller  may renumber the identified library elements. For example, external controller  may renumber tape cartridges - physical drive as virtual tape cartridges - associated with the virtual drive of LUN . External controller  then forwards the response to the originating host system.","As another example, a host system may send a command to LUN  to have virtual tape cartridge  placed into virtual tape drive . Assuming that it is authorized, external controller  translates the virtual elements into physical elements. External controller  sends a command to internal controller  to place tape cartridge  into tape drive . When internal controller  sends a response message indicating that the operation has been completed, external controller  sends the response message to the originating host system.","In the event that multiple commands are received from host systems that require the same library resource, external controller  may queue the commands on a first in, first executed basis. For example, a command to retrieve a tape cartridge may be required to be queued while a robotics subsystem completes placement of another tape cartridge into one of tape drives through . Other queuing techniques (such as defining a priority scheme) may be utilized if desired.","External controller  may be implemented utilizing any suitable processor such as a STRONGARM processor, a MIPS processor, or the like. External controller  may further comprise non-volatile memory (PROM, EPROM, EEPROM, and\/or the like). The non-volatile memory may comprise executable code for performing the operations of external controller . The non-volatile memory may further store partitioning information received from partitioning management controller . To support queuing of commands addressed to the multiple instances of external controller , a relatively larger buffer may be provided to external controller . Moreover, as shown in , external controller  communicates with internal controller  via a SCSI interface. Accordingly, external controller  may comprise a SCSI initiator. In alternative embodiments, external controller  may be communicatively coupled to internal controller  via a serial interface or other suitable interface.","It shall be appreciated that external controller  is depicted as being disposed behind FC-to-SCSI bridge . Accordingly, external controller  is coupled to a SCSI bus. Accordingly, external controller  does not, pursuant to the SCSI protocol, receive information that identifies the origin of received SCSI commands. External controller  merely \u201csees\u201d the SCSI messages as originating from a respective LUN associated with the respective SCSI bus coupled to FC-to-SCSI bridges .","Accordingly, as previously noted, partitioning management controller  preferably utilizes the information received from the user interface to control or configure FC-to-SCSI bridge to enforce the partitioning scheme. Specifically, partitioning management controller  may transfer the information contained in system resource table  and permissions table  to FC-to-SCSI bridge . Using the received information, FC-to-SCSI bridges may prevent unauthorized host systems from communicating with a LUN associated with external controller  or tape drives through . Specifically, FC-to-SCSI bridge may not bridge or route messages to the respective SCSI buses from unauthorized host systems. By doing so, unauthorized host systems are incapable of initiating data transfers associated with various partitions of system . Moreover, unauthorized systems are unable to discover the presence of library elements through device discovery protocols.","In preferred embodiments, FC-to-SCSI bridges and , external controller , and partitioning management controller  are preferably implemented such that partitioning is persistent between power cycles. Each of the elements may utilize non-volatile memory to retrieve information defining the partitioning scheme. These elements will not enable tape operations to occur until the elements are properly configured with information stored in non-volatile memory. Additionally, these elements preferably respond dynamically to configuration information and do not require a power cycle to alter the partitioning scheme.","To illustrate a preferred embodiment of the present invention, reference is now made to FIG. .  depicts system . System  comprises host systems - through - that facilitate access to data stored on storage area network (SAN) . SAN  comprises SAN fabric , storage devices - and -, and system . Storage devices - and - may be any type of suitable storage device including disk arrays, JBODs (just a bunch of disks), optical media players, and\/or the like. In exemplary system , host systems - through - may dynamically store and retrieve information from storage devices - and -. Host systems - through - may execute back-up utility applications to back-up data stored on storage devices - and - on system . Alternatively, back-up operations may occur via data mover applications as will be discussed in greater detail below.","The type of configuration depicted in  is referred to as a storage area network for several reasons. First, the data transfers or communication related to data storage is preferably isolated from communication between host systems - through - and clients - through -M. Secondly, there is preferably no single point of failure within SAN . SAN fabric  preferably provides redundant connections via hubs, switches, routers, and\/or the like. Additionally, multiple host systems (e.g., - through -) are preferably utilized.","SAN fabric  provides a communication fabric to facilitate communication among system , storage devices - and -, and host systems - through -. SAN fabric  is typically implemented utilizing a Fibre Channel architecture. Fibre Channel is typically utilized due to the simplicity of its communication path, i.e., Fibre Channel utilizes a serial communication scheme. Additionally, Fibre Channel provides data communication at relatively high rates (e.g., 1064 Mbps) over either copper and\/or optical fiber cables. Data communication rates may over Fibre Channel media may increase in accordance with further technological developments. Copper cables are generally utilized when various storage devices  are separated from host systems - through - by intra-cabinet connections. Optical cables may support separation distances up to 500 meters from a device to a hub (a Fibre Channel interconnection unit within SAN fabric ) and up to 10 kilometers between hubs. Fibre Channel further utilizes various communication topologies such as point-to-point, arbitrated loop, and star topologies. Fibre Channel also encapsulates or supports various communication protocols such as SCSI and Internet Protocol (IP) protocols. Devices that do not support Fibre Channel can be coupled to a Fibre Channel fabric via a bridge device. Specifically, numerous commercially-available bridge devices (such as Hewlett-Packard Company SURESTORE SCSI BRIDGE FC 4\/1\u2122, enable a SCSI device to be deployed on a SAN that employs a Fibre Channel fabric. Although Fibre Channel is typically utilized for SAN fabric , other communication mechanisms may be utilized. For example, it is frequently appropriate to perform remote mirroring operations to redundantly store mission-critical data at remote locations. For such operations, asynchronous transfer mode (ATM) network elements or leased-lines (T-, OC-, and\/or the like) may be employed.","Clients - through -M may communicate with host systems - through - via communication network . Communication network  may comprise any number of communication media, such as ATM, wireless, and\/or leased-line links. By communicating with host systems - through -, clients - through -M may obtain data stored on the SAN . For example, clients - through -M may possess operating systems that are configured to access network drives through host systems - through -. The network drives implemented by host systems - through - may manage various files on storage devices - and - and system .","The configuration utilized by storage area networks is quite advantageous. First, the storage is placed behind host systems - through -. Data transfers, for example, between system  and host systems - through - do not occur over the same communication network as data transfers between host systems - through - and clients - through -M. By placing the data transfers associated with stored data behind host systems - through -, overall system performance can be significantly enhanced. Moreover, the configuration of SAN  is robust in that the probability of failure is greatly minimized, because there is no single point of failure. Additionally, numerous additional data storage devices  or systems  may be added to system  without appreciable difficulty by coupling respective devices to SAN fabric . Accordingly, SAN  is advantageously scalable. It shall be appreciated that SAN  may be located at any location, i.e., it is not required to be located on the premises of an organization that utilizes its storage capacity. Additionally, SAN  may be advantageously managed by a separate entity from the organizations that utilize its storage capacity.","FC-to-SCSI bridges and preferably restrict access to system  according to the partitioning scheme. FC-to-SCSI bridges and may be implemented according to the bridging embodiments disclosed in U.S. Pat. Ser. No. 10\/032,662 entitled \u201cSYSTEM AND METHOD FOR MANAGING ACCESS TO MULTIPLE DEVICES IN A PARTITIONED DATA LIBRARY.\u201d As previously noted, FC-to-SCSI bridges and receive authorized host information from partitioning management controller  by receiving WWNs associated with authorized host systems. It shall be appreciated that Fibre Channel messages are addressed with source IDs and not WWNs. Accordingly, FC-to-SCSI bridges and preferably maintain a source ID-to-WWN table. When a SCSI command is received by one of FC-to-SCSI bridges and , the bridge determines the source ID from the FC message. A table look-up is preferably performed to determine the originating host system WWN. The respective bridge utilizes the information received from partitioning management controller  to determine whether the originating host system is authorized to access the device associated with the command. If it is authorized, the command is passed to either external controller  or one of tape drives through ","For example, host systems - through - determine which devices are communicatively coupled to SAN  by performing device discovery. Pursuant to SCSI protocols and the like, host systems - through - send a device identification query to each device within a given device range. In accordance with the device protocol, the devices respond by sending various information such as vendor ID, product ID, and firmware revision information. When host systems - through - perform device discovery, host systems - through - only discover the devices associated with system  that are permitted by the partitioning scheme. Specifically, FC-to-SCSI bridges and do not bridge or route a device identification query unless the originating host system is authorized via system resource table  and permissions table . Accordingly, library resources belonging to one of host systems - and - are not exposed to the other host systems.","Additionally, host systems - through - respectively discover ones of the multiple instances of external controller  according to the partitioning scheme. Host systems - through - may see the LUNs (, , , and ) behind FC-to-SCSI bridges depending on the partitioning scheme. Each LUN pursuant to the suitable device discovery protocol will identify itself as a distinct tape library controller by returning an appropriate vendor ID, product ID, and firmware revision information. Additionally, host systems - through - may determine the contents of each virtual tape library or partition by sending a \u201cRead Element Status\u201d or other suitable command to the various LUNs. External controller  will respond according to the partitioning scheme by only identifying the elements of the respective partitions. Also, external controller  may renumber IDs of physical elements to virtual elements.","As described in greater detail in U.S. Pat. Ser. No. 10\/032,662 entitled \u201cSYSTEM AND METHOD FOR MANAGING ACCESS TO MULTIPLE DEVICES IN A PARTITIONED DATA LIBRARY,\u201d FC-to-SCSI bridges and may perform LUN renumbering. The view of the LUNs behind FC-to-SCSI bridges and may vary on a per-host system basis. For example, host system - may only be allowed access to the first partition emulated by external controller . Accordingly, FC-to-SCSI bridges may renumber the LUNs visible to host system - so that only one LUN is associated with a library controller device. Accordingly, resources associated with other partitions may be hidden from host system -. Additionally, FC-to-SCSI bridges and may preferably perfonn LUN renumbering such that each host system - through - sees a continuous series of LUNs on each SCSI bus with each series beginning with 0. Specifically, this process facilitates compatibility with various operating systems.","After obtaining device identification information, host systems - through - may issue commands to initiate data transfers to or from the tape cartridges in their respective partitions. For example, certain commands may be sent to the respective LUN of external controller . External controller  may translate the command into the appropriate form for internal controller  (e.g., performing device or element renumbering). After queuing the command (if necessary), external controller  may send the command to internal controller . After the operation associated with the command is complete, external controller  receives a response from internal controller . External controller  then sends a response to the originating host system of host systems - through -.","In embodiments of the present invention, data mover functionality is preferably implemented in system . Data mover functionality refers to the capability of performing a data transfer from one storage device to another storage device without appreciably utilizing the processing capacity of a host system. For example, host system - may send a data mover command to a virtual tape drive of system  in its partition. The command may identify another storage device (e.g., storage device -) and a file, for example. In response, the virtual tape communicates with the storage device to transfer the file to its tape cartridge. However, it shall be appreciated that enabling a physical tape drive to perform this functionality is problematic. For example, SCSI devices cannot directly communicate with Fibre Channel disk arrays.","Accordingly, FC-to-SCSI bridges and preferably implement data mover functionality. As described in greater detail in U.S. patent application Ser. No. 10\/032,923 entitled \u201cSYSTEM AND METHOD FOR PERIPHERAL DEVICE VIRTUAL FUNCTIONALITY OVERLAY,\u201d FC-to-SCSI bridges and may respond to peripheral-to-peripheral data mover commands. For example, the data movers may be implemented to be addressed as separate entities (e.g., Fibre Channel LUNs). If the data movers are addressed by separate Fibre Channel LUNs, the data movers should be added to respective partitions to enable their use by host systems - through -. Respective partitions to enable their use by host systems - through -. By adding the data movers to partitions, the security of the partitioning scheme may be maintained.","Alternatively, FC-to-SCSI bridges and may \u201coverlay\u201d data mover functionality on tape drives through . This may be implemented as a \u201cdata move\u201d (standardized as \u201cXCOPY\u201d) SCSI command. The command would be addressed to the Fibre Channel LUN mapped to a tape drive  by the respective bridge . However, the \u201cdata move\u201d command would not be sent to the tape drive  by the respective bridge . Instead, the respective bridge  would intercept the command and would emulate the tape drive  by responding to the command. In this implementation, the data movement functionality is secured using the same security settings as the partition in which the tape drive belongs.","To illustrate operations of system  in a storage area network environment, reference is now made to  that includes flowchart . Process flowchart  illustrates steps involving components in system  of  according to embodiments of the present invention. In step , host system - sends \u201cplace tape cartridge  into drive\u201d message to LUN  of the SCSI bus coupled to external controller  and FC-to-SCSI bridge . The message is received by FC-to-SCSI bridge in step . FC-to-SCSI bridge determines the WWN of host system - by examining the source ID of the Fibre Channel message (step ). FC-to-SCSI bridge uses the determined WWN to perform LUN renumbering (step ). FC-to-SCSI bridge determines whether host system - is authorized to access the renumbered LUN of the respective SCSI bus (step ). If authorized, FC-to-SCSI bridge passes the message to external controller  (step ). External controller  translates the message according to the partitioning scheme (e.g., translates virtual tape cartridge  into physical tape cartridge ) in step . External controller  passes the translated command to internal controller  (step ). In step , internal controller  controls the robotics subsystem to place tape cartridge  into tape drive . Internal controller  communicates an \u201coperation completed\u201d message to external controller  (step ). In step , external controller  communicates an \u201coperation completed\u201d message to host system - via FC-to-SCSI bridge ","Although embodiments of the present invention have been described utilizing a tape library, it shall be appreciated that the present invention is not so limited. Embodiments of the present invention may be implemented for libraries utilizing any type of moveable media such as CD-ROMs, DVDs, and\/or the like.","Although embodiments of the present invention have described partitioning known SCSI tape libraries, the present invention is not so limited. The present invention may partition libraries that designed to attach directly to a Fibre Channel fabric. For such libraries, the present invention may utilize the native Fibre Channel security functionality of the FC sub-components of the library.","Embodiments of the present invention provide numerous advantages. Specifically, embodiments of the present invention enable existing tape libraries to be partitioned to allocate their data storage capacity to various host systems. By doing so, organizations that require moderate storage capacity may receive the benefit of the reduced cost of storage capacity associated with moveable media libraries. Moreover, embodiments of the present invention permit partitioning to occur in a manner that is transparent to host systems. Accordingly, specialized software is preferably not required. Additionally, embodiments of the present invention do not require multiple processor-intensive adapter cards or limit the data transfer capacity of data transfer elements. Embodiments of the present invention also prevent host systems from discovering library resources that belong to other organizations. Similarly, embodiments of the present invention secure resources of the various partitions to prevent unauthorized host systems from accessing library resources that belong to another organization."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"P-00014","num":"00014"},"figref":"FIG. 1"},{"@attributes":{"id":"P-00015","num":"00015"},"figref":"FIG. 2"},{"@attributes":{"id":"P-00016","num":"00016"},"figref":"FIG. 3"},{"@attributes":{"id":"P-00017","num":"00017"},"figref":["FIG. 4","FIG. 1"]},{"@attributes":{"id":"P-00018","num":"00018"},"figref":"FIG. 5","b":"4"}]},"DETDESC":[{},{}]}
