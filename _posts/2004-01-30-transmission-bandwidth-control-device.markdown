---
title: Transmission bandwidth control device
abstract: Included are a network information database for storing the statistical information collected from a router, a user request processing unit for accepting and processing a flow forwarding request from a user terminal connected to the network, a route control unit for searching for a route corresponding to the request from the user terminal by referring to the network information database, a load sharing control unit for executing such a load sharing process as to generate router setting information for sharing a transmission load of the network by referring to the network information database, and a router control unit for setting a router based on the route information determined by the route control unit and on the router setting information generated by the load sharing control unit.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07630317&OS=07630317&RS=07630317
owner: Fujitsu Limited
number: 07630317
owner_city: Kawasaki
owner_country: JP
publication_date: 20040130
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE INVENTION","OTHER EXAMPLE 1","OTHER EXAMPLE 2","MODIFIED EXAMPLES"],"p":["The present invention relates to a transmission bandwidth control technology in a network.","Generally, there are quality guaranty traffic forwarding methods and quality non-guaranty traffic forwarding systems as conventional technologies related to the transmission across the network.","Of the forwarding methods, for example, a Diffserv (Differentiated Services) system, an Intserv (Integrated. Services) system and an MPLS (Multi Protocol Label Switching) QoS (Quality of Service) path system, are given as the quality guaranty traffic forwarding systems on IP (Internet Protocol) networks.","Of the quality guaranty traffic forwarding systems, in the Diffserv system, an ingress router in the network distinguishes between traffic types, effects marking on a packet, and also restricts an inflow quantity of the traffic in accordance with a type of the packet. Further, in the Diffserv system, a priority is determined based on the traffic type. Therefore, the intra-network router forwards the packet according to this priority. This enables, in the Diffserv system, a quality of the quality guaranty traffic to be guaranteed.","Moreover, of the quality guaranty traffic forwarding systems, in the Intserv system, each router ensures a requested bandwidth for every flow by previously using an RSVP (Resource Reservation Protocol) protocol, whereby the quality can be maintained. Further, the Intserv system has a traffic control mechanism that rejects a request for the flow impossible of a bandwidth reservation by admission control, and guarantees the bandwidth for a queue in the router.","Further, of the quality guaranty traffic forwarding systems, in the MPLS (Multi Protocol Label Switching) QoS path system, each router ensures the bandwidth by use of RSVP-TE when a LSP is set up and allocates the quality guaranty traffic to the path, thereby making it possible to guarantee the quality of the quality guaranty traffic.","By the way, in the quality guaranty services, there might be a case where the path can not be set up on an optimal route depending on a traffic condition. For example, when the path can not be set up, a service providing side performs a service on a detour route. Further, in the case of being unable to ensure the bandwidth just when a quality guaranty traffic request is given from a terminal, in the quality guaranty traffic forwarding system, normally a call loss occurs.","For avoiding such a problem in these quality guaranty traffic forwarding systems, there is a method of reducing a call loss ratio by reallocating the existing flow to by far the shortest route. According to this method, a minimum-cost route is calculated for the quality guaranty traffic request from the terminal. At this time, when the calculated route contains only one link unable ensures the bandwidth, one flow contained in that link is selected. Then, this method schemes to make a reallocation to by far the different shortest route. When the route can be set up through this reallocation, there decreases the call loss of the request from the terminal.","Further, as non-guaranty traffic forwarding systems, there are hop-by-hop forwarding on a shortest route base and a dynamic load balancing system using multi-paths.","Of the non-guaranty traffic forwarding systems, in the hop-by-hop forwarding on the shortest route base, the shortest route is selected by a route search mechanism of IGP (Interior Gateway Protocol) such as OSPF (Open Shortest Path First). Then, the selected shortest route is reflected in a routing table of the router. At this time, the packets are forwarded packet by packet to a next hop while referring to the routing tables of the respective routers.","Further, of the non-guaranty forwarding systems, in the dynamic load balancing method using the multi-paths, the present inventors propose technologies of setting up a plurality of paths by MPLS and forwarding in a way that shares the traffic with the respective paths.","Moreover, the present inventors propose such a technology that functions required for the load balancing are distributed and allocated to a centralized control server and to the routers, and the function used as the necessity arises is switched over between the server and the router, thereby flexibly actualizing the centralized control and the distributed control.","First, generally the router for carrying out the existing systems forwards the guaranty traffic in preference to the non-guaranty traffic in order to guarantee a high throughput and a low delay of the quality guaranty traffic. Accordingly, in the case of letting the quality guaranty traffic and the non-guaranty traffic flow to the same link, as a quantity of the quality guaranty traffic increases, a quantity of the non-guaranty traffic that can be forwarded is restricted. Namely, the existing system has less of residual bandwidths for the non-guaranty traffic.","Therefore, in the non-guaranty traffic, when letting large quantity of packets, some are discarded due to the queue in the router.","Moreover, also in a case where there are links across which a large quantity of non-guaranty traffic flows, the existing system accepts and lets the quality guaranty traffic without considering that the large quantity of packets of non-guaranty traffic are to be discarded.","Still further, even by performing a link extension or raising a link speed in order to avoid discarding the packets of the non-guaranty traffic, as the link does not always come to state of congestion, it follows that a link using efficiency becomes lower than before the extension. Further, in this case, a problem was a rise in cost for the link extension.","Moreover, in the existing system, the quality guaranty path was not always set up on the best route, depending on the traffic condition. Then, in the existing system, there was a case in which if the bandwidth, though unable to ensure the bandwidth on the shortest route, can be ensured on a detour route, the detour route is to be selected.","As a system for steering clear of this problem, there is disclosed a technology of scheming to reallocate, when the requested quality is not met, the existing quality guaranty flow, i.e., the quality guaranty path to the best path.","According to the conventional technology, however, a route calculation based on Dijkstra algorithm must be performed whenever trying a reallocation of one single flow, and it was required that the repetitive calculations be performed till there is discovered by far the best route. Further, according to the conventional technology, on the occasion of shifting a path, it is required that the existing path is deleted and a path to a new route be set up. Moreover, there was one flow in which the route is improved by this method when there occurs a state of being unable to meet a requested quality.","The invention was devised in view of the items given above, and an object that should be accomplished is to provide a technology of performing, while maintaining a forwarding quality of quality guaranteed traffic and a forwarding quality of a non-guaranteed traffic in forwarding of the traffics, such an allocation as to ensure forwarding routes for both of them.","The invention adopted the following means in order to solve the problems.","Namely, the invention is a device for controlling a transmission route for a flow in a network, comprising, a statistical information collecting unit for collecting pieces of statistical information from respective routers connected to the network, a network information database for storing the statistical information collected, a user request processing unit for accepting and processing a flow forwarding request from a user terminal connected to the network, a route control unit for searching for a route corresponding to the request from the user terminal by referring to the network information database, a load balancing control unit for executing such a load balancing process as to generate router setting information for balancing a transmission load of the network by referring to the network information database, and a router control unit for setting a router based on the route information determined by the route control unit and on the router setting information generated by the load balancing control unit.","The invention is that the transmission route for the flow corresponding to the user request is set up, and the transmission-load-shared router setting information is generated.","Therefore, according to the invention, the transmission route for the flow in which the load state of the path in the network is shared, can be set up in a way that meets the user request.","Further, the invention is that the route control unit may include quality guaranteed route searching module searching for quality guaranteed route information corresponding to the forwarding request for the forwarding quality guaranteed flow by referring to link statistical information concerning links-between the respective routers from on the network information database and quality non-guaranteed route searching module searching for quality non-guaranteed route information corresponding to the forwarding request for the forwarding quality non-guaranteed flow, the load balancing control unit may execute the load balancing process by referring to the quality guaranteed route information and the quality non-guaranteed route information, and the router control unit may set the quality guaranteed route and the quality non-guaranteed route in accordance with the searched quality guaranteed route information and quality non-guaranteed route information.","Moreover, the invention is that it may further comprise a load judging unit for judging whether or not a load state of a path is equal to or smaller than the threshold value by referring to the link statistical information, when the load state of the path is equal to or smaller than the threshold value, the quality guaranteed route searching means may search for the quality guaranteed route information, the load balancing control unit may execute the load balancing process by referring to the quality guaranteed route information, and the router control unit may set the quality guaranteed route in accordance with the quality guaranteed route information.","Still further, the invention is that it may further comprise a congestion judging unit for judging by referring to the link statistical information whether a load state of the path falls into a congestion or not, wherein when the load state of the path falls into the congestion, the quality non-guaranteed route searching means may search for quality non-guaranteed route information, the load balancing control unit may execute the load balancing process by referring to the quality guaranteed route information and the quality non-guaranteed route information, and the router control unit may set a quality non-guaranteed route in accordance with the quality non-guaranteed route information.","Then, the invention is that the load balancing control unit may execute the load balancing process at an interval of a predetermined period.","Preferred embodiments of the invention will hereinafter be described with reference to the drawings.","In the embodiment, an extreme decline of a forwarding quality of a quality non-guaranteed flow because of a quality guaranteed flow is avoided. Further, in the embodiment, congestion is avoided by effectively utilizing network resources. What is given above will be explained as a policy  in the embodiment.","Further, in the embodiment, the extreme decline of the forwarding quality of the quality non-guaranteed flow because of the quality guaranteed flow is avoided, and the quality guaranteed flow is always allocated to an optimal route, thereby decreasing a call loss of a bandwidth guaranty service. What is given above will be explained as a policy  in the embodiment.","Moreover, in the following discussion in the embodiment, the quality guaranteed flow is referred to as a GS (Guaranteed Service) flow, while the quality non-guaranteed flow is referred to as a BES (Best Effort) Service) flow.","Note that, in this embodiment, the term of \u201cload balancing\u201d refers to distributing the load of inequality to plural paths in the flow. Namely, in this embodiment, \u201cload balancing\u201d and \u201cload sharing\u201d refer to both the meaning of distributing the load of plural paths in the flow with equality and distributing the load of plural paths in the flow with inequality.",{"@attributes":{"id":"p-0064","num":"0063"},"figref":["FIGS. 1 and 2","FIG. 1","FIG. 2"],"b":["200","201"]},"The policy setting screen  in  has a GS route policy setting area for a network administrator, etc. to input settings of a policy for setting a route about the GS flow and of a sub-policy. Further, this policy setting screen  has a BES route policy setting area for the network administrator, etc. to input settings of a policy for setting a route about the BES flow and of a sub-policy.","Priority conditions about the route for the GS flow and the route for the BES flow are inputted as the policy settings and the sub-policy settings in the GS route policy setting area and in the BES route policy setting area . Moreover, conditions of switchover instructions, etc. of setting the policy and the sub-policy according to paths, can be also set in the GS route policy setting area and in the BES route policy setting area . Note that the sub-policy in the embodiment serves to establish detailed route selecting conditions in this policy when in a route selecting process based on the policy in the embodiment.","The policy setting screen  in  has a reallocation threshold value setting area for setting a threshold value on the occasion of judging whether a route reallocation about the GS flow is conducted or not. Further, the policy setting screen  has a congestion judging threshold value setting area for setting a threshold on the occasion of judging whether or not the congestion occurs on the route about the BES flow. Note that there will hereinafter be explained a judgment as to whether or not the reallocation related to the GS flow and the load on the route related to the BES flow are equal to or smaller than threshold values which are set in the reallocation threshold value setting area and in the congestion judging threshold value setting area ","To begin with, a route selection system and a link residual-bandwidth calculation system in the policy  and the policy  will be described in detail.","<Route Selection System>","As systems for determining a route between nodes residing in the network, there exist mainly three systems such as a minimum hop route selection system, a large bandwidth route selection system and a minimum bandwidth route selection system. In the embodiment, a proper route selection system is applied to each of GS flow processing and BES flow processing.","The minimum hop route selection system is a system for selecting a route containing a minimum number of hops across the two nodes. Generally, on the IP network at the present, the router autonomously calculates the shortest route. In the embodiment, in a case where this minimum hop route selection system is applied to the GS flow and to the BES flow, a packet forward delay in the network is shortened by selecting the route having the shortest distance with respect to every flow. In the embodiment, when the every flow flowing through each quality class has a strict condition of the delay about a higher-order application, it is possible to prevent deterioration of quality of the flow by use of this minimum hop route selection method.","The large bandwidth route selection system is a system for selecting such a route that a residual (available) bandwidth of the flow passing route is maximized. Note that the residual bandwidth of the route indicates a value deemed as a residual bandwidth of the route by executing some processing with respect to the residual bandwidth of each of cross-over links of the route. In the embodiment, for instance, an inverse number of the value of the residual bandwidth of the link is defined as a link's cost and added with respect to each of cross-over links. It can be said from this that a route having a smaller total value of the link's cost is a route having a larger residual bandwidth. Note that a concrete module acquiring such a route as to maximize the residual bandwidth can be exemplified by, for example, Dijkstra algorithm for calculating a minimum cost route.","In the embodiment, the large bandwidth route selection system is used for the GS flow, thereby selecting links having the bandwidths that are as residual as possible within the network. Therefore, in the embodiment, it is feasible to enhance the using efficiency of the bandwidth resource within the network. Further, in the embodiment, the large bandwidth route selection system for the BES flow, thereby selecting links having the bandwidths that are as residual as possible. Hence, in the embodiment, with an effect that the using efficiency of the bandwidth resource is enhanced, it is possible to reduce a probability of coming to the state of congestion also in the case of an abrupt increase in forwarding quantity of the BES flow.","The minimum bandwidth route selection system is a system for selecting such a route as to, on the contrary to the large bandwidth route selection system, minimize the residual bandwidth of the passing route. The residual bandwidth of the route indicates, similarly to the large bandwidth route selection system, a value deemed as a residual bandwidth of the route by executing some processing with respect to the residual bandwidth of each of cross-over links of the route. In the embodiment, for example, a value into which the values of the residual bandwidths are added up with respect to the cross-over links is set as a residual bandwidth of the route, whereby a route having the minimum total value can be obtained as a minimum residual bandwidth route. A concrete search means at this time can involve the use of the Dijkstra algorithm for calculating the minimum cost route similarly to the large bandwidth route selection system.","In the embodiment, the minimum bandwidth route selection system is used for the GS flow, thereby selecting the route from among the links each having the residual bandwidth that is as small as possible within the network. Therefore, there can remain as many residual bandwidths as possible with respect to the links other than the selected links. As a result, when there is a path set-up request about the quality guaranteed flow from the next time onwards, an effect of increasing a probability that the route is to be discovered even in the case of the requested bandwidth being large, can be expected. In a case here the bandwidth requested by a forwarding application is large, it is feasible to expect an effect of decreasing the call loss ratio by applying this minimum bandwidth route selection system.","In the embodiment, however, in the case of using the minimum bandwidth route selection system for the BES flow, the links having the residual bandwidths that are as small as possible within the links, are selected as a route, thereby leading to an easy-to-make prediction that there occurs the state of congestion also when the forwarding quantity of the BES flow abruptly rises. Accordingly, in the embodiment, the minimum bandwidth route selection system is not applied to the BES flow.","In the embodiment, the varieties of route selection methods are applied to the route selection for the GS flow and to the route selection for the BES flow that involves performing the dynamic load balancing. Further, considering that the minimum bandwidth route selection system is not applied to the BES flow, in the embodiment, the following route selection systems are to be carried out.","1. A system for applying the minimum hop route selection to the GS flow and to the BES flow","2. A system for applying the minimum hop route selection to the GS flow and applying the maximum bandwidth route selection to the BES flow","3. A system for applying the maximum bandwidth route selection to the GS flow and applying the minimum hop route selection to the BES flow","4. A system for applying the maximum bandwidth route selection to the GS flow and the BES flow","5. A system for applying the minimum bandwidth route selection to the GS flow and applying the minimum hop route selection to the BES flow","6. A system for applying the minimum bandwidth route selection to the GS flow and applying the maximum bandwidth route selection to the BES flow","The following are explanations of these systems.","<Link Residual Bandwidth Calculation System in Route Selection for BES Flow>","In the embodiment, on the occasion of carrying out the route selections, the route is selected based on respective link residual bandwidths. At this time, in regards to setting these residual bandwidths, the calculations are made corresponding to traffic quantities of the GS flow and of the BES flow in the links. To begin with, a link residual bandwidth calculation method on the occasion of selecting a path for the BES flow, will be explained.",{"@attributes":{"id":"p-0087","num":"0086"},"figref":["FIG. 3","FIG. 3"]},"In , the GS flows and the BES flow exist in mixture in the link. Therefore, on the occasion of thinking about the residual bandwidth for the BES flow, it is required that a GS flow-based traffic be considered. Accordingly, a residual bandwidth W for the BES flow is a value into which a quantity of the GS flow and a quantity of the BES flow are subtracted from the link bandwidth WL.","In this case, however, concerning the GS flow, generally the bandwidth declared by a user might be different from an actual bandwidth of the flow that actually flows, and hence there is a necessity of distinguishing between the values of these bandwidths. Further, concerning the BES flow also, though the user generally does not declare the bandwidth, there is considered a case where a network administrator or the like assigns a proper bandwidth (which is called a request bandwidth) corresponding to the application to be used. In this case, the actual using bandwidth and the request bandwidth are required to be considered in separation. Taking the above points into account, as the residual bandwidths usable for the BES flow, the following three types of formula are considered.\n\nWL\u2212(WG+WB)\u2003\u2003(a)\n\nWL\u2212(WG+Wb)\u2003\u2003(b)\n\nWL\u2212(Wg+Wb)\u2003\u2003(c)\n","Herein, WL is a link's physical bandwidth (which will hereinafter be also referred to as a link bandwidth). Further, WG is a total of the already-reserved bandwidth for the GS flow. Then, WB is a total of the request bandwidth for the BES flow. Moreover, Wg is an actual using bandwidth for the GS flow that flows in the link. Yet further, Wb is an actual using bandwidth for the BES flow that flows in the link.","The formula (a) is what the total of the reserved bandwidth for the GS flow and the request bandwidth for the BES flow is subtracted from the link bandwidth. In the case of using the formula (a), there is considered a case in which the actual amount of flow reaches neither the reserved bandwidths nor the request bandwidths, however, bandwidths for that amount can be surely guaranteed in the embodiment.","The formula (b) is what the reserved bandwidths for the GS flow and the actual using bandwidths for the BES flow are subtracted from the link bandwidth. In the case of using the formula (b), an amount of the reserved bandwidths for the GS flow is surely guaranteed, while in connection with the BES flow the actual using bandwidths are to be considered. Accordingly, in the embodiment, it is possible to scheme to effectively utilize the bandwidths.","The formula (c) is what the actual using bandwidths for the GS flow and for the BES flow is subtracted from the link bandwidth. In the case of the formula (c), the residual bandwidth becomes what an actual link using condition at a certain point of time is reflected in. In this instance, when a total (Wg+Wb) of the actual using bandwidths is smaller than a total (WG+WB) of the reserved bandwidth for the GS flow and the request bandwidth for the BES flow, the residual bandwidth W becomes extremely large as compared with (a) and (b). Hence, in the embodiment, in the case of using the formula (c), the bandwidths can be effectively utilized.","Further, the way of thinking of the residual bandwidth that described above takes into consideration the value into which the bandwidths for the GS flow and for the BES flow are subtracted from the link's physical bandwidth. Other than this thinking way, in the embodiment, a ratio of the residual bandwidth to the link's physical bandwidth can be also utilized. Namely, (a) through (c) are divided by the link bandwidth, whereby values of the following formula (d) through (f) are utilized as residual bandwidths.\n\n1\u2212(WG+WB)\/WL\u2003\u2003(d)\n\n1\u2212(WG+Wb)\/WL\u2003\u2003(e)\n\n1\u2212(Wg+Wb)\/WL\u2003\u2003(f)\n","Moreover, in the embodiment, it is also considered not that the residual bandwidth is defined as a ratio of the bandwidth for each flow to the link's physical bandwidth but that it is used as a ratio of the bandwidth for the BES flow to a value into which the amount of the reserved bandwidth for the GS flow is subtracted from the link's physical bandwidth.\n\n1\u2212Wb\/(WL\u2212WG) \u2003\u2003(g)\n\n1\u2212WB\/(WL\u2212WG) \u2003\u2003(h)\n","In these formula (g) and (h), the reserved bandwidth for the GS flow is subtracted beforehand from the link's physical bandwidth, and hence in the embodiment the bandwidth for the amount of the GS flow can be surely guaranteed in advance.","<Link Residual Bandwidth Calculation System in Route Selection for GS Flow>","Next, a link residual bandwidth calculation method on the occasion of selecting a path for the GS flow, will be explained.","In the BES service, there is generally no declaration of the request bandwidth from the user. By contrast, it is considered in GS that there is the declaration of the bandwidth from the user. Accordingly, on the occasion of selecting the path, in order for a certain link to be selected as a route, it is required that there at first is a bandwidth equal to or larger than the request bandwidth with respect to at least the link.","For selecting the path on the network in a way that takes this into account, in the embodiment, in a case where a certain network topology is given, the path selection is made by choosing only the links having the residual bandwidths for GS that are equal to or larger than the request bandwidth with respect to the links on this topology.","Concretely, when making the path selection in the embodiment, on the occasion of performing the calculation using the existing Dijkstra algorithm, the topology is configured of only the links having their residual bandwidths for GS that are equal to or larger than the request bandwidth with respect to all the links of the network, and the calculation is performed. Further, in the embodiment, the path selection is made excluding the links exceeding the threshold value due to a flow of a large quantity of traffic for the BES service among the links having the residual bandwidths for GS that are equal to or larger than the request bandwidth. This enables, in the embodiment, the path for GS to be set, which does not affect the BES traffic.","Next, the residual bandwidth for the quality guaranteed service described above will be explained.",{"@attributes":{"id":"p-0103","num":"0102"},"figref":"FIG. 4"},"In , C is a coefficient representing an occupying ratio of the GS flow in the link. For instance, in the case of defining that 80% of the link may be given to the GS flow, it becomes such as C=0.8. From the above, a value that C can take is given by 0<C\u22661. Further, the bandwidth that may be occupied by the GS flow is given such as C\u00d7WL, however, as a matter of fact, a statistical multiplexing effect can be expected corresponding to a flow accommodation quantity. In face, the statistical multiplexing effect enables an acceptance of more GS requests than C\u00d7WL. Accordingly, C is what represents a ratio of how much the requests are to be accepted. At this time, it becomes such as C>1.","In the embodiment, supposing that the BES traffic quantity may not be considered as the residual bandwidth for GS is calculated, it is considered that the following three types are to be applied when methods of calculating the residual bandwidth usable for the GS flow.\n\n(C*WL)\u2212WG\u2003\u2003(i)\n\n(C*WL)\u2212Wg\u2003\u2003(j)\n\nC*(C*WL)\u2212WG\u2003\u2003(k)\n","Herein, WL is a link's physical bandwidth. Further, WG is a total of the already-reserved bandwidth for the quality guaranteed flow. Then, Wg is an actual using bandwidth for the quality guaranteed flow that flows within the link. Moreover, C is a ratio at which the link can be used for GS. Yet further, C is a coefficient for taking the statistical multiplexing effect into consideration.","Note that the way of thinking of the residual bandwidth takes into consideration the value into which the Bandwidth for the GS flow is subtracted from the link's physical bandwidth, however, other than this thinking way, it is possible to utilize a ratio of the residual bandwidth to the link's physical bandwidth. Namely, in (i) through (k), WG or Wg is divided by a usable link bandwidth, whereby the following (l) through (n) are utilized as residual bandwidths.\n\n1\u2212WG\/(C*WL)\u2003\u2003(l)\n\n1\u2212Wg\/(C*WL)\u2003\u2003(m)\n\n1\u2212WG\/(C*C*WL)\u2003\u2003(n)\n","The formula (i) and (l) are each what the reserved bandwidth is subtracted from the link bandwidth usable for the GS flow, and a ratio thereof. Note that a case where the amount of the GS flow that actually flows might be less than the reserved bandwidth, is considered, however, the guaranty herein is that the request bandwidth be usable simultaneously for all the GS flows.","Moreover, the formula (j) and (m) are each what the actual using bandwidth for the GS flow is subtracted from the link bandwidth usable for the GS flow, and a ratio thereof. In the case of a flow that continues for a long period of time such as streaming, there is considered a possibility in which the user might temporarily halt the flow in the midst of the transmission. In such a case, the actual amount of GS flow is small for the reserved bandwidth, and hence the bandwidth to be used can not be effectively utilized. In this case, the residual bandwidths not in the formula (i) and (l) but in the formula (j) and (m), thereby enabling the actually-residual bandwidths to be effectively used.","The formula (k) and (n) are each a result of multiplying the link bandwidth usable for the GS flow by a coefficient making allowances for the statistical multiplexing effect and thereafter subtracting the reserved bandwidth for the GS flow therefrom, and a ratio thereof. It is feasible to respond to much more requests making allowances for the statistical multiplexing effect in GS by use of this residual bandwidth.","Further, in the formula (i) through (n), C is deemed not as a constant but as a variable, whereby a ratio of the link usable for the GS flow can be dynamically changed. At this time, for example, let n be the number of best effort flows, and let C be a n's function C=f(n). When an average bandwidth per BES flow can be predicted, for instance, in the case of the network where a main application of BES can be specified, a bandwidth required for BES can be calculated from the number of BES flows and from characteristics of the application. Based on this, the ratio of the link usable for GS is increased or decreased, thereby enabling the traffic control taking the BES flow into consideration to some extent.","The use of the link residual bandwidth calculation system when selecting the BES flow\/GS flow routes as described above, in the embodiment, makes it feasible to perform the route selection taking into account the quantity of the GS flow and the quantity of the BES flow, mutually.","In some of the systems for selecting the maximum bandwidth route for, e.g., BES flow, in the case of calculating the link residual bandwidth by way of the formula (a): WL\u2212(WG+WB), the residual bandwidth is to be considered on the assumption that an amount of WG+WB is unusable even if the actual traffic quantity is small. Accordingly, the route to be searched for the BES flow is selected so as to pass across the link with less of the amount of reserved GS flow and to pass across the link with less of the BES flow requests. This results in an ever-made selection of the link where the congestion is hard to occur for the BES flow, and it is therefore possible to decrease the probability that the route selected afresh for the BES flow encounters the congestion.","Moreover, in the case of calculating the link residual bandwidth by way of the formula (c): WL\u2212(Wg+Wb), the most-residual bandwidth is selected based on the actual using bandwidths for GS and for BES. Accordingly, in the embodiment, the operation having a high bandwidth using efficiency at all times become possible.","<Route Determining System in the Case of Plural (Multiple) Routes Being Discovered when Selecting Route>","Furthermore, in the embodiment, when selecting the route, there might be discovered a plurality of routes those are equal to each other in their, for instance, minimum hop count. The plurality of these routes might occur when the route calculation is performed on the Dijkstra calculation. Further, the discovery of the plural routes is the same with the maximum bandwidth route selection system and the minimum bandwidth route selection system as well. At this time, pluralities of selection systems (sub-policies) that follow are to be considered as to which route is selected from among the plurality of routes discovered. With respect to the BES flow, however, the system for selecting the minimum bandwidth route is not adopted.","(): When the search for the minimum hop route system is applied to the GS flow or the BES flow, when the pluralities of routes are searched for, the maximum bandwidth route is selected therefrom.","(): When the search for the minimum hop route system is applied to the GS flow, when the pluralities of routes are searched for, the minimum bandwidth route is selected therefrom.","(): When the search for the maximum bandwidth route system is applied to the GS flow or the BES flow, when the pluralities of routes are searched for, the minimum hop route is selected therefrom.","(): When the search for the minimum bandwidth route system is applied to the GS flow, when the pluralities of routes are searched for, the minimum hop route is selected therefrom.","The system in () involves, with respect to the GS flow, as described above, using the residual bandwidth taking allowances for a quantity of the intra-link BES flow by taking C small in the calculation of the residual bandwidth for GS. Then, the system in () selects the link containing, as much as possible, none of the BES flow. In this way, the system in () selects the route having a larger residual bandwidth, from among the plurality of routes. Accordingly, the system in () has an effect of reducing a probability that BES is to be discarded due to the GS flow. Further, the route having the residual bandwidth that is as large as possible is selected for the BES flow, thereby yielding an effect of decreasing a probability that the congestion occurs even in a case where the forwarding quantity of the BES flow rises.","Moreover, the system in () is that C in the calculation of the residual bandwidth for GS is taken large for the GS flow, whereby it follows that the residual bandwidth taking no allowance for the quantity of the intra-link BES flow, is to be used. Accordingly, in the system in (), the route having the small residual bandwidth is selected from among the plurality of routes, thereby yielding an effect of packing the GS flow into a specified link. This prevents, in the system in (), the BES flow in other link from undergoing an influence of the GS flow.","Moreover, concerning the systems in () and (), the selection of the minimum hop route for both of the GS flow and the BES flow results in selecting the route that is short of delay for the GS flow. Hence, the systems in () and () are effective in the network wherein there flow many applications that are strict to the delay.","In the route selection systems, with respect to the selection system on the occasion of selecting a certain route and the selection system on the occasion of conducting the route selection next time, a different selection system can be used. For example, in regards to the GS flow and the BES flow, when a quantity of the intra-network traffic is small, the minimum hop route selection is made for both, whereby the route with forwarding delays that is as small as possible is to be used. When in the policy , there might be a case in which a traffic quantity into which the GS flow and the BES flow flowing through the shortest route are added up, or a traffic quantity of the BES flow flowing through the shortest route, exceeds a certain threshold value. In this case, a change to select the maximum bandwidth route as a route for load balancing for the BES flow is made, whereby the BES flow flowing through the minimum hop route can avoid being affected by the GS flow. Moreover, when in the policy , there might be a case in which the traffic quantity into which the GS flow and the BES flow flowing through the shortest route are added up, or the traffic quantity of the GS flow flowing through the shortest route, exceeds a certain threshold value. In this case, a change to select the maximum bandwidth route as a detour route for the GS flow is made, whereby the BES flow flowing through the minimum hop route can avoid being affected by the GS flow.","These residual bandwidth calculation and route selection process will be described in the following embodiment. In the embodiment, a network control device periodically collects pieces of link statistical information from the respective routers. Further, the network control device manages pieces of information on the respective link residual bandwidths for GS. Then, the network control device calculates the residual bandwidth on the basis of the link static information and the residual bandwidth information. Note that this residual bandwidth calculation is, to be specific, made in a route control unit in the network control device.","<Dynamic Load Balancing System for Flow in Policy >","Normally, the BES flow is low in its priority when forwarded as compared with the GS flow. Therefore, if the congestion occurs, the quality of the BES flow declines. Such being the case, in the policy , when the ratio of the actual using bandwidth to the link's physical bandwidth exceeds a certain threshold value, a part of the BES flow of a path including this link is shifted to a different path (detour route) selected. In the embodiment, this process is referred to as a dynamic load balancing system  for the flow in the policy . Owing to this dynamic load balancing system  for the flow in the policy , the decline of the quality of the BES flow can be avoided in the policy .","Further, in the dynamic load balancing system in the policy , instead of setting ratio of the actual using bandwidth, a predetermined threshold value may be set in the BES flow occupying ratio at which to occupy unreserved bandwidth for GS. In this case, the BES flow is shifted to the detour route in the case of exceeding the threshold value of the BES flow occupying ratio. This process is referred to as a dynamic load balancing system  for the flow in the policy . This makes it feasible to judge whether the BES flow is shifted or not, according to the BES traffic quantity compared with the GS traffic quantity.","Moreover, in the policy , the BES flow can be surely guaranteed by providing a threshold value in a ratio of the declaration bandwidth for BES that occupies the unreserved bandwidth for GS.","<Reallocation System for GS Flow in Policy >","Further, in the embodiment, when accepting a request for the GS flow, there is a case in which an optimal path is not necessarily ensured (a reallocation system  for the GS flow). For example, as already stated, when there exists a large quantity of BES flow that flows across the link, there is a case of preventing an extreme decline of the quality of the BES flow by hindering that link from being selected by generating a QoS path.","At this time, in a case wherein the BES flow in the link that could not be selected comes to an end and the link becomes usable, that link is used for the GS flow. Namely, it might be better to make a reallocation to a more optimal path for the GS flow. For instance, when accepting the GS request, there is made a selection from a topology in which to connect the link of which the residual bandwidth obtained by the calculation of the link's using bandwidth does not exceed the threshold value set for the BES using bandwidth and is equal to or larger than the request bandwidth (a reallocation system  for the GS flow). Moreover, when a path using ratio, i.e., a ratio at which the actual using bandwidths occupy the physical bandwidths in the whole links configuring the path is less than the fixed value, the reallocation of the GS flow to the optimal path is conducted by shifting the GS flow accommodated in a less optimal path, e.g., a path containing a larger hop count (a reallocation system  for the GS flow). This enables, in the embodiment, the GS flow to be in the optimal state at all times. Further, at this time, because of taking allowances for the quantity of the BES flow together with the reallocation of the GS flow, the reallocation of the GS flow becomes possible only in the case of causing no decline of the quality of the BES flow.","Moreover, in the case of being unable to ensure the optimal path when making the GS flow request, for instance, there might be considered a case in which the path having the least hop count has already accommodated the quality guaranteed flow up to an allowable quantity. At this time, the GS flow is accommodated in other path having a larger hop count. When the bandwidth ensured for GS accommodated in the optimal path is less than the threshold value, the GS flow is reallocated to an optimal path (a reallocation system  for the GS flow). Note that if there is no necessity of considering the BES flow in the embodiment, the GS flow can be brought into the optimal state by use of this system. Furthermore, in the embodiment, the bandwidth is ensured for the optimal path by using the actual using bandwidth, and nevertheless an actually-unused state of the bandwidth are avoided, thus enabling the optimal path to be effectively utilized (a reallocation system  for the GS flow).","Moreover, in the embodiment, when reallocating the GS flow, there is a case where the GS flow request bandwidth can not be ensured. At this time, pluralities of QoS paths have already existed in the network, and hence there are only the residual bandwidths less than the request bandwidth. Supposing that a total sum of the residual ranges be larger than the request bandwidth, the request bandwidth can be ensured by reallocating some of the GS flows (a reallocation system  for the GS flow). This enables, in the embodiment, an acceptance of the GS request judged to be normally unacceptable without performing a complicated calculation.","<Architecture of Network Control Device in the Embodiment>",{"@attributes":{"id":"p-0136","num":"0135"},"figref":"FIG. 5"},"In , a network in the embodiment consists of routers , , , , ,  capable of controlling a label path as by MPLS. Then, the respective routers , , , , ,  are connected to a network control device . Note that settings of policies and sub-policies unified in all the routers shall be applied within the network in the embodiment.",{"@attributes":{"id":"p-0138","num":"0137"},"figref":"FIG. 6","b":["10","10","11","10","12","10","13","20","10","14","20","12","10","15","12","10","16","14","15"]},"Next, functional explanations of respective function blocks within the network control device  will be given.",{"@attributes":{"id":"p-0140","num":"0139"},"figref":"FIG. 7","b":["12","12"]},"To begin with, the network information database  is stored with IP addresses (self IP addresses) of the interfaces of the routers.","Further, the network information database  is stored with IP addresses of connecting destination interfaces. Then, the network information database  is stored with respective pieces of bandwidth information of the link's physical bandwidth (WL), the bandwidth reserved for the GS flow(WG), the bandwidth reserved for the BES flow(WB), the bandwidth actually used for the GS flow(Wg), and the bandwidth actually used for the BES flow(Wb).","Among the pieces of bandwidth information, with respect to the bandwidth (WG) reserved for the GS flow and the bandwidth (WB) reserved for the BES flow, on the occasion of respectively accepting the flow forwarding requests for GS and BES from the user terminals, the respectively ensured bandwidths are added up and thus held. Further, with respect to the bandwidth (Wg) actually used for the GS flow and the bandwidth (Wb) actually used for the BES flow, it is stored with values collected from the individual routers by the statistical information collecting unit at an interval of a predetermined period or at an interval of a predetermined time. Moreover, in regards to the IP addresses of the interfaces of the routers, the IP addresses of the connecting destination interfaces and the link's physical bandwidths (WL), the statistical information collecting unit collects them from the respective routers periodically or at a settled time. Note that the IP addresses of the interfaces of the routers, the IP addresses of the connecting destination interfaces and the link's physical bandwidths (WL) may be acquired beforehand as pieces of setting information from the outside and may also be retained on the network information database .","Still further, the network control device  in the embodiment includes the user request processing unit . This user processing unit  stores the network information database  with the request bandwidth for the BES and\/or GS flow that has been accepted from the user terminal .","Through this user request processing unit , on the occasion of making a flow forwarding request, the user terminal  sides can notify the request processing unit of the network control device, of a quality guaranty request by use of an arbitrary protocol such as http (Hyper Text Transfer Protocol), etc. Considered as this quality guaranty request is means such as displaying a quality guaranteed service menu as a Web page provided by the network from on the network control device  and prompting the user terminal  side to select a service, and so forth. Moreover, for the quality guaranty request, there is given also a method of notifying the user terminal  side such as Parley or JAIN (Java in Advanced Intelligent Networks), etc. that uses a technology of OpenAPI (Application Programming Interface), or XML (Extensible Markup Language), etc.",{"@attributes":{"id":"p-0146","num":"0145"},"figref":"FIG. 8","b":["100","100","20","10","100","20","20","10","100","20","10"]},{"@attributes":{"id":"p-0147","num":"0146"},"figref":["FIGS. 9 and 10","FIG. 9","FIG. 10"],"b":["10","100","101","101","101","101","10","101"],"i":["a","a ","a","b","b ","b"]},{"@attributes":{"id":"p-0148","num":"0147"},"figref":["FIG. 11","FIG. 11"],"b":["14","14","10","12","13","14","14","14","14"],"i":["a ","b "]},"To start with, the route setting in the policy  will be explained.","In the policy , in the search for the route for the GS flow, the route calculation unit for GS, when accepting a new user request, the route calculation unit for GS performs the path search according to any one of the following sub-policy  through sub-policy . Note that the sub-policy in the embodiment, when in the route selection process based on the policy in the embodiment, serves to settle detailed route selection conditions in this policy.","In the route selection for the GS flow, a route to minimize a cross-over hop count between an ingress node and an egress node of the network, is selected (the sub-policy ).","In the route selection for the GS flow, a route having the largest residual bandwidth between the ingress node and the egress node of the network, is selected (the sub-policy ).","In the route selection for the GS flow, a route to minimize the residual bandwidth between the ingress node and the egress node of the network, is selected (the sub-policy ).","In the route selection for the GS flow, when there exist a plurality of routes to minimize the cross-over hop count between the ingress node and the egress node of the network, a route having the largest residual bandwidth between the ingress node and the egress node of the network, is selected (the sub-policy ).","In the route selection for the GS flow, when there exist a plurality of routes to minimize the cross-over hop count between the ingress node and the egress node of the network, a route having the smallest residual bandwidth between the ingress node and the egress node of the network, is selected (the sub-policy ).","In the route selection for the GS flow, when there exist a plurality of routes having the largest residual bandwidth between the ingress node and the egress node of the network, a route to minimize the cross-over hop count between the ingress node and the egress node of the network, is selected (the sub-policy ).","In the route selection for the GS flow, when there exist a plurality of routes having the smallest residual bandwidth between the ingress node and the egress node of the network, a route to minimize the cross-over hop count between the ingress node and the egress node of the network, is selected (the sub-policy ).","Further, the route calculation unit for GS effects the path search in the network topology determined by a sub-policy  and a sub-policy  that follow.","When accepting the GS flow request, a route is selected from the topology taking allowances for only a link of which a link's residual bandwidth is equal to or larger than the request bandwidth, is determined (the sub-policy ).","When accepting the GS flow request, there is made a selection from the topology in which to connect the link of which a using bandwidth for BES flow does not exceed the set threshold value and of which a residual bandwidth acquired by calculating the link's using bandwidth is equal to or larger than the request bandwidth (the sub-policy ).","Next, the route setting in the policy  will be described.","The route calculation unit for BES searches for a path for the BES flow. In the search for the default path for the BES flow, any one threshold value among a threshold value  through a threshold value  that follow is determined in the congestion judging threshold value setting area on the policy setting screen  in . Then, in the case of setting a detour route due to an excess over this threshold value, a search for a path in the entire network topology is made according to any one sub-policy among the following sub-policies  through .","A threshold value is set in a path using ratio (a maximum value in the ratio of the actual using bandwidth to the physical bandwidth of the link configuring the path), in the case of exceeding the threshold value, a shift to a detour route for the BES flow is carried out (a threshold value ).","A threshold value is set in a ratio of the actual using bandwidth for the BES service that occupies a bandwidth from which to subtract the bandwidth ensured for GS in the path(a maximum value in the ratio of the actual using bandwidth for the BES service to a bandwidth not ensured for GS in the physical bandwidth of the link configuring the path), and, in the case of exceeding the threshold value, a shift of the BES flow to the detour route is carried out (a threshold value ).","A using bandwidth is declared when making a BES service request, whereby a threshold value is set in a ratio at which the declared using bandwidth for the BES service occupies a bandwidth from which to subtract the bandwidth ensured for GS in the path (a maximum value in a ratio of the declared using bandwidth for the BES service to the bandwidth not ensured for GS in the physical bandwidth of the link configuring the path), and, in the case of exceeding the threshold value, a shift of the BES flow to the detour route is performed (a threshold value ).","In the route selection for the BES flow, a route to minimize the cross-over hop count between the ingress node and then egress node of the network, is selected (the sub-policy ).","In the route selection for the BES flow, a route having the largest residual bandwidth between the ingress node and the egress node of the network, is selected (the sub-policy ).","In the route selection for the BES flow, when there exist a plurality of routes to minimize the cross-over hop count between the ingress node and the egress node of the network, a route having the largest residual bandwidth between the ingress node and the egress node of the network, is selected (the sub-policy ).","In the route selection for the BES flow, when there exist a plurality of routes to minimize the cross-over hop count between the ingress node and the egress node of the network, a route having the smallest residual bandwidth between the ingress node and the egress node of the network, is selected (the sub-policy ).","In the route selection for the BES, when there exist a plurality of routes having the largest residual bandwidth between the ingress node and the egress node of the network, a route to minimize the cross-over hop count therein between the ingress node and the egress node of the network, is selected (the sub-policy ).","In the route selection for the BES, when there exist a plurality of routes having the smallest residual bandwidth between the ingress node and the egress node of the network, a route to minimize the cross-over hop count therein between the ingress node and the egress node of the network, is selected (the sub-policy ).","Further, in the policy , in the search for the path for the GS flow, when there does not exist any path for accommodating when accepting a new user request, the path search in the network topology that is determined by the sub-policy  or the sub-policy  is performed according to any one sub-policy among the sub-policies  through . Moreover, in the search for the path for the BES flow, in the case of setting a default path, the path search in the entire network topology is conducted in accordance with any one sub-policy among the sub-policies  through .","In the route selection for the GS flow, a route to minimize the cross-over hop count between the ingress node and the egress node of the network, is selected, and in the route selection for the BES flow, a route to minimize the cross-over hop count between the ingress node and the egress node of the network, is selected (the sub-policy ).","In the route selection for the GS flow, a route to minimize the cross-over hop count between the ingress node and the egress node of the network, is selected, and in the route selection for the BES flow, a route to maximize the residual bandwidth between the ingress node and the egress node of the network, is selected (the sub-policy ).","In the route selection for the GS flow, a route to maximize the residual bandwidth between the ingress node and the egress node of the network, is selected, and in the route selection for the BES flow, a route to minimize the cross-over hop count between the ingress node and the egress node of the network, is selected (the sub-policy ).","In the route selection for the GS flow, a route to maximize the residual bandwidth between the ingress node and the egress node of the network, is selected, and in the route selection for the BES flow, a route to maximize the residual bandwidth between the ingress node and the egress node of the network, is selected (the sub-policy ).","In the route selection for the GS flow, a route to minimize the residual bandwidth between the ingress node and the egress node of the network, is selected, and in the route selection for the BES flow, a route to minimize the cross-over hop count between the ingress node and the egress node of the network, is selected (the sub-policy ).","In the route selection for the GS flow, a route to minimize the residual bandwidth between the ingress node and the egress node of the network, is selected, and in the route selection for the BES flow, a route to maximize the residual bandwidth between the ingress node and the egress node of the network, is selected (the sub-policy ).","In the route selections for the GS flow and for the BES flow, when there exist a plurality of routes to minimize the cross-over hop count between the ingress node and the egress node of the network, a route having the largest residual bandwidth therein between the ingress node and the egress node of the network, is selected (the sub-policy ).","In the route selections for the GS flow and for the BES flow, when there exist a plurality of routes to minimize the cross-over hop count between the ingress node and the egress node of the network, a route having the smallest residual bandwidth therein between the ingress node and the egress node of the network, is selected (the sub-policy ).","In the route selections for the GS flow and for the BES flow, when there exist a plurality of routes having the largest residual bandwidth between the ingress node and the egress node of the network, a route to minimize the cross-over hop count therein between the ingress node and the egress node of the network, is selected (the sub-policy ).","In the route selections for the GS flow and for the BES flow, when there exist a plurality of routes having the smallest residual bandwidth between the ingress node and the egress node of the network, a route to minimize the cross-over hop count therein between the ingress node and the egress node of the network, is selected (the sub-policy ).","When accepting the request for GS, a route is determined from the topology taking allowances for only a link of which a link's residual bandwidth is equal to or larger than the request bandwidth and for only a link wherein a ratio at which the quality non-guaranteed traffic occupies the link does not exceed the set threshold value, and, when accepting the BES service request, a route is determined from the topology taking allowances for all the links (the sub-policy ).","When accepting the request for GS, there is made a selection from the topology in which to connect the link of which a using bandwidth for the BES service does not exceed the set threshold value and of which a residual bandwidth acquired by calculating the link's using bandwidth is equal to or larger than the request bandwidth (the sub-policy ).","Note that in the embodiment, the route searching methods for GS and for BES can involve using, as already stated, (A) the minimum hop route selection system, (B) the maximum bandwidth route selection system, and (C) the minimum bandwidth route selection system. Moreover, in the embodiment, a proper cost based on the Dijkstra calculation is used for any methods, whereby the route calculation can be done.",{"@attributes":{"id":"p-0186","num":"0185"},"figref":"FIG. 12","b":["15","10","15","15","10","12","13"]},"To begin with, in the policy , the load balancing control unit  calculates a load state of the path set within the network at the present, and judges whether or not the load state of the path comes to a state of congestion. Simultaneously, the load balancing control unit  calculates a balancing ratio of the BES flow between the routes.","Moreover, in the policy , a load state of the path for GS is calculated, and it is judged whether or not the GS flow is to be shifted between the paths in accordance with the state, or a balancing ratio between the paths is calculated.","As shown in , for actualizing the processes in the policy  and in the policy , the load balancing control unit  includes a load balancing control unit for GS and a load balancing control unit for BES. Further, the load balancing control unit  includes a BES-oriented load judging unit for the path about the BES flow. Furthermore, the load balancing control unit  includes a GS-oriented congestion judging unit for the path about the GS flow.","In the policy , the BES-oriented congestion judging unit judges a state when a load of the path for BES occurs. This BES-oriented congestion judging unit , in the case of judging that the congestion occurs, notifies the route control unit  of its being congestion. With this, the BES-oriented congestion judging unit gives an instruction to the route control unit  to search for a detour route for the load balancing.","In the policy , the load judging unit judges a state when the load of the path for GS occurs. This load judging unit , in the case of judging that it is equal to or smaller than the threshold value, notifies the GS-oriented load balancing control unit of this purport. Then, the GS-oriented load balancing control unit , in the case of judging that there is a flow accommodated in a path less optimal than the residual path and this flow can be shifted to the residual path, notifies a router of a parameter for indicating the load balancing.","Methods of calculating and judging the load state of the BES path can be carried out by use of the existing execution load calculating and judging methods. Moreover, the BES-oriented load balancing control unit calculates a BES flow forwarding ratio between the paths with which the load is shared. Note that a method of calculating this BES flow forwarding ratio can involve utilizing the existing system, and therefore its detailed explanation is omitted.","In the policy , as already stated, when the path using ratio is less than the fixed value, the GS-oriented load balancing control unit executes the process such as judging where the GS flow accommodated in the less optimal path, e.g., the path having the larger hop count is shifted, or calculating the forwarding ratio of the GS flow to be shifted to the optimal path. Then, the GS-oriented load balancing control unit notifies the router control unit  of a result of the load balancing process. Furthermore, the GS-oriented load balancing control unit similarly executes judging processes  through  following.","In the path, a threshold value is set in the bandwidth ensured for GS, when there is a residual bandwidth accommodating the GS flow when less than the threshold value and there exists other non-optimal path, the GS flow is shifted to an optimal path (the judging process ).","In the path, a threshold value is set in a ratio at which the bandwidth ensured for GS occupies a utilizable bandwidth for the GS flow service, when there is a residual bandwidth accommodating the GS flow when this ratio is less than the threshold value and there exists other non-optimal path, the GS flow is shifted to an optimal path (the judging process ).","In the path, a threshold value is set in an actual using bandwidth for GS, when there is a residual bandwidth accommodating the GS flow when this actual using bandwidth is less than the threshold value and there exists other non-optimal path, the GS flow is shifted to an optimal path (the judging process ).","In the path, a threshold value is set in a ratio at which the actual using bandwidth for GS occupies a utilizable bandwidth for GS, when there is a residual bandwidth accommodating the GS flow when this ratio is less than the threshold value and there exists other non-optimal path, the GS flow is shifted to an optimal path (the judging process ).","Note that in a case where the network control device  executes the processes in the policy , it is assumed that the BES-oriented load balancing control unit and the BES-oriented congestion judging unit be included in the network control device . Further, in a case where the network control device  executes the processes in the policy , it is assumed that the GS-oriented load balancing control unit be included in the network control device .","The router control unit  receives the route information about the route for GS or the route for BES that has been calculated by the route control unit . Then, based on the route information, the route control unit  indicates the router in the network to set a path. Herein, the route information connotes information on addresses for identifying the routers passing though the calculated route. An ingress node of the route on the network is notified of these addresses for the identifications and is thereby capable of carrying out the set-up of the path by use of, e.g., the RSVP (Resource Reservation Protocol) defined as an MPLS signaling protocol. Moreover, the router control unit  receives, through the load balancing control unit , forwarding ratio information about the BES flow from the BES-oriented load balancing control unit or forwarding ratio information about the GS flow from the GS-oriented load balancing control unit , and sets the information in the routers on the network. The forwarding ratio information about these flows corresponds to, for instance, traffic balancing values. Moreover, a protocol for notifying the router involves utilizing a variety of protocols such as SNMP (Simple Network Management Protocol, COPS (Common Open Policy Service), or CLI (command Line Interface) and so on, thereby enabling the actualization thereof.","The statistical information collecting unit  accesses each of the routers within the network at the interval of the predetermined period or the predetermined time. At this time, the statistical information collecting unit  acquires the information retained by the routers for the bandwidth (Wg) actually used for the GS flow and for the bandwidth (Wb) actually used for the BES flow. Moreover, the statistical information collecting unit  acquires also IP addresses of interfaces of the routers, IP addresses of connecting destination interfaces and a link's physical bandwidth (WL). The protocols such as SNMP and CLI or COPS, etc. are used for forwarding the information between the statistical information collecting unit and the respective routers.","<Processing Flowcharts>","Next, flowcharts of processing in the network control device  on the occasion of carrying out the embodiment, will be explained. The processing in this network control device  is divided into the following four processes.","To begin with, the network control device , in the policy  and the policy , accepts a user's flow request, searches for a route that meets a requested quality and sets up a path. This process is named a route searching process by the network control device .","Further, the network control device , in the policy  and the policy , monitors a load state of the path for BES that is set in the network at the present, sets up the path by searching for a detour route for load balancing when a congestion occurs, and further executes a load balancing process between the plurality of routes. This process is named a load balancing process for BES by the network control device .","Still further, the network control device , in the policy  and the policy , monitors a load state of the path for GS that is set in the network at the present, judges whether or not the flow can be shifted to between different GS paths in accordance with the load state, and executes a load balancing process for the GS flow. This process is named a load balancing process for GS by the network control device .","Moreover, the network control device  periodically collects pieces of statistical information about the intra-network links, which are retained on the routers, stores them on the network information database, and further, in the case of accepting a flow forwarding request from the user and setting up the path, or in the case of allocating it to the already set-up path, stores the network information database with the set bandwidth information. This process is named a network information database updating process by the network control device .",{"@attributes":{"id":"p-0207","num":"0206"},"figref":"FIG. 13","b":["13","10","101"]},"Next, the user request processing unit  selects a topology corresponding to the user request (S).","Note that the selection of the topology in the embodiment is made as follows.",{"@attributes":{"id":"p-0210","num":"0209"},"figref":"FIG. 28","b":["13","1021"]},"Then, the user request processing unit  judges whether the BES traffic is taken into consideration or not (S), terminates this process in the case of taking it into no consideration, and returns to the route searching process for the GS flow. Further, the user request processing unit , in the case of judging that the BES traffic is taken into account in S, excludes a link in which the BES traffic is larger than the threshold value (S). The user request processing unit , after executing S, terminates this process and returns the route searching process for the GS flow.","Thereafter, the user request processing unit , for judging whether there is a route that meets a quality thereof or not, transfers a parameter showing the quality that should be met to the GS-oriented route calculation unit of the route control unit , and thus gives an instruction of the calculation of the route that meets the user's request quality (S). It is noted that, in this case, the user request processing unit  may exclude a link having a small residual bandwidth in advance of the request quality.","The route calculation unit  for GS executes the searching process as to whether or not there is the route that meets the quality with respect to the notified quality parameter (S). This searching process uses pieces of link statistical information such as a link using ratio, a link bandwidth reservation value, a link delay, etc., which are stored on the statistical information database. Then, the route search is carried out based on the link statistical information by use of the Dijkstra algorithm as already stated, and pieces of information about the routers on the discovered route are outputted as route information. In a case where the route that meets the user request is discovered as a result of the route search by the route control unit , the route information is transferred to the router control unit .","While on the other hand, in a case where the route that meets the user request is not discovered as the result of the route search by the route control unit , the route control unit  notifies the user request processing unit  that the route search resulted in being unsuccessful for the user request processing unit  (S). Then, the user request processing unit  notifies the user terminal that the acceptance was rejected. After notifying that the user terminal of the rejection of the acceptance, the network control device  moves to a process in S.","In S, when there is to be the route that meets the user request, the route control unit  judges whether there are a plurality of these routes or not (S). In the case of judging in this step  that there are not the plurality of routes that meet the user request, the route control unit  advances to a process in S.","Further, in S, when the route control unit  deems that there are the pluralities of routes, the route selection is conducted (S). At this time, the route control unit  selects the route in accordance with, for instance, the sub-policy in the embodiment.","The route control unit  transfers information on the selected route to the router control unit . The router control unit  having received the route information gives an instruction of setting up the path on the route (S). Simultaneously, the route control unit  notifies the user request processing unit that the route search has been successful, and updates the bandwidth reservation value, etc. with respect to each of the links on the set route on the network information database  (S). The user request processing unit  notifies the user terminal that the set-up of the path has been completed.",{"@attributes":{"id":"p-0218","num":"0217"},"figref":"FIG. 14","b":["14","201"],"i":"b "},"The BES-oriented route calculation unit judges whether or not there are a plurality of routes derived from a result of the search (S). Then, the BES-oriented route calculation unit , when there are the plurality of routes, makes the route selection (S). At this time, the BES-oriented route calculation unit conducts the route selection according to, for example, the route selection systems  through  in the embodiment.","The BES-oriented route calculation unit transfers information on the selected route to the router control unit . The router control unit  having received the route information gives an instruction of setting up the path on the route. Simultaneously, the route control unit  updates the bandwidth reservation value, etc. with respect to each of the links on the set route on the network information database  (S).",{"@attributes":{"id":"p-0221","num":"0220"},"figref":["FIG. 15","FIG. 12"],"b":["15","15","12","301"],"i":"c "},"Next, the BES-oriented congestion judging unit judges whether this path falls into a congestion or not (S). At this time, the load state of the path can be derived by the existing execution load calculation. In this S, the BES-oriented congestion judging unit , in the case of judging that this path falls into the congestion, notifies the BES-oriented route calculation unit of the route control unit  that it falls into the congestion.","The BES-oriented route calculation unit having received the notification performs calculating a new route for the load balancing (S). The calculation of the route for the load balancing at this time can be done by use of, for instance, the dynamic load balancing systems  and  in the policy .","The BES-oriented route calculation unit having finished calculating the route for the load balancing, judges whether there is the calculated route or not (S). In the case of judging at this time that there is no calculated route, the BES-oriented route calculation unit executes again the process in S.","In S, in the case of deeming that there is a route steering clear of the congestion, the BES-oriented route calculation unit judges whether there are a plurality of these routes or not (S). In S, when the BES-oriented route calculation unit deems that there are the pluralities of routes, the route selection is performed (S). At this time, the BES-oriented route calculation unit effects the route selection according to, e.g., the route selection systems  through  in the embodiment. After making the route selection, the BES-oriented route calculation unit instructs the router control unit  to set up the route.","The router control unit  having received the route information gives the instruction of setting up the path on the route (S). Further, the BES-oriented route calculation unit transfers the route information to the router control unit and thus gives the instruction of setting up the path on the route. The router control unit, based on the received route information, sets up the path for the routers in the network. On the other hand, the BES-oriented load balancing control unit , periodically or in a set time, calculates a forwarding ratio of the BES flow between the (plural) paths for BES that are set up at that point of time (S).","At this time, the BES-oriented load balancing control unit may give an instruction of, for, e.g., the GS flow, forwarding the flow in a way that sets up the path on the single route which meets the quality request, and may give an instruction of, for the BES flow, setting up the paths on the plurality of routes and forwarding the flow by balancing it with these paths. Moreover, at this time, the BES-oriented load balancing control unit may give an instruction of, for, e.g., the BES flow, forwarding the flow by setting up the path on the single route, and may give an instruction of, for the GS flow, setting up the paths on the plurality of routes and forwarding the flow by use of the path designated among these paths.","Then, the BES-oriented load balancing control unit notifies the router control unit  of its result as load balancing parameters (the router setting information). The router control unit  refers to the received load balancing parameters and effects setting for the routers that carry out the load balancing (S).",{"@attributes":{"id":"p-0229","num":"0228"},"figref":"FIG. 16"},"The GS-oriented load balancing control unit of the load balancing control unit  in , with respect to the paths already set up in the network, refers to the statistical information about the cross-over links of the paths from on the network information database , and calculates load states of the paths from these pieces of information (S).","Then, the load judging unit for GS judges whether or not the load of this path is equal to or smaller than the threshold value. When the load of this path is equal to or smaller than the threshold value, the load judging unit for GS notifies the GS-oriented load balancing control unit of this purport. The GS-oriented load balancing control unit having received this notification judges whether this path can be reallocated or not (S). In a process in this S, for judging whether the path can be reallocated or not, the GS-oriented load balancing control unit can involve using, for example, the reallocation systems  through  for the GS flow.","When the GS-oriented load balancing control unit judges that the load of this path is equal to or smaller than the threshold value, it specifies the paths with which the GS flow is shared and calculates a balancing ratio thereof (S). Then, the GS-oriented load balancing control unit notifies the router control unit  of a load balancing result as load balancing parameters (the router setting information).","The router control unit  sets the received load balancing parameters for the routers that executes the load balancing process (S). After setting, the GS-oriented load balancing control unit executes the process in S in order to calculate again the load state of the path.",{"@attributes":{"id":"p-0234","num":"0233"},"figref":"FIG. 17","b":["11","10","501","11","11","502","11","12","504"]},"Further, the route calculation unit gives a GS flow forwarding request from the user to the network control device , and judges as a result thereof whether there is a route that meets the requested quality or not (S). In this S, when the route is discovered, the bandwidth reservation value, etc. is updated with respect to each of the links on the set-up route on the network information database (S).","<Flowchart of GS Accepting Process>",{"@attributes":{"id":"p-0237","num":"0236"},"figref":"FIG. 29","b":["13","10","601"]},"Next, the user request processing unit  judges whether or not there is a necessity of setting up the route which meets the user request (S). At this time, when unnecessary for setting up the route, the network control device  updates the network information database and notifies the user of an acceptance.","Further, when judging in S that the set-up of the route is needed, the route control unit  calculates a residual bandwidth by referring to the network information database  (S).","Thereafter, the user request processing unit , in order to judge whether or not there is the route that meets the quality thereof, transfers a parameter representing the should-be-met quality to the GS-oriented route calculation unit of the route control unit , and thus gives an instruction of calculating the route that meets the user request quality. The GS-oriented route calculation unit executes calculating the route that meets the user request quality (S).","The GS-oriented route calculation unit executes a searching process as to whether or not there is the route that meets the quality with respect to the notified quality parameters (S). This searching process involves using the link statistical information such as the link using ratio, the link bandwidth reservation value, the link delay, etc. which are stored on the statistical information database. Then, based on the link statistical information, the route searching is carried out by use of the Dijkstra algorithm which has been already stated, and pieces of information about the routes on the discovered route are outputted as route information. In the case of discovering the route that meets the user request as a result of searching for the route by the route control unit , the route information is transferred to the GS-oriented load balancing control unit . Then, the GS-oriented load balancing control unit executes the process in S. In the case of discovering none of the routes that meet the user request as the result of searching for the route by the route control unit , the GS-oriented load balancing control unit executes a process in S.","In the case of deeming in S that there is the route meeting the user request, the route control unit  judges whether there are pluralities of these routes (S).","Moreover, when the route control unit  deems in S that there are the pluralities of routes, the route selection is conducted (S). At this time, the route control unit  selects the route in accordance with, for instance, the route selection systems  through  in the embodiment.","The GS-oriented load balancing control unit having received the notification judges whether this path can be reallocated or not (S). For judging in the process in this S whether the path can be reallocated or not, the GS-oriented load balancing control unit can involve using, for example, the GS flow reallocation systems  through .","The GS-oriented load balancing control unit of the load balancing control unit  in  refers to the statistical information about the cross-over links of the path from on the network information database , and calculates a load state of the path from these pieces of information (S).","Then, the GS-oriented load balancing control unit notifies the router control unit  a load balancing result thereof as load balancing parameters (the router setting information). The router control unit  sets the received load balancing parameters to the routers which executes the load balancing process (S).","Note that in the case of judging in S that the path can not be reallocated, the user request processing unit  notifies the user terminal that the requested acceptance has been rejected (S).","The route control unit  notifies the user request processing unit that the route search has become successful, and further updates the bandwidth reservation value, etc. with respect to each of the links on the set-up route on the network information database  (S). The user request processing unit  notifies the user terminal that the set-up of the path has been completed (S).","Other example of the sub-policy in the case of carrying out the policy  in the embodiment will hereinafter be shown. On this occasion, in terms of thinking of the example in the network in , the bandwidth of each of the links shall be 100 Mbps, and it shall be judged that the congestion occurs when the link using ratio becomes equal to larger than 90%.","To start with, a network control system in the policy  will be contemplated. It is contemplated from a state in which, as illustrated in , a path GS for the GS flow (this type flow will hereinafter be called the GS flow, and the path for the GS flow will hereinafter be called a GS path) and a path BES for the flow that does not guarantee the forwarding quality such as the bandwidth, the delay, etc. (this type of flow will hereinafter be called the BES flow, and the path for the BES flow will hereinafter be called a BES path), are set up respectively on a route of the router \u2014the router \u2014the router . At this time, a bandwidth of  Mbps is reserved for the path GS, and in fact traffic of 20 Mbps is assumed to flow therethrough. Further, at this time, traffic of 60 Mbps is assumed to flow through the path BES. Then, observing a link between the router  and the router , 25 Mbps is reserved in a bandwidth of 100 Mbps, it can be understood that as a traffic quantity that actually flows totals to 80 Mbps including 20 Mbps of the GS flow and 60 Mbps of the BES flow.","The example about the sub-policy prescribed according to the definition of the residual bandwidth, will be given as follows.","When selecting the route for the flow that does not guarantee the forwarding quality such as the bandwidth, the delay, etc. (e.g. BES flow), the ratio of remaining bandwidth into which a bandwidth for the GS and BES is subtracted, is used as a link's available bandwidth (a sub-policy ).","When selecting the route for the flow that does not guarantee the forwarding quality such as the bandwidth, the delay, etc. (e.g. BES flow), remaining bandwidth into which a bandwidth for the GS and BES is subtracted, is used as a link's available bandwidth (a sub-policy ).","When selecting the route for the flow that does not guarantee the forwarding quality such as the bandwidth, the delay, etc. (e.g. BES flow), a ratio of the remaining bandwidth into which to subtract a bandwidth for the BES flow from the link bandwidth with respect to a bandwidth that is not reserved for the GS flow is used as a link's residual bandwidth (a sub-policy ).","When selecting the route for the flow that guarantees the forwarding quality such as the bandwidth, the delay, etc. (e.g. GS flow), a remaining bandwidth into which a bandwidth for the GS flow is subtracted from bandwidths utilizable for the GS flow, is used as a link's residual bandwidth (a sub-policy ).","When selecting the route for the flow that guarantees the forwarding quality such as the bandwidth, the delay, etc. (e.g. GS flow), a ratio of the remaining bandwidth into which to subtract the bandwidth for the GS flow with respect to the bandwidths utilizable for the GS flow, is used as a link's residual bandwidth (a sub-policy ).","At this time, let WL be the link bandwidth, let WG be the bandwidth reserved for the GS flow, let Wg be the bandwidth for the GS flow that actually flows, let WB be the bandwidth used for the BES flow, and let Wb the bandwidth for the BES flow that actually flows.","In an example of the link between the router  and the router  in , WL=100 Mbps, WG=25 Mbps, Wg=20 Mbps, and Wb=60 Mbps. A bandwidth declared by the user and a bandwidth defined for the BES flow by the administrator can be user for WB. As for the sub-policy , a formula (a): WL\u2212(WG+WB), a formula (b): WL\u2212(WG+Wb) and a formula (c): WL\u2212(Wg+Wb) can be used for the link's residual bandwidth used when selecting the route for the BES flow.","Similarly as for the sub-policy , a formula (d): 1\u2212(WG+WB)\/WL, a formula (e): 1\u2212(WG+Wb)\/WL and a formula (f): 1\u2212(Wg+Wb)\/WL can be used for the link's residual bandwidth used when selecting the route for the BES flow.","Further, as for the sub-policy , a formula (g): 1\u2212Wb\/(WL\u2212WG) and a formula (h): 1\u2212WB\/(WL\u2212WG) can be used for the link's residual bandwidth used when selecting the route for the BES flow.","For instance, if the formula (b) is used for the link's residual bandwidth used when selecting the route for the BES flow, the residual bandwidth becomes 15 Mbps in the example of the link between the router  and the router  in .","While on the other hand, as by the prior art, the residual bandwidth, when obtained without distinguishing between the traffic of the BES flow and the traffic of the GS flow, becomes 20 Mbps. Herefrom, when the BES flow is increased by 20 Mbps, the BES flow totals to 80 Mbps, however, 25 Mbps being reserved for the GS path, and, if the GS flow on the order of 25 Mbps comes to flow, a total thereof exceeds the link bandwidth, with the result that a part of the BES flow is to be discarded. Herein, using the definition in the embodiment, even if the BES flow is increased by an amount of the residual bandwidth and the GS flow comes to flow fully through the reserved bandwidth, the total does not exceed the link bandwidth. Accordingly, the policy  has such an effect as to decrease a probability that the BES flow is to be discarded.","Further, as for the sub-policy , C is defined as a coefficient representing a reservable ratio for the GS flow in the link bandwidth, and C is defined as a coefficient to which the statistical multiplexing effect is added. Moreover, the link's residual bandwidth used when selecting the route for the GS flow can involve using a formula (1): (C*WL)\u2212WG, a formula (2): (C*WL)\u2212Wg and a formula (3): C*(C*WL)\u2212WG. Herein, the coefficient C may be defined as what decreases corresponding to a number n of the BES flows existing in that link. Namely, C=f (n). This enables the residual bandwidth utilizable for the GS flow to be restricted small with respect to the link having, for instance, a large number of BES flows.","Similarly, a sub-policy  is prescribed such that \u201cwhen accepting requests for a service which guarantees the forwarding quality such as the bandwidth, the delay, etc. and for a service which does not guarantee the forwarding quality such as the bandwidth, the delay, etc., routes is selected according to the respectively predetermined route selection policies, the route is determined from a topology taking allowances for only the link of which the link's residual bandwidth is equal to or larger than the request bandwidth when accepting the request for-the service which guarantees the forwarding quality such as the bandwidth, the delay, etc., and the route is determined from a topology taking allowances for all the links when accepting the request for the service which does not guarantee the forwarding quality such as the bandwidth, the delay, etc.\u201d.","As for this sub-policy , the link's residual bandwidth used when selecting the route for the GS flow can involve using a formula (4): 1\u2212WG\/(C*WL), a formula (5): 1\u2212Wg\/(C*WL) and a formula (6): 1\u2212WG\/(C*C*WL).","Next, as shown in , it is assumed that a new GS path GS be set up with a reservation of the bandwidth of 25 Mbps on the route between the router  and the router . Herein, an assumption is that the actual traffic does not yet flow. At this time, an actually-flowing traffic quantity totals to 80 Mbps of 60 Mbps of the BES flow and 20 Mbps of the GS flow, however, totally 50 Mbps for the GS flow is reserved. According to the prior art, the control is done based on the actually-flowing traffic quantity of 80 Mbps without distinguishing between the traffic of the BES flow and the traffic of the GS flow. In this case, the link using ratio becomes 80% but does not exceed a threshold value of 90%, and hence it is not judged that the congestion occurs, wherein the load balancing operation is not executed. When the traffic of 25 Mbps comes to flow through the path GS, a traffic of totally 105 Mbps of 20 Mbps from the path GS, 25 Mbps from the path GS and 60 Mbps from the path BES will flow to the link between the router  and the router  in excess of the link bandwidth, resulting in an occurrence of discarding of the traffic of the BES flow.","On the other hand, in the policy , with an application of such a sub-policy that \u201cthere is included a function of setting a threshold value in a ratio (a maximum value in a ratio of the actual using bandwidth for the non-guaranteed service to the bandwidth not ensured for the quality guaranteed service in the physical bandwidth of the link configuring the path), of the actual using bandwidth for the service that does not guarantee the forwarding quality such as the bandwidth, the delay, etc., at which to occupy a bandwidth left by subtracting the bandwidth ensured for the service that guarantees the forwarding quality such as the bandwidth, the delay, etc. in the path, and, in the case of exceeding the threshold value, the flow that does not guarantee the forwarding quality such as the bandwidth, the delay, etc. is shifted to the detour route\u201d, this ratio becomes 20% given by Wb\/(WL\u2212WG)=60\/(100\u221250)=1.2, and it is judged that the congestion occurs due to an excess over the threshold value.","As a result, a different BES path is extended in the network, thus executing the load balancing operation of shifting a part of the BES flow thereto. For instance, supposing that the control is done so that the residual bandwidths of the respective links of the respective paths are uniformized as the residual bandwidth for the BES flow, the result turns out as shown in .",{"@attributes":{"id":"p-0269","num":"0268"},"figref":["FIG. 20","FIG. 21"],"b":["2","4","6","9","1","4","3","2","2"]},"Next, a network control system in other example 2 for carrying out the policy  in the embodiment will be contemplated. As illustrated in , it is assumed that the GS path GS be set up on a route of the router \u2014the router \u2014the router , the GS path GS be set up on a route of the router \u2014the router \u2014the router  and BES as the BES path be set up on a route of the router \u2014the router , respectively. An assumption is that the path GS with a reservation on the order of 60 Mbps receives an actual flux of 20 Mbps flow, the path GS with a reservation on the order of 80 Mbps receives an actual flux of 80 Mbps flow, and the path BES receives an actual flux of 70 Mbps flow.","Considered herein is a case of scheming to make the GS flow of 30 Mbps flow to the router  from the router . The prior art does not take the traffic of the BES flow into account when calculating the router of the GS flow, and hence the path GS accommodates the requested flow, or there is a possibility wherein a new GS path is extended on the same route as the path GS. As a result, the GS flow of 50 Mbps comes to flow to the link between the router  and the router . Therefore, the BES flow within the path BES is allowed to flow by only 50 Mbps equivalent to the remaining of the link bandwidth, and it follows that 20 Mbps is to be discarded. On the other hand, it is considered to apply the systems in the embodiment. At this time, the example of the residual bandwidth may have contemplation about the same case as the above-mentioned.","When selecting a route for a u flow, a remaining bandwidth into which bandwidth for the GS flow and for the BES flow is subtracted, is used as a link's residual bandwidth (a sub-policy a).","When selecting the route for the flow that does not guarantee the forwarding quality such as the bandwidth, the delay, etc. (e.g. BES flow), a ratio of the remaining bandwidth to the entire link having the total bandwidth for the GS flow and for the BES flow, is used as a link's residual bandwidth (a sub-policy b).","When selecting the route for the flow that does not guarantee the forwarding quality such as the bandwidth, the delay, etc. (e.g. BES flow), a ratio of a remaining bandwidth into which a bandwidth for the BES flow is subtracted from the link bandwidth with respect to a bandwidth unreserved for the GS flow, is used as a link's residual bandwidth (a sub-policy c).","When selecting the route for the flow that guarantees the forwarding quality such as the bandwidth, the delay, etc. (e.g. GS flow), a remaining bandwidth into which a bandwidth for the GS flow is subtracted from a bandwidth utilizable for the GS flow, is used as a link's residual bandwidth (a sub-policy d).","When selecting the route for the flow that guarantees the forwarding quality such as the bandwidth, the delay, etc. (e.g. GS flow), a ratio of the remaining bandwidth into which the bandwidth for the GS flow is subtracted from the link bandwidth with respect to the bandwidth utilizable for the GS flow, is used as a link's residual bandwidth (a sub-policy e).","Applied when calculating the route for the GS flow is a sub-policy that \u201cthere is made a selection from a topology in which to connect a link of which a using bandwidth for a service that does not guarantee the forwarding quality such as the bandwidth, the delay, etc. does not exceed a threshold value and of which a residual bandwidth obtained by a calculation of a link's using bandwidth is equal to or larger than the request bandwidth\u201d. Herein, the threshold value of the BES flow shall be 50 Mbps. At this time, the link between the router  and the router  is in excess of the threshold value of the BES flow and is therefore excluded from the topology, and the link between the router  and the router  and the link between the router  and the router  have no residual bandwidth equal to or larger then the request bandwidth and are therefore excluded from the topology. As a result, the route calculated for this GS flow becomes a route of the router \u2014the router \u2014the router \u2014the router .  illustrates a state when a flow of 30 Mbps comes into an actual flux, wherein GS is a path set up on this route. Thus, the use of the embodiment yields such an effect that a quantity of discarding the traffic of the BES flow can be decreased by taking allowances for the bandwidth for the BES flow when determining the path for the GS flow.","Next, it is considered when the flow of the path BES discontinues to flow from the state in  and turns out as shown in . According to the prior art, a dynamic change of the route for the GS flow is not conducted, and hence this state is maintained. In this state, however, the flow in the path GS, in spite of a sufficient residual bandwidth being formed in the route on the path GS, passes through a detour route, resulting in a poor bandwidth utilizing efficiency. Further, because of the detour route, there increase the hop count and the forwarding delay as well. It is therefore desired that the GS flow across the detour route be shifted to a more proper route. At this time, it is considered to use in the embodiment a sub-policy that \u201cthere is included a function of setting a threshold value in a path using ratio (a maximum value in a ratio of the actual using bandwidth to the physical bandwidth of the link configuring the path), and, when there is a residual bandwidth for accommodating the quality guaranteed flow when less than the threshold value and there exists other less optimal path, the quality guaranteed flow is shifted to the path less than the threshold value from the less optimal path\u201d. At this time, the threshold value is set at 30%. Then, the using ratio of the link on the path GS is 20% and is thus less than the threshold value, and hence the flow shift takes place. Herein, the path GS is the detour route, so that the flow in the path GS is shifted to the path GS.  shows a result when the whole flow in the path GS is shifted to the path GS. Thus, the use of the embodiment come to enable, the GS flow being shifted, the link using efficiency to be improved and also the forwarding delay of the GS flow to be decreased.","Moreover, as shown in , there is considered a case where the GS path GS is set up on the route of the router \u2014the router \u2014the router , the GS path GS is set up on the route of the router \u2014the router \u2014the router  and the GS path GS is set up on the route of the router \u2014the router \u2014the router \u2014the router , respectively. It is assumed that each of the path GS, the path GS and the path GS has a reservation of 80 Mbps, the path GS and the path GS receive an actual flux of 40 Mbps flow, and the path GS receives an actual flux of 60 Mbps flow. In such a state, an assumption is that the router  gives a request for the GS flow of 70 Mbps to the router . According to the prior art, since the route capable of ensuring a bandwidth for 70 Mbps is not discovered, the acceptance is rejected. The embodiment, however, uses a sub-policy that \u201cin a state where a plurality of paths are set up for the GS flow, in the case of being unable to ensure the request bandwidth for the quality guaranteed service due to a small residual bandwidth but in the case of being able to ensure the request bandwidth by shifting the existing flows accommodated in the plurality of paths, the request is to be accepted by effecting the flow shift\u201d. Then, if 30 Mbps in the flow of the path GS is shifted to the path GS, the requested 70 Mbps flow can be accepted by use of the path GS. This state is illustrated in . Thus, the use of the embodiment enables a decrease of the possibility that the user request falls into a call loss by shifting the GS flow.","<Effects of the Embodiment>","According to the invention, owing to the policy , the non-guaranteed traffic is forwarded by use of the different detour route obtained taking allowances for the quality guaranteed traffic and can be thereby forwarded without being influenced by the intra-link quality guaranteed traffic, whereby the congestion can be avoided. Moreover, the bandwidth utilizing efficiency can be improved.","Further, owing to the policy , the quality guaranteed traffic is forwarded in a way that steers clear of the link having the high utilizing ratio of the non-guaranteed traffic, whereby the influence of the non-guaranteed traffic upon the quality guaranteed traffic can be reduced. Furthermore, the setting of the plural routes and the dynamic flow reallocation can gain a rise in the quality guaranteed service accommodation efficiency, thereby making it possible to improve the bandwidth utilizing efficiency, to reduce the call loss ratio and to reallocate the quality guaranteed flow to the optimal route in accordance with the change in traffic.","In the embodiment, the transmission bandwidth control device of the invention has been described, however, the invention is not limited to this and can be embodied widely for other transmission bandwidth control devices.","In the embodiment, the transmission bandwidth control system of the invention is embodied by a centralized control system, however, the transmission bandwidth control system of the invention is not limited to this. Namely, the invention is capable of controlling by an autonomous distributed control system. At this time, all the functions actualized by the network control device  are executed on the side of an edge router (ER), whereby the autonomous distributed control system that does not use a centralized control serve can be embodied in the embodiment.","Further, in the embodiment, the settings of the policies and the sub-policies may be settings unified in the network and may also be settings different between the individual links. Namely, in the network, the routes in which the sub-policy  is applied to the GS flow and the routes in which the sub-policy  is applied thereto, may exist in mixture. For example, images are distributed by streaming to the route where the sub-policy  is applied. Moreover, data are distributed by FTP (File Transfer Protocol) to the route where the sub-policy  is applied. The policy may be selected corresponding to content to be transmitted. In this case, it follows that the routes based on the policies exist in mixture in the network."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0035","num":"0034"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0037","num":"0036"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0038","num":"0037"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0039","num":"0038"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0040","num":"0039"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0041","num":"0040"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0042","num":"0041"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0043","num":"0042"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0044","num":"0043"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0045","num":"0044"},"figref":"FIG. 16"},{"@attributes":{"id":"p-0046","num":"0045"},"figref":"FIG. 17"},{"@attributes":{"id":"p-0047","num":"0046"},"figref":"FIG. 18"},{"@attributes":{"id":"p-0048","num":"0047"},"figref":"FIG. 19"},{"@attributes":{"id":"p-0049","num":"0048"},"figref":"FIG. 20"},{"@attributes":{"id":"p-0050","num":"0049"},"figref":"FIG. 21"},{"@attributes":{"id":"p-0051","num":"0050"},"figref":"FIG. 22"},{"@attributes":{"id":"p-0052","num":"0051"},"figref":"FIG. 23"},{"@attributes":{"id":"p-0053","num":"0052"},"figref":"FIG. 24"},{"@attributes":{"id":"p-0054","num":"0053"},"figref":"FIG. 25"},{"@attributes":{"id":"p-0055","num":"0054"},"figref":"FIG. 26"},{"@attributes":{"id":"p-0056","num":"0055"},"figref":"FIG. 27"},{"@attributes":{"id":"p-0057","num":"0056"},"figref":"FIG. 28"},{"@attributes":{"id":"p-0058","num":"0057"},"figref":"FIG. 29"}]},"DETDESC":[{},{}]}
