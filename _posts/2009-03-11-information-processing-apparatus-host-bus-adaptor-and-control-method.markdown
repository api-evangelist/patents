---
title: Information processing apparatus, host bus adaptor and control method
abstract: An information processing apparatus includes a first host bus adaptor that has a first storage section and expands the function of the information processing apparatus. Multiple first input/output devices are connected to the first host bus adaptor. A first firmware issues a first inquiry to each of the first multiple input/output devices and stores a first response to the first inquiry obtained from each of the first multiple input/output devices in the first storage section. A second host bus adaptor has a second storage section and expands the function of the information processing apparatus. Multiple second input/output devices are connected to the second host bus adaptor. A second firmware issues a second inquiry to each of the second multiple input/output devices independently from the first inquiry and holds a second response to the second inquiry obtained from each of the second multiple input/output devices in the second storage section.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08281057&OS=08281057&RS=08281057
owner: Fujitsu Limited
number: 08281057
owner_city: Kawasaki
owner_country: JP
publication_date: 20090311
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS","First Embodiment","Second Embodiment","Third Embodiment","Fourth Embodiment","Fifth Embodiment","Sixth Embodiment","Seventh Embodiment","Eighth Embodiment"],"p":["This application is based upon and claims priority to prior Japanese Patent Application No. 2008-67713 filed on Mar. 17, 2008 in the Japan Patent Office, the entire contents of which are incorporated herein by reference.","1. Field of the Invention","An embodiment of the invention discussed herein relates to a function expansion apparatus, such as a host bus adaptor, an information processing apparatus, such as a sever, and a method for controlling such an information processing apparatus.","2. Description of the Related Art","In a computer, such as a server, as an information processing apparatus, when the main power supply therefore is turned on, the BIOS (Basic Input\/Output System) performs a diagnostic process for checking whether there is not any problem on devices on the mother board. Then, by acquiring device information about input\/output devices connected to the computer, the BIOS performs a detection process for recognizing the input\/output devices and, after that, activates the operating system.","The acquisition of the device information is performed by the BIOS requesting it from a function expansion apparatus, such as a host bus adaptor, which operates as an initiator. Receiving the request, the initiator makes inquiries to the input\/output devices connected to itself. When the input\/output devices which have received the inquiries as targets give device information about themselves as responses to the initiator, the initiator hands the given device information to the BIOS.","The initiator makes an inquiry to each of the multiple targets one by one. Once the initiator makes an inquiry to one target, it waits for a predetermined period of time even if a response is not given from the target. Furthermore, in the case where multiple initiators are mounted in the computer, the BIOS requests acquisition of device information from the next initiator after one initiator ends the inquiry process.","Therefore, there is a problem that, in the case where multiple initiators are mounted on a computer, and a great number of input\/output devices are connected to each initiator, a lot of time is required until the operating system is activated. See generally, Patent Document 1: Japanese Laid-Open Patent Publication No. 2005-135124.","According to an aspect of an embodiment of the invention, an information processing apparatus includes a first host bus adaptor has a first storage section and expands the function of the information processing apparatus, first multiple input\/output devices connected to the first host bus adaptor, first firmware issues a first inquiry to each of the first multiple input\/output devices and holds a first response to the first inquiry obtained from each of the first multiple input\/output devices in the first storage section, a second host bus adaptor has a second storage section and expands the function of the information processing apparatus, second multiple input\/output devices connected to the second host bus adaptor and second firmware issues a second inquiry to each of the second multiple input\/output devices independently from the first inquiry and holds a second response to the second inquiry obtained from each of the second multiple input\/output devices in the second storage section.","These together with other aspects and advantages which will be subsequently apparent, reside in the details of construction and operation as more fully hereinafter described and claimed, reference being had to the accompanying drawings forming a part hereof, wherein like numerals refer to like parts throughout.","Now, description will be made on seven examples of a computer system, which is an embodiment of an information processing system, with reference to accompanying drawings.",{"@attributes":{"id":"p-0037","num":"0036"},"figref":["FIG. 1","FIG. 1"],"b":["10","12","10","10","10","10","10","10","11"],"i":["a","b","c","d"]},"The storage unit is a unit for recording various kinds of software, various kinds of programs and various kinds of data. The boot memory unit is a unit in which BIOS (Basic Input\/Output System) software to be executed after the main power supply is turned on (after the system is activated) is recorded. As the boot memory unit , there is, for example, a flash memory. The CPU is a unit which performs processing in accordance with programs in the storage unit and the boot memory unit . The main memory unit is a unit for the CPU to cache a program or data or develop a work area. The SCSI adaptor unit  is a unit which adds an interface for connecting the SCSI devices , to a computer as an expanded function, and it is a so-called a host bus adaptor.","In the computer system of the first embodiment, the computer  is provided with multiple SCSI adaptor units  as depicted in . To each of the multiple SCSI adaptor units , multiple SCSI devices  are connected via a SCSI bus cable. Thus, the computer  corresponds to an example of the information processing apparatus embodying the embodiments of the invention.","The computer  stores an application software and OS (Operating System) software in the storage unit . The application is software for realizing a particular function by using general-purpose functions provided from the OS software . The OS software provides APIs (Application Programming Interfaces) and ABIs (Application Binary Interfaces) for various kinds of applications. Furthermore, the OS software performs management of storage areas of the storage unit and the main memory unit , management of processes and tasks, file management, and provision of utilities, such as various kinds of setting tools and an editor, for the applications. Furthermore, the OS software also performs allocation of windows to multiple tasks for multiplexing screen output. The OS software includes file system software . The file system software is software which provides a name management function, an area management function and a file access management function. The name management function is a function of managing a file classification system (namespace) as a directory, and the area management function is a function of managing association between a file and a disk block. The file access management function is a function of executing file access using the name management function and the area management function in response to a file access request from the application ","Furthermore, the computer  stores a SCSI driver in the storage unit . The SCSI driver is a program which controls SCSI communication between the BIOS software and\/or the OS software and the SCSI devices .","The SCSI device  is a device provided with a function of inputting and outputting data and a connection interface for performing communication in accordance with the SCSI standard. Therefore, the SCSI device  corresponds to an example of the input\/output device.",{"@attributes":{"id":"p-0043","num":"0042"},"figref":["FIG. 2","FIG. 2"],"b":["12","12","12","12","12","12","12","12","12","12","12","12","12"],"i":["a","b ","c","a ","b ","c ","c ","d ","e ","d "]},{"@attributes":{"id":"p-0044","num":"0043"},"figref":"FIG. 3","b":["12","12"],"i":["d","d "]},{"@attributes":{"id":"p-0045","num":"0044"},"figref":["FIG. 4","FIG. 4"],"b":["11","11","11","11","11","11","11","11","10","10","11","12","11","11","11","11","11","11"],"i":["a ","b","c","d ","e","a ","c","b ","b","c ","d ","c","e ","d "]},"The SCSI adaptor unit  stores software for performing communication in accordance with the SCSI standard, in the ROM unit . This software is set as an initiator in the first embodiment. A target information management table and an inquiry data collection program are added to this software. The target information management table is a table where information is recorded which uniquely identifies each target of a host bus adapter, for example, in the case where the SCSI adaptor unit  targets SCSI devices  connected thereto.",{"@attributes":{"id":"p-0047","num":"0046"},"figref":["FIG. 5","FIG. 5"],"b":["11","11","12","12","11"],"i":["f","f ","f "]},"The inquiry data collection program depicted in  is a program which collects the inquiry data from the multiple SCSI devices . The details of the contents of the inquiry data collection process will be described later with reference to . An inquiry data management table is generated in the RAM unit by the inquiry data collection process. The inquiry data management table is a table for managing the inquiry data collected from the SCSI devices . Therefore, the RAM unit corresponds to an example of the storage section described above.","The software which the SCSI adaptor unit  stores in the ROM unit includes a response program . Here, description will be made on the operation of the response program performed when a request is given from the BIOS software in the boot memory unit and\/or the file system software in the OS software . In this case, the response program reads the inquiry data of a specified target from the inquiry data management table generated in the RAM unit and gives the inquiry data as a response to the request source. The response program is automatically activated by the CPU when the power supply of the SCSI adaptor unit  is turned on.","The software which the SCSI adaptor unit  stores in the ROM unit is firmware which is fixedly recorded in the ROM unit ","In the SCSI adaptor unit , the inquiry data collection program is automatically activated by the CPU when the power supply of the SCSI adaptor unit  is turned on. Furthermore, when the inquiry data collection program is activated, the inquiry data collection process is started by the CPU ",{"@attributes":{"id":"p-0052","num":"0051"},"figref":"FIG. 6","b":["11","11","11","101","11","102","11","11","11","11","1","1","11","11","102","103","106"],"i":["d ","e ","h","d ","f ","c","d ","d ","f "]},"At S, the CPU transmits an inquiry command including a target ID and a LUN included in a processing target record.  is a diagram of the format of the inquiry command. The inquiry command is well known. When receiving the inquiry command, the SCSI device  gives its own inquiry data as a response in accordance with the inquiry data notification program . The process by this inquiry data notification program is well known.","At S, the CPU determines whether the response to the inquiry command transmitted at S has been received. If the response to the inquiry command transmitted at S has not been received, at step S the CPU branches the process to S.","At S, the CPU determines whether or not a predetermined period of time has elapsed after the inquiry command was transmitted at S. If the predetermined period of time has not elapsed after the inquiry command was transmitted at S, the CPU branches the process at step S and returns the process to S.","If the predetermined period of time has elapsed after transmission of the inquiry command at S while the CPU is repeatedly executing S and S, the CPU advances the process from S and ends the process for this processing target record in the first processing loop L.","If receiving a response to the inquiry command transmitted at S before elapse of the predetermined period of time while repeatedly executing S and S, the CPU advances the process from S to step S. At S, the CPU performs a process for recording the inquiry data received at S into the work table in the RAM unit . After that, the CPU ends the process for this processing target record in the first processing loop L.","When finishing execution of the process from S to S for all the records in the target information management table read at S, the CPU exits the first processing loop L and advances the process to S. At S, the CPU reproduces the work table in the RAM unit and records the work table reproduced in the RAM unit as an inquiry data management table . After recording the inquiry data management table , the CPU ends the inquiry data collection process according to .","According to this inquiry data collection process, the SCSI adaptor unit  performs the inquiry process immediately after it is activated even if there is not a request from the BIOS software in the boot memory unit and\/or the file system software in the OS software . The SCSI adaptor unit  also collects the inquiry data from the SCSI devices  connected thereto.",{"@attributes":{"id":"p-0060","num":"0059"},"figref":["FIG. 8","FIG. 6"],"b":["10","10","11","10","10","10","10","10","201","11","11","11","401","11","11","11","11"],"i":["i ","e ","b ","c","e ","g ","d","h ","e "]},"In the computer , when it is confirmed by execution of the POST that there is no problem in each unit, an OBP (Open Boot Program) included in the BIOS software is then started (S). In order to recognize the SCSI devices  connected to the SCSI adaptor units , the OBP includes a program for acquiring device information about each of the SCSI devices . The CPU in accordance with the program of the OBP, requests device information about any one of the SCSI devices  from the SCSI adaptor unit  via the SCSI driver (S).","Then, the CPU in accordance with the SCSI driver converts the request for device information to an inquiry command and transmits the converted request to the SCSI adaptor unit  to which the specified SCSI device  is connected (S). When receiving the inquiry command (S), the SCSI adaptor unit  searches the inquiry data management table in the RAM unit , with the target ID and LUN specified by the inquiry command as the search conditions (S). After that, if the SCSI adaptor unit  can detect inquiry data , it gives the inquiry data to the OBP via the SCSI driver as a response at S. If the SCSI adaptor unit  cannot detect the inquiry data , it gives information to that effect to the OBP via the SCSI driver as a response (S). S to S are processes performed by the response program ","Then, the CPU in accordance with the SCSI driver converts the response from the SCSI adaptor unit  into a format which can be read by the OBP, and hands the converted response over to the OBP as device information (S). Next, the CPU in accordance with the OBP receives the device information and records it into a kernel not depicted (S).","The CPU in accordance with the OBP repeatedly executes a process including request for device information (S) and receiving of the device information (S) for all the SCSI devices  connected to the computer . Then, when finishing the execution for all the SCSI devices  (S), the CPU starts activation of the OS software ",{"@attributes":{"id":"p-0065","num":"0064"},"figref":["FIG. 9","FIG. 9","FIG. 8"],"b":["401","11","202","10","12","11","10","211","10","10","311","11","12","12","411"],"i":["c ","i ","c ","i "]},"In the other computer system, when the SCSI device  is normally operating, it receives the inquiry command and gives its own inquiry data to the OBP as a response (S, S, S, S and S). However, when the SCSI device  is not normally operating, a response is not returned from the SCSI device  even if the SCSI adaptor unit  transmits the inquiry command. In such a case, the SCSI adaptor unit  waits for a predetermined period of time until a response is returned from the SCSI devices . When the time is up (S), the SCSI adaptor unit  returns an error to the OBP as a response (S).","In the other computer system also, similarly to the first embodiment, the CPU in accordance with the OBP repeatedly executes a process including request for device information (S) and receiving of the device information (S) for all the SCSI devices  connected to the computer . Therefore, in the other computer system, the time spent to wait because a response is not returned from a SCSI device  is accumulated, for the number of SCSI devices  which are not normally operating, and included into the execution time of the OBP. However, according to the computer system of the first embodiment, the SCSI adaptor unit  collects the inquiry data from the SCSI devices  while (e.g., during or in parallel or simultaneously or concurrently) the POST is being executed. Therefore, even if waiting time occurs several times because there exist such SCSI devices  as are not normally operating, the waiting time is not included in the execution time of the OBP.","Furthermore, according to the first embodiment, the inquiry data collection process is executed in the multiple SCSI adaptor units  in parallel. Therefore, even if waiting time occurs in the inquiry data collection process in each SCSI adaptor unit , the waiting time is not accumulated.","Thus, according to the computer system of the first embodiment, the time needed until activation of the OS software is started after the main power supply of the computer  is turned on is less than that of the other computer system.","Description has been made on the process of the OBP acquiring a request for device information according to the first embodiment. However, similar advantages can be also obtained even in the case where (the CPU in accordance with) the file system software of the OS software acquires device information from each SCSI device  according to another aspect of the first embodiment. That is, in the case where the CPU in accordance with the file system software requests device information about each SCSI device  from the SCSI adaptor unit , information whether the inquiry data of the specified SCSI device  exists or not is immediately given from the SCSI adaptor unit  as a response. Therefore, the CPU in accordance with the file system software does not have to wait for a predetermined period of time together with the SCSI adaptor unit  because a response is not returned from a SCSI device  which is not normally operating.","A second embodiment is different from the first embodiment in that a computer and RAID devices are connected not via SCSI buses but via FC (Fibre Channel) switches.",{"@attributes":{"id":"p-0072","num":"0071"},"figref":["FIG. 10","FIG. 10"],"b":["20","23","20","22"]},"Among these, the computer  is provided with a storage unit , a boot memory unit , a CPU , a main memory unit , and FC adaptor units . Except for the FC adaptor units , the units to show functions similar to the functions of the same units to in the computer  of the first embodiment, respectively. On the other hand, the FC adaptor unit  is a unit which adds an interface for connecting the RAID device  which is an FC device, to the computer as an expanded function, and it is a so-called host bus adaptor.","Similarly to the computer  of the first embodiment, the computer  stores BIOS software in the boot memory unit . Furthermore, the computer  stores an application and OS software in the storage unit . The OS software includes file system software ","In the second embodiment, the computer  stores a SCSI driver and an HBA (Host Bus Adaptor) driver in the storage unit . The SCSI driver is a program which controls SCSI communication between the BIOS software and\/or the OS software and SCSI devices. The HBA driver is a program which converts data transmitted by the SCSI driver into a communication form for FC communication and hands the converted data over to the FC adaptor unit , or converts data received by the FC adaptor unit  via FC communication to data which can be interpreted by the SCSI driver ","The FC switch  is a network device which mediates a packet.","The RAID device  is an external storage device of the computer . This RAID device  includes an FC-RAID controller , a SCSI adaptor and multiple SCSI devices . The FC-RAID controller is provided with an interface for FC communication and a function of managing disk media in the multiple SCSI devices as virtually one disk medium. The SCSI adaptor is a controller which controls the SCSI devices connected thereto. Similarly to the SCSI device depicted in , the SCSI device is provided with an I\/F unit, a disk unit and a disk controller. The disk controller includes a ROM, a CPU and a RAM, and software for performing communication in accordance with the SCSI standard and inquiry data are recorded in the ROM.",{"@attributes":{"id":"p-0078","num":"0077"},"figref":["FIG. 11","FIG. 11"],"b":["21","21","21","21","21","21","21","21","20","20","21","23","21","21","21","21","21","21"],"i":["a ","b","c","d","e","a ","c","b ","b","c ","d ","c","e ","d "]},"The FC adaptor unit  stores software for performing communication in accordance with the FC standard, software for performing communication in accordance with the SCSI standard, and software similar to the HBA driver described before, in the ROM unit . The software for performing communication in accordance with the SCSI standard is set as an initiator in the second embodiment. Furthermore, a target information management table , an inquiry data collection program and a response program  are added to this software. The target information management table is similar to the target information management table of the first embodiment (), and the inquiry data collection program and the response program  are also similar to the inquiry data collection program and the response program of the first embodiment ().","The software which the FC adaptor units  store in the ROM unit is firmware which is fixedly recorded in the ROM unit ","<Advantages>","Since the computer system of the second embodiment has the form as described above, the second system performs the operation similar to that of the SCSI adaptor unit  of the first embodiment. That is, after the computer  is activated, the FC adaptor unit  collects inquiry data from the SCSI devices in the RAID device  while the POST in the BIOS software is being executed. Therefore, even if waiting time occurs several times because there exist such SCSI devices that are not normally operating, the waiting time is not included into the execution time of the OBP.","Furthermore, in the second embodiment also, the inquiry data collection process is executed in the multiple FC adaptor units  in parallel. Therefore, even if waiting time occurs in the inquiry data collection process in each FC adaptor unit , the waiting time is not accumulated.","Thus, according to the computer system of the second embodiment also, the time required until activation of the OS software is started after the main power supply of the computer  is turned on is less than that of the other computer system of .","A third embodiment is different from the first embodiment in that a computer and RAID devices are connected via SASs (Serial Attached SCSIs).",{"@attributes":{"id":"p-0086","num":"0085"},"figref":["FIG. 12","FIG. 12"],"b":["30","32","30"]},"Among these, the computer  is provided with a storage unit , a boot memory unit , a CPU , a main memory unit , and SAS adaptor units . Except for the SAS adaptor units , the units to show functions similar to the functions of the same units to in the computer  of the first embodiment, respectively. On the other hand, the SAS adaptor unit  is a unit which adds an interface for connecting a RAID device  which is an FC device, to the computer as an expanded function, and it is a so-called host bus adaptor.","Similarly to the computer  of the first embodiment, the computer  stores BIOS software in the boot memory unit . Furthermore, the computer  stores an application and OS software in the storage unit . The OS software includes file system software ","In the third embodiment, the computer  stores a SCSI driver and an HBA driver in the storage unit . The SCSI driver is a program which controls SCSI communication between the BIOS software or the OS software and SCSI devices. The HBA driver is a program which converts data transmitted by the SCSI driver into a communication form for SAS communication and hands it over to the SAS adaptor unit , or converts data received by the SAS adaptor unit  via SAS communication to data which can be interpreted by the SCSI driver ","The RAID device  is an external storage device of the computer . This RAID device  includes an SAS-RAID controller , an expander and multiple SAS devices . The SAS-RAID controller is provided with an interface for SAS communication and a function of managing disk media in the multiple SAS devices as virtually one disk medium. The expander is a relay device which expands a connection topology. Similarly to what is depicted in , the SAS device is provided with an I\/F unit, a disk unit and a disk controller. The disk controller includes a ROM, a CPU and a RAM, and software for performing communication in accordance with the SAS standard and inquiry data are recorded in the ROM. The software for performing communication in accordance with the SAS standard includes software for interpreting and executing a SCSI command.",{"@attributes":{"id":"p-0091","num":"0090"},"figref":["FIG. 13","FIG. 13"],"b":["31","31","31","31","31","31","31","31","30","30","31","32","31","31","31","31","31","31"],"i":["a ","b","c","d","e","a ","c","b ","b","c ","d ","c","e ","d "]},"The SAS adaptor unit  stores software for performing communication in accordance with the SAS standard, in the ROM unit . This software is set as an initiator in the third embodiment. Furthermore, this software includes a target information management table , an inquiry data collection program and a response program . The target information management table is similar to the target information management table of the first embodiment (), and the inquiry data collection program and the response program are also similar to the inquiry data collection program and the response program of the first embodiment ().","The software which the SAS adaptor units  stores in the ROM unit is firmware which is fixedly recorded in the ROM unit ","Since the computer system of the third embodiment has the form as described above, it performs the operation similar to that of the SCSI adaptor unit  of the first embodiment. That is, after the computer  is activated, the SAS adaptor units  collects inquiry data from the SAS devices in the RAID device  while the POST in the BIOS software is being executed. Therefore, even if waiting time occurs several times because there exist such SAS devices as are not normally operating, the waiting time is not included into the execution time of the OBP.","Furthermore, in the third embodiment also, the inquiry data collection process is executed in the multiple SAS adaptor units  in parallel. Therefore, even if waiting time occurs in the inquiry data collection process in each SAS adaptor unit , the waiting time is not accumulated.","Thus, according to the computer system of the third embodiment also, the time needed until activation of the OS software is started after the main power supply of the computer  is turned on is less than that of the other computer system of .","The first to third embodiments are in the form in which the inquiry data collection function and the response function are added to a host bus adaptor (the SCSI adaptor unit , the FC adaptor unit  and the SAS adaptor unit ) without making any change in target devices (the SCSI devices , the SCSI devices and the SAS devices ). On the other hand, a fourth embodiment is in the form in which, in a computer system configured by a computer and multiple SCSI devices, a unique sequence is added for communication between the initiator (SCSI adaptor) and the target devices (SCSI devices). Therefore, the computer system of the fourth embodiment has the same system configuration as that of the computer system depicted in .",{"@attributes":{"id":"p-0098","num":"0097"},"figref":["FIG. 14","FIGS. 14 and 4","FIG. 6"],"b":["11","11","11","11","11","11","11","11","11"],"i":["f","j ","i ","c","j ","g "]},{"@attributes":{"id":"p-0099","num":"0098"},"figref":["FIG. 15","FIGS. 15 and 2"],"b":["12","12","12","12","12","12","12","12"],"i":["d ","f ","c","f ","e "]},"In the SCSI adaptor unit , the inquiry data collection program is automatically activated by a CPU when the power supply of the SCSI adaptor unit  is turned on. When this inquiry data collection program is activated, the inquiry data collection process is started by the CPU ",{"@attributes":{"id":"p-0101","num":"0100"},"figref":"FIG. 16","b":["11","11","601","11","602","11","11","11"],"i":["d ","e ","h","d ","f ","c"]},"At S, the CPU performs a process for broadcasting an inquiry data request command to all the targets related to all the records in the target information management table read at S. The command in the broadcast process is a newly prepared command separately from well-known SCSI commands. Therefore, a function of processing this command and giving a response is added to the SCSI devices  which receive this command. After broadcasting the inquiry data request command, the CPU advances the process to step S.","At S, the CPU determines whether or not inquiry data has been received from any SCSI device . If inquiry data has not been received from any SCSI device , the CPU at  branches the process to S. If inquiry data has been received from any SCSI device , the CPU advances the process to S. At S, the CPU gives a notification of normal receiving (transmits ACK (Acknowledgement)) to the transmission source of the inquiry data received at S. At S, the CPU performs a process for recording the inquiry data received at S in the work table in the RAM unit . At S, the CPU determines whether the process for recording the inquiry data has been completed, for all the targets related to all the records in the target information management table read at S. Then, if the process for recording the inquiry data has been completed for all the targets, the CPU advances the process to S. On the other hand, if the process for recording the inquiry data has not been completed for all the targets, the CPU at  branches the process to S.","At S, the CPU determines whether a predetermined period of time has elapsed after the inquiry data request command was broadcast at S. Then, if the predetermined period of time has not elapsed after the inquiry data request command was broadcast, the CPU branches the process at S and returns the process to S. On the other hand, if the predetermined period of time has elapsed after the inquiry data request command was broadcast at S, the CPU advances the process to S.","At S, the CPU performs a process for broadcasting an end notification to all the targets related to all the records in the target information management table read at S. The notification by the broadcast process is also a new process which is not included in the well-known SCSI standard.","At S, the CPU reproduces the work table in the RAM unit and records the work table reproduced in the RAM unit as the inquiry data management table . After recording the work table, the CPU ends the inquiry data collection process according to .","On the other hand, in the SCSI device , when the inquiry data request command is sent by the broadcast from the SCSI adaptor unit  which is an initiator, the inquiry data notification program is activated by the disk controller in response thereto, and the inquiry data notification process is started.",{"@attributes":{"id":"p-0108","num":"0107"},"figref":"FIG. 17","b":["12","12","701"],"i":["c ","d "]},"At S, the disk controller determines whether a notification of normal receiving has been received from the SCSI adaptor unit  which is an initiator. If the notification of normal receiving has been received from the SCSI adaptor unit  which is an initiator, the disk controller ends the inquiry data notification process according to . On the other hand, if the notification of normal receiving has not been received from the SCSI adaptor unit  which is an initiator, the disk controller at S branches the process to S.","At S, the disk controller determines whether or not an end notification has been received from the SCSI adaptor unit  which is an initiator. If the end notification has been received from the SCSI adaptor unit  which is an initiator, the disk controller branches the process at S and ends the inquiry data notification process according to . On the other hand, if the end notification has not been received from the SCSI adaptor unit  which is an initiator, the disk controller advances the process to S.","At S, the disk controller determines whether a predetermined period of time has elapsed after the inquiry data notification process according to  was started. If the predetermined period of time has elapsed after the inquiry data notification process according to  was started, the disk controller branches the process at S and ends the inquiry data notification process according to . On the other hand, if the predetermined period of time has not elapsed after the inquiry data notification process according to  was started, the disk controller advances the process to S. At S, the disk controller performs a process for waiting for a predetermined period of time. After that, the disk controller returns the process to S and performs the process for transmitting the inquiry data again.","According to the inquiry data collection process according to  and the inquiry data notification process according to , the SCSI adaptor unit  can not only collect the inquiry data immediately after being activated but also simultaneously collect the inquiry data from all the SCSI devices  connected to the SCSI adaptor unit . Here, the SCSI adaptor unit  can collect the inquiry data even if a request is not given from the BIOS software in the boot memory unit and\/or the file system software in OS software ","A fifth embodiment is different from the fourth embodiment in that a computer and SCSI devices are connected not via SCSI buses but via FC switches. That is, the fifth embodiment is in the form in which, in a computer system having the same hardware configuration as that of the second embodiment (), a unique sequence is added for communication between an FC adaptor unit  and SCSI devices in a RAID device  for collection of inquiry data.","<Configuration>",{"@attributes":{"id":"p-0115","num":"0114"},"figref":["FIG. 18","FIGS. 18 and 11","FIG. 16"],"b":["21","21","21","21","21","21","21","21","11"],"i":["f","j ","i ","c","j ","g "]},"The SCSI device in the fifth embodiment has similar hardware configuration and software configuration as those of the SCSI device  depicted in . Further, in the SCSI device , processing whose contents are similar as the contents of the process by the inquiry data notification program of the fourth embodiment () is executed.","Since the computer system of the fifth embodiment has the form described above, the FC adaptor unit  can not only collect inquiry data immediately after being activated but also simultaneously collect the inquiry data from all the SCSI devices connected to the FC adaptor unit , by an inquiry data collection process similar to that in  and an inquiry data notification process similar to that in . Here, the FC adaptor unit  can collect the inquiry data even if a request is not given from BIOS software in a boot memory unit and\/or file system software in OS software ","A sixth embodiment is different from the fourth embodiment in that a computer and RAID devices are connected via SASs. That is, the sixth embodiment is in the form in which, in a computer system having similar hardware configuration as that of the third embodiment (), a unique sequence is added for communication between an SAS adaptor unit  and SAS devices in a RAID device  for collection of inquiry data.",{"@attributes":{"id":"p-0119","num":"0118"},"figref":["FIG. 19","FIGS. 19 and 13","FIG. 16"],"b":["31","31","31","31","31","31","31","31","11"],"i":["f","j ","i ","c","j ","g "]},"Similarly to what is depicted in , the SAS device in the sixth embodiment is provided with an I\/F unit, a disk unit and a disk controller. The disk controller includes a ROM, a CPU and a RAM, and software for performing communication in accordance with the SAS standard and inquiry data are recorded in the ROM. The software for performing communication in accordance with the SAS standard includes software for interpreting and executing a SCSI command and an inquiry data notification program for executing processing whose contents are similar as the contents of the process by the inquiry data notification program of the fourth embodiment ().","Since the computer system of the sixth embodiment has the form described above, the SAS adaptor unit  can not only collect inquiry data immediately after being activated but also simultaneously collect the inquiry data from all the SAS devices connected to the SAS adaptor unit , by the inquiry data collection process similar to that in  and the inquiry data notification process similar to that in . Here, the SAS adaptor unit  can collect the inquiry data even if a request is not given from BIOS software in a boot memory unit and\/or file system software in OS software ","A seventh embodiment is such that, when there is a SCSI device which does not give inquiry data as a response in response to an inquiry command from an initiator, in a computer system provided with a computer and SCSI devices similar to those of the first embodiment, the location of the SCSI device is notified to a system administrator.",{"@attributes":{"id":"p-0123","num":"0122"},"figref":["FIG. 20","FIG. 20"],"b":["40","42","40","40","40","40","40","41","40","40","40","40","40","40"],"i":["a","b","c","d","f","g ","h","i ","a"]},"On the other hand, the enclosure  includes SES (SCSI Enclosure Services) , SCSI devices and LED (Light Emitting Diode) indicators . The SES is a SCSI device which performs monitoring of the environment of the enclosure and control of the LED indicators . The SCSI device is a device provided with a function of inputting and outputting data and an interface for performing communication in accordance with the SCSI standard. This SCSI device gives inquiry data as a response when an inquiry command is sent thereto, so as to store software for performing SCSI communication. The LED indicator is an indicator which displays the state of the SCSI device in the enclosure , and one LED indicator is provided for each of the multiple SCSI devices . In the enclosure , the SES and the multiple SCSI devices are connected via a SCSI bus cable. The SES is connected to the SCSI adaptor unit  in the computer  via a SCSI bus cable.",{"@attributes":{"id":"p-0125","num":"0124"},"figref":["FIG. 21","FIG. 21","FIG. 5","FIG. 8"],"b":["41","41","41","41","41","41","41","41","11","41","41","41","41","41","11","11","41","11","41","41"],"i":["a ","b","c","d ","e","c","f","g ","i ","f ","i ","f ","i ","j ","g ","h ","e "]},"In the SCSI adaptor unit , the inquiry data collection program is automatically activated by a CPU when the power supply of the SCSI adaptor unit  is turned on. When this inquiry data collection program is activated, the inquiry data collection process is started by the CPU ",{"@attributes":{"id":"p-0127","num":"0126"},"figref":"FIG. 22","b":["41","41","801","41","802","41","41","41","41","2"],"i":["d ","e ","h","d ","f ","c","d "]},"In the second processing loop L, the CPU sequentially identifies each of all the records in the target information management table read at S, and executes the process from S to S for the identified records. At S, the CPU transmits an inquiry command including a target ID and an LUN included in a processing target record (see ). At S, the CPU determines whether the response to the inquiry command transmitted at S has been received. If the response to the inquiry command transmitted at S has not been received, the CPU at S branches the process to step S.","At S, the CPU determines whether a predetermined period of time has elapsed after the inquiry command was transmitted at S. If the predetermined period of time has not elapsed after the inquiry command was transmitted at S, the CPU branches the process at S and returns the process to S. If the predetermined period of time has elapsed after transmission of the inquiry command at S while the CPU is repeatedly executing S and S, the CPU advances the process from S and ends the process for this processing target record in the second processing loop L.","If receiving the response to the inquiry command transmitted at S before elapse of the predetermined period of time while repeatedly executing S and S, the CPU advances the process from S to S. At S, the CPU determines whether the response received at step S is a normal response including inquiry data. If the response received at step S is a normal response including inquiry data, the CPU advances the process to S. At S, the CPU performs a process for recording the inquiry data received at S in the work table in the RAM unit . After that, the CPU ends the process for this processing target record in the second processing loop L. On the other hand, if the response received at S is not a normal response including inquiry data at S, the CPU at S branches the process to S.","At S, the CPU instructs the SES to light up an LED indicator associated with a SCSI device identified by the target ID included in the processing target record.  is a diagram of the format of an SES command. Since the SES command is well known, description thereof will be omitted. When the value of an \u201crqst ident\u201d field in the SES command in  is set to 1, it is instructed to light up the LED indicator . When the value of the field is set to 0, it is instructed to put out the light of the LED indicator . After instructing lighting up of the LED indicator , the CPU ends the process for this processing target record in the second processing loop L.","When finishing execution of the process from S to S for all the records in the target information management table read at S, the CPU exits the second processing loop L and advances the process to S. At S, the CPU reproduces the work table in the RAM unit and records the work table reproduced in the RAM unit as an inquiry data management table . After recording the inquiry data management table , the CPU ends the inquiry data collection process according to .","Since the computer system of the seventh embodiment is configured as described above, the SCSI adaptor unit  performs an inquiry process by this inquiry data collection process immediately after being activated, and collects the inquiry data from the SCSI devices  connected to the SCSI adaptor unit . In this case, the SCSI adaptor unit  collects the inquiry data even if a request is not given from BIOS software in a boot memory unit and\/or file system software in OS software ","Furthermore, in the seventh embodiment, a corresponding LED indicator is lit up for a SCSI device which does not return a normal response including inquiry data in the inquiry data collection process. Accordingly, when the computer is activated, the system administrator can immediately recognize a faulty SCSI device ","An eighth embodiment is such that the LED indicator lighting-up function in the seventh embodiment is combined with the computer system of the fourth embodiment.  is a diagram depicting the flow of the inquiry data collection process of the eighth embodiment. In the eighth embodiment, an inquiry data management table is generated (S), and an SES is instructed to light up a corresponding LED indicator for a SCSI device  which has not returned a normal response including inquiry data (S), as apparent from comparison between . Therefore, according to the eighth embodiment also, the system administrator can immediately recognize a faulty SCSI device when the computer is activated.","In the first to eighth embodiments described above, any of the units to , , to , , to , , to , and  of the computers  to  may be configured by a software element and\/or a hardware element (i.e., any combinations thereof). Furthermore, any of the units to , to , to , and to in the host bus adaptor and the units to in the SCSI device  may be configured by a software element and\/or a hardware element (i.e., any combinations thereof).","As examples of the software element, an interface program, a driver program, a table, data, and combination of some of these are given. These may be stored in a computer-readable recording medium described later, or may be firmware which is fixedly incorporated in a storage device such as a ROM (Read Only Memory) and an LSI (Large Scale Integration).","As examples of the hardware element, an FPGA (Field Programmable Gate Array), an ASIC (Application Specific Integrated Circuit), a gate array, combination of logical gates, a signal processing circuit, an analog circuit and other circuits can be given. Among these, the logical gate may include AND, OR, NOT, NAND, NOR, flip-flop and counter circuits and the like. The signal processing circuit may include circuit elements for executing addition, multiplication, division, inversion, product-sum operation, differentiation, integration and the like of a signal value. The analog circuit may include circuit elements for executing amplification, addition, multiplication, differentiation, integration and the like.","The elements constituting each of the units to , , to , , to , , to and  of the computers  to  described before are not limited to those depicted above as examples and may be other elements equivalent to the examples. The elements constituting each of the units to , to , to , and to in the host bus adaptor, and the units to in the SCSI device  are not limited to those depicted above as examples and may be other elements equivalent to the examples.","In the first to eighth embodiments described above, any of the software to , to , to , and to in the computers  to , the programs and and the inquiry data in the SCSI device , the programs , , , , , , , , , , and and the tables , , , , , , and in the host bus adaptor, and the software elements described before may include elements, such as a software part, a part in procedural language, an object-oriented software part, a class part, a part managed as a task, a part managed as a process, a function, an attribute, a procedure, a subroutine (software routine), a piece or part of a program code, a driver, firmware, a micro code, a code, a code segment, an extra segment, a stack segment, a program area, a data area, data, a database, a data structure, a field, a record, a table, a matrix table, an array, a variable and a parameter.","Furthermore, any of the software to , to , to , and to in the computers  to , the programs and and the inquiry data in the SCSI device , the programs , , , , , , , , , , and and the tables ,  , ,  , ,  , and in the host bus adaptor, and the software elements described before may be written in C language, C++, Java (trademark of U.S. Sun Microsystems, Inc.), Visual Basic (trademark of U.S. Microsoft Corporation), Perl, Ruby, or any of many other programming languages.","Furthermore, a command, a code or data included in the software to , to , to , and to in the computers  to , the programs and and the inquiry data in the SCSI device , the programs , , , , , , , , , , and and the tables ,  , ,  , ,  , and in the host bus adaptor, and the software elements described before may be transmitted or loaded to a computer or a computer incorporated in a machine or an apparatus via a wired network card and a wired network or via a wireless card and a wireless network.","In the transmission or loading of software described above, a data signal moves on transmission communication media, such as the wired network or the wireless network, for example, by being incorporated in a carrier wave. However, the data signal may be transferred not by the carrier wave described above but as a so-called baseband signal. Such a carrier wave is transmitted in an electrical, magnetic or electromagnetic form, or an optical, acoustic or any other form.","Here, the wired network or the wireless network is, for example, a telephone line, a network line, a cable (including an optical cable and a metal cable), a wireless link, a mobile phone access line, a PHS (Personal Handy phone System) network, a wireless LAN (Local Area Network), Bluetooth (trademark of Bluetooth Special Interest Group), vehicle-mounted type wireless communication (including DSRC (Dedicated Short Range Communication)), and a network configured by any of these. The data signal communicates information including a command, a code and data to a node or an element on the network.","An element constituting each of the software to , to , to , and to in the computers  to , the programs and and the inquiry data in the SCSI device , the programs , , , , , , , , , , and and the tables , , ,  , , , and in the host bus adaptor, and the software elements described before is not limited to the examples depicted above and may be any of other elements equivalent to the examples.","Any of the functions in the first to eighth embodiments described above may be coded and stored in a storage area of a computer-readable recording medium. In this case, a program which realizes the function can be provided for a computer or a computer incorporated in a machine or an apparatus via the computer-readable recording medium. By reading the program from the storage area of the computer-readable recording medium and executing the program, the computer or the computer incorporated in a machine or an apparatus can realize the function.","Here, the computer-readable recording medium refers to a recording medium in which information such as a program and data is accumulated by an electrical, magnetic, optical, chemical, physical or mechanical operation and the information is held in a state of being able to be read by a computer.","As an example of the electrical or magnetic operation, writing of data to an element on a ROM (Read Only Memory) configured by a fuse can be given. As an example of the magnetic or physical operation, development of toner onto a latent image on a paper medium can be given. Information recorded on the paper medium can be, for example, read optically. As an example of the optical and chemical operation, formation of a thin film or unevenness on a substrate can be given. Information recorded in the form of unevenness can be, for example, read optically. As examples of the chemical operation, redox reaction on a substrate, and formation of an oxide film, formation of a nitride film and photo resist development on a semiconductor substrate can be given. As an example of the physical or mechanical operation, formation of unevenness on an embossed card or punching of a hole in a paper medium can be given.","Some computer-readable recording media can be detachably attached to a computer or a computer incorporated in a machine or an apparatus. As examples of the detachable computer-readable recording medium, there are given DVD (including DVD-R, DVD-RW, DVD-ROM and DVD-RAM), +R\/+WR, BD (Blu-ray Disk) (including BD-R, BD-RE and BD-ROM), CD (Compact Disk) (including CD-R, CD-RW and CD-ROM), MO (Magneto Optical) disk, other optical disk media, flexible disk (including FLOPPY DISK), other magnetic disk media, memory card (such as COMPACT FLASH), SMART MEDIA, ST CARD, MEMORY STICK, and MMC), magnetic tape and other tape media, and a storage device which includes any of these. Some storage devices further include a DRAM (Dynamic Random Access Memory) or an SRAM (Static Random Access Memory).","Some computer-readable recording media are fixedly attached to a computer or a computer incorporated in a machine or an apparatus. As examples of this kind of computer-readable medium, a hard disk, DRAM, SRAM, ROM, EEPROM (Electronically Erasable and Programmable Read Only Memory), flash memory and the like can be given.","According to an aspect of the embodiments of the invention, any combinations of the described features, functions, operations, and\/or benefits can be provided. The embodiments can be implemented as an apparatus (a machine) that includes computing hardware (i.e., computing apparatus), such as (in a non-limiting example) any computer that can store, retrieve, process and\/or output data and\/or communicate (network) with other computers (e.g., discussed computers, devices, and\/or adapters). According to an aspect of an embodiment, the described features, functions, operations, and\/or benefits can be implemented by and\/or use computing hardware and\/or software. The apparatus comprises a controller (CPU) (e.g., a hardware logic circuitry based computer processor that processes or executes instructions, namely software\/program), computer readable recording media, transmission communication media interface (network interface), and\/or a display device, all in communication through a data communication bus. The results produced can be displayed on a display of the computing hardware. A program\/software implementing the embodiments may be recorded on computer readable media comprising computer-readable recording media. The program\/software implementing the embodiments may also be included\/encoded and transmitted over transmission communication media.","The many features and advantages of the embodiments are apparent from the detailed specification and, thus, it is intended by the appended claims to cover all such features and advantages of the embodiments that fall within the true spirit and scope thereof. Further, since numerous modifications and changes will readily occur to those skilled in the art, it is not desired to limit the inventive embodiments to the exact construction and operation illustrated and described, and accordingly all suitable modifications and equivalents may be resorted to, falling within the scope thereof."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 16"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 17"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 18"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 19"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 20"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 21"},{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 22"},{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIG. 23"},{"@attributes":{"id":"p-0035","num":"0034"},"figref":"FIG. 24"}]},"DETDESC":[{},{}]}
