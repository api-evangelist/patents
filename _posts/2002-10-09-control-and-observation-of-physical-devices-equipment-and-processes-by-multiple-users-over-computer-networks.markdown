---
title: Control and observation of physical devices, equipment and processes by multiple users over computer networks
abstract: A method and system for enabling multiple users from different physical locations to access, observe, control and manipulate physical processes and devices over a computer network such as the Internet is disclosed. A user may visually monitor the physical set up and state of an experiment or environment by receiving live video and data, as well as directly control instrumentation while receiving live feedback regarding the input commands. Measurement data may be collected into a database and computational analysis can be generated and displayed as a physical process is being performed. An online interactive laboratory notebook is also provided that manages items such as collected data, laboratory parameters, “to do” lists, personal notes, etc.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07467187&OS=07467187&RS=07467187
owner: Western Digital Technologies, Inc.
number: 07467187
owner_city: Lake Forest
owner_country: US
publication_date: 20021009
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"p":["This application is a continuation application of application Ser. No. 09\/454,178, filed Dec. 2, 1999, now U.S. Pat. No. 6,499,054 B1, which is incorporated herein by reference in its entirety and to which application we claim priority under 35 USC \u00a7 120.","The present invention relates broadly to telecommunications and remote control of physical processes in a laboratory. More specifically, the present invention relates to the control of physical processes in a laboratory via a computer network.","Distance learning is an exploding field that is driven by the Internet revolution. A key component of current distance learning implementations in science and engineering, however, is missing: laboratory experimentation. Experimental demonstrations in class enhance the learning experience, and provide a sense of realism to complex theoretical concepts. However, cost is an obstacle. Many universities, colleges, high schools and primary schools lack sufficient resources to implement laboratory experiments. Not only is the cost of equipment a significant factor, but labor costs associated with staffing a laboratory are also considerably high. Without a laboratory component distance learning programs are not only inferior to classical education methods, but the programs cannot satisfy basic accreditation criteria. Classical laboratory teaching programs are costly, as highly trained personnel are needed to design, implement and maintain them, while infrequent use contributes to large fixed costs. Thus, science courses requiring laboratory experimentation are a significant obstacle to distance learning applications.","One of the strongest features of a global computer network such as the Internet is the ability to provide multiple users with many-to-one access to resources. A laboratory is the type of resource that is easily used by many, and far more people in the world have access to a computer connected to the Internet than have access to a laboratory. However, In order to conduct physical processes in a laboratory environment, feedback from the physical processes such as equipment operation as well as data collection must be provided to the student or other user with minimal delay. Thus, it is the \u201clook and feel\u201d of a laboratory that must be accurately reproduced if a laboratory is to be accessed via the Internet. Not only does a laboratory user need to collect and analyze data quickly to manipulate physical processes in a laboratory, but he or she also must be able to see what is happening during the process.","Transporting video data in real time across the Internet is a major obstacle for applications such as the online laboratory. The sheer volume of data that is required to be sent often experiences delays that make online laboratory experiments difficult if not impossible to implement.","Thus there is a need for a system and method that allow users to manipulate via a computer network physical processes conducted in remotely located laboratories and provide data and video feedback during the physical process with minimal delay.","The present invention enables multiple users from different physical locations to access, observe, control and manipulate physical processes or environments either synchronously or asynchronously over computer networks such as the internet or a private intranet. Providing a unique way to distribute information, this technology consequently brings a new method in sharing information that can be applied in a variety of activities such as distance learning, medical practice, oil exploration, drug development, chemistry, physics, pollution monitoring, weather data collection, and many other fields in which instruments provide data about physical and other processes.","Users that are connected to computer works such as the internet can perform tasks such as controlling devices and processes in real time. By reserving lab sessions through on-line scheduling, users may have secure and exclusive access to the experiment during scheduled periods. Features of the present invention include: live video and data stream. In this feature the user may visually monitor a physical setup and the state of an experiment or environment. Another feature is real-time two-way communication with instrumentation systems. Users may directly control lab instrumentation and receive live feedback regarding the input commands. In another feature real-time computational analysis may be performed. Not only measurement data may be collected into the database, computational analysis i.e. statistics transforms can be generated and displayed as the measurement being collected. In another feature the present invention provides a user interface incorporating an online user notebook. The notebook provides users with the interface to manage user data such as collected data, lab parameters, to-do lists, personal notes, etc.",{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 1A","b":["10","50","60","10","60","12","16","10","12","18","14","10","20","22","10","60"]},"Although a desktop type of computer is illustrated in , it is to be understood that other forms of computers, such as workstations, laptops, palm tops, dumb terminals, or any computer capable of communicating with other computers may be used in connection with the present invention.","Computers ,  may communicate over the computer network  via modem and telephone line. An operating system and browser program may also be included in computers ,  so that a user may access the laboratory. However, other media may also be used, such as a direct connection or high speed data line. The computer network , as described above, may be a large and complex system, incorporating a vast number of nodes and components.","Computer  is located at a laboratory where physical processes are to be conducted. For illustrative purposes, the operation of a laser and optical equipment is described herein, but it is to be understood that other types of physical processes may be used in connection with the present invention. An interface  is connected to the processor in computer  that allows a user to control laser . The beam from laser  may be directed through various optical equipment , which may be adjusted on table  by interface . In an embodiment of the present invention, interface  may use a PCI-GPIB board to control and monitor laser . To acquire images of the laser beam that have been processed by optical equipment , a CCD detector that transmits digitized images to a IMAQ PCI-1424 board may be used. The optical equipment  may be mechanically adjusted and aligned by motorized stages on which the equipment is mounted. To display live pictures of the processes and equipment, an IMAQ PCI-1408 board may be used to digitize the analog video signal from camera . Motion of camera  may be controlled by a motion control system available through a software application such as LabView, which may be stored and executed on computer . Camera  is provided with frame grabber  to provide video feedback of the physical process, and are controlled by the video server , which may be executed on the processor of computer . System software on computer  may also include IMAQ Vision for G that provides image processing libraries such as a Fast Fourier Transform (FFT) routine to speed up development of live data analysis software.","Directing attention to , the system architecture  integrates hardware and software that facilitate two-way communication between physical processes  to on-line users across computer networks. The system can be divided into several processes based on functionality: physical processes , lab server , connection server , clients , database server . These processes can be implemented as software programs that are executed in computing devices such as computers. As used herein, physical processes  are defined as physical, biological and\/or chemical processes or phenomena that can be detected, measured, quantified and\/or controlled by electronic devices such as detectors, sensors, motors, power source, etc. to various interfaces such as GPIB, RS-232, PCI, USB, ethernet, etc., the electronic devices that monitor and control the physical processes  and communicate with computer  that runs the lab server process .","Data from the physical processes  are collected by the lab server  for purposes of storing into the database via the database server  and\/or distributing to the clients  via the connection server . Prior to sending data, the lab server  can also perform analysis and transformation of the data such as statistics and FFT computation. The lab server  also receives data from the clients  such as control commands through the connection server . After analyzing these commands, the lab server  then passes the commands to the electronic devices or equipment (i.e. laser, motors, detectors, etc.). As shown in , there are multiple physical processes , namely physical process - and physical process -, as well as multiple lab servers -, -.","The connection server  serves as the distributor of data that accepts, verifies and routes information from data sources to appropriate destinations. The connection server  supports full duplex point-to-point and point-to-multipoints data transmissions between the clients , lab server , and database server . Several transmission modes will be discussed below. Additionally, the connection server  also monitors the status of network connections throughout the entire process.","The clients' processes  provide user interfaces (UI) for users' input and output functions. The clients' processes  are implemented as software programs that can be run on clients' computing devices such as desktop computers. The client also establishes two-way communications with the connection server . Data from the connection server  are decoded and displayed according to associated formats such as the video, graph, LED displays, etc.","In a preferred embodiment, communications between the processes above are carried out using a common language, such as Data Network Protocol (DNP). Besides transporting various data types, DNP also carries network and communications related messages between different processes. DNP packet format is also discussed in the later sections.","The lab server  may reside at the location of the physical process  to have direct local control of the physical process. The lab server  is the process that broadcasts data from the physical process  and well as control the physical process  based on requests from clients . The lab server  can be implemented as a multi-threaded software that implements communication functions across computer networks such as the internet . To provide universal and reliable communications, all data can be transported using standard connection based network protocols such as Transmission Control Protocol\/Internet Protocol (TCP\/IP). Each connection (in this case between the lab server process , connection server process , and clients ) is commonly called socket that consists of a network or IP address and a port number. However, the data itself and other communication messages are encoded in a format called Data Network Protocol (DNP). In the OSI network model, DNP can be considered as an application layer protocol like HTTP and FTP. The unique design of DNP provides a common language between different processes that enables collaborative environments between multiple users across the internet.","DNP is designed to carry various types of digital data such as float, integer, Boolean, video and arrays of data. Data is encoded using DNP into one information entity called a packet that has two main sections: the overhead section  and instruction section . Directing attention to , the DNP packet format is illustrated. The overhead section  may contain the following fixed-size fields:","Packet size : the length of the entire packet normally in byte words (8 bits unit).","Destination ID : may contain client ID, lab server ID, connection server ID, all-clients-group ID, all-clients-and-lab-server-group ID, or connection server group ID where the packet is sent.","Source ID : may contain client ID, lab server ID or connection server ID where the packet is originated.","Instruction number : contains the number of instructions following the overhead section . For example in , there are N instructions.","The instruction section  may contain a number of instructions. Each instruction can be a specific command or request that contains the following fields.","Component ID : identification number of specific device\/equipment for user interface component.","Command ID : identification number of specific command\/request to be performed.","Command Value : parameter values used to perform the commands or requests. Based on the associated command\/request, the data type of common values can vary (i.e. float data, integer data, video data, array of data). Consequently this field has variable size. Both sender and receiver of the request may have a look-up list of data types associated with the component ID's and command ID's. Hence, the data type information need not be carried in the packet itself. The instruction section may be extended to include component ID's, command ID's and command values -.  shows an example packet sent from a client  to a lab server  that is a request to change the current value of laser equipment to 45.4 mA. In overhead section  there is a packet size section , a lab server ID section  and a client ID section . In instruction section  there is a laser ID section , a change current value section  and the target milliamps 45.4 in section .",{"@attributes":{"id":"p-0038","num":"0037"},"figref":"FIG. 4","b":["112","118","456"]},"Two main functions may be performed by the lab server: broadcast data from the physical processes ; and perform clients' requests and general associated responses. To keep clients  up to date with the current states of the physical processes , the lab server  can broadcast information that is directly collected from the physical processes . Data from the physical processes  that are encoded in the DNP packet are transmitted to connections server  for distribution. The connections server can then look at the overhead section of the transmitted DNP packet and forward the packet to appropriate destinations. Details on the routing algorithm in the connections server are discussed below.","Sensors, detectors and other measurement instruments detect and\/or measure various physical phenomena (i.e. electric fields, electromagnetic radiation, temperature, pressure, etc.), and send this information to the lab server . The lab server  that has established network connection to the connections server  can then put the received information or its computed analysis into the instruction section of the DNP packet. This process can be repeated if more than one instruction is needed to be sent. Once all the instructions have been written in the instruction section of the DNP packet, the corresponding overhead sections can also be constructed. Once the DNP packet is complete, it can then be sent to the connections server .","Directing attention to , the lab server  can broadcast the raw data from physical processes  for calculating results based on computational analysis of the raw data. In some cases, data from the physical process  are analyzed for the purposes of scientific visualization, statistical analysis or data compression. For example, raw video data from the physical process are analyzed for both spatial and temporal redundancy. After performing a compression algorithm, the compressed format of the video data is written to the instruction section of the DNP packet. Video compression that is suitable for this application is described below. For the clients to receive a continuous update of information the entire process in  can be repeated on a periodic basis. The repetition period of this process can be adjusted according to a particular application. At step  the lab server  gets data from the physical process . Control may proceed to optional step , where the lab server  performs computational analysis. Control proceeds to step  where a look-up data type table is constructed. Control proceeds to step  where data is written in the instruction sections of the DNP packet. This may be part of an iterative loop where control returns to step . Control may also proceed from step  to step  where the DNP packet is written to the overhead section. Control continues to step  where the DNP packet is sent to the connections server .","Another function of the lab server  is to process clients' requests and generate associated responses. The lab server  can receive a DNP packet from the connections server  that contains the clients' requests for instructions. It is the responsibility of the lab server  to interpret these instructions, execute the commands and generate responses. This process is described in . Control begins at step  where the lab server  waits for the DNP packet to be received from the connections server . Proceeding to step , the overhead section of the DNP packet is read. Control continues to step , where one instruction in the instructions section of the DNP packet is read. Control proceeds to step , where the lab server  executes the request\/instruction by calling equipment\/instruction drivers. Control proceeds to step , where the lab server  writes response data in the instruction section of the DNP packet. From step , control may return to step  in an iterative loop according to the number of instructions; control may also proceed to step , where the DNP packet is written to the overhead section. Control proceeds to step , where a response DNP packet is sent to the connections server .","Execution of a client's requests may involve calling particular software drivers that send the commands to instruments via the associated computer interface such as GPIB, RS-232, USB, ethernet, etc. The request may also contain instructions for information management such as recording the client's request, storing collected values from instruments, and querying previously collected information. In the case of information management, the lab server  can interact directly with local or remote database servers through standard database drivers such as ODBC or JDCB.","Unlike the broadcasting functions that may continuously send DNP packets to clients, this function of the lab server  only generates responses when client requests are received. When the lab server  is implemented in a software program, this function may be run in a separate thread for parallel processing with other functions.","The connections server  can be run in the same computer where the lab server  resides. For additional reliability, in the preferred embodiment the connections server  may be executed in a separate computer. The connections server  may be implemented using object oriented, network-enable and multi-threaded software development environments such as JAVA or C++. Two of the main functions performed by the connections server  include: monitoring and maintaining reliable network connections with all active clients and lab servers; and routing DNP packets to appropriate destinations.","The connections server  maintains network connections with all the processes, namely: lab server , database server , and clients . A connection handler, which may be a class or object in object-oriented programming terminology, can perform readings from and writing to each of the connections. Each connection handler should be run in a separate thread for parallel processing. Once the connections server  accepts or establishes a connection, it can then pass the connection information (i.e. the socket information. that contains remote post address and remote port number) to the connection handler for further processing. The connections server  maintains an array or table of connection handlers, namely the connection table, to perform and monitor network related processes. A connection monitor is another important process included in the connections server  that runs on a periodic basis. The connection monitor may be implemented as a subclass of the connections server  and may be executed in a separate thread. A function of the connection monitor is to monitor and control the network communications of the processes (i.e. clients  and lab server ) connected to the connections server.",{"@attributes":{"id":"p-0047","num":"0046"},"figref":["FIG. 7","FIG. 7","FIG. 7"],"b":["550","552","554","120","110","552","556","554","558","560","556","560","112","562","564","112","112","112","110","112","110","112"]},"The connections server serves as the distributor of data that accepts, verifies and routes DNP packets to appropriate destinations. The connections server supports full duplex point-to-point and point-to-multipoints data transmissions based on the destination ID field of the DNP packet. As a result both clients  and lab server  processes may synchronously receive events that are generated by any processes. , B, C, D, E and F display several routing modes that may be performed by the connections server.  are an example case of three clients and a lab server connected to the connections server. The maximum number of clients that may be served varies according to the available network bandwidth.","As discussed above, the connection handler is part of the connections server and may perform reading from and writing to each connection. The connections server  listens to any connection request, and passes the network information to the connection handler once a valid connection is established.  shows the flow diagram of the connection handler. Beginning at step , the connection handler receives network information from an accepted connection from the connections server. Control proceeds to step , where the connection handler checks to see if the connection is valid. If the connection is not valid (decision step ), control proceeds to step , where the connection handler closes the connection and control terminates. However, if the connection is valid, control proceeds to step , where the connection handler waits and listens for incoming DNP packets for a certain time-out period. From step , control proceeds to decision step . At decision step , if a DNP packet is received before the time-out, control proceeds to step , where the overhead section of the DNP packet is read. However, if a DNP packet is not received before the time-out, control returns to step . From step , control proceeds to step , where again the connection handler attempts to validate the connection. If the connection is not valid (decision step ), control returns to step . However, if the connection is valid, control proceeds to step , where the rest of the DNP packet is read according to its packet length. Control then proceeds to step , where connection handlers in the connection table are found based on the destination ID in the DNP overhead section. Control then proceeds to step , where all DNP packets are sent to all destinations via the connection handlers found in the connection table. From step  control returns to step . The operations described above are repeated until the connection is no longer valid.","Client processes provide a graphical user interface for the end users of the physical process . The clients may be implemented in any object-oriented and network-enabled software development environment such as C++ or JAVA. The client should contain graphical components that may be used for getting user inputs and\/or display information. Some of the components may include dials, graphs, switches, LED displays, buttons, etc.","The client process  may be executed from any computer that is connected to a TCP\/IP network such as the internet. When the client process is run, it will first attempt to establish network connections to the connections server . User requests\/commands that are received from the UI components are encoded into DNP packets to be sent to the connections server . The client  may also process DNP packets from other remote clients and lab servers  that are received via the connections server . This operation may also be executed in a separate thread for parallel processing.",{"@attributes":{"id":"p-0052","num":"0051"},"figref":"FIG. 10","b":["118","110","624","114","626","628","629","629","628"]},"The database server  manages a database containing information that is essential to the operation of other processes. The remote operation of the database server  can be facilitated using database application programming interface standards such as ODDC or JDDC. The database server  manages the following list of information: user information, user physical process data, scheduling information, and event data.","The database server  manages user profiles. A user profile contains user accessed information such as log-in name and password that enables the connections server  to verify connection requests from the clients . In addition, the user profile also includes the client's progress information by tracking the status of accomplished actions\/requests. Data from the physical processes  (i.e. sensor readings, states of equipment, etc.) may also be recorded on behalf of a client's request. This data be time stamped and may be made available to the user via an interactive \u201claboratory notebook\u201d user interface. Using a common gateway interface (CGI) or JAVA servlet program that may interact with the database server , clients may search and retrieve previously recorded physical process data. The search may be based on chronological order, keyword, or other characteristics of the recorded data. Scheduling information ensures that only the appropriate clients are given access to the physical processes  in a certain time period. Every event received by the lab server may also be automatically recorded. This data may be used to analyze clients' behavior and usage patterns in controlling the physical process . The interactive laboratory notebook may also contain lab parameters, \u201cto do\u201d lists, and personal notes.","The interactive laboratory notebook is part of a user interface that may be constructed using Interface Builder or similar software application, and may be accessed by users during the course of an experiment. The interactive laboratory notebook may be implemented to include a database stored on a hard disk or other nonvolatile memory of computer , as well as a user interface to access the database. Where the present invention is utilized for distance learning, the interactive laboratory notebook provides a central repository for information and is an essential tool for instructors to evaluate the progress and performance of students using the online laboratory.","The user interface may include animated switches, dials, buttons, and LED displays rather than traditional browser forms. Online graphing of the real time data along with other customized user interface components allows users to experience a hands-on look and feel. The user interface may closely resemble the front panels of the actual instruments in functionality, layout, and appearance. The live video stream may also be included in the user interface.","Real Time Video Observation","Observing physical processes in real time via the internet is a key feature of the present invention. Returning to , video camera  is used to acquire live images from a system that the user interacts with and whose actions affect the observed video. Video capture (or frame grabber) hardware  is used on a computer to capture images desired to be sent to the user with minimum latency. A video server computer  compresses new image data and forms packets to be transmitted to the user (client) through the computer network . The client, using a standard browser, is able to view the live video and interact with the system. In order to transmit video via the internet in real time, spatial and temporal compression is performed. In spatial compression, the acquired image from frame grabber  is represented as gray-scale or as a color image in terms of hue, saturation, and value (HSV). In both cases values are represented as integers. The image data is divided into square blocks (8\u00d78 pixels or 16\u00d716 pixels, for example). A two-dimensional discrete cosine transform (a standard mathematical operation often abbreviated as DCT) is performed on each block.","To perform temporal compression, the server  subtracts the ideal DCT data from the DCT data that the client currently holds. This difference in DCT data is the information that the client must receive in order to allow its video to be updated to the desired image. This compression uses a single new frame to calculate data to be sent. This sacrifices compression efficiency (i.e. that obtained using the MPEG4 standard) in order to minimize latency. An approximation to this difference is calculated which meets the requirements of the specified fixed packet size (specified in bits). By basing compression on a specified packet size, compressed video matches transmission limitations of the client . The data rate (PACKET_SIZE*PACKETS_PER_SECOND) that is used for a particular client is dynamically determined and updated as video is sent. This allows the quality of video that is sent to a client to vary according to the abilities of each client's internet connection. This also allows the data rate to vary in response to changes in a client's allowable data rate. By having the client intermittently inform the server of the times that it received transmitted packets, the latency and allowable data rate of the client may be calculated.",{"@attributes":{"id":"p-0059","num":"0058"},"figref":"FIG. 11","b":"0"},{"@attributes":{"id":"p-0060","num":"0059"},"figref":"FIG. 12","b":["74","630","632","634","70","72","636","638","640","642","644","648","74","650","74","632"]},{"@attributes":{"id":"p-0061","num":"0060"},"figref":"FIG. 13","b":["652","654","74","656","658","660","662","664","654","74"]},"The instructions described above as well as the user interface and interactive laboratory notebook may be implemented in software and stored in the computer  and executed in accordance with the preferred embodiment of the present invention.","While the description above explains the operation of a laser and optical equipment, it is to be understood that a wide variety of physical processes may be performed using the present invention, and other forms of data may be recorded such as time, temperature, voltage, current, magnetic field, electromagnetic radiation, and the like. Additional applications of the present invention may extend to entertainment, for example the remote control of toys in an interactive setting, where multiple users may access computer  via the computer network  and play games involving multiple users. The real time video taught by the present invention is an integral part of such an application.","In other applications of the present invention, computer  and camera  may be utilized as a sales or development tool to demonstrate equipment or processes to prospective clients, customers, or developers by providing a demonstration of the equipment or processes in real time and eliminating the expenditure of resources required to travel to a location where the equipment or processes are located.","While the present invention has been described in connection with the preferred form of practicing it, those of ordinary skill in the art will understand that many modifications may be made thereto without changing the scope of the claims that follow. Accordingly, it is not intended that the scope of the invention in any way be limited by the above description, but instead be determined by reference to the claims that follow."],"BRFSUM":[{},{}],"heading":["FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION"],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The forgoing aspects and many of the attendant advantages of the present invention will become more readily apparent in the following detailed description and accompanying drawings, wherein:",{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 1A"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 1B"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 4","b":"112"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIGS. 8A","b":["8","8","8","8","8"]},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 13"}]},"DETDESC":[{},{}]}
