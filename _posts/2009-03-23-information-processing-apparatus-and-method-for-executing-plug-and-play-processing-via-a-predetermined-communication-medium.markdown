---
title: Information processing apparatus and method for executing plug and play processing via a predetermined communication medium
abstract: The present invention relates to an information processing apparatus capable of executing plug and play processing for starting up one installation processing operation upon acquiring one device identification information item. The information processing apparatus includes an acquisition unit for acquiring at least one device identification information item including a plurality of configuration information items corresponding to each of a plurality of logical interfaces in response to connection of a peripheral device. The information processing apparatus further includes an installation control unit for controlling execution of installation of a plurality of device drivers corresponding to the plurality of logical interfaces, respectively, by the use of the plurality of configuration information items included in the at least one device identification information item when the acquisition unit acquires the at least one device identification information item from the peripheral device.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07945770&OS=07945770&RS=07945770
owner: Canon Kabushiki Kaisha
number: 07945770
owner_city: Tokyo
owner_country: JP
publication_date: 20090323
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS REFERENCE TO RELATED APPLICATIONS","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DESCRIPTION OF THE EMBODIMENTS"],"p":["This application is a continuation of U.S. patent application Ser. No. 11\/149,013 filed Jun. 9, 2005, which claims priority from Japanese Patent Application No. 2004-174059 filed Jun. 11, 2004, both of which are hereby incorporated by reference herein.","1. Field of the Invention","The present invention relates to image processing apparatuses, image processing systems, and methods for controlling image processing apparatuses and systems.","2. Description of the Related Art","Single image processing apparatuses that provide information processing terminals connected thereto via interfaces (I\/Fs) with a plurality of functions, including a printer function, a scanner function, and a facsimile (hereinafter, referred to as a FAX) function, are well known as multifunction devices. To use these image processing apparatuses on the information processing terminals, driver software for the printer, scanner, and FAX needs to be installed in each of the information processing terminals in most cases.","The Microsoft Windows\u00ae operating system (OS) includes a plug and play function for automatically detecting the device type of the image processing apparatus connected to the information processing apparatus and automatically installing a driver appropriate for the detected device type. The plug and play function allows a device ID to be acquired from the image processing apparatus and a driver corresponding to the device ID to be installed (Japanese Patent Laid-Open No. 2003-216378).","Unfortunately, since a single device ID has a plurality of corresponding drivers, an operator needs to select drivers to be installed and install drivers individually. In other words, the plug and play function is not easy for operators to use.","Furthermore, if the same logical interface is shared by a plurality of functions each having a corresponding device driver, header information for identifying a command needs to be added. In addition, the information processing apparatus needs to be constructed so as to refer to the command header section. In short, the performance in both the information processing terminal and the image processing apparatus is degraded due to a complicated control procedure and increased overhead.","Some image processing apparatuses have a USB (universal serial bus) HUB to which a printer function, a FAX function, and a scanner function are connected. However, these image processing apparatuses are generally expensive.","Embodiments according to the present application include the features described below.","According to an aspect of the present invention, an information processing apparatus capable of executing plug and play processing for starting up one installation processing operation upon acquiring one device identification information item includes: an acquisition unit configured to acquire at least one device identification information item including a plurality of configuration information items corresponding to each of a plurality of logical interfaces in response to connection of a peripheral device; and an installation control unit configured to control execution of installation of a plurality of device drivers corresponding to the plurality of logical interfaces by using the plurality of configuration information items included in the at least one device identification information item when the acquisition unit acquires the at least one device identification information item from the peripheral device.","According to another aspect of the present invention, an information processing method capable of executing plug and play processing for starting up one installation processing operation upon acquiring one device identification information item includes steps of: acquiring at least one device identification information item including a plurality of configuration information items corresponding to each of a plurality of logical interfaces in response to connection of a peripheral device; and controlling execution of installation of a plurality of device drivers corresponding to the plurality of logical interfaces by using the plurality of configuration information items included in the at least one device identification information item when the acquisition unit acquires the at least one device identification information item from the peripheral device.","According to still another aspect of the present invention, a control program causes a computer to execute the above-described method.","All driver software programs required to install drivers can be automatically installed. This provides an easy installation method by eliminating the need for an operator to follow a complicated procedure.","Other features and advantageous of the present invention will be apparent from the following description taken in conjunction with the accompanying drawings, in which like reference characters designate the same or similar parts throughout.",{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 1","b":"10"},"A system control section  controls the operation of the apparatus via a system bus . A read-only memory (ROM)  stores, for example, a control program of the system control section . A registration memory  includes, for example, a battery-backup static random access memory (SRAM) or a flash memory. It stores, for example, settings registered by an operator and management data of the apparatus. An image memory  includes, for example, a dynamic random access memory (DRAM). It accumulates image data. A work memory  includes, for example, a DRAM. It stores, for example, a program control variable. An operating section  includes, for example, various keys. It is used by an operator to perform various inputs. A display section  includes, for example, a liquid crystal display (LCD) and a light emitting diode (LED). The display section  outputs various visual and auditory information.","A reading control section  includes, for example, an image sensor such as a charge-coupled device (CCD) and a CS (contact sensor) and an image processing control section.","The reading control section  reads a document optically, converts it into electrical image data, subjects the electrical image data to various types of image processing, such as color processing, binarization processing, and half-tone processing, and outputs high-resolution image data. The reading control section  supports at least one of an ADF (auto document feeder) system for reading the documents in the ADF while transferring one document at a time and a document glass system for reading the document on the document glass without moving the document.","A recording control section  includes, for example, a printer such as a thermal printer, a laser printer, or an ink-jet printer and an image processing control section. It subjects, for example, image data to be recorded to various types of image processing such as smoothing processing and recording-density correction processing, converts it into high-resolution image data, and outputs it onto a record sheet. An encoding\/decoding section  encodes raw image data (e.g., Modified Huffman (MH), Modified Read (MR), Modified Modified Read (MMR), Joint Bi-Level Image Experts Group (JBIG), or Joint Photographic Experts Group (JPEG)), and decodes encoded image data into raw image data.","A communication control section  includes, for example, a modem and an NCU (network control unit). It sends and receives, for example, image information to and from an apparatus serving as a communication partner via a communication line .","A USB function control section  carries out communication control of a USB interface . It carries out protocol control in accordance with the USB communication standard. The USB function control section  converts data from a USB control task executed by the system control section  into a packet and transmits a USB packet to an external information processing terminal . The USB function control section  also converts a USB packet from the external information-processing terminal into data and transmits it to the system control section  via the system bus . It is assumed that transmission and reception of these various control commands and data are carried out using a known method, and thus details of the transmission and reception method are not described herein.",{"@attributes":{"id":"p-0030","num":"0029"},"figref":["FIG. 2","FIG. 1"],"b":"20"},"The information processing terminal  includes a CPU  that controls the operation of the information processing terminal  via a system bus according to a program stored in a ROM , a main memory , or a hard disk  or a program read out from a floppy disk (FD) drive  or a CD-ROM (compact disk-ROM) drive . The ROM  stores, for example, a control program of the CPU .","The main memory  temporarily stores a program and image data to speed up processing by the information processing terminal . A hard disk control section  controls the hard disk . The hard disk  stores the operating system, various application programs, image data, and so on. Application software and driver software for transmitting and receiving various control commands and data to and from the image processing apparatus  are installed in the hard disk . Typically, these application software and driver software are installed in the hard disk  from another computer-readable medium storing these application software and driver software via, for example, the FD drive  or CD-ROM drive . These application software and driver software can also be downloaded into the hard disk  via a network control section  and a modem .","A keyboard\/mouse control section  controls a keyboard\/mouse , functioning as a device for inputting instructions from an operator. A display control section  controls a display  that presents an operator with various types of visual information. The network control section  controls communication with a network (not shown) via a network I\/F . It is assumed that connection to the network is carried out using a known method, and thus details of the connection method are not described herein.","The modem  connects to a provider via a communication line  and sends\/receives data and image information to\/from an apparatus serving as a communication partner. A USB host control section  carries out communication control of the USB interface . In accordance with the USB communication standard, the USB host control section converts data from the CPU  into a packet and transmits a USB packet to the image processing apparatus  via the USB interface . The USB host control section  also converts a USB packet from the image processing apparatus  into data and transmits it to the CPU . It is assumed that the communication control method is based on a known method, and thus details of the communication control method are not described herein. A FD drive control section  controls the FD drive .","A CD-ROM drive control section  controls the CD-ROM drive .","The USB standard will now be described with reference to . From the viewpoint of software configuration, devices are treated as \u201cobjects\u201d. More specifically, a device is a representative of a class \u201cdevice objects\u201d, and the basic framework is determined. The framework of the entire device is defined as a \u201cdevice framework\u201d. The most fundamental device class includes an end point and an interface. This basic structure is defined as a configuration including only one elementary function defined by one interface. This elementary function includes some end points, each of which is viewed as a USB communication entity. The framework of a multifunction device will now be described with reference to . Referring to , a plurality of interfaces (, , and ) are defined as a configuration , and they serve as function blocks that operate individually. In short, a multifunction device including a plurality of elementary functions is defined.",{"@attributes":{"id":"p-0037","num":"0036"},"figref":["FIG. 3","FIG. 3"],"b":["112","301","301","301"]},"In the Device , only one configuration (Configuration ) is defined. Attributes of the Configuration  are expressed in a Configuration Descriptor, which includes the number of interfaces in the configuration etc. In this embodiment, the number of interfaces is \u201c3\u201d. In the Configuration , three interfaces (Interface , Interface , and Interface ) are defined.","Attributes of each of the Interface , Interface , and Interface  are expressed in an Interface Descriptor, which includes the number of endpoints, class code, etc. in the interface. In this embodiment, the number of endpoints in the Interface  used for the scanner is \u201c3\u201d, and the class code is a vender class (0xFF). The number of endpoints in the Interface  used for the printer is \u201c2\u201d, and the class code is a printer class (0x07). The number of endpoints in the Interface  used for FAX transmission\/reception is \u201c2\u201d, and the class code is a printer class (0x07).","In the Interface  used for the scanner, three Endpoints (Endpoint , Endpoint , and Endpoint ) are defined. Attributes of each of the Endpoint , Endpoint , and Endpoint  are expressed in an Endpoint Descriptor, which includes the endpoint number, communication direction, transfer type, packet size, etc. of the endpoint. The Endpoint  is used mainly to receive control data. The Endpoint  is used mainly to transmit control data and read-out data. The Endpoint  is used mainly to report that a command for starting scanning has been issued.","In the Interface  used for the printer, two Endpoints (Endpoint  and Endpoint ) are defined. Attributes of each of the Endpoint  and Endpoint  are expressed in an Endpoint Descriptor, which includes the endpoint number, communication direction, transfer type, packet size, etc. of the endpoint. The Endpoint  is used mainly to receive control data and print data. The Endpoint  is used mainly to transmit the print status of received print data.","In the Interface  used for FAX transmission, two Endpoints (Endpoint  and Endpoint ) are defined. Attributes of each of the Endpoint  and Endpoint  are expressed in an Endpoint Descriptor, which includes the endpoint number, communication direction, transfer type, packet size, etc. of the endpoint. The Endpoint  is used mainly to receive control data and FAX transmission data. The Endpoint  is mainly used to transmit the communication status of FAX transmission.","With these structures, the first time the image processing apparatus  is connected to the information processing terminal , necessary drivers can be installed through an automation mechanism called \u201cplug and play\u201d provided by the Microsoft Windows\u00ae OS in the information processing terminal . Once the necessary drivers have been installed, the drivers allow the image processing apparatus  to function as a printer, scanner, PC FAX, etc. A detailed installation procedure will be described later with reference to .",{"@attributes":{"id":"p-0044","num":"0043"},"figref":"FIG. 4","b":["112","401","1","308","402","2","311","20","20"]},{"@attributes":{"id":"p-0045","num":"0044"},"figref":["FIG. 5","FIG. 5"],"b":["20","220","222","203","201","20","201","222","220","207","208"]},"When installation is started, it is determined in step S whether the above-described program can be installed. For this purpose, the above-described program checks the remaining capacity of the hard disk  in the information processing terminal , the capacity of the main memory , the type of the installed OS (Operating System), etc. If it is determined in step S that installation is not possible, an error screen is displayed (step S) and processing ends. On the other hand, if it is determined in step S that installation is possible, it is determined whether there is old driver information in the information processing terminal . If it is determined that there is old driver information, the old driver information is deleted (step S). This is because old driver information may prevent the subsequent installation procedure from proceeding normally. Thereafter, drivers necessary for the installation are copied to the hard disk  (step S). This copying can be performed by the use of, for example, an application programming interface (API) known as SetupCopyOEMInf in the case of the Windows\u00ae OS.","The drivers that have been copied include INF files. The INF file for the printer driver contains character strings corresponding to the MFG and MDL character strings in the device ID  for the Interface and a file name to be installed for the printer driver. Likewise, the INF file for the FAX driver contains character strings corresponding to the MFG and MDL character strings in the device ID  for the Interface and a file name to be installed for the FAX driver.",{"@attributes":{"id":"p-0048","num":"0047"},"figref":["FIG. 6","FIG. 6","FIG. 5","FIG. 5","FIG. 5","FIG. 3"],"b":["20","601","10","10","209","601","10","201","602","201","10","603","0","1","2","20"]},"In step S, it is determined whether a generated port is for the printer class. If the port is for the printer class, then in step S the device ID character string shown in  is acquired with the Get_Device_ID command. From the MFG\/MDL information in the device ID character string, a search is made for information matching the MFG\/MDL information in the INF files copied to the hard disk  in step S. Then, driver files described in the matching INF files are installed (step S).","Next, the above-described program determines whether there is a subsequent new port (step S). If it is determined that there is a subsequent port, the flow returns to step S, where driver installation is repeated.","If it is determined in step S that the generated port is not for the printer class, installation is carried out based on the mechanism of the corresponding class (step S). In this manner, the scanner driver, the printer driver, and the FAX driver are installed for the Interface, the Interface, and the Interface, respectively. The processing described above is repeated until it is determined in step S that there are no more ports to process.","As described above, the information processing apparatus capable of executing plug and play processing for starting up one installation operation upon acquiring one device identification information item can be embodied as the information processing terminal  having the following features. That is, when the image processing apparatus  (one example of a peripheral device) is connected, the information processing terminal  acquires at least one device configuration data item (one example of device identification information) including a plurality of configuration information items (e.g., MFG:XXX; MDL:YYY(Printer); CMD:Printer Language; CLS:PRINTER; DES:XXX YYY(Printer) shown in ) for logical interfaces (Interface and Interface shown in ). Then, when the program acquires device identification information transferred from the image processing apparatus , the information processing terminal  uses the plurality of configuration information items included in the device configuration data to control the execution of installation of the plurality of device drivers for the logical interfaces. According to one aspect of the present invention, an image processing apparatus having a plurality of functions in its single body can have a plurality of logical channels without an internal USB HUB. Because of this, the image processing apparatus can be inexpensive. According to another aspect of the present invention, header information for command identification is eliminated, and therefore, control is simplified and performance is enhanced.","As described above, at step S, plural kinds of drivers which correspond to the printer class are installed to an information processing apparatus. At step S, drivers corresponding to other classes are installed. An install program in the information processing apparatus also controls the OS to register registry information corresponding to the drivers installed in a memory of information processing apparatus. Once a plug and play process is invoked, an OS reads out the registry information and displays new additional icons corresponding to the drivers associated with printer class or other class(es) on the display  by using registry information.","The processing according to this embodiment shown in  is carried out by the apparatuses with the program installed from an external source. A case where the host computer is supplied with information items, including the program, from a storage medium such as a CD-ROM, a flash memory, or a FD or from an external storage medium via the network is also covered by the present invention.","The system or the apparatus can be supplied with a storage medium that records program code (software) for achieving the function according to the above-described embodiment. The program code (software) can also be downloaded to the system or apparatus from an external server (not shown). A computer (or CPU or MPU (micro-processing unit)) of the system or the apparatus loads the program code from the storage medium to execute the program code.","In this case, the program code itself read out from the storage medium realizes the function of the present invention. The storage medium for supplying the program code includes a floppy disk, a hard disk, an optical disk, a magneto-optical disk, a DVD (digital versatile disk), a CD-ROM, a magnetic tape, a non-volatile memory card, a ROM, an EEPROM (Electrically Erasable Programmable Read-Only Memory), and so on.","As described above, the function of the above-described embodiment is achieved with the execution of the program code read by the computer. In addition, the function of the above-described embodiment may also be achieved by the operating system (OS) running on the computer that performs all or part of the processing according to the commands of the program code. Furthermore, the function of the above-described embodiment may also be achieved such that the program code read from the storage medium is written to a memory provided in an expansion card disposed in the computer or an expansion unit connected to the computer and then the CPU provided on the expansion card or the expansion unit performs all or part of the processing based on commands in the program code.","While the present invention has been described with reference to exemplary embodiments, it is to be understood that the invention is not limited to the disclosed embodiments. On the contrary, the invention is intended to cover various modifications and equivalent arrangements included within the spirit and scope of the appended claims.","The scope of the following claims is to be accorded the broadest interpretation so as to encompass all such modifications and equivalent structures and functions."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":["FIG. 2","FIG. 1"]},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 6"}]},"DETDESC":[{},{}]}
