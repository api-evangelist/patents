---
title: Access authorizing apparatus
abstract: An access authorizing apparatus includes a receiving unit, a first transmitting/receiving unit, a token issuer and a transmitting unit. A receiving unit receives first approval information indicating that access to the resource in the device has been approved by an access approver, from the first application via the network. A first transmitting/receiving unit transmits an access approval request including the first approval information to the access approving apparatus, and receives access enable/disable information indicating whether the access to the resource by the first application is permitted, from the access approving apparatus. A token issuer, when the access enable/disable information indicates that the access to the resource is permitted, issues token information that gives authority to access the resource to the first application. A transmitting unit transmits the token information issued by the token issuer, to the first application.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08776203&OS=08776203&RS=08776203
owner: Kabushiki Kaisha Toshiba
number: 08776203
owner_city: Tokyo
owner_country: JP
publication_date: 20110915
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["CROSS REFERENCE TO RELATED APPLICATIONS","FIELD","BACKGROUND","DETAILED DESCRIPTION","First Embodiment","Second Embodiment"],"p":["This application is based upon and claims the benefit of priority from the prior Japanese Patent Application No. 2010-244678, filed on Oct. 29, 2010, the entire contents of which are incorporated herein by reference.","Embodiments of the present invention relate to an access authorizing apparatus.","When one service on the Internet causes a third party (such as a third party application) other than the service and a user to use information and functions (hereinafter, referred to as \u201cresources\u201d) related to various services, including personal information on the user of the service, there is Non Patent Literature 1 as a technique for transferring only access authority, without publishing authentication information (such as a user ID (approver ID) and a password) for accessing the resources, to the service.","Non Patent Literature 1 (E. Hammer-Lahav, Ed., D. Recordon, D. Hardt \u201cThe OAuth 2.0 Protocol\u201d, Network Working Group, IETF, Jun. 15, 2010) has a merit that there is no need to publish the authentication information to the service when the authority to access the resources is transferred, and in addition, has a merit that not only the user but also a manager of the service can prevent unauthorized access to the resources by the third party.","Non Patent Literature 1 assumes that a trust relationship (contractual relationship) has been able to be directly constructed in advance, mainly between a resource managing entity (the above described service on the Internet) and the third party. Consequently, if the service cannot directly construct the relationship because the number of resource managing entities is enormous and the resource managing entities are ubiquitous, or the like (for example, if household electrical appliances are assumed as the resource managing entities, or the like), Non Patent Literature 1 cannot be used. Accordingly, a manager of the resource managing entity other than the user cannot prevent the unauthorized access to the resources by the third party.","As described above, a conventional art has a problem that, in a case where the third party cannot directly construct the trust relationship with the resource managing entities because the number of the resource managing entities is enormous and the resource managing entities are ubiquitous, or the like, the authority to access the resources cannot be transferred to the third party. Furthermore, there is a problem that the manager of the resource managing entity other than the user cannot prevent the unauthorized access to the resources by the third party.","According to an aspect of the embodiments, there is provided an access authorizing apparatus that is connected to a device having a resource used by a first application, and an access approving apparatus, respectively via a network, the access authorizing apparatus.","The access authorizing apparatus includes a receiving unit, a first transmitting\/receiving unit, a token issuer and a transmitting unit.","The receiving unit receives first approval information indicating that access to the resource in the device has been approved by an access approver, from the first application via the network.","The first transmitting\/receiving unit transmits an access approval request including the first approval information to the access approving apparatus, and receives access enable\/disable information indicating whether the access to the resource by the first application is permitted, from the access approving apparatus.","The token issuer, when the access enable\/disable information indicates that the access to the resource is permitted, issues token information that gives authority to access the resource to the first application.","The transmitting unit transmits the token information issued by the token issuer, to the first application.","In the following, embodiments of the present invention will be described in detail by reference to the drawings.",{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 1","b":["101","102","103","104","110","101","102","103","104","201"]},"Next, a hardware configuration of the access authorizing apparatus  according to the present embodiment will be described. The access authorizing apparatus  of the present embodiment includes a controlling unit such as a CPU (Central Processing Unit) that controls the entire apparatus, a main storage such as a ROM (Read Only Memory) or a RAM (Random Access Memory) that stores various data and various programs, an auxiliary storage such as an HDD (Hard Disk Drive) that stores various data such as GUI information and various programs, and a bus that connects these units. This hardware configuration uses an ordinary computer. Moreover, in the access authorizing apparatus , a wireless or wired communication I\/F (interface) that controls communication with external apparatuses ( to ) is provided. The communication with each external apparatus is performed via the network . The access authorizing apparatus  has at least a unit that transmits and receives information to and from the access approving apparatus , the user authenticating apparatus , the device , and the application (user) installed on the device , via the network . The access authorizing apparatus  is realized, for example, as a server apparatus existing on the Internet. In the present embodiment, the access authorizing apparatus  is assumed to be the server apparatus on the Internet.","It should be noted that hardware configurations of the access approving apparatus  and the user authenticating apparatus  are similar to the access authorizing apparatus . In the present embodiment, similarly to the access authorizing apparatus , they are assumed to be server apparatuses existing on the Internet.","Next, a hardware configuration of the device  will be described. Similarly to the access authorizing apparatus , the device  of the present embodiment has the hardware configuration using an ordinary computer. A difference from the access authorizing apparatus  is that a GUI displaying unit such as a liquid crystal display, and an operation inputting unit, such as a keyboard, a mouse or a remote controller, which accepts an instruction input from the user, are provided in order for the user to approve access to an internal resource in the device by the application . Similarly to the access authorizing apparatus , a communication I\/F is provided, and a unit that transmits and receives the information to and from the access authorizing apparatus  via the network  is included. The device  is realized, for example, as a personal computer, a digital television, a hard disk recorder, or a mobile device such as a slate pc or a smart phone. In the present embodiment, the device  is assumed to be the digital television. Furthermore, the resource provided to the application  by this device  is assumed to be a recorded program list for digital terrestrial broadcasting that is accumulated in a hard disk included in the television.","The network  is, for example, the Internet, an NGN (Next Generation Network) that is a quality-assured, closed network, or the like. In the present embodiment, the network  is assumed to be the Internet.","The application  is software downloaded from a server or a recording medium such as a CD-ROM (not shown), onto the device . This may be a native application that is distributed and installed in a binary format that can be directly executed by hardware (a processor) of the device , or may be a non-native application that is described in a program language executed on a VM (Virtual Machine) and is executed by the processor on the device  via the VM, like Java (R). The latter application further may be a Web application that is described in HTML (HyperText Markup Language), CSS (Cascading Style Sheet) or JavaScript and is equivalent to a so-called Web page. In a case of the Web application, the Web application may be arranged on a local HTTP (HyperText Transfer Protocol) server within the device , may be placed on a premise LAN as a private server arranged in a premise network, or may be arranged on an external server that realizes a service on the Internet. In the present embodiment, it is assumed to be the Web application arranged on the local HTTP server. In other words, the application  is assumed to be Web content that operates on a Web browser installed on the device  (digital television) (or on middleware that realizes a Web browser, such as Webkit).","Next, in the above described hardware configurations, various functions realized by the CPU of the access authorizing apparatus  executing the various programs stored in the main storage and the auxiliary storage will be described according to . The access authorizing apparatus  has a first transmitting\/receiving unit , a second transmitting\/receiving unit , a token issuance determining unit , a token issuer , a token information storage , a token information provider , a token invalidating unit , an approval request permission information issuer , an approval request permission information storage , and an approval request permission information authenticating unit .","Among them, the first transmitting\/receiving unit , the second transmitting\/receiving unit , the token issuance determining unit , the token issuer , the token information provider , the token invalidating unit , the approval request permission information issuer , and the approval request permission information authenticating unit  are realized by executing a code expanded on the main storage such as the RAM when the CPU executes the program.","Moreover, the token information storage  and the approval request permission information storage  are, for example, database management systems constructed in the main storing or auxiliary storage. This may be a relational database, or may be an XML (eXtensible Markup Language) database. Moreover, this does not need to be constructed with a single database management system, and a plurality of database management systems, for example, SQLite3, Oracle, MySQL and the like may also be used together. Moreover, this may be constructed on a single physical storage, or may be a database management system configured with a plurality of physical auxiliary storages such as an NAS (Network Attached Storage) and an SAN (Storage Area Network). Moreover, a data storage area may be nonvolatile or may be volatile. Alternatively, if a unit that can acquire unit information (entry) on each data to be stored in each storage is provided, this may be a simple data managing module based on a list structure that is generated on the main storage when the CPU executes the program, may be a CSV format file managing module, or may be configured with a Key\/Value store.","Subsequently, each unit included in the present embodiment will be described in detail below.","The first transmitting\/receiving unit  performs data communication with the access approving apparatus . The first transmitting\/receiving unit  transmits user identification information that identifies the application , device identification information that identifies the device , and approval information (first approval information) indicating that the application  has been approved by a corresponding access approver for the access to the resource in the device , to the access approving apparatus , and receives access enable\/disable information representing whether the access to the resource in the device  by the application  is enabled or disabled. This transmitting\/receiving process is performed on the network , and for example, is realized by HTTP (Hypertext Transfer Protocol) communication. At this time, generally, the first transmitting\/receiving unit  becomes an HTTP client, and the access approving apparatus  becomes an HTTP server. However, as a form of realization, they are not limited thereto. A configuration is also conceivable in which communication connection from the access approving apparatus  to the first transmitting\/receiving unit  is established. In this case, conversely, the first transmitting\/receiving unit  behaves as the HTTP server. This communication via the network  is not limited to HTTP. As long as the above described data can be transmitted and received, another existing communication protocol may be used, or a proprietary communication protocol may be designed and used. This assumption applies to all the communication via the network  according to the present invention. Hereinafter, each piece of the information transmitted and received by the first transmitting\/receiving unit  will be explained.","First, the user identification information is information issued to the application (user)  by the user authenticating apparatus . The user identification information uniquely identifies the application . A developer of the application  receives the issuance of the user identification information from the user authenticating apparatus  before publishing\/distributing the application , and sets the user identification information within the application . This issuance may be performed, for example, by preparing a Web page for registering the application, by the user authenticating apparatus , and inputting necessary information into a registration format on this Web page and applying for the issuance by the above described developer. Alternatively, the issuance of the user identification information may be requested based on an e-mail. As long as the setting within the application is performed before the application  is published\/distributed, any issuance form may be used. The user identification information includes a user ID that can uniquely identify the user in the user authenticating apparatus , and can further include confidential information for authenticating validity of the user ID.","The device identification information is information that can uniquely identify the device . Specifically, a combination of an MAC (Media Access Control) address, a UUID (Universal Unique Identifier), a product model name and a manufacturing number, or the like is conceivable. A format of the device identification information may be any format as long as the device can be uniquely identified in the access authorizing apparatus  or the access approving apparatus .","The approval information (first approval information) is information that is issued to the application  by the access approving apparatus , and is information indicating that the application  has been approved by the access approver (for example, an owner of the device , a device manufacturer that has developed the device , or the like) for the access to the resource in the device . The approval information includes at least an access enable\/disable verification code indicating that the approval has been obtained, and can further include confidential information for proving validity of this access enable\/disable verification code, and class information, attribute information, or range information on the resource in the approved device . A specific configuration example of the approval information is shown in .","The access enable\/disable information returned by the access approving apparatus  is a logical value representing whether or not the above described approval information is correct, that is, whether or not the access has been approved.","The second transmitting\/receiving unit  performs data communication with the user authenticating apparatus . The second transmitting\/receiving unit  transmits the user identification information to the user authenticating apparatus , and receives user authentication result information. This user authentication result information includes at least a logical value representing whether or not user authentication (that is, authentication of whether or not the application related to the user identification information is valid (has been previously registered)) executed in the user authenticating apparatus  has succeeded. The second transmitting\/receiving unit  communicates with the user authenticating apparatus  via the network . This communication is assumed to be realized, generally, by HTTP communication, which, however, is not limited thereto as described in a description of the first transmitting\/receiving unit .","The token issuance determining unit  determines whether token issuance is enabled or disabled, based on the access enable\/disable information received from the access approving apparatus  by the first transmitting\/receiving unit , and the user authentication result information received from the user authenticating apparatus  by the second transmitting\/receiving unit . If the access enable\/disable information indicates \u201cenabled\u201d and the user authentication result information indicates \u201csuccess\u201d, the token issuance is permitted. Otherwise, the token issuance is not permitted.","The token issuer  acquires the user identification information, the device identification information and the approval information from the application . The token issuer  receives these pieces of information from the application by a receiving unit (not shown). The token issuer  passes these pieces of the acquired information to the above described token issuance determining unit , and requests to determine whether the token issuance is enabled or disabled. When acquiring a determination result indicating that the issuance is \u201cenabled\u201d, from the token issuance determining unit , the token issuer  generates token information including a token, and transmits the token information to the application  from a transmitting unit (not shown). Conversely, if a determination result indicating that the issuance is \u201cdisabled\u201d is acquired, a token issuance error message is generated, and the token issuance error message is transmitted to the application  from the transmitting unit (not shown). The generated token information is registered in the token information storage  to be described later. Communication related to this token issuance, between the application  (the device  in which the application  operates) and the token issuer , is also performed via the network . Generally, it is assumed to be realized by the HTTP communication, which, however, is not limited thereto as described in the description of the first transmitting\/receiving unit . Similarly to the token issuer and the like, the above described receiving unit and transmitting unit (not shown) may be realized by executing the code expanded on the main storage such as the RAM when the CPU executes the program.","Here, the token is an identifier of the token information, and for example, can be realized as a fixed length bit sequence. The token may be in any format as long as \u201caccess to a particular resource by a particular application\u201d can be specified in the access authorizing apparatus .","The token information includes at least the token, and can further include the user identification information, the device identification information, the approval information, user information that is information related to the application , device information that is information related to the device , information on a term of validity of the token, and logical value information indicating whether or not the token is valid. Here, the user information includes various kinds of information on the application (such as an application name, application summary information, date and time of development, a version, and a pointer to developer information), and the developer information (such as a developer name, a developing company name, and contact information), which are registered into the user authenticating apparatus  by the developer of the application  when the above described user identification information is issued. Moreover, the device information can include a product name, a model number, a manufacturing number, resource information to be published, and the like of the device. A specific configuration example of the token information is shown in .","The token information storage  stores the token information generated by the token issuer .","The token information provider  acquires a token acquisition request from the device , and provides corresponding token information from the token information storage  to the device . The token acquisition request may be a request for the token information for a particular token, may be a request for entire token information for a particular device, or may be a request for entire token information for a particular application. Alternatively, it may be a request for all valid token information accumulated in the token information storage , or conversely, it may be a request for all invalid token information. It should be noted that communication related to the token acquisition request is also performed via the network . Generally, it is assumed to be realized by the HTTP communication. In this case, the token information provider  functions as the HTTP server. A communication protocol to be used is not limited to HTTP. The communication protocol is not limited thereto as described in the description of the first transmitting\/receiving unit . Furthermore, if the token has been invalidated or content thereof has been updated, the token information provider  may notify a corresponding device of this change. In this case, the token information provider  may previously establish and maintain a communication channel to the device, and simultaneously with occurrence of the change, may use this communication channel to notify content thereof. This may be realized by using HTTP long polling such as Comet, or may be realized by using the HTTP communication to use WebSocket that constructs a TCP (Transmission Control Protocol) session for two-way communication. In addition, any technique may be used in a framework that realizes a Push-type asynchronous notification from the server side.","The token invalidating unit  acquires an invalidation request for an issued token, and as invalidation of this token, deletes the token information including a corresponding token in the token information storage , or sets the above described logical value information representing \u201cvalid\u201d or \u201cinvalid\u201d that is included in the token information, to be \u201cinvalid\u201d. Furthermore, in order to notify the corresponding device of the invalidation of the token simultaneously with occurrence thereof, the token information is passed to the token information provider , and the notification of the invalidation is requested. It should be noted that the invalidation request may be realized by the communication via the network , or may be realized offline. For example, when the user of the device calls a call center and reports an unauthorized application, it can also be regarded as the invalidation request. Alternatively, it may be a mail-based report. The invalidation of the token may be realized by operating a database system that is an entity of the token information storage , by an operator of the access authorizing apparatus  in response to such an invalidation request.","The approval request permission information issuer  issues approval request permission information required for acquiring the approval information, based on the user authentication result information. This approval request permission information includes an approval request permission ID that can be uniquely identified in the approval request permission information storage  to be described later, and can further include confidential information for authenticating validity of this ID.","The approval request permission information storage  stores the approval request permission information issued by the approval request permission information issuer . This approval request permission information storage  may be realized in a form integrated with the token information storage , as a form of realization.","In response to an authentication request for the approval request permission information from the access approving apparatus , the approval request permission information authenticating unit  performs the authentication based on the information stored in the approval request permission information storage , and returns authentication information. For example, the approval request permission ID, a hash value of confidential information, and information on a used hash function are passed to the approval request permission information authenticating unit  from the access approving apparatus . The approval request permission information authenticating unit  obtains a hash value of confidential information accumulated in the approval request permission information storage , based on the passed information on the hash function, and determines whether or not there is a match. Alternatively, instead of the hash values, a message and a signature attached by using this confidential information may be used to perform the authentication.","Next, operations of the access authorizing apparatus  according to the present embodiment will be described using , , , ,  and .  shows the approval information issued by the access approving apparatus  in the present embodiment.  shows the token information acquired for accessing the resource in the device  by the application , which is stored by the token information storage  in the present embodiment.",{"@attributes":{"id":"p-0057","num":"0056"},"figref":["FIG. 7","FIG. 8","FIG. 9","FIG. 10"],"b":"101"},"It should be noted that, in the present embodiment, the device  is the digital television, and the resource that is an access target is recorded program information accumulated in the television. Moreover, the application  is a recording navigation application that uses this recorded program information to browse and operate a recording list.","Hereinafter, first, a process procedure from the issuance of the user identification information and the token issuance, to the resource access based on the issued token will be described based on a sequence diagram of .","First, as a premise, the user registers the user himself as the access approver for the device  (the digital television), into the access approving apparatus  (step S). It is conceivable to perform this step in a stepwise manner by registering the user as the access approver (in this case, also registering the user ID, a password and the like), and subsequently registering the information on the user's own device as appropriate, or the like. Specifically, it may be realized by preparing a Web page for performing the registration of the access approver and the registration of the device owned by the access approver, by the access approving apparatus . Alternatively, each registration may be realized by presetting a URI (Uniform Resource Identifier) of the access approving apparatus  into the device  so that when the device  is connected to the network , this device information is automatically registered and the device and the user (the access approver) are bound to each other by using a PIN code, a two-dimensional barcode or the like. In either case, in the present embodiment, since the access approving apparatus  is the external apparatus, this embodiment is not questioned.","Next, the user authenticating apparatus  issues the user identification information to the application  (the recording navigation application) (step S). For this step, as described above, a form of realization is conceivable in which the developer of the application  has performed presetting within the application before a recording application is published\/distributed. However, also in this step, since the user authenticating apparatus  is the external apparatus, the embodiment is not questioned. Subsequently, the application  is published\/distributed and downloaded onto the device  (step S).","Here, the user performs an application operation involving the resource access (step S). In the present embodiment, since the application  is the recording navigation application, the access to the resource (the recorded program list) can occur in a startup phase. When the resource access occurs (specifically, when a recorded program list acquiring API (Application Programming Interface) published to the application by the device  is called), the application  transmits an access approval request to the access authorizing apparatus  (step S). At this time, since redirection to the access approving apparatus  is performed in steps S and S in a latter part, in order to display a screen of the application  again, a callback URI is designated for this access approval request. Furthermore, as information required for the access approval, the user identification information and the device identification information are included as parameters. It should be noted that, in the present embodiment, this step is realized by an HTTP GET request.","Subsequently, the access authorizing apparatus  receives the access approval request, and redirects the request to the access approving apparatus  (steps S and S). In the present embodiment, it is realized by designating a URI of an approval screen of the access approving apparatus , in a Refer header in an HTTP GET response. At this time, the user identification information, the device identification information and the callback URI, which have been designated in step S, are included as query parameters into a URL of a redirection destination.","Here, according to the redirection, an object operated by the user is switched from the application  on the device  to Web page access through the Web browser that is also on the device . The Web browser requests an access approval screen, with the user identification information, the device identification information and the callback URI, according to the Refer header (step S). The user ID, the password and the like may be included in this request.","The access approving apparatus  returns the access approval screen as a response (step S). At this time, the user identification information and the device identification information are incorporated into the approval screen so that the user can recognize \u201cwhat application attempts to access which resource\u201d. In the present embodiment, \u201cthe recording navigation application requests access to the recorded program list accumulated in the digital television\u201d is displayed.","Subsequently, the user gives a response indicating whether or not the access to the device  by the application  is permitted, to the access approving apparatus  via an interface on a displayed Web page (step S). If the response indicates consent, the access approving apparatus  issues the approval information (see ) including content of the permission, and includes the approval information into the response (step S). At this time, for re-transition from the access approval screen to the screen of the application , the callback URI passed in step S is designated as the redirection destination, in the Refer header. The above described approval information may be set as a query parameter of this callback URI. The access approving apparatus  stores the issued approval information to be associated with a set of the user identification information and the device identification information.","The Web browser is redirected to the screen of the application , according to this Refer header included in an access approval response (step S).","In addition to the approval information set as a query of an accessed URI (the callback URI), the application  includes the user identification information and the device identification information into a token issuance request, and transmits the token issuance request to the access authorizing apparatus  (step S).","When the access authorizing apparatus  receives the token issuance request, the token issuer  passes the approval information, the user identification information and the device identification information that have been received, to the token issuance determining unit . The token issuance determining unit  transmits the user identification information to the user authenticating apparatus  (step S), and receives the user authentication result information (step S), via the second transmitting\/receiving unit . When the received user identification information has already been registered therein, the user authenticating apparatus  returns \u201cauthentication has succeeded\u201d, and otherwise, returns \u201cauthentication has failed\u201d. Moreover, the token issuance determining unit  transmits the approval information, the user identification information, and the device identification information to the access approving apparatus  (step S), and receives the access enable\/disable information (step S), via the first transmitting\/receiving unit . In the access approving apparatus , if there is the approval information stored to be associated with the set of the user identification information and the device identification information, and if its access enable\/disable verification code is identical to that included in the received approval information, it is determined that the access is enabled. Otherwise, it is determined to be disabled. The token issuance determining unit  determines whether the token issuance is enabled or disabled, from the access enable\/disable information and the user authentication result information that have been acquired. In a case of \u201cenabled\u201d and \u201csuccess\u201d, it is determined that the token issuance is \u201cenabled\u201d, and otherwise, it is determined to be \u201cdisabled\u201d, respectively. The token issuance determining unit  passes a result of the determination to the token issuer . Based on this determination result, if the token issuance is \u201cenabled\u201d, the token issuer  generates the token information including the token (step S), and stores the generated token information into the token information storage  (step S). The token issuer  responds to the application , with the token or the token information that has been issued (step S).","A flowchart of the above token issuing process in the access authorizing apparatus  (the token issuance determining unit  and the token issuer ) is shown in .","Lastly, the application  accesses the resource (step S), and displays a result of the resource access, to the user (step S). Here, in S, the application acquires the recorded program list accumulated in the digital television, and presents a result of the acquisition to the user.","Here, a process procedure of the resource access in step S will be described in detail based on a sequence diagram of .","First, the application  calls the recorded program list acquiring API (step S). In the present embodiment, since the application  is the Web application arranged on the local HTTP server within the device , this API may be realized as a plug-in bound to JavaScript that can be called from the Web page, or may be realized as a Web API arranged on the same local HTTP server. This may be an API of a native library in a binary format depending on a form of the application, and a format of the API is not questioned. At this time, the application passes the token (and the confidential information issued along with the token) as an argument of the API.","In response to the API call, the device  transmits a request to acquire the token information corresponding to the token passed as the argument, to the token information provider  on the access authorizing apparatus  (step S). At this time, along with the token, the confidential information issued along with the token, the device identification information, device model type information and the like may be transmitted together. It should be noted that communication between the device  and the token information provider  is desirably encrypted. For example, HTTPS communication using an SSL (Secure Socket Layer) or TLS (Transport Layer Security) protocol may be used, IPSec may be used, or as long as data (the token or the token information) to be transmitted and received does not directly flow on the network , proprietary cryptographic communication may be used.","When receiving the token, the token information provider  authenticates the device  (step S). This may be performed by using the information stored in the token information storage  to verify whether or not the token has been issued for the access to this device. Alternatively, this may be performed by verifying whether or not a model type of this device publishes the resource for which the token is issued. Alternatively, this may be performed by querying the access approving apparatus  whether or not the device has been registered as an access approval target device. The device authentication may be performed by using other information included in the token information, or may be performed by a combination of specific methods listed above.","Next, the token information provider  authenticates the passed token (step S). This may be performed by collation of the confidential information issued along with the token, or may be simply performed depending on whether or not there is corresponding valid token information when the corresponding token information is acquired from the token information storage . This verification of the token may be performed by using other information included in the token information, or may be performed by a combination of the specific methods listed above. The token information provider  acquires the corresponding token information from the token information storage  (steps S and S), and provides the corresponding token information to the device  (step S). If there is no corresponding token, or if the device authentication (step S) and the token authentication (step S) have failed, an error response is provided or blank token information is returned to the device .","When receiving the token information, the device  uses the token passed from the application , and the token information acquired from the token information provider , to determine whether the access is enabled or disabled (step S). The above described token authentication in step S may be performed here (that is, on the device side). For the token information request, if the error response is received or if the blank token information is received, it is determined that the access is \u201cdisabled\u201d. On the other hand, if the token information is included in the response, it is determined whether or not the API (the recorded program list acquiring API) called in step S is included in an accessible resource range included in the token information. If the API is included, the determination of whether the access is enabled or disabled results in \u201cenabled\u201d, and the resource in the device is acquired (step S), and is provided to the application side (step S). If a valid flag or the term of validity is included in the token information, a condition that the valid flag is \u201cvalid\u201d and the term of validity has not elapsed is added as a condition of \u201cenabled\u201d in the determination of whether the access is enabled or disabled. As simpler determination, it may be determined that the access is enabled, when the valid token information is received.","Here, a process procedure for invalidating the token will be described using .","First, an invalidation authority holder for the token issues a token invalidation request to the token invalidating unit  (step S). This invalidation authority holder is assumed, for example, to be the developer who has developed the application , the device manufacturer of the device , the user of the application  and the device , the user authenticating apparatus  or the like. It is conceivable that this invalidation request may be generated by the application developer in order to prevent computer virus infection due to a defect in the application, destruction of the resource in the device, and the like. It is conceivable that, if an unauthorized application has been discovered, this invalidation request may be generated by the device manufacturer or an ordinary user for the purpose of eliminating this application. It is conceivable that this invalidation request may be generated by the user authenticating apparatus  automatically notifying the access authorizing apparatus  that the user identification information issued to the application has expired. Moreover, this may be performed by the token issuance determining unit  requesting the token invalidating unit  to cause the token with this user identification information included in the token information to expire, if the above described response (step S) to the user authentication request in step S of  indicates \u201cauthentication has failed\u201d.","When receiving the invalidation request, the token invalidating unit  requests the token information storage  to invalidate the corresponding token information (step S).","The token information storage  invalidates the corresponding token based on the request, and responds with a processing result (step S). The invalidation is performed, for example, by deleting the token information including this token, or setting the valid flag included in this token information to be \u201cinvalid\u201d. At this time, if the notification of the invalidation of the corresponding token as shown in subsequent steps S and later is executed, the invalidated token information is included into the response.","In this way, the token invalidating unit  realizes the invalidation of the token by transmitting the invalidation request to the token information storage  and receiving the response (S). When invalidating the token, the token invalidating unit  requests the token information provider  to notify the invalidation of the token to the target device  of the corresponding token (step S). At this time, information on the target device of the corresponding token is obtained from the token information included in the response in step S.","In response to the invalidation notification request, the token information provider  notifies that the corresponding token has been invalidated (step S). At this time, as described above, the communication channel has already been established between the device  and the token information provider , and this invalidation notification is realized by using an asynchronous communication technique such as the Comet or the WebSocket.","On the other hand, when receiving the invalidation notification from the token information provider , the device  invalidates the corresponding token information that has been previously received from the token information provider  and cached (step S). The device  responds to the access authorizing apparatus side (the token information provider ), indicating that the corresponding token has been invalidated on the device side (steps S and S).","As described above, according to the present embodiment, according to the access authorizing apparatus, even in a case where a third party (the application  or its developer) cannot directly construct a trust relationship with a resource managing entity (the device , that is, the digital television, and the user who is the owner thereof), authority to access the resource can be transferred to the third party, and also, a manager of the resource managing entity other than the user (for example, the device manufacturer) can prevent unauthorized access to the resource by the third party.","Specifically, an enormous number of the digital televisions as the resource managing entities exist, and can be manufactured and sold even after the application has been sold and distributed. Thus, authorization for access to a particular digital television cannot be previously issued to the application . Even in such a case, firstly, the user performs an approving process without involving the application , in steps S to S of . Thereby, even if the ID or the password of the user is required in the access approving apparatus , the approving process can be performed without leaking it to the application. In other words, the authority can be transferred from the user to the application. Secondly, not only the user but also the authority holder including the device manufacturer invalidates the issued token, and furthermore, invalidation information is transmitted to the device side (steps S to S of ) or acquired by the device side (steps S to S of ). Thereby, unauthorized use of the resource by the application can be prevented.","<Variation of User Authentication>","The token issuing process sequence of the present embodiment is not limited to . Particularly, the user authentication may be performed before the approval is obtained from the user (the access approver).",{"@attributes":{"id":"p-0089","num":"0088"},"figref":"FIG. 15","b":["351","352","353"]},"In the sequence of this variation, the approval from the access approver can be first obtained through the user authentication. Specifically, at a time of the access approval request (steps S and S) in , the user authentication is performed (steps S and S of ). Here, if the user authentication has succeeded, the approval request permission information issuer  issues the approval request permission information to the application (user), and stores it in the approval request permission information storage . Here, the approval request permission information includes the approval request permission ID that can be uniquely identified in the approval request permission information storage , and can further include the confidential information for proving the validity of this ID. The approval request permission information is included in the responses to the application and the user (steps S and S).","When the user requests the access approving apparatus  for the approval screen (step S), the user passes this approval request permission information. The access approving apparatus  transmits the passed approval request permission information to the approval request permission information authenticating unit  on the access authorizing apparatus  (step S). The approval request permission information authenticating unit  collates corresponding approval request permission information stored in the approval request permission information storage , with the received information, to perform the authentication (step S), and returns a result of the authentication (step S). For example, if the approval request permission information including the same ID as an ID included in the received information is stored in the approval request permission information storage , it is regarded as \u201cauthentication has succeeded\u201d, and otherwise, it is regarded as \u201cauthentication has failed\u201d. If the authentication has succeeded, the access approving apparatus  returns the approval screen to the user (step S). Here, the user authentication (steps S and S) in response to the token issuance request in  is not required in the sequence of .","<Variation of Token Issuing Process>","Moreover, the token issuing process sequence described in the present embodiment is not limited to . For example, at a time of the token issuance, if there is no need to perform the authentication of the user (the application), a user authenticating process (steps S and S) may be omitted. Moreover, steps S and S can be omitted by previously presetting a destination of the access approval request on the access approving apparatus , into the application . Moreover, if the application  is a trusted application, the ID or the password of the user may be directly transmitted to the access approving apparatus  via the application, without redirection to an approval page of the access approving apparatus . In this case, it may be configured so that steps S and S are omitted and the processes in steps S to S are directly performed by the application .","<Variation of Resource Access Control>","Moreover, a resource access process sequence described in the present embodiment is not limited to . In , it is configured so that necessary token information is acquired from the token information provider  each time the resource access by the application occurs. However, separately from the resource access sequence, it may be configured so that the token information provider  is periodically accessed to acquire the entire token information for the particular device (the device ), or to acquire the entire token information for the particular application (the application ), or to acquire all the valid token information or all the invalid token information accumulated in the token information storage , and the acquired token is accumulated in the device and is used for the determination of the access. In this case, processes in steps S to S can be omitted. Moreover, as described in the invalidating process, if a unit that performs notification from the access authorizing apparatus  (the token information provider ) to the device  can be used, processes in steps S to S can be similarly omitted by timely notifying a terminal side of the generated token information. When a resource access request is received in step S of , it is judged whether or not the corresponding valid token information exists, and when the corresponding valid token information exists, step S may be performed without performing steps S to S.","<Variation of Network Configuration>","It should be noted that  show variations of a network configuration in the system including the access authorizing apparatus described in the present embodiment. However, here, a case where the sequence of  is not performed is assumed, and the approval request permission information issuer , the approval request permission information storage , and the approval request permission information authenticating unit  are omitted from the access authorizing apparatus of . If the sequence of  is performed, these elements  to  may be provided in the access authorizing apparatus of  or .","In the above described embodiment, for simplicity, it is assumed that all system components are connected to the network  (the Internet). However, in the configurations of , the device  is connected to a network . The network  is a home network configured with, for example, a wired or wireless LAN (Local Area Network). The network  and the network  are connected by a terminating device for a WAN (Wide Area Network), such as a broadband router. Communication between the device  and the access authorizing apparatus  is realized via this terminating device.","Moreover, in , the application is downloaded not onto the device  but onto another device (an operating device ) on the network . In other words, while the device operated by the application is the device  in the configuration of  or , the device operated by the application is the device  in the configuration of . If the application  has any unit through which the access target device  is found and the device identification information (and the device information) thereof is known, the application  and the device  may exist on separate entities on the network. As the above described unit, for example, UPnP (Universal Plug And Play) and DLNA (Digital Living Network Alliance), which realize plug and play including finding a premise device, can be used. As long as a unit through which a peripheral device is found and its resource can be recognized is provided, the unit is not limited to these existing protocols, and another unit including a proprietary protocol may be used.","Next, a second embodiment of the access authorizing apparatus will be described. It should be noted that the second embodiment is common in many parts to the first embodiment, and thus will be described using the same reference numerals, or the description will be omitted.",{"@attributes":{"id":"p-0101","num":"0100"},"figref":["FIG. 2","FIG. 2"],"b":["101","303","307","101"]},"A different point is that all functions included in the access approving apparatus  and the user authenticating apparatus  in the first embodiment are incorporated in the access authorizing apparatus . In other words, functional blocks  to  are newly added. Moreover, the first transmitting\/receiving unit  and the second transmitting\/receiving unit  for the communication with the access approving apparatus  and the user authenticating apparatus  are not included.","A hardware configuration assumed by the access authorizing apparatus  according to the present embodiment is a combination of the access authorizing apparatus , the access approving apparatus , and the user authenticating apparatus  in the first embodiment.","Next, the various functions realized by the CPU of the access authorizing apparatus  executing the various programs stored in the main storage and the auxiliary storage will be described according to . The access authorizing apparatus  has the token issuance determining unit , the token issuer , the token information storage , the token information provider , the token invalidating unit , a user identification information issuer , a user information storage , a user authenticating unit , a user information provider , a user information invalidating unit , a developer information registering unit , a developer information storage , an approver information registering unit , a device information registering unit , an approver information storage , a usage information provider , an approval information issuer , an approval information storage , an approval determining unit , the approval request permission information issuer , the approval request permission information storage , and the approval request permission information authenticating unit .","Subsequently, details of the respective units included in the present invention, which are different from the first embodiment, will be described below.","The user identification information issuer  issues the user identification information to the application (the user). Specifically, the user identification information issuer  is provided as a function on the HTTP server, and when the developer of the application registers the user information (for example, via a Web page for the registration), the user identification information is generated and issued. Simultaneously, the generated user identification information is stored along with the user information, into the user information storage . The user identification information has been issued before the application is published\/distributed, and has been set in the application by the developer. The user identification information issuer  may request not only the user information but also the developer information, as information required for the issuance. It should be noted that the user identification information includes the user ID that can uniquely identify the user, and can further include the confidential information for authenticating the validity of the user ID.","The user information storage  stores the above described user identification information, and the user information associated with the user identification information (that is, application information). The user information also includes identification information, range information, class\/attribute information and the like on the resource to be accessed.","The user authenticating unit  authenticates the user identification information that is inputted, based on the information stored in the user information storage , and returns the user authentication result information. For example, when the user ID, the hash value of the confidential information, and the information on the used hash function are passed to the user authenticating unit , the user authenticating unit  obtains a hash value of confidential information accumulated in the user information storage , based on the passed information on the hash function, and determines whether or not there is a match. Alternatively, instead of the hash values, a message and a signature attached by using this confidential information may be used to perform the authentication. Furthermore, based on the identification information, the range information, the class\/attribute information and the like on the resource to be accessed, which are included in the user information, whether or not there are matches in various kinds of information on the resource that is inputted, may be used for the authentication.","The user information provider  returns the user information corresponding to the user identification information that is inputted. At this time, while the user authentication is desirably involved for a request from outside of the access authorizing apparatus , the user information may be returned in response to a request from within the apparatus, without performing the user authentication.","The user information invalidating unit  acquires the invalidation request for the issued user identification information, and deletes corresponding user identification information in the user information storage , or sets the above described logical value information representing \u201cvalid\u201d or \u201cinvalid\u201d that is included in the user information, to be \u201cinvalid\u201d. It should be noted that, similarly to the token invalidating unit , the invalidation request for the user information may be realized by the communication via the network , or may be realized offline. For example, when the user of the device calls the call center and reports the unauthorized application, it can also be regarded as the invalidation request. Alternatively, it may be the mail-based report. The invalidation of the user information may be realized by operating a database system that is an entity of the user information storage , by the operator of the access authorizing apparatus  in response to such an invalidation request. Furthermore, in order to notify the corresponding device of the invalidation of the user information simultaneously with occurrence thereof, the token invalidating unit  may be notified thereof. In this case, the token invalidating unit  regards notification from the user information invalidating unit , as the invalidation request for the token, and notifies the device thereof via the token information provider .","The developer information registering unit  registers information on the developer of the application as the developer information. Specifically, the developer information registering unit  is provided as a function on the HTTP server, and when the developer of the application registers the information thereon (for example, via a Web page for the registration), a developer ID is generated and issued. Simultaneously, the generated developer ID is stored along with the registered developer information, into the developer information storage . The developer information can be provided along with the user information by the user information provider .","The developer information storage  stores the developer information registered via the developer information registering unit , along with the generated developer ID. In response to a request from the user information provider , the developer information is outputted.","The approver information registering unit  registers information on the access approver that approves the access to the resource of the device, onto the access authorizing apparatus , based on a request from the access approver. Specifically, similarly to the user identification information issuer  and the developer information registering unit  as described above, the approver information registering unit  is provided as a function on the HTTP server, and when the owner of the device registers the approver information (for example, via a Web page for the registration), approver identification information is generated and issued. At this time, the generated approver identification information is stored along with the registered approver information, into the approver information storage . This approver identification information includes an approver ID that can uniquely identify the access approver, and can further include confidential information (such as a password) for authenticating validity of the approver ID. The approver identification information may be issued in a form in which the owner of the device confirms that an existing ID does not exist in the approver information storage , and then approves the approver ID and the password that have been inputted via the above described Web page for the registration.","The device information registering unit  registers the information on the owned device, onto the access authorizing apparatus , based on the request from the access approver. Similarly to the approver information registering unit , the device information registering unit  is provided as a function on the HTTP server. The access approver registers the device information (for example, via a Web page for the registration), and simultaneously, the device information is stored as the information on the device owned by the approver, into the approver information storage . At this time, a process for confirming whether or not the access approver owns this device may be performed. For example, it may be performed by displaying a one-time password, a two-dimensional barcode or the like on a screen of the device, and inputting it from the above described Web page for the registration. Alternatively, it may be performed by embedding the confidential information within the device or separately issuing the confidential information as a document similar to a warranty certificate or the like, in shipment of the device, and inputting this confidential information from the registration page.","The approver information storage  stores the above described approver information, and the device information on the device owned by the approver.","The usage information provider  acquires the user identification information and the device identification information from the access approver, and provides usage information to be presented when the approval is obtained from the access approver. The usage information can include the user information, the developer information, the device information, and information on the resource to which access is requested by the application. The usage information provider  acquires necessary information from the approver information storage  and the user information storage , depending on a configuration of the usage information to be presented, and provides the necessary information to the access approver.","The approval information issuer  acquires a result of the approval by the access approver based on the usage information provided by the usage information provider , and issues the approval information. The approval information includes at least the access enable\/disable verification code indicating that the approval has been obtained, and can further include class information, attribute information or range information on the approved resource. This is different from the information related to the resource, which is included in the usage information. For example, the usage information includes three kinds of APIs (A), (B) and (C) as accessible resources. However, this approval information includes only the API (B) to which access has actually occurred. In other words, this approval information is a subset of the information related to the resource, which is included in the usage information. The approval information issuer  stores this approval information in the approval information storage .","The approval information storage  stores the approval information issued by the approval information issuer . The approval information is stored to be associated with the user identification information and the device identification information.","The approval determining unit  determines whether or not the access to the resource has been approved by the access approver, based on the user identification information, the device identification information and the approval information that are inputted, and content in the approval information storage .","In response to the authentication request for the approval request permission information from the usage information provider , the approval request permission information authenticating unit  performs the authentication based on the information stored in the approval request permission information storage , and returns the authentication information. For example, the approval request permission ID, the hash value of the confidential information, and the information on the used hash function are passed to the approval request permission information authenticating unit  from the usage information provider . The approval request permission information authenticating unit  obtains the hash value of the confidential information accumulated in the approval request permission information storage , based on the passed information on the hash function, and determines whether or not there is a match. When there is a match, the authentication is regarded to have succeeded, and when there is not a match, the authentication is regarded to have failed. It should be noted that, instead of the hash values, the message and the signature attached by using this confidential information may be used to perform the authentication.","Next, the operations of the access authorizing apparatus  according to the present embodiment will be described using , , , ,  and .  shows the approval information in the present embodiment.  shows the token information acquired for accessing the resource in the device  by the application , which is stored by the token information storage  in the present embodiment.",{"@attributes":{"id":"p-0122","num":"0121"},"figref":["FIG. 11","FIG. 12","FIG. 13","FIG. 14"]},"It should be noted that, similarly to the first embodiment, also in the present embodiment, the device  is the digital television, and the resource that is the access target is the recorded program information accumulated in the television. Moreover, the application  is the Web application for recording navigation that uses this recorded program information to browse and operate the recording list.","Hereinafter, first, a process procedure for issuing the user identification information will be described according to a sequence diagram of .","First, the developer of the application  requests the developer information registering unit  to register the developer information (step S). The developer information registering unit  is, for example, a function that accepts registration information via a Web page and is arranged on a Web server. The developer registers various kinds of information such as the developer ID, the password, the developer name and the contact information, via this Web page. If the registered developer ID has not yet been registered on the developer information storage , the developer information registering unit  approves the registered developer ID as the developer ID (step S), and stores the registered developer ID along with the registered developer information, into the developer information storage  (steps S and S). After the registration, the developer information registering unit  responds to the developer, indicating that the registration has been completed, along with the registered developer ID (step S). Here, if the developer ID for which registration has been applied for has already been registered, the developer is prompted to input the developer ID again, and this prompting is repeated until an unregistered developer ID is inputted. In addition to a method of requesting the developer to input an ID that becomes unique as described above, this developer ID registering process (step S) may be configured so that the developer information registering unit  automatically generates a unique ID and notifies the developer side of the unique ID. It should be noted that the above sequence of processes (steps S to S) may be omitted if the registration of the developer is not required.","Next, when developing the application , the developer requests the user identification information issuer  to issue the user identification information required for issuing the token (step S). The user identification information issuer  is a function that accepts registration information via a Web page and is arranged on the Web server. The developer registers the application information such as the application name and the version, and the information on the resource desired to be accessed (the identification information, the class\/attribute information, the range information and the like on the resource), as the user information via this Web page. When confirming that all necessary user information has been registered, the user identification information issuer  generates the user identification information (step S), and registers the user information along with the generated user identification information, into the user information storage  (steps S and S). After the registration, the user identification information issuer  responds to the developer, with the generated user identification information (step S).","According to the above sequence, the user identification information with which the access authorizing apparatus  uniquely identifies and specifies the application is issued to the application.","Subsequently, a process procedure for registering the access approver, and the information on the device that is owned by the approver and becomes the access target, will be described according to a sequence diagram of .","First, the owner (the user) of the device  requests the approver information registering unit  to register the approver information (step S). The approver information registering unit  is, for example, a function that accepts registration information via a Web page and is arranged on the Web server. The approver registers various kinds of information such as the approver ID, the password, an approver name and contact information, via this Web page. If the registered approver ID has not yet been registered on the approver information storage , the approver information registering unit  approves the registered approver ID as the approver ID (step S), and stores the registered approver ID along with the registered approver information, into the approver information storage  (steps S and S). After the registration, the approver information registering unit  responds to the approver, indicating that the registration has been completed, along with the registered approver ID (step S). Similarly to the above described developer ID registering process, this approver ID registering process may be configured so that a unique ID is automatically generated and notified the approver side of the unique ID, instead of prompting the approver himself to input the ID.","Next, after purchasing the device , the approver requests the device information registering unit  to register the device (step S). The device information registering unit  is a function that accepts registration information via a Web page and is arranged on the Web server. The approver registers the product name, the model number, a product number and the like of the device, as the device information via this Web page. In the registration, the device information registering unit  requests the approver to input the approver ID, the password and the like. Here, the device information registering unit  may perform some process for confirming that the approver owns the device (step S). For example, binding between the approver and the device may be realized by presetting a URI of the access authorizing apparatus  into the device  so that, when the device  is connected to the network , this device information is automatically registered, and the PIN code, the two-dimensional barcode or the like is used to bind the device with the user (the access approver). Specifically, the device  establishes communication connection to the URI that has been preset in the device (or manually inputted by the user) and that indicates the device information registering unit  on the access authorizing apparatus . At this time, it may be configured so that a certificate that certifies validity of a client (the device) has been installed in the device, and this information is used to encrypt the communication. As a trigger for the establishment of the connection, the establishment may be performed by being connected to the network , or may be performed by the device  including an interface through which the user performs the registering process, and operating this interface. Here, when the user accesses a device information registration screen, the device information registering unit  generates, for example, a PIN code including a number of several digits, and transmits the PIN code to the device  by using the established communication connection. The device  displays this PIN code on the screen. The user inputs the displayed PIN code into a predetermined form (in which the PIN code is inputted) on the device information registration screen. If the issued PIN code and the PIN code inputted by the user coincide with each other, the device information registering unit  authenticates that the user (that is, the access approver) owns the device . This PIN code may be the two-dimensional barcode, and the PIN code to be transmitted to the device side may be character string image data. Moreover, on the contrary to the above described example, it may be configured so that the PIN code displayed on the device registration screen is inputted to the device , and the inputted PIN code is transmitted via the above described protected communication connection. As described above, various methods of realizing a method of binding the device and the user are conceivable, and the device information registering unit  may be realized by using these various kinds of known realizing means.","As described above, if it can be confirmed that the approver owns the device, the registered device information is stored to be associated with the approver ID, into the approver information storage  (steps S and S). Lastly, the device information registering unit  responds to the approver, indicating the completion of the registration (step S).","According to the above sequence, the device  and the access approver are associated with each other and registered in the access authorizing apparatus  (the approver information storage ).","Subsequently, a token issuing process procedure will be described according to a sequence diagram of .","First, the application  is published\/distributed and downloaded onto the device  (step S). Here, the user performs the application operation involving the resource access (step S). In the present embodiment, the application  is the recording navigation application, and the access to the resource (the recorded program list) can occur in the startup phase. When the resource access occurs (when the recorded program list acquiring API is called), the application  is redirected to a Web page corresponding to the usage information provider  (steps S and S). This may be realized by previously setting a redirection URI in the application , or as described in the first embodiment, it may be configured so that the redirection is performed once the token issuer  is accessed. At this time, the redirection is realized by designating a URI of the approval screen of the usage information provider , in the Refer header in the HTTP GET response. Particularly, here, the user identification information, the device identification information and the callback URI are included as the query parameters into the URI of the redirection destination. The callback URI is included in order to display the screen of the application  again. The user authentication may be previously performed with the usage information provider  by using the approver ID and the password.","Subsequently, the usage information provider  receives the request, and uses the user identification information and the device identification information that are passed as arguments, to acquire the usage information (step S). This provides a response after acquiring the necessary information from the approver information storage  and the user information storage , and configuring the necessary information as the access approval screen as described above, which, however, is omitted from  (step S). At this time, the user identification information and the device identification information are incorporated in the access approval screen, and similarly to the first embodiment, \u201cthe recording navigation application requests access to the recorded program list accumulated in the digital television\u201d is displayed.","Subsequently, the user gives a response indicating whether or not the access to the device  by the application  is permitted, to the approval information issuer  via the interface on the displayed Web page (step S). If the response indicates consent, the approval information issuer  stores the approval information including content of the permission, into the approval information storage  (steps S and S), and includes the approval information into the response (step S). At this time, for the re-transition from the access approval screen to the screen of the application , the callback URI passed in step S is designated as the redirection destination, in the Refer header. The above described approval information may be set as the query parameter of this callback URI.","The Web browser on the device  is redirected to the screen of the application , according to this Refer header included in the access approval response (step S). Subsequently, in addition to the approval information set as the query of the accessed URI (the callback URI), the application  includes the user identification information and the device identification information into the token issuance request, and transmits the token issuance request to the access authorizing apparatus , and the token issuer  acquires the token issuance request (step S).","The token issuer  that has acquired the token issuance request passes the approval information, the user identification information, and the device identification information that have been received from the device , to the token issuance determining unit . The token issuance determining unit  passes the user identification information to the user authenticating unit  (step S), and acquires the user authentication result information (step S). Furthermore, the token issuance determining unit  acquires the approval information associated with the user identification information and the device identification information, from the approval information storage , and performs collation with the approval information passed as the argument to determine whether the access is enabled or disabled (steps S and S). The token issuance determining unit  determines whether the token issuance is enabled or disabled, from the acquired user authentication result information and a result of the determination of whether the access is enabled or disabled, and passes the result of the determination to the token issuer . Based on this determination result, if the token issuance is \u201cenabled\u201d, the token issuer  generates the token information including the token (see ) (step S), stores the generated token information into the token information storage  (step S), and responds to the application , with the token information (step S).","Lastly, the application  accesses the resource (step S), and displays the result of the resource access, to the user (step S). Here, the application  acquires the recorded program list accumulated in the digital television, and presents the result of the acquisition to the user. It should be noted that a process procedure of the resource access in step S is similar to the first embodiment and according to .","Lastly, the process procedure for invalidating the token will be described using .","First, an invalidation authority holder for the user information issues the user information invalidation request to the user information invalidating unit  (step S). This invalidation authority holder is similar to the token invalidation authority holder, and is assumed, for example, to be the developer of the application , the device manufacturer of the device , the user of the application  and the device , or the like. The generation of this invalidation request is also similar to the generation of the token invalidation request as described in the first embodiment. It is possible to show a representative use case where if an unauthorized application has been discovered, this invalidation request is generated by the device manufacturer or an ordinary user for the purpose of eliminating this application.","When receiving the invalidation request, the user information invalidating unit  requests the user information storage  to invalidate the corresponding user information (step S).","The user information storage  executes the invalidation of the corresponding user information (such as the deletion, or update of the valid flag) based on the request (step S), and responds with a processing result (step S). At this time, if the invalidation of the issued token as shown in subsequent steps S and later is executed, the invalidated user identification information is included into the response.","Subsequently, in response to the invalidation of the user information, the user information invalidating unit  requests the token invalidating unit  to invalidate the token issued to a corresponding user (step S). Subsequent processes are similar to the token invalidation sequence in the first embodiment (steps S and S), and the device  may be notified of the invalidation.","As described above, according to the present embodiment, even in the case where the third party (the application  or its developer) cannot directly construct the trust relationship with the resource managing entity (the device , that is, the digital television, and the user who is the owner thereof), the authority to access the resource can be transferred to the third party, and also, the manager of the resource managing entity other than the user (for example, the device manufacturer) can prevent the unauthorized access to the resource by the third party, according to the access authorizing apparatus alone, without using the external apparatuses such as the access approving apparatus and the user authenticating apparatus on the Internet, as in the first embodiment.","Moreover, as the difference from the first embodiment, the tokens related to the user (the application) can be collectively invalidated and the unauthorized use of the resource can be efficiently prevented, by invalidating the user identification information by the authority holder such as the user or the device manufacturer.","<Variation of User Authentication>","Lastly, similarly to the first embodiment, the user authentication may be performed before the approval is obtained from the user (the access approver). In this case, the user authentication in steps S and S is performed at a time point in step S in the token issuing process sequence of . For this purpose, similarly to the first embodiment, the approval request permission information issuer , the storage  and the authenticating unit  are required. The approval request permission information that proves that the user authentication has already been performed is passed to the usage information provider , and checked before the access approval."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0008","num":"0007"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 5","b":"1"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 6","b":"2"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 7","b":"1"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 15","b":"2"}]},"DETDESC":[{},{}]}
