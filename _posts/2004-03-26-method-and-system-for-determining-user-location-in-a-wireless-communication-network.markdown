---
title: Method and system for determining user location in a wireless communication network
abstract: In a wireless communication network, the location of an addressable receiver relative to the locations of a plurality of addressable sources of electromagnetic radiation is found using probabilistic models of the signal strength measured at the addressable receiver. The inventive method provides location determination on a finer spatial scale than was heretofore available. A region of interest is calibrated via a discrete-space radio map storing probability distributions of received signal strength at the measurement locations. The stored probability distributions are compensated for temporal variability and biases, such as through temporal correlations of the sampled received signal strength. A measurement of the signal strength at the addressable receiver from each of the plurality of addressable sources is used in conjunction with the discrete-space radio map to identify one of the coordinates thereof that maximizes the conditional probability P(xls), where x is the radio map location and s is a vector of measured signal strengths.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07406116&OS=07406116&RS=07406116
owner: University of Maryland
number: 07406116
owner_city: College Park
owner_country: US
publication_date: 20040326
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS"],"p":["1. Field of the Invention","The invention described herein is related to user location determination via the reception of electromagnetic signals. More specifically, the invention is related to determining the location of an addressable receiver in a wireless communication network, such as an IEEE 802.11 compliant wireless local area network.","2. Description of the Prior Art","Recent trends in wireless communication, computer networking, and information dispersal have given rise to the field of ubiquitous or pervasive computing. Ubiquitous computing allows the use of a plurality of computing devices positioned throughout a physical environment, but the access to a particular computer is essentially invisible to the user. Ideally, a person would continually interact with hundreds of nearby wirelessly interconnected computers. A user would be able to access the computer network, or rather the computer network could access the user, via a small computing device somewhere on the user's person. It has been envisioned that such a computing device may be incorporated into everyday items, even pieces of clothing.","As ubiquitous computing gains popularity, the need for context-aware applications is steadily increasing. One of the most important pieces of contextual information is the location of the user, with which the network can provide location-specific information and services.","Many systems over the years have tackled the problem of determining and tracking user position. One of the most popular, the global positioning satellite (GPS) system, is very useful in outdoor situations. However, the line-of-sight to GPS satellites is unavailable inside buildings and hence the GPS system cannot be used indoors.","Locating users in a wide-area cellular-based network has been motivated in recent years by the Federal Communication Commissions 94-102 Order, mandating the automatic location of 911 callers on a cellular phone. The two most widely known location technologies used in the wide-area cellular-based systems are time difference of arrival (TDOA) and angle of arrival (AOA). TDOA systems make use of the principle that an emitter location can be estimated by the intersection of hyperbolae of constant differential times-of-arrival of the signals at two or more pairs of base stations. AOA systems use simple triangulation based on an estimated angle of arrival of a signal at two or more base stations so as to estimate the location of a desired transmitter. While these systems are promising in outdoor environments, their effectiveness in indoor environments is limited by the multiple reflections suffered by the electromagnetic radiation, which leads to an inaccurate estimate of the time of arrival or angle of arrival.","Many infrared (IR) based systems have been proposed and are presently in use. In the Active Badge Location System, a badge worn by a person emits a unique IR signal which it relays to fixed IR receivers. The received signal is processed by a location manager software package to determine the location of the badge. However, if the walls of a room block the IR signal, the user cannot be accurately located within the blocked area. IR based location techniques also suffer from limited range, poor performance in the presence of direct sunlight, and significant installation and maintenance costs.","Magnetic tracking has been used to support virtual reality and motion capture for computer animation. These tracking systems generate axial DC magnetic field pulses from a transmitting antenna in a fixed location. The system computes the position and orientation of the receiving antennas by measuring the response in three axes orthogonal to the transmitter pulse. Such systems suffer from steep implementation costs and the requirement of tethering the tracked object to a control unit. Moreover, the sensors must remain within 1-3 meters of the transmitter and positional accuracy degrades with the presence of metallic objects in the environment.","Several RF-based location determination techniques have become the subject of recent research. The Active Bat system is based on combining RF and ultrasonic technologies. A short pulse of ultrasonic energy is emitted from a transmitter (the Bat) attached to the object to be located in response to an RF request from a local controller. The local controller sends, at the same time as the request packet, a synchronized reset signal to ceiling sensors using a wired serial network. The system measures the times-of-flight of the ultrasonic pulse to the mounted receivers on the ceiling, using the speed of sound in air to calculate the distances from the Bat to each receiver. The local controller forwards these distances to a central controller that performs the location determination computation. The lack of scalability, difficulty in deployment, and high equipment costs are disadvantages to this approach.","The Cricket location support system also uses a combination of RF and ultrasound technologies to provide a location-support service to users and applications. Wall- and ceiling-mounted beacons are spread throughout a building, and information is transmitted on an RF signal operating at 418 MHz. With each RF transmission, an ultrasonic pulse is transmitted concurrently therewith. Listening devices await the RF signal and, upon receipt of the first few bits, listen for the corresponding ultrasonic pulse. When the ultrasonic pulse arrives, the listeners run maximum-likelihood estimators to correlate RF and ultrasound samples to obtain a distance estimate. Once again, the requirement of specialized hardware and poor scalability of this system prevent the widespread use of this application.","In the last few years, many techniques have been proposed to provide user location services in an RF-based system that does not require additional hardware. The RADAR system uses an RF signal strength as an indication of the distance between the transmitter and receiver. During an offline phase, the system builds a radio map for the RF signal strength from a fixed number of receivers. During normal operation, the RF signal strength of the transmitter is measured by a set of fixed receivers and is sent to a central controller. The central controller uses a K-nearest approach to determine the location from the radio map that best fits the collected signal strength information.","The TMI system is based on triangulation, mapping, and interpolation (TMI). In the TMI technique, the physical position of all the access points in the area must be known and a function to map signal strength into distances is required. The system generates a set of training points at each trained position. The interpolation of the training data allows the algorithm to use less training data. During user location determination, the system uses the approximate function derived from the training data to generate contours and the calculated intersections between different contours yields the signal space position of the user. The nearest set of mappings from the signal space to the physical space is found by applying a weighted average, based on proximity, to the signal position.","The Nibble location system from UCLA uses a Bayesian network to infer a user location. The Bayesian network model includes nodes for location, noise, and access points (sensors). The signal-to-noise ratio (SNR) observed from an access point at a given location is taken as an indication of that location. The system also quantizes the SNR into four levels: high, medium, low, and none. However, the Nibble location system stores the joint distribution between all of the random variables of this system, which increases the amount of computation necessary and degrades system scalability.","It is apparent from the foregoing discussions of the prior art that there exists a need for a user location determination method that can be implemented without the need for additional hardware and utilizes techniques to improve spatial resolution, while at the same time, reducing the computational cost. Reducing the number of computations ultimately reduces the amount of energy required to determine a location. This is of interest in that many of the components of a ubiquitous computing system are battery-powered.","To overcome the shortcomings of the prior art and to provide user location determination with greater accuracy, the present invention provides a method for locating a computing device adapted to a wireless communication network relative to locations of a plurality of access points within the network. The method of the present invention is carried out by first establishing a plurality of discrete-space radio maps having coordinates corresponding to locations in space at which a calibration signal strength is measured. The coordinates of each of the discrete-space radio maps have a probability distribution of calibration signal strength from a corresponding one of the access points stored thereat. Once the discrete-space radio maps have been established, the received signal strength between each access point and the computing device is measured. The received signal strength measurement is compensated for temporal variations and biases of the signal strength measurement. The location of the computing device is identified by one of the coordinates of the discrete-space radio maps which maximizes the probability that the identified coordinate corresponds to a location in space at which the compensated signal strength measurement would be measured. The discrete-space radio maps may be interpolated to provide a more accurate determination of the user location. Clustering of addressable sources is used to reduce the number of computations required to determine the location of the user.","Referring to , system components of the present invention, designated \u201cHorus\u201d by the inventors thereof, are shown as implemented in a wireless communication network specified by the IEEE Standard 802.11. The 802.11 wireless network has all of the elements to implement the invention and is used herein to exemplify the invention without limiting the scope thereof. A wireless local area network (WLAN) implemented in accordance with IEEE 802.11 Standard, generally indicated at , consists of a plurality of access points - and a computing device . Although WLAN  is shown in  with only five access points and one computing device, a typical implementation includes many more of both access points and computing devices. Briefly stated, the present invention acquires an indication of the signal strength of a set of access points  and, via a previously constructed radio map, as will be fully described below, locates the receiving computing device  as being at a location x=(x, y , z) at which the conditional probability P(x|s), where s is a vector containing the received signal strength indications.","As will be described in paragraphs that follow, a radio map is formed from measurements of received signal strength at discrete locations in space and is stored in radio map database . In similar systems of the prior art, the locations of the radio map coordinates define the finest possible resolution of the location determination method. Moreover, wireless network interface cards (NIC) provide received signal strength indications (RSSI) as integer values. This further places a limit on the spatial resolution in that the received signal strength is not a continuous function of space, but one containing a larger number of discontinuities. The present invention, using probabilistic techniques, overcomes the discrete nature of the radio map to provide a level of accuracy in location determination heretofore unavailable through similar systems of the prior art.","Prior to discussing the Horus system components and the associated method of the present invention, the mathematical model forming the basis of the present invention will be developed. We begin by letting X be a two- or three-dimensional physical space which is covered by k access points. At each location x\u03b5X, we can acquire the signal strength from k access points. We denote the k-dimensional signal strength space as S. Each element in this space is a k-dimensional vector whose components represent the measured signal strength from a corresponding access point. As previously mentioned, the signal strength returned from wireless NICs are typically integer values, thus the signal strength space S is a discrete space. Sampling from the signal strength space S at location x at time t, denoted by s(x,t), can be viewed as a vector stochastic process. We can assume that this process is stationary, therefore, the time index can be dropped. We further assume that the samples from different access points are independent. As previously noted, the problem then becomes, given a signal strength vector s=(s, . . . s), we wish to find the location x\u03b5X that maximizes P(x|s).","The location determination algorithm of the present invention is typically carried out in two phases: an offline calibration or training phase and an on-line location determination phase. For the immediate discussion, we will assume a discrete X space. In later paragraphs, a continuous-space model will be described which, as previously mentioned, overcomes the limited spatial resolution of the discrete X space assumption.","Prior to attempting to determine a location via the method of the present invention. the receiving device  is taken offline (in terms of the subject method. but not necessarily removed from the WLAN for the purposes of executing other applications) for the calibration phase. At each location x in the set of radio map locations X, a model for the joint probability distribution of the access points at the location x is stored. In one embodiment of the present invention. the Horus system estimates the joint probability distribution as the product of the marginal probability distributions of the individual access points (access points running on different channels are independent) as:\n\n()=() . . . ()\u2003\u2003(1)\n","For a given location, P(AP=s) can be estimated using the normalized histogram of the received signal strength of the access point APat the given location. Such a histogram is shown in . The histogram illustrates that the measured signal strength at a fixed position varies over time and the variations can be as large as 10 dBm. This time variation of the access point channel can be attributed to changes in the physical environment such as by personnel movement. Thus, depending on a single sample for estimating the user location may lead to inaccurate results if, for example, the sample is located at a tail of the distribution.","Once the radio map has been established, the system can be used in its normal operating mode, i.e., in on-line location determination. As previously discussed, it is desired to find the location x\u03b5X, given a signal strength vector s=(s, . . . s), that maximizes the probability P(x|s). That is to say, it is an object of the invention to find,\n\nargmax()]\u2003\u2003(2)\n\nUsing Baye's theorem, this can be rewritten as:\n",{"@attributes":{"id":"p-0036","num":"0035"},"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"msub":{"mi":["argmax","x"]},"mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mi":"P","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["x","s"],"mo":"\u2758"}}}}},{"msub":{"mi":["argmax","x"]},"mo":"\u2061","mrow":{"mo":["[","]"],"mfrac":{"mrow":[{"mrow":[{"mi":"P","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["s","x"],"mo":"\/"}}},{"mi":"P","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"x"}}],"mo":"\u00b7"},{"mi":"P","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}}]}}}],"mo":"="}},{"mrow":{"mo":["(",")"],"mn":"3"}}]}}}},"br":[{},{}],"in-line-formulae":[{},{}],"sub":["x","x"],"i":["[P","x|s","[P","s|x","P","x"]},"P(x) can be determined from a user profile (as discussed below) based on the fact that if the user is at a given location, it is more probable that he will be at an adjacent location in the future. If the user profile information is not known, or not used, then we can assume that all the locations are equally likely and the term P(x) can be factored out from the maximization process. Equation 4 becomes:\n\nargmax()]=argmax()]\u2003\u2003(5)\n","The remaining term is then calculated by using:",{"@attributes":{"id":"p-0039","num":"0038"},"maths":{"@attributes":{"id":"MATH-US-00002","num":"00002"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"mi":"P","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["s","x"],"mo":"\u2758"}}},{"munderover":{"mo":"\u220f","mrow":{"mi":"i","mo":"=","mn":"1"},"mi":"k"},"mo":"\u2062","mrow":{"mi":"P","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"msub":{"mi":["s","i"]},"mo":"\u2758","mi":"x"}}}}],"mo":"="}},{"mrow":{"mo":["(",")"],"mn":"6"}}]}}}}},"P(s|x) is estimated from the signal strength distributions stored in the radio map.","The implications of Eq. (6) are conceptually illustrated in . As shown in the Figure, radio map  is constructed from a plurality of sub-radio maps, or radio map planes -. Each radio map -is established during the offline training phase, each corresponding to the measured signal strengths from a respective access point. On each radio map -, the probability distribution of signal strength from a corresponding access point is stored at each location x.","As shown in , having determined s=(s, . . . ,s) at the receiving device , a location x is identified at which the product of the marginal joint probabilities P(s|x) is maximum.","As previously stated, a probability distribution of signal strengths is stored at each coordinate of the radio map corresponding to a respective access point. The probability distribution, in one embodiment of the present invention may be a histogram. However, the signal strength histograms may not be smooth. Since the sampling process used to estimate the signal strength distributions is limited in time, the resulting histograms may be missing some values. This may cause some error in the location determination phase if sample values are missing from a signal strength measurement. The Horus system solves this problem by approximating the discrete random variable of the histogram by a continuous random variable, e.g., a Gaussian random variable. The PDF of the Gaussian distribution is given by:",{"@attributes":{"id":"p-0044","num":"0043"},"maths":{"@attributes":{"id":"MATH-US-00003","num":"00003"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"mi":"pdf","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}},{"mfrac":{"mn":"1","mrow":{"mi":"\u03c3","mo":"\u2062","msqrt":{"mrow":{"mn":"2","mo":"\u2062","mi":"\u03c0"}}}},"mo":"\u2062","msup":{"mi":"\u2147","mrow":{"mrow":{"mrow":{"mrow":{"mo":"-","mrow":{"mo":["(",")"],"mrow":{"mi":["s","\u03bc"],"mo":"-"}}},"mo":"\/","mn":"2"},"mo":"\u2062","msup":{"mi":"\u03c3","mn":"2"}},"mo":")"}}}],"mo":"="}},{"mrow":{"mo":["(",")"],"mn":"7"}}]}}}},"br":{}},{"@attributes":{"id":"p-0045","num":"0044"},"maths":{"@attributes":{"id":"MATH-US-00004","num":"00004"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"mi":"P","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["s","x"],"mo":"\u2758"}}},{"msubsup":{"mo":"\u222b","mrow":[{"mi":"s","mo":"-","mn":"0.5"},{"mi":"s","mo":"+","mn":"0.5"}]},"mo":"\u2062","mrow":{"mrow":[{"mi":"pdf","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"y"}},{"mo":"\u2146","mi":"y"}],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.2em","height":"0.2ex"}}}}}],"mo":"="}},{"mrow":{"mo":["(",")"],"mn":"8"}}]}}}}},"The RSSI returned from the wireless NIC is quantized to integer values and the above integration can be obtained by numerical integration. Although the integration involves complex calculations (exponentiation and square root), lookup tables for the standard normal distribution may be used to obviate the calculations.","Returning now to , the components of the system through which the method of the present invention may be executed will now be described. Signals from a set  of access points are received at the receiving device  via a wireless network interface card . Wireless card  is in communication with device driver  which serves as the interface between the physical network layer and the data link layer of the WLAN protocol. Device driver , in turn, communicates medium access control (MAC) signals and the measured signal strength to the signal strength acquisition application programming interface (API) . The signal strength acquisition API  serves as the interface to the Horus system  where, as will be discussed below, the measured signal strengths from the set of access points  are processed and used to determine the most probable location of the receiving device . The most probable location is communicated to applications  from the Horus system  through the location APT .","Indications of the measured signal strength are supplied from the signal strength acquisition API  to radio map builder , correlation handler , and clustering module . Radio map builder  is responsible for building the discrete-space radio map and storing it for use during the location determination phase. Correlation modeler , which operates in conjunction with radio map builder , is used to collect statistics of the received signal strength during the offline training phase so as to compensate the measured signal for temporal correlation. The radio map is stored in a radio map database .","Clustering module  is used to group radio map locations according to the access points accessible at the respective location. Clustering is used by the present invention to reduce the computational requirements of the system and, hence, conserve power. The clusters of access points are stored in clustering database . Exemplary methods for clustering will be discussed in paragraphs that follow.","During the on-line location determination phase, indications of signal strength are transferred from the signal strength acquisition API  to correlation handler . Correlation handler , in cooperation with correlation modeler , is responsible for reducing temporal signal correlation. Correlation reduction is an advantageous feature of the present invention and will be discussed in detail in paragraphs that follow.","The correlation reduced signal strength measurement from each access point , ,  from set  is communicated to discrete-space estimator , which estimates the user location based on the discrete-space radio map as outlined above. The output of discrete-space estimator  is a radio map location which maximizes P(x|s). The location x is conveyed to small-scale compensator  which handles the small-scale variation characteristics of the wireless channels of access points , , . As will be shown in paragraphs that follow, the small-scale compensator  runs a perturbation technique on the location x to improve the location estimate. Small-scale compensator may require interaction with discrete-space estimator  to verify and\/or improve in the determination of radio map location x.","The small-scale compensated location is communicated to continuous-space estimator  which refines the estimate of the location by calculating a continuous-space location estimate. The continuous-space estimate is achieved via an interpolation function of the probability distributions held in the coordinates of discrete-space radio map. The details of the continuous-space location estimate approach are discussed in later paragraphs.","The continuous-space estimate of the location of receiving device  is supplied to the location API  where it can be retrieved by applications . Applications  may include executable programs or other context aware systems that require the location of the receiving device .","Whereas the components of the Horus system  are shown in  as being contained within the receiving device , other possible configurations are within the scope of the present invention. For example, one or both of radio map database  and clustering database , and some or all of the modules associated therewith (i.e., correlation modeler , radio map builder  associated with radio map database  and clustering module  associated with clustering database ), may be located on a server accessible to users of WLAN . The use of servers in a communication network to provide data and services to computing devices having access thereto is well known and the specific implementations thereof do not form a part of the present invention.","As implemented by an IEEE 802.11 WLAN, access points - comprise an addressable source of electromagnetic radiation and receiving device , via wireless NIC , realizes an addressable receiver of the electromagnetic radiation. To make a measurement of signal strength from a particular access point, addressable receiver  forms a probe packet containing its address and the address of the access point from which the measurement is to be made. The access point receives the packet, responds with its address and the address of the addressable receiver . The measurement RSSI (received signal strength indication) is determined at the physical layer and transferred to the medium access control layer as an integer value. Thus, addressable receiver  can probe any of the access points within its range to determine the signal strength thereof. The probing technique is used during both the offline calibration phase and on-line location determination phase.","In similar fashion, the method of the present invention may be executed such that wireless interface card  acts as an addressable source and access points - embody addressable receivers. In such a configuration, the addressable source  would send a packet respectively addressed to each of the addressable receivers -. Each addressable receiver - would make the respective signal strength measurement, process the measurements in accordance with aspects of the present invention and store the processed measurements (e.g., the probability distribution of signal strength at each addressable receiver) in a radio map of radio map database . The radio map database  could be located at a central location, such as a server as previously described, and could thus be shared by multiple computing devices operating in the region of interest.","Referring now to , there is shown a flow diagram illustrating the method steps for building radio map . In this exemplary embodiment, the computing device  acts as the addressable receiver and the access points - act as addressable sources. The radio map building process is entered at block  where control is transferred to block  in which a user moves to a first measurement point. Identifying measurement points is typically done prior to the actual measurement stage. The spacing of measurement points is less critical when implementing the present invention for location determination over similar systems of the prior art due to the probabilistic methods thereof Measurement grid spacing is also a function of the number of access points operating within the region of interest. An exemplary layout of a 20,000 square feet area covered by 12 access points might be sampled at a grid spacing of 5 feet where, on average, each measurement location is covered by 4 access points.","At the first measurement point, the addressable receiver polls the first addressable source, i.e., access point, in accordance with the previously described polling method, as shown in block . In block , the signal is measured from the polled addressable source and the measurement is stored for the current measurement point and for the current access point as shown in block . The process then determines whether the signal has been measured from all addressable sources as illustrated by decision block . If an access point remains from which a measurement has not yet been taken, control is transferred to block , whereby the next addressable source is polled and a signal measured therefrom. If, however, it is determined that all of the applicable address sources have been measured, the process determines if all measurement points in the measurement grid have been measured as demonstrated by decision block . If there are further measurement points at which signal strength measurements are to be taken, control is transferred to block , whereby the user moves to the next measurement point and the applicable addressable sources from that point are polled and the signal strength measured.","Once all measurement points in the measurement grid have been measured, the process continues at block  where the measurement point data for each addressable source is collected in preparation for radio map construction. In block , the statistics of the measurement point data for each addressable source are determined and a time series analysis, as will be discussed in paragraphs that follow, is performed at block . At block , the probability distribution of signal strength is compensated for temporal variations and to reduce temporal correlation by a technique described below. Blocks  and  are typically performed by correlation modeler . The compensated probability distribution at each measurement point for each addressable source is stored in the discrete radio map . The process exits at block .","In certain embodiments of the present invention, the discrete radio map is interpolated between measurement points to produce a continuous-space location estimate. To illustrate a continuous-space location estimation technique in accordance with the present invention, the signal strength distributions of the radio map are modeled using the Gaussian approximation described above. To find the Gaussian distribution for any arbitrary point not in the discrete-space radio map, the mean and variance of the distribution at that point is required. Empirical studies have shown that the variance of the distributions are approximately constant across different locations. Hence, only the mean value need to be interpolated. It is the objective of continuous-space estimator  to find the location x\u03b5X, given a signal strength vector s, that maximizes P(s|x), where X is a continuous two (or three) dimensional space.","For one access point, the signal strength vector s reduces to a scalar value. It is assumed that the average signal strength (\u03bc) is represented as a function of x (that is, the interpolation function is \u03bc=f(x)).","In this case, P(s|x) becomes:\n\n()=(0.5)\u2212(0.5)\u2003\u2003(9)\n\nWhere\n",{"@attributes":{"id":"p-0063","num":"0062"},"maths":{"@attributes":{"id":"MATH-US-00005","num":"00005"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"msub":{"mi":["CDF","z"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}},{"mfrac":{"mn":["1","2"]},"mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mn":"1","mo":"+","mrow":{"mi":"erf","mo":"\u2061","mrow":{"mo":["(",")"],"mfrac":{"mrow":[{"mi":"s","mo":"-","mrow":{"mi":"f","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"x"}}},{"mi":"\u03c3","mo":"\u2062","msqrt":{"mn":"2"}}]}}}}}}],"mo":"="}},{"mrow":{"mo":["(",")"],"mn":"10"}}]}}}},"br":{}},{"@attributes":{"id":"p-0064","num":"0063"},"maths":{"@attributes":{"id":"MATH-US-00006","num":"00006"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mtable":{"mtr":[{"mtd":{"mrow":{"mrow":[{"mi":"P","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["s","x"],"mo":"\u2758"}}},{"mfrac":{"mn":["1","2"]},"mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mrow":[{"mi":"erf","mo":"\u2061","mrow":{"mo":["(",")"],"mfrac":{"mrow":[{"mi":"s","mo":["+","-"],"mn":"0.5","mrow":{"mi":"f","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"x"}}},{"mi":"\u03c3","mo":"\u2062","msqrt":{"mn":"2"}}]}}},{"mi":"erf","mo":"\u2061","mrow":{"mo":["(",")"],"mfrac":{"mrow":[{"mi":"s","mo":["-","-"],"mn":"0.5","mrow":{"mi":"f","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"x"}}},{"mi":"\u03c3","mo":"\u2062","msqrt":{"mn":"2"}}]}}}],"mo":"-"}}}],"mo":["=","\u2062"],"mi":{}}}},{"mtd":{"mrow":{"mo":["=","\u2062"],"mi":{},"mrow":{"mfrac":{"mn":"1","msqrt":{"mi":"\u03c0"}},"mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mrow":[{"msubsup":{"mo":"\u222b","mn":"0","mfrac":{"mrow":[{"mi":"s","mo":["+","-"],"mn":"0.5","mrow":{"mi":"f","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"x"}}},{"mi":"\u03c3","mo":"\u2062","msqrt":{"mn":"2"}}]}},"mo":"\u2062","mrow":{"msup":{"mi":"\u2147","mrow":{"mo":"-","msup":{"mi":"t","mn":"2"}}},"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.2em","height":"0.2ex"}}},"mrow":{"mo":"\u2146","mi":"t"}}},{"msubsup":{"mo":"\u222b","mn":"0","mfrac":{"mrow":[{"mi":"s","mo":["-","-"],"mn":"0.5","mrow":{"mi":"f","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"x"}}},{"mi":"\u03c3","mo":"\u2062","msqrt":{"mn":"2"}}]}},"mo":"\u2062","mrow":{"msup":{"mi":"\u2147","mrow":{"mo":"-","msup":{"mi":"t","mn":"2"}}},"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.2em","height":"0.2ex"}}},"mrow":{"mo":"\u2146","mi":"t"}}}],"mo":"-"}}}}}}]}},{"mrow":{"mo":["(",")"],"mn":"11"}}]}}}},"br":{}},{"@attributes":{"id":"p-0065","num":"0064"},"maths":{"@attributes":{"id":"MATH-US-00007","num":"00007"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mfrac":{"mrow":[{"mi":"\u03b4","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mrow":{"mi":"P","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["s","x"],"mo":"\/"}}}},{"mi":["\u03b4","x"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}]},"mo":"=","mn":"0."}}},"br":{}},{"@attributes":{"id":"p-0066","num":"0065"},"maths":{"@attributes":{"id":"MATH-US-00008","num":"00008"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mfrac":{"mrow":[{"mi":"\u03b4","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mrow":{"mi":"P","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["s","x"],"mo":"\/"}}}},{"mi":["\u03b4","x"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}]},"mo":"=","mrow":{"mfrac":{"mn":"1","mrow":{"mi":"\u03c3","mo":"\u2062","msqrt":{"mrow":{"mn":"2","mo":"\u2062","mi":"\u03c0"}}}},"mo":"\u2062","mrow":{"mrow":[{"msup":{"mi":["f","\u2032"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"x"}},{"mo":["[","]"],"mrow":{"msup":[{"mi":"\u2147","mrow":{"mo":"-","msup":{"mrow":{"mo":["(",")"],"mfrac":{"mrow":[{"mi":"s","mo":["+","-"],"mn":"0.5","mrow":{"mi":"f","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"x"}}},{"mi":"\u03c3","mo":"\u2062","msqrt":{"mn":"2"}}]}},"mn":"2"}}},{"mi":"\u2147","mrow":{"mrow":{"mo":["(",")"],"mfrac":{"mrow":[{"mi":"s","mo":["-","-"],"mn":"0.5","mrow":{"mi":"f","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"x"}}},{"mi":"\u03c3","mo":"\u2062","msqrt":{"mn":"2"}}]}},"mo":"\u2062","mn":"2"}}],"mo":"-"}}],"mo":"\u2061"}}}},{"mrow":{"mo":["(",")"],"mn":"12"}}]}}}},"br":{}},{"@attributes":{"id":"p-0067","num":"0066"},"maths":{"@attributes":{"id":"MATH-US-00009","num":"00009"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mtable":{"mtr":[{"mtd":{"mrow":{"mrow":[{"mi":"\u2147","mo":["\u2062","\u2062"],"msup":{"mo":"-","msup":{"mrow":{"mo":["(",")"],"mfrac":{"mrow":[{"mi":"s","mo":["+","-"],"mn":"0.5","mrow":{"mi":"f","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"x"}}},{"mi":"\u03c3","mo":"\u2062","msqrt":{"mn":"2"}}]}},"mn":"2"}},"mrow":{"mo":"-","msup":{"mi":"\u2147","mrow":{"mo":"-","msup":{"mrow":{"mo":["(",")"],"mfrac":{"mrow":[{"mi":"s","mo":["-","-"],"mn":"0.5","mrow":{"mi":"f","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"x"}}},{"mi":"\u03c3","mo":"\u2062","msqrt":{"mn":"2"}}]}},"mn":"2"}}}}},{"mn":"0","mo":"\u21d2","msup":{"mi":"\u2147","mrow":{"mo":"-","msup":{"mrow":{"mo":["(",")"],"mfrac":{"mrow":[{"mi":"s","mo":["+","-"],"mn":"0.5","mrow":{"mi":"f","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"x"}}},{"mi":"\u03c3","mo":"\u2062","msqrt":{"mn":"2"}}]}},"mn":"2"}}}}],"mo":["=","\u2062"],"mi":{}}}},{"mtd":{"mrow":{"mo":["=","\u2062"],"mi":{},"mrow":{"msup":{"mi":"\u2147","mrow":{"mo":"-","msup":{"mrow":{"mo":["(",")"],"mfrac":{"mrow":[{"mi":"s","mo":["-","-"],"mn":"0.5","mrow":{"mi":"f","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"x"}}},{"mi":"\u03c3","mo":"\u2062","msqrt":{"mn":"2"}}]}},"mn":"2"}}},"mo":"\u21d2"}}}},{"mtd":{"mrow":{"mi":{},"mo":"\u2062","msup":{"mrow":{"mo":["(",")"],"mfrac":{"mrow":[{"mi":"s","mo":["+","-"],"mn":"0.5","mrow":{"mi":"f","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"x"}}},{"mi":"\u03c3","mo":"\u2062","msqrt":{"mn":"2"}}]}},"mn":"2"}}}},{"mtd":{"mrow":{"mo":["=","\u2062"],"mi":{},"mrow":{"msup":{"mrow":{"mo":["(",")"],"mfrac":{"mrow":[{"mi":"s","mo":["-","-"],"mn":"0.5","mrow":{"mi":"f","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"x"}}},{"mi":"\u03c3","mo":"\u2062","msqrt":{"mn":"2"}}]}},"mn":"2"},"mo":"\u21d2"}}}},{"mtd":{"mrow":{"mi":{},"mo":"\u2062","mfrac":{"mrow":[{"mi":"s","mo":["+","-"],"mn":"0.5","mrow":{"mi":"f","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"x"}}},{"mi":"\u03c3","mo":"\u2062","msqrt":{"mn":"2"}}]}}}},{"mtd":{"mrow":{"mo":["=","\u2062"],"mi":{},"mrow":{"mrow":{"mo":"-","mfrac":{"mrow":[{"mi":"s","mo":["-","-"],"mn":"0.5","mrow":{"mi":"f","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"x"}}},{"mi":"\u03c3","mo":"\u2062","msqrt":{"mn":"2"}}]}},"mo":"\u21d2"}}}},{"mtd":{"mrow":{"mi":["x",{}],"mo":["=","\u2062"],"mrow":{"msup":{"mi":"f","mrow":{"mo":"-","mn":"1"}},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}}}}}]}},{"mrow":{"mo":["(",")"],"mn":"13"}}]}}}},"br":{}},{"@attributes":{"id":"p-0068","num":"0067"},"maths":{"@attributes":{"id":"MATH-US-00010","num":"00010"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mi":"x","mo":"=","mrow":{"msup":{"mi":"f","mrow":{"mo":"-","mn":"1"}},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mn":"1","mo":"\/","mrow":{"mi":"ln","mo":"\u2061","mrow":{"mo":["(",")"],"mfrac":{"mrow":[{"mi":"s","mo":"+","mn":"0.5"},{"mi":"s","mo":"-","mn":"0.5"}]}}}}}}}}}},"For the multiple access points case, the independence of access points is utilized. We convert the problem into an optimization problem. For a given signal strength vector s=(s, . . . ,s), we want to find x that minimizes:\n\n(\u0192()\u2212)+(\u0192()\u2212)+ . . . +(\u0192()\u2212)\u2003\u2003(14)\n\nwhere \u0192is the interpolation function for access point i. Note that this function value is greater than or equal to zero, and equals zero if all the interpolation functions are \u201cperfect\u201d, meaning that the interpolation error is zero.\n","In order to reduce the complexity of the interpolation function, interpolation is applied between groups of adjacent coordinates of the radio maps. An exemplary embodiment of the present invention implements an interpolation function for each of three points. The discrete-space is divided into a mesh of triangles and an interpolation function is applied to each. For a given signal strength vector, one of the triangles is sought for that contains this vector with maximum probability and a point inside the triangle is supplied to the location API  (similar to the discrete-space case, where the continuous space is divided into triangles as opposed to individual points).","An advantageous feature of the present invention is in the compensation of variations in the received signal strength due to non-ideal characteristics of the wireless channel. As was discussed with reference to , the signal strength measured from a single access point varies over time. In fact, the signal from a given access point may appear and disappear in different samples over time. This is shown in , which illustrates the relationship between the average signal strength received from an access point and the percentage of samples received during a five minute period. The Figure shows that the number of samples collected from an access point is a monotonically increasing function of the average signal strength of the access point rather than a constant value.","An additional source of channel noise lies in the high degree of correlation between the samples collected from an access point.  shows the autocorrelation function of samples collected from one access point at a rate of one sample per second at a fixed position. As is shown in the Figure, the autocorrelation of consecutive samples (lag=1) is as high as 0.9. Experience has shown that this is a typical value for IEEE 802.11 compliant access points. This high autocorrelation is expected, as over a short period of time the signal strength received from an access point at a particular location and space is relatively stable (given a static environment). This high autocorrelation value is compensated for in the method of the present invention, as will be further detailed.","Similar systems of the prior art have made an assumption that samples from a given access point over time are independent. This independence assumption leads to an increasing average distance error as the number of averaged samples increases.","The signal strength of any electromagnetic source is attenuated as it traverses space. These large-scale variations are desirable as they lead to a variable signature stored in the radio map for different locations and allows improved differentiation between those locations. The attenuation of the average signal strength over distance for a typical access point is shown in .","Small-scale variations contribute to most of the estimation errors in systems of the prior art. These variations occur when a user moves over a small distance (on the order of a wavelength). For the IEEE 802.11b WLAN working at 2.4 GHz, the wavelength is 12.5 cm. On this scale, a variation in the average signal strength up to 10 dBm can be measured in a distance as small as 3 inches. Small-scale compensator  advantageously corrects the measured signal strength for these variations via a perturbation technique described below.","The handling of the previously discussed temporal correlation between samples is achieved through an autoregressive model of the measured signal strength. From this model, the distribution of the average of n correlated samples can be calculated and utilized to improve the determination of the most probable user location.","Let s(t) be the stationary time series representing the samples from an access point where t is the discrete time index. The series s(t) can be represented as a first order autoregressive model as:\n\n()=\u03b1(1)+(1\u2212\u03b1)\u03bd();0\u2266\u03b1\u22661\u2003\u2003(15)\n\nwhere \u03bd(t) is a noise process, independent from s(t), and \u03b1 is a parameter that determines the degree of autocorrelation of the original samples. Moreover, different samples from \u03bd(t) are independent, identically distributed variables (i.i.d.).\n","The model in Equation 15 states that the current signal strength value s(t) is a linear aggregate of the previous signal strength value (s(t)\u22121) and an independent noise value \u03bd(t). The parameter a gives flexibility to the model as it can be used to determine the degree of autocorrelation of the original process. For example, if a is zero, the samples of the process s(t) are i.i.d.'s, whereas if \u03b1 is one the original samples are identical (autocorrelation=1).","As shown in Equation 15, E[s(t)]=E[\u03bd(t)]. The two processes have the same mean. The relation between the variance of the original and noise processes can be obtained as follows:",{"@attributes":{"id":"p-0080","num":"0079"},"maths":{"@attributes":{"id":"MATH-US-00011","num":"00011"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mtable":{"mtr":[{"mtd":{"mrow":{"mrow":[{"mi":"Var","mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mi":"s","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}}}},{"mi":"Var","mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mrow":[{"mi":"\u03b1","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mrow":{"mi":"s","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":"t","mo":"-","mn":"1"}}}},{"mrow":[{"mo":["(",")"],"mrow":{"mn":"1","mo":"-","mi":"\u03b1"}},{"mi":"\u03c5","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}}],"mo":"\u2062"}],"mo":"+"}}}],"mo":["=","\u2062"],"mi":{}}}},{"mtd":{"mrow":{"mo":["=","\u2062"],"mi":{},"mrow":{"mrow":[{"msup":{"mi":"\u03b1","mn":"2"},"mo":"\u2062","mrow":{"mi":"Var","mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mi":"s","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":"t","mo":"-","mn":"1"}}}}}},{"msup":{"mrow":{"mo":["(",")"],"mrow":{"mn":"1","mo":"-","mi":"\u03b1"}},"mn":"2"},"mo":"\u00b7","mrow":{"mi":"Var","mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mi":"\u03c5","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}}}}}],"mo":"+"}}}},{"mtd":{"mrow":{"mi":{},"mo":"\u2062","mrow":{"mo":["(",")"],"mrow":{"mrow":[{"mi":"s","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},{"mi":"\u03c5","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}}],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}],"mi":["and","independent"]}}}}}]}},{"mrow":{"mo":["(",")"],"mn":"16"}}]}}}}},"Since the samples of s(t) are identically distributed (stationary process), Var[s(t)]=Var[s(t\u22121)]=Var[s]. Therefore, Equation 16 can be rewritten as:\n\n(1\u2212\u03b1)Var[]=(1\u2212\u03b1).Var[\u03bd()]\u2003\u2003(17)\n\ntherefore\n",{"@attributes":{"id":"p-0082","num":"0081"},"maths":{"@attributes":{"id":"MATH-US-00012","num":"00012"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mtable":{"mtr":[{"mtd":{"mrow":{"mfrac":[{"mrow":[{"mi":"Var","mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mi":"v","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}}}},{"mi":"Var","mo":"\u2061","mrow":{"mo":["[","]"],"mi":"s"}}]},{"mrow":{"mn":"1","mo":"-","msup":{"mi":"\u03b1","mn":"2"}},"msup":{"mrow":{"mo":["(",")"],"mrow":{"mn":"1","mo":"-","mi":"\u03b1"}},"mn":"2"}}],"mo":"="}}},{"mtd":{"mrow":{"mo":"=","mfrac":{"mrow":{"mn":"1","mo":"-","msup":{"mi":"\u03b1","mn":"2"}},"msup":{"mrow":{"mo":["(",")"],"mrow":{"mn":"1","mo":"-","mi":"\u03b1"}},"mn":"2"}}}}},{"mtd":{"mrow":{"mo":"=","mfrac":{"mrow":[{"mn":"1","mo":"+","mi":"\u03b1"},{"mn":"1","mo":"-","mi":"\u03b1"}]}}}}]}},{"mrow":{"mo":["(",")"],"mn":"18"}}]}}}}},"It can be observed from Equation 18 that the variance of the noise process is higher than the variance of the original process.  depict the ratio of Equation 18. Note that for \u03b1=0.9, the variance of the noise process is 19 times that of the original process. This high variance is undesirable as it increases the overlap in signal strength distributions of different locations. As will be shown, the method of the present invention reduces this variance by averaging samples from a given access point over time.","From equation 15, the relationship between s(t) and s(0) can be derived:",{"@attributes":{"id":"p-0085","num":"0084"},"maths":{"@attributes":{"id":"MATH-US-00013","num":"00013"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mtable":{"mtr":[{"mtd":{"mrow":{"mrow":[{"mi":"s","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},{"mrow":[{"mi":"\u03b1","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mrow":{"mi":"s","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":"t","mo":"-","mn":"1"}}}},{"mrow":[{"mo":["(",")"],"mrow":{"mn":"1","mo":"-","mi":"\u03b1"}},{"mi":"\u03c5","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}}],"mo":"\u2062"}],"mo":"+"}],"mo":["=","\u2062"],"mi":{}}}},{"mtd":{"mrow":{"mo":["=","\u2062"],"mi":{},"mrow":{"mrow":[{"msup":{"mi":"\u03b1","mn":"2"},"mo":"\u2062","mrow":{"mi":"s","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}}},{"mrow":[{"mi":"\u03b1","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mn":"1","mo":"-","mi":"\u03b1"}}},{"mi":"\u03c5","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}}],"mo":"\u2062"},{"mrow":[{"mo":["(",")"],"mrow":{"mn":"1","mo":"-","mi":"\u03b1"}},{"mi":"\u03c5","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}}],"mo":"\u2062"}],"mo":["-","+","-","+"],"mn":["2","1"]}}}},{"mtd":{"mrow":{"mo":["=","\u2062"],"mi":{},"mrow":{"mrow":[{"msup":{"mi":"\u03b1","mn":"3"},"mo":"\u2062","mrow":{"mi":"s","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}}},{"mrow":[{"msup":{"mi":"\u03b1","mn":"2"},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mn":"1","mo":"-","mi":"\u03b1"}}},{"mi":"\u03c5","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}}],"mo":"\u2062"}],"mo":["-","+","-","+"],"mn":["3","2"]}}}},{"mtd":{"mrow":{"mi":{},"mo":"\u2062","mrow":{"mrow":[{"mrow":[{"mi":"\u03b1","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mn":"1","mo":"-","mi":"\u03b1"}}},{"mi":"\u03c5","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}}],"mo":"\u2062"},{"mrow":[{"mo":["(",")"],"mrow":{"mn":"1","mo":"-","mi":"\u03b1"}},{"mi":"\u03c5","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}}],"mo":"\u2062"}],"mo":["-","+"],"mn":"1"}}}},{"mtd":{"mrow":{"mo":["=","\u2062"],"mi":{},"mrow":{"mrow":[{"msup":{"mi":["\u03b1","t"]},"mo":"\u2062","mrow":{"mi":"s","mo":"\u2061","mrow":{"mo":["(",")"],"mn":"0"}}},{"mrow":[{"mo":["(",")"],"mrow":{"mn":"1","mo":"-","mi":"\u03b1"}},{"munderover":{"mo":"\u2211","mrow":{"mi":"i","mo":"-","mn":"1"},"mi":"t"},"mo":"\u2062","mrow":{"msup":{"mi":"\u03b1","mrow":{"mi":["t","i"],"mo":"-"}},"mo":"\u2062","mrow":{"mi":"\u03c5","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}}}}],"mo":"\u2062"}],"mo":"+"}}}}]}},{"mrow":{"mo":["(",")"],"mn":"19"}}]}}}}},"Assuming a Gaussian distribution of signal strength, the value a can be approximated using the autocorrelation coefficient with lag one (r), which is estimated from a sample of size N as:",{"@attributes":{"id":"p-0087","num":"0086"},"maths":{"@attributes":{"id":"MATH-US-00014","num":"00014"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"msub":{"mi":"r","mn":"1"},"mo":"=","mfrac":{"mrow":[{"munderover":{"mo":"\u2211","mrow":[{"mi":"t","mo":"=","mn":"1"},{"mi":"N","mo":"-","mn":"1"}]},"mo":"\u2062","mrow":{"mrow":[{"mo":["[","]"],"mrow":{"mrow":{"mi":"s","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},"mo":"-","mover":{"mi":["s","_"]}}},{"mo":["[","]"],"mrow":{"mrow":{"mi":"s","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":"t","mo":"+","mn":"1"}}},"mo":"-","mover":{"mi":["s","_"]}}}],"mo":"\u00b7"}},{"munderover":{"mo":"\u2211","mrow":{"mi":"t","mo":"=","mn":"1"},"mi":"N"},"mo":"\u2062","msup":{"mrow":{"mo":["[","]"],"mrow":{"mrow":{"mi":"s","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},"mo":"-","mover":{"mi":["s","_"]}}},"mn":"2"}}]}}},{"mrow":{"mo":["(",")"],"mn":"20"}}]}}}},"br":{},"o":"s"},"For large values of \u03b1 (close to one), Equation 15 can be approximated as:\n\n()\u2248\u03b1(\u22121)\u2003\u2003(21)\n\nSubstituting Equation 21 in Equation 20 yields:\n",{"@attributes":{"id":"p-0089","num":"0088"},"maths":{"@attributes":{"id":"MATH-US-00015","num":"00015"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mtable":{"mtr":[{"mtd":{"mrow":{"msub":{"mi":"r","mn":"1"},"mo":["\u2248","\u2062"],"mi":{},"mfrac":{"mrow":[{"munderover":{"mo":"\u2211","mrow":[{"mi":"t","mo":"=","mn":"1"},{"mi":"N","mo":"-","mn":"1"}]},"mo":"\u2062","mrow":{"mrow":[{"mo":["[","]"],"mrow":{"mrow":{"mi":"s","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},"mo":"-","mover":{"mi":["s","_"]}}},{"mo":["[","]"],"mrow":{"mrow":{"mi":"\u03b1","mo":"\u00b7","mrow":{"mi":"s","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}}},"mo":"-","mover":{"mi":["s","_"]}}}],"mo":"\u00b7"}},{"munderover":{"mo":"\u2211","mrow":{"mi":"t","mo":"=","mn":"1"},"mi":"N"},"mo":"\u2062","msup":{"mrow":{"mo":["[","]"],"mrow":{"mrow":{"mi":"s","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},"mo":"-","mover":{"mi":["s","_"]}}},"mn":"2"}}]}}}},{"mtd":{"mrow":{"mo":["\u2248","\u2062"],"mi":{},"mfrac":{"mrow":[{"munderover":{"mo":"\u2211","mrow":[{"mi":"t","mo":"=","mn":"1"},{"mi":"N","mo":"-","mn":"1"}]},"mo":"\u2062","mrow":{"mrow":[{"mo":["[","]"],"mrow":{"mrow":{"mi":"s","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},"mo":"-","mover":{"mi":["s","_"]}}},{"mo":["[","]"],"mrow":{"mrow":[{"mi":"\u03b1","mo":"\u00b7","mrow":{"mo":["(",")"],"mrow":{"mrow":{"mi":"s","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},"mo":"-","mover":{"mi":["s","_"]}}}},{"mrow":{"mo":["(",")"],"mrow":{"mn":"1","mo":"-","mi":"\u03b1"}},"mo":"\u00b7","mover":{"mi":["s","_"]}}],"mo":"-"}}],"mo":"\u00b7"}},{"munderover":{"mo":"\u2211","mrow":{"mi":"t","mo":"=","mn":"1"},"mi":"N"},"mo":"\u2062","msup":{"mrow":{"mo":["[","]"],"mrow":{"mrow":{"mi":"s","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},"mo":"-","mover":{"mi":["s","_"]}}},"mn":"2"}}]}}}},{"mtd":{"mrow":{"mo":["\u2248","\u2062"],"mi":{},"mfrac":{"mrow":[{"mi":"\u03b1","mo":"\u00b7","mrow":{"munderover":{"mo":"\u2211","mrow":[{"mi":"t","mo":"=","mn":"1"},{"mi":"N","mo":"-","mn":"1"}]},"mo":"\u2062","msup":{"mrow":{"mo":["[","]"],"mrow":{"mrow":{"mi":"s","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},"mo":"-","mover":{"mi":["s","_"]}}},"mn":"2"}}},{"munderover":{"mo":"\u2211","mrow":{"mi":"t","mo":"=","mn":"1"},"mi":"N"},"mo":"\u2062","msup":{"mrow":{"mo":["[","]"],"mrow":{"mrow":{"mi":"s","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},"mo":"-","mover":{"mi":["s","_"]}}},"mn":"2"}}]}}}}]}},{"mrow":{"mo":["(",")"],"mn":"22"}}]}}}}},"For large N, Equation 22 can be rewritten as:\n\nr\u2248\u03b1\u2003\u2003(23)\n","Therefore for a large value of \u03b1 and N, as is the case here, \u03b1 can be estimated using the autocorrelation coefficient with lag one.","The mean and variance of the samples of a new process whose samples are the average of n samples from the original process can now be found. We use A(n) to denote the random variable whose value is the average of n samples (from t=0 to t=n\u22121) of the original process s(t), n>1. Since",{"@attributes":{"id":"p-0093","num":"0092"},"maths":{"@attributes":{"id":"MATH-US-00016","num":"00016"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"mi":"A","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"n"}},{"mfrac":{"mn":"1","mi":"n"},"mo":"\u00b7","mrow":{"munderover":{"mo":"\u2211","mrow":[{"mi":"j","mo":"=","mn":"0"},{"mi":"n","mo":"-","mn":"1"}]},"mo":"\u2062","msub":{"mi":["s","j"]}}}],"mo":"="}},{"mrow":{"mo":["(",")"],"mn":"24"}}]}}}},"br":{}},"From equation 19, A(n) can be written as:",{"@attributes":{"id":"p-0095","num":"0094"},"maths":{"@attributes":{"id":"MATH-US-00017","num":"00017"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":[{"mtd":[{"mrow":{"mtable":{"mtr":[{"mtd":{"mrow":{"mrow":[{"mi":"A","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"n"}},{"mfrac":{"mn":"1","mi":"n"},"mo":"\u00b7","mrow":{"munderover":{"mo":"\u2211","mrow":[{"mi":"j","mo":"=","mn":"0"},{"mi":"n","mo":"=","mn":"1"}]},"mo":"\u2062","mrow":{"mo":["{","}"],"mrow":{"mrow":[{"msup":{"mi":["a","j"]},"mo":"\u00b7","mrow":{"mi":"s","mo":"\u2061","mrow":{"mo":["(",")"],"mn":"0"}}},{"mrow":[{"mo":["(",")"],"mrow":{"mn":"1","mo":"-","mi":"\u03b1"}},{"munderover":{"mo":"\u2211","mrow":{"mi":"i","mo":"=","mn":"1"},"mi":"j"},"mo":"\u2062","mrow":{"msup":{"mi":"\u03b1","mrow":{"mi":["j","i"],"mo":"-"}},"mo":"\u00b7","msub":{"mi":["\u03c5","i"]}}}],"mo":"\u00b7"}],"mo":"+"}}}}],"mo":"="}}},{"mtd":{"mrow":{"mo":"=","mrow":{"mfrac":{"mn":"1","mi":"n"},"mo":"\u00b7","mrow":{"mo":["{","}"],"mrow":{"mrow":[{"mfrac":{"mrow":[{"mn":"1","mo":"-","msup":{"mi":["\u03b1","n"]}},{"mn":"1","mo":"-","mi":"\u03b1"}]},"mo":"\u00b7","mrow":{"mi":"s","mo":"\u2061","mrow":{"mo":["(",")"],"mn":"0"}}},{"mrow":[{"mo":["(",")"],"mrow":{"mn":"1","mo":"-","mi":"\u03b1"}},{"munderover":{"mo":"\u2211","mrow":[{"mi":"j","mo":"=","mn":"1"},{"mi":"n","mo":"-","mn":"1"}]},"mo":"\u2062","mrow":{"munderover":{"mo":"\u2211","mrow":{"mi":"i","mo":"=","mn":"1"},"mi":"j"},"mo":"\u2062","mrow":{"msup":{"mi":"\u03b1","mrow":{"mi":"j","mo":"-","mn":"1"}},"mo":"\u00b7","msub":{"mi":["\u03c5","i"]}}}}],"mo":"\u00b7"}],"mo":"+"}}}}}}]},"mo":["\u2062","\u2062"],"mstyle":{"mtext":{}},"mrow":{"mi":"Therefore","mo":","}}},{"mrow":{"mo":["(",")"],"mn":"25"}}]},{"mtd":[{"mrow":{"mrow":[{"mi":"Var","mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mi":"A","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"n"}}}},{"mfrac":{"mn":"1","msup":{"mi":"n","mn":"2"}},"mo":"\u00b7","mrow":{"mrow":{"mo":["{","}"],"mrow":{"mrow":[{"msup":{"mrow":{"mo":["(",")"],"mfrac":{"mrow":[{"mn":"1","mo":"-","msup":{"mi":["\u03b1","n"]}},{"mn":"1","mo":"-","mi":"\u03b1"}]}},"mn":"2"},"mo":"\u00b7","mrow":{"mi":"Var","mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mi":"s","mo":"\u2061","mrow":{"mo":["(",")"],"mn":"0"}}}}},{"msup":{"mrow":{"mo":["(",")"],"mrow":{"mn":"1","mo":"-","mi":"\u03b1"}},"mn":"2"},"mo":"\u00b7","mrow":{"munderover":{"mo":"\u2211","mrow":[{"mi":"j","mo":"=","mn":"1"},{"mi":"n","mo":"=","mn":"1"}]},"mo":"\u2062","mrow":{"munderover":{"mo":"\u2211","mrow":{"mi":"i","mo":"=","mn":"1"},"mi":"j"},"mo":"\u2062","mrow":{"msup":{"mi":"\u03b1","mrow":{"mn":"2","mo":"\u2062","mrow":{"mo":["(",")"],"mrow":{"mi":"j","mo":"-","mn":"1"}}}},"mo":"\u2062","mrow":{"mi":"Var","mo":"\u2061","mrow":{"mo":["[","]"],"msub":{"mi":["\u03c5","i"]}}}}}}}],"mo":"+"}},"mo":"."}}],"mo":"="}},{"mrow":{"mo":["(",")"],"mn":"26"}}]}]}}},"br":{}},{"@attributes":{"id":"p-0096","num":"0095"},"maths":{"@attributes":{"id":"MATH-US-00018","num":"00018"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mtable":{"mtr":[{"mtd":{"mrow":{"mrow":[{"mi":"Var","mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mi":"A","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"n"}}}},{"mfrac":{"mrow":{"mi":"Var","mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mi":"s","mo":"\u2061","mrow":{"mo":["(",")"],"mn":"0"}}}},"msup":{"mi":"n","mn":"2"}},"mo":"\u00b7","mrow":{"mo":"{","mrow":{"msup":{"mrow":{"mo":["(",")"],"mfrac":{"mrow":[{"mn":"1","mo":"-","msup":{"mi":["\u03b1","n"]}},{"mn":"1","mo":"-","mi":"\u03b1"}]}},"mn":"2"},"mo":"+","mrow":{"mrow":{"mo":["(",")"],"mrow":{"mn":"1","mo":"-","msup":{"mi":"\u03b1","mn":"2"}}},"mo":"\u00b7"}}}}],"mo":["=","\u2062"],"mi":{}}}},{"mtd":{"mrow":{"mi":{},"mo":["\u2062","}"],"mrow":{"munderover":{"mo":"\u2211","mrow":[{"mi":"j","mo":"=","mn":"1"},{"mi":"n","mo":"=","mn":"1"}]},"mo":"\u2062","mrow":{"munderover":{"mo":"\u2211","mrow":{"mi":"i","mo":"=","mn":"1"},"mi":"j"},"mo":"\u2062","msup":{"mi":"\u03b1","mrow":{"mrow":{"mrow":{"mn":"2","mo":"\u00b7","mi":"j"},"mo":"-","mn":"1"},"mo":")"}}}}}}},{"mtd":{"mrow":{"mo":["=","\u2062"],"mi":{},"mrow":{"mfrac":{"mrow":{"mi":"Var","mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mi":"s","mo":"\u2061","mrow":{"mo":["(",")"],"mn":"0"}}}},"msup":{"mi":"n","mn":"2"}},"mo":"\u00b7","mrow":{"mo":"{","mrow":{"msup":{"mrow":{"mo":["(",")"],"mfrac":{"mrow":[{"mn":"1","mo":"-","msup":{"mi":["\u03b1","n"]}},{"mn":"1","mo":"-","mi":"\u03b1"}]}},"mn":"2"},"mo":"+","mrow":{"mrow":{"mo":["(",")"],"mrow":{"mn":"1","mo":"-","msup":{"mi":"\u03b1","mn":"2"}}},"mo":"\u00b7"}}}}}}},{"mtd":{"mrow":{"mi":{},"mo":["\u2062","}"],"mrow":{"munderover":{"mo":"\u2211","mrow":[{"mi":"j","mo":"=","mn":"1"},{"mi":"n","mo":"-","mn":"1"}]},"mo":"\u2062","mfrac":{"mrow":[{"mn":"1","mo":"-","msup":{"mi":"\u03b1","mrow":{"mn":"2","mo":"\u00b7","mi":"j"}}},{"mn":"1","mo":"-","msup":{"mi":"\u03b1","mn":"2"}}]}}}}},{"mtd":{"mrow":{"mo":["=","\u2062"],"mi":{},"mrow":{"mfrac":{"mrow":{"mi":"Var","mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mi":"s","mo":"\u2061","mrow":{"mo":["(",")"],"mn":"0"}}}},"msup":{"mi":"n","mn":"2"}},"mo":"\u00b7","mrow":{"mo":"{","mrow":{"msup":{"mrow":{"mo":["(",")"],"mfrac":{"mrow":[{"mn":"1","mo":"-","msup":{"mi":["\u03b1","n"]}},{"mn":"1","mo":"-","mi":"\u03b1"}]}},"mn":"2"},"mo":["+","-","-"],"mi":"n","mn":"1"}}}}}},{"mtd":{"mrow":{"mi":{},"mo":["\u2062","}"],"mrow":{"msup":{"mi":"\u03b1","mn":"2"},"mo":"\u00b7","mfrac":{"mrow":[{"mn":"1","mo":"-","msup":{"mi":"\u03b1","mrow":{"mn":"2","mo":"\u00b7","mrow":{"mo":["(",")"],"mrow":{"mi":"n","mo":"-","mn":"1"}}}}},{"mn":"1","mo":"-","msup":{"mi":"\u03b1","mn":"2"}}]}}}}}]}},{"mrow":{"mo":["(",")"],"mn":"27"}}]}}}}},"Since s(t) is a stationary process, Var[s(0)]=Var[s] and the final relation between Var[A(n)] and Var[s] is:",{"@attributes":{"id":"p-0098","num":"0097"},"maths":{"@attributes":{"id":"MATH-US-00019","num":"00019"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"mi":"Var","mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mi":"A","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"n"}}}},{"mfrac":{"mrow":{"mi":"Var","mo":"\u2061","mrow":{"mo":["[","]"],"mi":"s"}},"msup":{"mi":"n","mn":"2"}},"mo":"\u00b7","mrow":{"mo":["{","}"],"mrow":{"msup":{"mrow":{"mo":["(",")"],"mfrac":{"mrow":[{"mn":"1","mo":"-","msup":{"mi":["\u03b1","n"]}},{"mn":"1","mo":"-","mi":"\u03b1"}]}},"mn":"2"},"mo":["+","-","-"],"mi":"n","mn":"1","mrow":{"msup":{"mi":"\u03b1","mn":"2"},"mo":"\u00b7","mfrac":{"mrow":[{"mn":"1","mo":"-","msup":{"mi":"\u03b1","mrow":{"mn":"2","mo":"\u00b7","mrow":{"mo":["(",")"],"mrow":{"mi":"n","mo":"-","mn":"1"}}}}},{"mn":"1","mo":"-","msup":{"mi":"\u03b1","mn":"2"}}]}}}}}],"mo":"="}},{"mrow":{"mo":["(",")"],"mn":"28"}}]}}}}},"Note that when \u03b1=0 (i.e. the samples of s(t) are independent), Equation 28 reduces to:",{"@attributes":{"id":"p-0100","num":"0099"},"maths":{"@attributes":{"id":"MATH-US-00020","num":"00020"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":{"mi":"Var","mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mi":"A","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"n"}}}},"mo":"=","mfrac":{"mrow":{"mi":"Var","mo":"\u2061","mrow":{"mo":["[","]"],"mi":"s"}},"mi":"n"}}},{"mrow":{"mo":["(",")"],"mn":"29"}}]}}}}},{"@attributes":{"id":"p-0101","num":"0100"},"figref":"FIG. 9"},"Correlation modeler  utilizes the results of the preceding analysis to obtain the distribution of the average of n correlated samples. To do so, the signal strength distribution is modeled as a Gaussian distribution having the probability distribution of Equation 7. Since the individual distribution of each samples follows a Gaussian distribution, the probability distribution of the average of n samples follows the Gaussian distribution whose mean is the mean of the distribution of each sample and whose variance is given by Equation 28. To calculate these values, only the values of n and a need be known. Typically, n is a value that is determined prior to the building of the radio map and \u03b1 can be estimated from the one-sample lag autocorrelation coefficient ras derived above. Radio map builder  in conjunction with correlation modeler  stores the model probability distribution function in the radio map database .","Referring to , the location determination phase is illustrated in a flow diagram. The algorithm collects n samples from each access point and obtains their average. The probability of each radio map location given this average value is calculated using the distribution of the average of n samples calculated by correlation modeler . Note that the value of a is implicitly used in the location determination phase as the distribution of the average of n samples depends on \u03b1, as shown above.","The location determination algorithm of  is entered through block . In block , n samples of the signal strength sfrom k addressable sources is collected and, as shown in block , the average of the signal strength components is taken and stored in a vector s=(s, . . . s). A search space, X, which may be set or cluster of locations, is selected either prior to processing or via clustering module .","In block , a maximum probability variable Pis initialized to zero. Control is transferred to block  whereby the first radio map location l\u03b5X is selected. This first location l may be established from a user's last known location. It is a feature of the present invention to manage a user profile in which known locations and\/or most frequently visited locations of the user are stored. Obviously, a reasonable estimate of the first radio map location l from which to begin the searching process in determining the user's present location greatly reduces the amount of computation necessary.","In block  of , P(l|s) is calculated via Equation (6) above. It is then determined, as shown in block , whether this calculated probability is the maximum probability thus far in the processing. If not, control is transferred to decision block  where it is determined if all locations in the radio map have been tested. If the probability calculated in block  is a maximum value, the process sets the value l to be the current xand sets the calculated probability P to be the new value of P. xrepresents the current estimate of the location x that maximizes the probability P(x|s).","Each location l in the set X is tested, as shown in block , to determine if it is the location in the radio map that maximizes P(x|s). When all l have been tested, as determined in block , the values stored in xwill be the best estimate of the user's location given the measured signal strength from all access points at that location.","As previously stated, small-scale compensator  utilizes a perturbation technique to detect and to compensate for variations in the measured signal strength on a small spatial scale (on the order of a wavelength). The method of the present invention first calculates an estimated location using the discrete-space radio map. The system then calculates the distance between the estimated location and a previous user location. If this distance is above a predetermined threshold, the method of the present invention infers that small-scale variations are effecting the measured signal strength.","To compensate for these small-scale variations, small-scale compensator  perturbs the received vector entries and re-estimates the location. The nearest location to the previous user location is chosen as the final location estimate. As an example, for a received signal vector s=(s, . . . s), small-scale compensator  could perturb vector s to obtain the vector s'=(s(1+e), . . . sk(1+e)). where e\u03b5{\u2212d, 0, d} is the percentage by which the signal strength is perturbed (0 for no perturbation).","Typically, measurements from three access points (k=3) are adequate to obtain a user's position with sufficient accuracy, so the number of perturbed vector components is limited. Moreover, experimentation has shown that the small-scale variations depend heavily on the magnitude of the signal strength received. Thus, perturbing the component corresponding to the strongest access point can obtain sufficient results. The value of d is chosen as an amount relative to the received signal strength.","To reduce the computational requirement of the location determination algorithm, the present invention implements clustering module  to limit the number of locations to be examined during the on-line phase. A cluster is defined as a set of locations sharing a common set of access points. This common set of access points is the cluster key. In the location determination phase, only those locations within the cluster need be evaluated in accordance with the location determination algorithm described above. Thus, given a location x the clustering problem is then to determine to which cluster x belongs.","In one embodiment of the present invention, clustering is achieved by grouping locations according to the access points providing that location with coverage. That is to say, two locations xand xare placed in the same cluster iff the set of access points covering these locations are identical. However, this approach for clustering has problems in that, as previously discussed, an access point may be missing from some of the samples and, therefore, using the entire set of access points that cover a location may fail to find the correct cluster due to the missing access point.","In an exemplary embodiment of the present invention, a subset of the set of access points which contains only q elements are used. The clustering problem then becomes, given a number q, to put all of the locations that share q access points in one cluster. In one embodiment of the present invention, q is chosen such that all locations are covered by at least q access points most of the time. This factor lessens the effect of variability in the number of access points with time. This suggests that the value of q should be less than or equal to the minimum number of access points covering any location in the radio map. Additionally, the value for q should ensure that locations are distributed evenly between the clusters to reduce the required computations.","If the number of access points covering a location is varying with time, it would be obvious to ask which access points should be chosen for a given location. Intuitively, one would choose the access points that appear most of the time in the samples.  suggests that the q access points with the largest signal strength values at each location should be chosen.","It has been shown from empirical data that, at some locations, the order of the access points with the largest signal strength values changes when the signal strength values from these access points are near to each other. Therefore, the q access points may be treated as a set as opposed to an ordered tuple. For example. if q=2 and the two access points with the largest and second largest signal strength value at location xare (AP, AP), respectively, and (AP, AP), for another location x, location xand location xmay be placed in the same cluster regardless of the order of the distance of the access point from the location.","In an exemplary embodiment of the present invention, the set of the q strongest access point covering a given location x is used to determine the cluster to which the location belongs. Then, only those locations in the radio map for which these q access points are the strongest will comprise the search space, X, of the location determination algorithm, as discussed above.","In another embodiment of the present invention, clustering is done incrementally during the online location determination phase. To do so, one must observe that each access point defines a subset of radio map locations covered thereby. These locations may be viewed as a cluster whose cluster key is the access point covering the locations. Starting with a first access point (e.g., the access point from which the strongest signal is obtained, the search space X may be restricted to only those locations covered thereby. A second access point is chosen which provides coverage to some or all of the locations in X which are also covered by the first access point. Additional access points are appended to the cluster key until search space X has been adequately reduced, at which time the cluster key is also obtained.","Although the invention has been described herein in conjunction with specific embodiments thereof, many alternatives, modifications and variations will be apparent to those skilled in the art. The present invention is intended to embrace all such alternatives, modifications, and variations that fall within the spirit and broad scope of the appended Claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 8A"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":["FIG. 8B","FIG. 8A"]},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 10"}]},"DETDESC":[{},{}]}
