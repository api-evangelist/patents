---
title: Methods, apparatus and articles of manufacture to monitor tunnels within traffic engineering/fast reroute enabled networks
abstract: Example methods and apparatus to monitor tunnels within traffic engineering/fast reroute (TE/FRR) enabled networks are disclosed. A disclosed example apparatus includes a message interface to receive from a router a change alert notification for a traffic engineering (TE) tunnel, a router interrogator to interrogate the router to obtain updated path information for the TE tunnel in response to the received change alert notification, and a topology database interface to update a database representative of a tunnel topology of a TE/FRR enabled network based on the updated path information.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08630189&OS=08630189&RS=08630189
owner: AT&T Intellectual Property I, L.P.
number: 08630189
owner_city: Atlanta
owner_country: US
publication_date: 20090917
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["FIELD OF THE DISCLOSURE","BACKGROUND","DETAILED DESCRIPTION"],"p":["This disclosure relates generally to traffic engineering\/fast reroute (TE\/FRR) enabled networks and, more particularly, to methods and apparatus to monitor tunnels within TE\/FRR enabled networks.","Service providers are increasingly implementing multiprotocol label switching (MPLS) TE\/FRR within their networks to improve network convergence times and\/or to better utilize network resources. To reduce packet loss due to inefficient bandwidth utilization and\/or to improve network performance, TE tunnels are defined through the service provider's MPLS-based network to steer traffic along desired paths. Traffic is forwarded along the defined TE tunnels using label switching. Each communication path between a particular source or headend router and a particular destination or tailend router is assigned a specific label switched path (LSP) identifier within the service provider's network using, for example, resource reservation protocol (RSVP) signaling. Over time, TE tunnel paths within an TE\/FRR enabled network may be changed, rerouted and\/or re-optimized in response to changed(-ing) network conditions and\/or changed(-ing) service provider constraints.","Example methods and apparatus to monitor tunnels within traffic engineering\/fast reroute (TE\/FRR) enabled networks are disclosed. A disclosed example apparatus includes a message interface to receive from a router a change alert notification for a TE tunnel, a router interrogator to interrogate the router to obtain updated path information for the TE tunnel in response to the received change alert notification, and a topology database interface to update a database representative of a tunnel topology of a TE\/FRR enabled network based on the updated path information.","A disclosed example method includes receiving from a router a change alert notification for a TE tunnel, interrogating the router to obtain updated path information for the TE tunnel in response to the change alert notification, and updating a database representative of a topology of a network based on the updated path information.","In the interest of brevity and clarity, throughout the following disclosure references will be made to an example TE\/FRR enabled network  of . However, the methods and apparatus described herein to monitor TE tunnels are applicable to other TE\/FRR enabled, and\/or other networks constructed using any number and\/or type(s) of additional and\/or alternative network technologies, topologies and\/or protocols. To route data between two endpoint routers (not shown), the example TE\/FRR enabled network  of  includes a plurality of routers, five of which are designated at reference numerals R, R, R, R and R. The example routers R-R of  may be communicatively coupled in any topology using any number and\/or type(s) of communication paths. In some examples, the routers R-R are implemented at different physical locations to allow the example TE\/FRR enabled network  to route traffic across and\/or within a geographical area and\/or region.","Using any number and\/or type(s) of method(s), protocol(s), criteria and\/or logic, TE tunnels (one of which is designated at reference numeral ) are defined and\/or established through the TE\/FRR enabled network  to facilitate the routing of traffic between locations. Each of the routers R-R may be associated with a plurality of TE tunnels to implement a partial and\/or full mesh of TE tunnels among the routers R-R. In some examples, a full-mesh of TE tunnels is defined within the network  to allow data to be routed between any pairs of the routers R-R. The example TE tunnel  of  facilitates the transport of data from the router R to the router R.","Each TE tunnel defines a unidirectional virtual interface communicatively coupling a specific source (e.g., a headend router) and a specific destination (e.g., a tailend router), which may have associated properties and\/or attributes. In some examples, policies based traffic selection (PBTS) is used to enable and\/or disable certain types of traffic flows within a TE tunnel Example attributes associated with a TE tunnel, in addition to the associated ingress (headend router and\/or endpoint) and egress (tailend router and\/or endpoint) points, include, but are not limited to, a bandwidth requirement and\/or a cost-of-service (CoS) associated with forwarding data along that TE tunnel. In the example of , traffic is forwarded along the path defined by the associated TE tunnel using MPLS-based label switching. Using, for example, a resource reservation protocol (RSVP), a headend router assigns a label switching path (LSP) identifier to each TE tunnel associated with a particular path. A TE tunnel need not be bound to a specific or fixed path through the network . Unless configured explicitly, the path associated with a particular TE tunnel can be changed, rerouted and\/or re-optimized to direct packets along a different path through the network . For example, the TE tunnel  may be changed to route data between the routers R and R via a new path  that includes the routers R and R rather than via a previous path  that includes the routers R and R, as shown in . In some examples, the new path  may be a pre-calculated path for the path  to facilitate sub-second link failure recovery.","In TE\/FRR enabled networks, TE tunnel paths may change dynamically in response to, for example, network conditions such as, communication link failure, router failure, router interface failure, etc. Network engineers often analyze and\/or study the topology of a network to detect and\/or identify, for example, bottle necks, communication link failures, router failures, interface failures, etc. However, to perform such tunnel and\/or network topology analysis, the network engineers require accurate and current TE tunnel path information. Because the TE tunnel paths change dynamically, tunnel topology information can easily become out of date and\/or unrepresentative of current network conditions. Further, while periodic and\/or aperiodic polling of all of the routers of a network can be performed to obtain current TE tunnel path information, such polling is inefficient and may not result in tunnel topology information that is, at any point in time, representative of the current state of an entire network.","To overcome at least these difficulties in monitoring TE tunnels and\/or, more generally, the state of the network  in substantially real-time, the example network  of  includes a fault analysis platform , a message server , and a tunnel monitor . Whenever the path of a TE tunnel through the network  is re-routed, changed and\/or re-optimized, the corresponding headend router traps and\/or triggers on the TE tunnel path change and sends a tunnel path change alert notification. For example, when the router R detects that the path of the TE tunnel  changed from the path  to the path , the router R sends a tunnel path change alert notification . In some examples, the router R traps and\/or triggers based on an mplsTunnelRerouted event and\/or an mplsTunnelReoptimized event, as defined in Internet Engineering Task Force (IETF) Request for Comment (RFC) 3812.","In the illustrated example of , the tunnel path change alert notification  is received at the example fault analysis platform . In general, the example fault analysis platform  of  handles any number and\/or type(s) of additional and\/or alternative fault and\/or alert messages received from the routers R-R according to any number and\/or type(s) of rule(s), logic and\/or criteria. When the example fault analysis platform  receives a tunnel path change alert notification, such as the example notification , the fault analysis platform  routes the change alert notification to the example message server . While the example fault analysis platform  is depicted in  with a single box, the fault analysis platform  may include any number and\/or type(s) of server(s), device(s), data collector(s), alert filtering module(s) and\/or messaging interface(s).","The example message server  of  transforms the TE tunnel path change alert notification  sent by the router R into an eXtensible Markup Language (XML) formatted TE tunnel change alert notification , and places the XML-formatted TE tunnel change alert notification  into a message queue  () of the tunnel monitor . An example data structure that may be used to implement the example message XML-formatted change alert notification  is shown in .","To identify that the example notification  of  is a TE tunnel change alert notification, the example TE tunnel change alert notification  of  includes a message type field . The example message type field  of  contains one or more alphanumeric characters that indicate a TE tunnel change alert, such as the term \u201cMplsTunnelReoptimizationAlert.\u201d","To identify the router R-R that sent the TE tunnel change alert notification  corresponding to the notification , the example change alert notification  of  includes an Internet protocol (IP) address field . The example IP address field  of  contains one or more numbers that represent an IP address.","To identify the TE tunnel that changed, the example TE tunnel change alert notification  includes a tunnel ID field . The example tunnel ID field  of  includes one or more alphanumeric characters that uniquely identify a TE tunnel of the network .","While an example data structure that may be used to implement the example TE tunnel change alert notification  of  is illustrated in , the example XML-formatted TE tunnel change alert notification  of  may be implemented using any number and\/or type(s) of other and\/or additional entries, fields and\/or data. Further, the entries, fields and\/or data illustrated in  may be combined, divided, re-arranged, eliminated and\/or implemented in any way. Further still, the example XML-formatted TE tunnel change alert notification  may include entries, fields and\/or data in addition to, or instead of, those illustrated in , and\/or may include more than one of any or all of the illustrated entries, fields and\/or data.","Returning to , while in the illustrated example of , the message server  places the TE tunnel path change alert notification  in the message queue  of the tunnel monitor , the example message server  of  could, additionally or alternatively, send an interrupt to the tunnel monitor  that causes the tunnel monitor  to process the change alert notification . Moreover, the message server  could be eliminated and the fault analysis platform  may send the change alert notification  directly to the tunnel monitor  when it is received from the router R.","The example tunnel monitor  of  periodically or aperiodically checks the message queue  for unprocessed TE tunnel path change alert notifications . In some examples, the tunnel monitor  processes alert notifications  on a first-come first-served basis. As described in more detail below in connection with , the example tunnel monitor  of  processes each change alert notification  by interrogating the router R-R that sent the corresponding alert notification  to obtain from that router R-R the new and\/or updated path information for the affected TE tunnel. In some examples, the tunnel monitor  interrogates the router R-R by exchanging simple network management protocol (SNMP) messages with the router R-R to request and\/or obtain information from a MPLS TE management information block (MIB), as defined in, for example, IETF RFC 3812. Based on TE tunnel path information received, obtained and\/or otherwise collected from the router R-R, the example tunnel monitor  updates a tunnel and\/or network topology database . By interrogating the router R-R to collect and\/or obtain TE tunnel path information when a TE tunnel path change occurs, rather than based on periodic or aperiodic polling, the example tunnel monitor  can update the tunnel and\/or network topology database  in substantially real-time as each TE tunnel path change occurs. Thus, at each time instant, the example network topology database  can substantially represent the current and\/or active TE tunnel paths of the network . Accordingly, the example tunnel and\/or network topology database  of  is kept more up-to-date than previously existing network topology databases and, thus, more amenable to accurate analysis by a topology analyzer  and\/or a network engineer.","An example data structure that may be used to implement the example tunnel topology database  of  is described below in connection with . The example tunnel topology database  may be stored on any number and\/or type(s) of memory(-ies), memory device(s) and\/or storage device(s).","To identify network conditions such as, for example, over utilized communication links, bottlenecks, communication link failures, router failures, router interface failures, etc., the example network  of  includes any number and\/or type(s) of topology analyzers, one of which is designated at reference numeral . The example topology analyzer  of  may identify one or more TE tunnels having a common previous communication link and\/or router that is no longer part of the path(s) of the identified TE tunnels. Such a common no longer used communication link and\/or router may be indicative of a failed and\/or failing portion of the network . By proactively identifying such network failures, repair can be affected before customers become aware that a network failure occurred, thereby increasing customer satisfaction and\/or reducing lost revenue. The tunnel topology database  may also be analyzed by the example topology analyzer  to identify portions of the network  that would benefit from capacity upgrade(s) to, for example, improve network performance and\/or reliability.","While an example TE\/FRR enabled network  has been illustrated in , one or more of the interfaces, data structures, elements, processes and\/or devices illustrated in  may be combined, divided, re-arranged, omitted, eliminated and\/or implemented in any other way. For example, the tunnel monitor  may be implemented by and\/or within the example fault analysis platform , the message server  may be eliminated, and\/or the message queue  may be eliminated. Further, the example fault analysis platform , the example message server , the example tunnel monitor  and\/or the topology analyzer  of  may be implemented by hardware, software, firmware and\/or any combination of hardware, software and\/or firmware. Thus, for example, any of the example fault analysis platform , the example message server , the example tunnel monitor  and\/or the topology analyzer  may be implemented by one or more circuit(s), programmable processor(s), application specific integrated circuit(s) (ASIC(s)), programmable logic device(s) (PLD(s)) and\/or field programmable logic device(s) (FPLD(s)), etc. Further still, the network  may include communication links, servers, platforms, monitors, data structures and\/or devices instead of, or in addition to, those illustrated in  and\/or may include more than one of any or all of the illustrated communication links, servers, platforms, monitors, data structures and\/or devices.",{"@attributes":{"id":"p-0030","num":"0029"},"figref":["FIG. 2","FIG. 1","FIG. 2","FIG. 1"],"b":["120","130","120","205","205","130","115","210","130","205","215","130","210"]},"An example data structure that may be used to implement the example message queue  of  is shown in . The example message queue  may be stored on any number and\/or type(s) of memory(-ies), memory device(s) and\/or storage device(s).","The example message queue  of  includes a plurality of entries  for respective ones of a plurality of TE tunnel change alert notifications  received via the example message interface . As shown in , an example entry  corresponds to the example TE tunnel change alert notification  of .","To identify the router R-R that sent the corresponding TE tunnel change alert notification , each of the example entries  of  includes an IP address field . Each of the example IP address fields  of  contains one or more numbers that represent an IP address.","To identify the TE tunnel that changed, each of the example entries  of  includes a tunnel ID field . Each of the example tunnel ID fields  of  contains one or more alphanumeric characters that uniquely identify a TE tunnel of the network .","To identify when the TE tunnel change alert notification was received, each of the example entries  of  includes a timestamp field . Each of the example timestamp fields  of  contains one or more alphanumeric characters that represent a timestamp. An example timestamp format is shown in .","To indicate whether the TE tunnel change alert notification has been processed, each of the example entries  of  includes a processed field . Each of the example processed fields  of  contains one or more alphanumeric characters that one of two logic values, such as \u2018yes\u2019 or \u2018no,\u2019 or \u2018true\u2019 or \u2018false.\u2019","While an example data structure that may be used to implement the example message queue  of  is illustrated in , the example message queue  of  may be implemented using any number and\/or type(s) of other and\/or additional entries, fields and\/or data. Further, the entries, fields and\/or data illustrated in  may be combined, divided, re-arranged, eliminated and\/or implemented in any way. Further still, the example message queue  may include entries, fields and\/or data in addition to, or instead of, those illustrated in , and\/or may include more than one of any or all of the illustrated entries, fields and\/or data.","Returning to , to receive, obtain and\/or otherwise collect TE tunnel path change information from the routers R-R, the example tunnel monitor  of  includes the example router interrogator . The example router interrogator  of  processes each TE tunnel change alert notification  in the message queue  by sending a first SNMP query message  () to the corresponding router R-R to request the index of the Tunnel Computed Route Hop Table for the changed TE tunnel . The example SNMP message  of  contains a first portion  that references the MplsTunnelARHopTableIndex of the routers's MPLS TE MIB and a second portion  that identifies the TE tunnel . The example SNMP message  corresponds to the example TE tunnel change alert notification  of  and the corresponding unprocessed entry  of .","The router interrogator  of  waits to receive a response to the example SNMP message  of  from the interrogated router R-R. An example response SNMP message  to the SNMP query  is shown in . The example SNMP response message  of  contains, among other things, the requested TableIndex  for the changed TE tunnel . The example router interrogator  of  extracts the TableIndex  from the example response message .","Using the extracted TableIndex , the example router interrogator  requests the TE tunnel path information for the changed TE tunnel  by sending a second SNMP query message  (). The example SNMP message  of  contains a first portion  that references the MplsTunnelARHopTable of the routers's MPLS TE MIB and a second portion containing the TableIndex .","The router interrogator  of  waits to receive a response to the second SNMP query message  from the interrogated router R-R. An example response SNMP message  to the SNMP query  is shown in . The example SNMP response message  of  includes a plurality of entries  corresponding to each hop of the changed TE tunnel path. To identify the next hop of the TE tunnel path, each of the example entries  of  includes an IP address field . Each of the example IP address fields  of  contains one or more numbers that represent an IP address. The example router interrogator  provides the response SNMP message  to a tunnel path analyzer .","The example tunnel path analyzer  of  parses the example TE tunnel path information message  to extract each of the IP addresses . A topology database interface  stores the extract TE tunnel path information in the example tunnel topology database  of . Implementation of the database interface  of  may depend on the application programming interface (API) implemented by the example tunnel topology database . An example API includes a structured query language (SQL).","While an example manner of implementing the example tunnel monitor  of  has been illustrated in , one or more of the interfaces, data structures, modules, elements and\/or devices illustrated in  may be combined, divided, re-arranged, omitted, eliminated and\/or implemented in any other way. Further, the example message interface , the example message queue , the example router interrogator , the example tunnel path analyzer , the example topology database interface  and\/or, more generally, the example tunnel monitor  of  may be implemented by hardware, software, firmware and\/or any combination of hardware, software and\/or firmware. Thus, for example, any of the example message interface , the example message queue , the example router interrogator , the example tunnel path analyzer , the example topology database interface  and\/or, more generally, the example tunnel monitor  may be implemented by one or more circuit(s), programmable processor(s), ASIC(s), PLD(s) and\/or FPLD(s), etc. Further still, the tunnel monitor  may include interfaces, data structures, modules, elements and\/or devices instead of, or in addition to, those illustrated in  and\/or may include more than one of any or all of the illustrated interfaces, data structures, modules, elements and\/or devices.","While example SNMP messages , ,  and  that may be exchanged between the example tunnel monitor  and any of the example routers R-R to interrogate the routers R-R to obtain and\/or collect TE tunnel path information are illustrated in , the example SNMP messages , ,  and  may be implemented using any number and\/or type(s) of other and\/or additional entries, fields and\/or data. Further, the entries, fields and\/or data illustrated in  may be combined, divided, re-arranged, eliminated and\/or implemented in any way. Further still, any of the example messages , ,  and  of  may include entries, fields and\/or data in addition to, or instead of, those illustrated in , and\/or may include more than one of any or all of the illustrated entries, fields and\/or data.","An example data structure that may be used to implement the example network and\/or tunnel topology database  of  is shown in . The example data structure of  includes a plurality of entries  for respective ones of a plurality of TE tunnel hops. In the example of , a portion  of the entries  corresponds to the new TE tunnel path information for TE tunnel  extracted from the response message  of .","To identify the headend router R-R for a TE tunnel, each of the example entries  of  includes a Head IP address field . Each of the example Head IP address fields  of  contains one or more numbers that represent an IP address.","To identify a TE tunnel, each of the example entries  of  includes a tunnel ID field . Each of the example tunnel ID fields  of  contains one or more alphanumeric characters that uniquely identify a TE tunnel of the network .","As shown in , each hop of a TE tunnel is given a numeric path sequence number . For example, the entries  of the example portion  are numbered sequentially as 1, 2 and 3 corresponding to the 1, 2and 3hops of the TE tunnel .","To identify the next router R-R of a TE tunnel, each of the example entries  of  includes tunnel path IP address field . Each of the example tunnel path IP address fields  of  contains one or more numbers that represent an IP address.","While an example data structure that may be used to implement the example network and\/or tunnel topology database  of  is illustrated in , the example topology database  of  may be implemented using any number and\/or type(s) of other and\/or additional entries, fields and\/or data. Further, the entries, fields and\/or data illustrated in  may be combined, divided, re-arranged, eliminated and\/or implemented in any way. Further still, the example topology database  may include entries, fields and\/or data in addition to, or instead of, those illustrated in , and\/or may include more than one of any or all of the illustrated entries, fields and\/or data.",{"@attributes":{"id":"p-0051","num":"0050"},"figref":["FIG. 10","FIGS. 1 and 2","FIG. 10","FIG. 10","FIG. 11","FIG. 10","FIG. 10","FIG. 10","FIG. 10"],"b":["120","100"]},"The example process of  begins with the example router interrogator  waiting for a TE tunnel change alert notification  to be received via the message interface  (block ). When there is a TE tunnel change alert notification  for a TE tunnel to be processed (block ), the router interrogator  determines whether the received notification  is more recent than the TE tunnel path information stored in the topology database  for that TE tunnel (block ). If the received TE tunnel change alert notification  does not correspond to more recent TE tunnel path information (block ), control returns to block  to process another TE tunnel change alert notification .","If the received TE tunnel change alert notification  corresponds to more recent TE tunnel path information (block ), the router interrogator  sends an SNMP query message, such as the example message  of , to request the Hop Table Index for the changed TE tunnel (block ). The router interrogator  waits for a response message, such as the example response message  of  (block ).","When a response message is received (block ), the router interrogator  sends a second SNMP query message, such as the example message  of , to request the Hop Table for the changed TE tunnel (block ). The router interrogator  waits for a second response message, such as the example response message  of  (block ).","When the response to the second SNMP query message is received (block ), the example tunnel path analyzer  parses the received response to extract the TE tunnel path information (block ), and the database interface  stores the extracted TE tunnel path information in the topology database  (block ). Control then returns to block  to process another TE tunnel change alert notification .",{"@attributes":{"id":"p-0056","num":"0055"},"figref":["FIG. 11","FIGS. 1 and 2"],"b":["100","0","3","110","115","120","140","100"]},"The processor platform P of the example of  includes at least one general purpose programmable processor P. The processor P executes coded instructions P and\/or P present in main memory of the processor P (e.g., within a RAM P and\/or a ROM P). The processor P may be any type of processing unit, such as a processor core, a processor and\/or a microcontroller. The processor P may execute, among other things, the example process of  to implement the example methods and apparatus described herein.","The processor P is in communication with the main memory (including a ROM P and\/or the RAM P) via a bus P. The RAM P may be implemented by DRAM, SDRAM, and\/or any other type of RAM device, and ROM may be implemented by flash memory and\/or any other desired type of memory device. Access to the memory P and the memory P may be controlled by a memory controller (not shown). One or both of the example memories P and P may be used to implement the example topology database  of  and\/or the example message queue  of .","The processor platform P also includes an interface circuit P. The interface circuit P may be implemented by any type of interface standard, such as an external memory interface, serial port, general-purpose input\/output, etc. One or more input devices P and one or more output devices P are connected to the interface circuit P. The input devices P and\/or output devices P may be used to, for example, implement the example message interface  and\/or the example database interface  of .","Although certain example methods, apparatus and articles of manufacture have been described herein, the scope of coverage of this patent is not limited thereto. On the contrary, this patent covers all methods, apparatus and articles of manufacture fairly falling within the scope of the appended claims either literally or under the doctrine of equivalents."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0004","num":"0003"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0005","num":"0004"},"figref":["FIG. 2","FIG. 1"]},{"@attributes":{"id":"p-0006","num":"0005"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0007","num":"0006"},"figref":["FIG. 4","FIG. 2"]},{"@attributes":{"id":"p-0008","num":"0007"},"figref":["FIGS. 5-8","FIGS. 1 and 2"]},{"@attributes":{"id":"p-0009","num":"0008"},"figref":["FIG. 9","FIG. 1"]},{"@attributes":{"id":"p-0010","num":"0009"},"figref":["FIG. 10","FIGS. 1 and 2"]},{"@attributes":{"id":"p-0011","num":"0010"},"figref":["FIG. 11","FIG. 10"]}]},"DETDESC":[{},{}]}
