---
title: Printing a plurality of print jobs of a group in a designated order
abstract: A print application () issues print job grouping start and end instructions to a print system (client) (). The print system (client) () reads out the job information spooled at the time of reception of a grouping start instruction from a spooler () and stores the information. The print system (client) () reads out job information spooled at the time of reception of a grouping end instruction from the spooler (). The print system (client) () then extracts jobs that do not coincide with the stored job information as print jobs to be grouped from the spooler () and outputs them.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07068388&OS=07068388&RS=07068388
owner: Canon Kabushiki Kaisha
number: 07068388
owner_city: Tokyo
owner_country: JP
publication_date: 20011004
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENT"],"p":["The present invention relates to a print system which receives a print instruction for a print job from the spooler of an operating system (OS), then spools the print job in the system again, and schedules the print job and, more particularly, to a method of causing a printer to execute print jobs for which a grouping instruction is generated in regular order in the group without allowing any interruption by another print job when a print system receives a print job grouping instruction from a print application.","Recently, as personal computers (PCs) have become remarkably popularized in offices, networking techniques for connecting them have advanced. Conventionally, upon use, printers are connected to PCs in a one-to-one correspondence. As is often the case recently, a printer is connected to a network to allow PCs connected to the network to share the printer.","Under the circumstances, a print system exists, which receives print data written in the printer language created by a printer driver from the spooler of the OS of a PC, and a print job including this print data is spooled again, thereby providing a print job control function more advanced than the function provided by the OS. A known example of the print job control functions is the job grouping function of grouping a plurality of print job by numbering them, and transmitting the grouped jobs to the printer in the set order.","In using the job grouping function in such a print system, print data corresponding to the grouped print jobs are to be transmitted to the printer in the set order.","When a print server is installed in a network, the print server receives a print job from a PC client connected to the network and causes a printer it manages to print, which is directly connected to the network. For this reason, while receiving a print job grouped by the job grouping function from a print application, the print server may receive a print job from another PC client. In this case, print jobs for group printing may be mixed with other print jobs.","In transmitting a plurality of print jobs for group printing from a PC client to the print server, therefore, demands have arisen for a print system having the function of grouping the print jobs into one print job using a job start instruction at the start and a job end instruction at the end.","As a method of realizing this requirement, the following may be used. When the job grouping function is designated by a PC client, print jobs to be grouped are received from the spooler of the OS of the PC client. These print jobs are then spooled again, and the printer driver groups them into one print job. With this operation, a plurality of print jobs can be grouped into one print job. This makes it possible to make a network printer print the grouped print data without any interruption by another print job.","In using the job grouping function in such a print system, a print application inputs print jobs to be grouped to the spooler of the OS upon instructing the print system having the job grouping function to start grouping. When all the necessary print jobs are input to the spooler, the application instructs the print system to end the grouping operation. Upon reception of a grouping start instruction from the print application, the print system executes grouping of the print jobs extracted from the spooler of the OS into one print job until the reception of a grouping end instruction by using a printer driver.","In this method, however, since there is a difference between the timing at which the print system receives a grouping start\/end instruction from an application and the timing at which print data is extracted from the spooler, the print jobs output as jobs to be grouped from the print application may not coincide with the print jobs to be grouped by the print system.","The present invention has been made in consideration of the above problem, and has as its object to provide a print control method and apparatus, a print system, and a storage medium, which can group print jobs in the manner designated by an application.","In order to achieve the above object, one aspect of the present invention has the following arrangement.","There is provided a print control apparatus for setting a plurality of print jobs as member jobs of a group job and continuously printing the member jobs included in the group job in a designated order, characterized by comprising","list forming means for comparing a grouping non-target list of print jobs spooled at the time of reception of a job grouping start instruction with a list of print jobs spooled at the time of reception of a job grouping end instruction, and forming a grouping target list by setting differences as print jobs to be grouped.","More preferably, this apparatus further comprises member forming means for, when a spooled print job is received, searching the grouping target list to determine whether the received job is a job to be grouped, and adding the job as a member of the group job if it is determined that the job is to be grouped.","More preferably, even if a spooled print job is received and the job is not contained in the grouping target list, the member forming means determines whether the print job is contained in the grouping non-target list, if the print job is received in a time interval between the instant at which a grouping start instruction is issued and the instant at which a grouping end instruction is issued, and adds the print job as a member of the group job if the job is not contained in the grouping non-target list.","More preferably, the member forming means adds a spooled print job to a print schedule if the print job is received after a grouping end instruction is issued.","Other features and advantages of the present invention will be apparent from the following description taken in conjunction with the accompanying drawings, in which like reference characters designate the same or similar parts throughout the figures thereof.","An embodiment of the present invention will be described below with reference to the accompanying drawings.",{"@attributes":{"id":"p-0036","num":"0035"},"figref":["FIG. 1","FIG. 1"],"b":["101","102","103","104","105","106","105","106","102"]},"The print server PC  is connected to the network  through a network cable. The print server PC  receives print data described in a printer language from the print client PCs , , and  and transmits the data to the printer .","The print client PCs , , and  are connected to the network  through a network cable, and transfer print data and print information to the print server PC .","The printer  is connected to the network  through a network interface. The printer  converts print data transmitted from the print server PC  into dot image page by page and prints them page by page. The network  is connected to the print server PC , print client PCs , , and , printer , and the like.",{"@attributes":{"id":"p-0040","num":"0039"},"figref":"FIG. 2","b":["101","102","103","104","200","201","202","203","204","205","206","207","208"]},"The CPU  executes the operating system (OS), print server program, and the like stored in the HD , and performs control to temporarily store information necessary for the execution of a program in the RAM . A basic I\/O program and the like are stored in the ROM . The RAM  serves as the main memory, work area, and the like of the CPU . As shown in , a print server program, a print system program including a print client program, or the like stored in the FD  can be loaded into the computer system through the FD drive  mounted in the computer or the like.","The contents of the FD  can be stored in a storage means such as the HD .  shows the arrangement of the contents stored in the FD . Referring to , data contents  of the FD  include volume information  indicating the arrangement of data, directory information , a program  constituted by program codes based on the flow chart of a print system program to be described in this embodiment, and associated data .","The HD  stores the OS, print application program, print server program, print client program, and the like. The keyboard  is used by a user to input device control commands and the like to the print client PCs  and . The display  displays the command input from the keyboard , a print state, and the like. The system bus  controls the flow of data in the print client PCs  and .","In this embodiment, the print system program and associated data are directly loaded from the FD  into the RAM  and executed. However, this program and data may be loaded from the HD  into the RAM  every time the print system program is operated from the FD . In addition, this print system program may be stored in a CD-ROM, IC memory card, or the like other than the FD. Furthermore, the print system program may be recorded on the ROM  and set as part of a memory map to allow the CPU  to directly execute it.",{"@attributes":{"id":"p-0045","num":"0044"},"figref":"FIG. 5","b":["202","501","502","503","504","500","505","200","501","205","202"]},{"@attributes":{"id":"p-0046","num":"0045"},"figref":"FIG. 6","b":["105","105","601","602","603","604","605","606","607"]},"The CPU  controls the overall apparatus. The ROM\/RAM  includes a buffer for temporarily storing a control program for controlling the CPU , constant data, and transmission\/reception data. The storage unit  is a storage means like, for example, a hard disk, and is used to store the data to be transmitted\/received, the control program executed by the CPU , and data. The display unit  displays the data temporarily stored in the ROM\/RAM , the contents of the data stored in the storage unit , an operation state, and the like. The printer printing unit  prints out dot data created by the CPU  on the basis of the program stored in the ROM\/RAM . The network interface  communicates print data and the like with an external unit such as a print server PC through the network interface. The communication line  serves to connect the network interface  to the network .",{"@attributes":{"id":"p-0048","num":"0047"},"figref":"FIG. 7","b":["102","104","101","703","705","704","707","706","708","709","709","710"],"i":["a ","b"]},"Referring to , the print application  notifies the print system (client)  through the print system API  of an instruction to start grouping, and transfers print jobs to be grouped to the spooler  by using the spooler API  provided by the OS. Upon transferring all the print jobs, the print application  notifies the print system (client)  through the print system API  of an instruction to end grouping.","The spooler  spools the print jobs received from the print application  into the HD , converts the print instructions contained in the print jobs into print instructions (device-dependent rendering functions) that can be interpreted by the printer driver, and transfers the rendering functions to the print system (client)  through the print system API .","The print system (client)  serving as a print control module according to the present invention converts the rendering functions received from the spooler  into print data through a printer driver (included in the print system (client) ), and spools the print data in the HD again. The print system (client)  then issues a print request to the print system (server) . The print system (server)  schedules the print request and issues a transmission permission to the print system (client). The print system (client)  receives the transmission permission from the print system (server)  and transmits the print data spooled in the HD to the network printer . In this case, the print data may be transmitted through the print system (server) . When the print data is transmitted to the network printer  through the print system (server) , the print system (server)  manages the scheduling of print jobs and transmits the print data received from the client to the network printer . When print data is to be transmitted from the print system (client)  to the network printer , the print system (client)  transmits print data to the network printer  in accordance with the schedule managed by the print system (server) .","In this case, the print system (client)  acquires the job information of the print jobs spooled by the spooler  from the spooler  through the spooler API .",{"@attributes":{"id":"p-0053","num":"0052"},"figref":"FIG. 8","b":["705","801","705","802","803","804","707","705","805"]},{"@attributes":{"id":"p-0054","num":"0053"},"figref":"FIG. 9","b":["707","705","901","705","902","703","903","904","905"]},{"@attributes":{"id":"p-0055","num":"0054"},"figref":"FIG. 10","b":["707","1001","1002","1003","1004"]},"In this case, examples of the status of a group are \u201cwait for scheduling\u201d (to be described in detail later) and \u201csending\u201d that indicates that print data (data, intermediate codes, and the like created by the printer driver) are being transmitted to the network printer .",{"@attributes":{"id":"p-0057","num":"0056"},"figref":"FIG. 11","b":["707","703","1101","902","902","1102","1103","903","1104","705","705","1105","905"]},{"@attributes":{"id":"p-0058","num":"0057"},"figref":"FIG. 12","b":["707","703","1201","705","1202","1203","705","905","1204","705","905","904","1001"]},"In step S, the grouping flag  of the print queue information is turned off. In step S, it is checked whether the grouping target list  of the print queue information includes any job having job information containing a group job ID coinciding with the current group job ID (which can be identified by the group ID  in the print queue information). If NO in ste S, the processing is terminated. If there is a job having hob information containing a group job ID coinciding with the current group jog ID, the status  of the group information is made to wait for scheduling, and the processing is terminated in S. The member jobs of the group which are made to wait for scheduling are sequentially scheduled by the print system (server)  and transmitted to the network printer .",{"@attributes":{"id":"p-0060","num":"0059"},"figref":"FIGS. 13 and 14","b":["707","705","707","705","703","707","707","705","703","707","707","705","703","707","707","705","905","904","902"]},"Upon reception of a print job from the spooler , the print system (client)  refers to the job ID of the print job received from the spooler  to check in step S whether the grouping target list  of the print queue information contains job information having a job ID coinciding with the job ID of the received print job. If YES in step S, the print system (client)  extracts the corresponding job information from the grouping target list  in step S. In step S, the print system (client)  checks whether group job information corresponding to the group ID set in the extracted job information is created. If NO in step S, the print system (client)  creates group information in step S. In step S, the print system (client)  adds the job information extracted from the grouping target list  of the print queue information to the member job list  of the group information. The print system (client)  checks in step S whether the grouping flag  is ON. If the flag is ON, the processing is terminated.","If it is determined in step S that the grouping flag  is OFF, it is checked in step S whether the grouping target list  of the print queue information includes any job having job information containing a group job ID coinciding with the current group ID. If NO in step S, the processing is terminated. If YES in step S, the status  of the group information is made to wait for scheduling in step S, and the processing is terminated. The member jobs of the group having statuses  made to wait for scheduling are sequentially scheduled by the print system (server)  and transmitted to the network printer .","If it is determined in step S that the print queue information includes no job information whose job ID coincides with the job ID received from the spooler , it is determined in step S that the grouping flag  in the print queue information is ON. If the grouping flag  in the print queue information is ON, it is checked in step S whether there is any job information whose job ID coincides with any job ID in the grouping non-target list  of the print queue information. If NO in step S, since the extracted print job is a print job to be grouped, the flow advances to the S. If it is determined in step S that there is job information whose job ID coincides with any job ID in the grouping non-target list  of the print queue information, the job information is deleted from the grouping non-target list  in step S, and the processing is terminated.","As described above, in the decision processing in step S, since a grouping non-target list is recognized in advance, even if a print job is received from the spooler before a grouping end instruction is received, i.e., before a grouping target list is completely determined, whether the received print job is a member of a group job or not can be determined depending on whether it is a print job (grouping non-target list) spooled at the time of the issuance of a grouping start instruction corresponding to the grouping end instruction. If this job is not included in the grouping target list, the job can be determined as a grouping target. This makes it possible to match a print job output as a grouping target from the print application with a print job to be grouped in the print system with a simple mechanism without establishing synchronization between the timing at which the print system receives a grouping start\/end instruction from the application and the timing at which the print system receives print data from the spooler.","If it is determined in step S that the grouping flag  of the print queue information is OFF, it is checked in step S whether the grouping target list  of the print queue information includes a job having job information containing a group ID coinciding with the current group job ID. If NO in step S, the processing is terminated. If YES in step S, the status  of the group information is made to wait for scheduling in step S, and the processing is terminated. The member jobs of the group which have the statuses  made to wait for scheduling are sequentially scheduled by the print system (server)  and transmitted to the network printer .",{"@attributes":{"id":"p-0066","num":"0065"},"figref":["FIG. 15","FIG. 12"],"b":["1204","1501","905","1502","705","1501","1502","1502","1503","1501"]},"With the mechanism described with reference to , upon reception of a grouping end instruction, the print system (client)  recognizes the difference between the job spooled state (indicating what jobs are stored) of the spooler  at the time of the reception of the previous grouping end instruction and the job spooled state of the spooler  at the time of the reception of the current grouping end instruction, and can determine a grouping target list by regarding print jobs corresponding to the recognized difference as grouping targets. Even if, therefore, the timing at which the print system receives a grouping start\/end instruction from the application differs from the timing at which the print system receives print data from the spooler, the print system can match a print job output as a grouping target from the application with a print job to be grouped in the print system with a simple mechanism.","According to another application example, the processing in  and associated processing may be performed by the hard disk and the like of the print server PC . More specifically, this arrangement can be implemented by letting the print server PC  have the function of the print system (client)  and having a means for allowing the print server PC  to browse the spooled state of an information processing apparatus serving as a grouping print instruction source.","Another form is also expected, in which an external information processing apparatus issues a grouping print instruction for a plurality of application data (data created by a wordprocessor, image data, EMF intermediate format files, and the like) stored in the hard disk and the like of the print server PC . In this case, the external information processing apparatus may have the function of issuing a print instruction to the print server PC . In addition, the print server PC  converts stored application data into a print instruction (device-dependent rendering function) that can be interpreted by the printer driver. In addition, the printer driver function converts this print instruction into print data that can be interpreted by the printer to make the printer device execute printing. In this case, it is expected that the print server PC  and the external information processing apparatus can communicate with each other through a LAN or Internet communication line.","As described above, the print system (client)  omits print jobs at the time of the generation of a grouping start instruction from print jobs at the time of the generation of a grouping end instruction, and the resultant print jobs are registered as the member jobs of the group. With this operation, print jobs to be grouped which are designated by an application can be grouped in the designated manner and can be output.","As has been described above, according to the present invention, by inputting print jobs to the spooler in the time interval between the instant at which an print application issues a grouping start instruction and the instant at which the application issues a grouping end instruction, the print system can group print jobs as designated by the application.","In addition, a group job including grouped print jobs as member jobs can be created.","Assume that a print job is received from the spooler in the time interval between the instant at which a grouping start instruction is issued and the instant at which a grouping end instruction is issued. In this case, if the print job is not a print job that is spooled before the grouping start instruction is issued, this print job can also be added to the member jobs of the group job.","If a print job as a member job of the group job is received from the spooler after a grouping end instruction is received, this print job can be scheduled.","As many apparently widely different embodiments of the present invention can be made without departing from the spirit and scope thereof, it is to be understood that the invention is not limited to the specific embodiments thereof except as defined in the appended claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The accompanying drawings, which are incorporated in and constitute a part of the specification, illustrate embodiments of the invention and, together with the description, serve to explain the principles of the invention.",{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIG. 15"}]},"DETDESC":[{},{}]}
