---
title: Gradually degrading multimedia recordings
abstract: A system including a recording device in which multiple lesser quality recordings of a program, e.g., recordings at a reduced bit rate, are determined by transcoding a high quality version of the program. Since transcoded recordings are determined with respect to the high quality version, they will have the best quality available for a given bit rate. The system allows a user to manage recordings by associating retention policies and relative ranking attributes with recordings, where a policy manager may use these associated policies and attributes to select which high and lesser quality copies of the program are retained over time, thus gradually degrading retained copies in accord with user preferences.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07840112&OS=07840112&RS=07840112
owner: Intel Corporation
number: 07840112
owner_city: Santa Clara
owner_country: US
publication_date: 20031008
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["FIELD OF THE INVENTION","BACKGROUND","DETAILED DESCRIPTION"],"p":["The invention generally relates to multimedia recording devices, such as video recorders which may digitally record program broadcasts, and more particularly to recording devices that may gradually degrade or reduce available quality of digital recordings to free up the recorder's storage space.","It is becoming common that cable television (CATV) systems, satellite television systems (SATV), and other multimedia environments, are providing digital video recorder (DVR) devices that may be used to record broadcasts. The DVR may be incorporated into a \u201cset-top box,\u201d e.g., a device responsible for breaking the CATV, SATV, etc. broadcast signal into selectable channels for presentation on appropriate multimedia hardware, e.g., a television, stereo, etc., or the DVR it may be in a separate device operating in conjunction with the set-top box, such as a recording device offered by TiVo Inc. of Alviso, Calif.",{"@attributes":{"id":"p-0004","num":"0003"},"figref":"FIG. 1","b":["100","102","104","102","108"]},"In the description that follows, a personal video recorder (PVR) is disclosed allowing consumers, e.g. program viewers, to record television shows and other broadcast data to a local mass storage device. It is assumed the PVR records television broadcasts and other multimedia data in a digital format to a hard drive, however it will be appreciated that other recording formats and hardware may be used. Broadcasts may be received from any data source, including CATV, SATV, terrestrial broadcast, wired or wireless computer network, the Internet, etc. It will be appreciated that the PVR is not limited to video data, and in addition to recording television shows, that the PVR may also record a variety discretely identifiable data, including electronic program guides, computer software, and other data having a predefined size and\/or broadcast time slot. However, for expository convenience, the following discussion focuses on receiving and recording television shows.","Recording a program to a hard drive allows at least two benefits. A first is ability to time-shift viewing the program. A second is allowing a broadcast currently being viewed to be manipulated as if already recorded, e.g., it may be paused, where further received data is spooled to the hard drive, or rewound so that previously recorded portions may be reviewed, or fast forwarded up to the current recording point for the program, etc. However, since programs are being recorded to storage having finite size, the PVR requires a mechanism to manage the lifetime of content on the hard drive. Without intervention, available recording space eventually will be fully consumed as discussed above with respect to . In illustrated embodiments, to delay filling up the hard drive, a storage manager can be used that monitors recorded data and that applies one or more policies designed to automatically reduce storage requirements.",{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 2","b":"200"},"System level and\/or targeted policies are then inspected  to determine which one or ones apply to the identified  program. An exemplary system level policy may be to automatically delete all programs after some period of time, e.g., 2 days, unless the program has been flagged as being special. Such a policy provides for automatically freeing hard drive space for new recordings. A variation would be to first-delete after the period of time programs that have been viewed, thus delaying automatic deletion of unseen programs. Other system policies may be defined for program types\/classes to order automatic deletions according to user interests, e.g., a system policy may indicate automatically deleting soap operas first, then talk shows, then kids shows, then science shows, etc.","Targeted policies and\/or attributes may be associated with a particular program to control its retention, and (perhaps optionally) to override system level policies. For example, one policy may indicate an associated program is to be kept at least until a certain date. Another policy may indicate that an associated program is never to be deleted unless manually deleted. Attributes associated with a program may include designating a recording as being \u201clong,\u201d \u201cmedium,\u201d or \u201ctemporary\u201d term, thus allowing a relative ranking of the importance of a particular recording as against other recordings. Thus, if in order to satisfy a policy only one of two stored programs needs to be deleted to make room for a new recording, a \u201ctemporary\u201d term recording would be deleted before deleting a \u201clong\u201d term recording.","Another policy, which may be applied as a general system policy, or as a targeted policy, is a policy directing that a recording be gradually degraded over time. Degrading quality may occur in a variety of ways, and may depend on how the program is recorded on the hard drive. For example, assuming a single recording of a program has been made at a certain quality level (bit rate) level, the policy may direct that the recording be dynamically re-recorded at a lower quality setting to free up storage space (see ). If multiple recording qualities of the program have been recorded (see ), the policy may direct that one of the quality levels be deleted to free storage space. Then, as time progresses (see ), successive highest quality level recordings may be deleted while still leaving a recording of some quality available for viewing.","It will be appreciated that the above described policies are exemplary only, and many other system and targeted policies may be used, and that policies may be associated with programs as well as users. That is, assuming user identify is known or may be inferred, e.g., such as from usage patterns, more restrictive policies may, for example, be applied to recordings associated with children.","If  a policy is determined to be applicable to the identified  program, then the policy is applied to the program in accord with the policy, e.g., the program is deleted, re-recorded, one of multiple recordings deleted, etc. If no policy is determined as being applicable, then optionally as shown in the illustrated embodiment, a user may be prompted to see if  manual user action is desired, e.g., does a user want a certain action performed on the recording. Of course, since the PVR is likely operating automatically, prompting the user may occur in a variety of ways, including temporarily displaying a dialog to gain the attention of a user if any is present, displaying a symbol on a television display (or other output) indicating user action is solicited, or taking other action to log or otherwise notify a user. Assuming user action is desired, the user action may then be performed .",{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 3"},"For example, assume a system level policy is presently in place requiring recorded programs to be re-recorded after two weeks as a lower-quality recording. This policy may be deemed too lax and thus selected  for editing with a policy editor component of the PVR or other device having access to the hard drive, e.g., a computer. After editing the policy, such as to change the two week timeout into a five day timeout, a test may be performed to determine if  the change affects any stored programs. For example, there may be programs that were recorded at least five days ago, but that have not yet been stored for two weeks, and these programs, according to the revised policy, now require re-recording at a lower quality.","After determining the editing affects a recorded program, the recorded program is then adjusted  according to the terms of the edited policy. It will be appreciated that there may be any number of policies regarding recorded programs. It is assumed editing a policy results in affected recordings being appropriately altered in accord with changes to a policy.",{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 4"},"As illustrated, a first operation is receiving  a program, such as a broadcasted television program, and. As discussed above, a policy may be employed to automatically delete certain quality levels to free up storage space. As illustrated, the received program is recorded  and stored in a high-quality (HQ) mode. In a digital transmission environment, storing the HQ copy may simply entail writing the received digital transmission to the hard drive. In an analog environment, the received program required conversion to digital. In addition to storing the HQ copy, one or more lower-quality (LQ) copies may also be determined and stored. As illustrated, the received  program is transcoded  into the LQ copy or copies for storage.","In some embodiments, programs may be recorded with four quality levels, one being the HQ copy, along with three LQ copies. In these embodiments, the HQ copy is stored using approximately eight megabytes of data to encode an hour of a recording, and each LQ copy respectively encodes an hour of the program with four, two, and 1 megabyte, where one megabyte per hour represents the worst quality recording that may be available for viewing. As will be appreciated by one skilled in the art, reduction in data storage requirements necessarily require loss of detail and typically results in visual artifacts. In a digital transmission environment, each LQ copy is derived from the received  program, rather than from another LQ copy. In an analog environment, the LQ copies are each derived from the initial HQ copy. In such fashion, the errors\/data loss inherent to transcoding the program into one LQ copy may be minimized by working with the best available representation of the program.","Although illustrated embodiments show storing copies of a program as separate copies of some quality, it will be appreciated that the copies may be stored as a single scalable bitstream, e.g., a video sequence having multiple streams corresponding to different levels of detail for the video sequence, where choosing a all or a subset of the levels of detail results in a different valid bitstream which will play back with different quality. For example, a resolution scalable bitstream may have a \u201cbase layer\u201d that corresponds to a standard-definition (720\u00d7480) video sequence, and an \u201cenhancement layer\u201d that provides additional information needed to represent a high-definition version of the same signal. When the full scalable bitstream (base+enhancement layer) is available, either the high definition broadcast or the standard definition broadcast may be viewed. If the enhancement layer is deleted, e.g., to free up storage space, the remaining standard definition version could be viewed. Generically, the video bitstream includes a number of layers, where deleting a higher \u201cenhancement\u201d layers degrades stored quality.","Or, for example, the program copies may be recorded as a MPEG-4 (Moving Picture Experts Group) Fine Granularity Scalable (FGS) data stream, which encodes video frames into multiple layers, including a base layer of lower quality video along with several enhancement layers containing increasingly more detailed video data to enhance the base layer and provide resulting video of increasingly higher quality. A video bitstream may be created such that any number of bytes may deleted from certain portions of the bitstream, with the effect that the video slowly degrades, but is still a valid sequence. So for example, if a single video frame contains 1000 bytes, the last 400 bytes may be deleted to leave a 600 byte frame with reduced quality. It will be appreciated these are exemplary scalable bitstream examples, and that other scalable bitstream techniques may be employed, and that retention policies, degradation policies, etc. are applicable to individually stored copies of a program as well as scalable bitstreams.","After recording the program with HQ and transcoded LQ copies (dashed arrow  represents possible passage of time, e.g., seconds, hours, days, etc. until a policy is applicable), as discussed above with respect to , available policies are inspected  to see what policies (if any) are applicable to the recorded programs, and one is selected .","In the illustrated embodiment, the selected policy is a \u201cTimeout vs. Available Storage\u201d policy. For the purposes of this illustration, it is assumed the policy compares recording times with storage space, and when storage space is deemed to be running low, certain recordings are deleted to make room for new recording. This process is illustrated and discussed with respect to . It will be appreciated that various techniques may be employed in determining a low space condition, such as available storage space, percentage of available storage space, estimated storage space required for future scheduled recordings versus available storage space, etc. It will be appreciated available storage space may be determined at a particular moment in time, e.g., what is available as a policy executes, or determined with respect to estimated future free space due to policies to be applied in the future.","Thus, a test is performed to determine if  the Timeout vs. Available Storage policy should be applied to the recorded ,  program. If the policy is to be applied to the recorded program, then a copy of the program is deleted . Or, in the case of scalable bitstreams, an enhancement layer may be deleted, or one or more layers recoded to a lesser quality. In one embodiment, the Timeout vs. Available Storage policy operates by identifying the highest stored copy of the program and then deleting that copy. Thus, if a program was stored with four quality levels using eight, four, two and 1 megabytes of data to encode an hour of the program, if all four quality levels were available on the hard drive, applying the policy results in deleting the eight megabyte per hour copy of the program.",{"@attributes":{"id":"p-0033","num":"0032"},"figref":["FIG. 5","FIG. 4"],"b":"500"},"A stored program is selected , e.g., by way of the remote, controls on the PVR, programmatically by another device, etc., and responsive to selection, a search of the hard drive is performed to identify  the best available copy of the selected program. The best available copy is then played.",{"@attributes":{"id":"p-0035","num":"0034"},"figref":"FIG. 6","b":["600","602","604"]},"It will be appreciated that the input video signal may be an analog signal, an analog signal encoding digital data, or a digital signal, depending on the transmission environment carrying the signal. If the input is digital, then the video encoder may essentially operate as a pass-through device, performing little if any alteration to the input. However, if the input is analog, then the video encoder is presumed to perform an analog-to-digital conversion. If the input is an analog encoding of a digital signal, the video encoder is presumed to extract the digital signal from the analog input. The HQ output of the video encoder is stored in a hard drive . In one embodiment the output is an MPEG encoding of the video input. For more information about MPEG encodings, see the MPEG Standards web page at Internet URL (uniform resource locator) www#chiariglione#org\/mpeg\/standards#htm (to prevent inadvertent hyperlinks, periods in the preceding URL were replaced with hash marks).","The video encoder HQ output is also provided to a transcoder  which converts the input into multiple LQ copies  corresponding to encodings of the input  HQ at lesser quality bit rates than used for the HQ copy of the input. It will be appreciated that the transcoder may operate in real time, or in a delayed processing mode in which the HQ copy is processed later, perhaps overnight during idle-time. The transcoder output is also stored in the hard drive . When a viewer\/user elects to view the received program, as discussed with respect to , a highest quality version of the program currently stored on the hard disk is retrieved and provided to a video decoder . The video decoder is responsible for converting, if necessary, the stored digital representation of the program into a video output  format suitable for display. It will be appreciated that a display may be capable of directly receiving the digital representation of the program read from the hard disk , and consequently the video decoder may essentially operate as a pass-through device, performing little if any alteration to the output.","In addition to these basic components, in the illustrated embodiment there is also a storage manager  responsible for applying data retention policies  to programs stored in the hard disk . As discussed with respect to , the storage manager compares available policies with stored programs, and if a policy is applicable, then a stored program is adjusted or deleted in accord with the policy. As discussed above, based on policies associated with recorded programs, the storage manager may monitor utilization of the hard drive, and when space is needed, the storage manager will delete a version of a show to free up space. The storage manager will choose the show version to delete based on the policy mechanism and the amount of space that will be freed when deleting the content. While the storage manager is illustrated as accessing policies  in a data store separate from the hard disk , it will be appreciated that the policies may be stored in the hard disk.","In the illustrated embodiment, initial quality settings  may be input by a user for each show that is to be recorded, or selected by default. These quality settings influence the bit rate and thus disk usage of the various recorded copies of the program, e.g., the settings determine the recording of a program at 8\/4\/2\/1 megabytes per hour. It will be appreciated that these recording bit rates are arbitrarily selected for expository convenience and that other bit rates may be used. Additionally, it is not required that the same bit rate be employed throughout a program recording, e.g., less desirable portions of a program such as commercials may be recorded at a lesser quality bit rate.","As discussed above with respect to , various policies and attributes may be associated with a recorded program, affecting how the program is deleted to satisfy policies. For example, if a user chooses image quality settings  indicating a desire to record a program at high quality and to designate it a \u201clong\u201d term recording, the content would be recorded at multiple bit rates, and the high bit rate versions would be saved for a longer period of time. But, if the user chooses to record at high quality but only designates the recording as \u201cmedium\u201d term, the same bit rates may be used to encode the recording, but the higher bit rate clips would be deleted more quickly. The storage manager  uses data from both the quality settings and associated longevity attributes or policies to determine which versions of the video content to delete when space is needed.",{"@attributes":{"id":"p-0041","num":"0040"},"figref":["FIG. 7","FIG. 6"],"b":["700","702","704","620"]},"If a first program  is recorded at high quality and medium longevity, in the illustrated embodiment, four copies of the program are stored occupying respectively one, two, four and eight gigabytes (GBs), for a total of 15 GB for all versions. When a second program  show is recorded at high quality and long longevity, because the second program is ranked higher relative to the first program, the eight GB version of the first show is deleted to free up space for the second program. At this time, if a user elects to watch the first program , they four GB copy of the program will be viewed. If the third  and sixth  programs are recorded with good quality and short longevity, only four, two, and one GB copies of the programs are initially stored. If the fourth  and fifth  programs are recorded at high quality and short longevity, these are both initially recorded with eight GB HQ copies.","The illustration shows how a PVR system may balance longevity and disk usage to keep versions of programs available as long as possible at quality levels maximized to the interest of a user's designated interests. For example, since the second program  was designated high quality and long longevity, its highest quality recording was retained on disk longer than the first program's  highest quality recording. It is only after a week or so that the second program's highest quality recording is deleted to make room for the fourth program . Note that the second programs' long term four GB copy is retained while the third program's  short term four GB copy is deleted. Also note that even though disk space has been freed multiple times in the illustrated embodiment, all siz programs remain available on the PVR, albeit at varying degraded qualities as compared to the original video encoder output.",{"@attributes":{"id":"p-0044","num":"0043"},"figref":"FIG. 8"},"As used herein below, the term \u201cmachine\u201d is intended to broadly encompass a single machine, e.g., an entirely self-contained PVR, or a system of communicatively coupled machines or devices operating together, e.g., one device may comprise the  video encoder , storage , transcoder , and video decoder , while a separate communicatively coupled device comprises the storage manger  and\/or policies . Exemplary machines include computing devices such as set-top boxes, personal computers, workstations, servers, portable computers, handheld devices, e.g., Personal Digital Assistant (PDA), telephone, tablets, etc.","An exemplary machine  embodying a PVR typically includes a system bus  to which is attached one or more processors , memory , e.g., random access memory (RAM), read-only memory (ROM), or other state preserving medium, storage devices , video interface , e.g., for video input or video output, and input\/output interface ports . The machine may be controlled, at least in part, by input from conventional input devices, such as remote controls, buttons on the PVR, keyboards, mice, etc., as well as by directives received from another machine, a virtual reality (VR) environment, biometric feedback, or other input or signal.","The machine may include embedded controllers, such as programmable or non-programmable logic devices or arrays, Application Specific Integrated Circuits, embedded computers, smart cards, and the like. The machine may utilize one or more connections to one or more remote machines ,  delivering data to or otherwise interacting with the machine, such as through a network interface , modem , or other wired or wireless communicative coupling. Machines may be interconnected by way of a physical and\/or logical network , such as an intranet, the Internet, local area networks, and wide area networks. It will be appreciated that communication with network  may utilize various wired and\/or wireless short range or long range carriers and protocols, including satellite, microwave, radio frequency (RF), Institute of Electrical and Electronics Engineers (IEEE) 802.11, Bluetooth, optical, infrared, cable, laser, etc.","The invention may be described by reference to or in conjunction with associated data including functions, procedures, data structures, application programs, etc. which when accessed by a machine results in the machine performing tasks or defining abstract data types or low-level hardware contexts. Associated data may be stored in, for example, volatile and\/or non-volatile memory , or in storage devices  and their associated storage media, including hard-drives, floppy-disks, optical storage, tapes, flash memory, memory sticks, digital video disks, etc. Associated data may be delivered in the form of packets, serial data, parallel data, propagated signals, etc., and may be used in a compressed or encrypted format. Associated data may be used in a distributed environment, and stored locally and\/or remotely for access by single or multi-processor machines.","Having described and illustrated the principles of the invention with reference to illustrated embodiments, it will be recognized that the illustrated embodiments can be modified in arrangement and detail without departing from such principles. And, though the foregoing discussion has focused on particular embodiments, other configurations are contemplated. In particular, even though expressions such as \u201cin one embodiment,\u201d \u201cin another embodiment,\u201d or the like are used herein, these phrases are meant to generally reference embodiment possibilities, and are not intended to limit the invention to particular embodiment configurations. As used herein, these terms may reference the same or different embodiments that are combinable into other embodiments.","Consequently, in view of the wide variety of permutations to the embodiments described herein, this detailed description is intended to be illustrative only, and should not be taken as limiting the scope of the invention. What is claimed as the invention, therefore, is all such modifications as may come within the scope and spirit of the following claims and equivalents thereto."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The features and advantages of the present invention will become apparent from the following detailed description of the present invention in which:",{"@attributes":{"id":"p-0006","num":"0005"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0007","num":"0006"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0008","num":"0007"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 8"}]},"DETDESC":[{},{}]}
