---
title: Systems and methods for estimating an image marking process using scanned image attributes
abstract: Methods and systems used to automatically identify the marking process used for an image on a substrate based on spatial characteristics and/or color of the image. Image types which are classified and identified include continuous tone images and halftone images. Among halftone images separately identified are inkjet images, xerographic images and lithographic images. Locally adaptive image threshold techniques may be used to determine the spatial characteristics of the image.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07453604&OS=07453604&RS=07453604
owner: Xerox Corporation
number: 07453604
owner_city: Norwalk
owner_country: US
publication_date: 20030630
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF EXEMPLARY EMBODIMENTS"],"p":["1. Field of Invention","This invention relates to automatically identifying a marking process used to form an image on a substrate.","2. Description of Related Art","In order to accurately calibrate a scanner, such as, for example, a color scanner, that scans an image carried on a substrate, different calibration transformations are required depending on the marking process, such as, for example, photography, inkjet printing, xerography, lithography and the like, and materials, such as, for example, toner, pigment, ink, etc., that are used to form the image on the substrate. For example, a calibration transformation that is used to calibrate the scanner for a photographic image is different from a calibration transformation that is used to calibrate the scanner for an ink jet-printed image, which is in turn different from a calibration transformation that is used to calibrate the scanner for a xerographically-formed image or for a lithographically-formed image.","Typically, a user wishing to scan an image determines the marking process used to form the image from prior knowledge of the marking process, manually identifies the marking process such as, for example, photographic, ink jet, xerographic or lithographic, and uses the marking process information to set the scanner so that an appropriate calibration can be used. The manual identification is commonly done using different descriptions, such as Halftone vs. Photo vs. Xerographic Copy on the user interface from which different machine settings are inferred.","Approaches to automatically identifying the marking process are disclosed in U.S. Pat. Nos. 6,353,675 and 6,031,618, each of which is incorporated herein by reference in its entirety. The approach to automatically identifying the marking process disclosed in the 618 patent uses additional spectral information from the scanned material obtained through additional spectral channels. The approach used to automatically identify the marking process disclosed in the 675 patent involves an image spatial analyzer that analyzes image data corresponding to the image to determine at least one spatial characteristic based on a power spectrum of the image data and a marking process detection system that detects the marking process based on the at least one spatial characteristic.","It would be desirable to perform analyses of the scanned image data directly from the scanned data, that is, without using any additional resources, to identify the marking process used to form that image. The inventors have determined that images carried on substrates exhibit unique spatial characteristics that depend upon the type of marking process used to form those images.","This invention provides methods and systems that automatically identify a marking process based on spatial characteristics of the marked image.","This invention separately provides systems and methods that automatically identify a marking process without the need to add one or more additional sensors.","This invention separately provides systems and methods that automatically identify a marking process without the need to use any additional data beyond that obtainable from the marked image using the standard scanner sensors.","This invention separately provides methods and systems that automatically differentiate between continuous tone and binary marking processes. Here, it is understood that binary marking processes can be obviously extended to marking processes locally using a small number of levels as it is done for example some in 7 or 8 head inkjet printing devices. The terms binary and halftone are used throughout this application to include those systems.","This invention separately provides methods and systems that automatically differentiate between different types of binary image marking processes, including, for example, inkjet marking processes, xerographic marking processes, and lithographic marking processes.","In various exemplary embodiments of the systems and methods according to this invention, continuous tone and halftone process images are ed by examining local variations of the input data, including using local variants as an estimator for local variations of the input data. In various other exemplary embodiments of the systems and methods according to this invention, image spatial characteristics are identified by checking for halftone dot periodicity in the image. In various other exemplary embodiments of the systems and methods according to this invention, frequency, frequency relationships, and\/or noise characteristics of scanned image data are employed to identify the image marking process. In various other exemplary embodiments of the systems and methods according to this invention, a determination whether or not the image has an underlying halftone rendition with a clustered or dispersed character may be performed.","These and other features and advantages of this invention are described in, or are apparent from, the following detailed description of various exemplary embodiments of the systems and methods according to this invention.","The inventors have determined that there is a strong correlation between the input media type and a number of measurable spatial image attributes obtainable directly from the scanned image data itself. Because there is a strong correlation between the input media type and these measurable spatial image attributes, the marking process used to form the scanned original can be ascertained, with a relatively high degree of confidence, from the statistical spatial properties of the scanned image data.","Typically, photographic printing, as well as any other analog image printing process, is a continuous tone, or \u201ccontone\u201d, marking process. Binary printing, however, typically involves a halftone process. Inkjet printing, for example, primarily or typically uses error diffusion\/stochastic screens, while xerography, including color xerography, primarily or typically uses line-screens and\/or clustered dot screens, and lithography primarily or typically uses clustered-dot rotated halftone screens. It should be appreciated that any of these binary marking techniques could have one of these halftone processes. However, the choices outlined above are predominant in typical usage, because of image quality and stability considerations.","Black and white images have variations in lightness and darkness. Color images have variations in color. Whereas variations in continuous tone images arise from variations in image data, halftone images have variations both from the image data and from the halftone reproduction process itself. Variations arising from the image data typically occur over much larger scales than the variations occur in halftone processes. Therefore, over a small scale, continuous tone images, such as photographic images, typically have a much smaller variation than do halftone images. Based on this, various exemplary embodiments of the systems and methods according to this invention look at local variations within the scanned image data to identify which marking process was used to render the image. That is, various exemplary embodiments of the systems and methods according to this invention look at local variations within the scanned image data to determine whether a continuous tone or photographic image marking process was used, or whether a halftone marking process was used. That is, in various exemplary embodiments of the systems and methods according to this invention, continuous tone image marking processes are differentiated from halftone image marking processes by examining local variations of the marked image input data.",{"@attributes":{"id":"p-0028","num":"0027"},"figref":["FIG. 1","FIG. 1"],"b":["100","100","105","110","120","125","115","116"]},"This distinction coincides with the distinction between a photograph or other analog image marking process and a binary image marking process. That is, determining continuous tone image data would imply that the image marking process for the scanned image data is a photo process, i.e., that the image is a photo .","Detecting a halftone marking process  would imply that the image marking process for the scanned image data is an ink-jet marking process , a xerographic marking process , an offset marking process , or the like.","In the exemplary embodiment of the decision tree  shown in , the next decision point  differentiates between the various halftone image marking processes ,  and  by examining the spatial characteristics of the scanned image data to determine whether the data has a dispersed\/aperiodic character  or a clustered\/periodic character .","Detecting data having a dispersed\/aperiodic character would imply that the image marking process for the scanned image data is an ink-jet marking process , i.e., that the image is an ink-jet image . On the other hand, detecting data having a clustered\/periodic character would imply that the image marking process for the scanned image data is a xerographic marking process , an offset marking process , or the like.","In the exemplary embodiment of the decision tree  shown in , the next decision point  differentiates between a xerographic marking process  and an offset marking process  by examining the data frequency distribution or internal structure of the scanned image data. Image data internal structure examples that may be considered include determining whether the image data has a line structure as contrasted with a rotated structure, whether the halftone dots have a high frequency structure versus a low frequency structure, and whether the halftone screen noise is high or low.","Detecting image data having a low frequency\/high noise character  would imply that the image marking process for the scanned image data is a xerographic marking process  that was used to create a xerographic image . On the other hand, detecting image data having a high frequency\/low noise character  would imply that the image marking process for the scanned image data is an offset, or lithographic, marking process  that was used to generate an offset printed\/lithographic image .","The decision tree of  is not intended to imply that data can not be reevaluated. In some cases, for example, data identified as ink-jet  might still be evaluated with respect to the data frequency distribution  and the result of this being used to verify, harden or reexamine the identification of the marking process of the image as an ink-jet marking process . The additional burden with respect to speed, processing time, etc. for verification is system dependent and might be negligible, in which case reexamination is advantageous. In other cases, a strict structure like the one shown in  is advisable. In addition, as will be appreciated by those skilled in the art, the decision process can be applied to the entire image as a single determination or can be applied individually or to parts of the image. These independent image portions may be determined by segmenting the image through an independent process. Furthermore, the decision process may be independently applied to small regions of the image and the results from these regions may then be pooled or combined to determine an image marking process. This pooling or combination can further use a measure of confidence for each region when determining the overall marking process.",{"@attributes":{"id":"p-0036","num":"0035"},"figref":["FIG. 2","FIG. 2","FIG. 2","FIG. 2"],"b":["210","220","230","240","210","220","240","220","230","240","230","240"]},{"@attributes":{"id":"p-0037","num":"0036"},"figref":["FIG. 3","FIG. 1","FIG. 3","FIG. 1","FIG. 3"],"b":["310","320","330","310","310","315","315"]},"The second decision block  of  differentiates between an ink-jet image forming process  and other halftone image marking processes, such as, for example, a xerographic image marking process , an offset or lithographic image marking process , or the like. This is accomplished by examining various spatial characteristics of the scanned image data to determine whether the data has a dispersed\/aperiodic character or a clustered\/periodic character. In various exemplary embodiments, the second decision block  differentiates between an inkjet image marking process , and a xerographic image marking process  or an offset image marking process  by evaluating the rendering uniformity and periodicity of the observed spatial variation of the halftone dots to discriminate between clustered and dispersed dot rendering methods.","For example, inkjet-formed marking processes  use mainly distributed dot techniques, such as, for example, error diffusion, stochastic screening and\/or blue noise screening. These processes commonly do not have a single fundamental periodicity across all gray levels. However, distributed dot techniques are extremely uncommon for xerographic image marking processes  or for lithographic or offset image marking processes . Xerographic image marking processes  and lithographic or offset image marking processes  typically use clustered halftone dot techniques that have a dot periodicity that is not a function of the input level. At the same time, distributed dot techniques have a higher uniformity than do clustered dot techniques.","The third decision block  of  differentiates between xerographic image marking processes  and offset or lithographic image marking processes  by analyzing frequency and noise characteristics of the scanned data. In one exemplary embodiment, the third decision block  differentiates between xerographic image marking processes  and offset or lithographic image marking processes  by evaluating the symmetry and frequency of the halftone dots. In general, line screens are common in xerographic image marking processes , but are uncommon in offset or lithographic image marking processes . Rotated dot schemes are also common in xerographic image marking processes. Based on these tendencies, the absolute frequency of the input screen, and its noise characteristics can be analyzed as part of the third decision block . In particular, high frequency, low noise screens may be associated with offset or lithographic image marking processes , while low frequency, high noise screens may be associated with xerographic image marking processes .","As noted above, in various exemplary embodiments of the systems and methods according to this invention, a group of pixels from a fairly small block or sub-region that may be considered to be roughly homogenous in terms of color or gray value can be examined. Since the image has no spatial variation over a homogeneous region, the spatial structure in the halftoned version of the image is entirely due to the halftoning technique. Such regions are therefore useful for analyzing the underlying halftone technique without interference from the image content. Often binarizing a related group of pixels in the block will reveal the spatial arrangements that take place in the image marking process, that is, halftone marking process or continuous tone marking process. Accordingly, in various exemplary embodiments of the systems and methods according to the invention, a block of a related group of image pixels is binarized to create a map that is indicative of image marking processes.",{"@attributes":{"id":"p-0042","num":"0041"},"figref":["FIG. 4","FIG. 4"],"b":["1000","1100"]},"Then, in step S, the one or more image data blocks are selected to be analyzed or processed. In various exemplary embodiments of the methods and systems according to this invention, to obtain low-noise data, data blocks or areas that represent constant or near constant image data are preferably selected in step S. This tends to exclude image edges, paper background, and the like.","Next, in step S, each of the selected one or more image data blocks is processed to generate one or more data statistics for that image data block. In various exemplary embodiments of the methods and systems according to this invention, the one or more data statistics generated for the one or more image data blocks may include determining an average or mean value of the pixels for the image data block being processed, determining a variance value of the pixels for the image data block, determining the extremes, such as, for example, the minimum value, min, and maximum value, max, of the pixels for the image data block, generating histograms of the data being processed, and performing various data evaluations using the determined statistical values and histograms. To estimate if the input has significant and consistent periodicity, it is particularly beneficial to locate local minima along traversals through the image block, determine the distances between successive minima, and determine histograms of these inter-minima distances. A strong peak in a histogram of inter-minimum distances indicates that a large number of minima are separated by a constant period, thereby implying periodicity. Local maxima can similarly be used, and a decision between the use of minima and maxima may be made based on image level, for instance. Operation then continues to step S.","In step S, the one or more data statistics generated for the one or more image data blocks are compared with image data statistics already determined and provided in an image data statistics model. Next, in step S, the results of comparing the one or more data statistics generated in step S for the one or more image data blocks are used to determine the specific image marking process used to format the image. Operation then continues to step S, where operation of the method stops.","It should be appreciated that, in various exemplary embodiments, step S can be omitted. In this case, operation of the method would proceed directly from step S to step S. In general, step S can be skipped.",{"@attributes":{"id":"p-0047","num":"0046"},"figref":["FIG. 5","FIG. 4","FIG. 5"],"b":["1300","1310"],"sub":["a ","a ","a "]},"Then, in step S, various data evaluations are performed using the determined statistical values or parameters. In one exemplary embodiment of the methods and systems according to this invention, data evaluations may include determining a ratio of the area variance #to mean <A> determined for a given block, determining the distribution of the mean values <A> for large pixel areas, comparing the determined mean value <A> to the determined minand\/or maxvalues, determining a distance between local maxima\/minima, and the like.","Next, in step S, histograms are generated using the results of the data evaluations performed in step S. Then, in step S, operation returns to step S.",{"@attributes":{"id":"p-0050","num":"0049"},"figref":["FIGS. 6 and 7","FIG. 4","FIGS. 6 and 7"],"b":["1500","1505","1505"]},"Then, in step S, a determination is made whether the image data evaluated exhibits high local variation. As discussed above, a continuous tone image, for example, a scanned photographic image, exhibits a much smaller local variation than halftone images, such as, for example, an inkjet-formed image, a xerographically-formed image or a lithographically-formed image. If the image data does not exhibit high local variation, it is likely that the image marking process used to form the image is a continuous tone image marking process or the image data contains significant background noise. It should be noted that in any image marking process, some local areas might exhibit low variance, for example in image highlight and shadow regions, or in other solid color areas. Accordingly, if the image data does not exhibit high local variation, operation continues to step S. If image data exhibits high local variation, operation continues to step S.","As shown in , in step S, a distribution of the mean value over large data blocks\/areas is determined or analyzed to distinguish between a continuous tone image marking process and background noise. Next, in step S, a determination is made whether the distribution of the mean value is characteristic of a continuous tone marking process. If so, operation continues to step S. Otherwise, operation jumps to step S. In step S, the image marking process is identified as or determined to be a photographic image marking process. Operation then jumps to step S. In contrast, in step S, the image data is identified and\/or classified as background noise. Operation then also jumps to step S. It should be appreciated, that, if the background data blocks were not suppressed, their classification as \u201cphoto\u201d data blocks could swamp all rendering-derived image signatures.","As shown in , in step S, the image data is evaluated for its periodicity characteristics. In various exemplary embodiments of the methods and systems according to this invention, in step S, the data block mean value is compared to the determined minand maxvalues to distinguish the minority pixels in the distribution. The minority pixels are generally either light pixels on a dark background or dark pixels on a light background. This distinction is made as noise suppression, such that only minority pixels are analyzed further because the halftone characteristics are better identified by considering the distribution of the minority pixels.","Next, in step S, a determination is made whether the evaluated image data has a clustered character with high periodicity. If image data does not have high periodicity, operation continues to step S. Otherwise, operation jumps to step S. In step S, the image marking process used to create the scanned image is determined to be an inkjet image marking process. As discussed above, inkjet-based marking processes use mainly distributed dot techniques, such as, for example, error diffusion, stochastic screening, frequency modulation, and\/or blue noise screening, which do not have a single fundamental periodicity across all gray levels. Operation then jumps to step S.","In contrast, in step S, the frequency and noise characteristics of the scanned image data are evaluated to further distinguish between a xerographic image marking process and an offset-marking process. In various exemplary embodiments of the methods and systems according to this invention, in step S, the absolute frequency of the input screen is determined and the noise characteristics of the screen are examined. In one exemplary embodiment, in step S, after the minority pixels are identified, the distance between maxima\/minima corresponding to subsequent minority pixels is determined, excluding a small region around the mean to exclude noise.","Next, it step S, a determination is made whether the scanned image data has a low frequency, high noise character. If so, operation continues to step S. Otherwise, operation jumps to step S. In step S, image marking process is determined to be, and\/or is identified as, a xerographic image marking process. Operation then jumps to step S. In contrast, in step S, the image marking process is determined to be, and\/or is identified as, an offset image marking process because high frequency, low noise screens are correlated with offset input. Operation then continues to step S, where the operation of the method returns to step S.",{"@attributes":{"id":"p-0057","num":"0056"},"figref":["FIG. 8","FIG. 4","FIG. 8"],"b":["1500","630","610","620"]},"Further, as shown in , the offset image marking process curve  and the xerographic image marking process curve  are further distinguishable by the higher frequency, i.e., closer spacing of the peaks, in the offset image marking process curve , shown as peaks to the left of xerographic image marking process curve  in . A secondary indicator identifying the xerographic image marking process curve  is the high amplitude of the high frequency sidelobe at a periodicity of 4-5 pixels.",{"@attributes":{"id":"p-0059","num":"0058"},"figref":"FIG. 9","b":["400","400","414","414","400","414","400"]},"As shown in , the media\/image marking process identification system  may include one or more display devices  usable to display information to one or more users, and one or more user input devices  usable to allow one or more users to input data into the media\/image marking process identification system . The one or more display devices  and the one or more input devices  are connected to the media\/image marking process identification system  through an input\/output interface  via one or more communication links  and , respectively, which are similar to the communication link  above.","In various exemplary embodiments, the media\/image marking process identification system  includes one or more of a controller , a memory , an image data local variation differentiation circuit, routine or application , an image data spatial characteristics differentiation circuit, routine or application , an image data frequency distribution circuit, routine or application , an image data statistics generation circuit, routine or application , and a media\/image marking process determination circuit, routine or application , which are interconnected over one or more data and\/or control buses and\/or application programming interfaces . The memory  includes one or more of a media\/image marking process identification model .","The controller  controls the operation of the other components of the media\/image marking process identification system . The controller  also controls the flow of data between components of the media\/image marking process identification system  as needed. The memory  can store information coming into or going out of the media\/image marking process identification system , may store any necessary programs and\/or data implementing the functions of the media\/image marking process identification system , and\/or may store data and\/or user-specific information at various stages of processing.","The memory  includes any machine-readable medium and can be implemented using appropriate combination of alterable, volatile or non-volatile memory or non-alterable, or fixed, memory. The alterable memory, whether volatile or non-volatile, can be implemented using any one or more of static or dynamic RAM, a floppy disk and disk drive, a writable or re-rewriteable optical disk and disk drive, a hard drive, flash memory or the like. Similarly, the non-alterable or fixed memory can be implemented using any one or more of ROM, PROM, EPROM, EEPROM, an optical ROM disk, such as a CD-ROM or DVD-ROM disk, and disk drive or the like.","In various exemplary embodiments, the media\/image marking process identification model  which the media\/image marking process identification system  employs to identify the media and\/or image marking process used to process a particular medium is based on the image data analysis techniques discussed above to determine local variations of the input data, identify image data spatial characteristics, determine image data frequency distributions, and the like.","With reference to , the image data local variation differentiation circuit, routine or application  is activated by the controller  to differentiate between a continuous tone image marking process  and a halftone image marking process  in a scanned image by examining local variations of the scanned image input data to determine whether there is low local\/spatial variation  in the scanned image data or high local\/spatial variation  in the scanned image data.","This distinction coincides with the distinction between a photograph or other analog image marking process and a binary image marking process. That is, determining continuous tone image data would imply that the image marking process for the scanned image data is a photo process, i.e., that the image is a photo .","As discussed above, detecting a halftone marking process  would imply that the image marking process for the scanned image data is an ink-jet marking process , a xerographic marking process , an offset marking process , or the like.","The image data spatial characteristics differentiation circuit, routine or application  is activated by the controller  to differentiate between the various halftone image marking processes ,  and  by examining the spatial characteristics of the scanned image data to determine whether the data has a dispersed\/aperiodic character  or a clustered\/periodic character .","Detecting data having a dispersed\/aperiodic character would imply that the image marking process for the scanned image data is an ink-jet marking process , i.e., that the image is an ink-jet image . On the other hand, detecting data having a clustered\/periodic character would imply that the image marking process for the scanned image data is a xerographic marking process , an offset marking process , or the like.","The image data frequency distribution circuit, routine or application  is activated by the controller  to differentiates between a xerographic marking process  and an offset marking process  by examining the data frequency distribution or internal structure of the scanned image data. Image data internal structure examples that may be considered include determining whether the image data has a line structure as contrasted with a rotated structure, whether the halftone dots have a high frequency structure versus a low frequency structure, and whether the halftone screen noise is high or low.","Detecting image data having a low frequency\/high noise character  would imply that the image marking process for the scanned image data is a xerographic marking process  that was used to create a xerographic image . On the other hand, detecting image data having a high frequency\/low noise character  would imply that the image marking process for the scanned image data is an offset, or lithographic, marking process  that was used to generate an offset printed\/lithographic image .","The image data statistics generation circuit, routine or application  is activated by the controller  to generate one or more data statistics of the image data, as discussed above, which are then are analyzed by one or more of the circuits, routines or applications , , .","The media\/image marking process determination circuit, routine or application  is activated by the controller  to determine the type of image marking process used to process the image data evaluated or analyzed.","A fully automated approach for detecting the input image marking process based on the spatial statistics of the scanned image has been described. Because the spatial statistics of the scanned image are highly correlated with the underlying reproduction process, the methods and systems according to various exemplary embodiments of the invention allow for a reliable classification of the type of the image marking process. It is also well understood that any automated approach can be used in a semi-automatic fashion to aid a user, either by preferentially guiding user decisions, by setting system defaults, by alerting users to discrepancies, or the like.","Although the above discussion first selects blocks of pixels to be used for image analysis, then creates statistical data indicative of a marking process, then creates a dispersion metric for the blocks, then creates a periodicity metric, this order may be changed, especially if the input image marking processes have some sort of pre-classification. Moreover, because the metrics described above have been shown to be sequentially derived, some classification decisions may be made earlier than others. It should also be noted that a periodicity metric may also be considered to be a noise metric because a periodicity metric compares amplitudes and harmonics.","While this invention has been described with reference to a color scanner, the invention is not limited to such an embodiment. The invention may be applied to scanned image data captured at a remote location or to image data captured from a hard copy reproduction by a device other than a scanner, for example a digital camera. The invention may be practiced on any color reproduction device, such as, for example a color photocopier, and is also not intended to be limited to the particular colors described above.","While this invention has been described in conjunction with specific embodiments outlined above, it is evident that many alternatives, modifications and variations will be apparent to those skilled in the art. Accordingly the preferred embodiments of the invention as set forth above are intended to be illustrative and not limiting. Various changes may be made without departing from the spirit and scope of the invention as defined in the following claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Various exemplary embodiments of the systems and methods of this invention will be described in detail, with reference to the following figures, wherein:",{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":["FIG. 5","FIG. 4"]},{"@attributes":{"id":"p-0022","num":"0021"},"figref":["FIGS. 6 and 7","FIG. 4"]},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 9"}]},"DETDESC":[{},{}]}
