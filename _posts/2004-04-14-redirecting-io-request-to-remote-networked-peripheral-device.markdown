---
title: Redirecting I/O request to remote networked peripheral device
abstract: An input/output (I/O) request processing system comprises a drive command module adapted to receive an I/O request referencing a local peripheral address for processing of the I/O request. The system also comprises a redirector communicatively coupled to the drive command module. The redirector is adapted to automatically convey the I/O request over a communication network to a remote peripheral device for processing of the I/O request.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08914459&OS=08914459&RS=08914459
owner: Hewlett-Packard Development Company, L.P.
number: 08914459
owner_city: Houston
owner_country: US
publication_date: 20040414
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["TECHNICAL FIELD","BACKGROUND","SUMMARY","DETAILED DESCRIPTION OF THE DRAWINGS"],"p":["This invention relates to network technologies and, more particularly, to a computer-readable medium, method, and system for accessing a networked peripheral device.","Computer systems generally comprise a storage management file system to enable a user to store and retrieve information. For example, a file system generally enables a user to create, modify and delete files; identify stored files by a symbolic name rather than specifying a physical storage device name; and view the information logically rather than with a more detailed physical view. The file system generally manages information via a device driver which manages a storage abstraction of a storage device. For example, based on a file system layout on the storage device, the device driver manages storage and retrieval of information using file system metadata information.","Network file sharing is a method for transferring information over a physical network medium via a transport protocol. A transport protocol generally comprises a network file sharing protocol that enables remote operations such as opening, creating, reading, writing, and closing data files. In operation, a file sharing server generally runs on top of an existing file system such that network file sharing requests or calls are passed from the file sharing server to the file system. Because file systems generally comprise the same set of functions (i.e., open, read, create, write, etc.), a network sharing server can run on top of virtually any file system. Thus, in operation, based on the file system layout of a local storage device, the file system enables remote data management operations by responding to network file sharing calls received from a network sharing server.","However, various types of storage mediums and associated devices, especially peripheral devices such as compact disc (CD) recorders, digital versatile disk (DVD) recorders, and other types of peripheral device recording systems, do not readily accommodate writing or recording data across a network. For example, blank CDs and DVDs generally do not have a file system layout recorded thereon. In operation, recording information to blank CDs and DVDs generally comprises \u201cpre-mastering\u201d such that the content to be stored on the blank medium is known ahead of time. Thus, there is no format operation performed on the medium and no file system metadata recorded onto the medium. A software application for writing information to a medium such as a blank CD or DVD generally creates an image of the content that will be stored on the blank medium block-by-block and communicates directly with a disk driver to issue commands to write the content to the medium in this sequence of blocks, thereby bypassing any file system. Thus, because the file system is bypassed, a network file sharing infrastructure does not enable remote data management.","In accordance with an embodiment of the present invention, an input\/output (I\/O) request processing system comprises a drive command module adapted to receive an I\/O request referencing a local peripheral address for processing of the I\/O request. The system also comprises a redirector communicatively coupled to the drive command module. The redirector is adapted to automatically convey the I\/O request over a communication network to a remote peripheral device for processing of the I\/O request.","In accordance with another embodiment of the present invention, a method for input\/output (I\/O) request processing comprises receiving an I\/O request referencing a local peripheral address for processing of the I\/O request. The method also comprises automatically invoking a redirector adapted to convey the I\/O request to a communication network to enable processing of the I\/O request by a remote peripheral device.","In accordance with another embodiment of the present invention, an input\/output (I\/O) request processing system comprises a drive command module adapted to receive a command to record data to an optical medium. The system also comprises a redirector communicatively coupled to the drive command module. The redirector is adapted to receive the drive command from the drive command module and automatically format the command for processing by a remote optical drive.","The preferred embodiment of the present invention and its advantages are best understood by referring to  of the drawings, like numerals being used for like and corresponding parts of the various drawings.","For a peripheral device, e.g., an optical disc drive, it is desirable to enable client applications executing on various host devices to share access to the peripheral device over a network. It is further desirable to have the capability to communicate with the peripheral device over the network as if it is a local device.","Many software applications communicate with a peripheral device of a computer system. To facilitate such communications, a device driver is used to control a hardware component of a peripheral device. A device driver is generally responsible for accessing one or more hardware register(s) of the peripheral device and may include an interrupt handler to process hardware interrupts generated by the peripheral device. Application programs often use a software layer commonly referred to as an application programming interface (API) for interfacing with a peripheral device and for managing appropriate device driver calls. For example, the small computer system interface (SCSI) pass-through interface (SPTI) API, is implemented as a low-level portion of an operating system (O\/S) kernel. Alternatively, the advanced SCSI peripheral interface (ASPI) API, is implemented as (a) file(s) loaded during application run-time. Other applications may communicate with a peripheral device by a proprietary device driver.","An input\/output (I\/O) request issued by a client application and directed to a peripheral device is ultimately processed by a device driver adapted to format the I\/O request for delivery to the targeted peripheral device regardless of whether the device driver is implemented as a proprietary device driver or an API. In doing so, a bus driver, e.g., an integrated device electronics (IDE) bus driver, a SCSI bus driver, or the like, that communicatively interfaces with the peripheral device is invoked. An I\/O request identifies a particular peripheral device by way of one or more peripheral identifiers or attributes included within or referenced by the I\/O request. As referred to herein, a software layer that receives an I\/O request, and processes the request for execution with a targeted peripheral device, is referred to as a drive command module (DCM). A DCM may comprise part of an operating system or, alternatively, may be implemented as run-time software modules. In general, a DCM receives an I\/O request and identifies an appropriate bus driver by way of a local peripheral device address associated with the targeted peripheral device. Assignment of a local peripheral device address with the I\/O request may be had by including the address within the I\/O request, or referencing, e.g., by a pointer, the peripheral device address within the I\/O request. A DCM is adapted to process an I\/O request issued by a client application, and execute one or more drive commands with the peripheral device targeted by the I\/O request. A drive command issued by a DCM corresponds to a received I\/O request and is a lower-level, machine processible representation of the I\/O request. Embodiments of the present invention enable I\/O requests issued by a client application to be processed with a remotely located peripheral device in a manner that is transparent to the client application.","Embodiments of the present invention may be better understood with reference to  illustrating a block diagram of various software and hardware modules for enabling the remote processing of an I\/O request  issued by a client application . A system  comprises a host device , e.g., a computer system and a network-connected device . Client application  executes on host device . In the illustrative example, the descriptions of system  will be made with reference to a DCM  implemented as an SPTI. Accordingly, formatting of an I\/O request  issued by client application  is described with reference to the SPTI protocol. Processing of an I\/O request by an application that interfaces with another implementation of a DCM, e.g., ASPI, WINDOWS32 API, etc., may be performed in a similar manner in accordance with embodiments of the invention, and may be implemented for any drive command module now known or later developed.","According to one embodiment of the present invention, application  generates and issues I\/O request  comprising a local peripheral address and conveys I\/O request  to DCM . As referred to herein, a local peripheral address is a peripheral address associated with an originator of I\/O request . In the illustrative example, I\/O request  is issued by client application  running on device , and device  comprises the I\/O request originator device. A call to a bus driver, e.g., a SCSI bus driver, is made by DCM  in an attempt to convey I\/O request  to a local adapter in accordance with the local peripheral address of I\/O request . In the illustrative example, device  comprises two peripheral devices  and  having respective peripheral addresses A and B. For illustrative purposes, assume I\/O request  includes or references a local peripheral address C of host device  at which no peripheral device is located. The absence of a peripheral device at peripheral address C is illustratively designated with dashed lines. The absence of a peripheral device at peripheral address C may, for example, be realized as an empty host adapter slot within device .","In accordance with an embodiment of the invention, a bus driver network redirector , rather than a conventional bus driver, is invoked by a bus driver call made by DCM . Redirector  may, for example, be identified by DCM  as a bus driver by assignment of a bus driver label, e.g., a bus driver file name, to redirector . Other implementations for invoking redirector  by a bus driver call made by DCM  are possible. Network redirector  supplies the drive command to a network interface card (NIC)  that interfaces with a network medium , e.g., a 100baseT Ethernet cable. Network medium  is coupled with remote device  that is, in turn, communicatively coupled with a peripheral device . Peripheral device  has a peripheral address D associated therewith. Device , or the receiver device, receives and processes I\/O request , and issues a corresponding drive command  to device . In an exemplary embodiment, a drive command network server  receives I\/O request  from a network interface card (NIC)  and identifies peripheral device  for execution of I\/O request  therewith. Any return data or error\/status information generated by execution of I\/O request  by peripheral device  is preferably transmitted over network medium  and conveyed to application . Thus, embodiments of the invention enable I\/O request  having, or referencing, a local peripheral address issued by an originator device  to be redirected to a remotely located device . The remote device  is coupled to peripheral device  having a peripheral address D associated with remote device . Execution or processing of I\/O request  is then performed by peripheral device .",{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 2","b":["100","100","10","110","10","170","115","170","100","10","115"]},"Processing element  communicates with and drives the other elements within device  via a local interface , which may comprise one or more busses. Furthermore, an input device , for example a keyboard or a pointer device, can be used to input data from a user of device , and an output device , for example a display device or a printer, can be used to output data to the user. A disk storage device , such as a magnetic disk, is connected to local interface  for data transfers therewith. NIC , such as an Ethernet card, is interconnected with interface  and provides a physical connection to network medium .","Drive command module  is stored in memory device  or storage device  and is invoked by application  for processing of I\/O request . Redirector  is invoked by DCM  and formats I\/O request  for delivery over network medium . For example, redirector  may encapsulate I\/O request  into one or more Ethernet packets addressed to remote device . The network formatted I\/O request  is conveyed to a network driver, e.g., an Ethernet driver, supplied to NIC , and transmitted to network-connected remote device  by way of network medium .",{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 3","b":["101","101","121","111","121","171","116","121","171","121","116","121","116","101","181","101","131","141","161","66","101","130"]},"An adapter interface , for example a peripheral component interconnect, an IDE interface, a SCSI, or another suitable peripheral interface, is communicatively coupled with processing element  by one or more busses , e.g., a PCI bus. Adapter interface  may be implemented as a socket, or expansion slot, and associated circuitry disposed on a backplane, e.g., a motherboard, of device  and provides a communication coupling or interconnection between peripheral device  and processing element . Memory device  or storage device  stores network server  implemented as one or more computer-readable instruction set(s) executable by processing element . Additionally, a DCM  is stored in memory device  or storage device .","Thus, for example, referring to , according to one embodiment of the present invention, peripheral device  comprises an optical drive  for recording, reading, or otherwise processing data associated with an optical medium  accessible by optical drive . In the illustrated embodiment, application  comprises software for accessing, reading, recording or otherwise processing data via a communicatively coupled optical drive. Thus, in operation, embodiments of the present invention enable an I\/O request  issued from application , such as but not limited to, a record command, to be processed or otherwise executed by optical drive .","With reference to , a message flow diagram illustrates the processing of an I\/O request in accordance with embodiments of the invention. Application  issues I\/O request  formatted in accordance with drive command module . In the illustrative example, drive command module  is implemented as an SPTI and the illustrative I\/O request  comprises an SPTI-formatted DeviceIOControl function call. A DeviceIOControl I\/O request is an SPTI-formatted function call for sending a control code to a specified device driver that causes a corresponding device to perform an operation specified by the I\/O request. In general, an SPTI-formatted I\/O request comprises one or more control codes as function arguments of the I\/O request. The control code defines the particular request-type of an SPTI-formatted I\/O request. In the illustrative example, a control code IOCTL_SCSI_PASS_THROUGH is included in I\/O request  and defines I\/O request  as a buffered I\/O request. Additionally, I\/O request  comprises a pointer to a SCSI request block (SRB) that is used in conjunction with function call DeviceIOControl for fully defining the particular I\/O request. In general, an SRB comprises a data structure for issuing commands to a peripheral device. Particularly, an SRB comprises members, or fields, that respectively comprise a value defining a parameter or characteristic of the I\/O request for proper execution of the input\/output request. A particular peripheral device with which I\/O request  is to be directed is identified by one or more SRB members and may include one or more of a host adapter identifier, a target identifier, a logical unit number, or another SRB member that defines a local peripheral address that facilitates execution of I\/O request  with a targeted local peripheral device. For illustrative purposes, assume an SRB  stored in memory device  is referenced by a pointer and comprises one or more fields that address I\/O request  to peripheral address C.","In accordance with embodiments of the invention, a local peripheral address included (or otherwise referenced) in I\/O request  constitutes a peripheral address at which no peripheral device exists. I\/O request  is received by DCM , e.g., a SPTI, and one or more drive commands  corresponding thereto are generated by DCM . DCM  attempts invocation of a bus driver associated with the local peripheral address C of I\/O request . In response to a bus driver call made by DCM , redirector  is invoked and DCM  passes drive command  thereto. Redirector  formats drive command  for delivery over network medium . In the illustrative example, drive command  is encapsulated into one or more packets (PCK). Preferably, SRB  referenced by a pointer is encapsulated with drive command . In general, redirector  comprises logic for addressing a network-formatted drive command  (PCK(Drive command, SRB)) for delivery to remote device . For example, a network address assigned to device  may be inserted into a header of network-formatted drive command . Additionally, a port assigned to network server  may be inserted into a header of network-formatted drive command . In general, network-formatted drive command  is conditioned for network delivery to network server  and is supplied to network medium  by redirector .","Network-formatted drive command  is conveyed to network server  upon receipt by device . In general, network server  is adapted to direct execution of an input\/output request defined by network-formatted drive command  with a peripheral device interconnected with device . In an exemplary embodiment, network server  comprises logic for removing one or more SRB element or field values defining the local peripheral address to which I\/O request  was originally directed. Preferably, network server  comprises logic for removing a peripheral address from network-formatted drive command  and inserting a peripheral address assigned to peripheral device . For example, a host adapter identifier, a target identifier, and logical unit number members specifying peripheral device address C included within the SRB  conveyed to redirector sever  are respectively removed from the SRB structure and a host adapter identifier, a target identifier, and logical unit number members specifying peripheral address D of peripheral device  are inserted therefor. However, it should also be understood that redirector  may be configured to remove a peripheral address from network-formatted drive command  and insert a peripheral address assigned to peripheral device . A modified SRB  data structure having the address of peripheral device  is written to memory device  by network server . In the illustrative example, network server  additionally generates a drive command module I\/O request  corresponding to drive command . DCM I\/O request  comprises a DeviceIOControl function call corresponding to the function call in I\/O request  and a pointer mssrbthat references the modified SRB  written to memory device . Network server  then submits the generated DCM I\/O request  to a DCM , e.g., an SPTI. Execution of DCM I\/O request  is made according to SRB  referenced by pointer mssrb, that is with peripheral device  targeted by the peripheral address inserted into SRB . Accordingly, DCM  processes I\/O request  and executes a drive command  corresponding thereto with peripheral device .","A return data set  or error\/status information may be conveyed to redirector sever  upon execution of drive command . In the event that return data is provided by peripheral device  upon execution of drive command , redirector sever  preferably encapsulates return data set  into a packet return data set  and supplies the return data over network medium . Packet return data set  is addressed to device  and may include addressing data, e.g., a port assigned to redirector , for delivery of packet return data set  to redirector . Upon receipt of the return data set by redirector , the return data set is conveyed to application . Accordingly, a return data set  is processed by application  as if the return data had been generated by a peripheral device located at the local peripheral address targeted by I\/O request . That is, application  issues I\/O request  and processes any return data set  as if the I\/O request was carried out locally on a peripheral device interconnected with device .","As described above, I\/O request  may be configured to reference or otherwise indicate a remote peripheral address associated with peripheral device  (e.g., a field within drive command ). However, it should also be understood that the identification of the remote address associated with peripheral device  may be otherwise determined. For example, referring to , device  may also comprise a relational database  accessible by redirector  and\/or DCM  such that information associated with correlating a local peripheral address (e.g., local peripheral address C) with a remote address of peripheral device  may be retrieved or otherwise accessed.","As described, embodiments of the invention enable an application running on a computer or other device interconnected with a network to issue input\/output requests directed to a local peripheral device address at which no peripheral device exists. A redirector application receives a drive command corresponding to the input\/output request and delivers the drive command to a network-connected remote device having a peripheral device interconnected therewith. An input\/output request corresponding to the received drive command is generated by the remote device and a peripheral address associated with the remote device is inserted into the input\/output request. Execution of the generated input\/output request by the remote device then results in processing of the input\/output request with ,the peripheral device. Accordingly, an expensive peripheral device, e.g., a recordable digital versatile disc drive, may be located on a network computer or other device. Any network connected computer having a client application adapted to perform input\/output requests with a local peripheral device may then issue input\/output requests in a conventional manner without knowledge that the peripheral device is remotely located.","Redirector  and drive command network server  are preferably implemented as an instruction set(s), or program, of computer-readable logic. The instruction set is preferably maintained on any one of various conventional computer-readable mediums. In the context of this document, a \u201ccomputer-readable medium\u201d can be any means that can contain, store, communicate, propagate or transport the program for use by or in connection with the instruction execution system, apparatus, or device. The computer-readable medium can be, for example, but is not limited to, an electronic, magnetic, optical, electro-magnetic, infrared, or semi-conductor system, apparatus, device, or propagation medium now known."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["For a more complete understanding of the present invention, the objects and advantages thereof, reference is now made to the following descriptions taken in connection with the accompanying drawings in which:",{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 4"}]},"DETDESC":[{},{}]}
