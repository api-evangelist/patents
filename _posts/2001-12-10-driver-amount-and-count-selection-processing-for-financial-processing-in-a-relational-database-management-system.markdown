---
title: Driver amount and count selection processing for financial processing in a relational database management system
abstract: A Value Analyzer system is a data-driven computer-facilitated financial model that provides accurate and consistent profitability calculations using account and event data stored in a relational database managed by a relational database management system (RDBMS), wherein the account data comprises attributes of the accounts being measured and the event data comprises attributes of account-related transactions. A selector function uses selection criteria to select accounts and events from the relational database in order to generate a number of inputs for profitability calculations.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07461025&OS=07461025&RS=07461025
owner: Teradata US, Inc.
number: 07461025
owner_city: Miamisburg
owner_country: US
publication_date: 20011210
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["CROSS REFERENCE TO RELATED APPLICATIONS","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENT","Overview","Hardware and Software Environment","Value Analyzer Operation","Value Analyzer Data Flow","Parallel Processing of a Selector Function","Logic of the Preferred Embodiment","CONCLUSION"],"p":["This application is a continuation-in-part of the following co-pending and commonly assigned patent applications:","Utility application Ser. No. 10\/016,779, entitled \u201cPARALLEL SELECTION PROCESSING FOR FINANCIAL PROCESSING IN A RELATIONAL DATABASE MANAGEMENT SYSTEM,\u201d filed on Dec. 10, 2001, by Brian Wasserman;","Utility application Ser. No. 10\/013,422, entitled \u201cACCOUNT SELECTION FOR FINANCIAL PROCESSING IN A RELATIONAL DATABASE MANAGEMENT SYSTEM,\u201d filed on Dec. 10, 2001, by Brian Wasserman; and","Utility application Ser. No. 10\/016,452, entitled \u201cDYNAMIC EVENT SELECTION FOR FINANCIAL PROCESSING IN A RELATIONAL DATABASE MANAGEMENT SYSTEM,\u201d filed on Dec. 10, 2001, by Brian Wasserman, George Robert Hood, and Tom Ryan, which is a continuation-in-part of the following co-pending and commonly assigned patent applications:","Utility application Ser. No. 09\/845,461, entitled \u201cTAX ADJUSTMENT FOR FINANCIAL PROCESSING IN A RELATIONAL DATABASE MANAGEMENT SYSTEM,\u201d filed on Apr. 30, 2001, by George Robert Hood;","Utility application Ser. No. 09\/845,924, entitled \u201cAMORTIZATION FOR FINANCIAL PROCESSING IN A RELATIONAL DATABASE MANAGEMENT SYSTEM,\u201d filed on Apr. 30, 2001, by George Robert Hood;","Utility application Ser. No. 09\/845,851, entitled \u201cSHAREHOLDER VALUE ADD FOR FINANCIAL PROCESSING IN A RELATIONAL DATABASE MANAGEMENT SYSTEM,\u201d filed on Apr. 30, 2001, by George Robert Hood;","Utility application Ser. No. 09\/608,355, entitled \u201cADVANCED AND BREAKTHROUGH NET INTEREST REVENUE IMPLEMENTATION FOR FINANCIAL PROCESSING IN A RELATIONAL DATABASE MANAGEMENT SYSTEM,\u201d filed on Jun. 29, 2000, by George Robert Hood and Paul H. Phibbs, Jr.;","Utility application Ser. No. 09\/610,646, entitled \u201cBASIC AND INTERMEDIATE NET INTEREST REVENUE IMPLEMENTATION FOR FINANCIAL PROCESSING IN A RELATIONAL DATABASE MANAGEMENT SYSTEM,\u201d filed on Jun. 29, 2000, by George Robert Hood and Paul H. Phibbs, Jr.;","Utility application Ser. No. 09\/608,681, entitled \u201cOTHER REVENUE IMPLEMENTATION FOR FINANCIAL PROCESSING IN A RELATIONAL DATABASE MANAGEMENT SYSTEM,\u201d filed on Jun. 29, 2000, by George Robert Hood;","Utility application Ser. No. 09\/608,675, entitled \u201cDIRECT EXPENSE IMPLEMENTATION FOR FINANCIAL PROCESSING IN A RELATIONAL DATABASE MANAGEMENT SYSTEM,\u201d filed on Jun. 29, 2000, by George Robert Hood;","Utility application Ser. No. 09\/608,342, entitled \u201cINDIRECT EXPENSE IMPLEMENTATION FOR FINANCIAL PROCESSING IN A RELATIONAL DATABASE MANAGEMENT SYSTEM,\u201d filed on Jun. 29, 2000, by George Robert Hood; and","Utility application Ser. No. 09\/608,682, entitled \u201cRISK PROVISION IMPLEMENTATION FOR FINANCIAL PROCESSING IN A RELATIONAL DATABASE MANAGEMENT SYSTEM,\u201d filed on Jun. 29, 2000, by George Robert Hood;","all of which applications are incorporated by reference herein.","1. Field of the Invention","This invention relates in general to financial processing systems performed by computers, and in particular, to the implementation of parallel selection processing for financial processing using data accessed from a relational database management system.","2. Description of Related Art","Financial processing systems provide tools for financial analysis of accounting data. Typically, each financial processing system operates in a unique way and approaches financial analysis differently. Some financial processing systems are advanced in their approach to profitability calculations, and others are still at a more basic level. In addition, there is no agreement as to the rules for profitability calculations, outside of generally accepted accounting policies that external auditors use.","Yet, the majority of financial processing systems are inefficient in their accessing of relational databases. There is a need, then, for an improved approach to selecting account and event data from a relational database, especially in the area of parallel processing.","A Value Analyzer system is a data-driven computer-facilitated financial model that provides accurate and consistent profitability calculations using account and event data stored in a relational database managed by a relational database management system (RDBMS), wherein the account data comprises attributes of the accounts being measured and the event data comprises attributes of account-related transactions. A selector function uses selection criteria to select accounts and events from the relational database in order to generate a number of inputs for profitability calculations.","In the following description of the preferred embodiment, reference is made to the accompanying drawings which form a part hereof, and in which is shown by way of illustration a specific embodiment in which the invention may be practiced. It is to be understood that other embodiments may be utilized and structural changes may be made without departing from the scope of the present invention.","A Value Analyzer system is a data-driven computer-facilitated financial model that provides accurate and consistent profitability calculations using account and event data stored in a relational database managed by a relational database management system (RDBMS), wherein the account data comprises attributes of the accounts being measured and the event data comprises attributes of account-related transactions. A selector function uses selection criteria to select accounts and events from the relational database in order to generate a number of inputs for profitability calculations.",{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 1","b":["100","102","104","106"]},"In the preferred embodiment, the RDBMS  includes at least one Parsing Engine (PE)  and one or more Access Module Processors (AMPs) A-E storing the relational database in one or more data storage devices A-E. The Parsing Engine  and Access Module Processors  may be implemented in separate machines, or may be implemented as separate or related processes in a single machine. The RDBMS  used in the preferred embodiment comprises the Teradata\u00ae RDBMS sold by NCR Corporation, the assignee of the present invention, although other DBMS's could be used.","Generally, the Value Analyzer Client  includes a graphical user interface (GUI) for operators of the system , wherein requests are transmitted to the Value Analyzer Calculation Engine  and\/or the RDBMS , and responses are received therefrom. In response to the requests, the Value Analyzer Calculation Engine  performs the functions described below, including formulating queries for the RDBMS  and processing data retrieved from the RDBMS . Moreover, the results from the functions performed by the Value Analyzer Calculation Engine  may be provided directly to the Value Analyzer Client  or may be provided to the RDBMS  for storing into the relational database. Once stored in the relational database, the results from the functions performed by the Value Analyzer Calculation Engine  may be independently retrieved from the RDBMS  by the Value Analyzer Client .","Note that the Value Analyzer Client , the Value Analyzer Calculation Engine , and the RDBMS  may be implemented in separate machines, or may be implemented as separate or related processes in a single machine. Moreover, in the preferred embodiment, the system  may use any number of different parallelism mechanisms to take advantage of the parallelism offered by the multiple tier architecture, the client-server structure of the Value Analyzer Client , Value Analyzer Calculation Engine , and RDBMS , and the multiple Access Module Processors  of the RDBMS . Further, data within the relational database may be partitioned across multiple data storage devices  to provide additional parallelism.","Generally, the Value Analyzer Client , Value Analyzer Calculation Engine , RDBMS , Parsing Engine , and\/or Access Module Processors A-E comprise logic and\/or data tangibly embodied in and\/or accessible from a device, media, carrier, or signal, such as RAM, ROM, one or more of the data storage devices A-E, and\/or a remote system or device communicating with the computer system  via one or more data communications devices.","However, those skilled in the art will recognize that the exemplary environment illustrated in  is not intended to limit the present invention. Indeed, those skilled in the art will recognize that other alternative environments may be used without departing from the scope of the present invention. In addition, it should be understood that the present invention may also apply to components other than those disclosed herein.","The Value Analyzer system is a data-driven computer-facilitated financial model that provides accurate and consistent profitability calculations using account, event and organization data stored in the RDBMS , wherein: (1) the account attributes comprise data about accounts being measured, (2) the event attributes comprise data about account-related transactions, and (3) the organization attributes comprise data about the organization's financial status. The profitability calculations performed by the Value Analyzer system rely on a Five Factor Atomic Profit Metric (FFAPM):",{"@attributes":{"id":"p-0036","num":"0035"},"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":[{"mtd":{"mrow":{"mi":["Profit",{}],"mo":["=","\u2062"],"mrow":{"mrow":[{"mi":["Net","Interest","Revenue"],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}],"mrow":{"mo":["(",")"],"mrow":{"mi":["N","I","R"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}}},{"mi":["Other","Revenue"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}],"mrow":{"mo":["(",")"],"mrow":{"mi":["O","R"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}}}],"mo":["+","-"]}}}},{"mtd":{"mrow":{"mi":{},"mo":"\u2062","mrow":{"mrow":[{"mi":["Direct","Expense"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}],"mrow":{"mo":["(",")"],"mrow":{"mi":["D","E"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}}},{"mi":["Indirect","Expense"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}],"mrow":{"mo":["(",")"],"mrow":{"mi":["I","E"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}}}],"mo":["-","-"]}}}},{"mtd":{"mrow":{"mi":{},"mo":"\u2062","mrow":{"mi":["Risk","Provision"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}],"mrow":{"mo":["(",")"],"mrow":{"mi":["R","P"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}}}}}},{"mtd":{"mrow":{"mo":["=","\u2062"],"mi":{},"mrow":{"mrow":[{"mi":["N","I","R"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]},{"mi":["O","R"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}},{"mi":["D","E"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}},{"mi":["I","E"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}},{"mi":["R","P"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}],"mo":["+","-","-","-"]}}}}]}}}},"In the above equation, it is assumed that the sign of elements that reduce profit are negative and those that contribute are positive.","Each of the five factors of FFAPM are defined below:\n\n","Each of these five factors can be measured for a desired period (daily, weekly, monthly, quarterly, etc.). Moreover, each factor is essentially discrete and independent with fundamentally different characteristics, which strengthens the user's ability to fully utilize the output to determine relationships between account, event and organization data, and enable consistent multiple dimensional aggregation.","The FFAPM is \u201catomic\u201d in that profitability is computed using data stored in the RDBMS . There are three aspects to this:\n\n","The Value Analyzer generally defines \u201cindirect\u201d components of profitability to be those which must be apportioned to accounts and \u201cdirect\u201d components to be those which are either computed at the account level, or are rolled up to the account level from lower level events.",{"@attributes":{"id":"p-0042","num":"0049"},"figref":"FIG. 2","b":["104","200","202","204","206","208","200","210","212","212","212"]},"Input Definitions","Account Attributes  comprise data about the accounts being measured. This data includes: balance, rate (or interest accrued), product identification, limits, expected default frequency, and various dates (e.g., open, rate reset, last payment, next payment, maturity, etc.).","Event Attributes  comprise data about account-related events or transactions. This data includes: account identification, event or transaction amounts, event or transaction location, event or transaction time, counter-party identification, event or transaction type (e.g., loan payment, interest paid, loan draw down amount, etc.).","Organization Attributes  comprise data about the financial status of the organization. This data includes: balance sheet and profit statement amounts aggregated by the legal or management entities that own the account base being measured.","Profit Factors  include parameter values necessary to perform the Profitability Calculations . The major classifications of this data include:\n\n","Rules","The Profitability Calculations  use one or more Rules  applied to data retrieved from the RDBMS . These Rules  include, inter alia, the following:","Treatments. Every account with cash flows affecting a organization's balance sheet requires a method of valuing the account's use of internal funds. One approach is \u201cmatched maturity funds transfer pricing,\u201d which uses a canonical representation of an account's funding characteristics and then determines a value based on adjusted market yields for each instance that requires an interest rate transfer price to calculate an account's marginal Net Interest Revenue.","Equity Allocation. In order to provide precise Net Interest Revenue calculations, the amount of equity funds required at an account must be determined. This rule allows for equity allocation using any of the following methods: simple ratios; regulatory definitions; economic allocations, or user defined allocations.","Apportionment. Other Revenue, Risk Provision and Indirect Expense calculations are applied at the account level using Organization Attributes  that are not related directly to account activity. These profit adjustments are made so that the sum of all account-level Profitability Calculations  comprises the overall profit. One approach is to pool indirect costs and revenues and then apportion them. Apportionment rules specify how the pooled indirect costs and revenues is completely allocated to appropriate accounts, wherein the preferred embodiment uses closed form allocation rules, which require only information known in the current period and not iterative computation.","Amortization. Some types of income or expense are deferred or accrued over multiple periods, including and subsequent to the current accounting period. This is common to accrual accounting methods used in profit presentations of financial statements, and gives rise to timing differences between cash flows and their related profit as presented in a financial statement in any accounting period. Since the Value Analyzer system is designed to reconcile to the financial statement's profit values, it supports deferral and accrual accounting principles. Amortization methods that account for these timing differences are: interest amortization (used for interest income and expense accruals and for deferral of fees that are in lieu of interest), and straight line or declining balance amortizations (used for cost deferrals and investment depreciation).","Other Revenue Pricing. In situations where account and event activity can be used to derive account level income or fees, the Value Analyzer system calculates these drivers of the profitability in the Other Revenue calculations. These calculations comprise linear combinations of event or account values and modeled coefficients.","Direct Expense. The calculation of account profit adjustments due to account-related activity requires rules that take the form of linear combinations of event or account values and modeled coefficients.","Indirect Expense. In situations where expense apportionment or amortization amounts are aggregated, the user may want different rules applied depending on the path (or dimension) of aggregation. These rules allow for multiple Profitability Calculations rules to be applied to derive multiple account level Indirect Expense amounts.","Risk Provision. Adjusting current profit for expected future losses is known as \u201cactuarial\u201d profit provisioning. The Value Analyzer system applies actuarial-based methods in its account level Profitability Calculations, where the actuarial reserve that the provisions maintain represents the expected loss associated with all accounts.","Taxable Equivalent Gross-up. Profit is an after-tax measure, and thus some events or portions of some accounts' profits may be excluded from normal taxation. The Value Analyzer system adjusts these pre-tax values, so that a singular tax rate can be used to convert pre-tax profit into after-tax values, which are also known as taxable equivalent adjustment. These rules use account and event attributes to adjust each of the five factors of the FFAPM to a taxable equivalent basis.","Interest Yield Adjustments. Since the Value Analyzer system can calculate profits for any number of periods, the adjustment of cash interest payments, and the financial statement's accrual or smoothed representation of interest-related Profit, the Value Analyzer system provides a method for converting cash interest amounts to accrual amounts for financial statements. The Value Analyzer system implements an \u201ceffective interest rate\u201d conversion to accomplish this type of calculation.","Profitability Calculations","The following describes the method used by the Profitability Calculations :","1. Retrieve data from the RDBMS .","2. Calculate Net Interest Revenue for every account.","3. Calculate Other Revenue for every account.","4. Calculate Direct Expense for every account.","5. Calculate Indirect Expense for every account.","6. Calculate Risk Provision for every account.","7. Calculate Profit for every account.","8. Store the FFAPM Profit and the five factors of FFAPM into the RDBMS .","9. Aggregate and\/or re-calculate the FFAPM Profit and the five factors of FFAPM as necessary.","Note that steps 2 through 6 perform account-level calculations. Steps 2, 3, 4, 5, and 6 can be performed independently and in parallel, while step 7 requires values derived in steps 2, 3, 4, 5, and 6, and therefore must be performed after steps 2, 3, 4, 5, and 6 are completed.","Output Definition","The Profitability Calculations  generate one or more values for the five factors of the FFAPM , and specifically, the NIR, OR, DE, IE, RP, and Profit values. These values are used to generate the output data , which can be stored by the RDBMS  in the relational database.",{"@attributes":{"id":"p-0074","num":"0088"},"figref":"FIG. 3","b":["300","104","300","106","200","202","204","206","208","200","300","300"]},"Selection Criteria","In the Value Analyzer system, the Selector function  uses one or more sets of Selection Criteria  to determine which accounts and events should be processed. In the preferred embodiment, the following types of Selection Criteria  may be used:\n\n","The Selection Criteria  may comprise attributes, predicates, operators and\/or functions, wherein a group of accounts or events that satisfy the Selection Criteria  comprise partitions. For example, it is possible to compare an account attribute (i.e., a column) to another account attribute, a literal value, or a domain value (which is an indirect reference to a literal value that is resolved by a lookup function). Operators may include any number of different relational operators, i.e., =, >=, <=, <, >, BETWEEN, etc., and functions may comprise aggregate or other functions.","The Selection Criteria  may also include dynamic event attributes. For example, multiple event attributes may be defined for each account. The event attribute definition can vary both in the number of event attributes used to identify account events, and in the identity of the event attributes. This means that the selection of accounts having specific combinations of event attributes is dynamic, rather than static.","Source, Target and Driver Components","In the Value Analyzer system, each rule performed by the Profitability Calculation  can include multiple sets of Selection Criteria . Specifically, each rule performed by the Profitability Calculation  is comprised of Source, Target and Driver components, and each of these components can have Selection Criteria . In this context, a Source component is a source of funds to be allocated, a Target component is a target of funds to be allocated, and a Driver component is an attribute or function that controls the allocation of funds from the source to the target (e.g., account attributes, number of accounts, event attributes, event counts, event amounts, etc.). The Selection Criteria  for these components can be dynamically specified by the user.","Amounts and Counts","An amount can be specified by the user for the Source component, and both amounts and counts can be specified for Driver components. The specification of amounts or counts, combined with the Selection Criteria , requires that the Selector function  dynamically select the proper sets of accounts or events, and aggregate the user-specified amounts or counts. Generally, this selection and aggregation will be different from one rule to another, and from one Profitability Calculation  to another.","Event Thresholding","The Selector function  may use the amounts and counts to perform event thresholding when forming an Event Group. For example, the Selector function  may be programmed to only select accounts that have some specified number of some specified combinations of event attributes. Specifically, using the example, the Selector function  looks for accounts that meet any of the Selection Criteria  specified above, wherein the amount or count of the events is summed to determine whether they meet a user-specified thresholding requirement.","Rule Screening","Once the lists of Selection Criteria  have been specified, the next step is to screen the Profitability Calculation  rules and Selection Criteria . Specifically, any rules or criteria that the Selector function  does not need to execute can be removed. For example:","1. If a Profitability Calculation  rule is an apportionment rule, and the apportionment amount is $0.","2. If a Profitability Calculation  rule does not have any Selection Criteria , then the Selector function  can skip the rule. This occurs, for example, when a rule is applied to all accounts, i.e., when no Selection Criteria  are applied. Note that the rule can be removed only if the Source, Driver, and Target components all lack Selection Criteria .","3. If the Selection Criteria  are objectively invalid, then the Profitability Calculation  rule can be removed. For example, if an account attribute has two equality comparisons to different values, e.g., \u201cSelect all accounts where account=\u201cchecking account,\u201d balance=$5000, and balance=$12000, which is objectively invalid, the profitability rule can be removed (with an error message displayed).","Operation","Using the Selection Criteria  for each of the components, the Selector function  dynamically generates SQL statements to select the proper accounts and events from an account table and event log table in the relational database. The account table contains all of the accounts at a financial institution, and the event log table contains all of the account events or transactions that occurred during a specified period at the financial institution","The Selector function  can perform parallel processing of the Selection Criteria , which allows the Selector function  to optimize the selection of accounts and events. Using this process, similar Selection Criteria  are grouped together and processed independently and in parallel by the RDBMS , and the results therefrom are stored in temporary work tables.","The Selector function  uses one or more parameterized templates to dynamically generate the SQL statements. This parameterized template typically comprises a join of (potentially) multiple tables within the relational database to a constraint table (storing the Selection Criteria ) and an in-list table (storing IN clauses for the SQL templates). Both the constraint and in-list tables are created and populated from the Selection Criteria .","Specifically, there are several very important steps in generating the SQL statements:","1. Substantially similar Selection Criteria  are grouped in order to combine them into one account-partitioning set of SQL statements. In this context, \u201csimilar\u201d does not necessarily mean identical, e.g., certain Selection Criteria  are considered identical for the grouping function and are later altered to match the original SQL statements.","2. Once the Selection Criteria  are grouped, it is necessary to convert and\/or combine some of the Selection Criteria  in order to ensure that every Selection Criteria  can be expressed in the fewest number of templates.","3. One or more constraint tables are created and populated for each group of Selection Criteria .","4. One or more in-list tables are created and populated for all groups of Selection Criteria .","Standardizing Selection Criteria","For the purpose of grouping Selection Criteria , the Selector function  treats the relational operators, e.g., =, <, >, =>, <=, as equivalent to a BETWEEN operation. In fact, the Selector function  converts these relational operators into an equivalent BETWEEN operation according to the mappings in the following table:",{"@attributes":{"id":"p-0101","num":"0121"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"6"},"colspec":[{"@attributes":{"colname":"1","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"5","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"6","colwidth":"49pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"6","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Operator","Maps to","BETWEEN","Left Value","AND","Right Value"]},{"entry":["=X","Maps to","BETWEEN","X","AND","X"]},{"entry":["<X","Maps to","BETWEEN","MIN(X)","AND","LOWER(X)"]},{"entry":["<=X","Maps to","BETWEEN","MIN(X)","AND","X"]},{"entry":[">X","Maps to","BETWEEN","HIGHER(X)","AND","MAX(X)"]},{"entry":[">=X","Maps to","BETWEEN","X","AND","MAX(X)"]},{"entry":{"@attributes":{"namest":"1","nameend":"6","align":"center","rowsep":"1"}}}]}}}}},"wherein:\n\n","If the relational operator in the Selection Criteria  is of the type \u2018>=\u2019, \u2018<=\u2019, \u2018>\u2019, or \u2018<\u2019, then there may exist another Selection Criteria  within the group of Selection Criteria  that matches, i.e., that would form a valid BETWEEN operation. To match first and second Selection Criteria , the first and second Selection Criteria  must be the same attribute, and if the relational operator of the first Selection Criteria  is either \u2018>=\u2019 or \u2018>\u2019, then it will match either \u2018<=\u2019 or \u2018<\u2019 in the second Selection Criteria . Likewise, if the relational operator of the first Selection Criteria  is \u2018<=\u2019 or \u2018<\u2019, then it will match either \u2018>=\u2019 or \u2018>\u2019 in the second Selection Criteria .","Once a matching pair of first and second Selection Criteria  is found, the combination into one BETWEEN operation is straightforward. It is worth noting that, just as in the simple case, \u2018<X\u2019 results in \u2018BETWEEN Y AND LOWER(X)\u2019 and \u2018>X\u2019 results in \u2018BETWEEN HIGHER(X) and Y\u2019.","Grouping Selection Criteria","The Selector function  optimizes the dynamic generation of SQL statements, so that multiple Selection Criteria  can be processed in parallel by the RDBMS . Generally, this requires an understanding of the operation of the Parsing Engine  of the RDBMS , and how it transforms SQL statements into an operator tree that, in turn, can be used to generating multiple, parallelized access plans for execution by Access Module Processors A-E of the RDBMS .","In generating the SQL statements, the Selector function  groups multiple sets of Selection Criteria  together and processes the groups in parallel to the extent possible, and generates several sets of output tables. The goal is to process similar selection predicates together at the same time, so that fewer passes need to be made through the tables in the relational database. In a final pass, these output tables are filtered and combined to produce the correct sets for each source, target, and driver in the Profitability Calculation  rules.","This step is necessary because the Profitability Calculations  are scripts that operate against known, statically defined, tables. In the Value Analyzer system, the specification of Selection Criteria , and the attributes that can be used in the selection process, are completely dynamic and user-driven. There is no way for the scripts to contain this knowledge, nor can it be predefined as part of the scripts. The dynamic nature of the profitability rules using the Selector function is a core feature of the Value Analyzer system, and is one of the key competitive advantages that differentiates the Value Analyzer system from other profitability solutions.","When grouping Selection Criteria , the following is required:","1. The Selection Criteria  has to be applied to the same level of accounts.","2. That each of the Selection Criteria  are of the same types of Selection Criteria . For example, if two Selection Criteria  include both Product Group and Account Attribute, these can be grouped together. If one of the Selection Criteria  includes only Product Group, and the other Selection Criteria  includes both Product Group and Account Attribute, then these cannot be grouped together.","3. That each of the Selection Criteria  access the same attributes or columns. Note that an alternative embodiment would only require that each of the Selection Criteria  access the same table.","Using the above, each distinct group of Selection Criteria  can be processed independently. This allows the Selector function  to process each distinct group of Selection Criteria  in parallel. In this context, a partition is a set of one or more accounts that satisfy one or more Selection Criteria , in order to apply costs and revenues to each account.","Output Tables","After the temporary work tables have been created, the Selector function  filters and combines the temporary work tables, yielding output tables corresponding to the inputs for the Profitability Calculations , namely, the Account Attributes  and Event Attributes . These output tables include the account partitions for the rule, wherein the account partitions represent the target accounts against which the profitability rules are applied. The output tables are then processed by one or more of the Profitability Calculations  in the Value Analyzer Calculation Engine  to accomplish a final result.",{"@attributes":{"id":"p-0116","num":"0140"},"figref":"FIG. 4"},"Block  represents the Value Analyzer Client  accepting one or more Selection Criteria  from the user, which may include Selection Criteria  for Source, Target and Driver Components, Amounts and Counts, as well as event thresholding values.","Block  represents the Value Analyzer Calculation Engine  invoking a Selector function  for selecting accounts and events from the relational database based on the specified Selection Criteria  prior to the execution of the Profitability Calculations .","Block  represents the Selector function  performing rule screening for the selected accounts and events from the relational database based on the specified Selection Criteria .","Block  represents the Selector function  standardizing the Selection Criteria .","Block  represents the Selector function  grouping the standardized Selection Criteria .","Block  represents the Selector function  dynamically generating SQL statements for the selected accounts and events from the relational database based on the specified Selection Criteria .","Block  represents the Selector function  invoking the dynamically generated SQL statements, wherein the SQL statements are transmitted to the RDBMS . These SQL statements access account and event attributes from the database managed by the RDBMS .","Block  represents the Parsing Engine  of the RDBMS  receiving the SQL statements and transforming the statements into an operator tree.","Block  represents the Parsing Engine  of the RDBMS  generating one or more access plans from the operator tree.","Block  represents the Parsing Engine  of the RDBMS  parallelizing the access plans, and then transmitting the access plans to their assigned Access Module Processors A-E of the RDBMS .","Block  represents the Access Module Processors A-E of the RDBMS  executing the access plans, and thereby performing the required data manipulation associated with the access plans received from the Parsing Engine , wherein the required data manipulation associated with the access plans are performed in parallel by the Access Module Processors A-E.","Block  represents the Parsing Engine  of the RDBMS  standardizing the results received from the Access Module Processors A-E and providing the standardized results to the Value Analyzer Calculation Engine  as account and event attributes.","Block  represents the Value Analyzer Calculation Engine  invoking and performing the Profitability Calculations  using the account and event attributes accessed from the RDBMS , as well as one or more organization attributes, profit factors and rules.","Block  represents the Value Analyzer Calculation Engine  delivering the output or results from the Profitability Calculations  to the Value Analyzer Client  and\/or the RDBMS . With regard to the Value Analyzer Client , the results may be presented to the user, printed, or used by various other computer programs, as desired. With regard to the RDBMS , the results may be stored for later use by the Value Analyzer Client , the Value Analyzer Calculation Engine , or other computer programs, as desired.","This concludes the description of the preferred embodiment of the invention. The following paragraphs describe some alternative embodiments for accomplishing the same invention.","In one alternative embodiment, any type of computer or configuration of computers could be used to implement the present invention. In addition, any database management system, decision support system, on-line analytic processing system, or other computer program that performs similar functions could be used with the present invention.","In summary, the present invention discloses a Value Analyzer system, which is a data-driven computer-facilitated financial model that provides accurate and consistent profitability calculations using account and event data stored in a relational database managed by a relational database management system (RDBMS), wherein the account data comprises attributes of the accounts being measured and the event data comprises attributes of account-related transactions. A selector function uses selection criteria to select accounts and events from the relational database in order to generate a number of inputs for profitability calculations.","The foregoing description of the preferred embodiment of the invention has been presented for the purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise form disclosed. Many modifications and variations are possible in light of the above teaching. It is intended that the scope of the invention be limited not by this detailed description, but rather by the claims appended hereto."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Referring now to the drawings in which like reference numbers represent corresponding parts throughout:",{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 4"}]},"DETDESC":[{},{}]}
