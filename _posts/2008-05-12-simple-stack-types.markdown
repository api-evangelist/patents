---
title: Simple stack types
abstract: Embodiments that facilitate type checking of assembly language instructions are disclosed. In one embodiment, a method includes receiving a low level language instruction in a memory. The instruction includes a word having a first type. The memory includes either a stack or a heap. Each of the stack or heap includes a plurality of positions. The method also includes labeling the plurality of positions in one of the stack or the heap as one or more specified positions and one or more unspecified positions. The method further includes assigning a second type to the memory, the second type including the first type of the word. The word is stored in a specified position or an unspecified position. The method additionally includes determining whether the instruction is well-typed by applying one or more rules to the instruction and to the second type.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07975121&OS=07975121&RS=07975121
owner: Microsoft Corporation
number: 07975121
owner_city: Redmond
owner_country: US
publication_date: 20080512
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND","SUMMARY","DETAILED DESCRIPTION"],"p":["High-level programming languages such as Java, C++, and C# are generally used to produce source codes. These source codes are optimized and compiled by compilers to assembly language code before they are executed on machines. Compilers may contain program errors, which are also known as bugs, which may cause the compilers to compile safe source code to unsafe assembly language code. Programs based on unsafe assembly language code may malfunction and\/or cause other programs to malfunction. In some instances, the safety of assembly language code may be verified after compilation by \u201ctype checking\u201d mechanisms, provided that the source code is compiled into the assembly language code by a special type of compilers known as \u201ctype-preserving\u201d compilers. A \u201ctype-preserving\u201d compiler generates the \u201cevidence\u201d needed by the \u201ctype-checking\u201d mechanisms by transforming a well-typed source code into a well-typed assembly language code, preserving the types in the intermediate code during each compilation phase between the source code and assembly language code. \u201cType checking\u201d relies on the premise that a specific type indicates a set of values or expressions that have the same sort of generic meaning or intended purpose.","This Summary is provided to introduce a selection of concepts in a simplified form that is further described below in the Detailed Description. This Summary is not intended to identify key features or essential features of the claimed subject matter, nor is it intended to be used to limit the scope of the claimed subject matter.","Described herein are embodiments for implementing a \u201ctype checking\u201d system that enables a compiler to detect program errors during the compilation of a source code into an assembly language code. As used herein, assembly language code refers to any low level language code. Such low level language code may include, but is not limited to, intermediate code, bytecode, typed assembly language (TAL) code, and the like. For example, a compiler may transform a source code into an assembly language with stack and\/or heap operations. Accordingly, the embodiments described herein may enable a type checker function of a compiler to perform \u201ctype checking\u201d on stack and\/or heap operations. In other words, the type checker function may perform \u201ctype checking\u201d during compilation by the compiler.","In one embodiment, a method includes receiving a low level language instruction in a memory. The instruction includes a word having a first type. The memory includes either a stack or a heap. Each of the stack or heap includes a plurality of positions. The method also includes labeling the plurality of positions in one of the stack or the heap as one or more specified positions and one or more unspecified positions. The method further includes assigning a second type to the memory, the second type including the first type of the word. The word is stored in a specified position or an unspecified position. The method additionally includes determining whether the instruction is well-typed by applying one or more rules to the instruction and to the second type. Other embodiments will become more apparent from the following detailed description when taken in conjunction with the accompanying drawings.","This disclosure is directed to embodiments that enable type checking of assembly language code compiled from source code by a compiler. Assembly language code typically performs stack operations. A stack may be described as a \u201ccontainer\u201d of sequential locations in a memory, wherein each location is capable of storing a data item. The data item may also be referred to as a \u201cword.\u201d During operation, data items are added and removed from the stack on a \u201cfirst in first out\u201d (FIFO) basis. In other words, data items may be added one at a time into each location of the stack. The data items may be thought of as being \u201cstacked\u201d one on top of the other so that the last data item added, that is, \u201callocated\u201d to the stack is always the first to be removed, that is, \u201cdeallocated\u201d from the stack. Furthermore, the stack may also include a stack pointer, such as hardware register, that points to the most recently referenced location on the stack. Accordingly, as data items are added or removed from the stack, the stack point may be displaced to indicate the current extent of the stack.","The embodiments described herein are directed to implementation mechanisms for a type system that enables a \u201ctype checker\u201d to perform \u201ctype checking\u201d functions on the stack operations. For example, the type system may include logical operation rules. The logical operation rules may be implemented by the type checker to perform the \u201ctype checking\u201d functions. The logical operation rules may include operand typing rules, stack rules, stack implication rules, lookup rules, heap rules, and instruction typing rules. Accordingly, various examples of the logical operation rules, as well as \u201ctype checking\u201d mechanisms that implement these logical operation rules, are described below with reference to .","Exemplary Scheme",{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 1","b":["102","104","102","104","104","106","106","108","104","104","106","108","108","106","110","108","106","108","106","108"]},"Simple Stack Type (SST) System","A type system defines how a programming language classifies values and expressions into types. Additionally, a type system also governs the manipulation of those types by the programming language, as well as the interactions between the types and the programming language.","Embodiments described herein are direct to a type system, also referred to as Simple Stack Type (SST), which enables a \u201ctype checker\u201d to perform \u201ctype checking\u201d functions on the stack operations. In order to accomplish this task, the type system described herein supports identifying \u201cspecified\u201d (labeled) locations and \u201cunspecified\u201d (unlabeled) locations for one or more data items in a stack. For example, SST may represent that two integers are present at the top of the stack, but all locations deeper in the stack may be unspecified. It will be appreciated that the stack type representation in the type system for stack operations, as further described in the various embodiments below, is in Backus Naur Form (BNF) notation. Accordingly, in the example describe above, the representation described above may be written as \u201cintint\u03c1\u201d using BNF notation, which represents that two integers are present at the top of the stack, but all types deeper in the stack are abstracted by \u03c1, which represents stack type variables. In various instances, SST is generally implemented into an assembly language that supports types. SST is further described below.","Simple Stack Type (SST) Implementation","SST splits a pointer type into two parts: the location l of the data, and the type of the data at location l. Additionally, a pointer to the data has a singleton type Ptr(l), which indicates that the pointer points exactly to the location l, but does not specify the type of the data at location l. Instead, a separate capability specifies the current type at l. For example, the capability {lint} represents that l holds an integer. Because of the separation between singleton pointer types and capabilities, the capabilities can evolve, independently of the pointer types, to track updates and deallocation.","To ensure that no two capabilities specify contradictory information about a single location, SST imposes a linearity discipline on the treatment of capabilities, prohibiting arbitrary duplication of the information contained in a capability. Accordingly, the type system in accordance with various embodiments uses operators and rules that include elements of standard linear logic and separation logic to form a \u201cdecidable logic.\u201d","Thus, the type system in accordance with the embodiments may incorporate the singleton pointers and the elements from standard linear logic and separation logic to represent \u201cstack type\u201d. Linear logic and separation logic share a core of basic operators. Two are of particular interest for stacks: multiplicative conjunction \u201c\u201d (written as \u201c*\u201d in separation logic) and additive conjunction \u201c&\u201d (written as \u201c\u201d in separation logic). For instance, to have \u201ccoffeetea\u201d is to have both coffee and tea. However, to have \u201ccoffee&tea\u201d is to have a choice between coffee and tea, but not both. For example, the stack type intint\u03c1 may be represented in linear logic notation as {lint}{lint}\u03c1, where land lare the locations of each of the two integers on the stack. Each integer on the stack has a capability {lint}. The  operator would glue capabilities together to form a complete stack capability: The type system in accordance with the embodiments advantageously improves on these notations. First, for the purpose of simplifying the type checking algorithm, the type system replaces the commutative, associative operator  with the non-commutative, non-associativeoperator, resulting in a stack capability {lint}{lint}\u03c1. Second, rather than showing one location per stack slot, the notation of the type system puts stack slots in between locations, thus l:intl:intl:\u03c1 indicate that one integer falls between locations land l, and the other falls between locations land l. These improvements add the extra location lto the representation. For instance, the stack pointer may have type Ptr(l), pointing to the top of the stack when a frame pointer has type Ptr(l) pointing to the bottom of the frame.","Further, the  operator indicates aliasing. Accordingly, the stack type \u03c3{l:\u03c4} indicates three things. First, \u03c3 is a valid stack that holds stack items (words). Second, the location l resides either in the heap or in the part of the stack described by \u03c3. Third, l currently contains a data item (word) of type \u03c4.","Accordingly, SST may use labeled stack types  and unlabeled stack types \u03c3 (where \u03c4 indicates a single-word type, such as int), as further described with respect to :\n\nLabeled stack type =l:\u03c3\u2003\u2003(1)\n\nUnlabeled stack type \u03c3=\u03c1|EMPTY|\u03c4\u03c3{l:\u03c4}\u2003\u2003(2)\n\nWherein the \u201c|\u201d notation indicates alternative choices, \u03c1 represents unlabeled stack type variables, \u201cEMPTY\u201d represents empty stacks, \u03c4 represents the type for a particular location, and  is the stack concatenation operator. The notation \u03c4 represents that a data item of a type \u03c4 is being \u201cpushed\u201d onto the stack . The \u03c3{l:\u03c4} notation represents that somewhere in the stack, there is a data item (word) with the type \u03c4, but the exact location of the data item with the type \u03c4 is unknown.\n",{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIGS. 2A and 2B","b":["200","200","200","200","200","200","200","200","200","200","200","200","200","202","200","200","200"],"i":["a","b","c","d","e","f","a ","b "],"sub":["1","2"],"img":{"@attributes":{"id":"CUSTOM-CHARACTER-00034","he":"3.13mm","wi":"2.12mm","file":"US07975121-20110705-P00001.TIF","alt":"custom character","img-content":"character","img-format":"tif"}}},"The representation  illustrates the stack type of  with location notions. The location notation l represents a location in the stack. Accordingly, the pairing of the type \u03c4 with the location notation l provides the location of data item of type \u03c4 in the stack. In one instance of SST, each data item of a specific type in the stack may be assigned a location as soon as it is \u201cpushed\u201d onto the stack . As shown in representation , each data item of a specific type \u03c4 is represented by a location l, as indicated by the \u201c:\u201d (colon) notation. For example, as shown in representation , the data item with the type \u03c4is located in the location l, the data item with the type \u03c4is located in the location l, and so on and so forth.","Representation  adds aliasing notations to . As shown in representation , each data item of a specific type \u03c4, e.g., \u03c4, is paired with a location l, e.g., l. Additionally, {l:\u03c4} represents the fact that the data item with type \u03c4resides at location l. Likewise, {l:\u03c4} represents the fact that the data item with type \u03c4resides at location l, but the location lis in the portion l:\u03c4l:\u03c4l:\u03c4:l:\u03c4\u03c1 of the stack . For example, such an instance for lmay occur when a first method may provide the location lto a second method where the second method does not know the location l.","As shown in , the location notation l, as used in the type system, may be further expanded. For example, an location lthat corresponds to the base, or the first slot of a stack , may be written as \u201cl=base\u201d. Likewise, an location l, or a slot that is directly adjacent to location l, may be written as l=next(l). However, while some locations may be represented by specific location such as \u201cbase\u201d, most methods are configured to run without knowledge of the actual locations of the stack. Accordingly, representation  illustrates an unspecified location, as represented by the notation \u03b7. In other words, the notation \u03b7 represents a location that is present in the stack, but not precisely specified. Representation  also illustrates a location l that references a heap location with the use of a heap pointer \u03c1. In general, it will be appreciated that the notation illustrated above are also applicable to a heap data structure in a memory.","The application of the notation system described above is also illustrated in . As shown in representation , an exemplary function \u201ch\u201d takes two integer parameters, such as \u201cint x\u201d and \u201cint y\u201d. The parameters \u201cint x\u201d and \u201cint y\u201d may be stored in a stack, such as stack . Thus, when the function \u201ch\u201d is called, the structure of the stack may be represented by representation . The function \u201ch\u201d may declare \u201cintint\u03c1\u201d, or that it needs a first integer (e.g., \u201cint x\u201d), a second integer (e.g., \u201cint y\u201d), and one or more other words of unspecified locations from the stack, as represent by \u03c1. Using the \u03b7 notation, the unspecified location of the one or more words may be represented, as demonstrated by the part \u03b7:\u03c1. Further, one of the integers in the stack may be represented as being stored at location next(\u03b7), indicating a location that is relative to, that is, \u201cnext\u201d to the location represented by the notation \u03b7. Similarly, the other integer in the stack may be represented as having a location of next(next(\u03b7)). The next(next(\u03b7)) representation indicates a location that is \u201cnext\u201d to the next(\u03b7) location.","Representation shows an exemplary swap function \u201cswap.\u201d The exemplary \u201cswap\u201d function takes references to integers rather than integers, as indicated by \u201cref int x\u201d, and \u201cref int y,\u201d so that changes to x and y in \u201cswap\u201d will be visible when \u201cswap\u201d returns to a caller function. When the function \u201cswap\u201d is called, the structure of the stack may be represented by representation . As shown, the \u201cref int y\u201d may be stored as a reference pointer, or Ptr(\u03b7) at a location in the stack next(\u03b7). Likewise, the \u201cref int x\u201d may be stored as a reference pointer, or Ptr(\u03b7) at a location in the stack next(next(\u03b7)). Additionally, in order to use the pointers Ptr(\u03b7) and Ptr(\u03b7), a method needs to know that an integer is stored at \u03b7, and another integer is stored at \u03b7. Thus, because the integers are generally located in \u03c1, the notation \u03b7:(\u03c1{\u03b7:int}{\u03b7:int}) indicates that an integer is located somewhere in \u03c1 at a location \u03b7, and another integer is located somewhere in \u03c1 at a location \u03b7. Accordingly, representation represents information that enables a method to find an address at an stack slot referenced by Ptr(\u03b7), and de-reference that address to find the integer stored at \u03b7, as indicated in {\u03b7:int}. Similarly, a method may find the integer stored at \u03b7, as indicated in {\u03b7:int}, by finding an address at an stack slot referenced by Ptr(\u03b7) and de-referencing that address.","Returning to , a stack representation may be manipulated using a set of logic stack implication rules. These stack implication rules, as show below, may enable a type checker mechanism, such as type checker engine , to manipulate the stack types:",{"@attributes":{"id":"p-0030","num":"0029"},"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mtable":{"mtr":[{"mtd":[{"mrow":{"mrow":{"mi":["s","imp","eq"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mtext":"-"}]},"mo":"\u2062","mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},{"mover":{"mrow":{"mi":["\u03c2","\u03c2"],"mo":"\u21d2"},"mi":"_"}}]},{"mtd":[{"mrow":{"mi":["s","imp","concat"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mtext":"-"}]}},{"mfrac":{"mrow":[{"mi":"\u03c2","mo":"\u21d2","msup":{"mi":["\u03c2","\u2032"]}},{"mrow":[{"mi":["l","\u03c4","\u03c2"],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":"::"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]},{"mi":["l","\u03c4"],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":"::"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"msup":{"mi":["\u03c2","\u2032"]}}],"mo":"\u21d2"}]}}]},{"mtd":[{"mrow":{"mi":["s","imp","alias"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mtext":"-"}]}},{"mfrac":{"mrow":[{"mrow":[{"mi":["l","\u03c3"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]},{"mi":"l","mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"msup":{"mi":["\u03c3","\u2032"]}}],"mo":"\u21d2"},{"mrow":[{"mi":"l","mo":["\u2062","\u2062","\u2062"],"mstyle":[{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mrow":{"mo":["(",")"],"mrow":{"mi":"\u03c3","mo":"\u22c0","mrow":{"mo":["{","}"],"mrow":{"msub":{"mi":["l","t"]},"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mi":"\u03c4"}}}}},{"mi":"l","mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mrow":{"mo":["(",")"],"mrow":{"msup":{"mi":["\u03c3","\u2032"]},"mo":"\u22c0","mrow":{"mo":["{","}"],"mrow":{"msub":{"mi":["l","t"]},"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mi":"\u03c4"}}}}}],"mo":"\u21d2"}]}}]},{"mtd":[{"mrow":{"mi":["s","imp","trans"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mtext":"-"}]}},{"mfrac":{"mrow":[{"msub":[{"mi":"\u03c2","mn":"1"},{"mi":"\u03c2","mn":"3"}],"mo":["\u21d2","\u21d2"],"mrow":{"msub":[{"mi":"\u03c2","mn":"2"},{"mi":"\u03c2","mn":"2"}],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}}},{"msub":[{"mi":"\u03c2","mn":"1"},{"mi":"\u03c2","mn":"3"}],"mo":"\u21d2"}]}}]},{"mtd":[{"mrow":{"mi":["s","imp","add","alias"],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mtext":"-"},{"mtext":"-"}]}},{"mfrac":{"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mrow":{"mrow":[{"mi":"l","mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mrow":{"mo":["(",")"],"mrow":{"mi":["\u03c4","\u03c2"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":"::"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}}},{"mi":"l","mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mrow":{"mo":["(",")"],"mrow":{"mi":"\u03c4","mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":"::"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mrow":{"mi":"\u03c2","mo":"\u22c0","mrow":{"mo":["{","}"],"mrow":{"mi":["l","\u03c4"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}}}}}}],"mo":"\u21d2"}}}]},{"mtd":[{"mrow":{"mi":["s","imp","drop","alias"],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mtext":"-"},{"mtext":"-"}]}},{"mfrac":{"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mrow":{"mrow":[{"mi":"l","mo":["\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"}],"mrow":{"mo":["(",")"],"mrow":{"mi":"\u03c3","mo":["\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":"::"}],"mrow":{"mi":"\u03c2","mo":"\u22c0","mrow":{"mo":["{","}"],"mrow":{"mi":["l","\u03c4"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}}}}}},{"mi":["l","\u03c3"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}],"mo":"\u21d2"}}}]},{"mtd":[{"mrow":{"mi":["s","imp","expand","alias"],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mtext":"-"},{"mtext":"-"}]}},{"mover":{"mrow":{"mrow":[{"mi":"l","mo":["\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"}],"mrow":{"mo":["(",")"],"mrow":{"msub":[{"mi":"\u03c4","mn":"1"},{"mi":["l","q"]}],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":"::"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mrow":{"mo":["(",")"],"mrow":{"mi":"\u03c3","mo":"\u22c0","mrow":{"mo":["{","}"],"mrow":{"msub":[{"mi":"l","mn":"2"},{"mi":"\u03c4","mn":"2"}],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}}}}}}},{"mi":"l","mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mrow":{"mo":["(",")"],"mrow":{"mrow":[{"mo":["(",")"],"mrow":{"msub":[{"mi":"\u03c4","mn":"1"},{"mi":["l","q"]}],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":"::"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mi":"\u03c3"}},{"mo":["{","}"],"mrow":{"msub":[{"mi":"l","mn":"2"},{"mi":"\u03c4","mn":"2"}],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}}],"mo":"\u22c0"}}}],"mo":"\u21d2"},"mi":"_"}}]},{"mtd":[{"mrow":{"mi":["s","imp","merge","alias"],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mtext":"-"},{"mtext":"-"}]}},{"mfrac":{"mrow":[{"mi":"\u03c2","mo":["\u21d2","\u21d2"],"mrow":[{"mi":["l","\u03c2"],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}}],"mrow":{"mo":["(",")"],"mrow":{"mi":"\u03c3","mo":"\u22c0","mrow":{"mo":["{","}"],"mrow":{"msub":[{"mi":"l","mn":"1"},{"mi":"\u03c4","mn":"1"}],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}}}}},{"mi":"l","mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mrow":{"mo":["(",")"],"mrow":{"mi":"\u03c3","mo":"\u22c0","mrow":{"mo":["{","}"],"mrow":{"msub":[{"mi":"l","mn":"2"},{"mi":"\u03c4","mn":"2"}],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}}}}}]},{"mi":"\u03c2","mo":"\u21d2","mrow":{"mi":"l","mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mrow":{"mo":["(",")"],"mrow":{"mi":"\u03c3","mo":["\u22c0","\u22c0"],"mrow":[{"mo":["{","}"],"mrow":{"msub":[{"mi":"l","mn":"1"},{"mi":"\u03c4","mn":"1"}],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}},{"mo":["{","}"],"mrow":{"msub":[{"mi":"l","mn":"2"},{"mi":"\u03c4","mn":"2"}],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}}]}}}}]}}]}]}},{"mtable":{"mtr":[{"mtd":{"mrow":{"mo":["(",")"],"mn":"3"}}},{"mtd":{"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},{"mtd":{"mrow":{"mo":["(",")"],"mn":"4"}}},{"mtd":{"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},{"mtd":{"mrow":{"mo":["(",")"],"mn":"5"}}},{"mtd":{"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},{"mtd":{"mrow":{"mo":["(",")"],"mn":"6"}}},{"mtd":{"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},{"mtd":{"mrow":{"mo":["(",")"],"mn":"7"}}},{"mtd":{"mrow":{"mo":["(",")"],"mn":"8"}}},{"mtd":{"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},{"mtd":{"mrow":{"mo":["(",")"],"mn":"9"}}},{"mtd":{"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},{"mtd":{"mrow":{"mo":["(",")"],"mn":"10"}}}]}}]}}}},"br":{},"img":[{"@attributes":{"id":"CUSTOM-CHARACTER-00046","he":"2.46mm","wi":"7.79mm","file":"US07975121-20110705-P00008.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00047","he":"2.46mm","wi":"2.12mm","file":"US07975121-20110705-P00005.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00048","he":"2.46mm","wi":"2.12mm","file":"US07975121-20110705-P00005.TIF","alt":"custom character","img-content":"character","img-format":"tif"}}]},"Further, the \u201cs-imp-expand-alias\u201d rule expands the scope of an alias. For example, for the swap function:",{"@attributes":{"id":"p-0032","num":"0031"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"void f( ) {"]},{"entry":[{},"\u2003\u2003\u2003\u2003int a = 10, b = 20;"]},{"entry":[{},"\u2003\u2003\u2003\u2003swap(ref a, ref b); }"]},{"entry":[{},"void g( ) {"]},{"entry":[{},"\u2003\u2003\u2003\u2003int c = 30;"]},{"entry":[{},"\u2003\u2003\u2003\u2003swap(ref c, ref c); }"]},{"entry":[{},"void swap(ref int x, ref int y) {"]},{"entry":[{},"\u2003\u2003\u2003\u2003int t = x;"]},{"entry":[{},"\u2003\u2003\u2003\u2003x = y;"]},{"entry":[{},"\u2003\u2003\u2003\u2003y = t; }"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}},"br":[{},{},{},{},{},{}],"in-line-formulae":[{},{},{},{},{},{}],"sub":["2","x","1","y","0","x","y","x ","y ","x ","y ","0","0","0","0","0","x","y","0 ","0","y","x","0","x","y"],"img":[{"@attributes":{"id":"CUSTOM-CHARACTER-00049","he":"3.13mm","wi":"2.12mm","file":"US07975121-20110705-P00001.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00050","he":"3.13mm","wi":"2.12mm","file":"US07975121-20110705-P00001.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00051","he":"2.46mm","wi":"1.78mm","file":"US07975121-20110705-P00004.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00052","he":"2.46mm","wi":"1.78mm","file":"US07975121-20110705-P00004.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00053","he":"3.13mm","wi":"2.12mm","file":"US07975121-20110705-P00001.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00054","he":"2.79mm","wi":"3.89mm","file":"US07975121-20110705-P00007.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00055","he":"2.79mm","wi":"3.13mm","file":"US07975121-20110705-P00009.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00056","he":"2.79mm","wi":"3.89mm","file":"US07975121-20110705-P00007.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00057","he":"2.46mm","wi":"1.78mm","file":"US07975121-20110705-P00004.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00058","he":"3.13mm","wi":"2.12mm","file":"US07975121-20110705-P00001.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00059","he":"2.79mm","wi":"3.89mm","file":"US07975121-20110705-P00007.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00060","he":"2.46mm","wi":"1.78mm","file":"US07975121-20110705-P00004.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00061","he":"2.46mm","wi":"1.78mm","file":"US07975121-20110705-P00004.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00062","he":"2.79mm","wi":"3.13mm","file":"US07975121-20110705-P00009.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00063","he":"2.46mm","wi":"1.78mm","file":"US07975121-20110705-P00004.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00064","he":"2.46mm","wi":"1.78mm","file":"US07975121-20110705-P00004.TIF","alt":"custom character","img-content":"character","img-format":"tif"}}]},"In various instances, the syntax \u03c3{l:\u03c4} expresses a clear scope in which l remains safe to use: l definitely contains type \u03c4 as long as \u03c3 remains unmodified. Accordingly, if the program deallocates a data item from \u03c3, for example, then the alias {l:\u03c4} is generally discarded. Thus, the scope is governed by the fact that \u201cs-imp-expand-alias\u201d expands the scope of an alias, but a logical implication rule to contract the scope is not implemented.","Formalization","The type system in accordance with the various embodiments may be formalized for execution by a type checking mechanism, such as the type checker of a compiler. First, a type system may support at least integer type \u201cint\u201d, nonsense type \u201cNonsense\u201d for uninitialized stack slots, heap pointer type \u201cHeapPtr(\u03c4)\u201d for pointers to heap values of type \u03c4, singleton type \u201cPtr(\u03c4)\u201d, and code type \u201c\u2200[\u0394](\u0393,)\u201d. Accordingly, the exemplary types supported by the type system may be summarized as follows:\n\ntype \u03c4=int|Nonsense|HeapPtr(\u03c4)|Ptr()|\u2200[\u0394](\u0393,)\u2003\u2003(14)\n\nThe type \u201c\u2200[\u0394](\u0393,)\u201d describes preconditions for code blocks. The location environment \u0394 is a sequence of location variables and stack type variables. The register file \u0393 is a partial function from registers to types. \u0393 and  describe the initial register and stack states for the blocks. They may refer to the variables in \u0394.\n","Second, the formalized type system also includes a plurality of standardized values and operands. These values and operands may include the stack location d, which refers to either a \u201cbase\u201d stack location or the next stack location \u201cnext(d)\u201d. A word-sized value w may be an integer \u201ci\u201d, the \u201cnonsense\u201d value for uninitialized stack slots, a heap location \u201cp\u201d, a stack location \u201cd\u201d, or instantiated values \u201cw[l]\u201d and \u201cw[\u03c3]\u201d where w points to code blocks polymorphic over location variables and stack type variables. Contents of registers and stack slots are word-sized. Moreover, word-sized values may be separated from operands to prevent registers from containing registers. An operand o may be a register \u201cr\u201d, a word-sized value \u201cw\u201d, or instantiated operands \u201co[l]\u201d and \u201co[\u03c3]\u201d. A special register sp is used for the stack pointer. Accordingly, the exemplary stack location, word value, and operand values may be summarized as follows:\n\nstack loc =base|next()\u2003\u2003(15)\n\nword value =|nonsense|\u2003\u2003(16)\n\noperand \u2003\u2003(17)\n","Third, the type system in accordance with various embodiments may be used to type check standard instructions, such as \u201cmov\u201d and \u201cadd\u201d instructions. However, in some instances, specialized instructions are needed in order to access the stack or the heap. For example, values on a heap or a stack are accessed through explicit load and store instructions. Moreover, \u201cladd\u201d instructions are used for stack location arithmetic. In a \u201cladd\u201d instruction \u201cladd r, i\u201d, the first operand r points to a stack location, and the second operand i is a constant integer (positive or negative). A \u201cladd\u201d instruction moves the stack pointer along the stack according to the integer value. In contrast, standard add and subtract instructions deal with only integer arithmetic. The heap allocation instruction \u201cheapalloc r=o\u201d allocates a word on the heap with initial value o and assigns the new heap location to r. The unpack instruction \u201c(\u03b7, r)=unpack(o)\u201d coerces a heap pointer o to a heap location. Moreover, the instruction also introduces a fresh location variable \u03b7 for o and assigns \u03b7 to r. Accordingly, these instructions may be summarized as follows:\n\ninstr ins=mov |add |sub |ladd |load ]|store [|jumpif0 |heapalloc =o|(\u03b7,)=unpack()\u2003\u2003(18)\n","Fourth, in order to implement the type system in accordance the various embodiments, a plurality of environments are maintained by the type checker. In addition to the location environment \u0394 and the register file \u0393, the type checker may also maintain the heap environment \u03a8. The heap environment \u03a8 is a partial function from heap locations to heap pointer types.","Typing Rules","In various embodiments, the type system may include operand typing rules as shown below. In these operand typing rules, the rule \u0394; \u03a8; \u0393o:\u03c4 means that operand o has type r under the environments. The heap location may be presented in two ways: the type in the heap environment (o-p-H) or a singleton type (o-p), as shown below in (23) and (24). A stack location has a singleton type (o-d), as shown below in (22):\n\no-reg  \u2003\u2003(19)\n\no-int  \u2003\u2003(20)\n\no-ns  \u2003\u2003(21)\n\no-d  \u2003\u2003(22)\n\no-p-H  \u2003\u2003(23)\n\no-p \u0394;\u03a8;\u0393p:Ptr(p)\u2003\u2003(24)\n","If an operand o has a polymorphic type \u2200[\u0394](\u0393,), o[ l] and o[\u03c3] instantiate the first variable in \u0394 with l and \u03c3 respectively. The rules \u0394l and \u0394\u03c3 mean that l and a are well-formed under \u0394 respectively, as shown below:",{"@attributes":{"id":"p-0040","num":"0039"},"maths":{"@attributes":{"id":"MATH-US-00002","num":"00002"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":[{"mtd":[{"mrow":{"mi":["o","inst"],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mtext":"-"},{"mspace":{"@attributes":{"width":"2.2em","height":"2.2ex"}}}],"mn":"1","mfrac":{"mrow":[{"mi":["\u0394","\u03a8"],"mo":[";",";"],"mrow":{"mi":["\u0393","l"],"mo":["\u22a2","\u22a2"],"mrow":{"mi":"o","mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mrow":{"mo":"\u2200","mrow":{"mrow":[{"mo":["[","]"],"mrow":{"mi":"\u03b7","mo":",","msup":{"mi":["\u0394","\u2032"]}}},{"mo":["(",")"],"mrow":{"msup":{"mi":["\u0393","\u2032"]},"mo":",","mi":"\u03c2"}}],"mo":["\u2062","\u2062"],"mi":"\u0394"}}}}},{"mi":["\u0394","\u03a8"],"mo":[";",";"],"mrow":{"mi":"\u0393","mo":"\u22a2","mrow":{"mrow":[{"mi":"o","mo":"\u2061","mrow":{"mo":["[","]"],"mi":"l"}},{"mo":"\u2200","mrow":{"mrow":[{"mo":["[","]"],"msup":{"mi":["\u0394","\u2032"]}},{"mo":["(",")"],"mrow":{"msup":{"mi":["\u0393","\u2032"]},"mo":[",",","],"mrow":[{"mo":["[","]"],"mfrac":{"mi":["l","\u03b7"]}},{"mi":"\u03c2","mo":"\u2061","mrow":{"mo":["[","]"],"mfrac":{"mi":["l","\u03b7"]}}}]}}],"mo":"\u2062"}}],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}}}]}}},{"mrow":{"mo":["(",")"],"mn":"25"}}]},{"mtd":[{"mrow":{"mi":["o","inst","Q"],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mtext":"-"},{"mspace":{"@attributes":{"width":"2.2em","height":"2.2ex"}}}],"mfrac":{"mrow":[{"mi":["\u0394","\u03a8"],"mo":[";",";"],"mrow":{"mi":["\u0393","\u03c3"],"mo":["\u22a2","\u22a2"],"mrow":{"mi":"o","mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mrow":{"mo":"\u2200","mrow":{"mrow":[{"mo":["[","]"],"mrow":{"mi":"\u03c1","mo":",","msup":{"mi":["\u0394","\u2032"]}}},{"mo":["(",")"],"mrow":{"msup":{"mi":["\u0393","\u2032"]},"mo":",","mi":"\u03c2"}}],"mo":["\u2062","\u2062"],"mi":"\u0394"}}}}},{"mi":["\u0394","\u03a8"],"mo":[";",";"],"mrow":{"mi":"\u0393","mo":"\u22a2","mrow":{"mrow":[{"mi":"o","mo":"\u2061","mrow":{"mo":["[","]"],"mi":"\u03c3"}},{"mo":"\u2200","mrow":{"mrow":[{"mo":["[","]"],"msup":{"mi":["\u0394","\u2032"]}},{"mo":["(",")"],"mrow":{"msup":{"mi":["\u0393","\u2032"]},"mo":[",",","],"mrow":[{"mo":["[","]"],"mfrac":{"mi":["\u03c3","\u03c1"]}},{"mi":"\u03c2","mo":"\u2061","mrow":{"mo":["[","]"],"mfrac":{"mi":["\u03c3","\u03c1"]}}}]}}],"mo":"\u2062"}}],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}}}]}}},{"mrow":{"mo":["(",")"],"mn":"26"}}]}]}}}},"The rule (\u0393,){r\u2190\u03c4}(\u0393,) means that assigning a value of type \u03c4 to register r results in new environments \u0393\u2032 and \u2032. Only \u0393 is changed if r is not sp. Otherwise, the stack grows or shrinks according to the new value of sp, as shown below:",{"@attributes":{"id":"p-0042","num":"0041"},"maths":{"@attributes":{"id":"MATH-US-00003","num":"00003"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":[{"mtd":[{"mrow":{"mi":["a","not","esp"],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mtext":"-"},{"mspace":{"@attributes":{"width":"1.9em","height":"1.9ex"}}}],"mfrac":{"mrow":[{"mrow":[{"mi":"r","mo":"\u2260","mrow":{"mi":"sp","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"msup":{"mi":["\u0393","\u2032"]}}},{"mi":"\u0393","mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mi":["r","\u03c4"],"mo":"\u21a6"}}}],"mo":"="},{"mo":"\u22a2","mrow":{"mrow":[{"mo":["(",")"],"mrow":{"mi":["\u0393","\u03c2"],"mo":","}},{"mo":["{","}"],"mrow":{"mi":["r","\u03c4"],"mo":"\u2190"}},{"mo":["(",")"],"mrow":{"msup":{"mi":["\u0393","\u2032"]},"mo":",","mi":"\u03c2"}}],"mo":["\u2062","\u2062"]}}]}}},{"mrow":{"mo":["(",")"],"mn":"27"}}]},{"mtd":[{"mrow":{"mi":["a","esp"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mspace":{"@attributes":{"width":"1.7em","height":"1.7ex"}}}],"mfrac":{"mrow":[{"mrow":[{"mo":"\u22a2","mrow":{"mi":"Resize","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mrow":{"mo":["(",")"],"mrow":{"mi":["l","\u03c2"],"mo":","}}}},{"mrow":[{"msup":[{"mi":["\u03c2","\u2032"]},{"mi":["\u0393","\u2032"]}],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}}},{"mi":"\u0393","mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mi":"sp","mo":"\u21a6","mrow":{"mi":"Ptr","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mrow":{"mo":["(",")"],"mi":"l"}}}}}],"mo":"="}],"mo":"="},{"mo":"\u22a2","mrow":{"mrow":[{"mo":["(",")"],"mrow":{"mi":["\u0393","\u03c2"],"mo":","}},{"mo":["{","}"],"mrow":{"mi":"sp","mo":"\u2190","mrow":{"mi":"Ptr","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"l"}}}},{"mo":["(",")"],"mrow":{"msup":[{"mi":["\u0393","\u2032"]},{"mi":["\u03c2","\u2032"]}],"mo":","}}],"mo":["\u2062","\u2062"]}}]}}},{"mrow":{"mo":["(",")"],"mn":"28"}}]}]}}}},"Moreover, the type system may also include stack rules that resize the stack. For instance, when the stack grows or shrinks, the type system in accordance with the embodiments may implement the judgment Resize(l,)=\u2032 to get the new stack type. The judgment means that resizing stack  to l location results in stack . The location l will be the top of \u2032. Accordingly, the stack shrinks if l is inside  (s-shrink) and grows if l is beyond the top of  (s-grow). The stack drops all aliases beyond l when shrinking to avoid dangling pointers, as shown below:",{"@attributes":{"id":"p-0044","num":"0043"},"maths":{"@attributes":{"id":"MATH-US-00004","num":"00004"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mtable":{"mtr":[{"mtd":[{"mrow":{"mi":["s","shrink"],"mo":["\u2062","\u2062"],"mstyle":{"mtext":"-"}}},{"mfrac":{"mrow":[{"mi":"\u03c2","mo":"\u21d2","mrow":{"mover":{"mi":"r","mo":"\u2192"},"mo":["\u2062","@"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mrow":{"mo":["(",")"],"mrow":{"mi":["l","\u03c3"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}}}},{"mrow":[{"mo":"\u22a2","mrow":{"mi":"Resize","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mrow":{"mo":["(",")"],"mrow":{"mi":["l","\u03c2"],"mo":","}}}},{"mi":["l","\u03c3"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}],"mo":"="}]}}]},{"mtd":[{"mrow":{"mi":["s","grow"],"mo":["\u2062","\u2062"],"mstyle":{"mtext":"-"}}},{"mfrac":{"mrow":[{"msup":{"mi":["\u03c2","\u2032"]},"mo":"=","mrow":{"mrow":[{"mo":["(",")"],"mrow":{"msub":[{"mi":["Nonsense","n"]},{"mi":"Nonsense","mn":"1"}],"mo":[";","\u2062",";"],"mi":"\u2026","mstyle":{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}}}},{"mo":["(",")"],"mrow":{"mi":["l","\u03c3"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}}],"mo":"@"}},{"mrow":{"mo":"\u22a2","mrow":{"mi":"Resize","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}},"mrow":{"mo":["(",")"],"mrow":{"mrow":[{"msup":{"mi":["Next","n"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"l"}},{"mi":["l","\u03c3"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}],"mo":","}}}},"mo":"=","msup":{"mi":["\u03c2","\u2032"]}}]}}]}]}},{"mtable":{"mtr":[{"mtd":{"mrow":{"mo":["(",")"],"mn":"29"}}},{"mtd":{"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},{"mtd":{"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},{"mtd":{"mrow":{"mo":["(",")"],"mn":"30"}}}]}}]}}}},"br":{},"img":[{"@attributes":{"id":"CUSTOM-CHARACTER-00101","he":"3.56mm","wi":"3.13mm","file":"US07975121-20110705-P00013.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00102","he":"2.46mm","wi":"2.12mm","file":"US07975121-20110705-P00005.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00103","he":"2.46mm","wi":"2.12mm","file":"US07975121-20110705-P00005.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00104","he":"2.79mm","wi":"3.13mm","file":"US07975121-20110705-P00009.TIF","alt":"custom character","img-content":"character","img-format":"tif"}}]},{"@attributes":{"id":"p-0045","num":"0044"},"maths":{"@attributes":{"id":"MATH-US-00005","num":"00005"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mtable":{"mtr":[{"mtd":[{"mrow":{"mi":["s","offset","next"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mtext":"-"}]}},{"mfrac":{"mrow":[{"mi":"\u03c2","mo":"\u21d2","mrow":{"mover":{"mi":"r","mo":"\u2192"},"mo":["\u2062","@","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mrow":{"mo":["(",")"],"mrow":{"mi":["l","\u03c3"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}}}},{"mrow":[{"mi":"\u03c2","mo":"\u22a2","mrow":{"mi":["l","n"],"mo":"+"}},{"msup":{"mi":["next","n"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"l"}}],"mo":["\u2062","="],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}]}}]},{"mtd":[{"mrow":{"mi":["s","offset","prev"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mtext":"-"}]}},{"mfrac":{"mrow":[{"mi":"\u03c2","mo":"\u21d2","mrow":{"mover":{"mi":"r","mo":"\u2192"},"mo":["\u2062","@","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mrow":{"mo":["(",")"],"mrow":{"mi":["\u2113","\u03c3"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}}}},{"mrow":{"mi":"\u03c2","mo":"\u22a2","mrow":{"mrow":[{"msup":{"mi":["next","n"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"l"}},{"mo":["(",")"],"mrow":{"mo":"-","mi":"n"}}],"mo":"+"}},"mo":"=","mi":"l"}]}}]}]}},{"mtable":{"mtr":[{"mtd":{"mrow":{"mo":["(",")"],"mn":"31"}}},{"mtd":{"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},{"mtd":{"mrow":{"mo":["(",")"],"mn":"32"}}}]}}]}}}}},"Moreover, the rule l:r means that the location l in stack has type \u03c4. The location l can be either an alias in , or be on the spine of (the stack type obtained by dropping all aliases from .",{"@attributes":{"id":"p-0047","num":"0046"},"maths":{"@attributes":{"id":"MATH-US-00006","num":"00006"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mi":["s","lookup"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mspace":{"@attributes":{"width":"2.8em","height":"2.8ex"}}}],"mfrac":{"mrow":[{"mi":"\u03c2","mo":"\u21d2","mrow":{"msup":{"mi":["l","\u2032"]},"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mrow":{"mo":["(",")"],"mrow":{"mi":"\u03c3","mo":"\u22c0","mrow":{"mo":["{","}"],"mrow":{"mi":["l","\u03c4"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}}}}}},{"mi":"\u03c2","mo":"\u22a2","mrow":{"mi":["l","\u03c4"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}}]}}},{"mrow":{"mo":["(",")"],"mn":"33"}}]}}}}},"Additionally, the rule l\u2190rmeans that updating the location l in stack with type \u03c4 results in stack \u2032. As used throughout, the \u201c\u201d notation may be interpreted to mean \u201cleading to.\u201d Weak updates do not change the stack type (s-update-weak). Strong updates change the type of l and drop all aliases beyond l because they may refer to the old type of l (s-update-strong), as shown below:",{"@attributes":{"id":"p-0049","num":"0048"},"maths":{"@attributes":{"id":"MATH-US-00007","num":"00007"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":[{"mtd":[{"mrow":{"mi":["s","update","weak"],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mtext":"-"},{"mspace":{"@attributes":{"width":"2.2em","height":"2.2ex"}}}],"mfrac":{"mrow":[{"mi":"\u03c2","mo":"\u22a2","mrow":{"mi":["l","\u03c4"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}},{"mi":"\u03c2","mo":"\u22a2","mrow":{"mi":"l","mo":"\u2190","mrow":{"mrow":{"mi":["\u03c4","\u2022"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}}},"mo":"\u227b","mi":"\u03c2"}}}]}}},{"mrow":{"mo":["(",")"],"mn":"34"}}]},{"mtd":[{"mrow":{"mi":["s","update","strong"],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mtext":"-"},{"mspace":{"@attributes":{"width":"1.7em","height":"1.7ex"}}}],"mfrac":{"mrow":[{"mi":"\u03c2","mo":"\u21d2","mrow":{"mover":{"mi":"r","mo":"\u2192"},"mo":["\u2062","@"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mrow":{"mo":["(",")"],"mrow":{"mi":["l","\u03c4"],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":"::"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"msup":{"mi":["\u03c2","\u2032"]}}}}},{"mi":"\u03c2","mo":["\u22a2","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mrow":{"mi":"l","mo":"\u2190","mrow":{"mrow":[{"msup":{"mi":["\u03c4","\u2032"]},"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mi":"\u2022"},{"mover":{"mi":"r","mo":"\u2192"},"mo":["\u2062","@"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mrow":{"mo":["(",")"],"mrow":{"mi":"l","mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":"::"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"msup":[{"mi":["\u03c4","\u2032"]},{"mi":["\u03c2","\u2032"]}]}}}],"mo":"\u227b"}}}]}}},{"mrow":{"mo":["(",")"],"mn":"35"}}]}]}}}},"The type system may further include instruction typing rules. The instruction typing rules enable a type checker to verify that a particular instruction does not adversely affect the types of words stored in a stack or a heap. Additionally, the instruction typing rules may also ensure that the instructions are \u201ctype safe,\u201d that is, they will not cause type errors during execution. Instruction typing rules according to various embodiments are listed below:",{"@attributes":{"id":"p-0051","num":"0050"},"maths":{"@attributes":{"id":"MATH-US-00008","num":"00008"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":[{"mtd":[{"mtable":{"mtr":[{"mtd":[{"mrow":{"mi":["i","mov"],"mo":["\u2062","\u2062"],"mstyle":{"mtext":"-"}}},{"mfrac":{"mrow":[{"mi":["\u0394","\u03a8"],"mo":[";",";"],"mrow":{"mi":"\u0393","mo":["\u22a2","\u22a2"],"mrow":[{"mi":["o","\u03c4"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}}]},{"mrow":[{"mo":["(",")"],"mrow":{"mi":["\u0393","\u03c2"],"mo":","}},{"mo":["{","}"],"mrow":{"mi":["r","\u03c4"],"mo":"\u2190"}},{"mo":["(",")"],"mrow":{"msup":[{"mi":["\u0393","\u2032"]},{"mi":["\u03c2","\u2032"]}],"mo":","}}],"mo":["\u2062","\u2062"]}]}},{"mi":"\u0394","mo":";","mrow":{"mi":"\u03a8","mo":"\u22a2","mrow":{"mrow":[{"mo":["(",")"],"mrow":{"mi":["\u0393","\u03c2"],"mo":";"}},{"mo":["{","}"],"mrow":{"mrow":{"mi":["move","r"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}},"mo":",","mi":"o"}},{"mo":["(",")"],"mrow":{"msup":[{"mi":["\u0393","\u2032"]},{"mi":["\u03c2","\u2032"]}],"mo":";"}}],"mo":["\u2062","\u2062"]}}}]}}]},{"mtd":[{"mrow":{"mi":["i","add"],"mo":["\u2062","\u2062"],"mstyle":{"mtext":"-"}}},{"mfrac":{"mrow":[{"mi":["\u0394","\u03a8"],"mo":[";",";"],"mrow":{"mrow":{"mi":"\u0393","mo":"\u22a2","mrow":{"mrow":[{"mi":["o","int","r"],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}},{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}]},{"mi":"sp","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mrow":{"mi":"\u0393","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"r"}}}],"mo":"\u2260"}},"mo":"=","mi":"int"}},{"mi":"\u0394","mo":";","mrow":{"mi":"\u03a8","mo":"\u22a2","mrow":{"mrow":[{"mo":["(",")"],"mrow":{"mi":["\u0393","\u03c2"],"mo":";"}},{"mo":["{","}"],"mrow":{"mrow":{"mi":["add","r"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}},"mo":",","mi":"o"}},{"mo":["(",")"],"mrow":{"mi":["\u0393","\u03c2"],"mo":";"}}],"mo":["\u2062","\u2062"]}}}]}}]},{"mtd":[{"mrow":{"mi":["i","sub"],"mo":["\u2062","\u2062"],"mstyle":{"mtext":"-"}}},{"mfrac":{"mrow":[{"mrow":{"mi":["\u0394","\u03a8"],"mo":[";",";"],"mrow":{"mrow":{"mi":"\u0393","mo":"\u22a2","mrow":{"mrow":[{"mi":["o","int","r"],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}},{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}]},{"mi":["sp","\u0393"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mrow":{"mo":["(",")"],"mi":"r"}}],"mo":"\u2260"}},"mo":"=","mi":"int"}},"mo":"\u2062","mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}},{"mi":"\u0394","mo":";","mrow":{"mi":"\u03a8","mo":"\u22a2","mrow":{"mrow":[{"mo":["(",")"],"mrow":{"mi":["\u0393","\u03c2"],"mo":";"}},{"mo":["{","}"],"mrow":{"mrow":{"mi":["sub","r"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}},"mo":",","mi":"o"}},{"mo":["(",")"],"mrow":{"mi":["\u0393","\u03c2"],"mo":";"}}],"mo":["\u2062","\u2062"]}}}]}}]},{"mtd":[{"mrow":{"mi":["i","ladd"],"mo":["\u2062","\u2062"],"mstyle":{"mtext":"-"}}},{"mfrac":{"mrow":[{"mrow":[{"mi":"\u0393","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"r"}},{"mrow":[{"mrow":[{"mrow":{"mi":"Ptr","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"l"}},"mo":"\u2062","mi":"\u03c2"},{"mi":["l","i"],"mo":"+"}],"mo":"\u22a2"},{"msup":{"mi":["l","\u2032"]},"mo":"\u22a2","mrow":{"mrow":[{"mo":["(",")"],"mrow":{"mi":["\u0393","\u03c2"],"mo":","}},{"mo":["{","}"],"mrow":{"mi":"r","mo":"\u2190","mrow":{"mi":"Ptr","mo":"\u2061","mrow":{"mo":["(",")"],"msup":{"mi":["l","\u2032"]}}}}},{"mo":["(",")"],"mrow":{"msup":[{"mi":["\u0393","\u2032"]},{"mi":["\u03c2","\u2032"]}],"mo":","}}],"mo":["\u2062","\u2062"]}}],"mo":"="}],"mo":"="},{"mi":"\u0394","mo":";","mrow":{"mi":"\u03a8","mo":"\u22a2","mrow":{"mrow":[{"mo":["(",")"],"mrow":{"mi":["\u0393","\u03c2"],"mo":";"}},{"mo":["{","}"],"mrow":{"mrow":[{"mi":["ladd","r"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}},{"mrow":{"mo":"-","mn":"4"},"mo":"*","mi":"i"}],"mo":","}},{"mo":["(",")"],"mrow":{"msup":[{"mi":["\u0393","\u2032"]},{"mi":["\u03c2","\u2032"]}],"mo":";"}}],"mo":["\u2062","\u2062"]}}}]}}]},{"mtd":[{"mrow":{"mi":["i","load","p"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mtext":"-"}]}},{"mfrac":{"mrow":[{"mrow":[{"mi":"\u0393","mo":"\u2061","mrow":{"mo":["(",")"],"msub":{"mi":"r","mn":"2"}}},{"mrow":[{"mi":"HeapPtr","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"\u03c4"}},{"mrow":[{"mo":["(",")"],"mrow":{"mi":["\u0393","\u03c2"],"mo":","}},{"mo":["{","}"],"mrow":{"msub":{"mi":"r","mn":"1"},"mo":"\u2190","mi":"\u03c4"}},{"mo":["(",")"],"mrow":{"msup":[{"mi":["\u0393","\u2032"]},{"mi":["\u03c2","\u2032"]}],"mo":","}}],"mo":["\u2062","\u2062"]}],"mo":"\u22a2"}],"mo":"="},{"mi":"\u0394","mo":";","mrow":{"mi":"\u03a8","mo":"\u22a2","mrow":{"mrow":[{"mo":["(",")"],"mrow":{"mi":["\u0393","\u03c2"],"mo":";"}},{"mo":["{","}"],"mrow":{"mrow":[{"mi":"load","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"msub":{"mi":"r","mn":"1"}},{"mo":["[","]"],"mrow":{"msub":{"mi":"r","mn":"2"},"mo":"+","mn":"0"}}],"mo":","}},{"mo":["(",")"],"mrow":{"msup":[{"mi":["\u0393","\u2032"]},{"mi":["\u03c2","\u2032"]}],"mo":";"}}],"mo":["\u2062","\u2062"]}}}]}}]},{"mtd":[{"mrow":{"mi":["i","store","p"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mtext":"-"}]}},{"mfrac":{"mrow":[{"mrow":[{"mi":"\u0393","mo":"\u2061","mrow":{"mo":["(",")"],"msub":{"mi":"r","mn":"2"}}},{"mrow":[{"mi":"\u03c4","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}},"mrow":{"mi":"\u0393","mo":"\u2061","mrow":{"mo":["(",")"],"msub":{"mi":"r","mn":"1"}}}},{"mi":"HeapPtr","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"r"}}],"mo":"="}],"mo":"="},{"mi":"\u0394","mo":";","mrow":{"mi":"\u03a8","mo":"\u22a2","mrow":{"mrow":[{"mo":["(",")"],"mrow":{"mi":["\u0393","\u03c2"],"mo":";"}},{"mo":["{","}"],"mrow":{"mrow":{"mi":"store","mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"msub":{"mi":"r","mn":"1"},"mo":"+","mn":"0"}}},"mo":",","msub":{"mi":"r","mn":"2"}}},{"mo":["(",")"],"mrow":{"mi":["\u0393","\u03c2"],"mo":";"}}],"mo":["\u2062","\u2062"]}}}]}}]},{"mtd":[{"mrow":{"mi":["i","load","concat"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mtext":"-"}]}},{"mfrac":{"mrow":[{"mrow":[{"mi":"\u0393","mo":"\u2061","mrow":{"mo":["(",")"],"msub":{"mi":"r","mn":"2"}}},{"mrow":[{"mrow":[{"mrow":{"mi":"Ptr","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"l"}},"mo":"\u2062","mi":"\u03c2"},{"mi":["l","i"],"mo":"+"}],"mo":"\u22a2"},{"mrow":[{"msup":{"mi":["l","\u2032"]},"mo":"\u2062","mi":"\u03c2"},{"msup":{"mi":["l","\u2032"]},"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mi":"\u03c4"},{"mrow":[{"mo":["(",")"],"mrow":{"mi":["\u0393","\u03c2"],"mo":["\u2062","\u2062"],"mstyle":{"mtext":","}}},{"mo":["{","}"],"mrow":{"msub":{"mi":"r","mn":"1"},"mo":["\u2062","\u2062"],"mstyle":{"mtext":"\u2190"},"mi":"\u03c4"}},{"mo":["(",")"],"mrow":{"msup":[{"mi":["\u0393","\u2032"]},{"mi":["\u03c2","\u2032"]}],"mo":["\u2062","\u2062"],"mstyle":{"mtext":","}}}],"mo":["\u2062","\u2062"]}],"mo":["\u22a2","\u22a2"]}],"mo":"="}],"mo":"="},{"mi":"\u0394","mo":";","mrow":{"mi":"\u03a8","mo":"\u22a2","mrow":{"mrow":[{"mo":["(",")"],"mrow":{"mi":["\u0393","\u03c2"],"mo":";"}},{"mo":["{","}"],"mrow":{"mrow":[{"mi":"load","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"msub":{"mi":"r","mn":"1"}},{"mo":["[","]"],"mrow":{"msub":{"mi":"r","mn":"1"},"mo":"+","mrow":{"mo":["(",")"],"mrow":{"mrow":{"mo":"-","mn":"4"},"mo":"*","mi":"i"}}}}],"mo":","}},{"mo":["(",")"],"mrow":{"msup":[{"mi":["\u0393","\u2032"]},{"mi":["\u03c2","\u2032"]}],"mo":";"}}],"mo":["\u2062","\u2062"]}}}]}}]},{"mtd":[{"mrow":{"mi":["i","store","concat"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mtext":"-"}]}},{"mfrac":{"mrow":[{"mrow":[{"mi":"\u0393","mo":"\u2061","mrow":{"mo":["(",")"],"msub":{"mi":"r","mn":"1"}}},{"mrow":[{"mrow":[{"mi":"Ptr","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"l"}},{"mi":"\u0393","mo":"\u2061","mrow":{"mo":["(",")"],"msub":{"mi":"r","mn":"2"}}}],"mo":"\u2062"},{"mrow":[{"mrow":[{"mi":["\u03c4","\u03c2"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}},{"mi":["l","i"],"mo":"+"}],"mo":["\u22a2","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}},{"mrow":[{"msup":{"mi":["l","\u2032"]},"mo":"\u2062","mi":"\u03c2"},{"msup":{"mi":["l","\u2032"]},"mo":"\u2190","mrow":{"mrow":{"mi":["\u03c4","\u2022"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}}},"mo":"\u227b","msup":{"mi":["\u03c2","\u2032"]}}}],"mo":"\u22a2"}],"mo":"="}],"mo":"="}],"mo":"="},{"mi":"\u0394","mo":";","mrow":{"mi":"\u03a8","mo":"\u22a2","mrow":{"mrow":[{"mo":["(",")"],"mrow":{"mi":["\u0393","\u03c2"],"mo":";"}},{"mo":["{","}"],"mrow":{"mrow":{"mi":"store","mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"msub":{"mi":"r","mn":"1"},"mo":"+","mrow":{"mo":["(",")"],"mrow":{"mrow":{"mo":"-","mn":"4"},"mo":"*","mi":"i"}}}}},"mo":",","msub":{"mi":"r","mn":"2"}}},{"mo":["(",")"],"mrow":{"mi":"\u0393","mo":";","msup":{"mi":["\u03c2","\u2032"]}}}],"mo":["\u2062","\u2062"]}}}]}}]}]}},{"mtable":{"mtr":[{"mtd":{"mrow":{"mo":["(",")"],"mn":"36"}}},{"mtd":{"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},{"mtd":{"mrow":{"mo":["(",")"],"mn":"37"}}},{"mtd":{"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},{"mtd":{"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},{"mtd":{"mrow":{"mo":["(",")"],"mn":"38"}}},{"mtd":{"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},{"mtd":{"mrow":{"mo":["(",")"],"mn":"39"}}},{"mtd":{"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},{"mtd":{"mrow":{"mo":["(",")"],"mn":"40"}}},{"mtd":{"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},{"mtd":{"mrow":{"mo":["(",")"],"mn":"41"}}},{"mtd":{"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},{"mtd":{"mrow":{"mo":["(",")"],"mn":"42"}}},{"mtd":{"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},{"mtd":{"mrow":{"mo":["(",")"],"mn":"43"}}}]}}]},{"mtd":[{"mrow":{"mi":["i","load","aliased"],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mtext":"-"},{"mspace":{"@attributes":{"width":"1.7em","height":"1.7ex"}}}],"mfrac":{"mrow":[{"mrow":[{"mi":"\u0393","mo":"\u2061","mrow":{"mo":["(",")"],"msub":{"mi":"r","mn":"2"}}},{"mrow":[{"mrow":{"mi":"Ptr","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"l"}},"mo":"\u2062","mi":"\u03c2"},{"mi":["l","\u03c4"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]},{"mrow":[{"mo":["(",")"],"mrow":{"mi":["\u0393","\u03c2"],"mo":","}},{"mo":["{","}"],"mrow":{"msub":{"mi":"r","mn":"1"},"mo":"\u2190","mi":"\u03c4"}},{"mo":["(",")"],"mrow":{"msup":[{"mi":["\u0393","\u2032"]},{"mi":["\u03c2","\u2032"]}],"mo":","}}],"mo":["\u2062","\u2062"]}],"mo":["\u22a2","\u22a2"]}],"mo":"="},{"mi":"\u0394","mo":";","mrow":{"mi":"\u03a8","mo":"\u22a2","mrow":{"mrow":[{"mo":["(",")"],"mrow":{"mi":["\u0393","\u03c2"],"mo":";"}},{"mo":["{","}"],"mrow":{"mrow":[{"mi":"load","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"msub":{"mi":"r","mn":"1"}},{"mo":["[","]"],"mrow":{"msub":{"mi":"r","mn":"2"},"mo":"+","mn":"0"}}],"mo":","}},{"mo":["(",")"],"mrow":{"msup":[{"mi":["\u0393","\u2032"]},{"mi":["\u03c2","\u2032"]}],"mo":";"}}],"mo":["\u2062","\u2062"]}}}]}}},{"mrow":{"mo":["(",")"],"mn":"44"}}]},{"mtd":[{"mrow":{"mi":["i","store","aliased"],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mtext":"-"},{"mspace":{"@attributes":{"width":"1.9em","height":"1.9ex"}}}],"mfrac":{"mrow":[{"mrow":[{"mi":"\u0393","mo":"\u2061","mrow":{"mo":["(",")"],"msub":{"mi":"r","mn":"1"}}},{"mrow":{"mrow":[{"mrow":{"mi":"Ptr","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"l"}},"mo":"\u2062","mi":"\u03c2"},{"mi":["l","\u03c4"],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}}],"mrow":{"mi":"\u0393","mo":"\u2061","mrow":{"mo":["(",")"],"msub":{"mi":"r","mn":"2"}}}}],"mo":"\u22a2"},"mo":"=","mi":"\u03c4"}],"mo":"="},{"mi":"\u0394","mo":";","mrow":{"mi":"\u03a8","mo":"\u22a2","mrow":{"mrow":[{"mo":["(",")"],"mrow":{"mi":["\u0393","\u03c2"],"mo":";"}},{"mo":["{","}"],"mrow":{"mrow":{"mi":"store","mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"msub":{"mi":"r","mn":"1"},"mo":"+","mn":"0"}}},"mo":",","msub":{"mi":"r","mn":"2"}}},{"mo":["(",")"],"mrow":{"mi":["\u0393","\u03c2"],"mo":";"}}],"mo":["\u2062","\u2062"]}}}]}}},{"mrow":{"mo":["(",")"],"mn":"45"}}]},{"mtd":[{"mrow":{"mrow":{"mi":["i","heapalloc"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mspace":{"@attributes":{"width":"4.2em","height":"4.2ex"}}}],"mfrac":{"mrow":[{"mi":["\u0394","\u03a8"],"mo":[";",";"],"mrow":{"mi":"\u0393","mo":["\u22a2","\u22a2"],"mrow":[{"mi":["o","\u03c4"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]},{"mrow":[{"mo":["(",")"],"mrow":{"mi":["\u0393","\u03c2"],"mo":","}},{"mo":["{","}"],"mrow":{"mi":"r","mo":"\u2190","mrow":{"mi":"HeapPtr","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"\u03c4"}}}},{"mo":["(",")"],"mrow":{"msup":[{"mi":["\u0393","\u2032"]},{"mi":["\u03c2","\u2032"]}],"mo":","}}],"mo":["\u2062","\u2062"]}]}},{"mi":"\u0394","mo":";","mrow":{"mi":"\u03a8","mo":"\u22a2","mrow":{"mrow":[{"mo":["(",")"],"mrow":{"mi":["\u0393","\u03c2"],"mo":";"}},{"mo":["{","}"],"mrow":{"mrow":[{"mi":["heapalloc","r"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}},{"mo":["\u2329","\u232a"],"mi":"o"}],"mo":"="}},{"mo":["(",")"],"mrow":{"msup":[{"mi":["\u0393","\u2032"]},{"mi":["\u03c2","\u2032"]}],"mo":";"}}],"mo":["\u2062","\u2062"]}}}]}},"mo":"\u2062","mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},{"mrow":{"mo":["(",")"],"mn":"46"}}]},{"mtd":[{"mrow":{"mi":["i","jump"],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mspace":{"@attributes":{"width":"5.6em","height":"5.6ex"}}}],"mn":"0","mfrac":{"mrow":[{"mrow":{"mrow":[{"mrow":[{"mi":"\u0393","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"r"}},{"mi":["int","\u0394"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}}}],"mo":"="},{"mi":"\u0393","mo":"\u22a2","mrow":{"mrow":[{"mi":"o","mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mrow":{"mo":["\u2200","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mrow":{"mrow":[{"mo":["[","]"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}},{"mo":["(",")"],"mrow":{"msup":[{"mi":["\u0393","\u2032"]},{"mi":["\u03c2","\u2032"]}],"mo":","}}],"mo":["\u2062","\u2062"],"mi":"\u0393"}}},{"msup":{"mi":["\u0393","\u2032"]},"mo":"\u2062","mi":"\u03c2"}],"mo":["\u21d2","\u21d2"],"msup":{"mi":["\u03c2","\u2032"]}}}],"mo":[";",";"],"mi":"\u03a8"},"mo":"\u2062","mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}},{"mi":"\u0394","mo":";","mrow":{"mi":"\u03a8","mo":"\u22a2","mrow":{"mrow":[{"mo":["(",")"],"mrow":{"mi":["\u0393","\u03c2"],"mo":";"}},{"mo":["{","}"],"mrow":{"mrow":{"mi":["jumpif","r"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}}],"mn":"0"},"mo":",","mi":"o"}},{"mo":["(",")"],"mrow":{"mi":["\u0393","\u03c2"],"mo":";"}}],"mo":["\u2062","\u2062"]}}}]}}},{"mrow":{"mo":["(",")"],"mn":"47"}}]}]}}}},"As shown, each instruction typing rule includes an instruction portion that is below a line, and a requirement portion that is above the line. The instruction portion of each rule follows the general form \u0394;\u03a8(\u0393,){ins}(\u0393). The form \u0394;\u03a8(\u0393,){ins}(\u0393\u2032) means that checking the instruction \u201cins\u201d changes the environments \u0393 and to new environments \u0393\u2032 and . An instruction checked by each corresponding instruction typing rule is considered to be well-typed if the instruction, as shown in the instruction portion, satisfies the one or more criteria set in the requirement portion.","For example, with respect to the rule i-add (37), the {add r, o} portion indicates addition of two integers r and o. The requirement portion (above the line) indicates that there are three criteria that the instruction need to satisfy to be considered well-typed. First, the requirement \u0393o:int indicates that o must have the type int, that is, o must be an integer. The second requirement r\u2260sp indicates that the stack pointer \u201csp\u201d should be not be used for the integer r. Thirdly, the requirement \u0393(r)=int indicates that r must also have the type int, that is, r must also be an integer. Thus, a type checker may determine that the {add r, o} instruction is valid if all the requirements are satisfied.","In another example, the rule i-load-aliased (44) checks an instruction that loads a word at a memory address stored in rinto a register r, that is, {load r,[r+0]}. In order to do so, the requirement portion of the rule verifies that ris a valid address and that the address contains a word of a valid type, and determines the type for the word. This rule is designed to be applied to the loading of words that are stored on the stack or on the heap. The \u03c3(r)=Ptr(l) portion verifies that rhas a pointer type to location l. The l:\u03c4 portion verifies that the location l is in the stack  and has some type represented by \u03c4. The (\u0393,){r\u2190\u03c4}(\u0393\u2032;) portion indicates that once ris verified to have a valid type, the word in the memory address rmay be moved into a register rprovided that the old environment, as represented by (\u0393,), is updated to the new environment represented by (\u0393\u2032;). Accordingly, the type checker may use the requirement portion of the i-load-aliased (44) rule to check the validity of the {load r,[r+0]} instruction.","Additionally, in the rule i-ladd (37), the location arithmetic instruction \u201cladd r, i\u201d requires that r point to a location l and i be a multiple of 4. The stack grows toward lower addresses. If i is negative, the result location is further outward from l. Further, load and store can operate on heap locations (i-load-p (40) and i-store-p (41)), stack locations on the spine (i-load-concat (42) and i-storeconcat (43)), and aliases (i-load-aliased (44)) and i-store-aliased (45)). The type system in accordance with the embodiments also supports weak updates on heap locations and aliases, and both strong and weak updates on stack locations on the spine.","The rule for heap allocation, i-store-heapalloc (46) assigns a heap pointer type to the register that holds the pointer, instead of a singleton type, because the new heap location is statically unknown. The heap environment does not change after heap allocation because the rest of the program does not refer to the new heap location by name.","Accordingly, when controlling transfers, the type checker matches the current environments with those of the target. The location environment of the target should have been fully instantiated. \u0393\u0393\u2032 requires that \u0393\u2032 be a subset of \u0393. It will be appreciated that while some of the instruction typing rules described above are applicable for use with both stacks and heaps, a portion of rules may be used with only stacks or only heaps. For example, the i-load-p (40), i-store-p (41), and i-heapalloc (46) are only applicable to heaps, while i-store-concat (43) is only usable with stacks.","Exemplary Type Checking","The type checker of a compiler may check a program using the type system that includes one or more of the stack rules, the operand typing rules, and the instruction typing rules, as described above. For example, a program may consist of a heap H, a register bank R, a stack s, and a block body as the entry point. H is a partial function from heap locations to heap values. R is a partial function from registers to word-sized values. The stack s records values on the spine. It is either the empty stack \u201cempty\u201d or a concatenation of a word-sized value with a stack \u201cws\u201d.\n\nheap value v=block w\u2003\u2003(48)\n\nblock block=\u2200[\u0394](\u0393,)\u2003\u2003(49)\n\nblock body =ins;|jump \u2003\u2003(50)\n\nheap H=pv, . . . , pv\u2003\u2003(51)\n\nreg bank R=rw, . . . , rw\u2003\u2003(52)\n\nstackvalue =empty|\u2003\u2003(53)\n\nprogram =()\u2003\u2003(54)\n","As shown above, a heap value v is either a code block \u201cblock\u201d or a heap word \u201cw\u201d. A code block \u201c\u2200[\u0394](\u0393,)b\u201d describes the precondition \u2200[\u0394](\u0393,) and its body b. The block body is a sequence of instructions that ends with a jump instruction. Only variables in A can appear free in \u0393, , and the block body.","The program P=(H, R, s, b) is well-formed (illustrated by the judgmentP) if H matches a heap environment \u03a8, R matches a register file \u0393, s matches a stack type , and b is well-formed under \u03a8, \u0393, and . The notion \u201c\u2022\u201d means empty environments. Accordingly, this may be represented as:",{"@attributes":{"id":"p-0061","num":"0060"},"maths":{"@attributes":{"id":"MATH-US-00009","num":"00009"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mi":["m","tp"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mspace":{"@attributes":{"width":"1.4em","height":"1.4ex"}}}],"mfrac":{"mrow":[{"mrow":[{"mo":"\u22a2","mrow":{"mi":"H","mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mrow":{"mi":"\u03a8","mo":"\u00b7"}}},{"mi":"\u03a8","mo":"\u22a2","mrow":{"mi":"s","mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mrow":{"mi":"\u03c2","mo":"\u00b7"}}},{"mi":"\u03a8","mo":"\u22a2","mrow":{"mi":"R","mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mrow":{"mi":"\u0393","mo":"\u00b7"}}},{"mi":["\u03c2","b"],"mo":"\u22a2"}],"mo":[";",";",";",";",";"],"mi":["\u03a8","\u0393"]},{"mo":"\u22a2","mrow":{"mo":["(",")"],"mrow":{"mi":["H","R","s","b"],"mo":[",",",",","]}}}]}}},{"mrow":{"mo":["(",")"],"mn":"55"}}]}}}},"br":{}},{"@attributes":{"id":"p-0062","num":"0061"},"maths":{"@attributes":{"id":"MATH-US-00010","num":"00010"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":[{"mtd":[{"mrow":{"mi":["h","tp"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mspace":{"@attributes":{"width":"1.1em","height":"1.1ex"}}}],"mfrac":{"mtable":{"mtr":[{"mtd":{"mrow":{"mi":"\u03a8","mo":"=","mrow":{"mo":["{","\u2062","\u2062","}"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}}],"mrow":{"mi":["\u2026","\u2026"],"mo":["\u2062",",",","],"mstyle":{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}},"mrow":{"mi":["p","\u03c4"],"mo":"\u21a6"}}}}}},{"mtd":{"mrow":{"mrow":[{"mi":"H","mo":"=","mrow":{"mo":["{","\u2062","\u2062","}"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}}],"mrow":{"mi":["\u2026","\u2026"],"mo":["\u2062",",",","],"mstyle":{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}},"mrow":{"mi":["p","v"],"mo":"\u21a6"}}}},{"mi":"\u2026","mo":"\u00b7"},{"mi":"\u03a8","mo":"\u22a2","mrow":{"mi":["v","r","\u2026"],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}},{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}}]}}],"mo":[";","\u2062",";"],"mstyle":{"mspace":{"@attributes":{"width":"1.4em","height":"1.4ex"}}}}}}]},"mrow":{"mo":"\u22a2","mrow":{"mo":["(",")"],"mrow":{"mi":["H","\u03a8"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}}}}}},{"mrow":{"mo":["(",")"],"mn":"56"}}]},{"mtd":[{"mrow":{"mi":["g","tp"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mspace":{"@attributes":{"width":"1.1em","height":"1.1ex"}}}],"mfrac":{"mtable":{"mtr":[{"mtd":{"mrow":{"mi":"\u0393","mo":"=","mrow":{"mo":["{","\u2062","\u2062","}"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}}],"mrow":{"mi":["\u2026","\u2026"],"mo":["\u2062",",",","],"mstyle":{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}},"mrow":{"mi":["r","\u03c4"],"mo":"\u21a6"}}}}}},{"mtd":{"mrow":{"mrow":[{"mi":"R","mo":"=","mrow":{"mo":["{","\u2062","\u2062","}"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}}],"mrow":{"mi":["\u2026","\u2026"],"mo":["\u2062",",",","],"mstyle":{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}},"mrow":{"mi":["r","w"],"mo":"\u21a6"}}}},{"mi":["\u2026","\u0394"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}}},{"mrow":[{"mi":"\u03a8","mo":[";","\u00b7"]},{"mi":["w","\u03c4","\u2026"],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}}]}],"mo":"\u22a2"}],"mo":[";",";"]}}}]},"mrow":{"mi":"\u0394","mo":";","mrow":{"mi":"\u03a8","mo":"\u22a2","mrow":{"mi":["R","\u0393"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}}}}}},{"mrow":{"mo":["(",")"],"mn":"57"}}]}]}}},"br":{},"img":[{"@attributes":{"id":"CUSTOM-CHARACTER-00157","he":"2.46mm","wi":"2.12mm","file":"US07975121-20110705-P00005.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00158","he":"2.46mm","wi":"2.12mm","file":"US07975121-20110705-P00005.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00159","he":"2.46mm","wi":"2.12mm","file":"US07975121-20110705-P00005.TIF","alt":"custom character","img-content":"character","img-format":"tif"}}]},{"@attributes":{"id":"p-0063","num":"0062"},"maths":{"@attributes":{"id":"MATH-US-00011","num":"00011"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":[{"mtd":[{"mrow":{"mi":["s","base"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mspace":{"@attributes":{"width":"2.8em","height":"2.8ex"}}}],"mover":{"mrow":{"mi":"\u0394","mo":";","mrow":{"mi":"\u03a8","mo":"\u22a2","mrow":{"mi":"empty","mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mrow":{"mo":["(",")"],"mrow":{"mi":["base","Empty"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mrow":{"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mo":"\u2062"},"mstyle":[{"mtext":":"},{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}}]}}}}},"mi":"_"}}},{"mrow":{"mo":["(",")"],"mn":"58"}}]},{"mtd":[{"mrow":{"mi":["s","concat"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mspace":{"@attributes":{"width":"2.5em","height":"2.5ex"}}}],"mfrac":{"mrow":[{"mi":"\u0394","mo":[";",";",";"],"mrow":[{"mi":"\u03a8","mo":"\u22a2","mrow":{"mi":["s","\u0394"],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mrow":{"mo":["(",")"],"mrow":{"mi":["l","\u03c2"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}}}},{"mrow":[{"mi":"\u03a8","mo":"\u00b7"},{"mi":["w","\u03c4"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}],"mo":"\u22a2"}]},{"mi":"\u0394","mo":";","mrow":{"mi":"\u03a8","mo":"\u22a2","mrow":{"mi":["w","s"],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mrow":{"mo":["(",")"],"mrow":{"mrow":{"mi":"next","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"l"}},"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mtext":":"}],"mi":["\u03c4","l","\u03c3"]}}}}}]}}},{"mrow":{"mo":["(",")"],"mn":"59"}}]},{"mtd":[{"mrow":{"mi":["s","alias"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mspace":{"@attributes":{"width":"2.8em","height":"2.8ex"}}}],"mfrac":{"mrow":[{"mrow":[{"mi":["\u0394","\u03a8"],"mo":";"},{"mo":["{","}"],"mrow":{"mrow":[{"mi":"p","mo":["\u21a6","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mrow":{"mi":"HeapPtr","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"r"}}},{"mi":"s","mo":["\u2062","\u2062"],"mstyle":{"mtext":":"},"mrow":{"mo":["(",")"],"mrow":{"mi":["l","\u03c3"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}}}],"mo":"\u22a2"}}],"mo":","},{"mrow":[{"mi":["\u0394","\u03a8"],"mo":";"},{"mrow":[{"mo":["{","}"],"mrow":{"mi":"p","mo":["\u21a6","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mrow":{"mi":"HeapPtr","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"r"}}}},{"mi":"s","mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mrow":{"mo":["(",")"],"mrow":{"mi":"l","mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mrow":{"mo":["(",")"],"mrow":{"mi":"\u03c3","mo":"\u22c0","mrow":{"mo":["{","}"],"mrow":{"mi":["p","\u03c4"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}}}}}}}],"mo":"\u22a2"}],"mo":","}]}}},{"mrow":{"mo":["(",")"],"mn":"60"}}]},{"mtd":[{"mrow":{"mi":["s","imp"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mspace":{"@attributes":{"width":"1.1em","height":"1.1ex"}}}],"mfrac":{"mrow":[{"mi":"\u0394","mo":";","mrow":{"mi":"\u03a8","mo":"\u22a2","mrow":{"mrow":{"mi":["s","\u03c2","\u03c2"],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mspace":{"@attributes":{"width":"0.6em","height":"0.6ex"}}}]},"mo":"\u21d2","msup":{"mi":["\u03c2","\u2032"]}}}},{"mi":"\u0394","mo":";","mrow":{"mi":"\u03a8","mo":"\u22a2","mrow":{"mi":"s","mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"msup":{"mi":["\u03c2","\u2032"]}}}}]}}},{"mrow":{"mo":["(",")"],"mn":"61"}}]}]}}}},"To type check a block body, the type checker may check the instructions in order (b-ins) until it reaches the jump instruction (b-jump). The unpack instruction \u201c(\u03b7, r)=unpack(o)\u201d generally requires o have a heap pointer type (b-unpack). The rule introduces a fresh location variable \u03b7 to \u0394, assigns r a singleton type Ptr(\u03b7), and updates the stack type to contain \u03b7.",{"@attributes":{"id":"p-0065","num":"0064"},"maths":{"@attributes":{"id":"MATH-US-00012","num":"00012"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":[{"mtd":[{"mrow":{"mi":["b","ins"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mspace":{"@attributes":{"width":"1.7em","height":"1.7ex"}}}],"mfrac":{"mrow":[{"mi":["\u0394","\u03a8"],"mo":[";",";",";"],"mrow":[{"mi":"\u03a8","mo":"\u22a2","mrow":{"mrow":[{"mo":["(",")"],"mrow":{"mi":["\u0393","\u03c2"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}},{"mo":["{","}"],"mi":"ins"},{"mo":["(",")"],"mrow":{"msup":[{"mi":["\u0393","\u2032"]},{"mi":["\u03c2","\u2032"]}],"mo":";"}}],"mo":["\u2062","\u2062","\u2062"],"mi":"\u0394"}},{"mrow":[{"mo":["{","}"],"mi":"ins"},{"mo":["(",")"],"mrow":{"msup":[{"mi":["\u0393","\u2032"]},{"mi":["\u03c2","\u2032"]}],"mo":";"}}],"mo":"\u2062"}]},{"mi":["\u0394","\u03a8","\u0393","b"],"mo":[";",";",";",";"],"mrow":{"mi":["\u03c2","ins"],"mo":"\u22a2"}}]}}},{"mrow":{"mo":["(",")"],"mn":"62"}}]},{"mtd":[{"mrow":{"mi":["b","jump"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mspace":{"@attributes":{"width":"1.7em","height":"1.7ex"}}}],"mfrac":{"mrow":[{"mi":"\u0394","mo":";","mrow":{"mi":"\u03a8","mo":"\u22a2","mrow":{"mrow":[{"mi":"o","mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mrow":{"mo":"\u2200","mrow":{"mrow":[{"mo":["[","]"]},{"mo":["(",")"],"mrow":{"msup":[{"mi":["\u0393","\u2032"]},{"mi":["\u03c2","\u2032"]}],"mo":","}}],"mo":["\u2062","\u2062"],"mi":"\u0393"}}},{"msup":{"mi":["\u0393","\u2032"]},"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mi":"\u03c2"}],"mo":["\u21d2","\u21d2"],"msup":{"mi":["\u03c2","\u2032"]}}}},{"mi":["\u0394","\u03a8","\u0393"],"mo":[";",";",";"],"mrow":{"mi":"\u03c2","mo":"\u22a2","mrow":{"mi":["jump","o"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}}}}]}}},{"mrow":{"mo":["(",")"],"mn":"63"}}]},{"mtd":[{"mrow":{"mi":["b","unpack"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mspace":{"@attributes":{"width":"2.5em","height":"2.5ex"}}}],"mfrac":{"mtable":{"mtr":[{"mtd":{"mrow":{"mi":["\u0394","\u03a8"],"mo":[";",";"],"mrow":{"mi":"\u0393","mo":"\u22a2","mrow":{"mrow":{"mrow":[{"mi":["o","r"],"mo":["\u2062","\u2062","\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}],"mrow":{"mi":"HeapPtr","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"\u03c4"}}},{"mi":["sp","\u03b7"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}}],"mo":"\u2260"},"mo":"\u2209","mi":"\u0394"}}}}},{"mtd":{"mrow":{"mrow":[{"mo":["(",")"],"mrow":{"mi":["\u0394","\u03b7"],"mo":";"}},{"mi":"\u0393","mo":"\u2061","mrow":{"mo":["[","]"],"mrow":{"mi":"r","mo":"\u21a6","mrow":{"mi":"Ptr","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"\u03b7"}}}}},{"mrow":{"mi":"l","mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}],"mrow":{"mo":["(",")"],"mrow":{"mi":"\u03c3","mo":"\u22c0","mrow":{"mo":["{","}"],"mrow":{"mi":["\u03b7","\u03c4"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]}}}}},"mo":"\u22a2","mi":"b"}],"mo":[";",";",";"],"mi":"\u03a8"}}}]},"mrow":{"mi":["\u0394","\u03a8","\u0393"],"mo":[";",";",";"],"mrow":{"mrow":[{"mrow":[{"mi":["l","\u03c3"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mtext":":"},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]},{"mi":"o","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["\u03b7","r"],"mo":","}}}],"mo":"\u22a2"},{"mi":"unpack","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"o"}}],"mo":"="}}}}},{"mrow":{"mo":["(",")"],"mn":"64"}}]}]}}},"br":{}},{"@attributes":{"id":"p-0066","num":"0065"},"maths":{"@attributes":{"id":"MATH-US-00013","num":"00013"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mi":["block","tp"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mspace":{"@attributes":{"width":"2.2em","height":"2.2ex"}}}],"mfrac":{"mrow":[{"mi":["\u0394","\u03a8","\u0393"],"mo":[";",";",";"],"mrow":{"mi":["\u03c2","b"],"mo":"\u22a2"}},{"mi":"\u03a8","mo":"\u22a2","mrow":{"mo":"\u2200","mrow":{"mrow":[{"mo":["[","]"],"mi":"\u0394"},{"mo":["(",")"],"mrow":{"mi":["\u0393","\u03c2"],"mo":","}}],"mo":["\u2062","\u2062"],"mi":"b"}}}]}}},{"mrow":{"mo":["(",")"],"mn":"65"}}]}}}}},"Furthermore, the compilation of the exemplary source code swap function into an assembly language code swap function that incorporates the type system described above may also be illustrated. For example, given the swap function in the source code:",{"@attributes":{"id":"p-0068","num":"0067"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"int swap(int *s x, int *s y){"]},{"entry":[{},"\u2003\u2003int t = 0;"]},{"entry":[{},"\u2003\u2003int t\u2019 = 0;"]},{"entry":[{},"\u2003\u2003t = !x;"]},{"entry":[{},"\u2003\u2003t\u2019 = !y;"]},{"entry":[{},"\u2003\u2003x := t\u2019;"]},{"entry":[{},"\u2003\u2003y := t;"]},{"entry":[{},"\u2003\u2003return 0;"]},{"entry":[{},"}"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}},"br":{}},{"@attributes":{"id":"p-0069","num":"0068"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"98pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\u2200[\u03b7,\u03b7,\u03b70,\u03c1](\u0393, )",{}]},{"entry":[{},"\u2003\u2003mov r, sp"]},{"entry":[{},"\u2003\u2003mov r, 0","; r= 0;"]},{"entry":[{},"\u2003\u2003ladd sp,\u22124"]},{"entry":[{},"\u2003\u2003store [sp + 0], r","; push r(for t\u2019)"]},{"entry":[{},"\u2003\u2003mov r, 0","; r= 0;"]},{"entry":[{},"\u2003\u2003ladd sp,\u22124"]},{"entry":[{},"\u2003\u2003store [sp + 0], r","; push r(for t)"]},{"entry":[{},"\u2003\u2003load r, [r+ 0]","; r= x"]},{"entry":[{},"\u2003\u2003load r, [r+ 0]","; r= [r]"]},{"entry":[{},"\u2003\u2003store [r+ (\u22128)], r","; t = r(t =!x)"]},{"entry":[{},"\u2003\u2003load r, [r+ 4]","; r= y"]},{"entry":[{},"\u2003\u2003load r, [r+ 0]","; r= [r]"]},{"entry":[{},"\u2003\u2003store [r+ (\u22124)], r","; t\u2019 = r(t\u2019 =!y)"]},{"entry":[{},"\u2003\u2003load r, [r+ 0]","; r= x"]},{"entry":[{},"\u2003\u2003load r, [r+ (\u22124)]","; r= t\u2019"]},{"entry":[{},"\u2003\u2003store [r+ 0], r","; [r] = r(x := t\u2019)"]},{"entry":[{},"\u2003\u2003load r, [r+ 4]","; r= y"]},{"entry":[{},"\u2003\u2003load r, [r+ (\u22128)]","; r= t"]},{"entry":[{},"\u2003\u2003store [r+ 0], r","; [r] = r(y := t)"]},{"entry":[{},"\u2003\u2003ladd sp, 16","; pop t, t\u2019, x, y"]},{"entry":[{},"\u2003\u2003mov r, 0","; r= 0"]},{"entry":[{},"\u2003\u2003ladd sp,\u22124"]},{"entry":[{},"\u2003\u2003store [sp + 0], r","; push r"]},{"entry":[{},"\u2003\u2003jump r","; jump r"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}}},"br":{},"img":[{"@attributes":{"id":"CUSTOM-CHARACTER-00161","he":"2.79mm","wi":"3.13mm","file":"US07975121-20110705-P00002.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00162","he":"2.79mm","wi":"3.13mm","file":"US07975121-20110705-P00002.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00163","he":"2.79mm","wi":"3.13mm","file":"US07975121-20110705-P00002.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00164","he":"2.46mm","wi":"2.12mm","file":"US07975121-20110705-P00005.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00165","he":"3.13mm","wi":"2.12mm","file":"US07975121-20110705-P00001.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00166","he":"3.13mm","wi":"2.12mm","file":"US07975121-20110705-P00001.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00167","he":"2.46mm","wi":"1.78mm","file":"US07975121-20110705-P00004.TIF","alt":"custom character","img-content":"character","img-format":"tif"}},{"@attributes":{"id":"CUSTOM-CHARACTER-00168","he":"2.46mm","wi":"1.78mm","file":"US07975121-20110705-P00004.TIF","alt":"custom character","img-content":"character","img-format":"tif"}}],"sup":["2","2"],"sub":["0","ra","0","0","0","0","x","0","y","0","x","y"]},"It will be appreciated while the type checker may implement the various rules described above to perform the type checking of assembly code, the rules may be written in other forms for implementation by the type checker. The actual syntax and format of the rules are dependent on the notation systems employed to represent the structures of stacks and\/or heaps. Therefore, the syntax and format of the rules described above are exemplary and not intended to be construed as a limitations,",{"@attributes":{"id":"p-0071","num":"0070"},"figref":"FIG. 3","b":["108","108","302","304","306","308","310","312","314","108","316"]},"The compiler interface module  may retrieve one or more assembly language instructions from a compiler, such as the compiler , as the compiler transforms source code into assembly language code. In one instance, the source code may include the code . Moreover, the compiler interface module  may also be employed to return one or more type checked assembly language instructions to the compiler.","The operand rules module  may be configured to implement the operand typing rules, as described in , to one or more retrieved assembly language instructions. The instruction typing rules module  is configured to implement the instruction typing rules, as described in , to the one or more retrieved assembly language instructions. The stack update rules module  is configured to implement stack update rules, as described in , to the one or more retrieved assembly language instructions. Similarly, the stack implication rules module  is configured to implement stack implication rules, as described in , to the one or more retrieved assembly language instructions.","The location lookup module  is configured to implement the location lookup rules, as described in , to the one or more retrieved assembly language instructions. The stack type lookup module  is configured to implement the stack type lookup rules, as described in , to the one or more retrieved assembly language instructions. Accordingly, each of the rule modules - may be configured with the ability to determine the appropriate rule to apply to the one or more retrieved assembly language instructions. It will be appreciated the various rules implemented by the rule modules - may be stored in the database .","Exemplary Process",{"@attributes":{"id":"p-0075","num":"0074"},"figref":["FIGS. 4 and 5","FIG. 1"],"b":"108"},{"@attributes":{"id":"p-0076","num":"0075"},"figref":["FIG. 4","FIG. 1"],"b":["400","402","108","404","108","108","404","108","406","108","400","408","108","404","400","408"]},"At block , the type checker engine  may determine whether the instruction is a jump instruction. If the type checker engine  determines that the instruction is a jump instruction, (\u201cyes\u201d at decision block ), the type checker engine  may apply a jump rule at block . In one embodiment, the type checker engine  may apply the b-jump rule (63), as described with respect to , to the instruction. Following the application of the jump rule to the instruction at block , the process  may terminate at block .","However, if the type checker engine  determines that the instruction is not a jump instruction (\u201cno\u201d at decision block ), the process  may proceed to block . At block  the type checker engine  may apply one or more rules to type check the instruction. Accordingly to various embodiments, the one or more rules are configured to ensure that the instruction is well-typed. In other words, the one or more rules ensure that the one or more words operated on by the instruction are of the proper types, and the operation does not invalidate the types of the words. The application of one or more rules by the type checker engine  is further described in . Once the instruction is type checked at the block , the process  may loop back to block  so that the type checking of additional instructions may be implemented.",{"@attributes":{"id":"p-0079","num":"0078"},"figref":["FIG. 5","FIG. 5","FIG. 4","FIG. 1","FIG. 1"],"b":["500","412","400","502","108","504","108","108"]},"At block , the type checker engine  may apply one or more location look up rules to the instruction. For example, the type checker engine  may apply the location look up rules (31)-(32), as described with respect to . At block , the type checker engine  may apply one or more stack type look up rules to the instruction. For instance, the type checker engine  may apply the s-lookup rule (33), as described with respect to .","At block , the type checker engine  may apply one or more stack update rules to the instruction. For instance, the type checker engine  may apply the stack update rules (34)-(35), as described with respect to . Finally, at block , the type checker engine  may apply one or more stack implication rules to the instruction. For instance, the type checker engine  may apply the stack implication rules (3)-(10), as described with respect to . Once the one or more rules have been applied, the process  may return to the block  of the process  at block .","Exemplary Computing Environment",{"@attributes":{"id":"p-0082","num":"0081"},"figref":["FIG. 6","FIG. 6"],"b":["600","600","600"]},"In a very basic configuration, computing device  typically includes at least one processing unit  and system memory . Depending on the exact configuration and type of computing device, system memory  may be volatile (such as RAM), non-volatile (such as ROM, flash memory, etc.) or some combination of the two. System memory  typically includes an operating system , one or more program modules , and may include program data . The operating system  includes a component-based framework  that supports components (including properties and events), objects, inheritance, polymorphism, reflection, and provides an object-oriented component-based application programming interface (API), such as, but by no means limited to, that of the .NET\u2122 Framework manufactured by Microsoft Corporation, Redmond, Wash. The device  is of a very basic configuration demarcated by a dashed representation . Again, a terminal may have fewer components but will interact with a computing device that may have such a basic configuration.","Computing device  may have additional features or functionality. For example, computing device  may also include additional data storage devices (removable and\/or non-removable) such as, for example, magnetic disks, optical disks, or tape. Such additional storage is illustrated in  by removable storage  and non-removable storage . Computer storage media may include volatile and nonvolatile, removable and non-removable media implemented in any method or technology for storage of information, such as computer readable instructions, data structures, program modules, or other data. System memory , removable storage  and non-removable storage  are all examples of computer storage media. Computer storage media includes, but is not limited to, RAM, ROM, EEPROM, flash memory or other memory technology, CD-ROM, digital versatile disks (DVD) or other optical storage, magnetic cassettes, magnetic tape, magnetic disk storage or other magnetic storage devices, or any other medium which can be used to store the desired information and which can be accessed by computing device . Any such computer storage media may be part of device . Computing device  may also have input device(s)  such as keyboard, mouse, pen, voice input device, touch input device, etc. Output device(s)  such as a display, speakers, printer, etc. may also be included. These devices are well know in the art and are not discussed at length here.","Computing device  may also contain communication connections  that allow the device to communicate with other computing devices , such as over a network. These networks may include wired networks as well as wireless networks. Communication connections  are one example of communication media. Communication media may typically be embodied by computer readable instructions, data structures, program modules, etc.","It is appreciated that the illustrated computing device  is only one example of a suitable device and is not intended to suggest any limitation as to the scope of use or functionality of the various embodiments described. Other well-known computing devices, systems, environments and\/or configurations that may be suitable for use with the embodiments include, but are not limited to personal computers, server computers, hand-held or laptop devices, multiprocessor systems, microprocessor-base systems, set top boxes, game consoles, programmable consumer electronics, network PCs, minicomputers, mainframe computers, distributed computing environments that include any of the above systems or devices, and\/or the like.","Conclusion","In closing, although the various embodiments have been described in language specific to structural features and\/or methodological acts, it is to be understood that the subject matter defined in the appended representations is not necessarily limited to the specific features or acts described. Rather, the specific features and acts are disclosed as exemplary forms of implementing the claimed subject matter."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The detailed description is described with reference to the accompanying figures. In the figures, the left-most digit(s) of a reference number identifies the figure in which the reference number first appears. The use of the same reference number in different figures indicates similar or identical items.",{"@attributes":{"id":"p-0007","num":"0006"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0008","num":"0007"},"figref":"FIGS. 2A and 2B"},{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 6"}]},"DETDESC":[{},{}]}
