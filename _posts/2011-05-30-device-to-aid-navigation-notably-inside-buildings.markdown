---
title: Device to aid navigation, notably inside buildings
abstract: A device to aid navigation comprises: at least one inertial navigation unit; an integration module estimating the position, speed and orientation of the carrier on the basis of the data supplied by the inertial navigation unit; a digitized map of the locations in which the carrier moves, said map storing a navigable network along which the carrier may move; a module for generating position pseudo-measurements on the basis of the position estimated by the integration module and cartographic data supplied by the digitized map, a position pseudo-measurement indicating the position which should be estimated by the integration module in the presence of movement constraints imposed by the digitized map of the locations; an indirect extended Kalman filter connected to the module for generating position pseudo-measurements by a switch, said filter estimating the errors relating to the position, speed and orientation, and also any other variable associated with the inertial navigation unit, estimated by the integration model on the basis of the position pseudo-measurements produced by the module; a module indicating the availability of a pseudo-measurement of the module controlling the closing of the switch when a pseudo-measurement is available and opening it in the opposite case; the output of the integration module, indicating the position, speed and orientation estimation, being connected to the module for generating position pseudo-measurements, to the Kalman filter and to the positive input of a filter of a subtractor.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08812234&OS=08812234&RS=08812234
owner: Commissariat a l'Energie Atomique et aux Energies Alternatives
number: 08812234
owner_city: Paris
owner_country: FR
publication_date: 20110530
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","FIELD OF THE INVENTION","BACKGROUND","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION"],"p":["This application is a National Stage of International patent application PCT\/EP2011\/058862, filed on May 30, 2011, which claims priority to foreign French patent application No. FR 1054294 , filed on Jun. 2, 2010, the disclosures of which are incorporated by reference in their entirety.","The present invention relates to a device to aid navigation, based on the use of an inertial navigation unit. More particularly, the invention relates to a novel method for the fusion of cartographic data aiming to cancel the drift errors in inertial navigation systems. It applies notably to the guidance of persons with impaired vision inside buildings, or to the guidance of emergency teams in buildings or places inaccessible to the radiofrequency waves used in GPS systems.","Navigation aid systems for use inside buildings, and more generally in places inaccessible to communication via satellite, cannot currently use positioning or georeferencing systems such as GPS. Inside buildings, it must therefore be possible to use other types of navigation systems. In this case, one of the possible solutions is based on the use of an inertial navigation system.","An inertial navigation system is a navigation aid based on movement sensors (accelerometers) and rotation sensors (gyrometers) contained, for example, in an inertial navigation unit. The measurements obtained from these sensors are used to calculate the position, speed and orientation of the inertial navigation unit and, consequently, of the person carrying this system. Unlike other systems, notably systems for positioning via satellite (GPS), via Wi-Fi terminals, Bluetooth, etc., inertial navigation systems are completely autonomous in the sense that they do not depend on the transmission or reception of signals in relation to an external source. They are thus suitable for environments inaccessible to electromagnetic waves. However, these inertial navigation systems depend on the a priori knowledge of the position, speed and orientation of the inertial navigation unit (and therefore the carrier of the system) at the start of the navigation. This information can be supplied by the system operator or can be estimated at the start on the basis of other types of sensor (GPS, RFID, etc.). The position, speed and orientation of the inertial navigation unit are updated progressively on the basis of the measurements of the inertial sensors by suitable algorithms.","In its simplest implementation, a standard inertial navigation system comprises a computing unit and inertial sensors of the accelerometer and gyrometer type. In a general manner, the computing unit mainly comprises two modules: the integration module and the error estimation module. The first is dedicated to the calculation of the position, speed and orientation of the navigation unit through the integration of inertial signals. The second module is dedicated to the estimation of drift errors caused by inertial sensor shortcomings. This estimation is typically carried out using an indirect Kalman filter, the inputs of which depend on additional information sources such as navigable maps, compasses, GPS, etc. The success of these systems depends largely on the accuracy of inertial sensors, the available additional information sources and the manner of making use of the latter.","Given that most navigation systems give the position and orientation of the carrier in relation to a digitized navigation map describing the navigable space, this digital map represents the most readily accessible additional information source for correcting drift errors. This results in methods for fusing inertial data and cartographic data, aiming to increase the accuracy of the inertial navigation systems. Consequently, a problem to be resolved lies in obtaining a method for fusing cartographic data in order to correct the drift errors of an inertial navigation system meeting the following requirements:\n\n","In particular, it must be noted that, for the navigation device to be portable, i.e. light and small, it must be implemented in dedicated hardware architectures commonly known as \u201con-board systems\u201d. In a general manner, these systems have constraints in terms of computing power, memory space, energy consumption, etc. Consequently, the location methods taking account of cartographic data must take account of these constraints.","Current solutions do not allow these requirements to be met. In particular, methods can be found in the prior art based on particle filters, known to have a high computing power requirement, or methods based on direct Kalman filters, requiring change models of the navigating object.","As far as solutions based on particle filters are concerned, the document by B. Krach and P. Roberston, Cascaded estimation architecture for integration of foot-mounted inertial sensors, Proc. IEEE\/ION Position, Location and Navigation Symposium, 2008, pp. 112-119, proposes an inertial navigation system for pedestrians using the technology of MEMS-based miniature inertial navigation units. The solution uses the standard navigation system, previously described, and adds a second data processing module, the inputs of which are the outputs of the standard navigation system, i.e. the estimated position, speed and orientation, and also the cartographic data. The fusion of these inputs is carried out via a particle filter. For its part, the particle filter brings the cartographic data into play via a change model associated with the particles. The principle of this change is as follows: each particle, representing a hypothetical position and orientation of the carrier, for example the pedestrian, changes to a different position provided that there is no obstacle between these two positions. The geographical location of the obstacles, representing walls, for example, is known in advance thanks to the digital map of the locations.","A different document by Widyawan, M. Klepal, and S. Beauregard, A backtracking particle filter for fusing building plans with pdr displacement estimates, Proc. 5th Workshop on Positioning, Navigation and Communication WPNC 2008, 27-27 Mar. 2008, pp. 207-212, presents a system similar to that of the preceding document for the fusion of inertial and cartographic data. The only difference is that, according to this second document, a conventional error estimation algorithm is not implemented, i.e. the algorithm based on a Kalman filter, but the API (Application Programming Interface) supplied by the manufacturer of the inertial navigation unit is used directly in order to obtain an estimation of the orientation of the inertial navigation unit. This API uses a Kalman filter to estimate the orientation of the inertial navigation unit on the basis of the measurements of the accelerometers, gyrometers and magnetometers. On the basis of this estimation, the authors of the document apply conventional integration formulae to the measurements of the accelerometers in order to obtain the position and speed of the pedestrian carrying the navigation system.","The solutions proposed in these documents nevertheless have a plurality of disadvantages:\n\n","As far as the use of the algorithms based on Kalman filters is concerned, a plurality of solutions have been proposed. In particular, various methods for integrating cartographic data into Kalman filtering have been proposed for land and air vehicle tracking applications. All of these techniques apply to the direct Kalman filter, where the change model of the vehicle is available. Given that, in the context of pedestrian inertial navigation, the indirect Kalman filter is used, because the change model of the pedestrian is not known, the algorithms based on an implementation of the direct Kalman filter do not apply.","In a general manner, the indirect Kalman filter is the tool most often used in an error estimation module. This is due to the fact that it can operate in real time at a very high rate, and due to the fact that it is independent from the change model of the inertial navigation unit, i.e. the dynamic model describing the changes in the position, speed and orientation of the navigation unit over time. In fact, the indirect Kalman filter follows the changes in the errors of the integration module and not the changes in the position, speed and orientation of the navigation unit. Consequently, the indirect Kalman filter is independent from this change model. This offers an advantage, for example for locating a pedestrian, since, at the current time, it is not known how to model the movement of the navigation unit when it is attached to the pedestrian, ideally placed on the foot of the latter. Nevertheless, this independence also results in the impossibility of directly considering the movement constraints, introduced by the cartographic data, in the indirect Kalman filter.","One way to get round this obstacle to the fusion of inertial data and cartographic data, in the context of the indirect Kalman filter, is to use the technique known as \u201cmap-matching\u201d. This technique consists in taking the output of the standard navigation system, i.e. the position, and projecting it onto the digitized navigation map in order to obtain a \u201ccorrected\u201d position.","The document by Daniela B\u00fcchel and Pierre-Yves Gilli\u00e9ron, Navigation p\u00e9destre \u00e0 l'int\u00e9rieur des b\u00e2timents [\u201cPedestrian navigation inside buildings\u201d], G\u00e9omatique Suisse 11\/2004 (2004), pages 664-668, proposes two map-matching techniques suitable for pedestrian navigation. The first of these techniques, referred to as point-to-point map-matching, re-adjusts the estimated position in relation to the nearest node of the map. These nodes represent characteristic points such as doors, junctions, or floor connectors. The second technique, referred to as point-to-edge map-matching, determines the nearest edge of the estimated position. The edges represent a route portion modeled by a straight line between two nodes.","One disadvantage of these map-matching techniques is notably that they do not contribute to the estimation of errors of the integration module. In particular, apart from the position which is possibly re-adjusted, orientation and speed errors are not corrected. This lack of corrections results in the medium term in an increase in the errors, ultimately having an adverse effect on the estimated position.","One object of the invention is to overcome the aforementioned disadvantages. To do this, the object of the invention is notably a device to aid navigation, suitable for being fitted to a carrier, this device comprising:\n\n","The corrected position, speed and orientation data presented at the output of the subtractor are, for example, sent to the integration module so that the latter carries out the next position estimation on the basis of these data.","The device comprises, for example, a module for generating a pseudo-measurement of the speed of the inertial navigation unit, a speed pseudo-measurement indicating the speed which should be estimated by the integration module when it is detected that the navigation unit is not moving, an indirect Kalman filter estimating the errors relating to the position, speed and orientation estimated by the integration module on the basis of the speed pseudo-measurements produced by the module, the corrected data at the output of the subtractor being relative to the position, speed and orientation of the carrier.","The level of accuracy of a position pseudo-measurement can be defined using a covariance matrix, said matrix modeling the uncertainty in the position of the carrier around an edge s on which the carrier is located, said edge being located inside the navigable network stored on the digitized map.","The covariance matrix R(s) is, for example, defined according to the following relation:",{"@attributes":{"id":"p-0023","num":"0034"},"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"mi":"R","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}},{"mrow":{"msub":{"mi":["\u03a6","s"]},"mo":"\u2061","mrow":{"mo":["[","]"],"mtable":{"mtr":[{"mtd":[{"msubsup":{"mi":["\u03c3","o"],"mn":"2"}},{"mn":"0"},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"msubsup":{"mi":["\u03c3","a"],"mn":"2"}},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"msubsup":{"mi":["\u03c3","n"],"mn":"2"}}]}]}}},"mo":"\u2062","msubsup":{"mi":["\u03a6","s","T"]}}],"mo":"="}}},"br":{},"sub":["s ","o","n","a"],"sup":["2 ","2 ","2 "]},{"@attributes":{"id":"p-0030","num":"0041"},"figref":"FIG. 1","b":["5","3","2","6","2","5","1","5","6","3","4","6","3","7","2","7","3","6","7","5","3","4","5","4","5"]},{"@attributes":{"id":"p-0031","num":"0042"},"figref":["FIG. 2","FIG. 1","FIG. 1","FIG. 2"],"b":["4","21","4","23","1"]},{"@attributes":{"id":"p-0032","num":"0043"},"figref":"FIG. 3","b":["1","5","2","2","5","3","3","33","5","22","3","7","33","2","7"]},"The position pseudo-measurement indicates the position which should be estimated by the integration module  when the movement constraints imposed by the digitized map of the locations are considered. Given that this estimation is based on an imperfect modeling of the map, the covariance matrix reflecting the uncertainty of the estimation is also determined in the module  \u201cMUPT\u201d. This information is then supplied to the error estimation module , consisting of the indirect Kalman filter, in order to be processed in a probabilistic manner to update the orientation, speed and position error and any other variable to be estimated by the Kalman filter.","The invention thus allows the cartographic data to be integrated directly and in real time into the error estimation module . Thus, the cartographic data also contribute to the drift error estimation of the integration module . Unlike other systems of the prior art, notably illustrated by , where particle filters are used for the fusion of cartographic data, the method according to the invention is economical in terms of computing and is consequently suitable, for example for on-board and\/or real-time applications. Furthermore, the use of the MUPT procedure allows the estimation of the errors of the three components linked to the orientation, i.e. roll, pitch and yaw, in contrast to the system shown in . In fact, it is well known that the use of the speed pseudo-measurement does not allow yaw errors to be estimated.","Thus, the system according to the invention shown in  comprises one or more inertial navigation units , an integration module , a module for generating position pseudo-measurements  as previously described, a digitized map , an indirect Kalman filter  to carry out the error estimation and a step detector . Optionally, a generator of speed pseudo-measurements  can also be included. The mode of operation is as follows: the output of the module  is connected to the modules , , and to the positive input of a subtractor  and optionally to the module . In this case, the module  and the module  are connected to the module  only if the switch  is closed. The module  closes the switch  when a step has been detected and opens it in the opposite case. The module  receives at its input the pseudo-measurements produced by the modules  and , when the switch  is closed, in order to estimate the errors of the module . The errors estimated by the module  are then used in the negative input of the subtractor  to correct the position, speed and orientation estimations calculated by the module , the subtractor taking away the value present at its negative input from the value present at its positive input. Finally, the position, speed and orientation thus corrected at the output of the subtractor  are forwarded to the module  so that the latter carries out the next estimation on the basis of error-free data.",{"@attributes":{"id":"p-0036","num":"0047"},"figref":["FIG. 4","FIG. 4"],"b":["41","40","42","22"]},"The integration module  continuously calculates the position of the inertial navigation unit , fixed, for example, to the shoe of the pedestrian, on the basis of noisy measurements of inertial sensors. At a given time t, the position calculated  by the integration module may be located outside the navigable domain  due to drift errors caused by the shortcomings of the inertial sensors. This position being incorrect, it must be corrected in order to avoid propagation of the error over time. To do this, the module MUPT  projects the position  onto the navigable network in order to generate a position pseudo-measurement  which belongs to the navigable network . Given that the true position of the carrier  may be located on any given point around the edge s and not necessarily on the projection , the module MUPT  also defines a confidence zone  centered on the projection  and adapted to the edge s. Finally, the module MUPT  supplies the indirect Kalman filter with the position pseudo-measurement with a level of accuracy defined, in the example, by the ellipse . The filter processes these data to calculate the drift errors of the integration module.","The Kalman filter is a recursive estimator. In other words, only the preceding state and the current measurements are necessary in order to estimate the current state, in this case the measurements of the module MUPT  and optionally of the module ZUPT . The filter has two distinct phases, the prediction and the update. The prediction phase uses the estimated state of the preceding time to produce an estimation of the current state. In the update step, the observations of the current time are used to correct the predicted state in order to obtain a more accurate estimation. The invention uses, for example, an indirect Kalman filter. In a standard implementation of the direct Kalman filter, the states such as the orientation, speed and position would be located among the variables of the filter and the measurements would be the inputs of the integration module , such as the accelerations and rotation speeds measured by the inertial sensors. In the indirect Kalman filter, the orientation, speed and position errors are located among the estimated variables and the measurement presented to the filter is the difference between the output of the integration module  and an additional information source which, in this case, are the outputs of the modules MUPT  and ZUPT .","In a more formal manner, let it be assumed that a pedestrian carrying the system is located on the edge s of the navigable network , and that the position estimated by the integration module  at the current time is {circumflex over (r)}. The projection of {circumflex over (r)} onto s can be written according to the following relation:\n\n()\u2003\u2003(6)\n\nwhere f(\u00b7) is a vector function, the form of which depends on the chosen projection type (orthogonal or probabilistic) and on the edge s.\n","For the sake of simplicity, the model allowing the pseudo-measurement yand the true position of the pedestrian r to be connected can be written according to the following relation:\n\n()\u2003\u2003(7)\n\nwhere w(s) is a Gaussian white noise with a zero mean and a covariance matrix R(s). The matrix R(s) is deemed to model the uncertainty in the position of the carrier around the edge s. The directional noise model defined according to the following relation can be used for this purpose:\n",{"@attributes":{"id":"p-0041","num":"0052"},"maths":{"@attributes":{"id":"MATH-US-00002","num":"00002"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"mi":"R","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}},{"mrow":{"msub":{"mi":["\u03a6","s"]},"mo":"\u2061","mrow":{"mo":["[","]"],"mtable":{"mtr":[{"mtd":[{"msubsup":{"mi":["\u03c3","o"],"mn":"2"}},{"mn":"0"},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"msubsup":{"mi":["\u03c3","a"],"mn":"2"}},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"msubsup":{"mi":["\u03c3","n"],"mn":"2"}}]}]}}},"mo":"\u2062","msubsup":{"mi":["\u03a6","s","T"]}}],"mo":"="}},{"mrow":{"mo":["(",")"],"mn":"8"}}]}}}},"br":{},"sub":["s ","o","n","a"],"sup":["2 ","2 ","2 "],"b":"42"},"Taking into account the error definition on the position written as\n\n\u03b4\n\nwhere r is the true position of the navigation unit, and replacing r with the position pseudo-measurement y, the measurement model for the indirect Kalman filter is obtained, given by\n",{"@attributes":{"id":"p-0043","num":"0054"},"maths":{"@attributes":{"id":"MATH-US-00003","num":"00003"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mtable":{"mtr":[{"mtd":{"mrow":{"msub":{"mi":"z","mrow":{"mi":["\u03b4","r"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}}},"mo":["=","\u2062"],"mi":{},"mrow":{"msub":{"mi":["y","r"]},"mo":"-","mover":{"mi":"r","mo":"^"}}}}},{"mtd":{"mrow":{"mo":["=","\u2062"],"mi":{},"mrow":{"mrow":{"mi":["\u03b4","r"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}},"mo":"+","msub":{"mi":["w","r"]}}}}}]}},{"mrow":{"mo":["(",")"],"mn":"9"}}]}}}}},"A more detailed analysis of the equation (9) reveals that the input of the Kalman filter zis a measurement of the deviation between the position {circumflex over (r)} estimated by the integration model  and its projection yonto the map, shown by . This deviation is modeled as a random Gaussian variable with a mean \u03b4r and a covariance matrix R(s). Consequently, the Kalman filter  estimates a value of \u03b4r such that the corrected value of the position r=\u03b4r+{circumflex over (r)} is close to the edge which models the position of the pedestrian on the map. In other words, the drift errors, introduced by the presence of errors in the measurements yand yof the accelerometers and gyrometers are constrained by the cartography of the locations.","A system according to the invention notably has the following advantages:\n\n","The invention is perfectly suitable for a real-time guidance application for pedestrians inside a building. Thus, the invention can be applied, for example, to the navigation aid of persons with impaired vision in corridors and underground railway stations, or for the assistance of emergency services, such as fireman or policemen, for example, during a call-out. The invention can also be applied to provide guidance outside.","Finally, a device according to the invention can be applied not only to the guidance of persons, but also to the guidance of controllable objects, notably robots."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Other characteristics and advantages of the invention will become clear from the attached drawings, in which:",{"@attributes":{"id":"p-0025","num":"0036"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0026","num":"0037"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0027","num":"0038"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0028","num":"0039"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0029","num":"0040"},"figref":"FIG. 5"}]},"DETDESC":[{},{}]}
