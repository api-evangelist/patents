---
title: Determining taxes by applying tax rules specified using configurable templates
abstract: One embodiment of the present invention provides a system that is designed in a manner that processes used for determining or administering taxes for a transaction apply tax rules that are specified (by a tax user) using configurable templates. During operation, the system receives a transaction for which taxes are to be determined during which a process may require the application of rules. The system then examines a configurable template associated with a tax rule, wherein the configurable template identifies a set of attributes associated with the transaction. The system also examines a condition group for the set of attributes. If each condition of the condition group is satisfied, the system, by way of completing the said process, uses the process result that is associated with the condition group for the process.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07647258&OS=07647258&RS=07647258
owner: Oracle International Corporation
number: 07647258
owner_city: Redwood Shores
owner_country: US
publication_date: 20030709
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["RELATED APPLICATIONS","BACKGROUND","SUMMARY","DETAILED DESCRIPTION"],"p":["This application hereby claims priority under 35 U.S.C. \u00a7119 to U.S. Provisional Patent Application No. 60\/398,767, filed on Jul. 26, 2002, entitled \u201cDetermining Taxes By Applying Tax Rules Specified Using Configurable Templates,\u201d by inventors Alexander O. Fiteni and Isaac J. William. The subject matter of this application is also related to the subject matter in a co-pending non-provisional application entitled, \u201cMethod and Apparatus for Providing a Tax Service that is Configurable for Local Jurisdictions,\u201d by Alexander O. Fiteni, Paulo V. Back, Isaac J. William, Harshavardhan Takle, Desh Deepak, and Roberto vono Silva, having Ser. No. 10\/106,729, and filing date Mar. 26, 2002.","1. Field of the Invention","The present invention relates to computer-based systems for calculating and administering taxes. More specifically, the present invention relates to a method and an apparatus for determining taxes by applying tax rules that are specified using configurable templates.","2. Related Art","As companies expand their businesses beyond national borders and into the global marketplace, it is becoming increasingly harder to ensure that taxes are accurately determined. Determining taxes and managing tax compliance on a global scale is an enormously complicated task because each legislature with a right to levy taxes within its jurisdictional boundaries can establish its own set of taxes, as well as its own set of rules for regulating tax compliance. For example, in the United States alone there are over 6,000 individual jurisdictions that have the right to levy taxes, and perhaps that many more again worldwide.","The ad-hoc nature of the information required to calculate taxes makes codification and structuring of such information difficult. Consequently, existing computer-based systems for managing tax compliance are custom-built for each jurisdiction. This requires large amounts of programmer time to build systems for each jurisdiction, which can result in a considerable expense. Moreover, adding new countries or complying with new rules involves producing yet even more code, and consequently requires even more programmer time. Unfortunately, much of this programmer time is wasted because similar solutions are typically developed for each of the different jurisdictions.","Moreover, tax rules continually change for each jurisdiction. Hence, the underlying code for a computer-based tax management system must be continually modified to keep pace with these changes. At present, these changes are made at significant cost by a skilled programmer operating under the direction of a tax expert for each of the different jurisdictions.","What is needed is a method and an apparatus for determining taxes and managing tax compliance requiring little or no programming for individual tax jurisdictions. In other words, what is needed is method and an apparatus for determining taxes and managing tax compliance that can be configured by an expert in the field, such as a tax professional who may have little or no knowledge of computer programming.","One embodiment of the present invention provides a system that determines taxes for a transaction by applying tax rules specified using configurable templates. During operation, the system receives a transaction for which taxes are to be determined. In the course of fulfilling the request for determining taxes, a process of a component may evaluate tax rules in order to return a result, which may be an intermediate result or a result that is directly requested. For such a process of a component to determine taxes, the system examines a first configurable template associated with a first tax rule, wherein the first configurable template identifies a first set of attributes. The system identifies a first set of conditions for the above-mentioned first set of attributes. For the first condition of the first set of conditions, the value of the attribute used in this first condition is compared with the value of the same attribute that is associated with the transaction using the comparison method specified. If the comparison is successful, this first condition is deemed to be satisfied and the next condition of the first set of conditions is evaluated in like manner. If each condition (of the first set of conditions) is satisfied, then the first set of conditions is deemed to be evaluated successfully, and the system uses the process result associated with this first set of conditions in determining a tax for the transaction; and the first tax rule is deemed to be evaluated successfully.","In a variation on this embodiment, if the first set of conditions is not satisfied and if an alternative set of conditions for the first set of attributes is satisfied, the system uses an the process result associated with the alternative set of conditions in determining the tax for the transaction; and the first tax rule is deemed to be evaluated successfully.","In a variation on this embodiment, if none of the sets of conditions (i.e., neither the first set of conditions nor an alternative set of conditions) is satisfied for the first set of attributes, then the first rule is not deemed to be evaluated successfully. The system attempts to evaluate any additional (alternative) tax rules for the same process of the component for determining taxes. Any additional (alternative) tax rules are considered in a sequence determined by a precedence ordering of the additional tax rules. This precedence ordering can be used by a tax user (i.e., a person with knowledge of the tax domain and entrusted with the responsibility of interpreting tax authority rules and setting them up as tax rules in the system) to have more specific tax rules evaluated (by the system) before more general tax rules are evaluated.","In a variation on this embodiment, the system allows a user to create configurable templates that can (subsequently) be associated with one or more tax rules.","In a variation on this embodiment, the system allows a user to modify the attributes used in creating configurable templates that can subsequently associated with one or tax rules.","In a variation on this embodiment, the system allows tax rules to be created that specify whether or not a specific tax is applicable to the transaction. In this embodiment, during the process of determining taxes, the component performs a tax applicability determination for a given tax.","In a variation on this embodiment, the system allows tax rules to be created that specify the tax rate that is to be used in determining the tax amount for a tax. In this embodiment, during the process of determining taxes, the component performs a tax rate determination for a given tax.","In a variation on this embodiment, the system allows tax rules to be created that specify a tax status of a tax. In this embodiment, during the process of determining taxes, the component performs a tax status determination for a given tax.","In other similar variations on this embodiment, the system allows tax rules to be created to specify the results of various processes, including a place of supply determination, a tax status determination, a tax recovery rate determination, a tax date determination, etc.","In a variation on this embodiment, the system allows tax rules to be created to specify the results of many processes in a single rule. For example, the system may allow a tax rule to be created to specify the (combined) results of tax applicability, tax status determination, and tax rate determination for each set of conditions of the configurable template associated with the rule.","In a variation on this embodiment, different sets of tax rules can be created for different local jurisdictions, such as tax regimes and taxes, and the configurable templates that are used can be different for different local jurisdictions.","In a variation on this embodiment, the system allows tax rules to be created for a hierarchy of tax regimes in such a way as to allow the specification of a general rule for a higher-level regime, and increasingly specific rules down the regime hierarchy and down to the level of taxes in the lowest level of regime.","This embodiment enables a user to avoid repeating rules which are generic for every tax. Instead, the user only define rules which are specific to a given tax and\/or tax status, or a given tax and tax recovery type, for example at the lowest level.","In a variation the system allows tax rules to be defined for subscribers according to an open subscription model that allows sharing of rules across subscribers in a subscription hierarchy. This embodiment enables a user to avoid repeating rules which are generic for every subscriber. Instead, the user only defines rules which are specific to a given subscriber at the lowest level, while allowing a parent (i.e., a subscriber higher up in the subscription hierarchy) to define more general rules which may be shared.","In a variation on this embodiment, the system includes a database for storing the first tax rule, the first configurable template and the first set of conditions.","Table 1 illustrates different tax regimes, tax jurisdictions, and taxes for different countries in accordance with an embodiment of the present invention.","The following description is presented to enable any person skilled in the art to make and use the invention, and is provided in the context of a particular application and its requirements. Various modifications to the disclosed embodiments will be readily apparent to those skilled in the art, and the general principles defined herein may be applied to other embodiments and applications without departing from the spirit and scope of the present invention. Thus, the present invention is not intended to be limited to the embodiments shown, but is to be accorded the widest scope consistent with the principles and features disclosed herein.","The data structures and code described in this detailed description are typically stored on a computer readable storage medium, which may be any device or medium that can store code and\/or data for use by a computer system. This includes, but is not limited to, magnetic and optical storage devices, such as disk drives, magnetic tape, CDs (compact discs) and DVDs, and computer instruction signals embodied in a transmission medium (with or without a carrier wave upon which the signals are modulated). For example, the transmission medium may include a communications network, such as the Internet.","Distributed Computer System",{"@attributes":{"id":"p-0040","num":"0039"},"figref":"FIG. 1","b":["100","100","102","104","130","120"]},"Clients - can generally include any device on a network including computational capability and including a mechanism for communicating across the network. Clients - operate under control of parties -, respectively. (Note that the term \u201cparties\u201d here refers to users of the computer system; it is not the same as the parties involved in taxable transactions.)","Server  can generally include one or more (interconnected) computing devices, including a mechanism for servicing requests from clients - for computational and\/or data storage resources. Note that clients - and server  can generally include any type of computing device, including, but not limited to, a computer system based on a microprocessor, a mainframe computer, a digital signal processor, a portable computing device, a personal organizer, a device controller, and a computational engine within an appliance.","Network  can generally include any type of wire or wireless communication channel capable of coupling together computing nodes. This includes, but is not limited to, a local area network, a wide area network, or a combination of networks. In one embodiment of the present invention, network  includes the Internet.","Server  is coupled to a database , which contains data that is used by applications running on server . Note that these server-based applications may be running on behalf of remote applications on clients -. Database  can generally include any type of system for storing data in non-volatile storage. This includes, but is not limited to, systems based upon magnetic, optical, and magneto-optical storage devices, as well as storage devices based on flash memory and\/or battery-backed up memory.","Server  acts as a host machine for tax service . This allows applications running on clients - to make requests across network  to tax service  running on server . For example, an application running on client  can send a request to tax service  to perform the tax calculation, including determination of the local jurisdictions involved and, further, performing the computations necessary for each of the local jurisdictions.","Note that tax service  is configured so that it can optionally receive tax rules and data for local jurisdictions  from an external source, such as a tax expert for the local jurisdiction, prior to a request such as made by clients -. Further, tax service  is configured to use tax rules and data received from an external source in servicing a request from a client. Furthermore, tax rules and data  can be encoded in a published format, such as extensible markup language (XML) or electronic data interchange (EDI) format, to facilitate receiving the tax rules and data  from different sources. Note that tax rules and data  can be communicated to tax service  across network .","Tax service  is additionally configured so that it can operate with an external tax service  provided by an external tax service provider. In this way, the external tax service provider can service the request with an operation (internal to tax service ), such as a database lookup of a tax rate or a tax computation, in order to facilitate completing a tax operation for a specific jurisdiction by tax service . Furthermore, note that this external tax service provider may be located on a remote server that is accessible through network . A given request can be partially fulfilled by tax service  using tax rules and data  for one or more local jurisdictions, while using the tax service  of an external tax service provider to perform the computations for another local jurisdiction that might be simultaneously applicable.","Tax Service Structure",{"@attributes":{"id":"p-0048","num":"0047"},"figref":"FIG. 2","b":["132","132","202","204","206","208","210","217","212","214","216"]},"TSRM  generally manages interactions between external business transactions and tax processing operations. In one embodiment of the present invention, TSRM  is implemented as a set of published services that an external business application running on clients - may request. As is illustrated in , TSRM  receives a request  to perform a tax processing operation from an application running on one of clients -.","Open subscription model  defines the security and access protocols used by TSRM  as well as tax rules navigator , tax determination manager (TDM) , tax configuration manager (TCM)  and tax administration manager . It also allows subscribers, such as parties -, to select and receive services from either tax service  and\/or various external service providers, such as tax service . During operation, open subscription module  communicates with trading community model , which represents various parties, sites and locations involved in the tax operations in a standardized format.","Tax repository manager  provides services that facilitate the storage into and retrieval of data from the record repository . These services are used by the tax determination manager  and tax administration manager .","Geography model  contains information about the geographical boundaries of the various jurisdictions associated with different tax regimes.","Tax configuration manager  provides services that can provide information from and\/or can write information into, the geography model, the trading community model, an inventory system, tax services request manager , tax determination manager , tax rules navigator  and tax administration manager .","Tax rules navigator  facilitates access to tax data contained in knowledge base  and tax rules contained in rule base . Note that knowledge base  and tax rules  may actually reside within database  illustrated in .","Tax Service Operations Overview","Upon receiving a request  for tax processing, TSRM  uses the services of tax configuration manager  to identify the subscriber that will be used to plug into the open subscription model  to determine the data access and service subscriptions.","Tax determination manager (TDM)  is called by TSRM  to determine the local jurisdiction or jurisdictions for which tax computation needs to be performed. TDM  uses information from trading community model  and geography model  in ascertaining the local jurisdictions. Optionally, TDM  can use tax rules navigator  to access the necessary information contained within the knowledge base  and\/or rule base .","After the local jurisdictions (for which tax must be computed) are identified, TSRM  invokes the services of either tax service  or TDM  to perform the computations for each of the identified local jurisdictions. In deciding whether to use tax service , TSRM  makes use of information in the open subscription model .","When the TDM  is used to perform the computations for one or more local jurisdictions, it makes use of services from tax configuration manager , trading community model  and geography model , as well as the tax rules navigator . (Tax rules navigator  is used to access relevant information from knowledge base  and rule base .)","TSRM  then invokes the services of TDM  to collect and summarize the information of the results of the various tax computations performed. In doing so, TDM  uses tax rules navigator  to access information from the knowledge base  and\/or rule base . TSRM  then returns the information, summarized to the appropriate level as above, to the request .","Finally, depending on the setup within the TSRM  for the current event and the type of request , TSRM calls a service of tax repository manager  to store the results of tax processing performed for the request  by the system.","The above-described components work together to provide tax services as is described below with reference to .","Details of the Operation of Tax Service",{"@attributes":{"id":"p-0062","num":"0061"},"figref":"FIG. 3","b":["132","112","208","302","102","112","132","304","144"]},"The system can receive tax rules and data  for one or more local jurisdictions (step ) through a data loading process. Or, a user can manually feed tax rules and data  into rule base  and knowledge base  using facilities provided by TDM  and TCM  (step ). Or, a combination of both methods may be used to configure the system with data and rules.","Next, the system receives a request from the subscriber (step ), wherein servicing the request may involve calculating a tax amount for one or more local jurisdictions. In response to this request, the system calculates the tax for each local jurisdiction that was identified above, by using the tax rules and tax data stored in knowledge base  and rule base  (step ). The system subsequently uses a result of this calculation in order to service the request (step ).","For example, the request from the subscriber may require the determination of taxes involving the sale of an item. To fulfill this request, the system first determines the local jurisdictions that need to be considered. In doing so, it may identify, for example, that a local sales tax is the only applicable tax, using the knowledge base  and, optionally, the rule base. The system could also determine the taxable basis and tax status for the local sales tax using the knowledge base  and again, optionally, use the rule base  to determine the taxable basis. Similarly, the system could lookup the tax rate from the knowledge base . The system may also determine that a reduced rate applies for the local sales tax, by applying a rule from rule base . Having the rate and the taxable basis, the system would then proceed to calculate the tax amount and perform any rounding that may be necessary. Then, the system can prepare the tax information for return to the transaction system that requested the service, and can record the information in the record repository if necessary. Note that the service request may be initiated by an external system while performing a financial or a billing transaction to complete the sale.","Unlike prior tax computation systems, the above-described system allows new jurisdictional rules to be implemented by merely loading additional data and rules independent of the system that uses its services. Time-consuming programming is not required to effect changes in tax rules. Also, there is little or no necessity on the part of the calling system to be aware of such changes.","Overview of Taxes and Jurisdictions","To understand what a jurisdiction is, a brief description and a few examples of jurisdictions are provided.","Each country can have one or more systems of taxation each of which deals with the taxation of specific aspects of a business transaction. For example, a \u201cSales\u201d type of taxation system deals with the rules and regulations of how a sales transaction should be taxed. Similarly, a \u201cValue Added Tax\u201d (or, \u201cVAT\u201d) type of taxation system deals with how the value addition in a manufacturing and\/or sales lifecycle needs to be taxed. This system of rules and regulations is called a tax regime. A tax regime is implemented by one or more distinct charges. Each such specific charge is called a tax. Therefore, a regime may include one or more different taxes. The imposition of a tax is limited typically by a geographical boundary, in most cases around a contiguous political\/administrative area, such as a city or a county. However, in some cases, a tax may be imposed, or may vary owing to belonging to a non-political demarcation, such as a free-trade zone. The incidence of a tax on a geographical area is called a tax jurisdiction.","A jurisdiction may be created for a country, a state within a country, a county within a state, or a city within a county. In certain cases, a jurisdiction may need to encompass, for example, a couple of cities; or, a county and an adjoining city belonging to a neighboring county. Or, as explained above, jurisdictions may be created for areas such as free-trade zones, export processing zones, etc.",{"@attributes":{"id":"p-0070","num":"0069"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"5"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"5","colwidth":"63pt","align":"left"}}],"thead":{"row":[{"entry":"TABLE 1"},{"entry":{"@attributes":{"namest":"1","nameend":"5","align":"center","rowsep":"1"}}},{"entry":["Country","Tax Regime","Tax","Tax Type","Tax Jurisdiction"]},{"entry":{"@attributes":{"namest":"1","nameend":"5","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["United","US Sales Tax","State Sales Tax","Sales Tax","California (State)"]},{"entry":"States"},{"entry":[{},"US Sales Tax","District Tax","Sales Tax","San Francisco (City)"]},{"entry":["Canada","Canadian Goods","GST","VAT","Canada (Country)"]},{"entry":[{},"and Services Tax"]},{"entry":[{},"Canadian Goods","HST","VAT","New Brunswick"]},{"entry":[{},"and Services Tax",{},{},"(Province)"]},{"entry":[{},"Canadian Sales","PST","Sales Tax","Ontario (Province)"]},{"entry":[{},"Tax"]},{"entry":["Singapore","Singapore Goods","GST","VAT","Singapore (Country)"]},{"entry":[{},"and Services Tax"]},{"entry":["India","India Excise and","Excise Tax","VAT","India (Country)"]},{"entry":[{},"Customs"]},{"entry":[{},"India Excise and","Additional","VAT","India (Country)"]},{"entry":[{},"Customs","Excise Tax"]},{"entry":[{},"India Excise and","Customs Duty","Customs","India (Country)"]},{"entry":[{},"Customs"]},{"entry":["Brazil","RICMS-Brazil","ICMS","VAT","Sao Paulo (State)"]},{"entry":[{},"ICMS Rules"]},{"entry":[{},"RICMS-Brazil","ICMS-ST","VAT","Sao Paulo (State)"]},{"entry":[{},"ICMS Rules"]},{"entry":[{},"RIPI-Brazil IPI","IPI","VAT","Brazil (Country)"]},{"entry":[{},"Rules"]},{"entry":[{},"RII-Brazil II","II","Customs","Brazil (Country)"]},{"entry":[{},"Rules"]},{"entry":["Portugal","Portugal VAT","Domestic VAT","VAT","Portugal (Country)"]},{"entry":["Portugal","Portugal VAT","Inter-EU VAT","VAT","Portugal (Country)"]},{"entry":{"@attributes":{"namest":"1","nameend":"5","align":"center","rowsep":"1"}}}]}}}}},"Table 1 illustrates different tax regimes, tax jurisdictions, and taxes for different countries. Table 1, reading from left to right, goes from the highest level to the most detailed level of granularity. There may be one or more tax regimes in a country; each regime can consist of one or more taxes; each tax is of a given tax type, which is a high level classification such as Sales Tax, Excise Tax and Mineral Oil Tax; and each tax can be levied in one or more tax jurisdictions (for one or more geographical elements).","Process of Determining Taxes using the System",{"@attributes":{"id":"p-0072","num":"0071"},"figref":"FIG. 4"},"Process of Determining Applicable Tax Regimes","The system starts by determining which tax regimes are applicable (step ) for each line of a document (for which request  is made).","Process of Determining Detail Tax Lines for a Tax Regime","For each tax regime determined applicable in step , the system (or, more specifically, TDM ) determines the taxes and the tax jurisdictions that are involved, using the services of TCM , geography model  trading community model , knowledge base  and, optionally, the tax rules navigator  and tax rule base  (step ).","TDM  creates a detail tax line and executes the steps , ,  and , in that order, for each tax that is found applicable in step , utilizing other services and components as necessary.","TDM  determines the tax status for each applicable tax, using the knowledge base  and, optionally, the tax rules navigator  and tax rule base  (step ).","TDM  then determines the tax rate, using the knowledge base  and, optionally, the tax rules navigator  and tax rule base  (step ).","TDM  determines the taxable basis for each applicable tax, using the knowledge base  and, optionally, the tax rules navigator  and tax rule base  (step ).","This enables TDM  to subsequently calculate the tax involved in the transaction (step ).","Process of Recording, Rounding and Creation of Summary Tax Lines","The system executes steps  and , in that order, for the document for which request  was made.","Tax repository manager  performs the rounding, and records the detail tax lines.","Tax repository manager  then performs other necessary document level actions including the generation and recording of summary tax lines (step ).","The system then enables the requesting transaction to view and\/or receive and\/or store the tax information, possibly along with other non-tax-related transactional information. The transaction may at a subsequent point use this information to pass to an accounting system (see  in ) capable of interpreting the same and creating the relevant accounting entries.","Knowledge\/Rule Base Creation Independence of Request Fulfillment","Note that the above-described system is modularized so that the means of acquiring the data in the knowledge base  and\/or the rule base  do not affect the means of fulfilling a service request.","In other words, gathering, receiving and storing data in the knowledge base  and\/or the rule base  can be accomplished by using a computer readable format, either procured from a third party (provider) or obtained from other sources, such as a tax authority (responsible for administering one or more taxes in the local jurisdiction). It can also be entered manually by a tax professional\/end user.","Further, note that the external business transaction making the request  does not need to be aware of the origin (or the method of collection) of the data that was used in fulfilling the request.","Process of Determining Taxes Using Tax Services External to the System","The process of servicing requests, such as request , from a subscriber can involve performing all determinations and calculations using the system, as described in the preceding section (Process of Determining Taxes using the System).","Alternatively, request  may be fulfilled by utilizing tax determination and calculation services provided by one or more third parties, i.e., without using the tax determination and calculation services of tax service . As a variant, the system may also perform tax determination and calculation for certain jurisdictions using the services of the system while utilizing services provided by third parties for other jurisdictions. The process followed to service a request such as request  partially utilizing services of third parties is illustrated in .","This involves first determining all the tax regimes for which tax may need to be determined (, ). Next, for each tax regime, the system determines, using the Open Subscription Model (), the identity of the third party\u2014also called a \u201cprovider\u201d\u2014whose external service(s) -, is needed to perform the determination and calculation for the tax regime (step ).","If an external tax service such as tax service  is identified for a given tax regime (step ), the system then sends a service request to the third party with the necessary details for the tax regime (-), and receives the tax details for the tax regime from the third party.","If no external tax service such as tax service  is identified for a given tax regime (step ), the system determines taxes for the tax regime (, step ) using TDM  primarily, along with other components and processes as described in Process of Determining Taxes using the System, and illustrated in , particularly steps , , , , and  (i.e., in the previous section entitled, Process of Determining Detail Tax Lines for a Tax Regime).","If there are other applicable tax regimes for the current line of the external business transaction (step ), then processing begins for the next tax regime at step .","If there are no other applicable tax regimes for the current line of the external business transaction (step ), then the system checks if there are any more transaction lines to be considered (step ).","If there are any more transaction lines to be considered (step ), the system begins processing for the next transaction line at step .","If there are no more transaction lines to be considered (step ), the system begins processing at step  to perform actions at the level of the external business transaction or document.","Process of Recording, Rounding and Creation of Summary Tax Lines","Tax repository manager  collects, organizes and performs the rounding, and records the detail tax lines (steps , ).","Tax repository manager  then performs other necessary document level actions including the generation and recording of summary tax lines (step , ).","The system returns tax information () in the requisite level of summarization, thereby servicing the request, such as request .","Operations Performed by Tax Service",{"@attributes":{"id":"p-0099","num":"0098"},"figref":["FIG. 5","FIG. 5","FIG. 5","FIG. 5"],"b":["132","501","502","506"]},"The services provided by the system are the public face of the tax domain. Rather like an ATM machine, these services clearly announce what they will do. Moreover, clear instructions are provided on how to interact with tax service , and what to expect as an outcome.","To understand this diagram, consider an ATM as a system. Examples of actors are \u201cAccount Holder\u201d, \u201cMaintenance Person\u201d and \u201cCurrency Note Filler\u201d. External services are like the services that an \u201cAccount Holder\u201d (actor) can avail of at an ATM\u2014such as \u201cDeposit Cash\u201d, and \u201cWithdraw Cash\u201d. There may be different services available to other actors, such as, \u201cMaintenance Person\u201d and \u201cCurrency Note Filler\u201d. Internal Services are like \u201cDebit Account\u201d, and \u201cConfiscate Card\u201d which cannot be seen by an actor.","Within the system boundary, the system providing tax services is composed of a number of services, such as the Define Tax Content service . The arrows emanating from an actor and which have \u201cRequest\u201d alongside, are services which are \u201cexposed\u201d to the external world. Examples are manage tax accounts  and determine tax . Services such as record tax  are not allowed to be directly requested by an actor.","The services illustrated in  operate on a content repository  as well as a record repository . Content repository  includes knowledge base  and rule base . It is the primary source of tax information for tax services and includes knowledge about transaction-based taxes. A key interaction with content repository happens through the \u201cdefine tax content\u201d service , which is used to input data into content repository .","Record repository  stores information relating to tax events and tax status. It stores tax records along with any relevant changes to the tax records. Hence, it essentially contains the current, historical record of the results of interactions of the tax domain with the outside world. It also serves as a key source of information in: managing tax liabilities and assets with tax authorities; reporting taxpayer audit information on taxes collected or accrued; and in providing tax information for analysis and planning. An interaction with record repository  happens through the \u201crecord tax\u201d service .","The \u201cdefine tax content\u201d service  provides methods to manage permanent definitions within content repository  for the tax domain. These methods can include adding, updating, disabling, purging, validating or listing data.","The \u201cdetermine tax\u201d service  uses information from both content repository  and record repository  to: determine the applicable taxes; determine the tax status for a given tax; determine the tax rate for a tax status of a specific tax; calculate the tax amount given the tax rate. It is composed of a number of internal services (not shown in the diagram), which make use of rules in the rule base  as well as the information contained in knowledge base .","The \u201cmanage tax accounts\u201d service  provides a number of services to support administration, including the settlement of liabilities to a tax authority and recovery of amounts owed by a tax authority. The manage tax accounts service  may additionally maintain cumulative fiscal balances for a taxpayer and the current balances in tax authority specified registers.","The \u201crecord tax\u201d service  is used to maintain record repository . It is typically called by other services, such as determine tax service  and manage tax accounts service .","The \u201creport tax\u201d service  manages and responds to the various reporting needs that a tax domain management system may have to fulfill in order to support tax administration. It generally enables the extract of raw data from record repository  in order to make it presentable to the outside world and\/or adhere to format prescribed by a tax authority. Note that this raw data may be formatted into report form, or alternatively as a data set that is capable of being reformatted by a reporting tool.","The \u201creconcile tax\u201d service  manages the process of reconciling the information in the record repository  with the information in an external accounting system. This is a requirement that a tax domain management system may have to fulfill in order to support tax administration in many local jurisdictions. It generally enables a tax user to identify the reasons why the accounting record of transactions is different from the tax record of transactions (as found in record repository ).","Note that although  describes certain operations performed by Tax Service , only certain services have been described in detail.","Temporal View of Operations Performed by Tax Service",{"@attributes":{"id":"p-0112","num":"0111"},"figref":["FIG. 6","FIG. 6"],"b":"132"},"Note that diagram is split vertically into \u201cswim lanes\u201d. The vertical bars between the swim lanes represent separation between actors. The passage of time is represented by vertical arrows from top to bottom. For example, a request to Determine Tax  happens after the request to Manage Tax Content  is completed. Horizontal lines represent a point in time. Activities represented by arrows flowing down to a horizontal line must be completed before any activity below the horizontal line can begin.","Each service can be accessed via an application programming interface (API), or alternatively through a message from an external requester. Once a request is passed to a service, the service is responsible for determining the relevant actions needed to fulfill the request.","A first set of activities are \u201coccasional activities\u201d that mainly involve setup and content management. These are actions that do not occur on a regular basis, and include actions such as purging, or requiring a service to upload revised or new tax information.","A second set of activities are \u201ctransaction activities\u201d that occur more frequently and may require one or more services. These activities may include actions such as determining tax and managing tax account information. A third set of activities are \u201cperiodic activities\u201d that are performed routinely at periodic intervals. These activities can include preparing tax declarations and remittances to tax authorities for a given tax period.","Using Rules to Determine Taxes","Overview and Definitions of Terms","The need for a tax rule base and a rule navigator is because tax authority rules\/regulations are complex, typically needing the expertise of a person \u201cskilled in the art,\u201d such as a user who knows about tax rules and regulations, etc. (i.e., a tax user) to interpret and apply such rules. Also, such tax authority rules and regulations are subject to change, and is not amenable to being programmed into software without incurring a high degree of software maintenance. It is therefore advantageous to store the tax authority rules as data. This allows a software program to interpret the data and to return the appropriate result (or results) to enable another component of a tax service to satisfy the requirements of the tax authority. The repository that houses the tax authority rules is called the \u201ctax rule base,\u201d and the program that interprets the data (tax rules) is called the \u201ctax rule navigator.\u201d","Since tax authority rules vary across the various tax regimes around the world, it is advantageous to employ a process of abstraction and to then identify atomic elements and concepts. The following concepts and components emerge from such as abstraction, and are defined in this section (process, driver, driver template, condition group, process result, and tax rule).","A process is a series of actions, changes, or functions, carried out either by a software program or a user, bringing about a result.","A driver is an input that affects the outcome of one or more processes. A driver may also be called a determining factor.","A driver template is used to group two or more drivers that may simultaneously affect the outcome of one or more processes. A driver template may also be called a driver set template.","A condition group, created using a driver template, refers to a (single) combination of values and conditions\u2014one each for every driver in the driver template. Typically, a condition group can point to one or more process results. A condition group may also be called a driver set.","A process result directly (or indirectly) indicates the outcome of a specific process.","A tax rule specifies the driver template to use to attempt to arrive at a process result for a specific process.",{"@attributes":{"id":"p-0126","num":"0125"},"figref":["FIG. 8","FIG. 8"],"b":["8714","812","814","812","810"]},"Each rule in the set of tax rules  points to one or more drivers for a specific process.  illustrates how a driver template  contains a number of drivers including drivers -. A driver is an attribute of a transaction that acts as an input to a process. For example, \u201cfiscal classification\u201d can be a driver for a \u201cdetermine which taxes are applicable\u201d process (see step  in ).","When all of the drivers for a process  satisfy pre-specified conditions, one process result  per successful set of conditions can be returned as a result. These process results are used to arrive at a result for processes of tax determination and tax administration. For example, a \u201cdetermine applicable tax rate\u201d process can be configured to store a tax rate of 12% when a given set of conditions is successfully evaluated. During the course of attempting to determine the tax rate (see step  in ), the \u201cdetermine applicable tax rate\u201d process () may need to navigate through rules to derive the rate. Another example of a process is a \u201cdetermine taxable basis\u201d process (see step  in ).",{"@attributes":{"id":"p-0129","num":"0128"},"figref":"FIG. 9","b":["216","912","406","217","912","216","902","906","906","804","906","804","904","906","908","904","908","908"]},"If the comparison succeeds, then the next condition  of the next driver  of the first condition group  is considered. If the comparison succeeds, the next condition  is considered till all conditions of the same condition group  are satisfied. If all of the conditions are satisfied, then the condition group evaluated successfully, and path  is taken to retrieve the appropriate process results  which will then return the result to the internal requestor, determine tax rate , via path . If one of the conditions  evaluated unsuccessfully, the next available condition group  is considered in the condition group order of precedence and if that condition group evaluated successfully, the appropriate process results associated with that condition group will be returned through path , as above. If none of the condition groups associated with the driver template of the first rule evaluated successfully, then the first rule is deemed to have not evaluated successfully. The tax rules navigator then takes path  and attempts to fetch the next rule in the order of precedence.","If one of the rules evaluated successfully, then path  is taken to retrieve the associated process results. If none of the rules evaluated successfully, the rule navigator returns to the internal requestor without a result. Then, it will be the responsibility of the internal requester, such as determine tax rate , to attempt to complete its processing using available defaults or to return an error.","For example, in a \u201cdetermine applicable tax rate\u201d process, a driver template (and associated with a tax rule) may include a \u201cfiscal classification of ship-to party\u201d driver and a \u201cproduct type\u201d driver. A set of conditions on these drivers can include: \u201cfiscal classification of ship-to party\u201d=\u201cmanufacturer\u201d, and \u201cproduct type=paper\u201d. A combination such as the one above is a condition group. If each of these conditions in the condition group is satisfied, the condition group is said to be satisfied and the process result specifying an 18% tax rate, for example, that is associated with the condition group can be returned. This indicates that the tax rule (from where the driver template was derived) was successful, and no further rules need to be processed.","Exemplary Rules",{"@attributes":{"id":"p-0133","num":"0132"},"figref":"FIG. 10"},"Each rule is also associated with a driver template (fourth column), which specifies which drivers will be compared in the course of using the rule. For example, the first rule has a driver template that specifies a ship-from state (SF), a ship-to state (ST) and a product fiscal classification (PFC). The second rule has a driver template that specifies a ship-from state and a ship-to state. Finally, the third rule has a template that specifies only a product fiscal classification. Note that the precedence ordering typically proceeds from the most specific rule to the most general rule. Also, note that a system (tax) user can configure a driver template  to include the drivers , , etc., that he deems necessary to facilitate efficient configuration and reusability of the driver template in various tax rules, whether for different taxes, or different processes for the same tax.",{"@attributes":{"id":"p-0135","num":"0134"},"figref":["FIG. 11","FIG. 10"],"b":"101"},"Similarly, the second row indicates that the driver template is also SF-ST-PFC and that the rule is satisfied if SF=SP (Sao Paulo), ST=ANY and PFC=XXX. If these conditions are satisfied, the process result also points to an 18% tax rate.","The third row indicates that a condition group  is associated with a driver template that specifies a product fiscal classification, and that the rule is satisfied if PFC=Pumps. If this condition is satisfied, the process result points to a 12% tax rate.","Note that a system (tax) user can configure the templates and corresponding conditions based upon the requirements of a given tax and\/or subscriber and\/or tax process.","Processing Tax Rules",{"@attributes":{"id":"p-0139","num":"0138"},"figref":["FIG. 12","FIG. 12"],"b":["202","201","1202","202","217","217","406","1203","217","1203","402","1203","402","1203","1203","402"]},"If rules need to be processed (decision B), determine applicable taxes (A, ) calls get rule (step ) of the tax rules navigator , wherein the system gets a (first) rule from the set of tax rules  (step ). The system then examines the driver template  associated with the rule (step ). For the driver template  identified by the first rule, the tax rules navigator  retrieves the condition groups (created out of that driver template) (step ). The system then retrieves and examines conditions (step ) associated with each driver in the condition group retrieved in the previous step (step ). If the first condition is satisfied (decision ), the tax rules navigator  checks to see if there are more conditions to examine (decision ). If there are more conditions, then the next condition is checked till all conditions are satisfied, i.e., there are no more conditions (decision ). Then, the system uses the process result associated with the rule in determining the tax for the transaction (step ), and the (current) rule is said to have been \u201csuccessfully evaluated.\u201d At this point the process is complete for the tax rules navigator. The control returns to the calling process (i.e., determine applicable taxes A, ) and processing continues at the next step (of determining the tax status\u2014step ).","Otherwise, if a condition is not satisfied (decision ), the system determines if there are more condition groups for the template (step A). If so, the system retrieves the next condition group (step ) to examine the conditions for the (current) condition group. If there are no more condition groups (decision A), then, the system checks if there are more rules (decision B). If there is another rule that needs to be processed in the next order of precedence, then, processing begins by retrieving the rule (step ) and proceeds in this manner till a rule is successfully evaluated and therefore a result can be returned.","Else, if no rule was successful and there are no more rules to process (decision B), then, the tax rules navigator will return to the calling process with a (processing) status of \u201cno result found.\u201d It is then the responsibility\/prerogative of the calling process (determine applicable taxes A, )\u2014to attempt to complete the process using defaults; or to return to its calling process with an error (processing) status.","The foregoing descriptions of embodiments of the present invention have been presented only for purposes of illustration and description. They are not intended to be exhaustive or to limit the present invention to the forms disclosed. Accordingly, many modifications and variations will be apparent to practitioners skilled in the art. Additionally, the above disclosure is not intended to limit the present invention. The scope of the present invention is defined by the appended claims."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE FIGURES","p":[{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0035","num":"0034"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIG. 12"}]},"DETDESC":[{},{}]}
