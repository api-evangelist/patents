---
title: Modifying electronic documents with recognized content or other associated data
abstract: Systems and methods enhance editing capabilities associated with a wide variety of different types of electronic documents. Such systems and methods may include a processor that maintains an electronic document having a first portion (e.g., an individual word, character, character string, or the like) provided by a recognizer (e.g., by handwriting or speech recognition software), and they may provide access to potential alternative characters, words, or character strings generated by the recognizer during various user editing functions and operations. Other data associated with the first portion of the document also may be stored and made available to the user during various functions and operations. This invention further relates to computer-readable media including instructions for performing various methods and/or operating various systems for editing electronic documents, including systems and methods like those described above.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08074184&OS=08074184&RS=08074184
owner: Mocrosoft Corporation
number: 08074184
owner_city: Redmond
owner_country: US
publication_date: 20031107
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["FIELD OF THE INVENTION","BACKGROUND","SUMMARY","DETAILED DESCRIPTION","I. Terms","II. General Description of Various Aspects of the Invention","III. Example Hardware","IV. Example Systems, Methods, and Computer-readable Media According to the Invention","V. Conclusion"],"p":["The present invention generally relates to systems and methods that enhance modifying and editing capabilities and other features associated with electronic documents. Some advantageous aspects of the invention can be realized when modifying or editing documents containing at least some content generated by recognizer systems, such as handwriting recognition systems, speech recognition systems, and the like, and\/or content including available alternative data, such as alternatives provided by spell-checking or grammar-checking systems, alternatives provided by thesaurus programs, alternatives from storage of personalization or customization data, and the like.","Typical computer systems, especially computer systems using graphical user interfaces (GUIs), are optimized for accepting user input from one or more discrete input devices, such as a keyboard for entering text, and a pointing device, such as a mouse with one or more buttons, for operating the user interface. An example of such a GUI is the user interface for the Windows\u00ae computer operating system (available from Microsoft Corporation of Redmond, Wash.). The ubiquitous keyboard and mouse interface provides for fast creation and modification of documents, spreadsheets, database fields, drawings, photos, web pages, emails, and the like.","Recently, however, pen-based computing systems, such as tablet PCs and the like, have been increasing in popularity. In pen-based computing systems, user input advantageously may be introduced as electronic ink using an electronic \u201cpen\u201d or stylus (e.g., mimicking writing with a pen or pencil on a piece of paper). Indeed, in at least some pen-based computing systems, all user input is capable of being entered and manipulated using an electronic pen input device, and the user interface is fully controllable using only the electronic pen.","As pen-based computing systems become more popular, users are increasingly entering more data in the form of electronic ink. In many instances, users may wish to convert the original electronic ink data to machine-generated text, i.e., text suitable for use and manipulation by conventional word processing programs, spreadsheet programs, email programs, document management programs, web browsers, etc. While handwriting recognition technology for converting handwritten electronic ink text to machine-generated text has improved in recent years, recognizers of this type still are somewhat error prone, particularly for users with poor handwriting, users that write at an angle, and\/or users that write very quickly. Additionally, because such systems typically rely on conventional dictionaries, specialized terms, abbreviations, acronyms, and the like often are not correctly recognized. Accordingly, machine-generated text produced by a recognizer often still needs to be corrected and\/or otherwise changed or edited by the user.","Handwriting recognizers (and other recognition systems (such as speech recognition systems), spell-check systems, grammar check systems, thesaurus programs, and the like) typically make their best efforts to produce the correct machine-generated text, but these systems recognize that errors occur. Accordingly, conventional recognizers and other programs typically produce a list of potential alternative words or characters for at least some of the recognized text, and they make this information available to the user, e.g., as the program is running on a document or a selection within a document. While the availability of these potential alternatives can greatly enhance and speed up the editing process, once the program is closed or a correction is made, this potential alternative data typically is lost and\/or unavailable to the user. Additionally, when the machine-generated text is introduced into another application program or document, the potential alternative data is not (or cannot be) maintained by the new application program or document, and therefore, it is no longer available to the user. Accordingly, if further edits or changes are desired, a user must resort to other editing techniques that do not use the previously generated alternatives, or, if possible, he or she must rerun the original program to again obtain a listing of alternatives.","At least some existing user interfaces for editing, changing, and\/or correcting machine-generated text using only an electronic pen and a pen-based computing system can be awkward, cumbersome, and difficult to use. For example, in at least some systems, users can call up and use a soft keyboard and the pen to edit text. Soft keyboards, however, can be slow, cumbersome, and frustrating to use, particularly when a large amount of text must be reviewed and edited. In still other instances, a user may attach and\/or use a hard keyboard with a pen-based computing system to edit text. Some users, however, do not wish to use these keyboards, and the requirement to keep a hard keyboard available for editing can make the computing system larger, heavier, and more difficult to handle.","The above-noted difficulties in using electronic pens and pen-based computing systems to modify or edit machine-generated text and documents can lead to user frustration, and it can hamper use and adoption of the pen-based computing system. Accordingly, there is a need in the art for improved modifying and editing capabilities for use in a wide variety of application programs and document types that allow users to quickly, easily, and efficiently access, review, edit, and change machine-generated text using electronic ink and\/or an electronic pen associated with a pen-based computing system.","Aspects of the present invention relate to systems and methods that enhance editing capabilities and other features associated with use of and interaction with electronic documents. Such systems and methods may include a processor programmed and adapted to maintain an electronic document, wherein at least a first portion of content in the electronic document (e.g., an individual word or character or the like) includes content generated by a recognizer (e.g., a handwriting recognizer, a speech recognizer, or the like). The systems and methods further may store data associated with the first portion of the content in a data structure that includes information not included in the electronic document. This data structure may include, in at least some examples, an expanded version of at least a portion of the electronic document (also called a \u201cbacking store document\u201d in this specification) that stores information in addition to that maintained in the actual electronic document itself (such as, alternative words or characters generated by the recognizer). Systems and methods according to some examples of the invention further may include an input device that receives input selecting the first portion of the content, and once that portion is selected, the processor further may be programmed and adapted to provide at least one selectable alternative for the first portion of the content based at least in part on the stored data associated with the first portion. If this alternative is then selected, e.g., by user input, the content of the electronic document may be changed to correspond to the selected alternative.","Additional aspects of the invention relate to systems and methods that include: (a) receiving input in an electronic document, wherein the electronic document includes a data structure having a plurality of independent data sets (e.g., data sets representing individual words and\/or characters and\/or character strings in the electronic document); and (b) maintaining a supporting data structure based on content in at least a portion of the electronic document, wherein the supporting data structure includes a plurality of supporting data sets such that at least some of the independent data sets in the electronic document include an associated supporting data set in the supporting data structure. The supporting data sets in the supporting data structure may include, for example, potential alternative words, characters, and\/or character strings generated by a recognition system, a spell-check or grammar check system, a thesaurus programs, alternatives from storage of personalization or customization information, or other relevant data relating to the data sets contained in the electronic document. The supporting data structure may include an expanded copy of the electronic document including the additional data, such as potential alternatives generated by a handwriting or speech recognition system. A user may request display of or access to information contained in at least one supporting data set (e.g., by requesting display of a correction interface, by selecting a word, character, or character string in the electronic document, etc.), and he\/she can edit the electronic document, if appropriate, using information (e.g., the potential alternatives) stored in the supporting data set.","Still additional aspects of the invention relate to computer-readable media including computer-executable instructions stored thereon for performing various methods and\/or operating various systems for modifying electronic documents, including systems and methods like those described above.","When the same reference number is used in more than one of the attached drawings, it is intended to refer to the same or similar parts, features, or steps in the various different drawings.","As described above, aspects of the present invention relate to systems, methods, and computer-readable media for processing electronic data and interacting with electronic text, e.g., when modifying or editing electronic documents. The following description is divided into sub-sections to assist the reader. The sub-sections include: Terms; General Description of Various Aspects of the Invention; Example Hardware; Example Systems, Methods, and Computer-Readable Media According to the Invention; and Conclusion.","The following terms are used in this specification and, unless otherwise specified or clear from the context, the terms have the meanings provided below:","\u201cPen\u201d\u2014Any type of user input device useful in entering electronic ink into and\/or otherwise manipulating or controlling an electronic document, a user interface, and\/or a computer operating system. The terms \u201cpen\u201d and \u201cstylus\u201d are used interchangeably in this specification.","\u201cPen-Down Event\u201d\u2014An event that is initiated at the time a pen contacts a digitizer. Typically, a pen-down event will end at the time the pen leaves the digitizer surface (also called a \u201cpen-up event\u201d in this specification). Electronic ink data may be collected based on movement of a pen between a pen-down event and a pen-up event, e.g., as an ink stroke or in other conventional manners as are known in the art.","\u201cHover\u201d\u2014Positioning or locating a pen proximate or adjacent to a digitizer surface but not in contact with the surface. No specific time period or cessation of motion at a particular location or position is necessary to constitute a \u201chover\u201d action, although the pen may remain still during a hover event. As an example, a \u201chover\u201d event may occur or be recognized during the time period that a user continuously moves a pen toward and into contact with a digitizer surface.","\u201cRender\u201d or \u201cRendered\u201d or \u201cRendering\u201d\u2014The process of determining how information (including text, graphics, and\/or electronic ink) is to be displayed, whether on a screen, printed, or output in some other manner.","\u201cComputer-Readable Medium\u201d means any available media that can be accessed by a user on a computer system. \u201cComputer storage media\u201d includes volatile and nonvolatile, removable and non-removable media implemented in any method or technology for storage of information, such as computer-readable instructions, data structures, program modules or other data. \u201cComputer storage media\u201d includes, but is not limited to, RAM, ROM, EEPROM, flash memory or other memory technology; CD-ROM, digital versatile disks (DVD) or other optical storage devices, magnetic cassettes, magnetic tape, magnetic disk storage or other magnetic storage devices; or any other medium that can be used to store the desired information and that can be accessed by a computer. Combinations of any of the above should also be included within the scope of \u201ccomputer-readable media.\u201d","As generally described above, aspects of the present invention relate to systems and methods that enhance modifying or editing capabilities and other functions associated with use of and interaction with electronic documents. Such systems and methods may include: (a) a processor programmed and adapted (i) to maintain an electronic document, wherein at least a first portion of content in the electronic document (e.g., an individual word, character, or character string) includes content generated by a recognizer, and (ii) to store data associated with the first portion of the content, wherein the data is stored in a data structure that includes information not included in the electronic document (e.g., in an expanded version of the electronic document or a backing store electronic document); and (b) an input device that receives input selecting the first portion of the content. The processor further may be programmed and adapted to provide at least one selectable alternative for the first portion of the content based at least in part on the stored data associated with the first portion. Once an alternative is selected, e.g., through user input, the content of the electronic document may be changed to correspond to the selected alternative.","Systems and methods according to at least some examples of the invention are particularly useful for processing various edit functions in electronic documents in which at least some of the content in the document (e.g., the \u201cfirst portion\u201d of the content described above) is generated by a recognition program or engine, such as a speech recognition program or a handwriting recognition program. In such systems and methods, the stored data associated with the first portion of the content of the electronic document may include potential alternative characters, words, or character strings identified by the recognizing program or engine when recognition occurred. If desired, in at least some examples, the stored data associated with the first portion of the content may include a supporting version of the electronic document and\/or an expanded version of the electronic document, maintained separate from the electronic document, and the data associated with the first portion of the content (such as the potential alternative characters, words, or character strings as described above) may be included in one or more properties stored in the expanded copy of the electronic document but not included in or useful by the actual electronic document.","Systems and methods according to various examples of the invention further may include: (a) receiving input changing the content of the electronic document (e.g., through a correction interface); and (b) changing the stored data associated with the first portion of the content of the electronic document, if necessary, based on the input changing the content of the electronic document. Additionally, input and corresponding synchronizing changes may take place in the other direction. For example, at least some examples of systems and methods according to the invention further may include: (a) receiving input changing the stored data associated with the first portion of the content of the electronic document (e.g., via a correction interface); and (b) changing the electronic document, if necessary, based on the input changing the stored data. In these manners, the separately stored data associated with the first portion of the content of the electronic document will remain up to date and\/or synchronized with respect to the content of the electronic document, and vice versa.","Additional aspects of the invention relate to systems and methods that include: (a) receiving input in an electronic document, wherein the electronic document includes a data structure having a plurality of independent data sets; (b) maintaining a supporting data structure based on content in at least a portion of the electronic document, wherein the supporting data structure includes a plurality of supporting data sets such that at least some of the independent data sets in the electronic document include an associated supporting data set in the supporting data structure; and (c) receiving input requesting display of or access to information contained in at least one supporting data set. In such systems and methods, at least some of the independent data sets may correspond to words, characters, or character strings in the electronic document, and at least some of the supporting data sets may store potential alternative words, characters, or character strings corresponding to the words, characters, or character strings stored in their associated independent data sets. As above, the potential alternative words, characters, or character strings may be generated by a recognition program or engine, such as a speech recognizer or a handwriting recognizer. The potential alternative characters, words, or character strings also may be generated and\/or made available from other sources, such as from spell-checking or grammar-checking programs, from thesaurus programs, from storage of personalization or customization data, and the like.","If desired, in at least some examples, the supporting data structure may include a separate, expanded version of the electronic document, wherein at least some of the supporting data sets in the expanded version include one or more properties, objects, or other data associated with its corresponding independent data set in the electronic document. The potential alternatives, as described above, may be stored as one or more properties in the supporting data sets.","Systems and methods according to these various aspects of the invention further may: (a) receive input selecting information from the supporting data set(s); and (b) change the electronic document based on the selected information. Additionally, such systems and methods may receive input changing the electronic document's data structure or the supporting data structure. Receipt of such changes may be used to produce corresponding changes in the other data structure, if necessary, so that the content of the electronic document's data structure and the content of the supporting data structure remain synchronized.","The supporting data stored relating to content in the electronic document is not limited to potential alternative characters, words, or character strings generated by a recognition program or other alternative data. Any suitable or desired data may be stored and associated with a portion of the electronic document without departing from the invention (e.g., as a property, object, or other data associated with a word, character, or other content in the electronic document). For example, the stored data may include alternatives generated by a spell-checking or grammar-checking program or engine, by a thesaurus program or engine, from storage of personalization or customization data, and the like. As additional examples, the stored supporting data further may include information such as: the language of a word, character, or character string; an identifier of a word, character, or character string source (e.g., a globally unique identifier (\u201cGUID\u201d) of the program, input, user, or other source of a word, character, or character string in an electronic document); the original electronic ink data associated with a word, character, or character string; the time of input of the word, character, or character string; spacing data associated with the word, character, or character string; and the like.","Aspects of the invention also relate to computer-readable media including computer-executable instructions stored thereon for modifying or editing electronic documents in the manner described above, as well as for performing various methods and\/or operating various systems like those described above.",{"@attributes":{"id":"p-0039","num":"0038"},"figref":["FIG. 1","FIG. 1"],"b":["100","110","120","130","120","110","130","120","140","150"]},"A basic input\/output system  (BIOS), which contains the basic routines that help to transfer information between elements within the computer , such as during start-up, is stored in the ROM . The computer  also may include a hard disk drive  for reading from and writing to a hard disk (not shown), a magnetic disk drive  for reading from or writing to a removable magnetic disk , and an optical disk drive  for reading from or writing to a removable optical disk , such as a CD ROM or other optical media. The hard disk drive , magnetic disk drive , and optical disk drive  are connected to the system bus  by a hard disk drive interface , a magnetic disk drive interface , and an optical disk drive interface , respectively. These drives and their associated computer-readable media provide nonvolatile storage of computer-readable instructions, data structures, program modules, and other data for the personal computer . It will be appreciated by those skilled in the art that other types of computer-readable media that can store data that is accessible by a computer, such as magnetic cassettes, flash memory cards, digital video disks, Bernoulli cartridges, random access memories (RAMs), read only memories (ROMs), and the like, may also be used in the example operating environment.","A number of program modules can be stored on the hard disk drive , magnetic disk , optical disk , ROM , or RAM , including an operating system , one or more application programs , other program modules , and program data . A user can enter commands and information into the computer  through input devices, such as a keyboard  and pointing device  (such as a mouse). Other input devices (not shown) may include a microphone, joystick, game pad, satellite dish, scanner, or the like. These and other input devices often are connected to the processing unit  through a serial port interface  that is coupled to the system bus , but they also may be connected by other interfaces, such as a parallel port, game port, or a universal serial bus (USB), and the like. Further still, these devices may be coupled directly to the system bus  via an appropriate interface (not shown).","A monitor  or other type of display device also may be connected to the system bus  via an interface, such as a video adapter . In addition to the monitor , personal computers typically include other peripheral output devices (not shown), such as speakers and printers. In one example, a pen digitizer  and accompanying pen or stylus  are provided in order to digitally capture freehand input. Although a connection between the pen digitizer  and the serial port interface  is shown in , in practice, the pen digitizer  may be directly coupled to the processing unit , or it may be coupled to the processing unit  in any suitable manner, such as via a parallel port or another interface and the system bus  as is known in the art. Furthermore, although the digitizer  is shown apart from the monitor  in , the usable input area of the digitizer  may be co-extensive with the display area of the monitor . Further still, the digitizer  may be integrated in the monitor , or it may exist as a separate device overlaying or otherwise appended to the monitor .","The computer  can operate in a networked environment using logical connections to one or more remote computers, such as a remote computer . The remote computer  can be a server, a router, a network PC, a peer device or other common network node, and it typically includes many or all of the elements described above relative to the computer , although for simplicity, only a memory storage device  has been illustrated in . The logical connections depicted in  include a local area network (LAN)  and a wide area network (WAN) . Such networking environments are commonplace in offices, enterprise-wide computer networks, intranets, and the Internet, using both wired and wireless connections.","When used in a LAN networking environment, the computer  is connected to the local area network  through a network interface or adapter . When used in a WAN networking environment, the personal computer  typically includes a modem  or other means for establishing a communications link over the wide area network , such as the Internet. The modem , which may be internal or external to the computer , may be connected to the system bus  via the serial port interface . In a networked environment, program modules depicted relative to the personal computer , or portions thereof, may be stored in the remote memory storage device.","It will be appreciated that the network connections shown are examples and other techniques for establishing a communications link between the computers can be used. The existence of any of various well-known protocols such as TCP\/IP, Ethernet, FTP, HTTP, UDP, and the like is presumed, and the system can be operated in a user-server configuration to permit a user to retrieve web pages from a web-based server. Any of various conventional web browsers can be used to display and manipulate data on web pages.","Although the  environment shows one example environment, it will be understood that other computing environments also may be used. For example, one or more examples of the present invention may use an environment having fewer than all of the various aspects shown in  and described above, and these aspects may appear in various combinations and subcombinations that will be apparent to one of ordinary skill.",{"@attributes":{"id":"p-0047","num":"0046"},"figref":["FIG. 2","FIG. 1","FIG. 2"],"b":["201","201","202","203","204","201","204"]},"The stylus  may be equipped with buttons or other features to augment its capabilities. In one example, a stylus  could be implemented as a \u201cpencil\u201d or \u201cpen,\u201d in which one end constitutes a writing portion and the other end constitutes an \u201ceraser\u201d end, and which, when moved across the display, indicates portions of electronic ink on the display that are to be erased. Other types of input devices, such as a mouse, trackball, keyboard, or the like also could be used. Additionally, a user's own finger could be used as an input device, e.g., for selecting or indicating portions of the displayed image on a touch-sensitive or proximity-sensitive display. Consequently, the term \u201cuser input device,\u201d as used herein, is intended to have a broad definition and encompasses many variations on well-known input devices.","In various examples, the system provides an ink platform as a set of COM (component object model) services that an operating system and\/or an application program can use to capture, manipulate, and store ink and\/or other pen actions or events. The ink platform also may include a mark-up language including a language like the extensible markup language (XML). Additional examples of the ink platform may use the DCOM (distributed component object model) implementation. Yet further implementations may be used including the Win32 programming model and the Net programming model from Microsoft Corporation. These platforms are commercially available and known in the art. The electronic ink data may be stored in an ink serialized format (\u201cISF\u201d) or in any other suitable or desired manner, including in conventional manners known to those skilled in the art.","In addition to use with full performance pen-based computing systems or \u201ctablet PCs\u201d (e.g., convertible laptops or \u201cslate\u201d type tablet PCs), aspects of this invention may be used in conjunction with other types of pen-based computing systems and\/or other devices that accept data as electronic ink and\/or that accept, process, or display electronic pen or stylus input, such as: hand-held or palm-top computing systems; personal digital assistants; pocket personal computers; mobile and cellular telephones, pagers, and other communication devices; watches; appliances; and any other devices or systems that include a monitor or other display device and\/or a digitizer that presents printed or graphical information to users and\/or allows input using an electronic pen or stylus or that can process electronic ink collected by another device (e.g., a conventional desktop computer that can process electronic ink collected by a tablet PC).","The invention now will be described in conjunction with the remaining figures, which illustrate various examples of the invention and contain information to help explain the invention. The specific figures and information contained in this detailed description should be construed as providing examples of the invention and not as limiting the invention.","A. General Example Implementations of Systems and Methods According to the Invention","As described above, aspects of the present invention relate generally to systems and methods that enhance modification and editing capabilities and other features associated with use of and interaction with electronic documents. At least some advantageous aspects of the invention can be realized when modifying or editing documents containing at least some content generated by recognizer systems, such as handwriting recognition systems, speech recognition systems, and the like, and\/or content that may include (or contain access to) other available alternative data, such as alternatives provided by spell-checking or grammar-checking programs, alternatives provided by thesaurus programs, alternatives from storage of personalization or customization data, and the like.","Recently, pen-based computing systems that accept user input via an electronic pen and display it as \u201celectronic ink\u201d have increased in popularity. Use of electronic ink input as opposed to conventional pen and paper is advantageous in many respects. For example, electronic ink input may be electronically stored, filed, and cataloged for future use, which enables it to be easily maintained, located, and shared with others. Additionally, because electronic ink input can be recognized and converted to conventional machine-generated text (e.g., text insertable into, readable by, and useful by conventional computers), it can be electronically stored, searched, and otherwise used on the computer, for example, in conventional word processing documents and programs, in spreadsheets, in email programs, in document management programs, in web browsers, and the like. Handwriting recognition systems are commercially available that allow handwritten electronic ink input to be converted to machine-generated text. One example of a handwriting recognizer is that provided with the Windows XP Tablet PC Edition\u2122 operating system (available from Microsoft Corporation of Redmond, Wash.), although other handwriting recognizers also may be used without departing from the invention.","Typically, when handwritten electronic ink input is being recognized and converted to machine-generated text, for each handwritten word or character string, the recognizer will create a listing or array of one or more characters, words, or character strings believed to correspond to the original handwritten text. The program then will select one of the characters, words, or character strings from the generated listing to display as the recognized machine-generated text (e.g., typically the character, word, or character string believed most likely to be correct, optionally taking into consideration input from an electronic dictionary associated with the recognizer, a language model, conventional grammar rules or other associated language rules, and the like). The remaining characters, words, or character strings in the recognizer's listings (e.g., \u201cpotential alternatives\u201d to the recognizer selected character, word, or character string) are maintained and made available to the user, for example, while the recognition program is running, until the next recognition procedure is conducted, during a review or correction procedure relating to the machine-generated text, etc.","In many pen-based computing systems and application programs operating thereon, electronic ink data is parsed into conventional groupings found in the relevant language model.  illustrates an example of a typical data structure  associated with electronic ink input data stored in a pen-based computing system. In this example (e.g., useful for English and other Latin-based languages and the like), the electronic ink text may be parsed and stored such that a page, document, or other selection  of electronic ink data may include one or more paragraphs or blocks  of associated ink data, each paragraph or block  may include one or more lines  of ink data, each line  may contain one or more words or character strings  of ink data, and each word or character string  may contain one or more individual strokes  of ink data (e.g., a stroke corresponding to the digitizer points encountered during movement of the electronic pen between a pen-down event and a pen-up event, or some other suitable or desired collection of electronic ink data).","Of course, the data structure of  constitutes merely one example of a potential data structure for electronic ink data. Many variations and changes can be made to the specific data structure without departing from the invention. For example, the line elements or nodes  may be omitted and\/or replaced by elements or nodes corresponding to sentences, in order to more closely track the English language model. As another example, the data corresponding to the individual strokes may be stored, for example, as properties in the relevant word elements or nodes , and the separate stroke nodes  then may be omitted. Data corresponding to the individual words may be stored in a serial fashion without the remaining tree structure, in at least some examples of the invention. Many other variations and changes are possible without departing from the invention. Additionally, if desired, the machine-generated text corresponding to the electronic ink text may share the same or a similar data structure to the electronic ink text, including, for example, the structure shown in . Also, suitable data structures can be developed and applied to other language models and structures, including, for example, East Asian languages, etc.","Various types of information can be stored in the various data elements or nodes , , , , and\/or  in the data structure  without departing from the invention. For example, the various elements or nodes may store information regarding the location of their corresponding element on the page or in the document, the ink or text color, the node creation time, the source of the data in the node, the last node edit time, and the like.  illustrates an example data structure (or a portion thereof) for a word node  or other word data set that may be used in accordance with at least some examples of this invention. Examples of data or information that may be stored or associated with a word node , as illustrated in , may include the word's language; its location on the page or in the document (optionally with respect to other nodes or elements on the page or in the document); a global unique identifier (GUID) identifying the source of this word (e.g., the recognizer, a keyboard, an external source, etc.); pointers to the previous word, the following word, and the parent node that contains the word; a pointer to, an object, or a property containing the strokes or characters contained in the word; and the like. Additionally, word node  may maintain data, such as a property, including some or all of the potential alternatives generated by the recognition software when the electronic ink word was recognized. Optionally or alternatively, in at least some examples of the invention, the machine-generated text and the alternative data may come from speech recognition software (if the original input was via speech), a spell-check program, a grammar check program, a thesaurus program, data stored from customization or personalization of a system, and\/or from any other suitable source.","By storing the data corresponding to the various identified alternatives in the data structure, these alternatives can be maintained and associated with the recognized word and can be made available to the user at any desired time, e.g., when editing or modifying the document.  illustrate one example.  illustrates an example display screen  for an application program that displays and\/or accepts electronic ink data. In this example system and method, once the electronic ink data is entered (e.g., in ink-accepting panel ), the ink data is sent to a handwriting recognition system, and machine-generated text corresponding to the ink data is provided by the handwriting recognition system (e.g., in panel ). As illustrated in , the handwriting recognizer in this example has incorrectly recognized the ink word \u201cSample\u201d  and has erroneously provided the machine-generated word \u201cSimple\u201d .","When the user selects either the ink word  or its corresponding machine-generated word  (illustrated in  by hatching over machine-generated word ), a correction interface  appears, e.g., like that illustrated in . Selection can take place in any suitable or desired manner without departing from the invention, for example, by touching or tapping the digitizer screen with the pen at a location corresponding to either word  or , by a tap and drag action over the word or words to be selected, by hovering the pen over the digitizer at a location corresponding to either word  or , by a hover and drag action over the word or words to be selected, and\/or in any other manner, including via conventional selection manners known in the art.","The correction interface  of this example includes a character-by-character correction portion , which opens to include the specifically selected word (\u201cSimple\u201d in this example) and enables changes to individual characters of the selected word using the pen and electronic ink. In the illustrated example, the user has changed the word \u201cSimple\u201d to \u201cSample\u201d by writing an \u201ca\u201d  in electronic ink over the letter \u201ci\u201d in the correction portion . This action will cause the new ink corresponding to the letter \u201ca\u201d to be sent to the recognizer and be recognized, and it will cause machine-generated text corresponding to the newly recognized word to be sent to the machine-generated text panel  (the originally rendered ink will not be changed in panel , although data associated with the ink may be changed, e.g., to reflect the new, corrected machine-generated text). Optionally, if desired, ink or text data relating to one or more characters or words surrounding the newly written character  also may be sent to the recognizer, e.g., to provide context and enable dictionary use when recognizing the newly entered ink. Additionally, the correction interface  of this example includes an action item or task portion  that enables the user to take various actions or perform various functions (e.g., close the correction interface , delete the selected word, add the word to the dictionary, recognize the word in another language, define a customized recognition rule with respect to the word, etc.).","The example correction interface  of  also includes a suggestion portion . This suggestion portion  includes icons or other selectable items  corresponding to various suggested or alternative characters, words, or character strings available to replace the machine-generated word  previously provided by the recognizer. Accordingly, when the user selects the correct word from the suggestion portion  (icon  corresponding to the word \u201cSample\u201d in this example), machine-generated text corresponding to the word \u201cSample\u201d will replace the word \u201cSimple\u201d in panel  (the original ink in panel  will not be changed, although data associated with it may be changed). In accordance with at least some examples of the invention, the various specific suggestions or alternatives included in and made available through the suggestion portion  may be stored in and made available from the data structure for the word  and\/or the word  when the initial handwritten electronic ink was sent to the recognizer (e.g., see the data structure  of ). Optionally, in at least some examples of the invention, the overall ink text and\/or the machine-generated text may have a data tree structure  like that illustrated in . As another option, separate data structures for each individual word or character string (or other desired or suitable grouping) may be maintained in any desired manner without using the hierarchical tree structure shown in .","Of course, any suitable or desired correction interface can be used without departing from the invention, and the interface  illustrated in  is just one example. For example, if desired, the correction interface, at least initially, may show only the suggestion portion  and\/or the action portion , optionally with the remainder of the interface and\/or other portions of the interface available after expiration of an appropriate time and\/or upon activation by a user. As another alternative, the correction interface may include an ink input panel in which the user can re-write the selected word in electronic ink, optionally in place of or in addition to the character-by-character correction portion  illustrated in .","By storing the potential alternatives for the recognized words, characters, or character strings (or other desired data), systems and methods according to some examples of the invention can quickly and easily make the various alternatives available to users when the correction interface is activated, which helps (in at least some instances) to make editing, correcting, or changing electronic documents easier, quicker, and more convenient using the electronic pen. As noted above, however, not all application programs will accept and\/or maintain data structures that include the potential alternatives or other data, like the data structures shown in  and\/or . In such programs, when machine-generated text obtained from a recognizer program is input, the alternative data typically would be lost or deleted and unavailable to the users in the future. Accordingly, the user would be required to make further edits or corrections, if necessary, using conventionally available editing techniques, such as hard and\/or soft keyboards as described above, and\/or the previously performed recognition or other data generation processes would have to be re-performed, if possible.","Systems and methods according to at least some examples of the invention, however, allow the various alternatives (or other stored data) associated with individual words, characters, or character strings to be maintained and used in the future, even in application programs that do not accept and\/or allow interaction with electronic ink data, handwriting recognizers, speech recognizers, and the like.  generally illustrates an example of this aspect of the invention. As illustrated in , an application program  maintains an electronic document  in its conventional, default format, which includes some type of document data structure  that maintains data sets  corresponding to individual words, characters, or character strings in the electronic document . Notably, the data sets  in this example do not include and cannot maintain data associated with potential alternatives generated by a handwriting or speech recognizer (or other recognizer or alternative data of this type).","In systems and methods according to at least some examples of the invention, a separate data structure  is maintained corresponding to the electronic document  (also called an \u201cexpanded version\u201d or a \u201cbacking store document\u201d in this specification). This data structure  may include a copy of at least some portion of electronic document  plus additional supporting data, illustrated in  by supporting data structure . The supporting data may include any desired data or information, such as data relating to the potential alternatives (e.g., generated by a recognizer or from any other suitable or desired source) as discussed above. In the illustrated example, independent supporting data sets  are maintained that correspond, on a 1:1 basis, with the independent data sets  relating to the independent words, characters, or character strings in electronic document . Of course, other structures for storing the data sets  and supporting data sets  may be used without departing from the invention, such as arrays, pointers, hierarchical structures, and the like. Additionally, the supporting data structure  need not include a complete copy of the original electronic document , although it may. The additional data stored in supporting data sets  can be provided in and\/or made available to electronic document  or its corresponding application program , when necessary or called for, as indicated by arrow  in  and as will be described in more detail below. The supporting data structure  may be maintained by the operating system of a pen-based computing system, independent of application program , in at least some examples of the invention.","As mentioned above, the supporting data structure  need not include a complete copy of the original electronic document  or its same data structure . For example, if desired, only a predetermined portion of the electronic document  may be saved (e.g., the most recently entered 1000 words), and the alternatives or other data associated with this abbreviated supporting data structure may be made available (e.g., if the user selects a word outside of the stored range, potential alternatives may not be available for the selected word in this example). As another example, each machine-generated word in a document may be stored one time (e.g., the first time it is recognized) along with the potential alternatives generated by the recognition system (and\/or other desired data) when it is recognized. When this same word is again recognized in the same document, the potential alternative data may be discarded (or not generated at all), and the potential alternatives from the first occurrence may be relied upon throughout the document (optionally, the data structure may include a pointer to the first occurrence). When a word is selected, e.g., for editing or correction, the systems and methods according to at least some examples of the invention can display the same listing of potential alternatives from the first recognition of the word, irrespective of where that word appears or the number of times it appears in the document. Many other variations in the supporting data structure also are possible without departing from the invention.",{"@attributes":{"id":"p-0068","num":"0067"},"figref":["FIG. 7","FIG. 4"],"b":["700","702","704","706","702"]},"From the input device , the data goes to a pending text stage . At the pending text stage  (or before reaching stage ), any electronic ink, handwritten, or speech data in the input may be sent to appropriate recognizers (if necessary), in which various alternatives for the words, characters, or character strings and the associated data structures including these alternatives may be generated. Additionally or alternatively, data relating to other potential alternatives (such as from spell-checking programs, grammar checking programs, thesaurus programs, customization or personalization data, or the like) or any other desired data may be generated, associated with one or more words, characters, or character strings, and\/or stored in the data structure while in the pending text stage , if necessary. As noted above, however, this additional and\/or alternative data already may be present and associated with the individual words, characters, or character strings when the data reaches the pending text stage .","From the pending text stage , the data is ultimately sent to its destination document  or . If the application program to which the data is to be sent will accept and maintain input data having a data structure with the additional and\/or alternative data set properties like those shown in  (e.g., electronic document type A ), then the input data may be sent directly to the electronic document  without further processing. When necessary or desired, a correction interface  (like that illustrated at reference number  in ) can be called up from the application program owning electronic document , and the suggestion portion  of that correction interface  can be populated with specific suggestions  and  from previously recognized alternative data (data stored directly in document ), as described above. Of course, if other supporting data is stored and maintained in electronic document , that additional supporting data also can be called up and used by the application program owning electronic document  in any desired manner.","Of course, as noted above, not all application programs provide or support electronic documents and\/or data structures that can accept and\/or maintain the additional alternative data (or other data) as described above (e.g., such as electronic document  in ). In such instances, before the input from pending text stage  is sent to the electronic document , it is sent to a text injector system . The text injector system  uses the incoming data (including the alternative data discussed above) to produce and maintain a separate supporting data structure . This supporting data structure , which may constitute an expanded version or backing store copy of electronic document , allows maintenance of and continued access to the additional alternative data and the like, e.g., for use in conjunction with a correction interface  (e.g., like that shown in ), as will be described in more detail below. Additionally, the text injector  strips the additional data out of the incoming input (e.g., the alternative data and the like not supported in electronic document 's data structure) and moves the stripped down version of the data to electronic document . In this manner, the application program and electronic document  ultimately receive input data in the form expected, but the alternative data and\/or other desired data is not lost and can be used during editing and the like (e.g., it is maintained in supporting data structure ).",{"@attributes":{"id":"p-0072","num":"0071"},"figref":"FIG. 8","b":["706","714","800","706","802","802","802","706"]},"When an insertion point location change and\/or selection event is detected (answer Yes at S), this may indicate incoming input of some type (text or other data insertion, deletion, or modification; a cursor location change; etc.). The application program accepts the changes (if any) and makes any necessary changes in the electronic document  (S). Once the necessary change(s) is (are) made in electronic document , the content of the change(s) is (are) determined (S) and passed on to the expanded version of the document  (S) (e.g., illustrated by path  in ). In this manner, the content of the expanded version of the electronic document  can be synchronized with the content of electronic document .","Systems and methods according to this example of the invention then determine whether further input is\/has been received (S). If No, the procedure may end (S), and optionally perform other processing and\/or resume the present procedure when notified of the next input event, when the next input event is detected, after expiration of a predetermined time period, etc. If additional input is being or has been received (answer Yes at S), the procedure returns to S.","Using the procedure described in , the expanded version of the electronic document  maintains synchronization with electronic document  when changes are made directly in electronic document . Such changes directly in electronic document  may not have additional data associated with it (such as the alternative data and the like described above), because electronic document  cannot directly accept data in that format. Because of the desire to maintain the additional data when available and possible, in at least some examples of systems and methods according to the invention, input including this additional data may be received and\/or processed in a different manner.  illustrate example procedures that may be used in some examples of systems and methods according to the invention to input and maintain data initially provided using electronic ink (e.g., via a pen-based computing system) into application programs that cannot accept or support electronic ink data. For example, these procedures could be used to enter data and\/or corrections into electronic document  using electronic ink and\/or a pen-based computing system, even though the application program supporting document  does not support or accept electronic ink input. Using procedures of this type, in at least some instances, will allow pen-based computing system users to easily, quickly, and conveniently create, edit, or modify documents of essentially any type or format using the pen and electronic ink.",{"@attributes":{"id":"p-0076","num":"0075"},"figref":["FIG. 9","FIG. 7","FIG. 4","FIG. 7","FIG. 7"],"b":["900","902","702","904","708","712","714","906","718","714","908"]},"The text injector system  then removes the associated data from the incoming input and transforms the data to a format accepted by electronic document  (S). The text is then sent to electronic document  (S). The systems and methods according to this example of the invention then determine whether additional ink input (or other input) is or has been received (S). If Yes, the procedure returns to S. If No, the procedure ends (S), optionally waiting for additional input of some type, performing other processing, etc.",{"@attributes":{"id":"p-0078","num":"0077"},"figref":["FIG. 10","FIGS. 5A and 5B","FIGS. 5A and 5B"],"b":["1000","1002"]},"Once the selection is made, systems and methods according to this example of the invention then determine whether potential alternative or other additional data is provided and available with respect to the selected word or words (S ). This may be accomplished, for example, by looking at the supporting data structures  stored with respect to the selected word or words (e.g., see ) and determining whether an \u201calternatives\u201d property or other relevant data exists. If Yes, some or all of the possible alternatives are provided to a correction interface (S), e.g., to the suggestion portion  provided in correction interface  of , optionally in an order indicative of the recognizer's confidence level associated with the alternatives. If No at S (alternatives are not available), S is skipped, and the correction interface (e.g., interface ) is provided and displayed (S) e.g., as an overlay on electronic document , optionally, without a suggestion portion, with no options or alternatives provided in the suggestion portion, and\/or with no options or alternatives from the recognizer provided in the suggestion portion.","Systems and methods according to this example of the invention then wait for\/determine whether the user has made any changes using the correction interface (S). Changes may be input to the correction user interface  via the input device  and pending text stage , as illustrated in , via a pen, keyboard or in any desired manner. If changes have been made (answer Yes), e.g., by a user tapping the pen on a suggested alternative, the changes are accepted, optionally recognized using the handwriting or speech recognizer (if necessary), and the changed data (including any new alternatives and the like) is sent to the expanded version of the electronic document  (S), which maintains the changed version (e.g., changed text) and\/or any new data, including new alternatives or other associated data (S).","Once the changed information is obtained, systems and methods according to this example of the invention send the changed data from the expanded version of the electronic document  to the text injector  (S), which strips out the alternative or other associated data (if necessary) and places the data in a form and format acceptable by electronic document , as generally described above. The stripped down text version of the data then is sent to electronic document  (S). This procedure maintains electronic document  in synch with the expanded version  and in synch with changes made via electronic ink (or other appropriate input).","After electronic document  has been synchronized and\/or updated to reflect changes made in the expanded version , systems and methods according to this example of the invention next determine whether any new selections have been made by the user (S). If Yes, the procedure returns to S and again goes through the various steps. If No, the procedure ends (S), optionally waiting for additional user input or performing any additional processing as may be needed.","If, at S, no user made changes are detected (answer No), systems and methods according to this example of the invention then determine whether a selection or correction request is continuing or if a new selection or correction request has been initiated (S), and the procedure continues as described above.","While the figures described above illustrate various examples of system and methods according to the invention, those skilled in the art will understand that many changes and modifications to these examples are possible without departing from the invention. Additionally, aspects of the systems and methods described above may be expanded or modified to support speech input, speech recognition, and alternatives provided thereby.","B. Detailed Description of Example Implementations","As mentioned above, some recently released pen-based computing systems run the Windows XP Tablet PC Edition\u2122 operating system (available from Microsoft Corporation of Redmond, Wash.). This operating system gave users the ability to correct recognition errors in electronic documents using a drop-down list that provided various alternatives for a selected word. This drop-down listing, however, was available only in application programs that had been written to support the Text Services Framework (e.g., programs that produced and supported data structures that maintain the recognizer alternatives, like electronic document  in ). Such programs included: the newest versions of Microsoft's Word\u00ae word processing program, Microsoft's Windows Journal ink processing program, and Microsoft's WordPad program. Many previously available and conventional application programs could not take advantage of this feature because they could not accept and support the necessary data structures.","As described above, aspects of this invention expand the ability to use ink and pen-based computing systems to edit documents and to maintain recognizer alternatives for use in documents that do not use, accept, or process ink or speech data and that do not support a data structure including such alternatives. More specifically, aspects of the present invention can be used to enable corrections in any Edit or RichEdit field, any sub-classed Edit or RichEdit field, or any super-classed Edit or RichEdit field, without replacing any existing Edit or RichEdit binary file. Because Edit and RichEdit fields are commonly used throughout the Windows\u00ae operating system (available from Microsoft Corporation) and existing application programs, the ability to support editing and corrections in these fields provides very good coverage of existing programs and fields (for example, perhaps 90% of fields). Additionally, at least some examples of the present invention allow users to turn off the functionality, if desired, e.g., at the application program level, edit class level, or specified field level, so the user need not use aspects of the invention or make it available, if desired (e.g., in the event that aspects of the invention are believed to interfere in some manner with proper operation of a specific application program and\/or in specific documents).","Basically, systems and methods according to this specific example and implementation of the invention operate as follows. Insertion point location changes and selection events are monitored (as described in more detail below) using the Microsoft Active Accessibility framework that is part of Microsoft's Windows XP Tablet PC Edition\u2122 operating system. Detection of these changes and events allow determination of a new insertion point location and\/or a selection event. These systems and methods use conventional Windows\u00ae Edit messages (supported by Edit and RichEdit Windows\u00ae classes) to determine the insertion point location or text selection within the electronic document and the document's length. This information is used to infer the type of text altering event that occurred in almost all common operations. By tracking the insertion point location changes and selection events, systems and methods according to at least this example of the invention are able to maintain a separate document (like the expanded version of electronic document ) that mirrors the content of the user-visible document (e.g., a document that does not support the Text Services Framework, like electronic document ). The separate expanded version of the electronic document is a full Text Services Framework document, so it supports and maintains the alternatives for recognized words injected into the document, e.g., by speech or handwriting recognition or another source. This full Text Services Framework document then may be used by systems and methods according to this example of the invention to provide alternatives for a selected word to present to the user in an appropriate correction user interface, as generally described above.","Various aspects of the above noted systems and methods will be described in more detail. The Text Services Framework on commercially available pen-based computing systems using Microsoft's Windows XP Tablet PC Edition\u2122 operating system contain a mode of operation that supports text injection into existing, non-Text Services Framework type applications. This \u201ctext injector\u201d system is known as \u201cText Services Framework Unaware Application Support,\u201d and it is enabled for various 32 bit applications. A Text Services Framework text insertion product will receive notification that a Text Services Framework supported document is active when focus switches to a Text Services Framework Unaware Application Support application. When the text insertion product wants to inject text (e.g., into the Text Services Framework Unaware Application Support application), it injects the text into a Text Services Framework supported document (e.g., the Text Services Framework Unaware Application Support document) in the same way it would if the document was a full Text Services Framework supported document. The Text Services Framework Unaware Application Support then takes that text and causes it to be injected into the actual field of the non-Text Services Framework document.","Because the Text Services Framework Unaware Application Support document is, for all intents and purposes, a full but temporary context, all the usual behaviors of a full Text Services framework document are available when it is used. Therefore, any Text Services Framework text insertion product can monitor this context and receive notifications when it changes. In systems and methods according to at least some examples of this invention, when a text injection into the Text Services Framework Unaware Application Support context is noted, the injection is queried and the text and all associated alternatives data (if any) are copied out (e.g., in a serialized data byte stream to the backing store document).","An insertion point tracking piece is used to monitor changes in the current insertion point location and\/or selection events using Microsoft Active Accessibility events, to determine when to investigate changes in an electronic document. When a Microsoft Active Accessibility caret event occurs, Edit messages are used to determine the current insertion point location in the document and the document length. From this information, the type of text change that just occurred in the document often can be inferred. In the cases where the changes cannot be inferred, the expanded version of the electronic document (or the backing store version) is discarded. The following table shows examples of how various insertion point (\u201cIP\u201d) location change events can be interpreted in various examples of systems and methods according to the invention:",{"@attributes":{"id":"p-0092","num":"0091"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"6"},"colspec":[{"@attributes":{"colname":"1","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"21pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"35pt","align":"center"}},{"@attributes":{"colname":"4","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"5","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"6","colwidth":"70pt","align":"left"}}],"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"6","align":"center","rowsep":"1"}}},{"entry":[{},{},{},"IP",{},{}]},{"entry":[{},"End","Document","Loca-","IP"]},{"entry":["Original","Ele-","Length","tion","Location"]},{"entry":["Element","ment","Change","at Start","at End","Comments"]},{"entry":{"@attributes":{"namest":"1","nameend":"6","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["IP","IP","+x","P","P + x","Text added at IP Start"]},{"entry":["IP","IP","+x","P","Not P + x","Lost Synchronization"]},{"entry":["IP","IP","None","P","P","IP Location Change or"]},{"entry":[{},{},{},{},{},"Nothing Happened"]},{"entry":["IP","IP","\u22121","P","P \u2212 1","Character before IP"]},{"entry":[{},{},{},{},{},"deleted by backspace"]},{"entry":["IP","IP","\u22121","P","P \u2212 1 (on","Carriage return before"]},{"entry":[{},{},{},{},"previous","IP deleted by"]},{"entry":[{},{},{},{},"line)","backspace"]},{"entry":["IP","IP","\u22122","P","P \u2212 2 (on","Carriage return\/line"]},{"entry":[{},{},{},{},"previous","feed pair deleted by"]},{"entry":[{},{},{},{},"line)","backspace"]},{"entry":["IP","IP","\u22121","P","P","Following character"]},{"entry":[{},{},{},{},{},"deleted"]},{"entry":["IP","IP","\u22121","P","P","Following carriage"]},{"entry":[{},{},"(\u22121 Line)",{},{},"return deleted"]},{"entry":["IP","IP","\u22122","P","P","Following carriage"]},{"entry":[{},{},"(\u22121 Line)",{},{},"return\/line feed pair"]},{"entry":[{},{},{},{},{},"deleted"]},{"entry":["IP","IP","All Others",{},{},"Lost Synchronization"]},{"entry":{"@attributes":{"namest":"1","nameend":"6","align":"center","rowsep":"1"}}}]}}}}},"The following table shows how various selection events can be interpreted in systems and methods according to some examples of the invention:",{"@attributes":{"id":"p-0094","num":"0093"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"5"},"colspec":[{"@attributes":{"colname":"1","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"35pt","align":"center"}},{"@attributes":{"colname":"4","colwidth":"84pt","align":"left"}},{"@attributes":{"colname":"5","colwidth":"98pt","align":"left"}}],"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"5","align":"center","rowsep":"1"}}},{"entry":[{},{},"Change in",{},{}]},{"entry":["Original","End","Document","IP Location at"]},{"entry":["Element","Element","Length","End","Comments"]},{"entry":{"@attributes":{"namest":"1","nameend":"5","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["IP","Selection","+x","None","Lost Synchronization"]},{"entry":["IP","Selection","0","None","Selection Made"]},{"entry":["IP","Selection","\u2212x","None","Lost Synchronization"]},{"entry":["Selection","IP","+x","Selection","Selection replaced by larger"]},{"entry":[{},{},{},"end + x","text"]},{"entry":["Selection","IP","+x","Not Selection","Lost synchronization"]},{"entry":[{},{},{},"end + x"]},{"entry":["Selection","IP","0","Selection Start","Selection collapsed to IP Start"]},{"entry":["Selection","IP","0","Selection End","Ambiguous: Selection"]},{"entry":[{},{},{},{},"collapsed to IP End or"]},{"entry":[{},{},{},{},"Selection Replaced with"]},{"entry":[{},{},{},{},"identical sized text"]},{"entry":["Selection","IP","0","Elsewhere","IP moved, canceling selection"]},{"entry":["Selection","IP","\u2212x","Selection Start","Selection deleted"]},{"entry":["Selection","IP","\u2212x","Selection Start + selection","Selection replaced with shorter"]},{"entry":[{},{},{},"length \u2212 x","text"]},{"entry":["Selection","IP","\u2212x","All others","Lost Synchronization"]},{"entry":["Selection","Selection","0","None","Ambiguous: No operation or"]},{"entry":[{},{},{},{},"Selection replaced by same"]},{"entry":[{},{},{},{},"length selection"]},{"entry":["Selection","Selection","+x","None","Lost Synchronization"]},{"entry":["Selection","Selection","\u2212x","None","Lost Synchronization"]},{"entry":{"@attributes":{"namest":"1","nameend":"5","align":"center","rowsep":"1"}}}]}}}}},"Almost all user operations can be determined easily, and the Text Services Framework document (like the expanded copy of the electronic document ) can be adjusted easily based on this information to keep it in full synchronization with the non-Text Services Framework document (like electronic document ). In the few cases where the changes are ambiguous and determining what actually occurred may be computationally expensive and\/or slow (e.g. selecting the entire document), it is not necessary for systems and methods to attempt to maintain synchronization of all portions. Rather, in such situations, synchronization over smaller portions or regions of the document may be maintained and checks for synchronization and potential available alternatives may take place on a smaller portion of the entire document. As another alternative, when later smaller ranges or regions of the document are selected (e.g., for making edits or corrections), synchronization can be checked at that time over the smaller range or selection, and updates to the Text Services Framework based document can be made, if necessary, if synchronization does not exist. This action would eliminate any stored alternatives for that range and result in reporting no alternatives to the calling application program when the correction interface was activated over that region. However, in this manner, overly time consuming synchronization can be avoided without incorrectly reporting that alternatives when they do not exist.","When an explicit \u201clost synchronization\u201d result is obtained, this may be due to the application programmatically changing the text in the edit field (e.g., by scrolling up and\/or down a set of possible fonts in a font combo box field). Such situations typically will result in loss of all saved alternatives anyway because the text will be changed.","Once systems and methods according to this example of the invention have determined the text changes that have occurred, the Text Services Framework document (e.g., like the expanded version or backing store version of electronic document ) will be updated to match the changes. To do so, the set of stored Text Services Framework Unaware Application Support text insertions is reviewed. If the stored Text Services Framework Unaware Support Application text insertions match the changed text, the text in the Text Services Framework document is replaced with the text+alternatives from the Text Services Framework Unaware Support application data. If a partial match of this text insertion data is found, the data is maintained to match against the next text change in the document (e.g., to check changes in a character-by-character manner). If no match is then found, the data is discarded and the Text Services Framework document is not updated.","The Text Services Framework document is owned by the operating system (not the application program), so the operating system provides the correct screen location when requested by a Text Services Framework document's text insertion product. Therefore, when the text insertion product is asked to display an alternatives list or a suggestion list, the list will appear in the correct screen location as if the field itself were in a Text Services Framework document.","When a change is made in the Text Services Framework backing store document that is not a result of electronic document to backing store document synchronization (e.g., changes coming through the correction user interface), this change must be passed to the original electronic document. Such changes in the backing store document may be monitored using the conventionally available Text Services Framework application programming interfaces (\u201cAPIs\u201d). When a change occurs, a Windows Edit Messages is used to effect the appropriate change in the original electronic document. When the original electronic document is changed in this manner, the changes are not passed back to the backing store document for synchronization.","Accordingly, in this manner, changes in both directions (to both the original electronic document and the backing store document) may be tracked and synchronized into the other document.","As an alternative, instead of using the Microsoft Active Accessibility framework to track insertion point location and\/or selection events, it may be possible to use Edit\/RichEdit windows and detect the insertion point movements that way. In such a system, Windows messages still could be used for determining the specific text change that occurred.","C. Additional Features Relating to Examples of the Invention","Aspects of the invention expand the availability and functionality of pen-based computing systems to use electronic pens and electronic ink to edit many different types of documents, including documents that do not directly support or accept electronic ink input or data. As described above, even for documents that do not accept or support electronic ink data, a user can input electronic ink via a correction interface or other ink entry panel or program, the ink can be recognized, data corresponding to potential alternatives associated with the recognized ink can be stored in a separate backing store document, and the recognized text can be pumped into the original document, i.e., into the application program and\/or electronic document that does not directly accept the electronic ink. Therefore, in accordance with at least some examples of the invention, there is a need to move data that includes machine-generated text from recognized electronic ink or speech data as well as potential alternatives associated with that text (e.g., alternatives stored as a property of the individual ink or text word or character string). Additionally, if desired, the backing store document further may create and store an object including the original raw ink data (e.g., in conventional ink serialized format (\u201cISF\u201d) or any other suitable or desired format) as well as spacing instructions for the start and\/or end of the word or character string. By keeping the original ink data, the ink can be re-recognized, if necessary, optionally taking into account user made changes to the recognized text (e.g., changes made through a correction interface like that illustrated in , changes made by speech input, etc.), in order to further improve the recognition results.","Various movements of the text, ink, alternatives and\/or associated data may be used in some aspects of the invention. For example, the text, ink, alternatives and\/or other associated data may be moved: (a) from a \u201cpending text\u201d area associated with a handwriting input interface (e.g., a Latin skin, an East Asian skin, etc.) to the electronic document and\/or to the backing store electronic document; (b) from the electronic document and\/or the backing store document to one or more portions of a correction interface (e.g., the character-by-character correction portion , the task portion , or the suggestion portion  of the example shown in ); or (c) from a \u201cpending text\u201d area on a handwriting input interface (e.g., a Latin skin, an East Asian skin, etc.) to one or more portions of a correction interface (e.g., the character-by-character correction portion , the task portion , or the suggestion portion  of the example shown in ).","Examples of various features included in at least some examples of the invention include: (a) sending the handwritten ink objects plus alternative data from the pending text area (e.g., Latin, East Asian, or other text), optionally with autospacing instructions (or other data) to the backing store document and maintaining it in the backing store document to allow correction by the end user both before and after the data is injected into an electronic document that does not support saving the additional data; and (b) as above in part (a) but between a text injector system and the backing store document.","The correction interface also may include various features without departing from the invention. For example, the correction interface may allow the original machine-generated text to be displayed to the user and allow the user to write over the machine-generated text, using electronic ink, on a character-by-character basis, to produce the correct results (e.g., as shown at  in correction portion  of ). As another example, the correction interface may include an inking area that allows a user to freehand input electronic ink data (not limited to a character-by-character basis). When character-by-character edit capability is available (as in correction portion ), the handwriting recognition system also may allow display and selection of alternatives for individual characters, if desired.","Also, in at least some examples of systems and methods according to the invention, the correction interface and other features of the systems and methods may store the language of the incoming ink or speech data, to enable user selection of the language of the input, the dictionary to use during recognition, and the like, optionally on a word-by-word basis.","As mentioned above, in accordance with at least some examples of the invention, the original ink data is maintained with the recognized text (e.g., as a property or object) so that the ink can be recognized, if necessary or desired, optionally taking into account user made changes to the recognized text (e.g., made through a correction interface like that illustrated in ), in order to further improve the recognition results. Even when the text is corrected or changed by the user, in at least some examples, the original ink and alternatives (potentially updated alternatives, if re-recognition has occurred) will be maintained with the recognized or corrected text. Re-recognition also may take place in situations, taking into account a user's changes, for example, where a user has broken a single recognized text word into two or more words (e.g., by inserting a space between characters via correction portion ) and\/or where a user has grouped two or more recognized words into a single word (e.g., by deleting blank spaces between recognized words using correction portion ).","When re-recognition occurs, for example, when a new language is selected for a word or grouping of words, when spaces are inserted or deleted between characters, when one or more characters are changed by a user, as described above, the suggestion list (e.g., in suggestion portion ) also may be updated based on the new recognition results. In this manner, the specific suggestions provided may better reflect the user's original intent. Additionally, in at least some examples of systems and methods according to the invention, if a task list is provided in the correction interface (e.g., like task portion ), it also may be updated to reflect user made changes and\/or re-recognition for the various reasons described above. For example, add\/remove from dictionary tasks may be displayed, activated, and\/or deactivated, as appropriate, based on user made corrections and the re-recognition results. Available alternative language dictionaries may be displayed, activated, and\/or deactivated based on changes to the designated language.","The correction interface (e.g., like interface ), when present, may take on any desired form and appear at any desired location without departing from the invention. For example, in at least some examples of the invention, the interface may appear near or adjacent either the ink or machine-generated text word or character string being selected. The interface may appear as a pop-up window or the like that overlays the original electronic ink document.","While the specific examples of the invention described above are optimized for processing electronic ink data and machine-generated text in the form of conventional English and other Latin-based words, characters, and text (e.g., read left to right and top to bottom), the invention is not limited to use on those types of languages and on that type of electronic ink data and machine-generated text. Those skilled in the art will recognize that aspects of this invention can be applied to any type of electronic ink data and\/or machine-generated objects, including handwritten text or characters in any language and written or read in any direction without departing from the invention. Additionally, aspects of this invention can be applied to recognition and processing of other types of data and machine-generated objects without departing from the invention, such as data and elements in charts, diagrams, graphs, flowcharts, etc.; musical data or symbols; mathematical or scientific data or symbols; drawings; speech; etc.","Also, in accordance with at least some examples of the invention, personalization or customization information may be stored with respect to certain ink, speech, or other input. For example, certain pen gestures, words, or phrases could be designated as corresponding to predetermined input data, and this input data may be stored or accessed through the supporting data structure. As a more specific example, speaking or writing the words \u201csincerely, et al.,\u201d may be defined in the system as a request to input certain predetermined information (such as a signature block for a letter), and data stored in the supporting data structure associated with this spoken or written phrase may contain, point to, or otherwise provide access to the desired closing information and data. Customization and personalization information also can be developed and recognized by the system as a result of repeated user made changes or corrections without departing from the invention.","Finally, the present invention also relates to computer-readable media including computer-executable instructions stored thereon for providing correction interfaces, for performing various methods, and\/or for use in various systems, including the correction interfaces, systems, and\/or methods described above. The computer-readable media may constitute computer-executable instructions stored on the various specific examples of computer-readable media described above.","Various examples of the present invention have been described above, and it will be understood by those of ordinary skill that the present invention includes within its scope all combinations and subcombinations of these examples. Additionally, those skilled in the art will recognize that the above examples simply exemplify various aspects of the invention. The various specific steps and\/or architectural elements described above can be changed, functions may be added, deleted, combined, and\/or changed in order without departing from the invention. Thus, various changes and modifications may be made without departing from the spirit and scope of the invention, as defined in the appended claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The above and other objects, features, and advantages of the present invention will be more readily apparent and more fully understood from the following detailed description, taken in conjunction with the appended drawings, in which:",{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIGS. 5A and 5B"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 10"}]},"DETDESC":[{},{}]}
