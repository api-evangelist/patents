---
title: Controlling multiple nodes divided into groups
abstract: A broadcast satellite network transmits from a source to multiple router nodes digital real-time program information and best-effort data. The router nodes are specifically suited for extracting best-effort data streams from the multiplexed signal received via, e.g., a satellite. A number of management techniques are disclosed. According to one technique, a packet is formed having a network layer header, including a destination address for routing a packet to a destination, a second header identifying a syntax and semantic by which a payload of the packet may be parsed in a predefined fashion, and a payload containing a command to be executed by each of one or more to-be-managed nodes to which the packet is destined. The packet is transmitted a plural amount of times to a plurality of nodes, including the one or more to-be-managed nodes, but the command in the particular packet is executed only a single time. According to other techniques, the nodes are divided into groups. In one technique, a unique identifier is assigned to each group and the packet containing the command contains the identifier. The packet is transmitted once but received by all nodes, including the group of nodes to which the same identifier was assigned. Only those nodes of the group with the same identifier execute the command. According to anther embodiment, a manager node maintains a list of the addresses of all nodes in a group and automatically transmits the packet once to each address, thereby enabling automatic communication of the same packet to multiple nodes.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07054314&OS=07054314&RS=07054314
owner: SkyStream Networks Inc.
number: 07054314
owner_city: Sunnyvale
owner_country: US
publication_date: 20010820
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["RELATED APPLICATIONS","Field of the Invention","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE INVENTION","Basic Operation of the Network ","Manager Node  and Router Node  Architectures","Provisioning the System","Group Management","\u201cSMMP\u201d Message Packet Format","SNMP Management Communication","SMMP Management Message Communication"],"p":["The subject matter of this application is related to the subject matter of the following patent applications, all of which are commonly assigned to the same assignee as is this application:\n\n","The contents of these documents are fully incorporated herein by reference.","The present invention pertains to communication networks, such as audio-video program communication networks, that carry digital information from a source to multiple remote sites. At least one of the remote site includes manageable nodes, such as router nodes.","Several communication networks are known which can deliver television or audio signals, such as a terrestrial broadcast network, a cable network and a satellite network. Each of these networks can also deliver digital audio-video signals. In addition, it is also possible to deliver digital audio-video signals via a telephone network, e.g., using T (or higher capacity lines) and so-called DSL or digital subscriber loop lines.","In each of the networks described above, the audio or audio-video signals (hereinafter, collectively, \u201cprogram signal(s)\u201d) are intended to be delivered in real-time, i.e., for real-time consumption. Specifically, the program signals are delivered nominally at a rate that matches the consumption (decode and presentation) rate of the signal. Thus, if the program signal is to be displayed at 30 frames per second, the digital information representing the video is nominally delivered at the rate of 30 frames per second. However, in the case that the program signal, or a component elementary stream thereof, such as a video signal, audio signal, closed-caption text signal, etc., is variably compressed, the actual instantaneous bit rate actually fluctuates. Thus, some temporary buffering is required at the receiver\/decoder end of the program signal. Such buffer space is of a limited, predetermined size and the flow of digital information through the buffer (more concretely, the time at which each piece of digital information is inputted to or removed from the buffer) is strictly controlled. Therefore, these signals can be considered to be consumed nominally (more or less) at the same rate at which they are delivered.","As noted above, digital program information delivered by one of the above noted networks is variably compressed. For example, video can be compressed according to any of the following standards: MPEG-1, MPEG-2, MPEG-4, H.261, H.263, H.320, JPEG, etc. Likewise, audio can be compressed according to any one of the following standards: \u201cMP3\u201d (MPEG-1 Layer III), MPEG-2, AC-3, AC-4, G.720, ATRAC, \u201cMLP\u201d (Meridian Lossless Packing), Delta-Sigma, etc. If the video is variably compressed, the amount of information needed to represent a \u201cpresentation unit\u201d or a given unit of playback time (e.g., a frame or field of video, an audio frame, etc.) varies from presentation unit to presentation unit. Variably compressed signals have timing and scheduling constraints described in the above-noted incorporated applications. Suffice it to say that in a multiplexed signal of one or more programs, each elementary stream has a strict piece-wise time delivery schedule that must be observed to enable proper real-time consumption of a given program. Also, care must be taken to ensure that the relative spacing of time stamps of a given program within a stream is not disturbed too much and that the values of such time stamps are adjusted to reflect any relative movement.","Some of the above networks can also deliver non-real-time data as well as real-time program data. Herein, non-real-time data includes virtually any kind of data which can be delivered independently of the above noted restrictions. That is, such data can be delivered at any nominal rate, at any piece-wise nominal rate, and\/or is insensitive to the relative movement of pieces of a constituent part of a given data stream. Such data can be a file, executable code, e-mail, a music file, video mail, an \u201cEPG\u201d (electronic program guide), a web page, etc. Generally, each data stream of the type noted above is not consumed in real-time, i.e., more or less as delivered, or if executed in real-time, is tolerant of pauses in delivery or presentation of the data stream. Hereinafter, such data or data streams are referred to as \u201cbest-effort\u201d data or data streams to distinguish them from real-time program data.","The prior art teaches a satellite network for carrying one or more best-effort data streams with television signals to a remote site. At the remote site, another device receives the satellite signal and is capable of extracting one or more of the best-effort data streams for receipt thereat. The device of the remote site can have a telephone return path, including a modem that can connect via the Internet, or other wide area network, to the source of the satellite signal.","Another prior art satellite network teaches a network that solely delivers best-effort data packets to one or more remote sites. At the remote site, a device receives the best-effort data packets and determines if any are destined to other computers at the same remote site. This device transfers such data packets destined to the other computers at the same remote site onto a LAN. The other computers detect the data packets and selectively receive and process each packet destined to the respective computer. These computers can also transfer onto the LAN other packets for transfer back to the source of the received packets. These other packets can be intercepted by the same device which receives packets from the satellite, or a second device, for transfer back to the source via a modem and the Internet or other wide area network.","It is an object to provide an improved system that can easily control multiple nodes in a broadcast network that transmits best-effort data.","It is another object to control multiple nodes at remote sites which might not have a return path to the source of the best-effort data.","These and other objects are achieved according to the present invention. An illustrative environment of use of the invention is a broadcast satellite network that transmits from a source to multiple remote sites digital real-time program information and best-effort data. One or more of the remote sites have router nodes, which are processing devices capable of \u201crouting\u201d packets. The router nodes are specifically suited for extracting best-effort data streams from the multiplexed signal received via satellite, recognizing which of the data streams are destined to the router node itself, or to other devices at the remote site, and selectively transferring those data streams to the appropriate recipient node at the remote site.","It is desirable to manage these router nodes. However, the invention applies to any nodes of the network that are desirably managed.","According to one embodiment, a manager node forms a packet comprising a network layer header, including a destination address for routing a packet to a destination. The packet also includes a second header identifying a syntax and semantic by which a payload of the packet may be parsed in a predefined fashion, and a payload containing a message to be executed by each of one or more to-be-managed nodes to which the packet is destined. The manager node transmits the packet plural times to a plurality of nodes, including the one or more to-be-managed nodes. The message in the particular packet is executed only a single time by the to-be-managed nodes regardless of the number of times that a copy of the particular packet is received in the state enabling execution by the to-be-managed node of the message therein. The transmission of the particular packet plural times increases the likelihood that each of the to-be-managed nodes receives at least one copy of the particular packet in the state enabling execution of the message contained therein.","Illustratively, the message is a command. However, the message can also be a control message, file download message, auto discovery message, and keep-alive message.","Illustratively, after transmitting the particular packet plural times, the manager node transmits a second packet at least once containing a command for causing one or more of the to-be-managed nodes to execute once a command previously received one or more times in one of the previously transmitted packets. The command is executed once regardless of the number of copies of the particular packet received in a state enabling execution by the to-be-managed node of the command therein. Illustratively, the manager node can insert into the particular packet information identifying a version of the command contained therein for purposes of enabling a to-be-managed node to identify duplicate copies of the command which need not be executed.","Illustratively, each of the one or more to-be-managed nodes lacks a return path for acknowledging to a source of the particular packet that the particular packet has been received in a state enabling execution of the message contained therein. Alternatively, the to-be-managed nodes have a return path.","According to another embodiment, a to-be-managed node receives one or more times a particular packet comprising a network layer header, including a destination address for routing a packet to a destination. The packet also includes a second header identifying a syntax and semantic by which a payload of the particular packet may be parsed in a predefined fashion, and a payload containing a message to be executed by each of one or more to-be-managed nodes to which the particular packet is destined. If an identifier in each received copy of the particular packet indicates that the particular packet is destined for a particular node, the to-be-managed node processes the particular packet, including, in response to detecting the second header, obtaining the message in the particular packet, if possible. If at least one copy of the particular packet is received in a state enabling execution by the to-be-managed node of the obtained message, the to-be-managed node executes the obtained message in the particular packet only a single time regardless of the number of times that the particular packet is received in the state enabling execution of the obtained message therein. Again, the transmission of the particular packet plural times increases the likelihood that each of the to-be-managed nodes receives at least one copy of the particular packet in the state enabling execution by the to-be-managed node of the message contained therein.","The message can optionally contain a command. Illustratively, after receiving the particular packet one or more times, the to-be-managed node receives a second packet containing an execute command. The to-be-managed node executes once a command previously received one or more times in a respective previously transmitted copy of the particular packet, regardless of the number of copies of the particular packet received in a state enabling execution by the to-be-managed nodes of the command therein. Illustratively, the to-be-managed node stores each copy of each command received in a respective previously transmitted copy of the particular packet. However, the to-be-managed node executes only one version of each stored command regardless of the number of copies of the particular packet received in a state enabling execution of the command therein. For example, while processing the stored commands, the to-be-managed node can determine if multiple copies of the same command are stored therein by referring to version information contained in the processed packet.","According to another embodiment, a manager node forms a particular packet containing a network layer header, including a destination address (e.g., a multicast address) designating receipt of the packet by a group of nodes (e.g., a multicast group of nodes that can parse messages according to a certain syntax and semantic). The packet also contains a second header identifying a syntax and semantic by which a payload of the packet may be parsed in a predefined fashion. The packet additionally contains a payload containing an identifier previously assigned for designating a particular group of one or more nodes as recipients of the message, and a particular message to be executed by each node of the group. A plurality of nodes is divided into one or more groups, including the particular group. The manager node transmits the particular packet to one or more nodes, including the particular group of nodes. Each node receiving the particular packet, but not previously assigned the identifier contained therein, ignores the packet. Each node of the particular group, but only the nodes of the particular group, executes the particular message contained in the particular packet.","Likewise, according to another embodiment, a to-be-managed node receives a particular packet containing a network layer header, including a destination address designating receipt of the packet by a group of nodes. The packet also contains a second header identifying a syntax and semantic by which a payload of the packet may be parsed in a predefined fashion. The packet additionally contains a payload containing an identifier which has been previously assigned to a particular group of one or more nodes and a particular message to be executed by each node of the particular group. Again, plural nodes are divided into one or more groups, including the particular group. A given node ignores the particular packet if the identifier does not match any identifier assigned to the given node. On the other hand, the given node executes the particular message contained in the particular packet if the identifier matches an identifier assigned to the given node.","According to yet another embodiment, a plurality of nodes is divided into one or more groups, including a particular group of one or more nodes. A manager node receives a specification to send a set of one or more commands to the particular group of nodes, the specification designating the group and not specifying any particular node of the group. If each node of the particular group of nodes has a return path to a source of messages, and if the particular group includes a plurality of nodes then, the manager node does the following for each given node of the group. The manager node transmits a packet containing a network layer header, including an address corresponding to the given node, but not the other nodes, of the group, a second header specifying a syntax and semantic by which the packet may be parsed, and one or more messages of the set. The manager node then waits to receive a response packet acknowledging proper receipt of the packet from the given node. As such, an operator of the manager node can designate a given list of messages for execution by an entire group by reference to an indication of the group, rather than by separately specifying each given node of the group at the time of specifying the specific list of messages to be executed.","The invention is now illustrated below for satellite broadcast networks, wherein a signal is transmitted from a single location to multiple remote sites. This is merely for illustration purposes; the invention can be employed in other kinds of networks such as cable, telephone and terrestrial networks. Also, the nodes to be managed according to the invention are presumed to be router nodes at the reception sites. Communication of management messages is presumed to be carried to the router nodes in a signal that is received by many nodes, including nodes that are not the intended recipients of the management messages. Again, this is merely for sake of illustration. The nodes to be managed can be other types of nodes, the nodes to be managed can be located elsewhere in the network and\/or communication of management messages to such nodes can be carried in signals via private links not accessible to other nodes. Furthermore, the management messages are described as issuing from a node at the broadcast side of the network. Again, this is merely for sake of illustration. The node issuing the management messages may be located elsewhere in the network.",{"@attributes":{"id":"p-0034","num":"0044"},"figref":["FIG. 1","FIG. 1","FIG. 1"],"b":["200","200","201","203","202","204","210","212","214","216","218","210","216","218","214","210"]},"The WAN router node  can be any commercially available router, such as a 7200\u2122 series router, distributed by Cisco Systems, Inc.\u2122, a company located in San Jose, Calif. The WAN can be a publicly accessible WAN, such as the Internet, or a private WAN, such as a virtual private network (VPN) that may include a firewall for security. The return path  can also be implemented as a wireless channel, e.g., a satellite channel, a terrestrial channel, etc.","The satellite head-end site  also includes a modulator  connected to receive a digital signal outputted from the encapsulator\/injector node . The modulator  can be any suitable modulator for producing a signal that carries the inputted digital signal provided by the encapsulator\/injector node , such as the NTC\/2080\/\u2122 series Variable Rate DVB Modulator, available from Newtec America, Inc.\u2122, a company located in Stamford, Conn. The modulated signal is then transmitted by a suitable (upconverter and) (dish-shaped) antenna.","Also shown, in , the encapsulator\/injector node  receives a transport stream. The transport stream illustratively is a sequence of transport packets formed according to the MPEG-2 standard. Each transport packet is a 188 byte packet containing digital information of a specific single stream. The inputted transport stream illustratively carries the digital data of the elementary streams that make up one or more real-time programs. The encapsulator\/injector node  is capable of inserting best-effort data into such a transport stream in a fashion that meets the strict timing and scheduling requirements described above.","The forward path  is implemented as the air, space, and a satellite as is well known. Of course, in another network, the forward path  could be implemented by coaxial cables, optical fibers, copper wires and suitable electronic equipment for carrying signals on such physical media.","Each receiver site  has one or more (very small aperture dish-shaped) antennas for receiving the signal transmitted form the satellite head-end site . The received signal(s) is (are) provided to one or more router nodes . Each router node  is connected to one or more client nodes , e.g., by a local area network , such as a 10 BASE-T Ethernet. Each client node  may be implemented using a PC compatible computer running zBand\u2122 Client\u2122 software available from SkyStream Networks, Inc.\u2122 The router node can be an Edge Media Router\u2122 available from SkyStream Networks Inc.\u2122 One or more of the remote sites  can have a wide area network router  for connecting to the return path . This router  can be of the same design as router .","The following describes the basic communication on the network . One or more digital program signals are inputted to the encapsulator\/injector . Illustratively, the digital program signals are inputted as an MPEG-2 compliant transport stream, which is a sequence of transport packets bearing the program signals interleaved together. Each transport packet is a 188 byte packet with a four byte header. The header includes a thirteen bit long packet identifier or PID. Each PID is uniquely assigned to one specific stream, e.g., an elementary stream or component signal of a program. A transport packet with a given PID only contains the data of that specific stream.","The encapsulator\/injector  locates opportunities to insert other transport packets into the inputted sequence of transport packets that satisfies the above-described piece-wise timing and scheduling constraints. Such transport packets contain data supplied by other devices, such as the data streamers  or the manager node .",{"@attributes":{"id":"p-0042","num":"0052"},"figref":"FIG. 2","b":["214","212","216","102","218","214","102","212","214","214"]},"Next, the encapsulator\/injector  appends a transport layer header (TH)  and a network layer header (IPH)  to the unit of information . The transport header  can be a UDP or TCP header. An 8 byte UDP transport layer header  is shown. In addition, the network layer header  is an IP header. An IP header includes a source address, which is the IP address of the node that transmitted the packet, and a destination address, which is the address assigned to the node or nodes which are to receive the packet. Destination addresses may be unicast addresses assigned to only a single node or multicast address assigned to a multiple nodes that have subscribed to a multicast group.","Afterward, the encapsulator\/injector  appends a 12 byte MPEG encapsulation (MPE) protocol header , and may also append an optional (OPT) 8 byte long field  according to the MPE protocol. MPE is a standard for encapsulating data in transport packets promulgated by the Digital Video Broadcast (DVB) standards body in standards document EN 301 192. The encapsulator\/injector  segments the unit of information thus formed into 184 byte long transport packet payloads . The encapsulator\/injector  attaches a transport stream header  to each 184 byte payload. The encapsulator\/injector  inserts a particular PID into each transport stream header  to indicate that the transport packet contains best-effort data. Illustratively, all best-effort data streams use the same PID. The encapsulator\/injector  then transmits the transport packets bearing best-effort data within the outputted transport stream.","The modulator  modulates the transport stream onto one or more frequency channels. Illustratively, the modulator can receive separate transport streams (not shown) for each frequency channel on which the modulator  can modulate digital information. As an example, it is presumed that the modulator  QPSK modulates a transport stream on a 22 MHz wide frequency channel, located in the range of 950 MHz\u20132,150 MHz. The modulated signal is then transmitted via the forward path  to the remote sites .","At the remote sites , each router node  is configured to tune to a specified frequency channel. Illustratively, the router nodes  each tune to the frequency channel carrying best-effort data (and possibly also carrying program data). The router nodes  demodulate the transport stream from the tuned frequency channel. The router nodes  then filter out only those transport packets having a specific PID, or one of a list of PIDs, for which they have been configured to accept. All other transport packets are discarded or ignored. Illustratively, the router nodes  are configured to select those transport packets having the same PID(s) assigned to carrying best-effort data. The router nodes  recover from each payload  the portions of the unit containing the headers and fields , , ,  and .","Next, the router nodes  examine the IP destination address in the network layer header . If the IP destination address is an address assigned to one of the client nodes  on the LAN  to which a given router node  is connected, the router node  transfers the packet onto the LAN . Alternatively, if the IP destination address is one of the address assigned to the router node  itself (e.g., a MAC address, or a multicast address assigned below for receiving management messages) the router node  processes the packet to which the IP destination address is appended. If the IP destination address is not otherwise recognized, the router node  discards or ignores the unit \u2013.","The manager node  may be implemented as a PC compatible computer on which is installed suitable software for achieving the functions according to the present invention.  shows a manager node according to an embodiment of the present invention. Illustratively, the manager node is implemented as a PC compatible computer . The manager node  illustratively includes a disk memory , a main memory , a processor , a network interface (e.g., an Ethernet network interface card or NIC) , an input\/output device  and a bus . The illustration in  is actually a simplified architecture. For instance, the bus  is typically implemented as multiple separate busses with bridges for transferring information between the busses. Also, a separate high speed cache memory is often provided. Furthermore, the input\/output device  is intended to subsume any combination of: a keyboard, pointer device (e.g., a mouse, a touch screen sensor, a joy stick, a track ball, a track pad, a light pen), a graphics accelerator card, a display monitor, loudspeakers, a sound card, etc. as is deemed necessary to perform the functions described below. For example, in case that a separate operator console is provided for monitoring and controlling the functioning of several devices at the satellite head-end site , a separate keyboard, pointer device and display monitor can be omitted from the specific configuration of the manager node  and replaced with a suitable interface for communicating with the operator console.","The manager node  may contain operating system software, such as Windows NT\u2122, available from Microsoft Corp.\u2122, a company located in Redmond, Wash., or LINUX. The manager node  may also contain one or more standard window browsers, such as Iexplore\u2122, available from Microsoft Corp.\u2122, or Netscape Navigator\u2122, available from Netscape\u2122, a company located in Mountain View, Calif. The manager node  may also contain HP OpenView\u2122, distributed by Hewlett Packard Corporation\u2122, located in Palo Alto, Calif. Such software, as well as other software, is stored in memory, e.g., the disk memory , the main memory  or both, and is executed by the processor(s)  and other devices in a well-known fashion.",{"@attributes":{"id":"p-0050","num":"0060"},"figref":["FIG. 4","FIG. 4"],"b":["230","400","412","414","416","418","420","424","426","432","434","422","410","412","434"]},"The non-volatile memory  is for storing software for operating the router node . Illustratively, the non-volatile memory  contains two areas, namely, a \u201clocked\u201d area and an \u201cunlocked\u201d area. Illustratively, the locked area prevents unauthorized access to the memory, including preventing an over-write or erase operation. This secures the non-volatile memory  against inadvertent or unauthorized modification. The unlocked area is designed to facilitate writing and erasing operations. This provides the ability to upgrade the software of the router node . A manner for upgrading the software is described in greater detail below.","The volatile memory  is generally used as a \u201cworking memory,\u201d e.g., to store executable code or data structures actively processed. In particular, the volatile memory  implements a command queue in which commands received according to an embodiment of the present invention are stored pending execution. As described in greater detail below, commands are stored for a settable period of time, e.g., 60 minutes, pending receipt of an execute command. If the execute command is not received within the period of time, the commands waiting in the queue are discarded and not executed.","The processor  is for processing, i.e., executing code, manipulating data, etc. Through execution of code in the memory  or , the processor  controls the operation of the other devices \u2013 and \u2013 of the router node  and causes the router node  to perform the functions described below.","The digital RF tuner\/demodulators ,  are preferably custom circuit boards which include commercially available integrated circuits (ICs) capable of receiving a wideband signal containing one or more frequency channels, tuning to a specific frequency channel, and recovering digital data of the frequency channel. An example of a suitable IC is the model SL 1935C, distributed by Zarlink Semiconductor\u2122, a company located in Ottawa, Ontario, Canada. Such an RF tuner\/demodualtoru  or  can receive an input (from the processor , via the bus ) specifying a particular frequency channel to tune. In response, the digital RF tuner\/demodulator  or  filters out the specified frequency channel and recovers a digital signal from the tuned frequency channel. Such digital data may be stored in the volatile memory  for processing by the processor .","The serial interfaces ,  are for enabling communication between the router and an external device, such as an operator console, modem, printer, etc. Illustratively, these interfaces ,  are RS 232 interfaces, although they can be any well-known serial interface. As is well known, any data in the router node , e.g., in the memory , can be transferred to the external devices via the respective interfaces  and  to which such external devices are connected. Likewise, data originating from the external devices can be transferred to the router node , e.g., to the volatile memory , via the respective interface ,  to which such external devices are connected.","The LAN interfaces ,  are for connecting the router node  to a respective LAN. Each of the LAN interfaces ,  can receive data transmitted on its respective connected LAN at the router node , e.g., for temporary storage in the volatile memory  and can also transmit data in the router node , e.g., temporarily stored in the volatile memory , on its respective LAN.","Both the manager node  and the router node  have additional software for performing the functions described below. This software is designed to cooperate with the commercially available software described above in a well-known fashion. For example, the software described below is intended to execute on the specific operating system provided on the manager node, and can employ the application programming interface (API) specified by the distributor of the respective operating system. In addition, the software may include one or more \u201cplug-in\u201d components for use with the respective browser or other software. As this form of cooperation is well documented by the distributor of the respective software, or otherwise well known, it is not described further. Suffice it to say that providing the software in a fashion that cooperates with other commercially provided software is well within the skill in the art.","Illustratively, the system  of  supports the Simple Network Management Protocol (\u201cSNMP\u201d). See J. Case, M. Fedor, M. Schoffstall & J. Davin, A Simple Network Management Protocol, RFC 1157 (May 1990). According to SNMP, a managed device is controlled through interaction with a management information base (MIB). The MIB is a hierarchical data structure containing objects. Each object is a collection of parameters representing an aspect of the managed device that can be monitored or controlled. According to SNMP, a control device can issue a command to read the current values of the MIB of a device to be managed. The device to be managed replies by returning the requested values. This enables the control device to determine the current state of the device to be controlled. The control device can also issue commands, most notably, instructions to write new values, or otherwise modify the current values, of parameters of the device to be managed. The device to be managed causes the appropriate changes to the parameters as instructed. This in turn can change the behavior of the to-be-managed device.","SNMP requires the to-be-managed device to respond to the device issuing the commands. SNMP therefore requires a return path as well as a forward path between the controller and controlled device.","Initially, the manager node  () must somehow be configured to know about all of the router nodes  that can be managed. This can be done in an automatic fashion for those router nodes  that have a return path  to the manager node . Assume that each router node  is provided an IP address in a known range. An operator can execute a command causing the manager node  to attempt to automatically discover each router node . The operator can specify one of three manners of searching for IP addresses of router nodes in the network :\n\n","For those router nodes  lacking a return path, an operator can manually input data at the manager node  that identifies each such respective router node . For example, the operator can manually input the MAC address of each such router node  and other useful information for managing such router nodes .","Preferably, the manager node  provides a graphical user interface (GUI) for performing the auto-discovery and manual identification of router nodes . This interface preferably uses a windows-based GUI. However, the manager node  also provides a simple command line interface for enabling the operator to enter simple textual commands for identifying router nodes .","After the router nodes  in the network are identified, they can be provisioned. This is achieved by issuing commands from the manager node  to the router nodes  for changing various parameters or instructions at the router node . One manner for issuing commands is described in greater detail below.","One advantage provided by the invention is the ability to organize the router nodes  into groups for sake of simplifying the process of controlling them. The organization of the router nodes  into groups is achieved using the manager node . Specifically, an operator of the manager node  can divide the identified router nodes  into distinct or overlapping groups. Subgroups containing a subset of the router nodes  of a group can also be defined, and thus a hierarchical arrangement of groups and subgroups is supported.","At the manager node , the operator designates a new group, or a new subgroup of an existing group or subgroup, by manual input, e.g., using the command line interface or the window-based graphical user interface. The operator then selects identified router nodes  for placement in the new group or subgroup. In the case of a group, the operator may select any identified router node  for placement in a group. In the case of a subgroup, the operator may select for placement in the new subgroup, any router node  in the parent group\/subgroup of the newly formed subgroup.","Two types of group control are supported, namely, (1) SNMP, and (2) a control technique provided according to an embodiment of the invention referred to as SkyStream\u2122 Multicast Management Protocol or SMMP. In the case of SNMP, the manager node  simply stores a list of all router nodes  in each group or subgroup.","In the case of SMMP, a multicast group is defined for transmitting SMMP messages. For example, a default multicast address may be preliminarily stored in each router node  which enables the router node  to receive messages according to an embodiment of this invention. Alternatively, or in addition, the manager node  can transmit one or more management messages for setting the multicast address to use for messages according to the invention.","All messages transmitted to groups according to SMMP are carried in packets containing the preliminarily defined multicast address. As described in greater detail below, each SMMP packet also carries additional information, called a session identifier, for enabling each router node  that is part of a given group to determine whether or not the packet is destined to that router node .","The operator can also remove individual router nodes  from groups by manual input at the manager node . If the group or subgroup is controlled according to SNMP, then the manager node  simply deletes the node from the list of router nodes  associated with the respective group or subgroup from which the router node  was removed. In the case that the group or subgroup is controlled according to an embodiment of the invention, the manager node  also transmits a command to a given router node  to cause the router node  to close the session of the group or subgroup from which the router node  was removed. Thereafter, the router node  will ignore packets containing the above session identifier of the group or subgroup from which it was removed.","For reasons discussed below, a new packet format is needed for carrying messages under certain circumstances. For example, as discussed above, SNMP can be used to manage router nodes  which have a return path . In case no return path is available, messages can be sent using a SMMP format described herein. However, it should be noted that SMMP can be used even when the router nodes  have a return path .",{"@attributes":{"id":"p-0071","num":"0084"},"figref":"FIG. 5","b":["150","150","152","154","156","156","230","158"]},"As shown in , the payload  includes an SMMP message having a two-byte type field , a two-byte length field , and a variable length load . Load  includes a two-byte version field , a two-byte session identifier field , a four-byte request identifier field , and a value field  of variable length.","The type field  indicates the type of message contained in the SMMP message packet. These include control types, command types, file download types, auto discovery types, and keep-alive types, each of which will be described herein below. Additional types can be added in the future and the software at the router nodes  can be updated to support parsing and processing of the new types of messages. The length field  specifies the byte length of the SMMP message packet. The version field  specifies the version of SMMP according to which the SMMP message should be parsed. The session identifier field  contains a value for identifying a session with a router node . One session identifier is opened for each defined group and subgroup. Router nodes  only execute SMMP messages with the current session identifier for a group or subgroup to which they have been assigned. All other SMMP messages are ignored by the router nodes , except as described below.","The request identifier  is for purposes of numbering messages issued to a given router node , or group of router nodes , in a particular session. The first message sent from the manager node , to a given router node  or group of router nodes , has a value in this field set, e.g., to one. Each subsequent command sent in the specific session, to the respective router node  or group of router nodes , will have a request identifier that is one higher than the previous sent to the respective router node  or group of router nodes . In other words, the value of the request identifier  increments by one for each SMMP message in a given open session. Load  further includes value field  of variable length. As shown in , the value field has a variable number of parameters, where a tag-length-value (TLV) format is used to separate each parameter.","The type field  specifies the type of the message. Examples of the type of message are:\n\n","The system  supports two manners of communicating management messages. In a first scenario, the router nodes  lack a return path  to the satellite head-end site . As will be described below, communication under this scenario must use SMMP. However, it should be noted that SMMP can be used even when a return path  is available to the router nodes .","In a second scenario, the router nodes  that have a return path  for transmitting information back to a source of information, such as the manager node  at the satellite head-end site . In the second scenario, the manager node  transmits a message a single time, e.g., via the forward path , which is sent to all remote sites . The manager node  then waits a certain predefined time period after transmitting the message for a reply or acknowledgement from all intended recipient router nodes . If the manager node  fails to receive a reply or acknowledgement message from each intended router node within the predefined time period, the manager node  presumes that the silent router nodes  did not received the message transmitted from the manager node . In such a case, the manager node  again transmits its message to all remote sites  and waits to receive the reply or acknowledgement message therefrom. This process may be repeated as necessary or up to a predetermined threshold maximum number of times.","SNMP requires the ability to send reply or acknowledgement messages from the router nodes  to the manager node . As such, SNMP can only be used with router nodes  possessing a return path  to the manager node . As can be appreciated, it can be quite tedious for the operator to perform separate manual input for issuing commands to plural nodes, when each of the plural nodes is to receive the same set of commands. The division of the nodes into groups and subgroups simplifies this task for the operator. The specific process by which an operator can cause the manager node  to issue the same set of commands to plural nodes is illustrated in the flow-chart of .","In step S, the operator of the manager node  defines groups and\/or subgroups of nodes, e.g., as described above. The operator of the manager node  places one or more router nodes  in each defined group or subgroup thereby generating at the manager node  a list of all router nodes  in each defined group or subgroup.","In step S, the operator of the manager node  defines a set of commands to be executed at each node of any selected, previously defined group or subgroup. The operator can easily add to or remove commands from the set in step S until the operator is satisfied with the set of commands to be executed. Illustratively, the GUI of the manager node  displays the parameters of the MIB of the routers nodes  hierarchically to facilitate selection of specific parameters to access (write or read) thereby facilitating generation of a MIB access command. The manager node  thus generates a list of commands to be executed.","Next, in step S, the operator of the manager node  specifies a particular group or subgroup of nodes (from the previously defined list of groups or subgroups) to execute the commands. Note that the operator of the manager node  could also specify a sole router node  to execute the commands of the list. In response, the manager node  obtains the list of router nodes, specifically, the list of IP addresses and MAC addresses of each router node  in the specified group or subgroup.","In step S, the manager node  obtains a first pair of IP and MAC addresses from the group list, i.e., the IP and MAC addresses of one of the router nodes  of the group or subgroup. Note that all pairs of IP and MAC addresses in the specified group or subgroup will ultimately be obtained, as steps S\u2013S will be repeated for each router node IP\/MAC address pair of the group or subgroup.","In step S, the manager node  generates a series of packets for transmission containing SNMP formatted messages for executing the commands of the list. Illustratively, these packets are UDP\/IP packets, including an IP network layer header and a UDP transport layer header. The IP layer header includes the obtained IP address of one of the router nodes  of the group or subgroup as the destination address of the packets. The payload of the packets includes the appropriate message for executing the commands.","In step S, the manager node  transmits these packets to the remote sites  to be recognized by the router node  corresponding to the obtained IP\/MAC addresses. Illustratively, the manager node  transfers the packets to the encapsulator\/injector  via the LAN  and the encapsulator\/injector  inserts the packet into the transport stream. The packet is thus carried by the forward path  to the remote sites . Note that the manager node  may optionally set a time delay to transmit the command message packets some time in the future.","Next, in step S, the manager node  determines whether or not the command set packets have been transmitted to all router nodes  of the group or subgroup. If the determination is no, then steps S\u2013S will be repeated until the packet is sent to all IP\/MAC address pairs of the group. Accordingly, in step S, the manager node  obtains a second IP\/MAC address pair from the selected group, and so on. If the determination is yes (e.g., if there are five router nodes  in the group, then steps S\u2013S have been repeated five times), then the process proceeds to step S.","In step S, the manager node  determines if a new reply message (from the router node  corresponding to the selected IP\/MAC addresses) has been received. If so, then in step S, the manager node  processes the reply. The processing may be simple such as determining that the command had been successfully carried out. However, the reply message may contain data. For example, if the commands were read commands for reading out the current state\/value of parameters or other information at the router node , then the reply message may contain the requested data. The manager node  stores such information so that it is available for display or transfer to another device, e.g., via LAN . If a new reply message has not been received, then the process proceeds to Step S.","In step S, the manager node  determines whether or not any router node  has failed to return a reply message within the predefined time out period for a reply. If not, then the process ends at step S. However, if one or more router nodes  have failed to reply within the predefined time out period, the manager node  executes step S. In this step, the manager node  determines whether or not any router nodes  have failed to reply to a threshold maximum number of transmission attempts. If so, then the manager node  executes step S in which the errant router node  is determined to have malfunctioned. The manager node  reports an error and removes this router node  from the consideration list.","On the other hand, suppose the manager node  has attempted to transmit the command set to this router node  less than the maximum threshold limit number of times. In such a case, the manager node  increments a counter of the number of transmission attempts for this router node  by one and repeats steps S\u2013S for this router node. Processing then continues as set forth above from step S.","It should be noted that steps S\u2013S and steps S\u2013S can be separated into two separate, contemporaneously executed, multi-tasked processes. In addition, it is also possible to transmit one set of packets to a single router node  and wait for a reply message from that single router node  before sending the set of packets to the next router node . However, it is advantageous not to delay the receipt of commands by some router nodes  while another router node  that previously received the command set is responding.","The operator can also specify a time delay to delay execution of steps S\u2013S at a later time, at the time of selecting the commands to be executed by the group or a single router node .",{"@attributes":{"id":"p-0091","num":"0109"},"figref":"FIG. 8","b":["212","230","230","204","230","212"]},"In step S, the operator specifies by, e.g., manual input at the manager node , the set of commands to be executed by the router nodes  to be managed. This step is similar to step S of  described above. Next, in step S, the operator specifies by, e.g., manual input at the manager node , the specific router nodes  which are to receive the commands. The operator can specify a single router node  or a group\/subgroup of router nodes . If a single router node  is specified, the manager  retrieves the IP and MAC address of the router node .","Next, the manager node  determines sets of certain parameters (i.e., enable and configuration controls) needed for the transmission. In the case of group communication, in step S, the manager node  determines (via, e.g., internal records) if a session is currently open for the specified group\/subgroup of router nodes  that is to receive the controls. If not, in step S, the manager node  transmits SMMP control messages to each router node  of the group\/subgroup for enabling the specified router node  of the group\/subgroup of router nodes . These messages designate a unique session identifier for use by all router nodes  of the respective group\/subgroup of router nodes . Illustratively, the identical command may be transmitted multiple times to ensure that the specified router node  or group\/subgroup of router nodes  receive the command. If a session is already open, the manager node  simply obtains the session identifier for the session, in step S. Illustratively, the manager node  stores a table of defined groups\/subgroups and session identifiers associated with them.","In step S, the manager node  illustratively periodically transmits an SMMP \u201ckeep-alive\u201d message for each open session to the respective router node  or group\/subgroup of router nodes  corresponding to the message. Such SMMP keep-alive messages are carried in SMMP packets as noted above. An SMMP keep-alive message causes each router node  to which the message is destined, to maintain the session as open and not time out the session. In other words, the keep-alive message causes the router node  to reset its internal timer for the session and not close it. If a router node  deems a session to have ended due to a time out (i.e., a keep-alive message packet was not timely received), then the router node  in the session will purge all commands stored in memory and stop receiving messages for that session.","The manager node  also obtains the request identifier of the last message sent in the session and increments the number for the next message. Illustratively, this request identifier can also be stored in a table or in the same table as the session identifier. In the case of a new session, a new request identifier is generated with an initial value, such as one.","Next in step S, the manager node  generates a sequence of one or more packets containing the commands to be executed. Preferably, these packets have the form shown in . In making such packets, the manager node  assigns a unique version number to each command in the sequence of commands in the packets. For example, the manager node  can keep track of the version number of the last command sent to the respective router node  or group\/subgroup of router nodes . The manager node  inserts the unique version numbers into the respective commands.","As previously explained, the manager node  transmits duplicate message packets to increase the odds that the packet will be received by the router nodes . (For example, in case there is no return path from the remote nodes back to the manager node, it is not possible for a router node  to send a reply or confirmation acknowledging receipt of a packet). Accordingly, as described below, each router node  will first compare the session ID of each newly received packet. If the session ID is not the current session, the packet is ignored. However, if the session ID matches, the router node  stores the command set in its queue.","In step S, the manager node  inserts the appropriate request identifier in the request identifier field of the packets. The request identifier of the previously transmitted message is incremented by one and this incremented request identifier is inserted into the packets carrying the message. The manager node  then transmits these packets to the router node  or group\/subgroup of router nodes , in step S. As before, the manager node  transfers the packets via the LAN to the encapsulator\/injector . The encapsulator\/injector  recovers the sequence of packets, formats them into transport stream packets and inserts them into the transport stream. Thus, the sequence of packets is transmitted by the forward path  to the remote sites .","In step S, the manager node  increments a transmission counter to determine how many transmission of the same packet is sent. In step S, the manager node  determines whether or not the sequence of packets has been transmitted a certain threshold number of times, by comparing the transmission counter to a transmission threshold. Illustratively, the transmission threshold is settable by the operator of the manager node .","If the manager node  has not yet transmitted the sequence of packets a threshold number of times, the manager node  returns to step S, so as to repeat execution of steps S\u2013S. This causes the sequence of packets to be transmitted again. If the manager node  has already transmitted the sequence of packets the threshold number of times, execution at the manager node  ends.","The net result is that the sequence of commands is transmitted multiple times. As stated, subsequently transmitted commands have identical version numbers to their previously transmitted counterparts. Thus, the router nodes  can determine whether each received command is new or a duplicate.","Although not shown in , the manager node  may now, at any time, generate and transmit command \u201cglobal trigger\u201d packets to each router node  in the selected group or subgroup in the same manner as steps S to S.","At the reception sites , each router node  receives incoming packets. If the packets contain the multicast address assigned for SMMP in the IP header , the router node  identifies the SMMP protocol header  and examines the SMMP payload . Next, the router node  determines the type of the SMMP message. If the message is an SMMP command message, the router node  next determines if the session identifier in the field  corresponds to an active session for this router node  that has been previously enabled by the manager node . As described above, this would be true if the router node  was assigned to the same group or subgroup as the target group or subgroup as the SMMP message. If there is no match, the router node ignores\/discards the packet. If there is a match, the router node  extracts the commands from the packet and places them in its queue.","If the command is a trigger command, the router node  executes the commands currently in its queue. In executing the commands, the router node  only executes one copy of each command. Thus, if there are commands with duplicate version numbers in the queue, only one of the commands will be executed. The commands are then discarded.","Further, in step S, sets of other types of message packets may be defined as well, such as file download message packets. In the case of file download messages, a first message indicates various control information for the transfer, such as the total number of packets, the amount of storage required for the file, etc. Each file message packet also includes information indicating which specific numbered packet is transferred. Like command packets, file packets illustratively are transmitted multiple times to ensure their proper receipt. Furthermore, file packet transmission from the manager node  can also be delayed until a later operator specified time in a similar fashion as described above for command transmission. Unlike command packets, duplicate copies of file packets are not maintained. However, missing file packet information can be obtained in a subsequent transmission. Once all of the file information is received, the router node  transfers the file to its nonvolatile memory. This form of transfer can be used to send software upgrades or virtually any type of file to the router nodes .","Note too that the manager node  may optionally set a time delay to transmit the command message packets some time in the future. For example, suppose the operator desires to delay transmission of the command set until a specific future time. The operator of the manager node  can also specify the specific time at which the command set is to be executed. The manager node  responds by delaying execution of steps S\u2013S such time.","The other types of SMMP messages, i.e., control, keep-alive and auto-discover can also be transmitted from the manager node  multiple times to ensure that they are received. These commands can also be transmitted at an operator specified time, although it is usually desirable that keep-alive messages are transmitted according to a regular schedule and that auto-discover and control message be transmitted immediately. As noted above, SMMP control messages are transmitted to individual router nodes  for, among other things, opening sessions. Therefore, these messages do not include the multicast address for SMMP and instead include the IP and MAC address of the specific node to which they are destined. Note that the router nodes  only defer execution of the command type of messages until receiving the global trigger command.","It should be understood that the foregoing description is merely illustrative of the invention. Numerous alternative embodiments within the scope of the appended claims will be apparent to those of ordinary skill in the art."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The following detailed description, given by way of example and not intended to limit the present invention solely thereto, where similar elements will be referred to by the same reference symbols, will best be understood in conjunction with the accompanying drawings in which:",{"@attributes":{"id":"p-0025","num":"0035"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0026","num":"0036"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0027","num":"0037"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0028","num":"0038"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0029","num":"0039"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0030","num":"0040"},"figref":["FIG. 6","FIG. 5"]},{"@attributes":{"id":"p-0031","num":"0041"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0032","num":"0042"},"figref":"FIG. 8"}]},"DETDESC":[{},{}]}
