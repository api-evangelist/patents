---
title: Performing multiple actions on a spool file by assigning a particular action to be performed on each segment of the spool file
abstract: A method, computer program product and system for performing multiple actions on a single spool file. A Portable Document Format (PDF) server (PDF server is a component of a print server) identifies segments of a spool file by identifying Base Name Group (BNG) commands in the data stream generated by an application. A BNG command may indicate the beginning of a segment of a spool file. Upon identifying a segment of the spool file, the segment may be converted into a PDF file. An action, e.g., electronic mailing, faxing, printing, to be performed on the PDF file may be determined using the attributes of the segment converted into the PDF file. For example, an entry in a database configured to store a command to perform a particular action may be indexed using these segment attributes. In this manner, multiple actions may be performed on different segments of a spool file.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07577693&OS=07577693&RS=07577693
owner: InfoPrint Solutions Company LLC
number: 07577693
owner_city: Boulder
owner_country: US
publication_date: 20040903
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["TECHNICAL FIELD","BACKGROUND INFORMATION","SUMMARY","DETAILED DESCRIPTION"],"p":["The present invention relates to the field of presentation systems, and more particularly to assigning a particular action, e.g., e-mail, archive, print, to be performed on each segment, e.g., sub-document, of a spool file thereby allowing multiple actions, e.g., e-mail, fax, print, to be performed on the same spool file.","Presentation architectures are provided for representing documents in a data format which is independent of the methods utilized to capture or create those documents. Documents may contain combinations of text, image, graphics, and\/or bar code objects in device and resolution independent formats. Documents may also contain fonts, overlays, and other resource objects, which are required at presentation time to present the data properly. Additionally, documents may also contain resource objects, such as a document index and tagging elements supporting the search and navigation of document data for a variety of application purposes. In general, a presentation architecture for presenting documents in printed format employs a presentation data stream comprising a device-independent application data stream and a device-dependent printer data stream.","A data stream is a continuous ordered stream of data elements and objects which conform to a given format. Application programs can generate data streams destined for a presentation service, archive library, or another application program. The Mixed Object Document Content Architecture (MO:DCA) developed by International Business Machines Corporation of Armonk, N.Y. defines a data stream, which may be utilized by applications to describe documents and object envelopes for document interchange and document exchange with other applications and application services. Interchange is the predictable interpretation of shared information in an environment where the characteristics of each process need not be known to all other processes. Exchange is the predictable interpretation of shared information by a family of system processes in an environment where the characteristics of each process may have to be known to all other processes. Documents which are defined in the MO:DCA format may be archived in a database, and later retrieved, viewed, annotated, and printed in local or distributed system environments.","The MO:DCA file format is designed to be used with a printing system known as the \u201cAdvanced Function Presentation\u201d (AFP) printing system developed by, and available from, International Business Machines Corporation, Armonk, N.Y. This printing system has a spool to receive and spool the data stream (such as the data stream in the MO:DCA format) generated by an application into a file, commonly referred to as a \u201cspool file.\u201d Spooling may refer to converting the print data into codes that a print server may understand. The AFP printing system may further include an intelligent print server which receives the spool file from the spool and uses the references in the data stream to retrieve the stored resources from a resource database.","The spool file may include a print document that includes multiple sub-documents. For example, a telephone company may print all of its telephone bills for a specified week as a single print document. Each telephone bill in the single print document may be thought of as a sub-document which may have to be sent to a particular customer.","The pages (or sub-documents) in a print document may have one or more associated \u201coverlays,\u201d which are static templates to which the page information is added. Continuing with the telephone company example, an overlay for the telephone bills may be the background of the telephone bill having the company logo, and columns for listing the telephone numbers called. Overlays typically are stored in the resource library and utilized by the print server, when processing the spool file, to produce the printed document.","The print server may then convert the data stream (the spool file of the single document) to a device specified data stream directed to a printer for producing the printed document. The single print document that includes multiple sub-documents may then be printed by the printer.","Currently, the action that is performed on the document is performed on the entire document including the sub-documents. Continuing with the telephone company example, all the telephone bills are printed out to be mailed to different customers through the United States Postal Service\u00ae regardless as to whether the customer prefers to receive the telephone bill in a different manner.","However, it may be desirable to perform different actions on the data stream besides printing out the document in a hard copy format. It may further be desirable to perform different actions on different sub-documents in the single document. For example, it may be desirable to send one of the sub-documents electronically to the appropriate individual. In another example, it may be desirable to fax one of the sub-documents to the appropriate individual. Continuing with the telephone company example, one customer may prefer to receive the telephone bill by fax instead of by mail through the United States Postal Service\u00ae. Another customer may prefer to receive the telephone bill by e-mail instead of by mail through the United States Postal Service\u00ae.","Therefore, there is a need in the art to perform multiple actions, e.g., fax, e-mail, archive, print in a particular format, on a single spool file.","The problems outlined above may at least in part be solved in some embodiments by identifying segments or sub-documents of a spool file. Segments of a spool file may be identified by a Portable Document Format (PDF) server (PDF server is a component of the print server) identifying Base Name Group (BNG) commands in the data stream generated by an application. A BNG command may indicate the beginning of a segment or sub-document of a spool file. Upon identifying segments of a spool file, each segment may be converted into a Portable Document Format (PDF) file by the PDF server. The PDF server may determine an action, e.g., electronic mailing, faxing, printing, to be performed on the PDF file by accessing a particular entry in a database using the attributes of the segment (referring to the segment that was converted into the PDF file) where the entry contains a command to perform a particular action. In another embodiment, the PDF server may determine an action, e.g., electronic mailing, faxing, printing, to be performed on the PDF file by calling a user program to supply the PDF server with the appropriate action to be performed on the PDF file. The user program may supply such an action by receiving the attributes of the segment from the PDF server. The user program may use the segment attributes to identify the action to be performed. In this manner, multiple actions, e.g., fax, e-mail, archive, print, may be performed on different segments of a spool file. That is, in this manner, multiple actions may be performed on a single spool file.","In one embodiment of the present invention, a method for performing multiple actions on a single spool file may comprise the step of generating a data stream where the data stream comprises a plurality of commands. The method may further comprise spooling the data stream into a spool file. The method may further comprise identifying a plurality of segments of the spool file using the plurality of commands where each command identifies a unique segment of the spool file. Further, each of the segments of the spool file has attributes associated with it. The method may further comprise converting a segment of the spool file into a Portable Document Format (PDF) file. The method may further comprise determining an appropriate action to be performed on the PDF file using the attributes associated with the segment converted into the PDF file. The method may further comprise performing the appropriate action on the PDF file.","The foregoing has outlined rather generally the features and technical advantages of one or more embodiments of the present invention in order that the detailed description of the present invention that follows may be better understood. Additional features and advantages of the present invention will be described hereinafter which may form the subject of the claims of the present invention.","The present invention comprises a method, computer program product and system for performing multiple actions on a single spool file. In one embodiment of the present invention, a Portable Document Format (PDF) server (PDF server is a component of a print server) identifies segments or sub-documents of a spool file by identifying commands, e.g., Base Name Group (BNG) commands, in the data stream generated by an application. A BNG command may indicate the beginning of a segment or sub-document of a spool file. Upon identifying segments of the spool file, each segment may be converted into a PDF file by the PDF server. The PDF server may determine an action, e.g., electronic mailing, faxing, printing, to be performed on the PDF file by accessing a particular entry in a database using the attributes of the segment (referring to the segment that was converted into the PDF file) where the entry contains a command to perform a particular action. In another embodiment, the PDF server may determine an action, e.g., electronic mailing, faxing, printing, to be performed on the PDF file by calling a user program to supply the PDF server with the appropriate action to be performed on the PDF file. The user program may supply such an action by receiving the attributes of the segment from the PDF server. The user program may use the segment attributes to identify the action to be performed. In this manner, multiple actions, e.g., fax, e-mail, archive, print, may be performed on different segments of a spool file. That is, in this manner, multiple actions may be performed on a single spool file.","In the following description, numerous specific details are set forth to provide a thorough understanding of the present invention. However, it will be apparent to those skilled in the art that the present invention may be practiced without such specific details. In other instances, well-known circuits have been shown in block diagram form in order not to obscure the present invention in unnecessary detail. For the most part, details considering timing considerations and the like have been omitted inasmuch as such details are not necessary to obtain a complete understanding of the present invention and are within the skills of persons of ordinary skill in the relevant art.","FIG. \u2014Presentation System",{"@attributes":{"id":"p-0021","num":"0020"},"figref":["FIG. 1","FIG. 1"],"b":["100","100","101","100","102","103","104","105","106","100","100"]},"Referring to , print server  may include a customer application  configured to generate a data stream that is a formatted, platform and device independent logical description of a print document. One known specification of such a logical description of a data stream utilized for printing is known as Mixed Object Document Content Architecture (MO:DCA), described in detail in IBM Mixed Object Document Content Architecture Reference number SC31-6802 which is hereby incorporated by reference in its entirety. In one embodiment, customer application  may be an application located in a different system, e.g., client computer, apart from print server .","Print server  may further include a spool  for both receiving and spooling the data stream representing the print document from application . Spool  may be configured to spool the data stream into a file, referred to herein as a \u201cspool file\u201d. The spool file may comprise two components, a data portion and an attribute portion. The data portion may include data objects, print control objects, logical page description, e-mail address, facsimile number. The data portion may further include commands such as a Begin Named Page Group (BNG) and an End Named Page Group (ENG) structured field pair. A BNG may indicate the beginning of a segment or a sub-document of a spool file and an ENG may indicate the ending of the segment or sub-document of the spool file. The attribute portion may include attributes used in the actual printing of the document, such as job name, output queue name, spool file name, user identification, form type, user data, etc. The attribute portion may further include what is referred to herein as \u201csegment identifications\u201d. A segment identification is a unique identification associated with a particular segment of the spool file. In one embodiment, the segment identification may be part of the BNG command. Hence, the BNG command may indicate the beginning of a segment that is identified by the unique segment identification. It is noted that each segment of the spool file may have its own attributes (referred to herein as \u201csegment attributes\u201d) which are identified by the segment identification. The segment attributes may include the attributes listed above as well as the segment identification that identifies the respective segment.","As will be discussed in greater detail below, the BNG may be used by print server  to identify segments or sub-documents of a spool file. Once print server  identifies a segment of a spool file, print server  may be configured to convert the segment into a Portable Document Format (PDF) file.","Referring to , the spool file may be enqueued in a queue  of a PDF server  by spool . In one embodiment, PDF server  may access a resource library  containing resources such as fonts and print-control objects that may be required to convert the data stream into PDF files as discussed below. In one embodiment, PDF server  may use resource library  to tie the logical page description of the print document to a physical medium. Application program  may be configured to access and use resource library  to format the document.","As stated in the Background Information section, it may be desirable to perform different actions on the data stream besides printing out the document in a hard copy format. It may further be desirable to perform different actions on different sub-documents in the single document. For example, it may be desirable to send one of the sub-documents electronically to the appropriate individual. In another example, it may be desirable to fax one of the sub-documents to the appropriate individual. Continuing with the telephone company example, one customer may prefer to receive the telephone bill by fax instead of by mail through the United States Postal Service\u00ae. Another customer may prefer to receive the telephone bill by e-mail instead of by mail through the United States Postal Service\u00ae. Therefore, there is a need in the art to perform multiple actions, e.g., fax, e-mail, archive, print, on a single spool file.","Multiple actions may be performed on a single spool file by segmenting the spool file using the BNG commands in the data stream as described above. Upon identifying the segments of the spool file, the segment may be converted into a PDF file. Upon converting the segment into a PDF file, an action, e.g., faxing, e-mailing, archiving, printing, may be performed on the PDF file as discussed below.","As stated above, spool  transmits the spool file to PDF server . In one embodiment, PDF server  may be configured to identify each segment of the spool file using the BNGs in the data stream. Upon identifying each segment, PDF server  may be configured to convert the segment into a PDF file. Upon converting the segment of the spool file into a PDF file, PDF server  may be configured to determine the appropriate action to perform, e.g., faxing, e-mailing, printing, archiving, on the PDF file by indexing into a particular entry in a database  configured to store actions to be performed on the segments of the spool file. In one embodiment, each entry in database  may be associated with a particular segment of the spool file that may be indexed using the attributes associated with that segment. As stated above, the segment attributes may include a segment identification which may be used to identify a particular segment. Since each segment may be identified by a unique segment identification, the segment identification, along with the other attributes of the segment, may be used to index into a unique entry in database . That entry may contain a command for PDF server  to perform a particular action, e.g., faxing, e-mailing, printing, archiving, on the PDF file (the PDF file that was converted from the segment associated with that entry).","In one embodiment, the entries of database  may be edited to indicate an appropriate action to be performed on a segment of the spool file by a user editing the database entries via an Application Programming Interface (API) call or via a command line interface.","In another embodiment, upon converting the segment of the spool file into a PDF file, PDF server  may be configured to determine the appropriate action to perform, e.g., faxing, e-mailing, printing, archiving, on the PDF file by calling a user program (not shown) to supply the appropriate action to be performed on the PDF file. In one embodiment, PDF server  may be configured to transmit the spool attributes to the user program which may be configured to determine the appropriate action to perform on the PDF file using these attributes. As stated above, the spool attributes may include a unique segment identification which may be used by the user program to identify a particular entry in a data structure associated with the segment. The entry in the data structure may include a command to perform a particular action. Upon identifying the action to be performed on the PDF file, the user program may instruct PDF server  to perform such an action on the PDF file. In this embodiment, the actions to be performed on the segments of the spool file may be dynamically updated.","Once PDF server  identifies the action to be performed on the PDF file, PDF server  performs the action. For example, PDF server  may fax the PDF file to an intended recipient, as identified in the data portion of the spool file associated with the segment, via fax machine . As stated above, the data portion of the spool file may include BNG commands which may be used to indicate segments or sub-documents of the spool file. Hence, PDF server  may identify the appropriate data associated with a particular segment. In another example, PDF server  may transmit the PDF file to a PDF compatible printer  to be printed out. In another example, PDF server  may re-spool the PDF file to be in a different format, e.g., Intelligent Printer Data Stream (IPDS), used by a printer  to print out the document. In another example, PDF sever  may e-mail the document to an intended recipient, as identified in the data portion of the spool file associated with the segment, via network , e.g., Internet. In another example, PDF sever  may archive the PDF file by transmitting the PDF file to file system  for storage.","It is noted that in one embodiment, customer application , spool , resource library  and database  may be located separately from print server . In such an embodiment, print server  may simply include PDF server . It is further noted that other variations, e.g., application  is located separate from pint server  but the other components are located within print server , are contemplated and are covered under different embodiments applying the principles of the present invention.","A more detail description of print server  is provided below in association with . A more detail description of print server  performing multiple actions, e.g., e-mail, fax, print, archive, on different segments of the same spool file is provided further below in association with .","FIG. \u2014Print Server",{"@attributes":{"id":"p-0034","num":"0033"},"figref":["FIG. 2","FIG. 1","FIG. 2","FIG. 2"],"b":["101","101","210","212","240","210","250","240","240","250"]},"Application  may include, for example, customer application  () configured to generate a data stream as described above. Application  may also include an application configured to perform multiple actions on a single spool file as discussed below in association with .  is a flowchart of a method for performing multiple actions, e.g., e-mail, fax, print, on different segments of the same spool file in accordance with an embodiment of the present invention. It is noted that in one embodiment, the code for the application for performing multiple actions on a single spool file may reside in both operating system  and application .","Referring to , Read-Only Memory (ROM)  may be coupled to system bus  and include a basic input\/output system (\u201cBIOS\u201d) that controls certain basic functions of print server . Random access memory (RAM)  and disk adapter  may also be coupled to system bus . It should be noted that software components including operating system  and application  may be loaded into RAM  which may be print server's  main memory for execution. Disk adapter  may be an integrated drive electronics (\u201cIDE\u201d) adapter that communicates with a disk unit , e.g., disk drive. In one embodiment, database  () configured to store actions to be performed on the segments of a spool file, as discussed above, may reside in disk unit . In one embodiment, the queue used to temporarily store a spool file from spool  (), as discussed above, may reside in disk unit . In one embodiment, spool  and resource library  () may reside in disk unit . In one embodiment, PDF server  () may reside in disk unit  or in application . It is noted that client application  may reside in disk unit  or in application . It is further noted that the application for performing multiple actions on a single spool file, as discussed below in association with , may reside in disk unit  or in application .","Referring to , print server  may further comprise a communications adapter  coupled to bus . Communications adapter  may interconnect bus  with an outside network  enabling print server  to electronically mail a PDF to an intended recipient as identified in the data associated with the segment of the spool file.","Implementations of the present invention include implementations as a system programmed to execute the method or methods described herein, and as a computer program product. According to the system implementations, sets of instructions for executing the method or methods may be resident in the random access memory  of one or more systems configured generally as described above. Until required by print server , the set of instructions may be stored as a computer program product in another memory, for example, in disk unit . Furthermore, the computer program product may also be stored at another computer and transmitted when desired to the user's workstation by a network or by an external network such as the Internet. One skilled in the art would appreciate that the physical storage of the sets of instructions physically changes the medium upon which it is stored so that the medium carries computer readable information. The change may be electrical, magnetic, chemical or some other physical change.","A description of performing multiple actions on a single spool file using print server  () in presentation system  () is described below in association with .","FIG. \u2014Method for Performing Multiple Actions on a Single Spool File",{"@attributes":{"id":"p-0040","num":"0039"},"figref":"FIG. 3","b":"300"},"Referring to , in conjunction with , in optional step , the entries in database  (database configured to store actions to be performed on the segments of the spool file) are edited to associate a particular action to be performed on a particular segment of the spool file. In one embodiment, step  is not implemented by method  but instead a call is made to a user program to obtain the action to be performed on a segment of the spool file as discussed further below.","In step , application  generates a data stream that is a formatted, platform and device independent logical description of a print document. In one embodiment, the data stream is a MO:DCA data stream.","In step , spool  spools the generated data stream into a spool file. In step , spool  transmits the spool file to a queue of PDF server .","In step , PDF server  receives the spool file. In step , PDF server  identifies each segment of the spool file by identifying each BNG in the data portion of the spool file that indicates the beginning of each segment of the spool file.","Upon identifying each segment of the spool file, PDF server , in step , converts each segment of the spool file into a PDF file. Upon converting a segment of the spool file into a PDF file, PDF server  performs the following steps for each PDF file.","In step , PDF server  indexes into an appropriate entry in database  using the segment attributes for the segment converted into a PDF file, as described above, to obtain the action to be performed on the PDF file. In one embodiment, an entry in database  may be indexed using the segment attributes (function as a key) which includes a unique segment identification. That entry may contain a command for PDF server  to perform a particular action, e.g., faxing, e-mailing, printing, archiving, on the PDF file (the PDF file that was converted from the segment associated with that entry).","Alternatively, in step , PDF server  calls a user program to supply the appropriate action to be performed on the converted PDF file. In one embodiment, PDF server  may be configured to transmit the spool attributes to the user program which may be configured to determine the appropriate action to perform on the PDF file using these attributes. As stated above, the spool attributes may include a unique segment identification which may be used by the user program to identify a particular entry in a data structure associated with segment. The entry in the data structure may include a command to perform a particular action. Upon identifying the action to be performed on the PDF file, the user program, in step , instructs PDF server  to perform such an action on the PDF file.","In step , upon identifying the action to be performed on the PDF file, PDF server  performs the appropriate action on the PDF file in step .","In step , PDF server  electronically mails the PDF file via network  to the intended recipient as identified in the data portion associated with the segment converted into the PDF file.","Alternatively, in step , PDF server  faxes the PDF file via facsimile machine  to the intended recipient as identified in the data portion associated with the segment converted into the PDF file.","Alternatively, in step , PDF server  writes the PDF file to file system  for archival purposes.","Alternatively, in step , PDF server  transmits the PDF file to a PDF compatible printer  to print out the PDF file.","Alternatively, in step , PDF server  re-spools the PDF file into a different format, e.g., Intelligent Printer Data Stream (IPDS). In step , PDF server  transmits the re-spooled document to non-PDF compatible printer  to print out the document.","It is noted that method  may include other and\/or additional steps that, for clarity, are not depicted. It is further noted that method  may be executed in a different order presented and that the order presented in the discussion of  is illustrative. It is further noted that certain steps in method  may be executed in a substantially simultaneous manner.","Although the method, system and computer program product are described in connection with several embodiments, it is not intended to be limited to the specific forms set forth herein, but on the contrary, it is intended to cover such alternatives, modifications and equivalents, as can be reasonably included within the spirit and scope of the invention as defined by the appended claims. It is noted that the headings are used only for organizational purposes and not meant to limit the scope of the description or claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["A better understanding of the present invention can be obtained when the following detailed description is considered in conjunction with the following drawings, in which:",{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 3"}]},"DETDESC":[{},{}]}
