---
title: Method and system for correcting sensor offsets
abstract: A control system () for an automotive vehicle () having a vehicle body includes a cluster () of vehicle dynamic sensors (), the output signals from the sensors (Yaw Rate Sensor, Roll Rate Sensor, Longitudinal Acceleration Sensor, Lateral Acceleration Sensor) are corrected for errors by removing the zero output DC bias. Such bias constitutes an error that may occur as a result of temperature changes, manufacturing defects, or other factors. The system () also compensates for the drift in the sensor output signals that occur during vehicle operation.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07085642&OS=07085642&RS=07085642
owner: Ford Global Technologies, LLC
number: 07085642
owner_city: Dearborn
owner_country: US
publication_date: 20030710
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["RELATED APPLICATIONS","TECHNICAL FIELD","BACKGROUND","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PRESENT INVENTION"],"p":["The present invention claims priority to provisional application No. 60\/401,417 filed on Aug. 5, 2002.","The present invention relates generally to a dynamic behavior control apparatus for an automotive vehicle, and more specifically, to a method and apparatus for correcting offsets in vehicle dynamic sensors.","Dynamic control systems for automotive vehicles have recently begun to be offered on various products. Typical dynamic control systems include sensors corresponding to various vehicle dynamics. Examples thereof include: a yaw rate sensor, a roll rate sensor, a longitudinal acceleration sensor, and a lateral acceleration sensor. Typical dynamic control systems also include a controller that receives the sensor signals and controls various safety and stability systems in response thereto.","During various different phases of vehicle operation, the aforementioned sensors tend to generate errors that may result in false signals received in the controller.","It would therefore be desirable to provide a correction or compensation system and method. The new system should not require additional sensors and should also not require shutting-down dynamic control sensors. The present invention is directed to these ends.","It is therefore an object of the invention to provide a system for correcting for offsets within vehicle dynamic sensors.","In one aspect of the invention, a sensor offset correction method for a vehicle includes generating a first offset correction signal for a vehicle dynamic sensor at a sensor power-up, generating a second offset correction signal for the vehicle dynamic sensor when the vehicle is moving, and correcting the vehicle dynamic sensor in response to the first offset correction signal and the second offset correction signal.","In a further aspect of the invention, a control system for an automotive vehicle having a vehicle body includes a cluster of vehicle dynamic sensors positioned within the vehicle body adapted to generate a plurality of vehicle dynamic signals.","The system may further include a controller adapted to receive the plurality of vehicle dynamic signals, generate a first offset correction signal for one of the cluster of the vehicle dynamic sensors in response to a DC bias and at a sensor power-up, generate a second offset correction signal for the one of the cluster of the vehicle dynamic sensors in response to a signal equivalent to a temperature drift signal and when the vehicle is moving, generate a third offset correction signal for the one of the cluster of the vehicle dynamic sensors when the vehicle is at rest and the one of the cluster of the vehicle dynamic sensors is below an accuracy threshold, and correct the one of the cluster of the vehicle dynamic sensors in response to the first offset correction signal, the second offset correction signal and the third offset correction signal.","One advantage of the invention is that readings from vehicle dynamic sensors are more accurate.","Other objects and features of the present invention will become apparent when viewed in light of the detailed description of the preferred embodiment when taken in conjunction with the attached drawings and appended claims.","In the following figures the same reference numerals are used to identify the same components.","Referring to , a control system  for an automotive vehicle  having a sensing system  (sensor cluster) and a controller , is illustrated. Various forces and moments are acting thereon during a rollover condition.","The vehicle control system  includes the sensor system . The sensing system  may use a six control sensor set including three axial accelerometers including a lateral accelerometer  (generating a lateral acceleration signal), a longitudinal accelerometer  (generating a longitudinal acceleration signal), and a vertical accelerometer  (generating a vertical acceleration signal) and three axial rotation rate detectors including a yaw rate sensor  (generating a yaw rate signal), a roll rate sensor  (generating a roll rate signal), and a pitch rate sensor  (generating a pitch signal). Of course, those skilled in the art will recognize that one or more sensors may not be included in the system .","The sensor system  further includes various other sensors, such as wheel speed sensors , a steering angle sensor  (hand-wheel sensor), and steering angle position sensors  (road-wheel sensors). As one skilled in the art will understand, the various sensors generate a plurality of vehicle dynamic signals. These are further described below.","The vehicle control system  may also include the controller . The controller  receives the plurality of vehicle dynamic signals and generates a first offset correction signal for one of the cluster  of the vehicle dynamic sensors (, , , or ) in response to a DC bias and at a sensor power-up. The controller  also generates a second offset correction signal for the one of the cluster  of the vehicle dynamic sensors (, , , or ) in response to a signal equivalent to a temperature drift signal and when the vehicle  is moving. The controller  further generates a third offset correction signal for the one of the cluster  of the vehicle dynamic sensors (, , , or ) when the vehicle  is at rest and the sensor is below an accuracy threshold. The controller  still further corrects the vehicle dynamic sensing system  in response to the first offset correction signal, the second offset correction signal and the third offset correction signal.","Based upon inputs from the sensor system , the controller  may control a safety device . Depending on the desired sensitivity of the system and various other factors, not all the sensors are used in a commercial embodiment. The safety device  may control an airbag  or a steering actuator or braking actuator at one or more of the wheels of the vehicle . Also, other vehicle components such as a suspension control  are used to adjust the suspension to prevent rollover. Suspension control  may include an anti-roll bar.","In this system , the output signals from the RSC sensors (Yaw Rate Sensor , Roll Rate Sensor , Longitudinal Acceleration Sensor , Lateral Acceleration Sensor ) are corrected for errors by removing the zero output DC bias. Such bias constitutes an error that may occur as a result of temperature changes, manufacturing defects, or other factors. This system  also compensates for the drift in the sensor output signals that can occur during vehicle operation.","In one embodiment, to reduce run time, calculations of the offset variables are not performed during Anti-Lock Brake (ABS), Active Yaw Control (AYC), Traction Control System (TCS), or Roll Stability Control (RSC) events. Runtime for the system  is highest during these events. The signals, however, are filtered and compensated during this time. Calculations of offset variables are also paused when the flag is set (one example of logic therefore includes: RSC_SENSORS_DISTURBED). This flag is set externally when the sensors are undergoing a self-test, the sensor values are too high, or the rate of change is higher than expected.","An example of logic therefore includes: If (ABS_CYCLE \u2225 AYC_CYCLE \u2225 RSC_CYCLE \u2225 TCS-CYCLE); (In generic terms, if ABS, AYC, TCS or RSC are active then the following logic runs.)","{offset_comp( )}; (This function compensates and filters out the signals from sensor.)","else {if(!SENSORS_DISTURBED) {offset_initializaton( ); (This function initializes the offset values.)","if (VEHICLE_STANDSTILL) (offset_resting( ); (When the vehicle  is standing still, this function is called.)","else {offset_signals( );} (When the vehicle  is moving, this function is called.)","{offset-comp( )} (This function compensates and filters out the signals from sensors.)","One example of offset compensation external inputs to the aforementioned logic includes:",{"@attributes":{"id":"p-0031","num":"0030"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"133pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"84pt","align":"left"}}],"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":["RSC Code Name","Logic Description Name"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"14pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"119pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"84pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["1.","Get_abs_cycle","ABS_CYCLE"]},{"entry":["2.","Get_ayc_in_cycle","AYC_CYCLE"]},{"entry":["3.","st_ROLL_FLAG.bf_bool_ACTIVE","RSC_CYCLE"]},{"entry":[{},"ROLL_CONTROL"]},{"entry":["4.","Get_tcs_engine_control_active","TCS_CYCLE"]},{"entry":["5.","RSC_SENSOR_BITS.RSC","RSC_SENSORS"]},{"entry":[{},"SENSORS_DISTURBED","DISTURBED"]},{"entry":["6.","ss_mps_REF_VELOCITY_YC","VEHICLE_SPEED"]},{"entry":["7.","Get_vehicle_standstill","VEHICLE_STANDSTILL"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}}},"There are three phases of operation occurring within the controller : 1) Initialization, normally occurring at electric power-on of the vehicle ; 2) Resting, occurring whenever the vehicle  is not in motion; and 3) Dynamic, occurring when the vehicle  is in motion.","Referring to , a logic flow diagram  of a method for compensating for offset errors in vehicle dynamic sensors (, , , or ) is illustrated. Logic starts in operation block  where a first offset correction signal or initialization for a vehicle dynamic sensor (, , , or ) is generated at a sensor power-up.","Initialization of Roll Rate or roll rate signal and Yaw Rate or yaw rate signal occurs when the vehicle ignition key is turned on or electrical power is otherwise supplied to the vehicle systems. INITIALIZATION_COMPLETE indicates a flag is set at the end of initialization. Initialization eliminates initial D.C. bias that is present at the initialization.","If the vehicle  is standing still when the ignition is turned on, the offsets are computed such that the filtered roll rate and yaw rate is approximately zero deg\/sec. Other vehicle movement checks when standing still, such as rolling or turning, are also performed. Initialization continues until the initialization timer reaches, for example, one second. If the vehicle  starts moving before initialization is complete, the average of the maximum and minimum offset values (that have been calculated over a long time period, such as the entire operating time of the vehicle ) are computed and used as the initial offset values.","In one embodiment, the average of the yaw rate and roll rate is limited to between, for example, +\u22123.5 deg\/sec, because the sensor specification defines the +\u22123.5 deg\/sec example as the worst case zero point offset for the rate sensors.","Initialization occurs when the vehicle ignition is turned on, or electrical power is otherwise supplied to the vehicle systems. If the vehicle  is standing still when the ignition is turned on, then the offsets are computed such that the filtered Ax (Longitudinal Acceleration) and Ay (Lateral Acceleration) values are approximately equal to the Ax and Ay values that existed and were written to the controller EEPROM  (Electrically Erasable Programmable Read-Only Memory) when power was removed from the system  at the end of the previous driving cycle.","If the vehicle  was not standing still when the previous EEPROM  write occurred or an EEPROM  write did not occur during the last ignition off, then the offsets is computed by taking the average of the maximum and minimum value. The system assumes that the geographical location of the vehicle  has not been changed since the vehicle  has been shut off. Also to minimize error if the vehicle  has been moved during an ignition off, the Ax and Ay offset calculations are limited to within the boundaries of maximum and minimum values from EEPROM .","An example of initialization logic includes:",{"@attributes":{"id":"p-0040","num":"0039"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\u2003If\u2003\u2003((VehicleStandStill)&& \u2003!(INIT_FLAG \u2003&"]},{"entry":[{},"INITIALIZATION_COMPLETE){if \u2003((RollAcceleration \u2003<="]},{"entry":[{},"VEHICLE_STAND_STILL_ROLL_ACC)&&"]},{"entry":[{},"(YawAcceleration \u2003<="]},{"entry":[{},"VEHICLE_STAND_STILL_YAW_ACC));"]},{"entry":[{},"\u2003\u2003{if \u2003\u2003(!(RSC_SENSORS_DISTURBED))"]},{"entry":[{},"\u2003{RollRateOffset \u2003+= \u2003FilteredRollRate \u2003\/"]},{"entry":[{},"InitializationTimer;"]},{"entry":[{},"\u2003\u2003YawRateOffset \u2003+= \u2003FilteredYawRate \u2003\/"]},{"entry":[{},"InitializationTimer;"]},{"entry":[{},"\u2003\u2003InitializationTimer ++;}"]},{"entry":[{},"\u2003\u2003If \u2003(InitializationTimer \u2003>= \u2003ONE_SEC_UP)"]},{"entry":[{},"\u2003{INIT_FLAG |= INITIALIZATION_COMPLETE;}}"]},{"entry":[{},"\u2003\u2003Else"]},{"entry":[{},"\u2003\u2003{InitializationTimer = 0;\u2003\/* Restart the"]},{"entry":[{},"initialization *\/}}"]},{"entry":[{},"\u2003\u2003else"]},{"entry":[{},"\u2003\u2003{RollRateOffset \u2003= \u2003LIMIT(+\u22123.5 deg\/sec,"]},{"entry":[{},"(MAX_RR_OFST_EE + MIN_RR_OFST_EE)\/2);"]},{"entry":[{},"\u2003\u2003YawRateOffset \u2003= \u2003LIMIT(+\u22123.5 deg\/sec,"]},{"entry":[{},"(MAX_YR_OFST_EE + MIN_YR_OFST_EE)\/2);"]},{"entry":[{},"\u2003\u2003INIT_FLAG |= INITIALIZATION_COMPLETE;}"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"For the aforementioned logic, one example of offset initialization external inputs includes:",{"@attributes":{"id":"p-0042","num":"0041"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"112pt","align":"left"}}],"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":["RSC Code Name","Logic Description Name"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"14pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"140pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"112pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["8.","Get_vehicle_standstill(): A","VehicleStandStill"]},{"entry":[{},"macro to determine if the vehicle is"]},{"entry":[{},"standing still"]},{"entry":["9.","ss_mpss_LONG_ACC: Raw","RawAx"]},{"entry":[{},"Longitudinal Acceleration"]},{"entry":["10.","ss_mpss_LAT_ACC: Raw Lateral","RawAy"]},{"entry":[{},"Acceleration"]},{"entry":["11.","ss_dps_FLT_ROLL_RATE: Filtered","FilteredRollRate"]},{"entry":[{},"and compensated roll rate."]},{"entry":["12.","ss_dps_FLT_YAW_RATE: Filtered","FilteredYawRate"]},{"entry":[{},"and compensated yaw rate."]},{"entry":["13.","ROLL_ACCELERATION2: Roll Rate","RollAcceleration"]},{"entry":[{},"Acceleration."]},{"entry":["14.","YAW_ACCELERATION2: Yaw Rate","YawAcceleration"]},{"entry":[{},"Acceleration."]},{"entry":["15.","RSC_SENSOR_CALIBRATION_VALUES","MAX_RR_OFFSET_EE"]},{"entry":[{},"[Rr_ofst_max]: Roll rate maximum"]},{"entry":[{},"value from EEPROM (over a long time"]},{"entry":[{},"period, such as total operating time"]},{"entry":[{},"of the vehicle)"]},{"entry":["16.","RSC_SENSOR_CALIBRATION_VALUES","MIN_RR_OFFSET_EE"]},{"entry":[{},"[Rr_ofst_min]: Roll rate minimum"]},{"entry":[{},"value from EEPROM (over a long time"]},{"entry":[{},"period, such as total operating time"]},{"entry":[{},"of the vehicle)"]},{"entry":["17.","RSC_SENSOR_CALIBRATION_VALUES","MAX_YR_OFFSET_EE"]},{"entry":[{},"[Yr_ofst_max]: Yaw rate maximum"]},{"entry":[{},"value from EEPROM (over a long time"]},{"entry":[{},"period, such as total operating time"]},{"entry":[{},"of the vehicle)"]},{"entry":["18.","RSC_SENSOR_CALIBRATION_VALUES","MIN_YR_OFFSET_EE"]},{"entry":[{},"[Yr_ofst_min]: Yaw rate minimum"]},{"entry":[{},"value from EEPROM (over a long time"]},{"entry":[{},"period, such as total operating time"]},{"entry":[{},"of the vehicle)"]},{"entry":["19.","RSC_SENSOR_CALIBRATION_VALUES","MAX_AX_OFFSET_EE"]},{"entry":[{},"[Along_ofst_max]: Longitudinal"]},{"entry":[{},"Acceleration maximum value from"]},{"entry":[{},"EEPROM (over a long time period,"]},{"entry":[{},"such as total operating time of the"]},{"entry":[{},"vehicle)"]},{"entry":["20.","RSC_SENSOR_CALIBRATION_VALUES","MIN_AX_OFFSET_EE"]},{"entry":[{},"[Along_ofst_min]: Longitudinal"]},{"entry":[{},"Acceleration minimum value from"]},{"entry":[{},"EEPROM (over a long time period,"]},{"entry":[{},"such as total operating time of the"]},{"entry":[{},"vehicle)"]},{"entry":["21.","RSC_SENSOR_CALIBRATION_VALUES","MAX_AY_OFFSET_EE"]},{"entry":[{},"[Alat_ofst_max]: Lateral"]},{"entry":[{},"Acceleration maximum value from"]},{"entry":[{},"EEPROM (over a long time period,"]},{"entry":[{},"such as total operating time of the"]},{"entry":[{},"vehicle)"]},{"entry":["22.","RSC_SENSOR_CALIBRATION_VALUES","MIN_AY_OFFSET_EE"]},{"entry":[{},"[Alat_ofst_min]: Lateral"]},{"entry":[{},"Acceleration minimum value from"]},{"entry":[{},"EEPROM (over a long time period,"]},{"entry":[{},"such as total operating time of the"]},{"entry":[{},"vehicle)"]},{"entry":["23.","RSC_SENSOR_CALIBRATION_VALUES","AxEE"]},{"entry":[{},"[Long_acc]: Longitudinal"]},{"entry":[{},"Acceleration stored in EEPROM from"]},{"entry":[{},"the previous ignition cycle"]},{"entry":["24.","RSC_SENSOR_CALIBRATION_VALUES","AyEE"]},{"entry":[{},"[Lat_acc]: Lateral Acceleration"]},{"entry":[{},"stored in EEPROM from the previous"]},{"entry":[{},"ignition cycle"]},{"entry":["25.","Get_rsc_eeprom_var_bit(VEHICLE","Vehicle_was_standing_still"]},{"entry":[{},"STAND_STILL): A macro to determine","during_last_ignition"]},{"entry":[{},"from EEPROM if vehicle was standing","off"]},{"entry":[{},"still last time the EEPROM write was"]},{"entry":[{},"made."]},{"entry":["26.","Get_rsc_eeprom_var_bit(NO_EEPROM","An_EEPROM_write_was_made"]},{"entry":[{},"STORAGE_RSC): A macro to determine","during_last_ignition"]},{"entry":[{},"from EEPROM if an EEPROM write is made","off"]},{"entry":[{},"in the last ignition cycle."]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}}},"One example of offset initialization outputs include:",{"@attributes":{"id":"p-0044","num":"0043"},"tables":{"@attributes":{"id":"TABLE-US-00004","num":"00004"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"147pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"70pt","align":"left"}}],"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":[{},"Logic Description"]},{"entry":["RSC Code Name","Name"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"14pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"133pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"70pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["1.","ss_mpss_LAT_ACC_OFFSET","AxOffset"]},{"entry":["2.","ss_mpss_LONG_ACC_OFFSET","AyOffset"]},{"entry":["3.","ss_mpss_ROLL_RATE_OFFSET","RollRateOffset"]},{"entry":["4.","ss_mpss_YAW_RATE_OFFSET","YawRateOffset"]},{"entry":["5.","ss_mpss_ROLL_RATE_OFFSET_INIT:","InitialRollRateOffset"]},{"entry":[{},"The initial value of roll rate offset."]},{"entry":["6.","ss_mpss_YAW_RATE_INIT: The initial","InitialYawRate"]},{"entry":[{},"value of filtered and compensated yaw"]},{"entry":[{},"rate."]},{"entry":["7.","Clr_rsc_eeprom_var_bit(NO_EEPROM"]},{"entry":[{},"STORAGE_LAST_CYCLE): A macro that"]},{"entry":[{},"clears the specified bit in shadow"]},{"entry":[{},"EEPROM."]},{"entry":["8.","bf_uc_INITIALIZATION_STATUS: Flags","INITIALIZATION"]},{"entry":[{},"set during initialization","COMPLETE"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}}},"Offset initialization parameters include: rr_ofst_eep_max, which is the maximum limit that the roll rate offset can be; yr_ofst_eep_max, which is the maximum limit that the yaw rate offset can be; along_ofst_eep_max, which is the maximum limit that the longitudinal acceleration offset can be; alat_ofst_eep_max, which is the maximum limit that the lateral acceleration offset can be.","One example of offset initialization state variables includes: bf_uc_initialization_status, which is an initialization flag for checking initialization condition status, and ss_tim_initialization_timer, which sets a start time for the initialization timer.","In one embodiment of the present invention, if the vehicle  starts moving before the initialization completes, a flag is set, and an initial value of the Ax and Ay offsets is computed by taking the maximum and minimum offsets values from EEPROM . When the initial value is calculated by taking the average of the maximum and the minimum value, it is always limited to, for example, +\u22121.5 m\/sec^2 for the acceleration sensors, because the acceleration sensors should not experience the worst case zero point offset of greater than, for example, 0.11 g. An example of logic therefore includes:",{"@attributes":{"id":"p-0048","num":"0047"},"tables":{"@attributes":{"id":"TABLE-US-00005","num":"00005"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"\u2003If ((VehicleStandStill)"},{"entry":"\u2003&&!(INIT_FLAG \u2003&\u2003INITIALIZATION_COMPLETE)"},{"entry":"\u2003&&(Vehicle_was_standing_still_during_last_ignitio"},{"entry":"n_off)&&(An_EEPROM_write_was_made_during_last_ignition"},{"entry":"_off))"},{"entry":"\u2003{if((RollAcceleration<=VEHICLE_STAND_STILL_ROLL_A"},{"entry":"CC)"},{"entry":"\u2003&&\u2003\u2003(YawAcceleration\u2003\u2003<="},{"entry":"VEHICLE_STAND_STILL_YAW_ACC))"},{"entry":"\u2003{if (!(RSC_SENSORS_DISTURBED))"},{"entry":"\u2003{AxOffset \u2002+=\u2002 (RawAx \u2212 AxEE) * LOOP_TIME_SEC;"},{"entry":"\u2003AyOffset \u2002+=\u2002 (RawAy\u2002\u2212\u2002 AyEE)\u2002*\u2002LOOP_TIME_SEC;"},{"entry":"\u2003AxOffset \u2002=\u2002 max\u2003(MIN_AX_OFST_EE,\u2003AxOffset);"},{"entry":"\u2003AxOffset \u2002=\u2002 min \u2003(MAX_AX_OFST_EE,\u2003AxOffset);"},{"entry":"\u2003AyOffset \u2002=\u2002 max\u2003(MIN_AY_OFST_EE,\u2003AyOffset);"},{"entry":"\u2003AyOffset \u2002=\u2002 min\u2003(MAX_AY_OFST_EE,\u2003AyOffset);"},{"entry":"\u2003InitializationTimer ++;}"},{"entry":"\u2003If (InitializationTimer >= ONE_SEC_UP)"},{"entry":"{INIT_FLAG \u2002|=\u2002 INITIALIZATION_COMPLETE;}}; an initial"},{"entry":"value of the Ax and Ay offsets is computed by taking"},{"entry":"the maximum and minimum offsets values from EEPROM 47."},{"entry":"\u2003else"},{"entry":"\u2003{InitializationTimer = 0;\u2003\/*\u2003Restart \u2003the"},{"entry":"initialization *\/}}"},{"entry":"\u2003else{AxOffset \u2003=\u2003 LIMIT(+\u2212"},{"entry":"1.5 m\/sec{circumflex over (\u2009)}2, (MAX_AX_OFST_EE \u2003+\u2003MIN_AX_OFST_EE\u2003)\/2);"},{"entry":"limits the Ax offset max and min to 1.5 m\/sec{circumflex over (\u2009)}2."},{"entry":"\u2003AyOffset = LIMIT(+\u22121.5 m\/sec{circumflex over (\u2009)}2, (MAX_AY_OFST_EE +"},{"entry":"MIN_AY_OFST_EE)\/2); limits the Ay offset max and min"},{"entry":"to 1.5 m\/sec{circumflex over (\u2009)}2."},{"entry":"\u2003INIT_FLAG |= INITIALIZATION_COMPLETE;}"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"In operation block , a second offset correction signal is generated for the vehicle dynamic sensor (, , , or ) when the vehicle  is moving. The second offset signal deals with moving conditions of the vehicle. Embodiments thereof are discussed below.","If the vehicle  is turning continuously for a given time period (15 seconds is used in this example) in one direction, offset compensation may be paused for yaw rate, roll rate, and Ay. If the vehicle  is turning continuously to the right hand side, a negative turn flag is set and if it is turning to the left hand side, a positive turning flag is set. Logic to illustrate this includes:",{"@attributes":{"id":"p-0051","num":"0050"},"tables":{"@attributes":{"id":"TABLE-US-00006","num":"00006"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"\u2003If \u2003((FltYawRate \u2003<\u20030\u2003&&\u2003SWA\u2003<\u2003RIGHT_TURN)"},{"entry":"\u2003{POS_TURNING_COUNTER \u2212= 2;"},{"entry":"\u2003NEG_TURNING_COUNTER ++;"},{"entry":"\u2003POS_TURNING_COUTNER = min (POS_TURNING_COUNTER,"},{"entry":"MAX_COUNT_VALUE);"},{"entry":"\u2003NEG_TURNING_COUNTER = max (NEG_TURNING"},{"entry":"\u2003COUNTER,"},{"entry":"MIN_COUNT_VALUE);"},{"entry":"\u2003If (TURNING_TIME < NEG_TURNING_COUNTER)"},{"entry":"\u2003SET_SUSTAINED_NEG_TURNING_15SEC;"},{"entry":"\u2003Else"},{"entry":"\u2003{If (POS_TURNING_COUNTER <= TURNING_TIME)"},{"entry":"\u2003CLEAR_SUSTAINED_POS_TURNING_15SEC;"},{"entry":"\u2003CLEAR_SUSTAINED_NEG_TURNING_15SEC;}}"},{"entry":"\u2003If ((FltYawRate > 0 && SWA > LEFT_TURN)"},{"entry":"\u2003{NEG_TURNING_COUNTER \u2212= 2;"},{"entry":"\u2003POS_TURNING_COUNTER ++;"},{"entry":"\u2003NEG_TURNING_COUTNER = min (NEG_TURNING_COUNTER,"},{"entry":"MAX_COUNT_VALUE);"},{"entry":"\u2003POS_TURNING_COUNTER = max (POS_TURNING_COUNTER,"},{"entry":"MIN_COUNT_VALUE);"},{"entry":"\u2003If (TURNING_TIME < POS_TURNING_COUNTER)"},{"entry":"\u2003SET_SUSTAINED_POS_TURNING_15SEC;"},{"entry":"\u2003Else{If(NEG_TURNING_COUNTER<= TURNING_TIME)"},{"entry":"\u2003CLEAR_SUSTAINED_NEG_TURNING_15SEC;"},{"entry":"\u2003CLEAR_SUSTAINED_POS_TURNING_15SEC;}}"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"To clarify the aforementioned logic, an example of dynamic offset external inputs includes:","An example of dynamic offset variables includes:",{"@attributes":{"id":"p-0054","num":"0053"},"tables":{"@attributes":{"id":"TABLE-US-00007","num":"00007"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"56pt","align":"left"}}],"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":[{},"Logic"]},{"entry":["RSC Code Name","Description Name"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"133pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"56pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["1.","Get_vehicle_standstill()",{}]},{"entry":["2.","bf_uc_INITIALIZATION_STATUS"]},{"entry":["3.","ss_deg_STEERING_WHEEL_ANGLE"]},{"entry":["4.","Get_ayc_reverse_det_possible()"]},{"entry":["5.","ss_dps_FLT_YAW_RATE","FltYawRate"]},{"entry":["6.","ss_deg_PITCH_ANGLE_ESTIMATE","PitchAngleEst"]},{"entry":["7.","ss_deg_PITCH_OFFSET_ESTIMATE","PitchOffset"]},{"entry":["8.","ss_deg_REL_PITCH_ANGLE","PitchRelative"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}}},"An example of dynamic offset outputs includes:",{"@attributes":{"id":"p-0056","num":"0055"},"tables":{"@attributes":{"id":"TABLE-US-00008","num":"00008"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"56pt","align":"left"}}],"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":[{},"Logic Description"]},{"entry":["RSC Code Name","Name"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"119pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"56pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["1.","ss_dps_ROLL_RATE_OFFSET","RollRateOffset"]},{"entry":["2.","ss_dps_YAW_RATE_OFFSET","YawRateOffset"]},{"entry":["3.","ss_dps_LONG_ACC_OFFSET","AxOffset"]},{"entry":["4.","ss_dps_LAT_ACC_OFFSET","AyOffset"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}}},"One embodiment of dynamic offset parameters includes: TURNING_TIME; MAX_COUNT_VALUE; MIN_COUNT_VALUE; Rr_ofst_eep_max; Yr_ofst_eep_max; Alat_ofst_eep_max; Along_ofst_eep_max; and p_LOOP_TIME_SEC.","Under most normal driving circumstances, the average yaw rate and the average roll rate should be close to zero over a long period of time. Any time a non-zero value is detected for the yaw rate and\/or roll rate, they are compensated for continuously by a very small amount, which is equal to the maximum temperature drift rate for the signal.","Over a long period of time, the average road bank angle is considered to be zero. Any time a non-zero value is detected, lateral acceleration offset is adjusted in the controller  such that lateral acceleration will drive road bank angle to zero.","Over a long period of time, the average road pitch angle is considered to be zero. Any time a non-zero value is detected, longitudinal acceleration offset is adjusted in the controller  such that longitudinal acceleration will drive pitch angle to zero. Road pitch angle is calculated by taking the current pitch angle estimate and then subtracting the relative pitch angle and the pitch angle offset. Logic to illustrate this includes:","RoadPitchEst=PitchAngleEst\u2212PitchOffset\u2212PitchRelative;",{"@attributes":{"id":"p-0062","num":"0061"},"tables":{"@attributes":{"id":"TABLE-US-00009","num":"00009"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\u2003If \u2003(RoadPitchEst \u2003>\u20030)\u2003AxOffset \u2003\u2212="]},{"entry":[{},"MAX_AX_DRIFT_RATE;"]},{"entry":[{},"\u2003Else if (RoadPitchEst < 0)"]},{"entry":[{},"\u2003AxOffset += MAX_AX_DRIFT_RATE;"]},{"entry":[{},"\u2003If (!(GET_SUSTAINED_POS_TURNING_15SEC))"]},{"entry":[{},"\u2003{if (FltYawRate > 0)"]},{"entry":[{},"\u2003YawRateOffset += MAX_YR_DRIFT_RATE;"]},{"entry":[{},"\u2003If (!(GET_SUSTAINED_NEG_TURNING_15SEC))"]},{"entry":[{},"\u2003{if (RollRate > 0)\u2003\u2003RollRateOffset \u2003+="]},{"entry":[{},"MAX_RR_DRIFT_RATE;}"]},{"entry":[{},"\u2003if \u2003(InstBankAngleEstimate \u2003<\u20035\u2003&&"]},{"entry":[{},"InstBankAngleEstimate > 0)"]},{"entry":[{},"\u2003AyOffset += MAX_AY_DRIFT_RATE;}"]},{"entry":[{},"\u2003if (!(GET_SUSTAINED_NEG_TURNING_15SEC))"]},{"entry":[{},"\u2003{if (FltYawRate < 0)"]},{"entry":[{},"\u2003YawRateOffset \u2212= MAX_YR_DRIFT_RATE;"]},{"entry":[{},"\u2003If (!(GET_SUSTAINED_POS_TURNING_15SEC))"]},{"entry":[{},"\u2003{if (RollRate < 0)"]},{"entry":[{},"\u2003RollRateOffset \u2212= MAX_RR_DRIFT_RATE;}"]},{"entry":[{},"\u2003if \u2003(InstBankAnbleEstimate \u2003>\u2003\u22125\u2003&&"]},{"entry":[{},"InstBankAngleEstimate < 0)"]},{"entry":[{},"\u2003AyOffset \u2212= MAX_AY_DRIFT_RATE;"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"In operation block , a third offset correction signal is generated for a vehicle dynamic sensor when the vehicle  is at rest. Embodiments thereof are included below.","An example of offset resting external inputs includes:",{"@attributes":{"id":"p-0065","num":"0064"},"tables":{"@attributes":{"id":"TABLE-US-00010","num":"00010"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"147pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"70pt","align":"left"}}],"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":[{},"Logic"]},{"entry":["RSC Code Name","Description Name"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"14pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"133pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"70pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["1.","bf_uc_INITIALIZATION","INITIALIZATION"]},{"entry":[{},"STATUS:","COMPLETE"]},{"entry":[{},"Flag to determine if initialization"]},{"entry":[{},"is completed"]},{"entry":["2.","ss_dps_ROLL_ACCELERATION2:","RollAcceleration"]},{"entry":[{},"Roll Acceleration"]},{"entry":["3.","ss_dps_YAW_ACCELERATION2: Yaw","YawAcceleration"]},{"entry":[{},"acceleration"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}}},"An example of offset resting state variables includes:",{"@attributes":{"id":"p-0067","num":"0066"},"tables":{"@attributes":{"id":"TABLE-US-00011","num":"00011"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"147pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"70pt","align":"left"}}],"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":[{},"Logic"]},{"entry":["RSC Code Name","Description Name"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"14pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"133pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"70pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["1.","ss_dps_FLT_YR_COMP_REST:",{}]},{"entry":[{},"Filtered and compensated resting yaw"]},{"entry":[{},"rate"]},{"entry":["2.","ss_dps_RESTING_YR_OFFSET:","RestingYROffset"]},{"entry":[{},"Resting slow drifting offset."]},{"entry":["3.","bf_uc_OFFSET_FLAG: Flags that","VEHICLE"]},{"entry":[{},"are set during resting","STOPPED"]},{"entry":[{},{},"FOR_ONE_SEC"]},{"entry":["4.","ss_mpss_FLT_LONG_ACC_RESTING:","HOLD_RESTING"]},{"entry":[{},"Initial resting longitudinal","VALUES"]},{"entry":[{},"acceleration"]},{"entry":["5.","ss_mpss_FLT_LAT_ACC_RESTING:","FltAyResting"]},{"entry":[{},"Initial resting lateral acceleration"]},{"entry":["6.","ss_RESTING_UPDATE_CLOCK: Clock","FltAxResting"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}}},"An example of offset resting outputs includes:",{"@attributes":{"id":"p-0069","num":"0068"},"tables":{"@attributes":{"id":"TABLE-US-00012","num":"00012"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"56pt","align":"left"}}],"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":[{},"Logic"]},{"entry":["RSC Code Name","Description Name"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"14pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"147pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"56pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["1.","CLEAR_SUSTAINED_POS_TURNING_",{}]},{"entry":[{},"15SEC: Clear the continuous 15"]},{"entry":[{},"second turn counter"]},{"entry":["2.","CLEAR_SUSTAINED_NEG_TURNING_"]},{"entry":[{},"15SEC: Clear the continuous 15"]},{"entry":[{},"second turn counter"]},{"entry":["3.","ss_dps_YAW_RATE_OFFSET","YawRateOffset"]},{"entry":["4.","ss_dps_ROLL_RATE_OFFSET","RollRateOffset"]},{"entry":["5.","ss_dps_LONG_ACC_OFFSET","AxOffset"]},{"entry":["6.","ss_dps_LAT_ACC_OFFSET","AyOffset"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}}},"An example of offset resting parameters includes: 1. Yr_ofst_eep_max; 2. ALLOWED_RESTING_ROLL_ACC: Acceleration that is allowed when standing still; 3. ALLOWED_RESTING_YAW_ACC: Acceleration that is allowed when standing still.","After the vehicle  comes to a complete stop, to ensure that no transient signals (such as may be caused by the vehicle  rocking, bouncing, or swaying on its suspension) are received in the controller , the controller  waits, for example, an additional second. An example of logic thereof includes:",{"@attributes":{"id":"p-0072","num":"0071"},"tables":{"@attributes":{"id":"TABLE-US-00013","num":"00013"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"\u2003If ((INIT_FLAG & INITIALIZATION_COMPLETE)"},{"entry":"\u2003&& (!(RSC_SENSORS_DISTURBED)))"},{"entry":"\u2003{if \u2003\u2002( \u2003\u2002!( \u2003\u2002OFFSET_FLAG \u2003\u2002&"},{"entry":"VEHICLE_STOPPED_FOR_ONE_SEC)"},{"entry":"\u2003{RESTING_UPDATE_CLOCK ++;"},{"entry":"\u2003If \u2003(RESTING_UPDATE_CLOCK \u2003>=\u2003ONE_SEC_UP)"},{"entry":"\u2003OFFSET_FLAG|= VEHICLE_STOPPED_FOR_ONE_SEC}}"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"An average value for filtered lateral acceleration (Ax) and longitudinal acceleration (Ay) for a period of 1 second is generated after the vehicle  has come to a stop. These values are used to compute the Ax and Ay offsets during standing still. Any drifts in Ax and Ay are considered to be due to sensor drifts and is compensated for by applying the appropriate offset. An example of logic and inputs therefore follow.","One example of filtering and compensation external inputs includes:",{"@attributes":{"id":"p-0075","num":"0074"},"tables":{"@attributes":{"id":"TABLE-US-00014","num":"00014"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"56pt","align":"left"}}],"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":[{},"Logic"]},{"entry":["RSC Code Name","Description Name"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"35pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"126pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"56pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["1.","Get_vehicle_standstill()",{}]},{"entry":["2.","bf_uc_INITIALIZATION_STATUS"]},{"entry":["3.","ss_dps_YAW_RATE","RawYawRate"]},{"entry":["4.","ss_dps_ROLL_RATE","RawRollRate"]},{"entry":["5.","ss_mpss_LONG_ACC","RawAx"]},{"entry":["6.","ss_mpss_LAT_ACC","RawAy"]},{"entry":["7.","ss_mpss_YAW_RATE_OFFSET","YawRateOffset"]},{"entry":["8.","ss_mpss_ROLL_RATE_OFFSET","RollRateOffset"]},{"entry":["9.","ss_mpss_LONG_ACC_OFFSET","AxOffset"]},{"entry":["10.","ss_mpss_LAT_ACC_OFFSET","AyOffset"]},{"entry":["11.","ss_dps_FLT_ROLL_RATE","FltRollRate"]},{"entry":["12.","ss_dps_FLT_YAW_RATE","FltYawRate"]},{"entry":["13.","ss_mpss_FLT_LONG_ACC","FltAx"]},{"entry":["14.","ss_mpss_FLT_LAT_ACC","FltAy"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}}},"One example of filtering and compensation state variables includes:",{"@attributes":{"id":"p-0077","num":"0076"},"tables":{"@attributes":{"id":"TABLE-US-00015","num":"00015"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"147pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"70pt","align":"left"}}],"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":[{},"Logic"]},{"entry":["RSC Code Name","Description Name"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"14pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"133pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"70pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["1.","uc_LONG_TERM_COMP_UPDATE",{}]},{"entry":[{},"CLOCK"]},{"entry":["2.","ss_dps_YR_COMP_UNFLT","RawYawRate"]},{"entry":["3.","ss_dps_RR_COMP_UNFLT","RawRollRate"]},{"entry":["4.","ss_dps_AX_COMP_UNFLT","RawAx"]},{"entry":["5.","ss_dps_AY_COMP_UNFLT","RawAy"]},{"entry":["6.","uc_RR_POS_CNTR","RR_POS_CNTR"]},{"entry":["7.","uc_RR_NEG_CNTR","RR_NEG_CNTR"]},{"entry":["8.","uc_YR_POS_CNTR","YR_POS_CNTR"]},{"entry":["9.","uc_YR_NEG_CNTR","YR_NEG_CNTR"]},{"entry":["10.","uc_AX_POS_CNTR","AX_POS_CNTR"]},{"entry":["11.","uc_AX_NEG_CNTR","AX_NEG_CNTR"]},{"entry":["12.","uc_AY_POS_CNTR","AY_POS_CNTR"]},{"entry":["13.","uc_AY_NEG_CNTR","AY_NEG_CNTR"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}}},"One example of filtering and compensation outputs includes:",{"@attributes":{"id":"p-0079","num":"0078"},"tables":{"@attributes":{"id":"TABLE-US-00016","num":"00016"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"112pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"91pt","align":"left"}}],"thead":{"row":[{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]},{"entry":[{},"RSC Code Name","Logic Description Name"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"1. bf_uc_OFFSET_FLAG",{}]},{"entry":[{},"2. ss_dps_FLT_ROLL_RATE","FltRollRate"]},{"entry":[{},"3. ss_dps_FLT_YAW_RATE","FltYawRate"]},{"entry":[{},"4. ss_mpss_FLT_LONG_ACC","FltAx"]},{"entry":[{},"5. ss_mpss_FLT_LAT_ACC","FltAy"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}}}},"One example of filtering and compensation parameters includes: RR_MAX_LOOP; RR_DECR_CNTR; YR_MAX_LOOP; YR_DECR_CNTR; AX_MAX_LOOP; AX_DECR_CNTR; AY_MAX_LOOP; and AY_DECR_CNTR.","Filtering and compensation logic includes the computed values of the offsets taken out from the raw value before they are filtered. Therefore: RawRollRate\u2212=RollRateOffset; RawYawRate\u2212=YawRateOffset; RawAx\u2212=AxOffset; and RawAy\u2212=AyOffset.","An embodiment of logic for generating offsets during standing still includes:",{"@attributes":{"id":"p-0083","num":"0082"},"tables":{"@attributes":{"id":"TABLE-US-00017","num":"00017"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"\u2003if ((OFFSET_FLAG & VEHICLE_STOPPED_FOR_ONE_SEC)"},{"entry":"\u2003&&\u2003!\u2003(OFFSET_FLAG \u2003&\u2003HOLD_RESTING_VALUES))"},{"entry":"\u2003{FltAxResting = ((FltAxResting * TempCounter) +"},{"entry":"FltAx) \/ (TempCounter + 1);"},{"entry":"\u2003FltAyResting = ((FltAyResting * TempCounter) +"},{"entry":"FltAy) \/ (TempCounter + 1);"},{"entry":"\u2003TempCounter ++;"},{"entry":"\u2003If (TempCounter >= ONE_SEC_UP)"},{"entry":"OFFSET_FLAG |= HOLD_RESTING_VALUES;}"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"If any vehicle rolling motions or change in yaw is picked up when stopped, VEHICLE_STOPPED_FOR_ONE_SEC and HOLD_RESTING_VALUES flags is unset. Resting Ax and Ay values (step ) is re-computed after this. Logic therefore includes:",{"@attributes":{"id":"p-0085","num":"0084"},"tables":{"@attributes":{"id":"TABLE-US-00018","num":"00018"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"\u2003If (INIT_FLAG & INITIALIZATION_COMPLETE)"},{"entry":"\u2003{if\u2003\u2002\u2003((\u2003\u2002\u2003RollAcceleration\u2003\u2002\u2003<="},{"entry":"VEHICLE_STAND_STILL_ROLL_ACC)"},{"entry":"\u2003&&\u2003\u2003\u2002(YawAcceleration\u2003\u2002\u2003<="},{"entry":"VEHICLE_STAND_STILL_YAW_ACC))"},{"entry":"\u2003{OFFSET_FLAG &= ~VEHICLE_STOPPED_FOR_ONE_SEC"},{"entry":"\u2003OFFSET_FLAG &= ~HOLD_RESTING_VALUES;}}"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"Any changes in lateral acceleration and longitudinal acceleration are assumed to be due to sensor drifts when the vehicle  is at a standstill. Logic to illustrate this includes:",{"@attributes":{"id":"p-0087","num":"0086"},"tables":{"@attributes":{"id":"TABLE-US-00019","num":"00019"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"If ((VEHICLE_STOPPED_FOR_ONE_SEC)"},{"entry":"&& (HOLD_RESTING_VALUES)"},{"entry":"&& (ROLL_ACCELERATION < ALLOWED_RESTING_ROLL"},{"entry":"ACC)"},{"entry":"&& (YAW_ACCELERATION < ALLOWED_RESTING_YAW"},{"entry":"ACC))"},{"entry":"{if (FltAx > FltAxResting)"},{"entry":"FltAxOffset += MAX_AX_DRIFT_RATE;"},{"entry":"Else if (FltAx < FltAxResting)"},{"entry":"FltAxOffset \u2212= MAX_AX_DRIFT_RATE;"},{"entry":"if (FltAy > FltAyResting)"},{"entry":"FltAyOffset += MAX_AY_DRIFT_RATE;"},{"entry":"Else if (FltAy < FltAyResting)"},{"entry":"FltAyOffset \u2212= MAX_AY_DRIFT_RATE;}"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"During a vehicle standstill, offset compensation is performed within the controller  such that the filtered roll and yaw rate is zero. Logic to illustrate this includes:",{"@attributes":{"id":"p-0089","num":"0088"},"tables":{"@attributes":{"id":"TABLE-US-00020","num":"00020"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"If (VEHICLE_STOPPED_FOR_ONE_SEC)"},{"entry":"{Temp \u2003=\u2003RESTING_TIME_CONSTANT \u2003\/\u2003LOOP_TIME;"},{"entry":"RollRateOffset \u2003+=\u2003FltRollRate\u2003* \u2003Temp;"},{"entry":"YawRateOffset += FltYawRate * Temp;}"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"If the vehicle  is turned while standing still, like when the vehicle  is stopped\/parked on a turntable of a parking facility (referred to as a turntable event), the offset compensation is held constant until the turning is completed by calculating a resting yaw rate compensation value while the vehicle  is standing still. No fast compensation is performed while the vehicle  is standing still for the resting yaw rate. If this value exceeds a threshold, offset compensation is paused until it is below the threshold. Logic to illustrate this includes:",{"@attributes":{"id":"p-0091","num":"0090"},"tables":{"@attributes":{"id":"TABLE-US-00021","num":"00021"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"\u2003FltYRRest \u2003=\u2003FLTR_COEFF \u2003*\u2003FltYRRest \u2003+\u2003(1 \u2003\u2212"},{"entry":"FLTR_COEFF)*(RawYawRate \u2212 RestingYROffset;"},{"entry":"\u2003If (FltrYRRest > 0)"},{"entry":"\u2003RestingYROffset += MAX_YR_DRIFT_RATE;"},{"entry":"\u2003Else if (FltrYRRest < 0)"},{"entry":"\u2003RestingYROffset \u2212= MAX_YR_DRIFT_RATE;"},{"entry":"\u2003If (FltrYRRest > MAX_REST_YR)"},{"entry":"\u2003{OFFSET_FLAG \u2003&=\u2003~\u2003VEHICLE_STOPPED_FOR"},{"entry":"\u2003ONE_SEC;"},{"entry":"\u2003OFFSET_FLAG &= ~ HOLD_RESTING_\u2003VALUES;}"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"If an initialization has taken place during a turn table type event, it is corrected when the vehicle  is standing still after initialization. In such event, the offsets value is reset to the average of the maximum and the minimum values from EEPROM . In such cases, the rate sensors (, , , or ) are limited to, for example, +\u22123.5 deg\/sec and the acceleration sensors is limited to, for example, +\u22121.5 m\/sec^2. The controller  achieves this by taking the initial value of the yaw rate after the completion of offset initialization and FltYRRest. Logic to illustrate this includes:",{"@attributes":{"id":"p-0093","num":"0092"},"tables":{"@attributes":{"id":"TABLE-US-00022","num":"00022"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"\u2003If (INTIALIZATION_JUST_FINISHED)"},{"entry":"\u2003{if (FltYRInitial > FltYRRest + 2)"},{"entry":"\u2003|| (FltYRInitial < FltYRRest \u2212 2)"},{"entry":"\u2003{RollRateOffset \u2003=\u2003LIMIT(+\u22123.5,(MAX_RR_OFST_EE \u2003+"},{"entry":"MIN_RR_OFST_EE )\/2);"},{"entry":"\u2003YawRateOffset \u2003=\u2003LIMIT(+\u22123.5,(MAX_YR_OFST_EE \u2003+"},{"entry":"MIN_YR_OFST_EE)\/2);"},{"entry":"\u2003AxOffset \u2003=\u2003LIMIT(+\u22121.5,(MAX_AX_OFST_EE \u2003+"},{"entry":"MIN_AX_OFST_EE )\/2);"},{"entry":"\u2003AyOffset \u2003=\u2003LIMIT(+\u22121.5,(MAX_AY_OFST_EE \u2003+"},{"entry":"MIN_AY_OFST_EE)\/2);}}"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"In operation block , the vehicle dynamic sensor (, , , or ) is corrected in response to the first offset correction signal, the second offset correction signal, and the third offset correction signal.","In other words, the computed values of the offsets are taken out from the raw sensor value before the sensors (, , , or ) are filtered. Logic to illustrate this includes:\n\n","The roll rate sensor  is filtered by limiting the roll rate velocity to a maximum of RR_xxx_CNTR * RR_DELTA. These values are established by taking the worst-case conditions (the maximum roll rate) from data. The slope is continually increased by increasing the counter. The counter is limited the RR_MAX_LOOP value. So, the maximum rate change experienced by the roll rate sensor  is RR_MAX_LOOP * RR_DELTA. Logic to illustrate this includes:",{"@attributes":{"id":"p-0097","num":"0100"},"tables":{"@attributes":{"id":"TABLE-US-00023","num":"00023"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"\u2003if (RawRollRate > FltRollRate)"},{"entry":"\u2003{if (RR_POS_CNTR < \u2009RR_MAX_LOOP) RR_POS_CNTR \u2002++;"},{"entry":"\u2003if (RR_NEG_CNTR >=\u2002RR_DECR_CNTR) RR_NEG"},{"entry":"\u2003CNTR \u2002\u2212="},{"entry":"RR_DECR_CNTR;"},{"entry":"\u2003else RR_NEG_CNTR = 0;"},{"entry":"\u2003FltRollRate += RR_POS_CNTR * RR_DELTA;"},{"entry":"\u2003If (RawRollRate <\u2002FltRollRate) FltRollRate ="},{"entry":"RawRollRate; }"},{"entry":"\u2003else {if (RR_NEG_CNTR < RR_MAX_LOOP) RR_NEG_CNTR"},{"entry":"++;"},{"entry":"\u2003if (RR_POS_CNTR >=\u2009RR_DECR_CNTR) RR_POS_CNTR \u2212="},{"entry":"RR_DECR_CNTR;"},{"entry":"\u2003else RR_POS_CNTR = 0;"},{"entry":"\u2003FltRollRate \u2212= RR_NEG_CNTR * RR_DELTA;"},{"entry":"\u2003If (RawRollRate >\u2002FltRollRate) FltRollRate ="},{"entry":"RawRollRate;}"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"The same logic is applied to filter Yaw Rate:",{"@attributes":{"id":"p-0099","num":"0102"},"tables":{"@attributes":{"id":"TABLE-US-00024","num":"00024"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"\u2003if (RawYawRate > FltYawRate)"},{"entry":"\u2003{if (YR_POS_CNTR < YR_MAX_LOOP) YR_POS_CNTR ++;"},{"entry":"\u2003if (YR_NEG_CNTR >= YR_DECR_CNTR) YR_NEG_CNTR \u2212="},{"entry":"YR_DECR_CNTR;"},{"entry":"\u2003else YR_NEG_CNTR = 0;"},{"entry":"\u2003FltYawRate += YR_POS_CNTR * YR_DELTA;"},{"entry":"\u2003If \u2003(RawYawRate \u2003<\u2003FltYawRate) \u2003FltYawRate \u2003="},{"entry":"RawYawRate;}"},{"entry":"\u2003else{if \u2003(YR_NEG_CNTR \u2003<\u2003YR_MAX_LOOP) \u2003YR_NEG"},{"entry":"\u2003CNTR"},{"entry":"++;"},{"entry":"\u2003if \u2003(YR_POS_CNTR \u2003>=\u2003YR_DECR_CNTR) \u2003YR_POS"},{"entry":"\u2003CNTR \u2212="},{"entry":"YR_DECR_CNTR;"},{"entry":"\u2003else YR_POS_CNTR = 0;"},{"entry":"\u2003FltYawRate \u2212= YR_NEG_CNTR * YR_DELTA;"},{"entry":"\u2003If (RawYawRate \u2003>\u2003FltYawRate) \u2003FltYawRate \u2003="},{"entry":"RawYawRate;}"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"The same logic is applied to filter Longitudinal Acceleration:",{"@attributes":{"id":"p-0101","num":"0104"},"tables":{"@attributes":{"id":"TABLE-US-00025","num":"00025"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"if (RawAx > FltAx)"},{"entry":"\u2003{if (AX_POS_CNTR < AX_MAX_LOOP) AX_POS_CNTR ++;"},{"entry":"\u2003if (AX_NEG_CNTR >= AX_DECR_CNTR) AX_NEG_CNTR \u2212="},{"entry":"AX_DECR_CNTR;"},{"entry":"\u2003else AX_NEG_CNTR = 0;"},{"entry":"\u2003FltAx += AX_POS_CNTR * AX_DELTA;"},{"entry":"\u2003If (RawAx < FltAx) FltAx = RawAx;}"},{"entry":"\u2003else {if (AX_NEG_CNTR < AX_MAX_LOOP) AX_NEG_CNTR"},{"entry":"++;"},{"entry":"\u2003if (AX_POS_CNTR >= AX_DECR_CNTR) AX_POS_CNTR \u2212="},{"entry":"AX_DECR_CNTR;"},{"entry":"\u2003else AX_POS_CNTR = 0;"},{"entry":"\u2003FltAx \u2212= AX_NEG_CNTR * AX_DELTA;"},{"entry":"\u2003If (RawAx > FltAx) FltAx = RawAx;}"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"The same logic is applied to filter Lateral Acceleration:",{"@attributes":{"id":"p-0103","num":"0106"},"tables":{"@attributes":{"id":"TABLE-US-00026","num":"00026"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"\u2003if (RawAy > FltAy)"},{"entry":"\u2003{if (AY_POS_CNTR < AY_MAX_LOOP) AY_POS_CNTR ++;"},{"entry":"\u2003if (AY_NEG_CNTR >= AY_DECR_CNTR) AY_NEG_CNTR \u2212="},{"entry":"AY_DECR_CNTR;"},{"entry":"\u2003else AY_NEG_CNTR = 0;"},{"entry":"\u2003FltAy += AY_POS_CNTR * AY_DELTA;"},{"entry":"\u2003If (RawAy < FltAy) FltAy = RawAy;}"},{"entry":"\u2003Else"},{"entry":"\u2003{if (AY_NEG_CNTR < AY_MAX_LOOP) AY_NEG_CNTR ++;"},{"entry":"\u2003if (AY_POS_CNTR >= AY_DECR_CNTR) AY_POS_CNTR \u2212="},{"entry":"AY_DECR_CNTR;"},{"entry":"\u2003else AY_POS_CNTR = 0;"},{"entry":"\u2003FltAy \u2212= AY_NEG_CNTR * AY_DELTA;"},{"entry":"\u2003If (RawAy > FltAy) FltAy = RawAy;}"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"While particular embodiments of the invention have been shown and described, numerous variations and alternate embodiments will occur to those skilled in the art. Accordingly, it is intended that the invention be limited only in terms of the appended claims."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":["FIG. 2","FIG. 1"]},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 3"}]},"DETDESC":[{},{}]}
