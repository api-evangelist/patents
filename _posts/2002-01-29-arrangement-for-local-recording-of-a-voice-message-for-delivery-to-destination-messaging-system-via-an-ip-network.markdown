---
title: Arrangement for local recording of a voice message for delivery to destination messaging system via an IP network
abstract: A recording device at a calling party premises is configured for recording a message for a messaging subscriber by the calling party, and sending the recorded message, via a data network, to a destination message store serving the messaging subscriber. The recording device sends the recorded message based on messaging subscriber attributes retrieved via the data network. Hence, a calling party can utilize a recording device at the calling party premises for recording a message for a messaging subscriber, and sending the message via the data network to a destination message store, eliminating the necessity of establishing any voice-grade connection or a media connection between the calling party and any server (e.g., messaging server, media gateway server, etc.).
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=06947528&OS=06947528&RS=06947528
owner: Cisco Technology, Inc.
number: 06947528
owner_city: San Jose
owner_country: US
publication_date: 20020129
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","BEST MODE FOR CARRYING OUT THE INVENTION"],"p":["1. Field of the Invention","The present invention relates to local messaging devices enabling recorded messages by calling parties to be sent to a destination messaging system via a data network.","2. Description of the Related Art","The evolution of the public switched telephone network has resulted in a variety of voice applications and services that can be provided to individual subscribers and business subscribers. Such services include voice messaging systems that enable landline or telephony subscribers to record, playback, and forward voice mail messages. However, the ability to provide enhanced services to subscribers of the public switched telephone network is directly affected by the limitations of the public switched telephone network. In particular, the public switched telephone network operates according to a protocol that is specifically designed for the transport of voice signals; hence any modifications necessary to provide enhanced services can only be done by switch vendors that have sufficient know-how of the existing public switched telephone network infrastructure.","One particular problem related to voice messaging systems is the cost associated with a calling party leaving a voice message for a called party based on a no answer\/busy condition at the called party premises. In particular, a calling party attempting to reach a called party will be connected to the called party's voice messaging system if the called party is not available, and begin a voice messaging session with the called party's voice messaging system which includes listening to a messaging prompt menu, recording a message, possibly reviewing\/editing the message, and submitting the message for storage by the called party's voice messaging system. Such an arrangement uses a costly trunk line connection between the calling party and the called party's voice messaging system, resulting in increased costs for the messaging session, especially for use of long distance trunk line connections between interexchange carriers.","U.S. Pat. No. 6,061,432, to Wallace et al. discloses a voice mail system having SS7 signaling capabilities to obtain routing information, for sending a recorded message to a destination mail system, via the SS7 network. The disclosed voice mail system includes an SS7 signaling interface for sending Transactions Capabilities Applications Part (TCAP) query messages and receiving TCAP response messages via the SS7 signaling network in order to obtain voice mail capabilities information and routing information accessed from a subscriber profile record corresponding to a called party, bypassing existing Advanced Intelligent Network components, such as a standalone service control point.","However, transfer of messages via the SS7 network imposes a burden on the SS7 signaling network, and may create congestion conditions for SS7 signaling nodes and SS7 links configured for transferring SS7 call setup messages (e.g., ISDN User Part (ISUP) messages).","Voice over IP technology has been deployed as an alternative to conventional PSTN-based telephony systems relying on frame relay. Use of the open standards-based Internet Protocol (IP) network eliminates the reliance on existing PSTN-based telephony systems for telephony services or voice messaging services. An example of an IP-based messaging service is disclosed in commonly-assigned, copending application Ser. No. 09\/608,187, filed Jun. 30, 2000, entitled IP Web Based Messaging System for Localized Management of Wireless Messaging, the disclosure of which is incorporated in its entirety herein by reference. The copending application Ser. No. 09\/608,187 discloses an application server configured for providing messaging services to a calling party for a remote subscriber based on retrieval of subscriber attribute information obtained from a remote information database server (such as LDAP) via an Internet Protocol (IP) network. The application server also is configured for sending and retrieving messages from a standardized remote messaging server (such as IMAP) via the IP network based on a destination address specified in the subscriber attribute information. The access of the remote information database server and the standardized remote messaging server via the IP network enables the application server to provide portable application services for roaming subscribers or calling parties. Hence, application infrastructure can be shared among multiple servers to provide portable application servers, eliminating the necessity of routing telephone calls across interexchange carrier facilities or international facilities.","There is a need for an arrangement that enables a calling party to leave a message for a messaging subscriber, without the need for any bandwidth utilization in a network of a voice-grade connection for the calling party to record the message.","There is also a need for an arrangement that enables a calling party to utilize localized recording of messages, without the necessity of a media connection between the calling party device and a local server for recording of the message.","These and other needs are attained by the present invention, where a recording device at the calling party premises is configured for recording a message for a messaging subscriber by the calling party, and sending the recorded message, via a data network, to a destination message store serving the messaging subscriber. The recording device sends the recorded message based on messaging subscriber attributes retrieved via the data network.","Hence, a calling party can utilize a recording device at the calling party premises for recording a message for a messaging subscriber, and sending the message via the data network to a destination message store, eliminating the necessity of establishing any voice-grade connection or a media connection between the calling party and any server (e.g., messaging server, media gateway server, etc.). Hence, messages can be recorded and sent without utilizing server resources, improving the scalability of telephony and data networks by reducing server resource requirements normally reserved for messaging sessions.","One aspect of the present invention provides a method in a recording device at a calling party premises. The method includes recording a message by a calling party based on speech signals supplied by a telephony device configured for initiating a voice-grade media connection to a messaging subscriber. The method also includes retrieving messaging subscriber attributes specifying a destination message store for the messaging subscriber, and sending the recorded message, via the data network, to the destination message store based on the messaging subscriber attributes. Recording the message within the recording device at a calling party premises enables messages to be recorded without the necessity of using a voice-grade media connection. Moreover, the retrieval of messaging subscriber attributes and sending the recorded message based on the messaging subscriber attributes enables the device to send the recorded message to the destination message store, without the consumption of any resources by a local or remote interactive messaging server, such as a voice mail service offering interactive voice mail operations.","Another aspect of the present invention provides a device coupled to a telephony device at a calling party premises. The device includes a media circuit, a messaging subscriber resource, and a network interface. The media circuit is configured for storing speech signals supplied by the telephony device as a recorded message configured for storage on a tangible medium. The messaging subscriber resource is configured for identifying a destination message store, for delivery of the recorded message to a messaging subscriber, based on inputs to the telephony device supplied by a calling party and retrieval of messaging subscriber attributes specifying the destination message store. The network interface is configured for sending the recorded message, via a data network, to the destination message store based on the messaging subscriber attributes.","Additional advantages and novel features of the invention will be set forth in part in the description which follows and in part will become apparent to those skilled in the art upon examination of the following or may be learned by practice of the invention. The advantages of the present invention may be realized and attained by means of instrumentalities and combinations particularly pointed out in the appended claims.",{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 1","b":["10","12","12","14","16","18"]},"For example, the voice over IP based telephony network , implemented for example according to H.323 protocol, includes a voice over IP telephony device , a call manager , a multipoint control unit (MCU) , and an IP router  having a voice over IP gateway . Calls passed between the IP routers  via an Internet protocol (IP) data network , for example the Internet, are managed by a gatekeeper . Each of these Voice over IP telephony components , , , , , and , are commercially available from Cisco Systems, Inc., San Jose, Calif.","As illustrated in , the voice over IP based telephony network  is subdivided into subnetworks , or \u201czones\u201d, typically corresponding to geographic zones. The call manager  is configured for setup and tear down of voice over IP telephone calls, according to H.323 Registration, Admission, and Status (RAS) Protocol. For example, in response to detecting that a calling party using the voice over IP telephony device is attempting to make a call, the call manager will send an Admission Request (ARQ) to the gatekeeper  specifying an amount of bandwidth based on the codec utilized (e.g., 128 kbps for a G.711 codec or 20 kbps for a G.729 codec). If the gatekeeper  determines that bandwidth is available, the gatekeeper  returns an Admission Confirm (ACF) message permitting the call manager to complete the call; if bandwidth is not available, the gatekeeper  outputs an Admission Reject (ARJ), preventing call completion calling the caller to receive a busy tone. The MCU  is utilized for any multipoint conferencing between H.323 terminals (e.g., telephony devices ).","The call manager completes the call via the IP router . For example, the call manager is configured for establishing a call via the data network  according to H.323 protocol. If the destination party is served by the public switched telephone network  (e.g., the analog telephone or ), the router utilizes the voice over IP gateway to convert between packet switched communications and circuit-switched TI PRI ISDN connections in the public switched telephone networks .","The voice over IP based telephony network  also includes messaging systems , for example unified messaging systems, including IP based subscriber directories , and IP based message stores . Each subscriber directory  is configured for storing subscriber profile information including user name, telephone number, voice messaging preferences, etc. according to LDAP protocol. Each subscriber message store  is configured for storing subscriber messages, and personalized prompts, for example according to IMAP protocol. Although not shown, the voice over IP based telephony network  also may include a messaging server configured for storage and retrieval of the messages for a messaging subscriber.","According to the disclosed embodiment, a calling party is able to record and send a message, via the data network , using a recording device . In particular, the recording device  is configured for recording the message, retrieving messaging subscriber attributes from the subscriber directory , and sending the recorded message via the data network  to the destination message store . As illustrated in , the recording device  may be implemented within the telephony device ; alternately, as illustrated in , the recording device  may be coupled to the telephony device  or  using a coupler  configured for splitting analog signals sent to and from the handset  (e.g., speech signals, DTMF digits, etc.) to the recording device , and a connecting cable .","As described below, the recording device  includes an Internet protocol network interface, enabling the recording device  to access the subscriber profile information from the LDAP directory  for a destination messaging subscriber, in order to enable a recorded message to be sent via the data network  to the destination message store  based on the messaging subscriber attributes.","Hence, messaging operations can be performed by a calling party without the necessity of utilizing a media connection to a messaging server. Hence, a calling party can perform messaging operations for one or multiple messaging subscribers using his own recording device, without relying on remote voice mail resources, with greater control and convenience for the calling party.",{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 3","b":["12","12","50","52","54"]},"The media circuit  is configured for storing speech signals supplied by the telephony device  or ; in particular, the media circuit  includes a recording resource  configured for generating, from received speech signals, a media file (e.g., a .wav file) that can be stored on a tangible medium, for example a hard disk or flash memory. The media circuit  also includes a playback resource  configured for generating analog audio signals in response to audio data from a media player  (e.g., playback of a received announcement, or review of a recorded message prior to submission). The media circuit  also includes a DTMF detection circuit  configured for detecting and converting DTMF digits into ASCII based text for retrieval of messaging subscriber attributes based on the DTMF digits, described below.","The network interface  is configured for sending a recorded message via the data network  according to Internet protocol. As described below, the network interface  also is configured for sending queries for the messaging subscriber attributes, and receiving the messaging subscriber attributes via the data network .","The messaging subscriber resource  is configured for generating a query, based on the DTMF digits input by the calling party and detected by the DTMF detection circuit , for retrieval of the messaging subscriber attributes. In particular, the messaging subscriber resource  includes a subscriber profile requester resource , configured for generating a query based on the network topology; for example, the subscriber profile requester resource  accesses a selected application programming interface (API) based on the manner in which the recording device  is connected to the IP network . For example, the messaging subscriber resource  includes a domain registry server API  and an LDAP API . The domain registry server API  is configured for sending an open protocol query for the messaging subscriber attributes to a centralized server, configured for storing messaging subscriber attributes, or identifiers for their respective directories , based on a dialed number input by the calling party. Use of the domain registry server API  may be particularly effective in a recording device lacking a locally accessible LDAP directory ; in this case, the centralized server may send domain registry information to the recording device . Once the recording device  has received domain registry information for the destination party, the subscriber profile requester resource  can access the LDAP API  by sending an LDAP query to the subscriber directory  serving the destination messaging subscriber.","In response to receiving the messaging subscriber attributes specifying a subscriber message store for the messaging subscriber from the LDAP directory , the messaging subscriber resource  can send the recorded message via the data network  as a media attachment to an e-mail message. Depending on the implementation protocol of the subscriber message store , the messaging subscriber resource  may access an IMAP API  store the e-mail message in the subscriber message store  according to IMAP protocol; alternately the messaging subscriber resource  may access an SMTP API  to send the recorded message has a media attachment according to SMTP protocol.","An alternative arrangement for retrieving messaging subscriber attributes, and sending the recorded message to the subscriber message store , involves the use of a Voice Profile for Internet Mail (VPIM) resource , configured for transporting recorded messages according to VPIM protocol, ver. 2, as specified by RFC 2421 published by the Internet Engineering Task Force (IETF), available on the World Wide Web at www.ietf.org, the text of which is incorporated in its entirety herein by reference. In particular, VPIM specifies a packaging format for Multipurpose Internet Mail Extensions (MIME) encoded data using SMTP for transport of voice mail messages. The VPIM protocol utilizes vCard features (described in the above-incorporated RFC 2421) for passing contact information about a sender to the recipient. VPIM is intended for intentional creation on the sender's side, and addressing is blind such that there is no address book query protocol. Rather, two-way service agreements typically are implemented between the administrators of the voicemail systems and to enable VPIM based message transfer.","Hence, a recording device  is able to send a recorded message to a destination message store based on retrieval of messaging subscriber attributes for the destination party (i.e., the called party), based on the dialed digits input by the calling party.",{"@attributes":{"id":"p-0037","num":"0036"},"figref":["FIG. 4","FIG. 4"]},"The method begins in step , where the telephony device is placed in an off-hook condition by the calling party, for example by removing the handset , or pressing a speaker phone button on the telephony device. The DTMF detector  of the recording device  detects in step  the DTMF digits input by the calling party, and the subscriber profile requester resource  generates a query for messaging subscriber attributes based on the messaging subscriber telephone number input by the calling party in step .","The messaging subscriber resource  outputs in step  the query to a registry using the domain registry server API , or a subscriber directory  using the LDAP API . As described above, the domain registry server API  may be used if no local subscriber directory  is available; however, the recording device within the subnetwork typically will utilize the LDAP API  to send the query to the local subscriber registry ; if the destination subscriber belongs to a remote subnetwork , the LDAP may issue its own query to the LDAP directory on behalf of the calling party at the premises of the IP telephony device ","In the case of VPIM based message transfer, the administrators of the messaging systems  enter addresses for the respective destination systems, and create DTMF identifiers to enable users to address the destination system by telephone. For example, the administrator for the messaging system configures the domain name \u201c@vpim.companyb.com\u201d with \u201c123\u201d as the corresponding DTMF identifier for the messaging system . In this case, the VPIM resource  retrieves the DTMF identifier from the local messaging system , for example from a VPIM registry within the LDAP directory , based on supplying the dialed number, which is used by the local messaging system to identify the appropriate VPIM destination address (e.g., the domain name \u201c@vpim.companyb.com\u201d) in combination with rules applied by the messaging system for specific addressing on the remote messaging system (e.g., identifying a subscriber mailbox and confirming the VPIM destination address for the subscriber). Hence, the local messaging system can utilize the dialed number to send a query to the remote messaging system via the IP network , to identify the subscriber mailbox and confirm the VPIM destination address.","The recording device  receives in step  the messaging subscriber attributes for the remote messaging subscriber via the data network , including for example the e-mail address for the messaging subscriber including the messaging server domain for the message store , and the messaging subscriber identifier. In the case of VPIM messaging, the VPIM resource  receives the VPIM destination address from the local messaging system (e.g., ) via the corresponding local data network after the local messaging system has received the confirmed VPIM destination address, and\/or the subscriber mailbox, from the remote system via the IP network .","If in step  the messaging subscriber resource  detects a condition requiring recording a message, for example a busy or no answer condition, or a record request by the calling party (e.g., by pressing a record button on the device ), the messaging subscriber resource  determines if a media file for the messaging subscriber announcement is received in step . For example, the messaging subscriber attributes retrieved in step  may identify a personalized prompt stored in the message store  for the messaging subscriber. The media player  and the player resource  of the recording device  play in step  the media file, if available, and the recording resource  records in step  the message by the calling party until the user generates a stop command, for example by pressing a key on the telephony device  or . The calling party may then review the message prior to submission in steps  and . In particular, if in step  the calling party issues a command to listen or edit the recorded message, the media player  plays the recorded message in step .","Upon detecting a send command in step , the messaging subscriber resource  sends in step  the recorded message to the destination messaging server (i.e., message store) via the IP network . As described above, the recorded message may be sent as a media attachment to an e-mail message. In the case of VPIM messaging, the VPIM resource  appends the mailbox identifier of the messaging subscriber (e.g., the messaging subscriber's mailbox extension \u201c68100\u201d) to the VPIM destination address (\u201c123\u201d mapped to @(vpim.companyb.com), and sends the recorded message to the destination messaging server at the address \u201c68100@vpim.companyb.com\u201d.","As apparent from the foregoing, the particular sequence of steps in  may be modified, where the query output in step  may be performed in response to the detection of a condition requiring a message in step .","According to the disclosed embodiment, messaging operations may be performed exclusively by the recording device at a calling party premises, eliminating the necessity of any messaging session between the calling party and a messaging server that may otherwise consume voice grade resources. Hence, messaging operations can be more scalable throughout unified messaging systems, providing calling party greater flexibility in generating and sending voice messages, at a lower cost.","While this invention has been described in connection with what is presently considered to be the most practical and preferred embodiment, it is to be understood that the invention is not limited to the disclosed embodiments, but, on the contrary, is intended to cover various modifications and equivalent arrangements included within the spirit and scope of the appended claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Reference is made to the attached drawings, wherein elements having the same reference numeral designations represent like elements throughout and wherein:",{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":["FIGS. 2A and 2B","FIG. 1"]},{"@attributes":{"id":"p-0020","num":"0019"},"figref":["FIG. 3","FIGS. 1 and 2"]},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 4"}]},"DETDESC":[{},{}]}
