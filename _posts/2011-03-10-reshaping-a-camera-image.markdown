---
title: Reshaping a camera image
abstract: Apparatuses, computer media, and methods for altering a camera image, in which the source image may be angularly displaced from a camera image. A plurality of points on the camera image is located and a mesh is generated. Compensation information based on the displacement is determined, and a reshaped image is rendered from the mesh, the compensation information, and the camera image. The camera image is reshaped by relocating a proper subset of the points on the camera image. Deformation vectors are applied to corresponding points on the mesh using the compensation information. A correction factor is obtained from an angular displacement and a translation displacement of the source image from the camera image. The deformation factor is multiplied by the compensation factor to form a deformation vector to compensate for angular and translational displacements of the source image from the camera image.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08180175&OS=08180175&RS=08180175
owner: Accenture Global Services Limited
number: 08180175
owner_city: Dublin
owner_country: IE
publication_date: 20110310
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","BRIEF SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE INVENTION"],"p":["This application is a continuation of U.S. patent application Ser. No. 11\/674,255, filed on Feb. 13, 2007, which is a continuation-in-part of U.S. application Ser. No. 11\/625,937, filed on Jan. 23, 2007, the disclosures of which are incorporated by reference herein in their entirety.","This invention relates to altering a camera image. More particularly, the invention applies to a source image being angularly displaced from the camera image plane.","Excessive body weight is a major cause of many medical illnesses. With today's life style, people are typically exercising less and eating more. Needless to say, this life style is not conducive to good health. For example, it is acknowledged that type-2 diabetes is trending to epidemic proportions. Obesity appears to be a major contributor to this trend.","On the other hand, a smaller proportion of the population experiences from being underweight. However, the effects of being underweight may be even more divesting to the person than to another person being overweight. In numerous related cases, people eat too little as a result of a self-perception problem. Anorexia is one affliction that is often associated with being grossly underweight.","While being overweight or underweight may have organic causes, often such afflictions are the result of psychological issues. If one can objectively view the effect of being underweight or underweight, one may be motivated to change one's life style, e.g., eating in a healthier fashion or exercising more. Viewing a predicted image of one's body if one continues one's current life style may motivate the person to live in a healthier manner.","Embodiments of invention provide apparatuses, computer media, and methods for altering a camera image, in which the source image may be angularly displaced from a camera image.","With an aspect of the invention, a plurality of points on the camera image is located and a mesh is generated. The mesh is superimposed on the camera image and associated with corresponding texture information of the camera image. Compensation information based on the displacement is determined, and a reshaped image is rendered from the mesh, the compensation information, and the camera image.","With another aspect of the invention, the camera image is reshaped by relocating a proper subset of the points on the camera image. Deformation vectors are applied to corresponding points on the mesh using the compensation information. A deformation vector may comprise a product of factors, including a weight value factor (A), a scale factor (s), a deformation factor (w), and a direction vector ({right arrow over (u)}).","With another aspect of the invention, a correction factor is obtained from an angular displacement and a translation displacement of the source image from the camera image. The deformation factor is multiplied by the compensation factor to form a deformation vector to compensate for angular and translational displacements of the source image from the camera image.",{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 1","b":["136","145"]},"This mesh is associated to its corresponding texture from the picture where the alteration is taking place. The corners and four points along each side of the picture (as shown in ) are also considered as part of the mesh. Computer graphics software API (Application Programming Interface) is used to render the altered image (e.g., as shown in ). OpenGL API is an example of computer graphics software that may be used to render the altered image.",{"@attributes":{"id":"p-0024","num":"0023"},"figref":["FIG. 2","FIG. 2","FIG. 2"],"b":["200","206","218","231","200","206","218","231","200","206","218","231"]},{"@attributes":{"id":"p-0025","num":"0024"},"figref":["FIG. 2","FIGS. 1-3"]},{"@attributes":{"id":"p-0026","num":"0025"},"figref":["FIG. 3","FIG. 2","FIG. 2"],"b":["306","331","306","318","331","206","218","231","306","331","306","331"]},"In the following discussion that describes the determination of the deformation vectors for reshaping the face image, index i=6 to index i=31 correspond to points  to points , respectively. The determined deformation vectors are added to points  to points  to re-position the point, forming a transformed mesh. A reshaped image is consequently rendered using the transformed mesh.","In accordance with embodiments of the invention, deformation vector correspond to a product of four elements (factors):\n\n\u2003\u2003(EQ. 1)\n\nwhere A is the weight value factor, s is the scale factor, w is the deformation factor, and {right arrow over (u)} is the direction vector. In accordance with an embodiment of the invention:\n\n",{"@attributes":{"id":"p-0029","num":"0030"},"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mi":"s","mo":"=","mfrac":{"mrow":{"mo":["\uf603","\uf604"],"mrow":{"msub":[{"mi":"x","mn":"31"},{"mi":"x","mn":"6"}],"mo":"-"}},"mi":"B"}}},{"mrow":{"mo":["(",")"],"mrow":{"mi":"EQ","mo":[".","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mn":"3"}}}]}}}},"ul":{"@attributes":{"id":"ul0003","list-style":"none"},"li":{"@attributes":{"id":"ul0003-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0004","list-style":"none"},"li":"Deformation factor [w]. It is calculated differently for different parts of cheeks and chin. One uses a different equation depending on which part of the face one is processing:"}}}},{"@attributes":{"id":"p-0030","num":"0032"},"maths":{"@attributes":{"id":"MATH-US-00002","num":"00002"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":[{"mtd":[{"mrow":{"mrow":[{"mi":"i","mo":"\u2208","mrow":{"mrow":{"mo":["[","]"],"mrow":{"mn":["6","13"],"mo":"-"}},"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"msub":{"mi":["w","i"]}}},{"mrow":{"mfrac":[{"mn":["2","3"]},{"mn":"1","mrow":{"mo":["\uf603","\uf604"],"mrow":{"msub":[{"mi":"x","mn":"6"},{"mi":"x","mn":"13"}],"mo":"-"}}}],"mo":["\u2062","\u2062"],"mrow":{"mo":["\uf603","\uf604"],"mrow":{"msub":[{"mi":["x","i"]},{"mi":"x","mrow":{"mi":"C","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"1"}}],"mo":"-"}}},"mo":"+","mfrac":{"mn":["1","3"]}}],"mo":"="}},{"mrow":{"mo":["(",")"],"mrow":{"mrow":{"mi":"EQ","mo":[".","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mn":"4"},"mo":"\u2062","mi":"A"}}}]},{"mtd":[{"mrow":{"mrow":[{"mi":"i","mo":"\u2208","mrow":{"mrow":{"mo":["[","]"],"mrow":{"mn":["14","18"],"mo":"-"}},"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"msub":{"mi":["w","i"]}}},{"mrow":{"mrow":{"mo":"-","mfrac":{"mn":"1","msup":{"mrow":{"mo":["\uf603","\uf604"],"mrow":{"msub":[{"mi":"x","mn":"13"},{"mi":"x","mn":"18"}],"mo":"-"}},"mn":"2"}}},"mo":"\u2062","msup":{"mrow":{"mo":["\uf603","\uf604"],"mrow":{"msub":[{"mi":["x","i"]},{"mi":"x","mrow":{"mi":"C","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"1"}}],"mo":"-"}},"mn":"2"}},"mo":"+","mn":"1"}],"mo":"="}},{"mrow":{"mo":["(",")"],"mrow":{"mrow":{"mi":"EQ","mo":[".","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mn":"4"},"mo":"\u2062","mi":"B"}}}]},{"mtd":[{"mrow":{"mrow":[{"mi":"i","mo":"\u2208","mrow":{"mrow":{"mo":["[","]"],"mrow":{"mn":["19","23"],"mo":"-"}},"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"msub":{"mi":["w","i"]}}},{"mrow":{"mrow":{"mo":"-","mfrac":{"mn":"1","msup":{"mrow":{"mo":["\uf603","\uf604"],"mrow":{"msub":[{"mi":"x","mn":"18"},{"mi":"x","mn":"24"}],"mo":"-"}},"mn":"2"}}},"mo":"\u2062","msup":{"mrow":{"mo":["\uf603","\uf604"],"mrow":{"msub":[{"mi":["x","i"]},{"mi":"x","mrow":{"mi":"C","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"1"}}],"mo":"-"}},"mn":"2"}},"mo":"+","mn":"1"}],"mo":"="}},{"mrow":{"mo":["(",")"],"mrow":{"mrow":{"mi":"EQ","mo":[".","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mn":"4"},"mo":"\u2062","mi":"C"}}}]},{"mtd":[{"mrow":{"mrow":[{"mi":"i","mo":"\u2208","mrow":{"mrow":{"mo":["[","]"],"mrow":{"mn":["24","31"],"mo":"-"}},"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"msub":{"mi":["w","i"]}}},{"mrow":{"mfrac":[{"mn":["2","3"]},{"mn":"1","mrow":{"mo":["\uf603","\uf604"],"mrow":{"msub":[{"mi":"x","mn":"24"},{"mi":"x","mn":"31"}],"mo":"-"}}}],"mo":["\u2062","\u2062"],"mrow":{"mo":["\uf603","\uf604"],"mrow":{"msub":[{"mi":["x","i"]},{"mi":"x","mrow":{"mi":"C","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"2"}}],"mo":"-"}}},"mo":"+","mfrac":{"mn":["1","3"]}}],"mo":"="}},{"mrow":{"mo":["(",")"],"mrow":{"mrow":{"mi":"EQ","mo":[".","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mn":"4"},"mo":"\u2062","mi":"D"}}}]}]}}},"ul":{"@attributes":{"id":"ul0005","list-style":"none"},"li":{"@attributes":{"id":"ul0005-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0006","list-style":"none"},"li":"Direction vector [{right arrow over (u)}]: It indicates the sense of the deformation. One calculates the direction vector as the ratio between: the difference (for each coordinate) between the center and our point, and the absolute distance between this center and our point. One uses two different centers in this process: center C (point  as shown in ) for the points belonging to the jaw and center C (point  as shown in ) for the points belonging to the cheeks."}}}},{"@attributes":{"id":"p-0031","num":"0034"},"maths":{"@attributes":{"id":"MATH-US-00003","num":"00003"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":[{"mtd":[{"mrow":{"mrow":{"mrow":{"mrow":[{"mrow":{"mi":"i","mo":"\u2208","mrow":{"mo":["[","]"],"mrow":{"mn":["6","13"],"mo":"-"}}},"mo":"&"},{"mo":["[","]"],"mrow":{"mn":["24","31"],"mo":"-"}}],"mo":"\u2061"},"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"msub":{"mover":{"mi":"u","mo":"\u2192"},"mi":"i"}},"mo":"=","mfrac":{"mrow":[{"msub":[{"mi":["x","i"]},{"mi":"x","mrow":{"mi":"C","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"1"}}],"mo":"-"},{"mo":["\uf603","\uf604"],"mrow":{"msub":[{"mi":["x","i"]},{"mi":"x","mrow":{"mi":"C","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"1"}}],"mo":"-"}}]}}},{"mrow":{"mo":["(",")"],"mrow":{"mrow":{"mi":"EQ","mo":[".","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mn":"5"},"mo":"\u2062","mi":"A"}}}]},{"mtd":[{"mrow":{"mrow":{"mi":"i","mo":"\u2208","mrow":{"mrow":{"mo":["[","]"],"mrow":{"mn":["14","23"],"mo":"-"}},"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"msub":{"mover":{"mi":"u","mo":"\u2192"},"mi":"i"}}},"mo":"=","mfrac":{"mrow":[{"msub":[{"mi":["x","i"]},{"mi":"x","mrow":{"mi":"C","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"2"}}],"mo":"-"},{"mo":["\uf603","\uf604"],"mrow":{"msub":[{"mi":["x","i"]},{"mi":"x","mrow":{"mi":"C","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"2"}}],"mo":"-"}}]}}},{"mrow":{"mo":["(",")"],"mrow":{"mrow":{"mi":"EQ","mo":[".","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mn":"5"},"mo":"\u2062","mi":"B"}}}]}]}}}},"Neck point-coordinates xare based on the lower part of the face, where",{"@attributes":{"id":"p-0033","num":"0036"},"maths":{"@attributes":{"id":"MATH-US-00004","num":"00004"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":[{"mtd":[{"mrow":{"mrow":[{"mi":"i","mo":["\u2208","\u2208"],"mrow":[{"mrow":{"mo":["[","]"],"mrow":{"mn":["36","45"],"mo":"-"}},"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mi":"j"},{"mrow":{"mo":["[","]"],"mrow":{"mn":["14","23"],"mo":"-"}},"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"msub":{"mi":["x","i"]}}]},{"mo":["(",")"],"mrow":{"msub":{"mi":["x","j"]},"mo":",","mrow":{"msub":{"mi":["y","j"]},"mo":"+","mi":"neck_height"}}}],"mo":"="}},{"mrow":{"mo":["(",")"],"mrow":{"mi":"EQ","mo":[".","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mn":"6"}}}]},{"mtd":[{"mrow":{"mi":"neck_height","mo":"=","mfrac":{"mrow":{"msub":[{"mi":"y","mn":"18"},{"mi":"y","mn":"0"}],"mo":"-"},"mn":"6"}}},{"mrow":{"mo":["(",")"],"mrow":{"mi":"EQ","mo":[".","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mn":"7"}}}]}]}}},"br":{},"sub":["18 ","0 "],"b":["218","200","136","145","314","323","136","145","136","145","314","323","314","323"],"figref":["FIG. 2","FIG. 1","FIG. 3"]},"The deformation vector ({right arrow over (v)}) applied at points  to  has two components:",{"@attributes":{"id":"p-0035","num":"0038"},"maths":{"@attributes":{"id":"MATH-US-00005","num":"00005"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":[{"mtd":[{"mrow":{"mrow":{"msub":{"mover":{"mi":"v","mo":"\u2192"},"mi":"d_neck"},"mo":"=","mrow":{"mo":["(",")"],"mrow":{"mn":"0","mo":",","msub":{"mi":["y","d_neck"]}}}},"mo":["\u2062","\u2062"],"mstyle":{"mtext":{}},"mi":"when"}},{"mrow":{"mo":["(",")"],"mrow":{"mi":"EQ","mo":[".","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mn":"8"}}}]},{"mtd":[{"mrow":{"mrow":{"mrow":[{"msub":{"mi":["x","i"]},"mo":"<","mrow":{"msub":[{"mi":"x","mn":"41"},{"mi":"y","msub":{"mi":["d_neck","i"]}}],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"1.7em","height":"1.7ex"}}}}},{"mo":"-","mfrac":{"msup":{"mrow":{"mo":["(",")"],"mrow":{"msub":[{"mi":["x","i"]},{"mi":"x","mn":"18"}],"mo":"-"}},"mn":"2"},"mrow":{"mn":"10","mo":"\u00b7","msup":{"mrow":{"mo":["(",")"],"mfrac":{"mrow":{"msub":[{"mi":"x","mn":"24"},{"mi":"x","mn":"13"}],"mo":"-"},"mn":"2"}},"mn":"2"}}}}],"mo":"="},"mo":["\u2062","\u2062"],"mstyle":{"mtext":{}},"mi":"when"}},{"mrow":{"mo":["(",")"],"mrow":{"mrow":{"mi":"EQ","mo":[".","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mn":"9"},"mo":"\u2062","mi":"A"}}}]},{"mtd":[{"mrow":{"mrow":[{"msub":{"mi":["x","i"]},"mo":"\u2265","mrow":{"msub":[{"mi":"x","mn":"41"},{"mi":"y","msub":{"mi":["d_neck","i"]}}],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"1.7em","height":"1.7ex"}}}}},{"mo":"-","mfrac":{"msup":{"mrow":{"mo":["(",")"],"mrow":{"msub":[{"mi":["x","i"]},{"mi":"x","mn":"18"}],"mo":"-"}},"mn":"2"},"mrow":{"mn":"10","mo":"\u00b7","msup":{"mrow":{"mo":["(",")"],"mfrac":{"mrow":{"msub":[{"mi":"x","mn":"24"},{"mi":"x","mn":"13"}],"mo":"-"},"mn":"2"}},"mn":"2"}}}}],"mo":"="}},{"mrow":{"mo":["(",")"],"mrow":{"mrow":{"mi":"EQ","mo":[".","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mn":"9"},"mo":"\u2062","mi":"B"}}}]}]}}}},"The Appendix provides exemplary software code that implements the above algorithm.",{"@attributes":{"id":"p-0037","num":"0040"},"figref":"FIG. 4","b":["401","411"]},"With an embodiment of the invention, A=+100 corresponds to a maximum degree of fattening and A=\u2212100 corresponds to a maximum degree of thinning. The value of A is selected to provide the desired degree of fattening or thinning. For example, if a patient were afflicted anorexia, the value of A would have a negative value that would depend on the degree of affliction and on the medical history and body type of the patient. As another example, a patient may be over-eating or may have an unhealthy diet with many empty calories. In such a case, A would have a positive value. A medical practitioner may be able to gauge the value of A based on experience. However, embodiments of invention may support an automated implementation for determining the value of A. For example, an expert system may incorporate knowledge based on information provided by experienced medical practitioners.",{"@attributes":{"id":"p-0039","num":"0042"},"figref":"FIG. 5","b":["501","511","509","511"]},{"@attributes":{"id":"p-0040","num":"0043"},"figref":"FIG. 6","b":["601","611"]},{"@attributes":{"id":"p-0041","num":"0044"},"figref":"FIG. 7","b":["701","705"]},{"@attributes":{"id":"p-0042","num":"0045"},"figref":"FIG. 8","b":["800","801","803"]},"In step  deformation vectors are determined and applied to points (e.g. points - as shown in ) on the face. For example, as discussed above, EQs. 1-5. are used to determine the relocated points. In step  deformation vectors are determined (e.g., using EQs. 6-9) and applied to points (e.g., points - as shown in ) on the neck. A transformed mesh is generated from which a reshaped image is rendered using computer graphics software in step .",{"@attributes":{"id":"p-0044","num":"0047"},"figref":"FIG. 9","b":["1","1","1","10","12","14","12","10","14","12"]},"Computer  may also include a variety of interface units and drives for reading and writing data. In particular, computer  includes a hard disk interface  and a removable memory interface  respectively coupling a hard disk drive  and a removable memory drive  to system bus . Examples of removable memory drives include magnetic disk drives and optical disk drives. The drives and their associated computer-readable media, such as a floppy disk  provide nonvolatile storage of computer readable instructions, data structures, program modules and other data for computer . A single hard disk drive  and a single removable memory drive  are shown for illustration purposes only and with the understanding that computer  may include several of such drives. Furthermore, computer  may include drives for interfacing with other types of computer readable media.","A user can interact with computer  with a variety of input devices.  shows a serial port interface  coupling a keyboard  and a pointing device  to system bus . Pointing device  may be implemented with a mouse, track ball, pen device, or similar device. Of course one or more other input devices (not shown) such as a joystick, game pad, satellite dish, scanner, touch sensitive screen or the like may be connected to computer .","Computer  may include additional interfaces for connecting devices to system bus .  shows a universal serial bus (USB) interface  coupling a video or digital camera  to system bus . An IEEE 1394 interface  may be used to couple additional devices to computer . Furthermore, interface  may configured to operate with particular manufacture interfaces such as FireWire developed by Apple Computer and i.Link developed by Sony. Input devices may also be coupled to system bus  through a parallel port, a game port, a PCI board or any other interface used to couple and input device to a computer.","Computer  also includes a video adapter  coupling a display device  to system bus . Display device  may include a cathode ray tube (CRT), liquid crystal display (LCD), field emission display (FED), plasma display or any other device that produces an image that is viewable by the user. Additional output devices, such as a printing device (not shown), may be connected to computer .","Sound can be recorded and reproduced with a microphone  and a speaker . A sound card  may be used to couple microphone  and speaker  to system bus . One skilled in the art will appreciate that the device connections shown in  are for illustration purposes only and that several of the peripheral devices could be coupled to system bus  via alternative interfaces. For example, video camera  could be connected to IEEE 1394 interface  and pointing device  could be connected to USB interface .","Computer  can operate in a networked environment using logical connections to one or more remote computers or other devices, such as a server, a router, a network personal computer, a peer device or other common network node, a wireless telephone or wireless personal digital assistant. Computer  includes a network interface  that couples system bus  to a local area network (LAN) . Networking environments are commonplace in offices, enterprise-wide computer networks and home computer systems.","A wide area network (WAN) , such as the Internet, can also be accessed by computer .  shows a modem unit  connected to serial port interface  and to WAN . Modem unit  may be located within or external to computer  and may be any type of conventional modem such as a cable modem or a satellite modem. LAN  may also be used to connect to WAN .  shows a router  that may connect LAN  to WAN  in a conventional manner.","It will be appreciated that the network connections shown are exemplary and other ways of establishing a communications link between the computers can be used. The existence of any of various well-known protocols, such as TCP\/IP, Frame Relay, Ethernet, FTP, HTTP and the like, is presumed, and computer  can be operated in a client-server configuration to permit a user to retrieve web pages from a web-based server. Furthermore, any of various conventional web browsers can be used to display and manipulate data on web pages.","The operation of computer  can be controlled by a variety of different program modules. Examples of program modules are routines, programs, objects, components, and data structures that perform particular tasks or implement particular abstract data types. The present invention may also be practiced with other computer system configurations, including hand-held devices, multiprocessor systems, microprocessor-based or programmable consumer electronics, network PCS, minicomputers, mainframe computers, personal digital assistants and the like. Furthermore, the invention may also be practiced in distributed computing environments where tasks are performed by remote processing devices that are linked through a communications network. In a distributed computing environment, program modules may be located in both local and remote memory storage devices.","In an embodiment of the invention, central processor unit  obtains a face image from digital camera . A user may view the face image on display device  and enter points (e.g., points - as shown in ) to form a mesh that is subsequently altered by central processor  as discussed above. The user may identify the points with a pointer device (e.g. mouse ) that is displayed on display device , which overlays the mesh over the face image. With embodiments of the invention, a face image may be stored and retrieved from hard disk drive  or removable memory drive  or obtained from an external server (not shown) through LAN  or WAN .","Adaptation of Deformation Factor for Pose Angularly Offset",{"@attributes":{"id":"p-0055","num":"0058"},"figref":["FIG. 10","FIG. 10"],"b":["1000","1001","1003","1005"],"sub":["n","n","n","p","p"]},"The camera is characterized by optical center  and focal length (F) . The axis orientation of the camera is characterized by angles \u03b1 , \u03b2 , and \u03b3  corresponding to the x, y, and z axes, respectively. The origin of the axis orientation is located at the center of the camera image plane of the projected section that is shown in . Projected point  (x,y) is related to the corresponding source point  by the following relationship:",{"@attributes":{"id":"p-0057","num":"0060"},"maths":{"@attributes":{"id":"MATH-US-00006","num":"00006"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"mo":["(",")"],"mrow":{"msub":[{"mi":["x","p"]},{"mi":["y","p"]}],"mo":","}},{"mo":["(",")"],"mrow":{"mfrac":[{"mrow":[{"mi":"F","mo":"\u00b7","msub":{"mi":["x","n"]}},{"mi":"F","mo":"-","msub":{"mi":["z","n"]}}]},{"mrow":[{"mi":"F","mo":"\u00b7","msub":{"mi":["y","n"]}},{"mi":"F","mo":"-","msub":{"mi":["z","n"]}}]}],"mo":","}}],"mo":"="}},{"mrow":{"mo":["(",")"],"mrow":{"mi":"EQ","mo":[".","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mn":"10"}}}]}}}},"br":{}},"With embodiments of the invention, one may assume that the face of the person is perpendicular to the axis orientation of the camera. Taking into account the 3D observation model detailed, as will be discussed, a direct pose occurs when \u03b1=\u03b2=\u03b3=0.","Embodiments of the invention support image poses in which the pose is angularly offset. The correction factor for such a situation adapts the deformation factor w applied to the deformation vector of each vertex (e.g., as the vertices shown in ) that is moved during the reshaping of the image (e.g., the face of a person). With an embodiment of the invention, the correction factor may be obtained from an angular displacement and a translation displacement of the source image from the camera image. The translation and the displacement may be determined from the difference from the 3D face pose in a frontal position (from which one has previously computed the weights) and the 3D pose of the face that one has actually taken the picture of.","The observation model utilized to relate the head in its neutral pose (source image facing the camera) and its projected representation taking into account the rigid motion (translations and rotations) of the head observed from reference origin  and the projection due to the camera. Although the acquisition camera is not calibrated because one does not control the nature of the input sequences, one can still consider that it obtains a perspective projection and not an orthogonal projection.","Reference origin  is situated along the optical axis of the camera at the center of camera image plane . Camera image plane  represents the video image where the face is focused. Focal distance F , represents the distance from camera image plane  to the optical center of the camera. To describe the rigid motion of the head, one may specify three translations, along the X, Y and Z-axes, and three rotations, around the X, Y, and Z axes.  presents the graphical interpretation of the model and the orientation of the reference axes.","One may describe points using their homogenous coordinates to be able to describe a perspective transform linearly and derive the relationship between 3D neutral coordinates and 2D projections.","A vector (x, y, z,o)corresponds to a homogenous point if at least one of its elements is not 0. (o is the coordinate that is added to convert the coordinates to homogenous coordinates. Homogeneous coordinates allow affine transformations to be easily represented by a matrix. Also, homogeneous coordinates make calculations possible in projective space just as Cartesian coordinates do in Euclidean space. The homogeneous coordinates of a point of projective space of dimension n are typically written as (x: y: z: . . . :o), a row vector of length n+1, other than (0:0:0: . . . : 0)). If a is a real number and is not 0, (x, y, z, or and (ax,ay,az,ao)represent the same homogenous point. The relationship between a point in 3D or 2D Euclidean space and its homogenous representation is:\n\n()\u2192(1)and ()\u2192(0,1)\n\nOne can obtain the Euclidean representation of a homogenous point only if o\u22600:\n\n()\u2192()and ()\u2192()\n\nAs an example of projective space in three dimensions, there are corresponding homogeneous coordinates (x: y: z: o). The plane at infinity is typically identified with the set of points with o=0. Away from this plane, one can denote (x\/o, y\/o, z\/o) as an ordinary Cartesian system; therefore, the affine space complementary to the plane at infinity is assigned coordinates in a similar way, with a basis corresponding to (1:0:0:1), (0:1:0:1), (0:0:1:1).\n","The following matrices represent different transformations that describe rigid motion, where s=sin(\u03b1), c=cos(\u03b1), s=sin(\u03b2), c=cos(\u03b2), s=sin(\u03b3), and c=cos(\u03b3).\n\n",{"@attributes":{"id":"p-0065","num":"0069"},"maths":{"@attributes":{"id":"MATH-US-00007","num":"00007"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":"T","mrow":{"mo":["(",")"],"mrow":{"msub":[{"mi":["t","X"]},{"mi":["t","Y"]},{"mi":["t","Z"]}],"mo":[",",","]}}},"mo":"=","mrow":{"mrow":{"mo":["[","]"],"mtable":{"mtr":[{"mtd":[{"mn":"1"},{"mn":"0"},{"mn":"0"},{"msub":{"mi":["t","x"]}}]},{"mtd":[{"mn":"0"},{"mn":"1"},{"mn":"0"},{"msub":{"mi":["t","y"]}}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"mn":"1"},{"msub":{"mi":["t","z"]}}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"1"}]}]}},"mo":"."}}}},"ul":{"@attributes":{"id":"ul0009","list-style":"none"},"li":{"@attributes":{"id":"ul0009-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0010","list-style":"none"},"li":"Rotation by an angle of \u03b1 radians around the X-axis:"}}}},{"@attributes":{"id":"p-0066","num":"0071"},"maths":{"@attributes":{"id":"MATH-US-00008","num":"00008"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":"R","mrow":{"mi":["\u03b1","X"],"mo":","}},"mo":"=","mrow":{"mrow":{"mo":["[","]"],"mtable":{"mtr":[{"mtd":[{"mn":"1"},{"mn":"0"},{"mn":"0"},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"msub":{"mi":["c","\u03b1"]}},{"mrow":{"mo":"-","msub":{"mi":["s","\u03b1"]}}},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"msub":{"mi":["s","\u03b1"]}},{"msub":{"mi":["c","\u03b1"]}},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"1"}]}]}},"mo":"."}}}},"ul":{"@attributes":{"id":"ul0011","list-style":"none"},"li":{"@attributes":{"id":"ul0011-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0012","list-style":"none"},"li":"Rotation by an angle of \u03b2 radians around the Y-axis:"}}}},{"@attributes":{"id":"p-0067","num":"0073"},"maths":{"@attributes":{"id":"MATH-US-00009","num":"00009"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":"R","mrow":{"mi":["\u03b2","Y"],"mo":","}},"mo":"=","mrow":{"mrow":{"mo":["[","]"],"mtable":{"mtr":[{"mtd":[{"msub":{"mi":["c","\u03b2"]}},{"mn":"0"},{"msub":{"mi":["s","\u03b2"]}},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"mn":"1"},{"mn":"0"},{"mn":"0"}]},{"mtd":[{"mrow":{"mo":"-","msub":{"mi":["s","\u03b2"]}}},{"mn":"0"},{"msub":{"mi":["c","\u03b2"]}},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"1"}]}]}},"mo":"."}}}},"ul":{"@attributes":{"id":"ul0013","list-style":"none"},"li":{"@attributes":{"id":"ul0013-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0014","list-style":"none"},"li":"Rotation by an angle of \u03b3 radians around the Z-axis:"}}}},{"@attributes":{"id":"p-0068","num":"0075"},"maths":{"@attributes":{"id":"MATH-US-00010","num":"00010"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":"R","mrow":{"mi":["\u03b3","Z"],"mo":","}},"mo":"=","mrow":{"mrow":{"mo":["[","]"],"mtable":{"mtr":[{"mtd":[{"msub":{"mi":["c","\u03b3"]}},{"mrow":{"mo":"-","msub":{"mi":["s","\u03b3"]}}},{"mn":"0"},{"mn":"0"}]},{"mtd":[{"msub":{"mi":["s","\u03b3"]}},{"msub":{"mi":["c","\u03b3"]}},{"mn":"0"},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"mn":"1"},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"1"}]}]}},"mo":"."}}}}},"The final location of the head regarding reference origin  is obtained applying the translation and rotation matrices upon the coordinates of the head in its neutral pose.\n\n\n\nwhere\n\n\n","Then, the position \u201chead is facing the camera\u201d is defined when (t,t,t)=(0,0,0) \u03b1=0, \u03b2=0 and \u03b3=0. The observed projection on camera image plane  is:",{"@attributes":{"id":"p-0071","num":"0078"},"maths":[{"@attributes":{"id":"MATH-US-00011","num":"00011"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mstyle":{"mspace":{"@attributes":{"width":"4.4em","height":"4.4ex"}}},"mo":"\u2062","mrow":{"mrow":{"msubsup":{"mi":["x","p","T"]},"mo":"=","mrow":{"msub":[{"mi":["P","F"]},{"mi":"T","mrow":{"mo":["(",")"],"mrow":{"mn":["0","0"],"mo":[",",","],"mrow":{"mo":"-","mi":"F"}}}}],"mo":["\u00b7","\u00b7"],"msubsup":{"mi":["x","trans","T"]}}},"mo":[",","\u2062","\u2062"],"mstyle":[{"mtext":{}},{"mspace":{"@attributes":{"width":"4.4em","height":"4.4ex"}}}],"mi":"where"}}}},{"@attributes":{"id":"MATH-US-00011-2","num":"00011.2"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"msub":[{"mi":["P","F"]},{"mi":"T","mrow":{"mo":["(",")"],"mrow":{"mn":["0","0"],"mo":[",",","],"mrow":{"mo":"-","mi":"F"}}}}],"mo":"\u00b7"},{"mrow":[{"mrow":[{"mo":["[","]"],"mtable":{"mtr":[{"mtd":[{"mi":"F"},{"mn":"0"},{"mn":"0"},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"mi":"F"},{"mn":"0"},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"mrow":{"mo":"-","mn":"1"}},{"mrow":{"mrow":{"mo":"-","mn":"2"},"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mi":"F"}}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"mrow":{"mo":"-","mn":"1"}},{"mn":"0"}]}]}},{"mo":["[","]"],"mtable":{"mtr":[{"mtd":[{"mn":"1"},{"mn":"0"},{"mn":"0"},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"mn":"1"},{"mn":"0"},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"mn":"1"},{"mrow":{"mo":"-","mi":"F"}}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"mn":"0"},{"mn":"1"}]}]}}],"mo":"\u00b7"},{"mo":["[","]"],"mtable":{"mtr":[{"mtd":[{"mi":"F"},{"mn":"0"},{"mn":"0"},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"mi":"F"},{"mn":"0"},{"mn":"0"}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"mrow":{"mo":"-","mn":"1"}},{"mrow":{"mo":"-","mi":"F"}}]},{"mtd":[{"mn":"0"},{"mn":"0"},{"mrow":{"mo":"-","mn":"1"}},{"mi":"F"}]}]}}],"mo":"="}],"mo":"="}}}],"br":{},"sub":["F","(0,0,-F)"],"figref":"FIG. 10","b":"1005"},{"@attributes":{"id":"p-0072","num":"0079"},"maths":{"@attributes":{"id":"MATH-US-00012","num":"00012"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"mo":["[","]"],"mtable":{"mtr":[{"mtd":{"msub":{"mi":["x","p"]}}},{"mtd":{"msub":{"mi":["y","p"]}}},{"mtd":{"msub":{"mi":["z","p"]}}},{"mtd":{"msub":{"mi":["o","p"]}}}]}},{"mrow":[{"mo":["[","\u2062","]"],"mstyle":{"mspace":{"@attributes":{"width":"0.em","height":"0.ex"}}},"mtable":{"mtr":[{"mtd":[{"mrow":{"msub":[{"mi":["Fc","\u03b2"]},{"mi":["c","\u03b3"]}],"mo":"\u2062"}},{"mrow":{"mrow":{"mo":"-","msub":{"mi":["Fc","\u03b2"]}},"mo":"\u2062","msub":{"mi":["s","\u03b3"]}}},{"msub":{"mi":["Fs","\u03b2"]}},{"msub":{"mi":["Ft","X"]}}]},{"mtd":[{"mrow":{"mi":"F","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mrow":[{"msub":[{"mi":["c","\u03b1"]},{"mi":["s","\u03b3"]}],"mo":"\u2062"},{"msub":[{"mi":["s","\u03b1"]},{"mi":["s","\u03b2"]},{"mi":["c","\u03b3"]}],"mo":["\u2062","\u2062"]}],"mo":"+"}}}},{"mrow":{"mi":"F","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mrow":[{"msub":[{"mi":["c","\u03b1"]},{"mi":["c","\u03b3"]}],"mo":"\u2062"},{"msub":[{"mi":["s","\u03b1"]},{"mi":["s","\u03b2"]},{"mi":["s","\u03b3"]}],"mo":["\u2062","\u2062"]}],"mo":"-"}}}},{"mrow":{"mi":"F","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mrow":{"mo":"-","msub":{"mi":["s","\u03b1"]}},"mo":"\u2062","msub":{"mi":["c","\u03b2"]}}}}},{"msub":{"mi":["Ft","Y"]}}]},{"mtd":[{"mrow":{"mrow":[{"msub":[{"mi":["c","\u03b1"]},{"mi":["s","\u03b2"]},{"mi":["c","\u03b3"]}],"mo":["\u2062","\u2062"]},{"msub":[{"mi":["s","\u03b1"]},{"mi":["c","\u03b3"]}],"mo":"\u2062"}],"mo":"-"}},{"mrow":{"mrow":[{"mrow":{"mo":"-","msub":{"mi":["c","\u03b1"]}},"mo":["\u2062","\u2062"],"msub":[{"mi":["s","\u03b2"]},{"mi":["c","\u03b3"]}]},{"msub":[{"mi":["s","\u03b1"]},{"mi":["c","\u03b3"]}],"mo":"\u2062"}],"mo":"-"}},{"mrow":{"mrow":{"mo":"-","msub":{"mi":["c","\u03b1"]}},"mo":"\u2062","msub":{"mi":["c","\u03b2"]}}},{"mrow":{"mrow":{"mo":"-","msub":{"mi":["t","Z"]}},"mo":"-","mi":"F"}}]},{"mtd":[{"mrow":{"mrow":[{"msub":[{"mi":["c","\u03b1"]},{"mi":["s","\u03b2"]},{"mi":["c","\u03b3"]}],"mo":["\u2062","\u2062"]},{"msub":[{"mi":["s","\u03b1"]},{"mi":["c","\u03b3"]}],"mo":"\u2062"}],"mo":"-"}},{"mrow":{"mrow":[{"mrow":{"mo":"-","msub":{"mi":["c","\u03b1"]}},"mo":["\u2062","\u2062"],"msub":[{"mi":["s","\u03b2"]},{"mi":["c","\u03b3"]}]},{"msub":[{"mi":["s","\u03b1"]},{"mi":["c","\u03b3"]}],"mo":"\u2062"}],"mo":"-"}},{"mrow":{"mrow":{"mo":"-","msub":{"mi":["c","\u03b1"]}},"mo":"\u2062","msub":{"mi":["c","\u03b2"]}}},{"mrow":{"mrow":{"mo":"-","msub":{"mi":["t","Z"]}},"mo":"+","mi":"F"}}]}]}},{"mo":["[","\u2062","]"],"mstyle":{"mspace":{"@attributes":{"width":"0.em","height":"0.ex"}}},"mtable":{"mtr":[{"mtd":{"msub":{"mi":["x","n"]}}},{"mtd":{"msub":{"mi":["y","n"]}}},{"mtd":{"msub":{"mi":["z","n"]}}},{"mtd":{"msub":{"mi":["o","n"]}}}]}}],"mo":"\u00b7"}],"mo":"="}}}},"After transforming the homogenous coordinates to Euclidean space coordinates (o=1 and zis not taken into account), the observation (x,y)on the image plane of a given point (x, y, z)belonging to the face in its neutral pose is:",{"@attributes":{"id":"p-0074","num":"0081"},"maths":[{"@attributes":{"id":"MATH-US-00013","num":"00013"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mrow":[{"mo":["[","]"],"mtable":{"mtr":[{"mtd":{"msub":{"mi":["x","p"]}}},{"mtd":{"msub":{"mi":["y","p"]}}}]}},{"mn":"2","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mi":"D"}]},"mo":"=","mrow":{"mfrac":{"mi":["F","N"]},"mo":"\u2061","mrow":{"mo":["[","]"],"mtable":{"mtr":[{"mtd":{"mrow":{"mrow":[{"msub":[{"mi":["c","\u03b2"]},{"mi":["c","\u03b3"]},{"mi":["x","n"]}],"mo":["\u2062","\u2062"]},{"msub":[{"mi":["c","\u03b2"]},{"mi":["s","\u03b3"]},{"mi":["y","n"]}],"mo":["\u2062","\u2062"]},{"msub":[{"mi":["s","\u03b2"]},{"mi":["z","n"]}],"mo":"\u2062"}],"mo":["-","+","+"],"msub":{"mi":["t","X"]}}}},{"mtd":{"mrow":{"mrow":[{"mrow":{"mo":["(",")"],"mrow":{"mrow":[{"msub":[{"mi":["s","\u03b1"]},{"mi":["s","\u03b2"]},{"mi":["c","\u03b3"]}],"mo":["\u2062","\u2062"]},{"msub":[{"mi":["c","\u03b1"]},{"mi":["s","\u03b3"]}],"mo":"\u2062"}],"mo":"+"}},"mo":"\u2062","msub":{"mi":["x","n"]}},{"mrow":{"mo":["(",")"],"mrow":{"mrow":[{"msub":[{"mi":["s","\u03b1"]},{"mi":["s","\u03b2"]},{"mi":["s","\u03b3"]}],"mo":["\u2062","\u2062"]},{"msub":[{"mi":["c","\u03b1"]},{"mi":["c","\u03b3"]}],"mo":"\u2062"}],"mo":"-"}},"mo":"\u2062","msub":{"mi":["y","n"]}},{"msub":[{"mi":["s","\u03b1"]},{"mi":["c","\u03b2"]},{"mi":["z","n"]}],"mo":["\u2062","\u2062"]}],"mo":["-","-","+"],"msub":{"mi":["t","Y"]}}}}]}}}}}},{"@attributes":{"id":"MATH-US-00013-2","num":"00013.2"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mstyle":{"mspace":{"@attributes":{"width":"4.4em","height":"4.4ex"}}},"mo":"\u2062","mrow":{"mi":"N","mo":"=","mrow":{"mrow":[{"mrow":{"mo":["(",")"],"mrow":{"mrow":[{"msub":[{"mi":["c","\u03b1"]},{"mi":["s","\u03b2"]},{"mi":["c","\u03b3"]}],"mo":["\u2062","\u2062"]},{"msub":[{"mi":["s","\u03b1"]},{"mi":["s","\u03b3"]}],"mo":"\u2062"}],"mo":"-"}},"mo":"\u2062","msub":{"mi":["x","n"]}},{"mrow":{"mo":["(",")"],"mrow":{"mrow":[{"mrow":{"mo":"-","msub":{"mi":["c","\u03b1"]}},"mo":["\u2062","\u2062"],"msub":[{"mi":["s","\u03b2"]},{"mi":["s","\u03b3"]}]},{"msub":[{"mi":["s","\u03b1"]},{"mi":["c","\u03b3"]}],"mo":"\u2062"}],"mo":"-"}},"mo":"\u2062","msub":{"mi":["y","n"]}},{"msub":[{"mi":["c","\u03b1"]},{"mi":["c","\u03b2"]},{"mi":["z","n"]}],"mo":["\u2062","\u2062"]}],"mo":["+","-","-","+"],"msub":{"mi":["t","z"]},"mi":"F"}}}}}]},"For each of the vertices i to be moved during the reshaping of the face (referring to ) according to the new deformation factor w.",{"@attributes":{"id":"p-0076","num":"0083"},"maths":{"@attributes":{"id":"MATH-US-00014","num":"00014"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":[{"mtd":[{"mrow":{"mrow":{"msubsup":{"mi":["w","new"],"mrow":{"mi":"i","mo":"="}},"mo":"=","mrow":{"msub":{"mi":["w","i"]},"mo":"\u00b7","mrow":{"mo":["(",")"],"mrow":{"mrow":{"msub":{"mi":["r","i"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["\u03b1","\u03b2"],"mo":[",",","],"msub":{"mi":["t","z"]}}}},"mo":"+","mn":"1"}}}},"mo":["\u2062","\u2062"],"mstyle":{"mtext":{}},"mi":"where"}},{"mrow":{"mo":["(",")"],"mrow":{"mi":"EQ","mo":[".","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mn":"11"}}}]},{"mtd":[{"mrow":{"mrow":[{"msub":{"mi":["r","i"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mi":["\u03b1","\u03b2"],"mo":[",",","],"msub":{"mi":["t","z"]}}}},{"mrow":{"mo":["(",")"],"mfrac":{"mrow":{"mrow":[{"mi":"\u03b1","mo":"\u00b7","mrow":{"mo":["(",")"],"mrow":{"msub":[{"mi":"y","mrow":{"mi":"C","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"1"}},{"mi":["y","i"]}],"mo":"-"}}},{"mi":"\u03b2","mo":"\u00b7","mrow":{"mo":["(",")"],"mrow":{"msub":[{"mi":["x","i"]},{"mi":"x","mn":"18"}],"mo":"-"}}}],"mo":"+"},"mi":"E"}},"mo":"+","mfrac":{"msub":{"mi":["t","z"]},"mi":"G"}}],"mo":"="}},{"mrow":{"mo":["(",")"],"mrow":{"mi":"EQ","mo":[".","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mn":"12"}}}]}]}}},"br":{},"sub":["i ","i ","18 ","c1 ","y","z","c1","i","1","18","z "],"sup":"th ","b":["218","251","2"],"figref":"FIG. 2"},"From EQs. 11 and 12, a deformation factor w (e.g., as determined with EQs. 4A-4D) is multiplied by a correction factor r(\u03b1,\u2295,t)+1 in order obtain a new (corrected) deformation factor wFrom EQs. 1-5B, a corrected deformation vector is determined. Each deformation vector is applied to a corresponding vertex to obtain a transformed mesh. Experimental data using EQs. 11-12 have been obtained for angular displacement \u03b1  varying between \u00b10.087 radians and angular displacement \u03b2  varying between \u00b10.17 radians.","As can be appreciated by one skilled in the art, a computer system (e.g., computer  as shown in ) with an associated computer-readable medium containing instructions for controlling the computer system may be utilized to implement the exemplary embodiments that are disclosed herein. The computer system may include at least one computer such as a microprocessor, a cluster of microprocessors, a mainframe, and networked workstations.","While the invention has been described with respect to specific examples including presently preferred modes of carrying out the invention, those skilled in the art will appreciate that there are numerous variations and permutations of the above described systems and techniques that fall within the spirit and scope of the invention as set forth in the appended claims.",{"@attributes":{"id":"p-0080","num":"0087"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"APPENDIX"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"EXEMPLARY CODE FOR THE ALGORITHM"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"void CAAMUtil::PTS2ASF_SKIN( const CString &path, const CString"},{"entry":"&path_image, const CString &path_out ) {"},{"entry":"using namespace std;"},{"entry":"\/\/read the ASF model"},{"entry":"char name[ ]=\u201cC:\\\\hello\\\\Picture_001.bmp\u201d;"},{"entry":"double original_width=0;"},{"entry":"double original_height=0;"},{"entry":"CDMultiBand<TAAMPixel> texture;"},{"entry":"CAAMShape shape;"},{"entry":"CAAMShape shape_dummy;"},{"entry":"int www=0;"},{"entry":"int hhh=0;"},{"entry":"long sss=0;"},{"entry":"BYTE* buffer;"},{"entry":"buffer = LoadBMP(&www,&hhh,&sss,path_image);"},{"entry":"double W = double(www);"},{"entry":"double H = double(hhh);"},{"entry":"bool ok = shape.ReadASF(path);"},{"entry":"\/\/change from relative coordinates to absolute ones, cos the"},{"entry":"algorithm works with those"},{"entry":"shape.Rel2Abs(W,H);"},{"entry":"original_width = shape.Width( );"},{"entry":"original_height = shape.Height( );"},{"entry":"\/\/cout<<original_width<<endl;"},{"entry":"\/\/cout<<original_height<<endl;"},{"entry":"\/\/get the number of points"},{"entry":"int n = shape.NPoints( );"},{"entry":"\/\/cout<<\u201cnumber of points: \u201d<<n<<endl;"},{"entry":"int k=0;"},{"entry":"\/\/create the userfields with a resize"},{"entry":"shape.UserField(1).resize(n);"},{"entry":"shape.UserField(2).resize(n);"},{"entry":"shape.UserField(3).resize(n);"},{"entry":"\/\/create all the variables needed for the manipulation"},{"entry":"\/\/ data needed for deformation computation"},{"entry":"double scale = (shape.MaxX( ) \u2212 shape.MinX( ))\/1000.0;"},{"entry":"double center1_x = (shape.MaxX( ) + shape.MinX( ))\/2.0;"},{"entry":"double center1_y = (shape.MaxY( ) + shape.MinY( ))\/2.0;"},{"entry":"double center2_x = center1_x;"},{"entry":"double center2_y = center1_y+(shape.MaxY( ) \u2212"},{"entry":"shape.MinY( ))\/4.0; \/\/!!watch out signs"},{"entry":"double x1, y1, x2, y2;"},{"entry":"\/\/esto tan hardcode no puede ser bueno..."},{"entry":"shape.GetPoint(6,x1,y1);"},{"entry":"\/\/cout<<\u201cpoint 6 :\u201d<<x1<<\u201c,\u201d<<y1<<endl; \/\/aqui hem dona"},{"entry":"x1=0,y1=0 ??"},{"entry":"shape.GetPoint(13,x2,y2);"},{"entry":"double dAB = sqrt(pow(x1\u2212x2,2)+pow(y1\u2212y2,2));"},{"entry":"\/\/mirar que sea el 18 seguro"},{"entry":"shape.GetPoint(18,x1,y1);"},{"entry":"double dBC = sqrt(pow(x1\u2212x2,2)+pow(y1\u2212y2,2));"},{"entry":"shape.GetPoint(18,x1,y1);"},{"entry":"shape.GetPoint(24,x2,y2);"},{"entry":"double dCD = sqrt(pow(x1\u2212x2,2)+pow(y1\u2212y2,2));"},{"entry":"shape.GetPoint(31,x1,y1);"},{"entry":"double dDE = sqrt(pow(x1\u2212x2,2)+pow(y1\u2212y2,2));"},{"entry":"\/\/bucle to modify the interesting points and modify the"},{"entry":"interesting points"},{"entry":"for(k=0;k<n;k++){"},{"entry":"if(k==6\u2225k==7\u2225k==8\u2225k==9\u2225k==10\u2225k==11\u2225k==12\u2225k==13\u2225k==24\u2225"},{"entry":"k==25\u2225k==26\u2225k==27\u2225k==28\u2225k==29\u2225k==30\u2225k==31)"},{"entry":"{"},{"entry":"shape.UserField(1)[k]=1.0;"},{"entry":"shape.GetPoint(k,x1,y1);"},{"entry":"\/\/cout<<\u201cpoint \u201d<<k<<\u201c :\u201d<<x1<<\u201c,\u201d<<y1<<endl;"},{"entry":"double weight = 1.;"},{"entry":"if(6<=k&&k<=13)"},{"entry":"{"},{"entry":"shape.GetPoint(6,x2,y2);"},{"entry":"double distance = sqrt(pow(x2 \u2212"},{"entry":"x1,2)+pow(y2 \u2212 y1,2));"},{"entry":"weight ="},{"entry":"2.0\/3.0*(1.0\/dAB)*distance+1.\/3.;"},{"entry":"}"},{"entry":"if(24<=k&&k<=31)"},{"entry":"{"},{"entry":"shape.GetPoint(31,x2,y2);"},{"entry":"double distance = sqrt(pow(x2 \u2212"},{"entry":"x1,2)+pow(y2 \u2212 y1,2));"},{"entry":"weight ="},{"entry":"2.0\/3.0*(1.0\/dDE)*distance+1.\/3.;"},{"entry":"}"},{"entry":"double vector_x = (x1\u2212"},{"entry":"center1_x)\/sqrt(pow(center1_x \u2212 x1,2)+pow(center1_y \u2212 y1,2));"},{"entry":"double vector_y = (y1\u2212"},{"entry":"center1_y)\/sqrt(pow(center1_x \u2212 x1,2)+pow(center1_y \u2212 y1,2));"},{"entry":"shape.UserField(2)[k]=vector_x*scale*weight;"},{"entry":"shape.UserField(3)[k]=vector_y*scale*weight;"},{"entry":"}"},{"entry":"if(k==14\u2225k==15\u2225k==16\u2225k==17\u2225k==18\u2225k==19\u2225k==20\u2225k==21\u2225k==22|"},{"entry":"|k==23)"},{"entry":"{"},{"entry":"shape.UserField(1)[k]=1.0;"},{"entry":"shape.GetPoint(k,x1,y1);"},{"entry":"double weight = 1.;"},{"entry":"if(12<=k&&k<=17)"},{"entry":"{"},{"entry":"shape.GetPoint(13,x2,y2);"},{"entry":"double distance = sqrt(pow(x2 \u2212"},{"entry":"x1,2)+pow(y2 \u2212 y1,2));"},{"entry":"weight = \u2212"},{"entry":"(1.0\/pow(dBC,2))*pow(distance,2)+1.;"},{"entry":"}"},{"entry":"if(18<=k&&k<=23)"},{"entry":"{"},{"entry":"shape.GetPoint(24,x2,y2);"},{"entry":"double distance = sqrt(pow(x2 \u2212"},{"entry":"x1,2)+pow(y2 \u2212 y1,2));"},{"entry":"weight = \u2212"},{"entry":"(1.0\/pow(dCD,2))*pow(distance,2)+1.;"},{"entry":"}"},{"entry":"double vector_x = (x1\u2212"},{"entry":"center2_x)\/sqrt(pow(center2_x \u2212 x1,2)+pow(center2_y \u2212 y1,2));"},{"entry":"double vector_y = (y1\u2212"},{"entry":"center2_y)\/sqrt(pow(center2_x \u2212 x1,2)+pow(center2_y \u2212 y1,2));"},{"entry":"shape.UserField(2)[k]=vector_x*weight*scale;"},{"entry":"shape.UserField(3)[k]=vector_y*weight*scale;"},{"entry":"}"},{"entry":"}"},{"entry":"CAAMShape shape2;"},{"entry":"\/\/change the size of the shape2\u2212> 10 points for the neck"},{"entry":"shape2.Resize(20,0);"},{"entry":"\/\/when resize the fields for the users, we are creating the space for"},{"entry":"them"},{"entry":"shape2.UserField(1).resize(n);"},{"entry":"shape2.UserField(2).resize(n);"},{"entry":"shape2.UserField(3).resize(n);"},{"entry":"\/\/filling the fields"},{"entry":"\/\/first we obtain the distance of the face, and will displace the"},{"entry":"interesting points a third of this distance to the bottom of the image"},{"entry":"double desp_y =0;"},{"entry":"double desp_x =0;"},{"entry":"double xa,ya,xb,yb,xc,yc;"},{"entry":"desp_y = shape.Height( );"},{"entry":"desp_y = desp_y\/3.0;"},{"entry":"\/\/cout<<\u201cdistance of the neck: \u201d<<desp_y<<endl;"},{"entry":"\/\/we also need the distance between the extrems of the neck, we can do"},{"entry":"it like this"},{"entry":"shape.GetPoint(14,xb,yb);"},{"entry":"shape.GetPoint(23,xc,yc);"},{"entry":"desp_x = (xc\u2212xb)\/2;"},{"entry":"shape.GetPoint(18,xc,yb);"},{"entry":"\/\/then we take the interesting points, the x will be the same, and the"},{"entry":"y will be desplaced desp_y"},{"entry":"double neck[10];"},{"entry":"double dist;"},{"entry":"for(k=14;k<24;k++){"},{"entry":"shape.GetPoint(k,xa,ya);"},{"entry":"ya=ya\u2212desp_y;"},{"entry":"shape2.SetPoint(k\u221214,xa,ya);"},{"entry":"dist=xa\u2212xc;"},{"entry":"if(k<18)"},{"entry":"neck[k\u221214]=\u2212(((dist*dist)\/(10*desp_x*desp_x)));"},{"entry":"else neck[k\u221214]=(((dist*dist)\/(10*desp_x*desp_x)));"},{"entry":"}"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}]}}}],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The present invention is illustrated by way of example and not limited in the accompanying figures in which like reference numerals indicate similar elements and in which:",{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 10"}]},"DETDESC":[{},{}]}
