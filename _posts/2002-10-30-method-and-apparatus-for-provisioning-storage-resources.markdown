---
title: Method and apparatus for provisioning storage resources
abstract: A method and apparatus for automatically provisioning at least a portion of a computer system to meet a specification provided in a provisioning request. In one embodiment, the provisioning includes provisioning at least one resource from each of at least one host computer, at least one storage system, and at least one connectivity resource that connects the at least one host computer to the at least one storage system. In another embodiment, the provisioning includes selecting and configuring at least one logical volume of storage and configuring the computer system to provide access to the selected volume. In another aspect, a computer-readable provisioning transaction is created to provision the computer system, and a computer-readable undo transaction is created to undo it. In a further embodiment, an existing computer system is reverse engineered to create a specification that is modified to create the specification in the provisioning request.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07945669&OS=07945669&RS=07945669
owner: EMC Corporation
number: 07945669
owner_city: Hopkinton
owner_country: US
publication_date: 20021030
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["FIELD OF THE INVENTION","DESCRIPTION OF THE RELATED ART","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION"],"p":["The present invention relates to computer systems, and more particularly to provisioning resources in a computer system.","Many computer systems include one or more host computers, one or more storage systems that store data used by the host computers, and one or more networking components which enable communication between the host computers and the storage systems. An example of such a system is shown in .","The system  of  includes a pair of host computers , , a pair of storage systems ,, and a plurality of switches - that connect the hosts to the storage systems. As depicted in , host computers ,  each includes one or more file systems , , which are logically related sets of data, created and maintained by the hosts' operating systems, and stored among logical volumes of storage presented by the storage systems ,  (as represented by dotted lines in ). The logical volumes may each correspond to a physical storage device (such as a disk drive) within one of the storage systems, or if storage systems ,  are intelligent storage systems, a mapping layer may be provided by the storage systems between the logical volumes presented to the host computers and the physical storage devices. Thus, there need not be a one-to-one correspondence between the logical volumes presented to the host computers and the physical storage devices, as a single logical volume can be spread across multiple physical storage devices, or alternatively, a number of physical storage devices can be combined to store the data for a single logical volume.","In some computer systems, storage systems may be directly attached to the host computers, such that each port on the storage system may be dedicated to a port on a particular host computer. However, in the illustrative computer system of , a storage area network (SAN) is employed, so that access to the storage systems ,  may be shared among multiple host computers. Thus, networking components are connected between the host computers ,  and the storage systems , . As depicted in , the networking components may include one or more switches - that may be interconnected between the host computers ,  and the storage systems ,  to provide the desired configuration. In this respect, it should be appreciated that each of the host computers , , the storage systems ,  and the switches - has one or more ports that are capable of being coupled, via a communication medium, to the port of another device to enable communication through that port. For example, in the illustrative computer system of , the host computer  includes a plurality of ports , each interconnected via a communication line  to one of a plurality of ports  on switch . Similarly, host computer  includes a plurality of ports  that are each interconnected, via a communication line , to one of a plurality of ports  on switch . The switch  further includes a port  that is coupled via communication line  to one of a plurality of ports  on switch . Similarly, switch  includes a port  that is coupled via a communication line  to another one of the plurality of ports  on switch . Finally, switch  includes a plurality of ports  that are interconnected, via a plurality of communication lines , to the storage systems , . In particular, storage system  includes a plurality of ports  that are coupled to a subset of the ports  of switch  via some of the communication lines , and storage system  includes a plurality of ports  that are connected to different ones of the ports  on the switch  via the other communication lines .","It should be appreciated that the above-discussed configuration provides a physical communication path from any of the ports on the host computers , , through the switches , to any of the ports on the storage systems , . Each of the storage systems ,  can be configured so that one or more logical volumes ( for the storage system  and  for the storage system ) may be made available outside of the storage system on one or more of the storage system ports , . In the illustrative configuration of , two of the logical volumes  in the storage system  are exported through each of the ports , and two of the logical volumes  in the storage system  are exported through each of the ports .","Although the physical connections illustrated in the system of  may make it physically possible for each of the host computers ,  to access each of the logical volumes ,  over any of the host computer ports , , it should be appreciated that in most typical computer system configurations the access afforded a host computer will be more limited. For example, in many computer systems, any particular one of the logical volumes ,  will not be shared by the host computers , , but will be dedicated to only one of the host computers. In particular, in some computer system configurations, security measures (e.g., zoning and\/or masking) are performed to define limited access to one or more of the logical volumes , .","Another example of a computer system is shown in  and includes a host computer  and a storage system  that includes a plurality of storage devices on which data is stored. The host computer  and storage system  show illustrative configurations for the host computers ,  and storage systems ,  in the system  of , although numerous other configurations are possible.","In the exemplary system shown in , the storage system  includes a plurality of disk drives -and a plurality of disk controllers -that respectively control access to the disk drives -. The storage system  further includes a plurality of storage bus directors  that control communication with the host computer  over communication buses . The storage system  also includes a cache  to provide improved storage system performance; in particular, when the host computer  executes a read from the storage system , the storage system  may service the read from the cache  (when the data is stored in the cache) rather than from one of the disk drives -, to execute the read more efficiently. Similarly, when the host computer  executes a write to the storage system , the corresponding storage bus director  can execute the write to the cache . Thereafter the write can be performed asynchronously, in a manner transparent to the host computer , to the appropriate one of the disk drives -. Finally, the storage system  includes an internal bus  over which the storage bus directors , disk controllers -, and cache  communicate.","The host computer  includes a processor , and one or more host bus adapters  that each controls communication between the processor  and the storage system  via a corresponding one of the communication buses . It should be appreciated that rather than a single processor , the host computer  can include multiple processors. Each bus  can be any of a number of different types of communication links, with the host bus adapter  and the storage bus directors  being adapted to communicate using an appropriate protocol for the communication bus  coupled therebetween. For example, each of the communication buses  can be implemented as a SCSI bus with the directors  and adapters  each being a SCSI driver. Alternatively, communication between the host computer  and the storage system  can performed over a Fibre Channel fabric.","As shown in the exemplary system of , some computer systems employ multiple paths for communication between the host computer  and the storage system  (e.g. each path includes a host bus adapter , a bus , and a storage bus director  in ). In many such systems, each of the host bus adapters  has the ability to access each of the disk drives -through the appropriate storage bus director  and disk controller -. It should be appreciated that providing such multi-path capabilities enhances system performance, and that multiple communication operations between the host computer  and the storage system  can be performed simultaneously.",{"@attributes":{"id":"p-0012","num":"0011"},"figref":["FIG. 5","FIG. 4"],"b":["521","416","401","521","403","521","523","521","405","405","403","523","525","523","403","525"],"i":["a","b"]},"If the storage system  were not an intelligent storage system, the logical volume address specified by the multi-pathing layer  would identify a particular physical device (e.g. one of the disk drives -) within the storage system . However, for an intelligent storage system such as that shown in , the storage system itself may include a further mapping layer  such that the logical volume address passed from the host computer  may not correspond directly to an actual physical device (e.g. a disk drive -) on the storage system . Rather, a logical volume specified by the host computer  can be spread across multiple physical storage devices (e.g. disk drives -), or multiple logical volumes accessed by the host computer  can stored on the single physical storage device.","It should be appreciated that the particular system configurations shown in , , and  are provided merely for illustrative purposes, and that typical configurations can vary in many ways, and can often be significantly more complex in terms of the numbers of host computers, storage systems and\/or networking components that interconnect them. Furthermore, while each of the multiple instances of host computers, switches and storage systems in  is illustrated as having essentially the same configuration (e.g., the same number of ports, the same number of logical volumes, etc.), it should be appreciated that in typical configurations, the various system components may have different configurations.","It should be appreciated that resource selection and configuration to form a computer system such as that in  can be a complex and labor-intensive exercise, as there are a myriad of operations to be performed. For example, to create the configuration of  which employs the mapping layers depicted in , determinations are made concerning the numbers and sizes of logical volumes ,  to be made available to particular resources in the host computers ,  (e.g., file systems , ), and through which of the ports of the storage systems, switches and host computers the logical volumes will be made available. In addition, security measures are implemented to define host access to logical volumes, and scanning steps are performed by the host computers ,  for each port ,  to enable the host computers to recognize the logical volumes that have been made available to them. The configuration process can be further complicated by the fact that system components can possess heterogeneous physical characteristics. For example, communication links , , , ,  may each be implemented as a SCSI bus, Fibre Channel connection or other type of connection, switches - can be selected from a collection of heterogeneous switch types, and host computers and\/or storage systems may be supplied by different vendors. Each of these components may have particular configuration requirements.","In view of the complex, labor-intensive and time-consuming nature of the configuration process for a computer system, one embodiment of the present invention is directed to techniques for automating and\/or facilitating the provisioning of such a computer system.","One embodiment of the invention is directed to a method of provisioning at least a portion of a computer system to meet a specification provided in a provisioning request. The method comprises computer-implemented acts of: (A) reading the provisioning request; and (B) automatically provisioning the at least a portion of the computer system to meet the specification provided in the provisioning request, including automatically provisioning at least one resource on at least one host computer, at least one resource from at least one storage system, and at least one component of at least one connectivity resource that connects the at least one host computer to the at least one storage system. Another embodiment is directed to a computer readable medium encoded with a computer program that, when executed, performs the method.","Another embodiment is directed to an apparatus comprising at least one processor programmed to automatically provision at least a portion of a computer system to meet a specification provided in a provisioning request, including automatically provisioning at least one resource on at least one host computer, at least one resource from at least one storage system, and at least one component of at least one connectivity resource that connects the at least one host computer to the at least one storage system.","A further embodiment is directed to a method of provisioning at least a portion of a computer system to meet a specification provided in a provisioning request. The method comprises computer-implemented acts of: (A) reading the provisioning request, the provisioning request defining the at least a portion of the computer system to comprise a unit of storage to be provided to at least one of a plurality of host computers; and (B) automatically provisioning the at least a portion of the computer system in response to the provisioning request. The act (B) includes acts of: (B1) selecting at least one logical volume of storage from at least one storage system that can serve as the unit of storage defined by the provisioning request; (B2) selecting at least one connectivity resource that can provide a communication path through which the selected at least one logical volume can be made accessible to the at least one of the plurality of host computers; (B3) creating a transaction that comprises a series of actions to configure the selected at least one logical volume and the selected at least one connectivity resource to satisfy the provisioning request, including configuring the selected at least one logical volume to satisfy the provisioning request, mapping the selected at least one logical volume to at least one port of the at least one storage system through which the selected at least one logical volume will be accessible, configuring the communication path, and configuring security measures on at least a portion of the computer system to provide access to the selected at least one logical volume only to the at least one of the plurality of host computers; and (B4) executing the transaction to configure the selected at least one logical volume and the selected at least one connectivity resource in a manner that satisfies the provisioning request. Another embodiment is directed to a computer readable medium encoded with a computer program that, when executed, performs the method.","Another embodiment is directed to an apparatus, comprising at least one processor programmed to automatically provision at least a portion of a computer system to meet a specification provided in a provisioning request that defines the at least a portion of the computer system to comprise a unit of storage to be provided to at least one of a plurality of host computers. The at least one processor is programmed to select at least one logical volume of storage from at least one storage system that can serve as the unit of storage defined by the provisioning request; select at least one connectivity resource that can provide a communication path through which the selected at least one logical volume can be made accessible to the at least one of the plurality of host computers; create a transaction that comprises a series of actions to configure the selected at least one logical volume and the selected at least one connectivity resource to satisfy the provisioning request, including configuring the selected at least one logical volume to satisfy the provisioning request, mapping the selected at least one logical volume to at least one port of the at least one storage system through which the selected at least one logical volume will be accessible, configuring the communication path, and configuring security measures on the at least a portion of the computer system to provide access to the selected at least one logical volume only to the at least one of the plurality of host computers; and execute the transaction to configure the selected at least one logical volume and the selected at least one connectivity resource in a manner that satisfies the provisioning request.","A further embodiment is directed to a method of provisioning at least a portion of a computer system to a desired configuration. The method comprises acts of: (A) creating a computer-readable provisioning transaction that comprises a series of provisioning actions to provision a plurality of computer system resources to meet the desired configuration; and (B) creating a computer-readable undo transaction that comprises a series of undo actions to undo at least a subset of the series of provisioning actions. Another embodiment is directed to a computer readable medium encoded with a computer program that, when executed, performs the method.","Another embodiment is directed to a method of provisioning at least a portion of a desired computer system. The method comprises acts of: (A) automatically reverse engineering at least a portion of an existing computer system to create a specification of a configuration of the at least a portion of the existing computer system; (B) modifying the specification of the at least a portion of the existing computer system to create a specification for the at least a portion of the desired computer system; and (C) automatically provisioning the at least a portion of the desired computer system to meet the specification for the desired computer system.","One embodiment of the present invention is directed to a method and apparatus for automatically provisioning resources in a computer system. In one embodiment, a user defines a desired system configuration, and the process automatically provisions the desired system configuration, meaning that appropriate resources are selected and\/or actions are performed to configure the resources as specified. As used herein, the reference to an action being performed automatically refers to the action not involving manual human intervention to complete, once it has been initiated.","As discussed above, provisioning a computer system can be a complex process involving a number of issues. These issues can be broadly categorized as host-based issues, storage system-based issues, and connectivity or network-based issues.","Examples of host-based issues include determining the amount of storage space (divided among one or more logical volumes) desired for a host, and the assignment of those logical volumes among various resources in the host, such as one more file systems, logical volume managers (LVM) and database managers.","Examples of storage system-based issues include how many storage systems will be employed, how many logical volumes of storage will be made available, the storage capacity they will have, whether the logical volumes are currently mapped to storage ports or need to be mapped in order to be accessed, whether any of the volumes will be mirrored or otherwise replicated, the performance requirements for particular volumes of storage (it should be appreciated that a computer system may include multiple different types of storage systems with different performance characteristics), the types of physical storage devices on which one or more of the logical volumes are to be stored, and whether certain logical volumes will need to handle particularly high levels of input\/output (I\/O) activity, etc.","Finally, connectivity or network-based issues include determining which host computers will be granted access to which logical volumes of storage, the ports on the computer system through which a logical volume will be made available to a particular host, and configuring security measures, such as zoning operations that limit access by particular hosts to certain logical volumes.","In accordance with one embodiment of the present invention, an automated process is employed to automatically provision a computer system in response to a provisioning request that includes a specification that defines a desired configuration for the computer system. If desired, the provisioning request can specifically identify, at a very detailed level, the exact nature of the system to be configured, including at one extreme identifying which ports of certain devices should be interconnected. However, in accordance with one embodiment of the present invention, the low level detail concerning the provisioning of the computer system is left to the automated process, such that the provisioning request is provided at a significantly higher level, thereby reducing the time and effort required to construct a provisioning request. Thus, in a manner described below, the provisioning request can define aspects of the system at a relatively high level in terms of the nature of the configuration to be defined, and the automated provisioning process will take that high-level definition and automatically provision a computer system that fits the definition. However, if the user chooses to provide a definition that provides requirements at a lower level, the automated provisioning process is able to comply with those requirements as well. However, the automated provisioning process can also take a higher level definition and automatically provision a computer system that meets it.","1. Defining a Provisioning Request","The provisioning request can be provided in any of numerous forms, as the present invention is not limited to any particular implementation. As discussed above, the definition of a computer system to be provisioned can include information broadly categorized into three areas: host-based information, storage system-based information, and connectivity or network-related information. In one embodiment of the present invention, a provisioning request includes three components that relate to these three different areas. The creation of a provisioning request that includes these three components is illustrated conceptually in . Of course, the present invention is not limited to a provisioning request that takes this form, as other implementations are possible.","In accordance with one embodiment of the present invention, the provisioning request is simplified by employing a concept known as a storage element to aggregate units of storage that are logically related from the perspective of a host computer (e.g., a collection of logical volumes that together store a file system, a logical volume manager, or a database). Thus, if a volume of storage within a logically related set has a number of hardware mirrors, those hardware mirrors may be defined as part of the same storage element, because the hardware mirroring operation is performed by the storage systems in a manner transparent to the host. Conversely, if a volume of storage has a software mirror that is maintained by the host itself, that software mirror may be provided in a different storage element. It should be appreciated that the present invention is not limited to an implementation which provides a storage element concept in this manner, as numerous other implementations are possible. Furthermore, although the use of storage elements to aggregate logically related units of storage is advantageous, it should be appreciated that the present invention is not limited to using a provisioning request that employs this concept, as each unit of storage can alternatively be treated individually.","As discussed above, in one embodiment the provisioning request includes components that address storage system-based issues, host-based issues, and connectivity or network-based issues. This is illustrated conceptually in , wherein block  represents the creation of a storage device specification addressing storage system-based configuration issues, block  represents creation of a host specification addressing host-based configuration issues, and block  represents creation of a host logical unit (HLU) specification that deals with the connectivity or network-based issues.","A. Storage Device Specification","The storage device specification created in block  defines the configuration of the storage systems. As discussed above, the provisioning request can be at any level of detail that the requestor desires, and the storage device specification component can define any aspects of the storage systems that the requester desires to be configured in a particular manner. Examples of the types of information that can be included in the storage device specification may include the number of storage volumes to be made available, the storage capacity of each, mirroring or replication characteristics (e.g., a local or geographically remote hardware mirror), striping requirements, redundancy or fault tolerance requirements (e.g., one of the RAID levels), any desired performance requirements for particular volumes responding to I\/O operations, any specific requirements for the type of physical storage devices on which one or more of the volumes is to be stored, specific vendor and\/or models on which one or more volumes are to be stored, and spare volumes to be provided (e.g., a hot spare to provide short term performance improvements, or for use as a snapshot mirror such as a business continuance volume (BCV) available from EMC Corporation). It should be appreciated that the list above is provided merely for illustrative purposes and is not exhaustive, as any characteristic of a storage system can be included in the storage device specification if the requestor desires that the system configuration to be provisioned include that characteristic.","In one embodiment of the present invention, the automated provisioning process can be performed in connection with a management tool deployed on the system that organizes various storage resources into storage pools. Storage pools may be employed to group resources for administrative reasons, to group resources sharing certain characteristics, such as performance characteristics or type of physical storage devices, or for other reasons. When a provisioning request is provided for provisioning a computer system that employs a management tool that groups storage resources (e.g., logical volumes) into storage pools, the provisioning request can (optionally) request that various storage resources be provided from certain storage pools.","As discussed above, the storage device specification can include certain preferred or required characteristics of the system to be provisioned. In accordance with one illustrative embodiment of the present invention, if a provisioning request requires certain storage system characteristics that cannot be met by the physical resources available to the automated provisioning process, the automated process will return an error in response to the request, explaining that the request cannot be met. Furthermore, in addition to providing the requestor with the ability to require that certain characteristics be met, one embodiment of the present invention also allows a user to specify preferences that are not absolute requirements. In one embodiment, in response to a request that includes a preference, the automated provisioning process attempts to satisfy the preference, but if it is unable to do so, it implements the provisioning request if possible in other ways that do not satisfy the preferences, but still satisfy all requirements set forth in the provisioning request.","It should be appreciated that the provisioning request can be employed to reconfigure a computer system. On some computer systems, logical volumes are already assigned to a particular use, such as a \u201cstandard\u201d logical volume available for read\/write operations, a dedicated spare for temporary use, a volume dedicated to being used as a snapshot mirror such as a business continuance volume (BCV) available from EMC Corporation, a volume available for remote mirroring, etc. In one embodiment of the invention, when providing the storage device specification, a requester can indicate a tolerance for reconfiguring of any of these volume types. For instance, by specifying a low (or no) tolerance for certain reconfiguration operations, a user may prevent the automatic provisioning process from changing the configuration of any of the logical volumes that currently exist, and return an error message if the storage device specification cannot be met using the current configuration of logical volumes. Alternatively, a relatively high tolerance to reconfiguration may authorize the automated provisioning process to change, if desired, the configuration of one or more logical volumes to meet the storage device specification.","B. Host Logical Unit Specification","A second aspect of the provisioning request is the host logical unit (HLU) specification created in block  (). The HLU specification defines how volumes of storage, defined in the storage device specification, will appear, via connectivity resources (e.g., a network), to host computers on the system. As with the storage device specification discussed above, the HLU specification can be provided at any level of detail that the requestor desires, such that if it is unimportant to the requestor how various aspects of the system configuration will be implemented, those aspects need not be defined in the HLU specification, and the automated provisioning process will implement those aspects in any manner that it chooses. An example of the type of information that can be defined in the HLU specification includes a mapping of the logical volumes defined in the storage device specification to particular ports of the storage systems in which the volumes will be implemented. For example, referring to , each of the logical volumes ,  is mapped (as indicated by one of the dotted lines) to one of the ports ,  of the storage systems , .","Another example of the information that can be included in the HLU specification is an identification of which ports ,  of the host computers ,  will have particular logical volumes made available to them, as well as any security measures provided wherein access to particular volumes of storage may be limited to certain host computers.","Another example of information that can be included in the HLU specification is a definition of the number of paths that may preferably exist between a logical volume and a host computer that accesses it. In this respect, it should be appreciated that many host computers will include a multi-pathing layer that provides the capability to allow multiple different paths to be used for accessing a particular logical volume. Thus, if a multi-pathing configuration is desired, this can be specified in the HLU specification.","It should be appreciated that the considerations listed are provided for illustrative purposes only and are not intended to be exhaustive, as any type of characteristic of the connectivity of the computer system can be included in the HLU specification.","It should be appreciated that the provisioning request may be used to reconfigure a computer system that has an existing configuration. For example, physical connections between host computers, networking components, and storage systems may already exist. As mentioned above in connection with the storage device specification, in one embodiment of the present invention, certain elements specified by the HLU specification can be provided as preferences rather than absolute requirements. In this embodiment, a user may express a preference for using aspects of an existing computer system configuration by specifying a tolerance for various reconfiguration operations that would need to be performed to meet the desired configuration set forth in the HLU specification. For example, in an existing configuration, one or more logical volumes may be mapped to certain storage system ports, and may also be zoned for access by certain host computers. It should be appreciated that the process of mapping a logical volume to a port can be time consuming, as can the process for zoning a particular logical volume for access by a particular host computer. Thus, in accordance with one embodiment of the present invention, the HLU specification can indicate a tolerance for re-mapping and\/or re-zoning of the existing computer system configuration to meet the desired HLU specification.","Tolerancing can provide a range of options for the automated provisioning process. For example, if an HLU specification indicates a low (or no) tolerance for re-mapping and\/or re-zoning, then the automated provisioning process will only provision volumes that are already pre-mapped and\/or pre-zoned in a way that satisfies the HLU specification. If the HLU specification cannot be met using pre-mapped and\/or pre-zoned logical volumes, then the provisioning request will fail. Alternatively, if the HLU specification indicates a high tolerance for re-mapping and\/or re-zoning, the automated provisioning process may attempt to satisfy the HLU specification by using pre-mapped and\/or pre-zoned logical volumes, but if it is unable to do so, may take steps (which can be implemented in a manner discussed below) to re-map and\/or re-zone logical volumes where necessary or desired to meet the HLU specification. As discussed above, there may be a configuration time that will be incurred to perform re-mapping and\/or re-zoning, so that the requester can take this into consideration when determining the tolerances for these operations, as expressed in the HLU specification.","C. Host Specification","The host specification of the provisioning request created in block  () defines the ways in which logical volumes made available to host computers ,  () will be used by those host computers. In the example in , each of the logical volumes presented to the host computer I is used to provide the storage space for a file system , and each of the logical volumes presented to host computer  are similarly employed to provide the storage space for file system . It should be appreciated that a host computer can use logical volumes in numerous ways, including using logical volumes to provide storage for a logical volume manager (LVM), a database management system, or to provide direct access to raw logical volumes. The present invention is not limited in any way to the manner in which host computers may make use of logical volumes provided to it, and the host specification can define any desired use for these logical volumes for the host computers in the computer system.","2. Creation of the Provisioning Request","The provisioning request can be created (e.g., block  in ) in any of numerous ways, as the present invention is not limited to any particular creation technique. The creation of the provisioning request can be performed entirely manually (e.g., by a system administrator seeking to define the desired configuration for a computer system in the manner discussed above), or alternatively, can be created in an essentially entirely automated fashion by reverse engineering a current computer system configuration that is desired to be replicated. It may be desirable to replicate an existing computer system configuration for any of numerous reasons. One particular application in which replication may be desirable is when a data migration is being performed from one storage system to another. For example, it may be desirable to move an entire logically related set of data (e.g., a file system, an LVM or a database) from one storage system to another for any of numerous reasons, such as if the existing storage system is limited in capacity and\/or performance.","It should be appreciated that when the provisioning request is to be created manually, it can be created in any desirable manner. For example, a system administrator can simply enter data into any computer in a form that is readable by (or convertible into a form that is readable by) the automated provisioning process, so that the provisioning request can be input into the automated provisioning process.","Reverse engineering (also referred to herein as source discovery) of an existing computer system configuration can be performed in any of numerous ways, to provide a template for a new provisioning request, as the present invention is not limited to any particular implementation technique. As discussed above, some computer system configurations have a management resource that can be queried to gather information about the configuration of the computer system. An example of such a management tool is the ControlCenter\/Open Edition suite of software products available from EMC Corporation (hereafter ECC management tool). The ECC management tool allows a user to view the configuration specifics of a computer system infrastructure. The ECC management tool employs a number of agents distributed throughout the computer system (e.g., on the hosts, the storage systems, and the network components) which use application programming interfaces (APIs) to communicate with a central management agent that collects the information and compiles it in a data set (e.g., a database) that provides a description of the infrastructure of the computer system. In one embodiment of the present invention, source discovery of a system configuration can be performed by querying the FCC management tool to provide the desired information about the configuration of an existing computer system managed by the ECC management tool. In one embodiment of the present invention, the automated provisioning process can be implemented as part of the ECC management tool, such that the source discovery step can be performed automatically in response to a user requesting provisioning of a new computer system based on an existing system. In one embodiment, the present invention described herein can query the database maintained by the FCC management tool to extract the necessary information desired to build a provisioning request for passing to the automated provisioning process in the manner discussed herein.","It should be appreciated that the embodiment of the present invention related to the reverse engineering or source discovery of an existing computer system is not limited to use with the FCC management tool, as numerous other techniques can be employed. For example, if a computer system has another type of management system associated with it that includes a data set containing the desired information relating to the infrastructure of the computer system, the information can be gathered from that management tool. Alternatively, if no centralized management tool exists that has collected the relevant information relating to the infrastructure of the computer system, a number of different tools can be employed to gather configuration information separately from the various components in the computer system. For instance, some network components and storage systems provide APIs that enable the component to be queried and to provide configuration information of the type desired to build the automated provisioning request as described herein. Furthermore, tools such as those available through the WideSky Storage Management Facility (including the EMC Symm API-Mapper application programming interface) available from EMC Corporation are available that allow for the discovery of configuration information within a host, such as which logical volumes are assigned as storage resources for various components (e.g., a file system, LVM or database) on the host. In short, any of a number of tools may be used to collect the desired information from the components of the computer system to provide a template for a new provisioning request, as the present invention is not limited to any particular implementation technique.","As discussed above, in one embodiment of the present invention used on computer systems wherein management techniques are employed to pool together storage resources having common characteristics, the source discovery process can seek to identify whether various storage resources in the existing computer system being reverse engineered belong to certain storage pools, and if so, that information can be provided in the provisioning request automatically generated by the source discovery process. Although advantageous, it should be appreciated that the present invention is not limited in this respect, as the aspect of the present invention relating to automatically performing a source discovery is not limited to identifying the use of any storage pools.","After source discovery, it may be desirable in some circumstances for a system administrator to modify a definition of the computer system configuration (block  in ) prior to submitting it as a provisioning request (block  in ) to the automated provisioning process. These modifications can be of any type, as there may be numerous circumstances where it may be desirable to model a new computer system configuration based upon an existing one, but with modifications of various types. Thus, the present invention is not limited in any way to the manner in which a definition of a computer system configuration may be modified to create a provisioning request. In the illustrative example discussed above wherein it may be desirable to migrate a data set from one storage system to another, the modifications to the definition of the computer system output from the automatic source discovery process may simply involve modifying the unique identifiers of the storage systems (or singular storage system) on which the logical volumes that stored the data set are stored, as the remainder of the computer system may be replicated exactly.","Another example wherein it may be desirable to modify a definition of a computer system configuration prior to submitting it as a provision request relates to extending a file system. In such a circumstance, a system administrator may find it desirable to expand the file system using consistent storage resources (e.g., storage resources provided on a same storage system, having a same RAID level of protection, etc.). Thus, in accordance with one embodiment of the present invention, a system administrator seeking to extend a file system may perform source discovery on the existing system to identify the relevant characteristics of the storage resources used therefor, and modify the output from the automatic source discovery process to define an expanded file system consistent therewith.","3. Automatic Provisioning Process","After the provisioning request has been created (automatically, manually or through a combination thereof), in one embodiment, the provisioning request serves as an input to an automatic provisioning process that automatically provisions a computer system to satisfy the definition provided in the request. In accordance with the embodiment of the present invention depicted in , the automatic provisioning process includes three primary acts: resource selection, transaction creation and transaction execution. Resource selection involves identifying and selecting resources (such as storage systems, connectivity components and host computer resources) to fulfill the provisioning request. Transaction creation involves creating a program or log of commands that, when executed, perform the configuration acts that will configure the computer system as defined in the provisioning request. Transaction execution involves actually executing the acts to configure the computer system. Each of these portions of the automatic provisioning process is discussed in greater detail below.","A. Resource Selection","Referring to , in act , resource selection is performed. Resources may include, for example, one or more host computers, storage systems, networking components and logical volumes. The resources are selected to fulfill the specifications set forth in the provisioning request.","The identification of the resources available to meet the provisioning request can be performed in any of numerous ways, as the present invention is not limited to any particular implementation technique. In accordance with one embodiment of the present invention for use in a system that includes a management system such as the ECC management tool discussed above, the management tool (e.g., its database) can be queried to discover the resources available for selection to meet the provisioning request. In accordance with the embodiment of the present invention wherein the automated provisioning process is implemented within the ECC management tool, the resource selection process can be performed, for example, by issuing queries to the database to retrieve the desired information.","For the embodiment of the present invention wherein a database is provided that stores information relating to the available resources, the capabilities of the database (e.g., the execution of SQL queries and use of database views) may be employed to optimize and expedite the resource selection process. For example, the database may store information concerning all physical elements (e.g., disks, connectivity equipment) and logical elements (e.g., LUNs) in the computer system. One or more database \u201cviews\u201d can be implemented to pre-select portions of the database (defined by the view) against which queries can be executed, to make the execution of queries simpler and more efficient. For example, a database view might be employed to pre-select elements which have previously established physical communication connections, so that a query selects from only that subset. A database view might alternatively, or additionally, be employed to pre-select storage elements possessing other characteristics (e.g., zoned storage elements, or elements belonging to a storage pool).","It should be appreciated that the resource selection aspect of the invention is not limited to the use of database views or dynamically generated SQL queries which are executed against a relational database, as any suitable technique for gathering the desired information can be employed. For example, automated resource selection may be accomplished using any of a number of programmatic techniques (e.g., by translating selection criteria into a series of parameters to serve as input to one or more computer programs that execute against one or more data sets, or any of a myriad of other automated techniques). Manual techniques may also be employed, as well as combinations of automated and manual techniques.","In computer systems wherein a central management tool with an existing database of the resources included in the computer system is not available to be queried, other techniques can be employed to discover the resources available to meet the provisioning request. For example, if a management tool exists that provides a centralized API that can be queried to discover the resources in the computer system (e.g., the host computers, the network components and the storage systems), such a centralized API can be used to perform the resource discovery and selection process. If no such centralized management tool is available, most computer system components have their own APIs available that can be queried to gather information concerning the component, such as what type of component it is, the number of ports available, etc.","According to the embodiment depicted in , the resource selection process is executed in three basic acts , , , which can also be considered as hierarchical layers, with act  at the lowest layer and act  at the highest.","In act , storage elements are selected to satisfy the low-level criteria specified in the storage element descriptor, such as numbers of storage elements (e.g., logical volumes), the size of the storage elements, any particular requirements for physical storage devices for the storage elements, etc. As will be discussed below, some higher level requirements relating to a logical interaction of multiple storage elements is performed in the middle layer of the hierarchy at act .","As mentioned above, the act  attempts to select resources to satisfy the criteria presented to it. In accordance with one embodiment of the present invention, during an initial pass of the resource selection process of , the criteria provided to the act  incorporate the strictest constraints specified in the storage element descriptor. For example, if a provisioning request indicates some tolerance for re-zoning devices, in one embodiment of the present invention, during a first pass of the resource selection process of , the act  attempts to select resources to meet all of the criteria, including using only zoned devices. In accordance with one embodiment of the present invention, the act  seeks to locate all of the resources that satisfy the storage element descriptor, and creates partitions with the storage resources, with each partition including storage elements that are essentially identical for the relevant characteristics specified in the storage element descriptor. Thus, each of the storage resources within a particular partition can be considered to be interchangeable in terms of satisfying the storage element descriptor, as they share the relevant common characteristics. By selecting all of the available resources that can potentially be used to satisfy the storage element descriptor, the likelihood of the middle layer of the hierarchy at act  finding compatible resources to satisfy the higher level criteria is maximized. Although advantageous, it should be appreciated that the present invention is not limited in this respect, and that rather than identifying all of the storage resources that may be used to satisfy the storage element descriptor in act , a subset can be identified (e.g., only the minimum number can be identified), and then additional iterations can be performed in a manner similar to that discussed below.","After completion of the act , the process proceeds to act , wherein a determination is made as to whether resources have been selected that satisfy all of the low-level requirements specified in the storage element descriptor. When all of the requirements have been met, the process proceeds to act , wherein the higher-level requirements relating to a logical association of multiple storage elements are considered in a manner discussed below. Alternatively, when it is determined at act  that sufficient resources could not be selected to satisfy the low-level requirements for the storage element descriptor, the process proceeds to act , wherein a determination is made as to whether the criteria for the storage element descriptor can be modified or relaxed. If not, the process proceeds to act , wherein an error message is returned indicating that the provisioning request cannot be satisfied as specified. At that point, a system administrator can evaluate whether to modify the provisioning request (e.g., by relaxing tolerances, reducing the amount of storage requested, relaxing performance characteristics, etc.).","When it is determined at act  that modification of the request is possible, which may occur if tolerances are specified that provide some room for flexibility, the process proceeds to act , wherein the criteria for the storage element descriptor are modified, and then the modified criteria are resubmitted to the act  to determine whether sufficient resources can be provided to meet the modified criteria. An example of the manner in which the criteria for the storage element descriptor can be modified relates to tolerances. As discussed above, in accordance with one embodiment of the present invention, during the first pass through the resource selection process, the strictest constraints are applied, so that, if at all possible, the system can be configured to meet the preferences specified in the provisioning request. However, if the provisioning request indicates a preference for a certain characteristic, but a tolerance for having it not met, then the act , which implements the top layer in the hierarchy as discussed above, can relax one or more of the constraints within the bounds of the tolerances specified in the provisioning request, and resubmit the request to the lower layers on the hierarchy to determine whether a system can be configured that satisfies the relaxed constraints. In this respect, it should be appreciated that by relaxing certain constraints prior to resubmitting the criteria to the act , there is a possibility that a greater number of storage resources can be found that will meet the newly relaxed criteria.","It should be appreciated that the present invention is not limited in any manner to the way in which the top layer in the hierarchy (implemented by act ) may relax constraints, as numerous implementations are possible. For example, the act  can begin by initially relaxing constraints for which the storage provisioning request indicates the highest tolerance for such relaxation.","As mentioned above, when it is determined at act  that sufficient resources have been identified to satisfy the low-level requirements for the storage elements at act , the process proceeds to act , which implements the second layer in the hierarchy to determine whether certain criteria relating to the logical relationship between two or more storage elements can be met using the resources selected in the act . There are numerous types of constraints that can be specified in a storage element descriptor and considered in the act . Examples include mirroring relationships such as a local or remote mirror. For example, for a snapshot mirror it is desirable to have two storage resources of the same size and type stored on the same physical storage system, and for a remote mirror it is desirable to have two storage volumes of the same size located on different storage systems. This is merely one example of the interrelationship between two or more storage elements that can be considered by the act , as there are numerous other possibilities.","It should be appreciated that in accordance with one embodiment of the present invention, if appropriate capabilities are provided by the hardware in the computer system, certain functions that might otherwise be considered to be high level can be implemented at the lower-level act . For example, if the computer system includes intelligent storage systems that have the capability of providing hardware mirrored devices, the request for a mirrored configuration in the storage element descriptor can, in one embodiment of the present invention, be met at the lowest-level act . Thus, the partitions created thereby can include mirrored sets of devices, such that this logical relationship need not be addressed at the higher level act . Of course, it should be appreciated that the present invention is not limited in this respect, and that mirroring relationships can, alternatively, be addressed at the higher level act .","Furthermore, it should be appreciated that the mirroring function is merely one example of the capability that may be provided by the hardware in the computer system and can be implemented at the lower-level act .","In one embodiment, the act  seeks to satisfy the storage element descriptor by identifying specific storage resources from among the partitions provided by the act . After the higher level criteria has been evaluated at act , the process proceeds to act , wherein a determination is made as to whether the higher level criteria specified in the storage element descriptor have been met. If so, specific storage resources that can be used to implement the desired computer system will have been identified in the act , and the process will terminate.","Alternatively, when it is determined at act  that the resources selected at act  are not sufficient to enable the higher level criteria to be met, the process proceeds to act , wherein a determination is made as to whether the selection criteria can be relaxed, in the manner discussed above.","It should be appreciated from the foregoing that the process illustrated in  can be an iterative one, wherein attempts are first made to satisfy the storage element descriptor with the tightest possible constraints, and wherein these constraints can be relaxed, under control of the highest level in the hierarchy (implemented at the act ), through one or more additional iterations of the process, until the storage element descriptor has been satisfied, or until a determination is made that sufficient resources are not available to satisfy the storage element descriptor.","The invention is not limited to performing the above-described acts in the sequence described, or in any sequence at all. Some embodiments may accomplish resource selection using a process comprising a different number of acts than that described, and comprising acts which may be performed serially, in parallel, or a combination of the two.","In short, any suitable technique that enables the identification of resources within a computer system, and that provides information desirable for determining which resources will comply with the provisioning request, may be used to perform resource selection, as the present invention is not limited to any particular implementation technique.","Although all of the steps of the provisioning process illustrated in  are automated in one embodiment of the present invention, it should be appreciated that the present invention is not limited in this respect, and that some of these acts (including the resource selection act) can include manual activity, or can be performed entirely manually.","B. Transaction Creation","In act , a transaction is created that sets forth a series of actions to be performed to configure the computer system in a manner that meets the definition provided in the provisioning request. The types of actions in the transaction may include any of the types discussed above, such as mapping logical volumes to various ports from which they are to be visible, providing security measures to restrict access as specified in the provisioning request, commanding host computers to scan their ports to recognize logical volumes made available to the host computers over those ports, allocating one or more logical volumes to a file system, LVM, database or other host computer resource, configuring the logical volume type (e.g., a standard storage volume, a mirror, a hot spare, etc.), creating any desired mirroring configurations, etc. The transaction includes a number of actions, including low level actions that are performed to physically configure the computer system to meet the provisioning request.","It should be appreciated that the precise nature of the actions to be built into the transaction will vary depending upon the specific nature of the components in the computer system. For example, host computers may have different types of operating systems that support different configuration actions, and different types of storage systems and networking components may similarly support different types of configuration actions.","In accordance with one embodiment of the present invention, the transaction is assembled not simply in a brute force manner to achieve the end result of configuring the computer system in a manner that satisfies the provisioning request, but other considerations are taken into account, including efficiency of the configuration process when the transaction is executed. For example, time is incurred in a host computer scanning its I\/O ports to identify new logical volumes that have been made available over those ports. Thus, in configuring a computer system, it is desirable to minimize the number of times that a host computer will perform such a scan, such that rather than making logical volumes available to a host and scanning them one at a time, it may be desirable, for example, to perform actions that make a plurality of logical volumes being assigned to a host computer available, and to then perform a single scan operation that identifies all of these logical volumes. It should be appreciated that this is provided merely as an example, as other situations may exist where effectively planning the sequence of operations in a transaction can lead to efficiencies in the execution of the transaction.","Although desirable, it should be appreciated that the present invention is not limited to organizing the transaction to achieve efficiency in its execution, as the transaction can be created and executed in any way that is effective in configuring the computer system to meet the provisioning request.","In one embodiment, during creation of the transaction, intelligence is provided to identify whether certain configuration steps are necessary. For example, if a logical volume has already been mapped to a particular port, an operation need not be included in the transaction to perform such mapping.","Furthermore, in accordance with one embodiment of the present invention, when the transaction is created, safety checks are performed to ensure that resources are not inconsistently assigned. For example, a check can be performed to ensure that a logical volume is not inconsistently allocated to multiple resources, which could result in a loss of data.","In accordance with one embodiment of the present invention, a capability is provided to undo one or more of the operations performed by the transaction in physically configuring a computer system to meet the requirements of the provisioning request. In this respect, it should be appreciated that the provisioning of a computer system may be an iterative process, wherein an administrator initially may decide to perform a certain configuration operation, but thereafter detect an unintended result and wish to undo the operation. Thus, in accordance with one embodiment of the present invention, the entire provisioning transaction can be undone. In accordance with another embodiment of the present invention, a subset of the operations performed during the transaction (including in one embodiment down to the level of each operation) can be undone. In this manner, after the transaction is executed, or during its execution, the transaction can be rolled back to any desired place in the transaction.","It should be appreciated that the embodiment of the present invention that provides the ability to undo the transaction is optional, as all embodiments of the present invention are not limited to providing this capability. Furthermore, it should be appreciated that the ability to undo or rollback a transaction can be implemented in any of numerous ways, as the present invention is not limited to any particular implementation technique.","In accordance with one embodiment of the present invention, the undo and\/or rollback feature can be implemented by creating a rollback routine at the same time the transaction is created. Thus, during creation of the transaction, for each operation created, a parallel operation is created to undo it. In this manner, the entire transaction can be undone by executing the entire parallel undo transaction, or the transaction can be rolled back to any particular operation by executing only the corresponding undo operations in the parallel undo transaction.","It should be appreciated that the nature of the operations created during the transaction creation process will vary depending upon the physical components in the computer system. As discussed above in connection with the resource selection process, central management tools and\/or separate interfaces for each of the system components can be employed to discover these resources. Similarly, in some computer systems, a central management tool may be provided that enables an administrator to configure the entire system by dealing only with the central management tool. When the system to be provisioned includes such a central management tool, the operations created during the transaction creation process can be directed to that central management tool and conform to the communication protocol used thereby. Alternatively, the separate APIs provided by each of the system components can be used for performance of the desired operations created during the transaction creation process.","It should be appreciated that the transaction creation process is not limited to performing operations of any particular type, as any suitable operation that, when executed, performs the desired configuration actions can be employed.","Similarly, the transaction and the operations included therein can take any of numerous forms, and can be written in any computer-readable language or format.","In the embodiments discussed above, a single transaction is created to perform all of the provisioning desired for an entire computer system. It should be appreciated that the present invention is not limited in this respect, and that multiple separate transactions can alternatively be created and executed to provision portions of the desired computer system.","C. Transaction Execution","After the transaction is created in act , the automated provisioning process proceeds to act , wherein the transaction is executed. As discussed above, in one embodiment of the present invention, the transaction includes a series of operations in computer-readable form, such that the execution thereof can comprise a computer executing the software code that performs the desired operations. In one embodiment of the present invention, all of the operations recited in the transaction can be executed by a server or host computer in the computer system which implements management control functions for the computer system (e.g., a server executing the ECC management tool discussed above). However, it should be appreciated that the present invention is not limited in this respect, and that the transaction can alternatively be executed on any suitable component within the computer system, including host computers, a storage system, a network component, etc., as any component of the computer system that includes a processor may be capable of executing the transaction. Furthermore, it should be appreciated that the present invention is not limited to having all of the operations in the transaction executed by a single system component, as the transaction can alternatively be split among multiple different components within the computer system that can each execute some of the operations of the transaction.","As discussed above, while it is advantageous to create (in act ) and execute (in act ) a transaction that performs all of the provisioning operations desired for a computer system, the present invention is not limited in this respect, as a transaction can be created and executed that can alternatively automatically perform only a subset of the provisioning operations for a particular computer system.","In accordance with one embodiment of the present invention, the act  of executing the transaction is performed automatically in response to completion of the act  of creating the transaction, which is in turn performed automatically in response to completion of the act  of resource selection. This is advantageous, in that the entire provisioning process is automated. However, it should be appreciated that all embodiments of the present invention are not limited in this respect, and that manual intervention can be performed between the resource selection act  and the transaction creation act , and\/or between the transaction creation act  and the transaction execution act . For example, a system administrator may desire to examine, and potentially modify, the transaction created in act , prior to execution in act . Furthermore, in one embodiment of the invention, one or more manual operations may be placed within a transaction which is otherwise executed automatically in act . In this embodiment, a portion of the transaction may be automatically executed before one or more manual operations is reached, and automatic execution may be paused or suspended until a user performs the manual operation(s). Upon receiving confirmation that the manual operation(s) are complete, automatic execution of transaction steps may be resumed. An example of a circumstance where it may be desirable to insert one or more manual steps is when actions by an administrator are desired before a transaction can complete. For example, when automatically provisioning a file system extension, it may be desirable to shut down or restart an application to recognize the newly extended file system.","The above-described embodiments of the present invention can be implemented in any of numerous ways. For example, the above-discussed functionality can be implemented using hardware, software or a combination thereof. When implemented in software, the software code can be executed on any suitable processor or collection of processors, whether provided in a single computer or distributed among multiple computers. It should further be appreciated that any component or collection of components that perform the functions described above can be generically considered as one or more controllers that control the above-discussed functions. The one or more controllers can be implemented in numerous ways, such as with dedicated hardware, or by employing one or more processors that are programmed using microcode or software to perform the functions recited above.","In this respect, it should be appreciated that one implementation of the embodiments of the present invention comprises at least one computer-readable medium (e.g., a computer memory, a floppy disk, a compact disk, a tape, etc.) encoded with a computer program (i.e., a plurality of instructions), which, when executed on a processor, performs the above-discussed functions of the embodiments of the present invention. The computer-readable medium can be transportable such that the program stored thereon can be loaded onto any computer system resource to implement the aspects of the present invention discussed herein. In addition, it should be appreciated that the reference to a computer program which, when executed, performs the above-discussed functions, is not limited to an application program running on a host computer. Rather, the term computer program is used herein in a generic sense to reference any type of computer code (e.g., software or microcode) that can be employed to program a processor to implement the above-discussed aspects of the present invention.","While the invention has been particularly shown and described with reference to specific embodiments, these embodiments are presented by way of example only, as it is not practical to enumerate all potential implementations. It should be understood by those skilled in the art that various changes in form and detail may be made therein without departing from the spirit and scope of the invention, which is defined in the following claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":["FIG. 5","FIG. 4"]},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 6"}]},"DETDESC":[{},{}]}
