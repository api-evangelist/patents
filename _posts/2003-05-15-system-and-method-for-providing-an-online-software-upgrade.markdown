---
title: System and method for providing an online software upgrade
abstract: A system and method is disclosed for providing an online software upgrade in a switch in a telecommunications system. The switch comprises: 1) a main processing unit for executing call process client applications associated with call connections; and 2) call application nodes for executing call process server applications; and 3) system management nodes. A configuration management controller associated with a system management node executes an online software upgrade for the software in the switch while the switch is executing the software that is being upgraded. Each new software upgrade is tested before the software upgrades are made operational in the switch.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07463610&OS=07463610&RS=07463610
owner: Samsung Electronics Co., Ltd.
number: 07463610
owner_city: Suwon-si
owner_country: KR
publication_date: 20030515
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["TECHNICAL FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE INVENTION"],"p":["The present invention is directed to telecommunication systems and, more specifically, to a system and method for providing an online software upgrade in a switch in a telecommunication system.","Wireless service providers continually try to create new markets and to expand existing markets for wireless services and equipment. One important way to accomplish this is to improve the performance of wireless network equipment while making the equipment cheaper and more reliable. Doing this allows wireless service providers to reduce infrastructure and operating costs while maintaining or even increasing the capacity of their wireless networks. At the same time, the service providers are attempting to improve the quality of wireless service and increase the quantity of services available to the end user.","The mobile switching center of a wireless network provides connections between a number of wireless network base stations and the public switched telephone network. Calls originated by or terminated at a cell phone or other mobile station are handled in the mobile station by a number of call processing client applications. A conventional mobile station typically contains a large switching fabric controlled by a main processing unit (MPU) that contains a large number of data processors and associated memories, often in the form of ASIC chips. Each of these MPU processors contains a call process client application for controlling the flow of control signals of a single call. Each call process client application in turn communicates with a call process server application that controls the flow of control signals for a large number of calls.","Thus, when a particular event occurs during a phone call (e.g., the call set-up, the invocation of three-way calling, call disconnection, or the like), control signals associated with the event are relayed from the mobile station to the call process client application in the mobile switching center (MSC). This call processing client application then relays the control signals to the call process server application, which actually performs the call processing service requested by the control signals.","It is important to keep the mobile switching center of a wireless network fully operational at all times. Typically, when a version of software in a mobile switching center must be upgraded, the mobile switching center must be temporarily taken \u201coff line\u201d during the time that the new software upgrade is being installed. This requires the use of a backup or substitute mobile switching center to maintain a full level of call traffic management.","Therefore, there is a need for improved wireless network equipment and services for upgrading software in a mobile switching center of a wireless network. In particular, there is a need for a system and method for providing an online software upgrade to a mobile switching center so that a mobile switching center that receives a software upgrade does not have to be taken off line during the time of the software upgrade.","To address the above-discussed deficiencies of the prior art, it is a primary object of the present invention to provide a system and method for providing an online software upgrade in a switch in a telecommunications system. According to one advantageous embodiment of the invention, the switch comprises: 1) a main processing unit for executing call process client applications associated with call connections; and 2) call application nodes for executing call process server applications; and 3) system management nodes. A configuration management controller associated with a system management node executes an online software upgrade for the software in the switch while the switch is executing the software that is being upgraded.","Each system management node comprises a system request broker application that is capable of enabling each call process service application to register its service within a system management node. Each system management node also comprises a node monitor application that is capable of loading and unloading software applications in the system management node.","The configuration management controller associated with a system management node partitions an address space of a system request broker into a reference partition and a new partition. The configuration controller selects a backup system management node and at least one call application node in the new partition to receive the new software upgrade. The configuration management controller first tests the new software upgrade in the new partition. If the new software upgrade passes the test, the new software upgrade is made operational. If the new software upgrade does not pass the test, the earlier version of the software is retained.","According to one embodiment of the present invention, the configuration management controller evokes a command that instigates an assignment of a new system request broker address to the new partition that is different than the system request broker address for the reference partition.","According to another embodiment of the present invention, the online software upgrade of the present invention is transparent to all applications except the applications that are involved in establishing the online software upgrade.","According to still another embodiment of the present invention, the online software upgrade of the present invention is transparent to an application so that the application remains unaware of the identity of the partition in which the application is located.","According to yet another embodiment of the present invention, the online software upgrade of the present invention is transparent to an application so that the application remains unaware of the identity of the partition in which a service that the application is using is located.","According to a further embodiment of the present invention, the online software upgrade of the present invention may be used in conjunction with a distributed call processing system in the switch.","According to a still further embodiment of the present invention, the online software upgrade of the present invention may be used in conjunction with a group service that is capable of organizing a group of software objects in the switch.","The foregoing has outlined rather broadly the features and technical advantages of the present invention so that those skilled in the art may better understand the detailed description of the invention that follows. Additional features and advantages of the invention will be described hereinafter that form the subject of the claims of the invention. Those skilled in the art should appreciate that they may readily use the conception and the specific embodiment disclosed as a basis for modifying or designing other structures for carrying out the same purposes of the present invention. Those skilled in the art should also realize that such equivalent constructions do not depart from the spirit and scope of the invention in its broadest form.","Before undertaking the DETAILED DESCRIPTION OF THE INVENTION below, it may be advantageous to set forth definitions of certain words and phrases used throughout this patent document: the terms \u201cinclude\u201d and \u201ccomprise,\u201d as well as derivatives thereof, mean inclusion without limitation; the term \u201cor,\u201d is inclusive, meaning and\/or; the phrases \u201cassociated with\u201d and \u201cassociated therewith,\u201d as well as derivatives thereof, may mean to include, be included within, interconnect with, contain, be contained within, connect to or with, couple to or with, be communicable with, cooperate with, interleave, juxtapose, be proximate to, be bound to or with, have, have a property of, or the like; and the term \u201ccontroller\u201d means any device, system or part thereof that controls at least one operation, such a device may be implemented in hardware, firmware or software, or some combination of at least two of the same. It should be noted that the functionality associated with any particular controller may be centralized or distributed, whether locally or remotely. Definitions for certain words and phrases are provided throughout this patent document, those of ordinary skill in the art should understand that in many, if not most instances, such definitions apply to prior uses, as well as future uses, of such defined words and phrases.",{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIGS. 1 through 8"},"In the disclosure that follows, a group services framework for performing various distributed call processing functions is implemented in a mobile switching center of a wireless communication network. This is by way of illustration only and should not be construed so as to limit the scope of the invention. Those skilled in the art will understand that the online software upgrade system and method described below may be implemented in other types of telecommunication devices, including many varieties of switches, routers and the like.",{"@attributes":{"id":"p-0030","num":"0029"},"figref":["FIG. 1","FIG. 1"],"b":["100","100"]},"In the illustrated example, wireless network  comprises a plurality of cell sites -. Each cell site - contains a base station (BS). BS  is in cell site , BS  is in cell site , and BS  is in cell site . Base stations - communicate with one or more mobile stations (MS) - over wireless connections (e.g., code division multiple access (CDMA) channels). The mobile stations - may represent any suitable wireless devices. For example, the mobile stations - could represent conventional cellular radiotelephones, personal communication services (PCS) handset devices, personal digital assistants (PDAs), portable computers, or metering devices. The present invention is not limited to mobile devices. Other types of access terminals, including fixed wireless terminals, may be used. However, for the sake of simplicity, only mobile stations are shown and discussed hereafter.","The dotted lines shown in  illustrate the approximate boundaries of the cell sites - in which the base stations - are located. The cell sites are illustrated as being approximately circular for the purposes of illustration and explanation only. It should be clearly understood that the cell sites may have any other shape or shapes, depending on the cell configuration selected and the presence of natural and man-made obstructions.","As is well known in the art, cell sites - may comprise a plurality of sectors (not shown), each sector being illuminated by a directional antenna contained in or coupled to a base station -. In the embodiment of the present invention shown in  the base stations - are located in the center of the cell sites -. Other embodiments may position the base stations - or directional antennas in any other suitable positions. The present invention is not limited to any one particular configuration of cell sites.","In one embodiment of the present invention, each base station BS , BS , and BS , comprise a base station controller (BSC) and one or more base transceiver stations (BTS). Base station controllers and base transceiver stations are well known to those skilled in the art. A base station controller is a device that manages wireless communications resources, including the base transceiver stations, for specified cells within a wireless communications network. A base transceiver station comprises radio frequency (RF) transceivers, antennas, and other electrical equipment located in each cell site -. This equipment may include air conditioning units, heating units, electrical power supplies, telephone line interfaces, and RF transmitters and RF receivers. For the purpose of simplicity and clarity in explaining the operation of the present invention, the base transceiver stations in each of the cell sites - and the base station controller associated with the base transceiver stations are collectively represented by the base stations -, respectively.","The base stations - transfer voice and data signals between each other and the public switched telephone network (PSTN) (not shown) via a communication trunk lines , mobile switching center (MSC) , and communication trunk lines . The base stations - may also transmit and receive voice and data signals, such as packet data, to and from the Internet or other data network (not shown) via the communication trunk lines , mobile switching center (MSC) , and communication trunk lines . The base stations - transmit one or more pilot signals that are used by the mobile stations - to detect and register with the base stations -. In addition, the communication trunk lines  provide a connection path to transfer control signals between mobile switching center (MSC)  and the base stations -. The control signals may be used to establish connections for voice and data circuits, such as circuits between the MSC  and the base stations - over communication trunk lines  and between MSC  and the Internet or PSTN over communication trunk lines .","The communication trunk lines  and  may represent any suitable connection, including a T line, a T line, a fiber optic link, a network packet data backbone connection, or any other type of connection. In one embodiment, the communication trunk lines  may link vocoders in the base stations - with switch elements in the MSC . Those skilled in the art will recognize that the connections on communication trunk lines  and  may provide a transmission path for transmission of analog voice band signals, a digital path for transmission of voice signals in the pulse code modulated (PCM) format, a digital path for transmission of voice signals in an Internet Protocol (IP) format, a digital path for transmission of voice signals in an asynchronous transfer mode (ATM) format, or other suitable connection transmission protocol. Those skilled in the art will recognize that the connections on communication trunk lines  and  may provide a transmission path for the transmission of analog or digital control signals in a suitable signaling protocol.","The MSC  provides services and coordination between subscribers using the mobile stations - in the wireless network  and external networks, such as the PSTN or Internet. In some embodiments, the communication trunk lines  may represent several different data links, where each data link couples one of the base stations - to MSC .","The MSC  may store information about the mobile stations - in a home location register (HLR)  and in a visitor location register (VLR) . In one embodiment, the wireless network  may be a \u201chome\u201d network for mobile stations - that belong to the wireless network . Other mobile stations - that belong to other networks may roam into or visit the wireless network . In this embodiment, the HLR  stores information about the mobile stations - that belong to the wireless network , and the VLR  stores information about the mobile stations - that are visiting the wireless network .","In the illustrated example, the mobile station  is located in cell site  and is in communication with the base station . The mobile station  is located in cell site  and is in communication with the base station . The mobile station  is located in cell site  and is in communication with the base station . The mobile station  is located in cell site  but is close to and moving in the direction of cell site . At some point, as the mobile station  moves into cell site  and out of cell site , a handoff occurs.","A handoff procedure transfers control of a call from a first cell site to a second cell site. As the mobile station  moves from cell site  to cell site , the mobile station  detects a pilot signal from the base station  and sends a pilot strength measurement message to the base station . When the strength of the pilot signal transmitted by the base station  and received and reported by the mobile station  exceeds a threshold, the base station  initiates a soft handoff process. For example, the base station  may signal the target base station  that a handoff is needed as described in TIA\/EIA IS-95 or TIA\/EIA IS-2000. The base station  and the mobile station  may then negotiate the establishment of a communication link in the CDMA channel.","Although  illustrates one example of a wireless network , various changes may be made to . For example, the network  could include any suitable number of base stations - and cell sites -. Also, the network  could be connected to any suitable external network instead of or in addition to the PSTN and the Internet shown in .",{"@attributes":{"id":"p-0042","num":"0041"},"figref":"FIG. 2","b":["140","140","200","200","205","210","131","132","140","100","140"]},"When a wireless network subscriber turns on his or her mobile station (e.g., cell phone) or fixed access terminal, radio messages over the air interface inform the base station that the mobile station (or fixed access terminal) is joining the network. However, a connection is not automatically made to voice or data traffic carrying circuits in trunk lines -. A voice or data traffic connection to the public switched telephone network (PSTN) or the Internet is not needed until the subscriber places a call (e.g., dials a phone number) or accesses the Internet.","However, even when the phone is idle, certain information about the subscriber (i.e., subscriber data) must be retrieved and stored in either the base station or in MSC , or both, in order to authenticate the subscriber, gather billing information, identify the services available to the subscriber, determine capabilities of the mobile station, and the like. The control signals (as opposed to voice and data traffic) required to do this are also carried over communication trunk lines  and . After the subscriber data is stored in memory in MSC , it is available for use by a variety of call processing client (CPC) applications that may be initiated by the subscriber or another device while the mobile station is still active.","For example, when MS  is first turned ON, a call process is set up in MSC  for MS  and subscriber data (e.g., billing information) is stored in MSC  that may be accessed by the call process or other call applications that provide particular types of call services. If the subscriber dials a phone number on MS  or a call is received from the PSTN directed to MS , the call process for MS  handles the establishment of a call connection on one of the trunk lines in communication trunk lines  and one of the trunk lines in communication trunk lines . The MS  call process executed in MSC  maintains all state information related to the call and to MS  and handles all other applications required by MS , including three-way calls, voice mail, call disconnection, and the like.","In order to handle a large amount of call traffic, it is necessary to distribute the many active call processes and call service applications handled by MSC  across a number of call application nodes (CANs). The call services may include application for accessing a subscriber database, selecting (or de-selecting) communication trunk, lines, retrieving and maintaining call identity information, and the like. The present invention provides an apparatus and method for the online updating of software in MSC  while MSC  is distributing call processes and call service applications across multiple call application nodes. In one advantageous embodiment MSC  comprises a distributed network of redundant servers in which call traffic is distributed in order to increase the call-handling capacity of MSC . The redundancy of the distributed servers is transparent to both the call process client applications that require a service and the call process server applications that provide the service. The redundancy of the distributed servers also decreases the complexity of both the client and server applications.",{"@attributes":{"id":"p-0047","num":"0046"},"figref":"FIG. 3","b":["140","140","310","1","1","2","2","320","140","1","2","3","1","2","3","1","2","3","320","1","3","310","1","2","1","3","305"]},"In the embodiment shown in , each one of system manager nodes (SM and SM) and each one of the call application nodes (CAN  to CAN ) executes a configuration management (CM) application that sets up each node with the appropriate software and configuration data upon initial start-up or after a reboot. Each node also executes a node monitor (NM) application that loads software and tracks processes to determine if any process has failed. System manager nodes SM and SM execute a first arbitrary application, P, and system manager node SM also executes a second arbitrary application, P.","Call application nodes  to  (CAN  to CAN ) also execute a number of call process (CP) server applications organized as primary and backup processes that are available as distributed group services to 1 to \u201cn\u201d call process client (CPC) applications, namely CPC APP to CPC APPn in main processing unit . The three (3) call application nodes (e.g., CAN -CAN ) are separate computing nodes comprising a processor and memory that provide scalability and redundancy by the simple addition of more call application nodes.","Each of the \u201cn\u201d call process client (CPC) applications, namely CPC APP to CPC APPn in MPU , handles the control signals and messages related to a single call associated with a mobile station. Each of CPC APP to CPC APPn establishes a session with a load sharing group, which assigns the call to a particular one of the primary-backup group call process server applications, CP, CP, or CP. The selected call process server application actually performs the call process services\/functions requested by the call process client application.","In the illustrated embodiment, three exemplary call process server applications are being executed, namely CP, CP, and CP. Each of these processes exists as a primary-backup group. Thus, CP exists as a primary process, CP(P), and a backup process, CP (B). Similarly, CP exists as a primary process, CP(P), and a backup process, CP(B), and CP exists as a primary process, CP(P), and a backup process, CP(B). In the illustrated embodiment, CP(P) and CP(B) reside on different call application nodes (i.e., CAN  and CAN ). This is not a strict requirement. CP(P) and CP(B) may reside on the same call application node (e.g., CAN ) and still provide reliability and redundancy for software failures of the primary process, CP(P). However, it is preferable that the primary process and the backup process reside on different call application nodes, thereby providing hardware redundancy as well as software redundancy. Thus, CP(P) and CP(B) reside on CAN  and CAN , CP(P) and CP(B) reside on CAN  and CAN , and CP(P) and CP(B) reside on CAN  and CAN .","Together, CP, CP and CP form a supergroup for load sharing purposes. Thus, CP(P) and CP(B), CP(P) and CP(B), and CP(P) and CP(B) are part of a first load sharing group (LSG), indicated by the dotted line boundary. Additionally, CAN -CAN  host three other load sharing groups, namely, LSG, LSG, and LSG. LSG comprises two trunk idle list (TIL) server applications, namely TILl and TIL. TILL exists as a primary process, TIL(P), on CAN  and a backup process, TIL(B), on CAN . TIL exists as a primary process, TIL(P), on CAN  and a backup process, TIL(B), on CAN . Similarly, LSG comprises two identity server (IS) applications, namely IS and IS. IS exists as a primary process, IS(P), on CAN  and a backup process, IS(B), on CAN  and IS exists as a primary process, IS(P), on CAN  and a backup process, IS(B), on CAN . Finally, LSG comprises two subscriber database (SDB) server applications, namely SDB and SDB. SDBl exists as a primary process, SDB(P), on CAN  and a backup process, SDB(B), on CAN  and SDB exists as a primary process, SDB(P), on CAN  and a backup process, SDB(B), on CAN .","A group service provides a framework for organizing a group of distributed software objects in a computing network. Each software object provides a service. In addition, the group service framework provides enhanced behavior for determining group membership, deciding what actions to take in the presence of faults, and controlling unicast, multicast, and groupcast communications between members and clients for the group. A group utilizes a policy to enhance the behavior of the services provided by the group. Some of these policies include primary-backup for high service availability and load sharing for distributing the loading of services within a network.","Call processing server applications, such as CP-CP, IS-IS, and TIL-TIL, located within a computing network provide services that are invoked by client applications, such as CPC APP to CPC APPn. As shown in , the call processing server applications are organized into primary-backup groups configured as a \u201cone plus one\u201d (1+1) type of primary-backup group. There are multiple numbers of these primary-backup groups and the exact number is scalable according to the number of processes and\/or computing nodes (e.g., CANs) that are used. All of the primary-backup groups are themselves a member of a single load sharing group (e.g., LSG, LSG, LSG, LSG).","It is important to note that while the call process client applications, CPC APP to CPC APPn, are clients with respect to the call process server applications, CP, CP, and CP, a server application may be a client with respect to another server application. In particular, the call process server applications CP-CP may be clients with respect to the trunk idle list server applications, TILL and TIL, the subscriber database server applications, SDB and SDB, and the identity server applications, IS and IS.","A client application establishes an interface to the load sharing group. When a new call indication is received by the client application, the client application establishes a session with the load sharing group according to a client-side load sharing policy. The initial policy is round-robin (i.e., distribution of new calls in sequential order to each CAN), but other policies may be used that take into account the actual loading of the different primary-backup groups.","The client application associates the session with the new call and sends messages associated with the call over the session object. The client application also receives messages from the primary-backup group via the session established with the primary-backup group. Only the primary process (e.g., CP(P)) of the primary-backup group joins the load sharing group (e.g., LSG). For a variety of reasons, the application containing the primary may be removed from service. The server application may elect to not accept any new calls by leaving the load sharing group. However, the client applications may still maintain their session with the primary-backup group for existing calls. This action is taken because new call traffic may be lost if the singleton primary also fails. New calls are not distributed to the primary-backup group if it leaves the load sharing group.","If the primary of the primary-backup group that is a member of the load sharing group should fail, the backup member is informed that the primary member has failed (or left) and then assumes the role of primary member. The responsibility for these actions must be performed by the server application. It is the responsibility of the group service to inform the backup member that the primary member has failed or left.","As part of the online software upgrade process, one or more applications containing primary-backup groups may be removed from service, brought down, and then brought back up using a new version of software code. These groups, if their interface has not changed, join the existing load sharing group. When first started, it is required that the client interface be capable of throttling the call traffic to specific primary-backup groups. The traffic throttling is expressed as a percentage varying from zero percent (0%) (no calls) to one hundred percent (100%) (all calls). All new calls that would have been scheduled according to the scheduling algorithm are handled by this session. The throttling factor is initialized to one hundred percent (100%) for any primary-backup group that joins the load sharing group. During on-line software upgrades, the throttling factor is adjusted to start with the \u201cno calls\u201d case for the new software version. Any client application for the load sharing group may establish a session with a specific primary-backup group. The client may then change the throttling factor at any time. When the throttling factor is changed, all client session interfaces receive via multicast the changed throttling factor. As the-throttling factor is increased, the call process server applications with the new software version may receive increasing amounts of call traffic.","Call processing communications from the client applications to the call processing server primary-backup groups must support a very high volume of calls. The group software utilizes an internal transport consisting of a multicasting protocol (simple Internet Protocol (IP) multicast) and optionally a unicasting protocol. The unicasting protocol may be TCP\/IP, SCTP, or other transport protocol. The multicast protocol is used for internal member communications relating to membership, state changes, and fault detection. In the absence of unicast transport, the multicast protocol is used for client\/server communication streams. The unicast protocol, when provided, is used to provide a high-speed stream between clients and servers. The stream is always directed to the primary of a primary-backup group, which is transparent to both the call processing client application and the call process (e.g., CP, CP, CP, TIL, TIL, IS, IS).","As noted above, the call processes on the call application nodes (CANs) are organized into a load sharing group. Each call process (e.g., CP, CP, CP, TILL, TIL, IS, IS) is itself a primary-backup group. Both members of the primary-backup group may provide the service but only the primary of the group receives messages and thus actually provides the service. When a member of the group is selected as the primary, it registers one or more interface streams for the group. Each stream is a separate interface for some call processing service.","The call processing client application (e.g., CPC APP, CPC APP) in MSC  receives a new call indication and uses the group service to select an interface with a call application node (i.e., server) to handle the new call. The call process on each server (i.e., CAN) is a member of a load sharing group and a particular call application node (CAN) is selected using a round-robin algorithm from the perspective of the call process client application. For the particular primary-backup group that is selected a session is returned to the call processing client application. When the session is established with the primary-backup call process server group, the call processing client application then opens an interface to a particular member (representing an interface to a primary-backup group) and obtains a session interface. Each call processing server sends a message related to the new call over the session interface. Any subsequent transactions associated with the call are sent over the same session object.","The call process server (i.e., primary-backup group) may asynchronously send messages over the session using one or more of the defined stream interfaces. The primary member of the call processing server group receives the transactions. The backup group member does not receive transactions. The primary group member sends updates to the backup group member. The primary group member decides when updates are sent to the backup group member. The primary starts sending updates when a call has been answered. Prior to the call being answered, the call is defined as being a transient call. After the call has been answered, the call is defined as being a stable call.","If the primary group member should fail, then the backup group member becomes the new primary member. All transient call information during the fail-over period (the time between when the primary fails and the backup is changed to be the new primary) can be lost. All stable call information must be maintained by the backup. However, some stable call information may be lost if the backup has not received updates.","New call application nodes (CANs) and additional primary-backup group server applications (e.g., CP, CP, CP, TILL, TIL, IS, IS) may be added dynamically to the load sharing groups and can start servicing new call traffic. Call process client applications are not affected by the additions of new servers. If a server should fail, its backup assumes responsibility for the load. This provides high availability for the servicing of each call and minimizes dropped calls.",{"@attributes":{"id":"p-0066","num":"0065"},"figref":["FIG. 4","FIG. 4"],"b":["140","1","1","410","2","2","420","1","425","430","1","425","430","1"]},"As previously mentioned, system manager node  (SM)  comprises a first arbitrary application, P , and a second arbitrary application, P . SM  also comprises a Node Monitor (NM) application  and Configuration Management (CM) application . SM  also comprises a naming service application that is referred to as a System Request Broker (SRB) . The operation of SRB  will be more fully described below.","Similarly, system manager node  (SM)  comprises a first arbitrary application, P , a Node Monitor (NM) application  and Configuration Management (CM) application . SM  also comprises a System Request Broker (SRB) .","Call application node CAN   comprises software applications , Node Monitor (NM) application , and Configuration Management (CM) application . Call application node CAN N  comprises software applications , Node Monitor (NM) application , and Configuration Management (CM) application . Software applications  in CAN   and software applications  in CAN N  comprise the primary-backup group server applications (CP, CP, CP, TILL, TIL, IS, IS) previously described with reference to .","In each of the system manager nodes, SM and SM, and in each of the call application nodes (CANs), the Configuration Management (CM) applications comprise a Configuration Management (CM) controller that is capable of executing an online software upgrade for software in the mobile switching center (MSC) . As will be more fully described, the Configuration Management (CM) applications upgrade the software while the mobile switching center (MSC)  is executing the software to handle call traffic.","In each of the system manager nodes, SM and SM, and in each of the call application nodes, CAN  to CAN N, the Node Monitor (NM) application is a generic loader application. The Node Monitor provides an interface that is called the Node Management Interface (NMI). The Node Monitor loads and unloads software applications into a node through the Node Management Interface. The Node Monitor also obtains status information about the software applications through the Node Management Interface. For example, NM  is capable of loading or unloading software applications into system manager node SM . NM  is also capable of obtaining the status of any software application that has been loaded into system manager node SM .","The Node Monitor in each node is capable of establishing an Event Channel. An Event Channel is a connectionless multicast channel over which all Node Monitor events are reported. The Node Monitor uses the Event Channel to report events such as application loading, application failure, node start events, and node failure events. The Node Monitor monitors all loaded applications and reports when the loaded applications exit or when they fail. Each Node Monitor also monitors all other Node Monitors that may be loaded into other nodes of MSC . If there is a failure of a Node Monitor in any node of MSC , all of the other Node Monitors will report the node failure.","In each of the system manager nodes, SM and SM, the System Request Broker (SRB) is a naming service application. The SRB application is only loaded into system manager nodes. In the exemplary embodiment shown in , SRB  is loaded into SM  and SRB  is loaded into SM . The SRB naming service enables each server application to register its service. This feature allows a client to associate a public name with a service definition. Typically the service definition minimally contains the address of the service and how to construct a protocol stack that is provided by that service. Client applications use the service name to locate the service definition.","After the client application has obtained the service definition, a protocol stack with the proper address is constructed for the client application. The client application may then communicate with the server application. Generally both the server application and the client applications use group services. The group services appear in the form of a protocol stack. Servers and clients both only have to know the service name. Server applications also define the service type which defines the type of group that is used along with its associated transport.","An online software upgrade system of the present invention is initialized when a Node Monitor application is started within a system manager (SM) node. First, the Node Monitor loads an SRB application into the system manager (SM) node. Generally two  system management nodes (SM and SM) are provided for redundancy. That is, Node Monitor  loads SRB  into SM  and Node Monitor  loads SRB  into SM .","Consider SRB  within system management node SM . SRB  in system management node SM  is the Primary in a Primary\/Backup group. The other SRB  in system management node SM  is a Backup in the same Primary\/Backup group. All applications, including the Node Monitors, use an SRB application to define their services. The SRB application performs address assignments and association with the named service. Clients for those services use the SRB application to locate a named service and receive the address and stack description from the SRB application. The client can then establish a direct interface with the application providing that service.","The service definitions are stored in both the Primary SRB and in the Backup SRB. The Primary SRB sends a backup copy of the service definitions to the Backup SRB. Name Resolution Updates are also stored in the Backup SRB. If the Primary SRB should fail for any reason, then the Backup SRB can take over without loss of any of the service definitions.","The online software upgrade system of the present invention introduces a new software load for the various software components in the system of MSC  while the system is still actively running. This is accomplished by partitioning the SRB address space into two partitions. The first partition of the SRB address space is the current partition (referred to as the Reference Partition) and the second partition of the SRB address space is the new partition (referred to as the New Partition).","An exemplary partition of the address space  for SRB  is shown in . Address space  comprises Reference Partition  and New Partition . Reference Partition  comprises an address  (also denoted \u201cAddress 0\u201d) of SRB , an address  of Node Monitor , and an address  of a Node Table (described more fully below). New Partition  comprises an address  (also denoted \u201cAddress 1\u201d) of SRB , an address  of Node Monitor , and an address  of a Node Table (described more fully below).","To perform the online software upgrade of the present invention, Configuration Management (CM) application  of system management node SM  partitions SRB address space  into Reference Partition  and New Partition . CM application  selects a backup system management node (e.g., SM ) and an additional set of other application nodes (e.g., CAN  and CAN ) to take the new software load. CM application  then sends signals to cause the Node Monitor in each of the newly selected nodes (e.g., SM , CAN  and CAN ) to shut down the nodes. CM application  then sends signals to cause the Node Monitor in each of the newly selected nodes to install the new software. CM application  then assigns the New Partition  a new SRB address  that is different than the SRB address  in the Reference Partition . CM application  then starts the system management node SM  in New Partition  with the new SRB address .","SRB  in the Reference Partition  remains as a single member Primary in a Primary\/Backup group. SRB  in the New Partition  becomes a single member Primary in a Primary\/Backup group. SRB  in the Reference Partition  only handles naming service requests for the Reference Partition . Similarly, SRB  in the New Partition  only handles naming service requests for the New Partition . There is one exception to this feature that will be discussed more fully below.","The new software in the New Partition  is loaded through each Node Monitor located in each New Partition node. CM application  then tests the newly loaded software. If the newly loaded software passes the test, each node in the Reference Partition  is shut down, the new software is installed in the New Partition , the SRB address is changed for the New Partition nodes, and the New Partition nodes are restarted. This process continues until all the nodes have been upgraded with the new software.","If the newly loaded software does not pass the test, each node in the New Partition  is shut down, the previous version of the software is then used, the SRB address is changed back to the Reference Partition address, and the Reference Partition nodes are restarted.","Prior art implementations of this approach required that the applications be aware of which partition in which they were located or required that the applications make some other adjustments to the online software upgrade process. The present invention differs from the prior art by making the online software upgrade process transparent to all applications except for the CM, SRB, and NM applications that control the online software upgrade process.","As previously mentioned, a group service provides a framework for organizing a group of distributed software objects in a computing network. Each software object provides a service. In addition, the group service framework provides enhanced behavior for determining group membership, what actions to take in the presence of faults, controlling unicast, multicast, and groupcast communications between members and clients for the group. A group utilizes a policy to enhance the behavior of the services provided by the group. Some of these policies include Primary\/Backup for high service availability and load sharing for distributing the loading of services within a network.","Group service supports the concept of a \u201csuper group.\u201d A super group is a group whose members are themselves groups. Typically the members of a super group are themselves the Primary member of a Primary\/Backup group. One novel and unique feature of the present invention is the use of super groups to provide transparency to applications during the online software upgrade process. The super group itself is permitted to span partition boundaries so that its address is known in both the Reference Partition and the New Partition. The sub-groups which are members of the super group reside in either the Reference Partition or the New partition. The super group is used by applications to locate members for services. This permits both external entities (i.e., entities that are external to the online upgrade process) and internal entities to utilize services without interruption during the online software upgrade process.","A description of this process and how the SRB application and NM application cooperate in this process will now be given. The SRB application comprises a data structure called the Node Table that contains the address used by the. Reference Partition, the address used by the New Partition, and the list of nodes that are in the New Partition. If a node is not in the New Partition it must be assumed that the node is in the Reference partition. The Configuration Management (CM) application enters the contents of the Node Table during the initialization of the online software upgrade process.",{"@attributes":{"id":"p-0088","num":"0087"},"figref":"FIG. 6","b":["610","445","610","620","630","640","610","650","620","630"]},"Assume that at the beginning of the online software upgrade process, the Reference Partition address is denoted as an \u201cAm\u201d address and the New Partition address is denoted as an \u201cAn\u201d address. After the first online software upgrade for the system, the Reference Partition address is denoted as an \u201cAn\u201d address. After the second online upgrade for the system, the New Partition address is denoted as an \u201cAm\u201d address. The \u201cAm\u201d and \u201cAn\u201d addresses exchange places (i.e., cycle) with each new software load.","Each Node Monitor (NM) initially queries the Node Table in the SRB (e.g., Node Table  in SRB ) to determine what address to use. Each Node Monitor initially uses a fixed SRB address \u201cAp\u201d (e.g. fixed SRB address ) to communicate with the SRB. The Node Monitor may communicate with any SRB using the fixed SRB address \u201cAp\u201d regardless of the partition location. The Node Table is accessable (i.e., shared) across both the Reference Partition and the New Partition.","The Node Monitor in any node is automatically started with the fixed SRB \u201cAp\u201d address as an input parameter. The Node Monitor attempts to contact any SRB that is reachable through the fixed SRB \u201cAp\u201d address. If an SRB cannot be found, then the Node Monitor loads an SRB using the \u201cAp\u201d address as an input parameter. When the Node Monitor is able to contact an SRB, the Node Monitor requests the address for the node (either the \u201cAm\u201d address or the \u201cAn\u201d address) that the Node Monitor and all of its loaded applications should be using. The Node Monitor then loads a local SRB if it has not already done so (using either the \u201cAm\u201d address or the \u201cAn\u201d address). When the Node Monitor loads applications into its node, the Node Monitor tells each loaded application what SRB address to use (either the \u201cAm\u201d address or the \u201cAn\u201d address based upon the original SRB communication). This is the extent of the actions that are required of the Node Monitor program in support of the online software upgrade process of the present invention.","The SRB (e.g., SRB ) comprises an SRBServerMain program (referred to as the \u201cSRBServerMain\u201d). The SRBServerMain is started using the following command:","SRBServerMain Ap [Am|An], where [ ] denotes an optional argument and the vertical line | denotes \u201cor\u201d. The SRBServerMain program persistent database has a data structure called the System Address Field that contains the following data elements:","Am\u2014IP multicast address m.","An\u2014IP multicast address n.","Partition Address Index\u2014(0 or 1) indicating either an \u201cm\u201d or an \u201cn\u201d address for this partition.","The SRBServerMain creates two group server interfaces (the partition independent interface and the partition interface):","The first interface uses the multicast address \u201cAp\u201d. This address is the partition independent address through which the Node Monitor in each node can obtain its partition address.","The second interface is created using the assigned partition multicast address, either the Am address or the An address.","If SRBServerMain is started with the optional address argument (either the Am address or the An address), then SRBServerMain uses that address for the second interface. SRBServerMain then edits its local SRB System Address Field Partition Address Index to correspond to the input address argument. If the input address does not match one of the addresses in the System Address Field, then SRBServerMain outputs an error to the system log. If there is no local SRB System Address Field, then SRBServerMain outputs an error to the system log. SRBServerMain still establishes its interface using the input address argument.","If the SRBServerMain is not started using the optional address argument, then SRBServerMain reads the local SRB System Address Field and selects the address referenced by the Partition Address Index. If there is no SRB System Address Field, then SRBServerMain outputs an error to the system log and does not establish the second interface.","SRBServerMain normally runs in a duplex mode with one SRB being the Primary in a Primary\/Backup group. When the second SRB initializes, it is the responsibility of the Primary SRB to equalize the state of the Primary with that of the Backup. The SRB System Address Field contents for the Backup SRB are equalized with that of the Primary SRB to avoid address inconsistencies.","The SRB defines the Node Table and provides an application programming interface (API) to set and retrieve the Node Table data. As previously mentioned, the Node Table contains:","The Reference Partition address (either Am or An);","The New Partition Address (either Am or An where the Reference Partition address and the New Partition address are different); and","The list of node names in the New Partition.","The Configuration Management (CM) application controls which nodes are in the New Partition when the online software upgrade process is initiated. When a node is selected to migrate to the New Partition, the New Partition node is shut down, the new software is installed in the New Partition node, and the name of the New Partition node is added to the list of nodes in the New Partition. When the New Partition node is started, the Node Monitor will initalize the node as previously described, and will load the new version of software using the New Partition SRB address.","Before the online software upgrade process of the present invention is initiated, an SRB initializes its operation by initializing its Node Table if it not already set to the values obtained from the local SRB System Address Field. The SRB then sets the Reference Partition Address to the value of the address referenced by the Partition Address Index. The SRB then sets the New Partition Address to the value of the other address. The SRB then sets the list of node names in the New Partition to empty (i.e., no names in the list). If the SRB is selected to operate as a Backup SRB, the Primary SRB updates its SRB System Address Field and the Backup SRB overwrites its local SRB System Address Field with the update value. The Backup SRB also receives the Node Table and updates its local version of the Node Table.","When the online software upgrade process of the present invention is initiated, the backup system manager (e.g., SMs) and a subset of call application nodes (CANs) are shutdown. (For purposes of description, the SM in the Reference Partition is denoted SM and the SM in the New Partition is denoted SM) The Configuration Management (CM) application sets the Node Table within the one instance of SRB running locally. The Configuration Management (CM) application then adds the shutdown nodes to the New Partition list.","The user (i.e., technician) then loads the new version of software onto the shutdown nodes. The Configuration Management (CM) application then starts SM in the New Partition. This starts the Node Manager application. The Node Manager attempts to contact any SRB using the Ap address. For example, the Node Manager contacts the SRB in SM. Assume that the Reference Partition address is an An address and the New Partition address is an Am address. The Node Monitor queries the SRB to find out what address to use for SM.","In this example, the SRB returns the Am address. The Node Monitor then loads a local SRB and tells the local SRB to use the Ap address and the Am address. All subsequent applications that are loaded by the Node Monitor of SM are told to use the Am address. All name associations are defined to this local SRB. The SRB in SM is not visible to any applications running in SM. Even though the applications may define the same named services as in SM, because the address spaces are different the applications are not accessible between the two partitions.","There is one exception to this general rule. The SRB in the Reference Partition and the SRB in the New Partition share service definitions. They also share the Node Table and any other resource that must be shared across the boundary of the two partitions. This includes super group service definitions which must span both of the partitions.","When an call application node (e.g., CAN ) is brought up in the New Partition, it starts a local Node Monitor. Assume that call application node  (CAN ) is the Reference Partition. The Node Monitor in the New Partition uses the Ap address to contact an SRB. The SRB will either be the SRB in SM or the SRB in SM. Because the Node Table is the same in both partitions, it does not matter which SRB is used. The Node Monitor then requests the partition address that it should use giving the node name of CAN . The SRB returns an Am address which is the address used in the New Partition. All applications then loaded into the New Partition node CAN will then use the Am address to define and locate services. Similar actions occur for any additional application nodes that are started in the New Partition.","The user (i.e., technician) then tests the newly loaded software in the New Partition. If the test is successful, then nodes in the Reference Partition may be moved forward by shutting them down, updating the SRB Node Table, loading the new software in the New Partition node, and then restarting the New Partition node. If the test is not successful, then any node may be migrated back to the Reference Partition by first shutting down the New Partition node, removing it from the SRB Node Table, restoring the original software load to the Reference Partition node, and then restarting the Reference Partition node.","During the process of the online software upgrade it is desirable to make the transition as transparent as possible to the majority of applications. For many services the online software upgrade process as previously described is sufficient to provide transparency. Unfortunately, a set of services exists that must be utilized from both partitions. Typically these services include load sharing services that must be accessed by external entities either through a firewall (or through some other means), shared distributed resources, and shared resources handled by centralized servers.","To solve the problem of transparency for services that must be provided across partition boundaries, the super group concept is utilized. The super group definition itself is shared between both partitions. This provides the ability to locate actual servers in either partition on the basis of some selection criteria. This can include load sharing (least loaded, least memory used, etc.), which server has a particular resource that needs to be obtained, and so forth. The actual partition in which the application is located is transparent to the application. This feature enables an application (1) to remain unaware of the partition in which the application is located, and (2) to remain unaware of the partition in which a service the application is using is located.","The members of a super group have the name of the Primary\/Backup group which may reside in either of the two partitions. During the online software upgrade process it is not uncommon for members to have the same group name because both reflect two different versions of the same application code and configuration. When such a member name server is selected by the group service for use by a super group client, the group service uses the member name and the SRB to locate the service definition. To distinguish the two groups, group adaptors are provided by the group service. A group adaptor modifies the group name by adding a suffix that identifies the partition in which the group resides. When a group name is passed to an SRB, regardless of which partition the group resides in, the SRB looks at the suffix. If the suffix matches the SRB, then the SRB defines or locates the service locally. If the suffix does not match, then the SRB passes the request onto another SRB for name definition or name resolution. This mechanism hides the partition location for shared resources and permits clients of those services to be partition unaware.",{"@attributes":{"id":"p-0118","num":"0117"},"figref":["FIG. 7","FIG. 7"],"b":["700","455","1","410","510","520","530","710","455","2","420","2","3","720","455","2","2","3","730"]},"CM application  then instigates the assignment of a new SRB address  to New Partition  that is different than the SRB address  in the Reference Partition  (step ). CM application  then starts the system management node SM  in the New Partition  with the new SRB address  (step ). Control then passes to step  of .",{"@attributes":{"id":"p-0120","num":"0119"},"figref":["FIG. 8","FIG. 8"],"b":"800"},"Control passes from step  of the method as shown in . The new software is then loaded into the New Partition  through each Node Monitor located in each New Partition node (step ). CM application  then tests the newly loaded software (step ). CM application  then determines whether the newly loaded software in the New Partition  passes the test (decision step ). If the newly loaded software passes the test, then each node in the Reference Partition  is shut down and the software is installed in the New Partition  (step ). The SRB address is then changed for the New Partition nodes, and the New Partition nodes are restarted (step ). This process continues until all the nodes have been upgraded with the new software.","If the newly loaded software does not pass the test, then each node in the New Partition  is shut down and the previous version of the software is then used (step ). The SRB address is changed back to the Reference Partition address and the Reference Partition nodes are restarted (step ). The process then continues.","A major advantage of the online software upgrade process of the present invention is that the knowledge about the online upgrade process is restricted to a very small area. The only areas of the mobile switching center (MSC)  that have to have knowledge about the online software upgrade process are: (1) the Node Monitor application, (2) the SRB naming service application, (3) group naming modification for super group adaptors in the group service, and (4) the Configuration Management (CM) application that controls the online software upgrade process. The use of super groups handles the problems associated with resources that must be shared across both of the two partitions. The use of super groups also handles problems associated with external interfaces being able to access services during the online upgrade process.","Although the present invention has been described in detail, those skilled in the art should understand that they may make various changes, substitutions and alterations herein without departing from the spirit and scope of the invention in its broadest form."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["For a more complete understanding of the present invention, and the advantages thereof, reference is now made to the following descriptions taken in conjunction with the accompanying drawings, wherein like numbers designate like objects, and in which:",{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":["FIG. 3","FIG. 2"]},{"@attributes":{"id":"p-0023","num":"0022"},"figref":["FIG. 4","FIG. 3"]},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 8"}]},"DETDESC":[{},{}]}
