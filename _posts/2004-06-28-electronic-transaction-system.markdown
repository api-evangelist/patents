---
title: Electronic transaction system
abstract: An electronic transaction system comprising a host server, at least one transaction device; at least one service provider system; and a content management system. When a transaction device issues a client request to the host server for one or more of the electronic goods and/or services, the host server operates to generate a client response in reply to the client request. In generating the client response a service request may be issued to the at least one service provider system. Also includes a matrix recording a set of permissions and/or constraints applicable to the electronic transaction system. The content management system references the matrix in determining the content to be provided to each transaction device to ensure that the set of permissions and/or constraints are complied with. Each transaction device further receives a set of unique identifiers from the host server, each identifier representing a component of the content.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09177304&OS=09177304&RS=09177304
owner: TAFMO Australia PTY LTD.
number: 09177304
owner_city: Melbourne Victoria
owner_country: AU
publication_date: 20040628
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["FIELD OF THE INVENTION","BACKGROUND ART","DISCLOSURE OF THE INVENTION","BEST MODE(S) FOR CARRYING OUT THE INVENTION"],"p":["The present invention relates to an electronic transaction system. The system is particularly suited for facilitating the sale of services and\/or goods in electronic format (such as software).","The following discussion of the background of the invention is intended to facilitate an understanding of the invention. However, it should be appreciated that the discussion is not an acknowledgement or admission that any of the material referred to was published, known or part of the common general knowledge of the person skilled in the art in any jurisdiction as at the priority date of the application.","Retailing of any good or service often requires the input of multiple parties. This input can be difficult to co-ordinate, particularly in situations where the input of one party, or even the need to contact that party for their input, is dependent on the input of another party. In situations where the retailed service or good is distributed over an electronic network, this problem is further exacerbated by the common expectation that such services or goods can be provided immediately.","Accordingly, it is an object of the present invention to provide an electronic transaction system that is customisable in a manner that simplifies the task of co-ordinating input from multiple parties over an electronic network.","A yet further problem with electronic transaction systems is the need for the electronic transaction system to integrate with the existing, pervasive Electronic Funds Transfer at Point of Sale (\u201cEFTPOS\u201d) infrastructure. This poses problems as the EFTPOS infrastructure:\n\n","One prior method of overcoming this problem has been to integrate the transaction system with the embedded payment application. However, this solution requires the transaction acquirer or processor to modify their main switch to accommodate transaction transactions as well as payment transactions. Such modifications are expensive and time-consuming.","It is therefore an optional, subsidiary, object of the present invention to provide an electronic transaction system that utilises the existing EFTPOS infrastructure while overcoming, or at least partially alleviating, one or more of the aforementioned problems associated with the existing EFTPOS infrastructure.","Throughout the specification, unless the context requires otherwise, the word \u201ccomprise\u201d or variations such as \u201ccomprises\u201d or \u201ccomprising\u201d, will be understood to imply the inclusion of a stated integer or group of integers but not the exclusion of any other integer or group of integers.","Further, the term \u201celectronic service\u201d is to be understood as meaning any service where the transaction constituting offer and acceptance of the service is conducted over an electronic medium.","In accordance with a first aspect of the invention there is provided an electronic transaction system comprising:\n\n","Ideally, the electronic payment system further comprises a matrix recording a set of permissions and\/or constraints applicable to the electronic transaction system, and where the content management system references the matrix in determining the content to be provided to each transaction device of the at least one transaction device to ensure that the set of permissions and\/or constraints are complied with. Preferably, the matrix includes at least one of the following dimensions:\n\n","The host server may also determine whether the client request complies with the set of permissions and\/or constraints recorded in the matrix and references the matrix in generating a client response to ensure that the set of permissions and\/or constraints are complied with.","In a further preferred embodiment, each transaction device of the at least one transaction device receives a set of unique identifiers from the host server, each unique identifier representing a component of the content, the transaction device operable to check the set of unique identifiers against content already provided and request content having unique identifiers not already provided from the content management system. The transaction device may further operate to discard components of the content having a unique identifier not included in the set of unique identifiers received from the host server. Ideally, the unique identifier consists of a file name and at least one of the following: a version number; an error check value.","Alternatively, upon creation of content using the content management system, the content management system operates to provide the content to each transaction device of the at least one transaction device. In this manner, almost \u201creal-time\u201d download of content to transaction devices can be attained.","The content preferably includes, in respect of each electronic service and\/or good able to be transacted; at least one of the following:\n\n","The content may also include:\n\n","Each transaction device of the at least one transaction device may receive a scheduled time for transmission of content from the content management system. each transaction device operable to request the set of unique identifiers from the host server on the scheduled time.","Preferably, the host server operates to generate a client response in reply to the client request by reference to a process model, the process model conceptually comprising a series of steps and links, the arrangement of one or more links in respect of a first step representing a second step to process on the first step resolving to a predetermined result in a set of predetermined results. The set of predetermined results, ideally, are a set of Boolean values and a fail result.","The electronic transaction system may also include at least one channel grouping, each channel grouping associated with at least one transaction device, where content provided to each transaction device of a channel grouping is the same as content provided to each other transaction device in the same channel grouping. At least one relationship may also be included in the electronic transaction system, each relationship recording details for facilitating communication between the host server and either a transaction device or a service provider system, using their respective native languages and communication protocols.","In a yet preferred embodiment, the electronic transaction system also includes an electronic inventory, the electronic inventory operable to provide an electronic good to the host server on request. The request from the host server for an electronic good may include a goods identifier, the electronic inventory operable to provide an electronic good having a corresponding goods identifier in response to the request. To combat potential fraud, on return of an electronic good to the electronic inventory, the electronic good is not able to be provided in response to a request from the host server for a predetermined period of time. The electronic good may be a serial number to be provided in redeeming an electronic service able to be transacted.","The electronic transaction system may be operable to issue both synchronous and asynchronous service and client requests. Asynchronous service requests and asynchronous client requests include a correlation key and any response to the asynchronous service request or asynchronous client request, as appropriate, includes the correlation key. As asynchronous service requests can cause confusion for the host server, the host server may be operable to distinguish between a service response and a client request by reference to the correlation key and\/or type.","Preferably, each service request, service response, client request and client response is communicated via at least one message bus. The message bus may use a publish\/subscribe mechanism of communication.","Ideally, the transaction device includes at least one payment application. Using an intermediate router having a dedicated connection to the host server and to a payments host, the transaction device may forward a service request issued by a transaction device to the host server and forward a payment request issued by the payment application of the transaction device to the payments host.","In a potential alternate processing method, the transaction device issues an authorisation request to the intermediate router for forwarding to the payments host and receives an authorisation reply from the payments host via the intermediate router and where, if so authorised, the transaction device thereafter issues a service request to the host server via the intermediate router and, upon receiving a service response indicating that the service request was successful, issuing a payment request to the payments host via the intermediate router.","The transaction device may further include removable, writeable media for recording one or more of the following: a receipt; an electronic good; details of the client request; details of the client response.","The host server may operate to confirm the identity and\/or capacity of the transaction device that issued the client request and, if the identity of the transaction device can not be confirmed, or the capacity of the transaction device is exceeded, ignore the client request.","In accordance with a second aspect of the present invention there is a host server for use in an electronic transaction system according to the first aspect of the invention.","In accordance with a third aspect of the present invention there is a transaction device for use in an electronic transaction system according to the first aspect of the invention.","In accordance with a fourth aspect of the present invention there is a method of performing an electronic transaction comprising the steps of:\n\n","Ideally, the method also includes the step of referencing a matrix recording a set of permissions and\/or constraints to ensure that the content to be provided to each transaction device complies with the recorded set of permissions and\/or constraints.","Preferably, the method also includes the steps of determining whether the client request complies with the set of permissions and\/or constraints recorded in the matrix and the step of generating a client response includes the sub-step of referencing the matrix to ensure that the set of permissions and\/or constraints are complied with.","The method may also include the step of sending a set of unique identifiers to each transaction device, each unique identifier representing a component of the content, and the step of transmitting any content having unique identifiers not already provided to the transaction device upon request by the transaction device. Additionally, the method includes the step of receiving a request for the set of unique identifiers from each transaction device at each transaction device's scheduled time.","Preferably, the step of generating a client response includes the substep of executing a process model, the process model conceptually comprising a series of steps and links, the arrangement of one or more links in respect of a first step representing a second step to process on the first step resolving to a predetermined result in a set of predetermined results.","The method also includes the step of associating each transaction device with at leat one channel grouping, the content provided to each transaction device of a channel grouping being the same as content provided to every other transaction device in the same channel grouping.","Ideally, the method includes the step of recording details for facilitating communication between the host server and each transaction device and the host server and each service provider system to form a set of relationships and the step of using the appropriate relationship in the set of relationships to facilitate communication between the host server and transaction device or service provider system, as appropriate, in their respective native languages and communication protocols.","The method may also include the steps of issuing a request to an electronic inventory for an electronic good and receiving an electronic good from the electronic inventory.","Preferably, the method also includes the step of distinguishing between a service response and a client request by reference to a correlation key in the service response and\/or type.","The method may also include the step of communicating service requests, service responses, client requests and client responses by way of at least one message bus using a publish\/subscribe mechanism of communication.","Preferably, the method includes the steps of confirming the identity and\/or capacity of the transaction device that issued the client request and the step of ignoring the client request if the identity of the transaction device can not be confirmed or the capacity of the transaction device is exceeded.","In accordance with the present invention there is an electronic transaction system . In the electronic transaction system  being described, and as shown in , the electronic transaction system  comprises:\n\n","The host server  operates to provide message brokering services between participants involved in an exchange of messages. As such, the host server  is in data communication with the at least one transaction device , service provider systems , databases , process designer  and content management system . The host server  further comprises:\n\n","Adaptors  can be classified as front-end adaptors and back-end adaptors . Front-end adaptors are responsible for data communication with transaction devices . Back-end adaptors are responsible for data communication with service provider systems . In other respects, front-end adaptors and back-end adaptors are basically identical.","Each adaptor  has an associated relationship. In the context of the functions of an adaptor , a relationship represents data necessary for transforming messages received by the adaptor  from a format native to the adaptor's  associated transaction device  or service provider system , into a format native to the PAE  and vice versa. Thus, by reason of its associated relationship, the adaptor  is operable to act as a translator.","Adaptors  \u201clisten\u201d for transaction messages from its respective transaction device  or service provider system , as appropriate. On receipt of a transaction message, the adaptor  operates to transform the message in accordance with its associated relationship for forwarding to the PAE . Similarly, on receipt of a message from the PAE , the adaptor  operates to transform the message in accordance with its associated relationship for forwarding to its respective transaction device  or service provider system , as appropriate.","PAE ","The PAE  is not a single component, but a logical concept comprising:\n\n","Process model  is, as described in more detail below, a programmatic representation of a business procedure. However, a process model  is able to represent any short-duration process that needs to happen repeatedly in a predictable manner.","Message Buses ","Message buses  are used for communicating messages internally between electronic transaction system  components. Message buses  work on a publish\/subscribe arrangement. Messages are published by various components to the desired message bus . Such messages may include extra information.","The various components subscribe to the desired message bus  in order to receive messages. Subscription requires the component to specify subscription criteria. Thus, on a message being published to the message bus , the message bus checks the message against the various subscription criteria of its subscribers. Where the message matches the subscription criteria of a subscriber, the subscriber is notified of the publication of the message to the message bus .","In the embodiment being described there are four message buses \u2014inbound message bus outbound message bus retry message bus and response message bus ","Message Receiver ","Message receiver  subscribes to inbound message bus When notified of the existence of a message, the message receiver  operates to decode the message. This is done with reference to the relationship associated with the adaptor  through which the message has been received. In this manner, while in the context of translation by an adaptor , the relationship is agnostic as to the content of the message, in the context of processing of the message for the purposes of the message receiver , the relationship may also be interested in the content of the message.","Once decoded, the message receiver  operates to determine whether the message is a client request or a service response. In this regard, if the message includes correlation information, the message received  designates the message a service response and operates accordingly (refer to the examples below). If the message does not include correlation information, the message receiver  assumes that the message is a client request, ie any request for an electronic good or service from a transaction device . (Note that in some instances the message receiver  may be able to determine that a message is a service response by nature of the format of the message, even in the absence of correlation information). Client requests are then forwarded to request handler .","Request Handler ","Each relationship has an associated request handler . On receipt of a client request, the request handler  either processes the client request itself, or identifies the appropriate process model that the process executor  executes. In the latter arrangement, the request handler  forwards the client request to the process executor .","Retry Receiver ","Retry receiver  is a subscriber to the retry message bus The functions of the retry receiver are described in more detail in the examples below.","Process Executor ","The process executor  executes the process model  as determined by request handler . To some extent, however, the process model  is self-executing. The client request provides the initial data upon which the process model  operates.","Electronic Inventory ","The electronic inventory  is used to store activated electronic goods. The electronic goods may, amongst others, take the form of movie pass numbers, recharge codes for telecommunications carriers or software.","Electronic goods in the electronic inventory  are serialised and are often represented by a \u2018PIN\u2019. The PIN is a unique number the service provider uses to identify a purchased electronic good. Typically, the PIN is encrypted and is kept private until the time of issue.","PINs cannot be issued twice. An electronic good in the electronic inventory  can be used only once. To this end, the electronic inventory  must guarantee that a PIN is issued at most once (subject to the following exception).","Electronic goods are typically supplied as a data file containing serialised \u2018PINs\u2019. The serial numbers are a tracking mechanism for PINs, the PINs are effectively the delivered good. The need to allocate a serial number to each stock item is necessary for supplier relationship purposes. The serial numbers are a public identifier of the electronic good and can be used for reconciliation and problem solving.","If an electronic good is returned, it is put in escrow for a predetermined period of time and may be reconciled with the supplier to determine if it was used or not. Upon completion of the electronic good's escrow period, the unique electronic good is able to be resold.","The need to keep the electronic goods in escrow for a predetermined period of time is for fraud prevention purposes. When a return of a successfully delivered electronic good occurs, the merchant is still in possession of the electronic good and may try to use the electronic good in some way. If the electronic good was then issued to a customer of another merchant, who then proceeded to redeem the electronic good after the initial merchant has used the electronic good, the redemption would be blocked because of the fraud of the initial merchant. However, by placing the electronic good into escrow for a period of time, the chance of this type of fraud occurring is reduced and\/or perpetrators of this type of fraud can easily be identified.","Electronic inventory  receives service requests from the PAE .","Monitoring System ","Monitoring system  operates on a proactive and reactive level. When operating on a proactive level, monitoring system  checks key aspects of the operation of the host server . If this check reveals that one or more alert conditions are satisfied, an alert is generated. The alert is sent to an appropriate representative of the operator of the electronic transaction system  by way of e-mail or SMS message.","When operating on a reactive level, the host server  may itself issue a problem notification to the monitoring system . The monitoring system  then generates an alert. Again, the alert is sent to an appropriate representative of the operator of the electronic transaction system  by way of e-mail or SMS message.","Transaction Device ","Each transaction device  comprises a processor and memory means. The processor is operable to execute embedded software stored on the memory means. The embedded software comprises a transaction application and a payment application.","The transaction application is similar to a web browser in nature. It downloads content from the content management system  on a periodic basis. This downloaded content may include data relating to.\n\n","As such, the downloaded content is used by the transaction application to generate a user interface through which a customer interacts to purchase an electronic service or good. The concept of the user interface is important, as it provides functionality akin to a normal EFTPOS transaction.","The use of downloaded content as the means of developing the user interface means that the transaction application does not change when a new electronic service or good is to be added to the electronic transaction system . As a result, there is also no need for the transaction application to be recertified.","As discussed above, the downloaded content may include authentication, data entry and document detail information. As a result, the transaction application must also be capable of controlling a printer, card reader or other peripheral device connected to, or integrated into, the transaction device .","The payment application is typically an EFTPOS payment application. However, any payment application capable of processing payment from a customer may be used. The payment application is separate from the transaction application. The payment application and transaction application can communicate though by means of an application programming interface. In this manner, the transaction application does not interfere with the functionality of the payment application.","This is also important as it means that security concerns regarding payment processing are separated from security concerns regarding transaction processing.","Each transaction device  is associated with a merchant.","Service Provider Systems ","Service provider systems  represent the computer systems associated with the various suppliers of the electronic services and goods. Each service provider system  is in data communication with the host server . The processing performed by each service provider system  is beyond the scope of the present invention and therefore the service provider systems  will not be described in further detail.","Databases ","Databases  comprise an administration database a transaction database and a reporting database Administration database stores information relating to the at least one transaction device  and the merchant associated with each transaction device . Transaction database holds information on each transaction processed by the electronic transaction system . Reporting database holds the same information as held in administration database and transaction database , but in a simplified form, particularly optimised for reporting. In this manner, the transaction database is also relieved of some processing load.","As information is constantly being written to the databases , and the timing and type of information to be written to the databases  would be known to the person skilled in the art, specific instances will not be described herein.","Process Designer ","Process designer  is used to create the process model . While the process model  is computer software, conceptually, a process model  consists of a series of steps  and links .","As shown in , the position of each link  provides direction as to the next step  to execute based on the outcome of the present step . To elaborate, links  that connect to the top of the step  represent the connection from a parent step  (ie. the step  that has just finished processing). Links  that sprout from the left of step  represent the connection to a child step  that is to execute on failure of the current step . Links  that sprout from the bottom of step  represent the connection to a child step  that is to execute on the current step  resolving to a value of \u201cFALSE\u201d. Links  that sprout from the right of step  represent the connection to a child step  that is to execute on the current step  resolving to a value of \u201cTRUE\u201d. Thus, each step  must resolve to a Boolean value or fail.","Multiple links  may sprout from the left, right or bottom of a step  as a means of indicating parallel child steps  to be processed on resolution of step .","This uniform structure for process models simplifies processing for delivery of the electronic good or service.","Content Management System ","In essence the content management system  controls the construction, release and maintenance of content downloaded by transaction devices . However, in doing so, the content management system  references the channels matrix  to ensure that any constraints recorded in the channels matrix  are not contravened. In doing so, this may result in exclusion of part, or all, of the content.","The content management system  comprises a user navigation designer , a document designer , a channel groupings module  and a content download management module .","The user navigation designer  allows for creation of a menu system ultimately replicated on the transaction device  following content download. It also allows a party to designate in what manner the customer is required to interact with the transaction device  in order to purchase the specified goods and\/or services. For example, using the user navigation designer  anyone may specify what information, if any, is to be obtained by means of magnetic swipe card or an external keyboard, for example, information in respect of the customer's account number.","The document designer  facilitates the graphical design of documents to be printed by the transaction device . The designed documents form part of the content. Ideally, document designer  is used to produce receipts to be issued to customers upon completion of a successful transaction.","Channel grouping module  facilitates allocation of a transaction device  to a channel grouping. A channel grouping represents a collection of transaction devices  that are to receive the same content.","Each transaction device  can belong to one or more channel groupings. A transaction device  can have its channel grouping changed or have a channel grouping added at any time.","Content download management module  facilitates the scheduling of downloads for particular transaction devices  or channel groupings. In this context, the content download management module  notifies each transaction device  of its scheduled time to download content. The transaction device  then contacts the host server  at the scheduled time to initiate the content download.","The content download management module  also manages the reporting of the success or failure of a scheduled download, as appropriate.","Scheduler  and Schedule Management Module ","Scheduler  and schedule management module  combined operate to manage any scheduled task, other than content download. One scheduled task handled by the scheduler  and schedule management module  is the periodic transmission of a transaction listing to service provider systems .","Channels Matrix  and Channels Matrix Management Module ","The channels matrix  is central to controlling whether a merchant can sell a product, and if so, for what price, and at what commission. The channels matrix  is also used during transaction processing to ensure that the rules implemented therein are always satisfied. To elaborate, if the content of a transaction device  is somehow out-of-date, the channels matrix  may disallow a sale of a product if it is being sold for an incorrect price.","Channels matrix management module  manages the channels matrix . Channels matrix  is a multi-dimensional matrix used to control the electronic services and\/or goods available for sale by each transaction device , channel grouping or merchant. Factors covered by the channels matrix  include:\n\n","In this manner, the availability and price of an electronic service or good may be adjusted based on such factors as the locality of, or industry segment of the merchant associated with, the transaction device . The channels matrix  further allows for business rules, such as \u201cmerchants in industry X, belonging to bank Y, cannot sell electronic service Z after date D\u201d, to be implemented\u2014each business rule having a predetermined lifespan.","The dimensions of the channels matrix  are composed of attributes of the device, the merchant and the electronic good or service. An example of a device attribute is \u2018Location\u2019; an example of a merchant attribute is \u2018Retailer Group\u2019; and an example of an electronic good or service is \u2018Brand\u2019. Implemented business rules are made by combining attributes of merchants and devices and electronic goods or services.","Business rules are cumulative. If more than a single rule applies to a device for merchant margin or price than an algorithm is used to establish the most \u2018relevant\u2019 rule. This algorithm is based on a weighting value scheme between attributes.","Merchant Reporting Module ","The merchant reporting module  allows merchants and other operators of transaction devices  to access a series of secure reporting screens. Each reporting screen lists details of transactions as recorded within reporting database or details of transactions presently being processed by the PAE . The transaction details may be provided as drill down graphs or summaries as desired by the merchant or operator, as appropriate.","Management Module ","Management module  allows for a transaction device  or service provider system  to be declared inactive. When a transaction device  is declared inactive, the host server  is not able to receive transactions from the transaction device . When a service provider system  is declared inactive, the host server  is not able to process any transactions requesting purchase of an electronic service or good provided by the merchant associated with the service provider system .","The management module  also manages information in respect of each transaction device , merchant, supplier, channel, industry segment and other global information made use of by the electronic transaction system .","Accounting and Settlement Module ","Accounting and settlement module  performs procedures that provide for settlement between a merchant and the operator of the electronic transaction system . This is required because the operator of the electronic transaction system  is not an acquirer of the financial transaction (transactions processed by the transaction device  accruing to the merchant who made the sale).","Business Procedure Definition Module ","The business procedure definition module  facilitates the definition of repeatable business processes, such as \u2018release a new product\u2019 or \u2018change the merchant margin for channel X\u2019. Often there are many repeatable business processes surrounding the brokering of electronic goods or services. A repeatable business procedure helps to maintain quality and consistency within the electronic transaction system .","Business procedures are stored in the administration database ","The invention will now be described in the context of two examples of its expected use, with additional components being described as necessary. As the two examples have a common setup procedure, this setup procedure is described first.","Using process designer , an administrator of the electronic transaction system  creates at least one process model . Each process model  is representative of the processing subsequently to occur by the PAE  on receipt of an appropriate client request.","The administrator also checks the level of stock in the electronic inventory . If the level of stock is low, a request for more stock is made to the appropriate supplier.","The supplier then provides the stock in the form of an encrypted file of predetermined format. Ideally, the stock recorded in the encrypted file is delivered in an \u201cinactive\u201d state. In this manner, the stock cannot be used by another party who may receive the encrypted file by mistake. Upon successful decryption of the file, the administrator confirms receipt of the file with the supplier. In turn, the supplier operates to activate the stock recorded in the encrypted file.","At roughly the same time, the administrator or a merchant generates content relating to the proposed delivery of an electronic good or service using the content management system . The content management system  only allows content to be generated that conforms with the constraints recorded in the channels matrix . The administrator or merchant may also act to allocate, or amend allocations of, transaction devices  to channel groupings as may be necessary for appropriate delivery of the electronic good or service.","Once the administrator or merchant has completed generating the desired content, the content download management module  communicates with the transaction device  via the intermediate router. The communication informs the transaction device of the scheduled time that it should contact host server  to download content\u2014in this situation, the new content generated by the administrator or merchant, as appropriate.","The payment device , at the scheduled time, then operates to contact host server , through an intermediate router (discussed in more detail below). In response, host server  sends to the payment device \u2014again, via the intermediate router\u2014a set of file names with associated cyclical redundancy check (CRC) numbers.","Each file name and CRC number represents a component of the content to be downloaded to memory. However, as the transaction device  is a low-bandwidth device, a comparison is first made between each filename and CRC number in the set of file names and CRC numbers and the file names and CRC numbers associated with components of content already downloaded. Only in instances where a file name and CRC number in the set of file name and CRC numbers does not match a file name and CRC number associated with components of content already downloaded does the transaction device  operate to download to memory the components of content having the non-matching file name and CRC numbers from content management system .","Those components of content already downloaded that have an associated file name and CRC number that does not match a file name and CRC number in the set of file names and CRC numbers are deleted from memory. In this manner, the file name and CRC numbers of components of the content stored in memory always exactly match the file names and CRC numbers in the set of file names and CRC numbers received from host server .","The content stored in memory is then used by the transaction application to generate a user interface through which a customer interacts to purchase an electronic service or good.","Once a customer's selection of a transaction has been completed using the user interface, the transaction device  operates a modem that forms part of the transaction device . The modem, via a telecommunications network to which it is connected, forms a connection with the intermediate router.","Intermediate router has dedicated connections to both a payments host and host server . In this manner, both service- and payment-related transactions can occur within the scope of a single call. The intermediate router firstly attends to the payment-related transaction by forwarding the transaction to the payments host. On successfully transacting payment, the payments host sends an authorisation response back to the intermediate router. The intermediate router forwards the authorisation response to the transaction device .","The intermediate router then forwards the service related transaction to host server  who treats the transaction as a client request. Host server  receives the client request at adaptor ","The adaptor then publishes the request to inbound message bus along with message context information. The message context information indicates any errors that occurred during delivery as well as any other information the adaptor may include. The message context information will often include an identifier the adaptor can use as a correlation key. This is the first correlation key.","The adaptor then awaits a response from the PAE  regarding the request. To receive such a response, adaptor subscribes to outbound message bus for messages published by the PAE  including the first correlation key.","Message receiver  also has a subscription to inbound message bus Its subscription is for all new client requests. Thus, on publication of the request, inbound message bus notifies message receiver  of the existence of the request. The message receiver  then retrieves the request from the inbound message bus ","As the message retrieved from the inbound message bus is unknown to the message receiver , message receiver  initially treats the message as a client request. However, the message receiver  thereafter decodes the message using the relationship associated with adaptor Once decoded, and as mentioned above, the message receiver  operates to determine the type of message by reference to:\n\n","In this example, as message receiver  resolves the message to be a client request, the message is passed to request handler .","Request handler  processes the message to determine the appropriate process model  to use to execute the client request. Once the appropriate process model  has been determined, control is passed to process executor  to execute the process model . Typically, for electronic services a \u2018service master process model\u2019 will be used. Within this services master process model, specific processing will be performed for a particular electronic service by identifying the requested \u2018service ID\u2019 in the client request message. Each service ID will have a process model  associated with it and the service master process model will execute this service specific process model  as a sub-process.","It is at this point that the examples differ.","In this, the first example, process model  includes an asynchronous service request and then a synchronous service request. Processing executes as normal until the asynchronous service request is reached.","In executing the process model , process executor  subscribes to response message bus in order to properly process the asynchronous service request. The subscription is based on a second correlation key.","As the asynchronous service request is to be issued to service provider system , it is necessary for the process executor  to encode the asynchronous service request. Encoding is made in accordance with the relationship associated with adaptor itself associated with service provider system . The encoded asynchronous service request is then published to outbound message bus The encoded asynchronous service request includes the second correlation key.","Processing of the process model , then proceeds as per normal.","Adaptor is also a subscriber to outbound message bus Adaptor subscribes on the basis of the services that it offers (which necessarily need to be incorporated into encoded asynchronous service request message). Accordingly, on publication of the encoded asynchronous service request message, outbound message bus notifies adaptor of the publication of the encoded asynchronous request message. Adaptor then retrieves the encoded asynchronous request message from the outbound message bus ","The encoded asynchronous service request message is then sent to service provider system .","The service provider system  then processes the asynchronous service request message to generate a service response. Service response is then sent by the service provider system  to adaptor Service response includes the second correlation key.","The adaptor then publishes the service response to inbound message bus along with message context information. The message context information indicates any errors that occurred during delivery and\/or transformation. The published form of the service response includes the second correlation key.","On publication of the service response, inbound message bus notifies message receiver  of the existence of the service response. The message receiver  then retrieves the service response from the inbound message bus and decodes the message using the relationship associated with adaptor ","On analysis of the decoded service response, the message receiver  confirms the message to be a service response by virtue of the existence of the second correlation key. The decoded service response is then published to response message bus with its second correlation key.","Process executor  is then informed of the publication of the decoded service response by response message bus and retrieves the decoded service response from the response message bus The decoded service response is then used in further processing of the process model  as may be required.","Processing of the process model  then proceeds until it reaches the synchronous service request.","Again, as the synchronous service request is to be issued to service provider system , it is necessary for the process executor  to encode the synchronous service request. Encoding is made in accordance with the relationship associated with adaptor itself associated with service provider system . The encoded synchronous service request is then published to outbound message bus along with message context information.","At this stage, further processing of the process model  by the PAE  is then halted pending return of a service response by service provider system .","On publication of the encoded synchronous service request message, outbound message bus notifies adaptor of the publication of the encoded synchronous request message. Adaptor then retrieves the encoded synchronous request message from the outbound message bus and its message context information.","The encoded synchronous service request message is then sent to service provider system .","The service provider system  then processes the synchronous service request message to generate a service response. Service response is then sent by the service provider system  to adaptor ","The adaptor then publishes the service response to inbound message bus along with message context information. The message context information indicates any errors that occurred during delivery as well as any other information the adaptor may include.","On publication of the service response, inbound message bus notifies message receiver  of the existence of the service response. The message receiver  then retrieves the service response from the inbound message bus and decodes the message using the relationship associated with adaptor ","The decoded service response message is then treated by the message receiver  as a response to its service request and publishes the decoded service response to response message bus This correlation is made possible by the blocking of further processing of the process model  as described above.","Process executor  is then informed of the publication of decoded service response by response message bus and retrieves the decoded service response from the response message bus. The decoded service response is then used in further processing of the process model .","If, for any reason, it is not possible to process a client request, the client request may be published to retry message bus . Retry receiver  is a subscriber to the retry message bus Operation of the retry receiver  is similar to message receiver . However, retry receiver's  subscription to retry message bus allows for client requests to remain published on the retry message bus for a set period of time before being retrieved.","In this, the second example, process model  operates to issue an electronic good from electronic inventory .","When process model  reaches a request for an electronic good to be issued from electronic inventory , it issues a service request to the electronic inventory . In this manner, for the purposes of dealing with service requests, the electronic inventory  is treated the same as a service provider system  even though it is an internal component of the host server .","Electronic inventory  receives a service request from the PAE  (as initiated by process model ). On receipt of the service request, the electronic inventory  checks the service request for a service ID. The electronic inventory  then checks for an electronic good having the same service ID. Upon identifying a corresponding electronic good having the same service ID, the electronic inventory  operates to issue the electronic good to transaction device .","At this point, processing of both the first and second examples conform. Accordingly, the description hereafter relates to both examples.","Following execution of a process model , a client response message is generated indicating the success or failure of the client request, as appropriate. Accordingly, process executor  subscribes to inbound message bus in order to ensure that the service response is actually received by the transaction device  that issued the service request. The subscription is based on a third correlation key.","The processor executor  thereafter encodes the client response message in accordance with the relationship associated with adaptor The encoded client response is then published to outbound message bus along with all message context information that was received in the client request message. Thus, the encoded client response includes the first correlation key as well as a new third correlation key.","Adaptor is also a subscriber to outbound message bus Adaptor subscribes on the basis of the first correlation key. Accordingly, on publication of the encoded client response message, outbound message bus notifies adaptor of the publication of the encoded client response message. Adaptor then retrieves the encoded client response message from the outbound message bus Adaptor then operates to determine the client request that the encoded client response corresponds with by means of the first correlation key. Thereafter, the encoded client response is sent as a message to the intermediate router.","The intermediate router then forwards the client response message to the transaction device . If the client response message indicates that the client request was unsuccessful, the transaction device  sends a payment reversal request to the payment host via the intermediate router.","In either case, the adaptor operates to send a delivery confirmation message to the PAE . The delivery confirmation message includes the third correlation key. The delivery confirmation message confirms with the PAE  that the response has been delivered to the appropriate transaction device .","The adaptor then publishes the delivery confirmation message to inbound message bus ","On publication of the delivery confirmation message, inbound message bus notifies process executor . Process executor  then retrieves the delivery confirmation message from the inbound message bus ","If no delivery confirmation message is received within a predetermined time period, process executor  treats the delivery as a failure. On failure of a delivery, roll-back commands are processed to reverse the processing performed by the PAE  in executing the process model  to which the failed delivery relates. This may include sending roll-back commands to service provider systems .","From the point of view of a transaction device , this is shown graphically at .","It should be appreciated by the person skilled in the art that the invention is not limited to the examples described. In particular, the following additions and\/or modifications can be made without departing from the scope of the invention:\n\n"],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The invention will now be described with reference to the following drawings, of which:",{"@attributes":{"id":"p-0042","num":"0060"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0043","num":"0061"},"figref":["FIG. 2","FIG. 1"]},{"@attributes":{"id":"p-0044","num":"0062"},"figref":["FIG. 3","FIG. 1"]},{"@attributes":{"id":"p-0045","num":"0063"},"figref":["FIG. 4","FIG. 1"]},{"@attributes":{"id":"p-0046","num":"0064"},"figref":["FIG. 5","FIG. 1"]}]},"DETDESC":[{},{}]}
