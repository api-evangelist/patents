---
title: System and method for transmitting files from a sender to a receiver in a television distribution network
abstract: A system and method for transmitting files from a sender to a receiver in a television distribution system, for example, a cable television distribution network, is provided. The files are transmitted without the need for transmitting a directory over an out of band communications link. In an exemplary embodiment, a filename corresponding to a file to be transmitted is provided to a transform. The transform calculates a PID based on the filename. The calculated PID is incorporated into the MPEG2 data stream carrying the corresponding file contents. When an application program running in the receiver requests a file, the filename of the requested file is provided to a transform operating in the receiver. The transmitter and receiver transforms are identical. The transform provides a corresponding PID at its output. The PID is used to tune a PID filter on the receiver end such that the requested file is selected from the incoming MPEG bit stream for processing by the processor.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09344756&OS=09344756&RS=09344756
owner: COX COMMUNICATIONS, INC.
number: 09344756
owner_city: Atlanta
owner_country: US
publication_date: 20090922
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLIACTIONS","FIELD OF THE INVENTION","DETAILED DESCRIPTION CABLE SYSTEM"],"p":["This patent application is a continuation of U.S. patent Application Ser. No. 10\/805,728, filed Mar. 22, 2004 (U.S. Pat. No. 7,594,254), and entitled \u201cSystem and Method for Transmitting Files from a Sender to a Receiver in a Television Distribution Network\u201d the disclosure of which is incorporated herein, in its entirety, by reference.","The invention relates to electronic information distribution systems. More particularly, the invention relates to television distribution systems and networks including multiplexed bit streams having a system or transport layer and one or more layers of compressed digital video and digital audio data, and more particularly to transport mechanisms for transporting files over said distribution system.","Turning to the drawings and referring first to , there is shown an example of a system generally designated  into which the present invention may be incorporated. In general, the system  transmits signals comprising video, audio, program guide information and other information from a cable head-end  onto a coaxial cable transmission medium . The signals are received at a plurality of subscriber locations -. At least one of the subscriber locations, such as the location at a subscriber end  of system , includes a digital set-top box  or the like equipped to convert the transmitted signals into signals capable of being received by a television set  for displaying video images and\/or outputting audio, and for displaying television program information to a consumer end-user. Of course, the present invention does not require coaxial cable as the physical transmission medium, as signals can alternatively be transmitted over any transmission medium, including wireless means such as so-called \u201cwireless cable\u201d broadcasts, digital satellite communication, and so on.","As shown in , head-end  includes a local server  adapted to communicate with at least one information source . For purposes of this specification, a \u201cserver\u201d is a computer that controls a repository of information files that can be downloaded, transmitted, or manipulated in some manner. The general term server, as used here, includes at least one file storage medium as a repository of information. Suitable file storage media include magnetic and optical disks, magnetic tape, floppy disks, and semiconductor memory including Random Access Memory (RAM), Read Only Memory (ROM) and the like. For purposes of this specification, the term \u201cinformation\u201d means any representation of knowledge or intelligence, e.g., data, computer programs, messages, files, signals and the like, whether analog or digital. Information further includes multimedia representations and media objects, e.g., still images, video objects, audio objects, text, graphics, and the like.","In one embodiment of the invention, information source  provides information such as TV schedule and channel lineups, as well as cable system channel assignments for electronic programming guide (EPG) services. One example of such an information source is Tribune Media Services (TMS). TMS is a media content company that provides syndicated information and entertainment products to print, electronic and on-air media. Other types information sources  include, but are not limited to, movie listings, games, puzzles, lottery information, photos, weather services, advertising, live and archival broadcast of interactive service content including electronic encyclopedias, electronic catalogs, downloadable applications and the like.","In some embodiments of the invention, a regional information server  receives information from media service . Regional information server  then distributes the received information to a plurality of local servers . In other embodiments of the invention, information source  communicates with local server  without the use of regional information server . Information is stored in memory on local server  in files. For purposes of this specification a \u201cfile\u201d is a collection of information that has associated therewith a file identifier, for example, a filename. There are many different types of files, for example, data files, text files, graphics files, video files, program files and the like. File names and their associated indices are typically themselves stored in files known as directory files. In some embodiments of the invention, a filename includes a directory path that identifies the file's location in the directory hierarchy.","In one embodiment of the invention, information source , regional information server  and local server  communicate via the Internet. In an alternative embodiment of the invention, information files are authored on an authoring system (not shown) within cable headend  and stored on local server , without the need for downloading files from regional server  or information source .","The contents of files stored on local guide server  are multiplexed by multiplexer  with program video, audio, and other information to provide a Motion Picture Experts Group 2 (MPEG2) standard data stream. One example procedure for transporting the data stream from the transmitting end to the receiving end of the system, and for thereafter decompressing the bitstream at the receiving end is specified in International Standards Organization (ISO) 13818-1. ISO 13818-1 is the systems, or transport, layer portion of the MPEG 2 standard. This portion of the standard specifies packetization of audio and video elementary packet bitstreams.","The MPEG2 data stream is modulated onto cable transmission medium  by modulator . In one embodiment, modulator  outputs twenty-seven megabits per second (27 Mb\/s) MPEG2 transport streams modulated onto an intermediate frequency (IF) carrier. The MPEG2-encoded transport streams are received by an intermediate frequency to radio frequency (IF\/RF) up converter which modulates the streams onto six megahertz (analog) channels and injects the signals onto the cable transmission medium . With multiplexing of multiple, packetized digital signals per six megahertz analog channel, hundreds of digital channels may be injected onto a single coaxial medium, although at present a mixture of analog and digital channels will likely be transmitted.","DATA CAROUSEL. In one embodiment of the invention, local server  includes a carousel delivery application for delivering a carousel  (illustrated in ) of data files from local file server  to set-top box . Data from files residing on local server  are multiplexed onto at least one channel by multiplexer  to produce a carousel data stream for modulation onto a six megahertz channel of the transmission medium . The term \u201ccarousel\u201d refers to a system in which a data set is repeatedly broadcast so that it may be accessed as required by many receivers. In that manner, files are sequentially relayed in cyclical fashion and thereby made available to set top box . A subscriber  can interact with the set-top box  to selectively display file information from the carousel on the screen of the television set . A variety of conventional carousel techniques exist. One example mechanism for periodically broadcasting the data via the broadcast delivery network is defined in the MPEG-2 DSM-CC specification (ISC\/IEC 13818-6 IS). Other hardware and software mechanisms for providing a data carousel are suitable for use in embodiments of the invention employing a carousel.","FILE SERVER GENERIC DESCRIPTION. In one embodiment of the invention, local server  comprises a rack-mounted personal computer, including an Intel Corporation P6 200 megahertz (or better) central processing unit, 128 megabytes of RAM, a two gigabyte or larger hard disk drive, and an ISDN or better connection to the Internet for communicating with information source  and . Examples of alternative file storage media suitable for use in embodiments of the invention include, but are not limited to, magnetic and optical disks, random access memory (RAM), read only memory (ROM), tapes and the like. Local server  also typically, but not necessarily includes an Ethernet connection to a headend  Local Area Network. One example of an operating system suitable for use on Server  is Windows NT Server 4.0. It is important to note that many alternative computer systems and operating systems, for example Unix and Linux based servers, are commercially available and suitable for use in the invention. Although only one local server  is illustrated in , two or more local servers may be installed in a head-end  for purposes of increased reliability, capacity, or redundancy.","RECEIVER.  is a block diagram of an exemplary receiver  on subscriber end  of system . The exemplary receiver is a set top box , such as, for example, a DCT-2000 (Digital Consumer Terminal) set top box commercially available from Motorola, Inc. of Horsham, Pa. The DCT-2000 is capable of processing multiplexed MPEG data. In other embodiments, other types of processors are used as receivers. For example, in some embodiments, television  includes a cable converter function and other set top box functions without the need for a separate set top unit . In other embodiments, receiver  is a general purpose computer capable of receiving audiovisual files and other data, using such formats as MPEG I, MPEG II, and MPEG 4, for example. Although the receiver  is referred to as a set top box in the discussion of , other embodiments including different types of receivers are suitable for use with the invention.","Although not necessary to the invention, it is significant that with the DCT-2000 set-top box the hardware is unmodified, so that the existing base of publicly distributed set-top boxes may implement the invention without requiring upgrade servicing or replacement. However, to provide enhanced services to subscribers , the operation of the box  is typically modified by additional application software downloaded thereto. In one embodiment, the application software provided to set top box  includes an electronic program guide application program  which communicates with an operating system  of the box  by placing calls through an application programming interface (API) . An electronic program guide (EPG) is an application that provides an on-screen listing of all programming and content that an interactive television service subscriber or digital television viewer has available to them. In some cases an EPG includes visual images relating to the promotion, listing or selection of television programs or services, or other services where more than one service is available.","Other embodiments of the invention include other types of application programs for running in set top box . These include, but are not limited to, game applications, Channel Hyperlinking\u2122 applications, internet information services applications, to name but a few. Channel Hyperlinking\u2122 is a registered trademark of WorldGate Communications, Inc., and is used to designate application programs that allow a user to request and download content from the World Wide Web via set top box . Channel Hyperlinking\u2122 techniques are described in U.S. Pat. Nos. 5,999,970, 5,961,603 and 6,049,539 to Krisbergh and assigned to the assignee of the present invention.","Digital set top box  includes an in-band tuner , along with an appropriate demodulator , for example a 64 quadrature amplitude modulator (QAM) demodulator. Typically, set top box  further includes at least one out-of-band (OOB) tuner (not shown) and appropriate OOB demodulator (not shown). An OOB communications link is implemented by an out of band data multiplexer (not shown) at the transmit end, and is typically used by cable television systems to communicate information service-related data to the cable network. This data includes such information as channel maps and email. It is important to note an OOB communication link is not required to implement the present invention.","A microprocessor  controls the tuning operation of the tuner  and the OOB tuner (not shown) based on commands received from a subscriber via an input device such as a keypad or an infrared remote control device , as described below. To receive commands from a subscriber, the set-top box  includes an infrared sensor  connected to an infrared receiver  that provides the command signaling information to the microprocessor . In one embodiment of the invention, memory system  includes the VRTX operating system  stored therein, and generally comprises a combination of volatile dynamic RAM  and non-volatile RAM (NVRAM) . As those of ordinary skill in the art will readily appreciate, various types and configurations of memory are commercially available and suitable for use in memory system .","In accordance with digital broadcasts wherein digitized channels are multiplexed as data packets onto a six megahertz analog channel, the set-top box  also includes at least three packet identification (PID) filters - to extract the appropriate encoded data packets for a user-selected digital channel. Based on the user-selected display, audio and other requirements, microprocessor  writes an identification value (PID) to each of the PID filters -, whereby the filters - pass only those packets corresponding to the written PID value. As shown in , one of the PID filters, filter , provides the filtered packets to an audio decoder  which decodes the digital audio data while another PID filter  provides filtered packets (for example, MPEG2 encoded packets) to the video decoder .","At least a third PID filter  is provided to extract other data, including data from files stored on file server . A packet processor  handles those packets. The set-top box is also equipped with an on-screen display frame buffer (OSD)  capable of superimposing alphanumeric characters, other symbols and bitmap graphics over a displayed image. To accomplish this superimposition, an overlay  is provided to appropriately combine the video outputs of the video decoder  and the OSD .","GENERAL FUNCTION. The cable box  functions when the user provides an appropriate command to the cable box . For example, in response to a digital channel selection command, the microprocessor , tunes the in-band tuner  to an appropriate analog channel based on the digital channel selected by the subscriber . If a digital channel was selected, a table or the like stored in the memory  determines the analog channel that carries the digital channel's packets, along with the packet identification numbers (PIDs) corresponding to the selected digital channel, for writing into the PID filters  and . Once the PIDs have been written, the audio and video decoders  and  will receive the appropriate packets and decode and output appropriate signals.","\u201cELECTRONIC PROGRAM GUIDES\u201d Advances in technology continue to create a wide variety of services and programs offered to users via television and other video equipment, such as video recorders connected to set top box . Such content is disseminated via cable, satellite, broadcast, and terrestrial systems. Content includes, but is not limited to, traditional broadcast and cable television programs, video services such as pay per view (PPV), near video on demand, promotional channels, game channels, localized or specially formatted information, cable delivered Personal Computer (PC) based content and services, Internet based content and services, and interactive services. Electronic Program Guides (EPGS) provide users with a means for viewing, selecting, interacting with and otherwise controlling available programs, features and services available to them.","RECEIVER\u2014GUIDE DATA. One embodiment of the invention provides a system and method for transporting information files for use in an EPG. In one embodiment of the invention, an EPG is provided on at least one digital channel. In response to a viewer's command to view the EPG, the microprocessor  tunes the in-band tuner  to an appropriate analog channel based on the digital channel associated with the EPG. At least one table or the like stored in the memory  is utilized to determine the radio frequency that carries the selected digital channel's packets. At least one table identifies the PIDs corresponding to the selected channel's audio, video and data. The PIDs are written into the PID filters  (for guide audio, if any) and  (for video, e.g., background video).","To obtain a file from the carousel, a third PID filter  is written with a PID corresponding to the file's filename. Once the data PID has been written to PID filter , packet processor  will receive the appropriate packets and decode and output appropriate data, for example, data for program guide application .","ASSOCIATING PIDS WITH FILENAMES Regardless of the application running in set top box , in order to obtain the contents of a desired file, the PID corresponding to the data stream carrying the desired file in the carousel must be written to PID filter . According to one technique, a PID associated with a desired file is obtained from a cross reference table  or the like stored in the memory . The cross reference table contains directory information that cross references a file identifier, such as a filename, to a corresponding PID that carries the desired file's packets. Typically, such a cross reference table is transmitted from headend  to set top box  on an Out of Band (OOB) communication link. However, in some embodiments of the invention, the cross reference table is transmitted on an in-band channel.","The PID thus obtained from the cross reference table is used for writing into the PID filter . The data passing through the PID filter is provided to application program . This approach has a drawback in that the directory information is transmitted on an OOB communications link. The OOB communications link is relatively slow compared to the data transfer rate of in-band communications link. Due to data rate limitations, the OOB communications link sometimes encounters problems when attempting to transmit a directory containing more than about 60 files within the nominal period allowed between successive transmissions of the directory.","Derived Approach.","TRANSMIT END.  illustrates in more detail, an embodiment of sender system  illustrated in .  illustrates a system and method for associating a filename with a PID, without the need for an OOB communications link. As previously described, local file server  includes at least one storage medium , file manager , and in some embodiments, at least one authoring system . Files comprising scripts are stored on storage medium . Script files are downloaded from an external script source , for example information source  and national server . In some embodiments, files are provided to storage medium  by authoring system . File manager  provides files from storage medium  to the remainder of system  for transport to subscriber set top boxes .","TRANSFORM. File contents , e.g., data, of respective files from storage medium  are provided to packetizer . A file identifier, e.g., filename corresponding to each respective file to be transported is provided to transform . In one embodiment of the invention filenames are provided as American Standard Code for Information Interchange (ASCII) coded bits. As those of ordinary skill in the art will recognize, other types of bit coding techniques exist and are appropriate for use in the present invention to represent filenames. Transform  operates on a filename at its input to provide, at its output a plurality of bits representing a PID . In one embodiment of the invention, PID  comprises 13 bits in accordance with the MPEG2 systems specification. In addition to PID , alternative embodiments of the invention include bits representing a Data Identifier (DID)  and a Multicast Identifier (MCI) . DID  and MCI  are utilized to further distinguish filenames in the event more than one filename is assigned the same PID. Using PID portion  alone, the probability of the same PID being assigned to more than one filename is about 1 in 2in one embodiment of the invention. Using PID portion  together with DID portion  results in a probability of about 1 in 2that the same PID will be assigned to more than one filename. In embodiments wherein all three portions, PID, DID and MCI are utilized, the probability of the same PID being assigned to more than one filename is about 1 in 2(virtually zero). In one embodiment of the invention, for each filename at its input, Transform  provides an MCI comprising 16 bits, a DID comprising 32 bits, and a PID comprising 13 bits. It is to be understood that the terms, DID and MCI are used herein merely for convenience in designating portions of the output of transform . Therefore, many designations for these bit portions could be devised and all such designations remain within the scope of the invention.","Transform  operates such that its output is deterministic for a given filename, that is, the same filename always produces the same transform output. Second, no two filenames are likely to produce the same output as discussed above. In one embodiment of the invention, transform  operates such that relatively small variations in filenames at its input produce relatively wide variations in the corresponding bit patterns at its output. Transform  will be described in more detail below.","DC2 Packets","File manager  provides file contents  to packetizer . Packetizer  portions the contents of the file into at least one data packet. Packetizing allows for compressed video and audio images to be transmitted over high bandwidth channels such as satellite transmission. In embodiments of the invention wherein an MCI and a DID are utilized, Packetizer  inserts the MCI and the DID provided by transform  into at least one data packet along with file contents . In a data carousel embodiment of the invention, packetizer  provides data packets to carousel system . Carousel system  comprises a plurality of individual carousels, one carousel per PID. Packetizer  utilizes the PID output  of transform  to direct the data packets to a corresponding PID carousel of data carousel system . Each PID carousel comprises a plurality of packets corresponding to a file to be transported on that PID. In some embodiments thousands of PIDs comprise a carousel system.","Packetizer  formats files into data packets in accordance with a formatting convention. One example of a packet formatting convention suitable for use in the invention is the Digicipher II (DC2) format. DC2 is a proprietary format of General Instruments Corporation. Other known techniques for encoding\/decoding video images include the Motion Picture Expert Group (MPEG) techniques MPEG1 and MPEG 2. Current encoding\/decoding standards for video telephony include the H.261 and H.263 standards.",{"@attributes":{"id":"p-0040","num":"0039"},"figref":"FIG. 7","b":["700","700","702","706","57","704","710","56","716","712","720","710"]},"Therefore, in embodiments of the invention employing an MCI and a DID, each DC2 Packet comprises an MCI, a DID and at least a portion of the data representing the contents of a given file. In many cases a plurality of DC2 packets will be utilized to convey the contents of a single file. Each of the packets corresponding to a given file is assigned the same PID as determined by transform .","MPEG2 PACKETS. Returning now to , multiplexer  combines inputs provided by carousel system , as well as audio , video , and other  packetized inputs to provide a data stream comprising MPEG2 packets for modulation onto a six megahertz channel of the transmission medium . An example of an MPEG2 packet according to an embodiment of the invention is illustrated in . Each MPEG2 packet  comprises a header portion  and a payload portion . Together, header portion  and payload portion  comprise 188 bytes. Header  is further portioned into fields. Of particular interest in the present invention is PID field . This field comprises the PID corresponding to a file to be transported. Payload portion  comprises at least one DC2 packet. Typically a plurality of MPEG2 packets will comprise a single DC2 packet. However, according to an embodiment of the invention, all DC2 packets corresponding to a given file will be carried by MPEG2 packets having the same PID.","The multiplexed data stream may be transmitted over a variety of links. In one embodiment of the invention, the link is a Cable television plant. Other links suitable for use in the invention include, standard Radio Frequency Links (UHF\/VHF), Digital Broadcast Satellite Links, Standard Terrestrial Communication Links (PDH, SDH), Microwave Line of Sight (LoS) Links (wireless), Digital Subscriber Links (ADSL family), and Packet\/Cell Links (ATM, IP, IPv6, Ethernet) to name but a few.","DETAILED DESCRIPTION OF TRANSFORM. Turning now to , there is shown a functional block diagram of a transform  according to an embodiment of the invention. Transform  comprises a calculating function  and a PID look-up table (PLT) . First, the PLT will be discussed.","PLT  is derived from the Program Specific Information (PSI) for an MPEG2 compliant system.","In order to construct the PLT of the invention, at least one range of PIDs available for transport of files is determined. In an MPEG implementation of the invention PIDS are assigned in accordance with the requirements of the MPEG specification and the requirements of the specific system in which the invention is implemented from the Program Specific Information (PSI). PLT  is constructed by identifying available PIDs, listing the PIDs in a table , and providing an index  into the listing . PLT  is transported from headend to receiver on a private data stream. In accordance with MPEG convention, the PID for the private data stream used to transport PLT  is identified in the Program Map Table.","Calculating function  operates on respective filenames at its input to provide corresponding indices  at its output. Any calculating function having the following constraints is suitable for use in the invention. First, calculating function  provides a substantially unique, and repeatable index for each respective filename. Further, the indices provided by calculating function  have substantially a one to one correspondence to entries on the PLT.","In accordance with one embodiment of the invention, indices are calculated as follows. Respective file identifiers in the form of ASCII strings are provided to a checksum generator (CG) . in one embodiment of the invention, CG  performs a CRC on the respective ASCII strings to provide a corresponding 64 bit checksum for each file In alternative embodiments of the invention, a hash function is utilized to provide the 64 bit checksum. In other embodiments, the function is a pseudorandom number generator is utilized to provide the 64 bit checksum.","A selected 16 bit portion (designated X) of each 64 bit checksum is provided to a modulo divider . In one embodiment of the invention, the 16 MSBs of the 64 bit checksum comprise X. Modulo divider  provides a PID index  at its output for each X at its input. The size of the index  is chosen such that all of the PID entries available for use in PID map table  can be accessed. The number of available PID entries listed on table  is denoted NPIDSON. In one embodiment of the invention, the PLT table has 4096 entries and the index comprises 12 bits. Other embodiments of the invention have alternative sizes in accordance with the requirements of the system in which the invention is implemented. Modulo divider  operates on X to generate PID index  in accordance with the relationship:\n\nPID index=X modulo NPIDSON\u2003\u2003(1)\n","The PID index thus generated provides an index into the PLT.","As discussed above, some embodiments of the invention employ at least a second identifier, in addition to the PID, in the event that two filenames are assigned the same PID. In one embodiment of the invention, a DID and an MCI comprise the remaining 32 and 16 Least Significant Bits (LSBs) respectively of the 64 bit output of CG . The choice of which bits, MSBs or LSBs, are utilized is a matter of convenience and either convention is suitable for use in the invention.","One of many alternative embodiments of a calculating function for providing a PID, DID and MCI is illustrated in . Filename FN is provided to checksum generator (CG ). CG  provides a 64 bit checksum at its output. The 64 bit checksum is portioned into 4 consecutive 16 bit fields. The four 16 bit fields are provided to XOR function  where they are combined in accordance with an exclusive or operation to provide a 16 bit output X to a modulo divider , As described above, modulo divider  operates on X to generate PID index  in accordance with the relationship:\n\nPID index=X modulo NPIDSON\u2003\u2003(1)\n","In similar fashion, two of the 16 bit fields are provided to a second XOR function . The 16 bit output of XOR function  is used as the MCI in embodiments of the invention which employ an MCI to lower the probability of collision.","In some embodiments of the invention, a DID is formed by concatenating, i.e., stringing together, two 16 bit fields of the 64 bit output of CG . The concatenating operation is performed by concatenator . In the embodiment illustrated in , the two least significant 16 bit fields are provided to concatenator . However, the choice of which two 16 bit fields are provided to concatenator is not critical to the invention. Any two 16 bit fields can be utilized. However, the probability of the event that two filenames being assigned the same PID is related to the degree of correlation between the PID, the MCI and the DID. The lower the correlation, the lower the probability of that event. Therefore in embodiments of the invention wherein the lowest correlation is desired, the two 16 bit fields chosen to form the DID are different from the two 16 bit fields chosen as a basis for the MCI.","Substantially identical transforms operate in both the sender and the receiver. Both the sender and the receiver employ substantially identical PLTs. The receiver acquires the PLT when it first tunes to the in data band channel.","Changes at the File Server","The contents of file server  are subject to change. Files events such as file removal, moving in the directory structure and file updates, to name a few, can occur. In many cases, these changes are relevant to at least one application program  running in receiver . In one embodiment of the invention, receiver , and application program  is periodically notified of these types of events. In one embodiment of the invention, notification of file events is provided to receiver  via an MPEG2 private data channel. The PID for the private data channel is provided in the PMT. Headend  constructs and delivers events and partial directories (referred to as \u201cdirectory markers\u201d) as they change, eliminating the need for the file manager  to maintain and permanently store them, and providing real-time synchronization of events and markers with the files to be transported. The available CRC information is also fed back to the server , which uses the information for creating standard and alternate markers containing subsets of the directory information.","The exemplary golden PID carries two bitmaps and the starting PID number. The first bitmap is the PID allocation bitmap which indicates which PIDs are used in the PID calculation.","The second bitmap is the PID usage bitmap (described above), which indicates which PIDs are currently in use. This is a subset of the allocated PIDs. The PID usage bitmap is a standard bitmap shipped with the least significant bit first, i.e., bit  of byte  corresponds to the first PID in the map.","\u201cFile not Found\u201d and Collision Conditions","A receiver calculates the CRC and PID for a desired file, writes the PID to a PID filter, and waits for MPEG2 data packets assigned to that PID. If the desired data packets arrive within a predetermined period of time, then the file is received. If the predetermined period of time passes, and the receiver has not received the desired unit of data, a \u201cfile-not-found\u201d condition exists in which the desired data are considered unavailable. In other embodiments, such as the examples described below, additional features are provided to more rapidly identify a file-not-found condition, to reduce the amount of time it takes the receiver to detect a file not found condition.","Reference is again made to . The file manager  includes a directory mapper (described below with reference to ) associated with the representative number; the directory mapper generates and transmits to the set top apparatus  a partial directory (e.g., marker  shown in ) identifying each of the at least one file that has respective directory information that transforms to that same PID.","In some embodiments, to detect a file-not-found (FNF) condition with a reduced latency, a combination of strategies is used. Directory \u201cmarkers\u201d (as shown in Tables 1 and 2, below) are spun periodically on each PID that carries data, as described in greater detail with reference to . The standard markers contain the 64-bit DID number of each file being spun on the PID over which the marker is sent. In these embodiments, the markers provide PID specific directory information. If the settop  sees one of these markers before it sees the file it is attempting to load, it reads the marker to determine whether the file actually exists. The marker spin rate is determined empirically by balancing bandwidth consumption against the desired FNF detection time.",{"@attributes":{"id":"p-0064","num":"0063"},"figref":["FIGS. 4 and 5","FIG. 4"]},"At step , the main loop of steps - is repeated for each PID to be used.","At step , an inner loop including steps - is repeated for each unit of data (e.g., file) to be transmitted by the sender.","At step , the sender performs the transform by generating a number with an approximately uniform probability distribution, as a function of a bit sequence (e.g., file name) associated with a unit of data (e.g., packet, file) to be transmitted. The term \u201cfunction\u201d implies that a given bit sequence only produces one value, in a reproducible manner. If the same bit sequence is input to the transform function three times, the same output is generated three times. In the exemplary embodiments, the generated number is the 64 bit binary number (DID) described above. The 64-bit length is selected to provide an extremely small likelihood that two different file names will yield the same calculated number. Some embodiments use smaller number lengths to provide any desired probability that two file names will not yield the same number. Other embodiments use larger number lengths to provide any desired probability that two file names will not yield the same number.","At step , the 64-bit DID is divided into four 16-bit segments (A, B, C and D), corresponding to the most significant 16 bits, the second most significant 16 bits, the third most significant 16 bits and the 16 least significant bits.","At step , the payload ID (PIF) is determined by concatenating the 32 most significant bits of the 64-bit DID.","At step , a first portion of the DID is used to calculate the PID. In some embodiments, the PID index in the allocation map is determined by the following equation:\n\nPID index=X modulo NPIDSON,\n","where PID is the MPEG program ID; X is a result of performing at least one XOR operation on at least two portions of the DID (e.g., cyclic redundancy code, hash function, pseudorandom number); and NPIDSON is a number of packet processors to which payload files are being sent.","In the exemplary embodiment, all four portions A, B, C and D of the 64-bit DID are XOR'ed together to form X. NPIDSON is any predetermined number (e.g., 2000 PIDs) that does not exceed the available number of PIDs (e.g., 8192) for the type of receivers being connected to the sender. The PID offset equals the value output by the PID allocation map table given the PID index. Once the PID index is determined, a number of on-bits in the PID allocation map are counted, and the PID offset corresponding to the number of counted PIDs provides the assigned PID number. That is, the PID index is an input to a table lookup that outputs the PID offset. The STARTPID value is then added to the PID offset, where STARTPID is a constant value (corresponding to the first PID being used in the PID usage bitmap).","At step , a second portion of the number is used as a multicast identifier. In some embodiments, the multicast identifier is formed by performing an XOR operation on two non-contiguous portions of the PIF. In the exemplary embodiment, the multicast identifier is a 16-bit number determined by XORing portions A and C of the 64-bit DID.","To allow the receiver to initially recognize a desired unit of data (e.g., packet or file) based on the multicast identifier, it is desirable for the system to assign a unique multicast identifier to each unit of data. However, because there is multiple units of data transmitted with the same PID, and there are only 65,536 possible 16-bit multicast ID's, it is possible for two files with two different bit sequences (e.g., two different file names) to have the same multicast ID. Thus, in this embodiment, a multicast collision detection and correction feature is provided.","At step , a determination is made whether the same multicast ID calculated at step  has already been assigned to a previous unit of data with a different bit sequence (e.g., file name). This condition is referred to herein as a multicast collision condition.","At step , if the sender has detected a collision condition, the sender generates a non-colliding multicast identifier for the second file (packet). In some embodiments, this is accomplished by, for example, adding a constant value to the multicast identifier calculated in step , for which the collision condition is detected. The non-colliding multicast address has the same length as the standard multicast address calculated in step , for example, 16 bits.","At step , in some embodiments, the sender periodically transmits (spins) a standard marker packetor message that includes a list of all of the 64-bit DIDs for the sets of at least one packet (e.g., packets, files, messages) to be sent using the given PID on which that marker is sent. In other embodiments, a file is sent instead of a marker. The marker is a partial directory that only covers the units of data spun on a single PID. A marker is spun on each P!D carrying broadband data. In some embodiments, the marker spins at the rate of once every 5-10 seconds. Higher spin rates are possible, but consume more bandwidth. In the exemplary embodiment, the standard marker is a packet, as opposed to a file, and the calculation of PIFDID and PID does not apply to the marker. Instead, a predetermined PID is used to send the markers.","Table 1 shows an example of the contents of a standard marker. In Table 1, each cell brepresents the jportion of the 64-bit DID at row i, of a standard marker containing n entries, corresponding to n sets of at least one packet. Each row of the marker contains four segments A, B, C and D, and corresponds to a single set of at least one packet. Concatenating the four entries bto bin any row forms the full 64-bit calculated DID for one of the sets of at least one packet. Note that in an actual marker, there is no demarcation between the four portions of each 64-bit DID; the cells are only shown as broken into 16-bit chunks for ease of explanation.",{"@attributes":{"id":"p-0079","num":"0078"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"56pt","align":"left"}}],"thead":{"row":[{"entry":"TABLE 1"},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["bto b","bto b","bto b","bto b"]},{"entry":["bto b","bto b","bto b","bto b"]},{"entry":["bto b","bto b","bto b","bto b"]},{"entry":[".",".",".","."]},{"entry":[".",".",".","."]},{"entry":[".",".",".","."]},{"entry":["bto b","bto b","bto b","bto b"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]}}}}},"In some embodiments, the standard marker for each PID is sent using that PID. Thus, the directory information is sent inband, instead of using the OOB channel. For example, if each PID corresponds to a channel, the marker for a given PID is sent on the channel to which that PID corresponds. Similarly, in embodiments having a PID processor for each PID, each respective PID processor is sent the marker file for units of data to be sent to that PID processor. In other embodiments, the standard markers are all sent on the OOB channel. In these embodiments, each marker includes a means by which the receiver is able to identify the PID to which that particular marker pertains (because the OOB channel contains markers corresponding to multiple PIDs on the inband channel).","For a relatively large multicast address (e.g., 16-bits) and relatively large number of PIDs (e.g., 2000) relative to the number of units of data (e.g., 35,000), there is a low probability of two different sets of at least one packet having the same multicast ID. In other words, in the vast majority of cases, for any given PID, any two units of data having the same multicast ID have a high probability of corresponding to the same set of at least one packet. Thus, packet recognition by a recipient is generally achieved more rapidly by comparing the calculated multicast ID to the multicast ID of a received unit of data. That is, packets having a different multicast address from that of the desired file is quickly eliminated from consideration without examining the PIF (32 MSBs of the 64-bit DID) contained in the packet. The PIF is only examined if the desired multicast address is found. However, in preferred embodiments, a multicast collision detection and correction mechanism is desired to positively identify when a multicast collision exists, and eliminate the condition.","At step , a determination is made whether a multicast collision exists. If there is no multicast collision, then step  is skipped, and step  is executed next.","At step , in some embodiments, the sender periodically transmits (spins) an alternate marker packet if the sender detects a multicast collision. The alternate marker includes a list of the multicast identifier and the 64-bit DID for each of the sets of at least one packet (e.g., packets, files, messages) to be sent using a given PID. In some embodiments, a message is sent instead of an alternate marker. In other embodiments, a file is sent instead of an alternate marker. Table 2 shows an example of the contents of the alternate marker. In Table 2, each row of the alternate marker corresponds to a single set of at least one packet. The last cell in each row includes the standard multicast address calculated at step  (or the non-colliding multicast address if step  was executed). Each remaining cell in each row represents the set of 16 bits at row i of an alternate marker containing n entries, corresponding to n sets of at least one packet.",{"@attributes":{"id":"p-0084","num":"0083"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"5"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"5","colwidth":"21pt","align":"left"}}],"thead":{"row":[{"entry":"TABLE 2"},{"entry":{"@attributes":{"namest":"1","nameend":"5","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["bto b","bto b","bto b","bto b","MC"]},{"entry":["bto b","bto b","bto b","bto b","MC"]},{"entry":["bto b","bto b","bto b","bto b","MC"]},{"entry":[".",".",".",".","."]},{"entry":[".",".",".",".","."]},{"entry":[".",".",".",".","."]},{"entry":["bto b","bto b","bto b","bto b","MC"]},{"entry":{"@attributes":{"namest":"1","nameend":"5","align":"center","rowsep":"1"}}}]}}}}},"Using the alternate marker of Table 2, a receiver that receives a file having the desired multicast address, but the wrong 32-bit PIF checks the alternate marker and determines the non-colliding multicast address corresponding to the DID. Then the receiver waits for a unit of data (e.g., file) having the non-colliding multicast address, in some embodiments, the alternate marker for each PID is sent inband using that PID. For example, where each PID corresponds to a channel, the alternate marker for a PID is sent over the channel corresponding to that PID. Similarly, in embodiments having a PID processor for each PID, each respective PID processor is sent the marker file for units of data to be sent to that PID processor. In other embodiments, the alternate markers are sent over the OOB channel, and each alternate marker contains a means by which the receiver identifies to which PID that marker corresponds.","The PID allocation map is a bit map having a bit for each PID number capable of being allocated. The bits corresponding to allocated PIDs are set to a first value indicating allocation, and the remaining bits are set to a second value indicating that those PIDs are not-allocated. The PID allocation map is run-length encoded (RLE), with the high bit of each byte indicating the run type (\u20181\u2019 equals \u2018allocated\u2019), terminated by a zero byte. In practice, the user determines how many PIDs to allocate, and the system selects which PID numbers are allocated to PIDs. A PID usage bitmap indicates which PIDs are currently in use. This is a subset of the allocated PIDs. Any allocated PID for which data are currently being spun has its respective bit set in the PID usage bitmap.","At step , the sender periodically transmits a PID usage map. (Although  shows the PID usage map being spun after the standard and alternate markers, the markers are spun on each PID after the PID usage map is spun.) The PID usage map identifies which PIDs are being used to transmit data. For example, in an exemplary system wherein 13 bits are used to specify the PID, and about 2000 PIDs are actually used, about one fourth of the 8192 available PIDs are used. The PID usage map identifies which of the PIDs are used. In some embodiments, the PID usage map is a packet (PID usage bitmap) having one bit for each PID, with the value of each bit indicating whether that PID is being used. In some embodiments, the PID usage map is sent using a separate PID that is shared by all of the receivers referred to herein as the \u201cgolden PID.\u201d In some embodiments, the PID usage map is sent in a message instead of an alternate marker. In other embodiments, the PID usage map is sent in a file instead of a marker.","At step , the sender transmits the units of data using the appropriate PIDs. Each unit of data contains the appropriate PIF in its payload and multicast identifier in its header. If a non-colliding multicast ID was generated for a given unit of data, then that unit of data is transmitted using the non-colliding multicast identifier.","In some embodiments, the alternate marker is sent less frequently than the standard marker. The periods for the standard and alternate marker determine the delay that is incurred before a file-not-found condition is recognized in the case of an unavailable file for which the calculated PID is in use. That is, once the PID associated with a desired unit of data is determined to be in use (based on the PID usage map), a file-not-found condition is not detected until: the standard marker is received (in the absence of a multicast collision) or the alternate marker is received (when there is a multicast collision), or the receiver times out without receiving a marker or the desired file. Because the FNF condition is determined based on either the standard or alternate marker contents, a high spin rate is not needed for the alternate maker to maintain a low FNF latency.",{"@attributes":{"id":"p-0090","num":"0089"},"figref":"FIG. 5"},"At step , the receiver (e.g., a set top box) selects a set of at least one unit of data (e.g., packet, file) to receive.","At step , the receiver calculates a DID, PIF, PID and a multicast ID from the bit sequence (e.g., file name) associated with the desired unit of data, using the same calculation that is used by the sender (as described above with reference to ). Mapping of the 64-bit DID to a PID is done using a PID usage map and a modulus (PID index). The settop uses the PID usage map acquired when it first tunes to the inband channel. The PID usage map provides the settop with a starting PID number (which is the first PID in the PID usage map), followed by a Run-Length-Encoded (RLE) bitmap whose \u201con\u201d bits indicate a PID in use. The modulus is performed on the number of \u201con\u201d bits in the map. Once the PID index is determined, a number of on-bits in the PID allocation map are counted, and the PID offset corresponds to the number of counted PIDs. Then the PID number is computed by adding the start PID to the actual PID offset of the \u201con\u201d bit within the map.","At step , the receiver checks the PID usage map to determine whether the calculated PID is being used. At step , if the calculated PID is not being used, the receiver immediately knows that the desired unit of data is not available, and at step , a file-not-found condition is detected.","If the PID usage map indicates that the PID calculated in step  is being used, then execution continues, but a final determination has not yet been made by the receiver whether the desired unit of data is available (because more than one file is transmitted using the same PID).","At step , the receiver waits to receive either the desired unit of data or a marker, whichever arrives first.","At step , if the standard marker is received, then at step , the receiver determines whether the received marker includes the calculated 64-bit DID (from step ) for the desired unit of data. That is, the 32 MSBs of each 64-bit DID in the marker is compared to the 32 bits of the PIF. If no 64-bit DID containing MSBs matching the PIF is included in the standard marker, then at step , a file-not-found condition is detected.","If the standard marker does contain a 64-bit DID (from step ) having a portion that matches the PIF, then step  is executed.","At step , the receiver waits until a unit of data with the standard multicast address (from step ) is received. If a packet is received that has a different multicast address from that of the desired packet, the received packet is discarded, without checking the 32-bit PIF of the packet. In some embodiments, the 32 bit PIF is interrogated by hardware. In other embodiments, the PIF is interrogated by software program functions executed in a processor. When a unit of data having the desired standard multicast address is received, then at step , the 32-bit PIF transmitted with the received unit of data is compared to the 32 MSBs of the 64-bit DID calculated in step . If the received PIF matches the calculated 32-bits, then at step , the desired unit of data is \u201cfound.\u201d","If, however, the PIF contained in the received unit of data does not match the 32 MSBs of the calculated 64-bit DID in the standard marker, then a multicast collision is detected, and steps - are performed.","At step , the receiver waits to receive the alternate marker (or if the alternate marker has already been received, then the receiver examines the alternate marker).","At step , the alternate marker is checked, to determine whether the DID corresponding to the desired unit of data is listed in the alternate marker, If that DID is not listed in the alternate marker, then at step , a file-not-found condition is detected.","If the DID corresponding to the desired unit of data is listed in the alternate marker, then at step , the receiver reads the non-colliding multicast ID from the alternate marker.","At step , the receiver waits for the unit of data with the non-colliding multicast ID.","At step , when the packet having the non-colliding multicast ID is received, then the desired unit of data is found.","Variations of the method of  are contemplated. For example, in some embodiments, instead of using the 32-bit PIF to make the final comparison, the full 64-bit DID calculated by the server is included in each packet, and the receiver compares the full 64-bit DID of the received packet to the number contained in the marker. This provides an additional 16 bits that are independent of the multicast ID (as well as 16 bits that overlap with those used to form the multicast ID), for a total of 64 bits of entropy. The process flow is similar to that described above, except that at steps  and , the comparison is made to the 64-bit DID, instead of using the 32-bit PIF. In other embodiments, the PIF is composed of a different portion of the 64-bit DID than described above. In one example, the multicast address is formed by XORing segments A and C of the 64-bit DID, and the PIF is formed by concatenating segments B and D.","Overhead associated with the exemplary system described above is estimated as follows: Each file piece will increase by 10 bytes (6 additional bytes for the ID and 4 for the file length). A directory marker consuming one MPEG packet (188 bytes) every 10 seconds on every PID results in 700 packets per second in a 7000 PID map (Maximum packet rate is 17952\/second). One DC2 packet will suffice for the PID map, which is cached. An event consumes 10 bytes in raw data; so about 16 events comprise a single MPEG packet. This works out to 5-6% of the bandwidth consumed by an exemplary file manager .","Given a file name, the exemplary \u201cinband directory\u201d system is able to provide fast lookups for existing files, as well as reasonably fast detection of nonexistent files. It provides timely notification of changes to files (version changes) in a way that is easily monitored by the set top . Synchronization between the directory (standard and alternate markers) and the files it represents are implicit. Minimal inband and settop resources are consumed. Inband bandwidth consumption is low, and settop CPU loading and memory usage is kept to a minimum. Lookup latency is optimized for speed, and the latency associated with lookup failure (files not found) is reasonably short. Large numbers of files are supported. Although 10,000 to 30,000 is considered nominal, the system is used to spin a larger number of files.",{"@attributes":{"id":"p-0108","num":"0107"},"figref":"FIG. 6","b":["600","250","250"]},"Although the exemplary embodiment places the standard and alternate markers on the individual PIDS , ,  (reference numerals ,  and , respectively) that carry payload data, other embodiments are contemplated in which an additional inband PID is allocated for sending and receiving the markers.","Although the exemplary embodiments use DC2 and MPEG formatted packets, in other embodiments, calculated directory type information is used with other packet formats. Although MPEG Program IDs are discussed above, in other embodiments including non-MPEG systems, calculated sub-channel assignments are used.","In the examples described above, the bit sequence used for the DID calculation is a file name. Bit sequences include, but are not limited to, alphanumeric strings. The DID serves as the basis for determining the PID, PIF and multicast address. In other embodiments, other unique strings and bit sequences besides file names are used. Also, in some embodiments, a bit sequence is used that is unique to a class of recipients. In other embodiments, a bit sequence is used that is unique to a class of files\/packets. In other embodiments, other alternative keys uniquely associated with data and known to both the server and the receiver are used by the sender and receiver to generate the DID.","In other embodiments, the multicast identifier is not used. A field is added to a directory marker indicating the actual PID on which the unit of data is sent. In the event that two or more units of data have bit sequences that yield the same PID, the sender selects a non-conflicting PID, if an unused PID is available. The server minimizes the number of PIDs carrying multiple units of data. When a unit of data is assigned to a non-conflicting PID that is different from the PID determined by the calculation described above, the non-conflicting PID is listed in the directory marker.","The directory marker is sent in band. The 64-bit DID is calculated by sender and receiver, the PID is calculated by the sender as described above, and the PIF is calculated and included in the packet. For example, in some embodiments, the PIF is the 32 MSBs of the DID. The directory marker includes the DID and PID. If the receiver receives a unit of data having the PIF calculated by the receiver for the desired unit of data, then the receiver recognizes the received unit of data as being the desired unit of data. If the receiver listens for the calculated PID and receives a unit of data that does not have the desired PIF, the receiver waits for and examines the directory marker. When the receiver receives the directory marker, the receiver looks for the PIF of the desired unit of data. If the desired PIF is not listed, a file-not-found condition is detected. If the desired PIF is found, the receiver listens to the \u201calternate PID\u201d associated with the desired unit of data, as indicated in the directory marker, until the desired unit of data is received.","Many variations are contemplated. For example, in some embodiments the head end system cyclically broadcasts on at least one digital broadband channel a software control signal corresponding to at least one video information provider. In some embodiments, the software control signal includes data for identifying audio\/video program information of the at least one video information provider to a digital entertainment terminal receiving the digital broadband channels and executable code for controlling the digital entertainment terminal.","The exemplary embodiments of present invention are embodied in the form of computer-implemented processes and apparatus for practicing those processes. Other embodiments are in the form of computer program code embodied in tangible media, such as random access memory (RAM), floppy diskettes, read only memories (ROMs), CD-ROMs, DVD-ROMs, hard drives, high density (e.g., \u201cZIP\u2122\u201d or \u201cJAZZ\u2122\u201d) removable disks, or any other computer-readable storage medium, wherein, when the computer program code is loaded into and executed by a computer, the computer becomes an apparatus for practicing the invention. Other embodiments are in the form of computer program code, for example, whether stored in a storage medium, loaded into and\/or executed by a computer, or transmitted over some transmission medium, such as over the electrical wiring or cabling, through fiber optics, or via electromagnetic radiation, wherein, when the computer program code is loaded into and executed by a computer, the computer becomes an apparatus for practicing the invention. When implemented on a general-purpose processor, the computer program code segments configure the processor to create specific logic circuits.","Although some embodiments use software to perform the functions described above, other embodiments include application specific integrated circuits to perform these functions.","Although the invention has been described in terms of exemplary embodiments, it is not limited thereto. Rather, the appended claims should be construed broadly, to include other variants and embodiments of the invention, which are recognized by those skilled in the art without departing from the scope and range of equivalents of the invention."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0004","num":"0003"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0005","num":"0004"},"figref":["FIG. 2","FIG. 1"]},{"@attributes":{"id":"p-0006","num":"0005"},"figref":["FIG. 3","FIG. 1"]},{"@attributes":{"id":"p-0007","num":"0006"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0008","num":"0007"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 7"}]},"DETDESC":[{},{}]}
