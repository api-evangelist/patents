---
title: Intermediate networking devices
abstract: A wireless communication device comprising: one or more network modems enabling the wireless communication device to communicate over a first wireless network; one or more network modems enabling the wireless communication device to communicate with two or more end-point devices over a second wireless network; one or more processors configured to execute one or more instructions; and memory coupled to the one or more processors and configured to provide the one or more processors with the one or more instructions. The one or more instructions, when executed by the processors, cause processors to: establish a first connection between the wireless communication device and a first end-point device; establish a second connection between the wireless communication device and a second end-point device; apply a first control to traffic transmitted by or to the first end-point device; and apply a second control to traffic transmitted by or to the second end-point device.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09351193&OS=09351193&RS=09351193
owner: Headwater Partners I LLC
number: 09351193
owner_city: Tyler
owner_country: US
publication_date: 20131205
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS REFERENCE TO OTHER APPLICATIONS","BACKGROUND","DETAILED DESCRIPTION"],"p":["This application is a continuation-in-part of and incorporates by reference for all purposes the following non-provisional applications: U.S. application Ser. No. 12\/380,780, filed Mar. 2, 2009, entitled AUTOMATED DEVICE PROVISIONING AND ACTIVATION; U.S. application Ser. No. 13\/565,720, filed Aug. 2, 2012, entitled DEVICE ASSISTED CDR CREATION, AGGREGATION, MEDIATION AND BILLING; U.S. application Ser. No. 13\/588,965, filed Aug. 17, 2012, entitled ADAPTIVE AMBIENT SERVICES; U.S. application Ser. No. 13\/737,748, filed Jan. 9, 2013, entitled SECURITY TECHNIQUES FOR DEVICE ASSISTED SERVICES; U.S. application Ser. No. 13\/656,620, filed Oct. 19, 2012, entitled DEVICE GROUP PARTITIONS AND SETTLEMENT PLATFORM; U.S. application Ser. No. 13\/674,808, filed Nov. 12, 2012, entitled DEVICE ASSISTED SERVICES INSTALL; U.S. application Ser. No. 13\/718,917, filed Dec. 18, 2012, entitled QUALITY OF SERVICE FOR DEVICE ASSISTED SERVICES; U.S. application Ser. No. 13\/718,936, filed Dec. 18, 2012, entitled ENHANCED ROAMING SERVICES AND CONVERGED CARRIER NETWORKS WITH DEVICE ASSISTED SERVICES AND A PROXY; U.S. application Ser. No. 14\/082,040, filed Nov. 15, 2013, entitled DEVICE-ASSISTED SERVICES FOR PROTECTING NETWORK CAPACITY; U.S. application Ser. No. 13\/253,013, filed Oct. 4, 2011, entitled SYSTEM AND METHOD FOR PROVIDING USER NOTIFICATIONS; U.S. application Ser. No. 13\/239,321, filed Sep. 21, 2011, entitled SERVICE OFFER SET PUBLISHING TO DEVICE AGENT WITH ON-DEVICE SERVICE SELECTION; U.S. application Ser. No. 13\/247,998, filed Sep. 28, 2011, entitled SECURE DEVICE DATA RECORDS; U.S. application Ser. No. 13\/309,556, filed Dec. 1, 2011, entitled END USER DEVICE THAT SECURES AN ASSOCIATION OF APPLICATION TO SERVICE POLICY WITH AN APPLICATION CERTIFICATE CHECK; U.S. application Ser. No. 13\/309,463, filed Dec. 1, 2011, entitled SECURITY, FRAUD DETECTION, AND FRAUD MITIGATION IN DEVICE-ASSISTED SERVICES SYSTEMS; and U.S. application Ser. No. 13\/134,005, filed May 25, 2011, entitled SYSTEM AND METHOD FOR WIRELESS NETWORK OFFLOADING.","This application claims the benefit of: U.S. Provisional Application No. 61\/734,288, filed Dec. 6, 2012, entitled INTERMEDIATE NETWORKING DEVICE SERVICES; U.S. Provisional Application No. 61\/756,332, filed Jan. 24, 2013, entitled MOBILE HOTSPOT; and U.S. Provisional Application No. 61\/758,964, filed Jan. 30, 2013, entitled MOBILE HOTSPOT.","This application incorporates by reference for all purposes the following non-provisional U.S. patent applications: U.S. application Ser. No. 12\/380,780, filed Mar. 2, 2009, entitled AUTOMATED DEVICE PROVISIONING AND ACTIVATION; U.S. application Ser. No. 12\/695,019, filed Jan. 27, 2010, entitled DEVICE ASSISTED CDR CREATION, AGGREGATION, MEDIATION AND BILLING, now U.S. Pat. No. 8,275,830 (issued Sep. 25, 2012); U.S. application Ser. No. 12\/695,020, filed Jan. 27, 2010, entitled ADAPTIVE AMBIENT SERVICES, now U.S. Pat. No. 8,406,748 (issued Mar. 26, 2013); U.S. application Ser. No. 12\/694,445, filed Jan. 27, 2010, entitled SECURITY TECHNIQUES FOR DEVICE ASSISTED SERVICES, now U.S. Pat. No. 8,391,834 (issued Mar. 5, 2013); U.S. application Ser. No. 12\/694,451, filed Jan. 27, 2010, entitled DEVICE GROUP PARTITIONS AND SETTLEMENT PLATFORM, now U.S. Pat. No. 8,548,428 (issued Oct. 1, 2013); U.S. application Ser. No. 12\/694,455, filed Jan. 27, 2010, entitled DEVICE ASSISTED SERVICES INSTALL, now U.S. Pat. No. 8,402,111 (issued Mar. 19, 2013); U.S. application Ser. No. 12\/695,021, filed Jan. 27, 2010, entitled QUALITY OF SERVICE FOR DEVICE ASSISTED SERVICES, now U.S. Pat. No. 8,346,225 (issued Jan. 1, 2013); U.S. application Ser. No. 12\/695,980, filed Jan. 28, 2010, entitled ENHANCED ROAMING SERVICES AND CONVERGED CARRIER NETWORKS WITH DEVICE ASSISTED SERVICES AND A PROXY, now U.S. Pat. No. 8,340,634 (issued Dec. 25, 2012); U.S. application Ser. No. 13\/134,028, filed May 25, 2011, entitled DEVICE-ASSISTED SERVICES FOR PROTECTING NETWORK CAPACITY, now U.S. Pat. No. 8,589,541 (issued Nov. 19, 2013); U.S. application Ser. No. 13\/229,580, filed Sep. 9, 2011, entitled WIRELESS NETWORK SERVICE INTERFACES; U.S. application Ser. No. 13\/237,827, filed Sep. 20, 2011, entitled ADAPTING NETWORK POLICIES BASED ON DEVICE SERVICE PROCESSOR CONFIGURATION; U.S. application Ser. No. 13\/253,013, filed Oct. 4, 2011, entitled SYSTEM AND METHOD FOR PROVIDING USER NOTIFICATIONS; U.S. application Ser. No. 13\/239,321, filed Sep. 21, 2011, entitled SERVICE OFFER SET PUBLISHING TO DEVICE AGENT WITH ON-DEVICE SERVICE SELECTION; U.S. application Ser. No. 13\/248,028, filed Sep. 28, 2011, entitled ENTERPRISE ACCESS CONTROL AND ACCOUNTING ALLOCATION FOR ACCESS NETWORKS; U.S. application Ser. No. 13\/247,998, filed Sep. 28, 2011, entitled SECURE DEVICE DATA RECORDS; U.S. application Ser. No. 13\/309,556, filed Dec. 1, 2011, entitled END USER DEVICE THAT SECURES AN ASSOCIATION OF APPLICATION TO SERVICE POLICY WITH AN APPLICATION CERTIFICATE CHECK; U.S. application Ser. No. 13\/309,463, filed Dec. 1, 2011, entitled SECURITY, FRAUD DETECTION, AND FRAUD MITIGATION IN DEVICE-ASSISTED SERVICES SYSTEMS; U.S. application Ser. No. 13\/248,025, filed Sep. 28, 2011, entitled SERVICE DESIGN CENTER FOR DEVICE ASSISTED SERVICES; and U.S. application Ser. No. 13\/374,959, filed Jan. 24, 2012, entitled FLOW TAGGING FOR SERVICE POLICY IMPLEMENTATION; U.S. application Ser. No. 13\/441,821, filed Apr. 6, 2012, entitled MANAGING SERVICE USER DISCOVERY AND SERVICE LAUNCH OBJECT PLACEMENT ON A DEVICE; U.S. application Ser. No. 13\/134,005, filed May 25, 2011, entitled SYSTEM AND METHOD FOR WIRELESS NETWORK OFFLOADING; U.S. application Ser. No. 13\/802,483, filed Mar. 13, 2013, entitled MOBILE DEVICE ACTIVATION VIA DYNAMICALLY SELECTED ACCESS NETWORK; U.S. application Ser. No. 13\/748,152, filed Jan. 23, 2013, entitled SERVICE PLAN DESIGN, USER INTERFACES, APPLICATION PROGRAMMING INTERFACES, AND DEVICE MANAGEMENT; U.S. application Ser. No. 13\/842,172, filed Mar. 15, 2013, entitled NETWORK SERVICE PLAN DESIGN; U.S. application Ser. No. 13\/947,099, filed Jul. 21, 2013, entitled VIRTUALIZED POLICY & CHARGING SYSTEM; and U.S. application Ser. No. 14\/083,324, filed Nov. 18, 2013, entitled SERVICE PROCESSOR CONFIGURATIONS FOR ENHANCING OR AUGMENTING SYSTEM SOFTWARE OF A MOBILE COMMUNICATIONS DEVICE.","This application incorporates by reference for all purposes the following provisional patent applications: U.S. Provisional Application No. 61\/206,354, filed Jan. 28, 2009, entitled SERVICES POLICY COMMUNICATION SYSTEM AND METHOD; U.S. Provisional Application No. 61\/206,944, filed Feb. 4, 2009, entitled SERVICES POLICY COMMUNICATION SYSTEM AND METHOD; U.S. Provisional Application No. 61\/207,393, filed Feb. 10, 2009, entitled SERVICES POLICY COMMUNICATION SYSTEM AND METHOD; and U.S. Provisional Application No. 61\/207,739, entitled SERVICES POLICY COMMUNICATION SYSTEM AND METHOD, filed Feb. 13, 2009; U.S. Provisional Application No. 61\/270,353, filed on Jul. 6, 2009, entitled DEVICE ASSISTED CDR CREATION, AGGREGATION, MEDIATION AND BILLING; U.S. Provisional Application No. 61\/275,208, filed Aug. 25, 2009, entitled ADAPTIVE AMBIENT SERVICES; and U.S. Provisional Application No. 61\/237,753, filed Aug. 28, 2009, entitled ADAPTIVE AMBIENT SERVICES; U.S. Provisional Application No. 61\/252,151, filed Oct. 15, 2009, entitled SECURITY TECHNIQUES FOR DEVICE ASSISTED SERVICES; U.S. Provisional Application No. 61\/252,153, filed Oct. 15, 2009, entitled DEVICE GROUP PARTITIONS AND SETTLEMENT PLATFORM; U.S. Provisional Application No. 61\/264,120, filed Nov. 24, 2009, entitled DEVICE ASSISTED SERVICES INSTALL; U.S. Provisional Application No. 61\/264,126, filed Nov. 24, 2009, entitled DEVICE ASSISTED SERVICES ACTIVITY MAP; U.S. Provisional Application No. 61\/348,022, filed May 25, 2010, entitled DEVICE ASSISTED SERVICES FOR PROTECTING NETWORK CAPACITY; U.S. Provisional Application No. 61\/381,159, filed Sep. 9, 2010, entitled DEVICE ASSISTED SERVICES FOR PROTECTING NETWORK CAPACITY; U.S. Provisional Application No. 61\/381,162, filed Sep. 9, 2010, entitled SERVICE CONTROLLER INTERFACES AND WORKFLOWS; U.S. Provisional Application No. 61\/384,456, filed Sep. 20, 2010, entitled SECURING SERVICE PROCESSOR WITH SPONSORED SIMS; U.S. Provisional Application No. 61\/389,547, filed Oct. 4, 2010, entitled USER NOTIFICATIONS FOR DEVICE ASSISTED SERVICES; U.S. Provisional Application No. 61\/385,020, filed Sep. 21, 2010, entitled SERVICE USAGE RECONCILIATION SYSTEM OVERVIEW; U.S. Provisional Application No. 61\/387,243, filed Sep. 28, 2010, entitled ENTERPRISE AND CONSUMER BILLING ALLOCATION FOR WIRELESS COMMUNICATION DEVICE SERVICE USAGE ACTIVITIES; U.S. Provisional Application No. 61\/387,247, filed Sep. 28, entitled SECURED DEVICE DATA RECORDS, 2010; U.S. Provisional Application No. 61\/407,358, filed Oct. 27, 2010, entitled SERVICE CONTROLLER AND SERVICE PROCESSOR ARCHITECTURE; U.S. Provisional Application No. 61\/418,507, filed Dec. 1, 2010, entitled APPLICATION SERVICE PROVIDER INTERFACE SYSTEM; U.S. Provisional Application No. 61\/418,509, filed Dec. 1, 2010, entitled SERVICE USAGE REPORTING RECONCILIATION AND FRAUD DETECTION FOR DEVICE ASSISTED SERVICES; U.S. Provisional Application No. 61\/420,727, filed Dec. 7, 2010, entitled SECURE DEVICE DATA RECORDS; U.S. Provisional Application No. 61\/422,565, filed Dec. 13, 2010, entitled SERVICE DESIGN CENTER FOR DEVICE ASSISTED SERVICES; U.S. Provisional Application No. 61\/422,572, filed Dec. 13, 2010, entitled SYSTEM INTERFACES AND WORKFLOWS FOR DEVICE ASSISTED SERVICES; U.S. Provisional Application No. 61\/422,574, filed Dec. 13, 2010, entitled SECURITY AND FRAUD DETECTION FOR DEVICE ASSISTED SERVICES; U.S. Provisional Application No. 61\/435,564, filed Jan. 24, 2011, entitled FRAMEWORK FOR DEVICE ASSISTED SERVICES; U.S. Provisional Application No. 61\/472,606, filed Apr. 6, 2011, entitled MANAGING SERVICE USER DISCOVERY AND SERVICE LAUNCH OBJECT PLACEMENT ON A DEVICE; U.S. Provisional Application No. 61\/550,906, filed Oct. 24, 2011, entitled SECURITY FOR DEVICE-ASSISTED SERVICES; U.S. Provisional Application No. 61\/589,830, filed Jan. 23, 2012, entitled METHODS AND APPARATUS TO PRESENT INFORMATION ABOUT VOICE, MESSAGING, AND DATA SERVICES ON WIRELESS MOBILE DEVICES; U.S. Provisional Application No. 61\/610,876, filed Mar. 14, 2012, entitled METHODS AND APPARATUS FOR APPLICATION PROMOTION AND SPONSORSHIP; U.S. Provisional Application No. 61\/610,910, filed Mar. 14, 2012, entitled WIFI ACTIVATION BACKUP PROCESS; U.S. Provisional Application No. 61\/658,339, filed Jun. 11, 2012, entitled MULTI-DEVICE MASTER SERVICES ACCOUNTS, SERVICE PLAN SHARING AND ASSIGNMENTS, AND DEVICE MANAGEMENT FROM A MASTER DEVICE; U.S. Provisional Application No. 61\/667,927, filed Jul. 3, 2012, entitled FLEXIBLE MULTI-DEVICE MASTER SERVICE ACCOUNTS, SERVICE PLAN SHARING AND ASSIGNMENTS, AND DEVICE MANAGEMENT; U.S. Provisional Application No. 61\/674,331, filed Jul. 21, 2012, entitled SERVICE CONTROLLER FOR MANAGING CLOUD-BASED POLICY; U.S. Provisional Application No. 61\/724,267, filed Nov. 8, 2012, entitled FLEXIBLE SERVICE PLAN DESIGN, USER INTERFACE AND DEVICE MANAGEMENT; U.S. Provisional Application No. 61\/724,837, filed Nov. 9, 2012, entitled SERVICE PLAN DISCOVERY, CUSTOMIZATION, AND MANAGEMENT; U.S. Provisional Application No. 61\/724,974, filed Nov. 10, 2012, entitled SERVICE PLAN DISCOVERY, CUSTOMIZATION, AND MANAGEMENT; U.S. Provisional Application No. 61\/732,249, filed Nov. 30, 2012, entitled APPLICATION PROGRAMMING INTERFACES FOR SMART SERVICES; U.S. Provisional Application No. 61\/734,288, filed Dec. 6, 2012, entitled INTERMEDIATE NETWORKING DEVICE SERVICES; and U.S. Provisional Application No. 61\/745,548, filed Dec. 22, 2012, entitled SERVICE PLAN DESIGN, USER INTERFACES, APPLICATION PROGRAMMING INTERFACES, AND DEVICE MANAGEMENT; U.S. Provisional Application No. 61\/756,332, filed Jan. 24, 2013, entitled MOBILE HOTSPOT; U.S. Provisional Application No. 61\/758,964, filed Jan. 30, 2013, entitled MOBILE HOTSPOT; U.S. Provisional Application No. 61\/765,978, filed Feb. 18, 2013, entitled ENHANCED CURFEW AND PROTECTION ASSOCIATED WITH A DEVICE GROUP; U.S. Provisional Application No. 61\/785,988, filed Mar. 14, 2013, entitled AUTOMATED CREDENTIAL PORTING FOR MOBILE DEVICES; U.S. Provisional Application No. 61\/794,116, filed Mar. 15, 2013, entitled ENHANCED INTERMEDIATE NETWORKING DEVICE; U.S. Provisional Application No. 61\/792,765, filed Mar. 15, 2013, entitled DEVICE GROUP AND SERVICE PLAN MANAGEMENT; U.S. Provisional Application No. 61\/793,894, filed Mar. 15, 2013, entitled SIMPLIFIED POLICY DESIGN, MANAGEMENT, AND IMPLEMENTATION; U.S. Provisional Application No. 61\/799,710, filed Mar. 15, 2013, entitled AMBIENT OR SPONSORED SERVICES; U.S. Provisional Application No. 61\/801,074, filed Mar. 15, 2013, entitled DEVICE GROUP AND SERVICE PLAN MANAGEMENT; and U.S. Provisional Application No. 61\/822,850, filed May 13, 2013, entitled MOBILE DEVICE AND SERVICE MANAGEMENT.","With the advent of mass market digital communications and content distribution, many access networks such as wireless networks, cable networks and DSL (Digital Subscriber Line) networks are pressed for user capacity, with, for example, EVDO (Evolution-Data Optimized), HSPA (High Speed Packet Access), LTE (Long Term Evolution), WiMAX (Worldwide Interoperability for Microwave Access), and Wi-Fi (Wireless Fidelity) wireless networks increasingly becoming user capacity constrained. Although wireless network capacity will increase with new higher capacity wireless radio access technologies, such as MIMO (Multiple-Input Multiple-Output), and with more frequency spectrum being deployed in the future, these capacity gains are likely to be less than what is required to meet growing digital networking demand.","Similarly, although wire line access networks, such as cable and DSL, can have higher average capacity per user, wire line user service consumption habits are trending toward very high bandwidth applications that can quickly consume the available capacity and degrade overall network service experience. Because some components of service provider costs go up with increasing bandwidth, this trend will also negatively impact service provider profits.","The invention can be implemented in numerous ways, including as a process; an apparatus; a system; a composition of matter; a computer program product embodied on a non-transitory computer-readable storage medium; and\/or a processor, such as a processor configured to execute instructions stored on and\/or provided by a memory coupled to the processor. In this specification, these implementations, or any other form that the invention may take, may be referred to as techniques. In general, the order of the steps of disclosed processes may be altered within the scope of the invention. Unless stated otherwise, a component such as a processor or a memory described as being configured to perform a task may be implemented as a general component that is temporarily configured to perform the task at a given time or a specific component that is manufactured to perform the task. As used herein, the term \u201cprocessor\u201d refers to one or more devices, circuits, and\/or processing cores configured to process data, such as computer program instructions.","A detailed description of one or more embodiments of the invention is provided below along with accompanying figures that illustrate the principles of the invention. The invention is described in connection with such embodiments, but the invention is not limited to any embodiment. The scope of the invention is limited only by the claims and the invention encompasses numerous alternatives, modifications and equivalents. Numerous specific details are set forth in the following description in order to provide a thorough understanding of the invention. These details are provided for the purpose of example and the invention may be practiced according to the claims without some or all of these specific details. For the purpose of clarity, technical material that is known in the technical fields related to the invention has not been described in detail so that the invention is not unnecessarily obscured.","With the development and increasing proliferation of mass-market digital communications and content distribution, communication network capacity gains are being outpaced by growing digital networking demand. For example, some industry experts project average wireless device usage of four devices per subscriber, with a mixture of general purpose devices like smart phones and computers along with special purpose devices like music players, electronic readers, connected (e.g., networked) cameras and connected gaming devices. In addition, wire line user service consumption habits are trending toward very high bandwidth applications that can quickly consume the available capacity and degrade overall network service experience if not efficiently managed. Because some components of service provider costs go up with increasing bandwidth, this trend will also negatively impact service provider profits.","There is a need for a communication system and method that provides for flexible service plans and management of user network services to provide consumer choice of more refined service plan offerings and efficient management of network capacity.","Also, it is becoming increasingly important to more deeply manage the level of services delivered to networked devices to provide cost-effective services that match growing digital networking usage patterns. For example, access providers can move away from only billing for basic access and move toward billing for higher level service delivery with example services including rich Internet access and email, application-based billing, content distribution, entertainment activities, information or content subscription or gaming. In addition, a growing number of new special purpose and general purpose networked devices are fueling demand for new service plans, for example, tailored to the new device usage models (e.g., a special service plan for an e-book reader device).","As network capabilities grow and new networked device offerings grow, access network service providers will realize increasing value in opening up their networks to allow innovation and expanded offerings for network service consumers. However, opening up the networks to provide efficient third-party definition of alternative service and billing models requires more flexible service and billing policy management solutions. For example, machine to machine applications such as telemetry, surveillance, shipment tracking and two way power control systems are example new applications that would require new offerings to make such available to network service customers. The need to customize service offerings for these new applications requires more efficient methods for defining, testing and launching new services with more refined control of service functions and service costs. In some embodiments, this means billing for different types of service elements, such as total traffic, content downloads, application usage, information or content subscription services, people or asset tracking services, real time machine-to-machine information or electronic commerce transactions.","In some embodiments, network user capacity is increased and user service costs are reduced by managing and billing for service consumption in a more refined manner (e.g., to satisfy network neutrality requirements). By managing service consumption in a user friendly manner, the overall service capacity required to satisfy the user device needs can be tailored more closely to the needs of a given user thereby reducing user service costs and increasing service provider profits. For example, managing service usage while maintaining user satisfaction includes service usage policy implementation and policy management to identify, manage and bill for service usage categories, such as total traffic consumption, content downloads, application usage, information or content subscription services, electronic commerce transactions, people or asset tracking services or machine to machine networking services.","As described herein, service activity is used to refer to any service usage or traffic usage that can be associated with, for example, an application; a network communication end point, such as an address, uniform resource locator (URL) or other identifier with which the device is communicating; a traffic content type; a transaction where content or other material, information or goods are transacted, purchased, reserved, ordered or exchanged; a download, upload or file transfer; email, text, SMS, IP multimedia system (IMS), or other messaging activity or usage; VOIP services; video services; a device usage event that generates a billing event; service usage associated with a bill by account activity (also referred to as billing by account) as described herein; device location; device service usage patterns, device user interface (UI) discovery patterns, content usage patterns or other characterizations of device usage; or other categories of user or device activity that can be identified, monitored, recorded, reported, controlled or processed in accordance with a set of verifiable service control policies. As will be apparent to one of ordinary skill in the art in view of the embodiments described herein, some embodiments identify various service activities for the purpose of decomposing overall service usage into finer sub-categories of activities that can be verifiably monitored, categorized, cataloged, reported, controlled, monetized and used for end user notification in a manner that results in superior optimization of the service capabilities for various levels of service cost or for various types of devices or groups. In some embodiments, it will be apparent to one of ordinary skill in the art that the terms service activity or service usage are associated with categorizing and possibly monitoring or controlling data traffic, application usage, communication with certain network end points, or transactions, and it will also be apparent that in some embodiments the term service activity is intended to include one or more of the broader aspects listed above. The shortened term service usage can be used interchangeably with service activity, but neither term is intended in general to exclude any aspect of the other. In some cases, where the terms service usage or service activity are used, more specific descriptors such as traffic usage, application usage, website usage, and other service usage examples are also used to provide more specific examples or focus in on a particular element of the more encompassing terms.","In some embodiments, employing this level of service categorization and control is accomplished in a manner that satisfies user preferences. In some embodiments, employing this level of service categorization and control is accomplished in a manner that also satisfies government rules or regulations regarding open access, for example, network neutrality requirements. In some embodiments, service management solutions that also collect and\/or report user or device service usage or service activity behavior to determine how best to meet the user's simultaneous desires for service quality and lower service costs are disclosed. For example, such monitoring and reporting are accomplished in a manner that includes approval by the user and in a manner that also protects the privacy of user information and service usage behavior or service activity history.","In some embodiments, a system and method is disclosed for increasing network user capacity for wireless networks in the face of increasing service demand per user by providing for a greater number of base stations, also sometimes referred to as access points, base terminals, terminal nodes or other well known acronyms, to be more easily and\/or more cost effectively deployed. For example, to simplify the process of deploying base stations, the installation complexity and the network infrastructure required for the base station to obtain backhaul service to the various networks that users desire to connect with are reduced.","In some embodiments, dense base station deployments are simplified by reducing the requirement to aggregate or concentrate the base station traffic through a specific dedicated core network infrastructure, so that the base stations connect to the desired user networks through a more diverse set of local loop, back bone and core routing options. This approach also reduces network infrastructure equipment, installation and maintenance costs. In some embodiments, this is accomplished by distributing the network traffic policy implementation and control away from the core network by providing for more control for service policy implementation and management on the end user device and, in some embodiments, in the end user device with respect to certain service policies and the network (e.g., control plane servers) with respect to other service policies. For example, this approach facilitates connecting the base stations directly to the local loop Internet with a minimum of specific dedicated networking infrastructure.","In some embodiments, service and transaction billing event capture and logging are distributed to the device. For example, providing service and transaction billing event capture and logging at the device provides a greater capability to monitor, classify and control deeper aspects of service usage or service activity at the device as compared to the relatively less capability for the same in the network infrastructure (e.g., for certain traffic flows, such as encrypted traffic flows). Furthermore, billing at the device provides for very specialized with many different billing and service plans for different device and service usage or service activity scenario combinations without the problem of attempting to propagate and manage many different deep packet inspection (DPI) and traffic shaping profiles in the networking equipment infrastructure. For example, service billing at the device can provide for more sophisticated, more specialized and more scalable billing and service plans.","Another form of billing that needs improvement is electronic commerce transaction billing with device-assisted central billing. Today, most central billing and content distribution models require either centralized content distribution maintained by the central service provider or central billing authority, or a centralized ecommerce website or portal traffic aggregation system controlled by the central service provider or central billing provider, or both. In such systems, content and transaction providers such as media providers, application developers, entertainment providers, transaction website providers and others must adapt their mainstream electronic offering and commerce systems, such as shopping experience websites, to fit within the various proprietary customized infrastructure and content storage solutions for ecommerce markets, such as BREW\u00ae (Binary Runtime Environment for Wireless from Qualcomm\u00ae Inc.), Symbian OS (from Symbian Software Ltd) and Apple iPhone 3G App Store (from Apple Inc.). This approach requires a large amount of unnecessary custom interface development and stifles open market creativity for HTTP, WAP or portal\/widget based shopping destinations and experiences. As disclosed below, a superior approach includes device-based transaction billing for an open ecosystem in which a central billing provider provides users and ecommerce transaction providers with a central billing solution and experience that does not require extensive custom development or ecommerce infrastructure interfacing.","In some embodiments, products that incorporate device-assisted service policy implementation, network services and service profiles (e.g., a service profile includes a set of one or more service policy settings for the device for a service on the network) are disclosed, as described below. For example, aspects of the service policy (e.g., a set of policies\/policy settings for the device for network services, typically referring to lower level settings, such as access control settings, traffic control settings, billing system settings, user notification settings, user privacy settings, user preference settings, authentication settings and admission control settings) that are moved out of the core network and into the end user device include, for example, certain lower level service policy implementations, service usage or service activity monitoring and reporting including, for example, privacy filtering, customer resource management monitoring and reporting including, for example, privacy filtering, adaptive service policy control, service network access control services, service network authentication services, service network admission control services, service billing, transaction billing, simplified service activation and sign up, user service usage or service activity notification and service preference feedback and other service capabilities.","As discussed below, product designs that move certain aspects of one or more of these service profile or service policy implementation elements into the device provide several advantageous solutions to the needs described above. For example, benefits of certain embodiments include the ability to manage or bill for a richer and more varied set of network services, better manage overall network capacity, better manage end user access costs, simplify user or new device service activation, simplify development and deployment of new devices with new service plans (e.g., service profile and billing\/costs information associated with that service profile), equip central service providers with more effective open access networks for new third-party solutions, simplify the equipment and processes necessary to deploy wireless base stations and simplify the core networking equipment required to deploy certain access networks.","As discussed below, there are two network types that are discussed: a central provider network and a service provider network. The central provider network generally refers to the access network required to connect the device to other networks. The central provider network generally includes the physical layer, the Media Access Control (MAC) and the various networking functions that can be implemented to perform authentication, authorization and access control, and to route traffic to a network that connects to the control plane servers, as discussed below. The service provider network generally refers to the network that includes the control plane servers. In some embodiments, a central provider network and a service provider network are the same, and in some embodiments, they are different. In some embodiments, the owner or manager of the central provider network and the owner or manager of the service provider network are the same, and in some embodiments, they are different.","In some embodiments, control of the device service policies is accomplished with a set of service control plane servers that reside in the access network or any network that can be reached by the device. This server-based control plane architecture provides for a highly efficient means of enabling third-party control of services and billing, such as for central carrier open development programs or Mobile Virtual Network Operator (MVNO) relationships. As device processing and memory capacity expands, moving to this distributed service policy processing architecture also becomes more efficient and economical. In some embodiments, several aspects of user privacy and desired network neutrality are provided by enabling user control of certain aspects of device-based service usage or service activity reporting, traffic reporting, service policy control and customer resource management (CRM) reporting.","In many access networks, such as wireless access networks, bandwidth capacity is a valuable resource in the face of the increasing popularity of devices, applications and content types that consume more bandwidth. To maintain reasonable service profit margins, a typical present service provider practice is to charge enough per user for access to make service plans profitable for the higher bandwidth users. However, this is not an optimal situation for users who desire to pay less for lower bandwidth service usage or service activity scenarios.","Accordingly, in some embodiments, a range of service plan pricing can be enabled that also maintains service profitability for the service provider, for example, by providing a more refined set of management and control capabilities for service profiles. For example, this approach generally leads to service management or traffic shaping where certain aspects of a service are controlled down based on service policies to lower levels of quality of service. Generally, there are three problems that arise when these techniques are implemented. The first problem is maintaining user privacy preferences in the reporting of service usage or service activity required to set, manage, or verify service policy implementation. This problem is solved in a variety of ways by the embodiments described below with a combination of user notification, preference feedback and approval for the level of traffic information the user is comfortable or approves and the ability to filter service usage or service activity, in some embodiments, specifically traffic usage or CRM reports so that only the level of information the user prefers to share is communicated. The second problem is satisfying network neutrality requirements in the way that traffic is shaped or services are managed. This problem is solved in a variety of ways as described in the embodiments described below by empowering the user to make the choices on how service usage, service activity, traffic usage, or CRM data is managed down to control costs, including embodiments on user notification and service policy preference feedback. By allowing the user to decide how they want to spend and manage their service allowance or resources, a more neutral or completely neutral approach to network usage can be maintained by the service provider. The third problem is to help the user have an acceptable and enjoyable service experience for the lower cost plans that will result in much wider scale adoption of connected devices and applications but are more constrained on service activity usage or options or bandwidth or traffic usage. As lower cost service plans are offered, including plans where the basic connection service may be free, these service plans will require service provider cost controls to maintain profitability or preserve network capacity that result in lower limits on service usage or service activity. These lower service usage or service activity limit plans will result in more users who are likely run over service usage limits and either experience service shutdown or service cost overages unless they are provided with more capable means for assistance on how to use and control usage for the lower cost services. This problem is solved in a variety of ways with a rich collection of embodiments on user notification, service usage and cost projection, user notification policy feedback, user service policy preference feedback, and adaptive traffic shaping or service policy implementation. As described herein, some embodiments allow a wide range of flexible and verifiable service plan and service profile implementations ranging from examples such as free ambient services that are perhaps sponsored by transaction revenues and\/or bill by account sponsored service partner revenues, to intermediately priced plans for basic access services for mass market user devices or machine to machine communication devices, to more expensive plans with very high levels of service usage or service activity limits or no limits at all. Several bill by account embodiments also provide for the cataloging of service usage that is not a direct benefit to end users but is needed for basic maintenance of the device control channels and access network connection, so that the maintenance traffic service cost can be removed from the user billing or billed to non-user accounts used to track or account for such service costs. These embodiments and others result in a service usage or service activity control capability that provides more attractive device and service alternatives to end users while maintaining profitability for service providers and their partners.","In some embodiments, the above-described various embodiments for device-based service policy and\/or service profile communications control are implemented using network-based service control, for example, for satisfying various network neutrality and\/or privacy requirements, based on indication(s) received from the device (e.g., user input provided using the device UI using the service processor) and network-based service control (e.g., using a DPI service monitor or DPC policy implementation and\/or other network elements).","In some embodiments, a virtual network overlay includes a device service processor, a network service controller and a control plane communication link to manage various aspects of device-based network service policy implementation. In some embodiments, the virtual network overlay networking solution is applied to an existing hierarchical network (e.g., for wireless services), and in some embodiments, is applied to simplify or flatten the network architecture as will be further described below. In some embodiments, the large majority of the complex data path network processing required to implement the richer service management objectives of existing hierarchical networks (e.g., for wireless services) are moved into the device, leaving less data path processing required in the edge network and in some cases even less in the core network. Because the control plane traffic between the service control servers and the device agents that implement service policies can be several orders of magnitude slower than the data plane traffic, service control server network placement and back-haul infrastructure is much less performance sensitive than the data plane network. In some embodiments, as described further below, this architecture can be overlaid onto all the important existing access network architectures used today. In some embodiments, this architecture can be employed to greatly simplify core access network routing and data plane traffic forwarding and management. For example, in the case of wireless networks, the incorporation of device-assisted service policy implementation architectures can result in base stations that directly connect to the Internet local loop, and the data traffic does not need to be concentrated into a dedicated core network. This results, for example, in a large reduction in backhaul cost, core network cost and maintenance cost. These cost savings can be re-deployed to purchase and install more base stations with smaller cells, which results in higher data capacity for the access network leading to better user experience, more useful applications and lower service costs. This flattened networking architecture also results in latency reduction as fewer routes are needed to move traffic through the Internet. In some embodiments, the present invention provides the necessary teaching to enable this powerful transformation of centralized network service architectures to a more distributed device-based service architectures.","Device-based billing can be compromised, hacked and\/or spoofed in many different ways. Merely determining that billing reports are being received from the device, that the device agent software is present and properly configured (e.g., the billing agent is present and properly configured) is insufficient and easily spoofed (e.g., by spoofing the agent itself, providing spoofed billing reports using a spoofed billing agent or providing spoofed agent configurations). Accordingly, in some embodiments, verifiable device-assisted and\/or network-based service policy implementation is provided. For example, verifiable service usage and\/or service usage billing can be provided as described herein with respect to various embodiments.","While much of the below discussion and embodiments described below focus on paid service networks, those of ordinary skill in the art will appreciate that many of the embodiments also apply to other networks, such as enterprise networks. For example, the same device-assisted network services that create access control services, ambient activation services and other service profiles can be used by corporate IT managers to create a controlled cost service policy network for corporate mobile devices. As another example, embodiments described below for providing end user service control can also allow a service provider to offer parental controls by providing parents with access to a website with a web page that controls the policy settings for the access control networking service for a child's device.","Network Architecture for Device Assisted\/Based Service Control",{"@attributes":{"id":"p-0148","num":"0147"},"figref":["FIG. 1","FIG. 1"],"b":["125","120","124","125","124","100","115","125","121","126","132","125","125","125"]},"As shown, the central provider access network is both 3G and 4G capable, the devices  can be either 3G, 4G or multi-mode 3G and 4G. Those of ordinary skill in the art will also appreciate that in the more general case, the network could be 2G, 3G and 4G capable, or the device could be 2G, 3G and 4G capable with all or a subset of Global System for Mobile (GSM), General Packet Radio Service (GPRS), Code Division Multiple Access (CDMA) 1\u00d7, High Speed Packet Access (HSPA), Evolution Data Optimized (EVDO), Long Term Evolution (LTE) and WiMAX modem capability. If the devices are single mode, then the 3G devices  will be activated with a service profile applied to service processor  that is consistent with the 3G network capacity and speed, and the 4G devices will be activated with service profiles applied to service processor  that are consistent with 4G network capacity and speed. In both cases, the same service controller  manages services for both sets of devices in accordance with some embodiments. If the devices are multimode, then the service processor  can be activated with a dual mode service profile capability in which the service profile for 3G offers a similar rich set of services as the service profile for 4G but with, for example, scaled back bandwidth. For example, this approach is allows central providers to offer a richer set of service offerings with 3G and then migrate the same set of service offerings to 4G but with higher performance. In particular, this approach allows 3G to 4G rich service migration to occur, for example, with the only change being the increased bandwidth settings in the service profiles that will be available in 4G at the same cost as 3G with lower service profile bandwidth settings.","In some embodiments, if the devices are multimode, a network selection policy implementation within service processor  is provided, or in some embodiments, a network selection policy is driven by policy decisions made in service controller  based on service availability reports received from service processor . The network selection policy allows the selection of the network that corresponds to the most desirable service profile to meet the user's service preferences. For example, if the user specifies, within the framework of the service notification and user preference feedback embodiments described below, that maximum performance is the most important factor in selecting which access network to connect to, then the best profile is likely to be the 4G network as 4G is typically faster, except perhaps, for example, if the device  is closer to the 3G base station so that there is a much stronger signal or if the 4G network is much more heavily loaded than the 3G network. On the other hand, if the user preference set specifies cost as the most important factor, then depending on the central provider service costs the 3G network may prove to be the most desirable service profile. This is a simple example and many other selection criteria are possible in the network selection embodiment as discussed further below.","In some embodiments, a service controller (e.g., a network device based service control element\/function) facilitates coordination for and\/or provisions wireless access\/radio access bearers (e.g., RABs) on a device (e.g., a communications device, such as a mobile wireless communications device and\/or an intermediate networking device), on network, and\/or on device plus network. In some embodiments, the service controller provides device capacity demand reports to other network equipment\/elements\/functions, and then also provisions the RAB channel based on various criteria and determinations.","Network-Based Service Usage Monitoring for Verification and Other Purposes","In some embodiments, if the base station data plane traffic is transmitted via the Internet  as discussed above, then IPDRs (Internet Protocol Detail Records, also sometimes and interchangeably referred to herein as Charging Data Records or CDRs, which as used herein refer to any network measure of service usage or service activity for voice and\/or data traffic (e.g., IPDRs can include a time stamp, a device ID, and various levels of network measures of service usage for the device associated with that device ID, such as perhaps total traffic usage, network destination, time of day or device location)) are generated by and collected from the access network equipment. Depending on the specific network configuration, as discussed herein, for a WWAN network the IPDRs can be generated by one or more of the following: base station , RAN or transport gateways and AAA . In some access network embodiments, the IPDRs are transmitted to equipment functions that aggregate the IPDRs for the purpose of service billing and other functions. Aggregation can occur in the AAA, the transport gateways or other functions including the billing system . As discussed below, it is often the case that the IPDRs are assumed to be obtained from the AAA server  and\/or a service usage data store  (e.g., a real-time service usage collection stored in a database or a delayed feed service usage collection stored in a database), or some other network function. However, this does not imply that the IPDRs may not be obtained from a variety of other network functions, and in some embodiments, the IPDRs are obtained from other network functions as disclosed herein. In some embodiments, existing IPDR sources are utilized to obtain network-based service usage measures for multiple purposes including but not limited to service policy or profile implementation verification, triggering service verification error responds actions, and service notification synchronization. Certain types of IPDRs can be based on, or based in part on, what are sometimes referred to as CDRs (Charging Data Records, which can track charges for voice and data usage) or modifications of CDRs. Although the capability to monitor, categorize, catalog, report and control service usage or service activity is in general higher on the device than it is in the network, and, as described herein, device-based service monitoring or control assistance is in some ways desirable as compared to network-based implementations, as described herein many embodiments take advantage of network-based service monitoring or control to augment device-assisted service monitoring or control and vice versa. For example, even though many embodiments work very well with minimal IPDR service usage or service activity information that is already available in a network, deeper levels of IPDR packet inspection information in general enable deeper levels of service monitoring or service control verification, which can be desirable in some embodiments. As another example, deeper levels of network capability to control service usage or service activity can provide for more sophisticated error handling in some embodiments, for example, providing for more options of the Switched Port Analyzer (SPAN) and network quarantine embodiments as described herein. As another example, in some embodiments it is advantageous to take advantage of network-based service monitoring or control for those service aspects the network is capable of supporting, while using device-assisted service monitoring or control for the service aspects advantageously implemented on the device.","A charging data record (CDR) is a term that as used herein defines a formatted measure of device service usage information, typically generated by one or more network functions that supervise, monitor, and\/or control network access for the device. CDRs typically form the basis for recording device network service usage, and often form the basis for billing for such usage. Various embodiments are provided herein for device-assisted CDR creation, mediation, and billing. There are many limitations to the capabilities of service usage recording, aggregation and\/or billing when CDRs are generated exclusively by network-based functions or equipment. Accordingly, by either augmenting network-based service usage measures with device-based service usage measures, or by replacing network-based service usage measures with device-based service usage measures, it is possible to create a CDR generation, aggregation, mediation and\/or billing solution that has superior or more desirable capabilities\/features. While in theory, many of the service usage measures that can be evaluated on a device can also be evaluated in the network data path using various network equipment technologies including but not limited to deep packet inspection (DPI), there are many examples where measuring service usage at the device is either more desirable or more practical, or in some cases it is the only way to obtain the desired measure. Such examples include but are not limited to the following: application layer service usage measures (e.g., traffic usage categorized by application or by combinations of application, destination, and\/or content type); usage measures that do not involve user traffic but instead involve network overhead traffic (e.g., basic connection maintenance traffic, signaling traffic, network logon\/AAA\/authentication\/monitoring traffic, service software update traffic); usage that is associated with services that are charged to another entity other than the end user (e.g., basic network connection service offer traffic, traffic associated with providing network access to or downloading service marketing information, traffic associated with advertiser sponsored services, traffic associated with content provider sponsored services, 911 service traffic); usage measures involving encrypted traffic (e.g., traffic that is run over encrypted networking protocols or between secure end points); implementing service usage measure collection and\/or service usage billing across multiple networks that may have different and in some cases incompatible, inaccessible (to the CDR system of record) or incomplete service usage measurement capabilities; service usage measurement and\/or service usage billing capabilities that are not supported by the present network gateways, routers, MWC\/HLRs, AAA, CDR aggregation, CDR mediation, billing and\/or provisioning systems; new service usage measures and\/or new service usage billing capabilities that are desirable to implement in a manner that does not require major changes or upgrades to the existing network gateways, routers, MWC\/HLRs, AAA, CDR aggregation, CDR mediation, billing and\/or provisioning systems; new service usage measures and\/or new service usage billing capabilities that are desirable to implement in a manner that allows for rapid definition and implementation of new service measures and\/or billing plans; new service usage measures and\/or new service usage billing capabilities that are desirable to implement in a manner that may be implemented in a manner that enables multiple device group definitions in which each device group gets a customized programmable definition for service usage collection, accounting and\/or billing; multi-device billing; multi-user billing; intermediate device billing with single user and multi user with and without multi device; content downloads from a specific source to a specific application with the content being of a specific type or even identified down to a particular content ID; and\/or various other single event transactions used for billing purposes. For these and other reasons, it is desirable to provide a system\/process that utilizes device-assisted service usage measures that provides either an enhancement of existing network-based service usage CDR system capabilities and techniques and\/or a replacement for network-based CDR system capabilities and techniques.","In some embodiments, service usage information includes network-based service usage information. In some embodiments, the network-based service usage information includes network-based CDRs. In some embodiments, service usage information includes device-based service usage information. In some embodiments, device-based service usage information includes device assisted CDRs, also referred to herein as micro-CDRs, as described herein. In some embodiments, micro-CDRs are used for CDR mediation or reconciliation that provides for service usage accounting on any device activity that is desired (e.g., providing granular service usage information, such as based on application layer service usage monitoring, transaction service usage monitoring, QoS activities\/sessions\/transactions, and\/or other types of service usage information). In some embodiments, each device includes a service processor (e.g., a service processor executed on a processor of a communications device, such as a mobile device or an intermediate networking device that can communicate with a wireless network).","In some embodiments, techniques, such as a system and\/or process, that utilize device-assisted service usage measures include one or more of the following: (1) receiving a service usage measure from a device in communication with a wireless network, (2) verifying or protecting the validity of the service usage measure, (3) generating a CDR based on the service usage measure (e.g., device-assisted CDR), (4) aggregating CDRs, and (5) mediating the CDR with network CDRs. In some embodiments, the techniques also include providing a design and provisioning of devices\/network equipment to recognize the CDRs. In some embodiments, the techniques also include provisioning to recognize that the device belongs to a Device Assisted Services (DAS) device group and that corresponding CDRs should be accepted and mediated. In some embodiments, the device-assisted CDRs are also generated using formats, network communications protocols, network device authentication and\/or provisioning to allow device-assisted CDRs into the network CDR system, encryption, and\/or signatures as required by the network (e.g., to comply with network generated CDR requirements or based on any other network and\/or service provider requirements and\/or standards).","In some embodiments, mediation rules include multi-device, multi-user, single-user devices, and\/or intermediate networking devices that can be single-user or multi-user, as described herein.","In some embodiments, a device-assisted CDR generator collects device-based service usage measures that are used as the basis for, or as an enhancement (e.g., as a supplement or in addition) to, one or more (e.g., network generated) CDRs that provide one or more networking functions with properly formatted service usage reports that the network function(s) accepts as being transmitted from an authorized source, read, and utilized for helping to determine the service usage of a device or group of devices. In some embodiments, the network functions that the device-assisted CDR generator shares CDRs with typically include one or more of the following: service usage\/CDR aggregation and\/or mediation servers, gateways, routers, communication nodes, Mobile Wireless Centers (MWCs, including HLRs), databases, AAA systems, billing interfaces, and billing systems. For example, the process of CDR creation in the CDR generator typically includes either using one or more device-based measures of service usage, or one or more device-based measures of service usage in combination with one or more network-based measures of service usage, possibly processing one or more of such service usage measures according to a set of CDR creation, CDR aggregation, and\/or CDR mediation rules to arrive at a final device usage measure that is, for example, then formatted with the proper syntax, framed, possibly encrypted and\/or signed, and encapsulated in a communication protocol or packet suitable for sharing with network functions. In some embodiments, the CDR generator resides in the device. In some embodiments, the CDR generator resides in a network server function that receives the device-assisted service usage measures, along with possibly network-based usage measures, and then creates a CDR (e.g., in the service controller ).","In some embodiments, the device-assisted CDR generator can reside in the service processor (e.g., service processor ), for example, in the service usage history or billing server functions. In some embodiments, the device-assisted CDR generator resides in the device itself, for example, within the service processor functions, such as the billing agent or the service monitor agent.","There are several factors that are considered in the various embodiments in order to create a useful, reliable, and secure device-assisted CDR system, including, for example, but not limited to: identification of each device-based service usage measure with one or more usage transaction codes; verification of the device-based usage measure(s); secure communication of the device-based usage measures to the network; efficient (e.g., low bandwidth) communication of the device-based service usage measure; coordination\/comparison\/aggregation of the device-based service usage measure with network-based service usage measure(s); formatting the device-based service usage measure into a CDR that can be properly communicated to the network functions and\/or equipment that process service usage information; causing the network-based functions and\/or equipment used for CDR collection, aggregation, mediation and\/or billing to recognize, authorize, and accept communications and CDRs from the device-assisted CDR generator, reading and properly implementing the correct network session context for the CDR so that the CDR is properly associated with the correct device\/user\/session; implementing the CDR aggregation rules that determine how to collect and aggregate the device-assisted CDRs as they are reported through the network CDR system hierarchy; implementing the mediation rules that determine how the various device-based service usage transaction code measures are combined and mediated with the other device-based service usage transaction code measures to result in consistent service usage information for each of the transaction code categories maintained in the network; implementing the mediation rules that determine how the device-assisted CDRs are combined and mediated with network-based CDRs to result in consistent service usage information for each of the transaction code categories maintained in the network; implementing mediation rules to reconcile the variances between network-based CDR usage measures and device-assisted CDR usage measures; classification of one or more device groups, with each group having the capability to uniquely define the service usage collection, accounting, and\/or billing rules; collecting CDRs generated on networks other than the home network so that service usage may be measured, accounted for, and\/or billed for across multiple networks; multi-device billing; multi-user billing; and\/or intermediate device billing with single user and multi user with and without multi device.","In some embodiments, verification of the relative accuracy of the device-assisted service usage measure is provided. Given that, for example, the service usage measure is often being generated on an end user device or a device that is readily physically accessed by the general public or other non-secure personnel from a network management viewpoint, in some embodiments, the device agents used in one or more of the service processor  agents are protected from hacking, spoofing, and\/or other misuse. Various techniques are provided herein for protecting the integrity of the agents used for generating the device-assisted service usage measures.","In some embodiments, the service usage measures are verified by network-based cross checks using various techniques. For example, network-based cross checks can provide valuable verification techniques, because, for example, it is generally not possible or at least very difficult to defeat well designed network-based cross checks using various techniques, such as those described herein, even if, for example, the measures used to protect the device agents are defeated or if no device protection measures are employed. In some embodiments, network-based cross checks used to verify the device-assisted service usage measures include comparing network-based service usage measures (e.g. CDRs generated by service usage measurement apparatus in the network equipment, such as the BTS\/BSCs , RAN Gateways, Transport Gateways, Mobile Wireless Center\/HLRs , AAA , Service Usage History\/CDR Aggregation, Mediation, Feed , or other network equipment), sending secure query\/response command sequences to the service processor  agent(s) involved in device-assisted CDR service usage measurement or CDR creation, sending test service usage event sequences to the device and verifying that the device properly reported the service usage, and using various other techniques, such as those described herein with respect to various embodiments.","In some embodiments, one or more of the following actions are taken if the device-based service usage measure is found to be in error or inaccurate: bill the user for usage overage or an out of policy device, suspend the device, quarantine the device, SPAN the device, and\/or report the device to a network administration function or person.","In some embodiments, the CDR syntax used to format the device-assisted service usage information into a CDR and\/or network communication protocols for transmitting CDRs are determined by industry standards (e.g., various versions of 3GPP TS 32.215 format and 3GPP2 TSG-X X.S0011 or TIA-835 format). In some embodiments, for a given network implementation the network designers will specify modifications of the standard syntax, formats and\/or network communication\/transmission protocols. In some embodiments, for a given network implementation the network designers will specify syntax, formats, and\/or network communication\/transmission protocols that are entirely different than the standards.","In some embodiments, within the syntax and formatting for the CDR the device-assisted service usage is typically categorized by a transaction code. For example, the transaction code can be similar or identical to the codes in use by network equipment used to generate CDRs, or given that the device is capable of generating a much richer set of service usage measures, the transaction codes can be a superset of the codes used by network equipment used to generate CDRs (e.g., examples of the usage activities that can be labeled as transaction codes that are more readily supported by device-assisted CDR systems as compared to purely network-based CDR systems are provided herein).","In some embodiments, the device sends an identifier for a usage activity tag, an intermediate server determines how to aggregate into CDR transaction codes and which CDR transaction code to use.","In some embodiments, the device service processor  compartmentalizes usage by pre-assigned device activity transaction codes (e.g., these can be sub-transactions within the main account, transactions within a given bill-by-account transaction or sub-transactions within a bill-by-account transaction). The device implements bill-by-account rules to send different usage reports for each bill-by-account function. In some embodiments, the service controller  programs the device to instruct it on how to compartmentalize these bill-by-account service usage activities so that they can be mapped to a transaction code.","In some embodiments, the device reports less compartmentalized service usage information and the service controller  does the mapping of service usage activities to CDR transaction codes, including in some cases bill-by-account codes.","In some embodiments, the CDR sent to  or other network equipment, for example, can include various types of transaction codes including but not limited to a raw device usage CDR, a bill-by-account (e.g., a sub-activity transaction code) CDR, a billing offset CDR, and\/or a billing credit CDR. For example, the decision logic (also referred to as business rules or CDR aggregation and mediation rules) that determines how these various types of CDR transaction codes are to be aggregated and mediated by the core network and the billing system can be located in the network equipment (e.g., a network element, such as service usage ), in the service controller , and\/or in the billing system .","In some embodiments, the device-assisted CDR generator uses the device-assisted service usage measures to generate a CDR that includes service usage information, service usage transaction code(s), and, in some embodiments, network information context. In some embodiments, the service usage information, transaction code, and\/or network information context is formatted into communication framing, syntax, encryption\/signature, security and\/or networking protocols that are compatible with the formatting used by conventional networking equipment to generate CDRs. For example, this allows networking equipment used for CDR collection, recording, aggregation, mediation, and\/or conversion to billing records to properly accept, read, and interpret the CDRs that are generated with the assistance of device-based service usage measurement. In some embodiments, the device-assisted service measures are provided to an intermediate network server referred to as a service controller (e.g., service controller ). In some embodiments, the service controller uses a CDR feed aggregator for a wireless network to collect device generated usage information for one or more devices on the wireless network; and provides the device generated usage information in a syntax (e.g., charging data record (CDR)), and a communication protocol (e.g., 3GPP or 3GPP2, or other communication protocol(s)) that can be used by the wireless network to augment or replace network generated usage information for the one or more devices on the wireless network.","In some embodiments, mediation rules include multi-device, multi-user, single-user devices, and intermediate networking devices that can be single-user or multi-user. For example, the device-assisted CDRs can be formatted by the device-assisted CDR generator to include a transaction code for one user account, even though the CDRs originate from multiple devices that all belong to the same user. This is an example for a multi-user device-assisted CDR billing solution. In another example for a multi-user device-assisted CDR billing solution, device-assisted CDRs from multiple devices and multiple users can all be billed to the same account (e.g., a family plan or a corporate account), but the bill-by-account CDR transaction records can be maintained through the billing system so that sub-account visibility is provided so that the person or entity responsible for the main account can obtain visibility about which users and\/or devices are creating most of the service usage billing. For example, this type of multi-user, multi-device device-assisted CDR billing solution can also be used to track types of service usage and\/or bill for types of service usage that are either impossible or at least very difficult to account and\/or bill for with purely network-based CDR systems. In some embodiments, bill-by-account CDR transaction records can be used to provide sponsored transaction services, account for network chatter, provide service selection interfaces, and other services for multi-user or multi-device service plans.","In addition to conventional single user devices (e.g., cell phones, smart phones, netbooks\/notebooks, mobile internet devices, personal navigation devices, music players, electronic eReaders, and other single user devices) device-assisted service usage measurement and CDRs are also useful for other types of network capable devices and\/or networking devices, such as intermediate networking devices (e.g., 3G\/4G WWAN to WLAN bridges\/routers\/gateways, femtocells, DOCSIS modems, DSL modems, remote access\/backup routers, and other intermediate network devices). For example, in such devices, particularly with a secure manner to verify that the device-assisted service usage measures are relatively accurate and\/or the device service processor  software is not compromised or hacked, many new service provider service delivery and billing models can be supported and implemented using the techniques described herein. For example, in a Wi-Fi to WWAN bridge or router device multiple user devices can be supported with the same intermediate networking device in a manner that is consistent and compatible with the central provider's CDR aggregation and\/or billing system by sending device-assisted CDRs as described herein that have a service usage and\/or billing code referenced to the end user and\/or the particular intermediate device.","In some embodiments, the device-assisted CDRs generated for the intermediate networking device are associated with a particular end user in which there can be several or many end users using the intermediate networking device for networking access, and in some embodiments, with each end user being required to enter a unique log-in to the intermediate networking device. For example, in this way, all devices that connect using Wi-Fi to the intermediate networking device to get WWAN access generate CDRs can either get billed to a particular end user who is responsible for the master account for that device, or the CDRs can get billed in a secure manner, with verified relative usage measurement accuracy to multiple end users from the same intermediate networking device. In another example, an end user can have one account that allows access to a number of intermediate networking devices, and each intermediate networking device can generate consistent device-assisted CDRs with transaction codes for that end user regardless of which intermediate networking device the end user logs in on.","In some embodiments, some of the services provided by the intermediate networking device are billed to a specific end user device-assisted CDR transaction code, while other bill-by-account services are billed to other transaction code accounts, such as sponsored partner transaction service accounts, network chatter accounts, sponsored advertiser accounts, and\/or service sign up accounts. For example, in this manner, various embodiments are provided in which intermediate networking devices (e.g., a WWAN to Wi-Fi router\/bridge) can sold to one user but can service, and be used to bill, other users (e.g., and this can be covered in the first purchasing user's service terms perhaps in exchange for a discount), or such intermediate networking devices can be located wherever access is desired without concern that the device will be hacked into so that services can be acquired without charge.","In some embodiments, various types of service usage transactions are billed for on the intermediate networking device, to any of one or more users, in which the information required to bill for such services is not available to the central provider or MVNO network equipment, just as is the case with, for example, conventional single user devices. In view of the various embodiments and techniques described herein, those skilled in the art will appreciate that similar service models are equally applicable not just to WWAN to Wi-Fi intermediate networking devices, but also to the femtocell, remote access router, DOCSIS, DSL and other intermediate WWAN to Wi-Fi networking devices.","In some embodiments, each device activity that is desired to be associated with a billing event is assigned a micro-CDR transaction code, and the service processor is programmed to account for that activity associated with that transaction code (e.g., various transaction codes can be associated with service usage associated with Apple iTunes music, Apple App Store applications, Facebook social networking, Google search, eBay online commerce, and Amazon Kindle eBooks, respectively, which can be used for providing granular service usage for these various Internet\/network-based services\/sites\/transactions and\/or any other Internet\/network-based services\/sites, which can include transactional based services, such as Apple iTunes, Apple App Store, and Amazon Kindle). For example, using these techniques, as described herein, essentially any type of device activity can be individually accounted for and\/or controlled (e.g., throttled, restricted, and\/or otherwise controlled as desired). In some embodiments, the service processor periodically reports (e.g., during each heartbeat or based on any other periodic, push, and\/or pull communication technique(s)) micro-CDR usage measures to, for example, a service controller or some other network element\/function. In some embodiments, the service controller reformats the heartbeat micro-CDR usage information into a valid CDR format (e.g., a CDR format that is used and can be processed by an SGSN or GGSN or some other authorized network element\/function for CDRs) and then transmits the reformatted micro-CDRs to a network element\/function for performing CDR mediation.","In some embodiments, CDR mediation is used to properly account for the micro-CDR service usage information by depositing it into an appropriate service usage account and deducting it from the user device bulk service usage account. For example, this technique provides for a flexible service usage billing solution that uses pre-existing solutions for CDR mediation and billing. For example, the billing system can process the mediated CDR feed from CDR mediation, apply the appropriate account billing codes to the aggregated micro-CDR information that was generated by the device, and then generate billing events in a manner that does not require changes to existing billing systems, infrastructures, and techniques (e.g., using new transaction codes to label the new device-assisted billing capabilities).","In some embodiments, the communications device is a mobile communications device, and the service includes one or more Internet-based services, and the mobile communications device includes one or more of the following: a mobile phone, a PDA, an eBook reader, a music device, an entertainment\/gaming device, a computer, laptop, a netbook, a tablet, and a home networking system. In some embodiments, the communications device includes a modem, and the processor is located in the modem. In some embodiments, an intermediate networking device includes any type of networking device capable of communicating with a device and a network, including a wireless network, example intermediate networking devices include a femtocell, or any network communication device that translates the wireless data received from the device to a network, such as an access network. In some embodiments, intermediate networking devices include 3G\/4G WWAN to WLAN bridges\/routers\/gateways, femtocells, DOCSIS modems, DSL modems, remote access\/backup routers, and other intermediate network devices.","In some embodiments, a revenue sharing model is provided using a settlement platform. In some embodiments, a revenue sharing model is provided using a settlement platform for providing one or more of the following: service activation revenue share or bounty (e.g., to one or more partners, such as OEMs, an ambient service partner, a roaming service partner, a carrier network partner, a device retailer or distributor, a service seller, a service re-seller, distributors, MVNOs, carriers, and\/or service providers), service usage billing (e.g., to one or more partners, such as OEMs, distributors, MVNOs, carriers, and\/or service providers), service usage revenue share (e.g., to one or more partners, such as OEMs, distributors, MVNOs, carriers, and\/or service providers), and transactional revenue share (e.g., to one or more partners, such as an OEM, an ambient service partner, a roaming service partner, a carrier network partner, a device retailer or distributor, a service seller, a service re-seller, distributors, MVNOs, carriers, and\/or service providers). For example, a revenue sharing model can allow for a distribution partner to access activation information for a specified device or a specified device group for which they are potentially entitled to a bounty (e.g., a fixed fee or some other payment or credit terms, etc.) for activation, and the revenue sharing model can also allow for one or more OEMs (e.g., or other device group partner) access to information regarding service usage for the specified device or the specified device group for which they are potentially entitled to a service usage revenue share (e.g., percentage, fixed fee, transactional fee or credit, or some other form of revenue share) for the associated or particular service usage. For example, a distributor (e.g., Amazon, Best Buy, or any other distributor) can be allocated a bounty for each activated eBook reader based on service activation for that eBook reader (e.g., the value\/terms of the bounty can vary based on the type of service that is activated for that eBook reader, such as an ambient service versus a premium data plan service), and the bounty can also require activation within a certain period of time of the sale (e.g., if activated within 30 days after sale by the distributor of the eBook to a customer). As another example, a service revenue share can be provided with an OEM (e.g., Sony or Google, or another eBook manufacturer, or another device group distribution partner), for example, for a period of time after the initial activation of the eBook reader (e.g., 2 years after activation), which is referred to herein as, for example, a service revenue bounty, a service revenue share, or a service revenue sharing model. In some embodiments, a partner (e.g., Amazon, Barnes & Noble, Google, or any other partner) pays for or subsidizes the cost of the associated service usage for the eBook reader, and a revenue share for each book paid for by the service provider is provided (e.g., a transactional service revenue share) between the service provider (e.g., carrier, central provider, MVNO, and\/or other service provider) and the partner. In some embodiments, these and other revenue share model techniques are implemented using a settlement platform, as described herein. In some embodiments, these and other revenue share and service billing techniques are implemented using a settlement platform and micro-CDRs, as described herein.",{"@attributes":{"id":"p-0180","num":"0179"},"figref":["FIG. 2","FIG. 2","FIG. 2"],"b":["100","125","100","702","704","109","100","115","122","210","119","122","123","4910"]},{"@attributes":{"id":"p-0181","num":"0180"},"figref":"FIG. 3","b":["122","270","4910","122","115","270"]},{"@attributes":{"id":"p-0182","num":"0181"},"figref":["FIG. 4","FIG. 4","FIG. 3","FIG. 4","FIG. 3","FIG. 4","FIG. 3","FIG. 4"]},{"@attributes":{"id":"p-0183","num":"0182"},"figref":["FIG. 5","FIG. 5"],"b":["100","115","100","100","100","250","220","165","220","100","220","120","240"]},"Referring again to , in some embodiments, where base station data plane traffic is backhauled and concentrated in a central provider core network , then the IPDRs can originate in the base stations or a router or gateway in the central provider network , and the IPDRs are collected at the AAA server  and stored in the service usage data store . In some embodiments, the central billing system  collects the IPDRs from the AAA server  for service billing accounting purposes. In some embodiments, a central billing system  collects the IPDRs directly from the initial IPDR source or some other aggregator. In some embodiments, outside partners like MVNOs gain access to the IPDRs from the central billing system . As discussed below, it is assumed that the IPDRs are obtained from the AAA server , and it is understood that the source of the IPDRs is interchangeable in the embodiments.","In some embodiments, the IPDR information is used by the service processor , the service controller  and\/or other network apparatus or device apparatus to implement service control verification is provided as described below. In some embodiments, an IPDR feed (e.g., also referred to as a charging data record (CDR)) flows between network elements. For example, an IPDR feed can flow from the RAN gateway  (e.g., SGSN , BSC packet control  or RNC ) and the transport gateway  (e.g., GGSN or PDSN). In other embodiments, the IPDRs originate and flow from the base station  or some other component\/element in the network. In some embodiments, one or more of these IPDR feeds is transmitted to an IPDR aggregation function (e.g., also referred to as a charging gateway). For example, this aggregation function can be located in the AAA , in the mobile wireless center  (and\/or in the home location register (HLR) or other similar function referred to by other common industry names), in the transport gateway , or in some other network element. This aggregation function collects the IPDR feeds into a database with an entry for each device . In some embodiments, an intermediate aggregation function is provided that feeds a higher level aggregation function, for example, the transport gateway  can receive IPDR feeds from the RAN gateway  or the base station  before sending them to another aggregation function. At some point in time (e.g., at the end of a specified time period, at the end of a device network connection session and\/or at a specified time of day), the IPDR aggregation function sends summary information or detailed information of the IPDRs for a given device or group of devices to the billing system for billing and\/or reconciliation. In some embodiments, in which the IPDR aggregation feed to the billing system is frequent enough for one or more of the IPDR information purposes described herein, the IPDR feed for the service controller  is derived from the aggregated feed, either by having the billing system  transmit it to the service controller , or by copying it from the IPDR aggregation function.","In some embodiments, the IPDR feed is obtained from the network function that is generating or aggregating the IPDR feed as described herein. In some embodiments, the IPDR feed is copied from the aggregation function in a manner that does not interrupt the operation of the network. For example, a switch-based port analysis function can be used to copy the traffic to a traffic analysis or server element that filters out the IPDR traffic and records it to a data base that is then either pushed to the service controller  (or any other network element that uses IPDR information as described herein), or is queried by the service controller  (or any other function that uses the IPDR information as described herein). In some embodiments, if the aggregated IPDR information transmitted to the billing system is delayed from real-time traffic usage events by an amount of time that is, for example, too long for desired operation, or for any other reason that makes it less desirable to obtain the IPDR information from the same aggregated feed used for the billing system , the IPDR information can be collected from one or more of the sources discussed above including, for example, from another aggregation point (e.g., the feed to the charging gateway, AAA server and\/or mobile wireless center\/HLR), one or more of the gateways , , , , , , , , , ,  the base station  and\/or another network element. In some embodiments, the IPDR feeds from these or other network functions are copied to a database as described above, which is either pushed or queried to get the information to the service controller  or other network elements that request the IPDR information.","In some embodiments, the service processor  includes various components, such as device agents, that perform service policy implementation or management functions. In some embodiments, these functions include service policy or implementation verification, service policy implementation tamper prevention, service allowance or denial, application access control, traffic control, network access control services, various network authentication services, service control plane communication, device heartbeat services, service billing, transaction billing, simplified activation services and\/or other service implementations or service policy implementations. It will be apparent to those of ordinary skill in the art that the division in functionality between one device agent and another is a design choice, that the functional lines can be re-drawn in any technically feasible way that the product designers see fit, and that the placing divisions on the naming and functional breakouts for device agents aids in understanding, although in more complex embodiments, for example, it can make sense to the product designer to break out device agent functionality specifications in some other manner in order to manage development specification and testing complexity and workflow.","In some embodiments, network control of the service policy settings and services as discussed above is accomplished with the service controller  which in various embodiments includes one or more server functions. As with the service processor  agent naming and functional break out, it is understood that service controller  server naming and functional breakout is also a design choice and is provided mainly to aid in the discussion. It will be apparent to those of ordinary skill in the art that the server names and functional breakouts do not imply that each name is an individual server, and, for example, a single named function in the various embodiments can be implemented on multiple servers, or multiple named functions in the various embodiments can be implemented on a single server.","As shown, there are multiple open content transaction partner sites  (e.g., open content transaction servers), which represent the websites or experience portals offered by content partners or ecommerce transaction partners of the service provider. For example, transaction servers  can provide an electronic commerce offering and transaction platform to the device. In some embodiments, the central provider has ownership and management of the service controller , so the central provider and the service provider are the same, but as discussed below the service provider that uses the service controller  to manage the device services by way of service processor  is not always the same as the central provider who provides the access network services.","In some embodiments, further distribution of central provider access networking functions such as access network AAA server , DNS\/DHCP server , and other functions are provided in the base stations . In some embodiments, network-based device service suspend\/resume control is also provided in the base stations  (or in some embodiments, for hierarchical or overlay networks, this function is provided by one or more of the following: RAN gateways, transport gateways, AAA  or some other network function). As shown, the following are connected (e.g., in network communication with) the central provider network : central provider billing system , dedicated leased lines  (e.g., for other services\/providers), central provider service controller , a content management (e.g., content switching, content billing, and content catching) system , central provider DNS\/DHCP server , access network AAA server , service usage data store  and central provider mobile wireless center . These embodiments may be advantageous particularly for flat networks as that shown in  that are provided by the present invention.","In some embodiments, the base stations  implement a firewall function via firewall  and are placed directly onto the local loop Internet for backhaul. Voice traffic transport is provided with a secure protocol with Voice Over IP (VOIP) framing running over a secure IP session, for example, Virtual Private Network (VPN), IP Security (IPSEC) or another secure tunneling protocol. In some embodiments, the VOIP channel employs another layer of application level security on the aggregated VOIP traffic trunk before it is placed on the secure IP transport layer. Base station control traffic and other central provider traffic can be provided in a number of ways with secure transport protocols running over Transmission Control Protocol (TCP), Internet Protocol (IP) or User Datagram Protocol (UDP), although TCP provides a more reliable delivery channel for control traffic that is not as sensitive to delay or jitter. One example embodiment for the control channel is a control link buffering, framing, encryption and secure transport protocol similar to that described below for the service control link between a device and the network. In some embodiments, a service control heartbeat function is provided to the base stations  similar to that implemented between the service controller  and the service processor  as described below. If the need to maintain a bandwidth efficient control plane channel between the base stations and the central provider base station control network is not as critical as it is in the case of access network connection to the device, then there are many other approaches for implementing a secure control channel over the Internet including, for example, one or more of various packet encryption protocols running at or just below the application layer, running TCP Transport Layer Security (TLS), and running IP level security or secure tunnels.","In some embodiments, the device-based services control plane traffic channel between the service processor  and the service controller  is implemented over the same control plane channel used for the flat base station control architecture, or in some embodiments, over the Internet. As discussed below, it is assumed that the device bases services control plane channel for service processor  to service controller  communications is established through the Internet  or through the access network using IP protocols as this is the more general case and applies to overlay network applications for various embodiments as well as applications where various embodiments are used to enable flattened access networks.","In some embodiments, by enabling the device to verifiably implement a rich set of service features as described herein, and by enabling the base station  to connect directly to the Internet  with a local firewall for device data traffic, tunnel the voice to a voice network with VOIP and secure Internet protocols, and control the base station  over a secure control plane channel using base station control servers located in a central provider network, base stations  can be more efficiently provisioned and installed, because, for example, the base station  can accommodate a greater variety of local loop backhaul options. In such embodiments, it is advantageous to perform certain basic network functions in the base station  rather than the central provider network.","In some embodiments, a basic device suspend\/resume function for allowing or disallowing the device Internet access is provided by the base stations  (or in some embodiments, for hierarchical or overlay networks in some embodiments this function is provided by one or more of the following: RAN gateways, transport gateways, AAA  or some other network function). This functionality, as will be discussed below, is important for certain embodiments involving taking action to resolve, for example, service policy verification errors. In some embodiments, this function is performed at the base station (e.g., base stations ) thereby eliminating the need for a more complex networking equipment hierarchy and traffic concentration required to perform the suspend\/resume function deeper in the network. Access network base stations control media access and are therefore designed with awareness of which device identification number a given traffic packet, group of packets, packet flow, voice connection or other traffic flow originates from and terminates to. In some embodiments, the suspend\/resume function is implemented in the base station  by placing an access control function in the traffic path of each device traffic flow. The suspend resume function can be used by various network elements, and in the context of the present embodiment can be used by the service controller  (e.g., in some embodiments, access control integrity server  (as illustrated in ) of service controller  or other service controller elements) to suspend and resume device service based on the assessment of the service policy implementation verification status as described below.","In some embodiments, at least a basic traffic monitoring or service monitoring function is performed at the base station (e.g., base stations ) similar to the service history records or IPDRs collected deeper in the network in more conventional hierarchical access network infrastructure architectures. For example, the service or traffic monitoring history records are advantageous for tracking device network service usage or service activity behavior and for certain verification methods for device-based service policy implementation or higher device-based services as discussed below. In some embodiments, a traffic monitoring function is provided in the base station  in which the traffic for each device is at least counted for total traffic usage and recorded. In some embodiments, traffic inspection beyond simply counting total traffic usage is provided. For example, the base station traffic monitor can record and report IP addresses or include a DNS lookup function to report IP addresses or IP addresses and associated Uniform Resource Locators (URLs). Another example allows the base station  to attach location data to the IPDR to provide device location data in the records. In some embodiments, traffic inspection includes recording deeper levels of traffic or service monitoring.","In some embodiments, device traffic associated with service verification conditions indicating service usage is out of policy or profile limits or allowances is routed to a quarantine network rather than or as an initial alternative to a suspending service. For example, the advantages for this approach and a more detailed description of the quarantine network are discussed below. In some embodiments, the quarantine network capability is provided for in which rather than simply suspending device traffic completely from the network as described above, the base station  includes a firewall function (e.g., firewall ) that is capable of passing device access traffic with the quarantine network destinations and blocking device access to all other destinations. In some embodiments, when it is discovered that service verification conditions indicate that service usage is out of policy or profile limits or allowances, then one or more of the following actions are taken: the user is notified of the overage condition, the user is required to acknowledge the overage condition, the user account is billed for the overage condition, and the device is flagged for further analysis by a network device analysis function or a network manager.","In some embodiments, network complexity is reduced using the device without moving completely to a flat base station network as described above. Device participation in the core network services implementation provides for numerous measures for simplifying or improving network architecture, functionality or performance. For example, two approaches are discussed below ranging from a simple overlay of the service processor  onto devices and the service controller  in a conventional hierarchical access network as illustrated in , to a completely flat network as illustrated in . Those of ordinary skill in the art will appreciate that the disclosed embodiments provided herein can be combined with the above embodiments and other embodiments involving flat network base stations to provide several advantages including, for example, richer service capability, less access network complexity, lower access network expenses, more flexible base station deployments, or less complex or less expensive base station back haul provisioning and service costs.","In most of the discussion that follows, the network-based service history records and the network-based suspend-resume functionality used in certain embodiments involving service implementation verification are assumed to be derived from the device service history  (as shown in ) central provider network element and the AAA server  central provider network element, and in some embodiments, working in conjunction with other central provider network elements. It is understood that these functions provided by the network can be rearranged to be provided by other networking equipment, including the base station as discussed above. It is also understood that the network-based device traffic monitoring, recording and reporting to the device service history  element can be accomplished at the base stations. Furthermore, it is understood that while the AAA server  is assumed to provide the suspend\/resume functionality, quarantine network routing or limited network access called for in some embodiments, the AAA server  can be a management device in which the actual implementation of the traffic suspend\/resume, firewall, routing, re-direction forwarding or traffic limiting mechanisms discussed in certain embodiments can be implemented in the base stations as discussed above or in another network element.","In some embodiments, an activation server  (or other activation sequencing apparatus) provides for provisioning, as described below, of the devices  and\/or network elements in the central provider network so that, for example, the device credentials can be recognized for activation and\/or service by the network. In some embodiments, the activation server  provides activation functions, as described below, so that, for example, the devices can be recognized by the network, gain access to the network, be provided with a service profile, be associated with a service account and\/or be associated with a service plan. As shown in , the activation server  is connected to the central provider core network . In this configuration, the activation server  acts as an over the network or over the air activation function. In some embodiments, the activation server , or variations of the activation server  as described below, is connected to apparatus in the manufacturing or distribution channel, or over the Internet , or as part of the service controller  to service provisioning or activation functions. In some embodiments, the activation server  is connected to the central provider core network . In some embodiments, the activation server  is connected to other network extensions such as an MVNO network or the Internet  if, for example, the routers in the service gateways or base stations have the capability to direct traffic from devices that are not fully activated or provisioned to an Internet destination, or if the service processor  is used for such direction. In some embodiments, the activation server  is included in the service controller .",{"@attributes":{"id":"p-0200","num":"0199"},"figref":["FIG. 6","FIG. 1","FIG. 6"],"b":["122","115","100","122","115","122","120","210","120","110","120","210","123","122","130","126","121","132"]},"By showing two service controllers , one connected to (e.g., in network communication with) the MVNO network  and one connected to the central provider network ,  also illustrates that some embodiments allow two entities on the same access network to each use the service controller  and service processor  to control different devices and offer different or similar services. As described below, the unique secure communication link pairing that exists between the two ends of the service control link,  and  (as shown in ), ensure that the two service controllers  can only control the devices associated with the correct service provider service profiles.",{"@attributes":{"id":"p-0202","num":"0201"},"figref":"FIG. 7","b":["100","100","125","115","115","115","122","115","100"]},"In some embodiments, the devices  are again assumed to be multimode 3G and 4G devices (e.g., the mobile devices  are assumed to have a dual mode wireless modem that will operate on both a 4G network, for example, LTE, and a 3G network, for example, HSPA or EVDO), with the devices  being billed for service by Central Provider #1 being, for example, EVDO and LTE capable, and the devices  being billed for service by Central Provider #2 being, for example, HSPA and LTE capable. For example, the devices  can roam using the 4G LTE network of the roaming central provider when neither the 3G nor 4G networks are available with the home central provider. As similarly discussed above with respect to the above-described roaming embodiments, the service processors  and service controllers  are capable of providing similar services on the 4G roaming network and the 3G home network as on the 4G home network, however, the varying costs and available network capacity and speed differences of 3G home, 4G roaming and 4G home may also encourage the use of different, such as three different, service profiles to allow for the most effective and efficient selection and control of services based on the current network.",{"@attributes":{"id":"p-0204","num":"0203"},"figref":["FIG. 8","FIG. 8","FIG. 8"],"b":["210","125","120","125","115","122","121","125","410","405","420","415","110"]},"As shown in , as discussed elsewhere, service usage data store  is a functional descriptor for a network level service usage information collection and reporting function located in one or more of the networking equipment boxes attached to one or more of the sub-networks in the figure (e.g., RAN, transport and\/or core networks). As shown in , service usage  is shown as an isolated function connected to the central provider core network  and the intention of this depiction is to facilitate all the possible embodiments for locating the service usage  function. In some UMTS network embodiments, the service usage  function is located or partially located in the GGSN gateway (or gateway cluster) . In some embodiments, service usage  functionality is located or partially located in the SGSN gateway (or gateway cluster) . In some embodiments, service usage  functionality is located or partially located in the equipment cluster that includes the AAA  and\/or the mobile wireless center . In some embodiments, service usage  functionality is located or partially located in the base station, base station controller and\/or base station aggregator, collectively referred to as base station  in  and many other figures described herein. In some embodiments, service usage  functionality is located or partially located in a networking component in the transport network , a networking component in the core network , the billing system  and\/or in another network component or function. This discussion on the possible locations for the network-based service usage history logging and reporting function can be easily generalized to all the other figures described herein by one of ordinary skill in the art (e.g., RAN Gateway  and\/or Transport Gateway ), and this background will be assumed even if not directly stated in all discussion above and below.","In some embodiments, a central provider provides open development services to MVNO, Master Value Added Reseller (MVAR) and\/or Original Equipment Manufacturer (OEM) partners. In some embodiments, all three service providers, central provider service provider, MVNO #1 service provider and MVNO #2 service provider have service control and billing control of their own respective devices  through the unique pairing of the service processors  and service controllers . For example, MVNO #1 and MVNO #2 can each have open development billing agreements with the central provider and each can own their respective billing systems . As shown in , MVNO #1 core network  is in communication with the central provider core network  via the Internet , and MVNO #2 core network  is in communication with the central provider core network  via an alternate landline (LL)\/VPN connection . In some embodiments, the two MVNOs each offer completely different devices and\/or services, and the devices and\/or services also differ significantly from those offered by the central provider, and the service profiles are adapted as required to service the different devices and respective service offerings. In addition, the central billing system  allows all three service provider user populations to access ecommerce experiences from transaction provider partners operating transaction servers , to choose central provider billing options that combine their third-party transaction bills on their service provider bill, and each subscriber population can experience a service provider specified look and feel that is unique to the respective service provider even though the different user populations are interfacing to the same transaction servers and the transaction partners do not need to require significant custom development to provide the unique central billing and unique consistent user experience look and feel.","In some embodiments, a central provider offers open network device and service developer services using one service controller server  (e.g., a service controller server farm) and allows the open development partners to lease server time and server tools to build their own service profiles. The central provider also provides service billing on behalf of services to the open development partners. For example, this reduces costs associated with setting up an MVNO network for the open development partners and does not require the partners to give up significant control or flexibility in device and\/or service control.",{"@attributes":{"id":"p-0208","num":"0207"},"figref":["FIG. 9","FIG. 8","FIG. 9"],"b":["210","125","508","512","405","520","415","110","521","415"]},"In some embodiments, the central provider can offer improved service capabilities using a wireless access network. As shown, the base stations  do not connect directly to the Internet , and instead the base stations  connect to the wireless access network. However, as in various previous embodiments, the service processor  still connects through the secure control plane link to service controller . In some embodiments, the data plane traffic is backhauled as shown across the various network routers and gateways as is the control plane traffic, and the IPDRs are obtained from the access network AAA server .",{"@attributes":{"id":"p-0210","num":"0209"},"figref":["FIG. 10","FIG. 8","FIG. 10","FIGS. 1-12"],"b":["210","125","608","612","405","620","415","110","619","415","602","415","704"]},"In some embodiments, the central provider can offer improved service capabilities using the wireless access network as depicted in . As shown, the base stations  do not connect directly to the Internet , and instead the base stations  connect to the wireless access network. However, as in various previous embodiments, the service processor  still connects through the secure control plane link to service controller . In some embodiments, the data plane traffic is backhauled as shown across the various network routers and gateways as is the control plane traffic, and the IPDRs are obtained from the access network AAA server . Accordingly, as shown in , various embodiments can be implemented independent of the wireless access network technology, and for example, can be implemented in 3G, 4G and any other wireless access network technology.",{"@attributes":{"id":"p-0212","num":"0211"},"figref":["FIG. 11","FIG. 8","FIG. 11"],"b":["210","123","123","125","702","702","704","708","712","405","720","415","110"]},"In some embodiments, the central provider can offer improved service capabilities using the wireless access network as depicted in . As shown, the base stations  do not connect directly to the Internet , and instead the base stations  connect to the wireless access network. However, as in various previous embodiments, the service processor  still connects through the secure control plane link to service controller . In some embodiments, the data plane traffic is backhauled as shown across the various network routers and gateways as is the control plane traffic, and the IPDRs are obtained from the access network AAA server .","Referring to , the Wi-Fi connection can be replaced with a femtocell (and the Wi-Fi modem shown in  can be replaced with a femtocell modem (base station side functionality)). In some embodiments, the service processor  is provided on the femtocell to control subscriber access in a verifiable manner as similarly described herein with respect to various embodiments (e.g., the Wi-Fi related embodiments). For example, the femtocell service provider (e.g., the entity that owns the spectrum the femtocell is using) can operate the femtocell as a local access mechanism for the home subscriber (or other who purchased or installed the femtocell), and then also use it to provide pay-for-service or additional free services, with controlled access and\/or traffic control and\/or service control and\/or billing control performed locally or in combination with network equipment as described herein. In some embodiments, the WWAN devices being used at home or work with the femtocell include a portion of the service processor functionality. For example, this allows the service provider for femtocells to provide service and monetize service in a controlled way even though the femtocell is not connected to the service provider network the way conventional base stations are connected to the service provider network, but is connected through the Internet . For example, the secure heartbeat function can be extended to include data traffic so that it is encrypted and secured along with the control plane traffic. The decision of whether or not to admit a device onto the femtocell can be made through the service processor  connection to the service controller  and subsequent look up of the credentials for the device and the associated service plan and service profile that is then programmed into the service processor on the femtocell and\/or the device itself. The femtocell can also offer a landing page to devices through the service processor so that devices that do not belong to the network can gain access to the network by signing up over the femtocell. For example, the intermediate device embodiments for Wi-Fi on one end and WWAN on the other can be accomplished by using the Wi-Fi connection in the cell phone in AP mode so that it becomes the intermediate device. The service processor  on the cell phone can then act in the same manner as described for the intermediate device as described herein.",{"@attributes":{"id":"p-0215","num":"0214"},"figref":["FIG. 12","FIG. 12"],"b":["125","125","131","129","110","210","120"]},"As shown, the service processor  can reside on a number of different types of devices  that work on 3G or 4G wireless, DSL or DOCSIS, and the service controller  is capable of controlling each of these types of devices with a consistent service experience, for example, using different service profiles, service capabilities and service profile cost options depending on which network the device is connected to and\/or other criteria. For example, a download of a High Definition (HD) movie can be allowed when the service controller  is managing service profile policies for a service processor  residing on a DOCSIS device  (e.g., a computer or laptop connected to a cable modem), but not when the same service controller  is managing service profile policies for a service processor  residing on a 3G device  (e.g., a smart phone connected to a mobile 3G network).","As will now be apparent to one of ordinary skill in the art in view of the above description of , the present invention can be provided across any access network and a set of service profiles can be defined in a variety of ways including, for example, to user preference feedback, access network performance, access network cost, access network central provider partnership status with the service provider central provider and roaming deals and costs. For example, as discussed below, various embodiments allow for users to have superior service experiences based on the ability to control certain of their service settings, and service providers can also more efficiently deploy a greater variety of services\/service plans to users.","In some embodiments, the service processor  and the service controller  provide an overlay for existing networks without significantly changing the billing system , gateways\/routers or other network components\/elements, and also provide verifiable service monitoring to control services and\/or service usage\/costs without involving, for example, a service provider or MVNO (e.g., for smart phone devices and\/or laptops or netbooks (or any other network accessible device) with an unlimited data plan or any other service plan). For example, applications that are deployed by device owners or service subscribers (e.g., an IT manager) and do not involve a service provider include roaming services provided as an after-market product without carrier\/service provider involvement. In this example, device activity is recorded by the service processor  and transmitted to the service controller  (e.g., the IT manager controls the service controller ). In another example, a third-party after-market product is provided in which the service controller  is hosted by the third-party and the device management entity (e.g., the IT manager or parents of the device user for parental controls) uses a secure Virtual Service Provider (VSP) website to control the devices that belong to that management entity's device partition (e.g., VSP partitions and techniques are described below with respect to ). The VSP secure website techniques described herein can also be applied to service provider owned servers with device partitions for the purpose of controlling, for example, Deep Packet Inspection (DPI) controllers (e.g., DPC policy implementation  as shown in ) to provide similar or substantially equivalent service usage\/control capabilities using network-based service control techniques, as similarly described in detail below with respect to  (e.g., IT manager VSP control of a group partition and\/or MVNO VSP control of a group partition).","Service Processor Configurations for Devices",{"@attributes":{"id":"p-0220","num":"0219"},"figref":["FIG. 13","FIG. 13","FIGS. 13-18 and 19A-19F"],"b":["100","115","115","910","920","100","100"]},"As shown in , device  also includes a processor , sometimes referred to as a CPU or central processor unit, an APU or application processor unit, a core processor, a computing device, or many other well known terms. In some embodiments, device  includes one or more processors and\/or a multicore processor. As shown, processor  includes a sub-processor . In some embodiments, processor  and\/or sub-processor  are based on an architecture sometimes referred to as a complex instruction set computer or CISC, a reduced instruction set computer or RISC, a parallel processor, a combination of two or more architectures or any other processor architecture. In some embodiments, processor  has a design that is based on logic and circuitry from one or more standard design library or published architecture, or includes specialized logic and circuitry designed for a given device  or collection of such devices. In some embodiments, a device includes more than one processor and\/or sub-processor, and in such a device, one processor and\/or sub-processor can have one architecture while another may have a somewhat different or completely different architecture. In some embodiments, one or more of the processors and\/or sub-processors can have a general purpose architecture or instruction set, can have an architecture or instruction set that is partially general or partially specialized, or can have an instruction set or architecture that is entirely specialized. In some embodiments, a device includes more than one processor and\/or sub-processor, and in such a device, there can be a division of the functionality for one or more processors and\/or sub-processors. For example, one or more processors and\/or sub-processors can perform general operating system or application program execution functions, while one or more others can perform communication modem functions, input\/output functions, user interface functions, graphics or multimedia functions, communication stack functions, security functions, memory management or direct memory access functions, computing functions, and\/or can share in these or other specialized or partially specialized functions. In some embodiments, any processor  and\/or any sub-processor  can run a low level operating system, a high level operating system, a combination of low level and high level operating systems, or can include logic implemented in hardware and\/or software that does not depend on the divisions of functionality or hierarchy of processing functionality common to operating systems.","As shown in , device  also includes non-volatile memory , memory , graphics memory  and\/or other memory used for general and\/or specialized purposes. As shown, device  also includes a graphics processor  (e.g., for graphics processing functions). In some embodiments, graphics processing functions are performed by processor  and\/or sub-processor , and a separate graphics processor  is not included in device . As shown in , device  includes the following modems: wire line modem , WWAN modem , USB modem , Wi-Fi modem , Bluetooth modem , and Ethernet modem . In some embodiments, device  includes one or more of these modems and\/or other modems (e.g., for other networking\/access technologies). In some embodiments, some or all of the functions performed by one or more of these modems are performed by the processor  and\/or sub processor . For example, processor  can implement some or all of certain WWAN functional aspects, such as the modem management, modem physical layer and\/or MAC layer DSP, modem I\/O, modem radio circuit interface, or other aspects of modem operation. In some embodiments, processor  as functionality discussed above is provided in a separate specialized processor as similarly shown with respect to the graphics and\/or multimedia processor .","As also shown in , device  includes an internal (or external) communication bus structure . The internal communication bus structure  generally connects the components in the device  to one another (e.g., allows for intercommunication). In some embodiments, the internal communication bus structure  is based on one or more general purpose buses, such as AMBA, AHP, USB, PCIe, GPIO, UART, SPI, I2C, Fire wire, DisplayPort, Ethernet, Wi-Fi, Bluetooth, ZigBee, IRDA, and\/or any other bus and\/or I\/O standards (open or proprietary). In some embodiments, the bus structure is constructed with one or more custom serial or parallel interconnect logic or protocol schemes. As will be apparent to one of ordinary skill in the art, any of these or other bus schemes can be used in isolation and\/or in combination for various interconnections between device  components.","In some embodiments, all or a portion of the service processor  functions disclosed herein are implemented in software. In some embodiments, all or a portion of the service processor  functions are implemented in hardware. In some embodiments, all or substantially all of the service processor  functionality (as discussed herein) is implemented and stored in software that can be performed on (e.g., executed by) various components in device .  illustrates an embodiment in which service processor  is stored in device memory, as shown, in memory  and\/or non-volatile memory , or a combination of both. In some embodiments, it is advantageous to store or implement certain portions or all of service processor  in protected or secure memory so that other undesired programs (and\/or unauthorized users) have difficulty accessing the functions or software in service processor . In some embodiments, service processor , at least in part, is implemented in and\/or stored on secure non-volatile memory (e.g., non-volatile memory  can be secure non-volatile memory) that is not accessible without pass keys and\/or other security mechanisms. In some embodiments, the ability to load at least a portion of service processor  software into protected non-volatile memory also requires a secure key and\/or signature and\/or requires that the service processor  software components being loaded into non-volatile memory are also securely encrypted and appropriately signed by an authority that is trusted by a secure software downloader function, such as service downloader  as discussed below (and as shown in ). In some embodiments, a secure software download embodiment also uses a secure non-volatile memory. Those of ordinary skill in the art will also appreciate that all memory can be on-chip, off-chip, on-board and\/or off-board. In some embodiments, the service processor  which as shown in  is stored or implemented in non-volatile memory  and memory , can be implemented in part on other components in device .","As shown, device  also includes a user interfaces device component  for communicating with user interface devices (e.g., keyboards, displays and\/or other interface devices) and other I\/O devices component  for communicating with other I\/O devices. User interface devices, such as keyboards, display screens, touch screens, specialized buttons or switches, speakers, and\/or other user interface devices provide various interfaces for allowing one or more users to use the device .",{"@attributes":{"id":"p-0226","num":"0225"},"figref":["FIG. 14","FIG. 14","FIG. 14"],"b":["100","115","115","930","100","930","930","115","930","115","100"]},"Service Processor Implemented on a Communications Modem",{"@attributes":{"id":"p-0228","num":"0227"},"figref":["FIG. 15","FIG. 15"],"b":["100","115","115","942","100","942","942","115","100","100"]},"In some embodiments, the service processor  is implemented on a modem processor (e.g., WWAN modem  or WWAN\/Wi-Fi modem), and the service processor  can be installed and\/or executed in protected and\/or secure memory or processor hardware on the modem. The modem memory can be made robust to hacking or tampering and, in some embodiments, is only accessible from a secure network management channel or secure device management port and not by most end users. In some embodiments, a portion of the service processor  is implemented on a modem processor (e.g., WWAN modem  hardware or software), and a portion of the service processor  is implemented on another device  processor . For example, the device service monitor agent  and one or more service usage measurement points (see discussion associated with ) can be implemented on a modem processor, and other service processor  elements can be implemented in the main device operating system processor . As another example, a second (or first) service monitor agent  and one or more service usage measurement points can be implemented on a modem processor, and a first (or second) service monitor  with one or more service measurement points can be implemented on the main operating system processor  for device . For example, such embodiments can be configured to provide a service usage measurement and reporting system that offers a diversified countermeasure to protect against hacking, tampering or other errors for device-based service usage measurements that can be made harder to hack or tamper with than certain software embodiments on the processor . For example, such embodiments can be employed when one or more of the following capabilities are not available: network-based service usage measures, network-based service profile or policy implementation verification measures, and network-based service usage verification error response action capabilities.","In some embodiments, certain portions of the service processor  that deal with application layer service monitoring or traffic flow identification (e.g., tagging or traffic flow shaping as disclosed elsewhere) are implemented on a main processor , and other portions of the service processor  are implemented on a modem processor (e.g., WWAN modem ).","In some embodiments, the WWAN modem is a wide area access technology modem such as 2G, 2.5G, 3G or 4G. As discussed above and below, the connection to the WWAN modem  can be a connection internal to device , for example, a USB, GPIO, AMBA or other bus, or can be a connection that extends external to the device such as for example, a USB, Ethernet, Wi-Fi, Bluetooth or other LAN or PAN connection. Three example embodiments in which the bus is internal to the device are as follows: a PCIe modem card running over USB or PCIe, a GPIO connection running from a processor  chipset to a modem chipset inside a mobile device, or a Wi-Fi connection running from a Wi-Fi modem inside of device  to an intermediate modem or networking device combination that forwards the access network traffic between the access network connection and the device via the Wi-Fi connection. In some embodiments, in addition to the service processor  being implemented on the WWAN modem  either internal or external to the device , similarly service processor  can be implemented on a wire line modem , such as DSL, Cable or fiber, another wireless LAN or PAN modem, such as Wi-Fi, ZigBee, Bluetooth modem , White Space, or some other modem, connected internal to device  or external to device  via a LAN or PAN extension of internal or external communications bus structure .","In some embodiments, a complete turn-key reference design product for the device modem (one or more of , , , , , ) combined with a built-in service processor , possibly with a well defined and documented application interface and a well defined and documented service processor developers kit (SPDK) provides for a powerful product embodiment for the purpose of achieving mass market distribution and usage for the modem with service processor  and associated service controller  features. For example, embodiments that include the WWAN modem , possibly in combination with one or more additional modems including Wi-Fi modem , Bluetooth modem , USB modem  and Ethernet modem , can be combined with a pre-tested or pre-certified integrated embodiment of the service processor , possibly in combination with a well defined API for writing software applications that interface to, reside on or communicate with this turn-key modem embodiment. As disclosed herein, the advantageous capabilities of the service processor , possibly in conjunction with the service controller , to assist in monitoring, control, billing and verification for services is made more available for device  manufacturers in such a form, because the manufacturers do not need to spend as much time and resources to develop a custom modem only for a subset of devices that the turn-key modem can be used to support. In some embodiments, the service processor , as discussed herein, can be configured to provide device-assisted service monitoring, control, billing and\/or verification across not just when connected to the WWAN network via the WWAN modem, but also when connected to the other networks corresponding to the other access modems included in the turn-key combined module plus service processor  (or SPDK or chipset plus service processor ) design. The pre-integrated service processor  and API possibly in combination with testing and certification can be packaged in a small form factor that may have standardized interfaces such as USB, PCIe, FireWire, DisplayPort, GPIO, or other interface. The form factor may be miniaturized into standard configurations such as Mini Card, Half Mini Card, or even smaller form factors, or it can be designed into a non-standard or proprietary form factor. The module form factor can be well documented to simplify integration into various device  designs. The SPDK embodiments can be designed to contain one or more of the following: hardware integration and use documentation, software integration documentation, software programming documentation, application interface documentation, service controller documentation, overall testing guidelines and overall use guidelines. In some embodiments, the modem module can be integrated with the service processor  functionality as a combined chipset, firmware and\/or software product, with other SPDK features very similar to those listed above. The service controller programming guide for these turn-key embodiments can also be documented for the SPDK service processor  software, turn-key module with service processor  or integrated chipset with service processor . Accordingly, these embodiments provide various solutions to simplify the OEM task of integrating, developing, testing and shipping device  products (or integrated networking device products) with any of the device-assisted service monitoring, control, billing or verification capabilities disclosed herein.",{"@attributes":{"id":"p-0233","num":"0232"},"figref":["FIG. 16","FIG. 16"],"b":["100","115","115","980","100","980","980"]},"As discussed above, various embodiments include product designs in which the service processor  resides on device volatile or non-volatile memory (see ), the device application processor or CPU (see ), the wireless access modem (see ) (or any other modem), or another I\/O device (see ). While these are just a few of the example service processor  placement embodiments, these embodiments show that the placement of where the software or hardware for implementing the service processor  can reside in the device  is very flexible and can be implemented in a myriad of places and ways depending on the device and\/or other technical design choices.",{"@attributes":{"id":"p-0235","num":"0234"},"figref":["FIG. 17","FIG. 17"],"b":["100","115","1310","115","1320","100","1320","1320","1310","1320","100"]},{"@attributes":{"id":"p-0236","num":"0235"},"figref":["FIG. 18","FIG. 13"],"b":["100","115","1310","115","910","920","1310","1310","1320","100"]},"As similarly discussed above with respect to , various embodiments include product designs including the SOC chipset  in which the service processor  resides on internal volatile or non-volatile memory  of the SOC chipset  (see ), the device application processor or CPU  and\/or sub processor , the modems , , , , , and\/or  (or any other modem), another I\/O device , and\/or external memory  (see ) (and\/or any combinations thereof). While these are just a few of the example service processor  placement embodiments, these embodiments show that the placement of where the software or hardware for implementing the service processor  can reside in the SOC chipset  and\/or the external memory  of the device  is very flexible and can be implemented in a myriad of places and ways depending on the device and\/or other technical design choices.","The above discussion with respect to  illustrating various internal hardware embodiments for device  applies equally to this partitioning of device functionality or any other partitioning of how the components in device  are configured, whether they are all separate components, some of the components are combined into a single chipset but there are still multiple chipsets, or all of the components are combined into a chipset. For example,  illustrating various internal hardware embodiments for device  show several access modem components including the wire line modem , wireless wide area network (WWAN) modem , USB modem , Wi-Fi modem , Bluetooth modem , and Ethernet modem . In some embodiments, wire line modem  is a DSL or cable modem such as DOCSIS, or some other modem with a hard connection such as fiber. In some embodiments, as discussed above and below, connection to the wire line or wireless access network is accomplished through an extension of the internal or external communications bus structure . For example, such an extension is accomplished using one or the other modems, such as Wi-Fi modem  or Ethernet modem , connecting to a local area network that in turn connects to the access network via a device that bridges the local area network to the access network. One of ordinary skill in the art will appreciate that when discussing device connection to any access network the connection can be via a direct connection to the network, such as a 3G or 4G WWAN modem  connection to a 3G or 4G WWAN network, or can be a connection to the access network through an intermediate connection, such as a Wi-Fi modem  connection to a modem or networking device combination that has a Wi-Fi LAN connection and a 3G or 4G network access network connection. Another example of an extended modem connection embodiment includes a Wi-Fi modem  device connection to a modem or networking device combination that includes a Wi-Fi LAN connection and a DOCSIS or DSL network access connection. Other examples of such combinations will be readily apparent to one of ordinary skill in the art.","Service Processor Configurations for Intermediate Networking Devices",{"@attributes":{"id":"p-0240","num":"0239"},"figref":["FIGS. 19A through 19F","FIGS. 19A through 19E"],"b":"100"},"In some embodiments, device  includes a 3G and\/or 4G network access connection in combination with the Wi-Fi LAN connection to the device . For example, the intermediate device or networking device combination can be a device that simply translates the Wi-Fi data to the WWAN access network without implementing any portion of the service processor  as shown in . In some embodiments, an intermediate device or networking device combination includes a more sophisticated implementation including a networking stack and some embodiments a processor, as is the case, for example, if the intermediate networking device or networking device combination includes a router function, in which case the service processor  can be implemented in part or entirely on the intermediate modem or networking device combination. The intermediate modem or networking device combination can also be a multi-user device in which more than one user is gaining access to the 3G or 4G access network via the Wi-Fi LAN connection. In the case of such a multi-user network, the access network connection can include several managed service links using multiple instantiations of service processor , each instantiation, for example, being implemented in whole or in part on device  with the intermediate modem or networking device combination only providing the translation services from the Wi-Fi LAN to the WWAN access network.","Referring now to , in some embodiments, the service processors  are implemented in part or in whole on the intermediate modem or networking device combination. In the case where the service processor  is implemented in part or in whole on the intermediate modem or networking device combination, the service processor  can be implemented for each device or each user in the network so that there are multiple managed service provider accounts all gaining access through the same intermediate modem or networking device combination. In some embodiments, the functions of service processor  are implemented on an aggregate account that includes the WWAN access network traffic for all of the users or devices connected to the Wi-Fi LAN serviced by the intermediate modem or networking device combination. In some embodiments, the central provider can also provide an aggregated account service plan, such as a family plan, a corporate user group plan and\/or an instant hotspot plan. In the case where there is one account for the intermediate modem or networking device combination, the intermediate modem or networking device combination can implement a local division of services to one or more devices  or users in which the services are controlled or managed by the intermediate modem or networking device combination or the device , but the management is not subject to service provider control and is auxiliary to the service management or service policy implementation performed by service processors . In some embodiments, another service model can also be supported in which there is an aggregate service provider plan associated with one intermediate modem or networking device combination, or a group of intermediate modems or networking device combinations but where each user or device still has its own service plan that is a sub-plan under the aggregate plan so that each user or device has independent service policy implementation with a unique instantiation of service processor  rather than aggregate service policy implementation across multiple users in the group with a single instantiation of service processor .","As shown in , in some embodiments, device  includes a Wi-Fi modem , a Wi-Fi modem  combined with a 3G and\/or 4G WWAN modem  on intermediate modem or networking device combination , and the intermediate modem or networking device combination forwards WWAN access network traffic to and from device  via the Wi-Fi link. For example, the service processor  can be implemented in its entirety on device  and the service provider account can be associated exclusively with one device. This is an embodiment associated with one or more of  discussed below, in which the modem bus represents the Wi-Fi LAN connection via the Wi-Fi modem . Similarly, as shown in , such an implementation can be provided using a different access modem and access network, such as a 2G and\/or 3G WWAN, DSL wire line, cable DOCSIS wire line or fiber wire line configuration in place of the 3G and\/or 4G access network connection to the intermediate modem or networking device combination . In addition, various other embodiments similarly use DSL as shown in , USB, Ethernet, Bluetooth, or another LAN or point to point connection from device  to the intermediate modem or networking device combination , or a femtocell modem and DSL\/cable\/T1\/other combination as shown in .","In some embodiments, a portion of the service processor  is implemented on the device , such as the application interface agent  and other supporting agents (see ), and another portion of the service provider  is implemented on the intermediate modem or networking device combination, such as policy implementation agent  or possibly modem firewall  as well as other agents (see ). This is an embodiment associated with one or more of  discussed below, in which the modem bus in the figure represents the Wi-Fi LAN connection via the Wi-Fi modem . In this example, the service provider  can still offer individual service plans associated exclusively with one device, or can offer an aggregate plan in which the portion of the service processor  located on the intermediate modem or networking device combination  aggregates service plans into one WWAN connection but each individual device  has a unique service interface via the application interface agents and associated agents located on device . Similarly, such an implementation can be provided using a different access modem and access network, for example, a 2G and\/or 3G WWAN, DSL wire line, cable DOC SIS wire line or fiber wire line configuration in place of the 3G and\/or 4G access network connection to the intermediate modem or networking device combination . In addition, various other embodiments similarly use USB, Ethernet, Bluetooth, or another LAN or point to point connection from device  to the intermediate modem or networking device combination .","In some embodiments, all of the service processor  is implemented on the intermediate modem or networking device combination  and the aggregate device or user traffic demand from the LAN port is serviced through one service provider service plan account. This is an embodiment associated with  in which as discussed below the modem bus in the figure represents the Wi-Fi LAN connection via the Wi-Fi modem . Similarly, such an implementation can be provided using a different access modem and access network, for example, a 2G and\/or 3G WWAN, DSL wire line, cable DOC SIS wire line or fiber wire line configuration in place of the 3G and\/or 4G access network connection to the intermediate modem or networking device combination . In addition, various other embodiments similarly use USB, Ethernet, Bluetooth, or another LAN or point to point connection from device  to the intermediate modem or networking device combination .","In some embodiments, the device  uses the on-board WWAN modem  when it is outside of Wi-Fi LAN coverage area for one or more trusted access networks for the device, and when the device comes within range of a Wi-Fi network associated with a intermediate modem or networking device combination connected to a trusted wire line access network, the device can switch to the Wi-Fi link service to connect service processor  to the trusted wire line access network. In some embodiments, the decision to switch to the Wi-Fi LAN associated with a trusted wire line access network can be made automatically by the device based on the policy implementation rules settings for the modem selection and control  and\/or the policy control agent , can be made by the user, or can be made by the service controller  (see ). In addition, various other embodiments similarly use USB, Ethernet, Bluetooth, or another LAN or point to point connection from device  to the intermediate modem or networking device combination .",{"@attributes":{"id":"p-0247","num":"0246"},"figref":["FIG. 19F","FIG. 19F"],"b":["100","115","1510","1510","100","115","115","100","115","100"]},"As described herein, various embodiments provide many service policy implementation options that can enhance the service provider control of the service experience and cost, or enhance the user control of the service experience and cost by providing a verifiable or compromise resistant solutions to manage service policy implementation on the intermediate modem or networking device combination, for one or both of the WWAN or wire line access networks, when the WWAN access network is active, or when the WWAN access network is inactive. The level of service control, user preference feedback and service policy implementation verification or compromise resistance enabled by these embodiments improves the offered back up services and primary wire line services. One of ordinary skill in the art will also now appreciate that any number of wire line and\/or wireless network access connections can be supported by the various embodiments as described herein, with any number of device architectures and architectures for intermediate modem or networking device combinations bridging the device to the access network of choice. Accordingly, various embodiments provide a verifiable managed service architecture, design and implementation for any number of single access and\/or multi-access networks in which the service account can be consistent across multiple networks, and the service policies can be changed from network to network as deemed appropriate by the service provider with service notification, service cost control and privacy preference inputs from the user.","In various embodiments, the verification embodiments discussed herein for service policy implementation verification or service policy implementation compromise protection can be applied. In some embodiments, rather than attaching a service provider service plan account to a single device, it is attached to (e.g., associated with) a user. For example, when the user logs onto an access network with a service controller controlled by a service provider, regardless of what device the user logs onto with the user's service plan profile can be automatically looked up in the central billing system  and dynamically loaded (e.g., downloaded) onto the device  from the service controller  (e.g., a service profile provided on demand based on the user's identity). In some embodiments, in addition to dynamically loading the user's service policy implementation and control settings, one or more of the user's preferences including notification, service control, traffic monitor reporting privacy and Customer Relationship Management (CRM) reporting privacy are also dynamically loaded. For example, this allows the user to have the same service settings, performance and experience regardless of the device the user is logged into and using on the network. In addition, as discussed herein, in the various embodiments that call for roaming from one type of access network to another, the user service plan profile, that includes all of the above in addition to the service plan profile changes that take effect between different types of access network, can be used on any device and on any network, providing the user with a verifiable or compromise resistant, consistent service experience regardless of network or device.","Many of the embodiments described herein refer to a user using device . It is understood that there are also applications for these various embodiments that do not involve user interfaces. Examples of such applications include equipment, apparatus or devices for automation, telemetry, sensors, security or surveillance, appliance control, remote machine to machine data connections, certain remote access configurations, two way power metering or control, asset tracking, people tracking or other applications in which a human user interface is not required for device .","Various embodiments of the device  described above include other I\/O devices . In some embodiments, these other devices include other modems, other special purpose hardware components, and\/or other I\/O devices or drivers or modems to connect to other I\/O devices. In some embodiments, these other devices include a Subscriber Identity Module (SIM) or Universal Subscriber Identity Module (USIM) device. In some embodiments, it is advantageous to implement some or all of the service processor  functions on an embodiment of device  that includes a SIM and\/or a USIM. In some embodiments, the other I\/O devices  include a hardware device designed to implement a portion or all of the service processor  functions. For example, this is advantageous in cases in which the original device  was not manufactured with the service processor ; in cases in which dedicated hardware is desired to improve one or more aspects of service processor  performance; allowing users, for example, to have the same service settings, performance and experience regardless of the device the user is using on the network by using such a SIM and\/or USIM (e.g., or implemented as a type of dongle); and\/or in cases in which a separate component is desired to assist in compromise protection for one or more aspects of service processor .","As discussed above, some embodiments described herein provide for billing of certain access services. In some embodiments, various applications do not require or involve billing of certain services. For example, applications like enterprise IT (Information Technology) group management of enterprise workforce access policy implementation or access cost control or access security policy, privacy control, parental control, network quality of service control or enhancement, private network services, free access services, publicly funded access services, flat rate no-options service and other services, or other examples that will be apparent to one of ordinary skill in the art do not require billing functionality but benefit from many other aspects of various embodiments.","Device-Assisted Services Install",{"@attributes":{"id":"p-0254","num":"0253"},"figref":["FIG. 20","FIG. 20"],"b":["100","220","100","115","100","100","220","120","240"]},"In some embodiments, intermediate networking devices, as described herein, include a service processor or assist in the downloading of a service processor for one or more devices  to facilitate network access as described herein with respect to various embodiments. In some embodiments, a device  does not initially include a service processor (as shown in ). In some embodiments, a service processor  is previously installed (e.g., during manufacture or distribution), or is downloaded and installed on a device  (as also shown in ).","In some embodiments, the wireless communications device is a mobile communications device, and the service includes one or more Internet-based services, and the mobile communications device includes one or more of the following: a mobile phone, a PDA, an eBook reader, a music device, an entertainment\/gaming device, a computer, laptop, a netbook, a tablet, and a home networking system. In some embodiments, the wireless communications device includes a modem, and the processor is located in the modem. In some embodiments, an intermediate networking device includes any type of networking device capable of communicating with a device and a network, including a wireless network, example intermediate networking devices include a femtocell, or any network communication device that translates the wireless data received from the device to a network, such as an access network. In some embodiments, intermediate networking devices include 3G\/4G WWAN to WLAN bridges\/routers\/gateways, femtocells, DOCSIS modems, DSL modems, remote access\/backup routers, and other intermediate network devices.","In some embodiments, there are at least two versions of a service processor. For example, a first version service processor can be a generic version of a service processor version that can be pre-installed during manufacture or distribution and used for downloading a second version service processor. For example, the first version service processor can be a generic version that is not specific to a device group while the second version is specific to a device group. As another example, the first version service processor installed during time of manufacture or during device distribution may not contain all of the functions that are available for a permanent second version service processor that is installed when the device first connects to a network. As another example, service processors can be regularly updated to change the security parameters of the software, such as software signatures, encryption, obfuscation, secure query response sequence information, and\/or other parameters, so that it becomes more difficult to hack or otherwise modify the software. As another example, the second version service processor can be uniquely associated with the device  (e.g., wireless communications device or an intermediate networking device) and the associated service plan and\/or service provider. In some embodiments, a first version service processor is installed on a device  (e.g., service processor  installed on the device  can be a first version service processor that was previously installed during manufacture or distribution, or downloaded and installed during initial network access, as shown in ). In some embodiments, a second version service processor is installed on a mobile device (e.g., service processor  can be a second version service processor that was previously installed during manufacture or distribution, or downloaded and installed during initial network access, as shown in ).","In some embodiments, a new and\/or updated version service processor  can be downloaded from, for example, a service processor download , as described herein. In some embodiments, the service processor download  provides a function or service that is located elsewhere in the network or partially located in elsewhere or integrated with\/as part of other network elements (e.g., the service processor download  can be a function\/service of service control  and\/or service policies and accounting ). In some embodiments, the devices  are in service control communication with service control  via central provider access and core networks  as shown in . Service policies and accounting functions  are also provided in communication with the central provider access and core networks  as shown in . In some embodiments, the service policies and accounting functions  provides a function or service that is located elsewhere in the network or partially located in elsewhere or integrated with\/as part of other network elements (e.g., the service policies and accounting functions  can be a function\/service of service control ).","In some embodiments, DAS install clients (e.g., bootstrappers for devices ) are provided. In some embodiments, a first version service processor provides DAS install client function that facilitates a bootstrapping function for downloading and installing a second version service processor. In some embodiments, DAS install clients are provided for creating\/downloading and installing a verifiable service processor for each device (e.g., a network capable device, such as a mobile wireless communications device or intermediate networking device). In some embodiments, a DAS install client downloads a uniquely secured service processor for device  (e.g., hashed\/encrypted, such as based on device credentials, to prevent, for example, mass hacking or other security vulnerabilities, and\/or a signed interface between the service processor and modem). In some embodiments, a non-advertised IP address allocated for each device group is rotated (e.g., to counter denial of service (DoS), distributed denial of service (DDS), and\/or other types of attacks and\/or vulnerabilities or exploits), and service processors are configured with multiple IP addresses for service control access (e.g., for secured network communication with service control  and\/or service policies and accounting ).","In some embodiments, the various techniques and embodiments described herein can be readily applied to intermediate networking devices (e.g., an intermediate modem or networking device combination). In some embodiments, intermediate networking devices include, for example, WWAN\/WLAN bridges, routers and gateways, cell phones with WWAN\/WLAN or WWAN\/Bluetooth, WWAN\/LAN or WWAN\/WPAN capabilities, femtocells, back up cards for wired access routers, and\/or other intermediate networking devices. In some embodiments, an intermediate networking device (e.g., an intermediate modem or networking device combination) downloads and sends a service processor to one or more devices communicating via the intermediate networking device. In some embodiments, an appropriate and validated service processor is securely downloaded to the intermediate networking device, and the intermediate networking device performs the service processor functions for various wireless communication devices (e.g., mobile wireless communication devices) in communication with the intermediate networking device. In some embodiments, in which one or more wireless communication devices are in wireless communication via an intermediate networking device, some of the service processor functions are performed on the intermediate networking device (e.g., an appropriate and validated service processor is installed or securely downloaded and installed on the intermediate networking device), and some of the service processor functions are performed on the one or more wireless communication devices (e.g., an appropriate and validated service processor is installed or securely downloaded and installed on the mobile device) (e.g., stack controls can be performed on the mobile device and various other controls can be performed on the intermediate networking device). In some embodiments, the one or more wireless communication devices cannot access the network via the intermediate networking device (e.g., the devices are quarantined) unless the one or more wireless communication devices each have an installed and functioning verified service processor (e.g., using CDRs from intermediate networking device and\/or network).","In some embodiments, a USB WLAN stick or other similar networking device is provided (e.g., including a modem) with DAS install client software that loads onto the device  and installs a service processor  on the device . In some embodiments, software on the device  instructs the user to insert a properly configured memory device (e.g., a secured USB memory stick, dongle, or other secured device that can provide a DAS install client software, a service processor image, and\/or device credentials for network access). In some embodiments, the USB WLAN installed software assumes control over, for example, the network stack of the device (e.g., for managing network access) and sets various service policies based on whether the service is communicated via the USB WLAN stick or via the Wi-Fi\/other (e.g., including requiring no policies, such that access is open). In some embodiments, the DAS install client software on the USB WLAN stick provides a secure client that installs itself\/certain software on the device that provides a DAS install client (e.g., bootstrapper) for the device, and the DAS install client downloads an appropriate service processor onto the device and\/or the USB WLAN stick (e.g., the stack can also be located and managed on the USB WLAN stick).","In some embodiments, a network-based charging data record (CDR) feed, as described herein with respect to various embodiments, is provided for monitoring service usage by managed devices. In some embodiments, the CDR feed includes device generated CDRs or micro-CDRs generated by the service processor (e.g., service processor  can generate CDRs for monitored service usage on the device, which can, for at least some CDRs, include unique transaction codes for uniquely identifying the monitored service usage based on service or other categorizations\/criteria) on the device (e.g., a mobile device or an intermediate networking device for that mobile device). In some embodiments, the CDR feed is a real-time (e.g., near real-time) network-based CDR feed provided for determining whether any devices have been compromised (e.g., a hack of a first version or second version service processor providing for unrestricted service usage for such devices, and\/or any other mass or security attack or vulnerability or exploit). For example, such a CDR feed can be used to determine abnormal or unusual traffic patterns and\/or service level usage activities, which, for example, can be used to identify and\/or protect against a DoS\/DDS attack or other types of security attacks.",{"@attributes":{"id":"p-0263","num":"0262"},"figref":["FIG. 21","FIG. 21","FIG. 21"],"b":["300","115","122","115","1697","1697","115","1698","1692","1698","1698","1698","1698","1698","1698","1698","1692","300","320","330","115","340","1662","122","320","330"]},"Protecting Network Capacity","There is also a need for intelligent network monitoring to provide real-time traffic monitoring network service usage (e.g., at the packet level\/layer, network stack application interface level\/layer, and\/or application level\/layer) of the wireless network (e.g., radio access networks and\/or core networks) and to effectively manage the network service usage for protecting network capacity (e.g., while still maintaining an acceptable user experience). Using Device-Assisted Services (DAS) techniques, and in some cases, network assisted\/based techniques, to provide for network service usage monitoring of devices, network carriers\/operators would be provided greater insight into what devices, which users and what applications, and when and where network congestion problems occur, enabling operators to intelligently add additional resources to certain areas when necessary (e.g., offloading data traffic onto femtocells or Wi-Fi hotspots and adding more network resources), to differentially control network service usage, and\/or to differentially charge for network service usage based on, for example, a network busy state, for protecting network capacity",{"@attributes":{"id":"p-0266","num":"0265"},"figref":"FIG. 22","b":["3221","3222","3223","3224","3225","3226"]},"In some embodiments, differential network access control for protecting network capacity includes controlling network services traffic generated by the device (e.g., network capacity controlled services based on a network service usage control policy (e.g., a network capacity controlled services policy). In some embodiments, differential network access control for protecting network capacity includes providing assistance in control of the distribution of bandwidth among devices, network capacity controlled services (e.g., applications, OS operations\/functions, and various other network services usage activities classified as network capacity controlled services), a differentiated QoS service offering, a fair sharing of capacity, a high user load network performance, and\/or preventing one or more devices from consuming so much network capacity that other devices cannot receive adequate performance or performance in accordance with various threshold and\/or guaranteed service levels. In some embodiments, differential network access control for protecting network capacity includes applying policies to determine which network the service activity should be connected to (e.g., 2G, 3G, 4G, home or roaming, Wi-Fi, cable, DSL, fiber, wired WAN, and\/or another wired or wireless or access network), and applying differential network access control rules (e.g., traffic control rules) depending on which network to which the service activity is connected. In some embodiments, differential network access control for protecting network capacity includes differentially controlling network service usage activities based on the service usage control policy and a user input (e.g., a user selection or user preference). In some embodiments, differential network access control for protecting network capacity includes differentially controlling network service usage activities based on the service usage control policy and the network the device or network service activity is gaining access from.","In some embodiments, implementing traffic control for network capacity controlled services using DAS techniques is provided using various techniques in which the network service usage activity is unaware of network capacity control (e.g., does not support an API or other interface for implementing network capacity control). For example, network service application messaging interface based techniques can be used to implement traffic control. Example network service application messaging interfaces include the following: network stack API, network communication stream\/flow interface, network stack API messages, EtherType messages, ARP messages, and\/or other messaging or other or similar techniques as will now be apparent to one of ordinary skill in the art in view of the various embodiments described herein. In some embodiments, network service usage activity control policies or network service activity messages are selected based on the set of traffic control policies or service activity messages that result in reduced or modified user notification by the service activity due to network capacity controlled service policies applied to the network service activity. In some embodiments, network service usage activity control policies or network service activity messages are selected based on the set of traffic control policies or service activity messages that result in reduced disruption of device operation due to network capacity controlled service activity policies applied to the network service activity. In some embodiments, network service usage activity control policies or network service activity messages are selected based on the set of traffic control policies or service activity messages that result in reduced disruption of network service activity operation due to network capacity controlled service activity policies applied to the network service activity. In some embodiments, implementing traffic control for network capacity controlled services is provided by intercepting opens\/connects\/writes. In some embodiments, implementing traffic control for network capacity controlled services is provided by intercepting stack API level or application messaging layer requests (e.g., socket open\/send requests). For example, an intercepted request can be copied (e.g., to memory) and queued (e.g., delayed or throttled) or dropped (e.g., blocked). As another example, an intercepted request can be copied into memory and then a portion of the transmission can be retrieved from memory and reinjected (e.g., throttled). As yet another example, intercepting messaging transmissions can be parsed inline and allowed to transmit (e.g., allowed), and the transmission or a portion of the transmission can be copied to memory for classifying the traffic flow. In some embodiments, implementing traffic control for network capacity controlled services is provided by intercepting or controlling or modulating UI notifications. In some embodiments, implementing traffic control for network capacity controlled services is provided by killing or suspending the network service activity. In some embodiments, implementing traffic control for network capacity controlled services is provided by deprioritizing the process(es) associated with the service activity (e.g., CPU scheduling deprioritization).","In some embodiments, implementing traffic control for network capacity controlled services using DAS techniques for network service usage activities that are unaware of network capacity control is provided by emulating network API messaging (e.g., effectively providing a spoofed or emulated network API). For example, an emulated network API can intercept, modify, block, remove, and\/or replace network socket application interface messages and\/or EtherType messages (e.g., EWOULDBLOCK, ENETDOWN, ENETUNREACH, EHOSTDOWN, EHOSTUNREACH, EALRADY, EINPROGRESS, ECONNREFUSED, EINPROGRESS, ETIMEDOUT, and\/other such messages). As another example, an emulated network API can modify, swap, and\/or inject network socket application interface messages (socket( ), connect( ), read( ), write( ), close( ), and other such messages) that provide for control or management of network service activity service usage behavior. As yet another example, before a connection is allowed to be opened (e.g., before a socket is opened), transmission, or a flow\/stream is initiated, it is blocked and a message is sent back to the application (e.g., a reset message in response to a sync request or another message that the application will understand and can interpret to indicate that the network access attempt was not allowed\/blocked, that the network is not available, and\/or to try again later for the requested network access). As yet another example, the socket can be allowed to open but after some point in time (e.g., based on network service usage, network busy state, time based criteria, and\/or some other criteria\/measure), the stream is blocked or the socket is terminated. As yet another example, time window based traffic control techniques can be implemented (e.g., during non-peak, not network busy state times), such as by allowing network access for a period of time, blocking for a period of time, and then repeating to thereby effectively spread the network access out either randomly or deterministically. Using these techniques, an application that is unaware of network capacity control based traffic control can send and receive standard messaging, and the device can implement traffic controls based on the network capacity control policy using messaging that the network service usage activity (e.g., application or OS or software function) can understand and will respond to in a typically predictable manner as would now be apparent to one of ordinary skill in the art.",{"@attributes":{"id":"p-0270","num":"0269"},"figref":["FIG. 23","FIG. 23"],"b":["3270","3270","3271","3272","3273","3274","3275","3276","3277","3278","3279","3280","3270"]},"In the example of , the network service consuming application  is an application that is implemented on a device. In an expected use, the application  is a software application stored at least in part in memory on a wireless device, though kernel-level instructions could be implemented as firmware or even hardware. The application  can be referred to as \u201crunning\u201d on the device or as being \u201cexecuted\u201d by the device in accordance with known uses of those terms. Wireless media are known to have more bandwidth constraints, which is why a wireless device is an expected use, though the technique may be applicable to wired devices in certain situations.","In the example of , the network service usage analysis engine  is coupled to the network service consuming application . The network service usage analysis engine  analyzes traffic from the network service consuming application  and stores relevant data in the application behavior datastore . The data can include all traffic that is sent by the application, or a subset of the traffic (e.g., that which has a certain QoS classification or priority, that which has high resource consumption due to frequent transmission from the application, that which is sent to a particular destination, etc.) The data can also include traffic that is received for the application. The application behavior datastore  can alternatively or in addition be implemented as a traffic source\/destination datastore, which can be valuable if differential access control is based upon the source and\/or destination of traffic. The application behavior datastore  includes data structures (e.g., records) representative of data that is organized with implementation-specific granularity. For example, the data structures could be representative of frames (L2), packets (L3), or messages. (It may be noted that the term \u201cpackets\u201d is often used to mean collections of data that are not limited to L3.) The desired granularity may depend upon where the network service usage analysis engine  is located. Whether the data structures are changed over time (e.g., to change data associated with a record), replaced as records age, or maintained as historical data is also implementation-specific.","In the example of , the network service usage classification engine  is coupled to the network service usage analysis engine  and the application behavior datastore . The network service usage classification engine  can categorize the traffic stored in the application behavior datastore  based on, e.g., network type, time of day, connection cost, whether home or roaming, network busy state, QoS, and whether the particular service usage activity is in foreground of user interaction or in the background of user interaction, or other characteristics that are obtained from network service usage analysis or through other means. Classification rules can include, for example, examining if one or more of the following has taken place within a specified period of time: user has interacted with the device, user has interacted with the service usage activity, user has picked up the device, service usage activity UI content is in the foreground of the device UI, audio or video information is being played by the service usage activity, a certain amount of data has been communicated by the service usage activity, service usage activity is or is not on a foreground or background service list. Rules that define which service usage activities to classify as, e.g., background service usage activities can be user-selected, set by a service provider, or through some other applicable means.","Advantageously, the network service usage analysis engine  can examine a particular service usage activity and the network service usage classification engine  can determine if the particular service usage activity fits a set of one or more classification rules that define the particular service usage activity as, e.g., a background service usage activity.","In the example of , the application traffic prioritization engine  uses a policy stored in the network service usage control policy datastore  to determine an appropriate prioritization for traffic to and\/or from the network service consuming application . Prioritization can enable the system  to fine-tune the amount of network resources consumed by the network service consuming application , or the rate of network resource consumption. The control policy can require applications to throttle network resource consumption, prohibit the use of network resources by certain applications, etc.","Advantageously, the application traffic prioritization engine  can determine a particular service usage activity has a particular characteristic, such as being a background service usage activity. This can involve checking whether a condition is satisfied.","In the example of , the differential network access control engine  is coupled to the application traffic prioritization engine  and the network service usage control policy datastore . The differential network access control engine  causes the network service consuming application  traffic to be queued in the application traffic cache . (If no throttling is required to follow the control policy, of course, the traffic need not be cached anywhere other than is typical, such as in an output buffer.) The application traffic cache  is intended to represent a cache that is implemented on top of an output buffer or other standard caching device, and is used by the differential network access control engine  to facilitate control over \u201crogue\u201d applications, applications having anomalous behavior, or applications that must otherwise be controlled to conform with the control policy.","Advantageously, the differential network access control engine can restrict network access of a particular service usage activity when a condition is satisfied, such as when the service usage activity is a background activity.","In the example of , the application traffic override engine  is coupled to the differential network access control engine  and the application traffic cache . The application traffic override engine  enables a user or device to deviate from the control policy. Such deviation can be prompted by, for example, an incentive offer or a notification of cost.","In an illustrative example, the device  blocks chatter for an application running in the background that is attempting to report device or user behavior. The application traffic prioritization engine  determines that the chatter has zero priority, such that the network service consuming application  is prevented from consuming any resources. The user can be sent a notification by the application traffic override engine  that their control policy prohibits the application from consuming network resources, but that the user can opt to deviate from the control policy if they are willing to pay for the consumed resources. If the user is willing to pay for the resources, traffic can be sent at a certain rate from the application traffic cache  through the network interface , or perhaps sent without using the application traffic cache .","Service Processor and Service Controller for Verifiable Service Monitoring, Notification and Control",{"@attributes":{"id":"p-0282","num":"0281"},"figref":["FIG. 24","FIG. 24"],"b":["115","122","122","120","1610"]},"As shown, service processor  includes a service control device link . For example, as device-based service control techniques involving supervision across a network become more sophisticated, it becomes increasingly important to have an efficient and flexible control plane communication link between the device agents and the network elements communicating with, controlling, monitoring, or verifying service policy. In some embodiments, the service control device link  provides the device side of a system for transmission and reception of service agent to\/from network element functions. In some embodiments, the traffic efficiency of this link is enhanced by buffering and framing multiple agent messages in the transmissions. In some embodiments, the traffic efficiency is further improved by controlling the transmission frequency or linking the transmission frequency to the rate of service usage or traffic usage. In some embodiments, one or more levels of security or encryption are used to make the link robust to discovery, eavesdropping or compromise. In some embodiments, the service control device link  also provides the communications link and heartbeat timing for the agent heartbeat function. As discussed below, various embodiments disclosed herein for the service control device link  provide an efficient and secure solution for transmitting and receiving service policy implementation, control, monitoring and verification information with other network elements.","In some embodiments, the service control device link  agent messages are transmitted asynchronously as they are generated by one or more of the service agents. In some embodiments, the service control device link  performs collection or buffering of agent messages between transmissions. In some embodiments, the service control device link  determines when to transmit based potentially on several parameters including, for example, one or more of the following parameters: periodic timer trigger, waiting until a certain amount of service usage or traffic usage has occurred, responding to a service controller message, responding to a service controller request, initiated by one or more agents, initiated by a verification error condition, initiated by some other error or status condition. In some embodiments, once a transmission trigger has occurred, the service control device link  assembles all buffered agent communications and frames the communications.","In some embodiments, the transmission trigger is controlled by waiting for an amount of service usage, such as waiting until a certain amount of data traffic has passed, which reduces the control plane communication channel traffic usage to a fraction of the data plane traffic. For example, this approach preserves network capacity and reduces service cost even in traffic scenarios in which data traffic is light.","In some embodiments, the transmission trigger is based on waiting for an amount of service usage, and also including a minimum transmission rate that triggers a transmission according to one or more of the following parameters: a maximum time between transmissions clock to keep the service processor  in communication with the service controller  when little or no service usage is occurring, a polling request of some kind from the service controller , a response to a service controller heartbeat, a transmission generated by a service verification error event, or a transmission generated by some other asynchronous event with time critical service processor  (or service controller ) messaging needs, such as a transaction or service billing event or a user request. For example, service control plane traffic down is reduced to a relatively inexpensive and capacity conserving trickle when device  data traffic is not significant. At the same time, this approach also provides an effective flow of real time or near real-time service control plane traffic that is both cost and capacity efficient, because the service control plane traffic is a relatively small percentage of the data plane traffic when data plane traffic usage is heavy. For example, when data plane traffic usage is heavy is generally the time when close monitoring of service policy implementation verification or compromise prevention can be particularly important and by keeping the control plane overhead to a fraction of data plane traffic close monitoring and control of services are maintained at a reasonable cost in terms of percentage of both bandwidth used and network capacity. In some embodiments, the service usage or service activity trigger occurs based on some other measure than traffic usage, such as a number of messages transacted, one or more billing events, number of files downloaded, number of applications run or time that an application has been running, usage of one or more specified applications, GPS coordinate changes, roaming event, an event related to another network connection to the device and\/or other service related measures.","In some embodiments, the service control device link  provides for securing, signing, encrypting or otherwise protecting communications before sending. For example, the service control device link  can send to the transport layer or directly to the link layer for transmission. In some embodiments, the communications are further secured with transport layer encryption, such as TCP TLS (Transport Control Protocol Transport Layer Security) or another secure transport layer protocol. In some embodiments, communications are encrypted at the link layer, such as IPSEC (Internet Protocol Security), various VPN (Virtual Private Network) services, other forms of IP layer encryption and\/or another link layer encryption technique.","In some embodiments, the service control link  includes the above discussed agent heartbeat function in which the agents provide certain required reports to the service controller  for the purpose of service policy implementation verification (e.g., verification related reports on certain aspects of the service processor ) or for other purposes. For example, such agent heartbeat messages can be in the open\/clear (unencrypted) or encrypted, signed and\/or otherwise secured. In some embodiments, these messages include one or more of the below described types of messages: an agent information message, an agent check-in message and\/or agent cross check message.","In some embodiments, an agent information message is included in the agent heartbeat service policy implementation verification message, which includes, for example, any information the agent needs to communicate to the service controller  as part of the operation of the service policy implementation system. For example, an agent response to a service controller challenge, as described below, can be included in the agent heartbeat service policy implementation verification message.","In some embodiments, an agent check-in message is included in an agent heartbeat service policy implementation verification message, which includes, for example, a transmission of a unique agent identifier, secure unique identifier, and\/or hashed encrypted and signed message beginning with some shared secret or state variable for the hash. For example, an agent self-check can be included in the agent heartbeat service policy implementation verification message, which includes reporting on agent configuration, agent operation, agent code status, agent communication log, agent error flags, and\/or other agent associated information potentially hashed, encrypted, signed or otherwise secured in the message (e.g., using a shared secret unique to that agent).","In some embodiments, an agent cross-check message is included in the agent heartbeat service policy implementation verification message, which includes, for example, reports on the status, configuration, operation observations, communication log or other aspects of another agent. For example, agent environment reports can be included in the agent heartbeat service policy implementation verification message, which includes, for example, reports on certain aspects of the service processor  operating environment, such as software presence (e.g., installation status of certain operating system and\/or application software and\/or components thereof), observed communication with agents or communication attempts, memory accesses or access attempts, network accesses or access attempts, software downloads or attempted downloads, software removal or download blocking, service policy implementation verification or compromise event error conditions with respect to the operating environment for the service processor , and\/or other messages regarding the verification or possibility of compromise associated with the service processor  operating environment or agents.","In some embodiments, the agent heartbeat function also provides regular updates for information important to user service notification services. For example, the network-based elements can provide regular synchronization updates for the device-based service usage or service activity counters in which service usage or service activity measures available from one or more network service history elements is transmitted to the device . This allows the service usage counter errors between the device service counter and the counters used for central billing to be minimized. A common service usage or service activity measure is total traffic usage measured to date within a time frame over which a service limit is applicable. Other service usage or service activity measures can also be tracked and reconciled in a similar manner.","In some embodiments, for the heartbeat function, the service controller  verifies that the scheduled agent reports are being received and that the reports are within expected parameters. In some embodiments, the access control integrity server  issues signed challenge\/response sequences to the policy implementation agent . For example, the challenges can be asynchronous, issued when an event or error condition occurs, issued on a schedule or issued when a certain amount of data has passed. This approach, for example, provides a second layer of service policy implementation verification that strengthens the service usage or service activity measurement verification. For example, a challenge\/response can be sent over the heartbeat link for the purpose of verifying device agent integrity. Various challenge\/response related verification embodiments are described below.","In some embodiments, the challenge\/response heartbeat message can include sending any kind of command or query, secure or transmitted in the open, receiving a response from the agent and then evaluating the response to determine if the response is within a range of parameters expected for a correctly configured agent, an agent that is operating properly, an agent that is not partially compromised or an agent that is not entirely compromised. In some embodiments, the agent is only required to respond with a simple acknowledgement of the challenge. In some embodiments, the agent is required to respond with a message or piece of information that is known by the agent. In some embodiments, the agent is required to respond with a message or piece of information that is difficult for the agent to respond correctly with if it were to be partially or entirely compromised. In some embodiments, the agent is required to respond back with information regarding the operation or configuration of the agent that is difficult for the agent to respond properly with if the agent is not properly configured, not operating properly, is partially compromised or is entirely compromised. In some embodiments, the first agent is required to respond back with information regarding the operation, configuration, status or behavior of a second agent that is difficult for the first or second agent to respond properly with if the first or second agent is not properly configured, not operating properly, is partially compromised or is entirely compromised. In some embodiments, the agent is required to respond with a response that includes a shared secret. In some embodiments, the agent is required to respond with information regarding the presence, configuration, operating characteristics or other information regarding other programs in the operating environment of the agent. In some embodiments, the agent is required to respond with hashed information to be portions of code or a code sample (e.g., the code portion or code sample can be specified by the service controller ).","In some embodiments, the information the agent responds with is a response to a signed or encrypted message from the service controller  in which the agent must know how to decode the encrypted controller message in order to respond correctly or it would be difficult for the agent to respond properly if the agent is not configured properly, is not operating within appropriate limits, is partially compromised or is entirely compromised. In some embodiments, the agent signs or encrypts information in such a manner that it is difficult to respond correctly when the message is decoded by the service controller  unless the agent is configured properly, is operating within appropriate limits, is not partially compromised and is not entirely compromised. In some embodiments, the agent is required to respond with a signed or encrypted hash of information that is difficult for the agent to generate unless the agent is configured properly, is operating within appropriate limits, is not partially compromised and is not entirely compromised. For example, the hashed information can be local device configuration information, portions of code or all of the code, and\/or the code portion to be used in the response can be specified by the service controller. In another example, the hashed information the agent responds with can include a shared secret, and\/or the hashed information can be information regarding the presence, configuration, operating characteristics or other information regarding other programs in the operating environment of the agent.","Accordingly, as described above, the agent heartbeat function provides an important and efficient system in some embodiments for verifying the service policy implementation or protecting against compromise events. For example, there are many other functions the agent heartbeat service can perform and some are described herein while others will be apparent to one of ordinary skill in the art given the principles, design background and various embodiments provided herein.","In some embodiments, the service control device link  facilitates another important function, which is the download of new service processor software elements, revisions of service processor software elements, and\/or dynamic refreshes of service processor software elements. There are many embodiments for such operations. In some embodiments, the software is received as a single file over the service control device link . For example, the file can have encryption or signed encryption beyond any provided by the communication link protocol itself. In some embodiments, the software files are segmented into smaller packets that are communicated in multiple messages sent over the service control device link . In some embodiments, once the file(s) are received, or the segmented portions of the file(s) are received, they are communicated to a service downloader  for file aggregation and installation, which, in some embodiments, is performed after further measures to verify the service processor software are completed. In some embodiments, the files are sent using other delivery means, such a direct TCP socket connection to the service downloader  or some other software installer, which can also involve secure transport and additional levels of encryption.","As shown in , an agent communication bus  represents a functional description for providing communication for the various service processor  agents and functions. In some embodiments, as represented in the functional diagram illustrated in , the architecture of the bus is generally multipoint to multipoint so that any agent can communicate with any other agent, the service controller or in some cases other components of the device, such user interface  and\/or modem components. As described below, the architecture can also be point to point for certain agents or communication transactions, or point to multipoint within the agent framework so that all agent communication can be concentrated, or secured, or controlled, or restricted, or logged or reported. In some embodiments, the agent communication bus is secured, signed, encrypted, hidden, partitioned and\/or otherwise protected from unauthorized monitoring or usage.","In some embodiments, as described below, there are multiple layers of security applied to the agent communication bus  communication protocols, such as including one or more of the following: point to point message exchange encryption using one or more keys that are partially shared or shared within the service processor  agent group and\/or the service controller , point to point message exchange that using one or more keys that are private to the two endpoints of the communication, a bus-level message exchange encryption that can be in place of or in addition to other encryption or security, or using one or more keys that are partially shared or shared within the service processor  agent group and\/or the service controller , a set of secure messages that can only be decoded or observed by the agents they are intended for, a set of secure messages that allow communication between certain agents or service processor functions and entities outside of the service processor operating environment. In some embodiments, and as described herein, the service control device link  is assumed to be equivalent to an agent for communication purposes, and, in the case of the service control device link , the communication is not restricted to the agent communication bus  but also extends to the service control communications link . In some embodiments, the system has the capability to replace keys or signatures on occasion or on a regular basis to further secure against monitoring, eavesdropping or compromise of the agent communication system.","For example, various forms of message encryption and security framework techniques can be applied to encrypt and\/or secure the agent communication bus , including one or more of the following: agent bus encryption using shared key for all agents provided and updated by the secure server; agent bus encryption using point to point keys in which the secure server informs the bus and agents of keys and updates as appropriate; agent level encryption using agent to agent shared keys in which the secure server informs agents of the key and updates the key as appropriate; agent level encryption using agent to agent point to point key in which the secure server informs agent of the point to point keys that are required and updates the keys as appropriate; agent level access authorization, which only allows access to the agents that are on the secure authorization list and in which the list is provided by the secure server and signatures are provided by the secure server; UI messages are only analyzed and passed, in which the UI cannot have access to configuration information and cannot issue challenges; agent level heartbeat encryption, which can be point to point or shared key for that agent; control link level heartbeat encryption; TLS (Transport Layer Security) communication protocols; server level heartbeat encryption, which can be point to point or shared key for that secure server; and\/or the access control integrity agent  or heartbeat function can become point to multipoint secure communications hubs.","In some embodiments of the agent communication bus , the design of the agent communication bus depends on the nature of the design embodiments for the agents and\/or other functions. For example, if the agents are implemented largely or entirely in software, then the agent communication bus can be implemented as an inter-process software communication bus. In some embodiments, such an inter-process software communication bus is a variant of D-bus (e.g., a message bus system for inter-process software communication that, for example, helps applications\/agents to talk to one another), or another inter-process communication protocol or system, running a session bus in which all communications over the session bus can be secured, signed, encrypted or otherwise protected. For example, the session bus can be further protected by storing all software (e.g., software components, applications and\/or agents) in secure memory, storing all software in encrypted form in secure memory, and\/or executing all software and communications within a secure execution environment, hardware environment and\/or protected memory space. In some embodiments, if the agents and other functions are designed with a mixture of software and hardware, or primarily with hardware, then the implementation of the bus design will vary, and the principles and embodiments described herein will enable one of ordinary skill in the art to design the specifics of the agent communication bus  to meet a particular set of product and desired functional requirements.","As shown in , an access control integrity agent  collects device information on service policy, service usage or service activity, agent configuration and agent behavior. In some embodiments, the access control integrity agent  also cross checks this information to identify integrity breaches in the service policy implementation and control system. In some embodiments, the access control integrity agent  also initiates action when a service policy violation or a system integrity breach is suspected. In some embodiments, the access control integrity agent  also performs asynchronous or periodic agent checks to verify presence, configuration or proper operation of other agents. In some embodiments, the access control integrity agent  also performs challenge-response sequence verification of other agents.","In some embodiments, the access control integrity agent  obtains service usage or service activity measures from a service monitor agent  and compares one or more first service usage measurement points against one or more second service usage measurement points to verify service policy implementation. For example, as shown in , if the service usage at measurement point IV is inconsistent with measurement point III, which, for example, can indicate, for example, that an unauthorized or unmonitored usage of the access modem (e.g., modems , , ,  or ) is taking place. As another example, as also shown in , if one or more aspects of upstream traffic usage measurement point II, which represents the upstream demand side of policy implementation agent , is inconsistent with upstream traffic measurement point III, which represents delivered traffic from the policy implementation agent , then the policy implementation agent  may not be operating properly. As another example, as also shown in , if service measurement point III and IV indicate that firewall agent  is passing traffic to URLs or IP addresses that are in the blocked policy settings, then a verification error condition can be set for the access control policy. As another example, if the policy controller reports traffic usage statistics that are inconsistent with traffic usage policy settings, then a traffic usage policy verification error may have occurred. As another example, if the service usage counter synchronization information received from the service controller , the device service history  and\/or the central billing system , is compared to the service usage history reported by the service monitor agent and the two are found to be outside of acceptable tolerance limits for the comparison, then there may be a verification error in the service monitor service usage or service activity accounting. There are numerous additional embodiments of such comparisons as described herein and others as will be readily apparent to one of ordinary skill in the art given the principles, design background and specific examples and various embodiments described herein.","In some embodiments, device service policy implementations are verified by comparing various service usage measures used at the device against expected service usage or service activity behavior given the policies (e.g., one or more service policy settings, service profile or service profile settings for network-based access\/services, and\/or service plan or service plan for network-based access\/services). For example, verification is performed based on a measure of total data passed at the device as compared to the service policy for total data usage. For example, verification is performed based on a measure of data passed in a period of time at the device as compared to the service policy for data passed in such a period of time. For example, verification is performed based on a monitoring of communications from the device based on IP addresses as compared to the policy for permissible IP addresses. For example, verification is performed based on a measure of total data passed from the device per IP address as compared to the policy for total data usage per IP address. Other examples include such actual versus policy comparisons based on other measures at\/from\/to the device, such as location, downloads, email accessed, URLs, and\/or any other data, location, application, time or other criteria or any combination of criteria that can be measured for comparing with various policy settings and\/or restrictions.","In some embodiments, the access control integrity agent  monitors agent self-check reports to verify that agents are properly configured. In some embodiments, the access control integrity agent  reports the agent self check reports to the service controller . In some embodiments, the access control integrity agent  performs a role in service usage test transmission, reception and\/or monitoring, with the usage test being tailored to test monitoring or control aspects for any subset of service activities. In some embodiments, the access control integrity agent  performs a role in billing test event generation and\/or monitoring. In some embodiments, the access control integrity agent  checks and reports the result of service usage monitoring verification tests, service usage billing verification tests and\/or transaction billing verification tests.","In some embodiments, the access control integrity agent  receives agent access attempt reports to determine if unauthorized agent access attempts are occurring. In some embodiments, the access control integrity agent  acts as a central secure communications hub for agent to agent or service controller  to agent communication. For example, the access control integrity agent  can be used so that no other software or function can access other agents or so that agents cannot access other agents except through the secure point to multipoint communications hub. In some embodiments, this approach further enhances compromise resistance for the agents. In some embodiments, some or all of the agent communications, including agent to agent or service controller  to agent communications, and possibly including unauthorized attempts to communication with agents, are monitored and logged so that a trace log of some or all agent communications can be maintained. For example, the agent communication trace log can be summarized and\/or compressed for transmission efficiency or regularly reported, such as through the heartbeat function, or the agent communication trace log can be reported only when the service controller  requests the agent communication trace log or when there is a verification error event. As similarly described above, the partitioning of agent functions and server functions is provided herein mainly to aid in disclosing various embodiments but those of ordinary skill in the art will appreciate that other partitioning of agent functions and server functions can be used based on different design choices. For example, the central agent communication hub function is performed in some embodiments by the access control integrity agent , however, in other embodiments that function is performed by the service control device link . For example, when the central agent communication hub function is located in the service control device link , then architecturally the device link can be a single point to multipoint secure communications hub for all agent to agent and service controller  to agent communications. In some embodiments, this approach has certain advantages from a service policy implementation verification or compromise protection robustness perspective, or has certain advantages from a communications protocol efficiency perspective, or simply can be more efficient to implement. It should be noted that in other embodiments described herein the agent to agent and agent to service controller  communications can be multipoint to multipoint, with each agent having the capability to communicate with other agents or the service controller, this communication can be secure, signed or otherwise encrypted or protected in some embodiments and in the open\/clear in others. Also, as discussed in some embodiments, the agents can maintain their own communications or attempted communications log, which can then be reported to the service controller . In some embodiments, the agents implement restrictions on which device components or agents the agents will conduct communications with so that only agents that need to communicate with one another can do so.","In some embodiments, the service control device link  reviews local billing event history and compares such history to billing event reports to verify that a billing agent  is functioning properly (e.g., has not been tampered with or compromised). In some embodiments, the service control device link  cross-checks service usage or service activity against billing event reports from the billing agent  to verify that billing events are properly billing for service usage or service activity. In some embodiments, the service control device link  cross-checks transaction billing process or records against transaction billing reports to ensure that transaction billing events are being properly reported by the billing agent . In some embodiments, the service control device link  determines if one or more agents have been compromised, and if so, initiates a dynamic agent download process to replace any such potentially compromised agent.","In some embodiments, the access control integrity agent  verifies that the service usage counter is reporting service usage or service cost to the user within acceptable limits of accuracy when compared to the service usage reports obtained from the service monitor agent , the service controller , the device service history  and\/or the central billing system . In some embodiments, the access control integrity agent  checks to verify that user privacy filter preferences are being properly implemented. In some embodiments, the access control integrity agent  checks to verify that the user is properly receiving UI warnings regarding service usage or roaming service usage conditions.","In some embodiments, the access control integrity agent  checks to verify that the device is not beginning service usage until it has been authenticated, authorized or granted access to the network. In some embodiments, access control integrity agent  checks with the service controller  or the billing system  to verify that the user or device has a valid service standing and should be admitted to access on the network.","In some embodiments, an Activation Tracking Service (ATS) is provided in which the service monitoring function (e.g., performed by the service monitor agent  and\/or some other agent\/component or combinations thereof on the device) is used in part to determine which access networks are being connected to and to record and\/or report this information. In some embodiments, the ATS is only enabled if the device user approves reporting of access networks connected to by the user device. In some embodiments, the ATS is protected from tampering. For example, the ATS can be hardened, that is, to be more tamper resistant, using a variety of techniques, including any of the following: the ATS can be located (e.g., stored) in secure memory and\/or secure hardware; the ATS can be implemented in the system BIOS, the access modem and\/or another hard to access portion of the device; a second device agent can confirm the presence of the ATS with a report to a network-based server; the second agent or the network server can initiate a reinstall of the ATS if it is missing or is found to be operating improperly; and\/or the ATS can be placed in a secure area of the OS so that it cannot be removed or if removed must be replaced for proper device operation to resume. A variety of other tamper resistance techniques can also be used to protect the ATS from tampering as similarly described herein with respect to other device-based functions\/software components\/agents.","In some embodiments, the access control integrity agent  verifies that ATS software or hardware is present, properly configured or operating properly. In some embodiments, the access control integrity agent  reviews network connection or activity history and compares such to ATS reports to verify activation tracking service reports are occurring properly. In some embodiments, the access control integrity agent  replaces ATS software if it has been removed. In some embodiments, the access control integrity agent  monitors access or compromise of ATS software to determine if it may have been compromised. In some embodiments, the access control integrity agent  reports status of ATS functions.","In some embodiments, the access control integrity agent  scans the local agent execution environment to determine if there are unauthorized accesses to service processor functions, settings or code. In some embodiments, the access control integrity agent  monitors software loading activity, protected memory access or communication with service processor  agents to detect unauthorized changes to service processor software or configuration. For example, the access control integrity agent  can have a local database of potentially malicious elements and compare entries in the database against the elements detected locally. As another example, the access control integrity agent  can communicate a list of some or all of the elements detected locally to the service controller  to augment or take the place of the database comparison function that may be performed locally. In some embodiments, the access control integrity agent  detects new software downloads, installs or invocations and immediately issues an error flag report when potentially malicious software is downloaded, installed or invoked. In some embodiments, the access control integrity agent  scans the local software loading and invocation activity along with a log of other software runtime events and regularly reports this trace so that when an error or compromise event occurs the trace preceding the event can be analyzed to determine the offending software or activity trace that took place to cause the compromise or error. Once the software or activity that caused the compromise is known, it can be entered into a refreshed version of the database that the device and other devices use to detect potentially malicious pre-cursor conditions. Examples of such pre-cursor events include software invocations, software downloads, attempts to uninstall certain agent and\/or application software\/components or OS components, a sequence of memory I\/O events, a sequence of software access events, a sequence of network address or URL communications or downloads or a sequence of access modem I\/O activity. In various other embodiments of the access control integrity agent , the agent performs or (securely) communicates with other software\/hardware device\/network components that perform other well known signature, behavior blocking and\/or intrusion detection identification\/detection and\/or blocking techniques based on the presence of potentially unwanted and\/or potentially or known malicious software and\/or intrusion attempts by unauthorized software and\/or unauthorized users, using, for example, real-time, on access, periodic, and\/or on demand scanning.","In some embodiments, the access control integrity agent  detects or blocks potentially compromising behavior of other software programs\/users attempting unauthorized behavior in the service processor  operating environment. In some embodiments, the access control integrity agent  detects software that is being loaded that has the same or similar name, identification, memory location or function as one or more of the service processor  agents. In some embodiments, the access control integrity agent  blocks operation or loading of such software. In some embodiments, the access control integrity agent  detects or blocks unauthorized access of service processor  protected memory. In some embodiments, the access control integrity agent  verifies configuration and operation of secure service downloader . In some embodiments, the access control integrity agent  monitors network and I\/O activity to detect potentially compromising events, such as a program that is downloaded from known detrimental or potentially suspect IP addresses or URLs or a program that accesses certain IP addresses or URLs. In some embodiments, the access control integrity agent  scans of the service processor operating environment are recorded and kept for a period of time, and if a service policy verification error occurs, then the scans immediately prior to the error are analyzed or reported to the service controller  for analysis. In some embodiments, such scans are regularly reported to the service controller  without the presence of service policy verification error conditions.","In some embodiments, the access control integrity agent  requests a dynamic agent download of certain critical service processor functions, including in some cases the access control integrity agent  on a periodic basis, or on a periodic basis when network access activity is not required or minimal.","In some embodiments, the access control integrity agent  determines if a threshold has been surpassed for a max usage trigger for ambient and\/or other services that should not be using significant amounts of data (e.g., based on the type of device and\/or service profile settings).","In some embodiments, the access control integrity agent  determines if verification errors exist in one or more of the verification process embodiments and, in some embodiments, reports errors immediately or in the next agent heartbeat to the service controller . In some embodiments, any number of results from the above checks, monitoring activities, reports or tests are reported to the service controller .","In some embodiments, a policy control agent  receives policy instructions from the service controller  and\/or the user via the billing agent  and adapts device service policy settings (e.g., instantaneous device service policy settings) in one or more of the following agents\/components: a policy implementation agent , the modem firewall  and\/or an application interface agent . As shown in , the modem firewall  is in communication with a modem driver , which is in communication with the agent communication bus  and access network . As shown with respect to access network , a central billing server , an access network AAA server  and device server history  are also provided. As shown, the Internet  is accessible via the access network  and firewall , from which device  can then access various Internet services .","In some embodiments, the policy control agent  adapts low level service policy rules\/settings to perform one or more of the following objectives: achieve higher level service usage or cost objectives, reduce network control channel capacity drain, reduce network control plane server processing bandwidth, and\/or provide a higher level of user privacy or network neutrality while satisfying service usage or service activity objectives. In some embodiments, the policy control agent  performs a policy control function to adapt instantaneous service policies to achieve a service usage objective. In some embodiments, the policy control agent  receives service usage information from the service monitor agent  to evaluate service usage history as compared to service usage goals. In some embodiments, the policy control agent  uses service monitor  service usage or service activity history and various possible algorithm embodiments to create an estimate of the future projected service usage. In some embodiments, the policy control agent  uses a future projection of service usage to determine what service usage or service activity controls need to be changed to maintain service usage goals. In some embodiments, the policy control agent  uses service usage history to perform a service usage or service activity analysis to determine the distribution of service usage across service usage elements within categories, such as usage by application, usage by URL, usage by address, usage by content type, usage by time of day, usage by access network, usage by location, and\/or any other categories for classifying service usage. In some embodiments, the policy control agent  uses the service usage distribution analysis to determine which service usage elements or service activities are creating the largest service usage (e.g., if e-mail, social networking, or multimedia\/online video application categories are creating the largest service usage).","In some embodiments, the policy control agent  is instructed, for example, by the user, through billing agent  to perform a service control algorithm, such as traffic shaping or download management, to manage service usage or service activities to assist the user in controlling service costs. As a basic example of such a traffic shaping algorithm, the traffic shaping algorithm can simply reduce traffic speed for all applications and traffic types successively until the service usage projections are within service usage limits for the present service billing period. To illustrate an algorithm that is more sophisticated and provides the advantage of leaving many service usage elements or service activities unaffected while only controlling down usage on the most aggressive service usage elements or service activities, the traffic shaping algorithm can identify the highest traffic usage applications and\/or websites and successively reduce traffic speed just for the highest usage applications and\/or websites until the service usage projections are within service usage limits for the present service billing period. These examples thereby reduce network traffic for the user in accordance with the user's service usage objectives while maintaining overall satisfactory service usage experience for the user in a manner that satisfies various net neutrality requirements (e.g., the traffic throttling of certain applications\/websites based on user input in which categories based on service usage history are selected by the user, for example, a certain application may be using 90% of the aggregate traffic usage). For example, adaptive throttling algorithms can be used to throttle application traffic that the user requests throttling, such as recursively throttling of the specified application traffic (e.g., to denigrate the traffic usage associated with that application and thereby reduce overall service data usage).","In some embodiments, the policy control agent  adjusts service policy based on time of day. In some embodiments, the policy control agent  obtains a measure of network availability and adjusts traffic shaping policy settings based on available network capacity. In some embodiments, the policy control agent  automatically and dynamically adjusts service policy based on one or more other service policy settings, the service profile and\/or the service plan associated with the device and\/or user of the device.","In some embodiments, various lower level service policy implementation embodiments are combined with a higher level set of service policy supervision functions to provide device-assisted verifiable network access control, authentication and authorization services.","In some embodiments, device-based access control services are extended and combined with other policy design techniques to create a simplified device activation process and connected user experience referred to herein as ambient activation. In some embodiments, ambient access generally refers to an initial service access in which such service access is in some manner limited, such as where service options are significantly limited (e.g., low bandwidth network browsing and\/or access to a specific transactional service), limited bandwidth, limited duration access before which a service plan must be purchased to maintain service or have service suspended\/disabled or throttled or otherwise limited\/reduced\/downgraded, and\/or any other time based, quality based, scope of service limited initial access for the network enabled device. In some embodiments, ambient activation is provided by setting access control to a fixed destination (e.g., providing access to a portal, such as a web page (e.g., for a hotspot) or WAP (Wireless Application Protocol) page, that provides the user with service plan options for obtaining a service plan for the user desired access, such as the service plan options for data usage, service types, time period for access (e.g., a day pass, a week pass or some other duration), and costs of service plan(s)). In some embodiments, service data usage of the ambient activated device is verified using IPDRs (e.g., using the device ID\/device number for the device  to determine if the device has been used in a manner that is out of plan for the service plan associated with the device , such as based on the amount of data usage exceeding the service plan's service data usage limits, out of plan\/unauthorized access to certain websites, and\/or out of plan\/unauthorized transactions). In some embodiments, service data usage of the ambient activated device is verified by setting a maximum data rate in the policy control agent  and if\/when it is determined that the device is exceeding a specified data rate\/data usage, then the service data usage is throttled accordingly. In some embodiments, various other verification approaches are used for ambient activation purposes.","In some embodiments, the policy control agent  (and\/or another agent\/component of the service processor  and\/or service controller ) performs a service control algorithm to assist in managing overall network capacity or application QoS (Quality of Service). In some embodiments, the policy control agent  (and\/or another agent\/component of the service processor ) performs an access network selection algorithm to determine which access network to connect to based on connection options and determined strengths of available wireless networks, network preference or security settings, service usage cost based network preferences, and\/or any other criteria.","Accordingly, as described herein with respect to various embodiments, service usage or service activities can be measured by various agents at various different measurement points, which provides for a more robust verification and integrity of device-based services communication. For example, it is much less likely and more difficult to compromise and\/or spoof multiple agents. As described herein, various verification and integrity checks are performed, including, for example, network-based service usage measurement (e.g., using IPDRs); heartbeat monitoring; agent based heartbeat (e.g., challenge\/response queries); agent operating environment protection; monitoring agent communications; agent cross-checks; comparing device-based and network-based measures (e.g., service usage measures); dynamic software\/agent download; and\/or any combination of these and various other verification\/integrity check techniques described herein and\/or apparent from the various embodiments described herein.","In some embodiments, the device  is capable of connecting to more than one network and device service policies are potentially changed based on which network the device is connected to at the time. In some embodiments, the network control plane servers detect a network connection change and initiate the service policy implementation established for the second network. In some embodiments, the device-based adaptive policy control agent, as described herein (e.g., policy control agent ), detects network connection changes and implements the service policies established for the second network.","In some embodiments, when more than one access network is available, the network is chosen based on which network is most preferred according to a network preference list or according to which network that optimizes a network cost function. For example, the network preference list can be pre-established by the service provide and\/or the user and\/or later modified\/adjusted by either the service provider and\/or the user. For example, the cost function can be based on determining a minimum service cost, maximum network performance, whether or not the user or device has access to the network, maximizing service provider connection benefit, reducing connections to alternative paid service providers, and\/or any other cost related criteria for network selection purposes.","In some embodiments, the device  detects when one or more preferred networks are not available, implements a network selection function or intercepts other network selection functions, and offers a connection to the available service network that is highest on a preference list. For example, the preference list can be set by the service provider, the user and\/or the service subscriber. In some embodiments, a notification is provided to the device\/user when the device is not connected to a network (e.g., indicating in a pop-up\/bubble or other UI based display a notification, such as \u201cYou are not connected to the network. Click here to learn more, get free trial, use a session, sign-up for service\u201d). In some embodiments, the notification content can be determined based on usage service patterns, locally stored and\/or programmable logic on the device and\/or a server (e.g., device reports that user is not connected and WWAN is available). Decisions on what bubble to present when may be in pre-stored logic on device.","In some embodiments, service policies are automatically adapted based on the network to which device  is connected. For example, the device can be a cellular communication based device connected to a macrocell, a microcell, a picocell, or a femtocell (e.g., femtocells generally provide a low power, small area cellular network used, for example, in homes or offices, which, for example, can be used as an alternative to Wi-Fi access). In some embodiments, service monitoring agent  and\/or billing agent  modify service usage counting and\/or billing based on whether the device is connected to a macrocell, microcell, picocell or femtocell. In some embodiments, the device recognizes which type of network it is currently connecting to (e.g., looking up in a local or network table for the current base station connected to, and\/or the information is broadcast to the device upon the connection with the base station), that is, whether it is a macrocell, microcell, picocell or femtocell. In other embodiments, the device does not recognize which type of network it is currently connected to, but reports its current base station, and the network uses a network lookup function to determine which type of network it is connected to. In some embodiments, the device adjusts the billing based on the type of network it is connected to, or in other embodiments, the device calculates an offset to such billing based on the type of network it is connected to, and\/or in other embodiments, the device records such service usage associated with the type of network it is connected to and the network billing can adjust the billing accordingly. For example, the billing can be lower for service data usage over a femtocell versus a macrocell. In some embodiments, service policies are adjusted based on the type of network that the device is connected, such as billing, user notification, data usage\/bandwidth, throttling, time of day, who owns the cellular network connection (e.g., user's home femtocell, or user's work femtocell, or a commercial business's femtocell like a coffee shop or any other common area like an airport) and\/or any other service policy can be different for a femtocell connection (or for any other type of connection, such as a macrocell, microcell, or picocell). In some embodiments, the local service usage counter is adjusted based on the type of network (and\/or based on the time of day of such service activity) that the device is connected, such as billing, user notification, data usage\/bandwidth, and\/or any other service policy can be different for a femtocell connection (or for any other type of connection, such as a macrocell, microcell, or picocell). In some embodiments, the service policies and\/or billing policies are adjusted based on network congestion.","In some embodiments, if adaptive service policy control is not required, then the policy control agent  can simply pass instantaneous service policy settings directly to the agents responsible for implementing instantaneous service policies.","In some embodiments, a policy implementation agent  implements traffic shaping and QoS policy rules for the device . In some embodiments, the policy implementation agent  provides a firewall function. In some embodiments, the policy implementation agent  performs traffic inspection and characterization. In some embodiments, packet inspection is aided by literal or virtual application layer tagging while in other embodiments packet inspection is performed entirely in\/by the policy implementation agent . In some embodiments, the policy implementation agent  accepts service policy implementation settings from the policy control agent  or directly from the service controller . More detail on specific embodiments for the policy implementation agent  is provided below with respect to the figures associated with communication stack and communication protocol flow.","In some embodiments, the burst size, buffer delay, acknowledgement delay and drop rate used in upstream and downstream traffic shaping are optimized with the goal of reducing access network traffic overhead, and excess capacity usage that can result from mismatches in traffic transmission parameters with the access network MAC and PHY or from excess network level packet delivery protocol re-transmissions. In some embodiments, the application interface agent  is used to literally tag or virtually tag application layer traffic so that the policy implementation agent(s)  has the necessary information to implement selected traffic shaping solutions. As shown in , the application interface agent  is in communication with various applications, including a TCP application , an IP application , and a voice application .","In some embodiments, downstream literal or virtual application tagging are delayed until a traffic flow passes through the service policy implementation functions and to the application interface function where the service flow is then identified and associated with the underlying traffic and application parameters, and the literal or virtual tag is then communicated to the first policy implementation function or service monitoring function in the downstream traffic processing stack. In some embodiments, prior to being associated with a literal or virtual tag, the traffic flow is allowed to pass with no traffic shaping, and once the traffic flow is identified and tagged, the appropriate traffic shaping is applied. In some embodiments, a set of traffic shaping policy parameters are applied to the unidentified traffic flow before the flow is identified, and then the traffic shaping policy for the flow is updated when the flow is tagged. In some embodiments, the traffic flow can be blocked at the application interface agent even before the tag is passed to the policy implementation functions if it is found to be associated with traffic parameters that are blocked by policy once packet processing, framing and encryption are removed.","In some embodiments, a service monitor agent  records and reports device service usage or service activities of device . In some embodiments, service usage history is verified by a number of techniques including verifying against network-based service usage history (e.g., device service history ) and the various service policy implementation techniques as described herein.","In some embodiments, the service monitor agent  includes the capability to filter service usage history reporting with the decision on which aspects of service history to report being determined by policies including possibly privacy policies defined by the device user or control plane servers in the network. In some embodiments, the service monitor agent  monitors and possibly records or reports Customer Resource Management (CRM) information such as websites visited, time spent per website, interest indications based on website viewing, advertisements served to the device, advertisements opened by the user, location of the user, searches conducted by the user, application usage profile, device user interface usage history, electronic commerce transactions, music or video files played, applications on device, and\/or when the user is actively working or playing or inactive. In some embodiments, to protect the privacy of this user CRM information, the user is provided with options on how much of the information to share and the user's response to the options are recorded and used to determine the filtering policy for how much of the CRM data to report (e.g., CRM filter level options selected by the user via the device UI and\/or via various service plan or service profile or service policy options) and how much to suppress or to not even monitor\/record\/store in the first place. In some embodiments, to protect the privacy of this user's GPS\/location tracking related information, the user is provided with options on how much of the information to share and the user's response to the options are recorded and used to determine the filtering policy for how much of the GPS\/location tracking related data to report (e.g., GPS\/location tracking filter level options) and how much to suppress or to not even monitor\/record\/store in the first place. In some embodiments, the service processor  allows the user to provide feedback on the user's preferences, such as for privacy\/CRM data to report. In some embodiments, the user can also specify their preference(s) for notification (e.g., related to service usage\/cost, traffic reporting and other service usage\/monitored information) and\/or service controls. In some embodiments, the service monitor agent  observes and possibly records or reports service usage categorized by network possibly including roaming networks, paid service networks or free service networks. In some embodiments, the service monitor agent  observes and possibly records or reports service usage categorized by sub-accounts for various types of traffic or various types of network.","For example, service monitor reports can be provided to the service controller . Service is monitored through various embodiments that can involve service usage logging or traffic inspection and usage logging at the application level, various levels in the networking communication stack or the access modem. Some embodiments involve multiple levels of service or traffic measurement at various levels in the communications stack as described further below.","In some embodiments, service or traffic monitoring includes monitoring one or more of the following: traffic associated with one or more users; traffic downstream and\/or upstream data rate; total traffic received and\/or transmitted over a period of time; traffic transmitted and\/or received by IP addresses, domain names, URLs or other network address identifiers; traffic transmitted and\/or received by email downloads or uploads; traffic transmitted and\/or received by an application; traffic transmitted and\/or received by network file transfers; traffic transmitted and\/or received by file download or upload content types; traffic transmitted and\/or received by mobile commerce transactions; traffic transmitted and\/or received by one or more time periods; traffic transmitted and\/or received by differing levels of network activity and network capacity availability; traffic transmitted and\/or received by one or more delivered levels of quality of service; traffic transmitted and\/or received by software downloads; traffic transmitted and\/or received by application downloads; traffic transmitted and\/or received by one or more activities associated with the service control plane link or other network related functions, or traffic that may not directly result in service usage or service activity that the user values or desires; traffic transmitted and\/or received to support one or more service provider third-party service partner offerings; software usage history; application usage history; device discovery history for UI components, applications, settings, tutorials; ads served history; ads visited history; and\/or device location history.","In some embodiments, some or all of the service usage monitoring occurs at the application layer. In some embodiments, the service monitor agent  implements traffic inspection points between the applications and the networking stack application interface, such as the sockets API. In other embodiments, the application interface agent  performs traffic inspection and reports the results to the service monitor agent . Traffic inspection can be accomplished in several ways, including, for example, implementing a T-buffer at each socket connection and feeding the side traffic into a traffic flow analyzer, which in combination with a mapping of application to socket provides much of the information listed above. In cases in which it is necessary to obtain traffic information from the application itself, some embodiments call for the application to be adapted to provide the information to either the application interface agent  or the service monitor agent . As an example, the application interface agent  or the service monitor agent  can monitor and decode advertisements downloaded via HTTP, but if the browser and HTTP server employ security above the sockets protocol stack layer then the application interface agent can communicate with the browser via a java applet or some other inter-process communication method. In some embodiments, the service monitor agent , the billing agent  and\/or the policy control agent  (or some other software or hardware function on the device) can monitor and\/or control (e.g., allow, block and\/or replace) advertisement traffic flow into the device. In some embodiments, the monitoring and control of advertisement traffic flow into the device is also used for bill by account purposes (e.g., charges, such as service charges, billed to the advertiser, sponsor, and\/or service or transactional service provider).","In some embodiments, some or all of the service usage monitoring occurs below the application interface for the networking stack. In this case, some portion of the information listed above may not always be available due to encryption applied at the higher layers and\/or the computational costs associated with performing deep packet inspection on mobile devices.","In some embodiments, the service monitor agent  is also monitors the operating software install or loading systems, and\/or otherwise monitors software installs or loads and\/or software uninstalls\/deinstallations.","Some of the information above may be considered by some users, advocacy groups or agencies as customer sensitive personal information. Simply sending the above information to the network for unspecified purposes may not, therefore, be acceptable for some service providers. However, if the user provides specific approval (e.g., informed consent) for the device, network or service provider to use some or all of the information that may be sensitive for specified purposes, then the user can control the level of information that is used and the purpose the information is used for. Accordingly, various embodiments described herein provide the user with control of what information is used and the purposes it is used for thereby allowing the user adequate control of any such sensitive information. In some embodiments, information that is thought to perhaps be sensitive and is reported to the network must first receive user approval for the reporting. Some basic information is generally not considered sensitive and is necessary for certain basic service provider needs. For example, total data transmitted and\/or received, traffic downstream and\/or upstream speed, overall traffic usage by time of day are generally not considered private from the service provider's perspective and are necessary in many basic service policy implementations. As additional examples, perhaps other service usage history, such as total traffic email downloads and uploads but not the type of files or any specifics about the email traffic, the total web browsing traffic but nothing specific about the sites visited or content viewed, total file transfer traffic but not the type of files transferred or the addresses involved in the transfer, and other examples may not be viewed as private and, in some embodiments, provide valuable information for the service provider to manage services. Conversely, information such as websites visited, content viewed, mobile commerce transactions completed, advertisements visited, GPS location history and other service usage history the service monitor is capable of recording may be sensitive or private for some users and would thereby benefit from the various embodiments that provide enhanced user control of the reporting of such potentially sensitive or private data. It should also be appreciated that there is an inherent advantage to implementing traffic monitoring, traffic, service monitoring or service control on a device, because it is not necessary to report sensitive information to the network to accomplish many of these service policy implementation objectives.","In some embodiments, the service monitor agent  assists in virtual application tagging of traffic flows through the networking stack policy implementation by tracking the virtually tagged packets through the stack processing and communicating the flow tags to the service policy implementation agent(s) . In some embodiments, the service monitor agent  maintains a history and provides reports or summary reports of which networks in addition to the networks controlled by the service controller  to which the device has connected. In some embodiments, this network activity summary includes a summary of the networks accessed, activity versus time per connection, and\/or traffic versus time per connection. In some embodiments, the traffic reports that go to the network, possibly to service controller , billing system  and\/or device service history , are first filtered according to rules defined by user preference selection at the time of service activation (e.g., service plan\/service plan option selection), time of first device use, at a time the user selected the option on the service UI or at a time the user chose to change the option on the service UI or some other time\/mechanism allowing for user preference selection.","In some embodiments, the service monitor agent  monitors application usage (e.g., which application the user executes on the device , such as e-mail applications, web browsing applications and\/or media content streaming applications). In some embodiments, the service monitor agent  monitors multimedia file usage (e.g., based on multimedia file type and\/or based on specific multimedia files, such as specific movies and\/or songs). In some embodiments, the service monitor agent  monitors the device user interface, application, and content discovery history (e.g., monitoring which applications\/content the user accesses from the device, including monitoring the pattern by which the user accesses such applications\/content, such as how the user navigates the user interface on the device to access such applications\/content and maintaining such patterns and history, such as which icons the user access on a home page, secondary or other portion\/mechanism on the device for accessing various applications\/content). In some embodiments, the service monitor agent  monitors advertisements provided to the user on the device . In some embodiments, the service monitor agent  monitors advertisements viewed (e.g., accessed, such as by clicking on a web advertisement) by the user on the device . In some embodiments, the service monitor agent  monitors GPS\/location information for the device . As will be appreciated by those of ordinary skill in the art, the service monitor agent  can monitor a wide variety of activities performed by the device\/user of the device and\/or based on other information related to the device  such as GPS\/location information. As described herein, in some embodiments, the user of the device  can also specify which activities that the user authorizes for such monitoring (e.g., the user may prefer to not allow for such GPS\/location monitoring).","In some embodiments, the application interface agent  provides an interface for device application programs. In some embodiments, the application interface agent  identifies application level traffic, reports virtual service identification tags or appends literal service identification tags to assist service policy implementation, such as access control, traffic shaping QoS control, service type dependent billing or other service control or implementation functions. In some embodiments, the application interface agent  assists with application layer service usage monitoring by, for example, passively inspecting and logging traffic or service characteristics at a point in the software stack between the applications and the standard networking stack application interface, such as the sockets API. In some embodiments, the application interface agent  intercepts traffic between the applications and the standard network stack interface API in order to more deeply inspect the traffic, modify the traffic or shape the traffic (e.g., thereby not requiring any modification of the device networking\/communication stack of the device OS). In some embodiments, the application interface agent  implements certain aspects of service policies, such as application level access control, application associated billing, application layer service monitoring or reporting, application layer based traffic shaping, service type dependent billing, or other service control or implementation functions.","In some embodiments, application layer based traffic monitoring and shaping can be performed as described below. The traffic from each application can be divided into one or more traffic flows that each flow through a traffic queue, with each queue being associated with one or more additional classifications for that application (e.g., the application can be a browser that is associated with multiple queues representing different destinations or groups of destinations it is connected to, with each destination or group of destinations having potentially different access control or traffic control policies, or the application can be associated with different content types or groups of content types with each content type having different queues, the application might be an email program with email text traffic going to one queue and downloads going to another with different policies for each). In some embodiments, queues are formed for all applications or groups of applications that are associated with one or more traffic parameters such as destination, content type, time of day or groups of applications can be similarly assigned to different queues. The functions performed by the application layer queues can be similar to the functions described for the policy implementation agent, such as pass, block, buffer, delay, burst in order to control the traffic or network access associated with the queue. The drop function can also be implemented, such as for application layer protocols that include reliable transmission methods, but if the application layer protocol does not involve reliable retransmission of lost information this can result in lost data or unreliable communication which may be acceptable in some cases. The manner in which the queues are controlled can be constructed to result in a similar approach for controlling services or implementing service activity control similar to the other embodiments described herein, including, for example, the policy control agent  implementing an higher layer of service control to achieve a higher level objective as discussed herein.","In some embodiments, the application interface agent  interacts with application programs to arrange application settings to aid in implementing application level service policy implementation or billing, such as email file transfer options, peer to peer networking file transfer options, media content resolution or compression settings and\/or inserting or modifying browser headers. In some embodiments, the application interface agent  intercepts certain application traffic to modify traffic application layer parameters, such as email file transfer options or browser headers. In some embodiments, the application interface agent  transmits or receives a service usage test element to aid in verifying service policy implementation, service monitoring or service billing. In some embodiments, the application interface agent  performs a transaction billing intercept function to aid the billing agent  in transaction billing. In some embodiments, the application interface agent  transmits or receives a billing test element to aid in verifying transaction billing or service billing.","In some embodiments, a modem firewall  blocks or passes traffic based on service policies and traffic attributes. In some embodiments, the modem firewall  assists in virtual or literal upstream traffic flow tagging. Although not shown in , in some embodiments, the modem firewall  is located on either side of the modem bus and in some embodiments it is advantageous to locate it on the modem itself.","In some embodiments, the billing agent  detects and reports service billing events. In some embodiments, the billing agent  plays a key role in transaction billing. In some embodiments, the billing agent  performs one or more of the following functions: provides the user with service plan options, accepts service plan selections, provides options on service usage notification policies, accepts user preference specifications on service usage notification policies, provides notification on service usage levels, provides alerts when service usage threatens to go over plan limits or to generate excess cost, provides options on service usage control policy, accepts choices on service usage control policy, informs policy control agent  of user preference on service usage control policy, provides billing transaction options and\/or accepts billing transaction choices. In some embodiments, the billing agent  interacts with transaction servers (e.g., open content transaction partner sites ) to conduct ecommerce transactions with central billing .","In some embodiments, service processor  includes one or more service usage or service activity counters. For example, the service monitor agent , billing agent  or a combination of these agents and\/or other agents\/components of service processor  can include such a local service usage counter(s) for the device . In some embodiments, a service usage counter monitors service usage including data usage to\/from the device  with the access network . In some embodiments, the service usage counter periodically, in response to a user request, in response to a service processor  agent's request (e.g., the billing agent , the policy control agent , or another agent of service processor ), in response to the service controller , and\/or in response to the central billing  (e.g., for billing purposes and\/or for storing in the device service history ), provides a service usage report, including monitored service usage for the device . In some embodiments, the service usage counter periodically, or in response to a request, synchronizes the service usage counter on the device  with a network (and\/or billing) service usage counter, such as that maintained potentially at central billing . In some embodiments, service processor  utilizes the service usage counter to provide a service usage projection. In some embodiments, service processor  utilizes the service usage counter to provide a service usage cost estimate. In some embodiments, service usage projections from policy control agent  are used to estimate the projected future service usage if user service usage behavior remains consistent. In some embodiments, service processor  utilizes the service usage counter to provide a cost of service usage, and the service processor  then periodically, or in response to a request, synchronizes the cost of service usage with, for example, the central billing . In some embodiments, the service processor  utilizes the service usage counter to determine whether the user is exceeding and\/or is projected to exceed their current service plan for data usage, and then various actions can be performed as similarly described herein to allow the user to modify their service plan and\/or modify (e.g., throttle) their network data usage. In some embodiments, the service usage counter can support providing to the user the following service usage related data\/reports: service usage, known usage and estimated usage, projected usage, present costs, projected costs, cost to roam, cost to roam options, and\/or projected roaming costs. For example, including a local service data usage counter on the device  allows the service processor  to more accurately monitor service data usage, because, for example, network (and\/or billing) service usage counters may not accurately also include, for example, control plane data traffic sent to\/from the device  in their monitored service data usage count.","In some embodiments, verifiable device-based service billing solutions are provided. For example, as described herein, various device-based service billing solutions can include a wide range of verification techniques to ensure that the device is properly reporting service billing events (e.g., to verify\/ensure that the service billing is not malfunctioning and\/or has not been tampered with\/compromised such that it is not accurately or timely providing service billing information). As described herein, service billing generally refers the billing for one or more services for a device, such as device  (e.g., email service billing for data usage associated with received\/sent email related data over the access network , web browsing service billing for data usage associated with received\/sent web browsing related data over the access network  and\/or any other network-based service, and\/or any transactional based services, such as for multimedia content purchases or other transactions).","In some embodiments, verifiable device-based service billing is provided by sending dummy (\/test) billing events, such as having an access control integrity server  of the service controller  instruct the access control integrity agent  to send a dummy (\/test) billing event to the billing agent . If the billing agent does not then send the expected report, which should reflect the dummy (\/test) (or fails to timely send any report), then the system can verify whether the billing process is working properly. In addition, a dummy (\/test) transaction can be used to verify transaction based billing through a variety of approaches (e.g., the access control integrity agent  can similarly send a dummy (\/test) transactional billing event to the billing agent  as a test to determine whether the billing agent  then provides the expected report reflecting that dummy (\/test) transaction). For example, the test billing events can be trapped by a device-assisted billing mediation server and removed from the user account billing.","In some embodiments, verifiable device-based service billing is provided by sending one or more data bursts to the device to confirm that data was received and to confirm that the service monitor agent  properly logged the data burst(s) in the local service usage or service activity counter. In some embodiments, data bursts can be used to verify data throttling (e.g., if the device has exceeded service data usage limits and\/or is approaching such limits such that service data usage should be throttled, then sending data bursts can be used to verify whether the expected throttling is properly being performed on the device). In some embodiments, verifiable device-based service billing is provided by submitting requests to connect to an unauthorized service\/website to verify if that unauthorized service usage is properly blocked. In some embodiments, verifiable device-based service billing is provided by submitting requests to perform an unauthorized transaction to verify if that unauthorized transaction is properly blocked.","In some embodiments, verifiable device-based service billing is provided by verifying device service activities relative to IPDRs for the device. In some embodiments, the IPDRs for the device (possibly in a modified format) are periodically and\/or upon request sent to the device, as described herein. For example, IPDRs for the device can be compared to the device's local service data usage counter and\/or to the service plan for the device to determine if the overall service data usage limit has been exceeded, whether out of plan\/unauthorized\/unrecorded websites\/other services have been performed by the device, whether service plan\/profile bandwidth limits have been exceeded, whether out of plan\/unauthorized\/unrecorded transactions have been performed (e.g., verifying IPDR transaction logs, assuming such are included in the IPDRs, with the local transaction logs of the device to determine, for example, whether the local device records indicate that fewer than the network recorded number of content downloads, such as downloaded songs, were purchased), and\/or whether any other activities verifiable based on a comparison of IPDRs indicate that the device has been used in any manner that is out of or exceeds the service plan\/profile for the device.","In some embodiments, device-based service billing includes recording billing option response history. For example, this approach can be particularly important for service plan overage conditions (e.g., when the use of the device is exceeding the service plan associated with the device in some manner, such as service data usage, bandwidth, service or transaction access and\/or in some other manner). In some embodiments, in a service plan overage condition, the user is requested to confirm that user has acknowledged notification of service plan overage, such as via the user interface . In some embodiments, such service plan overage acknowledgements require that the user enter a unique identification to validate authorization by the user identity associated with the device (e.g., another type of verification mechanism, in the event a device is stolen or being used by someone other than the authorized user of the device, then that unauthorized user would not be able to confirm the service plan overage acknowledgement, and appropriate actions can then be taken, such as throttling, quarantining or (temporarily) suspending service\/network access). In some embodiments, if the device is compromised\/hacked (e.g., by the user of the device), and the device is used in a manner that results in a service usage overage (e.g., determined based on device-assisted service usage monitoring, and\/or network-based service usage monitoring using IPDRs\/CDRs), then the billing system determines billing for such service usage overage costs. This overage billing can be initiated by the device  (e.g., service processor ), the service controller , the billing system , the AAA , or some other network function. In some embodiments, if the device is compromised\/hacked (e.g., by a user of the device), and the device is used in a manner that results in a service usage overage, one or more of the following actions is taken: the user is notified, the user is required to acknowledge the notification, the device traffic is sent to SPAN (or similar traffic sampling and analysis function), and\/or the device is flagged for further analysis.","In some embodiments, device-based service billing includes an option to bill by account, such as to bill different service activities and\/or transactions to a specified account (e.g., other than the user's account associated with the general service plan for the device). For example, bill by account can provide for billing according to application, content type, website, transaction, network chatter (e.g., heartbeat communications and\/or other network traffic that is used by, for example, the central\/service provider to generally maintain network access for the device), and\/or transaction partner sponsored activities and then report such bill by account information for billing mediation\/reconciliation. For example, a bill by account report can be sent by billing agent  from the device to central billing  (e.g., as a billing event); or alternatively, sent to an intermediate server\/aggregator, which can then reformat and send the reformatted report to central billing  (e.g., providing the billing report in a format required by central billing ); or alternatively, sent to a mediation server, which can re-compute the billing based on the bill by account report (e.g., offset the bill based on network chatter, transaction based billing, transaction partner sponsored activities, content providers, website providers and\/or advertising providers) and then send the recomputed (and potentially reformatted) report to central billing .","In some embodiments, one or more of the mediation\/reconciliation functions for device-assisted billing, device generated billing events, device generated bill by account events and device generated open transaction billing events can be implemented in the service controller  (e.g., the billing event server ) or in another function located in the billing system  or elsewhere. This billing mediation server function accepts the device-based billing events discussed immediately above, reformats the billing events into a format accepted and recognized by the billing system, mediates the billing event information to remove service usage billing from the user account and place it in other bill by account categories as appropriate according to the bill by account mediation rules, adds other billing events for service usage or transactions to the user account as appropriate according to the device-based billing rules, and then applies the information to the billing information the user account to correct or update the account.","For example, a bill by account can allow for a website provider, such as Google or Yahoo, to pay for or offset certain account usage for web browsing, web based searching, web based email, or any other web based or other service usage activities, which may also be based (in whole or in part) on the activities performed by the user on such transactional services (e.g., based on advertisement viewing\/accessing or click-through activities by the user, by which an advertisement business model used by such website providers directly or indirectly supports such service account subsidies). As another example, a bill by account can allow for an advertiser to pay for or offset certain account usage for viewing and\/or accessing (e.g., clicking through) a web placed advertisement or other advertisement sent via the network to the device. As yet another example, various network chatter (e.g., heartbeat related network and other network chatter related service data usage) can be assigned to a dummy account and such can be used to offset the bill and\/or used for tracking the data usage for such activities for the device. In another example, service data usage for access to a transactional service, such as a multimedia content download service (e.g., music, eBook, music\/video streaming, and\/or movie or other multimedia content download service), or an online shopping site (e.g., Amazon, eBay or another online shopping site), can be billed to a transactional service account assigned to a transactional service partner that sponsors access to that sponsor's transactional service, thereby allowing that transactional service partner to pays for or offset (e.g., subsidize) the account usage for such activities, which may also be based (in whole or in part) on the transactions actually performed by the user on such transactional services (e.g., based on the volume\/cost of the multimedia service download purchases by the user and\/or online activities).","In some embodiments, device-based service billing includes recording billing events on the device and then reporting such billing to the network (e.g., central billing ). In some embodiments, device-based service billing includes reporting service usage events and\/or applying cost look-up and logging\/reporting service billing updates. For example, this allows for reporting not only service usage but also cost of such service usage to the user via the user interface of device . Also, for example, the cost of such service usage can also be reported to the billing server. In some embodiments, device-based service billing includes reporting service usage to the network, and the network determines the cost for such service usage.","In some embodiments, billing information for roaming partners is provided. For example, a roaming server can include a roaming service cost data table for roaming service partners. In this example, when the device (e.g., device ) connects to a roaming network provided by a roaming service partner, then the device can also receive the roaming service data rate based on the roaming service cost data table provided by the roaming server. Alternatively, the roaming server can send the roaming service cost data table (or a modified format of the same) to the device thereby allowing the device to determine the costs for such roaming network service usage or service activity. As described herein, the device can also automatically use a roaming service profile when connecting to the roaming network service and\/or the user can be notified of the roaming service profile options based on the roaming service data costs and then select the desired roaming service profile accordingly.","In some embodiments, the user is provided with a list of service costs based on locally stored roaming table and a search of available roaming partners that the device  detects and can connect to. In some embodiments, the user is provided with a projected cost per day for one or more roaming service provider options based on typical service usage history and the cost for each service provider. In some embodiments, the user is provided with a set of options for service usage notification, controlling or throttling service usage and\/or cost while roaming (e.g., using the service notification and cost control techniques as similarly discussed herein but applied to the roaming network). In some embodiments, these controls are set by a VSP (or, e.g., an IT manager using VSP functions). In some embodiments, roaming tables are updated periodically in the background while on a home network (or other low cost network) and cached. In some embodiments, cache updates occur based on fixed time period (e.g., late at night when updates are less expensive due to network inactivity). In some embodiments, the roaming partner cost table cache updates are done whenever connected to a desirable network that is not as expensive or bandwidth constrained (e.g., at home, work, or off the WWAN). In some embodiments, updates occur at time of day that network is not busy. In some embodiments, updates occur based on network push when roaming table is changed (e.g., one or more of the roaming partners changes the rate). In some embodiments, the service cost to update the roaming service cost table is charged to bill by account and possibly not charged to end user. In some embodiments, the roaming service center is provided as a service that is paid for (e.g., potentially bill by account tracks all related costs). For example, this type of roaming cost control can be provided as a service through central provider, MVNO, roaming partner provider, VSP or as a third-party application not associated with any service provider (e.g., IT manager). For example, the controls for how to update cache, set service control policies, and other controls can be defined by any number of VSP entities including the user through a website service.","In some embodiments, a roaming service center is provided as a service in which, for example, the user is provided with a list of service costs based on a locally stored (or remotely accessed) roaming table. In some embodiments, the roaming service center provides the user with a projected cost per day for one or more roaming service provider options based on typical service usage history and the cost for each service provider. In some embodiments, the roaming service center provides the user with a set of options for controlling\/throttling usage and\/or cost while roaming. In some embodiments, these controls are set by a VSP (e.g., an IT manager using VSP functions). For example, roaming tables can be updated periodically in the background while on a home network and cached. In some embodiments, cache updates occur based on a fixed time period. In some embodiments, the roaming partner cost table cache updates are done whenever the device is connected to a desirable network that is not as expensive or bandwidth constrained (e.g., at home, work and\/or off the WWAN). In some embodiments, updates occur at time of day that network is not busy. In some embodiments, updates occur based on a network push when a roaming table is changed (e.g., one or more of the roaming partners changes the rate). In some embodiments, the service cost to update the roaming service cost table is charged to bill by account and possibly not charged to the user. In some embodiments, the roaming service center is provided as a service that is paid for by the user and\/or part of a service plan. In some embodiments, a bill by account function tracks all related costs. For example, the roaming service center can be provided as a service through central provider, MVNO, roaming partner provider, VSP or as a third-party application not associated with any service provider (e.g., IT manager).","In some embodiments, a synchronized local service usage counter based on time stamped central billing information is provided. For example, the local service usage counter, as similarly described above, can also be synchronized to past service usage records (e.g., time stamped central billing records of service usage for the device) and use local estimates for current\/present service usage estimates for the device. In this example, the central billing system (e.g., central billing ) can push the time stamped central billing information to the device (e.g., device ), the device can pull the time stamped central billing information, and\/or an intermediate server can provide a mediated push or pull process. In some embodiments, synchronization is performing periodically based on service usage levels with free-running estimates between synchronizations.","In some embodiments, service usage is projected based on calculated estimates of service usage based on synchronized service usage and local service usage count information. For example, projected service usage can be calculated on the device or calculated on a server (e.g., a billing server or an intermediate billing server), which provides the calculated projected service usage information to the device, such as using various adaptive algorithms for service usage projections. For example, an adaptive algorithm can use historical\/past synchronized network service usage information (e.g., synchronized with local service usage data based on time stamps associated with IPDRs) to assist in service usage projections, based on, for example, total service usage count, service usage count by certain service related criteria (e.g., application, content, service type, website and\/or time of day). In another example, an adaptive algorithm synchronizes to past service usage data (e.g., the local estimate of past service usage data is updated to be synchronized up through the point in time associated with the latest IPDR time stamp that has been received) and current local estimates of service usage collected since the latest time stamp are then added to the time stamped IPDR service usage counter to minimize the service usage counter offset so that it is no greater than the difference between the network service usage measure and the local service usage measure since the latest IPDR time stamp. In some embodiments, these adaptive algorithm techniques are performed on the device and\/or performed on the network (e.g., on a network server) for processing. In some embodiments, if there is an offset in the local device-based service usage count between IPDR synchronization events and the IPDR service usage count between IPDR synchronization events, then an algorithm can be employed to estimate any systematic sources for the offset and correct the local service usage count to minimize the offsets. As an example, if the IPDR service usage count is typically off by a fixed percentage, either high or low, then an algorithm can be employed to estimate a multiplier that is applied to the local service usage count to minimize the offset between IPDR service usage synchronization events. In another example, there can be a consistent constant offset and a multiplier offset, both of which can be estimated and corrected for. Those of ordinary skill in the art will appreciate that more sophisticated algorithms can be employed to estimate the nature of any systematic offsets, including, for example, offsets that occur due to specific service usage activities or network chatter to manage the device, and such offsets can then be minimized between IPDR service synchronization events. In some embodiments, synchronized service usage data is used to create an improved analysis of the statistical patterns of service usage to provide more accurate service usage projections. Those of ordinary skill in the art will also appreciate that a variety of additional adaptive algorithm techniques can be used including those that provide for various statistical analysis techniques and\/or other techniques.","In some embodiments, service usage is projected for the end of a billing\/service period for a service plan versus the service usage allowed under the service plan for that billing\/service period. A display of excess charges is also provided for the projected rate of service usage based on the monitored service usage behavior through the end of the billing\/service period (e.g., this can be zero if the service usage is projected to be less than that allowed under the service plan and a positive cost number if it is projected to be more than the service plan). For example, this can be implemented in numerous ways, such as on a server in the network, on a gateway\/router\/switch in the network, and\/or on the device, as discussed below and generally described herein with respect to other service\/cost usage monitoring and notification embodiments. If implemented in the network server or gateway\/router\/switch, then the service\/cost usage projections and related information can be pushed to the device, or the device can be notified that such information is available to pull and\/or periodically pushed\/pulled. The service usage information\/estimates can be collected from the device, the network or both (e.g., reconciled and\/or synchronized) as similarly described herein. The service usage information\/estimates are then analyzed to determine service usage\/cost projects as similarly described herein and compared to the service plan for the device to determine the projected service\/cost usage overage (if any). In some embodiments, one or more of the following are determined by, reported to and\/or displayed on the device: service usage value, projected service usage value, service usage plan limit, projected service usage overage, projected service cost overage, service plan period time duration, service plan time remaining before end of period and\/or other pertinent information.","In some embodiments, the device also determines service costs based on the synchronized service usage count thereby allowing the device to also report the service cost information to the user. For example, the device can locally store a service cost look-up table(s), locally store different service cost look-up tables for different networks and\/or for roaming networks, and\/or request such information from a billing or intermediate billing server (and\/or a roaming server) on the network. As another example, the device can obtain the calculated service costs based on the synchronized local service usage count and\/or network service usage count from an intermediate server (e.g., a billing or intermediate billing server) thereby offloading the computational costs associated with calculated these projections and the data storage for service cost lookup tables onto the intermediate server on the network using the network service usage counter with or, alternatively, without the synchronized local service usage counter.","In some embodiments, service usage count categorization by network (e.g., a home network (such as a Wi-Fi, WAN, femtocell or other home network) versus a roaming network) is provided. Similarly, the synchronized local service usage counter can be synchronized by network. Also, a synchronized local service usage count for networks controlled by a central provider, for networks controlled by other providers (e.g., MVNO), and\/or free networks can similarly be provided.","In some embodiments, a service notification and billing interface is provided. For example, service usage and projected service usage, such as described herein, can be displayed to the user of the device (e.g., via user interface ). Similarly, expected\/projected service or cost overrun\/overage, such as described herein, can also be displayed to the user. As another example, a most cost effective plan can be determined\/projected based on historical and\/or projected service usage, and this determined\/projected most cost effective plan can be displayed to the user. In yet another example, a list of available networks accessible by the device can be displayed to the user. In this example, one or more undesired available networks can also be blocked from display thereby only displaying to the user desired and\/or preferred available networks. In this example, service usage plans and\/or service usage plan option comparison for one or more alternative networks or roaming networks can also be displayed to the user. Similarly, service cost plans and\/or service\/cost plan option comparison for one or more alternative networks or roaming networks can also be displayed to the user. In addition, roaming service usage, projected roaming service usage, estimated roaming service cost, and\/or projected estimated roaming service cost can also be displayed to the user. These roaming service usage\/costs can also be displayed to the user so that the user can utilize this information for selecting various roaming service billing options. In another example, alternative and\/or least cost networks are determined and displayed to the user. In another example, alternative warnings are displayed to the user for any or specified roaming networks.","In some embodiments, the service notification and billing interface notifies the user of expected network coverage (e.g., based on the device's current geography\/location and the accessible networks for the device from that current geography\/location) and displays options to the user based on the expected network coverage information. In some embodiments, the service notification and billing interface notifies the user of their current service usage at specified service usage points and displays various options to the user (e.g., service usage options and\/or billing options). For example, the user's responses to the presented options are recorded (e.g., stored locally on the device at least temporarily for reporting purposes or permanently in a local configuration data store until such configuration settings are otherwise modified or reset) and reported, such as to the billing server (e.g., central billing ). For example, user input, such as selected options and\/or corresponding policy settings, can be stored locally on the device via a cache system. As another example, the service notification and billing interface displays options to the user for how the user wants to be notified and how the user wants to control service usage costs, the user's input on such notification options is recorded, and the cost control options (e.g., and the billing agent  and policy control agent ) are configured accordingly. Similarly, the user's input on service plan options\/changes can be recorded, and the service plan options\/changes (e.g., and the billing agent  and policy control agent ) are configured\/updated accordingly. In another example, the service notification and billing interface provides various traffic control profiles, such as for where the user requests assistance in controlling service usage costs (e.g., service data usage and\/or transactional usage related activities\/costs). Similarly, the service notification and billing interface can provide various notification options, such as for where the user wants advance warning on service coverage. In another example, the service notification and billing interface provides options for automatic pre-buy at a set point in service usage. In another example, the service notification and billing interface provides the option to choose different notification and cost control options for alternative networks or roaming networks.","In some embodiments, an online portal or web server is provided for allowing the user to select and\/or update policy settings. For example, user input provided via the online portal\/web server can be recorded and reported to the billing server (e.g., central billing ). In another example, the online portal\/web server can display transaction billing information and\/or accept input for a transaction billing request, which can then be reported to the billing server accordingly.","As shown in , the service processor  includes a service interface or user interface . In some embodiments, the user interface  provides the user with information and accepts user choices or preferences on one or more of the following: user service information, user billing information, service activation, service plan selection or change, service usage or service activity counters, remaining service status, service usage projections, service usage overage possibility warnings, service cost status, service cost projections, service usage control policy options, privacy\/CRM\/GPS related options, and\/or other service related information, settings, and\/or options. For example, the user interface  can collect service usage information from service monitor agent  to update the local service usage counter (and\/or, alternatively, the service usage information is obtained from the service controller ) to update user interface service usage or service cost information for display to the user. As another example, service billing records obtained from central billing system  can be used to synchronize local service usage counters and service monitor agent  information to perform real-time updating of local service usage counters between billing system  synchronizations. As another example, the user interface  can display options and accept user preference feedback, such as similarly discussed above with respect to user privacy\/CRM\/GPS filtering, traffic monitoring and service controls. For example, the user interface  can allow the user of the device to modify their privacy settings, provide user feedback on service preferences and\/or service experiences, modify their service profiles (e.g., preferences, settings, configurations, and\/or network settings and options), to review service usage data (e.g., based on local service usage counters and\/or other data monitored by the service processor ), to receive various events or triggers (e.g., based on projected service usage\/costs), and\/or the user interface  can provide\/support various other user input\/output for service control and service usage.","In some embodiments, by providing the service policy implementation and the control of service policy implementation to the preferences of the user, and\/or by providing the user with the option of specifying or influencing how the various service notification and control policies or control algorithms are implemented, the user is provided with options for how to control the service experience, the service cost, the capabilities of the service, the manner in which the user is notified regarding service usage or service cost, the level of sensitive user information that is shared with the network or service provider entity, and the manner in which certain service usage activities may or may not be throttled, accelerated, blocked, enabled and\/or otherwise controlled. Accordingly, some embodiments provide the service control to beneficially optimize user cost versus service capabilities or capacities in a manner that facilitates an optimized user experience and does not violate network neutrality goals, regulations and\/or requirements. For example, by offering the user with a set of choices, ranging from simple choices between two or more pre-packaged service control settings options to advanced user screens where more detailed level of user specification and control is made available, some embodiments allow the service provider, device manufacturer, device distributor, MVNO, VSP, service provider partner, and\/or other \u201centity\u201d to implement valuable or necessary service controls while allowing the user to decide or influence the decision on which service usage activities are controlled, such as how they are controlled or throttled and which service usage activities may not be throttled or controlled in some manner. These various embodiments allow the service provider, device manufacturer, device distributor, MVNO, VSP, service provider partner, or other \u201centity\u201d to assist the user in managing services in a manner that is network neutral with respect to their implementation and service control policies, because the user is making or influencing the decisions, for example, on cost versus service capabilities or quality. By further providing user control or influence on the filtering settings for the service usage reporting or CRM reporting, various levels of service usage and other user information associated with device usage can be transmitted to the network, service provider, device manufacturer, device distributor, MVNO, VSP, service provider partner, and\/or other \u201centity\u201d in a manner specified or influenced by the user to maintain the user's desired level of information privacy.","As shown in , the service processor  includes the service downloader . In some embodiments, the service downloader  provides a download function to install or update service software elements on the device. In some embodiments, the service downloader  requires a secure signed version of software before a download is accepted. For example, the download can require a unique key for a particular service downloader . As another example, the service downloader  can be stored or execute in secure memory or execute a secure memory partition in the CPU memory space. Those of ordinary skill in the art will appreciate that there are a variety of other security techniques that can be used to ensure the integrity of the service downloader .","As shown in , the service processor  includes a modem driver . In some embodiments, the modem driver  converts data traffic into modem bus (not shown) traffic for one or more modems via the modem firewall . As shown in , in some embodiments, modem selection and control  selects the access network connection and is in communication with the modem firewall , and modem drivers , , , ,  convert data traffic into modem bus traffic for one or more modems and are in communication with the modem selection and control . As shown in , in some embodiments, modems , , , , , which are in communication with the modem bus , connect the device to one or more networks. In some embodiments, different profiles are selected based on the selected network connection (e.g., different service profiles\/policies for WWAN, WLAN, WPAN, Ethernet and\/or DSL network connections), which is also referred to herein as multimode profile setting. For example, service profile settings can be based on the actual access network (e.g., home DSL\/cable or work network) behind the Wi-Fi not the fact that it is Wi-Fi (or any other network, such as DSL\/cable, satellite, or T-1), which is viewed as different than accessing a Wi-Fi network at the coffee shop. For example, in a Wi-Fi hotspot situation in which there are a significant number of users on a DSL or T-1 backhaul, the service controller can sit in a service provider cloud or an MVNO cloud, the service controls can be provided by a VSP capability offered by the service provider (e.g., as described herein with respect to ) or the service controller can be owned by the hotspot service provider that uses the service controller on their own without any association with an access network service provider. For example, the service processors can be controlled by the service controller to divide up the available bandwidth at the hotspot according to QoS or user sharing rules (e.g., with some users having higher differentiated priority (potentially for higher service payments) than other users). As another example, ambient services (as similarly described herein) can be provided for the hotspot for verified service processors.",{"@attributes":{"id":"p-0373","num":"0372"},"figref":"FIG. 110","b":["1730","206","1730","100","1","100","100","200","1","200","200","206"]},"The wireless devices  can be implemented as stations. A station, as used herein, may be referred to as a device with a media access control (MAC) address and a physical layer (PHY) interface to the wireless medium that comply with, e.g., the IEEE 802.11 standard. A station can be described as \u201cIEEE 802.11-compliant\u201d when compliance with the IEEE 802.11 standard is intended to be explicit (i.e., a device acts as described in at least a portion of the IEEE 802.11 standard.) One of ordinary skill in the relevant art would understand what the IEEE 802.11 standard comprises today and that the IEEE 802.11 standard can change over time, and would be expected to apply techniques described in this paper in compliance with future versions of the IEEE 802.11 standard if an applicable change is made.","In alternative embodiments, one or more of the wireless devices  may comply with some other standard or no standard at all, and may have different interfaces to a wireless or other medium. It should be noted that not all standards refer to wireless devices as \u201cstations,\u201d but where the term is used in this paper, it should be understood that an analogous unit will be present on all applicable wireless networks. Thus, use of the term \u201cstation\u201d should not be construed as limiting the scope of an embodiment that describes wireless devices as stations to a standard that explicitly uses the term, unless such a limitation is appropriate in the context of the discussion.","The wireless networks  will typically include an internetworking unit (IWU) that interconnects wireless devices on the relevant one of the wireless networks  with another network, such as a wired LAN. The IWU is sometimes referred to as a wireless access point (WAP). In the IEEE 802.11 standard, a WAP is also defined as a station. Thus, a station can be a non-WAP station or a WAP station. In a cellular network, the WAP is often referred to as a base station.","The wireless networks  can be implemented using any applicable technology, which can differ by network type or in other ways. The wireless networks  can be of any appropriate size (e.g., metropolitan area network (MAN), personal area network (PAN), etc.). Broadband wireless MANs may or may not be compliant with IEEE 802.16. Wireless PANs may or may not be compliant with IEEE 802.15. The wireless networks  can be identifiable by network type (e.g., 2G, 3G, 4G, and Wi-Fi), service provider, WAP\/base station identifier (e.g., Wi-Fi SSID, base station and sector ID), geographic location, or other identification criteria.","The wireless networks  may or may not be coupled together via an intermediate network. The intermediate network can include practically any type of communications network, such as, by way of example but not limitation, the Internet, a public switched telephone network (PSTN), or an infrastructure network (e.g., private LAN). The term \u201cInternet\u201d as used herein refers to a network of networks which uses certain protocols, such as the TCP\/IP protocol, and possibly other protocols such as the hypertext transfer protocol (HTTP) for hypertext markup language (HTML) documents that make up the World Wide Web (the web).","In the example of , the wireless network offloading engine  is coupled to the wireless device -. In a specific implementation, the wireless network offloading engine  is implemented on a server and is coupled to the wireless device - through the Internet. However, at least a portion of the wireless network offloading engine  can alternatively be implemented on the wireless device -, with or without a connection to a server that includes another portion (e.g., a server portion) of the wireless network offloading engine .","In an example of operation, periodically, occasionally, or when instructed, the wireless device - performs an available network characterization scan (ANCS) on one or more of the wireless networks . Other devices, such as the wireless device - or some other station, may or may not also perform an ANCS. The ANCS can be used to characterize available performance for each network (e.g., data rate, bit rate variability, latency, latency jitter, quality of service (QoS), response time, etc.).","Some objective criteria for measuring performance exist (e.g., throughput). Intelligent network monitoring can enable real-time monitoring of network service usage (e.g., at the packet level\/layer, network stack application interface level\/layer, and\/or application level\/layer) of the wireless network (e.g., radio access networks and\/or core networks) and to effectively manage the network service usage for protecting network capacity (e.g., while still maintaining an acceptable user experience). Using Device Assisted Services (DAS) techniques, and in some cases, network assisted\/based techniques, to provide for network service usage monitoring of devices, network carriers\/operators would be provided greater insight into what devices, which users and what applications, and when and where network congestion problems occur, enabling operators to intelligently add additional resources to certain areas when necessary (e.g., offloading data traffic onto femto cells or WiFi hotspots and adding more network resources), to differentially control network service usage, and\/or to differentially charge for network service usage based on, for example, a network busy state, for protecting network capacity.","Performance need not be based on network performance alone. For example, a subscriber may be interested in economic performance (e.g., price). Accordingly, in this paper, performance is sometimes characterized using a cost function that can include various parameters, including network performance, economic performance, reliability, and\/or other parameters that are indicative of preferences of a user or service provider. Where a particular type of performance is applicable, the meaning can be made explicit (e.g., by making reference to \u201cnetwork performance\u201d as opposed to simply \u201cperformance\u201d) or can be derived from context.","The wireless device - generates an ANCS report using results of the ANCS in order to characterize available performance for each scanned network of the wireless networks . The ANCS report can also include an identification of currently available networks for the wireless device -, location, time, and potentially some performance characterization. The wireless device - makes the ANCS report available to the wireless network offloading engine . The wireless device - can also make device-specific information available, such as location, performance thresholds, a motion trace, knowledge about other devices or interference, a performance history, applications (e.g., a VoIP or streaming media application), device-specific rules related to when the device will link to a network or offload (e.g., based on reliability, performance state, congestion state, QoS, incentive state, et al.), or a cost function (e.g., based on signal strength, channel strength, basic radio bit rate, network speed, network throughput, speed jitter, throughput jitter, network delay, delay jitter, network availability, network reliability in access grant percentage, network reliability in delay in access grant, variation in performance as a function of position, et al.). Alternatively, some device-specific information may or may not be shared with the wireless network offloading engine , and used to customize a priority list or multi-dimensional network map that is generated or received at the wireless device -.","The wireless network offloading engine  generates a multi-dimensional network map from the ANCS report and\/or other data that is known to the wireless network offloading engine . The wireless network offloading engine  can provide the multi-dimensional network map to the wireless device -, from which the wireless device - can generate or modify a wireless operation instruction set. Alternatively, the wireless network offloading engine  can generate an instruction set from the multi-dimensional map, which it makes available to the wireless device . The instruction set can be an implementation of a general algorithm that is customized by the wireless device - after it is received, or the instruction set can be generated specifically for the wireless device - or a set of devices that includes the wireless device -, to be executed on-device in accordance with device-specific parameters (e.g., power saving settings, location, time of day, etc.). Advantageously, the wireless device - is able to use the instruction set to enable intelligent offloading of the wireless device - from one of the wireless networks  to another. In some embodiments, the wireless device - is capable of modifying the multi-dimensional network map before making a network selection decision. The wireless network offloading engine may provide one or more parameters and\/or algorithms to the wireless device - for making the network selection decision.","Differential network access control for protecting network capacity includes applying policies to determine which network a service activity should be connected to (e.g., 2G, 3G, 4G, home or roaming, WiFi, cable, DSL, fiber, wired WAN, and\/or another wired or wireless or access network), and applying differential network access control rules (e.g., traffic control rules) depending on which network to which the service activity is connected. In some embodiments, differential network access control for protecting network capacity includes differentially controlling network service usage activities based on the service usage control policy and a user input (e.g., a user selection or user preference). Depending upon the implementation, network service usage control policy can consider availability of alternative networks, policy rules for selecting alternative networks, network busy state or availability state for alternative networks, specific network selection or preference policies for a given network service activity or set of network service activities, to name several.","In a specific implementation, the wireless device  aides in determining (e.g., measuring and\/or characterizing) a network busy state experienced by the device (e.g., which can be used to determine the network access control policy for one or more network capacity controlled services). For example, the network busy state experienced by the device can be recorded by the device and included in a network busy state report that is sent to a network element\/function (e.g., a wireless network offloading engine  as described herein). The network busy state report can include, for example, data rate, average throughput, minimum throughput, throughput jitter, latency, latency jitter, bit error rate, data error rate, packet error rate, packet drop rate, number of access attempts, number of access successes, number of access failures, QoS level availability, QoS level performance, variability in any of the preceding parameters, and\/or the historic statistics of any of the preceding parameters, to name several by way of example. The network busy state report can include, for example, 2G, 3G, 4G or WiFi base station ID, SSID, cell sector ID, CDMA ID, FDMA channel ID, TDMA channel ID, GPS location, and\/or physical location to identify the edge network element that is associated with the network busy state report to a network element, to name several by way of example. In a specific implementation, the network busy state is monitored by one or more network elements that can measure and\/or report network busy state (e.g., wireless network offloading engine , BTS, BTSC, access point, base station monitor, and\/or airwave monitor).","As a clarifying example embodiment, the wireless device  (e.g. a network performance characterization software or hardware agent on the device) acts in conjunction with a network element (e.g. a wireless network offloading engine ) to characterize the network busy state of an alternative network access point or base station resource. In such embodiments the device can sense an available alternative network, connect to a network element (e.g. a wireless network offloading engine ) through the alternative network, conduct a download and\/or upload sequence during which the network performance is monitored, and then cause the performance to be characterized and recorded. The performance can be characterized by the network element (e.g. a wireless network offloading engine ), by the wireless device  (e.g. a network performance characterization software or hardware agent) or by both.","As another clarifying embodiment, the wireless device  (e.g. a network performance characterization software or hardware agent on the device) can sense an available alternative network, connect to the alternative network, allow the user to use the network connection services, monitor the resulting network performance and record the performance results.","In a specific implementation, one or more of the wireless devices that use wireless services on the one or more main networks and\/or alternative networks are used as described herein to collect alternative network performance, busy state and\/or QoS state information.","In a specific implementation, the main networks and\/or alternative networks can be monitored and characterized by devices that are permanently located in the vicinity of one or more alternative network base stations or access points and configured to communicate with a wireless network offloading engine . A permanently located mobile terminal can provide network monitors for reporting, for example, network busy state, to a central network element, such as the wireless network offloading engine , which can, for example, aggregate such network busy state information to determine network busy state for one or more network coverage areas.","For example, airwave monitors and\/or base station monitors can be provided to facilitate a reliable characterization of network busy state in a coverage area of one or more base stations and\/or base station sectors and\/or WiFi access points, such as affixed mobile terminals (e.g., trusted terminals that can include additional network busy state monitoring and\/or reporting functionality) installed (e.g., temporarily or permanently) in the coverage area of one or more base stations and\/or base station sectors (e.g., in which a sector is the combination of a directional antenna and a frequency channel) so that the mobile terminals perform network busy state monitoring and reporting to the wireless network offloading engine , the local base station, and\/or other network element(s)\/function(s). In some embodiments, the permanently affixed mobile terminals provide network monitors for reporting, for example, network busy state (or performance, reliability or QoS), to a central network element, such as the wireless network offloading engine , which can, for example, aggregate such network busy state information to determine network busy state for one or more network coverage areas. In some embodiments, the mobile terminals are always present in these locations where installed and always on (e.g., performing network monitoring), and can be trusted (e.g., the mobile terminals can be loaded with various hardware and\/or software credentials). For example, using the mobile terminals, a reliable characterization of network busy state can be provided, which can then be reported to a central network element and aggregated for performing various network busy state related techniques as described herein with respect to various embodiments.","In a specific implementation, the wireless network offloading engine  uses the network busy state reports (or performance reports or QoS reports) from user devices and\/or permanent mobile terminals connected to the same alternative network to determine the network busy state for an alternative network edge element connected to the device.","In some embodiments, network element\/function (e.g. a wireless access point or base station) sends a busy state report for the network edge element to the device (e.g., and to other devices connected to the same network edge element), which the device can then use to implement differential network access control policies (e.g., for network capacity controlled services) based on the network busy state. In some embodiments, a network busy state is provided by a network element (e.g., wireless network offloading engine  or service cloud) and broadcast to the device (e.g., securely communicated to the wireless device ).","In some embodiments, the wireless device  (e.g., a network performance characterization software or hardware agent) selects the access network connection in accordance with a network service profile setting that determines which network the device should choose between available alternative WWAN, WLAN, WPAN, Ethernet and\/or DSL network connections. This choice can be based on the performance, reliability, busy state or QoS capability of one or more alternative networks. The characterization of the alternative networks can be based on end-to-end performance, and not just the over the air or radio frequency performance. For example, service profile settings can be based on the performance of the actual access network (e.g., home DSL\/cable, coffee shop, shopping center, public Wi-Fi hot spot or work network) behind the Wi-Fi not the fact that it is Wi-Fi (e.g., or any other network, such as DSL\/cable, satellite, or T-1), which is viewed as different than accessing a Wi-Fi network at the coffee shop. For example, in a Wi-Fi hotspot situation in which there are a significant number of users on a DSL or T-1 backhaul, the wireless network offloading engine  can sit in a service provider cloud or an MVNO cloud, the service controls can be provided by a VSP capability offered by the service provider or the wireless network offloading engine  can be owned by the hotspot service provider that uses the wireless network offloading engine  on their own without any association with an access network service provider.","In some embodiments, the service processor  and service controller  are capable of assigning multiple service profiles associated with multiple service plans that the user chooses individually or in combination as a package. For example, a device  starts with ambient services that include free transaction services wherein the user pays for transactions or events rather than the basic service (e.g., a news service, eReader, PND service, pay as you go session Internet) in which each service is supported with a bill by account capability to correctly account for any subsidized partner billing to provide the transaction services (e.g., Barnes and Noble may pay for the eReader service and offer a revenue share to the service provider for any book or magazine transactions purchased form the device ). In some embodiments, the bill by account service can also track the transactions and, in some embodiments, advertisements for the purpose of revenue sharing, all using the service monitoring capabilities disclosed herein. After initiating services with the free ambient service discussed above, the user may later choose a post-pay monthly Internet, email and SMS service. In this case, the service controller  would obtain from the billing system  in the case of network-based billing (or in some embodiments the service controller  billing event server  in the case of device-based billing) the billing plan code for the new Internet, email and SMS service. In some embodiments, this code is cross-referenced in a database (e.g., the policy management server ) to find the appropriate service profile for the new service in combination with the initial ambient service. The new superset service profile is then applied so that the user maintains free access to the ambient services, and the billing partners continue to subsidize those services, the user also gets access to Internet services and may choose the service control profile (e.g., from one of the embodiments disclosed herein). The superset profile is the profile that provides the combined capabilities of two or more service profiles when the profiles are applied to the same device  service processor. In some embodiments, the device  (service processor ) can determine the superset profile rather than the service controller  when more than one \u201cstackable\u201d service is selected by the user or otherwise applied to the device. The flexibility of the service processor  and service controller  embodiments described herein allow for a large variety of service profiles to be defined and applied individually or as a superset to achieve the desired device  service features.","As shown in , the service controller  includes a service control server link . In some embodiments, device-based service control techniques involving supervision across a network (e.g., on the control plane) are more sophisticated, and for such it is increasingly important to have an efficient and flexible control plane communication link between the device agents (e.g., of the service processor ) and the network elements (e.g., of the service controller ) communicating with, controlling, monitoring, or verifying service policy. For example, the communication link between the service control server link  of service controller  and the service control device link  of the service processor  can provide an efficient and flexible control plane communication link, a service control link  as shown in , and, in some embodiments, this control plane communication link provides for a secure (e.g., encrypted) communications link for providing secure, bidirectional communications between the service processor  and the service controller . In some embodiments, the service control server link  provides the network side of a system for transmission and reception of service agent to\/from network element functions. In some embodiments, the traffic efficiency of this link is enhanced by buffering and framing multiple agent messages in the transmissions (e.g., thereby reducing network chatter). In some embodiments, the traffic efficiency is further improved by controlling the transmission frequency and\/or linking the transmission frequency to the rate of service usage or traffic usage. In some embodiments, one or more levels of security and\/or encryption are used to secure the link against potential discovery, eavesdropping or compromise of communications on the link. In some embodiments, the service control server link  also provides the communications link and heartbeat timing for the agent heartbeat function. As discussed below, various embodiments described herein for the service control server link  provide an efficient and secure mechanism for transmitting and receiving service policy implementation, control, monitoring and verification information between the device agents (e.g., service processor agents\/components) and other network elements (e.g., service controller agents\/components).","In some embodiments, the service control server link  can employ the counterpart service control plane secure transmission methods discussed above with respect to the service control device link . For example, one or more layers of security can be used to secure the communications link, including, for example, basic IP layer security, TCP layer security, service control link layer security, and\/or security specific from service controller servers to service processor agents.","In some embodiments, the service control server link  reduces network chatter by efficiently transmitting service control related communications over the link. For example, the service control server link  can transmit server messages asynchronously as they arrive. As another example, the service control server link  can perform collection or buffering of server messages between transmissions. As another example, the service control server link  can determine when to transmit based potentially on several parameters, such as one or more of: periodic timer trigger, waiting until a certain amount of service usage or traffic usage has occurred, responding to a service agent message, responding to a service agent request, initiated by one or more servers, initiated by a verification error condition, and\/or initiated by some other error condition. For example, once a transmission trigger has occurred, the service control server link  can take all buffered agent communications and frame the communications. In addition, the service control server link  can provide for an efficient communication link based on various embodiments related to the timing of transmissions over the service control link, as similarly discussed above with respect to the service control device link  description. For example, the timing functions, such as asynchronous messages or polling for messages, constant frequency transmission, transmission based on how much service usage or data traffic usage has taken place, transmission in response to device side control link message, service verification error events, other error events, and\/or other message transmission trigger criteria can be determined, controlled and\/or initiated by either the device side or the network side depending on the embodiment.","In some embodiments, the service control server link  provides for securing, signing, encrypting and\/or otherwise protecting the communications before sending such communications over the service control link . For example, the service control server link  can send to the transport layer or directly to the link layer for transmission. In another example, the service control server link  further secures the communications with transport layer encryption, such as TCP TLS or another secure transport layer protocol. As another example, the service control server link  can encrypt at the link layer, such as using IPSEC, various possible VPN services, other forms of IP layer encryption and\/or another link layer encryption technique.","In some embodiments, the service control server link  includes the agent heartbeat function in which the agents provide certain required reports to the service processor for the purpose of service policy implementation verification or for other purposes. For example, the heartbeat function can also be used to issue queries or challenges, messages, service settings, service control objectives, information requests or polling, error checks and\/or other communications to the agents. As another example, agent heartbeat messages can be in the open or encrypted, signed and\/or otherwise secured. Additional heartbeat function and the content of heartbeat messages can be provided as similarly described herein, such as described above with respect to the service control device link  and the access control integrity agent  and other sections. In some embodiments, the service controller  and\/or agents of the service controller  are programmed to periodically provide reports, such as upon a heartbeat response (e.g., an agent can repeatedly send necessary reports each heartbeat), and appropriate actions can then be taken based upon such received reports. Accordingly, the heartbeat function provides an important and efficient system in various embodiments described herein for verifying the service policy implementation and\/or protecting against compromise events. There are many other functions the agent heartbeat service can perform many of which are discussed herein, while many others will be apparent to one of ordinary skill in the art given the principles, design background and various embodiments provided herein.","In some embodiments, the service control server link  also provides a service control software download function for various embodiments, which, for example, can include a download of new service software elements, revisions of service software elements, and\/or dynamic refreshes of service software elements of the service processor  on the device. In some embodiments, this function is performed by the service control server link  transmitting the service control software as a single file over the service control link. For example, the file can have encryption or signed encryption beyond any provided by the communication link protocol itself for service control link . In another example, the service control software files can be segmented\/divided into smaller packets that are transmitted in multiple messages sent over the service control link . In yet another example, the service control software files can be transmitted using other delivery mechanism, such as a direct TCP socket connection from a service download control server , which can also involve secure transport and additional levels of encryption. In some embodiments, the service control server link  and\/or service download control server  use(s) an agent serial number and\/or a security key look up when agents are updated and\/or when a dynamic agent download occurs.","As shown in , the service controller  includes an access control integrity server . In some embodiments, the access control integrity server  collects device information on service policy, service usage, agent configuration and\/or agent behavior. For example, the access control integrity server  can cross check this information to identify integrity breaches in the service policy implementation and control system. In another example, the access control integrity server  can initiate action when a service policy violation or a system integrity breach is suspected.","In some embodiments, the access control integrity server  (and\/or some other agent of service controller ) acts on access control integrity agent reports and error conditions. Many of the access control integrity agent  checks can be accomplished by the server. For example, the access control integrity agent  checks include one or more of the following: service usage measure against usage range consistent with policies (e.g., usage measure from the network and\/or from the device); configuration of agents; operation of the agents; and\/or dynamic agent download.","In some embodiments, the access control integrity server  (and\/or some other agent of service controller ) verifies device service policy implementations by comparing various service usage measures (e.g., based on network monitored information, such as by using IPDRs, and\/or local service usage monitoring information) against expected service usage behavior given the policies that are intended to be in place. For example, device service policy implementations can include measuring total data passed, data passed in a period of time, IP addresses, data per IP address, and\/or other measures such as location, downloads, email accessed, URLs, and comparing such measures expected service usage behavior given the policies that are intended to be in place.","In some embodiments, the access control integrity server  (and\/or some other agent of service controller ) verifies device service policy, and the verification error conditions that can indicate a mismatch in service measure and service policy include one or more of the following: unauthorized network access (e.g., access beyond ambient service policy limits); unauthorized network speed (e.g., average speed beyond service policy limit); network data amount does not match policy limit (e.g., device not stop at limit without re-up\/revising service policy); unauthorized network address; unauthorized service usage (e.g., VOIP, email, and\/or web browsing); unauthorized application usage (e.g., email, VOIP, email, and\/or web); service usage rate too high for plan, and policy controller not controlling\/throttling it down; and\/or any other mismatch in service measure and service policy.","In some embodiments, the access control integrity server  (and\/or some other agent of service controller ) verifies device service policy based at least in part on, for example, various error conditions that indicate a mismatch in service measure and service policy. For example, various verification error conditions that can indicate a mismatch in service measure and service policy include one or more of the following: mismatch in one service measure and another service measure; agent failure to report in; agent failure to respond to queries (e.g., challenge-response sequence and\/or expected periodic agent reporting); agent failure to respond correctly to challenge\/response sequence; agent improperly configured; agent failure in self checks; agent failure in cross-checks; unauthorized agent communication or attempted unauthorized communication; failure in service policy implementation test; failure in service usage reporting test; failure in service usage billing test; failure in transaction billing test; failure in download sequence; environment compromise event, such as unauthorized software load or execution (or attempt), unauthorized memory access (or attempt), unauthorized agent access (or attempt), known harmful software, and\/or known harmful communications signature; and\/or failure to respond to various messages, such as send message and suspend and\/or send message and quarantine. In some embodiments, the access control integrity server  (and\/or some other agent of service controller ) verifies device service policy by performing automated queries and analysis, which are then reported (e.g., anomalous\/suspicious report results can be reported for further analysis by a person responsible for determining whether such activities indicate out of policy activities or to provide information to the user to inform the user of such anomalous\/suspicious report results that may indicate out of policy activities). For example, the user can review the report to authorize whether such activities were performed by the user (e.g., website access requests, specific transactions, and\/or phone calls) and\/or indicate that such activities were not authorized by the user (e.g., indicate a potential compromise of the device, such as by malware or other unauthorized software\/user use of the device). In another example, the user can also be connected to communicate with service support of the service provider regarding such reported activities (e.g., by text\/chat, voice\/phone, and\/or video conference to a service support). Accordingly, in some embodiments, the access control integrity server  (and\/or some other agent of service controller ) provides a policy\/service control integrity service to continually (e.g., periodically and\/or based on trigger events) verify that the service control of the device has not been compromised and\/or is not behaving out of policy.","In some embodiments, upon detection of one or more service verification errors, such as the various service verification errors discussed above, the device is directed to a quarantine network status in which the device can, for example, only access network control plane functions, billing functions, and other functions generally controlled by the access network service provider or the central service provider. For example, quarantine network access restrictions and routing can be accomplished with the access network AAA and routing system (e.g., access network AAA server  and one or more of the gateways , , , , , , , , , , ) or can be accomplished with device-based access control or traffic control policy implementation. Quarantine network equipment or servers can, for example, be located within the access network or within another network with access to the access network. Communication with the quarantine network infrastructure can be accomplished, for example, with a secure link with one or more encryption levels or a dedicated private link. In some embodiments, quarantining a device includes, for example, a two step process for routing quarantine network device traffic, first, to a quarantine traffic handling router or server and, second, from there to the actual quarantine network infrastructure, with the route being determined by device parameters, user parameters, access service provider parameters or other parameters associated with the quarantine network routing. In some embodiments, the device is completely suspended from the network in which, for example, the device can first issue a user interface message to the user or issuing another form of a message to the user or service subscriber, such as via email, hard copy message and\/or voice message. In some embodiments, the device network access, service capabilities and\/or traffic shaping are limited, partially restricted or completely restricted, service capabilities. For example, these limitations and\/or restrictions can be implemented in the device and\/or in the network. For example, implementing a device quarantine (e.g., using a RADIUS server to quarantine the device) can involve assigning the device to a different billing profile.","In some embodiments, upon detection of one or more service verification errors, such as the various service verification errors discussed above, switch-based port analysis is performed to further monitor the device (e.g., referred to as Switched Port Analyzer (SPAN) on Cisco switches, and various other vendors have different names for it, such as Roving Analysis Port (RAP) on 3Com switches). In some embodiments, the device service policy implementation behavior is monitored at a deeper level in the network by copying device traffic in the switch so that it goes to both an intended data path destination and to a specified port for switch-based port analysis (e.g., the traffic content can be analyzed and recorded using deep packet inspection (DPI) techniques, which can provide a finer level of detail than the typical IPDR). For example, an advantage of performing a switch-based port analysis function is that the traffic need not be analyzed in real time, and a sample subset of the devices on the network can be selected for such analysis based on, for example, either identifying devices that have suspect service policy implementation behavior and\/or a regular sampling algorithm that eventually samples all devices, or some other selection approaches. As another example, a scheduled switch-based port analysis sampling can be applied that eventually rotates through all devices and designates a higher priority in the sampling queue for devices that are suspect.","In some embodiments, switch-based port analysis allows for off-line sampled or non-real-time DPI, as described above, as a verification measure for the device-based service control measures that are implemented. In some embodiments, sophisticated DPI techniques are used to enhance the content of the IPDRs so that they provide detailed information that can be made available in the network. For example, some of the DPI packet analysis may be redundant between the device and the network, but this approach provides for a much finer grain validation for the device-based service and less reliance on the device for some of the service traffic analysis that service providers need. In some embodiments, the device control server functions and the service control policy verification functions are implemented in an integrated hardware\/software system (e.g., a gateway, server, router, switch, base station, base station aggregator, AAA server cluster or any other hardware or hardware\/software system) located in the network that the network level traffic inspection is accomplished in, or in one or more servers integrated to operate in a coordinated manner with the DPI boxes. In some embodiments, the device control server functions and the service control policy verification functions are implemented in an integrated hardware\/software system (e.g., a gateway, server, router, switch, base station, base station aggregator, AAA server cluster or any other hardware or hardware\/software system) located in the network that provides deep service control capability (e.g., using DPI techniques) for devices that have some or all of the service processor functions installed and, in some embodiments, also providing coarser network control of the basics for devices that do not have a service processor installed in the device (e.g., such coarser network control functions include max data rate and\/or max total data).","In some embodiments, the SPAN function is used in a revolving periodic manner as well to augment CDR data with deeper packet information for the purpose of spot-checking device-based service usage measures. Examples of where this can be beneficial include spot checking network address access policies, spot checking ambient access policies, spot checking billing event reports, spot checking intermediate networking device\/end-point device count (via checking network source or destination addresses, token, cookies or other credentials, etc.). For example, the periodic SPAN can be scheduled for all devices equally, for certain devices or users with higher priority, frequency or depth of SPAN than others, higher priority, higher frequency or immediate priority for devices with higher usage patterns or unusual usage patterns, immediate or very high priority for devices with a policy violation status.","In some embodiments, a combination traffic inspection and service control approach implements traffic and service control functions in the network that are conducive for a network-based implementation and implements traffic and service control functions in the device that are either more conducive for performing in the device or can only be performed in the device (e.g., activities involving inspection of traffic that is encrypted once it is transmitted to the network). For example, using this approach, activities that can be done in the network are generally performed in the network and\/or are more efficiently performed in the network than the device, and activities that are more efficiently performed in the device or can only be performed in the device are performed in the device (e.g., depending on device processing\/storage capabilities and\/or other design\/security considerations). For example, the following are various traffic and service control functions that, in some embodiments, are preferably or can only be performed in the device: network-based packet processing capability limitations (e.g., encrypted traffic, application layer information unavailable once the traffic goes into the networking stack, other application\/usage context information available on the device but not in the network); information that is generally\/preferably maintained and processed locally in the device for network neutrality reasons (e.g., network neutrality issues can generally be efficiently implemented by keeping all, substantially all or at least some aspect of decisions on how to implement algorithms to control traffic local to the device and under user decision control, and\/or by providing the user with a set of pre-packaged choices on how to manage service usage or service activity usage or manage service usage versus service cost or price); information that is generally\/preferably maintained and processed locally in the device for user privacy reasons (e.g., deeper levels of traffic monitoring and service usage monitoring data where it is available for assisting the user in achieving the best, lowest cost experience and implementing a CRM filter function to the user so that the user can control the level of CRM the network is allowed to receive, such as with the higher levels of information being exchanged for something of value to the user, and\/or user location information); information that is generally\/preferably maintained and processed locally in the device for the purpose of informing the user of service control settings or service activity usage or to adjust service activity control settings or receive user feedback to choices regarding service usage policies or billing options (e.g., providing the user with a UI for the purpose of monitoring an estimate of service usage and\/or notifying the user of at least some aspect of estimated service usage or projected service usage, providing the user with a UI for the purpose of monitoring an estimate of service cost and\/or notifying the user of at least some aspect of estimated service cost or projected service cost, providing the user with a UI for the purpose of providing the user with one or more service usage and\/or service cost notification messages that require user acknowledgement and\/or a user decision and obtaining or reporting the user acknowledgements and\/or decisions, providing the user with a UI for the purpose of providing the user with service options and\/or service payment options, providing the user with a UI for the purpose of obtaining user choice for such options when service usage or cost estimates are about to run over limits or have run over limits or are projected to run over limits, providing the user with a UI for the purpose of monitoring or conducting open central billing transactions or other transactions, providing the user with a UI for the purpose of selecting the service control techniques and\/or policies and\/or algorithms and\/or pre-packaged configurations that can be used to define or partially define the service activity usage control policies implemented in the device service processor or the network service control equipment\/billing system or a combination of both); service control for roaming on different networks that typically do not have compatible DPI-type techniques with the home network; certain service notification and traffic control algorithms (e.g., stack-ranked activity statistical analysis and control of only the high usage activities); and\/or a function for assigning a device to a service experience or ambient activation experience or virtual service provider (VSP) at various times from manufacturing to device distribution to a user of the device. In some embodiments, certain activities are implemented in the device as a solution for networks in which a new centralized DPI approach is not possible, not economically feasible, or for any number of reasons not an option or not a preferred option.","In some embodiments, a network-based solution is provided for a more basic set of services for all devices that do not have service control capabilities, and a super-set of services and\/or additional services are provided for devices that include a service processor. As described herein, a service controller function can be located in various places in the network in accordance with various embodiments. It should also be noted that various other embodiments described herein also employ a hybrid service control function performing certain service control functions in the network (e.g., collecting network service usage information, such as IPDRs, and\/or performing DPI related functions in the network for collecting network service usage information and\/or throttling\/shaping traffic) and service control functions in the device (e.g., service processor , which, for example, monitors service usage in the device and\/or performs throttling or traffic shaping in the device and\/or performs certain billing event recording and reporting functions that are aptly performed on the device).","In some embodiments, lower level service policy implementation embodiments are combined with a higher level set of service policy supervision functions to provide device-assisted verifiable network access control, authentication and authorization services.","In some embodiments, device-based access control services are extended and combined with other policy design techniques to create a simplified device activation process and connected user experience referred to herein as ambient activation. As similarly discussed above, ambient activation can be provided by setting access control to a fixed destination, verifying access with IPDRs, verifying access by setting a max data rate and triggering off in the network if it exceeds the max data rate, and\/or by various other techniques.","As shown in , service controller  includes a service history server . In some embodiments, the service history server  collects and records service usage or service activity reports from the Access Network AAA Server  and the Service Monitor Agent . For example, although service usage history from the network elements can in certain embodiments be less detailed than service history from the device, the service history from the network can provide a valuable source for verification of device service policy implementation, because, for example, it is extremely difficult for a device error or compromise event on the device to compromise the network-based equipment and software. For example, service history reports from the device can include various service tracking information, as similarly described above. In some embodiments, the service history server  provides the service history on request to other servers and\/or one or more agents. In some embodiments, the service history server  provides the service usage history to the device service history . In some embodiments, for purposes of facilitating the activation tracking service functions (described below), the service history server  maintains a history of which networks the device has connected to. For example, this network activity summary can include a summary of the networks accessed, activity versus time per connection, and\/or traffic versus time per connection. As another example, this activity summary can further be analyzed or reported to estimate the type of service plan associated with the traffic activity for the purpose of bill sharing reconciliation.","As shown in , service controller  includes a policy management server . In some embodiments, the policy management server  transmits policies to the service processor  via the service control link . In some embodiments, the policy management server  manages policy settings on the device (e.g., various policy settings as described herein with respect to various embodiments) in accordance with a device service profile. In some embodiments, the policy management server  sets instantaneous policies on policy implementation agents (e.g., policy implementation agent ). For example, the policy management server  can issue policy settings, monitor service usage and, if necessary, modify policy settings. For example, in the case of a user who prefers for the network to manage their service usage costs, or in the case of any adaptive policy management needs, the policy management server  can maintain a relatively high frequency of communication with the device to collect traffic and\/or service measures and issue new policy settings. In this example, device monitored service measures and any user service policy preference changes are reported, periodically and\/or based on various triggers\/events\/requests, to the policy management server . In this example, user privacy settings generally require secure communication with the network (e.g., a secure service control link ), such as with the policy management server , to ensure that various aspects of user privacy are properly maintained during such configuration requests\/policy settings transmitted over the network. For example, information can be compartmentalized to service policy management and not communicated to other databases used for CRM for maintaining user privacy.","In some embodiments, the policy management server  provides adaptive policy management on the device. For example, the policy management server  can issue policy settings and objectives and rely on the device-based policy management (e.g., service processor ) for some or all of the policy adaptation. This approach can require less interaction with the device thereby reducing network chatter on service control link  for purposes of device policy management (e.g., network chatter is reduced relative to various server\/network-based policy management approaches described above). This approach can also provide robust user privacy embodiments by allowing the user to configure the device policy for user privacy preferences\/settings so that, for example, sensitive information (e.g., geo-location data, website history) is not communicated to the network without the user's approval. In some embodiments, the policy management server  adjusts service policy based on time of day. In some embodiments, the policy management server  receives, requests or otherwise obtains a measure of network availability and adjusts traffic shaping policy and\/or other policy settings based on available network capacity.","In some embodiments, the policy management server  performs a service control algorithm to assist in managing overall network capacity or application QoS. In some embodiments, the policy management server  performs an algorithm to determine which access network is best to connect to, such as based on network capacity or application QoS, service usage costs, and\/or any other criteria. In some embodiments, the device is capable of connecting to more than one network, and accordingly, device service policies can be selected\/modified based on which network the device is connected to. In some embodiments, the network control plane servers detect a network connection change from a first network to a second network and initiate the service policy implementation established for the second network. In other embodiments, the device-based adaptive policy control agent (e.g., policy control agent  described herein) detects network connection changes from the first network to the second network and implements the service policies established for the second network.","In some embodiments, when more than one access network is available, the network is chosen based on which network is most preferred according to a network preference list or according to the network that optimizes a network cost function. For example, the preference list can be pre-established by the service provide and\/or the user. For example, the network cost function can be based on a minimum service cost, maximum network performance, determining whether or not the user or device has access to the network, maximizing service provider connection benefit, reducing connections to alternative paid service providers, and\/or a variety of other network preference criteria. In other embodiments, the device detects when one or more preferred networks are not available, implements a network selection function or intercepts other network selection functions, and offers a connection to the available service network that is highest on a preference list. For example, the preference list can be set by the service provider, the user and\/or the service subscriber.","As shown in , service controller  includes a network traffic analysis server . In some embodiments, the network traffic analysis server  collects\/receives service usage history for devices and\/or groups of devices and analyzes the service usage. In some embodiments, the network traffic analysis server  presents service usage statistics in various formats to identify improvements in network service quality and\/or service profitability. In other embodiments, the network traffic analysis server  estimates the service quality and\/or service usage for the network under variable settings on potential service policy. In other embodiments, the network traffic analysis server  identifies actual or potential service behaviors by one or more devices that are causing problems for overall network service quality or service cost.","As shown in , service controller  includes a beta test server . In some embodiments, the beta test server  publishes candidate service plan policy settings to one or more devices. In some embodiments, the beta test server  provides summary reports of network service usage or user feedback information for one or more candidate service plan policy settings. In some embodiments, the beta test server  provides a mechanism to compare the beta test results for different candidate service plan policy settings or select the optimum candidates for further policy settings optimization.","As shown in , service controller  includes a service download control server . In some embodiments, the service download control server  provides a download function to install and\/or update service software elements (e.g., the service processor  and\/or agents\/components of the service processor ) on the device, as described herein.","As shown in , service controller  includes a billing event server . In some embodiments, the billing event server  collects billing events, provides service plan information to the service processor , provides service usage updates to the service processor , serves as interface between device and central billing server , and\/or provides trusted third-party function for certain ecommerce billing transactions.","As shown in , the Access Network AAA server  is in network communication with the access network . In some embodiments, the Access Network AAA server  provides the necessary access network AAA services (e.g., access control and authorization functions for the device access layer) to allow the devices onto the central provider access network and the service provider network. In some embodiments, another layer of access control is required for the device to gain access to other networks, such as the Internet, a corporate network and\/or a machine to machine network. This additional layer of access control can be implemented, for example, by the service processor  on the device. In some embodiments, the Access Network AAA server  also provides the ability to suspend service for a device and resume service for a device based on communications received from the service controller . In some embodiments, the Access Network AAA server  also provides the ability to direct routing for device traffic to a quarantine network or to restrict or limit network access when a device quarantine condition is invoked. In some embodiments, the Access Network AAA server  also records and reports device network service usage (e.g., device network service usage can be reported to device service history ).","As shown in , the device service history  is in network communication with the access network . In some embodiments, the device service history  provides service usage data records used for various purposes in various embodiments. In some embodiments, the device service history  is used to assist in verifying service policy implementation. In some embodiments, the device service history  is used to verify service monitoring. In some embodiments, the device service history  is used to verify billing records and\/or billing policy implementation. In some embodiments, the device service history  is used to synchronize and\/or verify the local service usage counter.","As shown in , the central provider billing server  is in network communication with the access network . In some embodiments, the central provider billing server  provides a mediation function for central provider billing events. For example, the central provider billing server  can accept service plan changes. In some embodiments, the central provider billing server  provides updates on device service usage, service plan limits and\/or service policies. In some embodiments, the central provider billing server  collects billing events, formulates bills, bills service users, provides certain billing event data and service plan information to the service controller  and\/or device .","Establishing Coordinated Service and Verification Policies for Service Processor, Service Controller and Network Functions","In some embodiments, device and network apparatus coordinate one or more of the following: network service policy implementation settings, device service policy implementation settings, network service profile implementation settings, device service profile implementation settings, network service usage measures used for the purpose of verifying service policy implementation, device service usage measures used for the purpose of verifying service policy implementation, network actions taken upon detection of service usage policy violation and device actions taken upon detection of service usage policy violation. In some embodiments, local device settings for the service monitoring, usage and\/or billing profile or policy settings used, for example, by a device service processor , are associated with corresponding records for the various network apparatus that also rely upon the service policy and profile settings to monitor, control and\/or bill for services or to respond to out of policy service usage conditions. For example, such network apparatus include the service controller  or similar functions, the billing system  or similar functions, the network AAA , gateways , , , , , , , , , , , or other networking equipment. In some embodiments, the service profile or policy settings are associated between the device and network in a manner that allows for effective and coordinated operation between the device service processor  and the network apparatus, but does not require an explicit function that simultaneously controls\/coordinates the service policy or profile implementation and\/or verification actions taken by the device  (e.g., the service processor ) and the network apparatus. As an example, such embodiments can be applied in overlay applications as discussed below.","In some embodiments, a network function (e.g., the service controller , and\/or more specifically the policy management server  function, or other similar function) obtain, derive or otherwise determine the association of the service profile or policy settings to program a device service processor  and the various network apparatus functions (e.g., possibly including but not limited to the service controller  or similar functions, the billing system  or similar functions, the network AAA , gateways , , , , , , , , , , , or other networking equipment) by reading, receiving, querying, pulling or otherwise obtaining the settings from one or more of the network apparatus functions or from a data base that stores the service policy or profile settings for one or more of the network apparatus functions. After obtaining one or more of the network apparatus settings, a mapping (e.g., an association) of the network apparatus settings to the appropriate device  (service processor ) settings can be determined to advantageously support the service usage monitoring, service usage control, service usage billing or service usage verification objectives being addressed. The policy or profile settings for the device can be a direct translation of the policy or profile settings used for the network apparatus, or the device policy or profile settings can be less directly derived from the network apparatus policy or profile settings. For example, service usage limits contained in the billing system  service plan can be either directly mapped to usage limit settings on the device service processor  (e.g., service usage stops when the limit is hit or the user is notified or the user is billed), or the usage limits can be mapped to a number of service profiles the user may select from (e.g., as discussed herein, the user can select from options involving various actual usage versus usage limit notification policies and\/or service usage control, limitations or throttling policies).","For example, the service usage policy or profile limits or allowances maintained for the network apparatus functions (e.g., the service profile or service plan usage limits stored in the billing system  or AAA ) can be read or queried by a network function (e.g., the service controller  or the service controller  through a second intermediary server connected to the billing system  and\/or the AAA system ), and the service usage limits stored in these networking apparatus can be either directly translated to the settings for the service processor  or may need to be interpreted, expanded or otherwise modified to obtain the required service processor  policy and\/or profile settings.","In some embodiments, the service usage limits set in the billing system  service plan record, and\/or the service profile record stored in the AAA system  can be acquired (e.g., from the apparatus or from a database storing the settings for the apparatus) by the service controller (or another network function) and directly translated and used to program the settings in the service processor . In some embodiments, the service usage limits are determined or obtained by the activation server apparatus embodiments, other apparatus embodiments associated with service activation, or the virtual service provider embodiments, as described herein. In this manner, once the association of the service usage profile or policy settings used by a device service processor  and the profile or policy settings used by the various network apparatus functions is established, then the service policy or profile for service monitoring, control, billing, verification and\/or actions taken on verification error can be coordinated between device and network even if some of the network functions act independent of some of the device functions.","For example, associating the service usage policies and\/or profiles between the device service processor  and the various network apparatus functions, and then allowing for independent operation or action by the various functions in a manner that results in a coordinated outcome, facilitates an overlay of the device-assisted services technology onto existing network equipment in a manner that results in reliable and verifiable service enhancements while minimizing the need for major existing network equipment upgrades.","In some embodiments, the association of the service profile or policy settings used by a device service processor  and the service profile or policy settings used by the various network apparatus functions can be provided by a centralized network function that determines the appropriate settings for the network apparatus and the service processor  and sets one or more settings to each function. In some embodiments, this networking function is provided by a centralized network management function or service account activation function (e.g., the activation server apparatus embodiments, one of the other disclosed apparatus embodiments associated with service activation or the virtual service provider apparatus embodiments, as described herein).","In some embodiments, the association of the service profile or policy settings used by a device service processor  and the service profile or policy settings used by the various network apparatus functions can be provided by a network function that by reads, receives, queries, pulls or otherwise obtains the setting used by the service controller  or the service processor . The network function can then determine the association of the service profile or policy settings used by a device service processor  and the service profile or policy settings required by the various network apparatus functions before writing, transmitting, pushing, or otherwise recording the appropriate settings required by each of the other network apparatus functions. In some embodiments, this functionality can be implemented in the service controller (e.g., the policy management server, possibly acting in coordination with another network function or server), which then links into the databases used for storing the policy or profile settings for the other network apparatus.","In some embodiments, once the association is established between service policy or profile settings in the network apparatus and the service policy or profile settings in the service processor , then the network-based service usage measures (e.g., IPDRs communicated to the billing system , the AAA , service controller  or other network functions used to verify service usage and\/or take actions) used for verification of device  service usage versus service policy or profile can be monitored by the network apparatus (e.g., billing system  and AAA ) independent of coordination with the service processor  and\/or independent of the service controller . In some embodiments, in addition to independent monitoring and verification of service usage versus policy, independent service profile or policy verification error response actions can be taken by the network apparatus (e.g., suspend, quarantine, SPAN or flag device , notify the user and possibly require acknowledgement, or bill the user account for service usage overage) without direct involvement by the service processor  and\/or the service controller .","Accordingly, the association between service profile and\/or service policy that is implemented on the device  (e.g., service processor ) and the service profile and\/or policy usage limits recorded in network apparatus can be associated with one another by one or more of the following: (A) implementing a function to read from the network database (e.g., the billing  data base, AAA  data base, service controller  data base, etc.) and mapping the network profiles and\/or policies to device  (e.g., service processor ) profiles and\/or policies; (B) implementing a function that simultaneously sets the device profile and\/or policy and the network equipment profile and\/or policy recorded in the appropriate data base records; and (C) implementing a function that reads the profile and\/or policy on the device  (e.g., service processor ) or the service controller  and then sets the network equipment profile and\/or policy recorded in the appropriate data base records. This allows for a simplified but coordinated response to monitoring, controlling and billing for service usage, for verifying service usage versus service usage profile or policy, and\/or initiating or carrying out network actions in response to service usage versus profile or policy verification errors and\/or device actions in response to service usage versus profile or policy verification errors.",{"@attributes":{"id":"p-0437","num":"0436"},"figref":["FIG. 25","FIG. 25","FIG. 24","FIG. 25","FIG. 25"],"b":["115","122","122","1653","122","115","1610"]},{"@attributes":{"id":"p-0438","num":"0437"},"figref":["FIG. 26","FIG. 26","FIG. 24","FIG. 26"],"b":["115","122","1804","1811","1811","1655","1831","1815","1814","1813","1812","1811"]},{"@attributes":{"id":"p-0439","num":"0438"},"figref":["FIG. 27","FIG. 27"],"b":["115","122","115","122","122","115","1690","122"]},"Referring to , in some embodiments, many of the service policy implementation verification and compromise protection techniques are similarly provided using these simplified configurations of the service processor  and the service controller , as described above with respect to, for example, . For example, the service control device link  and service control server link  can be used for downloading service policies to the policy implementation agent  (but, in some embodiments, cannot perform the heartbeat or authentication function).","For example, a basic service profile or service policy implementation verification technique for this reduced configuration calls for the access control integrity server  to obtain IPDRs from access network AAA server  (e.g., or other network functions as described herein) and compare the service usage exhibited by device  with a range of expected service usage that would be expected if the intended service policies were in place on the device. In some embodiments, the access control integrity server  initiates or carries out one or more of the service usage profile or policy verification error response actions disclosed herein, including, for example, one or more of the following: notify the user of the out of policy or overage condition, require the user to acknowledge the condition and\/or acknowledge a subsequent billing event to proceed, bill the user for service overage, suspend the device from the network, quarantine the device, SPAN the device, or notify a network manager or device management or error handling function.","In some embodiments, a service profile or service policy implementation verification technique for this reduced configuration calls for the billing system  to obtain IPDRs from access network AAA server  (or other network functions as discussed herein) and compare the service usage exhibited by device  with a range of expected service usage that would be expected if the intended service policies were in place on the device. In some embodiments, the billing system  initiates or carries out one or more of the service usage profile or policy verification error response actions disclosed herein, including, for example, one or more of the following: notify the user of the out of policy or overage condition, require the user to acknowledge the condition and\/or acknowledge a subsequent billing event to proceed, bill the user for service overage, suspend the device from the network, quarantine the device, SPAN the device, or notify a network manager or device management or error handling function.","In some embodiments, a service profile or service policy implementation verification technique for this reduced configuration calls for the AAA server  itself to compare the service usage exhibited by device  with a range of expected service usage that would be expected if the intended service policies were in place on the device. In some embodiments, the AAA server  initiates or carries out one or more of the service usage profile or policy verification error response actions disclosed herein, including, for example, one or more of the following: notify the user of the out of policy or overage condition, require the user to acknowledge the condition and\/or acknowledge a subsequent billing event to proceed, bill the user for service overage, suspend the device from the network, quarantine the device, SPAN the device, or notify a network manager or device management or error handling function.","Accordingly, this approach provides a basic first layer of service policy implementation verification that does not depend on device-based agent behavior for the verification. If the service policy is in error in a way that violates the expected service policy usage limits, then the access control integrity server  will detect this condition and appropriate action can be taken. In some embodiments, if one or more service policy integrity verification tests fail, the appropriate responsive actions can include routing the device to quarantine status, sending an error message to the device or device user interface and then suspend access for the device, and\/or limiting access in some way without completely suspending access, as similarly described above. In some embodiments, if one or more service policy integrity verification tests fail, the appropriate responsive actions can include logging excess service usage above the intended service policy limits and billing the user for some or all of the excess usage, sending the user a notification and\/or acknowledgement response request (possibly including a simple keystroke acknowledgement, or a password, a biometric signature or other secure response), and\/or limiting access in some way without completely suspending access, as similarly described above.","In some embodiments, a billing system technique provides another verification overlay. For example, the service processor  can have a set of service policy implementations (or service profile) that calls for maintaining service usage within a certain limit, or assisting the user or network to maintain service usage to that limit. The billing system  can be implemented in a way to provide a \u201cback stop\u201d to the service usage controls or limits provided for by the service processor , so that even if the service processor  is compromised, hacked, spoofed or is otherwise in error, the billing system  protects the service provider, \u201cservice owner\u201d, carrier, VSP or network operator from unpaid access beyond the service limits. This can be accomplished, for example, by assigning a service usage limit within the billing system  so that if the service processor  is compromised and the service usage runs over the desired limit, the billing system  automatically charges the user account for the overage. The billing system  can receive service usage information from the IPDRs that are aggregated in the network as in the case of a conventional billing system, and because these network-based measures are independent from the device agent operation, they cannot be spoofed by merely spoofing something on the device or service processor . In this manner, defeating the service processor  service agent control mechanisms described herein simply results in a billing charge and not free service. In some embodiments, if the service usage runs over the service usage limit specified in the service profile, the user can be notified as discussed herein, and the user can be required to acknowledge the overage and approve a billing charge for the overage as also discussed herein, with the acknowledgement being communicated back to the network in some embodiments. This positive acknowledgement also provides a layer of protection and verification of the service control and usage limit control for the device service processor . In some embodiment also discussed herein, the user is requested to input a password, biometric or other secure response to the usage overage notification, providing yet another layer of protection to verify that the user intends to pay for the service usage overage. In these embodiments taken individually or in combination, the service processor  assistance for service usage control can be verified and\/or protected from compromise.","In some embodiments, the service control device link  and service control server link  are used to implement the service processor  heartbeat authentication and communication functions to strengthen the verification of a proper service policy implementation of the embodiments of . For example, the heartbeat function can be used as authentication for service monitoring versus network reports. In addition, the heartbeat function can be used as authentication for challenge\/response queries of agents. Also, the heartbeat function can be used as authentication for access control. In some embodiments, to strengthen verification of the basic system illustrated in , the communication access to the policy implementation agent  is restricted so that software or hardware on device  and\/or on a network cannot have authorized access to the policy implementation agent . For example, authorized access to the policy implementation agent  can be restricted to include only the service controller  through the service control device link  and the service control server link . For example, the agent control bus  can be secured with encryption and\/or other security techniques so that only the service control device link  can have authorized access to the policy implementation agent . As another example, the agent level message encryption can be used as described herein.","In some embodiments, the service policy implementation agent  of the embodiments of  can be further strengthened against errors, intrusion, tampering, hacking and\/or other inadvertent or intentional integrity degradation by using various other techniques. For example, the dynamic agent download feature of the service controller  can download a new version of the policy implementation agent . In this example, the new agent code can be identical in functionality and also hashed, obfuscated or ordered differently before signing and encryption so that any hacking attempt must be reinitiated, and this process can be periodically repeated or repeated upon a triggering event. Additionally, once the new dynamically loaded agent is in place, it can be required to perform an environment scan to determine if the system configuration or operation are as expected, and\/or it can seek to detect elements in the execution environment that can be harmful or threatening to the integrity of the policy implementation. The agent can also be required to report back on the scan within a relatively short period of time so that any attempt to compromise the agent does not have sufficient time to be effective.","In some embodiments, the service policy implementation agent  of the embodiments of  can be further strengthened to protect the policy implementation from compromise attempts by locating the software and\/or hardware used onto an access modem associated with the service. For example, the modem can make it difficult to get access to the policy implementation agent  by employing one or more security elements on one or more access ports into the modem, such as the device bus, an I\/O port, a network connection or the debug port. The modem can also store and\/or execute the policy implementation agent in secure memory. The modem can also require a secure download key or a secure software signature to accept any updates to the agent software.","In some embodiments, the service policy implementation agent  of the embodiments of  can be further strengthened against compromise attempts by performing scans of the device  code execution environment and\/or code storage environment to identify potentially malicious and\/or unwanted\/untrusted software or hardware. For example, this function can be performed by the policy implementation agent . The agent can have a local database of potentially malicious elements and compare the entries in the database against the elements detected locally using various malicious code, behavior blocking, intrusion detection, and\/or other well known techniques for security analysis. Alternatively or in addition, the agent can communicate a list of some or all of the elements detected locally to the service controller  to augment or take the place of the database comparison function that can be performed locally, thereby performing such or further such security analysis on the network (e.g., by the service controller ), and, in some embodiments, if not automatically detected, such elements detected locally (e.g., and\/or samples of such detected potentially malicious code or logs of potentially malicious\/suspicious behavior\/intrusions) forwarded to security analysts for the service provider for further security analysis (e.g., service provider security analysts and\/or an outside security vendor engaged to protect the service provider's network and supported devices). In some embodiments, the agent detects new software downloads, installs and\/or invocations and immediately issues an error flag report when potentially malicious software is downloaded, installed or invoked (e.g., file and network based on access security detection techniques). In some embodiments, the agent scans the local software loading and invocation activity along with a log of other software runtime events and regularly reports this trace so that when an error or compromise event occurs the trace preceding the event can be analyzed to determine the offending software or activity trace that took place to cause the compromise or error. For example, once the software or activity that caused the compromise is known or otherwise detected, it can be entered into a refreshed version of the database that the device and other devices use to detect potentially malicious precursor conditions. Examples of such precursor events can include software invocations, software downloads, a sequence of memory I\/O events, a sequence of software access events, a sequence of network address or URL communications or downloads, or a sequence of access modem I\/O activity.",{"@attributes":{"id":"p-0450","num":"0449"},"figref":["FIG. 28","FIG. 28"],"b":["115","122","1655","1690","1693"]},{"@attributes":{"id":"p-0451","num":"0450"},"figref":["FIG. 29","FIG. 29","FIG. 29","FIG. 27"],"b":["115","122","2122","2125","2141","2122","2123","2124","2125","2141","2120","1696","1690","1655","1693"]},"As shown in , measurement point I occurs at the application interface agent  interface to the applications. At this measurement point, the application traffic can be monitored before it is framed, packetized or encrypted by the lower layers of the networking stack. For example, this allows inspection, characterization, tagging (literal or virtual) and, in some embodiments, shaping or control of services or traffic. At this measurement point, traffic can be more readily associated with applications, URLs or IP addresses, content type, service type, and other higher level parameters. For example, at this level email traffic and downloads, web browser applications and end points, media file transfers, application traffic demand, URL traffic demand and other such service monitoring parameters are more readily observed (e.g., accessible in the clear without the need for deep packet inspection and\/or decryption), recorded and possibly shaped or controlled. As described herein, it is also possible to monitor upstream traffic demand at this point and compare it to the other measurement points to determine if the traffic policies in place are meeting overall traffic control policy objectives or to determine if traffic policy implementation is operating properly. For example, the downstream delivered traffic can be optimally observed at this measurement point.","As shown in , traffic measurement points II and III are situated on the upstream and downstream sides of policy implementation agent . As described herein, these two locations allow potential tracking of upstream and downstream traffic through the stack portions associated with the policy implementation agent . These two locations also provide for potential cross-checking of how the policy implementation agent  is impacting the demand and delivery of traffic. In a similar manner, measurement point III in connection with measurement point IV provide an opportunity for packet tracing through the stack components associated with the modem firewall  and provide for the opportunity to observe the demand and delivery sides of the modem firewall . Traffic measurement point V provides the potential for observing the traffic at the modem bus drivers for each of the modems.","As shown in , traffic measurement point VI provides, in some embodiments, the ultimate measure of access traffic, for example, the traffic that actually transacts over the access network through the modem. As shown, measurement point VI is at the modem side of the internal or external communications bus , and it will be appreciated that, in some embodiments, this measurement point can be further down the modem stack closer to the MAC or physical layer (e.g., at the designer's discretion). An advantage of having a measurement point deep in the modem is, for example, that if the software or hardware that implements the measurement and reporting is well secured against compromise, then this measure can be almost as strong from a verification perspective as the measure that comes from the network (e.g., from the network elements). Accordingly, this makes it possible to compare this measure against the other measures to determine if there is a traffic path that is leaking past the other measurement point or one or more policy implementation points.",{"@attributes":{"id":"p-0455","num":"0454"},"figref":["FIGS. 30A and 30B","FIGS. 30A and 30B","FIGS. 30A and 30B"],"b":"115"},{"@attributes":{"id":"p-0456","num":"0455"},"figref":["FIG. 31","FIG. 31","FIG. 31"],"b":"122"},"In some embodiments, it is desirable to provide a control plane between the service processor and the service controller using a flexible connection or communication path that, for example, will work between virtually any two network connection endpoints, one being the service controller and one being the device, in a secure yet scalable manner. In view of the embodiments described herein, one of ordinary skill in the art will recognize that it is possible to achieve such features with a variety of different embodiments that share similar core features to the embodiments described herein.","Service Control Device Link and Continuous Heartbeat Authentication","As described herein, there are numerous ways to implement the control plane communication channel between the service processor  and the service controller . Various embodiments described herein disclose a secure and bandwidth efficient control plane that is compatible with any IP based network (including the ability to locate the service controller  over the Internet); provides for consistent device-assisted service monitoring, control, verification and\/or billing while roaming across multiple networks with different access technologies; and allows continuous device-assisted service control verification and\/or authentication with a variety of mechanisms for setting the transmission heartbeat frequency. Other techniques that could be used for this function include, for example, encapsulating the control plane in the access network control plane channel, encapsulating the control plane in IP or data packet framing mechanisms (e.g., IPV6), running a more conventional VPN or IPSEC channel, and\/or using an independent access network connection.",{"@attributes":{"id":"p-0460","num":"0459"},"figref":["FIG. 32","FIG. 32"],"b":["1691","115","1638","122","1691","115","1638","122","1653","115","122","2408","2428","2412","2422","2410","2420","2408","2428","2410","2420","1691","1630","1691","1630","120","1630","1691","1630","1691"]},"In some embodiments, all of the service control device link  communications are transformed into a continuous control plane connection, with a frequency based on the rate of service usage, a minimum set period between connections, and\/or other methods for establishing communication frequency. In some embodiments, this heartbeat function provides a continuous verification link by which the service controller verifies that the service processor and\/or device are operating properly with the correct service policies being implemented. In view of the following heartbeat function embodiments described herein, it will be apparent to one of ordinary skill in the art that different approaches for implementing the various heartbeat embodiments are possible, and it will be clear that there are many ways to achieve the essential features enabling a reliable, sometimes continuous control link and verification function for the purpose of assisting control of service usage in a verifiable manner. As shown, inside the service processor , the service control device link  includes a heartbeat send counter  in communication with the agent communication bus . For example, the heartbeat send counter  can provide a count for triggering when a service processor  communication (e.g., periodic communication based on a heartbeat mechanism) should be sent to the service controller , and a heartbeat buffer , also in communication with the agent communication bus , buffers any such information for the next service processor  communication, in accordance with various heartbeat based embodiments, as similarly described herein. The heartbeat buffer  is in communication with a framing element  and an encrypt element  for framing and encrypting any service processor  communications transmitted to the service controller  by a transport services stack  over the service control link . Similarly, as shown inside the service controller , the service control server link  includes a heartbeat send counter  in communication with a service controller network , a heartbeat buffer , also in communication with the service controller network , buffers any such information for the next service controller  communication, in accordance with various heartbeat based embodiments, as similarly described herein. The heartbeat buffer  is in communication with a framing element  and an encrypt element  for framing and encrypting any such service controller  communications transmitted to the service processor  by a transport services stack  over the service control link .","As also shown inside the service processor  of , the service control device link  includes a decode element  for decoding any received service controller  communications (e.g., decrypting encrypted communications), an unpack element  for unpacking the received service controller  communications (e.g., assembling packetized communications), and an agent route  for routing the received service controller  communications (e.g., commands, instructions, heartbeat related information or status reports, policy related information or configuration settings and\/or updates, challenge\/response queries, agent refreshes and\/or new software for installation) to the appropriate agent of the service processor . Similarly, as shown inside the service controller , the service control server link  also includes a decode element  for decoding any received service processor  communications (e.g., decrypting encrypted communications), an unpack element  for unpacking the received service processor  communications (e.g., assembling packetized communications), and an agent route  for routing the received service processor  communications (e.g., responses to instructions and\/or commands, heartbeat related information or status reports, policy related information or configuration settings and\/or updates, challenge\/response queries, agent status information, network service\/cost usage and\/or any other reporting related information) to the appropriate agent of the service controller . Accordingly, as described herein with respect to various embodiments, the various secure communications between the service controller  and the service processor  can be performed using the embodiment as shown in , and those of ordinary skill in the art will also appreciate that a variety of other embodiments can be used to similarly provide the various secure communications between the service controller  and the service processor  (e.g., using different software and\/or hardware architectures to provide secure communications, such as using additional and\/or fewer elements\/functions or other design choices for providing such secure communications).","In some embodiments, an efficient and effective communication framing structure between the service processor and service controller is provided, and the following embodiments (e.g., as shown and described with respect to ) teach such a structure that packs the various service processor agent control plane communications and the various service controller element control plane connections into a format that does not consume excessive bandwidth to enable a continuous control plane connection between the device and service controller. In some embodiments, an efficient and effective communication framing structure between the service processor and service controller is provided to buffer such communication messages for some period of time before framing and transmitting, such as in a heartbeat frequency that is based on rate of service usage. In some embodiments, an efficient and effective communication framing structure between the service processor and service controller is provided to allow for the frame to be easily packed, encrypted, decoded, unpacked and the messages distributed. In view of the various embodiments described herein, it will be apparent to one of ordinary skill in the art that many framing structures will work for the intended purpose of organizing or framing agent communications and the uniqueness and importance of combining such a system element with the device service controller functions, the service processor functions, the service control verification functions and\/or the other purposes.",{"@attributes":{"id":"p-0464","num":"0463"},"figref":["FIG. 33","FIG. 32","FIG. 33","FIG. 33","FIG. 33"],"b":["2502","2522","1691","115","1638","122","1653","115","122","2502","2522","2502","2504","2506","2508","2510","2512","2514","2516","2518","2502","2522","2524","2526","2528","2530","2532","2534","2536","2538","2522"]},{"@attributes":{"id":"p-0465","num":"0464"},"figref":["FIGS. 34A through 34H","FIGS. 34A-34H"]},{"@attributes":{"id":"p-0466","num":"0465"},"figref":["FIGS. 35A through 35M","FIGS. 35A through 35M"]},{"@attributes":{"id":"p-0467","num":"0466"},"figref":["FIGS. 36A through 36D","FIGS. 36A through 36D"]},"Device Assisted Service Control and Traffic Control","As described below, various techniques are disclosed for implementing device-assisted traffic shaping and service control at the lower levels of service usage policy implementation.",{"@attributes":{"id":"p-0470","num":"0469"},"figref":["FIG. 37","FIG. 24","FIG. 29"],"b":["1696","1690","1655","1693"]},"In some embodiments, the service monitor agent and\/or other agents implement virtual traffic tagging by tracking or tracing packet flows through the various communication stack formatting, processing and encryption steps, and providing the virtual tag information to the various agents that monitor, control, shape, throttle or otherwise observe, manipulate or modify the traffic. This tagging approach is referred to herein as virtual tagging, because there is not a literal data flow, traffic flow or packet tag that is attached to flows or packets, and the book-keeping to tag the packet is done through tracking or tracing the flow or packet through the stack instead. In some embodiments, the application interface and\/or other agents identify a traffic flow, associate it with a service usage activity and cause a literal tag to be attached to the traffic or packets associated with the activity. This tagging approach is referred to herein as literal tagging. There are various advantages with both the virtual tagging and the literal tagging approaches. For example, it can be preferable in some embodiments to reduce the inter-agent communication required to track or trace a packet through the stack processing by assigning a literal tag so that each flow or packet has its own activity association embedded in the data. As another example, it can be preferable in some embodiments to re-use portions of standard communication stack software or components, enhancing the verifiable traffic control or service control capabilities of the standard stack by inserting additional processing steps associated with the various service agents and monitoring points rather than re-writing the entire stack to correctly process literal tagging information, and in such cases, a virtual tagging scheme may be desired. As yet another example, some standard communication stacks provide for unused, unspecified or otherwise available bit fields in a packet frame or flow, and these unused, unspecified or otherwise available bit fields can be used to literally tag traffic without the need to re-write all of the standard communication stack software, with only the portions of the stack that are added to enhance the verifiable traffic control or service control capabilities of the standard stack needing to decode and use the literal tagging information encapsulated in the available bit fields. In the case of literal tagging, in some embodiments, the tags are removed prior to passing the packets or flows to the network or to the applications utilizing the stack. In some embodiments, the manner in which the virtual or literal tagging is implemented can be developed into a communication standard specification so that various device or service product developers can independently develop the communication stack and\/or service processor hardware and\/or software in a manner that is compatible with the service controller specifications and the products of other device or service product developers.","It will be appreciated that although the implementation\/use of any or all of the measurement points illustrated in  is not required to have an effective implementation, such as was similarly shown with respect to various embodiments described herein, such as with respect to , various embodiments can benefit from these and\/or similar measurement points. It will also be appreciated that the exact measurement points can be moved to different locations in the traffic processing stack, just as the various embodiments described herein can have the agents affecting policy implementation moved to different points in the traffic processing stack while still maintaining effective operation. In some embodiments, one or more measurement points are provided deeper in the modem stack (e.g., such as for embodiments similarly described herein with respect to ) where, for example, it is more difficult to circumvent and can be more difficult to access for tampering purposes if the modem is designed with the proper software and\/or hardware security to protect the integrity of the modem stack and measurement point(s).","Referring to , describing the device communications stack from the bottom to the top of the stack as shown, the device communications stack provides a communication layer for each of the modems of the device at the bottom of the device communications stack. Example measurement point VI resides within or just above the modem driver layer. For example, the modem driver performs modem bus communications, data protocol translations, modem control and configuration to interface the networking stack traffic to the modem. As shown, measurement point VI is common to all modem drivers and modems, and it is advantageous for certain embodiments to differentiate the traffic or service activity taking place through one modem from that of one or more of the other modems. In some embodiments, measurement point VI, or another measurement point, is located over, within or below one or more of the individual modem drivers. The respective modem buses for each modem reside between example measurement points V and VI. In the next higher layer, a modem selection & control layer for multimode device-based communication is provided. In some embodiments, this layer is controlled by a network decision policy that selects the most desirable network modem for some or all of the data traffic, and when the most desirable network is not available the policy reverts to the next most desirable network until a connection is established provided that one of the networks is available. In some embodiments, certain network traffic, such as verification, control, redundant or secure traffic, is routed to one of the networks even when some or all of the data traffic is routed to another network. This dual routing capability provides for a variety of enhanced security, enhanced reliability or enhanced manageability devices, services or applications. In the next higher layer, a modem firewall is provided. For example, the modem firewall provides for traditional firewall functions, but unlike traditional firewalls, in order to rely on the firewall for verifiable service usage control, such as access control and security protection from unwanted networking traffic or applications, the various service verification techniques and agents described herein are added to the firewall function to verify compliance with service policy and prevent tampering of the service controls. In some embodiments, the modem firewall is implemented farther up the stack, possibly in combination with other layers as indicated in other figures. In some embodiments, a dedicated firewall function or layer is provided that is independent of the other processing layers, such as the policy implementation layer, the packet forwarding layer and\/or the application layer. In some embodiments, the modem firewall is implemented farther down the stack, such as within the modem drivers, below the modem drivers, or in the modem itself. Example measurement point IV resides between the modem firewall layer and an IP queuing and routing layer. As shown, an IP queuing and routing layer is separate from the policy implementation layer where the policy implementation agent implements a portion of the traffic control and\/or service usage control policies. As described herein, in some embodiments, these functions are separated so that a standard network stack function can be used for IP queuing and routing, and the modifications necessary to implement the policy implementation agent functions can be provided in a new layer inserted into the standard stack. In some embodiments, the IP queuing and routing layer is combined with the traffic or service usage control layer. Examples of this combined functionality are shown and described with respect to . For example, a combined routing and policy implementation layer embodiment can also be used with the other embodiments, such as shown in . Various detailed embodiments describing how the policy implementation layer can control traffic or other service usage activities are described with respect to . Measurement point III resides between the IP queuing and routing layer and a policy implementation agent layer. Measurement point II resides between the policy implementation agent layer and the transport layer, including TCP, UDP, and other IP as shown. The session layer resides above the transport layer, which is shown as a socket assignment and session management (e.g., basic TCP setup, TLS\/SSL) layer. The network services API (e.g., HTTP, HTTPS, FTP (File Transfer Protocol), SMTP (Simple Mail Transfer Protocol), POP3, DNS) resides above the session layer. Measurement point I resides between the network services API layer and an application layer, shown as application service interface agent in the device communications stack of .","As shown, the application service interface layer is above the standard networking stack API and, in some embodiments, its function is to monitor and in some cases intercept and process the traffic between the applications and the standard networking stack API. In some embodiments, the application service interface layer identifies application traffic flows before the application traffic flows are more difficult or practically impossible to identify farther down in the stack. In some embodiments, the application service interface layer in this way assists application layer tagging in both the virtual and literal tagging cases. In the case of upstream traffic, the application layer tagging is straight forward, because the traffic originates at the application layer. In some downstream embodiments, where the traffic or service activity classification relies on traffic attributes that are readily obtainable, such as source address or URL, application socket address, IP destination address, time of day or any other readily obtained parameter, the traffic type can be identified and tagged for processing by the firewall agent or another agent as it initially arrives. In other embodiments, as described herein, in the downstream case, the solution is generally more sophisticated when a traffic parameter that is needed to classify the manner in which the traffic flow is to be controlled or throttled is not readily available at the lower levels of the stack, such as association with an aspect of an application, type of content, something contained within TLS, IPSEC or other secure format, or other information associated with the traffic. Accordingly, in some embodiments the networking stack identifies the traffic flow before it is fully characterized, categorized or associated with a service activity, and then passes the traffic through to the application interface layer where the final classification is completed. In such embodiments, the application interface layer then communicates the traffic flow ID with the proper classification so that after an initial short traffic burst or time period the policy implementation agents can properly control the traffic. In some embodiments, there is also a policy for tagging and setting service control policies for traffic that cannot be fully identified with all sources of tagging including application layer tagging.","Various applications and\/or a user service interface agent communicate via this communications stack, as shown (illustrating such communications with a reference (A)). Also, the billing agent, which is in communication with the agent communication bus , communicates user information and decision query and\/or user input to the user service interface agent, as shown. The policy control agent communicates service settings and\/or configuration information via this communications bus , as shown (illustrating such communications with a reference (B) via the application layer, policy implementation agent layer, which is lower in the communications stack as shown, and\/or the modem firewall layer). The connection manager agent communicates select and control commands and\/or modem and access network information via this communications stack, as shown (illustrating such communications with a reference (C) via the modem selection and control layer). Various other communications (e.g., service processor and\/or service controller related communications, such as service usage measure information and\/or application information) are provided at various levels of this communications stack, as shown (illustrating such communications with references (D) at the application layer, (E) at the policy implementation agent layer, and (F) at the modem firewall layer).","As shown in , a service monitor agent, which is also in communication with the agent communication bus , communicates with various layers of the device communications stack. For example, the service monitor agent, performs monitoring at each of measurement points I through VI, receiving information including application information, service usage and other service related information, and assignment information. An access control integrity agent is in communication with the service monitor agent via the agent communications bus , as also shown.","In some embodiments, one or more of the networking stack modifications described herein in combination one or more of the service verification and tamper prevention techniques described herein is provided. As similarly described with respect to , the various example embodiments for assisting service control verification described herein and as summarized in the example tables provided in  can be employed individually or in combination to create increasingly secure cross-functional service control verification embodiments. In , the presence of the access control integrity agent, policy control agent, service monitor agent and the other agents that perform verification and\/or tamper prevention functions illustrates verifiable service control aspects in accordance with some embodiments. Furthermore, the presence of the billing agent combined with the service verification and\/or tamper prevention agents and techniques described herein provides for a set of verifiable billing embodiments for service billing, service billing offset corrections, bill by account, transaction billing and other billing functions. In addition, the presence of the user service interface agent in combination with the service control agent functions in the modified networking stack provide for embodiments involving a combination of service control with user preferences, which as described herein, provides the user with the capability to optimize service versus service cost in a network neutral manner. In some embodiments, the user control of service control policy is provided along with the service control verification and\/or tamper prevention. The presence of the policy control agent that in some embodiments implements a higher than most basic level of policy decision and control with the policy implementation agents in the modified networking stack allows for, for example, the device to possess the capability to implement a higher level of service control for the purpose of obtaining a higher level service usage or service activity objective. In some embodiments, the application layer tagging in combination with other embodiments described herein provides for deep service activity control that is verifiable.","In some embodiments, verifiable traffic shaping as described herein can be performed using the device communications stack in a variety of embodiments for the combination of service control within the networking stack and service control verification and\/or tamper prevention, with various embodiments depicted in . Additional levels of detail regarding how such embodiments can be used to implement verifiable traffic shaping are provided in and described with respect to  which depict example functional diagrams of packet processing flows for verifiable traffic shaping or service activity control in a device service processor for both upstream and downstream flows. Along with several other interesting features embodied in , application traffic layer tagging is depicted in additional detail in accordance with some embodiments. For example, the application interface agent can determine service data usage at the application layer using measurement point I and a local service usage counter, and can, for example, pass this information to the service monitor agent. If service usage exceeds a threshold, or if using a service usage prediction algorithm results in predicted service usage that will exceed a threshold, then the user can be notified of which applications are causing the service usage overrun or potential service usage overrun, via the user service interface agent. The user can then identify which application service (e.g., traffic associated with a specified high service use or non-critical application, such as, for example, a high bandwidth consumption social networking website or service, media streaming website or service, or any other high bandwidth website or service transmitting and\/or receiving data with the service network) that the user prefers to throttle. As another example, the user could select a service policy that allows for video chat services until those services threaten to cause cost over-runs on the user's service plan, and at that time the service policy could switch the chat service to voice only and not transmit or receive the video. The traffic associated with the user specified application can then be throttled according to user preference input. For example, for downstream traffic, packets (e.g., packets that are virtually or literally tagged and\/or otherwise associated with the application traffic to be throttled) from the access network can be buffered, delayed and\/or dropped to throttle the identified application traffic. For upstream traffic, packets (e.g., packets that are virtually or literally tagged and\/or otherwise associated with the application traffic to be throttled) can be buffered, delayed and\/or dropped before being transmitted to the access network to throttle the identified application traffic. As similarly described above, traffic shaping as described herein can be verified, such as by the service monitor agent via the various measurement points and\/or using other agents.","The embodiments depicted in  and other figures generally require enhancements to conventional device networking communication stack processing. For example, these enhancements can be implemented in whole or in part in the kernel space for the device OS, in whole or in part in the application space for the device, or partially in kernel space and partially in application space. As described herein, the networking stack enhancements and the other elements of the service processor can be packaged into a set of software that is pre-tested or documented to enable device manufacturers to quickly implement and bring to market the service processor functionality in a manner that is compatible with the service controller and the applicable access network(s). For example, the service processor software can also be specified in an interoperability standard so that various manufacturers and software developers can develop service processor implementations or enhancements, or service controller implementations or enhancements that are compatible with one another.",{"@attributes":{"id":"p-0480","num":"0479"},"figref":["FIG. 38","FIG. 38","FIG. 38"]},"Referring to , describing the device communications stack from the bottom to the top of the stack as shown, the device communications stack provides a communication layer for modem MAC\/PHY layer at the bottom of the device communications stack. Measurement point IV resides above the modem MAC\/PHY layer. The modem firewall layer resides between measurement points IV and III. In the next higher layer, the policy implementation agent is provided, in which the policy implementation agent is implemented on the modem (e.g., on modem hardware). Measurement point II resides between the policy implementation agent and the modem driver layer, which is then shown below a modem bus layer. The next higher layer is shown as the IP queuing and routing layer, followed by the transport layer, including TCP, UDP, and other IP as shown. The session layer resides above the transport layer, which is shown as a socket assignment and session management (e.g., basic TCP setup, TLS\/SSL) layer. The network services API (e.g., HTTP, HTTPS, FTP (File Transfer Protocol), SMTP (Simple Mail Transfer Protocol), POP3, DNS) resides above the session layer. Measurement point I resides between the network services API layer and an application layer, shown as application service interface agent in the device communications stack of .","Various applications and\/or a user service interface agent communicate via this communications stack, as shown (illustrating such communications with a reference (A)). Also, the billing agent, which is in communication with the agent communication bus  communications user information and decision query and\/or user input to the user service interface agent, as shown. The policy control agent B communicates service settings and\/or configuration information via this communications stack, as shown (illustrating such communications with a reference (B)) via the application layer. The policy control agent A communicates service settings and\/or configuration information via this communications stack, as shown (illustrating such communications with a reference (D)) via the policy implementation agent layer and\/or the modem firewall layer. The connection manager agent communicates select & control commands and\/or modem and access network information via this communications stack, as shown (illustrating such communications with a reference (C)) via the modem driver layer. Various other communications (e.g., service processor and\/or service controller related communications, such as service usage measure information, and\/or application information) are provided at various levels of this communications stack, as shown (illustrating such communications with references (E)) at the application layer through the modem driver layer with the service monitor agent B as shown (and an access control integrity agent B is also shown), and communications with references (F) at the policy implementation agent layer and (G) at the modem firewall layer with the service monitor agent A as shown (and an access control integrity agent A is also shown). In some embodiments, the service usage policy verification or tamper prevention embodiments described herein can be applied, in isolation or in combination, in the context of  to provide for embodiments with increasing levels of service usage policy control verification certainty, such as provided with .",{"@attributes":{"id":"p-0483","num":"0482"},"figref":"FIG. 39"},"Referring to , describing the device communications stack from the bottom to the top of the stack as shown, the device communications stack provides a communication layer for the modem layer at the bottom of the device communications stack. The modem driver layer resides above the modem bus layer as shown. In the next higher layer, the policy implementation agent is provided, and the policy implementation agent is also in communication with the agent communication bus  as shown. The next higher layer is shown as the transport layer, including TCP, UDP, and other IP as shown. The session layer resides above the transport layer, which is shown as a socket assignment and session management (e.g., basic TCP setup, TLS\/SSL) layer. The network services API (e.g., HTTP, HTTPS, FTP (File Transfer Protocol), SMTP (Simple Mail Transfer Protocol), POP3, DNS) resides above the session layer. Applications communicate with the device communications stack via the network services API as shown. Policy settings from the network (e.g., service settings) are communicated with the policy implementation agent as shown. The connection manager communicates select and control as well as modem and access network information via the modem driver as shown. Although  does not depict all of the service usage control verification functions provided by certain embodiments calling for additional service verification or control agents, a high level of service policy implementation verification certainty can be achieved within the context of the embodiments depicted in  by applying a subset of the service usage policy verification or tamper prevention embodiments described herein. For example, the embodiments depicted in  can be combined with the service controller embodiments that utilize IPDRs to verify service usage is in accordance with the desired service policy. There are also many other service usage control embodiments described herein that can be applied in isolation or in combination to the embodiments depicted in  to provide increasing levels of service usage control verification certainty, as will be apparent to one of ordinary skill in the art in view of  and the various embodiments described herein.",{"@attributes":{"id":"p-0485","num":"0484"},"figref":["FIG. 40","FIG. 40","FIG. 38"]},"Referring to , describing the device communications stack from the bottom to the top of the stack as shown, the device communications stack provides a communication layer for each of the modems of the device at the bottom of the device communications stack. Measurement point II resides above the modem selection & control layer, which resides above the modem buses for each modem. Measurement point I resides between the policy implementation agent (policy based router\/firewall) layer and the transport layer, including TCP, UDP, and other IP as shown. The session layer resides above the transport layer, which is shown as a socket assignment and session management (e.g., basic TCP setup, TLS\/SSL) layer. The network services API (e.g., HTTP, HTTPS, FTP (File Transfer Protocol), SMTP (Simple Mail Transfer Protocol), POP3, DNS) resides above the session layer. Applications communicate with the device communications stack via the network services API as shown. Policy settings from the network (e.g., service settings) are communicated with the policy implementation agent as shown. The connection manager communicates select and control as well as modem and access network information via the modem selection and control layer as shown. The service monitor agent, which is also in communication with the agent communication bus , communicates with various layers of the device communications stack. For example, the service monitor agent, performs monitoring at each of measurement points I and II, receiving information including application information, service usage and other service related information, and assignment information. An access control integrity agent is in communication with the service monitor agent via the agent communications bus , as also shown. As similarly described with respect to , many of the service usage control verification embodiments described herein can be applied in isolation or in combination in the context of .",{"@attributes":{"id":"p-0487","num":"0486"},"figref":["FIG. 41","FIG. 41","FIG. 41"]},"Applications and\/or a user service interface agent communicate via this communications stack, as shown (illustrating such communications with a reference (A)). Also, the billing agent, which is in communication with the agent communication bus  communications user information and decision query and\/or user input to the user service interface agent, as shown. The policy control agent communicates service settings and\/or configuration information via this communications stack, as shown (illustrating such communications with a reference (B)) via the policy implementation agent layer. The connection manager agent communicates select & control commands and\/or modem and access network information via this communications stack, as shown (illustrating such communications with a reference (C)) via the modem selection and control layer. Various other communications (e.g., service processor and\/or service controller related communications, such as service usage measure information, application information) are provided at various levels of this communications stack, as shown (illustrating such communications with references (D)) at the application layer and (E) at the policy implementation agent layer.","As shown in , a service monitor agent, which is also in communication with the agent communication bus , communicates with various layers of the device communications stack. For example, the service monitor agent, performs monitoring at each of measurement points I through III, receiving information including application information, service usage and other service related information, and assignment information. An access control integrity agent is in communication with the service monitor agent via the agent communications bus , as also shown. As similarly described with respect to , many of the service usage control verification embodiments disclosed herein can be applied in isolation or in combination in the context of .",{"@attributes":{"id":"p-0490","num":"0489"},"figref":"FIG. 42"},"Referring to , describing the device communications stack from the bottom to the top of the stack as shown, the device communications stack provides a communication layer for each of the modems of the device at the bottom of the device communications stack. Measurement point II resides above the modem driver 1 layer. Measurement point I resides between the policy implementation agent (policy based router\/firewall) layer and the modem selection and control layer, for the modem driver 1 stack in this single modem driver embodiment. The transport layer, including TCP, UDP, and other IP resides above the IP queuing and routing layer, which resides above the modem selection and control layer, as shown. The session layer, which is shown as a socket assignment and session management (e.g., basic TCP setup, TLS\/SSL) layer, resides above the transport layer. The network services API (e.g., HTTP, HTTPS, FTP (File Transfer Protocol), SMTP (Simple Mail Transfer Protocol), POP3, DNS) resides above the session layer.","As shown in , applications communicate with the device communications stack via the network services API as shown (illustrating such communications with a reference (A)). Policy settings from the network (e.g., service settings) are communicated with the policy implementation agent as shown (illustrating such communications with a reference (B)). The service monitor agent, which is also in communication with the agent communication bus , communicates with policy implementation agent layer of the device communications stack. Also, the service monitor agent performs monitoring at each of measurement points I and II, receiving information including application information, service usage and other service related information, and assignment information. An access control integrity agent is in communication with the service monitor agent via the agent communications bus , as also shown. Various other communications (e.g., service processor and\/or service controller related communications, such as service usage measure information, application information) are provided at various levels of this communications stack, as shown (illustrating such communications with references (C)) at the policy implementation agent layer. Also, the billing agent, which is in communication with the agent communication bus  communications user information and decision query and\/or user input to the user service interface agent, as shown. As similarly described with respect to , many of the service usage control verification embodiments disclosed herein can be applied in isolation or in combination in the context of .",{"@attributes":{"id":"p-0493","num":"0492"},"figref":["FIG. 43","FIG. 43"]},"Referring to , describing the device communications stack from the bottom to the top of the stack as shown, the device communications stack provides a communication layer for each of the modems of the device at the bottom of the device communications stack. As shown, measurement points I and II and the policy implementation agent reside on the modem 1 (e.g., implemented as hardware and\/or software on modem 1). Measurement point I resides above the policy implementation agent (policy based router\/firewall) layer, and measurement point II resides below the policy implementation agent later. The modem selection and control layer resides above the modem drivers layer, as shown. The transport layer, including TCP, UDP, and other IP resides above the IP queuing and routing layer, which resides above the modem selection and control layer, as shown. The session layer, which is shown as a socket assignment and session management (e.g., basic TCP setup, TLS\/SSL) layer, resides above the transport layer. The network services API (e.g., HTTP, HTTPS, FTP (File Transfer Protocol), SMTP (Simple Mail Transfer Protocol), POP3, DNS) resides above the session layer.","As shown in , applications communicate with the device communications stack via the network services API as shown. Policy settings from the network (e.g., service settings) are communicated with the policy implementation agent as shown (illustrating such communications with a reference (A)). The service monitor agent, which is also in communication with the agent communication bus , communicates with policy implementation agent layer of the modem 1. Also, the service monitor agent performs monitoring at each of measurement points I and II, receiving information including application information, service usage and other service related information, and assignment information. An access control integrity agent is in communication with the service monitor agent via the agent communications bus , as also shown. Various other communications (e.g., service processor and\/or service controller related communications, such as service usage measure information and\/or application information) are provided at various levels of this communications stack, as shown (illustrating such communications with references (B)) at the policy implementation agent layer. As similarly described with respect to , many of the service usage control verification embodiments disclosed herein can be applied in isolation or in combination in the context of .",{"@attributes":{"id":"p-0496","num":"0495"},"figref":["FIG. 44","FIG. 44","FIG. 43","FIG. 41","FIG. 44","FIG. 38"]},"Various applications and\/or a user service interface agent communicate via this communications stack, as shown (illustrating such communications with a reference (A)). Also, the billing agent, which is in communication with the agent communication bus  communications user information and decision query and\/or user input to the user service interface agent, as shown. The policy control agent communicates service settings and\/or configuration information via this communications stack, as shown (illustrating such communications with a reference (B)) via the policy implementation agent layer. Various other communications (e.g., service processor and\/or service controller related communications, such as service usage measure information and\/or application information) are provided at various levels of this communications stack, as shown (illustrating such communications with reference (C) at the application layer and communications with reference (D) at the policy implementation agent layer). As shown, the service monitor agent B communicates with the application service interface agent and measurement point I, and the service monitor agent A communicates with the policy implementation agent layer and measurement points II and III of the modem 1. As similarly described with respect to , many of the service usage control verification embodiments disclosed herein can be applied in isolation or in combination in the context of .",{"@attributes":{"id":"p-0498","num":"0497"},"figref":["FIG. 45","FIG. 45","FIG. 44"]},{"@attributes":{"id":"p-0499","num":"0498"},"figref":["FIG. 46","FIG. 46","FIG. 37","FIGS. 46 through 48"]},"In some embodiments, the burst size, buffer delay, acknowledgement delay and drop rate used in upstream and downstream traffic shaping are optimized with the goal of reducing access network traffic overhead, and excess capacity usage that can result from mismatches in traffic transmission parameters with the access network MAC and PHY or from excess network level packet delivery protocol re-transmissions. In some embodiments, an application interface agent  is used to literally tag or virtually tag application layer traffic so that the policy implementation agent(s)  has the necessary information to implement selected traffic shaping solutions. As shown in , the application interface agent  is in communication with various applications, including a TCP application , an IP application , and a voice application .","Referring to , in some embodiments, the upstream traffic service policy implementation step corresponds to the traffic shaping step described herein. Referring to , this step is depicted as shown as an alternate exploded view including four upstream sub-steps of apply QoS queue priority, apply traffic shaping rules, network optimized buffer\/delay and remove application ID tag. An additional approach shown in  involves two exploded view sub-steps associated with the firewall service policy implementation step and these sub-steps are pass\/block packet and pass\/redirect packet. For example, the functions performed by these six sub-steps can be depicted in any number of sub-steps, the order of the steps can be appropriately performed in various different orders to provide for upstream traffic shaping within the network communication stack. For example,  show the two steps of policy implementation and firewall as one step and the six exploded view sub-steps are included under the same policy implementation step and are performed in a different order than in . It should also be noted that a number of embodiments are possible in which the access control, traffic control or firewall functions are moved to the application service interface layer or another layer.","Referring now to the downstream portion of , there are two steps again termed traffic service policy implementation and firewall service policy implementation in this traffic shaping, access control and firewall example. These two packet flow processing steps are depicted as shown in the exploded view as the five sub-steps of tag with flow ID, pass\/block packet, apply QoS, apply traffic shaping rules and network optimized buffer, delay, and drop. As with the upstream packet processing flow, the number of sub-steps, the order of sub-steps and the location of the sub-steps in the downstream networking stack processing can be depicted in any number of sub-steps, order and\/or location, and various other embodiments will be apparent to one of ordinary skill in the art, including embodiments which locate some or all of the steps in the application service interface layer or other layers as depicted in . The details of the packet flow processing design for the downstream can be somewhat more complex in certain embodiments as compared to the upstream processing in two ways. First, as described herein, in some embodiments, the packet tagging that requires application level information can require the initial portion of the packet flow burst to pass through the upstream networking communication stack until the application service interface layer can associate the packet flow with the appropriate information visible at the application level at which time the packet flow tag is communicated to the other service processor agent functions so that they can properly monitor or control the traffic associated with the flow.","Independently, another complication arises when upper layer reliable communication protocols, such as TCP, are employed in the networking stack in which the downstream transmitting end repeats the packet transmission if the receiving TCP protocol stack does not send a packet receipt acknowledge (ACK) within a certain period of time. If packets are arbitrarily delayed or dropped, then the TCP re-transmission traffic can reduce, completely eliminate or even reverse the network capacity advantage gained by reducing the average traffic speed or other transmission quality measure for one or more service activities. To solve this problem, in some embodiments, the packet traffic control parameters (e.g., downstream delay, drops, burst length, burst frequency and\/or burst jitter) are optimized for TCP re-transmission efficiency so that changes in traffic control access bandwidth or speed for one or more service activities are implemented in such a manner that the TCP re-transmission delay at the network transmitting end adapts to be long enough so that wasted packet re-transmission bandwidth is reduced. In addition, and either in combination or in isolation, in some embodiments, the packet traffic control parameters (e.g., downstream delay, drops, burst length, burst frequency and\/or burst jitter) can be adjusted so that the access network downstream MAC and\/or PHY efficiencies are optimized.","Numerous other embodiments for the detailed implementation of packet flow processing in both downstream and upstream will be apparent to one of ordinary skill in the art in view of the various embodiments described herein. In some embodiments, as described herein, the following are provided: (A) traffic shaping is performed in a verifiable manner, (B) traffic shaping is performed in a manner that results in improved network capacity by taking into account to some degree the manner in which the access network PHY layer and\/or MAC layer responds to packet parameters (e.g. burst delay, burst drops, burst length, burst frequency and\/or burst jitter), (C) traffic shaping is performed in a manner that results in improved network capacity by taking into account how the packet parameters (e.g., burst delay, burst drops, burst length, burst frequency and\/or burst jitter) impact layer 3 and higher ACK protocol or other network protocol network capacity efficiencies, (D) packet shaping is performed in a manner that is aware of and optimized for the particular type of communication protocol or packets being sent (e.g., TCP packets can be dropped to slow the application rate of transfer whereas UDP packets are never dropped, because there is no re-transmission), (E) a virtual or literal packet tagging system is used in a verifiable traffic shaping service control system to provide a deeper level of service monitoring and control or to simplify the processing of the packets, and\/or (F) starting with these low level packet processing, traffic control or access control building blocks one or more additional layers of higher level policy control can be added on the device or in the network to create service profiles for the service provider network that define complete services, such as ambient services and many other variations of service profile settings that each define a device or user service experience and can be associated with a billing plan. For example, the use of higher layers of service profile control to form more complete service solutions starting with these relatively simple low-level traffic control, access control or firewall processing steps or functions is also described herein.",{"@attributes":{"id":"p-0505","num":"0504"},"figref":["FIG. 47","FIG. 40"],"b":"47"},{"@attributes":{"id":"p-0506","num":"0505"},"figref":["FIG. 48","FIG. 48","FIG. 41"]},{"@attributes":{"id":"p-0507","num":"0506"},"figref":["FIG. 49","FIG. 49"]},{"@attributes":{"id":"p-0508","num":"0507"},"figref":["FIGS. 50A through 50J","FIGS. 50A"]},"In some embodiments, QoS is employed for devices with a service processor . For example, QoS can be employed in a crowded hot spot where the service processor  profile has been changed from WWAN to WLAN, but the WLAN is backed up as too many users are trying to use it. The service processor  can have a hierarchical access to the hotspot at that point; or the service processor  that pays less can be throttled while those that pay more are opened up; or the service processor  can initiate a policy that slows down transmissions to improve trunking efficiency.",{"@attributes":{"id":"p-0510","num":"0509"},"figref":["FIGS. 51A through 51B","FIG. 51A","FIG. 51B"]},"Referring to , at , the device is in an offline state. At , the service processor (e.g., service processor ) of the device collects device service processor credentials and access control integrity information. At , the service processor of the device selects a best network. At , the device connects to an access network. At , the service processor of the device sends an authorization request to the service controller (e.g., service controller ) and also sends the credentials and access control integrity information. At , the service processor determines whether an integrity error has occurred. If so, then the service processor performs integrity error handling at . Otherwise, the service processor determines whether the device is activated and\/or authorized for network access at . If not, then the service processor performs a device activation sequence at . At , the service processor performs the following: updates critical software, initializes service policy and control settings, synchronizes service counters, updates service cost data, applies policy settings, applies CRM rules settings, obtains transaction identity certificate, and sends stored CRM and billing information. At , the device is in an online state.","Referring to , at , device control is in an offline state. At , the service controller (e.g., service controller ) receives a device authorization request, verifies device service plan standing, verifies device access control integrity standing, verifies device access control integrity information, verifies service processor heartbeat, and performs various additional service processor integrity checks (e.g., as similarly described herein). At , the service controller determines whether the device integrity checks have all passed. If not, then the service controller sends an integrity error to the service processor (e.g., service processor ) at . At , the service controller performs integrity error handling. Otherwise (the device integrity checks have all passed), the service controller determines whether the device is activated at . If not, then the service controller sends an activation message to the service processor at . At , the service controller performs a service activation sequence. Otherwise (the device is activated), the service controller sends an authorization at . At , the service controller performs the following: updates critical software on the service processor, initializes service policy and control settings, synchronizes service counters, updates service cost data, applies policy settings, applies CRM rules settings, obtains transaction identity certificate, sends stored CRM and billing information. At , the service controller is in a device online state.",{"@attributes":{"id":"p-0513","num":"0512"},"figref":["FIGS. 52A through 52B","FIG. 52A","FIG. 52B"]},"Referring to , at , a service processor activation sequence is initiated. At , the service processor (e.g., service processor ) of the device displays an activation site (e.g., HTTP site, WAP site or portal) to the user for the user's service activation choice. At , the user selects service plan, billing information and CRM information. At , the service processor sends an activation request and user billing and CRM information to, for example, the service controller. At , the service processor determines whether there is an integrity error. If so, then the service processor performs integrity error handling at . Otherwise, the service processor determines whether there has been a selection input error at . If so, the service processor displays the selection input error to the user at  and returns to the activation site\/portal at . Otherwise, the service processor identifies the activated service plan at . At , the service processor performs the following: updates critical software, initializes service policy and control settings, synchronizes service counters, updates service cost data, applies policy settings, applies CRM rules settings, obtains transaction identity certificate, and sends stored CRM and billing information. At , the device is in an online and activated state.","Referring to , at , a service controller activation sequence is initiated. At , the service controller (e.g., service controller ) receives an activation request, including user billing and CRM information, and sends such to central billing. At , the service controller receives a response from central billing. At , the service controller verifies the integrity of the service processor. If an integrity error is detected, then an integrity error is sent at . At , the service controller performs integrity error handling. At , the service controller determines whether the service plan has been activated. If not, then the service controller sends a selection input error to the device at  and returns to . Otherwise (device has been activated), the service controller sends the service plan activation information to the device at . At , the service controller performs the following: updates critical software, initializes service policy and control settings, synchronizes service counters, updates service cost data, applies policy settings, applies CRM rules settings, obtains transaction identity certificate, and sends stored CRM and billing information. At , the service controller is in a device online and activated state.",{"@attributes":{"id":"p-0516","num":"0515"},"figref":["FIGS. 53A through 53B","FIG. 53A","FIG. 53B"]},"Referring to , at , the device is in an online state. At , the service processor (e.g., service processor ) of the device processes any new heartbeat messages received from the service controller (e.g., service controller ). At , the service processor updates software if necessary, updates service policy and control settings if necessary, synchronizes service counters, updates service cost data if necessary, and updates CRM rules if necessary. At , the service processor performs access control integrity checks. At , the service processor determines whether there are any access control integrity errors. If so, then the service processor performs integrity error handling at . Otherwise, the service processor updates user service UI gauges, provides notification if necessary, and accepts input if available at . At , the service processor sends new service processor heartbeat messages to the heartbeat message queue. At , the service processor processes any pending billing transactions. At , the service processor determines if a heartbeat transmission is due, and if not, returns to  for processing any received heartbeat messages. If so, at , the service processor sends the new service processor heartbeat message to the service controller.","Referring to , at , the device is in an online state. At , the service controller (e.g., service controller ) processes any new heartbeat messages received from the service processor. At , the service controller performs access control integrity checks. At , the service controller determines whether there are any access control integrity errors. If so, then the service controller performs integrity error handling at . At , the service controller updates the billing database, updates the CRM information, synchronizes service counters, updates cost database if needed, and synchronizes CRM rules if necessary. At , the service controller processes any pending billing transactions. At , the service controller sends new service processor heartbeat messages to the heartbeat message queue. At , the service controller determines if a heartbeat transmission is due, and if not, returns to  for processing any received heartbeat messages. If so, at , the service controller sends new service processor heartbeat message to the service processor.","Open Content Distribution and Transaction System","Referring now to , in another set of embodiments an open, decentralized, device-based system for enabling central billing for third-party electronic commerce transactions for mobile commerce is provided as shown. For example, in these embodiments, device information can be embedded in HTTP, WAP or other portal browser\/network header request information that indicates a central billing option is available to a compatible third-party transaction server, as further described below with respect to .",{"@attributes":{"id":"p-0521","num":"0520"},"figref":"FIG. 54","b":["115","100","115","1694","1695","1630","1697","1692","1696","1693","1690","1655","106","4699","115","106","115","4699","1695","1697","1693","115","4610","120"]},"In some embodiments, device information can be embedded in HTTP, WAP or other portal browser\/network header request information that indicates a central billing option is available to a compatible third-party transaction server, such as the open content transaction partner site(s) . For example, the compatible transaction server can then send a signed confirmation request over a pre-assigned control socket channel to the billing agent  with the billing agent  confirming the signed confirmation request by either performing the signature check locally based on a stored and synchronized list of approved transaction servers or by passing the signed request onto a billing server  for confirmation. Optionally, in another example, a triangle confirmation can be set up in which the billing server  can confirm the transaction set up with the transaction server  or the transaction server  can confirm the transaction set up with the billing server . Once the device confirms the compatible and approved status of the transaction server , the device\/transaction server pair can then optionally further exchange keys for the remainder of the transaction for enhanced security. In another example, the transaction server  can also redirect the user browsing experience to one tailored to one or more of device type, service provider, device manufacturer or user. When the user selects a transaction, the transaction server sends the billing agent  a transaction bill that describes the transaction and the amount. The billing agent  can optionally confirm that the user account has sufficient credit limit to make the purchase by either confirming the stored credit limit on the device or querying the billing server . The billing agent  then invokes the device UI  to display the transaction description and amount and request user approval for the billing to be conducted through the central billing option. User approval can be acquired, for example, by a simple click operation or require a secure password, key and\/or biometric response from the user. Upon user approval, the billing agent  generates a billing approval and sends it to the transaction server , the transaction server  completes the transaction and then sends a bill to the billing agent . The billing agent  optionally sends a confirmation to the transaction server  and sends the bill to the billing server . Again, optionally a triangle confirmation can be formed by the billing server sending a confirmation to the transaction server , or the transaction server  can send the bill to the billing server . In some embodiments, the billing server  can also communication such billed transactions to a central provider billing system  via the carrier access network . Also, in some embodiments, an alternate location billing server  is in communication via the Internet , and an alternate location central provider billing system  is also in communication via the Internet .",{"@attributes":{"id":"p-0523","num":"0522"},"figref":["FIGS. 55A through 55B","FIG. 55A","FIG. 54","FIG. 54"],"b":["106","134","134","134","106","106","134","4699","134","4699","106","134","106","134","4699","4630","123"]},"Referring now to , the device application  browses (e.g., based on the user submitting a browse request using a browser application) to transaction server  (e.g., a transaction web server, such as the open content transaction partner site ), in which the browse request includes device ID information, such as similarly described above with respect to . The transaction server  establishes API contact with the device mobile agent , which then confirms contact and good standing for transactional purchases from the device. The transaction server  provides an offer to the device application . The device application  selects a purchase (e.g., based on the user's selection input). The transaction server  notifies the device mobile payment agent  of the purchase description and amount, and the device mobile payment agent  then requests user purchase confirmation. The purchase is confirmed by the device application  (e.g., based on the user's acknowledgement as similarly described above with respect to ), and the device mobile payment agent  then transmits a purchase confirmation to the transaction server . The transaction server  then transmits a purchase receipt, and the device application  confirms the receipt. The transaction server  then transmits the purchase bill to the device mobile payment agent , which then sends the purchase bill to the device billing server (e.g., billing server ). The transaction server also optionally sends a confirmation of the purchase bill to the device billing server for a triangle confirmation, as similarly described above with respect to . The device billing server sends the purchase bill to the central provider billing system (e.g., central provider billing system ). In some embodiments, the communications described above with respect to  with the billing server and the central provider billing system are with the alternate location billing server  and\/or alternate location central provider billing system  via the Internet . Similarly, in some embodiments, the transaction servers  are connected to the Internet .","Accordingly, these transaction billing embodiments do not require centralized content storage or content and transaction exchange infrastructure. For example, the transactions can be conducted over the Internet, and the user experience and content can be tailored versions of the transaction server\/content provider's normal experience and content. This approach provides for a much wider array of content and transaction partners with minimal or no need to accommodate proprietary specialized systems. Moreover, the compatibility between the device billing agent transaction system and the transaction provider server is easily established, for example, by writing specifications for the header information transmitted by the device and for the secure handshake and signed message transactions that take place between the device billing agent, the transaction server and optionally the transaction server and the billing server. Once a transaction partner shows compatibility test results and concludes a business relationship with the service provider, the service provider can place the transaction partner on the compatible and approved list and exchange security keys and\/or certificates. If a common user experience is desired by the service provider across multiple transaction partners, then the experience specifications for the browser redirects can also be specified in the compatibility specification and tested before the transaction partner gains approval.","Design and Testing for Service Control",{"@attributes":{"id":"p-0527","num":"0526"},"figref":"FIG. 56","b":["410","410","410","508","512","608","612","708","712","410","410","410","410","508","512","608","612","708","712","420","420","420","520","620","720","410","410","420","420"]},"While the embodiments described below with respect to  are depicted in the context of a conventional multi-tier access network, one of ordinary skill in the art will appreciate that such embodiments can also be generalized to other network topologies including the various flattened network topologies described herein. As shown, the service controller is divided into two main functions (e.g., as compared with the embodiments of service controller  depicted in ): (1) a service controller device control system  and (2) a service controller design, policy analysis, definition, test, publishing system . The service controller device control system  performs the device service control channel functions as previously described herein with respect to various embodiments.","The service controller design, policy analysis, definition, test, publishing system  separates out the service analysis, control policy design and publishing from the device service control channel functions. The service controller design, policy analysis, definition, test, publishing system  performs a variety of functions as described below. In some embodiments, the service controller design, policy analysis, definition, test, publishing system  provides service usage statistical analysis, notification policy or procedure response analysis and\/or billing policy or procedure response analysis for single devices, groups of devices, types of devices, groups of users, classes of users, or an entire set of devices and users that subscribe to a given service. In some embodiments, the service controller design, policy analysis, definition, test, publishing system  detects, singles out and reports device service usage, notification responses or billing behavior that is outside of expected limits but may or may not be violating policy. In some embodiments, the service controller design, policy analysis, definition, test, publishing system  provides service cost and profitability analysis for single devices, groups of devices, types of devices, groups of users, classes of users, or an entire set of devices and users that subscribe to a given service. In some embodiments, the service controller design, policy analysis, definition, test, publishing system  provides user service control policy, notification policy or billing policy statistical satisfaction analysis for single devices, groups of devices, types of devices, groups of users, classes of users, or an entire set of devices and users that subscribe to a given service. In some embodiments, the service controller design, policy analysis, definition, test, publishing system  provides statistical take rate analysis for transaction offers and billing offers for single devices, groups of devices, types of devices, groups of users, classes of users, or an entire set of devices and users that subscribe to a given service.","In some embodiments, the service controller design, policy analysis, definition, test, publishing system  provides service control policy definition work screens and \u201cdry-lab\u201d(pre-beta) testing against usage database for single devices, groups of devices, types of devices, groups of users, classes of users, or an entire set of devices and users that subscribe to a given service. In some embodiments, the service controller design, policy analysis, definition, test, publishing system  provides service control policy, notification policy and\/or billing policy beta testing (e.g., using beta test server ) in which the beta test profile is published to a subset of users or devices. In some embodiments, beta devices\/users may or may not know that the service policy is being tested with them. In some embodiments, if they do know, then beta test apparatus includes offering system that provides user options to accept beta test and provide feedback in exchange for an offer (e.g., show them an offer page that comes up with their existing subscription service or ambient service\u2014offer a free trial, a discount to something and\/or reward zone points (or other incentives\/rewards) if they accept the trial). In some embodiments, a beta test workstation (e.g., in communication with the beta test server , such as VSP remote workstation  as shown in ) allows the beta test manager to define one or more beta test service policy, notification policy and\/or billing policy control profiles. In some embodiments, the beta test workstation publishes each profile to specific individual (single) devices, groups of devices, types of devices, groups of users, classes of users, or an entire set of devices and users that subscribe to a given service. In some embodiments, the beta test workstation allows the beta test manager to analyze usage statistics, notification response statistics and\/or billing\/transaction offer response statistics for devices, users, groups of devices or groups of users and compare actual real-time usage versus beta test usage goals. In some embodiments, the beta test workstation allows the beta test manager to fine tune service, notification and\/or billing\/transaction policies and re-publish to observe changes to actual service usage until the service policy and\/or notification control policies achieve the desired result. In some embodiments, the beta test workstation also allows the beta test manager to collect direct user feedback to a set of pre-designed user satisfaction or other questions regarding service usage. For example, questions can be presented through a pre-designed beta test portal or through a series of brief pop-ups that come up when the user initiates a particular action or at a particular time. In some embodiments, the beta test workstation also collects details of service and device usage (e.g., CRM data) that the beta test users have approved for collection. In some embodiments, the beta test workstation can decompose this data to determine if the users are using the service in the manner intended by the beta test goals. In some embodiments, the beta test workstation also allows for publishing multiple variants of the service and\/or notification policy control settings and compare the service usage for each group with convenient screens with information displays (e.g., statistical usage versus time of day, usage of particular activities, billing activity, device discovery activity, user response to notification message and options, user satisfaction with a particular notification policy or billing policy or traffic control policy). In some embodiments, the screens can be designed by the beta test manager.","In some embodiments, once a service is completely tested and approved for production publication, the service download control server  has a workstation screen that allows the service manager to specify which group of devices are to receive the new service policy configuration. In some embodiments, the service download control server  allows the service manager to define specific individual (single) devices, groups of devices, types of devices, groups of users, classes of users, or an entire set of devices and users that subscribe to a given service.","In some embodiments, a service (e.g., a newly created or new version of an existing service) is tested and\/or enhanced using a new service testing model. For example, a new service (or a new version of an existing service) is loaded onto a server for testing, the new service is (optionally) tested against existing device usage statistics, a new service control definition (e.g., implemented as service processor  for publishing to devices  and a corresponding new service controller  for the service provider, such as a central provider or an MVNO partner, and, for example, the new service processor and service controller can be implemented using the below described SDK) for the new service is developed and possibly adjusted based on the testing against existing device usage statistics, the new service control definition is then published to beta devices (e.g., various devices  used for beta testing the new service), which then use the new service, service usage statistics and\/or user feedback statistics are then collected (e.g., to ensure that the service is functioning properly and so that the service control definition can be tuned to ensure adequate service, user experience and for service pricing\/profitability purposes), the service\/service control definition is then fine tuned based on the service usage\/user feedback statistics. Upon completion of the above testing and refinement of the service\/service control definition, the service control definition can be published to specified groups of devices for using the new service. In some embodiments, this service control testing model for groups of devices and service partners is provided by a virtual MVNO or VSP. For example, this allows for new services to be more efficiently and more effectively developed, tested and proliferated.","In some embodiments, service history IPDRs come from within a networking component connected to the central provider core network  as depicted by (e.g., real-time) service usage  (which as discussed elsewhere is a general purpose descriptor for a function located in one or more of the networking equipment boxes). In some embodiments, service history IPDRs are collected\/aggregated (in part) from the central billing system . In some embodiments, service history IPDRs are collected\/aggregated (in part) from the transport gateways . In some embodiments, service history IPDRs are collected\/aggregated (in part) from the RAN gateways . In some embodiments, service history IPDRs are collected\/aggregated (in part) from the base station(s)  or a networking component co-located with the base station(s) , a networking component in the transport network , a networking component in the core network  or from another source.","Virtual Service Provider for Service Control","In some embodiments, virtual service provider (VSP) capabilities include making available to a third-party service partner one or more of the following: (1) device group definition, control and security, (2) provisioning definition and execution, (3) ATS activation owner, (4) service profile definitions, (5) activation and ambient service definition, (6) billing rules definition, (7) billing process and branding controls, (8) bill by account settings, (9) service usage analysis capabilities by device, sub-group or group, (10) beta test publishing capabilities by device, sub-group or group, and (11) production publishing, fine tuning and re-publishing.",{"@attributes":{"id":"p-0536","num":"0535"},"figref":["FIG. 57","FIG. 57"],"b":["4835","4910","4920","4920","4910","4910","4825","4835","4910","123","121","410","420"]},"In some embodiments, the service controller functionality is partitioned for a VSP by setting up one or more secure workstations, secure portals, secure websites, secure remote software terminals and\/or other similar techniques to allow the service managers who work for the VSP to analyze, fine tune, control or define the services they decide to publish to one or more groups of devices or groups of users that the VSP \u201cowns.\u201d In some embodiments, the VSP \u201cowns\u201d such groups by virtue of a relationship with the central provider in which the VSP is responsible for the service design and profitability. In some embodiments, the central provider receives payment from the VSP for wholesale access services. In some embodiments, the VSP workstations  and  only have access to the service analysis, design, beta testing and publishing functions for the devices or users \u201cowned\u201d by the VSP. In some embodiments, the user or device base serviced by the central provider network is securely partitioned into those owned by the central provider, those owned by the VSP, and those owned by any other VSPs.","In some embodiments, the VSP manages their devices from the VSP workstations  and  using device-based service control techniques as described herein. In some embodiments, the VSP manages their devices from the VSP workstations  and  using device-assisted and network-based service control techniques as described herein. In some embodiments, the VSP manages their devices from the VSP workstations  and  using network-based service control techniques (e.g., DPI techniques) as described herein.","For example, this approach is particularly well suited for \u201copen developer programs\u201d offered by the central providers in which the central provider brings in VSPs who offer special value in the devices or service plans, and using this approach, neither the central provider nor the VSP needs to do as much work as would be required to set up a conventional MVNO or MVNE system, which often requires some degree of customization in the network solution, the billing solution or the device solution for each new device application and\/or service application that is developed and deployed. In some embodiments, the service customization is simplified by implementing custom policy settings on the service processor and service controller, and the custom device is quickly brought onto the network using the SDK and test\/certification process. In some embodiments, the VSP functionality is also offered by an entity other than the central provider. For example, an MVNE entity can develop a wholesale relationship with one or more carriers, use the service controller to create the VSP capabilities, and then offer VSP services for one network or for a group of networks. In some embodiments, the service customization is simplified by implementing custom policy settings through the VSP embodiments on the network equipment, including, in some embodiments, service aware or DPI based network equipment that has a relatively deep level of service activity control capability. For example, using the embodiments described herein, and possibly also including some of the activation and provisioning embodiments, it is possible to efficiently design and implement custom ambient service plans that are different for different types of devices, different OEMs, different VSPs, different distributors, or different user groups all using the same general infrastructure, whether the service control policy implementation is accomplished primarily (or exclusively) with networking equipment (network) based service control, primarily (or exclusively) with device-based service control or with a combination of both (e.g., hybrid device and network-based service control).","As discussed herein, various VSP embodiments for performing one or more of analyzing traffic usage and defining, managing service profiles or plans, dry lab testing service profiles or plans, beta testing service profiles or plans, fine tuning service profiles or plans, publishing service profiles or plans, or other policy related settings can involve programming settings in the network equipment and\/or programming settings or software on the device. For example, as discussed herein, the service processor settings are controlled by the service controller, which can be partitioned to allow groups of devices to be controlled. As another example, equipment in the network involved with network-based service control, such as DPI based gateways, routers or switches, can similarly be programmed to utilize various VSP embodiments to implement that portion of the service profile (or service activity usage control) that is controlled by network level functions, and it will be appreciated that substantially all or all of the service activity control for certain embodiments can be accomplished with the network functions instead of the device. Continuing this example, just as the device service processor settings control functions of the service processor can have a group of devices that are partitioned off and placed under the control of a VSP, various VSP control embodiments can partition off a group of devices that have service usage activity controlled by the networking equipment, including, in some embodiments, sophisticated service aware DPI based service control equipment, to achieve similar objectives. It will be appreciated that the discussion herein regarding service controller design, policy analysis, test, publishing , and the discussion regarding device group, user group and other VSP related embodiments, should be understood as applicable to various embodiments described in view of device-based services control, control assistance and\/or monitoring, or network-based services control, control assistance and\/or monitoring, or a combination of device-based services control, control assistance and\/or monitoring and network-based services control, control assistance and\/or monitoring. The various embodiments described herein related to service activation and provisioning also make apparent how the programming of network equipment service control, service control assistance and\/or monitoring can be implemented prior to and following activation of the device. It will also be appreciated that the VSP capabilities described herein can also be applied to those devices that have services controlled by, provided by and\/or billed by the central provider, so these techniques can be applied to central provider service embodiments, MVNO embodiments and other embodiments.","Open Development System for Access Services\u2014SDK","In some embodiments, a software development kit (SDK) is provided that allows developers, such as device manufacturers, service providers, MVNO, MVNE and\/or VSPs, to develop various service processors (e.g., different versions of the service processor ) for various devices (e.g., various types of devices ) and corresponding service controllers (e.g., different versions of the service controller ) for various types of services and network environments. For example, a device manufacturer can use the SDK to develop a new service processor for their new device (e.g., mobile phone, PDA, eBook reader, portable music device, computer, laptop, netbook, or any other network accessible device). The device manufacturer can also preload\/preinstall their new service processor on their new devices. In this example, users of the new device would then be able to utilize the new device to access network-based services using the new service processor, which communicates with the deployed new service controller, as similarly discussed herein in various embodiments. For example, the device can be preinstalled with the new service processor to provide ambient services, as similarly discussed herein in various embodiments. For example, the SDK can allow for substantially similar service processors to be installed on similar and\/or different devices thereby minimizing any unnecessary differences between service processor elements for device-assisted services. In some embodiments, for ambient services for a group of devices, or devices associated with a certain service provider, a set of numbers (e.g., dummy numbers) can be assigned for use for attempting access via the access network using a new device that is not yet otherwise subscribed for service. In some embodiments, the set of (dummy) numbers used for ambient access by the device can also be used for associate of the device with a service provider or a type of device (e.g., eReader or some other type of network accessible device), and upon activation, the service provider assigns a real number for the activated device (e.g., which can be provided at the time of manufacture of the device, point of sale of the device, or after the point of sale of the device, such as upon activation of the device). For example, ambient access of the device can use the device ID, SIM ID, assigned phone (real or dummy) number, and\/or other information associated with the device for assigning appropriate service control and service policy\/profile for the device.","In some embodiments, the service processor  is distributed as an SDK to any device that the central provider or the VSP desires to offer services with so that the service processor  can be efficiently designed or adapted by the device OEM, ODM or manufacturer for operation on the service network. In some embodiments, the SDK includes either a complete set of service processor  agent software designed for and\/or tested for the OS (Operating System) and processor set being used on the device, or a mature reference design for the OS and processor set being used on the device, or a less mature reference design (potentially for the same OS and\/or processor set or a different OS and\/or processor set being used on the device) that the OEM (Original Equipment Manufacturer) ports to the desired OS or processor set, or a basic set of example software programs that the OEM or ODM (Original Design Manufacturer) can use to develop software compatible with the service, or a set of specifications and descriptions (possibly forming an interoperability standard) of how to design the software to be compatible with the service. In some embodiments, the SDK includes a set of OEM lab test procedures and\/or test criteria to ensure that the implementation of the service SDK is compatible with the service and will operate properly. In some embodiments, the SDK includes a set of network certification test procedures and\/or test criteria to ensure that the implementation of the service SDK is compatible with the service and will operate properly. In some embodiments, the certification procedures are approved for testing by the OEM, the central provider, the VSP and\/or a trusted third-party. For example, the central provider is typically in control of the SDK and the test procedures, but others can be in control. In some embodiments, the test procedures are at least in part common across multiple central provider networks. In some embodiments, the SDK concept is extended to include one or more modem modules where one or more of the SDK embodiments described above is combined with a standard reference design or a standard hardware sales package for one or more modems so that the entire package forms a turn-key product that allows a device manufacturer, central provider, VSP or other entity bring new devices or device applications onto the central provider network possibly in combination with other networks in a manner that requires less engineering time and resources and less network certification time and resources than would be required in some designs that do not use this standard SDK plus module approach. For example, the standard SDK plus module product embodiments can be pre-certified and tested with one or more central providers to further reduce development time and expense. The standard SDK plus module embodiments can also use a multi-mode modem (e.g., modems based on a multimode CDMA, EVDO, UMTS, HSPA chipset as in the Gobi global multimode chipset product or modems based on other recently announced LTE plus HSPA chipsets, WiMAX plus Wi-Fi chipsets or LTE plus EVDO chipsets) and a multi-mode connection manager agent so that the same SDK plus modem embodiment may satisfy a wide range of applications for many service providers around the world.","In some embodiments, at the time of manufacture, the device is associated with an MVNO. For example, the MVNO can provide an ambient service that provides a service provider clearing house, in which the device can access a network in ambient access mode (e.g., a wholesale MVNO connection through the access network) for purposes of selecting a service provider (e.g., a VSP, MVNO or carrier). Based on the service provider selection, the device credentials and\/or service processor are reprogrammed and\/or new software is downloaded\/installed to activate the device with the selected service provider, as described herein for provisioning the device and the account on that service provider network (e.g., the ATS can track such activation, for example, for revenue sharing purposes, as an activation incentive fee).","In some embodiments, ATS is implemented entirely in the network as described below. At the time of manufacture or at sometime during device distribution, the device master agent programs a unique credential in the device that cannot be re-programmed or removed (or is difficult to re-program or remove) and that can be recognized and recorded by the network at the time of activation or at some other time. In this manner, even if other, possibly primary, device credentials are reprogrammed or removed, there will still be a credential that is associated with the device master agent. The ATS process can then be implemented by using a database search function to scan through the database of activated devices to form a list of devices that have been activated for the purpose of master agent reconciliation. Example credentials that can suffice are MEID, hardware MAC address, and\/or serial number, that are picked up and recorded by the service provider or other service entity at time of activation or before or after activation.","Interface Server Overlay for Billing\/IPDR Feed Mediation",{"@attributes":{"id":"p-0547","num":"0546"},"figref":"FIG. 58","b":["123","5010","5020","5020","123","4825"]},"In some embodiments, an interface server (e.g., the billing databases, historical usage, billing systems component  and\/or the billing to service controller interface component ) is provided that reads the IPDRs, service profile and\/or service plan information stored in the billing and\/or service record database(s). In some embodiments, the interface server performs these functions in a manner that is compatible with communication formats of the billing and\/or service record database(s) so that little or no changes are required in the configuration, communication formats or software of the existing central billing, AAA and\/or other network components. In some embodiments, the interface server (e.g., including the billing databases, historical usage, billing systems component  and the billing to service controller interface component ) is co-located with the central billing system components as shown, or in other embodiments, the interface server is located elsewhere. For example, the interface server can be located close to or within the components that comprise the service controller or anywhere else in the network.","In some embodiments, the interface server performs certain communication protocol translation or data format translation required to interface the information stored in the billing and\/or service record database(s) to the service controller functions so that the central billing system  and other existing components in the network do not need to change much (if at all) to enable the service controller and service processor to implement device-based\/assisted service control. In some embodiments, the central billing system  or other network components are not required to be aware of the service control functions being implemented by the service controller or service processor, because the interface server acquires the network-based information needed by the service controller and\/or service processor while requiring little or no specialized awareness, communication, data formatting, user interfacing, service profile processing or service plan processing on the part of existing billing, database or networking components. In this type of overlay approach, various embodiments described herein can be used to quickly upgrade the capabilities of existing networks for new devices while minimizing the required changes to the existing network that supports legacy devices.","For example, a new ambient service plan can be implemented within the central billing system  that is associated with a zero or low cost billing plan and a usage limit (e.g., ambient service) that may be difficult or impossible to support in a manner that would result in high user satisfaction and a high level of control for service cost and service policy definition. Even if the central billing system  is not highly involved in the process, the zero or low cost plan can be implemented in a manner that results in high user satisfaction and a cost controlled service by using the service controller and\/or service processor and the interface server to implement the ambient services access control, service usage control, user interface, service usage notification, transaction billing or bill by account functionality. For example, this approach can be implemented by reading the service plan and\/or service policy settings for a device in the central billing database using the interface server, looking up the corresponding service policy, user notification policy, transaction billing policy and bill by account policy associated with the particular service profile or service plan, and then implementing the policies with the assistance of the service controller and\/or service processor. Similarly, in another definition, multiple tiers of service control and user notification policies can be added to any number of new service profiles or service plans that would not otherwise be supported with the central billing system  and other network components, all with minimal or no modifications to the pre-existing network and billing system.","Another embodiment calls for receiving a standard IPDR feed from central billing  or another network component just like an MVNO would. For example, the interface server function can be located in the central billing system, service processor or elsewhere in the network. This provides the IPDR records for service usage policy verification and service usage notification synchronization with little or no need to modify existing billing or network apparatus.","In some embodiments, duplicate IPDRs are sent from the network equipment to the billing system and\/or network management system that are currently used for generating service billing or are used for device management or network management. In some embodiments, duplicate records are filtered to send only those records for devices controlled by the service controller and\/or service processor. For example, this approach can provide for the same level of reporting, lower level of reporting, and\/or higher level of reporting as compared to the reporting required by the central billing system.","In some embodiments, a bill-by-account billing offset is provided using the interface server. For example, bill-by-account billing offset information is informed to the billing system through an existing data feed and by updating the billing database using the interface server. In some embodiments, transaction billing is provided using the interface server. For example, transaction billing log information is provided to the billing system through an existing data feed and by updating the billing database using the interface server.","In some embodiments, existing\/new service plan choice screens are displayed to the user, a user choice or decision\/input is confirmed for a selected service plan, and then the service is implemented upon confirmation of the billing system update for the new service plan. In some embodiments, the service is implemented upon the user selection of a new service plan and then retracted if not confirmed as updated by the billing system within a certain period of time. In some embodiments, the new service plan information is updated in the billing system through an existing data feed or by updating the database using the interface server.","Integrated Service Control",{"@attributes":{"id":"p-0556","num":"0555"},"figref":["FIG. 59","FIG. 56"],"b":["5110","4825","121","118"]},{"@attributes":{"id":"p-0557","num":"0556"},"figref":"FIG. 60","b":["4825","415","410","420"]},{"@attributes":{"id":"p-0558","num":"0557"},"figref":"FIG. 61","b":["4825","405","125","125"]},"Ambient Services","In some embodiments, improved and simplified processes for provisioning a device or user for service on a central provider network, an MVNO network or a virtual service provider (VSP) on the central provider network are provided. In some embodiments, provisioning includes one or more of the following: a process or result of assigning, programming, storing or embedding into the device and\/or network a set of credentials, or otherwise providing the credentials to the user; the credentials being at least in part carried on the device or with the user; and\/or at least a portion of or a counterpart to the credentials being stored or recognized by the network so that the various network elements responsible for admitting the device access to the appropriate service activities do so once the device or user service is active.","As an example, as discussed herein, the credentials can include one or more of the following: phone number, device identification number, MEID or similar mobile device identifier, hardware security device ID, security signature or other security credentials, device serial number, device identification and\/or credential information via security hardware such as a SIM, one or more IP addresses, one or more MAC addresses, any other network address identifier, embedded device descriptive information block (static or programmable), security key, security signature algorithms, passwords or other secure authorization information, service processor (or similar device client or agent software) identifier or settings or version, device type identifier, browser (e.g., http, https, WAP, other browser client) header information or similar identifier, browser token information or similar identifier, browser cookie information or similar identifier, embedded browser instructions, portal-client (e.g., interface or communication agent that connects to a network portal used at least in part for provisioning or activation for the device or by the user) header information or similar identifier, portal-client token information or similar identifier, portal-client cookie information or similar identifier, embedded portal-client instructions, service provider, OEM, master agent (service distributor), VSP, device service owner identifier, distributor or master agent, and\/or any information the network can use to authorize network admission, provision the device, provision the network, activate service, authorize, associate or enable the device with a provisioning sequence, associate or enable the device with one or more service profiles, associate or assist the device with an activation sequence, associate or enable the device with an ambient profile or service experience, associate or enable the device with one or more service plans or service capabilities, associate the device with a service provider or service owner, associate the device with an OEM or master agent, associate the device with a distributor or master agent, or associate the device with a device group, user group or user.","In some embodiments, provisioning includes assigning, programming or embedding into the device and\/or network the information to define the level of service activity, referred to as a service profile, that the device is authorized to receive. In some embodiments, provisioning also includes establishing the device settings and\/or network settings to define an ambient activation experience in which the device user receives a set of services after (e.g., within a short period of time after) purchasing or otherwise obtaining or installing the device whether the device has or has not been registered and activated with the device user or device owner.","In some embodiments, ambient services or adaptive ambient services for a device (e.g., any type of device capable of communicating with a wireless network, including an intermediate networking device) or use of a service on a wireless network are provided. In some embodiments, the ambient experience is the user experience that is available at the time the device is sold in the event the user has not yet signed up for a service plan, or the device is not sold with a prepaid service plan or other required service plan. In some embodiments, an ambient service generally refers to a set of application access, network destinations, sources, and\/or traffic control rules to enable an ambient service experience, and, in some embodiments, also includes a set of billing rules to keep an accounting of service usage for different service usages (e.g., various bill by account rules or service usage accounts). For example, the ambient experience is defined by an ambient service profile, an ambient service plan, the other service usage activity control policies, and\/or the ambient service or ambient experience bill-by-account usage accounting and\/or billing policies in effect in the network, on the device, on an intermediate networking device, or any combination thereof.","For example, if the device service processor (e.g., on the device, the intermediate networking device, or both) is used in large part to define the ambient service profile, then the initial provisioning and activation settings in the service processor, and possibly the service controller, can define the user service upgrade offering choices, network destination access control possibilities, traffic control policies, mobile commerce transaction capabilities (e.g., which transaction websites, WAP sites or portals the user can access to purchase information, content, music, games and\/or eBooks), possibly free news or weather or other modest bandwidth Internet services that are provided free of charge to entice the user into using\/upgrading the service or using the transactions or viewing advertisements, what advertisements are displayed to the user or what advertisement based websites the user is exposed to, certain applications may have access while others are blocked (e.g., Internet-based text services have access but email downloads do not), or other example service capabilities. Examples of the type of useful services that can be enabled with the ambient service techniques disclosed herein include the following embodiments. In some embodiments, a content purchasing service (e.g., books, news, magazines, music, video, games, and mobile applications) is facilitated in which the device access is partially, largely, or entirely limited to the device or network-based applications, source\/destination addresses, and\/or content transfers required to properly implement the service, in which other applications, source\/destination addresses and\/or content types are partly, largely, or entirely blocked. In some embodiments, such ambient services can have service usage monitoring and accounting that is reported for one or more individual ambient services. For example, the service usage for a book storefront browsing and download service can be separately accounted for while other services such as a general Internet shopping or auction service, a music service, a picture upload and store\/print service, a search and\/or advertisement service can also each have individual service usage accounting, or in some cases, groups of services can have aggregate service usage accounting. In some embodiments, an ambient service is provided for the device prior to the time a user has paid for permanent or full time access services, which, for example, can include a service selection platform for allowing the device user to access certain limited network functions and\/or resources, and to access those network resources necessary to choose a pay-for-service plan option. In some embodiments, the individual and\/or group ambient service usage accounting can be transformed into one or more billing records in which the service usage for each ambient service is billed to an entity, which can be the business entity that provides the ambient service experience and\/or transaction platform, or the end user, or the central service provider, or an MVNO service provider, or a distribution partner, or an OEM, or another entity interested in paying for one or more ambient services.","It will be apparent to one of ordinary skill in the art that allowing all of these services, and blocking other ambient user service attempts (e.g., unpaid large file size Internet downloads or uploads, movie viewing, or other access that would consume bandwidth and cause the ambient service to be a potential source of losses for the service provider) is made possible by the service profile control capabilities of the service processor and\/or the service controller. The bill by account embodiments, as discussed herein, in which each service activity can, for example, be separately tracked with the service monitor and other agents and server functions to produce a billing offset that allows categorization and mediation of different billing entities (accounts) provides the capability for the service provider to individually account for the costs of each ambient service element. This allows business models wherein the free access to the end user is paid for or partially paid for by one or more service provider partners who are billed for service access using the bill by account capabilities (e.g., the transaction partners pay for user access to their transaction experience and perhaps pay a revenue share for transaction billing, the advertising sponsored website partners pay for their access service share).","While the service control capabilities of the service processor and the bill by account service cost sharing and transaction revenue sharing in some cases can create a profitable ambient business model, in other cases, the ambient services can be a potential source of losses for the service provider. Accordingly, in some embodiments, the ambient service capabilities can be modified over time to reduce service cost to the service provider or VSP based on a variety of decision factors. For example, the user can have one level of traffic control for a period of time, and if the user has not signed up for service by the end of the period or if the user is no longer in good standing (e.g., based on various service usage criteria) for use of the service, the ambient service access is reduced (e.g., the transmission speed can be reduced or throttled, and\/or the total volume of data transmitted can be reduced or throttled, possibly additionally according to time of day parameters and\/or network busy state parameters) by changing the service control policy settings in the service processor, and the service level can be further reduced over time if the user continues to not sign up for service or the user does not create much transaction revenue. In some embodiments, this can limit or prevent users from \u201ccamping\u201d on free ambient services without generating any meaningful revenue to fund the service, or viewing any advertising to fund the service. In some embodiments, a user can be throttled in such a manner until the user executes a \u201cuseful activity\u201d or a \u201cpreferred activity\u201d (e.g., a purchase, viewing advertising, answering a questionnaire, signing up for a service, accepting a beta trial, and\/or earning valued customer points), and after a useful or preferred activity occurs, then the access capabilities of the device are increased. As another example, the recursive throttling algorithms discussed herein can be utilized to one or more of the service activities offered in ambient service mode so that the user experiences what full speed service is like, and if the user continues consuming appreciable bandwidth with the service activity, then the activity is throttled back to reduce costs until or unless the user selects a pay-for-service plan (or accumulates sufficient service access points as described herein). In these examples, the service processor or service controller can issue the user a notification explaining that their service is currently free so their usage is being throttled, and if they desire to receive better service, service plan upgrade offers can be delivered to the user interface (UI). In some embodiments, the level of access (e.g., ambient service bandwidth and\/or transfer limits, reachable addresses beyond the ambient service, and\/or bandwidth or transfer limits for open Internet usage and\/or email usage, text usage) is increased as the user increases the number of useful or preferred activities (e.g., the user accumulates \u201cservice access points,\u201d which are then spent on access activities). It will now be apparent to one of ordinary skill in the art that the various ambient service parameters including various provisioning and activation processes used to provide an ambient service, can also be managed by various virtual service provider (VSP) techniques. For example, this allows the same service controllers and service processor solutions to be used to define a wide range of ambient experiences for various device groups or user groups that are controlled by different VSPs.","Similarly, rather than controlling ambient service profile settings using the device-assisted services functions and\/or VSP functions to control the service controller, service processor, provisioning and activation settings, various other embodiments call for the ambient service profile settings to be controlled by various network-based service activity control equipment as similarly described herein and\/or by various intermediate networking devices. For example, depending on the level of service control and service monitoring sophistication (e.g., advanced DPI (Deep Packet Inspection), TCP (Transmission Control Protocol) session aware techniques, or other service aware techniques), some, much, most or all of the above-described ambient services functionality can be implemented using network-based service controls and various VSP management and control techniques. Similarly, in some embodiments, service processor, provisioning and activation settings, and the ambient service profile settings can also be (at least in part) controlled by various intermediate networking devices. In some embodiments, network equipment that can provide ambient service controls include, for example, service gateways, routers, charging functions, HLRs, home agents, proxy servers, and other network equipment as would be apparent to one of ordinary skill in the art.","Whether the ambient service monitoring and control apparatus is implemented with device-assisted service techniques, network-based techniques, or a combination of both, various embodiments described herein provide for adaptive ambient service embodiments that address the dynamic (e.g., non-static) nature of Internet service access needs (e.g., allowable source\/destination and\/or application lists, blocked source\/destination and\/or application lists, traffic control policies for each source\/destination and\/or application).","Providing an ambient service profile for an ambient service can be complicated by the variable nature of network addresses and offered services such as, for example, the Internet. For example, a central service provider, MVNO provider or VSP may desire to provide ambient service access to a given web site partner's web service, in exchange for a business deal with the website partner that motivates the service provider to provide the ambient access. In this example, the ambient access is intended to enable access (either wide open or throttled) to the website partner's collection of URLs (and possibly one or more applications) associated with the service, while blocking or differentially throttling access to other network destinations and\/or applications not associated with the web site partner services. A problem can arise in this example whenever the website partner changes the addresses and\/or domains associated with the website services, because any static access list and access list policies generally makes a static list impractical. In such cases, the adaptive ambient service embodiments described herein provide a solution to these and other problems, whether the adaptive ambient access controls and\/or traffic controls are implemented with device-assisted service apparatus, network-based apparatus, or a combination of both.","As another example, an ambient service profile for a transaction service provider can include that service provider's domain or web site as an allowed destination. However, there are often inline advertisements provided by ad servers and\/or partner sites that should also be included in the set of allowed destinations in the ambient service profile, and these are often dynamic or frequently changing. As another example, an ambient service provider may not want to allow access to sites that typically involve relatively high data usage (e.g., streaming and\/or downloading of video content), while allowing other sites that result in less bandwidth intensive service usage activities. As another example, during a session a user may attempt to surf out of the ambient service, such as when the user attempts to access a website or service that is not an allowed or pre-approved destination in the ambient service profile (e.g., a search site can be the pre-approved ambient service, but the ambient service partner paying for the search service access may desire to also allow and pay for user click-through to search results and\/or advertising offers, or, for example, an ambient shopping service sponsor may desire to also pay for click-through to vendor partners sites to provide a purchase transaction opportunity to the user). Moreover, the defined ambient service profile quickly stagnates as various applications and destinations, for example, change over time or on each request\/usage (e.g., new applications become available and\/or web site content and link changes occur daily if not hourly and\/or are dynamically generated using well known web site techniques). Thus, what is needed are adaptive techniques for providing an adaptive ambient service.","Accordingly, in some embodiments, adaptive ambient services using an adaptive ambient service profile are provided. In some embodiments, a flexible and efficient adaptive ambient service control is provided by using an intelligent element in the network that performs one or more of the following functions: (1) beginning with an initial list of allowable ambient service device access behaviors (e.g., addresses\/URLs, applications and\/or content types, in some cases, with a set of traffic control policies that are differentiated as discussed above), (2) as the user accesses the ambient service, determine if the access behavior of the device is within or outside of the desired ambient service access and\/or traffic control policies (e.g., determine if the access behavior is properly associated with the desired ambient services and\/or service policies), (3) for those access behaviors that are within the desired ambient service policies, expand the list of allowable ambient service device access behaviors to include the new behaviors that are desired and\/or preferred (e.g., new sub-domains, advertising content sources, transaction partner addresses, and\/or desired surf-outs), (4) for those device access behaviors that are outside of the desired\/preferred ambient service policies (e.g., are not associated or beneficially associated with the desired\/preferred ambient service), expand the list of blocked or differentially throttled ambient service device access behaviors to include the new behaviors that are undesired or less desired (e.g., not preferred). In some embodiments, the intelligent network element used to adapt the ambient service control is included in one or more network equipment functions (e.g., service gateways, routers, charging gateways, HLRs, AAA, base station, service controller, and\/or other network equipment functions). In some embodiments, the intelligent network element used to adapt the ambient service control is included in the device and\/or intermediate networking device service processor. In some embodiments, the intelligent network element used to adapt the ambient service control is included in a combination of the device (and\/or intermediate networking device) and one or more network equipment functions.","In some embodiments, a flexible and efficient adaptive ambient service is provided using a baseline (e.g., a basic starting point) of an adaptive ambient service profile that includes default or previously defined (e.g., by an ambient service provider, network provider, VSP, or another entity) allowable access list and disallowed access list for the ambient service, such as to various applications, destinations, sources, traffic control rules, and\/or bill by account rules or a combination thereof. In some embodiments, the ambient service profile is an automated and a self-evolving service profile using various techniques, such as those described herein.","In some embodiments, an adaptive ambient service includes providing an ambient service profile. In some embodiments, the ambient service profile includes ambient service allowed access rules and ambient service disallowed access rules. In some embodiments, the ambient service profile further includes ambient service monitored access rules, in which access to, for example, certain applications or destinations is allowed but is considered suspect or unknown, and thus, such access is monitored (e.g., until that application or destination is reclassified under an ambient service allowed access rule or ambient service disallowed access rule). In some embodiments, the ambient service allowed\/disallowed\/monitored access rules include IP addresses, domains (e.g., URLs for web sites), or any other unique network destination or application or source identifiers. In some embodiments, the ambient service rules provide differentiated traffic control rules. In some embodiments, the differentiated traffic control rules provide differentiated bandwidth and\/or total data transfer limits according to traffic control policy elements, such as activities associated with the main ambient service functions (e.g., the main partner website or a transaction service), activities associated with secondary ambient service functions (e.g., a secondary surf-out website or a less desired service activity), activities transferring different content types, activities associated with different applications, activities based on time of day, activities based on network busy state, activities that require higher or lower QoS (Quality of Service), and\/or other activities.","In some embodiments, the ambient service allowed access rules and\/or ambient service disallowed access rules are pushed to (e.g., published, at predefined times, during low service usage times or periods of low service usage activities, or upon request) the device or the intermediate networking device (e.g., any type of networking device capable of communicating with a device and a network, including a wireless network, example intermediate networking devices include a femtocell, or any network communication device that translates the wireless data received from the device to a network, such as an access network) from the network (e.g., an element in the network that securely provides such data, such as a service controller for the ambient service). In some embodiments, the ambient service allowed access rules and\/or ambient service disallowed access rules are pulled by (e.g., at predefined times, during low service usage times or periods of low service usage activities, or upon request) the device or the intermediate networking device from the network (e.g., an element in the network that securely provides such data, such as a service controller for the ambient service).","In some embodiments, the device or intermediate networking device includes techniques for automatically adapting the service profile based on ambient service usage and thereby updates the ambient service allowed access rules, the ambient service monitored access rules, and\/or ambient service disallowed access rules locally. Device access activities that fall into the monitored access rules are those activities that are determined not to be disallowed (as of that point in time) and are allowed to take place while the intelligent adaptive service element tests the activities on the monitored access rules list to determine if they should be moved to the allowed access rules list, should be moved to the disallowed access rules list, or should remain on the monitored access rules list for further testing and\/or observation. In this way, a useful and friendly user experience can be maintained as the adaptive ambient service rules undergo \u201ctraining\u201d to accommodate dynamic changes to the ambient service sites\/applications. The device or intermediate networking device can then periodically provide the updated ambient service allowed access rules, ambient service monitored access rules, and\/or ambient service disallowed access rules with the network using various network communication techniques, such as those described herein. In some embodiments, the device periodically synchronizes its locally stored ambient service allowed access rules, ambient service monitored access rules, and\/or ambient service disallowed access rules with the network using various network communication techniques, such as those described herein. In some embodiments, the training for one or more of the three lists occurs on the device. In some embodiments, the training for one or more of the three lists occurs in the network. In some embodiments, the training for one or more of the three lists occurs partly on the device and partly in the network (e.g., depending, in some cases, on the device (such as the computing\/memory capacity of the device), network bandwidth, and\/or any other architecture criteria).","It will now be apparent to one of ordinary skill in the art that the various ambient service parameters, including the provisioning and activation processes used to create the ambient service activation, can also be managed by the VSP apparatus and processes described herein. For example, this allows the same service controllers and service processor solutions to be used to define a wide range of ambient experiences for various device groups or user groups that are controlled by different VSPs.","Similarly, rather than controlling the ambient service profile settings using the VSP functions to control the service controller, service processor, provisioning and activation settings, other embodiments call for the ambient service profile settings to be controlled by the network-based service activity control equipment as similarly discussed herein. Depending on the level of service control and service monitoring sophistication (e.g., highly advanced DPI or service aware techniques), some, much, most or all of the above-described ambient services functionality can be implemented using network-based service controls and the VSP management and control embodiments described herein.","In some embodiments, an adaptive ambient service includes implementing an ambient service profile for assisting control of a communications device use of an ambient service on a wireless network, in which the ambient service profile includes various service policy settings, and in which the ambient service profile is associated with an ambient service plan that provides for initial access to the ambient service with limited service capabilities prior to activation of a new service plan; monitoring use of the ambient service based on the ambient service profile; and adapting the ambient service profile based on the monitored use of the ambient service. In some embodiments, these techniques are performed by the communications device (e.g., using a service processor), a network element\/function (e.g., using a service controller, proxy server, and\/or other network elements\/functions\/devices), and\/or an intermediate networking communications device and, in some embodiments in various combinations with each other and\/or with other functions\/elements on the network\/in communication with the network. In some embodiments, the service policy settings include one or more of the following: access control settings, traffic control settings, billing system settings, user notification with acknowledgement settings, user notification with synchronized service usage information, user privacy settings, user preference settings, authentication settings, admission control settings, application access settings, content access settings, transaction settings, and network or device management communication settings.","In some embodiments, the ambient service profile is implemented at least in part by a proxy server, in which the monitored use of the ambient service based on the ambient service profile is performed at least in part by the proxy server, and in which the proxy server communicates the ambient service traffic to the communications device. In some embodiments, the ambient service plan allows for access to the ambient service with limited service capabilities that are limited based on one or more of the following: period of time, network address, service type, content type, application type, QoS class, time of day, network capacity (e.g., network busy state), bandwidth, and data usage. In some embodiments, the ambient service plan is a low cost or free trial service plan that is bundled or provided as an option for purchase at a point of sale of the communications device. In some embodiments, the communications device is activated prior to a point of sale of the communications device, and the ambient service plan is associated with the communications device during activation. In some embodiments, the ambient service plan is associated with the communications device during one or more of the following: a manufacture of the communications device, a distribution of the communications device, or a point of sale of the communications device. In some embodiments, the ambient service plan includes an option to purchase a new service plan for the communications device, in which the new service plan includes additional service capabilities. In some embodiments, the ambient service profile is programmable by one or more of the following: a manufacturer, a service provider, a distributor, a virtual service provider, and a device manager.","In some embodiments, the ambient service is a transaction based service, in which service usage for the ambient service by the communications device is not billed, and in which electronic commerce based transactions performed using the communications device are billed as transaction based charges. In some embodiments, the ambient service is a transaction based service, in which electronic commerce based transactions performed using the communications device are billed as transaction based charges, and in which at least a portion of service usage costs are billed to one or more of the following: an advertiser, a transaction provider, a mobile virtual network operator, a virtual service provider, and an ambient service provider.","In some embodiments, the communications device is a mobile communications device or an intermediate networking device, and the ambient service includes one or more Internet-based services. In some embodiments, the communications device is a mobile communications device, and the ambient service includes one or more Internet-based services, and the mobile communications device includes one or more of the following: a mobile phone, a PDA, an eBook reader, a music device, an entertainment\/gaming device, a computer, laptop, a netbook, a tablet, and a home networking system. In some embodiments, the communications device includes a modem, and the processor is located in the modem.","In some embodiments, the various techniques for adaptive ambient services are performed (e.g., at least in part) on the device (e.g., device ) and\/or on an intermediate networking device (e.g., using a service processor  and an ambient service profile). For example, the various techniques for adaptive ambient services can be performed on a processor of the device, and the ambient service profile can be securely stored locally on the device using various techniques for secure execution and storage.","In some embodiments, the various techniques for adaptive ambient services are performed on the device or on the intermediate networking device with assistance or verification from the network (e.g., a service controller  executed on any network element, in which the service controller  is in secure communication with the device\/intermediate networking device, including the service processor  executed on the device\/intermediate networking device). In some embodiments, adaptive ambient services are performed on the device or on the intermediate networking device with assistance or verification from the network (e.g., using a service controller for maintaining a centralized set of ambient service allowed access rules and\/or ambient service disallowed access rules, and a superset of all ambient service monitored access rules, working cross device population). In some embodiments, the service controller  or other network element(s) assist the device for implementing these techniques for adaptive ambient services (e.g., cross device, cross URL\/domain usage patterns\/monitoring, publishing centralized set of ambient service allowed access rules, ambient service monitored access rules, and\/or ambient service disallowed access rules, including, for example, compromised and\/or hacked URLs). In some embodiments, the service controller  or other network element(s) assist the device for implementing these techniques for adaptive ambient services by verifying the device maintained set of ambient service allowed access rules, ambient service monitored access rules, and\/or ambient service disallowed access rules. In some embodiments, the service controller  or other network element(s) assist the device for implementing these techniques for adaptive ambient services by verifying the device monitored service usage with CDR service usage using various techniques, for example, such as those described herein. In some embodiments, the service controller  or other network element(s) assist the device for implementing these techniques for adaptive ambient services by verifying the device monitored service usage by IP address (e.g., using CDR by traffic destination).","In some embodiments, the various techniques for adaptive ambient services are performed on the network (e.g., a gateway, router or any other network element using, for example, deep packet inspection (DPI) on the monitored (non-encrypted) network traffic).","In some embodiments, a device is suspended based on inactivity, or the device is placed in a suspended service state or suspended account state, so that the network does not get bogged down with a significant number of devices and credentials that are inactive. For example, this can also result in a portion of the device credentials being assigned back to an available pool rather than reserved for that particular device (e.g., phone numbers if phone numbers are scarce). The device account and\/or activation state can be re-activated when the device comes back online. For example, the suspend state can be a simple suspension of services without changing the account status, in which case the re-activation process can be automatically completed as a subset or entire set of the activation sequence that occurs when the device is initially used as described herein. The suspend state can also involve changing the account status to inactive, in which case the re-activation process can automatically reconfigure the account status back to an active state when the device re-accesses the network. For example, the suspend state can involve de-assigning or possibly re-claiming a portion of the device credentials. If a portion of the credentials are de-assigned, then when the device re-accesses the network credentials can be automatically re-assigned as described in various embodiments described herein.",{"@attributes":{"id":"p-0586","num":"0585"},"figref":["FIG. 62","FIG. 62"],"b":["2461","2462","2463","2464","2465"]},"Various other techniques can also be employed for providing adaptive ambient services as will now be apparent to one of ordinary skill in the art in view of the embodiments and examples described herein. At , based on the above testing of the association of the requested access with the ambient service, determine whether the requested access can now be added or blocked based on the monitored access. At , if the requested access can now be blocked, then block the requested access and update the ambient service profile accordingly (e.g., add the requested access to the ambient service blocked access rules). Similarly, if the requested access can now be added, then continue to allow the requested access and update the ambient service profile accordingly (e.g., add the requested access to the ambient service allowed access rules). At , determine whether to continue to monitor\/test the association of the requested access with the ambient service (e.g., if the requested access is still in progress, and the requested access has not been otherwise categorized as allowed or blocked ambient service access, then continue to perform the testing analysis), and if so, continue to perform the monitor\/testing analysis of the requested access at . At , the process is repeated for the next requested access. At , the process is completed.","Network-Based Service Monitoring, Notification and Control","In some embodiments, as described herein, it is desirable to implement some or all of the deep service usage monitoring, service control or control assistance, or service notification or notification assistance associated with a service profile in network apparatus rather than in the device, or to implement some of the deep service monitoring, control, control assistance, notification or notification assistance in the device and others in the network. This is the case, for example, in a mixed network in which some devices have some, or at least one, or all of the service processor capabilities discussed herein, but other devices do not have as much or any of the service processor capabilities. Another example is for networks or devices that do not have any service processor capabilities or where it is desirable to do all of the service monitoring, control and notification in the network rather than the device. As described below,  depict various embodiments for combinations of device-based service monitoring, control or control assistance, usage notification or usage notification assistance and\/or network-based service monitoring, control or control assistance, usage notification or usage notification assistance.",{"@attributes":{"id":"p-0590","num":"0589"},"figref":"FIG. 63","b":["5410","5402","121","118","121","5410","5410"]},"In some embodiments, the integrated device service control, device usage monitoring system  provides for network-based service monitoring or control that satisfies various network neutrality and\/or privacy requirements based on indication(s) received from the device or user (e.g., user input provided using the device UI using the service processor ; user input provided through another website, WAP site or portal; or user input provided through the service contract where the user agrees to the monitoring and\/or service control levels) and network-based service control using a DPI service monitor  and\/or the DPC policy implementation .","In some embodiments, the integrated device service control, device usage monitoring system  provides for network-based service monitoring or service control that satisfies various privacy requirements using indication(s) received from the device or user (e.g., user input provided using the device UI using the service processor ; user input provided through another website, WAP site or portal; or user input provided through the service contract where the user agrees to the monitoring and\/or service control levels) and network-based DPI service usage monitoring or DPC policy implementation using the DPI service monitor  or DPC policy implementation  as described below. In some embodiments, the DPI service monitor  and\/or DPC policy implementation  include a secure database for storing service monitoring and CRM information for each device\/device user. In some embodiments, the DPI service monitor  and\/or DPC policy implementation  can be integrated with the integrated device service control, device usage monitoring system  (as shown) or provided within a separate router, server, and\/or software\/hardware implemented function that is in secure communication with the integrated device service control, device usage monitoring system  and\/or other network elements based on the network architecture. In some embodiments, a secure data store, such as a secure database, is not integrated with the DPI service monitor  or DPC policy implementation  but is in secure communication with the DPI service monitor  or DPC policy implementation , the integrated device service control, device usage monitoring system  and\/or other network elements depending on the architecture (e.g., a billing server or any other network element). In some embodiments, the user selects limits and\/or restrictions on who can access remotely stored service usage history and\/or other CRM\/privacy related data (e.g., CRM\/privacy gatekeeper settings), and, for example, other network elements and\/or network administrators access to such data can be limited and\/or restricted accordingly. For example, access to such stored service monitoring and CRM information can require certain security credentials and\/or using various other well known secure data storage techniques, such as the various secure storage techniques described herein.","In some embodiments, the secure database possessing user service usage information that is considered sensitive and has not been approved for distribution by the user can be made unavailable to the credentials possessed by network managers or network functions except, for example, for emergency service situations of government mandated monitoring needs where special credentials are brought out of secure storage that are not normally available. In some embodiments, rather than the user selecting limits, a certain set of restrictions are assumed unless the user selects information filtering settings that allow more information to be shared with the network functions, network administrators or service provider partners. In some embodiments, the information is filtered to remove information thought to be sensitive but still transmits service usage information needed for monitoring network services or other important parameters. For example, the website destinations a user is visiting can be classified with generic identifiers that are not decodable or the individual website information can be completely removed. Many other examples will be apparent to one of ordinary skill in the art.","For example, the stored service monitoring and CRM information can also be organized into groups to define group CRM profiles to store service monitoring information for every user indexed by the user credentials (e.g., such groups can also be used for various VSP related functions, as described herein). The DPI service monitor  or DPC policy implementation  also uses the secure storage to store service monitoring information for each user indexed by the user credentials or another aspect of the device identifier or address assignment (e.g., IP address or MAC address). In some embodiments, a CRM information manager (e.g., a supervisor program executing on the integrated device service control, device usage monitoring system ) communicates with the other network functions and provides filtered service usage and CRM information according to CRM filtering rules for each user or for groups of users. In some embodiments, the filtered CRM data can be made available using secure communications with other networking equipment by the integrated device service control, usage monitoring system . In some embodiments, the filter settings for some users allow more information to be shared from the secure service usage information than others due to the differences in user preference settings and\/or service plan agreements.","In some embodiments, user privacy preference information is used to determine the privacy filter settings, which are securely implemented by the integrated device service control, device usage monitoring system . For example, service CRM filter settings can be received at the time of service contract sign up (e.g., service plan selection) and\/or allow the user to log into service preferences web page to change settings (e.g., without involving any interaction with local software on the device). As another example, software on the device (e.g., including the service processor ) can be used for selecting user CRM\/privacy preferences, which are securely communicated to the integrated device service control, device usage monitoring system  (e.g., the device can include credentials that can be verified to allow for selection\/modification of CRM\/privacy preferences or other user based preferences securely maintained in a network server, such as the integrated device service control, device usage monitoring system  or another network element, such as shown in various other embodiments described herein). In these examples, the filtered CRM data is available from the integrated device service control, device usage monitoring system  for other network components over a secure or open communication link. In another example, user CRM\/privacy preferences are input using a web server hosted by the integrated device service control, device usage monitoring system  or the central billing system . In another example, software on the device (e.g., including the service processor ) can be used for securely communicating user preference decisions to an intermediate server that acts as a device manager and intermediate server for devices or device groups and the integrated device service control, device usage monitoring system .","In some embodiments, the integrated device service control, device usage monitoring system  provides for network-based service control as described below. In some embodiments, and similar to the above-described network-based CRM filtering embodiments, the DPI service monitor  or DPC policy implementation  includes secure storage (e.g., a secure database) for storing service monitoring information (e.g., based on user selections\/preferences), and the DPC policy implementation  performs traffic shaping\/throttling algorithms for each user based on the stored service monitoring information from DPI service monitor . For example, network-based DPI traffic inspection by the DPI service monitor  can use the secure storage to save service monitoring information for each user indexed by the user credentials or other parameters, such as IP address or other network tag. As another example, the DPC policy implementation , for example, which can be supervised by policy management server  as described herein with respect to various other embodiments, can implement service usage history statistical analysis inside the secure storage and maintain a service usage history analysis for each device\/user and\/or perform various traffic shaping and\/or throttling algorithms based on various device, user selected and\/or service plan related settings (e.g., for network neutrality purposes) allowing for various higher level service usage goals for one or more users, as similarly described herein with respect to various device-based service usage monitoring embodiments (e.g., except for certain encrypted network traffic flows or application related flows for which traffic control generally needs information from the application level and\/or content specific traffic control).","In some embodiments, input is collected on how to implement service control (e.g., from the user of the device). For example, such input can be determined based on one or more of the following: a service plan choice for the device; input provided by a user via a website (e.g., web based portal) for indicating changes to service control policies, as similarly described above; input provided by a user via the device (e.g., including the service processor ), which securely communicates the input to the DPC policy implementation , for example, which can be supervised by the policy management server ; and input provided by a user via the device (e.g., including the service processor ), which securely communicates the input to an intermediate server for the DPC policy implementation , as similarly described above. In some embodiments, such service control is based on various algorithms as described herein that identify the heaviest usage service activities and recursively control the speed for those activities while leaving certain others unaffected, and in a manner that is specified or selected by the user to ensure network neutrality. In some embodiments, the user is offered a choice for controlling service usage and\/or selects an algorithm that controls all activities equally\/neutrally (e.g., based on selected user preferences). For example, by implementing service control algorithms that are network neutral (e.g., throttling all activities equally or throttling the highest usage algorithms without singling out certain activities for throttling unless they satisfy certain network neutral usage history or usage statistics criteria), or that are approved, selected or otherwise specified by the user, network neutral traffic control or service usage control can be maintained.","In some embodiments, the DPI service monitor , possibly in conjunction with the service usage notification  and\/or service history server , provides service usage\/service cost (e.g., a real-time service usage counter) related notifications to the device based on user preferences, as similarly described above with respect to various device-based service usage\/service related notification embodiments. For example, the DPI service monitor , for example, in conjunction with the service usage notification  and\/or service history server , can perform service usage\/service related notification algorithms based on one or more of the following: service plans, device settings, and\/or user selected preferences (e.g., such notification messages can be securely communicated to the device and\/or to the device via an intermediate server). For example, the policies that govern how the user is notified of service usage or service cost can be determined by the policy management server  and\/or the service usage notification . As another example, user acknowledgements of important notification messages and\/or user choices related to important service usage decisions can be requested, as similarly discussed above with respect to device-based service usage\/control embodiments, which can then be communicated to the central billing system  as confirmation for any such important notification messages (e.g., related to service usage overage charges and\/or confirmation of service upgrades). In some embodiments, various other service usage algorithms related to service usage and\/or service cost forward projections described herein with respect to device-based service usage forward projection embodiments are performed in the network, such as by the integrated device service control, device usage monitoring system , and such forward projections can then be communicated to each respective device as service usage notification messages (e.g., using a push based approach (initiated in the network) and\/or pull based approach (initiated by a request from the device)). For example, these embodiments for projected service usage methods, as described herein, can be helpful for determining when the user is using services in a manner that will cause the user to run over a service limit so that the user can be notified, or the service can be controlled or throttled if the user has selected a control or throttling option.","In some embodiments, one or more intermediate servers are provided for workload balancing and\/or off-loading the integrated device service control, device usage monitoring system  and perform one or more of the functions described above with respect to various embodiments of the integrated device service control, device usage monitoring system . In some embodiments, service plans, device settings, and\/or user selected preferences are used to associate each device\/user with a preprogrammed profile to more efficiently associate such devices\/users with their selected service plans, device settings, and\/or user preferences. For example, the process of setting a service profile for a given device can be determined by assigning the device to a service flow that has the pre-defined service profile and is shared with other devices within the integrated device service control, device usage monitoring system  rather than individually processing the service flow manipulations for each device. In some embodiments, the act of provisioning and activating a service profile for a given devices involves setting up the service flow definition and identifier within the integrated device service control, device usage monitoring system  (if it is not already set up) and then assigning the routing of the device credentials to that service flow identifier. User preferences can, for example, be accounted for by assigning the device service flow to one of several pre-defined profiles based on user preferences that are all supported under the same service plan. For example, one service flow profile can call for service usage notification but no control under the same service plan as another service flow profile that calls for less notification but active service usage control to maintain user costs to a monthly post-pay limit.","In some embodiments, the bill by account function is implemented in the context of the integrated device service control, device usage monitoring system  or other network-based system embodiments described herein. For example, the DPI service monitor , in some cases in conjunction with service history server , can operate in conjunction with bill by account policy settings stored in the billing event server  so that service activities are divided into the account classifications defined by the service profile settings. The bill by account feeds can then be sent to the billing system or to an intermediate billing event aggregation server that collects this type of deep packet inspection generated information from one or more integrated device service control, device usage monitoring system  units to aggregate and format the information in a manner that may be used by the central billing system . In some embodiments, the bill by account information collected in a network box like the integrated device service control, device usage monitoring system  is augmented by bill by account information collected on the device as described herein, and any intermediate server that can be used to aggregate and format these bill by account feeds for the central billing system deals with both types of data, from the network and from the devices.","As shown in , in some embodiments, integrated device service control, device usage monitoring system  includes the service control server link , which, for example, can be used as described above (e.g., with respect to  and other embodiments described herein) to communicate with device service processors . In some embodiments, billing server  within integrated device service control, device usage monitoring system  detects service usage events reported by DPI service monitor , in some cases in conjunction with service history server , generates a billing event that can be recorded or transmitted to the central billing system . In some embodiments, billing server  receives information from device billing agent  and\/or device service monitor agent  and transmits the device service usage billing events to the central billing system . In some embodiments, certain billing events that are advantageously collected in the network (e.g., DPI service monitor  and\/or billing event server ) are combined with certain billing events that are advantageously collected on the device (e.g., service monitor agent  and\/or billing agent ), and both sources of billing information are transmitted to the billing system . Similarly, in some embodiments, certain service usage information is collected with service usage monitor agent , and that information is combined with service usage information collected from DPI service monitor  and\/or service history server  and\/or service usage . In some embodiments, certain service aspects are controlled using network-based DPC policy implementation , in some cases in conjunction with or supervised by network-based policy management server , and other service aspects are controlled using device-based policy implementation agent , in some cases in conjunction with or supervised by policy control agent . As will now be apparent to one of ordinary skill in the art in view of the numerous embodiments described herein, many hybrid approaches to service usage monitoring, service control, service notification or service billing can be accomplished with some aspects of the policy, notification, control, monitoring or billing being implemented\/performed on the device apparatus described herein and others implemented\/performed on the network apparatus described herein. The presence of access control integrity server  and many other service control verification embodiments described herein make it apparent that the integrated device service control, device usage monitoring system  embodiments also provide for affirmative verification of whatever functions are implemented on the device. It will also be apparent that all of the above combinations of device and network functions, and many others, can be accomplished in ways that are network neutral and\/or protect user privacy preferences by implementing the service control algorithms in a network neutral manner and\/or receiving user preference input on how to implement service control, and by maintaining service usage and CRM information security and filtering on both the device  and the network-based integrated device service control, device usage monitoring system .","In some embodiments, the integrated device service control, device usage monitoring system  facilitates or plays a part in automated provisioning and activation of the devices as similarly described above with respect to various device-based automated provisioning and activation embodiments. In some embodiments, the activation server  is integrated into or partially integrated into device service control, device usage monitoring system .","In some embodiments, the integrated device service control, device usage monitoring system  facilitates ambient services as similarly described above with respect to various device-based ambient services embodiments.","In some embodiments, the integrated device service control, device usage monitoring system  facilitates VSP and ODI solutions as similarly described above with respect to various device-based VSP and ODI embodiments.","Various other network architectures for network-based service control including deep packet inspection functions can similarly be used as will be apparent to one of ordinary skill in the art in view of the various embodiments described herein.",{"@attributes":{"id":"p-0606","num":"0605"},"figref":"FIG. 64","b":["115","100","5510"]},{"@attributes":{"id":"p-0607","num":"0606"},"figref":"FIG. 65","b":["5610","420","410","5616","5412","1650","1618","5402","1652","5618","1662","1654","1638","5612","5622","5620","420","410","420","410"]},"In some embodiments, the bill by account function is implemented in the context of the 4G\/3G\/2G DPI\/DPC gateway  embodiment or other network-based system embodiments described herein. For example, the bill by account information can be completely derived from the network box (e.g., 4G\/3G\/2G DPI\/DPC gateway ) without assistance from device-based service monitoring or billing capabilities, or none may exist on the device. In this example, the DPI service monitor , in some cases in conjunction with service history server , can operate in conjunction with bill by account policy settings stored in the billing event server  so that service activities are divided into the account classifications defined by the service profile settings. The bill by account feeds can then be sent to the billing system or to an intermediate billing event aggregation server that collects this type of deep packet inspection generated information from one or 4G\/3G\/2G DPI\/DPC gateway  units to aggregate and format the information in a manner that can be used by the central billing system . In some embodiments, the bill by account information collected in a network box, such as the 4G\/3G\/2G DPI\/DPC gateway , is augmented, refined or otherwise added to by bill by account information collected on the device as described herein and any intermediate server that can be used to aggregate and format these bill by account feeds for the central billing system deals with both types of data, from the network and from the devices.",{"@attributes":{"id":"p-0609","num":"0608"},"figref":["FIG. 66","FIG. 66","FIG. 65"],"b":["4910","410","420","4910","410","420","4835","123","132","121","410","420","132","5610","410","420","420","410","420","410","420","410","4910"]},{"@attributes":{"id":"p-0610","num":"0609"},"figref":["FIG. 67","FIG. 65"],"b":["5810","420","410","1638","5610","410","420"]},{"@attributes":{"id":"p-0611","num":"0610"},"figref":["FIG. 68","FIG. 68","FIG. 67","FIG. 66","FIG. 68","FIG. 67"],"b":["4910","410","420","121","132","115","100","5810","410","420"]},{"@attributes":{"id":"p-0612","num":"0611"},"figref":["FIG. 69","FIG. 65"],"b":["6010","6025","6025","5610","410","420","6010","6010","6010","6025"]},{"@attributes":{"id":"p-0613","num":"0612"},"figref":["FIG. 70","FIG. 70","FIG. 69"],"b":["4910","410","420","121","132","6010","410","420","6025"]},{"@attributes":{"id":"p-0614","num":"0613"},"figref":"FIG. 71","b":["115","6210","410","420","6225","115"]},{"@attributes":{"id":"p-0615","num":"0614"},"figref":["FIG. 72","FIG. 70","FIG. 71"],"b":["4910","410","420","121","132","6210","410","420","6225"]},"As will be apparent to one of ordinary skill in the art, the above-described embodiments can be extended to include some or all of the functions depicted in the 4G\/3G\/2G DPI\/DPC service gateways of  in the base station or base station controller .","Automated Provisioning and Activation","In some embodiments, automated provisioning and activation includes automation of one or more of the following functions: (1) programming device credentials or partial credentials and recording them in a database (or providing same when they are programmed into the device), (2) associating these credentials with the proper provisioning and\/or activation actions to be taken on the device and in the network, (3) directing the device to the proper activation function (e.g., activation server) sequence when it attempts to connect to the network, (4) completing provisioning of the device, (5) programming the AAA, billing system, gateways, mobile wireless center and other network equipment to the proper initial device service control settings, and (6) establishing a service account for the device.","In some embodiments, improved processes for activating service for a device or user with a network service provided by a central provider network, an MVNO network or a VSP on the central provider network are provided. In some embodiments, activation includes one or more of the following: a process or result of associating a service account with device or user credentials; with the service account potentially further being associated with a service profile defining the service activities that the device is authorized to access; creating or updating a service usage or billing record and associating it with the service account to create a service plan; and\/or initiating service to the device or user in which the network equipment allows access to the appropriate level of service activities. In some embodiments, VSP embodiments include the provisioning and activation apparatus embodiments of any or all forms.","In conventional mobile device provisioning systems, the provisioning and activation process required to create a user service account and enable the device to access the desired level of service activities can limit mass market, low cost or user friendly applications of the device or service, because the process can often be cumbersome, time consuming and\/or expensive for the service provider, service owner, master agent (service distributor), MVNO, VSP and\/or user. Accordingly, the various embodiments for provisioning and activation described herein simplify the provisioning and activation process for mobile devices. In some embodiments, provisioning and activation for the device and\/or the network accommodates a wide variety of device types and service profile types, with the capability to perform the provisioning and activation at a number of points in the manufacturing, distribution, sales and usage progression for the device, and the ability to either pre-activate before first device use or very quickly activate during first device use (or during some later use of the device).","In some embodiments, as described herein, the term provisioning generally refers to those actions\/processes associated with programming the device with credentials or other device settings or software installations used to later activate the device, as well as, in some embodiments, creating database entries and other credential associations in the network so that the network and\/or device have the information used to recognize the device or credentials and implement the service policies in the service profile and\/or service plan once the service profile and\/or service plan are activated. In some embodiments, as described herein, the term activation generally refers to the process of creating or selecting the service plan and\/or service profile, programming the settings that are used in each (e.g., required) network function and\/or each (e.g., required) device function so that the system can properly associate the device credentials with the appropriate service activity policies, and then admitting the device onto the network. The term activation can also refer in some embodiments to the creation of a user or device service account, in some cases, with user or device owner information or billing information. In some embodiments, the process of provisioning amounts to assigning credentials to the device and programming a portion or all of the credentials on the device, entering a portion or all of the credentials in the various necessary network equipment databases so that the network components are capable of identifying the device and associating it with the network-based portion of the admission, traffic processing, service monitoring, billing, service limits and other policies that are eventually defined by the service profile and service plan.","Further examples of the network-based service profile policies include network access level, traffic routing, service monitoring, service limits and actions taken upon reaching service limits. Once the service profile is created and activated during the activation process, the device credentials and the associated service profile are communicated throughout the necessary network elements so that each element can implement its part of the network portion of the service profile policies. This process of propagating the service profile settings to all the required network equipment components is a portion of what is referred to herein as activation in accordance with some embodiments. In some embodiments, the activation process includes associating the credentials with the proper service plan and\/or service profile, and possibly completing the process of programming the device functions and\/or network functions so that the device can be admitted to the appropriate level of network services. In some embodiments, activation also includes the service processor software settings, configurations or installs for each function or agent in the service processor to implement its part of the service profile, service plan, service billing or transaction billing policies. In some embodiments, activation also includes the creation of entries in the various service account databases and\/or billing databases to create a user account or device owner account for the purpose of managing the user choices for service plan and other account information storage and management aspects, such as maintaining status information, maintaining the central service profile configuration, conducting reconciliation and billing exchanges, service usage history, and\/or account history.","In some embodiments, the term credentials generally refers to the set of information parameters that the network and\/or device uses (e.g., requires) to admit the device onto the network and associate it with the appropriate service profile and\/or service plan. For example, the credentials can include one or more of the following: phone number, device identification number, MEID or similar mobile device identifier, hardware security device ID, security signature or other security credentials, device serial number, device identification and\/or credential information via security hardware such as a SIM, one or more IP addresses, one or more MAC addresses, any other network address identifier, embedded device descriptive information block (static or programmable), security key, security signature algorithms, passwords or other secure authorization information, service processor (or similar device client or agent software) identifier or settings or version, device type identifier, browser (e.g., http, https, WAP, other browser client) header information or similar identifier, browser token information or similar identifier, browser cookie information or similar identifier, embedded browser instructions, portal-client (e.g., interface or communication agent that connects to a network portal used at least in part for provisioning or activation for the device or by the user) header information or similar identifier, portal-client token information or similar identifier, portal-client cookie information or similar identifier, embedded portal-client instructions, service provider, OEM, master agent (service distributor), VSP, device service owner identifier, distributor or master agent, and\/or any information the network can use to authorize network admission, provision the device, provision the network, activate service, authorize, associate or enable the device with a provisioning sequence, associate or enable the device with one or more service profiles, associate or assist the device with an activation sequence, associate or enable the device with an ambient profile or service experience, associate or enable the device with one or more service plans or service capabilities, associate the device with a service provider or service owner, associate the device with an OEM or master agent, associate the device with a distributor or master agent, or associate the device with a device group, user group or user. In some embodiments, at least some of the credentials are unique to the device, and, in some embodiments, groups of devices share one or more aspects of the credentials. In some embodiments, the term permanent credentials generally refers to the set of credentials that include at least a subset that are intended to be assigned to a device or user on a permanent basis. In some embodiments, the term temporary credentials generally refers to the set of credentials that include at least a subset that are intended to be assigned to a device or user on a temporary basis. In some embodiments, temporary credentials are eventually replaced by permanent credentials. In some embodiments, at least some elements in the temporary credentials (e.g., phone number and\/or access or authorization security credential) are used for more than one device. In some embodiments, the temporary credentials are recycled from one or more devices and used for one or more other devices, for example, when they remain unused for a period of time or when they are replaced with permanent credentials on one or more devices. It should not be inferred from the term permanent credentials that permanent credentials are never recycled, for example, when the user discontinues service or use of the credentials. Also, the term temporary credentials does not imply that temporary credentials are always temporary. In some embodiments, partial credentials or pre-activation credentials generally refer to a subset of credentials that are to gain access to limited network services for the purpose of provisioning of credentials and\/or activation of a service plan or service profile. For example, prior to a phone number being assigned, a device can gain access to a limited set of network server destinations in which embedded information contained in the device (e.g., the partial credentials) is provided to the server, the server associates that information with the proper additional credentials (including the phone number) to assign to the device and\/or associates the information with the proper service profile to activate service. In this example, partial credentials can include device type, OEM, service provider, VSP, device identification number, SIM, service processor configuration or some other information used by the server to determine what the credentials should be and the proper service profile.","In some embodiments, a permanent service account generally refers to the service account that is permanently associated with the user and\/or device. For example, this account includes an association with the device or user credentials, user information or billing information, service profile, billing profile, network authorization status and other aspects that define the device or user service policies and billing policies. In some embodiments, the term temporary service account generally refers to a service account that is temporarily set up and associated with the device before some or all of the required permanent account information is available or entered for a device or user. For example, this account can be set up with an association with an actual user, or can be set up with a mock user or unassigned user association so that the network and billing system can recognize the credentials, authenticate the device, admit the device, provide the proper level of service activity control according to the service profile associated with the temporary service account, or collect the service activity usage information for various network and billing system accounting needs before actual user information or billing information has been entered into the network systems. For example, a temporary service account can make it possible or easier to use existing billing systems or other network systems to provide simplified provisioning, simplified activation or ambient services. A temporary service account can also become a permanent service account by replacing mock user or unassigned user information with actual user information, or a temporary service account may need to be replaced by a permanent service account when actual user information needs to be entered into the network systems, possibly including the billing or service profile databases.","In some embodiments, temporary or permanent device credentials and other information used\/required for provisioning the device are generated with apparatus located at the manufacturer or in the distribution channel as discussed below. In some embodiments, the apparatus includes a local onsite server that typically shares some aspects of the provisioning information (e.g., phone number, phone number range, MEID or MEID range, SIM number or SIM number range, IP address or IP address range, MAC address or MAC address range, other secure device credential elements) with a network provisioning database. In some embodiments, the apparatus includes a server terminal, and the aforementioned portion of the credentials is generated by the network and shared with the local provisioning apparatus. In some embodiments, as will be discussed below, the provisioning credentials are in part generated in the network and shared with the device while it is connected online to an activation server (e.g., activation server ) that is connected to the access network. Similarly, there can be activation servers connected to apparatus in the manufacturing or distribution channel that service device activation, or over the air or over the network apparatus connected to an activation server, which in turn connects to the device, can be used to accomplish activation programming of the network and device as further discussed below.","In some embodiments, when a device is provisioned and entered into the network provisioning database, it is associated with the automatic provisioning and\/or activation sequence the device is intended to go through once it connects to the network or to the apparatus that will complete the process. In some embodiments, one or more device parameters (e.g., service owner, device type, OEM, plan type, IP address, security credential and\/or software version) are used to determine what the appropriate network provisioning steps and\/or settings are for completing the provisioning and\/or activation process, and this association information is stored in the network provisioning database for propagation of the provisioning profiles or activation profiles to the various network equipment elements. In some embodiments, the network provisioning database is provided (e.g., in the network) that associates the pre-activation provisioning information (e.g., generated, as described herein, at time of manufacture, sometime during distribution, by the user on a website by a sales associate or other activation assistant, or by the network when a new device enters the automatic activation process). For example, the pre-activation provisioning information informs the network whether or not to let the device onto an activation sequence when the device attempts access, and in some cases, also instructs the network to direct the device to a specific activation sequence including, for example, an activation server (or other activation sequencing apparatus) sequence as described herein. In some embodiments, a central database is queried by other network equipment or the central database is included in one or more of the network elements (e.g., the AAA server and\/or billing system, mobile wireless center ), or the database is copied in part or in whole in various network elements (e.g., the central database, AAA server, mobile wireless center, billing system and\/or gateways).","In some embodiments, propagating the network equipment provisioning information for a given device or group of devices is accomplished with a network provisioning system that has access to the network provisioning database and is capable of programming the appropriate network equipment. In some embodiments, this network equipment is referred to as \u201cnetwork management\u201d equipment or \u201cnetwork provisioning\u201d equipment. In some embodiments, there are several functions that take part individually or in concert, including, for example, the AAA server , service controller  (either with device-based\/assisted services through the service processor related embodiments or with network only embodiments as described herein), the mobile wireless center  (e.g., including the home location register (HLR) or other similar function referred to by other industry terms), the activation server(s) , other network provisioning or management equipment attached to or associated with the billing database system, and\/or some other equipment apparatus. In some embodiments, the local database on the device, database in the AAA server and\/or database elsewhere in network is provisioned to inform the gateway of the process for handling the pre-provisioned device according to, for example, the credentials. For example, if the device is not recognized or not authenticated onto the access network as an activated device with associated active service profile and\/or service plan, the device connection or communication can be directed (or routed) to a generic activation server that provides an activation sequence that is not necessarily determined by one or more of the specific device credential elements, partial credential elements, device profile or partial device profile that define something specific about the activation sequence for the device. In another example, in which the device is not recognized or authenticated as an activated device with associated service profile and\/or service plan, the device can be directed (or routed) to an activation service (or other activation sequencing apparatus) that uses some part of the credentials or range of partial credentials or a portion of a partial or complete device profile to determine a desired pre-determined device specific or device group specific activation sequence that is implemented by a specific activation service sequence or other activation sequence apparatus. In another example, in which the device is not recognized or authenticated as an activated device with associated active service profile and\/or service plan, a portion of the device credentials or partial credentials can be used as a look-up index into a database that determines what the specific device activation sequence should be, and the device can be directed (or routed) to a specific activation server sequence or other activation sequencing apparatus.","In some embodiments, a database in the AAA server or database elsewhere in network is provisioned to inform the gateway what to do with a pre-provisioned device according to the credentials. For example, devices can be authenticated (for activated devices), routed to activation servers (or other activation sequencing apparatus) or denied access. In some embodiments, the AAA server (and\/or other network elements) provide the above discussed look-up function for the above gateway description in which a lookup database, locally stored or stored in a central database, is queried to provide secondary routing information to the specific or generic activation servers.","In some embodiments, the pre-provisioned database is located in the billing system. In some embodiments, the billing system accesses the pre-provisioned database (e.g., stored on the billing system or another network element) for the purpose of setting up temporary accounts or permanent accounts and associating those accounts with pre-activation status, activated free ambient or activated paying customer.","In some embodiments, for zero activation, all the required pre-provisioning or programming of the above network elements, or others, is coordinated by the network provisioning system at some point after the partial or full device credentials have been associated with the device or reserved for a particular device type or service type. In some embodiments, the network provisioning system also coordinates the information to or from the device provisioning apparatus that is described elsewhere.","In view of the various embodiments described herein, it will be appreciated that many of the automated or background provisioning, activation and ambient embodiments described herein can be accomplished with network-based approaches, device-based approaches, or network\/device combination\/hybrid based approaches. For example, when the access control for the provisioning process is accomplished in the device (e.g., a device-based approach), the activation server can be located anywhere on the Internet, and the device will ensure that the activation process is conducted with the activation server while blocking other traffic from occurring. As another example, some or all of the ambient provisioning programming steps become steps to program the access control, traffic control, application control, bill by account rules, and\/or other aspects in the service processor or service controller as described herein.","In some embodiments, the provisioning apparatus described herein can be a computer located in the user's home or business, and the user or an IT manager has access to a website that provides the provisioning information, in which the computer serves as the provisioning or software programming apparatus. In some embodiments, the network itself, possibly through an activation server , website or other interface to the device, becomes the provisioning apparatus, in some cases, with the assistance of software on the device to affect the programming of provisioning information from the network or the communication of device credentials or other information to the network. For example, this software can be a background process that runs without user interaction, a portal\/widget program, a web browser based program, a WAP browser based program, and\/or any other program that provides a counterpart function to the network functions effecting the provisioning (e.g., activation server). In some embodiments, the activation server either initiates a specific provisioning sequence if device software is present to assist or routes to a website for manual entry if there is no software present.",{"@attributes":{"id":"p-0633","num":"0632"},"figref":"FIG. 73","b":["6420","123","6225","410","420","125","6410","160","1660","6420","120","6420","6410","6410","110","6410","6420","6430"]},"In some embodiments, a device software loading and programming apparatus  provides software loading or device settings functions that form a portion or all of the provisioning or pre-provisioning device configuration, or form a portion or all of the device activation profile configuration, or form the device service owner, master agent or VSP device assignment or signature, and in some embodiments, using an activation tracking service (ATS) system. As discussed herein, the ATS monitors network connections and aspects of traffic that provide insight into which networks the device  is gaining access to, in some embodiments, for the purpose of ensuring that an OEM, master agent, device service owner or VSP is being compensated for devices that activate on a service provider network. In some embodiments, the ATS agent connects to a server counterpart that records and, in some embodiments, also analyzes the service or network connection information to make a determination of the type of access service the device is receiving and, in some cases, determine which networks the device is activated on. In some embodiments, the ATS is installed on the device in a manner that makes it difficult to tamper with or remove so that the entity that is intended to get credit for device service activation does get credit (e.g., the ATS agent can be loaded into secure memory, it can be installed with software that makes it difficult to de-install, it can be installed on the modem possibly in secure memory, it can be installed in the BIOS, it can be installed deep in the OS kernel, it can be installed with one or more additional device agents that monitor the ATS agent and alert a network function or re-install it if tampered with). The SIM inventory  is provided to illustrate that, in some embodiments, hardware elements (e.g., a SIM security module as shown) or hardware configurations are also installed or manipulated in device  and these operations and the recording of the resulting associations form a portion of the provisioning or pre-provisioning process.","In some embodiments, at the time the credentials or partial credentials are loaded, programmed, set, installed, read from the device or otherwise recorded, they are, in some cases, all associated together in a database that allows for later identification of the device and its appropriate provisioning and\/or activation process through such associations. For example, this can involve reading device parameters such as MEID, MAC address, device type, or other information that is associated with the information being loaded or configured on the device. As discussed herein, this credential configuration and association information is stored in the network equipment responsible using it to configure the network to activate the device in one of the various embodiments disclosed herein.","Some embodiments include tying some or all of the activation provisioning steps and information settings together into a database that defines a higher level activation profile for a group of users (\/devices), and a server is used to perform device and equipment programming for the devices in the group, including, for example, associating the following device information into the group definition: credentials, service owner or master agent, provisioning information and\/or activation profile. Some embodiments further provide for this device group information being distributed to the various network equipment components required to activate the devices as discussed elsewhere. In some embodiments, this programming and device group association is accomplished using the VSP workstation server . For example, a device can be manufactured and distributed in a manner that provides flexible assignment of the device to a group that is assigned to an activation profile or a service owner.","In some embodiments, multiple activation servers  are provided (as shown), which illustrates that there can be multiple device activation servers  each with a different device activation experience and potentially controlled by a different VSP, service owner, service provider, OEM or master agent. As discussed herein, there are several ways that a device  can be routed to the proper activation server  so that the device provisioning and activation process can be completed. In some embodiments, all devices that are not activated are re-directed (or routed) to an activation server that reads one or more parameters in the device credentials. The device credential information can be determined either through the device identification information associated with the access network connection itself (e.g., MEID, IP address, phone number, security credentials, or other credentials identified for a device that gains access with the network), or with the aid of the device in a pre-arranged query-response sequence. The device can then be re-directed (or routed) to the appropriate activation server for that device, device group, device service owner or VSP. In some embodiments, the same process described above can be accomplished with a single re-direction from a service gateway  or , or another router enable network element. In some embodiments, the gateway or network element itself decodes the device credential information as described herein and performs the correct re-direct (or route) to the appropriate activation server  for that device. In some embodiments, the activation server  can be incorporated directly into the gateway  or , the base station  or other network component. In some embodiments, the activation server  can be incorporated into the service controller  or the service controller device control system .","In some embodiments, apparatus other than the activation server are used to facilitate provisioning of credentials or partial credentials, or activation, during manufacturing or device distribution, and, for example, these apparatus can augment, supplement, compliment or replace the activation server function. Such apparatus include, for example, device programming equipment (e.g., device credential provisioning apparatus , device software loading and programming apparatus  or SIM inventory ), equipment that is networked into a central provider, MVNO or VSP database (e.g., device credential, software and settings server ) to gain access to provisioning information or activation information that is programmed into a device or group of devices, or to place device credential or partial credential information in a network database for later recognition, or to receive or communicate security information such as certificates for devices or SIM modules that will later be used to complete provisioning or complete activation or gain access to a network. For example, these apparatus, or any other apparatus including the activation server, can be networked into a service provider network or device database, an MVNO network or device database or a VSP network or device database. In some embodiments, programming of the device credentials or other information associated with the service processor or device is provided, so that, for example, the device can be recognized by an activation server or similar network function at a later point in time so that provisioning or activation can be completed in an automated manner, potentially with reduced or no user involvement, that provides a provisioning or activation configuration that is in some way unique for the service provider or service provider partner, device type, user group, VSP, MVNO, master agent or other entity. In some embodiments, this programming is provided in a manner that is difficult to change without the proper authorization so that the device is properly associated with the proper \u201cservice owner\u201d or master agent (e.g., for the purpose of activation incentive payments). For example, as discussed herein, various approaches can be applied to the device credential or other settings or software provisioning so that the settings or software are secure or protected, or so that if the software is removed, replaced or modified it is reported or replace or restored. In some embodiments, VSP control of the provisioning, partial provisioning or activation of devices is provided during manufacture or at different points in the distribution channel. As discussed herein, some of these embodiments allow the central provider to offer to service partners (e.g., VSPs, MVNOs, master agents, and\/or OEMs) similar types of control for device activation experience design or device service assignment control (e.g., sometimes referred to as service provider device locking so that other service providers cannot provide primary access to the device) during the manufacturing or distribution process that are possible with devices manufactured and distributed for the central service provider.","In some embodiments, the device is provisioned before the user obtains the device with permanent credentials, temporary credentials or partial credentials. In this case, the necessary credential programming of the device occurs during manufacture, at some point in the device distribution, such as at a distribution depot or in a store, or at the point of sale or point of shipment. In some embodiments, provisioning of network information as discussed above is used, and the network information is provisioned at the same time, before or after the device information is provisioned. In some embodiments, the device provisioning information is programmed with dedicated apparatus that connects to the device either with wires or wirelessly. For example, the dedicated apparatus can be local to the location where the device is being provisioned, or it can be partially or entirely networked into a database or provisioning solution located elsewhere and operated by the central provider, a VSP, OEM or other entity. For example, the apparatus to program the network portions of the provisioning information can also be networked and the operators who set up the required network programming for a device or group of devices may be in the vicinity of the servers that host the provisioning and management tools or they may network into the servers. In some embodiments, provisioning system operators have full or partial control of any device provisioning equipment associated with the entity they work for (e.g., OEM, VSP or master agent) but only have remote access via secure terminal, secure website or other techniques to network into a central provider or VSP server farm in which they control or partially control the network portion of provisioning capabilities for that subset of devices that are assigned to the entity they work for with (e.g. OEM, VSP or master agent).","In some embodiments, provisioning is accomplished over the air on the mobile access network for mobile devices, or over the wired access network or WLAN connection for wired access networks, either before the user receives the device or after the user receives the device. In some cases, the device can be connected to general purpose equipment, such as a computer to perform the programming required to complete provisioning. In the cases in which the device is provisioned at point of sale or after point of sale, the device provisioning can be triggered by a user initiated sequence, or can be initiated by an automated background sequence at any time after the device is powered on. In such cases, in some embodiments, partial credentials that include information such as device type, OEM or service provider are used to assist in determining how to complete the provisioning, and the information can also include secure information, certificate or signature programmed into the partial credentials that is required for the network to perform the provisioning of the remaining credential information in the device and possibly the network. In some embodiments, any network information used\/required to provision the device or service is generated at the time the partial credentials are determined rather than beforehand.","In some embodiments, the device is activated for service before the user obtains the device with permanent credentials, temporary credentials or partial credentials, or with a permanent service account or a temporary service account. For example, in this case, the necessary steps of provisioning and activating service for the device can occur during manufacture, at some point in the device distribution, such as at a distribution depot or in a store, or at the point of sale or point of shipment. In some embodiments, the steps for activating service include one or more of the following: provision the device (e.g., with permanent, temporary or partial credentials), provision the necessary network databases and equipment to prepare them to recognize the device and associate it with the service profile and\/or service plan, create or select the service account (e.g., permanent or temporary service account), select or create the service profile and\/or service plan, program any elements in the device required to activate service (e.g., account ID, device aspects of the service profile and\/or service plan), and program the necessary network databases and equipment with the required associations of device credentials and service profile and\/or service plan policy settings. In some embodiments, the device-oriented programming portions of the service activation steps occur at the same time, before or after the network oriented programming portions of the service activation steps.","In some embodiments, the device activation information is programmed with dedicated apparatus that connects to the device via a wireless or wire line connection. For example, the dedicated apparatus can be local to the location where the device is being provisioned, or the dedicated apparatus can be partially or entirely networked into a database or service activation solution located elsewhere and operated by the central provider, a VSP, OEM or other entity. For example, the apparatus to program the network portions of the activation information can also be networked and the operators who set up the required network programming for a device or group of devices can be in the vicinity of the servers that host the service activation and management tools or they can network into the servers. In some embodiments, activation server tools operators have full or partial control of any device activation apparatus associated with the entity they work for (e.g., OEM, VSP or master agent) but only have remote and partial access via secure terminal, secure website or other techniques to network into the network portion of the activation tools that are controlled by the central provider or VSP. The server tools operators can be restricted in some embodiments to providing network activation information or settings only for those devices or device groups that are assigned to the entity they work for with (e.g., OEM, VSP or master agent). For example, the device control group restriction can be accomplished with a secure database that has secure sub-partitions for one or more entities so that they cannot impact the control of one another's network activation settings but can control their own devices. In this way, a centralized set of activation tools resources controlled by a central provider, VSP or other entity can be partitioned so that different entities can have partial or full control of the activation service definition for devices or groups of devices without impact or risk to others who share the network and activation tools resources.","In some embodiments, activation is accomplished with an over the air interface to a mobile device, or over the wired access network or WLAN connection for wired access networks, either before the user receives the device or after the user receives the device. In some cases, the device can be connected to general purpose equipment such as a computer to perform the programming required to complete activation. In the cases in which the device is activated at point of sale or after point of sale, the final device activation process can be triggered by a user initiated sequence, or can be initiated by an automated background sequence at any time after the device is powered on. In such cases, some embodiments call for a temporary service account that is used to bring the device onto the network before the user has input the information necessary to create a permanent service account. In some embodiments, a temporary or permanent service account can be applied to the device at the time the device reaches the network, and the type of account, service profile and\/or service plan can be influenced (e.g., partially determined or informed) or determined by information embedded in the device credentials or partial credentials, such as device type, device ID, SIM, OEM or service provider. For example, the device credentials can also include secure information, certificate or signature that can be required by the network to perform the activation steps for temporary or permanent service account status. In some embodiments, in which the device is activated in this manner before the user information is available, or before the user has selected a pay for service plan, the service profile and service plan are set up for ambient services as described herein.","In some embodiments, the device is activated during the manufacturing or distribution process, and then the activated device status is suspended. Once the temporary or permanent service account is set up, with appropriate service profile and\/or service plan and temporary or permanent credentials, in some networks and billing systems the service can often be more easily resumed once suspended as compared to provisioning and activating the device from scratch. The device is then later resumed (or re-activated) when some event triggers the resume process, such as when it ships to the end user or when the end user attempts to use it. This process prevents the network from needing to manage credentials and accounts for devices that have been activated but are not yet on the network.","In some embodiments, provisioning is accomplished at least in part with temporary credentials in a manner that is automated and convenient for the user or device owner. In some embodiments, at least some subset of the temporary credential elements replaced at a later point in time by permanent credential elements in a manner that is also automated and convenient for the user or device owner. In some embodiments, the temporary credential set is pre-programmed into the device along with a temporary or permanent service account including service profile during the manufacturing or distribution process so that the device is activated with temporary credentials when it ships. In some embodiments, the aforementioned pre-programming is performed for the network via a secure set of server access equipment that networks into the network databases used to define the service profile and\/or the service plan. In some embodiments, a subset of the temporary credentials is recycled once it is replaced, if a temporary service account is not activated or used after some period of time, if a permanent account is not activated or used after some period of time, or if the credentials subset is revoked from the device for some other reason.","In some embodiments, more than one device is assigned one or more elements of the temporary credentials, such as the phone number, which may be limited in supply. In some embodiments, a network will accept more than one set of temporary credentials, one or more redundant elements, for two or more different devices. In some embodiments, a device that has two or more temporary credential sets, in which at least a subset of the credential elements are different for the sets, so that if one set of credentials has elements that are already being used to access the network, then one or more reserve sets can be drawn upon to gain access to the network.","In some embodiments, the temporary credentials are used to log onto the network to conduct an over the air or over the network activation process in which an activation server reads at least a portion the device credentials to determine some aspect of how the device service profile. In some embodiments, the aforementioned over the air activation process is accomplished in the background without user intervention. In some embodiments, the over the air activation process is initiated when the user first attempts to use the device or when the user first attempts to access the network or upon user request or approval. In some embodiments, the over the air activation process is initiated using a temporary service account for the device and\/or network to gain access to the network. In some embodiments, the over the air activation process is initiated after the user has entered the information required to create a permanent user account into the device or into the network. In some embodiments, the user is required to enter the aforementioned user information before using the device or using some aspect of the device. In some embodiments, the temporary service account is replaced by a permanent service account some time after the user has entered the necessary information to create a permanent account into the device or network. In some embodiments, the over the air activation process is initiated using a permanent service account assignment for the device and\/or network to gain access to the network.","In some embodiments, the service profile is assigned to the device and\/or network during the aforementioned over the air activation to be a pay for service profile with a free trial period. In some embodiments, the service profile assigned to the device and\/or network during the aforementioned over the air activation includes pre-pay, post-pay, session based pay or pay as you go options for service. As will be apparent to one of ordinary skill in the art, various embodiments disclosed herein are particularly well suited for control or pre-pay services. In some embodiments, the service profile that is assigned to the device and\/or network during the aforementioned over the air activation is an ambient service profile providing service access before all the user information is available to assign a permanent account. In some embodiments, the service profile that is assigned to the device and\/or network during the aforementioned activation is an ambient service profile providing a service upgrade selection option interface to the user. In some embodiments, the service profile that is assigned to the device and\/or network during the aforementioned activation is an ambient service profile providing transaction services to the user. In some embodiments, the service profile that is assigned to the device and\/or network during the aforementioned activation is an ambient service profile providing bill by account functionality for the network. In some embodiments, the service profile that is assigned to the device and\/or network during the aforementioned activation is an ambient service profile providing some amount of free networking or information service to entice the user to use the other ambient services. In some embodiments, the aforementioned ambient service is at least partially implemented with device-based service activity control or control assistance. In some embodiments, the aforementioned ambient service is at least partially implemented by gateways, routers or switches in the network that are programmed according to the ambient access profile for the device to implement the ambient policies for network access control, routing control, traffic control or service monitoring and reporting for bill by account.","In some embodiments, activation is accomplished at least in part with a temporary service account in a manner that is automated and convenient for the user or device owner. In some embodiments, at least some subset of the temporary service account is replaced at a later point in time by permanent service account subset in a manner that is also automated and convenient for the user or device owner. In some embodiments, the temporary service account settings (e.g., including the service profile settings and\/or the service plan settings) are pre-programmed into the device along with a temporary or permanent credentials set during the manufacturing or distribution process so that the device is activated with temporary credentials when it ships. In some embodiments, the aforementioned pre-programming for the network is performed via a secure set of server access equipment that networks into the network databases used to define the service profile and\/or the service plan. In some embodiments, the device is suspended once it is activated but before the user is using it, and then resumed before or commensurate with the point in time that the user begins to use it. In some embodiments, some subset of the temporary service account is recycled once it is replaced, if the temporary service account is not used after some period of time, if the temporary service account is not upgraded to a permanent service account after some period of time, or if the activation is revoked from the device for some other reason. In some embodiments, more than one device is assigned to the same temporary service account. In some embodiments, a network accepts more than one device on the same temporary service account. In some embodiments, a device includes or is associated with two or more temporary service accounts, in which at least a subset of the temporary service account elements are different, so that if one account is already being used to access the network then one or more reserve accounts can be drawn upon to gain access to the network. In some embodiments, the temporary service account is associated with a temporary credentials set. In some embodiments, the temporary service account is associated with a permanent credentials set.","In some embodiments, un-activated devices are detected by the network routing equipment (e.g., service gateways or routers in hierarchical networks or base stations with embedded gateways in flat networks) and the device routing is programmed to re-direct un-activated devices to an activation server network destination. For example, the activation server can first inspect the information associated with the device to determine if the device belongs to the list of devices, device types or device groups that the network is programmed to provide access to. For example, the information used to determine this can include device type, service provider, phone number, device ID, SIM ID or configuration, secure information used to qualify the device, IP address, MAC address, user, user group, VSP, OEM, device distributor, service distributor (master agent), service processor presence or configuration, presence or configuration of other software or hardware. There can also be some activation definition information embedded in the credentials, or associated with some portion of the credentials, or programmed additionally on the device that informs the activation server as to the service profile and\/or service plan and\/or service account that should be established for the device. If activation information (the service profile, service plan and\/or service account information) is found through association with the device credentials (e.g., device ID, phone number, IP address, MAC address, SIM or other security credentials) rather than being read directly from information embedded in the device or device credentials, then the pertinent aspects of the credentials can be used as a cross reference to look up the service plan and\/or service profile information stored in a database networked to or within the activation server. The activation information can include information to define a wide variety of service plans and service profiles that when properly implemented on the network functions, and perhaps device if necessary, can provide for a wide range of service activity policies, service billing policies, transaction billing policies and service account types that can be associated with the device over the air or over the network.","In some embodiments, once the activation server has determined the activation information from the device or from a look up based on some aspect of the device credentials, then the activation server initiates the necessary network settings and billing database entries to be programmed by sending the service profile instructions to the network provisioning and activation apparatus and the service plan instructions to the billing system. In some embodiments, the activation server can then also send the any necessary service profile and\/or service plan settings required for the device to a provisioning and activation support software function on the device, such as various embodiments of the service processor, so that the device provisioning and activation can be completed. The provisioning can be with permanent credentials or temporary credentials, and the service account that is set up may be permanent or temporary. In some embodiments, the activation process described above is completed perhaps before the user has entered some or all of the user information necessary to set up a permanent service account, and, in these cases, a temporary service account can be set up. In some cases, the activation process can be completed in the background before the user has completed an attempt to access the network and the service profile can be set up to provide ambient services to a temporary service account. In some embodiments, the user is required to enter the information required to establish a permanent service account prior to gaining full use of the device, either on the device, on a computer or in the store, so that by the time the user begins using the device the above activation embodiments can provide for ambient services activation with permanent account status so that the user can purchase a service upgrade or any transaction without entering any more account information.","In some embodiments, a device status is changed from a temporary service account to a permanent service account. If the device is activated with a temporary service account, and the user information is available to set up a permanent account, then if the billing system rules and interfaces allow for such, the user information can be changed from the mock information to the actual user information while maintaining the same account identifiers in the billing system. If the billing system will not allow for such, then the user information can be used to establish a new account, the device credentials can be re-associated with the new account, in some cases, after modifying one or more of the device credential parameters, and the network functions can be re-programmed as required, and, in some cases, the device can be re-programmed as required to accommodate the new permanent account.","In some embodiments, code on the device pulls a temporary or permanent set of credentials. When the credentials are pulled, the network associates the device with an ambient service profile according to one or more of the following: embedded device information identifying device type, service owner (e.g., VSP), user group, or user, or device ID is cross referenced to a database that is populated some time from manufacturing time to post sale where the database provides information identifying device type, service owner (e.g., VSP), user group, or user. The device is then re-directed accordingly (e.g., for device-based this is a matter of setting the policies or loading the software for the service processor, for the network-based approach this is a matter of populating the routing tables and service profile). For example, credentials can be re-cycled after a period of time, and\/or some portion of the credentials can be redundant with other devices. For example, this is essentially a dynamic service for (temporarily) assigning device credentials, and the duration of the temporary credential validity for that device ID can be time limited to give the user time to activate a real account or a free trial, session limited, or a longer duration of time that is perhaps refreshed each time the device logs on. For example, the device could also already have permanent or temporary credentials but not have a service account. The above process can be used to assign a temporary or permanent service account as well. Once the service account is assigned and the appropriate service profile is propagated to the network elements, the device can then be directed to or use the appropriate activation profile service activities or the appropriate ambient service activities.","In some embodiments, the device is activated in the background in a manner that is virtually transparent to the user. For example, at some point in the distribution channel, the device is programmed to seek the activation server system described above as soon as it is turned on, or as soon as some other event occurs like the user using the device or the user attempting to gain access. When the pre-programmed event is triggered, the device connects to the network and the gateways or routers re-direct the device to an activation server, as discussed above. As also described herein, the activation server either derives information from the device that informs the server what service the device should be activated with, or the server derives that information from a database look up with a portion of the device credentials as the cross reference parameter. Once the activation server has determined the activation information from the device or from a look up based on some aspect of the device credentials, then the activation server causes all the necessary network settings and billing database entries to be configured\/programmed by sending the service profile instructions to the network provisioning and activation apparatus and the service plan instructions to the billing system. In some embodiments, the activation server can then also send the any necessary service profile and\/or service plan settings required for the device to a provisioning and activation support software function on the device, such as various embodiments of the service processor, so that the device provisioning and activation can be completed. For example, the provisioning can be with permanent credentials or temporary credentials, and the service account that is set up can be permanent or temporary.","In some embodiments, background activation is performed using the aforementioned activate\/suspend process. At some point in the distribution channel, the device is programmed to seek to resume service as soon as it is turned on, or as soon as some other event occurs like the user using the device or the user attempting to gain access. When the pre-programmed event is triggered, the device attempts to connect to the network and the gateways or routers re-direct the device to an activation server as described herein. As also described herein, the activation server either derives information from the device that informs the server that the device is ready to resume service, or the server derives that information from a database look up with a portion of the device credentials as the cross reference parameter. Once the server is aware of this information, it sends a message to resume service to the billing system, or other network function that controls the suspend\/resume function, and the service is resumed.","In some embodiments, background activation is performed as described below. The service processor and the credentials are pre-programmed during the manufacturing or distribution process to provide the desired service profile support and\/or billing profile support for the desired initial ambient service. As described herein, this programming can be accomplished with dedicated apparatus at the manufacturer or distribution depot. Furthermore, the party responsible for defining the service (e.g., typically the central provider, OEM, VSP, distributor or master agent) can network into the service processor programming apparatus to control service processor and\/or credential programming for all or a subset or group of the devices or device types locally available. The service processor enabled device is programmed to seek the activation server system described above as soon as it is turned on, or as soon as some other event occurs like the user using the device or the user attempting to gain access. In some embodiments, the activation server is the access control server previously discussed or the access control server can act in concert with another server that performs the activation function. When the pre-programmed event is triggered, the device connects to the network and the gateways or routers re-direct the device to the activation server. As also described herein, the activation server can communicate with the service processor to verify the service processor security credentials, agents and configuration.","In some embodiments, if the activation server determines that the pre-programmed settings stored in the service processor need to be modified to provide the latest version of the desired service, or if the service processor agent software needs to be updated, then this can be accomplished prior to completing the activation process. Once the service processor configuration and settings are confirmed, the activation server causes the necessary network settings and billing database entries to be programmed by sending the service profile instructions to the network provisioning and activation apparatus and the service plan instructions to the billing system. Given that the service processor can perform some or much of the service activity control or control assistance, the service control options are generally larger than without the service processor, and there can be less configuration to perform for other networking equipment to complete the provisioning and activation process. The provisioning can be with permanent credentials or temporary credentials, and the service account that is set up can be permanent or temporary.","In some embodiments, pre-programming and pre-activation of devices with temporary credentials and a temporary service account are used to ship devices that are pre-activated. Given that the credentials are temporary and can be recycled when the permanent credentials are assigned, concerns about using up too many pre-assigned credentials are reduced. In embodiments in which a portion of credentials elements can be used for multiple devices, this concern is further reduced. If there is a concern about too many activated devices being assigned that are not actually active and generating service revenue, then the suspend\/resume process discussed herein can be employed. In some embodiments, the temporary credentials and\/or temporary account can be replaced with permanent credentials and\/or account assignments at any time as follows. When a pre-programmed event in the device is triggered, then the device initiates a program that seeks the aforementioned activation server or another server that has the capability of fulfilling the device request to exchange the temporary credentials for permanent credentials and\/or exchange the temporary account for a permanent account. The event that triggers the credential exchange can be the same or different than the event that triggers the service account exchange. The service account exchange can typically be triggered by the point in time that the user enters account information.","In some embodiments, the aforementioned ambient service is partly implemented with a combination of the techniques for pre-provisioning during manufacturing or distribution and at least partially implementing the service activity control (e.g., access control, routing policy, traffic control, usage limits, and\/or policy for usage limit overage) required for implementing ambient using the service policy provisioning capabilities in the data path gateways, routers or switches in the network. The gateways, router or switches are pre-programmed as discussed herein according to the ambient access profile for the device to implement the ambient policies for network access control, routing control, traffic control or service monitoring and reporting for bill by account. In some embodiments, the provisioning credential elements are not all pre-programmed before the device ships, but a subset of the credential elements are programmed using the activation server technique discussed herein. This over the air automated provisioning is combined with the activation server reading the device credentials to derive the service activity control settings for the gateways, routers or switches that will result in the desired ambient services activity controls.","In some embodiments, the aforementioned ambient service is implemented with a combination of the techniques for pre-activation during manufacturing or distribution and at least partially implementing the service activity control (e.g., access control, routing policy, traffic control, usage limits, and\/or policy for usage limit overage) required for implementing ambient using the service policy control capabilities in the data path gateways, routers or switches in the network. The gateways, router or switches are programmed to recognize the pre-activated device credentials as discussed herein according to the ambient access profile for the device to implement the ambient policies for network access control, routing control, traffic control or service monitoring and reporting for bill by account. In some embodiments, the device activation profile and\/or service account are not pre-programmed in the network and\/or the device before the device ships but the activation profile and\/or service account are programmed using the activation server technique discussed herein. This over the air automated provisioning is combined with the activation server reading the device credentials to derive the service profile activity control settings for the gateways, routers or switches that results in the desired ambient services activity controls.","In some embodiments, a VSP capability is enabled by providing a secure network connection to the service policy settings tools that define the device pre-provisioning settings, the device pre-activation service profile settings, the network equipment service activity control policy settings (e.g., access control, routing policy, traffic control, usage limits, and\/or policy for usage limit overage), and the network billing system database. By providing server tools that enable all these settings to be controlled (or perhaps only observed in the case of the billing system) by a secure workstation or secure website interface that networks into the equipment that programs the settings, and providing for a secure partitioning of the devices that can be controlled by a given secure workstation or secure website interface, a central provider can provide VSP services to multiple entities who all have different device and service plan combinations that they desire different flavors of ambient services for. These techniques can also be extended beyond ambient to any device\/service profile\/service plan combo the VSP desires to create. In some embodiments, the networking equipment is implemented to secure device service group domains in which the service policies for a group of devices can be controlled. In some embodiments, the pre-provisioning and pre-activation techniques are substituted with the over the air activation server techniques discussed herein, and a secure device group partition capability is provided in the activation server as well so that the activation server device group partition control capabilities can be added to the secure device group partition control capabilities of the network gateways, routers and\/or switches, the device programming tools and the billing system to form a VSP partition solution for over the air activation of various device\/service plan combinations. In some embodiments, the device groups are relatively small so that beta trials of arbitrarily large or small size can be designed and implemented by defining a service control group as described above, and after fine tuning and perfecting the beta trial settings the device group can be expanded to publish the automated provisioning and activation service settings to a larger user or device group for production services.","In some embodiments, device-based service activity control assistance (e.g., based on the various service processor embodiments described herein) is combined with simplified provisioning techniques described herein so that service processor enabled devices can be shipped with pre-provisioned credentials (temporary or permanent) or can obtain credentials in an automated manner that is convenient and efficient for the user or device owner. In some embodiments, the service processor embodiments in combination with the manufacturing and supply chain credentials and provisioning apparatus described elsewhere provide various approaches for provisioning pre-provisioned service processor enabled devices. In some embodiments, the service processor embodiments in combination with the activation server variants discussed above provide various approaches for over the air or over the network simplified post-sale provisioning for service processor enabled devices. For example, these embodiments can also be used for ambient services given that as discussed herein the service processor has capability to implement service profile policies for deep control of ambient service activity control.","In some embodiments, provisioning includes provisioning partial device credentials that include, for example, a secure certificate that is used to authorize full credential provisioning and\/or activation by performing a process for a later look-up\/validation of the full device credentials. For example, the look-up\/validation of the full device credentials can be performed by a gateway, router or similar network device that re-directs to a provisioning server and\/or activation server or other network components that either: (1) recognizes the partial credentials that serve as a reference to direct the device communication to a specific provisioning\/activation server determined from the partial credentials; or (2) does not recognize the partial credentials, and directs the device communication to a less specific provisioning\/activation server that is not necessarily associated with a reference to the partial credentials.","In some embodiments, if the partial device credentials (e.g., temporary or permanent credentials) are being used for provisioning, then the partial credentials are read (e.g., and\/or other credentials can be looked up based on the partial credentials as described above). The device is authorized if the proper credentials and\/or secure certificate is present. The device credential provisioning is then completed (e.g., using activation server commands or settings to a device-based software and\/or hardware element), and the credentials are, in some cases, also communicated to the various network equipment elements.","In some embodiments, if the partial device credentials are being used for activation, then partial or full device credential provisioning is performed, such as described above. A service account (e.g., temporary or permanent service account) is created or looked up based on the partial device credentials (e.g., a user account associated with the device through embedded partial or full credentials or a look up process, or based on a dynamically created\/assigned temporary account associated with the device through embedded partial or full credentials). An initial service profile and, in some cases, an initial service plan (e.g., service control policy settings including a billing profile) are determined from embedded information and\/or using a look up process (e.g., based on the device type and\/or partial or full device credentials). The device is then programmed to enable access with the service profile and plan, and, in some cases, the various network components\/elements are programmed to enable the service profile and plan, and, in some cases, proper entries in the billing system are made or confirmed, and the device credentials are, thus, activated for service.","In some embodiments, the above-described provisioning and\/or activation processes are performed with the provisioning server(s) and\/or activation server(s) in the background with reduced, minimal or no user input required, for example, after the device is sold to the user and the user turns on the device so that by the time the user attempts to access the service using the device, the provisioning and\/or activation process is already completed.","In some embodiments, device-based service activity control assistance (e.g., based on the service processor embodiments) is combined with simplified activation techniques described herein so that service processor enabled devices can be shipped with pre-activated accounts (temporary or permanent), or can obtain activated account status in an automated manner that is convenient and efficient for the user or device owner. In some embodiments, the service processor embodiments in combination with the manufacturing and supply chain activation and provisioning apparatus described elsewhere provide various approaches for pre-activated service processor enabled devices. In some embodiments, the service processor embodiments in combination with the activation server variants discussed above provide various approaches for over the air or over the network simplified post-sale account activation for service processor enabled devices. These embodiments can also be used for ambient services given that as discussed herein the service processor has capability to implement service profile policies for deep control of ambient service activity control.","As discussed herein, in some embodiments for activation, the network AAA (or other network function) either recognizes one or more aspects of a pre-activated device credentials and routes the pre-activated device communication to an activation server that is appropriate for that device (routing information either derived through look up of the credential aspect or by obtaining the required information directly from the credential itself), or the AAA (or other network function) does not recognize the credentials and routes the device communication to an activation server for unrecognized device credentials. In either case, in some embodiments, one or more of the credential aspects can then be used to perform a secondary determination of what provisioning and\/or activation sequence to perform in association with the device, or which activation server sequence the device should be directed to. For example, one or more device credential aspects can be read and used as a cross-reference to determine a routing for the device communication (or the information required for routing can be in the device credential information itself) so that the device can be routed to the appropriate activation server sequence.","In some embodiments, an activation server sequence can be determined at least in part by using a browser server or a portal (e.g., http server, https server, WAP server or another standard or custom protocol server for a browser, embedded or automated browser or a portal client in the device). In some embodiments, the browser server is an http or https server. The pre-activated device communication can be routed to the https server in a manner similar to that described above, and the server can read the information embedded in the https communication to determine the device credential information required to initiate the correct provisioning completion and\/or activation sequences. For example, the https header information, tokens, cookies or other secure information communicated over https from a secure embedded client on the device (or user) can either provide the activation server with the information required to perform the cross-reference to an appropriate provisioning and\/or activation sequence, or the https embedded information or the embedded client (or user) information can instruct the activation server on which services the device is to be provisioned and\/or activated on and any necessary device or user information (e.g., device owner and\/or billing information) can be exchanged, or the device might be provisioned and\/or activated first on a free ambient service with temporary or permanent credentials or account.","In some embodiments, the service processor can be combined with the pre-provisioning and pre-activation techniques described above to create an ambient service solution that will work on roaming networks in which the central provider or VSP has no control or minimal control over the network elements. For example, the device includes a service processor pre-programmed for ambient service activity control as discussed herein, and the device credentials and other settings are pre-provisioned and pre-activated for the central provider network, all of which is described in numerous embodiments disclosed herein. Provided that the service provider has a roaming agreement with other service providers, or provided that the device may gain access to the roaming network, when the device is roaming it will be capable of ambient connectivity with bill by account functionality and all the other features of ambient. Furthermore, as also discussed herein, the ambient service activity control policies can be different for different roaming networks to accommodate the varying network costs and performance. Also, for example, it would be permissible to sign up for initial services or additional upgrade services with the central provider while roaming on the roaming partner network. One of ordinary skill in the art will appreciate that this also allows for creating a VSP or MVNO for the purpose of creating a clearing house for central provider service activations according to geography or user choice. By using a global multi-mode modem module, and maintaining service agreements with a multitude of carriers, the MVNO or VSP can provide consistent ambient services across multiple carriers and multiple geographies while still maintaining a good degree of cost control. Using bill by account capabilities, it is also possible to have an activation agreement where a roaming service provider agrees to refund the cost of ambient roaming. From the ambient service platform, the VSP or MVNO can then provide service purchase options to the user based on the carrier networks available to the device, or the VSP or MVNO can broker the user off to any of the carriers by activating the device onto the carriers' main central provider service.","Accordingly, these embodiments provide flexible capabilities for activating a device or group of devices with a broad range of service profiles and service plans by simply programming the device with the proper credentials at some time during manufacturing or distribution, or simply programming a database associated with the network so that a portion of the device credentials can be used to look up the desired service profile and service plan. For example, various activation embodiments described herein are highly convenient for the end user and need not, in many cases, involve any human intervention.","The service processor , service controller , policy implementation and\/or profile implementation and various embodiments disclosed herein are applicable to conventional communication products as well as machine to machine applications. For example, if the machine to machine device includes a service processor  with an activated account, then the service profile settings can be optimized for machine communications to provide only the limited access required to support the particular machine to machine application. This allows for cost optimized access services and prevents the machine to machine device or access modem from being misappropriated and used for some other service access than that intended. For example, by programming the machine to machine communications device at time of manufacture or during distribution with credentials or partial credentials that provide for automated provisioning and activation as described herein, the device can be automatically provisioned and activated on the service network with a service account when deployed, thus eliminating the need for costly or time consuming human intervention. The various embodiments that make it simpler to design, manufacture, test and deploy devices may also be equally applied to machine-to-machine devices. These embodiments include the service processor  developers kit and the automated provisioning and activation management tools among others. Also, the service analysis and test tools and the virtual service provider embodiments can also be applied to machine-to-machine applications.","Verifiable Device-Assisted Services for Intermediate Networking Devices","It should be appreciated that the various service monitoring, notification, control and billing embodiments disclosed herein can also be applied to intermediate networking device applications.","In some embodiments, an intermediate networking device is a communications device in which the service processor  is configured at least in part to allow the intermediate networking device to act as a service intermediary or intermediate connection between the network and one or more end-point devices (e.g., communications devices). In addition, a service controller  or other suitable network functions can be employed to assist with the verifiable service usage monitoring, control and verification as disclosed in numerous embodiments described herein. In some embodiments, an intermediate networking device does this by implementing the service policies required for assisting service usage control of the intermediate networking device and connecting the network to provide services to one or more end-point devices that are connected to the intermediate networking device. In some embodiments, the intermediate networking device also monitors the service use activities of the intermediate networking device and\/or the end-point devices connected to the intermediate networking device. In some embodiments, the intermediate networking device and\/or end-point device service usage is verified to ensure that the service usage is within the expected ranges for the policies that are implemented. In some embodiments, the intermediate networking device connects with the network using one modem technology and connects with the end-point devices using one or more additional technologies. In some embodiments, an intermediate networking device connects the end-point devices to the network by passing, bridging, forwarding, routing, traffic shaping or otherwise allowing the end-point devices to communicate with the network. Example intermediate networking device embodiments include a Wi-Fi to WWAN (e.g., 2G, 3G, 4G or other wireless wide area networking access technology) bridge or router device, a Wi-Fi to DSL, cable or fiber gateway device, a WWAN to DSL or Cable femtocell device, a WWAN and Wi-Fi to DSL, Cable or fiber back-hauled femtocell device, a WWAN to WWAN router device, a WWAN to WLAN, WPAN or LAN bridge, router or gateway device, or a WWAN back up connection device for an enterprise router.","An intermediate networking device can also be provided in some embodiments by including a bridging, forwarding or routing function between two modems in a communications enabled device that connects to the network. For example, an intermediate networking device configuration can be a cell phone, smart phone, mobile internet device or any other mobile device that includes a WWAN modem and a Wi-Fi, WLAN, WPAN or LAN connection that can be used to connect to other end-point devices. For example, the mobile device WWAN modem can connect to the network, a service processor  can be included on the device processor to assist monitoring, controlling and billing for services between the WWAN network and end-point devices connected to a Wi-Fi modem. In addition, a service controller  or other suitable network functions can be employed to assist with verifiable service usage monitoring, control and verification as disclosed in numerous embodiments disclosed throughout herein. In some embodiments, the Wi-Fi modem can be configured in access point mode or in ad hoc mode to communicate with other end-point devices in the area covered by the mobile device WLAN modem. In this manner, a service processor  and a service controller  or other suitable network functions can be employed to enable the verifiable service usage monitoring, control and verification as disclosed in numerous embodiments described herein.","Another example embodiment is a notebook or sub-notebook computer with a WWAN modem and a Wi-Fi, Ethernet, FireWire, Bluetooth, near field or ZigBee modem in which the notebook processor has a service processor  running on the notebook processor and the service processor  is used to assist monitoring, control and billing for services communicated between the WWAN network and end-point devices connected to the notebook or sub-notebook WLAN, LAN or WPAN. Another example embodiment is a Wi-Fi hot spot with a service processor  capability. Another example embodiment is a WWAN back up modem in an access network router where the back up modem connection to the WWAN network is used when the main wired network connection goes down, and a router processor or a WWAN back up modem processor runs a service processor  to assist monitoring, controlling and billing for services between the WWAN network and the access router (e.g., the service provider may only wish to enable a connection when the main wired network is down to ensure that the WWAN modem is not used for everyday access). In this manner, a service processor  and a service controller  or other suitable network functions can be employed to enable the verifiable service usage monitoring, control and verification as disclosed in numerous embodiments described herein.","Another example embodiment is a two-way home gateway configured to perform various functions such as reading power consumption of the home and\/or components in the home, providing WLAN, WPAN or LAN connectivity for such components or to the power meters\/controllers attached to such components, providing a WWAN or WAN connection to a network that reads, records, monitors and\/or controls the home and\/or component power consumption, and possibly to provide other wide area network services for other devices in the home such as computers or entertainment electronics in a similar manner to the WWAN, DSL, cable and fiber gateway embodiments. The WLAN, WPAN connections can be made with one or more of Wi-Fi, ZigBee, Bluetooth, NFC or any other suitable wireless modem technology, and any desired wired LAN connections may be made with one or more of Ethernet, USB, FireWire, data over cable, data over power line or any other suitable wired modem technology. The WWAN connections can be made with one or more of 2G (e.g. CDMA 1\u00d7RT, GPRS), 3G (e.g. WCDMA UMTS\/HSPA\/non-MIMO HSPA+, CDMA EVDOrA\/B, 802.16d\/e WiMAX), 4G (e.g. LTE, MIMO HSPA+, MIMO 802.16m WiMAX) or any other suitable modem technologies and the wired WAN connections may be made with one or more of DSL, Cable, fiber or any other wired modem technology. A service processor  and a service controller  or other suitable network functions can be employed to enable the verifiable service usage monitoring, control and verification as disclosed in numerous embodiments disclosed throughout herein.","In some embodiments, an intermediate networking device can be used to connect one end-point device to a network and assist in implementing service policies, or an intermediate networking device can connect multiple end-point devices to one or more networks and assist in implementing service policies. In some embodiments, an intermediate networking device can be associated with one service profile, one service plan or one service account, or an intermediate networking device can be associated with multiple service profiles, multiple service plans or multiple service accounts. In some embodiments, end-point devices connected to an intermediate networking device can have service usage policies implemented in aggregate for all end-point devices, or service policies can be implemented differentially for different end-point devices.","In some embodiments, an intermediate networking device can have a network connection associated with a single account and manage QoS between end-point devices under one umbrella service profile or collection of profiles. In some embodiments, an intermediate networking device can treat all connected end-point devices equally from a service sharing or QoS perspective so that, for example, service usage is based on end-point device demand and\/or contention. In some embodiments, an intermediate networking device differentiates service QoS between different end-point devices based on end-point device service demand or service usage patterns, EDP device type or device group, end-point device user or user group, end-point device service account status or service plan status, or end-point device application type, and\/or traffic type or service type.","As discussed herein, the service processor  function assisting intermediate networking device implementation can be included on the intermediate networking device, can be included in part on the intermediate networking device and one or more end-point devices, or can be implemented mainly or entirely on one or more end-point devices.","In some embodiments, an intermediate networking device can be constructed in which end-point devices connect to the intermediate networking device and gain access services to a WWAN network through a WWAN\/Wi-Fi enabled intermediate networking device that is supplied with services associated with a single account and service profile. The intermediate networking device service processor  can assist in monitoring, control and billing for WWAN service usage for all end-point devices in the area covered by the intermediate networking device Wi-Fi link. In some embodiments, end-point devices receive service on first come first serve basis with no differentiation. In some embodiments, end-point devices receive fair distribution of services so that if one end-point device is using more significantly more service than the other end-point devices, or is demanding more service than the intermediate networking device service profile settings provide for a single end-point device (e.g., \u201cbandwidth hogging\u201d), then the high demand end-point device is throttled and the other end-point devices are not. In some embodiments, end-point devices receive hierarchical distribution of services based on one or more of service type, device type, user type, and\/or account status. In some embodiments, an intermediate networking device can provide for a large or unlimited number of end-point devices to connect to the network and simply control aggregate service usage parameters for the intermediate networking device WWAN connection. In some embodiments, the intermediate networking device limits the number of end-point devices that are allowed to connect to the WWAN network according the end-point device count limits programmed in the service processor  service profile settings in the intermediate networking device. In some embodiments, end-point device traffic can be identified by various end-point device credential aspects including, for example, by Wi-Fi ID, MAC ID, IP address, user ID, LAN tag, end-point device agent credentials, and\/or browser token or cookie. In some embodiments, the intermediate networking device service account can be billed for overall service usage and\/or by number of end-point device connections allowed or experienced. In some embodiments, as the intermediate networking device user or owner signs up for a higher end-point device connection count, one ore more aspects of the service usage policy implementation and\/or profile implementations in the service processor  profile settings can be increased.","The various verification techniques described herein can also be applied to the intermediate networking device and extended to multiple end-point devices. For example, network-based service usage measures for verification can be applied to the intermediate networking device just as if the intermediate networking device were an end-point device. For example, network-based service usage measures (e.g., IPDR information) can be used to perform network verification checks to ensure that intermediate networking device service usage is within acceptable ranges based on intermediate networking device policy settings as similarly described with respect to various device embodiments. In some embodiments, in the event intermediate networking device service usage is outside the policy limits set for the intermediate networking device service processor , a notification can be sent to the intermediate networking device main account owner. The main intermediate networking device account owner can also be required to acknowledge the notification. The notification can also be sent to one or more other users of the intermediate networking device connection, including possibly all users. Other actions that can be taken if the network-based intermediate networking device service usage measure does not match the policy limits set on the service processor  include notify the user, notify the user and require acknowledgement, bill the user for service overage, suspend the end-point device, quarantine the end-point device, SPAN the end-point device, and\/or alert network manager or alert an automated network troubleshooting function. In some embodiments, a device-based usage measure can be verified against a network-based service usage measure. It will now be apparent that the various service processor  verification embodiments, service controller  verification embodiments, network verification embodiments, authentication embodiments, and tamper prevention or detection embodiments, such as those shown in and described with respect to , can be applied to intermediate networking device applications and embodiments.","In some embodiments, it is desirable to match up individual end-point device or user intermediate networking device service usage with other service usage measures. For example, the individual end-point device service usage measures logged or reported from the end-point devices and\/or the intermediate networking device can be aggregated to form a total intermediate networking device usage measure that is compared to an aggregate intermediate networking device usage measure logged or reported in the network. In some embodiments, if these measures do not match, then an error condition results and an action is taken. In some embodiments, the aggregate intermediate networking device service usage measure is compared to the aggregate network-based service usage measure and as long as these two measures are within an acceptable tolerance, then the intermediate networking device service usage measures are trusted and can be used for deeper intermediate networking device and end-point device usage measures for service control and\/or billing than may be possible in the network. In such embodiments, the individual end-point device service usage measures gained from the intermediate networking device or end-point device can be used to verify end-point device service usage versus service policy allowances. In some embodiments, end-point device service usage measures are compared with intermediate networking device measures for the same end-point devices.","In some embodiments, the IPDR records for one or more networks can include individual end-point device service usage information. This is the case, for example, when the IPDRs include information broken down by end-point device credential, such as IP address or other end-point device credential. In such cases, intermediate networking device embodiments can be employed in which the individual end-point device service usage information measured in the network can be compared with the service usage policy allowances or limits for the end-point device. Also, in some embodiments, the individual end-point device service usage measures from an end-point device service usage monitor and\/or an intermediate networking device service usage monitor can be compared with the network-based service usage information to verify an end-point device and\/or an intermediate networking device service usage monitor is operating properly.","As similarly described with respect to end-point device embodiments with no intermediate networking device between the end-point device and the network, in some intermediate networking device embodiments, service usage and service usage monitor reports can be periodically verified by performing a SPAN function on the traffic for an intermediate networking device. The SPAN traffic can be analyzed in a real-time manner or in a non-real-time manner in the network and the results can be compared with the intermediate networking device or end-point device service policies or service usage measures.","The synchronized device notification and acknowledgement embodiments can also be employed in the case in which one service account is applied to the intermediate networking device. The service usage counters in the intermediate networking device can be synchronized or updated with the network-based measures and the differences between the two may be minimized. The service usage notification can be sent to one or more of the end-point devices connected to the intermediate networking device. For example, the notification can be sent to the intermediate networking device manager or service owner, all end-point devices or the most active end-point devices.","Similarly, user preference feedback can be collected from one or more of the service users connected to the intermediate networking device. In some embodiments, user preferences or user service selections or service settings are collected from one user or a subset of end-point devices used by the service subscriber. In some embodiments, more than one service user can provide preference information or service settings even if there is only one user account. In some embodiments, there are multiple service subscribers each providing preferences. In some embodiments, as similarly described with respect to various device embodiments, user preferences can be used set service control policies that provide the user with their selected balance of cost and service capability in a manner that meets network neutrality requirements. Similarly, in some embodiments, the service monitoring and customer resource management information collected on the intermediate networking device or end-point devices can be filtered according to user privacy preferences to maintain the level of user privacy selected by the user.","Adaptive intermediate networking device policy implementation can also be performed in the intermediate networking device service processor  embodiments, as similarly described with respect to various device embodiments. In some embodiments, the service policy implementation for the intermediate networking device can be adapted by the service processor  agents (e.g., policy control agent  working to control the settings in policy implementation agent , and\/or another service processor agent or function) to achieve a higher level service usage goal. In some embodiments, the usage goals or adaptation can be based on aggregate end-point device usage for the intermediate networking device network services, and in some embodiments, the higher level usage goals or adaptation can apply to one or more individual end-point devices.","In some embodiments, even though there is one intermediate networking device account, there can be multiple options for multi-end-point device or multi-user operation in which the number of end-point devices, number of users or service capabilities for some of the end-point devices or users are selectable. These parameters are accommodated by an intermediate networking device service profile that includes the service capabilities that are to be delivered to a multitude of end-point devices or users. In some cases, some end-point devices or users have a different profile within the intermediate networking device service processor  with differentiated capabilities as compared to the intermediate networking device service processor  profile for other end-point devices or users. This is the case for some of the examples provided herein. These multi-end-point device or multi-user service profiles in the intermediate networking device service processor  can share services equally or can allow more capable access services to some end-point devices or users than others. In some embodiments, a service profile implemented by the intermediate networking device service processor  for one end-point device or user is different than that in the service profile implemented by the service processor  for another end-point device or user (e.g., providing differentiated service profile implementations by end-point devices and\/or users). End-point devices can be uniquely identified for purposes involving implementation of different service profiles in the intermediate networking device service processor  agents (e.g., depending on the embodiment, service monitor agent , policy implementation agent , policy control agent , application interface agent  and\/or other service processor agents or functions) based on a number of parameters, such as IP address, local area network address (e.g., Wi-Fi address), MAC address end-point device ID, user ID, and\/or end-point device application layer tag. This allows for independent service usage monitoring and control for different end-point devices or users.","In some embodiments, an intermediate networking device also bridges services to end-point devices or users that have individually managed service profiles, service plans or service accounts. As discussed herein, individual end-point device service policy implementation and\/or service profile implementation can be accomplished by classifying end-point device service usage according to an end-point device identifier so that service monitoring, control assistance and reporting may be differentiated between one or more end-point devices. These end-point device identifiers can then be associated with a different service plan or account in the service processor  and\/or billing system . The end-point device or user specific service usage monitoring, reporting, notification and control assistance can be accomplished by running one or more profiles for each end-point device or each user.","It will now be apparent that billing can also be implemented with a single account encompassing service usage for all users or end-point devices connected to an intermediate networking device, or for individual users, end-point devices, user groups or end-point device groups connected to an intermediate networking device. As similarly described with respect to the service profile, this is accomplished by associating service usage events and associated billing events with a end-point device identifier, user identifier, end-point device group identifier, and\/or user group identifier.","In some embodiments, end-point devices or users connect to more than one intermediate networking device with the same service account, service plan or service profile. In some embodiments, the intermediate networking device requires an authentication sequence for the end-point device or user before allowing connection to the network through the intermediate networking device. This authentication sequence can involve the end-point device communicating an active account or admission credential with the intermediate networking device. The intermediate networking device can compare the credential with a local database or may query a database in the network to admit the end-point device to the intermediate networking device network connection. In either case, provided the user credential or network authorization process is passed, the service processor  service profile settings for the end-point device are applied and service is then established as discussed herein. In these cases, the verification can be accomplished as described herein. In some embodiments, even if the end-point device does not have a service processor , provided that the intermediate networking device service policy implementations and\/or service profile implementations are verified as described herein, then the intermediate networking device will accurately assist in control and reporting of service usage for the different end-point devices or users, and the appropriate service policy controls and\/or billing can be maintained.","In some embodiments, when the end-point device attempts connection to the intermediate networking device, if the user or end-point device does not already have an active account or logon credential that the intermediate networking device recognizes, then the intermediate networking device can offer the end-point device or user a service sign up experience. This experience can be implemented in a number of ways, including a website, WAP site, portal, download of agent software, and other methods. For example, an automated recognition of new devices can redirect unauthorized end-point devices to browse into a website, WAP site, or portal site located on the intermediate networking device or in the network. If the site is located on the intermediate networking device, it can be cached and refreshed at a time of day when the network is not overly busy. Once on the site, the user or end-point device selects the plan choice they desire, inputs account information and, in some embodiments, downloads device agent software to aid in network service policy implementation and\/or profile implementation with the intermediate networking device. Once the user signs up, the information is logged into the network data base, the service account is established and the intermediate networking device service profile for that user or end-point device is activated and the user can begin using the service.","In some embodiments, a website, WAP site, or portal site located in the intermediate networking device can be used to provide the end-point device user with a service usage monitor interface and a service purchase interface for cases in which the end-point device does not posses any special software to allow it to display a more specialized service usage monitor function for information received from the intermediate networking device or network service usage counters. The service usage monitor for the intermediate networking device can be synchronized, as similarly described with respect to various device embodiments. In some embodiments, the service usage notification system can also display cost data from a usage to cost look-up function. In some embodiments, the service usage notification system can display projected service usage or projected cost, as similarly described with respect to various device embodiments. The service usage monitor to drive these service notification embodiments can be located on one or more of the end-point device, the intermediate networking device or the network.","In some embodiments, if multiple accounts are serviced by one or more intermediate networking devices, verification can be performed on the service controls for the end-point device or user service usage. As will now be apparent, just as with the intermediate networking device, the end-point device or user service usage comparison with usage policy settings can be verified in the ways described herein. If the usage is found to be out of policy, then any of the out of policy actions described herein can be performed, including, for example, notify the end user, notify and require acknowledgement, bill for overage, suspend, quarantine, SPAN, and\/or flag to network manager or network error handling function. For example, the verification methods shown in and described with respect to  can be applied for the embodiments where intermediate networking devices have multiple account, multiple service plan, multiple service profile, multiple end-point device, and\/or multiple user capabilities.","It will be apparent that the various embodiments described herein for automated provisioning and activation also can similarly be applied to the intermediate networking device embodiments. It will also be apparent that the various virtual service provider embodiments can similarly be applied to the intermediate networking device embodiments.","Ambient services can be employed on the intermediate networking device and the ambient services can thus be provided to the end-point devices. It will be apparent that the ambient service profile embodiments disclosed herein can similarly be applied to the intermediate networking device, and then the intermediate networking device can supply those ambient services to end-point devices connected to the intermediate networking device. It will also be apparent that the intermediate networking device can provide an ambient service profile as described herein to end-point devices or users that have not yet signed up for service, while providing other paid for service profiles to end-point devices or users that have signed up for service.","Bill by account embodiments can similarly be applied to the intermediate networking device embodiments. For example, bill by account can be used in embodiments in which all end-point devices or users are connected to the intermediate networking device under one account, or to embodiments in which some end-point devices or users are accounted for separately with different service accounts, service plans or service profiles. In either case, it will be apparent that using one or more of the end-point device or user identification credential aspects discussed herein can be used in a bill by account profile to account for any end-point device or service activity. In such embodiments, billing event reports for those activities that include the end-point device or user identifiers can also be provided for billing mediation and reconciliation down to the individual end-point device or user level. For example, this allows for very deep service monitoring and billing capabilities with intermediate networking devices.","The intermediate networking device embodiments described above also have uses in machine-to-machine applications. It will be apparent that if the end-point device includes the correct credentials to gain access to an existing account, or to allow an automated provisioning and activation account to be established, then the end-point device can be connected to the network through the intermediate networking device without human intervention. Furthermore, the service profile that is established with the end-point device for machine to machine communications can be set up to provide the access required to support the machine to machine application allowing for low cost access services and preventing the end-point device from being misused for some service other than that intended. For example, the verification techniques and embodiments disclosed herein can similarly be applied to such machine-to-machine applications.","It will be apparent that the identifiers discussed above for bill by account mediation with accounting down to the individual end-point device or user level can be combined with a billing mediation server in the network that accepts intermediate networking device billing events with end-point device identification or user identification indexed billing, performs the necessary bill by account mediation functions, formats the billing events into the format used by the billing system, and transmits the mediated billing information to the billing system .","In some embodiments, the intermediate networking device service processor  functionality can be split. The division ranges from some or all of the service processor  on the device to some or all of the service processor  on the intermediate networking device.","In some embodiments, all of the service processor  is on the intermediate networking device. The end-point device does not participate in service processor  functions and has no service processor  interface software. In some embodiments, the end-point device has small subset of service processor  capabilities, including, for example, a service notification UI or a logon client with credentials. In some embodiments, service monitoring is implemented on the end-point device or on both the end-point device and in the intermediate networking device. In some embodiments, the end-point device has additional service processor  capabilities including, for example, application layer tagging that associates application layer activity with service processor  service monitoring or service policy implementation and\/or service profile implementation information. This can be accomplished by a range of techniques, for example, transmitting the application tagging information disclosed elsewhere to the intermediate networking device service processor  so that the policy implementation may be accomplished with knowledge of the application layer information. Another example involves assigning IP addresses in the intermediate networking device networking stack to the end-point devices so that different types of end-point device traffic can be routed into service processor  traffic shaping queues, each queue having a policy profile implementation engine, and application layer tagging information or similar traffic identifying information is used to determine which policy implementation engine the traffic should be routed to in order to accomplish the desired traffic shaping for the traffic type, application type, service type, and\/or content type. In some embodiments, the traffic control policy is implemented on the end-point device either with an application layer traffic controller, or by implementing more of the service processor  functionality, as similarly described with respect to various device embodiments. In the end-point device service functionality example, most or all of the service processor  functionality is implemented on the end-point device and the intermediate networking device functionality can be reduced to a bridging, forwarding or routing function between the end-point devices and the network that performs little or no service control, monitoring and\/or billing functions. For example, the service usage monitoring agents can also be provided on the end-point device to aid in verification.","In embodiments in which the end-point device requires agent software, the software can be loaded at time of manufacture or during distribution, loaded later, and\/or made available for download through the intermediate networking device. In the case in which the end-point device agent SW is downloaded through the end-point device, there can be locally cached copies of the SW for one or more OS variants stored in a cache on the intermediate networking device, with the cache being updated over the network at convenient or conducive times, or the software can be downloaded live over the network when it is needed by the end-point device. Logging the service usage to download this software is another example in which bill by account functionality can be used to track network traffic that may not be desirable to bill to a end-point device owner or user, and bill by account functionality can be used to log and mediate such usage out of the user or end-point device owner's bill.","Any end-point device agent software required to connect to the intermediate networking device can also be implemented as a service processor  developer's kit as described herein and distributed to aid manufacturers, service provider and virtual service providers in bringing new devices onto networks with intermediate networking device capability.","In the case of a femtocell intermediate networking device, in some embodiments, it is desirable to facilitate handover from the WWAN network to the femtocell. In some embodiments, this provided in the intermediate networking device service processor  in a variety of ways. In some embodiments, the voice and data traffic is routed through a VPN tunnel controlled by the service processor  and connected to a network element, such as the transport gateway or another specified traffic concentration destination for the femtocell. In some embodiments, the voice traffic, the data traffic or both can be routed in secure or open Internet channels to different destinations, or the data can be routed directly to the Internet destination specified by the packets. In some embodiments, the femtocell intermediate networking device controls the femtocell frequencies or local frequency channel strength surveys over the intermediate networking device control channel. In some embodiments, the service processor  has a VPN connection to a network base station hand off controller to assist in handoff to and from the WWAN network and\/or has the capability to instruct the end-point device and the base station handoff controller. In some embodiment, whenever an end-point device authenticated for femtocell access is within range of the femtocell, the service provider desires to set up a service processor  profile to get the end-point device to connect to the femtocell even if it has a strong signal with one or more WWAN base stations so that the WWAN traffic may be offloaded. In some embodiments, the service processor  can form a secure control plane link with network AAA functions to manage authorization and admission of end-point devices the femtocell has not yet admitted, or the network policies can require re-authorization every time a end-point device attempts access. Once an end-point device is connected to the femtocell intermediate networking device, the verifiable traffic monitoring, control and billing functions described herein can be applied to various application embodiments. For example, the intermediate networking device service policy verification techniques disclosed herein, as similarly described with respect to various device embodiments, can similarly be applied to the femtocell intermediate networking device embodiments.","In some embodiments, the service provider desires to keep the number of end-point devices or users that access an intermediate networking device below a certain count specified in the service processor  profile. In some embodiments, this is accomplished by controlling the number of IP addresses allowed onto the intermediate networking device local area side connection. In some embodiments, this is facilitated by observing the end-point device identification parameters available in the end-point device traffic. In some embodiments, this is facilitated by observing the traffic patterns to determine the likely number of devices connecting to the network. For example, traffic demand patterns can be examined to determine how many users are likely to be demanding access at one time.","Security Techniques","In some embodiments, security techniques for device-assisted services are provided. In some embodiments, secure service measurement and\/or control execution partition techniques for device-assisted services are provided. In some embodiments, a secure execution environment for device-assisted services is provided. In some embodiments, a secure stack for device-assisted services is provided. In some embodiments, a secure memory for device-assisted services is provided. In some embodiments, a secure modem for device-assisted services is provided (e.g., providing a secure communication link between the modem\/modem driver and a service processor and\/or agent on the device, such as a communications device or an intermediate networking device). In some embodiments, one or more secure monitoring points for device-assisted services are provided. In some embodiments, one or more secure monitoring points with verification for device-assisted services are provided (e.g., a secured monitoring point can be provided in a modem, which communicates securely to a secured execution environment in a CPU\/processor, which can then verify such service usage measures). In some embodiments, a secure bus for device-assisted services is provided. In some embodiments, a secure execution environment in the CPU\/processor for device-assisted services is provided. In some embodiments, secure access to a secure execution environment(s) for device-assisted services is provided (e.g., securing communication from a bottom of the stack, such as modem drivers, which require credentials to access the bus as controlled by a service processor or secure agent on the device, and in which the traffic on the bus is encrypted). In some embodiments, various secure execution environments for device-assisted services are provided using various hardware partition techniques (e.g., secure memory, secure modems, secure memory partition(s) in the CPU\/processor), as described herein.",{"@attributes":{"id":"p-0710","num":"0709"},"figref":["FIG. 74","FIG. 74","FIG. 74"],"b":["2501","2501","109","109","102","112","114","324"]},"As shown,  illustrates an application execution partition  and a kernel execution partition , which are shown as separate partitions within the device execution environments. For example, this separation is based on the manner in which \u201ckernel programs\u201d (e.g., drivers and network stack, etc.) are commonly supported as compared to \u201capplication programs\u201d (e.g., browsers, word processors, user interfaces, etc.) within the context of several different popular operating systems (OS) (e.g., Microsoft Windows, UNIX, Linux, Apple Mac OS, certain mobile device OSs, certain embedded device OSs, etc.). In some embodiments, this functional separation is not required, and, in some embodiments, other functional separations are supported.","As shown in , protected device-assisted service agents, such as the protected DAS partition device-assisted service agents , execute in the protected DAS partition  while unprotected device-assisted service agents and\/or OS networking stack elements and applications (e.g., applications A through C) execute outside of the secure device-assisted service execution partition , such as the application partition device-assisted service agents  and the OS networking stack and\/or kernel partition device-assisted service agents . For example, the protected DAS partition  can make it more difficult for a hacker, malware or system errors to compromise, attack or modify the device-assisted service measurements, service policy implementation or service usage control operations on the device (e.g., communications device). In some embodiments, the protected DAS partition  need not support open access to all programs and OS elements so that it can be easier to protect. Also, as shown, a bus driver  in the application execution partition  provides for communication with a modem bus , which is in communication with a bus driver  in the modem execution partition . The protected DAS partition also includes a host service control link , which facilitates communication with a host secure channel  as shown.","In some embodiments, the protected DAS partition  is a protected execution partition on the main device that is supported by certain configurations in the host (e.g., a secure virtual execution environment or a separate hardware security function). For example, this protected execution partition can be used to provide added service measurement integrity and\/or service control integrity for a device-assisted service enabled device. In some embodiments, as described herein, the operating system (OS) also performs a role in establishing the protected execution partition for secure operation of device-assisted services, and, in some embodiments, this role is performed by native software or firmware operating on secure hardware elements.","In some embodiments, the DAS agents responsible for maintaining service control integrity execute in the protected DAS partition . For example, the protected DAS partition device-assisted service agents  can include one or more of the following: one or more service usage measurement functions; some or all of the device networking stack functions that are monitored and\/or controlled by the device-assisted services system; device drivers that interface to an OS networking stack to observe or manipulate stack traffic; access control integrity functions; service policy control functions; service UI functions; application identification functions, and\/or functions to classify service usage activities by combinations of application, address\/URL and\/or traffic type; modem bus driver functions; and\/or modem data encryption functions to prevent other unauthorized programs from bypassing the device-assisted service measurements and\/or controls by directly accessing the modem around the stack. In some embodiments, the system designer or a given set of design criteria determine which of the various described device-assisted agent functions should be executed in protected DAS partition  to strengthen the service control integrity for the system.","In some embodiments, the device operating system provides for the protected DAS partition  in addition to conventional security features available in the operating system. In some embodiments, the protected DAS partition  provides an execution partition with increased program execution protection in which, for example, service measurement and\/or service control programs (agents) can execute in a mode that provides for higher access control integrity (e.g., proper service usage reporting and\/or service measurement and\/or service control system operation with increased protection from attacks, errors, malware, etc.). In some embodiments, a hardware assisted secure execution partition provides for increased program execution protection for device-assisted service agent functions.","In some embodiments, a service control link (e.g., host service control link  via host secure channel  to network service control link ) is used for communication between the device-assisted service agents and a service controller . In some embodiments, the service control link is a secure link (e.g., an encrypted communications link). In some embodiments, an encrypted secure control link can be implemented over the higher layers of the network stack (e.g., TCP, HTTP, TLS, etc.), and, in some embodiments, the encrypted link can be implemented over lower layers in the network stack, such as the IP layer or the access network layers (e.g., the WWAN device management channels or signaling layers). In some embodiments, service control link security is provided at least in part by encrypting link traffic between the device and the service controller . In some embodiments, service control link security is provided at least in part by running the service control link device side program agents in the protected DAS partition . In some embodiments, service control link security is achieved at least in part by restricting access to the service control link to certain device-assisted service agents that are allowed to communicate with the service controller . In some embodiments, the agents that are allowed to communicate with the service control link perform such communications using encrypted communications. In some embodiments, the encrypted communications is accomplished with a secure inter-agent communication bus on the device. In some embodiments, the only mechanism for modifying the configuration of the operation, execution code, execution instructions and\/or settings of certain device-assisted service processor agents executing in the protected DAS partition  is through the service control link. In some embodiments, the only mechanism for modifying any program elements executing inside the protected DAS partition  is through the service control link so that only the service controller  may modify the operation or service policy settings for the agents located in the service measurement and\/or service control execution partition.","Various embodiments can be used to connect to multiple access networks through multiple modems, with each modem potentially being associated with a different set of DAS service policies corresponding to the different types of access networks supported. In some embodiments, such as for 3G\/4G modems, WWAN\/WLAN modems, and various other multiple modem embodiments, the multiple modems can also be provided on the same multi-mode modem subsystem rather than on different modem subsystems.","In some embodiments, the various techniques and embodiments described herein can be readily applied to intermediate networking devices as will now be apparent to one of ordinary skill in the art. For example, an intermediate networking device can include some or all of the DAS agents for managing, controlling, and\/or measuring service usage for one or more devices in communication with a wireless network via the intermediate networking device, in which the DAS agents can be executed in secure execution environments or secure execution partitions using the various techniques described herein. In some embodiments, intermediate networking devices include, for example, WWAN\/WLAN bridges, routers and gateways, cell phones with WWAN\/WLAN or WWAN\/Bluetooth, WWAN\/LAN or WWAN\/WPAN capabilities, femtocells, back up cards for wired access routers, and other forms\/types of intermediate networking devices.","In some embodiments, systems and methods are provided for securing device-assisted services (DAS) systems and for detecting and mitigating fraud in such systems. In some embodiments, an end-user device comprises one or more modems to allow communications over a wireless access network, memory configured to store an application-specific network access policy to be applied when a particular application program attempts to communicate or successfully communicates over the wireless access network, and one or more device agents configured to detect attempted or successful activity by the particular application program and to apply the application-specific network access policy to the communication activity.","In some embodiments, the one or more device agents are configured to detect attempted or successful activity by the particular application program by flow-tagging a data flow associated with the particular application program, associating the flow tag with the application identifier, and applying the application-specific network access policy to the flow-tagged data flow.","In some embodiments, an end-user device comprises one or more modems to allow communications over a wireless access network, memory configured to store an application-specific network access policy to be applied when a particular application program attempts to communicate or successfully communicates over the wireless access network, and one or more device agents configured to use an application programming interface (API) to arrange an application setting to assist in implementing the application-specific network access policy.","In some embodiments, the application-specific network access policy comprises a control policy configured to assist in controlling transmissions or receptions over the wireless access network that are associated with the application program. In some embodiments, the application-specific network access policy comprises a charging policy configured to assist in accounting for transmissions or receptions over the wireless access network that are associated with the application program. In some embodiments, the end-user device has a user interface, and the application-specific network access policy comprises a notification policy configured to assist in presenting, through the user interface, a notification message, such as, for example: an offer or an advertisement, information about a network type (e.g., a home network, a roaming network, a cellular network, a wireless wide-area network (WWAN), a wireless local area network (WLAN), a wireless personal area network (WPAN), a 2G network, a 3G network, a 4G network, a WiMAX network, an Ethernet network, a DSL network, a DOCSIS network, a cable network, a Wi-Fi network, etc.), an indication of an amount or cost of data usage associated with the application program, an indication of a projected amount or a projected cost of data usage associated with the application program (e.g., a projection based on a past or historical data usage associated with the application program), an indication of an amount or cost of data usage associated with the application program during a particular period of time (possibly user-configured or user-selected), an indication that an amount or cost of data usage associated with the application satisfies a condition relative to a limit setting (e.g., exceeds a threshold, meets a threshold, is less than a threshold, etc.), an indication of an amount or cost of background data usage by the application program, etc. In some embodiments, the policy is associated with an application identifier (e.g., a credential associated with the application, possibly stored on the end-user device). In some embodiments, the application program is secured by an application credential (which may be the application identifier). In some embodiments, the one or more device agents are further configured to prevent modifications, updates, or replacements of the application program unless software purporting to be a modification, update, or replacement of the application program is associated with a credential that is consistent with (e.g., matches) the application credential.","The elements of service controller  described herein can be implemented in various advantageous architectural embodiments to assist in securing device-assisted services (DAS).  illustrates an example embodiment of a secure service controller architecture for DAS systems.  shows several of the functions that may be accomplished by a service controller (e.g., service controller ) that communicates with one or more end-user devices over access network . In particular,  shows four service controller functions: a portal function, a file transfer function, a gateway function, and a credentialing function.","In the embodiment of , the portal function is accomplished by portal user , optional load balancer A, optional portal proxy server , portal application server , and database cluster . In some embodiments, the portal function allows a user (e.g., carrier personnel, mobile virtual network operator (MVNO) personnel, virtual service provider (VSP) personnel, etc.) to enter information to configure or manage access network services or end-user devices, such as by using a service design center or an application developer service design center UI. In some embodiments, the portal function allows a portal user to collect information about provisioned end-user devices (e.g., reports containing information about an end-user device's service plan activity, reports containing information about an end-user device's access network usage, etc.).","In some embodiments, the file transfer function allows secure file transfers between a carrier (e.g., a service provider, an MVNO, a VSP, etc.) and the service controller. As illustrated in , carrier file  is placed on file server  through optional load balancer B. EAI server  retrieves carrier file . In some embodiments, EAI server  processes carrier file . EAI server  configures output file . In some embodiments, EAI server  configures output file  using information in database cluster . EAI server  places output file  on file server .",{"@attributes":{"id":"p-0726","num":"0725"},"figref":"FIG. 112","b":["210","217","215","124","224","218","215","210","217"]},"Carrier file  can contain various information, such as, for example: a measure of an access network usage by end-user device ; information to provision an access network service for one or more end-user devices, such as end-user device ; a list of end-user devices or subscribers authorized to use a particular service.","In some embodiments, carrier file  comprises a subscriber list. A subscriber list includes one or more subscriber identifiers, where a subscriber identifier is associated with a particular end user. As will be appreciated by a person having ordinary skill in the art, a subscriber identifier may also be associated with a particular end-user device or with a group of end-user devices, or the subscriber identifier may not be associated with any particular end-user device. Examples of subscriber identifiers are: an IMSI, an MSID, a MDN, an MSISDN, an MEID, an ESN, an IPv4\/6 MAC or IP address, a key, a certificate, a globally unique identifier (GUID), a unique identifier (UID).","In some embodiments, carrier file  includes one or more flow data records (FDRs). A flow data record contains detailed information related to one or more network communications (e.g., source IP, source port, destination IP, destination port, bytes transmitted, bytes received, time flow started, time flow ended, traffic protocol (e.g., TCP\/UDP), etc.).","In some embodiments, carrier file  includes a plan catalog that includes information about service plans for the access network that are available to one or more end-user devices. Examples of the information that may be included in a plan catalog are: a list of service plans and their characteristics (e.g., notification, charging, and control policies associated with each plan, access network activities qualifying for each plan, etc.); the priorities of the service plans, where the priorities identify the order in which the classification function on the end-user device should evaluate the filters associated with the available service plans; how the service plans are displayed on end-user devices (e.g., the order in which they are displayed, etc.); whether access network costs associated with a plan are paid by a sponsor entity or by a subscriber; whether a plan is an activation plan (e.g., a service plan that governs a device when a subscriber has not selected a plan); promotional messages; upsell offers; subscriber groups; notifications for which no service plan applies.","In some embodiments, carrier file  includes a list of end-user devices or subscribers authorized to use a particular service (e.g., a tethering service for sharing an access network connection with other devices through other input\/output ports on the end-user device).","In some embodiments, carrier file  includes one or more classification rules. A classification rule is any rule that distinguishes between any characteristics of service plans, subscribers, end-user devices, network destinations, or network types. For example, a classification rule may distinguish between sponsor-paid and subscriber-paid service plans, between applications or groups of applications, between groups of subscribers, between end-user devices using valid profiles and those using fraudulent profiles, between authorized network destinations and unauthorized destinations, between network access types (e.g., home, roaming, 2G, 3G, Wi-Fi, etc.), between time-of-day rules, etc.","It may be advantageous in some embodiments to validate particular agents on the end-user device that assist in the provisioning and\/or management of device-assisted services. In some embodiments, end-user device  includes one or more verification agents that may be used to validate one or more device-assisted services agents. There are many possible device-assisted agents that may be verified, such as, for example: a usage reporting agent (e.g., an agent that reports aggregate or finer (e.g., per-service or classification) measures of access network usage by the end-user device), a usage counting agent (e.g., an agent that reports counts of access network usage by the end-user device), a policy enforcement agent, a notification agent, a policy decision agent, a network state agent, a kernel communication agent, a user interface agent, a persistence agent (e.g., an agent that reads or writes from a data store, such as a local memory), a plan catalog agent, a service controller communication agent, a tethering detection agent, a time-of-day agent (e.g., an agent that manages a policy based on time of day), a kernel agent, or an analytics agent.","Fraudulent or potentially fraudulent activity by end-user device  can be detected by examining trusted measures or records of data usage by end-user device . In some embodiments, a network element examines the content of usage reports from a trusted source to determine whether end-user device  is operating within the policies that should be in place. The usage reports may indicate a variety of information, including, for example, one or more of: a \u201cbulk\u201d measure of aggregate data usage, destinations accessed, network state (e.g., time of day, network busy state, network congestion state, etc.), type of network (e.g., 2G, 3G, 4G, WiFi, home, roaming, etc.), etc. In some embodiments, the trusted records contain information about end-user device 's data use associated with a class of service activities, where the class is a particular application, a group of applications, a particular network destination, a group of network destinations, a network type, etc. For example, the trusted records may contain one or more of: record start time, record end time, information identifying the class, the amount of data use associated with the class, etc.","In some embodiments, service controller  examines the content of device-based usage reports (e.g., reports generated by service processor  and sent to service controller ) to verify that service processor  is properly classifying services. In some embodiments, service controller  determines whether applications being used or destinations being accessed by end-user device  are authorized under a service plan associated with end-user device . In some embodiments, service controller  examines the content of device-based usage reports to determine whether end-user device  imposed a service control that was supposed to be in place (e.g., a cap on usage; a speed of usage (such as a maximum rate); an amount of usage of background or foreground data; state modifiers such as time-of-day, network busy state, network type (e.g., home, roaming, Wi-Fi, cellular, etc.); quality-of-service limits, etc.).","In some embodiments, service controller  compares a trusted (e.g., network-based, secure DDR, or third-party) measure of the device's service usage to a device-based (e.g., service-processor-based) measure of the device's service usage. In some embodiments, one or both of the trusted service usage measures and the device-based service usage measures include a classification of service usage based on application. In some embodiments, one or both of the service usage measures include a classification of service usage based on network destination or network service identifier. In some embodiments, one or both of the service usage measures include a classification of service usage based on network type (e.g., roaming, home, cellular, WiFi, etc.). In some embodiments, one or both of the service usage measures include a classification of service usage based on time of day. In some embodiments, one or both of the service usage measures include a classification of service usage based on QoS class. In some embodiments, one or both of the service usage measures include a classification of service usage based on geography. In some embodiments, one or both of the service usage measures include a classification of service usage based on a roaming network.","In some embodiments, the second usage records comprise information from flow data record. In some embodiments, the flow data record (FDR) reports a detailed level of service usage classification that indicates service usage broken down by network source or destination (e.g., domain, URL, IP address, etc.) and possibly one or more ports and protocols. In some embodiments, the FDR reports a detailed level of service usage classification that indicates usage broken down by device user application or OS application. In some embodiments, the FDR reports a detailed level of service usage classification that indicates service usage broken down by time of day, network congestion state or service QoS level. In some embodiments, the FDR reports a detailed level of service usage broken down by network type (e.g., 2G, 3G, 4G, WiFi, home, roaming, etc.). In some embodiments, the FDR reports a detailed level of service usage broken down by home or roaming network.","User Notification","According to various embodiments, systems and methods are provided for storing on an end user device one or more notification actions corresponding to one or more notification requests, the end user device being associated with a service plan having a limit on usage of one or more network services; performing a device action that reflects a past or intended use of the one or more network services; receiving by the end user device one of the one or more notification requests from a network element in response to the device action; performing by the end user device one of the one or more notification actions in response to the one of the one or more notification requests, the one of the one or more notification actions causing the end user device to retrieve at least a portion of a notification message associated with a status of the use, the at least a portion of the notification message being separate from the one of the one or more notification requests; and presenting the notification message on a user interface of the end user device, wherein the one of the one or more notification requests identifies the at least a portion of the notification message in a local notification store.","In some embodiments, the usage limit identifies when at least one of the one or more network services is no longer available, when a billing rate changes, when a service allocation is consumed, or when a service allocation is changed.","In some embodiments, the systems and methods are configured such that at least one of the one or more network services is classified as a first type before the usage limit has been reached, and the at least one of the one or more network services is classified as a second type after the usage limit has been reached.","In some embodiments, the device action is based on the service plan. In various embodiments the device action includes actions such as, for example, a device request by the end user device to access a new network service, exceeding a threshold usage amount of the one or more network services a roaming event, and a tethering request.","The end user device in various embodiments can be configured as an intermediate device, and the device action reflects past or intended use by one or more other end user devices in communication with the one or more network services via the intermediate device.",{"@attributes":{"id":"p-0744","num":"0743"},"figref":"FIG. 75","b":["100","405","415","410","240","241","420","3530","3530","3536","3538"]},"In some embodiments, Transport Gateway  is a home agent, GGSN, PDSN, or another type of gateway or router configured to monitor and report traffic usage to enforce an access control policy that is defined for a given user device identified by a device credential or a user credential. In some embodiments, Transport Gateway  is a home agent, GGSN, a or another type of gateway or router that has deep packet inspection (DPI) capabilities to characterize or classify the network access for a given device, monitor and report usage, and enforce access control for a specific classification of network usage. Although Transport Gateway  is shown as a single element, in some embodiments Transport Gateway  can comprise multiple elements. For example, in some of the embodiments described herein, a network element that has DPI capability to classify traffic usage or attempted usage based on network traffic parameters (e.g., access to a specific website, domain, or application server network, etc.) is enhanced with a classification-specific notification trigger capability that might not be available in an existing GGSN or PDSN. In some such embodiments, the GGSN is augmented with a secondary DPI function that can be used to identify the classification-specific notification triggers. The secondary DPI function can also be used to identify traffic classifications for specific flows and enforce the access control policy, or monitoring and reporting policy, according to the policy rules for the specific classification. The secondary DPI function can also be used to identify traffic classifications for specific flows and then feed this information back to a policy control function (e.g., a PCRF) that then instructs the GGSN (or other gateway) to implement the correct policy for that flow. In some embodiments, device  is an end user device such as, for example, a client device for accessing network voice and data services. Examples of such an end user device include a mobile handset, a smart phone, a tablet, a PDA, a personal computing device or other like device that accesses one or more services. In the illustrated example, device  includes a service processor  in communication with user interface  via agent communication bus . The device  in various embodiments can be configured as an intermediate device, and the device action reflects past or intended use by one or more other end user devices in communication with the one or more network services via the intermediate device.","In some embodiments, device  is in communication with the over the air network via modem . Modem  is in communication via RAN  through RAN gateways  and ATN  through 4G\/3G\/2G transport gateways  to access voice network services  and data network services . Voice network services  and data network services  provide various voice and data network services to device  via accessed networks such as cellular provider network(s) and\/or the Internet as similarly described herein. As shown, modem  is in communication with device networking stack  and TCP application , IP application , and voice application , and\/or various other applications as would be apparent to one of ordinary skill in the art. As shown, communications device , which includes service processor , is in network communication via RAN  through RAN gateways  and ATN  through 4G\/3G\/2G transport gateways  to access voice services accessed by the device  and data services accessed by the device .","As shown in this example, a two tier network embodiment is provided, including a radio access network (RAN ) and access transport network (ATN ). As those of ordinary skill in the art will appreciate,  depicts a simplified network functional architecture with a reduced number of network elements to illustrate various embodiments for providing user notifications for DAS.","For ease of description, only one client device  is shown, and only one access network (RAN)  and one transport network (ATN)  are shown. However, after reading this description, one of ordinary skill in the art will appreciate that multiple client devices can be serviced and that multiple network connections to a given device service processor managed by a service controller can also be used in view of the various embodiments described herein. These simplifications are made to facilitate description and aid understanding of the embodiments described herein, and it will be apparent to one of ordinary skill in the art that these and other simplifications herein do not in any way limit the various embodiments for multi-tier networks, multi-technology networks with additional network elements, for additional functionality, or for providing a different architecture and\/or allocation of network element functionality.","RAN Gateways  conduct and control traffic between RAN  networks and ATN  networks. In some embodiments, network element 4G\/3G\/2G transport gateways  conduct and control traffic between the ATN , the carrier core network, and outside networks voice services accessed by the device  and data services accessed by the device . As shown, there are two instantiations of a service monitor function, usage monitor A and usage monitor B. One instantiation of service usage monitor elements A, B is shown on each of the two gateway network elements 4G\/3G\/2G RAN gateways  and 4G\/3G\/2G transport gateways . Particularly, transport gateways , shown as usage monitor B, and RAN gateways , shown as usage monitor A. In some embodiments, the function of the service monitor function A, B is to monitor service usage for the client device(s) .","In some embodiments, service usage is monitored at a bulk or aggregate level. In some embodiments, service usage may be monitored at a deeper level such as the various embodiments described herein for service activity usage classification. As shown, the service usage monitor elements A, B in this example are located in their respective 4G\/3G\/2G RAN gateway  and 4G\/3G\/2G transport gateway  but as described herein in various other embodiments, the service monitor function can be included in only on one of the gateways , , such as service usage monitor A and\/or service usage monitor B, on other network elements, and\/or on the device  (e.g., located in the service processor  and\/or in a secure execution environment on device , such as within modem , a SIM, and\/or a hardware\/software partition of a processor of device ).","In some embodiments, monitored service usage provided by the service usage monitor A, B function is classified into various service usage classifications or categories using various techniques as described herein. Such categories can include, for example, browsing, email, music streaming, social networking, video streaming, news, shopping, and\/or various other service usage or application categories. In some embodiments, service usage is classified by type, classification, application, usage by destination, usage by time of day or network busy state (e.g., congestion), usage by roaming versus home network, and\/or various other categories. In some embodiments, user notifications for DAS includes displaying the classified service usage categories to a user as part of service usage notification sequence that is triggered by user off of option button from a service usage notification message sequence triggered by a service usage trigger event detection criteria or off of the dashboard application.","Also included in the example embodiment of  is a usage report, store element . As illustrated, in this example, usage report, store element  receives usage information from service usage monitor elements A, B. The usage information received from service usage monitor elements A, B can include information regarding the usage of one or more individual services or service classes. For example, service usage monitor elements A, B may be configured to monitor usage parameters for a given service or service class, the parameters including amount of time used or accessed, bandwidth consumed, data volume consumed, data rates, peak and off-peak usage, data type, consumptions, and so on.","In some embodiments, service usage information is communicated from the service usage monitor elements A, B to the usage report, store network element . For example, in the example illustrated in , the usage information is transmitted from service usage monitor elements A, B via their respective 4G\/3G\/2G RAN gateway  and 4G\/3G\/2G transport gateway  to usage report, store element .","Usage report, store element  receives and aggregates the usage information from one or more network elements that have a service monitoring function that contributes to a service usage measurement. For example, 4G\/3G\/2G RAN gateway  and 4G\/3G\/2G transport gateway  and their respective usage monitors A, B can be configured in some embodiments to send usage information to usage report, store element .","In some embodiments, the trigger event detect  function inspects the record of service usage and identifies when a specified event is met or detected. For example, event points can be thresholds or other established values that can be used to detect the occurrence of a reportable or trigger-able event. Event points can be pre-configured (e.g., pre-defined, pre-programmed, pre-stored, or provisioned) and can be defined based in some embodiments on service plan information. For example, where a service plan is defined based on certain limits for certain services, the trigger points can be set to those limits. As further example, consider an example service plan that provides the user with x MB for Exchange ActiveSync email; y MB for social networking access; and z MB for location services on a monthly basis. In such an example, points may be established to trigger, or identify the occurrence of the event, when the user has consumed his or her monthly quota for one or more of the services. In other words, the consumption of the quota for each service may trigger an event. In some embodiments, event points can be established to trigger when the quota is met, as a warning when the quota is being approached (e.g., when 85% of quota is met). In some embodiments, event points can be set to trigger upon the consumption of additional service blocks that may be purchased by the user.","Accordingly, in some embodiments, when trigger event detect  function detects a reportable event, a notification message is triggered. This notification message can be sent to any of a number of network entities for appropriate handling and action. For example, the notification event can be sent to device  to inform the user that the event has occurred. In terms of the examples described above, the event notification can be used to inform the user that he or she has used up the maximum amount of data allocated for one of the subscribed services, or that he or she is approaching the maximum amount for one or more of the subscribed services.","For example, various service usage notification trigger event detection criteria and associated notification message sequences can be implemented using various embodiments as described herein. As shown in the illustrated example, the trigger event detect  function is located in the usage report, store  network element, but in other embodiments described herein the trigger event detect  function can be located in other network elements or in the device.","As described immediately above, in some embodiments the notification message may be sent to device  for subsequent action. For example, the notification message may trigger a user alert to inform the user of the event occurrence. As a further example, the notification message may trigger an alert to the user informing the user that he or she has used up all of his or her allocated minutes or bandwidth for a particular service or class of services.","In some embodiments, upon such notification, the service for which the allocation has been consumed will be terminated until the next billing cycle or until such other time as the service allocation is renewed. In other embodiments, the notification message may trigger a message allowing the user to acknowledge, respond and purchase, renew or otherwise add additional minutes or additional data volume to the depleted service, or allowing the user to enter a pay-as-you-go mode. In still other embodiments, the renewal or reallocation may be automatic, and the message used to inform the user of the renewal and optionally of the additional charges, if applicable.","As another example, the notification message may be a preemptory message, allowing notification of the user that he or she is approaching the maximum allocation for a particular network service. This can be done so as to allow the user to react in advance of service cutoff. For example, the user may decide to conserve the allocation for important transactions. Additionally, the user may be given the option to purchase, renew or otherwise add additional allocations in advance of the actual depletion event to avoid interruption of service.","In some embodiments, the notification includes sufficient details to enable the user to determine the actual service or the service class for which the maximum allocation is being reached. The notification may also include details or links to additional information such as detailed information about the service, the prior service usage history, alternative services available, and the like.","In the illustrated example, service processor  includes a service control device link , a notification agent  and a notification sequence message store . These elements are used for creating, compiling, initiating or managing the communication of the notification and notification sequences for device . User Interface (U)  is provided to allow display of the notifications to the user and to accept user input as described more fully below.","Service control device link  is the element that performs the communication interface between device  and the network components. Service control device link  may include communications capability to receive data from or transmit data to network elements such as, for example, service controller . Service control device link  may also include communication capabilities to communicate with other device agents via, for example, agent communication bus . In some embodiments, service control device link  may also communicate with network elements such as service controller  via modem .","Notification agent  initiates user notifications in response to information received from service control device link . Notification messages, including individual messages and message sequences can be stored locally on device , or they can be stored on the network (such as, for example, at service controller ) and communicated to the device upon a notification event. In the illustrated example, notification message sequence store  is used to locally store notification messages for communication to the user via user interface . Upon a notification event, notification agent  retrieves the appropriate message (which can include a sequence of messages) from notification message sequence store . In the illustrated example, the notification agent  is in communication with other device agents, the UI  and the service control device link  via the agent communication bus .","In some embodiments, an appropriate message is selected based on the type of notification event received. Event specific message sequences tailored to each event can be stored in notification message sequence store . The message sequence can be a single message or a series of messages for the event. Thus, for example, if the notification event is an event indicating that the user has consumed his or her allocation for voice services, the notification event specifies the event type and the message or messages to notify the user about this particular occurrence are retrieved.","In some embodiments, programming the notification message sequence store  includes either updating the notification message sequence information or updating the entire notification agent application (e.g., replacing that agent with a newly updated\/updated version of that agent). In some embodiments, similarly update techniques can similarly be applied to various other elements described herein, such as the notification trigger event detection criteria, trigger index, trigger message, and so forth, as will now be apparent to one of ordinary skill in the art in view of the various embodiments described herein.","In some embodiments, user notifications for DAS includes providing a device notification agent ; in which the device maintains a service usage record that is classified into various service usage categories, in which a service usage category is based on a service activity type or an individual service activity; and the device also maintains a record of the service plan usage policies; a notification agent analyzes one or more service activity categories to determine the amount of a service usage allowance or service plan usage charge that is consumed by a category, in which the allowance is determined by one or more aspects of the overall service plan policies; and the amount of service plan allowance or usage charge that is due to the category is displayed to a device UI.","In some embodiments, service controller  uses notification agent  notification message sequence information or other service processor  agent program information from notification policy management & UI  (e.g., or other equivalent network element for notification message provisioning and management) to provision (e.g., program, pre-configure, or download instructions to) the various elements of the notification system.","In some embodiments, the service controller  is in secure communication with the service processor notification agent  for providing user notifications for DAS as described herein with respect to various embodiments. In some embodiments, service provider IT\/configuration server  is in secure communication with service controller  for configuring the service controller . For example, service provider IT\/configuration server  can provide a service plan and\/or service plan update, service policy, and\/or service policy update, which can each include notifications for DAS based on service usage.","Service controller  is provided in this example to perform a desired level of coordination and control of the network elements associated with embodiments of the invention. Service controller  communicates with various network elements and the device service processor  to perform functions such as, for example, updating network elements with new or modified policies and removing deleted policies. In some embodiments, service controller  can also function as a control element to control the collection of information from network components, to provide network notification to device  based on information received, and to receive information from device .","For example, in some embodiments, service controller  collects information from usage report, store  including usage data or other statistics relating to the usage or consumption of services by one or more devices  on the network. This can include, for example, data and information relating to the amount of time a service or service class has been used in a given time period, the amount of bandwidth used for data transfer for a given service or service class, or other service usage metrics. Service controller  may be configured to collect this information directly from the appropriate gateways ,  or from usage report, store .","Service controller  may be further configured to evaluate the usage information received from the network elements (e.g., gateways , , or usage report, store ) to determine where a given user or device stands with respect to consumptions of its allocations of one or more network services, and to determine whether a notification should be sent to the one or more devices  concerning usage of service allocations in accordance with a service policy. Accordingly, as illustrated in the example of , service controller  is illustrated as having a communication link via access transport network  and radio access network  to device . It is via these communication links that service controller  can provide notifications or other information to the device . As will be apparent to one of ordinary skill in the art after reading this description, the dedicated links between service controller  and service processor  can be provided through alternative means such as, for example, an alternative communication link. For example, instead of providing access through RAN , such as communication link could be provided through a Wi-Fi link on the device via the Internet to service controller .","In some embodiments, service controller  can be used to send programming notification policies and to initiate notification message sequences as described herein.","In addition to providing notifications to devices  relating to service allocations and usage, in some embodiments, service controller  functions as a programming agent to configure the device service processor  and the agents therein. For example, in some embodiments, service controller  receives new policies or policy updates or changes from notification policy management and user interface . Service controller  may store the policy locally so that policy can be used to determine whether information from usage monitors A, B indicates that a notification should be generated and sent to a device  operating under that policy. Service controller  may also be configured to communicate that policy to device  such as, for example, via service control device link . Accordingly, service controller  can be configured to populate a device  with one or more policies or policy updates or changes, and can also be configured to remove policies from device  as appropriate.","Service controller  is also in communication with service provider IT configuration server , which is in communication with the two gateway network elements 4G\/3G\/2G transport gateways  and RAN gateways  and other network elements. In some embodiments, service controller  facilitates configuring or programming the trigger event detect  function with the service usage notification trigger event detection criteria that is used to trigger a notification message sequence to be sent to the device UI (e.g., device end user UI).","In some embodiments, the notification policy management & UI  (e.g., or other equivalent network element for notification message provisioning and management) is used to provision notification policies and messages. Notification policies and associated messages can be created using notification policy management & UI  and provided to appropriate network devices such as service controller  and device . notification policy management & UI  provisions (e.g., program, pre-configures, downloads instructions to) the notification agent  and\/or the notification message sequence store  to provide notification event and message sequence information.","For example, policies can be created along with their associated notification events and their respective notification messages for use with the systems and methods described herein. Policy events and messages can be pushed or otherwise delivered to device  for operation. Likewise, updates such as new policies, policy deletions or policy changes can also be created and communicated to device . As illustrated in , this information is provided to device  by way of service controller . This information could also be provided more directly to the device  such as, for example, via ATN  and RAN .","In some embodiments, the notification policy management & UI  provisions (e.g., programs, pre-configures, or downloads instructions to) the trigger event detect  element (e.g., or trigger event detect  element) to create, update, modify or remove a notification trigger detection criteria. For example, new trigger events can be provided for newly created or modified policies. The trigger information can include trigger values and the associated notification trigger index or notification trigger index message as described herein. The notification trigger index may be a numeric index, an alphanumeric string, a pointer, a GUID, or any other mechanism that identifies the at least a portion of the notification message. In some embodiments, the notification policy management & UI  provisions (e.g., programs, pre-configures, or downloads instructions to) the usage monitor A element and\/or usage monitor B element. For example, new service monitor functions can be added identifying services and usages (e.g., minutes, data volumes, etc.) to be monitored to provide information useful for monitoring performance relative to allocations for new or updated service policies.","In some embodiments, provisioning of the network apparatus or device apparatus used to create a service policy using the above notification system embodiments is provided by a service notification system provisioning element, referred to as the notification policy management & UI . In some embodiments, the notification policy management & UI  programs the network service usage monitoring element with the notification trigger event detection criteria. In some embodiments, the notification policy management & UI  programs the network service usage monitoring element with the association between the notification trigger event detection criteria and the notification trigger index or notification trigger message. For example, the programming protocols and programming messages for the service usage monitoring element can be complex and non-intuitive, which can complicate or slow the process of implementing the service usage monitoring element commands, configuration or programming to properly implement a higher level definition of service policy. Accordingly, in some embodiments, notification policy management & UI  element includes a UI that allows an operator to define the notification trigger event detection criteria as higher level service usage trigger event detection criteria, service usage events or service usage patterns. The notification policy management & UI  element may be further configured to convert these higher level definitions for the notification trigger event detection criteria into the appropriate lower level programming messages, instructions, commands or configurations that are recognized by or required by the service usage monitoring element and that implement the intention of the higher level service usage trigger event detection criteria (e.g., higher level trigger event detection criteria, such as application based service usage limits, and lower level trigger event detection criteria, such as bulk service usage limits).","In some embodiments, notification policy management & UI  element includes a UI that allows an operator to define the association between the higher level service usage trigger event detection criteria and the intended corresponding notification trigger index or notification trigger message. Notification policy management & UI  element may further include the intended association between the higher level service usage trigger event detection criteria and the intended corresponding notification trigger index or notification trigger message in the lower level programming of the service usage monitoring element. To further simplify the correct programming of the service usage monitoring element to properly implement service usage notification policy, in some embodiments, the notification policy management & UI  provides a mechanism for a network administrator to simultaneously define the notification triggers as higher level service usage conditions, and to define the association between the notification trigger event detection criteria and the intended corresponding notification trigger index or notification trigger message.","Similar to the difficulties of transforming higher level service usage notification policies into the required programming and provisioning of the network service usage monitoring element, the process of pre-configuring, programming or pre-loading the local device storage of service usage notification message sequences can be complex, time consuming, and prone to error. An operator responsible for creating the proper notification policy definition and enforcement for the device and the network can benefit from a higher level UI tools to manage design of message sequences, associating of message sequences to the corresponding notification trigger event detection criteria and distribution of the correct pre-stored notification message sequence information to devices in a manner that properly associates the pre-stored notification message sequence information with the proper notification trigger index or notification trigger message to be received from the network. Accordingly, in some embodiments, the notification policy management & UI  element programs a local device notification agent storage system with one or more pre-determined notification message sequences that are stored locally on the device, and to associate the notification sequences with a notification trigger index or notification trigger message to be received from the network.","In some embodiments, notification policy management & UI  element is included in the notification system, in which the UI accepts carrier network administrator inputs to define, design, specify or provide a reference to the following notification information: (i) the desired notification trigger event detection criteria, (ii) the notification trigger index or trigger message associated with the notification trigger event detection criteria, (iii) the notification message sequence that is to be associated with the notification trigger event detection criteria; and this notification information defined, designed, specified, or referenced by the administrator UI is passed to the service notification provisioning apparatus, which then (iv) programs the programmable notification trigger event detect element  (e.g., which in the various embodiments described herein can be programmed within network elements or within device agents) with the notification trigger event detection criteria and trigger index or trigger message (e.g., which is the message sent by the notification trigger event detect element  to indicate that the specific notification trigger event has occurred), (v) if required programs the routing of the trigger index or trigger message to the device notification agent , (vi) programs the notification message sequence store , and, in some embodiments, the device notification agent , with (a) an ordered list of notification message sequence actions (e.g., the sequence of actions to display any required notification message sequence information stored on the device and\/or actions to display any notification message sequence information obtained from network elements), and (b) any required notification message sequence information that is stored locally on the device to initiate and complete the desired notification message sequence when the trigger index or trigger message is received.","In some embodiments, the notification policy management & UI  pre-configures the device notification agent to maintain a local device storage (e.g., in various embodiments one or more of notification message sequence store  and notification agent ) of one or more pre-determined sets of notification sequence information, each set defining at least a portion of the information required to generate a UI notification message sequence; the local storage of notification sequence information is organized so that a specific desired set of notification sequence information is determined by a notification trigger index or notification trigger message; the notification agent receives the notification trigger index or notification trigger message from a notification trigger detection element; and the notification agent creates a complete notification message sequence by performing one or more of the following operations: (a) initiate (e.g., generate, assemble, execute, or manage), a device notification message sequence by using the notification trigger index to look up a pre-stored set of message sequence information (e.g., after adding additional information or additional formatting, such as adding a UI background bitmap that is common to multiple notification message sequences); (b) initiate a device notification message sequence by using the notification trigger message to look up a pre-stored set of message sequence information (e.g., notification information, UI bitmap, and\/or UI formatting) and combining the pre-stored information with information included in the notification trigger message (e.g., usage count update, service plan usage condition or status, and\/or specific service usage activity information) to form a complete notification message sequence; (c) initiate a device notification message sequence by using the notification trigger index or trigger message information as a reference to initiate a notification message sequence based on information stored on a network element (e.g., pull down a particular set of message sequence information from a server or initiate\/redirect a user to a particular portal or website message sequence, such as a series of web pages with options); or (d) perform a combination of two or more of the above operations; and the device notification agent communicates with a device UI to provide the notification message sequence to the device user.","To further simplify the task of programming user notifications for DAS as described herein, it is advantageous for a network administrator to be able to simultaneously configure the network service usage notification policies in coordination with the device service usage notification policies. Accordingly, in some embodiments, a notification policy management & UI  element is included to provide a network administrator with a UI to simultaneously define higher level definitions and coordinated policy distribution through network element configuration and the device notification agent configuration, with the network and device configuration capabilities including one or more of the following network configurations: higher level definition of trigger event detection criteria, association of trigger event detection criteria with trigger index or trigger message, higher level definition of trigger message content; and various device notification agent configurations (e.g., higher level definition of notification message sequence information, trigger event detection criteria programming in monitor, association of trigger event detection criteria with trigger index or trigger message). In some embodiments, the notification policy management & UI  provides a mechanism for a network administrator to simultaneously define the notification triggers as higher level service usage conditions, and to define the association between the notification trigger event detection criteria and the intended corresponding notification trigger index or notification trigger message and the corresponding notification message sequence on the device through a series of related UI screens that organize all of this required provisioning information into a convenient collection of related GUI information display and administrator input interfaces.","In some embodiments, the step of using the notification policy management & UI  to pre-configure the device notification agent  to maintain a local device storage of one or more pre-determined sets of notification sequence information includes one or more of the following: (a) Notification policy management & UI  can provision (e.g., program, pre-configure, or download instructions to) the device notification agent with ordered text and\/or graphics image information required in the notification message sequence and associate the information with a notification trigger index or notification trigger message, in which the information is configured and formatted such that a device service notification agent can access the information from device storage or in the notification agent software to initiate (e.g., generate, execute, assemble, or manage) and display a notification message sequence to the device UI. (b) Notification policy management & UI  can provision the device notification agent to execute the ordered steps required to display the notification sequence that include accessing network based information display information or display sequences specified in the notification message sequence steps, and associate the network based notification message sequence information with a notification trigger index or notification trigger message, in which the information is configured and formatted such that a device service notification agent can access the information from the network sources to initiate and display a notification message sequence to the device UI. For example, one or more of the notification message sequence steps can include: initiate a UI sequence that has information downloaded form a network based UI display file or sequence of riles stored on a server, initiate a network based portal page or web view page or sequence of pages, or initiate a network based web site page or sequence of pages. (c) Notification policy management & UI  can provision the notification index message triggered by the notification trigger detection element to include ordered text and\/or graphics image information required in the notification message sequence, and can provision the device notification agent to incorporate the notification message sequence information included in the notification trigger index message, along with (i) other information stored locally on the device (e.g., message window graphics, UI interface formatting, other text and\/or graphics information), and\/or (ii) network based information display information or display sequences, into the ordered notification message sequence initiated by the notification agent for display of the notification message sequence to the device UI. (d) The notification sequence information downloaded from the notification policy management & UI  can include any combination of steps a, b and c listed above. (e) Notification policy management & UI  can update or download the notification agent software to specify a new notification message sequence that can be any combination of steps a, b and c listed above.","In some embodiments, the communication protocol for communication between the device  and the associated network elements (e.g., a service controller element , a service usage report, store element  or another network element that performs similar functions) can comprise a number of communication protocols, including the protocol embodiments described herein or other protocols, such as TCP, SMS, SS7, and various other protocols as would be apparent to one of ordinary skill in the art. In some embodiments, push techniques, pull techniques, and\/or various combinations thereof as described herein are used to provide user notifications for DAS as described herein with respect to various embodiments.","As further shown in , notification policy management and user interface  is in communication with the service controller , and as described above, in some embodiments, facilitates programming notification policies for the various network elements as described herein. In some embodiments, notification policy management and user interface  is also connected to other network elements, such as the service provider IT configuration server . In some embodiments, notification policy management and user interface  provides a user interface for a carrier network notification policy administrator in which the various programmable settings required for the trigger event detect  function, the notification agent , and other network or device elements is organized for the notification policy administrator in a manner that facilitates more effective notification policy design, provisioning, and\/or enforcement as described herein.","In some embodiments, service provider IT\/configuration server  provisions trigger event detect  function network element, to trigger or events based on a policy provided by service controller . For example, service provider IT configuration server  can be configured to provision trigger event detect  to set the various detection criteria used by trigger event detect  to trigger an event. In other words, service provider IT configuration server  can be used to configure trigger event detect  function to monitor usage is for one or more services for device  to detect when a service usage notification trigger detection criteria exists; to associate it with a notification trigger index or notification trigger message; and to communicate the notification trigger index or notification trigger message to the device. In some embodiments, trigger event detect  and\/or usage report, store  can be configured to inform service control device link  of the trigger event. Alternatively, as described above, in some embodiments trigger detection events are sent to service controller , and service controller  communicates the notification to service control device link .","The trigger event in the illustrated example is sent to a notification agent  via agent communication bus . In some embodiments, the trigger event may include a specific index indicator, notification trigger index message, local device notification trigger index processing, and\/or local off-line device display of user notifications for DAS as described herein.","Upon receipt of the trigger event, notification agent  causes the appropriate notification to be provided to the user of device . For example, in embodiments where pre-scripted notifications are stored in a notification message sequence store , notification agent  retrieves the appropriate message from notification message sequence store  and causes that message to be delivered to the user such as through user interface . For example, where the message is a textual string, the message can be displayed to the user on the user's display screen of device . As another example, where the message is an audiophile, the audio file can be delivered to the user via the device's  speaker. In various embodiments, the message may be comprised of a single message or may include multiple messages.","Also in various embodiments, the message may be configured to elicit a response from the user of device . For example, the user of device  may be given the option to purchase additional service allocations as part of the notification transaction. Accordingly, the message can include options that can be followed by the user to purchase such additional allocations, and menu selections or other prompts enabling the user to input information indicating whether a user wishes to purchase such additional allocations. The user response can be communicated via agent communication bus  service control device Link . Service control device link  can afford this information to a network entity such as, for example, service controller . Continuing with this example, if the message from the user indicates that the user wishes to purchase additional allocations, service controller  can notify relevant network elements regarding the additional allocations.","For example, service controller  can notify usage report, store  and\/or trigger event detect  to update the threshold for trigger bubbles so that the appropriate notifications can be provided based on the new allocation levels. Similarly, service controller  may be configured to provide this information to notification policy management and user interface  such that the policy can be updated based on the new allocations. Still further, service controller  may be configured to notify service provider IT configuration server  such that the user or device  account records can be updated. This can trigger the appropriate billing events and other administrative sequences as may be appropriate to accommodate the additional allocations purchased. In some embodiments, the additional allocations could be purchased on a one-time basis in which case, service controller  can be configured to ensure that only a one-time allocation is made, and that the appropriate network elements such as usage report, store , trigger event detect , notification policy management and user interface , and other network elements are appropriately reset to previous levels on the additional allocations expires. For example, the user of device  may have only elected to increase the allocation for a current billing cycle (e.g. for the current month). In such a case, service controller  can be configured to reset the network elements to the previous allocation at the end of the current month or current billing cycle.","In some embodiments, if device  is associated with a service plan that is a family plan and\/or other shared account plan (e.g., a corporate or other shared account plan), account aggregation may performed by an appropriate network element. For example, in some embodiments, usage count or other consumption metrics can be aggregated at a network element, so the actual aggregate usages permitted for a given allocation are tracked to enable detection of when the allocation is reached by the combination of users or devices, and to enable the detection in real-time or near-real-time of the consumption of usages by that combination of users or devices. This aggregation may be done in any of a number of network elements such as, for example, by usage report, store element , trigger event detect  function, or by service controller . Event notifications can be pushed to and\/or pulled from service processor  at any or all of the devices  associated with the shared account plan.","In some embodiments, the devices  associated with a shared account plan can each be configured with the same or similar permissions and authority, and the system can also be configured such that each of the devices  associated with the shared account plan receive the same or similar notifications from the network. In further embodiments, different devices  associated with a shared account plan can be configured with different permissions or authorities, and may be provided with different notifications depending on the device  status. For example, one of the devices  associated with a shared account plan may be designated as a master device that can receive additional information as compared to the other devices  associated with that shared account plan. As a further example, the master device may also be configured such that it can take actions that the other devices  in the shared account plan are not able to perform. Examples of such actions can include purchasing additional allocations of services or service classes, modifying the policy or plan under which one or more of the devices  in the shared account plan operates, and terminating or altering the allocations of services or service classes granted to one or more of the devices  in the shared account plan.","In some embodiments, a device  designated as a master device in a shared account plan may also be given permission to view additional information pertaining to notifications, policies and usages that is not available to other devices  in the shared account plan. For example, the master device may be provided with additional information in a notification such that the master device can view the consumption of resources by one or more other devices  in the shared account plan. Additional information such as this made available to the user of master device  can allow the user to make informed decisions about purchasing additional allocations, modifying policies under which one or more devices operate, and even terminating or altering permissions of the one or more other devices  in the shared account plan to access one or more services or service classes.","As would be apparent to one of ordinary skill in the art after reading this description, other levels of hierarchy can be provided to permit two or more classes of users or devices  in a shared account plan. Permissions and authorities can be granted to the devices  in the shared account plan based on where each device resides in the hierarchy. As would be apparent to one of ordinary skill in the art after reading this description, a number of alternative architectures can be used to provide the features and functionality associated with the systems and methods described herein.","In some embodiments, a complete user notification message sequence is initiated by using a notification trigger index to look up a pre-stored set of message sequence information. The sequence can optionally be initiated with additional information or additional formatting added by the device, such as by the notification agent . Examples of this include adding a UI background bitmap that is common to multiple notification message sequences, formatting the message for the intended user interface , combining the pre-stored information with information included in the notification trigger message (e.g., usage count update, service plan usage condition or status, specific service usage activity information, and\/or other service usage\/condition\/event\/other information). The addition of this information, where appropriate, forms a complete notification message sequence. For example, the notification trigger index can include various additional notification information to be included with a notification message. This can include, for example, information such as a warning message, a summary of the service usage that is outside of the service plan (e.g., usage count update, service plan usage condition or status), an offer to purchase additional allocations, and\/or an offer for alternative service plan options. As will now be apparent to one of ordinary skill in the art in view of the various embodiments described herein, various user notification message sequences can be initiated by using the notification trigger index to look up a pre-stored set of message sequence information and optionally combining the pre-stored information with information included in or referenced by the notification trigger message.","In some embodiments, a complete user notification message is generated, initiated or managed using the notification trigger index or trigger message information as a reference based on information stored on or gathered from a network element. The trigger can be generated by a network element such as service controller , trigger event detect , usage monitors A, B, or other network element. Alternatively, the trigger or threshold information can be maintained locally on device , and device  can generate the notification trigger index or trigger message information.","For example, a notification can be generated by pulling down a particular set of message sequence information from a server or initiating\/redirecting a user to a particular portal or website message sequence, such as a series of web pages with options. As a further example, a local device stored notification message sequence managed by a notification agent can be instructed by a notification trigger index or notification trigger message to branch out and request or pull information from a network element such as a portal, website, and\/or download server to add to the notification message.","In some embodiments, the amount of information included in the notification message sequence obtained from the network element is kept to a minimum or minimized to conserve network bandwidth and other resources, and to improve notification response speed. In some embodiments, notification messages do not include any additional information from the network. In still other embodiments, larger amounts of information to be included in the notifications are provided by the network elements. In still further embodiments, the entire notification message is provided by network elements, with no message content coming from a local store on device . In each of the above-described embodiments, the notification messages may be triggered by a local event or by a network event.","In some embodiments, the notification message sequence provides the user with one or more of the following notification information set types and\/or action option types.","The message sequence may inform the user of a usage amount for bulk (e.g., open access) usage. This usage can be to-date cumulative usage for a billing-cycle, for device lifetime, or for any other defined period. This usage information can also show usage relative to a service plan limit, whether over or under. The message sequence may inform the user of a usage amount for a detailed service usage classification that is other than bulk. Historic usage data can also be tracked and maintained such that message sequences can inform the user of historic usage, including on a service-by-service basis and for a given time period.","The message sequence may inform the user of a usage activity that is either not allowed by the current service plan policy configuration or is traffic controlled under the current service plan policy configuration. The message sequence may inform the user of the reason that a service usage activity is either allowed, not allowed or is traffic controlled under the current service plan policy configuration.","The message sequence may inform the user of the reason that a service usage activity is either allowed, not allowed or is traffic controlled under the current service plan policy configuration including, for example, service policies that are dependent on classification of service usage activity, time of day, network congestion state, network type, roaming versus home network connection, QoS level or QoS availability.","The message sequence may inform the user of the service usage velocity or rate as compared to a service plan limit, and may further provide projections regarding whether usage at current rates will exceed or under-exceed plan limits, and if so, by how much. It may also provide the user with an indication of the relative fit for the service plan for a service usage velocity, rate or pattern.","The message sequence may inform the user of options to extend the service, buy additional allocations, swap under-utilized with over-utilized allocations, reallocate service allocations among users in shared account plans, change service plans or otherwise modify the current allocations. Likewise, the message sequence may inform when network access is being attempted but is not available, and provide the user with an option to select a service plan for an available network or provide the user with other options to modify current allocations.","The message sequence may detect service usage patterns and provide the user with a service plan option that is suited for the service usage pattern. The pattern detection and analysis can be for a current billing cycle, or based on historic data.","The message sequence may indicate when a service plan may be better suited for a given usage rate or service activity type as compared to the current service plan; and may accept user input on reconfiguring a service plan or changing a service plan. The message sequence may also accept user input on selecting an initial service plan.","The message sequence may inform a user of a device that belongs to a user group or device group usage plan (i.e., a shared access group) that a certain aggregate usage amount has been reached for the device group or user group or for one or more users in the group; inform a user of a device that belongs to a user group or device group usage plan that a specific set of service usage activities for a given device or user that belongs to the group service plan have occurred; and provide a group manager with the opportunity to extend the service, buy additional allocations, swap under-utilized with over-utilized allocations, reallocate service allocations among users in the group, change service plans or otherwise modify the current allocations.","The message sequence may accept user input to identify the service usage activities for notification message actions. The message sequence may inform the user regarding or prompt for information regarding various other notification information set types and\/or action option types as will now be apparent to one of ordinary skill in the art in view of the various embodiments described herein.","In some embodiments, the notification message sequence provides the user with one or more of the following notification information sets and\/or user action options. The message sequence may inform the user that a service usage amount or service usage level has been reached. The usage or level that triggers notification can be the maximum allocation for a given service or it can be an intermediate or threshold level that is less than a service plan service usage limit. This can include, for example, notifying the user when a certain percentage of the allocation has been reached. This can include, as another example, notifying the user when the usage rate is running at a rate higher than average or a rate that, if continued, will consume the allocation before the end of the allocation cycle. As yet another example, this can include notifying a user when one or more users in a shared user group are consuming the allocation at a rate that will consume the allocation before the end of the allocation cycle, or at a rate higher than the average rate for the other users, or otherwise exceeding a nominal consumption rate.","Notifying the user when an intermediate level is reached can allow the system to provide the user with advanced notification such that action can be taken, if desired, to alter the allocation or alter usage before the service is cut off. Accordingly, in some embodiments, the message sequence may further provide the user with options where an intermediate service usage amount or level that is reached and provide user with alternatives to modify service plan policy configuration, purchase additional allocations, or alternatives to change service plans or allocations.","In some embodiments, the message sequence may inform the user that a service usage amount or service usage level that is more than a service plan service usage limit has been reached. This message sequence can also inform the user of (i) an overage acknowledgement message, (ii) alternatives to modify service plan policy configuration, or (iii) alternatives to change service plan.","The message sequence may inform the user that a level of service usage rate has been reached. For example, such a message sequence can inform the user that service usage rate is relatively high or relatively low compared to a service plan usage rate limit. The message sequence may also provide user with (i) a high velocity acknowledgement message, (ii) alternatives to modify service plan policy configuration, or (iii) alternatives to change service plan; inform the user that a service usage activity is attempting to receive or has received service and is not supported by the current service usage plan policies.","The message sequence may inform the user that a service usage activity is attempting to receive or has received service and is not supported by the current service usage plan policies (e.g., associated service plan). This may be accomplished with (i) an acknowledgement message, (ii) alternatives to modify service plan policy configuration, or (iii) alternatives to change service plan; inform the user that a service usage activity that is not supported by the current service usage plan policies has been blocked.","The message sequence may inform the user that a service usage activity that is not supported by the current service usage plan policies has been blocked and may optionally provide user with (i) an acknowledgement message, (ii) alternatives to modify service plan policy configuration, or (iii) alternatives to change service plan in order to allow the service usage by the activity.","The message sequence may inform the user that an application or group of applications are attempting to use service or have reached a pre-determined level of service usage, and optionally provide the user with (i) an acknowledgement message, (ii) alternatives to modify service plan policy configuration, or (iii) alternatives to change service plan.","The message sequence may inform the user that an application or group of applications has been blocked, allowed or placed on traffic controlled access (e.g., throttled, backgrounded, provided with QoS) under the current service plan policies and also inform regarding deviations of such policies by the applications. The message sequence may provide information to the user explaining why the access has been blocked allowed or placed on traffic controlled access. The message sequence may also inform the user with (i) an acknowledgement message, (ii) alternatives to modify service plan policy configuration to over-ride the access controls, or (iii) alternatives to change service plan in order to allow the service usage by the activity.","The message sequence may inform the user that an application or group of applications are attempting to use service or have reached a pre-determined level of service usage or service usage rate. The message sequence may also inform the user that the application or group of applications typically exhibit usage behavior that is relatively high with respect to service plan limits. With regard to these notifications, the message sequence may also provide user with (i) an acknowledgement message, (ii) alternatives to modify service plan policy configuration, or (iii) alternatives to change service plan.","The message sequence may inform the user that a service usage activity is attempting to communicate with, is communicating with or has communicated with a specified network destination or group of specified destinations. The message sequence may also inform the user that a service usage activity is attempting to communicate with, is communicating with or has communicated with a specified network destination or group of specified destinations that have been blocked, allowed, or placed on traffic controlled access. In such embodiments, the message sequence may also provide information to the user explaining why the access has been blocked or placed on traffic controlled access. In such embodiments, the message sequence may also inform provide the user with (i) an acknowledgement message, (ii) alternatives to modify service plan policy configuration to over-ride the access controls, or (iii) alternatives to change service plan in order to allow the service usage by the activity.","The message sequence may inform the user that a service usage activity that communicates with a specified network destination or group of specified network destinations has reached a pre-determined level of service usage or service usage rate. In such embodiments, the message sequence may also inform the user that service usage activities communicating with the specified network destinations typically exhibit usage behavior that is relatively high with respect to service plan limits, or has reached a pre-determined level of service usage or service usage rate. In such embodiments, the message sequence may also inform the user with (i) an acknowledgement message, (ii) alternatives to modify service plan policy configuration, or (iii) alternatives to change service plan.","The message sequence may inform the user that a service usage activity is attempting to communicate with or has communicated with the network, and further inform the user that there is an alternative service plan or network that is better configured to support the activity. Examples of an alternative network can include a 2G, 3G, 4G or Wi-Fi network that is available to support the service activity. The message sequence may also inform the user that a service usage activity is attempting to communicate with or has communicated with the network, and further inform the user that an alternative network is available that is better able to support the activity, and under the current service usage plan policies the service usage activities have been blocked, allowed, or have been placed on traffic controlled access. In such embodiments, the message sequence may also inform the user with (i) an acknowledgement message, (ii) alternatives to modify service plan policy configuration, or (iii) alternatives to change service plan; inform the user that a service usage activity or group of services usage activities are attempting to use service or have used service during a specified time of day, during a time that the network is experiencing a specified level of congestion, or during a time that the network is experiencing a specified level of performance or availability.","The message sequence may inform the user that a service usage activity or group of services usage activities are attempting to use service, are using a service or have used service during or at a specified time. Such a specified time can be, for example, a time of day; a day or other time period in a given cycle; a time during which the network is experiencing a specified level of congestion; or a time during which the network is experiencing a specified level of performance or availability. Such a specified time can occur where, under the current service usage plan policies, the service usage activities have been blocked, allowed or have been placed on traffic controlled access. In such embodiments, the message sequence may also inform the user with (i) an acknowledgement message, (ii) alternatives to modify service plan policy configuration, or (iii) alternatives to change service plan.","The message sequence may inform the user that a service usage activity or group of services usage activities are using, attempting to use or have used a service involving connection to a roaming network, or have reached a specified level of service usage involving a connection to a roaming network. In such embodiments, the message sequence may also inform the user with information about the service usage charges, service access policies or service access performance of one or more of the networks.","The message sequence may inform the user that service usage is possible via one or more roaming networks, and provide the user with an option to connect to a roaming network. In such embodiments, the message sequence may also inform provide the user with (i) an option to accept the roaming option and\/or roaming service charges, (ii) alternatives to modify service plan configuration, or (iii) alternatives to change the service plan, for example, to avoid roaming or to allow roaming.","The programmable device user notification agent system described herein offers flexible and comprehensive definitions for notification trigger event detection criteria and associated notification message sequence types and specific notification message sequences for wireless communication devices, such as mobile wireless devices. For example, using various embodiments described herein, a wide variety of notification trigger event detection criteria can be defined and provisioned, and a corresponding wide variety of associated notification message sequences (e.g., also referred to herein as notifications) can be defined and provisioned. In some embodiments, the user notification that is initiated by the notification trigger event (e.g., and subsequent receipt of the notification trigger index or notification trigger message) includes, one or more of the following: a notification that the monitored network service usage activity is out of policy based on the service policy; an option to modify one or more service policy settings of the communications device; a notification describing or offering user selection of a service plan change; a notification acknowledgement in which the user is required to acknowledge that a service usage notification has been received by the user; a notification acknowledgement of a service usage overage condition or service usage present or future cost condition; a notification describing or offering user selection of a service plan upgrade or temporary allowance for a service usage activity (e.g., application (such as a browser, email program or web view, mapping or directions application or web view, audio application or web view, voice application or web view, chat application or web view, streaming music or video application or web view, eReader, gaming application or web view, calendar application or web view, contacts application or web view, social network application or web view, or other application programs or web views), network destination (such as a web site or server address), content type (such as http, web links to audio or video, ads, file downloads, picture files, video files or streaming, audio files, or streaming), traffic type, service type (such as data, video, audio, or voice) carrier sponsored service, third party sponsored service, or user paid service).","In some embodiments, the user notification that is initiated by the notification trigger event (e.g., and subsequent receipt of the notification trigger index or notification trigger message) includes, one or more of the following: a notification describing or offering user selection of a service plan upgrade or temporary allowance for a service usage activity that is not covered or allowed with the current service plan policies; a notification describing or offering user selection of an upgrade to the current service plan (e.g., including possibly no current paid service plan), a downgrade to the current service plan or a modification to the current service plan; a notification describing or offering user selection of an upgrade to the current service plan (e.g., including possibly no current paid service plan), a downgrade to the current service plan or a modification to the current service plan based on a detected pattern of usage that indicates a more suitable service plan as compared to the current service plan is available.","In some embodiments, the user notification that is initiated by the notification trigger event (e.g., and subsequent receipt of the notification trigger index or notification trigger message) includes, one or more of the following: a notification indicating that a user service usage activity (e.g., a service usage activity initiated by a device user) is being limited based on background priority policies or QoS priority policies specified in the current service plan policy set (e.g., in which limited includes one or more of blocked, throttled, aggregated and held, delayed, or otherwise controlled or restricted); a notification that a given service activity is not allowed; a notification that one or more service usage activities are not available or are not allowed for the present service plan at the present time, or for the present active network, or for a roaming network, or for the present network busy state or congestion state, or for the present QoS availability; a notification that one or more service usage activities are not available or is not allowed for the present service plan at the present time, or for the present active network, or for a roaming network, or for the present network busy state or congestion state, or for the present QoS availability, and an associated offer to temporarily or permanently upgrade the service policy (e.g., service plan) capabilities to allow the one or more service usage activities; a notification that one or more service usage activities are available or are allowed for the present service plan at the present time, or for the present active network, or for a roaming network, or for the present network busy state or congestion state, or for the present QoS availability; a notification that one or more service usage activities are available or are allowed with a reduced access network performance (e.g., throttled, background service status, or certain level of QoS) for the present service plan at the present time, or for the present active network, or for a roaming network, or for the present network busy state or congestion state, or for the present QoS availability; a notification that one or more service usage activities are available or are allowed with a reduced access network performance for the present service plan at the present time, or for the present active network, or for a roaming network, or for the present network busy state or congestion state, or for the present QoS availability, and an associated offer to temporarily or permanently upgrade the service policy (e.g., service plan) capabilities to allow the one or more service usage activities with higher access network performance or full access network performance; a notification that one or more service usage activities are available or are allowed for the present service plan at the present time, or for the present active network, or for a roaming network, or for the present network busy state or congestion state, or for the present QoS availability, and the present service cost, price, rate of cost or rate of price for the one or more service usage activities.","In some embodiments, the user notification that is initiated by the notification trigger event (e.g., and subsequent receipt of the notification trigger index or notification trigger message) includes, one or more of the following: a notification that a service usage activity is not allowed on the current active network but is available on an alternative network; a special service offer to provide a discounted, free, limited service allowance or limited time offer to try one or more service usage activities; a notification indicating that a new service plan or new service usage activity is available for the device; a notification indicating that another network with enhanced or potentially enhanced service performance, service usage policy allowances, or service usage pricing is available; an indication of the amount of service used (e.g., bytes, minutes\/time, number of usage events (such as a number of videos watched, number of web sites visited, number of URLs, number of songs, or number of transactions), percentage of service plan limit consumed, or cost of service consumed) by the device; an indication of the amount of service used by a user; an indication of the amount of service used by a device group; an indication of the amount of service used by a user group; an indication of the amount of service usage allowance remaining for a device, a service usage activity (e.g., an application, a network destination, or a service type) or a device group.","In some embodiments, the user notification that is initiated by the notification trigger event (e.g., and subsequent receipt of the notification trigger index or notification trigger message) includes, one or more of the following: a notification that a service usage activity may cause a service usage overage; a notification that a service usage activity may cause a service usage overage, with a user option to continue the activity or discontinue the activity; a notification that a service usage activity may cause a service usage overage, with a user option to continue the activity or discontinue the activity, and a user acknowledgement if the user elects to continue the activity; a notification of which service usage activities are contributing to, or contributing most significantly to, service usage; a notification of which service usage activities are contributing to, or contributing most significantly to, service usage, where the service usages are classified by application, network destination or service type; a notification of which service usage activities are contributing to, or contributing most significantly to, a potential service usage overage or a potential service usage overage; an indication of the amount of service used by a service usage activity on the device or by a group of service usage activities on the device; an overage notification of a service usage overage based on the service policy, in which the overage notification includes an indication that the service usage overage is being billed to a service account associated with the communications device or a user of the communications device; an indication of the amount of service used by a group of devices or users.","In some embodiments, the user notification that is initiated by the notification trigger event (e.g., and subsequent receipt of the notification trigger index or notification trigger message) includes, one or more of the following: an indication of the amount of service used by a service usage activity or group of service usage activities common to a group of devices or users; an indication of the amount of service usage consumed by a different device than the device the notification is displayed on; an indication of the amount of service usage consumed by a different device than the device the notification is displayed on where the different device is a member of the device group (e.g., family plan group or corporate group) that the notification display device also belongs to; an overage notification of a service usage overage based on the service policy, in which the overage notification includes an indication that the service usage overage is being billed to a multi-user service account associated with the communications device, in which the multi-user service account includes an enterprise account or a family plan account for a plurality of users; an overage notification of a service usage overage based on the service policy, in which the overage notification includes an indication that the service usage overage is being billed to a service account associated with the communications device or a user of the communications device, and in which the processor of the communications device is further configured to request an acknowledgement of the notification and report the acknowledgement to a network device; a notification to one device in a device group (e.g., a family plan or enterprise user plan) that provides usage breakdown for one or more other devices in the device group; a notification to one device in a device group that provides options to control or modify access policies, performance or limits for one or more service usage activities for the device group or for a subset of the devices in the device group.","In some embodiments, the user notification that is initiated by the notification trigger event (e.g., and subsequent receipt of the notification trigger index or notification trigger message) includes, one or more of the following: a notification that a service usage activity, service plan or service capability was added, updated, upgraded, or changed on the device; a notification that a service usage policy was changed on the device; a notification message providing a user offer to purchase a service plan or other transaction based on a programmable notification trigger event detection criteria (e.g., a pattern of one or more applications and\/or network destinations being accessed by the user, an access to a particular network, or access to a network with a particular device geographic location).","In some embodiments, the user notification that is initiated by the notification trigger event (e.g., and subsequent receipt of the notification trigger index or notification trigger message) includes, one or more of the following: a notification message providing a user with the available roaming networks that can be automatically joined; a notification message providing a user with the available roaming networks and their associated usage fees; a notification message providing a user with the available roaming networks and their associated performance, service plan policies, or service policy allowances; a notification message providing a user with the estimated roaming service usage amount; a notification message providing a user with the estimated roaming service usage cost; a notification message providing a user with the estimated roaming service usage velocity or rate of cost accumulation; a notification message providing a user with the estimated roaming service usage amount or cost given current or historical usage behavior; a notification message warning a user that a service usage activity that has been selected may or will result in a high rate of roaming service usage or a high rate of service usage cost accumulation; a notification message warning a user that a roaming service usage activity has been initiated or attempted that has a typical or average service usage velocity or service cost accumulation that is higher than a user specified or a service design administrator specified roaming service usage velocity or cost accumulation limit; a notification message warning a user that a roaming service usage activity has been initiated or attempted that has a typical or average service usage velocity or service cost accumulation that is higher than a user specified or a service design administrator specified roaming service usage velocity or cost accumulation limit, and a user option to discontinue or continue the service usage activity; a notification message provided to one device user regarding the roaming usage behavior of another device or another device user; the aggregate roaming service usage for a device group or a user group.","In some embodiments, the user notification that is initiated by the notification trigger event (e.g., and subsequent receipt of the notification trigger index or notification trigger message) includes, one or more of the following: a notification informing a device user of the present service level that is selected or available but not selected for streaming audio or video services (e.g., available bit rates for audio or video, or audio or video resolutions); a notification message providing a device user with a list of typical, expected, average or actual service activity usage events or usage units that a service plan or service policy set usage limit will provide (e.g., typical number web page downloads or minutes\/hours, number of social networking pages or minutes\/hours, number of voice calls or minutes\/hours at one or more audio quality levels or resolutions, number of video calls or minutes\/hours at one or more video quality levels or resolutions, number of streaming audio clips or songs or minutes\/hours at one or more audio quality levels, number of video clips or minutes\/hours at one or more video quality levels or resolutions, number of email text messages or downloads, number of file downloads, number of games played or gaming minutes\/hours, number of books downloaded, number of songs played or downloaded, number of news report or magazine deliveries or hours\/minutes, number of web site page downloads or minutes\/hours, or number of application usages or hours\/minutes).","In some embodiments, the user notification that is initiated by the notification trigger event (e.g., and subsequent receipt of the notification trigger index or notification trigger message) includes, one or more of the following: a notification message providing a user with one or more of: network connection status, network connection throughput (e.g., bit rate and\/or packet rate measured at the PPP layer, IP layer, or stream layer), network connection throughput variability, network connection bit error rate or packet error rate, network connection success vs. connection attempt (e.g., percentage of successes, or counts of attempts and successes), or another measure of network connection performance; a notification message requesting permission from the user to upload to the network, access network connection performance history information; a notification message sequence in which the user is provided with the result of an analysis of wireless connection performance, quality or status history information, possibly with recommendations on how to resolve an access service issue; a notification message providing a user with one or more of: network connection signal strength, network connection signal to noise ratio, raw modem bit rate, modem bit error rate, modem channel, base station or base station sector, network busy state or network congestion state, or another measure of wireless connection performance, wireless connection quality, or wireless connection status; a notification message requesting permission from the user to upload to the network, wireless connection performance, or quality or status history information; a notification message sequence in which the user is provided with the result of an analysis of wireless connection performance, quality or status history information, possibly with recommendations on how to resolve an access service issue.","In some embodiments, the processor of the communications device is further configured to: detect that multiple wireless networks are available for wireless communication for network service usage (e.g., 2G, 3G, 4G, Wi-Fi, and\/or other types of wireless network access); and generate a user notification including multi-network service plan options (e.g., service plan options and\/or differentiated notification policy settings for 2G, 3G, 4G, Wi-Fi, and\/or other types of wireless network access).","In some embodiments, the processor of the communications device is further configured to: detect when the communications device is connected to a roaming network; and generate a roaming cost notification including roaming cost information for roaming service usage on the roaming network. In some embodiments, the processor of the communications device is further configured to: detect when the communications device enters and leaves a roaming network; and generate both roaming cost notification based on service usage on a roaming network as well as cost notification associated for when communication device uses services within network so that at all times the device user\/owner is aware of the total cost where the cost is a function of the roaming network where the device is currently roaming. In some embodiments, the processor of the communications device is further configured to: generate a cost notification that includes a roaming cost notification including roaming cost information for roaming service usage on the roaming network and an in-network cost notification including in-network cost information for service usage on one or more networks that are in-network for a service plan associated with the communications device. In some embodiments, a communications device can roam across various networks in different international regions (e.g., CDMA, GSM, GPRS, EDGE, HSPA, and LTE roaming capabilities). In some embodiments, a roaming service usage measure is displayed while a communications device is in a roaming mode. In some embodiments, the roaming service usage measure indicates a data usage measure (e.g., the roaming service usage measure can display data usage in kilobytes (KBs), for example, an international meter\/gauge, and the non-roaming\/in plan service usage measure can display data usage in megabytes (MBs), for example, a domestic usage meter\/gauge). In some embodiments, a pay for service usage measure is displayed along with a cost of service usage while a communications device is in a roaming mode that is in a pay for service roaming service mode (e.g., is not within a covered service plan under a roaming service plan). In some embodiments, a differentiated notification policy is provided, in which, for example, the user notification is adapted or customized to provide user notifications based on a service plan, service component, and\/or service activity associated with the device. For example, different UI notification triggers and message sequences can be provided for different services. As another example, different gauges or meters can be provided for different services. In some embodiments, thresholds and alerts are different and\/or can be configured differently for in plan, roaming, and\/or pay for service network service usage. In some embodiments, a service usage measure is a hyperlinked widget that when selected by a user connects to a service plan options portal or web page or other application that allows a user to view the current service plan and select changes, options, and\/or upgrades or new service plans.","In some embodiments, a service usage measure and a service plan are associated with a subscriber identity module (SIM), and the SIM can be swapped into another communications device (e.g., into another smart phone or other cellular phone and\/or a USB dongle for cellular access via, for example, a laptop or net book) for network service usage under the service plan. In some embodiments, the network based service usage continues to be tracked and associated with the network service usage measure and service plan. In some embodiments, a usage measure (e.g., a usage measure can be based on device assisted service usage monitoring), a device assisted usage measure that is maintained (e.g., stored or cached) on a SIM card and the usage measure is used for updating, synchronizing, and\/or initializing device service usage gauge or other UI notifications. In some embodiments, a device-based service-usage measure, a network-based service-usage measure, or a combination of both (e.g., a synchronized device\/network based usage measure) updates a service usage measure stored on a SIM card. In some embodiments, the SIM card can be replaced with a variety of storage media (e.g., secured media or not secured) that can be moved from device to device. For example, when a user is using a first device, device service usage UI (e.g., a service usage gauge or meter) can be synchronized with an overall service usage measure storage source (e.g., a network element, a SIM, and\/or another source). When the user then uses another device, the device service usage UI can first be initialized with the overall service usage storage measure, and the latest usage information can be stored on SIM card so that user can look it up. In some embodiments, SIM card storage is accessed from the network to update usage. In some embodiments, a service usage measure is obtained from the network (e.g., a network element\/function, such as a service controller), and the service usage measure is then updated\/stored on the SIM card in the device. In some embodiments, a service usage measure is obtained from a SIM card and communicated to the network (e.g., a network element\/function, such as a service controller). In some embodiments, a device-based service-usage measure is stored on the SIM card in the device (e.g., the SIM card storage is accessed to load the current\/latest usage and updated with the device based usage measure). In some embodiments, a UI program (e.g., that can be downloaded to the device in one or multiple versions for multiple types of OS and\/or devices) downloads usage information and stores the usage information on the SIM card. In some embodiments, SIM service usage information storage is stored in a standardized format (e.g., across SIM cards\/media, devices, device OS platforms, and\/or carriers). In some embodiments, multiple types of usage information are stored on the SIM card (e.g., including multiple plans and\/or multiple plans including with and without separated tethered plans, multiple networks and\/or multiple networks including roaming networks, multiple devices, and\/or multiple users, such as a family plan, an enterprise plan, or a group plan). In some embodiments, device group information is stored on the SIM card. In some embodiments, the service processor is stored on the SIM (e.g., SIM card) so that it can load into and run on multiple devices it is installed into. In some embodiments, the service processor is executed on the SIM so that it can run on multiple devices the SIM is installed into. In some embodiments, a portion of the service processor is executed on the SIM, and a portion of the service processor is stored on the SIM that is then loaded onto the device so that the service processor can run on multiple devices the SIM is installed into. In some embodiments, a service usage measure and a service plan are associated with a mobile directory number (MDN). In some embodiments, a service usage measure and a service plan are associated with a mobile directory number (MDN), and a user can change MDNs to get a new MDN, and the service usage measure and service plan can be associated with the new MDN.","In some embodiments, a monitored network service usage activity includes a tethered network service usage activity (e.g., network service usage activity via a tethered connection, such as tethering a laptop to a mobile\/smart phone for cellular access over a 3G\/4G or other cellular network in which the laptop is communicating to the mobile\/smart phone through some wireless or wired communication link to access the mobile\/smart phone's modem for cellular access), and the tethered network service usage activity counts towards a tethered network service usage count and associated with a tethered network service plan. In some embodiments, a user notification is based on the tethered network service usage count and the tethered network service plan. In some embodiments, tethered network service usage activity counts towards a user's service plan data allowance (e.g., tethered usage and non-tethered usage from the communications device will accrue service usage counts from the same data allowance of the service plan associated with the communications device and\/or, for example, associated with the SIM inserted in the communications device).","Secure Device Data Records","In some embodiments, secure device data records (DDRs) are provided. In some embodiments, secure DDRs for device-assisted services are provided. In some embodiments, secure DDRs for device-assisted services are provided for service usage monitoring of a wireless communication device (e.g., firmware based monitoring of network service usage, such as based on a 5-tuple of a source address, port address, destination address, destination port, and protocol). In some embodiments, secure DDRs for device-assisted services are provided for service usage monitoring of a wireless connection and other input\/output (I\/O) connections or ports of a wireless communication device (e.g., firmware-based monitoring of network service usage, such as based on a 5-tuple of a source address, port address, destination address, destination port, and protocol). In some embodiments, a system for secure DDRs includes a processor of a wireless communication device for wireless communication with a wireless network, in which the processor is configured with a secure execution environment, and in which the secure execution environment is configured to: monitor service usage of the wireless communication device with the wireless network; and generate a plurality of device data records of the monitored service usage of the wireless communication device with the wireless network, in which each device data record is associated with a unique sequence order identifier; and a memory coupled to the processor and configured to provide the processor with instructions. In some embodiments, a system for secure DDRs includes a processor of a wireless communication device for wireless communication with a wireless network, in which the processor is configured with a secure execution environment, the secure execution environment configured to: monitor service usage of the wireless communication device with one or more of the networks and I\/O connections for the device including but not limited to a wide area wireless network (e.g., 2G, 3G, 4G, etc.), a Wi-Fi network or connection, a USB network or connection, an Ethernet network or connection, a FireWire connection, a Bluetooth connection, a near field communication (NFC) connection or another I\/O connection or port; and generate a plurality of device data records of the monitored service usage of the wireless communication device with the wireless network, in which each device data record is associated with a unique sequence order identifier; and a memory coupled to the processor and configured to provide the processor with instructions. In some embodiments, the secure execution environment including the secure DDR processor is located in an application processor, in a modem processor, and\/or in a subscriber identity module (SIM).","In many of the disclosed embodiments, a secure device data record processing system acts on communications that flow over a wide area wireless network connection to the device (e.g., a 2G, 3G, or 4G connection) or a wide area wireless modem (e.g., a 2G, 3G, or 4G modem). As would be understood by one of ordinary skill in the art, the secure device data record processing system can also act on communications that flow over one or more additional I\/O networks, connections, ports or modems (e.g., a Wi-Fi network, connection, port, or modem; a USB network, connection, port, or modem; an Ethernet network, connection, port, or modem; a FireWire network, connection, port, or modem; a Bluetooth network, connection, port, or modem; a near field communication (NFC) network, connection, port, or modem; or another I\/O connection, port, or modem).","Advanced Wireless Service Platform (AWSP)","In some embodiments, an Advanced Wireless Service Platform (AWSP) is provided. In some embodiments, AWSP provides an enhanced networking technology platform that supports existing services and also provides for various new Internet and data service capabilities for wireless networks (e.g., 4G, 3G, and\/or 2G networks), as described herein with respect to various embodiments. In some embodiments, wireless devices, processor(s), firmware (e.g., DDR firmware, as described herein with respect to various embodiments), and software provide an enhanced role in wireless network service policies for charging, access control and service notification to implement AWSP, as described herein with respect to various embodiments.","In some embodiments, AWSP supports a wide range of services, devices, and applications for consumer, enterprise, and machine to machine markets, as described herein with respect to various embodiments. In some embodiments, AWSP supports various device types, including the following: 4G and 3G smart phones, 4G and 3G feature phones, 4G and 3G USB dongles and cards, 4G-to-Wi-Fi and 3G-to-Wi-Fi bridge devices, 4G and 3G notebook and netbook computing devices, 4G and 3G slate computing devices, 4G and 3G consumer electronics devices (e.g., cameras, personal navigation devices, music players, and home power meters), and machine to machine devices (e.g., various types of consumer and industrial devices with minimal user interface (UI) capabilities such as geo-location tracking devices, parking meters, and vending machines).","In some embodiments, AWSP includes a device data record (DDR) processor. In some embodiments, the DDR processor includes firmware that is integrated into a secure hardware execution environment within an AWSP compliant processor (e.g., a processor or set of processors that are compatible with, support, approved for and\/or certified for AWSP, such as through a wireless carrier AWSP chipset certification program). In some embodiments, the AWSP compliant processor is certified to qualify the processor for proper services delivery over AWSP, as described herein with respect to various embodiments.","In some embodiments, the DDR processor is implemented within secure firmware embedded in either an applications processor unit (APU) or a modem processor unit (MPU). In some embodiments, the DDR processor is provided as part of the device firmware build installed by an OEM at time of manufacture. In some embodiments, the DDR processor monitors incoming and outgoing IP packets and gathers various statistics (e.g., Device Data Records (DDRs)). In some embodiments, a DDR is, in part, a record of the amount of data transmitted or service usage consumed along an IP flow. In some embodiments, an IP flow is specified by a source address, a destination address, a source port, a destination port, and a protocol type. In some embodiments, the secure device data record can also accompany the corresponding layer-7 classification information (e.g., domain names, application identifier, HTTP information, associative classification, and\/or other information as described herein) with an IP flow (e.g., source address, port address, destination address, destination port, and protocol) received from the service processor. In some embodiments, DDRs also include other types of classification for network service usage, as described herein with respect to various embodiments. In some embodiments, DDRs also include various statistics related to or based on network service usage, as described herein with respect to various embodiments. In some embodiments, DDRs are used in 2G, 3G, and 4G wireless networks in both home and roaming network conditions for various service usage accounting, access control, and service policy enforcement verification functions, as described herein with respect to various embodiments.",{"@attributes":{"id":"p-0848","num":"0847"},"figref":["FIG. 113","FIG. 113"]},"In some embodiments, a wireless communication device includes a DDR processor  in a secure execution environment. In some embodiments, the DDR processor  includes a DDR generator function (e.g., a function for generating secure DDRs, which can be reported to another element\/function in the device and\/or to a network element\/function, such as a service controller ) as described herein with respect to various embodiments. Various architectures are provided for implementing the DDR processor in a secure execution environment.","Device architecture  includes the DDR processor  in a zone of data path security A (e.g., located in an application\/general processor unit (APU)) as shown. Application programs  are monitored (e.g., service usage based monitoring) using a service processor application program . Kernel programs  are monitored using a service processor kernel program . An operating system (OS)  resides above a network stack  for network access, which is monitored by the DDR processor  for any network access through a modem bus driver and physical bus . As shown, 3G or 4G wireless network access is provided through a 3G or 4G modem  to a 3G or 4G networks , respectively. This device architecture and similar device architectures are described herein in more detail below.","Device architecture  includes the DDR processor  in a zone of data path security B (e.g., located in a modem processor unit (MPU)) as shown. Device architecture  is similar to device architecture  except that in device architecture  the zone of data path security B is located in 3G or 4G modem . Network communication via the modem  through modem bus driver and physical bus  and modem I\/O  is monitored using the DDR processor  for any network access through a modem data path and signal processing . This device architecture and similar device architectures are described herein in more detail below.","Device architecture  includes the DDR processor  in a zone of data path security A (e.g., located in an APU or another processor\/memory, such as a SIM card)) as shown. Device architecture  is similar to device architecture  except that in device architecture  the APU's modem bus driver and physical bus does not need to be in a secure zone and instead a data path security verifier  is included in the zone of data path security C in the MPU to restrict network access to only traffic that has been monitored by the DDR processor  within APU. This device architecture and similar device architectures are described herein in more detail below.","Device architecture A includes the DDR processor  in a zone of data path security E (e.g., located SIM ) as shown. Device architecture A is similar to device architectures  and , except that in device architecture A, as in device architecture , there are two zones of data path security. Zone of data path security D is located in 3G or 4G modem , and zone of data path security E is located on SIM . In device architecture A, modem bus driver and physical bus  does not need to be in a secure zone, and instead data path security verifier  is included in zone of data path security D in the MPU to restrict network access to only traffic that has been monitored by the DDR processor  within SIM . This device architecture and similar device architectures are described herein in more detail below. Device architecture A enables a carrier to have complete control of the DDR processor functionalities, because the SIM considered in the industry to be a \u201ccarrier-owned\u201d entity on the device.","As would be appreciated by a person having ordinary skill in the art, DDR processor  may be embedded in a secure zone of any other functional processor with a companion MPU to enforce network access. Such functional processors in which DDR processor  may be embedded include, for example, video processors, audio processors, display processors, location (e.g., GPS) processors, and other special-purpose processors as well as general-purpose processors such as digital signal processors (DSPs), microprocessors, etc.","In some embodiments, a service controller  is provided as shown. In some embodiments, service controller  is provided as an AWSP network server cloud system. In some embodiments, service controller  is provided as an AWSP network server cloud system that is used to perform one or more of the following: collect device service usage reports; manage certain aspects of device based network service policy; ascertain the Network Busy State (NBS) for various base stations on the network (e.g., wireless network(s)); manage the user notification and service plan selection UI processes configured on the device(s) (e.g., wireless communication device(s)); and manage certain aspects of service fraud detection. In some embodiments, the service controller  includes a secure DDR processing, usage reconciliation, and fraud detection function  as shown. In some embodiments, the service controller  communicates monitored service usage (e.g., reconciled service usage based on processed and reconciled secure DDRs) to network service usage reporting systems . In some embodiments, the reported service usage is aggregated and communicated to network billing systems  (e.g., for billing for the reported service usage).","In some embodiments, the service controller  communicates with various device-based elements of the AWSP system. In some embodiments, the service controller  communicates with various device-based elements of the AWSP system, including the following: the DDR processor  and a service processor . In some embodiments, the service processor  includes an application service processor  (e.g., an application space or framework space program) and a kernel service processor  (e.g., a kernel space or driver space program). In some embodiments, the application service processor  and the kernel service processor  execute or perform in an OS partition on an application processor unit (APU) of a device (e.g., a wireless communication device). In some embodiments, the service processor is not generally in a secure execution area.","In some embodiments, the service processor performs various functions for the carrier network including collecting Network Busy State (NBS) information, service usage classification and reporting, certain network service policy enforcement functions, and\/or certain user notification functions and roaming access policy enforcement functions, as described herein with respect to various embodiments. In some embodiments, the service processor also logs and reports device service usage information that assists a carrier (e.g., a service provider for a wireless network service or other services) in determining how to provide users with optimized services, information, and\/or content.","In some embodiments, the DDR processor  communicates DDRs to the service controller . In some embodiments, the DDR processor  communicates DDRs to the service controller  via the Internet, a carrier network, and\/or other network. In some embodiments, the DDR processor  does not send DDRs directly to the service controller , but instead the DDR processor  forwards the DDRs to the service processor. The service processor then forwards or relays the DDRs to the service controller  and, in some embodiments, along with additional service usage reports and\/or other service policy management and user notification communications generated by or received by the service processor.","For example, the APU OS execution environment is generally not considered secure or trusted even though the service processor can be protected by the OS and\/or other security elements within the system. In addition, the network data path between the DDR processor  to the service processor is generally not considered to be secure or trusted and neither is the data path between the service processor and the service controller . Accordingly, in some embodiments, the DDR processor  and the service controller  use cryptographic techniques to provide a secure link from the DDR processor  to the service controller . In some embodiments, the DDR processor  is considered secure and trusted based on various implementations and techniques as described herein with respect to various embodiments. In some embodiments, various techniques for securing the service usage monitoring and control performed by the DDR processor  on a network data path, and securing the DDR reporting channel from the DDR processor  to the service controller  are described herein with respect to various embodiments.","In some embodiments, a secure access controller function within the DDR processor  is employed as described below to ensure that if the DDR flow is tampered with or blocked, then the device network access data path connection managed by the DDR processor  is restricted to only those network destinations required to manage the DDR processor  communication with the service controller . In some embodiments, the access controller function within the DDR processor  receives feedback from the service controller  to restrict access or allow full access. For example, the restricted access list (e.g., a list of host names, IP addresses, and\/or other identifiers for an access list) can either be pre-provisioned within the DDR processor SEE or configured through the secure path as described in more detail herein.","In some embodiments, a secure, reliable, and trusted transmission of DDRs from the DDR processor  is provided by DDR reporting techniques, including the following: (1) the DDR processor firmware is securely loaded and executed in a Secure Execution Environment (SEE); (2) the data path between the DDR processor to the wireless modem antenna connection (e.g., a 3G or 4G network modem antenna connection) is secured to prevent fraudulent software or firmware from forming data paths that circumvent the DDR processor data path processing; (3) the DDRs transmitted from the DDR processor  to the service controller  are integrity checked in a manner that protects them from being tampered with or replayed; and (4) an authentication process between the DDR processor  and the service controller  combined with a set of unique DDR report sequence identifiers and authentication session keep alive timers are used to maintain and verify the secure connection between the DDR processor  and the service controller . For example, if the secure session or the flow of DDR records between the DDR processor  and the service controller  are interrupted, then the secure access control function in the DDR processor  can restrict access to the modem data path to the network destinations necessary to re-establish a securely authenticated session between the DDR processor  and the service controller .","In some embodiments, the DDR processor  also includes a secure network busy state monitor function (e.g., NBS monitor) as similarly described herein with respect to various embodiments. In some embodiments, the NBS monitor logs and reports various network and modem performance parameters and also computes and reports a measure of network congestion referred to herein as the network busy state (NBS). In some embodiments, the NBS is a measure that indicates the level of network congestion at a give base station sector over a given measurement time interval. In some embodiments, all of this information is included in a network busy state report (NBSR) that is part of the DDR message reports sent to the service controller  via the service processor .","In some embodiments, embedding the DDR processor in an Application Processor Unit (APU) (e.g., smart phone APU or other wireless communication device APU) provides a single secure DDR processor location in the wireless network data path (e.g., 2G\/3G\/4G wireless network data path or other device I\/O connection or port) that provides for service usage monitoring and access control for multiple wireless modems. Also, the APU implementation approach can allow APU chipset suppliers who may not necessarily have WAN modem components or technology to implement solutions compliant with the various AWSP techniques described herein. Further, the APU implementation approach generally more easily allows for OTA and OTN firmware updates for APU implementations as described herein (e.g., which can be more complicated to provide in certain MPU implementations). Many disclosed embodiments describe DDR APU implementations where the DDR acts on communications flows through one or more wide area network networks, connections, or modems. As would be appreciated by one of ordinary skill in the art, the APU embodiments for a secure device data record processing system can also act on communications that flow over one or more additional I\/O networks, connections, ports, or modems (e.g., a Wi-Fi network, connection, port, or modem; a USB network, connection, port, or modem; an Ethernet network, connection, port, or modem; a FireWire network, connection, port, or modem; a Bluetooth network, connection, port, or modem; a near field communication (NFC) network, connection, port, or modem; or another I\/O connection, port, or modem).","Referring to device architecture  as shown in , the DDR processor is embedded into the APU chipset SEE and nonvolatile memory as similarly described above. Along with the DDR processor SEE, the secure data path environment, shown as the Zone of Data Path Security A, includes the DDR processor  and the modem bus driver and physical bus . For example, provided that the modem bus driver and the physical bus to the modem are secured against (e.g., or otherwise inaccessible to) fraudulent software or firmware attempting to circumvent the DDR processor , the modem itself (e.g., 3G modem or 4G modem ) need not be secured. In particular, the DDR processor  is securely implemented on the 2G, 3G or 4G modem data path directly below the modem driver data path processing function and above the modem bus driver data path processing function (e.g., typically USB driver, SDIO driver or similar bus driver function). In some embodiments, the entire data path below the DDR processor  through the modem bus driver and through the 2G, 3G or 4G modem is secured to prevent data paths that circumvent the DDR processor data path processing. In some embodiments, all information communicated from the device over device network connection or I\/O port via the data path processing function (e.g., typically a USB driver, an SDIO driver, an Ethernet driver, a FireWire driver, a Wi-Fi driver, a Bluetooth driver, or a near field communication driver) is observed (and possibly processed to apply policy), classified, or reported on as it passes through the DDR processor block. Accordingly, in some embodiments, the modem bus driver is either secured in the DDR SEE or in its own SEE, or the modem bus driver code and data path must be inaccessible to software or firmware on the APU that could circumvent the DDR processor .","In some embodiments, the DDR processor and USB driver execute in a secure environment on the application processor chipset, such as DDR secure execution memory. In some embodiments, the secure environment ensures no unauthorized ability to replace or modify the DDR processor code or modem bus driver\/controller code (e.g., a USB driver\/controller or another device I\/O driver\/controller, such as a 2G\/3G\/4G modem driver\/controller, an SDIO driver\/controller, an Ethernet driver\/controller, a FireWire driver\/controller, a Wi-Fi driver\/controller, a Bluetooth driver\/controller, or a near field communication driver\/controller). In some embodiments, the secure environment also ensures that the data path from the DDR processor to the physical modem bus driver (e.g., USB port, Ethernet port, FireWire port, Wi-Fi port, Bluetooth port, NFC port, or another I\/O bus port) is isolated from firmware outside the secure environment. That is, no firmware outside the secure environment has the ability to affect the accurate gathering of statistics by the DDR processor. In some embodiments, the secure environment further ensures that there is no ability for code other than the DDR processor to access sensitive crypto storage, such as keys. For example, this can include shielding sensitive storage from debug monitors and\/or other monitoring\/access activities or techniques. As would also be apparent to one of ordinary skill in the art, APU firmware, not just the DDR processor, must be secured and not include bugs or vulnerabilities that can be exploited to allow for unauthorized access. For example, a common attack is buffer overflow, in which an attacker chooses inputs that cause an unchecked buffer to exceed its bounds, resulting in unintended behavior that the attacker can exploit.","There are various examples of APU chipset SEE Implementation techniques that can be used to meet these requirements as described above. For example, a conventional CPU with upgradeable firmware (e.g., including the DDR processor) can be provided. The firmware can be stored in nonvolatile (NV) memory, or can be stored in flash memory in which the flash memory can be reprogrammed\/updated with new or upgraded firmware. The firmware can be installed at time of manufacture and by design provides a compliant secure environment. Rigorous quality-assurance testing is required to ensure that bugs are unlikely to provide a means for compromising the secure environment. A new firmware image can be accepted for installation only if it has a valid digital signature. Version control checking can be included to prevent rollback to older versions. The firmware that validates the signature and version resides in firmware that can also be upgradeable. As another example, a security partitioned CPU can be provided, such as an ARM Trustzone or Intel Smart & Secure (e.g., or another suitable substitute including potentially supplier custom security environment CPU partitioning techniques). The DDR processor, modem bus driver (e.g., a USB driver\/controller or another device I\/O driver\/controller such as a 2G\/3G\/4G modem driver\/controller, an SDIO driver\/controller, an Ethernet driver\/controller, a FireWire driver\/controller, a Wi-Fi driver\/controller, a Bluetooth driver\/controller, or a near field communication driver\/controller), and any intervening code can execute in the secure partition, such as Trustzone's (e.g., or Smart & Secure's) secure mode. A secure boot procedure enforces the requirement that the DDR processor, modem bus driver (e.g., a USB driver\/controller or another device I\/O driver\/controller such as a 2G\/3G\/4G modem driver\/controller, an SDIO driver\/controller, an Ethernet driver\/controller, a FireWire driver\/controller, a Wi-Fi driver\/controller, a Bluetooth driver\/controller, or a near field communication driver\/controller), and intervening code can be included in a digitally signed, version-controlled code image. In such approaches, hardware firewalls can shield sensitive crypto storage from normal mode firmware. Also, the hardware firewalls ensure that normal mode firmware cannot tamper with the data path between the DDR processor and the physical modem bus driver (e.g., USB port), thus, preventing interference with the gathering of service usage measure data and\/or statistics as described herein.","In some embodiments, in an MPU implementation, the DDR processor resides in the modem processor with other secure modem data path processing code and hardware functions. For example, in an MPU-based secure DDR processor implementation, once the data path below the modem bus driver interface is secured, it is relatively difficult to hack the device to create a data path that reaches the network by circumventing the DDR processor. Also, for some MPU chipset families, it can be more straightforward to implement a secure execution environment, secure boot loader, and secure nonvolatile memory as compared to implementing the same functions in some APU families that do not have standard hardware security partition features, such as ARM Trust Zone and Intel Smart & Secure. Further, an MPU implementation can have less interaction with the OS kernel builds than in the case of an APU implementation. In some embodiments with an MPU implementation, DDR processor  resides in a wireless wide area network modem such as a 2G, 3G or 4G modem, or in a local area or personal area modem such as a USB modem, an Ethernet modem, a FireWire modem, a Wi-Fi modem, a Bluetooth modem, an NFC modem, or another I\/O modem. Many of the described embodiments are for MPU implementations with wireless wide area network modem, but, as would be appreciated by one of ordinary skill in the art, other variations involving other I\/O device modems are possible without departing from the scope of the disclosure.",{"@attributes":{"id":"p-0868","num":"0867"},"figref":["FIG. 76","FIG. 76","FIG. 76","FIG. 76","FIG. 76"],"b":["1240","1244","1264","1242","1240","1244","1244","1244","1236","1244","1264","1244","1236","1244"]},"In some embodiments, using secure execution environment partitioning technology, large portions or the entire service processor functionality are implemented in hardware secured execution environments in the APU or MPU. In some embodiments, using secure CPU partitioning technology, large portions or the entire service processor functionality are implemented in hardware secured execution environments in the APU or MPU. As an example embodiment, service processor functions that can be executed within a secure execution environment include policy enforcement actions in accordance with a set of policy instructions stored in the secure execution environment such as: managing policy for one or more of 2G, 3G or 4G network (and\/or other I\/O ports such as Ethernet, Wi-Fi, USB, FireWire, Bluetooth, or NFC), wherein the policy management can include application access management, application traffic processing, application access monitoring and reporting, or application access service accounting and reporting. As another example embodiment, secure service processor element functions that can be executed within a secure execution environment include managing policy for one or more applications wherein the policy specifies whether to block, allow, or throttle the applications in accordance with a set of policy instructions stored in the secure execution environment. As another example embodiment, secure service processor element functions that can be executed within a secure execution environment include managing policy for one or more applications wherein the policy includes application activity monitoring and reporting or operating environment monitoring and reporting (e.g., monitoring the security status or presence of malware in the device operating environment). As another example embodiment, secure service processor element functions that can be executed within a secure execution environment include managing policy for one or more network destinations or resources that can include websites, domains, URLs, IP and\/or TCP addresses, server names, other devices, or content sources, wherein the policy includes access management, traffic control, access monitoring or access service accounting. As another example embodiment, secure service processor element functions that can be executed within a secure execution environment include managing policy for one or more roaming access networks. As another example embodiment, secure service processor element functions that can be executed within a secure execution environment include monitoring and reporting communication activity on one or more device I\/O connections including one or more of a 2G, 3G, 4G and\/or other I\/O port. In some embodiments, secure service processor element functions that can be executed within a secure execution environment include monitoring, classifying (e.g., identifying application and\/or network destination associated with the I\/O port activity) and reporting communication activity on one or more device I\/O connections, including one or more of a 2G, 3G, 4G and\/or other I\/O port. In some embodiments, a service controller located in the network provides the set of policy instructions stored in the secure execution environment by communicating them to the secure service processor element via a secure communication link as described herein. In some embodiments, these policy enforcement actions involving reporting can include sending the reports to a service controller located in the network via a secure communication link into the secure execution environment as described herein for further processing of the reports. In some embodiments, sending the reports to a service controller located in the network via a secure communication link into the secure execution environment can include the authenticated secure sequencing and receipt protocols described herein.","As another example embodiment, secure service processor element functions that can be executed within a secure execution environment can include one or more of: (i) a secure application manager that identifies traffic associated with a specific application or group of applications to differentially manage one or more of 2G, 3G and 4G application access policies (e.g., allow, block, throttle, defer for later transmission, apply a given QoS level) or service usage accounting (and\/or accounting for application access by one or more other I\/O ports, such as Ethernet, Wi-Fi, USB, FireWire, Bluetooth, or NFC), (ii) a secure application manager that identifies when an application is attempting to run and determines whether to permit the application to run or to not allow the application to run based on a set of application policies, (iii) a secure application manager that differentially manages 3G and 4G application access (and\/or application access or service usage accounting for one or more other I\/O ports) according to network access policy set by the service controller and network busy state determined on the device, and (iv) 3G and 4G network traffic that is classified and processed according to application identifier, layer 7 destination as well as layer 3\/4 destination and network busy state. In some embodiments, securing such service processor functions can be augmented by: (i) configuring the secure execution environment with the various operating environment techniques disclosed herein so that the service processor achieves a similar degree of protection from hacking and malware described for lower levels of stack processing (e.g., the DDR processor SEE embodiments described herein), (ii) protecting or securing the data path between the DDR processor (e.g., and\/or elements of the service processor) and the modem antenna connection from circumvention or tampering by device malware, and (iii) providing sufficient secure or protected memory and sufficient secure execution environment CPU cycles to execute the more sophisticated data path processing functions.","In some embodiments, a secure communication between a network-based service controller and a device-based secure service processor element operating in a secure execution environment on a device connected to a wide area access network is used for secure (or trusted) delivery of secure service processor element I\/O activity monitor records for one or more I\/O ports (e.g., an I\/O port including but not limited to 2G, 3G, 4G, Ethernet, Wi-Fi, USB, FireWire, Bluetooth, or NFC), wherein the secure communication includes a secure message receipt feedback loop. In some embodiments, if the secure message feedback loop is interrupted, a secure service processor element secure communication channel error condition is detected and acted on. In some embodiments, an ordered sequence of secure service processor element I\/O activity reports is communicated to a service controller using a signed or encrypted communication channel, and if the ordered sequence is interrupted or tampered with, a device secure service processor element secure communication channel error condition is detected and acted on. In some embodiments, the service controller observes the integrity of the ordered sequence of secure service processor element I\/O activity reports to determine if device data records have been tampered with or omitted. In some embodiments, if the secure service processor element determines that the I\/O activity monitor records have not been tampered with or omitted, the service controller sends back a signed or encrypted I\/O activity monitor record receipt message. In some embodiments, if the secure service processor element determines that an I\/O activity monitor record has been tampered with or omitted, the service controller sends back an error message or does not send back a signed or encrypted I\/O activity monitor record receipt message. In some embodiments, if the secure service processor element receives an error message from the service controller, or does not receive a signed or encrypted I\/O activity monitor record receipt message within a certain period of time or within a certain number of transmitted I\/O activity monitor records or within a certain amount of communication information processed, then (i) a device configuration error message is generated for delivery to a security administrator or server, and\/or (ii) one or more of the wireless network connections or other I\/O connections or ports of the wireless communication device are either blocked or restricted to a pre-determined set of safe destinations. In this manner, if a device secure service processor element, the device operating environment, device operating system, or device software is tampered with in a manner that produces wireless network or other I\/O port access service usage characteristics that are not compliant with expected policy or allowed policy, a device configuration error message can be generated, or device wireless network access or other I\/O connection accesses can be restricted or blocked. Such embodiments can be helpful in securing device-based network access (or I\/O control) policies and can also be helpful in identifying device software that has been tampered with or any malware that is present on the device. In some embodiments, the restriction on wireless network accesses or other I\/O accesses results in access to a limited number of network destinations or resources sufficient to allow further analysis or troubleshooting of the device configuration error condition.","Device Service Plans and Service Plan Bundles","To date, service providers have provided a limited variety of different service plans and service plan bundles (multiple service plan elements bundled together) to which a user of the mobile wireless communication device may subscribe. With the increasing proliferation of a broad spectrum of mobile wireless communication devices having diverse communication and processing capabilities, it may be desirable to provide methods for an increased array of service plans that may be easily accessed, reviewed, and selected by the subscriber of the mobile wireless communication device. In addition, customizable service plan bundles may be provided that permit the subscriber to select among a range of constituent service plan elements, thereby building their own custom service plan bundle that best fits their particular communication service requirements. Service plan bundles may be customized based on numerous different criteria, including but not limited to, service type (e.g., voice, messaging, data), applicable time period, geographic location, access network type, and application\/service specific content. In addition, promotional service plans, subsidized service plans, and special service plan bundles that include multiple constituent service plan elements may be offered to the subscriber to increase their exposure to featured service plans and service plan bundles. Through an easily navigable interface, e.g., using a flexible user interface of the mobile wireless communication device itself, or through access to a website\/portal interface, the subscriber may learn about, test out and subscribe to one or more service plans that include a combination of service plan elements best suited for the subscriber's own needs. In some embodiments, a user or administrator also reviews, subscribes, shares, assigns or otherwise manages service plans and service plan bundles for devices in a device group. In some embodiments, the user or administrator manages service plans and service plan bundles for devices in a device group through an interface of one of the devices, or through a separate system that can interface with a service management system in the wireless network.","A mobile wireless communication device may need to be associated with a service account in order to allow a user or owner of the mobile wireless communication device (herein referred to as a subscriber) to use the mobile wireless communication device to communicate over a particular wireless communication network in a manner that is meaningful to the subscriber (e.g., to access content or a service offered by a service provider). Moreover, the mobile wireless communication device may need to be associated with one or more service plans that allow it to access services offered by a service provider. A service plan may, in general, allow for a quantity of communication that may be permitted during a time period of communication (e.g., 100 MB of data per month, 24 hours of network access, 100 minutes of phone calls, etc.). Some examples of services that may be offered by a service provider include the non-mutually-exclusive categories of voice services (e.g., phone calls, etc.), messaging services (e.g., text messages, multimedia messages, etc.), data services (e.g., Internet access, etc.), and hybrid services (e.g., voice over IP (VOIP), video chat, etc.). A service provider may be an operator of a wireless communication network, or may be another entity, such as a mobile virtual network operator (MVNO), a retail partner, a mobile wireless communication device original equipment manufacturer (OEM), a mobile wireless communication device operating system (OS) provider or a third party service partner. There are many other examples of services, service plans, and service providers, and the examples provided herein are not intended to be limiting.","In some embodiments, a user of a mobile wireless communication device configures service plans and service plan bundles, including individual constituent service plan elements thereof, permissions associated therewith, and restrictions applied thereto through a flexible user interface of the mobile wireless communication device. In some embodiments, a user is presented a selection of content for service plans and service plan bundles through the user interface of the mobile wireless communication device. In some embodiments, service providers or third parties supply applications to the mobile wireless communication device through which service plan and service plan bundle selection, customization, and management are effected. In some embodiments, customization and selection of service plans and service plan bundles occurs through the user interface of the mobile wireless communication device. In some embodiments, service plan and service plan bundle customization and selection occurs through a web browser application on the mobile wireless communication device. In some embodiments, customization and selection of service plans and service plan bundles uses one or more specific applications provided by a service provider or by a third party and installed on the mobile wireless communication device. In some embodiments, service plan and service plan bundle customization and selection uses applications provided by an operating system for the mobile wireless communication device. In some embodiments, the user selects and customizes service plans and service plan bundles for one mobile wireless communication device through another mobile wireless communication device. In some embodiments, selection and customization of service plans and service plan bundles occurs through a web browser communicating with a server or a website or a web portal. In some embodiments, selection and customization of service plans and service plan bundles occurs through an application communicating with an application portal or server, e.g., an application on the mobile wireless communication device or an application on another computing system. In some embodiments, a server communicatively coupled to a wireless network provides information for service plan and service plan bundle selection and customization. In some embodiments, information displayed for service plan and service plan bundle selection and customization originates from storage in the mobile wireless communication device. In some embodiments, the user selects and customizes individual constituent service plan elements included within a service plan bundle. In some embodiments, the user selects and customizes features of a service plan, service plan element or service plan bundle.","In some embodiments, notification messages, e.g., marketing interceptors, provide service plan offers to a user of the mobile wireless communication device. In some embodiments, the notification messages are presented directly through the user interface of the mobile wireless communication device. In some embodiments, multiple service plan options are presented to the user of the mobile wireless communication device for service plan selection. In some embodiments, a set of service plan selection options (and\/or customization options) is presented in response to a user action. In some embodiments, the content of the set of service plan selection options depends on the particular action of the user. In some embodiments, the user interface provides for sharing, assigning and controlling permissions for service plans among multiple mobile wireless communication devices. In some embodiments, the user interface provides for managing service plans of devices in a device group. In some embodiments, the user interface provides for restricting usage of specific service plans that are assigned or shared with one or more devices in a device group.","In some embodiments, an offer for subscription to a service plan is presented through the user interface directly to the user of the mobile wireless communication device. In some embodiments, notification messages, e.g., \u201ctry this app,\u201d are presented to highlight an available service plan to the user of the mobile wireless communication device. In some embodiments, a service plan is offered by placing an overlay message (e.g., within a callout box). In some embodiments, marketing features of a service plan, e.g., sponsorship and\/or \u201cpaid for\u201d time periods, are presented to the user of the mobile wireless communication device. In some embodiments, one or more device agents resident in the mobile wireless communication device obtain indications or information related to available service plans from a network element, e.g., a server in a wireless network. In some embodiments, a flexible user interface presents offers to purchase service plans, including a \u201cbundle\u201d of service plan elements grouped together, e.g., voice, messaging, and data service plan elements offered as a service plan bundle. In some embodiments, a user can customize the selection of service plan elements to include in a service plan bundle.","In some embodiments, a selection of options for service plans and\/or service plan bundles is presented to a user of the mobile wireless communication device through a flexible user interface, and the user of the mobile wireless communication device selects one or more service plans or service plan bundles through the flexible user interface, e.g., Plan A, B or C, or Service Plan Bundle X, Y or Z. In some embodiments, a selection of options for individual service plan elements to include in a service plan bundle is presented to a user of the mobile wireless communication device through a flexible user interface, and the user of the mobile wireless communication device selects a set of service plan elements to build a customized service plan bundle. In some embodiments, a rotating \u201ccarousel\u201d of service plan bundles is presented to the user of the mobile wireless communication device, and the user selects from the \u201ccarousel\u201d a service plan bundle through the user interface. In some embodiments, the user cycles through the selection options by interacting with the user interface, e.g., through a touch screen, of the mobile wireless communication device. In some embodiments, multiple rotating \u201ccarousels\u201d of service plan elements are presented to the user of the mobile wireless communication device, and the user selects individual service plan elements from each of the \u201ccarousels\u201d to build a customized service plan bundle. In some embodiments, selection and customization occurs through an application on the mobile wireless communication device, e.g., connected to an application portal. In some embodiments, selection and customization occurs through a web browser, e.g. connected to a website. In some embodiments, selection options for service plans, service plan elements, and service plan bundles are stored in the mobile wireless communication device. In some embodiments, the selection options are provided through a communication link to a server communicatively coupled to the wireless network. In some embodiments, the selection options are partially stored in the mobile wireless communication device and partially obtained from a server in the wireless network. In some embodiments, display parameters for presenting selection options (or other service plan information) through a user interface are obtained from storage in the mobile wireless communication device, obtained from a server communicatively coupled to the wireless network, or obtained in part from the device and in part from a server communicatively coupled to the wireless network.","In some embodiments, a service plan (bundle) selection system interviews the user to determine a \u201cbest match\u201d set of selection options to provide to the user. Based on responses obtained from the user to one or more interview questions, the service plan (bundle) selection system provides one or more service plan bundles (or constituent service plan elements thereof) and\/or one or more service plans to include in one or more offered service plan bundles. In some embodiments, the service plan (bundle) selection system includes information gathered from previous service usage, present service usage, and\/or a service usage history for the mobile wireless communication device or for a user thereof to determine options to present to the user for selection and customization of service plans and service plan bundles. In some embodiments, the service plan (bundle) selection system offers the user of the mobile wireless communication device assistance in selecting and configuring service plans and service plan bundles. In some embodiments, service plan offers and service plan bundle offers can match service usage patterns. In some embodiments, information about previous service usage and\/or current service usage is presented simultaneously with service plan options and service plan bundle options to the user of the mobile wireless communication device. In some embodiments, service usage provides context to the user of the mobile wireless communication device when choosing and\/or customization a service plan or service plan bundle.","In some embodiments, service plan bundle selection and customization can include one or more individual constituent service plan elements. In some embodiments, service plan bundle customization can include selecting an option for a constituent service plan element from each of a plurality of service plan categories. In some embodiments, service plan categories include voice service plans, messaging service plans, and data access service plans. In some embodiments, service plan categories include domestic voice service plans and international voice service plans. In some embodiments, service plan categories include \u201chome network\u201d service plans and \u201croaming\u201d network service plans. In some embodiments, adding individual service plans to a base service plan bundle customizes the base service plan bundle. In some embodiments, selecting each of the individual constituent service plan elements of a base service plan bundle customizes the base service plan bundle. In some embodiments, recommendations for different levels of matching criteria are presented to the user in order to provide options for selecting and\/or customizing service plan bundles. In some embodiments, the user selects criteria for service plan recommendations, e.g., \u201clow cost,\u201d \u201chigh bandwidth,\u201d \u201croaming access,\u201d and the service plan bundle selection and customization system provides options for service plans to include in a service plan bundle. In some embodiments, a ranking of service plan options to include in a service plan bundle is provided. In some embodiments, when the user selects one or more service plan elements to include in a service plan bundle, a \u201cbetter\u201d matching service plan element is provided as an alternative selection option for the user of the mobile wireless communication device. In some embodiments, when the user customizes a service plan bundle, a \u201cdifferent\u201d matching service plan bundle is provided as a service plan bundle offer to the user of the mobile wireless communication device. In some embodiments, matching criteria to determine the \u201cbetter\u201d matching service plan, service plan element or service plan bundle include service usage history. In some embodiments, sponsored service plans or service plan bundles based on service usage are presented to the user of the mobile wireless communication device. In some embodiments, service plans or service plan bundles are offered with one or more additional promotional features.","In some embodiments, a network system uses a service usage history of the mobile wireless communication device  to determine a set of service plans to offer to a user of the mobile wireless communication device . In some embodiments, the network system determines a set of service plans that provide a different set of features or benefits to the user of the mobile wireless communication device  compared with a current or recent set of service plans to which the user of the mobile wireless communication device  subscribes. In some embodiments, one or more service plans in the determined set of service plans includes a cost savings and\/or a feature benefit compared with the current or recent set of service plans. In some embodiments, the network system categorizes the features and\/or benefits (e.g., cost savings). In some embodiments, the network system provides for a notification message to the mobile wireless communication device  to indicate at least a portion of the determined set of service plans. In some embodiments, the notification message includes at least a portion of the categorized features and\/or benefits of the service plans included in the notification message. In some embodiments, the notification message includes an option to subscribe to one of the service plans. In some embodiments, the notification message includes an option to review information about one or more of the service plans. In some embodiments, the notification message provides for a responsive action from the user of the mobile wireless communication device . In some embodiments, the network system obtains a response to the notification message. In some embodiments, the response indicates an acceptance or a rejection to subscribe to a service plan indicated in the notification message. In some embodiments, the network system provisions one or more network elements and\/or the mobile wireless communication device  when obtaining a affirmative indication from the user of the mobile wireless communication device  to subscribe to a service plan offered in the notification message. In some embodiments, the network system replaces a current service plan with the selected new service plan. In some embodiments, the notification message indicates a cost savings to the user of the mobile wireless communication device for at least one of the service plans. In some embodiments, the network system determines a billing offset when the user selects to subscribe to a new service plan. In some embodiments, the network system applies the billing offset to a service account for the user of the mobile wireless communication device .","In some embodiments, a catalog of \u201cfree\u201d services is presented to the user of the mobile wireless communication device . In some embodiments, a service plan provides access to a set of services, e.g., a quantity of voice minutes, and\/or a number of text messages, and\/or an amount of data access consumption, in return for subscribing to a particular service or for using a particular application. In some embodiments, promotional offers are provided for a limited time period. In some embodiments, promotional offers provide for a limited set of features. In some embodiments, promotional features are accessible only after the user takes additional actions, e.g., interacts with a particular application or website.","In some embodiments, service plan offers are displayed through the user interface of the mobile wireless communication device . In some embodiments, notification messages are displayed to provide service plan offers. In some embodiments, notification messages are triggered based on trigger conditions, e.g., based on a pre-determined condition being met, or based on a particular action of the user of the mobile wireless communication device , or based on a network state. In some embodiments, marketing interceptors offer service plan (bundle) selections or customization based on a set of numerical digits dialed by the user of the mobile wireless communication device  to establish a connection for a service, e.g., for a voice call. In some embodiments, a marketing interceptor offers an alternative service in response to the particular set of dialed numerical digits. In some embodiments, the marketing interceptor offers a different set of features or costs for an alternative service compared to the \u201cdialed\u201d service. In some embodiments, an application or a part of an operating system on the mobile wireless communication device , alone or in conjunction with one or more network based systems, uses an alternative service implicitly changing the connection without intervention by the user of the mobile wireless communication device. In a representative embodiment, a voice call is transformed to a voice over Internet protocol (VOIP) call or other packet\/data based voice connection. In some embodiments, an SMS text message is converted to use an alternative text\/data connection service, e.g., from a text messaging service that counts individual text messages to a data service that counts data bytes. In a representative embodiment, a \u201cvideo chat\u201d call through a cellular connection is changed to a \u201cvideo chat\u201d call through a wireless local area network connection. In some embodiments, a service having a higher cost per unit time and\/or per unit message and\/or per unit data byte is transformed to a lower cost service. In some embodiments, marketing interceptors for alternative service can depend on a set of networks available and\/or based on types of networks available to the mobile wireless communication device .","In some embodiments, one or more device agents of a service processor  of a mobile wireless communication device  intercept establishment of (and\/or use of) a communication service connection or service activity, classify the communication service connection or service activity, compare the communication service connection or service activity to a service policy, and initiates an action based on the service policy. In some embodiments, the service policy is stored at least in part in the mobile wireless communication device . In some embodiments, the service policy is stored at least in part in a network element and communicated to the mobile wireless communication device . In some embodiments, the action initiated includes providing a notification message to the mobile wireless communication device . In some embodiments, the action includes displaying the provided notification message to a user of the mobile wireless communication device , e.g., through the UI  of the mobile wireless communication device . In some embodiments, the action includes displaying an actionable notification message from which further actions can be initiated. In some embodiments, the actionable notification message includes one or more options presented to the user of the mobile wireless communication device . In some embodiments, the actionable notification message includes a service plan offer. In some embodiments, the actionable notification message includes an option to start and\/or download an application.","In some embodiments, a mobile wireless communication device  intercepts a dialed phone number, classifies the phone number according to a pre-configured\/pre-stored policy and initiates a policy action. In some embodiments, the mobile wireless communication device  displays a pop-up notification message that includes one or more actionable buttons. In some embodiments, the pop-up notification message provides one or more options for an alternate service corresponding to the classification of the phone number. In some embodiments, the mobile wireless communication device provides for a Voice over Internet Protocol (VoIP) connection in place of a \u201cdialed\u201d voice connection. In some embodiments, the notification message offers an option to download an application that provides for a VoIP connection.","In some embodiments, a method for intercepting a communication service connection includes detecting an aspect of a number dialed to establish a connection, classifying an aspect of the connection, obtaining a service policy associated with the connection, intercepting the establishment of the connection, and redirecting the connection through an alternative communication service.","In some embodiments, aspects of the number dialed to establish a connection include one or more of: a specific number, an emergency services number, an information number, a long distance number, a local number, an international number, a toll free number, a number belonging to a preferred calling group, a number of a white list, and a number of a black list.","In some embodiments, a method for intercepting a communication service connection includes detecting an aspect of an attempted access to a communication service, classifying an aspect of the attempted access to the communication service, obtaining a service policy associated with the communication service, interrupting access to the communication service, and redirecting access to the communication service through an alternative communication service.","In some embodiments, aspects of the attempted access to the communication service include an application used, a network endpoint address, a wireless access network type, a website on a white list, a website on a black list, or a combination thereof.","In some embodiments, service plan (bundle) selection options are grouped based on a characteristic of the service plan or service plan bundle. In some embodiments, service plan (bundle) selection options are grouped based on an applicable time period for the service plan or service plan bundle. In some embodiments, a user interface provides flexible navigation to view a subset of all available service plan or service plan bundle options. In some embodiments, service plan (bundle) selection options are presented using a rotatable \u201ccarousel.\u201d In some embodiments, service plan (bundle) selection options are presented using one or more scrollable lists. In some embodiments, service plan (bundle) selection options are presented using an array of icons. In some embodiments, service plan (bundle) selection options are presented as a combination of graphics and text. In some embodiments, service plan (bundle) selection options are presented through one or more drop down menus. In some embodiments, service plan (bundle) selection options are presented through a set of tabs. In some embodiments, particular service plans or service plan bundles are highlighted to the user based on one or more criteria. In some embodiments, highlighted selections are determined based on service usage. In some embodiments, one or more tabs organize service plan (bundle) selection options include \u201cfeatured service plans,\u201d \u201capplication based service plans,\u201d \u201cvoice service plans,\u201d \u201cdata service plans,\u201d and \u201cmessaging service plans.\u201d In some embodiments, a banner area of the user interface presents graphics and advertisements for particular service plans or service plan bundles. In some embodiments, graphics are static. In some embodiments, graphics are dynamic.","In some embodiments, service usage history and\/or service plan and\/or service plan bundle subscription history influences a selection and customization of service plans and\/or service plan bundles. In some embodiments, the selection of options for service plans or service plan bundles uses information resident in the mobile wireless communication device itself. In some embodiments, indicators are presented with service plan (bundle) selection options to provide the user information, e.g., \u201cinstalled, purchased, expired, etc.\u201d In some embodiments, service plan (bundle) selection options are organized based on a history of viewing, e.g., \u201cnot seen\u201d service plans or service plan bundles are presented, and \u201cseen\u201d service plans or service plan bundles are not presented. In some embodiments, service plan selection options presented are based on a set of user preferences. In some embodiments, a history of service plan and\/or service plan bundle purchases and customizations is presented in conjunction with presentation of service plan selections and\/or service plan offers. In some embodiments, one or more differences between an offered service plan (bundle), a current service plan (bundle), a past service plan (bundle), a customized service plan (bundle), and\/or a standard service plan (bundle) are presented along with the service plan (bundle) options.","In some embodiments, \u201cadding\u201d a supplemental service plan element to a service plan bundle customizes the service plan bundle. In some embodiments, service plan (bundle) selection options include \u201cupgrade\u201d offers to provide the user a higher grade of service based on a current service plan or service plan bundle. In some embodiments, service plan or service plan bundle offers provide \u201cupgrades\u201d or \u201cdowngrades\u201d based on service usage history.","In some embodiments, accounting information includes different billing options, including but not limited to credit cards, \u201cvirtual wallets\u201d resident on the mobile wireless communication device, and \u201cbill me later.\u201d","In some embodiments, an organization of information provided to the user to select and\/or customize service plans and service plan bundles includes formatting the information based on choosing service plans and service plan bundles (or features of service plans and service plan bundles) for specific mobile wireless communication devices. In some embodiments, the organization of information, provided to the user to select and\/or customize service plans and service plan bundles, includes formatting the information based on choosing mobile wireless communication devices for specific current or newly subscribed service plans or service plan bundles. In a representative embodiment, a user adds or deletes mobile wireless communication devices to a specific service plan or service plan bundle. In a representative embodiment, a user adds or deletes a service plan or service plan bundle to a specific mobile wireless communication device. In a representative embodiment, a user interface presents information for service plan (bundle) selection and customization using a \u201cplan view,\u201d a \u201cmaster device view\u201d and\/or a \u201cslave device view.\u201d In some embodiments, the \u201cplan view\u201d provides for adding, deleting and\/or modifying sharing\/assignment of a mobile wireless communication device to a specific service plan or service plan bundle. In some embodiments, the \u201cmaster device view\u201d provides for adding, deleting or modifying sharing\/assignment of a service plan or service plan bundle on one or more mobile wireless communication devices associated with a device group. In some embodiments, the \u201cslave device view\u201d provides for limited capabilities to add, delete or modify sharing\/assignment of a service plan or service plan bundle on the specific \u201cslave\u201d mobile wireless communication device. In some embodiments, information is presented to the user of the mobile wireless communication device tailored to permissions controls that apply to the mobile wireless communication device.","In some embodiments, permissions controls for a mobile wireless communication device are contained in a device credential or in a user credential. In some embodiments, a level of permission control affects information displayed through a user interface of the mobile wireless communication device. In some embodiments, different applications and\/or settings for applications are loaded based on permissions controls, e.g., based on a device credential or a user credential. In some embodiments, a network-based server determines information to provide to a mobile wireless communication device based on a device credential or a user credential. In some embodiments, an application on the mobile wireless communication device presents information to the user of the mobile wireless communication device based on a permission level.","In some embodiments, notifications are provided to a mobile wireless communication device for providing information to control and\/or manage communication services available to, offered to, subscribed to, or otherwise usable by the mobile wireless communication device. In some embodiments, notifications are triggered to be obtained and\/or displayed based on trigger conditions established by a user, an network administrator, a service provider, an enterprise administrator, a device group administrator, or a third party service partner. In some embodiments, notification trigger conditions and\/or notification content and\/or notification display parameters are configured through a service design center. In some embodiments, notification trigger conditions are configured through access to a service provider service management system (including third party service partners), e.g., through an application on the mobile wireless communication device, or through a web browser interacting with a specific website. In some embodiments, notification trigger conditions are configured through the user interface of the mobile wireless communication device, e.g., by the user of the mobile wireless communication device interacting with one or more screens presented on a display of the mobile wireless communication device.","In some embodiments, a service usage control policy includes a service usage notification policy. In some embodiments, the user notification includes one or more of the following: a notification that the application to be downloaded and\/or launched is a network capacity controlled service; a list of one or more service activities (e.g., applications, OS\/other software functions\/utilities, and\/or other functions\/utilities as described herein) that have a network capacity controlled services classification; type of service policy in effect for one or more network capacity controlled services; notification that a service activity belongs to a network capacity controlled services class; notification that a service activity that is classified as network capacity controlled service can have the service class changed; notification that if the service class is changed for a service activity the service charges will change; notification that one or more networks are available (e.g., one or more alternative networks and\/or network busy state information and\/or charging information and\/or incentives associated with such networks), a service plan upgrade\/downgrade offer\/option; and an offer for a service plan that rewards a user that responds to the notification a service plan is lower cost\/discounted for responding to notification to use or not to use service activity based on usage level warning notification. In some embodiments, the user notification includes a user preference selection, including one or more of the following: a provision to associate an access policy control with the application (e.g., allow\/block, notify of usage, notify of usage at a given threshold, traffic control settings, allow during certain times, allow when network not busy, and\/or other policy controls as described herein), an over-ride option for selecting the service usage control policy; a modify option to select the service usage control policy; a select option to select a new service plan (e.g., an option to review and select alternative\/new service plan upgrade\/downgrade options), and an acknowledgement request (e.g., to confirm\/acknowledge receipt of the notification, in which the acknowledgement can be transmitted to a network element\/function and\/or stored locally for later reference\/transmission).","In some embodiments, before a given device application, process, function, OS service or other service activity is allowed to start, the intention to start is intercepted by a launch manager, the background service policy set or the network protection service policy set for the service activity is retrieved, and any necessary user notification or service launch control policies are implemented prior to allowing the service activity to launch. In such embodiments, a launch intercept manager may be used to implement this functionality. In some embodiments, this launch intercept manager is provided with a list identifying the service activities (e.g., application identifiers, OS function identifiers, aggregate service activity identifiers, and\/or component service activity identifiers) that have a launch control policy in effect. In some embodiments, the list of launch control policies includes blocking or delaying launch of the one or more service activities. In some embodiments, the launch control policy includes a user notification before, during or after the service activity is launched. In some embodiments, the user is informed that a service activity that has a background service control policy in effect or a network protection service control policy in effect is attempting to launch, is about to launch or has launched. In a further set of embodiments, the launch is held up until the user is notified and is allowed to decide if they would like to launch the service activity. In some embodiments, the user notification includes a message that the service activity attempting to launch consumes a large amount of service usage and asks the user if they would like to continue (e.g., \u201cThis application consumes a large amount of data, would you like to continue?\u201d, \u201cThis application consumes data even when you are not using it, would you like to continue?\u201d, \u201cThis application consumes data while you are roaming which adds cost to your usage bill, would you like to continue?\u201d, etc.). In some embodiments, the decision on whether or not to launch a service activity is pre-programmed into the list identifying the service activities (e.g. application identifiers, OS function identifiers, aggregate service activity identifiers, and\/or component service activity identifiers) that have a launch control policy in effect. In some embodiments, a portion of the list is pre-programmed by the user in accordance with user preference for controlling usage of service activities. In some embodiments, a portion of the list is pre-programmed by a network element (e.g., a service controller) in accordance with network background service or network protection service policies specified by a service policy design management system operated by a service provider as described herein. In some embodiments, the policy implementation defined by the list identifying the service activities (e.g. application identifiers, OS function identifiers, aggregate service activity identifiers, and\/or component service activity identifiers) that have a launch control policy in effect is verified to ensure that the user or malicious software has not defeated the policy enforcement specified in the list. In some embodiments, the list identifying the service activities that have a launch control policy in effect includes launch policies that are a function of one or more of: background service state, network busy state (or performance state or QoS state), type of network the device is connected to, home or roaming connection, time of day or day of week.","In some embodiments, the various design techniques described herein that allow for intercepting a service activity intention to launch, and applying a background service policy set or a network protection service policy set can be designed into the OS itself. For example, the intercept and policy implementation functions can be designed into the activity manager, broadcast intent manger, media service manager, service manager, or other application or service activity management function in the Android OS. One of ordinary skill in the art will recognize that similarly, the various design techniques described herein that allow for intercepting a service activity intention to launch, and applying a background service policy set or a network protection service policy set can be designed into application launch management functions in the Apple iOS OS, Windows Phone OS, Windows PC OS, Blackberry OS, Palm OS, and other OS designs.","In some embodiments, the pre-launch user notification information indicates one or more of: typical service usage or cost, or projected service usage or cost for the service activity attempting to launch. In some embodiments, the user sets limitations on access for one or more service activities and once this limit is hit then when the service activities with exceeded limits attempt to launch the user is notified. In some embodiments, the user chooses from a set of service restrictions rather than simply blocking or allowing service activity launch, with example service restrictions including but not limited to: a pre-configured set of restriction policies to chose from (e.g. full access, limited access, highly restricted access or block access), block, throttle, delay, aggregate and hold, limit amount of usage per unit time, cap usage, set limit for additional notification, specify type of network, specify busy state (performance, QoS) or background state, or choose from pre-configured settings options.","In some embodiments, the user notification occurs after the user attempts to download or load an application onto the device (e.g., an application downloaded from the web or an online application store for a smart phone or other wireless\/network computing device, such as an Apple iPhone or iPad, or Google Android\/Chrome based device). In some embodiments, the user notification occurs after the user attempts to run the service activity or to initiate usage of a cloud based service\/application (e.g., Google or Microsoft cloud service based apps). In some embodiments, the user notification occurs after one or more of the following: the service usage activity hits a usage threshold event, the service usage activity attempts a network service usage that satisfies a pre-condition, an update to a network capacity protection service activity classification list or policy set, and a network message is sent to the device triggering the notification. In some embodiments, the user notification provides information on the service usage activity that is possible, typical, or likely for the service usage activity. In some embodiments, the user notification includes a user option for obtaining more information about the service usage of the service activity (e.g., a message that the service usage activity may result in a high service usage and\/or that the service usage activity may or will result in a high service usage as compared in some way to a limit of the current service plan) to make informed user preference settings.","In some embodiments, a user notification includes displaying (e.g., and as applicable, allowing users to provide UI input) one or more of the following: current and\/or past\/historical\/logged network service usage activity list, current and\/or past\/historical\/logged network capacity controlled service usage activities, current activity policy settings, current or available networks, service plan options (e.g., for how to treat one or more network capacity controlled service traffic types), selection option(s) to assign a network capacity controlled service activity into a different priority traffic control and\/or charging buckets, network service usage by activity (e.g., network capacity controlled services and other services), network busy state (e.g., and with resulting policies in force), service activity policy setting vs. busy state and time\/day\/week, network service activity priority, network service activity usage statistics (e.g., vs. network busy state and\/or network service usage control policy state).","In some embodiments, a UI notification is displayed when user attempts a network capacity controlled service activity during a network busy state (e.g., that modifies a network capacity controlled services policy). In some embodiments, the UI notification includes information on service plan choice and a network capacity controlled services policy over-ride option (e.g., one time, time window, usage amount, permanent by activity, and\/or all), charging information based on a user selection, and\/or service plan upgrade information and options.","In some embodiments, a UI notification is displayed for user input for preferences\/configurations for multiple networks (e.g., Wi-Fi, 4G, 3G, and\/or other wired or wireless access networks) including charging policy. In some embodiments, a UI notification is displayed when a specified network traffic service usage activity (e.g., based on network capacity controlled services classification, QoS classification, priority classification, time based criteria, network capacity, service plan, charging criteria, and\/or other criteria\/measures) is being attempted or is occurring and providing options (e.g., allow, block, delay, throttle, and\/or other options).","In some embodiments, a UI fuel gauge is displayed (e.g., to depict current and\/or historical network service usage, for example, relative to a service plan for the device, by network, relative to network busy state, time based criteria, and\/or other criteria\/measures). In some embodiments, a user notification includes a communication sent to the user (e.g., an email, SMS or other text message, voice message\/call, and\/or other electronic form of communication). In some embodiments, the communication sent to the user includes network service usage information, network capacity controlled service usage related information, and\/or an instruction to log into a web page or send a communication for more information (e.g. regarding an information update and\/or alert or warning message, such as related to network service usage and\/or charging for network service usage).","In some embodiments, a notification (e.g., a user or network service cloud notification) is generated based on an aggregate service activity reports usage (e.g., allows network provider to generate user notifications and\/or to notify application provider\/service activity provider). In some embodiments, a notification (e.g., a user or network service cloud notification) is generated based on a publishing of an updated\/new network capacity controlled services list based on an aggregate monitored activity (e.g., based on a service plan, velocity, sockets opening frequency\/rate (e.g., messaging layer behavior), total data usage, peak busy time usage to formulate or update black list for monitoring, notifying, and\/or controlling, which can be applied to one, multiple, group, or all devices). In some embodiments, a notification (e.g., a user or network service cloud notification) is generated based on data usage trends for particular device relative to an associated service plan and\/or other comparable devices or data usage thresholds\/statistical based data usage measures.","In some embodiments, an application is actually composed of several component applications, processes or functions. Examples of this include but are not limited to: the components of a Java application JAR file; applications that use OS functions; applications that use a proxy service function; applications, functions or processes that coordinate with one another to implement a composite process, function or application; and OS process functions that support an application or overall OS function. In such embodiments it is important to be able to categorize all applications, functions and processes on a device that contribute to the service usage of a service activity so that the service activity can be monitored for service usage, have the service usage accounted for, implement the appropriate user notification when one or more service activity components attempts to start or use the network, implement the appropriate user notification when one or more service activity components reaches a pre-determined service usage level that requires user notification, and implement the appropriate background service or network protection service usage controls as specified herein ((including but not limited to for example: block network access, restrict network access, throttle network access, delay network access, aggregate and hold network access, select for time of day network access restrictions, select network type restrictions, select roaming network access restrictions, select service usage restrictions such as a usage limit, select service cost restrictions such as a cost limit or otherwise place on another form of background service status or network usage restriction as described herein). In the case of service activity components that belong exclusively to one aggregate service activity (e.g. an application, application JAR file or OS function), this may be accomplished by including each of the component service activities on a list that identifies the service activity components that belong to the aggregate service activity, and then monitoring, possibly controlling and providing user notifications based on the aggregate or component behavior of each service activity in accordance with the policies specified for the aggregate service activity. For example, it is necessary to group all application launch behavior and\/or network access behavior under the monitoring, launch, notification, accounting and background service controls or network protection service controls (or other background or network protection service policies as specified herein) in accordance with the background service or network protection service policies for the aggregate application that the JAR file supports. As another example, if an OS network synch or update function utilizes various software components or processes to implement the network synch or update function, then each of the software components or process must be monitored and aggregated under the background service policies or network protection service policies for the aggregate OS synch or update function.","In some embodiments, this ability to group usage for a related set of service activity components dedicated to an aggregate service activity as described herein is used to improve usage reporting of service activities to a service controller for the purpose of statistically identifying service activities that are candidates for background service policy controls or network protections service policy controls.","In some cases, multiple applications, processes, functions, OS services or other service activities can utilize a common set of component software applications, processes, functions or OS services. In such cases, in order to implement background service policies and\/or network protection service policies for service activity monitoring and accounting, service activity launch control, user notification, or network access control as described herein, it is necessary to associate the specific network access data or information flows to and from the common component software applications, processes or functions that belong to the specific initiating application, process, function or other service activity that is to be managed according to a background service or network protection service policy set. In what follows, a specific set of examples are provided on how to map common component service activity for a set of common OS functions referred to as proxy service functions to a specific application, process, function, OS service or other service activity for the purpose of implementing a background service policy set or a network protection service policy set as described herein. Once these examples are reviewed, it will be obvious to one of ordinary skill in the art how to apply similar mapping of service activity for a common set of components to a service activity that is to be managed in accordance with a background service policy set or a network protection service policy set as described herein.","In some embodiments, this ability to group usage for a common set of service activity components as described herein is used to improve usage reporting of service activities to a service controller for the purpose of statistically identifying service activities that are candidates for background service policy controls or network protections service policy controls.","In some embodiments, a proxy network service manager refers to an intermediary data flow function in a device operating system that sits on a data path between a device application and a device networking stack interface to provide a level of network service abstraction from the network stack interface, a higher level service function above the network stack interface, enhanced or special traffic processing functions, media service transfer management, file download service, HTTP proxy service functions, QoS differentiation, or other similar or related higher level traffic processing. Example Proxy Service Managers include the following: media service manager (e.g., android media service library function), email service manger, DNS function, software download service manager, media download manager (e.g., audio player, streaming media player, movie downloader, media service OS function, etc.), data download service manager, Android \u201cmedia\u201d library function, Android.net library function, Jave.net library function, Apache library function, other similar software\/library functions or services in other device operating systems, SMTP\/IMAP\/POP proxy, HTTP proxy, IM proxy, VPN service manager, SSL proxy, etc. Herein these alternative network access data flows that are initiated by an application are termed application proxy service flows. In such embodiments an app can sometimes simply requests a network access service activity from an OS component such as a proxy service component rather then directly accessing the network. In such embodiments, in order to implement background service controls or user notification of application service usage, it is necessary to monitor the application proxy service flows, classify them as being initiated by or belonging to a particular application or service activity, and implement the proper background service classifications, user notifications, application process launch intercept, background service accounting, and background service usage restrictions as described herein in accordance with the policies intended for the initiating application or service activity. This is accomplished by inserting service usage monitors that allow a mapping of (i) the initiating application identifier (e.g., app name, app fingerprint, application identification tag, application process number, application credential, or other secure or non-secure application or process identifier) to (ii) the request to the proxy service and subsequently to (iii) the network service flows between the proxy service and the network elements that service the information communications. Once this mapping is accomplished, the service usage flows of the proxy service can then be accounted back to the initiating application, device software process or other service activity, the proper policies can then be applied to each service usage flow for user notification, service activity launch control, service activity background accounting (including variable charge rating dependent on background service state and\/or sponsored service charging), service activity background service controls or network usage restrictions as described herein (including but not limited to for example: block network access, restrict network access, throttle network access, delay network access, aggregate and hold network access, select for time of day network access restrictions, select network type restrictions, select roaming network access restrictions, select service usage restrictions such as a usage limit, select service cost restrictions such as a cost limit or otherwise place on another form of background service status or network usage restriction as described herein).","In some embodiments, this ability to track service usage for an service activity through a proxy service as described herein is used to improve usage reporting of service activities to a service controller for the purpose of statistically identifying service activities that are candidates for background service policy controls or network protections service policy controls.","In some embodiments, the various design techniques described herein that allow for monitoring, accounting for and\/or implementing service policy for component service activities that belong to an aggregate service activity can be designed into the OS itself. For example, in certain current mobile OS implementations (e.g., Google Android, Apple iOS, Blackberry, etc.) there are some applications available in the market that allow a user to get an estimate for how much data a certain subset of applications are consuming on a wireless service provider network, but it is not possible for the user or application to get an indication of the service usage for certain OS functions, whereas the embodiments disclosed herein will allow for this. As another example, in certain current mobile OS implementations it is not possible to associate proxy service usage (e.g., media download and media streaming proxy library software functions) with the specific applications that use the proxy service, so while the user can be informed of generic common OS functions or proxy services (e.g., in the case of Android: \u201cmedia service\u201d, \u201cmedia\u201d, \u201cgallery\u201d, \u201cGoogle service framework\u201d and other generic common OS software library functions or proxy services), there is no way for the user to determine what applications widgets or other service activities are actually generating this common service function usage, whereas the invention described herein permits the user full visibility on such usage monitoring examples. Furthermore, if the OS is retrofitted with the intercept and policy implementation functions can be designed into the activity manager, broadcast intent manger, media service manager, service manager, or other application or service activity management function in the Android OS. One or ordinary skill in the art will recognize that similarly, the various design techniques described herein that allow for intercepting a service activity intention to launch, and applying a background service policy set or a network protection service policy set can be designed into application launch management functions in Apple iOS, Windows Phone OS, Microsoft Windows PC OS, Blackberry OS, Palm OS, and other OS designs.","Service Offers",{"@attributes":{"id":"p-0915","num":"0914"},"figref":["FIG. 114","FIG. 114","FIG. 114"]},"Carrier-generated charging data records (CDRs) or real-time reporting records (RTRs) (or other real-time or near-real-time usage record formats such as, e.g., FDRs, batch processed usage records, continuous usage record event feeds or SMS formatted usage record messages) flow from carrier  (which can be, e.g., a real time reporting system, a network gateway, a network usage charging system element, a AAA, an HLR, a billing element, etc.) to load balancer  to RTR filtering element .","In some embodiments, load balancer  selects one of many CDR\/RTR processing threads that are available in the service controller information processing system. In some embodiments, the processing thread is an asynchronous software or firmware program running on a gateway or server CPU. In some embodiments, the processing thread is a virtual machine processing thread that exists in a resource pool of gateway or server CPUs or virtual machines, which may include geographically separated or redundant resource pools. As illustrated in , each processing thread includes the functional steps of CDR\/RTR filtering , JMS queue , CDR\/RTR processor  and the interface to CDR\/RTR database . In some embodiments, processing threads are asynchronous in that they are initiated when load balancer  directs one or more CDR\/RTR data transfers to the thread and terminated when the processed CDR\/RTR information has been processed and deposited into CDR\/RTR database . Note that  shows only one of potentially many available CDR\/RTR processing threads.","CDR\/RTR filtering element  selects the records that are associated with devices that include a device client that communicates with the service controller (e.g., the device client can be a service processor configured to provide service usage notification updates, on-device service plan purchase or activation with UI options display and user selection actions, device-assisted access control policy enforcement, device-assisted service usage charging policy enforcement, device-assisted service notification messages, etc.). In some embodiments, devices supporting DAS are identified by device credentials or user credentials that are communicated to the service controller as described herein, where the device credential or user credential are members of a device group or user group that is managed by the service controller.","In some embodiments, CDR\/RTR filtering element  may be used advantageously to quickly receive and acknowledge a CDR\/RTR record to provide asynchronous functionality because of real-time processing requirements, server processing thread scalability and maintainability requirements, or server processing thread geographic redundancy requirements. In some embodiments, filtering eliminates unnecessary load on JMS queue  and\/or CDR\/RTR database . CDR\/RTR filtering element  places the records from end-user devices known to be configured with a device client (e.g., a service processor configured to provide service usage notification updates, on-device service plan purchase or activation with UI options display and user selection actions, device-assisted access control policy enforcement, device-assisted service usage charging policy enforcement, device-assisted service notification messages) that communicates with the service controller through Java messaging service (JMS) queue . In some embodiments, CDR\/RTR filtering element  filters out device records for devices that may have a form of service processor, but the service processor has not properly authenticated with the service controller. In some embodiments, the device clients that are known to be configured with a device client that communicates with the service controller are determined by looking up a device credential or user credential associated with CDRs or RTRs in a device group or user group management database (e.g., in SDC database  or a subscriber management system).","JMS queue  buffers the CDR\/RTR information remaining after CDR\/RTR filtering  and allocates one or more CDRs\/RTRs to a service usage processing thread in CDR\/RTR processor . In some embodiments, JMS queue  is a persistent queue. In some embodiments, JMS queue  is a primary messaging system between applications.","CDR\/RTR processor  retrieves the records from JMS queue , transforms the records, and stores them in CDR\/RTR database . In some embodiments, CDR\/RTR processor  is an application or a process thread. In some embodiments, CDR\/RTR processor  pulls a CDR\/RTR record from JMS queue , transforms the record, and stores the transformed record in CDR\/RTR database  in one transaction in order to provide fault tolerance in the case of system failure. In some embodiments, CDR\/RTR processor  formats the CDR\/RTR information to provide a common service usage information format to facilitate one or more of service usage processing, reporting, analysis, comparison, mediation and reconciliation operations performed within the service controller system. In some embodiments, CDR\/RTR processor  observes CDR\/RTR time stamps and time synchronizes, time aligns, or time aggregates multiple CDR\/RTR reports so that a more consistent measure of usage with a common time reference can be achieved within the service controller system for one or more of service usage processing, reporting, analysis, comparison, mediation and reconciliation purposes.","In some embodiments, end-user devices capable of DAS reporting (e.g., devices configured with a device client that communicates with the service controller, such as a service processor described herein) connect periodically or on occasion to usage reporting gateway  to report their data usages. In some embodiments, DAS reporting information includes but is not limited to one or more of user service plan purchase or activation selection choices, device user service policy configuration preference selections (e.g., user-generated service policy assignments for applications, websites, network types, or home\/roaming policies), DAS service usage reports, DAS device policy state reports, DAS software environment integrity reports, and other reports.","In some embodiments, DAS device usage reports and analytics flow from carrier device network  (e.g., devices configured with service processors that are in communication with the service controller) to load balancer  to usage reporting gateway . In some embodiments, load balancer  selects one of many usage reporting processing threads that are available in the service controller information processing system. In some embodiments, the usage reporting processing thread is an asynchronous software or firmware program running on a gateway or server CPU. In some embodiments, the usage reporting processing thread is a virtual machine processing thread that exists in a resource pool of gateway or server CPUs or virtual machines, which may include geographically separated or redundant resource pools. As illustrated in , each usage reporting processing thread consists of the functional steps of usage reporting gateway , JMS queue , report processor , and the interface to usage report database . In some embodiments, usage reporting processing threads are asynchronous in that they are initiated when load balancer  directs one or more usage reporting data transfers to a thread and terminated when the processed usage reporting information has been processed and deposited into usage report database . Note that  shows only one of potentially many available usage reporting processing threads.","Usage reporting gateway  accepts reports from devices configured with a device client (e.g., a service processor configured to provide service usage notification updates, on-device service plan purchase or activation with UI options display and user selection actions, device assisted access control policy enforcement, device assisted service usage charging policy enforcement, device assisted service notification messages) that communicates with the service controller and places the reports on JMS queue . In some embodiments, usage reporting gateway  only accepts device reports from device service processors that have authenticated with the service controller system. In some embodiments, usage reporting gateway  only accepts device reports from device service processors configured with device credentials or user credentials that are members of a device group or user group that is managed by the service controller. In some embodiments, usage reporting gateway  rejects reports from end-user devices without authenticated service processors. In some embodiments, usage reporting gateway  is an application or a process thread. In some embodiments, usage reporting gateway  quickly receives and acknowledges end-user device reports. In some embodiments, usage reporting gateway  provides asynchronous functionality that is advantageous to support real-time processing requirements.","In some embodiments, the end-user device is authenticated before reports are put onto JMS queue . In some embodiments, JMS queue  is a persistent queue. In some embodiments, JMS queue  is a primary messaging system between applications.","Report processor  retrieves reports from JMS queue , transforms the reports, and stores the transformed reports in usage report database . In some embodiments, report processor  is an EAI. In some embodiments, report processor  retrieves reports from JMS queue , transforms the reports, and stores the transformed reports in usage report database  in a single transaction in order to provide fault tolerance in case of system failure. In some embodiments, report processor  formats the device usage report information to provide a common service usage information format to facilitate one or more of service usage processing, reporting, analysis, comparison mediation and reconciliation purposes internal processing and comparison within the service controller system. In some embodiments, report processor  observes device usage report time stamps and time synchronizes, time aligns or time aggregates multiple device usage reports so that a more consistent measure of usage with a common time reference can be achieved within the service controller system for one or more of service usage processing, reporting, analysis, comparison mediation and reconciliation purposes.","In some embodiments, CDR\/RTR filtering , CDR\/RTR processor , report processor , and usage reporting gateway  share a host.","In some embodiments, micro-CDR generator  retrieves records from CDR\/RTR database  and retrieves reports from usage report database . In some embodiments, micro-CDR generator  determines a service usage amount for a micro-CDR service usage classification, assigns a usage accounting identifier to the micro-CDR report that identifies the usage as being accounted to a device user for the device associated with a device credential or user credential, and reports this amount of service usage to the carrier network  (in the exemplary embodiment of , through JMS queue  and FTP or publisher ). In some embodiments, micro-CDR generator  determines a service usage amount for a micro-CDR service usage classification, assigns a usage accounting identifier to the micro-CDR report that identifies the usage as being accounted to a service sponsor, and reports this amount of service usage to carrier network . In some embodiments, the micro-CDR for the sponsored service usage report also includes an identifier for a device credential or user credential. In some embodiments, the amount of service usage accounted for in the micro-CDR is mediated or reconciled off of a device or user bulk service usage accounting. In some embodiments,
