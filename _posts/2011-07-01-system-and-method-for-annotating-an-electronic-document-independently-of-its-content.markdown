---
title: System and method for annotating an electronic document independently of its content
abstract: A system, method, and apparatus for annotating an electronic document independently of its content is provided. According to one variation, a tablet and stylus-based computer is programmed with a document browser that permits a user to annotate documents viewed through the browser. The annotations are stored separately from the viewed document pages but are correlated with the pages such that when a previously annotated page is revisited, annotations relating to that page are retrieved and displayed on top of the page as an “ink” layer. Three different annotation modes are possible: ink, highlight, and erase. Each mode can be selected through a user interface supplied through the browser or through controls embedded in a document.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08627197&OS=08627197&RS=08627197
owner: Microsoft Corporation
number: 08627197
owner_city: Redmond
owner_country: US
publication_date: 20110701
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","TECHNICAL FIELD","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE INVENTION"],"p":["This application is a continuation of U.S. patent application Ser. No. 11\/964,457, filed on Dec. 26, 2007, now issued as U.S. Pat. No. 7,975,216, which is a continuation of U.S. patent application Ser. No. 09\/455,805, filed on Dec. 7, 1999, now issued as U.S. Pat. No. 7,337,389, both of which are incorporated herein by reference.","This invention relates generally to document browsers and pages that are displayed using such browsers. More particularly, the invention provides a method and apparatus for allowing a user to add annotations and other markings to an electronic document independently of the content of the document.","Web browsers are conventionally used to display documents created with a standard descriptive language such as Hyper Text Markup Language (HTML). Documents written in such languages can be displayed with various visual and audio effects such as color, animation, sound effects, and the like. The documents may include text, bitmap images, graphics, and other types of content.","Web browsers (or, more generally, \u201cdocument browsers\u201d) typically provide functions which permit a user to advance forward and backward among a series of related pages; to jump to a specified page; to jump to pages that are referenced via a so-called \u201chyperlink\u201d embedded in a page; and to maintain a list of recently viewed pages. Although frequently used to navigate through web pages on the Internet, document browsers can be used to display pages that reside on a local area network or even a local computer on which the browser executes.","Recently, as computers have become smaller, it has become possible to run browsers on notebook computers, palm-sized computers, and so-called \u201ctablet and stylus\u201d computers. The latter devices typically comprise a thin computer roughly the size of a sheet of paper with a large writing surface that doubles as a display, and a stylus that substitutes for a keyboard. A user can display and edit documents using the stylus as a writing instrument.","One potential application for such hand-held computers is the display of mass-produced documents such as books, maps, and other descriptive material. For example, a user who purchases a textbook or fictional work on a CD-ROM or other medium can display the work using a small computer such as a tablet-based computer.","In some instances, a user may want to annotate or otherwise mark pages displayed on the computer. Using a conventional word processing program, a user can rearrange text, highlight certain words or phrases, or delete portions of the text. Such features require that the user have access to the underlying content (e.g., the descriptive material that forms the work). In the case of copyrighted materials, however, editing capabilities may not be available to modify the underlying materials. Certain text may be copy-protected or otherwise unavailable for editing using normal editing tools, or may not be in a format suitable for word processing. In such circumstances, there may be no practical way for a user to annotate such works. As one example, a student viewing a copy- or edit-protected textbook on a tablet-based computer may have no practical way of making notes directly in the textbook. Such a feature would be desirable notwithstanding the copy protection or unavailability of general editing functions for the document.","The present invention provides a method and apparatus for users to annotate documents in a document browser without changing the contents of the documents. According to one variation of the invention, a tablet and stylus-based computer is programmed with a document browser that permits a user to annotate documents that are viewed through the browser. The annotations are stored separately from the viewed document pages but are correlated with the pages such that when a previously annotated page is revisited, annotations relating to that page are retrieved and displayed on top of the page as an \u201cink\u201d layer.","According to one variation of the invention, three different annotation modes are provided: ink, highlight, and erase. Each mode can be selected through a user interface supplied through the browser or through controls embedded in a document. The annotation functions can be implemented as an Active-X\u00ae control, as an Applet, or as dedicated code integrated into the browser. Other features and advantages of the invention will become apparent through the following description, the figures, and the appended claims.",{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 1","b":["100","110","120","130","110","130","140","150"]},"A basic input\/output system  (BIOS), containing the basic routines that help to transfer information between elements within the computer , such as during start-up, is stored in ROM . Computer  also includes a hard disk drive  for reading from and writing to a hard disk (not shown), a magnetic disk drive  for reading from or writing to a removable magnetic disk , and an optical disk drive  for reading from or writing to a removable optical disk  such as a CD ROM or other optical media. The hard disk drive , magnetic disk drive , and optical disk drive  are connected to the system bus  by a hard disk drive interface , a magnetic disk drive interface , and an optical disk drive interface , respectively. The drives and their associated computer-readable media provide nonvolatile storage of computer readable instructions, data structures, program modules and other data for the personal computer . It will be appreciated by those skilled in the art that other types of computer readable media which can store data that is accessible by a computer, such as magnetic cassettes, flash memory cards, digital video disks, Bernoulli cartridges, random access memories (RAMs), read only memories (ROMs), and the like, may also be used in the exemplary operating environment.","A number of program modules can be stored on the hard disk, magnetic disk , optical disk , ROM  or RAM , including an operating system , one or more application programs , other program modules , and program data . A user can enter commands and information into the computer  through input devices such as a keyboard  and pointing device . Other input devices (not shown) may include a microphone, joystick, game pad, satellite dish, scanner, or the like. These and other input devices are often connected to the processing unit  through a serial port interface  that is coupled to the system bus, but may be connected by other interfaces, such as a parallel port, game port or a universal serial bus (USB). A monitor  or other type of display device is also connected to the system bus  via an interface, such as a video adapter . In addition to the monitor, personal computers typically include other peripheral output devices (not shown), such as speakers and printers.","The computer  can operate in a networked environment using logical connections to one or more remote computers, such as a remote computer . Remote computer  can be a server, a router, a network PC, a peer device or other common network node, and typically includes many or all of the elements described above relative to computer , although only a memory storage device  has been illustrated in . The logical connections depicted in  include a local area network (LAN)  and a wide area network (WAN) . Such networking environments are commonplace in offices, enterprise-wide computer networks, intranets and the Internet.","When used in a LAN networking environment, the computer  is connected to the local network  through a network interface or adapter . When used in a WAN networking environment, the personal computer  typically includes a modem  or other means for establishing a communications over the wide area network , such as the Internet. The modem , which may be internal or external, is connected to the system bus  via the serial port interface . In a networked environment, program modules depicted relative to the personal computer , or portions thereof, may be stored in the remote memory storage device.","It will be appreciated that the network connections shown are exemplary and other means of establishing a communications link between the computers can be used. The existence of any of various well-known protocols such as TCP\/IP, Ethernet, FTP, HTTP and the like is presumed, and the system can be operated in a client-server configuration to permit a user to retrieve web pages from a web-based server. Any of various conventional web browsers can be used to display and manipulate data on web pages.",{"@attributes":{"id":"p-0027","num":"0026"},"figref":["FIG. 2","FIG. 1","FIG. 2"],"b":["201","202","203","204","201","204"]},"A stylus could be equipped with buttons or other features to augment its selection capabilities. In one embodiment, a stylus could be implemented as a \u201cpencil\u201d or \u201cpen\u201d in which one end constitutes a writing portion and the other end constitutes an \u201ceraser\u201d end which, when moved across the display, indicates that portions of the display are to be erased. Other types of input devices such as a mouse, trackball, or the like could be used. Additionally, a user's own finger could be used to select or indicate portions of the displayed image on a touch-sensitive or proximity-sensitive display. Consequently, the term \u201cuser input device\u201d is intended to have a broad definition and encompasses many variations on well-known input devices.",{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 3","b":["301","302","301","305","304"]},"Also using stylus , the user can mark opaque annotations  on the computer display, which appear to be written on the page itself. (Although ink layer  is shown as a separate layer in , this view is for conceptual purposes only; the user would see only document page  with annotations superimposed over the text and\/or graphics on the page). According to one aspect of the invention, annotations made by a user on document page  are maintained as a separate \u201cink\u201d layer  that is superimposed over and blended with pixels on the document page. Consequently, even though the annotations appear to be made directly on the underlying document, they are actually maintained in a separate display layer blended with the document page being viewed.","In one embodiment, annotations are specific to each user, such that other users who view the same document will not see a previous user's annotations. This feature can be implemented using log-ins or other user identifiers. For an identical document retrieved at two different remote computers each having the inventive features, annotations made on one remote computer would not show up on the other remote computer, since the annotations are made independently of the document content. It is, however, within the scope of the invention to permit sharing of annotations if desired.","Although the inventive principles are described with respect to a tablet and stylus computer, these principles can be applied to other types of computers, including desktop systems, notebook computers, and the like. Many types of input devices, such as touch-sensitive displays and the like, can be used to indicate those portions of the display that are to be annotated. Moreover, as explained above, many variations on a basic stylus are of course possible, including an embodiment in which the stylus includes a writing end and an \u201cerasing\u201d end.",{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 4","b":["401","402","403","402","404"]},"According to one variation of the invention, these modes can include an \u201cink\u201d mode, a \u201chighlight\u201d mode, and an \u201cerase\u201d mode. Additionally, a \u201cselection\u201d mode permits the user to switch to normal browser functions. As shown in , the user interface is already in \u201cerase\u201d mode (indicated by mode indicator ), so that \u201cerase\u201d is not shown as one of the available modes in menu .","It is not necessary to provide an explicit \u201cmode selection\u201d feature as described above; instead, mode selection can be implicit in the manner by which the input device is used. As one example, a stylus could be used to provide an ink mode when the stylus is used as a writing implement; a highlighting mode when the stylus is held a certain way or when a button is pressed on the stylus; and an erase mode when an \u201cerasing\u201d end of the stylus is moved across portions of the display. As another example, one of the modes (e.g., the ink mode) could be established as a default mode when a user input device is manipulated, with other modes being selected based on additional user inputs or manipulations or even voice commands, for example. Many other variations are of course possible.",{"@attributes":{"id":"p-0036","num":"0035"},"figref":["FIG. 5","FIG. 4"],"b":["501","502","502"]},{"@attributes":{"id":"p-0037","num":"0036"},"figref":["FIGS. 6 and 7","FIG. 6","FIG. 7","FIG. 6"],"b":["601","601","701"]},{"@attributes":{"id":"p-0038","num":"0037"},"figref":["FIG. 8","FIG. 8"],"b":["801","804","803","805","805"]},"Annotations retrieved from storage area  are provided to pixel blending function , which is indicated as a newly provided function within document browser . Alternatively, pixel blending function  can be provided separately (e.g., in the operating system, for example). In general, pixel blending function  blends pixels from a document page with corresponding pixels from an annotation or \u201cink\u201d layer mapped to that document page, and generates a blended pixel image that is displayed as an annotated document page .","In one embodiment, each opaque annotation pixel replaces a corresponding pixel on a document page, whereas each translucent annotation pixel (e.g., highlighting) is blended with a corresponding pixel value on a document page to produce a different color from that in the original document. Pixel blending functions such as alpha blending are well known and no further elaboration of this feature is required.","Annotations can be saved as \u201cstrokes\u201d in a data structure and stored locally in a file associated with the currently displayed page of the document. Each stroke can comprise a stroke type (e.g., annotate, highlight or erase), a stroke width, and a stroke color in addition to coordinates indicating the stroke trajectory. In various embodiments, annotation storage occurs automatically, such that whenever the input device is released (or lifted), a new stroke is automatically stored.","Alternatively, it is of course possible to store annotations as a bitmap image having the same or similar dimensions as the presently displayed document page, such that the annotation image can be superimposed over the document page. Combinations of these approaches are of course possible. For example, opaque annotations could be stored in a data structure, while highlighting could be stored as a bitmap image.","According to one embodiment, document browser  generates a title change event to annotation editor  each time a different document page is selected through document browser . This permits annotation editor  to retrieve previously stored annotations for a page, and to create a new annotation file for a newly displayed page. Annotation editor  intercepts stylus movements from a stylus or other cursor movement device and provides them to document browser  after any annotation processing has been performed. In one embodiment, browser  can constantly generate \u201cscreen paint\u201d commands that are intercepted so that a blended image is continuously generated.","Annotation editor  can be implemented as an Active-X\u00ae control element, as an Applet, or as other forms of software functions. Annotation editor  and any related functions can be embedded into a document viewed through browser , such that viewing the document provides the annotation functions.",{"@attributes":{"id":"p-0045","num":"0044"},"figref":"FIG. 9A"},"Beginning in step , a stylus \u201cdown\u201d event is detected. As noted previously, any of various input devices such as a mouse with key clicks or others can be used. In step , a test is performed to determine whether the annotation mode has been enabled. (See ). If the annotation mode is not presently active, then in step  processing returns to the browser (i.e., the stylus movement command is passed through to document browser ).","In step , after it has been determined that the annotation mode is active, the page identifier for the currently displayed page is retrieved. It is contemplated but not necessary that each document page have a unique identifier (e.g., a unique URL). In step , a test is performed to determine whether the currently displayed page has a previously existing \u201cink\u201d or \u201cannotation\u201d file associated therewith. If such an ink file exists, it is retrieved from storage area  (see ). If no such file exists, a new ink file is created in step , preferably using a name that readily corresponds to the displayed document page.","After an ink file has been retrieved or newly created, a test is performed in step  to determine whether the annotation mode is \u201cink\u201d mode. If the current annotation mode is \u201cink\u201d mode, then in step  opaque pixels are written into the ink file at the current stylus position. The number of pixels written can be varied depending on the width or \u201cswath\u201d to be used for the annotation. For a wide swath (e.g., a magic marker type of annotation), a plurality of pixels can be written surrounding the current stylus position. For a narrower swath (e.g., a pinpoint type of annotation), a smaller number of pixels (e.g., one pixel wide) can be written to the annotation file at the current stylus position. It is within the scope of the invention to permit the user to select or change the width of the annotation marks.","In step , a pixel blending operation is performed, such that the pixels in the ink file are blended with pixels from the document, which causes the document to be displayed with annotations. (As described above, opaque pixels may entirely replace those in the viewed document). In step , a test is performed to determine whether the stylus or other input device has been lifted or disengaged. If so, then in step  the ink layer is stored, and processing returns to the browser in step . Otherwise, annotations continue at step , and can be stored as part of the same stroke. If the user again presses the stylus or input device against the document, then annotations resume in step .","Returning to step , if the present mode is not \u201cink\u201d mode, then a test is made in step  to determine whether highlight mode was selected. If highlight mode is active, then in step  translucent pixels are written at the current stylus position. For example, yellow, pink, or other translucent colors can be stored at the current stylus position. As before, the pixels are blended in step , changing the resulting pixels on output but nevertheless permitting the user to see the original document pixels in a modified form. Processing continues as described previously.","In step , if highlight mode is not currently active, then in step  a test is performed to determine whether erase mode is active. If so, then in step  the pixels at the current stylus position are cleared or zeroed out. As with highlight mode, the width of the erasure can be preset to a swath wider than one pixel, and the width can be different than the highlight or annotation pixel width. As before, the remaining non-erased pixels are blended with the original document image in step  and processing continues until the ink layer is stored.",{"@attributes":{"id":"p-0052","num":"0051"},"figref":"FIG. 9B","b":["918","801","803"]},"In step , a test is performed to determine whether an ink layer already exists for the new document page. If no ink layer exists for the page, processing returns to the document browser and the page is displayed normally. If an ink layer exists for the page, then in step  the ink layer is retrieved. In step , the pixels from the retrieved ink layer are blended with the displayed page and the resulting image appears on the computer display. Thereafter, processing returns to the browser. A separate ink layer file can be created for each document page, or one ink file can be created for an entire document and indexed according to pages on which the annotations appear. Other approaches are of course possible.","Thus has been described a system, method, and apparatus for annotating electronic document pages using an annotation editor that stores annotations independently of the content of the underlying document. It will be appreciated that many modifications and variations of the invention are possible, and the scope of the invention is not limited by the specific examples and descriptions herein."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 3","b":["302","301"]},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 4","b":"402"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 5","b":["501","502"]},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 6","b":"601"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 7","b":"701"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 9A"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 9B"}]},"DETDESC":[{},{}]}
