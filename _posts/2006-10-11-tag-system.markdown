---
title: Tag system
abstract: A monitoring device is configured to be attached to an agent to be monitored. The device includes sensor circuitry that detects or measures conditions relating to the environment, the agent or the agent's behavior. A microcontroller processes the conditions to produce event data, and a wireless transmitter transmits the event data to a remote host system. The conditions can include temperature, acceleration, the presence of another tag, or other conditions relating to the agent. The event data may relate to movement of the agent, an encounter with another tag, or other behavior of the agent, and may be stored to an internal memory. The monitoring device may also include a transmitter that transmits a signal, or tag identifier, that identifies the device. The event data may be reported as information relating to the behavior of the agent.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07616124&OS=07616124&RS=07616124
owner: Snif Labs, Inc.
number: 07616124
owner_city: Boston
owner_country: US
publication_date: 20061011
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["RELATED APPLICATION(S)","BACKGROUND","SUMMARY","DETAILED DESCRIPTION"],"p":["This application claims the benefit of U.S. Provisional Application No. 60\/725,109, filed on Oct. 11, 2005, and U.S. Provisional Application No. 60\/810,751, filed on Jun. 5, 2006. The entire teachings of the above applications are incorporated herein by reference.","A social network is a social structure made of nodes (individual people) and edges (connections between people). It indicates the ways in which people are connected through social familiarities including acquaintances, friends, and families.","\u201cSocial networking services\u201d refers to a class of online tools that enable participants to visualize, manage, and grow their social networks. Users of these websites value the services offered, primarily because they reinforce their connections with peers, introduce them to new individuals, and create opportunities to learn about ideas that people in their personal networks value.","Social networking websites often experience growth because each new member tends to invite their entire preexisting social network to join the new service. Attracted by the possibility of exponential growth, there are many contenders in the social networking service industry.","Personal electronic devices such as cell phones, digital cameras, and portable music players allow people to take their communication devices with them wherever they go. These devices are small digital computers, which have been designed to perform specific tasks. Cell phones for example exist primarily to place telephone calls, but are also used to send text messages, and store contact information.","Pet animals function as natural social devices. For example, walking a dog in a park can lead to conversations that one might not otherwise have. In this way, pets function as active icebreakers that will approach anyone without any notion of social inhibition. Pet walking is an example of a natural interaction in the physical world, which can introduce people, and establish new relationships.","An opportunity exists to improve existing social networking services and applications by using discrete and unobtrusive mobile electronic devices to automatically discover, verify, and characterize social interactions and encounters.","Embodiments of the present invention include a monitoring device comprising an enclosure that attaches to an agent to be monitored. The device may be an electronic tag, the enclosure being similar in form to a \u201cdog tag\u201d that is worn around a pet animal's neck. The enclosure houses sensor circuitry that detects or measures conditions relative to the enclosure, such as conditions relating to the environment, the agent or the agent's behavior. The enclosure also houses a microcontroller that processes the conditions to produce event data, and a wireless transmitter that transmits the event data to a remote host system. The conditions can include temperature, acceleration, the presence of another tag, or other conditions relating to the agent. The event data may relate to movement of the agent, an encounter with another tag, or other behavior of the agent, and may be stored to an internal memory. The monitoring device may also include a transmitter that transmits a signal, or tag identifier, that identifies the device. The device may also include a visual indicator, such as a light-emitting diode (LED), that indicates the status of the device or information relating to the agent.","In further embodiments, the device is a tag comprising electronics that record the activities and environmental conditions of a pet animal that wears the tag. The recorded information can be uploaded to a network server operating a network service community of pet owners and pets. The recorded data can enable the data mining of the structural features of the community as well as the computation of statistics about the observed behavior of the community members. Through a web site, SMS, and instant messaging clients, pet owners can remotely monitor their pets and receive notifications when pet-related events occur. Pet owners can also use an online interface to explore and refine the community of pets and pet owners.","Further embodiments of the present invention comprise a system of electronic devices and software that together allow users to explore the activities of their agents, who are associated with the devices. Devices may contain electronics that perform sensing, digital storage, and communication with other devices and base stations. Base stations may act as gateways between host software and devices, and they may also be used to charge devices. Host software runs on a personal computer and connects base stations to network services. Network services aggregate, process, and cross-reference data from devices. A website can provide a view of the data contained in the network services. Alternative viewing interfaces such as those used on the mobile devices connect to network services in order to access data from the devices.","A description of exemplary embodiments of the invention follows.",{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 1","b":["100","110","110","110","110","110","100","120","150","125","155","160","161","140","135","145"]},"The remote monitoring device  is powered by a battery , which can be rechargeable, and is connected to power management circuitry  for routing power to the device . The management circuitry  also supplies a signal to battery voltage sensor C indicating a voltage level of the battery . This signal can indicate whether the battery  should be recharged or replaced. The management circuitry  is also connected to the docking port , through which an electrical current may be routed to recharge the battery .","In addition to the battery sensor described above, the plurality of sensors  include a temperature sensor and an accelerometer for measuring environmental conditions relative to the device . The temperature sensor A receives an environmental input , and can be adapted to detect the ambient air temperature of the environment or the temperature of a nearby surface, such as the surface of an agent wearing the device . A 3-axis accelerometer B detects acceleration, deceleration and other movement of the device , utilizing four analog outputs to provide the measurements in real time to the MCU module . Alternatively, other sensors may be substituted for or added to the plurality of sensors , thereby providing other measurements relating to the environment or an agent. For example, alternative sensors could measure ambient light, humidity, altitude, or heart rate of the agent.","The MCU module  performs a number of functions as determined by the mode of operation of the remote monitoring device . Exemplary operations of the device  are described in further detail with reference to , below. The MCU  receives analog signals from the plurality of sensors , converting the signals to digital readings with an analog-to-digital converter (ADC). The MCU  captures and processes the readings according to one or more software or firmware programs stored at the MCU or the Flash memory . The readings may be processed at the MCU, for example, by sampling the readings at variable intervals, deriving a conditioned selection of readings, detecting an event based on the readings, or producing data relating to a set of readings. The processed event data may be stored to the external Flash memory  through a serial peripheral interface (SPI). The event data may also be sent to the radio (RF) module (at MCU ) with antenna , where it is transmitted via wireless communication  to a computer  or a remote device . The computer  may be a base station as described herein with reference to , a personal computer, or other system. The remote device  may be similar to the remote monitoring device . The RF module at MCU  may also receive wireless signals from the computer  or remote device, enabling data transfer or other communication.","The MCU  may be programmed to detect a particular reading or signal (\u201cevent\u201d) received from the analog sensors  or communication with a computer  or remote device . In response to the event, the MCU  may send a signal to the LED controller  indicating to activate one or more LED lights . The LED lights may turn on or enter a blinking pattern to indicate the occurrence of the event. For example, an LED may flash to indicate that the battery  is low on power, the ambient temperature has reached a threshold, or another remote device  is nearby.","A soft switch  connects to the MCU  and can be configured to toggle modes of operation of the remote monitoring device , such as power on, power off and low power operation. The MCU  also interfaces with a docking port , which can be connected to the port of a base station (described below with reference to ). Through this link, the MCU  can transfer data stored at the external Flash memory , as well as information about the device  such as hardware and software settings, storage capacity, and the firmware version. The MCU  can also receive commands and data from the base station, such as a command to update the MCU firmware, accompanied by updated firmware.","In further embodiments, the remote monitoring device  is a tag worn by a pet animal such as a dog, the pet animal being the agent monitored by the device . Sensor circuitry  detects or measures the temperature and acceleration of the pet animal, and the radio receiver at the MCU  receives signals from a second tag , the second tag being worn by a second pet animal. This data from the sensor circuitry  and radio receiver is processed by the MCU  to produce event data. The event data relates to the environment and the behavior of the pet animal, such as its activities (e.g., whether it is walking, running or at rest) and its interaction with other animals as evidenced by signals received by a second tag . The event data can be transferred to a computer system  in real time, or can be stored to a Flash memory  for transfer at a later time. The computer system  may include a base station, described herein with reference to , which communicates with the device  by receiving the event data and sending commands and other signals to the device . The computer system  can report the event data or transfer the data to a server on a computer network. A pet owner can access the computer system  or the network in order to monitor the behavior of his or her pet animal.",{"@attributes":{"id":"p-0032","num":"0031"},"figref":["FIG. 2","FIG. 1","FIG. 3","FIG. 4"],"b":["200","100","200","210","210","210","230","220","210"]},{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 3","b":["300","300","310","320","330"]},"Wireless negotiations between tags or between a tag and a base station are based on periodic pings containing unique ID information. During the base station communication process , the base station status is determined by listening for pings from a nearby base station. If it is determined that a base station is within range, the device enters the home state . At this state , the tag can record the encounter with the base station and can ask for any pending messages from the web server, such as one which might change the LED collar tone setting on the tag. The tag can then begin to stream its data back to the base station to be uploaded to a computer. This data may include lists of encounters with other tags and base stations, raw sensor data, or higher-level features computed on the sensor data. Depending on the application, the data retrieved wirelessly can be real-time or accessed from a pre-recorded log. Periodically, the tag checks to see if a base station is still present to receive its data stream. When a base station is no longer present, the tag enters the Away state . In this state , the tag terminates its data streams and waits for a base station to appear. During this time, the tag can record information about its activity state and received pings.","During a communication process  with another tag, the tag receives a ping from a second tag, and the ping is recorded as an encounter. Because the radio provides a received signal strength measurement, the distance between the two tags can also be roughly estimated. This measurement gives rise to two types of interactions: \u201cnear\u201d encounters  and stronger \u201cclose\u201d encounters . The tag is able to monitor several encounters from each category at the same time, so the states are not as distinct as the flow diagram implies. However, this view shows what happens to each new encounter quite clearly. When a tag is detected, the ping rate can be increased so that interactions are registered more quickly. Then, the ID of the encountered tag is recorded and a timer is initialized to measure the duration of the interaction. An LED sequence specific to a given pairing of tags can also be played. Finally, the average activity features observed over the period of an interaction can be logged to characterize the encounter. When no other tags are present, the device enters the Alone state , and lowers its ping rate to save power.","A third process  illustrates processing the accelerometer state. Modes of device operation can be changed according to accelerometer measurements, in order to save power and resources. For example, if there is no energy present on the accelerometer, the device is probably stationary and thus can rely on more sparse radio usage because it is unlikely to encounter new devices. The device may not require calculating received signals other than the accelerometer energy threshold. Thus, the tag may enter a low power mode  while accelerometer energy is below a first specified threshold, operating with minimal functions. A higher accelerometer energy level may indicate that the sensor data is more interesting, as various activities may be present. Typically, the more movement there is, the more likely interesting events will be observed. Therefore, once accelerometer energy surpasses the first threshold, the tag enters an \u201cinactive\u201d state , whereby feature calculation resources and RF protocol speed are increased. Further increase in accelerometer energy beyond a second threshold results in a transition to an \u201cactive\u201d state , whereby the tag may operate with a further increase in activity and resources. Conversely, a decrease in accelerometer energy can cause a transition to the \u201cinactive\u201d state , and further to the \u201clow power\u201d mode . Transitions between states - can be logged, transmitted to a computer system or stored to a memory in order to indicate the activity of an agent to which the tag is attached.",{"@attributes":{"id":"p-0037","num":"0036"},"figref":"FIG. 4","b":["400","400","400","420","430","440","450"]},"These processes - can be executed from a main loop  that checks a plurality of statuses. For example, the tag communicates with the base station to determine whether the tag firmware is out of date. If so, the tag enters the firmware update state , whereby updated firmware is downloaded and written to the tag. If the tag has stored event data that has not been sent to the base station, the tag may enter an uploading state , whereby the tag outputs event data read from the memory. If the tag battery is low in power, the tag enters a battery charge state , whereby the base station sends a power signal to charge the battery. If tag settings are modified by a user or the base station, the tag enters a state  whereby it receives updated configuration settings and updates the tag configuration accordingly. While inside each state, a status LED pattern can be triggered for user feedback. While the tag is docked, communication signals are sent through a wired serial interface connecting the tag and the docking port.",{"@attributes":{"id":"p-0039","num":"0038"},"figref":"FIG. 5","b":["500","510","520","530","520","520"]},{"@attributes":{"id":"p-0040","num":"0039"},"figref":["FIG. 6","FIG. 1"],"b":["600","600","100","600","645","600","620","120","600","665","600","685","690","685","690","620","625","625","620"]},"The docking port  corresponds to the docking port  of a tag with reference to  above, with corresponding power and serial connection. Two status LEDs  may be included to provide visual feedback to a user. The base station  can be programmed either via the USB connection  or via the JTAG programming interface . Further operations of the base station are described below with reference to the state diagram of .",{"@attributes":{"id":"p-0042","num":"0041"},"figref":"FIG. 7","b":["700","710","720","725"]},"The base station communicates information it receives from tags back to a computer system via a USB connection, where the data can be handled in a more flexible form. The tags may be docked (state ) or located within a range of wireless communication (state ). Event data can be streamed from the tags wirelessly when they are within range of the base station, as in the tag nearby state . Data can also be directly downloaded from memory when a tag is docked in the base station, as in the downloading data state . The base station may also negotiate tag maintenance consistent with the states expected above, with reference to , above. This functionality is provided in the states updating tag firmware  and changing tag settings .",{"@attributes":{"id":"p-0044","num":"0043"},"figref":["FIG. 8","FIG. 1","FIGS. 2","FIG. 5","FIG. 6","FIG. 7"],"b":["800","810","810","815","100","3","4","810","815","810","820","810","820","820","600","820","810","830","810","810","820","830"]},"Host software is run by the host computer , and the host computer  may connect to one or more base stations . The host software may provide status information, authenticate user accounts to the network service, and administer firmware updates to the base stations  and tags .","Further, the host computer  may communicate with a network server  via a network protocol such as HTTP, thereby transmitting the reported information to the network server  The network server stores the reported information to a database and provides network-based access to the reported information in one or more formats. For example, the network server may create a webpage at a web server, the page displaying the reported information and being accessible to the host computer  or another computer  that has a network connection and a web browser.","The network service may comprise addressable computers connected to the internet that provide an interface to the host software. One embodiment of the network service is a centralized server that exports a web services application programming interface (API). This interface provides functionality for authentication, authorization, uploading, and manipulation of uploaded data. Users at a computer ,  may be able to login to network services with a username and password, thereby accessing the website, host software or other viewing interfaces. A website can provide a full-featured interface to the reported information uploaded by the tags  to the network service at the network server . The website may be configured so that users can log in, view historical data, set preferences and privacy levels, and navigate through the interaction based social networks.","Additional interfaces to the reported information are made possible by a network service component API. Among the possible embodiments are instant messaging services, text messaging, email, and the display of information at the tag itself. For example, the network server  may operate an instant messaging (IM) service, whereby the reported information is sent to an IM client running on another computer . In another example, the network server  may operate a short message service (SMS), whereby reported information is send to a mobile device  such as a mobile telephone that is configured to receive SMS messages. As a result, a user can access the reported information of the agent's behavior through a variety of means.",{"@attributes":{"id":"p-0049","num":"0048"},"figref":"FIG. 9","b":"940"},"Packet  is a \u201ctag ping\u201d packet. This packet is broadcast by tags at a regular interval, and serves to simply identify the tag to neighboring devices. The opcode for a \u201ctag ping\u201d operation is 0x01 and the length is 6 bytes. The Data for this type of packet is 0xAA. Packet  is a \u201cbase station ping\u201d packet, which is transmitted by a base station at regular intervals to identify the base station to nearby devices. The packet is identical to the Tag Ping packet, with the exception that the opcode is 0x02.",{"@attributes":{"id":"p-0051","num":"0050"},"figref":"FIG. 10"},"Initially the tag must establish communication with a base station. The tag and base station identify themselves to one another by exchanging radio packets. Meanwhile the client software running on the host computer has logged into the server and received security credentials that allow the client to send data packets from the tag.","Once the tag has identified the base station as a trusted entity, the tag transmits data packets having encoded sensor data to the base station. The base station forwards these packets to the client software at the host computer via a USB interface. The client software sends periodic summary data dumps to the server. Because the latency of the internet is greater than that of USB connected devices, the client attempts to bundle large number of data packets together before contacting the server.","Upon receiving the bundled packets, the server un-bundles and parses the raw packet data, described further with reference to , below.",{"@attributes":{"id":"p-0055","num":"0054"},"figref":"FIG. 11","b":["1120","1131","1130"]},"Soft IDs are used by tags whenever they are transmitting by radio (step ). The Soft IDs must be mapped to Agents on the server, because soft IDs are transient. Data is then unpacked from the raw data dump. For example, any data with a data type ID of 1 are converted into an encounter, and stored in the encounters table . The encounters table  includes fields for agent a, agent b, and time of encounter.","The remaining data items are then stored in the data table  on the server, as shown in example Table 1, below.",{"@attributes":{"id":"p-0058","num":"0057"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":"TABLE 1"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Event data as stored at a database."}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"6"},"colspec":[{"@attributes":{"colname":"1","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"5","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"6","colwidth":"70pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["data","Agent","Dump","Data",{},{}]},{"entry":["ID","ID","ID","Type","Data Time","Data Value"]},{"entry":{"@attributes":{"namest":"1","nameend":"6","align":"center","rowsep":"1"}}},{"entry":["73","1","2","4","9\/25\/06 19:18","0.2211, 0.7601, 0.09"]},{"entry":["74","1","2","4","9\/25\/06 19:18","0.0235, 0.7467, 0.0"]},{"entry":["75","1","2","1","9\/25\/06 19:18","2"]},{"entry":["76","1","2","2","9\/25\/06 19:18","0.8770, 0.1729, 0.144"]},{"entry":["77","1","2","4","9\/25\/06 19:18","0.4491, 0.5196, 0.31"]},{"entry":["78","1","2","4","9\/25\/06 19:18","0.5381, 0.9056, 0.54"]},{"entry":["79","1","2","2","9\/25\/06 19:18","0.5459, 0.7554, 0.73"]},{"entry":["80","2","6","1","9\/25\/06 19:27","1"]},{"entry":["81","2","6","4","9\/25\/06 19:27","0.0932, 0.0135, 0"]},{"entry":["82","2","6","4","9\/25\/06 19:27","0.6866, 0.4489, 0.126"]},{"entry":["83","2","6","2","9\/25\/06 19:27","0.2695, 0.9532, 0.83"]},{"entry":["84","2","6","4","9\/25\/06 19:27","0.9061, 0.3769, 0.79"]},{"entry":["85","2","6","3","9\/25\/06 19:27","0.1623"]},{"entry":["86","2","6","3","9\/25\/06 19:27","0.9323"]},{"entry":["87","2","6","1","9\/25\/06 19:27","1"]},{"entry":["88","2","6","2","9\/25\/06 19:34","0.1829, 0.8685, 0.72"]},{"entry":["89","2","6","4","9\/25\/06 19:34","0.1734, 0.7418, 0.77"]},{"entry":["90","2","6","1","9\/25\/06 19:34","1"]},{"entry":{"@attributes":{"namest":"1","nameend":"6","align":"center","rowsep":"1"}}}]}}]}}},"Regarding table 1, Data ID is a unique key identifying each data entry. Agent ID identifies to the agent that collected the data. The Dump ID is a foreign key that refers to a table in which the un-processed data is stored in binary format. The data type is a foreign key field, which maps to one of 4 data types: Encounter, Accelerometer, Energy, and RAW sensor values. The data time is the time that the data was logged. Data Value is particular to each data type. For example, in the case of encounters the value is the software ID of the encountered tag.","While this invention has been particularly shown and described with references to example embodiments thereof, it will be understood by those skilled in the art that various changes in form and details may be made therein without departing from the scope of the invention encompassed by the appended claims."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The foregoing will be apparent from the following more particular description of example embodiments of the invention, as illustrated in the accompanying drawings in which like reference characters refer to the same parts throughout the different views. The drawings are not necessarily to scale, emphasis instead being placed upon illustrating embodiments of the present invention.",{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 11"}]},"DETDESC":[{},{}]}
