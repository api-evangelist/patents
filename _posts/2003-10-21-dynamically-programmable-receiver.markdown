---
title: Dynamically programmable receiver
abstract: Disclosed is a novel and improved dynamically programmable linear receiver which provides the required level of system performance with reduced power consumption. In one embodiment, disclosed is a programmable receiver coupled to a jammer detector for detecting the presence of jamming in an RF signal, the jammer detector coupled to a state machine, and the state machine having means for controlling the receiver based on the results of the jammer detector detecting the presence of jamming in the RF signal. The disclosed receiver is capable of detecting the presence of jammers, with a means to adjust the bias current downward if no jammers are present, which improves the receiver's standby time and prolongs battery life.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07130602&OS=07130602&RS=07130602
owner: Qualcomm Incorporated
number: 07130602
owner_city: San Diego
owner_country: US
publication_date: 20031021
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","FIELD OF THE DISCLOSURE","BACKGROUND","SUMMARY","DETAILED DESCRIPTION"],"p":["This application claims the benefit of U.S. Provisional Application Ser. No. 60\/423,218 filed on Oct. 31, 2002 and U.S. Provisional Application Ser. No. 60\/471,227 filed on May 16, 2003.","The present disclosure relates to wireless telecommunications and, more particularly, relates to an improved programmable linear receiver.","The design of a high performance receiver is made challenging by various design constraints. First, high performance is required for many applications. High performance can be described by the linearity of the active devices (e.g. amplifiers, mixers, etc.) and the noise figure of the receiver. Second, for some applications such as in a cellular communication system, power consumption is an important consideration because of the portable nature of the receiver. Generally, high performance and high efficiency are conflicting design considerations.","An active device has the following transfer function:\n\n()=+higher order terms,\u2003\u2003(1)\n\nwhere x is the input signal, y(x) is the output signal, and a, aand aare coefficients which define the linearity of the active device. For simplicity, higher order terms (e.g. terms above third order) are ignored. For an ideal linear, active device, the coefficients aand aare 0.0 and the output signal is simply the input signal scaled by a. However, all active devices experience some amount of non-linearity which is quantified by the coefficients aand a. Coefficient adefines the amount of second order non-linearity and coefficient adefines the amount of third order non-linearity.\n","Most communication systems are narrow band systems which operate on an input RF signal having a predetermined bandwidth and center frequency. The input RF signal typically comprises other spurious signals located throughout the frequency spectrum. Non-linearity within the active device causes intermodulation of spurious signals, resulting in products which may fall into the signal band.","The effect of second order non-linearity (e.g. those caused by the xterm) may be reduced or eliminated by careful design methodology. Second order non-linearity produces products at the sum and difference frequencies. Typically, the spurious signals which can produce in-band second-order products are located far away from the signal band. However, third order non-linearity are more problematic. For third order non-linearity, spurious signals x=g\u00b7cos(wt)+g\u00b7cos(wt) produce products at the frequencies (2w\u2212w) and (2w\u2212w). Thus, near band spurious signals (which are difficult to filter) can produce third order intermodulation products falling in-band, causing degradation in the received signal. To compound the problem, the amplitude of the third-order products are scaled by g\u00b7gand gg. Every 1 dB increase in the input RF signal results in 1 dB increase in the output RF signal but 3 dB increase in the third order products.","The linearity of a receiver (or the active device) can be characterized by the input-referred third-order intercept point (IIP3). Typically, the output RF signal and the third-order intermodulation products are plotted versus the input RF signal. As the input RF signal is increased, the IIP3 is a theoretical point where the desired output RF signal and the third-order products become equal in amplitude. The IIP3 is an extrapolated value since the active device goes into compression before the IIP3 point is reached.","Receivers are employed for many communication applications, such as cellular communication systems. Example cellular communication systems include Code Division Multiple Access (CDMA) communications systems, Time Division Multiple Access (TDMA) communication systems, and analog FM communication systems. The use of CDMA techniques in a multiple access communication system is disclosed in U.S. Pat. No. 4,901,307, entitled \u201cSPREAD SPECTRUM MULTIPLE ACCESS COMMUNICATION SYSTEM USING SATELLITE OR TERRESTRIAL REPEATERS\u201d, and U.S. Pat. No. 5,103,459, entitled \u201cSYSTEM AND METHOD FOR GENERATING WAVEFORMS IN A CDMA CELLULAR TELEPHONE SYSTEM\u201d, both assigned to the assignee of the present disclosure and incorporated by reference herein.","In cellular applications, it is common to have more than one communication system operating within the same geographic coverage area. Furthermore, these systems can operate at or near the same frequency band. When this occurs, the transmission from one system can cause degradation in the received signal of another system. CDMA is a spread spectrum communication system which spreads the transmit power to each user over the entire 1.2288 MHz signal bandwidth. The spectral response of an FM-based transmission can be more concentrated at the center frequency. Therefore, FM-based transmission can cause jammers to appear within the allocated CDMA band and very close to the received CDMA signal. Furthermore, the amplitude of the jammers can be many times greater than that of the CDMA signal. These jammers can cause third-order intermodulation products which can degrade the performance of the CDMA system.","Typically, to minimize degradation due to intermodulation products caused by jammers, the receiver is designed to have high IIP3. However, design of a high IIP3 receiver requires the active devices within the receiver to be biased with high DC current, thereby consuming large amounts of power. This design approach is especially undesirable for cellular application wherein the receiver is a portable unit powered by a battery and power is limited.","Several techniques have been deployed in the prior art to address the need for high IIP3. One such technique, which also attempts to minimize power consumption, is to implement the gain stage with a plurality of amplifiers connected in parallel and to selectively enable the amplifiers as higher IIP3 is needed. This technique is disclosed in detail in U.S. Pat. No. 6,069,525, entitled \u201cDUAL MODE AMPLIFIER WITH HIGH EFFICIENCY AND HIGH LINEARITY\u201d, assigned to the assignee of the present disclosure and incorporated by reference herein. Another technique is to measure the received RF (radio-frequency) signal power and adjust the gain of the amplifiers based on the amplitude of the RF signal power. This technique is disclosed in detail in U.S. Pat. No. 5,722,061, entitled \u201cMETHOD AND APPARATUS FOR INCREASING RECEIVER POWER IMMUNITY TO INTERFERENCE\u201d, assigned to the assignee of the present disclosure and incorporated by reference herein. These techniques improve the IIP3 performance.","An example block diagram of a receiver architecture of the prior devices is shown in U.S. Pat. No. 6,498,926 entitled \u201cPROGRAMMABLE LINEAR RECEIVER HAVING A VARIABLE IIP3 POINT\u201d, which is assigned to the assignee of the present disclosure and the patent is incorporated by reference in its entirety as if set out in full herein.","Receiver architectures to the present date have several drawbacks. First, the active devices are typically biased to a high DC current to provide the highest required IIP3. This has the effect of operating the receiver at the high IIP3 operating point at all times, even though high IIP3 is not required most of the time. Second, the high IIP3 can be improved by adjusting the gain of Automatic Gain Control (AGC) amplifier; however, lowering the gain of the amplifier can degrade the noise figure of the receiver.","Disclosed is a novel and improved dynamically programmable linear receiver which provides the required level of system performance with reduced power consumption. In one embodiment, disclosed is a programmable receiver with a jammer detector for detecting the presence of jamming in an RF signal, the jammer detector is coupled to a state machine, and the state machine having means for controlling the receiver based on the results of the jammer detector detecting the presence of jamming in the RF signal. The receiver includes RF analog and digital circuitry. Therefore, disclosed is a receiver that is capable of detecting the presence of jammers, with a means to adjust the bias current downward if no jammers are present, which improves the receiver's standby time and prolongs battery life.","In another embodiment, disclosed is a programmable receiver with a transmit rejecting circuit, such as a surface acoustic wave (SAW) filter. A mixer is coupled to the output of the transmit rejecting circuit and an oscillator is coupled to the mixer. A low pass filter is coupled to the output of the mixer and a jammer detector is coupled to the output of the mixer before the input of the low pass filter. The jammer detector may be located anywhere in the receiver before the lowpass filter.","Also disclosed is a method of providing programmable linearity in a receiver, including the steps of detecting the presence of jamming in the RF signal, providing the results of the detection of the presence of jamming in the RF signal to a state machine, and the state machine controlling the current or filter, or both, of the receiver based on the results of detecting the presence of jamming in the RF signal. Or, in the alternative, the state machine may control the current or the filter, or a combination of the current and the filter.","Also disclosed is a method of providing programmable linearity in a receiver, including the steps of detecting the presence of jamming in an RF signal, measuring the amount of jamming in the RF signal, comparing the amount of jamming in the RF signal versus a threshold amount, and providing the results of the measured amount of jamming in the RF signal to a state machine, wherein the state machine controls the receiver based on the results of the measured amount of jamming in the RF signal so as to lower the power consumption of the receiver when jamming is not present in the RF signal. The receiver may be an analog or a digital receiver.","The receiver of the present disclosure provides the required level of system performance and minimizes power consumption by any wireless device that is powered by a battery by controlling the DC bias of the active devices. The receiver of the present disclosure operates in a jammer present mode, and a no-jammer present mode, and the receiver is capable of detecting the presence of jammers, as will be described in detail below and, the receiver adjusts a combination of the bias current, effective number of bits in the analog to digital converter, or the sample rate of the digital circuitry and programs filters accordingly in the absence of jammers, which lowers power consumption and thereby improves standby time by prolonging battery life.",{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 1","b":["102","106","106","110","110","110","110","112","114","112","112","118","118","120","118","112","112","122","118","122"]},"The output of the comparator  is coupled to a baseband processor, or by way of example, a mobile station modem (MSM) , or the like, which includes a state machine  coupled to a receiver. The baseband processor  provides demodulation functions, such as CDMA demodulation. As described below, the state machine determines and may control many items, including whether the receiver should be in turbo mode or nonturbo mode. Generally, turbo mode is selected if a few characteristics are present in the receiver, such as the presence of strong interference (a jammer), poor signal-to-noise ratio,. If the signal characteristics or thresholds are not met, then the receiver goes into nonturbo mode. By way of example, using a one bit input to the state machine, the state machine utilizes a truth table as follows:",{"@attributes":{"id":"p-0032","num":"0031"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"70pt","align":"left"}}],"thead":{"row":[{"entry":[{},{"@attributes":{"namest":"offset","nameend":"3","align":"center","rowsep":"1"}}]},{"entry":[{},"JAMMER","SIGNAL","STATE"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"3","align":"center","rowsep":"1"}}]}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"High","Weak","Turbo"]},{"entry":[{},"Low","Weak","Non-Turbo"]},{"entry":[{},"High","Strong","Turbo"]},{"entry":[{},"High","Very Strong","Non-Turbo"]},{"entry":[{},"Low","Strong","Non_Turbo"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"3","align":"center","rowsep":"1"}}]}]}}}}},"Another example of an alternative embodiment is shown in a truth table shown in , wherein the output of the analog to digital converter is coupled to a baseband processor, or the like. The baseband processor may include a state machine coupled to a receiver. The state machine determines the receiver's configuration. The operating modes of the receiver include high and low linearity, low noise, and high and low AGC dynamic range. The channel filter modes include low ICI, matched, maximal jammer rejection, and bypass mode. The bypass mode provides only minimal anti-aliasing functionality. The state machine takes as inputs the output of the jammer detector, an estimate of Ecp\/Io, if required, and a measurement of signal strength. The output is linearity state, the state of the LPF, and receiver gain. Matched in the table means there is a matched filter and Ecp represents a measurement of signal in the system. An \u201cX\u201d in the truth table denotes an element that is not required to determine the output of the state machine.","As further explained below, by observing the output of the jammer detector and received signal strength indicator (RSSI), the receiver can be configured for optimal performance. The number of bits in the analog to digital converter (ADC), the filter bandwidth for pulse shaping, and linearity for jammer immunity are controlled. In turbo mode, the filter is optimized for jammer rejection, and in nonturbo mode, the filter's is pulse shaping is optimized for low ISI.","The state machine, according to the present disclosure, may control the state of the receiver, that is turbo mode state or non-turbo mode state, by evaluating Ecp\/Io estimate or the power control bits, only the jammer detection, or a combination of evaluating the power control bits and the jammer detection. The state machine also may control the receiver by making dynamic adjustments based on a dynamic range of the receiver by averaging Ecp\/Io or power control bits. In addition, in a shared memory situation, the state machine may look at multiple jammers over time, and by utilizing a fast fourier transform (FFT) calculation, the state machine may detect harmful jammers and control the receiver accordingly.","The output of the state machine is to a serial bus interface (SBI) which feeds back to SBI  and the chipset . The jammer detector detects the presence of jamming in the RF signal and if jamming is present in the RF signal, the state machine  will, make a decision regarding the power consumption level of the receiver based on a signal level and based on the presence of jamming in the RF signal. The state machine  then communicates with receiver  and  to program a mode that is either low current or high current Specific components, such as the mixer , may be programmed into a low current mode to lower the power consumption of the receiver, or conversely may be programmed into a high current mode. In the digital domain, the coefficients of a programmable digital filter may be adjusted to compensate for a lower power consumption to duplicate what may be done with the present disclosure in the analog domain. Therefore, the programmable receiver disclosed herein is a dynamically programmable receiver, wherein the power consumption mode may be adjusted based upon the channel conditions that the receiver is experiencing. The state machine further includes means for maintaining the constant gain in the receiver, such as through a gain offset, for the transition to and from turbo mode to nonturbo mode.",{"@attributes":{"id":"p-0037","num":"0036"},"figref":["FIG. 2","FIG. 2"],"b":["202","204","202","206"]},{"@attributes":{"id":"p-0038","num":"0037"},"figref":"FIG. 3","b":["302","304","306"]},{"@attributes":{"id":"p-0039","num":"0038"},"figref":"FIG. 4"},"The requests for more or less traffic channel gain are determined by the state machine. If the turbo-mode is in the hold state, and if the channel has a poor Ecp\/Io, the system will hold at turbo-mode for a period of time, which allows for settling and keeps the receiver from chattering between states. Therefore, a timer in the system (not shown) provides temporal hysteresis. Therefore, the system may include temporal hysteresis with a time-out at each state. Also, the system is configured so that turbo-mode is established quickly, but so that turbo-mode is slower to transition to nonturbo mode, therefore the state machine is powered on in the turbo-mode hold state, and the timer is long enough to estimate the Ecp\/Io or up bits by averaging the power control bits or the Ecp\/Io, or both, yet short enough to save current Therefore, the receiver gets to turbo-mode quickly and goes to non-turbo mode cautiously. Further, the timer provides temporal hysteresis so the receiver does not oscillate between modes. Therefore, the turbo-mode may be invoked either through jammer detection through the circuit, or by counting power control up bits.","In the power control, typically present are up bits and down bits, and when more traffic channel gain is requested, the request is equal to an up bit, or when less traffic channel gain is requested the less traffic request is determined to be a down bit. In one example, eight consecutive bits are sampled over a period of 6.25 msec and if five or more of the eight consecutive are up bits, then the up bits are greater than fifty percent, however, any other method of counting and comparing up bits to down bits may be used.","Therefore, as shown in state , in the turbo-mode hold state, the mode is equal to turbo-mode and the inquiry is made as whether the up bits are greater than fifty percent or whether the Ecp\/Io is below a determined threshold and whether jamming has been detected in the RF signal, depicted here as jam_det=HIGH. As shown in , if the timer expires and up bits are greater than fifty percent or whether Ecp\/Io is less than a determined threshold, or if jam_det is equal to logical HIGH, then the turbo-mode hold state is converted to turbo-mode as shown in . A determination is then made by the state machine whether up bits are less than fifty percent or whether Ecp\/Io is greater than a determined threshold and whether jam_det is equal to logical LOW, as shown in . If true, then the turbo-mode state shown in  is converted to non-turbo-mode shown in . Then a determination is made whether up bits are greater than fifty percent or whether Ecp\/Io is less than a determined threshold and whether jam_det is equal to HIGH; if yes, then as shown is , the non-turbo-mode  is changed to turbo-mode hold state in . From the turbo-mode hold state if time_out AND (up bits less than 50% or Ecp\/Io is greater than a threshold) and jam_det is equal to LOW as shown in , then turbo-mode hold state  is changed to non-turbo-mode as shown . Also, turbo mode hold state is changed to non-turbo mode when the received power, Pr is above a above a threshold, RSSI_min . RSSI is the received signal strength indicator. RSSI is reported in mobile phones through the AGC (automatic gain control). RSSI_min is the minimum power above which the receiver defaults to non-turbo mode, after the timer expires. Above this threshold, the jammers are typically inconsequential. The threshold is programmable.","Therefore, disclosed herein are multiple embodiments to provide a state machine. The state machine may be incorporated into an integrated chip (IC), otherwise known as an integrated circuit. For example, a baseband processor, RF chip, and similar chips. The state machine can be configured to operate in a standalone IC or in combination with other integrated chips.","The state machine may be incorporated into the hardware with the baseband processor interfacing with the RF chip. Another embodiment includes a state machine that is software controlled, which provides a flexible way to control the receiver by utilizing software. By utilizing software, the parameters and architecture may be modified with a simple software revision.","Another embodiment is shown in , wherein a simple and direct control is providing through a switch or combination of switches. For example, if the RF chip jammer detector goes to HIGH, in an autonomous fashion, the output is fed to bias control circuitry on the RF chip itself to control the bias for multiple or all of the circuit blocks on the chip.  illustrates circuit , which could be located on a chip or off of a chip. The circuit includes several of the components shown in , but circuit  includes the bias control , to control the bias for the circuit blocks on the chip. Channel power detector and filter controller  adjusts the filter ICI or bypasses a portion of the filter. The output of the circuit is fed to a baseband processor as shown at . Accordingly, this embodiment may be incorporated into an RF chip without a baseband processor.",{"@attributes":{"id":"p-0046","num":"0045"},"figref":["FIG. 8","FIG. 8"],"b":["800","802","804","806","806","804","808","810","810","812","814"]},{"@attributes":{"id":"p-0047","num":"0046"},"figref":["FIG. 5","FIG. 5","FIG. 5"],"b":["502","504","506","508","510","512","514"]},{"@attributes":{"id":"p-0048","num":"0047"},"figref":"FIG. 7","b":"706"},"Therefore, disclosed is a programmable receiver and method for providing the same, wherein the receiver includes a jammer detector coupled to a state machine and the state machine controls the power consumption level based on the detection of jamming in the RF signal or based on signal conditions. Also disclosed is a way to control current in a receiver, wherein the apparatus may take the form a receiver with a baseband processor, or may be incorporated on an RF chip independently, wherein the RF chip communicates with a baseband processor. The current also may be controlled by use of hardware only, software only, or a combination of both hardware and software. In addition, the state machine may be logic circuitry that reads the state of the machine and that has multiple inputs to the receiver to determine the appropriate state of the receiver and to place the receiver in the appropriate state. The controlling of the receiver may take place by adjusting, switching, bypassing, biasing, parsing, turning on or off, or otherwise manipulating components in the receiver or system.","The previous description of the disclosure is provided to enable any person skilled in the art to make or use the present disclosure. The various modifications to these embodiments will be readily apparent to those skilled in the art, and the generic principles defined herein may be applied to other embodiments without the use of the inventive faculty. Thus, the present disclosure is not intended to be limited to the embodiments shown herein but is to be accorded the widest scope consistent with the principles and novel features disclosed herein."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The disclosure will now be described in greater detail with reference to the preferred embodiments illustrated in the accompanying drawings, in which like elements bear like reference numerals, and wherein:",{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 9"}]},"DETDESC":[{},{}]}
