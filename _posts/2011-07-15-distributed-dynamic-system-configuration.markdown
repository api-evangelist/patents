---
title: Distributed dynamic system configuration
abstract: Reliably making configuration changes to distributed systems, including receiving commands for multiple configuration changes, subdividing configuration changes into separate tasks, and performing those tasks at each node. A configuration element receives sets of configuration change commands, acknowledging them so the user need not wait before issuing additional commands. Tasks are determined, each including consistent changes to system configuration, and each including single-device tasklets. Each particular tasklet might be assigned to a particular single device, or to any single device in the system. Next tasks are performed when tasklets are complete. If tasklets are not timely performed due to nodes which are relatively unresponsive, those nodes are marked “failed.” When a failed node returns to responsiveness, it marks itself “recovering.” When a recovering node catches up, it marks itself “operational.” Updates by failed or recovering nodes are skipped while synchronizing with operational nodes.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08949305&OS=08949305&RS=08949305
owner: Scale Computing, Inc.
number: 08949305
owner_city: Indianapolis
owner_country: US
publication_date: 20110715
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND","SUMMARY OF THE DESCRIPTION","DESCRIPTION","DEFINITIONS AND NOTATIONS","Alternative Embodiments"],"p":["Distributed computing systems include multiple components, also called \u201cnodes,\u201d each particular one of which typically includes information about its state, particularly including information for configuring that particular node. For example, each particular node typically includes information for initializing that particular node. When configuring a distributed computing system, each of the nodes requiring configuration information are involved in the process of configuration.","A first problem in the known art can occur when one of those multiple nodes is non-responsive. For just some examples, a node in a computer network might have crashed, might be powered-down, might be suspended (either by its operator or otherwise), might be too busy to timely respond, or might be unable to achieve connectivity with the rest of the distributed system. When this occurs, configuration of the distributed system waits for the non-responsive node to become responsive again. This can present one of several problems. First, making a configuration change made to the distributed system waits for that non-responsive node to become responsive again, possibly taking a very long time. Second, if a configuration change is needed to bring the non-responsive node back into the system, manual intervention might be needed, such as by an operator for the distributed system.","Known systems include making such configuration changes manually, that is, by having an operator change the configuration information in use by various nodes in the distributed system by editing configuration information at each node, or substituting new configuration information at each node. While these known systems might be able to adequately make configuration changes, they are subject to at least the following drawbacks. First, making configuration changes manually is relatively slow, at least in the sense that operator changes to the configuration information at each node involve relatively many operations to be performed by that operator. Second, making configuration changes manually is relatively subject to error, at least in the sense that it is relatively probable that a human operator will make incorrect changes, or will make changes which are inconsistent across the distributed system.","A second problem in the known art can occur when attempting to make more than one change to the configuration of the distributed system. For just one example, after making a first configuration change, an operator for the distributed system might desire to make a second configuration change. If each of the nodes requiring configuration information is involved in each configuration change, that operator must wait for the first configuration change to finish before starting the second configuration change.","We provide techniques for reliably making changes to configuration information for distributed systems. These techniques might include receiving commands for multiple such configuration changes, subdividing those configuration changes into separate tasks to be performed, and performing those separate tasks at substantially each node in the distributed system.","In one embodiment, a configuration element receives commands from an operator or other user, regarding a set of configuration changes to be made. The configuration element might receive one or more sets of such commands, in an order as entered by the user. For each set of commands, the configuration element returns substantially immediately to the user with an acknowledgement of receipt of those commands, and with an acknowledgement that the commands are about to be performed. We provide a techniques in which there is no particular need to force the user to wait for any one set of commands to complete, before issuing additional such commands.","The configuration element, in response to each set of commands, determines a set of tasks to be performed to make changes to configuration information for the system. In one embodiment, each task includes a change which, if performed, makes a consistent change to configuration information for the system. In one embodiment, each task includes one or more tasklets, each of which can be performed at a single device. In many cases, each particular tasklet is assigned to an associated particular single device; however, in some cases, one or more particular tasklets are assigned to be performed by any single device in the distributed system. Performing all tasklets assigned to a task implies the entire task is complete; the configuration element moves on to a next task.","Each change to configuration information includes changes, either to one or more databases identifying configuration information for the distributed system, or to one or more databases identifying configuration information for individual nodes associated with the system, some combination or conjunction thereof, or otherwise. In one embodiment, databases identifying configuration information for the distributed system include information identifying tasks and tasklets, as described above. In one embodiment, configuration information for individual nodes include configuration files, for example without limitation, initialization files, to be used by those individual nodes during operation, at a start of operation, some combination or conjunction thereof, or otherwise.","In one embodiment, the databases identifying configuration information for the distributed system also identify whether those tasks and tasklets to make changes to that configuration have been performed. If the configuration element identifies any tasks or tasklets which are not timely performed, it determines whether the nodes to which those tasks have been assigned are still operational in a substantially timely manner. If the configuration element identifies any nodes whose tasklets are unlikely to be substantially timely performed, the configuration element marks those nodes as \u201cfailed,\u201d or an equivalent thereof. When a failed node returns to being responsive, it determines if it is lagging operation for making changes to configuration information; if so, it marks itself as \u201crecovering,\u201d or an equivalent thereof. When a recovering node catches up with changes to configuration information, it marks itself as \u201coperational,\u201d or an equivalent thereof. In one embodiment, the configuration element skips updates by failed or recovering nodes, while synchronizing with operational nodes.","While this application sometimes describes particular errors, inconsistencies, or tests relating to particular hardware or software, there is no intent to restrict the description to the specific concerns mentioned, or to the specific hardware or software mentioned. In general, references to any particular concerns should be read as applicable to other and further concerns, whether of a similar nature or otherwise. In general, references to any particular hardware or software should be read as applicable to software (instead of hardware), or hardware (instead of software), or to some combination or conjunction thereof, whether of a similar nature or otherwise.","Generality of the References","This application should be read in the most general possible form. This includes, without limitation, the following:","References to contemplated causes and effects for some implementations do not preclude other causes or effects that might occur in other implementations.","References to one embodiment or to particular embodiments do not preclude alternative embodiments or other embodiments, even if completely contrary, where circumstances would indicate that such alternative embodiments or other embodiments would also be workable.","References to particular hardware or software should be read as also applicable to software (instead of hardware), or hardware (instead of software) or to some combination or conjunction thereof, whether of a similar nature or otherwise.","References to particular reasons or to particular techniques do not preclude other reasons or techniques, even if completely contrary, where circumstances would indicate that the stated reasons or techniques are not as applicable.","References to \u201cpreferred\u201d techniques generally mean that the inventors contemplate using those techniques, and think they are best for the intended application. This does not exclude other techniques for the invention, and does not mean that those techniques are necessarily essential or would be preferred in all circumstances.","References to specific techniques include alternative and more general techniques, especially when discussing aspects of the invention, or how the invention might be made or used.","Generality of the Techniques","Technologies shown or suggested by this description should also be thought of in their most general possible form. This includes, without limitation, the following:","The phrases and terms \u201ccausing,\u201d \u201cdirecting,\u201d \u201cinstructing,\u201d \u201cto cause,\u201d \u201cto direct,\u201d \u201cto instruct\u201d (and similar phrases and terms) generally indicates any technique in which one or more first devices or methods induce one or more second devices or methods to take action, whether or not that action is assured (for example and without limitation, including a message, a posted change to a data structure, or otherwise).","The terms \u201ccommand\u201d or \u201cinstruction\u201d (and similar phrases and terms) generally indicate any information or other arrangement or disposal or matter or energy, having the property of being interpretable by a computing device, or other device, to perform operations (possibly conditional operations, parallel operations, pipelined operations, or other dispositions of method steps or operations as might be known or developed in the many fields of computing science), whether or not responsive to inputs, states or state-changes, or other instructions, from any source whatever, or otherwise, or combinations or conjunctions thereof.","The phrases and terms \u201cconstantly,\u201d \u201ccontinually,\u201d \u201cfrom time to time,\u201d \u201coccasionally,\u201d \u201cperiodically\u201d (and similar phrases and terms) generally indicate any case in which a method or technique, or an apparatus or system, operates over a duration of time, including without limitation any case in which that operation occurs only part of that duration of time. For example and without limitation, these terms would include, without limitation, methods which perform an operation as frequently as feasible, on a periodic schedule such as once per second or once per day, in response to an alarm or trigger such as a value reaching a threshold, in response to a request or an implication of a request, in response to operator intervention, otherwise, and to combinations and conjunctions thereof.","The phrases and terms \u201cdata,\u201d \u201cinformation\u201d (and similar phrases and terms) generally indicate any form of bits\/digits or values (whether analog, digital, or otherwise), collection or content, coincidence or correlation (whether causal or otherwise), evidence or logical tendency (whether probabilistic, pseudo-probabilistic or otherwise), or other indication of any kind from which a computing device, Turing-equivalent device, user, Artificial Intelligence, or other thinking being, might be able to draw conclusions.","The phrases and terms \u201cdata structure,\u201d \u201cdatabase\u201d (and similar phrases and terms) generally indicate any element in a computing device, or storage device, or other device, capable of maintaining or identifying information (for example but without limitation, data or instructions, status information, synchronization information, and combinations or conjunctions thereof) for possible use by a computing device or process.","The phrases and terms \u201cdistribute,\u201d \u201cto distribute\u201d (and similar phrases and terms) generally indicate any case in which one or more first devices or methods, induce information (for example but without limitation, data or instructions) to appear at one or more second devices or methods, whether or not that information is assured to appear thereat (for example and without limitation, including a message, a posted change to a data structure, or otherwise).","The phrases and terms \u201ceffect,\u201d \u201cwith the effect of\u201d (and similar phrases and terms) generally indicate any natural and probable consequence, whether or not assured, of a stated arrangement, cause, method, or technique, without any implication that an effect or a connection between cause and effect are intentional or purposive.","The phrases and terms \u201cmethods, physical articles, and systems,\u201d \u201ctechniques\u201d (and similar phrases and terms) generally indicate any material suitable for description, including without limitation all such material within the scope of patentable subject matter, or having ever been considered within the scope of patentable subject matter, or which might colorably be within the scope of patentable subject matter, notwithstanding most recent precedent.","The phrase \u201con its own initiative\u201d (and similar phrases and terms) generally indicates that one or more devices or methods operate without instruction from an external source. For example and without limitation, a first device might operate \u201con its own initiative\u201d if it acts responsive to data or instructions at that first device, or responsive to data or instructions accessible by that first device, or otherwise without being explicitly directed by a second devices.","The phrases and terms \u201cpseudo-random,\u201d \u201crandom\u201d (and similar phrases and terms) generally indicate any technique of any kind, in which information is generated or selected in a manner not predictable to the recipient. In the context of the invention, data, information, numbers, processes, or otherwise, referred to herein as \u201crandom,\u201d need not be equidistributed (or have any other particular distribution) over anything in particular, and might in general be pseudo-random in addition to, or in lieu of, being random.","The term \u201crelatively\u201d (and similar phrases and terms) generally indicates any relationship in which a comparison is possible, including without limitation \u201crelatively less,\u201d \u201crelatively more,\u201d and the like. In the context of the invention, where a measure or value is indicated to have a relationship \u201crelatively,\u201d that relationship need not be precise, need not be well-defined, need not be by comparison with any particular or specific other measure or value. For example and without limitation, in cases in which a measure or value is \u201crelatively increased\u201d or \u201crelatively more,\u201d that comparison need not be with respect to any known measure or value, but might be with respect to a measure or value held by that measurement or value at another place or time.","The term \u201csubstantially\u201d (and similar phrases and terms) generally indicates any case or circumstance in which a determination, measure, value, or otherwise, is equal, equivalent, nearly equal, nearly equivalent, or approximately, what the measure or value is recited. The terms \u201csubstantially all\u201d and \u201csubstantially none\u201d (and similar phrases and terms) generally indicate any case or circumstance in which all but a relatively minor amount or number (for \u201csubstantially all\u201d) or none but a relatively minor amount or number (for \u201csubstantially none\u201d) have the stated property. The terms \u201csubstantial effect\u201d (and similar phrases and terms) generally indicate any case or circumstance in which an effect might be detected or determined.","The phrases \u201cthis application,\u201d \u201cthis description\u201d (and similar phrases and terms) generally indicate any material shown or suggested by any portions of this application, individually or collectively, including all documents incorporated by reference or to which a claim of priority can be made or is made, and include all reasonable conclusions that might be drawn by those skilled in the art when this application is reviewed, even if those conclusions would not have been apparent at the time this application is originally filed.","The invention is not in any way limited to the specifics of any particular examples disclosed herein. After reading this application, many other variations are possible which remain within the content, scope and spirit of the invention; these variations would be clear to those skilled in the art, without undue experiment or new invention.","Real-World Nature","The invention includes techniques, including methods, physical articles, and systems, that receive world information dictated by real-world conditions (not mere inputs to a problem-solving technique). The techniques provided by the invention are transformative of the information received, at least in the senses that\n\n","The invention also includes techniques that are tied to a particular machine, at least in the sense that\n\n","This description includes a preferred embodiment of the invention with preferred process steps and data structures. After reading this application, those skilled in the art would recognize that embodiments of the invention can be implemented using general purpose computing devices or switching processors, special purpose computing devices or switching processors, other circuits adapted to particular process steps and data structures described herein, or combinations or conjunctions thereof, and that implementation of the process steps and data structures described herein would not require undue experimentation or further invention.","The following definitions are exemplary, and not intended to be limiting in any way:","The phrase \u201cactive configuration\u201d (and similar phrases and terms) generally indicates data and information associated with or relating to configuration information currently valid for that system. In general, the active configuration need not necessarily be identical to configuration information indicated by a configuration database for that system; in such cases, a local copy of that configuration database might be maintained on substantially each node for which that active configuration is valid.","The phrase \u201cactive version\u201d of a system (and similar phrases and terms) generally indicates an identifier for that active configuration. In one embodiment, the active version includes an integer which is monotonically increased with each substantial configuration change.","The phrase \u201ccluster configuration information\u201d (and similar phrases and terms) generally indicates a set of configuration information maintained by a clustered file system.","The phrase \u201clocal configuration information\u201d (and similar phrases and terms) generally indicates a set of configuration information maintained by a local file system for a particular node in a system.","The phrase \u201cconfiguration database\u201d (and similar phrases and terms) generally indicates a data structure maintaining a configuration information for a system. For example and without limitation, in cases in which users queue configuration changes for the system, the configuration database would include a set of configuration information to be maintained as the active configuration after substantially all those queued configuration changes are performed.","The phrase \u201cconfiguration version\u201d (and similar phrases and terms) generally indicates an identifier for a configuration associated with that configuration database. In one embodiment, the active version includes an integer which is monotonically increased with each substantial configuration change.","The phrase \u201cconfiguration element\u201d (and similar phrases and terms) generally indicates a software element, such as supported by hardware devices, capable of performing configuration operations for a particular node in a system.","The phrases \u201cconfiguration rollout,\u201d \u201crollout\u201d (and similar phrases and terms) generally indicate any action to be performed which has the effect of altering, changing, modifying, or replacing configuration information, or otherwise bringing configuration information into conformance with a configuration change.","The phrase \u201crollout data,\u201d (and similar phrases and terms) generally indicate any data or information, or associated method or technique, involved in persisting configuration changes at one or more nodes in a distributed system.","The phrase \u201cimpact\u201d (and similar phrases and terms) generally indicates any action to be performed to configure, initialize, reconfigure, or otherwise alter the state of, a particular service available on a system.","In one embodiment, an \u201cimpact\u201d generally refers to actions to be performed after rollout data is written.","The phrase \u201cfull impact\u201d (and similar phrases and terms) generally refers to any impact for which, after performance, its targeted service should be performing according to an active configuration.","The phrase \u201cincremental impact\u201d (and similar phrases and terms) generally refers to any impact for which, after performance, its targeted service need not be performing according to an active configuration, but should be performing with substantially necessary configuration changes, without substantial service disruption.","The phrase \u201clocal state\u201d (and similar phrases and terms) generally indicate any component or element, or aspect of the system, referring to data or information present at, included in, or accessible to, a hardware device or software element.","The term \u201cresource\u201d (and similar phrases and terms) generally indicate any component or element, or aspect of the system, whether a hardware device or a software element, or including a combination or conjunction thereof.","The phrases and terms \u201cstate\u201d, \u201cstate of a system\u201d (and similar phrases and terms) generally indicate any data or information, having a bearing on any aspect of element of a system, including without limitation possibly representing only a portion or a subsystem thereof.","The terms \u201ctask,\u201d \u201ctasklet\u201d (and similar phrases and terms) generally indicate any method or technique, or associated data or information, involved in individual portions of a configuration change. For example and without limitation, a task might refer to an individual action involved in a configuration change, while a tasklet might refer to an action by an individual node involved in a configuration change.","The phrases \u201ctask ID,\u201d \u201ctasklet ID\u201d (and similar phrases and terms) generally indicate identifiers for tasks and tasklets, respectively.","The phrase \u201ctask tag\u201d (and similar phrases and terms) generally indicate an identifier which might be used to group similar tasks. For example and without limitation, substantially each task associated with a particular configuration change would have a task tag also associated with that particular configuration change.","In one embodiment, a task might indicate a file system operation, such as for example creation or deletion of shared directories or file sets, creation or deletion of rollout data, performing a particular system command or process. A particular task might include one or more tasklets, such as for example substantially similar operations to be performed on more than one node in a system. A particular configuration change might include one or more such tasks.","In one embodiment, a tasklet might indicate a portion of a task, to be performed at a selected node in a system (or any one of a set of such selected nodes), or to be performed at a selected time.","After reading this application, those skilled in the art would recognize that these definitions would be applicable to techniques, methods, physical elements, software elements, combinations or conjunctions of physical elements and software elements, and systems\u2014currently known, or not currently known to be applicable by the techniques described herein\u2014extensions thereof that would be inferred by those skilled in the art after reading this application, even if not obvious to those of ordinary skill in the art before reading this application.","Figures and Text","Where described as shown in a figure, one or more elements might include\n\n","Where described or shown in a figure, apparatus elements might include\n\n","Where described or shown in a figure, apparatus elements, including either physical elements or software components, might be coupled\n\n","For example and without limitation, where a context for making or use of the invention might involve a distinct adaptation or configuration thereof, those apparatus elements or software components might be so adapted or so configured to have, or to substantially approximate, properties or functions as described herein, or as would be known to those skilled in the art.","Where described or shown in a figure, flow labels, method steps, and flow of control might include\n\n","For example and without limitation, one or more software threads, processes, data structures, or other constructs known in the many fields of computing sciences and engineering, coupled or in communication, or otherwise operating in combination or conjunction thereof, to perform the operations described, with the properties or functions thereof.","Where described or shown in a figure, flow labels, method steps, and flow of control might include\n\n","For example and without limitation, in the context of the invention, there is no particular requirement for the flow labels, method steps, flow of control, or operations, to occur in the order they are coupled or otherwise shown in the figures, or in the order they are described in the text.","Where distinct or separate data elements are shown as being used or operated upon, those distinct or separate data elements might be substantially so used or substantially so operated upon in parallel, in a pipelined manner, or otherwise.","Where an individual data element is shown as being used or operated upon, it might occur that the individual data element is substantially replicated, at least in part, with the effect that the individual data element might be used by more than one method step, flow of control, or operation, concurrently or in parallel or otherwise, consistently (or inconsistently with a form of reconciliation) or otherwise.","For example and without limitation, in the context of the invention, there is no particular requirement for the flow labels, method steps, flow of control, or operations, to occur in the order they are coupled or otherwise shown in the figures, or in the order they are described in the text. Where described or shown in a figure, or in the text, machines, articles of manufacture, or compositions of matter (or of matter and energy), might be disposed for including or maintaining, whether relatively permanently or relatively evanescently, or otherwise, information.","Where such information is specified, either relatively generally or relatively in detail, such information might be included or maintained by any technique involving the use of matter, combinations or conjunctions of matter and energy, techniques derived from computing sciences or information sciences, or other techniques in which such information might be derived or interpretable by one or more computing devices, at a later time or distinct place, or at another event in space-time. Although this description focuses on techniques for encoding information presently known to those skilled in the art, or where no such techniques are described, on techniques known in the many fields of computing science or information science, in the context of the invention, there is no particular requirement therefore. For example and without limitation, any and all such techniques for including or maintaining information, retrievable at a later time or distinct place, or at another event in space-time, might be applicable, even if currently not obvious to those of ordinary skill in the art.","Where such information is specified, that information might be included or maintained by any one or more coding schemas, or other techniques for maintaining information against error, loss, inaccessibility, or other issues, which should be generally inferred by the reader when construing or interpreting techniques described herein. For example and without limitation, techniques such as use of data backup or recovery, data mirroring, parity information, redundant encoding, triple-modular or other redundancy, and other methods known in the many fields of computing science or information science, should generally be implied by this description whenever inclusion, maintenance, transmission, copying, or other treatments of information are involved.","Where such information is specified, that information might be contemplated to be included or maintained with the effect of retaining that information for use in another context, at another place or time, in another device or in a similar or identical device otherwise distinct, or embodied in a form suitable for carriage or copying from a first place or time to a second place or time, such as on a device being at least in part electromagnetic, optical, physically configured, or making use of quantum-mechanical principles with respect to information.","Where such information is specified, that information might be segregated into individual portions, each representing whole number of bits, partial bits, probabilistic or conditionally probabilistic conditions from which information might be deduced, or otherwise. Although this description focuses on information-bearing articles which can be written, read, or transported in individual units, in the context of the invention, there is no particular requirement therefor.","For example and without limitation, information might be recorded, stored, or otherwise maintained on one or more physical elements or devices, with the information being separated either logically, physically, or holographically (the latter including the possibility that more than one such physical element or device might be involved in recovery or interpretation of the information).","For example and without limitation, in one embodiment, a system might include information with the property that any one individual device or even any one individual storage block is generally insufficient to allow a computing device to determine any one or more individual datum without reference to another device or storage block.","For example and without limitation, in one embodiment, an information-bearing element might include information that is encoded or encrypted with the property that any one individual device or even any one individual storage block is generally insufficient to allow a computing device to determine any one or more individual datum without reference to a decoding or decrypting key.","For example and without limitation, in one embodiment, an information-bearing element might include information that is accessible to a software component using a communication system, such as for example with the assistance of a coding system associated with a communication system, a communication protocol, an error-correcting code associated with an information-bearing element, a method or technique of associating or including data or information within a signal (such as for example a communication signal), or any one or more techniques known in the fields of computing science that might have the effect of allowing the recovery of information, either concurrently or at a later time.","Where such information is specified, that information might be interpretable by a computing device, or other data-processing device, as representing instructions to a device (including the possibility of a Turing-equivalent computing device operating under control of those instructions, either with or without additional instructions with the effect of providing additional functionality), as representing data to be compared, manipulated, reviewed, or otherwise processed by a device, as representing data describing a format of such data, such as for example a schema for a relational database, as representing metadata of some type, such as for example a measure of freshness or reliability of information, or otherwise, or combinations or conjunctions thereof.","For example and without limitation, in one embodiment, an information-bearing element might include information interpretable as hardware instructions, assembly-language instructions, compilable or interpretable higher-level language instructions, scripting instructions, or otherwise, or some combination or conjunction thereof.","For example and without limitation, in one embodiment, an information-bearing element might include information interpretable as a data encoding format, as a relational database schema or other database descriptor, as a data structure such as a tree structure, directed acyclic graph, heap storage, stack frame, or otherwise, or some combination or conjunction thereof.","For example and without limitation, in one embodiment, an information-bearing element might include data values to be compared, manipulated, reviewed, or otherwise processed by a device, such as for example a set of integers, floating-point numbers (for example, in an IEEE floating-point number standard format), data structures representing or indicative of other modelable elements, or otherwise, or some combination or conjunction thereof.","For example and without limitation, in one embodiment, an information-bearing element might include metadata of some type, such as for example a measure of freshness or reliability of information, a measure of precision or significance of figures, a measure of possible error, or otherwise, or combinations or conjunctions thereof.","Although this description is focused upon particular types of information as detailed herein, in the context of the invention, there is no particular requirement for any such limitation. For example and without limitation, there is no particular requirement that information or data need be represented in a digital format (an analog format might be a substitute), in a binary format (a format in a digital radix or other radix might be a substitute), in a time-division or space-division format (a format using a frequency-division or code-division format might be a substitute), or otherwise, or some combination or conjunction thereof.",{"@attributes":{"id":"p-0089","num":"0107"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0090","num":"0108"},"figref":"FIG. 1","b":"100","ul":{"@attributes":{"id":"ul0015","list-style":"none"},"li":{"@attributes":{"id":"ul0015-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0016","list-style":"none"},"li":["one or more communication networks ;","one or more distributed data structures ;","one or more configuration elements ;","one or more system resources ; and","one or more user stations ."]}}}},"Networked Environment","In one embodiment, the communication networks  might include any one or more techniques for computer communication, including a LAN, WAN, internet, enterprise network, a secure structure thereof such as a VPN, or otherwise.","While this application primarily describes systems  using a unified communication network , in the context of the invention, there is no particular requirement for any such limitation. For example and without limitation, elements shown in the figure might be coupled using more than one such communication network . Moreover, in the context of the invention, there is no particular requirement that the communication networks , where there are more than one of them, need be homogeneous, uniform, or even collectively compatible.","Elements shown in the figure are coupled to each other using one or more of the communication networks . The distributed data structures , configuration elements , system resources , and user stations  are capable of sending and receiving messages using one or more communication networks . This has the effect that elements associated with the system  can be logically or physically remote, yet capable of communication and of cooperation.","While this application primarily describes systems  in which each such element is coupled to each other one, in the context of the invention, there is no particular requirement for any such limitation. For example and without limitation, elements shown in the figure might merely be pairwise coupled, not necessarily each coupled to each other.","Configuration Database","The distributed data structures  include one or more configuration databases  maintained in the distributed system . For example and without limitation, the distributed data structures  might be maintained in a clustered file system or in a cloud computing format. The configuration databases  might be maintained in multiple portions on more than one resource  associated with, or accessible to, the system . The configuration databases  might also, or instead, be maintained in duplicate (or in partial duplicate) on more than one system resource  associated with, or accessible to, the system . This has the effect that the configuration databases  can be accessed by system resources  associated with, coupled to, or otherwise able to access, the system .","In one embodiment, the configuration databases  include one or more database tables, such as for example accessible using SQL, including data and information as described herein. For example and without limitation, such database tables might include one or more of the following:\n\n","While this application primarily describes systems  in which the configuration databases  include database tables, in the context of the invention, there is no particular requirement for any such limitation. For example and without limitation, the configuration databases  might include object-oriented database elements, or other database elements as might be known in the many arts of computer science.","Configuration Information.","As described herein, the configuration databases  include one or more sets of configuration information , each indicative of a separate configuration for the system . While this application primarily describes systems  in which each such system configuration is substantially complete, in the context of the invention, there is no particular requirement for any such limitation. For example and without limitation, the configuration information  might be separable into more than one set of partial configuration information, such as the following:\n\n","Of the sets of configuration information , a first such set indicates information for a current valid state of the system  (sometimes referred to herein as an \u201cactive configuration\u201d or \u201cactive version\u201d of the system ), while at least one additional such set indicates information in construction for a future valid state of the system . One or more additional such sets indicate information for past valid states of the system , such as for comparison when making changes from a past valid state to a current valid state, for later review of changes that were made, or for reversion to past states in the event of a change desired to be reversed.","Rollout and Impact Data.","Each set of configuration information  includes a set of one or more rollout files  (sometimes referred to herein as \u201cconfiguration files\u201d or \u201cconfiguration rollout files\u201d). The rollout files  might include configuration information, such as initialization information, interpretable by hardware devices and software elements at each system resource , as described herein. For example and without limitation, a rollout file  might include one or more of the following:\n\n","Each set of configuration information  includes a set of impact data and instructions  (sometimes referred to herein as \u201cimpact data\u201d or \u201cimpact information\u201d). For example and without limitation, impact data  might include instructions to a particular system resource  to restart, with the effect that any new configuration information  is read and acted upon when the system resource  restarts.","In one embodiment, impact data  might include a \u201cfull\u201d set of impact data  or an \u201cincremental\u201d set of impact data . A full set of impact data  would have the effect of substantially entirely changing a configuration of a system resource  to a next valid state. An incremental set of impact data  would have the effect of partially changing a configuration of a system resource  to a next valid state. For example and without limitation, if a system resource  has lagged behind in making configuration changes, as described below, a full set of impact data  would bring that system resource  to a configuration which is substantially the most current valid state, while an incremental set of impact data  would bring that system resource  to a configuration which is closer to a most current valid state, but not necessarily without any further changes required.","In one embodiment, impact data  might include an explicit or implicit ordering. For example and without limitation, a first set of impact data  and a second set of impact data , such as a set of configuration files to be applied to a particular system resource , might have a specified order. That order might be specified in a set of configuration information .","In one embodiment, the system  includes elements, such as for example the configuration element , which are capable of providing one or more such rollout files or impact data on command. This has the effect that users  at the user stations , as described below, might be able to inspect such rollout files or impact data, such as for example to determine if such rollout files or impact data have the content and format expected by such users .","Tasks and Tasklets.","The configuration databases  include a set of queued change requests , each of which indicates a change to be made to the system configuration. As described below, each such queued change request  is received from users  at user stations iso, and added to the queue. As each particular queued change request  is reached, the system  makes the configuration changes indicated by that particular queued change request .","Each queued change request  includes a set of task entries , each of which indicates a task to be performed in making a configuration change. Each such task entry  is associated with a task serial number . In one embodiment, such task serial numbers  are each unique and are assigned to new task entries  as they are created, in monotonically increasing order. In one embodiment, each newly-assigned task serial number  includes a next incremented value.","Each such task entry  includes, or is associated with, one or more tasklet entries , each of which indicates a tasklet to be performed in making a configuration change.","As described herein, each tasklet is performed by one system resource , while each task (and its task entry ) indicates a set of one or more tasklets, substantially all of which are to be performed as part of their associated task. In one embodiment, a tasklet might be (1) associated with a particular system resource , being marked completed when that particular system resource  completes that tasklet, or might be (2) assigned to be performed by any of the system resources , being marked completed when any system resource  completes that tasklet. In one embodiment, a tasklet might also be marked completed when the system  determines that the system resource  associated with that tasklet is unlikely to timely respond, as described herein.","Configuration Element","The configuration elements  include one or more software elements  executing on one or more hardware devices  associated with, coupled to, or accessible by, the system . In one embodiment, the software elements  include data and instructions capable of being interpreted by one or more computing devices, such as those hardware devices , to perform operations as described herein. In one embodiment, the hardware devices  include processors, program and data memory and mass storage, and one or more communication links to the communication network no.","In one embodiment, the configuration elements  perform software operations as described herein, using resources  accessible by, available to, or coupled to, the system . For example and without limitation, the configuration elements  direct particular resources  to perform tasks and tasklets as described herein, to update configuration information at those resources , with the effect of making changes to configuration information for the system . The configuration elements ","While this application is primarily directed to cases in which there is one such configuration element , in the context of the invention, there is no particular requirement for any such limitation. For example and without limitation, there might be multiple such configuration elements , which might operate independently or which might operate cooperatively.","In one embodiment, the software elements  for the configuration element  include a system process (sometimes referred to herein as a \u201cdaemon\u201d or a \u201csystem daemon\u201d) operating under control of operating system software executing on their associated hardware devices . In one embodiment, at least a portion of that system daemon operates at a relatively privileged operating level within that operating system.","The system daemon associated with the configuration element  directs changes to the configuration information , such as for example modifying the configuration databases  to add items to the queued change requests  (including task entries  and tasklet entries ), and modifying the configuration databases  to reflect completion, or substantial completion, of tasks and tasklets.","Individual Resources","The system resources  each include a communication port, coupled to the communication networks no. System resources  might include a computing device , including a processor, memory and mass storage, and data and instructions. System resources  might include a storage device , including memory and mass storage, and capable of maintaining information in response to storage instructions and retrieval instructions. System resources  might also include other and further hardware devices or software elements. For example and without limitation, system resources  might include a clock or other timing device, or otherwise.","As described herein, system resources  include the most general set of hardware devices, software elements, or other capabilities that might be associated with, coupled to, or accessible by, the system . For example and without limitation, system resources  might include input\/output elements (such as for example conference room whiteboards), sensors (such as for example external sensors), servers (such as for example DNS servers, HTTP servers, NFS or other file system servers, or otherwise), storage elements (such as for example individual mass storage devices, or a set of mass storage devices operating collectively such as a RAID storage system or a cloud storage element, or otherwise), workstations, combinations or conjunctions thereof, or otherwise.","User Stations","The user stations  each include a communication port, coupled to the communication networks no. User stations  might include a computing device , including a processor, memory and mass storage, and data and instructions. User stations  might include a storage device , including memory and mass storage, and capable of maintaining information in response to storage instructions and retrieval instructions. User stations  might also include other and further hardware devices or software elements. For example and without limitation, user stations  might include a dock or other timing device, or otherwise.","The user stations  each include a set of input elements , such as for example a keyboard and a pointing device, and a set of output elements, such as for example a synchronized audio output and video output. This has the effect that user stations  can be directed by a user , such as for example a human operator. While this application is primarily directed to cases in which the user  includes a human operator, in the context of the invention, there is no particular requirement for any such limitation. For example and without limitation, the user  might include a group of persons or other entities with individual or collective authority to direct user stations , might include one or more computer programs or scripts having the property of directing user stations , or might include an artificial intelligence or a machine learning system capable of directing user stations .","The user stations  operate to present configuration information  to users , such as for example a set of configuration information  relating to a current valid state of the system . The user stations  recognize a set of configuration changes in progress, and are able to operate to present to users  configuration information  relating to future states of the system  that are not yet valid, including what configuration changes are pending between the current valid state and those future states, and what state would result from those pending configuration changes. Similarly, the user stations  recognize a set of states that were valid at past times, and are able to present to users  configuration information  relating to past states of the system  that are no longer valid, and what configuration changes occurred from those past states to the current valid state.","The user stations  operate to receive configuration changes from users , either in the form of particular changes to make, or in the form of a new state of the system  to achieve. In the latter case, the user stations  determine what differences exist between the current valid state and the desired new state, identifying those differences as a set of particular changes to make.","Having received or identified such changes to make, the user stations  call upon the configuration element  to add a set of queued change requests  to the configuration database . Having called upon the configuration element  to add queued change requests  to the configuration database , the user stations  respond to users  that the changes have been queued. In such cases, the user stations  show users  the newly-changed state of the system  as if those changes had already been made. This has the effect that users  might operate the user stations  to present further configuration changes to be made.","Should users  identify such further configuration changes, the user stations  receive those further configuration changes, call upon the configuration element  to add queued change requests , and present the further newly-changed state of the system  to users  as if those changes had already been made. This has the effect that users  might continue to identify further configuration changes while the system  is still making earlier configuration changes that were requested by the user .","In one embodiment users  at user stations  might lock the configuration database , with the effect of preventing configuration changes to the system  for a selected time duration. For a first example and without limitation, it might be desirable to prevent configuration changes for administrative reasons, such as to assure that only particular users  are authorized to make configuration changes for a selected time duration. For a second example and without limitation, it might be desirable to prevent configuration changes for a selected time duration while the system  is updated.",{"@attributes":{"id":"p-0131","num":"0171"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0132","num":"0172"},"figref":"FIG. 2","b":"200"},"As described herein, the method steps are shown in the figure and described in a linear order. However, in the context of the invention, there is no particular requirement that the flow labels or method steps be encountered or performed linearly, in any particular order, or by any particular device. For example and without limitation, the flow labels and method steps might be encountered or performed in parallel, in a pipelined manner, by a single device or by multiple devices, by a general-purpose processor or by a special-purpose processor (or other special-purpose circuitry disposed for carrying out part or all of the method ), by one or more processes or threads, at one or more locations, and in general, using any one or more of the techniques known in the many arts of computing science.","Beginning of Method","Reaching a flow label A indicates a beginning of the method .","At a step , the method  is triggered and begins operation. In various embodiments, the method  might be triggered by any circumstance in which it is desirable to perform one or more configuration changes to the system , such as for example, one or more of the following:\n\n","While this description is at least partially directed to embodiments with respect to specific techniques for triggering the method , such as in this step, in the context of the invention, there is no particular requirement for any such limitation. The method  might be triggered, such as in this step, by any technique suitable for triggering a computation, method, or process.","The method  proceeds with the flow label .","Configuration User Interface","Reaching a flow label  indicates that the method  is ready to receive configuration changes from users  at user stations .","At a step , user stations  present configuration information  to users . To perform this step, the method  might perform the following substeps:","At a substep , user stations  determine if there are any pending commands for configuration changes from users . If not, the method  performs the next substep. If so, the method  proceeds with the substep ","At a substep , user stations  present configuration information  to users  relating to a current valid state of the system . The method  proceeds with the next step.","At a substep , user stations  respond to users  to the user with an acknowledgement of receipt of those commands for configuration changes, and with an acknowledgement that the commands are about to be performed","In one embodiment, at a substep , user stations  present configuration information  to users  relating to a future intended state of the system , after all pending requests for configuration changes have been completed. Such a future intended state is not yet valid, but is presented to users  as if requisite changes had been completed and that future intended state was valid. The method  proceeds with the next step.","At a step , user stations  receive requests for (original or further) configuration changes from users .","At a step , user stations  determine what differences exist between the current valid state and the desired new state indicated by users .","At a step , user stations  call upon the configuration element  to add a set of queued change requests  to the configuration database . This has the effect that those queued change requests  will eventually be performed and the requested configuration changes from users  will be made valid.","The method  returns to the flow label  to present further configuration information  to users , and possibly to receive further requests for configuration changes from users .","This has the effect that the configuration user interface (sometimes referred to herein as the \u201cconfiguration UI\u201d) is asynchronous, at least in the sense that the configuration UI does not require that user  at user stations  must wait for any particular event to present further configuration changes for the system . This also has the effect that configuration changes for the system , as requested by users  at user stations , are performed substantially in parallel by system resources  associated with the system .","In one embodiment, the configuration UI might be constructed using a \u201cTHRIFT\u201d compiler technique.","In such cases, a configuration UI might be constructed substantially as follows:","One or more system designers specify an API (application programming interface) with which a configuration UI might be implemented.","The system designers cause a THRIFT compiler to receive the specified API.","The THRIFT compiler generates, in response to the specified API, a set of client\/server calls, which have an effect of implementing the specified API.","The system designers prepare a configuration UI which receives a set of inputs from users  and presents a set of outputs to such users .","The configuration UI calls upon the client\/server calls generated by the THRIFT compiler to perform operations shown by the configuration UI.","Configuration Changes","Reaching a flow label  indicates the method  is ready to make configuration changes.","At a step , the configuration element  identifies one or more tasks to be performed to make the queued change requests .","At a step , the configuration element  constructs configuration information , each indicative of a separate configuration and each uniquely identified, for each set of queued change requests .","In one embodiment, the configuration element  associates a unique configuration number with each such separate configuration; however, in the context of the invention, there is no particular requirement for any such limitation. For example and without limitation, the configuration element  might associate a time value, such as a time when that separate configuration was associated with a set of queued change requests , or such as a time when that separate configuration was made valid.","As described above, one such separate configuration is identified as a current configuration . An identifier for the current configuration (whether a configuration number, time value, or other indicator) for the current configuration is distributed to substantially all system resources  involved in making configuration changes to reach that current configuration . The same identifier for the current configuration is maintained in the configuration database , with the effect that each particular system resource  can determine if it is up-to-date with all configuration changes to reach the current configuration ","At a step , the configuration element  identifies one or more separate tasks, each uniquely identified, to be associated with transforming configuration information  from a first separate configuration to a second separate configuration. For example and without limitation, an individual task might include modifying rollout files for a type of system resource .","In one embodiment, the configuration element  associates a unique task number with each such separate task; however, in the context of the invention, there is no particular requirement for any such limitation. For example and without limitation, the configuration element  might associate a time value, such as a time when that separate task was associated with a set of configuration information, or such as a time when that separate task was initiated.","At a step , the configuration element  identifies one or more separate tasklets, each uniquely identified, to be associated with each task identified above.","As noted above, a first type of tasklet might be associated with a particular system resource . For example and without limitation, an individual tasklet might include modifying a rollout file for a particular system resource .","As noted above, a second type of tasklet might be associated with no particular system resource ; it simply is assigned to be performed by any system resource , so long as it is performed by one of them. For example and without limitation, an individual tasklet might include writing a particular status to a configuration database .","In one embodiment, individual tasks might include one or more such tasklets. In cases in which a particular task includes more than one such tasklet, that particular task is deemed completed when substantially all of its associated tasklets are completed. This latter item is subject to treatment of non-responsive nodes, as described below.","At a step , the configuration element  associated rollout and impact data with each particular tasklet.","Non-Responsive Nodes","Detection.","Reaching a flow label  indicates the method  is ready to act upon a non-responsive node.","At a step , the method  identifies a non-responsive system resource . To perform this step, the method  performs the following substeps:","At a substep , the configuration database  includes one or more incomplete tasklets. In one embodiment, each such tasklet is associated with information indicating a time when the tasklet was assigned, indicating a time duration during which the tasklet has not been completed, or otherwise indicating whether the tasklet is not making sufficient progress.","At a substep , the configuration element  identifies one or more particular tasklets not having made sufficient progress.","At a step , the method  marks the non-responsive system resource  as being \u201cstale.\u201d While being marked \u201cstale\u201d does not necessarily indicate that a particular system resource  has failed, in one embodiment, the configuration element  would generally proceed as if that particular system resource  is not going to ever timely respond.","In one embodiment, the configuration element  modifies the configuration database  to indicate that the tasklet is being skipped.","In one embodiment, the method  performs the test for non-responsiveness and marking the non-responsive node as being \u201cstale\u201d atomically, that is, without any substantial possibility of action occurring in the middle of such an operation.","At a step , the method  skips the tasklet. As part of this step, the method  proceeds to make configuration changes as if those particular tasklets had run to completion.","Recovery.","Reaching a flow label indicates the method  is ready to act upon formerly non-responsive node (sometimes referred to herein as a \u201cnewly-recovered\u201d or \u201crecovering\u201d node). At a step , the method  identifies that a newly-recovered node has been marked \u201cstale.\u201d","To perform this step, the method  performs the following substeps:","At a substep , the newly-recovered node determines that it has been marked \u201cstale\u201d in the configuration database .","At a substep , the newly-recovered node determines that it is able to proceed despite having been marked \u201cstale\u201d in the configuration database .","At a step , the method  marks the newly-recovered node as being \u201crecovering.\u201d While being marked \u201crecovering\u201d does not necessarily indicate that a particular system resource  is now fully operational, in one embodiment, the configuration element  would generally proceed as if that particular system resource  is going to catch up with substantially all queued configuration changes .","At a step , the method  recovers the \u201crecovering\u201d node. To perform this step, the method  performs the following substeps:","At a substep , the method  performs operations as the recovering node while that node remains marked \u201crecovering\u201d in the configuration database .","At a substep , the method  determines that the recovering node has caught up with substantially all queued configuration changes .","At a substep , the method  marks the recovering node as \u201cOK\u201d in the configuration database .","The method  proceeds with the flow label B.","End of Method","Reaching a flow label B indicates an end of the method .","In one embodiment, the method  might be readied for re-performance in response to a trigger as described with respect to the flow label A.","The invention has applicability and generality to other aspects of distributed system management."],"DETDESC":[{},{}]}
