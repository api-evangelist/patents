---
title: Process to expand data density
abstract: A process for transmission of information between at least two devices comprises: generating a serial message coded by means of a time sequence of binary transitions called bits; reducing the time length of all bits in the message by changing them into shorter bits, in order to insert additional bits whose half duration falls at the moment in time where the transitions between unchanged bits occurred when no additional bits are inserted; keeping the half duration point of all reduced data bits to the same place as they were in the unchanged message; keeping the total duration of the message containing the additional bits identical to the total length of the unchanged message. The process is compliant with the MIDI standard and allows the increase of the amount of various distinct messages which it is able to convey.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07139309&OS=07139309&RS=07139309
owner: 
number: 07139309
owner_city: 
owner_country: 
publication_date: 20010105
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DESCRIPTION OF INVENTION AND PREFERRED EMBODIMENT"],"p":["1. Field of the Invention","The invention relates to a process for transmitting information over an electrical or optical support. It deals more specifically with the transmission of digital information flowing serially in a time sequence over the support.","2. Brief Description of the Background of the Invention, Including Prior Art","It is known for a long time to transmit information in serial sequence over an electrical support with various methods. For instance, numerous processes and systems are known for the purpose of transmitting information between musical instruments according to the MIDI interface standard (Musical Instruments Digital Interface, MIDI Manufacturers Association, The complete MIDI 1.0 detailed specification\u201d, document version 95.1 section 2 embedding 2:doc version 4.2, October 1994 pages 1 to 3). Due to the MIDI specification requiring the use of optoisolators, the information is also conveyed as light modulation. Frequently, according to the coding of the information peculiar to the transmission process considered, it is not uncommon to be limited by the number of different coded messages the transmission process can pass along over the support. In the case of the MIDI standard, for instance, one quickly comes up against the absolute limit of 16 addresses (also called channels) of various distinct instruments that the system is able to cope with.","It is therefore desirable to expand the data density of the transmitted information, while keeping the previous admitted standard for transmitting the information, by \u201csuperposing\u201d the additional information.","1. Purposes of the Invention","The invention aims to remedy the drawbacks of the known processes by offering a process that allows increasing the amount of various distinct messages the system is able to convey while maintaining the compatibility with existing systems.","In the present context a message is defined as a series of bits corresponding to one or more instructions and\/or to an address.","2. Brief Description of the Invention","To this end, the invention deals with a process for the transmission of a larger quantity of information between at least two devices according to which the elements of information which are succeeding each others in time are passed along over an electrical or optical support, said information elements being made of a packet of binary transitions forming bits, said bits being assembled in messages which comprises one or more data and\/or addresses of the devices for which these data are intended, while said process remains unobtrusive to pre-existing systems and nevertheless allows the increase of the amount of various distinct messages the system is able to convey.","The invention is making use of the peculiarities of the methods commonly used to recognize a message in order to add supplemental information in a non-obtrusive manner.","According to the invention, additional binary bits are inserted between the bits forming the initial message. The positioning and time length are chosen in order to avoid the recognition by the usual known methods of message retrieving. Said methods of message retrieving are based on a logic circuitry called UART (Universal Asynchronous Receiver\/Transmitter, see for example Atmel Document: ref 1042D-04\/99\/xM about AT902333 & 4433 microcontrollers, embedded UART pages 44 to 50).","Only a receiver based on message reading according to the invention will be able to retrieve the entire content of the message including the additional bits.","By information, it is intended to designate any message in which the semantic content may be coded.","According to the invention, devices are information transmitters, information receivers, or combined information transmitters and receivers (transceivers).","According to the invention, the information elements are succeeding each other in time over an electrical or optical support. By \u201csucceeding each other\u201d, it is meant a transmission of the information elements one by one in a time sequence, any element using alone the whole information capacity of the support. By electric support, there is meant any means able to convey an electrical signal from a point to another. Those supports will be mostly realized by means of one or more electric conductors under the form of one or more wires isolated between them and assembled in a cable terminated by connectors. The coding of information over the electric support can be done by any known way. It may, for instance, be realized by means of a voltage, of a current, of a phase or of any other way compatible with the support. By optical support, we mean any means able to convey photons from a point to another. One or more optical material or assembly of materials, or even empty space will mostly realize those supports.","According to the invention, the information elements are made of a set of binary transitions, called bits, succeeding each other in time. When the coding of the information is done by means of a voltage, a binary transition is performed by a sudden jump from the rest-voltage to the on-voltage (active state) or conversely from the on-voltage to the rest-voltage. Things go similar when the coding is realized through other means. Sets of bits, form messages dedicated to the devices connected over the electrical or optical support.","An advantageous coding scheme of the binary information flowing over the electrical support is a coding done by means of a current. According to this coding scheme, the two binary levels are materialized by the presence or absence of a current. It does not matter whether the binary level 1 is materialized by the absence or by the presence of the current. Practically, a realization having shown good results is the one wherein the binary level 1 is materialized by the absence of current and the binary level 0, by its presence.","According to the invention, additional bits are inserted between the bits of an original message. Each of the additional bits is centered at the moment of time which was one of transition between bits in the original message. The amount of supplementary variations in messages allowed by the insertion of binary bits in a system wherein the messages comprises n bits in series is given by the following formula:\n\nnsup=2\n","Where n is an integer value giving the number of bits in the original message.","The invention appears particularly advantageous when it is applied for the communication of data related to musical equipment according to the MIDI communication standard. According to this use, a 5 mA current coding is used for the logic level 0 and said current is stopped for the logic level 1. The basis frequency of such a MIDI communication system is of 31250 Baud and relies on an asynchronous transmission protocol, each message comprising a bit setting the beginning of the message (\u201cstart-bit\u201d at the active state, i.e. the state 0), 8 data bits and one bit for the end of the message (\u201cstop-bit\u201d at the rest state, i.e. the state 1).","Similarly, because the MIDI communication standard requires the use of opto-isolators, the electrical coding is implicitly converted inside these opto-isolators to optical coding where a logic level 0 is represented by a photon flow between the built-in light-emitting diode and the phototransistor, and a level 1 by the absence of photons.","According to the MIDI standard, the connectors located at the end of the cables of the information support are normalized 5 pin DIN connectors (180 degrees). The pins labelled  and  are used for the connection of the current loop conveying the information; the pin  is not connected (case of a \u201cMIDI in\u201d port) or is connected to the cable shielding (case of a \u201cMIDI OUT\u201d or \u201cMIDI THRU\u201d port). The pins  and  are not connected.","The invention concerns also a system for the communication of information in accordance with the process of the invention and for its use for the communication of information related to the operation of musical devices according to the MIDI standard.",{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 1","b":["4","5","1","4","2","3","5","4","6","7","8","8","9","10","5","12","11"]},"DIN connector  (labelled THRU) has its pin  connected to the signal coming from the optocoupler  via connection .",{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIG. 2","b":"16"},"According to the state of the art, a typical message comprises a Start Bit , several Data Bits --, and a Stop Bit . Starting from the rest state  which is at logic level 1, the Start Bit is initiated by a transition  from level 1 to level 0. Level 0 is maintained for duration ; the combination of this transition  and duration  represents the Start Bit. At the end of duration  a level transition  may possibly occur to set the level of the first Data Bit  of the message. A Data Bit can be either level 0 or level 1. At the end of duration , whose length is equal to duration , a level transition  may possibly occur to set the level of the second Data Bit  of the message. It goes similarly for the following Data Bits up to the last Data Bit  of the message, at the end of which  the logical level must go to level 1 for a duration  whose length is also equal to all other bits  to  of the message. This bit  at level 1 is the Stop Bit, at the end of which  a level transition from 1 to 0 may possibly occur to initiate the Start Bit of the next message. Alternatively, at moment  at the end of the Stop Bit , the level can be maintained to level 1 at a rest state.","In order to read the content of the message, the signal is sampled at predefined time intervals. Typically, the receiving devices is synchronizing with the incoming message with a resolution which is 16 times finer than the duration of a bit, here called the clock duration or Clock. After the Start Bit transition  is detected, the first Data Bit value will be known by sampling the signal 24 Clocks after transition . This sampling moment corresponds to the middle of the duration of the first Data Bit. From then on, the subsequent Data Bits will be sampled at 16 Clock intervals up to and including the last Data Bit , from where another 16 Clock interval will occur before sampling the Stop Bit to ensure it is effectively at level 1 and that the whole message is reliable.","An improved method compared to the one described hereabove is relying on a triple sampling of the bits. In this method, each bit to be sampled is sampled, for example, a first time  at, assuming the above typical synchronization, 7\/16th of its total duration, the second  and third  sampling occurring then respectively at 8\/16th and 9\/16th of the total bit duration. The three values obtained are processed through a majority vote to determine the value of the bit.","The purpose of this triple sampling is to avoid a false reading due to a possible glitch during the signal transmission, in which case the probability is high to have only one of three samples presenting a faulty value. It should be noted that the second sampling, appearing at 8\/16th, is corresponding to the single sampling of the original unimproved method described above.",{"@attributes":{"id":"p-0039","num":"0038"},"figref":["FIG. 3","FIG. 2"],"b":["16","20","17","19","21","23","13","21","23","22","6","10","11","7","8","9"]},"The enriched message ( to ) shows how additional bits  and  are added to the basic message. In this enriched message, the duration  of bit  is reduced to duration , which is half of initial duration  and becomes bit . Similarly, bit  is reduced to become bit  and bit  is reduced to become bit . It is important to note that bit  may be a Data Bit similar to bit  but may also be the Start Bit. Likewise, bit  may be a Data Bit similar to bit  but may also be the Stop Bit. This time reduction of the bit lengths makes room for additional bits.","According to the invention, additional bits can only be inserted between Basic Data Bits, between the Start Bit and the first Basic Data Bit or between the last Basic Data Bit and the Stop Bit.","In the above example, an additional bit  appears centered around the transition  between what were previously bit  and bit , now respectively bit  and bit ; bit  is added similarly between bit  and bit , now respectively bit  and bit .","In the following description, legacy devices are defined as data transmission devices being able to transmit and receive basic messages only; we define new devices as data transmission devices being able to transmit and receive both basic and enriched messages.","The purpose of the invention is to allow the addition of bits to an existing message in a transparent manner so that legacy (prior art unadapted) receiving devices will be unaffected by the enriched message while still reading the basic message contained within the enriched message.","This allows the use of both legacy devices and new devices implementing the invention, where basic messages and enriched messages can be exchanged between any of these device type, where basic and enriched messages can be recognized by new devices while enriched messages won't impede the legacy devices from recognizing the basic messages embedded within the enriched messages.","This is made possible by the fact that the triple sampling ( to ) of the bit  in the basic message ( to ) remains effective when sampling bit  in the enriched message ( to ) while, at the same time, an additional triple sampling ( to ) will read the content of additional bit . Practically, additional bits  and  have the same duration  as the now reduced basic bits . In all these bits, samplings now occur at \u215cth, 4\/8th and \u215dth of their duration. The  example is built on a bit length reduction to a half, where additional bits have a length similar to the basic bits after the latter are reduced.","Other proportions of length reduction can be applied to achieve similar result. For instance, a reduction of the basic bits to 60% of their initial length will imply additional bits with a duration equaling 40% of a basic bit duration. Such option might be preferred when reading methods different than the triple sampling method described previously are chosen. Any other value for the percentage of reduction can be used to implement the invention.",{"@attributes":{"id":"p-0048","num":"0047"},"figref":["FIG. 4","FIG. 3","FIG. 3"],"b":["13","1","5","6","7","2","5","8","9","7","3","2","4","2"]},"When there is no clock difference between the transmitter and the receiver, the triple sampling method already described falls perfectly centered in all Data Bits, both Basic and Additional, and that the triple sampling of the Stop Bit occurs at \u215cth, 4\/8th and \u215dth of its now reduced time duration as the theory in  implies. When there is a discrepancy between transmission and reception clock rates, there is a risk that the triple sampling of the last Data Bit or the triple sampling of the Stop Bit fall out of range. This fact, which also exists in legacy communication systems, leads however to acceptance of a smaller clock discrepancy when applying the invention due to the narrower bit durations. Practically, where all bits in legacy messages are 16 Clock long, the enriched message according to the invention will have its Data Bits 8 Clock long, its Start and Stop Bits 12 Clock each. According to these metrics, a legacy message  of eight Data Bits such as Data Bit  is 160 Clocks long from 12 to 17 (8\u00d716 Clocks+Start Bit =16 Clocks, +Stop Bit =16 Clocks). According to the same metrics and using for this example a bit reduction of a half (50%), an enriched message  of eight Basic Data Bits such as Data Bit  and nine Additional Bits such as Additional Bit  is 160 Clocks long from 12 to 17 ((8+9)\u00d78 Clocks+Start Bit =12 Clocks+Stop Bit =12 Clocks).","A typical triple sampling method as explained in  will imply that the last sampling  of the last additional bit  in message  will occur at 145 clocks in reference to time . The calculation is: Start Bit=12 Clocks+(8 Basic Data Bits\u00d78 Clocks)+(8 Additional Data Bits\u00d78 Clocks)+5 Clocks. In the same message , the transition  marks the end of the last additional data bit  and at the same time the beginning of the Stop Bit . This transition  occurs at 148 Clocks. The calculation is: Start Bit=12 Clocks+(8 Basic Data Bits\u00d78 Clocks)+(9 Additional Data Bits\u00d78 Clocks). In the same message , the first sampling  of the triple sampling of the Stop Bit  occurs at 151 Clocks. The calculation is: Start Bit=12 Clocks+(8 Basic Data Bits\u00d78 Clocks)+(9 Additional Data Bits\u00d78 Clocks)+3 Clocks.","The shorter total duration of message  compared to message  can be the result of a sender being faster than the receiver or a receiver being slower than the sender; in both cases, there is a risk that the last sampling  of the last additional data bit  which normally occurs after the duration , falls at the transition between the last additional data bit  and the Stop Bit . To keep the entirety of the triple sampling of the last additional data bit  within functional limits, the transmitter speed can not be faster than (1\/(1\/148\u00d7145))=1,020689 . . . times the receiver speed.","The longer total duration of message  compared to message  can be the result of a sender being slower than the receiver or a receiver being faster than the sender; in both cases, there is a risk that the first sampling  of the Stop Bit  which normally occurs after the duration , falls at the transition between the last additional data bit  and the Stop Bit . To keep the entirety of the triple sampling of the Stop Bit  within functional limits, the receiver speed can not be slower than (1\/(1\/148\u00d7151))=0,980132 . . . times the transmitter speed.","A practical implementation of the invention compliant with the MIDI standard is also relying on  where all elements are similar to the state of the art to the exception of block  where the serial to parallel conversion is not effected by a standard off-the-shelf UART (Universal Asynchronous Receiver-Transmitter) but by a fast microcontroller (brand Scenix, type SX-18) wherein software routines take in charge all the necessary signal recognition and samplings. Similarly, the block , parallel to serial conversion, is also not effected by a UART, but by another set of software routines running within the same SX-18 microcontroller. As in MIDI, the total duration of a message is 320 microseconds, the connectors ,  and  are of type 5 pin DIN 1800 female, voltage levels are TTL compliant, opto-coupler is of brand Sharp, type PC .","The above example intends to describe the invention in a practical application without however limiting its scope which is not limited to the MIDI environment.","According to another aspect of the invention, to overcome the narrow allowance in speed discrepancy when using the triple sampling method, there is disclosed another way of retrieving the signal.","This method is described with reference to , the numbers in the text are referring to  only.","In this new method, the signal is not checked during the stable phase of the individual bits, but by comparing the changes in the signal against timing references. The method according to this embodiment of the invention can be implemented in a microcontroller, relying on built-in peripherals and program execution, or in hardware only, using standard logic and counters.","In both cases, two timer\/counters are used: the first, called CAPTMR, is restarted each time a level change is detected. The second one, called EOWTMR, is used in determining the end of the message in case there are no level changes to make the last bit or bits of the message.","Whichever the implementation (hardware or software), the following hardware functional blocks are required:\n\n","The rest of the method can be explained with reference to logic circuitry or programming into a microprocessor\/microcontroller with equal results. The method is also relying on a status, able to adopt one of the 3 following states: REST, START, and RUN.","REST is the state corresponding to the period between messages, when the line is idle and the system awaits a Start Bit.","The START state is corresponding to the moment between the detection of the Start Bit falling edge and the next change in the signal (sometimes up to the Stop Bit in case all Data Bits are zero), or to the EOWTMR end-of-count.","The RUN state is following the START state, and corresponds to the moment between the next change on the signal once the START state was activated and the logical conclusion that all Data Bits are known, or to the EOWTMR end-of-count.","When the message is over and all bits are known, the state loops to REST.","At initialization (see INIT routine), EOWTMR is stopped, the system state is REST, and the input capture circuitry is allowed to detect falling edge signals only and generate interrupts.","When the input signal which was at rest state  is now falling to level , at moment , the capture hardware is activated and generates an interrupt.","The INPUT CAPTURE INTERRUPT routine is then called, performing the following operations:\n\n","Because the current status is REST, EOWTMR is reloaded and allowed to count, the state is changed to START, BITPNTR is set to point to bit zero of ASSEMBLED MESSAGE, POL FLAG is reset, and the input capture circuitry is allowed to react on both polarities of the input signal. The system is now waiting for one of the two possible events: a change on the input signal, or the end-of-count of EOWTMR.","According to a first possibility, if no change to the input signal occurs, the EOWTMR reaches its end-of-count and the EOWTMR INTERRUPT routine is called. This routine executes the following operations: stop the EOWTMR, fill the bits of ASSEMBLED MESSAGE with the current POL FLAG value until the value of BITPNTR is bigger than the constant LAST (of value  in our application) expressing the last Data Bit in the message. After that, the ASSEMBLED MESSAGE, containing all zero value Data Bits, is saved for further processing, the STATE is defined as REST, and input capture is only allowed on falling edges of the input signal. The routine is then over.","The other possibility implies that the input signal changes at least one time before EOWTMR reaches its end-of-count. At this START state, the INPUT CAPTURE INTERRUPT routine, will execute the following steps: copy CAPTMR to CAPVAL, change the state from START to RUN, set the POL FLAG to 1, subtract to CAPVAL the value representing the duration of a Data Bit, represented as duration  and called TBIT. The remaining value is compared to TBIT. This leads to two possible routes: If smaller, it means that the first Data Bit , is at level , the bit in ASSEMBLED MESSAGE currently pointed to by BITPNTR is filled with the current value of POL FLAG which is one. BITPNTR is incremented, pointing now to the second Data Bit. POL FLAG is then inverted. The last part of the routine checks if BITPNTR is bigger than the constant LAST, which cannot be true at this point. However, if the value remaining in CAPVAL is bigger than TBIT, it means that at least the first Data Bit is equal to zero. In this case, the bit in ASSEMBLED MESSAGE currently pointed to by BITPNTR is loaded with the reverse of the value in POL FLAG. BITPNTR is incremented before looping back into the routine at the point where TBIT constant is once again subtracted from CAPVAL, leading to a new comparison and so on.","The whole system is based on comparisons between the value reported by a counter\/timer CAPTMR over the duration of one or several bits, possibly including the start bit, and the remaining value after successive subtractions to determine how many bits of the same polarity where covered. The complementary mechanism assuring that the message recognition can not fall out of sync in case there are no transitions during the last bit or bits of the message, is done with another timer\/counter EOWTMR. Its ideal duration is the point in time  equally distant in terms of percentage between the beginning  of the last Data Bit , and the end  of the Stop Bit . This point x is given by the following formula where y is the duration between moment  and , z is the duration between moment  and .\n\n().\n","For ease of comparison, and according to the metrics used in the triple sampling example where the whole message had a duration of 160, the point 2 equates 140, and the point 4 equates 160. The formula then gives 149.6662955 . . . as the optimal duration for EOWTMR. This translates to a theoretical 6.9% of tolerance in clock variation compared to the +\/\u22122% offered by the triple sampling method. Nevertheless, the effective tolerance is in fact given by the following formula:\n\n\n\nwhere x is shown as duration  on the drawing, T is the duration of TBIT , and M is the duration comprised between points 1 and 4.\n","Continuing with the same metrics, the practical formula become x=5\/160. The practical tolerance of the system to clock discrepancies is 5%, an improvement of 2.5 compared to the triple sampling method.","While the invention has been particularly shown and described with references to a preferred embodiment there of, it will be understood by those skilled in the art that the foregoing and other changes in form and details may be made therein without departing from the spirit and scope of the invention."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["In the accompanying drawings:",{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIGS. 5 and 6"}]},"DETDESC":[{},{}]}
