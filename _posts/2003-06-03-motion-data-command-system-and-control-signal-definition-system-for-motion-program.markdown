---
title: Motion data command system and control signal definition system for motion program
abstract: A motion data command system for a motion program having a numerical controller for controlling a servo amplifier in accordance with a given motion command. A memory is provided in the numerical controller for storing as variables motion command data. A motion API called by an application program on a personal computer is provided which gives a motion command via a bus to the numerical controller; and indirectly specifying the address of a variable of motion command data present in the memory by way of said motion API.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=06917850&OS=06917850&RS=06917850
owner: Kabushiki Kaisha Yaskawa Denki
number: 06917850
owner_city: Fukuoka
owner_country: JP
publication_date: 20030603
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DESCRIPTION OF THE PREFERRED EMBODIMENT"],"p":["The present invention relates to a numerical controller used to control a machine tool, automatic assembly apparatus and an automatic carrier, and in particular to a method for executing a motion program assumed when the execution environment for the motion program is located outside the numerical controller, such as an a personal computer or a programmable controller.","The invention also relates to a numerical controller used to control a machine tool, automatic assembly apparatus and an automatic carrier, and in particular to a method for defining a control signal for controlling activation\/termination of a motion program.","For a conventional art numerical controller whose motion program execution environment exists externally, in case motion command data used for the motion program is a variable, the location of the variable is the location where the execution environment for the motion program exists, that is, in an application program in a personal computer or in a programmable controller external to the numerical controller.","Such a related art will be described based on drawings.  is a block diagram of a system which executes a related art motion data command method. In the figure, a numeral C represents a personal computer or programmable controller, C an application program for motion command operating on the personal computer or programmable controller, C a specific example of an application program for a motion command, C a variable storage memory for storing motion command data, C a motion API (Application Programming Interface) called by the application program for a motion command, C a bus interface for accessing a bus C such as a PCI bus, C an application program for a sensor operating on the personal computer or programmable controller, C a specific example of the application program for a sensor C, C a sensor API called by the application program for a sensor C, Ca sensor interface for input from a sensor C, C a numerical controller, C a bus interface for accessing the bus C such as a PCI bus, C a motion control processor operating in accordance with given motion command data, C a servo amplifier, C a servo motor, C an encoder, and C a motion mechanism.","In the example of the application program C in , in steps () and (), the initial values of motion command data are substituted into the variables X, Y present in the variable storage memory C in the personal computer or programmable controller C.","In step (), a motion command API whose arguments are variables X, Y is called and a motion command is given to the numerical controller C. In this practice, the variables X, Y are converted to immediate values when the motion command API is called. Immediate motion command data is given to the numerical controller C. The motion control processor C, receiving an immediate motion command, uses the immediate values given to perform motion control.","Then, on an input from the sensor C, the input values or values selected by the input values are substituted into the variables X, Y in the variable storage memory C by way of the application program for a sensor C operating on the personal computer or programmable controller C. In , steps () through () in the specific example C are programs to perform this operation.","The application program for a motion command C detects that the values of the variables X, Y have been modified in step () in the specific example C, and uses the modified values of the variables X, Y to call the motion command API whose arguments are variables X, Y again and gives a motion command to the numerical controller C.","Next, a second conventional art will be described. According to this example, the I\/O for a control program for controlling activation\/termination is handled with a control signal definition tool on a personal computer or dedicated engineering tool.","The conventional art technology will be specifically described based on drawings.  is a block diagram of a system which executes a control signal definition method in the related art motion program. In the figure, a numeral D represents a personal computer or dedicated engineering tool, D I\/O definition data for the control signal which defines the association of the operation of activation\/termination of the motion program and I\/O signals, D a specific example of the I\/O definition data for the control signal, D a tool for setting the I\/O definition data for the control signal, D a motion program under editing, D a specific example of a motion program, D a tool for editing the motion program, D and D communications interfaces for downloading data from a personal computer or dedicated engineering tool D to a numerical controller , D a data storage memory, D I\/O definition data for the control signal stored in the data storage memory, D a motion program stored in the data storage memory, D an I\/O interface for input\/output of an I\/O signal, D an I\/O for the control signal, D a motion control processor operating in accordance with the given motion program, D a servo amplifier, D a servo motor, D an encoder, and D a motion mechanism.","In the example of the application program D in , insteps () through (), a motion command API whose arguments are the variables X through X and Y through Y is called and a motion command is given to the numerical controller . In this practice, signals for controlling activation\/termination of each motion command API are uniformly controlled by a single control command defined in the I\/O definition data for the control signal. Thus a control signal cannot be selected individually.","In this way, in the conventional art, in case the value of a variable has changed due to an external cause such as an input signal to a sensor, a motion API must be called by an application program again and a command must be given via a bus such as a PCI bus. This prevents high-speed change of motion operation.","Another problem is that, on top of cumbersome definition of an I\/O for the control signal, operation of a multi-series motion programs requires definition of the I\/O for the control signal for each series as well as definition on which series the motion program belongs to. This complicates the preparatory stage of a motion program, thus turning the motion program hard to handle.","The invention has been accomplished in view of the aforementioned problems and aims at providing a system with a simple, easy-to-use preparatory stage which allows quick change of motion operation.","According to the invention, variables representing speeds and positions are stored in a memory in a numerical controller. The handles to a variable (address of the variable) are set to integers of a motion API called by an application program and sensor input and values of variables are changed by the numerical controller so as to change motion operation at high speed.","Further, by providing on a motion program an API which performs definition of the I\/O for the control signal for control of activation\/termination of a motion program, a tool for defining the I\/O of the control signal is no longer required, thus readily providing the operation of a multi-series motion program.","Embodiments of the invention will be described based on drawings.  is a block diagram of a system which executes a motion data command method according to the first embodiment of the invention. In the figure, a numeral A represents a personal computer or programmable controller, Aan application program for a motion command operating on the personal computer or programmable controller A, A a specific example of an application program for a motion command, A a motion API called by the application program A, A and A bus interfaces for accessing a bus A such as a PCI bus, A a numerical controller, A a motion control processor operating in accordance with given motion command data, A a sensor interface for input from a sensor A, A a variable storage memory for storing motion command data, A a servo amplifier, A a servo motor, A an encoder, and A a motion mechanism.","In the specific example A of the application program A in , in steps () and (), the initial values of motion command data are substituted into the variables X, Y present in the memory A in the numerical controller A. In this practice, it is not possible to directly substitute values into the variables X, Y from the application program A. Thus, the handles Handle-X, Handle-Y to specify the variables X, Y are introduced and the data setting API which employs these handles as arguments is used to substitute the initial values of motion command data.","In step (), the handles Handle-X, Handle-Y to specify the variables X, Y are introduced and the motion command API which employs these handles as arguments is called to give a motion command to the numerical controller A.","The motion control processor A, receiving a motion command, uses the values stored in the variables X, Y present in the variable storage memory A indicated by Handle-X, Handle-Y to perform motion control.","Then, an input is made from the sensor A and the input values or values selected by the input values are substituted into the variables X, Y in the variable storage memory A by way of the sensor interface A. At this point in time, the motion control processor A is capable of changing motion control by using the values stored in the variables X, Y present in the variable storage memory A, without using an application program and communications with the application program.","The second embodiment of the invention will be described based on drawings.  is a block diagram of a system which executes a control signal definition method in the motion program according to the invention. In the figure, a numeral B represents a personal computer or dedicated engineering tool, B a motion program under editing, B a specific example of a motion program, B a tool for editing the motion program B, B and B communications interfaces for downloading data from a personal computer or dedicated engineering tool B to a numerical controller B, B a data storage memory, B a data storage motion program, B an I\/O interface for input\/output of an I\/O signal, B an I\/O for the control signal, B a motion control processor operating in accordance with the given motion program B, B a servo amplifier, B a servo motor, B an encoder, and B a motion mechanism.","According to one specific example B of the application program B in , in step (), an API whose arguments are In through In as control signal I\/Os is called and association with the operation of activation\/termination of the motion program is provided to obtain the control signal handle IOhandle. In the motion program B, an API whose arguments are In through In as control signal I\/Os is called and association with the operation of activation\/termination of the motion program is provided to obtain the control signal handle IOhandle.","In steps () and (), the control signal handle IOhandle is used to call a motion command API which uses this handle as an argument to perform motion control. In step (), the control signal handle IOhandle is used to call a motion command API which uses this handle as an argument to perform motion control.","As mentioned hereabove, according to the first embodiment of the invention, the handles to a variable (address of the variable) are set to integers of a motion API called by an application program, the variables of the motion API stored in the memory of a numerical controller. Thus, even in case the value of a variable has changed due to an external cause such as an input signal to a sensor, it is not necessary to give a command again from an application program via a bus such as a PCI bus, thereby changing motion operation at high speed.","Further, according to the second embodiment of the invention, by providing on a motion program an API which performs definition of the I\/O for the control signal for controlling activation\/termination of the motion program, a tool for defining the I\/O of the control signal is no longer required, thus allowing selection of an individual control signal per motion command. Further, definition of separate control signals in a plurality of programs readily provides the operation of a multi-series motion program."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 4"}]},"DETDESC":[{},{}]}
