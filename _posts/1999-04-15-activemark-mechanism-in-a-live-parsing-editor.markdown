---
title: Activemark mechanism in a live parsing editor
abstract: An activemark mechanism for a live parsing editor allows marks (labels) in text to be referenced or linked to any editor command, macro, or any external tool activated by the editor. The activemark mechanism includes a parsing mechanism which creates an activemark automatically when the document is loaded in the editor, and thereafter as a user enters information into the document by parsing the changes to the document as they are committed. The activemarks are dynamic in that their meaning and behavior are updated in the context of any external tool which is activated by the editor.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=06976209&OS=06976209&RS=06976209
owner: International Business Machines Corporation
number: 06976209
owner_city: Armonk
owner_country: US
publication_date: 19990415
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE INVENTION"],"p":["The present invention relates to document processing for a data processing system. More particularly, the present invention relates to an activemark mechanism for a live parsing editor.","The concept of a mark is used in document processing systems, such as editors, to denote a label structure. In an editor, marks are typically used for setting bookmarks in the text and labelling text which is referenced by other tools, for example, source code which is referenced by compiler error messages. In the context of browsers for Internet applications, marks denote \u201chypertext\u201d links, or are used to invoke a function such as an applet.","The conventional concepts of \u201cmark\u201d and \u201chypertext\u201d are restrictive in their definitions and, as a consequence, have limited functionality in the context of today's data processing systems. Conventional mark and hypertext structures are static in both location and type, and comprise a tag which is hard-coded in the source file. Beyond responding to the click of a mouse, conventional mark and hypertext structures offer no real interactivity.","What is needed is a mechanism for \u201cactivemarks\u201d which are dynamically set in a document using a programmable editor, and which provide the capability to dynamically link any pieces of text or locations in the edit view to any editor, or external, command.","The present invention provides an activemark mechanism for editors and other document processing systems. The activemark structure features the capability to bind commands to the mark. The activemark structure utilizes a parsing mechanism which creates activemarks automatically as the user opens a document, and thereafter as the user enters information into the document, by incrementally parsing changes to the document. The activemark mechanism is particularly applicable to programmable text editors or edit controls such as the IBM Live Parsing Extensible Editor (LPEX).","According to one aspect, the activemark mechanism provides the capability to link any piece of text with any editor command or macro, or via the editor to any external command, for example, editor-attached tools, system commands, and the like. Advantageously, the activemark mechanism is not limited to hard-coded labels in specifically-tagged source text, nor is the ativemark mechanism limited to hard-coded functionality, such as relocation links, references, or running an applet. The activemarks and their definition and behaviour are updated in the context of any external tool which is activated by the live parser.","According to another aspect, the binding of the activemark to a command does not need to be specified in the source file which is loaded in the editor. Furthermore, the document remains intact regardless of the activemarks which may be set throughout the edit session. According to the invention, the mark is set over, or linked to, a particular piece of text by a live parser and\/or other external command(s) running off the editor, rather than being hard-coded in the text. Activemarks and their associated command(s) may also be set during the edit session by the user either manually, i.e. directly through the GUI (Graphical User Interface), or through actions\/tools provided by the GUI.","The activemarks-setting (or activemarking) operation is first performed during the initial loading of a file in the editor during total parse, and thereafter, incrementally as triggered by user changes, or other operations, to the file. During the processing of a file, the activemarks are kept synchronized with the text being edited.","It is a feature of the activemark mechanism that the links are not necessarily static in type. The activemarks and their meaning or behaviour upon activation are updated in the context of any external tool activated by the live parser. For example, a source-code navigator will dynamically update the caller and callee (hereafter \u201ccalled\u201d) references between marks set on the function headers and on the function calls.","A Hypertext Markup Language (HTML) editor (e.g. in an Internet browser) for HTML files implementing the activemark mechanism according to the present invention includes the functionality already supported for HTML files and their hard-coded and unique-command markup tags in addition to the features of the activemark mechanism. This editor may be, however, programmed to encode activemarks set up during the edit session as hard-coded tags in the document file.","According to another aspect, activemarks can be programmed to display in various ways, such as through highlighted fonts defined through foreground and background colours and style attributes (e.g. italics, bold, underscore, etc.), borders, bitmaps, etc., or drawn under control of the external command. Activemarks may also be programmed to display in a position in the edit view different from the location of the text associated with them.","In one aspect, the present invention provides a processing system for processing a document, the processing system comprises: (a) a programmable text processing module having means for loading the document and a parsing editor for initially parsing the document and thereafter incrementally parsing changes committed in the document; (b) a mark control module having means for setting a plurality of marks in the document, means for modifying the marks, and means for clearing the marks, and each of the marks comprising selected information in the document and means for linking the selected information with a command, the linking means being responsive to the operation of the parsing editor; (c) a graphical user interface module having means for displaying the document and means for controlling the display of the document; (d) an edit control module having means for controlling the text processing module, means for controlling the mark control module, and means for controlling the graphical user interface module.","In another aspect, the present invention provides in a document processing system having means for loading and storing a document, a parsing editor for initially parsing the document and thereafter incrementally parsing information entered in the document, and a graphical user interface for displaying the document, a method for generating marks in the document, the method includes: (a) selecting information for a mark in the document; (b) linking the selected information to a command, the linking operation being responsive to the parsing by the parsing editor; and (c) activating the mark in response to an activation input.","The present invention relates to Canadian Patent Application No. 2,246,920, filed on Sep. 10, 1998, and incorporated herein in its entirety by reference.","Reference is first made to  which shows in block diagram form an edit system  for implementing an activemark mechanism according to the present invention. In the following description, the terms editor and edit system are used in a general sense to refer to any system to which this invention applies, be it a text editor, text processor, Internet browser, etc.","Referring to , the edit system  comprises the following principal functional modules: an edit control module , a text processing module , an activemarks module , a graphical user interface (GUI) control module , and a commands\/macro interface module . During the editing of a document, the editor  maintains a series of data structures which include an edit control data structure , a document control data structure , an edit buffer , zero or more activemark data structures , and one or more view control data structures . As shown in , the edit buffer  comprises one or more element data structures , shown individually as and ","The edit control module  is responsible for the instantiation and management of the various components of the edit system . The functions of the edit control module  include processing internal edit system commands, handling the binding of internal commands or external commands and edit macros to menu items, key actions, mouse actions, etc. When an action is received, the edit control module  invokes the command, if any, bound to the action.","The text processing module  handles the loading of documents into the edit buffer  of the edit system . The functions of the text processing module  also include text editing operations and the formatting of the text, and the saving of the documents. The text processing module  records committed changes to the document in a stack for subsequent processing by a live parser which is registered in the edit system  for the document. The activemarks module  is called to respond to the changes in the text, such as to adjust the activemarks to newly-changed text and to invoke exit points of activemarks affected by alterations to the document text.","The activemarks module  handles the processing of marks and activemarks including setting, clearing, changes to the marks resulting from modification to the text, setting and activation of activemark commands and exit points. The functions of the activemarks module  are described in more detail below.","The principal functions of the graphical user interface control module  include controlling the document edit view control, and building and rendering the edit view. The graphical user interface module  manages the display attributes of the rendered elements as set up by the editor and its attached tools, for example, those set by the tokenization and colorization of the text by the live parser(s), non-document display-only elements and imbedded messages, the display attributes of activemarks, etc. Preferably, the graphical user interface control module includes the capability to show the contents of the edit buffer , i.e. the document, selectively by only including in the view those elements whose visibility matches the current settings.","The functions of the commands\/macros interface module  include controlling the interface to internal and external commands and edit macros, including live, incremental, parsers. The commands\/macros interface module  also loads and runs external commands and macros.","The edit control data structure  comprises a data structure which stores global data for controlling the edit system . The document control structure  stores document control data for controlling the operations on a document in the edit system . During the course of operation, several document controls will be created, one for each document.","The edit buffer  comprises a linked list of all the text elements which make up a particular document. For a document, classes are defined which broadly classify element types in the document. Classes are used to filter out elements from the view, and are also used by the parsers or external commands to interpret the edit buffer (i.e. the document) contents at various degree of detail. Each element can belong to one or more classes.","The element data structure  stores the text elements and the corresponding prefix area contents. In addition, the element data structure  contains formatting flags and display attributes and class information. The contents of a document comprise text elements which are loaded into the edit system . The display attributes for each character are usually set by the tokenizer in a live parser attached to the edit system .","The view control data structure  contains data related to the control of an edit view for one document in an edit system window. Such view control data includes display attributes defined for the view, the size of the view, the format of its displayed prefix area(s), the required visibility of elements (for filtering, e.g., zooming in\/out of text), screen fields for the document view consisting of the particular area of the Edit Buffer that displays, etc.","The activemark data structure  contains the data associated with the activemark definitions. As will now be described, the activemark mechanism according to the present invention allows the linking or binding of any piece of text in the document with any editor command or macro. It is a feature of the activemark mechanism that the binding of the activemark to a command is not specified in the source file (i.e. the document) loaded in the edit system . Instead of being \u201chard-coded\u201d in the text of the document, the activemark according to the invention is set over a particular piece of text by a live parser and\/or other external command(s) running in the edit system . As will be described in more detail below, the binding of the activemark is performed first upon the initial loading of a document file in the edit system  during the total parse operation, and subsequently in response to user-entered changes or to other operations performed on the file. During the processing of the document file, the edit system  keeps the activemark(s) synchronized with the text being edited in the document. As will be described in more detail, the activemark mechanism also provides the capability to program the display of the activemarks in the document.","One or more live parser(s) may be attached to the edit system  for a document. A parser first gets control after the file has been loaded into the edit system  (i.e. initial total parse), and thereafter it is called by the text processing module  following changes made to the document (i.e. incremental parse). The live parser, which is typically an external command, parses the edit document. The live parser sets display attributes for the text elements in the edit view according to the syntax of the document (e.g. token highlighting), records classes in the edit system  with information regarding various constructs found in the document (e.g. C-language function bodies), and sets up activemarks accordingly. The parser-set information is used by the edit system  to display the document in a view (e.g. colourized, filtered section of the source, activemark labels, etc.), by other tools attached to the edit system to obtain detailed information about the structure of the document in order to carry out context-sensitive actions, and by the parser itself as reference points for incremental parsing.","The activemark mechanism according to the present invention comprises a SET MARK.ACTION command, a QUERY MARK.ACTION command, and a MARK RUN command. A user utilizes the SET MARK.COMMAND command to turn a conventional mark into an activemark, i.e. set the command binding of a mark. It will be appreciated that as such conventional marks in the edit system  are a subset of activemarks.","The user utilizes the QUERY MARK.COMMAND command to determine which command(s) are bound to an activemark. The MARK RUN command is used to activate the command that is associated with the activemark.","An activemark is triggered, or invoked, either through an explicit command request or through a command bound to a particular key or key combination, for example, clicking a mouse button as described below with reference to .","In response to selection of a particular key (or key combination), the activemarks module  in the edit system  will run the command(s) which are bound to the activemark(s) indicated. The editor or live parser profile may bind a particular key to the MARK RUN command, such as a left mouse button single click. When the user activates the activemark (that is, selects the key combination bound to the MARK RUN command), the command for the activemark modifies the mark's highlight font for visual feedback purposes, and carries out the bound command(s). Typically, such a selection key is bound to a generic activemark trigger command or macro, which will handle the activation of the activemark(s) at the active point in a uniform manner, and take the most appropriate action in the case there are overlapping marks at the current selection location, i.e. invoke the command of the top-most mark, or that spanning the smallest range of text selection, or present the user with a choice, etc.","Similarly, as an example, the mark-setting tools (e.g. editor macros) may register a callback for the initialization of the pop-up screen. When the pop-up menu is brought up, each tool is called to optionally add one or more appropriate menu item(s) for any of its activemarks that are set at the pop-up activation location.","Tools that are added\/removed during the edit session will, through the QUERY and SET MARK.COMMAND commands, add to and restore an existing activemark command or series of commands, and similarly register and de-register the callbacks for the pop-up initialization.","Reference is next made to  which show a series of screen displays for a sample document in an edit system incorporating the activemark mechanism according to the present invention. In this example, the sample document as depicted in  comprises a source code computer program  written in the well-known C-programming language. As shown in , the source code program  has been loaded in the edit system  and is displayed in a window . The program file (i.e. document)  has been processed, i.e. parsed, by a live parser for C which is attached to the edit system . The initial processing by the live parser comprises the following operations: registering itself to the edit system  for incremental parsing; adding its own menu items for C-related user actions; tokenizing and colorizing the document  according to C-programming syntax and conventions; setting up an activemark for each function in the program module; and collapsing the view in the window  to only show the function headers for the source code program .","As shown in , the activemark for each function is displayed as a presentation label . The presentation labels , denoted individually as , , , , , . . . , , are set outside the associated text (i.e. the function names in the function headers) in the source code  and aligned on the right side of the window . The view of the source code program  shown in the window  serves as a function-level overview of the contents of the source code program , and provides a starting point for editing operations in the source code program . Preferably, the live parser sets the activemarks and associated commands in the various windows such that the same action trigger, e.g. clicking or double clicking the left mouse button, invokes the action which is most natural and expected by the user in the particular context.","In operation, the live parser is continuously triggered in response to editing operations on the source code program  to keep the file tokenization current, and to add or remove activemarks as functions are added or removed from the source code . The commands associated with the activemarks in the window  shown in  are set to call a function in the live parser which opens a source function-navigator window  as shown in  and runs the commands associated with the particular activemark which has been activated. This feature serves to effectively chain activemarks in different windows (or levels of abstraction of the same source code) in the edit system .","For example referring back to , the user has clicked the label associated with the activemark for the function parseCurrent( ). The commands associated with the activemark for the function parseCurrent( ) include a command to highlight the presentation label (as shown in ), a command to open the function navigator window  as shown in , and a command to run the activemark for the parseCurrent( ) node in this window. As shown in , the activemark for the function parseCurrent( ) is run as if directly activated by the user, i.e. the activemark is displayed as a highlighted label , and causes the system  to display a new edit view  for the function parseCurrent( ) as shown in .","As shown in , the source code segment associated with the activemark for the function parseCurrent( ) is displayed in the edit view window , the code is tokenized by the C-language parser, and activemarks are set over the body of the function parseCurrent( ) (denoted by reference ) and each variable accessed in this function (denoted by reference ). Referring to , activemarks  and  are shown highlighted in relation to the rest of the text for explanatory purposes, and are not necessarily so highlighted by the parser. The variables in function parseCurrent( ) set as activemarks  include insideComment , wascomment , rc , and fPendOff . Moving the mouse pointer in this view over the variable activemarks  causes the command associated with the particular activemark  to display information about that variable in the message line  of the edit view window . The information associated with the activemarks about a certain item or segment of the source document, e.g. variable fPendOff , can be queried and used by other tools attached to the edit system .","When the user activates the view pop-up over overlapping activemarks, the actions of all the activemarks at that location are displayed. Referring to , the available user actions associated with any of the activemarks  and  are displayed in a pop-up window . The pop-up window  is displayed by clicking, for example, the right button on the mouse with the mouse pointer positioned over the activemark  of interest. For example, the right button of the mouse is clicked with the pointer over the activemark for fPendOff to display a pop-up window with the actions associated with the variable and function parseCurrent( ) . As shown in , the actions associated with the fPendOff activemark comprise an object for opening a view of the file where this external variable is declared, an object for displaying a list of the functions called from parseCurrent( ), and an object for displaying a list of the function calls to parseCurrent( ). Clicking one of the objects in these lists initiates other appropriate editing operations.","As another example, an interactive demo of an application, or interactive navigation through a document, may be set through an appropriate source file in conjunction with a live parser and text formatter that interpret the text as menu items, tables of contents, references to external commands, system utilities, etc.","The activemark mechanism is implemented in the form of several data structures or control blocks. The control blocks maintain information about the activemarks in the edit system . As will now be described certain mark-related information is part of other control blocks in the edit system  in order to facilitate handling the marks in the context of the edit session.","The main data structure or control block for an activemark takes the following form:",{"@attributes":{"id":"p-0050","num":"0049"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"mark control block"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"147pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["ep1","start of mark: pointer to text element cb"]},{"entry":[{},"(control block),"]},{"entry":["col1","column"]},{"entry":["ep2","end of mark: pointer to text element cb,"]},{"entry":["col2","column"]},{"entry":["name","mark name"]},{"entry":["id","mark id"]},{"entry":["changed","flag to indicate mark changed"]},{"entry":["markCommand","command to run when the activemark is activated"]},{"entry":["menuMarkCommand","description of the activemark command"]},{"entry":["markv","list of mark visibility cb's"]},{"entry":["pfnMarkExit","notification entry point to be called on mark-"]},{"entry":[{},"changed and mark-deleted events for unnamed"]},{"entry":[{},"marks (set via an Application Program Interface,"]},{"entry":[{},"i.e. API, call)"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},"When the visibility attributes of a mark are changed from the default text display attributes in a particular edit view, a mark visibility control block with the new settings for this view is chained off the mark control block (cb). The mark visibility control block takes the following form:",{"@attributes":{"id":"p-0052","num":"0051"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"mark visibility"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["next","pointer to the next mark visibility node in the list"]},{"entry":["view","pointer to the edit view cb"]},{"entry":["included","mark's text is explicitly included in the view"]},{"entry":["excluded","mark's text is excluded from the edit view"]},{"entry":["highlighted","mark's display is highlighted in the edit view"]},{"entry":["font","implementation-specific aggregate of mark display"]},{"entry":[{},"attributes in an edit view:"]},{"entry":[{},"font, font style and effects,"]},{"entry":[{},"background and foreground colours,"]},{"entry":[{},"border style,"]},{"entry":[{},"owner draw (presentation label is under external-"]},{"entry":[{},"command control)"]},{"entry":[{},"presentation label to be displayed instead of the mark's"]},{"entry":[{},"associated text range: text, or bitmap\/icon handle"]},{"entry":[{},"relative\/absolute location in the window when mark not"]},{"entry":[{},"displayed as part of the document text stream."]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},"In a linked-list of marks, a node is defined by a mark list data structure or control block which has the following form:",{"@attributes":{"id":"p-0054","num":"0053"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"thead":{"row":[{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]},{"entry":[{},"mark list"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"next","pointer to the next node in the mark list"]},{"entry":[{},"mark","pointer to the mark cb."]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}]}}},"In the document control block, the mark-related information is contained in the following variables:",{"@attributes":{"id":"p-0056","num":"0055"},"tables":{"@attributes":{"id":"TABLE-US-00004","num":"00004"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"126pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"marklist","mark list for the document"]},{"entry":[{},"markChangedPending","mark list of changed marks pending"]},{"entry":[{},{},"notification"]},{"entry":[{},"markDeletedPending","mark list of deleted marks pending"]},{"entry":[{},{},"notification"]},{"entry":[{},"markDeletedCommand","command to be called for named marks"]},{"entry":[{},{},"removed from this document"]},{"entry":[{},"markChangedCommand","command to be called for named marks"]},{"entry":[{},{},"changed in this document"]},{"entry":[{},"lastMarkId ","id of last-set unnamed mark"]},{"entry":[{},"runningMarks","recursion depth of running activemarks"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}}}},"When a new edit view is opened for a document, the new view inherits all the mark visibility characteristics and attributes (markv control block) of the originating edit view. The mark-related information in the view control is contained in the following variables:",{"@attributes":{"id":"p-0058","num":"0057"},"tables":{"@attributes":{"id":"TABLE-US-00005","num":"00005"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"VIEW CONTROL BLOCK mark-related information"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["filterMarks","true = consider mark include\/exclude settings in this edit"]},{"entry":[{},"view (see the MARKS parameter)"]},{"entry":["includedMarks","there is at least one explicitly included mark in the edit"]},{"entry":[{},"view"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},"There are several edit system commands and parameters for handling marks as will be described in more detail below.","Certain commands have equivalent API (Application Programming Interface) function calls, depending on the implementation requirements or performance characteristics of the edit system incorporating the activemarks mechanism according to the present invention. While most API functions will consist of faster paths to the mark-handling commands indicated below, some additional functionality may be defined for the programming interface. For example, the display attributes of an activemark consist of several parameters, which are more suitable to be passed in via an API function call through an appropriate data structure (control block).","An external command, such as a live parser, will mostly use unnamed marks through the API, being provided access to the mark control block via a handle. Such a parser will set all its activemarks in the document, set up each mark's command to call the parser back with the appropriate parameters, and register the desired notifications on activemark text changes and deletions.","Now that an overview and functional aspects of the invention have been introduced and described, general pseudo code will be presented and described for functions and routines for implementing the activemark mechanism in an edit system  as described above.","The MARK commands are used to set, clear, modify, etc. activemarks and conventional marks, and run activemarks in the edit system . As will be described below, several parameters for the SET and GET editor commands are also utilized in the edit system  to handle marks. Other commands in the edit system  may optionally use or handle marks. For example, a navigational command, such as NEXT, may be used to advance the entry point to the next [active]mark in the document.","The MARK command is implemented as follows:",{"@attributes":{"id":"p-0065","num":"0064"},"tables":{"@attributes":{"id":"TABLE-US-00006","num":"00006"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"140pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["INPUT:","view","edit view cb"]},{"entry":[{},"parameters","the command string (particular"]},{"entry":[{},{},"MARK command and parameters)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"parse commandname, markname, parameters"},{"entry":"document := view\u2212>document"},{"entry":"dispatch process according to commandname (as will be described in more"},{"entry":"detail below)"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}]}}},"The MARK SET command is used to set an activemark, or a conventional mark, in a document. The MARK SET command takes the following form:\n\n",{"@attributes":{"id":"p-0067","num":"0067"},"tables":{"@attributes":{"id":"TABLE-US-00007","num":"00007"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\/\/ create an activemark on line 5, columns 3\u20139"]},{"entry":[{},"mark set # 5 3 5 9"]},{"entry":[{},"\/\/ get its activemark id (e.g., returns #123)"]},{"entry":[{},"get markid."]},{"entry":[{},"\/\/ set its command"]},{"entry":[{},"set markCommand.#123 mult ;editdic link % ;editproc open %"]},{"entry":[{},"\/\/ run the activemark"]},{"entry":[{},"mark run #123"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}},"br":{}},{"@attributes":{"id":"p-0068","num":"0068"},"tables":{"@attributes":{"id":"TABLE-US-00008","num":"00008"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"140pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"3","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"ep1",":=0","\/\/document text element number line1"]},{"entry":[{},"col1",":=0","\/\/column1"]},{"entry":[{},"ep2",":=0","\/\/document text element numbered line2"]},{"entry":[{},"col2",":=0","\/\/column2"]},{"entry":[{},"pMark",":=cb","of the mark identified by markname"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"in document\u2212>marklist"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"133pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if pMark found","\/\/ if mark already exists, re-set it"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"setMark(view, pMark, ep1, col1, ep2, col2)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"else","\/\/ if a new mark, add it to the document"]},{"entry":[{},{},"addMark(view, markname, ep1, col1, ep2, col2)"]},{"entry":[{},"return"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}]}}},"The MARK FIND command is used to find a mark in the document, and takes the following form:",{"@attributes":{"id":"p-0070","num":"0070"},"tables":{"@attributes":{"id":"TABLE-US-00009","num":"00009"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"MARK FIND <markname>"]},{"entry":[{},"Command scope:\u2003edit view"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"It sets the entry position to that noted by the specified<markname>. The MARK FIND command is implemented as follows:",{"@attributes":{"id":"p-0072","num":"0072"},"tables":{"@attributes":{"id":"TABLE-US-00010","num":"00010"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"pMark := cb (control block) of the mark identified by"]},{"entry":[{},"\u2003markname in document\u2212>marklist"]},{"entry":[{},"cursorPosition := pMark\u2212>ep1, pMark\u2212>col1"]},{"entry":[{},"redraw edit view (CURSORMOVED)"]},{"entry":[{},"return"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"The MARK CLEAR command is used to clear a specified activemark or mark (i.e. <markname>), and takes the following form:",{"@attributes":{"id":"p-0074","num":"0074"},"tables":{"@attributes":{"id":"TABLE-US-00011","num":"00011"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"MARK CLEAR <markname>"]},{"entry":[{},"Command scope:\u2003document"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"The specified mark is cleared and removed from all the marklists of the text elements associated with the mark. A mark-deleted notification is then issued. The visibility of one or more edit views may change as a result. The MARK CLEAR command is implemented as follows:",{"@attributes":{"id":"p-0076","num":"0076"},"tables":{"@attributes":{"id":"TABLE-US-00012","num":"00012"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"pMark:= cb of the mark identified by markname"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"in document\u2212>marklist"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if pMark found"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if pMark\u2212>ep1 != null"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"markdeleted(document, pMark)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"clearMark(pMark)"]},{"entry":[{},"for all markv data structures chained off pMark"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if markv\u2212>included = true"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"checkIncludeMark(markv\u2212>view)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"freeMark(document, pMark)"]},{"entry":[{},"markTriggerExits(view)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"return"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"The MARK INCLUDE command is provided for making the selected mark visible and the MARK EXCLUDE command is provided for making a mark not visible. The MARK INCLUDE\/MARK EXCLUDE commands take the following form:",{"@attributes":{"id":"p-0078","num":"0078"},"tables":{"@attributes":{"id":"TABLE-US-00013","num":"00013"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"MARK INCLUDE <markname> [ON\/OFF]"]},{"entry":[{},"MARK EXCLUDE <markname> [ON\/OFF]"]},{"entry":[{},"Command scope: edit view"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}},"br":{}},{"@attributes":{"id":"p-0079","num":"0079"},"tables":{"@attributes":{"id":"TABLE-US-00014","num":"00014"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"markv := getMarkV(view, markname)"]},{"entry":[{},"if INCLUDE"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"markv\u2212>included := ON\/OFF"]},{"entry":[{},"if ON"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"view\u2212>includedMarks := true"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"else"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"checkIncludeMark(view)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"else"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"markv\u2212>excluded := ON\/OFF"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"redraw edit view (VIEWCHANGED)"]},{"entry":[{},"return"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"The MARK SETFONT command is provided to associate display attributes with the mark, in order to highlight it in the edit view. The MARK SETFONT takes the form:",{"@attributes":{"id":"p-0081","num":"0081"},"tables":{"@attributes":{"id":"TABLE-US-00015","num":"00015"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"MARK SETFONT <markname> [<font>]"]},{"entry":[{},"Command scope: edit view"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}},"br":{}},{"@attributes":{"id":"p-0082","num":"0082"},"tables":{"@attributes":{"id":"TABLE-US-00016","num":"00016"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"markv := getMarkV(view, markname)"]},{"entry":[{},"if no font"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"markv\u2212>highlighted := false"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"else"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"markv\u2212>font := font"]},{"entry":[{},"markv\u2212>highlighted := true"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if markv\u2212>highlighted changed or original markv\u2212>font!=font"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"redraw edit view (VIEWCHANGED)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"return"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"The MARK RUN command is provided to activate an activemark, which involves running the command(s) associated with the particular activemark. The MARK RUN command takes the following form:",{"@attributes":{"id":"p-0084","num":"0084"},"tables":{"@attributes":{"id":"TABLE-US-00017","num":"00017"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"MARK RUN [<markname>]"]},{"entry":[{},"Command scope: document"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"If no <markname> is specified, the last mark created is taken. To prevent infinite recursion by one activemark running other activemarks, being called back, and so on indefinitely, a certain maximum call depth is set. The activemark name is appended to the end of the command string (for identification), and the command is invoked.","The editor or live parser profile will commonly bind a key, key combination, or mouse action, such as the left mouse button single click, to a generic activemark trigger command or editor macro, which will handle the activemark activations for a document in a consistent manner. An explicit command request, such as from a menu pull-down, from a tool or parser calls the same activemark trigger. The activemark trigger searches for the activemark(s) at the current entry point and runs the associated command(s). Where there are overlapping marks at the active entry point, the most appropriate action is taken to either invoke the command of the most specific activemark (that spanning the smallest text range), or invoke the commands of all the activemarks at that location in a certain order, or present the user with a choice. When MARK RUN is invoked, the activemark command first modifies the mark's highlight for visual-feedback purposes, and then performs the rest of the operations associated with the mark. The MARK RUN command is implemented as follows:",{"@attributes":{"id":"p-0087","num":"0087"},"tables":{"@attributes":{"id":"TABLE-US-00018","num":"00018"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"if no markname"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"markname := \u201c#\u201d + document\u2212>lastMarkId"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"pMark := cb of the mark identified by markname"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"in document\u2212>marklist"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"if pMark\u2212>markCommand != null"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if document\u2212>runningMarks < maximumRunningMarks"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"increment document\u2212>runningMarks"]},{"entry":[{},"editorCommand(view, markCommand + \u201c \u201d + markname)"]},{"entry":[{},"decrement document\u2212>runningMarks"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"The SET command sets, and the GET command queries, a particular edit system parameter. Depending on the specific edit system, these editor settings for manipulating marks can be implemented as separate commands or additional options to the MARK command detailed above. The SET MARKS ON\/OFF command takes the following form:",{"@attributes":{"id":"p-0089","num":"0089"},"tables":{"@attributes":{"id":"TABLE-US-00019","num":"00019"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"147pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"SET MARKS ON\/OFF"]},{"entry":[{},"Parameter scope: edit view"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"The SET MARKS ON\/OFF command activates\/deactivates the interpretation of MARKINCLUDE and MARKEXCLUDE settings for visibility purposes in the edit view. When the setting is modified, the view is redrawn accordingly. The edit view draw functions consider this setting for purposes of including\/excluding certain marks from the display. The SET MARKS ON\/OFF command is implemented as follows:",{"@attributes":{"id":"p-0091","num":"0091"},"tables":{"@attributes":{"id":"TABLE-US-00020","num":"00020"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"edit view's filterMarks := ON\/OFF"]},{"entry":[{},"redraw edit view (VIEWCHANGED)."]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"The command GET MARK is provided for returning the current setting of the MARKS parameter, and takes the following form:",{"@attributes":{"id":"p-0093","num":"0093"},"tables":{"@attributes":{"id":"TABLE-US-00021","num":"00021"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"GET MARKS"]},{"entry":[{},"Parameter scope:\u2003edit view"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"The GET MARKS command is implemented as follows:",{"@attributes":{"id":"p-0095","num":"0095"},"tables":{"@attributes":{"id":"TABLE-US-00022","num":"00022"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"return edit view's filterMarks"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"The GET MARKINCLUDE\/MARKEXCLUDE commands return the visibility of a mark as set with the MARK INCLUDE\/EXCLUDE commands, and takes the form:",{"@attributes":{"id":"p-0097","num":"0097"},"tables":{"@attributes":{"id":"TABLE-US-00023","num":"00023"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"GET MARKINCLUDE.[<markname>]"]},{"entry":[{},"GET MARKEXCLUDE.[<markname>]"]},{"entry":[{},"Parameters scope: edit view"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}},"br":{}},{"@attributes":{"id":"p-0098","num":"0098"},"tables":{"@attributes":{"id":"TABLE-US-00024","num":"00024"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if no markname"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"markname := \u201c#\u201d + document>lastMarkId"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"pMark := cb of the mark identified by markname"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"in document\u2212>marklist"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"markv := markv chained off pMark for current edit view"]},{"entry":[{},"if markv found"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"return markv\u2212>included\/markv\u2212>excluded."]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"The command GET MARKFONT is provided to determine the current display attribute settings of a mark, and takes the following form:",{"@attributes":{"id":"p-0100","num":"0100"},"tables":{"@attributes":{"id":"TABLE-US-00025","num":"00025"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"GET MARKFONT.[<markname>]"]},{"entry":[{},"Parameter scope: edit view"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}},"br":{}},{"@attributes":{"id":"p-0101","num":"0101"},"tables":{"@attributes":{"id":"TABLE-US-00026","num":"00026"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if no markname"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"markname :=\u201c#\u201d + document\u2212>lastMarkId"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"pMark := cb of the mark identified by markname"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"in document\u2212>marklist"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"markv := markv data structure off pMark for current edit view"]},{"entry":[{},"if markv found"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"return markv\u2212>font display attributes aggregate information."]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"The command GET MARKID is provided to determine the ID of a specified mark. The GET MARKID command takes the following form:",{"@attributes":{"id":"p-0103","num":"0103"},"tables":{"@attributes":{"id":"TABLE-US-00027","num":"00027"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"GET MARKID.[<markname>]"]},{"entry":[{},"Parameter scope: document"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}},"br":{}},{"@attributes":{"id":"p-0104","num":"0104"},"tables":{"@attributes":{"id":"TABLE-US-00028","num":"00028"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if no markname"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"markname := \u201c#\u201d + document\u2212>lastMarkId"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"pMark := cb of the mark identified by markname"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"in document\u2212>marklist"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if pMark found"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"return \u201c#\u201d + pMark\u2212>id."]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"The command SET MARKCOMMAND is provided to set the command binding of a mark in the document, turning the regular mark into an activemark, and the GET MARKCOMMAND is provided to get the command(s) bound to an activemark. These commands take the following form:",{"@attributes":{"id":"p-0106","num":"0106"},"tables":{"@attributes":{"id":"TABLE-US-00029","num":"00029"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"SET MARKCOMMAND.[<markname>] [command [parameters]]"]},{"entry":[{},"GET MARKCOMMAND.[<markname>]"]},{"entry":[{},"Parameter scope: activemark"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}},"br":{}},{"@attributes":{"id":"p-0107","num":"0107"},"tables":{"@attributes":{"id":"TABLE-US-00030","num":"00030"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if no markname"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"markname := \u201c#\u201d + document\u2212>lastMarkId"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"pMark := cb of the mark identified by markname"]},{"entry":[{},"in document\u2212>marklist"]},{"entry":[{},"set\/return pMark\u2212>markCommand"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"The commands SET MENUMARKCOMMAND and GET MENUMARKCOMMAND are provided for setting and getting a menu item string describing the activemark command which is to be added on a pop-up menu (for example, pop-up menu  shown in ) for an edit window for a user-activated activemark command. These commands take the following form:",{"@attributes":{"id":"p-0109","num":"0109"},"tables":{"@attributes":{"id":"TABLE-US-00031","num":"00031"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"SET MENUMARKCOMMAND.[<markname>] [menu]"]},{"entry":[{},"GET MENUMARKCOMMAND.[<markname>]"]},{"entry":[{},"Parameter scope: activemark"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}},"br":{}},{"@attributes":{"id":"p-0110","num":"0110"},"tables":{"@attributes":{"id":"TABLE-US-00032","num":"00032"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if no markname"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"markname := \u201c#\u201d + document\u2212>lastMarkId"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"pMark := cb of the mark identified by markname"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"in document\u2212>marklist"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"set\/return pMark\u2212>menuMarkCommand"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"If no command string is passed for SET MENUMARKCOMMAND, the string is cleared.","The commands SET MARKDELETEDEXIT and GET MARKDELETEDEXIT are provided to set and get the command to be called upon removal of marks in the document. The commands take the following form:",{"@attributes":{"id":"p-0113","num":"0113"},"tables":{"@attributes":{"id":"TABLE-US-00033","num":"00033"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"SET MARKDELETEDEXIT command [parameters]"]},{"entry":[{},"GET MARKDELETEDEXIT"]},{"entry":[{},"Parameter scope: document"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"The commands are implemented as follows:",{"@attributes":{"id":"p-0115","num":"0115"},"tables":{"@attributes":{"id":"TABLE-US-00034","num":"00034"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"set\/return document\u2212>markDeletedCommand"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}},"br":{}},"The commands SET MARKCHANGEDEXIT and GET MARKCHANGEDEXIT are provided to set and get the command to be called when the text associated with a mark in the document is first changed. These commands take the following form:",{"@attributes":{"id":"p-0117","num":"0117"},"tables":{"@attributes":{"id":"TABLE-US-00035","num":"00035"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"SET MARKCHANGEDEXIT command [parameters]"]},{"entry":[{},"GET MARKCHANGEDEXIT"]},{"entry":[{},"Parameter scope: document"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}},"br":{}},{"@attributes":{"id":"p-0118","num":"0118"},"tables":{"@attributes":{"id":"TABLE-US-00036","num":"00036"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"set\/return document\u2212>markChangedCommand"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"The command GET MARKLIST is provided for retrieving a list of the named marks set in the document. The command takes the following form:",{"@attributes":{"id":"p-0120","num":"0120"},"tables":{"@attributes":{"id":"TABLE-US-00037","num":"00037"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"GET MARKLIST"]},{"entry":[{},"Parameter scope: document"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}},"br":{}},{"@attributes":{"id":"p-0121","num":"0121"},"tables":{"@attributes":{"id":"TABLE-US-00038","num":"00038"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"string = \u201c\u201d"]},{"entry":[{},"for all marks in document\u2212>marklist"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"if mark\u2212>name!=null"]},{"entry":[{},"string:=string + mark\u2212>name+\u201c\u201d"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"return string"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"The command GET MARKRANGE is provided to retrieve the text range, i.e. starting and ending positions, of the specified mark. The command takes the following form:",{"@attributes":{"id":"p-0123","num":"0123"},"tables":{"@attributes":{"id":"TABLE-US-00039","num":"00039"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"GET MARKRANGE.[<markname>]"]},{"entry":[{},"Parameter scope: document"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}},"br":{}},{"@attributes":{"id":"p-0124","num":"0124"},"tables":{"@attributes":{"id":"TABLE-US-00040","num":"00040"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if no markname"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"markname:=\u201c#\u201d+document\u2212>lastMarkId"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"pMark:= cb of the mark identified by markname"]},{"entry":[{},"in document\u2212>marklist"]},{"entry":[{},"return spring composed of"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"0\/pMark\u2212>ep1\u2212>elementNumber,"]},{"entry":[{},"pMark\u2212>col1,"]},{"entry":[{},"0\/pMark\u2212>ep2\u2212>elementNumber,"]},{"entry":[{},"pMark\u2212>col2."]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"The following MARK-processing routines are called by the MARK command, by the SET\/GET commands for mark parameters, by mark-handling API (Application Programming Interface) functions, and by other mark-processing commands in the edit system .","The getMarkV routine retrieves the visibility aggregate of a mark for a particular edit view. If a visibility aggregate is not found for the specified view, then one is created. The getMarkV routine is implemented as follows:",{"@attributes":{"id":"p-0127","num":"0127"},"tables":{"@attributes":{"id":"TABLE-US-00041","num":"00041"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"INPUT:view - edit view cb"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"markname - mark name"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"pMark:= cb of the mark identified by markname"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"in document\u2212>marklist"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"for all markv data structures chained off pMark"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"locate markv for this view (markv\u2212>view=view)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if none found"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"create a new one"]},{"entry":[{},"clear it"]},{"entry":[{},"link it in"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"return markv"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"The markChange routine is provided to update the activemarks of a text element as a result of text alterations. The markChange routine is implemented as follows:",{"@attributes":{"id":"p-0129","num":"0129"},"tables":{"@attributes":{"id":"TABLE-US-00042","num":"00042"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"175pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["INPUT:view","- edit view cb"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"ep","- test element changed"]},{"entry":[{},"col","- starting column change"]},{"entry":[{},"len","- length of change"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"changetype - replace, insert, or delete"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"document:=view\u2212>document"},{"entry":"for all marks in the text element ep marklist"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"update mark structure depending on type of change, its range, and the"]},{"entry":[{},"range covered by the mark"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"(starting text element, ending text element, and range of"]},{"entry":[{},"characters in the current text element)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if whole mark delete\/deleted from text element ep"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"remove mark node from text element list & free it"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if whole mark delete"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"markDeletedNotification(document, pMark)"]},{"entry":[{},"for all markv data structures chained off pMark"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"checkIncludeMark(markv\u2212>view)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"else if (mark changed)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"markChangedNotification(document, pMark)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"markTriggerExits(view)"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}]}},"br":{},"b":"12","figref":"FIG. 1"},"The routine markDeletedNotification is provided for adding a specified mark to the document mark-deleted notifications pending list. The markDeletedNotification routine is implemented as follows:",{"@attributes":{"id":"p-0131","num":"0131"},"tables":{"@attributes":{"id":"TABLE-US-00043","num":"00043"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"INPUT: document - document cb (control block)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"pMark - pointer to cb of deleted mark"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"find mark in document"]},{"entry":[{},"if found"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"unlink mark cb from document\u2212>marklist"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"else"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"allocate & copy a mark cb"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"link mark cb in document\u2212>markDeletedPending list."]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"The routine markChangedNotification is provided for adding a specified mark, if not yet changed, to the document mark-changed notifications pending list. The markChangedNotification routine is implemented as follows:",{"@attributes":{"id":"p-0133","num":"0133"},"tables":{"@attributes":{"id":"TABLE-US-00044","num":"00044"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"INPUT: document - document cb"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"pMark - pointer to cb of altered mark"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if pMark\u2212>changed=false"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"pMark\u2212>changed:=true"]},{"entry":[{},"allocate & copy a mark cb"]},{"entry":[{},"link mark cb in document\u2212>markChangedPending list"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"The routine markTriggerExits is provided for triggering the mark changed and mark deleted notification commands for all the marks in the document mark notification pending lists. The markTriggerExits routine is implemented as follows:",{"@attributes":{"id":"p-0135","num":"0135"},"tables":{"@attributes":{"id":"TABLE-US-00045","num":"00045"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"INPUT: view - edit view cb"},{"entry":"document:=view\u2212>document"},{"entry":"pMarkList:=document\u2212>markChangedPending"},{"entry":"document\u2212>markChangedPending:=null"},{"entry":"for all nodes in pMarkList"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"pMark:=pMarkList\u2212>mark"]},{"entry":[{},"if pMark\u2212>name!=null"]},{"entry":[{},"\u2009if document\u2212>markChangedCommand!=null"]},{"entry":[{},"\u2009markExit(view, document\u2212>markChangedCommand,pMark\u2212>name)"]},{"entry":[{},"else"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"if pMark\u2212>pfnMarkExit!=null"]},{"entry":[{},"notifyActivemark(document, pMark\u2212>pfnMarkExit,"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"EXITMARKCHANGED, pMark)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"remove & free mark node from pMarkList"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"pMarkList:=document\u2212>markDeletedPending"},{"entry":"document\u2212>markDeletedPending:=null"},{"entry":"for all nodes in pMarkList"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"pMark:=pMarkList\u2212>mark"]},{"entry":[{},"if pMark\u2212>name!=null"]},{"entry":[{},"if document\u2212>markDeletedCommand!=null"]},{"entry":[{},"\u2009markExit(view,document\u2212>markDeletedCommand, pMark-name)"]},{"entry":[{},"else"]},{"entry":[{},"if pMark\u2212>pfnMarkExit!=null"]},{"entry":[{},"\u2009notifyActivemark(document, pMark\u2212>pfnMarkExit,"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"EXITMARKDELETED, pMark)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"free all pMark\u2212>markv data structures"]},{"entry":[{},"free pMark"]},{"entry":[{},"remove & free its node from pMarkList"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}},"br":{}},"The routine markExit is provided for appending the markname to the end of the command string for identification, and for invoking the command. The markExit routine is implemented as follows:",{"@attributes":{"id":"p-0137","num":"0137"},"tables":{"@attributes":{"id":"TABLE-US-00046","num":"00046"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"INPUT:view - edit view cb"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},{},"command - mark command registered"]},{"entry":[{},{},"markname - mark name"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if command !=null and markname !=null"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"editorCommand(view,command+\u201d\u2009\u201c+markname)"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"The routine checkIncludeMark is provided for checking if there are any marks left with the INCLUDE flag set. If there are no such marks left, the includedMarks flag is reset in the edit view cb, so that all the text elements are displayed upon edit view redraw. The checkIncludeMark routine is implemented as follows:",{"@attributes":{"id":"p-0139","num":"0139"},"tables":{"@attributes":{"id":"TABLE-US-00047","num":"00047"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"INPUT:view - edit view cb"]},{"entry":[{},"if view->includedMarks = false"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"return"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"for all view->document->marklist nodes"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"for all marklist->mark->markv data structures"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if markv->view=view and markv->included = true"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"return"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"view->includedMarks := false"]},{"entry":[{},"redraw edit view (VIEWCHANGED)"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"The routine clearMark is provided for disassociating a mark from its text. The clearMark routine is implemented as follows:",{"@attributes":{"id":"p-0141","num":"0141"},"tables":{"@attributes":{"id":"TABLE-US-00048","num":"00048"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"INPUT:pMark - pointer to mark cb"]},{"entry":[{},"if pMark->ep1 = null"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"return"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"for all elements associated with mark (pMark->ep1 . . . pMark->ep2)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"find list node for pMark in the text element marklist"]},{"entry":[{},"if found"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"remove & free node from the text element marklist"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"pMark->ep1 := null"]},{"entry":[{},"pMark->ep2 := null"]},{"entry":[{},"pMark->col1 := 0"]},{"entry":[{},"pMark->col2 := 0"]},{"entry":[{},"pMark->changed:= false"]},{"entry":[{},"for all markv data structures chained off pMark"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if markv->highlighted = true"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"redraw edit view (VIEWCHANGED)."]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}},"br":{}},"The routine freeMark is provided for freeing the storage associated with a mark, and removing it from the document list.",{"@attributes":{"id":"p-0143","num":"0143"},"tables":{"@attributes":{"id":"TABLE-US-00049","num":"00049"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"INPUT:document - document cb"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"pMark - pointer to mark cb"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if pMark->ep1 != null"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"ClearMark(pMark)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"find list node whose mark = pMark in document->marklist"]},{"entry":[{},"if found"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"remove & free node from document->marklist"]},{"entry":[{},"free all markv data structures chained off pMark"]},{"entry":[{},"free pMark"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"The freeMark routine disassociates the mark from its current text, and then removes the mark from the document marklist and its associate memory is freed.","The routine setMark is provided for adding a mark to the marklists of all the text elements that are associated with it.",{"@attributes":{"id":"p-0146","num":"0146"},"tables":{"@attributes":{"id":"TABLE-US-00050","num":"00050"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"INPUT:view - edit view cb"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"pMark - pointer to a mark cb"]},{"entry":[{},"ep1 - starting text element"]},{"entry":[{},"col1 - starting column"]},{"entry":[{},"ep2 - ending text element"]},{"entry":[{},"col2 - ending column"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"if pMark->ep1 !null"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"clearMark(pMark)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"document:view->document"},{"entry":"\/\/text elements were specified"},{"entry":"if ep1 !=null and ep2!null"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if order of ep1, ep2 not ascending"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"swap them"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if order of col1, col2 in a single-element mark not ascending"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"swap them"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"\/\/determine starting and ending positions:"},{"entry":"\/\/-if no starting element specified, use current entry point"},{"entry":"if ep1=null"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"ep1 :=view->ep"]},{"entry":[{},"col1 :=view->cursorPosition"]},{"entry":[{},"ep2 :=null"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"\/\/-if no ending text element specified, use start of mark"},{"entry":"if ep2=null"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"ep2 :=ep1"]},{"entry":[{},"col2:=col1"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"pMark->ep1 :=ep1"},{"entry":"pMark->ep2 :=ep2"},{"entry":"pMark->col1 :=col1"},{"entry":"pMark->col2 :=co12"},{"entry":"pMark->changed:=false"},{"entry":"for all the text elements associated with the mark (ep1 . . . ep2)"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"allocate a marklist node (pMarkList)"]},{"entry":[{},"pMarkList->mark:=pMark"]},{"entry":[{},"link it in at end of the text element marklist"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}},"br":{}},"The routine addMark is provided for adding a mark to a document. The addMark routine is implemented as follows:",{"@attributes":{"id":"p-0148","num":"0148"},"tables":{"@attributes":{"id":"TABLE-US-00051","num":"00051"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"INPUT:view - edit view cb"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"markname - mark name (for a named mark)"]},{"entry":[{},"ep1 - starting text element"]},{"entry":[{},"col1 - starting column"]},{"entry":[{},"ep2 - ending text element"]},{"entry":[{},"col2 - ending column"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"OUTPUT: pointer to the new mark cb"]},{"entry":[{},"allocate mark cb (pMark)"]},{"entry":[{},"initialize mark cb"]},{"entry":[{},"allocate marklist node (pMarkList) pointing to pMark"]},{"entry":[{},"document:=view->document"]},{"entry":[{},"\/\/assign id to the mark"]},{"entry":[{},"increment document->lastMarkId"]},{"entry":[{},"pMark->id:=document>lastMarkId"]},{"entry":[{},"if markname = \u201c#\u201d"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"markname:= \u201c#\u201d + document->lastMarkId"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"pMark->name:=markname"]},{"entry":[{},"link in node pMarkList in document->marklist"]},{"entry":[{},"setMark(view, pMark, ep1, col1, ep2, col2)"]},{"entry":[{},"return pMark"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}},"br":{}},"The routine displayMarks is provided for handling the display of the marks during the screen build and paint update in the edit view. It will be appreciated that the displayMarks routine is implementation-specific and platform-specific, and the particulars of the routine will depend on the mark display features supported, the paint procedures employed, etc. In the implementation of the displayMarks routines, the various visibility and display attributes of the marks in the edit view for the update regions being painted are taken into consideration, including the following:",{"@attributes":{"id":"p-0150","num":"0150"},"tables":{"@attributes":{"id":"TABLE-US-00052","num":"00052"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"- view->filterMarks for the included\/excluded marks"},{"entry":"- the display attributes aggregate of each mark in the view"},{"entry":"where mark->markv->highlighted is true:"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"- font, font style and effects, foreground and background colours,"]},{"entry":[{},"border style for displaying the text associated with the mark, or"]},{"entry":[{},"- the overriding presentation label, displayed instead of the mark's"]},{"entry":[{},"associated text range: text, or bitmap\/icon"]},{"entry":[{},"- the relative\/absolute location in the window when the mark is not"]},{"entry":[{},"displayed as part of the document text stream: e.g., aligned"]},{"entry":[{},"vertically within the edit area or the start\/end margin of the view"]},{"entry":[{},"- when the activemark label is displayed under the control of an"]},{"entry":[{},"external command (owner-drawn), the appropriate draw-request"]},{"entry":[{},"notifications are sent to the external command."]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"The routine initializeMarksPopup is provided for initializing the edit window popup with the menu items pertaining to any activemarks at the current entry point. The initializeMarksPopup routine is implemented as follows:",{"@attributes":{"id":"p-0152","num":"0152"},"tables":{"@attributes":{"id":"TABLE-US-00053","num":"00053"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"ep:=current text element"]},{"entry":[{},"for all marks in the text element ep marklist"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if mark text range covers cursorPosition"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"add a popup menu item mark->menuMarkCommand"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}},"br":{}},"Next, implementation details for the commands\/macro interface module  () are considered. The commands\/macro module  controls the interface to internal commands, external commands (e.g. C\/C++\/Java-written utilities) and editor macros (e.g. REXX-written or automatically generated by the keystroke-recorder), including live (incremental) parsers. The commands\/macro module  loads, runs, and unloads external commands and macros.","Commands may be invoked in the edit system  by a user through a command line, from within macros and external commands (e.g. from a live parser in response to changes to the document text), upon other events being set such as notifications of changed\/deleted activemarks, or upon the activation of an activemark (i.e. invocation of an activemark command). It will be appreciated that certain API (Application Programming Interface) functions may provide faster paths to the same functionality.","The command\/macro module  parses a command string for the command name and its arguments. The command name is looked up to determine the location of the command; the API-registration of notifications for the change\/deletion of an activemark may specify an entry point (callback) into the external-command utility that handles it (usually the one that created the activemark), which will be invoked at these junctures.","Invocation of a mark notification and activemark command causes the mark name to be appended to the command arguments string, or provides the activemark handle (i.e. a pointer to the mark control block), for purposes of identifying the event source.","The processing performed by the Commands\/Macros interface  includes: (a) internal editor commands, and (b) external commands. The internal commands-processing comprises synonyms (aliases) resolution; internal editor command lookup; implicit SET\/GET of editor parameters; and loading of editor macros. The external commands-processing comprises loading unloading (releasing) of editor external command dynamic-link libraries (DLL's) or shared libraries, and loading and releasing of a Java Virtual Machine (JVM) and the external command Java classes and objects; initialization of the external command, running it with the arguments supplied, sending it notifications of a new document being loaded in the editor, of exiting a document, and of the termination of the editor; termination & unloading of the external command upon editor exit, or certain signals and exceptions; and invocation of system commands (through a command shell).","The command\/macro interface  also includes the editor API (Application Programming Interface) for the external commands to interact with the editor, such as get and set of editor parameters, invocation of commands, registration of notifications, memory management. The command\/macro interface  maintains a list of external-command control blocks.","Each control block (cb) includes the name of the external command, handles to its DLL (Dynamic Link Library) and to its entry points, handles to its registered callbacks, the type of the external command and the interface it adheres to. The external-command cb list is also used for catching exceptions in the external command, including logging, graceful termination, unloading of the offending external command.","The command\/macro interface  includes: an externalCommand function, a notifyActivemark function, a notifyDocExit function and a commandExit function.","The externalCommand function is invoked when a command is not found in the internal editor command tables, or as an implicit SET\/GET editor parameter, or as an editor macro. The externalCommand function is implemented as follows:",{"@attributes":{"id":"p-0162","num":"0162"},"tables":{"@attributes":{"id":"TABLE-US-00054","num":"00054"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"INPUT: name - command name string"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"arguments - command arguments string"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"if not found in the existing external-command cb list,"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"find & load dynamic link library (DLL) named as specified"]},{"entry":[{},"determine interface type by entry points exported from the DLL,"]},{"entry":[{},"and, similarly, exported notification entry points (if any)"]},{"entry":[{},"create external-command cb and add to list"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"for non-Java editors, a secondary command processor handles"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Java external commands - instantiate the JVM, look for the"]},{"entry":[{},"class(es) required, initialize them, etc."]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"additional information regarding the execution of the external"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"command may be specified, such as the type of execution from a"]},{"entry":[{},"secondary thread, etc."]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"allocate a user data area in the context of the document"},{"entry":"if first invocation,"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"first send external-command initialization notification\/call external"]},{"entry":[{},"command initialization entry point"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"call the external command with any specified arguments."},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}]}}},"The notifyActivemark function calls an API-registered activemark changed\/deleted notification entry point in an external command. The notify activemark function is implemented as follows:",{"@attributes":{"id":"p-0164","num":"0164"},"tables":{"@attributes":{"id":"TABLE-US-00055","num":"00055"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"INPUT: document - document cb"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"pfnNofity - entry point to call"]},{"entry":[{},"notification - type of event: EXITMARKCHANGED\/"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"119pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"98pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"EXITMARKDELETED"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"pMark - pointer to mark cb"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"build a document-context control block"]},{"entry":[{},"call the external-command entry point pfnNotify with the"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"type of event, and the mark handle (pMark)"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"The notifyDocExit function is invoked upon termination of a document in the editor to notify all the external commands that have registered to be notified of document terminations. The notifyDocExit function is implemented as follows:",{"@attributes":{"id":"p-0166","num":"0166"},"tables":{"@attributes":{"id":"TABLE-US-00056","num":"00056"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"INPUT: document - document cb"},{"entry":"build a document-context control block"},{"entry":"cursor through the external-command cb list for external commands that"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"- are implicitly defined to receive document-termination"]},{"entry":[{},"notifications, and"]},{"entry":[{},"- those that have registered a document-termination entry point"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"send the document-termination notification\/call the document-termination"},{"entry":"entry point."},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}]}}},"The commandExit function is used to terminate and unlink a specified external command. The commandExit function is called for all the external commands in the external-command cb list when the editor terminates. The commandExit function is implemented as follows:",{"@attributes":{"id":"p-0168","num":"0168"},"tables":{"@attributes":{"id":"TABLE-US-00057","num":"00057"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"INPUT: externalCommand - name of the editor external command"},{"entry":"build a document-context control block"},{"entry":"send an external-command terminate notification\/call the"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"external command termination entry point"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"release (i.e. unlink) the DLL, or"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"destroy the Java external command object and release the JVM upon"]},{"entry":[{},"termination of all Java external commands"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"remove the external-command cb from the maintained list"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}]}}},"The disclosed invention as embodied in a method, computer system and computer program product, is particularly applicable to the IBM live parsing extensible editor (LPEX) environment. Those skilled in the relevant art will appreciate that the invention is suitable and relevant to various computer system environments, which are appropriately programmed in accordance with the features described.","While the invention has been described in terms of several aforementioned embodiments, those skilled in the art will recognize that the invention can be practiced with modification within the spirit and scope of the appended claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Reference will now be made to the accompanying drawings which show, by way of example, preferred embodiments of the present invention, and in which:",{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":["FIG. 3","FIG. 2"]},{"@attributes":{"id":"p-0020","num":"0019"},"figref":["FIG. 4","FIG. 2"]},{"@attributes":{"id":"p-0021","num":"0020"},"figref":["FIG. 5","FIG. 3"]}]},"DETDESC":[{},{}]}
