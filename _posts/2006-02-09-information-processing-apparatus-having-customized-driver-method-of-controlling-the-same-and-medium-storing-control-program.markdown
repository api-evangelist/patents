---
title: Information processing apparatus having customized driver, method of controlling the same, and medium storing control program
abstract: An information processing method carried out in an information processing apparatus having a driver program which has previously been installed, and an installation set including a driver program to be customized and an installer, comprises specifying expansion print setting from print settings set in the driver program which has previously been installed, obtaining the specified expansion print setting, and holding the obtained expansion print setting as the installation set.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08395787&OS=08395787&RS=08395787
owner: Canon Kabushiki Kaisha
number: 08395787
owner_city: Tokyo
owner_country: JP
publication_date: 20060209
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS"],"p":["1. Field of the Invention","The invention relates to a printer driver, its related program, an apparatus, and a system.","2. Related Background Art","Hitherto, it is possible to search for a printer which is operating on a network, set an IP address, and install its information into a PC of the user (refer to Japanese Patent Application Laid-open No. 2004-220452, Japanese Patent Application Laid-open No. 2004-74458).","In those conventional techniques, a technique in which the network printer is set so that it can be used in an environment of the user has been mentioned. However, a technique regarding installation of a customized driver and creation and setting of an installer unit which performed the customization is not mentioned.","Further, a technique for allowing another driver to succeed to the installed print setting is being developed. However, the print setting expanded after the installation cannot be succeeded to as a new print environment from a printer driver having the print setting to which the user wants to succeed.","Further, a technique in which expansion print setting which is used in an existing print environment, a driver program, and an installer are made to correspond to each other and constructed as a customized installation set does not exist either.","The invention is made in consideration of at least one of the above problems and it is an object of the invention to enable the user to install a printer driver whose print setting has been expanded by a simple method.","Another object of the invention is to enable the operation necessary for forming a print environment having expansion print setting to be executed without any special knowledge.","Other features and advantages of the present invention will be apparent from the following description taken in conjunction with the accompanying drawings, in which like reference characters designate the same or similar parts throughout the figures thereof.","A best mode for carrying out the invention will be described hereinbelow with reference to the drawings. An information processing apparatus in an embodiment of the invention will be described.  is a diagram showing an example of a network environment including the information processing apparatus in the embodiment of the invention.","[Embodiment]",{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":["FIG. 2","FIG. 3","FIG. 3"],"b":["01","02","03","04","03","02","03","04"]},"In the diagram, T denotes a central arithmetic operation processing unit (CPU) for an arithmetic operation and control; T a RAM in which an executing area where an installer program is loaded and a work area of the program are held in the case where the custom installation is executed; T a keyboard having keys which are used for the operator to execute the operation or input data; T a pointing device such as a mouse or the like which is used for the operator to click buttons or the like displayed on a display T or instruct the operation by moving a cursor; T a storage device (hard disk (HD)) for storing the software of the invention and the formed custom installer; and T a bus for mutually connecting devices in an executing system.","In , for example, it is assumed that a printer is connected to a network and used by a printer administrator in a general network environment (for example, ). It is also assumed that print settings (including print setting, a user defined sheet, user defined media, etc.) which have been customized for the printer driver are used in the PC of the administrator. When the software is activated and started by instructing by clicking an icon or the like, a selecting display screen for allowing the operator to select whether or not a custom installer which can install the driver which succeeded to the customized settings and functions is formed is displayed in step S. If the user's input indicates the creation of the set driver installer, S follows. In S, a desired driver is selected from the installed target drivers. An input display screen for allowing the operator to select whether or not the print settings (including the print setting, user defined sheet, user defined media, etc.) are succeeded to is displayed on the display screen. If the user's input made on the display screen indicates the succession to the print settings, those settings are succeeded to and the driver installer is formed in S. After that, the set driver installer formed in S is stored in S. If the user's input made on the displayed input display screen indicates that the print settings are not succeeded to in S, a default setting driver installer is formed.",{"@attributes":{"id":"p-0032","num":"0031"},"figref":["FIG. 4","FIG. 4","FIG. 5"],"b":["06","03","3","05","4","1","06"]},"The initializing process - will be explained in detail. First, in the initializing process, a folder added with a predetermined default folder name is formed as a folder to store a customization set which is formed (--).","The default folder name is displayed in a check box U in  and can be edited later by the administrator.","Subsequently, a customization check box is initialized in --. In an customization succession initializing process, first, whether or not a setting file of the user defined sheet exists in the HD T is confirmed in ---. If the installer forming program determines that such a setting file does not exist, it finishes the initializing process and the processing routine advances to -. If the installer forming program determines in --- that the setting file of the user defined sheet exists, whether or not user definition favorite registry information has been disclosed in such a file is confirmed in ---. If the installer forming program determines in --- that the user definition favorite registry information has been disclosed in the file, it finishes the initializing process and the processing routine advances to -. If it is determined that the user definition favorite registry information is not disclosed in the file, a check box U showing whether or not the print settings and user settings of the check boxes in  are succeeded to is gray-out displayed in ---, thereby informing that those settings cannot be set.",{"@attributes":{"id":"p-0036","num":"0035"},"figref":["FIG. 5","FIG. 5","FIG. 11"],"b":["01","02","01","03"]},"U denotes a cancel button. By clicking the cancel button U, an application is finished. U indicates a store button. By clicking the store button, processes of  are started, a display screen shown in  is displayed, and the custom installer is formed. The above processes will be described in detail in . It is also possible to construct the system in such a manner that when an error occurs in the processes of , the display screen of  is interrupted or a predetermined error display screen is displayed.",{"@attributes":{"id":"p-0038","num":"0037"},"figref":"FIG. 7","b":"05"},"A value which is determined in accordance with an instruction of the check box is stored in S. Subsequently, the validity of the edit box of the storage destination is checked in S. The validity of the edit box of the folder name is checked in S. A length of path is checked in S. The existence of the installation set before the customization is checked in S. In each of the above processing steps, a check result is outputted as a result indicative of truth or falsehood. If there is at least one error in at least one step, the result of falsehood is outputted. If the error occurs, the display of the display screen of  is interrupted, the predetermined error display screen is displayed, and the processing routine is finished. If no errors are detected in the checking steps in , a processing routine shown in  is started.  shows processes which are executed when the display screen of  is displayed. In S, invalidation (Disable) of the button operation is set so that another process is not erroneously executed during the installing process. An installation set folder is formed in S. The installer or the like is copied and printer setting information is written in S. A customizing portion is checked and copied in S. Subsequently, a process to validate (Enable) the button operation invalidated in S is executed in S.","A process of S as a setting process of the customizing portion will now be described in detail with reference to . The customizing portion is succeeded to in S. A directory where the driver in which the installation set was held has been stored is obtained in S. A CIP file is copied (S). Whether or not the customization is succeeded to is discriminated in S. That is, whether or not the check box U in  has been marked is discriminated. If it is decided that the check box U has been marked, the processing routine advances to S. If it is decided that the check box U is not marked, the processing routine is finished. Whether or not the user defined sheet has been customized is discriminated in S. If it is decided in S that the user defined sheet has been customized, S follows. If it is decided in S that the user defined sheet is not customized, S follows. A UDG file is copied in S and S follows. Whether or not the favorite file has been customized is discriminated in S. If it is decided in S that the favorite file has been customized, S follows. If it is decided in S that the favorite file is not customized, the processing routine is finished. The favorites are obtained and stored and the setting information is written in S. Specifically speaking, in S, the favorite sets are stored in locations  and  in  every DEVMODE in which the favorites have been set by using an SDK. A storing format in this instance is shown in , which will be explained hereinafter. A type of OS to which the favorites correspond has been stored in a location . A size of favorite name has been stored in a location . A total size of DEVMODE regarding the favorites stored in the subsequent location has been stored in a location . The favorite name has been stored in the location . The print setting values to be set as favorites have been stored in the location . The locations  and  are constructed as a set. Data structures similar to those sets as many as the number of favorites are repetitively stored.","Upon installation, the favorite settings  and  are extracted from DEVMODE stored as shown in  and registered into the installed driver by using the SDK, thereby allowing the driver to recognize them. The driver stores and manages the favorites in a registry which is managed by itself and, upon using, loads them into the DEVMODE area.",{"@attributes":{"id":"p-0042","num":"0041"},"figref":"FIG. 10","b":["907","908","909"]},"If the favorites which have previously been registered are added by the user, they are registered into the registry. The favorites which have previously been registered have been registered in areas different from the registry. That is, after the favorites were obtained by the SDK in S, they are checked with those of the registry of the driver of the installation set of the customization target, thereby discriminating in S whether the obtained favorites (DEVMODE) are the favorites which have previously been set in the driver or the user defined favorites. If they are the user defined favorites, DEVMODE obtained in S is copied into the installation set and a file of  is also formed (S).","After the processes were finished with respect to all of the favorites obtained in S, the processing routine of  is finished and the processing routine of  is also finished.",{"@attributes":{"id":"p-0045","num":"0044"},"figref":"FIG. 12","b":"02"},"If the driver is installed in this file, the file is copied to a system directory which can be read out by a predetermined driver in a manner similar to other drivers. Therefore, when the user has added new media, such a file has been updated. The custom installer holds such a file and if the default CIP file has already existed on the installation destination side, the file is overwritten.","The custom installer operates in accordance with the setting file. X denotes a name of the target printer; X an IP address of the installation target printer; X a name of the driver to be installed; and X information of the stored print settings (including the print setting, user defined sheet, user defined media, etc.). When the custom installation set (as described in , the printer driver, the installer, the file of , the CIP file which is instructed by the file name into the file of  and has been copied in S, the UDG file copied in S, the DAT file in which the favorites have been copied in S, and the like are collected as one package, compressed, and formed as an installation set) formed as mentioned above is executed by another user by using his own computer (for example, R in ), the set printer driver of the administrator mentioned above is automatically installed merely by executing the custom installer.","A flowchart in this case is shown in . When the custom installer is activated, whether or not the customized driver installation is executed is selected in V. An example of the display screen at this time is shown in . If it is executed, a custom installer executing module (W) is activated in V by using the information () such as target IP address, driver setting, and the like. The driver installation is executed and the system enters the state where the printer can be used by using the custom driver in the environment of the person who executes.","The computer R, which has the driver program which has previously been installed, and the installation set including the driver program to be customized and the installer, allows the CPU to execute the installer forming program. The installer forming program obtains the expansion print setting from the print settings set in the driver program which has previously been installed: for example, the favorite print setting which has newly been added separately from the favorites of the driver program which has previously been installed by the user and the setting for specifying the CIP file regarding the user defined sheet.","The installer forming program in the computer R writes the obtained expansion print setting into a predetermined area in the installation set.","Further, the following processes are executed in a network system including: the computer R having the driver program which has previously been installed, and the installation set including the driver program to be customized and the installer; and the computer R.","First, in a manner similar to the above, the installer forming application specifies the expansion print setting from the print settings set in the driver program which has previously been installed and obtains the expansion print setting. The obtained expansion print setting is held in a predetermined area in the installation set.","The installation set is transferred from the computer R to the computer R through the network or conveyed by using a CD-ROM in an off-line manner.","In the computer R, the installer included in the installation set installs the driver program included in the installation set in response to an executing instruction so that the driver program can recognize the expansion print setting ().","According to the above embodiment, there is such an effect that the management by the server and the use of the information storing area in the printer main body which are necessary in the conventional techniques are unnecessary. There is such an effect that it is also unnecessary to add the function to the printer main body or the driver main body and costs to realize the above construction are low.","(Other Embodiments)","The processes shown in ,  to , , and the like in the embodiment are executed by each apparatus in accordance with the program which is installed from the outside. In this case, the invention is also applied to the case where an information group including the programs is supplied to a host computer by a storing medium such as CD-ROM, flash memory, FD, or the like or from an external storing medium through the network.","Naturally, the objects of the invention are also accomplished by a method whereby a storing medium in which program codes of software to realize the functions of the embodiment mentioned above have been recorded is supplied to a system or an apparatus or downloaded from an external server (not shown) and a computer (or a CPU or an MPU) of the system or the apparatus reads out and executes the program codes stored in the storing medium.","In such a case, the program codes themselves read out of the storing medium realize the novel functions of the invention and the storing medium in which the program codes have been stored constructs the invention. As a storing medium to supply the program codes, for example, a floppy disk, a hard disk, an optical disk, a magnetooptic disk, a DVD, a CD-ROM, a magnetic tape, a non-volatile memory card, a ROM, an EEPROM, or the like can be used.","Naturally, the invention incorporates not only the case where the computer executes the read-out program codes, so that the functions of the embodiment mentioned above are realized but also the case where an OS (operating system) or the like which is operating on the computer executes a part or all of actual processes on the basis of instructions of the program codes and the functions of the embodiment mentioned above are realized by those processes. Further, naturally, the invention also incorporates the case where the program codes read out of the storing medium are written into a memory provided for a function expanding board inserted into the computer or a function expanding unit connected to the computer, thereafter, a CPU or the like provided for the function expanding board or the function expanding unit executes a part or all of actual processes on the basis of instructions of the program codes and the functions of the embodiment mentioned above are realized by those processes.","According to the first aspect of the embodiment, there is such an effect that the print setting expanded after the installation can be succeeded to a new print environment from the printer driver having desired print settings.","According to the second aspect of the embodiment, there is such an effect that the expansion print setting used in the existing print environment, the driver program, and the installer can be made to correspond to each other and constructed as a customized installation set, and a print environment having the expansion print setting can be freely constructed for the user.","This application claims priority from Japanese Patent Application No. 2005-034587 filed on Feb. 10, 2005, which is hereby incorporated by reference herein."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":["FIG. 3","FIG. 2"],"b":"03"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":["FIG. 12","FIG. 5"]},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 13","b":"04"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 15"}]},"DETDESC":[{},{}]}
