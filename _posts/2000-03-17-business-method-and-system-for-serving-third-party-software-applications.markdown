---
title: Business method and system for serving third party software applications
abstract: A method and system for serving software applications to remote clients across the interne, for example, is disclosed that preferably utilizes standard, SMB (server message block), protocols, which are available in commercial operating systems. Further, an associated business method is described in which subscribing institutions can out-source the application serving to a third party institution, transparently. Finally, a port proxy system is provided that enables tunneling through firewalls that are configured to block communications from SMB ports.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07730169&OS=07730169&RS=07730169
owner: Softricity, Inc.
number: 07730169
owner_city: Boston
owner_country: US
publication_date: 20000317
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["RELATED APPLICATIONS","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS"],"p":["This application is a continuation-in-part application of U.S. patent application Ser. No. 09\/456,181, filed on Dec. 7, 1999, now abandoned the entire teachings of which are incorporated herein by this reference.","This application claims the benefit of U.S. Provisional Application No. 60\/128,828, filed Apr. 12, 1999 the entire teachings of which are incorporated herein by this reference.","Internet or network delivery of application-program-style functionality has become increasingly important. The ubiquitous client-server platform typically requires that the application program code be loaded and installed on the client computers. This requirement, however, is viewed as substantially increasing the installation and maintenance costs associated with computer networks. Moreover, many client operating system platforms are deemed unstable. Network delivery of applications programs would enable the code to be maintained only on the server-side, rather than distributed throughout the network.","Additionally, there are a number of different business models that are pulling for network delivery of application program functionality. First, it can be used in software sales. A web-based software-sales institution can utilize the Internet, or other public network, to allow customers to \u201ctest-drive\u201d the programs, and thereby increase sales. A second justification for deployment arises in the thin-client\/network-computer model where the code required for the application-functionality and user data reside on the server. In this situation, when required at the thin client, the application code is provided by the server on an as-needed basis. These servers can even be off-site in an application service provider (ASP) environment. Another justification surrounds the possibility to \u201crent\u201d programs to users. A large number of potential users may have only limited requirements for certain classes of application programs. Their individual requirements may not justify investment in the typically expensive programs or not justify the costs of client installation. The thought here is to enable these users to rent access to the application programs, preferably via the Internet, to generate new revenue streams for the application software companies.","One solution to providing application program functionality to the client computer via the network involves expanding the functionality of the browser. For example, the term \u201cplug-in\u201d is used to describe a browser code extension. ActiveX and Java are two of the most common code platforms for the browser.","While the solution to provide application program functionality via the browser is attractive in its simplicity, a number of problems exist under current technology. First, providing sophisticated ActiveX and\/or Java functionality is still in its infancy and largely untried. Further, it ignores the wealth of existing, stable application programs that have been written and are being written to run directly on operating systems, such as Windows 95\/98\/NT\/2000, Unix, Linux, and Mac OS's.","Related, but limited, solutions attempt to allow potential buyers, for example, to \u201ctest drive\u201d the program over the internet. Typically, one of two techniques have been used. First, the selling institution may allow the potential owner to download a trial-version of the program. This version may have reduced capabilities and\/or a limited lifetime, where the program is disabled after it has been invoked a set number of times, or after a specified date. This process, however, is complex, often requiring a multi-step process in which the user must accept the download, pick a save-as location, watch the download, quit the browser, find the file on the hard drive, and run an installer, for example. Another technique is to extend the potential purchaser's browser in some fashion using, for example, a Java applet. This approach, however, shares the problems discussed previously relative to ActiveX and Java.","Against this backdrop, most modern computer\/network operating systems allow for the execution of code that is stored remotely from the client computer. The systems allow a client computer to mount a physically remote drive, residing on a server or peer computer, and execute the application program residing there. Typically, however, these capabilities of the operating system are only utilized within an institution where an umbrella network management exercises control over both the clients and the servers to realize the necessary security levels, prevent corruption of data on the server side, and configure the client computers to access the server-stored code.","The present method and system are directed to a system and process for serving applications to a computer network from an application server system to a target computer. In the preferred embodiment, standard networking protocols are used. A helper application, however, is provided which allows these networking protocols to be used across internetworks to a server system, which is typically remote to the client computer.","In general, according to one aspect, the invention features a method for serving applications over a computer network from an application server system to a target computer. The method includes the target computer signaling the server system with a request for an application. The server system responds to the request by transferring an application descriptor to the target computer. The application descriptor is read by a helper application executing on the target computer. The helper application controls the target computer to execute the application, which resides on the server system.","In specific embodiments, the target computer signals the server system with the request for the application by user selection of the link, which is displayed by a browser and associated with the application. Preferably, the application link contains an application identifier that identifies the requested application to the server system and may further contain session I.D.'s and user I.D's along with subscribing institution identification. Typically, activating this application link, triggers the downloading of the application scriptor from the server system to the target computer. Preferably, the application descriptor is encrypted prior to transmission.","In the preferred embodiment, the helper application is invoked in response to receipt of the application descriptor on the target computer. Thereafter, transaction modes may be set and advertisements served to the target computer.","In general, according to another aspect, the invention can also be characterized in the context of an application serving system that operates across a computer network. The system comprises a target computer that requests an application. A server system is provided that responds to the request by transferring an application descriptor to the client computer. A helper process executing on the target computer reads this application descriptor and controls the target computer to execute the application, which resides on the application server system.","According to the typical model, the institution that wants to offer application-style functionality across the Internet must have the expertise in-house in order to enable this remote application serving. Companies that specialize in this type of remote application provision, typically have their own branding requirements, thus deluding the impact of allowing them to offer the functionality.","In general, according to one aspect, the present invention is directed to a method for serving applications to a target computer for a subscribing institution by a third party application hosting system. Under this model, the third party application hosting system is provided and typically sold, to the subscribing institution as a service. In this way, the subscribing institution does not have to internally provide the expertise to enable the remote application serving.","Specifically, the subscribing institution offers an application to the client computer and provides a hyper-text application link in association with the offer of the application. In response to activation of the application link, the application is downloaded to the target computer from the third party.","In the preferred embodiment, activating the application link triggers the downloading of an application descriptor from the third-party application hosting system to the target computer. Further, third-party application hosting system verifies that the subscribing institution is valid by reference to a customer database. Typically, the link contains an institution I.D.","Preferably, advertisements are displayed to the user. Preferably, these advertisements can be made in a+1 depth relationship to the application on the display of the target computer. These advertisements can either be served from the subscribing institution or the third party application serving system, or even another location.","In one embodiment, after termination of the application, a follow up display is provided on the user's browser. Typically, this follow up display is provided and hosted by the subscribing institution.","In general, according to another aspect, the invention can also be characterized as an application serving system. This system allows applications to be provided across a public computer network to a user of a subscribing institution by a third-party application hosting system. The system has an application institution server that serves a page containing an offer of an application to a target client computer of the user, and provides a hyper-text application link in association with the offer of the application. The server system, which is maintained by a third-party institution, with respect to the subscribing institution, responds to the activation of the application link to serve the application to the target computer.","Software players can be defined that will configure the client to communicate with remote storage assets across a network, automatically. The problem is, however, that security policies and institution firewalls may a priori block this remote access with these existing networking protocols. Thus, in many environments, they can not be used.","In general, according to one aspect, the present invention features a method for enabling remote networking functionality by port redirection. The method comprises executing a process requiring networking protocol and intercepting communications from the process to a port assigned to support the network protocol. The communications are then redirected over an open port.","In preferred embodiments, the step of executing the process comprises executing an application program on a remote storage asset using SMB networking protocols, with the communications being directed at port . This interception can be accomplished by addressing the communications to a local loop back.","To overcome even the most sophisticated firewall systems, the communications are preferably encapsulated an HTTP packet, and specifically a post data portion.","In general, according to another aspect, the invention can also be characterized in the context of a system for remote networking by port proxy. The system comprises an application program executing on a computer which is utilizing the SMB protocol to access a remote storage asset. A port proxy program intercepts communications from the program to a port assigned to support the SMB protocol and redirects the communications over an open port.","The above and other features of the invention including various novel details of construction and combinations of parts, and other advantages, will now be more particularly described with reference to the accompanying drawings and pointed out in the claims. It will be understood that the particular method and device embodying the invention are shown by way of illustration and not as a limitation of the invention. The principles and features of this invention may be employed in various and numerous embodiments without departing from the scope of the invention.",{"@attributes":{"id":"p-0038","num":"0037"},"figref":"FIG. 1","b":"100"},"Generally, the application serving system  comprises the user, target client computer  that connects to a server system  and subscribing institution host Web Server , over a network .","Client computer , Web server , and server system  implement a network protocol layer to communicate across the network. In a preferred embodiment, network  is the Internet, or other public or private network, and the network protocol layers are TCP\/IP and NetBios. Other network configurations and network protocols layers, however, could be implemented in place or in addition to those associated with the Internet such as those provided in other public or private networks and internetwork systems.","The target, client computer  is a PC computer in one implementation. It operates Microsoft Windows 95\/98\/NT\/2000\/CE operating system or other OS providing compatible API's (application programming interfaces), on an Intel processor\/IBM-compatible hardware platform. Other alternatives, however, are possible such as open source operating system platforms, such as Linux, or Apple MAC OS's or other operating systems that provide the API support for these operating systems. Still further alternatives include embedded OS platforms such as Windows CE and Palm OS's, or similar reduced code-footprint systems.","The target computer  preferably has preinstalled application programs. In the present implementation, a browser , such as the ubiquitous Netscape Navigator or Microsoft Explorer browsers, is installed. Additionally, the target computer also preferably has a helper application or software player . Such pre-installation can be performed typically at a website hosted by the institution that operates the server system  or also the subscribing institution .","Depending on the institution managing the target computer, a firewall  may be present between the target computer and the network .","The subscribing institution, which maintains the host web server , is typically a third party relative to the institution, which maintains the server system  in one anticipated business model. The subscribing institution has a requirement, or desires to provide, application programs and the related functionality to the user at the target computer , but, rather than providing this functionality itself, the subscribing institution outsources this to the institution operating the server system . Nonetheless, the subscribing institution typically has an Internet presence. Specifically, it typically maintains a website\/websites that offer the application programs to users.","From one implementation, the server system  is maintained by an institution that provides application programs to users as a paid service to subscribing institutions. Nonetheless, it should be appreciated that the technology of the present invention also has applicability to the business model where the server system  and host Web server  are maintained by the same institution. In this context, the institution does not wish to out-source the work associated with the serving of the applications, but wishes to provide this functionality through in-house expertise.","Specifically the service institution's server system  maintains a log-in database , a customer database , an application database , and a current sessions database . The server system additionally executes a session ID generator , a load balancing process , and an encryption process .",{"@attributes":{"id":"p-0047","num":"0046"},"figref":"FIG. 2","b":["110","112","110","210","134","110"]},"Selection of the link in step  causes the browser  to interrogate the target computer's operating system to determine whether the appropriate software player (SWP) has been installed on the target computer in step . This interrogation is performed in one embodiment by an application programming interface (API) call to check the operating system registry. Applets, ActiveX, or scripting, however, are other modalities for performing the interrogation.","If it is determined that the software player has not been installed on the target computer , an installation process is initiated in step . In the typical implementation, this installation process comprises either pointing the browser , or a new instantiation of the browser, with a new universal resource locator (URL), to website that supports the installation of the software player through a download, for example.","The install\/download is simplified for ease of operation. In one implementation, a Java applet is used that allows installation and writing to the drive\u2014if permission is provided. A download bar is displayed on the browser screen. When the player  has been installed, it begins to run and will launch the application that was initially requested by the user. As a result, the user at the client computer  observes the invocation of the application, rather than the software player alone.","Once there is an installed software player, the browser  is pointed with a URL to the server system , in step . The URL link contains: 1) a unique identifier, or number, associated by the server system  with the application requested (TitleId); 2) a unique session ID (SID); and 3) an identifier that identifies the subscribing institution (SubInstId). Typically, the subscribing institution is the company that operates the host Web server computer , which served the web page that originally contained the link associated with the application that was desired by the user of the target computer .","The SID is a unique session ID that is specific to the link and the specific session. A session ID that served as part of the original link provides a token from the web site that indicates that the subscribing institution has authenticated this specific session. This is important for the rental\/subscription model where they will be authenticating users with credit cards or user names and passwords.",{"@attributes":{"id":"p-0053","num":"0052"},"figref":"FIG. 3","b":["112","110","112","114"]},"Specifically, in step , the server system  receives the URL, SID, TitleId, and SubInstId. The server system then accesses the log-in database  to verify that: 1) the user at the target computer  is a valid user by reference to the session Id field (SID); and 2) the subscribing institution is a currently valid subscribing institution by reference to the SubInstId field in step . If either the user or subscribing institution is invalid (step ), an error is returned to the target computer  in the step  by the server system .","If the user and subscribing institution are verified, the server system  then proceeds to construct an application descriptor or data file that will coordinate the operation of the target computer  and the server system  across the network . In the present implementation, the application descriptor is a file that is named with a \u201c.WOW\u201d suffix, which is the MIME type.","Specifically, in step , the server system  accesses the customer database  using the SD to obtain information regarding the session.","Next, in step , the application database  is accessed. This contains information concerning the application, which was requested by the user. For example, the application database  contains information such as minimum system requirements (RAM, processing power, etc.) that are required by the application on the target computer  and the application's media weight or processing requirements on the server system  associated with each instantiation.","In step , the load balancing process  is executed. The server system  selects a host computer within the server system that will be primarily responsible for serving the application over the network  to the target computer . In the typical embodiment, the server system comprises multiple host Web and associated application servers. The selected host computer is co-located with the other host computers in one implementation; alternatively, components or servers of the server system are located in a server farm and\/or geographically local to the target computer . In this last case, the load balancing process selects the host computer based on geographic proximity, in addition to load, to reduce latency.","Typically, the load balancing checks the current session's database  to determine which host server in the server system  has the least load. The list of servers serving the specific application is part of the title's application description. Determination of which server to use is based on the number of concurrent connections to each server and the media weight of each application and also the user's physical geographic location based on the IP address.","Next, in step , the current sessions database  is updated in step  with the current session being added. Specifically, the session ID, the user's IP (internet protocol) address, the application title, the media weight, and the server assigned to the session is added. This database is used by the load balancing process , and by a watch-dog process that watches the connections to each host server in the server system, to verify that all connections are from authorized users.","In step , the application descriptor is encrypted. Minimally, this application descriptor comprises the host address of the host computer of the server system , which was assigned by the load balancing process  along with a session ID assigned as part of the update of the current session database . Finally, the application descriptor is sent to the target computer  in step .",{"@attributes":{"id":"p-0062","num":"0061"},"figref":"FIG. 4","b":"132"},"Upon receiving the .WOW application descriptor file, the client launches the software player  in step . This is a helper application that performs the bulk of the client-side application management.","In the preferred implementation, the receipt of the .WOW descriptor file automatically launches the software player. This is accomplished by configuration of MIME types during the software player's initial installation. In the Windows 95 operating system, MIME types are set in the registry, associating files with a specified suffix, here: WOW, that are to be opened with the software player .","Many of the methods used employ Windows API Functions to control the executed applications. In one embodiment of the invention, the Buddy API Xtra (a library of calls employed by programmers of Macromedia Director) is used to access Windows API functions. Specifically, the initial writing to the registry is done with the baWriteRegNumber and baWriteRegString commands in Buddy API.","In step , the registration status of the software player  with respect to the server system , or institution operating the system, is determined. If it has not been registered and\/or properly licensed, a registration box is displayed on the graphical user interface of the target computer  in step . The user is either requested or required to complete the registration information box, depending on the implementation. Once completed, the registration information is sent, in step , to the server system  over network .","After registration, the status of any firewall proxy for firewall  is interrogated in step . If it is not valid, a proxy information dialog box is displayed in step , and the user is requested to complete it on the target computer . Once completed, the proxy information is updated in step .","Next, the status of the application descriptor, or WOW file is interrogated in step . If no application descriptor file is detected, a dialog is generated in step , on the target computer  for the user. The user is requested to enter a partner or subscribing institution. If it is determined that no institution has been entered in step , the process aborts. However, if a subscribing institution was entered, the process similarly aborts in step , but also points the browser  to the Web page for the subscribing institution in step .","Next, in step , it is interrogated as to whether the client is monitoring a similar process, i.e., the software player  is currently running on the client. If it is not running, the SWP window is created in step . Depending on the run mode, the window is either hidden or visible on the client interface. In step , any system clean-up is performed. Generally, the operating system registry is written to when applications  are run. The software player tracks those modifications, and any registry changes; these changes are undone when the application  and software player  are quit. However, if the software player  was terminated unexpectedly during its last operation, the registry clean-up may not have been performed. If not, the clean-up occurs in this step. Specifically, any modified registry settings are returned, icons are removed, folders in any disk drive are removed, and any new copies of applications on the desktop are removed. Next, the player is set up on the OS tray. Finally the port proxy application is started in step  prior to the application launch process in step  in the preferred embodiment.","Generally, the port proxy application is required because the preferred embodiment of the present invention utilizes standard Microsoft Windows 95\/98\/NT\/2000 operating system networking protocol implementation of SMB (server message block), the functionality of which is blocked on may client computers. This standard protocol operates over port . However, since it is a sharing protocol, it is deemed dangerous or non-secure, and communications through this port are blocked by many commercial, government, and\/or corporate firewalls.","The use of the port proxy is not limited only systems using the SMB protocol, but is deployable in any environment where the port and or network communications protocol used by the player is blocked, or possibly blocked, on the client computer. Generally, the port proxy enables a protocol to be redirected to another port such as HTTP or web ports.","If it was determined that the SWP is currently monitoring a process and thus invoked, in step , the status of the target computer operating system is interrogated in step . If too many applications are currently running, a dialog is generated notifying the user in step  and the process aborts in step . However, if there is sufficient resources to run the application, the new launch application process is started in step .",{"@attributes":{"id":"p-0073","num":"0072"},"figref":"FIGS. 5A and 5B"},"Specifically, the software player  reads and decrypts the incoming application descriptor WOW file in step . To read in the encrypted data, the program uses the baCommandArgs command in the Buddy API. The decryption of the commands is done via the baDecryptText command in the Buddy API.","Once decrypted, the software player  checks to see if this is the first time it has been run on the client computer  by checking the computer's internal settings to see if a unique ID has been written to the settings. This is done via the baReadRegString command in Buddy API. If it finds the unique ID, it continues. If it does not find a unique ID, it asks the user for personal information that will be collected for a User Database, in one exemplary implementation.","It then creates a WOW data struct also in step . The version of the application descriptor is then compared to the version of the software player  in step  to ensure compatibility. If there is no compatibility, a dialog is displayed in step  asking the user if they wish to upgrade to a new software player. If the user agrees to upgrade, the new dynamic link libraries (.DLL files) are downloaded from the server system  in step . The software player unloads the current dynamic link libraries and updates the DLL's in step .","In contrast, if the user chooses not to install the new software player in step , the process aborts in step , while simultaneously pointing the browser  with an upgrade URL to a site hosted by the server system  or hosted by another server in step .","If the process is not aborted, in step , the application requirements contained in the application description are compared to the target computer's configuration in step . If there are inadequate resources, the process aborts in step . Additionally, the browser  is pointed toward a web page hosted by the server system providing for maintenance. Specifically, the maintenance URL is passed to the browser in step . For example, a minimum or maximum screen depth, resolution, RAM requirements, processor requirements, sound board requirements, and video board requirements are assessed. These checks are supported by the following commands in Buddy API: baVersion(\u201cos\u201d), baVersion(\u201cqt\u201d), baVersion (\u201cqt3\u201d), baScreenInfo(\u201cheight\u201d), baScreenInfo(\u201cwidth\u201d) and baScreenInfo(\u201cdepth\u201d).","If the user system's resources are determined to be adequate in step , a message is sent from the target client computer  to the server system over the network  in step . The message contains the session ID, which was just received from the server system in the application descriptor file. Also, a start request message is sent to the server system. The receipt of the session ID identifies the session and implicitly notifies the server system  that the target computer has successfully decrypted the application descriptor file, which had been previously sent. The start request indicates that the target client computer is now ready to begin to execute the requested application.","Also, the software player  preferably determines, via the application descriptor, the transaction mode being used. This will impact the appearance of the player  on the screen or GUI of the computer . For example, if the application descriptor identifies itself as an advertisement-based transaction (noted as an \u201ca\u201d in the Application Descriptor), then the software player  will respond by positioning itself at the top level of the screen depth and begin to request advertisements from an advertisement server, within the server system , over the network . Conversely, if the application descriptor identifies itself as a subscription-based (noted as an \u201cs\u201d in the application descriptor), the software player  will hide itself, but continue to execute in the background. To hide itself the program uses the baWindowState command in Buddy API. The ads are obtained through hypertext transfer protocol (http) calls.","In step , the target client computer  then waits for a start request acknowledgment from the server system . If no acknowledgment is received after a predetermined time period, a dialog is displayed on the target client computer  to notify the user that the server system is currently unavailable in step .","If the start request is acknowledged in step  by the server system , a proxy socket is opened in the target computer  and the application server address is passed to the proxy in step .","Continuing onto  in step , the software player  determines if any files are required from the server system  to continue the launch process. If additional files are required, they can be obtained by initiating a remote drive mounting process in step . Alternatively, the files can be obtained using a local file installation and replace process in step . Additionally, both processes could be used if multiple files are required.","Certain applications require specific files at specific locations. For example, certain anti-virus programs require virus definitions to exist at specific path. Such hard coded path requirements are addressed in this initial configurations check. A file check is performed and any required files are shipped to the client computer before the application is launched.","With the remote drive mounting and possibly local file installation\/replace, the target client computer  now has access to the files and specifically the code required to invoke the selected application. Next, in step , the directory is set to the local or remote drive and the run command is issued to the host server. In one embodiment, this occurs on port , the SMB port, from the perspective of the application, but is actually sent through port  by the proxy application. Specifically, standard Windows NT remote networking methods are used to attach to the server's directory using the Net Use command, which is part of the Windows Networking.","If the client computer is running the Windows 95-version operating system, there is an additional step taken here. Since Windows 95 computers need to have the name of the server they are attaching to in a file in the Windows directory called LMHOST; the software player  writes the name of the server to the LMHOST file using the FileI\/O command in Macromedia Director.","The software player  then waits for the application window and the update of the stream display in step . The window status is acquired by reference to the operating system application programming interface. In the preferred embodiment, where it is operating on a Windows OS platform, the window status is obtained via the WIN API in step . The stream data size is obtained from the proxy application in step .","In step , it is interrogated as to whether or not the application window has opened. Until the window opens, the host server in the server system  is periodically pinged. The window timeout is reset as many as three times and as long as the server is responsive to the ping in step . If there is no server response to the ping as determined in step , the user is notified via the dialog in step  and the program aborts in step .","If, however, the window opens as determined in step , the user interface elements are activated that are specific to the application in step . The size and position of the software player and application windows are then set in step . At this stage, with the application running on the operating system of the target client computer , the process proceeds to an application monitoring in step .","In the preferred embodiment, there are six processes that are performed to monitor the application. Application window monitoring, tracking pulse monitoring, advertising updating, net traffic monitoring, count-down timing, and user event handling.",{"@attributes":{"id":"p-0091","num":"0090"},"figref":"FIG. 6A"},"Specifically, while the selected application is executing, the client computer multitasks to also monitor the operation of the application. One of the processes is the application window monitor process . Specifically, the application window monitor process  periodically makes API calls to determine whether or not the application's window is still open in step . If the window is open, it continues to maintain and\/or set the position and layer of the windows of the application  and the software player  with respect to each other in step  according to the transaction mode. However, if the application window monitor process  determines that the application window has closed, the software player  begins the execution of a shutdown process .","The tracking pulse process  periodically sends a pulse or a ping to the host server of the server system  in step . If it is determined that no pulse has been received in step , the target client computer  pings the host server of the server system in step . Based on the status of the ping, if it is determined that there is no connection to the server, a dialog is generated in step  and there is a forced shutdown of the application process in step , and again, the shutdown process is activated . If the ping is successfully sent to the server, but no response is received, a dialog is generated in step . Again, a \u201cno response\u201d dialog is generated in step  and the shut down process is activated in step .","In other implementations, tracking is not provided by sending pulses; instead, the application server monitors socket connections to determine if connections are still active. From the client side, instead of the server telling the client to shut down, the client gets its \u201ctotal time to run\u201d as part of the .wow file and begins counting down\u2014and eventually shuts down\u2014once it hits zero time.","In contrast, if it is determined that the pulse is received in step , the message is analyzed. If it is determined that the message is to turn off the application in step , the application process is terminated in step  and the shut down process is activated, step .","If the message returned that the application must be terminated within n minutes, a dialog is generated in step , notifying the user of the remaining minutes of access to the application. A countdown timer is started in step . Finally, if the message returned is an all clear or o.k. message in step , process returns.",{"@attributes":{"id":"p-0097","num":"0096"},"figref":"FIG. 6B"},"Specifically, the ad update process periodically updates the ads displayed on the software player and any URL's required for the ad server in step . It then returns to the run mode of the ad process in step .","If the transaction mode is advertisement-based, the software player will maintain a+1 depth relationship with the application's window. This means that if the application  is brought to the front, the software player  will place itself in front of the application  so the application cannot hide the advertisements being served. If a different application or window, i.e., one not being hosted by the server system , is brought to the front, the software player  will not obscure the application or window. It will maintain its +1 depth relation to the application . This is accomplished via the baWindowDepth command in Buddy API. Also, the player is monitored so that it is not moved off the screen.","Step  monitors network activity and notifies the net traffic monitoring process in step . This allows the application monitor to determine if there are any problems associated with high traffic, which would impact the operation of the application.","In step , the display countdown timer is updated. This countdown timer notifies the user as to the time remaining in which the application is available. This is most relevant where the user has, for example, \u201crented\u201d the application for a fixed period of time as indicated by the transaction mode. The countdown timer updates the countdown timer process  so that a shut down process is automatically activated when the timer has timed-out.",{"@attributes":{"id":"p-0102","num":"0101"},"figref":"FIG. 6C","b":["652","654","112","132"]},"Currently, the bookmarking feature is termed\u201cQuick Launch\u201d\u2014instead of adding it to the start menu folder system, it gets book-marked as part of a screen in the player\u2014the one that comes up if you click on Quick Launch. It remembers the location from where you initially clicked, thus guaranteeing the web site that they will still get ad revenue and a follow-up page each time the user clicks on the Quick Launch bookmark.","If the help button is selected in step , a help file is displayed. The browser  is pointed to a URL of a help file server in step . If the third party home is selected in step , the browser is pointed to the URL or a specified URL of the subscribing institution in step . If the home button is selected in step , the browser  is pointed to the home page of the third-party application hosting system in step . If the ad, which is displayed by the player, is selected in step , the browser is pointed to the URL of the advertising company in step . Finally, if the quit button is selected in step , the application is forced to terminate in step  and the shutdown process is started in step .",{"@attributes":{"id":"p-0105","num":"0104"},"figref":"FIG. 7","b":["133","710","110","112","712","135","714","132"]},"Finally, in the preferred embodiment, a follow-up URL is sent to the browser  in step . In the preferred embodiment, this follow-up URL is for the subscribing institution and is typically hosted by the web server , allowing it to follow with a \u201csales pitch\u201d or to solicit for further purchase of goods and\/or services. This allows, in some implementations, the third-party application hosting to be transparent to the user at the target computer. Finally, any remaining monitoring processes are identified in step , and the monitoring processes are terminated in step .","Finally, in step , the proxy application is quit and the software player is shut down in step .",{"@attributes":{"id":"p-0108","num":"0107"},"figref":"FIG. 8","b":"132"},"According to the preferred embodiment, when the application , through the software player, makes request to server system , the request is directed to port  as a standard SMB communication by the application. This SMB communication is intercepted by the SMB proxy of the software player . The request is redirected, by the proxy, through port , which is the http, or web port or some other open port such as the FTP port.","The SMB protocol has been in use on corporate LAN's (local area networks) for nearly twenty years. In that time, it has become a popular vehicle for enabling simple networking. It is at the heart of Microsoft Networking and also in IBM's OS\/2. For historical, practical, and security reasons, it has remained a LAN based, however .","Microsoft networking utilizes the SMB protocol to communicate between PC clients and servers to provide file sharing, print sharing, and basic network authentication. Most commonly this is wrapped in the NetBIOS protocol to enable plug and play networking for small, medium and large LANs. The NetBIOS protocol provides for auto-discovery of networks, machine addressing abstraction, and decentralized management of networks.","For ease of use reasons, NetBIOS has grown to be a common standard on corporate LAN's. However, this also presents a significant security risk. A hacker who has broken into or is seeking to break into a corporation's LAN can either wait and \u201csniff\u201d to find addresses of machines on the LAN, or a smart hacker can broadcast spurious NetBIOS packets and discover the formation of the LAN automatically.","In addition, early implementations of SMB transmitted usernames and passwords without encryption or other security across the LAN. This has since, however, been discovered and patched.","As a result of these two situations, most corporations block traffic to and from the Internet which uses the NetBIOS protocol. This is typically accomplished at the firewall because the frames identify the port from which they originated. The firewall stops frames based upon their port origination.","According to request for comments (RFC) 1001\/1002, TCP and UDP ports ,  and  are used for enabling a NetBIOS-based service. Microsoft Networking is such a service, wrapping the SMB protocol with NetBIOS for name resolution and other services. Therefore, all Microsoft Networks behind firewalls or proxies most commonly block these ports to guard their LANs from intrusion. In addition, many ISP's today block this traffic as well, to protect their user's from malicious Internet hackers.","In addition, most corporations have by default blocked all traffic to and from the Internet with only minor exceptions like HTTP, FTP, SMTP and POP3, protocols, which have become a staple in job performance. Therefore, it can be expected that to guarantee provision of any service across corporate firewalls, the use of HTTP as a carrier is the only choice. Though there are many other options, such as SOCKS proxies, or HTTP tunneling, use of standard HTTP over port  is preferred.","The proxy of the software player  listens for requests for port . These are transferred using address 27.0.0.1, which is the address for a loopback. The client computer  then monitors this local-loopback address.","Generally, there are three levels of firewalls. Minimally, most firewalls do not route anything from port . As a result, if the transmissions are sent through port , they can pass through this type of firewall. Even in more secure firewalls, port  is typically open. In the most secure type, the firewall blocks port , but proxies communications on this port. To handle this last configuration, the SMB communication is preferably encapsulated within an http packet, HTTP(SMB packet).","As a result, an http header is added, which comprises a request line followed by a post form-data tag. These types of headers are used when data from a form is typically sent to a script process. For the http post to be performed correctly, the content length, content type, and MIME type are also set.","At the other end of the network, a web server  of the server system  listens on the corresponding port for the communications. It received the http packet with the post data commands. It strips off the packet's header and then sends the post data to the application server as SMB packets. Thus, the SMB proxy allows to the application  to execute as if it were mounting a standard Window NT server using the SMB protocol. Communications, however, are actually occurring over port  of the client computer .","More specifically, the web server  receives and maintains the connection with the client computer over the network. Incoming upload HTTP communications are received and the post data stripped out. These data are then transferred to the application server  as SMB protocol communications. The download path is handled by the inverse process where the application server sends SMB packets to the web server, which encapsulates the packets into the post data section of an HTTP packet. The HTTP packet header is then established, and the packet is transmitted to port  of the client over the intervening networks.","Alternatively, the proxy application on the client can be rerouted through port  (FTP) with the server returning on port , also reserved for FTP transfer, in another embodiment, if those ports are open.","If the web server  is not used, the use of the SMB proxy and port  communications requires that the operating system of the host application server in the server system be non-standard. In the one implementation, the server code has been recompiled to support SMB communications over port  instead of port . This necessitates the use of open source operating systems that implement Standard Microsoft Windows 95\/98\/NT\/2000 protocols.",{"@attributes":{"id":"p-0124","num":"0123"},"figref":"FIG. 9"},"Client  computer will request a file from a server by making a request in the form of \\\\COMPUTERNAME\\SHARENAME. The COMPUTERNAME is a  character mnemonic for some machine in the user's network. The client PC will then try to resolve the COMPUTERNAME into a MAC address\/IP address for the destination computer. This is done through a series of measures. First, the client will check its name cache for a pre-existing entry. Then it will try to resolve the name via broadcast to the network for any machine responding to this name or response from a machine which has already resolved this name. As a last fallback, the computer will check a special file, the LMHOSTS file, for a hard coded address.","This process generates a small amount of LAN traffic, which if the remote computer is not on the local LAN, will most likely be blocked by the firewall. This traffic constitutes the requests on ports  and  TCP and UDP. In the present embodiment, the software player  uses the LMHOSTS file to preload the name cache of client computer to avoid the network requests for name resolution in step .","The next phase is called NetBIOS Session Setup in step . During this phase the PC client will establish a connection to the remote computer, COMPUTERNAME, using the default, pre-assigned port, . In the case of Microsoft Networking, SMB is then used to establish a connection to SHARENAME and gain the files requested.","The NetBIOS Session Setup request is retargeted. This means that a valid response to a NetBIOS Session Setup is the IP address and port of a different machine which serves the information sought by the client computer . Using a small program, an entry is made into the LMHOSTS file designating the local loopback interface, 127.0.0.1, be given the NetBIOS name SWOWREDIR, in step . All requests then to \\\\SWOWREDIR\\SHARENAME are redirected on the fly to the machine designated by the software player . Also, the request can be retargeted to use the FTP control port, . This enables further penetration of many corporate firewalls.","The NetBIOS session is preferably proxied as described. Specifically, the port proxy of the player  listens again to the loopback interface under the name SWOWPROXY in step . Then any request to \\\\SWOWPROXY\\SHARENAME are relayed to address of the server system  over port  in step .","First, however, the NetBIOS session is preferably wrapped in HTTP in step . The port proxy, rather than simply relaying packets, queues up a request until a predetermined point is reached. The current accumulated data are then sent to the server system in the form of an HTTP POST transaction.","In this final case, NetBIOS and SMB packets are not simply relayed. The port proxy of the player  assembles the SMB packets into requests. The proxy will queue up a request until it is complete, then forward it in its entirety to the other end of the HTTP connection, a server side HTTP proxy.","In the case of the client, the proxy will read the first four bytes of an SMB request. This determines the number of bytes which are to follow and the actual SMB\/NetBIOS command. Each request is then read to completion and then transmitted using the HTTP protocol to the server side proxy. The format of this transmission follows an HTTP POST transaction as this example shows:","Outgoing SMB request:","0x850x000x000x00 (SMB Keep Alive)","Proxy intercepts and resends as:","POST\/cgi-bin\/send.cgi?123456789012 HTTP\/1.0","User-Agent: Mozilla\/4.0 (compatible; SoftwareWow; 1.0)","Accept: *\/*","Accept-Encoding: gzip","Accept-Language: en-us","Pragma: no-cache","Host: www.softwarewow.net:80","Content-type: multipart\/form-data; boundary=---------------------------YYYYMMDDHHMISS","Content-length: 201","-----------------------------YYYYMMDDHHMISS","Content-Disposition: form-data; name=\u201c\u201ccommand\u201d\u201d; filename=\u201d\u201d","Content-Type: application\/octet-stream 0x850x000x000x00","-----------------------------YYYYMMDDHHMISS","In this above case, the code 1234567889012 represents a unique session identifier used by the server side proxy to track the HTTP connections between requests. The actual URL is irrelevant, but is used to detract hackers from prodding at the server. If a request is made for an alternate URL, a 404 Not Found response is sent by the server side proxy. The next 6 lines of HTTP are used solely to adhere to HTTP standards, without these lines many proxy servers will ignore the request, deeming our proxy not to be a valid web browser.","The next two lines, Content-type and Content-length identify that what is to follow is a series of MIME encoding postings that the web server will know how to deal with. The Content-length is vital, without it most proxies will delay the request, not knowing when it has ended. Additionally, YYYYMMDDHHMISS represents a time stamp used to simply increment and vary the boundary stamp used in the MIME encoding as per RFC requirements.","If the target computer  is behind an HTTP proxy\/firewall, the first line will be rewritten as follows instead to accommodate the requirements of the HTTP proxy:","POST http:\/\/www.softwarewow.net\/cgi-bin\/send.cgi?123456789012 HTTP\/1.0","The server side proxy on the web server  will parse this input and strip out the SMB Keep Alive packet, and transfer it to the SMB server  in step . Once a full packet is received from the SMB server in step , the HTTP server side proxy will transmit the response as follows:","HTTP\/1.0 200 OK","Date: Mon, 13 Mar. 2000 20:50:15 GMT","Server: SoftwareWow 1.0","Connection: close","Content-type: application\/octet-stream","Content-length: 4","0x850 0x00 0x00 0x00","This response identifies a return of an SMB Keep Alive to the client PC. The server must respond in the first line with a valid response code,  represents a valid transaction. Then the server will respond with MIME identification of the type and size of response. On the response, no MIME boundaries are required if the server is solely sending back one packet of type application\/octet-stream, which identifies a binary object is being returned. The client SMB proxy will then parse the number of bytes specified in the Content-length header and return these to the true SMB client, closing its connection to the HTTP proxy server.","As HTTP connections are stateless and incur a full TCP setup time to establish, it is an often used practice to utilize an HTTP\/1.1 feature called HTTP Keep Alive. As a further enhancement to the above protocol, the SMB proxy could maintain its connection with the HTTP proxy and send multiple requests down the socket. This practice is covered in the HTTP\/1.1 RFC.","While this invention has been particularly shown and described with references to preferred embodiments thereof, it will be understood by those skilled in the art that various changes in form and details may be made therein without departing from the scope of the invention encompassed by the appended claims."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["In the accompanying drawings, reference characters refer to the same parts throughout the different views. The drawings are not necessarily to scale; emphasis has instead been placed upon illustrating the principles of the invention. Of the drawings:",{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIGS. 5A and 5B"},{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIGS. 6A-6C"},{"@attributes":{"id":"p-0035","num":"0034"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0037","num":"0036"},"figref":"FIG. 9"}]},"DETDESC":[{},{}]}
