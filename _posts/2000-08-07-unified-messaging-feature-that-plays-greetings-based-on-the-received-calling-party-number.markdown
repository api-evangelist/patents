---
title: Unified messaging feature that plays greetings based on the received calling party number
abstract: A messaging system is provided for playing a messaging prompt in response to a request for execution of a messaging operation. The request contains calling party number information. The messaging system includes an application runtime environment configured for retrieving for playback as the messaging prompt, a personalized voice message based on a match of the received calling party number information with calling party number information stored in an Internet Protocol (IP) based database server. The personalized voice message corresponds to the matched, stored calling number information of the calling party. Hence, a subscriber can record personalized greeting for preferred callers such that when a preferred caller reaches the subscriber's voice mail, the personalized greeting for that caller is played. If the caller is not a preferred caller, a generic greeting is played.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07822815&OS=07822815&RS=07822815
owner: Cisco Technology, Inc.
number: 07822815
owner_city: San Jose
owner_country: US
publication_date: 20000807
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","BEST MODE FOR CARRYING OUT THE INVENTION"],"p":["1. Field of the Invention","The present invention relates to voice messaging systems and more particularly to enabling a subscriber to record a personalized voice message to be played as a messaging prompt for a specific calling party when the calling party reaches the subscriber's voice mail.","2. Description of Related Art","The evolution of the public switched telephone network has resulted in a variety of voice applications and services that can be provided to individual subscribers and business subscribers. Such services include voice messaging systems that enable landline or wireless subscribers to record, playback, and forward voice mail messages. However, the ability to provide enhanced services to subscribers of the public switched telephone network is directly affected by the limitations of the public switched telephone network. In particular, the public switched telephone network operates according to a protocol that is specifically designed for the transport of voice signals; hence any modifications necessary to provide enhanced services can only be done by switch vendors that have sufficient know-how of the existing public switched telephone network infrastructure.","An open standards-based Internet protocol (IP) network, such as the World Wide Web, the Internet, or a corporate intranet, provides client-server type application services for clients by enabling the clients to request application services from remote servers using standardized protocols, for example hypertext transport protocol (HTTP). The web server application environment can include web server software, such as Apache, implemented on a computer system attached to the IP network. Web-based applications are composed of HTML pages, logic, and database functions. In addition, the web server may provide logging and monitoring capabilities.","In contrast to the public switched telephone network, the open standards-based IP network has enabled the proliferation of web based applications written by web application developers using ever increasing web development tools. Hence, the ever increasing popularity of web applications and web development tools provides substantial resources for application developers to develop robust web applications in a relatively short time and an economical manner. However, one important distinction between telephony-based applications and web-based applications is that telephony-based applications are state aware, whereas web-based applications are stateless.","In particular, telephony applications are state aware to ensure that prescribed operations between the telephony application servers and the user telephony devices occur in a prescribed sequence. For example, operations such as call processing operations, voicemail operations, call forwarding, etc., require that specific actions occur in a specific sequence to enable the multiple components of the public switched telephone network to complete the prescribed operations.","The web-based applications running in the IP network, however, are state-less and transient in nature, and do not maintain application state because application state requires an interactive communication between the browser and back-end database servers accessed by the browsers via a HTTP-based web server. However, an HTTP server provides asynchronous execution of HTML applications, where the web applications in response to reception of a specific request in the form of a URL from a client, instantiate a program configured for execution of the specific request, send an HTML web page back to the client, and terminate the program instance that executed the specific request. Storage of application state information in the form of a \u201ccookie\u201d is not practical because some users prefer not to enable cookies on their browser, and because the passing of a large amount of state information as would normally be required for voice-type applications between the browser and the web application would substantially reduce the bandwidth available for the client.","Commonly-assigned, copending application Ser. No. 09\/480,485, filed Jan. 11, 2000, entitled Application Server Configured for Dynamically Generating Web Pages for Voice Enabled Web Applications, the disclosure of which is incorporated in its entirety herein by reference, discloses an application server that executes a voice-enabled web application by runtime execution of extensible markup language (XML) documents that define the voice-enabled web application to be executed. The application server includes a runtime environment that establishes an efficient, high-speed connection to a web server. The application server, in response to receiving a user request from a user, accesses a selected XML page that defines at least a part of the voice application to be executed for the user. The XML page may describe any one of a user interface such as dynamic generation of a menu of options or a prompt for a password, an application logic operation, or a function capability such as generating a function call to an external resource. The application server then parses the XML page, and executes the operation described by the XML page, for example dynamically generating an HTML page having voice application control content, or fetching another XML page to continue application processing. In addition, the application server may access an XML page that stores application state information, enabling the application server to be state-aware relative to the user interaction. Hence, the XML page, which can be written using a conventional editor or word processor, defines the application to be executed by the application server within the runtime environment, enabling voice enabled web applications to be generated and executed without the necessity of programming language environments.","Hence, web programmers can write voice-enabled web applications, using the teachings of the above-incorporated application Ser. No. 09\/480,485, by writing XML pages that specify respective voice application operations to be performed. The XML documents have a distinct feature of having tags that allow a web browser (or other software) to identify information as being a specific kind or type of information. Hence, the XML documents define the application to be executed by the application server within the runtime environment, enabling voice enabled web applications to be generated and executed without the necessity of programming language environments.","One of the major disadvantages of typical telephony voice messaging is that it is impersonal by nature since every caller hears the same generic subscriber greeting. Currently, if a subscriber records a personalized greeting intended for a specific caller, anyone calling the subscriber will receive the personalized greeting. Hence, subscribers are limited to recording generic greetings for incoming calls.","There is a need for a voice messaging system that enables a subscriber to customize greetings and store the greetings in an open protocol directory to correspond with the identity of the calling party, such that when the calling party reaches the subscriber's voice mail, a personalized greeting is played as a messaging prompt.","These and other needs are attained by the present invention, where a messaging system is provided for playing a messaging prompt in response to a request for execution of a messaging operation. The request contains calling party number information. The messaging system includes an application runtime environment configured for retrieving for playback as the messaging prompt, a personalized voice message based on a match of the received calling party number information with calling party number information stored in an Internet Protocol (IP) based database server. The personalized voice message is stored in an IP based database server and corresponds to the matched, stored calling number information of the calling party.","One aspect of the present invention provides a method for playing a messaging prompt. The method includes receiving a request for execution of a prescribed messaging application operation. The request contains calling party number information. Stored calling party number information is accessed from an Internet Protocol (IP) based database server configured for storing calling party number information. The received calling party number information is compared to the stored calling party number to determine if there is a match between the received calling party information and the stored calling party information. Based on a determined match, a personalized voice message corresponding to the matched, stored calling party number information is retrieved for playback as the messaging prompt.","Hence, a subscriber can record personalized greetings for preferred callers such that when a preferred caller reaches the subscriber's voice mail, the personalized greeting for that caller is played. If the caller is not a preferred caller, a generic greeting is played.","Additional advantages and novel features of the invention will be set forth in part in the description which follows and in part will become apparent to those skilled in the art upon examination of the following or may be learned by practice of the invention. The advantages of the present invention may be realized and attained by means of instrumentalities and combinations particularly pointed out in the appended claims.",{"@attributes":{"id":"p-0024","num":"0023"},"figref":["FIG. 1","FIG. 3"],"b":["42","42","64","44","42","44","50","42","56"],"i":["a ","b","a ","b "]},"As shown in , each of the clients (tiny clients, skinny clients, thin clients and fat clients) are able to communicate via a single, unified architecture  that enables voice communications services between different clients, regardless of whether the client actually has browser capabilities. Hence, the fat client and the thin client are able to execute voice enabled web applications without any hardware modification or any modification to the actual browser; rather, the browsers  in the clients and merely are provided with an executable voice resource configured for providing browser audio control, described below.","The user devices , , and , illustrated as a cordless telephone , a fax machine having an attached telephone, and an analog telephone , are referred to herein as \u201cskinny clients\u201d, defined as devices that are able to interface with a user to provide voice and\/or data services (e.g., via a modem) but cannot perform any control of the associated access subnetwork.","The wireless user devices , , and , illustrated as a cellular telephone (e.g., AMPS, TDMA, or CDMA) , a handheld computing device (e.g., a 3-Com Palm Computing or Windows CE-based handheld device) , and a pager , are referred to as tiny clients. \u201cTiny clients\u201d are distinguishable from skinny clients in that the tiny clients tend to have even less functionality in providing input and output interaction with a user, rely exclusively on the executable application in an access subnetwork to initiate communications; in addition, tiny clients may not be able to send or receive audio signals such as voice signals at all.","Hence, the skinny clients , , and and the tiny clients , , and access the unified voice messaging services in the unified network  via a proxy browser , configured for providing an IP and HTTP interface for the skinny clients and the tiny clients. In particular, browsers operate by interpreting tags within a web page supplied via an HTTP connection, and presenting to a user media content information (e.g., text, graphics, streaming video, sound, etc.) based on the browser capabilities; if a browser is unable to interpret a tag, for example because the browser does not have the appropriate executable plug-in resource, then the browser typically will ignore the unknown tag. Hence, the proxy browser  can provide to each of the skinny clients and tiny clients the appropriate media content based on the capabilities of the corresponding client, such that the cordless telephone and telephone would receive analog audio signals played by the proxy browser  and no text information (unless a display is available); the fax machine and pager would only receive data\/text information, and the cellular telephone and the handheld computing device would receive both voice and data information. Hence, the proxy browser  interfaces between the IP network and the respective local access devices for the skinny clients and the tiny clients to provide access to the unified messaging network .","The proxy browser  and the web browsers  within the fat client and the thin client execute voice enabled web applications by sending data and requests to a web server , and receiving hypertext markup language (HTML) web pages from the web server , according to hypertext transport protocol (HTTP). The web server  serves as an interface between the browsers and an application server  that provides an executable runtime environment for XML voice applications . For example, the web server  may access the application server  across a common gateway interface (CGI) as illustrated in , by issuing a function call across an application programming interface (API), or by requesting a published XML document or an audio file requested by one of the browsers  or . The application server , in response to receiving request from the web server , may either supply the requested information in the form of an HTML page having XML tags for audio control by a voice resource within the browser, or may perform processing and return a calculated value to enable the browser  or  to perform additional processing.","The application server  accesses selected stored XML application pages  (i.e., XML pages that define an application) and in response generate new HTML pages having XML tags during runtime and supply the generated HTML pages having XML tags to the web server . Since multiple transactions may need to occur between the browser  or  and the application server , the application server  is configured for storing for each existing user session a data record, referred to as a \u201cbrownie\u201d, that identifies the state of the existing user session; hence, the application server  can instantiate a procedure, return the necessary data, and terminate the procedure without the necessity of maintaining the instance running throughout the entire user session.","Hence, the application server  executes voice application operations from a stored XML document based on a transient application state, where the application server  terminates the application instance after outputting the generated XML media information to the browser  or .",{"@attributes":{"id":"p-0032","num":"0031"},"figref":["FIG. 2","FIG. 1"],"b":["66","66","64","42","62","18","66","68","66","68"]},"The voice application server  is configured for accessing service application programming interfaces (API's)  to external resources based on prescribed procedures that may be called during parsing of an XML tags in a selected XML document . As described below, the application server  issues function calls to an API  for accessing the external resources for prescribed operations, enabling the deployment of a robust, scalable unified messaging system having messaging operations distributed across multiple platforms. In particular, the application server  accesses calling number information from an IP-based database server  according to LDAP protocol. As described below, the application server  is configured for storing and retrieving voice messages in the LDAP server  or alternatively in an IMAP messaging server .",{"@attributes":{"id":"p-0034","num":"0033"},"figref":["FIG. 3","FIG. 3"],"b":["66","66","66","94","68","72","92","66","96","66","64"]},"The application server  also includes a runtime environment  for execution of the parsed XML documents. As described above, the runtime environment  may selectively execute any one of user interface operation , a logic operation , or a procedure call  as specified by the parsed XML document by executing a corresponding set of executable functions based on the rule set for the corresponding operation. In particular, the application runtime environment  includes a tag implementation module  that implements the XML tags parsed by the XML parser . The tag implementation module  performs relatively low-level operations, for example dynamically generating an XML menu page using executable functions specified by a menu rule set in response to detecting a menu tag, performing a logical operation using executable functions specified by a logic rule set in response to a decision tag, or fetching an audio (.wav) file in response to detecting a sound tag. Hence, the tag implementation module  implements the tag operations that are specified within the XML framework of the stored XML documents.","The application server  also includes a set of libraries  that may be implemented as dynamically linked libraries (DLLs) or application programming interface (API) libraries. The libraries  enable the runtime environment  to implement the procedures  as specified by the appropriate XML document. For example, the application server  may issue a function call to one of a plurality of IP protocol compliant remote resources , or  according to LDAP protocol or IMAP Protocol, respectively, described below. For example, the PHP hypertext processor includes executable routines capable of accessing the IMAP or LDAP services. Note that the mechanisms for accessing the services , or  should be established within the application server before use of XML documents that reference those services. Once the services  or  are established, the application runtime environment  can perform a function operation by using executable functions specified by a function call rule set.","The arrangement for playing a personalized messaging prompt for a caller based on calling number information will now be described as employed in a unified messaging application.",{"@attributes":{"id":"p-0038","num":"0037"},"figref":["FIG. 4","FIG. 4"],"b":"66"},{"@attributes":{"id":"p-0039","num":"0038"},"figref":["FIG. 4","FIG. 4"],"b":["66","66","200","62","200","66","62","62"]},"The application server  responds to the HTTP request in step  by accessing a selected XML document  from the document database  based on the command specified in the HTTP request.","The application server  then parses the selected XML document , which specifies a function call to the LDAP directory . In particular, the application server  accesses in step  the subscriber profile in the subscriber's directory in LDAP based on the DNIS.  shows the LDAP directory storage structure which includes a greeting folder containing a generic greeting and the ANI listing together with the personalized greeting and flag, the function of which will be explained below. Thus, in step  the LDAP directory  is accessed so as to compare in step  the ANI with ANIs stored in the LDAP directory . As shown in , a personalized greeting , pre-recorded by the subscriber or called party corresponding to one or more ANIs, is also stored in the LDAP directory  or alternatively in the IMAP directory . For example, if a subscriber's friend is expected to call from calling number 408-555-555, the subscriber can correspond this number to a message such as, \u201cHello Joe, I just left. Meet me at the golf course\u201d. More than one calling number or portion thereof (e.g. area code) may correspond with a personalized voice message. For example, all calls from area code  can correspond to the same voice message.","With reference to , step  determines if there is a match between the received ANI and the ANIs stored in the LDAP directory . If there is no match, the application server  in step  generates an HTML document with XML tags specifying playing a generic message  previously recorded by the subscriber. If there is a match, the application server  in step  generates an HTML document with XML tags specifying playing the personalized, pre-recorded message  corresponding to the matched ANI. In step , the HTML page (corresponding to the personalized message or the generic message) is outputted to the proxy browser  to play the message to the caller.","Flags  () can also be set to correspond to the stored ANI. The flags  may, for example, permit certain callers to single-number-reach the subscriber or permit certain callers to page the subscriber. According to the disclosed embodiment, a subscriber can record personal voice messages corresponding to the identity of the calling party so that when the calling party calls the subscriber and reaches the subscriber's voice mail, the personalized voice message will be played. In addition, the subscriber is enabled to set up different scenarios (via flags) based on the ANI. For example, a subscriber may want to avoid a call from a telemarketer but may want to use SNR in the case of a co-worker calling to discuss an upcoming meeting.","Furthermore, voice mail and unified messaging services may be deployed on a platform that is customizable, scalable, and built upon open standards such as Internet protocol. Unified voice messaging services can be implemented by information service providers without the necessity of telephony based voice mail systems that rely on proprietary telephony protocols.","While this invention has been described in connection with what is presently considered to be the most practical and preferred embodiment, it is to be understood that the invention is not limited to the disclosed embodiments, but, on the contrary, is intended to cover various modifications and equivalent arrangements included within the spirit and scope of the appended claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Reference is made to the attached drawings, wherein elements having the same reference numeral designations represent like elements throughout and wherein:",{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":["FIG. 2","FIG. 1"]},{"@attributes":{"id":"p-0021","num":"0020"},"figref":["FIG. 3","FIGS. 1 and 2"]},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 5"}]},"DETDESC":[{},{}]}
