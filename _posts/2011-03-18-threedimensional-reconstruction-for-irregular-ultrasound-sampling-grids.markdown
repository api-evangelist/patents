---
title: Three-dimensional reconstruction for irregular ultrasound sampling grids
abstract: An irregular ultrasound sampling grid is reconstructed to a three-dimensional grid for imaging. Volume data acquired with a helix transducer includes a fractional offset of data spaced along one dimension, resulting in the irregular ultrasound sampling grid. To determine a voxel value for a grid point on a uniform grid, two adjacent planes are identified. The sample locations in the two planes are not aligned, being on the irregular ultrasound sampling grid. Hardware acceleration devices, such as a graphics processing unit, perform bilinear interpolation in each of the planes. The data of each plane is interpolated to the proper global azimuth-range coordinate corresponding with the grid point. The bilinearly interpolated values from each plane are then linearly interpolated to the grid point.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08922554&OS=08922554&RS=08922554
owner: Siemens Medical Solutions USA, Inc.
number: 08922554
owner_city: Malvern
owner_country: US
publication_date: 20110318
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND","BRIEF SUMMARY","DETAILED DESCRIPTION OF THE DRAWINGS AND PRESENTLY PREFERRED EMBODIMENTS"],"p":["This present invention relates to generating data for volume rendering or multi-planar reformatting (MPR). MPR and volume rendering are provided for medical images, such as diagnostic ultrasound images. To represent the volume, ultrasound data representing a plurality of spaced apart planes is acquired. Large datasets composed of tens or hundreds of images or frames of data are acquired. Each image or frame is composed of a grid of samples. The samples are spaced in an acquisition format (e.g., polar coordinate or cylindrical coordinate format) or in an imaging format (e.g., Cartesian coordinate). A stack or collection of such data represents a grid-like array in a volume.","The volume rendering or MPR may require resampling the volume data into a uniform Cartesian grid. This Cartesian grid uses a right-handed coordinate system in which the x-axis is along the azimuth dimension of the probe, the y-axis is along the elevation dimension of the probe, and the z-axis points away from the probe face at the center of the array. The range along scan lines may be different than the z-axis. The uniform grid is isotropic, such that the grid points are regularly spaced along each of three dimensions. The ultrasound data may be interpolated to represent the uniform Cartesian grid rather than the acquisition or imaging grids. Typically, the eight ultrasound samples nearest to a grid point are selected and trilinearly interpolated to form the voxel value for the grid point. Where the data of the different planes is aligned, the same x and z coordinates may be input for selecting data from different planes. However, ultrasound data acquired in an irregular pattern may result in memory calls to the wrong data. The reconstruction to the uniform Cartesian grid may not be correct.","U.S. Published Patent Application Nos. 2008\/0125659, 20080125661, and 20090010459, and U.S. Pat. No. 7,678,056 disclose acquiring data for a volume with a helical array. By walking an aperture along the helical array, different planes are scanned. Due to the helical positioning of the apertures, different planes are not aligned in azimuth-range. Because of the irregular sampling grid, using hardware-accelerated trilinear interpolation may result in image artifacts in volume-rendered and multi-planar reformatted images. A standard trilinear interpolation kernel that fetches adjacent samples by incrementing the range, azimuth, and elevation addresses of an anchor sample by one unit may not select the proper azimuth addresses if the azimuth shift between slices is greater than one acoustic line width. Such problems may exist for other irregular sampling grids.","By way of introduction, the preferred embodiments described below include methods, computer readable media, and systems for three-dimensional reconstruction from an irregular ultrasound sampling grid. Volume data acquired with a transducer may include a fractional offset of data spaced along one dimension, resulting in the irregular ultrasound sampling grid. To determine a voxel value for a grid point on a uniform grid, two adjacent sampling planes are identified. The sample locations in the two planes are not aligned, being on the irregular ultrasound sampling grid. Hardware acceleration devices, such as a graphics processing unit, perform bilinear interpolation in each of the planes. The data of each plane is interpolated to the local (within the sampling plane) x-z coordinate corresponding with the grid point. The bilinearly interpolated values from each plane are then linearly interpolated to the grid point.","In a first aspect, a method is provided for three-dimensional reconstruction from an irregular ultrasound sampling grid. Ultrasound data representing sample locations in first and second planes associated with scanning from different apertures along a linear array twisted about a longitudinal axis of the linear array is acquired. The sample locations of the first plane are offset from the sample locations of the second plane by a non-integer amount. A grid voxel of a three-dimensional grid is determined. The grid voxel is between the first and second planes. A graphics processing unit bilinearly interpolates a first sample in the first plane from data of the sample locations of the first plane and a second sample in the second plane from data of the sample locations of the second plane. A voxel value for the grid voxel is linearly interpolated from the first and second samples. An image, such as volume rendering image or MPR, is rendered from the three-dimensional grid. The image is a function of the voxel value.","In a second aspect, a system is provided for three-dimensional reconstruction from an irregular ultrasound sampling grid. A memory is configured to store ultrasound data representing sample locations in first and second planes. The first and second planes are spaced apart in a first dimension. The sample locations make up the irregular ultrasound sample grid such that the sample locations of the first plane are offset from the sample locations of the second plane by a fractional distance along a second dimension different than the first dimension. A fragment processor of a graphics processing unit is configured to linearly interpolate to a Cartesian grid from bilinearly interpolated samples of the first and second planes.","In a third aspect, a non-transitory computer readable storage medium has stored therein data representing instructions executable by a programmed processor for hardware accelerated three-dimensional reconstruction. The storage medium includes instructions for acquiring a plurality of range-azimuth slices of ultrasound data. The ultrasound data of the range-azimuth slices represents locations spaced in a two-dimensional ultrasound scan format. The range-azimuth slices are non-aligned along elevation. The storage medium includes instructions for bilinearly interpolating to first and second positions in first and second ones of the range-azimuth slices from the ultrasound data of the first and second range-azimuth slices, and linear interpolating from the first and second positions.","In a fourth aspect, a method is provided for three-dimensional reconstruction from an irregular ultrasound sampling grid. A point in Cartesian space is identified. Two acquired ultrasound scan planes closest to the point are found. The finding is from a volume of ultrasound scan planes having samples in a scan format. Data at locations on the two acquired ultrasound scan planes are interpolated with hardware acceleration. The locations have a same coordinates in two dimensions as the point. A value for the point is interpolated from the data at the locations.","The present invention is defined by the following claims, and nothing in this section should be taken as a limitation on those claims. Further aspects and advantages of the invention are discussed below in conjunction with the preferred embodiments.","A reconstruction method is provided for real-time three-dimensional imaging with a helical array ultrasound transducer or other array resulting in an irregular sampling grid. For the helical array, there is a regular spacing of samples within range-azimuth slices. In elevation, the slices are not aligned, such as being azimuthally displaced by one or more line widths and a fractional amount. Using hardware-accelerated trilinear interpolation on this irregular grid may result in image artifacts in volume-rendered and multi-planar reformatted images.","It is desirable to exploit as much hardware-acceleration during volume rendering and multi-planar reformatting as possible. A hardware-accelerated reconstruction method for scan geometries with irregular sampling grids may provide real-time rates for volume rendering and\/or multi-planar reformatting. The trilinear interpolation operation of the three-dimensional reconstruction is divided into hardware-accelerated bilinear interpolation at the closest two adjacent acquired slices and then linear interpolation of the bilinear interpolation results or between the slices.","The bilinear interpolation in the planes followed by linear interpolation of the results to a grid point may avoid inaccurate data selection using a trilinear interpolation kernel. The bilinear-linear sequence may also provide real-time reconstruction to support high volume rates, such as up to thirty volumes per second in echocardiography.",{"@attributes":{"id":"p-0021","num":"0020"},"figref":["FIG. 1","FIG. 7"],"b":["10","40","50","40","48","50","44"]},"In act , ultrasound data representing sample locations is acquired. The data is acquired by loading from memory, by transfer, or by scanning. The ultrasound data is B-mode, color mode, harmonic mode, contrast agent mode, combinations thereof, or other types of ultrasound data. Frames of data prior to display, frames of data for display, or displayed images may be used.","Each frame of data or image represents a two-dimensional area. The two-dimensional ultrasound data may be considered a texture for rendering. The data is a two-dimensional array of data points. Multiple such frames or images are acquired for representing a volume.","The ultrasound data represents an irregular ultrasound sampling grid. The ultrasound data is originally acquired by scanning a patient. Echoes from within the patient are received. Using beamformation or other technique, the scanning region is sampled. The scanning region may be a two-dimensional plane. The distribution or format of the samples within the two-dimensional scan region may be Vector\u00ae, sector, linear or other scan format. For example, the data is in a polar coordinate format. As another example, the data is scan converted data representing Cartesian coordinates. Any regular or irregular spacing may be used for the sample locations represented by the data. Regular spacing is consistent, uniform, and\/or pursuant to a same format throughout the area or volume. In the area, the sample locations are spaced according to the two-dimensional ultrasound scan format.","For volume scanning, the data represents different planes in a volume.  shows a plurality of two dimensional images or planes  representing a volume. The data of the two-dimensional planes  are textures in a three-dimensional volume array of data assembled from a regular or irregular succession of adjacent planes  through the body or patient being scanned. For example,  shows the planes  in a fan distribution with a regular \u0394\u03a6 angular separation between each plane  over a \u2212\u03a6 or +\u03a6 range. Non-uniform spacing of the planes  may be used. Parallel planes  may be used.","In one embodiment, each of the planes  is generally in range, along z, and azimuth, along x, with the planes spaced apart in elevation, along y. Azimuth, elevation, range are different coordinates from x, y, z coordinates. x\/y\/z are Cartesian coordinates, and azimuth\/elevation\/range are acquisition\/acoustic coordinates. \u201cAlong\u201d is used to show that x\/y\/z are related to azimuth\/elevation\/range, such as being similar or the same. The x, y, z coordinates are a global Cartesian coordinate arrangement.  shows the planes  viewed along the x or azimuth axis. If the volume is viewed along the x-axis or dimension, the two-dimensional planes  appear substantially as lines. Where the scanned region curves, the planes  may be warped and not appear as lines. Range-azimuth slices refer to planes in the acquisition\/acoustic coordinate reference even though the planes are acquired in a polar, cylindrical or other format and even though the slices may not be parallel along the elevation axis. The planes may have an elevation variation as well, such as shown in . The planes  fan from a same origin, but are range-azimuth slices. Other arrangements may be used.","For each plane, the two-dimensional scan format is used. Each plane represents sample locations in range-azimuth slices. Each plane has the same two-dimensional scan format for the ultrasound data (regular sampling in azimuth-range), but different planes (e.g., frames of data) may have different formats. The data of the planes  may have a same or different scaling. For example, some frames of data are acquired with a lesser resolution, such as for planes at the extremities of the volume. Other ultrasound data is acquired with a higher resolution, such as for planes  intersecting a region of interest in the volume.","In an embodiment represented by , the planes  are associated with scanning from different apertures along a linear array twisted about a longitudinal axis of the linear array. For example, a helix twisted array in a catheter is used to scan the patient. U.S. Published Patent Application Nos. 20080125659, 20080125661, and 20090010459, and U.S. Pat. No. 7,678,056, the disclosures of which are incorporated herein by reference, disclose acquiring data for a volume with a helical array. The 3D helix geometry extends the 2D Vector\u00ae, sector, or other geometry by sweeping each 2D plane  in the elevation dimension and translating each slice along the azimuth dimension.","Referring to FIG. 1 of U.S. Published Application No. 20080125659, some of the elements of the array are rotated. The rotation is about the azimuth axis. The rotation forms a helical or spiral pattern of the elements. The adjacent elements are arranged in a helix along the azimuth axis. The angle of greatest sensitivity is different for the rotated element as compared to another element. The elements at opposite ends of the array are rotated about the azimuth axis by at least 10, at least 15 or other greater or lesser number of degrees relative to each other. The azimuth centerline is straight or may rotate or twist. Greater or lesser total rotation may be used. Each of the elements in between is rotated to step the rotation between the ends.","In general, a larger aperture in elevation provides increased elevation directivity and narrower elevation beamwidth. By twisting the array in elevation, a sub-aperture of elements is used to form an image plane . The total number of independent beams that can be formed by an array is on the order of the number of elements of an aperture. By varying the total twist relative to the elements angular beamwidth, there is a tradeoff between resolution in azimuth and the elevation angular width of the volume formed.","Referring to FIGS. 4 and 5 of U.S. Published Application No. 20080125659, an aperture is formed on the array of elements. The aperture is formed by connection of conductors and associated elements to a beamformer. The elements used for transmitting and\/or receiving during a given transmit and receive event define the aperture.","A plane is scanned with the aperture. Using electronic focus, transmit and receive beams are formed using the elements of the aperture. By changing the focus, a planar region may be scanned sequentially using the aperture. The scanned plane may include a twist or distortion in spatial position due to the twist of the elements within the aperture. In response to the transmission and reception with the aperture, data representing the scanned region is acquired. The rotation of the elements results in the acquired data representing the region at a particular elevation rotation.","Other apertures are formed for scanning other planes. For each of the apertures, a corresponding generally planar scan region is scanned. The scan regions are offset from each other in the elevation dimension and are associated with different amounts of rotation about the azimuth axis. The planes are adjacent to each other along a dimension substantially orthogonal to the planes (e.g., the elevation dimension). The longitudinal (azimuth) and depth (range) extent of each scan region is similar, overlapping, or different. The elevation angle of each plane is different, such as diverging from a common axis that is also the axis of rotation of the array.","By selecting a different aperture, a different plane is scanned. The position of the plane corresponds to a different angle of twist associated with the elements than for other apertures. Other apertures may be formed for scanning other regions or planes. The planes are spaced apart, but overlap in azimuth and range.","As a result of the walking aperture, the data of different planes is offset.  shows two adjacent planes with data in a sector format. The view is along the elevation axis. The range-azimuth slices are not aligned along elevation, but are instead offset. For example, referring to an x, z location in one range-azimuth slice does not refer to a location of data in another range-azimuth slice given that x, z are Cartesian or global coordinates. The azimuth and range locations of each slice represent different positions relative to the volume.","Due to the physical arrangement of the apertures, the offset may be by a non-integer amount. The sample location in one plane  may be shifted in azimuth by a fractional amount in an adjacent plane, such as a fractional amount greater than one scan line (e.g., 1.33 receive scan line shift). The slices are not aligned along elevation. Because of the azimuth translation of each slice, 8-sample kernels (e.g., trilinear interpolation or filtering kernels) are not symmetric about all three Cartesian axes. In particular, the four samples making up the x-y planes in each kernel form the shape of a parallelogram.  shows two samples ,  in one plane relative to two samples ,  in another plane. The planes and samples are shifted a fractional amount relative to each other and may be shifted by a greater amount relative to local x, z locations (see ).","Referring to , the relationship of the global Cartesian coordinate system to the acquisition format is shown. In the coordinate transformation computations to and from the Cartesian coordinate system, his the elevation twist rate measured in rad\/mm. This defines the slice rotation as a function of azimuth distance from the origin. The slice rotation is around the azimuth, x, axis and along the elevation, y, axis. The origin is a starting position or other arbitrary position. \u03a6 is the elevation angle. Each slice has its own or local xz coordinate system whose origin is at the center of the respective aperture. The z-axis in each local coordinate system is referred to as \u201cz-prime\u201d or z\u2032 since the local z-axis differs from the global z-axis shown in . The z-prime axis is a rotated version of the z-axis. The x-axis lies along the axis of rotation, and the elevation angle is the rotation angle. The x-axis in each local coordinate system is referred to as \u201cx-prime\u201d or x\u2032 since the local x-axis differs from the global x-axis as shown in . The x\u2032-axis is a translated version of the x-axis. The x\u2032-axis is translated along the x-axis by an amount proportional to the elevation twist rate and the elevation angle.","To reconstruct the acquired data for imaging, the data is interpolated to a three-dimensional grid. The three-dimensional grid is in the global Cartesian coordinate system. By reconstruction, the data obtained from the scan is formatted for imaging. For example, the data is interpolated to a three-dimensional evenly spaced grid. As another example, the data is interpolated to a plurality of arbitrary or non-scan planes for MPR. The known plane positions, sample depth, and scan line position provide relative spatial position information for each datum.","The locations from the three-dimensional grid to be used in imaging are identified in act . All of the locations in the three-dimensional grid are populated or only selected locations are populated. Each location is a voxel. The voxel represents a volume element of an array of such elements in the grid. Each voxel is isotropic or has equal dimensions. Non-isotropic voxels may be used. The three-dimensional grid is isotropic. The grid points or voxels are regularly spaced, such as having equal spacing along all three dimensions. Non-isotropic grids may be used.","To populate a grid voxel of the three-dimensional grid, the grid voxel is identified in act . The point in Cartesian space to be used for rendering or other imaging is determined. The point is determined as part of sequentially populating all of the grid points or is specifically determined as needed for selected imaging. The type of imaging, any clipping, or other parameters for imaging indicate the points or voxels to be used. For example, the entire volume is to be used for three-dimensional volume rendering. Each point in the grid is identified. As another example, clipping or obstructions for volume rendering designates a sub-set of the voxels to be used for rendering. Only the voxels to be used are identified. In another example, only the points along MPR planes are selected for interpolation.",{"@attributes":{"id":"p-0041","num":"0040"},"figref":"FIG. 2","b":"60"},"Referring to , the planes  to be used for interpolation are found in act . The planes  closest to the voxel are identified. The known locations of the planes  within the volume, as defined by the Cartesian coordinate system, are used to find the two planes closest to the target sample. For a given point (x, y, z) in Cartesian space, the closest two adjacent acquired slices are found.",{"@attributes":{"id":"p-0043","num":"0042"},"figref":["FIG. 6","FIG. 5","FIG. 2"],"b":["72","78","60"],"sub":["span ","elev ","span","elev","min ","o","min","min","1","o","o ","1 "]},"The y coordinate associated with these two planes is computed. The y coordinates on the acquired slices at \u03c6and \u03c6for the same z and x coordinates are given as: y=z*tan(\u03c6) and y=z*tan(\u03c6).","In act , the bilinear interpolation is performed for each of the identified planes . The ultrasound data for each of the range-azimuth slices is interpolated to positions on the slices corresponding to the x, z position of the target sample. The positions in each plane to which data is to be interpolated are a same x and z location in the volume. The x and z locations are the same as the grid point. Points are interpolated on each of the identified slices and to the same x and z coordinates as the desired point. For example,  shows two samples on each plane. The two samples on each plane are interpolated to the x position (middle sample) on each plane. This provides linear interpolation. For bilinear interpolation, the x, z location on each plane is between four samples. The four samples are interpolated to the global x, z location.","In interpolation, data at the desired sample locations is loaded from memory. Using sequential memory addressing may cause problems in trilinear interpolation.  illustrates the difference between choosing the interpolation kernel based on the closest azimuth coordinates (standard approach) and choosing the interpolation kernel based on proximity (preferred approach) for azimuth translations of greater than one acoustic line width. An azimuth line is shown through the target sample (black dot). Following the azimuth line, the two samples in each plane on each side of the line are chosen. If the computed azimuth address is used to find the closest samples by finding the anchor sample and incrementing the azimuth address by one on each slice, the samples that are chosen are not actually the closest acquired samples to the target sample location.","For the bilinear interpolation, the interpolation weights are determined based on the relative locations. The relative distance from each sample location of ultrasound data in a given plane to the x, z coordinate of the target sample reflected on the plane is used as the interpolation weight.","Because of the azimuth translation of each slice, the fractional part of the azimuth coordinate computed during the resampling operation cannot be used as an interpolation weight. In a simplification shown as a linear interpolation,  shows the relative weighting. For a given x-coordinate, the fractional parts of the azimuth addresses for the closest two acquired slices are different. The horizontal arrows between the x axis locations at the target sample represent differences that are not appropriate for the data in the planes at the actual samples -. The arrows along the x-axis of or in each plane show the distances between the samples on the plane and the target sample in the x-axis. The x interpolation weight in each plane is computed as: h=(x\u2212x)\/(x\u2212x). The weights for each plane are different due to the offset.","For bilinear interpolation, the weights in the z axis are calculated in the same way. Where the irregular grid is not offset in range, the weights for both slices are the same. The bilinear interpolation weights may be calculated in the plane rather than separately along x and z axes. Four weights are calculated for the bilinear interpolation. The four weights are based on the relative distances in the plane to the target location projected on the plane. The four nearest sample locations in each plane are used to determine the weights for bilinear interpolation on the respective plane.","The ultrasound data in each plane to be interpolated is identified. The range and azimuth values for the slice at \u03c6are computed. his the elevation twist rate in rad\/mm. xis the vector apex for the azimuth dimension. The vector apex is zero for a sector scan where the origin is at the face of the transducer. The vector apex may be positioned behind the face, providing for a negative vector apex value in mm T(.) is the coordinate transformation from Cartesian to acoustic coordinates for 2D vector equal angle\/sine spacing to range and azimuth coordinates rand a, respectively. ris the range away from the transducer in the scan plane or local coordinates, and ais the position along the transducer (azimuth) in the scan plane or local coordinates.","To find the local coordinates or rand acoordinates corresponding to the x, z coordinates of the target sample, the following is performed:\n\n=\u03c6\n\n\/cos(|\u03c6|)\n\n\n\n[()\n\nLikewise, rand aare computed for the other plane, \u03c6.\n","The ultrasound data for the computed locations is retrieved from the corresponding memory locations for the data. The addresses for the slices at \u03c6and \u03c6are computed using a function A(.). Function A(.) calculates the memory address for a given elevation angle. Function A(.) accounts for the reverse order of slices stored in memory or other storage order. e=A(\u03c6and e=A(\u03c6are the memory locations for the samples.","Once the ultrasound samples are loaded, the bilinear interpolation is performed. Bilinear interpolation is performed on the slice at \u03c6in volume V to obtain a scalar value prepresenting the interpolated value with the same z and x coordinates as the target sample on the acquired slice at \u03c6. The bilinear interpolation is also performed on the acquired slice \u03c6. For example, function B(.) performs a bilinear interpolation on a given slice at given range and azimuth coordinates: p=B(V[e], r, a) and p=B(V[e], r, a). The four closest or surrounding ultrasound samples in each plane are interpolated to the x, z Cartesian coordinate in the plane using the interpolation weights. In alternative embodiments, the two closest azimuth and\/or range samples are interpolated. Three or other numbers of samples may be interpolated.","The bilinear interpolation is performed by a processor. In one embodiment, a graphics processing unit performs the interpolation. Other hardware acceleration may be used, such as by digital signal processors, applications specific integrated circuits or other circuits for performing interpolation in parallel operations. Custom, standard, or off the shelf hardware acceleration may be used. Exploiting hardware-accelerated bilinear interpolation may allow more rapid rendering or real-time operation. If bandwidth is available, the hardware-acceleration may also be used for the linear interpolation in act . Because the bilinear interpolations in two planes involve eight sample retrievals from volume memory as well as the computations associated with those eight samples, the hardware acceleration bandwidth is applied to the bilinear interpolation rather than the linear interpolation where bandwidth is not available for both.","In act , the ultrasound data interpolated to the x, z position in the two planes is linearly interpolated. The results of the bilinear interpolations are interpolated to the grid point. The voxel value results from the linear interpolation. The value from each plane at the x, z position is interpolated to determine a value at the target sample or grid point in the reconstruction between the two planes. The resulting value is the voxel value for the reconstruction. The value represents the target sample for the three-dimensional grid point.","In , the vertical (elevation) dashed line represents the linear interpolation. The target sample is shown as the dark dot, and the two circles along the vertical dashed line on each side (above and below as viewed in ) of the target sample are the bilinearly interpolated data. The linear interpolation is of the two circles to the dark dot. The value for an elevation location in the volume and between the range-azimuth slices is interpolated.","The interpolation weights are determined by the relative distances of each circle to the dark dot. The linear interpolation of pand puses interpolation weight h: p=p*(1\u2212h)+p*h.","The interpolation is performed by the graphics processing unit. The graphics processing unit calculates the weights and performs the linear interpolation. In alternative embodiments, another processor determines the weights or a look-up table is used for the weights. Another processor may be used for the interpolation, such as a general or control processor.","The ultrasound data is reconstructed along the three-dimensional grid. Acts  and  are repeated for other voxels between the two planes. The repetition may be based on identifying reconstruction grid locations between each pair of slices. Values for a plurality of grid voxels between any pair of frames are determined. The repetition continues for other pairs of planes.","Alternatively, the repetition is by identifying a next grid location. The slices are found in act  and the interpolations of act  and  are repeated for each grid location. Voxel values for the isotropic Cartesian grid are determined by the repetition.","In act , an image is rendered from the voxel values of the three-dimensional grid. The rendering is performed by the graphics processing unit, the general processor, other processor, or combinations thereof. The image may be rendered at least ten times a second. Using hardware acceleration, greater rates of rendering may be provided, such as 25, 30 or more images per second. A series of images based on different sets of scan or ultrasound data is generated in real time with the acquisition by scanning of the data. Alternatively, the ultrasound data is acquired from memory and not connected to the scan rate (e.g., may be rendered at a slower rate).","The image is a function of one or more voxel values. The image is rendered as a two-dimensional representation of a volume or the image is rendered as a multiplanar reformatted image. The image is rendered from the reconstructed data or voxel values. At least one of the voxel values resulting from the linear interpolation is used for imaging.","In one embodiment, the reconstruction data representing the three-dimensional grid is used to render a two-dimensional representation of the volume. The rendering is for any viewing direction. For viewing direction oriented rendering, the data along viewing directions or lines is combined. Any rendering technique may be used, such as indirect or direct volume rendering techniques. For example, a maximum, minimum, average or other intensity projection rendering is performed. Color and\/or opacity values may be interpolated for rendering along the desired direction. While indirect methods generate and render an intermediate representation of the volume data, direct methods display the voxel data by evaluating an optical model which describes how the volume emits, reflects, scatters, absorbs and occludes light. The voxel values are mapped to physical quantities which describe light interaction at the respective points in 3D-space. During image synthesis, the light propagation is computed by integrating light interaction effects along viewing rays based on the optical model.","Texture-based volume rendering approaches include view-aligned or object-aligned methods depending on the orientation of the proxy geometry. For view-aligned slicing, the proxy geometry is oriented orthogonal to the viewing direction of a virtual camera. The volume data is represented by a block of voxel data (3D texture). For object-aligned slicing, the proxy geometry is oriented orthogonal to the three main axes of the volume. A large number of view- or object aligned slices through the volume of voxel data are reconstructed during rendering using the proxy geometry.","In another embodiment, a multi-planar reformatting or reconstruction is rendered. One or more voxel values are used for the multi-planar reformatting. Two or more planes through the volume are determined. One or more of these planes are different from the scan planes. The planes define voxel locations for reconstruction instead of using the three-dimensional grid. Alternatively, the planes define locations for which data is interpolated from the three-dimensional grid. Using the reconstruction, one or more values for locations along the planes are determined. The values are used to generate a two-dimensional image of the plane in the volume.",{"@attributes":{"id":"p-0066","num":"0065"},"figref":"FIG. 7","b":["10","10","12","14","16","18","20","14","20","10","18","14"]},"The system  is part of a medical imaging system, such as a diagnostic or therapy ultrasound system. Alternatively, the system  is part of an archival and\/or image processing system, such as associated with a medical records database workstation. In other embodiments, the system  is a personal computer, such as desktop or laptop.","A data source provides ultrasound data to the processor , memory , GPU  and\/or GPU memory . The data source is an ultrasound beamformer, ultrasound detector, ultrasound scan converter, network, database, storage device, computer, or other device operable to acquire and\/or store a set of data representing a volume. For example, the data source simultaneously or sequentially provides tens, hundreds or even thousands of two dimensional images and associated spatial relationship information. Images may include data for generating an image even if not in an imaging format or data in an imaging format previously or not yet used to display an image. In one embodiment, the data source provides the images to the memory .","The memory  is a system memory, cache memory, random access memory, CPU memory, buffer, combinations thereof or other now known or later developed memory. The memory  is operable to sequentially store different subsets or an entire collection of the data representing the volume. For example, the memory  stores an array of two dimensional images as they are acquired and used, stores all images to be used, or stores an on-going collection of the images.","The two dimensional images represent parallel or non-parallel slices or planes through a patient or structure. The planes are spaced apart in one dimension, such as being separate at a plurality of depth or azimuth locations. The planes may intersect in or outside of the volume of interest.","The images have a same or different resolution with the same or varying spacing between each immediately adjacent pair of images. For each plane, ultrasound data represents a plurality of sample locations. The sample locations for the planes in combination are in an irregular ultrasound sample grid. The irregular grid has sample locations in one plane offset from the sample locations of another plane by a fractional distance. The grid is skewed along at least one dimension, such as being regularly spaced in azimuth and range but skewed with an azimuth offset along the elevation dimension. For example, the planes and corresponding sample locations are acquired by scanning from different apertures along a linear array twisted about a longitudinal axis of the linear array. The sample locations of one plane are offset from the sample locations of another plane by the fractional distance. Alternatively, the grid is irregular within one or more planes.","The data contents of each image are contiguous within the memory  to ensure good cache coherency, but one or more images with data in non-contiguous addresses may be used. The images may be stored in different memories (e.g., the memory  and the memory ) and the images may lack uniform scaling and\/or inter-image distance.","The processor  is a general processor, digital signal processor, application specific integrated circuit, field programmable gate array, graphics processor unit, central processing unit, analog circuit, digital circuit, combinations thereof, multiple processors, network or other now known or later developed processor. In one embodiment, the processor  and the memory  are part of a graphics processing unit, such as a graphics card operable pursuant to OpenGL, DirectX, or other graphical data rendering languages. In another embodiment, the processor  is a control or general processor for interacting with the GPU .","The processor  controls loading data from the memory  into the graphics processing unit . The processor  may be configured to perform interpolation and\/or rendering functions. In one embodiment, the processor  computes information used for reconstructing a three-dimensional grid. The information includes values for parameters based on known relationships for a given sequence of volumes. Any parameters that are fixed or used without change for reconstructing the three-dimensional grid and\/or rendering images from the grid are calculated or loaded by the processor . Such parameters include range, elevation, and azimuth limits; sample spacing in range, azimuth, and elevation; and Cartesian sampling grid spacing. For parameters that have values which may change or vary through a sequence of volumes, the GPU  calculates or loads the parameters. Other distributions of processing may be used.","The graphics processing unit (GPU)  is a graphics accelerator chip, processor, application specific integrated circuit, analog circuit, digital circuit, accelerator card, or combinations thereof. In one embodiment, the GPU  is a personal computer graphics accelerator card or components, such as manufactured by nVidia (e.g. Quadro FX 4500 or others), ATI (e.g. Radeon 9700 or others), or Matrox (e.g. Parhelia or others). A custom GPU may be used. The GPU  provides hardware devices for accelerating volume rendering processes, such as using application programming interfaces (API) for reconstructing a three-dimensional grid and\/or rendering an image from the reconstructed grid. Example APIs include OpenGL and DirectX, but other APIs may be used independent of or with the GPU .","The GPU  is operable for volume rendering based on the API or an application controlling the API. For example, the GPU  is operable to texture map with alpha blending, minimum projection, maximum projection, surface rendering, or other volume rendering of the data. The GPU  also performs reconstruction to a Cartesian or other grid, such as bilinear and\/or linear interpolation.","The GPU  is conceptually or physically divided into a plurality of different processors. For example, the GPU  includes fragment and vertex shaders as well as other processors in the rendering pipeline. Different processors have different functions. The calculations for interpolation weights, finding planes, determining a target sample, identifying sample locations and samples, bilinear interpolation, linear interpolation, or other functions discussed herein are preformed by the same or different processors of the GPU  and\/or the processor .","In one embodiment, a fragment processor of the GPU  is configured to perform the bilinear and\/or linear interpolation. The locations of four samples are determined for each plane. The locations are bilinearly interpolated in each plane from the ultrasound data. The four samples are closest to and surrounding the locations in the planes projected from the target or voxel location. The samples for positions closest to each point of the Cartesian grid are bilinearly interpolated.","The fragment processor may be configured to linearly interpolate to a Cartesian grid from the bilinearly interpolated samples of different planes. The bilinear interpolation results from adjacent planes are linearly interpolated along the elevation dimension. The linear interpolation completes interpolation from the acquisition data to the Cartesian or other global grid. Data is interpolated from the irregular grid to the regularly spaced three-dimensional grid.","The fragment processor is configured to perform the bilinear interpolation and perform the linear interpolation for other locations between two given planes and\/or for other locations between other pairs of planes. The entire or a subset of the acquired data is reconstructed to the Cartesian or other grid. The Cartesian or other grid is populated with voxel values. Voxel values are determined for one or more planes for MPR or for a volume for volume rendering.","The GPU , using the fragment processor and\/or other processors, renders an image from the voxel data representing grid points of the Cartesian or other grid. Any now known or later developed rendering may be used.","The GPU  and\/or the GPU memory  are included within the system  as part of a single system component, such as a medical diagnostic or therapy imaging system. In alternative embodiments, the GPU  and GPU memory  are provided separate from a data acquisition system, such as provided in a workstation or personal computer. The acquired data is transferred wirelessly, over a computer network, or through a transferable storage medium to the GPU .","The GPU memory  is a video random access memory, a random access memory, or other memory device for storing data or video information. In one embodiment, the GPU memory  is a video random access memory of the GPU . A driver for the GPU  or a memory driver controls storage of data by the GPU memory . The GPU memory  is responsive to the driver to store, transfer, and retrieve data. The GPU memory  is operable to store the interpolation weights, ultrasound samples for interpolation, and\/or interpolated results.","In one example GPU implementation, the volume data is stored in the GPU memory . The ultrasound data of all the planes, a subset of the planes, or the selected planes for a given interpolation are stored. The resulting voxel data may be stored. The voxel values can further be used for classification and shading.","The GPU memory  and\/or the memory  are non-transitory computer readable storage medium having stored therein data representing instructions executable by a programmed processor. The instructions, by being loaded into or available to the processors of the GPU  and\/or the processor , configure the processor(s). The processor  or GPU  operates pursuant to instructions stored in the memory , memory , or another memory. The processor  or GPU  is programmed for hardware accelerated three-dimensional reconstruction. The memory is a non-transitory computer readable storage media. The instructions for implementing the processes, methods and\/or techniques discussed herein are provided on the computer-readable storage media or memories, such as a cache, buffer, RAM, removable media, hard drive or other computer readable storage media. Non-transitory computer readable storage media include various types of volatile and nonvolatile storage media. The functions, acts or tasks illustrated in the figures or described herein are executed in response to one or more sets of instructions stored in or on computer readable storage media. The functions, acts or tasks are independent of the particular type of instructions set, storage media, processor or processing strategy and may be performed by software, hardware, integrated circuits, firmware, micro code and the like, operating alone or in combination. Likewise, processing strategies may include multiprocessing, multitasking, parallel processing, and the like. In one embodiment, the instructions are stored on a removable media device for reading by local or remote systems. In other embodiments, the instructions are stored in a remote location for transfer through a computer network or over telephone lines. In yet other embodiments, the instructions are stored within a given computer, CPU, GPU or system.","The display  is a CRT, LCD, projector, plasma, or other now known or later developed display device. The display  generates an image or sequence of images during or after the data is rendered. The image is a three dimensional representation, such as a two dimensional image rendered from a user or processor selected viewing direction. Alternatively, the image is one or more two-dimensional images representing planes in the volume. The display  is part of a local system  or is remote, such as a networked display.","z is used above for the global coordinates. In alternative embodiments, the range may be used instead of z.","While the invention has been described above by reference to various embodiments, it should be understood that many changes and modifications can be made without departing from the scope of the invention. It is therefore intended that the foregoing detailed description be regarded as illustrative rather than limiting, and that it be understood that it is the following claims, including all equivalents, that are intended to define the spirit and scope of this invention."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The components and the figures are not necessarily to scale, emphasis instead being placed upon illustrating the principles of the invention. Moreover, in the figures, like reference numerals designate corresponding parts throughout the different views.",{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":["FIG. 3","FIG. 2"]},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":["FIGS. 5 and 6","FIG. 5"]},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 7"}]},"DETDESC":[{},{}]}
