---
title: Advertising using image comparison
abstract: Registration and classification of non-textual information, such as digital images and video is described. Image searching and comparison of the images is also described. The digital images are indexed (i.e., each image is assigned a unique numerical parameter and/or a plurality of numerical parameters). The resulting index files are stored in a database that can be quickly searched because the index files are universal numerical files that are significantly smaller in size than their source images. Image search queries are also indexed to generate an index file, which is then compared with the stored index files. A similarity score is also calculated to rank the similar images based on the index file-to-index file comparison.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08374914&OS=08374914&RS=08374914
owner: Obschestvo S Ogranichennoi Otvetstvennostiu “Kuznetch”
number: 08374914
owner_city: St. Petersburg
owner_country: RU
publication_date: 20090804
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["PRIORITY","BACKGROUND","SUMMARY","DETAILED DESCRIPTION"],"p":["The present application claims priority to U.S. Provisional Application No. 61\/086,760, filed Aug. 6, 2008, and entitled \u201cMETHOD FOR REGISTRATION AND SEARCH OF NON-TEXTUAL INFORMATION,\u201d and U.S. Provisional Application No. 61\/086,759, filed Aug. 6, 2008, and entitled \u201cMETHOD FOR TARGETING ONLINE ADS IN THE CONTEXT OF VISUAL SEARCH RESULTS BY USER,\u201d the entireties of which are hereby incorporated by reference.","1. Field","The subject invention relates to advertising systems and methods of advertising using images and image-to-image comparison.","2. Related Art","Most websites today include digital images, such as digital photographs and videos. Most search engines include a feature that allows for searching of these digital images; however, these image search features use textual search queries that are compared with metadata for the digital images. Because some of the metadata is user generated, the metadata is sometimes inaccurate. Furthermore, some images have no metadata. Thus, the search results for the image search features tend to be unsatisfactory. In addition, the images are not ranked according to their level of similarity to the original query.","Content-based image retrieval (i.e., image-to-image comparisons) has been developed but has not been implemented in an online environment. Problems with the content-based image retrieval methods include the amount of time required to process the data and the accuracy of the comparison results. Some of the existing methods analyze the media content files (e.g., images, videos, etc.) for metadata to identify certain media patterns identical to those defined in preliminary descriptions, templates or objects (symbols, keywords, graphic patterns, audio phonemes). Some of these methods also recognize objects based on forms, contours, silhouettes, background, colors and other characteristics, or use graphical templates, such as \u201cstep\u201d, \u201cedge\u201d, \u201croof\u201d, \u201cmountain range\u201d or \u201clawn,\u201d to recognize appropriate parts of the image. Other methods divide the image into logical units, apportion text and non-text areas, recognize objects, preliminarily allocate at least one graphical construction among smallest units as typical element for object recognition, and build object models as an aggregate of such typical elements with their spatial ratio. These methods, however, are limited to narrow domains (i.e., only recognition of text or simple geometric shapes). These methods also do not allow for classification, search and comparison of unknown objects, because the methods only work with the preliminarily defined types of objects and are limited to the components of the preliminary defined templates (e.g., phonemes for audio files, key frames for video files, graphical primitives for image files).","Other content-based image retrieval methods use file comparison algorithms. These methods find identical media-files, but do not analyze the content of these files. For example, some of these methods use fuzzy logic instruments that require significant computer resources and time and do not allow image searching of large arrays of data in real time. These methods are also limited in scalability because the time for search is linearly dependent on the number of files in the database.","Another method for identifying similar images develops a template based on a group of original images, using mathematical descriptors of forms and areas of the images in the group that are significant for search. The mathematical descriptors are developed based on parameters of the original image, which are compared with those in the database. A result is given as a number which is then compared with source parameters to determine the similarity of images. This method, however, still does not provide the speed of search necessary to conduct such searches in real time, because the descriptors for each group of initial images need to be changed every time a search is done, and the descriptor is then compared to all images in the database (i.e., calculate similarity parameters in the database and comparison of the source descriptor with them).","The most common method for indexing images is based on Fourier analysis. Fourier analysis gives quality results only based on contours of images. Attempts exist to improve search results using the results of Fourier analysis as input data for a neural network or by improving histograms of images by quantization based on frequency of color change. These attempts, however, have only been done for research purposes and only provide good search results in particular cases. The main problem with these approaches is the narrow domain of their potential use. For example, searches based on control points are used in face recognition systems to analyze images of human faces that have sufficient resolution and are in a particular perspective.","Other recognition methods separate images by their domain; then, different algorithms for mathematical descriptor calculation (index files) for the different domains are applied to the images to analyze the images. In other embodiments, a wide range of graphical primitives (knowledge base) are developed, and correlations between objects contained in a media file with the primitives in the database are determined. These methods, however, still do not identify the similarity of one media file to another because the methods can only be used with those media objects for which there are defined and reliable search algorithms and detailed databases of primitives. For example, because there are no reliable algorithms to search for trees, a search system using the known algorithms may identify a \u201ctree\u201d in the image, but cannot determine the similarity of the tree in the image to another tree. In addition, these methods have a high demand for processing computer resources to calculate the indexes of images.","The following summary of the invention is included in order to provide a basic understanding of some aspects and features of the invention. This summary is not an extensive overview of the invention and as such it is not intended to particularly identify key or critical elements of the invention or to delineate the scope of the invention. Its sole purpose is to present some concepts of the invention in a simplified form as a prelude to the more detailed description that is presented below.","According to an aspect of the invention, a method is provided that includes maintaining an index of image index files, each image index file representative of a digital image of an advertisement; receiving an image query, the image query comprising a digital image; calculating an image index file representative of the digital image; comparing the image index file of the digital image with the image index files representative of the advertisements; transmitting at least one advertisement based on the comparison.","Comparing the image index file of the digital image with the index files representative of the advertisements may include generating a similarity score for each advertisement.","The method may further include creating a list of advertisements based on the comparison.","The method may further include transmitting the list of advertisements to a third party server, the third party server providing the digital images of the advertisements.","The method may further include transmitting a request for the at least one advertisement to a third party server, the third part server providing the digital image of the at least one advertisement.","The index may further include a representation of the digital image of the advertisement.","The digital image of the image query may be submitted by a user, and transmitting may include transmitting the at least one advertisement to the user.","The index may further include a monosemantic descriptor for each image index file and the method may further include calculating a monosemantic descriptor for the digital image and comparing the monosemantic descriptor for the digital image with the monosemantic descriptor for each image index file before comparing the image index files.","Calculating the monosemantic descriptor may include dividing the digital image into a plurality of cells; calculating an image descriptor for each of the plurality of cells; and aligning the image descriptor for each of the plurality of cells to calculate the monosemantic descriptor.","The image index file may include a plurality of metrics.","The plurality of metrics may be clustered according to a color palette of the digital image, changes in image composition of the digital image and generic representation of the digital image.","The plurality of metrics may include color metrics, texture metrics, intensity metrics and morphology metrics.","The plurality of metrics may include a 2D color histogram and a 4D color vector field.","Comparing may include calculating the similarity for each of the image metrics and summing the similarity to generate a similarity score.","Comparing may include calculating the similarity for each of the image metrics, multiplying each of the similarities by a weighting factor, and summing the weighted similarities to generate an image similarity score.","According to another aspect of the invention, a method is provided that includes maintaining an index of image descriptors, each image descriptor representative of a digital advertisement; receiving a user selection of a digital image; calculating an image descriptor representative of the digital image; comparing the image descriptor of the digital image with the image descriptors representative of the digital advertisements; transmitting at least a link to a webpage based on the comparison.","The user selection may include a request to access a web page on which the digital image is located.","The user selection may be a mouse-over of the digital image.","The user selection may be a click-through of the digital image.","Comparing may include generating a similarity score and wherein the link transmitted is based on the similarity score.","The index may further include a monosemantic descriptor for each image index file and the method may further include calculating a monosemantic descriptor for the digital image and comparing the monosemantic descriptor for the digital image with the monosemantic descriptor for each image index file before comparing the image index files.","Calculating the monosemantic descriptor may include dividing the digital image into a plurality of cells; calculating an image descriptor for each of the plurality of cells; and aligning the image descriptor for each of the plurality of cells to calculate the monosemantic descriptor.","The image index file may include a plurality of metrics.","The plurality of metrics may be clustered according to a color palette of the digital image, changes in image composition of the digital image and generic representation of the digital image.","The plurality of metrics may include color metrics, texture metrics, intensity metrics and morphology metrics.","The plurality of metrics may include a 2D color histogram and a 4D color vector field.","The method may further include in response to the user selection of the digital image, present the user with one or more referrals selected from the group consisting of purchasing the camera that took the digital image, buying a product or service from the source of the image, buying something related to the image, and getting more information about the image or the source of the image; receiving a user selection of one of the referrals; and transmitting at least the link to the webpage based on the similarity score and based on the selected referral type.","Transmitting at least a link to a webpage based on the similarity score may further include transmitting the digital advertisement.","The method may further include transmitting a request for the digital advertisement to a third party server, the third part server providing the digital image of the advertisement.","According to a further aspect of the invention, a computer system is provided that includes an index data store comprising a plurality of image index files representative of digital advertisements; a search portal to receive a digital image; and an indexing engine to calculate the image index files for each digital advertisement, calculate an image index file for the digital image and compare the image index file for the digital image with the plurality of image index files representative of digital advertisements.","The computer system may further include an advertisement data store to store the digital advertisements corresponding to the image index files in the index data store.","The search portal may be configured to transmit at least one of the digital advertisements in the advertisement data store based on the comparison by the indexing engine.","The search portal may further include a user interface.","Embodiments of the invention relate to systems and methods for indexing, registration, classification and search of non-textual information, such as digital images and video (hereinafter \u201cimages\u201d). The digital images are indexed (i.e., each image is assigned a unique numerical parameter) to identify and characterize the content of the image. The resulting index files are stored in a database and can be quickly searched because the index files are universal numerical files that are significantly smaller in size than their source images. The index files may also include link(s) to the original image.","Embodiments of the invention also relate to systems and methods for comparison, searching and ranking of images. An image query is first indexed as described above to generate an image query index file. The image query index file is then compared with the index files stored in a database. A similarity score is calculated using the comparison of the index files and is used to rank the similar images.","Advantages of the above systems and methods include universality (i.e., classification of arbitrary images as well as objects that they contain); mathematical unambiguity (i.e., creates a monosemantic descriptor, index file, for further search of similar images); location of similar images and definition of the level of similarity among the images; and, scalability and high speed of search (e.g., the algorithm can be used to build an index of all available images on large networks such as the Internet and search for similar images in real time). In addition, the algorithm is not affected by modifications to the image, such as a change of color, contrast, small shifts and turns of the image, distortion to image, certain changes to perspective, etc.","An embodiment of the invention will now be described in detail with reference to .  illustrates an exemplary system  for image recognition, classification, comparison and searching. The system  includes a server  that may communicate with computers  through a network  (, ).","The server  is configured to receive requests from computers , process the requests and provide responses to the computers . In addition, the server  is configured to send requests to the computers . The server  may include one or more server computers networked to one another. An exemplary server is the Apache server. The server  includes a processor  to execute instructions, which is connected to memory  that stores data. The processor  executes instructions and accesses data in the memory  to, for example, index the images and search for similar images using the index files. It will be appreciated that the server  may be implemented with any type of hardware and software, and that the server  may have a different configuration than shown in . In addition, it will be appreciated that the server  may include several server computers connected together.","The network  may be any type of communications channel, a local area network (LAN), a wide area network (WAN), such as the Internet, direct computer connections, and the like. The connection may be accomplished in a wireless manner using radio frequency, infrared, or other technologies, using any type of communication hardware and protocols, through other communication mediums, such as electric cable, fiber optic cable, and\/or through other technologies.","The computers  access the server  through the network . The computers  may also communicate with one another over the network . The computer  may be a server, a personal computer, a portable computer, a hand held device, a wireless device, and the like. The computer may be a single device at a single location or multiple devices at a single or multiple locations that are connected together using an appropriate communication protocol over any communication medium.","In one embodiment, the server  identifies an image search result in response to image input received from any of the computers  and shares the search result with users located at that computer  over the network . For example, the server  may include a website that is accessible by the computer  through a web browser located at the computer  over the network . The website allows the user to enter an image query at the computer .",{"@attributes":{"id":"p-0070","num":"0069"},"figref":"FIG. 2","b":["200","200","204","208","212","200","216","200","220","204","224","228","232"]},"The crawling data store  and indexing data store  are storage media, e.g., storage area network (SAN), network attached storage (NAS) that may utilize volatile or non-volatile memory that includes, for example, read only memory (ROM), random access memory (RAM), magnetic disk storage media, optical storage media, flash memory devices and zip drives.","The crawler  is a software program or software robot, which is typically used to build lists of the information found on Web sites. Another common term for the crawler  is a spider. The crawler  typically keeps track of the information located in its search and where the information is found. In particular, the crawler  is configured to extract the images from websites . In one embodiment, the crawler  is a universal crawler that is a program working on one or several servers of the system and going through hyperlinks of files in documents, published on the internet, searching for required information (for example, images or other media files). Examples of crawlers include Googlebot, Yahoo! Slurp, MSN Crawler and others. The crawler  forms an array of links to images for subsequent indexing and builds links for further crawling. The images located by the crawler  are stored temporarily in the crawling data store . For example, the images may be stored in the crawling data store  until the indexing process is completed.","The indexing engine  is typically a software program which is used to create an index, which is then stored in the indexing data store . The index is typically a table of alphanumeric terms that define the images located by the crawler  and the location of documents corresponding to the alphanumeric terms (e.g., a link). The link may be a Uniform Resource Locator (URL). The indexing engine  may build a hash table, in which numerical values are attached to the images. In particular, the indexing engine  is configured to analyze the images in the crawling data store  to generate an index file which is stored in the indexing data store . For example, the indexing engine  may be configured to generate an index file as described below with reference to . The indexing engine  may also be configured to cluster the image index files that are representative of similar images as described below with reference to .","In one embodiment, the indexing engine  is also configured to receive an image query, index the image query and compare the index file of the image query with the index files stored in the indexing data store . The indexing engine  may also be configured to determine a level of similarity between the image query and the images having index files in the indexing data store .","The search engine  is configured to receive image queries from the search engine user interface  and transmit search results from the indexing engine  to the user interface . In one embodiment, the search engine  provides the image query to the indexing engine  for indexing and comparison; in another embodiment, the search engine  performs the indexing and comparison; and, in other embodiments, the indexing engine  performs the indexing and the search engine  performs the comparison. The search engine  may also be configured to generate a web page with a list of images ranked according to the calculated level of similarity.",{"@attributes":{"id":"p-0076","num":"0075"},"figref":"FIG. 3","b":["300","300","304","308","312","316","320"]},"As shown in , the method includes using the crawler  to collect images from the web pages . The crawler  is configured to download the image from its host server and save the image, the image metadata and a thumbnail of the image in the crawling database. The crawler may be, for example, a universal data crawler, a specialized software program-agent for performing a certain defined search algorithm, etc. Specialized crawlers use specific characteristics of application interfaces of various portals, photo banks, and other data sources to locate the images. The crawler  may be scalable and may have a distributed architecture.","The crawler  may include a planner , page analyzer  and download agents . The crawler  may include multiple download agents  that are launched and working at the same time; typically, only one instance of planner  is working at a given time, however, additional copies may be provided. The planner  defines strategies for site visits and includes a planner database that contains information about tasks for crawling and their status, and a queue for crawling the tasks defined by the planner . The page analyzer  selects links of downloaded pages, and stores data about each site, the images on the site and their status in the crawling database .","The download agents  take tasks from the planner queue and download the images from the web pages. In one embodiment, the download agents  use an application programming interface (API) provided by an existing large media archive or specialized online service to download the images. The download agents  typically save additional meta-data about the images, such as the URL of the file, the URL of the containing page, the date\/time created, the date\/time downloaded, etc. The download agents  may also create and save a thumbnail of the image (e.g., about 128\u00d7128 pixels in size). After the indexing subsystem  completes processing of the images, the source files in the crawling database  are deleted .","The indexing sub-system  builds an index from the images in the crawling database . The indexing sub-system may be scalable (e.g., by adding additional servers) and may have a distributed architecture. The indexing sub-system  stores the indexed image files and may also include image thumbnails and search indexes. The indexing sub-system  includes an indexing engine  that selects images from the crawling database , saves the metadata and thumbnail of the image in an indexing database , indexes the image, optionally analyzes the image and deletes the original image from the crawling database .","The indexing engine  may include a representation builder , a primary metric builder  and a clustering engine . The representation builder  normalizes the original image, scales the image and transforms the image into a generic image format. The representation of the original image is typically about 128\u00d7128 pixels in size; it will be appreciated, however, that the representation may be less than or greater than 128\u00d7128 pixels in size.","The primary metric builder  indexes the original image by analyzing the image in accordance with one or more mathematical models. The analysis with the mathematical model(s) calculates several metrics that numerically define various aspects of the image, such as, for example, color, intensity, texture, shapes and the like. The metrics may be calculated using both the original image and the representation of the image, only the original image or only the representation of the image. Examples of the types of metrics that may define the image include morphology, graininess, vertical lines, horizontal lines, curves, color, intensity and the like. The algorithms for calculating the metrics include, for example, 2D color histogram algorithms, 4D color vector field algorithms, and so on.","The index file includes a plurality of metrics that define aspects of the image. In one embodiment, the index file includes any value or range of values between about 129 and 135 metrics. For example, the index file may include about 132 different metrics. It will be appreciated that the index file may include less than 129 metrics or more than 135 metrics.","Depending on the desired accuracy of the algorithm, the size of the metrics may be any value or range of values between about 1 and 128 bits. It will be appreciated, however, that the size of the metrics may be larger than 128 bits.","The calculated metrics are stored in an index file, which is stored in the indexing database. In one embodiment, the index file is about 1.3 kb in size. It will be appreciated that the index file may be less than 1.3 kb in size or greater than 1.3 kb. For example, the index file together with metadata and the representation of the image may be about 8-50 kb in size. Searching of the index files is significantly faster than existing image comparison algorithms.","The index file that includes the plurality of metrics can be clustered based on the type of clusters. For example, the index file may include a cluster of metrics that define the texture of the image, a cluster of metrics that define the intensity of the image; a cluster of metrics that define the color of the image; a cluster of metrics that define shapes in the image; a cluster of metrics that register a changed color palette (e.g., change from color image to black and white, or negative image); a cluster of metrics that register minor changes to image composition (e.g., change of point of view for same object or landscape, cropped images, etc); clusters of metrics that register a more generic image (e.g., if the original picture is a photo of a person standing in front of a landscape, a more generic image is the landscape without the person).","The images may also be analyzed to account for changes to the original image (e.g., flipping or rotating image). A metric for the changes to the original image may also be stored in the index file. Alternatively, the indexing subsystem may calculate the metrics for the image without the changes.","The indexing engine  may also recursively decompose the image into its components. Each of the components may then be analyzed and indexed in the same way as the image as whole (e.g., 132 metrics are calculated for each component of the image). The index file for the image components may be stored as part of the index file as the image (e.g., a cluster of metrics for each component of the image) or may be stored as separate image files.","When the indexing engine  analyzes digital videos, the indexing subsystem may analyze each frame of the video; however, it will be appreciated that selecting one or some of frames of the video for indexing may be sufficient for comparison. For example, the indexing engine  may select one out of every 50 frames to index or one out of every 100 frames, and so on.","The index files in the indexing database  may also be clustered by the clustering engine . The clustering engine  identifies image index files that are representative of similar images and clusters those index files together. In one embodiment, a formula is applied to the index files in the indexing database  that calculates a similarity score. Images that satisfy a threshold level of similarity are added to the same cluster. An exemplary formula for calculating similarity is described below with reference to . It will be appreciated that other methods for clustering the images may be used as known in the art.","The clustered index files may be stored in separate databases or in the same database. Each cluster is identified by a cluster value. The cluster value may be an index file representative of the cluster, a unique numerical cluster identifier, a range of index file values in the cluster, etc.","The search portal  receives search queries from users and provides search results to the users. The search portal  includes a search engine  that analyzes the input image, compares the input image to the images indexed in the indexing database , ranks the images and provides an output. In one embodiment, the output is a ranked sequence of similar images.","A user can provide the input image by, for example, uploading the image through a web form; providing a URL where the image is located; using a browser plug-in or widget that provides the user with an option to select any image in the browser and select a \u201cFind Similar\u201d function; using a system agent or computer widget that looks for specific images online (e.g., a widget that controls the use of intellectual property rights for a user-specified image); using a dedicated function on a third-party portal or online service that provides access to the search functionality of the system based on user-selected images on that portal, and the like. The user may also specify additional characteristics for search, such as color, image histogram, level of similarity, meta-tags, number of resulting images, and the like.","The query image is then analyzed to generate an index file for the query image using the indexing process described above. In one embodiment, the search portal  transmits the query image to the indexing engine  to generate the query image index file. Alternatively, the search portal  may generate the query image index file for the query image using the same analysis as the indexing engine .","The query image index file is then compared with the index files stored in the indexing database . For example, the indexing engine  or the search engine  may generate an SQL request of the indexing database . In embodiments in which the index files are clustered, a cluster to search is first identified and then the query image index file is compared only to the images in that cluster. In embodiments in which the index files are not clustered, the query image index file is compared to all of the index files in the indexing database . The query image index file is then compared with the index files using one or more mathematical models that generate a scalar value defining the level of similarity between the images, as described below with reference to . The images can then be sorted and\/or ranked using this value.","In one embodiment, the search portal  automatically generates a web page that lists the images by providing the thumbnail of the images, ranked according to the score that defines the level of similarity. For example, the image that has the highest level of similarity is presented at the top of the web page, followed by other similar images in descending order based on the score.","The web page is then provided to the user as search result. Users can select a thumbnail from the web page to link to the original source page of the image, or may continue searching to find images similar to those found in the search results. It will be appreciated that the search portal  may provide the search results in a variety of different manners. For example, the search portal  may link the user directly to the source page of the image that has the highest similarity score.",{"@attributes":{"id":"p-0098","num":"0097"},"figref":"FIG. 4","b":["400","400"]},"As described above, an image  is converted into an index image file , which is stored in the indexing database . The index image file  includes a plurality of image metrics . For example, the number of image metrics  in the image index file  may be any value or range of values between about 129 and 135 metrics. It will be appreciated that the number of metrics may be less than 129 metrics or greater than 135 metrics. The image metrics  define various aspects of the image numerically, such as, for example, color, intensity, texture, shapes and the like.","In one embodiment, the index image file  is a hash table. The image metrics  may be calculated from the original image or the representation of the image. The image metrics  in the index image file  may be clustered based on the type of metric. For example, the color metrics may be grouped together, the texture metrics may be grouped together and so on.","The image index file  may also include or may be stored with tags , a URL , metadata , a thumbnail  and the representation of the original image . The tags  are user-defined metadata that typically identify the subject of the image . For example, if the image is a photograph of a beach in Costa Rica, the tags may include one or more of beach, Costa Rica, vacation, Pacific Ocean, rainforest, and so on. The URL  identifies the webpage where the original image is located. The URL  may include two URLs, one identifying the webpage where the original image is located and another to the image itself. The metadata  includes additional information about the image , such as, for example, the camera used to take the picture, the date the picture, and the like. The thumbnail  is a smaller version of the image  and the representation of the original image  is a smaller version of the image  that has been adjusted to scale, image file type, and the like. The thumbnail  and representation of the original image  are typically both about 128\u00d7128 pixels in size.","The resulting image index file  is about 1.3 kb in size in one particular embodiment. It will be appreciated that the image index file  may be smaller than 1.3 kb or greater than 1.3 kb. For example, the image index file  may be about 1 kb-50 kb. Because the image index file  is small, the time to perform image search and comparison algorithms is significantly faster than existing image search algorithms.",{"@attributes":{"id":"p-0103","num":"0102"},"figref":"FIG. 5","b":["500","500"]},"An image  to be indexed is first divided into a plurality of cells . For example, the image  is divided into sixteen (16) cells, as shown in . It will be appreciated that the image may be divided into fewer than sixteen or more than sixteen cells.","A cellular image metric  is then calculated for each cell . For example, each image metric described above with reference to  is calculated for each cell  (e.g., each of the color metrics, each of the intensity metrics, each of the texture metrics, each of the shape metrics, etc.).",{"@attributes":{"id":"p-0106","num":"0105"},"figref":["FIG. 5","FIG. 5"],"b":["504","504"]},"The cellular image metrics  for each of the cells are then aligned into the overall image metric . For example, for the image  that is divided into sixteen cells , the image metric  includes sixteen cellular image metrics  that are aligned with one another.","The overall image metric  may then be converted into a binary number. For example, all of the numerical values in  may be aligned together to generate a single binary number.","The process described above and shown in  is then repeated to generate each of the metrics in the image index file (e.g., 132 metrics). It will be appreciated that in some embodiments, some of the metrics may be calculated for the image as a whole (as opposed to calculating cellular image metrics  and then generating the image metric ).","The process shown in  may also or alternatively be used to calculate a clustering metric. The clustering metric of each image would then be compared to identify similar images for clustering.",{"@attributes":{"id":"p-0111","num":"0110"},"figref":["FIG. 6","FIG. 6"],"b":["600","600","600"]},"Calculating similarity of images is generally done by comparing all of the image metrics for both pictures. Two images having identical metrics are said to be identical. When the metrics differ, the amount of variance indicates the degree of difference between the images. As noted above, each image metric  relates to a certain property of the images. According to an embodiment of the invention, each metric  is assigned a weighting factor (\u03b1) relating to its importance. The assignment may be static of dynamic. It may done by a user (e.g., an administrator), or calculated automatically using various functions. In the following description, an automatic function is provided to dynamically assign the weighting factor.","A genetic algorithm (GA)  is applied to a standard database (StDB)  to generate a weighting factor (\u03b1)  for each metric. The weighting factor (\u03b1)  is then used to calculate the similarity of the image using the following function :",{"@attributes":{"id":"p-0114","num":"0113"},"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mi":"f","mo":"=","mrow":{"munderover":{"mo":"\u2211","mrow":{"mi":"i","mo":"=","mn":"1"},"mn":"132"},"mo":"\u2062","mrow":{"msub":[{"mi":["\u03b1","i"]},{"mi":["D","i"]}],"mo":"\u2062"}}}}},"br":{},"sub":["i ","i ","i","i","i "],"b":["512","512","512","616","612"]},"In one embodiment, the function  results in a normalized scalar value that is between 0 and 1 for each image. Thus, for each input image , the function  calculates the similarity between the input image  to each image in the indexing database  to calculate a value . At least the image  corresponding to the highest value  is presented to the user. Typically, however, a list of images ranked according to the value  is presented to the user.",{"@attributes":{"id":"p-0116","num":"0115"},"figref":"FIG. 7","b":["700","700"]},"The process  begins by crawling websites to locate images (block ). For example, the crawler  of  may scan websites  for images, download the images and store the images and optionally metadata associated with the image in the crawling data store .","With reference back to , the process  continues by calculating image metrics for located images (block ) and storing the metrics with links to the images on websites (block ). For example, several metrics that define various aspects of the image, such as the color, intensity, texture, shapes and the like may be calculated and stored with a link (e.g., URL) to the webpage where the original image is located in a indexing data store (e.g., indexing data store  of ).","The process  continues by deleting the located images from the data store (block ). For example, the images stored in the crawling data store  are deleted.","Referring again to , the process  continues by calculating a clustering metric using the image metrics (block ) and clustering the images according to the calculated metric (block ). In one embodiment, the clustering metric is a scalar value that defines a similarity of the images within the cluster. For example, the similarity formula described above may be used to identify images that satisfy a threshold similarity level for that cluster. In another embodiment, the clustering metric is a range of values that correspond to the index files in the cluster, which are identified based on a similarity function. In another embodiment, the clustering metric is a representative index file for the index files in the cluster, which is identified based on a similarity function. In another embodiment, a unique clustering value is calculated using one or more (or all) of the metrics in the index file for each image.",{"@attributes":{"id":"p-0121","num":"0120"},"figref":"FIG. 8","b":["800","800"]},"The process  begins by locating a plurality of websites to locate digital images (block ). The process continues by storing the digital images in a database with a link to the website on which the digital image was located (block ). For example, the crawler  of  may scan websites  for images, download the images and store the images and optionally metadata associated with the image in the crawling data store .","The process  continues by calculating an image index file for each of the located images, the image index file representative of the located images (block ) and storing the image index file in the database (block ). The process  continues by deleting the digital images from the database when the image index file of that image is stored in the database (block ). For example, several metrics that define various aspects of the image, such as the color, intensity, texture, shapes and the like may be calculated and stored with a link (e.g., URL) to the webpage where the original image is located in a indexing data store (e.g., indexing data store  of ), and the original image is deleted from the crawling data store .",{"@attributes":{"id":"p-0124","num":"0123"},"figref":"FIG. 9","b":["900","900"]},"The search process  begins by receiving input (block ). In one embodiment, a user uploads the image through a web form. For example, if a user sees a painting that they like in a restaurant, the user can take a photo of the painting using their mobile phone, and upload the image to their computer and to the web form or directly to the web form to search for the painting. In another embodiment, the user can enter the URL where the image is located. In yet another embodiment, the user can use a browser plug-in or widget that allows the user to use a \u201cFind Similar\u201d function of the plug-in or widget to implement a search. Users can also use a system agent or computer widget that looks for specific images online (e.g., a widget that controls the use of intellectual property rights for a user-specified image). In addition, a third-party portal or online service can provides access to the search functionality of the system for images on that portal. The user may also specify additional characteristics for search, such as color, image histogram, level of similarity, meta-tags, number of resulting images, and the like.","The process  continues by calculating a metric for the input (block ). For example, the input image can be analyzed to generate a query image index file and a cluster identifier as described above. The process  continues by comparing the input metric with stored cluster metrics (block ) and identifying a cluster that matches the image (block ). For example, the image index file or cluster identifier may be compared with the cluster identifier for each cluster using a mathematical formula, such as described above with reference to . The cluster that most closely corresponds to the image index file is selected for additional comparison.","The process  continues by comparing the input metric with the stored image metrics in the matching cluster (block ). The index file of the input image is then compared with the index files of each image in the index data store. A similarity score may be generated for each image using, for example, the formula described above with reference to . The process  continues by ranking stored metrics and generating search results (block ). For example, a web page that includes a list of images with thumbnails of the images may be generated that lists the images with the image corresponding to the highest similarity score at the top and lists additional images in descending order corresponding to the similarity score. The process  continues by transmitting search results corresponding to the receive input (block ). For example, the web page may be presented to the user.",{"@attributes":{"id":"p-0128","num":"0127"},"figref":"FIG. 10","b":["1000","1000"]},"The search process  begins by providing a structured database having a plurality of clusters, each cluster having a plurality of image index files representative of digital images, and each cluster having a cluster identifier (block ). For example, the indexing data store  of  and indexing database  of  that is generated according to the processes of  or  is provided for searching.","The process  continues by receiving a search query, the search query being a digital image (block ). The process  continues by calculating the image index file of the search query (block ). For example, the input image can be analyzed to generate a query image index file and a cluster identifier as described above.","The process  continues by comparing the image index file of the search query with each cluster identifier to identify a cluster to search (block ) and comparing the image index file of the search query with each of the plurality of image index files in the cluster identified to search (block ). A similarity score may be generated for each cluster using, for example, the formula described above with reference to . The process  continues by determining a similarity of the search query with the images in the cluster (block ). A similarity score may generated for each image using, for example, the formula described above with reference to .","Embodiments of the invention can be used to deliver advertisements by comparing advertisement images with other images accessed or searched by a user. This allows advertisers the ability to show their marketing message on a user's search result page that is relevant to content of that the user was searching. In addition, media assets that are similar to one provided by user can be located, and concepts that describe the located media assets can be determined. As a result, advertising that is the most relevant to the media asset provided by user can be identified. This allows advertisers the ability to show their marketing message on the page shown to user that is relevant to the content of the media asset that user is looking for. For example, if the user searched for an image of a place of interest, a travel offer for that destination or a destination having similar characteristics can be offered to the user. In another example, if the user is searching sites or information that has a \u201cChristmas\u201d theme, the advertisements for Coca-cola may be delivered to the user.",{"@attributes":{"id":"p-0133","num":"0132"},"figref":["FIG. 11","FIG. 11","FIG. 11"],"b":["1100","1100","200","204","208","212","200","216","220","204","224","228","232","1104","1104","1108","1112","1108","1112"]},"Advertisers upload their media files to the dedicated advertisement data store . The system  compares user images with those in the advertisement data store  and builds a list of most relevant offerings. This list is submitted to the third party advertisement management system  for processing in real time to deliver targeted advertising to the user.","In another embodiment, advertisers can provide concepts for their marketing message, which are stored in the advertisement data store . The system  can then find concepts based on the user media assets in the advertisement database  and build a list of the most relevant offerings. The list is submitted to the advertisement management system  for processing in real time to deliver targeted advertising.",{"@attributes":{"id":"p-0136","num":"0135"},"figref":"FIG. 12","b":["1200","1200","1204","1216","1220","1224","1228","1232"]},"As shown in , the method includes the user providing am image as a query to the search engine  from the search portal . The search engine  analyzes the input, compares and ranks the input and provides output as described above using the indexing database . The advertisement targeting module  also finds similar advertisements using the visual advertisements database  and the same methods described above and builds a list of advertisements. The advertisement targeting module  provides the list of advertisements to the third party advertisement management system  which delivers an appropriate targeted advertisement message for the search result page . The search result page  includes the search results identified by the search engine  and the advertisements provided by the third party advertisement management system .",{"@attributes":{"id":"p-0138","num":"0137"},"figref":"FIG. 13","b":["1300","1300"]},"The advertising process  begins by maintaining an index of image index files, each image index file representative of a digital image of an advertisement (block ).","The advertising process  continues by receiving an image query, the image query comprising a digital image (block ) and calculating an image index file representative of the digital image (block ).","The advertising process  continues by comparing the image index file of the digital image with the image index files representative of the advertisements (block ) and transmitting at least one advertisement based on the comparison (block ).",{"@attributes":{"id":"p-0142","num":"0141"},"figref":"FIG. 14","b":["1400","1400"]},"The advertising process  begins by maintaining an index of image descriptors, each image descriptor representative of a digital image of an advertisement (block ).","The advertising process  continues by receiving user selection of a digital image (block ) and calculating an image descriptor representative of the digital image (block ).","The advertising process  continues by comparing the image descriptor representative of the digital image with the image descriptors representative of the digital advertisements (block ) and transmitting at least a link to a webpage based on the comparison (block ).",{"@attributes":{"id":"p-0146","num":"0145"},"figref":["FIG. 15","FIG. 15","FIG. 1"],"b":["1500","1500","104","152"]},"The exemplary computer system  includes a processor  (e.g., a central processing unit (CPU), a graphics processing unit (GPU) or both), a main memory  (e.g., read only memory (ROM), flash memory, dynamic random access memory (DRAM) such as synchronous DRAM (SDRAM) or Rambus DRAM (RDRAM), etc.) and a static memory  (e.g., flash memory, static random access memory (SRAM), etc.), which communicate with each other via a bus .","The computer system  may further include a video display unit  (e.g., a liquid crystal display (LCD) or a cathode ray tube (CRT)). The computer system  also includes an alphanumeric input device  (e.g., a keyboard), a cursor control device  (e.g., a mouse), a disk drive unit , a signal generation device  (e.g., a speaker) and a network interface device .","The disk drive unit  includes a machine-readable medium  on which is stored one or more sets of instructions (e.g., software ) embodying any one or more of the methodologies or functions described herein. The software  may also reside, completely or at least partially, within the main memory  and\/or within the processor  during execution of the software  by the computer system .","The software  may further be transmitted or received over a network  via the network interface device .","While the machine-readable medium  is shown in an exemplary embodiment to be a single medium, the term \u201cmachine-readable medium\u201d should be taken to include a single medium or multiple media (e.g., a centralized or distributed database, and\/or associated caches and servers) that store the one or more sets of instructions. The term \u201cmachine-readable medium\u201d shall also be taken to include any medium that is capable of storing, encoding or carrying a set of instructions for execution by the machine and that cause the machine to perform any one or more of the methodologies of the present invention. The term \u201cmachine-readable medium\u201d shall accordingly be taken to include, but not be limited to, solid-state memories, optical and magnetic media, and carrier wave signals.","Although the above process has been described with respect to a genetic algorithm, it will be appreciated that other optimization methods or combinations of optimization methods may be used to define the similarity between images and\/or cluster images. Other exemplary optimization methods include hill climbing algorithms, maximizing mean fitness algorithms, ant algorithms, bacteriologic algorithms, cross-entropy algorithms, cultural algorithms, evolution algorithms, grouping genetic algorithms, harmony search algorithms, memetic algorithms, simulated annealing algorithms, stochastic algorithms and the like.","In the detailed description above numerous specific details were set forth in order to provide a thorough understanding of the present invention. However, it will be apparent to one skilled in the art that the present invention may be practiced without these specific details. In other instances, well-known structures and devices were shown in block diagram form, rather than in detail, in order to avoid obscuring the present invention.","Reference in the specification to \u201cone embodiment\u201d or \u201can embodiment\u201d means that a particular feature, structure, or characteristic described in connection with the embodiment is included in at least one embodiment of the invention. The appearances of the phrase \u201cin one embodiment\u201d in various places in the specification are not necessarily all referring to the same embodiment.","Some portions of the detailed description are presented in terms of algorithms and symbolic representations of operations on data bits within a computer memory. These algorithmic descriptions and representations are the means used by those skilled in the data processing arts to most effectively convey the substance of their work to others skilled in the art. An algorithm is here, and generally, conceived to be a self-consistent sequence of steps leading to a desired result. The steps are those requiring physical manipulations of physical quantities. Usually, though not necessarily, these quantities take the form of electrical or magnetic signals capable of being stored, transferred, combined, compared, and otherwise manipulated. It has proven convenient at times, principally for reasons of common usage, to refer to these signals as bits, values, elements, symbols, characters, terms, numbers, or the like.","It should be borne in mind, however, that all of these and similar terms are to be associated with the appropriate physical quantities and are merely convenient labels applied to these quantities. Unless specifically stated otherwise as apparent from the following discussion, it is appreciated that throughout the description, discussions utilizing terms such as \u201cprocessing\u201d or \u201ccomputing\u201d or \u201ccalculating\u201d or \u201cdetermining\u201d or \u201cdisplaying\u201d or the like, refer to the action and processes of a computer system, or similar electronic computing device, that manipulates and transforms data represented as physical (electronic) quantities within the computer system's registers and memories into other data similarly represented as physical quantities within the computer system memories or registers or other such information storage, transmission or display devices.","The present invention also relates to an apparatus for performing the operations herein. This apparatus may be specially constructed for the required purposes, or it may comprise a general-purpose computer selectively activated or reconfigured by a computer program stored in the computer. Such a computer program may be stored in a computer readable storage medium, such as, but is not limited to, any type of disk including floppy disks, optical disks, compact disc read only memories (CD-ROMs), and magnetic-optical disks, read-only memories (ROMs), random access memories (RAMs), Erasable Programmable Read-Only Memories (EPROMs), Electrically Erasable Programmable Read-Only Memories (EEPROMs), magnetic or optical cards, or any type of media suitable for storing electronic instructions, and each coupled to a computer system bus.","The algorithms and displays presented herein are not inherently related to any particular computer or other apparatus. Various general-purpose systems may be used with programs in accordance with the teachings herein, or it may prove convenient to construct more specialized apparatus to perform the required method steps. The required structure for a variety of these systems will appear from the description below. In addition, the present invention is not described with reference to any particular programming language. It will be appreciated that a variety of programming languages may be used to implement the teachings of the invention as described herein. The instructions of the programming language(s) may be executed by one or more processing devices (e.g., processors, controllers, control processing units (CPUs).","The present invention has been described in relation to particular examples, which are intended in all respects to be illustrative rather than restrictive. Those skilled in the art will appreciate that many different combinations of hardware, software, and firmware will be suitable for practicing the present invention. Moreover, other implementations of the invention will be apparent to those skilled in the art from consideration of the specification and practice of the invention disclosed herein. Various aspects and\/or components of the described embodiments may be used singly or in any combination. It is intended that the specification and examples be considered as exemplary only, with a true scope and spirit of the invention being indicated by the following claims."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The accompanying drawings, which are incorporated in and constitute a part of this specification, exemplify the embodiments of the present invention and, together with the description, serve to explain and illustrate principles of the invention. The drawings are intended to illustrate major features of the exemplary embodiments in a diagrammatic manner. The drawings are not intended to depict every feature of actual embodiments nor relative dimensions of the depicted elements, and are not drawn to scale.",{"@attributes":{"id":"p-0047","num":"0046"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0048","num":"0047"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0049","num":"0048"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0050","num":"0049"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0051","num":"0050"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0052","num":"0051"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0053","num":"0052"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0054","num":"0053"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0055","num":"0054"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0056","num":"0055"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0057","num":"0056"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0058","num":"0057"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0059","num":"0058"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0060","num":"0059"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0061","num":"0060"},"figref":"FIG. 15"}]},"DETDESC":[{},{}]}
