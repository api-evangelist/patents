---
title: Software extensions to a high level description language simulator to provide infrastructure for analog, mixed-signal, RF modeling and verification
abstract: An extension to a simulator () that allows the user to specify real numbers, voltages, and currents () on ports of an electrical net is presented. The computer using the analog wire functionality routines (), the routines for determining nets (), the net manager (), and the pin manager () resolves unspecified values on said electrical nets. The user may specify at least one value on said port and may specify whether said port is driven. The extension includes additional math functions ().
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08666720&OS=08666720&RS=08666720
owner: 
number: 08666720
owner_city: 
owner_country: 
publication_date: 20100802
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","FEDERALLY SPONSORED RESEARCH","SEQUENCE LISTING OR PROGRAM","FIELD OF INVENTION","BACKGROUND","ADVANTAGES","SUMMARY","REFERENCE NUMERALS","DETAILED DESCRIPTION","First Embodiment","Alternative Embodiments","CONCLUSION, RAMIFICATIONS, AND SCOPE"],"p":["This application claims the priority of U.S. Provisional Patent Application No. 61\/231,281 filed on Aug. 4, 2009 by the present inventors, which is incorporated by reference herein.","Not Applicable","Not Applicable","This invention extends a high level description language so that single or multi-channeled real values, electrical signals, or a combination can be passed on model ports. It also adds other capabilities to facilitate analog, mixed-signal, RF modeling such as extending the language to provide math functions suitable for writing these models.","This invention extends a high level description language so that single or multi-channeled real values, electrical signals, or a combination may be passed on model ports. In this patent application, this capability is referred to as analog wires. The term, dgWires, is synonymous with analog wires. The invention also adds other capabilities to facilitate analog, mixed-signal, radio-frequency (RF) modeling such as extending the language to provide math functions suitable for writing these models. The invention will typically be used by an engineer to assist in the design of an electrical system such as an integrated circuit or system of integrated circuits and electrical components on a printed circuit board.","At the core of an analog, mixed-signal, or RF design are blocks or subcomponents of the design that communicate by transmitting information on wires from one block to another. Many languages are available for modeling and writing regression tests. The two languages most suited to modeling analog are Verilog-AMS and VHDL-AMS. Simulators that can handle these languages require both a digital event-driven simulation engine and an analog or circuit ordinary differential equation solver engine. The latter is generally known as a SPICE engine or analog simulator. A SPICE engine requires solving a network of simultaneous equations. Simulators that have both an event-driven simulation engine and SPICE engine or generally known as AMS simulators. There are two primary disadvantages when using an AMS simulator over only a pure digital event-driven simulator. The first disadvantage is simulation speed. A SPICE engine typically runs slower than a digital event-driven simulator. As a result, when simulating a design, the combination of the two simulators runs slower than the digital event-driven simulator. The second disadvantage is cost. Because both simulation technologies are required for an AMS simulator, vendors of simulators charge a premium for the AMS simulator. Because of these disadvantages, analog design and verification engineers have attempted to only apply digital event-driven simulators to model analog, mixed-signal, and RF designs. However, because the digital event-driven simulators were not intended to model analog designs, there are limitations to what may be done. Specifically, one of the most prevalent modeling languages for digital design is Verilog. A key stumbling block to Verilog is that continuous-valued signals, e.g. real numbers, cannot be passed from a design block (module) to another. U.S. Pat. No. 7,260,792 to Chandrashekar L. Chetput, Ramesh S. Mayiladuthurai, and Prasenjit Biswas (2007) and U.S. Pat. No. 7,251,795 to Prasenjit Biswas, Ramesh S. Mayiladuthurai, Chandrashekar L. Chetput, and Abhijeet Kolpekwar (2007) describe methods for passing signals in a mixed-language, mixed-signal design where both a digital event-driven simulation engine and a SPICE engine is required.","To work around this problem in Verilog, engineers have attempted to develop methods by which to pass real numbers between blocks. Initial attempts focused on staying within the Verilog language. They include converting a real number to a 64 bit bus using the $realtobits and $bitstoreal command. This has the disadvantage that it changes the interface of the block from 1 wire to 64 wires. This is usually unacceptable. Another method is to use out of module references to real variables inside the block. This has the disadvantage that one has to know the name of the sender block in order to be able to access the information that is being transmitted. The name of the block is usually not known by adjacent blocks and thus, this is also not workable as a solution. Another method is to convert the 64 bits into a serial stream of data transmitted across the port. This has the disadvantage in that it may slow down the simulation and there is coding overhead to set up the transmitters and receivers to code and decode the data. Similar to this is to use pulse width modulation techniques to indicate the value of the real variable. This again has a disadvantage of requiring a coder and decoder. None of these solutions have been satisfactory as designers and verification engineers sought other solutions. The next set of solutions look toward different languages. VHDL allows the passing of real variables between blocks. The disadvantage of using VHDL is that Verilog is a much more popular language. As a result, it is difficult to find engineers who have the knowledge to program in VHDL and companies are reluctant to convert all of their models to VHDL fearing that their models will be forever incompatible with the more popular Verilog language. Another choice is to use Verilog-AMS, but not write models in such a way that use the SPICE simulator but take advantage of a \u201cwreal\u201d port type which is a wire which carries a real value. This still has the cost disadvantage. The \u201cwreal\u201d port type also does not have all of the capabilities required for analog modeling. Finally, a newer language is SystemVerilog which allows for real valued ports. The disadvantage here is that it is a newer language, and so fewer engineers know how to use it, but more significantly, at present it is not compatible with either of the AMS languages as there are no AMS extensions to SystemVerilog. The significance of this limitation is apparent when it comes time to verify that an analog model, which is generally manually generated, matches the corresponding circuit. The model has to be validated by a regression test that may simulate and compare against the transistor level implementation. Thus, the language used by the regression test has to be compatible with the modeling language. The SystemVerilog also does not have all of the capabilities required for analog modeling.","Besides passing a single real value between one block to another, there are other capabilities required for analog modeling. These requirements include the need to pass more than one real number across a signal a wire. Another capability is the need to turn on and off the pin or port on the block to support analog buses. There is a need to show the state of the connecting wire, whether or not there is contention or whether or not there is a signal driving the wire. Finally, there is the need to represent some electrical sources, such as voltage and current sources. It is very common to need to sum current sources, or check voltage source values. Seeing the loading effects are also important. There are efficiency concerns in implementing any solution that provides this capability as simulation speed is one of the reasons for using a digital event-driven language. Finally, when adding this capability, they have to be added in such a way that they are compatible with the key commercial simulators that designers and verification engineers are using. Often, a company will use more than one. Thus, models that are created must work in all of them and behave the same. It may also be the case that these event-driven models need to be connected to a model written in Verilog-AMS. One feature of the Verilog-AMS language is that connect modules may be written to connect electrical signals from the Verilog-AMS languages to logic signals in Verilog. For these analog wires, a requirement is that real values may be connected to Verilog-AMS using a connect module, so that analog signals may pass from an event-driven model to an analog simulator.","To support analog modeling, other capabilities are required, the Verilog language is limited in the math function it provides. Extensions need to be provided for these, and any capability added to the language needs to include some debugging aids to help debug issues as the designers and verification engineers write the models.","Having exhausted all of the standard languages, an alternative is to extend the language to provide the capabilities required. In US Patent Application Publication 2002\/0049576 by Steven J. Meyer (published 2002), a system is described to extend the capabilities of an event-driven simulator, however, an analog simulator is still required. \u201cFunctional Verification in the Presence of Linear Analog Circuits\u201d by Thomas J. Sheffler presented at the Design and Verification Conference in 2008, and \u201cDesign of a Switch-Level Analog Model for Verilog\u201d by Thomas J. Sheffler presented at the IEEE International Behavioral Modeling and Simulation Conference in 2008 also describe extensions to an event-driven simulator to facilitate analog modeling. These extensions also require that a simultaneous set of equations be solved. Finally, \u201cSending Analog Values Along Digital Wires\u201d by Chris S Jones, Jeff McNeal, and Ross Segelken presented at the Design and Verification Conference in 2007 describes a Verilog extension to pass analog values between Verilog models, but in this solution, important capabilities such as the ability to indicate whether or not a port is driven are not provided.","This invention gives the capabilities required to model analog, mixed-signal, and RF designs while simulating a design at the higher speeds and lower cost of an event-driven simulator when compared to an AMS simulator. This invention also eliminates the disadvantages when staying within the Verilog language while allowing the user to continue to use the more widely known Verilog language. Finally, additional user knowledge is typically required when using the SPICE simulator within the AMS simulator. Since the SPICE simulator is not present, this knowledge is not required, and thus, makes analog circuit modeling accessible to a greater number of engineers.","In accordance with one embodiment this invention provides a method for simulating a design of specifying at least one real value on at least one port of a network in at least one model of a design, specifying whether the port is driven, resolving at least one unspecified value in at least one model, and utilizing an extension to an event-driven simulator to enable this capability. The ports may be configured to be electrical. The electrical ports may be either current or voltage sources. On any port, there may be a plurality of channels. Each channel can be individually configured to take a real number, to be a voltage source, or be a current source.",{"@attributes":{"id":"p-0034","num":"0000"},"ul":{"@attributes":{"id":"ul0001","list-style":"none"},"li":[{"@attributes":{"id":"ul0001-0001","num":"0033"},"b":"101"},{"@attributes":{"id":"ul0001-0002","num":"0034"},"b":"102"},{"@attributes":{"id":"ul0001-0003","num":"0035"},"b":"103"},{"@attributes":{"id":"ul0001-0004","num":"0036"},"b":"104"},{"@attributes":{"id":"ul0001-0005","num":"0037"},"b":"105"},{"@attributes":{"id":"ul0001-0006","num":"0038"},"b":"106"},{"@attributes":{"id":"ul0001-0007","num":"0039"},"b":["110","101"]},{"@attributes":{"id":"ul0001-0008","num":"0040"},"b":["111","105"]},{"@attributes":{"id":"ul0001-0009","num":"0041"},"b":["120","102"]},{"@attributes":{"id":"ul0001-0010","num":"0042"},"b":["130","103"]},{"@attributes":{"id":"ul0001-0011","num":"0043"},"b":"201"},{"@attributes":{"id":"ul0001-0012","num":"0044"},"b":"202"},{"@attributes":{"id":"ul0001-0013","num":"0045"},"b":"203"},{"@attributes":{"id":"ul0001-0014","num":"0046"},"b":"204"},{"@attributes":{"id":"ul0001-0015","num":"0047"},"b":"205"},{"@attributes":{"id":"ul0001-0016","num":"0048"},"b":"210"},{"@attributes":{"id":"ul0001-0017","num":"0049"},"b":"211"},{"@attributes":{"id":"ul0001-0018","num":"0050"},"b":"212"},{"@attributes":{"id":"ul0001-0019","num":"0051"},"b":"213"},{"@attributes":{"id":"ul0001-0020","num":"0052"},"b":"301"},{"@attributes":{"id":"ul0001-0021","num":"0053"},"b":"302"},{"@attributes":{"id":"ul0001-0022","num":"0054"},"b":"303"},{"@attributes":{"id":"ul0001-0023","num":"0055"},"b":"304"},{"@attributes":{"id":"ul0001-0024","num":"0056"},"b":["305","302"]},{"@attributes":{"id":"ul0001-0025","num":"0057"},"b":["306","303"]},{"@attributes":{"id":"ul0001-0026","num":"0058"},"b":"307"},{"@attributes":{"id":"ul0001-0027","num":"0059"},"b":["308","304"]},{"@attributes":{"id":"ul0001-0028","num":"0060"},"b":["310","301"]},{"@attributes":{"id":"ul0001-0029","num":"0061"},"b":["311","307"]},{"@attributes":{"id":"ul0001-0030","num":"0062"},"b":["401","302"]},{"@attributes":{"id":"ul0001-0031","num":"0063"},"b":["410","303"]},{"@attributes":{"id":"ul0001-0032","num":"0064"},"b":"411"},{"@attributes":{"id":"ul0001-0033","num":"0065"},"b":"501"},{"@attributes":{"id":"ul0001-0034","num":"0066"},"b":"502"},{"@attributes":{"id":"ul0001-0035","num":"0067"},"b":"503"},{"@attributes":{"id":"ul0001-0036","num":"0068"},"b":"504"},{"@attributes":{"id":"ul0001-0037","num":"0069"},"b":"510"},{"@attributes":{"id":"ul0001-0038","num":"0070"},"b":"511"},{"@attributes":{"id":"ul0001-0039","num":"0071"},"b":"512"},{"@attributes":{"id":"ul0001-0040","num":"0072"},"b":["601","501"]},{"@attributes":{"id":"ul0001-0041","num":"0073"},"b":"602"},{"@attributes":{"id":"ul0001-0042","num":"0074"},"b":"603"},{"@attributes":{"id":"ul0001-0043","num":"0075"},"b":"604"},{"@attributes":{"id":"ul0001-0044","num":"0076"},"b":"605"},{"@attributes":{"id":"ul0001-0045","num":"0077"},"b":"606"},{"@attributes":{"id":"ul0001-0046","num":"0078"},"b":["610","510"]},{"@attributes":{"id":"ul0001-0047","num":"0079"},"b":"611"},{"@attributes":{"id":"ul0001-0048","num":"0080"},"b":"612"},{"@attributes":{"id":"ul0001-0049","num":"0081"},"b":"613"},{"@attributes":{"id":"ul0001-0050","num":"0082"},"b":"614"},{"@attributes":{"id":"ul0001-0051","num":"0083"},"b":"615"},{"@attributes":{"id":"ul0001-0052","num":"0084"},"b":"801"},{"@attributes":{"id":"ul0001-0053","num":"0085"},"b":"802"},{"@attributes":{"id":"ul0001-0054","num":"0086"},"b":"803"},{"@attributes":{"id":"ul0001-0055","num":"0087"},"b":"804"},{"@attributes":{"id":"ul0001-0056","num":"0088"},"b":"805"},{"@attributes":{"id":"ul0001-0057","num":"0089"},"b":"806"},{"@attributes":{"id":"ul0001-0058","num":"0090"},"b":"807"},{"@attributes":{"id":"ul0001-0059","num":"0091"},"b":"808"},{"@attributes":{"id":"ul0001-0060","num":"0092"},"b":"809"},{"@attributes":{"id":"ul0001-0061","num":"0093"},"b":"901"},{"@attributes":{"id":"ul0001-0062","num":"0094"},"b":"902"},{"@attributes":{"id":"ul0001-0063","num":"0095"},"b":"903"},{"@attributes":{"id":"ul0001-0064","num":"0096"},"b":"904"},{"@attributes":{"id":"ul0001-0065","num":"0097"},"b":"905"},{"@attributes":{"id":"ul0001-0066","num":"0098"},"b":"906"},{"@attributes":{"id":"ul0001-0067","num":"0099"},"b":"1001"},{"@attributes":{"id":"ul0001-0068","num":"0100"},"b":"1002"},{"@attributes":{"id":"ul0001-0069","num":"0101"},"b":"1003"},{"@attributes":{"id":"ul0001-0070","num":"0102"},"b":"1004"},{"@attributes":{"id":"ul0001-0071","num":"0103"},"b":"1005"},{"@attributes":{"id":"ul0001-0072","num":"0104"},"b":"1006"},{"@attributes":{"id":"ul0001-0073","num":"0105"},"b":"1101"},{"@attributes":{"id":"ul0001-0074","num":"0106"},"b":"1102"},{"@attributes":{"id":"ul0001-0075","num":"0107"},"b":"1103"},{"@attributes":{"id":"ul0001-0076","num":"0108"},"b":"1104"},{"@attributes":{"id":"ul0001-0077","num":"0109"},"b":"1201"},{"@attributes":{"id":"ul0001-0078","num":"0110"},"b":"1202"},{"@attributes":{"id":"ul0001-0079","num":"0111"},"b":"1203"},{"@attributes":{"id":"ul0001-0080","num":"0112"},"b":"1204"},{"@attributes":{"id":"ul0001-0081","num":"0113"},"b":"1205"},{"@attributes":{"id":"ul0001-0082","num":"0114"},"b":"1206"},{"@attributes":{"id":"ul0001-0083","num":"0115"},"b":"1301"},{"@attributes":{"id":"ul0001-0084","num":"0116"},"b":"1302"},{"@attributes":{"id":"ul0001-0085","num":"0117"},"b":"1303"},{"@attributes":{"id":"ul0001-0086","num":"0118"},"b":"1304"},{"@attributes":{"id":"ul0001-0087","num":"0119"},"b":"1305"},{"@attributes":{"id":"ul0001-0088","num":"0120"},"b":"1306"},{"@attributes":{"id":"ul0001-0089","num":"0121"},"b":"1401"},{"@attributes":{"id":"ul0001-0090","num":"0122"},"b":"1402"},{"@attributes":{"id":"ul0001-0091","num":"0123"},"b":"1403"},{"@attributes":{"id":"ul0001-0092","num":"0124"},"b":"1404"},{"@attributes":{"id":"ul0001-0093","num":"0125"},"b":"1405"},{"@attributes":{"id":"ul0001-0094","num":"0126"},"b":"1406"},{"@attributes":{"id":"ul0001-0095","num":"0127"},"b":"1407"},{"@attributes":{"id":"ul0001-0096","num":"0128"},"b":"1408"},{"@attributes":{"id":"ul0001-0097","num":"0129"},"b":"1409"},{"@attributes":{"id":"ul0001-0098","num":"0130"},"b":"1410"},{"@attributes":{"id":"ul0001-0099","num":"0131"},"b":"1411"},{"@attributes":{"id":"ul0001-0100","num":"0132"},"b":"1412"},{"@attributes":{"id":"ul0001-0101","num":"0133"},"b":"1501"},{"@attributes":{"id":"ul0001-0102","num":"0134"},"b":"1502"},{"@attributes":{"id":"ul0001-0103","num":"0135"},"b":"1503"},{"@attributes":{"id":"ul0001-0104","num":"0136"},"b":"1504"},{"@attributes":{"id":"ul0001-0105","num":"0137"},"b":"1505"},{"@attributes":{"id":"ul0001-0106","num":"0138"},"b":"1506"},{"@attributes":{"id":"ul0001-0107","num":"0139"},"b":"1601"},{"@attributes":{"id":"ul0001-0108","num":"0140"},"b":"1602"},{"@attributes":{"id":"ul0001-0109","num":"0141"},"b":"1603"},{"@attributes":{"id":"ul0001-0110","num":"0142"},"b":"1604"},{"@attributes":{"id":"ul0001-0111","num":"0143"},"b":"1605"},{"@attributes":{"id":"ul0001-0112","num":"0144"},"b":"1606"},{"@attributes":{"id":"ul0001-0113","num":"0145"},"b":"1607"},{"@attributes":{"id":"ul0001-0114","num":"0146"},"b":"1608"},{"@attributes":{"id":"ul0001-0115","num":"0147"},"b":"1609"},{"@attributes":{"id":"ul0001-0116","num":"0148"},"b":"1610"},{"@attributes":{"id":"ul0001-0117","num":"0149"},"b":"1611"},{"@attributes":{"id":"ul0001-0118","num":"0150"},"b":"1701"},{"@attributes":{"id":"ul0001-0119","num":"0151"},"b":"1702"},{"@attributes":{"id":"ul0001-0120","num":"0152"},"b":"1703"},{"@attributes":{"id":"ul0001-0121","num":"0153"},"b":"1704"},{"@attributes":{"id":"ul0001-0122","num":"0154"},"b":"1705"},{"@attributes":{"id":"ul0001-0123","num":"0155"},"b":"1706"},{"@attributes":{"id":"ul0001-0124","num":"0156"},"b":"1707"},{"@attributes":{"id":"ul0001-0125","num":"0157"},"b":"1801"},{"@attributes":{"id":"ul0001-0126","num":"0158"},"b":"1802"},{"@attributes":{"id":"ul0001-0127","num":"0159"},"b":"1803"},{"@attributes":{"id":"ul0001-0128","num":"0160"},"b":"1804"},{"@attributes":{"id":"ul0001-0129","num":"0161"},"b":"1810"},{"@attributes":{"id":"ul0001-0130","num":"0162"},"b":"1811"},{"@attributes":{"id":"ul0001-0131","num":"0163"},"b":"1812"},{"@attributes":{"id":"ul0001-0132","num":"0164"},"b":"1820"},{"@attributes":{"id":"ul0001-0133","num":"0165"},"b":"1821"},{"@attributes":{"id":"ul0001-0134","num":"0166"},"b":"1822"},{"@attributes":{"id":"ul0001-0135","num":"0167"},"b":"1901"},{"@attributes":{"id":"ul0001-0136","num":"0168"},"b":"1902"},{"@attributes":{"id":"ul0001-0137","num":"0169"},"b":"2001"},{"@attributes":{"id":"ul0001-0138","num":"0170"},"b":"2002"},{"@attributes":{"id":"ul0001-0139","num":"0171"},"b":"2003"}]}},"The software extensions to a high level description language simulator to provide the infrastructure for analog, mixed-signal, RF modeling, and verification are implemented by extending an event-driven simulator. The components of one embodiment that make up this extension  is shown in . The components are pin manager routines , net manager routines , routines for determining nets , routines to provide the analog wire functionality , general math routines , routines for real variable assignments , analog wire specific interface to the simulator , and the general interface to the simulator . In this embodiment, the extension is in the form of a library that is linked into a simulator at run time utilizing the VPI and PLI 1.0 application programming interfaces to a Verilog simulator.","The pin manager  shown in  manages all pin specific information. The pin manager  has data specific to the pin , data specific to each of the channels , pin creation routines , pin deletion routines , routines to set and get the value of pins and channels , and routines to query information about the pins and channels . The pin data  includes the name of the pin, the list of channels on the pin, the drive state of the pin, the net to which the pin is attached, to what the digital port has been forced, and some housekeeping data. The drive state refers to whether or not the pin is driving or not. The force state may be a binary value of \u201c1\u201d, \u201c0\u201d, \u201cX\u201d, or \u201cZ\u201d. The channel data  includes the value to which that pin and channel are set, the drive state for that particular channel, the drive strength of the channel, and a list of properties associated with that channel. The value of the pin and channel include a numeric value, a voltage value and an electrical current value. The numeric value may be an integer, real number, or equivalent representation that can be translated into an integer or real number. The drive state includes whether or not the channel is off or on. The strength setting includes a value of resistance for a voltage source and a conductance for a current source. The list of properties includes the channel type. The available channel types includes driving a numeric value, modeling a voltage source, and modeling a current source.","The net manager  shown in  manages all net specific information. The net manager  has data specific to the net , state data specific to the channel on the net , net creation routines , net deletion routines , routines to add and remove pins from a net , and routines to access the channel state . The net data  includes the name of the net, a list of pins on the net, a flag indicating whether or not the net is associated with a port on a connect module, a list of channel states, to what the digital net has been forced, and some housekeeping data. The channel state data  includes specific state information for that channel, information on the number of drivers driving the channel, the resolved value of the channel, and electrical information. The state information includes topological data on the net such as whether or not all of the pins on the net are electrical, and whether or not the net is under contention. The resolved value may include being a numeric value or a voltage. The electrical information may include the number of ideal voltage sources on the net, the number of ideal current sources on the net, the total conductance on the net, the sum of the voltages sources divided by resistance, the sum of the current sources, and the sum of the Thevinin equivalent current sources.","The routines for real variable assignments  shown in  handle the situation where the user of the library wants to assign a real variable to track one of the values that may be set or get on the analog wire. These routines for real variable assignments  include routines to create the assignment , routines to call the get and set routines  found in the analog functionality routines , routines to register callbacks to the simulator , and routines to update the real variables tracking the values .","The routines for determining the nets  shown in  are used to discern what the complete net of the ports given a port on that net. The main routine is the traverse net routine . Components used by the traverse net routine  include the traverse net up routine , the traverse net down routines , the net top finder , and the net name handlers . A utility routine found within the routines for determining nets  is the environment variable handlers . The environment variable handlers allow the user to this extension to specify different options when handling net traversal and certain behavior of the analog wires.","The main analog wire functionality routines  shown in  handle the core functionality of the analog wires. These routines include user input parsers , routines to set and get data in the pin and net managers , connect module handlers , port forcing routines , current and voltage calculators , and pin checking routines .","The analog wire specific interface routines  shown in , handle analog specific commands from the extensions within the high level description language written by the user, and interfaces to the event-driven simulator. The user interfaces include the interface to set port and channel values , the interface to get port and channel values , the interface to set properties on a port and channel , the interface to get a port and channel current , the interface to get a port and channel voltage , the interface to set the strength of a port and channel , the ability to assign real variables to a particular analog wire value , the interfaces to get a Norton equivalent of the network connected to a port and channel , and interfaces to get diagnostic information about the analog wires . The simulator interfaces include routines to register the user functions or commands with the simulator , routines to initialize the extension to the simulator , and routines to terminate the extension to the simulator .","Finally, there are general interface routines to the simulator  shown in . These include error handling routines , software licensing routines , string formatting utilities , simulator host query routines , general simulator interface utilities , and data container utilities . The simulator host query routines  include routines to determine the name of the event-driven simulator. The general simulator interface utilities  contain general purpose routines that may be used in applications beyond handling analog wires. Included in the data container utilities are access routines to lists and hash tables.","The math commands also have a set of math specific interface routines . They comprise of a set of math command interfaces , a set of math computational routines , and routines to register the math commands or functions with the simulator .","Finally, simulator specific code has be implemented in various components of the extension  so that the user employing the library sees a result that is as simulator independent as possible.","Operation",{"@attributes":{"id":"p-0045","num":"0182"},"figref":["FIG. 1","FIG. 1"],"b":["101","102","103","102","104","106","105","101","110","102","120","103","130","111"]},"To enable the analog wire capability, we extend the language with new commands. The first set of commands is to enable the ability to send single or multi-channeled real values in a point-to-point fashion or on an analog bus. The ability to send multi-channeled real values is necessary when doing a style of modeling known as baseband equivalent modeling or phase domain modeling. In this style, multiple pieces of information need to be sent on a single wire simultaneously. Each piece of information is sent along a channel. With the analog wires, there may be any number of channels on a wire.","In this implementation for the analog wires, the language is extended with commands that begin with \u201c$dgw.\u201d These first set of commands are the $dgw_set, $dgw_get, and $dgw_drive_set commands. The $dgw_set command sets a value onto a wire. The value is an input into the $dgw_set command. The $dgw_get command retrieves the resolved value on that wire. The $dgw_drive_set command sets a port to on or off to support an analog bus. Whether the port is on or off is an input to the $dgw_drive_set command.","The $dgw_set commands takes three arguments\u2014a port on the module, a name for the channel, and the value to be set on that channel. The port may be an input, output, or bidirectional.","The channel may be any name that the engineer chooses. The value may be an integer, real number, or equivalent representation that can be translated into an integer or real number. The sender module  in  shows an example of how to use the $dgw_set command. In this example, the output port is called out . Three uses of the $dgw_set command  show how three different channel names  are used\u2014\u201cfrequency\u201d, \u201cout_high\u201d, and \u201cout_low\u201d. Each of these port  and channel  combinations are set to different values . The channels used are often application dependent. In RF, typical other channels include \u201cphase\u201d and \u201camplitude.\u201d","To receive a signal, an engineer would use the $dgw_get command. The $dgw_get command takes two arguments\u2014the name of the port and the name of the channel that is to be accessed.  shows the module receiver example  of how the engineer might use the $dgw_get command. In this example, the input port is called in . The $dgw_get command is used in a $display statement  which receives the value on the wire connected to in  and on channel \u201cfrequency\u201d . To determine when the value on the port and channel have been changed, the in port  is monitored for changes. The $dgw_set command when executed changes the value on the four valued binary wire to indicate that a change was made. For example, in the block configuration , the out port  binary value is changed. This change is propagated on wire , and is received on the input port, in . This change is seen by the model representation of in , and the module  will react accordingly.","Another common configuration of blocks is where the wire connecting blocks acts as an analog bus. This is shown . In this block topology , there are two sending blocks\u2014sender one  and sender two . Sender one has an output port, out . Sender two also has an output port, out . In this example, there is one receiver  which has one input port, in . The two output ports and input port are connected by a wire . A Verilog representation of this topology  shows the wire  which connects the three blocks.","There are four possible configurations for the driving blocks\u2014both blocks could be driving values, neither block could be driving values, only block one could be driving, or only block two could be driving. To enable all four configurations, the $dgw_drive_set command is provided. The $dgw_drive_set command takes two arguments, the name of the port, and a value of 1 or 0 to indicate on and off respectively. An example of using the $dgw_drive_set command is shown in . A description of sender one  and sender two  are shown. In this situation, the example shows how sender one may be configured to send while sender two is configured not to send. The $dgw_drive_set command example  shows how the port out for module  is set to 0, indicating that the out port of module  is not to drive the wire, w . The four valued binary number of the wire representing the bus provides an indication of the configuration. In the general case where there are many driving blocks on the wire, if more than one wire is driving, a binary \u201cx\u201d value is placed on the wire to indicate that there is contention on the bus. If no blocks are driving, a binary \u201cz\u201d value is placed on the wire to indicate that the bus is undriven. If a \u201c0\u201d or \u201c1\u201d is placed on the wire, this indicates normal operation or that only one block is driving the wire. As the analog wire value changes in normal operation, the \u201c0\u201d and \u201c1\u201d values are toggled to \u201c1\u201d and \u201c0\u201d respectively.","Besides passing a value along a wire, it is often necessary that an analog wire have electrical characteristics. This is shown in . Again, this is an example where there is one sender  connected to one receiver  by a wire . In this example, the sender  has a voltage source  and an output resistance  in series with the voltage source connected to the output port. The receiver  has a current source  and conductance  in parallel to the current source on the input. In general, regardless of port direction, the module may have either a voltage source or a current source. The resistance and conductance may take on any value including zero, positive and negative numbers. The voltage and current source may also take on any value include zero, positive, and negative numbers. As with passing real values, there may be any number of electrical channels on a port. The ports may also be turned on and off using the $dgw_drive_set command. Any number of voltage and current sources may be placed on a port and channel.","To allow this functionality, a $dgw_property_set, $dgw_strength_set, $dgw_get_v, and $dgw_get_i, are added in addition to the previous extensions described. When a port and channel is configured to be driven by a voltage or current source, the value on the $dgw_set command indicates the voltage and current respectively. The value may be an integer, real number, or equivalent representation that can be translated into an integer or real number. The $dgw_property_set command is used to indicate whether or not the port and channel is driven by a voltage source, current source, or to pass by numeric value. The $dgw_strength_set command is used to set the value of the resistance or conductance of a voltage or current source respectively. The $dgw_get_v command is used to get the port voltage. The $dgw_get_i command is used to get the port current.",{"@attributes":{"id":"p-0055","num":"0192"},"figref":"FIG. 6","b":["601","602","603","604","605","606"]},"A receiver module example  sets up a 0 amp current source with an output conductance of 0.01 mhos, or 100 ohms in terms of resistance. The $dgw_property_set example  sets the port, in, and channel, \u201cmain,\u201d to be a current. The value of the current source is set to 0 with the $dgw_set example . The conductance is set to 0.01 in the $dgw_strength_set example . The port voltage and port current is retrieved in the $dgw_get_v example  and $dgw_get_i example  respectively.","In addition to these extensions, a set of convenience commands are added for assigning real variables to many of the values that may be set or get. The commands are $dgw_assign, $dgw_assign_strength, $dgw_assign_i, and $dgw_assign_v. $dgw_assign takes 3 arguments\u2014a port, a channel, and a real variable. This command assigns the value on that port and channel to the real variable specified, so that if the value of the port and channel changes, the real variable will also change. It is also the case that if the real variable is changed, the value on the port and channel will also change. The real variable may be the value on the port and channel, or the voltage of a voltage source or the current of a current source. The $dgw_assign_strength command takes three arguments\u2014a port, a channel, and a real variable. In this case the real variable is tied to the resistance or conductance value of the voltage or current source respectively on that port and channel. If the resistance or conductance value changes, the real variable will also change. If the real variable is changed, the resistance or conductance value will be changed. The $dgw_assign_i and $dgw_assign_v commands take three arguments as well\u2014a port, a channel, and a real variable. In this case, for $dgw_assign_i, the real variable changes to the value of the port current as the port current changes and for $dgw_assign_v, the real variable changes to the value of the port voltage as the port voltage changes.","Another set of extensions aid in determining the equivalent circuit to which a port is connected. For example, suppose there is an electrical network on a wire. On a particular port, the engineer is interested in understanding what the equivalent circuit is connected to that port, that is, the electrical network external to the port on a particular block. Three commands extend the high-level description language to aid in this effort\u2014$dgw_ext_norton_exists, $dgw_ext_norton_i, and $dgw_ext_norton_g. The $dgw_ext_norton_exists command takes two arguments\u2014a port and channel, and returns whether or not a Norton equivalent exists for the connecting network. If the network is comprised of voltage and current sources, a situation where the Norton equivalent will not exist is if there are only ideal voltage sources on the network. If it is a valid network, then to get the value of the voltage source, the engineer may use the $dgw_get_v command. Where there is a Norton equivalent, to get the current for the Norton equivalent, the engineer uses the $dgw_ext_norton_i command which takes two arguments, the port and channel. To get the Norton equivalent conductance the engineer uses the $dgw_ext_norton_g command which takes two arguments\u2014the port and channel. There are a variety of situations where these extensions may be used\u2014the most common being in the writing of a connect module between an event-driven and circuit simulator where the equivalent circuit of a port needs to be created for the circuit simulator.","Finally, the extensions include a command to determine whether or not a port is being driven. This command is called $dgw_driven and takes a port as an argument. It turns a 1 if it is being driven by an analog wire, and a 0 if it is not. The $dgw_display_info command takes one or two arguments\u2014either just a port, or a port and channel. Upon execution, it will display information related to that port or that port and channel. For example, it will list the network for the port. It will also list the resolved values on the port and channel combinations. The $dgw_display_info is mostly useful for debugging purposes.","In addition to the analog wire commands, a set of math command extensions have also been added. These extensions begin with \u201c$dg\u201d and are listed in  in the math extensions column . Each has a description in column .","To use the extension, once the models have been written with any of the extension commands, the engineer needs to tell the simulator to include the library extension . The engineer may use any number of simulators including the event-driven simulators provided by Cadence Design Systems, Inc., Mentor Graphics Corp., and Synopsys, Inc. Each has its own way of linking in library extensions and the engineer should follow the instructions provided with the simulator. In general, the name of the library needs to be provided by the name of the registration function in the library initialization routines .","As long as the commands have been entered correctly, the engineer need not do anything else in using the library extension. With the specification of library extension in place, the library initialization routines  are automatically called by the simulator. This calls the routines to register all of the extension functions to the simulator . When a command in the library extension is encountered by the simulator, the appropriate interface in the analog wire specific interface routines  is called. For example, if the $dgw_set command is invoked, the set port interfaces  is called. The execution flow for the set commands  is shown in . The flow begins with the user invoking the command on the port . The interface  extracts and checks to see if the command is valid using the user input parsers . If it is not, an error message is returned to the user. If it is, a check  is made to see if the port is an analog wire using the pin checking routines  and the routines to set and get data in pin and net manager . If it is not, an analog port is created and attached to the network . This is done using the routines found in the analog wire functionality routines . The command request is then executed to set the appropriate drive, value, voltage, current, property, or the strength on the port or channel . In the case of the $dgw_set command, the value, voltage, or current is set. Based on the properties, the value of the wire is resolved using the value or electrical rules . The value of the digital port is set to the one of four binary values  using the port forcing routines . A check is then made to see if any of the real variable assignments are affected . If so, the real variables are updated  using the routines in the real variable assignments . Upon the completion of the flow , control is returned to the simulator execute other commands.","The execution flow for a get command  is shown in . The execution flow begins  with the invocation one of the get commands. The command is extracted and checked . A check is made to see if the port is an analog wire . If not, an analog wire is created . If it is, a query on the resolved value of the net or pin is returned depending on the command request, . The command is then completed  and control is returned to the simulator.",{"@attributes":{"id":"p-0064","num":"0201"},"figref":"FIG. 18","b":["1801","1804","1810","1804","1802","1803","1811","1812","1820","1821","1822","1820","1821","1820","1821"]},"At simulation startup the routines to register the math functions with the simulator are called . As the simulation proceeds, the math commands are handled though the math command interface . Upon receiving the math command, the appropriate computational routine  is called.","There are alternative embodiments to this invention. For example, the extension to the simulator need not be in a library linked to the simulator. This invention may be implemented as part of the simulator and not an extension. There are also many interfaces to an event-driven simulator. Any of these interfaces may be used. These include PLI 1.0, VPI, and proprietary interfaces specific to a particular simulator.","The method by which the software is organized need not be the same. For example, the routines  need not be subdivided as shown in . They may be all put into one set of routines or split in any manner. This is also true for the pin manager , the net manager , the routines for real variable assignments , the routines for determining nets , the analog wire functionality routines , the math routines , the analog wire specific interface routines , and the general interface to the simulator .","The embodiment described was written in the \u201cc\u201d and \u201cc++\u201d languages and extends the Verilog, SystemVerilog, and Verilog-AMS high-level description languages. An alternative embodiment is to implement using a different programming language, including such languages as just \u201cc\u201d, just \u201cc++\u201d, Tcl, Python, Ruby, Perl, or any combination. There are also any number of ways the code may be written to implement the same results. This include the ordering of flow  and flow . Another embodiment is to extend a different high-level description language. This include VHDL and VHDL-AMS.","Both the analog wire command and the math commands need not use the command names beginning with $dgw and $dg as described. For example, any of the commands, such as $dgw_set, may be changed to another name. Also, the number of arguments may be varied. For example, if there is only one channel on a port, the channel name need not be specified. The order of the arguments may also be changed.","A value that is passed to the set commands are described as an integer, real number, or equivalent representation that can be translated into an integer or real number. This value may also be a string. This is especially helpful if additional information is to be sent along a wire such as \u201ccurrent source of 10 uA with an accuracy of 1%\u201d. The entire string may be passed to convey the information from one block to another.","A library extension need not contain all of the commands provided here. A subset may be adequate for certain applications. The library extension may also contain additional commands to add additional functionality that might be required.","The examples provided in this patent application are for illustrative purposes. The intention of this invention is that this library extension may be used for very complex designs. There will be many blocks in the analog, mixed-signal, and RF section of the design. Each of these blocks may have one or more analog wire. The analog wires may contain any number of analog channels. Further many blocks may be connected to the same wire. This invention places no restriction on the number of blocks in a design, the number of analog wires in a block, the number of channels on a wire, the number of ports of blocks connected to a wire or net.","The user of this invention also need not be restricted to an engineer.","Finally, different terminology may be used. For example, \u201cchannels\u201d may be called \u201csignals\u201d.","Thus the reader will see that at least one embodiment of this invention can extend an event-driven simulator to facilitate analog modeling without the need for an analog simulator. While the above description contains many specificities, these should not be construed as limitations on the scope, but rather as an exemplification of one preferred and alternative embodiments thereof. Many other variations are possible. Accordingly, the scope should be determined not by the embodiments illustrated, but by the appended claims and their legal equivalents."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":["DRAWINGS","Figures"],"p":["Embodiments of the invention will now be described in conjunction with the drawings, in which:",{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 16"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 17"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 18"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 19"},{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 20"}]},"DETDESC":[{},{}]}
