---
title: Code generation method, terminal apparatus, code processing method, issuing apparatus, and code issuing method
abstract: This invention is to make it unnecessary for a user to input all codes for identifying information, and reduce cumbersomeness and input error in code input. For example, to generate a code that means predetermined processing such as acquisition of specific information or acquisition of specific mail data, a user inputs, through a service terminal, a number section predetermined for the information to be acquired. The service terminal automatically generates the code of a classification section and attaches it to the number section input by the user. The number section and classification section, which are integrated, are output to a service server as a code.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07027178&OS=07027178&RS=07027178
owner: Canon Kabushiki Kaisha
number: 07027178
owner_city: Tokyo
owner_country: JP
publication_date: 20040114
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"p":["This application is a division of application Ser. No. 09\/547,399, filed on Apr. 11, 2000 U.S. Pat. No. 6,747,755, the entire disclosure of which is incorporated herein by reference.","The present invention relates to a method of generating a code representing a service for, e.g., printing information in a terminal, terminal apparatus, code processing method, issuing apparatus, and code issuing method.","Along with the recent development of communication technology, the following methods have been used to provide information to users.\n\n","As portable information terminals are being widely used, information providing services using character information are becoming active. However, since a portable terminal has a limited display ability in size, colors, and resolution, a demand has arisen for a detail information providing service capable of compensating for it.","The above methods are conventionally used to acquire detail information, though they have limitations.","Methods  and  are limited to PC or terminal users well versed in the Internet environment, and it is also time-consuming to find a URL necessary for access to desired information. Method  is limited to FAX users. In addition, the print ability (monochrome printing and print preview) is limited, and the output cost (telephone charge or cost of paper) is for the users to bear. Methods , , and  are available for many and unspecified users. However, a user can acquire information several hours or several days after the request. The information provider side must also prepare a physical request processing system, resulting in an increase in information providing cost.","As described above, in the prior art, to register information in expectation of use of the information in the future, the register or user must input all data for a code for identifying the information, resulting in cumbersome operation. Even if it is not cumbersome, an input error may occur.","The present invention has been proposed to solve the problem of the prior art.","In order to achieve the above object, according to the present invention, there is provided a code generation method of generating a code which means predetermined processing, characterized by comprising the steps of:","inputting a predetermined first code portion by a user through predetermined input means;","attaching a predetermined second code portion to the first code portion input by the input means to generate an integrated code; and","externally outputting the integrated code.","A terminal apparatus of the present invention is characterized by comprising the input means.","According to the present invention, there is also provided a code processing method of processing a code representing predetermined processing, characterized by comprising the steps of inputting a first code portion by a user, attaching a second code portion to the first code portion, and handling the first code portion and the second code portion, which are integrated, as a code and executing processing corresponding to the code.","According to the present invention, there is also provided an issuing apparatus for generating a code for identifying information, comprising:","means for assigning a main code portion for identifying an information input user to information to be registered; and","means for attaching a subcode portion associated with the information to be registered to the main code portion.","According to the present invention, there is also provided a code issuing method in a storage device for storing information and a code in correspondence with each other, characterized by comprising the steps of:","issuing a first code for specifying information to be stored in the storage device in accordance with a scale of the storage device within an allowable range; and","issuing a third code containing a second code predetermined in accordance with the scale of the storage device and the issued first code to the storage device.","According to the present invention, there is also provided a code processing method characterized by comprising the step of identifying, using a scale discrimination bit of an input code, a bit for specifying a storage device and a bit for specifying information held by the storage device in the code.","Preferred embodiments of the present invention will now be described in detail in accordance with the accompanying drawings.","<System Arrangement>","A service system (to be referred to as a P service system hereinafter) to be described in this embodiment has a plurality of service terminals (to be referred to as P service terminals hereinafter) installed in shops or stations and a dedicated service server (to be referred to as a P service server hereinafter) connected to the P service terminals. When a code (to be referred to as a P-code hereinafter) in a predetermined form is input from a P service terminal, corresponding information is acquired from the P service server, and the print of necessary information is obtained. Note that designation of a P-code to a P service terminal can be done by unspecified users.",{"@attributes":{"id":"p-0157","num":"0162"},"figref":["FIG. 1","FIG. 1"],"b":["100","200","100","100"]},"The P service terminal  can be a terminal installed for public use in a shop, street, or public facility. In this case, the P service terminal  does not include a terminal used by only a specific person, e.g., a so-called personal computer used by a person at home.","The P service server  issues P-codes corresponding to provided information, registers the P-codes in a P-code database, and manages them. The P service server  acquires information corresponding to a P-code input from the P service terminal , generates print data, and outputs it to the P service terminal .","An information provider server  (to be referred to as an IP server hereinafter) is, e.g., a general Internet provider. In response to an information request from the P service server , the IP server  transmits information (contents) corresponding to the P-code attached to the information request to the P service server . Additionally, as will be described later, the P service server  sets a plurality of usable P-codes in the IP server , and the IP server  can uniquely issue a P-code in correspondence with information provided from a user terminal within the range of the usable P-codes.",{"@attributes":{"id":"p-0161","num":"0166"},"figref":"FIG. 1","b":["200","300","200","300"]},"When the P-code of information managed on the IP server  side is input from the P service terminal , the P service server  finds a corresponding IP server from the P-code and transmits the P-code to this IP server to request information.","A portable terminal  is, e.g., a portable telephone. The IP server  notifies a P service terminal user (to be simply referred to as a user hereinafter) of a P-code informed from the P service server  by inserting the P-code on media  such as newspapers and magazines or describing the P-code in mail information transmitted to the user's portable terminal  using a portable telephone mail service . When the user inputs the P-code attached to information of interest from the P service terminal , he\/she can obtain the print of information corresponding to the P-code. The portable terminal  of this embodiment can extract a P-code described in mail information, hold it in an internal memory, and input the held P-code to the P service terminal  by infrared communication or the like.","A service such as a mail service becomes available when personal registration is done in the P service server . This registration can be done from, e.g., a terminal of a user (user terminal ) through a Web. Instead, the user may fill a registration form with predetermined items, and the operator of the P service server may perform registration processing in accordance with the described contents.","In this embodiment, two kinds of information are provided by the IP server  and registered\/managed by the P service server . One is information (to be referred to as IP information hereinafter) provided to a user with or without charge on the basis of P-code designation by the user from the P service terminal  or the like. The other is information (to be referred to as advertisement information hereinafter) automatically selected by the P service server and attached to information (e.g., IP information) acquired in accordance with P-code input by the user.","As examples of services realized in the above-described P service system, the following services will be mainly described in this embodiment. (1) User registration: a personal P-code is given in accordance with registration application from the user terminal  to the P service server. (2) IP information registration: in accordance with IP information registration application from the IP server , IP information is registered in the P service server , and a P-code for the IP is given. (3) Advertisement information registration: in accordance with an advertisement information registration application, advertisement information is registered in the P service server . (4) Information service: by inputting the P-code (P-code for the IP) of desired information from the P service terminal , a print output of the desired information is obtained. (5) Mail service: by inputting the user's P-code (personal P-code) from the P service terminal , mail addressed to the user is printed. (6) Personal information service: by inputting the user's P-code from the P service terminal , a print output of information set\/registered for the user in advance is obtained. (7) Distribution service: desired information is uploaded from the P service terminal  to the P service server  in advance and printed from the P service terminal  as needed.","Each of these services will be described later in detail. The services and functions realized by the P service system of this embodiment are not limited to the above-described services and functions.","<Arrangement of P Service Terminal>",{"@attributes":{"id":"p-0168","num":"0173"},"figref":["FIG. 2","FIG. 2"],"b":["100","101","102","101","101","102","100","103","200","400"]},"In the main unit , a touch panel  receives an operation input by a user and presents various information to the user. An infrared communication section  is used to receive a P-code from a portable terminal having an infrared communication function by infrared communication. When a portable terminal is connected to a portable terminal connector , data (P-code) stored in the memory of the portable terminal is read out by the P service terminal . When a P-code is provided in a form of a bar code, a bar code reader  is used to read the bar code to acquire the P-code.","A disk unit  reads\/writes data from\/in a medium such as a floppy disk or MO disk. A settlement unit  performs settlement for the above-described various services. As a settlement method, various methods including settlement using cash or a credit card are available.",{"@attributes":{"id":"p-0171","num":"0176"},"figref":["FIG. 3","FIG. 2","FIG. 3"],"b":["100","124","200"]},"A control section  controls each construction described with reference to . In the control section , a CPU  realizes various control operations in the P service terminal  in accordance with control programs stored in a memory . User I\/F control controls execution of each of the following programs in accordance with a user's operation instruction input through the touch panel . Information service processing , mail service processing , personal information service processing , and distribution service processing realize the above-described various services, i.e., information service, mail service, personal information service, and distribution service, respectively. Settlement processing realizes settlement processing using the settlement unit .","<Arrangement of Portable Terminal>",{"@attributes":{"id":"p-0173","num":"0178"},"figref":["FIG. 4","FIGS. 108 to 111"],"b":["400","100","400","410","400","410","401","402","404","403","403"]},"An infrared communication section  outputs a P-code stored in the internal memory by infrared rays. The infrared rays output from the infrared communication section  are received by the infrared communication section  of the P service terminal  and recognized as a P-code. The portable terminal  also has a communication connector on its bottom surface so as to exchange telephone number information between the terminal and a personal computer.",{"@attributes":{"id":"p-0175","num":"0180"},"figref":["FIG. 5","FIG. 5","FIG. 4"],"b":["400","423","424","424","106","100","100","425"]},"A control section  realizes control of the constructions described with reference to  or various control operations in the portable terminal  in accordance with control programs stored in a memory . Of the programs stored in the memory , portable terminal control is a program unit for realizing a function as a normal portable telephone. P-code extraction processing is a program unit for the process of extracting a P-code from received mail and storing the P-code in a P-code storage area . As described above, to extract a P-code, data in a manually selected block is extracted as a P-code, or a P-code is automatically identified and extracted from mail data. P-code transmission processing is a program unit for transmitting a P-code stored in the P-code storage area to the P service terminal through the infrared communication section  or communication connector .","<Arrangement of P Service Server>","The P service server  will be described next.  is a block diagram showing the schematic arrangement of the P service server . A control section  has a CPU  and memory . The CPU  realizes various services in the P service server  in accordance with control programs stored in the memory . The memory  stores the control programs to be executed by the CPU . Information registration processing is a program module for registering, e.g., IP information, advertisement information, user information (personal information), the distribution data. P-code issue processing is a program module for assigning a P-code for specifying each registered information. Service processing acquires IP information, advertisement information, mail data, or distribution data or registers distribution data in accordance with a P-code transmitted from the P service terminal . Advertisement search processing searches for advertisement information to be attached to a print output in the P service terminal. By attaching advertisement information, the information output charge is canceled by advertisement charges to reduce the cost for the user to bear in outputting information (printing). Data output processing attaches advertisement information obtained by advertisement search processing to information obtained on the basis of a P-code input from the P service terminal , lays out the pieces of information on a printing paper sheet, and generates and outputs print data.","A communication section  is connected to the P service terminal through a line or to each IP server  through a Web.","A P-code database  stores a table group associated with P-codes and entity of contents. The table group includes an IP information registration table (), advertisement information table (), user information table (), mail service P-code table (), distribution service P-code table (), personal information service P-code table (), personal information table (), owner information table (), and terminal information table ().",{"@attributes":{"id":"p-0180","num":"0185"},"figref":["FIG. 7","FIG. 11"],"b":["220","220","203"],"i":"d "},"In the P service system of this embodiment, the IP server  can issue a P-code within an allowable range. Hence, IP information is registered by the P service server  or IP server . A server which has registered IP information holds the contents and IP information registration table. That is, the entity of IP information and IP information registration table are present in the P service server  or IP server .",{"@attributes":{"id":"p-0182","num":"0187"},"figref":"FIG. 8","b":"203","i":"d. "},"The \u201clink\u201d stores the P-code of advertisement information to be linked. In the \u201centity file information\u201d, the path name and file name for specifying the file of the advertisement information are registered. The entity of the advertisement information can be present in either the P service server or IP service server. However, the advertisement information table is always stored in the P-code database  of the P service server . When the entity of advertisement information is present in the IP service server, information for specifying the IP service server is included in the entity file information of the advertisement information table (in this embodiment, the IP server is specified by the P-code, and this will be described later).",{"@attributes":{"id":"p-0184","num":"0189"},"figref":["FIG. 9","FIG. 13"]},{"@attributes":{"id":"p-0185","num":"0190"},"figref":["FIG. 10","FIG. 10","FIG. 10"]},{"@attributes":{"id":"p-0186","num":"0191"},"figref":["FIG. 11","FIG. 11","FIG. 11"]},{"@attributes":{"id":"p-0187","num":"0192"},"figref":["FIG. 12","FIG. 12","FIG. 12"]},{"@attributes":{"id":"p-0188","num":"0193"},"figref":["FIG. 13","FIG. 9"]},{"@attributes":{"id":"p-0189","num":"0194"},"figref":["FIG. 14","FIG. 7","FIG. 8","FIG. 14"]},{"@attributes":{"id":"p-0190","num":"0195"},"figref":"FIG. 15"},"<Arrangement of IP Server>",{"@attributes":{"id":"p-0191","num":"0196"},"figref":["FIG. 16","FIG. 16","FIG. 7"],"b":["300","301","302","303","300","304","301","305","306","307","200"]},"The IP server  acquires an available P-code value from the P service server  and issues a P-code when IP information is registered from the user terminal. At this time, the entity of IP information and the IP information registration table are held by the data storage section . When an information request from the P service server  is received, the entity (contents) of the IP information is extracted in accordance with the designated P-code and it is transmitted to the P service server .","<P-Code>","The P-code used to specify information or the like in this embodiment will be described next.",{"@attributes":{"id":"p-0194","num":"0199"},"figref":["FIG. 17","FIG. 17"]},"The classification section is a 16-bit code containing a P-code type bit representing that the input P-code number is an IP P-code (information P-Code) or personal P-code (personal user P-Code), version information, and country number. When a P-code number is input to the P service terminal , the contents of this classification section are automatically attached by the terminal.","First, it is determined whether the input P-code is a personal P-code or IP P-code to set the P-code type bit. In this embodiment, a telephone number is used as the number section of the personal P-code. If the number input to the P service terminal  has 11 consecutive digits or less, it is determined that a telephone number is input, i.e., a personal P-code is input, and the P-code type bit is set at \u201c1\u201d. On the other hand, if a number sequence hyphened in units of four digits (in units of four numbers) is input as a P-code number, it is identified that a nontelephone number is input, and the P-code type bit is set at \u201c0\u201d. Subsequently, version information is set, and a country number representing the country where the P service terminal is installed is set (when a country is designated from the P service terminal, the number of the designated country is set).","The number section has a number (to be referred to as a P-code number hereinafter) directly input by the user. This is a number inserted to a newspaper, magazine, or homepage by the information provider. Note that a telephone number is used as a personal P-code number.","When the above-described P-code type bit is 1, i.e., a personal P-code, 40 bits are allocated to the number section, as shown in , in which a numerical value represented by the telephone number is input. The remaining eight bits are used as an attached section.","On the other hand, when the flag bit is 0, i.e., an IP P-code, 39 bits are allocated to the number section, as shown in , and the remaining nine bits are used as an attached section. Of the 39 bits of the number section, the first bit represents a P service server identification bit (1 bit), and the subsequent three bits represent a class category. Since the P service server identification bit is 0 for a site except the P service server, only three bits representing a class category are contained in the first four bits, and the first digit of the P-code number represents a class category (numerical values  to ). The class category has the same meaning as that of an IP address. As shown in , numerical values  to  indicated by the three bits represent five classes from minimum to maximum scales. For example, for class  (minimum scale), 24 bits are used as a site identification number (to also be referred to as an external code hereinafter), and the remaining 11 bits construct an ID code (to also be referred to as an internal code hereinafter) freely usable in the site. When the class category is determined in accordance with the scale of an IP server, the number of P-codes assigned to the IP server is determined depending on the scale of the IP server.","The attached section indicates the identification number of a subcategory of the contents identified by the above classification section+number section. For an information P-code, for example, \u201cprofessional baseball game result\u201d has categories \u201cresult of today\u201d, \u201cresult of yesterday\u201d, \u201cresult of day before yesterday\u201d, . . . , and \u201ctip on horse racing\u201d has categories \u201csite\u201d and \u201crace\u201d. For a personal P-code, the attached section is used for a mail box number or personal-information number.","Especially, in this embodiment, a plurality of types of \u201cattached sections\u201d can be connected to one number section as suffixes. When grouping is designated for P-codes, the P-code can be linked to other IP information in units of suffixes. When the code of the number section is input as a P-code, information having the maximum surfix value is selected and presented as IP information. This can cope with information such as \u201cresults of professional baseball games of yesterday\u201d, which requires frequent update and addition of information. Assume that a new result of professional baseball game is generated. Next day, the game result of yesterday is grouped in correspondence with a P-code with an incremented surfix, thereby linking the P-code with the incremented surfix to the IP information of the game result. Hence, when a P-code number is designated to obtain the \u201cresult of professional baseball game of yesterday\u201d, information having the maximum surfix attached to the P-code number is extracted and presented to the user.","When a P-code has an attached section, it may be directly input by the user. However, instead of directly inputting the number, the P-code with an attached section can be input by selecting it from a menu. More specifically, when the user inputs only the P-code number of a P-code having an attached section, the value of the corresponding P-code (number section+attached section) and its properties (title and the like) are transmitted from the P service server to the P service terminal . The P service terminal  displays a selection list using the information on the touch panel  as a menu. When the user selects a desired content from the selection list, a corresponding P-code (number section+attached section) is transmitted to the P service server, and the selected content is sent to the P service terminal. In this embodiment, an example will be described, in which a personal P-code uses, as a number section, a numerical value input by the user as a \u201ctelephone number\u201d, and as an attached section, a code formed from a sequence of a \u201cpredetermined symbol\u201d and \u201csubcode\u201d, and \u201c#\u201d, \u201c-\u201d, or \u201c##\u201d is used as the \u201cpredetermined symbol\u201d. In this case, when the personal P-code is input, the \u201cpredetermined symbol\u201d registered in advance is detected from the P-code, and a service predetermined in accordance with the type of the detected \u201cpredetermined symbol\u201d is executed (a mail service for \u201c#\u201d, distribution service for \u201c-\u201d, and personal information service for \u201c##\u201d)",{"@attributes":{"id":"p-0203","num":"0208"},"figref":"FIG. 18"},"When a P-code is stored in the memory of a portable terminal, all constituent elements (\u201cclassification section\u201d, \u201cnumber section\u201d, and \u201cattached section\u201d) of the P-code are registered in the memory and input to the P service terminal. This enables omission of an operation such as menu selection, so load of the user can be reduced.","<Outline of Operation of System>","The outline of processing by the P service server of this embodiment will be described next with reference to .","In steps S to S, processing to be executed is selected on the basis of IP information, command, and P-code input from the P service terminal , IP server , or user terminal . For example, when input data is a user registration request, the flow advances from step S to step S to issue a personal P-code and perform user registration processing by the information registration processing and P-code issue processing . By this user registration processing, the user information table shown in  and personal information table shown in  are generated and registered. When an IP information registration request is input, the flow advances from step S to step S to issue an IP P-code from P-codes assigned to the IP server which is requested to register the IP information. In step S, IP information registration processing is performed. By this IP information registration processing, the IP information registration table shown in  is generated and registered. When an advertisement information registration request is input, the flow advances from step S to step S to issue a P-code. In step S, advertisement information registration processing is executed. By this advertisement information registration processing, the advertisement information table as shown in  is generated and registered in the P service server .","When a P-code is input from the P service terminal , processing requested by the P-code is determined from processing operations in steps S to S. When the P-code is an IP P-code (the P-code type bit is 0), it is determined that the information service is requested. The flow advances from step S to step S to acquire the entity and properties of IP information from the P-code and generate preview data. When the P-code is a personal P-code (the P-code type bit is 1) and is registered in the mail service information of the user information table, it is requested that the mail service is requested, and the flow advances from step S to step S. In step S, the entity and properties of mail data are acquired from the mail P-code table on the basis of the P-code.","When the input P-code is a personal P-code and is registered in the personal information service information of the user information table (), it is determined that the personal information service is requested, and the flow advances from step S to step S. In step S, the list of IP P-codes is acquired by looking up the personal information service P-code table (), and IP information and their properties of all P-codes registered in this list are acquired.","When the input P-code is a personal P-code and is registered in the distribution service information of the user information table, it is determined that data extraction in the distribution service is requested, and the flow advances from step S to step S. In step S, a password registered in correspondence with the data is requested. It is determined by looking up the distribution service P-code table whether an authentic password is received, and the entity and properties of distribution data corresponding to the P-code are acquired.","When it is determined that distribution data registration in the distribution service is requested, the flow advances from step S to step S to execute distribution data registration processing including P-code issue processing and processing of registering a password corresponding to the data and notify the user of the data registration and assigned P-code. In this case, a P-code in a form of a personal P-code (telephone number) having a subcode (surfix) is issued.","When necessary information is acquired in steps S to S, layout of acquired information to be printed on a paper sheet is determined in step S. In step S, advertisement information to be laid out in a margin on the paper sheet is acquired (advertisement information search will be described later). In step S, the properties acquired in steps. S to S and preview data of the image of each page obtained in steps S and S are transmitted to the P service terminal. When a print instruction is received from the P service terminal , print data is generated and transmitted to the P service terminal . The printer  prints information on the basis of the print data.","<User Registration>","When the user wants to receive the mail service or personal information service in the P service system, user registration in the P service server  is required in advance.","In user registration, at least matters for specifying the user must be registered. Arbitrary matters for preferable reception of each service of the P service system can also be registered. Additionally, already registered matters can be changed.","The procedure of user registration will be described by exemplifying a case wherein user registration is done from the user terminal  of the user through the Web.","When the user accesses user registration of the P service server  from the user terminal , the P service server  executes user registration processing in step Sill.",{"@attributes":{"id":"p-0216","num":"0221"},"figref":"FIG. 21"},"In this user registration processing, the P service server  displays various windows for user registration on the display of the user terminal  and causes the user to sequentially input matters to be registered by so-called GUI.","In step S, the P service server  determines whether the user has selected new user registration or a change in user registration that has been already performed. For the former processing, the flow advances to step S. For the latter processing, the flow advances to step S.","In step S, new registration processing is performed. In this new registration processing, a dialog box shown in  is displayed first on the display of the user terminal .","This dialog box has a \u201cname\/address\u201d button , \u201cpassword\u201d button , \u201cplace of employment\u201d button , \u201ccredit card\u201d button , \u201cservice\u201d button , \u201cpersonal information\u201d button , \u201cpersonal information \u201d button , \u201cdesired information\u201d button , \u201cprinting paper\u201d button , and \u201cfavorite information registration\u201d button . The user can register matters corresponding to the respective items by clicking the buttons.","When the \u201cname\/address\u201d button  is clicked in the dialog box shown in , a dialog box shown in  is displayed. The user must input, from the user terminal , at least the name, address, and one of the telephone number and portable telephone number as indispensable input matters. At the end of the input, the \u201cOK\u201d button is clicked, the input contents are stored, and the dialog box shown in  is displayed again. When the \u201ccancel\u201d button is clicked, the dialog box shown in  is displayed again without storing the input contents. This also applies to processing to be described below.","When the \u201cpassword\u201d button  is clicked in the dialog box shown in , a dialog box shown in  is displayed. The user inputs a desired password to the \u201cpassword\u201d column. The password is registered to prevent a third party from using the P service system under disguised ownership. Hence, the password is an indispensable input matter in principle.","Since the input password is displayed by \u201c*\u201d, the user is caused to input the password again to the \u201cpassword (confirmation)\u201d column to prevent any input error.","When the \u201cplace of employment\u201d button  is clicked in the dialog box shown in , a dialog box shown in  is displayed. The user can arbitrarily input matters associated with the place of employment.","When the \u201ccredit card\u201d button  is clicked in the dialog box shown in , a dialog box shown in  is displayed. When the user will pay a charge for the P service system using a credit card, he\/she designates a credit card of his\/her own in this dialog box. If no credit card is designated, it is regarded that the user will pay in cash.","When the \u201cservice\u201d button  is clicked in the dialog box shown in , a dialog box shown in  is displayed. From the mail service, personal information service, and distribution service provided by the P service system, the user selects services desired based on the P-code assigned by this user registration, and checks check boxes corresponding to the services. A service without a check mark is not available on the basis of the P-code assigned by this user registration.","When the \u201cpersonal information\u201d button  is clicked in the dialog box shown in , a dialog box shown in  is displayed. The user can arbitrarily input general personal information. The information input herein is mainly used for advertisement information search processing (to be described later in detail).","When the \u201cpersonal information \u201d button  is clicked in the dialog box shown in , a dialog box shown in  is displayed. The user can arbitrarily input specific personal information. The information input herein is also mainly used for advertisement information search processing (to be described later in detail).","When the \u201cdesired information\u201d button  is clicked in the dialog box shown in , a dialog box shown in  is displayed. In this dialog box, items such as economy, entertainment, and sports are hierarchically listed and displayed. The user can check the check boxes of items of his\/her interest. Each item can be quickly searched for by \u201ckeyword search\u201d.","The checked items are used to search for information which is to be arbitrarily provided to the user by the P service server  in each service of the P service system. For example, when the user receives the mail service, and an excess margin portion is present on the print, the P service server  can search for free IP information associated with the checked items, attach the information to the margin portion, and output it. The checked items can also be used for advertisement information search processing.","When the \u201cprinting paper\u201d button  is clicked in the dialog box shown in , a dialog box shown in  is displayed. In receiving a print output from the P service terminal , the user can designate the output format. For example, when the \u201cvisibility priority\u201d button in the dialog box shown in  is checked, priority is given to the layout of the print, and information obtained by the P service system is printed in a layout easy to see. When the \u201cpage count priority\u201d check button is checked, priority is given to saving of page count, so the print cost is expected to be saved. When the \u201cdetails\u201d button is clicked, desired conditions can be selected and designated from a plurality of layout patterns, the amount of advertisement information, and font sizes, which are registered on the P service system.","When the \u201cfavorite information registration\u201d button  is clicked in the dialog box shown in , IP information to be subjected to the personal information service can be set. This setting is done by listing IP P-codes corresponding to an IP information group desired by the user. A plurality of pieces of favorite information can be registered. The dialog box displayed at this time is the same as that for registration of a frame of the personal information service for a later description of various services and therefore is not illustrated.","When the user clicks the \u201cOK\u201d button in the dialog box shown in , the P service server  determines that all inputs are complete. The flow advances to step S to check whether all the above-described indispensable input matters are input. If YES in step S, the flow advances to step S. If NO in step S, a predetermined alarming message is displayed, and the flow returns to step S. When the user clicks the \u201ccancel\u201d button, processing is ended without registration.","In step S, the P service server  issues the personal P-code. Especially, one of the portable telephone number and telephone number input by the user in the dialog box shown in  is attached as a \u201cnumber section\u201d, and then, the P-code is sent to the user terminal , thereby giving the P-code to the user. This issue processing will be described later in detail with reference to .","In step S, the information input by the above processing is stored in the user information table shown in  in correspondence with the new personal P-code given to the user in this user registration. After that, user registration processing is ended.","When a change in user registration already performed is selected in step S, the flow advances to step S.","In step S, registration change processing is performed. In this registration change processing, a dialog box shown in  is displayed on the display of the user terminal  first. The dialog box shown in  has the same structure as that of the dialog box shown in . Referring to , buttons corresponding to the buttons  to  of the dialog box shown in  are indicated by adding \u201c\u2032\u201d to the same reference numerals as in .","When the user clicks the buttons \u2032 to \u2032, dialog boxes as shown in  are displayed in correspondence with the buttons. In the displayed dialog box, matters input in the past user registration are displayed together.","The user can change the displayed contents while looking at them. For example, when the \u201cpassword\u201d button \u2032 in  is clicked, a dialog box shown in  is displayed. The user can input a new password to the \u201cpassword\u201d column to change the password. For confirmation, the new password is input to the \u201cpassword (confirmation)\u201d column again. After the input, the \u201cOK\u201d button is clicked to store the changed contents.","When the user clicks the \u201cOK\u201d button in the dialog box shown in , the P service server  determines that all changes are made, and the flow advances to step S to check for confirmation whether the above-described indispensable input matters are erased by errors upon the change. If all the indispensable input matters have been input, the flow advances to step S. If matters are erased, a predetermined alarming message is displayed, and the flow returns to step S.","In step S, the P service server  updates the corresponding matters in the user information table in accordance with the changed contents.","All user registration processing operations are complete. In the above new registration processing, input items are sequentially selected from the menu shown in , and necessary matters are input. However, a so-called \u201cwizard\u201d form may be used to automatically sequentially display the input windows and cause the user to input necessary matters. However, to change the registered contents, the menu for selecting a desired matter as shown in  is preferable.","<IP Information Registration>","The information provider who provides IP information in the P service system must register contents of the IP information and the like in the P service server  or IP server .","To do this registration, the information provider accesses the P service server  or IP server  from a terminal (not shown) (to be referred to as an information provider terminal hereinafter) of the information provider through the Web or presents a storage medium such as a CD-ROM in which contents of IP information and the like are stored to the operator of the P service system.","The procedure of IP information registration will be described below by exemplifying a case wherein the information provider registers IP information in the P service server  through the Web.","When the information provider accesses IP information registration in the P service server  from the information provider terminal, the P service server  executes processing in step S in  and internally issues an IP P-code for the information provider. After that, the flow advances to step S to execute IP information registration processing.",{"@attributes":{"id":"p-0247","num":"0252"},"figref":"FIG. 34"},"In this IP information registration processing, the P service server  displays windows for IP information registration on the display of the information provider terminal and causes the information provider to sequentially input matters to be registered by so-called GUI, as in the above-described user registration processing.","In step S, a dialog box shown in  is displayed. It is determined whether the information provider is a member of the P service system. A member means a person who has made an application to the P service system in advance as an information provider. A nonmember cannot provide pay IP information. A membership number and password are assigned in accordance with an application.","When the information provider is a member, he\/she checks the radio button \u201cYes\u201d in this dialog box and also inputs the membership number. When the information provider is a nonmember, he\/she checks the radio button \u201cNo\u201d. When \u201cnext\u201d is clicked, the flow advances to step S for a nonmember. For a member, a dialog box shown in  is displayed to request to input a password. If the password input by the information provider is authentic, the flow advances to step S.","When \u201cnext\u201d is clicked in each dialog box, input information is stored, and the flow advances to the next processing. When \u201cback\u201d is clicked, input information is stored, and the flow returns to immediately preceding processing. When \u201ccancel\u201d is clicked, the flow returns to the first dialog box without storing input information. This also applies to the following processing.","In step S, a dialog box shown in  is displayed to cause the information provider as a nonmember to input information for specifying the information provider, including the address, name, and telephone number. This process is required to prevent oversupply of inappropriate IP information. After the input, when \u201cnext\u201d is clicked, the flow advances to step S. After the input, a dialog box shown in  may be displayed to recommend member registration such that the procedure of member registration can be executed on the Web.","In step S, a dialog box shown in  is displayed to confirm whether the information provider as a member will charge for IP information registered by this IP information registration. If the IP information is pay information, the information provider checks the check box \u201ccharge for printing\u201d and inputs a desired charge (step S). If the IP information is free information, no check box is checked. In either case, when \u201cnext\u201d is clicked, the flow advances to step S.","In step S, a dialog box shown in  is displayed to designate IP information to be registered. The information provider inputs the file name of the entity (contents) of IP information stored in the information provider terminal. In this case, a plurality of file names can be designated. The IP information to be registered may be either character information or an image.","When the \u201cdesignate file\u201d button is clicked, a dialog box in  that shows the list of IP information files stored in the information provider terminal can be displayed. In this case, the information provider can easily select an IP information file. To cancel a file selected once, the file is designated in the dialog box shown in , and the \u201cdelete\u201d button is clicked. When \u201cnext\u201d is selected in the dialog box shown in , the flow advances to step S.","In step S, the contents of the file designated in step S are displayed as a preview (), and the information provider is made to confirm it. After the confirmation, when the information provider clicks the \u201ctransfer to server\u201d button, a dialog box shown in  is displayed, and the designated file is transferred to the P service server . After the transfer, the flow advances to step S.","In step S, a property of the transferred IP information is set. In setting the property, a dialog box shown in  is displayed, so the date of start of insertion and valid dates of the IP information can be set. In this setting, the valid dates of the IP P-code and those of the IP information can be independently set. The valid dates of the P-code may be automatically set by adding a predetermined period to the valid dates of the IP information, as will be described later with reference to . When \u201cnext\u201d is clicked in the dialog box shown in , a dialog box shown in  is displayed to set another property.","In this dialog box, whether a change in size of registered IP information is allowed when it is output from the P service terminal  is set.","This setting is required because size reduction may be required on the P service terminal  side due to the paper of the P service terminal  or layout of a plurality of IP information output to one paper sheet. If the size can be freely changed on the P service terminal  side, the printed contents may be unclear depending on the contents of the IP information. Hence, the information provider is allowed to set the allowable range of the font size or magnification. When \u201cnext\u201d is selected in the dialog box shown in , a dialog box shown in  is displayed to set still another property.","In this dialog box, whether the information provider permits automatic attachment of advertisement information when the IP information registered is output from the P service terminal  is set. The information provider checks one of the radio buttons \u201cpermit\u201d, \u201cpermit for lower surface\u201d, \u201cnot permit\u201d to select setting. Advertisement information is attached within the selected range. When \u201cnext\u201d is selected in the dialog box shown in , a dialog box shown in  is displayed to set still another property.","In this dialog box, a password can be set to allow only a specific user to use the registered IP information. To set a password, the check box \u201cset password\u201d is checked, and a desired password is input to the \u201cpassword\u201d column. After input, when \u201cnext\u201d is clicked, a dialog box shown in  is displayed. Re-input is requested to prevent a password input error. When the \u201cregister\u201d button is clicked, the password is stored. When password setting is unnecessary, \u201cnext\u201d is clicked without any processing in the dialog box shown in . In either case, a dialog box shown in  is displayed to set still another property.","In this dialog box, the genre and keywords of IP information to be registered are input such that they can be used for advertisement search processing. The items to be input are \u201cgenre\u201d, \u201csubgenre\u201d, and \u201ckeyword\u201d; \u201cGenre\u201d and \u201csubgenre\u201d are listed in drop-down list boxes. For example, when the right arrow of the \u201cgenre\u201d column is clicked, the list of items of the \u201cgenre\u201d column is displayed, as in a dialog box shown in . The information provider can select from this list a category most suitable to the IP information to be registered. In addition, keywords associated with the concrete contents of the IP information registered can be arbitrarily selected and input to the \u201ckeyword\u201d column. An input keyword can be set by the \u201cadd\u201d button, and the set keyword can be canceled by the \u201cdelete\u201d button.","When the check box \u201cnegative link to advertisement\u201d is checked, selection of advertisement information inappropriate to the contents of the registered IP information can be avoided.","Instead of or together with setting the property in the dialog box shown in , a property in a dialog box shown in  can be set.","In the dialog box shown in , the title and summary of the registered IP information are input. This summary is used for advertisement search processing. In addition, when the IP information is requested in the information service, the summary is temporarily disclosed to the user instead of immediately providing the entity of the IP information to the user, thereby increasing the width of IP information selection by the user or reducing the charge.","Property setting in step S is ended, and the flow advances to step S.","In step S, a dialog box shown in  is displayed to select whether the registered IP information is to be subjected to group setting. With group setting, pieces of IP information are associated with each other. This processing is used to handle information having the same object whose contents are updated over time, including the results of professional baseball games and stock information.","If group setting is not desired, the information provider clicks the \u201ccancel\u201d button, and in this case, the flow advances to step S.","If group setting is desired, whether the registered IP information is to be added to an existing group or a new group is selected by a radio button in the dialog box shown in .","To add the IP information to an existing group, the IP P-code of the link destination is input. The P-code displayed in the \u201cP-code to be registered\u201d column is the P-code assigned to the IP information to be registered this time.","When a new group is selected, and the \u201cOK\u201d button is clicked, a dialog box shown in  is displayed. The title, contents, and update schedule of the group are input. The input data are finally stored in the Frame Information storage area of the IP information registration table ().","In either case, when the \u201cOK\u201d button is clicked, a dialog box shown in  is displayed, and registration matters for group setting are displayed. This display is done when the IP information to be registered this time is added to an existing group. \u201cLink number#77\u201d in this display means that the IP information registered this time is also used as a P-code in which an attached section (surfix) \u201c#77\u201d is attached to the IP P-code (parent code section) of the link destination. That is, the IP information subjected to group setting can be accessed as the IP P-code of itself or as the IP P-code of the link destination (identified by the attached section), and the latter is mainly used to update information. When the \u201cOK\u201d button is clicked, the flow advances to step S.","In step S, a dialog box shown in  is displayed. The list of input matters is displayed together with the IP P-code assigned to the registered IP information. When the information provider confirms display and clicks the \u201cregister\u201d button, the flow advances to step S.","In step S, the P service server  stores the information input by the above processing in the IP information registration table shown in  in correspondence with the IP P-code assigned to the information provider. The information can also be transferred to the IP server  and held by the IP server .","When the information provider will register IP information not in the P service server  but in the IP server  from the information provider terminal, registration is generally done according to the above-described procedure.","In this case, the P service server  allocates a usable IP P-code area to the IP server  in advance. The IP server  can assign an IP P-code to the information provider from the IP P-codes in the allocated area. The IP server  notifies the P service server  of at least the assigned P-code to perform IP information registration processing. This will be described later with reference to .","In this way, the entire IP information registration processing is ended.","<Advertisement Information Registration>","In the P service system, an advertisement provider who provides advertisement information must register the contents of advertisement information in the P service server  or IP server .","To do this registration, the advertisement provider accesses the P service server  or IP server  from a terminal (not shown) (to be referred to as an advertisement provider terminal hereinafter) of the advertisement provider through the Web or presents a storage medium such as a CD-ROM in which contents of advertisement information are stored to the operator of the P service system.","The procedure of advertisement information registration will be described below by exemplifying a case wherein the advertisement provider registers advertisement information in the P service server  through the Web.","When the advertisement provider accesses advertisement information registration in the P service server  from the advertisement provider terminal, the P service server  executes processing in step S in  and internally issues a P-code for advertisement information. This P-code is exclusively used for internal processing of the P service server  and therefore is not disclosed to the advertisement provider in principle.","After that, the flow advances to step S to execute advertisement information registration processing.",{"@attributes":{"id":"p-0283","num":"0288"},"figref":"FIG. 54"},"In this advertisement information registration processing, windows for advertisement information registration are displayed on the display of the advertisement provider terminal, and the advertisement provider is caused to input matters to be registered by so-called GUI, as in the above-described user registration processing and IP information registration processing.","In step S, a dialog box shown in  is displayed, and it is determined whether the advertisement provider is a member of the P service system. A member means a person who has made an application as an information provider in advance. A nonmember cannot provide advertisement information because advertisement insertion is charged for. A membership number and password are assigned in accordance with an application.","When the advertisement provider is a member, he\/she checks the radio button \u201cYes\u201d in this dialog box and also inputs the membership number. When the advertisement provider is a nonmember, he\/she checks the radio button \u201cNo\u201d. When \u201cnext\u201d is clicked, the flow advances to step S for a nonmember. For a member, a dialog box shown in  is displayed to request to input a password. If the password input by the advertisement provider is authentic, the flow advances to step S.","When \u201cnext\u201d is clicked in each dialog box, input information is stored, and the flow advances to the next processing. When \u201cback\u201d is clicked, input information is stored, and the flow returns to immediately preceding processing. When \u201ccancel\u201d is clicked, the flow returns to the first dialog box without storing input information. This also applies to the following processing.","In step S, a dialog box shown in  is displayed to cause the advertisement provider as a nonmember to input information for specifying the advertisement provider. This is because advertisement insertion is charged for, as described above. After the input, when \u201cnext\u201d is clicked, the flow advances to step S.","In step S, a dialog box shown in  is displayed to designate advertisement information to be registered. The advertisement provider inputs the file name of the entity (contents) of advertisement information stored in the advertisement provider terminal. In this case, a plurality of file names can be designated. The functions of the \u201cdesignate file\u201d and \u201cdelete\u201d buttons are the same as in the above-described IP information registration processing shown in . The advertisement information to be registered may be either an image or character information.","When \u201cnext\u201d is selected in the dialog box shown in , the flow advances to step S.","In step S, the contents of the designated file are displayed as a preview (), and the advertisement provider is made to confirm it. After the confirmation, when the advertisement provider clicks the \u201cnext\u201d, a dialog box shown in  is displayed, and the designated file is transferred to the P service server . After the transfer, the flow advances to step S.","In step S, a property of the transferred advertisement information is set. In setting the property, a dialog box shown in  is displayed, so the date of start of insertion and valid dates (due date of insertion) of the advertisement information can be set. When \u201cnext\u201d is clicked in the dialog box shown in , a dialog box shown in  is displayed to set another property.","In this dialog box, a method of linking the advertisement information to IP information in which insertion of the advertisement information is requested is set. In accordance with the display of the dialog box, insertion of the advertisement information into IP information common in association with any one of the region, age group, sex, and keyword or contents of information can be designated. For example, when \u201cregion\u201d is selected, and the \u201cset details\u201d button is clicked in , a dialog box shown in  is displayed, and specific region setting can be done. When \u201cnext\u201d is selected in the dialog box shown in , a dialog box shown in  is displayed to set still another property.","In this dialog box, the size and the like of the advertisement information transferred to the P service server  are displayed. The advertisement provider can designate the size in printing, enable\/disable state of enlargement\/reduction of advertisement information, and print position. For example, when the right arrow of the drop-down list box of the print size selection column is clicked, the list of print sizes is displayed, as shown in , and the advertisement provider can select a desired print size. When \u201cnext\u201d is selected in the dialog box shown in , a dialog box shown in  is displayed to set still another property.","In this dialog box, the insertion scheme of the advertisement information to be printed is set. The advertisement provider can check the check box of a desired limitation item to impose the limitation. Except the limitation items shown in , a limitation may be imposed on a change in contents corresponding to color or monochrome print, insertion at the same position when a plurality of pages are printed, or generation of a series of advertisement information. When \u201cnext\u201d is selected in the dialog box shown in , a dialog box shown in  is displayed to set still another property.","In this dialog box, a charge for insertion of the advertisement information is set. In this dialog box, a charge per insertion of advertisement information is displayed, and the limit of the total charge can be designated by setting the print count or the upper limit of charge for insertion. When the radio box \u201cdesignate maximum print count\u201d is checked, the count can also be designated. When the radio box \u201cdesignate upper limit of advertisement charge\u201d is checked, the upper limit of charge for insertion can also be designated.","Property setting in step S is ended, and the flow advances to step S.","In step S, a dialog box shown in  is displayed. The list of input matters is displayed. The P-code is not displayed in principle. When the advertisement provider confirms the display and clicks the \u201cregister\u201d button, the flow advances to step S. When the \u201cregister\u201d button is clicked, a dialog box shown in  may be displayed to allow the advertisement provider terminal to print the particulars of the registered advertisement information.","In step S, the P service server  stores the information input by the above processing in the advertisement information table shown in  in correspondence with the P-code issued in advance. The information may be transferred to the IP server . The P service server  always holds the properties (advertisement information table) of the registered advertisement information. However, the entity (contents) itself can be held by either the P service server  or IP server .","When the advertisement provider will register advertisement information not in the P service server  but in the IP server  from the advertisement provider terminal, registration is generally done according to the above-described procedure.","In this case, the P service server  allocates a usable P-code area to the IP server  in advance. The IP server  can assign a P-code from the P-codes in the allocated area. The IP server  finally transfers the assigned P-code and its table information to the P service server  to perform advertisement information registration processing.","In this way, the entire advertisement information registration processing is ended.","<P-Code Issue Processing>","P-code issue processing in steps S, S, and S in  will be described next.",{"@attributes":{"id":"p-0304","num":"0309"},"figref":"FIG. 70","b":"111"},"When user information is registered, one of the portable telephone number, telephone number, and FAX number of the user is input by the above-described procedure according to GUI. For a personal P-code, one of the input numbers is used for the number section (P-code number) of the P-code. In this embodiment, priority is given in the order of the portable telephone number, telephone number, and FAX number. Hence, when a plurality of numbers are input by the user, the number used for the number section of the P-code is determined in accordance with this priority. For example, when a portable telephone number and telephone number are input, the portable telephone number with a higher priority is used to issue a P-code.","When the portable telephone number is input, the flow advances from step S to step S to extract the portable telephone number. If not the portable telephone number but the telephone number is input, the flow advances from step S to step S to extract the telephone number. If only the FAX number is input, the flow advances from step S to step S to extract the FAX number. If none of the portable telephone number, telephone number, and FAX number are input, the flow advances to error processing in step S to prompt the user to input at least one of the portable telephone number, telephone number, and FAX number.","When the number is extracted in one of steps S, S, and S, it is checked in step S whether the extracted number is not common to a used personal P-code. If NO in step S, the flow advances to step S to notify the user of it. When the extracted number is unique in the personal P-code, the flow advances from step S to step S to determine the extracted number as the number section of the P-code and assign the P-code to the user.","In this way, the personal P-code is determined on the basis of the portable telephone number, telephone number, or FAX number of the user.","IP P-code issue in step S in  will be described next. An IP P-code is issued by the P service server  or IP server .","To issue an IP P-code by the IP server , personal information ID number (internal code) is connected to a site number (external code) assigned to the IP server in advance to generate a P-code. More specifically, each IP server has a site number (external code, ) assigned from the P service server . In accordance with an IP information registration request, the IP server  assigns an internal code and links the external code to the internal code to obtain one P-code. The number of P-codes that can be assigned by the IP server equals the number of internal codes. Hence, processing of assigning an external code to the IP server will be described first, and IP P-code issue processing will be described then.",{"@attributes":{"id":"p-0311","num":"0316"},"figref":"FIG. 71"},"In step S, when a P-code request is received from the IP server, the site scale is determined in step S (the site scale is determined in accordance with a scale request from the IP server). When the site scale is determined, four bits from the 17th bit to the 20th bit in  are determined (since the code is to be assigned to an external server, the 17th bit (server identification bit) is \u201c0\u201d). In step S, the code value of the external code section determined in accordance with the site scale determined in step S is determined. For example, when the site scale is medium, the 21st to 36th bits are used as bits for the external code, as shown in , so a code value represented by 16 bits is determined. The code value determined herein is a code that has not been assigned yet to another site at that time.",{"@attributes":{"id":"p-0313","num":"0318"},"figref":["FIG. 72","FIG. 72"],"b":["200","3023"]},"In step S, the site that has requested a P-code is notified of the value determined in steps S and S as an external code. Upon receiving the site number (external code) from the P service server , the site that has requested a P-code can issue a P-code corresponding to IP information using personal information ID bits (internal code) according to the site scale.","In step S, the P-code use registration table shown in  is updated. More specifically, in the external code determined in steps S and S and the URL (database identification information) of the site that has requested a P-code are registered in the P-code use registration table shown in  in correspondence with each other. When an IP P-code is designated later from the P service terminal , the P service server  can know the site that is to be notified of the designated P-code to obtain information by looking up this P-code use registration table.","P-code issue processing in the server (P service server or IP server) which has received an IP information registration request will be described next. In the following processing example, a P-code is issued using a P-code use table in which the valid date of each P-code is registered.",{"@attributes":{"id":"p-0317","num":"0322"},"figref":["FIG. 73","FIG. 73","FIG. 7","FIG. 44"],"b":"200"},"For a personal P-code in the P service server , the number section of the P-code is constructed by a 40-bit code section. For this reason, the code represented by 40 bits is registered in the column \u201cnumber section of P-code\u201d.",{"@attributes":{"id":"p-0319","num":"0324"},"figref":["FIG. 74","FIG. 19","FIG. 18"],"b":["112","3041","3042","200"]},"An unused P-code means a P-code whose \u201cterm of validity of code\u201d has expired. To determine whether a P-code is unused, the table may be searched for a P-code that has expired at the time of issue. Alternatively, time information of year, month, and day may be always compared with the valid dates of code in the table, and an unused identifier may be stored in the table when the code has expired.","In step S, the P-code use table in the server is updated. More specifically, the newly assigned P-code is stored, and the valid dates of the P-code are set at the valid dates designated at the time of IP information registration, or at a date after a predetermined period (e.g., after three months) from the valid dates of the IP information set by the information provider.","In this way, an IP P-code is issued. In issuing an IP P-code, the valid dates of the code are looked up. In extracting information corresponding to the designated IP P-code, it is checked whether the current time falls within the range between the \u201cdate of start of insertion\u201d and \u201cvalid dates of information\u201d, which are registered in the IP information registration table () of the P-code.","In this example, to perform issue processing at a high speed, a table as shown in  is prepared. However, since the valid dates of the code are registered in the IP information registration table shown in , a P-code may be issued by looking up this table. Additionally, for example, an IP code usable in the server may be temporarily issued for information registration, and it maybe determined whether the temporarily issued code can be used, by looking up the valid dates of the code registered in the IP information registration table. In this case, it is determined whether the time (year, month, and day) of temporary code issue is before the valid dates of the code. If it is determined that the code has expired, issue of the IP code is inhibited, and temporary issue of another IP code and determination are repeated until an IP code is finally issued.","The procedure of issuing a P-code for advertisement information is basically the same as the procedure of issuing a P-code for IP information.","<Description of Various Services>","Details of information acquisition processing (to be referred to as an information service hereinafter) in step S, mail data acquisition processing (to be referred to as a mail service hereinafter) in step S, personal information acquisition processing (to be referred to as a personal information service hereinafter) in step S, distribution data acquisition processing (to be referred to as a distribution service (reception of registered information) hereinafter) in step S, and distribution information registration processing (to be referred to as a distribution service (registration of information) hereinafter) in step S, and examples of display windows displayed on the touch panel  of the P service terminal  in executing each processing will be described next.","An initial window for executing the services will be described first with reference to .","Referring to , an initial window  has buttons  to . To execute the information service, mail service, personal information service, or distribution service (reception of registered information), a P-code for executing the service is input using one of the buttons  to . The button  is pressed to input a P-code using the touch panel . The button  is pressed to input a P-code using the portable terminal . The button  is pressed to input a P-code using the bar code reader . The button  is pressed for the distribution service (registration of information) (to be described later).","When the button  in the initial window  is pressed, a window  shown in  is displayed.","The window  is a P-code input window in which a P-code for executing various services including the information service, mail service, distribution service (reception of registered information), and personal information service is input.","The window  has a ten-key group . A desired P-code is input using the keys of the ten-key group . The input P-code is displayed in an area . After the end of input, a button  is pressed to acknowledge the input P-code. To cancel the input P-code, a button  is pressed to delete the P-code displayed in the area . To correct the input P-code, a button  is pressed to correct the P-code to be corrected using a cursor (not shown) on the area . A button  is pressed to input a P-code associated with foreign information.","When the button  is pressed, the structure of the input P-code is determined. On the basis of the determination result, a window for executing various services including the information service, mail service, distribution service (reception of registered information), and personal information service or a window  shown in  is displayed. If the input P-code has expired, a window (not shown) for notifying the user of it is displayed.","The window  shown in  has a ten-key group  for inputting a password and buttons  to . In an area , \u201c*\u201d is displayed as the password is input.","When the button  is pressed after completion of password input, a window for executing various services including the information service, mail service, distribution service (reception of registered information), and personal information service is displayed on the basis of the determination result of the structure of the P-code input in the window  in . In this embodiment, a P-code input as a number sequence hyphened in units of four digits (in units of four numbers) is determined as a \u201cnontelephone number\u201d (IP P-code), and a P-code input as another type of number sequence (unhyphened number sequence or a number sequence hyphened in units of digits other than four digits) is determined as a \u201ctelephone number\u201d (personal P-code).","When it is determined that the input P-code is \u201ctelephone number#Subcode\u201d, a window for executing the mail service is displayed. When the input P-code is \u201ctelephone number-Subcode\u201d, a window for executing the distribution service (reception of registered information) is displayed.","When the input P-code is \u201cnontelephone number\u201d, a window for executing the information service is displayed.","When the input P-code is \u201ctelephone number##Subcode\u201d, a window for executing the personal information service is displayed.","When the button  in the initial window  shown in  is pressed, a window  shown in  is displayed.","The window  is a P-code input window by the portable terminal . After completion of input, when a button  is pressed, the structure of the input P-code is determined. On the basis of the determination result, a window for executing various services including the information service, mail service, distribution service (reception of registered information), and personal information service or the window  shown in  is displayed. To cancel the input P-code, a button  is pressed. If the input P-code has expired, a window (not shown) for notifying the user of it is displayed.","When the button  in the initial window  shown in  is pressed, a window  shown in  is displayed.","The window  is a P-code input window by the bar code reader . After completion of input, when a button  is pressed, the structure of the input P-code is determined. On the basis of the determination result, a window for executing various services including the information service, mail service, distribution service (reception of registered information), and personal information service or the window  shown in  is displayed. To cancel the input P-code, a button  is pressed. If the input P-code has expired, a window (not shown) for notifying the user of it is displayed.","Windows displayed on the basis of the determination result of the structure of the input P-code will be described next.","A window for executing the information service, which is displayed when the input P-code is a nontelephone number, will be described first with reference to .","When the input P-code is an IP P-code, the contents of information corresponding to the IP P-code are displayed in a window . More specifically, in an area , P-codes, titles of information corresponding to the P-codes, the number of pages, printing charges, and printing conditions (in this embodiment, color or monochrome printing and the presence\/absence of printing can be particularly designated as printing conditions, for which buttons to are prepared) are displayed.","In an area , charge information in printing the information displayed in the area  is displayed. The area  has a button which is pressed to print an advertisement together with the information. When the button is pressed, a window shown in  is displayed to set advertisement insertion conditions. This window will be described later in detail.","A button  is pressed to display the print preview of information to be printed. A button  is pressed to print information to be printed. A button  is pressed to display the preceding window. A button  is pressed to cancel the contents set in the window . A button  is pressed to input another P-code. When the button  is pressed, the window  shown in  is displayed again.","When the button  is pressed, a window  shown in  is displayed.","In the window , an area  is a preview area where the contents of information to be printed are displayed. A button  is pressed to display the next page of information to be printed. A button  is pressed to display the preceding page of information to be printed. A button  is pressed to display the main window (in this embodiment, the window  shown in ).","When the button in the window  shown in  is pressed, a window  shown in  is displayed.","In the window , insertion conditions of advertisements to be printed together with information to be printed are set. In the window , the insertion condition set item group (in this embodiment, \u201cprint in free space of article\u201d, \u201cprint on lower surface\u201d, and \u201cprint another page\u201d) is displayed. The presence\/absence of execution of each item can be designated by a button group . A button  is pressed to acknowledge the set insertion conditions. A button  is pressed to cancel the set insertion conditions.","In the window , the user can set the advertisement insertion conditions. Instead, the P service server  may search for an appropriate advertisement for information to be printed such that the charge for printing the information to be printed is nullified, and generate print data constructed by the searched advertisement and information to be printed. Advertisement search processing by the P service server  will be described later.","Next, a window for executing the mail service, which is displayed when the input P-code is \u201ctelephone number#Subcode\u201d, and a window for executing the distribution service (reception of registered information), which is displayed when the input P-code is \u201ctelephone number-Subcode\u201d, will be described with reference to .","In this embodiment, it is determined, by identifying a predetermined symbol contained in the P-code, whether the surfix portion attached to the telephone number is \u201c#Subcode\u201d, \u201c-Subcode\u201d, or \u201c##Subcode\u201d, thereby determining the service to be executed: the mail service, distribution service, or personal information service. Instead, the type of service to be executed may be determined by the P service server  on the basis of the input personal P-code by directly looking up the P-code table shown in , , and , and on the basis of the determination result, a window to be displayed (an operation window associated with the service) may be determined.","A window for executing the mail service will be described with reference to .","A window  is a window for displaying the contents of user's mail corresponding to a personal P-code represented by the input P-code. More specifically, in an area , the surfix (#n, n: 0, 1, 2, . . . ) in an input P-code, the subject of mail corresponding to the P-code, sender, the number of pages, printing conditions (in this embodiment, color or monochrome printing and the presence\/absence of printing can be particularly designated as printing conditions, for which buttons to are prepared) are displayed.","In an area , the printing contents of mail to be printed in the area  are displayed. In addition to this area, the button in the window  shown in  may be displayed to allow the user to set insertion of an advertisement to the mail, or an appropriate advertisement for the mail to be printed may be searched by the P service server .","A button  is pressed to display a print preview of mail to be printed. When the button  is pressed, the window shown in  described above is displayed. A button  is pressed to set print options for mail to be printed. When the button  is pressed, a window shown in  is displayed to set print options. This window will be described later in detail. A button  is pressed to print mail to be printed. A button  is pressed to display the preceding window. A button  is pressed to cancel contents set in the window .","A button  is pressed to print all mail messages managed by the P service server . A button  is pressed to display, of mail messages out of the area , the contents of mail messages with smaller surfix numbers. A button  is pressed to display, of mail messages out of the area , the contents of mail messages with larger surfix numbers.","In this embodiment, when the surfix number (#n) attached to the telephone number, i.e., the input P-code, is \u201c0\u201d, mail messages corresponding to the surfix number are displayed as many as possible, as shown in the area . If the surfix has a number other than \u201c0\u201d, a mail message corresponding to a surfix matching the number is displayed. In a window for executing the distribution service (reception of registered information), which is displayed when the input P-code is \u201ctelephone number-Subcode\u201d, in the area , display of contents of information registered in the distribution service is controlled in accordance with the surfix number, as in displaying the contents of mail. Although not illustrated, a function of deleting mail without printing the mail information is provided.","The window  is a window for setting print options of mail to be printed. As shown in , an item group settable as print options (in this embodiment, \u201ccontinuously print mail messages on one paper sheet\u201d and \u201cdensely print with smallest letters\u201d) are displayed in the window . The presence\/absence of execution of each item can be designated by a button group . A button  is pressed to acknowledge the set print options. A button  is pressed to cancel the set print options.","A window for executing the personal information service, which is displayed when the input P-code is \u201ctelephone number##Subcode\u201d, will be described next with reference to .","When the input P-code represents the personal information service, the contents of the personal information service are displayed in a window . More specifically, in an area , surfixes (##m, m: 0, 1, 2, . . . ) in the input P-codes, contents of information corresponding to the P-codes, the number of pages, and buttons and for setting the presence\/absence of printing are displayed.","In an area , the print contents of information to be printed in the area  are displayed.","An information group managed by a surfix (##m) is called a frame.","A button  is pressed to register a new frame or change the contents of a registered frame. When the button  is pressed, a window shown in , which is used to register\/change information, is displayed. This window will be described later in detail. A button  is pressed to display a print preview of a frame to be printed. A button  is pressed to print a frame to be printed. A button  is pressed to display the preceding window. A button  is pressed to cancel contents set in the window .","A button  is pressed to print all frames managed by the P service server . A button  is pressed to display, of frames out of the area , the contents of frames with smaller surfix numbers. A button  is pressed to display, of frames out of the area , the contents of frames with larger surfix numbers.","In this embodiment, when the surfix number (##m) attached to the telephone number, i.e., the input P-code, is \u201c0\u201d, as many frames as possible corresponding to the surfix number are displayed, as shown in the area . If the surfix has a number other than \u201c0\u201d, a frame corresponding to a surfix matching the number is displayed.","When the button  is pressed, a window  shown in  is displayed.","The window  has a ten-key group  for designating a surfix (##m) to be registered or changed, and an area  for displaying the input surfix (##m). Especially, to register a new frame, a button  is pressed. A button  is pressed to acknowledge the input surfix (##m). A button  is pressed to cancel the input surfix (##m). A button  is pressed to correct the input surfix (##m).","When the button  or  is pressed, a window  shown in  is displayed.","The window  is a window for displaying the contents of an information group managed by a frame corresponding to the surfix (##m) input to the area . More specifically, P-codes managed by the frame, contents corresponding to the P-codes, and buttons and for setting the presence\/absence of registration are displayed in an area .","A button  is pressed to register another information (P-code) in this frame. When the button  is pressed, the above-described window for registering a P-code, shown in , is displayed. When the ten-key group  shown in  is pressed to register a new frame, the area  is blank because no information is managed by the frame corresponding to the input surfix (##m).","A button  is pressed to acknowledge the registered state of information of the frame to be registered. A button  is pressed to display the preceding window. A button  is pressed to cancel contents set in the window .","When the button  is pressed, a window  shown in  is displayed.","The window  is a window for setting the size of a paper sheet used to print a registered frame. In areas , , and , the sizes of paper sheets usable for printing are displayed. When the user presses the area of a desired paper size, display of the pressed area is inverted to notify the user of designation of the paper size. Buttons  and  are used to set the direction (landscape or portrait) of the paper sheet. to be used. A button  is pressed to acknowledge the designated size and direction of the paper sheet to be used for printing. A button  is pressed to display the preceding window. A button  is pressed to cancel contents set in the window .","Windows for executing the distribution service (registration of information) which is executed when the button  in the initial window  shown in  is pressed will be described sequentially.","When the button  in the initial window  is pressed, a window  shown in  is displayed.","The window  is a P-code input window in which a P-code (user's telephone number) for executing the distribution service (registration of information) is input.","The window  has a ten-key group . A P-code is input using the keys of the ten-key group . The input P-code is displayed in an area . To acknowledge the input P-code, a button  is pressed. To cancel the input P-code, a button  is pressed to erase the P-code displayed in the area . To correct the input P-code, a button  is pressed to correct the P-code to be corrected using a cursor (not shown) on the area . A button  is pressed to input a foreign P-code.","When the button  is pressed, a window  shown in  is displayed. If the input P-code has expired, a window (not shown) for notifying the user of it is displayed.","Constituent elements  to  in the window  and functions thereof correspond to those of the constituent elements  to  in the window  shown in , respectively, and a detailed description thereof will be omitted.","When the button  in the window  shown in  is pressed, a window  shown in  is displayed.","The window  is a window for selecting an information registration method in the distribution service (registration of information). A button  is pressed to register information using a scanner. A button  is pressed to register information using an external device. When one of the buttons is pressed, a window corresponding to the button is displayed. These windows will be described later in detail. A button  is pressed to display the preceding window. A button  is pressed to cancel registration of information.","When the button  is pressed, a window  shown in  is displayed.","The window  is a window for instructing the user to set an original to be registered on the scanner . A button  is pressed to execute an input operation for the set original. When the button  is pressed, a window  shown in  is displayed. A button  is pressed to display the preceding window. A button  is pressed to cancel the input operation for the set original.","When the button  in the window  shown in  is pressed, the same window as the dialog box shown in  is displayed, so information can be registered using an external device such as the disk unit  or infrared communication section . When information to be registered is designated, and \u201cnext\u201d is selected, the window  shown in  is displayed. The information to be registered can be either an image or character information.","The window  shown in  is a window for displaying a preview of information to be registered. In an area , a preview of information to be registered is displayed. A button  is pressed to display a preview of information next to the information that is currently being displayed. A button  is pressed to register another information. When this button is pressed, the window shown in  is displayed. A button  is pressed to cancel registration of the information displayed in the area . A button  is pressed to register the information displayed in the area .","When the button  is pressed, a window  shown in  is displayed.","The window  is a window for setting a password requested when another user prints the information to be registered. This window has a ten-key group , and a desired password is input using the keys of the ten-key group . As the password is input, the password is displayed in an area . After completion of input, to acknowledge the input password, a button  is pressed. To cancel the input password, a button  is pressed. To correct the input password, a button  is pressed to correct the password to be corrected using a cursor (not shown) on the area .","When the button  is pressed, a window  shown in  is displayed.","The window  is a window for setting the valid dates of the information to be registered. A button  is pressed to validate the information until tomorrow. A button  is pressed to validate the information for one week. A button  is pressed to validate the information for one month. A button  is pressed to display the preceding window. A button  is pressed to cancel setting of the valid dates of the information to be registered.","When one of the buttons , , or  is pressed, a window  shown in  is displayed.","The window  is a window for causing the user to confirm the registered contents of the information to be registered. More specifically, in an area , the P-code, password, data amount, valid dates corresponding to the information to be registered are displayed. A button  is pressed to acknowledge the registered contents of the information to be registered. A button  is pressed to display the preceding window. A button  is pressed to cancel the registered contents of the information to be registered. When the registered contents of the information to be registered are acknowledged, the number of registered data set in the user information table shown in  for the distribution service is incremented by one, and the P-code (P-code in the form of \u201ctelephone number-Subcode\u201d) attached to the registered information is added to the P-code list of the distribution service information. In addition, the information displayed in the area  is registered in the distribution information P-code table shown in .","A window  shown in  is displayed in accordance with the window displayed to execute various services including the information service, mail service, distribution service (reception of registered information), personal information service, and distribution service (registration of information).","The window  is a window for selecting a settlement method for a charge generated when the information service, mail service, distribution service (reception of registered information), personal information service, or distribution service (registration of information) is executed. The charge is displayed at the lower left side of the window. The user presses a button  to pay the charge in cash, a button  to pay using a credit card, a button  to pay by online settlement, a button  to pay using a debit card, or a button  to pay using a prepaid card. A window (not shown) necessary for settlement is displayed as one of the buttons is pressed.","A button  is pressed to display the preceding window. A button  is pressed to cancel execution of selection of the settlement method.","The above-described windows displayed to execute various services including the information service, mail service, distribution service (reception of registered information), personal information service, and distribution service (registration of information) are examples of main windows displayed in executing operation. In the process of operation, various windows including a window for causing the user to confirm displayed contents and a window for input are appropriately displayed.","Next, processing flows for executing various services including the information service, mail service, distribution service (reception of registered information), personal information service, and distribution service (registration of information) will be described sequentially.","In the following processing flows, the P service server  looks up the tables shown in  and transmits information corresponding to a P-code received from the P service terminal  or data (property data or preview image) necessary for the information to the P service terminal . In addition, in accordance with data such as a print instruction for information corresponding to a P-code transmitted from the P service terminal , the contents of the tables shown in  are updated.","A processing flow for executing the information service will be described first with reference to .",{"@attributes":{"id":"p-0400","num":"0405"},"figref":["FIG. 98A","FIG. 98B"]},"In step S, (1) the user acquires a P-code by the portable terminal . (2) The user moves to the P service terminal  while keeping the P-code stored in the portable terminal . (3) The P-code is input to the P service terminal  (, , , and ). (4) P service terminal  transmits the input P-code and the terminal properties (e.g., location of installation and printer performance) of the P service terminal  itself to the P service server .","In step S, (5) the P service server  acquires information corresponding to the received P service server . In step S, (6) the P service server  transmits the contents of the information, including the property data such as the service type, preview image, and the number of pages, to the P service terminal . (7) The P service terminal  displays the received contents of the information, including the property data, preview image, and the number of pages, on the touch panel  (). If a print preview or setting for advertisements is instructed, corresponding windows () are appropriately displayed to receive inputs from the user.","In step S, (8) it is determined whether printing of the displayed information is instructed. (9) If cancel of printing is instructed (NO in step S), the P service terminal  transmits a message representing that cancel is instructed to the P service server , and processing is ended. On the other hand, (9) when printing is instructed (YES in step S), the P service terminal  requests the P service server  to prepare print data of the information corresponding to the P-code, and the flow advances to step S.","In step S, it is determined whether the information to be printed is charged for. (10) If the information is free (NO in step S) the flow advances to the next processing. (11) If the information is charged for (YES in step S), the flow advances to step S to receive the settlement method for settlement processing in printing from the user. (12) In accordance with the settlement method, the P service terminal  and P service server  exchange necessary data (). The P service terminal  receives the print data of the information to be printed from the P service server  and prints the data.","A processing flow for executing the mail service will be described next with reference to .",{"@attributes":{"id":"p-0406","num":"0411"},"figref":["FIG. 99A","FIG. 99B"]},"In step S, (1) the user acquires a P-code by the portable terminal . (2) The user moves to the P service terminal  while keeping the P-code stored in the portable terminal . (3) The user inputs the P-code to the P service terminal  (, , , and ). (4) The P service terminal  transmits the input P-code and the terminal properties (e.g., location of installation and printer performance) of the P service terminal  itself to the P service server .","In step S, (5) when the P service server  recognizes that the received P-code is a P-code for the mail service, (6) the P service terminal  requests the user to input the password (). In step S, (7) the password is confirmed. If the password is not correct (NO in step S), the user is requested to re-input the password. However, if an incorrect password is input a plurality of number of times, processing is ended. If the password is correct (YES in step S), the flow advances to step S.","In step S, (8) the P service server  acquires mail corresponding to the received P-code. In step S, the P service server  transmits contents of the acquired mail, including property data (sender and subject), to the P service terminal . (9) The P service terminal  displays the received contents of mail including the property data on the touch panel  (). If a print preview or option setting is instructed, corresponding windows () are appropriately displayed to receive inputs from the user.","In step S, it is determined whether printing of the displayed mail is instructed. (11) If cancel of printing is instructed (NO in step S), the P service terminal  transmits a message representing that cancel is instructed to the P service server , and processing is ended. On the other hand, (11) when printing is instructed (YES in step S), the P service terminal  requests the P service server  to prepare print data of the mail corresponding to the P-code, and the flow advances to step S.","In step S, it is determined whether the mail to be printed is charged for. (12) If the mail is free (NO in step S), the flow advances to the next processing. (13) If the mail is charged for (YES in step S), the flow advances to step S to receive the settlement method for settlement processing in printing from the user. (14) In accordance with the settlement method, the P service terminal  and P service server  exchange necessary data (). In step S, the P service terminal  receives the print data of the mail to be printed from the P service server  and prints the data. When printing is ended in step S, the printed mail information is automatically deleted from the P service server upon transmitting a print end notification to the P service server.","A processing flow for executing the distribution service (reception of registered information) will be described with reference to .",{"@attributes":{"id":"p-0413","num":"0418"},"figref":["FIG. 100A","FIG. 100B"]},"In step S, (1) the user acquires a P-code by the portable terminal . (2) The user moves to the P service terminal  while keeping the P-code stored in the portable terminal . (3) The P-code is input to the P service terminal  ( to ). (4) The P service terminal  transmits the input P-code and the terminal properties (e.g., location and installation and printer performance) of the P service terminal  itself to the P service server .","In step S, (5) when the P service server  recognizes that the received P-code is a P-code for the distribution service (reception of registered information), (6) the P service terminal  requests the user to input the password (). In step S, the password is confirmed. The password to be confirmed herein is a password set for individual distribution information. If the password is not correct (NO in step S), the user is requested to re-input the password. However, if an incorrect password is input a plurality of number of times, processing is ended. If the password is correct (YES in step S), the flow advances to step S.","In step S, (7) the P service server  acquires information corresponding to the received P-code. In step S, the P service server  transmits contents of the acquired information, including property data (information provider and subject), to the P service terminal . (8) The P service terminal  displays the received contents of information including the property data on the touch panel .","In step S, (9) it is determined whether printing of the displayed information is instructed. (10) If cancel of printing is instructed (NO in step S), the P service terminal  transmits a message representing that cancel is instructed to the P service server , and processing is ended. On the other hand, (10) when printing is instructed (YES in step S), the P service terminal  requests the P service server  to prepare print data of the information corresponding to the P-code, and the flow advances to step S.","In step S, it is determined whether the information to be printed is charged for. (11) If the information is free (NO in step S), the flow advances to the next processing. (12) If the information is charged for (YES in step S), the flow advances to step S to receive the settlement method for settlement processing in printing from the user. (13) In accordance with the settlement method, the P service terminal  and P service server  exchange necessary data (). The P service terminal  receives the print data of the information to be printed from the P service server  and prints the data.","A processing flow for executing the personal information service will be described with reference to .",{"@attributes":{"id":"p-0420","num":"0425"},"figref":["FIG. 101A","FIG. 101B"]},"In step S, (1) the user acquires a P-code by the portable terminal . (2) The user moves to the P service terminal  while keeping the P-code stored in the portable terminal . (3) The P-code is input to the P service terminal  ( to ). (4) The P service terminal  transmits the input P-code and the terminal properties (e.g., location of installation and printer performance) of the P service terminal  itself to the P service server .","In step S, (5) when the P service server  recognizes that the received P-code is a P-code for the personal information service, (6) the P service terminal  requests the user to input the password (). In step S, the password is confirmed. If the password is not correct (NO in step S), the user is requested to re-input the password. However, if an incorrect password is input a plurality of number of times, processing is ended. If the password is correct (YES in step S), the flow advances to step S.","In step S, (7) the P service server  acquires a frame corresponding to the received P-code. In step S, (8) the P service server  transmits contents of the acquired frame, including property data (information provider and subject), to the P service terminal , and (9) the P service terminal  displays the received contents of the frame including the property data on the touch panel  (). When registration of new information or a change in registered information is instructed, corresponding windows () are appropriately displayed to receive inputs from the user.","In step S, (10) it is determined whether printing of the displayed frame is instructed. (11) If cancel of printing is instructed (NO in step S), the P service terminal  transmits a message representing that cancel is instructed to the P service server , and processing is ended. On the other hand, (11) when printing is instructed (YES in step S), the P service terminal  requests the P service server  to prepare print data of the frame corresponding to the P-code, and the flow advances to step S. The print data of the frame is generated from the registered P-code list registered in the personal information service P-code table shown in . Each P-code registered in the registered P-code has been subjected to group setting in this embodiment. For each P-code subjected to group setting, P-code information having a maximum subcode of the attached section is acquired from the IP information table shown in . All the acquired P-code information have link information to another P-code. Hence, information to be printed can be acquired by searching for the P-code set as link information again. If the date of registration of the acquired information to be printed is before the final date of printing set in the personal information service P-code table shown in , it is regarded that this information has been printed in the past, and therefore the information is not printed. If all dates of registration of individual information acquired from the P-code list registered in the personal information service P-code table are before the final date of printing, a message (not shown) representing that no information to be printed is present is displayed, and processing is ended.","In step S, it is determined whether the frame to be printed is charged for. (12) If the frame is free (NO in step S), the flow advances to the next processing. (13) If the frame is charged for (YES in step S), the flow advances to step S to receive the settlement method for settlement processing in printing from the user. (14) In accordance with the settlement method, the P service terminal  and P service server  exchange necessary data (). The P service terminal  receives the print data of the frame to be printed from the P service server  and prints the data.","A processing flow for executing the distribution service (registration of information) will be described next with reference to .",{"@attributes":{"id":"p-0427","num":"0432"},"figref":["FIG. 102A","FIG. 102B"]},"In step S, (1) the user selects the distribution service (). (2) In accordance with the selection, a window for requesting the user to input a P-code is displayed (). The P-code is input to the P service terminal . The P service terminal  transmits the input P-code and the terminal properties (e.g., location of installation and printer performance) of the P service terminal  itself to the P service server .","In step S, (3) when the P service server  recognizes that the received P-code is a P-code for the distribution service (registration of information), the P service terminal  requests the user to input the password (). If the input P-code is unregistered, password input is not requested. In step S, the password is confirmed. If the password is not correct (NO in step S), the user is requested to re-input the password. However, if an incorrect password is input a plurality of number of times, processing is ended. If the password is correct (YES in step S), the flow advances to step S.","In step S, (4) the user inputs information to be registered (). In step S, (5) the P service terminal  displays contents of the input information on the touch panel  ().","In step S, it is determined whether the displayed contents are acknowledged. If the contents are not acknowledged (NO in step S), the flow returns to step S to request the user to re-input the information. If the contents are acknowledged (YES in step S), (7) the P service terminal  transmits the input information and the property data of the information, including the data type and the number of pages, to the P service server  and requests the P service server to issue a P-code. (8) In accordance with this request, the P service server  starts making a P-code correspond to the received information and the property data of the information, including the data type and the number of pages. The user is requested to input a password to be set for the input information ().","In step S, (9) it is determined whether the input password can be set. If the password cannot be set (NO in step S), the flow returns to step S to request the user to re-input the password. If the password can be set (YES in step S), the flow advances to step S to input the valid dates of the input information (). In step S, (10) the P service server registers the input information and the password and valid dates therefor and issues a P-code corresponding to the information. The P-code to be issued has a combination of a numerical value representing a \u201ctelephone number\u201d and a numerical value representing an \u201cattached number (subcode)\u201d and also has a form of a number sequence, \u201ctelephone number-attached number\u201d, with a predetermined symbol (\u201c-\u201d in this case) inserted between the two numerical value sequences. The attached number is 1 when the number of distribution service information in the user information table shown in  is 0. When the number of distribution service information is not 0, pieces of registered distribution service information searched are searched from the P-code list, and the minimum attached number of a P-code that has expired is used as an attached number. If a registered distribution service information that has expired is not present, \u201cthe number of distribution service information +1\u201d is used as an attached number. In step S, (11) the P service terminal  displays the registered contents (P-code, password, data amount, and valid dates) of the registered information on the touch panel  ().","Details of processing in step S in , step S in , step S in , and step S in  will be described with reference to .","<Procedure of Acquiring Information>",{"@attributes":{"id":"p-0434","num":"0439"},"figref":["FIGS. 103A and 103B","FIGS. 17 and 18","FIG. 18"],"b":["200","3201","100","3202","200"]},"When the P service server  has the contents of the IP information represented by the P-code, the flow advances from step S to step S to acquire the IP information and its properties in accordance with entity file information registered in the IP information registration table shown in .","If it is determined in step S that the contents of the IP information are not present in the P service server  (i.e., the IP information has its contents on the IP server side), the flow advances to step S. In step S, the class category value and external code are extracted from the input P-code. In this processing, the values of the 18th to 20th bits are extracted to obtain a class category value, and the external code section is extracted on the basis of the class category value. For example, when the class category value is 3 (medium scale), the values of the 21st to 36th bits correspond to the external code, as shown in .","When the class category and external code are obtained in the above manner, a corresponding URL is acquired by looking up the P-code use table (to be described later) shown in  in step S. The URL acquired at this time is the address of the IP server having the contents of the P-code. Hence, in step S, the IP server is accessed according to the URL obtained in step S to transmit the P-code. The IP server obtains contents and properties corresponding to the transmitted P-code by looking up the P-code registration table and transmits them to the P service server .","In step S, the contents and properties transmitted from the IP server in the above-described way are received, so the IP information is acquired.","When the input P-code is a personal P-code, the flow advances from step S to step S. In step S, contents specified by the P-code are acquired by looking up the P-code table shown in . If the attached section is \u201c#Subcode\u201d, the flow advances from step S to step S to obtain corresponding mail data and its properties.","When the data attached section is \u201c-Subcode\u201d, the flow advances from step S to step S to acquire distribution data upon authentication by a password.","When the attached section is \u201c##Subcode\u201d, the flow advances from step S to step S to obtain a P-code list (frame) in the personal information service. In step S, acquisition of IP information (the above-described processing in steps S to S) is executed using the P-code registered in the P-code list.","<Advertisement Search Processing>","In the P service system, when a user obtains a print output from the P service terminal , predetermined advertisement information is automatically attached to the print unless the user or information provider rejects it. Processing of searching for advertisement information to be attached will be described below.",{"@attributes":{"id":"p-0443","num":"0448"},"figref":"FIG. 104"},"In step S, a keyword list of information of the information service or personal information service, mail of the mail service, or information of the distribution service is prepared for printing. This keyword list is prepared in the following way in accordance with the contents of each service.","For the information service or personal information service, keywords are extracted by looking up the properties of IP information, properties of user registration of the user, and properties of the P service terminal  for printing.","For the mail service, keywords are extracted by looking up the properties of user registration of the user and properties of the P service terminal  for printing.","For the distribution service, keywords are extracted by looking up the properties of the P service terminal  for printing, and also the properties of user registration of the user when the user has done user registration.","In any service, the keyword list can be prepared in units of information. For example, for the information service, the keyword list of the properties of IP information, the keyword list of the properties of user registration, and the keyword list of the properties of the P service terminal  can be individually prepared. This will be described below in more detail by exemplifying the information service.",{"@attributes":{"id":"p-0449","num":"0454"},"figref":"FIGS. 105A to 105E"},"For example,  shows a keyword list of IP information requested by the user in the information service. As a keyword, \u201cmarriage\u201d is extracted. In , keywords are extracted from the registered matters of user registration. In , a keyword is extracted from the properties (e.g., location of installation) of the P service terminal.","Each keyword has a numerical value of \u201cweight\u201d. This numerical value is given to each keyword in consideration of universally accepted idea on the basis of the contents and used to define priority of advertisement information in advertisement search processing. A numerical value with \u201c+\u201d means that IP information or the like including the keyword has positive contents when viewed from the universally accepted idea. A numerical value with \u201c\u2212\u201d means that the information has negative contents. The magnitude of the numerical value can be proportional to the degree of importance.","In the P service system, in addition to these keyword lists, a highest priority keyword list and lowest priority keyword list set on the system side can be prepared.","The highest priority keyword list is a list of keywords corresponding to an advertisement that informs, e.g., a special campaign held on the P service system. An example of this keyword list is shown in .","The lowest priority keyword list is a list of keywords with which at least one advertisement information can be searched for and is prepared to prevent advertisement search processing from searching no advertisement information. Hence, as a lowest priority keyword, a keyword having wide meaning is used.","In step S, using each keyword as a search key on the basis of the keyword lists prepared in step S, advertisement information having a keyword matching the search keyword is searched for. In step S, the search result list is prepared.",{"@attributes":{"id":"p-0456","num":"0461"},"figref":"FIGS. 106A to 106E"},"The search result lists are prepared in units of the above-described five keyword lists.",{"@attributes":{"id":"p-0458","num":"0463"},"figref":["FIG. 106A","FIG. 105A","FIG. 106A"]},"In this advertisement search processing, an advertisement having a larger value of \u201cdegree of matching\u201d has a higher priority of insertion. As the value becomes small, the priority becomes low.","As shown in , a single keyword has many weights. This is because advertisement information including the keyword \u201cmarriage\u201d may be an advertisement of a wedding ceremony hall or an advertisement of divorce consultation. If they are regarded to be equivalent, inappropriate advertisement information may be inserted into contents of information to be printed.","In processing of this embodiment, if negative advertisement information is searched for in correspondence with positive IP information, values with signs \u201c+\u201d and \u201c\u2212\u201d are multiplied. The degree of matching has a negative value, and the priority can be made low. If negative advertisement information is searched for in correspondence with negative IP information (e.g., an advertisement of funeral and an advertisement of a hospital), values with signs \u201c\u2212\u201d and \u201c\u2212\u201d are multiplied. The degree of matching has a positive value, and the priority becomes high.","In step S, the pieces of advertisement information in the search result list are rearranged by looking up the properties of advertisement information.","In rearranging the pieces of information, on the basis of the properties of each advertisement information, a value is added to or subtracted from the degree of matching calculated in advance. For example, an advertisement whose term of insertion has expired or charge exceeds the maximum charge must not be inserted, and a predetermined numerical value can be subtracted from the calculated degree of matching. On the other hand, for an advertisement whose limitations on printing (designated in the dialog box shown in  or ) are lenient, a predetermined numerical value can be added to the calculated degree of matching for evaluation. This is because such advertisement information can cope with an arbitrary layout and has a higher degree of freedom for printing.","To evenly give opportunities for insertion while giving priority to an advertisement with low insertion frequency, a numerical value corresponding to the insertion frequency may be added to the degree of matching.","In addition, a predetermined numerical value may be added to the degree of matching with priority given to an advertisement for which a large charge is paid from the advertisement provider to the operator of the P service. An advertisement provider who pays a large charge should be treated favorably. This also easily excuses the user compensation for the received service.","With priority given to an advertisement directly associated with information desired by the user, a predetermined numerical value may be added to the degree of matching for the purpose of increasing the business chance of the advertisement provider.","In this way, values are added to or subtracted from the degrees of matching to calculate final numerical values.  show lists of advertisement information rearranged in descending order of the magnitudes of values. As is apparent from , the degree of matching is not always proportional to the numerical value of \u201cweight\u201d.","In step S, a layout example of advertisement information is prepared. A plurality of layout examples are prepared by picking up pieces of advertisement information from the search result lists shown in  in descending order of priority.","Priorities may be defined in units of search result lists shown in . For example, first advertisement information may be picked up from the search result list of the highest priority list (), and then pieces of advertisement information may be sequentially picked up from the search result list of IP information (), the search result list of user registration (), the search result list of the P service terminal (), and the search result list of the lowest priority list ().","In step S, one layout example that is supposed to be most appropriate is selected from the layout examples of advertisement information in consideration of the user's desire, print size, and total charge. The P-code and layout conditions of the advertisement information are specified and temporarily stored, and advertisement search processing is ended.","<Operation of Portable Terminal>","The P-code extraction function and P-code transmission function of the portable terminal  according to this embodiment will be described next.",{"@attributes":{"id":"p-0472","num":"0477"},"figref":"FIG. 108","b":"400"},"In steps S to S, it is determined whether the cursor keys  and  of the portable terminal  are operated, the block designation key  is operated, and the P-code key  is operated.","When the cursor key is operated in the mail displayed state, the flow advances from step S to step S to determine whether block designation is progressing. The block designation mode is set in step S (to be described later) by operating the block designation key. If the block designation mode is not set, the flow advances to step S to move the cursor in units of characters in the display of mail contents. If the block designation mode is set, a region where the cursor has moved is set as a selected region, and display of that portion is inverted. The flow advances to step S. If mail display continues, the flow returns to step S. If mail display is ended, this processing is ended.","When the block designation key  is operated, the flow advances from step S to step S to determine whether the block designation mode has already been set. If NO in step S, the flow advances to step S to switch the operation mode to the block designation mode. If YES in step S, the flow advances to step S to cancel the block designation mode. That is, the block designation key functions as an ON\/OFF switch for the block designation mode. After that, the flow advances to step S. If mail display continues, the flow returns to step S. If mail display is ended, this processing is ended.","When the P-code key  is operated, the flow advances from step S to step S to determine whether a selected region in inverted display is present in the currently displayed character string. If YES in step S, the flow advances to step S to store the selected region in the P-code storage area . If NO in step S, the flow advances to step S to automatically select a P-code. After that, the flow advances to step S. If mail display continues, the flow returns to step S. If mail display is ended, this processing is ended.","Automatic P-code extraction in step S will be described.  is a flow chart for explaining automatic P-code extraction processing in step S.","In step S, a character string enclosed by two tags <Pcode> and <\/Pcode> is searched for. When a character string enclosed by the two tags <Pcode> and <\/Pcode> is searched for, the flow advances from step S to step S to store the detected character string in the P-code storage area . This processing is executed for the entire mail that is being displayed currently (step S).","An operation mode for executing the above processing for all mail data held in the memory of the portable terminal  at once may be provided.","In the above way, the portable terminal  of this embodiment can store a P-code sent as mail in the P-code storage area . Even when the user is notified of a P-code not by electronic data such as mail but by a magazine or newspaper, the P-code may be input using the P-code key and dial keys and held in the P-code storage area . According to the portable terminal  of this embodiment, the P-code stored in the P-code storage area can be input to the P service terminal  by communication with the P service terminal .",{"@attributes":{"id":"p-0481","num":"0486"},"figref":"FIG. 110","b":"400"},"In step S, when operation of the P-code key  is detected, the flow advances to step S to determine whether a P-code is stored in the P-code storage area . If no P-code is stored in the P-code storage area , the flow advances to step S to display a message representing that no P-code is present on the display , and this processing is ended.","If YES in step S, the flow advances to step S to start communication processing with the P service terminal  using the infrared communication section . It is determined in step S whether the P service terminal  is ready, and processing waits until the P service terminal  is ready. If the wait time exceeds a predetermined time, it is determined that time is out. The flow advances from step S to step S to display a message representing a communication error on the display , and processing is ended.","When it is confirmed that the P service terminal  is ready, the P-code stored in the P-code storage area is transmitted to the P service terminal  in step S.","When transmission is ended, it is inquired on the display  whether the P-code currently stored in the P-code storage area is to be erased. If the user instructs to erase the P-code, the P-code is erased in step S.","The above processing can also be applied to a case wherein the portable terminal  is connected to the portable terminal connector  of the P service terminal .","In the above processing, transmission is started by the key operation of the portable terminal . Instead, a P-code may be automatically input to the P service terminal  under the control of the P service terminal  without operating any keys on the portable terminal side.  is a flow chart for explaining another form of P-code transmission processing by the portable terminal of this embodiment.","In step S, when it is detected that the portable terminal is connected to the portable terminal connector  (or when a predetermined signal is sent to the P service terminal through the infrared communication section by operating the P-code key), communication between the P service terminal and the portable terminal starts in step S.","When a P-code request is input from the P service terminal  by communication, the flow advances from step S to step S to determine whether a P-code is stored in the P-code storage area . If no P-code is stored, the flow advances to step S to notify the P service terminal  that no P-code is present. If a P-code is present in the P-code storage area , the flow advances to step S to transmit the stored P-code to the P service terminal .","The subsequent processing in steps S to S is the same as the above-described processing in steps S to S.","As described above, according to the portable terminal of this embodiment, a P-code can be extracted from mail, held in the memory, and transmitted to the P service terminal. Hence, any input error in operation of the P service terminal  can be prevented, and the operability is largely improved.","<Other Embodiment>","The present invention may be applied to a system constituted by a plurality of devices (e.g., a host computer, an interface device, a reader, a printer, and the like) or an apparatus comprising a single device (e.g., a copying machine, a facsimile apparatus, or the like).","The object of the present invention is realized even by supplying a storage medium storing software program codes for realizing the functions of the above-described embodiment to a system or apparatus, and causing the computer (or a CPU or an MPU) of the system or apparatus to read out and execute the program codes stored in the storage medium.","In this case, the program codes read out from the storage medium realize the functions of the above-described embodiment by themselves, and the storage medium storing the program codes constitutes the present invention.","As a storage medium for supplying the program codes, a floppy disk, a hard disk, an optical disk, a magnetooptical disk, a CD-ROM, a CD-R, a magnetic tape, a nonvolatile memory card, a ROM, or the like can be used.","The functions of the above-described embodiment are realized not only when the readout program codes are executed by the computer but also when the OS (Operating System) running on the computer performs part or all of actual processing on the basis of the instructions of the program codes.","The functions of the above-described embodiment are also realized when the program codes read out from the storage medium are written in the memory of a function expansion board inserted into the computer or a function expansion unit connected to the computer, and the CPU of the function expansion board or function expansion unit performs part or the actual processing on the basis of the instructions of the program codes.","As many apparently widely different embodiments of the present invention can be made without departing from the spirit and scope thereof, it is to be understood that the invention is not limited to the specific embodiments thereof except as defined in the appended claims."],"BRFSUM":[{},{}],"heading":["FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS"],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The accompanying drawings, which are incorporated in and constitute a part of the specification, illustrate embodiments of the invention and, together with the description, serve to explain the principles of the invention.",{"@attributes":{"id":"p-0024","num":"0029"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0025","num":"0030"},"figref":"FIG. 2","b":"100"},{"@attributes":{"id":"p-0026","num":"0031"},"figref":"FIG. 3","b":"100"},{"@attributes":{"id":"p-0027","num":"0032"},"figref":"FIG. 4","b":"400"},{"@attributes":{"id":"p-0028","num":"0033"},"figref":"FIG. 5","b":"400"},{"@attributes":{"id":"p-0029","num":"0034"},"figref":"FIG. 6","b":"200"},{"@attributes":{"id":"p-0030","num":"0035"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0031","num":"0036"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0032","num":"0037"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0033","num":"0038"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0034","num":"0039"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0035","num":"0040"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0036","num":"0041"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0037","num":"0042"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0038","num":"0043"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0039","num":"0044"},"figref":"FIG. 16","b":"300"},{"@attributes":{"id":"p-0040","num":"0045"},"figref":"FIG. 17"},{"@attributes":{"id":"p-0041","num":"0046"},"figref":"FIG. 18"},{"@attributes":{"id":"p-0042","num":"0047"},"figref":"FIG. 19"},{"@attributes":{"id":"p-0043","num":"0048"},"figref":"FIG. 20"},{"@attributes":{"id":"p-0044","num":"0049"},"figref":"FIG. 21"},{"@attributes":{"id":"p-0045","num":"0050"},"figref":"FIG. 22"},{"@attributes":{"id":"p-0046","num":"0051"},"figref":"FIG. 23","b":"1000"},{"@attributes":{"id":"p-0047","num":"0052"},"figref":"FIG. 24","b":"1010"},{"@attributes":{"id":"p-0048","num":"0053"},"figref":"FIG. 25","b":"1020"},{"@attributes":{"id":"p-0049","num":"0054"},"figref":"FIG. 26","b":"1030"},{"@attributes":{"id":"p-0050","num":"0055"},"figref":"FIG. 27","b":"1040"},{"@attributes":{"id":"p-0051","num":"0056"},"figref":"FIG. 28","b":"1050"},{"@attributes":{"id":"p-0052","num":"0057"},"figref":"FIG. 29","b":["2","1060"]},{"@attributes":{"id":"p-0053","num":"0058"},"figref":"FIG. 30","b":"1070"},{"@attributes":{"id":"p-0054","num":"0059"},"figref":"FIG. 31","b":"1080"},{"@attributes":{"id":"p-0055","num":"0060"},"figref":"FIG. 32"},{"@attributes":{"id":"p-0056","num":"0061"},"figref":"FIG. 33"},{"@attributes":{"id":"p-0057","num":"0062"},"figref":"FIG. 34"},{"@attributes":{"id":"p-0058","num":"0063"},"figref":"FIG. 35"},{"@attributes":{"id":"p-0059","num":"0064"},"figref":"FIG. 36"},{"@attributes":{"id":"p-0060","num":"0065"},"figref":"FIG. 37"},{"@attributes":{"id":"p-0061","num":"0066"},"figref":"FIG. 38"},{"@attributes":{"id":"p-0062","num":"0067"},"figref":"FIG. 39"},{"@attributes":{"id":"p-0063","num":"0068"},"figref":"FIG. 40"},{"@attributes":{"id":"p-0064","num":"0069"},"figref":"FIG. 41"},{"@attributes":{"id":"p-0065","num":"0070"},"figref":"FIG. 42"},{"@attributes":{"id":"p-0066","num":"0071"},"figref":"FIG. 43"},{"@attributes":{"id":"p-0067","num":"0072"},"figref":"FIG. 44"},{"@attributes":{"id":"p-0068","num":"0073"},"figref":"FIG. 45"},{"@attributes":{"id":"p-0069","num":"0074"},"figref":"FIG. 46"},{"@attributes":{"id":"p-0070","num":"0075"},"figref":"FIG. 47"},{"@attributes":{"id":"p-0071","num":"0076"},"figref":"FIG. 48"},{"@attributes":{"id":"p-0072","num":"0077"},"figref":"FIG. 49"},{"@attributes":{"id":"p-0073","num":"0078"},"figref":"FIG. 50"},{"@attributes":{"id":"p-0074","num":"0079"},"figref":"FIG. 51"},{"@attributes":{"id":"p-0075","num":"0080"},"figref":"FIG. 52A"},{"@attributes":{"id":"p-0076","num":"0081"},"figref":"FIG. 52B"},{"@attributes":{"id":"p-0077","num":"0082"},"figref":"FIG. 52C"},{"@attributes":{"id":"p-0078","num":"0083"},"figref":"FIG. 53"},{"@attributes":{"id":"p-0079","num":"0084"},"figref":"FIG. 54"},{"@attributes":{"id":"p-0080","num":"0085"},"figref":"FIG. 55"},{"@attributes":{"id":"p-0081","num":"0086"},"figref":"FIG. 56"},{"@attributes":{"id":"p-0082","num":"0087"},"figref":"FIG. 57"},{"@attributes":{"id":"p-0083","num":"0088"},"figref":"FIG. 58"},{"@attributes":{"id":"p-0084","num":"0089"},"figref":"FIG. 59"},{"@attributes":{"id":"p-0085","num":"0090"},"figref":"FIG. 60"},{"@attributes":{"id":"p-0086","num":"0091"},"figref":"FIG. 61"},{"@attributes":{"id":"p-0087","num":"0092"},"figref":"FIG. 62"},{"@attributes":{"id":"p-0088","num":"0093"},"figref":"FIG. 63"},{"@attributes":{"id":"p-0089","num":"0094"},"figref":"FIG. 64"},{"@attributes":{"id":"p-0090","num":"0095"},"figref":"FIG. 65"},{"@attributes":{"id":"p-0091","num":"0096"},"figref":"FIG. 66"},{"@attributes":{"id":"p-0092","num":"0097"},"figref":"FIG. 67"},{"@attributes":{"id":"p-0093","num":"0098"},"figref":"FIG. 68"},{"@attributes":{"id":"p-0094","num":"0099"},"figref":"FIG. 69"},{"@attributes":{"id":"p-0095","num":"0100"},"figref":"FIG. 70","b":"111"},{"@attributes":{"id":"p-0096","num":"0101"},"figref":"FIG. 71"},{"@attributes":{"id":"p-0097","num":"0102"},"figref":"FIG. 72"},{"@attributes":{"id":"p-0098","num":"0103"},"figref":"FIG. 73"},{"@attributes":{"id":"p-0099","num":"0104"},"figref":"FIG. 74"},{"@attributes":{"id":"p-0100","num":"0105"},"figref":"FIG. 75","b":["104","100"]},{"@attributes":{"id":"p-0101","num":"0106"},"figref":"FIG. 76","b":["104","100"]},{"@attributes":{"id":"p-0102","num":"0107"},"figref":"FIG. 77","b":["104","100"]},{"@attributes":{"id":"p-0103","num":"0108"},"figref":"FIG. 78","b":["104","100"]},{"@attributes":{"id":"p-0104","num":"0109"},"figref":"FIG. 79","b":["104","100"]},{"@attributes":{"id":"p-0105","num":"0110"},"figref":"FIG. 80","b":["104","100"]},{"@attributes":{"id":"p-0106","num":"0111"},"figref":"FIG. 81","b":["104","100"]},{"@attributes":{"id":"p-0107","num":"0112"},"figref":"FIG. 82","b":["104","100"]},{"@attributes":{"id":"p-0108","num":"0113"},"figref":"FIG. 83","b":["104","100"]},{"@attributes":{"id":"p-0109","num":"0114"},"figref":"FIG. 84","b":["104","100"]},{"@attributes":{"id":"p-0110","num":"0115"},"figref":"FIG. 85","b":["104","100"]},{"@attributes":{"id":"p-0111","num":"0116"},"figref":"FIG. 86","b":["104","100"]},{"@attributes":{"id":"p-0112","num":"0117"},"figref":"FIG. 87","b":["104","100"]},{"@attributes":{"id":"p-0113","num":"0118"},"figref":"FIG. 88","b":["104","100"]},{"@attributes":{"id":"p-0114","num":"0119"},"figref":"FIG. 89","b":["104","100"]},{"@attributes":{"id":"p-0115","num":"0120"},"figref":"FIG. 90","b":["104","100"]},{"@attributes":{"id":"p-0116","num":"0121"},"figref":"FIG. 91","b":["104","100"]},{"@attributes":{"id":"p-0117","num":"0122"},"figref":"FIG. 92","b":["104","100"]},{"@attributes":{"id":"p-0118","num":"0123"},"figref":"FIG. 93","b":["104","100"]},{"@attributes":{"id":"p-0119","num":"0124"},"figref":"FIG. 94","b":["104","100"]},{"@attributes":{"id":"p-0120","num":"0125"},"figref":"FIG. 95","b":["104","100"]},{"@attributes":{"id":"p-0121","num":"0126"},"figref":"FIG. 96","b":["104","100"]},{"@attributes":{"id":"p-0122","num":"0127"},"figref":"FIG. 97","b":["104","100"]},{"@attributes":{"id":"p-0123","num":"0128"},"figref":"FIG. 98A"},{"@attributes":{"id":"p-0124","num":"0129"},"figref":"FIG. 98B"},{"@attributes":{"id":"p-0125","num":"0130"},"figref":"FIG. 99A"},{"@attributes":{"id":"p-0126","num":"0131"},"figref":"FIG. 99B"},{"@attributes":{"id":"p-0127","num":"0132"},"figref":"FIG. 100A"},{"@attributes":{"id":"p-0128","num":"0133"},"figref":"FIG. 100B"},{"@attributes":{"id":"p-0129","num":"0134"},"figref":"FIG. 101A"},{"@attributes":{"id":"p-0130","num":"0135"},"figref":"FIG. 101B"},{"@attributes":{"id":"p-0131","num":"0136"},"figref":"FIG. 102A"},{"@attributes":{"id":"p-0132","num":"0137"},"figref":"FIG. 102B"},{"@attributes":{"id":"p-0133","num":"0138"},"figref":"FIG. 103A"},{"@attributes":{"id":"p-0134","num":"0139"},"figref":"FIG. 103B","b":"200"},{"@attributes":{"id":"p-0135","num":"0140"},"figref":"FIG. 104"},{"@attributes":{"id":"p-0136","num":"0141"},"figref":"FIG. 105A"},{"@attributes":{"id":"p-0137","num":"0142"},"figref":"FIG. 105B"},{"@attributes":{"id":"p-0138","num":"0143"},"figref":"FIG. 105C"},{"@attributes":{"id":"p-0139","num":"0144"},"figref":"FIG. 105D"},{"@attributes":{"id":"p-0140","num":"0145"},"figref":"FIG. 105E"},{"@attributes":{"id":"p-0141","num":"0146"},"figref":"FIG. 106A"},{"@attributes":{"id":"p-0142","num":"0147"},"figref":"FIG. 106B"},{"@attributes":{"id":"p-0143","num":"0148"},"figref":"FIG. 106C"},{"@attributes":{"id":"p-0144","num":"0149"},"figref":"FIG. 106D"},{"@attributes":{"id":"p-0145","num":"0150"},"figref":"FIG. 106E"},{"@attributes":{"id":"p-0146","num":"0151"},"figref":"FIG. 107A"},{"@attributes":{"id":"p-0147","num":"0152"},"figref":"FIG. 107B"},{"@attributes":{"id":"p-0148","num":"0153"},"figref":"FIG. 107C"},{"@attributes":{"id":"p-0149","num":"0154"},"figref":"FIG. 107D"},{"@attributes":{"id":"p-0150","num":"0155"},"figref":"FIG. 107E"},{"@attributes":{"id":"p-0151","num":"0156"},"figref":"FIG. 108"},{"@attributes":{"id":"p-0152","num":"0157"},"figref":"FIG. 109","b":"3113"},{"@attributes":{"id":"p-0153","num":"0158"},"figref":"FIG. 110"},{"@attributes":{"id":"p-0154","num":"0159"},"figref":"FIG. 111"}]},"DETDESC":[{},{}]}
