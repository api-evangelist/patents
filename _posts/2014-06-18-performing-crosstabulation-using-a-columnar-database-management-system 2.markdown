---
title: Performing cross-tabulation using a columnar database management system
abstract: Cross tabulation operation is performed within a columnar database management system. The columnar database management system receives a request to perform a cross-tabulation operation on a set of database tables. The columnar database management system determines values of cross tabulation operation for each row of the result. The columnar database management system determines a domain for each value of the row dimension corresponding to a row combination. The columnar database management system determines an intersection set of the domains corresponding to values of the row dimensions for the row combination. The columnar database management system determines a value for the result column for the row combination as an aggregate value based on the records of the intersection set.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09600539&OS=09600539&RS=09600539
owner: Actuate Corporation
number: 09600539
owner_city: San Mateo
owner_country: US
publication_date: 20140618
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS REFERENCE TO RELATED APPLICATION","BACKGROUND","SUMMARY","DETAILED DESCRIPTION"],"p":["This application claims the benefit of U.S. Provisional Patent Application No. 61\/837,780 filed Jun. 21, 2013, which is incorporated by reference in its entirety.","Field of Disclosure","This invention relates generally to data mining operations, and in particular to performing cross-tabulation using a columnar database management system.","Description of the Related Art","Data mining operations are often employed by enterprises to process data sourced from various database management systems. Data is often represented as sets of various types of entities, for example, products, employees, users of a system, transactions performed by an online system and so on. Data mining systems perform operations on these sets of data, for example, union, intersection, difference, and so on. One operation performed by data mining systems is cross tabulation of tables. Conventional techniques for performing cross tabulation often perform inefficiently because they load the same data multiple times for performing various steps. As a consequence, performing cross tabulation is often inefficient and consumes more computing resources than needed.","Embodiments of the invention perform cross tabulation on tables. A columnar database management system receives a request to perform a cross-tabulation operation on a set of database tables. The request specifies row dimensions based on columns of database tables participating in the cross tabulation operation. The columnar database management system determines the result of cross tabulation operation by performing following steps for each row of the result. Each row of the result is associated with a combination of values corresponding to the row dimensions. The columnar database management system determines a domain for each value of the row dimension corresponding to the combination. The domain comprises a set of records of the table that match the value of the row dimension. The columnar database management system determines an intersection set of the domains corresponding to values of the row dimensions for the row combination. The columnar database management system determines a value for the result column for the row combination as an aggregate value based on the records of the intersection set.","The features and advantages described in this summary and the following detailed description are not all-inclusive. Many additional features and advantages will be apparent to one of ordinary skill in the art in view of the drawings, specification, and claims hereof.","The Figures (FIGS.) and the following description describe certain embodiments by way of illustration only. One skilled in the art will readily recognize from the following description that alternative embodiments of the structures and methods illustrated herein may be employed without departing from the principles described herein. It is noted that wherever practicable similar or like reference numbers may be used in the figures and may indicate similar or like functionality.",{"@attributes":{"id":"p-0014","num":"0013"},"figref":["FIG. 1","FIG. 1"],"b":["100","105","108","102","105","105","105"],"i":"a"},"The data mining requests may indicate to the data mining system  to perform one or more data mining algorithms on data stored by the data mining system . For example, the data mining request may indicate that a cross-tabulation calculation operation be performed. In one aspect, the client  may be a suitable computing device, such as a desktop computer, a laptop computer, a workstation, a server computer, a mobile phone, a tablet device, etc.","As shown in , the data mining system  includes, among other components, an application frontend  and a columnar database management system . The application frontend  may be a software application configured to receive data mining requests from the client  and\/or provide data mining results to the client device . In one embodiment, the application frontend  may forward or route data mining requests to the columnar database management system  for data processing. The application frontend  may additionally receive data mining results from the columnar database management system  for transmission to a client . In one embodiment, the application frontend  does not include and\/or is not configured to use data mining algorithms to process data indicated by a data mining request.","The columnar database management system  is a system configured to store data according to a column oriented scheme. As shown in , the columnar database management system  includes data , data mining algorithms , and a database engine . In one aspect, data  includes various columns of data, where each column is associated with a logical set.","The database engine  is a logical entity configured to create, read, update and delete data stored by the columnar data management system . In one embodiment, the database engine  is also configured to perform data mining using the data mining operations  and the data . In one embodiment, the data mining algorithms  include a cross-tabulation operation for performing cross-tabulation calculations.","In the embodiment, responsive to receiving a data mining request to perform a cross-tabulation calculation directly from the client  or forwarded by the application frontend , the database engine  performs various steps to process the request and perform the cross-tabulation calculation. In some embodiments, the database engine  may include a bubbler module  and an operator module  to facilitate performance of the cross-tabulation calculation. The bubbler module  performs intersection of a plurality of sets of data provided as input. The sets of data are also referred to herein as domains. The operator module  performs specific operations on input values, for example, performing difference of values, determining cardinality of set of elements, and the like. Further details of the bubbler module  and an operator module  are described herein.",{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 2","b":["200","105","108","110","112","202","204","204","206","208","210","212","214","216","218","212","204","220","222","206","202","204"]},"The storage device  is a non-transitory computer-readable storage medium, such as a hard drive, compact disk read-only memory (CD-ROM), DVD, or a solid-state memory device. The memory  holds instructions and data used by the processor . The pointing device  may be a mouse, track ball, or other type of pointing device, and is used in combination with the keyboard  to input data into the computer system . The graphics adapter  displays images and other information on the display . The network adapter  couples the computer system  to the network .","A computer  can have different and\/or other components than those shown in . In addition, the computer  can lack certain illustrated components. In one embodiment, a computer  acting as the data mining system  is formed of multiple blade computers and lacks a keyboard , pointing device , graphics adapter , and\/or display . Moreover, the storage device  can be local and\/or remote from the computer  (such as embodied within a storage area network (SAN)).","The computer  is adapted to execute computer program modules for providing functionality described herein. As used herein, the term \u201cmodule\u201d refers to computer program logic utilized to provide the specified functionality. Thus, a module can be implemented in hardware, firmware, and\/or software. In one embodiment, program modules are stored on the storage device , loaded into the memory , and executed by the processor .","Embodiments of the entities described herein can include other and\/or different modules than the ones described here. In addition, the functionality attributed to the modules can be performed by other or different modules in other embodiments. Moreover, this description occasionally omits the term \u201cmodule\u201d for purposes of clarity and convenience.","The following description of the cross tabulation process uses the following terms. A row dimension is a database column that participates in a cross-tabulation operation. A row combination is a combination of values of row dimensions defining a record in the cross-tabulation result. A measure in a cross-tabulation is a value that is determined from the inputs and stored in an individual cell as result. A measure value can be the result of an aggregation function, for example, count( ), sum( ), max( ), etc. of the values that correspond to an associated combination. A pivot dimension is a database column that splits the resulting measure in one value for each discrete value in the pivot column (one value per category). A resolution level is a table on which the aggregation function of the measure is applied (i.e. in an expression COUNT(Customers), the resolution level is the table \u2018Customers\u2019.)","A domain is a set of table records that meet a given condition. For example, if a customer table has a column \u201cstate\u201d storing values including California, Nevada, Texas, and the like, an example domain is all customers from state California. A domain resolves to a specific table, that is, selects records in that table. A resolution level change is an action of projecting a domain from a given table to another related table. The database engine  projects a domain corresponding to records of a table to a result domain comprising a set of records of a results table. The database engine  projects a domain from an input table to a result table by using a foreign key relationship between the input table and the result table. In an embodiment, the database engine  determines for each record of the intersection set of domain, a corresponding record of the result table based on the foreign key relationship between the input table and the result table","A universal filter is a domain applied as a filter in a cross-tabulation at the lowest level possible, i.e., applied early during the computation of the cross tabulation result. For example, if a cross tabulation operation is performed using a set of input tables, the universal filter is applied to the input tables rather than to intermediate or final results obtained by processing the input tables. A target filter is a domain applied as a filter in a cross-tabulation at the resolution level. A base filter is a domain used in conjunction with the target filter to compare values of data or to perform any operator using values of data from the base and the target filter.","The bubbler module  performs intersection of domains involved in a cross-tabulation calculation. The operator module  computes the aggregation functions using the incoming domain. Typical aggregation functions are \u2018count\u2019, \u2018sum\u2019, \u2018average\u2019, \u2018maximum\u2019, \u2018minimum\u2019, etc. Additionally, comparison functions, such as \u2018difference\u2019, \u2018relative index\u2019, \u2018percent\u2019, etc. . . . , can be used when two domains are defined (target domain and base domain). The bubbler modules  creates data structures called bubblers for performing intersections of various input sets.","Cross-Tabulation Process","In one embodiment, the database engine  performs the following process to perform a cross-tabulation calculation. The columnar database management system  receives a request to perform a cross-tabulation operation on a set of database tables. The request may be received by the application front end  from a client  and sent to the columnar database management system . The request specifies one or more row dimensions representing columns of the database tables participating in the cross tabulation operation.","In one aspect, the cross-tabulation request can be encapsulated in a suitable message format. For example, the cross-tabulation request may be encapsulated in a text format, such as XML, or in any other format. In some embodiments, the cross-tabulation request is received by the columnar database management system  via one or more suitable network transfer protocols. In other embodiments, the cross-tabulation request is received via an application programming interface (API) call, through receipt of a file containing the cross-tabulation request, or via an interactive console. It will be appreciated, however, that other ways of receiving the cross-tabulation request may be used.","The database engine  of the columnar database management system  determines the result of cross tabulation and stores the results. The result of the cross tabulation operation comprises rows, each row having a combination of values of row dimensions. In an embodiment, the columnar database management system  sends the results, for example, to the client  sending the request.","The database engine  performs the following processing for each row of the result for the cross tabulation operation. Each row of the result is associated with a combination of values for different row dimensions. The database engine  determines a domain for each value of a row dimension of the combination. Each domain comprises a set of table records of the table matching the value of the row dimension. The database engine  determines an intersection set of domains corresponding to the row combination. The intersection set comprises table records that match the combination of values corresponding to the row. The database engine  determines one or more result columns for the row combination, for example, an aggregate value based on the intersection set. The database engine  may either store the rows of the result of the cross tabulation as data  or return the result to the requestor.",{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 3","b":["116","310","117","320","310","330"]},"The cross tabulation request may specify a plurality of tables as input tables. The database engine  determines an intersection set corresponding to each table. The database engine  projects the records of intersection set  of corresponding to a table to records of another table by performing a resolution level change. For example, the cross tabulation request may specify a \u201ccustomer\u201d table and a \u201cpet\u201d table, where the result of aggregations are based on \u201cpet\u201d table. The database engine  determines a domain corresponding to intersection of various domains based on the customer table and projects the records of this domain to associated records of the customer table.","For example, if the domain includes pets p and p, and pet p matches customer c and pet p matches customer c, the database engine  projects the domain based on pets to corresponding customer records from the customer table. A single record of a table may maps to multiple records of the target table, thereby resulting in a different number of records when a resolution level change is performed. The number of records may either, increase, decrease, or remain the same after performing resolution change. Performing the various resolution level changes for the intersection set results is referred to as a vertical collapse  in which the various sets of records get mapped to records of a target table. The vertical collapse  moves domains towards the cross-tabulation resolution level, intersecting domains at each level in the path to the final one.","In some embodiments, the cross tabulation specification includes one or more filters. A filter specifies certain criteria that must be satisfied for the records considered for cross tabulation. The database engine  determines a filter domain for the filter value. The filter domain comprises a set of values that satisfy the filter value for the filter column of the table. The bubbler module  determines an intersection set of the filter domain with domains corresponding to a row combination.","In some embodiments, the cross tabulation request specifies pivot dimensions. A pivot dimension may correspond to a column of an input table. The result of the cross tabulation with pivot dimension includes a column for each distinct value of the specified column. To determine the result values of the pivot dimension, the database engine  determines a pivot domain for each discrete value of the pivot dimension. The pivot domain comprises a set of records that satisfy the corresponding value for the column of the table. The bubbler module  determines an intersection set of the pivot domain with domains corresponding to values of row dimensions for the row combination. The operator module  determines an aggregate value based on the intersection set as a value of the measure, for example, count.","Cross-Tabulation Example",{"@attributes":{"id":"p-0038","num":"0037"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0039","num":"0038"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"6"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"35pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"35pt","align":"center"}},{"@attributes":{"colname":"4","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"5","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"6","colwidth":"35pt","align":"left"}}],"thead":{"row":[{"entry":"TABLE I"},{"entry":{"@attributes":{"namest":"1","nameend":"6","align":"center","rowsep":"1"}}},{"entry":[{},{},"Cust",{},"Owner","WWF"]},{"entry":["Age","Children","ID","Name","Gender","member"]},{"entry":{"@attributes":{"namest":"1","nameend":"6","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"6"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"35pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"35pt","align":"char","char":"."}},{"@attributes":{"colname":"4","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"5","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"6","colwidth":"35pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["18","0","1","Boris","male","No"]},{"entry":["65","2","2","Rose","female","Yes"]},{"entry":["47","2","3","Ted","male","No"]},{"entry":["43","2","4","tom","male","No"]},{"entry":["19","0","5","John","male","No"]},{"entry":["35","2","6","Mary","female","No"]},{"entry":["35","1","7","Alice","female","No"]},{"entry":["18","0","8","Jane","female","No"]},{"entry":["40","1","9","Sandra","female","Yes"]},{"entry":["80","0","10","George","male","No"]},{"entry":["80","0","11","Tim","male","No"]},{"entry":["29","0","12","Sarah","female","No"]},{"entry":{"@attributes":{"namest":"1","nameend":"6","align":"center","rowsep":"1"}}}]}}]}}},"An example pet table is shown in table II including columns, name, age, class of pet (whether the pet is reptile, mammal, fish, or bird), species, weight, and customer ID. The column customer ID is a foreign key referring to the customer table.",{"@attributes":{"id":"p-0041","num":"0040"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"6"},"colspec":[{"@attributes":{"colname":"1","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"35pt","align":"center"}},{"@attributes":{"colname":"4","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"5","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"6","colwidth":"35pt","align":"center"}}],"thead":{"row":[{"entry":"TABLE II"},{"entry":{"@attributes":{"namest":"1","nameend":"6","align":"center","rowsep":"1"}}},{"entry":["Age","Class","Cust ID","Name","Specie","Weight"]},{"entry":{"@attributes":{"namest":"1","nameend":"6","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"6"},"colspec":[{"@attributes":{"colname":"1","colwidth":"28pt","align":"char","char":"."}},{"@attributes":{"colname":"2","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"35pt","align":"char","char":"."}},{"@attributes":{"colname":"4","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"5","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"6","colwidth":"35pt","align":"char","char":"."}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["46","Reptile","1","Buc","Turtle","136"]},{"entry":["3","Mammal","1","Bobby","Dog","40"]},{"entry":["0.5","Fish","3","Tempura","Fish","0.03"]},{"entry":["6","Mammal","2","Scout","Dog","10"]},{"entry":["5","Mammal","2","Dougie","Dog","21"]},{"entry":["4","Mammal","3","Guardian","Cat","3"]},{"entry":["16","Reptile","4","Neo","Snake","10"]},{"entry":["5","Reptile","5","Pistol","Turtle","1"]},{"entry":["2","Bird","6","Lorenzo","Duck","2"]},{"entry":["7","Mammal","7","Pluto","Dog","17"]},{"entry":["0.5","Fish","7","Jupiter","Fish","0.02"]},{"entry":["0.4","Fish","7","Mars","Fish","0.06"]},{"entry":["0.4","Fish","7","Saturn","Fish","0.08"]},{"entry":["0.6","Fish","7","Venus","Fish","0.02"]},{"entry":["0.5","Fish","7","Moon","Fish","0.02"]},{"entry":["0.5","Fish","7","Eo","Fish","0.01"]},{"entry":["0.5","Fish","7","Europa","Fish","0.04"]},{"entry":["0.6","Fish","7","Titan","Fish","0.04"]},{"entry":["5","Mammal","8","Chewie","Bear","329"]},{"entry":["2","Mammal","9","R2","Rabbit","3"]},{"entry":["8","Bird","11","Romulus","Parrot","0.5"]},{"entry":["3","Mammal","12","Cesar","Squirrel","0.25"]},{"entry":{"@attributes":{"namest":"1","nameend":"6","align":"center","rowsep":"1"}}}]}}]}}},"An example cross-tabulation specification using the above data generates a report of count of customers, grouped by pet Class, with possible values \u201cBird\u201d, \u201cFish\u201d, \u201cMammal,\u201d \u201cReptile\u201d and WWF member (\u201cyes\u201d, \u201cno\u201d), including pivot dimensions showing owner gender, with values (\u201cMale\u201d, \u201cFemale\u201d), the report filtered by pets that are not birds (universal filter in this example).","For this example, the maximum possible number of row combinations is 8 since there are 4 discrete values in column Class which gets multiplied by 2 discrete values in the column WWF Member. Each row combination is split into 2 columns because the pivoting dimension has 2 discrete values, male and female. Omitting blank rows, the result looks as shown in table III.",{"@attributes":{"id":"p-0044","num":"0043"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"6"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"49pt","align":"center"}},{"@attributes":{"colname":"4","colwidth":"21pt","align":"center"}},{"@attributes":{"colname":"5","colwidth":"42pt","align":"center"}}],"thead":{"row":[{"entry":[{},"TABLE III"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"5","align":"center","rowsep":"1"}}]},{"entry":[{},"Class","WWF member","female","male","Total"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"5","align":"center","rowsep":"1"}}]}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Fish","No","1","1","2"]},{"entry":[{},"Mammal","No","3","2","5"]},{"entry":[{},"Mammal","Yes","2","0","2"]},{"entry":[{},"Reptile","No","0","3","3"]},{"entry":[{},"Total",{},"5","4","9"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"5","align":"center","rowsep":"1"}}]}]}}}}},"Without omitting blank rows, the result table obtained from the cross tabulation would look as follows.",{"@attributes":{"id":"p-0046","num":"0045"},"tables":{"@attributes":{"id":"TABLE-US-00004","num":"00004"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"6"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"49pt","align":"center"}},{"@attributes":{"colname":"4","colwidth":"21pt","align":"center"}},{"@attributes":{"colname":"5","colwidth":"42pt","align":"center"}}],"thead":{"row":[{"entry":[{},"TABLE IV"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"5","align":"center","rowsep":"1"}}]},{"entry":[{},"Class","WWF member","female","male","Total"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"5","align":"center","rowsep":"1"}}]}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Bird","No",{},{},{}]},{"entry":[{},"Bird","Yes"]},{"entry":[{},"Fish","No","1","1","2"]},{"entry":[{},"Fish","Yes"]},{"entry":[{},"Mammal","No","3","2","5"]},{"entry":[{},"Mammal","Yes","2","0","2"]},{"entry":[{},"Reptile","No","0","3","3"]},{"entry":[{},"Reptile","Yes",{}]},{"entry":[{},"Total",{},"5","4","9"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"5","align":"center","rowsep":"1"}}]}]}}}}},"In this case, Class and WWF Member are row dimensions, whereas Gender is a pivoted dimension and count(Customer) is the measure. Accordingly, the cross-tabulation presents the total number of Customers by Gender in each combination of Class and WWF Member.","The columnar database management system  performs the calculation process as follows. The columnar database management system  calculates the domain for the first discrete value in each row dimension. The number of elements with Class=\u201cBird\u201d is two and the number of elements with WWF Member=\u201cNo\u201d is ten. The columnar database management system  determines the domain for the first discrete value in the pivot dimension, i.e., owner Gender=\u201cFemale.\u201d This domain has 6 elements. The columnar database management system  determines a domain for the Universal Filter, i.e., Class=Not \u201cBird\u201d having 20 elements. Put Universal Filter and Row Dimensions domains calculated in previous steps in a Bubbler.","The columnar database management system  uses the bubbler module  to intersect the domains resolving at the same table level. The bubbler module  determines the resulting domain at Customer level based on input domain R corresponding to WWF Member=\u201cNo\u201d as D. The bubbler module  determines the resulting domain at the pet level by performing intersection of a domain R corresponding to Class=\u201cFish\u201d (row dimension) and a domain Ux corresponding to Class=a \u201cBird\u201d (Universal filter). The resulting domain is D.",{"@attributes":{"id":"p-0050","num":"0049"},"tables":{"@attributes":{"id":"TABLE-US-00005","num":"00005"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"133pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"35pt","align":"left"}}],"thead":{"row":[{"entry":"TABLE V"},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}},{"entry":["Table level","Domains","Result"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Customer","R2: WWF Member = \u201cNo\u201d","D1"]},{"entry":["Pet","R1: Class = \u201cFish\u201d Ux: Class = Not \u201cBird\u201d","D2"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}}}},"The resulting domains D and D are used as inputs for measures universal bubbler  (see ). The measures bubbler  collapses horizontally. In this case, only D is at the Customer level so, no intersection is needed at this level. At Pet level there is no intersection, as only D is at this level. The results of horizontal collapse are M and M (in this case equal to D and D).","At this stage, the columnar database management system  performs a vertical collapse by moving domains towards the cross-tabulation resolution level, intersecting domains at each level in the path to the final one. In this case, M is changed to customer level (M\u2032: 2 elements) and intersected with M (M\u2032 \u2229 M=M: 2 elements).","The output result of this bubbler becomes an input of the next bubbler, the target bubbler. At this stage, current pivoting domain (P) is introduced in the bubbler along with M. Every domain in the target bubbler is changed to the measure resolution level before any operation is performed with them. Then, all these are intersected (P \u2229 M=Final: 1 element)","At the final stage, the result of this bubbler is sent to the operator count, as this is the operation set in the definition. The operator, then, generates the final value of the cell (with value \u20181\u2019). The remaining cells are calculated similarly.","A cross-tabulation measure can compare results from two filters, a target filter against a base filter. The comparison may be determined by computing a function that takes two input values, one value from the base filter and the other value from the target filter. For example, the function may determine a difference, a relative index, a percentage, or any other function for comparison. The database engine  determines the result values for the target filter by following the steps described herein for determining results of a filter. The database engine  also determines the result values for the base filter by following the steps described herein. The database engine  provides the two result values determined to the operator module . The operator module  determines the final value for the measure by applying the comparison operator specified by the measure to the two results values input to the operator module .","The following example illustrates the use of base bubbler and target bubbler. The cross tabulation requests a filter that is based on two other filters defined. A first filter \u201chair\u201d that includes all those animals with fur (Bear, Cat, Dog, Rabbit, Squirrel). A second filter \u201cno hair\u201d includes all animals that do not have hair (e.g., Duck, Fish, Parrot, Snake, Turtle.) The cross tabulation determines: a first measure of number of people that own one animal from the class (bird, fish, mammal, reptile) and at least one other pet that has hair and a second measure of number of people that own one animal from the class (bird, fish, mammal, reptile) and at least one other pet that has NO hair. The cross tabulation determines a third filter \u201cdiff\u201d which is the difference of the value of \u201chair\u201d measure and the value of the \u201cno hair\u201d measure.","The cross tabulation results are shown as follows.",{"@attributes":{"id":"p-0058","num":"0057"},"tables":{"@attributes":{"id":"TABLE-US-00006","num":"00006"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"5"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"63pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"42pt","align":"center"}},{"@attributes":{"colname":"4","colwidth":"56pt","align":"center"}}],"thead":{"row":[{"entry":[{},"TABLE VI"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"4","align":"center","rowsep":"1"}}]},{"entry":[{},"Class","\u201cHair\u201d","\u201cno hair\u201d","\u201cdiff\u201d"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"4","align":"center","rowsep":"1"}}]}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"5"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"63pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"42pt","align":"center"}},{"@attributes":{"colname":"4","colwidth":"56pt","align":"char","char":"."}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Bird","0","2","\u22122"]},{"entry":[{},"Fish","2","2","0"]},{"entry":[{},"Mammal","7","3","4"]},{"entry":[{},"Reptile","1","3","\u22122"]},{"entry":[{},"Total","7","7","0"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"4","align":"center","rowsep":"1"}}]}]}}]}}},"The first measure (hair) has a \u201chair\u201d filter applied as a target filter. Second measure (no hair) has a \u201cno hair\u201d filter applied as a target filter. Third measure (diff) has 2 filters, \u201chair\u201d as a target filter and \u201cno hair\u201d as a base filter. For example, the second row of class \u201cfish\u201d has a first measure \u201chair\u201d that shows that there are 2 people owning a fish and at least one animal with hair (Ted and Alice to be exact). Furthermore, there are 2 people owning a fish and at least one animal without hair. The third measure calculates the difference between the target filter results and the base filter results, that is (measure \u201chair\u201d) 2 owners\u2014(measure \u201cno hair\u201d) 2 owners=0 owners.","Alternative Applications","The features and advantages described in the specification are not all inclusive and, in particular, many additional features and advantages will be apparent to one of ordinary skill in the art in view of the drawings, specification, and claims. Moreover, it should be noted that the language used in the specification has been principally selected for readability and instructional purposes, and may not have been selected to delineate or circumscribe the inventive subject matter.","The foregoing description of the embodiments of the invention has been presented for the purpose of illustration; it is not intended to be exhaustive or to limit the invention to the precise forms disclosed. Persons skilled in the relevant art can appreciate that many modifications and variations are possible in light of the above disclosure.","Some portions of this description describe the embodiments of the invention in terms of algorithms and symbolic representations of operations on information. These algorithmic descriptions and representations are commonly used by those skilled in the data processing arts to convey the substance of their work effectively to others skilled in the art. These operations, while described functionally, computationally, or logically, are understood to be implemented by computer programs or equivalent electrical circuits, microcode, or the like. Furthermore, it has also proven convenient at times, to refer to these arrangements of operations as modules, without loss of generality. The described operations and their associated modules may be embodied in software, firmware, hardware, or any combinations thereof.","Any of the steps, operations, or processes described herein may be performed or implemented with one or more hardware or software modules, alone or in combination with other devices. In one embodiment, a software module is implemented with a computer program product comprising a computer-readable medium containing computer program code, which can be executed by a computer processor for performing any or all of the steps, operations, or processes described.","Embodiments of the invention may also relate to an apparatus for performing the operations herein. This apparatus may be specially constructed for the required purposes, and\/or it may comprise a general-purpose computing device selectively activated or reconfigured by a computer program stored in the computer. Such a computer program may be stored in a tangible non-transitory computer readable storage medium or any type of media suitable for storing electronic instructions, and coupled to a computer system bus. Furthermore, any computing systems referred to in the specification may include a single processor or may be architectures employing multiple processor designs for increased computing capability.","Finally, the language used in the specification has been principally selected for readability and instructional purposes, and it may not have been selected to delineate or circumscribe the inventive subject matter. It is therefore intended that the scope of the invention be limited not by this detailed description, but rather by any claims that issue on an application based hereon. Accordingly, the disclosure of the embodiments of the invention is intended to be illustrative, but not limiting, of the scope of the invention, which is set forth in the following claims."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF DRAWINGS","p":[{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 4"}]},"DETDESC":[{},{}]}
