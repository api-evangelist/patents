---
title: Circuit to provide signal to sense array
abstract: A circuit for generating a voltage is disclosed. The voltage has an amplitude greater than an available power supply. The circuit includes a driver to supply the voltage on an output terminal to an electrode of a touch sense array. The circuit also includes a charge pump array coupled to the driver. The charge pump array includes an array of charge pumps to supply an input voltage to the driver. The circuit also includes a feedback circuit coupled to the charge pump array. The feedback circuit is configured to measure the input voltage and to select different combinations of the array of charge pumps to maintain the voltage on the output terminal.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08847911&OS=08847911&RS=08847911
owner: Cypress Semiconductor Corporation
number: 08847911
owner_city: San Jose
owner_country: US
publication_date: 20111020
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["RELATED APPLICATIONS","TECHNICAL FIELD","BACKGROUND","DETAILED DESCRIPTION"],"p":["This application claims the benefit of U.S. Provisional Patent Application No. 61\/472,152 filed Apr. 5, 2011, the disclosure of which is incorporated herein by reference in its entirety.","The present invention relates generally to capacitive touch sense arrays, and more particularly, to a circuit for generating a programmable supply voltage having an amplitude greater than an available power supply voltage and configured to drive a capacitive touch sense arrays.","Computing devices, such as notebook computers, personal data assistants (PDAs), kiosks, and mobile handsets, have user interface devices, which are also known as human interface devices (HID). One user interface device that has become more common is a touch-sensor pad (also commonly referred to as a touchpad). A basic notebook computer touch-sensor pad emulates the function of a personal computer (PC) mouse. A touch-sensor pad is typically embedded into a PC notebook for built-in portability. A touch-sensor pad replicates mouse X\/Y movement by using two defined axes which contain a collection of sensor elements that detect the position of one or more conductive objects, such as a finger. Mouse right\/left button clicks can be replicated by two mechanical buttons, located in the vicinity of the touchpad, or by tapping commands on the touch-sensor pad itself. The touch-sensor pad provides a user interface device for performing such functions as positioning a pointer, or selecting an item on a display. These touch-sensor pads may include multi-dimensional sensor arrays for detecting movement in multiple axes. The sensor array may include a one-dimensional sensor array, detecting movement in one axis. The sensor array may also be two dimensional, detecting movements in two axes.","Another user interface device that has become more common is a touch screen. Touch screens, also known as touchscreens, touch windows, touch panels, or touchscreen panels, are transparent display overlays which are typically either pressure-sensitive (resistive or piezoelectric), electrically-sensitive (capacitive), acoustically-sensitive (surface acoustic wave (SAW)) or photo-sensitive (infra-red). The effect of such overlays allows a display to be used as an input device, removing the keyboard and\/or the mouse as the primary input device for interacting with the display's content. Such displays can be attached to computers or, as terminals, to networks. Touch screens have become familiar in retail settings, on point-of-sale systems, on ATMs, on mobile handsets, on kiosks, on game consoles, and on PDAs where a stylus is sometimes used to manipulate the graphical user interface (GUI) and to enter data. A user can touch a touch screen or a touch-sensor pad to manipulate data. For example, a user can apply a single touch, by using a finger to touch the surface of a touch screen, to select an item from a menu.","A certain class of touch sense arrays includes a first set of linear electrodes separated and a second set of electrodes arranged at right angles and separated by a dielectric layer. The resulting intersections form a two-dimensional array of capacitors, referred to as sense elements. Touch sense arrays can be scanned in several ways, one of which (mutual-capacitance sensing) permits individual capacitive elements to be measured. Another method (self-capacitance sensing) can measure an entire sensor strip, or even an entire sensor array, with less information about a specific location, but performed with a single read operation.","The two-dimensional array of capacitors, when placed in close proximity, provides a means for sensing touch. A conductive object, such as a finger or a stylus, coming in close proximity to the touch sense array causes changes in the total capacitances of the sense elements in proximity to the conductive object. These changes in capacitance can be measured to produce a \u201ctwo-dimensional map\u201d that indicates where the touch on the array has occurred.","One way to measure such capacitance changes is to form a circuit comprising a signal driver (e.g., an AC current or a voltage source (transmit or \u201cTX signal\u201d)) which is applied to each horizontally aligned conductor in a multiplexed fashion. The charge accumulated on each of the capacitive intersections are sensed and similarly scanned at each of the vertically aligned electrodes in synchronization with the applied current\/voltage source. This charge is then measured, typically with a form of charge-to-voltage converter (i.e., receive or \u201cRX signal\u201d), which is sampled-and-held for an A\/D converter to convert to digital form for input to a processor. The processor, in turn, renders the capacitive map and determines the location of a touch.","Conventional capacitive sensing driving circuits suffer from a number of deficiencies. The driving or \u201cTX signal\u201d is frequently a square wave operated from an integrated circuit's (IC's) supply voltage, e.g., 2.5V. Unfortunately, the magnitude of the resulting TX signals for measuring a capacitance change between electrodes of the touch sense array may be on the order of a few percent. Since TX signal circuits are often noisy, it becomes difficult to distinguish a measured signal due to the TX signal component from a noise signal component. As a result, such measurements have a low signal-to-noise (SNR) ratio.","If a larger TX signal is used, the sensitivity of the sensing circuit increases proportionally (since system and environmental noise stays the same). Thus, the signal-to-noise ratio (SNR) can be improved by raising the TX voltage. Producing a TX voltage higher than the supply voltage of an IC requires a boosting circuit. A conventional method to achieve that boost is to employ a charge pump. A charge pump uses multiple stages to raise the voltage across a capacitor above the supply voltage. More stages result in a higher TX voltage. The last stage of the charge pump then produces a final voltage and stores it in a \u201ctank\u201d or \u201creservoir\u201d capacitor. A load can then be connected to that capacitor.","In a touch application, the resulting RX signal typically includes a large amount of ripple noise due to the pumping action of the stages in the charge pump, which operate in the MHz frequency range. To reduce noise from ripple and other sources, the final \u201ctank\u201d or \u201creservoir\u201d capacitor is fairly large: on the order of a few nF or more. Such a capacitor generally cannot be implemented on-chip and is therefore cost-prohibitive.","Embodiments of the invention provide a circuit for generating a target voltage having an amplitude greater than an available power supply and configured to drive a capacitive a touch sense array. In one embodiment, the circuit includes a driver to supply the target voltage on an output terminal to an electrode of the touch sense array. The circuit also includes a charge pump array coupled to the driver. The charge pump array includes an array of charge pumps to supply an input voltage to the driver. The circuit also includes a feedback circuit coupled to the charge pump array. The feedback circuit is configured to measure the input voltage and to select different combinations of the array of charge pumps to maintain the target voltage on the output terminal.","In one embodiment, the first feedback circuit selects a first combination of the charge pumps when the input voltage is more than a threshold level and selects a second combination of charge pumps when the input voltage is less than the threshold voltage. In one embodiment, the second combination includes fewer charge pumps than the first combination. The input voltage is programmable.","In one embodiment, the first feedback circuit includes a first feedback scaler circuit coupled to the charge pump array and configured to produce a first voltage proportional to the input voltage. The first feedback circuit further includes a comparator coupled to the feedback scaler circuit. A reference generator produces a reference voltage coupled to the comparator. The reference generator is configured to select the input voltage.","In one embodiment, the circuit may also include a second feedback circuit coupled to the charge pump array and configured to provide a reference voltage to the charge pump array.","The embodiments described herein provide for several improvements over conventional charge pump designs. By increasing the TX voltage above a supply signal, SNR is improved. The embodiments described herein also decrease power consumption and SNR in several other ways. A clock ripple reduction scheme is applied in order to reduce clock energy within a single pumping cycle. Small time delays are introduced between firing multiple stages of each sub-charge pump of the charge pump array to \u201cspread\u201d current transitions of clocked circuits across a slightly broader time window. This avoids large instantaneous energy spikes, and serves to reduce EMI (i.e., high-frequency coupling onto other components in the system, such as an RF radio). Furthermore, the comparator provides a \u201cthreshold\u201d signal which a logic circuit interprets to alter the pump strength (once the output has settled). This serves to reduce output ripple introduced to the touch sense array. In a related embodiment, the input voltage may be applied to a programmable current driver that provides a TX signal that does not have very sharp edges (low dV\/dt). This reduces current spikes when these edges are applied to a capacitive load, such as the touch sense array.",{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 1","b":["100","110","100","116","110","150","116","121","116"]},"In one embodiment, the sensor array  includes sensor elements ()-(N) (where N is a positive integer) that are disposed as a two-dimensional matrix (also referred to as an XY matrix). The sensor array  is coupled to pins ()-(N) of the processing device  via one or more analog buses  transporting multiple signals. In this embodiment, each sensor element ()-(N) is represented as a capacitor. The self capacitance of each sensor in the sensor array  is measured by a capacitance sensor  in the processing device .","In one embodiment, the capacitance sensor  may include a relaxation oscillator or other means to convert a capacitance into a measured value. The capacitance sensor  may also include a counter or timer to measure the oscillator output. The capacitance sensor  may further include software components to convert the count value (e.g., capacitance value) into a sensor element detection decision (also referred to as switch detection decision) or relative magnitude. In another embodiment, the capacitance sensor  includes a charge pump array  to be described below.","It should be noted that there are various known methods for measuring capacitance, such as current versus voltage phase shift measurement, resistor-capacitor charge timing, capacitive bridge divider, charge transfer, successive approximation, sigma-delta modulators, charge-accumulation circuits, field effect, mutual capacitance, frequency shift, or other capacitance measurement algorithms. It should be noted however, instead of evaluating the raw counts relative to a threshold, the capacitance sensor  may be evaluating other measurements to determine the user interaction. For example, in the capacitance sensor  having a sigma-delta modulator, the capacitance sensor  is evaluating the ratio of pulse widths of the output, instead of the raw counts being over or under a certain threshold.","In one embodiment, the processing device  further includes processing logic . Operations of the processing logic  may be implemented in firmware; alternatively, it may be implemented in hardware or software. The processing logic  may receive signals from the capacitance sensor , and determine the state of the sensor array , such as whether an object (e.g., a finger) is detected on or in proximity to the sensor array  (e.g., determining the presence of the object), where the object is detected on the sensor array (e.g., determining the location of the object), tracking the motion of the object, or other information related to an object detected at the touch sensor.","In another embodiment, instead of performing the operations of the processing logic  in the processing device , the processing device  may send the raw data or partially-processed data to the host . The host , as illustrated in , may include decision logic  that performs some or all of the operations of the processing logic . Operations of the decision logic  may be implemented in firmware, hardware, software, or a combination thereof. The host  may include a high-level Application Programming Interface (API) in applications  that perform routines on the received data, such as compensating for sensitivity differences, other compensation algorithms, baseline update routines, start-up and\/or initialization routines, interpolation operations, or scaling operations. The operations described with respect to the processing logic  may be implemented in the decision logic , the applications , or in other hardware, software, and\/or firmware external to the processing device . In some other embodiments, the processing device  is the host .","In another embodiment, the processing device  may also include a non-sensing actions block . This block  may be used to process and\/or receive\/transmit data to and from the host . For example, additional components may be implemented to operate with the processing device  along with the sensor array  (e.g., keyboard, keypad, mouse, trackball, LEDs, displays, or other peripheral devices).","In one embodiment, the electronic system  is implemented in a device that includes the touch-sensing surface  as the user interface, such as handheld electronics, portable telephones, cellular telephones, notebook computers, personal computers, personal data assistants (PDAs), kiosks, keyboards, televisions, remote controls, monitors, handheld multi-media devices, handheld video players, gaming devices, control panels of a household or industrial appliances, or other computer peripheral or input devices. Alternatively, the electronic system  may be used in other types of devices. It should be noted that the components of electronic system  may include all the components described above. Alternatively, electronic system  may include only some of the components described above, or include additional components not listed herein.",{"@attributes":{"id":"p-0039","num":"0038"},"figref":"FIG. 2","b":["121","101","121","101","100","121","225","222","223","225","101","212","213"]},"Capacitance sensor  includes multiplexer control , demultiplexer  and multiplexer , clock generator , signal generator , demodulation circuit , and analog to digital converter (ADC) . ADC  is further coupled with touch coordinate converter . Touch coordinate converter  outputs a signal to the processing logic .","In one embodiment, processing logic  may be a processing core . The processing core may reside on a common carrier substrate such as, for example, an integrated circuit (\u201cIC\u201d) die substrate, a multi-chip module substrate, or the like. Alternatively, the components of processing core  may be one or more separate integrated circuits and\/or discrete components. In one exemplary embodiment, processing core  is configured to provide intelligent control for the Programmable System on a Chip (\u201cPSoC\u00ae\u201d) processing device, manufactured by Cypress Semiconductor Corporation, San Jose, Calif. Alternatively, processing core  may be one or more other processing devices known by those of ordinary skill in the art, such as a microprocessor or central processing unit, a controller, special-purpose processor, digital signal processor (\u201cDSP\u201d), an application specific integrated circuit (\u201cASIC\u201d), a field programmable gate array (\u201cFPGA\u201d), or the like. In one embodiment, the processing core  and the other components of the processing device  are integrated into the same integrated circuit.","It should also be noted that the embodiments described herein are not limited to having a configuration of a processing core  coupled to a host , but may include a system that measures the capacitance on the touch sense array  and sends the raw data to a host computer where it is analyzed by an application. In effect, the processing that is done by processing core  may also be done in the host. The host may be a microprocessor, for example, as well as other types of processing devices as would be appreciated by one of ordinary skill in the art having the benefit of this disclosure.","The components of the electronic system  excluding the touch sense array  may be integrated into the IC of the processing core , or alternatively, in a separate IC. Alternatively, descriptions of the electronic system  may be generated and compiled for incorporation into other integrated circuits. For example, behavioral level code describing the electronic system , or portions thereof, may be generated using a hardware descriptive language, such as VHDL or Verilog, and stored to a machine-accessible medium (e.g., CD-ROM, hard disk, floppy disk, etc.). Furthermore, the behavioral level code can be compiled into register transfer level (\u201cRTL\u201d) code, a netlist, or even a circuit layout and stored to a machine-accessible medium. The behavioral level code, the RTL code, the netlist, and the circuit layout all represent various levels of abstraction to describe the electronic system .","It should be noted that the components of the electronic system  may include all the components described above. Alternatively, the electronic system  may include only some of the components described above.","In one embodiment, the electronic system  is used in a notebook computer. Alternatively, the electronic device may be used in other applications, such as a mobile handset, a personal data assistant (\u201cPDA\u201d), a keyboard, a television, a remote control, a monitor, a handheld multi-media device, a handheld video player, a handheld gaming device, or a control panel.","The transmit and receive electrodes in the electrode matrix  may be arranged so that each of the transmit electrodes overlap and cross each of the receive electrodes such as to form an array of intersections, while maintaining galvanic isolation from each other. Thus, each transmit electrode may be capacitively coupled with each of the receive electrodes. For example, transmit electrode  is capacitively coupled with receive electrode  at the point where transmit electrode  and receive electrode  overlap.","Clock generator  supplies a clock signal to signal generator , which produces a TX signal  to be supplied to the transmit electrodes of touch sense array . In one embodiment, the signal generator  includes a set of switches that operate according to the clock signal from clock generator . The switches may generate a TX signal  by periodically connecting the output of signal generator  to a first voltage and then to a second voltage, wherein said first and second voltages are different. In another embodiment, the signal generator  includes a charge pump array  to be described below.","The output of signal generator  is connected with demultiplexer , which allows the TX signal  to be applied to any of the M transmit electrodes of touch sense array . In one embodiment, multiplexer control  controls demultiplexer  so that the TX signal  is applied to each transmit electrode  in a controlled sequence. Demultiplexer  may also be used to ground, float, or connect an alternate signal to the other transmit electrodes to which the TX signal  is not currently being applied.","Because of the capacitive coupling between the transmit and receive electrodes, the TX signal  applied to each transmit electrode induces a current within each of the receive electrodes. For instance, when the TX signal  is applied to transmit electrode  through demultiplexer , the TX signal  induces an RX signal  on the receive electrodes in matrix . The RX signal  on each of the receive electrodes can then be measured in sequence by using multiplexer  to connect each of the N receive electrodes to demodulation circuit  in sequence.","The mutual capacitance associated with each intersection between a TX electrode and an RX electrode can be sensed by selecting every available combination of TX electrode and an RX electrode using demultiplexer  and multiplexer . To improve performance, multiplexer  may also be segmented to allow more than one of the receive electrodes in matrix  to be routed to additional demodulation circuits . In an optimized configuration, wherein there is a 1-to-1 correspondence of instances of demodulation circuit  with receive electrodes, multiplexer  may not be present in the system.","When an object, such as a finger, approaches the electrode matrix , the object causes a decrease in the mutual capacitance between only some of the electrodes. For example, if a finger is placed near the intersection of transmit electrode  and receive electrode , the presence of the finger will decrease the mutual capacitance between electrodes  and . Thus, the location of the finger on the touchpad can be determined by identifying the one or more receive electrodes having a decreased mutual capacitance in addition to identifying the transmit electrode to which the TX signal  was applied at the time the decreased mutual capacitance was measured on the one or more receive electrodes.","By determining the mutual capacitances associated with each intersection of electrodes in the matrix , the locations of one or more touch contacts may be determined. The determination may be sequential, in parallel, or may occur more frequently at commonly used electrodes.","In alternative embodiments, other methods for detecting the presence of a finger or conductive object may be used where the finger or conductive object causes an increase in capacitance at one or more electrodes, which may be arranged in a grid or other pattern. For example, a finger placed near an electrode of a capacitive sensor may introduce an additional capacitance to ground that increases the total capacitance between the electrode and ground. The location of the finger can be determined from the locations of one or more electrodes at which an increased capacitance is detected.","The induced current signal  is rectified by demodulation circuit . The rectified current output by demodulation circuit  can then be filtered and converted to a digital code by ADC .","The digital code is converted to touch coordinates indicating a position of an input on touch sensor array  by touch coordinate converter . The touch coordinates are transmitted as an input signal to the processing logic . In one embodiment, the input signal is received at an input to the processing logic . In one embodiment, the input may be configured to receive capacitance measurements indicating a plurality of row coordinates and a plurality of column coordinates. Alternatively, the input may be configured to receive row coordinates and column coordinates.","In one embodiment, a system for tracking locations of contacts on a touch-sensing surface may determine a force magnitude for each of the contacts based on the capacitance measurements from the capacitive sensor array. In one embodiment, a capacitive touch-sensing system that is also capable of determining a magnitude of force applied to each of a plurality of contacts at a touch-sensing surface may be constructed from flexible materials, such as PMMA, and may have no shield between the capacitive sensor array and an LCD display panel. In such an embodiment, changes in capacitances of sensor elements may be caused by the displacement of the sensor elements closer to a VCOM plane of the LCD display panel.",{"@attributes":{"id":"p-0057","num":"0056"},"figref":["FIG. 3","FIG. 2"],"b":["215","224","121","224"]},"Returning again to , the signal generator  includes a charge pump array  of charge pumps -. The charge pump array  is configured to supply a target voltage (e.g., 10 V) that is greater than a supply voltage (e.g., 2.5 V) used to supply all of the circuits of the electronic system  except for the touch sense array . The touch sense array  may be driven by and coupled to a high voltage programmable current driver  which may be, for example, a combination of current sources and current sinks , . The compliance voltage of the programmable current driver  may be configured to have a maximum value corresponding to the target voltage.","In one embodiment, the charge pump array  is coupled to a first feedback circuit  configured to measure a voltage on an output terminal  of the charge pump array  to select different combinations of charge pumps -to regulate power (i.e., to maintain the target or compliance voltage of the programmable current driver ). In another embodiment, the charge pump array  is further coupled to a second feedback circuit  configured to provide accurate regulation of the voltage on the output terminal  of the charge pump array . The charge pump array  may be supplied with a clock signal from the clock generator  of .",{"@attributes":{"id":"p-0060","num":"0059"},"figref":["FIG. 4","FIG. 1"],"b":["330","332","334","336","100","330","440","440","442","330","442","330","444","442","330","444","444","446","448","336","450","452","334","452","450","448"],"i":["a","n "]},"A bandgap reference circuit  provides a reference voltage close to the supply voltage that is stable over temperature, time, and current draw. The bandgap reference circuit  is coupled to a reference generator circuit  that has an output terminal  coupled to both the comparator  and the op-amp . The output voltage of the reference generator circuit  is programmable and derived from the reference voltage. This permits the voltage on the output terminal  of the charge pump array  to be set to values in the range of 3 V-10 V. Alternatively, other output voltages may be used as would be appreciated by one of ordinary skill in the art having the benefit of this disclosure.","The second feedback circuit  is configured to provide a steady state value for the voltage on the output terminal  of the charge pump array  (e.g., 10 V). The op-amp  controls a gate terminal of a pass transistor . The source terminal of the pass transistor is connected to the supply voltage (e.g., 2.5 V), while the drain terminal of the pass transistor  outputs a voltage, vdda_reg, that provides a supply for a final stage of a clock driver  for the charge pump array . The charge pump array , the feedback scaler circuit , the op-amp , and the pass transistor  form a closed loop control system (i.e., the second feedback circuit ) that accurately regulates the target voltage on the output terminal  (e.g. 10V), which, in one embodiment, is itself programmable (e.g., in a range of about 3V to 10 V). In a steady state (i.e., when the voltage on the output terminal  has settled), vdda_reg \u201csits\u201d at just the right level to sustain the voltage on the output terminal  of the charge pump array . (e.g., 10V).",{"@attributes":{"id":"p-0063","num":"0062"},"figref":["FIG. 5","FIG. 4","FIGS. 4 and 5"],"b":["330","332","334","440","440","330","334","452","442","330","442","452","462","442","330","440","440","440","440","330"],"i":["a","n ","a","n","a ","b"]},"As a result, the first feedback circuit  is configured to select different combinations of the charge pumps -to maintain the voltage on the output terminal  of the charge pump array  to provide adequate power to the programmable current driver . In one embodiment, the first feedback circuit  is configured to select a first combination of the charge pumps -(e.g., 10) when the voltage on the output terminal  of the charge pump array  when the input voltage is more than a threshold level and configured to select a second combination of the charge pumps -(e.g., 2) when the voltage on the output terminal  of the charge pump array  is less than the threshold voltage. In one embodiment, the second combination may have fewer charge pumps than the first combination.","In another embodiment, the feedback circuit may measure and send a voltage proportional to the voltage on the output terminal  of the charge pump array  to the processing core , and the processing core  may select (using or without using the first feedback circuit ) the combinations.","More particularly, the sequencer  is a large digital control block serving many functions. The sequencer  has full control over all switches and activities in general in an entire touch-screen subsystem (TSS). Using the sequencer , all activities in an RX and TX circuits occur in a fully synchronous fashion. The sequencer circuit  is implemented as part of the PSoC\u00ae processing device comprised of custom universal digital blocks (UDB). As used herein, UDBs are a collection of uncommitted logic (PLD) and structural logic (Datapath) optimized to create all common embedded peripherals and customized functionality that are application or design specific. UDBs may be employed to implement a variety of general and specific digital logic devices including, but not limited to, field programmable gate arrays (FPGA), programmable array logic (PAL), complex programmable logic devices (CPLD) etc.","Only a small portion of the sequencer  is employed in the first feedback circuit . To select between, for example, two combinations of charge pumps -, the sequencer  is configured to select between a \u201cramp\u201d setting (e.g., full power, 10 pumps ON), and a \u201ckeep\u201d setting (e.g., low power, 1 or 2 pumps ON). The threshold signal directs the sequencer  to switch between the two.","Within the sequencer is a register holding 2\u00d74-bit data. When the sequencer receives a \u20180\u2019 on \u201cthreshold\u201d, it outputs one 4-bit data, and when it receives a \u20181\u2019 on \u201cthreshold\u201d, it outputs the other 4-bit data. In an embodiment, all ten parallel pumps may be employed for maximum power by setting the 4-bit data to be 10 decimal, i.e., all pumps are ON. When the voltage level is approximately reached (and the touch sense array  is charged), there is no need to continue pumping at full power. The number of parallel pumps operating may then be throttled. The comparator  \u201csignals\u201d the sequencer to switch to the other 4-bit data (which may, for example, contain a \u20182\u2019 decimal setting). Once the charge pump array  receives this \u20182\u2019 setting, it will follow suit and power down eight of the ten parallel charge pumps -. This saves on power.","It should be noted that all of the pumps cannot be \u201cswitched-off\u201d and continue to hold 10V on the touch sense array . There is unavoidable leakage and some DC current drain that requires at least one of the ten pumps to be on to sustain the 10V level. It should also be noted that each of the 4-bit data is programmable, e.g., initially there may be 10 charge pumps operating and then 1, or 8 and 2, 5 and 5, etc. For a given application (panel type and size, speed and power requirements, etc.) it is likely that these values may not change once they are set.","In one embodiment, the sequencer  may be configured to output individual bits of control (e.g., 4 bits) to provide address signals for a thermometer decoder . Although 4 bits of control permit up to 16 thermometer levels to be decode, only 10 are employed.","According to one embodiment, as shown by the dotted lines in , the electronic system  may also include a stability compensation capacitor , a ripple filter capacitor , and a bypass block  for permitting the charge pump array  to operate on the power supply voltage, vdda.","Once the voltage on an output terminal  of the charge pump array  has settled to a final voltage, it may supply a high voltage programmable current driver , which is configured to charge and discharge the touch sense array .",{"@attributes":{"id":"p-0073","num":"0072"},"figref":"FIG. 6","b":["444","444","670","672","670","448","670","674","670","452","670","452","448","676","452","670"]},"The output  to the comparator  is set slightly higher than the output  to the op-amp . This ensures that the threshold signal stays high in a steady state. The op-amp  and the comparator  may encounter offset voltages. These offsets may cause the comparator threshold signal to NOT go high when required. By setting a voltage at the output  to the comparator  slightly higher than that at the output  to the op-amp , the offset problem may be overcome.","The situation is made more complex by having a programmable target voltage. A 15 mV offset at a 10V target voltage shrinks to about 4.5 mV at a 3V target voltage, and the non-trigger problem may re-occur. To counteract this phenomenon, \u201crange\u201d bits may select slightly different tap-off points from the resistor string  via the range selection switch , depending on the programmed target voltage level.",{"@attributes":{"id":"p-0076","num":"0075"},"figref":["FIG. 7","FIG. 8"],"b":["456","454","100","778","780","782","784","784","784","786","788","452","448","330","463"],"i":["a","n","a"]},"Similarly, each of the charge pumps -of the charge pump array  may be addressed to select a particular combination of charge pumps -. An example of a 4-to-16 thermometer code is shown in . In one embodiment, up to decimal 10 are employed. Note that for this condition, d1 up to d10 are all \u201c1\u201d, indicating that all 10 parallel charge pumps -are to be turned ON. It would also be appreciated by one of ordinary skill in the art that the thermometer decoder  may be implemented by standard combinational logic cells.",{"@attributes":{"id":"p-0078","num":"0077"},"figref":"FIG. 9","b":["330","440","440","990","990","990","990","440","990","990","440","992","990","990","990","440","440","990","990","440","440","990","990","440","440","440","440","440","440"],"i":["a","n ","a","n ","a","n ","a","a","n ","a","a","b","a ","a","n","a","n","a","n ","a","n ","a","n ","a","n ","a","n "]},{"@attributes":{"id":"p-0079","num":"0078"},"figref":"FIG. 10","b":["990","440","440","330","1092","1094","1096","1098","1010","442","330"],"i":["a","a","n "]},{"@attributes":{"id":"p-0080","num":"0079"},"figref":"FIG. 11","b":["332","332","330","1102","1104","332","332","1106","1108","1110","1112","1114","1106","20","1110","1110","1102","1114","1102","1110","20","1114","1114","1116"]},"Referring again to , an equivalent circuit of the high voltage programmable current driver  is a current source  coupled between supply \u201cvcctshv\u201d and the output terminal  of the high voltage programmable current driver , and a current sink  coupled between the output terminal  of the high voltage programmable current driver  and a common terminal (e.g., ground). When the high voltage programmable current driver  is connected to a capacitive load such as between two electrodes of the touch sense array  of , this results in an increasing, then decreasing, voltage ramp on one input electrode of the touch sense array  (i.e., a triangle wave).","An explanation for the use of a combination current source\/sink high voltage current driver  is as follows. If the TX signal is substantially a square wave having very sharp edges (high dV\/dt), high current spikes result when these edges are applied to a capacitive load. This may lead to saturation effects on the RX side as it may be overwhelmed by inrushing current, and it may create undesired spikes in the power supply, vdda, of the electronic system  of . This in turn may negatively impact other system components.","The slopes of the TX signal may be reduced without reducing the frequency of the TX signal. In this context, a high TX frequency may be better than a low frequency, since more of the signal can be produced in a shorter amount of time. Reducing the slope of a square-wave may gradually produce the shape of a triangle wave. Slowing the edges of a square wave signal feeding into a capacitive load is equivalent to limiting the current it can provide. Signal drivers operating in this mode are sometimes referred to as \u201ccurrent starved\u201d drivers. At their core, \u201ccurrent starved\u201d drivers are current sources and sinks with a set current capability. In other words, such a \u201ccurrent starved\u201d driver has current sources\/sinks built into its driver stages, limiting its drive capability to the maximum current that the current sinks\/source may handle. These limits can be made programmable.","If the output of the charge pump array  of  is connected to the current-starved high voltage current driver , programmable voltage slopes and programmable voltage levels may be provided. More particularly, a programmable current sink\/source connected to a capacitive load, when activated, can drive a current into the capacitive load (i.e., the touch sense array ) and continues to do so until a target voltage has been reached. The current is produced by the programmable charge pump array  which is configured to produce an output current at voltages higher than the supply voltage. Thus, as the voltage builds on the touch sense array , the corresponding TX signal ramps up until the maximum voltage achievable with the charge pump array  has been reached.","It is worth noting that only the \u201ccharge-up\u201d process of the TX signal requires the charge pump array  to be active. To \u201ccharge down\u201d, other circuitry may be used. For example, a current sink can discharge the touch sense array  at a controlled (and programmable) rate. As a result, the charge pump array  can remain inactive during the charge-down phase and thus not waste any power.","However, in one embodiment, two TX signals may be produced which are complementary in nature: while one TX signal charges up, the other charges down. The one charging up requires the charge pump array  to be active, whereas the one charging down employs a switch or a current sink, as described above. Then, during the next phase of the TX signal, the first signal charges down, and the charge pump array  now serves the second TX signal so as to charge up. In this scenario, the charge pump array  is active all the time, but it serves two TX signals which can be used for creating advanced stimulus signals.",{"@attributes":{"id":"p-0087","num":"0086"},"figref":["FIG. 12","FIG. 4"],"b":["1200","1202","330","442","332","121","334","442","1204","334","440","440","442"],"i":["a","n "]},{"@attributes":{"id":"p-0088","num":"0087"},"figref":["FIG. 13","FIG. 12"],"b":["440","440","1302","334","440","440","442","330","1304","334","440","440","442"],"i":["a","n ","a","n ","a","n "]},"Embodiments of the present invention, described herein, include various operations. These operations may be performed by hardware components, software, firmware, or a combination thereof. As used herein, the term \u201ccoupled to\u201d may mean coupled directly or indirectly through one or more intervening components. Any of the signals provided over various buses described herein may be time multiplexed with other signals and provided over one or more common buses. Additionally, the interconnection between circuit components or blocks may be shown as buses or as single signal lines. Each of the buses may alternatively be one or more single signal lines and each of the single signal lines may alternatively be buses.","Certain embodiments may be implemented as a computer program product that may include instructions stored on a computer-readable medium. These instructions may be used to program a general-purpose or special-purpose processor to perform the described operations. A computer-readable medium includes any mechanism for storing or transmitting information in a form (e.g., software, processing application) readable by a machine (e.g., a computer). The computer-readable storage medium may include, but is not limited to, magnetic storage medium (e.g., floppy diskette); optical storage medium (e.g., CD-ROM); magneto-optical storage medium; read-only memory (ROM); random-access memory (RAM); erasable programmable memory (e.g., EPROM and EEPROM); flash memory, or another type of medium suitable for storing electronic instructions. The computer-readable transmission medium includes, but is not limited to, electrical, optical, acoustical, or other form of propagated signal (e.g., carrier waves, infrared signals, digital signals, or the like), or another type of medium suitable for transmitting electronic instructions.","Additionally, some embodiments may be practiced in distributed computing environments where the computer-readable medium is stored on and\/or executed by more than one computer system. In addition, the information transferred between computer systems may either be pulled or pushed across the transmission medium connecting the computer systems.","Although the operations of the method(s) herein are shown and described in a particular order, the order of the operations of each method may be altered so that certain operations may be performed in an inverse order or so that certain operation may be performed, at least in part, concurrently with other operations. In another embodiment, instructions or sub-operations of distinct operations may be in an intermittent and\/or alternating manner.","In the foregoing specification, the invention has been described with reference to specific exemplary embodiments thereof. It will, however, be evident that various modifications and changes may be made thereto without departing from the broader spirit and scope of the invention as set forth in the appended claims. The specification and drawings are, accordingly, to be regarded in an illustrative sense rather than a restrictive sense."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Embodiments of the present invention will be more readily understood from the detailed description of exemplary embodiments presented below considered in conjunction with the attached drawings in which like reference numerals refer to similar elements and in which:",{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":["FIG. 3","FIG. 2"]},{"@attributes":{"id":"p-0016","num":"0015"},"figref":["FIG. 4","FIG. 1"]},{"@attributes":{"id":"p-0017","num":"0016"},"figref":["FIG. 5","FIG. 4"]},{"@attributes":{"id":"p-0018","num":"0017"},"figref":["FIG. 6","FIG. 4"]},{"@attributes":{"id":"p-0019","num":"0018"},"figref":["FIG. 7","FIG. 4"]},{"@attributes":{"id":"p-0020","num":"0019"},"figref":["FIG. 8","FIG. 4"]},{"@attributes":{"id":"p-0021","num":"0020"},"figref":["FIG. 9","FIG. 4"]},{"@attributes":{"id":"p-0022","num":"0021"},"figref":["FIG. 10","FIG. 4"]},{"@attributes":{"id":"p-0023","num":"0022"},"figref":["FIG. 11","FIG. 3"]},{"@attributes":{"id":"p-0024","num":"0023"},"figref":["FIG. 12","FIG. 4"]},{"@attributes":{"id":"p-0025","num":"0024"},"figref":["FIG. 13","FIG. 12"]}]},"DETDESC":[{},{}]}
