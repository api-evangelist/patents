---
title: Migratory hardware diagnostic testing
abstract: A method and system of migratory hardware diagnostic testing is disclosed. In one embodiment, a method includes performing a diagnostic test of a hardware component of a first partition of a server using a first test module embedded in the first partition in response to a receipt of a test command, and storing context data associated with the diagnostic test of the hardware component in a memory associated with the hardware component, where the context data indicates a current state of the diagnostic test of the hardware component. Further, the method includes analyzing the context data upon a receipt of an instruction for a migration of the hardware component to a second partition of the server, and continuing the diagnostic test of the hardware component using a second test module embedded in the second partition based on the context data if the migration is performed.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08205117&OS=08205117&RS=08205117
owner: Hewlett-Packard Development Company, L.P.
number: 08205117
owner_city: Houston
owner_country: US
publication_date: 20090420
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["RELATED APPLICATIONS","BACKGROUND","DETAILED DESCRIPTION"],"p":["Benefit is claimed under 35 U.S.C. 119(a)-(d) to Foreign application Serial No. 419\/CHE\/2009 entitled \u201cMIGRATORY HARDWARE DIAGNOSTIC TESTING\u201d by Hewlett-Packard Development Company, L.P., filed on 25 Feb. 2009, which is herein incorporated in its entirety by reference for all purposes.","A server may be divided into multiple partitions to optimize usage of its resources. The partitioning of the server may be based on a hard partitioning or a soft or logical partitioning. The hard or physical partitioning may physically divide the server into multiple partitions, where each partition acts as a physically independent, self-contained server with its own processors, memory, input\/output subsystem and network resources. The soft partitioning may be more flexible with the division, where a single hardware component may be migrated between multiple soft partitions.","Test applications, such as hardware verifiers and exercisers may be used to diagnose health of hardware components, for example, a processor, memory and the like, in the server. The hardware verifiers and exercisers may be based on a number of algorithms which inject different levels of stress into the hardware components to verify the components' health.","Other features of the present embodiments will be apparent from the accompanying drawings and from the detailed description that follows.","A system and method for migratory hardware diagnostic testing is disclosed. In the following detailed description of the embodiments of the invention, reference is made to the accompanying drawings that form a part hereof, and in which are shown by way of illustration specific embodiments in which the invention may be practiced. These embodiments are described in sufficient detail to enable those skilled in the art to practice the invention, and it is to be understood that other embodiments may be utilized and that changes may be made without departing from the scope of the present invention. The following detailed description is, therefore, not to be taken in a limiting sense, and the scope of the present invention is defined only by the appended claims.",{"@attributes":{"id":"p-0011","num":"0010"},"figref":["FIG. 1","FIG. 1"],"b":["100","104","100","102","102","104","100","118","102","102"]},"As illustrated, the first partition A and the second partition B include a first test module A and a second test module B respectively, for performing a diagnostic test of the hardware component . As illustrated in , the hardware component  includes a memory , for example, a non-volatile memory, for storing a context data . In one embodiment, the context data  may indicate a current state of the diagnostic test of the hardware component , for example, iterations completed before a migration of the hardware component  was initiated.","In operation, a diagnostic test of the hardware component  of the first partition A may be performed using the first test module A embedded in the first partition A. The diagnostic test of the hardware component  may be performed in response to a receipt of a test command  with a sequence identification (ID) . The test command  may be triggered by an application on an operating system of the first partition A of the server , a centralized error analysis engine in the management processor  of the server , or a user-initiated command. Further, context data  associated with the diagnostic test of the hardware component  may be stored in the memory  associated with the hardware component .","Furthermore, the context data  may be analyzed upon receipt of migration instruction  of the hardware component  to the second partition B of the server . The storing of the context data  may be performed periodically or upon the receipt of the migration instruction  of the hardware component  to the second partition B. In one embodiment, if the migration is performed, the diagnostic test of the hardware component  may be continued based on the context data  using the second test module B embedded in the second partition B. Further, the migration of the hardware component  to the second partition B may be halted if the context data  indicates a fault with the hardware component .","In accordance with the above mentioned embodiments, event data  associated with a progress of the diagnostic test of the hardware component  may be forwarded to the management processor  of the server . Further, the event data  may be communicated to a user interface  using the management processor  of the server . In one exemplary implementation, the event data  may be tagged with the sequence ID  assigned for the diagnostic test of the hardware component .",{"@attributes":{"id":"p-0016","num":"0015"},"figref":["FIG. 2","FIG. 1","FIG. 2"],"b":["200","208","200","100","200","202","202","208"]},"As illustrated in , the hardware component  in the first partition A includes a memory  for storing context data . The context data  may be associated with a diagnostic test of the hardware component  and may be identified using a sequence ID. In one embodiment, the context data  may indicate a current state of the diagnostic test of the hardware component .","In operation, the diagnostic test of the hardware component  may be performed upon receiving a test command  from an exercising application . In one embodiment, the diagnostic test of the hardware component  may be initiated using a user interface  via a web-based enterprise management (WBEM) interface . For example, the exercising application  coupled to the WBEM interface  may trigger the diagnostic test of the hardware component . In one embodiment, the exercising application  may trigger the diagnostic test of the hardware component  by invoking a firmware application programming interface and return with a sequence ID .","As illustrated in , the first partition A and the second partition B include a test module A and a test module B, respectively, for performing the diagnostic test of the hardware component . The test module A may receive the test command  with sequence ID . For example, the test command  may be received from the exercising application  for performing the diagnostic test of the hardware component . Further, the context data  associated with the diagnostic test of the hardware component  may be periodically stored in the memory  of the hardware component .","Further, as illustrated in , the hardware component  may be triggered for a migration using a migration command  to a destination partition, such as the second partition B. The triggering may be invoked by a workload balancing application  based on the workload of each partition. Further, the context data  associated with the diagnostic test of the hardware component  may be also migrated along with the hardware component  to the second partition B. Thus, the context data  is available to generate a status of the diagnostic test.","Further, the diagnostic test of the hardware component  may be continued after the migration based on the context data . In other words, the second test module B embedded in the second partition B may manage the diagnostic test of the hardware component  based on the context data , for example, if the diagnostic test is unfinished before the migration of the hardware component .","The hardware component  may not be migrated from the first partition A to the second partition B if the context data  indicates a fault with the hardware component . For example, the context data  may be analyzed upon receipt of the migration command . Also, as illustrated in , the first partition A and the second partition B include an event post module A and an event post module B, respectively. The event post module A and an event post module B may generate and post event data associated with the status of the diagnostic test based on the context data .","The event data may include first event data , for example, forward progress log intelligent platform management interface (IPMI) event data. Further, the first event data  may indicate a percent completion of the diagnostic test if the diagnostic test is unfinished. The event data may also include second event data , for example, completed exercising zero event (EO) IPMI event data, which indicates a completeness of the diagnostic test.","As illustrated in , the server device  also includes a management processor  coupled to the first partition A and the second partition B for communicating the event data to the exercising application  of the test module A. Further, as illustrated in , an in-band communication channel , for example, inter-integrated circuit bus, communicates the event data. The event data is communicated from the event post module A and the event post module B to the management processor .","As illustrated in , the management processor  includes an event consumer module  for receiving the event data from the event post module A and the event post module B. Further, the management processor  includes a converter module  for converting the event data of the event consumer module  in a WBEM indication.","Further, as illustrated in , each of the first partition A and the second partition B includes a WBEM indication consumer module A and a WBEM indication consumer module B, respectively. The WBEM indication consumer module A and the WBEM indication consumer module B may subscribe to the event data in the WBEM indication. Further, the WBEM indication consumer module A and the WBEM indication consumer module B may forward the event data, for example, the first event data  and\/or the second event data , in the WBEM indication with the sequence ID to the exercising application . In one exemplary implementation, the second event data  is forwarded by the exercising application  to the user interface  through the WBEM interface .",{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 3","b":["300","302","304"]},"In step , the context data is analyzed upon a receipt of an instruction for a migration of the hardware component to a second partition of the server. In one embodiment, storing the context data may be performed periodically or upon the receipt of the instruction for the migration of the hardware component to the second partition. In step , the diagnostic test of the hardware component is continued using a second test module embedded in the second partition based on the context data if the migration is performed. The migration of the hardware component to the second partition may be halted if the context data indicates a fault with the hardware component.","In accordance with the above described embodiments, event data associated with a progress of the diagnostic test of the hardware component may be forwarded to a management processor of the server. Furthermore, the event data may be tagged with a sequence ID assigned for the diagnostic test of the hardware component. In addition, the event data is communicated to a user interface using the management processor of the server. Moreover, in one example embodiment, a computer readable medium for testing the hardware component of the server having multiple partitions has instructions that, when executed by a computer, cause the computer to perform the method of .","In various embodiments, the migratory hardware diagnostic testing methods and systems described in  through  may provide a solution for performing diagnostic tests on hardware components in a dynamic environment, where the hardware components may be migrated between different partitions of the server. The methods and systems may focus on the hardware components moving in and out of an operating system (OS) instance online and not on OS absent migration. In various embodiments, the methods and systems may work both in soft and hard partition environment. Further, sanity tests may be allowed to run on the migrated hardware component by embedding the context data in the memory of the hardware components. This also helps eliminate the migration of faulty hardware components to a new partition of the server.","Further, in the embodiments, the exercising applications, for example, applications initiating diagnostic tests, may be transparent to the migration of the hardware components. This may reduce complexity when communicating with the diagnostic stack. Furthermore, applications that initiate diagnostic tests may be decoupled from the applications that actually migrate the hardware components, thus providing an added advantage.","In various embodiments, migratory hardware diagnostic testing may be enabled without need of additional hardware devices. Further, the use of industry standards like IPMI and WBEM may help in giving the various embodiments all the major advantages of a standard based solution. In other embodiment, the partitions of the server may be directly read the IPMI event, for example, event data, from the management processor via the IPMI-block transfer (BT) interface when the partition and the management processor are not connected via a local area network.","In addition, the various operations, processes, and methods disclosed herein may be embodied in a machine-readable medium and\/or a machine accessible medium compatible with a data processing system, for example, a computer system, and may be performed in any order, for example, including using means for achieving the various operations. Accordingly, the specification and drawings are to be regarded in an illustrative rather than a restrictive sense.","Although the present embodiments have been described with reference to specific example embodiments, it will be evident that various modifications and changes may be made to these embodiments without departing from the broader spirit and scope of the various embodiments. For example, the various devices, modules, analyzers, generators, and the like described herein may be enabled and operated using hardware circuitry, for example, a complementary metal oxide semiconductor based logic circuitry, firmware, software and\/or any combination of hardware, firmware, and\/or software, for example, embodied in a machine readable medium. For example, the various electrical structure and methods may be embodied using transistors, logic gates, and electrical circuits, for example, application specific integrated circuitry."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Embodiments of the present invention are illustrated by way of an example and not limited to the figures of the accompanying drawings, in which like references indicate similar elements and in which:",{"@attributes":{"id":"p-0006","num":"0005"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0007","num":"0006"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0008","num":"0007"},"figref":"FIG. 3"}]},"DETDESC":[{},{}]}
