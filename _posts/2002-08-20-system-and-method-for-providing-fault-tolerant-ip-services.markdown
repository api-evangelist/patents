---
title: System and method for providing fault tolerant IP services
abstract: A system and method for providing fault tolerant IP services includes establishing a first communication session between an originating telephony device and an application server, through a primary call manager. Failure of the primary call manager may be detected. A second communication session between the application server and a destination telephony device may be established via a back-up call manager. The first communication and the second communication session may be coupled at the application server to establish two-way communication between the originating telephony device and the destination telephony device.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07602704&OS=07602704&RS=07602704
owner: Cisco Technology, Inc.
number: 07602704
owner_city: San Jose
owner_country: US
publication_date: 20020820
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["TECHNICAL FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE INVENTION"],"p":["This invention relates generally to the field of packet-based communication networks, and more specifically to a system and method for providing fault tolerant IP services.","Historically, telecommunications have involved the transmission of voice and fax signals over a network dedicated to telecommunications, such as the Public Switched Telephone Network (PSTN) or a Private Branch Exchange (PBX). Similarly, data communications between computers have also historically been transmitted on a dedicated data network, such as a local area network (LAN) or a wide area network (WAN). Currently, telecommunications and data transmissions are being merged into an integrated communication network using technologies such as Voice over Internet Protocol (VoIP). Since many LANs and WANs transmit computer data using Internet Protocol (IP), VoIP uses this existing technology to transmit voice and fax signals by converting these signals into digital data and encapsulating the data for transmission over an IP network. However, the integration of telecommunications and data transmissions is still ongoing, and many features that were available to users of traditional telecommunications networks have not been made available to users of VoIP and similar technologies.","The reliability of PBXs and central offices (COs) has improved over the years and is said to meet the high mark of five nines. To address the same requirements for the VoIP Market, substantial effort has gone into handling failures in call managers (CMs) and the attached servers. Both PBXs and call managers rely on a backup processor that takes over call processing tasks in the case where the primary call manager fails. With the fail over mechanism of the call manager, users whose phones are connected to a call manager that fails can continue their call but can not invoke any supplementary services. After the calls are terminated, the phones that were homed to the failed call manager re-home to the backup call manager and provide full feature service to the users.","The present invention includes a system and method for providing fault tolerant IP services that substantially eliminates or reduces disadvantages or problems associated with previously developed systems and methods. In particular, the present invention contemplates an application server that is operable to establish a communication session with a telephony device using a primary call manager, detect failure of the call manager, initiate a second communication session with a destination telephony device using a back-up call manager, and couple the first communication session with the second communication session to allow communication between the telephony device and the destination telephony device, through the application server.","In accordance with a particular embodiment of the present invention, a method for providing fault tolerant IP services includes establishing a first communication session between an originating telephony device and an application server, through a primary call manager. A failure of the primary call manager may be detected. A second communication session between the application server and a destination telephony device is established via a back-up call manager. The first communication session and the second communication session are coupled at the application server to establish two-way communication between the originating telephony device and the destination telephony device.","In accordance with another embodiment of the present invention, a method of fault tolerant communication between telephony devices comprises establishing a communication session between a first telephony device and a second telephony device using a gateway. The communication session includes media and signaling information. The communication session is managed using out-of-band signaling among the gateway, call manager and the second telephony device, if the call manager is active. The communication session is managed using in-band signaling between the gateway and the second telephony device if a failure of the call manager is detected.","Technical advantages of particular embodiments of the present invention include an application server that is operable to detect failure of a call manager, and maintain a communication session with a telephony device. The application server initiates a communication session with a destination telephony device using a back-up call manager, and tunnels the first and second communication sessions through the application server. Accordingly, users experience little or no interruption or inconvenience due to failure of a call manager during a communication session with the application server.","Another technical advantage of particular embodiments of the present invention includes a gateway that is operable to detect failure of a call manager that is managing signaling between the gateway and an IP telephony device. While the call manager is active, the gateway separates media and signaling of the communication session, and communicates signaling to the call manager. If the call manager fails, the gateway communicates both media and signaling to the IP telephony device, in-band.","Still another technical advantage of particular embodiments of the present invention includes a communication system that is tolerant to the failure of a call manager. Accordingly, auxiliary services are provided to end users of the communication system who initiated a communication session using a primary call manager, which failed after the communication session had been established.","Other technical advantages are readily apparent to one skilled in the art from the following figures, descriptions, and claims.",{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 1","b":["30","32","32","32","38","34","38","30","36","36","36","32","38","33","34","38"],"i":["a ","b ","a ","b "]},"In accordance with a particular embodiment, application server  may be configured to detect the failure of a call manager , and establish a communication session with a backup call manager. The backup call manager is used to complete the communication session with little or no interruption or inconvenience of the user. For example, application server  may be used to connect endpoint  with an agent of application server , by tunneling the communication session through application server , and using the backup call manager. Therefore, the communication session between an endpoint  and application server  may continue uninterrupted by the failure of TCP\/IP communication with call manager , and\/or a disruption of service experienced at call manager . Thus, components of communication system  are tolerant to the fault of a call manager. Accordingly, auxiliary services are provided to end users of communication system  who initiated a communication session using a primary call manager, which failed after the communication session had been established. Various examples and embodiments are described herein, with regard to .","Application server  may be any server configured to provide internet protocol (IP) services to a user of network . For example, in a particular embodiment, application server  may include an automated attendant. An automated attendant is a device which answers callers with a digital recording, and allows callers to route their call to an extension through touch tone input (e.g., dual tone multi-frequency, or DTMF), in response to a voice prompt. An automated attendant avoids the intervention of a human being who uses an attendant console, thereby avoiding related personnel cost.","Application server  may also include an automatic call distributor (ACD). An ACD is a specialized phone system used to route incoming calls to available personnel so that calls are evenly, or intelligently distributed. ACDs may also be used by companies in making outgoing calls. ACDs typically perform at least 4 functions: (i) recognize and answer an incoming call; (ii) look in a database for instructions on what to do with the call; (iii) based on these instructions place the caller on hold (e.g., in a queue manager) and\/or play a recording; and (iv) transfer the call to an agent as soon as the agent is available to receive the call and the caller is next in the queue, for the available agent.","Application server  may also include an interactive voice response (IVR) System. An IVR system may be used to receive calls and route the call and\/or exchange media with the caller based on indications (e.g., DTMF) received from the caller. This allows the caller to receive information from the IVR system in response to touch tone selections made by the caller. The information may include weather, stock quotes, sports' scores, or other news or topics.","Application server  may also include a queue manager. A queue manager is used to maintain callers in a predetermined order, such that the callers may be sequentially and\/or intelligently distributed to various agents for services available from the server, when the agent and\/or server are available. It should be recognized within the teachings of the present invention that application server  may include one or any combination of the components described above. Furthermore, application server  may comprise any component or components that provide services to an end user, without regard to the specific services being provided, within the spirit and scope of the present invention.","In accordance with a particular embodiment of the present invention, application server  communicates with network  using Java Telephony API (JTAPI). JTAPI is a set of modularly-designed, application programming interfaces for Java based computer telephony applications or services. JTAPI signaling is used to: (i) setup\/tear down communication sessions between components of network , (ii) transfer communication sessions between components of network , and\/or (iii) pass DTMF (out-of-band). JTAPI also provides other services and functionality including auxiliary services (e.g., conferencing). The list of services and functionality described above, which are available using JTAPI signaling, is provided for example only, and is not an exhaustive list. It should be recognized, however, that other signaling protocols may be used, in accordance with the teachings of the present invention.","Endpoints  may be any combination of hardware and\/or software that provide communication services to a user. For example, endpoints  may be a telephone, a computer running telephony software, a video monitor, a camera, or any other communication or processing hardware, software and\/or embedded logic that supports the communication of packets of media using network . Endpoints  may also include unattended or automated systems, gateways, multipoint control unit (MCU) other intermediate components, or other devices that can establish or terminate media sessions. Although  illustrates two endpoints , communication system  contemplates any number and arrangement of endpoints  for communicating media. Furthermore, the described technologies and techniques for establishing a communication session between endpoints  may be adapted to establish a conference between more than two endpoints .","Although a specific communication network  is illustrated in , the term \u201ccommunication network\u201d should be interpreted as generically defining any network capable of transmitting audio and\/or video telecommunication signals, data, and\/or messages. Network  may be a local area network (LAN), wide area network (WAN), global distributed network such as the Internet, Intranet, Extranet, or any other form of wireless or wireline communication network. Generally, network  provides for the communication of packets, cells, frames, or other portions of information (generally referred to as packets) between components of network . Network  may include any combination of gateways, routers, hubs, switches, and other hardware and\/or software implementing any number of communication protocols that allow for the exchange of packets in communication system .","In a particular embodiment, network  employs communication protocols that allow for the addressing or identification of endpoints  coupled to network . For example, using Internet protocol (IP), each of the components coupled together by network  in communication system  may be identified in information directed using IP addresses (e.g., a 32 bit unique identifier). In this manner, network  may support any form and\/or combination of point-to-point, multicast, unicast, or other techniques for exchanging media packets among components in communication system . Although the subsequent description will primarily focus on IP telephony devices, it should be understood that other appropriate telephony devices, such as Voice over Frame Relay devices, are also included within the scope of this description.","Network  may be directly coupled to other IP networks including, but not limited to, the Internet . Since IP networks share a common method of transmitting data, telecommunication signals may be transmitted between telephony devices located on different, but interconnected, IP networks. In addition to being coupled to other IP networks, network  may also be coupled to non-IP telecommunication networks through the use of gateway . For example, network  is coupled to Public Switched Telephone Network (PSTN) . PSTN  includes switching stations, central offices, mobile telephone switching offices, pager switching offices, remote terminals, and other related telecommunications equipment that are located across the country.","IP networks transmit data (including voice and video data) by placing the data in packets and sending each packet individually to the selected destination. Unlike a circuit-switched network (like PSTN ), dedicated bandwidth is not required for the duration of a call or fax transmission over IP networks. Instead, each telephony device sends packets across the network as they become available for transmission. This feature makes bandwidth available for other data when voice or fax data is not being transmitted.","The technology that allows telecommunications to be transmitted over an IP network may be referred to as Voice over IP (VoIP). In the illustrated embodiment, endpoints  are IP telephony devices. IP telephony devices have the capability of encapsulating a user's voice (or other inputs) into IP packets so that the voice can be transmitted over network . IP telephony devices may include telephones, fax machines, computers running telephony software (such as MICROSOFT NETMEETING), gateways, or any other device capable of performing telephony functions over an IP network.","Call managers  include hardware, software, and\/or embedded logic operable to identify, control, count, and\/or supervise the traffic or flow through it. Call managers  also include terminal and gateway registration regarding components of network , address resolution, bandwidth control, admission control, etc. In general, call managers  perform network administrator functionality with regard to endpoints  and\/or other components of network  under its control. Although  illustrates two call managers , network  contemplates any number and configuration of call managers .","Call manager  may be centrally located within network , or distributed between a plurality of components of network . Each call manager  is an application that controls call processing, routing, telephone features and options (such as call hold, call transfer, and caller ID), device configuration, and other telephony functions and parameters within communication network .","Each call manager  can control one or more endpoints  coupled with network . Call manager  may be implemented as software executing on one or more computers coupled to network . The call manager software may be embodied in any type of computer-readable medium including, without limitation, hard drives, flash memory, diskettes, CD-ROMs, DVD-ROMs, or other optical or magnetic storage devices.","When an endpoint  is connected to network  or elsewhere in communication system  (or when it otherwise comes on-line), endpoint  may be assigned an IP address. The endpoint then registers with one or more call managers  with which it can communicate using its telephone number and\/or its IP address. Alternatively, endpoint  may request that it be assigned a telephone number and\/or an IP address by call manager . The term \u201ctelephone number\u201d should be understood to include any appropriate combination of digits or characters or any other appropriate method of identifying a telephony device. Call manager  with which an endpoint  has registered creates an internal device process that is used to route signaling to and from endpoints  and application server , from call manager , or other endpoints coupled with network .","The ability of a call manager  to control any communication session between users of endpoints  and\/or application server  in communication system  allows a call processing environment in which control of communication sessions between or among users of endpoints  and\/or application server  may be distributed dynamically in response to changes in communication system . For example, if a call manager goes offline, the endpoint  that was originally homed to that call manager can home and register to an alternative call manager . Likewise, if a communication link between an endpoint  and a call manager goes down, the endpoint  may home and register to an alternative call manager to which there is an operable communication path. Furthermore, the flexible homing capability of endpoints  also provides for network scalability and loadsharing by allowing endpoints  to be homed to any call manager , regardless of physical location. This avoids excess load on a particular call manager  when new endpoints  come on line, and provides load balancing between call managers .","When a user wishes to place a call from an endpoint  to another IP telephony device on network  (an intra-LAN call, for example), the calling telephony device transmits a signal to call manager with which it is registered, indicating the desired function and the telephony device to be called. Call manager then checks on the availability of the called telephony device and, if available, sets up the call by instructing the originating telephony device to establish a media (audio and\/or video) stream with the called (target) telephony device. The initial signaling between call manager and either the originating telephony device or the target telephony device is transmitted over network  using, for example, the Transmission Control Protocol (TCP).","The call is initiated by an endpoint  using call manager , or with the cooperation of call manager , using signaling over TCP. A codec (coder\/decoder) at the endpoint converts the voice, video or fax signals generated by the users of the telephony devices from analog media signals into digital form. The codec may be implemented either in software or as special-purpose hardware in endpoints . In the case of an IP telephone, as the user speaks into the handset, the codec converts the analog voice signals into digital data. The digitally encoded data is then encapsulated into IP packets so that it can be transmitted over network .","The encapsulation may be performed by Real-Time Transport Protocol (RTP) running over User Datagram Protocol (UDP), or any other suitable communication protocol. As with TCP, UDP uses the Internet Protocol to get data packets from one computer to another. Unlike TCP, however, UDP does not provide sequencing and error-checking of the arriving packets. Once a UDP media packet has been received at the destination telephony device, a codec in the destination telephony device translates the digital data into analog audio and\/or video signals for presentation to the user. The entire process is repeated each time that any call participant (or any other source) generates an audio, video, or fax signal.","In addition to intra-LAN calls, calls can also be placed to and received from non-IP telephony devices that are connected to PSTN . Such calls are made through gateway . Gateway  accomplishes at least these things: (i) converts signaling protocols (e.g., digital or analog to packets); (ii) transcoding; and (iii) converts between address of PSTN and the TCP address. For example, gateway  may convert analog or digital circuit-switched data transmitted by PSTN  to packetized data transmitted by network , and vice-versa. When voice data packets are transmitted from network , gateway  retrieves the data contained in the incoming packets and converts this digital data to the analog or digital format used by the PSTN trunk to which gateway  is coupled. Since the digital format for voice transmissions over an IP network is often different than the format used on the digital trunks of PSTN , the gateway provides conversion between these different digital formats, which is referred to as transcoding. Gateway  also translates between the VoIP call control system and other signaling protocols (e.g., JTAPI, SS7, T1, ISDN, etc.), used in PSTN  and converts between the address of the PSTN and the TCP address.","For voice transmissions from PSTN  to network , the process is reversed. In a particular embodiment, gateway  takes the incoming voice transmission (in either analog or digital form) and converts it into the digital format used by network . The digital data is then encapsulated into IP packets and transmitted over network .","When making a call to a PSTN telephony device  from IP telephony device , the voice or fax signal generated by the user of IP telephony device  is digitized and encapsulated, as described above. The packets are then transmitted over network  to gateway . If more than one PSTN gateway  is coupled to network , call manager  determines which gateway is to receive the transmission based on the telephone number (e.g., the North American Numbering Plan (NANP) number) of the PSTN telephony device. Gateway  receives the IP packets and converts the data to the format (either digital or analog) used by the PSTN trunk to which the gateway is connected. The voice signals are then sent to PSTN telephony device  over PSTN . This process, and the reverse process, is continued between PSTN  and network  through gateway  until the call is complete.","When a call is placed to an IP telephony device, for example application server , a call initiation request is first sent to call manager . If the originating telephony device is an IP telephony device (e.g., an intra-LAN or inter-LAN IP call), the originating IP telephony device generates the call initiation request and sends the request to call manager . If the originating telephony device is a non-IP telephony device, such as PSTN telephony device , gateway  first receives the incoming call, and sends a call initiation request to call manager  indicating the IP telephony device that is being called. In either case, once call manager  receives the call initiation request, call manager  sends a signal to application server  offering the call to the telephony device.","If application server  can accept the call application server  replies to call manager  that it will accept the call. Once application server  has accepted the call, the two endpoints (application server  and IP telephony device ) establish RTP audio and\/or video streams between application server  and the originating telephony device. If the originating telephony device is a non-IP telephony device, such as PSTN telephony device , the media streaming occurs between IP telephony device  and gateway . Gateway  then transmits the audio and\/or video data to PSTN telephony device .",{"@attributes":{"id":"p-0045","num":"0044"},"figref":"FIG. 2","b":["32","38","34","38","40","42","44","41","41"],"i":"b "},"In general, a communication session with an endpoint includes one or more signaling communication links, and one or more media communication links. For call manager-routed signaling, call signaling is routed from an endpoint to a call manager using a signaling communication link, instead of communication signals from endpoint to endpoint. Audio, video or other media, on the other hand, is communicated from endpoint to endpoint. Signaling communication links communicate call processing and control signals between endpoints  and call manager . Call Control signals include call initiation requests, information about the capabilities of each telephony device, instructions about establishing and\/or tearing down logical channels (e.g., media communication links), and information about flow control. Out-of-band DTMF signals are also transmitted as call control signals.","Media communication links are used to transfer audio and\/or video media between endpoints. For example, during a telephone conversation, voice packets comprising the conversation between users of endpoints , and\/or application server  are transmitted over media communication links. Similarly, media communication links may be used to transfer stored audio or video files and other information between application server  and endpoint . Application server  may also be configured to send and receive any type of media, including voice to and from a user of endpoint .","As illustrated in , a communication session is established between telephony device and application server . Accordingly, signaling communication links  and  are established between telephony device and call manager , and application server  and call manager , respectively. After setting up the call, a media communication link  is established between telephony device and application server .","During the course of the communication session between application server  and endpoint , call control signaling, as well as DTMF signals are communicated from endpoint to application server  via call manager , using communication links  and . Communication media (audio or video messages) which comprise the communication session between endpoint and application server  is communicated using media streaming communication link . Call manager offers control, management features and services to endpoint and application server , which may be used during the communication session. The control of such features is accomplished using call control signaling over communication links  and .","In order to continuously monitor (check for failure) of the signaling communication link  between application server  and call manager , and between endpoints  and call manager , heartbeat signals are exchanged over a TCP\/IP signaling layer . Heartbeat signals are periodic communications between endpoints  and call manager , and application server  and call manager , to ensure that communication link  is still active, and that application server  and call manager are still capable of communicating with each other. Heartbeat signals may also be referred to as \u201ckeep alive\u201d signals. Any interruptions in keep alive signals between application server  and call manager will be detected by application server . Such failure will not impact the ability of application server  and telephony device to exchange media over pre-established media communication link . However, after the signaling communication link between call manager and application server  is interrupted or fails, application server  looses the ability to receive DTMF signals, transfer calls to other users and\/or ACD agents, etc. The teachings of the present invention provide a system and method wherein communication sessions may be preserved after failure of the call manager, or signaling communication link .","As a first example, assume application server  is an automated attendant. Just as a communication session between telephony device and application server  is established, call manager fails. Automated attendant  detects that JTAPI connectivity (signaling) to call manager has failed since keep alive signals are no longer being received by automated attendant . In this event, automated attendant  is configured to replace any DTMF functionality with in-band adaptive speech recognition (ASR) functionality. Accordingly, automated attendant  asks the caller at telephony device to speak the telephone number, identification number, or name of the called party rather than keying it in with touchtones. When the destination address is obtained, automated attendant  establishes a communication link with a backup call manager, for example call manager . Therefore, signaling communication link  is established between automated attendant  and call manager . Automated attendant  also receives heartbeat signals from call manager over communication link .","Next, automated attendant  originates a communication session with the destination address, for example, telephony device using the JTAPI connectivity of signaling communication link  with backup call manager and signaling communication link  between call manager and telephony device . In this manner, a media communication link  is established between automated attendant  and endpoint . As the communication session is established between automated attendant , and endpoint , automated attendant  tunnels the media from telephony device to telephony device . This effectively achieves a transfer function by creating a new call and tunneling media through automated attendant . Accordingly, automated attendant  acts as an intermediary for a communication session over media communication links  and  to accommodate a communication session between telephony device and telephony device . If call manager had not failed, a media communication link  (shown in dotted lines) would have been established directly between telephony device and ",{"@attributes":{"id":"p-0053","num":"0052"},"figref":["FIG. 3","FIG. 3","FIG. 2"],"b":["38","32","38","36","60","62","64","38","36","62","63","72","74","32","32","32","36"],"i":["b ","a","a ","a","c","d ","a "]},"At this point, any endpoints that are inactive, for example endpoints , and , detect the failure of call manager , and automatically rehome to backup call manager . This allows backup call manager to control any communication session(s) that are ultimately established with any one or more of endpoints , or ","Rather than disconnecting the caller who is now waiting in queue , automatic call distributor  establishes JTAPI connectivity with a backup call manager by establishing signaling communication link  with call manager . Automatic call distributor  then monitors the status of agents , and via the newly established JTAPI connectivity with backup call manager . When automatic call distributor  detects that an agent is freed up, for example the agent at endpoint , automatic call distributor  originates a communication session with endpoint using backup call manager . The communications session between automatic call distributor  and backup call manager includes signaling communication link  and a media communication link .","As the communication session between automatic call distributor  and endpoint is established, automatic call distributor  tunnels media from the caller at endpoint to the agent at endpoint . This is accomplished by receiving media over media communication link  and transmitting the media to endpoint over media communication link . This effectively achieves a transfer function by creating a new call and tunneling the media through automatic call distributor .","Fault tolerance for an IVR, queue manager, and\/or any other type of application server can be achieved in a similar way to the above mentioned scenarios. In accordance with the present invention, the application server generally has two phases: (i) steady state; or (ii) transition phase. In the steady state phase, the application server is connected to the primary call manager and it processes calls using normal operation that includes, for example, transfer of the call (e.g., by an automated attendant or interactive voice response system). The application server enters the transition phase if the application server is handling active calls that originated via the primary call manager, and the primary call manager fails. During the transition phase, the application server establishes signaling connectivity to a backup call manager (in particular embodiments, this connectivity could have been pre-established before the primary call manager failed). Using the backup call manager, the application server tunnels media through the server and connects the media to the new destination by originating a call to the desired destination. The tunneling of media (\u201ctromboning\u201d of the voice) along with the \u201cmake call\u201d operation via the backup call manager emulates and replaces the \u201ctransfer call\u201d operation which can not be achieved via the primary call manager which went down.","All new calls to the application server would be handled via the backup call manager, and processed in a similar way as normal calls during the steady state phase. During the transition phase, the application server handles calls that originated via the failed call manager by using the voice tunneling and \u201cmake call\u201d functionality, while calls that originated via the backup call manager are handled by using the normal treatment and call transfer. The transition phase ends when all calls that originated via the failed call manager are complete and terminated. At this time, the application server enters a new steady state phase, wherein it processes all calls in collaboration with the backup call manager, which is now functioning as primary call manager.","In accordance with a particular embodiment of the present invention, database  may be used to store various information and reporting data regarding communication sessions in which application server  is involved. Reporting data  may include supervisor reporting data  and administrator reporting data . For reasons to be described below, supervisor reporting data  may differ from administrator reporting data , in accordance with the present invention. Such reporting data  may include real-time reporting data and historical reporting data.",{"@attributes":{"id":"p-0060","num":"0059"},"figref":"FIG. 4","b":["100","80","42","102","38","104","106","108","110","112"]},"Column  is used to identify the index number of any \u201cassociated call(s)\u201d. In a particular embodiment of the present invention an \u201cassociated call\u201d refers to any calls made by application server  in response to failure of one or more call managers. Column  designates the associated call manager, which identifies the call manager responsible for a portion of the communication session (e.g., signaling). Column  identifies the endpoint to which a call was transferred. For example, if application server  were serving as an automatic call distributor, the transfer endpoint would refer to one of several agents available to field calls from users of application server .","Supervisor reporting data  is primarily focused upon management of the various agents. In the case of a failed call manager, an agent's supervisor would not be concerned about how a particular call was accomplished. Instead, the agent's supervisor is interested in \u201ccore\u201d information including which agent received the call, where the call originated from, and how long the agent participated in the communication session. Therefore, any transfer of call managers, or tunneling of a communication session through application server  could be transparent to the agent's supervisor.","Administrator reporting data  is primarily focused upon performance of the network and associated components, including applications server . Therefore, an administrator receiving administrator reporting data would receive particular information regarding failure of a call manager, and\/or tunneling of a communication session through application server .",{"@attributes":{"id":"p-0064","num":"0063"},"figref":"FIG. 4","b":["82","84","1","2","106","108","110","112","114","3","38","74","38","38","4"],"sub":["1 ","2 ","1","1 ","3","3 ","3 "]},"Administrator reporting data  would include each of index numbers  and , as well as an indication of the failure of CMduring the communication session. This allows the administrator to perform debugging and diagnostic information. However, for the purposes of supervisor reporting data , Index numbers  and  would be combined, since the net effect was a single communication session between the user and agent A.",{"@attributes":{"id":"p-0066","num":"0065"},"figref":"FIG. 5","b":["200","202","204"]},"In the embodiments of , an application server may be the endpoint which detects failure of a call manager which is managing signaling between the endpoints (e.g. telephony device and application server). In this case, the application server may initiate the connection with a backup call manager, or signaling manager. It should be recognized within the teachings of the present invention that the connection with the backup signaling manager may take place before a failure of the primary signaling manager is detected. For example, an application server or any other telephony device or endpoint may be configured to establish a connection with a backup signaling manager at any time during the communication session, or as the communication session is established. In this manner, switch over to a backup signaling manager may be accomplished more quickly and efficiently.","At step , a transfer condition for the communication session is detected. This is typically the point during the communication session in which the user of another endpoint participates in the communication session either in lieu of, or in addition to one of the endpoints. For example, if a user is waiting in the queue of an application server, the transfer condition may comprise the availability of an agent. When the agent is available, a second communication session is established with the transfer endpoint (e.g., agent) using the backup signaling manager to control signaling between the application server and the agent.","At step , a media stream of the first communication is linked with the media stream of the second communication session. For example, this step may include tunneling of media through an application server, as described with regard to . This allows media to be exchanged between and endpoint and an agent through the application, by linking the communication session between the endpoint and the application server with the communication session between the application server and the agent.","The communication is monitored at step . At step , the status of the communication session is determined. For purposes of this example, the communication session being monitored is the communication session between the endpoint and the agent, which includes a linking of the first communication session with the second communication session, as described above. If the communication session is not complete, monitoring continues at step . If the communication session is complete, the communication session is ended at step . Ending the communication session includes tearing down the media communication stream between the endpoint and the application server, and tearing down the signaling communication link between the application server and the agent (through a call manager) and the media communication stream from the application server to the agent. At step , report data is updated. The report data may include some or all of the reporting data referred to with regard to .",{"@attributes":{"id":"p-0071","num":"0070"},"figref":"FIG. 6","b":["300","302","304","306"]},"At step , the status of the call manager is established. If the call manager is active, the status of the communication session is determined at step . If the communication is complete at , the session is dropped at step . If the session is not complete at step , the gateway continues to separate media from DTMF signaling at , and send the DTMF signaling out-of-band.","However, if the call manager fails, or is otherwise not active at step , the gateway communicates both media and signaling to the IP telephony device, at step . In this manner, the gateway essentially switches from out-of-band signaling to in-band signaling, after failure of the call manager is detected. This allows all of the data and information (both media and signaling) of the communication session to be communicated to the second endpoint. It should also be recognized that the second endpoint must be configured to operate in one of two modes, which includes an out-of-band signaling mode and an in-band signaling mode. Therefore, the second endpoint may be configured to detect failure of the call manager, and\/or the gateway may be configured to notify the second endpoint of the failure of the call manager. At step  the status of the communication session is established. If the communication session is not complete, the gateway continues communicating both media and signaling to the second endpoint. If however, the communications session is complete at step , the communication session is dropped at .","Although the present invention has been described with several embodiments, a myriad of changes, variations, alterations, transformations, and modifications may be suggested to one skilled in the art, and it is intended that the present invention encompass such changes, variations, alterations, transformations, and modifications as fall within the spirit and scope of the appended claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["For a more complete understanding of the present invention, and for further features and advantages, reference is now made to the following description, taken in conjunction with the accompanying drawings, in which:",{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 6"}]},"DETDESC":[{},{}]}
